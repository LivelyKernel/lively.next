System.register(["kld-intersections"],function(Ba,Ab){var Qb;return{setters:[function(dc){Qb=dc.default}],execute:function(){function dc(d,c,h){h=h||0;var f=[];if(d<=c)for(0>=h&&(h=-h||1);d<=c;d+=h)f.push(d);else for(0<=h&&(h=-h||-1);d>=c;d+=h)f.push(d);return f}function Xb(d,c){for(var h=Array(d);0<d;)h[--d]=c;return h}function Xd(d,c){for(var h=Array(d);0<d;)h[--d]=c(d);return h}function ad(d,c,h){for(var f=[],k=0;k<d.length;k++){var n=d[k];c.call(h,n)&&f.push(n)}return f}function Nd(d,c){var h;
d.find(function(f,k){return h=c(f,k)});return h}function dd(d,c){return d.filter(function(h){return!!h[c]})}function Lc(d,c,h){"string"===typeof c&&(c=new RegExp(c,"i"));return Sb.filter(d,Sb.filter.test.bind(c))}function rd(d,c){return Sb.filter(d,function(h,f){return!!c[f]})}function Gd(d,c,h){return Sb.filter(d,function(f,k){return!c.call(h,f,k)})}function ke(d,c){return Sb.filter(d,function(h){return!h[c]})}function Kd(d,c){return Sb.filter(d,function(h){return h!==c})}function Hc(d,c){return Sb.filter(d,
function(h){return-1===c.indexOf(h)})}function fb(d,c){if(!d.length)return d;var h=[d[0]];if(c)for(c=1;c<d.length;c++){var f=d[c];f!==h[h.length]&&h.push(f)}else for(c=1;c<d.length;c++)f=d[c],-1===h.indexOf(f)&&h.push(f);return h}function Db(d,c,h){for(var f=d.slice(),k=f.length;k--;)for(var n=d[k],b=k+1;b<f.length;b++)c.call(h,n,f[b])&&f.splice(b--,1);return f}function mc(d,c){for(var h={},f=[],k=0;k<d.length;k++){var n=d[k];h[n[c]]||(h[n[c]]=!0,f.push(n))}return f}function hc(d){return Sb.filter(d,
Boolean)}function Tc(d){for(var c=0,h=0,f=d.length;c<f;)d.hasOwnProperty(c)&&(d[h++]=d[c]),c++;for(;h++<f;)d.pop();return d}function Ld(d,c,h){return d.forEach(c,h)}function oc(){var d=Array.from(arguments),c=d.shift(),h="function"===typeof Sb.last(d)?d.pop():function(k){return k},f=[c].concat(d).map(function(k){return Array.from(k)});return c.map(function(k,n){return h(Sb.pluck(f,n),n)})}function pc(d,c){if("number"===typeof c){if(0>=c)return d;c--}return d.reduce(function(h,f){return h.concat(Array.isArray(f)?
pc(f,c):[f])},[])}function Nb(d,c,h){for(var f=[],k=0;k<d.length;k++)f.push.apply(f,c.call(h,d[k],k));return f}function Dc(d,c){return d.reduce(function(h,f){0<h.length&&h.push(c);h.push(f);return h},[])}function Vc(d,c){return Sb.interpose(d,c)}function Hd(d,c,h){return d.map(c,h)}function Id(d,c,h,f,k,n,b,e){return d.map(function(m){return m[c](h,f,k,n,b,e)})}function rb(d,c){return d.map(function(h){return h[c]})}function Hb(d,c,h,f){return d.reduce(c,h,f)}function Mc(d,c,h,f){return d.reduceRight(c,
h,f)}function qb(d,c,h){return d.some(c,h)}function tb(d,c,h){return d.every(c,h)}function eb(d,c){var h=d.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++){if(d[f]&&c[f]&&d[f].equals&&c[f].equals)if(d[f].equals(c[f]))continue;else return!1;if(d[f]!=c[f])return!1}return!0}function ob(d,c){var h=d.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++)if(!Sb.objectEquals(d[f],c[f]))return!1;return!0}function wb(d,c){if(c)for(c=1;c<d.length;c++){if(d[c-1]<d[c])return!1}else for(c=1;c<d.length;c++)if(d[c-
1]>d[c])return!1;return!0}function cb(d,c){return d.sort(c)}function Oa(d,c,h){return Sb.pluck(d.map(function(f,k){return{value:f,criteria:c.call(h,f,k)}}).sort(function(f,k){f=f.criteria;k=k.criteria;return f<k?-1:f>k?1:0}),"value")}function Gb(d,c){return Sb.sortBy(d,function(h){return h[c]})}function sc(d){return d.reverse()}function vc(d){return d.slice().reverse()}function fc(d,c,h){h=h||String;return d.map(function(f){return h(f).match(c)})}function rc(d){return d[0]}function Q(d){return d[d.length-
1]}function ha(d,c){return Sb.filter(Sb.uniq(d),function(h){return-1<c.indexOf(h)})}function Ga(d,c){d=d.slice();for(var h=0;h<c.length;h++){var f=c[h];-1===d.indexOf(f)&&d.push(f)}return d}function La(d,c,h){d.splice(h,0,c)}function Yb(d,c){d.splice(c,1)}function kc(d,c){var h=d.indexOf(c);0<=h&&Sb.removeAt(d,h);return c}function Ua(d,c){d.push.apply(d,c);return d}function ec(d,c,h){d.splice.apply(d,[h,0].concat(c))}function ge(d,c){d.includes(c)||d.push(c)}function ee(d,c,h){d.splice(h,1,c)}function ed(d){d.length=
0;return d}function ab(d,c){for(var h=0;h<d.length;h++)if(!c.includes(d[h]))return!1;return!0}function Rc(d,c,h,f){h=h||Sb.NullFunction;f=f||Sb.GLOBAL;c=c||function(k,n,b){n.call(f,k,b)};return d.reduceRight(function(k,n,b){return function(){c.call(f,k,n,b)}},h)()}function pb(d,c,h,f,k,n){f=f||function(){};return d.clone().reverse().reduce(function(b,e,m){return function(){c.call(k||Sb.GLOBAL,e,m);n&&0!==m%n?b():b.delay(h)}},f)()}function bd(){var d=Array.from(arguments),c=d.shift(),h=c.length,f=
!1;if(1===d.length){var k=d[0].progressBar;var n=d[0].iterator;var b=d[0].labelFunction;var e=d[0].whenDone;var m=d[0].context}else k=d[0],n=d[1],b=d[2],e=d[3],m=d[4];m||(m="undefined"!==typeof window?window:global);b||(b=function(a){return a});k||(f=!0,k=(d=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?d.addProgressBar():{value:null,label:null,remove:function(){}});k.value=0;c.reduceRight(function(a,g,l){return function(){try{k.value=l/h,b&&(k.label=
b.call(m,g,l)),n.call(m,g,l)}catch(r){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",l,g,r,r.stack)}Sb.delay(a,0)}},function(){k.value=1;f&&function(){k.remove()}.delay(0);e&&e.call(m)})();return c}function od(d,c,h){0>c&&(c=d.length+c);0>h&&(h=d.length+h);var f=d[c];d[c]=d[h];d[h]=f;return d}function lb(d,c){c=c||1;return d.slice(c).concat(d.slice(0,c))}function Sa(d,c,h){return Sb.Group.fromArray(d,c,h)}function qc(d,c){return Sb.groupBy(d,function(h){return h[c]})}function le(d,
c,h){c=c||function(n){return n};var f=[],k=[];d.forEach(function(n,b){(c.call(h,n,b)?f:k).push(n)});return[f,k]}function Zd(d,c,h){function f(n,b){if(!b.length)return[n,[]];var e=b[0];b=b.slice(1);var m=n.concat([e]);if(c.call(h,m))return f(m,b);n=f(n,b);return[n[0],[e].concat(n[1])]}function k(n,b){if(!b.length)return n;b=f([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return k(n.concat([b[0]]),b[1])}return k([],d)}function Fe(d,
c){c=c||1;return Sb.range(0,Math.ceil(d.length/c)-1).map(function(h){return d.slice(h*c,h*c+c)},d)}function Oc(d,c){for(var h=d.map(function(b,e){return b[c[e]]}),f=c.slice(),k=d.length;k--;0<=k){var n=f[k]+1;if(d[k][n]){f[k]=n;break}else if(0===k){f=void 0;break}else f[k]=0}return[h,f]}function te(d){for(var c=d.reduce(function(n,b){return n*b.length},1),h=d.map(function(n){return 0}),f=Array(c),k=0;k<c;k++)h=Sb.combinationsPick(d,h),f[k]=h[0],h=h[1];return f}function md(d,c){return d.slice(0,c)}
function Eb(d,c){return d.slice(c)}function xa(d,c,h){for(var f=0;f<d.length&&c.call(h,d[f],f);f++);return d.slice(0,f)}function Ca(d,c,h){for(var f=0;f<d.length&&c.call(h,d[f],f);f++);return d.slice(f)}function Mb(d){for(var c=Sb.range(0,d.length-1),h=Array(d.length),f=0;f<d.length;f++){var k=c.splice(Math.round(Math.random()*(c.length-1)),1);h[k]=d[f]}return h}function P(d,c,h){c=c||function(k){return k};var f;d.reduce(function(k,n,b){b=c.call(h,n,b);if("number"!==typeof b||b<=k)return k;f=n;return b},
-Infinity);return f}function za(d,c,h){c=c||function(f){return f};return Sb.max(d,function(f,k){return-c.call(h,f,k)})}function Ta(d){for(var c=0,h=0;h<d.length;h++)c+=d[h];return c}function Fb(d,c){return d.reduce(function(h,f){return f===c?h+1:h},0)}function Cc(d){return d.length}function Uc(d,c){if("undefined"===typeof c||"number"===typeof c){var h=c||Math.ceil(Math.log(d.length)/Math.log(2)+1),f=Math.ceil(Math.round(d.length/h));return Sb.range(0,h-1).map(function(k){return d.slice(k*f,(k+1)*
f)})}if(c instanceof Array)return d.reduce(function(k,n){if(n<c[1])return k[0].push(n),k;for(var b=1;b<c.length;b++)if(n>=c[b]&&(!c[b+1]||n<=c[b+1]))return k[b].push(n),k;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},Sb.range(1,c.length).map(function(){return[]}))}function he(d){return[].concat(d)}function we(d){return Sb.from(d)}function nf(d,c,h){return d.forEach(c,h)}function yd(d,c,h){return d.every(c,h)}function Ce(d,c,h){return d.some(c,h)}function wf(d,c,h){return d.map(c,
h)}function Ie(d,c,h){return Sb.filter(d,c,h)}function Fg(d,c,h,f){f&&(h=h.bind(f));return d.reduce(h,c)}function Rf(d,c,h){function f(b,e){if(!n&&(b||e)){n=!0;try{h(b,k)}catch(m){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(m.stack||m))}}}var k=[],n=!1;return d.reduceRight(function(b,e,m){if(!n)return function(a,g){if(a)return f(a);0<m&&k.push(g);try{c(e,m,Sb.once(b))}catch(l){f(l)}}},function(b,e){k.push(e);f(b,!0)})()}function Jc(d,c,h,f){function k(){for(;g<c.parallel&&
a<d.length;)l[a++]()}function n(r,v){if(!(-1<e.indexOf(r)||(e.push(r),g--,m)))if(!v&&e.length<d.length)k();else{m=!0;try{f&&f(v,b)}catch(y){console.error("Error in mapAsync - main callback invocation error:\n"+(y.stack||y))}}}"function"===typeof c&&(f=h,h=c,c=null);c=c||{};if(!d.length)return f&&f(null,[]);c.parallel||(c.parallel=Infinity);var b=[],e=[],m=!1,a=0,g=0,l=d.map(function(r,v){return function(){g++;try{h(r,v,Sb.once(function(y,A){b[v]=y||A;n(v,y)}))}catch(y){n(v,y)}}});return k()}function of(){return function(){}}
function pg(){return function(d){return d}}function qg(){return function(){return null}}function ff(){return function(){return!1}}function Ja(){return function(){return!0}}function $a(){return function(){throw Error("Not yet implemented");}}function Bb(d){var c=[],h;for(h in d)d.__lookupGetter__(h)||"function"!==typeof d[h]||c.push(h);return c}function ba(d){var c=[],h;for(h in d)!d.__lookupGetter__(h)&&d.hasOwnProperty(h)&&"function"===typeof d[h]&&c.push(h);return c}function Ia(d){if(d.superclass)return[];
var c=d.toString();d="";var h=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);h?d=h[1]||h[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(d=c[1]);return d.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(f){return f.trim()}).filter(function(f){return!!f})}function nb(d){var c="";d.declaredClass?c+=d.declaredClass+">>":d.declaredObject&&(c+=d.declaredObject+".");return c+(d.methodName||d.displayName||d.name||"anonymous")}function zb(d){d=
String(d).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=d.split(/\n|\r/),h,f=0;f<c.length;f++){var k=c[f].match(/^(\s+)[^\s]/);k&&(void 0===h||k[1].length<h.length)&&(h=k[1])}return h?d.replace(new RegExp("^"+h,"gm"),""):d}function Ec(d){var c=Date.now();d();return Date.now()-c}function Gc(d,c){for(var h=Date.now(),f=0;f<c;f++)d();return(Date.now()-h)/c}function qd(d,c){var h=Array.prototype.slice.call(arguments),f=h.shift();c=1E3*h.shift();return setTimeout(function(){return f.apply(f,
h)},c)}function sd(d,c){var h,f,k,n,b,e,m=Bd.debounce(c,function(){b=n=!1});return function(){h=this;f=arguments;k||(k=setTimeout(function(){k=null;b&&d.apply(h,f);m()},c));n?b=!0:e=d.apply(h,f);m();n=!0;return e}}function vd(d,c,h){var f;return function(){var k=this,n=arguments;h&&!f&&c.apply(k,n);clearTimeout(f);f=setTimeout(function(){f=null;h||c.apply(k,n)},d)}}function Cf(d,c,h){var f=Bd._throttledByName;return f[d]?f[d]:f[d]=Bd.throttle(function(){Bd.debounceNamed(d,c,function(){delete f[d]})();
return h.apply(this,arguments)},c)}function yg(d,c,h,f){var k=Bd._debouncedByName;return k[d]?k[d]:k[d]=Bd.debounce(c,function(){delete k[d];return h.apply(this,arguments)},f)}function fg(d,c){var h=Bd._queues,f=h[d]||(h[d]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(k){f.tasks.push(k);f._workerActive||f.activateWorker()},pushAll:function(k){k.forEach(function(n){f.tasks.push(n)});f._workerActive||f.activateWorker()},pushNoActivate:function(k){f.tasks.push(k)},handleError:function(k){k&&
console.error("Error in queue: "+k)},activateWorker:function(){function k(e){f.handleError(e);f.activateWorker()}var n=f.tasks,b=f._workerActive;if(0===n.length)b&&(f._workerActive=!1,"function"===typeof f.drain&&f.drain()),delete h[d];else{b||(f._workerActive=!0);try{f.worker(n.shift(),k)}catch(e){k(e)}}}});return f}function xf(d,c,h){function f(){a&&clearTimeout(a);e=!0;delete n[d]}function k(g){e||(f(),b.callbacks.forEach(function(l){try{l.apply(null,g)}catch(r){console.error("Error when invoking callbacks in queueUntil ["+
d+"]:\n"+String(r.stack||r))}}))}var n=Bd._queueUntilCallbacks,b=n[d];if(b)return b;var e=!1,m=!1;if(h)var a=setTimeout(function(){e||k([Error("timeout")])},h);b=n[d]={callbacks:[],cancel:function(){m=!0;f()},whenDone:function(g){b.callbacks.push(g);return b}};setTimeout(function(){if(!m)try{c(function(){k(arguments)})}catch(g){k([g])}},0);return b}function ri(){var d=Array.prototype.slice,c=d.call(arguments),h=Bd._composeAsyncDefaultEndCallback,f=h,k,n,b=new Promise(function(e,m){k=e;n=m});return c.reverse().reduce(function(e,
m,a){var g=!1;return function(){function l(){g=!0;var y=d.call(arguments),A=y.shift();A?(f(A),n(A)):e.apply(null,y)}var r=d.call(arguments);if(f===h&&a===c.length-1){for(;r.length&&"function"!==typeof r[r.length-1];)r.pop();"function"===typeof r[r.length-1]&&(f=r.pop())}if("function"===typeof m)try{var v=m.apply(this,r.concat([l]));v&&"function"===typeof v.then&&"function"===typeof v.catch&&v.then(function(y){return l(null,y)}).catch(function(y){return l(y)})}catch(y){console.error("composeAsync: ",
y.stack||y),g||(f(y),n(y))}else m&&"function"===typeof m.then&&"function"===typeof m.catch?m.then(function(y){l(null,y)}).catch(function(y){l(y)}):(r=Error("Invalid argument to composeAsync: "+m),f(r),n(r));return b}},function(){var e=d.call(arguments);f.apply(null,[null].concat(e));k(e[0])})}function Lh(){return Array.prototype.slice.call(arguments).reverse().reduce(function(d,c){return function(){return d(c.apply(this,arguments))}},function(d){return d})}function Aj(d){return function(){var c=Array.prototype.slice.call(arguments);
c=[c[1],c[0]].concat(c.slice(2));return d.apply(null,c)}}function Zh(d){d=d||function(){};return function(){var c=Bd.arr.from(arguments);d.apply(null,[null].concat(c))}}function qk(d,c,h){var f=Date.now(),k=50;h||(h=c,c=d,d=void 0);(function b(){if(c())return h();if(d){var e=Date.now()-f;e=d-e;if(0>=e)return h(Error("timeout"));e<k&&(k=e)}setTimeout(b,k)})()}function Gg(d,c,h){function f(b,e,m,a){if(n.length){var g=null;b=n.indexOf(b);-1<b&&n.splice(b,1);m?(n.length=0,g=Error("in waitForAll at"+("number"===
typeof e?" "+e:"")+": \n"+(m.stack||String(m)))):a&&(k[e]=a);n.length||setTimeout(function(){h(g,k)},0)}}h||(h=c,c=d,d=null);d=d||{};var k=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(b,e){try{b(function(){var m=Array.prototype.slice.call(arguments),a=m.shift();f(b,e,a,m)})}catch(m){f(b,e,m,null)}});d.timeout&&setTimeout(function(){if(n.length){var b=k.map(function(e,m){return null===e&&m}).filter(function(e){return"number"===typeof e}).join(", ");
f(null,null,Error("waitForAll timed out, functions at "+b+" not done"),null)}},d.timeout)}else h(null,k)}function fk(d,c,h,f){function k(){return d.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);d=n.shift();k.isWrapper=!0;k.originalFunction=d;return k}function Hi(d,c){var h=function(){var f=Array.prototype.slice.call(arguments);f=c.isWrapper?f:[d.bind(this)].concat(f);return c.apply(this,f)};h.isWrapper=
!0;h.originalFunction=d;return h}function dk(d){for(;d.originalFunction;)d=d.originalFunction;return d}function rj(d){var c=[];do c.push(d),d=d.originalFunction;while(d);return c}function rl(d,c,h){h.originalFunction=d[c];var f=d.hasOwnProperty(c);d[c]=function(){f?d[c]=h.originalFunction:delete d[c];return h.apply(this,arguments)};return d}function Al(d){if(d){if("function"!==typeof d)throw Error("once() expecting a function");var c=!1,h;return function(){if(c)return h;c=!0;return h=d.apply(this,
arguments)}}}function mm(){var d=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!d)return d=!0,c.apply(this,arguments)}})}function Uk(d,c){var h=Array.prototype.slice.call(arguments),f=Bd._eitherNameRegistry;d=h.shift();var k=f[d]||(f[d]={wasCalled:!1,callsLeft:0});k.callsLeft++;return function(){k.callsLeft--;0>=k.callsLeft&&delete f[d];if(!k.wasCalled)return k.wasCalled=!0,c.apply(this,arguments)}}function qi(d){return eval(d)}function ek(d){return Bd.evalJS("("+
d.toString()+");")}function gn(d,c){return Bd.Closure.fromFunction(d,c).recreateFunc()}function Nf(d,c,h,f){var k=h||d.name;if(!k)throw Error("Function that wants to be a script needs a name: "+this);h=Object.getPrototypeOf(c);var n={this:c};f&&(n=Bd.objectMerge([n,f]));h&&h[k]&&(n.$super=Bd.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[k].apply(c,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+
b+"\n"+b.stack),null}},{obj:c,name:k}).recreateFunc());return Bd.addToObject(Bd.asScript(d,n),c,k)}function Wk(d,c,h){d.displayName=h;var f=c.attributeConnections?c.attributeConnections.filter(function(k){return"update"===k.getSourceAttrName()}):[];f&&f.forEach(function(k){k.disconnect()});c[h]=d;typeof c&&(d.declaredObject=Bd.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,h,{declaredObject:Bd.safeToString(c)});
f&&f.forEach(function(k){k.connect()});return d}function Ub(d,c){return Bd.Closure.fromFunction(d,c||{}).recreateFunc()}function td(d,c,h){d.hasLivelyClosure&&(d.livelyClosure.funcProperties[c]=h)}function ue(d){return d.hasLivelyClosure?d.livelyClosure.varMapping:d.isWrapper?d.originalFunction.varMapping:d.varMapping?d.varMapping:{}}function Ud(d,c,h){d[c]=h;d.hasLivelyClosure&&(d.livelyClosure.funcProperties[c]=h)}function pd(d){for(var c=[],h=d.prototype;h;)c=Object.keys(h).reduce(function(f,k){"function"===
typeof h[k]&&-1===f.indexOf(k)&&f.push(k);return f},c),h=Object.getPrototypeOf(h);return c}function Ig(d){return Object.keys(d.prototype).filter(function(c){return"function"===typeof d.prototype[c]})}function Ij(d,c){var h=function(f){var k=Array.prototype.slice.call(arguments);k.shift();try{return f.apply(d,k)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",
d,c,k,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};h.methodName="$logErrorsAdvice";h=Bd.wrap(d,h);h.originalFunction=d;h.methodName="$logErrorsWrapper";return h}function $l(d,c){var h=function(f){var k=Array.prototype.slice.call(arguments);k.shift();try{var n=f.apply(d,k)}catch(b){throw console.warn("failed to load "+c+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+c);return n};h.methodName="$logCompletionAdvice::"+
c;h=Bd.wrap(d,h);h.methodName="$logCompletionWrapper::"+c;h.originalFunction=d;return h}function Lq(d,c){var h=function(k){var n=Array.prototype.slice.call(arguments);n.shift();f=k.apply(d,n);c?console.warn("%s(%s) -> %s",Bd.qualifiedMethodName(d),n,f):console.log("%s(%s) -> %s",Bd.qualifiedMethodName(d),n,f);return f};h.methodName="$logCallsAdvice::"+Bd.qualifiedMethodName(d);var f=Bd.wrap(d,h);f.originalFunction=d;f.methodName="$logCallsWrapper::"+Bd.qualifiedMethodName(d);return f}function Yp(d,
c){return Bd.wrap(d,function(h){var f=Array.prototype.slice.call(arguments);f.shift();c.push(f);f=h.apply(d,f);c.pop();return f})}function nm(){try{throw Error();}catch(d){return String(d.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}function Gn(d){if(d&&Array.isArray(d))return"["+d.map(Gn)+"]";if("string"!==typeof d)return String(d);d=String(d);d=d.replace(/\n/g,"\\n\\\n");d=d.replace(/(")/g,"\\$1");return'"'+d+'"'}function Ok(d){return Array.isArray(d)}
function om(d){return d&&1==d.nodeType}function pk(d){return d instanceof Function}function dn(d){return"boolean"===typeof d}function po(d){return"string"===typeof d}function oo(d){return"number"===typeof d}function cn(d){return"undefined"===typeof d}function Cm(d){return d instanceof RegExp}function Pk(d){return"object"===typeof d}function Hn(d){if(!d)return!0;switch(typeof d){case "string":case "number":case "boolean":return!0}return!1}function Dm(d){for(var c in d)if(d.hasOwnProperty(c))return!1;
return!0}function ug(d,c){if(d===c)return!0;if(!d||!c)return d==c;if(Array.isArray(d))return ve.arrayDeepEquals(d,c);switch(d.constructor){case String:case Date:case Boolean:case Number:return d==c}if("function"===typeof d.isEqualNode)return d.isEqualNode(c);if("function"===typeof d.equals)return d.equals(c);var h=[],f;for(f in d)if(h.push(f),"function"!==typeof d[f]&&!ug(d[f],c[f]))return!1;for(f in c)if(-1===h.indexOf(f)&&"function"!==typeof c[f]&&!ug(c[f],d[f]))return!1;return!0}function sl(d){return d?
Object.keys(d).map(function(c){return d[c]}):[]}function pm(d,c){for(var h={},f=0;f<c.length;f++)h[c[f]]=d[c[f]];return h}function Em(d,c){d=d||{};d=ve.getOwnPropertyDescriptors(d);for(var h=0;h<c.length;h++)c[h]in d&&delete d[c[h]];return Object.defineProperties({},d)}function ih(d,c,h,f){c=ve.functionFromString(c);return ve.asScriptOf(c,d,h,f)}function qo(d,c){for(var h=null,f=1;f<arguments.length;f++)if("string"===typeof arguments[f])h=arguments[f],d.categories||(d.categories={}),d.categories[h]||
(d.categories[h]=[]),h=d.categories[h];else{c=arguments[f];for(var k in c){var n=c.__lookupGetter__(k),b=c.__lookupSetter__(k);n&&d.__defineGetter__(k,n);b&&d.__defineSetter__(k,b);n||b||(n=c[k],d[k]=n,h&&h.push(k),"function"===typeof n&&(n.displayName||(n.displayName=k),"undefined"!==typeof lively&&lively.Module&&lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return d}function ji(d){if(ve.isPrimitive(d))return d;if(Array.isArray(d))return Array.prototype.slice.call(d);var c={},
h;for(h in d)d.hasOwnProperty(h)&&(c[h]=d[h]);return c}function Zj(d,c,h){for(var f={},k=0;k<c.length;k++)c[k]in d&&(f[c[k]]=h?h(c[k],d[c[k]]):d[c[k]]);return f}function Bi(d,c,h){c=c||{};h=h||0;if(c.customPrinter){var f=c._ignoreSignal||(c._ignoreSignal={}),k=c.customPrinter(d,f,function(r){return Bi(r,c,h+1)});if(k!==f)return k}if(!d)return ve.print(d);if("function"===typeof d)return c.printFunctionSource?String(d):"function"+(d.name?" "+d.name:"")+"("+ve.argumentNames(d).join(",")+") {/*...*/}";
switch(d.constructor){case String:case Boolean:case RegExp:case Number:return ve.print(d)}if("function"===typeof d.serializeExpr)return d.serializeExpr();var n=d&&Array.isArray(d);f=n?"[":"{";k=n?"]":"}";if(c.maxDepth&&h>=c.maxDepth)return f+"/*...*/"+k;var b=[];if(n)b=d.map(function(r){return Bi(r,c,h+1)});else for(var e=Object.keys(d).sort(function(r,v){var y="function"===typeof d[r];return y===("function"===typeof d[v])?r<v?-1:r>v?1:0:y?1:-1}),m=0;m<e.length;m++){if(m>(c.maxNumberOfKeys||Infinity)){e=
e.length-m;b.push("..."+e+" hidden "+(1<e?"entries":"entry")+"...");break}var a=e[m];n&&Bi(d[a],c,h+1);var g=Bi(d[a],c,h+1);b.push((c.escapeKeys?JSON.stringify(a):a)+": "+g)}if(0===b.length)return f+k;e=b.join(", ");m=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||e.length>=c.minLengthForNewLine);var l=ve.indent("",c.indent||"  ",h);a=ve.indent("",c.indent||"  ",h+1);g=m&&!n?"\n"+a:"";n=m&&!n?"\n"+l:"";m&&(e=b.join(","+(m?"\n"+a:"")));return f+g+e+n+k}function Bl(d){return 1<arguments.length?Bl(Array.prototype.slice.call(arguments)):
Array.isArray(d[0])?Array.prototype.concat.apply([],d):d.reduce(function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f]);return c},{})}function Fm(d,c){if(!d)return c;if(!c)return d;if(Array.isArray(d)){if(!Array.isArray(c))return c;var h=d.map(function(f,k){return Fm(f,c[k])});c.length>d.length&&(h=h.concat(c.slice(d.length)));return h}return"object"!==typeof d||"object"!==typeof c?c:Object.keys(d).concat(Object.keys(c)).reduce(function(f,k){f[k]=d[k]?c[k]?"object"!==typeof d[k]||"object"!==
typeof c[k]?c[k]:Fm(d[k],c[k]):d[k]:c[k];return f},{})}function Qe(d,c){c=[];for(var h in d){var f=d[h],k=f.hasOwnProperty("before")?f.before:f.before=[];f=f.hasOwnProperty("after")?f.after:f.after=[];for(var n=k.length;n--;){var b=k[n],e=d[b];e?(e.hasOwnProperty("after")||(e.after=[]),e.after.push(h)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized before "+b+" but that property cannot be found.")),k.splice(n,1))}for(k=f.length;k--;)n=f[k],
d[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized after "+n+" but that property cannot be found.")),f.splice(k,1));c.push(h)}h=[];f=[];for(k=c.length+1;c.length;){if(k===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+c.map(function(m){var a=d[m].before,g=d[m].after;if(!(a&&a.length||g&&g.length))return"";m+="\n";a&&a.length&&(m+="  - before "+a.join(",")+"\n");g&&g.length&&(m+="  - after "+
g.join(",")+"\n");return m}).join(""));k=c.length;n=[];for(b=c.length;b--;)e=c[b],ve.isSubset(d[e].after,f)&&(c.splice(b,1),f.push(e),n.push(e));h.push(n)}return ve.flatten(h,1)}function fn(d){return Object.create(d)}function Qo(d,c){for(var h=[];d;)d.hasOwnProperty(c)&&h.unshift(d[c]),d=Object.getPrototypeOf(d);return h}function qm(d,c){return ve.merge(ve.valuesInPropertyHierarchy(d,c))}function qp(d){if(!d||"object"!==typeof d||d instanceof RegExp)return d;var c=Array.isArray(d)?Array(d.length):
{},h;for(h in d)d.hasOwnProperty(h)&&(c[h]=qp(d[h]));return c}function ro(d){return null===d?"null":"undefined"===typeof d?"undefined":d.constructor.name}function Nl(d){function c(f,k,n,b){if(f.constructor.name===k){h+=n;if(f.length||Object.keys(f).length)h+="...";h+=b}}if(!ve.isMutableType(d))return ve.safeToString(d);if("Object"!==d.constructor.name&&!Array.isArray(d)&&d.constructor.name)return d.constructor.name?d.constructor.name:Object.prototype.toString.call(d).split(" ")[1].split("]")[0];var h=
"";c(d,"Object","{","}");c(d,"Array","[","]");return h}function so(d){return-1===["null","undefined","Boolean","Number","String"].indexOf(ve.typeStringOf(d))}function yh(d){try{return(d?d.toString():String(d)).replace("\n","")}catch(c){return"<error printing object>"}}function rp(d){switch(typeof d){case "string":return new String(d);case "boolean":return new Boolean(d);case "number":return new Number(d);default:return d}}function In(d,c){c=void 0===c?"_":c;var h=1;do var f=c+"-"+h++;while(f in d);
return f}function Ro(){return Yc.formatFromArray(Array.prototype.slice.call(arguments))}function bn(d){function c(r,v){return""+r}function h(r,v){return r.toString()}function f(r,v){return Yc.inspectObject(r)}var k=d.shift();k||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:h,i:h,f:function(r,v,y){return-1<y?r.toFixed(y):r.toString()},o:f},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;k=function(r){for(var v=[],y=b.exec(r);y;y=b.exec(r)){var A=
y[8]||y[5];A=A in n?n[A]:f;var E=y[3]?parseInt(y[3]):"."==y[4]?-1:0;v.push(r.substr(0,"%"==y[0][0]?y.index:y.index+1));v.push({appender:A,precision:E});r=r.substr(y.index+y[0].length)}r&&v.push(r.toString());return v}(k);for(var e="",m=0,a=0;a<k.length;++a){var g=k[a];if(g&&"object"==typeof g){var l=d[m++];e+=(g.appender||c)(l,e,g.precision)}else e+=""+g}return e}function am(d,c,h){if(!h||0>=h)return d;for(var f="";0<h;)h--,f+=c;return Yc.lines(d).map(function(k){return f+k}).join("\n")}function Ol(d,
c){c||(c="  ");return Yc.min(d.match(new RegExp("^("+c+")*","gm")).map(function(h){return Math.floor(h.length/c.length)}))}function rm(d,c,h){c||(c="  ");h||(h=0);var f=Yc.minIndent(d,c);if(f===h)return d;if(f<h)return Yc.indent(d,c,h-f);var k=c.repeat(f-h);return Yc.lines(d).map(function(n){return n.slice(k.length)}).join("\n")}function bm(d){return'"'+d.replace(/"/g,'\\"')+'"'}function ra(d){if(d&&Array.isArray(d))return"["+d.map(ra)+"]";if("string"!==typeof d)return String(d);d=String(d);d=d.replace(/\n/g,
"\\n\\\n");d=d.replace(/(")/g,"\\$1");return'"'+d+'"'}function Ra(d,c){c=c||0;return d.reduce(function(h,f){return h+(Array.isArray(f)?Ra(f,c+1):Yc.indent(f+"\n","  ",c))},"")}function ib(d,c,h){return h?" ".repeat(c)+d:d+" ".repeat(c)}function Za(d,c){function h(e){return n?!1:b?!0:c&&Array.isArray(c.align)&&"right"===c.align[e]}var f=[],k=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,b=c&&"right"===c.align;d.forEach(function(e){e.forEach(function(m,a){void 0===f[a]&&(f[a]=0);f[a]=Math.max(f[a],
String(m).length)})});return d.map(function(e){return e.map(function(m,a){m=String(m);return Yc.pad(m,f[a]-m.length,h(a))}).join(k)}).join("\n")}function Pb(d,c,h,f){function k(b,e,m){n[e]=f.repeat(b)+c(m,b);m=h(m,b);var a=e+1;if(!m||!m.length)return a;var g=a,l=m.length-1;m.forEach(function(r,v){a=k(b+1,a,r);r=l===v;var y=n[g].split(""),A=b*f.length+f.length;for(v=b*f.length+1;v<A;v++)y[v]="-";r&&(y[b*f.length]="\\");n[g]=y.join("");r||n.slice(g,a).forEach(function(E,F){E=E.split("");E[b*f.length]=
"|";n[g+F]=E.join("")});g=a});return a}var n=[];f=f||"  ";k(0,0,d);return n.join("\n")}function gc(d){return d.split("")}function xc(d){return d.split(/\n\r?/)}function Ic(d,c){var h=c?c.sep:"\n\n";return c&&c.keepEmptyLines?d.split("\n").concat("").reduce(function(f,k){var n=f[0];f=f[1];/^\s*$/.test(f)===/^\s*$/.test(k)?f+="\n"+k:(f.length&&n.push(f),f=k);return[n,f]},[[],""])[0]:d.split(new RegExp(h+"+"))}function Sd(d){return Yc.lines(d).compact()}function Vf(d,c){return d.split(c||/\s+/).filter(function(h){return!/^\s*$/.test(h)})}
function Mf(d,c){c=c||{};var h=c.cellSplitter||/\s+/,f=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;d=Yc.lines(d);for(var k=[],n=0;n<d.length;n++){var b=Yc.tokens(d[n],h);c&&(b=b.map(function(e){if(e.match(f))return e;var m=Number(e);if(!isNaN(m))return m;m=new Date(e);return isNaN(+m)?e.trim():m}));0<b.length&&k.push(b)}return k}function id(d){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=d;return c.textContent}
function tg(d,c){return(d=d.trim().match(/([^?#]*)(#.*)?$/))?d[1].split(c||"&").inject({},function(h,f){if((f=f.split("="))[0]){var k=decodeURIComponent(f.shift());f=1<f.length?f.join("="):f[0];void 0!=f&&(f=decodeURIComponent(f));k in h?(Array.isArray(h[k])||(h[k]=[h[k]]),h[k].push(f)):h[k]=f}return h}):{}}function og(d){return btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))}function Jj(d){return decodeURIComponent(atob(d).split("").map(function(c){return"%"+
("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Vk(d){var c=d.match(Yc.urlStartRe),h=(c=c?c[0]:null)?d.slice(c.length):d;do d=h,h=d.replace(Yc.pathDoubleDotRe,"");while(h!=d);h=h.replace(Yc.pathDoubleSlashRe,"$1/");h=h.replace(Yc.pathDotRe,"/");c&&(h=c+h);return h}function Po(){return Yc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(d,c){return"string"===typeof c?d.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):d}))}function en(){return Yc.newUUIDTemplate.replace(Yc.newUUIDRe,
Yc.newUUIDReplacer).toUpperCase()}function Kr(d,c){return"data:"+(c||"text/plain")+";base64,"+Yc.base64EncodeUnicode(d)}function Lr(d){var c=0,h=d.length;if(0==h)return c;for(var f=0;f<h;f++){var k=d.charCodeAt(f);c=(c<<5)-c+k;c&=c}return c}function Mq(d){function c(m,a,g,l,r,v){a=b(b(a,m),b(l,v));return b(a<<r|a>>>32-r,g)}function h(m,a,g,l,r,v,y){return c(a&g|~a&l,m,a,r,v,y)}function f(m,a,g,l,r,v,y){return c(a&l|g&~l,m,a,r,v,y)}function k(m,a,g,l,r,v,y){return c(g^(a|~l),m,a,r,v,y)}function n(m,
a){var g=m[0],l=m[1],r=m[2],v=m[3];g=h(g,l,r,v,a[0],7,-680876936);v=h(v,g,l,r,a[1],12,-389564586);r=h(r,v,g,l,a[2],17,606105819);l=h(l,r,v,g,a[3],22,-1044525330);g=h(g,l,r,v,a[4],7,-176418897);v=h(v,g,l,r,a[5],12,1200080426);r=h(r,v,g,l,a[6],17,-1473231341);l=h(l,r,v,g,a[7],22,-45705983);g=h(g,l,r,v,a[8],7,1770035416);v=h(v,g,l,r,a[9],12,-1958414417);r=h(r,v,g,l,a[10],17,-42063);l=h(l,r,v,g,a[11],22,-1990404162);g=h(g,l,r,v,a[12],7,1804603682);v=h(v,g,l,r,a[13],12,-40341101);r=h(r,v,g,l,a[14],17,
-1502002290);l=h(l,r,v,g,a[15],22,1236535329);g=f(g,l,r,v,a[1],5,-165796510);v=f(v,g,l,r,a[6],9,-1069501632);r=f(r,v,g,l,a[11],14,643717713);l=f(l,r,v,g,a[0],20,-373897302);g=f(g,l,r,v,a[5],5,-701558691);v=f(v,g,l,r,a[10],9,38016083);r=f(r,v,g,l,a[15],14,-660478335);l=f(l,r,v,g,a[4],20,-405537848);g=f(g,l,r,v,a[9],5,568446438);v=f(v,g,l,r,a[14],9,-1019803690);r=f(r,v,g,l,a[3],14,-187363961);l=f(l,r,v,g,a[8],20,1163531501);g=f(g,l,r,v,a[13],5,-1444681467);v=f(v,g,l,r,a[2],9,-51403784);r=f(r,v,g,l,
a[7],14,1735328473);l=f(l,r,v,g,a[12],20,-1926607734);g=c(l^r^v,g,l,a[5],4,-378558);v=c(g^l^r,v,g,a[8],11,-2022574463);r=c(v^g^l,r,v,a[11],16,1839030562);l=c(r^v^g,l,r,a[14],23,-35309556);g=c(l^r^v,g,l,a[1],4,-1530992060);v=c(g^l^r,v,g,a[4],11,1272893353);r=c(v^g^l,r,v,a[7],16,-155497632);l=c(r^v^g,l,r,a[10],23,-1094730640);g=c(l^r^v,g,l,a[13],4,681279174);v=c(g^l^r,v,g,a[0],11,-358537222);r=c(v^g^l,r,v,a[3],16,-722521979);l=c(r^v^g,l,r,a[6],23,76029189);g=c(l^r^v,g,l,a[9],4,-640364487);v=c(g^l^r,
v,g,a[12],11,-421815835);r=c(v^g^l,r,v,a[15],16,530742520);l=c(r^v^g,l,r,a[2],23,-995338651);g=k(g,l,r,v,a[0],6,-198630844);v=k(v,g,l,r,a[7],10,1126891415);r=k(r,v,g,l,a[14],15,-1416354905);l=k(l,r,v,g,a[5],21,-57434055);g=k(g,l,r,v,a[12],6,1700485571);v=k(v,g,l,r,a[3],10,-1894986606);r=k(r,v,g,l,a[10],15,-1051523);l=k(l,r,v,g,a[1],21,-2054922799);g=k(g,l,r,v,a[8],6,1873313359);v=k(v,g,l,r,a[15],10,-30611744);r=k(r,v,g,l,a[6],15,-1560198380);l=k(l,r,v,g,a[13],21,1309151649);g=k(g,l,r,v,a[4],6,-145523070);
v=k(v,g,l,r,a[11],10,-1120210379);r=k(r,v,g,l,a[2],15,718787259);l=k(l,r,v,g,a[9],21,-343485551);m[0]=b(g,m[0]);m[1]=b(l,m[1]);m[2]=b(r,m[2]);m[3]=b(v,m[3])}var b=function(m,a){var g=(m&65535)+(a&65535);return(m>>16)+(a>>16)+(g>>16)<<16|g&65535},e="0123456789abcdef".split("");return function(m){for(var a=m.length,g=0;g<a;g++){for(var l=g,r=m[g],v="",y=0;4>y;y++)v+=e[r>>8*y+4&15]+e[r>>8*y&15];m[l]=v}return m.join("")}(function(m){var a=m.length,g=[1732584193,-271733879,-1732584194,271733878],l;for(l=
64;l<=a;l+=64){var r,v=m.substring(l-64,l),y=[];for(r=0;64>r;r+=4)y[r>>2]=v.charCodeAt(r)+(v.charCodeAt(r+1)<<8)+(v.charCodeAt(r+2)<<16)+(v.charCodeAt(r+3)<<24);n(g,y)}m=m.substring(l-64);r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];v=m.length;for(l=0;l<v;l++)r[l>>2]|=m.charCodeAt(l)<<(l%4<<3);r[l>>2]|=128<<(l%4<<3);if(55<l)for(n(g,r),l=16;l--;)r[l]=0;r[14]=8*a;n(g,r);return g}(d))}function at(d,c){var h=[];d.replace(c,function(f,k){h.push({match:f,start:k,end:k+f.length})});return h}function So(d,c,h){function f(b,
e){if(e.constructor!==RegExp){if(0===b.indexOf(e))return{match:e,rest:b.slice(e.length)};for(var m=0;m<e.length;m++)if(e[m]!=b[m])return{match:null,pos:m};return{match:null}}return(e=Yc.reMatches(b,e))&&e.length&&0===e[0].start?{match:e[0].match,rest:b.slice(e[0].end)}:{match:null}}function k(b){var e=Yc.reMatches(b,/__\//g),m=Yc.reMatches(b,/\/__/g);if(e.length!==m.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(e)+"\nvs ends:\n"+
JSON.stringify(m));var a=0;return e.reduce(function(g,l,r){var v=m[r];r=g.pop();l=l.start-a;v=v.end-a;var y;var A=y=3;r=[r.slice(0,l),r.slice(l+y,v-A),r.slice(v)];r[0].length&&(g.push(r[0]),a+=r[0].length);try{r[1].length&&(g.push(new RegExp(r[1])),a+=r[1].length+3+3)}catch(E){throw Error("Cannot create pattern re from: "+Yc.inspectObject(r));}r[2].length&&g.push(r[2]);return g},[b])}function n(b,e){e=k(e);a:{for(var m=b,a=0,g=0;g<e.length;g++){var l=e[g];m=f(m,l);if(!m.match){e={matched:!1,pos:a+
(m.pos||0),pattern:l};break a}a+=m.match.length;m=m.rest}e=m.length?{matched:!1,pos:a}:{matched:!0}}if(e.matched)return e;e.error=b.slice(0,e.pos)+"<--UNMATCHED--\x3e"+b.slice(e.pos);return e}h=h||{};h.normalizeWhiteSpace&&(d=d.replace(/\s+/g," "));h.ignoreIndent&&(d=d.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return d==c?{matched:!0}:n(d,c)}function Gm(d,c,h){d=d.slice(c);return"string"===typeof h?(d=d.indexOf(h),-1===d?null:d+c):h.constructor===RegExp?(c=Yc.reMatches(d,h),c[0]?c[0].start:null):
null}function To(d,c,h){d=d.slice(0,c);return"string"===typeof h?(d=d.lastIndexOf(h),-1===d?null:d):h.constructor===RegExp?(d=Yc.reMatches(d,h),Yc.last(d)?Yc.last(d).start:null):null}function sm(d){var c=Yc.lineRanges(d);return function(h){for(var f=0;f<c.length;f++){var k=c[f];if(h>=k[0]&&h<k[1])return f}return-1}}function qf(d){return function(c){return Yc.lineRanges(d)[c]}}function Nq(d){for(var c=0,h=Yc.lines(d),f=[],k=0;k<h.length;k++)d=c+h[k].length+1,f.push([c,d]),c=d;return f}function tl(d,
c){var h=d.length;if(0===h)return-1;for(var f=0;;){var k=f+Math.floor((h-f)/2),n=$jscomp.makeIterator(d[k]),b=n.next().value;n=n.next().value;if(c<b){if(0===k)break;h=k}else if(c>n)f=k;else return k}return-1}function Hm(d,c,h){h=void 0===h?0:h;d=this.substring(h||0).search(c);return 0<=d?d+(h||0):d}function lu(d,c,h){h=void 0===h?d.length:h;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));d=this.substring(0,h+1);h=-1;for(var f=0,k;null!=(k=c.exec(d));)h=k.index,c.lastIndex=
++f;return h}function Uo(d,c){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(d,c))}function sp(d){return""==d}function gl(d){d=d[0];return"A"===d||"E"===d||"I"===d||"O"===d||"U"===d||"a"===d||"e"===d||"i"===d||"o"===d||"u"===d||!1}function Zp(d,c){var h=parseFloat(d);return isNaN(h)?d:h.toFixed(c)}function Mr(d){return d.length?d.charAt(0).toUpperCase()+d.slice(1):d}function Vo(d){return d.split(" ").map(Yc.capitalize).join("")}function Oq(d){var c=
d.split("-"),h=c.length;if(1==h)return c[0];d="-"==d.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var f=1;f<h;f++)d+=c[f].charAt(0).toUpperCase()+c[f].substring(1);return d}function Pq(d,c,h){c=c||30;h=void 0===h?"...":h;return d.length>c?d.slice(0,c-h.length)+h:String(d)}function oe(d,c,h){c=c||30;return d.length>c?(void 0===h?"...":h)+d.slice(-c):String(d)}function to(d){return d.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Pl(d){return d.slice(0,
d.length-1)+String.fromCharCode(d.charCodeAt(d.length-1)+1)}function Xk(d){return d.charCodeAt(0)-48}function Qq(d,c){for(var h=[],f=0;f<d.length;f++){h[f]=[];for(var k=0;k<c.length;k++)h[f][k]=0}for(f=0;f<d.length;f++)h[f][0]=0;for(f=1;f<d.length;f++)for(k=1;k<c.length;k++)h[f][k]=d[f-1]==c[k-1]?h[f-1][k-1]+1:0;for(var n=k=f=-1,b=0;b<d.length;b++)for(var e=0;e<c.length;e++){var m=h[b][e];f<m&&(f=m,k=b-m,n=e-m)}return{length:f,indexA:k,indexB:n,string:0<f?d.slice(k,k+f):""}}function Nr(d,c){return"insert"===
c.action?d.slice(0,c.start)+c.lines.join("\n")+d.slice(c.start):"remove"===c.action?d.slice(0,c.start)+d.slice(c.end):d}function Rq(d,c){return c.reduce(function(h,f){return Yc.applyChange(d,f)},d)}function uo(d,c){if(0===d.length)return c.length;if(0===c.length)return d.length;var h;if(d.length>c.length){var f=d;d=c;c=f}var k=Array(d.length+1);for(f=0;f<=d.length;f++)k[f]=f;for(f=1;f<=c.length;f++){var n=f;for(h=1;h<=d.length;h++){var b=c[f-1]===d[h-1]?k[h-1]:Math.min(k[h-1]+1,Math.min(n+1,k[h]+
1));k[h-1]=n;n=b}k[d.length]=n}return k[d.length]}function mu(d,c){d=d||0;return Math.round(Math.random()*((c||100)-d)+d)}function Or(d){return Math.floor(Math.random()*d)}function Sq(d){if(1E3>d)return String(Math.round(100*d)/100)+"B";d/=1024;return 1E3>d?String(Math.round(100*d)/100)+"KB":String(Math.round(d/1024*100)/100)+"MB"}function Tq(d){return d.reduce(function(c,h){return c+h},0)/d.length}function $p(d,c,h){return(d-c)/h+c}function nu(d){var c=d.sort(function(h,f){return f-h});d=d.length;
return 0===d%2?.5*(c[d/2-1]+c[d/2]):c[(d-1)/2]}function Mg(d,c,h,f){f=f||0;if(c<h)var k=h;else k=c,c=h;return 0<=k-d+f&&0>=c-d-f}function Zi(d,c,h){return Math.max(c,Math.min(h,d))}function R(d){return d.sort(function(c,h){return c-h})}function ia(d,c){c=c||"px";if((d=d.match(/([0-9\.]+)\s*(.*)/))&&d[1]){var h=parseFloat(d[1]);return Rg.convertLength(h,d[2],c)}}function Fa(d,c){c=1/c;return Math.round(d*c)/c}function ub(d,c,h,f){var k=Rg.roundTo(d,h);return Math.abs(d-k)<c/2?k:f?d:k+(d-(d<k?k-c/2:
k+c/2))*h/(h-c)}function bc(d){return 180*d/Math.PI%360}function Sc(d){return d/180*Math.PI}function be(d,c,h){c=void 0===c?5:c;h=void 0===h?3E4:h;d=Math.min(h,c*Math.pow(2,d));return Math.min(h,c+Math.random()*(3*(d/2+Math.round(d/2*Math.random()))-c))}function xe(d,c,h){return c+d*(h-c)}function Yd(d,c){var h=[],f;for(f in d)(d.__lookupGetter__(f)||"function"!==typeof d[f])&&(c?c(f,d):1)&&h.push(f);return h}function Bf(d,c){return Object.getOwnPropertyNames(d).reduce(function(h,f){(c?c(d,f):1)&&
h.push(f);return h},[])}function dg(d){var c=[],h;for(h in d)d.hasOwnProperty(h)&&(d.__lookupGetter__(h)||"function"!==d[h])&&c.push(h);return c}function ki(d,c,h){var f=[],k;for(k in d)if(d.hasOwnProperty(k)){var n=d[k];"function"!==n&&f.push(c.call(h||this,k,n))}return f}function ij(d,c){for(var h in d)if(d[h]===c)return h}function gk(d){var c=[],h;for(h in d)c.push(d[h]);return c}function tp(d){var c=[],h;for(h in d)d.hasOwnProperty(h)&&c.push(d[h]);return c}function Wo(d,c){for(var h in d)if(c(d,
h))return!0;return!1}function vo(d,c){var h=[],f;for(f in d)(c?c(d,f):1)&&h.push(f);return h}function up(d){return Object.keys(d).sort().join("").hashCode()}function aq(d,c,h){return bq.dateFormat(d,c,h)}function wo(d,c){return c&&c instanceof Date&&c.getTime()===d.getTime()}function vp(d,c,h){h=void 0===h?{}:h;if(!(c instanceof Date)||c<d)return"";if(c===d)return"now";var f="min",k="sec",n="hour",b="day",e=Math.round((c-d)/1E3);d=e%60;c=Math.floor(e/60)%60;var m=Math.floor(e/60/60)%24;e=Math.floor(e/
60/60/24);var a=[];0<e&&(a.push(e),1<e&&(b+="s"),a.push(b));if(h.forceHours||0<m&&2>e)a.push(m),1<m&&(n+="s"),a.push(n);if(h.forceMinutes||0<c&&3>m&&0===e)a.push(c),1<c&&(f+="s"),a.push(f);if(h.forceSeconds||0<d&&3>c&&0===m&&0===e)a.push(d),1<d&&(k+="s"),a.push(k);return a.join(" ")}function ph(d){return"function"===typeof d?ph.convertCallbackFun(d):Promise.resolve(d)}function ou(d,c){return new Promise(function(h){return setTimeout(h,d,c)})}function pu(d,c){return new Promise(function(h,f){return setTimeout(f,
d,c)})}function bt(d,c){return new Promise(function(h,f){var k=!1;setTimeout(function(){return!k&&(k=!0)&&f(Error("Promise timed out"))},d);c.then(function(n){return!k&&(k=!0)&&h(n)},function(n){return!k&&(k=!0)&&f(n)})})}function qx(d){var c=Date.now();return Promise.resolve(d).then(function(){return Date.now()-c})}function Pr(d,c,h){"function"===typeof d&&(c=d,d=void 0);return new Promise(function(f,k){var n=!1,b=!1,e,m,a=setInterval(function(){if(n)return clearInterval(a);try{m=c()}catch(g){e=
g}if(m||e||b)return n=!0,clearInterval(a),e?k(e):b?"undefined"===typeof h?k(Error("timeout")):f(h):f(m)},10);"number"===typeof d&&setTimeout(function(){return b=!0},d)})}function ct(){var d,c,h=new Promise(function(f,k){d=f;c=k});return{resolve:d,reject:c,promise:h}}function dt(d){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,k){c.push(function(n,b){return n?k(n):f(b)});d.apply(h,c)})}}function qu(d){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,
k){c.push(function(){var n=Array.from(arguments),b=n.shift();return b?k(b):f(n)});d.apply(h,c)})}}function rx(d,c,h,f,k){var n=d.shift();if(n)try{Promise.resolve(n(c,h)).then(function(b){return rx(d,b,h,f,k)}).catch(function(b){k(b)})}catch(b){k(b)}else f(c)}function et(d){return new Promise(function(c,h){return li._chainResolveNext(d.slice(),void 0,{},c,h)})}function Uq(d,c){return Promise.resolve(d).then(function(h){try{c()}catch(f){console.error("Error in promise finally: "+f.stack||f)}return h}).catch(function(h){try{c()}catch(f){console.error("Error in promise finally: "+
f.stack||f)}throw h;})}function sx(d,c){function h(){c--;try{var g=b++;d[g]().then(function(l){c++;k[g]=l;0===--e?m():f()}).catch(function(l){return a(l)})}catch(l){a(l)}}function f(){for(;!n&&0<e&&b<d.length&&0<c;)h()}c=void 0===c?Infinity:c;if(!d.length)return Promise.resolve([]);var k=[],n=null,b=0,e=d.length,m,a;return new Promise(function(g,l){m=function(){return g(k)};a=function(r){return l(n=r)};f()})}function $h(d,c){if(d instanceof $h)return d;if(!(this instanceof $h))return new $h(d,c);
this.setSplitter(c||".");this.fromPath(d)}function cq(d){var c={},h;for(h in d)c[h]=d[h].slice();return c}function ft(d,c){var h={},f;for(f in d)if(!c.includes(f)){h[f]=[];for(var k=d[f],n=0;n<k.length;n++){var b=k[n];c.includes(b)||h[f].push(b)}}return h}function Vv(d,c,h,f){h=void 0===h?[]:h;f=void 0===f?Infinity:f;if(!Array.isArray(d[c]))return[];for(var k=[],n={},b={},e=0;e<h.length;e++)b[h[e]]=!0;c=d[c].slice();e={};for(var m=c.length;m--;){var a=c[m];a in b?c.splice(m,1):e[a]=1}if(h)for(;0!==
c.length;)for(h=0;h<c.length;h++)if(a=c.shift(),!(a in n||a in b)&&(m=e[a]||0,!(m>f)&&(k.push(a),n[a]=!0,a=d[a])))for(var g=0;g<a.length;g++){var l=a[g];l in n||l in e||(e[l]=m+1,c.push(l))}return k}function Wv(d,c,h,f){f=void 0===f?Infinity:f;h&&(d=Kj.without(d,h));c=[c];h=0;for(var k={};c.length&&h++<f;){var n=c.shift();if(!k[n]){var b=d[n]||[];k[n]=b;c.push.apply(c,$jscomp.arrayFromIterable(b))}}return k}function Xv(d){var c={},h;for(h in d)for(var f=d[h],k=0;k<f.length;k++){var n=f[k];c[n]?c[n].push(h):
c[n]=[h]}return c}function Yv(d,c){c=[];var h={},f={},k={};for(g in d){h.hasOwnProperty(g)||(h[g]=!0,c.push(g));var n=d[g],b={};if(n){f[g]=[];n=$jscomp.makeIterator(n);for(var e=n.next();!e.done;e=n.next())if(e=e.value,!b.hasOwnProperty(e)&&g!==e){var m=k[e]||(k[e]=[]);m.includes(g)||m.push(g);b[e]=!0;f[g].push(e);h.hasOwnProperty(e)||(h[e]=!0,c.push(e))}}}for(d=[];c.length;){h=Infinity;var a=[];b=[];n=[];for(e=0;e<c.length;e++){var g=c[e];m=f[g]||[];m.length>h||(m.length!==h||m.some(function(l){return a.includes(l)})?
(h=m.length,a=[g],b=[e],n=(k[g]||[]).slice()):(a.push(g),b.push(e),n.push.apply(n,$jscomp.arrayFromIterable(k[g]||[]))))}for(e=b.length;e--;)g=c[b[e]],k[g]=[],c.splice(b[e],1);h=$jscomp.makeIterator(n);for(g=h.next();!g.done;g=h.next())g=g.value,f[g]=f[g].filter(function(l){return!a.includes(l)});d.push(a)}return d}function Zv(d,c,h,f,k,n){function b(a){-1<e.indexOf(a)||(f=d.call(n,f,a,m++),e=e.concat([a]),Kj.withoutAll(c[a]||[],e).forEach(function(g){return b(g)}))}var e=k||[],m=0;b(h);return f}
function gt(d){d=void 0===d?10:d;for(var c={},h=Kj.range(1,d).map(String),f=0;f<h.length;f++){var k=Math.floor(Math.random()*d);c[h[f]]=Kj.shuffle(h).slice(0,k)}return c}function ru(d){return Array.isArray(d)&&2<=d.length&&d[0]<=d[1]}function dq(d){return d.sort(si.compare)}function ht(d,c){return d[0]<c[0]?d[1]<c[0]?-3:d[1]===c[0]?-2:-1:d[0]===c[0]?d[1]===c[1]?0:d[1]<c[1]?-1:1:-1*ht(c,d)}function su(d,c,h){switch(this.compare(d,c)){case -3:case 3:return null;case 0:return h&&h(d,c,d),d;case 2:case 1:var f=
d;d=c;c=f;case -2:case -1:return f=[d[0],Math.max(d[1],c[1])],h&&h(d,c,f),f;default:throw Error("Interval compare failed");}}function Qr(d,c){for(var h=[],f=d.length;0<f;){var k=d.shift();f--;for(var n=0;n<f;n++){var b=si.coalesce(k,d[n],c);b&&(k=b,d.splice(n,1),f--,n--)}h.push(k)}return this.sort(h)}function xo(d,c,h){for(var f=[];0<d.length;){var k=d.shift(),n=c.map(function(b){b=si.compare(k,b);return-1===b||0===b||1===b});f.push(h(k,n[0]));f.push(k)}return f}function tu(d,c,h,f,k,n){n=n||si.GLOBAL;
h=this.sort(h);for(var b,e=[];b=h.shift();)if(!(b[1]<d)){b[0]<d&&(b=Array.prototype.slice.call(b),b[0]=d);var m=c<b[0]?c:b[0];d<m&&e.push(f.call(n,[d,m],!0));c<b[1]&&(b=Array.prototype.slice.call(b),b[1]=c);if(b[0]===b[1]){var a;k&&(a=e.slice(-1)[0])&&k.call(n,a,b,a)}else e.push(f.call(n,b,!1));d=b[1];if(d>=c)break}d<c&&e.push(f.call(n,[d,c],!0));return e}function uu(d,c,h){return si.intervalsInRangeDo(d,c,si.coalesceOverlapping(Array.prototype.slice.call(h)),function(f,k){return k?f:null}).filter(Boolean)}
function $v(d,c){var h=0,f,k;return c.map(function(n){for(;k=d[h];)if(k[0]<n[0])h++;else break;if(k&&k[0]===n[0]){for(f=h;k=d[f];)if(k[1]<n[1])f++;else break;if(k&&k[1]===n[1])return si.range(h,f)}return[]})}function Vq(d,c,h){h=h||0;h+c>d.length&&(h-=h+c-d.length);return{array:d,from:h,to:h+c}}function tx(d){return d.array.slice(d.from,d.to)}function Rr(d,c){return c<d.from||c>=d.to?null:c-d.from}function ux(d,c){return 0>c||c>d.to-d.from?null:d.from+c}function hn(d,c){if(!(c in d.array))return null;
var h=0;c<d.from&&(h=-d.from+c);c>=d.to&&(h=c-d.to+1);return 0===h?d:Xo.create(d.array,d.to-d.from,d.from+h)}function wp(d,c,h){return(d=d[c])?d[h]:void 0}function Sr(d,c,h,f){(d=d[c])&&(d[h]=f);return f}function it(d,c){return d[c]}function da(d,c,h){return d[c]=h}function wa(d,c){return d.reduce(function(h,f){h.push(f[c]);return h},[])}function kb(d,c,h){return d.map(function(f,k){return f[c]?f[c]=h[k]:void 0})}function Ib(d,c,h){for(var f=Array(d);0<d;)f[--d]=Fh.arrayWithN(c,h);return f}function tc(d,
c,h,f){for(var k=Array(d),n=0;n<d;n++){k[n]=Array(c);for(var b=0;b<c;b++)k[n][b]=h.call(f||this,n,b)}return k}function Xc(d,c,h){d.forEach(function(f,k){f.forEach(function(n,b){c.call(h||this,n,k,b)})})}function ne(d,c,h){var f=Array(d.length);d.forEach(function(k,n){f[n]=Array(k.length);k.forEach(function(b,e){f[n][e]=c.call(h||this,b,n,e)})});return f}function Ze(d){for(var c=d[0],h=Array(d.length-1),f=1;f<d.length;f++)for(var k=h[f-1]={},n=0;n<c.length;n++)k[c[n]]=d[f][n];return h}function yf(d,
c){Array.isArray(d)||(d=[d]);var h=[[]],f=h[0],k=d.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(e,m){var a=f.indexOf(m);-1===a&&(a=f.length,f.push(m));e[a]=b[m];return e},[])])},[]);c=1===arguments.length?null:c;k.forEach(function(n){for(var b=0;b<f.length;b++)n[b]||(n[b]=c)});return h.concat(k)}function $e(d,c,h,f,k){f=void 0===f?{i:0}:f;k=void 0===k?0:k;var n=f.i++;c(d,n,k);(h(d,n,k)||[]).forEach(function(b){return $e(b,c,h,f,k+1)})}function jh(d,c,h,f,k){f=void 0===f?{i:0}:
f;k=void 0===k?0:k;var n=f.i++;(h(d,n,k)||[]).forEach(function(b){return jh(b,c,h,f,k)});c(d,n,k)}function zg(d,c,h){if(c(d))return d;if((d=h(d))&&d.length)for(var f=0;f<d.length;f++){var k=zg(d[f],c,h);if(k)return k}}function zh(d,c,h){var f=[];c(d)&&f.push(d);return f.concat(hl.flatten((h(d)||[]).map(function(k){return zh(k,c,h)})))}function jj(d,c,h,f){f=void 0===f?0:f;return[c(d,f)].concat(hl.flatten((h(d)||[]).map(function(k){return jj(k,c,h,f+1)})))}function Ak(d,c,h,f){f=void 0===f?0:f;var k=
(h(d)||[]).map(function(n){return Ak(n,c,h,f+1)});return c(d,k,f)}function Im(d){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],h=c.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(b){if(!d[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+
")",Error(b);});c=d.sendHeartbeat&&(d.heartbeatInterval||1E3);var f=d.hasOwnProperty("ignoreUnknownMessages")?d.ignoreUnknownMessages:!1,k={_outgoing:[],_inflight:[],_id:d.id||cm.newUUID(),_ignoreUnknownMessages:f,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:cm.OFFLINE,_runWhenOnlineCallbacks:function(){var b=k._whenOnlineCallbacks.slice();k._whenOnlineCallbacks=
[];b.forEach(function(e){try{e.call(null,null,k)}catch(m){console.error("error in _runWhenOnlineCallbacks: %s",m)}})},_ensureStatusWatcher:function(){k._statusWatcherProc||(k._statusWatcherProc=setInterval(function(){k.isOnline()&&k._whenOnlineCallbacks.length&&k._runWhenOnlineCallbacks();var b=k._status;k._status=k.isOnline()?cm.ONLINE:cm.OFFLINE;k._status!==cm.ONLINE&&k._statusWatcherProc&&k.reconnect();if(k._status!==b&&k.onStatusChange)k.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");
if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=cm.newUUID());b.sender=k.id();b.messageIndex=k._messageCounter++;return b},_queueSend:function(b,e){if(e&&"function"!==typeof e)throw Error("Expecing a when send callback, got: "+e);k._outgoing.push([b,e])},_deliverMessageQueue:function(){function b(a){if(-1!==k._inflight.indexOf(a)){var g=a[0],l=a[1];l&&(k._messageResponseCallbacks[g.messageId]=l);d.send.call(k,g,function(r){cm.remove(k._inflight,a);
r&&e(r,a);k._deliverMessageQueue()})}}function e(a,g){var l=g[1];delete k._messageResponseCallbacks[g[0].messageId];console.error(a);l&&l(a)}if(d.allowConcurrentSends||!k._inflight.length){var m=k._outgoing.shift();m&&(k._inflight.push(m),k.isOnline()?b(m):k.whenOnline(function(){b(m)}),function(a){"number"===typeof d.sendTimeout&&setTimeout(function(){-1!==k._inflight.indexOf(a)&&(cm.remove(k._inflight,a),e(Error("Timeout sending message"),a),k._deliverMessageQueue())},d.sendTimeout)}(m),d.allowConcurrentSends&&
k._outgoing.length&&k._deliverMessageQueue())}},_startHeartbeatProcess:function(){k._startHeartbeatProcessProc||(k._startHeartbeatProcessProc=setTimeout(function(){d.sendHeartbeat.call(k,function(b,e){k._startHeartbeatProcessProc=null;k._startHeartbeatProcess()})},k._heartbeatInterval))},id:function(){return k._id},isOnline:function(){return d.isOnline.call(k)},heartbeatEnabled:function(){return"number"===typeof k._heartbeatInterval},listen:function(b){if(!k._listenInProgress)return k._listenInProgress=
!0,k._ensureStatusWatcher(),d.listen.call(k,function(e){k._listenInProgress=null;b&&b(e);k.heartbeatEnabled()&&k._startHeartbeatProcess()})},reconnect:function(){if(k._status!==cm.ONLINE)return k.listen(),k},send:function(b,e){k._addMissingData(b);k._queueSend(b,e);k._deliverMessageQueue();return b},sendTo:function(b,e,m,a){return k.send({target:b,action:e,data:m},a)},onMessage:function(b){k.emit("message",b);if(b.inResponseTo){var e=k._messageResponseCallbacks[b.inResponseTo];e&&!b.expectMoreResponses&&
delete k._messageResponseCallbacks[b.inResponseTo];e&&e(null,b)}else if(e=k._services[b.action])try{e.call(null,b,k)}catch(m){e=String(m.stack||m),console.error("Error invoking service: "+e),k.answer(b,{error:e})}else k._ignoreUnknownMessages||k.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,e,m,a){"function"===typeof m&&(a=m,m=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:e};m&&(b.expectMoreResponses=!0);return k.send(b,a)},close:function(b){clearInterval(k._statusWatcherProc);
k._statusWatcherProc=null;d.close.call(k,function(e){k._status=cm.OFFLINE;b&&b(e)});return k},whenOnline:function(b){k._whenOnlineCallbacks.push(b);k.isOnline()&&k._runWhenOnlineCallbacks();return k},outgoingMessages:function(){return cm.pluck(k._inflight.concat(k._outgoing),0)},addServices:function(b){Object.assign(k._services,b);return k}};d.services&&k.addServices(d.services);cm.makeEmitter(k);for(var n in d)-1===h.indexOf(n)&&d.hasOwnProperty(n)&&(k[n]=d[n]);return k}function Yk(d,c,h){h||(h=
c,c=d,d=null);d=d||{};var f=d.args||[];d=Gh.create(d);d.run.apply(d,[c].concat(f).concat(h));return d}function Mh(d){d=d||{};d.useMessenger=!0;var c=d.workerId||Gh.newUUID(),h=Gh.messengerCreate({sendTimeout:5E3,send:function(f,k){h.worker.postMessage(f);k()},listen:function(f){var k=h.worker=Gh.isNodejs?Gh.NodejsWorker.create(d):Gh.BrowserWorker.create(d);k.on("message",function(n){h.onMessage(n)});k.on("ready",function(){Gh.NodejsWorker.debug&&console.log("WORKER READY!!!")});k.on("close",function(){Gh.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});k.once("ready",f)},close:function(f){return h.worker.ready?h.sendTo(c,"close",{},function(k,n){(k=k||n.data.error)&&console.error("Error in worker messenger close: "+k.stack||k);if(k)f(k);else{var b=!1;h.worker.once("close",function(){b=!0});Gh.waitFor(1E3,function(){return!!b},f)}}):f(null)},isOnline:function(){return h.worker&&h.worker.ready}});Object.assign(h,{eval:function(f,k){h.sendTo(c,"remoteEval",{expr:f},function(n,b){k(n,b?b.data.result:null)})},run:function(){var f=
Array.prototype.slice.call(arguments),k=f.shift(),n=f.pop();if("function"!==typeof k)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return h.sendTo(c,"run",{func:String(k),args:f},function(b,e){n(b||e.data.error,e?e.data.result:null)})}});h.listen();return h}function Bj(){if(!pe.isNode||pe.GLOBAL.lively||pe.GLOBAL.lively)if(pe.livelyLang._prevLivelyGlobal=pe.GLOBAL.lively,pe.GLOBAL.lively||(pe.GLOBAL.lively={}),pe.GLOBAL.lively.lang)for(var d in pe.livelyLang)pe.GLOBAL.lively.lang[d]=
pe.livelyLang[d];else pe.GLOBAL.lively.lang=pe.livelyLang}function Ql(d){if(!d)return d;if(Array.isArray(d))return pe.createChain(pe.arr,d);if("Date"===d.constructor.name)return pe.createChain(pe.date,d);switch(typeof d){case "string":return pe.createChain(pe.string,d);case "object":return pe.createChain(pe.obj,d);case "function":return pe.createChain(pe.fun,d);case "number":return pe.createChain(pe.num,d)}throw Error("Chain for object "+d+" ("+d.constructor.name+") no supported");}function Yo(){pe.isNode||
(pe.livelyLang._prevLivelyGlobal?delete pe.GLOBAL.lively.lang:delete pe.GLOBAL.lively);return pe.livelyLang}function Jm(){Object.assign(pe.livelyLang,{worker:TE,messenger:UE,events:uz,tree:vu,grid:vz,arrayProjection:VE,interval:WE,graph:wu,date:xu,properties:xp,obj:Ag,arr:eg,fun:Jn,num:Km,string:ti,Closure:Qj,promise:ph,Path:$h,Group:Kn});pe.globalInterfaceSpec.forEach(function(d){if("installMethods"===d.action){var c=pe.Path(d.target);c.isIn(pe.GLOBAL)||c.set(pe.GLOBAL,{},!0);var h=pe.Path(d.sources[0]);
d.methods.forEach(function(f){pe.installProperty(h.concat([f]),c.concat([f]))});d.alias&&d.alias.forEach(function(f){pe.installProperty(h.concat([f[1]]),c.concat([f[0]]))})}else if("installObject"===d.action)c=pe.Path(d.target),d=pe.Path(d.source).get(pe.livelyLang),c.set(pe.GLOBAL,d,!0);else throw Error("Cannot deal with global setup action: "+d.action);})}function vx(){pe.globalInterfaceSpec.forEach(function(d){if("installMethods"===d.action){var c=pe.Path(d.target),h=pe.Path(d.source).get(pe.livelyLang),
f=c.get(pe.GLOBAL);f&&(d.methods.filter(function(k){return h===f[k]}).forEach(function(k){delete f[k]}),d.alias&&d.alias.filter(function(k){return h===f[k]}).forEach(function(k){delete f[k[0]]}))}else if("installObject"===d.action)c=pe.Path(d.target),c.del(pe.GLOBAL);else throw Error("Cannot deal with global setup action: "+d.action);})}function ai(d){return function(c,h,f,k){null==f&&(f=d);null==k&&(k=f);null==h&&(h=Vi.unit(c));var n=Vi.unit(c);if(n===h)return c;var b=Vi.unitLess(c);"px"!==Vi.unit(f)&&
console.warn("Parameter fromContext must resolve to a value in pixel units.");"px"!==Vi.unit(k)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)b=Vi.unitLess(c)*Vi.unitLess(f);else if("rem"===n)b=Vi.unitLess(c)*Vi.unitLess(d);else if("ex"===n)b=Vi.unitLess(c)*Vi.unitLess(f)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),
c;f=b;if("px"!==h)if("em"===h)f=b/Vi.unitLess(k);else if("rem"===h)f=b/Vi.unitLess(d);else if("ex"===h)f=b/Vi.unitLess(k)/2;else return"ch"===h||"vw"===h||"vh"===h||"vmin"===h?console.warn(h+" units can't be reliably converted; Returning original value."):console.warn(h+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(f.toFixed(5))+h}}function Ah(d){return Number(Vi.parseCssLength(d,"px").slice(0,-2))}function Cl(d,c,h,f){if("number"===typeof d){var k=d;
d=c;c=f}else k=d.x,d=d.y,h=c.x-k,c=c.y-d;return new fe.Rectangle(k,d,h,c)}function Ii(d,c){return new fe.Point(d,c)}function wz(d){d=new Td.Color(d);return{red:d.red()/255,green:d.green()/255,blue:d.blue()/255,alpha:d.alpha()}}function yu(d){return(d=d.match(DX))?{scheme:d[1],auth:d[2],host:d[3],port:d[4],path:d[5]}:null}function Lm(d){var c="";d.scheme&&(c+=d.scheme+":");c+="//";d.auth&&(c+=d.auth+"@");d.host&&(c+=d.host);d.port&&(c+=":"+d.port);d.path&&(c+=d.path);return c}function xz(d){var c=
d,h=yu(d);if(h){if(!h.path)return d;c=h.path}d=jn.isAbsolute(c);c=c.split(/\/+/);for(var f,k=0,n=c.length-1;0<=n;n--)f=c[n],"."===f?c.splice(n,1):".."===f?k++:0<k&&(""===f?(c.splice(n+1,k),k=0):(c.splice(n,2),k--));c=c.join("/");""===c&&(c=d?"/":".");return h?(h.path=c,Lm(h)):c}function yz(d,c){""===d&&(d=".");""===c&&(c=".");var h=yu(c),f=yu(d);f&&(d=f.path||"/");if(h&&!h.scheme)return f&&(h.scheme=f.scheme),Lm(h);if(h||c.match(Paa))return c;if(f&&!f.host&&!f.path)return f.host=c,Lm(f);d="/"===c.charAt(0)?
c:xz(d.replace(/\/+$/,"")+"/"+c);return f?(f.path=d,Lm(f)):d}function XE(d){return d}function HP(d){return Tr(d)?"$"+d:d}function HI(d){return Tr(d)?d.slice(1):d}function Tr(d){if(!d)return!1;var c=d.length;if(9>c||95!==d.charCodeAt(c-1)||95!==d.charCodeAt(c-2)||111!==d.charCodeAt(c-3)||116!==d.charCodeAt(c-4)||111!==d.charCodeAt(c-5)||114!==d.charCodeAt(c-6)||112!==d.charCodeAt(c-7)||95!==d.charCodeAt(c-8)||95!==d.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==d.charCodeAt(c))return!1;return!0}
function aw(d,c){return d===c?0:null===d?1:null===c?-1:d>c?1:-1}function eq(){(this||yo)._array=[];(this||yo)._set=zz?new Map:Object.create(null)}function fq(){(this||Ur)._array=[];(this||Ur)._sorted=!0;(this||Ur)._last={generatedLine:-1,generatedColumn:0}}function Zo(d){d||(d={});(this||ui)._file=Mm.getArg(d,"file",null);(this||ui)._sourceRoot=Mm.getArg(d,"sourceRoot",null);(this||ui)._skipValidation=Mm.getArg(d,"skipValidation",!1);(this||ui)._sources=new II;(this||ui)._names=new II;(this||ui)._mappings=
new Qaa;(this||ui)._sourcesContents=null}function YE(d,c,h,f,k,n){var b=Math.floor((c-d)/2)+d,e=k(h,f[b],!0);return 0===e?b:0<e?1<c-b?YE(b,c,h,f,k,n):n==JI.LEAST_UPPER_BOUND?c<f.length?c:-1:b:1<b-d?YE(d,b,h,f,k,n):n==JI.LEAST_UPPER_BOUND?b:0>d?-1:d}function bC(d,c,h){var f=d[c];d[c]=d[h];d[h]=f}function il(d,c,h,f){if(h<f){var k=h-1;bC(d,Math.round(h+Math.random()*(f-h)),f);for(var n=d[f],b=h;b<f;b++)0>=c(d[b],n)&&(k+=1,bC(d,k,b));bC(d,k+1,b);k+=1;il(d,c,h,k-1);il(d,c,k+1,f)}}function sj(d,c){var h=
d;"string"===typeof d&&(h=Cg.parseSourceMapInput(d));return null!=h.sections?new gq(h,c):new Bk(h,c)}function Bk(d,c){var h=d;"string"===typeof d&&(h=Cg.parseSourceMapInput(d));d=Cg.getArg(h,"version");var f=Cg.getArg(h,"sources"),k=Cg.getArg(h,"names",[]),n=Cg.getArg(h,"sourceRoot",null),b=Cg.getArg(h,"sourcesContent",null),e=Cg.getArg(h,"mappings");h=Cg.getArg(h,"file",null);if(d!=(this||kf)._version)throw Error("Unsupported version: "+d);n&&(n=Cg.normalize(n));f=f.map(String).map(Cg.normalize).map(function(m){return n&&
Cg.isAbsolute(n)&&Cg.isAbsolute(m)?Cg.relative(n,m):m});(this||kf)._names=cC.fromArray(k.map(String),!0);(this||kf)._sources=cC.fromArray(f,!0);(this||kf)._absoluteSources=(this||kf)._sources.toArray().map(function(m){return Cg.computeSourceURL(n,m,c)});(this||kf).sourceRoot=n;(this||kf).sourcesContent=b;(this||kf)._mappings=e;(this||kf)._sourceMapURL=c;(this||kf).file=h}function Az(){(this||kf).generatedLine=0;(this||kf).generatedColumn=0;(this||kf).source=null;(this||kf).originalLine=null;(this||
kf).originalColumn=null;(this||kf).name=null}function gq(d,c){var h=d;"string"===typeof d&&(h=Cg.parseSourceMapInput(d));d=Cg.getArg(h,"version");h=Cg.getArg(h,"sections");if(d!=(this||kf)._version)throw Error("Unsupported version: "+d);(this||kf)._sources=new cC;(this||kf)._names=new cC;var f={line:-1,column:0};(this||kf)._sections=h.map(function(k){if(k.url)throw Error("Support for url field in sections not implemented.");var n=Cg.getArg(k,"offset"),b=Cg.getArg(n,"line"),e=Cg.getArg(n,"column");
if(b<f.line||b===f.line&&e<f.column)throw Error("Section offsets must be ordered and non-overlapping.");f=n;return{generatedOffset:{generatedLine:b+1,generatedColumn:e+1},consumer:new sj(Cg.getArg(k,"map"),c)}})}function zo(d,c,h,f,k){(this||tj).children=[];(this||tj).sourceContents={};(this||tj).line=null==d?null:d;(this||tj).column=null==c?null:c;(this||tj).source=null==h?null:h;(this||tj).name=null==k?null:k;(this||tj).$$$isSourceNode$$$=!0;null!=f&&this.add(f)}function tm(d,c){c=void 0===c?{}:
c;var h=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},Wq.obj.dissoc(c&&c.format||{},["indent"]));c=Object.assign({format:h,comment:!1},Wq.obj.dissoc(c,["format"]));return Wq.es.generate(d,c)}function ak(d,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>d)return!1;h+=c[f+1];if(h>=d)return!0}}function kn(d,c){return 65>d?36===d:91>d?!0:97>d?95===d:123>d?!0:65535>=d?170<=d&&Raa.test(String.fromCharCode(d)):!1===c?
!1:ak(d,EX)}function zu(d,c){return 48>d?36===d:58>d?!0:65>d?!1:91>d?!0:97>d?95===d:123>d?!0:65535>=d?170<=d&&Saa.test(String.fromCharCode(d)):!1===c?!1:ak(d,EX)||ak(d,Taa)}function yp(d,c){return new Rj(d,{beforeExpr:!0,binop:c})}function vi(d,c){void 0===c&&(c={});c.keyword=d;return KI[d]=new Rj(d,c)}function Vr(d,c){return 10===d||13===d||!c&&(8232===d||8233===d)}function Qi(d){return new RegExp("^(?:"+d.replace(/ /g,"|")+")$")}function Cj(d,c){for(var h=1,f=0;;){wx.lastIndex=f;var k=wx.exec(d);
if(k&&k.index<c)++h,f=k.index+k[0].length;else return new dC(h,c-f)}}function bw(d){var c={},h;for(h in ZE)c[h]=d&&LI.call(d,h)?d[h]:ZE[h];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!FX&&"object"===typeof console&&console.warn&&(FX=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);
if(GX(c.onToken)){var f=c.onToken;c.onToken=function(k){return f.push(k)}}GX(c.onComment)&&(c.onComment=jl(c,c.onComment));return c}function jl(d,c){return function(h,f,k,n,b,e){h={type:h?"Block":"Line",value:f,start:k,end:n};d.locations&&(h.loc=new Bz(this,b,e));d.ranges&&(h.range=[k,n]);c.push(h)}}function xx(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function wd(d,c,h,f){d.type=c;d.end=h;this.options.locations&&(d.loc.end=f);this.options.ranges&&
(d.range[1]=h);return d}function Ln(d){d=HX[d]={binary:Qi(Uaa[d]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:Qi("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:Qi(Vaa[d])}};d.nonBinary.Script_Extensions=d.nonBinary.Script;d.nonBinary.gc=d.nonBinary.General_Category;d.nonBinary.sc=d.nonBinary.Script;d.nonBinary.scx=d.nonBinary.Script_Extensions}function Xq(d){if(65535>=d)return String.fromCharCode(d);d-=65536;return String.fromCharCode((d>>10)+55296,(d&1023)+56320)}function yx(d){return 36===d||40<=d&&43>=d||46===d||63===d||91<=d&&94>=d||123<=d&&125>=d}function Au(d){return 65<=d&&90>=d||97<=d&&122>=d||95===d}function Cz(d){return Au(d)||hq(d)}function hq(d){return 48<=
d&&57>=d}function jt(d){return 48<=d&&57>=d||65<=d&&70>=d||97<=d&&102>=d}function Dz(d){return 65<=d&&70>=d?10+(d-65):97<=d&&102>=d?10+(d-97):d-48}function eC(d){return"function"!==typeof BigInt?null:BigInt(d.replace(/_/g,""))}function Ez(d){if(65535>=d)return String.fromCharCode(d);d-=65536;return String.fromCharCode((d>>10)+55296,(d&1023)+56320)}function cw(d){return"string"===typeof d?function(c){return c===d}:d?d:function(){return!0}}function Fz(d,c){c=Waa(c||Df);for(var h in d)c[h]=d[h];return c}
function Bu(d,c,h){h(d,c)}function Wr(d,c,h){}function Mn(d){return"\u2716"===d.name}function zx(){}function dw(d){return 14>d&&8<d||32===d||160===d||Vr(d)}function wi(d,c,h,f){var k=[];f=f||Af.walk.make(Af.custom.withMemberExpression);Object.keys(Af.walk.base).forEach(function(n){var b=f[n];f[n]=function(e,m,a){Af.arr.pushIfNotIncluded(k,e);return b(e,m,a)}});f.Property=function(n,b,e){Af.arr.pushIfNotIncluded(k,n);e(n.key,b,"Expression");e(n.value,b,"Expression")};f.LabeledStatement=function(n,
b,e){n.label&&e(n.label,b,"Expression");e(n.body,b,"Statement")};Af.walk.findNodeAround(d,c,h,f);return k}function iq(d,c){function h(k){return null===k?null:f[k.type](k,h)}var f=Af.obj.extend({Program:function(k,n){return{start:k.start,end:k.end,type:"Program",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},FunctionDeclaration:function(k,n){return{start:k.start,end:k.end,type:"FunctionDeclaration",id:n(k.id),params:k.params.map(n),body:n(k.body),source:k.source,astIndex:k.astIndex}},BlockStatement:function(k,
n){return{start:k.start,end:k.end,type:"BlockStatement",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},ExpressionStatement:function(k,n){return{start:k.start,end:k.end,type:"ExpressionStatement",expression:n(k.expression),source:k.source,astIndex:k.astIndex}},CallExpression:function(k,n){return{start:k.start,end:k.end,type:"CallExpression",callee:n(k.callee),arguments:k.arguments.map(n),source:k.source,astIndex:k.astIndex}},MemberExpression:function(k,n){return{start:k.start,end:k.end,type:"MemberExpression",
object:n(k.object),property:n(k.property),computed:k.computed,source:k.source,astIndex:k.astIndex}},NewExpression:function(k,n){return{start:k.start,end:k.end,type:"NewExpression",callee:n(k.callee),arguments:k.arguments.map(n),source:k.source,astIndex:k.astIndex}},VariableDeclaration:function(k,n){return{start:k.start,end:k.end,type:"VariableDeclaration",declarations:k.declarations.map(n),kind:k.kind,source:k.source,astIndex:k.astIndex}},VariableDeclarator:function(k,n){return{start:k.start,end:k.end,
type:"VariableDeclarator",id:n(k.id),init:n(k.init),source:k.source,astIndex:k.astIndex}},FunctionExpression:function(k,n){return{start:k.start,end:k.end,type:"FunctionExpression",id:n(k.id),params:k.params.map(n),body:n(k.body),source:k.source,astIndex:k.astIndex}},IfStatement:function(k,n){return{start:k.start,end:k.end,type:"IfStatement",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},ConditionalExpression:function(k,n){return{start:k.start,
end:k.end,type:"ConditionalExpression",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},SwitchStatement:function(k,n){return{start:k.start,end:k.end,type:"SwitchStatement",discriminant:n(k.discriminant),cases:k.cases.map(n),source:k.source,astIndex:k.astIndex}},SwitchCase:function(k,n){return{start:k.start,end:k.end,type:"SwitchCase",test:n(k.test),consequent:k.consequent.map(n),source:k.source,astIndex:k.astIndex}},BreakStatement:function(k,
n){return{start:k.start,end:k.end,type:"BreakStatement",label:k.label,source:k.source,astIndex:k.astIndex}},ContinueStatement:function(k,n){return{start:k.start,end:k.end,type:"ContinueStatement",label:k.label,source:k.source,astIndex:k.astIndex}},TryStatement:function(k,n){return{start:k.start,end:k.end,type:"TryStatement",block:n(k.block),handler:n(k.handler),finalizer:n(k.finalizer),guardedHandlers:k.guardedHandlers.map(n),source:k.source,astIndex:k.astIndex}},CatchClause:function(k,n){return{start:k.start,
end:k.end,type:"CatchClause",param:n(k.param),guard:n(k.guard),body:n(k.body),source:k.source,astIndex:k.astIndex}},ThrowStatement:function(k,n){return{start:k.start,end:k.end,type:"ThrowStatement",argument:n(k.argument),source:k.source,astIndex:k.astIndex}},ForStatement:function(k,n){return{start:k.start,end:k.end,type:"ForStatement",init:n(k.init),test:n(k.test),update:n(k.update),body:n(k.body),source:k.source,astIndex:k.astIndex}},ForInStatement:function(k,n){return{start:k.start,end:k.end,type:"ForInStatement",
left:n(k.left),right:n(k.right),body:n(k.body),source:k.source,astIndex:k.astIndex}},WhileStatement:function(k,n){return{start:k.start,end:k.end,type:"WhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},DoWhileStatement:function(k,n){return{start:k.start,end:k.end,type:"DoWhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},WithStatement:function(k,n){return{start:k.start,end:k.end,type:"WithStatement",object:n(k.object),body:n(k.body),
source:k.source,astIndex:k.astIndex}},UnaryExpression:function(k,n){return{start:k.start,end:k.end,type:"UnaryExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},BinaryExpression:function(k,n){return{start:k.start,end:k.end,type:"BinaryExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},LogicalExpression:function(k,n){return{start:k.start,end:k.end,type:"LogicalExpression",left:n(k.left),operator:k.operator,
right:n(k.right),source:k.source,astIndex:k.astIndex}},AssignmentExpression:function(k,n){return{start:k.start,end:k.end,type:"AssignmentExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},UpdateExpression:function(k,n){return{start:k.start,end:k.end,type:"UpdateExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},ReturnStatement:function(k,n){return{start:k.start,end:k.end,type:"ReturnStatement",
argument:n(k.argument),source:k.source,astIndex:k.astIndex}},Identifier:function(k,n){return{start:k.start,end:k.end,type:"Identifier",name:k.name,source:k.source,astIndex:k.astIndex}},Literal:function(k,n){return{start:k.start,end:k.end,type:"Literal",value:k.value,raw:k.raw,source:k.source,astIndex:k.astIndex}},ObjectExpression:function(k,n){return{start:k.start,end:k.end,type:"ObjectExpression",properties:k.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:k.source,
astIndex:k.astIndex}},ArrayExpression:function(k,n){return{start:k.start,end:k.end,type:"ArrayExpression",elements:k.elements.map(n),source:k.source,astIndex:k.astIndex}},SequenceExpression:function(k,n){return{start:k.start,end:k.end,type:"SequenceExpression",expressions:k.expressions.map(n),source:k.source,astIndex:k.astIndex}},EmptyStatement:function(k,n){return{start:k.start,end:k.end,type:"EmptyStatement",source:k.source,astIndex:k.astIndex}},ThisExpression:function(k,n){return{start:k.start,
end:k.end,type:"ThisExpression",source:k.source,astIndex:k.astIndex}},DebuggerStatement:function(k,n){return{start:k.start,end:k.end,type:"DebuggerStatement",source:k.source,astIndex:k.astIndex}},LabeledStatement:function(k,n){return{start:k.start,end:k.end,type:"LabeledStatement",label:k.label,body:n(k.body),source:k.source,astIndex:k.astIndex}}},c||{});return h(d)}function Nm(d,c,h){if(!c)return[];d=Af.findNodesIncluding(d,c.start);var f=d.indexOf(c);d=d.slice(0,f);d=Af.arr.detect(d.reverse(),function(k){return Array.isArray(k.body)}).body;
if(!h)return Af.arr.without(d,c);c=d.indexOf(c);return"before"===h?d.slice(0,c):d.slice(c+1)}function kt(d,c,h){d.astIndex||null!=h&&!h||Af.addAstIndex(d);var f=null;Af.withMozillaAstDo(d,null,function(k,n,b){f||n.astIndex<c||(n.astIndex===c?f=n:k())});return f}function lt(d,c,h){h||(h=c,c=d,d=null);d||(d={});c.astIndex||Af.addAstIndex(c);var f,k=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
Af.withMozillaAstDo(c,{},function(b,e,m,a){if(!(k||e.astIndex<h.astIndex)){if(e===h||e.astIndex===h.astIndex)if(k=!0,d.asPath)f=a;else{e=Af.Path(a);do f=e.get(c),e=e.slice(0,e.size()-1);while(-1==n.indexOf(f.type)&&0<e.size())}!k&&b()}});return f}function Xr(d){Af.withMozillaAstDo(d,{index:0},function(c,h,f){c();h.astIndex=f.index++});return d}function jq(d,c){"string"===typeof d&&(c=d,d=Hh.parse(d));c&&Hh.AllNodesVisitor.run(d,function(h,f,k){return!h.source&&(h.source=c.slice(h.start,h.end))});
return d}function ya(d,c){c=void 0===c?{}:c;var h=Hh.parse("("+d+")",c);Hh.AllNodesVisitor.run(h,function(f,k,n){if(!f._positionFixed){f._positionFixed=!0;if(f.start||0===f.start)f.start+=-1,f.end+=-1;c.addSource&&!f.source&&(f.source=d.slice(f.start,f.end))}});return h.body[0].expression}function ln(d,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var h;"LabeledStatement"===c.type&&(h="$={"+d+"}");try{var f=Hh.parse(h||d,c);h?f=null:c.addSource&&Hh.addSource(f,d)}catch(n){var k=n}k&&void 0!==k.raisedAt?(h&&(k.pos-=3,k.raisedAt-=3,k.loc.column-=3),h=""+d.slice(k.raisedAt-20,k.raisedAt),h=h+"<-error->"+d.slice(k.raisedAt,k.raisedAt+20),c.verbose&&console.log("parse error: "+h),k.parseErrorSource=h):k&&c.verbose&&
console.log(""+k+k.stack);f||(f=Hh.loose.parse(d,c),c.addSource&&Hh.addSource(f,d),f.isFuzzy=!0,f.parseError=k);return f}function Ri(d,c){function h(l){l=k(f(l));b.allComments=l.comments}function f(l){n.forEach(function(r){var v=Hh.arr.detect(Hh.nodesAt(r.start,b).reverse(),function(y){return"BlockStatement"===y.type||"Program"===y.type});v||(v=b);v.comments||(v.comments=[]);v.comments.push(r);l.nodesWithComments.push(v)});return l}function k(l){l.nodesWithComments.forEach(function(r){Hh.arr.clone(r.comments).reduce(function(v,
y){if(y.isBlock)return v.lastComment=null,v;if(!v.lastComment)return v.lastComment=y,v;var A=v.lastComment;if(Hh.arr.detect(r.body,function(F){return F.start>=A.end&&F.end<=y.start}))return v.lastComment=y,v;var E=d.slice(A.end,y.start);if(/[\n\r][\n\r]+/.test(E))return v.lastComment=y,v;A.text+="\n"+y.text;A.end=y.end;Hh.arr.remove(r.comments,y);Hh.arr.remove(l.comments,y);return v},{lastComment:null})});return l}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(l,r,v,y,A,E){n.push({isBlock:l,text:r,node:null,
start:v,end:y,line:A,column:E})}}try{var b=Hh.acorn.parse(d,c)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var e=d.split("\n"),m=l,a=m.loc;c=a.line;a=a.column;var g=m.pos;e=e[c-1];m="Syntax error at line "+c+" column "+a+" (index "+g+') "'+m.message+'"\nsource: '+e.slice(0,a)+"<--SyntaxError--\x3e"+e.slice(a);m=new SyntaxError(m);m.loc={line:c,column:a};m.pos=g;throw m;}throw l;}c.addSource&&Hh.addSource(b,d);c.addAstIndex&&!b.hasOwnProperty("astIndex")&&Hh.addAstIndex(b);
b&&n&&h({ast:b,comments:n,nodesWithComments:[]});return b}function zp(d){return rf.identifierRe.test(d)&&-1===d.indexOf("-")}function Yq(d){return"this"===d?{type:"ThisExpression"}:{name:String(d),type:"Identifier"}}function Ge(d){return{type:"Literal",value:d}}function Gf(d){return{type:"ExpressionStatement",expression:d}}function Va(d){return{type:"ReturnStatement",argument:d}}function Om(){return{type:"EmptyStatement"}}function kq(d,c,h){return{left:d,right:h,operator:c,type:"BinaryExpression"}}
function Yr(d,c,h){for(var f=[],k=2;k<arguments.length;++k)f[k-2]=arguments[k];k=d.arrow;var n=d.id,b=d.expression,e=d.generator;c=void 0===c?[]:c;c=c.map(function(m){return"string"===typeof m?rf.id(m):m});return{type:(k?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?rf.id(n):n:void 0,params:c,body:b&&1===f.length?f[0]:{body:f,type:"BlockStatement"},expression:b||!1,generator:e||!1}}function Cu(d,c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];"string"===typeof d&&(d=rf.id(d));
return{type:"CallExpression",callee:d,arguments:h}}function Ax(d,c,h){"string"===typeof d&&(d={name:d,type:"Identifier"});return{type:"VariableDeclaration",kind:h||"var",declarations:[{type:"VariableDeclarator",id:d,init:c}]}}function ew(d,c,h){"string"===typeof d&&(d=rf.id(d));"string"===typeof c?(h||rf.isIdentifier(c)||(h=!0),c=h?rf.literal(c):rf.id(c)):"number"===typeof c?(c=rf.literal(c),h=!0):"Literal"===c.type&&(h=!0);return{type:"MemberExpression",computed:!!h,object:d,property:c}}function Zr(d,
c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];return h.reduce(function(k,n){return rf.member(k,n)},"object"===typeof d?d:rf.id(d))}function Sj(d,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?rf.id(c):c:rf.id("undefined"),left:"string"===typeof d?rf.id(d):d}}function Ap(d){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function kl(d){for(var c=[],h=0;h<arguments.length;++h)c[h-
0]=arguments[h];return Object.assign(rf.block.apply(rf,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function lq(d,c,h,f){for(var k=[],n=3;n<arguments.length;++n)k[n-3]=arguments[n];Array.isArray(h)||(k.unshift(h),h=null);return{block:rf.block(k),finalizer:h?rf.block(h):null,handler:{body:rf.block(c),param:rf.id(d),type:"CatchClause"},type:"TryStatement"}}function Bp(d,c){return{type:"Property",key:d,computed:"Identifier"!==d.type,shorthand:!1,value:c}}function fw(d){for(var c=
[],h=0;h<d.length;h+=2){var f=d[h];"string"===typeof f&&(f=rf.id(f));c.push(rf.prop(f,d[h+1]))}return{properties:c,type:"ObjectExpression"}}function mn(d,c,h){c=void 0===c?rf.block():c;h=void 0===h?rf.block():h;return{consequent:c,alternate:h,test:d,type:"IfStatement"}}function Bx(d,c,h){return{type:"ForInStatement",left:"string"===typeof d?rf.varDecl(d):d,right:"string"===typeof c?rf.id(c):c,body:h}}function Nn(d,c,h){c=void 0===c?rf.id("undefined"):c;h=void 0===h?rf.id("undefined"):h;return{consequent:c,
alternate:h,test:d,type:"ConditionalExpression"}}function Pm(d,c,h){return{operator:d,left:c,right:h,type:"LogicalExpression"}}function $r(d){var c=new $d.ScopeVisitor,h=c.newScope(d,null);c.accept(d,h,[]);return h}function Du(d,c){return $d.withMozillaAstDo(d,[],function(h,f,k){f.start<=c&&c<=f.end&&(k.push(f),h());return k})}function Gz(d,c){return $d.tree.filter($d.scopes(d),function(h){h=h.node;var f=h.start,k=h.end;"FunctionDeclaration"===h.type&&(f=h.params.length?h.params[0].start:h.body.start,
k=h.body.end);return f<=c&&c<=k},function(h){return h.subScopes})}function Hz(d,c){return $d.arr.last($d.scopesAtIndex(d,c))}function fC(d,c){return $d.arr.filter($d.nodesAt(d,c),function(h){return"Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type})}function Ji(d){return $d.withMozillaAstDo(d,{root:d,result:[]},function(c,h,f){f.result.push(h);if(h!==f.root&&("Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type))return f;c();return f}).result}
function gC(d,c,h){h=void 0===h?[]:h;c&&d.node.id&&d.node.id.name&&h.push(d.node.id);$d.helpers.declIds(d.params,h);for(c=0;c<d.funcDecls.length;c++){var f=d.funcDecls[c].id;f&&h.push(f)}$d.helpers.varDeclIds(d,h);h.push.apply(h,$jscomp.arrayFromIterable(d.catches));for(c=0;c<d.classDecls.length;c++)(f=d.classDecls[c].id)&&h.push(f);h.push.apply(h,$jscomp.arrayFromIterable(d.importSpecifiers));return $d.arr.compact(h)}function hC(d,c){for(var h=[],f=$jscomp.makeIterator($d.declarationsOfScope(d,!0)),
k=f.next();!k.done;k=f.next())h.push(k.value.name);c&&$d._findJsLintGlobalDeclarations("Program"===d.node.type?d.node:d.node.body,h);return h}function mt(d,c){c=void 0===c?[]:c;if(!d||!d.comments)return c;d=$jscomp.makeIterator(d.comments);for(var h=d.next();!h.done;h=d.next())if(h=h.value.text.trim(),h.startsWith("global")){h=$jscomp.makeIterator(h.replace($d.globalDeclRe,"").split(","));for(var f=h.next();!f.done;f=h.next())c.push(f.value.trim())}return c}function Iz(d){return $d.FindToplevelFuncDeclVisitor.run(d)}
function Eu(d,c){if(0==c.length)return[null,null];var h=$jscomp.makeIterator(c);c=h.next().value;h=$jscomp.arrayFromIterator(h);var f=c.decls||$d.declarationsWithIdsOfScope(c);c.decls=f;return f.find(function(k){k=$jscomp.makeIterator(k);k.next();return k.next().value.name==d})||Eu(d,h)}function mq(d){function c(f,k){var n=[f].concat(k);f.refs.forEach(function(b){var e=$jscomp.makeIterator($d.resolveReference(b.name,n)),m=e.next().value;e=e.next().value;h.set(b,{decl:m,declId:e,ref:b})});f.subScopes.forEach(function(b){return c(b,
n)})}if(d.referencesResolvedSafely)return d;var h=d.resolvedRefMap||(d.resolvedRefMap=new Map);c(d,[]);d.referencesResolvedSafely=!0;return d}function as(d,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var h=c.next();!h.done;h=c.next()){h=h.value;var f=h.ref,k=f.end;if(f.start<=d&&d<=k)return h}}function $o(d,c){function h(b){var e=$d._declaredVarNames(b,f);return $d.arr.filter(b.subScopes.map(h).reduce(function(m,a){return m.concat(a)},b.refs),function(m){return-1===e.indexOf(m.name)})}
c=c||{};c.withComments=!0;"string"===typeof d&&(d=$d.parse(d,c));d=$d.scopes(d);var f=!!c.jslintGlobalComment;c=$d._declaredVarNames(d,f);var k=d.refs.concat($d.arr.flatten(d.subScopes.map(h))),n=$d.arr.withoutAll(k.map(function(b){return b.name}),c);return{scope:d,varDecls:d.varDecls,funcDecls:$d.arr.filter(d.funcDecls,function(b){return b.id}),classDecls:$d.arr.filter(d.classDecls,function(b){return b.id}),declaredNames:c,undeclaredNames:n,refs:k,thisRefs:d.thisRefs}}function Qm(d,c){d=$d.topLevelDeclsAndRefs(d,
c);var h=d.declaredNames.concat($d.knownGlobals);return $d.arr.filter(d.refs,function(f){return-1===h.indexOf(f.name)})}function iC(d,c,h,f){if(!c&&!d)throw Error("Need at least ast or code");c=c||$d.stringify(d);d=d&&d.loc?d:$d.parse(c,{locations:!0});return $d.withMozillaAstDo(d,[],function(k,n,b){h.every(function(e){return $d.num.between(e,n.loc.start.line,n.loc.end.line)})&&($d.arr.pushIfNotIncluded(b,n),k());return b})}function nn(d,c,h,f){h=void 0===h?!0:h;f=void 0===f?{refs:[],decls:[]}:f;
if("this"===c)return f.refs.push.apply(f.refs,$jscomp.arrayFromIterable(d.thisRefs)),f;var k=$d.__varDeclIdsFor(d,c);if(!h&&k.length)return f;h=$jscomp.makeIterator(d.refs);for(var n=h.next();!n.done;n=h.next())n=n.value,n.name===c&&f.refs.push(n);f.decls.push.apply(f.decls,$jscomp.arrayFromIterable(k));d=$jscomp.makeIterator(d.subScopes);for(k=d.next();!k.done;k=d.next())nn(k.value,c,!1,f);return f}function Qk(d,c,h){var f=null;$d.arr.detect($d.scopesAtIndex(d,h).reverse(),function(k){k=$d.declarationsOfScope(k,
!0);var n=$d.arr.pluck(k,"name").indexOf(c);if(-1===n)return!1;f=k[n];return!0});return f}function Cx(d,c){c="string"===typeof c?$d.parse(c):c;return $d.custom.findNodesIncluding(c,d)}function bs(d,c,h){var f=$d.nodesAt(c.start,d).reverse().find(function(n){return $d.arr.include($d._stmtTypes,n.type)});if(h&&h.asPath){c=new $d.BaseVisitor;var k;c.accept=$d.fun.wrap(c.accept,function(n,b,e,m){if(b===f)throw k=m,Error("stop search");return n(b,e,m)});try{c.accept(d,{},[])}catch(n){}return k}return f}
function Dx(d){var c=[];d=d.node.body||[];for(var h=0;h<d.length;h++){var f=d[h];if("ImportDeclaration"===f.type)if(0===f.specifiers.length)c.push({local:null,imported:null,fromModule:f.source.value,node:f});else{var k=f.source?f.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(f.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:k,node:f}})))}}return c}function Fu(d,c){(void 0===c?0:c)&&$d.resolveReferences(d);c=[];for(var h={},f=$jscomp.makeIterator(d.exportDecls),k=f.next();!k.done;h={$jscomp$loop$prop$node$2360:h.$jscomp$loop$prop$node$2360},k=f.next()){h.$jscomp$loop$prop$node$2360=k.value;var n=$d.statementOf(d.node,h.$jscomp$loop$prop$node$2360);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:b,node:h.$jscomp$loop$prop$node$2360,
type:"all"}):"ExportDefaultDeclaration"===n.type?$d.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2360,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(k=d.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:h.$jscomp$loop$prop$node$2360,type:"id",decl:k.decl,declId:k.declId})):c.push({local:null,exported:"default",fromModule:null,node:h.$jscomp$loop$prop$node$2360,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(e){return function(m){if(b){var a=e.$jscomp$loop$prop$node$2360;var g=m.exported}else m.local&&(a=(g=d.resolvedRefMap.get(m.local))?g.decl:null,g=g?g.declId:null);return{local:!b&&
m.local?m.local.name:null,exported:m.exported?m.exported.name:null,imported:b&&m.local?m.local.name:null,fromModule:b||null,type:"id",node:e.$jscomp$loop$prop$node$2360,decl:a,declId:g}}}(h)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(e){return function(m){return{local:m.id?m.id.name:"default",exported:m.id?m.id.name:"default",type:n.declaration.kind,fromModule:null,node:e.$jscomp$loop$prop$node$2360,decl:m,declId:m.id}}}(h)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2360,decl:n.declaration,declId:n.declaration.id})}}return $d.arr.uniqBy(c,function(e,m){return e.local==m.local&&e.exported==m.exported&&e.fromModule==m.fromModule})}function on(d){return(new Zq.ObjectSpreadTransformer).accept(d,
{},[])}function cs(d,c){if(d.start===c.start&&d.end===c.end)return 0;if(d.end<=c.start)return-1;if(d.start>=c.end||d.start<=c.start&&d.end>=c.end)return 1;if(c.start<=d.start&&c.end>=d.end)return-1;throw Error("Comparing nodes");}function gw(d,c,h){h="object"===typeof h?h:{changes:[],source:h};var f=!1,k=h.changes.reduce(function(b,e){if(b.end<e.pos)return b;var m=e.pos<b.start;f=f||e.pos>=b.start&&e.pos<=b.end;if("add"===e.type)return{start:m?b.start+e.string.length:b.start,end:b.end+e.string.length};
if("del"===e.type)return{start:m?b.start-e.length:b.start,end:b.end-e.length};throw Error("Cannot deal with change "+ye.obj.inspect(e));},{start:d.start,end:d.end}),n=h.source;d=c(d,n.slice(k.start,k.end),f);d="string"===typeof d?d:Array.isArray(d)?d.map(ye._node2string).join("\n"+ye._findIndentAt(n,k.start)):d=ye._node2string(d);k=[{type:"del",pos:k.start,length:k.end-k.start},{type:"add",pos:k.start,string:d}];return{changes:h.changes.concat(k),source:ye._applyChanges(k,n)}}function Ex(d,c){d=d.sort(function(k,
n){return ye._compareNodesForReplacement(k.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var h=0;h<d.length;h++){var f=d[h];c=ye.replaceNode(f.target,f.replacementFunc,c)}return c}function pn(d,c,h,f){f="object"===typeof d?d:null;d="string"===typeof d?d:f.source||ye._node2string(f);return ye.replaceNode(c,h,d)}function Gu(d,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(d.varDecls));d=$jscomp.makeIterator(d.subScopes);for(var h=d.next();!h.done;h=d.next())Gu(h.value,
c);return c}function jC(d){var c="object"===typeof d?d:ye.parse(d);d="string"===typeof d?d:c.source||ye._node2string(c);c=ye.scopes(c);var h=ye.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(k,n,b){b&&(k=ye.parse(n).body[0]);return k.declarations.map(function(e){return{type:"VariableDeclaration",kind:"var",declarations:[e]}})}});return ye.replaceNodes(c,d)}function kC(d){var c="object"===typeof d?d:ye.parse(d);
d="string"===typeof d?d:c.source||ye._node2string(c);c=ye.scopes(c);var h=ye.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(k,n,b){b&&(k=ye.parse(n).body[0]);n=[];k=$jscomp.makeIterator(k.declarations);for(b=k.next();!b.done;b=k.next()){var e=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:e.init}]});e=$jscomp.makeIterator(ye.helpers.objPropertiesAsList(e.id,
[],!1));for(var m=e.next();!m.done;m=e.next())m=m.value.key,n.push(ye.varDecl(m[m.length-2],ye.memberChain.apply(ye,[b.name].concat($jscomp.arrayFromIterable(m))),"var"))}return n}});return ye.replaceNodes(c,d)}function lC(d,c){c=c||{};var h=ye.parse(d,c),f=ye.arr.last(h.body);if("ExpressionStatement"!==f.type)return c.asAST?h:d;h.body.splice(h.body.length-1,1,ye.returnStmt(f.expression));return c.asAST?h:ye.stringify(h)}function nq(d,c){c=c||{};d=ye.returnLastStatement(d,c);return c.asAST?ye.program(ye.funcExpr.apply(ye,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(d.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+d+"\n}"}function Fx(d,c){"string"===typeof d&&(d=ye.parse(d));c=c||{};var h="Program"===d.type,f=c.startFuncNode||ye.id("__start_execution");c=c.endFuncNode||ye.id("__end_execution");var k=ye.topLevelFuncDecls(d),n=d.body,b=[];k.forEach(function(e){var m=e.node;ye.Path(e.path).set(d,ye.exprStmt(m.id));b.push(m)});n.unshift(ye.exprStmt(ye.funcCall(f)));f=ye.arr.last(n);"ExpressionStatement"===
f.type?(n.pop(),n.push(ye.exprStmt(ye.funcCall(c,ye.id("null"),f.expression)))):"VariableDeclaration"===f.type&&"Identifier"===ye.arr.last(f.declarations).id.type?n.push(ye.exprStmt(ye.funcCall(c,ye.id("null"),ye.arr.last(f.declarations).id))):n.push(ye.exprStmt(ye.funcCall(c,ye.id("null"),ye.id("undefined"))));b.push(ye.tryStmt.apply(ye,["err",[ye.exprStmt(ye.funcCall(c,ye.id("err"),ye.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return h?ye.program.apply(ye,$jscomp.arrayFromIterable(b)):
ye.block.apply(ye,$jscomp.arrayFromIterable(b))}function hw(d){if(!ye.isProbablySingleExpressionRe.test(d)||30<d.split("\n").length)return d;try{var c=ye.fuzzyParse(d);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(d="("+d.replace(/;\s*$/,"")+")")}catch(h){"undefined"!==typeof $world?$world.logError(h):console.error("Eval preprocess error: %s",h.stack||h)}return d}function Gx(d,c){var h=lg.statementOf(d,
c,{asPath:!0}).slice(0,-2);h=lg.Path(h).get(d);return h.comments&&h.comments.length?lg.chain(lg.extractComments(d)).reversed().detect(function(f){return f.followingNode===c}).value():null}function mC(d,c){function h(v){return lg.arr.detect(v.node.body,function(y){return y.start>v.comment.end})}function f(v){return{type:"unknown",comment:v.comment.text}}function k(v){v=lg.Path(v.path.slice(0,-1)).get(g);return{name:v.id?v.id.name:"<error: no name for function>",args:lg.arr.pluck(v.params,"name")}}
function n(v){for(var y=lg.Path(v.path.slice(0,-2)).get(g),A=y.key?y.key.name:"<error: no name for method>",E=v.path.slice(),F="<error: no object found for method>";E.length&&"init"!==lg.arr.last(E);)E.pop();E.length&&(F=lg.Path(E.slice(0,-1).concat(["id","name"])).get(g));if(lg.string.startsWith(F,"<error")){for(E=v.path.slice();E.length&&"right"!==lg.arr.last(E);)E.pop();E.length&&(F=lg.Path(E.slice(0,-1).concat(["left"])).get(g),F=l.slice(F.start,F.end))}lg.string.startsWith(F,"<error")&&(E=v.path.slice(),
(v=(v=lg.Path(E.slice(0,-6)).get(g))&&"CallExpression"===v.type&&v.arguments[0])&&(F=l.slice(v.start,v.end)));return{name:A,args:lg.arr.pluck(y.value.params,"name"),objectName:F}}function b(v){v=lg.Path(v.path.slice(0,-1)).get(g);if("FunctionExpression"!==v.type&&"FunctionDeclaration"!==v.type)return{};var y=lg.statementOf(g,v);if("ExpressionStatement"!==y.type||"AssignmentExpression"!==y.expression.type)return{};var A=l.slice(y.expression.left.object.start,y.expression.left.object.end);return{name:l.slice(y.expression.left.property.start,
y.expression.left.property.end),objectName:A,args:lg.arr.pluck(v.params,"name")}}function e(v){var y=v.path.slice(0,-3);var A=lg.Path(y).get(g);if(A&&"Property"===A.type){var E=lg.arr.pluck(A.value.callee.params,"name");var F=A.key?A.key.name:"<error: no name for method>"}F||(y=v.path.slice(0,-2),(A=lg.Path(y).get(g))&&"Property"===A.type&&(E=lg.arr.pluck(A.value.params,"name"),F=A.key?A.key.name:"<error: no name for method>"));F||(F="<error: no name for method>",E=[],y=v.path);A=lg.arr.clone(y);
for(v="<error: no object found for method>";A.length&&"init"!==lg.arr.last(A);)A.pop();A.length&&(v=lg.Path(A.slice(0,-1).concat(["id","name"])).get(g));if(lg.string.startsWith(v,"<error")){for(A=lg.arr.clone(y);A.length&&"right"!==lg.arr.last(A);)A.pop();A.length&&(v=lg.Path(A.slice(0,-1).concat(["left"])).get(g),v=l.slice(v.start,v.end))}lg.string.startsWith(v,"<error")&&(A=lg.arr.clone(y),(y=(y=lg.Path(A.slice(0,-4)).get(g))&&"CallExpression"===y.type&&y.arguments[0])&&(v=l.slice(y.start,y.end)));
return{name:F,args:E,objectName:v}}function m(v){return v&&"VariableDeclaration"===v.type&&1===v.declarations.length}function a(v){return"AssignmentExpression"!==v.type?!1:"ObjectExpression"===v.right.type?!0:"AssignmentExpression"===v.right.type?a(v.right):!1}var g="string"===typeof d?lg.parse(d,{withComments:!0}):d,l=c||("string"===typeof d?d:lg.stringify(d)),r=lg.arr.sortBy(function(v){var y=[],A=new lg.Visitor;A.accept=lg.fun.wrap(A.accept,function(E,F,H,I){F.comments&&lg.arr.pushAll(y,F.comments.map(function(M){return{path:I,
comment:M,node:F}}));return E(F,H,I)});A.accept(v,y,[]);return y}(g),function(v){return v.comment.start});return r.map(function(v,y){if(lg.arr.equals(v.path.slice(-2),["value","body"]))return lg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},n(v)]);var A=v.path.slice(-5);lg.arr.removeAt(A,1);if(lg.arr.equals(A,["properties","value","callee","body"]))return lg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},e(v)]);if((A=lg.Path(v.path.slice(0,-1)).get(g))&&"FunctionDeclaration"===
A.type)return lg.obj.merge([v,v.comment,{type:"function",comment:v.comment.text},k(v)]);if(lg.arr.equals(v.path.slice(-2),["right","body"]))return lg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},b(v)]);A=h(v);return A?(y=r[y+1])&&y.comment.start<=A.start?lg.obj.merge([v,v.comment,{followingNode:A},f(v)]):m(A)&&("ObjectExpression"===A.declarations[0].init.type||a(A.declarations[0].init))?lg.obj.merge([v,v.comment,{followingNode:A},{type:"object",comment:v.comment.text},{name:A.declarations[0].id.name}]):
m(A)?lg.obj.merge([v,v.comment,{followingNode:A},{type:"var",comment:v.comment.text},{name:A.declarations[0].id.name}]):lg.obj.merge([v,v.comment,{followingNode:A},f(v)]):lg.obj.merge([v,v.comment,{followingNode:A},f(v)])})}function Jz(d,c){c=c||bi.obj.merge({hideOneLiners:!1},c);"string"===typeof d&&(d=bi.parse(d,{addSource:!0}));for(var h=[],f=$jscomp.makeIterator("Program"===d.type?d.body:d.body.body),k=f.next();!k.done;k=f.next()){k=k.value;k=bi.unwrapExport(k);var n=bi.functionWrapper(k,c)||
bi.varDefs(k)||bi.funcDef(k)||bi.es6ClassDef(k)||bi.someObjectExpressionCall(k);if(n){if(c.hideOneLiners)if(d.loc)n=bi.arr.filter(n,function(e){return!e.node.loc||e.node.loc.start.line!==e.node.loc.end.line});else if(d.source){k=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&k.includes(b.parent)||(b.node.source||"").includes("\n"))&&k.push(b);n=k}h.push.apply(h,$jscomp.arrayFromIterable(n))}}return h}function Hu(d){return bi.arr.flatmap(d,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?Hu(bi.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?Hu(c.elements):[]:[]})}function $q(d){return Dg.isValidIdentifierRe.test(d)}function oq(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function ar(d,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return d+"("+(c&&c[1]||"")+")"}function $E(d){return d===d||d===Array||d===Function||d===String||d===Boolean||d===Date||d===RegExp||d===Number||d===Promise?!0:d instanceof Function&&(void 0!==d.superclass||void 0!==d._superclass)}function ap(d,c){return d.map(function(h){return h[c]})}function nt(d){if(Symbol.keyFor(d))return'Symbol.for("'+Symbol.keyFor(d)+'")';if(ci.knownSymbols.get(d))return ci.knownSymbols.get(d);String(d).match(ci.symMatcher);return String(d)}function ds(d){if(!d)return String(d);
if(Array.isArray(d))return"["+d.map(ds).join(",")+"]";if("symbol"===typeof d)return ci.printSymbol(d);try{return String(d)}catch(c){throw Error("Cannot print object: "+c.stack);}}function br(d,c){c=void 0===c?{}:c;var h=d.value,f=d.isPromise,k=d.promisedValue,n=d.promiseStatus;return d.isError||h instanceof Error?(c=String(h),(k=h.stack||"")&&h.message!==h.stack&&(k=String(k),0===k.indexOf(c)&&(k=k.slice(c.length)),c+="\n"+k),c):f?(d=ci.string.print(n),c="pending"===n?void 0:br({value:k},c),"Promise({status: "+
d+", "+(void 0===h?"":"value: "+c)+"})"):h instanceof Promise?'Promise({status: "unknown"})':c.inspect?ci.printInspectEvalValue(h,c.inspectDepth||2):String(h)}function cr(d,c){var h="";return Promise.resolve().then(function(){var f=c.lastIndexOf(".");0<=f?(h=c.slice(f+1),c=c.slice(0,f)):(h=c,c='(typeof window === "undefined" ? global : window)');return d(c)}).then(function(f){return{evalResult:f,startLetters:h,code:c}})}function iw(d,c,h){d=Si.getObjectForCompletion(d,c).then(function(f){var k=f.evalResult;
f={completions:Si.descriptorsOfObjAndProtoProperties(k&&k.isEvalResult?k.value:k),startLetters:f.startLetters,code:f.code};k&&k.isPromise&&("fulfilled"===k.promiseStatus?f.promiseResolvedCompletions=Si.descriptorsOfObjAndProtoProperties(k.promisedValue):"rejected"===k.promiseStatus&&(f.promiseRejectedCompletions=Si.descriptorsOfObjAndProtoProperties(k.promisedValue)));return f});"function"===typeof h&&d.then(function(f){return h(null,f)}).catch(function(f){return h(f)});return d}function es(d,c,h){c||
(c={type:"Identifier",name:"__rec"});h=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:h&&h.exclude||[],includeDecls:null,excludeDecls:h&&h.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:h&&h.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:h&&h.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(k){return k}},h);c=d;if(h.ignoreUndeclaredExcept){var f=
uc.topLevelDeclsAndRefs(d);h.excludeRefs=uc.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeRefs);h.excludeDecls=uc.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeDecls)}h.excludeRefs=h.excludeRefs.concat(h.captureObj.name);h.excludeDecls=h.excludeDecls.concat(h.captureObj.name);h.recordDefRanges&&uc.computeDefRanges(c,h);h.excludeRefs=h.excludeRefs.concat(uc.additionalIgnoredRefs(d,h));h.excludeDecls=h.excludeDecls.concat(uc.additionalIgnoredDecls(d,
h));c=uc.fixDefaultAsyncFunctionExportForRegeneratorBug(c,h);h.es6ExportFuncId&&(h.excludeRefs.push(h.es6ExportFuncId),h.excludeRefs.push(h.es6ImportFuncId),c=uc.es6ModuleTransforms(c,h));c=uc.replaceRefs(c,h);c=uc.replaceVarDecls(c,h);c=uc.clearEmptyExports(c,h);c=uc.replaceClassDecls(c,h);c=uc.splitExportDeclarations(c,h);c=uc.insertCapturesForExportDeclarations(c,h);c=uc.insertCapturesForImportDeclarations(c,h);c=uc.insertDeclarationsForExports(c,h);c=uc.putFunctionDeclsInFront(c,h);return c=uc.transformImportMeta(c,
h)}function jw(d,c,h){h=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},h);c=uc.Path("body.0.expression").get(d);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+uc.stringify(d).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+uc.stringify(d).slice(0,
300)+"...");c=uc.Path("arguments.1.body.body").get(c);var f=uc.arr.last(c);if("ReturnStatement"!==f.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+uc.stringify(d).slice(0,300)+"...");var k=f.argument.properties.find(function(n){return"setters"===n.key.name});if(!k)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+uc.stringify(d).slice(0,300)+
"...");f=f.argument.properties.find(function(n){return"execute"===n.key.name});if(!f)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+uc.stringify(d).slice(0,300)+"...");k.value.elements.forEach(function(n){n.params[0]=uc.assign(n.params[0],uc.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
uc.arr.include(h.exclude,b.expression.left.name))return b;var e=b.expression.left;b=h.declarationWrapper?uc.declarationWrapperCall(h.declarationWrapper,null,uc.literal(e.name),uc.literal("var"),b.expression,h.captureObj,h):b.expression;return uc.exprStmt(uc.assign(uc.member(h.captureObj,e),b))})});(k=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.captureObj.name}))||(k=f.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.captureObj.name}));k&&(uc.arr.remove(f.value.body.body,k),uc.arr.pushAt(c,k,c.length-1));h.sourceAccessorName&&((k=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.sourceAccessorName}))||(k=f.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.sourceAccessorName})),k&&(uc.arr.remove(f.value.body.body,
k),uc.arr.pushAt(c,k,c.length-1)));return d}function um(d,c){var h=uc.stringify(c.captureObj),f=0;d.body=d.body.reduce(function(k,n){var b=[n],e="",m=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(g){return[g.local.name,g.exported.name]});e="import { "+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return g===l?l:g+" as "+l}).join(",")+" } from "+n.source.raw+";\n";m="export { "+a.map(function(g){g=$jscomp.makeIterator(g);g.next();
return g.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(g){return[g.id.name,g.id.name]})):a=n.specifiers.map(function(g){return[g.exported.name,g.local.name]});m&&(b=[],e+=m);b=b.concat(uc.parse(e+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return h+"."+g+" = "+l+";\n"+(h+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(f++,b=b.concat(uc.parse("\n       import * as __captured"+f+"__ from "+
n.source.raw+";\n       Object.assign("+h+", __captured"+f+"__);\n      ")));return k.concat(b)},[]);return d}function nC(d){(this||Kz).__wrapped__=d;(this||Kz).__actions__=[];(this||Kz).__dir__=1;(this||Kz).__filtered__=!1;(this||Kz).__iteratees__=[];(this||Kz).__takeCount__=4294967295;(this||Kz).__views__=[]}function kw(d,c){(this||aF).__wrapped__=d;(this||aF).__actions__=[];(this||aF).__chain__=!!c;(this||aF).__index__=0;(this||aF).__values__=void 0}function oC(d){if(Xaa(d)&&!Yaa(d)&&!(d instanceof
Zaa)){if(d instanceof IX)return d;if($aa.call(d,"__wrapped__"))return aba(d)}return new IX(d)}function On(d,c,h,f,k,n,b,e,m,a){function g(){for(var F=arguments.length,H=Array(F),I=F;I--;)H[I]=arguments[I];if(y)var M=bba(g),N=cba(H,M);f&&(H=dba(H,f,k,y));n&&(H=eba(H,n,b,y));F-=N;if(y&&F<a)return I=fba(H,M),gba(d,c,On,g.placeholder,h,H,I,e,m,a-F);I=r?h:this||MI;M=v?I[d]:d;F=H.length;e?H=hba(H,e):A&&1<F&&H.reverse();l&&m<F&&(H.length=m);(this||MI)&&(this||MI)!==iba&&(this||MI)instanceof g&&(M=E||JX(M));
return M.apply(I,H)}var l=c&128,r=c&1,v=c&2,y=c&24,A=c&512,E=v?void 0:JX(d);return g}function lw(d){return d&&d.__esModule?d:{default:d}}function Lz(d){if(Array.isArray(d)){for(var c=0,h=Array(d.length);c<d.length;c++)h[c]=d[c];return h}return Array.from(d)}function bF(d){var c=null;"string"===typeof d.version&&/^7\./.test(d.version)&&(c=Object.getPrototypeOf(d),!c||Object.prototype.hasOwnProperty.call(c,"version")&&Object.prototype.hasOwnProperty.call(c,"transform")&&Object.prototype.hasOwnProperty.call(c,
"template")&&Object.prototype.hasOwnProperty.call(c,"types")||(c=null));return Object.assign({},c,d)}function mw(d,c){c=void 0===c?"__lvVarRecorder":c;hk.ensureJSXPlugin();"function"===typeof d&&(d=String(d));if(lively.FreezerRuntime)return d.split(c+".").join("");d="string"===typeof d?hk.parseFunction(d):d;d=hk.ReplaceVisitor.run(d,function(h){return"MemberExpression"===h.type&&"Identifier"===h.object.type&&h.object.name===c?h.property:h});return hk.stringify(d)}function Iu(d){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),
d;hk.ensureJSXPlugin();hk.ensureOptionalCatchBinding();hk.ensureImportMeta();d=babel.transform(d,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;d=d.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");d.startsWith("(function")&&d.endsWith(");")&&(d=d.slice(1,-2));return d}function bp(d,c){d=Sg.transform.transformSingleExpression(d);
d=Sg.parse(d,{withComments:!0});c=Sg.processInlineCodeTransformOptions(d,c);var h=Sg.query.topLevelDeclsAndRefs(d),f=h.classDecls,k=h.funcDecls;h=h.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(k)).forEach(function(m){return m["x-lively-object-meta"]=Object.assign({},n,{start:m.start,end:m.end})});h.forEach(function(m){return m.declarations.forEach(function(a){return a["x-lively-object-meta"]=
Object.assign({},n,{start:a.start,end:a.end})})});d=Sg.transform.objectSpreadTransform(d);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(f=Sg.getGlobal(),c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?Sg.getGlobal():Sg.Path(c.topLevelVarRecorderName).get(f));if(c.topLevelVarRecorder){f=(c.dontTransform||[]).concat(["arguments"]);k=c.recordGlobals?null:Sg.arr.withoutAll(Object.keys(c.topLevelVarRecorder),f);h=Sg.id(c.varRecorderName||"__lvVarRecorder");var b=void 0;if(c.declarationWrapperName||
"function"===typeof c.declarationCallback){var e=c.declarationWrapperName||Sg.defaultDeclarationWrapperName;c.declarationWrapper=Sg.member(Sg.id(c.varRecorderName||"__lvVarRecorder"),Sg.literal(e),!0);c.declarationCallback&&(c.topLevelVarRecorder[e]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)b={currentModuleAccessor:c.currentModuleAccessor,classHolder:h,functionNode:Sg.member(h,Sg.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,
evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};d=Sg.capturing.rewriteToCaptureTopLevelVariables(d,h,{es6ImportFuncId:c.es6ImportFuncId,es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:k,exclude:f,declarationWrapper:c.declarationWrapper||void 0,classToFunction:b,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(d=Sg.transform.wrapInStartEndCall(d,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));
d=Sg.stringify(d);c.jsx&&(d=Sg.es5Transpilation(d));c.sourceURL&&(d+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return d}function Cp(d,c){c=void 0===c?{}:c;if(!c.topLevelVarRecorder)return d;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var h=c.declarationWrapperName||Sg.defaultDeclarationWrapperName;c.declarationWrapper=Sg.member(Sg.id(c.varRecorderName),Sg.literal(h),!0);c.declarationCallback&&(c.topLevelVarRecorder[h]=c.declarationCallback)}d=Sg.parse(d);h=(c.dontTransform||
[]).concat(["arguments"]);c.recordGlobals||Sg.arr.withoutAll(Object.keys(c.topLevelVarRecorder),h);c=Sg.capturing.rewriteToRegisterModuleToCaptureSetters(d,Sg.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:h},c));return Sg.stringify(c)}function fs(d,c,h){"function"===typeof c&&2===arguments.length&&(h=c,c=null);var f=new dh.EvalResult,k=!1,n=!1;c=dh._normalizeEvalOptions(c);var b=dh.promise.deferred(),e=c.topLevelVarRecorder||dh.getGlobal(),m=d;c.wrapInStartEndCall&&(e[dh.startEvalFunctionName]&&
console.warn(f.addWarning("startEvalFunctionName "+dh.startEvalFunctionName+" already exists in recorder!")),e[dh.endEvalFunctionName]&&console.warn(f.addWarning("endEvalFunctionName "+dh.endEvalFunctionName+" already exists in recorder!")),e[dh.startEvalFunctionName]=function(){if(k)console.warn(f.addWarning("onEvalStartCalled multiple times!"));else if(k=!0,"function"===typeof c.onStartEval)c.onStartEval()},e[dh.endEvalFunctionName]=function(l,r){n?console.warn(f.addWarning("onEvalEndCalled multiple times!")):
(n=!0,dh.finishEval(l,r,f,c,e,b,h))});try{d=dh.evalCodeTransform(d,c),c.header&&(d=c.header+d),c.footer&&(d+=c.footer),c.transpiler&&(d=c.transpiler(d,c.transpilerOptions))}catch(l){console.warn(f.addWarning("lively.vm evalCodeTransform not working: "+l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=d);var a=dh._eval.call(c.context,d,c.topLevelVarRecorder,c.originalSource||m)}catch(l){var g=l}if(c.wrapInStartEndCall){if(g&&!n)e[dh.endEvalFunctionName](g,void 0)}else dh.finishEval(g,
g||a,f,c,e,b,h);return c.sync?f:b.promise}function Mz(d,c){c=Object.assign(c||{},{sync:!0});return dh.runEval(d,c)}function Nz(d){if(void 0===d){if("undefined"===typeof System)return null;d=System}var c=d.get("@lively-env");c||d.set("@lively-env",d.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:d["__lively.notifications_emitter"]||(d["__lively.notifications_emitter"]=pC({},{maxListenerLimit:1E4})),notifications:d["__lively.notifications_notifications"]||
(d["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function Ao(d,c,h){Nz(h).emitter.on(d,c);return c}function gs(d,c,h,f){c=void 0===c?{}:c;h=void 0===h?Date.now():h;c=Object.assign({type:d,time:h},c);h=Nz(f);f=h.emitter;h=h.notifications;f.emit(d,c);f.isLogging&&(d=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(d+" "+Bi(c,{maxDepth:2})));f.isRecording&&(h.push(c),h.limit&&h.splice(0,h.length-h.limit));return c}function qC(d,c,h){Nz(h).emitter.removeListener(d,
c);return c}function dr(d,c,h){h=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},h);d.debug&&console.log("[lively.module] runEval: "+c.slice(0,100).replace(/\n/mg," ")+"...");var f=h,k=f.format,n=f.targetModule;n=d.decanonicalize(n||"*scratch*",f.parentModule);h.targetModule=n;k&&((f=d.getConfig().meta[n])||(f={}),f[n]||(f[n]={}),f[n].format||(f[n].format=k,d.config(f)));k=d.get("@lively-env").moduleEnv(n);f=k.recorder;var b=
k.recorderName,e=k.dontTransform,m=xi.getEs6Transpiler(d,h,k),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");h=Object.assign({waitForPromise:!0,sync:!1,evalId:h.evalId||k.nextEvalId(),sourceAccessorName:(h.hasOwnProperty("embedOriginalCode")?h.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},h,{header:a,recordGlobals:!0,dontTransform:e,varRecorderName:b,topLevelVarRecorder:f,sourceURL:h.sourceURL||h.targetModule,context:h.context||f,wrapInStartEndCall:!0,
es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:m,declarationWrapperName:k.varDefinitionCallbackName,currentModuleAccessor:xi.funcCall(xi.member(xi.funcCall(xi.member(xi.member("__lvVarRecorder","System"),"get"),xi.literal("@lively-env")),"moduleEnv"),xi.literal(h.targetModule))});if(!h.sync&&!h.importsEnsured&&xi.hasUnimportedImports(d,c,n))return xi.ensureImportsAreImported(d,c,n).catch(function(g){return null}).then(function(g){return dr(d,g,Object.assign({},h,{importsEnsured:!0}))});
if(!k.record()){if(!h.sync&&!h._moduleImported)return d.import(n).catch(function(g){return null}).then(function(){return dr(d,c,Object.assign({},h,{_moduleImported:!0}))});k.ensureRecord()}if(h.es6Transpile&&h.transpiler instanceof Promise)if(h.sync||h._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),h.transpiler=null;else return h.transpiler.catch(function(g){return console.error(g)}).then(function(g){return dr(d,
c,Object.assign({},h,{transpiler:g,_transpilerLoaded:!0}))});d.debug&&console.log("[lively.module] runEval in module "+n+" started");xi.emit("lively.vm/doitrequest",{code:c,waitForPromise:h.waitForPromise,targetModule:h.targetModule},Date.now(),d);d.get("@lively-env").evaluationStart(n);n=xi.vmRunEval(c,h);return h.sync?xi.evalEnd(d,c,h,n):Promise.resolve(n).then(function(g){return xi.evalEnd(d,c,h,g)})}function vm(d,c){var h=c=Object.assign({format:"esm",System:null,targetModule:null},c),f=h.format,
k=h.System;h=h.targetModule;k||"undefined"===typeof System||(k=System);return!k&&h?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):h&&["esm","es6","register"].includes(f)?ul.esmEval.runEval(k,d,c):ul.globalEval.runEval(d,c)}function pq(d,c){return ul.globalEval.syncEval(d,c)}function Ju(d){return Hf.withSuperclasses(d).slice(1)}function Pn(d){var c=[];do c.push(d),d=d[Hf.superclassSymbol];while(d&&d.name);return c.map(function(h){return h.name}).join("->")}
function Ku(d){for(var c=[];d;)c.push(d),d=d[Hf.superclassSymbol];return c}function rC(d,c){do if(d===c)return!0;while(d=d[Hf.superclassSymbol]);return!1}function qn(d,c){if(d.constructor===c&&d.__proto__===c.prototype)return d;d.constructor=c;d.__proto__=c.prototype;return d}function Lu(d){return d&&"function"===typeof d}function qq(d){var c=Hf.RuntimeSourceDescriptor.for(d),h=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return Hf.Path("body.body").get(h).map(function(f){var k=
f.static,n=f.kind;f=f.key;var b=f.value;f=f.name||b;b=d[Symbol.for("lively-instance-superclass")].prototype.hasOwnProperty(f);var e=k?d:d.prototype;e="get"===n?e.__lookupGetter__(f):"set"===n?e.__lookupSetter__(f):e[f];return{static:k,name:f,value:e,kind:n,owner:d,overridden:b}})}function sC(d){return Hf.runtimeNonStaticMembers(d).concat(Hf.runtimeNonStaticMembers(d))}function ot(d){var c=Hf.obj.getOwnPropertyDescriptors(d);return Hf.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(h){var f=
c[h],k="function"===typeof f.value?"method":"get"in f?"get":"set"in f?"set":"unknown";return{static:!0,name:h,value:"method"===k?f.value:"get"===k?f.get:"set"===k?f.set:null,kind:k,owner:d}})}function nw(d){return Hf.arr.uniq(Hf.arr.flatmap(Hf.arr.without(Hf.withSuperclasses(d),Object),function(c){return Hf.runtimeStaticClassMembers(c)}))}function hs(d){var c=kj.propertiesAndSettingsInHierarchyOf(d),h=c.properties;c=c.propertySettings;d[kj.propertiesAndSettingsCacheSym]={properties:h,order:kj.obj.sortKeysWithBeforeAndAfterConstraints(h),
propertySettings:c,classHierarchy:kj.getClassHierarchy(d)};h&&"object"===typeof h?kj.prepareClassForProperties(d,c,h):console.warn("Class "+d.name+" indicates it has managed properties but its properties accessor ("+(kj.defaultPropertiesKey+") does not return a valid property descriptor map"))}function rq(d,c){c!==d.constructor&&(d.constructor=c,mg.setPrototypeOf(d,c.prototype))}function Mu(d,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var h=d&&d[mg.superclassSymbol];h&&h===c||(mg.ensureInitializeStub(c),
d[mg.superclassSymbol]=c,mg.setPrototypeOf(d.prototype,c.prototype),c!==Object&&mg.setPrototypeOf(d,c));return c}function cc(d,c,h,f,k,n,b){h=void 0===h?[]:h;f=void 0===f?[]:f;k=void 0===k?{}:k;var e=d.name,m=e&&k.hasOwnProperty(e)&&k[e];k=m&&m[mg.superclassSymbol];m&&"function"===typeof m&&k||(m=d);mg.setSuperclass(m,c);mg.installMethods(m,h,f);m[mg.objMetaSymbol]=b;n&&(d=n.package(),b=m[mg.moduleMetaSymbol],k=Date.now(),m[mg.moduleMetaSymbol]={package:d?{name:d.name,version:d.version}:{},pathInPackage:d?
n.pathInPackage():n.id,lastChange:b&&b.lastChange&&k<=b.lastChange?b.lastChange+1:k,lastSuperclassChange:0},c&&c.referencedAs&&(m.hasOwnProperty(mg.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(m[mg.moduleSubscribeToToplevelChangesSym]),m[mg.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,g){if(a===c.referencedAs){a=g&&g[mg.moduleMetaSymbol];var l=m[mg.moduleMetaSymbol];if(a){if(a.lastChange===l.lastSuperclassChange)return;
l.lastSuperclassChange=a.lastChange}mg.setSuperclass(m,g);mg.installMethods(m,h,f);mg.prepareClassForManagedPropertiesAfterCreation(m)}})));m.toString=function(){var a=String(this.prototype[mg.initializeSymbol]).match(mg.constructorArgMatcher),g=this[mg.superclassSymbol];return"class "+this.name+" "+(g?"extends "+g.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};mg.prepareClassForManagedPropertiesAfterCreation(m);return m}function Zk(d,c,h,f,k){"function"!==typeof h||"undefined"!==
typeof f&&"object"!==typeof f||(k=f,f="call",k||(k={}),k.updater||(k.updater=function(m,a){return m(null,a)}));var n=d.getConnectionPoints&&d.getConnectionPoints()||d.connections,b=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||kh.AttributeConnection;"function"===typeof k&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),k={converter:k});n&&(k=kh.obj.merge(n,
k));b=new b(d,c,h,f,k);var e=b.getExistingConnection();if(e)return e.resetSpec(),e.init(d,c,h,f,k),e;k=b.connect();if("function"===typeof d.onConnect)d.onConnect(c,h,f);n&&n.updateOnConnect&&b.update(d[c]);return k}function Dp(d,c,h,f){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f||(f="call");if(d.attributeConnections){for(var k=$jscomp.makeIterator(d.attributeConnections.slice()),n=k.next();!n.done;n=k.next())n=n.value,n.getSourceAttrName()==c&&n.getTargetObj()===h&&n.getTargetMethodName()==
f&&n.disconnect();if("function"==typeof d.onDisconnect)d.onDisconnect(c,h,f)}}function er(d){for(var c;d.attributeConnections&&(c=d.attributeConnections[0]);)c.disconnect()}function fr(d,c,h,f,k){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f?k=k||{}:(k=f,f="call",k=k||{},k.updater||(k.updater=function(n,b){return n(null,b)}));k=k||{};k.removeAfterUpdate=!0;return kh.connect(d,c,h,f,k)}function dm(d,c,h){var f=d.attributeConnections;if(f){d=d[c];for(var k=0,n=f.length;k<n;k++){var b=
f[k];b.getSourceAttrName()==c&&b.update(h,d)}}}function Nu(d,c,h,f){if(null!=d[c])h[f](d[c]);else kh.connect(d,c,h,f,{removeAfterUpdate:!0})}function tC(d,c,h,f){for(var k={key:c.pop(),whenDefined:function(n){kh.callWhenNotNull(n,this.key,h,f)}};0<c.length;)k={key:c.pop(),next:k,whenDefined:function(n){kh.callWhenNotNull(n,this.key,this.next,"whenDefined")}};k.whenDefined(d)}function Ef(d,c){var h=!1;c||"function"!==typeof d||(c=d,h=!0);if(h){d=kh.AttributeConnection.prototype;d.isActive||(d.isActive=
0);d.isActive++;try{var f=c()}finally{d.isActive--,0>=d.isActive&&delete d.isActive}}else{h=d.sourceObj;var k=d.sourceAttribute,n=d.targetObj,b=d.targetAttribute;d=n&&b?function(e){return e.getSourceAttrName()===k&&n===e.getTargetObj()&&b===e.getTargetMethodName()}:function(e){return e.getSourceAttrName()===k};(d=h.attributeConnections&&h.attributeConnections.filter(d))&&kh.arr.invoke(d,"activate");try{f=c()}finally{d&&kh.arr.invoke(d,"deactivate")}}return f}function uC(d){if(null==d)return!0;d=typeof d;
return"boolean"===d||"number"===d||"string"===d?!0:!1}function gr(d){return d.constructor[Lj.classNameProp]||d.constructor.name}function Ou(d){if(d&&d.constructor){var c=Lj.getClassName(d);if(c){if(d=d.constructor[Lj.moduleMetaInClassProp],"Object"!==c||d)return d&&(delete d.lastChange,delete d.lastSuperclassChange),{className:c,module:d}}else console.warn("Cannot serialize class info of anonymous class of instance "+d)}}function Ep(d){var c=d.module;if(c){var h=c.pathInPackage;if(c.package&&c.package.name&&
"no group"!==c.package.name){var f=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));h=Lj.string.joinPath(f,h)}f=System.get("@lively-env");if(c=f.moduleEnv(h)||f.moduleEnv(c.pathInPackage))return c.recorder[d.className];console.warn("Trying to deserialize instance of class "+d.className+" but the module "+h+" is not yet loaded")}return System.global[d.className]}function Fp(d,c,h){c=void 0===c?function(a){return a}:c;h=void 0===h?{}:h;var f=new $i.ExpressionSerializer,k=h,n=h.isMorph?h.propertiesAndPropertySettings().order:
[];n=n.length?n:$i.obj.keys(d);for(var b=$jscomp.makeIterator(n),e=b.next();!e.done;e=b.next()){e=e.value;var m=d[e];if("_env"===e||"env"===e||"__connections__"===e||"__refs__"===e)return;$i.obj.isString(m)&&f.isSerializedExpression(m)&&(m=f.deserializeExpr(m));["borderColor","borderWidth","borderStyle","borderRadius"].includes(e)&&(m=Fp(m,c));m&&m._id&&(m=c(Fp(m,c)));k[e]=m}d.submorphs&&(k.submorphs=d.submorphs.map(function(a){return Fp(a,c)}));if(h)for(f=$jscomp.makeIterator(n.filter(function(a){return!!d[a]})),
e=f.next();!e.done;e=f.next())n=e.value,h[n]=k[n];if(d.__refs__)for(h=$jscomp.makeIterator(d.__refs__),f=h.next();!f.done;f=h.next())n=$jscomp.makeIterator(f.value),f=n.next().value,n=n.next().value,$i.Path(f).set(k,$i.Path(n).get(k));if(d.__connections__)for(h=$jscomp.makeIterator(d.__connections__),f=h.next();!f.done;f=h.next())f=f.value,$i.connect($i.Path(f.pathToSource).get(k),f.sourceAttrName,$i.Path(f.pathToTarget).get(k),f.targetMethodName,Object.assign({},$i.obj.select(f,["garbageCollect",
"converterString","updaterString","varMapping"])));return k}function Bo(d,c){var h=c=void 0===c?{}:c,f=void 0===h.keepFunctions?!0:h.keepFunctions,k=void 0===h.skipAttributes?[]:h.skipAttributes,n=void 0===h.keepConnections?!0:h.keepConnections,b=void 0===h.asExpression?!1:h.asExpression;c=void 0===h.root?!0:h.root;var e=void 0===h.path?"":h.path,m=void 0===h.skipUnchangedFromDefault?!1:h.skipUnchangedFromDefault,a=void 0===h.nestedExpressions?{}:h.nestedExpressions,g=void 0===h.objToPath?new WeakMap:
h.objToPath,l=void 0===h.objRefs?[]:h.objRefs;h=void 0===h.connections?[]:h.connections;var r={skipAttributes:k,skipUnchangedFromDefault:m,root:!1,keepFunctions:f,asExpression:b,nestedExpressions:a,connections:h,objRefs:l,objToPath:g,keepConnections:n};if(g.has(d))return l.push([e,g.get(d)]),null;g.set(d,e);b&&(f=!1);var v=new $i.ExpressionSerializer,y=function(Ka,K){try{if(K=K.__serialize__(),b){var aa=$i.string.newUUID();a[aa]=K;K=aa}else K=K.__expr__?v.exprStringEncode(K):K}catch(T){console.log("[export to JSON] failed converting "+
Ka+" to serialized expression")}return K},A={};g.set(d,e);n&&d.attributeConnections&&h.push.apply(h,$jscomp.arrayFromIterable(d.attributeConnections));d.isText&&(A.textAndAttributes=d.textAndAttributes.map(function(Ka,K){return Ka&&Ka.isMorph?Bo(Ka,Object.assign({},r,{path:e?e+".textAndAttributes."+K:"textAndAttributes."+K})):Ka}));d.submorphs&&0<d.submorphs.length&&(A.submorphs=d.submorphs.map(function(Ka,K){return Bo(Ka,Object.assign({},r,{path:e?e+".submorphs."+K:"submorphs."+K}))}).filter(Boolean));
var E={};for(W in d.spec(m)){E.$jscomp$loop$prop$name$2365=W;m=d[E.$jscomp$loop$prop$name$2365];!m||"object"!==typeof m||Array.isArray(m)||m.isMorph||g.set(m,e?e+"."+E.$jscomp$loop$prop$name$2365:E.$jscomp$loop$prop$name$2365);if("submorphs"!==E.$jscomp$loop$prop$name$2365&&!k.includes(E.$jscomp$loop$prop$name$2365))if("metadata"===E.$jscomp$loop$prop$name$2365&&$i.Path("commit.__serialize__").get(m))A[E.$jscomp$loop$prop$name$2365]=Object.assign({},m,{commit:y(E.$jscomp$loop$prop$name$2365+".commit",
m.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(E.$jscomp$loop$prop$name$2365)){for(var F={},H=$jscomp.makeIterator(["top","left","right","bottom"]),I=H.next();!I.done;I=H.next()){I=I.value;var M=m[I];if(M&&M.__serialize__&&(M=M.__serialize__())&&M.__expr__)if(b){var N=$i.string.newUUID();a[N]=M;M=N}else M=v.exprStringEncode(M);F[I]=M}A[E.$jscomp$loop$prop$name$2365]=F}else if(m&&m.isMorph)A[E.$jscomp$loop$prop$name$2365]=Bo(m,Object.assign({},r,{path:e?e+"."+
E.$jscomp$loop$prop$name$2365:E.$jscomp$loop$prop$name$2365}));else if(m&&m.__serialize__)A[E.$jscomp$loop$prop$name$2365]=y(E.$jscomp$loop$prop$name$2365,m);else if(Array.isArray(m))A[E.$jscomp$loop$prop$name$2365]=m.map(function(Ka){return function(K,aa){return K&&K.isMorph?Bo(K,Object.assign({},r,{path:e?e+"."+Ka.$jscomp$loop$prop$name$2365+"."+aa:Ka.$jscomp$loop$prop$name$2365+"."+aa})):K&&K.__serialize__?y(Ka.$jscomp$loop$prop$name$2365+"."+aa,K):K}}(E));else{if(m&&!$i.obj.isString(m)&&!$i.obj.isNumber(m)&&
0<$i.properties.allOwnPropertiesOrFunctions(m).length)for(var X in m)m[X]&&m[X].isMorph&&(m[X]=Bo(m[X],Object.assign({},r,{path:e?e+"."+E.$jscomp$loop$prop$name$2365+"."+X:E.$jscomp$loop$prop$name$2365+"."+X})));A[E.$jscomp$loop$prop$name$2365]=m}E={$jscomp$loop$prop$name$2365:E.$jscomp$loop$prop$name$2365}}d.isText&&delete A.textString;b||(A._id=d._id);f?(A.type=d.constructor,Object.keys(d).forEach(function(Ka){return"function"===typeof d[Ka]&&(A[Ka]=d[Ka])})):(A.styleSheets&&(A.styleSheets=[]),
A.type=$i.getSerializableClassMeta(d));if(n&&c){var W=[];X=$jscomp.makeIterator(h);for(f=X.next();!f.done;f=X.next())H=f=f.value,k=H.sourceAttrName,n=H.targetMethodName,F=H.targetObj,h=H.updaterString,E=H.converterString,m=H.garbageCollect,H=g.get(H.sourceObj),F=g.get(F),"string"===typeof H&&"string"===typeof F?W.push({pathToSource:H,pathToTarget:F,garbageCollect:m,updaterString:h,converterString:E,sourceAttrName:k,targetMethodName:n,varMapping:{properties:xp}}):console.log("skipping:",f);b||(A.__connections__=
W)}if(b&&c){c="morph("+$i.obj.inspect(A)+")";var ea={"lively.morphic":["morph"]},Aa;for(Aa in a)c=c.replace('"'+Aa+'"',a[Aa].__expr__),Object.entries(a[Aa].bindings||{}).forEach(function(Ka){var K=$jscomp.makeIterator(Ka);Ka=K.next().value;K=K.next().value;ea[Ka]=ea[Ka]?$i.arr.uniq([].concat($jscomp.arrayFromIterable(ea[Ka]),$jscomp.arrayFromIterable(K))):K});return{__expr__:c,bindings:ea}}c&&(A.__refs__=l);return A}function Oz(d){var c={},h;for(h in d)c[h]=Yf.referencesOfId(d,h);return c}function Rl(d){return d&&
d.__ref__}function wm(d,c){var h={};return Yf.referencesOfId((h[d.id]=d.currentSnapshot,h),d.id,c)}function Sl(d,c,h){d=d[c];c=[];for(var f in d.props){var k=d.props[f]||{},n=k.value;k=k.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Yf.referencesInArray(n,h&&f))):!k&&n&&Yf.isReference(n)&&c.push(h?{key:f,id:n.id}:n.id)}if(d.hasOwnProperty("entries"))for(f=0;f<d.entries.length;f++)n=d.entries[f],Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Yf.referencesInArray(n,h&&
n))):n&&Yf.isReference(n)&&c.push(h?{key:n,id:n.id}:n.id);return c}function NI(d,c){for(var h=[],f=0;f<d.length;f++){var k=d[f];Array.isArray(k)?h.push.apply(h,$jscomp.arrayFromIterable(NI(k,c?c+"["+f+"]":void 0))):k&&Yf.isReference(k)&&h.push(c?{key:c+"["+f+"]",id:k.id}:k.id)}return h}function Pz(d,c){return(d[c][Yf.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function Ng(d,c){return Yf.referencesOfId(d,c).map(function(h){return h+":"+Yf.classNameOfId(d,h)})}function Hx(d,c){return(d[c][Yf.ClassHelper.classMetaForSerializationProp]||
{}).className||"Object"}function Pu(d,c,h,f){function k(y,A,E){if(!g)if(50<E)alert(""+m);else if(y===A)m.push(y),g=m.slice();else if(!a[y]){a[y]=!0;m.push(y);y=Yf.referencesOfId(d,y);for(var F=0;F<y.length;F++)k(y[F],A,E+1);m.pop()}}f=void 0===f?{}:f;var n=void 0===f.showPath?!0:f.showPath,b=f.hasOwnProperty("showClassNames")?f.showClassNames:!n,e=f.hasOwnProperty("showPropNames")?f.showPropNames:n;f=f.hasOwnProperty("hideId")?f.hideId:n;var m=[],a={},g;k(c,h,0);if(!g)return null;if(!b&&!e)return g;
c=[];for(h=0;h<g.length-1;h++){var l=g[h],r=g[h+1],v=[];f||v.push(l);b&&v.push((d[l][Yf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");e&&(l=Yf.referencesOfId(d,l,!0).find(function(y){return y.id===r})||{key:"????"},v.push(l.key));c.push(v.join(":"))}n&&(c="."+c.join("."));return c}function Qz(d,c,h){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Yf.Path(h).parts();var f=d[c];for(c=0;;){if(1E3<c++)throw"stop";var k=h.shift();if(!k)break;if(!f.props||!f.props[k])throw Error("Property "+
k+" not found for ref "+JSON.stringify(f));f=f.props[k].value;if(!f)throw Error("Property "+k+" has no value");for(;Array.isArray(f);)f=f[h.shift()];if(!f||!f.__ref__)return f;f=d[f.id]}return f}function hr(d,c,h,f){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Yf.Path(h).parts();d=d[c];c=h.shift();if(!d.props||!d.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(d));var k=(d.props[c]||{}).value;if(!k)throw Error("Property "+c+" has no value");if(h.length){var n=
Yf.Path(h).get(k);Yf.Path(h).set(k,f(d,c,n))}else d.props[c].value=f(d,c,k)}function Rm(d,c){var h=Yf.arr.withoutAll(Object.keys(c),d),f=h.filter(function(n){if("AttributeConnection"===Yf.classNameOfId(c,n))return c[n].props.garbageCollect.value}),k=Yf.referenceGraph(Yf.obj.dissoc(Object.assign({},c),f));d.forEach(function(n){n=Yf.graph.subgraphReachableBy(k,n);for(var b=h.length;b--;)h[b]in n&&h.splice(b,1)});h.forEach(function(n){return delete c[n]});return h}function cp(d){var c={},h;for(h in d){c.$jscomp$loop$prop$id$816$2367=
h;if("AttributeConnection"===Yf.classNameOfId(d,c.$jscomp$loop$prop$id$816$2367)){var f=d[c.$jscomp$loop$prop$id$816$2367];if(!d[Yf.Path("props.targetObj.value.id").get(f)]){if(f=d[Yf.Path("props.sourceObj.value.id").get(f)])f.props.attributeConnections.value=f.props.attributeConnections.value.filter(function(k){return function(n){return n.id!=k.$jscomp$loop$prop$id$816$2367}}(c));delete d[c.$jscomp$loop$prop$id$816$2367]}}c={$jscomp$loop$prop$id$816$2367:c.$jscomp$loop$prop$id$816$2367}}}function pt(d,
c){c=void 0===c?Yf.defaultExprSerializer:c;d.snapshot&&(d=d.snapshot);for(var h=[],f=0,k=Object.keys(d);f<k.length;f++){var n=d[k[f]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&h.push.apply(h,$jscomp.arrayFromIterable(n));else{var b=Yf.ClassHelper.sourceModulesInObjRef(n);b&&b.length&&h.push.apply(h,$jscomp.arrayFromIterable(b.map(function(m){return(m.package&&m.package.name||"")+"/"+m.pathInPackage})));if(n.props)for(var e in n.props)b=n.props[e].value,"string"===typeof b&&(b=c.requiredModulesOf__expr__(b))&&
h.push.apply(h,$jscomp.arrayFromIterable(b))}}return h=Yf.arr.uniq(h)}function cF(){throw Error("setTimeout has not been defined");}function vC(){throw Error("clearTimeout has not been defined");}function OI(d){if(Ix===setTimeout)return setTimeout(d,0);if((Ix===cF||!Ix)&&setTimeout)return Ix=setTimeout,setTimeout(d,0);try{return Ix(d,0)}catch(c){try{return Ix.call(null,d,0)}catch(h){return Ix.call(this||wC,d,0)}}}function IP(){xC&&Rz&&(xC=!1,Rz.length?ow=Rz.concat(ow):PI=-1,ow.length&&QI())}function QI(){if(!xC){var d=
OI(IP);xC=!0;for(var c=ow.length;c;){Rz=ow;for(ow=[];++PI<c;)Rz&&Rz[PI].run();PI=-1;c=ow.length}Rz=null;xC=!1;(function(h){if(Jx===clearTimeout)return clearTimeout(h);if((Jx===vC||!Jx)&&clearTimeout)return Jx=clearTimeout,clearTimeout(h);try{Jx(h)}catch(f){try{return Jx.call(null,h)}catch(k){return Jx.call(this||wC,h)}}})(d)}}function RI(d,c){(this||wC).fun=d;(this||wC).array=c}function qt(){}function Sz(){if(KX)return LX;KX=!0;return LX={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||
9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function yC(){if(MX)return NX;MX=!0;var d=uj;return NX="object"===typeof d&&d.env&&d.env.NODE_DEBUG&&/\bsemver\b/i.test(d.env.NODE_DEBUG)?function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function Dh(){if(OX)return Qu;OX=!0;var d=Sz().MAX_SAFE_COMPONENT_LENGTH,c=yC();Qu=Qu={};var h=Qu.re=[],f=Qu.src=[],k=Qu.t={},n=0,b=function(e,m,a){var g=
n++;c(g,m);k[e]=g;f[g]=m;h[g]=new RegExp(m,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+f[k.NUMERICIDENTIFIER]+")\\.("+(f[k.NUMERICIDENTIFIER]+")\\.(")+(f[k.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+f[k.NUMERICIDENTIFIERLOOSE]+")\\.("+(f[k.NUMERICIDENTIFIERLOOSE]+")\\.(")+(f[k.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+f[k.NUMERICIDENTIFIER]+"|"+f[k.NONNUMERICIDENTIFIER]+
")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+f[k.NUMERICIDENTIFIERLOOSE]+"|"+f[k.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+f[k.PRERELEASEIDENTIFIER]+"(?:\\."+f[k.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+f[k.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+f[k.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+f[k.BUILDIDENTIFIER]+"(?:\\."+f[k.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+f[k.MAINVERSION]+f[k.PRERELEASE]+"?"+f[k.BUILD]+"?");b("FULL",
"^"+f[k.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+f[k.MAINVERSIONLOOSE]+f[k.PRERELEASELOOSE]+"?"+f[k.BUILD]+"?");b("LOOSE","^"+f[k.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",f[k.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",f[k.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+f[k.XRANGEIDENTIFIER]+")(?:\\.("+(f[k.XRANGEIDENTIFIER]+")(?:\\.(")+(f[k.XRANGEIDENTIFIER]+")(?:")+(f[k.PRERELEASE]+")?"+f[k.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+f[k.XRANGEIDENTIFIERLOOSE]+
")(?:\\.("+(f[k.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(f[k.XRANGEIDENTIFIERLOOSE]+")(?:")+(f[k.PRERELEASELOOSE]+")?"+f[k.BUILD]+"?)?)?"));b("XRANGE","^"+f[k.GTLT]+"\\s*"+f[k.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+f[k.GTLT]+"\\s*"+f[k.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+d+"})(?:\\.(\\d{1,"+(d+"}))?(?:\\.(\\d{1,")+(d+"}))?(?:$|[^\\d])"));b("COERCERTL",f[k.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+f[k.LONETILDE]+"\\s+",!0);Qu.tildeTrimReplace="$1~";b("TILDE","^"+f[k.LONETILDE]+
f[k.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+f[k.LONETILDE]+f[k.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+f[k.LONECARET]+"\\s+",!0);Qu.caretTrimReplace="$1^";b("CARET","^"+f[k.LONECARET]+f[k.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+f[k.LONECARET]+f[k.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+f[k.GTLT]+"\\s*("+f[k.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+f[k.GTLT]+"\\s*("+f[k.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+f[k.GTLT]+"\\s*("+f[k.LOOSEPLAIN]+"|"+f[k.XRANGEPLAIN]+
")",!0);Qu.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+f[k.XRANGEPLAIN]+")\\s+-\\s+("+(f[k.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+f[k.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(f[k.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Qu}function zC(){if(PX)return QX;PX=!0;var d=/^[0-9]+$/,c=function(h,f){var k=d.test(h),n=d.test(f);k&&n&&(h=+h,f=+f);return h===f?0:k&&!n?-1:n&&!k?1:h<f?-1:1};return QX=
{compareIdentifiers:c,rcompareIdentifiers:function(h,f){return c(f,h)}}}function Qn(){if(RX)return SX;RX=!0;var d=yC(),c=Sz(),h=c.MAX_LENGTH,f=c.MAX_SAFE_INTEGER;c=Dh();var k=c.re,n=c.t,b=zC().compareIdentifiers,e=function(m,a){a&&"object"===typeof a||(a={loose:!!a,includePrerelease:!1});if(m instanceof e){if(m.loose===!!a.loose&&m.includePrerelease===!!a.includePrerelease)return m;m=m.version}else if("string"!==typeof m)throw new TypeError("Invalid Version: "+m);if(m.length>h)throw new TypeError("version is longer than "+
h+" characters");d("SemVer",m,a);(this||Wf).options=a;(this||Wf).loose=!!a.loose;(this||Wf).includePrerelease=!!a.includePrerelease;a=m.trim().match(a.loose?k[n.LOOSE]:k[n.FULL]);if(!a)throw new TypeError("Invalid Version: "+m);(this||Wf).raw=m;(this||Wf).major=+a[1];(this||Wf).minor=+a[2];(this||Wf).patch=+a[3];if((this||Wf).major>f||0>(this||Wf).major)throw new TypeError("Invalid major version");if((this||Wf).minor>f||0>(this||Wf).minor)throw new TypeError("Invalid minor version");if((this||Wf).patch>
f||0>(this||Wf).patch)throw new TypeError("Invalid patch version");(this||Wf).prerelease=a[4]?a[4].split(".").map(function(g){if(/^[0-9]+$/.test(g)){var l=+g;if(0<=l&&l<f)return l}return g}):[];(this||Wf).build=a[5]?a[5].split("."):[];this.format()};e.prototype.format=function(){(this||Wf).version=(this||Wf).major+"."+(this||Wf).minor+"."+(this||Wf).patch;(this||Wf).prerelease.length&&((this||Wf).version+="-"+(this||Wf).prerelease.join("."));return(this||Wf).version};e.prototype.toString=function(){return(this||
Wf).version};e.prototype.compare=function(m){d("SemVer.compare",(this||Wf).version,(this||Wf).options,m);if(!(m instanceof e)){if("string"===typeof m&&m===(this||Wf).version)return 0;m=new e(m,(this||Wf).options)}return m.version===(this||Wf).version?0:this.compareMain(m)||this.comparePre(m)};e.prototype.compareMain=function(m){m instanceof e||(m=new e(m,(this||Wf).options));return b((this||Wf).major,m.major)||b((this||Wf).minor,m.minor)||b((this||Wf).patch,m.patch)};e.prototype.comparePre=function(m){m instanceof
e||(m=new e(m,(this||Wf).options));if((this||Wf).prerelease.length&&!m.prerelease.length)return-1;if(!(this||Wf).prerelease.length&&m.prerelease.length)return 1;if(!(this||Wf).prerelease.length&&!m.prerelease.length)return 0;var a=0;do{var g=(this||Wf).prerelease[a],l=m.prerelease[a];d("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.compareBuild=function(m){m instanceof e||(m=new e(m,(this||
Wf).options));var a=0;do{var g=(this||Wf).build[a],l=m.build[a];d("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.inc=function(m,a){switch(m){case "premajor":(this||Wf).prerelease.length=0;(this||Wf).patch=0;(this||Wf).minor=0;(this||Wf).major++;this.inc("pre",a);break;case "preminor":(this||Wf).prerelease.length=0;(this||Wf).patch=0;(this||Wf).minor++;this.inc("pre",a);break;case "prepatch":(this||
Wf).prerelease.length=0;this.inc("patch",a);this.inc("pre",a);break;case "prerelease":0===(this||Wf).prerelease.length&&this.inc("patch",a);this.inc("pre",a);break;case "major":0===(this||Wf).minor&&0===(this||Wf).patch&&0!==(this||Wf).prerelease.length||(this||Wf).major++;(this||Wf).minor=0;(this||Wf).patch=0;(this||Wf).prerelease=[];break;case "minor":0===(this||Wf).patch&&0!==(this||Wf).prerelease.length||(this||Wf).minor++;(this||Wf).patch=0;(this||Wf).prerelease=[];break;case "patch":0===(this||
Wf).prerelease.length&&(this||Wf).patch++;(this||Wf).prerelease=[];break;case "pre":if(0===(this||Wf).prerelease.length)(this||Wf).prerelease=[0];else{for(m=(this||Wf).prerelease.length;0<=--m;)"number"===typeof(this||Wf).prerelease[m]&&((this||Wf).prerelease[m]++,m=-2);-1===m&&(this||Wf).prerelease.push(0)}a&&((this||Wf).prerelease[0]===a?isNaN((this||Wf).prerelease[1])&&((this||Wf).prerelease=[a,0]):(this||Wf).prerelease=[a,0]);break;default:throw Error("invalid increment argument: "+m);}this.format();
(this||Wf).raw=(this||Wf).version;return this||Wf};return SX=e}function sq(){if(TX)return UX;TX=!0;var d=Sz().MAX_LENGTH,c=Dh(),h=c.re,f=c.t,k=Qn();return UX=function(n,b){b&&"object"===typeof b||(b={loose:!!b,includePrerelease:!1});if(n instanceof k)return n;if("string"!==typeof n||n.length>d||!(b.loose?h[f.LOOSE]:h[f.FULL]).test(n))return null;try{return new k(n,b)}catch(e){return null}}}function SI(){if(VX)return WX;VX=!0;var d=sq();return WX=function(c,h){return(c=d(c,h))?c.version:null}}function Tz(){if(XX)return YX;
XX=!0;var d=Qn();return YX=function(c,h,f,k){"string"===typeof f&&(k=f,f=void 0);try{return(new d(c,f)).inc(h,k).version}catch(n){return null}}}function xm(){if(ZX)return $X;ZX=!0;var d=Qn();return $X=function(c,h,f){return(new d(c,f)).compare(new d(h,f))}}function Kx(){if(aY)return bY;aY=!0;var d=xm();return bY=function(c,h,f){return 0<d(c,h,f)}}function dF(){if(cY)return dY;cY=!0;var d=xm();return dY=function(c,h,f){return 0<=d(c,h,f)}}function eF(){if(eY)return fY;eY=!0;var d=xm();return fY=function(c,
h,f){return 0===d(c,h,f)}}function Uz(){if(gY)return hY;gY=!0;var d=xm();return hY=function(c,h,f){return 0>d(c,h,f)}}function fF(){if(iY)return jY;iY=!0;var d=xm();return jY=function(c,h,f){return 0!==d(c,h,f)}}function gF(){if(kY)return lY;kY=!0;var d=xm();return lY=function(c,h,f){return 0>=d(c,h,f)}}function TI(){if(mY)return nY;mY=!0;var d=eF(),c=fF(),h=Kx(),f=dF(),k=Uz(),n=gF();return nY=function(b,e,m,a){switch(e){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=
m.version),b===m;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b!==m;case "":case "=":case "==":return d(b,m,a);case "!=":return c(b,m,a);case ">":return h(b,m,a);case ">=":return f(b,m,a);case "<":return k(b,m,a);case "<=":return n(b,m,a);default:throw new TypeError("Invalid operator: "+e);}}}function UI(){if(oY)return pY;oY=!0;var d=Qn();return pY=function(c,h){return(new d(c,h)).major}}function JP(){if(qY)return rY;qY=!0;var d=Qn(),c=sq(),h=Dh(),f=h.re,
k=h.t;return rY=function(n,b){if(n instanceof d)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var e=null;if(b.rtl){for(var m;(m=f[k.COERCERTL].exec(n))&&(!e||e.index+e[0].length!==n.length);)e&&m.index+m[0].length===e.index+e[0].length||(e=m),f[k.COERCERTL].lastIndex=m.index+m[1].length+m[2].length;f[k.COERCERTL].lastIndex=-1}else e=n.match(f[k.COERCE]);return null===e?null:c(e[2]+"."+(e[3]||"0")+"."+(e[4]||"0"),b)}}function di(){if(sY)return KP;sY=!0;var d=
function(I,M){var N=this;M&&"object"===typeof M||(M={loose:!!M,includePrerelease:!1});if(I instanceof d)return I.loose===!!M.loose&&I.includePrerelease===!!M.includePrerelease?I:new d(I.raw,M);if(I instanceof c)return(this||Dl).raw=I.value,(this||Dl).set=[[I]],this.format(),this||Dl;(this||Dl).options=M;(this||Dl).loose=!!M.loose;(this||Dl).includePrerelease=!!M.includePrerelease;(this||Dl).raw=I;(this||Dl).set=I.split(/\s*\|\|\s*/).map(function(X){return N.parseRange(X.trim())}).filter(function(X){return X.length});
if(!(this||Dl).set.length)throw new TypeError("Invalid SemVer Range: "+I);this.format()};d.prototype.format=function(){(this||Dl).range=(this||Dl).set.map(function(I){return I.join(" ").trim()}).join("||").trim();return(this||Dl).range};d.prototype.toString=function(){return(this||Dl).range};d.prototype.parseRange=function(I){var M=this,N=(this||Dl).options.loose;I=I.trim();I=I.replace(N?n[b.HYPHENRANGELOOSE]:n[b.HYPHENRANGE],H((this||Dl).options.includePrerelease));h("hyphen replace",I);I=I.replace(n[b.COMPARATORTRIM],
e);h("comparator trim",I,n[b.COMPARATORTRIM]);I=I.replace(n[b.TILDETRIM],m);I=I.replace(n[b.CARETTRIM],a);I=I.split(/\s+/).join(" ");var X=N?n[b.COMPARATORLOOSE]:n[b.COMPARATOR];return I.split(" ").map(function(W){var ea=W;W=(M||Dl).options;h("comp",ea,W);ea=y(ea,W);h("caret",ea);ea=r(ea,W);h("tildes",ea);ea=E(ea,W);h("xrange",ea);h("replaceStars",ea,W);ea=ea.trim().replace(n[b.STAR],"");h("stars",ea);return ea}).join(" ").split(/\s+/).map(function(W){var ea=(M||Dl).options;h("replaceGTE0",W,ea);
return W.trim().replace(n[ea.includePrerelease?b.GTE0PRE:b.GTE0],"")}).filter((this||Dl).options.loose?function(W){return!!W.match(X)}:function(){return!0}).map(function(W){return new c(W,(M||Dl).options)})};d.prototype.intersects=function(I,M){if(!(I instanceof d))throw new TypeError("a Range is required");return(this||Dl).set.some(function(N){return g(N,M)&&I.set.some(function(X){return g(X,M)&&N.every(function(W){return X.every(function(ea){return W.intersects(ea,M)})})})})};d.prototype.test=function(I){if(!I)return!1;
if("string"===typeof I)try{I=new f(I,(this||Dl).options)}catch(Aa){return!1}for(var M=0;M<(this||Dl).set.length;M++){a:{var N=(this||Dl).set[M];for(var X=I,W=(this||Dl).options,ea=0;ea<N.length;ea++)if(!N[ea].test(X)){N=!1;break a}if(X.prerelease.length&&!W.includePrerelease){for(W=0;W<N.length;W++)if(h(N[W].semver),N[W].semver!==c.ANY&&0<N[W].semver.prerelease.length&&(ea=N[W].semver,ea.major===X.major&&ea.minor===X.minor&&ea.patch===X.patch)){N=!0;break a}N=!1}else N=!0}if(N)return!0}return!1};
KP=d;var c=Co(),h=yC(),f=Qn(),k=Dh(),n=k.re,b=k.t,e=k.comparatorTrimReplace,m=k.tildeTrimReplace,a=k.caretTrimReplace,g=function(I,M){var N=!0;I=I.slice();for(var X=I.pop();N&&I.length;)N=I.every(function(W){return X.intersects(W,M)}),X=I.pop();return N},l=function(I){return!I||"x"===I.toLowerCase()||"*"===I},r=function(I,M){return I.trim().split(/\s+/).map(function(N){return v(N,M)}).join(" ")},v=function(I,M){return I.replace(M.loose?n[b.TILDELOOSE]:n[b.TILDE],function(N,X,W,ea,Aa){h("tilde",I,
N,X,W,ea,Aa);l(X)?N="":l(W)?N=">="+X+".0.0 <"+(+X+1)+".0.0-0":l(ea)?N=">="+X+"."+W+".0 <"+X+"."+(+W+1)+".0-0":Aa?(h("replaceTilde pr",Aa),N=">="+X+"."+W+"."+ea+"-"+Aa+" <"+X+"."+(+W+1)+".0-0"):N=">="+X+"."+W+"."+ea+" <"+X+"."+(+W+1)+".0-0";h("tilde return",N);return N})},y=function(I,M){return I.trim().split(/\s+/).map(function(N){return A(N,M)}).join(" ")},A=function(I,M){h("caret",I,M);var N=M.includePrerelease?"-0":"";return I.replace(M.loose?n[b.CARETLOOSE]:n[b.CARET],function(X,W,ea,Aa,Ka){h("caret",
I,X,W,ea,Aa,Ka);l(W)?X="":l(ea)?X=">="+W+".0.0"+N+" <"+(+W+1)+".0.0-0":l(Aa)?X="0"===W?">="+W+"."+ea+".0"+N+" <"+W+"."+(+ea+1)+".0-0":">="+W+"."+ea+".0"+N+" <"+(+W+1)+".0.0-0":Ka?(h("replaceCaret pr",Ka),X="0"===W?"0"===ea?">="+W+"."+ea+"."+Aa+"-"+Ka+" <"+W+"."+ea+"."+(+Aa+1)+"-0":">="+W+"."+ea+"."+Aa+"-"+Ka+" <"+W+"."+(+ea+1)+".0-0":">="+W+"."+ea+"."+Aa+"-"+Ka+" <"+(+W+1)+".0.0-0"):(h("no pr"),X="0"===W?"0"===ea?">="+W+"."+ea+"."+Aa+N+" <"+W+"."+ea+"."+(+Aa+1)+"-0":">="+W+"."+ea+"."+Aa+N+" <"+W+
"."+(+ea+1)+".0-0":">="+W+"."+ea+"."+Aa+" <"+(+W+1)+".0.0-0");h("caret return",X);return X})},E=function(I,M){h("replaceXRanges",I,M);return I.split(/\s+/).map(function(N){return F(N,M)}).join(" ")},F=function(I,M){I=I.trim();return I.replace(M.loose?n[b.XRANGELOOSE]:n[b.XRANGE],function(N,X,W,ea,Aa,Ka){h("xRange",I,N,X,W,ea,Aa,Ka);var K=l(W),aa=K||l(ea);Aa=aa||l(Aa);"="===X&&Aa&&(X="");Ka=M.includePrerelease?"-0":"";K?N=">"===X||"<"===X?"<0.0.0-0":"*":X&&Aa?(aa&&(ea=0),Aa=0,">"===X?(X=">=",aa?(W=
+W+1,ea=0):ea=+ea+1,Aa=0):"<="===X&&(X="<",aa?W=+W+1:ea=+ea+1),"<"===X&&(Ka="-0"),N=X+W+"."+ea+"."+Aa+Ka):aa?N=">="+W+".0.0"+Ka+" <"+(+W+1)+".0.0-0":Aa&&(N=">="+W+"."+ea+".0"+Ka+" <"+W+"."+(+ea+1)+".0-0");h("xRange return",N);return N})},H=function(I){return function(M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa){N=l(X)?"":l(W)?">="+X+".0.0"+(I?"-0":""):l(ea)?">="+X+"."+W+".0"+(I?"-0":""):Aa?">="+N:">="+N+(I?"-0":"");K=l(aa)?"":l(T)?"<"+(+aa+1)+".0.0-0":l(U)?"<"+aa+"."+(+T+1)+".0-0":pa?"<="+aa+"."+T+"."+U+"-"+
pa:I?"<"+aa+"."+T+"."+(+U+1)+"-0":"<="+K;return(N+" "+K).trim()}};return KP}function Co(){if(tY)return LP;tY=!0;var d=Symbol("SemVer ANY"),c=function(a,g){g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(a instanceof c){if(a.loose===!!g.loose)return a;a=a.value}b("comparator",a,g);(this||lj).options=g;(this||lj).loose=!!g.loose;this.parse(a);(this||lj).value=(this||lj).semver===d?"":(this||lj).operator+(this||lj).semver.version;b("comp",this||lj)};c.prototype.parse=function(a){var g=
a.match((this||lj).options.loose?f[k.COMPARATORLOOSE]:f[k.COMPARATOR]);if(!g)throw new TypeError("Invalid comparator: "+a);(this||lj).operator=void 0!==g[1]?g[1]:"";"="===(this||lj).operator&&((this||lj).operator="");(this||lj).semver=g[2]?new e(g[2],(this||lj).options.loose):d};c.prototype.toString=function(){return(this||lj).value};c.prototype.test=function(a){b("Comparator.test",a,(this||lj).options.loose);if((this||lj).semver===d||a===d)return!0;if("string"===typeof a)try{a=new e(a,(this||lj).options)}catch(g){return!1}return n(a,
(this||lj).operator,(this||lj).semver,(this||lj).options)};c.prototype.intersects=function(a,g){if(!(a instanceof c))throw new TypeError("a Comparator is required");g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(""===(this||lj).operator)return""===(this||lj).value?!0:(new m(a.value,g)).test((this||lj).value);if(""===a.operator)return""===a.value?!0:(new m((this||lj).value,g)).test(a.semver);var l=(">="===(this||lj).operator||">"===(this||lj).operator)&&(">="===a.operator||">"===a.operator),
r=("<="===(this||lj).operator||"<"===(this||lj).operator)&&("<="===a.operator||"<"===a.operator),v=(this||lj).semver.version===a.semver.version,y=(">="===(this||lj).operator||"<="===(this||lj).operator)&&(">="===a.operator||"<="===a.operator),A=n((this||lj).semver,"<",a.semver,g)&&(">="===(this||lj).operator||">"===(this||lj).operator)&&("<="===a.operator||"<"===a.operator);a=n((this||lj).semver,">",a.semver,g)&&("<="===(this||lj).operator||"<"===(this||lj).operator)&&(">="===a.operator||">"===a.operator);
return l||r||v&&y||A||a};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return d}}});LP=c;var h=Dh(),f=h.re,k=h.t,n=TI(),b=yC(),e=Qn(),m=di();return LP}function Rn(){if(uY)return vY;uY=!0;var d=di();return vY=function(c,h,f){try{h=new d(h,f)}catch(k){return!1}return h.test(c)}}function AC(){if(wY)return xY;wY=!0;var d=di();return xY=function(c,h){try{return(new d(c,h)).range||"*"}catch(f){return null}}}function Wb(){if(yY)return zY;yY=!0;var d=sq();return zY=
function(c,h){return(c=d(c.trim().replace(/^[=v]+/,""),h))?c.version:null}}function Gp(){if(AY)return BY;AY=!0;var d=sq(),c=eF();return BY=function(h,f){if(c(h,f))return null;h=d(h);f=d(f);var k=h.prerelease.length||f.prerelease.length,n=k?"pre":"",b;for(b in h)if(("major"===b||"minor"===b||"patch"===b)&&h[b]!==f[b])return n+b;return k?"prerelease":""}}function Lx(){if(CY)return DY;CY=!0;var d=Qn();return DY=function(c,h){return(new d(c,h)).minor}}function hF(){if(EY)return FY;EY=!0;var d=Qn();return FY=
function(c,h){return(new d(c,h)).patch}}function tq(){if(GY)return HY;GY=!0;var d=sq();return HY=function(c,h){return(c=d(c,h))&&c.prerelease.length?c.prerelease:null}}function VI(){if(IY)return JY;IY=!0;var d=xm();return JY=function(c,h,f){return d(h,c,f)}}function BC(){if(KY)return LY;KY=!0;var d=xm();return LY=function(c,h){return d(c,h,!0)}}function iF(){if(MY)return NY;MY=!0;var d=Qn();return NY=function(c,h,f){c=new d(c,f);h=new d(h,f);return c.compare(h)||c.compareBuild(h)}}function WI(){if(OY)return PY;
OY=!0;var d=iF();return PY=function(c,h){return c.sort(function(f,k){return d(f,k,h)})}}function Mx(){if(QY)return RY;QY=!0;var d=iF();return RY=function(c,h){return c.sort(function(f,k){return d(k,f,h)})}}function Vz(){if(SY)return TY;SY=!0;var d=di();return TY=function(c,h){return(new d(c,h)).set.map(function(f){return f.map(function(k){return k.value}).join(" ").trim().split(" ")})}}function CC(){if(UY)return VY;UY=!0;var d=Qn(),c=di();return VY=function(h,f,k){var n=null,b=null,e=null;try{e=new c(f,
k)}catch(m){return null}h.forEach(function(m){!e.test(m)||n&&-1!==b.compare(m)||(n=m,b=new d(n,k))});return n}}function XI(){if(WY)return XY;WY=!0;var d=Qn(),c=di();return XY=function(h,f,k){var n=null,b=null,e=null;try{e=new c(f,k)}catch(m){return null}h.forEach(function(m){!e.test(m)||n&&1!==b.compare(m)||(n=m,b=new d(n,k))});return n}}function ll(){if(YY)return ZY;YY=!0;var d=Qn(),c=di(),h=Kx();return ZY=function(f,k){f=new c(f,k);var n=new d("0.0.0");if(f.test(n))return n;n=new d("0.0.0-0");if(f.test(n))return n;
n=null;for(k=0;k<f.set.length;++k)f.set[k].forEach(function(b){var e=new d(b.semver.version);switch(b.operator){case ">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!n||h(n,e))n=e;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}});return n&&f.test(n)?n:null}}function is(){if($Y)return aZ;$Y=!0;var d=Qn(),c=Co(),h=c.ANY,f=di(),k=Rn(),n=Kx(),b=Uz(),e=gF(),m=dF();return aZ=function(a,g,l,r){a=new d(a,r);g=new f(g,
r);switch(l){case ">":var v=n;l=e;var y=b;var A=">";var E=">=";break;case "<":v=b;l=m;y=n;A="<";E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(k(a,g,r))return!1;for(var F={},H=0;H<g.set.length;F={$jscomp$loop$prop$high$2369:F.$jscomp$loop$prop$high$2369,$jscomp$loop$prop$low$2370:F.$jscomp$loop$prop$low$2370},++H){var I=g.set[H];F.$jscomp$loop$prop$high$2369=null;F.$jscomp$loop$prop$low$2370=null;I.forEach(function(M){return function(N){N.semver===h&&(N=new c(">=0.0.0"));
M.$jscomp$loop$prop$high$2369=M.$jscomp$loop$prop$high$2369||N;M.$jscomp$loop$prop$low$2370=M.$jscomp$loop$prop$low$2370||N;v(N.semver,M.$jscomp$loop$prop$high$2369.semver,r)?M.$jscomp$loop$prop$high$2369=N:y(N.semver,M.$jscomp$loop$prop$low$2370.semver,r)&&(M.$jscomp$loop$prop$low$2370=N)}}(F));if(F.$jscomp$loop$prop$high$2369.operator===A||F.$jscomp$loop$prop$high$2369.operator===E||(!F.$jscomp$loop$prop$low$2370.operator||F.$jscomp$loop$prop$low$2370.operator===A)&&l(a,F.$jscomp$loop$prop$low$2370.semver)||
F.$jscomp$loop$prop$low$2370.operator===E&&y(a,F.$jscomp$loop$prop$low$2370.semver))return!1}return!0}}function Do(){if(bZ)return cZ;bZ=!0;var d=is();return cZ=function(c,h,f){return d(c,h,">",f)}}function MP(){if(dZ)return eZ;dZ=!0;var d=is();return eZ=function(c,h,f){return d(c,h,"<",f)}}function mi(){if(fZ)return gZ;fZ=!0;var d=di();return gZ=function(c,h,f){c=new d(c,f);h=new d(h,f);return c.intersects(h)}}function jF(){if(hZ)return iZ;hZ=!0;var d=Rn(),c=xm();return iZ=function(h,f,k){var n=[],
b=null,e=null;h=h.sort(function(g,l){return c(g,l,k)});for(var m=$jscomp.makeIterator(h),a=m.next();!a.done;a=m.next())a=a.value,d(a,f,k)?(e=a,b||(b=a)):(e&&n.push([b,e]),b=e=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(e=n.next();!e.done;e=n.next())m=$jscomp.makeIterator(e.value),e=m.next().value,m=m.next().value,e===m?b.push(e):m||e!==h[0]?m?e===h[0]?b.push("<="+m):b.push(e+" - "+m):b.push(">="+e):b.push("*");h=b.join(" || ");return h.length<("string"===typeof f.raw?f.raw:String(f)).length?
h:f}}function NP(){if(jZ)return kZ;jZ=!0;var d=di(),c=Co().ANY,h=Rn(),f=xm(),k=function(e,m,a){if(1===e.length&&e[0].semver===c)return 1===m.length&&m[0].semver===c;var g=new Set,l,r,v=$jscomp.makeIterator(e);for(e=v.next();!e.done;e=v.next())e=e.value,">"===e.operator||">="===e.operator?l=n(l,e,a):"<"===e.operator||"<="===e.operator?r=b(r,e,a):g.add(e.semver);if(1<g.size)return null;if(l&&r){var y=f(l.semver,r.semver,a);if(0<y||0===y&&(">="!==l.operator||"<="!==r.operator))return null}for(e=$jscomp.makeIterator(g).next();!e.done;){y=
e.value;if(l&&!h(y,String(l),a)||r&&!h(y,String(r),a))return null;l=$jscomp.makeIterator(m);for(e=l.next();!e.done;e=l.next())if(!h(y,String(e.value),a))return!1;return!0}m=$jscomp.makeIterator(m);for(e=m.next();!e.done;e=m.next()){e=e.value;var A=A||">"===e.operator||">="===e.operator;var E=E||"<"===e.operator||"<="===e.operator;if(l)if(">"===e.operator||">="===e.operator){if(g=n(l,e,a),g===e)return!1}else if(">="===l.operator&&!h(l.semver,String(e),a))return!1;if(r)if("<"===e.operator||"<="===e.operator){if(g=
b(r,e,a),g===e)return!1}else if("<="===r.operator&&!h(r.semver,String(e),a))return!1;if(!e.operator&&(r||l)&&0!==y)return!1}return l&&E&&!r&&0!==y||r&&A&&!l&&0!==y?!1:!0},n=function(e,m,a){if(!e)return m;a=f(e.semver,m.semver,a);return 0<a?e:0>a?m:">"===m.operator&&">="===e.operator?m:e},b=function(e,m,a){if(!e)return m;a=f(e.semver,m.semver,a);return 0>a?e:0<a?m:"<"===m.operator&&"<="===e.operator?m:e};return kZ=function(e,m,a){e=new d(e,a);m=new d(m,a);var g=!1;e=$jscomp.makeIterator(e.set);var l=
e.next();a:for(;!l.done;l=e.next()){l=l.value;for(var r=$jscomp.makeIterator(m.set),v=r.next();!v.done;v=r.next())if(v=k(l,v.value,a),g=g||null!==v,v)continue a;if(g)return!1}return!0}}function Wz(d){d=Object.assign({plugins:hg.allPlugins,reinitializeIds:!1,skipMigrations:!0},d);if(d.reinitializeIds&&"function"!==typeof d.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return d}function js(d,c){c=hg.normalizeOptions(c);var h=c.objPool||new hg.ObjectPool(c);
c=">="+hg.serializerVersion.replace(hg.majorAndMinorVersionRe,"");d=h.snapshotObject(d);hg.removeUnreachableObjects([d.id],d.snapshot);hg.clearDanglingConnections(d.snapshot);d.requiredVersion=c;return d}function pw(d,c){c=hg.normalizeOptions(c);var h=d.requiredVersion;h&&!hg.semver.satisfies(hg.serializerVersion,h)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(h+" but serializer has incompatible version ")+(hg.serializerVersion+". Deserialization might fail...!"));
return(c.objPool||new hg.ObjectPool(c)).resolveFromSnapshotAndId(d)}function Eo(d,c,h){function f(){var e=hg.deserialize(d,h);hg.runMigrations(n,"objectConverter",d,k);return e}h=hg.normalizeOptions(h);c.length&&(h.skipMigrations=!1);var k=h.objPool||(h.objPool=new hg.ObjectPool(h));c=hg.normalizeMigrations(c);var n=c.after,b;hg.runMigrations(c.before,"snapshotConverter",d,k);"function"===typeof h.onDeserializationStart&&(b=h.onDeserializationStart(d,h));return b instanceof Promise?b.then(f):f()}
function ei(d,c){return hg.deserialize(hg.serialize(d,c),c)}function OP(d){return"[object Array]"===jba.call(d)}function Fo(d,c,h){(this||PP).type=Number(d);(this||PP).vNode=c;(this||PP).patch=h}function rt(d,c){var h=d.vnode;h||(h=d.vnode=d.render(c));if(!(kba(h)||lba(h)||mba(h)))throw Error("thunk did not return a valid node");return h}function YI(d,c){var h;for(h in d){if(!(h in c)){var f=f||{};f[h]=void 0}var k=d[h],n=c[h];if(k!==n)if(lZ(k)&&lZ(n))if(Nx(n)!==Nx(k))f=f||{},f[h]=n;else if(nba(n))f=
f||{},f[h]=n;else{if(k=YI(k,n))f=f||{},f[h]=k}else f=f||{},f[h]=n}for(var b in c)b in d||(f=f||{},f[b]=c[b]);return f}function Nx(d){if(Object.getPrototypeOf)return Object.getPrototypeOf(d);if(d.__proto__)return d.__proto__;if(d.constructor)return d.constructor.prototype}function Ox(d,c){var h={a:d};Hp(d,c,h,0);return h}function Hp(d,c,h,f){if(d!==c){var k=h[f],n=!1;if(ZI(d)||ZI(c))Px(d,c,h,f);else if(null==c)$I(d)||(kF(d,h,f),ml(d,h,f),k=h[f]),k=vg(k,new El(El.REMOVE,d,c));else if(Xz(c))if(Xz(d))if(d.tagName===
c.tagName&&d.namespace===c.namespace&&d.key===c.key){var b=oba(d.properties,c.properties);b&&(k=vg(k,new El(El.PROPS,d,b)));b=f;var e=d.children;c=c.children;var m=lF(c),a=m.keys,g=m.free;if(g.length===c.length)c={children:c,moves:null};else{m=lF(e);var l=m.keys;if(m.free.length===e.length)c={children:c,moves:null};else{m=[];for(var r=0,v=g.length,y=0,A=0;A<e.length;A++){var E=e[A];E.key?a.hasOwnProperty(E.key)?(E=a[E.key],m.push(c[E])):(y++,m.push(null)):r<v?(E=g[r++],m.push(c[E])):(y++,m.push(null))}g=
r>=g.length?c.length:g[r];for(r=0;r<c.length;r++)v=c[r],v.key?l.hasOwnProperty(v.key)||m.push(v):r>=g&&m.push(v);l=m.slice();g=0;r=[];v=[];for(E=0;E<c.length;){var F=c[E];for(A=l[g];null===A&&l.length;)r.push(DC(l,g,null)),A=l[g];A&&A.key===F.key?(g++,E++):F.key?(A&&A.key?a[A.key]!==E+1?(r.push(DC(l,g,A.key)),(A=l[g])&&A.key===F.key?g++:v.push({key:F.key,to:E})):v.push({key:F.key,to:E}):v.push({key:F.key,to:E}),E++):A&&A.key&&r.push(DC(l,g,A.key))}for(;g<l.length;)A=l[g],r.push(DC(l,g,A&&A.key));
c=r.length!==y||v.length?{children:m,moves:{removes:r,inserts:v}}:{children:m,moves:null}}}a=c.children;m=e.length;y=a.length;m=m>y?m:y;for(y=0;y<m;y++)l=e[y],g=a[y],b+=1,l?Hp(l,g,h,b):g&&(k=vg(k,new El(El.INSERT,null,g))),Xz(l)&&l.count&&(b+=l.count);c.moves&&(k=vg(k,new El(El.ORDER,d,c.moves)))}else k=vg(k,new El(El.VNODE,d,c)),n=!0;else k=vg(k,new El(El.VNODE,d,c)),n=!0;else mZ(c)?mZ(d)?d.text!==c.text&&(k=vg(k,new El(El.VTEXT,d,c))):(k=vg(k,new El(El.VTEXT,d,c)),n=!0):$I(c)&&($I(d)||(n=!0),k=
vg(k,new El(El.WIDGET,d,c)));k&&(h[f]=k);n&&(kF(d,h,f),ml(d,h,f))}}function ml(d,c,h){if($I(d))"function"===typeof d.destroy&&(c[h]=vg(c[h],new El(El.REMOVE,d,null)));else if(Xz(d)&&(d.hasWidgets||d.hasThunks)){d=d.children;for(var f=d.length,k=0;k<f;k++){var n=d[k];h+=1;ml(n,c,h);Xz(n)&&n.count&&(h+=n.count)}}else ZI(d)&&Px(d,null,c,h)}function Px(d,c,h,f){d=pba(d,c);d=Ox(d.a,d.b);a:{for(k in d)if("a"!==k){var k=!0;break a}k=!1}k&&(h[f]=new El(El.THUNK,null,d))}function kF(d,c,h){if(Xz(d)){if(d.hooks){var f=
c[h],k=El.PROPS,n=d.hooks,b={},e;for(e in n)b[e]=void 0;c[h]=vg(f,new El(k,d,b))}if(d.descendantHooks||d.hasThunks)for(d=d.children,f=d.length,k=0;k<f;k++)n=d[k],h+=1,kF(n,c,h),Xz(n)&&n.count&&(h+=n.count)}else ZI(d)&&Px(d,null,c,h)}function DC(d,c,h){d.splice(c,1);return{from:c,key:h}}function lF(d){for(var c={},h=[],f=d.length,k=0;k<f;k++){var n=d[k];n.key?c[n.key]=k:h.push(k)}return{keys:c,free:h}}function vg(d,c){return d?(qba(d)?d.push(c):d=[d,c],d):c}function ks(d,c,h,f){if(f)if(f=f[c],nZ(f))f.unhook&&
f.unhook(d,c,h);else if("attributes"===c)for(var k in f)d.removeAttribute(k);else if("style"===c)for(var n in f)d.style[n]="";else d[c]="string"===typeof f?"":null}function Yz(d){if(Object.getPrototypeOf)return Object.getPrototypeOf(d);if(d.__proto__)return d.__proto__;if(d.constructor)return d.constructor.prototype}function Wi(d,c){var h=c?c.document||oZ:oZ,f=c?c.warn:null;d=rba(d).a;if(sba(d))return d.init();if(tba(d))return h.createTextNode(d.text);if(!uba(d))return f&&f("Item is not a valid virtual dom node",
d),null;h=null===d.namespace?h.createElement(d.tagName):h.createElementNS(d.namespace,d.tagName);vba(h,d.properties);d=d.children;for(f=0;f<d.length;f++){var k=Wi(d[f],c);k&&h.appendChild(k)}return h}function mF(d,c,h,f,k){f=f||{};if(d){ir(h,k,k)&&(f[k]=d);var n=c.children;if(n){d=d.childNodes;for(var b=0;b<c.children.length;b++){k+=1;var e=n[b]||wba,m=k+(e.count||0);ir(h,k,m)&&mF(d[b],e,h,f,k);k=m}}}return f}function ir(d,c,h){if(0===d.length)return!1;for(var f=0,k=d.length-1,n,b;f<=k;){n=(k+f)/
2>>0;b=d[n];if(f===k)return b>=c&&b<=h;if(b<c)f=n+1;else if(b>h)k=n-1;else return!0}return!1}function nF(d,c){return d>c?1:-1}function Qx(d,c){"function"===typeof c.destroy&&xba(c)&&c.destroy(d)}function aJ(d,c,h){h=h||{};h.patch=h.patch&&h.patch!==aJ?h.patch:QP;h.render=h.render||yba;return h.patch(d,c,h)}function QP(d,c,h){var f=[];for(k in c)"a"!==k&&f.push(Number(k));if(0===f.length)return d;var k=zba(d,c.a,f);var n=d.ownerDocument;h.document||n===Aba||(h.document=n);for(n=0;n<f.length;n++){var b=
f[n];var e=k[b],m=c[b],a=h;if(e)if(Bba(m))for(var g=0;g<m.length;g++)b=pZ(m[g],e,a),e===d&&(d=b);else b=pZ(m,e,a),e===d&&(d=b)}return d}function oF(d,c,h,f,k){(this||Ru).tagName=d;(this||Ru).properties=c||Cba;(this||Ru).children=h||Dba;(this||Ru).key=null!=f?String(f):void 0;(this||Ru).namespace="string"===typeof k?k:null;d=h&&h.length||0;f=0;var n=k=!1,b=!1,e;for(a in c)if(c.hasOwnProperty(a)){var m=c[a];Eba(m)&&m.unhook&&(e||(e={}),e[a]=m)}for(c=0;c<d;c++){var a=h[c];Fba(a)?(f+=a.count||0,!k&&a.hasWidgets&&
(k=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!k&&Gba(a)?"function"===typeof a.destroy&&(k=!0):!n&&Hba(a)&&(n=!0)}(this||Ru).count=d+f;(this||Ru).hasWidgets=k;(this||Ru).hasThunks=n;(this||Ru).hooks=e;(this||Ru).descendantHooks=b}function pF(d){(this||Iba).text=String(d)}function Zz(d){if(!(this instanceof Zz))return new Zz(d);this.value=d}function $z(d){if(!(this instanceof $z))return new $z(d);this.value=d}function bJ(d,c,h,f){if("string"===typeof d)c.push(new qZ(d));else if("number"===
typeof d)c.push(new qZ(String(d)));else if(Sm(d))c.push(d);else if(rZ(d))for(var k=0;k<d.length;k++)bJ(d[k],c,h,f);else if(null!==d&&void 0!==d)throw c={tagName:h,properties:f},h=Error(),h.type="virtual-hyperscript.unexpected.virtual-element",h.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+cJ(d)+".\nThe parent vnode is:\n"+cJ(c),h.foreignObject=d,h.parentVnode=c,h;}function Sm(d){return Jba(d)||Kba(d)||Lba(d)||Mba(d)}function cJ(d){try{return JSON.stringify(d,
null,"    ")}catch(c){return String(d)}}function Sn(d,c){if(3===d.nodeType)return new sZ(d.nodeValue);if(1===d.nodeType||9===d.nodeType){var h="http://www.w3.org/1999/xhtml"!==d.namespaceURI?d.namespaceURI:null,f=c&&d.getAttribute(c)?d.getAttribute(c):null,k=d.tagName;var n,b={};if(d.hasAttributes()){if(d.namespaceURI&&"http://www.w3.org/1999/xhtml"!==d.namespaceURI)var e=d.namespaceURI;for(var m=0;m<d.attributes.length;m++){if("style"==d.attributes[m].name){var a=d.style;var g={};for(n=0;n<a.length;++n){var l=
a.item(n);g[l]=String(a[l]);-1<g[l].indexOf("url")&&(g[l]=g[l].replace(/"/g,""))}a="style";l=n=void 0}else e?(n=d.attributes[m],a=n.name,g=n.value,n=Nba[n.name]||"",l=void 0):(n=void 0,g=d.attributes[m],a=tZ[g.name]?tZ[g.name]:g.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(g=g.value,n=!0):g=g.value,l=n||!1,n=void 0);n?b[a]={namespace:n,value:g}:l?(b.attributes||(b.attributes={}),b.attributes[a]=g):b[a]=g}}e=[];for(m=0;m<d.childNodes.length;m++)e.push(Sn(d.childNodes[m],c));return new Oba(k,
b,e,f,h)}return new sZ("")}function jr(d){var c={};Ki.addFill(d,c);Ki.addTransform(d,c);Ki.addTransformOrigin(d,c);Ki.addDisplay(d,c);Ki.addExtentStyle(d,c);Ki.addBorder(d,c);Ki.addBorderRadius(d,c);Ki.addShadowStyle(d,c);d.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*d.grayscale+"%)");d.blur&&(c.filter=(c.filter||"")+" blur("+d.blur+"px)");null!=d.opacity&&(c.opacity=d.opacity);d.draggable&&!d.isWorld&&(c["touch-action"]="none");return c}function qF(d,c){var h=d.position,f=d.origin,k=d.scale,
n=d.rotation,b=d.flipped,e=d.tilted,m=d.perspective,a=d.owner,g=d.__stackIdx__||0,l=Math.round(h.x-f.x-(d._skipWrapping&&a?a.borderWidthLeft:0));h=Math.round(h.y-f.y-(d._skipWrapping&&a?a.borderWidthTop:0));d=d.renderOnGPU||d.dropShadow&&!d.dropShadow.fast||0<d.grayscale;a&&a.isText||d?c.transform=d?"translate3d("+l+"px, "+h+"px, "+g+"px)":"translate("+l+"px, "+h+"px)":(c.transform="",c.top=h+"px",c.left=l+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+k.toFixed(5)+","+k.toFixed(5)+")";
m&&(c.perspective=m+"px");b&&(c.transform+=" rotateY("+180*b+"deg)");e&&(c.transform+=" rotateX("+180*e+"deg)")}function aA(d,c){var h=d.width;d=d.height;c.width=h||1;c.height=d||1;c.viewBox=[0,0,h||1,d||1].join(" ");return c}function qw(d){var c="";if(0<d.length){var h=d[0];var f=h.position;var k=f.y;f=f.x;c+="M "+f+" "+k+" "}for(var n=1;n<d.length-1;n++){var b=d[n],e=b.position,m=e.x;e=e.y;var a=b,g=a.controlPoints.previous;c=a.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(k+h.controlPoints.next.y)+
" "+(m+g.x)+" "+(e+g.y)+" "+m+" "+e+" "):c+("L "+m+" "+e+" ");h=b;f=m;k=e}0<d.length&&(b=d[d.length-1].position,n=b.x,b=b.y,d=d[d.length-1],m=d.controlPoints.previous,c=d.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(k+h.controlPoints.next.y)+" "+(n+m.x)+" "+(b+m.y)+" "+n+" "+b):c+("L "+n+" "+b));return c}function bA(d,c){var h=d.id,f=d.vertices,k=d.fill,n=d.borderColor,b=d.borderWidth;f.length&&(c.d=Ki.getSvgVertices(f));Ki.addSvgBorderStyle(d,c);c["stroke-width"]=b.valueOf();c.fill=k?k.isGradient?
"url(#gradient-fill"+h+")":k.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+h+")":n.valueOf().toString();return c}function Rx(d){var c=d.reactsToPointer,h=d.nativeCursor,f=d.clipMode,k=bf.styleProps(d);d=d._animationQueue.maskedProps("css");"backgroundImage"in d&&delete k.background;"visible"!==f&&(k.overflow=f,k["-webkit-overflow-scrolling"]="touch",k["overflow-anchor"]="none");Object.assign(k,d);k.position="absolute";k["pointer-events"]=c?"auto":"none";k.cursor=
h;return k}function rF(d,c){this.morph=d;this.type=c}function rw(d,c){c={animation:new bf.Animation(d),key:d.id,id:d.id,attributes:{},className:(d.hideScrollbars?d.styleClasses.concat("hiddenScrollbar"):d.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new bf.MorphAfterRenderHook(d,c)};c.attributes["touch-action"]=bf.bowser.ios&&d.draggable&&!d.isWorld?"none":bf.bowser.ios&&"visible"!=d.clipMode&&!d.isWorld?"auto":"manipulation";return c}function EC(d){var c=new bf.SvgAnimation(d,"svg"),
h={};bf.addSvgAttributes(d,h);Object.assign(h,d._animationQueue.maskedProps("svg"));return{animation:c,attributes:h}}function cA(d){var c=new bf.SvgAnimation(d,"path"),h={mask:0!==d.drawnProportion?"url(#mask"+d.id+")":""};bf.addPathAttributes(d,h);Object.assign(h,d._animationQueue.maskedProps("path"));return{animation:c,attributes:h}}function FC(d,c,h){var f=h=h.valueOf(),k=f.bounds,n=f.focus,b=f.vector;f=f.stops;var e=c.x;c=c.y;d={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+
d,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&(d.attributes.gradientTransform="rotate("+bf.num.toDegrees(b.extent().theta())+", "+e/2+", "+c/2+")");n&&k&&(b=k.width,k=k.height,d.attributes.gradientTransform="matrix(\n"+b/e+", 0, 0, "+k/c+",\n"+(e/2-b/e*(e/2)+n.x*e-e/2)+",\n"+(c/2-k/c*(c/2)+n.y*c-c/2)+")");return bf.h(h.type,d,f.map(function(m){return bf.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*m.offset+"%","stop-opacity":m.color.a,"stop-color":m.color.withA(1).toString()}})}))}
function GC(d,c){c=void 0===c?d.env.renderer:c;return bf.createNode(d.render(c),c.domEnvironment)}function HC(d,c){var h=c.renderMap.get(d),f=c.getNodeForMorph(d);if(f&&h){var k=c.render(d),n=bf.diff(h,k);if(d=c.renderMap.get(d.owner))d=d.children[0].children,h=d.indexOf(h),d[h]=k,bf.patch(f,n)}}function IC(d,c){if(d.needsRerender()){var h=!1,f=c.domNode,k=c.renderMap.get(d)||f&&(h=!0)&&bf.parser(f)||c.render(d),n=c.render(d);h&&(k.key=n.key);h=bf.diff(k,n);f=f||(c.domNode=bf.createNode(k,c.domEnvironment));
f.parentNode||bf.initDOMState(c,d);bf.patch(f,h);c.renderFixedMorphs(n.fixedMorphs,d)}}function sw(d,c,h){return(((1-3*h+3*c)*d+(3*h-6*c))*d+3*c)*d}function dJ(d){return d}function Su(d){return Tf.obj.isFunction(d)?d:Tf.Bezier.apply(Tf,$jscomp.arrayFromIterable(eval("(["+d.match(/\((.*)\)/)[1]+"])")))}function ls(d){var c=0,h=0;do c+=d.offsetTop||0,h+=d.offsetLeft||0,d=d.offsetParent;while(d);return{top:c,left:h}}function Li(){return System.get("@system-env").browser?Bh.createDOMEnvironment_browser():
Bh.createDOMEnvironment_node()}function bk(){return Bh._defaultEnv||(Bh._defaultEnv=System.get("@system-env").browser?new Bh.DomEnvironment(window,document,function(){}):Bh.createDOMEnvironment())}function ms(d,c,h){d=void 0===d?"lively-css":d;h=void 0===h?document:h;var f=h.getElementById(d);return f?Bh.setCSSDef(f,c,h):Bh.addCSSDef(d,c,h)}function tw(d,c,h,f){h=void 0===h?document:h;f=void 0===f?!0:f;var k=h.getElementById(d),n=!1;return k?f&&k.getAttribute("href")!==c?(k.setAttribute("href",c),
k.onload=function(){return n=!0},Bh.promise.waitFor(3E4,function(){return!!n&&k})):Promise.resolve():(k=h.createElement("link"),k.type="text/css",k.rel="stylesheet",k.setAttribute("id",d),k.setAttribute("href",c),k.onload=function(){return n=!0},h.head.appendChild(k),Bh.promise.waitFor(3E4,function(){return!!n&&k}))}function uw(d,c){return Array.isArray(d)?d.reduce(function(h,f){return uw(f,h)},c):"string"===typeof d?c.filter(function(h){return h.path()!==d&&h.name()!==d}):d instanceof RegExp?c.filter(function(h){return!d.test(h.path())&&
!d.test(h.name())}):"function"===typeof d?c.filter(function(h){return!d(h)}):c}function vj(d){d=$jscomp.makeIterator(d.split("?"));d.next();var c=d.next().value;d={};if(!c)return d;if(c=c.split("&"))for(var h=0;h<c.length;h++){var f=c[h].split("="),k=f[0],n=!0;if(1<f.length)if(n=decodeURIComponent(f.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}d[k]=n}return d}function Ue(d){return Object.keys(d).map(function(c){return c+
"="+encodeURIComponent(String(d[c]))}).join("&")}function dA(d){var c=d;do d=c,c=d.replace(Xf.pathDoubleDotRe,"");while(c!=d);c=c.replace(Xf.pathDoubleSlashRe,"$1/");return c=c.replace(Xf.pathDotRe,"/")}function je(d,c){var h=d.match(Xf.urlRe),f=c.match(Xf.urlRe),k=!0;if(h&&!f||!h&&f)k=!1;if(h&&f){var n=h[1];var b=h[2];var e=f[1];var m=f[2];n!==e?k=!1:b!==m?k=!1:(d=h[3],c=f[3])}if(!k)throw Error("[relativePathBetween] incompatible paths: "+d+" vs. "+c);d=Xf.withRelativePartsResolved(d);c=Xf.withRelativePartsResolved(c);
if(d==c)return"";h=Xf._relativePathBetween_checkPathes(c,d);if(!h)throw Error("pathname differs in relativePathFrom "+d+" vs "+c);return h}function Sx(d,c){return Xf.withRelativePartsResolved(d.replace(Xf.slashEndRe,"")+"/"+c.replace(Xf.slashStartRe,""))}function eA(d){return d.startsWith("/")?d.replace(Xf.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function Zc(d){var c=[];for(d=Xf.parent(d);d&&(c.unshift(d),d=Xf.parent(d),"/"!==d););return c}function Tj(d,c){if(!d)throw Error("lively.resource resource constructor: expects url but got "+
d);if(d.isResource)return d;d=String(d);for(var h=0;h<Xf.extensions.length;h++)if(Xf.extensions[h].matches(d))return new Xf.extensions[h].resourceClass(d,c);throw Error("Cannot find resource type for url "+d);}function ka(d,c,h){var f,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return f=Tj(d,h).asDirectory(),e.yield(f.ensureExistance(),2);case 2:n=e.forIn(c);case 3:if(null==(k=n.getNext())){e.jumpTo(5);break}if(!c.hasOwnProperty(k)){e.jumpTo(3);
break}b=f.join(k);return"object"===typeof c[k]?e.yield(ka(b,c[k],h),9):e.yield(b.write(c[k]),8);case 8:e.jumpTo(7);break;case 9:case 7:e.jumpTo(3);break;case 5:return e.return(f)}})}function q(d){var c=d.name;Xf.extensions=Xf.extensions.filter(function(h){return h.name!==c}).concat(d)}function w(d){var c="string"===typeof d?d:d.name;Xf.extensions=Xf.extensions.filter(function(h){return h.name!==c})}function B(d,c){var h=void 0===d.useProxy?!0:d.useProxy,f=void 0===d.useCors?!0:d.useCors,k=d.url,n=
d.onLoad,b=d.headers,e=d.onProgress,m=new XMLHttpRequest,a=lh.promise.deferred();m.open("PUT",k);h&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),k=d.proxyDomain||lh.defaultOrigin());for(var g in b)m.setRequestHeader(g,b[g]);m.upload.addEventListener("progress",e);m.responseType="json";m.onload=function(){n(m.response);a.resolve(m)};f&&(m.withCredentials=!0);m.send(c);return a.promise}function D(d,c,h){c=void 0===c?"infinity":c;var f,k,n,b,e,m,a,g,l,r,
v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(d.dirList(c,h),2);case 2:f=A.yieldResult,k={},n=$jscomp.makeIterator(f),b=n.next();case 3:if(b.done){A.jumpTo(5);break}e=b.value;if(e.isDirectory()){m={};A.jumpTo(6);break}return A.yield(e.read(),7);case 7:m=A.yieldResult;case 6:a=m;g=e.asFile().relativePathFrom(d).split("/");l=k;r=$jscomp.makeIterator(g.slice(0,-1));for(v=r.next();!v.done;v=r.next())y=v.value,l[y]||(l[y]={}),l=l[y];l[g[g.length-
1]]=a;b=n.next();A.jumpTo(3);break;case 5:return A.return(k)}})}function J(d){var c,h,f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return c=document.head,h=c.namespaceURI,f=fi.newUUID(),k=document.createElementNS(h,"script"),k.setAttribute("type","module"),c.appendChild(k),k.innerText="import m from '"+d+"'; window['"+f+"'] = m;",k.setAttributeNS(null,"async",!0),b.yield(fi.waitFor(3E4,function(){return window[f]}),2);n=b.yieldResult;delete window[f];k.remove();
return b.return(n)})}function O(d,c){var h=document.head,f=h.namespaceURI;return new Promise(function(k,n){var b=document.createElementNS(f,"script");b.setAttribute("type","text/ecmascript");h.appendChild(b);b.setAttributeNS(null,"id",d);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",d):b.setAttribute("src",d);b.onload=k;b.onerror=n;b.setAttributeNS(null,"async",!0)})}function Y(){var d,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return k.return(Promise.resolve());d=System.decanonicalize("lively.resources");if(System.get("@system-env").node){k.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");k.leaveTryBlock(3);break}return k.yield(System.import("fetch-ponyfill",d),4);case 4:c=k.yieldResult;k.jumpTo(3);break;case 5:return k.enterCatchBlock(),k.yield(System.normalize("fetch-ponyfill",d),7);case 7:return h=k.yieldResult.replace("file://",""),k.yield(System.import(h),8);
case 8:f=k.yieldResult,c=f.default;case 3:Object.assign(System.global,c()),k.jumpToEnd()}})}function ca(d,c){c||(c="undefined"!==typeof document?document.location.search:"");c=(c=c.trim())&&"?"!==c?Xi.parseQuery(c):{};d.endsWith(".json")?(c.file=d,delete c.name):(delete c.file,c.name=d);return"/worlds/load?"+Xi.stringifyQuery(c)}function sa(d){Object.assign(Xi.nameToClassMapping,d)}function qa(d,c){d=void 0===d?{}:d;c=void 0===c?{restore:!1}:c;var h=Xi.nameToClassMapping.default;d.type&&("function"===
typeof d.type&&(h=d.type),"object"===typeof d.type?h=Xi.locateClass(d.type):"string"===typeof d.type&&(h=Xi.nameToClassMapping[d.type.toLowerCase()]||h));var f={};return c.restore?(new h((f[Symbol.for("lively-instance-restorer")]=!0,f))).initFromJSON(d):new h(d)}function Qa(d){return("function"===typeof d?d[Symbol.for("__LivelyClassName__")]:"string"===typeof d?d.toLowerCase():"")+"_"+Xi.string.newUUID().replace(/-/g,"_")}function jb(d){var c=d.key;d=0|(d.ctrlKey?1:0)|(d.altKey?2:0)|(d.shiftKey?4:
0)|(d.metaKey?8:0);0===d&&!yi.canonicalizeFunctionKey(c)&&c&&yi.letterRe.test(c)&&(d=-1);return d}function Jb(d,c){if("string"===typeof d)return d;if(!d||"object"!==typeof d)return null;switch(c){case "ios":return d.ios||d.mac;case "mac":return d.mac||d.ios;case "win":case "windows":case "windowsphone":return d.win||d.windows;case "linux":return d.linux||d.win||d.windows;case "chromeos":return d.chromeos||d.linux||d.win||d.windows;case "android":return d.android||d.linux||d.win||d.windows;default:return d.linux||
d.win||d.windows}}function xb(d,c,h,f){f=void 0===f?h.name:f;(d[c]=uq.fun.wrap(d[c],h)).hookFunc=h;h.hookName=f}function wc(d,c,h){for(var f=[],k=d[c];k;)f.push(k),k=k.originalFunction;k="string"===typeof h?f.find(function(n){return n.hookFunc&&n.hookFunc.hookName===h}):f.find(function(n){return n.hookFunc===h});if(!k)return!1;uq.arr.remove(f,k);d[c]=f.reduceRight(function(n,b){return uq.fun.wrap(n,b.hookFunc||b)});return!0}function Nc(d,c,h){for(d=d[c];d;){if(d.hookFunc&&("string"===typeof h&&d.hookFunc.hookName===
h||d.hookFunc===h))return!0;d=d.originalFunction}return!1}function $b(d){if(d.loads){var c=d.loads;return vw.arr.uniq(Object.keys(vw.loadedModules(d)).concat(Object.keys(c))).reduce(function(h,f){var k=c[f]?c[f].depMap:{};h[f]=Object.keys(k).map(function(n){var b=k[n];return"@empty"===b?b+"/"+n:b});return h},{})}return Object.keys(d._loader.moduleRecords).reduce(function(h,f){h[f]=d._loader.moduleRecords[f].dependencies.filter(Boolean).map(function(k){return k.name});return h},{})}function cd(d,c,
h,f,k){var n=d.get("@lively-env").pendingExportChanges;(d=dp.module(d,c).record())&&(h in d.exports||k)&&((n[c]||(n[c]={}))[h]=f)}function Cd(d,c){var h=d.get("@lively-env").pendingExportChanges[c];h&&(dp.clearPendingModuleExportChanges(d,c),dp.updateModuleExports(d,c,h))}function ie(d,c,h,f,k){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:e.setCatchFinallyBlocks(2);d.debug&&console.log("[module change] "+c+" "+h.slice(0,50).replace(/\n/g,"")+
" "+f);if(!f||"es6"===f||"esm"===f||"register"===f||"defined"===f)return e.yield(Ck.moduleSourceChangeEsm(d,c,h,k),8);if("global"!==f)throw Error("moduleSourceChange is not supported for module "+c+" with format "+f);return e.yield(Ck.moduleSourceChangeGlobal(d,c,h,k),7);case 7:n=e.yieldResult;e.jumpTo(5);break;case 8:n=e.yieldResult;case 5:return Ck.emit("lively.modules/modulechanged",{module:c,newSource:h,options:k},Date.now(),d),e.return(n);case 2:throw b=e.enterCatchBlock(),Ck.emit("lively.modules/modulechanged",
{module:c,newSource:h,error:b,options:k},Date.now(),d),b;}})}function Ed(d){return/\.js/i.test(d)}function re(d){return Tn.isJsFile(d)?d.replace(/\/[^\/]*$/,""):d.replace(/\/$/,"")}function ef(d){return/^[^:\\]+:\/\//.test(d)}function af(d){var c=d.match(/^([^:]+:\/\/)(.*)/);if(!c)return d;d=c[1];var h=c=c[2];do c=h,h=c.replace(/\/[^\/]+\/\.\./,"");while(h!=c);h=h.replace(/(^|[^:])[\/]+/g,"$1/");h=h.replace(/\/\.\//g,"/");return d+h}function qe(d,c,h){h=void 0===h?!1:h;var f=sf.classHolder.PackageRegistry.ofSystem(d),
k=f.allPackageURLs();d=h?c:sf.normalizePackageURL(d,c,k);return{pkg:f.findPackageWithURL(d),url:d,allPackageURLs:k,registry:f}}function vf(d,c,h){d=sf.lookupPackage(d,c,void 0===h?!1:h);c=d.url;h=d.registry;return d.pkg||h.addPackageAt(c,"devPackageDirs")}function Oe(d,c,h){d=sf.lookupPackage(d,c,void 0===h?!1:h);if(h=d.pkg)return h;throw Error("[getPackage] package "+c+" (as "+d.url+") not found");}function Ne(d,c,h){return sf.getPackage(d,h).updateConfig(c)}function hf(d,c){return Promise.resolve(sf.ensurePackage(d,
c)).then(function(h){return h.import()})}function Sf(d,c){return(d=sf.lookupPackage(d,c).pkg)?d.remove():null}function If(d,c,h){return sf.getPackage(d,c).reload(h)}function bg(d,c,h){return Promise.resolve(sf.ensurePackage(d,c)).then(function(f){return f.register(h)})}function qh(d){return sf.Package.allPackages(d).map(function(c){return c.asSpec()})}function mj(d,c){d="string"===typeof d?Dd.parse(d):d;c.scope=Dd.query.resolveReferences(Dd.query.scopes(d));return Dd.ClassReplaceVisitor.run(d,c)}
function ik(d,c,h){h=Ip.ensureParent(d,c);var f=d.System._nodeRequire("module");c.startsWith(".")&&(c=Ip.relative(d,c));return f._load(c,h)}function aj(d,c,h){h=Ip.ensureParent(d,c);var f=d.System._nodeRequire("module");c.startsWith(".")&&(c=Ip.relative(d,c));return f._resolveFilename(c,h)}function Yg(d,c,h){var f=pf.livelySystemEnv(d);c=d.decanonicalize(c,h);return f.loadedModules[c]||(f.loadedModules[c]=new pf.ModuleInterface(d,c))}function $k(d,c,h){h=void 0===h?!1:h;var f=pf.livelySystemEnv(d);
return(h?c:d.normalizeSync(c))in f.loadedModules}function rk(d,c,h){h=void 0===h?!1:h;var f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){pf.livelySystemEnv(d);f=h?c:d.normalizeSync(c);if(pf.isModuleLoaded(d,f,!0))return b.return(!0);k=pf.Package.forModuleId(d,f);return k&&"no group"!==k.name?b.yield(k.hasResource(f),3):(n=d.resource(f).exists(),b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function Jp(){return Re.exceptions}function Tu(d){return Re.exceptions=
d}function Uu(d,c,h,f,k){c=String(c);d=f.sourceAccessorName;var n=f.recorder,b=f.recorderName,e=f.dontTransform,m=f.varDefinitionCallbackName,a=void 0===f.embedOriginalCode?!0:f.embedOriginalCode;d=a?d:void 0;f={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:d,dontTransform:e,jsx:h.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:m,evalId:f.nextEvalId(),classTransform:Re.classToFunctionTransform,currentModuleAccessor:Re.funcCall(Re.member(Re.funcCall(Re.member(Re.member("__lvVarRecorder",
"System"),"get"),Re.literal("@lively-env")),"moduleEnv"),Re.literal(h))};n=k?'console.log("[lively.modules] executing module '+h+'");\n':"";e="";"System.global"===b?delete f.declarationWrapperName:(n+='System.get("@lively-env").evaluationStart("'+h+'");\nvar '+(b+' = System.get("@lively-env").moduleEnv("'+h+'").recorder;\n')+(a?"\nvar "+d+" = "+JSON.stringify(c)+";\n":""),e+='\nSystem.get("@lively-env").evaluationEnd("'+h+'");');try{var g=n+Re.evalCodeTransform(c,f)+e;k&&"undefined"!==typeof $world&&
$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=g);return{source:g,options:f}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+h+" "+l.stack),{source:c,options:f}}}function Vu(d,c,h,f,k,n){c=String(c);d=Object.assign({},k,{classTransform:Re.classToFunctionTransform,topLevelVarRecorder:f.recorder,varRecorderName:f.recorderName,dontTransform:f.dontTransform,recordGlobals:!0,declarationWrapperName:f.varDefinitionCallbackName,currentModuleAccessor:Re.funcCall(Re.member(Re.funcCall(Re.member(Re.member("__lvVarRecorder",
"System"),"get"),Re.literal("@lively-env")),"moduleEnv"),Re.literal(h))});try{var b=Re.evalCodeTransformOfSystemRegisterSetters(c,d);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(e){return console.error("Error in prepareTranslatedCodeForSetterCapture",e.stack),c}}function st(d,c){return d.translate(c).then(function(h){var f=Re.parse(h).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===
n.expression.callee.property.name});if(!f)throw Error("Cannot find register call in translated source of "+c.name);var k=f.expression;f=k.arguments[0].elements.map(function(n){return n.value});k=k.arguments[1];h=h.slice(k.start,k.end);h=eval('var __moduleName = "'+c.name+'";('+h+");\n//# sourceURL="+c.name+"\n");d.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=h);return{localDeps:f,declare:h}})}function ns(d,c){return d.translate(c).then(function(h){return{translated:h}})}
function Ih(d){Re.isHookInstalled(d,"translate","lively_modules_translate_hook")||Re.installHook(d,"translate",function(c,h){return Re.customTranslate.call(d,c,h)},"lively_modules_translate_hook")}function sk(d){Re.removeHook(d,"translate","lively_modules_translate_hook")}function Uj(d){d.resource=rh.resource;rh.isHookInstalled(d,"fetch",rh.fetchResource)&&rh.removeHook(d,"fetch","fetchResource");rh.installHook(d,"fetch",rh.fetchResource);rh.isHookInstalled(d,"resource","livelyProtocol")&&rh.removeHook(d,
"fetch","livelyProtocol");rh.installHook(d,"resource",rh.livelyProtocol)}function Go(d){rh.removeHook(d,"fetch","fetchResource");rh.removeHook(d,"resource","livelyProtocol");delete d.resource}function fA(d){ae.isHookInstalled(d,"normalize","normalizeHook")||ae.installHook(d,"normalize",ae.normalizeHook,"normalizeHook");ae.isHookInstalled(d,"decanonicalize","decanonicalizeHook")||ae.installHook(d,"decanonicalize",ae.decanonicalizeHook,"decanonicalizeHook");ae.isHookInstalled(d,"normalizeSync","decanonicalizeHook")||
ae.installHook(d,"normalizeSync",ae.decanonicalizeHook,"decanonicalizeHook");ae.isHookInstalled(d,"newModule","newModule_volatile")||ae.installHook(d,"newModule",ae.newModule_volatile,"newModule_volatile");ae.isHookInstalled(d,"instantiate","instantiate_triggerOnLoadCallbacks")||ae.installHook(d,"instantiate",ae.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");ae.isHookInstalled(d,"locate","locateHook")||ae.installHook(d,"locate",ae.locateHook,"locateHook")}function Tx(d){ae.removeHook(d,
"normalize","normalizeHook");ae.removeHook(d,"decanonicalize","decanonicalizeHook");ae.removeHook(d,"normalizeSync","decanonicalizeHook");ae.removeHook(d,"newModule","newModule_volatile");ae.removeHook(d,"instantiate","instantiate_triggerOnLoadCallbacks");ae.removeHook(d,"locate","locateHook")}function Nh(d){return{moduleEnv:function(c){return ae.classHolder.module(d,c)},get itself(){return d.get(d.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){ae.classHolder.module(d,c).evaluationStart()},
evaluationEnd:function(c){ae.classHolder.module(d,c).evaluationEnd()},dumpConfig:function(){return JSON.stringify({baseURL:d.baseURL,transpiler:d.transpiler,defaultJSExtensions:d.defaultJSExtensions,map:d.map,meta:d.meta,packages:d.packages,paths:d.paths,packageConfigPaths:d.packageConfigPaths},null,2)},get packageRegistry(){return d["__lively.modules__packageRegistry"]},set packageRegistry(c){d["__lively.modules__packageRegistry"]=c},packages:d["__lively.modules__packages"]||(d["__lively.modules__packages"]=
{}),loadedModules:d["__lively.modules__loadedModules"]||(d["__lively.modules__loadedModules"]={}),pendingExportChanges:d["__lively.modules__pendingExportChanges"]||(d["__lively.modules__pendingExportChanges"]={}),notifications:d["__lively.modules__notifications"]||(d["__lively.modules__notifications"]=[]),notificationSubscribers:d["__lively.modules__notificationSubscribers"]||(d["__lively.modules__notificationSubscribers"]={}),options:d["__lively.modules__options"]||(d["__lively.modules__options"]=
ae.obj.deepCopy(ae.defaultOptions)),onLoadCallbacks:d["__lively.modules__onLoadCallbacks"]||(d["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:d["__lively.modules__modulePackageMapCache"]}}function Tl(d,c){return d&&"string"!==typeof d?d:ae.systems()[d]||(ae.systems()[d]=ae.makeSystem(c))}function Un(d){d=d&&"string"!==typeof d?ae.nameOfSystem(d):d;delete ae.systems()[d]}function Ux(d,c){d.trace=!0;c=c||{};var h=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:
!ae.urlQuery().noModuleCache;d.useModuleTranslationCache=h;d.set("@lively-env",d.newModule(ae.livelySystemEnv(d)));"undefined"!==typeof ae.WorkerGlobalScope&&d.set("@system-env",d.newModule(Object.assign({},d.get("@system-env"),{browser:!0,worker:!0,location:location})));(h="undefined"!==typeof ae.process&&ae.process.versions&&ae.process.versions.electron)&&d.set("@system-env",d.newModule(Object.assign({electron:h},d.get("@system-env"))));ae.wrapResource(d);ae.wrapModuleLoad(d);ae.wrapModuleResolution(d);
h&&(h=["electron"].reduce(function(f,k){f[k]="@node/"+k;return f},{}),c.map=ae.obj.merge(h,c.map));ae.isNode&&(h="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(f,k){f[k]="@node/"+k;return f},{}),c.map=ae.obj.merge(h,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||
"traceur"!==d.transpiler||(h=ae.GLOBAL.System,"lively.transpiler"===h.transpiler?(d.set("lively.transpiler",h.get("lively.transpiler")),d._loader.transpilerPromise=h._loader.transpilerPromise,d.config({transpiler:"lively.transpiler",babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)})):d.config({map:{"plugin-babel":h.map["plugin-babel"],"systemjs-babel-build":h.map["systemjs-babel-build"]},transpiler:h.transpiler,babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)}));d.config(c);
return d}function eJ(d){d=ae.getSystem(d);return JSON.stringify({baseURL:d.baseURL,transpiler:d.transpiler,defaultJSExtensions:d.defaultJSExtensions,defaultExtension:d.defaultExtension,map:d.map,meta:d.meta,packages:d.packages,paths:d.paths,packageConfigPaths:d.packageConfigPaths,bundles:d.bundles},null,2)}function fJ(d,c,h){var f=d.decanonicalize(c);if(d.get(f))try{h(ae.classHolder.module(d,f))}catch(k){console.error(k)}else d.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:h})}
function gJ(d){return d.get("@lively-env").loadedModules}function hJ(d){var c=d.loads?Object.keys(d.loads):Object.keys(d._loader.moduleRecords);return ae.arr.uniq(c.concat(Object.keys(ae.loadedModules(d))))}function RP(d,c,h){return Promise.all(ae.obj.values(ae.loadedModules(d)).map(function(f){return f.search(c,h)})).then(function(f){return ae.arr.flatten(f,1)})}function sF(d,c,h,f){c=void 0===c?{maxDepth:0,excludes:[]}:c;h=void 0===h?{}:h;f=void 0===f?0:f;var k,n,b,e,m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:k=
c;n=k.maxDepth;b=k.excludes;if(0<n&&f>n)return F.return(h);F.setCatchFinallyBlocks(2);e=JSON;m=e.parse;return F.yield(rn.resource(d).join("package.json").read(),4);case 4:a=m.call(e,F.yieldResult);g=a.name+"@"+a.version;if(h[g]||b.includes(a.name))return F.return(h);h[g]=Object.assign({url:d},rn.obj.select(a,["name","version","dependencies","devDependencies","main"]));F.leaveTryBlock(3);break;case 2:return F.enterCatchBlock(),F.return(h);case 3:return F.setCatchFinallyBlocks(5),F.yield(rn.resource(d).join("node_modules").dirList(1),
7);case 7:l=F.yieldResult;F.leaveTryBlock(6);break;case 5:return F.enterCatchBlock(),F.return(h);case 6:r=$jscomp.makeIterator(l),v=r.next();case 8:if(v.done){F.jumpTo(10);break}A=y=v.value;E=A.url;return F.yield(sF(E,c,h,f+1),11);case 11:h=F.yieldResult;v=r.next();F.jumpTo(8);break;case 10:return F.return(h)}})}function iJ(d,c){var h=Object.assign({},d.dependencies,{},d.devDependencies);return Object.keys(h).reduce(function(f,k){var n=h[k],b=rn.obj.values(c).find(function(m){var a=m.version;return m.name===
k&&lively.modules.semver.satisfies(a,n)})||{},e=b.name;b=b.version;f[k]=e?e+"@"+b:void 0;return f},{})}function jJ(d){function c(k,n){var b=k+"@"+n;if(b in f)return f[b];var e=h.find(function(a){var g=a.version;return a.name===k&&lively.modules.semver.satisfies(g,n)})||{},m=e.name;e=e.version;return f[b]=m?m+"@"+e:void 0}var h=rn.obj.values(d),f={};return Object.keys(d).reduce(function(k,n){var b=d[n],e=Object.assign({},b.dependencies,{},b.devDependencies);k[n]=Object.keys(e).map(function(m){return c(m,
e[m])}).filter(function(m){return!!m});return k},{})}function kJ(d,c){nd.defaultSystem=d;c&&(nd.GLOBAL.System=d);return d}function lJ(){nd._wrapModuleResolution(nd.defaultSystem)}function mJ(){nd._unwrapModuleResolution(nd.defaultSystem)}function nJ(){return Object.keys(nd.requireMap())}function tF(d){return nd._module(nd.defaultSystem,d)}function oJ(d,c){return nd._isModuleLoaded(nd.defaultSystem,d,c)}function pJ(d,c){return nd._doesModuleExist(nd.defaultSystem,d,c)}function qJ(){return nd._printSystemConfig(nd.defaultSystem)}
function rJ(d,c){return nd._whenLoaded(nd.defaultSystem,d,c)}function sJ(d){return nd._importPackage(nd.defaultSystem,d)}function tJ(d,c){return nd._registerPackage(nd.defaultSystem,d,c)}function uJ(d){return nd._removePackage(nd.defaultSystem,d)}function vJ(d,c){return nd._reloadPackage(nd.defaultSystem,d,c)}function wJ(){return nd.getPackageSpecs(nd.defaultSystem)}function xJ(d,c){return nd._getPackage(nd.defaultSystem,d,void 0===c?!1:c)}function yJ(d){return nd.Package.forModuleId(nd.defaultSystem,
d)}function zJ(d){return nd._ensurePackage(nd.defaultSystem,d)}function AJ(d,c){return nd._applyPackageConfig(nd.defaultSystem,d,c)}function BJ(d,c){return nd._lookupPackage(nd.defaultSystem,d,void 0===c?!1:c)}function CJ(d,c,h){return nd._moduleSourceChange(nd.defaultSystem,d,c,h)}function DJ(){return nd.computeRequireMap(nd.defaultSystem)}function EJ(d,c){return nd._isHookInstalled(nd.defaultSystem,d,c)}function FJ(d,c){return nd._installHook(nd.defaultSystem,d,c)}function GJ(d,c){return nd._removeHook(nd.defaultSystem,
d,c)}function HJ(){nd._wrapModuleLoad(nd.defaultSystem)}function IJ(){nd._unwrapModuleLoad(nd.defaultSystem)}function SP(d){return d&&d.__ref__}function uF(d,c){return tf.serialize(d,tf.normalizeOptions(c))}function vF(d,c){c=void 0===c?{}:c;return tf.deserializeWithMigrations(d,c.migrations||tf.migrations,tf.normalizeOptions(c))}function JJ(d){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=tf,h=c.loadMorphFromSnapshot,f.yield(d.readJson(),2)):f.return(h.call(c,
f.yieldResult))})}function TP(d,c,h){d=void 0===d?tf.MorphicEnv.default().world:d;var f,k,n,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:f=h||{};k=void 0===f.showIndicator?!0:f.showIndicator;n=void 0===f.changeName?!0:f.changeName;b=void 0===f.changeBrowserURL?!0:f.changeBrowserURL;c||(e=tf.resource(document.location.href),m=e.name(),c=e.join("../"+m.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&
(c=tf.resource(c));n&&(d.name=c.nameWithoutExt());b&&(a=encodeURI(h.pathForBrowserHistory||tf.pathForBrowserHistory(c.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!k){y.jumpTo(2);break}return y.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return l=y.yieldResult,r=l.LoadingIndicator,g=r.open("string"===typeof k?k:"Snapshotting..."),y.yield(g.whenRendered(),4);case 4:return y.yield(tf.promise.delay(100),2);case 2:return y.setFinallyBlock(6),
y.yield(tf.createMorphSnapshot(d,h),8);case 8:return v=y.yieldResult,g.label="Uploading...",y.yield(g.whenRendered(),9);case 9:return y.return(c.writeJson(v));case 6:y.enterFinallyBlock(),g&&g.remove(),y.leaveFinallyBlock(0)}})}function KJ(d){return tf.deserializeMorph(tf.serializeMorph(d),{migrations:JC,reinitializeIds:!0})}function gA(d,c){c=void 0===c?{}:c;var h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){switch(Ka.nextAddress){case 1:h=
System.get("@system-env").node;f=c;k=void 0===f.addPreview?!h:f.addPreview;n=void 0===f.previewWidth?100:f.previewWidth;b=void 0===f.previewHeight?100:f.previewHeight;e=void 0===f.previewType?"png":f.previewType;m=void 0===f.testLoad?!0:f.testLoad;a=void 0===f.addPackages?!0:f.addPackages;g=void 0===f.ignoreMorphs?[]:f.ignoreMorphs;l=void 0===f.frozenSnapshot?!1:f.frozenSnapshot;r=tf.serializeMorph(d,{frozenSnapshot:l});if(!a){Ka.jumpTo(2);break}return Ka.yield(tf.findRequiredPackagesOfSnapshot(r),
3);case 3:v=Ka.yieldResult,y=v.packages,A=v.depMap,r.packages=y,r.packageDepMap=A;case 2:if(!k){Ka.jumpTo(4);break}return Ka.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return E=Ka.yieldResult,F=E.renderMorphToDataURI,H=n||d.width,I=b||d.height,M=e||"png",Ka.setCatchFinallyBlocks(6),N=r,Ka.yield(F(d,{width:H,height:I,type:M,ignoreMorphs:g}),8);case 8:N.preview=Ka.yieldResult;Ka.leaveTryBlock(4);break;case 6:return X=Ka.enterCatchBlock(),console.error("Error generating morph preview: "+
X),W=r,Ka.yield(F(tf.morph({fill:d.fill,width:H,height:I}),{width:H,height:I,type:M,ignoreMorphs:g}),9);case 9:W.preview=Ka.yieldResult;case 4:r.preview||(r.preview="");if(!m){Ka.jumpTo(10);break}Ka.setCatchFinallyBlocks(11);return Ka.yield(tf.loadMorphFromSnapshot(r,{highlightBuggyMorphs:!0,rootObject:d}),13);case 13:ea=Ka.yieldResult;if(!ea||!ea.isMorph)throw Error("reloading snapshot does not create a morph!");Ka.leaveTryBlock(10);break;case 11:throw Aa=Ka.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+
Aa.stack);case 10:return Ka.return(r)}})}function Wu(d,c){return tf.deserializeMorph(d,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:tf.loadPackagesAndModulesOfSnapshot,migrations:JC},c))}function uZ(d,c){var h,f,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!d.isDirectory())return e=c,m=d.name(),a.yield(d.read(),9);h=c[d.name()]={};return a.yield(d.dirList(),4);case 4:f=a.yieldResult,k=$jscomp.makeIterator(f),
n=k.next();case 5:if(n.done)return a.return(c);b=n.value;return a.yield(uZ(b,h),6);case 6:n=k.next();a.jumpTo(5);break;case 9:return e[m]=a.yieldResult,a.return(c)}})}function vZ(d,c){c=void 0===c?[]:c;var h=[];if(d.hasOwnProperty("package.json")){var f=c.slice(1).reduceRight(function(n,b){return n.join(b)},tf.resource(c[0])).url;h.push({files:d,url:f,requiredPackages:d.requiredPackages})}for(var k in d)"object"===typeof d[k]&&h.push.apply(h,$jscomp.arrayFromIterable(vZ(d[k],c.concat(k))));return h}
function UP(d){var c=tf.findPackagesInFileSpec(d.packages),h={};d=d.packageDepMap;if(!d)return c;c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next())f=f.value,h[f.url]=f;return tf.arr.flatten(tf.graph.sortByReference(d)).map(function(k){return h[k]})}function wF(d){var c,h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if(!d.packagesToRegister){H.jumpTo(2);break}c=$jscomp.makeIterator(d.packagesToRegister);h=c.next();
case 3:if(h.done){H.jumpTo(2);break}f=h.value;H.setCatchFinallyBlocks(6);return H.yield(tf.registerPackage(f),8);case 8:H.leaveTryBlock(4);break;case 6:H.enterCatchBlock(),console.error("Failed to register package "+f);case 4:h=c.next();H.jumpTo(3);break;case 2:if(!d.packages){H.jumpTo(9);break}k=tf.packagesOfSnapshot(d);n=$jscomp.makeIterator(k);b=n.next();case 10:if(b.done){H.jumpTo(9);break}m=e=b.value;a=m.files;g=m.url;if(r=(l=tf.lookupPackage(g))&&l.pkg){v=r.version;y=JSON.parse(a["package.json"]);
A=y.version;try{if(A&&v&&tf.semver.lte(A,v,!0)){console.log("[load morph] Package "+g+" is loaded in version "+v+(" which is newer than "+A+". Will NOT load older variant."));H.jumpTo(11);break}}catch(I){console.warn("Error in package version comparison: ",I)}}return H.yield(tf.createFiles(g,a),13);case 13:return H.yield(tf.ensurePackage(g),14);case 14:return r=H.yieldResult,H.yield(r.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return H.yield(System.import("lively.classes/object-classes.js"),
16);case 16:E=H.yieldResult,F=E.default,tf.objectScriptingEnabled=!!F,tf.objectScriptingEnabled&&F.withId(r.name);case 11:b=n.next();H.jumpTo(10);break;case 9:return H.yield(Promise.all(tf.requiredModulesOfSnapshot(d).map(function(I){return(System.get(I)?null:System.import(I)).catch(function(M){return console.error("Error loading "+I,M)})})),0)}})}function LJ(d){var c,h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa,oa,hb,Cb,va,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:c=
{},h=d.snapshot,f=[],k={},n=!0,b={},e={},a=ua.forIn(h);case 2:if(null==(m=a.getNext())){ua.jumpTo(4);break}g=h[m]["lively.serializer-class-info"];if(!(g&&g.module&&g.module.package)){ua.jumpTo(5);break}l=tf.getPackage(g.module.package.name);if(!l.address.startsWith("local://")){ua.jumpTo(5);break}return ua.yield(System.import("lively.classes/object-classes.js"),7);case 7:return r=ua.yieldResult,e.$jscomp$loop$prop$ObjectPackage$2374=r.default,ua.yield(System.import("lively.classes/util.js"),8);case 8:v=
ua.yieldResult,y=v.withSuperclasses,tf.objectScriptingEnabled=!!e.$jscomp$loop$prop$ObjectPackage$2374,A=e.$jscomp$loop$prop$ObjectPackage$2374.forSystemPackage(l),E=A.objectModule.systemModule._recorder[g.className],F=y(E),F.forEach(function(Ma){return function(Lb){(Lb=Ma.$jscomp$loop$prop$ObjectPackage$2374.lookupPackageForClass(Lb))&&f.push(Lb.systemPackage)}}(e));case 5:if(H=h[m].props.metadata)if(I=void 0,H.value&&H.value.__ref__?(M=h[H.value.id],M.props.externalPackages&&(I=M.props.externalPackages.value)):
I=H.externalPackages,I)for(n=!0,N=0;N<I.length;N++)k[I[N]]=!0;e={$jscomp$loop$prop$ObjectPackage$2374:e.$jscomp$loop$prop$ObjectPackage$2374};ua.jumpTo(2);break;case 4:n&&(d.packagesToRegister=Object.keys(k)),X=[],W=$jscomp.makeIterator(f),ea=W.next();case 9:if(ea.done)return f=[].concat($jscomp.arrayFromIterable(X),$jscomp.arrayFromIterable(f)),ua.yield(Promise.all(f.map(function(Ma){var Lb,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){if(1==Vb.nextAddress)return Lb=tf.resource(Ma.address).asDirectory(),
Vb.yield(tf.resourceToJSON(Lb,{}),2);ic=Vb.yieldResult;c[Lb.parent().url]||(c[Lb.parent().url]={});Object.assign(c[Lb.parent().url],ic);b[Ma.url]||(b[Ma.url]=[]);Vb.jumpToEnd()})})),16);Aa=ea.value;Ka=$jscomp.makeIterator(Aa.modules());K=Ka.next();case 12:if(K.done){ea=W.next();ua.jumpTo(9);break}aa=K.value;if(aa.id.endsWith(".json")){ua.jumpTo(13);break}T=$jscomp;U=T.makeIterator;return ua.yield(aa.imports(),15);case 15:for(pa=U.call(T,ua.yieldResult),fa=pa.next();!fa.done;fa=pa.next())if(hb=oa=
fa.value,Cb=hb.fromModule,va=tf.module(Cb).package())ma=va.config,ma.lively&&ma.lively.isObjectPackage&&(X.push(va),b[Aa.url]?tf.arr.pushIfNotIncluded(b[Aa.url],va.url):b[Aa.url]=[va.url]);case 13:K=Ka.next();ua.jumpTo(12);break;case 16:return ua.return({packages:c,depMap:b})}})}function MJ(){VP=!0;for(var d,c,h=xF.length;h;){c=xF;xF=[];for(d=-1;++d<h;)c[d]();h=xF.length}VP=!1}function KC(d,c,h){var f=h[h.length-1];d===f.element&&(h.pop(),f=h[h.length-1]);h=f.element;f=f.index;Array.isArray(h)?h.push(d):
f===c.length-2?(c=c.pop(),h[c]=d):c.push(d)}function Dk(){Dk.init.call(this)}function NJ(d){if("function"!=typeof d)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d);}function wZ(d,c,h,f){var k,n,b;if(NJ(h),void 0===(n=d._events)?(n=d._events=Object.create(null),d._eventsCount=0):(void 0!==n.newListener&&(d.emit("newListener",c,h.listener?h.listener:h),n=d._events),b=n[c]),void 0===b)n[c]=h,++d._eventsCount;else if("function"==typeof b?b=n[c]=f?[h,b]:
[b,h]:f?b.unshift(h):b.push(h),0<(k=void 0===d._maxListeners?Dk.defaultMaxListeners:d._maxListeners)&&b.length>k&&!b.warned)b.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),h.name="MaxListenersExceededWarning",h.emitter=d,h.type=c,h.count=b.length,console&&console.warn&&console.warn(h);return d}function Pba(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=
!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xZ(d,c,h){d={fired:!1,wrapFn:void 0,target:d,type:c,listener:h};c=Pba.bind(d);return c.listener=h,d.wrapFn=c,c}function yZ(d,c,h){d=d._events;if(void 0===d)return[];c=d[c];if(void 0===c)h=[];else if("function"==typeof c)h=h?[c.listener||c]:[c];else if(h)for(h=Array(c.length),d=0;d<h.length;++d)h[d]=c[d].listener||c[d];else h=zZ(c,c.length);return h}function AZ(d){var c=this._events;if(void 0!==
c){d=c[d];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function zZ(d,c){for(var h=Array(c),f=0;f<c;++f)h[f]=d[f];return h}function LC(d){return d&&"object"===typeof d&&"default"in d?d["default"]:d}function Vx(){this._store={}}function yF(d){this._store=new Vx;if(d&&Array.isArray(d))for(var c=0,h=d.length;c<h;c++)this.add(d[c])}function sn(d){var c;if(!d||"object"!==typeof d)return d;if(Array.isArray(d)){var h=[];var f=0;for(c=d.length;f<c;f++)h[f]=sn(d[f]);return h}if(d instanceof
Date)return d.toISOString();if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer||"undefined"!==typeof Blob&&d instanceof Blob)return d instanceof ArrayBuffer?"function"===typeof d.slice?d=d.slice(0):(f=new ArrayBuffer(d.byteLength),h=new Uint8Array(f),d=new Uint8Array(d),h.set(d),d=f):(f=d.size,h=d.type,d="function"===typeof d.slice?d.slice(0,f,h):d.webkitSlice(0,f,h)),d;h=Object.getPrototypeOf(d);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&BZ.call(h)==Qba);if(!h)return d;
h={};for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&(c=sn(d[f]),"undefined"!==typeof c&&(h[f]=c));return h}function CZ(d){var c=!1;return MC(function(h){if(c)throw Error("once called more than once");c=!0;d.apply(this,h)})}function DZ(d){return MC(function(c){c=sn(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var e;try{var m=CZ(function(a,g){a?b(a):n(g)});c.push(m);(e=d.apply(h,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});f&&k.then(function(n){f(null,
n)},f);return k})}function Rba(d,c,h){if(d.constructor.listeners("debug").length){for(var f=["api",d.name,c],k=0;k<h.length-1;k++)f.push(h[k]);d.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(b,e){var m=["api",d.name,c];m=m.concat(b?["error",b]:["success",e]);d.constructor.emit("debug",m);n(b,e)}}}function Tm(d,c){return DZ(MC(function(h){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));
var f=this;Rba(f,d,h);return this.taskqueue.isReady?c.apply(this,h):new Promise(function(k,n){f.taskqueue.addTask(function(b){b?n(b):k(f[d].apply(f,h))})})}))}function zF(d,c){for(var h={},f=0,k=c.length;f<k;f++){var n=c[f];n in d&&(h[n]=d[n])}return h}function EZ(d){return d}function Sba(d){return[{ok:d}]}function FZ(d,c,h){function f(){var v=[];g.forEach(function(y){y.docs.forEach(function(A){v.push({id:y.id,docs:[A]})})});h(null,{results:v})}function k(){if(!(r>=l.length)){var v=l.slice(r,Math.min(r+
6,l.length));n(v,r);r+=v.length}}function n(v,y){v.forEach(function(A,E){var F=y+E;E=e.get(A);var H=zF(E[0],["atts_since","attachments"]);H.open_revs=E.map(function(M){return M.rev});H.open_revs=H.open_revs.filter(EZ);var I=EZ;0===H.open_revs.length&&(delete H.open_revs,I=Sba);["revs","attachments","binary","ajax","latest"].forEach(function(M){M in c&&(H[M]=c[M])});d.get(A,H,function(M,N){M=M?[{error:M}]:I(N);g[F]={id:A,docs:M};++a===m&&f();k()})})}var b=c.docs,e=new kr;b.forEach(function(v){e.has(v.id)?
e.get(v.id).push(v):e.set(v.id,[v])});var m=e.size,a=0,g=Array(m),l=[];e.forEach(function(v,y){l.push(y)});var r=0;k()}function Tba(d){AF&&addEventListener("storage",function(c){d.emit(c.key)})}function NC(){vq.EventEmitter.call(this);this._listeners={};Tba(this)}function os(d){if("undefined"!==typeof console&&"function"===typeof console[d]){var c=Array.prototype.slice.call(arguments,1);console[d].apply(console,c)}}function Uba(d){var c=0;d||(c=2E3);d=parseInt(d,10)||0;c=parseInt(c,10);c=c!==c||c<=
d?(d||1)<<1:c+1;6E5<c&&(d=3E5,c=6E5);return~~((c-d)*Math.random()+d)}function WP(d,c){os("info","The above "+d+" is totally normal. "+c)}function al(d,c,h){Error.call(this,h);this.status=d;this.name=c;this.message=h;this.error=!0}function Ti(d,c){function h(f){for(var k in d)"function"!==typeof d[k]&&(this[k]=d[k]);void 0!==f&&(this.reason=f)}h.prototype=al.prototype;return new h(c)}function OC(d){if("object"!==typeof d){var c=d;d=GZ;d.data=c}"error"in d&&"conflict"===d.error&&(d.name="conflict",
d.status=409);"name"in d||(d.name=d.error||"unknown");"status"in d||(d.status=500);"message"in d||(d.message=d.message||d.reason);return d}function XP(d){var c={},h=d.filter&&"function"===typeof d.filter;c.query=d.query_params;return function(f){f.doc||(f.doc={});var k;if(k=h)try{k=!(0,d.filter)(f.doc,c)}catch(b){k=Ti(OJ,"Filter function threw: "+b.toString())}if("object"===typeof k)return k;if(k)return!1;if(!d.include_docs)delete f.doc;else if(!d.attachments)for(var n in f.doc._attachments)f.doc._attachments.hasOwnProperty(n)&&
(f.doc._attachments[n].stub=!0);return!0}}function PJ(d){for(var c=[],h=0,f=d.length;h<f;h++)c=c.concat(d[h]);return c}function HZ(d){var c;d?"string"!==typeof d?c=Ti(IZ):/^_/.test(d)&&!/^_(design|local)/.test(d)&&(c=Ti(Vba)):c=Ti(Wba);if(c)throw c;}function Xu(d){return"boolean"===typeof d._remote?d._remote:"function"===typeof d.type?(os("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===d.type()):!1}function YP(d){if(!d)return null;var c=d.split("/");return 2===
c.length?c:1===c.length?[d,d]:null}function JZ(d){return(d=YP(d))?d.join("/"):null}function KZ(d){d=Xba.exec(d);for(var c={},h=14;h--;){var f=LZ[h],k=d[h]||"",n=-1!==["user","password"].indexOf(f);c[f]=n?decodeURIComponent(k):k}c.queryKey={};c[LZ[12]].replace(Yba,function(b,e,m){e&&(c.queryKey[e]=m)});return c}function ZP(d,c){var h=[],f=[],k;for(k in c)c.hasOwnProperty(k)&&(h.push(k),f.push(c[k]));h.push(d);return Function.apply(null,h).apply(null,f)}function QJ(d,c,h){return new Promise(function(f,
k){d.get(c,function(n,b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return f({updated:!1,rev:n});b._id=c;b._rev=n;f(Zba(d,b,h))})})}function Zba(d,c,h){return d.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return QJ(d,c._id,h)})}function $P(d,c){d=d||[];c=c||{};try{return new Blob(d,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),f=0;f<d.length;f+=1)h.append(d[f]);return h.getBlob(c.type)}}function aQ(d,c){for(var h=d.length,f=new ArrayBuffer(h),k=new Uint8Array(f),n=0;n<h;n++)k[n]=d.charCodeAt(n);return $P([f],{type:c})}function bQ(d,c){return aQ(atob(d),c)}function MZ(d,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(f)return c(n);k="";n=new Uint8Array(n);for(var b=n.byteLength,e=
0;e<b;e++)k+=String.fromCharCode(n[e]);c(k)};f?h.readAsBinaryString(d):h.readAsArrayBuffer(d)}function NZ(d,c){MZ(d,function(h){c(h)})}function cQ(d,c){NZ(d,function(h){c(btoa(h))})}function $ba(d,c){var h=new FileReader;h.onloadend=function(f){f=f.target.result||new ArrayBuffer(0);c(f)};h.readAsArrayBuffer(d)}function aca(d,c,h){return d.webkitSlice?d.webkitSlice(c,h):d.slice(c,h)}function bca(d,c,h,f,k){if(0<h||f<c.size)c=aca(c,h,f);$ba(c,function(n){d.append(n);k()})}function cca(d,c,h,f,k){if(0<
h||f<c.length)c=c.substring(h,f);d.appendBinary(c);k()}function dQ(d,c){function h(){dca(k)}function f(){var r=g.end(!0);r=btoa(r);c(r);g.destroy()}function k(){var r=a*e,v=r+e;a++;a<m?l(g,d,r,v,h):l(g,d,r,v,f)}var n="string"===typeof d,b=n?d.length:d.size,e=Math.min(32768,b),m=Math.ceil(b/e),a=0,g=n?new RJ:new RJ.ArrayBuffer,l=n?cca:bca;k()}function OZ(d,c){d=sn(d);if(!c)return PZ.v4().replace(/-/g,"").toLowerCase();delete d._rev_tree;return RJ.hash(JSON.stringify(d))}function hA(d){d=d.rev_tree.slice();
for(var c;c=d.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var k=f.length;h<k;h++)d.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(e!==f?e:b!==c?b<c:n<h)){var n=h;var b=c;var e=f}}return b+"-"+n}function iA(d,c){d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[2];h=c(0===n.length,f,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)d.push({pos:f+1,ids:n[k],ctx:h})}}function eca(d,c){return d.pos-c.pos}function eQ(d){var c=[];iA(d,function(f,k,n,b,e){f&&c.push({rev:k+
"-"+n,pos:k,opts:e})});c.sort(eca).reverse();d=0;for(var h=c.length;d<h;d++)delete c[d].pos;return c}function fQ(d){var c=hA(d);d=eQ(d.rev_tree);for(var h=[],f=0,k=d.length;f<k;f++){var n=d[f];n.rev===c||n.opts.deleted||h.push(n.rev)}return h}function fca(d){var c=[];iA(d.rev_tree,function(h,f,k,n,b){"available"!==b.status||h||(c.push(f+"-"+k),b.status="missing")});return c}function QZ(d){var c=[];d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[0],b=k[1];k=k[2];var e=0===k.length;h=h.history?
h.history.slice():[];h.push({id:n,opts:b});e&&c.push({pos:f+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)d.push({pos:f+1,ids:k[n],history:h})}return c.reverse()}function gca(d,c){return d.pos-c.pos}function RZ(d,c){for(var h,f,k=d.length;c<k;c++){var n=d[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function hca(d,c){return d[0]<c[0]?-1:1}function SZ(d,c){c=[{tree1:d,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),k=f.tree1;f=f.tree2;if(k[1].status||f[1].status)k[1].status="available"===
k[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(k[2][0]){for(var b=!1,e=0;e<k[2].length;e++)k[2][e][0]===f[2][n][0]&&(c.push({tree1:k[2][e],tree2:f[2][n]}),b=!0);if(!b){h="new_branch";b=k[2];e=f[2][n];for(var m,a=b,g=e,l=hca,r=0,v=a.length;r<v;)m=r+v>>>1,0>l(a[m],g)?r=m+1:v=m;b.splice(r,0,e)}}else h="new_leaf",k[2][0]=f[2][n]}return{conflicts:h,tree:d}}function TZ(d,c,h){var f=[],k=!1,n=!1;if(!d.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,
e=d.length;b<e;b++){var m=d[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=SZ(m.ids,c.ids),f.push({pos:m.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],r=[];for(r.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===g.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=SZ(l.ids,g.ids),l.parent[2][l.parentIdx]=
n.tree,f.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):f.push(m)}else f.push(m)}n||f.push(c);f.sort(gca);return{tree:f,conflicts:k||"internal_node"}}function ica(d,c){d=QZ(d);for(var h,f,k=0,n=d.length;k<n;k++){var b=d[k],e=b.ids;if(e.length>c){h||(h={});var m=e.length-c;var a={pos:b.pos+m,ids:RZ(e,m)};for(var g=0;g<m;g++)h[b.pos+g+"-"+e[g].id]=!0}else a={pos:b.pos,ids:RZ(e,0)};f=f?TZ(f,a,!0).tree:[a]}h&&iA(f,function(l,r,v){delete h[r+"-"+v]});return{tree:f,revs:h?Object.keys(h):[]}}function UZ(d,
c,h){d=TZ(d,c);h=ica(d.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:d.conflicts}}function jca(d){return d.ids}function ww(d,c){c||(c=hA(d));c=c.substring(c.indexOf("-")+1);d=d.rev_tree.map(jca);for(var h;h=d.pop();){if(h[0]===c)return!!h[1].deleted;d=d.concat(h[2])}}function jA(d){return/^_local/.test(d)}function kca(d,c){for(var h=c.rev_tree.slice(),f;f=h.pop();){var k=f.pos,n=f.ids,b=n[0],e=n[1];n=n[2];var m=0===n.length;f=f.history?f.history.slice():[];f.push({id:b,pos:k,opts:e});if(m)for(e=
0,m=f.length;e<m;e++){var a=f[e];if(a.pos+"-"+a.id===d)return k+"-"+b}b=0;for(e=n.length;b<e;b++)h.push({pos:k+1,ids:n[b],history:f})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+d);}function BF(d,c,h){function f(){k.cancel()}vq.EventEmitter.call(this);var k=this;this.db=d;c=c?sn(c):{};var n=c.complete=CZ(function(e,m){e?(m=k,0<("listenerCount"in m?m.listenerCount("error"):vq.EventEmitter.listenerCount(m,"error"))&&k.emit("error",e)):k.emit("complete",m);k.removeAllListeners();
d.removeListener("destroyed",f)});h&&(k.on("complete",function(e){h(null,e)}),k.on("error",h));d.once("destroyed",f);c.onChange=function(e,m,a){if(!k.isCancelled)try{k.emit("change",e,m,a)}catch(g){os("error",'Error in .on("change", function):',g)}};var b=new Promise(function(e,m){c.complete=function(a,g){a?m(a):e(g)}});k.once("cancel",function(){d.removeListener("destroyed",f);c.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=b["catch"].bind(b);this.then(function(e){n(null,
e)},n);d.taskqueue.isReady?k.validateChanges(c):d.taskqueue.addTask(function(e){e?c.complete(e):k.isCancelled?k.emit("cancel"):k.validateChanges(c)})}function lca(d,c,h){var f=[{rev:d._rev}];"all_docs"===h.style&&(f=eQ(c.rev_tree).map(function(k){return{rev:k.rev}}));f={id:c.id,changes:f,doc:d};ww(c,d._rev)&&(f.deleted=!0);h.conflicts&&(f.doc._conflicts=fQ(c),f.doc._conflicts.length||delete f.doc._conflicts);return f}function gQ(d,c){return function(h,f){h||f[0]&&f[0].error?(h=h||f[0],h.docId=c,d(h)):
d(null,f.length?f[0]:f)}}function mca(d){for(var c=0;c<d.length;c++){var h=d[c];if(h._deleted)delete h._attachments;else if(h._attachments)for(var f=Object.keys(h._attachments),k=0;k<f.length;k++){var n=f[k];h._attachments[n]=zF(h._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function nca(d,c){var h=d._id;var f=c._id;h=h<f?-1:h>f?1:0;if(0!==h)return h;d=d._revisions?d._revisions.start:0;c=c._revisions?c._revisions.start:0;return d<c?-1:d>c?1:0}function oca(d){var c={},
h=[];iA(d,function(f,k,n,b){k=k+"-"+n;f&&(c[k]=0);void 0!==b&&h.push({from:b,to:k});return k});h.reverse();h.forEach(function(f){c[f.from]=void 0===c[f.from]?1+c[f.to]:Math.min(c[f.from],1+c[f.to])});return c}function pca(d){var c="limit"in d?d.keys.slice(d.skip,d.limit+d.skip):0<d.skip?d.keys.slice(d.skip):d.keys;d.keys=c;d.skip=0;delete d.limit;d.descending&&(c.reverse(),d.descending=!1)}function VZ(d){var c=d._compactionQueue[0],h=c.opts,f=c.callback;d.get("_local/compaction").catch(function(){return!1}).then(function(k){k&&
k.last_seq&&(h.last_seq=k.last_seq);d._compact(h,function(n,b){n?f(n):f(null,b);Yu(function(){d._compactionQueue.shift();d._compactionQueue.length&&VZ(d)})})})}function vl(){vq.EventEmitter.call(this);for(var d in vl.prototype)"function"===typeof this[d]&&(this[d]=this[d].bind(this))}function CF(){this.failed=this.isReady=!1;this.queue=[]}function qca(d,c){var h=d.match(/([a-z-]*):\/\/(.*)/);if(h)return{name:/https?/.test(h[1])?h[1]+"://"+h[2]:h[2],adapter:h[1]};var f=Mi.adapters,k=Mi.preferredAdapters;
h=Mi.prefix;c=c.adapter;if(!c)for(var n=0;n<k.length;++n)if(c=k[n],"idb"===c&&"websql"in f&&AF&&localStorage["_pouch__websqldb_"+h+d])os("log",'PouchDB is downgrading "'+d+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;f=f[c];return{name:(f&&"use_prefix"in f?f.use_prefix:1)?h+d:d,adapter:c}}function rca(d){function c(f){d.removeListener("closed",h);f||d.constructor.emit("destroyed",d.name)}function h(){d.removeListener("destroyed",c);d.constructor.emit("unref",
d)}d.once("destroyed",c);d.once("closed",h);d.constructor.emit("ref",d)}function Mi(d,c){if(!(this instanceof Mi))return new Mi(d,c);var h=this;c=c||{};d&&"object"===typeof d&&(c=d,d=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=sn(c);h.auto_compaction=c.auto_compaction;h.prefix=Mi.prefix;if("string"!==typeof d)throw Error("Missing/invalid DB name");var f=qca((c.prefix||"")+d,c);c.name=f.name;c.adapter=c.adapter||f.adapter;h.name=d;h._adapter=c.adapter;
Mi.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!Mi.adapters[c.adapter]||!Mi.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);vl.call(h);h.taskqueue=new CF;h.adapter=c.adapter;Mi.adapters[c.adapter].call(h,c,function(k){if(k)return h.taskqueue.fail(k);rca(h);h.emit("created",h);Mi.emit("created",h.name);h.taskqueue.ready(h)})}function WZ(d,c){for(var h=0,f=c.length;h<f&&(d=d[c[h]],d);h++);return d}function XZ(d){for(var c=[],h="",f=0,k=d.length;f<k;f++){var n=d[f];
"."===n?0<f&&"\\"===d[f-1]?h=h.substring(0,h.length-1)+".":(c.push(h),h=""):h+=n}c.push(h);return c}function sca(d){return d[Object.keys(d)[0]]}function DF(d){var c={};d.forEach(function(h){Object.keys(h).forEach(function(f){var k=h[f];"object"!==typeof k&&(k={$eq:k});if(-1<YZ.indexOf(f))c[f]=k instanceof Array?k.map(function(b){return DF([b])}):DF([k]);else{var n=c[f]=c[f]||{};Object.keys(k).forEach(function(b){var e=k[b];"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?
"$gte"===b?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):"undefined"!==typeof n.$gt?"$gte"===b?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[b]=e):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):"undefined"!==typeof n.$lt?"$lte"===b?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[b]=e):"$ne"===b?"$ne"in n?n.$ne.push(e):n.$ne=[e]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,
delete n.$lte,delete n.$ne,n.$eq=e):n[b]=e})}})});return c}function ZZ(d){for(var c in d){if(Array.isArray(d))for(var h in d)d[h].$and&&(d[h]=DF(d[h].$and));var f=d[c];"object"===typeof f&&ZZ(f)}return d}function $Z(d,c){for(var h in d){"$and"===h&&(c=!0);var f=d[h];"object"===typeof f&&(c=$Z(f,c))}return c}function tca(d){var c=sn(d);d=!1;$Z(c,!1)&&(c=ZZ(c),"$and"in c&&(c=DF(c.$and)),d=!0);["$or","$nor"].forEach(function(b){b in c&&c[b].forEach(function(e){for(var m=Object.keys(e),a=0;a<m.length;a++){var g=
m[a],l=e[g];if("object"!==typeof l||null===l)e[g]={$eq:l}}})});"$not"in c&&(c.$not=DF([c.$not]));for(var h=Object.keys(c),f=0;f<h.length;f++){var k=h[f],n=c[k];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!d&&(n.$ne=[n.$ne]);c[k]=n}return c}function Vn(d,c){if(d===c)return 0;d=kA(d);c=kA(c);var h=hQ(d),f=hQ(c);if(0!==h-f)return h-f;switch(typeof d){case "number":return d-c;case "boolean":return d<c?-1:1;case "string":return d===c?0:d>c?1:-1}if(Array.isArray(d))a:{h=Math.min(d.length,c.length);
for(f=0;f<h;f++){var k=Vn(d[f],c[f]);if(0!==k){d=k;break a}}d=d.length===c.length?0:d.length>c.length?1:-1}else a:{h=Object.keys(d);f=Object.keys(c);k=Math.min(h.length,f.length);for(var n=0;n<k;n++){var b=Vn(h[n],f[n]);if(0!==b){d=b;break a}b=Vn(d[h[n]],c[f[n]]);if(0!==b){d=b;break a}}d=h.length===f.length?0:h.length>f.length?1:-1}return d}function kA(d){switch(typeof d){case "undefined":return null;case "number":if(Infinity===d||-Infinity===d||isNaN(d))return null;break;case "object":var c=d;if(Array.isArray(d)){var h=
d.length;d=Array(h);for(var f=0;f<h;f++)d[f]=kA(c[f])}else{if(d instanceof Date)return d.toJSON();if(null!==d)for(h in d={},c)c.hasOwnProperty(h)&&(f=c[h],"undefined"!==typeof f&&(d[h]=kA(f)))}}return d}function uca(d){if(null!==d)switch(typeof d){case "boolean":return d?1:0;case "number":if(0===d)d="1";else{var c=d.toExponential().split(/e\+?/),h=parseInt(c[1],10);d=0>d;h=((d?-h:h)- -324).toString();for(var f="",k=3-h.length;f.length<k;)f+="0";h=(d?"0":"2")+(""+(f+h));c=Math.abs(parseFloat(c[0]));
d&&(c=10-c);d=c.toFixed(20);d=d.replace(/\.?0+$/,"");d=h+=""+d}return d;case "string":return d.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(d);c=n?d:Object.keys(d);h=-1;f=c.length;k="";if(n)for(;++h<f;)k+=tt(c[h]);else for(;++h<f;)n=c[h],k+=tt(n)+tt(d[n]);return k}return""}function tt(d){d=kA(d);return hQ(d)+""+uca(d)+"\x00"}function hQ(d){var c=["boolean","number","string","object"].indexOf(typeof d);if(~c)return null===
d?1:Array.isArray(d)?5:3>c?c+2:c+3;if(Array.isArray(d))return 5}function vca(d){function c(h){return d.map(function(f){f=Object.keys(f)[0];f=XZ(f);return WZ(h,f)})}return function(h,f){var k=c(h.doc),n=c(f.doc);k=Vn(k,n);if(0!==k)return k;h=h.doc._id;f=f.doc._id;return h<f?-1:h>f?1:0}}function wca(d,c,h){d=d.filter(function(k){return PC(k.doc,c.selector,h)});if(c.sort){var f=vca(c.sort);d=d.sort(f);"string"!==typeof c.sort[0]&&"desc"===sca(c.sort[0])&&(d=d.reverse())}if("limit"in c||"skip"in c)f=
c.skip||0,d=d.slice(f,("limit"in c?c.limit:d.length)+f);return d}function PC(d,c,h){return h.every(function(f){var k=c[f],n=XZ(f),b=WZ(d,n);return-1<YZ.indexOf(f)?xca(f,k,d):iQ(k,d,n,b)})}function iQ(d,c,h,f){return d?"object"===typeof d?Object.keys(d).every(function(k){var n=d[k];if(!a_[k])throw Error('unknown operator "'+k+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return a_[k](c,n,h,f)}):d===f:!0}function xca(d,
c,h){return"$or"===d?c.some(function(f){return PC(h,f,Object.keys(f))}):"$not"===d?!PC(h,c,Object.keys(c)):!c.find(function(f){return PC(h,f,Object.keys(f))})}function EF(d){return"undefined"!==typeof d&&null!==d}function lA(d){return"undefined"!==typeof d}function b_(d,c){return c.some(function(h){return d instanceof Array?-1<d.indexOf(h):d===h})}function yca(d,c){return c.every(function(h){return-1<d.indexOf(h)})}function zca(d,c){switch(c){case "null":return null===d;case "boolean":return"boolean"===
typeof d;case "number":return"number"===typeof d;case "string":return"string"===typeof d;case "array":return d instanceof Array;case "object":return"[object Object]"==={}.toString.call(d)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function Aca(d,c){if(d.selector&&d.filter&&"_selector"!==d.filter)return c(Error('selector invalid for filter "'+("string"===typeof d.filter?d.filter:"function")+'"'));c()}function Bca(d){d.view&&!d.filter&&
(d.filter="_view");d.selector&&!d.filter&&(d.filter="_selector");d.filter&&"string"===typeof d.filter&&("_view"===d.filter?d.view=JZ(d.view):d.filter=JZ(d.filter))}function Cca(d,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!Xu(d.db)}function Dca(d,c){var h=c.complete;if("_view"===c.filter){if(!c.view||"string"!==typeof c.view){var f=Ti(OJ,"`view` filter parameter not found or invalid.");return h(f)}var k=YP(c.view);d.db.get("_design/"+k[0],function(b,e){if(d.isCancelled)return h(null,
{status:"cancelled"});if(b)return h(OC(b));b=e&&e.views&&e.views[k[1]]&&e.views[k[1]].map;if(!b)return h(Ti(ut,e.views?"missing json key: "+k[1]:"missing json key: views"));e=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");e=ZP(e,{});c.filter=e;d.doChanges(c)})}else if(c.selector)c.filter=function(b){var e=c.selector;if("object"!==
typeof e)throw Error("Selector error: expected a JSON object");e=tca(e);return(b=wca([{doc:b}],{selector:e},Object.keys(e)))&&1===b.length},d.doChanges(c);else{var n=YP(c.filter);d.db.get("_design/"+n[0],function(b,e){if(d.isCancelled)return h(null,{status:"cancelled"});if(b)return h(OC(b));b=e&&e.filters&&e.filters[n[1]];if(!b)return h(Ti(ut,e&&e.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=ZP('"use strict";\nreturn '+b+";",{});d.doChanges(c)})}}function c_(d){return d.reduce(function(c,
h){c[h]=!0;return c},{})}function d_(d){if(!/^\d+-/.test(d))return Ti(e_);var c=d.indexOf("-"),h=d.substring(0,c);d=d.substring(c+1);return{prefix:parseInt(h,10),id:d}}function f_(d,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};d._deleted&&(f.deleted=!0);if(c){d._id||(d._id=SJ());var k=OZ(d,h.deterministic_revs);if(d._rev){c=d_(d._rev);if(c.error)return c;d._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,f,[]]]]}];var n=c.prefix+1}else d._rev_tree=[{pos:1,ids:[k,f,[]]}],
n=1}else{if(d._revisions){k=d._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],f,[]];h=1;for(var b=k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];d._rev_tree=[{pos:n,ids:c}];n=d._revisions.start;k=d._revisions.ids[0]}if(!d._rev_tree){c=d_(d._rev);if(c.error)return c;n=c.prefix;k=c.id;d._rev_tree=[{pos:n,ids:[k,f,[]]}]}}HZ(d._id);d._rev=n+"-"+k;f={metadata:{},data:{}};for(var e in d)if(Object.prototype.hasOwnProperty.call(d,e)){if((n="_"===e[0])&&!Eca[e])throw d=Ti(g_,e),d.message=g_.message+
": "+e,d;n&&!Fca[e]?f.metadata[e.slice(1)]=d[e]:f.data[e]=d[e]}return f}function Gca(d,c,h){try{var f=atob(d.data)}catch(k){f={error:Ti(h_,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);d.length=f.length;d.data="blob"===c?aQ(f,d.content_type):"base64"===c?btoa(f):f;dQ(f,function(k){d.digest="md5-"+k;h()})}function Hca(d,c,h){dQ(d.data,function(f){d.digest="md5-"+f;d.length=d.data.size||d.data.length||0;"binary"===c?NZ(d.data,function(k){d.data=k;h()}):"base64"===c?cQ(d.data,
function(k){d.data=k;h()}):h()})}function Ica(d,c,h){if(d.stub)return h();"string"===typeof d.data?Gca(d,c,h):Hca(d,c,h)}function Jca(d,c,h){function f(){k++;d.length===k&&(n?h(n):h())}if(!d.length)return h();var k=0,n;d.forEach(function(b){function e(l){n=l;a++;a===m.length&&f()}var m=b.data&&b.data._attachments?Object.keys(b.data._attachments):[],a=0;if(!m.length)return f();for(var g in b.data._attachments)b.data._attachments.hasOwnProperty(g)&&Ica(b.data._attachments[g],c,e)})}function Kca(d,c,
h,f,k,n,b,e,m){d=d||1E3;var a=e.new_edits,g=new kr,l=0,r=c.length;c.forEach(function(v,y){if(v._id&&jA(v._id))h[v._deleted?"_removeLocal":"_putLocal"](v,{ctx:k},function(E,F){n[y]=E||F;++l===r&&m&&m()});else{var A=v.metadata.id;g.has(A)?(r--,g.get(A).push([v,y])):g.set(A,[[v,y]])}});g.forEach(function(v,y){function A(){++F<v.length?E():++l===r&&m&&m()}function E(){var H=v[F],I=H[0];H=H[1];if(f.has(y)){var M=d,N=f.get(y);b:{var X=I.metadata.rev;var W=N.rev_tree.slice();var ea=X.split("-");X=parseInt(ea[0],
10);ea=ea[1];for(var Aa;Aa=W.pop();){if(Aa.pos===X&&Aa.ids[0]===ea){W=!0;break b}for(var Ka=Aa.ids[2],K=0,aa=Ka.length;K<aa;K++)W.push({pos:Aa.pos+1,ids:Ka[K]})}W=!1}W&&!a?(n[H]=I,A()):(ea=N.winningRev||hA(N),W="deleted"in N?N.deleted:ww(N,ea),X="deleted"in I.metadata?I.metadata.deleted:ww(I.metadata),Aa=/^1-/.test(I.metadata.rev),W&&!X&&a&&Aa&&(Aa=I.data,Aa._rev=ea,Aa._id=I.metadata.id,I=f_(Aa,a)),ea=UZ(N.rev_tree,I.metadata.rev_tree[0],M),a&&(W&&X&&"new_leaf"!==ea.conflicts||!W&&"new_leaf"!==ea.conflicts||
W&&!X&&"new_branch"===ea.conflicts)?(I=Ti(QC),n[H]=I,A()):(M=I.metadata.rev,I.metadata.rev_tree=ea.tree,I.stemmedRevs=ea.stemmedRevs||[],N.rev_map&&(I.metadata.rev_map=N.rev_map),N=hA(I.metadata),X=ww(I.metadata,N),W=W===X?0:W<X?-1:1,M=M===N?X:ww(I.metadata,M),b(I,N,X,M,!0,W,H,A)))}else N=UZ([],I.metadata.rev_tree[0],d),I.metadata.rev_tree=N.tree,I.stemmedRevs=N.stemmedRevs||[],N=hA(I.metadata),M=ww(I.metadata,N),"was_delete"in e&&M?(n[H]=Ti(ut,"deleted"),A()):a&&"missing"===I.metadata.rev_tree[0].ids[1].status?
(I=Ti(QC),n[H]=I,A()):b(I,N,M,M,!1,M?0:1,H,A)}var F=0;E()})}function Zu(d){return function(c){var h="unknown_error";c.target&&c.target.error&&(h=c.target.error.name||c.target.error.message);d(Ti(jQ,h,c.type))}}function kQ(d,c,h){try{var f=JSON.stringify(d)}catch(k){f=i_.stringify(d)}return{data:f,winningRev:c,deletedOrLocal:h?"1":"0",seq:d.seq,id:d.id}}function mA(d){if(!d)return null;var c=d.data;try{var h=JSON.parse(c)}catch(f){h=i_.parse(c)}h.winningRev=d.winningRev;h.deleted="1"===d.deletedOrLocal;
h.seq=d.seq;return h}function TJ(d){if(!d)return d;var c=d._doc_id_rev.lastIndexOf(":");d._id=d._doc_id_rev.substring(0,c-1);d._rev=d._doc_id_rev.substring(c+1);delete d._doc_id_rev;return d}function j_(d,c,h,f){h?d?"string"!==typeof d?f(d):f(bQ(d,c)):f($P([""],{type:c})):d?"string"!==typeof d?MZ(d,function(k){f(btoa(k))}):f(d):f("")}function k_(d,c,h,f){function k(e,m){var a=e._attachments[m];e=a.digest;h.objectStore("attach-store").get(e).onsuccess=function(g){a.body=g.target.result.body;++b===
n.length&&f&&f()}}var n=Object.keys(d._attachments||{});if(!n.length)return f&&f();var b=0;n.forEach(function(e){c.attachments&&c.include_docs?k(d,e):(d._attachments[e].stub=!0,++b===n.length&&f&&f())})}function lQ(d,c){return Promise.all(d.map(function(h){if(h.doc&&h.doc._attachments){var f=Object.keys(h.doc._attachments);return Promise.all(f.map(function(k){var n=h.doc._attachments[k];if("body"in n){var b=n.body,e=n.content_type;return new Promise(function(m){j_(b,e,c,function(a){h.doc._attachments[k]=
RC(zF(n,["digest","content_type"]),{data:a});m()})})}}))}}))}function l_(d,c,h){function f(){k.length&&k.forEach(function(a){e.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(g){g.target.result||b.delete(a)}})}var k=[],n=h.objectStore("by-sequence"),b=h.objectStore("attach-store"),e=h.objectStore("attach-seq-store"),m=d.length;d.forEach(function(a){n.index("_doc_id_rev").getKey(c+"::"+a).onsuccess=function(g){g=g.target.result;"number"!==typeof g?(m--,m||
f()):(n.delete(g),e.index("seq").openCursor(IDBKeyRange.only(g)).onsuccess=function(l){if(l=l.target.result){var r=l.value.digestSeq.split("::")[0];k.push(r);e.delete(l.primaryKey);l.continue()}else m--,m||f()})}})}function vt(d,c,h){try{return{txn:d.transaction(c,h)}}catch(f){return{error:f}}}function Lca(d,c,h,f,k,n){function b(){var Cb=vt(k,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(Cb.error)return n(Cb.error);M=Cb.txn;M.onabort=
Zu(n);M.ontimeout=Zu(n);M.oncomplete=l;N=M.objectStore("document-store");X=M.objectStore("by-sequence");W=M.objectStore("attach-store");ea=M.objectStore("attach-seq-store");Aa=M.objectStore("meta-store");Aa.get("meta-store").onsuccess=function(va){K=va.target.result;a()};v(function(va){if(va)return hb=!0,n(va);g()})}function e(){U=!0;a()}function m(){Kca(d.revs_limit,I,f,oa,M,fa,y,h,e)}function a(){K&&U&&(K.docCount+=pa,Aa.put(K))}function g(){function Cb(Lb){(Lb=mA(Lb.target.result))&&oa.set(Lb.id,
Lb);++va===I.length&&m()}if(I.length)for(var va=0,ma=0,ua=I.length;ma<ua;ma++){var Ma=I[ma];Ma._id&&jA(Ma._id)?++va===I.length&&m():N.get(Ma.metadata.id).onsuccess=Cb}}function l(){hb||(FF.notify(f._meta.name),n(null,fa))}function r(Cb,va){W.get(Cb).onsuccess=function(ma){ma.target.result?va():(ma=Ti(Mca,"unknown stub attachment with digest "+Cb),ma.status=412,va(ma))}}function v(Cb){var va=[];I.forEach(function(Ma){Ma.data&&Ma.data._attachments&&Object.keys(Ma.data._attachments).forEach(function(Lb){Lb=
Ma.data._attachments[Lb];Lb.stub&&va.push(Lb.digest)})});if(!va.length)return Cb();var ma=0,ua;va.forEach(function(Ma){r(Ma,function(Lb){Lb&&!ua&&(ua=Lb);++ma===va.length&&Cb(ua)})})}function y(Cb,va,ma,ua,Ma,Lb,ic,Vb){Cb.metadata.winningRev=va;Cb.metadata.deleted=ma;var jc=Cb.data;jc._id=Cb.metadata.id;jc._rev=Cb.metadata.rev;ua&&(jc._deleted=!0);if(jc._attachments&&Object.keys(jc._attachments).length)return E(Cb,va,ma,Ma,ic,Vb);pa+=Lb;a();A(Cb,va,ma,Ma,ic,Vb)}function A(Cb,va,ma,ua,Ma,Lb){function ic(zd){var ld=
Cb.stemmedRevs||[];ua&&f.auto_compaction&&(ld=ld.concat(fca(Cb.metadata)));ld&&ld.length&&l_(ld,Cb.metadata.id,M);Pc.seq=zd.target.result;zd=kQ(Pc,va,ma);N.put(zd).onsuccess=Vb}function Vb(){fa[Ma]={ok:!0,id:Pc.id,rev:Pc.rev};oa.set(Cb.metadata.id,Cb.metadata);F(Cb,Pc.seq,Lb)}var jc=Cb.data,Pc=Cb.metadata;jc._doc_id_rev=Pc.id+"::"+Pc.rev;delete jc._id;delete jc._rev;var Rb=X.put(jc);Rb.onsuccess=ic;Rb.onerror=function(zd){zd.preventDefault();zd.stopPropagation();X.index("_doc_id_rev").getKey(jc._doc_id_rev).onsuccess=
function(ld){X.put(jc,ld.target.result).onsuccess=ic}}}function E(Cb,va,ma,ua,Ma,Lb){function ic(){jc===Pc.length&&A(Cb,va,ma,ua,Ma,Lb)}function Vb(){jc++;ic()}var jc=0,Pc=Object.keys(Cb.data._attachments);Pc.forEach(function(Rb){Rb=Cb.data._attachments[Rb];if(Rb.stub)jc++,ic();else{var zd=Rb.data;delete Rb.data;Rb.revpos=parseInt(va,10);H(Rb.digest,zd,Vb)}})}function F(Cb,va,ma){function ua(){++Lb===ic.length&&ma()}function Ma(jc){jc=ea.put({seq:va,digestSeq:Cb.data._attachments[jc].digest+"::"+
va});jc.onsuccess=ua;jc.onerror=function(Pc){Pc.preventDefault();Pc.stopPropagation();ua()}}var Lb=0,ic=Object.keys(Cb.data._attachments||{});if(!ic.length)return ma();for(var Vb=0;Vb<ic.length;Vb++)Ma(ic[Vb])}function H(Cb,va,ma){W.count(Cb).onsuccess=function(ua){if(ua.target.result)return ma();W.put({digest:Cb,body:va}).onsuccess=ma}}var I=c.docs,M,N,X,W,ea,Aa,Ka,K;c=0;for(var aa=I.length;c<aa;c++){var T=I[c];T._id&&jA(T._id)||(T=I[c]=f_(T,h.new_edits,d),T.error&&!Ka&&(Ka=T))}if(Ka)return n(Ka);
var U=!1,pa=0,fa=Array(I.length),oa=new kr,hb=!1;Jca(I,f._meta.blobSupport?"blob":"base64",function(Cb){if(Cb)return n(Cb);b()})}function m_(d,c,h,f,k){function n(r){g=r.target.result;a&&k(a,g,l)}function b(r){a=r.target.result;g&&k(a,g,l)}function e(){if(!a.length)return k();var r=a[a.length-1];if(c&&c.upper)try{var v=IDBKeyRange.bound(r,c.upper,!0,c.upperOpen)}catch(y){if("DataError"===y.name&&0===y.code)return k()}else v=IDBKeyRange.lowerBound(r,!0);c=v;g=a=null;d.getAll(c,f).onsuccess=n;d.getAllKeys(c,
f).onsuccess=b}function m(r){r=r.target.result;if(!r)return k();k([r.key],[r.value],r)}-1===f&&(f=1E3);var a,g;if("function"===typeof d.getAll&&"function"===typeof d.getAllKeys&&1<f&&!h){var l={"continue":e};d.getAll(c,f).onsuccess=n;d.getAllKeys(c,f).onsuccess=b}else h?d.openCursor(c,"prev").onsuccess=m:d.openCursor(c).onsuccess=m}function Nca(d,c,h){if("function"===typeof d.getAll)d.getAll(c).onsuccess=h;else{var f=[];d.openCursor(c).onsuccess=function(k){(k=k.target.result)?(f.push(k.value),k.continue()):
h({target:{result:f}})}}}function Oca(d,c,h){var f=Array(d.length),k=0;d.forEach(function(n,b){c.get(n).onsuccess=function(e){f[b]=e.target.result?e.target.result:{key:n,error:"not_found"};k++;k===d.length&&h(d,f,{})}})}function Pca(d,c,h,f,k){try{if(d&&c)return k?IDBKeyRange.bound(c,d,!h,!1):IDBKeyRange.bound(d,c,!1,!h);if(d)return k?IDBKeyRange.upperBound(d):IDBKeyRange.lowerBound(d);if(c)return k?IDBKeyRange.lowerBound(c,!h):IDBKeyRange.upperBound(c,!h);if(f)return IDBKeyRange.only(f)}catch(n){return{error:n}}return null}
function Qca(d,c,h){function f(W,ea){W.openCursor(null,"prev").onsuccess=function(Aa){Aa=Aa.target.result;var Ka=void 0;Aa&&Aa.key&&(Ka=Aa.key);return ea({target:{result:[Ka]}})}}function k(W,ea,Aa){I.get(W.id+"::"+Aa).onsuccess=function(Ka){ea.doc=TJ(Ka.target.result)||{};d.conflicts&&(Ka=fQ(W),Ka.length&&(ea.doc._conflicts=Ka));k_(ea.doc,d,H)}}function n(W){for(var ea=0,Aa=W.length;ea<Aa&&M.length!==y;ea++){var Ka=W[ea];if(Ka.error&&r)M.push(Ka);else{var K=mA(Ka);Ka=K.winningRev;var aa={id:K.id,
key:K.id,value:{rev:Ka}};K.deleted?r&&(M.push(aa),aa.value.deleted=!0,aa.doc=null):0>=v--&&(M.push(aa),d.include_docs&&k(K,aa,Ka))}}}function b(W,ea,Aa){Aa&&(n(ea),M.length<y&&Aa.continue())}function e(W){W=W.target.result;d.descending&&(W=W.reverse());n(W)}function m(){var W={total_rows:N,offset:d.skip,rows:M};d.update_seq&&void 0!==X&&(W.update_seq=X);h(null,W)}var a="startkey"in d?d.startkey:!1,g="endkey"in d?d.endkey:!1,l="key"in d?d.key:!1,r="keys"in d?d.keys:!1,v=d.skip||0,y="number"===typeof d.limit?
d.limit:-1,A=!1!==d.inclusive_end,E,F;if(!r&&(F=(E=Pca(a,g,A,l,d.descending))&&E.error)&&("DataError"!==F.name||0!==F.code))return h(Ti(jQ,F.name,F.message));a=["document-store","by-sequence","meta-store"];d.attachments&&a.push("attach-store");c=vt(c,a,"readonly");if(c.error)return h(c.error);var H=c.txn;H.oncomplete=function(){d.attachments?lQ(M,d.binary).then(m):m()};H.onabort=Zu(h);c=H.objectStore("document-store");a=H.objectStore("by-sequence");g=H.objectStore("meta-store");var I=a.index("_doc_id_rev"),
M=[],N,X;g.get("meta-store").onsuccess=function(W){N=W.target.result.docCount};d.update_seq&&f(a,function(W){W.target.result&&0<W.target.result.length&&(X=W.target.result[0])});if(!F&&0!==y){if(r)return Oca(d.keys,c,b);if(-1===y)return Nca(c,E,e);m_(c,E,d.descending,y+v,b)}}function Rca(d){return(new Promise(function(c){var h=$P([""]);h=d.objectStore("detect-blob-support").put(h,"key");h.onsuccess=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),k=navigator.userAgent.match(/Edge\//);c(k||
!f||43<=parseInt(f[1],10))};h.onerror=d.onabort=function(f){f.preventDefault();f.stopPropagation();c(!1)}})).catch(function(){return!1})}function Sca(d,c){d.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(h){c(h.target.result)}}function Tca(d,c,h,f){try{d(c,h)}catch(k){f.emit("error",k)}}function n_(){!mQ&&nQ.length&&(mQ=!0,nQ.shift()())}function Uca(d,c,h){nQ.push(function(){d(function(f,k){Tca(c,f,k,h);mQ=!1;Yu(function(){n_()})})});n_()}function Vca(d,
c,h,f){function k(H,I,M,N){if(M.seq!==I)return N();if(M.winningRev===H._rev)return N(M,H);F.get(H._id+"::"+M.winningRev).onsuccess=function(X){N(M,TJ(X.target.result))}}function n(H,I,M){if(m&&!m.has(H._id))return M();var N=y.get(H._id);if(N)return k(H,I,N,M);E.get(H._id).onsuccess=function(X){N=mA(X.target.result);y.set(H._id,N);k(H,I,N,M)}}function b(){d.complete(null,{results:l,last_seq:a})}d=sn(d);if(d.continuous){var e=h+":"+SJ();FF.addListener(h,e,c,d);FF.notify(h);return{cancel:function(){FF.removeListener(h,
e)}}}var m=d.doc_ids&&new GF(d.doc_ids);d.since=d.since||0;var a=d.since,g="limit"in d?d.limit:-1;0===g&&(g=1);var l=[],r=0,v=XP(d),y=new kr;c=["document-store","by-sequence"];d.attachments&&c.push("attach-store");f=vt(f,c,"readonly");if(f.error)return d.complete(f.error);var A=f.txn;A.onabort=Zu(d.complete);A.oncomplete=function(){!d.continuous&&d.attachments?lQ(l).then(b):b()};f=A.objectStore("by-sequence");var E=A.objectStore("document-store");var F=f.index("_doc_id_rev");c=d.since&&!d.descending?
IDBKeyRange.lowerBound(d.since,!0):null;m_(f,c,d.descending,g,function(H,I,M){function N(Ka,K){var aa=d.processChange(K,Ka,d);a=aa.seq=Ka.seq;Ka=v(aa);if("object"===typeof Ka)return Promise.reject(Ka);if(!Ka)return Promise.resolve();r++;d.return_docs&&l.push(aa);return d.attachments&&d.include_docs?new Promise(function(T){k_(K,d,A,function(){lQ([aa],d.binary).then(function(){T(aa)})})}):Promise.resolve(aa)}function X(){for(var Ka=[],K=0,aa=W.length;K<aa&&r!==g;K++){var T=W[K];T&&Ka.push(N(ea[K],T))}Promise.all(Ka).then(function(U){for(var pa=
0,fa=U.length;pa<fa;pa++)if(U[pa])d.onChange(U[pa])}).catch(d.complete);r!==g&&M.continue()}if(M&&H.length){var W=Array(H.length),ea=Array(H.length),Aa=0;I.forEach(function(Ka,K){Ka=TJ(Ka);n(Ka,H[K],function(aa,T){ea[K]=aa;W[K]=T;++Aa===H.length&&X()})})}})}function o_(d,c){var h=this;Uca(function(f){Wca(h,d,f)},c,h.constructor)}function Wca(d,c,h){function f(r){var v=r.createObjectStore("document-store",{keyPath:"id"});r.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev",
"_doc_id_rev",{unique:!0});r.createObjectStore("attach-store",{keyPath:"digest"});r.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});r.createObjectStore("detect-blob-support");v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});r.createObjectStore("local-store",{keyPath:"_id"});r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function k(r,v){var y=r.objectStore("document-store");y.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});y.openCursor().onsuccess=function(A){if(A=A.target.result){var E=A.value,F=ww(E);E.deletedOrLocal=F?"1":"0";y.put(E);A.continue()}else v()}}function n(r,v){var y=r.objectStore("local-store"),A=r.objectStore("document-store"),E=r.objectStore("by-sequence");A.openCursor().onsuccess=function(F){var H=F.target.result;if(H){var I=H.value;F=I.id;var M=jA(F);I=hA(I);if(M){var N=F+"::"+I;M=F+"::";I=F+"::~";F=E.index("_doc_id_rev");M=IDBKeyRange.bound(M,I,!1,!1);var X=F.openCursor(M);
X.onsuccess=function(W){(X=W.target.result)?(W=X.value,W._doc_id_rev===N&&y.put(W),E.delete(X.primaryKey),X.continue()):(A.delete(H.primaryKey),H.continue())}}else H.continue()}else v&&v()}}function b(r){r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function e(r,v){var y=r.objectStore("by-sequence"),A=r.objectStore("attach-store"),E=r.objectStore("attach-seq-store");A.count().onsuccess=function(F){if(!F.target.result)return v();
y.openCursor().onsuccess=function(H){H=H.target.result;if(!H)return v();for(var I=H.value,M=H.primaryKey,N=Object.keys(I._attachments||{}),X={},W=0;W<N.length;W++)X[I._attachments[N[W]].digest]=!0;I=Object.keys(X);for(W=0;W<I.length;W++)E.put({seq:M,digestSeq:I[W]+"::"+M});H.continue()}}}function m(r){function v(E){return E.data?mA(E):(E.deleted="1"===E.deletedOrLocal,E)}var y=r.objectStore("by-sequence"),A=r.objectStore("document-store");A.openCursor().onsuccess=function(E){function F(){var M=kQ(I,
I.winningRev,I.deleted);A.put(M).onsuccess=function(){H.continue()}}var H=E.target.result;if(H){var I=v(H.value);I.winningRev=I.winningRev||hA(I);if(I.seq)return F();(function(){var M=I.id+"::",N=I.id+"::\uffff",X=0;y.index("_doc_id_rev").openCursor(IDBKeyRange.bound(M,N)).onsuccess=function(W){W=W.target.result;if(!W)return I.seq=X,F();var ea=W.primaryKey;ea>X&&(X=ea);W.continue()}})()}}}var a=c.name,g=null;d._meta=null;d._remote=!1;d.type=function(){return"idb"};d._id=DZ(function(r){r(null,d._meta.instanceId)});
d._bulkDocs=function(r,v,y){Lca(c,r,v,d,g,y)};d._get=function(r,v,y){function A(){y(H,{doc:E,metadata:F,ctx:I})}var E,F,H,I=v.ctx;if(!I){var M=vt(g,["document-store","by-sequence","attach-store"],"readonly");if(M.error)return y(M.error);I=M.txn}I.objectStore("document-store").get(r).onsuccess=function(N){F=mA(N.target.result);if(!F)return H=Ti(ut,"missing"),A();if(v.rev)var X=v.latest?kca(v.rev,F):v.rev;else if(X=F.winningRev,ww(F))return H=Ti(ut,"deleted"),A();N=I.objectStore("by-sequence");X=F.id+
"::"+X;N.index("_doc_id_rev").get(X).onsuccess=function(W){(E=W.target.result)&&(E=TJ(E));if(!E)return H=Ti(ut,"missing"),A();A()}}};d._getAttachment=function(r,v,y,A,E){if(A.ctx)r=A.ctx;else{r=vt(g,["document-store","by-sequence","attach-store"],"readonly");if(r.error)return E(r.error);r=r.txn}v=y.digest;var F=y.content_type;r.objectStore("attach-store").get(v).onsuccess=function(H){j_(H.target.result.body,F,A.binary,function(I){E(null,I)})}};d._info=function(r){var v,y,A=vt(g,["meta-store","by-sequence"],
"readonly");if(A.error)return r(A.error);A=A.txn;A.objectStore("meta-store").get("meta-store").onsuccess=function(E){y=E.target.result.docCount};A.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(E){v=(E=E.target.result)?E.key:0};A.oncomplete=function(){r(null,{doc_count:y,update_seq:v,idb_attachment_format:d._meta.blobSupport?"binary":"base64"})}};d._allDocs=function(r,v){Qca(r,g,v)};d._changes=function(r){return Vca(r,d,a,g)};d._close=function(r){g.close();SC.delete(a);r()};
d._getRevisionTree=function(r,v){var y=vt(g,["document-store"],"readonly");if(y.error)return v(y.error);y.txn.objectStore("document-store").get(r).onsuccess=function(A){(A=mA(A.target.result))?v(null,A.rev_tree):v(Ti(ut))}};d._doCompaction=function(r,v,y){var A=vt(g,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(A.error)return y(A.error);var E=A.txn;E.objectStore("document-store").get(r).onsuccess=function(F){F=mA(F.target.result);iA(F.rev_tree,function(M,N,X,W,
ea){-1!==v.indexOf(N+"-"+X)&&(ea.status="missing")});l_(v,r,E);var H=F.winningRev,I=F.deleted;E.objectStore("document-store").put(kQ(F,H,I))};E.onabort=Zu(y);E.oncomplete=function(){y()}};d._getLocal=function(r,v){var y=vt(g,["local-store"],"readonly");if(y.error)return v(y.error);r=y.txn.objectStore("local-store").get(r);r.onerror=Zu(v);r.onsuccess=function(A){(A=A.target.result)?(delete A._doc_id_rev,v(null,A)):v(Ti(ut))}};d._putLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});delete r._revisions;
var A=r._rev,E=r._id;r._rev=A?"0-"+(parseInt(A.split("-")[1],10)+1):"0-1";var F=v.ctx,H;if(!F){F=vt(g,["local-store"],"readwrite");if(F.error)return y(F.error);F=F.txn;F.onerror=Zu(y);F.oncomplete=function(){H&&y(null,H)}}var I=F.objectStore("local-store");A?(E=I.get(E),E.onsuccess=function(M){(M=M.target.result)&&M._rev===A?I.put(r).onsuccess=function(){H={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,H)}:y(Ti(QC))}):(E=I.add(r),E.onerror=function(M){y(Ti(QC));M.preventDefault();M.stopPropagation()},
E.onsuccess=function(){H={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,H)})};d._removeLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});var A=v.ctx;if(!A){A=vt(g,["local-store"],"readwrite");if(A.error)return y(A.error);A=A.txn;A.oncomplete=function(){E&&y(null,E)}}var E,F=r._id,H=A.objectStore("local-store");A=H.get(F);A.onerror=Zu(y);A.onsuccess=function(I){(I=I.target.result)&&I._rev===r._rev?(H.delete(F),E={ok:!0,id:F,rev:"0-0"},v.ctx&&y(null,E)):y(Ti(ut))}};d._destroy=function(r,v){FF.removeAllListeners(a);
(r=oQ.get(a))&&r.result&&(r.result.close(),SC.delete(a));r=indexedDB.deleteDatabase(a);r.onsuccess=function(){oQ.delete(a);AF&&a in localStorage&&delete localStorage[a];v(null,{ok:!0})};r.onerror=Zu(v)};var l=SC.get(a);if(l)return g=l.idb,d._meta=l.global,Yu(function(){h(null,d)});l=indexedDB.open(a,5);oQ.set(a,l);l.onupgradeneeded=function(r){function v(){var H=E[F-1];F++;H&&H(A,v)}var y=r.target.result;if(1>r.oldVersion)return f(y);var A=r.currentTarget.transaction;3>r.oldVersion&&y.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>r.oldVersion&&b(y);var E=[k,n,e,m],F=r.oldVersion;v()};l.onsuccess=function(r){function v(){"undefined"!==typeof I&&E&&(d._meta={name:a,instanceId:M,blobSupport:I},SC.set(a,{idb:g,global:d._meta}),h(null,d))}function y(){if("undefined"!==typeof H&&"undefined"!==typeof F){var N=a+"_id";N in F?M=F[N]:F[N]=M=SJ();F.docCount=H;A.objectStore("meta-store").put(F)}}g=r.target.result;g.onversionchange=function(){g.close();SC.delete(a)};
g.onabort=function(N){os("error","Database has a global failure",N.target.error);g.close();SC.delete(a)};var A=g.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),E=!1,F,H,I,M;A.objectStore("meta-store").get("meta-store").onsuccess=function(N){F=N.target.result||{id:"meta-store"};y()};Sca(A,function(N){H=N;y()});pQ||(pQ=Rca(A));pQ.then(function(N){I=N;v()});A.oncomplete=function(){E=!0;v()};A.onabort=Zu(h)};l.onerror=function(r){(r=r.target.error&&r.target.error.message)?
-1!==r.indexOf("stored database is a higher version")&&(r=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):r="Failed to open indexedDB, are you in private browsing mode?";os("error",r);h(Ti(jQ,r))}}function Xca(d,c){return new Promise(function(h,f){function k(){m++;d[a++]().then(b,e)}function n(){if(++g===l)r?f(r):h();else for(;m<c&&a<l;)k()}function b(){m--;n()}function e(v){m--;r=r||v;n()}for(var m=0,a=0,g=0,l=d.length,
r;m<c&&a<l;)k()})}function qQ(d){var c=(d=d.doc||d.ok)&&d._attachments;c&&Object.keys(c).forEach(function(h){h=c[h];h.data=bQ(h.data,h.content_type)})}function nA(d){return/^_design/.test(d)?"_design/"+encodeURIComponent(d.slice(8)):/^_local/.test(d)?"_local/"+encodeURIComponent(d.slice(7)):encodeURIComponent(d)}function p_(d){return d._attachments&&Object.keys(d._attachments)?Promise.all(Object.keys(d._attachments).map(function(c){var h=d._attachments[c];if(h.data&&"string"!==typeof h.data)return(new Promise(function(f){cQ(h.data,
f)})).then(function(f){h.data=f})})):Promise.resolve()}function Yca(d,c){if(c.prefix){var h=KZ(c.prefix).protocol;h="http"===h||"https"===h}else h=!1;h&&(d=c.name.substr(c.prefix.length),d=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(d));c=KZ(d);if(c.user||c.password)c.auth={username:c.user,password:c.password};d=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=d.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=d.join("/");return c}function tn(d,c){return UJ(d,d.db+"/"+c)}function UJ(d,
c){return d.protocol+"://"+d.host+(d.port?":"+d.port:"")+"/"+d.path+(d.path?"/":"")+c}function VJ(d){return"?"+Object.keys(d).map(function(c){return c+"="+encodeURIComponent(d[c])}).join("&")}function Zca(d){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=-1!==c.indexOf("msie"),f=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");d=!("method"in d)||"GET"===d.method;return(h||f||c)&&d}function rQ(d,c){function h(l,r){return Tm(l,MC(function(v){k().then(function(){return r.apply(this,
v)}).catch(function(y){v.pop()(y)})})).bind(b)}function f(l,r,v){var y={};r=r||{};r.headers=r.headers||new TC;r.headers.get("Content-Type")||r.headers.set("Content-Type","application/json");r.headers.get("Accept")||r.headers.set("Accept","application/json");return a(l,r).then(function(A){y.ok=A.ok;y.status=A.status;return A.json()}).then(function(A){y.data=A;if(!y.ok){y.data.status=y.status;A=OC(y.data);if(v)return v(A);throw A;}Array.isArray(y.data)&&(y.data=y.data.map(function(E){return E.error||
E.missing?OC(E):E}));if(v)v(null,y.data);else return y})}function k(){if(d.skip_setup)return Promise.resolve();if(g)return g;g=f(m).catch(function(l){return l&&l.status&&404===l.status?(WP(404,"PouchDB is just detecting if the remote exists."),f(m,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&l.status&&412===l.status?!0:Promise.reject(l)});g.catch(function(){g=null});return g}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var b=this,e=Yca(d.name,d),m=tn(e,"");
d=sn(d);var a=function(l,r){r=r||{};r.headers=r.headers||new TC;r.credentials="include";if(d.auth||e.auth){var v=d.auth||e.auth;v=btoa(unescape(encodeURIComponent(v.username+":"+v.password)));r.headers.set("Authorization","Basic "+v)}var y=d.headers||{};Object.keys(y).forEach(function(A){r.headers.append(A,y[A])});Zca(r)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(d.fetch||q_)(l,r)},g;Yu(function(){c(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=h("id",function(l){a(UJ(e,
"")).then(function(r){return r.json()}).catch(function(){return{}}).then(function(r){r=r&&r.uuid?r.uuid+e.db:tn(e,"");l(null,r)})});b.compact=h("compact",function(l,r){"function"===typeof l&&(r=l,l={});l=sn(l);f(tn(e,"_compact"),{method:"POST"}).then(function(){function v(){b.info(function(y,A){A&&!A.compact_running?r(null,{ok:!0}):setTimeout(v,l.interval||200)})}v()})});b.bulkGet=Tm("bulkGet",function(l,r){function v(H){var I={};l.revs&&(I.revs=!0);l.attachments&&(I.attachments=!0);l.latest&&(I.latest=
!0);f(tn(e,"_bulk_get"+VJ(I)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(M){l.attachments&&l.binary&&M.data.results.forEach(function(N){N.docs.forEach(qQ)});H(null,M.data)}).catch(H)}function y(){function H(ea){return function(Aa,Ka){N[ea]=Ka.results;++M===I&&r(null,{results:PJ(N)})}}for(var I=Math.ceil(l.docs.length/50),M=0,N=Array(I),X=0;X<I;X++){var W=zF(l,["revs","attachments","binary","latest"]);W.docs=l.docs.slice(50*X,Math.min(l.docs.length,50*(X+1)));FZ(A,W,H(X))}}var A=
this,E=UJ(e,""),F=sQ[E];"boolean"!==typeof F?v(function(H,I){H?(sQ[E]=!1,WP(H.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),y()):(sQ[E]=!0,r(null,I))}):F?v(r):y()});b._info=function(l){k().then(function(){return a(tn(e,""))}).then(function(r){return r.json()}).then(function(r){r.host=tn(e,"");l(null,r)}).catch(l)};b.fetch=function(l,r){return k().then(function(){var v="/"===l.substring(0,1)?UJ(e,l.substring(1)):tn(e,l);return a(v,r)})};b.get=h("get",function(l,r,v){function y(F){function H(N){var X=
I[N];N=nA(F._id)+"/"+n(N)+"?rev="+F._rev;return a(tn(e,N)).then(function(W){return"buffer"in W?W.buffer():W.blob()}).then(function(W){if(r.binary){var ea=Object.getOwnPropertyDescriptor(W.__proto__,"type");if(!ea||ea.set)W.type=X.content_type;return W}return new Promise(function(Aa){cQ(W,Aa)})}).then(function(W){delete X.stub;delete X.length;X.data=W})}var I=F._attachments,M=I&&Object.keys(I);if(I&&M.length)return M=M.map(function(N){return function(){return H(N)}}),Xca(M,5)}function A(F){return Array.isArray(F)?
Promise.all(F.map(function(H){if(H.ok)return y(H.ok)})):y(F)}"function"===typeof r&&(v=r,r={});r=sn(r);var E={};r.revs&&(E.revs=!0);r.revs_info&&(E.revs_info=!0);r.latest&&(E.latest=!0);r.open_revs&&("all"!==r.open_revs&&(r.open_revs=JSON.stringify(r.open_revs)),E.open_revs=r.open_revs);r.rev&&(E.rev=r.rev);r.conflicts&&(E.conflicts=r.conflicts);r.update_seq&&(E.update_seq=r.update_seq);l=nA(l);E=tn(e,l+VJ(E));f(E).then(function(F){return Promise.resolve().then(function(){if(r.attachments)return A(F.data)}).then(function(){v(null,
F.data)})}).catch(function(F){F.docId=l;v(F)})});b.remove=h("remove",function(l,r,v,y){"string"===typeof r?(l={_id:l,_rev:r},"function"===typeof v&&(y=v,v={})):"function"===typeof r?(y=r,v={}):(y=v,v=r);r=l._rev||v.rev;r=tn(e,nA(l._id))+"?rev="+r;f(r,{method:"DELETE"},y).catch(y)});b.getAttachment=h("getAttachment",function(l,r,v,y){"function"===typeof v&&(y=v,v={});v=v.rev?"?rev="+v.rev:"";l=tn(e,nA(l))+"/"+n(r)+v;var A;a(l,{method:"GET"}).then(function(E){A=E.headers.get("content-type");if(E.ok)return"undefined"===
typeof WJ||WJ.browser||"function"!==typeof E.buffer?E.blob():E.buffer();throw E;}).then(function(E){"undefined"===typeof WJ||WJ.browser||(E.type=A);y(null,E)}).catch(function(E){y(E)})});b.removeAttachment=h("removeAttachment",function(l,r,v,y){l=tn(e,nA(l)+"/"+n(r))+"?rev="+v;f(l,{method:"DELETE"},y).catch(y)});b.putAttachment=h("putAttachment",function(l,r,v,y,A,E){"function"===typeof A&&(E=A,A=y,y=v,v=null);l=nA(l)+"/"+n(r);l=tn(e,l);v&&(l+="?rev="+v);if("string"===typeof y){try{var F=atob(y)}catch(H){return E(Ti(h_,
"Attachment is not a valid base64 string"))}y=F?aQ(F,A):""}f(l,{headers:new TC({"Content-Type":A}),method:"PUT",body:y},E).catch(E)});b._bulkDocs=function(l,r,v){l.new_edits=r.new_edits;k().then(function(){return Promise.all(l.docs.map(p_))}).then(function(){return f(tn(e,"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},v)}).catch(v)};b._put=function(l,r,v){k().then(function(){return p_(l)}).then(function(){return f(tn(e,nA(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(y){v(null,
y.data)}).catch(function(y){y.docId=l&&l._id;v(y)})};b.allDocs=h("allDocs",function(l,r){"function"===typeof l&&(r=l,l={});l=sn(l);var v={},y="GET";l.conflicts&&(v.conflicts=!0);l.update_seq&&(v.update_seq=!0);l.descending&&(v.descending=!0);l.include_docs&&(v.include_docs=!0);l.attachments&&(v.attachments=!0);l.key&&(v.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(v.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(v.endkey=JSON.stringify(l.endkey));
"undefined"!==typeof l.inclusive_end&&(v.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(v.limit=l.limit);"undefined"!==typeof l.skip&&(v.skip=l.skip);v=VJ(v);if("undefined"!==typeof l.keys){y="POST";var A={keys:l.keys}}f(tn(e,"_all_docs"+v),{method:y,body:JSON.stringify(A)}).then(function(E){l.include_docs&&l.attachments&&l.binary&&E.data.rows.forEach(qQ);r(null,E.data)}).catch(r)});b._changes=function(l){var r="batch_size"in l?l.batch_size:25;l=sn(l);!l.continuous||"heartbeat"in
l||(l.heartbeat=1E4);var v="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>v-l.timeout&&(v=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>v-l.heartbeat&&(v=l.heartbeat+5E3);var y={};"timeout"in l&&l.timeout&&(y.timeout=l.timeout);var A="undefined"!==typeof l.limit?l.limit:!1,E=A;l.style&&(y.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)y.include_docs=!0;l.attachments&&(y.attachments=!0);l.continuous&&(y.feed="longpoll");l.seq_interval&&(y.seq_interval=l.seq_interval);
l.conflicts&&(y.conflicts=!0);l.descending&&(y.descending=!0);l.update_seq&&(y.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(y.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(y.filter=l.filter);l.view&&"string"===typeof l.view&&(y.filter="_view",y.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var F in l.query_params)l.query_params.hasOwnProperty(F)&&(y[F]=l.query_params[F]);var H="GET";if(l.doc_ids){y.filter="_doc_ids";H="POST";var I={doc_ids:l.doc_ids}}else l.selector&&
(y.filter="_selector",H="POST",I={selector:l.selector});var M=new $ca,N,X=function(Aa,Ka){if(!l.aborted){y.since=Aa;"object"===typeof y.since&&(y.since=JSON.stringify(y.since));l.descending?A&&(y.limit=E):y.limit=!A||E>r?r:E;var K=tn(e,"_changes"+VJ(y)),aa={signal:M.signal,method:H,body:JSON.stringify(I)};N=Aa;l.aborted||k().then(function(){return f(K,aa,Ka)}).catch(Ka)}},W={results:[]},ea=function(Aa,Ka){if(!l.aborted){var K=0;if(Ka&&Ka.results){K=Ka.results.length;W.last_seq=Ka.last_seq;var aa=
null,T=null;"number"===typeof Ka.pending&&(aa=Ka.pending);if("string"===typeof W.last_seq||"number"===typeof W.last_seq)T=W.last_seq;Ka.results=Ka.results.filter(function(U){E--;var pa=XP(l)(U);pa&&(l.include_docs&&l.attachments&&l.binary&&qQ(U),l.return_docs&&W.results.push(U),l.onChange(U,aa,T));return pa})}else if(Aa){l.aborted=!0;l.complete(Aa);return}Ka&&Ka.last_seq&&(N=Ka.last_seq);Aa=A&&0>=E||Ka&&K<r||l.descending;(!l.continuous||A&&0>=E)&&Aa?l.complete(null,W):Yu(function(){X(N,ea)})}};X(l.since||
0,ea);return{cancel:function(){l.aborted=!0;M.abort()}}};b.revsDiff=h("revsDiff",function(l,r,v){"function"===typeof r&&(v=r);f(tn(e,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},v).catch(v)});b._close=function(l){l()};b._destroy=function(l,r){f(tn(e,""),{method:"DELETE"}).then(function(v){r(null,v)}).catch(function(v){404===v.status?r(null,{ok:!0}):r(v)})}}function oA(d){this.status=400;this.name="query_parse_error";this.message=d;this.error=!0;try{Error.captureStackTrace(this,oA)}catch(c){}}
function XJ(d){this.status=404;this.name="not_found";this.message=d;this.error=!0;try{Error.captureStackTrace(this,XJ)}catch(c){}}function YJ(d){this.status=500;this.name="invalid_value";this.message=d;this.error=!0;try{Error.captureStackTrace(this,YJ)}catch(c){}}function r_(d,c){c&&d.then(function(h){Yu(function(){c(null,h)})},function(h){Yu(function(){c(h)})});return d}function ada(d){return MC(function(c){var h=c.pop();c=d.apply(this,c);"function"===typeof h&&r_(c,h);return c})}function bda(d,
c){return d.then(function(h){return c().then(function(){return h})},function(h){return c().then(function(){throw h;})})}function tQ(d,c){return function(){var h=arguments,f=this;return d.add(function(){return c.apply(f,h)})}}function s_(d){d=new GF(d);var c=Array(d.size),h=-1;d.forEach(function(f){c[++h]=f});return c}function uQ(d){var c=Array(d.size),h=-1;d.forEach(function(f,k){c[++h]=k});return c}function t_(d){return new YJ("builtin "+d+" function requires map values to be numbers or number arrays")}
function vQ(d){for(var c=0,h=0,f=d.length;h<f;h++){var k=d[h];if("number"!==typeof k)if(Array.isArray(k)){c="number"===typeof c?[c]:c;for(var n=0,b=k.length;n<b;n++){var e=k[n];if("number"!==typeof e)throw t_("_sum");"undefined"===typeof c[n]?c.push(e):c[n]+=e}}else throw t_("_sum");else"number"===typeof c?c+=k:c[0]+=k}return c}function u_(d,c){return ZP("return ("+d.replace(/;\s*$/,"")+");",{emit:c,sum:vQ,log:cda,isArray:dda,toJSON:eda})}function HF(){this.promise=new Promise(function(d){d()})}function v_(d){if(!d)return"undefined";
switch(typeof d){case "function":return d.toString();case "string":return d.toString();default:return JSON.stringify(d)}}function fda(d,c){return v_(d)+v_(c)+"undefined"}function w_(d,c,h,f,k,n){var b=fda(h,f);if(!k){var e=d._cachedViews=d._cachedViews||{};if(e[b])return e[b]}var m=d.info().then(function(a){var g=a.db_name+"-mrview-"+(k?"temp":RJ.hash(b));return QJ(d,"_local/"+n,function(l){l.views=l.views||{};var r=c;-1===r.indexOf("/")&&(r=c+"/"+c);r=l.views[r]=l.views[r]||{};if(!r[g])return r[g]=
!0,l}).then(function(){return d.registerDependentDatabase(g).then(function(l){l=l.db;l.auto_compaction=!0;var r={name:g,db:l,sourceDB:d,adapter:d.adapter,mapFun:h,reduceFun:f};return r.db.get("_local/lastSeq").catch(function(v){if(404!==v.status)throw v;}).then(function(v){r.seq=v?v.seq:0;if(e)r.db.once("destroyed",function(){delete e[b]});return r})})})});e&&(e[b]=m);return m}function wQ(d){return-1===d.indexOf("/")?[d,d]:d.split("/")}function gda(d){return 1===d.length&&/^1-/.test(d[0].rev)}function x_(d,
c){try{d.emit("error",c)}catch(h){os("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),os("error",c)}}function y_(d,c){var h=Object.keys(c._attachments);return Promise.all(h.map(function(f){return d.getAttachment(c._id,f,{rev:c._rev})}))}function hda(d,c,h){var f=Xu(c)&&!Xu(d),k=Object.keys(h._attachments);return f?d.get(h._id).then(function(n){return Promise.all(k.map(function(b){return n._attachments&&
n._attachments[b]&&n._attachments[b].digest===h._attachments[b].digest?d.getAttachment(n._id,b):c.getAttachment(h._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return y_(c,h)}):y_(c,h)}function ida(d){var c=[];Object.keys(d).forEach(function(h){d[h].missing.forEach(function(f){c.push({id:h,rev:f})})});return{docs:c,revs:!0,latest:!0}}function jda(d,c,h,f){function k(e){return d.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(m){if(f.cancelled)throw Error("cancelled");m.rows.forEach(function(a){var g;
(g=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(g=a.doc,g=g._attachments&&0<Object.keys(g._attachments).length);g||(g=a.doc,g=g._conflicts&&0<g._conflicts.length);g||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete h[a.id])})})}h=sn(h);var n=[],b=!0;return Promise.resolve().then(function(){var e=Object.keys(h).filter(function(m){m=h[m].missing;return 1===m.length&&/^1-/.test(m[0])});if(0<e.length)return k(e)}).then(function(){var e=ida(h);if(e.docs.length)return d.bulkGet(e).then(function(m){if(f.cancelled)throw Error("cancelled");
return Promise.all(m.results.map(function(a){return Promise.all(a.docs.map(function(g){var l=g.ok;g.error&&(b=!1);return l&&l._attachments?hda(c,d,l).then(function(r){var v=Object.keys(l._attachments);r.forEach(function(y,A){A=l._attachments[v[A]];delete A.stub;delete A.length;A.data=y});return l}):l}))})).then(function(a){n=n.concat(PJ(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function xQ(d,c,h,f,k){return d.get(c).catch(function(n){if(404===n.status)return"http"!==d.adapter&&
"https"!==d.adapter||WP(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:f,_id:c,history:[],replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!k.cancelled&&n.last_seq!==h)return n.history=(n.history||[]).filter(function(b){return b.session_id!==f}),n.history.unshift({last_seq:h,session_id:f}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=f,n.last_seq=h,d.put(n).catch(function(b){if(409===b.status)return xQ(d,c,h,f,k);throw b;
})})}function IF(d,c,h,f,k){this.src=d;this.target=c;this.id=h;this.returnValue=f;this.opts=k||{}}function z_(d,c){var h=d[0],f=d.slice(1),k=c[0],n=c.slice(1);return h&&0!==c.length?yQ(h.session_id,c)?{last_seq:h.last_seq,history:d}:yQ(k.session_id,f)?{last_seq:k.last_seq,history:n}:z_(f,n):{last_seq:0,history:[]}}function yQ(d,c){var h=c[0],f=c.slice(1);return d&&0!==c.length?d===h.session_id?!0:yQ(d,f):!1}function A_(d){return"number"===typeof d.status&&4===Math.floor(d.status/100)}function kda(d,
c,h,f){if(!1===d.retry)c.emit("error",h),c.removeAllListeners();else{"function"!==typeof d.back_off_function&&(d.back_off_function=Uba);c.emit("requestError",h);if("active"===c.state||"pending"===c.state){c.emit("paused",h);c.state="stopped";var k=function(){d.current_back_off=0};c.once("paused",function(){c.removeListener("active",k)});c.once("active",k)}d.current_back_off=d.current_back_off||0;d.current_back_off=d.back_off_function(d.current_back_off);setTimeout(f,d.current_back_off)}}function lda(d){return Object.keys(d).sort(Vn).reduce(function(c,
h){c[h]=d[h];return c},{})}function mda(d,c,h){var f=h.doc_ids?h.doc_ids.sort(Vn):"",k=h.filter?h.filter.toString():"",n="",b="",e="";h.selector&&(e=JSON.stringify(h.selector));h.filter&&h.query_params&&(n=JSON.stringify(lda(h.query_params)));h.filter&&"_view"===h.filter&&(b=h.view.toString());return Promise.all([d.id(),c.id()]).then(function(m){var a=m[0]+m[1]+k+b+n+f+e;return new Promise(function(g){dQ(a,g)})}).then(function(m){m=m.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+m})}function B_(d,
c,h,f,k){function n(){return hb?Promise.resolve():mda(d,c,h).then(function(ua){oa=ua;hb=new IF(d,c,oa,f,!1===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===h.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){Cb=[];if(0!==N.docs.length){var ua=N.docs;return c.bulkDocs({docs:ua,new_edits:!1},{timeout:h.timeout}).then(function(Ma){if(f.cancelled)throw v(),
Error("cancelled");var Lb=Object.create(null);Ma.forEach(function(ic){ic.error&&(Lb[ic.id]=ic)});Ma=Object.keys(Lb).length;k.doc_write_failures+=Ma;k.docs_written+=ua.length-Ma;ua.forEach(function(ic){var Vb=Lb[ic._id];if(Vb)if(k.errors.push(Vb),ic=(Vb.name||"").toLowerCase(),"unauthorized"===ic||"forbidden"===ic)f.emit("denied",sn(Vb));else throw Vb;else Cb.push(ic)})},function(Ma){k.doc_write_failures+=ua.length;throw Ma;})}}function e(){if(N.error)throw Error("There was a problem getting docs.");
k.last_seq=Ka=N.seq;var ua=sn(k);Cb.length&&(ua.docs=Cb,"number"===typeof N.pending&&(ua.pending=N.pending,delete N.pending),f.emit("change",ua));W=!0;return hb.writeCheckpoint(N.seq,va).then(function(){W=!1;if(f.cancelled)throw v(),Error("cancelled");N=void 0;F()}).catch(function(Ma){I(Ma);throw Ma;})}function m(){var ua={};N.changes.forEach(function(Ma){"_user/"!==Ma.id&&(ua[Ma.id]=Ma.changes.map(function(Lb){return Lb.rev}))});return c.revsDiff(ua).then(function(Ma){if(f.cancelled)throw v(),Error("cancelled");
N.diffs=Ma})}function a(){return jda(d,c,N.diffs,f).then(function(ua){N.error=!ua.ok;ua.docs.forEach(function(Ma){delete N.diffs[Ma._id];k.docs_read++;N.docs.push(Ma)})})}function g(){f.cancelled||N||(0===M.length?l(!0):(N=M.shift(),m().then(a).then(b).then(e).then(g).catch(function(ua){r("batch processing terminated with error",ua)})))}function l(ua){if(0===X.changes.length){if(0===M.length&&!N){if(K&&ma.live||ea)f.state="pending",f.emit("paused");ea&&v()}}else if(ua||ea||X.changes.length>=aa){M.push(X);
X={seq:0,changes:[],docs:[]};if("pending"===f.state||"stopped"===f.state)f.state="active",f.emit("active");g()}}function r(ua,Ma){Aa||(Ma.message||(Ma.message=ua),k.ok=!1,k.status="aborting",M=[],X={seq:0,changes:[],docs:[]},v(Ma))}function v(ua){if(!Aa){if(f.cancelled&&(k.status="cancelled",W))return;k.status=k.status||"complete";k.end_time=(new Date).toISOString();k.last_seq=Ka;Aa=!0;if(ua){ua=Ti(ua);ua.result=k;var Ma=(ua.name||"").toLowerCase();"unauthorized"===Ma||"forbidden"===Ma?(f.emit("error",
ua),f.removeAllListeners()):kda(h,f,ua,function(){B_(d,c,h,f)})}else f.emit("complete",k),f.removeAllListeners()}}function y(ua,Ma,Lb){if(f.cancelled)return v();"number"===typeof Ma&&(X.pending=Ma);XP(h)(ua)&&(X.seq=ua.seq||Lb,X.changes.push(ua),Yu(function(){l(0===M.length&&ma.live)}))}function A(ua){U=!1;if(f.cancelled)return v();if(0<ua.results.length)ma.since=ua.results[ua.results.length-1].seq,F(),l(!0);else{var Ma=function(){K?(ma.live=!0,F()):ea=!0;l(!0)};N||0!==ua.results.length?Ma():(W=!0,
hb.writeCheckpoint(ua.last_seq,va).then(function(){W=!1;k.last_seq=Ka=ua.last_seq;Ma()}).catch(I))}}function E(ua){U=!1;if(f.cancelled)return v();r("changes rejected",ua)}function F(){function ua(){Lb.cancel()}function Ma(){f.removeListener("cancel",ua)}if(!U&&!ea&&M.length<T){U=!0;f._changes&&(f.removeListener("cancel",f._abortChanges),f._changes.cancel());f.once("cancel",ua);var Lb=d.changes(ma).on("change",y);Lb.then(Ma,Ma);Lb.then(A).catch(E);h.retry&&(f._changes=Lb,f._abortChanges=ua)}}function H(){n().then(function(){if(f.cancelled)v();
else return hb.getCheckpoint().then(function(ua){Ka=ua;ma={since:Ka,limit:aa,batch_size:aa,style:"all_docs",doc_ids:pa,selector:fa,return_docs:!0};h.filter&&("string"!==typeof h.filter?ma.include_docs=!0:ma.filter=h.filter);"heartbeat"in h&&(ma.heartbeat=h.heartbeat);"timeout"in h&&(ma.timeout=h.timeout);h.query_params&&(ma.query_params=h.query_params);h.view&&(ma.view=h.view);F()})}).catch(function(ua){r("getCheckpoint rejected with ",ua)})}function I(ua){W=!1;r("writeCheckpoint completed with error",
ua)}var M=[],N,X={seq:0,changes:[],docs:[]},W=!1,ea=!1,Aa=!1,Ka=0,K=h.continuous||h.live||!1,aa=h.batch_size||100,T=h.batches_limit||10,U=!1,pa=h.doc_ids,fa=h.selector,oa,hb,Cb=[],va=SJ();k=k||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ma={};f.ready(d,c);f.cancelled?v():(f._addedListeners||(f.once("cancel",v),"function"===typeof h.complete&&(f.once("error",h.complete),f.once("complete",function(ua){h.complete(null,ua)})),f._addedListeners=
!0),"undefined"===typeof h.since?H():n().then(function(){W=!0;return hb.writeCheckpoint(h.since,va)}).then(function(){W=!1;f.cancelled?v():(Ka=h.since,H())}).catch(I))}function ZJ(){vq.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var d=this,c=new Promise(function(h,f){d.once("complete",h);d.once("error",f)});d.then=function(h,f){return c.then(h,f)};d.catch=function(h){return c.catch(h)};d.catch(function(){})}function $J(d,c){var h=c.PouchConstructor;return"string"===typeof d?new h(d,
c):d}function zQ(d,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&(h={});if(h.doc_ids&&!Array.isArray(h.doc_ids))throw Ti(OJ,"`doc_ids` filter parameter is not a list.");h.complete=f;h=sn(h);h.continuous=h.continuous||h.live;h.retry="retry"in h?h.retry:!1;h.PouchConstructor=h.PouchConstructor||this;f=new ZJ(h);d=$J(d,h);c=$J(c,h);B_(d,c,h,f);return f}function nda(d,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&(h={});h=sn(h);h.PouchConstructor=h.PouchConstructor||
this;d=$J(d,h);c=$J(c,h);return new AQ(d,c,h,f)}function AQ(d,c,h,f){function k(I){y.emit("change",{direction:"pull",change:I})}function n(I){y.emit("change",{direction:"push",change:I})}function b(I){y.emit("denied",{direction:"push",doc:I})}function e(I){y.emit("denied",{direction:"pull",doc:I})}function m(){y.pushPaused=!0;y.pullPaused&&y.emit("paused")}function a(){y.pullPaused=!0;y.pushPaused&&y.emit("paused")}function g(){y.pushPaused=!1;y.pullPaused&&y.emit("active",{direction:"push"})}function l(){y.pullPaused=
!1;y.pushPaused&&y.emit("active",{direction:"pull"})}function r(I){return function(M,N){var X="denied"===M&&(N===e||N===b),W="paused"===M&&(N===a||N===m),ea="active"===M&&(N===l||N===g);if("change"===M&&(N===k||N===n)||X||W||ea)M in F||(F[M]={}),F[M][I]=!0,2===Object.keys(F[M]).length&&y.removeAllListeners(M)}}function v(I,M,N){if(-1==I.listeners(M).indexOf(N))I.on(M,N)}var y=this;this.canceled=!1;var A=h.push?RC({},h,h.push):h,E=h.pull?RC({},h,h.pull):h;this.push=zQ(d,c,A);this.pull=zQ(c,d,E);this.pullPaused=
this.pushPaused=!0;var F={};h.live&&(this.push.on("complete",y.pull.cancel.bind(y.pull)),this.pull.on("complete",y.push.cancel.bind(y.push)));this.on("newListener",function(I){"change"===I?(v(y.pull,"change",k),v(y.push,"change",n)):"denied"===I?(v(y.pull,"denied",e),v(y.push,"denied",b)):"active"===I?(v(y.pull,"active",l),v(y.push,"active",g)):"paused"===I&&(v(y.pull,"paused",a),v(y.push,"paused",m))});this.on("removeListener",function(I){"change"===I?(y.pull.removeListener("change",k),y.push.removeListener("change",
n)):"denied"===I?(y.pull.removeListener("denied",e),y.push.removeListener("denied",b)):"active"===I?(y.pull.removeListener("active",l),y.push.removeListener("active",g)):"paused"===I&&(y.pull.removeListener("paused",a),y.push.removeListener("paused",m))});this.pull.on("removeListener",r("pull"));this.push.on("removeListener",r("push"));var H=Promise.all([this.push,this.pull]).then(function(I){I={push:I[0],pull:I[1]};y.emit("complete",I);f&&f(null,I);y.removeAllListeners();return I},function(I){y.cancel();
f?f(I):y.emit("error",I);y.removeAllListeners();if(f)throw I;});this.then=function(I,M){return H.then(I,M)};this.catch=function(I){return H.catch(I)}}function Wx(){this._store={}}function JF(d){this._store=new Wx;if(d&&Array.isArray(d))for(var c=0,h=d.length;c<h;c++)this.add(d[c])}function oda(){UC&&pA&&(UC=!1,pA.length?Xx=pA.concat(Xx):KF=-1,Xx.length&&C_())}function C_(){if(!UC){BQ=!1;UC=!0;for(var d=Xx.length,c=setTimeout(oda);d;){pA=Xx;for(Xx=[];pA&&++KF<d;)pA[KF].run();KF=-1;d=Xx.length}pA=null;
KF=-1;UC=!1;clearTimeout(c)}}function D_(d,c){this.fun=d;this.array=c}function bl(d,c,h){Error.call(this,h);this.status=d;this.name=c;this.message=h;this.error=!0}function qA(d){return d.call.bind(d)}function LF(d,c){if("object"!=typeof d)return!1;try{return c(d),!0}catch(h){return!1}}function E_(d){return wq&&lr?void 0!==ps(d):F_(d)||G_(d)||H_(d)||I_(d)||J_(d)||K_(d)||L_(d)||M_(d)||N_(d)||O_(d)||P_(d)}function F_(d){return wq&&lr?"Uint8Array"===ps(d):"[object Uint8Array]"===Ul(d)||pda(d)&&void 0!==
d.buffer}function G_(d){return wq&&lr?"Uint8ClampedArray"===ps(d):"[object Uint8ClampedArray]"===Ul(d)}function H_(d){return wq&&lr?"Uint16Array"===ps(d):"[object Uint16Array]"===Ul(d)}function I_(d){return wq&&lr?"Uint32Array"===ps(d):"[object Uint32Array]"===Ul(d)}function J_(d){return wq&&lr?"Int8Array"===ps(d):"[object Int8Array]"===Ul(d)}function K_(d){return wq&&lr?"Int16Array"===ps(d):"[object Int16Array]"===Ul(d)}function L_(d){return wq&&lr?"Int32Array"===ps(d):"[object Int32Array]"===Ul(d)}
function M_(d){return wq&&lr?"Float32Array"===ps(d):"[object Float32Array]"===Ul(d)}function N_(d){return wq&&lr?"Float64Array"===ps(d):"[object Float64Array]"===Ul(d)}function O_(d){return wq&&lr?"BigInt64Array"===ps(d):"[object BigInt64Array]"===Ul(d)}function P_(d){return wq&&lr?"BigUint64Array"===ps(d):"[object BigUint64Array]"===Ul(d)}function aK(d){return"[object Map]"===Ul(d)}function bK(d){return"[object Set]"===Ul(d)}function cK(d){return"[object WeakMap]"===Ul(d)}function CQ(d){return"[object WeakSet]"===
Ul(d)}function dK(d){return"[object ArrayBuffer]"===Ul(d)}function Q_(d){return"undefined"!=typeof ArrayBuffer&&(dK.working?dK(d):d instanceof ArrayBuffer)}function eK(d){return"[object DataView]"===Ul(d)}function R_(d){return"undefined"!=typeof DataView&&(eK.working?eK(d):d instanceof DataView)}function fK(d){return"[object SharedArrayBuffer]"===Ul(d)}function S_(d){return"undefined"!=typeof SharedArrayBuffer&&(fK.working?fK(d):d instanceof SharedArrayBuffer)}function T_(d){return LF(d,qda)}function U_(d){return LF(d,
rda)}function V_(d){return LF(d,sda)}function W_(d){return X_&&LF(d,tda)}function Y_(d){return DQ&&LF(d,uda)}function Yx(d,c){var h={seen:[],stylize:vda};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),EQ(c)?h.showHidden=c:c&&Rh._extend(h,c),rA(h.showHidden)&&(h.showHidden=!1),rA(h.depth)&&(h.depth=2),rA(h.colors)&&(h.colors=!1),rA(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=wda),gK(h,d,h.depth)}function wda(d,c){return(c=Yx.styles[c])?
"\u001b["+Yx.colors[c][0]+"m"+d+"\u001b["+Yx.colors[c][1]+"m":d}function vda(d,c){return d}function gK(d,c,h){if(d.customInspect&&c&&hK(c.inspect)&&c.inspect!==Rh.inspect&&(!c.constructor||c.constructor.prototype!==c)){var f=c.inspect(h,d);return iK(f)||(f=gK(d,f,h)),f}var k=function(a,g){if(rA(g))return a.stylize("undefined","undefined");if(iK(g))return g="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(g,"string");if(Z_(g))return a.stylize(""+g,"number");
if(EQ(g))return a.stylize(""+g,"boolean");if(null===g)return a.stylize("null","null")}(d,c);if(k)return k;k=Object.keys(c);var n=function(a){var g={};return a.forEach(function(l,r){g[l]=!0}),g}(k);if(d.showHidden&&(k=Object.getOwnPropertyNames(c)),MF(c)&&(0<=k.indexOf("message")||0<=k.indexOf("description")))return FQ(c);if(0===k.length){if(hK(c))return d.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(NF(c))return d.stylize(RegExp.prototype.toString.call(c),"regexp");if(jK(c))return d.stylize(Date.prototype.toString.call(c),
"date");if(MF(c))return FQ(c)}var b="",e=!1,m=["{","}"];($_(c)&&(e=!0,m=["[","]"]),hK(c))&&(b=" [Function"+(c.name?": "+c.name:"")+"]");return NF(c)&&(b=" "+RegExp.prototype.toString.call(c)),jK(c)&&(b=" "+Date.prototype.toUTCString.call(c)),MF(c)&&(b=" "+FQ(c)),0!==k.length||e&&0!=c.length?0>h?NF(c)?d.stylize(RegExp.prototype.toString.call(c),"regexp"):d.stylize("[Object]","special"):(d.seen.push(c),f=e?function(a,g,l,r,v){for(var y=[],A=0,E=g.length;A<E;++A)Object.prototype.hasOwnProperty.call(g,
String(A))?y.push(GQ(a,g,l,r,String(A),!0)):y.push("");return v.forEach(function(F){F.match(/^\d+$/)||y.push(GQ(a,g,l,r,F,!0))}),y}(d,c,h,n,k):k.map(function(a){return GQ(d,c,h,n,a,e)}),d.seen.pop(),function(a,g,l){var r=0;return 60<a.reduce(function(v,y){return r++,0<=y.indexOf("\n")&&r++,v+y.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===g?"":g+"\n ")+" "+a.join(",\n  ")+" "+l[1]:l[0]+g+" "+a.join(", ")+" "+l[1]}(f,b,m)):m[0]+b+m[1]}function FQ(d){return"["+Error.prototype.toString.call(d)+
"]"}function GQ(d,c,h,f,k,n){var b,e,m;if((m=Object.getOwnPropertyDescriptor(c,k)||{value:c[k]}).get?e=m.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):m.set&&(e=d.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(f,k)||(b="["+k+"]"),e||(0>d.seen.indexOf(m.value)?-1<(e=null===h?gK(d,m.value,null):gK(d,m.value,h-1)).indexOf("\n")&&(e=n?e.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+e.split("\n").map(function(a){return"   "+a}).join("\n")):
e=d.stylize("[Circular]","special")),rA(b)){if(n&&k.match(/^\d+$/))return e;(b=JSON.stringify(""+k)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=d.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=d.stylize(b,"string"))}return b+": "+e}function $_(d){return Array.isArray(d)}function EQ(d){return"boolean"==typeof d}function Z_(d){return"number"==typeof d}function iK(d){return"string"==typeof d}function rA(d){return void 0===d}function NF(d){return VC(d)&&
"[object RegExp]"===Object.prototype.toString.call(d)}function VC(d){return"object"==typeof d&&null!==d}function jK(d){return VC(d)&&"[object Date]"===Object.prototype.toString.call(d)}function MF(d){return VC(d)&&("[object Error]"===Object.prototype.toString.call(d)||d instanceof Error)}function hK(d){return"function"==typeof d}function HQ(d){return 10>d?"0"+d.toString(10):d.toString(10)}function xda(){var d=new Date,c=[HQ(d.getHours()),HQ(d.getMinutes()),HQ(d.getSeconds())].join(":");return[d.getDate(),
yda[d.getMonth()],c].join(" ")}function zda(d,c){if(!d){var h=Error("Promise was rejected with a falsy value");h.reason=d;d=h}return c(d)}function a0(d){var c=d.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");d=d.indexOf("=");return-1===d&&(d=c),[d,d===c?0:4-d%4]}function Ada(d,c,h){for(var f,k=[],n=c;n<h;n+=3)c=(d[n]<<16&16711680)+(d[n+1]<<8&65280)+(255&d[n+2]),k.push($u[(f=c)>>18&63]+$u[f>>12&63]+$u[f>>6&63]+$u[63&f]);return k.join("")}function xw(d){if(2147483647<
d)throw new RangeError('The value "'+d+'" is invalid for option "size"');d=new Uint8Array(d);return Object.setPrototypeOf(d,df.prototype),d}function df(d,c,h){if("number"==typeof d){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return IQ(d)}return b0(d,c,h)}function b0(d,c,h){if("string"==typeof d)return function(k,n){"string"==typeof n&&""!==n||(n="utf8");if(!df.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|c0(k,
n),e=xw(b);k=e.write(k,n);k!==b&&(e=e.slice(0,k));return e}(d,c);if(ArrayBuffer.isView(d))return JQ(d);if(null==d)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(yw(d,ArrayBuffer)||d&&yw(d.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(yw(d,SharedArrayBuffer)||d&&yw(d.buffer,SharedArrayBuffer)))return Bda(d,c,h);if("number"==typeof d)throw new TypeError('The "value" argument must not be of type number. Received type number');
var f=d.valueOf&&d.valueOf();if(null!=f&&f!==d)return df.from(f,c,h);if(f=function(k){if(df.isBuffer(k)){var n=0|KQ(k.length),b=xw(n);return 0===b.length||k.copy(b,0,0,n),b}if(void 0!==k.length)return(n="number"!=typeof k.length)||(n=k.length,n=n!=n),n?xw(0):JQ(k);if("Buffer"===k.type&&Array.isArray(k.data))return JQ(k.data)}(d))return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof d[Symbol.toPrimitive])return df.from(d[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof d);}function d0(d){if("number"!=typeof d)throw new TypeError('"size" argument must be of type number');if(0>d)throw new RangeError('The value "'+d+'" is invalid for option "size"');}function IQ(d){return d0(d),xw(0>d?0:0|KQ(d))}function JQ(d){for(var c=0>d.length?0:0|KQ(d.length),h=xw(c),f=0;f<c;f+=1)h[f]=255&d[f];return h}function Bda(d,c,h){if(0>c||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var f;return f=void 0===c&&void 0===h?new Uint8Array(d):void 0===h?new Uint8Array(d,c):new Uint8Array(d,c,h),Object.setPrototypeOf(f,df.prototype),f}function KQ(d){if(2147483647<=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|d}function c0(d,c){if(df.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||yw(d,ArrayBuffer))return d.byteLength;if("string"!=typeof d)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof d);var h=d.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return LQ(d).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return e0(d).length;default:if(k)return f?-1:LQ(d).length;c=(""+c).toLowerCase();k=!0}}function Cda(d,c,h){var f=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(d||(d="utf8");;)switch(d){case "hex":d=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>d)&&(h=d);for(d="";c<h;++c)d+=Dda[this[c]];return d;case "utf8":case "utf-8":return f0(this,c,h);case "ascii":d="";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(127&this[c]);return d;case "latin1":case "binary":d="";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(this[c]);return d;case "base64":return 0===c&&h===this.length?MQ.fromByteArray(this):
MQ.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(d=0;d<c.length;d+=2)h+=String.fromCharCode(c[d]+256*c[d+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase();f=!0}}function sA(d,c,h){var f=d[c];d[c]=d[h];d[h]=f}function g0(d,c,h,f,k){if(0===d.length)return-1;"string"==typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=k?0:d.length-1),0>h&&(h=d.length+
h),h>=d.length){if(k)return-1;h=d.length-1}else if(0>h){if(!k)return-1;h=0}if("string"==typeof c&&(c=df.from(c,f)),df.isBuffer(c))return 0===c.length?-1:h0(d,c,h,f,k);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(d,c,h):Uint8Array.prototype.lastIndexOf.call(d,c,h):h0(d,[c],h,f,k);throw new TypeError("val must be string, number or Buffer");}function h0(d,c,h,f,k){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,
e=d.length,m=c.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>d.length||2>c.length)return-1;b=2;e/=2;m/=2;h/=2}if(k)for(f=-1;h<e;h++)if(n(d,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===m)return f*b}else-1!==f&&(h-=h-f),f=-1;else for(h+m>e&&(h=e-m);0<=h;h--){e=!0;for(f=0;f<m;f++)if(n(d,h+f)!==n(c,f)){e=!1;break}if(e)return h}return-1}function i0(d,c,h,f){for(var k=[],n=0;n<c.length;++n)k.push(255&c.charCodeAt(n));return kK(k,d,h,f)}
function f0(d,c,h){h=Math.min(d.length,h);for(var f=[];c<h;){var k,n,b=d[c],e=null,m=239<b?4:223<b?3:191<b?2:1;if(c+m<=h)switch(m){case 1:128>b&&(e=b);break;case 2:128==(192&(k=d[c+1]))&&127<(n=(31&b)<<6|63&k)&&(e=n);break;case 3:k=d[c+1];var a=d[c+2];128==(192&k)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&k)<<6|63&a)&&(55296>n||57343<n)&&(e=n);break;case 4:k=d[c+1];a=d[c+2];var g=d[c+3];128==(192&k)&&128==(192&a)&&128==(192&g)&&65535<(n=(15&b)<<18|(63&k)<<12|(63&a)<<6|63&g)&&1114112>n&&(e=n)}null===e?
(e=65533,m=1):65535<e&&(e-=65536,f.push(e>>>10&1023|55296),e=56320|1023&e);f.push(e);c+=m}d=f.length;if(4096>=d)f=String.fromCharCode.apply(String,f);else{h="";for(k=0;k<d;)h+=String.fromCharCode.apply(String,f.slice(k,k+=4096));f=h}return f}function Wn(d,c,h){if(0!=d%1||0>d)throw new RangeError("offset is not uint");if(d+c>h)throw new RangeError("Trying to access beyond buffer length");}function xq(d,c,h,f,k,n){if(!df.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>d.length)throw new RangeError("Index out of range");}function j0(d,c,h,f,k,n){if(h+f>d.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function k0(d,c,h,f,k){return c=+c,h>>>=0,k||j0(d,0,h,4),WC.write(d,c,h,f,23,4),h+4}function l0(d,c,h,f,k){return c=+c,h>>>=0,k||j0(d,0,h,8),WC.write(d,c,h,f,52,8),h+8}function LQ(d,c){var h;c=c||1/0;for(var f=d.length,k=null,n=[],b=0;b<
f;++b){if(55295<(h=d.charCodeAt(b))&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===f){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=65536+(k-55296<<10|h-56320)}else k&&-1<(c-=3)&&n.push(239,191,189);if(k=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function e0(d){return MQ.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(Eda,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(d))}function kK(d,c,h,f){for(var k=0;k<f&&!(k+h>=c.length||k>=d.length);++k)c[k+h]=d[k];return k}function yw(d,c){return d instanceof c||null!=d&&null!=d.constructor&&null!=d.constructor.name&&d.constructor.name===c.name}function m0(d,c){for(var h in d)c[h]=d[h]}function tA(d,
c,h){return av(d,c,h)}function OF(d){switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var k;;)switch(f){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(k)return;f=(""+f).toLowerCase();k=!0}}(c);if("string"!=typeof h&&(NQ.isEncoding===n0||!n0(c)))throw Error("Unknown encoding: "+c);return h||c}(d),this.encoding){case "utf16le":this.text=
Fda;this.end=Gda;d=4;break;case "utf8":this.fillLast=Hda;d=4;break;case "base64":this.text=Ida;this.end=Jda;d=3;break;default:return this.write=Kda,this.end=Lda,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=NQ.allocUnsafe(d)}function OQ(d){return 127>=d?0:6==d>>5?2:14==d>>4?3:30==d>>3?4:2==d>>6?-1:-2}function Hda(d){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&d[0]))var h=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<d.length){if(128!=(192&d[1])){h=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<d.length&&128!=(192&d[2])){h=(this.lastNeed=2,"\ufffd");break a}}h=void 0}return void 0!==h?h:this.lastNeed<=d.length?(d.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,c,0,d.length),this.lastNeed-=d.length,void 0)}function Fda(d,c){if(0==(d.length-c)%2){if(c=d.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=
d[d.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",c,d.length-1)}function Gda(d){d=d&&d.length?this.write(d):"";return this.lastNeed?d+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):d}function Ida(d,c){var h=(d.length-c)%3;return 0===h?d.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",
c,d.length-h))}function Jda(d){d=d&&d.length?this.write(d):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function Kda(d){return d.toString(this.encoding)}function Lda(d){return d&&d.length?this.write(d):""}function qs(d,c,h){h||(h=Error);var f=function(k,n,b){return b.call(this,"string"==typeof c?c:c(k,n,b))||this};$jscomp.inherits(f,h);f.prototype.name=h.name;f.prototype.code=d;o0[d]=f}function p0(d,c){if(Array.isArray(d)){var h=d.length;return d=d.map(function(f){return String(f)}),
2<h?"one of "+c+" "+d.slice(0,h-1).join(", ")+", or "+d[h-1]:2===h?"one of "+c+" "+d[0]+" or "+d[1]:"of "+c+" "+d[0]}return"of "+c+" "+String(d)}function PQ(d){try{if(!QQ.localStorage)return!1}catch(c){return!1}d=QQ.localStorage[d];return null!=d&&"true"===String(d).toLowerCase()}function q0(d,c){var h=Object.keys(d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(d);c&&(f=f.filter(function(k){return Object.getOwnPropertyDescriptor(d,k).enumerable}));h.push.apply(h,f)}return h}
function Mda(d,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(d,f.key,f)}}function r0(d,c){RQ(d,c);lK(d)}function lK(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function RQ(d,c){d.emit("error",c)}function Nda(){}function Zx(d,c,h){return c in d?Object.defineProperty(d,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[c]=h,d}function $x(d,
c){return{value:d,done:c}}function Oda(d){var c=d[ay];if(null!==c){var h=d[uA].read();null!==h&&(d[vA]=null,d[ay]=null,d[wA]=null,c($x(h,!1)))}}function Pda(d){s0.nextTick(Oda,d)}function t0(){function d(va,ma,ua){F=F||PF();va=va||{};"boolean"!=typeof ua&&(ua=ma instanceof F);this.objectMode=!!va.objectMode;ua&&(this.objectMode=this.objectMode||!!va.readableObjectMode);this.highWaterMark=aa(this,va,"readableHighWaterMark",ua);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==va.emitClose;this.autoDestroy=!!va.autoDestroy;this.destroyed=!1;this.defaultEncoding=va.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;va.encoding&&(ea||(ea=XC.StringDecoder),this.decoder=new ea(va.encoding),this.encoding=va.encoding)}function c(va){if(F=F||PF(),!(this instanceof
c))return new c(va);this._readableState=new d(va,this,this instanceof F);this.readable=!0;va&&("function"==typeof va.read&&(this._read=va.read),"function"==typeof va.destroy&&(this._destroy=va.destroy));I.call(this)}function h(va,ma,ua,Ma,Lb){W("readableAddChunk",ma);var ic,Vb=va._readableState;if(null===ma)Vb.reading=!1,function(jc,Pc){if(W("onEofChunk"),!Pc.ended){if(Pc.decoder){var Rb=Pc.decoder.end();Rb&&Rb.length&&(Pc.buffer.push(Rb),Pc.length+=Pc.objectMode?1:Rb.length)}Pc.ended=!0;Pc.sync?
n(jc):(Pc.needReadable=!1,Pc.emittedReadable||(Pc.emittedReadable=!0,b(jc)))}}(va,Vb);else if(Lb||(ic=function(jc,Pc){var Rb;var zd=Pc;M.isBuffer(zd)||zd instanceof N||"string"==typeof Pc||void 0===Pc||jc.objectMode||(Rb=new U("chunk",["string","Buffer","Uint8Array"],Pc));return Rb}(Vb,ma)),ic)hb(va,ic);else if(Vb.objectMode||ma&&0<ma.length)if("string"==typeof ma||Vb.objectMode||Object.getPrototypeOf(ma)===M.prototype||(ma=M.from(ma)),Ma)Vb.endEmitted?hb(va,new oa):f(va,Vb,ma,!0);else if(Vb.ended)hb(va,
new pa);else{if(Vb.destroyed)return!1;Vb.reading=!1;Vb.decoder&&!ua?(ma=Vb.decoder.write(ma),Vb.objectMode||0!==ma.length?f(va,Vb,ma,!1):e(va,Vb)):f(va,Vb,ma,!1)}else Ma||(Vb.reading=!1,e(va,Vb));return!Vb.ended&&(Vb.length<Vb.highWaterMark||0===Vb.length)}function f(va,ma,ua,Ma){ma.flowing&&0===ma.length&&!ma.sync?(ma.awaitDrain=0,va.emit("data",ua)):(ma.length+=ma.objectMode?1:ua.length,Ma?ma.buffer.unshift(ua):ma.buffer.push(ua),ma.needReadable&&n(va));e(va,ma)}function k(va,ma){if(0>=va||0===
ma.length&&ma.ended)va=0;else if(ma.objectMode)va=1;else if(va!=va)va=ma.flowing&&ma.length?ma.buffer.head.data.length:ma.length;else{if(va>ma.highWaterMark){var ua=va;var Ma=(1073741824<=ua?ua=1073741824:(ua--,ua|=ua>>>1,ua|=ua>>>2,ua|=ua>>>4,ua|=ua>>>8,ua|=ua>>>16,ua++),ua);ma.highWaterMark=Ma}va=va<=ma.length?va:ma.ended?ma.length:(ma.needReadable=!0,0)}return va}function n(va){var ma=va._readableState;W("emitReadable",ma.needReadable,ma.emittedReadable);ma.needReadable=!1;ma.emittedReadable||
(W("emitReadable",ma.flowing),ma.emittedReadable=!0,H.nextTick(b,va))}function b(va){var ma=va._readableState;W("emitReadable_",ma.destroyed,ma.length,ma.ended);ma.destroyed||!ma.length&&!ma.ended||(va.emit("readable"),ma.emittedReadable=!1);ma.needReadable=!ma.flowing&&!ma.ended&&ma.length<=ma.highWaterMark;r(va)}function e(va,ma){ma.readingMore||(ma.readingMore=!0,H.nextTick(m,va,ma))}function m(va,ma){for(;!ma.reading&&!ma.ended&&(ma.length<ma.highWaterMark||ma.flowing&&0===ma.length);){var ua=
ma.length;if(W("maybeReadMore read 0"),va.read(0),ua===ma.length)break}ma.readingMore=!1}function a(va){var ma=va._readableState;ma.readableListening=0<va.listenerCount("readable");ma.resumeScheduled&&!ma.paused?ma.flowing=!0:0<va.listenerCount("data")&&va.resume()}function g(va){W("readable nexttick read 0");va.read(0)}function l(va,ma){W("resume",ma.reading);ma.reading||va.read(0);ma.resumeScheduled=!1;va.emit("resume");r(va);ma.flowing&&!ma.reading&&va.read(0)}function r(va){var ma=va._readableState;
for(W("flow",ma.flowing);ma.flowing&&null!==va.read(););}function v(va,ma){return 0===ma.length?null:(ma.objectMode?ua=ma.buffer.shift():!va||va>=ma.length?(ua=ma.decoder?ma.buffer.join(""):1===ma.buffer.length?ma.buffer.first():ma.buffer.concat(ma.length),ma.buffer.clear()):ua=ma.buffer.consume(va,ma.decoder),ua);var ua}function y(va){var ma=va._readableState;W("endReadable",ma.endEmitted);ma.endEmitted||(ma.ended=!0,H.nextTick(A,ma,va))}function A(va,ma){if(W("endReadableNT",va.endEmitted,va.length),
!va.endEmitted&&0===va.length&&(va.endEmitted=!0,ma.readable=!1,ma.emit("end"),va.autoDestroy))va=ma._writableState,(!va||va.autoDestroy&&va.finished)&&ma.destroy()}function E(va,ma){for(var ua=0,Ma=va.length;ua<Ma;ua++)if(va[ua]===ma)return ua;return-1}if(u0)return SQ;u0=!0;var F,H=uj;SQ=c;c.ReadableState=d;bv.EventEmitter;var I=mK,M=Ni.Buffer,N=Qda.Uint8Array||function(){},X=Rh;var W=X&&X.debuglog?X.debuglog("stream"):function(){};var ea,Aa,Ka,K=Rda;X=v0;var aa=w0.getHighWaterMark,T=wt.codes,U=
T.ERR_INVALID_ARG_TYPE,pa=T.ERR_STREAM_PUSH_AFTER_EOF,fa=T.ERR_METHOD_NOT_IMPLEMENTED,oa=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;zi(c,I);var hb=X.errorOrDestroy,Cb=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(va){this._readableState&&(this._readableState.destroyed=va)}});c.prototype.destroy=X.destroy;c.prototype._undestroy=X.undestroy;c.prototype._destroy=
function(va,ma){ma(va)};c.prototype.push=function(va,ma){var ua,Ma=this._readableState;return Ma.objectMode?ua=!0:"string"==typeof va&&((ma=ma||Ma.defaultEncoding)!==Ma.encoding&&(va=M.from(va,ma),ma=""),ua=!0),h(this,va,ma,!1,ua)};c.prototype.unshift=function(va){return h(this,va,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(va){ea||(ea=XC.StringDecoder);va=new ea(va);this._readableState.decoder=va;this._readableState.encoding=
this._readableState.decoder.encoding;for(var ma=this._readableState.buffer.head,ua="";null!==ma;)ua+=va.write(ma.data),ma=ma.next;return this._readableState.buffer.clear(),""!==ua&&this._readableState.buffer.push(ua),this._readableState.length=ua.length,this};return c.prototype.read=function(va){W("read",va);va=parseInt(va,10);var ma=this._readableState,ua=va;if(0!==va&&(ma.emittedReadable=!1),0===va&&ma.needReadable&&((0!==ma.highWaterMark?ma.length>=ma.highWaterMark:0<ma.length)||ma.ended))return W("read: emitReadable",
ma.length,ma.ended),0===ma.length&&ma.ended?y(this):n(this),null;if(0===(va=k(va,ma))&&ma.ended)return 0===ma.length&&y(this),null;var Ma,Lb=ma.needReadable;return W("need readable",Lb),(0===ma.length||ma.length-va<ma.highWaterMark)&&W("length less than watermark",Lb=!0),ma.ended||ma.reading?W("reading or ended",!1):Lb&&(W("do read"),ma.reading=!0,ma.sync=!0,0===ma.length&&(ma.needReadable=!0),this._read(ma.highWaterMark),ma.sync=!1,ma.reading||(va=k(ua,ma))),null===(Ma=0<va?v(va,ma):null)?(ma.needReadable=
ma.length<=ma.highWaterMark,va=0):(ma.length-=va,ma.awaitDrain=0),0===ma.length&&(ma.ended||(ma.needReadable=!0),ua!==va&&ma.ended&&y(this)),null!==Ma&&this.emit("data",Ma),Ma},c.prototype._read=function(va){hb(this,new fa("_read()"))},c.prototype.pipe=function(va,ma){function ua(Da,Pa){W("onunpipe");Da===Rb&&Pa&&!1===Pa.hasUnpiped&&(Pa.hasUnpiped=!0,W("cleanup"),va.removeListener("close",Vb),va.removeListener("finish",jc),va.removeListener("drain",ld),va.removeListener("error",ic),va.removeListener("unpipe",
ua),Rb.removeListener("end",Ma),Rb.removeListener("end",Pc),Rb.removeListener("data",Lb),la=!0,!zd.awaitDrain||va._writableState&&!va._writableState.needDrain||ld())}function Ma(){W("onend");va.end()}function Lb(Da){W("ondata");Da=va.write(Da);W("dest.write",Da);!1===Da&&((1===zd.pipesCount&&zd.pipes===va||1<zd.pipesCount&&-1!==E(zd.pipes,va))&&!la&&(W("false write response, pause",zd.awaitDrain),zd.awaitDrain++),Rb.pause())}function ic(Da){W("onerror",Da);Pc();va.removeListener("error",ic);0===va.listeners("error").length&&
hb(va,Da)}function Vb(){va.removeListener("finish",jc);Pc()}function jc(){W("onfinish");va.removeListener("close",Vb);Pc()}function Pc(){W("unpipe");Rb.unpipe(va)}var Rb=this,zd=this._readableState;switch(zd.pipesCount){case 0:zd.pipes=va;break;case 1:zd.pipes=[zd.pipes,va];break;default:zd.pipes.push(va)}zd.pipesCount+=1;W("pipe count=%d opts=%j",zd.pipesCount,ma);ma=ma&&!1===ma.end||va===H.stdout||va===H.stderr?Pc:Ma;zd.endEmitted?H.nextTick(ma):Rb.once("end",ma);va.on("unpipe",ua);var ld=function(Da){return function(){var Pa=
Da._readableState;W("pipeOnDrain",Pa.awaitDrain);Pa.awaitDrain&&Pa.awaitDrain--;0===Pa.awaitDrain&&Da.listeners("data").length&&(Pa.flowing=!0,r(Da))}}(Rb);va.on("drain",ld);var la=!1;return Rb.on("data",Lb),function(Da,Pa,yb){if("function"==typeof Da.prependListener)return Da.prependListener(Pa,yb);Da._events&&Da._events[Pa]?Array.isArray(Da._events[Pa])?Da._events[Pa].unshift(yb):Da._events[Pa]=[yb,Da._events[Pa]]:Da.on(Pa,yb)}(va,"error",ic),va.once("close",Vb),va.once("finish",jc),va.emit("pipe",
Rb),zd.flowing||(W("pipe resume"),Rb.resume()),va},c.prototype.unpipe=function(va){var ma=this._readableState,ua={hasUnpiped:!1};if(0===ma.pipesCount)return this;if(1===ma.pipesCount)return va&&va!==ma.pipes||(va||(va=ma.pipes),ma.pipes=null,ma.pipesCount=0,ma.flowing=!1,va&&va.emit("unpipe",this,ua)),this;if(!va){va=ma.pipes;ua=ma.pipesCount;ma.pipes=null;ma.pipesCount=0;ma.flowing=!1;for(ma=0;ma<ua;ma++)va[ma].emit("unpipe",this,{hasUnpiped:!1});return this}var Ma=E(ma.pipes,va);return-1===Ma||
(ma.pipes.splice(Ma,1),--ma.pipesCount,1===ma.pipesCount&&(ma.pipes=ma.pipes[0]),va.emit("unpipe",this,ua)),this},c.prototype.on=function(va,ma){ma=I.prototype.on.call(this,va,ma);var ua=this._readableState;return"data"===va?(ua.readableListening=0<this.listenerCount("readable"),!1!==ua.flowing&&this.resume()):"readable"===va&&(ua.endEmitted||ua.readableListening||(ua.readableListening=ua.needReadable=!0,ua.flowing=!1,ua.emittedReadable=!1,W("on readable",ua.length,ua.reading),ua.length?n(this):ua.reading||
H.nextTick(g,this))),ma},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(va,ma){ma=I.prototype.removeListener.call(this,va,ma);return"readable"===va&&H.nextTick(a,this),ma},c.prototype.removeAllListeners=function(va){var ma=I.prototype.removeAllListeners.apply(this,arguments);return"readable"!==va&&void 0!==va||H.nextTick(a,this),ma},c.prototype.resume=function(){var va=this._readableState;va.flowing||(W("resume"),va.flowing=!va.readableListening,va.resumeScheduled||(va.resumeScheduled=
!0,H.nextTick(l,this,va)));return va.paused=!1,this},c.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(va){var ma=this,ua=this._readableState,Ma=!1,Lb;for(Lb in va.on("end",function(){if(W("wrapped end"),ua.decoder&&!ua.ended){var ic=ua.decoder.end();ic&&ic.length&&ma.push(ic)}ma.push(null)}),va.on("data",
function(ic){(W("wrapped data"),ua.decoder&&(ic=ua.decoder.write(ic)),ua.objectMode&&null==ic)||(ua.objectMode||ic&&ic.length)&&(ma.push(ic)||(Ma=!0,va.pause()))}),va)void 0===this[Lb]&&"function"==typeof va[Lb]&&(this[Lb]=function(ic){return function(){return va[ic].apply(va,arguments)}}(Lb));for(Lb=0;Lb<Cb.length;Lb++)va.on(Cb[Lb],this.emit.bind(this,Cb[Lb]));return this._read=function(ic){W("wrapped _read",ic);Ma&&(Ma=!1,va.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=
function(){return void 0===Aa&&(Aa=Sda),Aa(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(va){this._readableState&&(this._readableState.flowing=
va)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(va,ma){return void 0===Ka&&(Ka=x0),Ka(c,va,ma)}),SQ}function Tda(){function d(T){var U=this;this.entry=this.next=null;this.finish=function(){var pa=U.entry;for(U.entry=null;pa;){var fa=pa.callback;T.pendingcb--;fa(void 0);pa=pa.next}T.corkedRequestsFree.next=U;!0}}function c(){}function h(T,U,pa){g=g||PF();T=T||{};"boolean"!=
typeof pa&&(pa=U instanceof g);this.objectMode=!!T.objectMode;pa&&(this.objectMode=this.objectMode||!!T.writableObjectMode);this.highWaterMark=H(this,T,"writableHighWaterMark",pa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==T.decodeStrings;this.defaultEncoding=T.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){!function(oa,hb){var Cb=oa._writableState,
va=Cb.sync,ma=Cb.writecb;if("function"!=typeof ma)throw new X;(function(ua){ua.writing=!1;ua.writecb=null;ua.length-=ua.writelen;ua.writelen=0}(Cb),hb)?!function(ua,Ma,Lb,ic,Vb){--Ma.pendingcb;Lb?(l.nextTick(Vb,ic),l.nextTick(a,ua,Ma),ua._writableState.errorEmitted=!0,aa(ua,ic)):(Vb(ic),ua._writableState.errorEmitted=!0,aa(ua,ic),a(ua,Ma))}(oa,Cb,va,hb,ma):((hb=e(Cb)||oa.destroyed)||Cb.corked||Cb.bufferProcessing||!Cb.bufferedRequest||b(oa,Cb),va?l.nextTick(n,oa,Cb,hb,ma):n(oa,Cb,hb,ma))}(U,fa)};
this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==T.emitClose;this.autoDestroy=!!T.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}function f(T){var U=this instanceof(g=g||PF());if(!U&&!E.call(f,this))return new f(T);this._writableState=new h(T,this,U);this.writable=!0;T&&("function"==typeof T.write&&(this._write=T.write),"function"==typeof T.writev&&(this._writev=
T.writev),"function"==typeof T.destroy&&(this._destroy=T.destroy),"function"==typeof T.final&&(this._final=T.final));v.call(this)}function k(T,U,pa,fa,oa,hb,Cb){U.writelen=fa;U.writecb=Cb;U.writing=!0;U.sync=!0;U.destroyed?U.onwrite(new ea("write")):pa?T._writev(oa,U.onwrite):T._write(oa,hb,U.onwrite);U.sync=!1}function n(T,U,pa,fa){pa||(0===U.length&&U.needDrain&&(U.needDrain=!1,T.emit("drain")),!0);U.pendingcb--;fa();a(T,U)}function b(T,U){U.bufferProcessing=!0;var pa=U.bufferedRequest;if(T._writev&&
pa&&pa.next){var fa=Array(U.bufferedRequestCount),oa=U.corkedRequestsFree;oa.entry=pa;for(var hb=0,Cb=!0;pa;)fa[hb]=pa,pa.isBuf||(Cb=!1),pa=pa.next,hb+=1;fa.allBuffers=Cb;k(T,U,!0,U.length,fa,"",oa.finish);U.pendingcb++;U.lastBufferedRequest=null;oa.next?(U.corkedRequestsFree=oa.next,oa.next=null):U.corkedRequestsFree=new d(U);U.bufferedRequestCount=0}else{for(;pa&&(fa=pa.chunk,k(T,U,!1,U.objectMode?1:fa.length,fa,pa.encoding,pa.callback),pa=pa.next,U.bufferedRequestCount--,!U.writing););null===pa&&
(U.lastBufferedRequest=null)}U.bufferedRequest=pa;U.bufferProcessing=!1}function e(T){return T.ending&&0===T.length&&null===T.bufferedRequest&&!T.finished&&!T.writing}function m(T,U){T._final(function(pa){U.pendingcb--;pa&&aa(T,pa);U.prefinished=!0;T.emit("prefinish");a(T,U)})}function a(T,U){var pa=e(U),fa;if(fa=pa)U.prefinished||U.finalCalled||("function"!=typeof T._final||U.destroyed?(U.prefinished=!0,T.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,l.nextTick(m,T,U))),fa=(!0,0===U.pendingcb&&
(U.finished=!0,T.emit("finish"),U.autoDestroy));fa&&(U=T._readableState,(!U||U.autoDestroy&&U.endEmitted)&&T.destroy());return pa}if(y0)return TQ;y0=!0;var g,l=uj;TQ=f;f.WritableState=h;var r={deprecate:z0},v=mK,y=Ni.Buffer,A=Uda.Uint8Array||function(){},E,F=v0,H=w0.getHighWaterMark,I=wt.codes,M=I.ERR_INVALID_ARG_TYPE,N=I.ERR_METHOD_NOT_IMPLEMENTED,X=I.ERR_MULTIPLE_CALLBACK,W=I.ERR_STREAM_CANNOT_PIPE,ea=I.ERR_STREAM_DESTROYED,Aa=I.ERR_STREAM_NULL_VALUES,Ka=I.ERR_STREAM_WRITE_AFTER_END,K=I.ERR_UNKNOWN_ENCODING,
aa=F.errorOrDestroy;return zi(f,v),h.prototype.getBuffer=function(){for(var T=this.bufferedRequest,U=[];T;)U.push(T),T=T.next;return U},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(T){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,
Symbol.hasInstance,{value:function(T){return!!E.call(this,T)||this===f&&T&&T._writableState instanceof h}})):E=function(T){return T instanceof this},f.prototype.pipe=function(){aa(this,new W)},f.prototype.write=function(T,U,pa){var fa,oa=this._writableState,hb=!1,Cb=!oa.objectMode&&(fa=T,y.isBuffer(fa)||fa instanceof A);return Cb&&!y.isBuffer(T)&&(T=y.from(T)),"function"==typeof U&&(pa=U,U=null),Cb?U="buffer":U||(U=oa.defaultEncoding),"function"!=typeof pa&&(pa=c),oa.ending?function(va,ma){var ua=
new Ka;aa(va,ua);l.nextTick(ma,ua)}(this,pa):(Cb||function(va,ma,ua,Ma){var Lb;return null===ua?Lb=new Aa:"string"==typeof ua||ma.objectMode||(Lb=new M("chunk",["string","Buffer"],ua)),!Lb||(aa(va,Lb),l.nextTick(Ma,Lb),!1)}(this,oa,T,pa))&&(oa.pendingcb++,hb=function(va,ma,ua,Ma,Lb,ic){if(!ua){var Vb=Ma;ma.objectMode||!1===ma.decodeStrings||"string"!=typeof Vb||(Vb=y.from(Vb,Lb));Ma!==Vb&&(ua=!0,Lb="buffer",Ma=Vb)}var jc=ma.objectMode?1:Ma.length;ma.length+=jc;(Vb=ma.length<ma.highWaterMark)||(ma.needDrain=
!0);ma.writing||ma.corked?(va=ma.lastBufferedRequest,ma.lastBufferedRequest={chunk:Ma,encoding:Lb,isBuf:ua,callback:ic,next:null},va?va.next=ma.lastBufferedRequest:ma.bufferedRequest=ma.lastBufferedRequest,ma.bufferedRequestCount+=1):k(va,ma,!1,jc,Ma,Lb,ic);return Vb}(this,oa,Cb,T,U,pa)),hb},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||b(this,T))},
f.prototype.setDefaultEncoding=function(T){if("string"==typeof T&&(T=T.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((T+"").toLowerCase())))throw new K(T);return this._writableState.defaultEncoding=T,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
f.prototype._write=function(T,U,pa){pa(new N("_write()"))},f.prototype._writev=null,f.prototype.end=function(T,U,pa){var fa=this._writableState;"function"==typeof T?(pa=T,T=null,U=null):"function"==typeof U&&(pa=U,U=null);null!=T&&this.write(T,U);fa.corked&&(fa.corked=1,this.uncork());fa.ending||(T=pa,fa.ending=!0,a(this,fa),T&&(fa.finished?l.nextTick(T):this.once("finish",T)),fa.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}}),f.prototype.destroy=F.destroy,f.prototype._undestroy=F.undestroy,f.prototype._destroy=function(T,U){U(T)},TQ}function PF(){function d(a){if(!(this instanceof d))return new d(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&
(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(a){a.end()}if(A0)return UQ;A0=!0;var f=uj,k=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};UQ=d;var n=t0(),b=Tda();zi(d,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var m=k[e];d.prototype[m]||(d.prototype[m]=b.prototype[m])}return Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),UQ}function Vda(){}function B0(d,c){var h=Object.keys(d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(d);c&&(f=f.filter(function(k){return Object.getOwnPropertyDescriptor(d,k).enumerable}));h.push.apply(h,f)}return h}function Wda(d,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(d,f.key,
f)}}function C0(d,c){VQ(d,c);nK(d)}function nK(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function VQ(d,c){d.emit("error",c)}function by(d,c,h){return c in d?Object.defineProperty(d,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[c]=h,d}function cy(d,c){return{value:d,done:c}}function Xda(d){var c=d[dy];if(null!==c){var h=d[xA].read();null!==h&&(d[yA]=null,d[dy]=null,d[zA]=null,c(cy(h,!1)))}}function Yda(d){D0.nextTick(Xda,
d)}function Zda(){function d(va,ma,ua){F=F||oK();va=va||{};"boolean"!=typeof ua&&(ua=ma instanceof F);this.objectMode=!!va.objectMode;ua&&(this.objectMode=this.objectMode||!!va.readableObjectMode);this.highWaterMark=aa(this,va,"readableHighWaterMark",ua);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=
!1!==va.emitClose;this.autoDestroy=!!va.autoDestroy;this.destroyed=!1;this.defaultEncoding=va.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;va.encoding&&(ea||(ea=XC.StringDecoder),this.decoder=new ea(va.encoding),this.encoding=va.encoding)}function c(va){if(F=F||oK(),!(this instanceof c))return new c(va);this._readableState=new d(va,this,this instanceof F);this.readable=!0;va&&("function"==typeof va.read&&(this._read=va.read),"function"==typeof va.destroy&&
(this._destroy=va.destroy));I.call(this)}function h(va,ma,ua,Ma,Lb){W("readableAddChunk",ma);var ic,Vb=va._readableState;if(null===ma)Vb.reading=!1,function(jc,Pc){if(W("onEofChunk"),!Pc.ended){if(Pc.decoder){var Rb=Pc.decoder.end();Rb&&Rb.length&&(Pc.buffer.push(Rb),Pc.length+=Pc.objectMode?1:Rb.length)}Pc.ended=!0;Pc.sync?n(jc):(Pc.needReadable=!1,Pc.emittedReadable||(Pc.emittedReadable=!0,b(jc)))}}(va,Vb);else if(Lb||(ic=function(jc,Pc){var Rb;var zd=Pc;M.isBuffer(zd)||zd instanceof N||"string"==
typeof Pc||void 0===Pc||jc.objectMode||(Rb=new U("chunk",["string","Buffer","Uint8Array"],Pc));return Rb}(Vb,ma)),ic)hb(va,ic);else if(Vb.objectMode||ma&&0<ma.length)if("string"==typeof ma||Vb.objectMode||Object.getPrototypeOf(ma)===M.prototype||(ma=M.from(ma)),Ma)Vb.endEmitted?hb(va,new oa):f(va,Vb,ma,!0);else if(Vb.ended)hb(va,new pa);else{if(Vb.destroyed)return!1;Vb.reading=!1;Vb.decoder&&!ua?(ma=Vb.decoder.write(ma),Vb.objectMode||0!==ma.length?f(va,Vb,ma,!1):e(va,Vb)):f(va,Vb,ma,!1)}else Ma||
(Vb.reading=!1,e(va,Vb));return!Vb.ended&&(Vb.length<Vb.highWaterMark||0===Vb.length)}function f(va,ma,ua,Ma){ma.flowing&&0===ma.length&&!ma.sync?(ma.awaitDrain=0,va.emit("data",ua)):(ma.length+=ma.objectMode?1:ua.length,Ma?ma.buffer.unshift(ua):ma.buffer.push(ua),ma.needReadable&&n(va));e(va,ma)}function k(va,ma){if(0>=va||0===ma.length&&ma.ended)va=0;else if(ma.objectMode)va=1;else if(va!=va)va=ma.flowing&&ma.length?ma.buffer.head.data.length:ma.length;else{if(va>ma.highWaterMark){var ua=va;var Ma=
(1073741824<=ua?ua=1073741824:(ua--,ua|=ua>>>1,ua|=ua>>>2,ua|=ua>>>4,ua|=ua>>>8,ua|=ua>>>16,ua++),ua);ma.highWaterMark=Ma}va=va<=ma.length?va:ma.ended?ma.length:(ma.needReadable=!0,0)}return va}function n(va){var ma=va._readableState;W("emitReadable",ma.needReadable,ma.emittedReadable);ma.needReadable=!1;ma.emittedReadable||(W("emitReadable",ma.flowing),ma.emittedReadable=!0,H.nextTick(b,va))}function b(va){var ma=va._readableState;W("emitReadable_",ma.destroyed,ma.length,ma.ended);ma.destroyed||
!ma.length&&!ma.ended||(va.emit("readable"),ma.emittedReadable=!1);ma.needReadable=!ma.flowing&&!ma.ended&&ma.length<=ma.highWaterMark;r(va)}function e(va,ma){ma.readingMore||(ma.readingMore=!0,H.nextTick(m,va,ma))}function m(va,ma){for(;!ma.reading&&!ma.ended&&(ma.length<ma.highWaterMark||ma.flowing&&0===ma.length);){var ua=ma.length;if(W("maybeReadMore read 0"),va.read(0),ua===ma.length)break}ma.readingMore=!1}function a(va){var ma=va._readableState;ma.readableListening=0<va.listenerCount("readable");
ma.resumeScheduled&&!ma.paused?ma.flowing=!0:0<va.listenerCount("data")&&va.resume()}function g(va){W("readable nexttick read 0");va.read(0)}function l(va,ma){W("resume",ma.reading);ma.reading||va.read(0);ma.resumeScheduled=!1;va.emit("resume");r(va);ma.flowing&&!ma.reading&&va.read(0)}function r(va){var ma=va._readableState;for(W("flow",ma.flowing);ma.flowing&&null!==va.read(););}function v(va,ma){return 0===ma.length?null:(ma.objectMode?ua=ma.buffer.shift():!va||va>=ma.length?(ua=ma.decoder?ma.buffer.join(""):
1===ma.buffer.length?ma.buffer.first():ma.buffer.concat(ma.length),ma.buffer.clear()):ua=ma.buffer.consume(va,ma.decoder),ua);var ua}function y(va){var ma=va._readableState;W("endReadable",ma.endEmitted);ma.endEmitted||(ma.ended=!0,H.nextTick(A,ma,va))}function A(va,ma){if(W("endReadableNT",va.endEmitted,va.length),!va.endEmitted&&0===va.length&&(va.endEmitted=!0,ma.readable=!1,ma.emit("end"),va.autoDestroy))va=ma._writableState,(!va||va.autoDestroy&&va.finished)&&ma.destroy()}function E(va,ma){for(var ua=
0,Ma=va.length;ua<Ma;ua++)if(va[ua]===ma)return ua;return-1}if(E0)return WQ;E0=!0;var F,H=uj;WQ=c;c.ReadableState=d;bv.EventEmitter;var I=mK,M=Ni.Buffer,N=$da.Uint8Array||function(){},X=Rh;var W=X&&X.debuglog?X.debuglog("stream"):function(){};var ea,Aa,Ka,K=aea;X=F0;var aa=G0.getHighWaterMark,T=wt.codes,U=T.ERR_INVALID_ARG_TYPE,pa=T.ERR_STREAM_PUSH_AFTER_EOF,fa=T.ERR_METHOD_NOT_IMPLEMENTED,oa=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;zi(c,I);var hb=X.errorOrDestroy,Cb=["error","close","destroy","pause",
"resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(va){this._readableState&&(this._readableState.destroyed=va)}});c.prototype.destroy=X.destroy;c.prototype._undestroy=X.undestroy;c.prototype._destroy=function(va,ma){ma(va)};c.prototype.push=function(va,ma){var ua,Ma=this._readableState;return Ma.objectMode?ua=!0:"string"==typeof va&&((ma=ma||Ma.defaultEncoding)!==Ma.encoding&&(va=M.from(va,
ma),ma=""),ua=!0),h(this,va,ma,!1,ua)};c.prototype.unshift=function(va){return h(this,va,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(va){ea||(ea=XC.StringDecoder);va=new ea(va);this._readableState.decoder=va;this._readableState.encoding=this._readableState.decoder.encoding;for(var ma=this._readableState.buffer.head,ua="";null!==ma;)ua+=va.write(ma.data),ma=ma.next;return this._readableState.buffer.clear(),""!==ua&&this._readableState.buffer.push(ua),
this._readableState.length=ua.length,this};return c.prototype.read=function(va){W("read",va);va=parseInt(va,10);var ma=this._readableState,ua=va;if(0!==va&&(ma.emittedReadable=!1),0===va&&ma.needReadable&&((0!==ma.highWaterMark?ma.length>=ma.highWaterMark:0<ma.length)||ma.ended))return W("read: emitReadable",ma.length,ma.ended),0===ma.length&&ma.ended?y(this):n(this),null;if(0===(va=k(va,ma))&&ma.ended)return 0===ma.length&&y(this),null;var Ma,Lb=ma.needReadable;return W("need readable",Lb),(0===
ma.length||ma.length-va<ma.highWaterMark)&&W("length less than watermark",Lb=!0),ma.ended||ma.reading?W("reading or ended",!1):Lb&&(W("do read"),ma.reading=!0,ma.sync=!0,0===ma.length&&(ma.needReadable=!0),this._read(ma.highWaterMark),ma.sync=!1,ma.reading||(va=k(ua,ma))),null===(Ma=0<va?v(va,ma):null)?(ma.needReadable=ma.length<=ma.highWaterMark,va=0):(ma.length-=va,ma.awaitDrain=0),0===ma.length&&(ma.ended||(ma.needReadable=!0),ua!==va&&ma.ended&&y(this)),null!==Ma&&this.emit("data",Ma),Ma},c.prototype._read=
function(va){hb(this,new fa("_read()"))},c.prototype.pipe=function(va,ma){function ua(Da,Pa){W("onunpipe");Da===Rb&&Pa&&!1===Pa.hasUnpiped&&(Pa.hasUnpiped=!0,W("cleanup"),va.removeListener("close",Vb),va.removeListener("finish",jc),va.removeListener("drain",ld),va.removeListener("error",ic),va.removeListener("unpipe",ua),Rb.removeListener("end",Ma),Rb.removeListener("end",Pc),Rb.removeListener("data",Lb),la=!0,!zd.awaitDrain||va._writableState&&!va._writableState.needDrain||ld())}function Ma(){W("onend");
va.end()}function Lb(Da){W("ondata");Da=va.write(Da);W("dest.write",Da);!1===Da&&((1===zd.pipesCount&&zd.pipes===va||1<zd.pipesCount&&-1!==E(zd.pipes,va))&&!la&&(W("false write response, pause",zd.awaitDrain),zd.awaitDrain++),Rb.pause())}function ic(Da){W("onerror",Da);Pc();va.removeListener("error",ic);0===va.listeners("error").length&&hb(va,Da)}function Vb(){va.removeListener("finish",jc);Pc()}function jc(){W("onfinish");va.removeListener("close",Vb);Pc()}function Pc(){W("unpipe");Rb.unpipe(va)}
var Rb=this,zd=this._readableState;switch(zd.pipesCount){case 0:zd.pipes=va;break;case 1:zd.pipes=[zd.pipes,va];break;default:zd.pipes.push(va)}zd.pipesCount+=1;W("pipe count=%d opts=%j",zd.pipesCount,ma);ma=ma&&!1===ma.end||va===H.stdout||va===H.stderr?Pc:Ma;zd.endEmitted?H.nextTick(ma):Rb.once("end",ma);va.on("unpipe",ua);var ld=function(Da){return function(){var Pa=Da._readableState;W("pipeOnDrain",Pa.awaitDrain);Pa.awaitDrain&&Pa.awaitDrain--;0===Pa.awaitDrain&&Da.listeners("data").length&&(Pa.flowing=
!0,r(Da))}}(Rb);va.on("drain",ld);var la=!1;return Rb.on("data",Lb),function(Da,Pa,yb){if("function"==typeof Da.prependListener)return Da.prependListener(Pa,yb);Da._events&&Da._events[Pa]?Array.isArray(Da._events[Pa])?Da._events[Pa].unshift(yb):Da._events[Pa]=[yb,Da._events[Pa]]:Da.on(Pa,yb)}(va,"error",ic),va.once("close",Vb),va.once("finish",jc),va.emit("pipe",Rb),zd.flowing||(W("pipe resume"),Rb.resume()),va},c.prototype.unpipe=function(va){var ma=this._readableState,ua={hasUnpiped:!1};if(0===
ma.pipesCount)return this;if(1===ma.pipesCount)return va&&va!==ma.pipes||(va||(va=ma.pipes),ma.pipes=null,ma.pipesCount=0,ma.flowing=!1,va&&va.emit("unpipe",this,ua)),this;if(!va){va=ma.pipes;ua=ma.pipesCount;ma.pipes=null;ma.pipesCount=0;ma.flowing=!1;for(ma=0;ma<ua;ma++)va[ma].emit("unpipe",this,{hasUnpiped:!1});return this}var Ma=E(ma.pipes,va);return-1===Ma||(ma.pipes.splice(Ma,1),--ma.pipesCount,1===ma.pipesCount&&(ma.pipes=ma.pipes[0]),va.emit("unpipe",this,ua)),this},c.prototype.on=function(va,
ma){ma=I.prototype.on.call(this,va,ma);var ua=this._readableState;return"data"===va?(ua.readableListening=0<this.listenerCount("readable"),!1!==ua.flowing&&this.resume()):"readable"===va&&(ua.endEmitted||ua.readableListening||(ua.readableListening=ua.needReadable=!0,ua.flowing=!1,ua.emittedReadable=!1,W("on readable",ua.length,ua.reading),ua.length?n(this):ua.reading||H.nextTick(g,this))),ma},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(va,ma){ma=I.prototype.removeListener.call(this,
va,ma);return"readable"===va&&H.nextTick(a,this),ma},c.prototype.removeAllListeners=function(va){var ma=I.prototype.removeAllListeners.apply(this,arguments);return"readable"!==va&&void 0!==va||H.nextTick(a,this),ma},c.prototype.resume=function(){var va=this._readableState;va.flowing||(W("resume"),va.flowing=!va.readableListening,va.resumeScheduled||(va.resumeScheduled=!0,H.nextTick(l,this,va)));return va.paused=!1,this},c.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),
!1!==this._readableState.flowing&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(va){var ma=this,ua=this._readableState,Ma=!1,Lb;for(Lb in va.on("end",function(){if(W("wrapped end"),ua.decoder&&!ua.ended){var ic=ua.decoder.end();ic&&ic.length&&ma.push(ic)}ma.push(null)}),va.on("data",function(ic){(W("wrapped data"),ua.decoder&&(ic=ua.decoder.write(ic)),ua.objectMode&&null==ic)||(ua.objectMode||ic&&ic.length)&&(ma.push(ic)||
(Ma=!0,va.pause()))}),va)void 0===this[Lb]&&"function"==typeof va[Lb]&&(this[Lb]=function(ic){return function(){return va[ic].apply(va,arguments)}}(Lb));for(Lb=0;Lb<Cb.length;Lb++)va.on(Cb[Lb],this.emit.bind(this,Cb[Lb]));return this._read=function(ic){W("wrapped _read",ic);Ma&&(Ma=!1,va.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===Aa&&(Aa=bea),Aa(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),
Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(va){this._readableState&&(this._readableState.flowing=va)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(va,
ma){return void 0===Ka&&(Ka=x0),Ka(c,va,ma)}),WQ}function H0(){function d(T){var U=this;this.entry=this.next=null;this.finish=function(){var pa=U.entry;for(U.entry=null;pa;){var fa=pa.callback;T.pendingcb--;fa(void 0);pa=pa.next}T.corkedRequestsFree.next=U;!0}}function c(){}function h(T,U,pa){g=g||oK();T=T||{};"boolean"!=typeof pa&&(pa=U instanceof g);this.objectMode=!!T.objectMode;pa&&(this.objectMode=this.objectMode||!!T.writableObjectMode);this.highWaterMark=H(this,T,"writableHighWaterMark",pa);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==T.decodeStrings;this.defaultEncoding=T.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){!function(oa,hb){var Cb=oa._writableState,va=Cb.sync,ma=Cb.writecb;if("function"!=typeof ma)throw new X;(function(ua){ua.writing=!1;ua.writecb=null;ua.length-=ua.writelen;ua.writelen=0}(Cb),hb)?!function(ua,Ma,Lb,ic,Vb){--Ma.pendingcb;
Lb?(l.nextTick(Vb,ic),l.nextTick(a,ua,Ma),ua._writableState.errorEmitted=!0,aa(ua,ic)):(Vb(ic),ua._writableState.errorEmitted=!0,aa(ua,ic),a(ua,Ma))}(oa,Cb,va,hb,ma):((hb=e(Cb)||oa.destroyed)||Cb.corked||Cb.bufferProcessing||!Cb.bufferedRequest||b(oa,Cb),va?l.nextTick(n,oa,Cb,hb,ma):n(oa,Cb,hb,ma))}(U,fa)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==T.emitClose;this.autoDestroy=!!T.autoDestroy;
this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}function f(T){var U=this instanceof(g=g||oK());if(!U&&!E.call(f,this))return new f(T);this._writableState=new h(T,this,U);this.writable=!0;T&&("function"==typeof T.write&&(this._write=T.write),"function"==typeof T.writev&&(this._writev=T.writev),"function"==typeof T.destroy&&(this._destroy=T.destroy),"function"==typeof T.final&&(this._final=T.final));v.call(this)}function k(T,U,pa,fa,oa,hb,Cb){U.writelen=fa;U.writecb=Cb;U.writing=!0;
U.sync=!0;U.destroyed?U.onwrite(new ea("write")):pa?T._writev(oa,U.onwrite):T._write(oa,hb,U.onwrite);U.sync=!1}function n(T,U,pa,fa){pa||(0===U.length&&U.needDrain&&(U.needDrain=!1,T.emit("drain")),!0);U.pendingcb--;fa();a(T,U)}function b(T,U){U.bufferProcessing=!0;var pa=U.bufferedRequest;if(T._writev&&pa&&pa.next){var fa=Array(U.bufferedRequestCount),oa=U.corkedRequestsFree;oa.entry=pa;for(var hb=0,Cb=!0;pa;)fa[hb]=pa,pa.isBuf||(Cb=!1),pa=pa.next,hb+=1;fa.allBuffers=Cb;k(T,U,!0,U.length,fa,"",
oa.finish);U.pendingcb++;U.lastBufferedRequest=null;oa.next?(U.corkedRequestsFree=oa.next,oa.next=null):U.corkedRequestsFree=new d(U);U.bufferedRequestCount=0}else{for(;pa&&(fa=pa.chunk,k(T,U,!1,U.objectMode?1:fa.length,fa,pa.encoding,pa.callback),pa=pa.next,U.bufferedRequestCount--,!U.writing););null===pa&&(U.lastBufferedRequest=null)}U.bufferedRequest=pa;U.bufferProcessing=!1}function e(T){return T.ending&&0===T.length&&null===T.bufferedRequest&&!T.finished&&!T.writing}function m(T,U){T._final(function(pa){U.pendingcb--;
pa&&aa(T,pa);U.prefinished=!0;T.emit("prefinish");a(T,U)})}function a(T,U){var pa=e(U),fa;if(fa=pa)U.prefinished||U.finalCalled||("function"!=typeof T._final||U.destroyed?(U.prefinished=!0,T.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,l.nextTick(m,T,U))),fa=(!0,0===U.pendingcb&&(U.finished=!0,T.emit("finish"),U.autoDestroy));fa&&(U=T._readableState,(!U||U.autoDestroy&&U.endEmitted)&&T.destroy());return pa}if(I0)return XQ;I0=!0;var g,l=uj;XQ=f;f.WritableState=h;var r={deprecate:z0},v=mK,y=Ni.Buffer,
A=cea.Uint8Array||function(){},E,F=F0,H=G0.getHighWaterMark,I=wt.codes,M=I.ERR_INVALID_ARG_TYPE,N=I.ERR_METHOD_NOT_IMPLEMENTED,X=I.ERR_MULTIPLE_CALLBACK,W=I.ERR_STREAM_CANNOT_PIPE,ea=I.ERR_STREAM_DESTROYED,Aa=I.ERR_STREAM_NULL_VALUES,Ka=I.ERR_STREAM_WRITE_AFTER_END,K=I.ERR_UNKNOWN_ENCODING,aa=F.errorOrDestroy;return zi(f,v),h.prototype.getBuffer=function(){for(var T=this.bufferedRequest,U=[];T;)U.push(T),T=T.next;return U},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},
"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(T){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(T){return!!E.call(this,T)||this===f&&T&&T._writableState instanceof h}})):E=function(T){return T instanceof this},f.prototype.pipe=function(){aa(this,new W)},f.prototype.write=function(T,U,pa){var fa,
oa=this._writableState,hb=!1,Cb=!oa.objectMode&&(fa=T,y.isBuffer(fa)||fa instanceof A);return Cb&&!y.isBuffer(T)&&(T=y.from(T)),"function"==typeof U&&(pa=U,U=null),Cb?U="buffer":U||(U=oa.defaultEncoding),"function"!=typeof pa&&(pa=c),oa.ending?function(va,ma){var ua=new Ka;aa(va,ua);l.nextTick(ma,ua)}(this,pa):(Cb||function(va,ma,ua,Ma){var Lb;return null===ua?Lb=new Aa:"string"==typeof ua||ma.objectMode||(Lb=new M("chunk",["string","Buffer"],ua)),!Lb||(aa(va,Lb),l.nextTick(Ma,Lb),!1)}(this,oa,T,
pa))&&(oa.pendingcb++,hb=function(va,ma,ua,Ma,Lb,ic){if(!ua){var Vb=Ma;ma.objectMode||!1===ma.decodeStrings||"string"!=typeof Vb||(Vb=y.from(Vb,Lb));Ma!==Vb&&(ua=!0,Lb="buffer",Ma=Vb)}var jc=ma.objectMode?1:Ma.length;ma.length+=jc;(Vb=ma.length<ma.highWaterMark)||(ma.needDrain=!0);ma.writing||ma.corked?(va=ma.lastBufferedRequest,ma.lastBufferedRequest={chunk:Ma,encoding:Lb,isBuf:ua,callback:ic,next:null},va?va.next=ma.lastBufferedRequest:ma.bufferedRequest=ma.lastBufferedRequest,ma.bufferedRequestCount+=
1):k(va,ma,!1,jc,Ma,Lb,ic);return Vb}(this,oa,Cb,T,U,pa)),hb},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||b(this,T))},f.prototype.setDefaultEncoding=function(T){if("string"==typeof T&&(T=T.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((T+"").toLowerCase())))throw new K(T);return this._writableState.defaultEncoding=
T,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(T,U,pa){pa(new N("_write()"))},f.prototype._writev=null,f.prototype.end=function(T,U,pa){var fa=this._writableState;"function"==typeof T?(pa=T,T=null,U=null):"function"==typeof U&&(pa=U,U=null);
null!=T&&this.write(T,U);fa.corked&&(fa.corked=1,this.uncork());fa.ending||(T=pa,fa.ending=!0,a(this,fa),T&&(fa.finished?l.nextTick(T):this.once("finish",T)),fa.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=
T)}}),f.prototype.destroy=F.destroy,f.prototype._undestroy=F.undestroy,f.prototype._destroy=function(T,U){U(T)},XQ}function oK(){function d(a){if(!(this instanceof d))return new d(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(a){a.end()}if(J0)return YQ;J0=!0;var f=uj,k=Object.keys||
function(a){var g=[],l;for(l in a)g.push(l);return g};YQ=d;var n=Zda(),b=H0();zi(d,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var m=k[e];d.prototype[m]||(d.prototype[m]=b.prototype[m])}return Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),YQ}function dea(d,c){var h=this._transformState;h.transforming=!1;var f=
h.writecb;if(null===f)return this.emit("error",new eea);h.writechunk=null;h.writecb=null;null!=c&&this.push(c);f(d);d=this._readableState;d.reading=!1;(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function cv(d){if(!(this instanceof cv))return new cv(d);pK.call(this,d);this._transformState={afterTransform:dea.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;d&&("function"==
typeof d.transform&&(this._transform=d.transform),"function"==typeof d.flush&&(this._flush=d.flush));this.on("prefinish",fea)}function fea(){var d=this;"function"!=typeof this._flush||this._readableState.destroyed?K0(this,null,null):this._flush(function(c,h){K0(d,c,h)})}function K0(d,c,h){if(c)return d.emit("error",c);if(null!=h&&d.push(h),d._writableState.length)throw new gea;if(d._transformState.transforming)throw new hea;return d.push(null)}function QF(d){if(!(this instanceof QF))return new QF(d);
L0.call(this,d)}function M0(d){if(d)throw d;}function iea(d,c,h,f){f=function(b){var e=!1;return function(){e||(e=!0,b.apply(void 0,arguments))}}(f);var k=!1;d.on("close",function(){k=!0});void 0===ZQ&&(ZQ=$Q);ZQ(d,{readable:c,writable:h},function(b){if(b)return f(b);k=!0;f()});var n=!1;return function(b){if(!k&&!n)return n=!0,d.setHeader&&"function"==typeof d.abort?d.abort():"function"==typeof d.destroy?d.destroy():(f(b||new jea("pipe")),void 0)}}function N0(d){d()}function kea(d,c){return d.pipe(c)}
function rs(){aR.call(this||bR)}function qK(){}function zw(d){O0.call(this);this._block=rK.allocUnsafe(d);this._blockSize=d;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function YC(){P0.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function sK(d,c){return d<<c|d>>>32-c}function ep(d,c,h,f,k,n,b){return sK(d+(c&h|~c&f)+k+n|0,b)+c|0}function fp(d,c,h,f,k,n,b){return sK(d+(c&f|h&~f)+k+n|0,b)+c|0}function gp(d,c,h,f,k,n,b){return sK(d+(c^h^f)+
k+n|0,b)+c|0}function hp(d,c,h,f,k,n,b){return sK(d+(h^(c|~f))+k+n|0,b)+c|0}function ZC(){Q0.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function ss(d,c){return d<<c|d>>>32-c}function Aw(d,c){(this||wl)._block=R0.alloc(d);(this||wl)._finalSize=c;(this||wl)._blockSize=d;(this||wl)._len=0}function $C(){this.init();(this||ni)._w=lea;S0.call(this||ni,64,56)}function RF(){this.init();(this||Ek)._w=mea;T0.call(this||Ek,64,56)}function SF(){this.init();
(this||Fk)._w=nea;U0.call(this||Fk,64,56)}function tK(){this.init();(this||Xn)._w=oea;pea.call(this||Xn,64,56)}function aD(){this.init();(this||zf)._w=qea;V0.call(this||zf,128,112)}function Yn(d,c){return d>>>0<c>>>0?1:0}function uK(){this.init();(this||jk)._w=rea;sea.call(this||jk,128,112)}function Zn(d){W0.call(this||em);(this||em).hashMode="string"==typeof d;(this||em).hashMode?(this||em)[d]=(this||em)._finalOrDigest:(this||em).final=(this||em)._finalOrDigest;(this||em)._final&&((this||em).__final=
(this||em)._final,(this||em)._final=null);(this||em)._decoder=null;(this||em)._encoding=null}function vK(d){X0.call(this,"digest");this._hash=d}function wK(d,c){Y0.call(this,"digest");"string"==typeof c&&(c=AA.from(c));this._alg=d;this._key=c;64<c.length?c=d(c):64>c.length&&(c=AA.concat([c,tea],64));d=this._ipad=AA.allocUnsafe(64);for(var h=this._opad=AA.allocUnsafe(64),f=0;64>f;f++)d[f]=54^c[f],h[f]=92^c[f];this._hash=[d]}function TF(d,c){Z0.call(this,"digest");"string"==typeof c&&(c=UF.from(c));
var h="sha512"===d||"sha384"===d?128:64;(this._alg=d,this._key=c,c.length>h)?c=("rmd160"===d?new cR:dR(d)).update(c).digest():c.length<h&&(c=UF.concat([c,uea],h));for(var f=this._ipad=UF.allocUnsafe(h),k=this._opad=UF.allocUnsafe(h),n=0;n<h;n++)f[n]=54^c[n],k[n]=92^c[n];this._hash="rmd160"===d?new cR:dR(d);this._hash.update(f)}function $0(d,c){if("string"!=typeof d&&!vea.isBuffer(d))throw new TypeError(c+" must be a buffer or string");}function a1(d,c,h){var f=function(m){function a(g){return wea(m).update(g).digest()}
return"rmd160"===m||"ripemd160"===m?function(g){return(new xea).update(g).digest()}:"md5"===m?yea:a}(d),k="sha512"===d||"sha384"===d?128:64;c.length>k?c=f(c):c.length<k&&(c=xt.concat([c,zea],k));for(var n=xt.allocUnsafe(k+xK[d]),b=xt.allocUnsafe(k+xK[d]),e=0;e<k;e++)n[e]=54^c[e],b[e]=92^c[e];c=xt.allocUnsafe(k+h+4);n.copy(c,0,0,k);(this||yt).ipad1=c;(this||yt).ipad2=n;(this||yt).opad=b;(this||yt).alg=d;(this||yt).blocksize=k;(this||yt).hash=f;(this||yt).size=xK[d]}function b1(d,c,h,f,k){return VF.importKey("raw",
d,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return VF.deriveBits({name:"PBKDF2",salt:c,iterations:h,hash:{name:k}},n,f<<3)}).then(function(n){return bD.from(n)})}function c1(d,c){if(!d)throw Error(c||"Assertion failed");}function mr(d){this.options=d;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function Aea(){this.tmp=Array(2);this.keys=null}function ts(d){d1.call(this,d);var c=new Aea;this._desState=c;this.deriveKeys(c,d.key)}
function Bea(d){Cea.equal(d.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=d[c]}function Dea(d,c){Eea.equal(c.length,24,"Invalid key length");var h=c.slice(0,8),f=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===d?[ey.create({type:"encrypt",key:h}),ey.create({type:"decrypt",key:f}),ey.create({type:"encrypt",key:c})]:[ey.create({type:"decrypt",key:c}),ey.create({type:"encrypt",key:f}),ey.create({type:"decrypt",key:h})]}function dv(d){e1.call(this,
d);this._edeState=new Dea(this.type,this.options.key)}function yK(d){f1.call(this||zK);var c=d.mode.toLowerCase(),h=WF[c];var f=d.decrypt?"decrypt":"encrypt";var k=d.key;BA.isBuffer(k)||(k=BA.from(k));"des-ede"!==c&&"des-ede-cbc"!==c||(k=BA.concat([k,k.slice(0,8)]));d=d.iv;BA.isBuffer(d)||(d=BA.from(d));(this||zK)._des=h.create({key:k,iv:d,type:f})}function g1(d,c,h){var f=c.length,k=Fea(c,d._cache);return d._cache=d._cache.slice(f),d._prev=XF.concat([d._prev,h?c:k]),k}function Gea(d){return d._prev=
d._cipher.encryptBlock(d._prev),d._prev}function eR(d){AK.isBuffer(d)||(d=AK.from(d));for(var c=d.length/4|0,h=Array(c),f=0;f<c;f++)h[f]=d.readUInt32BE(4*f);return h}function fR(d){for(;0<d.length;d++)d[0]=0}function h1(d,c,h,f,k){var n=h[0],b=h[1],e=h[2];h=h[3];var m=d[0]^c[0],a=d[1]^c[1],g=d[2]^c[2];d=d[3]^c[3];for(var l=4,r=1;r<k;r++){var v=n[m>>>24]^b[a>>>16&255]^e[g>>>8&255]^h[255&d]^c[l++];var y=n[a>>>24]^b[g>>>16&255]^e[d>>>8&255]^h[255&m]^c[l++];var A=n[g>>>24]^b[d>>>16&255]^e[m>>>8&255]^
h[255&a]^c[l++];var E=n[d>>>24]^b[m>>>16&255]^e[a>>>8&255]^h[255&g]^c[l++];m=v;a=y;g=A;d=E}return v=(f[m>>>24]<<24|f[a>>>16&255]<<16|f[g>>>8&255]<<8|f[255&d])^c[l++],y=(f[a>>>24]<<24|f[g>>>16&255]<<16|f[d>>>8&255]<<8|f[255&m])^c[l++],A=(f[g>>>24]<<24|f[d>>>16&255]<<16|f[m>>>8&255]<<8|f[255&a])^c[l++],E=(f[d>>>24]<<24|f[m>>>16&255]<<16|f[a>>>8&255]<<8|f[255&g])^c[l++],[v>>>0,y>>>0,A>>>0,E>>>0]}function us(d){(this||vs)._key=eR(d);this._reset()}function i1(d){var c=cD.allocUnsafe(16);return c.writeUInt32BE(d[0]>>>
0,0),c.writeUInt32BE(d[1]>>>0,4),c.writeUInt32BE(d[2]>>>0,8),c.writeUInt32BE(d[3]>>>0,12),c}function YF(d){(this||Ho).h=d;(this||Ho).state=cD.alloc(16,0);(this||Ho).cache=cD.allocUnsafe(0)}function fy(d,c,h,f){j1.call(this||Sh);var k=yq.alloc(4,0);(this||Sh)._cipher=new Hea.AES(c);var n=(this||Sh)._cipher.encryptBlock(k);(this||Sh)._ghash=new k1(n);c=this||Sh;k=h;if(12===k.length)c=(c._finID=yq.concat([k,yq.from([0,0,0,1])]),yq.concat([k,yq.from([0,0,0,2])]));else{h=new k1(n);n=k.length;var b=n%16;
h.update(k);b&&(b=16-b,h.update(yq.alloc(b,0)));h.update(yq.alloc(8,0));k=8*n;n=yq.alloc(8);n.writeUIntBE(k,0,8);h.update(n);c._finID=h.state;c=yq.from(c._finID);c=(Iea(c),c)}(this||Sh)._prev=yq.from(c);(this||Sh)._cache=yq.allocUnsafe(0);(this||Sh)._secCache=yq.allocUnsafe(0);(this||Sh)._decrypt=f;(this||Sh)._alen=0;(this||Sh)._len=0;(this||Sh)._mode=d;(this||Sh)._authTag=null;(this||Sh)._called=!1}function ZF(d,c,h,f){l1.call(this||zt);(this||zt)._cipher=new Jea.AES(c);(this||zt)._prev=gR.from(h);
(this||zt)._cache=gR.allocUnsafe(0);(this||zt)._secCache=gR.allocUnsafe(0);(this||zt)._decrypt=f;(this||zt)._mode=d}function $F(d,c,h){m1.call(this||kk);(this||kk)._cache=new BK;(this||kk)._last=void 0;(this||kk)._cipher=new Kea.AES(c);(this||kk)._prev=dD.from(h);(this||kk)._mode=d;(this||kk)._autopadding=!0}function BK(){(this||kk).cache=dD.allocUnsafe(0)}function n1(d,c,h){d=o1[d.toLowerCase()];if(!d)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=dD.from(h)),"GCM"!==d.mode&&
h.length!==d.iv)throw new TypeError("invalid iv length "+h.length);if("string"==typeof c&&(c=dD.from(c)),c.length!==d.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===d.type?new Lea(d.module,c,h,!0):"auth"===d.type?new Mea(d.module,c,h,!0):new $F(d.module,c,h)}function aG(d,c,h){p1.call(this||cl);(this||cl)._cache=new CK;(this||cl)._cipher=new Nea.AES(c);(this||cl)._prev=Bw.from(h);(this||cl)._mode=d;(this||cl)._autopadding=!0}function CK(){(this||cl).cache=Bw.allocUnsafe(0)}
function q1(d,c,h){d=r1[d.toLowerCase()];if(!d)throw new TypeError("invalid suite type");if("string"==typeof c&&(c=Bw.from(c)),c.length!==d.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof h&&(h=Bw.from(h)),"GCM"!==d.mode&&h.length!==d.iv)throw new TypeError("invalid iv length "+h.length);return"stream"===d.type?new Oea(d.module,c,h):"auth"===d.type?new Pea(d.module,c,h):new aG(d.module,c,h)}function hR(d,c,h){if(d=d.toLowerCase(),gy[d])return iR.createCipheriv(d,c,h);
if(Cw[d])return new s1({key:c,iv:h,mode:d});throw new TypeError("invalid suite type");}function jR(d,c,h){if(d=d.toLowerCase(),gy[d])return iR.createDecipheriv(d,c,h);if(Cw[d])return new s1({key:c,iv:h,mode:d,decrypt:!0});throw new TypeError("invalid suite type");}function hy(d){(this||DK).rand=d}function iy(d){(this||t1).rand=d||new Qea.Rand}function kR(d){if(null!==lR)var c=lR;else{c=[2];for(var h=1,f=3;1048576>f;f+=2){for(var k=Math.ceil(Math.sqrt(f)),n=0;n<h&&c[n]<=k&&0!=f%c[n];n++);h!==n&&c[n]<=
k||(c[h++]=f)}c=(lR=c,c)}for(h=0;h<c.length;h++)if(0===d.modn(c[h]))return 0===d.cmpn(c[h]);return!0}function mR(d){var c=ip.mont(d);return 0===nR.toRed(c).redPow(d.subn(1)).fromRed().cmpn(1)}function bG(d,c){if(16>d)return new ip(2===c||5===c?[140,123]:[140,39]);var h,f;for(c=new ip(c);;){for(h=new ip(Rea(Math.ceil(d/8)));h.bitLength()>d;)h.ishrn(1);if(h.isEven()&&h.iadd(Sea),h.testn(1)||h.iadd(nR),c.cmp(nR)){if(!c.cmp(Tea))for(;h.mod(Uea).cmp(Vea);)h.iadd(u1)}else for(;h.mod(Wea).cmp(Xea);)h.iadd(u1);
if(kR(f=h.shrn(1))&&kR(h)&&mR(f)&&mR(h)&&v1.test(f)&&v1.test(h))return h}}function Yea(d,c){return c=c||"utf8",ev.isBuffer(d)||(d=new ev(d,c)),(this||Dj)._pub=new ws(d),this||Dj}function Zea(d,c){return c=c||"utf8",ev.isBuffer(d)||(d=new ev(d,c)),(this||Dj)._priv=new ws(d),this||Dj}function At(d,c,h){this.setGenerator(c);(this||Dj).__prime=new ws(d);(this||Dj)._prime=ws.mont((this||Dj).__prime);(this||Dj)._primeLen=d.length;(this||Dj)._pub=void 0;(this||Dj)._priv=void 0;(this||Dj)._primeCode=void 0;
h?((this||Dj).setPublicKey=Yea,(this||Dj).setPrivateKey=Zea):(this||Dj)._primeCode=8}function EK(d,c){d=new ev(d.toArray());return c?d.toString(c):d}function FK(d,c){var h=w1(c);var f=h.toRed(jy.mont(c.modulus)).redPow(new jy(c.publicExponent)).fromRed();h=h.invm(c.modulus);var k=c.modulus.byteLength();d=(jy.mont(c.modulus),(new jy(d)).mul(f).umod(c.modulus));var n=d.toRed(jy.mont(c.prime1)),b=d.toRed(jy.mont(c.prime2));f=c.coefficient;var e=c.prime1;d=c.prime2;n=n.redPow(c.exponent1);b=b.redPow(c.exponent2);
n=n.fromRed();b=b.fromRed();f=n.isub(b).imul(f).umod(e);return f.imul(d),b.iadd(f),new $ea(b.imul(h).umod(c.modulus).toArray(!1,k))}function w1(d){for(var c=d.modulus.byteLength(),h=new jy(x1(c));0<=h.cmp(d.modulus)||!h.umod(d.prime1)||!h.umod(d.prime2);)h=new jy(x1(c));return h}function y1(d){return 1===d.length?"0"+d:d}function z1(d){for(var c="",h=0;h<d.length;h++)c+=y1(d[h].toString(16));return c}function CA(d,c){if(d instanceof CA)return d;this._importDER(d,c)||(afa(d.r&&d.s,"Signature without r or s"),
this.r=new GK(d.r,16),this.s=new GK(d.s,16),void 0===d.recoveryParam?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}function bfa(){this.place=0}function oR(d,c){var h=d[c.place++];if(!(128&h))return h;h&=15;for(var f=0,k=0,n=c.place;k<h;k++,n++)f<<=8,f|=d[n];return c.place=n,f}function A1(d){for(var c=0,h=d.length-1;!(d[c]||128&d[c+1])&&c<h;)c++;return 0===c?d:d.slice(c)}function pR(d,c){if(128>c)return d.push(c),void 0;var h=1+(Math.log(c)/Math.LN2>>>3);for(d.push(128|h);--h;)d.push(c>>>
(h<<3)&255);d.push(c)}function B1(d){return(d>>>24|d>>>8&65280|d<<8&16711680|(255&d)<<24)>>>0}function C1(d){return 1===d.length?"0"+d:d}function D1(d){return 7===d.length?"0"+d:6===d.length?"00"+d:5===d.length?"000"+d:4===d.length?"0000"+d:3===d.length?"00000"+d:2===d.length?"000000"+d:1===d.length?"0000000"+d:d}function HK(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=
this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function xs(){if(!(this instanceof xs))return new xs;E1.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=cfa;this.W=Array(160)}function Bt(){if(!(this instanceof Bt))return new Bt;F1.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,
1359893119,2600822924,528734635,1541459225];this.k=dfa;this.W=Array(64)}function fv(){if(!(this instanceof fv))return new fv;G1.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function Dw(){if(!(this instanceof Dw))return new Dw;H1.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function Ew(){if(!(this instanceof Ew))return new Ew;I1.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,
812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function gv(){if(!(this instanceof gv))return new gv;J1.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function K1(d,c,h,f){return 15>=d?c^h^f:31>=d?c&h|~c&f:47>=d?(c|~h)^f:63>=d?c&f|h&~f:c^(h|~f)}function eD(d,c,h){if(!(this instanceof eD))return new eD(d,c,h);this.Hash=d;this.blockSize=d.blockSize/8;this.outSize=d.outSize/8;this.outer=
this.inner=null;this._init(efa.toArray(c,h))}function Fw(d){if(!(this instanceof Fw))return new Fw(d);this.hash=d.hash;this.predResist=!!d.predResist;this.outLen=this.hash.outSize;this.minEntropy=d.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=DA.toArray(d.entropy,d.entropyEnc||"hex"),h=DA.toArray(d.nonce,d.nonceEnc||"hex");d=DA.toArray(d.pers,d.persEnc||"hex");L1(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");
this._init(c,h,d)}function Ct(d,c){this.type=d;this.p=new EA(c.p,16);this.red=c.prime?EA.red(c.prime):EA.mont(this.p);this.zero=(new EA(0)).toRed(this.red);this.one=(new EA(1)).toRed(this.red);this.two=(new EA(2)).toRed(this.red);this.n=c.n&&new EA(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;d=this.n&&this.p.div(this.n);!d||0<d.cmpn(100)?this.redN=null:(this._maxwellTrick=
!0,this.redN=this.n.toRed(this.red))}function ys(d,c){this.curve=d;this.type=c;this.precomputed=null}function zs(d){fD.call(this,"short",d);this.a=(new fm(d.a,16)).toRed(this.red);this.b=(new fm(d.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(d);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function $n(d,c,h,f){fD.BasePoint.call(this,d,"affine");null===c&&null===
h?(this.x=null,this.y=null,this.inf=!0):(this.x=new fm(c,16),this.y=new fm(h,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Io(d,c,h,f){fD.BasePoint.call(this,d,"jacobian");null===c&&null===h&&null===f?(this.x=this.curve.one,this.y=this.curve.one,this.z=new fm(0)):(this.x=new fm(c,16),this.y=new fm(h,16),this.z=new fm(f,16));this.x.red||(this.x=this.x.toRed(this.curve.red));
this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function gD(d){IK.call(this,"mont",d);this.a=(new hD(d.a,16)).toRed(this.red);this.b=(new hD(d.b,16)).toRed(this.red);this.i4=(new hD(4)).toRed(this.red).redInvm();this.two=(new hD(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function ao(d,c,h){IK.BasePoint.call(this,d,"projective");null===c&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):
(this.x=new hD(c,16),this.z=new hD(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function hv(d){this.extended=this.mOneA=(this.twisted=1!=(0|d.a))&&-1==(0|d.a);JK.call(this,"edwards",d);this.a=(new Gw(d.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new Gw(d.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new Gw(d.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);ffa(!this.twisted||0===this.c.fromRed().cmpn(1));
this.oneC=1==(0|d.c)}function nl(d,c,h,f,k){JK.BasePoint.call(this,d,"projective");null===c&&null===h&&null===f?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Gw(c,16),this.y=new Gw(h,16),this.z=f?new Gw(f,16):this.curve.one,this.t=k&&new Gw(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),
this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function M1(d){"short"===d.type?this.curve=new qR.short(d):"edwards"===d.type?this.curve=new qR.edwards(d):this.curve=new qR.mont(d);this.g=this.curve.g;this.n=this.curve.n;this.hash=d.hash;N1(this.g.validate(),"Invalid curve");N1(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function ky(d,c){Object.defineProperty(rR,d,{configurable:!0,enumerable:!0,
get:function(){var h=new M1(c);return Object.defineProperty(rR,d,{configurable:!0,enumerable:!0,value:h}),h}})}function bo(d,c){this.ec=d;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function As(d){if(!(this instanceof As))return new As(d);"string"==typeof d&&(O1(sR.hasOwnProperty(d),"Unknown curve "+d),d=sR[d]);d instanceof sR.PresetCurve&&(d={curve:d});this.curve=d.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;
this.g=d.curve.g;this.g.precompute(d.curve.n.bitLength()+1);this.hash=d.hash||d.curve.hash}function un(d,c){this.eddsa=d;this._secret=P1(c.secret);d.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=P1(c.pub)}function ly(d,c){this.eddsa=d;"object"!=typeof c&&(c=gfa(c));Array.isArray(c)&&(c={R:c.slice(0,d.encodingLength),S:c.slice(d.encodingLength)});hfa(c.R&&c.S,"Signature without R or S");d.isPoint(c.R)&&(this._R=c.R);c.S instanceof ifa&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;
this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function zq(d){if(jfa("ed25519"===d,"only tested with ed25519 so far"),!(this instanceof zq))return new zq(d);this.curve=d=kfa[d].curve;this.g=d.g;this.g.precompute(d.n.bitLength()+1);this.pointClass=d.point().constructor;this.encodingLength=Math.ceil(d.n.bitLength()/8);this.hash=lfa.sha512}function Bs(d){(this||vn)._reporterState={obj:null,path:[],options:d||{},errors:[]}}function iD(d,c){(this||vn).path=d;this.rethrow(c)}function Q1(){function d(n,
b){if(f.call(this||Eh,b),!k.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||Eh).base=n;(this||Eh).offset=0;(this||Eh).length=n.length}function c(n,b){if(Array.isArray(n))(this||Eh).length=0,(this||Eh).value=n.map(function(e){return e instanceof c||(e=new c(e,b)),(this||Eh).length+=e.length,e},this||Eh);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||Eh).value=n;(this||Eh).length=1}else if("string"==typeof n)(this||Eh).value=n,(this||
Eh).length=k.byteLength(n);else{if(!k.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||Eh).value=n;(this||Eh).length=n.length}}if(R1)return KK;R1=!0;var h=zi,f=cG().Reporter,k=Ni.Buffer;return h(d,f),KK.DecoderBuffer=d,d.prototype.save=function(){return{offset:(this||Eh).offset,reporter:f.prototype.save.call(this||Eh)}},d.prototype.restore=function(n){var b=new d((this||Eh).base);return b.offset=n.offset,b.length=(this||Eh).offset,(this||Eh).offset=n.offset,f.prototype.restore.call(this||
Eh,n.reporter),b},d.prototype.isEmpty=function(){return(this||Eh).offset===(this||Eh).length},d.prototype.readUInt8=function(n){return(this||Eh).offset+1<=(this||Eh).length?(this||Eh).base.readUInt8((this||Eh).offset++,!0):this.error(n||"DecoderBuffer overrun")},d.prototype.skip=function(n,b){if(!((this||Eh).offset+n<=(this||Eh).length))return this.error(b||"DecoderBuffer overrun");b=new d((this||Eh).base);return b._reporterState=(this||Eh)._reporterState,b.offset=(this||Eh).offset,b.length=(this||
Eh).offset+n,(this||Eh).offset+=n,b},d.prototype.raw=function(n){return(this||Eh).base.slice(n?n.offset:(this||Eh).offset,(this||Eh).length)},KK.EncoderBuffer=c,c.prototype.join=function(n,b){return n||(n=new k((this||Eh).length)),b||(b=0),0===(this||Eh).length||(Array.isArray((this||Eh).value)?(this||Eh).value.forEach(function(e){e.join(n,b);b+=e.length}):("number"==typeof(this||Eh).value?n[b]=(this||Eh).value:"string"==typeof(this||Eh).value?n.write((this||Eh).value,b):k.isBuffer((this||Eh).value)&&
(this||Eh).value.copy(n,b),b+=(this||Eh).length)),n},KK}function cG(){if(S1)return tR;S1=!0;var d=tR;return d.Reporter=T1.Reporter,d.DecoderBuffer=Q1().DecoderBuffer,d.EncoderBuffer=Q1().EncoderBuffer,d.Node=function(){function c(a,g){var l={};(this||Zg)._baseState=l;l.enc=a;l.parent=g||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||
(l.children=[],this._wrap())}if(U1)return uR;U1=!0;var h=cG().Reporter,f=cG().EncoderBuffer,k=cG().DecoderBuffer,n=Cs,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),e="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);uR=c;var m="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");
return c.prototype.clone=function(){var a=(this||Zg)._baseState,g={};m.forEach(function(r){g[r]=a[r]});var l=new (this||Zg).constructor(g.parent);return l._baseState=g,l},c.prototype._wrap=function(){var a=(this||Zg)._baseState;e.forEach(function(g){(this||Zg)[g]=function(){var l=new (this||Zg).constructor(this||Zg);return a.children.push(l),l[g].apply(l,arguments)}},this||Zg)},c.prototype._init=function(a){var g=(this||Zg)._baseState;n(null===g.parent);a.call(this||Zg);g.children=g.children.filter(function(l){return l._baseState.parent===
(this||Zg)},this||Zg);n.equal(g.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var g=(this||Zg)._baseState,l=a.filter(function(r){return r instanceof(this||Zg).constructor},this||Zg);a=a.filter(function(r){return!(r instanceof(this||Zg).constructor)},this||Zg);0!==l.length&&(n(null===g.children),g.children=l,l.forEach(function(r){r._baseState.parent=this||Zg},this||Zg));0!==a.length&&(n(null===g.args),g.args=a,g.reverseArgs=a.map(function(r){if("object"!=
typeof r||r.constructor!==Object)return r;var v={};return Object.keys(r).forEach(function(y){y==(0|y)&&(y|=0);v[r[y]]=y}),v}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){c.prototype[a]=function(){throw Error(a+" not implemented for encoding: "+(this||Zg)._baseState.enc);}}),b.forEach(function(a){c.prototype[a]=function(){var g=
(this||Zg)._baseState,l=Array.prototype.slice.call(arguments);return n(null===g.tag),g.tag=a,this._useArgs(l),this||Zg}}),c.prototype.use=function(a){n(a);var g=(this||Zg)._baseState;return n(null===g.use),g.use=a,this||Zg},c.prototype.optional=function(){return(this||Zg)._baseState.optional=!0,this||Zg},c.prototype.def=function(a){var g=(this||Zg)._baseState;return n(null===g.default),g.default=a,g.optional=!0,this||Zg},c.prototype.explicit=function(a){var g=(this||Zg)._baseState;return n(null===
g.explicit&&null===g.implicit),g.explicit=a,this||Zg},c.prototype.implicit=function(a){var g=(this||Zg)._baseState;return n(null===g.explicit&&null===g.implicit),g.implicit=a,this||Zg},c.prototype.obj=function(){var a=(this||Zg)._baseState,g=Array.prototype.slice.call(arguments);return a.obj=!0,0!==g.length&&this._useArgs(g),this||Zg},c.prototype.key=function(a){var g=(this||Zg)._baseState;return n(null===g.key),g.key=a,this||Zg},c.prototype.any=function(){return(this||Zg)._baseState.any=!0,this||
Zg},c.prototype.choice=function(a){var g=(this||Zg)._baseState;return n(null===g.choice),g.choice=a,this._useArgs(Object.keys(a).map(function(l){return a[l]})),this||Zg},c.prototype.contains=function(a){var g=(this||Zg)._baseState;return n(null===g.use),g.contains=a,this||Zg},c.prototype._decode=function(a,g){var l=(this||Zg)._baseState;if(null===l.parent)return a.wrapResult(l.children[0]._decode(a,g));var r,v=l.default,y=!0,A=null;if(null!==l.key&&(A=a.enterKey(l.key)),l.optional){var E=null;if(null!==
l.explicit?E=l.explicit:null!==l.implicit?E=l.implicit:null!==l.tag&&(E=l.tag),null!==E||l.any){if(y=this._peekTag(a,E,l.any),a.isError(y))return y}else{var F=a.save();try{null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),y=!0}catch(I){y=!1}a.restore(F)}}if(l.obj&&y&&(r=a.enterObject()),y){if(null!==l.explicit){E=this._decodeTag(a,l.explicit);if(a.isError(E))return E;a=E}E=a.offset;if(null===l.use&&null===l.choice){l.any&&(F=a.save());var H=this._decodeTag(a,null!==l.implicit?
l.implicit:l.tag,l.any);if(a.isError(H))return H;l.any?v=a.raw(F):a=H}if(g&&g.track&&null!==l.tag&&g.track(a.path(),E,a.length,"tagged"),g&&g.track&&null!==l.tag&&g.track(a.path(),a.offset,a.length,"content"),v=l.any?v:null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),a.isError(v))return v;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(I){I._decode(a,g)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(v=new k(v),v=this._getUse(l.contains,a._reporterState.obj)._decode(v,
g))}return l.obj&&y&&(v=a.leaveObject(r)),null===l.key||null===v&&!0!==y?null!==A&&a.exitKey(A):a.leaveKey(A,l.key,v),v},c.prototype._decodeGeneric=function(a,g,l){var r=(this||Zg)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(g,a,r.args[0],l):/str$/.test(a)?this._decodeStr(g,a,l):"objid"===a&&r.args?this._decodeObjid(g,r.args[0],r.args[1],l):"objid"===a?this._decodeObjid(g,null,null,l):"gentime"===a||"utctime"===a?this._decodeTime(g,a,l):"null_"===a?this._decodeNull(g,
l):"bool"===a?this._decodeBool(g,l):"objDesc"===a?this._decodeStr(g,a,l):"int"===a||"enum"===a?this._decodeInt(g,r.args&&r.args[0],l):null!==r.use?this._getUse(r.use,g._reporterState.obj)._decode(g,l):g.error("unknown tag: "+a)},c.prototype._getUse=function(a,g){var l=(this||Zg)._baseState;return l.useDecoder=this._use(a,g),n(null===l.useDecoder._baseState.parent),l.useDecoder=l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=
l.implicit),l.useDecoder},c.prototype._decodeChoice=function(a,g){var l=(this||Zg)._baseState,r=null,v=!1;return Object.keys(l.choice).some(function(y){var A=a.save(),E=l.choice[y];try{var F=E._decode(a,g);if(a.isError(F))return!1;r={type:y,value:F};v=!0}catch(H){return a.restore(A),!1}return!0},this||Zg),v?r:a.error("Choice not matched")},c.prototype._createEncoderBuffer=function(a){return new f(a,(this||Zg).reporter)},c.prototype._encode=function(a,g,l){var r=(this||Zg)._baseState;if(null===r.default||
r.default!==a)if(a=this._encodeValue(a,g,l),void 0!==a&&!this._skipDefault(a,g,l))return a},c.prototype._encodeValue=function(a,g,l){var r=(this||Zg)._baseState;if(null===r.parent)return r.children[0]._encode(a,g||new h);var v=null;if((this||Zg).reporter=g,r.optional&&void 0===a){if(null===r.default)return;a=r.default}var y=null,A=!1;if(r.any)v=this._createEncoderBuffer(a);else if(r.choice)v=this._encodeChoice(a,g);else if(r.contains)y=this._getUse(r.contains,l)._encode(a,g),A=!0;else if(r.children)y=
r.children.map(function(F){if("null_"===F._baseState.tag)return F._encode(null,g,a);if(null===F._baseState.key)return g.error("Child should have a key");var H=g.enterKey(F._baseState.key);if("object"!=typeof a)return g.error("Child expected, but input is not object");F=F._encode(a[F._baseState.key],g,a);return g.leaveKey(H),F},this||Zg).filter(function(F){return F}),y=this._createEncoderBuffer(y);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return g.error("Too many args for : "+
r.tag);if(!Array.isArray(a))return g.error("seqof/setof, but data is not Array");y=this.clone();y._baseState.implicit=null;y=this._createEncoderBuffer(a.map(function(F){return this._getUse((this||Zg)._baseState.args[0],a)._encode(F,g)},y))}else null!==r.use?v=this._getUse(r.use,l)._encode(a,g):(y=this._encodePrimitive(r.tag,a),A=!0);if(!r.any&&null===r.choice){l=null!==r.implicit?r.implicit:r.tag;var E=null===r.implicit?"universal":"context";null===l?null===r.use&&g.error("Tag could be omitted only for .use()"):
null===r.use&&(v=this._encodeComposite(l,A,E,y))}return null!==r.explicit&&(v=this._encodeComposite(r.explicit,!1,"context",v)),v},c.prototype._encodeChoice=function(a,g){var l=(this||Zg)._baseState,r=l.choice[a.type];return r||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(l.choice))),r._encode(a.value,g)},c.prototype._encodePrimitive=function(a,g){var l=(this||Zg)._baseState;if(/str$/.test(a))return this._encodeStr(g,a);if("objid"===a&&l.args)return this._encodeObjid(g,l.reverseArgs[0],
l.args[1]);if("objid"===a)return this._encodeObjid(g,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(g,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(g,l.args&&l.reverseArgs[0]);if("bool"===a)return this._encodeBool(g);if("objDesc"===a)return this._encodeStr(g,a);throw Error("Unsupported tag: "+a);},c.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},c.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},
uR}(),tR}function V1(){if(W1)return vR;W1=!0;var d=vR;return d._reverse=function(c){var h={};return Object.keys(c).forEach(function(f){(0|f)==f&&(f|=0);h[c[f]]=f}),h},d.der=function(){if(X1)return my;X1=!0;var c=V1();return my.tagClass={0:"universal",1:"application",2:"context",3:"private"},my.tagClassByName=c._reverse(my.tagClass),my.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",
17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},my.tagByName=c._reverse(my.tag),my}(),vR}function Y1(){function d(a){(this||ny).enc="der";(this||ny).name=a.name;(this||ny).entity=a;(this||ny).tree=new c;(this||ny).tree._init(a.body)}function c(a){b.Node.call(this||ny,"der",a)}function h(a,g){var l=a.readUInt8(g);if(a.isError(l))return l;var r=m.tagClass[l>>6],v=0==(32&
l);if(31==(31&l)){var y=l;for(l=0;128==(128&y);){if(y=a.readUInt8(g),a.isError(y))return y;l<<=7;l|=127&y}}else l&=31;return{cls:r,primitive:v,tag:l,tagStr:m.tag[l]}}function f(a,g,l){var r=a.readUInt8(l);if(a.isError(r))return r;if(!g&&128===r)return null;if(0==(128&r))return r;g=127&r;if(4<g)return a.error("length octect is too long");for(var v=r=0;v<g;v++){r<<=8;var y=a.readUInt8(l);if(a.isError(y))return y;r|=y}return r}if(Z1)return wR;Z1=!0;var k=zi,n=LK(),b=n.base,e=n.bignum,m=n.constants.der;
return wR=d,d.prototype.decode=function(a,g){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,g)),(this||ny).tree._decode(a,g)},k(c,b.Node),c.prototype._peekTag=function(a,g,l){if(a.isEmpty())return!1;var r=a.save(),v=h(a,'Failed to peek tag: "'+g+'"');return a.isError(v)?v:(a.restore(r),v.tag===g||v.tagStr===g||v.tagStr+"of"===g||l)},c.prototype._decodeTag=function(a,g,l){var r=h(a,'Failed to decode tag of "'+g+'"');if(a.isError(r))return r;var v=f(a,r.primitive,'Failed to get length of "'+
g+'"');if(a.isError(v))return v;if(!l&&r.tag!==g&&r.tagStr!==g&&r.tagStr+"of"!==g)return a.error('Failed to match tag: "'+g+'"');if(r.primitive||null!==v)return a.skip(v,'Failed to match body of: "'+g+'"');l=a.save();r=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||ny).tag+'"');return a.isError(r)?r:(v=a.offset-l.offset,a.restore(l),a.skip(v,'Failed to match body of: "'+g+'"'))},c.prototype._skipUntilEnd=function(a,g){for(;;){var l=h(a,g);if(a.isError(l))return l;var r,v=f(a,
l.primitive,g);if(a.isError(v))return v;if(r=l.primitive||null!==v?a.skip(v):this._skipUntilEnd(a,g),a.isError(r))return r;if("end"===l.tagStr)break}},c.prototype._decodeList=function(a,g,l,r){for(g=[];!a.isEmpty();){var v=this._peekTag(a,"end");if(a.isError(v))return v;var y=l.decode(a,"der",r);if(a.isError(y)&&v)break;g.push(y)}return g},c.prototype._decodeStr=function(a,g){if("bitstr"===g)return g=a.readUInt8(),a.isError(g)?g:{unused:g,data:a.raw()};if("bmpstr"===g){g=a.raw();if(1==g.length%2)return a.error("Decoding of string type: bmpstr length mismatch");
a="";for(var l=0;l<g.length/2;l++)a+=String.fromCharCode(g.readUInt16BE(2*l));return a}return"numstr"===g?(g=a.raw().toString("ascii"),this._isNumstr(g)?g:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===g||"objDesc"===g?a.raw():"printstr"===g?(g=a.raw().toString("ascii"),this._isPrintstr(g)?g:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(g)?a.raw().toString():a.error("Decoding of string type: "+g+" unsupported")},c.prototype._decodeObjid=
function(a,g,l){for(var r=[],v=0;!a.isEmpty();){var y=a.readUInt8();v<<=7;v|=127&y;0==(128&y)&&(r.push(v),v=0)}128&y&&r.push(v);a=r[0]/40|0;v=r[0]%40;if(l=l?r:[a,v].concat(r.slice(1)),g)r=g[l.join(" ")],void 0===r&&(r=g[l.join(".")]),void 0!==r&&(l=r);return l},c.prototype._decodeTime=function(a,g){var l=a.raw().toString();if("gentime"===g){a=0|l.slice(0,4);g=0|l.slice(4,6);var r=0|l.slice(6,8),v=0|l.slice(8,10),y=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==g)return a.error("Decoding "+
g+" time is not supported yet");a=0|l.slice(0,2);g=0|l.slice(2,4);r=0|l.slice(4,6);v=0|l.slice(6,8);y=0|l.slice(8,10);l=0|l.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,g-1,r,v,y,l,0)},c.prototype._decodeNull=function(a){return null},c.prototype._decodeBool=function(a){var g=a.readUInt8();return a.isError(g)?g:0!==g},c.prototype._decodeInt=function(a,g){a=a.raw();a=new e(a);return g&&(a=g[a.toString(10)]||a),a},c.prototype._use=function(a,g){return"function"==typeof a&&(a=a(g)),a._getDecoder("der").tree},
wR}function mfa(){if($1)return xR;$1=!0;var d=xR;return d.der=Y1(),d.pem=function(){function c(n){k.call(this||yR,n);(this||yR).enc="pem"}if(a2)return zR;a2=!0;var h=zi,f=Ni.Buffer,k=Y1();return h(c,k),zR=c,c.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var e=b.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,g=-1,l=0;l<n.length;l++){var r=n[l].match(m);if(null!==r&&r[2]===e){if(-1!==a){if("END"!==r[1])break;g=l;break}if("BEGIN"!==r[1])break;a=l}}if(-1===a||-1===
g)throw Error("PEM section not found for: "+e);n=n.slice(a+1,g).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new f(n,"base64");return k.prototype.decode.call(this||yR,n,b)},zR}(),xR}function b2(){function d(m){(this||wn).enc="der";(this||wn).name=m.name;(this||wn).entity=m;(this||wn).tree=new c;(this||wn).tree._init(m.body)}function c(m){b.Node.call(this||wn,"der",m)}function h(m){return 10>m?"0"+m:m}if(c2)return AR;c2=!0;var f=zi,k=Ni.Buffer,n=LK(),b=n.base,e=n.constants.der;return AR=d,d.prototype.encode=
function(m,a){return(this||wn).tree._encode(m,a).join()},f(c,b.Node),c.prototype._encodeComposite=function(m,a,g,l){var r;a:{var v=m;m=(this||wn).reporter;"seqof"===v?v="seq":"setof"===v&&(v="set");if(e.tagByName.hasOwnProperty(v))v=e.tagByName[v];else if("number"!=typeof v||(0|v)!==v){g=m.error("Unknown tag: "+v);break a}31<=v?g=m.error("Multi-octet tag encoding unsupported"):(a||(v|=32),g=v|e.tagClassByName[g||"universal"]<<6)}if(128>l.length)return(r=new k(2))[0]=g,r[1]=l.length,this._createEncoderBuffer([r,
l]);m=1;for(a=l.length;256<=a;a>>=8)m++;(r=new k(2+m))[0]=g;r[1]=128|m;a=1+m;for(g=l.length;0<g;a--,g>>=8)r[a]=255&g;return this._createEncoderBuffer([r,l])},c.prototype._encodeStr=function(m,a){if("bitstr"===a)return this._createEncoderBuffer([0|m.unused,m.data]);if("bmpstr"===a){a=new k(2*m.length);for(var g=0;g<m.length;g++)a.writeUInt16BE(m.charCodeAt(g),2*g);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(m)?this._createEncoderBuffer(m):(this||wn).reporter.error("Encoding of string type: numstr supports only digits and space"):
"printstr"===a?this._isPrintstr(m)?this._createEncoderBuffer(m):(this||wn).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(m):(this||wn).reporter.error("Encoding of string type: "+a+" unsupported")},c.prototype._encodeObjid=function(m,a,g){if("string"==typeof m){if(!a)return(this||
wn).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(m))return(this||wn).reporter.error("objid not found in values map");m=a[m].split(/[\s\.]+/g);for(a=0;a<m.length;a++)m[a]|=0}else if(Array.isArray(m))for(m=m.slice(),a=0;a<m.length;a++)m[a]|=0;if(!Array.isArray(m))return(this||wn).reporter.error("objid() should be either array or string, got: "+JSON.stringify(m));if(!g){if(40<=m[1])return(this||wn).reporter.error("Second objid identifier OOB");m.splice(0,2,40*m[0]+
m[1])}var l=0;for(a=0;a<m.length;a++)for(g=m[a],l++;128<=g;g>>=7)l++;l=new k(l);var r=l.length-1;for(a=m.length-1;0<=a;a--)for(g=m[a],l[r--]=127&g;0<(g>>=7);)l[r--]=128|127&g;return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(m,a){var g;m=new Date(m);return"gentime"===a?g=[h(m.getFullYear()),h(m.getUTCMonth()+1),h(m.getUTCDate()),h(m.getUTCHours()),h(m.getUTCMinutes()),h(m.getUTCSeconds()),"Z"].join(""):"utctime"===a?g=[h(m.getFullYear()%100),h(m.getUTCMonth()+1),h(m.getUTCDate()),
h(m.getUTCHours()),h(m.getUTCMinutes()),h(m.getUTCSeconds()),"Z"].join(""):(this||wn).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(g,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(m,a){if("string"==typeof m){if(!a)return(this||wn).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(m))return(this||wn).reporter.error("Values map doesn't contain: "+JSON.stringify(m));m=a[m]}"number"==
typeof m||k.isBuffer(m)||(a=m.toArray(),!m.sign&&128&a[0]&&a.unshift(0),m=new k(a));if(k.isBuffer(m)){var g=m.length;0===m.length&&g++;g=new k(g);return m.copy(g),0===m.length&&(g[0]=0),this._createEncoderBuffer(g)}if(128>m)return this._createEncoderBuffer(m);if(256>m)return this._createEncoderBuffer([0,m]);g=1;for(a=m;256<=a;a>>=8)g++;for(a=(g=Array(g)).length-1;0<=a;a--)g[a]=255&m,m>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(new k(g))},c.prototype._encodeBool=function(m){return this._createEncoderBuffer(m?
255:0)},c.prototype._use=function(m,a){return"function"==typeof m&&(m=m(a)),m._getEncoder("der").tree},c.prototype._skipDefault=function(m,a,g){var l=(this||wn)._baseState;if(null===l.default)return!1;m=m.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,a,g).join()),m.length!==l.defaultBuffer.length)return!1;for(a=0;a<m.length;a++)if(m[a]!==l.defaultBuffer[a])return!1;return!0},AR}function nfa(){if(d2)return BR;d2=!0;var d=BR;return d.der=b2(),d.pem=function(){function c(k){f.call(this||
CR,k);(this||CR).enc="pem"}if(e2)return DR;e2=!0;var h=zi,f=b2();return h(c,f),DR=c,c.prototype.encode=function(k,n){k=f.prototype.encode.call(this||CR,k).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],e=0;e<k.length;e+=64)b.push(k.slice(e,e+64));return b.push("-----END "+n.label+"-----"),b.join("\n")},DR}(),BR}function LK(){if(f2)return ER;f2=!0;var d=ER;return d.bignum=Um,d.define=function(){function c(k,n){(this||nr).name=k;(this||nr).body=n;(this||nr).decoders={};(this||nr).encoders=
{}}if(g2)return FR;g2=!0;var h=LK(),f=zi;return FR.define=function(k,n){return new c(k,n)},c.prototype._createNamed=function(k){try{var n=FA.runInThisContext("(function "+(this||nr).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(e){this._initNamed(e)}}return f(n,k),n.prototype._initNamed=function(b){k.call(this||nr,b)},new n(this||nr)},c.prototype._getDecoder=function(k){return k=k||"der",(this||nr).decoders.hasOwnProperty(k)||((this||nr).decoders[k]=this._createNamed(h.decoders[k])),
(this||nr).decoders[k]},c.prototype.decode=function(k,n,b){return this._getDecoder(n).decode(k,b)},c.prototype._getEncoder=function(k){return k=k||"der",(this||nr).encoders.hasOwnProperty(k)||((this||nr).encoders[k]=this._createNamed(h.encoders[k])),(this||nr).encoders[k]},c.prototype.encode=function(k,n,b){return this._getEncoder(n).encode(k,b)},FR}().define,d.base=cG(),d.constants=V1(),d.decoders=mfa(),d.encoders=nfa(),ER}function jD(d){var c;"object"!=typeof d||GR.isBuffer(d)||(c=d.passphrase,
d=d.key);"string"==typeof d&&(d=GR.from(d));var h=c;d=d.toString();var f=d.match(ofa);if(f){var k="aes"+f[1],n=MK.from(f[2],"hex");var b=MK.from(f[3].replace(/[\r\n]/g,""),"base64");f=dG(h,n.slice(0,8),parseInt(f[1],10)).key;h=[];k=or.createDecipheriv(k,f,n);h.push(k.update(b));h.push(k.final());b=MK.concat(h)}else b=d.match(pfa),b=new MK(b[2].replace(/[\r\n]/g,""),"base64");d=d.match(qfa)[1];switch(d){case "CERTIFICATE":var e=Aq.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(e||
(e=Aq.PublicKey.decode(b,"der")),c=e.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Aq.RSAPublicKey.decode(e.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return e.subjectPrivateKey=e.subjectPublicKey,{type:"ec",data:e};case "1.2.840.10040.4.1":return e.algorithm.params.pub_key=Aq.DSAparam.decode(e.subjectPublicKey.data,"der"),{type:"dsa",data:e.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":h=Aq.EncryptedPrivateKey.decode(b,"der"),
b=c,k=h.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),e=rfa[h.algorithm.decrypt.cipher.algo.join(".")],d=h.algorithm.decrypt.cipher.iv,c=h.subjectPrivateKey,h=parseInt(e.split("-")[1],10)/8,b=sfa.pbkdf2Sync(b,k,n,h,"sha1"),e=tfa.createDecipheriv(e,b,d),d=[],b=(d.push(e.update(c)),d.push(e.final()),GR.concat(d));case "PRIVATE KEY":switch(c=(e=Aq.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Aq.RSAPrivateKey.decode(e.subjectPrivateKey,
"der");case "1.2.840.10045.2.1":return{curve:e.algorithm.curve,privateKey:Aq.ECPrivateKey.decode(e.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return e.algorithm.params.priv_key=Aq.DSAparam.decode(e.subjectPrivateKey,"der"),{type:"dsa",params:e.algorithm.params};default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return Aq.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return Aq.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:Aq.DSAPrivateKey.decode(b,
"der")};case "EC PRIVATE KEY":return{curve:(b=Aq.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+d);}}function h2(d,c,h,f){if((d=new jp(d.toArray())).length<c.byteLength()){var k=new jp(c.byteLength()-d.length);k.fill(0);d=jp.concat([k,d])}k=h.length;h=(h=HR(h,c)).mod(c);h=new jp(h.toArray());h.length<c.byteLength()&&(c=new jp(c.byteLength()-h.length),c.fill(0),h=jp.concat([c,h]));c=h;h=new jp(k);h.fill(1);k=new jp(k);return k.fill(0),
k=GA(f,k).update(h).update(new jp([0])).update(d).update(c).digest(),h=GA(f,k).update(h).digest(),{k:k=GA(f,k).update(h).update(new jp([1])).update(d).update(c).digest(),v:GA(f,k).update(h).digest()}}function HR(d,c){var h=new NK(d);d=(d.length<<3)-c.bitLength();return 0<d&&h.ishrn(d),h}function i2(d,c,h){var f;do{for(f=new jp(0);8*f.length<d.bitLength();)c.v=GA(h,c.k).update(c.v).digest(),f=jp.concat([f,c.v]);f=HR(f,d);c.k=GA(h,c.k).update(c.v).update(new jp([0])).digest();c.v=GA(h,c.k).update(c.v).digest()}while(-1!==
f.cmp(d));return f}function j2(d,c){if(0>=d.cmpn(0))throw Error("invalid sig");if(d.cmp(c)>=c)throw Error("invalid sig");}function eG(d){OK.Writable.call(this||gm);d=HA[d];if(!d)throw Error("Unknown message digest");(this||gm)._hashType=d.hash;(this||gm)._hash=k2(d.hash);(this||gm)._tag=d.id;(this||gm)._signType=d.sign}function fG(d){OK.Writable.call(this||gm);d=HA[d];if(!d)throw Error("Unknown message digest");(this||gm)._hash=k2(d.hash);(this||gm)._tag=d.id;(this||gm)._signType=d.sign}function l2(d){return new eG(d)}
function m2(d){return new fG(d)}function IA(d){(this||xn).curveType=pr[d];(this||xn).curveType||((this||xn).curveType={name:d});(this||xn).curve=new ufa.ec((this||xn).curveType.name);(this||xn).keys=void 0}function IR(d,c,h){Array.isArray(d)||(d=d.toArray());d=new Hw(d);h&&d.length<h&&(h=new Hw(h-d.length),h.fill(0),d=Hw.concat([h,d]));return c?d.toString(c):d}function n2(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function o2(d,
c){if("number"!=typeof d||d!=d)throw new TypeError("offset must be a number");if(d>p2||0>d)throw new TypeError("offset must be a uint32");if(d>q2||d>c)throw new RangeError("offset out of range");}function r2(d,c,h){if("number"!=typeof d||d!=d)throw new TypeError("size must be a number");if(d>p2||0>d)throw new TypeError("size must be a uint32");if(d+c>h||d>q2)throw new RangeError("buffer too small");}function s2(d,c,h,f){return JR.browser?(h=new Uint8Array(d.buffer,c,h),KR.getRandomValues(h),f?(JR.nextTick(function(){f(null,
d)}),void 0):d):f?(t2(h,function(k,n){if(k)return f(k);n.copy(d,c);f(null,d)}),void 0):(t2(h).copy(d,c),d)}function vfa(d){var c=[];d.replace(/[a-fA-F0-9]{2}/g,function(h){c.push(parseInt(h,16))});return c}function PK(d){return d&&d.__esModule?d:{default:d}}function u2(d,c){d=d||[];c=c||{};try{return new Blob(d,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),f=0;f<d.length;f+=1)h.append(d[f]);return h.getBlob(c.type)}}function v2(d){for(var c=d.length,h=new ArrayBuffer(c),f=new Uint8Array(h),k=0;k<c;k++)f[k]=d.charCodeAt(k);return h}function w2(d,c){return u2([v2(d)],{type:c})}function x2(d,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(f)return c(n);k="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)k+=String.fromCharCode(n[e]);c(k)};f?
h.readAsBinaryString(d):h.readAsArrayBuffer(d)}function y2(d,c){x2(d,function(h){c(h)})}function wfa(d,c,h){return d.webkitSlice?d.webkitSlice(c,h):d.slice(c,h)}function xfa(d,c,h,f,k){if(0<h||f<c.size)c=wfa(c,h,f);z2.readAsArrayBuffer(c,function(n){d.append(n);k()})}function yfa(d,c,h,f,k){if(0<h||f<c.length)c=c.substring(h,f);d.appendBinary(c);k()}function QK(d){return d&&"object"===typeof d&&"default"in d?d["default"]:d}function gG(d){var c;if(!d||"object"!==typeof d)return d;if(Array.isArray(d)){var h=
[];var f=0;for(c=d.length;f<c;f++)h[f]=gG(d[f]);return h}if(d instanceof Date)return d.toISOString();if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer||"undefined"!==typeof Blob&&d instanceof Blob)return d instanceof ArrayBuffer?"function"===typeof d.slice?d=d.slice(0):(f=new ArrayBuffer(d.byteLength),h=new Uint8Array(f),d=new Uint8Array(d),h.set(d),d=f):(f=d.size,h=d.type,d="function"===typeof d.slice?d.slice(0,f,h):d.webkitSlice(0,f,h)),d;h=Object.getPrototypeOf(d);null===h?h=!0:(h=
h.constructor,h="function"==typeof h&&h instanceof h&&A2.call(h)==zfa);if(!h)return d;h={};for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&(c=gG(d[f]),"undefined"!==typeof c&&(h[f]=c));return h}function B2(d){var c=!1;return LR(function(h){if(c)throw Error("once called more than once");c=!0;d.apply(this,h)})}function C2(d){return LR(function(c){c=gG(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var e;try{var m=B2(function(a,g){a?b(a):n(g)});c.push(m);
(e=d.apply(h,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});f&&k.then(function(n){f(null,n)},f);return k})}function Afa(d,c,h){if(d.constructor.listeners("debug").length){for(var f=["api",d.name,c],k=0;k<h.length-1;k++)f.push(h[k]);d.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(b,e){var m=["api",d.name,c];m=m.concat(b?["error",b]:["success",e]);d.constructor.emit("debug",m);n(b,e)}}}function MR(d,c){for(var h={},f=0,k=c.length;f<k;f++){var n=c[f];n in d&&(h[n]=d[n])}return h}
function D2(d){return d}function Bfa(d){return[{ok:d}]}function Cfa(d){RK&&addEventListener("storage",function(c){d.emit(c.key)})}function kD(){SK.call(this);this._listeners={};Cfa(this)}function NR(d){if("undefined"!==typeof console&&"function"===typeof console[d]){var c=Array.prototype.slice.call(arguments,1);console[d].apply(console,c)}}function E2(d){if(!d)return null;var c=d.split("/");return 2===c.length?c:1===c.length?[d,d]:null}function F2(d,c,h){return new Promise(function(f,k){d.get(c,function(n,
b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return f({updated:!1,rev:n});b._id=c;b._rev=n;f(Dfa(d,b,h))})})}function Dfa(d,c,h){return d.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return F2(d,c._id,h)})}function G2(d){var c=d.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");d=d.indexOf("=");-1===d&&(d=c);return[d,d===c?0:4-d%4]}function Efa(d,c,h){for(var f=[],k=c;k<h;k+=3)c=(d[k]<<16&16711680)+(d[k+
1]<<8&65280)+(d[k+2]&255),f.push(iv[c>>18&63]+iv[c>>12&63]+iv[c>>6&63]+iv[c&63]);return f.join("")}function Iw(d){if(d>OR)throw new RangeError('The value "'+d+'" is invalid for option "size"');d=new Uint8Array(d);Object.setPrototypeOf(d,Ke.prototype);return d}function Ke(d,c,h){if("number"===typeof d){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return PR(d)}return H2(d,c,h)}function H2(d,c,h){if("string"===typeof d){var f=c;if("string"!==
typeof f||""===f)f="utf8";if(!Ke.isEncoding(f))throw new TypeError("Unknown encoding: "+f);c=I2(d,f)|0;h=Iw(c);d=h.write(d,f);d!==c&&(h=h.slice(0,d));return h}if(ArrayBuffer.isView(d))return jv(d,Uint8Array)?(d=new Uint8Array(d),d=J2(d.buffer,d.byteOffset,d.byteLength)):d=QR(d),d;if(null==d)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(jv(d,ArrayBuffer)||d&&jv(d.buffer,ArrayBuffer)||"undefined"!==
typeof SharedArrayBuffer&&(jv(d,SharedArrayBuffer)||d&&jv(d.buffer,SharedArrayBuffer)))return J2(d,c,h);if("number"===typeof d)throw new TypeError('The "value" argument must not be of type number. Received type number');f=d.valueOf&&d.valueOf();if(null!=f&&f!==d)return Ke.from(f,c,h);if(f=Ffa(d))return f;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof d[Symbol.toPrimitive])return Ke.from(d[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof d);}function K2(d){if("number"!==typeof d)throw new TypeError('"size" argument must be of type number');if(0>d)throw new RangeError('The value "'+d+'" is invalid for option "size"');}function PR(d){K2(d);return Iw(0>d?0:RR(d)|0)}function QR(d){for(var c=0>d.length?0:RR(d.length)|0,h=Iw(c),f=0;f<c;f+=1)h[f]=d[f]&255;return h}function J2(d,c,h){if(0>c||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
d=void 0===c&&void 0===h?new Uint8Array(d):void 0===h?new Uint8Array(d,c):new Uint8Array(d,c,h);Object.setPrototypeOf(d,Ke.prototype);return d}function Ffa(d){if(Ke.isBuffer(d)){var c=RR(d.length)|0,h=Iw(c);if(0===h.length)return h;d.copy(h,0,0,c);return h}if(void 0!==d.length)return(c="number"!==typeof d.length)||(c=d.length,c=c!==c),c?Iw(0):QR(d);if("Buffer"===d.type&&Array.isArray(d.data))return QR(d.data)}function RR(d){if(d>=OR)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
OR.toString(16)+" bytes");return d|0}function I2(d,c){if(Ke.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||jv(d,ArrayBuffer))return d.byteLength;if("string"!==typeof d)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);var h=d.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return SR(d).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
h;case "hex":return h>>>1;case "base64":return TK.toByteArray(L2(d)).length;default:if(k)return f?-1:SR(d).length;c=(""+c).toLowerCase();k=!0}}function Gfa(d,c,h){var f=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===h||h>this.length)h=this.length;if(0>=h)return"";h>>>=0;c>>>=0;if(h<=c)return"";for(d||(d="utf8");;)switch(d){case "hex":d=this.length;if(!c||0>c)c=0;if(!h||0>h||h>d)h=d;for(d="";c<h;++c)d+=Hfa[this[c]];return d;case "utf8":case "utf-8":return M2(this,c,h);case "ascii":d=
"";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(this[c]&127);return d;case "latin1":case "binary":d="";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(this[c]);return d;case "base64":return c=0===c&&h===this.length?TK.fromByteArray(this):TK.fromByteArray(this.slice(c,h)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(d=0;d<c.length-1;d+=2)h+=String.fromCharCode(c[d]+256*c[d+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+
d);d=(d+"").toLowerCase();f=!0}}function JA(d,c,h){var f=d[c];d[c]=d[h];d[h]=f}function N2(d,c,h,f,k){if(0===d.length)return-1;"string"===typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);h=+h;h!==h&&(h=k?0:d.length-1);0>h&&(h=d.length+h);if(h>=d.length){if(k)return-1;h=d.length-1}else if(0>h)if(k)h=0;else return-1;"string"===typeof c&&(c=Ke.from(c,f));if(Ke.isBuffer(c))return 0===c.length?-1:O2(d,c,h,f,k);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
k?Uint8Array.prototype.indexOf.call(d,c,h):Uint8Array.prototype.lastIndexOf.call(d,c,h):O2(d,[c],h,f,k);throw new TypeError("val must be string, number or Buffer");}function O2(d,c,h,f,k){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,e=d.length,m=c.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>d.length||2>c.length)return-1;b=2;e/=2;m/=2;h/=2}if(k)for(f=-1;h<e;h++)if(n(d,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===
m)return f*b}else-1!==f&&(h-=h-f),f=-1;else for(h+m>e&&(h=e-m);0<=h;h--){e=!0;for(f=0;f<m;f++)if(n(d,h+f)!==n(c,f)){e=!1;break}if(e)return h}return-1}function M2(d,c,h){h=Math.min(d.length,h);for(var f=[];c<h;){var k=d[c],n=null,b=239<k?4:223<k?3:191<k?2:1;if(c+b<=h)switch(b){case 1:128>k&&(n=k);break;case 2:var e=d[c+1];128===(e&192)&&(k=(k&31)<<6|e&63,127<k&&(n=k));break;case 3:e=d[c+1];var m=d[c+2];128===(e&192)&&128===(m&192)&&(k=(k&15)<<12|(e&63)<<6|m&63,2047<k&&(55296>k||57343<k)&&(n=k));break;
case 4:e=d[c+1];m=d[c+2];var a=d[c+3];128===(e&192)&&128===(m&192)&&128===(a&192)&&(k=(k&15)<<18|(e&63)<<12|(m&63)<<6|a&63,65535<k&&1114112>k&&(n=k))}null===n?(n=65533,b=1):65535<n&&(n-=65536,f.push(n>>>10&1023|55296),n=56320|n&1023);f.push(n);c+=b}d=f.length;if(d<=P2)f=String.fromCharCode.apply(String,f);else{h="";for(c=0;c<d;)h+=String.fromCharCode.apply(String,f.slice(c,c+=P2));f=h}return f}function co(d,c,h){if(0!==d%1||0>d)throw new RangeError("offset is not uint");if(d+c>h)throw new RangeError("Trying to access beyond buffer length");
}function Bq(d,c,h,f,k,n){if(!Ke.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>d.length)throw new RangeError("Index out of range");}function Q2(d,c,h,f,k,n){if(h+f>d.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function R2(d,c,h,f,k){c=+c;h>>>=0;k||Q2(d,c,h,4);lD.write(d,c,h,f,23,4);return h+4}function S2(d,c,h,f,k){c=+c;h>>>=0;k||Q2(d,
c,h,8);lD.write(d,c,h,f,52,8);return h+8}function L2(d){d=d.split("=")[0];d=d.trim().replace(Ifa,"");if(2>d.length)return"";for(;0!==d.length%4;)d+="=";return d}function SR(d,c){c=c||Infinity;for(var h,f=d.length,k=null,n=[],b=0;b<f;++b){h=d.charCodeAt(b);if(55295<h&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}else if(b+1===f){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=(k-55296<<10|h-56320)+65536}else k&&-1<
(c-=3)&&n.push(239,191,189);k=null;if(128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,h&63|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,h&63|128)}else if(1114112>h){if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw Error("Invalid code point");}return n}function UK(d,c,h,f){for(var k=0;k<f&&!(k+h>=c.length||k>=d.length);++k)c[k+h]=d[k];return k}function jv(d,c){return d instanceof c||null!=d&&null!=d.constructor&&
null!=d.constructor.name&&d.constructor.name===c.name}function oy(d){if("object"!==typeof d||null===d)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Jw).db=d;(this||Jw)._ended=!1;(this||Jw)._nexting=!1}function Dt(d){if("object"!==typeof d||null===d)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||yn).db=d;(this||yn)._operations=[];(this||yn)._written=!1}function Fl(d){(this||qr).status="new";(this||qr).supports=
Jfa(d,{status:!0})}function T2(d,c){var h={},f;for(f in c)if(Kfa.call(c,f)){var k=c[f];-1!==Lfa.indexOf(f)&&(k=d._serializeKey(k));h[f]=k}return h}function mD(d,c){U2.call(this||Et,d);(this||Et)._options=c;(this||Et)._iterator=null;(this||Et)._operations=[]}function KA(d){V2.call(this||eo,d.supports||{});Mfa.forEach(function(c){"function"!==typeof d[c]||(this||eo).supports.additionalMethods[c]||((this||eo).supports.additionalMethods[c]=!0)},this||eo);(this||eo)._db=d;(this||eo)._operations=[];W2(this||
eo)}function Nfa(d){X2.concat("iterator").forEach(function(c){d["_"+c]=function(){return(this||eo)._db[c].apply((this||eo)._db,arguments)}});Object.keys(d.supports.additionalMethods).forEach(function(c){d[c]=function(){return(this||eo)._db[c].apply((this||eo)._db,arguments)}})}function W2(d){X2.forEach(function(c){d["_"+c]=function(){(this||eo)._operations.push({method:c,args:arguments})}});Object.keys(d.supports.additionalMethods).forEach(function(c){d[c]=function(){(this||eo)._operations.push({method:c,
args:arguments})}});d._iterator=function(c){c=new Y2(d,c);(this||eo)._operations.push({iterator:c});return c}}function Z2(){if($2)return a3;$2=!0;return a3=bv.EventEmitter}function nD(){function d(f,k,n){n||(n=Error);var b=function(e,m,a){return n.call(this,"string"===typeof k?k:k(e,m,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=f;h[f]=b}function c(f,k){if(Array.isArray(f)){var n=f.length;f=f.map(function(b){return String(b)});return 2<n?"one of "+k+" "+f.slice(0,n-1).join(", ")+
", or "+f[n-1]:2===n?"one of "+k+" "+f[0]+" or "+f[1]:"of "+k+" "+f[0]}return"of "+k+" "+String(f)}if(b3)return TR;b3=!0;var h={};d("ERR_INVALID_OPT_VALUE",function(f,k){return'The value "'+k+'" is invalid for option "'+f+'"'},TypeError);d("ERR_INVALID_ARG_TYPE",function(f,k,n){var b;if(b="string"===typeof k)b="not "===k.substr(0,4);b?(b="must not be",k=k.replace(/^not /,"")):b="must be";var e=void 0;if(void 0===e||e>f.length)e=f.length;" argument"===f.substring(e-9,e)?f="The "+f+" "+b+" "+c(k,"type"):
(e=void 0,"number"!==typeof e&&(e=0),e=e+1>f.length?!1:-1!==f.indexOf(".",e),f='The "'+f+'" '+(e?"property":"argument")+" "+b+" "+c(k,"type"));return f+(". Received type "+typeof n)},TypeError);d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");d("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});d("ERR_STREAM_PREMATURE_CLOSE","Premature close");d("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});d("ERR_MULTIPLE_CALLBACK",
"Callback called multiple times");d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");d("ERR_STREAM_WRITE_AFTER_END","write after end");d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);d("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");TR.codes=h;return TR}function UR(d){try{if(!VR.localStorage)return!1}catch(c){return!1}d=VR.localStorage[d];return null==d?!1:"true"===
String(d).toLowerCase()}function c3(d,c){for(var h in d)c[h]=d[h]}function LA(d,c,h){return kv(d,c,h)}function Ofa(d){if(!d)return"utf8";for(var c;;)switch(d){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return d;default:if(c)return;d=(""+d).toLowerCase();c=!0}}function hG(d){var c=Ofa(d);if("string"!==typeof c&&(WR.isEncoding===d3||!d3(d)))throw Error("Unknown encoding: "+
d);this.encoding=c||d;switch(this.encoding){case "utf16le":this.text=Pfa;this.end=Qfa;d=4;break;case "utf8":this.fillLast=Rfa;d=4;break;case "base64":this.text=Sfa;this.end=Tfa;d=3;break;default:this.write=Ufa;this.end=Vfa;return}this.lastTotal=this.lastNeed=0;this.lastChar=WR.allocUnsafe(d)}function YR(d){return 127>=d?0:6===d>>5?2:14===d>>4?3:30===d>>3?4:2===d>>6?-1:-2}function Wfa(d,c,h){var f=c.length-1;if(f<h)return 0;var k=YR(c[f]);if(0<=k)return 0<k&&(d.lastNeed=k-1),k;if(--f<h||-2===k)return 0;
k=YR(c[f]);if(0<=k)return 0<k&&(d.lastNeed=k-2),k;if(--f<h||-2===k)return 0;k=YR(c[f]);return 0<=k?(0<k&&(2===k?k=0:d.lastNeed=k-3),k):0}function Rfa(d){var c=this.lastTotal-this.lastNeed;a:if(128!==(d[0]&192)){this.lastNeed=0;var h="\ufffd"}else{if(1<this.lastNeed&&1<d.length){if(128!==(d[1]&192)){this.lastNeed=1;h="\ufffd";break a}if(2<this.lastNeed&&2<d.length&&128!==(d[2]&192)){this.lastNeed=2;h="\ufffd";break a}}h=void 0}if(void 0!==h)return h;if(this.lastNeed<=d.length)return d.copy(this.lastChar,
c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,c,0,d.length);this.lastNeed-=d.length}function Pfa(d,c){if(0===(d.length-c)%2){if(c=d.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=d[d.length-1];return d.toString("utf16le",c,d.length-1)}function Qfa(d){d=
d&&d.length?this.write(d):"";return this.lastNeed?d+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):d}function Sfa(d,c){var h=(d.length-c)%3;if(0===h)return d.toString("base64",c);this.lastNeed=3-h;this.lastTotal=3;1===h?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]);return d.toString("base64",c,d.length-h)}function Tfa(d){d=d&&d.length?this.write(d):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function Ufa(d){return d.toString(this.encoding)}
function Vfa(d){return d&&d.length?this.write(d):""}function ZR(){function d(k){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,e=Array(b),m=0;m<b;m++)e[m]=arguments[m];k.apply(this,e)}}}function c(){}function h(k,n,b){if("function"===typeof n)return h(k,null,n);n||(n={});b=d(b||c);var e=n.readable||!1!==n.readable&&k.readable,m=n.writable||!1!==n.writable&&k.writable,a=function(){k.writable||l()},g=k._writableState&&k._writableState.finished,l=function(){m=!1;g=!0;e||b.call(k)},
r=k._readableState&&k._readableState.endEmitted,v=function(){e=!1;r=!0;m||b.call(k)},y=function(F){b.call(k,F)},A=function(){var F;if(e&&!r)return k._readableState&&k._readableState.ended||(F=new f),b.call(k,F);if(m&&!g)return k._writableState&&k._writableState.ended||(F=new f),b.call(k,F)},E=function(){k.req.on("finish",l)};if(k.setHeader&&"function"===typeof k.abort)if(k.on("complete",l),k.on("abort",A),k.req)E();else k.on("request",E);else m&&!k._writableState&&(k.on("end",a),k.on("close",a));
k.on("end",v);k.on("finish",l);if(!1!==n.error)k.on("error",y);k.on("close",A);return function(){k.removeListener("complete",l);k.removeListener("abort",A);k.removeListener("request",E);k.req&&k.req.removeListener("finish",l);k.removeListener("end",a);k.removeListener("close",a);k.removeListener("finish",l);k.removeListener("end",v);k.removeListener("error",y);k.removeListener("close",A)}}if(e3)return f3;e3=!0;var f=nD().codes.ERR_STREAM_PREMATURE_CLOSE;return f3=h}function Xfa(){if(g3)return h3;
g3=!0;return h3=function(){throw Error("Readable.from is not available in the browser");}}function Yfa(){function d(e,m){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);m&&(g=g.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}));a.push.apply(a,g)}return a}function c(e){for(var m=1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?d(Object(a),!0).forEach(function(g){var l=a[g];g in e?Object.defineProperty(e,g,{value:l,
enumerable:!0,configurable:!0,writable:!0}):e[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(a,g))})}return e}function h(e,m){for(var a=0;a<m.length;a++){var g=m[a];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(e,g.key,g)}}function f(e,m,a){m&&h(e.prototype,m);a&&h(e,a);return e}if(i3)return j3;i3=!0;
var k=Ni.Buffer,n=k3.inspect,b=n&&n.custom||"inspect";return j3=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}f(e,[{key:"push",value:function(m){m={data:m,next:null};0<this.length?this.tail.next=m:this.head=m;this.tail=m;++this.length}},{key:"unshift",value:function(m){m={data:m,next:this.head};0===this.length&&(this.tail=m);this.head=m;++this.length}},{key:"shift",value:function(){if(0!==this.length){var m=
this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return m}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(m){if(0===this.length)return"";for(var a=this.head,g=""+a.data;a=a.next;)g+=m+a.data;return g}},{key:"concat",value:function(m){if(0===this.length)return k.alloc(0);m=k.allocUnsafe(m>>>0);for(var a=this.head,g=0;a;)k.prototype.copy.call(a.data,m,g),g+=a.data.length,a=a.next;return m}},{key:"consume",value:function(m,
a){m<this.head.data.length?(a=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):a=m===this.head.data.length?this.shift():a?this._getString(m):this._getBuffer(m);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var a=this.head,g=1,l=a.data;for(m-=l.length;a=a.next;){var r=a.data,v=m>r.length?r.length:m;l=v===r.length?l+r:l+r.slice(0,m);m-=v;if(0===m){v===r.length?(++g,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=r.slice(v));
break}++g}this.length-=g;return l}},{key:"_getBuffer",value:function(m){var a=k.allocUnsafe(m),g=this.head,l=1;g.data.copy(a);for(m-=g.data.length;g=g.next;){var r=g.data,v=m>r.length?r.length:m;r.copy(a,a.length-m,0,v);m-=v;if(0===m){v===r.length?(++l,this.head=g.next?g.next:this.tail=null):(this.head=g,g.data=r.slice(v));break}++l}this.length-=l;return a}},{key:b,value:function(m,a){return n(this,c({},a,{depth:0,customInspect:!1}))}}]);return e}()}function l3(){function d(k,n){h(k,n);c(k)}function c(k){k._writableState&&
!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function h(k,n){k.emit("error",n)}if(m3)return n3;m3=!0;var f=uj;return n3={destroy:function(k,n){var b=this,e=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||e)return n?n(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(h,this,k)):f.nextTick(h,this,k)),this;this._readableState&&(this._readableState.destroyed=
!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(k||null,function(m){!n&&m?b._writableState?b._writableState.errorEmitted?f.nextTick(c,b):(b._writableState.errorEmitted=!0,f.nextTick(d,b,m)):f.nextTick(d,b,m):n?(f.nextTick(c,b),n(m)):f.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=
!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(k,n){var b=k._readableState,e=k._writableState;b&&b.autoDestroy||e&&e.autoDestroy?k.destroy(n):k.emit("error",n)}}}function o3(){if(p3)return q3;p3=!0;var d=nD().codes.ERR_INVALID_OPT_VALUE;return q3={getHighWaterMark:function(c,h,f,k){h=null!=h.highWaterMark?h.highWaterMark:
k?h[f]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new d(k?f:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}}}function r3(){function d(T){var U=this;this.entry=this.next=null;this.finish=function(){var pa=U.entry;for(U.entry=null;pa;){var fa=pa.callback;T.pendingcb--;fa(void 0);pa=pa.next}T.corkedRequestsFree.next=U}}function c(){}function h(T,U,pa){l=l||oD();T=T||{};"boolean"!==typeof pa&&(pa=U instanceof l);this.objectMode=!!T.objectMode;pa&&(this.objectMode=
this.objectMode||!!T.writableObjectMode);this.highWaterMark=F(this,T,"writableHighWaterMark",pa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==T.decodeStrings;this.defaultEncoding=T.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){var oa=U._writableState,hb=oa.sync,Cb=oa.writecb;if("function"!==typeof Cb)throw new N;oa.writing=!1;oa.writecb=null;oa.length-=
oa.writelen;oa.writelen=0;fa?(--oa.pendingcb,hb?(g.nextTick(Cb,fa),g.nextTick(a,U,oa),U._writableState.errorEmitted=!0,K(U,fa)):(Cb(fa),U._writableState.errorEmitted=!0,K(U,fa),a(U,oa))):((fa=e(oa)||U.destroyed)||oa.corked||oa.bufferProcessing||!oa.bufferedRequest||b(U,oa),hb?g.nextTick(n,U,oa,fa,Cb):n(U,oa,fa,Cb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==T.emitClose;this.autoDestroy=
!!T.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}function f(T){l=l||oD();var U=this instanceof l;if(!U&&!aa.call(f,this))return new f(T);this._writableState=new h(T,this,U);this.writable=!0;T&&("function"===typeof T.write&&(this._write=T.write),"function"===typeof T.writev&&(this._writev=T.writev),"function"===typeof T.destroy&&(this._destroy=T.destroy),"function"===typeof T.final&&(this._final=T.final));v.call(this)}function k(T,U,pa,fa,oa,hb,Cb){U.writelen=fa;U.writecb=
Cb;U.writing=!0;U.sync=!0;if(U.destroyed)U.onwrite(new W("write"));else pa?T._writev(oa,U.onwrite):T._write(oa,hb,U.onwrite);U.sync=!1}function n(T,U,pa,fa){!pa&&0===U.length&&U.needDrain&&(U.needDrain=!1,T.emit("drain"));U.pendingcb--;fa();a(T,U)}function b(T,U){U.bufferProcessing=!0;var pa=U.bufferedRequest;if(T._writev&&pa&&pa.next){var fa=Array(U.bufferedRequestCount),oa=U.corkedRequestsFree;oa.entry=pa;for(var hb=0,Cb=!0;pa;)fa[hb]=pa,pa.isBuf||(Cb=!1),pa=pa.next,hb+=1;fa.allBuffers=Cb;k(T,U,
!0,U.length,fa,"",oa.finish);U.pendingcb++;U.lastBufferedRequest=null;oa.next?(U.corkedRequestsFree=oa.next,oa.next=null):U.corkedRequestsFree=new d(U);U.bufferedRequestCount=0}else{for(;pa&&(fa=pa.chunk,k(T,U,!1,U.objectMode?1:fa.length,fa,pa.encoding,pa.callback),pa=pa.next,U.bufferedRequestCount--,!U.writing););null===pa&&(U.lastBufferedRequest=null)}U.bufferedRequest=pa;U.bufferProcessing=!1}function e(T){return T.ending&&0===T.length&&null===T.bufferedRequest&&!T.finished&&!T.writing}function m(T,
U){T._final(function(pa){U.pendingcb--;pa&&K(T,pa);U.prefinished=!0;T.emit("prefinish");a(T,U)})}function a(T,U){var pa=e(U);pa&&(U.prefinished||U.finalCalled||("function"!==typeof T._final||U.destroyed?(U.prefinished=!0,T.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,g.nextTick(m,T,U))),0===U.pendingcb&&(U.finished=!0,T.emit("finish"),U.autoDestroy&&(U=T._readableState,(!U||U.autoDestroy&&U.endEmitted)&&T.destroy())));return pa}if(s3)return $R;s3=!0;var g=uj;$R=f;var l;f.WritableState=h;var r=
{deprecate:Zfa},v=Z2(),y=Ni.Buffer,A=$fa.Uint8Array||function(){},E=l3(),F=o3().getHighWaterMark,H=nD().codes,I=H.ERR_INVALID_ARG_TYPE,M=H.ERR_METHOD_NOT_IMPLEMENTED,N=H.ERR_MULTIPLE_CALLBACK,X=H.ERR_STREAM_CANNOT_PIPE,W=H.ERR_STREAM_DESTROYED,ea=H.ERR_STREAM_NULL_VALUES,Aa=H.ERR_STREAM_WRITE_AFTER_END,Ka=H.ERR_UNKNOWN_ENCODING,K=E.errorOrDestroy;xl(f,v);h.prototype.getBuffer=function(){for(var T=this.bufferedRequest,U=[];T;)U.push(T),T=T.next;return U};(function(){try{Object.defineProperty(h.prototype,
"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(T){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var aa=Function.prototype[Symbol.hasInstance];Object.defineProperty(f,Symbol.hasInstance,{value:function(T){return aa.call(this,T)?!0:this!==f?!1:T&&T._writableState instanceof h}})}else aa=function(T){return T instanceof this};
f.prototype.pipe=function(){K(this,new X)};f.prototype.write=function(T,U,pa){var fa=this._writableState,oa=!1,hb;if(hb=!fa.objectMode)hb=T,hb=y.isBuffer(hb)||hb instanceof A;hb&&!y.isBuffer(T)&&(T=y.from(T));"function"===typeof U&&(pa=U,U=null);hb?U="buffer":U||(U=fa.defaultEncoding);"function"!==typeof pa&&(pa=c);if(fa.ending)fa=pa,pa=new Aa,K(this,pa),g.nextTick(fa,pa);else{var Cb;if(!(Cb=hb)){Cb=T;var va=pa,ma;null===Cb?ma=new ea:"string"===typeof Cb||fa.objectMode||(ma=new I("chunk",["string",
"Buffer"],Cb));ma?(K(this,ma),g.nextTick(va,ma),Cb=!1):Cb=!0}Cb&&(fa.pendingcb++,oa=hb,oa||(ma=T,fa.objectMode||!1===fa.decodeStrings||"string"!==typeof ma||(ma=y.from(ma,U)),T!==ma&&(oa=!0,U="buffer",T=ma)),hb=fa.objectMode?1:T.length,fa.length+=hb,ma=fa.length<fa.highWaterMark,ma||(fa.needDrain=!0),fa.writing||fa.corked?(hb=fa.lastBufferedRequest,fa.lastBufferedRequest={chunk:T,encoding:U,isBuf:oa,callback:pa,next:null},hb?hb.next=fa.lastBufferedRequest:fa.bufferedRequest=fa.lastBufferedRequest,
fa.bufferedRequestCount+=1):k(this,fa,!1,hb,T,U,pa),oa=ma)}return oa};f.prototype.cork=function(){this._writableState.corked++};f.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||b(this,T))};f.prototype.setDefaultEncoding=function(T){"string"===typeof T&&(T=T.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((T+"").toLowerCase())))throw new Ka(T);this._writableState.defaultEncoding=
T;return this};Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});f.prototype._write=function(T,U,pa){pa(new M("_write()"))};f.prototype._writev=null;f.prototype.end=function(T,U,pa){var fa=this._writableState;"function"===typeof T?(pa=T,U=T=null):"function"===typeof U&&(pa=U,
U=null);null!==T&&void 0!==T&&this.write(T,U);fa.corked&&(fa.corked=1,this.uncork());if(!fa.ending){T=pa;fa.ending=!0;a(this,fa);if(T)if(fa.finished)g.nextTick(T);else this.once("finish",T);fa.ended=!0;this.writable=!1}return this};Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(T){this._writableState&&
(this._writableState.destroyed=T)}});f.prototype.destroy=E.destroy;f.prototype._undestroy=E.undestroy;f.prototype._destroy=function(T,U){U(T)};return $R}function oD(){function d(a){if(!(this instanceof d))return new d(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(a){a.end()}if(t3)return aS;
t3=!0;var f=uj,k=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};aS=d;var n=u3(),b=r3();xl(d,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var m=k[e];d.prototype[m]||(d.prototype[m]=b.prototype[m])}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(d.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});return aS}function aga(){function d(F,H,I){H in F?Object.defineProperty(F,
H,{value:I,enumerable:!0,configurable:!0,writable:!0}):F[H]=I;return F}function c(F,H){return{value:F,done:H}}function h(F){var H=F[m];if(null!==H){var I=F[y].read();null!==I&&(F[r]=null,F[m]=null,F[a]=null,H(c(I,!1)))}}function f(F){n.nextTick(h,F)}function k(F,H){return function(I,M){F.then(function(){if(H[l])I(c(void 0,!0));else H[v](I,M)},M)}}if(v3)return w3;v3=!0;var n=uj,b,e=ZR(),m=Symbol("lastResolve"),a=Symbol("lastReject"),g=Symbol("error"),l=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),
y=Symbol("stream"),A=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((b={get stream(){return this[y]},next:function(){var F=this,H=this[g];if(null!==H)return Promise.reject(H);if(this[l])return Promise.resolve(c(void 0,!0));if(this[y].destroyed)return new Promise(function(I,M){n.nextTick(function(){F[g]?M(F[g]):I(c(void 0,!0))})});if(H=this[r])H=new Promise(k(H,this));else{H=this[y].read();if(null!==H)return Promise.resolve(c(H,!1));H=new Promise(this[v])}return this[r]=H}},d(b,Symbol.asyncIterator,
function(){return this}),d(b,"return",function(){var F=this;return new Promise(function(H,I){F[y].destroy(null,function(M){M?I(M):H(c(void 0,!0))})})}),b),A);return w3=function(F){var H,I=Object.create(E,(H={},d(H,y,{value:F,writable:!0}),d(H,m,{value:null,writable:!0}),d(H,a,{value:null,writable:!0}),d(H,g,{value:null,writable:!0}),d(H,l,{value:F._readableState.endEmitted,writable:!0}),d(H,v,{value:function(M,N){var X=I[y].read();X?(I[r]=null,I[m]=null,I[a]=null,M(c(X,!1))):(I[m]=M,I[a]=N)},writable:!0}),
H));I[r]=null;e(F,function(M){if(M&&"ERR_STREAM_PREMATURE_CLOSE"!==M.code){var N=I[a];null!==N&&(I[r]=null,I[m]=null,I[a]=null,N(M));I[g]=M}else M=I[m],null!==M&&(I[r]=null,I[m]=null,I[a]=null,M(c(void 0,!0))),I[l]=!0});F.on("readable",f.bind(null,I));return I}}function u3(){function d(ua,Ma,Lb){if("function"===typeof ua.prependListener)return ua.prependListener(Ma,Lb);if(ua._events&&ua._events[Ma])Array.isArray(ua._events[Ma])?ua._events[Ma].unshift(Lb):ua._events[Ma]=[Lb,ua._events[Ma]];else ua.on(Ma,
Lb)}function c(ua,Ma,Lb){M=M||oD();ua=ua||{};"boolean"!==typeof Lb&&(Lb=Ma instanceof M);this.objectMode=!!ua.objectMode;Lb&&(this.objectMode=this.objectMode||!!ua.readableObjectMode);this.highWaterMark=K(this,ua,"readableHighWaterMark",Lb);this.buffer=new Ka;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==
ua.emitClose;this.autoDestroy=!!ua.autoDestroy;this.destroyed=!1;this.defaultEncoding=ua.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ua.encoding&&(oa||(oa=bS.StringDecoder),this.decoder=new oa(ua.encoding),this.encoding=ua.encoding)}function h(ua){M=M||oD();if(!(this instanceof h))return new h(ua);this._readableState=new c(ua,this,this instanceof M);this.readable=!0;ua&&("function"===typeof ua.read&&(this._read=ua.read),"function"===typeof ua.destroy&&
(this._destroy=ua.destroy));N.call(this)}function f(ua,Ma,Lb,ic,Vb){Aa("readableAddChunk",Ma);var jc=ua._readableState;if(null===Ma)jc.reading=!1,Aa("onEofChunk"),jc.ended||(jc.decoder&&(Ma=jc.decoder.end())&&Ma.length&&(jc.buffer.push(Ma),jc.length+=jc.objectMode?1:Ma.length),jc.ended=!0,jc.sync?b(ua):(jc.needReadable=!1,jc.emittedReadable||(jc.emittedReadable=!0,e(ua))));else{if(!Vb){Vb=Ma;var Pc;X.isBuffer(Vb)||Vb instanceof W||"string"===typeof Vb||void 0===Vb||jc.objectMode||(Pc=new T("chunk",
["string","Buffer","Uint8Array"],Vb));var Rb=Pc}if(Rb)va(ua,Rb);else if(jc.objectMode||Ma&&0<Ma.length)if("string"===typeof Ma||jc.objectMode||Object.getPrototypeOf(Ma)===X.prototype||(Ma=X.from(Ma)),ic)jc.endEmitted?va(ua,new fa):k(ua,jc,Ma,!0);else if(jc.ended)va(ua,new U);else{if(jc.destroyed)return!1;jc.reading=!1;jc.decoder&&!Lb?(Ma=jc.decoder.write(Ma),jc.objectMode||0!==Ma.length?k(ua,jc,Ma,!1):m(ua,jc)):k(ua,jc,Ma,!1)}else ic||(jc.reading=!1,m(ua,jc))}return!jc.ended&&(jc.length<jc.highWaterMark||
0===jc.length)}function k(ua,Ma,Lb,ic){Ma.flowing&&0===Ma.length&&!Ma.sync?(Ma.awaitDrain=0,ua.emit("data",Lb)):(Ma.length+=Ma.objectMode?1:Lb.length,ic?Ma.buffer.unshift(Lb):Ma.buffer.push(Lb),Ma.needReadable&&b(ua));m(ua,Ma)}function n(ua,Ma){if(0>=ua||0===Ma.length&&Ma.ended)return 0;if(Ma.objectMode)return 1;if(ua!==ua)return Ma.flowing&&Ma.length?Ma.buffer.head.data.length:Ma.length;if(ua>Ma.highWaterMark){var Lb=ua;1073741824<=Lb?Lb=1073741824:(Lb--,Lb|=Lb>>>1,Lb|=Lb>>>2,Lb|=Lb>>>4,Lb|=Lb>>>
8,Lb|=Lb>>>16,Lb++);Ma.highWaterMark=Lb}return ua<=Ma.length?ua:Ma.ended?Ma.length:(Ma.needReadable=!0,0)}function b(ua){var Ma=ua._readableState;Aa("emitReadable",Ma.needReadable,Ma.emittedReadable);Ma.needReadable=!1;Ma.emittedReadable||(Aa("emitReadable",Ma.flowing),Ma.emittedReadable=!0,I.nextTick(e,ua))}function e(ua){var Ma=ua._readableState;Aa("emitReadable_",Ma.destroyed,Ma.length,Ma.ended);Ma.destroyed||!Ma.length&&!Ma.ended||(ua.emit("readable"),Ma.emittedReadable=!1);Ma.needReadable=!Ma.flowing&&
!Ma.ended&&Ma.length<=Ma.highWaterMark;y(ua)}function m(ua,Ma){Ma.readingMore||(Ma.readingMore=!0,I.nextTick(a,ua,Ma))}function a(ua,Ma){for(;!Ma.reading&&!Ma.ended&&(Ma.length<Ma.highWaterMark||Ma.flowing&&0===Ma.length);){var Lb=Ma.length;Aa("maybeReadMore read 0");ua.read(0);if(Lb===Ma.length)break}Ma.readingMore=!1}function g(ua){return function(){var Ma=ua._readableState;Aa("pipeOnDrain",Ma.awaitDrain);Ma.awaitDrain&&Ma.awaitDrain--;0===Ma.awaitDrain&&ua.listeners("data").length&&(Ma.flowing=
!0,y(ua))}}function l(ua){var Ma=ua._readableState;Ma.readableListening=0<ua.listenerCount("readable");Ma.resumeScheduled&&!Ma.paused?Ma.flowing=!0:0<ua.listenerCount("data")&&ua.resume()}function r(ua){Aa("readable nexttick read 0");ua.read(0)}function v(ua,Ma){Aa("resume",Ma.reading);Ma.reading||ua.read(0);Ma.resumeScheduled=!1;ua.emit("resume");y(ua);Ma.flowing&&!Ma.reading&&ua.read(0)}function y(ua){var Ma=ua._readableState;for(Aa("flow",Ma.flowing);Ma.flowing&&null!==ua.read(););}function A(ua,
Ma){if(0===Ma.length)return null;Ma.objectMode?ua=Ma.buffer.shift():!ua||ua>=Ma.length?(ua=Ma.decoder?Ma.buffer.join(""):1===Ma.buffer.length?Ma.buffer.first():Ma.buffer.concat(Ma.length),Ma.buffer.clear()):ua=Ma.buffer.consume(ua,Ma.decoder);return ua}function E(ua){var Ma=ua._readableState;Aa("endReadable",Ma.endEmitted);Ma.endEmitted||(Ma.ended=!0,I.nextTick(F,Ma,ua))}function F(ua,Ma){Aa("endReadableNT",ua.endEmitted,ua.length);ua.endEmitted||0!==ua.length||(ua.endEmitted=!0,Ma.readable=!1,Ma.emit("end"),
ua.autoDestroy&&(ua=Ma._writableState,(!ua||ua.autoDestroy&&ua.finished)&&Ma.destroy()))}function H(ua,Ma){for(var Lb=0,ic=ua.length;Lb<ic;Lb++)if(ua[Lb]===Ma)return Lb;return-1}if(x3)return cS;x3=!0;var I=uj;cS=h;var M;h.ReadableState=c;var N=Z2(),X=Ni.Buffer,W=bga.Uint8Array||function(){},ea=k3;var Aa=ea&&ea.debuglog?ea.debuglog("stream"):function(){};var Ka=Yfa();ea=l3();var K=o3().getHighWaterMark,aa=nD().codes,T=aa.ERR_INVALID_ARG_TYPE,U=aa.ERR_STREAM_PUSH_AFTER_EOF,pa=aa.ERR_METHOD_NOT_IMPLEMENTED,
fa=aa.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,oa,hb,Cb;xl(h,N);var va=ea.errorOrDestroy,ma=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(ua){this._readableState&&(this._readableState.destroyed=ua)}});h.prototype.destroy=ea.destroy;h.prototype._undestroy=ea.undestroy;h.prototype._destroy=function(ua,Ma){Ma(ua)};h.prototype.push=function(ua,Ma){var Lb=
this._readableState;if(Lb.objectMode)var ic=!0;else"string"===typeof ua&&(Ma=Ma||Lb.defaultEncoding,Ma!==Lb.encoding&&(ua=X.from(ua,Ma),Ma=""),ic=!0);return f(this,ua,Ma,!1,ic)};h.prototype.unshift=function(ua){return f(this,ua,null,!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(ua){oa||(oa=bS.StringDecoder);ua=new oa(ua);this._readableState.decoder=ua;this._readableState.encoding=this._readableState.decoder.encoding;for(var Ma=this._readableState.buffer.head,
Lb="";null!==Ma;)Lb+=ua.write(Ma.data),Ma=Ma.next;this._readableState.buffer.clear();""!==Lb&&this._readableState.buffer.push(Lb);this._readableState.length=Lb.length;return this};h.prototype.read=function(ua){Aa("read",ua);ua=parseInt(ua,10);var Ma=this._readableState,Lb=ua;0!==ua&&(Ma.emittedReadable=!1);if(0===ua&&Ma.needReadable&&((0!==Ma.highWaterMark?Ma.length>=Ma.highWaterMark:0<Ma.length)||Ma.ended))return Aa("read: emitReadable",Ma.length,Ma.ended),0===Ma.length&&Ma.ended?E(this):b(this),
null;ua=n(ua,Ma);if(0===ua&&Ma.ended)return 0===Ma.length&&E(this),null;var ic=Ma.needReadable;Aa("need readable",ic);if(0===Ma.length||Ma.length-ua<Ma.highWaterMark)ic=!0,Aa("length less than watermark",ic);Ma.ended||Ma.reading?Aa("reading or ended",!1):ic&&(Aa("do read"),Ma.reading=!0,Ma.sync=!0,0===Ma.length&&(Ma.needReadable=!0),this._read(Ma.highWaterMark),Ma.sync=!1,Ma.reading||(ua=n(Lb,Ma)));ic=0<ua?A(ua,Ma):null;null===ic?(Ma.needReadable=Ma.length<=Ma.highWaterMark,ua=0):(Ma.length-=ua,Ma.awaitDrain=
0);0===Ma.length&&(Ma.ended||(Ma.needReadable=!0),Lb!==ua&&Ma.ended&&E(this));null!==ic&&this.emit("data",ic);return ic};h.prototype._read=function(ua){va(this,new pa("_read()"))};h.prototype.pipe=function(ua,Ma){function Lb(yb,ac){Aa("onunpipe");yb===ld&&ac&&!1===ac.hasUnpiped&&(ac.hasUnpiped=!0,Aa("cleanup"),ua.removeListener("close",Pc),ua.removeListener("finish",Rb),ua.removeListener("drain",Da),ua.removeListener("error",jc),ua.removeListener("unpipe",Lb),ld.removeListener("end",ic),ld.removeListener("end",
zd),ld.removeListener("data",Vb),Pa=!0,!la.awaitDrain||ua._writableState&&!ua._writableState.needDrain||Da())}function ic(){Aa("onend");ua.end()}function Vb(yb){Aa("ondata");yb=ua.write(yb);Aa("dest.write",yb);!1===yb&&((1===la.pipesCount&&la.pipes===ua||1<la.pipesCount&&-1!==H(la.pipes,ua))&&!Pa&&(Aa("false write response, pause",la.awaitDrain),la.awaitDrain++),ld.pause())}function jc(yb){Aa("onerror",yb);zd();ua.removeListener("error",jc);0===ua.listeners("error").length&&va(ua,yb)}function Pc(){ua.removeListener("finish",
Rb);zd()}function Rb(){Aa("onfinish");ua.removeListener("close",Pc);zd()}function zd(){Aa("unpipe");ld.unpipe(ua)}var ld=this,la=this._readableState;switch(la.pipesCount){case 0:la.pipes=ua;break;case 1:la.pipes=[la.pipes,ua];break;default:la.pipes.push(ua)}la.pipesCount+=1;Aa("pipe count=%d opts=%j",la.pipesCount,Ma);Ma=Ma&&!1===Ma.end||ua===I.stdout||ua===I.stderr?zd:ic;if(la.endEmitted)I.nextTick(Ma);else ld.once("end",Ma);ua.on("unpipe",Lb);var Da=g(ld);ua.on("drain",Da);var Pa=!1;ld.on("data",
Vb);d(ua,"error",jc);ua.once("close",Pc);ua.once("finish",Rb);ua.emit("pipe",ld);la.flowing||(Aa("pipe resume"),ld.resume());return ua};h.prototype.unpipe=function(ua){var Ma=this._readableState,Lb={hasUnpiped:!1};if(0===Ma.pipesCount)return this;if(1===Ma.pipesCount){if(ua&&ua!==Ma.pipes)return this;ua||(ua=Ma.pipes);Ma.pipes=null;Ma.pipesCount=0;Ma.flowing=!1;ua&&ua.emit("unpipe",this,Lb);return this}if(!ua){ua=Ma.pipes;Lb=Ma.pipesCount;Ma.pipes=null;Ma.pipesCount=0;Ma.flowing=!1;for(Ma=0;Ma<Lb;Ma++)ua[Ma].emit("unpipe",
this,{hasUnpiped:!1});return this}var ic=H(Ma.pipes,ua);if(-1===ic)return this;Ma.pipes.splice(ic,1);--Ma.pipesCount;1===Ma.pipesCount&&(Ma.pipes=Ma.pipes[0]);ua.emit("unpipe",this,Lb);return this};h.prototype.on=function(ua,Ma){Ma=N.prototype.on.call(this,ua,Ma);var Lb=this._readableState;"data"===ua?(Lb.readableListening=0<this.listenerCount("readable"),!1!==Lb.flowing&&this.resume()):"readable"!==ua||Lb.endEmitted||Lb.readableListening||(Lb.readableListening=Lb.needReadable=!0,Lb.flowing=!1,Lb.emittedReadable=
!1,Aa("on readable",Lb.length,Lb.reading),Lb.length?b(this):Lb.reading||I.nextTick(r,this));return Ma};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function(ua,Ma){Ma=N.prototype.removeListener.call(this,ua,Ma);"readable"===ua&&I.nextTick(l,this);return Ma};h.prototype.removeAllListeners=function(ua){var Ma=N.prototype.removeAllListeners.apply(this,arguments);"readable"!==ua&&void 0!==ua||I.nextTick(l,this);return Ma};h.prototype.resume=function(){var ua=this._readableState;ua.flowing||
(Aa("resume"),ua.flowing=!ua.readableListening,ua.resumeScheduled||(ua.resumeScheduled=!0,I.nextTick(v,this,ua)));ua.paused=!1;return this};h.prototype.pause=function(){Aa("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(Aa("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};h.prototype.wrap=function(ua){var Ma=this,Lb=this._readableState,ic=!1;ua.on("end",function(){Aa("wrapped end");if(Lb.decoder&&!Lb.ended){var jc=
Lb.decoder.end();jc&&jc.length&&Ma.push(jc)}Ma.push(null)});ua.on("data",function(jc){Aa("wrapped data");Lb.decoder&&(jc=Lb.decoder.write(jc));Lb.objectMode&&(null===jc||void 0===jc)||!(Lb.objectMode||jc&&jc.length)||Ma.push(jc)||(ic=!0,ua.pause())});for(var Vb in ua)void 0===this[Vb]&&"function"===typeof ua[Vb]&&(this[Vb]=function(jc){return function(){return ua[jc].apply(ua,arguments)}}(Vb));for(Vb=0;Vb<ma.length;Vb++)ua.on(ma[Vb],this.emit.bind(this,ma[Vb]));this._read=function(jc){Aa("wrapped _read",
jc);ic&&(ic=!1,ua.resume())};return this};"function"===typeof Symbol&&(h.prototype[Symbol.asyncIterator]=function(){void 0===hb&&(hb=aga());return hb(this)});Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(h.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(ua){this._readableState&&(this._readableState.flowing=ua)}});h._fromList=A;Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(h.from=function(ua,Ma){void 0===Cb&&(Cb=Xfa());return Cb(h,ua,Ma)});return cS}function y3(){function d(g,l){var r=this._transformState;r.transforming=!1;var v=r.writecb;if(null===v)return this.emit("error",new b);r.writechunk=null;r.writecb=null;null!=l&&this.push(l);
v(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(g){if(!(this instanceof c))return new c(g);a.call(this,g);this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"===typeof g.transform&&(this._transform=g.transform),"function"===typeof g.flush&&(this._flush=g.flush));this.on("prefinish",
h)}function h(){var g=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(l,r){f(g,l,r)})}function f(g,l,r){if(l)return g.emit("error",l);null!=r&&g.push(r);if(g._writableState.length)throw new m;if(g._transformState.transforming)throw new e;return g.push(null)}if(z3)return dS;z3=!0;dS=c;var k=nD().codes,n=k.ERR_METHOD_NOT_IMPLEMENTED,b=k.ERR_MULTIPLE_CALLBACK,e=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,m=k.ERR_TRANSFORM_WITH_LENGTH_0,a=oD();xl(c,
a);c.prototype.push=function(g,l){this._transformState.needTransform=!1;return a.prototype.push.call(this,g,l)};c.prototype._transform=function(g,l,r){r(new n("_transform()"))};c.prototype._write=function(g,l,r){var v=this._transformState;v.writecb=r;v.writechunk=g;v.writeencoding=l;v.transforming||(g=this._readableState,(v.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark))};c.prototype._read=function(g){g=this._transformState;null===g.writechunk||g.transforming?
g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))};c.prototype._destroy=function(g,l){a.prototype._destroy.call(this,g,function(r){l(r)})};return dS}function pD(d,c){if(!((this||Ft)instanceof pD))return new pD(d,c);c=c||{};A3.call(this||Ft,cga(c,{objectMode:!0}));(this||Ft)._iterator=d;(this||Ft)._options=c;this.on("end",(this||Ft).destroy.bind(this||Ft,null,null))}function B3(d,c,h){c&&"string"!=typeof c&&(c=c.message||c.name);dga(this||Vm,{type:d,
name:d,cause:"string"!=typeof c?c:h,message:c},"ewr")}function eS(d,c){Error.call(this||Vm);Error.captureStackTrace&&Error.captureStackTrace(this||Vm,(this||Vm).constructor);B3.call(this||Vm,"CustomError",d,c)}function ega(d,c,h){var f=function(k,n){B3.call(this||Vm,c,k,n);"FilesystemError"==c&&((this||Vm).code=(this||Vm).cause.code,(this||Vm).path=(this||Vm).cause.path,(this||Vm).errno=(this||Vm).cause.errno,(this||Vm).message=(d.errno[(this||Vm).cause.errno]?d.errno[(this||Vm).cause.errno].description:
(this||Vm).cause.message)+((this||Vm).cause.path?" ["+(this||Vm).cause.path+"]":""));Error.call(this||Vm);Error.captureStackTrace&&Error.captureStackTrace(this||Vm,f)};f.prototype=h?new h:new eS;return f}function iG(d){(this||Wm).db=(this||Wm)._levelup=d;(this||Wm).batch=d.db.batch();(this||Wm).ops=[];(this||Wm).length=0}function C3(d,c){if(null==d)throw new TypeError("Cannot convert first argument to object");for(var h=Object(d),f=1;f<arguments.length;f++){var k=arguments[f];if(null!=k)for(var n=
Object.keys(Object(k)),b=0,e=n.length;b<e;b++){var m=n[b],a=Object.getOwnPropertyDescriptor(k,m);void 0!==a&&a.enumerable&&(h[m]=k[m])}}return h}function D3(){function d(m){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(m)}function c(m){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(m)}
function h(m,a){return(h=Object.setPrototypeOf||function(g,l){return g.__proto__=l,g})(m,a)}function f(m,a,g){g||(g=Error);g=function(l){function r(v,y,A){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");!0;v=c(r).call(this,"string"==typeof a?a:a(v,y,A));if(!v||"object"!==d(v)&&"function"!=typeof v){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");v=this}return v.code=m,v}return!function(v,y){if("function"!=typeof y&&
null!==y)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}});y&&h(v,y)}(r,l),r}(g);e[m]=g}function k(m,a){if(Array.isArray(m)){var g=m.length;return m=m.map(function(l){return String(l)}),2<g?"one of ".concat(a," ").concat(m.slice(0,g-1).join(", "),", or ")+m[g-1]:2===g?"one of ".concat(a," ").concat(m[0]," or ").concat(m[1]):"of ".concat(a," ").concat(m[0])}return"of ".concat(a," ").concat(String(m))}
if(E3)return fS;E3=!0;var n,b,e={};return f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(m,a,g){var l;if(void 0===n&&(n=gS()),n("string"==typeof m,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(l="must not be",a=a.replace(/^not /,"")):l="must be",function(v,y,A){return(void 0===A||A>v.length)&&(A=v.length),v.substring(A-y.length,A)===y}(m," argument"))m="The ".concat(m," ").concat(l," ").concat(k(a,"type"));else{var r=
function(v,y,A){return"number"!=typeof A&&(A=0),!(A+y.length>v.length)&&-1!==v.indexOf(y,A)}(m,".")?"property":"argument";m='The "'.concat(m,'" ').concat(r," ").concat(l," ").concat(k(a,"type"))}return m+=". Received type ".concat(d(g))},TypeError),f("ERR_INVALID_ARG_VALUE",function(m,a){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=Rh);var l=b.inspect(a);return 128<l.length&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(m,"' ").concat(g,". Received ").concat(l)},
TypeError),f("ERR_INVALID_RETURN_VALUE",function(m,a,g){var l;return l=g&&g.constructor&&g.constructor.name?"instance of ".concat(g.constructor.name):"type ".concat(d(g)),"Expected ".concat(m,' to be returned from the "').concat(a,'"')+" function but got ".concat(l,".")},TypeError),f("ERR_MISSING_ARGS",function(){for(var m=arguments.length,a=Array(m),g=0;g<m;g++)a[g]=arguments[g];void 0===n&&(n=gS());n(0<a.length,"At least one arg needs to be specified");m="The ";g=a.length;switch(a=a.map(function(l){return'"'.concat(l,
'"')}),g){case 1:m+="".concat(a[0]," argument");break;case 2:m+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:m+=a.slice(0,g-1).join(", "),m+=", and ".concat(a[g-1]," arguments")}return"".concat(m," must be specified")},TypeError),fS.codes=e,fS}function fga(){function d(N,X){for(var W=0;W<X.length;W++){var ea=X[W];ea.enumerable=ea.enumerable||!1;ea.configurable=!0;"value"in ea&&(ea.writable=!0);Object.defineProperty(N,ea.key,ea)}}function c(N,X){return!X||"object"!==m(X)&&"function"!=
typeof X?h(N):X}function h(N){if(void 0===N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function f(N){var X="function"==typeof Map?new Map:void 0;return(f=function(W){function ea(){return n(W,arguments,e(this).constructor)}if(null===W||(Aa=W,-1===Function.toString.call(Aa).indexOf("[native code]")))return W;var Aa;if("function"!=typeof W)throw new TypeError("Super expression must either be null or a function");if(void 0!==X){if(X.has(W))return X.get(W);
X.set(W,ea)}return ea.prototype=Object.create(W.prototype,{constructor:{value:ea,enumerable:!1,writable:!0,configurable:!0}}),b(ea,W)})(N)}function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}function n(N,X,W){return(n=k()?Reflect.construct:function(ea,Aa,Ka){var K=[null];K.push.apply(K,Aa);ea=new (Function.bind.apply(ea,
K));return Ka&&b(ea,Ka.prototype),ea}).apply(null,arguments)}function b(N,X){return(b=Object.setPrototypeOf||function(W,ea){return W.__proto__=ea,W})(N,X)}function e(N){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(X){return X.__proto__||Object.getPrototypeOf(X)})(N)}function m(N){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(N)}
function a(N,X,W){return(void 0===W||W>N.length)&&(W=N.length),N.substring(W-X.length,W)===X}function g(N){var X=Object.keys(N),W=Object.create(Object.getPrototypeOf(N));return X.forEach(function(ea){W[ea]=N[ea]}),Object.defineProperty(W,"message",{value:N.message}),W}function l(N){return y(N,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function r(N,X,W){var ea="",Aa="",Ka=0,K="",aa=!1,T=l(N),U=T.split("\n"),pa=l(X).split("\n"),
fa=0,oa="";if("strictEqual"===W&&"object"===m(N)&&"object"===m(X)&&null!==N&&null!==X&&(W="strictEqualObject"),1===U.length&&1===pa.length&&U[0]!==pa[0]){var hb=U[0].length+pa[0].length;if(10>=hb){if(!("object"===m(N)&&null!==N||"object"===m(X)&&null!==X||0===N&&0===X))return"".concat(M[W],"\n\n")+"".concat(U[0]," !== ").concat(pa[0],"\n")}else if("strictEqualObject"!==W&&hb<(v.stderr&&v.stderr.isTTY?v.stderr.columns:80)){for(;U[0][fa]===pa[0][fa];)fa++;2<fa&&(oa="\n  ".concat(function(ua,Ma){if(Ma=
Math.floor(Ma),0==ua.length||0==Ma)return"";var Lb=ua.length*Ma;for(Ma=Math.floor(Math.log(Ma)/Math.log(2));Ma;)ua+=ua,Ma--;return ua+ua.substring(0,Lb-ua.length)}(" ",fa),"^"),fa=0)}}N=U[U.length-1];for(X=pa[pa.length-1];N===X&&(2>fa++?K="\n  ".concat(N).concat(K):ea=N,U.pop(),pa.pop(),0!==U.length&&0!==pa.length);)N=U[U.length-1],X=pa[pa.length-1];N=Math.max(U.length,pa.length);if(0===N){ea=T.split("\n");if(30<ea.length)for(ea[26]="".concat(E,"...").concat(I);27<ea.length;)ea.pop();return"".concat(M.notIdentical,
"\n\n").concat(ea.join("\n"),"\n")}3<fa&&(K="\n".concat(E,"...").concat(I).concat(K),aa=!0);""!==ea&&(K="\n  ".concat(ea).concat(K),ea="");T=0;W=M[W]+"\n".concat(F,"+ actual").concat(I," ").concat(H,"- expected").concat(I);X=" ".concat(E,"...").concat(I," Lines skipped");for(fa=0;fa<N;fa++){hb=fa-Ka;if(U.length<fa+1)1<hb&&2<fa&&(4<hb?(Aa+="\n".concat(E,"...").concat(I),aa=!0):3<hb&&(Aa+="\n  ".concat(pa[fa-2]),T++),Aa+="\n  ".concat(pa[fa-1]),T++),Ka=fa,ea+="\n".concat(H,"-").concat(I," ").concat(pa[fa]),
T++;else if(pa.length<fa+1)1<hb&&2<fa&&(4<hb?(Aa+="\n".concat(E,"...").concat(I),aa=!0):3<hb&&(Aa+="\n  ".concat(U[fa-2]),T++),Aa+="\n  ".concat(U[fa-1]),T++),Ka=fa,Aa+="\n".concat(F,"+").concat(I," ").concat(U[fa]),T++;else{var Cb=pa[fa],va=U[fa],ma=va!==Cb&&(!a(va,",")||va.slice(0,-1)!==Cb);ma&&a(Cb,",")&&Cb.slice(0,-1)===va&&(ma=!1,va+=",");ma?(1<hb&&2<fa&&(4<hb?(Aa+="\n".concat(E,"...").concat(I),aa=!0):3<hb&&(Aa+="\n  ".concat(U[fa-2]),T++),Aa+="\n  ".concat(U[fa-1]),T++),Ka=fa,Aa+="\n".concat(F,
"+").concat(I," ").concat(va),ea+="\n".concat(H,"-").concat(I," ").concat(Cb),T+=2):(Aa+=ea,ea="",1!==hb&&0!==fa||(Aa+="\n  ".concat(va),T++))}if(20<T&&fa<N-2)return"".concat(W).concat(X,"\n").concat(Aa,"\n").concat(E,"...").concat(I).concat(ea,"\n")+"".concat(E,"...").concat(I)}return"".concat(W).concat(aa?X:"","\n").concat(Aa).concat(ea).concat(K).concat(oa)}if(F3)return G3;F3=!0;var v=uj,y=Rh.inspect,A=D3().codes.ERR_INVALID_ARG_TYPE,E="",F="",H="",I="",M={deepStrictEqual:"Expected values to be strictly deep-equal:",
strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',
notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return G3=function(N){function X(ea){if(!(this instanceof X))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==m(ea)||null===ea)throw new A("options","Object",ea);var Aa=ea.message,Ka=ea.operator,K=ea.stackStartFn,aa=ea.actual;ea=ea.expected;var T=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=Aa)var U=c(this,e(X).call(this,String(Aa)));else if(v.stderr&&
v.stderr.isTTY&&(v.stderr&&v.stderr.getColorDepth&&1!==v.stderr.getColorDepth()?(E="\u001b[34m",F="\u001b[32m",I="\u001b[39m",H="\u001b[31m"):(E="",F="",I="",H="")),"object"===m(aa)&&null!==aa&&"object"===m(ea)&&null!==ea&&"stack"in aa&&aa instanceof Error&&"stack"in ea&&ea instanceof Error&&(aa=g(aa),ea=g(ea)),"deepStrictEqual"===Ka||"strictEqual"===Ka)U=c(this,e(X).call(this,r(aa,ea,Ka)));else if("notDeepStrictEqual"===Ka||"notStrictEqual"===Ka){U=M[Ka];var pa=l(aa).split("\n");if("notStrictEqual"===
Ka&&"object"===m(aa)&&null!==aa&&(U=M.notStrictEqualObject),30<pa.length)for(pa[26]="".concat(E,"...").concat(I);27<pa.length;)pa.pop();U=1===pa.length?c(this,e(X).call(this,"".concat(U," ").concat(pa[0]))):c(this,e(X).call(this,"".concat(U,"\n\n").concat(pa.join("\n"),"\n")))}else{U=l(aa);pa="";var fa=M[Ka];"notDeepEqual"===Ka||"notEqual"===Ka?1024<(U="".concat(M[Ka],"\n\n").concat(U)).length&&(U="".concat(U.slice(0,1021),"...")):(pa="".concat(l(ea)),512<U.length&&(U="".concat(U.slice(0,509),"...")),
512<pa.length&&(pa="".concat(pa.slice(0,509),"...")),"deepEqual"===Ka||"equal"===Ka?U="".concat(fa,"\n\n").concat(U,"\n\nshould equal\n\n"):pa=" ".concat(Ka," ").concat(pa));U=c(this,e(X).call(this,"".concat(U).concat(pa)))}return Error.stackTraceLimit=T,U.generatedMessage=!Aa,Object.defineProperty(h(U),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),U.code="ERR_ASSERTION",U.actual=aa,U.expected=ea,U.operator=Ka,Error.captureStackTrace&&Error.captureStackTrace(h(U),
K),U.stack,U.name="AssertionError",c(U)}var W;return!function(ea,Aa){if("function"!=typeof Aa&&null!==Aa)throw new TypeError("Super expression must either be null or a function");ea.prototype=Object.create(Aa&&Aa.prototype,{constructor:{value:ea,writable:!0,configurable:!0}});Aa&&b(ea,Aa)}(X,N),W=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:y.custom,value:function(ea,Aa){return y(this,function(Ka){for(var K=1;K<arguments.length;K++){var aa=
null!=arguments[K]?arguments[K]:{},T=Object.keys(aa);"function"==typeof Object.getOwnPropertySymbols&&(T=T.concat(Object.getOwnPropertySymbols(aa).filter(function(U){return Object.getOwnPropertyDescriptor(aa,U).enumerable})));T.forEach(function(U){var pa=aa[U];U in Ka?Object.defineProperty(Ka,U,{value:pa,enumerable:!0,configurable:!0,writable:!0}):Ka[U]=pa})}return Ka}({},Aa,{customInspect:!1,depth:0}))}}],d(X.prototype,W),X}(f(Error))}function H3(d,c){if(!(d=function(h){if(Array.isArray(h))return h}(d)||
function(h,f){var k=[],n=!0,b=!1,e=void 0;try{for(var m,a=h[Symbol.iterator]();!(n=(m=a.next()).done)&&(k.push(m.value),!f||k.length!==f);n=!0);}catch(g){b=!0,e=g}finally{try{n||null==a.return||a.return()}finally{if(b)throw e;}}return k}(d,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return d}function Gt(d){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===
Symbol&&c!==Symbol.prototype?"symbol":typeof c})(d)}function hS(d){return d.call.bind(d)}function gga(d){if(0===d.length||10<d.length)return!0;for(var c=0;c<d.length;c++){var h=d.charCodeAt(c);if(48>h||57<h)return!0}return 10===d.length&&d>=Math.pow(2,32)}function VK(d){return Object.keys(d).filter(gga).concat(WK(d).filter(Object.prototype.propertyIsEnumerable.bind(d)))}function I3(d,c){if(d===c)return 0;for(var h=d.length,f=c.length,k=0,n=Math.min(h,f);k<n;++k)if(d[k]!==c[k]){h=d[k];f=c[k];break}return h<
f?-1:f<h?1:0}function Ds(d,c,h,f){if(d===c)return 0!==d||!h||J3(d,c);if(h){if("object"!==Gt(d))return"number"==typeof d&&iS(d)&&iS(c);if("object"!==Gt(c)||null===d||null===c||Object.getPrototypeOf(d)!==Object.getPrototypeOf(c))return!1}else{if(null===d||"object"!==Gt(d))return(null===c||"object"!==Gt(c))&&d==c;if(null===c||"object"!==Gt(c))return!1}var k=K3(d);if(k!==K3(c))return!1;if(Array.isArray(d)){if(d.length!==c.length)return!1;k=VK(d);var n=VK(c);return k.length===n.length&&jG(d,c,h,f,1,k)}if("[object Object]"===
k&&(!XK(d)&&XK(c)||!YK(d)&&YK(c)))return!1;if(L3(d)){if(!L3(c)||Date.prototype.getTime.call(d)!==Date.prototype.getTime.call(c))return!1}else if(M3(d)){if(!M3(c)||(hga?d.source!==c.source||d.flags!==c.flags:RegExp.prototype.toString.call(d)!==RegExp.prototype.toString.call(c)))return!1}else if(iga(d)||d instanceof Error){if(d.message!==c.message||d.name!==c.name)return!1}else{if(jga(d)){if(h||!kga(d)&&!lga(d)){if(!function(b,e){return b.byteLength===e.byteLength&&0===I3(new Uint8Array(b.buffer,b.byteOffset,
b.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(d,c))return!1}else if(!function(b,e){if(b.byteLength!==e.byteLength)return!1;for(var m=0;m<b.byteLength;m++)if(b[m]!==e[m])return!1;return!0}(d,c))return!1;k=VK(d);n=VK(c);return k.length===n.length&&jG(d,c,h,f,0,k)}if(YK(d))return!(!YK(c)||d.size!==c.size)&&jG(d,c,h,f,2);if(XK(d))return!(!XK(c)||d.size!==c.size)&&jG(d,c,h,f,3);if(mga(d)){if(d.byteLength!==c.byteLength||0!==I3(new Uint8Array(d),new Uint8Array(c)))return!1}else if(nga(d)&&
!function(b,e){return N3(b)?N3(e)&&J3(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(e)):O3(b)?O3(e)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(e):P3(b)?P3(e)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(e):Q3(b)?Q3(e)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(e):oga(e)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(e)}(d,c))return!1}return jG(d,c,h,f,0)}function R3(d,c){return c.filter(function(h){return ZK(d,
h)})}function jG(d,c,h,f,k,n){if(5===arguments.length){n=Object.keys(d);var b=Object.keys(c);if(n.length!==b.length)return!1}for(var e=0;e<n.length;e++)if(!kG(c,n[e]))return!1;if(h&&5===arguments.length)if(b=WK(d),0!==b.length){var m=0;for(e=0;e<b.length;e++){var a=b[e];if(ZK(d,a)){if(!ZK(c,a))return!1;n.push(a);m++}else if(ZK(c,a))return!1}e=WK(c);if(b.length!==e.length&&R3(c,e).length!==m)return!1}else if(b=WK(c),0!==b.length&&0!==R3(c,b).length)return!1;if(0===n.length&&(0===k||1===k&&0===d.length||
0===d.size))return!0;if(void 0===f)f={val1:new Map,val2:new Map,position:0};else{b=f.val1.get(d);if(void 0!==b&&(m=f.val2.get(c),void 0!==m))return b===m;f.position++}f.val1.set(d,f.position);f.val2.set(c,f.position);b=pga(d,c,h,n,f,k);return f.val1.delete(d),f.val2.delete(c),b}function S3(d,c,h,f){for(var k=$K(d),n=0;n<k.length;n++){var b=k[n];if(Ds(c,b,h,f))return d.delete(b),!0}return!1}function T3(d){switch(Gt(d)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":d=
+d;case "number":if(iS(d))return!1}return!0}function U3(d,c,h,f,k,n){for(var b=$K(d),e=0;e<b.length;e++){var m=b[e];if(Ds(h,m,k,n)&&Ds(f,c.get(m),k,n))return d.delete(m),!0}return!1}function pga(d,c,h,f,k,n){var b=0;if(2===n){if(!function(e,m,a,g){for(var l=null,r=$K(e),v=0;v<r.length;v++){var y=r[v];if("object"===Gt(y)&&null!==y)null===l&&(l=new Set),l.add(y);else if(!m.has(y)){if(a)return!1;var A=e,E=m,F=T3(y);if(null!=F?!F:!E.has(F)||A.has(F))return!1;null===l&&(l=new Set);l.add(y)}}if(null!==
l){m=$K(m);for(r=0;r<m.length;r++)if(v=m[r],"object"===Gt(v)&&null!==v){if(!S3(l,v,a,g))return!1}else if(!a&&!e.has(v)&&!S3(l,v,a,g))return!1;return 0===l.size}return!0}(d,c,h,k))return!1}else if(3===n){if(!function(e,m,a,g){for(var l=null,r=V3(e),v=0;v<r.length;v++){var y=H3(r[v],2),A=y[0],E=y[1];if("object"===Gt(A)&&null!==A)null===l&&(l=new Set),l.add(A);else if(y=m.get(A),void 0===y&&!m.has(A)||!Ds(E,y,a,g)){if(a)return!1;y=e;var F=m,H=g,I=T3(A);if(null!=I)y=I;else{var M=F.get(I);y=!(void 0===
M&&!F.has(I)||!Ds(E,M,!1,H))&&!y.has(I)&&Ds(E,M,!1,H)}if(!y)return!1;null===l&&(l=new Set);l.add(A)}}if(null!==l){m=V3(m);for(r=0;r<m.length;r++)if(v=H3(m[r],2),v=(A=v[0],v[1]),"object"===Gt(A)&&null!==A){if(!U3(l,e,A,v,a,g))return!1}else if(!(a||e.has(A)&&Ds(e.get(A),v,!1,g)||U3(l,e,A,v,!1,g)))return!1;return 0===l.size}return!0}(d,c,h,k))return!1}else if(1===n)for(;b<d.length;b++){if(!kG(d,b)){if(kG(c,b))return!1;for(f=Object.keys(d);b<f.length;b++)if(n=f[b],!kG(c,n)||!Ds(d[n],c[n],h,k))return!1;
return f.length===Object.keys(c).length}if(!kG(c,b)||!Ds(d[b],c[b],h,k))return!1}for(b=0;b<f.length;b++)if(n=f[b],!Ds(d[n],c[n],h,k))return!1;return!0}function gS(){function d(U){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pa){return typeof pa}:function(pa){return pa&&"function"==typeof Symbol&&pa.constructor===Symbol&&pa!==Symbol.prototype?"symbol":typeof pa})(U)}function c(){v=W3.isDeepEqual;y=W3.isDeepStrictEqual}function h(U){if(U.message instanceof Error)throw U.message;
throw new N(U);}function f(U,pa,fa,oa){if(!fa){var hb=!1;if(0===pa)hb=!0,oa="No value argument passed to `assert.ok()`";else if(oa instanceof Error)throw oa;U=new N({actual:fa,expected:!0,message:oa,operator:"==",stackStartFn:U});throw U.generatedMessage=hb,U;}}function k(){for(var U=arguments.length,pa=Array(U),fa=0;fa<U;fa++)pa[fa]=arguments[fa];f.apply(void 0,[k,pa.length].concat(pa))}function n(U,pa,fa,oa){if("function"!=typeof pa){if(ea(pa))return pa.test(U);if(2===arguments.length)throw new F("expected",
["Function","RegExp"],pa);if("object"!==d(U)||null===U){var hb=new N({actual:U,expected:pa,message:fa,operator:"deepStrictEqual",stackStartFn:oa});throw hb.operator=oa.name,hb;}var Cb=Object.keys(pa);if(pa instanceof Error)Cb.push("name","message");else if(0===Cb.length)throw new H("error",pa,"may not be an empty object");return void 0===v&&c(),Cb.forEach(function(va){if(!("string"==typeof U[va]&&ea(pa[va])&&pa[va].test(U[va])||va in U&&y(U[va],pa[va]))){if(!fa){va=new T(U,Cb);var ma=new T(pa,Cb,
U);va=new N({actual:va,expected:ma,operator:"deepStrictEqual",stackStartFn:oa});throw va.actual=U,va.expected=pa,va.operator=oa.name,va;}h({actual:U,expected:pa,message:fa,operator:oa.name,stackStartFn:oa})}}),!0}return void 0!==pa.prototype&&U instanceof pa||!Error.isPrototypeOf(pa)&&!0===pa.call({},U)}function b(U){if("function"!=typeof U)throw new F("fn","Function",U);try{U()}catch(pa){return pa}return aa}function e(U){return W(U)||null!==U&&"object"===d(U)&&"function"==typeof U.then&&"function"==
typeof U.catch}function m(U){return Promise.resolve().then(function(){var pa;if("function"==typeof U){if(!e(pa=U()))throw new I("instance of Promise","promiseFn",pa);}else{if(!e(U))throw new F("promiseFn",["Function","Promise"],U);pa=U}return Promise.resolve().then(function(){return pa}).then(function(){return aa}).catch(function(fa){return fa})})}function a(U,pa,fa,oa){if("string"==typeof fa){if(4===arguments.length)throw new F("error",["Object","Error","Function","RegExp"],fa);if("object"===d(pa)&&
null!==pa){if(pa.message===fa)throw new E("error/message",'The error message "'.concat(pa.message,'" is identical to the message.'));}else if(pa===fa)throw new E("error/message",'The error "'.concat(pa,'" is identical to the message.'));oa=fa;fa=void 0}else if(null!=fa&&"object"!==d(fa)&&"function"!=typeof fa)throw new F("error",["Object","Error","Function","RegExp"],fa);if(pa===aa){var hb="";fa&&fa.name&&(hb+=" (".concat(fa.name,")"));hb+=oa?": ".concat(oa):".";h({actual:void 0,expected:fa,operator:U.name,
message:"Missing expected ".concat("rejects"===U.name?"rejection":"exception").concat(hb),stackStartFn:U})}if(fa&&!n(pa,fa,oa,U))throw pa;}function g(U,pa,fa,oa){if(pa!==aa){if("string"==typeof fa&&(oa=fa,fa=void 0),!fa||n(pa,fa))oa=oa?": ".concat(oa):".",h({actual:pa,expected:fa,operator:U.name,message:"Got unwanted ".concat("doesNotReject"===U.name?"rejection":"exception").concat(oa,"\n")+'Actual message: "'.concat(pa&&pa.message,'"'),stackStartFn:U});throw pa;}}function l(){for(var U=arguments.length,
pa=Array(U),fa=0;fa<U;fa++)pa[fa]=arguments[fa];f.apply(void 0,[l,pa.length].concat(pa))}if(X3)return jS;X3=!0;var r=uj,v,y,A=D3().codes,E=A.ERR_AMBIGUOUS_ARGUMENT,F=A.ERR_INVALID_ARG_TYPE,H=A.ERR_INVALID_ARG_VALUE,I=A.ERR_INVALID_RETURN_VALUE,M=A.ERR_MISSING_ARGS,N=fga(),X=Rh.inspect;A=Rh.types;var W=A.isPromise,ea=A.isRegExp;A=Object.assign?Object.assign:qga.assign;var Aa=Object.is?Object.is:Y3,Ka=!1,K=jS=k,aa={};K.fail=function va(pa,fa,oa,hb,Cb){var ma=arguments.length;if(0===ma)var ua="Failed";
else 1===ma?(oa=pa,pa=void 0):(!1===Ka&&(Ka=!0,(r.emitWarning?r.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ma&&(hb="!="));if(oa instanceof Error)throw oa;ma={actual:pa,expected:fa,operator:void 0===hb?"fail":hb,stackStartFn:Cb||va};void 0!==oa&&(ma.message=oa);ma=new N(ma);throw ua&&(ma.message=ua,ma.generatedMessage=!0),ma;};K.AssertionError=
N;K.ok=k;K.equal=function Cb(fa,oa,hb){if(2>arguments.length)throw new M("actual","expected");fa!=oa&&h({actual:fa,expected:oa,message:hb,operator:"==",stackStartFn:Cb})};K.notEqual=function va(oa,hb,Cb){if(2>arguments.length)throw new M("actual","expected");oa==hb&&h({actual:oa,expected:hb,message:Cb,operator:"!=",stackStartFn:va})};K.deepEqual=function ma(hb,Cb,va){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();v(hb,Cb)||h({actual:hb,expected:Cb,message:va,operator:"deepEqual",
stackStartFn:ma})};K.notDeepEqual=function ua(Cb,va,ma){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();v(Cb,va)&&h({actual:Cb,expected:va,message:ma,operator:"notDeepEqual",stackStartFn:ua})};K.deepStrictEqual=function Ma(va,ma,ua){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();y(va,ma)||h({actual:va,expected:ma,message:ua,operator:"deepStrictEqual",stackStartFn:Ma})};K.notDeepStrictEqual=function Lb(ma,ua,Ma){if(2>arguments.length)throw new M("actual",
"expected");void 0===v&&c();y(ma,ua)&&h({actual:ma,expected:ua,message:Ma,operator:"notDeepStrictEqual",stackStartFn:Lb})};K.strictEqual=function ic(ua,Ma,Lb){if(2>arguments.length)throw new M("actual","expected");Aa(ua,Ma)||h({actual:ua,expected:Ma,message:Lb,operator:"strictEqual",stackStartFn:ic})};K.notStrictEqual=function Vb(Ma,Lb,ic){if(2>arguments.length)throw new M("actual","expected");Aa(Ma,Lb)&&h({actual:Ma,expected:Lb,message:ic,operator:"notStrictEqual",stackStartFn:Vb})};var T=function jc(Lb,
ic,Vb){var Pc=this;if(!(this instanceof jc))throw new TypeError("Cannot call a class as a function");!0;ic.forEach(function(Rb){Rb in Lb&&(void 0!==Vb&&"string"==typeof Vb[Rb]&&ea(Lb[Rb])&&Lb[Rb].test(Vb[Rb])?Pc[Rb]=Vb[Rb]:Pc[Rb]=Lb[Rb])})};return K.throws=function Vb(ic){for(var jc=arguments.length,Pc=Array(1<jc?jc-1:0),Rb=1;Rb<jc;Rb++)Pc[Rb-1]=arguments[Rb];a.apply(void 0,[Vb,b(ic)].concat(Pc))},K.rejects=function jc(Vb){for(var Pc=arguments.length,Rb=Array(1<Pc?Pc-1:0),zd=1;zd<Pc;zd++)Rb[zd-1]=
arguments[zd];return m(Vb).then(function(ld){return a.apply(void 0,[jc,ld].concat(Rb))})},K.doesNotThrow=function Pc(jc){for(var Rb=arguments.length,zd=Array(1<Rb?Rb-1:0),ld=1;ld<Rb;ld++)zd[ld-1]=arguments[ld];g.apply(void 0,[Pc,b(jc)].concat(zd))},K.doesNotReject=function Rb(Pc){for(var zd=arguments.length,ld=Array(1<zd?zd-1:0),la=1;la<zd;la++)ld[la-1]=arguments[la];return m(Pc).then(function(Da){return g.apply(void 0,[Rb,Da].concat(ld))})},K.ifError=function zd(Rb){if(null!=Rb){var ld="ifError got unwanted exception: ";
"object"===d(Rb)&&"string"==typeof Rb.message?0===Rb.message.length&&Rb.constructor?ld+=Rb.constructor.name:ld+=Rb.message:ld+=X(Rb);ld=new N({actual:Rb,expected:null,operator:"ifError",message:ld,stackStartFn:zd});Rb=Rb.stack;if("string"==typeof Rb){Rb=Rb.split("\n");Rb.shift();for(var la=ld.stack.split("\n"),Da=0;Da<Rb.length;Da++){var Pa=la.indexOf(Rb[Da]);if(-1!==Pa){la=la.slice(0,Pa);break}}ld.stack="".concat(la.join("\n"),"\n").concat(Rb.join("\n"))}throw ld;}},K.strict=A(l,K,{equal:K.strictEqual,
deepEqual:K.deepStrictEqual,notEqual:K.notStrictEqual,notDeepEqual:K.notDeepStrictEqual}),K.strict.strict=K.strict,jS}function dl(d,c,h){if(!((this||Ci)instanceof dl))return new dl(d,c,h);var f=this||Ci;aL.call(this||Ci);this.setMaxListeners(Infinity);"function"===typeof c&&(h=c,c={});c=c||{};if(!d||"object"!==typeof d){d=new rga("First argument must be an abstract-leveldown compliant store");if("function"===typeof h)return bL.nextTick(h,d);throw d;}sga.strictEqual(typeof d.status,"string",".status required, old abstract-leveldown");
(this||Ci).options=qD(c);(this||Ci)._db=d;(this||Ci).db=new Z3(d);this.open(h||function(k){k&&f.emit("error",k)});(this||Ci).supports=tga((this||Ci).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||Ci).supports.additionalMethods).forEach(function(k){null==(this||Ci)[k]&&((this||Ci)[k]=function(){return(this||Ci).db[k].apply((this||Ci).db,arguments)})},this||Ci)}function lG(d,c){if(!d._isOpening()&&!d.isOpen())return bL.nextTick(c,new $3("Database is not open")),
!0}function lv(d,c){return Object.hasOwnProperty.call(d,c)&&c}function uga(d){return d}function cL(d){return d}function kS(d){return void 0===d||null===d||lS.isBuffer(d)}function Kp(d){if(!((this||Kw)instanceof Kp))return new Kp(d);(this||Kw).opts=d||{};(this||Kw).encodings=mS}function vga(d){return d.toString((this||Tg).encoding)}function wga(d){(this||Tg).charReceived=d.length%2;(this||Tg).charLength=(this||Tg).charReceived?2:0}function xga(d){(this||Tg).charReceived=d.length%3;(this||Tg).charLength=
(this||Tg).charReceived?3:0}function a4(){function d(F,H,I){(this||Di).chunk=F;(this||Di).encoding=H;(this||Di).callback=I}function c(F,H){var I=rD();F=F||{};var M=F.highWaterMark,N=F.objectMode?16:16384;(this||Di).highWaterMark=M||0===M?M:N;(this||Di).objectMode=!!F.objectMode;H instanceof I&&((this||Di).objectMode=(this||Di).objectMode||!!F.writableObjectMode);(this||Di).highWaterMark=~~(this||Di).highWaterMark;(this||Di).needDrain=!1;(this||Di).ending=!1;(this||Di).ended=!1;(this||Di).finished=
!1;(this||Di).decodeStrings=!1!==F.decodeStrings;(this||Di).defaultEncoding=F.defaultEncoding||"utf8";(this||Di).length=0;(this||Di).writing=!1;(this||Di).corked=0;(this||Di).sync=!0;(this||Di).bufferProcessing=!1;(this||Di).onwrite=function(X){a(H,X)};(this||Di).writecb=null;(this||Di).writelen=0;(this||Di).buffer=[];(this||Di).pendingcb=0;(this||Di).prefinished=!1;(this||Di).errorEmitted=!1}function h(F){var H=rD();if(!((this||Di)instanceof h||(this||Di)instanceof H))return new h(F);(this||Di)._writableState=
new c(F,this||Di);(this||Di).writable=!0;E.call(this||Di)}function f(F,H,I){var M=Error("write after end");F.emit("error",M);v.nextTick(function(){I(M)})}function k(F,H,I,M){var N=!0;if(!(A.isBuffer(I)||A.isString(I)||A.isNullOrUndefined(I)||H.objectMode)){var X=new TypeError("Invalid non-string/buffer chunk");F.emit("error",X);v.nextTick(function(){M(X)});N=!1}return N}function n(F,H,I,M,N){var X=M;!H.objectMode&&!1!==H.decodeStrings&&A.isString(I)&&(I=new y(I,X));A.isBuffer(I)&&(M="buffer");X=H.objectMode?
1:I.length;H.length+=X;var W=H.length<H.highWaterMark;W||(H.needDrain=!0);H.writing||H.corked?H.buffer.push(new d(I,M,N)):b(F,H,!1,X,I,M,N);return W}function b(F,H,I,M,N,X,W){H.writelen=M;H.writecb=W;H.writing=!0;H.sync=!0;I?F._writev(N,H.onwrite):F._write(N,X,H.onwrite);H.sync=!1}function e(F,H,I,M,N){I?v.nextTick(function(){H.pendingcb--;N(M)}):(H.pendingcb--,N(M));F._writableState.errorEmitted=!0;F.emit("error",M)}function m(F){F.writing=!1;F.writecb=null;F.length-=F.writelen;F.writelen=0}function a(F,
H){var I=F._writableState,M=I.sync,N=I.writecb;m(I);if(H)e(F,I,M,H,N);else{var X=I.ending&&0===I.length&&!I.finished&&!I.writing;X||I.corked||I.bufferProcessing||!I.buffer.length||l(F,I);M?v.nextTick(function(){g(F,I,X,N)}):g(F,I,X,N)}}function g(F,H,I,M){!I&&0===H.length&&H.needDrain&&(H.needDrain=!1,F.emit("drain"));H.pendingcb--;M();r(F,H)}function l(F,H){H.bufferProcessing=!0;if(F._writev&&1<H.buffer.length){for(var I=[],M=0;M<H.buffer.length;M++)I.push(H.buffer[M].callback);H.pendingcb++;b(F,
H,!0,H.length,H.buffer,"",function(W){for(var ea=0;ea<I.length;ea++)H.pendingcb--,I[ea](W)});H.buffer=[]}else{for(M=0;M<H.buffer.length;M++){var N=H.buffer[M],X=N.chunk;b(F,H,!1,H.objectMode?1:X.length,X,N.encoding,N.callback);if(H.writing){M++;break}}M<H.buffer.length?H.buffer=H.buffer.slice(M):H.buffer.length=0}H.bufferProcessing=!1}function r(F,H){var I=H.ending&&0===H.length&&!H.finished&&!H.writing;I&&(0===H.pendingcb?(H.prefinished||(H.prefinished=!0,F.emit("prefinish")),H.finished=!0,F.emit("finish")):
H.prefinished||(H.prefinished=!0,F.emit("prefinish")));return I}if(b4)return nS;b4=!0;var v=uj;nS=h;var y=Ni.Buffer;h.WritableState=c;var A=Xm;A.inherits=xl;var E=MA;A.inherits(h,E);h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=function(F,H,I){var M=(this||Di)._writableState,N=!1;A.isFunction(H)&&(I=H,H=null);A.isBuffer(F)?H="buffer":H||(H=M.defaultEncoding);A.isFunction(I)||(I=function(){});M.ended?f(this||Di,M,I):k(this||Di,M,F,I)&&(M.pendingcb++,
N=n(this||Di,M,F,H,I));return N};h.prototype.cork=function(){(this||Di)._writableState.corked++};h.prototype.uncork=function(){var F=(this||Di)._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.finished||F.bufferProcessing||!F.buffer.length||l(this||Di,F))};h.prototype._write=function(F,H,I){I(Error("not implemented"))};h.prototype._writev=null;h.prototype.end=function(F,H,I){var M=(this||Di)._writableState;A.isFunction(F)?(I=F,H=F=null):A.isFunction(H)&&(I=H,H=null);A.isNullOrUndefined(F)||
this.write(F,H);M.corked&&(M.corked=1,this.uncork());if(!M.ending&&!M.finished){F=this||Di;M.ending=!0;r(F,M);if(I)if(M.finished)v.nextTick(I);else F.once("finish",I);M.ended=!0}};return nS}function rD(){function d(e){if(!((this||Ht)instanceof d))return new d(e);n.call(this||Ht,e);b.call(this||Ht,e);e&&!1===e.readable&&((this||Ht).readable=!1);e&&!1===e.writable&&((this||Ht).writable=!1);(this||Ht).allowHalfOpen=!0;e&&!1===e.allowHalfOpen&&((this||Ht).allowHalfOpen=!1);this.once("end",c)}function c(){(this||
Ht).allowHalfOpen||(this||Ht)._writableState.ended||h.nextTick((this||Ht).end.bind(this||Ht))}if(c4)return oS;c4=!0;var h=uj;oS=d;var f=Object.keys||function(e){var m=[],a;for(a in e)m.push(a);return m},k=Xm;k.inherits=xl;var n=d4(),b=a4();k.inherits(d,n);(function(e,m){for(var a=0,g=e.length;a<g;a++)m(e[a],a)})(f(b.prototype),function(e){d.prototype[e]||(d.prototype[e]=b.prototype[e])});return oS}function d4(){function d(N,X){var W=rD();N=N||{};var ea=N.highWaterMark,Aa=N.objectMode?16:16384;(this||
gg).highWaterMark=ea||0===ea?ea:Aa;(this||gg).highWaterMark=~~(this||gg).highWaterMark;(this||gg).buffer=[];(this||gg).length=0;(this||gg).pipes=null;(this||gg).pipesCount=0;(this||gg).flowing=null;(this||gg).ended=!1;(this||gg).endEmitted=!1;(this||gg).reading=!1;(this||gg).sync=!0;(this||gg).needReadable=!1;(this||gg).emittedReadable=!1;(this||gg).readableListening=!1;(this||gg).objectMode=!!N.objectMode;X instanceof W&&((this||gg).objectMode=(this||gg).objectMode||!!N.readableObjectMode);(this||
gg).defaultEncoding=N.defaultEncoding||"utf8";(this||gg).ranOut=!1;(this||gg).awaitDrain=0;(this||gg).readingMore=!1;(this||gg).decoder=null;(this||gg).encoding=null;N.encoding&&(I||(I=pS.StringDecoder),(this||gg).decoder=new I(N.encoding),(this||gg).encoding=N.encoding)}function c(N){rD();if(!((this||gg)instanceof c))return new c(N);(this||gg)._readableState=new d(N,this||gg);(this||gg).readable=!0;F.call(this||gg)}function h(N,X,W,ea,Aa){var Ka=W;var K=null;H.isBuffer(Ka)||H.isString(Ka)||H.isNullOrUndefined(Ka)||
X.objectMode||(K=new TypeError("Invalid non-string/buffer chunk"));(Ka=K)?N.emit("error",Ka):H.isNullOrUndefined(W)?(X.reading=!1,X.ended||(X.decoder&&!X.ended&&(W=X.decoder.end())&&W.length&&(X.buffer.push(W),X.length+=X.objectMode?1:W.length),X.ended=!0,k(N))):X.objectMode||W&&0<W.length?X.ended&&!Aa?(W=Error("stream.push() after EOF"),N.emit("error",W)):X.endEmitted&&Aa?(W=Error("stream.unshift() after end event"),N.emit("error",W)):(!X.decoder||Aa||ea||(W=X.decoder.write(W)),Aa||(X.reading=!1),
X.flowing&&0===X.length&&!X.sync?(N.emit("data",W),N.read(0)):(X.length+=X.objectMode?1:W.length,Aa?X.buffer.unshift(W):X.buffer.push(W),X.needReadable&&k(N)),b(N,X)):Aa||(X.reading=!1);return!X.ended&&(X.needReadable||X.length<X.highWaterMark||0===X.length)}function f(N,X){if(0===X.length&&X.ended)return 0;if(X.objectMode)return 0===N?0:1;if(isNaN(N)||H.isNull(N))return X.flowing&&X.buffer.length?X.buffer[0].length:X.length;if(0>=N)return 0;if(N>X.highWaterMark){var W=N;if(8388608<=W)W=8388608;else{W--;
for(var ea=1;32>ea;ea<<=1)W|=W>>ea;W++}X.highWaterMark=W}if(N>X.length){if(X.ended)return X.length;X.needReadable=!0;return 0}return N}function k(N){var X=N._readableState;X.needReadable=!1;X.emittedReadable||(M("emitReadable",X.flowing),X.emittedReadable=!0,X.sync?v.nextTick(function(){n(N)}):n(N))}function n(N){M("emit readable");N.emit("readable");a(N)}function b(N,X){X.readingMore||(X.readingMore=!0,v.nextTick(function(){for(var W=X.length;!X.reading&&!X.flowing&&!X.ended&&X.length<X.highWaterMark&&
(M("maybeReadMore read 0"),N.read(0),W!==X.length);)W=X.length;X.readingMore=!1}))}function e(N){return function(){var X=N._readableState;M("pipeOnDrain",X.awaitDrain);X.awaitDrain&&X.awaitDrain--;0===X.awaitDrain&&E.listenerCount(N,"data")&&(X.flowing=!0,a(N))}}function m(N,X){X.resumeScheduled||(X.resumeScheduled=!0,v.nextTick(function(){X.resumeScheduled=!1;N.emit("resume");a(N);X.flowing&&!X.reading&&N.read(0)}))}function a(N){var X=N._readableState;M("flow",X.flowing);if(X.flowing){do var W=
N.read();while(null!==W&&X.flowing)}}function g(N,X){var W=X.buffer,ea=X.length,Aa=!!X.decoder;X=!!X.objectMode;if(0===W.length)return null;if(0===ea)ea=null;else if(X)ea=W.shift();else if(!N||N>=ea)ea=Aa?W.join(""):A.concat(W,ea),W.length=0;else if(N<W[0].length)X=W[0],ea=X.slice(0,N),W[0]=X.slice(N);else if(N===W[0].length)ea=W.shift();else{ea=Aa?"":new A(N);for(var Ka=0,K=0,aa=W.length;K<aa&&Ka<N;K++){X=W[0];var T=Math.min(N-Ka,X.length);Aa?ea+=X.slice(0,T):X.copy(ea,Ka,0,T);T<X.length?W[0]=X.slice(T):
W.shift();Ka+=T}}return ea}function l(N){var X=N._readableState;if(0<X.length)throw Error("endReadable called on non-empty stream");X.endEmitted||(X.ended=!0,v.nextTick(function(){X.endEmitted||0!==X.length||(X.endEmitted=!0,N.readable=!1,N.emit("end"))}))}function r(N,X){for(var W=0,ea=N.length;W<ea;W++)X(N[W],W)}if(e4)return qS;e4=!0;var v=uj;qS=c;var y=yga,A=Ni.Buffer;c.ReadableState=d;var E=bv.EventEmitter;E.listenerCount||(E.listenerCount=function(N,X){return N.listeners(X).length});var F=MA,
H=Xm;H.inherits=xl;var I,M=zga;M=M&&M.debuglog?M.debuglog("stream"):function(){};H.inherits(c,F);c.prototype.push=function(N,X){var W=(this||gg)._readableState;H.isString(N)&&!W.objectMode&&(X=X||W.defaultEncoding,X!==W.encoding&&(N=new A(N,X),X=""));return h(this||gg,W,N,X,!1)};c.prototype.unshift=function(N){return h(this||gg,(this||gg)._readableState,N,"",!0)};c.prototype.setEncoding=function(N){I||(I=pS.StringDecoder);(this||gg)._readableState.decoder=new I(N);(this||gg)._readableState.encoding=
N;return this||gg};c.prototype.read=function(N){M("read",N);var X=(this||gg)._readableState,W=N;if(!H.isNumber(N)||0<N)X.emittedReadable=!1;if(0===N&&X.needReadable&&(X.length>=X.highWaterMark||X.ended))return M("read: emitReadable",X.length,X.ended),0===X.length&&X.ended?l(this||gg):k(this||gg),null;N=f(N,X);if(0===N&&X.ended)return 0===X.length&&l(this||gg),null;var ea=X.needReadable;M("need readable",ea);if(0===X.length||X.length-N<X.highWaterMark)ea=!0,M("length less than watermark",ea);if(X.ended||
X.reading)ea=!1,M("reading or ended",ea);ea&&(M("do read"),X.reading=!0,X.sync=!0,0===X.length&&(X.needReadable=!0),this._read(X.highWaterMark),X.sync=!1);ea&&!X.reading&&(N=f(W,X));ea=0<N?g(N,X):null;H.isNull(ea)&&(X.needReadable=!0,N=0);X.length-=N;0!==X.length||X.ended||(X.needReadable=!0);W!==N&&X.ended&&0===X.length&&l(this||gg);H.isNull(ea)||this.emit("data",ea);return ea};c.prototype._read=function(N){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(N,X){function W(hb){M("onunpipe");
hb===pa&&Aa()}function ea(){M("onend");N.end()}function Aa(){M("cleanup");N.removeListener("close",aa);N.removeListener("finish",T);N.removeListener("drain",oa);N.removeListener("error",K);N.removeListener("unpipe",W);pa.removeListener("end",ea);pa.removeListener("end",Aa);pa.removeListener("data",Ka);!fa.awaitDrain||N._writableState&&!N._writableState.needDrain||oa()}function Ka(hb){M("ondata");!1===N.write(hb)&&(M("false write response, pause",pa._readableState.awaitDrain),pa._readableState.awaitDrain++,
pa.pause())}function K(hb){M("onerror",hb);U();N.removeListener("error",K);0===E.listenerCount(N,"error")&&N.emit("error",hb)}function aa(){N.removeListener("finish",T);U()}function T(){M("onfinish");N.removeListener("close",aa);U()}function U(){M("unpipe");pa.unpipe(N)}var pa=this||gg,fa=(this||gg)._readableState;switch(fa.pipesCount){case 0:fa.pipes=N;break;case 1:fa.pipes=[fa.pipes,N];break;default:fa.pipes.push(N)}fa.pipesCount+=1;M("pipe count=%d opts=%j",fa.pipesCount,X);X=X&&!1===X.end||N===
v.stdout||N===v.stderr?Aa:ea;if(fa.endEmitted)v.nextTick(X);else pa.once("end",X);N.on("unpipe",W);var oa=e(pa);N.on("drain",oa);pa.on("data",Ka);if(N._events&&N._events.error)y(N._events.error)?N._events.error.unshift(K):N._events.error=[K,N._events.error];else N.on("error",K);N.once("close",aa);N.once("finish",T);N.emit("pipe",pa);fa.flowing||(M("pipe resume"),pa.resume());return N};c.prototype.unpipe=function(N){var X=(this||gg)._readableState;if(0===X.pipesCount)return this||gg;if(1===X.pipesCount){if(N&&
N!==X.pipes)return this||gg;N||(N=X.pipes);X.pipes=null;X.pipesCount=0;X.flowing=!1;N&&N.emit("unpipe",this||gg);return this||gg}if(!N){N=X.pipes;var W=X.pipesCount;X.pipes=null;X.pipesCount=0;X.flowing=!1;for(var ea=0;ea<W;ea++)N[ea].emit("unpipe",this||gg);return this||gg}a:{ea=X.pipes;W=0;for(var Aa=ea.length;W<Aa;W++)if(ea[W]===N){ea=W;break a}ea=-1}if(-1===ea)return this||gg;X.pipes.splice(ea,1);--X.pipesCount;1===X.pipesCount&&(X.pipes=X.pipes[0]);N.emit("unpipe",this||gg);return this||gg};
c.prototype.on=function(N,X){X=F.prototype.on.call(this||gg,N,X);"data"===N&&!1!==(this||gg)._readableState.flowing&&this.resume();if("readable"===N&&(this||gg).readable&&(N=(this||gg)._readableState,!N.readableListening))if(N.readableListening=!0,N.emittedReadable=!1,N.needReadable=!0,N.reading)N.length&&k(this||gg);else{var W=this||gg;v.nextTick(function(){M("readable nexttick read 0");W.read(0)})}return X};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var N=(this||gg)._readableState;
N.flowing||(M("resume"),N.flowing=!0,N.reading||(M("resume read 0"),this.read(0)),m(this||gg,N));return this||gg};c.prototype.pause=function(){M("call pause flowing=%j",(this||gg)._readableState.flowing);!1!==(this||gg)._readableState.flowing&&(M("pause"),(this||gg)._readableState.flowing=!1,this.emit("pause"));return this||gg};c.prototype.wrap=function(N){var X=(this||gg)._readableState,W=!1,ea=this||gg;N.on("end",function(){M("wrapped end");if(X.decoder&&!X.ended){var Ka=X.decoder.end();Ka&&Ka.length&&
ea.push(Ka)}ea.push(null)});N.on("data",function(Ka){M("wrapped data");X.decoder&&(Ka=X.decoder.write(Ka));Ka&&(X.objectMode||Ka.length)&&!ea.push(Ka)&&(W=!0,N.pause())});for(var Aa in N)H.isFunction(N[Aa])&&H.isUndefined((this||gg)[Aa])&&((this||gg)[Aa]=function(Ka){return function(){return N[Ka].apply(N,arguments)}}(Aa));r(["error","close","destroy","pause","resume"],function(Ka){N.on(Ka,ea.emit.bind(ea,Ka))});ea._read=function(Ka){M("wrapped _read",Ka);W&&(W=!1,N.resume())};return ea};c._fromList=
g;return qS}function f4(){function d(n,b){(this||fo).afterTransform=function(e,m){var a=b._transformState;a.transforming=!1;var g=a.writecb;g?(a.writechunk=null,a.writecb=null,k.isNullOrUndefined(m)||b.push(m),g&&g(e),e=b._readableState,e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&b._read(e.highWaterMark),e=void 0):e=b.emit("error",Error("no writecb in Transform class"));return e};(this||fo).needTransform=!1;(this||fo).transforming=!1;(this||fo).writecb=null;(this||fo).writechunk=null}
function c(n){if(!((this||fo)instanceof c))return new c(n);f.call(this||fo,n);(this||fo)._transformState=new d(n,this||fo);var b=this||fo;(this||fo)._readableState.needReadable=!0;(this||fo)._readableState.sync=!1;this.once("prefinish",function(){k.isFunction((this||fo)._flush)?this._flush(function(e){h(b,e)}):h(b)})}function h(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(b.transforming)throw Error("calling transform done when still transforming");
return n.push(null)}if(g4)return rS;g4=!0;rS=c;var f=rD(),k=Xm;k.inherits=xl;k.inherits(c,f);c.prototype.push=function(n,b){(this||fo)._transformState.needTransform=!1;return f.prototype.push.call(this||fo,n,b)};c.prototype._transform=function(n,b,e){throw Error("not implemented");};c.prototype._write=function(n,b,e){var m=(this||fo)._transformState;m.writecb=e;m.writechunk=n;m.writeencoding=b;m.transforming||(n=(this||fo)._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&
this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||fo)._transformState;k.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return rS}function Aga(){function d(f){if(!((this||h4)instanceof d))return new d(f);c.call(this||h4,f)}if(i4)return sS;i4=!0;sS=d;var c=f4(),h=Xm;h.inherits=xl;h.inherits(d,c);d.prototype._transform=function(f,k,n){n(null,f)};return sS}function mG(d){return d&&
"object"===typeof d&&"default"in d?d["default"]:d}function Bga(d){var c={},h;for(h in d)c[h]=d[h];return c}function Cga(d,c,h){d.open(function(){});return{apply:function(f,k,n){k=k||{};for(var b=[],e=-1,m=f.length;++e<m;){var a=f[e],g=a,l=a.prefix;l&&l.options&&(g.keyEncoding=g.keyEncoding||l.options.keyEncoding,g.valueEncoding=g.valueEncoding||l.options.valueEncoding);g=a;l=a.prefix;l="function"===typeof l.prefix?l.prefix():l;g.prefix=l;b.push({key:c.encode([a.prefix,h.encodeKey(a.key,k,a)]),value:"del"!==
a.type&&h.encodeValue(a.value,k,a),type:a.type})}d.db.batch(b,k,n)},get:function(f,k,n,b){n.asBuffer=h.valueAsBuffer(n);return d.db.get(c.encode([k,h.encodeKey(f,n,void 0)]),n,function(e,m){e?b(e):b(null,h.decodeValue(m,n))})},createDecoder:function(f){return function(k,n){return{key:h.decodeKey(c.decode(k)[1],f),value:h.decodeValue(n,f)}}},isClosed:function(){return d.isClosed()},close:function(f){return d.close(f)},iterator:function(f){var k=Bga(f||{}),n=f.prefix||[];Dga.toLtgt(f,k,function(b){return c.encode([n,
h.encodeKey(b,k,{})])},c.lowerBound,c.upperBound);k.prefix=null;k.keyAsBuffer=k.valueAsBuffer=!1;"number"!==typeof k.limit&&(k.limit=-1);k.keyAsBuffer=c.buffer;k.valueAsBuffer=h.valueAsBuffer(k);return function(b){return{next:function(e){return b.next(e)},end:function(e){b.end(e)}}}(d.db.iterator(k))}}}function tS(){Error.call(this)}function py(d,c){if(!(this instanceof py))return new py(d,c);j4.call(this,{objectMode:!0,highWaterMark:d.highWaterMark});this._waiting=!1;this._options=d;this._makeData=
c}function sD(d){k4.call(this||Lw,d);(this||Lw)._destroyed=!1}function Ega(d,c,h){h(null,d)}function uS(d){return function(c,h,f){"function"==typeof c&&(f=h,h=c,c={});"function"!=typeof h&&(h=Ega);"function"!=typeof f&&(f=null);return d(c,h,f)}}function lk(d){this._capacity=l4(d);this._front=this._length=0;if(m4(d)){for(var c=d.length,h=0;h<c;++h)this[h]=d[h];this._length=c}}function l4(d){if("number"!==typeof d)if(m4(d))d=d.length;else return 16;d=Math.min(Math.max(16,d),1073741824);d=(d>>>0)-1;
d|=d>>1;d|=d>>2;d|=d>>4;d|=d>>8;return(d|d>>16)+1}function vS(d){d=d.rev_tree.slice();for(var c;c=d.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var k=f.length;h<k;h++)d.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(e!==f?e:b!==c?b<c:n<h)){var n=h;var b=c;var e=f}}return b+"-"+n}function dL(d,c){d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[2];h=c(0===n.length,f,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)d.push({pos:f+1,ids:n[k],ctx:h})}}function Fga(d,
c){return d.pos-c.pos}function n4(d){var c=[];dL(d,function(f,k,n,b,e){f&&c.push({rev:k+"-"+n,pos:k,opts:e})});c.sort(Fga).reverse();d=0;for(var h=c.length;d<h;d++)delete c[d].pos;return c}function o4(d){var c=[];d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[0],b=k[1];k=k[2];var e=0===k.length;h=h.history?h.history.slice():[];h.push({id:n,opts:b});e&&c.push({pos:f+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)d.push({pos:f+1,ids:k[n],history:h})}return c.reverse()}function Gga(d,c){return d.pos-
c.pos}function p4(d,c){for(var h,f,k=d.length;c<k;c++){var n=d[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function Hga(d,c){return d[0]<c[0]?-1:1}function q4(d,c){c=[{tree1:d,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),k=f.tree1;f=f.tree2;if(k[1].status||f[1].status)k[1].status="available"===k[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(k[2][0]){for(var b=!1,e=0;e<k[2].length;e++)k[2][e][0]===f[2][n][0]&&(c.push({tree1:k[2][e],tree2:f[2][n]}),
b=!0);if(!b){h="new_branch";b=k[2];e=f[2][n];for(var m,a=b,g=e,l=Hga,r=0,v=a.length;r<v;)m=r+v>>>1,0>l(a[m],g)?r=m+1:v=m;b.splice(r,0,e)}}else h="new_leaf",k[2][0]=f[2][n]}return{conflicts:h,tree:d}}function r4(d,c,h){var f=[],k=!1,n=!1;if(!d.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,e=d.length;b<e;b++){var m=d[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=q4(m.ids,c.ids),f.push({pos:m.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],
r=[];for(r.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===g.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=q4(l.ids,g.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):f.push(m)}else f.push(m)}n||f.push(c);f.sort(Gga);return{tree:f,conflicts:k||"internal_node"}}function Iga(d,c){d=o4(d);for(var h,f,k=0,n=
d.length;k<n;k++){var b=d[k],e=b.ids;if(e.length>c){h||(h={});var m=e.length-c;var a={pos:b.pos+m,ids:p4(e,m)};for(var g=0;g<m;g++)h[b.pos+g+"-"+e[g].id]=!0}else a={pos:b.pos,ids:p4(e,0)};f=f?r4(f,a,!0).tree:[a]}h&&dL(f,function(l,r,v){delete h[r+"-"+v]});return{tree:f,revs:h?Object.keys(h):[]}}function Jga(d){return d.ids}function s4(d){return d.reduce(function(c,h){c[h]=!0;return c},{})}function t4(d){if(!/^\d+-/.test(d))return rr.createError(rr.INVALID_REV);var c=d.indexOf("-"),h=d.substring(0,
c);d=d.substring(c+1);return{prefix:parseInt(h,10),id:d}}function u4(d,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};d._deleted&&(f.deleted=!0);if(c){d._id||(d._id=NA.uuid());var k=NA.rev(d,h.deterministic_revs);if(d._rev){c=t4(d._rev);if(c.error)return c;d._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,f,[]]]]}];var n=c.prefix+1}else d._rev_tree=[{pos:1,ids:[k,f,[]]}],n=1}else{if(d._revisions){k=d._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],f,[]];h=1;for(var b=
k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];d._rev_tree=[{pos:n,ids:c}];n=d._revisions.start;k=d._revisions.ids[0]}if(!d._rev_tree){c=t4(d._rev);if(c.error)return c;n=c.prefix;k=c.id;d._rev_tree=[{pos:n,ids:[k,f,[]]}]}}NA.invalidIdError(d._id);d._rev=n+"-"+k;f={metadata:{},data:{}};for(var e in d)if(Object.prototype.hasOwnProperty.call(d,e)){if((n="_"===e[0])&&!Kga[e])throw d=rr.createError(rr.DOC_VALIDATION,e),d.message=rr.DOC_VALIDATION.message+": "+e,d;n&&!Lga[e]?f.metadata[e.slice(1)]=d[e]:
f.data[e]=d[e]}return f}function Mga(d,c,h){try{var f=nG.atob(d.data)}catch(k){f={error:rr.createError(rr.BAD_ARG,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);d.length=f.length;d.data="blob"===c?nG.binaryStringToBlobOrBuffer(f,d.content_type):"base64"===c?nG.btoa(f):f;v4.binaryMd5(f,function(k){d.digest="md5-"+k;h()})}function Nga(d,c,h){v4.binaryMd5(d.data,function(f){d.digest="md5-"+f;d.length=d.data.size||d.data.length||0;"binary"===c?nG.blobOrBufferToBinaryString(d.data,
function(k){d.data=k;h()}):"base64"===c?nG.blobOrBufferToBase64(d.data,function(k){d.data=k;h()}):h()})}function Oga(d,c,h){if(d.stub)return h();"string"===typeof d.data?Mga(d,c,h):Nga(d,c,h)}function w4(d,c,h,f,k,n,b,e){if(Cq.revExists(c.rev_tree,h.metadata.rev)&&!e)return f[k]=h,n();var m=c.winningRev||Cq.winningRev(c),a="deleted"in c?c.deleted:Cq.isDeleted(c,m),g="deleted"in h.metadata?h.metadata.deleted:Cq.isDeleted(h.metadata),l=/^1-/.test(h.metadata.rev);a&&!g&&e&&l&&(l=h.data,l._rev=m,l._id=
h.metadata.id,h=u4(l,e));d=Cq.merge(c.rev_tree,h.metadata.rev_tree[0],d);if(e&&(a&&g&&"new_leaf"!==d.conflicts||!a&&"new_leaf"!==d.conflicts||a&&!g&&"new_branch"===d.conflicts))return h=rr.createError(rr.REV_CONFLICT),f[k]=h,n();f=h.metadata.rev;h.metadata.rev_tree=d.tree;h.stemmedRevs=d.stemmedRevs||[];c.rev_map&&(h.metadata.rev_map=c.rev_map);c=Cq.winningRev(h.metadata);e=Cq.isDeleted(h.metadata,c);a=a===e?0:a<e?-1:1;f=f===c?e:Cq.isDeleted(h.metadata,f);b(h,c,e,f,!0,a,k,n)}function oG(d){return d&&
"object"===typeof d&&"default"in d?d["default"]:d}function x4(d,c){d=new Uint8Array(d);return pG.blob([d],{type:c})}function Pga(d,c){pG.readAsBinaryString(d,c)}function y4(d,c){c=c.prefix()[0];d=d._cache;var h=d.get(c);h||(h=new It.Map,d.set(c,h));return h}function OA(){this._batch=[];this._cache=new It.Map}function wS(d){return"winningRev"in d?d.winningRev:qG.winningRev(d)}function Qga(d,c,h){var f=d.content_type;return new Promise(function(k,n){c.binaryStore.get(d.digest,function(b,e){if(b){if("NotFoundError"!==
b.name)return n(b);b=h.binary?pG.binaryStringToBlobOrBuffer("",f):""}else b=h.binary?x4(e,f):e.toString("base64");delete d.stub;delete d.length;d.data=b;k()})})}function xS(d,c,h){var f=[];d.forEach(function(k){k.doc&&k.doc._attachments&&Object.keys(k.doc._attachments).forEach(function(n){n=k.doc._attachments[n];"data"in n||f.push(n)})});return Promise.all(f.map(function(k){return Qga(k,c,h)}))}function yS(d){(this||PA).db=d;(this||PA)._ended=!1;(this||PA)._nexting=!1}function qy(d){(this||Gl)._db=
d;(this||Gl)._operations=[];(this||Gl)._written=!1}function Lp(d){if(!arguments.length||void 0===d)throw Error("constructor requires at least a location argument");if("string"!=typeof d)throw Error("constructor requires a location string argument");(this||ym).location=d;(this||ym).status="new"}function sr(d,c,h,f,k,n){this._color=d;this.key=c;this.value=h;this.left=f;this.right=k;this._count=n}function mv(d){return new sr(d._color,d.key,d.value,d.left,d.right,d._count)}function ry(d,c){return new sr(d,
c.key,c.value,c.left,c.right,c._count)}function Hl(d){d._count=1+(d.left?d.left._count:0)+(d.right?d.right._count:0)}function tD(d,c){this._compare=d;this.root=c}function zS(d,c){if(c.left){var h=zS(d,c.left);if(h)return h}if(h=d(c.key,c.value))return h;if(c.right)return zS(d,c.right)}function AS(d,c,h,f){if(0>=c(d,f.key)){if(f.left){var k=AS(d,c,h,f.left);if(k)return k}if(k=h(f.key,f.value))return k}if(f.right)return AS(d,c,h,f.right)}function BS(d,c,h,f,k){var n=h(d,k.key),b=h(c,k.key);if(0>=n&&
(k.left&&(n=BS(d,c,h,f,k.left))||0<b&&(n=f(k.key,k.value))))return n;if(0<b&&k.right)return BS(d,c,h,f,k.right)}function tr(d,c){this.tree=d;this._stack=c}function z4(d,c){d.key=c.key;d.value=c.value;d.left=c.left;d.right=c.right;d._color=c._color;d._count=c._count}function Rga(d,c){return d<c?-1:d>c?1:0}function A4(d,c){for(var h in d)c[h]=d[h]}function uD(d,c,h){return Mw(d,c,h)}function Sga(d){return 0<ur.compare(d,(this||Zf)._end)}function Tga(d){return 0<=ur.compare(d,(this||Zf)._end)}function Uga(d){return 0>
ur.compare(d,(this||Zf)._end)}function Vga(d){return 0>=ur.compare(d,(this||Zf)._end)}function eL(d,c){B4.call(this||Zf,d);(this||Zf)._limit=c.limit;-1===(this||Zf)._limit&&((this||Zf)._limit=Infinity);d=d._store[d._location];(this||Zf).keyAsBuffer=!1!==c.keyAsBuffer;(this||Zf).valueAsBuffer=!1!==c.valueAsBuffer;(this||Zf)._reverse=c.reverse;(this||Zf)._options=c;(this||Zf)._done=0;(this||Zf)._reverse?((this||Zf)._incr="prev",(this||Zf)._start=ur.upperBound(c),(this||Zf)._end=ur.lowerBound(c),"undefined"===
typeof(this||Zf)._start?(this||Zf)._tree=d.end:ur.upperBoundInclusive(c)?(this||Zf)._tree=d.le((this||Zf)._start):(this||Zf)._tree=d.lt((this||Zf)._start),(this||Zf)._end&&(ur.lowerBoundInclusive(c)?(this||Zf)._test=Tga:(this||Zf)._test=Sga)):((this||Zf)._incr="next",(this||Zf)._start=ur.lowerBound(c),(this||Zf)._end=ur.upperBound(c),"undefined"===typeof(this||Zf)._start?(this||Zf)._tree=d.begin:ur.lowerBoundInclusive(c)?(this||Zf)._tree=d.ge((this||Zf)._start):(this||Zf)._tree=d.gt((this||Zf)._start),
(this||Zf)._end&&(ur.upperBoundInclusive(c)?(this||Zf)._test=Vga:(this||Zf)._test=Uga))}function Dq(d){if(!((this||Zf)instanceof Dq))return new Dq(d);C4.call(this||Zf,"string"===typeof d?d:"");(this||Zf)._location=(this||Zf).location?"$"+(this||Zf).location:"_tree";(this||Zf)._store=(this||Zf).location?vD:this||Zf;(this||Zf)._store[(this||Zf)._location]=(this||Zf)._store[(this||Zf)._location]||Wga(ur.compare)}function D4(d){return d&&"object"===typeof d&&"default"in d?d["default"]:d}function CS(d,
c){d=Xga.assign({db:Yga},d);Zga.call(this,d,c)}function DS(d){d.__serialize__=function(){return{__expr__:'({type: "'+d.type+'", name: "'+d.name+'", _id: "'+d._id+'"})'}};return d}function rG(d){var c,h,f,k,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(!d||mh.obj.isEmpty(d))return m.return(!1);if(d&&d._rev)return m.return(d);c=d;h=c.type;f=c.name;k=c._id;m.setFinallyBlock(2);n=Object;b=n.assign;e=d;return m.yield(mh.MorphicDB.default.fetchCommit(h,f,k),
4)}2!=m.nextAddress&&b.call(n,e,m.yieldResult);m.enterFinallyBlock();return m.return(d)})}function Nw(d){return d?d.replace(/^\s+|\s+$/g,""):""}function ES(d,c){var h=d&&"string"===typeof d.type,f=h?d:c,k;for(k in d){var n=d[k];Array.isArray(n)?n.forEach(function(b){ES(b,f)}):n&&"object"===typeof n&&ES(n,f)}h&&Object.defineProperty(d,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return d}function fL(d){(this||$ga).options=d||{}}function Ym(d){d=d||{};E4.call(this||sy,d);(this||
sy).indentation=d.indent}function QA(d){throw new RangeError(aha[d]);}function F4(d,c){var h=d.split("@"),f="";1<h.length&&(f=h[0]+"@",d=h[1]);d=d.replace(bha,".").split(".");h=[];for(var k=d.length;k--;)h[k]=c(d[k]);c=h.join(".");return f+c}function G4(d){for(var c=[],h=0,f=d.length;h<f;){var k=d.charCodeAt(h++);if(55296<=k&&56319>=k&&h<f){var n=d.charCodeAt(h++);56320==(64512&n)?c.push(((1023&k)<<10)+(1023&n)+65536):(c.push(k),h--)}else c.push(k)}return c}function Es(){this.href=this.path=this.pathname=
this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function sG(d,c,h){if(d&&nv.isObject(d)&&d instanceof Es)return d;var f=new Es;return f.parse(d,c,h),f}function ov(d){if("string"!=typeof d)throw new TypeError("Path must be a string. Received "+JSON.stringify(d));}function H4(d,c){for(var h,f="",k=0,n=-1,b=0,e=0;e<=d.length;++e){if(e<d.length)h=d.charCodeAt(e);else{if(47===h)break;h=47}if(47===h){if(n!==e-1&&1!==b)if(n!==e-1&&2===b){if(2>
f.length||2!==k||46!==f.charCodeAt(f.length-1)||46!==f.charCodeAt(f.length-2))if(2<f.length){if(n=f.lastIndexOf("/"),n!==f.length-1){-1===n?(f="",k=0):k=(f=f.slice(0,n)).length-1-f.lastIndexOf("/");n=e;b=0;continue}}else if(2===f.length||1===f.length){f="";k=0;n=e;b=0;continue}c&&(0<f.length?f+="/..":f="..",k=2)}else 0<f.length?f+="/"+d.slice(n+1,e):f=d.slice(n+1,e),k=e-n-1;n=e;b=0}else 46===h&&-1!==b?++b:b=-1}return f}function FS(d,c){try{return decodeURIComponent(d.join(""))}catch(f){}if(1===d.length)return d;
c=c||1;var h=d.slice(0,c);d=d.slice(c);return Array.prototype.concat.call([],FS(h),FS(d))}function GS(){return Array.prototype.reduce.call(arguments,function(d,c){return cha.resolve(d,c)})}function I4(d){return"\\"===dha.sep?d.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):d}function tG(d){return eha(d.replace(/\+/g,"%2B"))}function gL(d,c,h){fha.nextTick(function(){d(c,h)})}function wD(d,c){try{return JSON.parse(d.replace(/^\)\]\}'/,""))}catch(h){throw h.sourceMapData=c,h;}}function J4(d,c,h){c=tG(c);
try{return String(d(c))}catch(f){throw f.sourceMapData=h,f;}}function K4(d,c,h,f){try{var k=L4(d,c)}catch(n){return gL(f,n)}if(!k||k.map)return gL(f,null,k);d=tG(k.url);h(d,function(n,b){if(n)return n.sourceMapData=k,f(n);k.map=String(b);try{k.map=wD(k.map,k)}catch(e){return f(e)}f(null,k)})}function M4(d,c,h){d=L4(d,c);if(!d||d.map)return d;d.map=J4(h,d.url,d);d.map=wD(d.map,d);return d}function L4(d,c){c=I4(c);d=(d=d.match(gha))?d[1]||d[2]||"":null;if(!d)return null;var h=d.match(hha);if(h){var f=
h[1]||"text/plain",k=h[2]||"";h=h[3]||"";c={sourceMappingURL:d,url:null,sourcesRelativeTo:c,map:h};if(!iha.test(f)){var n=Error("Unuseful data uri mime type: "+f);n.sourceMapData=c;throw n;}try{if(";base64"===k)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=N4(h);else{var b=N4(h),e=b.length,m=new Uint8Array(e);for(d=0;d<e;d++)m[d]=b.charCodeAt(d);n=(new TextDecoder(jha,{fatal:!0})).decode(m)}else n=decodeURIComponent(h);c.map=wD(n,c)}catch(a){throw a.sourceMapData=c,a;}return c}n=
GS(c,d);return{sourceMappingURL:d,url:n,sourcesRelativeTo:n,map:null}}function O4(d,c,h,f,k){"function"===typeof f&&(k=f,f={});var n=d.sources?d.sources.length:0,b={sourcesResolved:[],sourcesContent:[]};if(0===n)gL(k,null,b);else{var e=function(){n--;0===n&&k(null,b)};P4(d,c,f,function(m,a,g){b.sourcesResolved[g]=m;"string"===typeof a?(b.sourcesContent[g]=a,gL(e,null)):(m=tG(m),h(m,function(l,r){b.sourcesContent[g]=l?l:String(r);e()}))})}}function Q4(d,c,h,f){var k={sourcesResolved:[],sourcesContent:[]};
if(!d.sources||0===d.sources.length)return k;P4(d,c,f,function(n,b,e){k.sourcesResolved[e]=n;if(null!==h)if("string"===typeof b)k.sourcesContent[e]=b;else{n=tG(n);try{k.sourcesContent[e]=String(h(n))}catch(m){k.sourcesContent[e]=m}}});return k}function P4(d,c,h,f){h=h||{};c=I4(c);for(var k,n,b=0,e=d.sources.length;b<e;b++)k=null,"string"===typeof h.sourceRoot?k=h.sourceRoot:"string"===typeof d.sourceRoot&&!1!==h.sourceRoot&&(k=d.sourceRoot),k=null===k||""===k?GS(c,d.sources[b]):GS(c,k.replace(kha,
"/"),d.sources[b]),n=(d.sourcesContent||[])[b],f(k,n,b)}function go(d){R4.call(this||HS,d)}function IS(d){return[]}function hL(d,c){c=void 0===c?{}:c;var h,f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return h=c.morphicDB||lf.MorphicDB.default,b.yield(h.load("part","string"===typeof d?d:d.name,c,"string"===typeof d?void 0:d),2);case 2:f=b.yieldResult;if(!f.isWindow||!f.targetMorph){b.jumpTo(3);break}k=f.targetMorph;return b.yield(lf.ensureCommitInfo(f.metadata&&
f.metadata.commit),4);case 4:(n=b.yieldResult)&&k.changeMetaData("commit",n,!0,!1);case 3:return b.return(f)}})}function JS(d,c,h,f,k,n){var b,e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:A.setCatchFinallyBlocks(2);if(d.isMorph){A.jumpTo(4);break}if("function"!==typeof d.beforePublish){A.jumpTo(5);break}return A.yield(d.beforePublish(c,d),5);case 4:b=[],d.withAllSubmorphsDo(function(E){"function"===typeof E.beforePublish&&b.push(E)}),
e=$jscomp.makeIterator(b),m=e.next();case 8:if(m.done){A.jumpTo(5);break}a=m.value;return A.yield(a.beforePublish(),9);case 9:m=e.next();A.jumpTo(8);break;case 5:A.leaveTryBlock(3);break;case 2:g=A.enterCatchBlock(),l="Error in beforePublish of "+d+"\n"+g.stack,"function"===typeof d.world&&d.world()?d.world().logError(Error(l)):console.error(l);case 3:return r=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},h),v=h.morphicDB||lf.MorphicDB.default,A.yield(v.snapshotAndCommit("part",
c,d,r,f,k,n),12);case 12:return y=A.yieldResult,lf.emit("lively.partsbin/partpublished",y),A.return(y)}})}function uG(d,c){c=void 0===c?{}:c;var h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa,oa,hb,Cb,va,ma,ua,Ma,Lb,ic,Vb,jc,Pc,Rb,zd,ld,la,Da,Pa,yb,ac,Od,Md;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wc){switch(Wc.nextAddress){case 1:return h=c,f=void 0===h.showPublishDialog?!0:h.showPublishDialog,k=void 0===h.notifications?!0:h.notifications,n=void 0===h.loadingIndicator?
!0:h.loadingIndicator,b=void 0===h.preferWindow?!0:h.preferWindow,a=d,g=d.world()||d.env.world,l=d.name,r=[],v="",Wc.yield(lf.ensureCommitInfo(lf.Path("metadata.commit").get(d)||lf.Path("metadata.commit").get(a)),2);case 2:y=Wc.yieldResult;A=c.morphicDB||lf.MorphicDB.default;y||(y={type:"part",name:d.name,author:g.getCurrentUser(),tags:[],description:"no description"});if(!f){y&&(E=y,l=E.name,r=E.tags,v=E.description);Wc.jumpTo(3);break}F=g;H=F.openPrompt;return Wc.yield(lf.loadPart("publish part dialog"),
5);case 5:return Wc.yield(H.call(F,Wc.yieldResult,{part:d}),4);case 4:I=Wc.yieldResult;M=I.db;N=I.commit;if(!N)return Wc.return(null);M&&(c.morphicDB=A=M);X=N;l=X.name;r=X.tags;v=X.description;case 3:if(!n){Wc.jumpTo(6);break}W=$world.execCommand("open loading indicator","saving "+l+"...");return Wc.yield(lf.promise.delay(80),6);case 6:Wc.setCatchFinallyBlocks(8,9);ea="HEAD";Aa=y?y.name:d.name;if(Aa===l){Ka=y?y._id:void 0;Wc.jumpTo(11);break}return Wc.yield(A.exists("part",l),12);case 12:K=Wc.yieldResult;
aa=K.exists;T=K.commitId;if(!aa){Wc.jumpTo(13);break}return Wc.yield(g.confirm('A part "'+l+'" already exists, overwrite?'),14);case 14:U=Wc.yieldResult;if(!U)return Wc.return(null);Ka=T;case 13:a.name=l;case 11:return b&&!d.isWindow&&(pa=d.getWindow())&&pa.targetMorph===d&&(d=pa,m=pa.metadata,e=!0),fa={author:d.world().getCurrentUser(),message:"published",tags:r,description:v},Wc.yield(lf.savePart(d,l,c,fa,ea,Ka),15);case 15:oa=Wc.yieldResult;if(!e){Wc.jumpTo(16);break}if(a.metadata)return Cb=a.metadata,
Wc.yield(lf.ensureCommitInfo(pa.metadata.commit),20);hb=a;return Wc.yield(lf.ensureCommitInfo(pa.metadata.commit),19);case 19:hb.metadata={commit:Wc.yieldResult};Wc.jumpTo(18);break;case 20:Cb.commit=Wc.yieldResult;case 18:pa.metadata=m;case 16:return k&&d.setStatusMessage("saved part "+l),Wc.return(oa);case 9:Wc.enterFinallyBlock();W&&W.remove();Wc.leaveFinallyBlock(0);break;case 8:va=Wc.enterCatchBlock();ma=$jscomp.makeIterator(va.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||
[]);ma.next();ma.next();ua=ma.next().value;Ma=ma.next().value;if(!ua||!Ma){Wc.jumpTo(21);break}Lb=$jscomp;ic=Lb.makeIterator;return Wc.yield(A.log(Ma,1,!0),22);case 22:return Vb=ic.call(Lb,Wc.yieldResult),Pc=jc=Vb.next().value,Rb=Pc.author,zd=Rb.name,ld=Pc.timestamp,la='The current version of part "'+l+'" is not the most recent!\nA newer version by '+(zd+" was saved on ")+(lf.date.format(new Date(ld),"yyyy-mm-dd HH:MM")+". Overwrite?"),Wc.yield(g.confirm(["Version Mismatch\n",{},la,{fontWeight:"normal",
fontSize:16}]),23);case 23:Da=Wc.yieldResult;if(!Da)return Wc.return(null);Pa=lf.obj.dissoc(jc,["preview"]);a.changeMetaData("commit",Pa,!0,!1);return Wc.return(uG(a,Object.assign({},c,{morphicDB:A,showPublishDialog:!1})));case 21:yb=$jscomp.makeIterator(va.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[]);yb.next();yb.next();ac=yb.next().value;if(!ac){Wc.jumpTo(24);break}Od="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";
return Wc.yield(g.confirm(Od),25);case 25:Md=Wc.yieldResult;if(!Md)return Wc.return(null);a.changeMetaData("commit",null,!0,!1);return Wc.return(uG(a,Object.assign({},c,{morphicDB:A,showPublishDialog:!1})));case 24:throw console.error(va),k&&g.logError("Error saving part: "+va),va;}})}function KS(d){d=void 0===d?{}:d;var c,h,f,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return c=d.morphicDB||lf.MorphicDB.default,e.yield(c.latestCommits("part"),2);if(3!=
e.nextAddress)return h=e.yieldResult,f=h.map(function(m){return{isListItem:!0,string:m.name,value:m}}),e.yield($world.filterableListPrompt("Select part to load",f,{fuzzy:!0}),3);k=e.yieldResult;n=$jscomp.makeIterator(k.selected);b=n.next().value;return e.return(b?lf.loadPart(b):null)})}function LS(d){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield($world.prompt("Enter part name to publish object under",{input:d.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),
2);c=h.yieldResult;if(!c)throw"canceled";return h.return(lf.saveObjectToPartsbinFolder(d,c,{previewWidth:d.width,previewHeight:d.height}))})}function MS(d,c,h){h=void 0===h?{}:h;var f,k,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:h=Object.assign({preferWindow:!0},h);h.preferWindow&&(d=(f=d.getWindow())&&f.targetMorph===d?f:d);r.setCatchFinallyBlocks(2);if(d.isMorph){r.jumpTo(4);break}if("function"!==typeof d.beforePublish){r.jumpTo(5);
break}return r.yield(d.beforePublish(c,d),5);case 4:k=[],d.withAllSubmorphsDo(function(v){"function"===typeof v.beforePublish&&k.push(v)}),n=$jscomp.makeIterator(k),b=n.next();case 8:if(b.done){r.jumpTo(5);break}e=b.value;return r.yield(e.beforePublish(),9);case 9:b=n.next();r.jumpTo(8);break;case 5:r.leaveTryBlock(3);break;case 2:m=r.enterCatchBlock(),a="Error in beforePublish of "+d+"\n"+m.stack,"function"===typeof d.world&&d.world()?d.world().logError(Error(a)):console.error(a);case 3:return r.yield(lf.resource(h.partsbinFolder).ensureExistance(),
12);case 12:return g=lf.resource(h.partsbinFolder).join(c+".json"),r.yield(lf.createMorphSnapshot(d,h),13);case 13:return l=r.yieldResult,r.yield(g.write(JSON.stringify(l,null,2)),14);case 14:return r.return({partName:c,url:g.url})}})}function vG(d,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(lf.loadPart(d,c))})}function NS(d){var c={type:"input",extent:lf.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:lf.Rectangle.inset(4,4),border:{color:lf.Color.gray,
width:1}};return Object.assign(lf.morph({extent:lf.pt(420,24),layout:new lf.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},c,{name:"name input",placeholder:"name"}),Object.assign({},c,{name:"type input",placeholder:"type"}),Object.assign({},c,{name:"timestamp input",placeholder:"timestamp"}),{layout:new lf.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},c,{name:"author.name input",placeholder:"author name"}),Object.assign({},c,{name:"author.email input",
placeholder:"author email"}),Object.assign({},c,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},c,{name:"tags input",placeholder:"tags"}),Object.assign({},c,{height:70,name:"description input",type:"text"}),Object.assign({},c,{height:70,name:"message input",type:"text"}),Object.assign({},c,{height:70,name:"metadata input",type:"text"}),{layout:new lf.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",
name:"cancel button",label:"Cancel"}]}],name:"commit editor",get ui(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),
okButton:this.get("ok button")}},set commit(h){this._commit=h;var f=h.type,k=h.timestamp,n=h.author,b=h.tags,e=h.description,m=h.metadata,a=this.ui,g=a.typeInput,l=a.timestampInput,r=a.authorNameInput,v=a.authorEmailInput,y=a.authorRealmInput,A=a.tagsInput,E=a.descriptionInput,F=a.messageInput,H=a.metadataInput;a.nameInput.input=h.name;g.input=f;l.input=String(new Date(k));r.input=n.name;v.input=n.email;y.input=n.realm;A.input=b.join(" ");E.textString=e;F.textString="";H.textString=m?JSON.stringify(m,
null,2):""},get commit(){var h=this._commit;if(!h)throw Error("commit editor does not have a _commit object");var f=this.ui,k=f.authorNameInput,n=f.authorEmailInput,b=f.authorRealmInput,e=f.tagsInput,m=f.descriptionInput,a=f.messageInput,g=f.metadataInput,l=f.nameInput.input;f=f.typeInput.input;if(h.name!==l)throw Error("name does not match _commit.name: "+l+" vs "+h.name);if(h.type!==f)throw Error("type does not match _commit.type: "+f+" vs "+h.type);h.author.name=k.input;h.author.email=n.input;
h.author.realm=b.input;h.tags=e.input.split(" ").map(function(r){return r.trim()}).filter(Boolean);h.description=m.textString;h.message=a.textString;h.metadata=g.textString?JSON.parse(g.textString):null;return h},onLoad:function(){lf.connect(this.ui.okButton,"fire",this,"accept");lf.connect(this.ui.cancelButton,"fire",this,"cancel")},accept:function(){},cancel:function(){}}),d)}function iL(d,c,h){var f,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){f=d.isResource?d:sg.resource(System.decanonicalize(d));
k=f.nameWithoutExt();return n.return(sg.loadWorldFromDB(k,void 0,c,h))})}function jL(d,c,h){var f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return f=sg.MorphicDB.default,b.yield(f.load("world",void 0,h,d),2);k=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";h=Object.assign({pathForBrowserHistory:sg.pathForBrowserHistory(k.name,n)},h);return b.return(sg.loadWorld(k,c,h))})}function kL(d,c,h,f){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return k=sg.MorphicDB.default,e.yield(k.load("world",d,f,void 0,c||void 0),2);n=e.yieldResult;b="undefined"!==typeof document?document.location.search:"";f=Object.assign({pathForBrowserHistory:sg.pathForBrowserHistory(d,b)},f);return e.return(sg.loadWorld(n,h,f))})}function lL(d,c,h){h=void 0===h?{}:h;var f,k,n,b,e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:f=h;k=f.env;n=void 0===f.verbose?!0:f.verbose;b=void 0===f.localconfig?
!0:f.localconfig;e=void 0===f.l2l?!0:f.l2l;m=void 0===f.shell?!0:f.shell;a=void 0===f.worldLoadDialog?!1:f.worldLoadDialog;g=void 0===f.showUserFlap?"undefined"===typeof d.showsUserFlap?!0:d.showsUserFlap:f.showUserFlap;k=k||(c?c.env:sg.MorphicEnv.default());l=k.domEnv.document||document;r=l.getElementById("dom-loading-indicator");E.setCatchFinallyBlocks(2,3);if(!(v=e)){E.jumpTo(5);break}return E.yield(sg.setupLively2Lively(d),6);case 6:v=E.yieldResult;case 5:y=v;if(!y||!m){E.jumpTo(7);break}return E.yield(sg.setupLivelyShell({l2lClient:y}),
7);case 7:n&&r&&(r.style.display="");if(!b){E.jumpTo(9);break}return E.yield(sg.loadLocalConfig(),10);case 10:case 9:return E.yield(k.setWorld(d),11);case 11:a&&d.execCommand("load world");h.pathForBrowserHistory&&window.history.pushState({},"lively.next",h.pathForBrowserHistory);d.showsUserFlap=g;if(c)c.onUnload();sg.emit("world/loaded",d);return E.return(d);case 3:E.enterFinallyBlock();r&&(r.style.display="none");E.leaveFinallyBlock(0);break;case 2:A=E.enterCatchBlock();console.error("Error loading world: ",
A);if(!c){E.jumpTo(12);break}return E.yield(k.setWorld(c),13);case 13:c.showError(A);case 12:throw A;}})}function xD(d,c){var h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa,oa,hb,Cb,va,ma,ua,Ma,Lb,ic,Vb,jc,Pc,Rb,zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ld){switch(ld.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),h=d.name,f=[],k="",ld.yield(sg.ensureCommitInfo(sg.Path("metadata.commit").get(d)),
2);case 2:n=ld.yieldResult;b=c.morphicdb||sg.MorphicDB.default;e="";m="db";if(!c.showSaveDialog){n&&(a=n,h=a.name,f=a.tags,k=a.description);ld.jumpTo(3);break}return ld.yield(sg.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return g=ld.yieldResult,ld.yield(d.openPrompt(g,{targetWorld:d}),5);case 5:if(l=ld.yieldResult,r=l.commit,v=l.db,y=l.mode,A=l.filePath,v&&(b=v),m=y,e=A,E=r||{},h=E.name,f=E.tags,k=E.description,!h)return ld.return(null);case 3:return F=$world.execCommand("open loading indicator",
"saving "+h+"..."),ld.yield(sg.promise.delay(80),6);case 6:if("json"!=m){ld.jumpTo(7);break}H=sg.resource(System.baseURL).join(e).withRelativePartsResolved();return ld.yield(H.exists(),8);case 8:return ld.yieldResult?(F.visible=!1,ld.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},H.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):
ld.yield(H.ensureExistance(),10);case 12:I=ld.yieldResult;if(!I)return F.remove(),ld.return();F.visible=!0;case 10:return d.changeMetaData("file",e,!1,!1),M=H,N=M.writeJson,ld.yield(sg.createMorphSnapshot(d),14);case 14:return ld.yield(N.call(M,ld.yieldResult),13);case 13:return sg.resource(System.baseURL).join("/subservers/ComponentBrowser/refresh").join(h).read(),F.remove(),d.setStatusMessage("saved world "+h+" to file: "+H.url),ld.return();case 7:ld.setCatchFinallyBlocks(15,16);X={previewWidth:200,
previewHeight:200,previewType:"png",ignoreMorphs:[F]};W="HEAD";ea=n?n.name:d.name;if(!c.useExpectedCommit){ld.jumpTo(18);break}if(ea===h||!c.confirmOverwrite){Aa=n?n._id:void 0;ld.jumpTo(18);break}return ld.yield(b.exists("world",h),20);case 20:Ka=ld.yieldResult;K=Ka.exists;aa=Ka.commitId;if(!K){ld.jumpTo(21);break}return ld.yield(d.confirm('A world "'+h+'" already exists, overwrite?',{styleClasses:["Halo"],fill:sg.Color.rgba(0,0,0,.8)}),22);case 22:T=ld.yieldResult;if(!T)return ld.return(null);Aa=
aa;case 21:d.name=h;case 18:return U={author:d.getCurrentUser(),message:"world save",tags:f,description:k},ld.yield(b.snapshotAndCommit("world",h,d,X,U,W,Aa),23);case 23:return pa=ld.yieldResult,window.history&&(fa=sg.pathForBrowserHistory(h),window.history.pushState({},"lively.next",fa)),sg.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),d.setStatusMessage("saved world "+h),d.get("world-list")&&d.get("world-list").onWorldSaved(h),ld.return(pa);case 16:ld.enterFinallyBlock();
F.remove();ld.leaveFinallyBlock(0);break;case 15:oa=ld.enterCatchBlock();if(oa.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return ld.return(xD(d,Object.assign({},c,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));hb=$jscomp.makeIterator(oa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);hb.next();hb.next();Cb=hb.next().value;va=hb.next().value;if(!Cb||!va){ld.jumpTo(24);break}ma=$jscomp;
ua=ma.makeIterator;return ld.yield(b.log(va,1,!0),25);case 25:Ma=ua.call(ma,ld.yieldResult);Lb=Ma.next().value;ic=!0;if(!c.confirmOverwrite){ld.jumpTo(26);break}Vb=Lb;jc=Vb.author;Pc=jc.name;Rb=Vb.timestamp;zd="The current version of world "+h+" is not the most recent!\nA newer version by "+(Pc+" was saved on ")+(sg.date.format(new Date(Rb),"yyyy-mm-dd HH:MM")+". Overwrite?");return ld.yield(d.confirm(["Version Conflict\n",null,zd,{fontSize:16,fontWeight:"normal"}],{width:600}),27);case 27:ic=ld.yieldResult;
case 26:if(!ic)return ld.return(null);d.changeMetaData("commit",sg.obj.dissoc(Lb,["preview"]),!0,!1);return ld.return(xD(d,Object.assign({},c,{morphicdb:b,showSaveDialog:!1})));case 24:console.error(oa),d.logError("Error saving world: "+oa),ld.jumpTo(16)}})}function OS(d,c){var h=d.row;d=d.column;var f=c.row;c=c.column;return h<f?-2:h===f?d<c?-1:d===c?0:1:2}function pv(d,c){return 0>Vl.comparePosition(d,c)}function yD(d,c){return 0>=Vl.comparePosition(d,c)}function qv(d,c){return 0===Vl.comparePosition(d,
c)}function zD(d,c){return Vl.lessPosition(d,c)?d:c}function AD(d,c){return Vl.lessPosition(d,c)?c:d}function PS(d,c){if(!d||!c)return d==c;var h=!0,f={},k;for(k in d)if(f[k]=!0,!c.hasOwnProperty(k)||d[k]!==c[k]){h=!1;break}if(h)for(var n in c)if(!(f[n]||d.hasOwnProperty(n)&&d[n]===c[n])){h=!1;break}return h}function mL(d,c,h,f,k){k=void 0===k?"":k;var n="string"!==typeof d,b="string"!==typeof h;if(n||b){var e=[];n?e.push(d,c):e.push(d+k,c);b?e.push(h,f):e.push(h+k,f);return e}return!c&&!f||c==f?
[d+k+h,c]:c&&f?Jh.shallowEquals(c,f)?[d+k+h,c]:[d+k,c,h,f]:[d+k,c,h,f]}function nL(d,c){c=void 0===c?"":c;if(2>=d.length)return d;var h=[],f=$jscomp.makeIterator(d),k=f.next().value,n=f.next().value;for(f=2;f<d.length;f+=2)n=Jh.concatAttributePair(k,n,d[f],d[f+1],c),2>=n.length?(k=n[0],n=n[1]):(h.push.apply(h,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),k=n.next().value,n=n.next().value);h.push(k,n);return h}function oL(d,c){for(var h=0,f=0;f<d.length;f+=2){var k=
d[f],n=h+("string"===typeof k?k.length:1);if(n<c)h=n;else{if(h===c)return[d.slice(0,f),d.slice(f)];if(n===c)return[d.slice(0,f+2),d.slice(f+2)];if("string"!==typeof k)throw Error("Assuming text is a string for splitting it, got "+k+" instead!");var b=d[f+1],e=c-h;n=[].concat($jscomp.arrayFromIterable(d.slice(0,f)),[k.slice(0,e),b]);d=k.length===e?d.slice(f+2):[k.slice(c-h),b].concat($jscomp.arrayFromIterable(d.slice(f+2)));return[n,d]}}return[d,[]]}function pL(d,c){var h=d;d=0;for(var f=[],k=0;k<
c.length;k++){var n=$jscomp.makeIterator(Jh.splitTextAndAttributesAt(h,c[k]-d));h=n.next().value;n=n.next().value;f.push(h);for(var b=0;b<h.length;b+=2)d+="string"===typeof h[b]?h[b].length:1;h=n}f.push(h);return f}function qL(d,c,h){h=void 0===h?!1:h;if(!d.length||2===d.length&&""==d[0])return h?c:c.slice();if(!c.length||2===c.length&&""==c[0])return h?d:d.slice();d=h?d:d.slice();for(h=0;h<c.length;h+=2)d.push(c[h],c[h+1]);return d}function rL(d,c,h){var f=c.start;c=c.end;if(Jh.eqPosition(f,c))return null;
Jh.lessPosition(c,f)&&(c=$jscomp.makeIterator([c,f]),f=c.next().value,c=c.next().value);var k=f;f=k.row;var n=k.column;k=c;c=k.row;k=k.column;var b=d.getLine(f),e=b.textAndAttributes,m=0;n=$jscomp.makeIterator(Jh.splitTextAndAttributesAt(e,n));d=n.next().value;n=n.next().value;e.length=0;Jh.textAndAttributesDo(d,function(l,r){m+="string"===typeof l?l.length:1;e.push(l,r)});if(f===c){var a=$jscomp.makeIterator(Jh.splitTextAndAttributesAt(n,k-m));n=a.next().value;a=a.next().value}Jh.textAndAttributesDo(n,
function(l,r){return e.push(l,h(b,r))});f===c&&Jh.textAndAttributesDo(a,function(l,r){return e.push(l,r)});b._textAttributes=null;b.textAndAttributes=Jh.joinTextAttributes(e);if(f!==c){a={};for(f+=1;f<c;a={$jscomp$loop$prop$textAndAttributes$1314$2389:a.$jscomp$loop$prop$textAndAttributes$1314$2389},f++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1314$2389=b.textAndAttributes,d=a.$jscomp$loop$prop$textAndAttributes$1314$2389.slice(),a.$jscomp$loop$prop$textAndAttributes$1314$2389.length=
0,Jh.textAndAttributesDo(d,function(l){return function(r,v){return l.$jscomp$loop$prop$textAndAttributes$1314$2389.push(r,h(b,v))}}(a)),b._textAttributes=null,b.textAndAttributes=Jh.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1314$2389);b=b.nextLine();var g=b.textAndAttributes;f=$jscomp.makeIterator(Jh.splitTextAndAttributesAt(g,k));a=f.next().value;f=f.next().value;g.length=0;Jh.textAndAttributesDo(a,function(l,r){return g.push(l,h(b,r))});Jh.textAndAttributesDo(f,function(l,r){return g.push(l,
r)});b._textAttributes=null;b.textAndAttributes=Jh.joinTextAttributes(g)}}function sL(d,c){var h=d.column;d=d.row;var f=[],k=[];c=$jscomp.makeIterator(Jh.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var b=0;b<n.length;b+=2){var e=n[b];e=h+("string"===typeof e?e.length:1);f.push({start:{row:d,column:h},end:{row:d,column:e}});k.push(n[b],n[b+1]);h=e}h=0;d++}return{ranges:f,textAndAttributes:k}}function wG(d,c){c=void 0===c?"\n":c;if(!d.length)return[];for(var h=
[],f=[],k=0;k<d.length;k+=2){var n=d[k],b=d[k+1];if("string"!==typeof n)f.push(n,b);else for(;n.length;){var e=n.indexOf(c);if(-1===e){f.push(n,b);break}0<e&&f.push(n.slice(0,e),b);h.push(f);n=n.slice(e+1);f=[]}}f.length?h.push(f):(f=$jscomp.makeIterator(d.slice(-2)),d=f.next().value,f=f.next().value,"string"===typeof d&&d.endsWith(c)&&h.push(["",f]));return h}function tL(d,c){c=void 0===c?d.textAndAttributesInRange(d.selection.range):c;var h=new d.constructor(Object.assign({},d.defaultTextStyle,
{width:d.width,textAndAttributes:c}));c=h.textRenderer.directRenderTextLayerFn(h);d=h.textRenderer.directRenderLineFn(h);c=c();var f=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;f&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=f.whiteSpace,c.style.overflowWrap=f.overflowWrap,c.style.wordBreak=f.wordBreak,c.style.minWidth=f.minWidth,c.parentNode.removeChild(c));h=$jscomp.makeIterator(h.document.lines);for(f=h.next();!f.done;f=h.next())c.appendChild(d(f.value));
return c.outerHTML}function uL(d){if(d&&d.isListItem&&"string"===typeof d.string)return d;if(!d||!d.isListItem)return{isListItem:!0,string:String(d),value:d};var c=d.string||d.label||"no item.string";d.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(h,f){return 0==f%2?String(h):""}).join(""):String(c):String(c);return d}function vL(d){var c=d.filePath,h=d.worldName,f=d.commit,k=d.loadingIndicator,n=d.progress,b=void 0===d.logError?function(N){return console.log(N)}:d.logError,e,m,a,
g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.setCatchFinallyBlocks(2),e=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),n.opacity=0,n.hasFixedPosition=!0,n.openInWorld(),n.bottomCenter=
k.topCenter,N.yield(Ve.polyfills(),4);case 4:return m=$world.env,Ve.doBootstrap?N.yield(Ve.bootstrapLivelySystem(k,n,e),8):N.yield(Ve.fastPrepLivelySystem(k),7);case 7:N.jumpTo(6);break;case 8:case 6:return k.label="Loading lively.2lively...",N.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Ve.askBeforeQuit&&window.addEventListener("beforeunload",function(X){return X.returnValue="Really?"},!0);if("dynamic"!=e["lively.morphic"]||Ve.fastLoad){a=lively.morphic;N.jumpTo(10);break}k.label=
"Loading lively.morphic...";return N.yield(lively.modules.importPackage("lively.morphic"),11);case 11:a=N.yieldResult,n.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:k.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;g=document.location;N.setCatchFinallyBlocks(12);l={verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(f)return N.yield(a.World.loadFromCommit(f,void 0,
Object.assign({},l,{browserURL:"/worlds/load?name="+f.name})),15);if(h)return"__newWorld__"==h?Object.values(e).every(function(X){return"frozen"==X})||Ve.fastLoad?N.yield(lively.modules.module("lively.ide/world.js").recorder,27):N.yield(lively.modules.System.import("lively.ide/world.js"),25):N.yield(a.World.loadFromDB(h,void 0,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+h.replace(/\.json($|\?)/,"")})),15);if(!c){N.jumpTo(15);break}return N.yield(a.World.loadFromResource(Ve.resource(System.baseURL).join(c),
void 0,Object.assign({},l,{browserURL:"/worlds/load?file="+c})),15);case 25:return y=N.yieldResult,r=y.LivelyWorld,N.yield(lively.modules.System.import("lively.morphic/world-loading.js"),26);case 26:A=N.yieldResult;v=A.loadWorld;N.jumpTo(24);break;case 27:return E=N.yieldResult,r=E.LivelyWorld,N.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,28);case 28:F=N.yieldResult,v=F.loadWorld;case 24:return N.yield(v(new r({openNewProjectPrompt:!0})),15);case 15:N.leaveTryBlock(13,
2);break;case 12:H=N.enterCatchBlock(2),window.__loadError__=H;case 13:return window.addEventListener("popstate",function(X){document.location==g&&document.location.reload()}),k.remove(),Ve.worldLoaded=!0,lively.modules.removeHook("fetch","logFetch"),N.yield(m.renderer.worldMorph.whenRendered(),31);case 31:"dynamic"!=e["lively.morphic"]||Ve.fastLoad||(m.renderer.clear(),m.fontMetric.uninstall(),m.eventDispatcher.uninstall());N.leaveTryBlock(0);break;case 2:throw I=N.enterCatchBlock(),I.originalErr&&
(I=I.originalErr),M=I.message,I.stack!==I.message&&(M+=I.stack.includes(I.message)?I.stack.replace(I.message,"\n"):I.stack),b(M),I;}})}Ba({$:ph,B:on,D:tm,E:um,G:ge,H:Sa,J:ad,K:yd,M:Db,N:pc,O:Oq,P:$h,Q:Q,R:Ep,S:po,T:oc,V:pt,W:LJ,X:kc,Y:js,_:wF,a:uF,a2:Cl,a3:Ii,aF:Wu,aT:vm,aU:gr,aY:Dp,aZ:er,ac:vG,ad:hL,ae:xD,ao:qa,ar:Zk,as:dm,at:cc,av:fr,b:Sl,bD:ln,bH:$q,bI:ya,bN:rq,bQ:ca,bR:Su,bU:Ef,bV:Al,bZ:function(d){d=void 0===d?document.body:d;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Fs.default().world||
(c=window.$world=window.$$world=new ty({name:S4.name,extent:Ii(window.innerWidth,window.innerHeight)}),Fs.default().setWorldRenderedOn(c,d,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var f=pw(S4,{reinitializeIds:function(k){return k}});if(f.isWorld)f.position=Ii(0,0),Fs.default().setWorldRenderedOn(f,d,window.prerenderNode),"elastic"===f.resizePolicy&&f.execCommand("resize to fit window");else try{d!=document.body?(new window.ResizeObserver(function(k){return f.execCommand("resize on client",
k[0])})).observe(d):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return f.execCommand("resize on client")},f.openInWorld(Ii(0,0)),f.execCommand("resize on client",d)}catch(k){f.position=Ii(0,0)}});h.jumpToEnd()})},bq:Ql,bs:en,bv:pq,bz:ka,c:Hx,d:Rl,e:Iu,g:Rm,h:gA,i:ha,j:Lh,k:mw,l:tF,m:Pz,n:mj,o:dc,p:Ri,q:hc,r:Tj,t:Em,u:fb,v:sl,w:Hc,x:Ex,y:$r,z:es});var BD=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");BD.evalJS=qi;BD.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;
var Qj=function(d,c,h,f){this.originalFunc=d;this.varMapping=c||{};this.setFuncSource(h||d);this.setFuncProperties(d||f)};Qj.fromFunction=function(d,c){return new this(d,c||{})};Qj.fromSource=function(d,c){return new this(null,c||{},d)};Qj.prototype.setFuncSource=function(d){return this.source=d="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(d):
String(d)};Qj.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};Qj.prototype.hasFuncSource=function(){return this.source&&!0};Qj.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};Qj.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};Qj.prototype.setFuncProperties=function(d){var c=this.getFuncProperties(),h;for(h in d)d.hasOwnProperty(h)&&(c[h]=d[h])};Qj.prototype.lookup=function(d){return this.varMapping[d]};
Qj.prototype.parameterNames=function(d){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(d).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(d=BD.parameterRegex.exec(d))?(d[1]||d[2]||"").split(",").map(function(c){return c.trim()}):[]};Qj.prototype.firstParameter=function(d){return this.parameterNames(d)[0]||null};Qj.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),
this.originalFunc)};Qj.prototype.recreateFuncFromSource=function(d,c){c=[];var h="$super"===this.firstParameter(d);for(f in this.varMapping)this.varMapping.hasOwnProperty(f)&&"this"!=f&&c.push("var "+f+" = this.varMapping."+f+";\n");var f="";0<c.length&&(f+=c.join("\n"));h&&(f+="(function superWrapperForClosure() { return ");f+="("+d+")";h&&(f+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var k=BD.evalJS.call(this,f)||this.couldNotCreateFunc(f);this.addFuncProperties(k);
return this.originalFunc=k}catch(n){throw d="Cannot create function "+n+" src: "+f,console.error(d),Error(d);}};Qj.prototype.addFuncProperties=function(d){var c=this.getFuncProperties(),h;for(h in c)c.hasOwnProperty(h)&&(d[h]=c[h]);this.addClosureInformation(d)};Qj.prototype.couldNotCreateFunc=function(d){var c="Could not recreate closure from source: \n"+d;console.error(c);return function(){throw Error(c);}};Qj.prototype.asFunction=function(){return this.recreateFunc()};Qj.prototype.addClosureInformation=
function(d){d.hasLivelyClosure=!0;d.livelyClosure=this;return d};$jscomp.global.Object.defineProperties(Qj.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Ba("bx",Qj);BD.Closure=Qj;BD.default=Qj;var RA=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");RA.groupBy=Sa;var Kn=function(){};Kn.fromArray=function(d,c,h){for(var f=new RA.Group,k=0,n=d.length;k<n;k++){var b=c.call(h,
d[k],k);f[b]||(f[b]=[]);f[b].push(d[k])}return f};Kn.prototype.toArray=function(){return this.reduceGroups(function(d,c,h){return d.concat([h])},[])};Kn.prototype.forEach=function(d,c){var h=this;Object.keys(h).forEach(function(f){h[f].forEach(d.bind(c,f))});return h};Kn.prototype.forEachGroup=function(d,c){var h=this;Object.keys(h).forEach(function(f){d.call(c,f,h[f])});return h};Kn.prototype.map=function(d,c){var h=new RA.Group;this.forEachGroup(function(f,k){h[f]=k.map(d.bind(c,f))});return h};
Kn.prototype.mapGroups=function(d,c){var h=new RA.Group;this.forEachGroup(function(f,k){h[f]=d.call(c,f,k)});return h};Kn.prototype.keys=function(){return Object.keys(this)};Kn.prototype.reduceGroups=function(d,c,h){this.forEachGroup(function(f,k){c=d.call(h,c,f,k)});return c};Kn.prototype.count=function(){return this.reduceGroups(function(d,c,h){d[c]=h.length;return d},{})};$jscomp.global.Object.defineProperties(Kn,{by:{configurable:!0,enumerable:!0,get:function(){return RA.groupBy}}});RA.Group=
Kn;RA.default=Kn;var Sb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Sb.range=dc;Sb.withN=Xb;Sb.genN=Xd;Sb.filter=ad;Sb.findAndGet=Nd;Sb.filterByKey=dd;Sb.grep=Lc;Sb.mask=rd;Sb.reject=Gd;Sb.rejectByKey=ke;Sb.without=Kd;Sb.withoutAll=Hc;Sb.uniq=fb;Sb.uniqBy=Db;Sb.uniqByKey=mc;Sb.compact=hc;Sb.mutableCompact=Tc;Sb.forEach=Ld;Sb.zip=oc;Sb.flatten=pc;Sb.flatmap=Nb;Sb.interpose=Dc;Sb.delimWith=Vc;Sb.map=Hd;Sb.invoke=Id;Sb.pluck=rb;Sb.reduce=Hb;Sb.reduceRight=Mc;Sb.some=qb;Sb.every=tb;Sb.equals=
eb;Sb.deepEquals=ob;Sb.isSorted=wb;Sb.sort=cb;Sb.sortBy=Oa;Sb.sortByKey=Gb;Sb.reverse=sc;Sb.reversed=vc;Sb.reMatches=fc;Sb.first=rc;Sb.last=Q;Sb.intersect=ha;Sb.union=Ga;Sb.pushAt=La;Sb.removeAt=Yb;Sb.remove=kc;Sb.pushAll=Ua;Sb.pushAllAt=ec;Sb.pushIfNotIncluded=ge;Sb.replaceAt=ee;Sb.clear=ed;Sb.isSubset=ab;Sb.doAndContinue=Rc;Sb.nestedDelay=pb;Sb.forEachShowingProgress=bd;Sb.swap=od;Sb.rotate=lb;Sb.groupBy=Sa;Sb.groupByKey=qc;Sb.partition=le;Sb.batchify=Zd;Sb.toTuples=Fe;Sb.combinationsPick=Oc;Sb.combinations=
te;Sb.take=md;Sb.drop=Eb;Sb.takeWhile=xa;Sb.dropWhile=Ca;Sb.shuffle=Mb;Sb.max=P;Sb.min=za;Sb.sum=Ta;Sb.count=Fb;Sb.size=Cc;Sb.histogram=Uc;Sb.clone=he;Sb.toArray=we;Sb.each=nf;Sb.all=yd;Sb.any=Ce;Sb.collect=wf;Sb.findAll=Ie;Sb.inject=Fg;Sb.mapAsyncSeries=Rf;Sb.mapAsync=Jc;Sb.objectEquals=ug;Sb.delay=qd;Sb.once=Al;Sb.NullFunction=qg;Sb.Group=Kn;Sb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Sb.features={from:!!Array.from,filter:!!Array.prototype.filter,
find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Sb.from=Sb.features.from?Array.from:function(d){if(!d)return[];if(Array.isArray(d))return d;if(d.toArray)return d.toArray();for(var c=d.length,h=Array(c);c--;)h[c]=d[c];return h};Sb.detect=Sb.features.find?function(d,c,h){return d.find(c,h)}:function(d,c,h){for(var f,k=0,n=d.length;k<n;k++)if(f=d[k],c.call(h,f,k))return f};Sb.findIndex=Sb.features.findIndex?function(d,c,h){return d.findIndex(c,h)}:
function(d,c,h){var f=-1;return d.find(function(k,n){f=n;return c.call(k,h)})?f:-1};Sb.isArray=Array.isArray;Sb.includes=Sb.features.includes?function(d,c){return d.includes(c)}:function(d,c){return-1!==d.indexOf(c)};Sb.include=Sb.includes;Sb.permutations=function(){function d(c,h){return c.length?Sb.flatmap(c,function(f,k){return d(c.slice(0,k).concat(c.slice(k+1)),h.concat([f]))}):[h]}return function(c){return d(c,[])}}();Sb.features.from||(Array.from=Sb.from);Sb.features.filter||(Array.prototype.filter=
function(d,c){return Sb.filter(this,d,c)});Sb.features.find||(Array.prototype.find=function(d,c){return Sb.detect(this,d,c)});Sb.features.findIndex||(Array.prototype.findIndex=function(d,c){return Sb.findIndex(this,d,c)});Sb.features.includes||(Array.prototype.includes=function(d){return Sb.includes(this,d)});var QS=Sb.from,RS=Sb.detect,SS=Sb.findIndex,TS=Ba("f",Sb.isArray),US=Sb.includes,VS=Sb.include,WS=Sb.permutations;Sb.range=dc;Sb.range=dc;Sb.from=QS;Sb.from=QS;Sb.withN=Xb;Sb.withN=Xb;Sb.genN=
Xd;Sb.genN=Xd;Sb.filter=ad;Sb.filter=ad;Sb.detect=RS;Sb.detect=RS;Sb.findIndex=SS;Sb.findIndex=SS;Sb.findAndGet=Nd;Sb.findAndGet=Nd;Sb.filterByKey=dd;Sb.filterByKey=dd;Sb.grep=Lc;Sb.grep=Lc;Sb.mask=rd;Sb.mask=rd;Sb.reject=Gd;Sb.reject=Gd;Sb.rejectByKey=ke;Sb.rejectByKey=ke;Sb.without=Kd;Sb.without=Kd;Sb.withoutAll=Hc;Sb.withoutAll=Hc;Sb.uniq=fb;Sb.uniq=fb;Sb.uniqBy=Db;Sb.uniqBy=Db;Sb.uniqByKey=mc;Sb.uniqByKey=mc;Sb.compact=hc;Sb.compact=hc;Sb.mutableCompact=Tc;Sb.mutableCompact=Tc;Sb.forEach=Ld;Sb.forEach=
Ld;Sb.zip=oc;Sb.zip=oc;Sb.flatten=pc;Sb.flatten=pc;Sb.flatmap=Nb;Sb.flatmap=Nb;Sb.interpose=Dc;Sb.interpose=Dc;Sb.delimWith=Vc;Sb.delimWith=Vc;Sb.map=Hd;Sb.map=Hd;Sb.invoke=Id;Sb.invoke=Id;Sb.pluck=rb;Sb.pluck=rb;Sb.reduce=Hb;Sb.reduce=Hb;Sb.reduceRight=Mc;Sb.reduceRight=Mc;Sb.isArray=TS;Sb.isArray=TS;Sb.includes=US;Sb.includes=US;Sb.include=VS;Sb.include=VS;Sb.some=qb;Sb.some=qb;Sb.every=tb;Sb.every=tb;Sb.equals=eb;Sb.equals=eb;Sb.deepEquals=ob;Sb.deepEquals=ob;Sb.isSorted=wb;Sb.isSorted=wb;Sb.sort=
cb;Sb.sort=cb;Sb.sortBy=Oa;Sb.sortBy=Oa;Sb.sortByKey=Gb;Sb.sortByKey=Gb;Sb.reverse=sc;Sb.reverse=sc;Sb.reversed=vc;Sb.reversed=vc;Sb.reMatches=fc;Sb.reMatches=fc;Sb.first=rc;Sb.first=rc;Sb.last=Q;Sb.last=Q;Sb.intersect=ha;Sb.intersect=ha;Sb.union=Ga;Sb.union=Ga;Sb.pushAt=La;Sb.pushAt=La;Sb.removeAt=Yb;Sb.removeAt=Yb;Sb.remove=kc;Sb.remove=kc;Sb.pushAll=Ua;Sb.pushAll=Ua;Sb.pushAllAt=ec;Sb.pushAllAt=ec;Sb.pushIfNotIncluded=ge;Sb.pushIfNotIncluded=ge;Sb.replaceAt=ee;Sb.replaceAt=ee;Sb.clear=ed;Sb.clear=
ed;Sb.isSubset=ab;Sb.isSubset=ab;Sb.doAndContinue=Rc;Sb.doAndContinue=Rc;Sb.nestedDelay=pb;Sb.nestedDelay=pb;Sb.forEachShowingProgress=bd;Sb.forEachShowingProgress=bd;Sb.swap=od;Sb.swap=od;Sb.rotate=lb;Sb.rotate=lb;Sb.groupBy=Sa;Sb.groupBy=Sa;Sb.groupByKey=qc;Sb.groupByKey=qc;Sb.partition=le;Sb.partition=le;Sb.batchify=Zd;Sb.batchify=Zd;Sb.toTuples=Fe;Sb.toTuples=Fe;Sb.permutations=WS;Sb.permutations=WS;Sb.combinationsPick=Oc;Sb.combinationsPick=Oc;Sb.combinations=te;Sb.combinations=te;Sb.take=md;
Sb.take=md;Sb.drop=Eb;Sb.drop=Eb;Sb.takeWhile=xa;Sb.takeWhile=xa;Sb.dropWhile=Ca;Sb.dropWhile=Ca;Sb.shuffle=Mb;Sb.shuffle=Mb;Sb.max=P;Sb.max=P;Sb.min=za;Sb.min=za;Sb.sum=Ta;Sb.sum=Ta;Sb.count=Fb;Sb.count=Fb;Sb.size=Cc;Sb.size=Cc;Sb.histogram=Uc;Sb.histogram=Uc;Sb.clone=he;Sb.clone=he;Sb.toArray=we;Sb.toArray=we;Sb.each=nf;Sb.each=nf;Sb.all=yd;Sb.all=yd;Sb.any=Ce;Sb.any=Ce;Sb.collect=wf;Sb.collect=wf;Sb.findAll=Ie;Sb.findAll=Ie;Sb.inject=Fg;Sb.inject=Fg;Sb.mapAsyncSeries=Rf;Sb.mapAsyncSeries=Rf;Sb.mapAsync=
Jc;Sb.mapAsync=Jc;var eg=Object.freeze({__proto__:null,range:dc,from:QS,withN:Xb,genN:Xd,filter:ad,detect:RS,findIndex:SS,findAndGet:Nd,filterByKey:dd,grep:Lc,mask:rd,reject:Gd,rejectByKey:ke,without:Kd,withoutAll:Hc,uniq:fb,uniqBy:Db,uniqByKey:mc,compact:hc,mutableCompact:Tc,forEach:Ld,zip:oc,flatten:pc,flatmap:Nb,interpose:Dc,delimWith:Vc,map:Hd,invoke:Id,pluck:rb,reduce:Hb,reduceRight:Mc,isArray:TS,includes:US,include:VS,some:qb,every:tb,equals:eb,deepEquals:ob,isSorted:wb,sort:cb,sortBy:Oa,sortByKey:Gb,
reverse:sc,reversed:vc,reMatches:fc,first:rc,last:Q,intersect:ha,union:Ga,pushAt:La,removeAt:Yb,remove:kc,pushAll:Ua,pushAllAt:ec,pushIfNotIncluded:ge,replaceAt:ee,clear:ed,isSubset:ab,doAndContinue:Rc,nestedDelay:pb,forEachShowingProgress:bd,swap:od,rotate:lb,groupBy:Sa,groupByKey:qc,partition:le,batchify:Zd,toTuples:Fe,permutations:WS,combinationsPick:Oc,combinations:te,take:md,drop:Eb,takeWhile:xa,dropWhile:Ca,shuffle:Mb,max:P,min:za,sum:Ta,count:Fb,size:Cc,histogram:Uc,clone:he,toArray:we,each:nf,
all:yd,any:Ce,collect:wf,findAll:Ie,inject:Fg,mapAsyncSeries:Rf,mapAsync:Jc});Ba("a6",eg);var Bd=lively.FreezerRuntime.recorderFor("lively.lang/function.js");Bd.Empty=of;Bd.K=pg;Bd.Null=qg;Bd.False=ff;Bd.True=Ja;Bd.notYetImplemented=$a;Bd.all=Bb;Bd.own=ba;Bd.argumentNames=Ia;Bd.qualifiedMethodName=nb;Bd.extractBody=zb;Bd.timeToRun=Ec;Bd.timeToRunN=Gc;Bd.delay=qd;Bd.throttle=sd;Bd.debounce=vd;Bd.throttleNamed=Cf;Bd.debounceNamed=yg;Bd.createQueue=fg;Bd.workerWithCallbackQueue=xf;Bd._composeAsyncDefaultEndCallback=
function(d,c){d&&console.error("lively.lang.composeAsync error",d)};Bd.composeAsync=ri;Bd.compose=Lh;Bd.flip=Aj;Bd.withNull=Zh;Bd.waitFor=qk;Bd.waitForAll=Gg;Bd.curry=fk;Bd.wrap=Hi;Bd.getOriginal=dk;Bd.wrapperChain=rj;Bd.replaceMethodForOneCall=rl;Bd.once=Al;Bd.either=mm;Bd.eitherNamed=Uk;Bd.evalJS=qi;Bd.fromString=ek;Bd.asScript=gn;Bd.asScriptOf=Nf;Bd.addToObject=Wk;Bd.binds=Ub;Bd.setLocalVarValue=td;Bd.getVarMapping=ue;Bd.setProperty=Ud;Bd.functionNames=pd;Bd.localFunctionNames=Ig;Bd.logErrors=
Ij;Bd.logCompletion=$l;Bd.logCalls=Lq;Bd.traceCalls=Yp;Bd.webkitStack=nm;Bd.objectMerge=Bl;Bd.safeToString=yh;Bd.Closure=Qj;Bd.arr=eg;Bd._throttledByName={};Bd._debouncedByName={};Bd._queues={};Bd._queueUntilCallbacks={};Bd._eitherNameRegistry={};Bd.Empty=of;Bd.Empty=of;Bd.K=pg;Bd.K=pg;Bd.Null=qg;Bd.Null=qg;Bd.False=ff;Bd.False=ff;Bd.True=Ja;Bd.True=Ja;Bd.notYetImplemented=$a;Bd.notYetImplemented=$a;Bd.withNull=Zh;Bd.withNull=Zh;Bd.all=Bb;Bd.all=Bb;Bd.own=ba;Bd.own=ba;Bd.argumentNames=Ia;Bd.argumentNames=
Ia;Bd.qualifiedMethodName=nb;Bd.qualifiedMethodName=nb;Bd.extractBody=zb;Bd.extractBody=zb;Bd.timeToRun=Ec;Bd.timeToRun=Ec;Bd.timeToRunN=Gc;Bd.timeToRunN=Gc;Bd.delay=qd;Bd.delay=qd;Bd.throttle=sd;Bd.throttle=sd;Bd.debounce=vd;Bd.debounce=vd;Bd.throttleNamed=Cf;Bd.throttleNamed=Cf;Bd.debounceNamed=yg;Bd.debounceNamed=yg;Bd.createQueue=fg;Bd.createQueue=fg;Bd.workerWithCallbackQueue=xf;Bd.workerWithCallbackQueue=xf;Bd.composeAsync=ri;Bd.composeAsync=ri;Bd.compose=Lh;Bd.compose=Lh;Bd.waitFor=qk;Bd.waitFor=
qk;Bd.waitForAll=Gg;Bd.waitForAll=Gg;Bd.flip=Aj;Bd.flip=Aj;Bd.curry=fk;Bd.curry=fk;Bd.wrap=Hi;Bd.wrap=Hi;Bd.binds=Ub;Bd.binds=Ub;Bd.getOriginal=dk;Bd.getOriginal=dk;Bd.wrapperChain=rj;Bd.wrapperChain=rj;Bd.replaceMethodForOneCall=rl;Bd.replaceMethodForOneCall=rl;Bd.once=Al;Bd.once=Al;Bd.either=mm;Bd.either=mm;Bd.eitherNamed=Uk;Bd.eitherNamed=Uk;Bd.evalJS=qi;Bd.evalJS=qi;Bd.fromString=ek;Bd.fromString=ek;Bd.asScript=gn;Bd.asScript=gn;Bd.asScriptOf=Nf;Bd.asScriptOf=Nf;Bd.addToObject=Wk;Bd.addToObject=
Wk;Bd.setLocalVarValue=td;Bd.setLocalVarValue=td;Bd.getVarMapping=ue;Bd.getVarMapping=ue;Bd.setProperty=Ud;Bd.setProperty=Ud;Bd.functionNames=pd;Bd.functionNames=pd;Bd.localFunctionNames=Ig;Bd.localFunctionNames=Ig;Bd.logErrors=Ij;Bd.logErrors=Ij;Bd.logCompletion=$l;Bd.logCompletion=$l;Bd.logCalls=Lq;Bd.logCalls=Lq;Bd.traceCalls=Yp;Bd.traceCalls=Yp;Bd.webkitStack=nm;Bd.webkitStack=nm;var Jn=Object.freeze({__proto__:null,Empty:of,K:pg,Null:qg,False:ff,True:Ja,notYetImplemented:$a,withNull:Zh,all:Bb,
own:ba,argumentNames:Ia,qualifiedMethodName:nb,extractBody:zb,timeToRun:Ec,timeToRunN:Gc,delay:qd,throttle:sd,debounce:vd,throttleNamed:Cf,debounceNamed:yg,createQueue:fg,workerWithCallbackQueue:xf,composeAsync:ri,compose:Lh,waitFor:qk,waitForAll:Gg,flip:Aj,curry:fk,wrap:Hi,binds:Ub,getOriginal:dk,wrapperChain:rj,replaceMethodForOneCall:rl,once:Al,either:mm,eitherNamed:Uk,evalJS:qi,fromString:ek,asScript:gn,asScriptOf:Nf,addToObject:Wk,setLocalVarValue:td,getVarMapping:ue,setProperty:Ud,functionNames:pd,
localFunctionNames:Ig,logErrors:Ij,logCompletion:$l,logCalls:Lq,traceCalls:Yp,webkitStack:nm});Ba("au",Jn);var ve=lively.FreezerRuntime.recorderFor("lively.lang/object.js");ve.print=Gn;ve.indent=function(d,c,h){if(!h||0>=h)return d;for(;0<h;)h--,d=c+d;return d};ve.isArray=Ok;ve.isElement=om;ve.isFunction=pk;ve.isBoolean=dn;ve.isString=po;ve.isNumber=oo;ve.isUndefined=cn;ve.isRegExp=Cm;ve.isObject=Pk;ve.isPrimitive=Hn;ve.isEmpty=Dm;ve.equals=ug;ve.values=sl;ve.select=pm;ve.dissoc=Em;ve.addScript=ih;
ve.extend=qo;ve.clone=ji;ve.extract=Zj;ve.inspect=Bi;ve.merge=Bl;ve.deepMerge=Fm;ve.sortKeysWithBeforeAndAfterConstraints=Qe;ve.inherit=fn;ve.valuesInPropertyHierarchy=Qo;ve.mergePropertyInHierarchy=qm;ve.deepCopy=qp;ve.typeStringOf=ro;ve.shortPrintStringOf=Nl;ve.isMutableType=so;ve.safeToString=yh;ve.asObject=rp;ve.newKeyIn=In;ve.functionFromString=ek;ve.asScriptOf=Nf;ve.argumentNames=Ia;ve.arrayDeepEquals=ob;ve.isSubset=ab;ve.flatten=pc;ve.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?
Object.getOwnPropertyDescriptors:function(d){var c={},h;for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&Object.defineProperty(c,h,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(d,h)});return c};ve.keys=Object.keys;var XS=ve.keys,YS=ve.getOwnPropertyDescriptors;ve.isArray=Ok;ve.isArray=Ok;ve.isElement=om;ve.isElement=om;ve.isFunction=pk;ve.isFunction=pk;ve.isBoolean=dn;ve.isBoolean=dn;ve.isString=po;ve.isString=po;ve.isNumber=oo;ve.isNumber=oo;ve.isUndefined=
cn;ve.isUndefined=cn;ve.isRegExp=Cm;ve.isRegExp=Cm;ve.isObject=Pk;ve.isObject=Pk;ve.isPrimitive=Hn;ve.isPrimitive=Hn;ve.isEmpty=Dm;ve.isEmpty=Dm;ve.equals=ug;ve.equals=ug;ve.keys=XS;ve.keys=XS;ve.values=sl;ve.values=sl;ve.select=pm;ve.select=pm;ve.dissoc=Em;ve.dissoc=Em;ve.addScript=ih;ve.addScript=ih;ve.extend=qo;ve.extend=qo;ve.clone=ji;ve.clone=ji;ve.extract=Zj;ve.extract=Zj;ve.inspect=Bi;ve.inspect=Bi;ve.merge=Bl;ve.merge=Bl;ve.deepMerge=Fm;ve.deepMerge=Fm;ve.inherit=fn;ve.inherit=fn;ve.valuesInPropertyHierarchy=
Qo;ve.valuesInPropertyHierarchy=Qo;ve.mergePropertyInHierarchy=qm;ve.mergePropertyInHierarchy=qm;ve.sortKeysWithBeforeAndAfterConstraints=Qe;ve.sortKeysWithBeforeAndAfterConstraints=Qe;ve.deepCopy=qp;ve.deepCopy=qp;ve.typeStringOf=ro;ve.typeStringOf=ro;ve.shortPrintStringOf=Nl;ve.shortPrintStringOf=Nl;ve.isMutableType=so;ve.isMutableType=so;ve.safeToString=yh;ve.safeToString=yh;ve.asObject=rp;ve.asObject=rp;ve.newKeyIn=In;ve.newKeyIn=In;ve.getOwnPropertyDescriptors=YS;ve.getOwnPropertyDescriptors=
YS;var Ag=Object.freeze({__proto__:null,isArray:Ok,isElement:om,isFunction:pk,isBoolean:dn,isString:po,isNumber:oo,isUndefined:cn,isRegExp:Cm,isObject:Pk,isPrimitive:Hn,isEmpty:Dm,equals:ug,keys:XS,values:sl,select:pm,dissoc:Em,addScript:ih,extend:qo,clone:ji,extract:Zj,inspect:Bi,merge:Bl,deepMerge:Fm,inherit:fn,valuesInPropertyHierarchy:Qo,mergePropertyInHierarchy:qm,sortKeysWithBeforeAndAfterConstraints:Qe,deepCopy:qp,typeStringOf:ro,shortPrintStringOf:Nl,isMutableType:so,safeToString:yh,asObject:rp,
newKeyIn:In,getOwnPropertyDescriptors:YS});Ba("a7",Ag);var Yc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");Yc.format=Ro;Yc.formatFromArray=bn;Yc.indent=am;Yc.minIndent=Ol;Yc.changeIndent=rm;Yc.quote=bm;Yc.print=ra;Yc.printNested=Ra;Yc.pad=ib;Yc.printTable=Za;Yc.printTree=Pb;Yc.toArray=gc;Yc.lines=xc;Yc.paragraphs=Ic;Yc.nonEmptyLines=Sd;Yc.tokens=Vf;Yc.tableize=Mf;Yc.unescapeCharacterEntities=id;Yc.toQueryParams=tg;Yc.base64EncodeUnicode=og;Yc.base64DecodeUnicode=Jj;Yc.normalizePath=
Vk;Yc.joinPath=Po;Yc.newUUID=en;Yc.createDataURI=Kr;Yc.hashCode=Lr;Yc.md5=Mq;Yc.reMatches=at;Yc.stringMatch=So;Yc.peekRight=Gm;Yc.peekLeft=To;Yc.lineIndexComputer=sm;Yc.lineNumberToIndexesComputer=qf;Yc.lineRanges=Nq;Yc.findLineWithIndexInLineRanges=tl;Yc.regexIndexOf=Hm;Yc.regexLastIndexOf=lu;Yc.diff=Uo;Yc.empty=sp;Yc.startsWithVowel=gl;Yc.withDecimalPrecision=Zp;Yc.capitalize=Mr;Yc.camelCaseString=Vo;Yc.camelize=Oq;Yc.truncate=Pq;Yc.truncateLeft=oe;Yc.regExpEscape=to;Yc.succ=Pl;Yc.digitValue=Xk;
Yc.longestCommonSubstring=Qq;Yc.applyChange=Nr;Yc.applyChanges=Rq;Yc.levenshtein=uo;Yc.inspectObject=Bi;Yc.min=za;Yc.last=Q;Yc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,endsWith:!!String.prototype.endsWith};Yc.pathDotRe=/\/\.\//g;Yc.pathDoubleDotRe=/\/[^\/]+\/\.\./;Yc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Yc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;Yc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";Yc.newUUIDRe=/[xy]/g;Yc.newUUIDReplacer=
function(d){var c=16*Math.random()|0;return("x"==d?c:c&3|8).toString(16)};Yc.includes=Yc.features.includes?function(d,c){return d.includes(c)}:function(d,c){return-1<d.indexOf(c)};Yc.include=Yc.includes;Yc.startsWith=Yc.features.startsWith?function(d,c){return d.startsWith(c)}:function(d,c){return 0===d.indexOf(c)};Yc.endsWith=Yc.features.endsWith?function(d,c){return d.endsWith(c)}:function(d,c){var h=d.length-c.length;return 0<=h&&d.lastIndexOf(c)===h};Yc.times=Yc.features.repeat?function(d,c){return d.repeat(c)}:
function(d,c){return 1>c?"":Array(c+1).join(d)};var ZS=Yc.includes,$S=Yc.include,aT=Yc.startsWith,bT=Yc.endsWith,cT=Yc.times;Yc.format=Ro;Yc.format=Ro;Yc.formatFromArray=bn;Yc.formatFromArray=bn;Yc.indent=am;Yc.indent=am;Yc.minIndent=Ol;Yc.minIndent=Ol;Yc.changeIndent=rm;Yc.changeIndent=rm;Yc.quote=bm;Yc.quote=bm;Yc.print=ra;Yc.print=ra;Yc.printNested=Ra;Yc.printNested=Ra;Yc.pad=ib;Yc.pad=ib;Yc.printTable=Za;Yc.printTable=Za;Yc.printTree=Pb;Yc.printTree=Pb;Yc.toArray=gc;Yc.toArray=gc;Yc.lines=xc;
Yc.lines=xc;Yc.paragraphs=Ic;Yc.paragraphs=Ic;Yc.nonEmptyLines=Sd;Yc.nonEmptyLines=Sd;Yc.tokens=Vf;Yc.tokens=Vf;Yc.tableize=Mf;Yc.tableize=Mf;Yc.unescapeCharacterEntities=id;Yc.unescapeCharacterEntities=id;Yc.base64EncodeUnicode=og;Yc.base64EncodeUnicode=og;Yc.base64DecodeUnicode=Jj;Yc.base64DecodeUnicode=Jj;Yc.toQueryParams=tg;Yc.toQueryParams=tg;Yc.normalizePath=Vk;Yc.normalizePath=Vk;Yc.joinPath=Po;Yc.joinPath=Po;Yc.newUUID=en;Yc.newUUID=en;Yc.createDataURI=Kr;Yc.createDataURI=Kr;Yc.hashCode=Lr;
Yc.hashCode=Lr;Yc.md5=Mq;Yc.md5=Mq;Yc.reMatches=at;Yc.reMatches=at;Yc.stringMatch=So;Yc.stringMatch=So;Yc.peekRight=Gm;Yc.peekRight=Gm;Yc.peekLeft=To;Yc.peekLeft=To;Yc.lineIndexComputer=sm;Yc.lineIndexComputer=sm;Yc.lineNumberToIndexesComputer=qf;Yc.lineNumberToIndexesComputer=qf;Yc.findLineWithIndexInLineRanges=tl;Yc.findLineWithIndexInLineRanges=tl;Yc.regexIndexOf=Hm;Yc.regexIndexOf=Hm;Yc.regexLastIndexOf=lu;Yc.regexLastIndexOf=lu;Yc.lineRanges=Nq;Yc.lineRanges=Nq;Yc.diff=Uo;Yc.diff=Uo;Yc.empty=
sp;Yc.empty=sp;Yc.includes=ZS;Yc.includes=ZS;Yc.include=$S;Yc.include=$S;Yc.startsWith=aT;Yc.startsWith=aT;Yc.startsWithVowel=gl;Yc.startsWithVowel=gl;Yc.endsWith=bT;Yc.endsWith=bT;Yc.withDecimalPrecision=Zp;Yc.withDecimalPrecision=Zp;Yc.capitalize=Mr;Yc.capitalize=Mr;Yc.camelCaseString=Vo;Yc.camelCaseString=Vo;Yc.camelize=Oq;Yc.camelize=Oq;Yc.truncate=Pq;Yc.truncate=Pq;Yc.truncateLeft=oe;Yc.truncateLeft=oe;Yc.regExpEscape=to;Yc.regExpEscape=to;Yc.succ=Pl;Yc.succ=Pl;Yc.digitValue=Xk;Yc.digitValue=
Xk;Yc.times=cT;Yc.times=cT;Yc.longestCommonSubstring=Qq;Yc.longestCommonSubstring=Qq;Yc.applyChange=Nr;Yc.applyChange=Nr;Yc.applyChanges=Rq;Yc.applyChanges=Rq;Yc.levenshtein=uo;Yc.levenshtein=uo;var ti=Object.freeze({__proto__:null,format:Ro,formatFromArray:bn,indent:am,minIndent:Ol,changeIndent:rm,quote:bm,print:ra,printNested:Ra,pad:ib,printTable:Za,printTree:Pb,toArray:gc,lines:xc,paragraphs:Ic,nonEmptyLines:Sd,tokens:Vf,tableize:Mf,unescapeCharacterEntities:id,base64EncodeUnicode:og,base64DecodeUnicode:Jj,
toQueryParams:tg,normalizePath:Vk,joinPath:Po,newUUID:en,createDataURI:Kr,hashCode:Lr,md5:Mq,reMatches:at,stringMatch:So,peekRight:Gm,peekLeft:To,lineIndexComputer:sm,lineNumberToIndexesComputer:qf,findLineWithIndexInLineRanges:tl,regexIndexOf:Hm,regexLastIndexOf:lu,lineRanges:Nq,diff:Uo,empty:sp,includes:ZS,include:$S,startsWith:aT,startsWithVowel:gl,endsWith:bT,withDecimalPrecision:Zp,capitalize:Mr,camelCaseString:Vo,camelize:Oq,truncate:Pq,truncateLeft:oe,regExpEscape:to,succ:Pl,digitValue:Xk,
times:cT,longestCommonSubstring:Qq,applyChange:Nr,applyChanges:Rq,levenshtein:uo});Ba("s",ti);var Rg=lively.FreezerRuntime.recorderFor("lively.lang/number.js");Rg.random=mu;Rg.randomSmallerInteger=Or;Rg.humanReadableByteSize=Sq;Rg.average=Tq;Rg.averageInc=$p;Rg.median=nu;Rg.between=Mg;Rg.clamp=Zi;Rg.sort=R;Rg.parseLength=ia;Rg.roundTo=Fa;Rg.detent=ub;Rg.toDegrees=bc;Rg.toRadians=Sc;Rg.backoff=be;Rg.interpolate=xe;Rg.normalRandom=function(d,c){var h,f=!1;return function(k,n){if(f)return f=!1,h*n+k;
do{var b=2*Math.random()-1;var e=2*Math.random()-1;var m=b*b+e*e}while(1<=m||0==m);m=Math.sqrt(-2*Math.log(m)/m);h=e*m;f=!0;return k+n*b*m}}();Rg.convertLength=function(){function d(c,h){if("cm"===h)return c;if("mm"===h)return.1*c;if("in"===h)return 2.54*c;if("px"===h)return c*d(1/96,"in");if("pt"===h)return c*d(1/72,"in");if("pc"===h)return c*d(12,"pt")}return function n(h,f,k){return f===k?h:"cm"===k?d(h,f):"cm"===f?h/d(1,k):n(n(h,f,"cm"),"cm",k)}}();var dT=Rg.normalRandom,eT=Rg.convertLength;Rg.random=
mu;Rg.random=mu;Rg.normalRandom=dT;Rg.normalRandom=dT;Rg.randomSmallerInteger=Or;Rg.randomSmallerInteger=Or;Rg.humanReadableByteSize=Sq;Rg.humanReadableByteSize=Sq;Rg.average=Tq;Rg.average=Tq;Rg.averageInc=$p;Rg.averageInc=$p;Rg.median=nu;Rg.median=nu;Rg.between=Mg;Rg.between=Mg;Rg.sort=R;Rg.sort=R;Rg.parseLength=ia;Rg.parseLength=ia;Rg.convertLength=eT;Rg.convertLength=eT;Rg.roundTo=Fa;Rg.roundTo=Fa;Rg.detent=ub;Rg.detent=ub;Rg.toDegrees=bc;Rg.toDegrees=bc;Rg.toRadians=Sc;Rg.toRadians=Sc;Rg.backoff=
be;Rg.backoff=be;Rg.interpolate=xe;Rg.interpolate=xe;Rg.clamp=Zi;Rg.clamp=Zi;var Km=Object.freeze({__proto__:null,random:mu,normalRandom:dT,randomSmallerInteger:Or,humanReadableByteSize:Sq,average:Tq,averageInc:$p,median:nu,between:Mg,sort:R,parseLength:ia,convertLength:eT,roundTo:Fa,detent:ub,toDegrees:bc,toRadians:Sc,backoff:be,interpolate:xe,clamp:Zi});Ba("aq",Km);var tk=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");tk.all=Yd;tk.allOwnPropertiesOrFunctions=Bf;tk.own=dg;tk.forEachOwn=
ki;tk.nameFor=ij;tk.values=gk;tk.ownValues=tp;tk.any=Wo;tk.allProperties=vo;tk.hash=up;tk.all=Yd;tk.all=Yd;tk.allOwnPropertiesOrFunctions=Bf;tk.allOwnPropertiesOrFunctions=Bf;tk.own=dg;tk.own=dg;tk.forEachOwn=ki;tk.forEachOwn=ki;tk.nameFor=ij;tk.nameFor=ij;tk.values=gk;tk.values=gk;tk.ownValues=tp;tk.ownValues=tp;tk.any=Wo;tk.any=Wo;tk.allProperties=vo;tk.allProperties=vo;tk.hash=up;tk.hash=up;var xp=Object.freeze({__proto__:null,all:Yd,allOwnPropertiesOrFunctions:Bf,own:dg,forEachOwn:ki,nameFor:ij,
values:gk,ownValues:tp,any:Wo,allProperties:vo,hash:up});Ba("aX",xp);var bq=lively.FreezerRuntime.recorderFor("lively.lang/date.js");bq.format=aq;bq.equals=wo;bq.relativeTo=vp;bq.dateFormat=function(){var d=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,k=function(n,b){n=String(n);for(b=b||2;n.length<b;)n="0"+n;
return n};return function(n,b,e){var m=d;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");b=String(m.masks[b]||b||m.masks.default);"UTC:"==b.slice(0,4)&&(b=b.slice(4),e=!0);var a=e?"getUTC":"get",g=n[a+"Date"](),l=n[a+"Day"](),r=n[a+"Month"](),v=n[a+"FullYear"](),y=n[a+"Hours"](),A=n[a+"Minutes"](),E=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var F=e?0:n.getTimezoneOffset(),
H={d:g,dd:k(g),ddd:m.i18n.dayNames[l],dddd:m.i18n.dayNames[l+7],m:r+1,mm:k(r+1),mmm:m.i18n.monthNames[r],mmmm:m.i18n.monthNames[r+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:k(y%12||12),H:y,HH:k(y),M:A,MM:k(A),s:E,ss:k(E),l:k(a,3),L:k(99<a?Math.round(a/10):a),t:12>y?"a":"p",tt:12>y?"am":"pm",T:12>y?"A":"P",TT:12>y?"AM":"PM",Z:e?"UTC":(String(n).match(h)||[""]).pop().replace(f,""),o:(0<F?"-":"+")+k(100*Math.floor(Math.abs(F)/60)+Math.abs(F)%60,4),S:["th","st","nd","rd"][3<g%10?0:(10!=g%100-g%10)*
g%10]};return b.replace(c,function(I){return I in H?H[I]:I.slice(1,I.length-1)})}}();d.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};d.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return d}();var fT=bq.dateFormat;bq.format=aq;bq.format=aq;bq.equals=wo;bq.equals=wo;bq.relativeTo=vp;bq.relativeTo=vp;bq.dateFormat=fT;bq.dateFormat=fT;var xu=Object.freeze({__proto__:null,format:aq,equals:wo,relativeTo:vp,dateFormat:fT});Ba("a5",xu);var li=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");li.promise=ph;li.delay=
ou;li.delayReject=pu;li.timeout=bt;li.timeToRun=qx;li.waitFor=Pr;li.deferred=ct;li.convertCallbackFun=dt;li.convertCallbackFunWithManyArgs=qu;li._chainResolveNext=rx;li.chain=et;li.promise_finally=Uq;li.parallel=sx;li.newUUID=en;li.pushIfNotIncluded=ge;li.removeAt=Yb;Object.assign(li.promise,{delay:ou,delayReject:pu,timeout:bt,waitFor:Pr,deferred:ct,convertCallbackFun:dt,convertCallbackFunWithManyArgs:qu,chain:et,finally:li.promise_finally,parallel:sx});li.promise=ph;li.promise=ph;li.delay=ou;li.delay=
ou;li.delayReject=pu;li.delayReject=pu;li.timeout=bt;li.timeout=bt;li.timeToRun=qx;li.timeToRun=qx;li.waitFor=Pr;li.waitFor=Pr;li.deferred=ct;li.deferred=ct;li.convertCallbackFun=dt;li.convertCallbackFun=dt;li.convertCallbackFunWithManyArgs=qu;li.convertCallbackFunWithManyArgs=qu;li.chain=et;li.chain=et;li.finally=Uq;li.promise_finally=Uq;li.parallel=sx;li.parallel=sx;li.default=ph;var rv=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");rv.Path=$h;rv.inspect=Bi;Object.assign(rv.Path.prototype,
{get isPathAccessor(){return!0},fromPath:function(d){"string"===typeof d&&""!==d&&d!==this.splitter?(this._parts=d.split(this.splitter),this._path=d):Array.isArray(d)?(this._parts=[].concat(d),this._path=d.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(d){d&&(this.splitter=d);return this},map:function(d){this._mapper=d;return this},parts:function(){return this._parts},size:function(){return this._parts.length},slice:function(d,c){return rv.Path(this.parts().slice(d,
c))},normalizePath:function(){return this._path},isRoot:function(d){return 0===this._parts.length},isIn:function(d){return this.isRoot()?!0:(d=this.get(d,-1))&&d.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(d){return d&&d.isPathAccessor&&this.parts().equals(d.parts())},isParentPathOf:function(d){d=d&&d.isPathAccessor?d:rv.Path(d);var c=this.parts();d=d.parts();for(var h=0;h<c.length;h++)if(c[h]!=d[h])return!1;return!0},relativePathTo:function(d){d=rv.Path(d);return this.isParentPathOf(d)?
d.slice(this.size(),d.size()):void 0},del:function(d){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(d.hasOwnProperty(h))d=d[h];else return!1}return delete d[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(d,c,h){if(this.isRoot())return h(null,null);for(var f=0;f<this._parts.length-1;f++){var k=this._parts[f];if(!d.hasOwnProperty(k)||"object"!==typeof d[k]&&"function"!==typeof d[k])if(c)d=d[k]={};else return h(null,k);else d=d[k]}return h(d,
this._parts[this._parts.length-1])},set:function(d,c,h){return this.withParentAndKeyDo(d,h,function(f,k){return f?f[k]=c:void 0})},defineProperty:function(d,c,h){return this.withParentAndKeyDo(d,h,function(f,k){return f?Object.defineProperty(f,k,c):void 0})},get:function(d,c){var h=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(f,k){return f?h._mapper?h._mapper(k,f[k]):f[k]:f},d)},concat:function(d,c){return rv.Path(this.parts().concat(rv.Path(d,c).parts()))},toString:function(){return this.normalizePath()},
serializeExpr:function(){return"lively.lang.Path("+rv.inspect(this.parts())+")"},watch:function(d){if(d&&!this.isRoot()){var c=d.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],k="propertyWatcher$"+f,n=h&&h.hasOwnProperty(k),b=d.uninstall,e=d.haltWhenChanged,m=d.showStack,a=h.__lookupGetter__(f),g=h.__lookupSetter__(f);c&&f&&h&&(b?n&&(delete h[f],h[f]=h[k],delete h[k]):n||(a||g?console.log(h+'["'+f+'"] is a getter/setter, watching not support'):(h[k]=h[f],h.__defineSetter__(f,function(l){var r=
h[k];if(d.onSet)d.onSet(l,r);r=h+"."+f+" changed: "+r+" -> "+l;m&&(r+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));d.verbose&&console.log(r);if(e)debugger;return h[k]=l}),h.__defineGetter__(f,function(){if(d.onGet)d.onGet(h[k]);return h[k]}),console.log("Watcher for "+h+"."+f+" installed"))))}},debugFunctionWrapper:function(d){var c=d.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],k=void 0===d.haltWhenChanged?!0:d.haltWhenChanged,n=h&&f&&h[f],b=n&&n.isDebugFunctionWrapper;
c&&f&&n&&h&&(d.uninstall?b&&(h[f]=h[f].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+h+"."+f)):b?console.log("debugFunctionWrapper for "+h+"."+f+" already installed"):(d=h[f]=n.wrap(function(e){var m=Array.from(arguments);if(k)debugger;return m.shift().apply(h,m)}),d.isDebugFunctionWrapper=!0,d.debugTargetFunction=n,console.log("debugFunctionWrapper for "+h+"."+f+" installed")))}});rv.default=$h;var Kj=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");Kj.clone=cq;
Kj.without=ft;Kj.hull=Vv;Kj.subgraphReachableBy=Wv;Kj.invert=Xv;Kj.sortByReference=Yv;Kj.reduce=Zv;Kj.random=gt;Kj.range=dc;Kj.shuffle=Mb;Kj.withoutAll=Hc;Kj.flatten=pc;Kj.uniq=fb;Kj.values=sl;Kj.clone=cq;Kj.clone=cq;Kj.without=ft;Kj.without=ft;Kj.hull=Vv;Kj.hull=Vv;Kj.subgraphReachableBy=Wv;Kj.subgraphReachableBy=Wv;Kj.invert=Xv;Kj.invert=Xv;Kj.sortByReference=Yv;Kj.sortByReference=Yv;Kj.reduce=Zv;Kj.reduce=Zv;Kj.random=gt;Kj.random=gt;var wu=Object.freeze({__proto__:null,clone:cq,without:ft,hull:Vv,
subgraphReachableBy:Wv,invert:Xv,sortByReference:Yv,reduce:Zv,random:gt});Ba("bS",wu);var si=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");si.isInterval=ru;si.sort=dq;si.compare=ht;si.coalesce=su;si.coalesceOverlapping=Qr;si.mergeOverlapping=xo;si.intervalsInRangeDo=tu;si.intervalsInbetween=uu;si.mapToMatchingIndexes=$v;si.benchmark=function(){function d(c,h,f){return c.name+" "+si.timeToRunN(function(){return c.apply(null,h,1E5)},f)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",d(si.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),d(si.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),d(si.mapToMatchingIndexes,[si.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};si.range=dc;si.timeToRunN=Gc;si.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;si.isInterval=ru;si.isInterval=ru;si.sort=dq;si.sort=dq;si.compare=ht;si.compare=ht;si.coalesce=su;si.coalesce=
su;si.coalesceOverlapping=Qr;si.coalesceOverlapping=Qr;si.mergeOverlapping=xo;si.mergeOverlapping=xo;si.intervalsInRangeDo=tu;si.intervalsInRangeDo=tu;si.intervalsInbetween=uu;si.intervalsInbetween=uu;si.mapToMatchingIndexes=$v;si.mapToMatchingIndexes=$v;var WE=Object.freeze({__proto__:null,isInterval:ru,sort:dq,compare:ht,coalesce:su,coalesceOverlapping:Qr,mergeOverlapping:xo,intervalsInRangeDo:tu,intervalsInbetween:uu,mapToMatchingIndexes:$v}),Xo=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
Xo.create=Vq;Xo.toArray=tx;Xo.originalToProjectedIndex=Rr;Xo.projectedToOriginalIndex=ux;Xo.transformToIncludeIndex=hn;Xo.create=Vq;Xo.create=Vq;Xo.toArray=tx;Xo.toArray=tx;Xo.originalToProjectedIndex=Rr;Xo.originalToProjectedIndex=Rr;Xo.projectedToOriginalIndex=ux;Xo.projectedToOriginalIndex=ux;Xo.transformToIncludeIndex=hn;Xo.transformToIncludeIndex=hn;var VE=Object.freeze({__proto__:null,create:Vq,toArray:tx,originalToProjectedIndex:Rr,projectedToOriginalIndex:ux,transformToIncludeIndex:hn}),Fh=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");Fh.get=wp;Fh.set=Sr;Fh.getRow=it;Fh.setRow=da;Fh.getCol=wa;Fh.setCol=kb;Fh.create=Ib;Fh.mapCreate=tc;Fh.forEach=Xc;Fh.map=ne;Fh.toObjects=Ze;Fh.tableFromObjects=yf;Fh.benchmark=function(){var d=[],c=Fh.create(1E3,200,1);var h=Fh.timeToRunN(function(){Fh.forEach(c,function(k){})},10);d.push("forEach: "+h.toFixed(2)+"ms");h=Fh.timeToRunN(function(){Fh.map(c,function(k,n,b){return n+b+Math.round(100*Math.random())})},10);d.push("map: "+h.toFixed(2)+
"ms");var f=Fh.create(1E3,2E3);h=Fh.timeToRunN(function(){f=Array(1E3);for(var k=0;1E3>k;k++)f[k]=Array(2E3);Fh.forEach(c,function(n,b,e){f[b][e]=b+e+Math.round(100*Math.random())})},10);d.push("map with forEach: "+h+"ms");d.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return d.join("\n")};Fh.arrayWithN=Xb;Fh.timeToRunN=Gc;Fh.get=wp;Fh.get=wp;Fh.set=Sr;Fh.set=Sr;Fh.getRow=it;Fh.getRow=it;Fh.setRow=da;Fh.setRow=da;Fh.getCol=wa;Fh.getCol=wa;Fh.setCol=kb;Fh.setCol=
kb;Fh.create=Ib;Fh.create=Ib;Fh.mapCreate=tc;Fh.mapCreate=tc;Fh.forEach=Xc;Fh.forEach=Xc;Fh.map=ne;Fh.map=ne;Fh.toObjects=Ze;Fh.toObjects=Ze;Fh.tableFromObjects=yf;Fh.tableFromObjects=yf;var vz=Object.freeze({__proto__:null,get:wp,set:Sr,getRow:it,setRow:da,getCol:wa,setCol:kb,create:Ib,mapCreate:tc,forEach:Xc,map:ne,toObjects:Ze,tableFromObjects:yf}),hl=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");hl.prewalk=$e;hl.postwalk=jh;hl.find=zg;hl.filter=zh;hl.map=jj;hl.mapTree=Ak;hl.flatten=
pc;hl.detect=hl.find;var gT=hl.detect;hl.prewalk=$e;hl.prewalk=$e;hl.postwalk=jh;hl.postwalk=jh;hl.find=zg;hl.find=zg;hl.detect=gT;hl.detect=gT;hl.filter=zh;hl.filter=zh;hl.map=jj;hl.map=jj;hl.mapTree=Ak;hl.mapTree=Ak;var vu=Object.freeze({__proto__:null,prewalk:$e,postwalk:jh,find:zg,detect:gT,filter:zh,map:jj,mapTree:Ak});Ba("a4",vu);var sv=lively.FreezerRuntime.recorderFor("lively.lang/events.js");sv.isNode="undefined"!==typeof sv.process&&sv.process.versions&&sv.process.versions.node;sv.makeEmitter=
sv.isNode?function(d,c){if(d.on&&d.removeListener)return d;var h="undefined"!==typeof System?System._nodeRequire("events"):sv.require("events");Object.assign(d,h.EventEmitter.prototype);h.EventEmitter.call(d);c&&c.maxListenerLimit&&d.setMaxListeners(c.maxListenerLimit);return d}:function(d){if(d.on&&d.removeListener)return d;d.listeners={};d.on=function(c,h){h&&(d.listeners[c]||(d.listeners[c]=[]),d.listeners[c].push(h))};d.once=function(c,h){function f(){d.removeListener(c,f);h.apply(this,arguments)}
if(h)d.on(c,f)};d.removeListener=function(c,h){d.listeners[c]&&(d.listeners[c]=d.listeners[c].filter(function(f){return f!==h}))};d.removeAllListeners=function(c){d.listeners[c]&&(d.listeners[c]=[])};d.emit=function(){var c=Array.prototype.slice.call(arguments),h=c.shift();(h=d.listeners[h])&&h.length&&h.forEach(function(f){try{f.apply(null,c)}catch(k){console.error("Error in event handler: %s",k.stack||String(k))}})};return d};var pC=sv.makeEmitter;sv.makeEmitter=pC;sv.makeEmitter=pC;var uz=Object.freeze({__proto__:null,
makeEmitter:pC});Ba("bo",uz);var cm=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");cm.create=Im;cm.remove=kc;cm.pluck=rb;cm.makeEmitter=pC;cm.newUUID=en;cm.OFFLINE="offline";cm.ONLINE="online";cm.CONNECTING="connecting";cm.create=Im;cm.create=Im;var UE=Object.freeze({__proto__:null,create:Im}),Gh=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");Gh.fork=Yk;Gh.create=Mh;Gh.makeEmitter=pC;Gh.newUUID=en;Gh.waitFor=qk;Gh.messengerCreate=Im;Gh.Closure=Qj;Gh.isNodejs="undefined"!==
typeof require&&"undefined"!==typeof process;Gh.WorkerSetup={loadDependenciesBrowser:function(d){importScripts.apply("undefined"!==typeof self?self:this,d.scriptsToLoad||[])},loadDependenciesNodejs:function(d){(global.lively||(global.lively={})).lang=require(require("path").join(d.libLocation,"index"))},initBrowserGlobals:function(d){remoteWorker.send=function(c){postMessage(c)};d="undefined"!==typeof self?self:this;d=d.Global=d;d.window=d;d.console=d.console||function(){var c={};["log","error","warn"].forEach(function(h){c[h]=
function(){for(var f=arguments[0],k=1;k<arguments.length;k++)f=f.replace("%s",arguments[k]);remoteWorker.send({type:h,message:["[",h.toUpperCase(),"] ",f].join("")})}});return c}()},initOnMessageHandler:function(d){function c(h){h=h.data.data?h.data:h;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(h);else"close"==h.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(d){remoteWorker.callStringifiedFunction=
function(c,h,f){try{var k=eval("("+c+")")}catch(e){f(Error("Cannot create function from string: "+e.stack||e));return}c=k.length===h.length+1;var n=lively.lang.fun.once(function(e,m){remoteWorker.isBusy=!1;f(e,m)});remoteWorker.isBusy=!0;c&&h.push(n);try{var b=k.apply(remoteWorker,h.concat([n]))}catch(e){n(e,null);return}c||n(null,b)};remoteWorker.httpRequest=function(c){if(c.url){var h=new XMLHttpRequest,f=c.method||"GET";h.onreadystatechange=function(){4===h.readyState&&c.done&&c.done(h)};h.open(f,
c.url);h.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(d){if(!d.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,h){try{var f=eval(c.data.expr)}catch(k){f=k.stack||k}h.answer(c,{result:String(f)})},run:function(c,h){var f=c.data.func,k=c.data.args;f?remoteWorker.callStringifiedFunction(f,k,function(n,b){h.answer(c,{error:n?String(n):null,result:b})}):h.answer(c,{error:"no funcString"})},close:function(c,h){h.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(c,h){remoteWorker.send(c);h()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Gh.BrowserWorker={create:function(d){d=d||{};if(!d.libLocation&&!d.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');d.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=
function(h){if("setup"!==h.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));h=h.data.options||{};initBrowserGlobals(h);loadDependenciesBrowser(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Gh.WorkerSetup.initBrowserGlobals,Gh.WorkerSetup.loadDependenciesBrowser,Gh.WorkerSetup.initOnMessageHandler,Gh.WorkerSetup.initWorkerInterface,
Gh.WorkerSetup.initWorkerMessenger].join("\n"));c="("+Gh.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(h){try{var f=new Blob([h],{type:"text/javascript"})}catch(k){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new BlobBuilder,f.append(h),f=f.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(f)}(c));(function(h,f){Gh.makeEmitter(f);h.scriptsToLoad||(h.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return h.libLocation+
n}));var k=Object.keys(h).reduce(function(n,b){"function"!==typeof h[b]&&(n[b]=h[b]);return n},{});f.onmessage=function(n){void 0!==n.data.workerReady?(f.ready=!!n.data.workerReady,f.ready?f.emit("ready"):f.emit("close")):f.emit("message",n.data)};f.errors=[];f.onerror=function(n){console.error(n);f.errors.push(n);f.emit("error",n)};f.postMessage({action:"setup",options:k})})(d,c);return c}};Gh.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(d){d=d||{};var c,h=Gh.makeEmitter({ready:!1,
errors:[],postMessage:function(f){c?h.ready?c.send(f):h.emit("error",Error("nodejs worker process not ready or already closed")):h.emit("error",Error("nodejs worker process not yet created"))}});Gh.NodejsWorker.startWorker(d,function(f,k){f?(h.ready=!1,h.emit("error",f)):(c=k,c.on("message",function(n){Gh.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);h.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");h.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",
n);h.errors.push(n);h.emit("error",n)}),h.ready=!0,h.emit("ready"))});return h},workerSetupFunction:function(){var d=process;console.log("[WORKER] Starting init");d.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));d.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);d.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(d,c,h){var f=require("path"),k=require("os"),n=require("fs");k=f.join(k.tmpDir(),"lively-nodejs-workers/");var b=f.join(k,"nodejs-worker-init.js");Gh.NodejsWorker.initCodeFileCreated?n.exists(b,function(e){e?h(null,b):Gh.NodejsWorker.createWorkerCodeFile(d,b,c,h)}):Gh.NodejsWorker.createWorkerCodeFile(d,b,c,h)},createWorkerCodeFile:function(d,c,h,f){d=require("path");var k=require("fs"),n=require("child_process").exec;n("mkdir -p "+d.dirname(c),
function(b,e,m){b?f(Error(["[WORKER PARENT] Could not create worker temp dir:",e,m].join("\n"))):k.writeFile(c,h,function(a){Gh.NodejsWorker.debug&&console.log("worker code file %s created",c);Gh.NodejsWorker.initCodeFileCreated=!0;f(a,c)})})},startWorker:function(d,c){var h=require("util"),f=require("child_process").fork,k=String(Gh.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Gh.WorkerSetup.loadDependenciesNodejs,Gh.WorkerSetup.initOnMessageHandler,Gh.WorkerSetup.initWorkerInterface,
Gh.WorkerSetup.initWorkerMessenger].join("\n"));h=h.format("(%s)();\n",k);Gh.NodejsWorker.ensureInitCodeFile(d,h,function(n,b){if(n)return c(n);var e=f(b,{});Gh.NodejsWorker.debug&&console.log("worker forked");e.on("message",function(m){"pong"===m.action?console.log("[WORKER pong] ",m):"log"===m.action&&console.log("[Message from WORKER] ",m.data)});e.once("message",function(m){Gh.NodejsWorker.debug&&console.log("worker setup done");c(null,e,m)});e.on("close",function(){Gh.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
e.send({action:"setup",data:{options:d}});global.WORKER=e})}};Gh.fork=Yk;Gh.fork=Yk;Gh.create=Mh;Gh.create=Mh;var TE=Object.freeze({__proto__:null,fork:Yk,create:Mh}),pe=lively.FreezerRuntime.recorderFor("lively.lang/index.js");pe.createLivelyLangObject=function(){return{chain:pe.chain,noConflict:pe.noConflict,installGlobals:pe.installGlobals,uninstallGlobals:pe.uninstallGlobals,globalInterfaceSpec:pe.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};pe.globalInstall=Bj;pe.chain=
Ql;pe.createChain=function(d,c){return Object.keys(d).reduce(function(h,f){h[f]=function(){var k=Array.prototype.slice.call(arguments);k=d[f].apply(null,[c].concat(k));return pe.chain(k)};return h},{value:function(){return c}})};pe.noConflict=Yo;pe.installGlobals=Jm;pe.installProperty=function(d,c){if(!d.isIn(pe.livelyLang))throw c=Error("property not provided by lively.lang: "+d),console.error(c.stack||c),c;d=d.get(pe.livelyLang);if("function"===typeof d&&"prototype"===c.slice(-2,-1).toString()){var h=
d;d=function(){var f=Array.prototype.slice.call(arguments);f.unshift(this);return h.apply(null,f)};d.toString=function(){return h.toString()}}c.set(pe.GLOBAL,d,!0)};pe.uninstallGlobals=vx;pe.string=ti;pe.num=Km;pe.fun=Jn;pe.Closure=Qj;pe.arr=eg;pe.obj=Ag;pe.properties=xp;pe.date=xu;pe.promise=ph;pe.Path=$h;pe.graph=wu;pe.interval=WE;pe.arrayProjection=VE;pe.Group=Kn;pe.grid=vz;pe.tree=vu;pe.events=uz;pe.messenger=UE;pe.worker=TE;pe.worker=TE;pe.worker=TE;pe.messenger=UE;pe.messenger=UE;pe.events=
uz;pe.events=uz;pe.tree=vu;pe.tree=vu;pe.grid=vz;pe.grid=vz;pe.arrayProjection=VE;pe.arrayProjection=VE;pe.interval=WE;pe.interval=WE;pe.graph=wu;pe.graph=wu;pe.date=xu;pe.date=xu;pe.properties=xp;pe.properties=xp;pe.obj=Ag;pe.obj=Ag;pe.arr=eg;pe.arr=eg;pe.fun=Jn;pe.fun=Jn;pe.num=Km;pe.num=Km;pe.string=ti;pe.string=ti;pe.Closure=Qj;pe.Closure=Qj;pe.promise=ph;pe.promise=ph;pe.Path=$h;pe.Path=$h;pe.Group=Kn;pe.Group=Kn;pe.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;pe.isNode="undefined"!==typeof pe.process&&pe.process.env&&"function"===typeof pe.process.exit;pe.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var wL=pe.createLivelyLangObject();pe.livelyLang=wL;pe.livelyLang=wL;pe.livelyLang=wL;pe.globalInstall=
Bj;pe.globalInstall=Bj;pe.chain=Ql;pe.chain=Ql;pe.noConflict=Yo;pe.noConflict=Yo;pe.installGlobals=Jm;pe.installGlobals=Jm;pe.uninstallGlobals=vx;pe.uninstallGlobals=vx;var T4=Object.freeze({__proto__:null,worker:TE,messenger:UE,events:uz,tree:vu,grid:vz,arrayProjection:VE,interval:WE,graph:wu,date:xu,properties:xp,obj:Ag,arr:eg,fun:Jn,num:Km,string:ti,Closure:Qj,promise:ph,Path:$h,Group:Kn,livelyLang:wL,globalInstall:Bj,chain:Ql,noConflict:Yo,installGlobals:Jm,uninstallGlobals:vx}),Vi=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");
Vi.parseUnit=function(d,c){c||(c=[0,""]);d=String(d);var h=parseFloat(d,10);c[0]=h;c[1]=d.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return c};Vi.unit=function(d){return Vi.parseUnit(d)[1]};Vi.unitLess=function(d){return Vi.parseUnit(d)[0]};Vi.genericCssLengthParser=ai;Vi.cssLengthToPixels=Ah;Vi.baseFontSize="16px";if(System.get("@system-env").browser)try{Vi.newBaseFontSize=Vi.genericCssLengthParser(Vi.baseFontSize)(window.getComputedStyle(document.body).fontSize),Vi.newBaseFontSize&&"NaN"!==Vi.newBaseFontSize.slice(0,
3)&&(Vi.baseFontSize=Vi.newBaseFontSize)}catch(d){}Vi.genericCssLengthParser=ai;Vi.genericCssLengthParser=ai;var hT=Vi.genericCssLengthParser(Vi.baseFontSize);Vi.parseCssLength=hT;Vi.parseCssLength=hT;Vi.parseCssLength=hT;Vi.cssLengthToPixels=Ah;Vi.cssLengthToPixels=Ah;var fe=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");fe.rect=Cl;fe.pt=Ii;fe.num=Km;fe.string=ti;fe.grid=vz;fe.cssLengthToPixels=Ah;var Jg=function(d,c){this.x=d||0;this.y=c||0};Jg.ensure=function(d){return d instanceof
fe.Point?d:new fe.Point(d.x,d.y)};Jg.polar=function(d,c){return new fe.Point(d*Math.cos(c),d*Math.sin(c))};Jg.random=function(d){return new fe.Point(fe.num.randomSmallerInteger(d.x),fe.num.randomSmallerInteger(d.y))};Jg.fromLiteral=function(d){return fe.pt(d.x,d.y)};Jg.fromTuple=function(d){return fe.pt(d[0],d[1])};Jg.prototype.getX=function(){return this.x};Jg.prototype.getY=function(){return this.y};Jg.prototype.toFixed=function(d){return new fe.Point(this.x.toFixed(d),this.y.toFixed(d))};Jg.prototype.addPt=
function(d){return new fe.Point(this.x+d.x,this.y+d.y)};Jg.prototype.addXY=function(d,c){return new fe.Point(this.x+d,this.y+c)};Jg.prototype.midPt=function(d){return new fe.Point((this.x+d.x)/2,(this.y+d.y)/2)};Jg.prototype.subPt=function(d){return new fe.Point(this.x-d.x,this.y-d.y)};Jg.prototype.subXY=function(d,c){return new fe.Point(this.x-d,this.y-c)};Jg.prototype.scaleBy=function(d,c){return new fe.Point(this.x*d,this.y*(c||d))};Jg.prototype.scaleByPt=function(d){return new fe.Point(this.x*
d.x,this.y*d.y)};Jg.prototype.negated=function(){return new fe.Point(-this.x,-this.y)};Jg.prototype.inverted=function(){return new fe.Point(1/this.x,1/this.y)};Jg.prototype.invertedSafely=function(){return new fe.Point(this.x&&1/this.x,this.y&&1/this.y)};Jg.prototype.lessPt=function(d){return this.x<d.x&&this.y<d.y};Jg.prototype.leqPt=function(d){return this.x<=d.x&&this.y<=d.y};Jg.prototype.eqPt=function(d){return this.x==d.x&&this.y==d.y};Jg.prototype.equals=function(d){return this.x==d.x&&this.y==
d.y};Jg.prototype.withX=function(d){return fe.pt(d,this.y)};Jg.prototype.withY=function(d){return fe.pt(this.x,d)};Jg.prototype.copy=function(){return new fe.Point(this.x,this.y)};Jg.prototype.minPt=function(d,c){c||(c=new fe.Point(0,0));c.x=Math.min(this.x,d.x);c.y=Math.min(this.y,d.y);return c};Jg.prototype.maxPt=function(d,c){c||(c=new fe.Point(0,0));c.x=Math.max(this.x,d.x);c.y=Math.max(this.y,d.y);return c};Jg.prototype.random=function(){return fe.Point.random(this)};Jg.prototype.normalized=
function(){var d=this.r();return fe.pt(this.x/d,this.y/d)};Jg.prototype.fastNormalized=function(){var d=this.fastR();return fe.pt(this.x/d,this.y/d)};Jg.prototype.dotProduct=function(d){return this.x*d.x+this.y*d.y};Jg.prototype.matrixTransform=function(d,c){var h=d.a*this.x+d.c*this.y+d.e;d=d.b*this.x+d.d*this.y+d.f;return c?Object.assign(c,{x:h,y:d}):fe.pt(h,d)};Jg.prototype.matrixTransformDirection=function(d,c){var h=d.a*this.x+d.c*this.y;d=d.b*this.x+d.d*this.y;return c?Object.assign(c,{x:h,
y:d}):fe.pt(h,d)};Jg.prototype.griddedBy=function(d){return fe.pt(this.x-this.x%d.x,this.y-this.y%d.y)};Jg.prototype.roundTo=function(d){return new fe.Point(fe.num.roundTo(this.x,d),fe.num.roundTo(this.y,d))};Jg.prototype.dist=function(d){var c=this.x-d.x;d=this.y-d.y;return Math.sqrt(c*c+d*d)};Jg.prototype.distSquared=function(d){var c=this.x-d.x;d=this.y-d.y;return c*c+d*d};Jg.prototype.nearestPointOnLineBetween=function(d,c){if(d.x==c.x)return fe.pt(d.x,this.y);if(d.y==c.y)return fe.pt(this.x,
d.y);var h=d.x;d=d.y;var f=c.x-h;c=c.y-d;var k=((this.y-d)/f+(this.x-h)/c)/(f/c+c/f);return fe.pt(h+k*f,d+k*c)};Jg.prototype.interpolate=function(d,c,h){return void 0===h||h?fe.pt(fe.num.interpolate(d,this.x,c.x),fe.num.interpolate(d,this.y,c.y)):fe.Point.polar(fe.num.interpolate(d,this.r(),c.r()),fe.num.interpolate(d,this.theta(),c.theta()))};Jg.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Jg.prototype.fastR=function(){for(var d=this.x*this.x+this.y*this.y,c=17,h=0;6>h;h++)c=
(c+d/c)/2;return c};Jg.prototype.theta=function(){return Math.atan2(this.y,this.x)};Jg.prototype.asRectangle=function(){return new fe.Rectangle(this.x,this.y,0,0)};Jg.prototype.extent=function(d){return new fe.Rectangle(this.x,this.y,d.x,d.y)};Jg.prototype.extentAsRectangle=function(){return new fe.Rectangle(0,0,this.x,this.y)};Jg.prototype.lineTo=function(d){return new fe.Line(this,d)};Jg.prototype.toTuple=function(){return[this.x,this.y]};Jg.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
Jg.prototype.toString=function(d){return void 0===d||d?fe.string.format("pt(%1.f,%1.f)",this.x,this.y):fe.string.format("pt(%10.d,%10.d)",this.x,this.y)};Jg.prototype.inspect=function(){return JSON.stringify(this)};Jg.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(Jg.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ba("ah",Jg);fe.Point=Jg;var Le=function(d,
c,h,f){this.x=d||0;this.y=c||0;this.width=h||0;this.height=f||0};Le.fromAny=function(d,c){return fe.rect(d.minPt(c),d.maxPt(c))};Le.fromLiteral=function(d){return new fe.Rectangle(d.x,d.y,d.width,d.height)};Le.fromTuple=function(d){return new fe.Rectangle(d[0],d[1],d[2],d[3])};Le.unionPts=function(d){for(var c=d[0],h=d[0],f=1;f<d.length;f++)c=c.minPt(d[f]),h=h.maxPt(d[f]);return fe.rect(c,h)};Le.ensure=function(d){return d instanceof fe.Rectangle?d:new fe.Rectangle(d.x,d.y,d.width,d.height)};Le.fromElement=
function(d){if("function"===typeof d.getBoundingClientRect){var c=d.getBoundingClientRect();return fe.rect(c.left,c.top,c.width,c.height)}if("http://www.w3.org/1999/xhtml"==d.namespaceURI){c=fe.cssLengthToPixels(d.style.left||"0px");var h=fe.cssLengthToPixels(d.style.top||"0px"),f=fe.cssLengthToPixels(d.style.width||"0px");d=fe.cssLengthToPixels(d.style.hieght||"0px");return new fe.Rectangle(c,h,f,d)}if("http://www.w3.org/2000/svg"==d.namespaceURI)return new fe.Rectangle(d.x.baseVal.value,d.y.baseVal.value,
d.width.baseVal.value,d.height.baseVal.value);throw Error("Cannot create Rectangle from "+d);};Le.inset=function(d,c,h,f){void 0===c&&(c=d);void 0===h&&(h=d);void 0===f&&(f=c);return new fe.Rectangle(d,c,h-d,f-c)};Le.prototype.getX=function(){return this.x};Le.prototype.getY=function(){return this.y};Le.prototype.getWidth=function(){return this.width};Le.prototype.getHeight=function(){return this.height};Le.prototype.copy=function(){return new fe.Rectangle(this.x,this.y,this.width,this.height)};Le.prototype.toFixed=
function(d){return new fe.Rectangle(this.x.toFixed(d),this.y.toFixed(d),this.width.toFixed(d),this.height.toFixed(d))};Le.prototype.withWidth=function(d){return new fe.Rectangle(this.x,this.y,d,this.height)};Le.prototype.withHeight=function(d){return new fe.Rectangle(this.x,this.y,this.width,d)};Le.prototype.withX=function(d){return new fe.Rectangle(d,this.y,this.width,this.height)};Le.prototype.withY=function(d){return new fe.Rectangle(this.x,d,this.width,this.height)};Le.prototype.withExtent=function(d){return new fe.Rectangle(this.x,
this.y,d.x,d.y)};Le.prototype.withTopLeft=function(d){return fe.Rectangle.fromAny(d,this.bottomRight())};Le.prototype.withTopRight=function(d){return fe.Rectangle.fromAny(this.bottomLeft(),d)};Le.prototype.withBottomRight=function(d){return fe.Rectangle.fromAny(d,this.topLeft())};Le.prototype.withBottomLeft=function(d){return fe.Rectangle.fromAny(d,this.topRight())};Le.prototype.withLeftCenter=function(d){return new fe.Rectangle(d.x,this.y,this.width+(this.x-d.x),this.height)};Le.prototype.withRightCenter=
function(d){return new fe.Rectangle(this.x,this.y,d.x-this.x,this.height)};Le.prototype.withTopCenter=function(d){return new fe.Rectangle(this.x,d.y,this.width,this.height+(this.y-d.y))};Le.prototype.withBottomCenter=function(d){return new fe.Rectangle(this.x,this.y,this.width,d.y-this.y)};Le.prototype.withCenter=function(d){return new fe.Rectangle(d.x-this.width/2,d.y-this.height/2,this.width,this.height)};Le.prototype.insetBy=function(d){return new fe.Rectangle(this.x+d,this.y+d,this.width-2*d,
this.height-2*d)};Le.prototype.insetByPt=function(d){return new fe.Rectangle(this.x+d.x,this.y+d.y,this.width-2*d.x,this.height-2*d.y)};Le.prototype.grid=function(d,c){var h=this.width/c,f=this.height/d;return fe.grid.mapCreate(d,c,function(k,n){return new fe.Rectangle(h*n,f*k,h,f)})};Le.prototype.divide=function(d){var c=this;return d.map(function(h){return fe.rect(c.x+c.width*h.x,c.y+c.height*h.y,c.width*h.width,c.height*h.height)})};Le.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};Le.prototype.lineTo=function(d){var c=this.center(),h=d.center();h=c.lineTo(h);c=this.lineIntersection(h)[0];d=d.lineIntersection(h)[0];return c&&d&&c.lineTo(d)};Le.prototype.equals=function(d){return d?this.x==d.x&&this.y==d.y&&this.width==d.width&&this.height==d.height:!1};Le.prototype.inspect=function(){return JSON.stringify(this)};Le.prototype.topLeft=function(){return new fe.Point(this.x,this.y)};Le.prototype.topRight=function(){return new fe.Point(this.maxX(),this.y)};Le.prototype.bottomRight=
function(){return new fe.Point(this.maxX(),this.maxY())};Le.prototype.bottomLeft=function(){return new fe.Point(this.x,this.maxY())};Le.prototype.leftCenter=function(){return new fe.Point(this.x,this.center().y)};Le.prototype.rightCenter=function(){return new fe.Point(this.maxX(),this.center().y)};Le.prototype.topCenter=function(){return new fe.Point(this.center().x,this.y)};Le.prototype.bottomCenter=function(){return new fe.Point(this.center().x,this.maxY())};Le.prototype.extent=function(){return new fe.Point(this.width,
this.height)};Le.prototype.center=function(){return new fe.Point(this.x+this.width/2,this.y+this.height/2)};Le.prototype.topEdge=function(){return new fe.Line(this.topLeft(),this.topRight())};Le.prototype.bottomEdge=function(){return new fe.Line(this.bottomLeft(),this.bottomRight())};Le.prototype.leftEdge=function(){return new fe.Line(this.topLeft(),this.bottomLeft())};Le.prototype.rightEdge=function(){return new fe.Line(this.topRight(),this.bottomRight())};Le.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};Le.prototype.allPoints=function(){for(var d=this.x,c=this.y,h=this.width,f=this.height,k=[],n=c;n<c+f;n++)for(var b=d;b<d+h;b++)k.push(fe.pt(b,n));return k};Le.prototype.isNonEmpty=function(d){return 0<this.width&&0<this.height};Le.prototype.containsRect=function(d){return this.x<=d.x&&this.y<=d.y&&d.maxX()<=this.maxX()&&d.maxY()<=this.maxY()};Le.prototype.intersects=function(d){return this.intersection(d).isNonEmpty()};Le.prototype.containsPoint=
function(d){return this.x<=d.x&&d.x<=this.x+this.width&&this.y<=d.y&&d.y<=this.y+this.height};Le.prototype.translatedBy=function(d){return new fe.Rectangle(this.x+d.x,this.y+d.y,this.width,this.height)};Le.prototype.scaleByRect=function(d){return new fe.Rectangle(this.x+d.x*this.width,this.y+d.y*this.height,d.width*this.width,d.height*this.height)};Le.prototype.scaleRectIn=function(d){return new fe.Rectangle((this.x-d.x)/d.width,(this.y-d.y)/d.height,this.width/d.width,this.height/d.height)};Le.prototype.scaleRectTo=
function(d){var c,h;this.width>this.height?h=this.width:c=this.height;d=h?d.width/h:d.height/c;return this.withExtent(this.extent().scaleBy(d)).withCenter(this.center())};Le.prototype.expandBy=function(d){return this.insetBy(0-d)};Le.prototype.translateForInclusion=function(d){var c=d.x,h=d.y,f=c+d.width,k=h+d.height;f>this.right()&&(c-=f-this.right());k>this.bottom()&&(h-=k-this.bottom());c<this.x&&(c=this.x);h<this.y&&(h=this.y);return fe.rect(c,h,d.width,d.height)};Le.prototype.transformRectForInclusion=
function(d){var c=this.topLeft().maxPt(d.topLeft());d=c.addPt(d.extent());d=this.bottomRight().minPt(d);return fe.rect(c,d)};Le.prototype.insetByRect=function(d){return new fe.Rectangle(this.x+d.left(),this.y+d.top(),this.width-(d.left()+d.right()),this.height-(d.top()+d.bottom()))};Le.prototype.outsetByRect=function(d){return new fe.Rectangle(this.x-d.left(),this.y-d.top(),this.width+(d.left()+d.right()),this.height+(d.top()+d.bottom()))};Le.prototype.interpolate=function(d,c){var h=this.topLeft(),
f=this.bottomRight(),k=c.topLeft();c=c.bottomRight();return fe.Rectangle.fromAny(h.interpolate(d,k),f.interpolate(d,c))};Le.prototype.intersection=function(d){var c=Math.max(this.x,d.x),h=Math.max(this.y,d.y);return new fe.Rectangle(c,h,Math.min(this.x+this.width,d.x+d.width)-c,Math.min(this.y+this.height,d.y+d.height)-h)};Le.prototype.union=function(d){return fe.rect(this.topLeft().minPt(d.topLeft()),this.bottomRight().maxPt(d.bottomRight()))};Le.prototype.lineIntersection=function(d){return this.edges().map(function(c){return c.intersection(d)}).filter(function(c){return!!c})};
Le.prototype.dist=function(d){var c=this.closestPointToPt(d.center());d=d.closestPointToPt(c);return c.dist(d)};Le.prototype.relativeToAbsPoint=function(d){return new fe.Point(this.x+this.width*d.x,this.y+this.height*d.y)};Le.prototype.closestPointToPt=function(d){return fe.pt(Math.min(Math.max(this.x,d.x),this.maxX()),Math.min(Math.max(this.y,d.y),this.maxY()))};Le.prototype.maxX=function(){return this.x+this.width};Le.prototype.maxY=function(){return this.y+this.height};Le.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};Le.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};Le.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};Le.prototype.randomPoint=function(){return fe.Point.random(fe.pt(this.width,this.height)).addPt(this.topLeft())};Le.prototype.constrainPt=function(d){return d.maxPt(this.topLeft()).minPt(this.bottomRight())};Le.prototype.left=function(){return this.x};Le.prototype.right=function(){return this.maxX()};
Le.prototype.top=function(){return this.y};Le.prototype.bottom=function(){return this.maxY()};Le.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};Le.prototype.toAttributeValue=function(d){d=.01;var c=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&c.push(this.top()):c=c.concat([this.top(),this.right(),this.bottom()]);return c.invoke("roundTo",d||.01)};Le.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};Le.prototype.partNamed=function(d){return this[d].call(this)};Le.prototype.withPartNamed=function(d,c){return this[this.setterName(d)].call(this,c)};Le.prototype.setterName=function(d){return"with"+d[0].toUpperCase()+d.slice(1)};Le.prototype.partNameNear=function(d,c,h){d=this.partNameNearest(d,c);return c.dist(this.partNamed(d))<h?d:null};Le.prototype.partNameNearest=function(d,c){for(var h=1E99,f,k=0;k<d.length;k++){f=d[k];var n=c.dist(this.partNamed(f));if(n<
h){var b=f;h=n}}return b};Le.prototype.toString=function(){return fe.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};Le.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(Le.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ba("a1",Le);fe.Rectangle=Le;var el=function(d,c,h){d?d instanceof fe.Point?(c=c||0,void 0===h&&(h=fe.pt(1,1)),this.a=this.ensureNumber(h.x*Math.cos(c)),this.b=this.ensureNumber(h.y*Math.sin(c)),this.c=this.ensureNumber(h.x*-Math.sin(c)),this.d=this.ensureNumber(h.y*Math.cos(c)),this.e=this.ensureNumber(d.x),this.f=this.ensureNumber(d.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(d):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};el.prototype.copy=function(){return new fe.Transform(this)};el.prototype.fromMatrix=function(d){this.a=this.ensureNumber(d.a);this.b=this.ensureNumber(d.b);this.c=this.ensureNumber(d.c);this.d=this.ensureNumber(d.d);this.e=this.ensureNumber(d.e);this.f=this.ensureNumber(d.f)};el.prototype.getRotation=function(){var d=fe.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(d)<this.eps?0:d};el.prototype.getScale=function(){var d=this.a,c=this.c;d=Math.sqrt(d*d+c*c);return Math.abs(d-1)<this.eps?1:d};el.prototype.getScalePoint=function(){var d=this.a,c=this.b,h=this.c,f=this.d,k=Math.atan2(-h,d);return fe.pt(Math.sqrt(d*d+h*h),Math.abs(c)>Math.abs(f)?c/Math.sin(k):f/Math.cos(k))};el.prototype.getTranslation=function(){return fe.pt(this.e,this.f)};el.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};el.prototype.toSVGAttributeValue=
function(){var d=this.getTranslation();d="translate("+d.x+","+d.y+")";var c=this.getRotation(),h=this.getScalePoint();0!=c&&(d+=" rotate("+this.getRotation()+")");if(1!=h.x||1!=h.y)d+=" scale("+h.x+","+h.y+")";return d};el.prototype.toCSSValue=function(d){var c="",h=this.getTranslation();c+="translate("+h.x.toFixed(2)+"px,"+h.y.toFixed(2)+"px)";if(d){h=d.width/2;var f=d.height/2;c+=" translate("+h.toFixed(2)+"px,"+f.toFixed(2)+"px)"}0!=this.getRotation()&&(c+=" rotate("+this.getRotation().toFixed(2)+
"deg)");d&&(h=d.width/2,f=d.height/2,c+=" translate("+(-1*h).toFixed(2)+"px,"+(-1*f).toFixed(2)+"px)");d=this.getScalePoint();if(1!=d.x||1!=d.y)c+=" scale("+d.x.toFixed(2)+","+d.y.toFixed(2)+")";return c};el.prototype.toCSSTransformString=function(){var d=this.getRotation(),c=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+d+"deg) scale("+c+","+c+")"};el.prototype.toString=function(){return this.toCSSTransformString()};el.prototype.toMatrix=function(){return this.copy()};el.prototype.transformPoint=
function(d,c){return d.matrixTransform(this,c)};el.prototype.transformDirection=function(d,c){return d.matrixTransformDirection(this,c)};el.prototype.matrixTransformForMinMax=function(d,c,h){var f=this.a*d.x+this.c*d.y+this.e;d=this.b*d.x+this.d*d.y+this.f;f>h.x&&(h.x=f);d>h.y&&(h.y=d);f<c.x&&(c.x=f);d<c.y&&(c.y=d)};el.prototype.transformRectToRect=function(d){var c=fe.pt(Infinity,Infinity),h=fe.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(d.topLeft(),c,h);this.matrixTransformForMinMax(d.bottomRight(),
c,h);this.isTranslation()||(this.matrixTransformForMinMax(d.topRight(),c,h),this.matrixTransformForMinMax(d.bottomLeft(),c,h));return fe.rect(c,h)};el.prototype.preConcatenate=function(d){var c=this.matrix_||this.toMatrix();this.a=d.a*c.a+d.c*c.b;this.b=d.b*c.a+d.d*c.b;this.c=d.a*c.c+d.c*c.d;this.d=d.b*c.c+d.d*c.d;this.e=d.a*c.e+d.c*c.f+d.e;this.f=d.b*c.e+d.d*c.f+d.f;this.matrix_=this.toMatrix();return this};el.prototype.invert=function(){var d=this.copy(),c=1/(d.a*d.d-d.c*d.b);this.a=d.d*c;this.b=
-d.b*c;this.c=-d.c*c;this.d=d.a*c;this.e=(d.c*d.f-d.e*d.d)*c;this.f=-(d.a*d.f-d.b*d.e)*c;return this};el.prototype.inverse=function(){var d=this.matrix_||this.toMatrix();d=new this.constructor(d);d.invert();return d};el.prototype.ensureNumber=function(d){if(isNaN(d))throw Error("not a number");return d};el.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(el.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});fe.Transform=el;var zn=function(d,c){this.start=d;this.end=c};zn.fromCoords=function(d,c,h,f){return new fe.Line(fe.pt(d,c),fe.pt(h,f))};zn.prototype.withStart=function(d){return new fe.Line(d,this.end)};zn.prototype.withEnd=function(d){return new fe.Line(this.start,d)};zn.prototype.sampleN=function(d){d=d||10;for(var c=
this.end.subPt(this.start).scaleBy(1/d),h=[],f=0;f<=d;f++)h.push(this.start.addPt(c.scaleBy(f)));return h};zn.prototype.sample=function(d){return this.sampleN(this.length()/d)};zn.prototype.length=function(){return this.start.dist(this.end)};zn.prototype.equals=function(d){return d?this.start.eqPt(d.start)&&this.end.eqPt(d.end):!1};zn.prototype.distanceFromLine=function(d){var c=this.start.x,h=this.start.y,f=this.end.x,k=this.end.y;return Math.abs((k-h)*d.x-(f-c)*d.y+f*h-k*c)/Math.sqrt(Math.pow(k-
h,2)+Math.pow(f-c,2))};zn.prototype.includesPoint=function(d,c){var h=this.start.x,f=this.start.y,k=this.end.x,n=this.end.y,b=d.x;d=d.y;var e=0===(k-h)*(d-f)-(b-h)*(n-f);if(c||!e)return e;c=Math.min(f,n);e=Math.max(h,k);f=Math.max(f,n);return Math.min(h,k)<=b&&b<=e&&c<=d&&d<=f};zn.prototype.intersection=function(d,c){var h=this.start,f=this.end,k=d.start,n=d.end;d=h.x;h=h.y;var b=f.x;f=f.y;var e=k.x;k=k.y;var m=n.x;n=n.y;var a=((d*f-h*b)*(e-m)-(d-b)*(e*n-k*m))/((d-b)*(k-n)-(h-f)*(e-m)),g=((d*f-h*
b)*(k-n)-(h-f)*(e*n-k*m))/((d-b)*(k-n)-(h-f)*(e-m));return Infinity!==a&&Infinity!==g&&(c||fe.num.between(a,d,b,1E-4)&&fe.num.between(g,h,f,1E-4)&&fe.num.between(a,e,m,1E-4)&&fe.num.between(g,k,n,1E-4))?fe.pt(a,g):null};zn.prototype.perpendicularLine=function(d,c,h){d=void 0===d?0:d;c=void 0===c?1:c;h=void 0===h?"cc":h;var f=this.start,k=this.toVector();d=f.addPt(k.scaleBy(d));h=k.theta()+("cc"===h?-1:1)*Math.PI/2;return new fe.Line(d,d.addPt(fe.Point.polar(c,h)))};zn.prototype.toVector=function(){return this.end.subPt(this.start)};
zn.prototype.toString=function(){return fe.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};zn.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(zn.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});fe.Line=zn;fe.rect=Cl;fe.rect=Cl;fe.pt=Ii;fe.pt=Ii;var lha=
Object.freeze({__proto__:null,Point:Jg,Rectangle:Le,Transform:el,Line:zn,rect:Cl,pt:Ii}),Td=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");Td.parse=wz;Td.Color=function(d){this._listeners={};this.subscribe(Td.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Td.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Td.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(Td.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Td.Events.INT_UPDATED,this._INTUpdated);this.parse(d)};
Td.parse=wz;Td.parse=wz;Td.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",UPDATED:"updated"};Td.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",
chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",
deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",
lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",
mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",
pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Td.absround=
function(d){return.5+d<<0};Td.hue2rgb=function(d,c,h){0>h&&(h+=1);1<h&&--h;return h<1/6?d+6*(c-d)*h:.5>h?c:h<2/3?d+(c-d)*(2/3-h)*6:d};Td.p2v=function(d){return Td.isPercent.test(d)?Td.absround(2.55*parseInt(d)):d};Td.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Td.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Td.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;Td.isPercent=/^\d+(\.\d+)*%$/;Td.hexBit=/([0-9a-f])/gi;Td.leadHex=/^#/;Td.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;
Td.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Td.Color.prototype._decimal=0;Td.Color.prototype._hex="#000000";Td.Color.prototype._red=0;Td.Color.prototype._green=0;Td.Color.prototype._blue=0;Td.Color.prototype._hue=0;Td.Color.prototype._saturation=0;Td.Color.prototype._lightness=0;Td.Color.prototype._brightness=0;Td.Color.prototype._alpha=1;Td.Color.prototype.parse=function(d){if("undefined"==typeof d)return this;switch(!0){case isFinite(d):this.decimal(d);
this.output=Td.Color.INT;break;case d instanceof Td.Color:this.copy(d);break;default:switch(typeof d){case "object":this.set(d);break;case "string":switch(!0){case Td.namedColors.hasOwnProperty(d):d=Td.namedColors[d];d=d.replace(Td.leadHex,"");this.decimal(parseInt(d,16));break;case Td.isHex.test(d):d=d.replace(Td.leadHex,"");3==d.length&&(d=d.replace(Td.hexBit,"$1$1"));this.decimal(parseInt(d,16));break;case Td.isRGB.test(d):d=d.match(Td.matchRGB);this.red(Td.p2v(d[1]));this.green(Td.p2v(d[2]));
this.blue(Td.p2v(d[3]));this.alpha(parseFloat(d[5])||1);this.output=(Td.isPercent.test(d[1])?2:1)+(d[5]?2:0);break;case Td.isHSL.test(d):d=d.match(Td.matchHSL),this.hue(parseInt(d[1])),this.saturation(parseInt(d[2])),this.lightness(parseInt(d[3])),this.alpha(parseFloat(d[5])||1),this.output=d[5]?6:5}}}return this};Td.Color.prototype.clone=function(){return new Td.Color(this.decimal())};Td.Color.prototype.copy=function(d){this.set(d.decimal());return this};Td.Color.prototype.set=function(d,c){if(1==
arguments.length)if("object"==typeof d)for(var h in d){if("function"==typeof this[h])this[h](d[h])}else isFinite(d)&&this.decimal(d);else if("function"==typeof this[d])this[d](c);return this};Td.Color.prototype.interpolate=function(d,c){d instanceof Td.Color||(d=new Td.Color(d));this._red=Td.absround(+this._red+(d._red-this._red)*c);this._green=Td.absround(+this._green+(d._green-this._green)*c);this._blue=Td.absround(+this._blue+(d._blue-this._blue)*c);this._alpha=Td.absround(+this._alpha+(d._alpha-
this._alpha)*c);this.broadcast(Td.Events.RGB_UPDATED);this.broadcast(Td.Events.UPDATED);return this};Td.Color.prototype._RGB2HSL=function(){var d=this._red/255,c=this._green/255,h=this._blue/255,f=Math.max(d,c,h),k=Math.min(d,c,h),n=(f+k)/2;if(f==k)this._saturation=this._hue=0;else{var b=f-k;k=b/(.5>=n?f+k:2-f-k);this._hue=Td.absround((f==d?(c-h)/b+(c<h?6:0):f==c?(h-d)/b+2:(d-c)/b+4)/6*360);this._saturation=Td.absround(100*k)}this._lightness=Td.absround(100*n);this._brightness=Td.absround(100*f)};
Td.Color.prototype._HSL2RGB=function(){var d=this._hue/360,c=this._saturation/100,h=this._lightness/100;c=.5>h?h*(1+c):h+c-h*c;h=2*h-c;this._red=Td.absround(255*Td.hue2rgb(h,c,d+1/3));this._green=Td.absround(255*Td.hue2rgb(h,c,d));this._blue=Td.absround(255*Td.hue2rgb(h,c,d-1/3))};Td.Color.prototype._HSV2RGB=function(){var d=this._hue/360,c=this._saturation/100,h=this._brightness/100,f=0,k=0,n=0,b=Math.floor(6*d),e=6*d-b;d=h*(1-c);var m=h*(1-e*c);c=h*(1-(1-e)*c);switch(b%6){case 0:f=h;k=c;n=d;break;
case 1:f=m;k=h;n=d;break;case 2:f=d;k=h;n=c;break;case 3:f=d;k=m;n=h;break;case 4:f=c;k=d;n=h;break;case 5:f=h,k=d,n=m}this._red=Td.absround(255*f);this._green=Td.absround(255*k);this._blue=Td.absround(255*n)};Td.Color.prototype._INT2HEX=function(){var d=this._decimal.toString(16);d="000000".substr(0,6-d.length)+d;this._hex="#"+d.toUpperCase()};Td.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Td.Color.prototype._HEX2INT=
function(){this._decimal=parseInt(this._hex,16)};Td.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Td.Color.prototype._RGBUpdated=function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Td.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Td.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};Td.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};
Td.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Td.Color.prototype._broadcastUpdate=function(){this.broadcast(Td.Events.UPDATED)};Td.Color.prototype.decimal=function(d){return this._handle("_decimal",d,Td.Events.INT_UPDATED)};Td.Color.prototype.hex=function(d){return this._handle("_hex",d,Td.Events.HEX_UPDATED)};Td.Color.prototype.red=function(d){return this._handle("_red",d,Td.Events.RGB_UPDATED)};Td.Color.prototype.green=function(d){return this._handle("_green",
d,Td.Events.RGB_UPDATED)};Td.Color.prototype.blue=function(d){return this._handle("_blue",d,Td.Events.RGB_UPDATED)};Td.Color.prototype.hue=function(d){return this._handle("_hue",d,Td.Events.HSL_UPDATED)};Td.Color.prototype.saturation=function(d){return this._handle("_saturation",d,Td.Events.HSL_UPDATED)};Td.Color.prototype.lightness=function(d){return this._handle("_lightness",d,Td.Events.HSL_UPDATED)};Td.Color.prototype.brightness=function(d){return this._handle("_brightness",d,Td.Events.HSV_UPDATED)};
Td.Color.prototype.alpha=function(d){return this._handle("_alpha",d)};Td.Color.prototype._handle=function(d,c,h){"undefined"!=typeof this[d]&&"undefined"!=typeof c&&(c!=this[d]&&(this[d]=c,h&&this.broadcast(h)),this.broadcast(Td.Events.UPDATED));return this[d]};Td.Color.prototype.getHex=function(){return this._hex};Td.Color.prototype.getRGB=function(){return"rgb("+[Td.absround(this._red),Td.absround(this._green),Td.absround(this._blue)].join(", ")+")"};Td.Color.prototype.getPRGB=function(){return"rgb("+
[Td.absround(100*this._red/255)+"%",Td.absround(100*this._green/255)+"%",Td.absround(100*this._blue/255)+"%"].join(", ")+")"};Td.Color.prototype.getRGBA=function(){return"rgba("+[Td.absround(this._red),Td.absround(this._green),Td.absround(this._blue),this._alpha].join(", ")+")"};Td.Color.prototype.getPRGBA=function(){return"rgba("+[Td.absround(100*this._red/255)+"%",Td.absround(100*this._green/255)+"%",Td.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};Td.Color.prototype.getHSL=function(){return"hsl("+
[Td.absround(this._hue),Td.absround(this._saturation)+"%",Td.absround(this._lightness)+"%"].join(", ")+")"};Td.Color.prototype.getHSLA=function(){return"hsla("+[Td.absround(this._hue),Td.absround(this._saturation)+"%",Td.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Td.Color.prototype.format=function(d){var c={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},h;for(h in c)d=d.split("%"+
h+"%").join(c[h]);return d};Td.Color.prototype.output=0;Td.Color.HEX=0;Td.Color.RGB=1;Td.Color.PRGB=2;Td.Color.RGBA=3;Td.Color.PRGBA=4;Td.Color.HSL=5;Td.Color.HSLA=6;Td.Color.INT=7;Td.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};Td.Color.prototype._listeners=null;Td.Color.prototype._isSubscribed=
function(d){return null!=this._listeners[d]};Td.Color.prototype.subscribe=function(d,c){this._isSubscribed(d)||(this._listeners[d]=[]);this._listeners[d].push(c)};Td.Color.prototype.unsubscribe=function(d,c){if(this._isSubscribed(d))for(var h=this._listeners[d],f=0,k=h.length;f<k;f++)if(h[f]===c)return h.splice(f,1),this.unsubscribe(d,c)};Td.Color.prototype.broadcast=function(d,c){if(this._isSubscribed(d)){d=this._listeners[d];for(var h=d.length,f=0;f<h;f++)d[f].apply(this,c)}};Td.Color.prototype.tween=
function(d,c){c instanceof Td.Color||(c=new Td.Color(c));var h=+new Date,f=this;this.broadcast("tweenStart");var k=setInterval(function(){var n=Math.min(1,(+new Date-h)/d);f.interpolate(c,n);f.broadcast("tweenProgress");1==n&&(clearInterval(k),f.broadcast("tweenComplete"))},20);return k};Td.Color.prototype.bind=function(d,c){var h=this;this.subscribe("updated",function(){d[c]=h.toString()})};Td.Color.random=function(){return new Td.Color(Td.absround(16777215*Math.random()))};Td.Color.bind=function(d,
c){var h=new Td.Color(d[c]);h.bind(d,c);return h};var ce=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");ce.floor=function(d){return Math.floor(255.99*d)};ce.pad=function(d,c,h){h=void 0===h?ce.arr.last:h;return[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(Array(Math.max(c-d.length,0)).fill(h(d))))};ce.num=Km;ce.obj=Ag;ce.arr=eg;ce.parse=wz;ce.Rectangle=Le;ce.rect=Cl;ce.pt=Ii;ce.Point=Jg;ce.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var CD=function(){};CD.prototype.offsets=function(){return null};CD.prototype.stepCount=function(){return 0};CD.prototype.stepSize=function(){return 0};CD.prototype.chord=function(d){var c=this,h=d.hue,f=d.saturation,k=d.brightness;return(this.offsets()||ce.arr.range(0,this.steps()).map(function(n){return n*c.stepSize()})).map(function(n){return ce.Color.hsb(h+n%360,f,k)})};$jscomp.global.Object.defineProperties(CD.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
ce.ColorHarmony=CD;var uy=function(){return ce.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(uy,ce.ColorHarmony);uy.prototype.steps=function(){return 1};uy.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(uy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Ba("b6",uy);ce.Complementary=uy;var vy=function(){return ce.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(vy,ce.ColorHarmony);vy.prototype.steps=function(){return 2};
vy.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(vy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Ba("b7",vy);ce.Triadic=vy;var SA=function(){return ce.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(SA,ce.ColorHarmony);SA.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(SA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Ba("b8",SA);ce.Tetradic=
SA;var wy=function(){return ce.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(wy,ce.ColorHarmony);wy.prototype.steps=function(){return 3};wy.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(wy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Ba("b9",wy);ce.Quadratic=wy;var xy=function(){return ce.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(xy,ce.ColorHarmony);xy.prototype.steps=function(){return 5};xy.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(xy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Ba("ba",xy);ce.Analogous=xy;var TA=function(){return ce.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(TA,ce.ColorHarmony);TA.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(TA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Ba("bb",TA);ce.Neutral=
TA;var Hg=function(d,c,h,f){this.r=d||0;this.g=c||0;this.b=h||0;this.a=f||(0===f?0:1)};Hg.random=function(d,c){void 0===d&&(d=0);void 0===c&&(c=255);return ce.Color.rgb(ce.num.random(d,c),ce.num.random(d,c),ce.num.random(d,c))};Hg.hsb=function(d,c,h){if(0==c)return new ce.Color(h,h,h);var f=d%360/60;d=Math.floor(f);var k=f-d;f=(1-c)*h;var n=(1-c*k)*h;c=(1-c*(1-k))*h;switch(d){case 0:return new ce.Color(h,c,f);case 1:return new ce.Color(n,h,f);case 2:return new ce.Color(f,h,c);case 3:return new ce.Color(f,
n,h);case 4:return new ce.Color(c,f,h);case 5:return new ce.Color(h,f,n);default:return new ce.Color(0,0,0)}};Hg.wheel=function(d){return ce.Color.wheelHsb(void 0===d?10:d,0,.9,.7)};Hg.wheelHsb=function(d,c,h,f){for(var k=Array(d),n=360/Math.max(d,1),b=0;b<d;b++)k[b]=ce.Color.hsb(c+b*n,h,f);return k};Hg.rgb=function(d,c,h){return new ce.Color(d/255,c/255,h/255)};Hg.rgbHex=function(d){return(d=this.parseHex(d))&&0<=d[0]&&0<=d[1]&&0<=d[2]?new ce.Color(d[0],d[1],d[2]):null};Hg.rgba=function(d,c,h,f){return new ce.Color(d/
255,c/255,h/255,f)};Hg.fromLiteral=function(d){return new ce.Color(d.r,d.g,d.b,d.a)};Hg.fromTuple=function(d){return new ce.Color(d[0],d[1],d[2],d[3])};Hg.fromTuple8Bit=function(d){return new ce.Color(d[0]/255,d[1]/255,d[2]/255,d[3]/255)};Hg.fromString=function(d){return d&&"none"!==d?this.fromTuple(this.parse(d)):null};Hg.parse=function(d){return d&&"none"!==d?(d=ce.parse(d),[d.red,d.green,d.blue,d.alpha]):null};Hg.parseRGB=function(d){var c=d.match(this.rgbaRegex);if(c){d=parseInt(c[1])/(c[2]?100:
255);var h=parseInt(c[3])/(c[4]?100:255),f=parseInt(c[5])/(c[6]?100:255);c=c[7]?parseFloat(c[7]):1;return[d,h,f,c]}return null};Hg.parseHex=function(d){var c;var h="";for(c=0;c<d.length;c++){var f=d[c].toLowerCase();if("a"==f||"b"==f||"c"==f||"d"==f||"e"==f||"f"==f||"0"==f||"1"==f||"2"==f||"3"==f||"4"==f||"5"==f||"6"==f||"7"==f||"8"==f||"9"==f)h+=f}if(6==h.length)c=h.substring(0,2),d=h.substring(2,4),h=h.substring(4,6);else if(3==h.length)c=h.substring(0,1),c+=c,d=h.substring(1,2),d+=d,h=h.substring(2,
3),h+=h;else return null;c=parseInt(c,16)/255;d=parseInt(d,16)/255;h=parseInt(h,16)/255;return[c,d,h]};Hg.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};Hg.prototype.equals=function(d){return d?this.r===d.r&&this.g===d.g&&this.b===d.b&&this.a===d.a:!1};Hg.prototype.darker=function(d){var c=this.mixedWith(ce.Color.black,.5);return 1<d?c.darker(d-1):c};Hg.prototype.lighter=function(d){if(0==d)return this;var c=this.mixedWith(ce.Color.white,.5);return 1<d?c.lighter(d-1):c};Hg.prototype.interpolate=
function(d,c){if(c.isGradient)return c.interpolate(1-d,this);c=ce.obj.isArray(c)?c:c.toTuple();return ce.Color.fromTuple(this.toTuple().map(function(h,f){return ce.num.interpolate(d,h,c[f])}))};Hg.prototype.toString=function(){return 1===this.a?"rgb("+ce.floor(this.r)+","+ce.floor(this.g)+","+ce.floor(this.b)+")":this.toRGBAString()};Hg.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};Hg.prototype.toHexString=
function(){function d(c){for(;2>c.length;)c="0"+c;return c}return d(Math.floor(255.99*this.r).toString(16))+d(Math.floor(255.99*this.g).toString(16))+d(Math.floor(255.99*this.b).toString(16))};Hg.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};Hg.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};Hg.prototype.toHSB=function(){var d=Math.max(this.r,this.g,this.b),c=Math.min(this.r,this.g,this.b),h;d==c?h=0:d==this.r?h=(this.g-this.b)/(d-c)*60:d==
this.g?h=60*(2+(this.b-this.r)/(d-c)):d==this.b&&(h=60*(4+(this.r-this.g)/(d-c)));return[(h+360)%360,0==d?0:(d-c)/d,d]};Hg.prototype.withA=function(d){return new ce.Color(this.r,this.g,this.b,d)};Hg.prototype.mixedWith=function(d,c){var h=1-c;return new ce.Color(this.r*c+d.r*h,this.g*c+d.g*h,this.b*c+d.b*h,this.a*c+d.a*h)};Hg.prototype.invert=function(){return ce.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};Hg.prototype.toCSSString=function(){return this.toRGBAString()};Hg.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};Hg.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(Hg.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var d=this,c=ce.Color.named;return Object.keys(c).find(function(h){return c[h].equals(d)})}}});$jscomp.global.Object.defineProperties(Hg,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return ce.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new ce.Color(0,0,0),almostBlack:ce.Color.rgb(64,64,64),white:new ce.Color(1,1,1),gray:new ce.Color(.8,.8,.8),red:new ce.Color(.8,0,0),green:new ce.Color(0,.8,0),yellow:new ce.Color(.8,.8,0),blue:new ce.Color(0,0,.8),purple:new ce.Color(.5,0,.5),magenta:new ce.Color(1,0,1),pink:ce.Color.rgb(255,30,153),turquoise:ce.Color.rgb(0,240,255),tangerine:ce.Color.rgb(242,
133,0),orange:ce.Color.rgb(255,153,0),cyan:ce.Color.rgb(0,255,255),brown:ce.Color.rgb(182,67,0),limeGreen:ce.Color.rgb(51,255,0),darkGray:ce.Color.rgb(102,102,102),lightGray:ce.Color.rgb(230,230,230),veryLightGray:ce.Color.rgb(243,243,243),transparent:ce.Color.rgba(0,0,0,0),lively:ce.Color.rgb(245,124,0)}}}});Ba("C",Hg);ce.Color=Hg;Object.assign(ce.Color,ce.Color.named);var Ow=function(d){this.stops=d?d.map(function(c){return c}):[]};Ow.create=function(d){var c=[],h;for(h in d)c.push({offset:Number(h),
color:d[h]});return new this({stops:c})};Ow.parse=function(d){return d.startsWith("radial-gradient")?ce.RadialGradient.parse(d):d.startsWith("linear-gradient")?ce.LinearGradient.parse(d):ce.Color.fromTuple(ce.Color.parse(d))};Ow.prototype.equals=function(d){return d&&d.isGradient?this.toString()==d.toString():!1};Ow.prototype.getStopsLighter=function(d){return ce.arr.collect(this.stops,function(c){return{offset:c.offset,color:c.color.lighter(d)}})};Ow.prototype.getStopsDarker=function(d){return ce.arr.collect(this.stops,
function(c){return{offset:c.offset,color:c.color.darker(d)}})};Ow.prototype.interpolateStops=function(d,c){var h=ce.pad(this.stops,c.length);c=ce.pad(c,this.stops.length);var f=[],k;for(k=0;k<h.length;k++){var n=h[k];var b=n.color;var e=n.offset;var m=c[k];n=m.color;m=m.offset;f.push({color:b.interpolate(d,n),offset:ce.num.interpolate(d,e,m)})}return f};Ow.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Ow.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});ce.Gradient=Ow;var An=function(d){var c=void 0===d?{}:d;d=c.vector;c=ce.Gradient.call(this,c.stops)||this;c.vector=d;return c};$jscomp.inherits(An,ce.Gradient);An.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};An.prototype.angleToRect=function(d){return ce.Point.polar(1,d).extentAsRectangle().withCenter(ce.pt(.5,.5))};An.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};An.prototype.toString=function(){return this.toCSSString()};An.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),vector:this.vector})};An.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),vector:this.vector})};An.prototype.interpolate=function(d,c,h){h=void 0===h?{width:1E3,height:1E3}:h;c.isColor&&(c=new ce.LinearGradient({vector:this.vector,stops:this.stops.map(function(f){return{color:c,
offset:f.offset}})}));if("radialGradient"==c.type){if(.5>d)return new ce.LinearGradient({vector:this.vector.interpolate(d,ce.rect(0,0,0,1)),stops:this.interpolateStops(d,c.stops.map(function(f,k){return{color:f.color,offset:1}}))});if(.5<=d)return new ce.RadialGradient({stops:this.interpolateStops(d,c.stops),focus:ce.pt(.5,0).interpolate(d,c.focus),bounds:ce.rect(0,0,100*h.width,2*h.height).interpolate(d,c.bounds)})}return new ce.LinearGradient({stops:this.interpolateStops(d,c.stops),vector:this.vector.interpolate(d,
c.vector)})};An.prototype.toCSSString=function(){var d="linear-gradient("+(ce.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(c){return c.color.toRGBAString()+" "+((100*c.offset).toFixed()+"%")}).join(",");return d+")"};An.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(An.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:ce.rect(ce.pt(0,0),ce.pt(0,1)),northeast:ce.rect(ce.pt(1,0),ce.pt(0,1)),westeast:ce.rect(ce.pt(1,0),ce.pt(0,0)),southeast:ce.rect(ce.pt(1,1),ce.pt(0,0)),southnorth:ce.rect(ce.pt(0,1),ce.pt(0,0)),southwest:ce.rect(ce.pt(0,1),ce.pt(1,0)),eastwest:ce.rect(ce.pt(0,0),ce.pt(1,0)),northwest:ce.rect(ce.pt(0,0),ce.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(d){this._vector=d?"string"===typeof d?this.vectors[d.toLowerCase()]:"number"===typeof d?this.angleToRect(d):d:this.vectors.northsouth}}});Ba("ai",An);ce.LinearGradient=An;var Mp=function(d){var c=void 0===d?{}:d;d=c.focus;var h=c.bounds;c=ce.Gradient.call(this,c.stops)||this;c.focus=d||ce.pt(.5,.5);c.bounds=h||new ce.Rectangle(0,0,20,20);return c};$jscomp.inherits(Mp,ce.Gradient);Mp.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};Mp.prototype.toString=function(){return this.toCSSString()};
Mp.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),focus:this.focus,bounds:this.bounds})};Mp.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Mp.prototype.interpolate=function(d,c,h){h=void 0===h?{height:1E3,width:1E3}:h;c.isColor&&(c=new ce.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(f){return{color:c,offset:f.offset}})}));return"linearGradient"==
c.type?c.interpolate(1-d,this,h):new ce.RadialGradient({bounds:this.bounds.interpolate(d,c.bounds),stops:this.interpolateStops(d,c.stops),focus:this.focus.interpolate(d,c.focus)})};Mp.prototype.toCSSString=function(){var d=this.focus.scaleBy(100),c=this.bounds.extent();d="radial-gradient("+c.x/2+"px "+c.y/2+"px at "+d.x+"% "+d.y+"%";for(c=0;c<this.stops.length;c++)d+=","+this.stops[c].color.toRGBAString()+" "+((100*this.stops[c].offset).toFixed()+"%");return d+")"};Mp.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Mp.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Ba("ag",Mp);ce.RadialGradient=Mp;var xG=Ba("bc","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
ce.flatDesignColors=xG;ce.flatDesignColors=xG;ce.flatDesignColors=xG;var yG=Ba("bd","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
ce.materialDesignColors=yG;ce.materialDesignColors=yG;ce.materialDesignColors=yG;var zG=Ba("be","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
ce.webSafeColors=zG;ce.webSafeColors=zG;ce.webSafeColors=zG;var mha=Object.freeze({__proto__:null,Complementary:uy,Triadic:vy,Tetradic:SA,Quadratic:wy,Analogous:xy,Neutral:TA,Color:Hg,LinearGradient:An,RadialGradient:Mp,flatDesignColors:xG,materialDesignColors:yG,webSafeColors:zG}),U4=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),He=function(){};He.prototype.accept=function(d,c,h){if(!d)throw Error("Undefined AST node in Visitor.accept:\n  "+h.join(".")+"\n  "+d);if(!d.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+
h.join(".")+"\n  "+JSON.stringify(d));switch(d.type){case "Node":return this.visitNode(d,c,h);case "SourceLocation":return this.visitSourceLocation(d,c,h);case "Position":return this.visitPosition(d,c,h);case "Program":return this.visitProgram(d,c,h);case "Function":return this.visitFunction(d,c,h);case "Statement":return this.visitStatement(d,c,h);case "Directive":return this.visitDirective(d,c,h);case "SwitchCase":return this.visitSwitchCase(d,c,h);case "CatchClause":return this.visitCatchClause(d,
c,h);case "VariableDeclarator":return this.visitVariableDeclarator(d,c,h);case "Expression":return this.visitExpression(d,c,h);case "Property":return this.visitProperty(d,c,h);case "Pattern":return this.visitPattern(d,c,h);case "Super":return this.visitSuper(d,c,h);case "SpreadElement":return this.visitSpreadElement(d,c,h);case "TemplateElement":return this.visitTemplateElement(d,c,h);case "Class":return this.visitClass(d,c,h);case "ClassBody":return this.visitClassBody(d,c,h);case "MethodDefinition":return this.visitMethodDefinition(d,
c,h);case "ModuleDeclaration":return this.visitModuleDeclaration(d,c,h);case "ModuleSpecifier":return this.visitModuleSpecifier(d,c,h);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(d,c,h);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(d,c,h);case "JSXSpreadChild":return this.visitJSXSpreadChild(d,c,h);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(d,c,h);case "JSXAttribute":return this.visitJSXAttribute(d,c,h);case "JSXText":return this.visitJSXText(d,
c,h);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(d,c,h);case "JSXClosingFragment":return this.visitJSXClosingFragment(d,c,h);case "Identifier":return this.visitIdentifier(d,c,h);case "Literal":return this.visitLiteral(d,c,h);case "ExpressionStatement":return this.visitExpressionStatement(d,c,h);case "BlockStatement":return this.visitBlockStatement(d,c,h);case "EmptyStatement":return this.visitEmptyStatement(d,c,h);case "DebuggerStatement":return this.visitDebuggerStatement(d,c,h);
case "WithStatement":return this.visitWithStatement(d,c,h);case "ReturnStatement":return this.visitReturnStatement(d,c,h);case "LabeledStatement":return this.visitLabeledStatement(d,c,h);case "BreakStatement":return this.visitBreakStatement(d,c,h);case "ContinueStatement":return this.visitContinueStatement(d,c,h);case "IfStatement":return this.visitIfStatement(d,c,h);case "SwitchStatement":return this.visitSwitchStatement(d,c,h);case "ThrowStatement":return this.visitThrowStatement(d,c,h);case "TryStatement":return this.visitTryStatement(d,
c,h);case "WhileStatement":return this.visitWhileStatement(d,c,h);case "DoWhileStatement":return this.visitDoWhileStatement(d,c,h);case "ForStatement":return this.visitForStatement(d,c,h);case "ForInStatement":return this.visitForInStatement(d,c,h);case "Declaration":return this.visitDeclaration(d,c,h);case "ThisExpression":return this.visitThisExpression(d,c,h);case "ArrayExpression":return this.visitArrayExpression(d,c,h);case "ObjectExpression":return this.visitObjectExpression(d,c,h);case "FunctionExpression":return this.visitFunctionExpression(d,
c,h);case "UnaryExpression":return this.visitUnaryExpression(d,c,h);case "UpdateExpression":return this.visitUpdateExpression(d,c,h);case "BinaryExpression":return this.visitBinaryExpression(d,c,h);case "AssignmentExpression":return this.visitAssignmentExpression(d,c,h);case "LogicalExpression":return this.visitLogicalExpression(d,c,h);case "MemberExpression":return this.visitMemberExpression(d,c,h);case "ConditionalExpression":return this.visitConditionalExpression(d,c,h);case "CallExpression":return this.visitCallExpression(d,
c,h);case "NewExpression":return this.visitNewExpression(d,c,h);case "SequenceExpression":return this.visitSequenceExpression(d,c,h);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(d,c,h);case "YieldExpression":return this.visitYieldExpression(d,c,h);case "TemplateLiteral":return this.visitTemplateLiteral(d,c,h);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(d,c,h);case "AssignmentProperty":return this.visitAssignmentProperty(d,c,h);case "ObjectPattern":return this.visitObjectPattern(d,
c,h);case "ArrayPattern":return this.visitArrayPattern(d,c,h);case "RestElement":return this.visitRestElement(d,c,h);case "AssignmentPattern":return this.visitAssignmentPattern(d,c,h);case "ClassExpression":return this.visitClassExpression(d,c,h);case "MetaProperty":return this.visitMetaProperty(d,c,h);case "ImportDeclaration":return this.visitImportDeclaration(d,c,h);case "ImportSpecifier":return this.visitImportSpecifier(d,c,h);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(d,
c,h);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(d,c,h);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(d,c,h);case "ExportSpecifier":return this.visitExportSpecifier(d,c,h);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(d,c,h);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(d,c,h);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(d,
c,h);case "ExportAllDeclaration":return this.visitExportAllDeclaration(d,c,h);case "AwaitExpression":return this.visitAwaitExpression(d,c,h);case "JSXMemberExpression":return this.visitJSXMemberExpression(d,c,h);case "JSXNamespacedName":return this.visitJSXNamespacedName(d,c,h);case "JSXOpeningElement":return this.visitJSXOpeningElement(d,c,h);case "JSXClosingElement":return this.visitJSXClosingElement(d,c,h);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(d,c,h);case "JSXElement":return this.visitJSXElement(d,
c,h);case "JSXFragment":return this.visitJSXFragment(d,c,h);case "ImportExpression":return this.visitImportExpression(d,c,h);case "RegExpLiteral":return this.visitRegExpLiteral(d,c,h);case "FunctionBody":return this.visitFunctionBody(d,c,h);case "FunctionDeclaration":return this.visitFunctionDeclaration(d,c,h);case "VariableDeclaration":return this.visitVariableDeclaration(d,c,h);case "ForOfStatement":return this.visitForOfStatement(d,c,h);case "ClassDeclaration":return this.visitClassDeclaration(d,
c,h);case "JSXIdentifier":return this.visitJSXIdentifier(d,c,h);case "BigIntLiteral":return this.visitBigIntLiteral(d,c,h)}throw Error("No visit function in AST visitor Visitor for:\n  "+h.join(".")+"\n  "+JSON.stringify(d));};He.prototype.visitNode=function(d,c,h){return d};He.prototype.visitSourceLocation=function(d,c,h){d.start=this.accept(d.start,c,h.concat(["start"]));d.end=this.accept(d.end,c,h.concat(["end"]));return d};He.prototype.visitPosition=function(d,c,h){return d};He.prototype.visitProgram=
function(d,c,h){for(var f=[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};He.prototype.visitFunction=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitStatement=
function(d,c,h){return d};He.prototype.visitDirective=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};He.prototype.visitSwitchCase=function(d,c,h){d.test&&(d.test=this.accept(d.test,c,h.concat(["test"])));for(var f=[],k=0;k<d.consequent.length;k++){var n=d.consequent[k];n=n?this.accept(n,c,h.concat(["consequent",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.consequent=f;return d};He.prototype.visitCatchClause=function(d,c,h){d.param&&(d.param=this.accept(d.param,
c,h.concat(["param"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitVariableDeclarator=function(d,c,h){d.id=this.accept(d.id,c,h.concat(["id"]));d.init&&(d.init=this.accept(d.init,c,h.concat(["init"])));return d};He.prototype.visitExpression=function(d,c,h){return d};He.prototype.visitProperty=function(d,c,h){d.key=this.accept(d.key,c,h.concat(["key"]));d.value=this.accept(d.value,c,h.concat(["value"]));return d};He.prototype.visitPattern=function(d,c,h){return d};
He.prototype.visitSuper=function(d,c,h){return d};He.prototype.visitSpreadElement=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};He.prototype.visitTemplateElement=function(d,c,h){return d};He.prototype.visitClass=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitClassBody=function(d,c,h){for(var f=
[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};He.prototype.visitMethodDefinition=function(d,c,h){d.key=this.accept(d.key,c,h.concat(["key"]));d.value=this.accept(d.value,c,h.concat(["value"]));return d};He.prototype.visitModuleDeclaration=function(d,c,h){return d};He.prototype.visitModuleSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};He.prototype.visitJSXEmptyExpression=
function(d,c,h){return d};He.prototype.visitJSXExpressionContainer=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};He.prototype.visitJSXSpreadChild=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};He.prototype.visitJSXBoundaryElement=function(d,c,h){d.name=this.accept(d.name,c,h.concat(["name"]));return d};He.prototype.visitJSXAttribute=function(d,c,h){d.name=this.accept(d.name,c,h.concat(["name"]));d.value&&(d.value=
this.accept(d.value,c,h.concat(["value"])));return d};He.prototype.visitJSXText=function(d,c,h){return d};He.prototype.visitJSXOpeningFragment=function(d,c,h){return d};He.prototype.visitJSXClosingFragment=function(d,c,h){return d};He.prototype.visitIdentifier=function(d,c,h){return d};He.prototype.visitLiteral=function(d,c,h){return d};He.prototype.visitExpressionStatement=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};He.prototype.visitBlockStatement=
function(d,c,h){for(var f=[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};He.prototype.visitEmptyStatement=function(d,c,h){return d};He.prototype.visitDebuggerStatement=function(d,c,h){return d};He.prototype.visitWithStatement=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitReturnStatement=function(d,
c,h){d.argument&&(d.argument=this.accept(d.argument,c,h.concat(["argument"])));return d};He.prototype.visitLabeledStatement=function(d,c,h){d.label=this.accept(d.label,c,h.concat(["label"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitBreakStatement=function(d,c,h){d.label&&(d.label=this.accept(d.label,c,h.concat(["label"])));return d};He.prototype.visitContinueStatement=function(d,c,h){d.label&&(d.label=this.accept(d.label,c,h.concat(["label"])));return d};He.prototype.visitIfStatement=
function(d,c,h){d.test=this.accept(d.test,c,h.concat(["test"]));d.consequent=this.accept(d.consequent,c,h.concat(["consequent"]));d.alternate&&(d.alternate=this.accept(d.alternate,c,h.concat(["alternate"])));return d};He.prototype.visitSwitchStatement=function(d,c,h){d.discriminant=this.accept(d.discriminant,c,h.concat(["discriminant"]));for(var f=[],k=0;k<d.cases.length;k++){var n=d.cases[k];n=n?this.accept(n,c,h.concat(["cases",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.cases=f;return d};
He.prototype.visitThrowStatement=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};He.prototype.visitTryStatement=function(d,c,h){d.block=this.accept(d.block,c,h.concat(["block"]));d.handler&&(d.handler=this.accept(d.handler,c,h.concat(["handler"])));d.finalizer&&(d.finalizer=this.accept(d.finalizer,c,h.concat(["finalizer"])));return d};He.prototype.visitWhileStatement=function(d,c,h){d.test=this.accept(d.test,c,h.concat(["test"]));d.body=this.accept(d.body,c,h.concat(["body"]));
return d};He.prototype.visitDoWhileStatement=function(d,c,h){d.body=this.accept(d.body,c,h.concat(["body"]));d.test=this.accept(d.test,c,h.concat(["test"]));return d};He.prototype.visitForStatement=function(d,c,h){d.init&&(d.init=this.accept(d.init,c,h.concat(["init"])));d.test&&(d.test=this.accept(d.test,c,h.concat(["test"])));d.update&&(d.update=this.accept(d.update,c,h.concat(["update"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitForInStatement=function(d,c,h){d.left=
this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitDeclaration=function(d,c,h){return d};He.prototype.visitThisExpression=function(d,c,h){return d};He.prototype.visitArrayExpression=function(d,c,h){if(d.elements){for(var f=[],k=0;k<d.elements.length;k++){var n=d.elements[k];n=n?this.accept(n,c,h.concat(["elements",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.elements=f}return d};
He.prototype.visitObjectExpression=function(d,c,h){for(var f=[],k=0;k<d.properties.length;k++){var n=d.properties[k];n=n?this.accept(n,c,h.concat(["properties",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.properties=f;return d};He.prototype.visitFunctionExpression=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=
this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitUnaryExpression=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};He.prototype.visitUpdateExpression=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};He.prototype.visitBinaryExpression=function(d,c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};He.prototype.visitAssignmentExpression=function(d,
c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};He.prototype.visitLogicalExpression=function(d,c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};He.prototype.visitMemberExpression=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));d.property=this.accept(d.property,c,h.concat(["property"]));return d};He.prototype.visitConditionalExpression=function(d,
c,h){d.test=this.accept(d.test,c,h.concat(["test"]));d.alternate=this.accept(d.alternate,c,h.concat(["alternate"]));d.consequent=this.accept(d.consequent,c,h.concat(["consequent"]));return d};He.prototype.visitCallExpression=function(d,c,h){d.callee=this.accept(d.callee,c,h.concat(["callee"]));for(var f=[],k=0;k<d.arguments.length;k++){var n=d.arguments[k];n=n?this.accept(n,c,h.concat(["arguments",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.arguments=f;return d};He.prototype.visitNewExpression=
function(d,c,h){d.callee=this.accept(d.callee,c,h.concat(["callee"]));for(var f=[],k=0;k<d.arguments.length;k++){var n=d.arguments[k];n=n?this.accept(n,c,h.concat(["arguments",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.arguments=f;return d};He.prototype.visitSequenceExpression=function(d,c,h){for(var f=[],k=0;k<d.expressions.length;k++){var n=d.expressions[k];n=n?this.accept(n,c,h.concat(["expressions",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.expressions=f;return d};He.prototype.visitArrowFunctionExpression=
function(d,c,h){d.body=this.accept(d.body,c,h.concat(["body"]));d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;return d};He.prototype.visitYieldExpression=function(d,c,h){d.argument&&(d.argument=this.accept(d.argument,c,h.concat(["argument"])));return d};He.prototype.visitTemplateLiteral=function(d,c,h){for(var f=[],k=0;k<d.quasis.length;k++){var n=
d.quasis[k];n=n?this.accept(n,c,h.concat(["quasis",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.quasis=f;f=[];for(k=0;k<d.expressions.length;k++)n=(n=d.expressions[k])?this.accept(n,c,h.concat(["expressions",k])):n,Array.isArray(n)?f.push.apply(f,n):f.push(n);d.expressions=f;return d};He.prototype.visitTaggedTemplateExpression=function(d,c,h){d.tag=this.accept(d.tag,c,h.concat(["tag"]));d.quasi=this.accept(d.quasi,c,h.concat(["quasi"]));return d};He.prototype.visitAssignmentProperty=function(d,
c,h){d.value=this.accept(d.value,c,h.concat(["value"]));d.key=this.accept(d.key,c,h.concat(["key"]));return d};He.prototype.visitObjectPattern=function(d,c,h){for(var f=[],k=0;k<d.properties.length;k++){var n=d.properties[k];n=n?this.accept(n,c,h.concat(["properties",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.properties=f;return d};He.prototype.visitArrayPattern=function(d,c,h){if(d.elements){for(var f=[],k=0;k<d.elements.length;k++){var n=d.elements[k];n=n?this.accept(n,c,h.concat(["elements",
k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.elements=f}return d};He.prototype.visitRestElement=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};He.prototype.visitAssignmentPattern=function(d,c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};He.prototype.visitClassExpression=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));d.superClass&&(d.superClass=this.accept(d.superClass,
c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitMetaProperty=function(d,c,h){d.meta=this.accept(d.meta,c,h.concat(["meta"]));d.property=this.accept(d.property,c,h.concat(["property"]));return d};He.prototype.visitImportDeclaration=function(d,c,h){for(var f=[],k=0;k<d.specifiers.length;k++){var n=d.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.specifiers=f;d.source=this.accept(d.source,
c,h.concat(["source"]));return d};He.prototype.visitImportSpecifier=function(d,c,h){d.imported=this.accept(d.imported,c,h.concat(["imported"]));d.local=this.accept(d.local,c,h.concat(["local"]));return d};He.prototype.visitImportDefaultSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};He.prototype.visitImportNamespaceSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};He.prototype.visitExportNamedDeclaration=function(d,c,h){d.declaration&&
(d.declaration=this.accept(d.declaration,c,h.concat(["declaration"])));for(var f=[],k=0;k<d.specifiers.length;k++){var n=d.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.specifiers=f;d.source&&(d.source=this.accept(d.source,c,h.concat(["source"])));return d};He.prototype.visitExportSpecifier=function(d,c,h){d.exported=this.accept(d.exported,c,h.concat(["exported"]));d.local=this.accept(d.local,c,h.concat(["local"]));return d};He.prototype.visitAnonymousDefaultExportedFunctionDeclaration=
function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitAnonymousDefaultExportedClassDeclaration=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,
c,h.concat(["body"]));return d};He.prototype.visitExportDefaultDeclaration=function(d,c,h){d.declaration=this.accept(d.declaration,c,h.concat(["declaration"]));return d};He.prototype.visitExportAllDeclaration=function(d,c,h){d.source=this.accept(d.source,c,h.concat(["source"]));return d};He.prototype.visitAwaitExpression=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};He.prototype.visitJSXMemberExpression=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));
d.property=this.accept(d.property,c,h.concat(["property"]));return d};He.prototype.visitJSXNamespacedName=function(d,c,h){d.namespace=this.accept(d.namespace,c,h.concat(["namespace"]));d.name=this.accept(d.name,c,h.concat(["name"]));return d};He.prototype.visitJSXOpeningElement=function(d,c,h){for(var f=[],k=0;k<d.attributes.length;k++){var n=d.attributes[k];n=n?this.accept(n,c,h.concat(["attributes",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.attributes=f;d.name=this.accept(d.name,c,h.concat(["name"]));
return d};He.prototype.visitJSXClosingElement=function(d,c,h){d.name=this.accept(d.name,c,h.concat(["name"]));return d};He.prototype.visitJSXSpreadAttribute=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};He.prototype.visitJSXElement=function(d,c,h){d.openingElement=this.accept(d.openingElement,c,h.concat(["openingElement"]));for(var f=[],k=0;k<d.children.length;k++){var n=d.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?f.push.apply(f,
n):f.push(n)}d.children=f;d.closingElement&&(d.closingElement=this.accept(d.closingElement,c,h.concat(["closingElement"])));return d};He.prototype.visitJSXFragment=function(d,c,h){d.openingFragment=this.accept(d.openingFragment,c,h.concat(["openingFragment"]));for(var f=[],k=0;k<d.children.length;k++){var n=d.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.children=f;d.closingFragment=this.accept(d.closingFragment,c,h.concat(["closingFragment"]));
return d};He.prototype.visitImportExpression=function(d,c,h){d.source=this.accept(d.source,c,h.concat(["source"]));return d};He.prototype.visitRegExpLiteral=function(d,c,h){return d};He.prototype.visitFunctionBody=function(d,c,h){for(var f=[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};He.prototype.visitFunctionDeclaration=function(d,c,h){d.id=this.accept(d.id,c,h.concat(["id"]));for(var f=[],
k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitVariableDeclaration=function(d,c,h){for(var f=[],k=0;k<d.declarations.length;k++){var n=d.declarations[k];n=n?this.accept(n,c,h.concat(["declarations",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.declarations=f;return d};He.prototype.visitForOfStatement=function(d,c,h){d.left=
this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitClassDeclaration=function(d,c,h){d.id=this.accept(d.id,c,h.concat(["id"]));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};He.prototype.visitJSXIdentifier=function(d,c,h){return d};He.prototype.visitBigIntLiteral=function(d,c,h){return d};Ba("bF",
He);U4.Visitor=He;U4.default=He;var Th=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Th.obj=Ag;Th.Path=$h;Th.Visitor=He;var DD=function(){return Th.Visitor.apply(this,arguments)||this};$jscomp.inherits(DD,Th.Visitor);DD.prototype.accept=function(d,c,h){var f=h.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),k=[];h=Th.Visitor.prototype.accept.call(this,d,{index:c.index,tree:k},h);c.tree.push({node:d,path:f,index:c.index++,children:k});return h};Th.PrinterVisitor=
DD;var ol=function(){return Th.Visitor.apply(this,arguments)||this};$jscomp.inherits(ol,Th.Visitor);ol.prototype.recordNotEqual=function(d,c,h,f){h.comparisons.errors.push({node1:d,node2:c,path:h.completePath,msg:f})};ol.prototype.compareType=function(d,c,h){return this.compareField("type",d,c,h)};ol.prototype.compareField=function(d,c,h,f){h=Th.Path(f.completePath.join(".")).get(h);if(c&&h&&c[d]===h[d]||c&&"*"===c[d]||h&&"*"===h[d])return!0;var k=f.completePath.join(".")+"."+d;this.recordNotEqual(c,
h,f,c?h?k+" is not equal: "+c[d]+" vs. "+h[d]:"node2 not defined but node1 ("+k+") is: "+c[d]:"node1 on "+k+" not defined");return!1};ol.prototype.accept=function(d,c,h,f){var k=Th.Path(f.join(".")).get(c);if("*"!==d&&"*"!==k&&(h={completePath:f,comparisons:h.comparisons},this.compareType(d,c,h)))this["visit"+d.type](d,c,h,f)};ol.prototype.visitFunction=function(d,c,h,f){d.generator&&this.compareField("generator",d,c,h);d.expression&&this.compareField("expression",d,c,h);return Th.Visitor.prototype.visitFunction.call(this,
d,c,h,f)};ol.prototype.visitSwitchStatement=function(d,c,h,f){d.lexical&&this.compareField("lexical",d,c,h);return Th.Visitor.prototype.visitSwitchStatement.call(this,d,c,h,f)};ol.prototype.visitForInStatement=function(d,c,h,f){d.each&&this.compareField("each",d,c,h);return Th.Visitor.prototype.visitForInStatement.call(this,d,c,h,f)};ol.prototype.visitFunctionDeclaration=function(d,c,h,f){d.generator&&this.compareField("generator",d,c,h);d.expression&&this.compareField("expression",d,c,h);return Th.Visitor.prototype.visitFunctionDeclaration.call(this,
d,c,h,f)};ol.prototype.visitVariableDeclaration=function(d,c,h,f){this.compareField("kind",d,c,h);return Th.Visitor.prototype.visitVariableDeclaration.call(this,d,c,h,f)};ol.prototype.visitUnaryExpression=function(d,c,h,f){this.compareField("operator",d,c,h);d.prefix&&this.compareField("prefix",d,c,h);return Th.Visitor.prototype.visitUnaryExpression.call(this,d,c,h,f)};ol.prototype.visitBinaryExpression=function(d,c,h,f){this.compareField("operator",d,c,h);return Th.Visitor.prototype.visitBinaryExpression.call(this,
d,c,h,f)};ol.prototype.visitAssignmentExpression=function(d,c,h,f){this.compareField("operator",d,c,h);return Th.Visitor.prototype.visitAssignmentExpression.call(this,d,c,h,f)};ol.prototype.visitUpdateExpression=function(d,c,h,f){this.compareField("operator",d,c,h);d.prefix&&this.compareField("prefix",d,c,h);return Th.Visitor.prototype.visitUpdateExpression.call(this,d,c,h,f)};ol.prototype.visitLogicalExpression=function(d,c,h,f){this.compareField("operator",d,c,h);return Th.Visitor.prototype.visitLogicalExpression.call(this,
d,c,h,f)};ol.prototype.visitMemberExpression=function(d,c,h,f){d.computed&&this.compareField("computed",d,c,h);return Th.Visitor.prototype.visitMemberExpression.call(this,d,c,h,f)};ol.prototype.visitComprehensionBlock=function(d,c,h,f){d.each&&this.compareField("each",d,c,h);return Th.Visitor.prototype.visitComprehensionBlock.call(this,d,c,h,f)};ol.prototype.visitIdentifier=function(d,c,h,f){this.compareField("name",d,c,h);return Th.Visitor.prototype.visitIdentifier.call(this,d,c,h,f)};ol.prototype.visitLiteral=
function(d,c,h,f){this.compareField("value",d,c,h);return Th.Visitor.prototype.visitLiteral.call(this,d,c,h,f)};ol.prototype.visitClassDeclaration=function(d,c,h,f){this.compareField("id",d,c,h);d.superClass&&this.compareField("superClass",d,c,h);this.compareField("body",d,c,h);return Th.Visitor.prototype.visitClassDeclaration.call(this,d,c,h,f)};ol.prototype.visitClassBody=function(d,c,h,f){this.compareField("body",d,c,h);return Th.Visitor.prototype.visitClassBody.call(this,d,c,h,f)};ol.prototype.visitMethodDefinition=
function(d,c,h,f){this.compareField("static",d,c,h);this.compareField("computed",d,c,h);this.compareField("kind",d,c,h);this.compareField("key",d,c,h);this.compareField("value",d,c,h);return Th.Visitor.prototype.visitMethodDefinition.call(this,d,c,h,f)};Th.ComparisonVisitor=ol;var mk=function(){return Th.Visitor.apply(this,arguments)||this};$jscomp.inherits(mk,Th.Visitor);mk.prototype.newScope=function(d,c){d={node:d,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(d);return d};mk.prototype.visitVariableDeclaration=function(d,c,h){c.varDecls.push(d);c.varDeclPaths.push(h);return Th.Visitor.prototype.visitVariableDeclaration.call(this,d,c,h)};mk.prototype.visitVariableDeclarator=function(d,c,h){d.init&&(d.init=this.accept(d.init,
c,h.concat(["init"])));return d};mk.prototype.visitFunction=function(d,c,h){var f=this,k=this.newScope(d,c);d.params.forEach(function(n,b){"AssignmentPattern"===n.type&&f.accept(n.right,k,h.concat("params",b,"right"))});k.params=Array.prototype.slice.call(d.params);return k};mk.prototype.visitFunctionDeclaration=function(d,c,h){var f=this.visitFunction(d,c,h);c.funcDecls.push(d);c.funcDeclPaths.push(h);var k=this;d.defaults&&(d.defaults=d.defaults.reduce(function(n,b,e){b=k.accept(b,f,h.concat(["defaults",
e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));d.rest&&(d.rest=k.accept(d.rest,f,h.concat(["rest"])));d.body=k.accept(d.body,f,h.concat(["body"]));d.loc&&(d.loc=k.accept(d.loc,f,h.concat(["loc"])));return d};mk.prototype.visitFunctionExpression=function(d,c,h){var f=this.visitFunction(d,c,h),k=this;d.defaults&&(d.defaults=d.defaults.reduce(function(n,b,e){b=k.accept(b,f,h.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));d.rest&&(d.rest=k.accept(d.rest,
f,h.concat(["rest"])));d.body=k.accept(d.body,f,h.concat(["body"]));d.loc&&(d.loc=k.accept(d.loc,f,h.concat(["loc"])));return d};mk.prototype.visitArrowFunctionExpression=function(d,c,h){var f=this.visitFunction(d,c,h),k=this;d.defaults&&(d.defaults=d.defaults.reduce(function(n,b,e){b=k.accept(b,f,h.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));d.rest&&(d.rest=k.accept(d.rest,f,h.concat(["rest"])));d.body=k.accept(d.body,f,h.concat(["body"]));d.loc&&(d.loc=k.accept(d.loc,
f,h.concat(["loc"])));return d};mk.prototype.visitIdentifier=function(d,c,h){c.refs.push(d);return Th.Visitor.prototype.visitIdentifier.call(this,d,c,h)};mk.prototype.visitMemberExpression=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));d.computed&&(d.property=this.accept(d.property,c,h.concat(["property"])));return d};mk.prototype.visitProperty=function(d,c,h){d.computed&&(d.key=this.accept(d.key,c,h.concat(["key"])));d.value=this.accept(d.value,c,h.concat(["value"]));return d};
mk.prototype.visitThisExpression=function(d,c,h){c.thisRefs.push(d);return Th.Visitor.prototype.visitThisExpression.call(this,d,c,h)};mk.prototype.visitTryStatement=function(d,c,h){d.block=this.accept(d.block,c,h.concat(["block"]));d.handler&&(d.handler=this.accept(d.handler,c,h.concat(["handler"])),c.catches.push(d.handler.param));d.finalizer&&(d.finalizer=this.accept(d.finalizer,c,h.concat(["finalizer"])));return d};mk.prototype.visitLabeledStatement=function(d,c,h){d.body=this.accept(d.body,c,
h.concat(["body"]));return d};mk.prototype.visitClassDeclaration=function(d,c,h){c.classDecls.push(d);c.classDeclPaths.push(h);d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};mk.prototype.visitClassExpression=function(d,c,h){d.id&&(c.classExprs.push(d),c.classExprPaths.push(h));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));
return d};mk.prototype.visitMethodDefinition=function(d,c,h){d.value=this.accept(d.value,c,h.concat(["value"]));return d};mk.prototype.visitMetaProperty=function(d,c,h){return d};mk.prototype.visitBreakStatement=function(d,c,h){return d};mk.prototype.visitContinueStatement=function(d,c,h){return d};mk.prototype.visitImportSpecifier=function(d,c,h){c.importSpecifiers.push(d.local);c.importSpecifierPaths.push(h);return d};mk.prototype.visitImportDefaultSpecifier=function(d,c,h){c.importSpecifiers.push(d.local);
c.importSpecifierPaths.push(h);return d};mk.prototype.visitImportNamespaceSpecifier=function(d,c,h){c.importSpecifiers.push(d.local);c.importSpecifierPaths.push(h);return d};mk.prototype.visitExportSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};mk.prototype.visitExportNamedDeclaration=function(d,c,h){c.exportDecls.push(d);c.exportDeclPaths.push(h);d.source||Th.Visitor.prototype.visitExportNamedDeclaration.call(this,d,c,h);return d};mk.prototype.visitExportDefaultDeclaration=
function(d,c,h){c.exportDecls.push(d);c.exportDeclPaths.push(h);return Th.Visitor.prototype.visitExportDefaultDeclaration.call(this,d,c,h)};mk.prototype.visitExportAllDeclaration=function(d,c,h){c.exportDecls.push(d);c.exportDeclPaths.push(h);return Th.Visitor.prototype.visitExportAllDeclaration.call(this,d,c,h)};Th.ScopeVisitor=mk;Th.BaseVisitor=He;Th.Visitor=He;Th.PrinterVisitor=DD;Th.PrinterVisitor=DD;Th.ComparisonVisitor=ol;Th.ComparisonVisitor=ol;Th.ScopeVisitor=mk;Th.ScopeVisitor=mk;var $g=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,iT={};(function h(c){function f(H){var I={},M;for(M in H)if(H.hasOwnProperty(M)){var N=H[M];I[M]="object"===typeof N&&null!==N?f(N):N}return I}function k(H,I){var M;var N=H.length;for(M=0;N;){var X=N>>>1;var W=M+X;I(H[W])?N=X:(M=W+1,N-=X+1)}return M}function n(H,I){(this||$g).parent=H;(this||$g).key=I}function b(H,I,M,N){(this||$g).node=H;(this||$g).path=I;(this||$g).wrap=M;(this||$g).ref=N}function e(){}function m(H){return null==
H?!1:"object"===typeof H&&"string"===typeof H.type}function a(H,I){for(var M=H.length-1;0<=M;--M)if(H[M].node===I)return!0;return!1}function g(H,I){return(new e).traverse(H,I)}function l(H,I){var M=k(I,function(N){return N.range[0]>H.range[0]});H.extendedRange=[H.range[0],H.range[1]];M!==I.length&&(H.extendedRange[1]=I[M].range[0]);--M;0<=M&&(H.extendedRange[0]=I[M].range[1]);return H}var r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var v={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var y={};var A={};var E={};var F={Break:y,Skip:A,Remove:E};n.prototype.replace=function(H){(this||$g).parent[(this||$g).key]=H};n.prototype.remove=function(){if(Array.isArray((this||$g).parent))return(this||$g).parent.splice((this||$g).key,1),!0;this.replace(null);return!1};e.prototype.path=function(){function H(Aa,Ka){if(Array.isArray(Ka))for(M=
0,N=Ka.length;M<N;++M)Aa.push(Ka[M]);else Aa.push(Ka)}var I,M,N;if(!(this||$g).__current.path)return null;var X=[];var W=2;for(I=(this||$g).__leavelist.length;W<I;++W){var ea=(this||$g).__leavelist[W];H(X,ea.path)}H(X,(this||$g).__current.path);return X};e.prototype.type=function(){return this.current().type||(this||$g).__current.wrap};e.prototype.parents=function(){var H;var I=[];var M=1;for(H=(this||$g).__leavelist.length;M<H;++M)I.push((this||$g).__leavelist[M].node);return I};e.prototype.current=
function(){return(this||$g).__current.node};e.prototype.__execute=function(H,I){var M=void 0;var N=(this||$g).__current;(this||$g).__current=I;(this||$g).__state=null;H&&(M=H.call(this||$g,I.node,(this||$g).__leavelist[(this||$g).__leavelist.length-1].node));(this||$g).__current=N;return M};e.prototype.notify=function(H){(this||$g).__state=H};e.prototype.skip=function(){this.notify(A)};e.prototype["break"]=function(){this.notify(y)};e.prototype.remove=function(){this.notify(E)};e.prototype.__initialize=
function(H,I){(this||$g).visitor=I;(this||$g).root=H;(this||$g).__worklist=[];(this||$g).__leavelist=[];(this||$g).__current=null;(this||$g).__state=null;(this||$g).__fallback=null;"iteration"===I.fallback?(this||$g).__fallback=Object.keys:"function"===typeof I.fallback&&((this||$g).__fallback=I.fallback);(this||$g).__keys=v;I.keys&&((this||$g).__keys=Object.assign(Object.create((this||$g).__keys),I.keys))};e.prototype.traverse=function(H,I){var M,N,X;this.__initialize(H,I);var W={};var ea=(this||
$g).__worklist;var Aa=(this||$g).__leavelist;ea.push(new b(H,null,null,null));for(Aa.push(new b(null,null,null,null));ea.length;)if(H=ea.pop(),H===W){H=Aa.pop();var Ka=this.__execute(I.leave,H);if((this||$g).__state===y||Ka===y)break}else if(H.node){Ka=this.__execute(I.enter,H);if((this||$g).__state===y||Ka===y)break;ea.push(W);Aa.push(H);if((this||$g).__state!==A&&Ka!==A){Ka=H.node;var K=Ka.type||H.wrap;var aa=(this||$g).__keys[K];if(!aa)if((this||$g).__fallback)aa=this.__fallback(Ka);else throw Error("Unknown node type "+
K+".");for(M=aa.length;0<=--M;){var T=aa[M];if(X=Ka[T])if(Array.isArray(X))for(N=X.length;0<=--N;){if(X[N]&&!a(Aa,X[N])){if(K!==r.ObjectExpression&&K!==r.ObjectPattern||"properties"!==aa[M])if(m(X[N]))H=new b(X[N],[T,N],null,null);else continue;else H=new b(X[N],[T,N],"Property",null);ea.push(H)}}else m(X)&&!a(Aa,X)&&ea.push(new b(X,T,null,null))}}}};e.prototype.replace=function(H,I){function M(fa){if(fa.ref.remove()){var oa=fa.ref.key;var hb=fa.ref.parent;for(fa=Aa.length;fa--;){var Cb=Aa[fa];if(Cb.ref&&
Cb.ref.parent===hb){if(Cb.ref.key<oa)break;--Cb.ref.key}}}}var N,X,W;this.__initialize(H,I);var ea={};var Aa=(this||$g).__worklist;var Ka=(this||$g).__leavelist;var K={root:H};var aa=new b(H,null,null,new n(K,"root"));Aa.push(aa);for(Ka.push(aa);Aa.length;)if(aa=Aa.pop(),aa===ea){aa=Ka.pop();var T=this.__execute(I.leave,aa);void 0!==T&&T!==y&&T!==A&&T!==E&&aa.ref.replace(T);(this||$g).__state!==E&&T!==E||M(aa);if((this||$g).__state===y||T===y)break}else{T=this.__execute(I.enter,aa);void 0!==T&&T!==
y&&T!==A&&T!==E&&(aa.ref.replace(T),aa.node=T);if((this||$g).__state===E||T===E)M(aa),aa.node=null;if((this||$g).__state===y||T===y)break;if(H=aa.node)if(Aa.push(ea),Ka.push(aa),(this||$g).__state!==A&&T!==A){T=H.type||aa.wrap;var U=(this||$g).__keys[T];if(!U)if((this||$g).__fallback)U=this.__fallback(H);else throw Error("Unknown node type "+T+".");for(N=U.length;0<=--N;){var pa=U[N];if(W=H[pa])if(Array.isArray(W))for(X=W.length;0<=--X;){if(W[X]){if(T!==r.ObjectExpression&&T!==r.ObjectPattern||"properties"!==
U[N])if(m(W[X]))aa=new b(W[X],[pa,X],null,new n(W,X));else continue;else aa=new b(W[X],[pa,X],"Property",new n(W,X));Aa.push(aa)}}else m(W)&&Aa.push(new b(W,pa,null,new n(H,pa)))}}}return K.root};c.Syntax=r;c.traverse=g;c.replace=function(H,I){return(new e).replace(H,I)};c.attachComments=function(H,I,M){var N=[],X;if(!H.range)throw Error("attachComments needs range information");if(!M.length){if(I.length){var W=0;for(X=I.length;W<X;W+=1)M=f(I[W]),M.extendedRange=[0,H.range[0]],N.push(M);H.leadingComments=
N}return H}W=0;for(X=I.length;W<X;W+=1)N.push(l(f(I[W]),M));var ea=0;g(H,{enter:function(Aa){for(var Ka;ea<N.length;){Ka=N[ea];if(Ka.extendedRange[1]>Aa.range[0])break;Ka.extendedRange[1]===Aa.range[0]?(Aa.leadingComments||(Aa.leadingComments=[]),Aa.leadingComments.push(Ka),N.splice(ea,1)):ea+=1}if(ea===N.length)return F.Break;if(N[ea].extendedRange[0]>Aa.range[1])return F.Skip}});ea=0;g(H,{leave:function(Aa){for(var Ka;ea<N.length;){Ka=N[ea];if(Aa.range[1]<Ka.extendedRange[0])break;Aa.range[1]===
Ka.extendedRange[0]?(Aa.trailingComments||(Aa.trailingComments=[]),Aa.trailingComments.push(Ka),N.splice(ea,1)):ea+=1}if(ea===N.length)return F.Break;if(N[ea].extendedRange[0]>Aa.range[1])return F.Skip}});return H};c.VisitorKeys=v;c.VisitorOption=F;c.Controller=e;c.cloneEnvironment=function(){return h({})};return c})(iT);var V4={};(function(){function c(f){if(null==f)return!1;switch(f.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(f){switch(f.type){case "IfStatement":return null!=f.alternate?f.alternate:f.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return f.body}return null}V4={isExpression:function(f){if(null==f)return!1;switch(f.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(f){if(null==f)return!1;switch(f.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(f){return c(f)||null!=f&&"FunctionDeclaration"===f.type},isProblematicIfStatement:function(f){if("IfStatement"!==f.type||null==f.alternate)return!1;f=f.consequent;do{if("IfStatement"===f.type&&null==f.alternate)return!0;f=h(f)}while(f);return!1},trailingStatement:h}})();var nha=V4,W4={};
(function(){function c(g){if(65535>=g)return String.fromCharCode(g);var l=String.fromCharCode(Math.floor((g-65536)/1024)+55296);g=String.fromCharCode((g-65536)%1024+56320);return l+g}var h;var f=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var k=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var e=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var m=Array(128);for(h=0;128>h;++h)m[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var a=Array(128);for(h=0;128>h;++h)a[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;W4={isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||97<=g&&102>=g||65<=g&&70>=g},isOctalDigit:function(g){return 48<=g&&55>=g},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===
g||160===g||5760<=g&&0<=e.indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStartES5:function(g){return 128>g?m[g]:f.test(c(g))},isIdentifierPartES5:function(g){return 128>g?a[g]:k.test(c(g))},isIdentifierStartES6:function(g){return 128>g?m[g]:n.test(c(g))},isIdentifierPartES6:function(g){return 128>g?a[g]:b.test(c(g))}}})();var X4=W4,Y4={};(function(){function c(m,a){return a||"yield"!==m?h(m,a):!1}function h(m,a){if(a)a:switch(m){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(m.length){case 2:return"if"===m||"in"===m||"do"===m;case 3:return"var"===m||"for"===m||"new"===m||"try"===m;case 4:return"this"===m||"else"===m||"case"===m||"void"===m||"with"===m||"enum"===m;case 5:return"while"===m||"break"===m||"catch"===m||"throw"===m||"const"===m||"yield"===m||"class"===m||"super"===m;case 6:return"return"===m||"typeof"===m||"delete"===m||"switch"===m||"export"===m||"import"===m;case 7:return"default"===m||"finally"===m||"extends"===
m;case 8:return"function"===m||"continue"===m||"debugger"===m;case 10:return"instanceof"===m;default:return!1}}function f(m,a){return"null"===m||"true"===m||"false"===m||c(m,a)}function k(m,a){return"null"===m||"true"===m||"false"===m||h(m,a)}function n(m){var a;if(0===m.length)return!1;var g=m.charCodeAt(0);if(!e.isIdentifierStartES5(g))return!1;var l=1;for(a=m.length;l<a;++l)if(g=m.charCodeAt(l),!e.isIdentifierPartES5(g))return!1;return!0}function b(m){var a;if(0===m.length)return!1;var g=e.isIdentifierStartES6;
var l=0;for(a=m.length;l<a;++l){var r=m.charCodeAt(l);if(55296<=r&&56319>=r){++l;if(l>=a)return!1;var v=m.charCodeAt(l);if(!(56320<=v&&57343>=v))return!1;r=1024*(r-55296)+(v-56320)+65536}if(!g(r))return!1;g=e.isIdentifierPartES6}return!0}var e=X4;Y4={isKeywordES5:c,isKeywordES6:h,isReservedWordES5:f,isReservedWordES6:k,isRestrictedWord:function(m){return"eval"===m||"arguments"===m},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(m,a){return n(m)&&!f(m,a)},isIdentifierES6:function(m,
a){return b(m)&&!k(m,a)}}})();var oha=Y4,AG={};AG.ast=nha;AG.code=X4;AG.keyword=oha;var jn={getArg:function(c,h,f){if(h in c)return c[h];if(3===arguments.length)return f;throw Error('"'+h+'" is a required argument.');}},DX=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Paa=/^data:.+,.+$/;jn.urlParse=yu;jn.urlGenerate=Lm;jn.normalize=xz;jn.join=yz;jn.isAbsolute=function(c){return"/"===c.charAt(0)||DX.test(c)};jn.relative=function(c,h){""===c&&(c=".");c=c.replace(/\/$/,"");for(var f=
0;0!==h.indexOf(c+"/");){var k=c.lastIndexOf("/");if(0>k)return h;c=c.slice(0,k);if(c.match(/^([^\/]+:\/)?\/*$/))return h;++f}return Array(f+1).join("../")+h.substr(c.length+1)};var Z4=!("__proto__"in Object.create(null));jn.toSetString=Z4?XE:HP;jn.fromSetString=Z4?XE:HI;jn.compareByOriginalPositions=function(c,h,f){var k=aw(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;if(0!==k||f)return k;k=c.generatedColumn-h.generatedColumn;
if(0!==k)return k;k=c.generatedLine-h.generatedLine;return 0!==k?k:aw(c.name,h.name)};jn.compareByGeneratedPositionsDeflated=function(c,h,f){var k=c.generatedLine-h.generatedLine;if(0!==k)return k;k=c.generatedColumn-h.generatedColumn;if(0!==k||f)return k;k=aw(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;return 0!==k?k:aw(c.name,h.name)};jn.compareByGeneratedPositionsInflated=function(c,h){var f=c.generatedLine-h.generatedLine;
if(0!==f)return f;f=c.generatedColumn-h.generatedColumn;if(0!==f)return f;f=aw(c.source,h.source);if(0!==f)return f;f=c.originalLine-h.originalLine;if(0!==f)return f;f=c.originalColumn-h.originalColumn;return 0!==f?f:aw(c.name,h.name)};jn.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};jn.computeSourceURL=function(c,h,f){h=h||"";c&&("/"!==c[c.length-1]&&"/"!==h[0]&&(c+="/"),h=c+h);if(f){c=yu(f);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(f=c.path.lastIndexOf("/"),
0<=f&&(c.path=c.path.substring(0,f+1)));h=yz(Lm(c),h)}return xz(h)};var xL={},$4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");xL.encode=function(c){if(0<=c&&c<$4.length)return $4[c];throw new TypeError("Must be between 0 and 63: "+c);};xL.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var ED={encode:function(c){var h="",f=0>c?(-c<<1)+1:c<<1;do c=f&31,f>>>=5,0<f&&(c|=32),h+=xL.encode(c);while(0<f);return h},
decode:function(c,h,f){var k=c.length,n=0,b=0;do{if(h>=k)throw Error("Expected more digits in base 64 VLQ value.");var e=xL.decode(c.charCodeAt(h++));if(-1===e)throw Error("Invalid base64 digit: "+c.charAt(h-1));var m=!!(e&32);e&=31;n+=e<<b;b+=5}while(m);c=n>>1;f.value=1===(n&1)?-c:c;f.rest=h}},yo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jT=jn,kT=Object.prototype.hasOwnProperty,zz="undefined"!==typeof Map;eq.fromArray=function(c,h){for(var f=new eq,k=0,n=c.length;k<
n;k++)f.add(c[k],h);return f};eq.prototype.size=function(){return zz?(this||yo)._set.size:Object.getOwnPropertyNames((this||yo)._set).length};eq.prototype.add=function(c,h){var f=zz?c:jT.toSetString(c),k=zz?this.has(c):kT.call((this||yo)._set,f),n=(this||yo)._array.length;k&&!h||(this||yo)._array.push(c);k||(zz?(this||yo)._set.set(c,n):(this||yo)._set[f]=n)};eq.prototype.has=function(c){if(zz)return(this||yo)._set.has(c);c=jT.toSetString(c);return kT.call((this||yo)._set,c)};eq.prototype.indexOf=
function(c){if(zz){var h=(this||yo)._set.get(c);if(0<=h)return h}else if(h=jT.toSetString(c),kT.call((this||yo)._set,h))return(this||yo)._set[h];throw Error('"'+c+'" is not in the set.');};eq.prototype.at=function(c){if(0<=c&&c<(this||yo)._array.length)return(this||yo)._array[c];throw Error("No element indexed by "+c);};eq.prototype.toArray=function(){return(this||yo)._array.slice()};var Ur="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,a5=jn;fq.prototype.unsortedForEach=
function(c,h){(this||Ur)._array.forEach(c,h)};fq.prototype.add=function(c){var h=(this||Ur)._last,f=h.generatedLine,k=c.generatedLine,n=h.generatedColumn,b=c.generatedColumn;k>f||k==f&&b>=n||0>=a5.compareByGeneratedPositionsInflated(h,c)?(this||Ur)._last=c:(this||Ur)._sorted=!1;(this||Ur)._array.push(c)};fq.prototype.toArray=function(){(this||Ur)._sorted||((this||Ur)._array.sort(a5.compareByGeneratedPositionsInflated),(this||Ur)._sorted=!0);return(this||Ur)._array};var ui="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Mm=jn,II=eq,Qaa=fq;Zo.prototype._version=3;Zo.fromSourceMap=function(c){var h=c.sourceRoot,f=new Zo({file:c.file,sourceRoot:h});c.eachMapping(function(k){var n={generated:{line:k.generatedLine,column:k.generatedColumn}};null!=k.source&&(n.source=k.source,null!=h&&(n.source=Mm.relative(h,n.source)),n.original={line:k.originalLine,column:k.originalColumn},null!=k.name&&(n.name=k.name));f.addMapping(n)});c.sources.forEach(function(k){var n=k;null!==h&&
(n=Mm.relative(h,k));f._sources.has(n)||f._sources.add(n);n=c.sourceContentFor(k);null!=n&&f.setSourceContent(k,n)});return f};Zo.prototype.addMapping=function(c){var h=Mm.getArg(c,"generated"),f=Mm.getArg(c,"original",null),k=Mm.getArg(c,"source",null);c=Mm.getArg(c,"name",null);(this||ui)._skipValidation||this._validateMapping(h,f,k,c);null!=k&&(k=String(k),(this||ui)._sources.has(k)||(this||ui)._sources.add(k));null!=c&&(c=String(c),(this||ui)._names.has(c)||(this||ui)._names.add(c));(this||ui)._mappings.add({generatedLine:h.line,
generatedColumn:h.column,originalLine:null!=f&&f.line,originalColumn:null!=f&&f.column,source:k,name:c})};Zo.prototype.setSourceContent=function(c,h){null!=(this||ui)._sourceRoot&&(c=Mm.relative((this||ui)._sourceRoot,c));null!=h?((this||ui)._sourcesContents||((this||ui)._sourcesContents=Object.create(null)),(this||ui)._sourcesContents[Mm.toSetString(c)]=h):(this||ui)._sourcesContents&&(delete (this||ui)._sourcesContents[Mm.toSetString(c)],0===Object.keys((this||ui)._sourcesContents).length&&((this||
ui)._sourcesContents=null))};Zo.prototype.applySourceMap=function(c,h,f){var k=h;if(null==h){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');k=c.file}var n=(this||ui)._sourceRoot;null!=n&&(k=Mm.relative(n,k));var b=new II,e=new II;(this||ui)._mappings.unsortedForEach(function(m){if(m.source===k&&null!=m.originalLine){var a=c.originalPositionFor({line:m.originalLine,column:m.originalColumn});
null!=a.source&&(m.source=a.source,null!=f&&(m.source=Mm.join(f,m.source)),null!=n&&(m.source=Mm.relative(n,m.source)),m.originalLine=a.line,m.originalColumn=a.column,null!=a.name&&(m.name=a.name))}a=m.source;null==a||b.has(a)||b.add(a);m=m.name;null==m||e.has(m)||e.add(m)},this||ui);(this||ui)._sources=b;(this||ui)._names=e;c.sources.forEach(function(m){var a=c.sourceContentFor(m);null!=a&&(null!=f&&(m=Mm.join(f,m)),null!=n&&(m=Mm.relative(n,m)),this.setSourceContent(m,a))},this||ui)};Zo.prototype._validateMapping=
function(c,h,f,k){if(h&&"number"!==typeof h.line&&"number"!==typeof h.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!h&&!f&&!k||c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&0<c.line&&0<=c.column&&0<h.line&&0<=h.column&&
f))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:f,original:h,name:k}));};Zo.prototype._serializeMappings=function(){for(var c=0,h=1,f=0,k=0,n=0,b=0,e="",m,a,g,l=(this||ui)._mappings.toArray(),r=0,v=l.length;r<v;r++){a=l[r];m="";if(a.generatedLine!==h)for(c=0;a.generatedLine!==h;)m+=";",h++;else if(0<r){if(!Mm.compareByGeneratedPositionsInflated(a,l[r-1]))continue;m+=","}m+=ED.encode(a.generatedColumn-c);c=a.generatedColumn;null!=a.source&&(g=(this||ui)._sources.indexOf(a.source),
m+=ED.encode(g-b),b=g,m+=ED.encode(a.originalLine-1-k),k=a.originalLine-1,m+=ED.encode(a.originalColumn-f),f=a.originalColumn,null!=a.name&&(a=(this||ui)._names.indexOf(a.name),m+=ED.encode(a-n),n=a));e+=m}return e};Zo.prototype._generateSourcesContent=function(c,h){return c.map(function(f){if(!(this||ui)._sourcesContents)return null;null!=h&&(f=Mm.relative(h,f));f=Mm.toSetString(f);return Object.prototype.hasOwnProperty.call((this||ui)._sourcesContents,f)?(this||ui)._sourcesContents[f]:null},this||
ui)};Zo.prototype.toJSON=function(){var c={version:(this||ui)._version,sources:(this||ui)._sources.toArray(),names:(this||ui)._names.toArray(),mappings:this._serializeMappings()};null!=(this||ui)._file&&(c.file=(this||ui)._file);null!=(this||ui)._sourceRoot&&(c.sourceRoot=(this||ui)._sourceRoot);(this||ui)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};Zo.prototype.toString=function(){return JSON.stringify(this.toJSON())};var JI={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,h,f,k){if(0===h.length)return-1;c=YE(-1,h.length,c,h,f,k||JI.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===f(h[c],h[c-1],!0);)--c;return c}},kf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cg=jn,lT=JI,cC=eq,BG=function(c,h){il(c,h,0,c.length-1)};sj.fromSourceMap=function(c,h){return Bk.fromSourceMap(c,h)};sj.prototype._version=3;sj.prototype.__generatedMappings=null;Object.defineProperty(sj.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||kf).__generatedMappings||this._parseMappings((this||kf)._mappings,(this||kf).sourceRoot);return(this||kf).__generatedMappings}});sj.prototype.__originalMappings=null;Object.defineProperty(sj.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||kf).__originalMappings||this._parseMappings((this||kf)._mappings,(this||kf).sourceRoot);return(this||kf).__originalMappings}});sj.prototype._charIsMappingSeparator=function(c,
h){c=c.charAt(h);return";"===c||","===c};sj.prototype._parseMappings=function(c,h){throw Error("Subclasses must implement _parseMappings");};sj.GENERATED_ORDER=1;sj.ORIGINAL_ORDER=2;sj.GREATEST_LOWER_BOUND=1;sj.LEAST_UPPER_BOUND=2;sj.prototype.eachMapping=function(c,h,f){h=h||null;switch(f||sj.GENERATED_ORDER){case sj.GENERATED_ORDER:f=(this||kf)._generatedMappings;break;case sj.ORIGINAL_ORDER:f=(this||kf)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var k=(this||kf).sourceRoot;
f.map(function(n){var b=null===n.source?null:(this||kf)._sources.at(n.source);b=Cg.computeSourceURL(k,b,(this||kf)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||kf)._names.at(n.name)}},this||kf).forEach(c,h)};sj.prototype.allGeneratedPositionsFor=function(c){var h=Cg.getArg(c,"line"),f={source:Cg.getArg(c,"source"),originalLine:h,originalColumn:Cg.getArg(c,"column",
0)};f.source=this._findSourceIndex(f.source);if(0>f.source)return[];var k=[];f=this._findMapping(f,(this||kf)._originalMappings,"originalLine","originalColumn",Cg.compareByOriginalPositions,lT.LEAST_UPPER_BOUND);if(0<=f){var n=(this||kf)._originalMappings[f];if(void 0===c.column)for(h=n.originalLine;n&&n.originalLine===h;)k.push({line:Cg.getArg(n,"generatedLine",null),column:Cg.getArg(n,"generatedColumn",null),lastColumn:Cg.getArg(n,"lastGeneratedColumn",null)}),n=(this||kf)._originalMappings[++f];
else for(c=n.originalColumn;n&&n.originalLine===h&&n.originalColumn==c;)k.push({line:Cg.getArg(n,"generatedLine",null),column:Cg.getArg(n,"generatedColumn",null),lastColumn:Cg.getArg(n,"lastGeneratedColumn",null)}),n=(this||kf)._originalMappings[++f]}return k};Bk.prototype=Object.create(sj.prototype);Bk.prototype.consumer=sj;Bk.prototype._findSourceIndex=function(c){var h=c;null!=(this||kf).sourceRoot&&(h=Cg.relative((this||kf).sourceRoot,h));if((this||kf)._sources.has(h))return(this||kf)._sources.indexOf(h);
for(h=0;h<(this||kf)._absoluteSources.length;++h)if((this||kf)._absoluteSources[h]==c)return h;return-1};Bk.fromSourceMap=function(c,h){var f=Object.create(Bk.prototype),k=f._names=cC.fromArray(c._names.toArray(),!0),n=f._sources=cC.fromArray(c._sources.toArray(),!0);f.sourceRoot=c._sourceRoot;f.sourcesContent=c._generateSourcesContent(f._sources.toArray(),f.sourceRoot);f.file=c._file;f._sourceMapURL=h;f._absoluteSources=f._sources.toArray().map(function(r){return Cg.computeSourceURL(f.sourceRoot,
r,h)});c=c._mappings.toArray().slice();for(var b=f.__generatedMappings=[],e=f.__originalMappings=[],m=0,a=c.length;m<a;m++){var g=c[m],l=new Az;l.generatedLine=g.generatedLine;l.generatedColumn=g.generatedColumn;g.source&&(l.source=n.indexOf(g.source),l.originalLine=g.originalLine,l.originalColumn=g.originalColumn,g.name&&(l.name=k.indexOf(g.name)),e.push(l));b.push(l)}BG(f.__originalMappings,Cg.compareByOriginalPositions);return f};Bk.prototype._version=3;Object.defineProperty(Bk.prototype,"sources",
{get:function(){return(this||kf)._absoluteSources.slice()}});Bk.prototype._parseMappings=function(c,h){h=1;for(var f=0,k=0,n=0,b=0,e=0,m=c.length,a=0,g={},l={},r=[],v=[],y,A,E,F,H;a<m;)if(";"===c.charAt(a))h++,a++,f=0;else if(","===c.charAt(a))a++;else{y=new Az;y.generatedLine=h;for(F=a;F<m&&!this._charIsMappingSeparator(c,F);F++);A=c.slice(a,F);if(E=g[A])a+=A.length;else{for(E=[];a<F;)ED.decode(c,a,l),H=l.value,a=l.rest,E.push(H);if(2===E.length)throw Error("Found a source, but no line and column");
if(3===E.length)throw Error("Found a source and line, but no column");g[A]=E}y.generatedColumn=f+E[0];f=y.generatedColumn;1<E.length&&(y.source=b+E[1],b+=E[1],y.originalLine=k+E[2],k=y.originalLine,y.originalLine+=1,y.originalColumn=n+E[3],n=y.originalColumn,4<E.length&&(y.name=e+E[4],e+=E[4]));v.push(y);"number"===typeof y.originalLine&&r.push(y)}BG(v,Cg.compareByGeneratedPositionsDeflated);(this||kf).__generatedMappings=v;BG(r,Cg.compareByOriginalPositions);(this||kf).__originalMappings=r};Bk.prototype._findMapping=
function(c,h,f,k,n,b){if(0>=c[f])throw new TypeError("Line must be greater than or equal to 1, got "+c[f]);if(0>c[k])throw new TypeError("Column must be greater than or equal to 0, got "+c[k]);return lT.search(c,h,n,b)};Bk.prototype.computeColumnSpans=function(){for(var c=0;c<(this||kf)._generatedMappings.length;++c){var h=(this||kf)._generatedMappings[c];if(c+1<(this||kf)._generatedMappings.length){var f=(this||kf)._generatedMappings[c+1];if(h.generatedLine===f.generatedLine){h.lastGeneratedColumn=
f.generatedColumn-1;continue}}h.lastGeneratedColumn=Infinity}};Bk.prototype.originalPositionFor=function(c){var h={generatedLine:Cg.getArg(c,"line"),generatedColumn:Cg.getArg(c,"column")};c=this._findMapping(h,(this||kf)._generatedMappings,"generatedLine","generatedColumn",Cg.compareByGeneratedPositionsDeflated,Cg.getArg(c,"bias",sj.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||kf)._generatedMappings[c],c.generatedLine===h.generatedLine)){h=Cg.getArg(c,"source",null);null!==h&&(h=(this||kf)._sources.at(h),
h=Cg.computeSourceURL((this||kf).sourceRoot,h,(this||kf)._sourceMapURL));var f=Cg.getArg(c,"name",null);null!==f&&(f=(this||kf)._names.at(f));return{source:h,line:Cg.getArg(c,"originalLine",null),column:Cg.getArg(c,"originalColumn",null),name:f}}return{source:null,line:null,column:null,name:null}};Bk.prototype.hasContentsOfAllSources=function(){return(this||kf).sourcesContent?(this||kf).sourcesContent.length>=(this||kf)._sources.size()&&!(this||kf).sourcesContent.some(function(c){return null==c}):
!1};Bk.prototype.sourceContentFor=function(c,h){if(!(this||kf).sourcesContent)return null;var f=this._findSourceIndex(c);if(0<=f)return(this||kf).sourcesContent[f];null!=(this||kf).sourceRoot&&(c=Cg.relative((this||kf).sourceRoot,c));var k;if(null!=(this||kf).sourceRoot&&(k=Cg.urlParse((this||kf).sourceRoot))){f=c.replace(/^file:\/\//,"");if("file"==k.scheme&&(this||kf)._sources.has(f))return(this||kf).sourcesContent[(this||kf)._sources.indexOf(f)];if((!k.path||"/"==k.path)&&(this||kf)._sources.has("/"+
c))return(this||kf).sourcesContent[(this||kf)._sources.indexOf("/"+c)]}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Bk.prototype.generatedPositionFor=function(c){var h=Cg.getArg(c,"source");h=this._findSourceIndex(h);if(0>h)return{line:null,column:null,lastColumn:null};h={source:h,originalLine:Cg.getArg(c,"line"),originalColumn:Cg.getArg(c,"column")};c=this._findMapping(h,(this||kf)._originalMappings,"originalLine","originalColumn",Cg.compareByOriginalPositions,Cg.getArg(c,"bias",
sj.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||kf)._originalMappings[c],c.source===h.source)?{line:Cg.getArg(c,"generatedLine",null),column:Cg.getArg(c,"generatedColumn",null),lastColumn:Cg.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};gq.prototype=Object.create(sj.prototype);gq.prototype.constructor=sj;gq.prototype._version=3;Object.defineProperty(gq.prototype,"sources",{get:function(){for(var c=[],h=0;h<(this||kf)._sections.length;h++)for(var f=0;f<(this||kf)._sections[h].consumer.sources.length;f++)c.push((this||
kf)._sections[h].consumer.sources[f]);return c}});gq.prototype.originalPositionFor=function(c){var h={generatedLine:Cg.getArg(c,"line"),generatedColumn:Cg.getArg(c,"column")},f=lT.search(h,(this||kf)._sections,function(k,n){var b=k.generatedLine-n.generatedOffset.generatedLine;return b?b:k.generatedColumn-n.generatedOffset.generatedColumn});return(f=(this||kf)._sections[f])?f.consumer.originalPositionFor({line:h.generatedLine-(f.generatedOffset.generatedLine-1),column:h.generatedColumn-(f.generatedOffset.generatedLine===
h.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};gq.prototype.hasContentsOfAllSources=function(){return(this||kf)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};gq.prototype.sourceContentFor=function(c,h){for(var f=0;f<(this||kf)._sections.length;f++){var k=(this||kf)._sections[f].consumer.sourceContentFor(c,!0);if(k)return k}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};gq.prototype.generatedPositionFor=
function(c){for(var h=0;h<(this||kf)._sections.length;h++){var f=(this||kf)._sections[h];if(-1!==f.consumer._findSourceIndex(Cg.getArg(c,"source"))){var k=f.consumer.generatedPositionFor(c);if(k)return{line:k.line+(f.generatedOffset.generatedLine-1),column:k.column+(f.generatedOffset.generatedLine===k.line?f.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};gq.prototype._parseMappings=function(c,h){(this||kf).__generatedMappings=[];(this||kf).__originalMappings=[];for(c=0;c<(this||
kf)._sections.length;c++){h=(this||kf)._sections[c];for(var f=h.consumer._generatedMappings,k=0;k<f.length;k++){var n=f[k],b=h.consumer._sources.at(n.source);b=Cg.computeSourceURL(h.consumer.sourceRoot,b,(this||kf)._sourceMapURL);(this||kf)._sources.add(b);b=(this||kf)._sources.indexOf(b);var e=null;n.name&&(e=h.consumer._names.at(n.name),(this||kf)._names.add(e),e=(this||kf)._names.indexOf(e));n={source:b,generatedLine:n.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(h.generatedOffset.generatedLine===n.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:e};(this||kf).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||kf).__originalMappings.push(n)}}BG((this||kf).__generatedMappings,Cg.compareByGeneratedPositionsDeflated);BG((this||kf).__originalMappings,Cg.compareByOriginalPositions)};var tj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yL=jn,
pha=/(\r?\n)/;zo.fromStringWithSourceMap=function(c,h,f){function k(r,v){if(null===r||void 0===r.source)n.add(v);else{var y=f?yL.join(f,r.source):r.source;n.add(new zo(r.originalLine,r.originalColumn,y,v,r.name))}}var n=new zo,b=c.split(pha),e=0,m=function(){var r=e<b.length?b[e++]:void 0,v=(e<b.length?b[e++]:void 0)||"";return r+v},a=1,g=0,l=null;h.eachMapping(function(r){if(null!==l)if(a<r.generatedLine)k(l,m()),a++,g=0;else{var v=b[e]||"",y=v.substr(0,r.generatedColumn-g);b[e]=v.substr(r.generatedColumn-
g);g=r.generatedColumn;k(l,y);l=r;return}for(;a<r.generatedLine;)n.add(m()),a++;g<r.generatedColumn&&(v=b[e]||"",n.add(v.substr(0,r.generatedColumn)),b[e]=v.substr(r.generatedColumn),g=r.generatedColumn);l=r},this||tj);e<b.length&&(l&&k(l,m()),n.add(b.splice(e).join("")));h.sources.forEach(function(r){var v=h.sourceContentFor(r);null!=v&&(null!=f&&(r=yL.join(f,r)),n.setSourceContent(r,v))});return n};zo.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(h){this.add(h)},this||tj);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||tj).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||tj};zo.prototype.prepend=function(c){if(Array.isArray(c))for(var h=c.length-1;0<=h;h--)this.prepend(c[h]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||tj).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||tj};zo.prototype.walk=function(c){for(var h,
f=0,k=(this||tj).children.length;f<k;f++)h=(this||tj).children[f],h.$$$isSourceNode$$$?h.walk(c):""!==h&&c(h,{source:(this||tj).source,line:(this||tj).line,column:(this||tj).column,name:(this||tj).name})};zo.prototype.join=function(c){var h,f=(this||tj).children.length;if(0<f){var k=[];for(h=0;h<f-1;h++)k.push((this||tj).children[h]),k.push(c);k.push((this||tj).children[h]);(this||tj).children=k}return this||tj};zo.prototype.replaceRight=function(c,h){var f=(this||tj).children[(this||tj).children.length-
1];f.$$$isSourceNode$$$?f.replaceRight(c,h):"string"===typeof f?(this||tj).children[(this||tj).children.length-1]=f.replace(c,h):(this||tj).children.push("".replace(c,h));return this||tj};zo.prototype.setSourceContent=function(c,h){(this||tj).sourceContents[yL.toSetString(c)]=h};zo.prototype.walkSourceContents=function(c){for(var h=0,f=(this||tj).children.length;h<f;h++)(this||tj).children[h].$$$isSourceNode$$$&&(this||tj).children[h].walkSourceContents(c);var k=Object.keys((this||tj).sourceContents);
h=0;for(f=k.length;h<f;h++)c(yL.fromSetString(k[h]),(this||tj).sourceContents[k[h]])};zo.prototype.toString=function(){var c="";this.walk(function(h){c+=h});return c};zo.prototype.toStringWithSourceMap=function(c){var h="",f=1,k=0,n=new Zo(c),b=!1,e=null,m=null,a=null,g=null;this.walk(function(l,r){h+=l;null!==r.source&&null!==r.line&&null!==r.column?(e===r.source&&m===r.line&&a===r.column&&g===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:f,column:k},
name:r.name}),e=r.source,m=r.line,a=r.column,g=r.name,b=!0):b&&(n.addMapping({generated:{line:f,column:k}}),e=null,b=!1);for(var v=0,y=l.length;v<y;v++)10===l.charCodeAt(v)?(f++,k=0,v+1===y?(e=null,b=!1):b&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:f,column:k},name:r.name})):k++});this.walkSourceContents(function(l,r){n.setSourceContent(l,r)});return{code:h,map:n}};var Bn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kp=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(la,
Da){var Pa="";for(Da|=0;0<Da;Da>>>=1,la+=la)Da&1&&(Pa+=la);return Pa}function f(la){var Da=la.length;return Da&&jc.code.isLineTerminator(la.charCodeAt(Da-1))}function k(la,Da){for(var Pa in Da)Da.hasOwnProperty(Pa)&&(la[Pa]=Da[Pa]);return la}function n(la,Da){function Pa(Od){return"object"===typeof Od&&Od instanceof Object&&!(Od instanceof RegExp)}var yb;for(yb in Da)if(Da.hasOwnProperty(yb)){var ac=Da[yb];Pa(ac)?Pa(la[yb])?n(la[yb],ac):la[yb]=n({},ac):la[yb]=ac}return la}function b(la,Da){return 8232===
(la&-2)?(Da?"u":"\\u")+(8232===la?"2028":"2029"):10===la||13===la?(Da?"":"\\")+(10===la?"n":"r"):String.fromCharCode(la)}function e(la,Da){if(8===la)return"\\b";if(12===la)return"\\f";if(9===la)return"\\t";var Pa=la.toString(16).toUpperCase();return K||255<la?"\\u"+"0000".slice(Pa.length)+Pa:0!==la||jc.code.isDecimalDigit(Da)?11===la?"\\x0B":"\\x"+"00".slice(Pa.length)+Pa:"\\0"}function m(la){if(92===la)return"\\\\";if(10===la)return"\\n";if(13===la)return"\\r";if(8232===la)return"\\u2028";if(8233===
la)return"\\u2029";throw Error("Incorrectly classified character");}function a(la){var Da,Pa="";var yb=0;for(Da=la.length;yb<Da;++yb){var ac=la[yb];Pa+=Array.isArray(ac)?a(ac):ac}return Pa}function g(la,Da){if(!Lb)return Array.isArray(la)?a(la):la;if(null==Da){if(la instanceof ea)return la;Da={}}return null==Da.loc?new ea(null,null,Lb,la,Da.name||null):new ea(Da.loc.start.line,Da.loc.start.column,!0===Lb?Da.loc.source||null:Lb,la,Da.name||null)}function l(){return oa?oa:" "}function r(la,Da){var Pa=
g(la).toString();if(0===Pa.length)return[Da];var yb=g(Da).toString();if(0===yb.length)return[la];Pa=Pa.charCodeAt(Pa.length-1);yb=yb.charCodeAt(0);return(43===Pa||45===Pa)&&Pa===yb||jc.code.isIdentifierPartES5(Pa)&&jc.code.isIdentifierPartES5(yb)||47===Pa&&105===yb?[la,l(),Da]:jc.code.isWhiteSpace(Pa)||jc.code.isLineTerminator(Pa)||jc.code.isWhiteSpace(yb)||jc.code.isLineTerminator(yb)?[la,Da]:[la,oa,Da]}function v(la){var Da=Aa;Aa+=Ka;la(Aa);Aa=Da}function y(la,Da){if("Line"===la.type){if(f(la.value))return"//"+
la.value;Da="//"+la.value;Vb||(Da+="\n");return Da}if(ua.format.indent.adjustMultilineComment&&/[\n\r]/.test(la.value)){var Pa,yb;la=("/*"+la.value+"*/").split(/\r\n|[\r\n]/);var ac=Number.MAX_VALUE;var Od=1;for(Pa=la.length;Od<Pa;++Od){var Md=la[Od];for(yb=0;yb<Md.length&&jc.code.isWhiteSpace(Md.charCodeAt(yb));)++yb;ac>yb&&(ac=yb)}"undefined"!==typeof Da?(Md=Aa,"*"===la[1][ac]&&(Da+=" "),Aa=Da):(ac&1&&--ac,Md=Aa);Od=1;for(Pa=la.length;Od<Pa;++Od)Da=g([Aa,la[Od].slice(ac)]),la[Od]=Lb?Da.join(""):
Da;Aa=Md;return la.join("\n")}return"/*"+la.value+"*/"}function A(la,Da){var Pa;if(la.leadingComments&&0<la.leadingComments.length){var yb=Da;if(Vb){var ac=la.leadingComments[0];Da=[];var Od=ac.extendedRange;var Md=ac.range;var Wc=ic.substring(Od[0],Md[0]);var cf=(Wc.match(/\n/g)||[]).length;0<cf?(Da.push(h("\n",cf)),Da.push([Aa,y(ac)])):(Da.push(Wc),Da.push(y(ac)));cf=Md;Wc=1;for(Pa=la.leadingComments.length;Wc<Pa;Wc++)ac=la.leadingComments[Wc],Md=ac.range,cf=ic.substring(cf[1],Md[0]),cf=(cf.match(/\n/g)||
[]).length,Da.push(h("\n",cf)),Da.push([Aa,y(ac)]),cf=Md;Wc=ic.substring(Md[1],Od[1]);cf=(Wc.match(/\n/g)||[]).length;Da.push(h("\n",cf))}else for(ac=la.leadingComments[0],Da=[],va&&la.type===Pc.Program&&0===la.body.length&&Da.push("\n"),Da.push(y(ac)),f(g(Da).toString())||Da.push("\n"),Wc=1,Pa=la.leadingComments.length;Wc<Pa;++Wc)ac=la.leadingComments[Wc],ac=[y(ac)],f(g(ac).toString())||ac.push("\n"),Da.push([Aa,ac]);Da.push([Aa,yb])}if(la.trailingComments)if(Vb)ac=la.trailingComments[0],Od=ac.extendedRange,
Md=ac.range,Wc=ic.substring(Od[0],Md[0]),cf=(Wc.match(/\n/g)||[]).length,0<cf?(Da.push(h("\n",cf)),Da.push([Aa,y(ac)])):(Da.push(Wc),Da.push(y(ac)));else{yb=!f(g(Da).toString());Wc=g([Aa,Da,Ka]).toString();for(Pa=Wc.length-1;0<=Pa&&!jc.code.isLineTerminator(Wc.charCodeAt(Pa));--Pa);Od=h(" ",Wc.length-1-Pa);Wc=0;for(Pa=la.trailingComments.length;Wc<Pa;++Wc)ac=la.trailingComments[Wc],yb?(Da=0===Wc?[Da,Ka]:[Da,Od],Da.push(y(ac,Od))):Da=[Da,[Aa,y(ac)]],Wc===Pa-1||f(g(Da).toString())||(Da=[Da,"\n"])}return Da}
function E(la,Da,Pa){for(var yb=0;la<Da;la++)"\n"===ic[la]&&yb++;for(la=1;la<yb;la++)Pa.push(fa)}function F(la,Da,Pa){return Da<Pa?["(",la,")"]:la}function H(la){var Da;var Pa=la.split(/\r\n|\n/);la=1;for(Da=Pa.length;la<Da;la++)Pa[la]=fa+Aa+Pa[la];return Pa}function I(){}function M(la){return g(la.name,la)}function N(la,Da){return la.async?"async"+(Da?l():oa):""}function X(la){return la.generator&&!ua.moz.starlessGenerator?"*"+oa:""}function W(la){var Da=la.value,Pa="";Da.async&&(Pa+=N(Da,!la.computed));
Da.generator&&(Pa+=X(Da)?"*":"");return Pa}var ea,Aa,Ka,K,aa,T,U,pa,fa,oa,hb,Cb,va,ma,ua,Ma,Lb,ic,Vb;var jc=AG;var Pc=iT.Syntax;var Rb={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var zd={"||":Rb.LogicalOR,"&&":Rb.LogicalAND,"|":Rb.BitwiseOR,
"^":Rb.BitwiseXOR,"&":Rb.BitwiseAND,"==":Rb.Equality,"!=":Rb.Equality,"===":Rb.Equality,"!==":Rb.Equality,is:Rb.Equality,isnt:Rb.Equality,"<":Rb.Relational,">":Rb.Relational,"<=":Rb.Relational,">=":Rb.Relational,"in":Rb.Relational,"instanceof":Rb.Relational,"<<":Rb.BitwiseSHIFT,">>":Rb.BitwiseSHIFT,">>>":Rb.BitwiseSHIFT,"+":Rb.Additive,"-":Rb.Additive,"*":Rb.Multiplicative,"%":Rb.Multiplicative,"/":Rb.Multiplicative,"**":Rb.Exponentiation};I.prototype.maybeBlock=function(la,Da){var Pa,yb=this||Bn;
var ac=!ua.comment||!la.leadingComments;if(la.type===Pc.BlockStatement&&ac)return[oa,this.generateStatement(la,Da)];if(la.type===Pc.EmptyStatement&&ac)return";";v(function(){Pa=[fa,[Aa,yb.generateStatement(la,Da)]]});return Pa};I.prototype.maybeBlockSuffix=function(la,Da){var Pa=f(g(Da).toString());return la.type!==Pc.BlockStatement||ua.comment&&la.leadingComments||Pa?Pa?[Da,Aa]:[Da,fa,Aa]:[Da,oa]};I.prototype.generatePattern=function(la,Da,Pa){return la.type===Pc.Identifier?M(la):this.generateExpression(la,
Da,Pa)};I.prototype.generateFunctionParams=function(la){var Da;var Pa=!1;if(la.type!==Pc.ArrowFunctionExpression||la.rest||la.defaults&&0!==la.defaults.length||1!==la.params.length||la.params[0].type!==Pc.Identifier){var yb=la.type===Pc.ArrowFunctionExpression?[N(la,!1)]:[];yb.push("(");la.defaults&&(Pa=!0);var ac=0;for(Da=la.params.length;ac<Da;++ac)Pa&&la.defaults[ac]?yb.push(this.generateAssignment(la.params[ac],la.defaults[ac],"=",Rb.Assignment,7)):yb.push(this.generatePattern(la.params[ac],Rb.Assignment,
7)),ac+1<Da&&yb.push(","+oa);la.rest&&(la.params.length&&yb.push(","+oa),yb.push("..."),yb.push(M(la.rest)));yb.push(")")}else yb=[N(la,!0),M(la.params[0])];return yb};I.prototype.generateFunctionBody=function(la){var Da=this.generateFunctionParams(la);la.type===Pc.ArrowFunctionExpression&&(Da.push(oa),Da.push("=>"));la.expression?(Da.push(oa),la=this.generateExpression(la.body,Rb.Assignment,7),"{"===la.toString().charAt(0)&&(la=["(",la,")"]),Da.push(la)):Da.push(this.maybeBlock(la.body,9));return Da};
I.prototype.generateIterationForStatement=function(la,Da,Pa){var yb=["for"+(Da.await?l()+"await":"")+oa+"("],ac=this||Bn;v(function(){Da.left.type===Pc.VariableDeclaration?v(function(){yb.push(Da.left.kind+l());yb.push(ac.generateStatement(Da.left.declarations[0],0))}):yb.push(ac.generateExpression(Da.left,Rb.Call,7));yb=r(yb,la);yb=[r(yb,ac.generateExpression(Da.right,Rb.Assignment,7)),")"]});yb.push(this.maybeBlock(Da.body,Pa));return yb};I.prototype.generatePropertyKey=function(la,Da){var Pa=[];
Da&&Pa.push("[");Pa.push(this.generateExpression(la,Rb.Assignment,7));Da&&Pa.push("]");return Pa};I.prototype.generateAssignment=function(la,Da,Pa,yb,ac){Rb.Assignment<yb&&(ac|=1);return F([this.generateExpression(la,Rb.Call,ac),oa+Pa+oa,this.generateExpression(Da,Rb.Assignment,ac)],Rb.Assignment,yb)};I.prototype.semicolon=function(la){return!Cb&&la&32?"":";"};I.Statement={BlockStatement:function(la,Da){var Pa,yb,ac=["{",fa],Od=this||Bn;v(function(){0===la.body.length&&Vb&&(Pa=la.range,2<Pa[1]-Pa[0]&&
(yb=ic.substring(Pa[0]+1,Pa[1]-1),"\n"===yb[0]&&(ac=["{"]),ac.push(yb)));var Md;var Wc=1;Da&8&&(Wc|=16);var cf=0;for(Md=la.body.length;cf<Md;++cf){Vb&&(0===cf&&(la.body[0].leadingComments&&(Pa=la.body[0].leadingComments[0].extendedRange,yb=ic.substring(Pa[0],Pa[1]),"\n"===yb[0]&&(ac=["{"])),la.body[0].leadingComments||E(la.range[0],la.body[0].range[0],ac)),0<cf&&(la.body[cf-1].trailingComments||la.body[cf].leadingComments||E(la.body[cf-1].range[1],la.body[cf].range[0],ac)));cf===Md-1&&(Wc|=32);var Se=
la.body[cf].leadingComments&&Vb?Od.generateStatement(la.body[cf],Wc):[Aa,Od.generateStatement(la.body[cf],Wc)];ac.push(Se);f(g(Se).toString())||(Vb&&cf<Md-1?la.body[cf+1].leadingComments||ac.push(fa):ac.push(fa));Vb&&cf===Md-1&&(la.body[cf].trailingComments||E(la.body[cf].range[1],la.range[1],ac))}});ac.push([Aa,"}"]);return ac},BreakStatement:function(la,Da){return la.label?"break "+la.label.name+this.semicolon(Da):"break"+this.semicolon(Da)},ContinueStatement:function(la,Da){return la.label?"continue "+
la.label.name+this.semicolon(Da):"continue"+this.semicolon(Da)},ClassBody:function(la,Da){var Pa=["{",fa],yb=this||Bn;v(function(ac){var Od;var Md=0;for(Od=la.body.length;Md<Od;++Md)Pa.push(ac),Pa.push(yb.generateExpression(la.body[Md],Rb.Sequence,7)),Md+1<Od&&Pa.push(fa)});f(g(Pa).toString())||Pa.push(fa);Pa.push(Aa);Pa.push("}");return Pa},ClassDeclaration:function(la,Da){Da=["class"];la.id&&(Da=r(Da,this.generateExpression(la.id,Rb.Sequence,7)));if(la.superClass){var Pa=r("extends",this.generateExpression(la.superClass,
Rb.Unary,7));Da=r(Da,Pa)}Da.push(oa);Da.push(this.generateStatement(la.body,33));return Da},DirectiveStatement:function(la,Da){if(ua.raw&&la.raw)return la.raw+this.semicolon(Da);la=la.directive;var Pa;var yb="double"===U?'"':"'";var ac=0;for(Pa=la.length;ac<Pa;++ac){var Od=la.charCodeAt(ac);if(39===Od){yb='"';break}else if(34===Od){yb="'";break}else 92===Od&&++ac}return yb+la+yb+this.semicolon(Da)},DoWhileStatement:function(la,Da){var Pa=r("do",this.maybeBlock(la.body,1));Pa=this.maybeBlockSuffix(la.body,
Pa);return r(Pa,["while"+oa+"(",this.generateExpression(la.test,Rb.Sequence,7),")"+this.semicolon(Da)])},CatchClause:function(la,Da){var Pa,yb=this||Bn;v(function(){if(la.param){if(Pa=["catch"+oa+"(",yb.generateExpression(la.param,Rb.Sequence,7),")"],la.guard){var ac=yb.generateExpression(la.guard,Rb.Sequence,7);Pa.splice(2,0," if ",ac)}}else Pa=["catch"]});Pa.push(this.maybeBlock(la.body,1));return Pa},DebuggerStatement:function(la,Da){return"debugger"+this.semicolon(Da)},EmptyStatement:function(la,
Da){return";"},ExportDefaultDeclaration:function(la,Da){var Pa=["export"];var yb=Da&32?33:1;Pa=r(Pa,"default");return Pa=I.Statement.hasOwnProperty(la.declaration.type)?r(Pa,this.generateStatement(la.declaration,yb)):r(Pa,this.generateExpression(la.declaration,Rb.Assignment,7)+this.semicolon(Da))},ExportNamedDeclaration:function(la,Da){var Pa=["export"],yb=this||Bn;var ac=Da&32?33:1;if(la.declaration)return r(Pa,this.generateStatement(la.declaration,ac));la.specifiers&&(0===la.specifiers.length?Pa=
r(Pa,"{"+oa+"}"):la.specifiers[0].type===Pc.ExportBatchSpecifier?Pa=r(Pa,this.generateExpression(la.specifiers[0],Rb.Sequence,7)):(Pa=r(Pa,"{"),v(function(Od){var Md;Pa.push(fa);var Wc=0;for(Md=la.specifiers.length;Wc<Md;++Wc)Pa.push(Od),Pa.push(yb.generateExpression(la.specifiers[Wc],Rb.Sequence,7)),Wc+1<Md&&Pa.push(","+fa)}),f(g(Pa).toString())||Pa.push(fa),Pa.push(Aa+"}")),la.source?Pa=r(Pa,["from"+oa,this.generateExpression(la.source,Rb.Sequence,7),this.semicolon(Da)]):Pa.push(this.semicolon(Da)));
return Pa},ExportAllDeclaration:function(la,Da){return["export"+oa,"*"+oa,"from"+oa,this.generateExpression(la.source,Rb.Sequence,7),this.semicolon(Da)]},ExpressionStatement:function(la,Da){function Pa(Wc){if("class"!==Wc.slice(0,5))return!1;Wc=Wc.charCodeAt(5);return 123===Wc||jc.code.isWhiteSpace(Wc)||jc.code.isLineTerminator(Wc)}function yb(Wc){if("function"!==Wc.slice(0,8))return!1;Wc=Wc.charCodeAt(8);return 40===Wc||jc.code.isWhiteSpace(Wc)||42===Wc||jc.code.isLineTerminator(Wc)}function ac(Wc){var cf;
if("async"!==Wc.slice(0,5)||!jc.code.isWhiteSpace(Wc.charCodeAt(5)))return!1;var Se=6;for(cf=Wc.length;Se<cf&&jc.code.isWhiteSpace(Wc.charCodeAt(Se));++Se);if(Se===cf||"function"!==Wc.slice(Se,Se+8))return!1;Wc=Wc.charCodeAt(Se+8);return 40===Wc||jc.code.isWhiteSpace(Wc)||42===Wc||jc.code.isLineTerminator(Wc)}var Od=[this.generateExpression(la.expression,Rb.Sequence,7)];var Md=g(Od).toString();123===Md.charCodeAt(0)||Pa(Md)||yb(Md)||ac(Md)||ma&&Da&16&&la.expression.type===Pc.Literal&&"string"===typeof la.expression.value?
Od=["(",Od,")"+this.semicolon(Da)]:Od.push(this.semicolon(Da));return Od},ImportDeclaration:function(la,Da){var Pa=this||Bn;if(0===la.specifiers.length)return["import",oa,this.generateExpression(la.source,Rb.Sequence,7),this.semicolon(Da)];var yb=["import"];var ac=0;la.specifiers[ac].type===Pc.ImportDefaultSpecifier&&(yb=r(yb,[this.generateExpression(la.specifiers[ac],Rb.Sequence,7)]),++ac);la.specifiers[ac]&&(0!==ac&&yb.push(","),la.specifiers[ac].type===Pc.ImportNamespaceSpecifier?yb=r(yb,[oa,this.generateExpression(la.specifiers[ac],
Rb.Sequence,7)]):(yb.push(oa+"{"),1===la.specifiers.length-ac?(yb.push(oa),yb.push(this.generateExpression(la.specifiers[ac],Rb.Sequence,7)),yb.push(oa+"}"+oa)):(v(function(Od){var Md;yb.push(fa);var Wc=ac;for(Md=la.specifiers.length;Wc<Md;++Wc)yb.push(Od),yb.push(Pa.generateExpression(la.specifiers[Wc],Rb.Sequence,7)),Wc+1<Md&&yb.push(","+fa)}),f(g(yb).toString())||yb.push(fa),yb.push(Aa+"}"+oa))));return yb=r(yb,["from"+oa,this.generateExpression(la.source,Rb.Sequence,7),this.semicolon(Da)])},VariableDeclarator:function(la,
Da){Da=Da&1?7:6;return la.init?[this.generateExpression(la.id,Rb.Assignment,Da),oa,"=",oa,this.generateExpression(la.init,Rb.Assignment,Da)]:this.generatePattern(la.id,Rb.Assignment,Da)},VariableDeclaration:function(la,Da){function Pa(){Od=la.declarations[0];ua.comment&&Od.leadingComments?(Wc.push("\n"),Wc.push([Aa,Md.generateStatement(Od,cf)])):(Wc.push(l()),Wc.push(Md.generateStatement(Od,cf)));yb=1;for(ac=la.declarations.length;yb<ac;++yb)Od=la.declarations[yb],ua.comment&&Od.leadingComments?(Wc.push(","+
fa),Wc.push([Aa,Md.generateStatement(Od,cf)])):(Wc.push(","+oa),Wc.push(Md.generateStatement(Od,cf)))}var yb,ac,Od,Md=this||Bn;var Wc=[la.kind];var cf=Da&1?1:0;1<la.declarations.length?v(Pa):Pa();Wc.push(this.semicolon(Da));return Wc},ThrowStatement:function(la,Da){return[r("throw",this.generateExpression(la.argument,Rb.Sequence,7)),this.semicolon(Da)]},TryStatement:function(la,Da){var Pa;Da=["try",this.maybeBlock(la.block,1)];Da=this.maybeBlockSuffix(la.block,Da);if(la.handlers){var yb=0;for(Pa=
la.handlers.length;yb<Pa;++yb)if(Da=r(Da,this.generateStatement(la.handlers[yb],1)),la.finalizer||yb+1!==Pa)Da=this.maybeBlockSuffix(la.handlers[yb].body,Da)}else{var ac=la.guardedHandlers||[];yb=0;for(Pa=ac.length;yb<Pa;++yb)if(Da=r(Da,this.generateStatement(ac[yb],1)),la.finalizer||yb+1!==Pa)Da=this.maybeBlockSuffix(ac[yb].body,Da);if(la.handler)if(Array.isArray(la.handler))for(yb=0,Pa=la.handler.length;yb<Pa;++yb){if(Da=r(Da,this.generateStatement(la.handler[yb],1)),la.finalizer||yb+1!==Pa)Da=
this.maybeBlockSuffix(la.handler[yb].body,Da)}else Da=r(Da,this.generateStatement(la.handler,1)),la.finalizer&&(Da=this.maybeBlockSuffix(la.handler.body,Da))}la.finalizer&&(Da=r(Da,["finally",this.maybeBlock(la.finalizer,1)]));return Da},SwitchStatement:function(la,Da){var Pa,yb,ac=this||Bn;v(function(){Pa=["switch"+oa+"(",ac.generateExpression(la.discriminant,Rb.Sequence,7),")"+oa+"{"+fa]});if(la.cases){var Od=1;var Md=0;for(yb=la.cases.length;Md<yb;++Md)Md===yb-1&&(Od|=32),Da=[Aa,this.generateStatement(la.cases[Md],
Od)],Pa.push(Da),f(g(Da).toString())||Pa.push(fa)}Pa.push([Aa,"}"]);return Pa},SwitchCase:function(la,Da){var Pa,yb,ac,Od,Md,Wc=this||Bn;v(function(){Pa=la.test?[r("case",Wc.generateExpression(la.test,Rb.Sequence,7)),":"]:["default:"];ac=0;(Od=la.consequent.length)&&la.consequent[0].type===Pc.BlockStatement&&(yb=Wc.maybeBlock(la.consequent[0],1),Pa.push(yb),ac=1);ac===Od||f(g(Pa).toString())||Pa.push(fa);for(Md=1;ac<Od;++ac)ac===Od-1&&Da&32&&(Md|=32),yb=[Aa,Wc.generateStatement(la.consequent[ac],
Md)],Pa.push(yb),ac+1===Od||f(g(yb).toString())||Pa.push(fa)});return Pa},IfStatement:function(la,Da){var Pa=this||Bn;v(function(){ac=["if"+oa+"(",Pa.generateExpression(la.test,Rb.Sequence,7),")"]});var yb=1;Da&32&&(yb|=32);if(la.alternate){ac.push(this.maybeBlock(la.consequent,1));var ac=this.maybeBlockSuffix(la.consequent,ac);ac=la.alternate.type===Pc.IfStatement?r(ac,["else ",this.generateStatement(la.alternate,yb)]):r(ac,r("else",this.maybeBlock(la.alternate,yb)))}else ac.push(this.maybeBlock(la.consequent,
yb));return ac},ForStatement:function(la,Da){var Pa,yb=this||Bn;v(function(){Pa=["for"+oa+"("];la.init?la.init.type===Pc.VariableDeclaration?Pa.push(yb.generateStatement(la.init,0)):(Pa.push(yb.generateExpression(la.init,Rb.Sequence,6)),Pa.push(";")):Pa.push(";");la.test&&(Pa.push(oa),Pa.push(yb.generateExpression(la.test,Rb.Sequence,7)));Pa.push(";");la.update&&(Pa.push(oa),Pa.push(yb.generateExpression(la.update,Rb.Sequence,7)));Pa.push(")")});Pa.push(this.maybeBlock(la.body,Da&32?33:1));return Pa},
ForInStatement:function(la,Da){return this.generateIterationForStatement("in",la,Da&32?33:1)},ForOfStatement:function(la,Da){return this.generateIterationForStatement("of",la,Da&32?33:1)},LabeledStatement:function(la,Da){return[la.label.name+":",this.maybeBlock(la.body,Da&32?33:1)]},Program:function(la,Da){var Pa;var yb=la.body.length;Da=[va&&0<yb?"\n":""];var ac=17;for(Pa=0;Pa<yb;++Pa){va||Pa!==yb-1||(ac|=32);Vb&&(0===Pa&&(la.body[0].leadingComments||E(la.range[0],la.body[Pa].range[0],Da)),0<Pa&&
(la.body[Pa-1].trailingComments||la.body[Pa].leadingComments||E(la.body[Pa-1].range[1],la.body[Pa].range[0],Da)));var Od=[Aa,this.generateStatement(la.body[Pa],ac)];Da.push(Od);Pa+1<yb&&!f(g(Od).toString())&&(Vb?la.body[Pa+1].leadingComments||Da.push(fa):Da.push(fa));Vb&&Pa===yb-1&&(la.body[Pa].trailingComments||E(la.body[Pa].range[1],la.range[1],Da))}return Da},FunctionDeclaration:function(la,Da){return[N(la,!0),"function",X(la)||l(),la.id?M(la.id):"",this.generateFunctionBody(la)]},ReturnStatement:function(la,
Da){return la.argument?[r("return",this.generateExpression(la.argument,Rb.Sequence,7)),this.semicolon(Da)]:["return"+this.semicolon(Da)]},WhileStatement:function(la,Da){var Pa,yb=this||Bn;v(function(){Pa=["while"+oa+"(",yb.generateExpression(la.test,Rb.Sequence,7),")"]});Pa.push(this.maybeBlock(la.body,Da&32?33:1));return Pa},WithStatement:function(la,Da){var Pa,yb=this||Bn;v(function(){Pa=["with"+oa+"(",yb.generateExpression(la.object,Rb.Sequence,7),")"]});Pa.push(this.maybeBlock(la.body,Da&32?33:
1));return Pa}};k(I.prototype,I.Statement);I.Expression={SequenceExpression:function(la,Da,Pa){var yb;Rb.Sequence<Da&&(Pa|=1);var ac=[];var Od=0;for(yb=la.expressions.length;Od<yb;++Od)ac.push(this.generateExpression(la.expressions[Od],Rb.Assignment,Pa)),Od+1<yb&&ac.push(","+oa);return F(ac,Rb.Sequence,Da)},AssignmentExpression:function(la,Da,Pa){return this.generateAssignment(la.left,la.right,la.operator,Da,Pa)},ArrowFunctionExpression:function(la,Da,Pa){return F(this.generateFunctionBody(la),Rb.ArrowFunction,
Da)},ConditionalExpression:function(la,Da,Pa){Rb.Conditional<Da&&(Pa|=1);return F([this.generateExpression(la.test,Rb.LogicalOR,Pa),oa+"?"+oa,this.generateExpression(la.consequent,Rb.Assignment,Pa),oa+":"+oa,this.generateExpression(la.alternate,Rb.Assignment,Pa)],Rb.Conditional,Da)},LogicalExpression:function(la,Da,Pa){return this.BinaryExpression(la,Da,Pa)},BinaryExpression:function(la,Da,Pa){var yb=zd[la.operator];var ac="**"===la.operator?Rb.Postfix:yb;var Od="**"===la.operator?yb:yb+1;yb<Da&&
(Pa|=1);ac=this.generateExpression(la.left,ac,Pa);var Md=ac.toString();Md=47===Md.charCodeAt(Md.length-1)&&jc.code.isIdentifierPartES5(la.operator.charCodeAt(0))?[ac,l(),la.operator]:r(ac,la.operator);ac=this.generateExpression(la.right,Od,Pa);"/"===la.operator&&"/"===ac.toString().charAt(0)||"<"===la.operator.slice(-1)&&"!--"===ac.toString().slice(0,3)?(Md.push(l()),Md.push(ac)):Md=r(Md,ac);return"in"!==la.operator||Pa&1?F(Md,yb,Da):["(",Md,")"]},CallExpression:function(la,Da,Pa){var yb;var ac=[this.generateExpression(la.callee,
Rb.Call,3)];la.optional&&ac.push("?.");ac.push("(");var Od=0;for(yb=la.arguments.length;Od<yb;++Od)ac.push(this.generateExpression(la.arguments[Od],Rb.Assignment,7)),Od+1<yb&&ac.push(","+oa);ac.push(")");return Pa&2?F(ac,Rb.Call,Da):["(",ac,")"]},ChainExpression:function(la,Da,Pa){Rb.OptionalChaining<Da&&(Pa|=2);la=this.generateExpression(la.expression,Rb.OptionalChaining,Pa);return F(la,Rb.OptionalChaining,Da)},NewExpression:function(la,Da,Pa){var yb=la.arguments.length;var ac=r("new",this.generateExpression(la.callee,
Rb.New,Pa&4&&!hb&&0===yb?5:1));if(!(Pa&4)||hb||0<yb){ac.push("(");for(Pa=0;Pa<yb;++Pa)ac.push(this.generateExpression(la.arguments[Pa],Rb.Assignment,7)),Pa+1<yb&&ac.push(","+oa);ac.push(")")}return F(ac,Rb.New,Da)},MemberExpression:function(la,Da,Pa){var yb=[this.generateExpression(la.object,Rb.Call,Pa&2?3:1)];la.computed?(la.optional&&yb.push("?."),yb.push("["),yb.push(this.generateExpression(la.property,Rb.Sequence,Pa&2?7:5)),yb.push("]")):(la.optional||la.object.type!==Pc.Literal||"number"!==typeof la.object.value||
(Pa=g(yb).toString(),0>Pa.indexOf(".")&&!/[eExX]/.test(Pa)&&jc.code.isDecimalDigit(Pa.charCodeAt(Pa.length-1))&&!(2<=Pa.length&&48===Pa.charCodeAt(0))&&yb.push(" ")),yb.push(la.optional?"?.":"."),yb.push(M(la.property)));return F(yb,Rb.Member,Da)},MetaProperty:function(la,Da,Pa){Pa=[];Pa.push("string"===typeof la.meta?la.meta:M(la.meta));Pa.push(".");Pa.push("string"===typeof la.property?la.property:M(la.property));return F(Pa,Rb.Member,Da)},UnaryExpression:function(la,Da,Pa){var yb=this.generateExpression(la.argument,
Rb.Unary,7);if(""===oa)Pa=r(la.operator,yb);else if(Pa=[la.operator],2<la.operator.length)Pa=r(Pa,yb);else{la=g(Pa).toString();var ac=la.charCodeAt(la.length-1);la=yb.toString().charCodeAt(0);((43===ac||45===ac)&&ac===la||jc.code.isIdentifierPartES5(ac)&&jc.code.isIdentifierPartES5(la))&&Pa.push(l());Pa.push(yb)}return F(Pa,Rb.Unary,Da)},YieldExpression:function(la,Da,Pa){Pa=la.delegate?"yield*":"yield";la.argument&&(Pa=r(Pa,this.generateExpression(la.argument,Rb.Yield,7)));return F(Pa,Rb.Yield,Da)},
AwaitExpression:function(la,Da,Pa){la=r(la.all?"await*":"await",this.generateExpression(la.argument,Rb.Await,7));return F(la,Rb.Await,Da)},UpdateExpression:function(la,Da,Pa){return la.prefix?F([la.operator,this.generateExpression(la.argument,Rb.Unary,7)],Rb.Unary,Da):F([this.generateExpression(la.argument,Rb.Postfix,7),la.operator],Rb.Postfix,Da)},FunctionExpression:function(la,Da,Pa){Da=[N(la,!0),"function"];la.id?(Da.push(X(la)||l()),Da.push(M(la.id))):Da.push(X(la)||oa);Da.push(this.generateFunctionBody(la));
return Da},ArrayPattern:function(la,Da,Pa){return this.ArrayExpression(la,Da,Pa,!0)},ArrayExpression:function(la,Da,Pa,yb){var ac=this||Bn;if(!la.elements.length)return"[]";var Od=yb?!1:1<la.elements.length;var Md=["[",Od?fa:""];v(function(Wc){var cf;var Se=0;for(cf=la.elements.length;Se<cf;++Se)la.elements[Se]?(Md.push(Od?Wc:""),Md.push(ac.generateExpression(la.elements[Se],Rb.Assignment,7))):(Od&&Md.push(Wc),Se+1===cf&&Md.push(",")),Se+1<cf&&Md.push(","+(Od?fa:oa))});Od&&!f(g(Md).toString())&&Md.push(fa);
Md.push(Od?Aa:"");Md.push("]");return Md},RestElement:function(la,Da,Pa){return"..."+this.generatePattern(la.argument)},ClassExpression:function(la,Da,Pa){Da=["class"];la.id&&(Da=r(Da,this.generateExpression(la.id,Rb.Sequence,7)));la.superClass&&(Pa=r("extends",this.generateExpression(la.superClass,Rb.Unary,7)),Da=r(Da,Pa));Da.push(oa);Da.push(this.generateStatement(la.body,33));return Da},MethodDefinition:function(la,Da,Pa){Da=la["static"]?["static"+oa]:[];la="get"===la.kind||"set"===la.kind?[r(la.kind,
this.generatePropertyKey(la.key,la.computed)),this.generateFunctionBody(la.value)]:[W(la),this.generatePropertyKey(la.key,la.computed),this.generateFunctionBody(la.value)];return r(Da,la)},Property:function(la,Da,Pa){return"get"===la.kind||"set"===la.kind?[la.kind,l(),this.generatePropertyKey(la.key,la.computed),this.generateFunctionBody(la.value)]:la.shorthand?"AssignmentPattern"===la.value.type?this.AssignmentPattern(la.value,Rb.Sequence,7):this.generatePropertyKey(la.key,la.computed):la.method?
[W(la),this.generatePropertyKey(la.key,la.computed),this.generateFunctionBody(la.value)]:[this.generatePropertyKey(la.key,la.computed),":"+oa,this.generateExpression(la.value,Rb.Assignment,7)]},ObjectExpression:function(la,Da,Pa){var yb,ac,Od=this||Bn;if(!la.properties.length)return"{}";var Md=1<la.properties.length;v(function(){ac=Od.generateExpression(la.properties[0],Rb.Sequence,7)});if(!Md&&!/[\r\n]/g.test(g(ac).toString()))return["{",oa,ac,oa,"}"];v(function(Wc){var cf;yb=["{",fa,Wc,ac];if(Md){yb.push(","+
fa);var Se=1;for(cf=la.properties.length;Se<cf;++Se)yb.push(Wc),yb.push(Od.generateExpression(la.properties[Se],Rb.Sequence,7)),Se+1<cf&&yb.push(","+fa)}});f(g(yb).toString())||yb.push(fa);yb.push(Aa);yb.push("}");return yb},AssignmentPattern:function(la,Da,Pa){return this.generateAssignment(la.left,la.right,"=",Da,Pa)},ObjectPattern:function(la,Da,Pa){var yb=this||Bn;if(!la.properties.length)return"{}";var ac=!1;if(1===la.properties.length){var Od=la.properties[0];Od.type===Pc.Property&&Od.value.type!==
Pc.Identifier&&(ac=!0)}else for(Da=0,Pa=la.properties.length;Da<Pa;++Da)if(Od=la.properties[Da],Od.type===Pc.Property&&!Od.shorthand){ac=!0;break}var Md=["{",ac?fa:""];v(function(Wc){var cf;var Se=0;for(cf=la.properties.length;Se<cf;++Se)Md.push(ac?Wc:""),Md.push(yb.generateExpression(la.properties[Se],Rb.Sequence,7)),Se+1<cf&&Md.push(","+(ac?fa:oa))});ac&&!f(g(Md).toString())&&Md.push(fa);Md.push(ac?Aa:"");Md.push("}");return Md},ThisExpression:function(la,Da,Pa){return"this"},Super:function(la,
Da,Pa){return"super"},Identifier:function(la,Da,Pa){return M(la)},ImportDefaultSpecifier:function(la,Da,Pa){return M(la.id||la.local)},ImportNamespaceSpecifier:function(la,Da,Pa){Da=["*"];(la=la.id||la.local)&&Da.push(oa+"as"+l()+M(la));return Da},ImportSpecifier:function(la,Da,Pa){Da=la.imported;Pa=[Da.name];(la=la.local)&&la.name!==Da.name&&Pa.push(l()+"as"+l()+M(la));return Pa},ExportSpecifier:function(la,Da,Pa){Da=la.local;Pa=[Da.name];(la=la.exported)&&la.name!==Da.name&&Pa.push(l()+"as"+l()+
M(la));return Pa},Literal:function(la,Da,Pa){if(la.hasOwnProperty("raw")&&Ma&&ua.raw)try{var yb=Ma(la.raw).body[0].expression;if(yb.type===Pc.Literal&&yb.value===la.value)return la.raw}catch(Se){}if(la.regex)return"/"+la.regex.pattern+"/"+la.regex.flags;if(null===la.value)return"null";if("string"===typeof la.value){la=la.value;Da="";var ac=0,Od=0,Md;Pa=0;for(yb=la.length;Pa<yb;++Pa){var Wc=la.charCodeAt(Pa);if(39===Wc)++ac;else if(34===Wc)++Od;else if(47===Wc&&K)Da+="\\";else if(jc.code.isLineTerminator(Wc)||
92===Wc){Da+=m(Wc);continue}else if(!jc.code.isIdentifierPartES5(Wc)&&(K&&32>Wc||!K&&!pa&&(32>Wc||126<Wc))){Da+=e(Wc,la.charCodeAt(Pa+1));continue}Da+=String.fromCharCode(Wc)}var cf=(Md=!("double"===U||"auto"===U&&Od<ac))?"'":'"';if(Md?ac:Od){la=Da;Da=cf;Pa=0;for(yb=la.length;Pa<yb;++Pa){Wc=la.charCodeAt(Pa);if(39===Wc&&Md||34===Wc&&!Md)Da+="\\";Da+=String.fromCharCode(Wc)}la=Da+cf}else la=cf+Da+cf;return la}if("number"===typeof la.value){la=la.value;if(la!==la)throw Error("Numeric literal whose value is NaN");
if(0>la||0===la&&0>1/la)throw Error("Numeric literal whose value is negative");if(la===1/0)la=K?"null":aa?"1e400":"1e+400";else{Da=""+la;if(aa&&!(3>Da.length)){Pa=Da.indexOf(".");K||48!==Da.charCodeAt(0)||1!==Pa||(Pa=0,Da=Da.slice(1));yb=Da;Da=Da.replace("e+","e");Wc=0;0<(ac=yb.indexOf("e"))&&(Wc=+yb.slice(ac+1),yb=yb.slice(0,ac));0<=Pa&&(Wc-=yb.length-Pa-1,yb=+(yb.slice(0,Pa)+yb.slice(Pa+1))+"");for(ac=0;48===yb.charCodeAt(yb.length+ac-1);)--ac;0!==ac&&(Wc-=ac,yb=yb.slice(0,ac));0!==Wc&&(yb+="e"+
Wc);(yb.length<Da.length||T&&1E12<la&&Math.floor(la)===la&&(yb="0x"+la.toString(16)).length<Da.length)&&+yb===la&&(Da=yb)}la=Da}return la}if("boolean"===typeof la.value)return la.value?"true":"false";la=la.value;Da=la.toString();if(la.source)if(Pa=Da.match(/\/([^/]*)$/)){Pa=Pa[1];Da="";Md=Od=!1;yb=0;for(Wc=la.source.length;yb<Wc;++yb)ac=la.source.charCodeAt(yb),Md?(Da+=b(ac,Md),Md=!1):(Od?93===ac&&(Od=!1):47===ac?Da+="\\":91===ac&&(Od=!0),Da+=b(ac,Md),Md=92===ac);la="/"+Da+"/"+Pa}else la=Da;else la=
Da;return la},GeneratorExpression:function(la,Da,Pa){return this.ComprehensionExpression(la,Da,Pa)},ComprehensionExpression:function(la,Da,Pa){var yb,ac,Od=this||Bn;var Md=la.type===Pc.GeneratorExpression?["("]:["["];if(ua.moz.comprehensionExpressionStartsWithAssignment){var Wc=this.generateExpression(la.body,Rb.Assignment,7);Md.push(Wc)}la.blocks&&v(function(){yb=0;for(ac=la.blocks.length;yb<ac;++yb)Wc=Od.generateExpression(la.blocks[yb],Rb.Sequence,7),0<yb||ua.moz.comprehensionExpressionStartsWithAssignment?
Md=r(Md,Wc):Md.push(Wc)});la.filter&&(Md=r(Md,"if"+oa),Wc=this.generateExpression(la.filter,Rb.Sequence,7),Md=r(Md,["(",Wc,")"]));ua.moz.comprehensionExpressionStartsWithAssignment||(Wc=this.generateExpression(la.body,Rb.Assignment,7),Md=r(Md,Wc));Md.push(la.type===Pc.GeneratorExpression?")":"]");return Md},ComprehensionBlock:function(la,Da,Pa){Da=la.left.type===Pc.VariableDeclaration?[la.left.kind,l(),this.generateStatement(la.left.declarations[0],0)]:this.generateExpression(la.left,Rb.Call,7);Da=
r(Da,la.of?"of":"in");Da=r(Da,this.generateExpression(la.right,Rb.Sequence,7));return["for"+oa+"(",Da,")"]},SpreadElement:function(la,Da,Pa){return["...",this.generateExpression(la.argument,Rb.Assignment,7)]},TaggedTemplateExpression:function(la,Da,Pa){var yb=3;Pa&2||(yb=1);la=[this.generateExpression(la.tag,Rb.Call,yb),this.generateExpression(la.quasi,Rb.Primary,4)];return F(la,Rb.TaggedTemplate,Da)},TemplateElement:function(la,Da,Pa){return la.value.raw},TemplateLiteral:function(la,Da,Pa){var yb;
Da=["`"];Pa=0;for(yb=la.quasis.length;Pa<yb;++Pa)Da.push(this.generateExpression(la.quasis[Pa],Rb.Primary,7)),Pa+1<yb&&(Da.push("${"+oa),Da.push(this.generateExpression(la.expressions[Pa],Rb.Sequence,7)),Da.push(oa+"}"));Da.push("`");return Da},ModuleSpecifier:function(la,Da,Pa){return this.Literal(la,Da,Pa)},ImportExpression:function(la,Da,Pa){return F(["import(",this.generateExpression(la.source,Rb.Assignment,7),")"],Rb.Call,Da)}};k(I.prototype,I.Expression);I.prototype.generateExpression=function(la,
Da,Pa){var yb=la.type||Pc.Property;if(ua.verbatim&&la.hasOwnProperty(ua.verbatim))return yb=la[ua.verbatim],"string"===typeof yb?Pa=F(H(yb),Rb.Sequence,Da):(Pa=H(yb.content),yb=null!=yb.precedence?yb.precedence:Rb.Sequence,Pa=F(Pa,yb,Da)),g(Pa,la);Da=this[yb](la,Da,Pa);ua.comment&&(Da=A(la,Da));return g(Da,la)};I.prototype.generateStatement=function(la,Da){Da=this[la.type](la,Da);ua.comment&&(Da=A(la,Da));var Pa=g(Da).toString();la.type!==Pc.Program||va||""!==fa||"\n"!==Pa.charAt(Pa.length-1)||(Da=
Lb?g(Da).replaceRight(/\s+$/,""):Pa.replace(/\s+$/,""));return g(Da,la)};var ld=c().format;kp.version="2.0.0";kp.generate=function(la,Da){var Pa=c();null!=Da?("string"===typeof Da.indent&&(Pa.format.indent.style=Da.indent),"number"===typeof Da.base&&(Pa.format.indent.base=Da.base),Da=n(Pa,Da),Ka=Da.format.indent.style,Aa="string"===typeof Da.base?Da.base:h(Ka,Da.format.indent.base)):(Da=Pa,Ka=Da.format.indent.style,Aa=h(Ka,Da.format.indent.base));K=Da.format.json;aa=Da.format.renumber;T=K?!1:Da.format.hexadecimal;
U=K?"double":Da.format.quotes;pa=Da.format.escapeless;fa=Da.format.newline;oa=Da.format.space;Da.format.compact&&(fa=oa=Ka=Aa="");hb=Da.format.parentheses;Cb=Da.format.semicolons;va=Da.format.safeConcatenation;ma=Da.directive;Ma=K?null:Da.parse;Lb=Da.sourceMap;ic=Da.sourceCode;Vb=Da.format.preserveBlankLines&&null!==ic;ua=Da;Lb&&(ea=kp.browser?Bn.sourceMap.SourceNode:zo);Pa=new I;if(I.Statement.hasOwnProperty(la.type))la=Pa.generateStatement(la,1);else if(I.Expression.hasOwnProperty(la.type))la=Pa.generateExpression(la,
Rb.Sequence,7);else throw Error("Unknown node type: "+la.type);if(!Lb)return la={code:la.toString(),map:null},Da.sourceMapWithCode?la:la.code;la=la.toStringWithSourceMap({file:Da.file,sourceRoot:Da.sourceMapRoot});Da.sourceContent&&la.map.setSourceContent(Da.sourceMap,Da.sourceContent);return Da.sourceMapWithCode?la:la.map.toString()};kp.attachComments=iT.attachComments;kp.Precedence=n({},Rb);kp.browser=!1;kp.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,
compact:!0,parentheses:!1,semicolons:!1};kp.FORMAT_DEFAULTS=ld})();var qha=Object.freeze({__proto__:null,"default":kp,FORMAT_DEFAULTS:kp.FORMAT_DEFAULTS,FORMAT_MINIFY:kp.FORMAT_MINIFY,Precedence:kp.Precedence,attachComments:kp.attachComments,browser:kp.browser,generate:kp.generate,version:kp.version}),Wq=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");Wq.stringify=tm;Wq.obj=Ag;Wq.escodegen=qha;Wq.es=Wq.escodegen.escodegen||Wq.escodegen;var FD=Wq.es;Wq.escodegen=FD;Wq.es=FD;Wq.default=
tm;var mT={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},rha={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},sha=/^in(stanceof)?$/,nT="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
b5="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
Raa=new RegExp("["+nT+"]"),Saa=new RegExp("["+nT+b5+"]");nT=b5=null;var EX=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Taa=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],Rj=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},Gs={beforeExpr:!0},vr={startsExpr:!0},KI={},Wa={num:new Rj("num",vr),regexp:new Rj("regexp",vr),string:new Rj("string",vr),name:new Rj("name",vr),eof:new Rj("eof"),bracketL:new Rj("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new Rj("]"),braceL:new Rj("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Rj("}"),parenL:new Rj("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Rj(")"),comma:new Rj(",",Gs),semi:new Rj(";",Gs),colon:new Rj(":",Gs),dot:new Rj("."),question:new Rj("?",Gs),questionDot:new Rj("?."),arrow:new Rj("=>",Gs),template:new Rj("template"),invalidTemplate:new Rj("invalidTemplate"),ellipsis:new Rj("...",Gs),backQuote:new Rj("`",vr),dollarBraceL:new Rj("${",{beforeExpr:!0,startsExpr:!0}),eq:new Rj("=",{beforeExpr:!0,
isAssign:!0}),assign:new Rj("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Rj("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Rj("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:yp("||",1),logicalAND:yp("&&",2),bitwiseOR:yp("|",3),bitwiseXOR:yp("^",4),bitwiseAND:yp("&",5),equality:yp("==/!=/===/!==",6),relational:yp("</>/<=/>=",7),bitShift:yp("<</>>/>>>",8),plusMin:new Rj("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:yp("%",10),star:yp("*",10),slash:yp("/",10),starstar:new Rj("**",
{beforeExpr:!0}),coalesce:yp("??",1),_break:vi("break"),_case:vi("case",Gs),_catch:vi("catch"),_continue:vi("continue"),_debugger:vi("debugger"),_default:vi("default",Gs),_do:vi("do",{isLoop:!0,beforeExpr:!0}),_else:vi("else",Gs),_finally:vi("finally"),_for:vi("for",{isLoop:!0}),_function:vi("function",vr),_if:vi("if"),_return:vi("return",Gs),_switch:vi("switch"),_throw:vi("throw",Gs),_try:vi("try"),_var:vi("var"),_const:vi("const"),_while:vi("while",{isLoop:!0}),_with:vi("with"),_new:vi("new",{beforeExpr:!0,
startsExpr:!0}),_this:vi("this",vr),_super:vi("super",vr),_class:vi("class",vr),_extends:vi("extends",Gs),_export:vi("export"),_import:vi("import",vr),_null:vi("null",vr),_true:vi("true",vr),_false:vi("false",vr),_in:vi("in",{beforeExpr:!0,binop:7}),_instanceof:vi("instanceof",{beforeExpr:!0,binop:7}),_typeof:vi("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:vi("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:vi("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Eq=/\r\n?|\n|\u2028|\u2029/,
wx=new RegExp(Eq.source,"g"),oT=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Hs=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,c5=Object.prototype,LI=c5.hasOwnProperty,tha=c5.toString,GX=Array.isArray||function(c){return"[object Array]"===tha.call(c)},dC=function(c,h){this.line=c;this.column=h};dC.prototype.offset=function(c){return new dC(this.line,this.column+c)};var Bz=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},ZE={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},FX=!1,Wl=function(c,h,f){this.options=c=bw(c);this.sourceFile=c.sourceFile;this.keywords=Qi(rha[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var k="";!0!==c.allowReserved&&(k=mT[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(k+=" await"));this.reservedWords=Qi(k);k=(k?k+" ":"")+mT.strict;this.reservedWordsStrict=Qi(k);this.reservedWordsStrictBind=Qi(k+" "+mT.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Eq).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Wa.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},yy={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Wl.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};yy.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};yy.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};yy.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};yy.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};yy.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};yy.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};yy.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};Wl.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};Wl.parse=function(c,h){return(new this(h,
c)).parse()};Wl.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};Wl.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(Wl.prototype,yy);var Np=Wl.prototype,uha=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Np.strictDirective=function(c){for(;;){Hs.lastIndex=c;c+=Hs.exec(this.input)[0].length;var h=uha.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){Hs.lastIndex=c+h[0].length;c=Hs.exec(this.input);h=c.index+
c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Eq.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;Hs.lastIndex=c;c+=Hs.exec(this.input)[0].length;";"===this.input[c]&&c++}};Np.eat=function(c){return this.type===c?(this.next(),!0):!1};Np.isContextual=function(c){return this.type===Wa.name&&this.value===c&&!this.containsEsc};Np.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Np.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Np.canInsertSemicolon=function(){return this.type===Wa.eof||this.type===Wa.braceR||Eq.test(this.input.slice(this.lastTokEnd,this.start))};Np.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Np.semicolon=function(){this.eat(Wa.semi)||this.insertSemicolon()||this.unexpected()};Np.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};Np.expect=function(c){this.eat(c)||this.unexpected()};Np.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Np.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Np.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Np.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Np.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Ei=Wl.prototype;Ei.parseTopLevel=function(c){var h={};c.body||(c.body=[]);for(;this.type!==Wa.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=Object.keys(this.undefinedExports);h<f.length;h+=1){var k=f[h];this.raiseRecoverable(this.undefinedExports[k].start,"Export '"+k+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var pT={kind:"loop"},vha={kind:"switch"};Ei.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;Hs.lastIndex=this.pos;var h=Hs.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);if(91===f)return!0;if(c)return!1;if(123===f)return!0;if(kn(f,!0)){for(c=h+1;zu(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!sha.test(c))return!0}return!1};Ei.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
Hs.lastIndex=this.pos;var c=Hs.exec(this.input);c=this.pos+c[0].length;return!Eq.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!zu(this.input.charAt(c+8)))};Ei.parseStatement=function(c,h,f){var k=this.type,n=this.startNode();if(this.isLet(c)){k=Wa._var;var b="let"}switch(k){case Wa._break:case Wa._continue:return this.parseBreakContinueStatement(n,k.keyword);case Wa._debugger:return this.parseDebuggerStatement(n);case Wa._do:return this.parseDoStatement(n);
case Wa._for:return this.parseForStatement(n);case Wa._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Wa._class:return c&&this.unexpected(),this.parseClass(n,!0);case Wa._if:return this.parseIfStatement(n);case Wa._return:return this.parseReturnStatement(n);case Wa._switch:return this.parseSwitchStatement(n);case Wa._throw:return this.parseThrowStatement(n);case Wa._try:return this.parseTryStatement(n);
case Wa._const:case Wa._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Wa._while:return this.parseWhileStatement(n);case Wa._with:return this.parseWithStatement(n);case Wa.braceL:return this.parseBlock(!0,n);case Wa.semi:return this.parseEmptyStatement(n);case Wa._export:case Wa._import:if(10<this.options.ecmaVersion&&k===Wa._import&&(Hs.lastIndex=this.pos,c=Hs.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return k===Wa._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return k===Wa.name&&"Identifier"===
f.type&&this.eat(Wa.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};Ei.parseBreakContinueStatement=function(c,h){var f="break"===h;this.next();this.eat(Wa.semi)||this.insertSemicolon()?c.label=null:this.type!==Wa.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var k=0;k<this.labels.length;++k){var n=this.labels[k];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}k===this.labels.length&&
this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};Ei.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};Ei.parseDoStatement=function(c){this.next();this.labels.push(pT);c.body=this.parseStatement("do");this.labels.pop();this.expect(Wa._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Wa.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Ei.parseForStatement=
function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(pT);this.enterScope(0);this.expect(Wa.parenL);if(this.type===Wa.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===Wa._var||this.type===Wa._const||f){var k=this.startNode();f=f?"let":this.value;this.next();this.parseVar(k,!0,f);this.finishNode(k,"VariableDeclaration");
if((this.type===Wa._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===k.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Wa._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,k);-1<h&&this.unexpected(h);return this.parseFor(c,k)}k=new xx;f=this.parseExpression(!0,k);if(this.type===Wa._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Wa._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,
!1,k),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(k,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};Ei.parseFunctionStatement=function(c,h,f){this.next();return this.parseFunction(c,CG|(f?0:qT),!1,h)};Ei.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Wa._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Ei.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Wa.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};Ei.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Wa.braceL);this.labels.push(vha);this.enterScope(0);for(var h,f=!1;this.type!==Wa.braceR;)if(this.type===Wa._case||this.type===
Wa._default){var k=this.type===Wa._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();k?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),f=!0,h.test=null);this.expect(Wa.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Ei.parseThrowStatement=
function(c){this.next();Eq.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var wha=[];Ei.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Wa._catch){var h=this.startNode();this.next();if(this.eat(Wa.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:
0);this.checkLValPattern(h.param,f?4:2);this.expect(Wa.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(Wa._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Ei.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};Ei.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(pT);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};Ei.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Ei.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};Ei.parseLabeledStatement=function(c,h,f,k){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===Wa._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var e=this.labels[b];if(e.statementStart===c.start)e.statementStart=this.start,e.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(k?-1===k.indexOf("label")?k+"label":k:"label");
this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};Ei.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};Ei.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Wa.braceL);for(c&&this.enterScope(0);this.type!==Wa.braceR;){var k=this.parseStatement(null);h.body.push(k)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};
Ei.parseFor=function(c,h){c.init=h;this.expect(Wa.semi);c.test=this.type===Wa.semi?null:this.parseExpression();this.expect(Wa.semi);c.update=this.type===Wa.parenR?null:this.parseExpression();this.expect(Wa.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Ei.parseForIn=function(c,h){var f=this.type===Wa._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==
h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();this.expect(Wa.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};Ei.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var k=this.startNode();this.parseVarId(k,f);this.eat(Wa.eq)?k.init=this.parseMaybeAssign(h):
"const"!==f||this.type===Wa._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===k.id.type||h&&(this.type===Wa._in||this.isContextual("of"))?k.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(k,"VariableDeclarator"));if(!this.eat(Wa.comma))break}return c};Ei.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var CG=1,qT=2;Ei.parseFunction=
function(c,h,f,k){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!k)this.type===Wa.star&&h&qT&&this.unexpected(),c.generator=this.eat(Wa.star);8<=this.options.ecmaVersion&&(c.async=!!k);h&CG&&(c.id=h&4&&this.type!==Wa.name?null:this.parseIdent(),!c.id||h&qT||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));k=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));h&CG||(c.id=this.type===Wa.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,h&CG?"FunctionDeclaration":"FunctionExpression")};Ei.parseFunctionParams=function(c){this.expect(Wa.parenL);c.params=this.parseBindingList(Wa.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Ei.parseClass=function(c,h){this.next();var f=this.strict;
this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var k=this.startNode(),n=!1;k.body=[];for(this.expect(Wa.braceL);this.type!==Wa.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(k.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=f;this.next();c.body=this.finishNode(k,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};Ei.parseClassElement=function(c){var h=
this;if(this.eat(Wa.semi))return null;var f=this.startNode(),k=function(m,a){void 0===a&&(a=!1);var g=h.start,l=h.startLoc;if(!h.eatContextual(m))return!1;if(!(h.type===Wa.parenL||a&&h.canInsertSemicolon()))return!0;f.key&&h.unexpected();f.computed=!1;f.key=h.startNodeAt(g,l);f.key.name=m;h.finishNode(f.key,"Identifier");return!1};f.kind="method";f.static=k("static");var n=this.eat(Wa.star),b=!1;n||(8<=this.options.ecmaVersion&&k("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Wa.star)):
k("get")?f.kind="get":k("set")&&(f.kind="set"));f.key||this.parsePropertyName(f);k=f.key;var e=!1;f.computed||f.static||!("Identifier"===k.type&&"constructor"===k.name||"Literal"===k.type&&"constructor"===k.value)?f.static&&"Identifier"===k.type&&"prototype"===k.name&&this.raise(k.start,"Classes may not have a static property named prototype"):("method"!==f.kind&&this.raise(k.start,"Constructor can't have get/set modifier"),n&&this.raise(k.start,"Constructor can't be a generator"),b&&this.raise(k.start,
"Constructor can't be an async method"),f.kind="constructor",e=c);this.parseClassMethod(f,n,b,e);"get"===f.kind&&0!==f.value.params.length&&this.raiseRecoverable(f.value.start,"getter should have no params");"set"===f.kind&&1!==f.value.params.length&&this.raiseRecoverable(f.value.start,"setter should have exactly one param");"set"===f.kind&&"RestElement"===f.value.params[0].type&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params");return f};Ei.parseClassMethod=function(c,
h,f,k){c.value=this.parseMethod(h,f,k);return this.finishNode(c,"MethodDefinition")};Ei.parseClassId=function(c,h){this.type===Wa.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};Ei.parseClassSuper=function(c){c.superClass=this.eat(Wa._extends)?this.parseExprSubscripts():null};Ei.parseExport=function(c,h){this.next();if(this.eat(Wa.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Wa.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Wa._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===Wa._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,CG|4,!1,f)):this.type===Wa._class?(f=this.startNode(),c.declaration=this.parseClass(f,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==
Wa.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var k=h[f];this.checkUnreserved(k.local);this.checkLocalExport(k.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Ei.checkExport=function(c,h,f){c&&(LI.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};Ei.checkPatternExport=function(c,h){var f=h.type;if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=
0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var k=h[f];k&&this.checkPatternExport(c,k)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};Ei.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,
h[f].id)};Ei.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Ei.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(Wa.braceL);!this.eat(Wa.braceR);){if(f)f=!1;else if(this.expect(Wa.comma),this.afterTrailingComma(Wa.braceR))break;var k=this.startNode();k.local=this.parseIdent(!0);k.exported=this.eatContextual("as")?this.parseIdent(!0):
k.local;this.checkExport(c,k.exported.name,k.exported.start);h.push(this.finishNode(k,"ExportSpecifier"))}return h};Ei.parseImport=function(c){this.next();this.type===Wa.string?(c.specifiers=wha,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Wa.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};Ei.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===Wa.name){var f=
this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(Wa.comma))return c}if(this.type===Wa.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Wa.braceL);!this.eat(Wa.braceR);){if(h)h=!1;else if(this.expect(Wa.comma),this.afterTrailingComma(Wa.braceR))break;f=this.startNode();
f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};Ei.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};Ei.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var Jt=Wl.prototype;Jt.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";f&&this.checkPatternErrors(f,!0);f=0;for(var k=c.properties;f<k.length;f+=
1){var n=k[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};Jt.toAssignableList=function(c,h){for(var f=c.length,k=0;k<f;k++){var n=c[k];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};Jt.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};Jt.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Wa.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};Jt.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Wa.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Wa.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Wa.braceL:return this.parseObj(!0)}return this.parseIdent()};
Jt.parseBindingList=function(c,h,f){for(var k=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Wa.comma),h&&this.type===Wa.comma)k.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===Wa.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);k.push(h);this.type===Wa.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);k.push(b)}return k};
Jt.parseBindingListItem=function(c){return c};Jt.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Wa.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};Jt.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var k=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(k?"Binding ":"Assigning to ")+c.name+
" in strict mode");k&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(LI.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":k&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return k&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(k?"Binding":"Assigning to")+" rvalue")}};Jt.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var k=0;for(c=c.properties;k<c.length;k+=1)this.checkLValInnerPattern(c[k],h,f);break;case "ArrayPattern":k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&this.checkLValInnerPattern(n,h,f)}break;default:this.checkLValSimple(c,h,f)}};Jt.checkLValInnerPattern=
function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var Yi=Wl.prototype;Yi.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var k=c.key;switch(k.type){case "Identifier":var n=
k.name;break;case "Literal":n=String(k.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=k.start):this.raiseRecoverable(k.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(k.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},f[c]=!0)}};Yi.parseExpression=function(c,h){var f=this.start,k=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===Wa.comma){f=this.startNodeAt(f,k);for(f.expressions=[n];this.eat(Wa.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};Yi.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var k=!1,n=-1,b=-1;h?(n=h.parenthesizedAssign,b=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new xx,k=!0);var e=this.start,m=this.startLoc;
if(this.type===Wa.parenL||this.type===Wa.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,h);f&&(a=f.call(this,a,e,m));if(this.type.isAssign)return f=this.startNodeAt(e,m),f.operator=this.value,this.type===Wa.eq&&(a=this.toAssignable(a,!1,h)),k||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=a.start&&(h.shorthandAssign=-1),this.type===Wa.eq?this.checkLValPattern(a):this.checkLValSimple(a),f.left=a,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,
"AssignmentExpression");k&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<b&&(h.trailingComma=b);return a};Yi.parseMaybeConditional=function(c,h){var f=this.start,k=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Wa.question)?(h=this.startNodeAt(f,k),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Wa.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};Yi.parseExprOps=function(c,h){var f=this.start,
k=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,k,-1,c)};Yi.parseExprOp=function(c,h,f,k,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Wa._in)&&b>k){var e=this.type===Wa.logicalOR||this.type===Wa.logicalAND,m=this.type===Wa.coalesce;m&&(b=Wa.logicalAND.binop);var a=this.value;this.next();var g=this.start,l=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),g,l,b,n);c=this.buildBinary(h,
f,c,b,a,e||m);(e&&this.type===Wa.coalesce||m&&(this.type===Wa.logicalOR||this.type===Wa.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,k,n)}return c};Yi.buildBinary=function(c,h,f,k,n,b){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=k;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};Yi.parseMaybeUnary=function(c,h){var f=this.start,k=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Wa.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(f,k),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(Wa.starstar)?this.buildBinary(f,k,n,this.parseMaybeUnary(null,!1),"**",!1):n};Yi.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,k=this.parseExprAtom(c);if("ArrowFunctionExpression"===
k.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return k;h=this.parseSubscripts(k,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1));return h};Yi.parseSubscripts=function(c,h,f,k){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var e=this.parseSubscript(c,
h,f,k,n,b);e.optional&&(b=!0);if(e===c||"ArrowFunctionExpression"===e.type)return b&&(c=this.startNodeAt(h,f),c.expression=e,e=this.finishNode(c,"ChainExpression")),e;c=e}};Yi.parseSubscript=function(c,h,f,k,n,b){var e=11<=this.options.ecmaVersion,m=e&&this.eat(Wa.questionDot);k&&m&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Wa.bracketL);if(a||m&&this.type!==Wa.parenL&&this.type!==Wa.backQuote||this.eat(Wa.dot))h=this.startNodeAt(h,
f),h.object=c,h.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!a,a&&this.expect(Wa.bracketR),e&&(h.optional=m),c=this.finishNode(h,"MemberExpression");else if(!k&&this.eat(Wa.parenL)){k=new xx;b=this.yieldPos;var g=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Wa.parenR,8<=this.options.ecmaVersion,!1,k);if(n&&!m&&!this.canInsertSemicolon()&&this.eat(Wa.arrow))return this.checkPatternErrors(k,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=g,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),a,!0);this.checkExpressionErrors(k,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=g||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=a;e&&(h.optional=m);c=this.finishNode(h,"CallExpression")}else this.type===
Wa.backQuote&&((m||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),e=this.startNodeAt(h,f),e.tag=c,e.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(e,"TaggedTemplateExpression"));return c};Yi.parseExprAtom=function(c){this.type===Wa.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Wa._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==Wa.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Wa.dot&&this.type!==Wa.bracketL&&this.type!==Wa.parenL&&this.unexpected(),this.finishNode(h,"Super");case Wa._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Wa.name:c=this.start;var f=this.startLoc,k=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!k&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Wa._function))return this.parseFunction(this.startNodeAt(c,
f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Wa.arrow))return this.parseArrowExpression(this.startNodeAt(c,f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Wa.name&&!k)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Wa.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case Wa.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Wa.num:case Wa.string:return this.parseLiteral(this.value);
case Wa._null:case Wa._true:case Wa._false:return h=this.startNode(),h.value=this.type===Wa._null?null:this.type===Wa._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Wa.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case Wa.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Wa.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case Wa.braceL:return this.parseObj(!1,c);case Wa._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Wa._class:return this.parseClass(this.startNode(),!1);case Wa._new:return this.parseNew();case Wa.backQuote:return this.parseTemplate();case Wa._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Yi.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case Wa.parenL:return this.parseDynamicImport(c);case Wa.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};Yi.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Wa.parenR)){var h=this.start;this.eat(Wa.comma)&&this.eat(Wa.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};Yi.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};Yi.parseLiteral=function(c){var h=
this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};Yi.parseParenExpression=function(){this.expect(Wa.parenL);var c=this.parseExpression();this.expect(Wa.parenR);return c};Yi.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,k=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,e=[],m=!0,a=!1,g=new xx,l=this.yieldPos,r=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Wa.parenR;)if(m?m=!1:this.expect(Wa.comma),k&&this.afterTrailingComma(Wa.parenR,!0)){a=!0;break}else if(this.type===Wa.ellipsis){var v=this.start;e.push(this.parseParenItem(this.parseRestBinding()));this.type===Wa.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else e.push(this.parseMaybeAssign(!1,g,this.parseParenItem));k=this.start;m=this.startLoc;
this.expect(Wa.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Wa.arrow))return this.checkPatternErrors(g,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=r,this.parseParenArrowList(h,f,e);e.length&&!a||this.unexpected(this.lastTokStart);v&&this.unexpected(v);this.checkExpressionErrors(g,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=r||this.awaitPos;1<e.length?(c=this.startNodeAt(n,b),c.expressions=e,this.finishNodeAt(c,"SequenceExpression",k,m)):c=e[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(h=this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};Yi.parseParenItem=function(c){return c};Yi.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var xha=[];Yi.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Wa.dot))return c.meta=h,h=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,k=this.type===Wa._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);k&&"ImportExpression"===
c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(Wa.parenL)?c.arguments=this.parseExprList(Wa.parenR,8<=this.options.ecmaVersion,!1):c.arguments=xha;return this.finishNode(c,"NewExpression")};Yi.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Wa.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();h.tail=this.type===Wa.backQuote;return this.finishNode(h,"TemplateElement")};Yi.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===Wa.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Wa.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Wa.braceR),h.quasis.push(f=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};Yi.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Wa.name||this.type===Wa.num||this.type===Wa.string||this.type===Wa.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Wa.star)&&!Eq.test(this.input.slice(this.lastTokEnd,this.start))};Yi.parseObj=function(c,h){var f=this.startNode(),k=!0,n={};f.properties=[];for(this.next();!this.eat(Wa.braceR);){if(k)k=
!1;else if(this.expect(Wa.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Wa.braceR))break;var b=this.parseProperty(c,h);c||this.checkPropClash(b,n,h);f.properties.push(b)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};Yi.parseProperty=function(c,h){var f=this.startNode(),k;if(9<=this.options.ecmaVersion&&this.eat(Wa.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===Wa.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,
"RestElement");this.type===Wa.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===Wa.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var b=this.startLoc}c||(k=this.eat(Wa.star))}var e=this.containsEsc;this.parsePropertyName(f);if(!c&&!e&&
8<=this.options.ecmaVersion&&!k&&this.isAsyncProp(f)){var m=!0;k=9<=this.options.ecmaVersion&&this.eat(Wa.star);this.parsePropertyName(f,h)}else m=!1;this.parsePropertyValue(f,c,k,m,n,b,h,e);return this.finishNode(f,"Property")};Yi.parsePropertyValue=function(c,h,f,k,n,b,e,m){(f||k)&&this.type===Wa.colon&&this.unexpected();this.eat(Wa.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,e),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Wa.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(f,k)):h||m||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Wa.comma||this.type===Wa.braceR||this.type===Wa.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||k)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===Wa.eq&&e?(0>e.shorthandAssign&&(e.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||k)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};Yi.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Wa.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Wa.bracketR),c.key;c.computed=!1}return c.key=this.type===Wa.num||this.type===Wa.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Yi.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Yi.parseMethod=function(c,h,f){var k=this.startNode(),n=this.yieldPos,b=this.awaitPos,e=this.awaitIdentPos;this.initFunction(k);6<=this.options.ecmaVersion&&(k.generator=c);8<=this.options.ecmaVersion&&(k.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(k.generator?8:0)|64|(f?128:0));this.expect(Wa.parenL);k.params=this.parseBindingList(Wa.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(k,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=e;return this.finishNode(k,"FunctionExpression")};Yi.parseArrowExpression=function(c,h,f){var k=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};Yi.parseFunctionBody=function(c,h,f){var k=this.strict,n=!1;if(h&&this.type!==Wa.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!k||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!k&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!k);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};Yi.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};Yi.checkParams=function(c,h){var f={},k=0;for(c=c.params;k<c.length;k+=1)this.checkLValInnerPattern(c[k],1,h?null:f)};Yi.parseExprList=function(c,h,f,k){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Wa.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===Wa.comma)var e=null;else this.type===Wa.ellipsis?(e=this.parseSpread(k),k&&this.type===Wa.comma&&0>k.trailingComma&&(k.trailingComma=this.start)):e=this.parseMaybeAssign(!1,k);n.push(e)}return n};Yi.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};Yi.parseIdent=function(c,h){h=this.startNode();this.type===Wa.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};Yi.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Wa.semi||this.canInsertSemicolon()||this.type!==Wa.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(Wa.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};Yi.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var zL=Wl.prototype;zL.raise=function(c,h){var f=Cj(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};zL.raiseRecoverable=
zL.raise;zL.curPosition=function(){if(this.options.locations)return new dC(this.curLine,this.pos-this.lineStart)};var zy=Wl.prototype,yha=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};zy.enterScope=function(c){this.scopeStack.push(new yha(c))};zy.exitScope=function(){this.scopeStack.pop()};zy.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};zy.declareName=function(c,h,f){var k=!1;if(2===h)h=this.currentScope(),k=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),k=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){k=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}k&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};zy.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};zy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};zy.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};zy.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var Ay=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new Bz(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},DG=Wl.prototype;DG.startNode=function(){return new Ay(this,this.start,this.startLoc)};DG.startNodeAt=function(c,h){return new Ay(this,
c,h)};DG.finishNode=function(c,h){return wd.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};DG.finishNodeAt=function(c,h,f,k){return wd.call(this,c,h,f,k)};DG.copyNode=function(c){var h=new Ay(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var Is=function(c,h,f,k,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=k;this.generator=!!n},Xl={b_stat:new Is("{",!1),b_expr:new Is("{",!0),b_tmpl:new Is("${",!1),p_stat:new Is("(",!1),p_expr:new Is("(",!0),q_tmpl:new Is("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new Is("function",!1),f_expr:new Is("function",!0),f_expr_gen:new Is("function",!0,!1,null,!0),f_gen:new Is("function",!1,!1,null,!0)},AL=Wl.prototype;AL.initialContext=function(){return[Xl.b_stat]};AL.braceIsBlock=function(c){var h=this.curContext();return h===Xl.f_expr||h===Xl.f_stat?!0:c!==Wa.colon||h!==Xl.b_stat&&h!==Xl.b_expr?c===Wa._return||c===Wa.name&&this.exprAllowed?Eq.test(this.input.slice(this.lastTokEnd,this.start)):c===Wa._else||
c===Wa.semi||c===Wa.eof||c===Wa.parenR||c===Wa.arrow?!0:c===Wa.braceL?h===Xl.b_stat:c===Wa._var||c===Wa._const||c===Wa.name?!1:!this.exprAllowed:!h.isExpr};AL.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};AL.updateContext=function(c){var h,f=this.type;f.keyword&&c===Wa.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};Wa.parenR.updateContext=Wa.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===Xl.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Wa.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?Xl.b_stat:Xl.b_expr);this.exprAllowed=!0};Wa.dollarBraceL.updateContext=function(){this.context.push(Xl.b_tmpl);this.exprAllowed=!0};Wa.parenL.updateContext=function(c){this.context.push(c===Wa._if||c===Wa._for||c===Wa._with||c===Wa._while?
Xl.p_stat:Xl.p_expr);this.exprAllowed=!0};Wa.incDec.updateContext=function(){};Wa._function.updateContext=Wa._class.updateContext=function(c){!c.beforeExpr||c===Wa._else||c===Wa.semi&&this.curContext()!==Xl.p_stat||c===Wa._return&&Eq.test(this.input.slice(this.lastTokEnd,this.start))||(c===Wa.colon||c===Wa.braceL)&&this.curContext()===Xl.b_stat?this.context.push(Xl.f_stat):this.context.push(Xl.f_expr);this.exprAllowed=!1};Wa.backQuote.updateContext=function(){this.curContext()===Xl.q_tmpl?this.context.pop():
this.context.push(Xl.q_tmpl);this.exprAllowed=!1};Wa.star.updateContext=function(c){c===Wa._function&&(c=this.context.length-1,this.context[c]=this.context[c]===Xl.f_expr?Xl.f_expr_gen:Xl.f_gen);this.exprAllowed=!0};Wa.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Wa.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var Uaa={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
Vaa={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
HX={};Ln(9);Ln(10);Ln(11);Ln(12);var eh=Wl.prototype,Pw=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=HX[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
Pw.prototype.reset=function(c,h,f){var k=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=k&&6<=this.parser.options.ecmaVersion;this.switchN=k&&9<=this.parser.options.ecmaVersion};Pw.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Pw.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,k=f.length;if(c>=k)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=k)return n;
c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Pw.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,k=f.length;if(c>=k)return k;var n=f.charCodeAt(c),b;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=k||56320>(b=f.charCodeAt(c+1))||57343<b?c+1:c+2};Pw.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Pw.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};Pw.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Pw.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};eh.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,k=0;k<f.length;k++){var n=f.charAt(k);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,k+1)&&this.raise(c.start,"Duplicate regular expression flag")}};eh.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};eh.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,f=c.backReferenceNames;h<
f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};eh.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};eh.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};eh.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};eh.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!f,!0}c.pos=h;return!1};eh.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};eh.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};eh.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var k=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(k=c.lastIntValue);if(c.eat(125))return-1!==k&&k<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};eh.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};eh.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};eh.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};eh.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};eh.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};eh.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};eh.regexp_eatSyntaxCharacter=function(c){var h=c.current();return yx(h)?(c.lastIntValue=h,c.advance(),!0):!1};eh.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!yx(f);)c.advance();return c.pos!==h};eh.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};eh.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};eh.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};eh.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=Xq(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=Xq(c.lastIntValue);return!0}return!1};eh.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,k=c.current(f);c.advance(f);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(k=c.lastIntValue);
f=k;if(kn(f,!0)||36===f||95===f)return c.lastIntValue=k,!0;c.pos=h;return!1};eh.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,k=c.current(f);c.advance(f);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(k=c.lastIntValue);f=k;if(zu(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=k,!0;c.pos=h;return!1};eh.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};eh.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};eh.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};eh.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};eh.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};eh.regexp_eatZero=
function(c){return 48!==c.current()||hq(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};eh.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};eh.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};eh.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var k=c.lastIntValue;if(56320<=k&&57343>=k)return c.lastIntValue=1024*(f-55296)+(k-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(k=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))k=c.lastIntValue,k=0<=k&&1114111>=k;
if(k)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};eh.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};eh.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};eh.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};eh.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};eh.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){LI.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};eh.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
eh.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";Au(h=c.current());)c.lastStringValue+=Xq(h),c.advance();return""!==c.lastStringValue};eh.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";Cz(h=c.current());)c.lastStringValue+=Xq(h),c.advance();return""!==c.lastStringValue};eh.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};eh.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};eh.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};eh.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};eh.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};eh.regexp_eatClassControlLetter=function(c){var h=
c.current();return hq(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};eh.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};eh.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;hq(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};eh.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;jt(f=c.current());)c.lastIntValue=
16*c.lastIntValue+Dz(f),c.advance();return c.pos!==h};eh.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};eh.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};eh.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,k=c.lastIntValue=0;k<h;++k){var n=c.current();if(!jt(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+Dz(n);c.advance()}return!0};var EG=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new Bz(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},wj=Wl.prototype;wj.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new EG(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};wj.getToken=function(){this.next();return new EG(this)};"undefined"!==typeof Symbol&&(wj[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Wa.eof,value:h}}}});wj.curContext=function(){return this.context[this.context.length-1]};wj.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Wa.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};wj.readToken=function(c){return kn(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};wj.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};wj.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){wx.lastIndex=h;for(var k;(k=wx.exec(this.input))&&k.index<this.pos;)++this.curLine,this.lineStart=k.index+k[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,f),h,this.pos,c,this.curPosition())};
wj.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),k=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Vr(k);)k=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};wj.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&oT.test(String.fromCharCode(c)))++this.pos;else break a}}};wj.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var f=this.type;this.type=c;this.value=
h;this.updateContext(f)};wj.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Wa.ellipsis);++this.pos;return this.finishToken(Wa.dot)};wj.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Wa.assign,2):this.finishOp(Wa.slash,1)};
wj.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,k=42===c?Wa.star:Wa.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,k=Wa.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Wa.assign,f+1):this.finishOp(k,f)};wj.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Wa.assign,3):this.finishOp(124===c?Wa.logicalOR:Wa.logicalAND,
2):61===h?this.finishOp(Wa.assign,2):this.finishOp(124===c?Wa.bitwiseOR:Wa.bitwiseAND,1)};wj.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Wa.assign,2):this.finishOp(Wa.bitwiseXOR,1)};wj.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Eq.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Wa.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(Wa.assign,2):this.finishOp(Wa.plusMin,1)};wj.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(Wa.assign,f+1):this.finishOp(Wa.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(f=2);return this.finishOp(Wa.relational,f)};wj.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Wa.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Wa.arrow)):this.finishOp(61===c?Wa.eq:Wa.prefix,1)};wj.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=this.input.charCodeAt(this.pos+
2);if(48>f||57<f)return this.finishOp(Wa.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Wa.assign,3):this.finishOp(Wa.coalesce,2)}return this.finishOp(Wa.question,1)};wj.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Wa.parenL);case 41:return++this.pos,this.finishToken(Wa.parenR);case 59:return++this.pos,this.finishToken(Wa.semi);case 44:return++this.pos,this.finishToken(Wa.comma);case 91:return++this.pos,
this.finishToken(Wa.bracketL);case 93:return++this.pos,this.finishToken(Wa.bracketR);case 123:return++this.pos,this.finishToken(Wa.braceL);case 125:return++this.pos,this.finishToken(Wa.braceR);case 58:return++this.pos,this.finishToken(Wa.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Wa.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Wa.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ez(c)+"'")};wj.finishOp=function(c,h){var f=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};wj.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var k=this.input.charAt(this.pos);Eq.test(k)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===k)h=
!0;else if("]"===k&&h)h=!1;else if("/"===k&&!h)break;c="\\"===k}++this.pos}c=this.input.slice(f,this.pos);++this.pos;k=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(k);k=this.regexpState||(this.regexpState=new Pw(this));k.reset(f,c,h);this.validateRegExpFlags(k);this.validateRegExpPattern(k);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(Wa.regexp,{pattern:c,flags:h,value:f})};wj.readInt=function(c,h,f){var k=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,e=0,m=0,a=null==h?Infinity:h;m<a;++m,++this.pos){var g=this.input.charCodeAt(this.pos);if(k&&95===g)f&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===e&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===m&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),e=g;else{var l=97<=g?g-97+10:65<=g?g-65+10:48<=g&&57>=g?g-48:Infinity;if(l>=c)break;e=g;
b=b*c+l}}k&&95===e&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:b};wj.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=eC(this.input.slice(h,this.pos)),++this.pos):kn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Wa.num,f)};wj.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var k=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===k)return f=eC(this.input.slice(h,this.pos)),++this.pos,kn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Wa.num,f);f&&/[89]/.test(this.input.slice(h,
this.pos))&&(f=!1);46!==k||f||(++this.pos,this.readInt(10),k=this.input.charCodeAt(this.pos));69!==k&&101!==k||f||(k=this.input.charCodeAt(++this.pos),43!==k&&45!==k||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));kn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Wa.num,f)};wj.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};wj.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var k=this.input.charCodeAt(this.pos);if(k===c)break;92===k?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=
this.pos):(Vr(k,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);return this.finishToken(Wa.string,h)};var d5={};wj.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===d5)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};wj.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw d5;this.raise(c,h)};wj.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Wa.template||this.type===Wa.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(Wa.dollarBraceL);++this.pos;return this.finishToken(Wa.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Wa.template,c)}if(92===f)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(Vr(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};wj.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Wa.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};wj.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ez(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],k=parseInt(f,8);255<k&&(f=f.slice(0,-1),k=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(k)}return Vr(h)?"":String.fromCharCode(h)}};wj.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};wj.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,k=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(zu(n,
k))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?kn:zu)(n,k)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=Ez(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};wj.readWord=function(){var c=this.readWord1(),h=Wa.name;this.keywords.test(c)&&(h=KI[c]);return this.finishToken(h,
c)};Wl.acorn={Parser:Wl,version:"8.0.4",defaultOptions:ZE,Position:dC,SourceLocation:Bz,getLineInfo:Cj,Node:Ay,TokenType:Rj,tokTypes:Wa,keywordTypes:KI,TokContext:Is,tokContexts:Xl,isIdentifierChar:zu,isIdentifierStart:kn,Token:EG,isNewLine:Vr,lineBreak:Eq,lineBreakG:wx,nonASCIIwhitespace:oT};var tv=Object.freeze({__proto__:null,Node:Ay,Parser:Wl,Position:dC,SourceLocation:Bz,TokContext:Is,Token:EG,TokenType:Rj,defaultOptions:ZE,getLineInfo:Cj,isIdentifierChar:zu,isIdentifierStart:kn,isNewLine:Vr,
keywordTypes:KI,lineBreak:Eq,lineBreakG:wx,nonASCIIwhitespace:oT,parse:function(c,h){return Wl.parse(c,h)},parseExpressionAt:function(c,h,f){return Wl.parseExpressionAt(c,h,f)},tokContexts:Xl,tokTypes:Wa,tokenizer:function(c,h){return Wl.tokenizer(c,h)},version:"8.0.4"});Ba("bE",tv);var UA=function(c,h){this.node=c;this.state=h},Waa=Object.create||function(c){function h(){}h.prototype=c;return new h},Df={};Df.Program=Df.BlockStatement=function(c,h,f){var k=0;for(c=c.body;k<c.length;k+=1)f(c[k],h,
"Statement")};Df.Statement=Bu;Df.EmptyStatement=Wr;Df.ExpressionStatement=Df.ParenthesizedExpression=Df.ChainExpression=function(c,h,f){return f(c.expression,h,"Expression")};Df.IfStatement=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Statement");c.alternate&&f(c.alternate,h,"Statement")};Df.LabeledStatement=function(c,h,f){return f(c.body,h,"Statement")};Df.BreakStatement=Df.ContinueStatement=Wr;Df.WithStatement=function(c,h,f){f(c.object,h,"Expression");f(c.body,h,"Statement")};Df.SwitchStatement=
function(c,h,f){f(c.discriminant,h,"Expression");var k=0;for(c=c.cases;k<c.length;k+=1){var n=c[k];n.test&&f(n.test,h,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)f(n[b],h,"Statement")}};Df.SwitchCase=function(c,h,f){c.test&&f(c.test,h,"Expression");var k=0;for(c=c.consequent;k<c.length;k+=1)f(c[k],h,"Statement")};Df.ReturnStatement=Df.YieldExpression=Df.AwaitExpression=function(c,h,f){c.argument&&f(c.argument,h,"Expression")};Df.ThrowStatement=Df.SpreadElement=function(c,h,f){return f(c.argument,
h,"Expression")};Df.TryStatement=function(c,h,f){f(c.block,h,"Statement");c.handler&&f(c.handler,h);c.finalizer&&f(c.finalizer,h,"Statement")};Df.CatchClause=function(c,h,f){c.param&&f(c.param,h,"Pattern");f(c.body,h,"Statement")};Df.WhileStatement=Df.DoWhileStatement=function(c,h,f){f(c.test,h,"Expression");f(c.body,h,"Statement")};Df.ForStatement=function(c,h,f){c.init&&f(c.init,h,"ForInit");c.test&&f(c.test,h,"Expression");c.update&&f(c.update,h,"Expression");f(c.body,h,"Statement")};Df.ForInStatement=
Df.ForOfStatement=function(c,h,f){f(c.left,h,"ForInit");f(c.right,h,"Expression");f(c.body,h,"Statement")};Df.ForInit=function(c,h,f){"VariableDeclaration"===c.type?f(c,h):f(c,h,"Expression")};Df.DebuggerStatement=Wr;Df.FunctionDeclaration=function(c,h,f){return f(c,h,"Function")};Df.VariableDeclaration=function(c,h,f){var k=0;for(c=c.declarations;k<c.length;k+=1)f(c[k],h)};Df.VariableDeclarator=function(c,h,f){f(c.id,h,"Pattern");c.init&&f(c.init,h,"Expression")};Df.Function=function(c,h,f){c.id&&
f(c.id,h,"Pattern");for(var k=0,n=c.params;k<n.length;k+=1)f(n[k],h,"Pattern");f(c.body,h,c.expression?"Expression":"Statement")};Df.Pattern=function(c,h,f){"Identifier"===c.type?f(c,h,"VariablePattern"):"MemberExpression"===c.type?f(c,h,"MemberPattern"):f(c,h)};Df.VariablePattern=Wr;Df.MemberPattern=Bu;Df.RestElement=function(c,h,f){return f(c.argument,h,"Pattern")};Df.ArrayPattern=function(c,h,f){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&f(n,h,"Pattern")}};Df.ObjectPattern=function(c,
h,f){var k=0;for(c=c.properties;k<c.length;k+=1){var n=c[k];"Property"===n.type?(n.computed&&f(n.key,h,"Expression"),f(n.value,h,"Pattern")):"RestElement"===n.type&&f(n.argument,h,"Pattern")}};Df.Expression=Bu;Df.ThisExpression=Df.Super=Df.MetaProperty=Wr;Df.ArrayExpression=function(c,h,f){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&f(n,h,"Expression")}};Df.ObjectExpression=function(c,h,f){var k=0;for(c=c.properties;k<c.length;k+=1)f(c[k],h)};Df.FunctionExpression=Df.ArrowFunctionExpression=
Df.FunctionDeclaration;Df.SequenceExpression=function(c,h,f){var k=0;for(c=c.expressions;k<c.length;k+=1)f(c[k],h,"Expression")};Df.TemplateLiteral=function(c,h,f){for(var k=0,n=c.quasis;k<n.length;k+=1)f(n[k],h);k=0;for(c=c.expressions;k<c.length;k+=1)f(c[k],h,"Expression")};Df.TemplateElement=Wr;Df.UnaryExpression=Df.UpdateExpression=function(c,h,f){f(c.argument,h,"Expression")};Df.BinaryExpression=Df.LogicalExpression=function(c,h,f){f(c.left,h,"Expression");f(c.right,h,"Expression")};Df.AssignmentExpression=
Df.AssignmentPattern=function(c,h,f){f(c.left,h,"Pattern");f(c.right,h,"Expression")};Df.ConditionalExpression=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Expression");f(c.alternate,h,"Expression")};Df.NewExpression=Df.CallExpression=function(c,h,f){f(c.callee,h,"Expression");if(c.arguments){var k=0;for(c=c.arguments;k<c.length;k+=1)f(c[k],h,"Expression")}};Df.MemberExpression=function(c,h,f){f(c.object,h,"Expression");c.computed&&f(c.property,h,"Expression")};Df.ExportNamedDeclaration=
Df.ExportDefaultDeclaration=function(c,h,f){c.declaration&&f(c.declaration,h,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&f(c.source,h,"Expression")};Df.ExportAllDeclaration=function(c,h,f){c.exported&&f(c.exported,h);f(c.source,h,"Expression")};Df.ImportDeclaration=function(c,h,f){for(var k=0,n=c.specifiers;k<n.length;k+=1)f(n[k],h);f(c.source,h,"Expression")};Df.ImportExpression=function(c,h,f){f(c.source,h,"Expression")};Df.ImportSpecifier=Df.ImportDefaultSpecifier=
Df.ImportNamespaceSpecifier=Df.Identifier=Df.Literal=Wr;Df.TaggedTemplateExpression=function(c,h,f){f(c.tag,h,"Expression");f(c.quasi,h,"Expression")};Df.ClassDeclaration=Df.ClassExpression=function(c,h,f){return f(c,h,"Class")};Df.Class=function(c,h,f){c.id&&f(c.id,h,"Pattern");c.superClass&&f(c.superClass,h,"Expression");f(c.body,h)};Df.ClassBody=function(c,h,f){var k=0;for(c=c.body;k<c.length;k+=1)f(c[k],h)};Df.MethodDefinition=Df.Property=function(c,h,f){c.computed&&f(c.key,h,"Expression");f(c.value,
h,"Expression")};var Kt=Object.freeze({__proto__:null,ancestor:function(c,h,f,k,n){var b=[];f||(f=Df);(function l(m,a,g){g=g||m.type;var r=h[g],v=m!==b[b.length-1];v&&b.push(m);f[g](m,a,l);r&&r(m,a||b,b);v&&b.pop()})(c,k,n)},base:Df,findNodeAfter:function(c,h,f,k,n){f=cw(f);k||(k=Df);try{(function g(e,m,a){if(!(e.end<h)){a=a||e.type;if(e.start>=h&&f(a,e))throw new UA(e,m);k[a](e,m,g)}})(c,n)}catch(b){if(b instanceof UA)return b;throw b;}},findNodeAround:function(c,h,f,k,n){f=cw(f);k||(k=Df);try{(function g(e,
m,a){a=a||e.type;if(!(e.start>h||e.end<h)&&(k[a](e,m,g),f(a,e)))throw new UA(e,m);})(c,n)}catch(b){if(b instanceof UA)return b;throw b;}},findNodeAt:function(c,h,f,k,n,b){n||(n=Df);k=cw(k);try{(function l(m,a,g){g=g||m.type;if((null==h||m.start<=h)&&(null==f||m.end>=f))n[g](m,a,l);if(!(null!=h&&m.start!==h||null!=f&&m.end!==f)&&k(g,m))throw new UA(m,a);})(c,b)}catch(e){if(e instanceof UA)return e;throw e;}},findNodeBefore:function(c,h,f,k,n){f=cw(f);k||(k=Df);var b;(function l(m,a,g){m.start>h||(g=
g||m.type,m.end<=h&&(!b||b.node.end<m.end)&&f(g,m)&&(b=new UA(m,a)),k[g](m,a,l))})(c,n);return b},full:function(c,h,f,k,n){f||(f=Df);(function g(e,m,a){var l=a||e.type;f[l](e,m,g);a||h(e,m,l)})(c,k,n)},fullAncestor:function(c,h,f,k){f||(f=Df);var n=[];(function g(e,m,a){var l=a||e.type,r=e!==n[n.length-1];r&&n.push(e);f[l](e,m,g);a||h(e,m||n,n,l);r&&n.pop()})(c,k)},make:Fz,recursive:function(c,h,f,k,n){var b=f?Fz(f,k||void 0):k;(function l(m,a,g){b[g||m.type](m,a,l)})(c,h,n)},simple:function(c,h,
f,k,n){f||(f=Df);(function g(e,m,a){a=a||e.type;var l=h[a];f[a](e,m,g);l&&l(e,m)})(c,k,n)}}),Gk=function(c,h){void 0===h&&(h={});this.toks=this.constructor.BaseParser.tokenizer(c,h);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Wa.eof,start:0,end:0};this.tok.validateRegExpFlags=zx;this.tok.validateRegExpPattern=zx;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new Bz(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=
0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};Gk.prototype.startNode=function(){return new Ay(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};Gk.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};Gk.prototype.startNodeAt=function(c){return this.options.locations?new Ay(this.toks,c[0],c[1]):new Ay(this.toks,c)};Gk.prototype.finishNode=function(c,h){c.type=h;c.end=
this.last.end;this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};Gk.prototype.dummyNode=function(c){var h=this.startNode();h.type=c;h.end=h.start;this.options.locations&&(h.loc.end=h.loc.start);this.options.ranges&&(h.range[1]=h.start);this.last={type:Wa.name,start:h.start,end:h.start,loc:h.loc};return h};Gk.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};Gk.prototype.dummyString=function(){var c=
this.dummyNode("Literal");c.value=c.raw="\u2716";return c};Gk.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};Gk.prototype.isContextual=function(c){return this.tok.type===Wa.name&&this.tok.value===c};Gk.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Wa.name)};Gk.prototype.canInsertSemicolon=function(){return this.tok.type===Wa.eof||this.tok.type===Wa.braceR||Eq.test(this.input.slice(this.last.end,this.tok.start))};Gk.prototype.semicolon=function(){return this.eat(Wa.semi)};
Gk.prototype.expect=function(c){if(this.eat(c))return!0;for(var h=1;2>=h;h++)if(this.lookAhead(h).type===c){for(c=0;c<h;c++)this.next();return!0}};Gk.prototype.pushCx=function(){this.context.push(this.curIndent)};Gk.prototype.popCx=function(){this.curIndent=this.context.pop()};Gk.prototype.lineEnd=function(c){for(;c<this.input.length&&!Vr(this.input.charCodeAt(c));)++c;return c};Gk.prototype.indentationAfter=function(c){for(var h=0;;++c){var f=this.input.charCodeAt(c);if(32===f)++h;else if(9===f)h+=
this.options.tabSize;else return h}};Gk.prototype.closes=function(c,h,f,k){return this.tok.type===c||this.tok.type===Wa.eof?!0:f!==this.curLineStart&&this.curIndent<h&&this.tokenStartsLine()&&(!k||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<h)};Gk.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var h=this.input.charCodeAt(c);if(9!==h&&32!==h)return!1}return!0};Gk.prototype.extend=function(c,h){this[c]=h(this[c])};Gk.prototype.parse=
function(){this.next();return this.parseTopLevel()};Gk.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};Gk.parse=function(c,h){return(new this(c,h)).parse()};Gk.BaseParser=Wl;var BL=Gk.prototype;BL.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};BL.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Wa.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Wa.ellipsis),new EG(this.toks)}catch(k){if(!(k instanceof SyntaxError))throw k;var c=k.message,h=k.raisedAt,f=!0;if(/unterminated/i.test(c))if(h=this.lineEnd(k.pos+1),/string/.test(c))f={start:k.pos,end:h,type:Wa.string,value:this.input.slice(k.pos+
1,h)};else if(/regular expr/i.test(c)){f=this.input.slice(k.pos,h);try{f=new RegExp(f)}catch(n){}f={start:k.pos,end:h,type:Wa.regexp,value:f}}else f=/template/.test(c)?{start:k.pos,end:h,type:Wa.template,value:this.input.slice(k.pos,h)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;h<this.input.length&&!dw(this.input.charCodeAt(h));)++h;else if(/character escape|expected hexadecimal/i.test(c))for(;h<
this.input.length&&(c=this.input.charCodeAt(h++),34!==c&&39!==c&&!Vr(c)););else if(/unexpected character/i.test(c))h++,f=!1;else if(/regular expression/i.test(c))f=!0;else throw k;this.resetTo(h);!0===f&&(f={start:h,end:h,type:Wa.name,value:"\u2716"});if(f)return this.options.locations&&(f.loc=new Bz(this.toks,Cj(this.input,f.start),Cj(this.input,f.end))),f}};BL.resetTo=function(c){this.toks.pos=c;var h=this.input.charAt(c-1);this.toks.exprAllowed=!h||/[[{(,;:?/*=+\-~!|&%^<>]/.test(h)||/[enwfd]/.test(h)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=wx.lastIndex=0;for(var f;(f=wx.exec(this.input))&&f.index<c;)++this.toks.curLine,this.toks.lineStart=f.index+f[0].length}};BL.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var Js=Gk.prototype;Js.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,Cj(this.input,
0)]:0);for(c.body=[];this.tok.type!==Wa.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};Js.parseStatement=function(){var c=this.tok.type,h=this.startNode();if(this.toks.isLet()){c=Wa._var;var f="let"}switch(c){case Wa._break:case Wa._continue:this.next();var k=c===Wa._break;this.semicolon()||this.canInsertSemicolon()?h.label=null:(h.label=this.tok.type===Wa.name?this.parseIdent():
null,this.semicolon());return this.finishNode(h,k?"BreakStatement":"ContinueStatement");case Wa._debugger:return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement");case Wa._do:return this.next(),h.body=this.parseStatement(),h.test=this.eat(Wa._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(h,"DoWhileStatement");case Wa._for:this.next();k=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Wa.parenL);if(this.tok.type===
Wa.semi)return this.parseFor(h,null);if((c=this.toks.isLet())||this.tok.type===Wa._var||this.tok.type===Wa._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Wa._in&&!this.isContextual("of")?this.parseFor(h,c):(9<=this.options.ecmaVersion&&this.tok.type!==Wa._in&&(h.await=k),this.parseForIn(h,c));c=this.parseExpression(!0);return this.tok.type===Wa._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Wa._in&&(h.await=
k),this.parseForIn(h,this.toAssignable(c))):this.parseFor(h,c);case Wa._function:return this.next(),this.parseFunction(h,!0);case Wa._if:return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement(),h.alternate=this.eat(Wa._else)?this.parseStatement():null,this.finishNode(h,"IfStatement");case Wa._return:return this.next(),this.eat(Wa.semi)||this.canInsertSemicolon()?h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,"ReturnStatement");
case Wa._switch:c=this.curIndent;f=this.curLineStart;this.next();h.discriminant=this.parseParenExpression();h.cases=[];this.pushCx();for(this.expect(Wa.braceL);!this.closes(Wa.braceR,c,f,!0);)if(this.tok.type===Wa._case||this.tok.type===Wa._default){var n=this.tok.type===Wa._case;k&&this.finishNode(k,"SwitchCase");h.cases.push(k=this.startNode());k.consequent=[];this.next();k.test=n?this.parseExpression():null;this.expect(Wa.colon)}else k||(h.cases.push(k=this.startNode()),k.consequent=[],k.test=
null),k.consequent.push(this.parseStatement());k&&this.finishNode(k,"SwitchCase");this.popCx();this.eat(Wa.braceR);return this.finishNode(h,"SwitchStatement");case Wa._throw:return this.next(),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement");case Wa._try:return this.next(),h.block=this.parseBlock(),h.handler=null,this.tok.type===Wa._catch&&(k=this.startNode(),this.next(),this.eat(Wa.parenL)?(k.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Wa.parenR)):
k.param=null,k.body=this.parseBlock(),h.handler=this.finishNode(k,"CatchClause")),h.finalizer=this.eat(Wa._finally)?this.parseBlock():null,h.handler||h.finalizer?this.finishNode(h,"TryStatement"):h.block;case Wa._var:case Wa._const:return this.parseVar(h,!1,f||this.tok.value);case Wa._while:return this.next(),h.test=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WhileStatement");case Wa._with:return this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement(),
this.finishNode(h,"WithStatement");case Wa.braceL:return this.parseBlock();case Wa.semi:return this.next(),this.finishNode(h,"EmptyStatement");case Wa._class:return this.parseClass(!0);case Wa._import:return 10<this.options.ecmaVersion&&(k=this.lookAhead(1).type,k===Wa.parenL||k===Wa.dot)?(h.expression=this.parseExpression(),this.semicolon(),this.finishNode(h,"ExpressionStatement")):this.parseImport();case Wa._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(h,!0,!0);k=this.parseExpression();if(Mn(k))return this.next(),this.tok.type===Wa.eof?this.finishNode(h,"EmptyStatement"):this.parseStatement();if(c===Wa.name&&"Identifier"===k.type&&this.eat(Wa.colon))return h.body=this.parseStatement(),h.label=k,this.finishNode(h,"LabeledStatement");h.expression=k;this.semicolon();return this.finishNode(h,"ExpressionStatement")}};Js.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(Wa.braceL);var h=this.curIndent,
f=this.curLineStart;for(c.body=[];!this.closes(Wa.braceR,h,f,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Wa.braceR);return this.finishNode(c,"BlockStatement")};Js.parseFor=function(c,h){c.init=h;c.test=c.update=null;this.eat(Wa.semi)&&this.tok.type!==Wa.semi&&(c.test=this.parseExpression());this.eat(Wa.semi)&&this.tok.type!==Wa.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Wa.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};Js.parseForIn=
function(c,h){var f=this.tok.type===Wa._in?"ForInStatement":"ForOfStatement";this.next();c.left=h;c.right=this.parseExpression();this.popCx();this.expect(Wa.parenR);c.body=this.parseStatement();return this.finishNode(c,f)};Js.parseVar=function(c,h,f){c.kind=f;this.next();c.declarations=[];do f=this.startNode(),f.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),f.init=this.eat(Wa.eq)?this.parseMaybeAssign(h):null,c.declarations.push(this.finishNode(f,"VariableDeclarator"));
while(this.eat(Wa.comma));c.declarations.length||(f=this.startNode(),f.id=this.dummyIdent(),c.declarations.push(this.finishNode(f,"VariableDeclarator")));h||this.semicolon();return this.finishNode(c,"VariableDeclaration")};Js.parseClass=function(c){var h=this.startNode();this.next();h.id=this.tok.type===Wa.name?this.parseIdent():!0===c?this.dummyIdent():null;h.superClass=this.eat(Wa._extends)?this.parseExpression():null;h.body=this.startNode();h.body.body=[];this.pushCx();var f=this.curIndent+1,k=
this.curLineStart;this.eat(Wa.braceL);this.curIndent+1<f&&(f=this.curIndent,k=this.curLineStart);for(;!this.closes(Wa.braceR,f,k);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Wa.star));this.parsePropertyName(n);if(Mn(n.key))Mn(this.parseMaybeAssign())&&this.next(),this.eat(Wa.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===Wa.parenL||this.tok.type===Wa.braceL?n.static=!1:(n.static=!0,b=this.eat(Wa.star),
this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Wa.parenL||this.canInsertSemicolon())var e=!1;else e=!0,b=9<=this.options.ecmaVersion&&this.eat(Wa.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Wa.parenL&&this.tok.type!==Wa.braceL?(n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||
b||e||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,e));h.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Wa.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(h.body,"ClassBody");return this.finishNode(h,c?"ClassDeclaration":"ClassExpression")};Js.parseFunction=function(c,
h,f){var k=this.inAsync,n=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Wa.star));8<=this.options.ecmaVersion&&(c.async=!!f);this.tok.type===Wa.name?c.id=this.parseIdent():!0===h&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inFunction=!0;c.params=this.parseFunctionParams();c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=k;this.inFunction=n;return this.finishNode(c,h?"FunctionDeclaration":"FunctionExpression")};Js.parseExport=
function(){var c=this.startNode();this.next();if(this.eat(Wa.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Wa._default)){var h;if(this.tok.type===Wa._function||(h=this.toks.isAsyncFunction())){var f=this.startNode();this.next();h&&this.next();c.declaration=this.parseFunction(f,"nullableID",h)}else this.tok.type===
Wa._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};Js.parseImport=
function(){var c=this.startNode();this.next();if(this.tok.type===Wa.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Wa.name&&"from"!==this.tok.value){var h=this.startNode();h.local=this.parseIdent();this.finishNode(h,"ImportDefaultSpecifier");this.eat(Wa.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Wa.string?this.parseExprAtom():this.dummyString();h&&c.specifiers.unshift(h)}this.semicolon();return this.finishNode(c,
"ImportDeclaration")};Js.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Wa.star){var h=this.startNode();this.next();h.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(h,"ImportNamespaceSpecifier"))}else{h=this.curIndent;var f=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Wa.braceL);this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Wa.braceR,h+(this.curLineStart<=k?1:0),f);){var n=this.startNode();if(this.eat(Wa.star))n.local=
this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Mn(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}c.push(n);this.eat(Wa.comma)}this.eat(Wa.braceR);this.popCx()}return c};Js.parseExportSpecifierList=function(){var c=[],h=this.curIndent,f=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Wa.braceL);
this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Wa.braceR,h+(this.curLineStart<=k?1:0),f)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Mn(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");c.push(n);this.eat(Wa.comma)}this.eat(Wa.braceR);this.popCx();return c};var Hk=Gk.prototype;Hk.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=
this.checkLVal(c.expression),c;default:return this.dummyIdent()}};Hk.parseExpression=function(c){var h=this.storeCurrentPos(),f=this.parseMaybeAssign(c);if(this.tok.type===Wa.comma){h=this.startNodeAt(h);for(h.expressions=[f];this.eat(Wa.comma);)h.expressions.push(this.parseMaybeAssign(c));return this.finishNode(h,"SequenceExpression")}return f};Hk.parseParenExpression=function(){this.pushCx();this.expect(Wa.parenL);var c=this.parseExpression();this.popCx();this.expect(Wa.parenR);return c};Hk.parseMaybeAssign=
function(c){if(this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Wa.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Wa.star),c.argument=this.parseMaybeAssign()),this.finishNode(c,"YieldExpression");var h=this.storeCurrentPos(),f=this.parseMaybeConditional(c);return this.tok.type.isAssign?(h=this.startNodeAt(h),h.operator=this.tok.value,h.left=this.tok.type===Wa.eq?this.toAssignable(f):
this.checkLVal(f),this.next(),h.right=this.parseMaybeAssign(c),this.finishNode(h,"AssignmentExpression")):f};Hk.parseMaybeConditional=function(c){var h=this.storeCurrentPos(),f=this.parseExprOps(c);return this.eat(Wa.question)?(h=this.startNodeAt(h),h.test=f,h.consequent=this.parseMaybeAssign(),h.alternate=this.expect(Wa.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(h,"ConditionalExpression")):f};Hk.parseExprOps=function(c){var h=this.storeCurrentPos(),f=this.curIndent,k=this.curLineStart;
return this.parseExprOp(this.parseMaybeUnary(!1),h,-1,c,f,k)};Hk.parseExprOp=function(c,h,f,k,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return c;var e=this.tok.type.binop;if(null!=e&&(!k||this.tok.type!==Wa._in)&&e>f){var m=this.startNodeAt(h);m.left=c;m.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine()?m.right=this.dummyIdent():(c=this.storeCurrentPos(),m.right=this.parseExprOp(this.parseMaybeUnary(!1),c,e,k,n,b));this.finishNode(m,
/&&|\|\||\?\?/.test(m.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(m,h,f,k,n,b)}return c};Hk.parseMaybeUnary=function(c){var h=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var f=this.parseAwait();c=!0}else if(this.tok.type.prefix){f=this.startNode();var k=this.tok.type===Wa.incDec;k||(c=!0);f.operator=this.tok.value;f.prefix=!0;this.next();f.argument=this.parseMaybeUnary(!0);
k&&(f.argument=this.checkLVal(f.argument));f=this.finishNode(f,k?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Wa.ellipsis)f=this.startNode(),this.next(),f.argument=this.parseMaybeUnary(c),f=this.finishNode(f,"SpreadElement");else for(f=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)k=this.startNodeAt(h),k.operator=this.tok.value,k.prefix=!1,k.argument=this.checkLVal(f),this.next(),f=this.finishNode(k,"UpdateExpression");return!c&&this.eat(Wa.starstar)?
(c=this.startNodeAt(h),c.operator="**",c.left=f,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):f};Hk.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};Hk.parseSubscripts=function(c,h,f,k,n){for(var b=11<=this.options.ecmaVersion,e=!1;;){if(this.curLineStart!==n&&this.curIndent<=k&&this.tokenStartsLine())if(this.tok.type===Wa.dot&&this.curIndent===k)--k;else break;var m="Identifier"===
c.type&&"async"===c.name&&!this.canInsertSemicolon(),a=b&&this.eat(Wa.questionDot);a&&(e=!0);if(a&&this.tok.type!==Wa.parenL&&this.tok.type!==Wa.bracketL&&this.tok.type!==Wa.backQuote||this.eat(Wa.dot)){var g=this.startNodeAt(h);g.object=c;this.curLineStart!==n&&this.curIndent<=k&&this.tokenStartsLine()?g.property=this.dummyIdent():g.property=this.parsePropertyAccessor()||this.dummyIdent();g.computed=!1;b&&(g.optional=a);c=this.finishNode(g,"MemberExpression")}else if(this.tok.type===Wa.bracketL)this.pushCx(),
this.next(),g=this.startNodeAt(h),g.object=c,g.property=this.parseExpression(),g.computed=!0,b&&(g.optional=a),this.popCx(),this.expect(Wa.bracketR),c=this.finishNode(g,"MemberExpression");else if(f||this.tok.type!==Wa.parenL)if(this.tok.type===Wa.backQuote)a=this.startNodeAt(h),a.tag=c,a.quasi=this.parseTemplate(),c=this.finishNode(a,"TaggedTemplateExpression");else break;else{g=this.parseExprList(Wa.parenR);if(m&&this.eat(Wa.arrow))return this.parseArrowExpression(this.startNodeAt(h),g,!0);m=this.startNodeAt(h);
m.callee=c;m.arguments=g;b&&(m.optional=a);c=this.finishNode(m,"CallExpression")}}e&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ChainExpression"));return c};Hk.parseExprAtom=function(){switch(this.tok.type){case Wa._this:case Wa._super:var c=this.tok.type===Wa._this?"ThisExpression":"Super";var h=this.startNode();this.next();return this.finishNode(h,c);case Wa.name:h=this.storeCurrentPos();c=this.parseIdent();var f=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Wa._function))return this.parseFunction(this.startNodeAt(h),
!1,!0);this.tok.type===Wa.name&&(c=this.parseIdent(),f=!0)}return this.eat(Wa.arrow)?this.parseArrowExpression(this.startNodeAt(h),[c],f):c;case Wa.regexp:return h=this.startNode(),c=this.tok.value,h.regex={pattern:c.pattern,flags:c.flags},h.value=c.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(h,"Literal");case Wa.num:case Wa.string:return h=this.startNode(),h.value=this.tok.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Wa.num&&
110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal");case Wa._null:case Wa._true:case Wa._false:return h=this.startNode(),h.value=this.tok.type===Wa._null?null:this.tok.type===Wa._true,h.raw=this.tok.type.keyword,this.next(),this.finishNode(h,"Literal");case Wa.parenL:h=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Wa.parenR);if(this.eat(Wa.arrow))return c=c.expressions||[c],c.length&&Mn(c[c.length-
1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(h),c);this.options.preserveParens&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ParenthesizedExpression"));return c;case Wa.bracketL:return h=this.startNode(),h.elements=this.parseExprList(Wa.bracketR,!0),this.finishNode(h,"ArrayExpression");case Wa.braceL:return this.parseObj();case Wa._class:return this.parseClass(!1);case Wa._function:return h=this.startNode(),this.next(),this.parseFunction(h,!1);case Wa._new:return this.parseNew();
case Wa.backQuote:return this.parseTemplate();case Wa._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};Hk.parseExprImport=function(){var c=this.startNode(),h=this.parseIdent(!0);switch(this.tok.type){case Wa.parenL:return this.parseDynamicImport(c);case Wa.dot:return c.meta=h,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};Hk.parseDynamicImport=function(c){c.source=this.parseExprList(Wa.parenR)[0]||
this.dummyString();return this.finishNode(c,"ImportExpression")};Hk.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};Hk.parseNew=function(){var c=this.startNode(),h=this.curIndent,f=this.curLineStart,k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Wa.dot))return c.meta=k,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");k=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),k,!0,h,f);
c.arguments=this.tok.type===Wa.parenL?this.parseExprList(Wa.parenR):[];return this.finishNode(c,"NewExpression")};Hk.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Wa.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===Wa.backQuote;return this.finishNode(c,"TemplateElement")};Hk.parseTemplate=function(){var c=this.startNode();this.next();
c.expressions=[];var h=this.parseTemplateElement();for(c.quasis=[h];!h.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Wa.braceR)?h=this.parseTemplateElement():(h=this.startNode(),h.value={cooked:"",raw:""},h.tail=!0,this.finishNode(h,"TemplateElement")),c.quasis.push(h);this.expect(Wa.backQuote);return this.finishNode(c,"TemplateLiteral")};Hk.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var h=this.curIndent+1,f=this.curLineStart;this.eat(Wa.braceL);
this.curIndent+1<h&&(h=this.curIndent,f=this.curLineStart);for(;!this.closes(Wa.braceR,h,f);){var k=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Wa.ellipsis))k.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(k,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),k.method=!1,k.shorthand=!1,n=this.eat(Wa.star));this.parsePropertyName(k);if(this.toks.isAsyncProp(k)){var e=!0;n=9<=this.options.ecmaVersion&&this.eat(Wa.star);this.parsePropertyName(k)}else e=
!1;Mn(k.key)?Mn(this.parseMaybeAssign())&&this.next():(this.eat(Wa.colon)?(k.kind="init",k.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Wa.parenL||this.tok.type===Wa.braceL)?(k.kind="init",k.method=!0,k.value=this.parseMethod(n,e)):5<=this.options.ecmaVersion&&"Identifier"===k.key.type&&!k.computed&&("get"===k.key.name||"set"===k.key.name)&&this.tok.type!==Wa.comma&&this.tok.type!==Wa.braceR&&this.tok.type!==Wa.eq?(k.kind=k.key.name,this.parsePropertyName(k),k.value=
this.parseMethod(!1)):(k.kind="init",6<=this.options.ecmaVersion?this.eat(Wa.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=k.key,n.right=this.parseMaybeAssign(),k.value=this.finishNode(n,"AssignmentExpression")):k.value=k.key:k.value=this.dummyIdent(),k.shorthand=!0),c.properties.push(this.finishNode(k,"Property")))}this.eat(Wa.comma)}this.popCx();this.eat(Wa.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};
Hk.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Wa.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Wa.bracketR);return}c.computed=!1}var h=this.tok.type===Wa.num||this.tok.type===Wa.string?this.parseExprAtom():this.parseIdent();c.key=h||this.dummyIdent()};Hk.parsePropertyAccessor=function(){if(this.tok.type===Wa.name||this.tok.type.keyword)return this.parseIdent()};Hk.parseIdent=function(){var c=this.tok.type===Wa.name?this.tok.value:this.tok.type.keyword;
if(!c)return this.dummyIdent();var h=this.startNode();this.next();h.name=c;return this.finishNode(h,"Identifier")};Hk.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Hk.toAssignable=function(c,h){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||h))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,h);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===
c.type){c.type="ObjectPattern";for(var f=0,k=c.properties;f<k.length;f+=1)this.toAssignable(k[f],h)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,h);else if("Property"===c.type)this.toAssignable(c.value,h);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,h);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};Hk.toAssignableList=function(c,h){for(var f=
0;f<c.length;f+=1)this.toAssignable(c[f],h);return c};Hk.parseFunctionParams=function(c){c=this.parseExprList(Wa.parenR);return this.toAssignableList(c,!0)};Hk.parseMethod=function(c,h){var f=this.startNode(),k=this.inAsync,n=this.inFunction;this.initFunction(f);6<=this.options.ecmaVersion&&(f.generator=!!c);8<=this.options.ecmaVersion&&(f.async=!!h);this.inAsync=f.async;this.inFunction=!0;f.params=this.parseFunctionParams();f.body=this.parseBlock();this.toks.adaptDirectivePrologue(f.body.body);this.inAsync=
k;this.inFunction=n;return this.finishNode(f,"FunctionExpression")};Hk.parseArrowExpression=function(c,h,f){var k=this.inAsync,n=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.inAsync=c.async;this.inFunction=!0;c.params=this.toAssignableList(h,!0);c.expression=this.tok.type!==Wa.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));this.inAsync=k;this.inFunction=n;return this.finishNode(c,"ArrowFunctionExpression")};
Hk.parseExprList=function(c,h){this.pushCx();var f=this.curIndent,k=this.curLineStart,n=[];for(this.next();!this.closes(c,f+1,k);)if(this.eat(Wa.comma))n.push(h?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Mn(b)){if(this.closes(c,f,k))break;this.next()}else n.push(b);this.eat(Wa.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};Hk.parseAwait=function(){var c=this.startNode();this.next();c.argument=
this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};ZE.tabSize=4;var CL=Object.freeze({__proto__:null,LooseParser:Gk,isDummy:Mn,parse:function(c,h){return Gk.parse(c,h)}}),Af=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");Af.forEachNode=function(c,h,f,k){k=k||{};var n=k.traversal||"preorder",b=Af.obj.clone(k.visitors?k.visitors:Af.walk.make(Af.custom.visitors.withMemberExpression)),e="preorder"===n?function(m,a,g,l,r){h(g,f,l,a);return m(g,l+1,r)}:function(m,
a,g,l,r){m=m(g,l+1,r);h(g,f,l,a);return m};Object.keys(b).forEach(function(m){var a=b[m];b[m]=function(g,l,r){return e(a,m,g,l,r)}});Af.walk.recursive(c,0,null,b);return c};Af.matchNodes=function(c,h,f,k){return Af.forEachNode(c,function(n,b,e,m){if(h[n.type])h[n.type](n,b,e,m)},f,k)};Af.findNodesIncluding=wi;Af.withParentInfo=function(c,h,f){function k(a){var g={id:Af.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(g);return g}f=f||{};var n=Af.walk.make({Function:function(a,
g,l){g&&g.scope&&(g.scope=k(g.scope));l(a.body,g,"ScopeBody")},VariableDeclarator:function(a,g,l){a.init&&l(a.init,g,"Expression")},VariableDeclaration:function(a,g,l){for(var r=0;r<a.declarations.length;++r){var v=a.declarations[r];v&&l(v,g,"VariableDeclarator")}},ObjectExpression:function(a,g,l){for(var r=0;r<a.properties.length;++r){var v=a.properties[r];l(v.key,g,"Expression");l(v.value,g,"Expression")}},MemberExpression:function(a,g,l){l(a.object,g,"Expression");l(a.property,g,"Expression")}},
Af.walk.base),b,e=[];Af.forEachNode(c,function(a){Af.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(g){if(!a.__lookupGetter__(g)){var l=a[g];a.__defineGetter__(g,function(){b=g;return l});e.push([a,g,a[g]])}})},null,{visitors:n});var m=[];Object.keys(n).forEach(function(a){var g=n[a];n[a]=function(l,r,v){return a===l.type||f.visitAllNodes?(m.push(h.call(null,l,{scope:r.scope,depth:r.depth,parent:r.parent,type:a,propertyInParent:b})),g(l,{scope:r.scope,parent:l,
depth:r.depth+1},v)):g(l,r,v)}});Af.walk.recursive(c,{scope:k(),parent:null,propertyInParent:"",depth:0},null,n);e.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return m};Af.copy=iq;Af.findSiblings=Nm;Af.findNodeByAstIndex=kt;Af.findStatementOfNode=lt;Af.addAstIndex=Xr;Af.obj=Ag;Af.arr=eg;Af.string=ti;Af.Path=$h;Af.withMozillaAstDo=VA;Af.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Af.acorn=tv;Af.walk=Kt;Af.loose=CL;Af.custom=
{};Af.custom.forEachNode=Af.forEachNode;Af.custom.matchNodes=Af.matchNodes;Af.custom.findNodesIncluding=Af.findNodesIncluding;Af.custom.withParentInfo=Af.withParentInfo;Af.custom.copy=Af.copy;Af.custom.findSiblings=Af.findSiblings;Af.custom.findNodeByAstIndex=Af.findNodeByAstIndex;Af.custom.findStatementOfNode=Af.findStatementOfNode;Af.custom.addAstIndex=Af.addAstIndex;var By=Ba("F",Af.custom);Af.walk=Kt;Af.walk=Kt;Af.loose=CL;Af.loose=CL;Af.acorn=tv;Af.acorn=tv;Af.custom=By;Af.custom=By;Af.findStatementOfNode=
lt;Af.findStatementOfNode=lt;Af.addAstIndex=Xr;Af.addAstIndex=Xr;Af.findNodesIncluding=wi;Af.findNodesIncluding=wi;Af.findSiblings=Nm;Af.findSiblings=Nm;Af.findNodeByAstIndex=kt;Af.findNodeByAstIndex=kt;Af.copy=iq;Af.copy=iq;Af.custom.visitors={stopAtFunctions:Af.walk.make(Object.assign({Function:function(){}},Af.walk.base)),withMemberExpression:Af.walk.make({MemberExpression:function(c,h,f){f(c.object,h,"Expression");f(c.property,h,"Expression")}},Af.walk.base)};var Ej=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");
Ej.blockInliner=function(c){if(Array.isArray(c.body))for(var h=c.body.length-1;0<=h;h--){var f=c.body[h];"BlockStatement"===f.type&&f[Ej.canBeInlinedSym]&&c.body.splice.apply(c.body,[h,1].concat(f.body))}return c};Ej.block=function(c){return{type:"BlockStatement",body:c}};Ej.Visitor=He;var Lt=function(){return Ej.Visitor.apply(this,arguments)||this};$jscomp.inherits(Lt,Ej.Visitor);Lt.prototype.accept=function(c,h,f){this.doFunc(c,h,f);return Ej.Visitor.prototype.accept.call(this,c,h,f)};Lt.run=function(c,
h,f){var k=new this;k.doFunc=h;k.accept(c,f,[]);return f};Ba("A",Lt);Ej.AllNodesVisitor=Lt;var WA=function(){return Ej.Visitor.apply(this,arguments)||this};$jscomp.inherits(WA,Ej.Visitor);WA.prototype.accept=function(c,h,f){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return h.unshift({node:c,path:f}),c;default:return Ej.Visitor.prototype.accept.call(this,c,h,f)}};WA.run=function(c){var h=[];(new this).accept(c,h,[]);return h};
Ej.FindToplevelFuncDeclVisitor=WA;Ej.canBeInlinedSym=Symbol("canBeInlined");var Ks=function(){return Ej.Visitor.apply(this,arguments)||this};$jscomp.inherits(Ks,Ej.Visitor);Ks.prototype.accept=function(c,h,f){c=this.replacer(Ej.Visitor.prototype.accept.call(this,c,h,f));h={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(Ej.block(c),(h[Ej.canBeInlinedSym]=!0,h)):c};Ks.prototype.visitBlockStatement=function(c,h,f){return Ej.blockInliner(Ej.Visitor.prototype.visitBlockStatement.call(this,c,
h,f))};Ks.prototype.visitProgram=function(c,h,f){return Ej.blockInliner(Ej.Visitor.prototype.visitProgram.call(this,c,h,f))};Ks.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,[])};Ej.ReplaceManyVisitor=Ks;var Mt=function(){return Ej.Visitor.apply(this,arguments)||this};$jscomp.inherits(Mt,Ej.Visitor);Mt.prototype.accept=function(c,h,f){return this.replacer(Ej.Visitor.prototype.accept.call(this,c,h,f),f)};Mt.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,
[])};Ej.ReplaceVisitor=Mt;Ej.AllNodesVisitor=Lt;Ej.AllNodesVisitor=Lt;Ej.FindToplevelFuncDeclVisitor=WA;Ej.FindToplevelFuncDeclVisitor=WA;Ej.ReplaceVisitor=Mt;Ej.ReplaceVisitor=Mt;Ej.ReplaceManyVisitor=Ks;Ej.ReplaceManyVisitor=Ks;var Hh=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");Hh.addSource=jq;Hh.nodesAt=function(c,h){h="string"===typeof h?this.parse(h):h;return Hh.findNodesIncluding(h,c)};Hh.parseFunction=ya;Hh.fuzzyParse=ln;Hh.acornParseAsyncAware=function(c,h){if(h.onComment){var f=
h.onComment;h.onComment=function(b,e,m,a,g,l){return f.call(this,b,e,m-14,a-14,g,l)}}var k=Hh.acorn.parse("async () => {\n"+c+"\n}",h);if(k.loc)var n=k.loc.constructor;k={body:k.body[0].expression.body.body,sourceType:"module",type:"Program"};Hh.AllNodesVisitor.run(k,function(b,e,m){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(m=b.loc,e=m.start,m=m.end,b.loc=new n(h,{column:e.column,line:e.line-1},{column:m.column,line:m.line-1}));h.addSource&&
!b.source&&(b.source=c.slice(b.start,b.end))}});k.start=k.body[0].start;k.end=Hh.arr.last(k.body).end;h.addSource&&(k.source=c);k.body[0].loc&&n&&(k.loc=new n(h,k.body[0].loc.start,Hh.arr.last(k.body).loc.end));return k};Hh.parse=Ri;Hh.arr=eg;Hh.acorn=tv;Hh.loose=CL;Hh.walk=Kt;Hh.addAstIndex=Xr;Hh.findNodesIncluding=wi;Hh.custom=By;Hh.AllNodesVisitor=Lt;Hh.walk=Kt;Hh.walk=Kt;Hh.parse=Ri;Hh.parse=Ri;Hh.parseFunction=ya;Hh.parseFunction=ya;Hh.fuzzyParse=ln;Hh.fuzzyParse=ln;Hh.addSource=jq;Hh.addSource=
jq;Hh.custom.addSource=Hh.addSource;var sh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");sh.string=ti;sh.Path=$h;sh.BaseVisitor=He;sh.PrinterVisitor=DD;sh.ComparisonVisitor=ol;sh.stringify=tm;sh.addAstIndex=Xr;sh.parse=Ri;sh.addSource=jq;sh.methods={withMozillaAstDo:function(c,h,f){var k=new sh.BaseVisitor,n=k.accept;k.accept=function(b,e,m){h=f(function(){n.call(k,b,e,m)},b,e,m);return b};k.accept(c,h,[]);return h},printAst:function(c,h){h=h||{};var f=h.printSource||
!1,k=h.printPositions||!1,n=h.printIndex||!1,b=[];if("string"===typeof c){var e=c;c=sh.parse(c)}else e=h.source||c.source;f&&!c.source&&(e||(e=sh.stringify(c),c=sh.parse(e)),sh.addSource(c,e));(new sh.PrinterVisitor).accept(c,{index:0,tree:b},[]);return sh.string.printTree(b[0],function(m){var a=m.path+":"+m.node.type,g=[];n&&g.push(m.index);k&&g.push(m.node.start+"-"+m.node.end);f&&(m=m.node.source||e.slice(m.node.start,m.node.end),m=sh.string.print(m.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),g.push(m));g.length&&(a+="("+g.join(",")+")");return a},function(m){return m.children},"  ")},compareAst:function(c,h){if(!c||!h)throw Error("node"+(c?"1":"2")+" not defined");var f={completePath:[],comparisons:{errors:[]}};(new sh.ComparisonVisitor).accept(c,h,f,[]);return f.comparisons.errors.length?f.comparisons.errors.pluck("msg"):null},pathToNode:function(c,h,f){c.astIndex||sh.addAstIndex(c);f=new sh.BaseVisitor;var k=null;(f.accept=function(n,b,e,m){if(!k)return b=b.concat(m),n.astIndex===
h&&(k={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,e,m)}).call(f,c,[],{},[]);return k},rematchAstWithSource:function(c,h,f,k){f=!!f;h=sh.parse(h,f?{locations:!0}:void 0);var n=new sh.BaseVisitor;k&&(h=sh.Path(k).get(h));n.accept=function(b,e,m){m=m||[];var a=m.reduce(function(g,l){return g[l]},c);a.start=b.start;a.end=b.end;f&&(a.loc=b.loc);return this["visit"+b.type](b,e,m)};n.accept(h)}};sh.withMozillaAstDo=sh.methods.withMozillaAstDo;
sh.printAst=sh.methods.printAst;sh.compareAst=sh.methods.compareAst;sh.pathToNode=sh.methods.pathToNode;sh.rematchAstWithSource=sh.methods.rematchAstWithSource;var VA=sh.withMozillaAstDo,FG=sh.printAst,GG=sh.compareAst,HG=sh.pathToNode,IG=sh.rematchAstWithSource;sh.BaseVisitor=He;sh.BaseVisitor=He;sh.withMozillaAstDo=VA;sh.withMozillaAstDo=VA;sh.printAst=FG;sh.printAst=FG;sh.compareAst=GG;sh.compareAst=GG;sh.pathToNode=HG;sh.pathToNode=HG;sh.rematchAstWithSource=IG;sh.rematchAstWithSource=IG;var rf=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");rf.isIdentifier=zp;rf.id=Yq;rf.literal=Ge;rf.exprStmt=Gf;rf.returnStmt=Va;rf.empty=Om;rf.binaryExpr=kq;rf.funcExpr=Yr;rf.funcCall=Cu;rf.varDecl=Ax;rf.member=ew;rf.memberChain=Zr;rf.assign=Sj;rf.block=Ap;rf.program=kl;rf.tryStmt=lq;rf.prop=Bp;rf.objectLiteral=fw;rf.ifStmt=mn;rf.forIn=Bx;rf.conditional=Nn;rf.logical=Pm;rf.isIdentifier=zp;rf.isIdentifier=zp;rf.id=Yq;rf.id=Yq;rf.literal=Ge;rf.literal=Ge;rf.objectLiteral=fw;rf.objectLiteral=
fw;rf.prop=Bp;rf.prop=Bp;rf.exprStmt=Gf;rf.exprStmt=Gf;rf.returnStmt=Va;rf.returnStmt=Va;rf.empty=Om;rf.empty=Om;rf.binaryExpr=kq;rf.binaryExpr=kq;rf.funcExpr=Yr;rf.funcExpr=Yr;rf.funcCall=Cu;rf.funcCall=Cu;rf.varDecl=Ax;rf.varDecl=Ax;rf.member=ew;rf.member=ew;rf.memberChain=Zr;rf.memberChain=Zr;rf.assign=Sj;rf.assign=Sj;rf.block=Ap;rf.block=Ap;rf.program=kl;rf.program=kl;rf.tryStmt=lq;rf.tryStmt=lq;rf.ifStmt=mn;rf.ifStmt=mn;rf.forIn=Bx;rf.forIn=Bx;rf.conditional=Nn;rf.conditional=Nn;rf.logical=Pm;
rf.logical=Pm;rf.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var Qw=Object.freeze({__proto__:null,isIdentifier:zp,id:Yq,literal:Ge,objectLiteral:fw,prop:Bp,exprStmt:Gf,returnStmt:Va,empty:Om,binaryExpr:kq,funcExpr:Yr,funcCall:Cu,varDecl:Ax,member:ew,memberChain:Zr,assign:Sj,block:Ap,program:kl,tryStmt:lq,ifStmt:mn,forIn:Bx,conditional:Nn,logical:Pm}),$d=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");$d.scopes=$r;$d.nodesAtIndex=Du;$d.scopesAtIndex=Gz;$d.scopeAtIndex=
Hz;$d.scopesAtPos=fC;$d.nodesInScopeOf=Ji;$d.declarationsOfScope=gC;$d.declarationsWithIdsOfScope=function(c){var h=$d.arr.compact($d.helpers.declIds(c.params).concat(c.catches)),f=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable($d.arr.filter(c.funcDecls,function(k){return k.id})),$jscomp.arrayFromIterable($d.arr.filter(c.classDecls,function(k){return k.id})));return h.map(function(k){return[k,k]}).concat(f.map(function(k){return[k,k.id]})).concat($d.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(k){return[$d.statementOf(c.node,
k),k]}))};$d._declaredVarNames=hC;$d._findJsLintGlobalDeclarations=mt;$d.topLevelFuncDecls=Iz;$d.resolveReference=Eu;$d.resolveReferences=mq;$d.refWithDeclAt=as;$d.topLevelDeclsAndRefs=$o;$d.findGlobalVarRefs=Qm;$d.findNodesIncludingLines=iC;$d.__varDeclIdsFor=function(c,h){for(var f=[],k=$jscomp.makeIterator(c.params),n=k.next();!n.done;n=k.next())n=n.value,n.name===h&&f.push(n);k=$jscomp.makeIterator(c.funcDecls);for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);k=$jscomp.makeIterator(c.classDecls);
for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);k=$jscomp.makeIterator(c.importSpecifiers);for(n=k.next();!n.done;n=k.next())n=n.value,n.name===h&&f.push(n);c=$jscomp.makeIterator($d.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===h&&f.push(n);return f};$d.findReferencesAndDeclsInScope=nn;$d.findDeclarationClosestToIndex=Qk;$d.nodesAt=Cx;$d.statementOf=bs;$d.imports=Dx;$d.exports=Fu;$d.arr=eg;$d.chain=Ql;$d.num=Km;$d.tree=vu;$d.fun=Jn;$d.obj=
Ag;$d.BaseVisitor=He;$d.ScopeVisitor=mk;$d.FindToplevelFuncDeclVisitor=WA;$d.withMozillaAstDo=VA;$d.parse=Ri;$d.acorn=tv;$d.walk=Kt;$d.custom=By;$d.stringify=tm;$d.helpers={declIds:function(c,h){h=void 0===h?[]:h;for(var f=0;f<c.length;f++){var k=c[f];if(k)if("Identifier"===k.type)h.push(k);else if("RestElement"===k.type)h.push(k.argument);else if("AssignmentPattern"===k.type)$d.helpers.declIds([k.left],h);else if("ObjectPattern"===k.type)for(var n=0;n<k.properties.length;n++){var b=k.properties[n];
$d.helpers.declIds([b.value||b],h)}else"ArrayPattern"===k.type&&$d.helpers.declIds(k.elements,h)}return h},varDecls:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var k=f.next();!k.done;k=f.next()){k=k.value;for(var n=$jscomp.makeIterator($d.helpers.declIds([k.id])),b=n.next();!b.done;b=n.next())h.push([k,b.value])}}return h},varDeclIds:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);
for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var k=f.next();!k.done;k=f.next())$d.helpers.declIds([k.value.id],h)}return h},objPropertiesAsList:function(c,h,f,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var b=n.key.name,e={key:h.concat([b]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":f||k.push(e);for(e=0;e<n.value.elements.length;e++)$d.helpers.objPropertiesAsList(n.value.elements[e],
h.concat([b,e]),f,k);break;case "ObjectExpression":case "ObjectPattern":f||k.push(e);$d.helpers.objPropertiesAsList(n.value,h.concat([b]),f,k);break;case "AssignmentPattern":f||k.push(e);$d.helpers.objPropertiesAsList(n.left,h.concat([b]),f,k);break;default:k.push(e)}}return k},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};$d.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
$d.globalDeclRe=/^\s*global\s*/;$d._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var DL=$d.helpers,rT=$d.knownGlobals;
$d.helpers=DL;$d.helpers=DL;$d.knownGlobals=rT;$d.knownGlobals=rT;$d.scopes=$r;$d.scopes=$r;$d.nodesAtIndex=Du;$d.nodesAtIndex=Du;$d.scopesAtIndex=Gz;$d.scopesAtIndex=Gz;$d.scopeAtIndex=Hz;$d.scopeAtIndex=Hz;$d.scopesAtPos=fC;$d.scopesAtPos=fC;$d.nodesInScopeOf=Ji;$d.nodesInScopeOf=Ji;$d.declarationsOfScope=gC;$d.declarationsOfScope=gC;$d._declaredVarNames=hC;$d._declaredVarNames=hC;$d._findJsLintGlobalDeclarations=mt;$d._findJsLintGlobalDeclarations=mt;$d.topLevelDeclsAndRefs=$o;$d.topLevelDeclsAndRefs=
$o;$d.topLevelFuncDecls=Iz;$d.topLevelFuncDecls=Iz;$d.findGlobalVarRefs=Qm;$d.findGlobalVarRefs=Qm;$d.findNodesIncludingLines=iC;$d.findNodesIncludingLines=iC;$d.findReferencesAndDeclsInScope=nn;$d.findReferencesAndDeclsInScope=nn;$d.findDeclarationClosestToIndex=Qk;$d.findDeclarationClosestToIndex=Qk;$d.nodesAt=Cx;$d.nodesAt=Cx;$d.statementOf=bs;$d.statementOf=bs;$d.resolveReferences=mq;$d.resolveReferences=mq;$d.refWithDeclAt=as;$d.refWithDeclAt=as;$d.imports=Dx;$d.imports=Dx;$d.exports=Fu;$d.exports=
Fu;var Nt=Object.freeze({__proto__:null,helpers:DL,knownGlobals:rT,scopes:$r,nodesAtIndex:Du,scopesAtIndex:Gz,scopeAtIndex:Hz,scopesAtPos:fC,nodesInScopeOf:Ji,declarationsOfScope:gC,_declaredVarNames:hC,_findJsLintGlobalDeclarations:mt,topLevelDeclsAndRefs:$o,topLevelFuncDecls:Iz,findGlobalVarRefs:Qm,findNodesIncludingLines:iC,findReferencesAndDeclsInScope:nn,findDeclarationClosestToIndex:Qk,nodesAt:Cx,statementOf:bs,resolveReferences:mq,refWithDeclAt:as,imports:Dx,exports:Fu});Ba("bC",Nt);var Zq=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");Zq.objectSpreadTransform=on;Zq.Visitor=He;Zq.funcCall=Cu;Zq.member=ew;var EL=function(){return Zq.Visitor.apply(this,arguments)||this};$jscomp.inherits(EL,Zq.Visitor);EL.prototype.accept=function(c,h,f){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return Zq.Visitor.prototype.accept.call(this,c,h,f)};EL.prototype.transformSpreadElement=function(c){var h=[],f=[h];c.properties.forEach(function(k){"SpreadElement"!==
k.type?h.push(k):(f.push(k),h=[],f.push(h))});if(1===f.length)return c;h.length||f.pop();return Zq.funcCall.apply(Zq,[Zq.member("Object","assign")].concat($jscomp.arrayFromIterable(f.map(function(k){return"SpreadElement"===k.type?k.argument:{properties:k,type:"ObjectExpression"}}))))};Zq.ObjectSpreadTransformer=EL;Zq.default=on;var ye=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");ye._node2string=function(c){return c.source||ye.stringify(c)};ye._findIndentAt=function(c,h){var f=
ye.string.peekLeft(c,h,/\s+$/);c="number"===typeof f?c.slice(f,h):"";"\n"===c[0]&&(c=c.slice(1));return c};ye._applyChanges=function(c,h){for(var f=0;f<c.length;f++){var k=c[f];if("del"===k.type)h=h.slice(0,k.pos)+h.slice(k.pos+k.length);else if("add"===k.type)h=h.slice(0,k.pos)+k.string+h.slice(k.pos);else throw Error("Unexpected change "+ye.obj.inspect(k));}return h};ye._compareNodesForReplacement=cs;ye.replaceNode=gw;ye.replaceNodes=Ex;ye.replace=pn;ye.__findVarDecls=Gu;ye.oneDeclaratorPerVarDecl=
jC;ye.oneDeclaratorForVarsInDestructoring=kC;ye.returnLastStatement=lC;ye.wrapInFunction=nq;ye.wrapInStartEndCall=Fx;ye.transformSingleExpression=hw;ye.arr=eg;ye.obj=Ag;ye.string=ti;ye.chain=Ql;ye.Path=$h;ye.helpers=DL;ye.scopes=$r;ye.topLevelDeclsAndRefs=$o;ye.topLevelFuncDecls=Iz;ye.parse=Ri;ye.fuzzyParse=ln;ye.objectSpreadTransform=on;ye.varDecl=Ax;ye.memberChain=Zr;ye.id=Yq;ye.exprStmt=Gf;ye.funcCall=Cu;ye.returnStmt=Va;ye.tryStmt=lq;ye.program=kl;ye.block=Ap;ye.funcExpr=Yr;ye.stringify=tm;ye.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;ye.replaceNode=gw;ye.replaceNode=gw;ye.replaceNodes=Ex;ye.replaceNodes=Ex;ye.replace=pn;ye.replace=pn;ye._compareNodesForReplacement=cs;ye._compareNodesForReplacement=cs;ye.oneDeclaratorPerVarDecl=jC;ye.oneDeclaratorPerVarDecl=jC;ye.oneDeclaratorForVarsInDestructoring=kC;ye.oneDeclaratorForVarsInDestructoring=kC;ye.returnLastStatement=lC;ye.returnLastStatement=lC;ye.wrapInFunction=nq;ye.wrapInFunction=nq;ye.wrapInStartEndCall=Fx;ye.wrapInStartEndCall=Fx;ye.transformSingleExpression=
hw;ye.transformSingleExpression=hw;ye.objectSpreadTransform=on;ye.objectSpreadTransform=on;var XA=Object.freeze({__proto__:null,replaceNode:gw,replaceNodes:Ex,replace:pn,_compareNodesForReplacement:cs,oneDeclaratorPerVarDecl:jC,oneDeclaratorForVarsInDestructoring:kC,returnLastStatement:lC,wrapInFunction:nq,wrapInStartEndCall:Fx,transformSingleExpression:hw,objectSpreadTransform:on});Ba("by",XA);var lg=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");lg.getCommentPrecedingNode=Gx;lg.extractComments=
mC;lg.obj=Ag;lg.string=ti;lg.Path=$h;lg.chain=Ql;lg.arr=eg;lg.fun=Jn;lg.parse=Ri;lg.statementOf=bs;lg.Visitor=He;lg.stringify=tm;lg.getCommentPrecedingNode=Gx;lg.getCommentPrecedingNode=Gx;lg.extractComments=mC;lg.extractComments=mC;var FL=Object.freeze({__proto__:null,getCommentPrecedingNode:Gx,extractComments:mC}),bi=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");bi.findDecls=Jz;bi.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var h={type:"class-decl",
name:c.id.name,node:c,children:[]};h.children.push.apply(h.children,$jscomp.arrayFromIterable(bi.arr.compact(c.body.body.map(function(f,k){return bi.es6ClassMethod(f,h,k)}))));return[h].concat($jscomp.arrayFromIterable(h.children))};bi.es6ClassMethod=function(c,h,f){if("MethodDefinition"!==c.type)return null;var k;"constructor"===c.kind?k="class-constructor":"method"===c.kind?k=c.static?"class-class-method":"class-instance-method":"get"===c.kind?k=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(k=c.static?"class-class-setter":"class-instance-setter");return k?{type:k,parent:h,node:c,name:c.key.name}:null};bi.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var h=[],f={};c=$jscomp.makeIterator(bi.withVarDeclIds(c));for(var k=c.next();!k.done;f={$jscomp$loop$prop$def$2363:f.$jscomp$loop$prop$def$2363},k=c.next())if(k=k.value,f.$jscomp$loop$prop$def$2363={name:k.id.name,node:k.node,type:"var-decl"},h.push(f.$jscomp$loop$prop$def$2363),f.$jscomp$loop$prop$def$2363.node.init){for(k=
f.$jscomp$loop$prop$def$2363.node.init;"AssignmentExpression"===k.type;)k=k.right;if("ObjectExpression"===k.type)f.$jscomp$loop$prop$def$2363.type="object-decl",f.$jscomp$loop$prop$def$2363.children=bi.objectKeyValsAsDefs(k).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2363})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2363.children));else if(k=bi.someObjectExpressionCall(k,f.$jscomp$loop$prop$def$2363))f.$jscomp$loop$prop$def$2363.children=
k.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2363})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2363.children))}return h};bi.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};bi.someObjectExpressionCall=function(c,h){"ExpressionStatement"===c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(f){return"ObjectExpression"===
f.type}))?bi.objectKeyValsAsDefs(c,h):null};bi.functionWrapper=function(c,h){if(!bi.isFunctionWrapper(c))return null;var f=bi.Path("expression.arguments.0").get(c);h=f&&"FunctionExpression"===f.type&&5<bi.string.lines(f.source||"").length?bi.findDecls(f,h):bi.findDecls(bi.Path("expression.callee").get(c),h);var k={node:c,name:bi.Path("expression.callee.id.name").get(c)};h.forEach(function(n){return n.parent||(n.parent=k)});return h};bi.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&
"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};bi.objectKeyValsAsDefs=function(c,h){return c.properties.map(function(f){return{name:f.key.name||f.key.value,type:"FunctionExpression"===f.value.type?"method":"property",node:f,parent:h}})};bi.isFunctionWrapper=function(c){return"CallExpression"===bi.Path("expression.type").get(c)&&"FunctionExpression"===bi.Path("expression.callee.type").get(c)};bi.declIds=Hu;bi.withVarDeclIds=function(c){return c.declarations.map(function(h){!h.source&&
h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};bi.parse=Ri;bi.arr=eg;bi.Path=$h;bi.string=ti;bi.obj=Ag;bi.findDecls=Jz;bi.findDecls=Jz;var JG=Object.freeze({__proto__:null,findDecls:Jz}),Dg=lively.FreezerRuntime.recorderFor("lively.ast/index.js");Dg.isValidIdentifier=$q;Dg.BaseVisitor=He;Dg.BaseVisitor=He;Dg.withMozillaAstDo=VA;Dg.withMozillaAstDo=VA;Dg.printAst=FG;Dg.printAst=FG;Dg.compareAst=GG;Dg.compareAst=GG;Dg.pathToNode=HG;Dg.pathToNode=HG;Dg.rematchAstWithSource=
IG;Dg.rematchAstWithSource=IG;Dg.ReplaceManyVisitor=Ks;Dg.ReplaceManyVisitor=Ks;Dg.ReplaceVisitor=Mt;Dg.ReplaceVisitor=Mt;Dg.AllNodesVisitor=Lt;Dg.AllNodesVisitor=Lt;Dg.parse=Ri;Dg.parse=Ri;Dg.parseFunction=ya;Dg.parseFunction=ya;Dg.fuzzyParse=ln;Dg.fuzzyParse=ln;Dg.acorn=tv;Dg.walk=Kt;Dg.custom=By;Dg.stringify=tm;Dg.escodegen=FD;Dg.escodegen=FD;Dg.escodegen=FD;Dg.acorn=tv;Dg.acorn=tv;Dg.walk=Kt;Dg.walk=Kt;Dg.nodes=Qw;Dg.query=Nt;Dg.transform=XA;Dg.comments=FL;Dg.categorizer=JG;Dg.query=Nt;Dg.query=
Nt;Dg.transform=XA;Dg.transform=XA;Dg.comments=FL;Dg.comments=FL;Dg.categorizer=JG;Dg.categorizer=JG;Dg.stringify=tm;Dg.stringify=tm;Dg.nodes=Qw;Dg.nodes=Qw;Dg.custom=By;Dg.custom=By;Dg.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
Dg.isValidIdentifier=$q;Dg.isValidIdentifier=$q;Dg.parse=Ri;Dg.Node=Dg.parse("").constructor;Object.defineProperty(Dg.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var e5=Object.freeze({__proto__:null,BaseVisitor:He,withMozillaAstDo:VA,printAst:FG,compareAst:GG,pathToNode:HG,rematchAstWithSource:IG,ReplaceManyVisitor:Ks,ReplaceVisitor:Mt,AllNodesVisitor:Lt,parse:Ri,parseFunction:ya,fuzzyParse:ln,escodegen:FD,acorn:tv,walk:Kt,query:Nt,
transform:XA,comments:FL,categorizer:JG,stringify:tm,nodes:Qw,custom:By,isValidIdentifier:$q});Ba("bw",e5);var ci=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");ci.getGlobal=oq;ci.signatureOf=ar;ci.isClass=$E;ci.pluck=ap;ci.printSymbol=nt;ci.safeToString=ds;ci.printEvalResult=br;ci.obj=Ag;ci.string=ti;ci.getGlobal=oq;ci.getGlobal=oq;ci.signatureOf=ar;ci.signatureOf=ar;ci.isClass=$E;ci.isClass=$E;ci.pluck=ap;ci.pluck=ap;ci.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,h){return c.set(Symbol[h],"Symbol."+h)},new Map)}();ci.symMatcher=/^Symbol\((.*)\)$/;ci.printSymbol=nt;ci.printSymbol=nt;ci.safeToString=ds;ci.safeToString=ds;ci.printEvalResult=br;ci.printEvalResult=br;var sT=function(){function c(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||ci.safeToString(n);if(!ci.obj.isObject(n))return ci.safeToString(n);
try{var e=ci.obj.inspect(n,{customPrinter:f,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(m){}return"{}"===e?ci.safeToString(n):e}function h(n,b){if("string"===typeof n||Array.isArray(n)||!k||"function"!==typeof n[k])return b;var e="function"===typeof n.entries,m=e?n.entries():n[k](),a=[];b=e?"{":"[";var g=e?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,r;10>l;l++){r=m.next();if(r.done)break;a.push(r.value)}m=a.map(function(v){return e?String(v[0])+": "+String(v[1]):
c(v,2)}).join(", ");return n+"("+b+m+g+")"}function f(n,b,e){if(!n)return b;if("symbol"===typeof n)return ci.printSymbol(n);if("string"===typeof n)return ci.string.print(ci.string.truncate(n,100));if(n.isMorph)return ci.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return ci.safeToString(n);var m=n.length||n.byteLength;if(void 0!==m&&10<m&&n.slice)return"["+("string"===typeof n||n.byteLength?
ci.safeToString(n.slice(0,10)):n.slice(0,10).map(e))+",...]";n=h(n,b);return n!==b?n:b}var k="undefined"!==typeof Symbol&&Symbol.iterator;return c}();ci.printInspectEvalValue=sT;ci.printInspectEvalValue=sT;ci.printInspectEvalValue=sT;var Si=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");Si.getObjectForCompletion=cr;Si.propertyExtract=function(c,h,f){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(Si.printSymbol)).filter(function(k){return-1===c.indexOf(k)}).map(f).filter(function(k){return!!k}).sort(function(k,
n){return k.name<n.name?-1:k.name>n.name?1:0})};Si.getMethodsOf=function(c,h){return Si.propertyExtract(c,h,function(f){return h.__lookupGetter__&&h.__lookupGetter__(f)||"function"!==typeof h[f]?null:{name:f,completion:Si.signatureOf(f,h[f])}})};Si.getAttributesOf=function(c,h){return Si.propertyExtract(c,h,function(f){return h.__lookupGetter__&&!h.__lookupGetter__(f)&&"function"===typeof h[f]?null:{name:f,completion:f}})};Si.getProtoChain=function(c){for(var h=[];c;)h.push(c),c=c.__proto__;return h};
Si.getDescriptorOf=function(c,h){function f(k,n){k.length>n&&(k=k.slice(0,n)+"...");return k.replace(/\n/g,"").replace(/\s+/g," ")}if(c===h){if("function"!==typeof c)return f(Si.safeToString(c),50);h=c.toString();h=f(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return Si.signatureOf(c.displayName||c.name||"function",c)+" {"+h+"}"}return(c=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof c.type&&c.type.length?f(c.type,50):"string"===typeof c.name&&c.name.length?f(c.name,50):"anonymous class":
"prototype"};Si.getCompletionsOfObj=function(c,h){try{var f=[];var k=Si.getProtoChain(c).map(function(b){var e=Si.getDescriptorOf(c,b);b=Si.getMethodsOf(f,b).concat(Si.getAttributesOf(f,b));f=f.concat(Si.pluck(b,"name"));return[e,Si.pluck(b,"completion")]})}catch(b){var n=b}h(n,k)};Si.descriptorsOfObjAndProtoProperties=function(c){var h=[];return Si.getProtoChain(c).map(function(f){var k=Si.getDescriptorOf(c,f);f=Si.getMethodsOf(h,f).concat(Si.getAttributesOf(h,f));h=h.concat(Si.pluck(f,"name"));
return[k,Si.pluck(f,"completion")]})};Si.getCompletions=iw;Si.lang=T4;Si.signatureOf=ar;Si.pluck=ap;Si.safeToString=ds;Si.printSymbol=nt;Si.getObjectForCompletion=cr;Si.getObjectForCompletion=cr;Si.getCompletions=iw;Si.getCompletions=iw;var KG=Object.freeze({__proto__:null,getObjectForCompletion:cr,getCompletions:iw});Ba("aS",KG);var uc=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");uc.rewriteToCaptureTopLevelVariables=es;uc.transformImportMeta=function(c,h){return uc.ReplaceVisitor.run(c,
function(f){return"MetaProperty"==f.type&&"import"==f.meta.name?uc.parse("({url: _context.id})").body[0].expression:f})};uc.rewriteToRegisterModuleToCaptureSetters=jw;uc.clearEmptyExports=function(c,h){h=uc.topLevelDeclsAndRefs(c);h=$jscomp.makeIterator(h.scope.exportDecls);for(var f=h.next();!f.done;f=h.next())f=f.value,f.declaration||!f.specifiers||f.specifiers.length||uc.arr.remove(c.body,f);return c};uc.replaceRefs=function(c,h){var f=uc.topLevelDeclsAndRefs(c),k=f.refs.filter(function(b){return uc.shouldRefBeCaptured(b,
f,h)}),n=[];c=uc.ReplaceVisitor.run(c,function(b,e){if("Property"===b.type&&k.includes(b.key)&&b.shorthand)return uc.prop(uc.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){e=b.declaration;var m=b.specifiers;e&&(e.id?n.push(e.id):e.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(e.declarations.map(function(a){return a.id}))));m&&m.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&k.includes(b.left)&&h.declarationWrapper?(console.log(b.right),
Object.assign({},b,{right:uc.declarationWrapperCall(h.declarationWrapper,null,uc.literal(b.left.name),uc.literal("assignment"),b.right,h.captureObj,h)})):b});return uc.ReplaceVisitor.run(c,function(b,e,m){return k.includes(b)&&!n.includes(b)?uc.member(h.captureObj,b):b})};uc.replaceVarDecls=function(c,h){var f=uc.topLevelDeclsAndRefs(c);return uc.ReplaceManyVisitor.run(c,function(k){if(!f.varDecls.includes(k)||k.declarations.every(function(l){return!uc.shouldDeclBeCaptured(l,h)}))return k;for(var n=
[],b=0;b<k.declarations.length;b++){var e=k.declarations[b];if(uc.shouldDeclBeCaptured(e,h)){var m=e.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:e.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};m=h.declarationWrapper&&e.id.name?uc.declarationWrapperCall(h.declarationWrapper,e,uc.literal(e.id.name),uc.literal(k.kind),m,h.captureObj,h):m;if(e.id.type.includes("Pattern")){var a=uc.generateUniqueName(f.declaredNames,"destructured_1"),
g={type:"Identifier",name:a};e=uc.transformPattern(e.id,{parent:g,declaredNames:f.declaredNames}).map(function(l){return l[uc.annotationSym]&&l[uc.annotationSym].capture?uc.assignExpr(h.captureObj,l.declarations[0].id,h.declarationWrapper?uc.declarationWrapperCall(h.declarationWrapper,null,uc.literal(l.declarations[0].id.name),uc.literal(k.kind),l.declarations[0].init,h.captureObj,h):l.declarations[0].init,!1):l});f.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([uc.varDecl(g,m,k.kind)].concat(e)))}else n.push(uc.assignExpr(h.captureObj,
e.id,m,!1)),h.keepTopLevelVarDecls&&n.push(uc.varDecl(e.id,uc.member(h.captureObj,e.id)))}else n.push({type:"VariableDeclaration",kind:k.kind||"var",declarations:[e]})}return n})};uc.generateUniqueName=function(c,h){for(var f=1;-1<c.indexOf(h);){if(1E3<f)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++f)}return h};uc.additionalIgnoredDecls=function(c,h){h=uc.topLevelDeclsAndRefs(c);for(var f=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],
b=uc.Path(h.scope.varDeclPaths[k]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(e){return e.name}).concat(f.map(function(e){return e.id.name}))};uc.additionalIgnoredRefs=function(c,h){h=uc.topLevelDeclsAndRefs(c);for(var f=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],b=uc.Path(h.scope.varDeclPaths[k]).slice(0,
-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(e){return e.name}).concat(uc.queryHelpers.declIds(f.map(function(e){return e.id})).map(function(e){return e.name}))};uc.shouldDeclBeCaptured=function(c,h){return-1===h.excludeDecls.indexOf(c.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(c.id.name))};uc.shouldRefBeCaptured=function(c,h,f){if(h.scope.importSpecifiers.includes(c))return!1;
for(var k=0;k<h.scope.exportDecls.length;k++){var n=h.scope.exportDecls[k];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return f.excludeRefs.includes(c.name)||f.includeRefs&&!f.includeRefs.includes(c.name)?!1:!0};uc.replaceClassDecls=function(c,h){if(h.classToFunction)return h.classToFunction.transform(c,h.classToFunction);var f=uc.topLevelDeclsAndRefs(c);if(!f.classDecls.length)return c;for(var k=c.body.length-1;0<=k;k--){var n=c.body[k];n.id&&f.classDecls.includes(n)&&
c.body.splice(k+1,0,uc.assignExpr(h.captureObj,n.id,n.id,!1))}return c};uc.splitExportDeclarations=function(c,h){h=c.body;for(var f=c.body=[],k=0;k<h.length;k++){var n=h[k];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)f.push(n);else for(var b=n.declaration.declarations,e=0;e<b.length;e++)f.push({type:"ExportNamedDeclaration",specifiers:[],declaration:uc.varDecl(b[e].id,b[e].init,n.declaration.kind)})}return c};
uc.insertCapturesForExportedImports=um;uc.insertCapturesForExportDeclarations=function(c,h){for(var f=[],k=0;k<c.body.length;k++){var n=c.body[k];f.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,e=uc.generateUniqueName(uc.topLevelDeclsAndRefs(c).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=uc.id(e);uc.arr.pushAt(f,uc.assignExpr(h.captureObj,
e,b.raw,!1),f.indexOf(n))}else n.declaration.declarations?f.push.apply(f,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(m){var a=m.id;h.declarationWrapper&&(m.init.callee&&m.init.callee.name===h.declarationWrapper.name||(a=uc.declarationWrapperCall(h.declarationWrapper,m,uc.literal(m.id.name),uc.literal("assignment"),m.id,h.captureObj,h)));return uc.assignExpr(h.captureObj,m.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&f.push(uc.assignExpr(h.captureObj,
n.declaration.id,n.declaration.id,!1))}c.body=f;return c};uc.insertCapturesForImportDeclarations=function(c,h){c.body=c.body.reduce(function(f,k){return f.concat("ImportDeclaration"===k.type&&k.specifiers.length?[k].concat(k.specifiers.map(function(n){return uc.assignExpr(h.captureObj,n.local,n.local,!1)})):[k])},[]);return c};uc.insertDeclarationsForExports=function(c,h){for(var f=uc.topLevelDeclsAndRefs(c),k=[],n=0;n<c.body.length;n++){var b=c.body[n];h.classToFunction&&"ExportDefaultDeclaration"===
b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?k=k.concat([uc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:b.declaration,init:uc.member(h.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?k.push(b):k=k.concat(b.specifiers.map(function(e){return f.declaredNames.includes(e.local.name)?null:uc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:e.local,init:uc.member(h.captureObj,
e.local)})}).filter(Boolean)).concat(b)}c.body=k;return c};uc.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,h){h=[];for(var f=0;f<c.body.length;f++){var k=c.body[f];"ExportDefaultDeclaration"===k.type&&"FunctionDeclaration"===k.declaration.type&&k.declaration.id&&k.declaration.async&&(h.push(k.declaration),k.declaration={type:"Identifier",name:k.declaration.id.name});h.push(k)}c.body=h;return c};uc.es6ModuleTransforms=function(c,h){c.body=c.body.reduce(function(f,k){if("ExportNamedDeclaration"===
k.type)if(k.source){var n=e=k.source;var b=k.specifiers.map(function(m){return{type:"ExpressionStatement",expression:uc.exportFromImport({type:"Literal",value:m.exported.name},{type:"Literal",value:m.local.name},e,h.moduleExportFunc,h.moduleImportFunc)}})}else b=k.declaration?(b=k.declaration.declarations)?b.map(function(m){h.excludeDecls.push(m.id);return uc.varDecl(m.id,uc.assignExpr(h.captureObj,m.id,h.declarationWrapper?uc.declarationWrapperCall(h.declarationWrapper,null,uc.literal(m.id.name),
uc.literal(k.declaration.kind),m,h.captureObj,h):m.init,!1),k.declaration.kind)}).concat(b.map(function(m){return uc.exportCallStmt(h.moduleExportFunc,m.id.name,m.id)})):[k.declaration].concat(uc.exportCallStmt(h.moduleExportFunc,k.declaration.id.name,k.declaration.id)):k.specifiers.map(function(m){return uc.exportCallStmt(h.moduleExportFunc,m.exported.name,uc.shouldDeclBeCaptured({id:m.local},h)?uc.member(h.captureObj,m.local):m.local)});else if("ExportDefaultDeclaration"===k.type)b=k.declaration&&
k.declaration.id?[k.declaration].concat(uc.exportCallStmt(h.moduleExportFunc,"default",k.declaration.id)):[uc.exportCallStmt(h.moduleExportFunc,"default",k.declaration)];else if("ExportAllDeclaration"===k.type){n={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var e=k.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",expression:uc.exportFromImport(n,n,e,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",
id:n,init:null}]},right:uc.importCall(null,e,h.moduleImportFunc)}];h.excludeRefs.push(n.name);h.excludeDecls.push(n.name)}else b="ImportDeclaration"===k.type?k.specifiers.length?k.specifiers.map(function(m){return uc.varDeclAndImportCall(c,m.local,"ImportSpecifier"===m.type&&m.imported.name||"ImportDefaultSpecifier"===m.type&&"default"||null,k.source,h.moduleImportFunc)}):uc.importCallStmt(null,k.source,h.moduleImportFunc):[k];return f.concat(b)},[]);return c};uc.putFunctionDeclsInFront=function(c,
h){var f=uc.topLevelDeclsAndRefs(c).scope,k=f.funcDecls;if(!k.length)return c;for(var n=[],b=k.length;b--;){var e=k[b];if(e.id&&uc.shouldDeclBeCaptured(e,h)){var m=f.funcDeclPaths[b].slice(0,-1),a=uc.Path(m).get(f.node);m={type:"Identifier",name:e.id.name};var g=h.declarationWrapper?uc.declarationWrapperCall(h.declarationWrapper,e,uc.literal(m.name),uc.literal("function"),m,h.captureObj,h):m,l=Object.assign({},e);Array.isArray(a)?a.splice(a.indexOf(e),1,uc.exprStmt(e.id)):"ExportNamedDeclaration"===
a.type?(a=f.node.body.indexOf(a),-1<a&&f.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:e.id,local:e.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=e.id);n.unshift(uc.assignExpr(h.captureObj,m,g,!1));n.unshift(l)}}c.body=n.concat(c.body);return c};uc.computeDefRanges=function(c,h){c=uc.topLevelDeclsAndRefs(c);return uc.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(f){return f.id})).reduce(function(f,
k){f[k.id.name]||(f[k.id.name]=[]);f[k.id.name].push({type:k.type,start:k.start,end:k.end});return f},{})};uc.transformPattern=function(c,h){return"ArrayPattern"===c.type?uc.transformArrayPattern(c,h):"ObjectPattern"===c.type?uc.transformObjectPattern(c,h):[]};uc.transformArrayPattern=function(c,h){for(var f=h.declaredNames,k=uc.annotationSym,n=[],b=0;b<c.elements.length;b++){var e=c.elements[b];if("Identifier"===e.type)e=uc.varDecl(e,uc.member(h.parent,uc.id(b),!0)),e[k]={capture:!0},n.push(e);else if("RestElement"===
e.type)e=uc.varDecl(e.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:uc.member(h.parent,uc.id("slice"),!1)}),e[k]={capture:!0},n.push(e);else if("AssignmentPattern"==e.type)e=uc.varDecl(e.left,uc.conditional(uc.binaryExpr(uc.member(h.parent,uc.id(b),!0),"===",uc.id("undefined")),e.right,uc.member(h.parent,uc.id(b),!0))),e[k]={capture:!0},n.push(e);else{var m=uc.id(uc.generateUniqueName(f,h.parent.name+"$"+b)),a=uc.varDecl(m,uc.member(h.parent,b));f.push(m.name);n.push(a);
n.push.apply(n,$jscomp.arrayFromIterable(uc.transformPattern(e,{parent:m,declaredNames:f})))}}return n};uc.transformObjectPattern=function(c,h){for(var f=h.declaredNames,k=uc.annotationSym,n=[],b=0;b<c.properties.length;b++){var e=c.properties[b];if("RestElement"==e.type){var m=c.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),a=uc.nodes.varDecl(e.argument.name,uc.nodes.objectLiteral([])),g=uc.nodes.varDecl(e.argument.name,uc.id(e.argument.name));e=uc.nodes.exprStmt(uc.nodes.funcCall(uc.nodes.funcExpr({},
[],uc.nodes.forIn("__key",h.parent,uc.nodes.block.apply(uc.nodes,[].concat($jscomp.arrayFromIterable(m.length?m.map(function(l){return uc.nodes.ifStmt(uc.nodes.binaryExpr(uc.nodes.id("__key"),"===",uc.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[uc.nodes.exprStmt(uc.nodes.assign(uc.nodes.member(e.argument.name,uc.nodes.id("__key"),!0),uc.nodes.member(h.parent,uc.nodes.id("__key"),!0)))]))))));g[k]={capture:!0};n.push(a,g,e)}else"Identifier"==e.value.type?(a=uc.varDecl(e.value,
uc.member(h.parent,e.key)),a[k]={capture:!0},n.push(a)):"AssignmentPattern"==e.value.type?(a=uc.varDecl(e.value.left,uc.conditional(uc.binaryExpr(uc.member(h.parent,e.key),"===",uc.id("undefined")),e.value.right,uc.member(h.parent,e.key))),a[k]={capture:!0},n.push(a)):(a=uc.id(uc.generateUniqueName(f,h.parent.name+"$"+e.key.name)),g=uc.varDecl(a,uc.member(h.parent,e.key)),g[k]={capture:!1},f.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([g].concat(uc.transformPattern(e.value,{parent:a,declaredNames:f})))))}return n};
uc.varDeclOrAssignment=function(c,h,f){return-1<uc.topLevelDeclsAndRefs(c).declaredNames.indexOf(h.id.name)?uc.exprStmt(uc.assign(h.id,h.init)):{declarations:[h],kind:f||"var",type:"VariableDeclaration"}};uc.assignExpr=function(c,h,f,k){return uc.exprStmt(uc.assign(uc.member(c,h,k),f||uc.id("undefined")))};uc.exportFromImport=function(c,h,f,k,n){return uc.exportCall(k,c,uc.importCall(h,f,n))};uc.varDeclAndImportCall=function(c,h,f,k,n){return uc.varDecl(h,uc.importCall(f,k,n))};uc.importCall=function(c,
h,f){"string"===typeof c&&(c=uc.literal(c));return{arguments:[h].concat(c||[]),callee:f,type:"CallExpression"}};uc.importCallStmt=function(c,h,f){return uc.exprStmt(uc.importCall(c,h,f))};uc.exportCall=function(c,h,f){"string"===typeof h&&(h=uc.literal(h));f=uc.obj.deepCopy(f);return uc.funcCall(c,h,f)};uc.exportCallStmt=function(c,h,f){return uc.exprStmt(uc.exportCall(c,h,f))};uc.declarationWrapperCall=function(c,h,f,k,n,b,e){if(h){var m=[],a=!1;if(h["x-lively-object-meta"]){a=h["x-lively-object-meta"];
h=a.start;var g=a.end,l=a.evalId,r=a.sourceAccessorName;a=!0;m.push("start",uc.nodes.literal(h),"end",uc.nodes.literal(g))}void 0===l&&e.hasOwnProperty("evalId")&&(l=e.evalId,a=!0);void 0===r&&e.hasOwnProperty("sourceAccessorName")&&(r=e.sourceAccessorName,a=!0);void 0!==l&&m.push("evalId",uc.nodes.literal(l));r&&m.push("moduleSource",uc.nodes.id(r));if(a)return uc.funcCall(c,f,k,n,b,uc.nodes.objectLiteral(m))}return uc.funcCall(c,f,k,n,b)};uc.obj=Ag;uc.string=ti;uc.chain=Ql;uc.arr=eg;uc.fun=Jn;uc.Path=
$h;uc.parse=Ri;uc.stringify=tm;uc.query=Nt;uc.transform=XA;uc.nodes=Qw;uc.Visitor=He;uc.ReplaceManyVisitor=Ks;uc.ReplaceVisitor=Mt;var uv=uc.nodes;uc.member=uv.member;uc.prop=uv.prop;uc.varDecl=uv.varDecl;uc.assign=uv.assign;uc.id=uv.id;uc.literal=uv.literal;uc.exprStmt=uv.exprStmt;uc.conditional=uv.conditional;uc.binaryExpr=uv.binaryExpr;uc.funcCall=uv.funcCall;var f5=uc.query;uc.topLevelDeclsAndRefs=f5.topLevelDeclsAndRefs;uc.queryHelpers=f5.helpers;var g5=uc.transform;uc.transformSingleExpression=
g5.transformSingleExpression;uc.wrapInStartEndCall=g5.wrapInStartEndCall;uc.rewriteToCaptureTopLevelVariables=es;uc.rewriteToCaptureTopLevelVariables=es;uc.rewriteToRegisterModuleToCaptureSetters=jw;uc.rewriteToRegisterModuleToCaptureSetters=jw;uc.insertCapturesForExportedImports=um;uc.insertCapturesForExportedImports=um;uc.annotationSym=Symbol("lively.ast-destructuring-transform");var LG=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:es,rewriteToRegisterModuleToCaptureSetters:jw,
insertCapturesForExportedImports:um}),h5={__esModule:!0,default:function(){return{manipulateOptions:function(c,h){h.plugins.push("jsx")}}}},zha=h5=h5["default"],Aha={},i5=Aha=Array.isArray,GL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,j5={};j5="object"==typeof GL&&GL&&GL.Object===Object&&GL;var Bha={},Cha="object"==typeof self&&self&&self.Object===Object&&self,YA=Bha=j5||Cha||Function("return this")(),Dha={},HL=Dha=YA.Symbol,Eha={},k5=Object.prototype,Fha=k5.hasOwnProperty,
Gha=k5.toString,MG=HL?HL.toStringTag:void 0,Hha=Eha=function(c){var h=Fha.call(c,MG),f=c[MG];try{c[MG]=void 0;var k=!0}catch(b){}var n=Gha.call(c);k&&(h?c[MG]=f:delete c[MG]);return n},l5={},Iha=Object.prototype.toString;l5=function(c){return Iha.call(c)};var Jha={},Kha=l5,m5=HL?HL.toStringTag:void 0,tT=Jha=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":m5&&m5 in Object(c)?Hha(c):Kha(c)},Lha={},uT=Lha=function(c){return null!=c&&"object"==typeof c},Mha={},Nha=Mha=function(c){return"string"==
typeof c||!i5(c)&&uT(c)&&"[object String]"==tT(c)},Oha={},vT=Oha=function(c){return c},Pha={},Qha=Pha=function(c){return"symbol"==typeof c||uT(c)&&"[object Symbol]"==tT(c)},Rha={},GD=Rha=function(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},Sha={},Tha=Sha=function(c){if(!GD(c))return!1;c=tT(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},n5={};n5=YA["__core-js_shared__"];var Uha={},wT=n5,o5=function(){var c=/[^.]+$/.exec(wT&&
wT.keys&&wT.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Vha=Uha=function(c){return!!o5&&o5 in c},p5={},Wha=Function.prototype.toString;p5=function(c){if(null!=c){try{return Wha.call(c)}catch(h){}return c+""}return""};var Xha={},Yha=p5,Zha=/^\[object .+?Constructor\]$/,$ha=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aia=Xha=function(c){return!GD(c)||
Vha(c)?!1:(Tha(c)?$ha:Zha).test(Yha(c))},q5={};q5=function(c,h){return null==c?void 0:c[h]};var bia={},cia=q5,r5=bia=function(c,h){c=cia(c,h);return aia(c)?c:void 0},dia={},s5=dia=function(){try{var c=r5(Object,"defineProperty");c({},"",{});return c}catch(h){}}(),eia={},t5=eia=function(c,h){var f=-1,k=c.length;for(h||(h=Array(k));++f<k;)h[f]=c[f];return h},fia={},u5=Object.create,xT=fia=function(){function c(){}return function(h){if(!GD(h))return{};if(u5)return u5(h);c.prototype=h;h=new c;c.prototype=
void 0;return h}}(),gia={},hia=/^(?:0|[1-9]\d*)$/,iia=gia=function(c,h){var f=typeof c;h=null==h?9007199254740991:h;return!!h&&("number"==f||"symbol"!=f&&hia.test(c))&&-1<c&&0==c%1&&c<h},jia={},v5=jia=function(c,h,f){switch(f.length){case 0:return c.call(h);case 1:return c.call(h,f[0]);case 2:return c.call(h,f[0],f[1]);case 3:return c.call(h,f[0],f[1],f[2])}return c.apply(h,f)},w5={};w5=function(c){return function(){return c}};var kia={},lia=w5,mia=kia=s5?function(c,h){return s5(c,"toString",{configurable:!0,
enumerable:!1,value:lia(h),writable:!0})}:vT,nia={},oia=Date.now,x5=nia=function(c){var h=0,f=0;return function(){var k=oia(),n=16-(k-f);f=k;if(0<n){if(800<=++h)return arguments[0]}else h=0;return c.apply(void 0,arguments)}},pia={},qia=pia=x5(mia),ria={},y5=ria=r5(YA,"WeakMap"),sia={},tia=sia=function(c,h){for(var f=-1,k=null==c?0:c.length;++f<k&&!1!==h(c[f],f,c););return c},uia={},z5=0/0,via=/^\s+|\s+$/g,wia=/^[-+]0x[0-9a-f]+$/i,xia=/^0b[01]+$/i,yia=/^0o[0-7]+$/i,zia=parseInt,Aia=uia=function(c){if("number"==
typeof c)return c;if(Qha(c))return z5;GD(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=GD(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=c.replace(via,"");var h=xia.test(c);return h||yia.test(c)?zia(c.slice(2),h?2:8):wia.test(c)?z5:+c},Bia={},Cia=Bia=function(c,h,f,k){var n=c.length;for(f+=k?1:-1;k?f--:++f<n;)if(h(c[f],f,c))return f;return-1},A5={},B5=1/0;A5=function(c){if(!c)return 0===c?c:0;c=Aia(c);return c===B5||c===-B5?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Dia={},Eia=A5,
C5=Dia=function(c){c=Eia(c);var h=c%1;return c===c?h?c-h:c:0},Fia={},Gia=Fia=function(c){return c!==c},D5={};D5=function(c,h,f){--f;for(var k=c.length;++f<k;)if(c[f]===h)return f;return-1};var E5={},Hia=D5;E5=function(c,h,f){return h===h?Hia(c,h,f):Cia(c,Gia,f)};var Iia={},Jia=E5,Kia=Iia=function(c,h){return!(null==c||!c.length)&&-1<Jia(c,h,0)},Lia={},Mia=Lia=function(){},Nia={},yT=Nia=function(){},Kz="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oia={};nC.prototype=
xT(yT.prototype);var zT=Oia=nC.prototype.constructor=nC,aF="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Pia={};kw.prototype=xT(yT.prototype);var F5=Pia=kw.prototype.constructor=kw,G5={};G5=function(c){if(c instanceof zT)return c.clone();var h=new F5(c.__wrapped__,c.__chain__);h.__actions__=t5(c.__actions__);h.__index__=c.__index__;h.__values__=c.__values__;return h};var Qia={},Zaa=zT,IX=F5,Yaa=i5,Xaa=uT,aba=G5,$aa=Object.prototype.hasOwnProperty;oC.prototype=yT.prototype;
var Ria=Qia=oC.prototype.constructor=oC,Sia={},IL=Sia=y5&&new y5,Tia={},H5=Tia=IL?function(c){return IL.get(c)}:Mia,I5={};I5={};var J5={},K5=I5,Uia=Object.prototype.hasOwnProperty;J5=function(c){for(var h=c.name+"",f=K5[h],k=Uia.call(K5,h)?f.length:0;k--;){var n=f[k],b=n.func;if(null==b||b==c)return n.name}return h};var Via={},Wia=J5,Xia=Via=function(c){var h=Wia(c),f=Ria[h];if("function"!=typeof f||!(h in zT.prototype))return!1;if(c===f)return!0;h=H5(f);return!!h&&c===h[0]},Yia={},L5=Yia=IL?function(c,
h){IL.set(c,h);return c}:vT,Zia={},JL=Zia=function(c){return function(){var h=arguments;switch(h.length){case 0:return new c;case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var f=xT(c.prototype);h=c.apply(f,h);return GD(h)?h:f}},KL="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,$ia={},aja=$ia=function(c,h,f){function k(){return((this||KL)&&(this||KL)!==YA&&(this||KL)instanceof k?b:c).apply(n?f:this||KL,arguments)}var n=h&1,b=JL(c);return k},bja={},cja=Math.max,M5=bja=function(c,h,f,k){var n=-1,b=c.length,e=f.length,m=-1,a=h.length,g=cja(b-e,0),l=Array(a+g);for(k=!k;++m<a;)l[m]=h[m];for(;++n<e;)if(k||n<b)l[f[n]]=c[n];for(;g--;)l[m++]=c[n++];return l},dja={},eja=Math.max,N5=dja=function(c,h,f,k){var n=-1,b=c.length,e=-1,m=f.length,
a=-1,g=h.length,l=eja(b-m,0),r=Array(l+g);for(k=!k;++n<l;)r[n]=c[n];for(l=n;++a<g;)r[l+a]=h[a];for(;++e<m;)if(k||n<b)r[l+f[e]]=c[n++];return r},fja={},gja=fja=function(c,h){for(var f=c.length,k=0;f--;)c[f]===h&&++k;return k},hja={},O5=hja=x5(L5),ija={},jja=/\{\n\/\* \[wrapped with (.+)\] \*/,kja=/,? & /,lja=ija=function(c){return(c=c.match(jja))?c[1].split(kja):[]},mja={},nja=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oja=mja=function(c,h){var f=h.length;if(!f)return c;var k=f-1;h[k]=(1<f?"& ":"")+
h[k];h=h.join(2<f?", ":" ");return c.replace(nja,"{\n/* [wrapped with "+h+"] */\n")},P5={},pja=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];P5=function(c,h){tia(pja,function(f){var k="_."+f[0];h&f[1]&&!Kia(c,k)&&c.push(k)});return c.sort()};var qja={},rja=P5,Q5=qja=function(c,h,f){h+="";return qia(c,oja(h,rja(lja(h),f)))},sja={},R5=sja=function(c,h,f,k,n,b,e,m,a,g){var l=h&8;h=(h|(l?32:64))&~(l?64:32);h&4||(h&=-4);
n=[c,h,n,l?b:void 0,l?e:void 0,l?void 0:b,l?void 0:e,m,a,g];f=f.apply(void 0,n);Xia(c)&&O5(f,n);f.placeholder=k;return Q5(f,c,h)},tja={},S5=tja=function(c){return c.placeholder},uja={},vja=Math.min,wja=uja=function(c,h){for(var f=c.length,k=vja(h.length,f),n=t5(c);k--;){var b=h[k];c[k]=iia(b,f)?n[b]:void 0}return c},xja={},LL=xja=function(c,h){for(var f=-1,k=c.length,n=0,b=[];++f<k;){var e=c[f];if(e===h||"__lodash_placeholder__"===e)c[f]="__lodash_placeholder__",b[n++]=f}return b},MI="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yja={},dba=M5,eba=N5,cba=gja,JX=JL,gba=R5,bba=S5,hba=wja,fba=LL,iba=YA,T5=yja=On,ML="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zja={},Aja=zja=function(c,h,f){function k(){for(var b=arguments.length,e=Array(b),m=b,a=S5(k);m--;)e[m]=arguments[m];m=3>b&&e[0]!==a&&e[b-1]!==a?[]:LL(e,a);b-=m.length;return b<f?R5(c,h,T5,k.placeholder,void 0,e,m,void 0,void 0,f-b):v5((this||ML)&&(this||ML)!==YA&&(this||
ML)instanceof k?n:c,this||ML,e)}var n=JL(c);return k},NL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bja={},Cja=Bja=function(c,h,f,k){function n(){for(var m=-1,a=arguments.length,g=-1,l=k.length,r=Array(l+a),v=(this||NL)&&(this||NL)!==YA&&(this||NL)instanceof n?e:c;++g<l;)r[g]=k[g];for(;a--;)r[g++]=arguments[++m];return v5(v,b?f:this||NL,r)}var b=h&1,e=JL(c);return n},U5={},Dja=Math.min;U5=function(c,h){var f=c[1],k=h[1],n=f|k,b=128==k&&8==f||128==k&&256==f&&c[7].length<=
h[8]||384==k&&h[7].length<=h[8]&&8==f;if(!(131>n||b))return c;k&1&&(c[2]=h[2],n|=f&1?0:4);if(f=h[3])b=c[3],c[3]=b?M5(b,f,h[4]):f,c[4]=b?LL(c[3],"__lodash_placeholder__"):h[4];if(f=h[5])b=c[5],c[5]=b?N5(b,f,h[6]):f,c[6]=b?LL(c[5],"__lodash_placeholder__"):h[6];(f=h[7])&&(c[7]=f);k&128&&(c[8]=null==c[8]?h[8]:Dja(c[8],h[8]));null==c[9]&&(c[9]=h[9]);c[0]=h[0];c[1]=n;return c};var V5={},Eja=U5,W5=Math.max;V5=function(c,h,f,k,n,b,e,m){var a=h&2;if(!a&&"function"!=typeof c)throw new TypeError("Expected a function");
var g=k?k.length:0;g||(h&=-97,k=n=void 0);e=void 0===e?e:W5(C5(e),0);m=void 0===m?m:C5(m);g-=n?n.length:0;if(h&64){var l=k,r=n;k=n=void 0}var v=a?void 0:H5(c);b=[c,h,f,k,n,l,r,b,e,m];v&&Eja(b,v);c=b[0];h=b[1];f=b[2];k=b[3];n=b[4];m=b[9]=void 0===b[9]?a?0:c.length:W5(b[9]-g,0);!m&&h&24&&(h&=-25);f=h&&1!=h?8==h||16==h?Aja(c,h,m):32!=h&&33!=h||n.length?T5.apply(void 0,b):Cja(c,h,f,k):aja(c,h,f);return Q5((v?L5:O5)(f,b),c,h)};var Fja={},Gja=V5,Hja=Fja=function(c,h,f){h=f?void 0:h;h=c&&null==h?c.length:
h;return Gja(c,128,void 0,void 0,void 0,void 0,h)},AT={};Object.defineProperty(AT,"__esModule",{value:!0});AT.default=function(c){var h=c.types,f=function(n){return function(b){var e=n[b.type];if(e)return e(b);throw Error(b.type+" could not be transformed");}},k=function(n,b){var e=b.opts;b=e.useNew;var m=void 0===b?!1:b;b=e.module;var a=e.function;e=e.useVariables;var g=void 0===e?!1:e,l=e=void 0;!0===g?e=/^[A-Z]/:(0,Ija.default)(g)&&(e=new RegExp(g));var r=m?h.newExpression:h.callExpression;l=function(v){return function(y){return r(v,
[y])}};b?(m=n.scope.generateUidIdentifier(m?"JSXNode":"jsx"),l=l(m),b=h.importDeclaration([h.importDefaultSpecifier(m)],h.stringLiteral(b)),n.findParent(function(v){return v.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,X5.default)(h.identifier,1)).reduce((0,X5.default)(h.memberExpression,2)),l=l(n)):l=Jja.default;return{variablesRegex:e,jsxObjectTransformer:l}};return{inherits:zha,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",k(n,b));var e=b.get("jsxConfig"),
m=e.variablesRegex,a=e.jsxObjectTransformer,g=function(I){return h.stringLiteral(I.name)},l=function(I){return h.stringLiteral(I.namespace.name+":"+I.name.name)},r=f({JSXIdentifier:function(I){return h.identifier(I.name)},JSXMemberExpression:function(I){return h.memberExpression(r(I.object),r(I.property))}}),v=f({JSXIdentifier:m?function(I){return m.test(I.name)?h.identifier(I.name):g(I)}:g,JSXNamespacedName:l,JSXMemberExpression:r});e=function(I){return I.expression};var y=f({JSXIdentifier:g,JSXNamespacedName:l,
JSXMemberExpression:r}),A=f({StringLiteral:function(I){return I},JSXExpressionContainer:e}),E=function(I){var M=[],N=[];I.forEach(function(X){switch(X.type){case "JSXAttribute":M||(M=[]);var W=y(X.name);W=Kja.default.keyword.isIdentifierNameES6(W.value)?h.identifier(W.value):W;M.push(h.objectProperty(W,A(X.value)));break;case "JSXSpreadAttribute":M&&(N.push(h.objectExpression(M)),M=null);N.push(X.argument);break;default:throw Error(X.type+" cannot be used as a JSX attribute");}});M&&0<M.length&&N.push(h.objectExpression(M));
return 0===N.length?h.objectExpression([]):1===N.length?N[0]:h.callExpression(b.addHelper("extends"),N)};l=function(I){return a(h.objectExpression([h.objectProperty(h.identifier(Lja),v(I.openingElement.name)),h.objectProperty(h.identifier(Mja),E(I.openingElement.attributes)),h.objectProperty(h.identifier(Nja),I.closingElement?H(I.children):h.nullLiteral())]))};var F=f({JSXText:function(I){if(b.opts.noTrim)return h.stringLiteral(I.value);I=I.value.replace(/\n\s*/g,"");return""===I?null:h.stringLiteral(I)},
JSXElement:l,JSXExpressionContainer:e}),H=function(I){return h.arrayExpression(I.map(F).filter(Boolean).reduce(function(M,N){var X=0<M.length?M[M.length-1]:null;return"StringLiteral"===N.type&&X&&"StringLiteral"===X.type?[].concat(Lz(M.slice(0,-1)),[h.stringLiteral(X.value+N.value)]):[].concat(Lz(M),[N])},[]))};n.replaceWith(l(n.node))}}}};var Ija=lw(Nha),Jja=lw(vT),X5=lw(Hja),Kja=lw(AG),Lja="elementName",Mja="attributes",Nja="children",NG={};Object.defineProperty(NG,"__esModule",{value:!0});NG.declare=
function(c){return function(h,f,k){h.assertVersion||(h=Object.assign(bF(h),{assertVersion:function(n){var b=h.version;if("number"===typeof n){if(!Number.isInteger(n))throw Error("Expected string or integer value.");n="^"+n+".0.0-0"}if("string"!==typeof n)throw Error("Expected string or integer value.");var e=Error.stackTraceLimit;"number"===typeof e&&25>e&&(Error.stackTraceLimit=25);var m="7."===b.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+b+"\". You'll need to update your @babel/core version."):
Error('Requires Babel "'+n+'", but was loaded with "'+b+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');"number"===typeof e&&(Error.stackTraceLimit=e);throw Object.assign(m,{code:"BABEL_VERSION_UNSUPPORTED",version:b,range:n});}}));return c(h,f||{},k)}};
var ZA={};Object.defineProperty(ZA,"__esModule",{value:!0});ZA.default=void 0;var Oja=(0,NG.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(h,f){f.plugins.push("optionalCatchBinding")}}});ZA.default=Oja;var OL={};Object.defineProperty(OL,"__esModule",{value:!0});OL.default=void 0;var Pja=ZA&&ZA.__esModule?ZA:{default:ZA},Qja=(0,NG.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:Pja.default,
visitor:{CatchClause:function(h){if(!h.node.param){var f=h.scope.generateUidIdentifier("unused");h.get("param").replaceWith(f)}}}}});OL.default=Qja;var PL={};Object.defineProperty(PL,"__esModule",{value:!0});PL.default=void 0;var Rja=(0,NG.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(h,f){f.plugins.push("importMeta")}}});PL.default=Rja;var hk=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");hk.ensureJSXPlugin=function(){hk.transformJSX&&
("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",hk.transformJSX.default))};hk.ensureOptionalCatchBinding=function(){hk.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",hk.catchBinding.default))};hk.ensureImportMeta=function(){hk.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",hk.importMeta.default))};hk.stringifyFunctionWithoutToplevelRecorder=mw;hk.es5Transpilation=Iu;hk.capturing=LG;hk.capturing=LG;hk.capturing=LG;hk.parseFunction=ya;hk.stringify=tm;hk.ReplaceVisitor=Mt;hk.transformJSX=AT;hk.catchBinding=OL;hk.importMeta=PL;hk.stringifyFunctionWithoutToplevelRecorder=mw;hk.stringifyFunctionWithoutToplevelRecorder=mw;hk.es5Transpilation=Iu;hk.es5Transpilation=Iu;var Sja=Object.freeze({__proto__:null,
capturing:LG,stringifyFunctionWithoutToplevelRecorder:mw,es5Transpilation:Iu}),Sg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");Sg.processInlineCodeTransformOptions=function(c,h){if(!c.comments)return h;c=c.comments.find(function(k){return k.text.startsWith("lively.vm ")});if(!c)return h;try{var f=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(h,f)}catch(k){return h}};Sg.evalCodeTransform=bp;Sg.evalCodeTransformOfSystemRegisterSetters=Cp;Sg.copyProperties=
function(c,h,f){f=void 0===f?[]:f;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(k){return-1===f.indexOf(k)&&Object.defineProperty(h,k,Object.getOwnPropertyDescriptor(c,k))})};Sg.arr=eg;Sg.Path=$h;Sg.parse=Ri;Sg.stringify=tm;Sg.transform=XA;Sg.query=Nt;Sg.nodes=Qw;Sg.capturing=LG;Sg.es5Transpilation=Iu;Sg.getGlobal=oq;var QL=Sg.nodes;Sg.id=QL.id;Sg.literal=QL.literal;Sg.member=QL.member;Sg.objectLiteral=QL.objectLiteral;Sg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
Sg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Sg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Sg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Sg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Sg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Sg.evalCodeTransform=bp;Sg.evalCodeTransform=bp;Sg.evalCodeTransformOfSystemRegisterSetters=Cp;Sg.evalCodeTransformOfSystemRegisterSetters=Cp;var dh=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
dh._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,runtime:null,context:dh.getGlobal(),varRecorderName:dh.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var h=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];h&&(c=Object.assign(c,h))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:dh.startEvalFunctionName},computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:dh.endEvalFunctionName},computed:!0});return c};dh.runEval=fs;dh.finishEval=function(c,h,f,k,n,b,e){k.wrapInStartEndCall&&(delete n[dh.startEvalFunctionName],delete n[dh.endEvalFunctionName]);c?(f.isError=!0,f.value=c):f.value=h;f.value instanceof Promise&&(f.isPromise=
!0);if(k.sync){if(f.processSync(k),"function"===typeof k.onEndEval)k.onEndEval(c,h)}else f.process(k).then(function(){"function"===typeof e&&e(null,f);"function"===typeof k.onEndEval&&k.onEndEval(c,h);return f},function(m){"function"===typeof e&&e(m,void 0);"function"===typeof k.onEndEval&&k.onEndEval(m,void 0);return f}).then(b.resolve,b.reject)};dh.syncEval=Mz;dh.tryToWaitForPromise=function(c,h){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var f={},k=new Promise(function(n){return setTimeout(n,
h,f)});return Promise.race([k,c.value]).then(function(n){return Object.assign(c,n!==f?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",promisedValue:n})})};dh.arr=eg;dh.obj=Ag;dh.string=ti;dh.Path=$h;dh.promise=ph;dh.Closure=Qj;dh.evalCodeTransform=bp;dh.printEvalResult=br;dh.getGlobal=oq;dh.defaultTopLevelVarRecorderName="__lvVarRecorder";dh.startEvalFunctionName="lively.vm-on-eval-start";dh.endEvalFunctionName=
"lively.vm-on-eval-end";dh._eval=dh.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var OG=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};OG.prototype.addWarning=function(c){this.warnings.push(c);return c};OG.prototype.printed=function(c){c=void 0===c?{}:c;this.value=dh.printEvalResult(this,
c)};OG.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};OG.prototype.process=function(c){var h=this;if(h.isPromise&&c.waitForPromise)return dh.tryToWaitForPromise(h,c.promiseTimeout).then(function(){(c.inspect||c.asString)&&h.printed(c);return h});(c.inspect||c.asString)&&h.printed(c);return Promise.resolve(h)};dh.EvalResult=OG;var HD=dh.defaultTopLevelVarRecorderName;dh.defaultTopLevelVarRecorderName=HD;dh.defaultTopLevelVarRecorderName=
HD;dh.getGlobal=oq;dh.getGlobal=oq;dh.runEval=fs;dh.runEval=fs;dh.syncEval=Mz;dh.syncEval=Mz;var Tja=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:HD,getGlobal:oq,runEval:fs,syncEval:Mz}),xi=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");xi.ensureImportsAreImported=function(c,h,f){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=xi.parse(h),n=k.body,b=n.filter(function(m){return"ImportDeclaration"===m.type}),e.yield(Promise.all(b.map(function(m){return c.normalize(m.source.value,
f).then(function(a){m.source.value=a;return c.get(a)||c.import(a)})})).catch(function(m){console.error("Error ensuring imports: "+m.message);throw m;}),2)):e.return(xi.stringify(k))})};xi.hasUnimportedImports=function(c,h,f){h=xi.parse(h).body.filter(function(k){return"ImportDeclaration"===k.type});return 0<xi.arr.uniq(h.map(function(k){return k.source.value})).filter(Boolean).filter(function(k){return!c.get(c.decanonicalize(k,f))}).length};xi.babelTranspilerForAsyncAwaitCode=function(c,h,f,k){return function(n,
b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,code:!0,ast:!1},b);n=h.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};xi.babelPluginTranspilerForAsyncAwaitCode=function(c,h,f,k){return function(n,b){var e=c.babelOptions||{},m=[];m.push(h.presetES2015);e.stage3&&m.push({plugins:h.pluginsStage3});e.stage2&&m.push({plugins:h.pluginsStage2});e.stage1&&m.push({plugins:h.pluginsStage1});b=Object.assign({sourceMap:void 0,
inputSourceMap:void 0,filename:f,babelrc:!1,presets:m,moduleIds:!1,code:!0,ast:!1},b);n=h.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};xi.getEs6Transpiler=function(c,h,f){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===c.transpiler){var k=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return k?xi.babelTranspilerForAsyncAwaitCode(c,k,h.targetModule,f):c.import(c.transpiler).then(function(e){return xi.babelTranspilerForAsyncAwaitCode(c,
e,h.targetModule,f)})}if("plugin-babel"===c.transpiler){k=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var n=c.get(k);return n?xi.babelPluginTranspilerForAsyncAwaitCode(c,n,h.targetModule,f):c.import(k).then(function(e){return xi.babelPluginTranspilerForAsyncAwaitCode(c,e,h.targetModule,f)})}if("lively.transpiler"===c.transpiler){var b=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,h.targetModule,f);return function(e,m){return b.transpileDoit(e,
m)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};xi.runEval=dr;xi.evalEnd=function(c,h,f,k){c.get("@lively-env").evaluationEnd(f.targetModule);c.debug&&console.log("[lively.module] runEval in module "+f.targetModule+" done");xi.emit("lively.vm/doitresult",{code:h,result:k,waitForPromise:f.waitForPromise,targetModule:f.targetModule},Date.now(),c);return k};xi.parse=Ri;xi.nodes=Qw;xi.stringify=tm;xi.emit=gs;var RL=xi.nodes;xi.funcCall=RL.funcCall;xi.member=
RL.member;xi.id=RL.id;xi.literal=RL.literal;xi.arr=eg;xi.vmRunEval=fs;xi.runEval=dr;xi.runEval=dr;var Uja=Object.freeze({__proto__:null,runEval:dr}),uk=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");uk.obj=Ag;var ID=function(){};ID.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("runEval(source, options) not yet implemented for "+f.constructor.name))})};ID.prototype.keysOfObject=function(c,
h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+f.constructor.name))})};uk.EvalStrategy=ID;var $A=function(){return uk.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits($A,uk.EvalStrategy);$A.prototype.runEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(k){return{isError:!0,
value:k}}}))})};$A.prototype.keysOfObject=function(c,h){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return f.runEval(b,h)},c),2);k=n.yieldResult;return n.return({completions:k.completions,prefix:k.startLetters})})};uk.SimpleEvalStrategy=$A;var Cy=function(){return uk.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Cy,uk.EvalStrategy);Cy.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");
return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};Cy.prototype.runEval=function(c,h){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=f.normalizeOptions(h);k=h.System||lively.modules.System;n={};k.config({meta:(n[h.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(c,h))})};Cy.prototype.keysOfObject=function(c,h){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,
h)},c),2);f=k.yieldResult;return k.return({completions:f.completions,prefix:f.startLetters})})};uk.LivelyVmEvalStrategy=Cy;var Dy=function(){return uk.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Dy,uk.LivelyVmEvalStrategy);Dy.prototype.sourceForRemote=function(c,h,f){var k=uk.obj.isString(f.context)?f.context:!1;f=uk.obj.dissoc(f,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(h)+",\n      options = "+JSON.stringify(f)+
';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+k+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};Dy.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(f.remoteEval(f.sourceForRemote("eval",c,h),h))})};Dy.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(f.remoteEval(f.sourceForRemote("keysOfObject",
c,h),h))})};Dy.prototype.remoteEval=function(c,h){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(f.basicRemoteEval(c,h),4);if(2!=b.nextAddress)return k=b.yieldResult,b.return("string"===typeof k?JSON.parse(k):k);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(k||n)})})};Dy.prototype.basicRemoteEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Not yet implemented");
})};uk.RemoteEvalStrategy=Dy;var vv=function(c){var h=uk.RemoteEvalStrategy.call(this)||this;h.url=c||h.constructor.defaultURL;return h};$jscomp.inherits(vv,uk.RemoteEvalStrategy);vv.prototype.normalizeOptions=function(c){c=uk.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};vv.prototype.basicRemoteEval=function(c,h){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(h=f.normalizeOptions(h),
k="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(f[k]({method:"POST",body:c},h.serverEvalURL),2)):n.return(n.yieldResult)})};vv.prototype.basicRemoteEval_web=function(c,h){var f,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:f=$jscomp.makeIterator(h.match(/[^:]+:\/\/[^\/]+/)||[h]);k=f.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==k)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(h,c),4);case 4:e=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw m=a.enterCatchBlock(),Error("Cannot reach server at "+h+": "+m.message);case 3:if(!e.ok)throw Error("Server at "+h+": "+e.statusText);return a.return(e.text())}})};vv.prototype.basicRemoteEval_node=function(c,h){var f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){f=System._nodeRequire("url").parse;
k=System._nodeRequire(h.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},f(h));return b.return(new Promise(function(e,m){var a=k.request(n,function(g){g.setEncoding("utf8");var l="";g.on("data",function(r){return l+=r});g.on("end",function(){return e(l)});g.on("error",function(r){return m(r)})});a.on("error",function(g){return m(g)});a.end(c.body)}))})};$jscomp.global.Object.defineProperties(vv,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
uk.HttpEvalStrategy=vv;var JD=function(c,h){var f=uk.RemoteEvalStrategy.call(this)||this;f.l2lClient=c;f.targetId=h;return f};$jscomp.inherits(JD,uk.RemoteEvalStrategy);JD.prototype.basicRemoteEval=function(c,h){var f=this,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k=f,n=k.l2lClient,b=k.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:c},{ackTimeout:h.ackTimeout||3500}),2);e=a.yieldResult;(m=e.data)&&m.value&&m.value.isEvalResult&&(m=
m.value);return a.return(m)})};uk.L2LEvalStrategy=JD;uk.EvalStrategy=ID;uk.EvalStrategy=ID;uk.SimpleEvalStrategy=$A;uk.SimpleEvalStrategy=$A;uk.LivelyVmEvalStrategy=Cy;uk.LivelyVmEvalStrategy=Cy;uk.HttpEvalStrategy=vv;uk.HttpEvalStrategy=vv;uk.L2LEvalStrategy=JD;uk.L2LEvalStrategy=JD;var PG=Object.freeze({__proto__:null,RemoteEvalStrategy:Dy,EvalStrategy:ID,SimpleEvalStrategy:$A,LivelyVmEvalStrategy:Cy,HttpEvalStrategy:vv,L2LEvalStrategy:JD});Ba("bB",PG);var ul=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
ul.runEval=vm;ul.syncEval=pq;ul.completions=KG;ul.completions=KG;ul.completions=KG;ul.globalEval=Tja;ul.esmEval=Uja;ul.defaultTopLevelVarRecorderName=HD;ul.defaultTopLevelVarRecorderName=HD;ul.defaultClassToFunctionConverterName="initializeES6ClassForLively";ul.defaultClassToFunctionConverterName="initializeES6ClassForLively";ul.evalCodeTransform=bp;ul.evalCodeTransform=bp;ul.evalCodeTransformOfSystemRegisterSetters=Cp;ul.evalCodeTransformOfSystemRegisterSetters=Cp;ul.runEval=vm;ul.runEval=vm;ul.syncEval=
pq;ul.syncEval=pq;ul.evalStrategies=PG;ul.evalStrategies=PG;ul.evalStrategies=PG;var Y5=Object.freeze({__proto__:null,completions:KG,defaultTopLevelVarRecorderName:HD,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:bp,evalCodeTransformOfSystemRegisterSetters:Cp,runEval:vm,syncEval:pq,evalStrategies:PG});Ba("bA",Y5);var bj=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");bj.string=ti;bj.arr=eg;bj.parse=Ri;bj.query=Nt;bj.runEval=vm;bj.objMetaSym=
Symbol.for("lively-object-meta");bj.moduleSym=Symbol.for("lively-module-meta");bj.descriptorCache=new Map;var KD=function(c,h){c&&h?this.update(h,c):this.reset()};KD.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};KD.prototype.update=function(c,h){this._moduleSource===c&&h&&this._sourceLocation&&h.start===this._sourceLocation.start&&h.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=h)};KD.prototype.changeSource=function(c){var h=this.moduleSource,f=this.sourceLocation,k=f.start;f=f.end;h=h.slice(0,k)+c+h.slice(f);this.update(h,{start:k,end:k+c.length});this._source=c;return this};KD.prototype.toString=function(){var c=bj.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(KD.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=bj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
bj.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=bj.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=bj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=bj.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,f=bj.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=bj.arr.withoutAll(h,f);c=bj.arr.withoutAll(bj.query.findGlobalVarRefs(c).map(function(n){return n.name}),
h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:k,undeclaredNames:c}}}});bj.SourceDescriptor=KD;var Fq=function(c,h){this.obj=c;this.System=h;this.reset()};Fq.forObjectWithModuleSource=function(c,h,f){c=this.for(c,f);c.ensureSourceDescriptor(c.sourceLocation,h);return c};Fq.for=function(c,h){var f=bj.descriptorCache.get(c);f||(f=new this(c,h),bj.descriptorCache.set(c,f));return f};Fq.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};Fq.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};Fq.prototype.changeSourceSync=function(c){var h=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=bj.runEval(c,{sync:!0,targetModule:this.module.id,System:h});if(c.isError)throw c.value;return this};Fq.prototype.changeSource=
function(c){var h=this,f,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(f=h,k=f.module,n.yield(k.changeSourceAction(function(b){if(b!==h.moduleSource)throw Error("source of module "+k.id+" and source of "+h+" don't match");h._basicChangeSource(c);return h.moduleSource}),2)):n.return(h)})};Fq.prototype._modifiedSource=function(c){var h=this.moduleSource,f=this.sourceLocation,k=f.start;f=f.end;return{moduleSource:h.slice(0,k)+c+h.slice(f),sourceLocation:{start:k,
end:k+c.length}}};Fq.prototype._renamedSource=function(c){var h=this.ast,f=h.type,k=h.id;h=k.start;k=k.end;if("ClassDeclaration"!==f)throw Error("Don't know how to rename "+f);return this._modifiedSource(this.source.slice(0,h)+c+this.source.slice(k))};Fq.prototype._basicChangeSource=function(c){var h=this.meta,f=this._modifiedSource(c),k=f.moduleSource;f=f.sourceLocation;this.reset();this.meta=Object.assign({},h,{moduleSource:k},f);this._sourceLocation=f;this._moduleSource=k;this._source=c;return this};
Fq.prototype.toString=function(){var c=bj.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var h=this.module.shortName()}catch(f){h="NO MODULE!"}return this.constructor.name+"("+c+" in "+h+")"};$jscomp.global.Object.defineProperties(Fq.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,h=this.System;if(!c[bj.moduleSym])throw Error("runtime object of source descriptor has no module data");
var f=c[bj.moduleSym];c=f.package.name;f=f.pathInPackage;c=f.includes("://")?f:c+"/"+f;h=this.System._scripting.module(h,c);h._frozenModule||h._source||!this.moduleSource||h.setSource(this.moduleSource);return h}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[bj.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[bj.objMetaSym]},set:function(c){this.obj[bj.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,h=c.start;c=c.end;if(void 0===h||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:h,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=bj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=bj.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=bj.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=bj.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,f=bj.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=bj.arr.withoutAll(h,f);
c=bj.arr.withoutAll(bj.query.findGlobalVarRefs(c).map(function(n){return n.name}),h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:k,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=bj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});Ba("bL",Fq);bj.RuntimeSourceDescriptor=Fq;var Hf=lively.FreezerRuntime.recorderFor("lively.classes/util.js");Hf.superclasses=Ju;Hf.getClassHierarchy=
Pn;Hf.withSuperclasses=Ku;Hf.inheritsFrom=rC;Hf.changeClass=qn;Hf.isClass=Lu;Hf.lexicalClassMembers=qq;Hf.runtimeClassMembers=sC;Hf.runtimeClassMembersInProtoChain=function(c){return Hf.arr.uniq(Hf.arr.flatmap(Hf.arr.without(Hf.withSuperclasses(c),Object),function(h){return Hf.runtimeClassMembers(h)}))};Hf.runtimeNonStaticMembers=function(c){var h=c.prototype,f=Hf.obj.getOwnPropertyDescriptors(h);return Hf.arr.withoutAll(Object.keys(f),["constructor"]).map(function(k){var n=f[k],b="function"===typeof n.value?
"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:k,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:h}})};Hf.runtimeNonstaticClassMembersInProtoChain=function(c){return Hf.arr.uniq(Hf.arr.flatmap(Hf.arr.without(Hf.withSuperclasses(c),Object),function(h){return Hf.runtimeNonStaticMembers(h)}))};Hf.runtimeStaticClassMembers=ot;Hf.runtimeStaticClassMembersInProtoChain=nw;Hf.arr=eg;Hf.obj=Ag;Hf.Path=$h;Hf.RuntimeSourceDescriptor=Fq;Hf.superclasses=Ju;
Hf.superclasses=Ju;var SL=Symbol.for("lively-instance-initialize");Hf.initializeSymbol=SL;Hf.initializeSymbol=SL;Hf.initializeSymbol=SL;var BT=Symbol.for("lively-instance-restorer");Hf.instanceRestorerSymbol=BT;Hf.instanceRestorerSymbol=BT;Hf.instanceRestorerSymbol=BT;var TL=Symbol.for("lively-instance-superclass");Hf.superclassSymbol=TL;Hf.superclassSymbol=TL;Hf.superclassSymbol=TL;var UL=Symbol.for("lively-module-meta");Hf.moduleMetaSymbol=UL;Hf.moduleMetaSymbol=UL;Hf.moduleMetaSymbol=UL;var VL=
Symbol.for("lively-object-meta");Hf.objMetaSymbol=VL;Hf.objMetaSymbol=VL;Hf.objMetaSymbol=VL;var WL=Symbol.for("lively-klass-changes-subscriber");Hf.moduleSubscribeToToplevelChangesSym=WL;Hf.moduleSubscribeToToplevelChangesSym=WL;Hf.moduleSubscribeToToplevelChangesSym=WL;Hf.getClassHierarchy=Pn;Hf.getClassHierarchy=Pn;Hf.withSuperclasses=Ku;Hf.withSuperclasses=Ku;Hf.inheritsFrom=rC;Hf.inheritsFrom=rC;Hf.changeClass=qn;Hf.changeClass=qn;Hf.isClass=Lu;Hf.isClass=Lu;Hf.lexicalClassMembers=qq;Hf.lexicalClassMembers=
qq;Hf.runtimeClassMembers=sC;Hf.runtimeClassMembers=sC;Hf.runtimeStaticClassMembers=ot;Hf.runtimeStaticClassMembers=ot;Hf.runtimeStaticClassMembersInProtoChain=nw;Hf.runtimeStaticClassMembersInProtoChain=nw;var CT=Ba("bM",function(){function c(e){return e.replace(b,function(m,a){return a[a.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
f={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},k={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(e){return f[e]||"ASCII_"+e.charCodeAt(0)},b=/([\s-]+.)/g;return function(e){e=c(e);return 0<=h.indexOf(e)?e:0===e.length?"_null_":e.replace(/^\d/,function(m){return k[m]}).replace(/[^\w\$_]/g,n)}}());Hf.toJsIdentifier=CT;Hf.toJsIdentifier=CT;Hf.toJsIdentifier=CT;var kj=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
kj.hasManagedProperties=function(c){return c.hasOwnProperty(kj.defaultPropertiesKey)};kj.prepareClassForManagedPropertiesAfterCreation=hs;kj.prepareClassForProperties=function(c,h,f){kj.ensurePropertyInitializer(c);var k=h.valueStoreProperty,n=h.defaultGetter,b=h.defaultSetter,e=c.prototype;Object.keys(f).forEach(function(m){var a=f[m],g=e.hasOwnProperty(m)&&e.__lookupGetter__(m);if(!g||g._wasGenerated)g=a.get||"function"===typeof n&&function(){return n.call(this,m)}||function(){return this[k][m]},
g._wasGenerated=!0,e.__defineGetter__(m,g);g=e.hasOwnProperty(m)&&e.__lookupSetter__(m);if(!g||g._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(l){b.call(this,m,l)}||function(l){this[k][m]=l},a._wasGenerated=!0,e.__defineSetter__(m,a)})};kj.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,f=h[kj.propertiesAndSettingsCacheSym];
if(f)if(f.classHierarchy!=kj.getClassHierarchy(h)){var k=kj.propertiesAndSettingsInHierarchyOf(h);f=k.properties;k=k.propertySettings;h[kj.propertiesAndSettingsCacheSym]={properties:f,propertySettings:k,order:kj.obj.sortKeysWithBeforeAndAfterConstraints(f),classHierarchy:kj.getClassHierarchy(h)};kj.prepareClassForProperties(h,k,f)}else return f;return h[kj.propertiesAndSettingsCacheSym]||kj.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(h){var f=this.propertiesAndPropertySettings();kj.prepareInstanceForProperties(this,f.propertySettings,f.properties,h,f.order);return this}})};kj.propertiesAndSettingsInHierarchyOf=function(c){for(var h=Object.assign({},kj.defaultPropertySettings),f={},k=kj.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=kj.obj.valuesInPropertyHierarchy(c,"properties"),b=0;b<k.length;b++){var e=k[b];e&&"object"===typeof e&&Object.assign(h,e)}for(b=0;b<n.length;b++)if(k=
n[b],"object"!==typeof k)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+k);else for(var m in k)f.hasOwnProperty(m)?Object.assign(f[m],k[m]):f[m]=k[m];return{properties:f,propertySettings:h}};kj.prepareInstanceForProperties=function(c,h,f,k,n){var b=h.valueStoreProperty;n=n||kj.obj.sortKeysWithBeforeAndAfterConstraints(f);h=[];var e={};c.hasOwnProperty(b)||(c[b]={});for(var m=0;m<n.length;m++){var a=n[m],g=f[a],l=g.derived,r=!!g.foldable,v=g.hasOwnProperty("defaultValue")?
g.defaultValue:void 0;Array.isArray(v)&&(v=v.slice());l||r||(c[b][a]=v);var y=void 0;g.hasOwnProperty("initialize")?(y=e[a]={initialize:v},h.push(a)):l&&void 0!==v?(y=e[a]={derived:v},h.push(a)):r&&void 0!==v&&(y=e[a]={folded:v},h.push(a));k&&a in k&&(g.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+c+", skipping setting value"):(y||(y=e[a]={},h.push(a)),y.value=k[a]))}for(m=0;m<h.length;m++)k=h[m],n=e[k],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(f[k].initialize.call(c,
b?n.value:n.initialize),b&&(c[k]=n.value)):n.hasOwnProperty("derived")?c[k]=b?n.value:n.derived:n.hasOwnProperty("folded")?c[k]=b?n.value:n.folded:b&&(c[k]=n.value)};kj.obj=Ag;kj.getClassHierarchy=Pn;kj.defaultPropertiesSettingKey="propertySettings";kj.defaultPropertiesKey="properties";kj.defaultInstanceInitializerMethod="initializeProperties";kj.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");kj.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
kj.prepareClassForManagedPropertiesAfterCreation=hs;kj.prepareClassForManagedPropertiesAfterCreation=hs;var mg=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");mg.adoptObject=rq;mg.setSuperclass=Mu;mg.installValueDescriptor=function(c,h,f){f=Object.assign(f,mg.defaultPropertyDescriptorForValue);f.value.displayName=f.key;if(f.needsDeclaringClass){var k=f.value.originalFunction||f.value;f.value=Object.assign(function(){return k.call.apply(k,[this,h].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:k,toString:function(){return k.toString()},displayName:f.key})}Object.defineProperty(c,f.key,f)};mg.installGetterSetterDescriptor=function(c,h){h=Object.assign(h,mg.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,h.key,h)};mg.installMethods=function(c,h,f){f&&f.forEach(function(e){e.value?mg.installValueDescriptor(c,c,e):mg.installGetterSetterDescriptor(c,e)});h&&h.forEach(function(e){e.value?mg.installValueDescriptor(c.prototype,c,e):mg.installGetterSetterDescriptor(c.prototype,
e)});c.prototype[mg.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(mg.initializeSymbol)&&c.prototype[mg.initializeSymbol].isDefaultInitializer&&c[mg.superclassSymbol].prototype[mg.initializeSymbol]&&delete c.prototype[mg.initializeSymbol]:(Object.defineProperty(c.prototype,mg.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[mg.initializeSymbol].isDefaultInitializer=!0,c.prototype[mg.initializeSymbol].displayName="lively-initialize");
h=h.map(function(e){return e.key}).concat(["constructor","arguments","caller"]);for(var k=Object.getOwnPropertyNames(c.prototype),n=0;n<k.length;n++){var b=k[n];h.includes(b)||delete c.prototype[b]}f=f.map(function(e){return e.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(c);for(k=0;k<h.length;k++)n=h[k],f.includes(n)||delete c[n]};mg.ensureInitializeStub=function(c){c===Object||c.prototype[mg.initializeSymbol]||(Object.defineProperty(c.prototype,mg.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[mg.initializeSymbol].displayName="lively-initialize-stub")};mg.initializeClass=cc;mg.prepareClassForManagedPropertiesAfterCreation=hs;mg.superclassSymbol=TL;mg.moduleSubscribeToToplevelChangesSym=WL;mg.moduleMetaSymbol=UL;mg.objMetaSymbol=VL;mg.initializeSymbol=SL;mg.constructorArgMatcher=/\([^\\)]*\)/;mg.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};mg.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var XL="function"===typeof Object.setPrototypeOf?function(c,h){return Object.setPrototypeOf(c,h)}:function(c,h){return c.__proto__=h};mg.setPrototypeOf=XL;mg.setPrototypeOf=XL;mg.setPrototypeOf=XL;mg.adoptObject=rq;mg.adoptObject=rq;mg.setSuperclass=Mu;mg.setSuperclass=Mu;mg.initializeClass=cc;mg.initializeClass=cc;mg.initializeClass._get=function n(h,f,k){null===h&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,f);if(void 0===b)return h=
Object.getPrototypeOf(h),null===h?void 0:n(h,f,k);if("value"in b)return b.value;f=b.get;return void 0===f?void 0:f.call(k)};mg.initializeClass._set=function e(f,k,n,b){var m=Object.getOwnPropertyDescriptor(f,k);void 0===m?(f=Object.getPrototypeOf(f),null!==f&&e(f,k,n,b)):"value"in m&&m.writable?m.value=n:(k=m.set,void 0!==k&&k.call(b,n));return n};var LD=Object.freeze({__proto__:null,setPrototypeOf:XL,adoptObject:rq,setSuperclass:Mu,initializeClass:cc}),kh=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");
kh.connect=Zk;kh.disconnect=Dp;kh.disconnectAll=er;kh.once=fr;kh.signal=dm;kh.callWhenNotNull=Nu;kh.callWhenPathNotNull=tC;kh.noUpdate=Ef;kh.string=ti;kh.arr=eg;kh.Closure=Qj;kh.obj=Ag;kh.stringifyFunctionWithoutToplevelRecorder=mw;kh.connect=Zk;kh.connect=Zk;kh.disconnect=Dp;kh.disconnect=Dp;kh.disconnectAll=er;kh.disconnectAll=er;kh.once=fr;kh.once=fr;kh.signal=dm;kh.signal=dm;kh.noUpdate=Ef;kh.noUpdate=Ef;var YL=function(f){var k=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=
k.hasOwnProperty("AttributeConnection")&&"function"===typeof k.AttributeConnection?k.AttributeConnection:k.AttributeConnection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g){this.init(b,e,m,a,g)}},{key:"init",value:function(b,e,m,a,g){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=
e;this.targetObj=m;this.targetMethodName=a;this.varMapping={source:b,target:m};g=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},g);g.removeAfterUpdate&&(this.removeAfterUpdate=!0);g.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof g.garbageCollect&&(this.garbageCollect=g.garbageCollect);"boolean"===typeof g.signalOnAssignment&&(this.signalOnAssignment=g.signalOnAssignment);g.converter&&this.setConverter(g.converter);
g.updater&&this.setUpdater(g.updater);g.varMapping&&(this.varMapping=Object.assign(g.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(b,e,m,a){kh.arr.equals(kh.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,e){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=
this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(b){return kh.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,e,m){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&
(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},
{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=kh.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=kh.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},
{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?kh.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&
(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=
this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var e=this.sourceAttrName,m=this.forceAttributeConnection,a=b.__lookupSetter__(e),g=b.__lookupGetter__(e),l=!a&&!g&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||m?this.addSourceObjGetterAndSetter(g,a):l.isWrapped||this.addConnectionWrapper(b,e,l);return this}},{key:"disconnect",value:function(){var b=this,e=this.sourceObj;if(!e||!e.attributeConnections)return this.removeSourceObjGetterAndSetter();
e.attributeConnections=e.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});var m=e.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==e.attributeConnections.length&&delete e.attributeConnections;0==m.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,e){if(this.isActive)return null;var m=this,a=this.getUpdater(),g=this.getConverter(),l=this.targetObj,r=this.targetMethodName;if(!l||!r)return e=
"Cannot update "+this.toString(b)+" because of no target ("+l+") or targetProp ("+r+") ",this.isWeakConnection&&this.disconnect(),console.error(e),null;var v=l[r],y=function(E,F,H,I,M,N){H=[E,F,H,I,M,N];g&&(b=g.call(m,E,F),E=H[0]=b);E="function"===typeof v?v.apply(l,H):l[r]=E;m.removeAfterUpdate&&m.disconnect();return E};try{return this.isActive=!0,a?a.call(this,y,b,e):y(b,e)}catch(E){var A=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();A?A.logError(E,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+b+":\n"+E+"\n"+E.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(b,e){if(!(b&&b.isAttributeConnectionGetter||e&&e.isAttributeConnectionSetter)){var m=this.sourceObj,a=this.sourceAttrName,g=this.privateAttrName(a);m[g]&&console.warn("newAttrName "+g+" already exists.Are there already other connections?");
m.hasOwnProperty("doNotSerialize")||(m.doNotSerialize=[]);kh.arr.pushIfNotIncluded(m.doNotSerialize,g);m.hasOwnProperty("doNotCopyProperties")||(m.doNotCopyProperties=[]);kh.arr.pushIfNotIncluded(m.doNotCopyProperties,g);b&&(m.hasOwnProperty(a)?m.__defineGetter__(g,b):m.__defineGetter__(g,function(){return m.constructor.prototype.__lookupGetter__(a).bind(m)()}));e&&(m.hasOwnProperty(a)?m.__defineSetter__(g,e):m.__defineSetter__(g,function(l){m.constructor.prototype.__lookupSetter__(a).bind(m)(l)}));
b||e||!m.hasOwnProperty(a)||(m[g]=m[a]);m.__defineSetter__(a,function(l){var r=m[g];m[g]=l;if(void 0===m.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;m.attributeConnections.forEach(function(v){v&&v.getSourceAttrName()===a&&v.signalOnAssignment&&v.update(l,r)});return l});m.__lookupSetter__(a).isAttributeConnectionSetter=!0;m.__defineGetter__(a,function(){return m[g]});m.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(b,e,m){if("function"!==typeof m)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(e)){b[this.privateAttrName(e)]=m;var g=function(){return m}}else g=function(){return Object.getPrototypeOf(b)[e]};b[e]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),r=this[e].originalFunction.apply(this,
arguments),v=0;v<l.length;v++){var y=l[v];y.getSourceAttrName()===e&&y.update(arguments[0])}return r};b[e].isOwnProperty=a;b[e].isWrapped=!0;b[e].isConnectionWrapper=!0;Object.defineProperty(b[e],"originalFunction",{get:g});b[e].toString=function(){return"<Wrapped "+g()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var b=this.sourceAttrName,e=this.privateAttrName(b),m=this.sourceObj;if(m){if(m.__lookupGetter__(b)){if(delete m[b],m.hasOwnProperty(e)){try{m[b]=m[e]}catch(g){}delete m[e]}}else if(m[b]&&
m[b].isConnectionWrapper){var a=m[b];delete m[b];m[b]||(m[b]=a.originalFunction)}m.doNotSerialize&&m.doNotSerialize.includes(e)&&(m.doNotSerialize=kh.arr.without(m.doNotSerialize,e),0==m.doNotSerialize.length&&delete m.doNotSerialize);m.doNotCopyProperties&&m.doNotCopyProperties.includes(e)&&(m.doNotCopyProperties=kh.arr.without(m.doNotCopyProperties,e),0==m.doNotCopyProperties.length&&delete m.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;for(var e=0,m=b.length;e<m;e++)if(this.isSimilarConnection(b[e]))return b[e];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==
b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return kh.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(e){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],k,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:221,end:16605})}(void 0);kh.AttributeConnection=YL;kh.AttributeConnection=YL;kh.AttributeConnection=YL;kh.callWhenNotNull=Nu;kh.callWhenNotNull=Nu;kh.callWhenPathNotNull=tC;kh.callWhenPathNotNull=tC;var Vja=Object.freeze({__proto__:null,connect:Zk,disconnect:Dp,disconnectAll:er,once:fr,
signal:dm,noUpdate:Ef,AttributeConnection:YL,callWhenNotNull:Nu,callWhenPathNotNull:tC}),Z5=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(Z5,mha);Object.assign(Z5,lha);var Wja=Object.freeze({__proto__:null,Complementary:uy,Triadic:vy,Tetradic:SA,Quadratic:wy,Analogous:xy,Neutral:TA,Color:Hg,LinearGradient:An,RadialGradient:Mp,flatDesignColors:xG,materialDesignColors:yG,webSafeColors:zG,Point:Jg,Rectangle:Le,Transform:el,Line:zn,rect:Cl,pt:Ii});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");
Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var f=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],"Symbol."+b)},new Map)}(),k=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(f.get(n))return{__expr__:f.get(n)};n=String(n).match(k);
return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(f,k,n){var b=f.add(this),e=b.currentRev,m=b.currentSnapshot,a=m.entries=[],g=0;k[b.id]=m;f.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);
for(var l=m.next();!l.done;l=m.next()){var r=$jscomp.makeIterator(l.value);l=r.next().value;r=r.next().value;g++;l=b.snapshotProperty(b.id,l,n.concat("key",String(g)),k,f);r=b.snapshotProperty(b.id,r,n.concat("value",String(g)),k,f);a.push(l,r)}return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(f,k,n,b,e){f=f.entries;for(var m=0;m<f.length;m+=2){var a=f[m+1],g=k.recreateProperty("key."+m,f[m],n,b,e.concat("key",m));a=k.recreateProperty("value."+
m,a,n,b,e.concat("value",m));this.set(g,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(f,k,n){var b=f.add(this),e=b.currentRev,m=b.currentSnapshot,a=m.entries=[],g=0;k[b.id]=m;f.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);for(var l=m.next();!l.done;l=m.next())l=l.value,g++,l=b.snapshotProperty(b.id,l,n.concat("entry",String(g)),k,f),a.push(l);return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Set.prototype,"__deserialize__",
{configurable:!0,value:function(f,k,n,b,e){f=f.entries;for(var m=0;m<f.length;m++){var a=k.recreateProperty("entry."+m,f[m],n,b,e.concat("key",m));this.add(a)}}});var DT=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");DT.isPrimitive=uC;DT.isPrimitive=uC;DT.isPrimitive=uC;var Lj=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");Lj.getClassName=gr;Lj.getSerializableClassMeta=Ou;Lj.locateClass=Ep;Lj.arr=eg;Lj.string=ti;Lj.classMetaForSerializationProp="lively.serializer-class-info";
Lj.classSuperClassProp=Symbol.for("lively-instance-superclass");Lj.classNameProp=Symbol.for("__LivelyClassName__");Lj.moduleMetaInClassProp=Symbol.for("lively-module-meta");Lj.getClassName=gr;Lj.getClassName=gr;Lj.getSerializableClassMeta=Ou;Lj.getSerializableClassMeta=Ou;Lj.locateClass=Ep;Lj.locateClass=Ep;var wv=function(f){this.options=Object.assign({ignoreClassNotFound:!0},f);this[Symbol.for("lively-instance-restorer")]=!0};wv.prototype.addClassInfo=function(f,k,n){(f=Lj.getSerializableClassMeta(k))&&
(n[Lj.classMetaForSerializationProp]=f)};wv.prototype.restoreIfClassInstance=function(f,k){if(k.hasOwnProperty(Lj.classMetaForSerializationProp)&&(f=k[Lj.classMetaForSerializationProp],f.className)){k=Lj.locateClass(f);if(!k||"function"!==typeof k){k="Trying to deserialize instance of "+JSON.stringify(f)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(k);console.error(k);return{isClassPlaceHolder:!0,className:f.className}}return k.hasOwnProperty(Symbol.for("lively-instance-superclass"))?
new k(this):new k}};wv.sourceModulesInObjRef=function(f){var k=[];(f=f&&f[Lj.classMetaForSerializationProp])&&f.module&&k.push(f.module);return k};wv.sourceModulesIn=function(f){var k=[];Object.keys(f).forEach(function(n){(n=f[n])&&n[Lj.classMetaForSerializationProp]&&k.push(n[Lj.classMetaForSerializationProp])});return Lj.arr.uniqBy(k,function(n,b){var e=n.module,m=b.module;return!e&&!m||e&&!m||!e&&m?n.className===b.className:n.className===b.className&&e.package.name==m.package.name&&e.package.pathInPackage==
m.package.pathInPackage})};$jscomp.global.Object.defineProperties(wv.prototype,{sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(wv,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return Lj.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return Lj.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return Lj.classSuperClassProp}},
classNameProperty:{configurable:!0,enumerable:!0,get:function(){return Lj.classNameProp}}});Lj.ClassHelper=wv;Lj.default=wv;var $i=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");$i.deserializeSpec=Fp;$i.serializeSpec=Bo;$i.string=ti;$i.Closure=Qj;$i.Path=$h;$i.obj=Ag;$i.properties=xp;$i.arr=eg;$i.getSerializableClassMeta=Ou;$i.connect=Zk;var ho=function(f){this.prefix=Object.assign({prefix:"__lv_expr__"},f).prefix+":"};ho.prototype.isSerializedExpression=
function(f){return 0===f.indexOf(this.prefix)};ho.prototype.requiredModulesOf__expr__=function(f){return this.isSerializedExpression(f)?(f=this.exprStringDecode(f).bindings)?Object.keys(f):null:null};ho.prototype.exprStringDecode=function(f){var k=f.indexOf(":");f.slice(0,k);f=f.slice(k+1);for(var n={},b=!1;f&&f.startsWith("{")&&0<=(k=f.indexOf("}:"));){b=!0;var e=f.slice(1,k);f=f.slice(k+2);f.includes("https:")&&f.indexOf("https:")<f.indexOf(":")?(f=f.replace("https:","__HTTP_PLACEHOLDER__"),k=f.indexOf(":")-
20+6,f=f.replace("__HTTP_PLACEHOLDER__","https:")):k=f.indexOf(":");var m=f.slice(0,k);e=e.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var g=$jscomp.makeIterator(a.split(":"));a=g.next().value;g=g.next().value;return{exported:a,local:g}});n[m]=e;f=f.slice(k+1)}return{__expr__:f,bindings:b?n:null}};ho.prototype.exprStringEncode=function(f){var k=f.bindings;f=String(f.__expr__);if(k)for(var n=Object.keys(k),b=0;b<n.length;b++){var e=n[b],m=k[e];Array.isArray(m)&&
(m=m.map(function(a){return"string"===typeof a?a:a.exported+":"+a.local}).join(","));f="{"+m+"}:"+e+":"+f}return this.prefix+f};ho.prototype.convert__expr__obj=function(f){console.assert("__expr__"in f,"obj has no property __expr__");return this.prefix+f.__expr__};ho.prototype.__eval__=function(f,k){return $i.__eval__(f,k)};ho.prototype.deserializeExpr=function(f){if(!f.startsWith(this.prefix))throw Error('"'+f+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(f))};
ho.prototype.deserializeExprObj=function(f){var k=f.__expr__;f=f.bindings;var n={};if(f)for(var b=f?Object.keys(f):[],e=0;e<b.length;e++){var m=b[e],a=f[m];if(lively.FreezerRuntime){var g=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(m));if(!g){var l=lively.FreezerRuntime.fetchStandaloneFor(m);l&&(g=l.exports)}g.exports&&(g=g.exports)}else g=System.get(System.decanonicalize(m));if(!g)throw Error("[lively.serializer] expression eval: bindings specify to import "+m+" but this module is not loaded!\nSource: "+
k);for(m=0;m<a.length;m++){var r=a[m],v=l=void 0;"string"===typeof r?v=l=r:"object"===typeof r&&(l=r.local,v=r.exported);n[l]=g[v];k="var "+l+" = __boundValues__."+l+";\n"+k}}return this.__eval__(k,n)};Ba("a0",ho);$i.ExpressionSerializer=ho;$i.__eval__=$i.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();$i.deserializeSpec=Fp;$i.deserializeSpec=Fp;$i.serializeSpec=Bo;$i.serializeSpec=Bo;$i.default=ho;var Mj=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
Mj.obj=Ag;Mj.Plugin=function(){};var ET=function(){};ET.prototype.serializeObject=function(f,k,n,b,e){if("function"!==typeof f.__serialize__)return null;(f=f.__serialize__(n,b,e))&&f.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(f),f=k?n:{__expr__:n});return f};ET.prototype.deserializeObject=function(f,k,n,b){return(k=n.__expr__)?f.expressionSerializer.deserializeExpr(k):null};Mj.CustomSerializePlugin=ET;var FT=function(){};FT.prototype.additionallySerialize=function(f,k,
n,b){f.classHelper.addClassInfo(k,k.realObj,n)};FT.prototype.deserializeObject=function(f,k,n,b){return f.classHelper.restoreIfClassInstance(k,n)};Mj.ClassPlugin=FT;var $5=function(){};$5.prototype.serializeObject=function(f,k,n,b,e){f&&f.isMorph&&(f.__isBeingSerialized__=!0);return null};Mj.SerializationIndicationPlugin=$5;var a6=function(){};a6.prototype.additionallySerialize=function(f,k,n,b){k.realObj&&k.realObj.isMorph&&(k.realObj.__isBeingSerialized__=!1)};Mj.SerializationFinishPlugin=a6;var ZL=
function(){};ZL.prototype.additionallySerialize=function(f,k,n,b){var e=k.realObj;e&&"function"===typeof e.__additionally_serialize__&&e.__additionally_serialize__(n,k,f,b)};ZL.prototype.additionallyDeserializeBeforeProperties=function(f,k,n,b,e,m,a){"function"===typeof n.__deserialize__&&n.__deserialize__(e,k,m,f,a)};ZL.prototype.additionallyDeserializeAfterProperties=function(f,k,n,b,e,m){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,k,f)};Mj.AdditionallySerializePlugin=
ZL;var b6=function(){};b6.prototype.propertiesToSerialize=function(f,k,n,b){return(f=k.realObj)&&f.__only_serialize__||null};Mj.OnlySerializePropsPlugin=b6;var c6=function(){};c6.prototype.propertiesToSerialize=function(f,k,n,b){f=k.realObj;if(!f||!f.__dont_serialize__)return null;f=Mj.obj.mergePropertyInHierarchy(f,"__dont_serialize__");k=[];for(n=0;n<b.length;n++){var e=b[n];f.includes(e)||k.push(e)}return k};Mj.DontSerializePropsPlugin=c6;var GT=function(){};GT.prototype.propertiesToSerialize=
function(f,k,n,b){var e=k.realObj;k=e.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!k)return null;f=k.properties;n=k.propertySettings.valueStoreProperty||"_state";k=[];if(e[n]){if(e.__only_serialize__){for(var m=0;m<b.length;m++){e=b[m];var a=f[e];e!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||k.push(e))}return k}n=b.indexOf(n);-1<n&&b.splice(n,1);for(m in f)n=f[m],e=b.indexOf(m),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?
-1<e&&b.splice(e,1):-1===e&&k.push(m);return k.concat(b)}};GT.prototype.additionallyDeserializeBeforeProperties=function(f,k,n,b,e,m,a){var g=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!g)return b;var l=g.order;g=g.propertySettings.valueStoreProperty||"_state";b=e.props;if(b[g])return b;b=Mj.obj.clone(b);n.hasOwnProperty(g)||n.initializeProperties();for(e=0;e<l.length;e++)g=l[e],b.hasOwnProperty(g)&&(k.recreatePropertyAndSetProperty(n,b,g,m,f,a),delete b[g]);return b};
Mj.LivelyClassPropertiesPlugin=GT;var HT={livelyClassPropertiesPlugin:new Mj.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new Mj.DontSerializePropsPlugin,onlySerializePropsPlugin:new Mj.OnlySerializePropsPlugin,additionallySerializePlugin:new Mj.AdditionallySerializePlugin,classPlugin:new Mj.ClassPlugin,customSerializePlugin:new Mj.CustomSerializePlugin,indicationPlugin:new Mj.SerializationIndicationPlugin,finishPlugin:new Mj.SerializationFinishPlugin};Mj.plugins=HT;Mj.plugins=HT;Mj.plugins=
HT;var QG=[Mj.plugins.indicationPlugin,Mj.plugins.customSerializePlugin,Mj.plugins.classPlugin,Mj.plugins.additionallySerializePlugin,Mj.plugins.onlySerializePropsPlugin,Mj.plugins.dontSerializePropsPlugin,Mj.plugins.livelyClassPropertiesPlugin,Mj.plugins.finishPlugin];Mj.allPlugins=QG;Mj.allPlugins=QG;Mj.allPlugins=QG;var nk=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");nk.__additionally_serialize__addObjectFunction=function(f,k,n,b,e){e=void 0===e?[]:e;return function(m,
a,g){g=void 0===g?!1:g;return k.props[m]=g?{value:a,verbatim:g}:{value:f.snapshotProperty(f.id,a,e.concat([m]),n,b)}}};nk.arr=eg;nk.Path=$h;nk.obj=Ag;nk.string=ti;nk.isPrimitive=uC;nk.ClassHelper=wv;nk.ExpressionSerializer=ho;nk.allPlugins=QG;nk.debugSerialization=!1;nk.debugDeserialization=!1;var Vj=function(f){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},f);this.reset()};Vj.withDefaultPlugins=function(f){return new this(Object.assign({plugins:nk.allPlugins},
f))};Vj.resolveFromSnapshotAndId=function(f,k){return(new this(k)).resolveFromSnapshotAndId(f)};Vj.fromSnapshot=function(f,k){return(new this(k)).readSnapshot(f)};Vj.withObject=function(f,k){k=new this(k);k.add(f);return k};Vj.prototype.reset=function(){this.uuidGen=nk.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var f=this.options;this.classHelper=new nk.ClassHelper(f);this.expressionSerializer=new nk.ExpressionSerializer;f.idPropertyName&&(this.idPropertyName=f.idPropertyName);f.uuidGen&&
(this.uuidGen=f.uuidGen);f.reinitializeIds&&(this.reinitializeIds=f.reinitializeIds);f.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=f.ignoreClassNotFound);var k=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};f.plugins&&f.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&k.serializeObject.push(n);"function"===typeof n.additionallySerialize&&k.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&k.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&k.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&k.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&k.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&k.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&k.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&k.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&k.afterSerialization.push(n)})};Vj.prototype.knowsId=function(f){return!!this._id_ref_map[f]};Vj.prototype.refForId=function(f){return this._id_ref_map[f]};Vj.prototype.resolveToObj=function(f){return(f=this._id_ref_map[f])?f.realObj:void 0};Vj.prototype.ref=
function(f){return this._obj_ref_map.get(f)};Vj.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};Vj.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};Vj.prototype.internalAddRef=function(f){f.realObj&&this._obj_ref_map.set(f.realObj,f);return this._id_ref_map[f.id]=f};Vj.prototype.add=function(f){var k=this;if(!nk.isPrimitive(f)){if(Array.isArray(f))return f.map(function(b){return k.add(b)});var n=f.__serialization_id_property__||this.idPropertyName;
return this.ref(f)||this.internalAddRef(new nk.ObjectRef(f[n]||this.uuidGen(),f,void 0,this.idPropertyName))}};Vj.prototype.snapshot=function(f){var k={};this.plugin_beforeSerialization(k,f);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(k,this);return k=this.plugin_afterSerialization(k,f)};Vj.prototype.snapshotObject=function(f){f=this.add(f).id;var k=this.snapshot(f);return{id:f,snapshot:k}};Vj.prototype.readSnapshot=function(f,k){if(f.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)nk.ObjectRef.fromSnapshot(k,f,this,[],this.idPropertyName);else{k=0;for(var n=Object.keys(f);k<n.length;k++)this.resolveToObj(n[k])||nk.ObjectRef.fromSnapshot(n[k],f,this,[],this.idPropertyName)}return this};Vj.prototype.resolveFromSnapshotAndId=function(f){if(!f.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!f.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var k=f=this.plugin_beforeDeserialization(f),n=k.id;this.readSnapshot(k.snapshot,
n);this.plugin_afterDeserialization(f);return this.resolveToObj(n)};Vj.prototype.plugin_beforeSerialization=function(f,k){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,f,k)};Vj.prototype.plugin_afterSerialization=function(f,k){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,f,k);b&&(f=b)}return f};Vj.prototype.plugin_beforeDeserialization=function(f){for(var k=
0;k<this.plugins.beforeDeserialization.length;k++){var n=this.plugins.beforeDeserialization[k].beforeDeserialization(this,f);n&&(f=n)}return f};Vj.prototype.plugin_afterDeserialization=function(f){for(var k=0;k<this.plugins.afterDeserialization.length;k++)this.plugins.afterDeserialization[k].afterDeserialization(this,f)};Vj.prototype.plugin_serializeObject=function(f,k,n,b){for(var e=0;e<this.plugins.serializeObject.length;e++){var m=this.plugins.serializeObject[e].serializeObject(f,k,this,n,b);if(m)return m}};
Vj.prototype.plugin_propertiesToSerialize=function(f,k,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var e=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,f,k,n);e&&(n=e)}return n};Vj.prototype.plugin_additionallySerialize=function(f,k,n,b){n=this.plugins.additionallySerialize.length?nk.__additionally_serialize__addObjectFunction(f,k,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,
f,k,n)};Vj.prototype.plugin_deserializeObject=function(f,k,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var e=this.plugins.deserializeObject[b].deserializeObject(this,f,k,n);if(e)return e}};Vj.prototype.plugin_additionallyDeserializeBeforeProperties=function(f,k,n,b,e,m){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var g=this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,f,k,n,b,e,m);g&&(n=g)}return n};
Vj.prototype.plugin_additionallyDeserializeAfterProperties=function(f,k,n,b,e){for(var m=0;m<this.plugins.additionallyDeserializeAfterProperties.length;m++)this.plugins.additionallyDeserializeAfterProperties[m].additionallyDeserializeAfterProperties(this,f,k,n,b,e)};nk.ObjectPool=Vj;var Ls=function(f,k,n,b){this.id=f;this.idPropertyName=void 0===b?"id":b;this.realObj=k;this.snapshotVersions=[];this.snapshots={};n&&(f=n.rev||0,this.snapshotVersions.push(f),this.snapshots[f]=n)};Ls.fromSnapshot=function(f,
k,n,b,e){b=void 0===b?[]:b;f=new this(f,void 0,void 0,e);try{return n.internalAddRef(f).recreateObjFromSnapshot(k,n,b)}catch(m){if(n.options.highlightBuggyMorphs)for(;b.length;){if((k=nk.Path(b).map(function(a,g){return"submorphs"==a?g.filter(function(l){return!l.isHand&&!l.isEpiMorph}):g}).get(n.options.rootObject))&&k.isMorph&&k.world()){k.show(!0);n.options.highlightBuggyMorphs=!1;break}b.pop()}throw m;}};Ls.prototype.asRefForSerializedObjMap=function(f){return{__ref__:!0,id:this.id,rev:void 0===
f?"????":f}};Ls.prototype.snapshotObject=function(f,k,n){n=void 0===n?[]:n;nk.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,e=this.realObj,m=this.snapshots;if(!e)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var a=e._rev||0;var g=this.asRefForSerializedObjMap(a);nk.arr.pushIfNotIncluded(this.snapshotVersions,
a);if(m[a])return f[b]||(f[b]=m[a]),g;var l=typeof b;"number"===l&&(b=String(b),l="string");if("string"!==l)throw Error("Error snapshoting "+e+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(l=k.plugin_serializeObject(e,!1,f,n))return m[a]=f[b]=l,g;l=Object.getOwnPropertyNames(e);var r={};m=m[a]=f[b]={rev:a,props:r};(a=k.plugin_propertiesToSerialize(this,m,l))&&(l=a);for(a=0;a<l.length;a++){var v=l[a];r[v]={value:this.snapshotProperty(b,e[v],n.concat([v]),f,k)}}k.plugin_additionallySerialize(this,
m,f,n);return g};Ls.prototype.snapshotProperty=function(f,k,n,b,e){var m=this;if(nk.isPrimitive(k))return k;var a=e.plugin_serializeObject(k,!0,b,n);if(a)return a;if("function"!==typeof k)return Array.isArray(k)?k.map(function(g,l){return m.snapshotProperty(f,g,n.concat(l),b,e)}):(k=e.add(k))&&k.isObjectRef?k.snapshotObject(b,e,n):k};Ls.prototype.recreateObjFromSnapshot=function(f,k,n){if(this.realObj)return this;nk.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var b=f[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var e=b.rev,m;e=e||0;this.snapshotVersions.push(e);this.snapshots[e]=b;(m=k.plugin_deserializeObject(this,b,n))||(m={});"undefined"===typeof m._rev&&"object"===typeof m&&(m._rev=e||0);this.realObj=m;k.internalAddRef(this);if(!m)return this;e=b.props;var a=k.plugin_additionallyDeserializeBeforeProperties(this,m,e,b,f,n);a&&(e=a);if(e)for(var g in e)this.recreatePropertyAndSetProperty(m,
e,g,f,k,n);g=m.__serialization_id_property__||this.idPropertyName;k.reinitializeIds&&m.hasOwnProperty(g)&&(m[g]=k.reinitializeIds(this.id,this));k.plugin_additionallyDeserializeAfterProperties(this,m,b,f,n);return this};Ls.prototype.recreatePropertyAndSetProperty=function(f,k,n,b,e,m){try{var a=k[n]||{value:"NON EXISTING"},g=a.value;f[n]=a.verbatim?g:this.recreateProperty(n,g,b,e,m.concat(n))}catch(r){try{var l=String(f)}catch(v){l="[some "+f.constructor.name+"]"}r.__seen?console.error("Error deserializing property "+
n+" of "+l):(f=n+" of "+l+" ("+JSON.stringify(g)+")",console.error("Error deserializing property "+f),r.__seen=!0);throw r;}};Ls.prototype.recreateProperty=function(f,k,n,b,e){var m=this;if("string"===typeof k&&b.expressionSerializer.isSerializedExpression(k))return b.expressionSerializer.deserializeExpr(k);if(nk.isPrimitive(k))return k;if(Array.isArray(k))return k.map(function(a,g){return m.recreateProperty(g,a,n,b,e.concat(g))});f=k.__serialization_id_property__||this.idPropertyName;return(b.refForId(k[f])||
nk.ObjectRef.fromSnapshot(k[f],n,b,e,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(Ls.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var f=nk.arr.last(this.snapshotVersions);else f=0,this.snapshotVersions.push(f);return this.snapshots[f]||(this.snapshots[f]={rev:f,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
nk.arr.last(this.snapshotVersions):0}}});nk.ObjectRef=Ls;var Yf=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Yf.referenceGraph=Oz;Yf.isReference=Rl;Yf.referencesOfRef=wm;Yf.referencesOfId=Sl;Yf.referencesInArray=NI;Yf.moduleOfId=Pz;Yf.referencesAndClassNamesOfId=Ng;Yf.classNameOfId=Hx;Yf.findPathFromToId=Pu;Yf.lookupPath=Qz;Yf.modifyProperty=hr;Yf.removeUnreachableObjects=Rm;Yf.clearDanglingConnections=cp;Yf.requiredModulesOfSnapshot=pt;Yf.ClassHelper=wv;Yf.Path=
$h;Yf.obj=Ag;Yf.arr=eg;Yf.graph=wu;Yf.ExpressionSerializer=ho;Yf.referenceGraph=Oz;Yf.referenceGraph=Oz;Yf.isReference=Rl;Yf.isReference=Rl;Yf.referencesOfRef=wm;Yf.referencesOfRef=wm;Yf.referencesOfId=Sl;Yf.referencesOfId=Sl;Yf.moduleOfId=Pz;Yf.moduleOfId=Pz;Yf.referencesAndClassNamesOfId=Ng;Yf.referencesAndClassNamesOfId=Ng;Yf.classNameOfId=Hx;Yf.classNameOfId=Hx;Yf.findPathFromToId=Pu;Yf.findPathFromToId=Pu;Yf.lookupPath=Qz;Yf.lookupPath=Qz;Yf.modifyProperty=hr;Yf.modifyProperty=hr;Yf.removeUnreachableObjects=
Rm;Yf.removeUnreachableObjects=Rm;Yf.clearDanglingConnections=cp;Yf.clearDanglingConnections=cp;Yf.defaultExprSerializer=new Yf.ExpressionSerializer;Yf.requiredModulesOfSnapshot=pt;Yf.requiredModulesOfSnapshot=pt;var d6,wC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zm=d6={};try{var Ix="function"==typeof setTimeout?setTimeout:cF}catch(f){Ix=cF}try{var Jx="function"==typeof clearTimeout?clearTimeout:vC}catch(f){Jx=vC}!0;var Rz,ow=[],xC=!1,PI=-1;zm.nextTick=function(f){var k=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];ow.push(new RI(f,k));1!==ow.length||xC||OI(QI)};RI.prototype.run=function(){(this||wC).fun.apply(null,(this||wC).array)};zm.title="browser";zm.browser=!0;zm.env={};zm.argv=[];zm.version="";zm.versions={};zm.on=qt;zm.addListener=qt;zm.once=qt;zm.off=qt;zm.removeListener=qt;zm.removeAllListeners=qt;zm.emit=qt;zm.prependListener=qt;zm.prependOnceListener=qt;zm.listeners=function(f){return[]};zm.binding=
function(f){throw Error("process.binding is not supported");};zm.cwd=function(){return"/"};zm.chdir=function(f){throw Error("process.chdir is not supported");};zm.umask=function(){return 0};var uj=Ba("bm",d6),LX={},KX=!1,NX={},MX=!1,Qu={},OX=!1,QX={},PX=!1,SX={},RX=!1,Wf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UX={},TX=!1,WX={},VX=!1,YX={},XX=!1,$X={},ZX=!1,bY={},aY=!1,dY={},cY=!1,fY={},eY=!1,hY={},gY=!1,jY={},iY=!1,lY={},kY=!1,nY={},mY=!1,pY={},oY=!1,rY={},
qY=!1,KP={},sY=!1,Dl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LP={},tY=!1,lj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vY={},uY=!1,xY={},wY=!1,zY={},yY=!1,BY={},AY=!1,DY={},CY=!1,FY={},EY=!1,HY={},GY=!1,JY={},IY=!1,LY={},KY=!1,NY={},MY=!1,PY={},OY=!1,RY={},QY=!1,TY={},SY=!1,VY={},UY=!1,XY={},WY=!1,ZY={},YY=!1,aZ={},$Y=!1,cZ={},bZ=!1,eZ={},dZ=!1,gZ={},fZ=!1,iZ={},hZ=!1,kZ={},jZ=!1,e6={},f6=!1,RG=function(){if(f6)return e6;
f6=!0;var f=Dh();return e6={re:f.re,src:f.src,tokens:f.t,SEMVER_SPEC_VERSION:Sz().SEMVER_SPEC_VERSION,SemVer:Qn(),compareIdentifiers:zC().compareIdentifiers,rcompareIdentifiers:zC().rcompareIdentifiers,parse:sq(),valid:SI(),clean:Wb(),inc:Tz(),diff:Gp(),major:UI(),minor:Lx(),patch:hF(),prerelease:tq(),compare:xm(),rcompare:VI(),compareLoose:BC(),compareBuild:iF(),sort:WI(),rsort:Mx(),gt:Kx(),lt:Uz(),eq:eF(),neq:fF(),gte:dF(),lte:gF(),cmp:TI(),coerce:JP(),Comparator:Co(),Range:di(),satisfies:Rn(),
toComparators:Vz(),maxSatisfying:CC(),minSatisfying:XI(),minVersion:ll(),validRange:AC(),outside:is(),gtr:Do(),ltr:MP(),intersects:mi(),simplifyRange:jF(),subset:NP()}}(),hg=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");hg.normalizeOptions=Wz;hg.normalizeMigrations=function(f){f=void 0===f?[]:f;return{before:f.filter(function(k){return"function"===typeof k.snapshotConverter}),after:f.filter(function(k){return"function"===typeof k.objectConverter})}};hg.runMigrations=function(f,
k,n,b){for(var e=0;e<f.length;e++){var m=f[e];try{n=m[k](n,b)}catch(a){console.error("migration "+m.name+" failed:"),console.error(a)}}return n};hg.serialize=js;hg.deserialize=pw;hg.deserializeWithMigrations=Eo;hg.copy=ei;hg.ObjectPool=Vj;hg.serializerVersion="0.1.3";hg.requiredModulesOfSnapshot=pt;hg.removeUnreachableObjects=Rm;hg.clearDanglingConnections=cp;hg.allPlugins=QG;hg.semver=RG;hg.normalizeOptions=Wz;hg.normalizeOptions=Wz;hg.majorAndMinorVersionRe=/\.[^\.]+$/;hg.ObjectRef=Ls;hg.ObjectRef=
Ls;hg.ObjectPool=Vj;hg.ObjectPool=Vj;hg.requiredModulesOfSnapshot=pt;hg.requiredModulesOfSnapshot=pt;hg.removeUnreachableObjects=Rm;hg.removeUnreachableObjects=Rm;hg.serialize=js;hg.serialize=js;hg.deserialize=pw;hg.deserialize=pw;hg.deserializeWithMigrations=Eo;hg.deserializeWithMigrations=Eo;hg.copy=ei;hg.copy=ei;hg.ExpressionSerializer=ho;hg.serializeSpec=Bo;hg.deserializeSpec=Fp;hg.getSerializableClassMeta=Ou;hg.locateClass=Ep;hg.getClassName=gr;hg.ExpressionSerializer=ho;hg.ExpressionSerializer=
ho;hg.getSerializableClassMeta=Ou;hg.getSerializableClassMeta=Ou;hg.locateClass=Ep;hg.locateClass=Ep;hg.serializeSpec=Bo;hg.serializeSpec=Bo;hg.deserializeSpec=Fp;hg.deserializeSpec=Fp;hg.getClassName=gr;hg.getClassName=gr;var Xja=Object.freeze({__proto__:null,normalizeOptions:Wz,ObjectRef:Ls,ObjectPool:Vj,requiredModulesOfSnapshot:pt,removeUnreachableObjects:Rm,serialize:js,deserialize:pw,deserializeWithMigrations:Eo,copy:ei,ExpressionSerializer:ho,getSerializableClassMeta:Ou,locateClass:Ep,serializeSpec:Bo,
deserializeSpec:Fp,getClassName:gr}),Yja={},jba=Object.prototype.toString,IT=Yja=Array.isArray||OP,Zja={},SG=Zja="2",PP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,g6={};Fo.NONE=0;Fo.VTEXT=1;Fo.VNODE=2;Fo.WIDGET=3;Fo.PROPS=4;Fo.ORDER=5;Fo.INSERT=6;Fo.REMOVE=7;Fo.THUNK=8;g6=Fo;Fo.prototype.version=SG;Fo.prototype.type="VirtualPatch";var Rw=g6,$ja={},TG=$ja=function(f){return f&&"VirtualNode"===f.type&&f.version===SG},aka={},$L=aka=function(f){return f&&"VirtualText"===
f.type&&f.version===SG},bka={},Ey=bka=function(f){return f&&"Widget"===f.type},cka={},UG=cka=function(f){return f&&"Thunk"===f.type},dka={},kba=TG,lba=$L,mba=Ey,h6=dka=function(f,k){var n=f,b=k;UG(k)&&(b=rt(k,f));UG(f)&&(n=rt(f,null));return{a:n,b:b}},eka={},aM=eka=function(f){return"object"===typeof f&&null!==f},fka={},VG=fka=function(f){return f&&("function"===typeof f.hook&&!f.hasOwnProperty("hook")||"function"===typeof f.unhook&&!f.hasOwnProperty("unhook"))},i6={},lZ=aM,nba=VG;i6=YI;var j6={},
qba=IT,El=Rw,Xz=TG,mZ=$L,$I=Ey,ZI=UG,pba=h6,oba=i6;j6=Ox;var gka={},hka=gka=j6,ika=Object.freeze({}),k6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jka={},l6="undefined"!==typeof k6?k6:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var JT=document;else(JT=l6["__GLOBAL_DOCUMENT_CACHE@4"])||(JT=l6["__GLOBAL_DOCUMENT_CACHE@4"]=ika);var m6=jka=JT,kka={},nZ=VG,n6=kka=function(f,k,n){for(var b in k){var e=k[b];if(void 0===e)ks(f,b,e,n);else if(nZ(e))ks(f,
b,e,n),e.hook&&e.hook(f,b,n?n[b]:void 0);else if(aM(e)){var m=void 0,a=void 0,g=f,l=b,r=n?n[l]:void 0;if("attributes"===l)for(a in e)m=e[a],void 0===m?g.removeAttribute(a):g.setAttribute(a,m);else if(r&&aM(r)&&Yz(r)!==Yz(e))g[l]=e;else for(m in aM(g[l])||(g[l]={}),a="style"===l?"":void 0,e)r=e[m],g[l][m]=void 0===r?a:r}else f[b]=e}},lka={},oZ=m6,vba=n6,uba=TG,tba=$L,sba=Ey,rba=h6,o6=lka=Wi,mka={},nka=mka=function(f,k){return Ey(f)&&Ey(k)?"name"in f&&"name"in k?f.id===k.id:f.init===k.init:!1},oka=
{},wba={},pka=oka=function(f,k,n,b){return n&&0!==n.length?(n.sort(nF),mF(f,k,n,b,0)):{}},p6={},xba=Ey;p6=function(f,k,n){var b=f.vNode,e=f.patch;switch(f.type){case Rw.REMOVE:return(e=k.parentNode)&&e.removeChild(k),Qx(k,b),null;case Rw.INSERT:return e=n.render(e,n),k&&k.appendChild(e),k;case Rw.VTEXT:return 3===k.nodeType?(k.replaceData(0,k.length,e.text),e=k):(b=k.parentNode,e=n.render(e,n),b&&e!==k&&b.replaceChild(e,k)),e;case Rw.WIDGET:return e=(f=nka(b,e))?e.update(b,k)||k:n.render(e,n),(n=
k.parentNode)&&e!==k&&n.replaceChild(e,k),f||Qx(k,b),e;case Rw.VNODE:return b=k.parentNode,e=n.render(e,n),b&&e!==k&&b.replaceChild(e,k),e;case Rw.ORDER:b=k.childNodes;n={};for(var m,a=0;a<e.removes.length;a++)m=e.removes[a],f=b[m.from],m.key&&(n[m.key]=f),k.removeChild(f);a=b.length;for(var g=0;g<e.inserts.length;g++)m=e.inserts[g],f=n[m.key],k.insertBefore(f,m.to>=a++?null:b[m.to]);return k;case Rw.PROPS:return n6(k,e,b.properties),k;case Rw.THUNK:return e=n.patch(k,e,n),k&&e&&k!==e&&k.parentNode&&
k.parentNode.replaceChild(e,k),e;default:return k}};var q6={},Aba=m6,Bba=IT,yba=o6,zba=pka,pZ=p6;q6=aJ;var qka={},rka=qka=q6,Ru="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r6={},Fba=TG,Gba=Ey,Hba=UG,Eba=VG;r6=oF;var Cba={},Dba=[];oF.prototype.version=SG;oF.prototype.type="VirtualNode";var KT=r6,Iba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,s6={};s6=pF;pF.prototype.version=SG;pF.prototype.type="VirtualText";var LT=s6,t6={};
t6=function(f){var k=String.prototype.split,n=/()??/.exec("")[1]===f;return function(b,e,m){if("[object RegExp]"!==Object.prototype.toString.call(e))return k.call(b,e,m);var a=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),l=0;e=new RegExp(e.source,g+"g");var r,v;b+="";n||(r=new RegExp("^"+e.source+"$(?!\\s)",g));for(m=m===f?4294967295:m>>>0;v=e.exec(b);){g=v.index+v[0].length;if(g>l){a.push(b.slice(l,v.index));!n&&1<v.length&&v[0].replace(r,function(){for(var A=
1;A<arguments.length-2;A++)arguments[A]===f&&(v[A]=f)});1<v.length&&v.index<b.length&&Array.prototype.push.apply(a,v.slice(1));var y=v[0].length;l=g;if(a.length>=m)break}e.lastIndex===v.index&&e.lastIndex++}l===b.length?(y||!e.test(""))&&a.push(""):a.push(b.slice(l));return a.length>m?a.slice(0,m):a}}();var ska={},tka=t6,uka=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,vka=/^\.|#/,wka=ska=function(f,k){if(!f)return"DIV";var n=!k.hasOwnProperty("id");f=tka(f,uka);var b=null;vka.test(f[1])&&(b="DIV");var e,
m;for(m=0;m<f.length;m++)if(e=f[m]){var a=e.charAt(0);if(b)if("."===a){var g=g||[];g.push(e.substring(1,e.length))}else"#"===a&&n&&(k.id=e.substring(1,e.length));else b=e}g&&(k.className&&g.push(k.className),k.className=g.join(" "));return k.namespace?b:b.toUpperCase()},u6={};u6=Zz;Zz.prototype.hook=function(f,k){f[k]!==this.value&&(f[k]=this.value)};var xka=u6,v6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,w6={},MT="undefined"!==typeof window?window:"undefined"!==
typeof v6?v6:{};w6=function(f,k){return f in MT?MT[f]:MT[f]=k};var x6={},y6=w6;x6=function(f,k,n){var b="__INDIVIDUAL_ONE_VERSION_"+f,e=y6(b+"_ENFORCE_SINGLETON",k);if(e!==k)throw Error("Can only have one copy of "+f+".\nYou already have version "+e+" installed.\nThis means you cannot install version "+k);return y6(b,n)};var z6={};x6("ev-store","7");z6=function(f){var k=f["__EV_STORE_KEY@7"];k||(k=f["__EV_STORE_KEY@7"]={});return k};var A6={},B6=z6;A6=$z;$z.prototype.hook=function(f,k){f=B6(f);k=
k.substr(3);f[k]=this.value};$z.prototype.unhook=function(f,k){f=B6(f);k=k.substr(3);f[k]=void 0};var C6={},rZ=IT,qZ=LT,Jba=TG,Kba=$L,Lba=Ey,Mba=UG,yka=A6;C6=function(f,k,n){var b=[],e;if(e=!n)e="string"===typeof k||rZ(k)||Sm(k);if(e){n=k;var m={}}m=m||k||{};f=wka(f,m);if(m.hasOwnProperty("key")){var a=m.key;m.key=void 0}if(m.hasOwnProperty("namespace")){var g=m.namespace;m.namespace=void 0}"INPUT"!==f||g||!m.hasOwnProperty("value")||void 0===m.value||VG(m.value)||(m.value=xka(m.value));k=m;for(var l in k)k.hasOwnProperty(l)&&
(e=k[l],VG(e)||"ev-"===l.substr(0,3)&&(k[l]=yka(e)));void 0!==n&&null!==n&&bJ(n,b,f,m);return new KT(f,m,b,a,g)};var zka={},Aka=zka=C6,D6={};D6=o6;var Bka={},WG=Bka={diff:hka,patch:rka,h:Aka,create:D6,VNode:KT,VText:LT},Cka={},Dka=Cka={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",
cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType",
"for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",
loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},E6={};E6={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var Eka={},Oba=KT,sZ=LT,NT,tZ=Dka,Nba=E6,Fka=Eka=function(f,
k){if(!f)return Sn(document.createTextNode(""));if("string"===typeof f){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");NT=NT||new DOMParser;f=NT.parseFromString(f,"text/html");f=f.body.firstChild?f.getElementsByTagName("body")[0].firstChild:f.head.firstChild&&("TITLE"!==f.head.firstChild.tagName||f.title)?f.head.firstChild:f.firstChild&&"HTML"!==f.firstChild.tagName?f.firstChild:document.createTextNode("")}if("object"!==typeof f||
!f||!f.nodeType)throw Error("invalid dom node",f);return Sn(f,k)},Gka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,OT={};!function(f,k){OT?OT=k():(this||Gka)[f]=k()}("bowser",function(){function f(m){function a(T){return(T=m.match(T))&&1<T.length&&T[1]||""}function g(T){return(T=m.match(T))&&1<T.length&&T[2]||""}var l=a(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(m)&&/android/i.test(m),v=/nexus\s*[0-6]\s*/i.test(m),y=!v&&/nexus\s*[0-9]+/i.test(m),
A=/CrOS/.test(m),E=/silk/i.test(m),F=/sailfish/i.test(m),H=/tizen/i.test(m),I=/(web|hpw)os/i.test(m),M=/windows phone/i.test(m),N=!M&&/windows/i.test(m),X=!l&&!E&&/macintosh/i.test(m),W=!r&&!F&&!H&&!I&&/linux/i.test(m),ea=a(/edge\/(\d+(\.\d+)?)/i),Aa=a(/version\/(\d+(\.\d+)?)/i),Ka=/tablet/i.test(m),K=!Ka&&/[^-]mobi/i.test(m),aa=/xbox/i.test(m);/opera|opr|opios/i.test(m)?A={name:"Opera",opera:!0,version:Aa||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(m)?A={name:"Opera Coast",coast:!0,
version:Aa||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(m)?A={name:"Yandex Browser",yandexbrowser:!0,version:Aa||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(m)?A={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(m)?A={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(m)?A={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(m)?A={name:"Puffin",puffin:!0,
version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(m)?A={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(m)?A={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:M?(A={name:"Windows Phone",windowsphone:!0},ea?(A.msedge=!0,A.version=ea):(A.msie=!0,A.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(m)?A={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:A?A={name:"Chrome",chromeos:!0,
chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(m)?A={name:"Microsoft Edge",msedge:!0,version:ea}:/vivaldi/i.test(m)?A={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||Aa}:F?A={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(m)?A={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(m)?(A={name:"Firefox",firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},
/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(m)&&(A.firefoxos=!0)):E?A={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(m)?A={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(m)?A={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(m)||/rim\stablet/i.test(m)?A={name:"BlackBerry",blackberry:!0,version:Aa||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:I?(A={name:"WebOS",webos:!0,version:Aa||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},
/touchpad\//i.test(m)&&(A.touchpad=!0)):/bada/i.test(m)?A={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:H?A={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||Aa}:/qupzilla/i.test(m)?A={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||Aa}:/chromium/i.test(m)?A={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||Aa}:/chrome|crios|crmo/i.test(m)?A={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
r?A={name:"Android",version:Aa}:/safari|applewebkit/i.test(m)?(A={name:"Safari",safari:!0},Aa&&(A.version=Aa)):l?(A={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},Aa&&(A.version=Aa)):A=/googlebot/i.test(m)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||Aa}:{name:a(/^(.*)\/(.*) /),version:g(/^(.*)\/(.*) /)};!A.msedge&&/(apple)?webkit/i.test(m)?(/(apple)?webkit\/537\.36/i.test(m)?(A.name=A.name||"Blink",A.blink=!0):(A.name=A.name||"Webkit",A.webkit=!0),!A.version&&Aa&&(A.version=
Aa)):!A.opera&&/gecko\//i.test(m)&&(A.name=A.name||"Gecko",A.gecko=!0,A.version=A.version||a(/gecko\/(\d+(\.\d+)?)/i));A.msedge||!r&&!A.silk?l?(A[l]=!0,A.ios=!0):X?A.mac=!0:aa?A.xbox=!0:N?A.windows=!0:W&&(A.linux=!0):A.android=!0;N="";A.windowsphone?N=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(N=a(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):r?N=a(/android[ \/-](\d+(\.\d+)*)/i):A.webos?N=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):A.blackberry?N=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):
A.bada?N=a(/bada\/(\d+(\.\d+)*)/i):A.tizen&&(N=a(/tizen[\/\s](\d+(\.\d+)*)/i));N&&(A.osversion=N);N=N.split(".")[0];if(Ka||y||"ipad"==l||r&&(3==N||4<=N&&!K)||A.silk)A.tablet=!0;else if(K||"iphone"==l||"ipod"==l||r||v||A.blackberry||A.webos||A.bada)A.mobile=!0;A.msedge||A.msie&&10<=A.version||A.yandexbrowser&&15<=A.version||A.vivaldi&&1<=A.version||A.chrome&&20<=A.version||A.firefox&&20<=A.version||A.safari&&6<=A.version||A.opera&&10<=A.version||A.ios&&A.osversion&&6<=A.osversion.split(".")[0]||A.blackberry&&
10.1<=A.version||A.chromium&&20<=A.version?A.a=!0:A.msie&&10>A.version||A.chrome&&20>A.version||A.firefox&&20>A.version||A.safari&&6>A.version||A.opera&&10>A.version||A.ios&&A.osversion&&6>A.osversion.split(".")[0]||A.chromium&&20>A.version?A.c=!0:A.x=!0;return A}function k(m,a){var g=[],l;if(Array.prototype.map)return Array.prototype.map.call(m,a);for(l=0;l<m.length;l++)g=a(m[l]);return g}function n(m){var a=Math.max(m[0].split(".").length,m[1].split(".").length);for(m=k(m,function(g){var l=a-g.split(".").length;
g+=Array(l+1).join(".0");return k(g.split("."),function(r){return Array(20-r.length).join("0")+r}).reverse()});0<=--a;){if(m[0][a]>m[1][a])return 1;if(m[0][a]===m[1][a]){if(0===a)return 0}else return-1}}function b(m,a,g){var l=e;"string"===typeof a&&(g=a,a=void 0);void 0===a&&(a=!1);g&&(l=f(g));g=""+l.version;for(var r in m)if(m.hasOwnProperty(r)&&l[r])return 0>n([g,m[r]]);return a}var e=f("undefined"!==typeof navigator?navigator.userAgent:"");e.test=function(m){for(var a=0;a<m.length;++a){var g=
m[a];if("string"===typeof g&&g in e)return!0}return!1};e.isUnsupportedBrowser=b;e.compareVersions=n;e.check=function(m,a,g){return!b(m,a,g)};e._detect=f;return e});var Ms=OT,Ns=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Ns.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var f=(document.location.hash||document.location.search).slice(1);f=f&&f.split("&");var k={};if(f)for(var n=0;n<f.length;n++){var b=f[n].split("="),e=b[0],m=!0;if(1<b.length&&
(m=decodeURIComponent(b.slice(1).join("=")),m.match(/^(true|false|null|[0-9"[{].*)$/)))try{m=JSON.parse(m)}catch(a){"["===m[0]&&(m=m.slice(1,-1).split(","))}k[e]=m}return k};Ns.Rectangle=Le;Ns.Color=Hg;Ns.bowser=Ms;Ns.isMac=!!Ns.bowser.mac;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(f){return f.hasOwnProperty("_cachedKeyhandlers")&&(f._cachedKeyhandlers=null)});Ns.config={onloadURLQuery:Ns.parseURLQuery(),defaultShadow:{fast:!0,distance:18,blur:30,color:Ns.Color.black.withA(.2),
spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(f){return f.includes("lively.morphic/objectdb")||f.includes("lively.next-node_modules")||f.includes("node_modules")||f.includes("custom-npm-modules")||f.includes("mocha-es6")||
f.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",
command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},
{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},
command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",
direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",
args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",
command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",
args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",
offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},
command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S 4",win:"Ctrl-Shift-L R E S 4"},command:{command:"resize active window",args:{how:"col4"}}},{keys:{mac:"Meta-Shift-L R E S 5",win:"Ctrl-Shift-L R E S 5"},command:{command:"resize active window",args:{how:"col5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-1",win:"Ctrl-Shift-L R E S Alt-1"},command:{command:"resize active window",
args:{how:"quadrant1"}}},{keys:{mac:"Meta-Shift-L R E S Alt-2",win:"Ctrl-Shift-L R E S Alt-2"},command:{command:"resize active window",args:{how:"quadrant2"}}},{keys:{mac:"Meta-Shift-L R E S Alt-3",win:"Ctrl-Shift-L R E S Alt-3"},command:{command:"resize active window",args:{how:"quadrant3"}}},{keys:{mac:"Meta-Shift-L R E S Alt-4",win:"Ctrl-Shift-L R E S Alt-4"},command:{command:"resize active window",args:{how:"quadrant4"}}},{keys:{mac:"Meta-Shift-L R E S Alt-5",win:"Ctrl-Shift-L R E S Alt-5"},command:{command:"resize active window",
args:{how:"quadrant5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-6",win:"Ctrl-Shift-L R E S Alt-6"},command:{command:"resize active window",args:{how:"quadrant6"}}},{keys:{mac:"Meta-Shift-L R E S Alt-7",win:"Ctrl-Shift-L R E S Alt-7"},command:{command:"resize active window",args:{how:"quadrant7"}}},{keys:{mac:"Meta-Shift-L R E S Alt-8",win:"Ctrl-Shift-L R E S Alt-8"},command:{command:"resize active window",args:{how:"quadrant8"}}},{keys:{mac:"Meta-Shift-L R E S Alt-9",win:"Ctrl-Shift-L R E S Alt-9"},command:{command:"resize active window",
args:{how:"quadrant9"}}},{keys:{mac:"Meta-Shift-L R E S Alt-0",win:"Ctrl-Shift-L R E S Alt-0"},command:{command:"resize active window",args:{how:"quadrant0"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",
args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S H T",win:"Ctrl-Shift-L R E S H T"},command:{command:"resize active window",args:{how:"halftop"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},
{keys:{mac:"Meta-Shift-L R E S H B",win:"Ctrl-Shift-L R E S H B"},command:{command:"resize active window",args:{how:"halfbottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,
useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},
command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},
command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},
command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},
{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},
command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",
mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",
mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",
args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",
mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},
{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},
{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",
mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},
{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},
{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},
{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",
mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},
{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Ns.Rectangle.inset(4,
2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:"/lively.morphic/assets/ibm-plex/css/ibm-plex.css",fontAwesome:"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css",inconsolata:"/lively.morphic/assets/inconsolata/inconsolata.css"}};var Cn=Ba("aa",Ns.config);Ns.default=Cn;var Ki=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");
Ki.styleProps=jr;Ki.addTransform=qF;Ki.addTransformOrigin=function(f,k){if(f=f.origin)k.transformOrigin=f.x+"px "+f.y+"px"};Ki.addDisplay=function(f,k){f=f.visible;null!=f&&(k.display=f?"":"none")};Ki.addBorderRadius=function(f,k){var n=f.borderRadiusLeft,b=f.borderRadiusRight,e=f.borderRadiusBottom;f=f.borderRadiusTop;k.borderRadius=f+"px "+f+"px "+e+"px "+e+"px / "+n+"px "+b+"px "+b+"px "+n+"px"};Ki.addBorder=function(f,k){var n=f.borderWidthLeft,b=f.borderColorLeft,e=f.borderStyleLeft,m=f.borderWidthRight,
a=f.borderColorRight,g=f.borderStyleRight,l=f.borderColor,r=f.borderWidthBottom,v=f.borderColorBottom,y=f.borderStyleBottom,A=f.borderWidthTop,E=f.borderColorTop;f=f.borderStyleTop;var F=function(H){return Ki.bowser.safari?Ki.string.camelize(H):H};k[F("border-left-style")]=""+e;k[F("border-right-style")]=""+g;k[F("border-bottom-style")]=""+y;k[F("border-top-style")]=""+f;k[F("border-left-width")]=n+"px";k[F("border-right-width")]=m+"px";k[F("border-bottom-width")]=r+"px";k[F("border-top-width")]=
A+"px";k[F("border-top-color")]=E?E.toString():"transparent";k[F("border-right-color")]=a?a.toString():"transparent";k[F("border-bottom-color")]=v?v.toString():"transparent";k[F("border-left-color")]=b?b.toString():"transparent";l&&l.isGradient&&(k["border-image"]=l.toString())};Ki.addFill=function(f,k){(f=f.fill)?f.isGradient?k.backgroundImage=f.toString():k.background=f.toString():k.background=Ki.Color.transparent.toString()};Ki.addExtentStyle=function(f,k){f=f.extent;k.width=f.x+"px";k.height=
f.y+"px"};Ki.shadowCss=function(f){return f.dropShadow?f.dropShadow.toFilterCss():""};Ki.addShadowStyle=function(f,k){f.isSvgMorph||f.isImage?k.filter=Ki.shadowCss(f):(f=f.dropShadow)&&f.fast||f&&f.inset?k.boxShadow=f?f.toCss():"none":k.filter=f?f.toFilterCss():""};Ki.addSvgAttributes=aA;Ki.getSvgVertices=qw;Ki.addPathAttributes=bA;Ki.addSvgBorderStyle=function(f,k){var n=f.borderStyle.valueOf();"dashed"===n?(f=f.borderWidth.valueOf(),k["stroke-dasharray"]=1.61*f+" "+f):"dotted"===n&&(k["stroke-dasharray"]=
"1 "+2*f.borderWidth.valueOf(),k["stroke-linecap"]="round",k["stroke-linejoin"]="round");return k};Ki.Color=Hg;Ki.string=ti;Ki.bowser=Ms;Ki.styleProps=jr;Ki.styleProps=jr;Ki.addTransform=qF;Ki.addTransform=qF;Ki.addSvgAttributes=aA;Ki.addSvgAttributes=aA;Ki.getSvgVertices=qw;Ki.getSvgVertices=qw;Ki.addPathAttributes=bA;Ki.addPathAttributes=bA;var bf=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");bf.defaultStyle=Rx;bf.MorphAfterRenderHook=function(f,k){this.morph=
f;this.renderer=k};bf.Animation=function(f){this.morph=f};bf.SvgAnimation=rF;bf.defaultAttributes=rw;bf.svgAttributes=EC;bf.pathAttributes=cA;bf.renderGradient=FC;bf.initDOMState=function(f,k){f.rootNode.appendChild(f.domNode);f.ensureDefaultCSS().then(function(){return bf.promise.delay(500)}).then(function(){return k.env.fontMetric&&k.env.fontMetric.reset()}).then(function(){return k.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=(n.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||
n.forceRerender()}})}).catch(function(n){return console.error(n)})};bf.renderMorph=GC;bf.renderSubTree=HC;bf.renderRootMorph=IC;bf.vdom=WG;bf.parser=Fka;bf.num=Km;bf.obj=Ag;bf.arr=eg;bf.properties=xp;bf.promise=ph;bf.Color=Hg;bf.RadialGradient=Mp;bf.pt=Ii;bf.Point=Jg;bf.LinearGradient=An;bf.rect=Cl;bf.config=Cn;bf.styleProps=jr;bf.addSvgAttributes=aA;bf.addPathAttributes=bA;bf.bowser=Ms;var bM=bf.vdom;bf.h=bM.h;bf.diff=bM.diff;bf.patch=bM.patch;bf.createNode=bM.create;bf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
bf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
bf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var Os=Ba("bi",function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=k.hasOwnProperty("ShadowObject")&&"function"===typeof k.ShadowObject?k.ShadowObject:k.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){bf.obj.isBoolean(b)&&(b=bf.config.defaultShadow);var e=b;b=e.rotation;var m=e.distance,
a=e.blur,g=e.color,l=e.morph,r=e.inset,v=e.spread;e=e.fast;this.rotation=bf.obj.isNumber(b)?b:45;this.distance=bf.obj.isNumber(m)?m:2;this.blur=bf.obj.isNumber(a)?a:6;this.inset=r||!1;this.spread=v||0;this.color=g||bf.Color.gray.darker();this.morph=l;this.fast=e}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),e=b.distance,m=b.rotation,a=b.color,g=b.inset,l=b.blur,r=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:e,rotation:m,color:a,inset:g,blur:l,spread:r,fast:b}).map(function(v){var y=$jscomp.makeIterator(v);v=y.next().value;y=y.next().value;return v+":"+y})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(b){return new bf.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},b))}},{key:"toCss",value:function(){var b=this.color,e=this.inset,m=this.blur,a=this.spread,g=bf.Point.polar(this.distance,bf.num.toRadians(this.rotation)),l=g.y;return(e?"inset":"")+" "+b.toString()+" "+g.x.toFixed(2)+"px "+l.toFixed(2)+"px "+m+"px "+a+"px"}},{key:"toJson",value:function(){return bf.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(b){return!!b&&bf.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,e=this.color,m=bf.Point.polar(this.distance,bf.num.toRadians(this.rotation)),a=m.x;m=m.y;b=bf.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+m.toFixed(2)+"px "+b.toFixed(2)+"px "+e.toString()+")"}},{key:"interpolate",value:function(b,e){return new bf.ShadowObject({distance:bf.num.interpolate(b,this.distance,e.distance),rotation:bf.num.interpolate(b,this.rotation,
e.rotation),color:this.color.interpolate(b,e.color),blur:bf.num.interpolate(b,this.blur,e.blur),spread:bf.num.interpolate(b,this.spread,e.spread),inset:e.inset,fast:e.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],k,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));bf.ShadowObject=Os;bf.ShadowObject=Os;bf.ShadowObject=Os;bf.defaultStyle=Rx;bf.defaultStyle=Rx;bf.MorphAfterRenderHook.prototype.hook=function(f,k,n,b){var e=this;b=void 0===b?0:b;var m=!!f.parentNode;m&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,f));m||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(f)):
(b++,setTimeout(function(){return e.hook(f,k,n,b)},20*b))};bf.MorphAfterRenderHook.prototype.updateScroll=function(f,k,n){var b=this,e=f.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(k&&e)return e.then(function(){return b.updateScroll(f,k,!0)});if(!f.isWorld&&k){e=f.scroll;var m=e.x,a=e.y;if(!f._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var g=f.isText&&f.viewState.fastScroll?k.querySelector(".scrollLayer"):k;!f._skipScrollUpdate&&g&&(g.scrollTop!==
a&&(g.scrollTop=a),g.scrollLeft!==m&&(g.scrollLeft=m),!n&&requestAnimationFrame(function(){g.scrollTop!==a&&(g.scrollTop=a);g.scrollLeft!==m&&(g.scrollLeft=m)},f.id))}}};bf.MorphAfterRenderHook.prototype.unhook=function(f,k){};bf.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(f,k){var n=this;f.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,k.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,k)})};bf.Animation.prototype.hook=function(f){this.morph._animationQueue.startAnimationsFor(f)};
bf.SvgAnimation=rF;bf.SvgAnimation=rF;bf.SvgAnimation.prototype.hook=function(f){this.morph._animationQueue.startSvgAnimationsFor(f,this.type)};bf.defaultAttributes=rw;bf.defaultAttributes=rw;bf.svgAttributes=EC;bf.svgAttributes=EC;bf.pathAttributes=cA;bf.pathAttributes=cA;bf.renderGradient=FC;bf.renderGradient=FC;bf.renderMorph=GC;bf.renderMorph=GC;bf.renderSubTree=HC;bf.renderSubTree=HC;bf.renderRootMorph=IC;bf.renderRootMorph=IC;var Kc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,PT={};!function(f,k){k(PT)}(PT,function(f){function k(na){return 10===na||13===na||8232===na||8233===na||32===na||9===na||11===na||12===na||160===na||5760<=na&&0<=aB.indexOf(na)}function n(na){return 48<=na&&57>=na}function b(na){(this||Kc).index=0;(this||Kc).path=na;(this||Kc).max=na.length;(this||Kc).result=[];(this||Kc).param=0;(this||Kc).err="";(this||Kc).segmentStart=0;(this||Kc).data=[]}function e(na){for(;na.index<na.max&&k(na.path.charCodeAt(na.index));)na.index++}function m(na){var Na,
Ea=na.index,Xa=Ea,mb=na.max,Zb=!1,bb=!1,Tb=!1,Kb=!1;if(Xa>=mb)return void(na.err="SvgPath: missed param (at pos "+Xa+")");if(Na=na.path.charCodeAt(Xa),43!==Na&&45!==Na||(Xa++,Na=Xa<mb?na.path.charCodeAt(Xa):0),!n(Na)&&46!==Na)return void(na.err="SvgPath: param should start with 0..9 or `.` (at pos "+Xa+")");if(46!==Na){if(Zb=48===Na,Xa++,Na=Xa<mb?na.path.charCodeAt(Xa):0,Zb&&Xa<mb&&Na&&n(Na))return void(na.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Ea+")");for(;Xa<mb&&
n(na.path.charCodeAt(Xa));)Xa++,bb=!0;Na=Xa<mb?na.path.charCodeAt(Xa):0}if(46===Na){Kb=!0;for(Xa++;n(na.path.charCodeAt(Xa));)Xa++,Tb=!0;Na=Xa<mb?na.path.charCodeAt(Xa):0}if(101===Na||69===Na){if(Kb&&!bb&&!Tb||(Xa++,Na=Xa<mb?na.path.charCodeAt(Xa):0,43!==Na&&45!==Na||Xa++,!(Xa<mb&&n(na.path.charCodeAt(Xa)))))return void(na.err="SvgPath: invalid float exponent (at pos "+Xa+")");for(;Xa<mb&&n(na.path.charCodeAt(Xa));)Xa++}na.index=Xa;na.param=parseFloat(na.path.slice(Ea,Xa))+0}function a(){if(!((this||
Kc)instanceof a))return new a;(this||Kc).queue=[];(this||Kc).cache=null}function g(na,Na,Ea,Xa){var mb=(na*Ea+Na*Xa)/(Math.sqrt(na*na+Na*Na)*Math.sqrt(na*na+Na*Na));return 1<mb&&(mb=1),-1>mb&&(mb=-1),(0>na*Xa-Na*Ea?-1:1)*Math.acos(mb)}function l(na,Na,Ea,Xa,mb,Zb,bb,Tb,Kb,fd){var Ob=fd*(na-Ea)/2+Kb*(Na-Xa)/2,de=-Kb*(na-Ea)/2+fd*(Na-Xa)/2,De=bb*bb,Of=Tb*Tb,Kf=Ob*Ob,We=de*de,Pf=De*Of-De*We-Of*Kf;0>Pf&&(Pf=0);Pf=Math.sqrt(Pf/(De*We+Of*Kf))*(mb===Zb?-1:1);mb=Pf*bb/Tb*de;Pf=Pf*-Tb/bb*Ob;na=fd*mb-Kb*Pf+
(na+Ea)/2;Na=Kb*mb+fd*Pf+(Na+Xa)/2;Xa=(Ob-mb)/bb;Kb=(de-Pf)/Tb;bb=(-Ob-mb)/bb;de=(-de-Pf)/Tb;Tb=g(1,0,Xa,Kb);de=g(Xa,Kb,bb,de);return 0===Zb&&0<de&&(de-=bB),1===Zb&&0>de&&(de+=bB),[na,Na,Tb,de]}function r(na,Na){var Ea=4/3*Math.tan(Na/4),Xa=Math.cos(na),mb=Math.sin(na),Zb=Math.cos(na+Na);na=Math.sin(na+Na);return[Xa,mb,Xa-mb*Ea,mb+Xa*Ea,Zb+na*Ea,na-Zb*Ea,Zb,na]}function v(na,Na,Ea){if(!((this||Kc)instanceof v))return new v(na,Na,Ea);(this||Kc).rx=na;(this||Kc).ry=Na;(this||Kc).ax=Ea}function y(na){if(!((this||
Kc)instanceof y))return new y(na);na=new b(na);var Na=na.max;for(e(na);na.index<Na&&!na.err.length;)a:{var Ea,Xa=void 0,mb=na,Zb=mb.max;mb.segmentStart=mb.index;var bb=mb.path.charCodeAt(mb.index);b:{switch(32|bb){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:bb=!0;break b}bb=!1}if(bb){if(Xa=xv[mb.path[mb.index].toLowerCase()],mb.index++,e(mb),mb.data=[],Xa)for(bb=!1;;){for(Ea=Xa;0<Ea;Ea--){if(m(mb),mb.err.length)break a;mb.data.push(mb.param);e(mb);
bb=!1;mb.index<Zb&&44===mb.path.charCodeAt(mb.index)&&(mb.index++,e(mb),bb=!0)}if(!bb){if(mb.index>=mb.max)break;Ea=mb.path.charCodeAt(mb.index);if(!(48<=Ea&&57>=Ea||43===Ea||45===Ea||46===Ea))break}}Zb=mb;mb=Zb.path[Zb.segmentStart];Xa=mb.toLowerCase();bb=Zb.data;if("m"===Xa&&2<bb.length&&(Zb.result.push([mb,bb[0],bb[1]]),bb=bb.slice(2),Xa="l",mb="m"===mb?"l":"L"),"r"===Xa)Zb.result.push([mb].concat(bb));else for(;bb.length>=xv[Xa]&&(Zb.result.push([mb].concat(bb.splice(0,xv[Xa]))),xv[Xa]););}else mb.err=
"SvgPath: bad command "+mb.path[mb.index]+" (at pos "+mb.index+")"}na=(na.err.length?na.result=[]:na.result.length&&(0>"mM".indexOf(na.result[0][0])?(na.err="SvgPath: string should start with `M` or `m`",na.result=[]):na.result[0][0]="M"),{err:na.err,segments:na.result});(this||Kc).segments=na.segments;(this||Kc).err=na.err;(this||Kc).__stack=[]}function A(na,Na,Ea,Xa,mb,Zb,bb,Tb){(this||Kc).a={x:na,y:Na};(this||Kc).b={x:Ea,y:Xa};(this||Kc).c={x:mb,y:Zb};(this||Kc).d={x:bb,y:Tb};null!==bb&&void 0!==
bb&&null!==Tb&&void 0!==Tb?((this||Kc).getArcLength=W,(this||Kc).getPoint=M,(this||Kc).getDerivative=F):((this||Kc).getArcLength=N,(this||Kc).getPoint=I,(this||Kc).getDerivative=E);this.init()}function E(na,Na,Ea){return{x:2*(1-Ea)*(na[1]-na[0])+2*Ea*(na[2]-na[1]),y:2*(1-Ea)*(Na[1]-Na[0])+2*Ea*(Na[2]-Na[1])}}function F(na,Na,Ea){return I([3*(na[1]-na[0]),3*(na[2]-na[1]),3*(na[3]-na[2])],[3*(Na[1]-Na[0]),3*(Na[2]-Na[1]),3*(Na[3]-Na[2])],Ea)}function H(na,Na,Ea,Xa,mb){for(var Zb=1,bb=na/Na,Tb=(na-Ea(Xa,
mb,bb))/Na;.001<Zb;){var Kb=Ea(Xa,mb,bb+Tb),fd=Ea(Xa,mb,bb-Tb);Kb=Math.abs(na-Kb)/Na;fd=Math.abs(na-fd)/Na;Kb<Zb?(Zb=Kb,bb+=Tb):fd<Zb?(Zb=fd,bb-=Tb):Tb/=2}return bb}function I(na,Na,Ea){return{x:(1-Ea)*(1-Ea)*na[0]+2*(1-Ea)*Ea*na[1]+Ea*Ea*na[2],y:(1-Ea)*(1-Ea)*Na[0]+2*(1-Ea)*Ea*Na[1]+Ea*Ea*Na[2]}}function M(na,Na,Ea){return{x:(1-Ea)*(1-Ea)*(1-Ea)*na[0]+3*(1-Ea)*(1-Ea)*Ea*na[1]+3*(1-Ea)*Ea*Ea*na[2]+Ea*Ea*Ea*na[3],y:(1-Ea)*(1-Ea)*(1-Ea)*Na[0]+3*(1-Ea)*(1-Ea)*Ea*Na[1]+3*(1-Ea)*Ea*Ea*Na[2]+Ea*Ea*Ea*Na[3]}}
function N(na,Na,Ea){void 0===Ea&&(Ea=1);var Xa=na[0]-2*na[1]+na[2],mb=Na[0]-2*Na[1]+Na[2],Zb=2*na[1]-2*na[0],bb=2*Na[1]-2*Na[0],Tb=4*(Xa*Xa+mb*mb);if(0===Tb)return Ea*Math.sqrt(Math.pow(na[2]-na[0],2)+Math.pow(Na[2]-Na[0],2));na=4*(Xa*Zb+mb*bb)/(2*Tb);Ea+=na;Zb=(Zb*Zb+bb*bb)/Tb-na*na;return Math.sqrt(Tb)/2*(Ea*Math.sqrt(Ea*Ea+Zb)-na*Math.sqrt(na*na+Zb)+Zb*Math.log(Math.abs((Ea+Math.sqrt(Ea*Ea+Zb))/(na+Math.sqrt(na*na+Zb)))))}function X(na,Na,Ea){var Xa,mb=Ea.length-1;if(0===mb)return 0;if(0===na){for(Xa=
na=0;Xa<=mb;Xa++)na+=QT[mb][Xa]*Math.pow(1-Na,mb-Xa)*Math.pow(Na,Xa)*Ea[Xa];return na}var Zb=Array(mb);for(Xa=0;Xa<mb;Xa++)Zb[Xa]=mb*(Ea[Xa+1]-Ea[Xa]);return X(na-1,Na,Zb)}function W(na,Na,Ea){var Xa,mb;void 0===Ea&&(Ea=1);Ea/=2;for(mb=Xa=0;20>mb;mb++){var Zb=Ea*RT[20][mb]+Ea;var bb=ST[20][mb],Tb=Na,Kb=Zb;Zb=X(1,Kb,na);Tb=X(1,Kb,Tb);Xa+=bb*Math.sqrt(Zb*Zb+Tb*Tb)}return Ea*Xa}function ea(na,Na,Ea,Xa){var mb=na*Ea+Na*Xa;return 1<mb&&(mb=1),-1>mb&&(mb=-1),(0>na*Xa-Na*Ea?-1:1)*Math.acos(mb)}function Aa(na,
Na,Ea,Xa,mb,Zb,bb,Tb,Kb,fd){var Ob=fd*(na-Ea)/2+Kb*(Na-Xa)/2,de=-Kb*(na-Ea)/2+fd*(Na-Xa)/2,De=bb*bb,Of=Tb*Tb,Kf=Ob*Ob,We=de*de,Pf=De*Of-De*We-Of*Kf;0>Pf&&(Pf=0);Pf=Math.sqrt(Pf/(De*We+Of*Kf))*(mb===Zb?-1:1);mb=Pf*bb/Tb*de;Pf=Pf*-Tb/bb*Ob;na=fd*mb-Kb*Pf+(na+Ea)/2;Na=Kb*mb+fd*Pf+(Na+Xa)/2;Xa=(Ob-mb)/bb;Kb=(de-Pf)/Tb;bb=(-Ob-mb)/bb;de=(-de-Pf)/Tb;Tb=ea(1,0,Xa,Kb);de=ea(Xa,Kb,bb,de);return 0===Zb&&0<de&&(de-=cB),1===Zb&&0>de&&(de+=cB),[na,Na,Tb,de]}function Ka(na,Na){var Ea=4/3*Math.tan(Na/4),Xa=Math.cos(na),
mb=Math.sin(na),Zb=Math.cos(na+Na);na=Math.sin(na+Na);return[Xa,mb,Xa-mb*Ea,mb+Xa*Ea,Zb+na*Ea,na-Zb*Ea,Zb,na]}function K(na,Na,Ea,Xa,mb,Zb,bb,Tb,Kb){var fd=0,Ob=[],de=[];TT(na,Na,Ea,Xa,mb,Zb,bb,Tb,Kb).forEach(function(De){De=new wr(De[0],De[1],De[2],De[3],De[4],De[5],De[6],De[7]);var Of=De.getTotalLength();fd+=Of;Ob.push(Of);de.push(De)});(this||Kc).length=fd;(this||Kc).partialLengths=Ob;(this||Kc).curves=de}function aa(na,Na,Ea,Xa){(this||Kc).x0=na;(this||Kc).x1=Na;(this||Kc).y0=Ea;(this||Kc).y1=
Xa}function T(na,Na){return Math.sqrt((na[0]-Na[0])*(na[0]-Na[0])+(na[1]-Na[1])*(na[1]-Na[1]))}function U(na,Na,Ea){return[na[0]+(Na[0]-na[0])*Ea,na[1]+(Na[1]-na[1])*Ea]}function pa(na,Na,Ea){var Xa=na.map(function(mb,Zb){return fa(mb,Na[Zb])});return function(mb){var Zb=Xa.map(function(bb){return bb(mb)});return Ea?va(Zb):Zb}}function fa(na,Na){return function(Ea){return na.map(function(Xa,mb){return Xa+Ea*(Na[mb]-Xa)})}}function oa(na){return"number"==typeof na&&isFinite(na)}function hb(na){var Na;
a:{for(Na=0;Na<na.length-2;Na++){var Ea=na[Na],Xa=na[Na+1],mb=na[Na+2];if(Ea[0]*(Xa[1]-mb[1])+Xa[0]*(mb[1]-Ea[1])+mb[0]*(Ea[1]-Xa[1])){Na=!0;break a}}Na=!1}if(Na){mb=-1;var Zb=na.length,bb=0,Tb=0,Kb=na[Zb-1];for(Na=0;++mb<Zb;)Ea=Kb,Kb=na[mb],Na+=Xa=Ea[0]*Kb[1]-Kb[0]*Ea[1],bb+=(Ea[0]+Kb[0])*Xa,Tb+=(Ea[1]+Kb[1])*Xa;na=(Na*=3,[bb/Na,Tb/Na])}else na=[(na[0][0]+na[na.length-1][0])/2,(na[0][1]+na[na.length-1][1])/2];return na}function Cb(na){return na.toString().split("M").map(function(Na,Ea){return Na=
Na.trim(),Ea&&Na?"M"+Na:Na}).filter(function(Na){return Na})}function va(na){return"M"+na.join("L")+"Z"}function ma(na,Na){var Ea=na.length+Na;Na=Sw(na)/Na;for(var Xa=0,mb=0,Zb=Na/2;na.length<Ea;){var bb=na[Xa],Tb=na[(Xa+1)%na.length],Kb=T(bb,Tb);Zb<=mb+Kb?(na.splice(Xa+1,0,Kb?U(bb,Tb,(Zb-mb)/Kb):bb.slice(0)),Zb+=Na):(mb+=Kb,Xa++)}}function ua(na,Na){var Ea;if("string"==typeof na){na=(new cM(na)).abs();a:{var Xa=na.segments||[];var mb=[];if(Xa.length&&"M"===Xa[0][0]){for(var Zb=0;Zb<Xa.length;Zb++){var bb=
Xa[Zb],Tb=bb[0],Kb=bb[1];bb=bb[2];if("M"===Tb&&Zb||"Z"===Tb)break;if("M"===Tb||"L"===Tb)mb.push([Kb,bb]);else if("H"===Tb)mb.push([Kb,mb[mb.length-1][1]]);else{if("V"!==Tb){Xa=!1;break a}mb.push([mb[mb.length-1][0],Kb])}}Xa=!!mb.length&&{ring:mb}}else Xa=!1}if(!Xa){mb=Cb(na)[0];na=[];Xa=3;if(!mb)throw new TypeError(XG);a:{if("undefined"!=typeof window&&window&&window.document)try{var fd=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Ob=(fd.setAttributeNS(null,"d",mb),fd);
break a}catch(de){}Ob=UT(mb)}fd=Ob;Ob=fd.getTotalLength();Na&&oa(Na)&&0<Na&&(Xa=Math.max(Xa,Math.ceil(Ob/Na)));for(mb=0;mb<Xa;mb++)Zb=fd.getPointAtLength(Ob*mb/Xa),na.push([Zb.x,Zb.y]);Xa={ring:na,skipBisect:!0}}Ob=Xa;na=Ob.ring;Xa=Ob.skipBisect}else if(!Array.isArray(na))throw new TypeError(XG);if(Ea=na.slice(0),!Ma(Ea))throw new TypeError(XG);1<Ea.length&&1E-9>T(Ea[0],Ea[Ea.length-1])&&Ea.pop();0<Fy(Ea)&&Ea.reverse();if(!Xa&&Na&&oa(Na)&&0<Na)for(void 0===Na&&(Na=1/0),Ob=0;Ob<Ea.length;Ob++)for(fd=
Ea[Ob],na=Ob===Ea.length-1?Ea[0]:Ea[Ob+1];T(fd,na)>Na;)na=U(fd,na,.5),Ea.splice(Ob+1,0,na);return Ea}function Ma(na){return na.every(function(Na){return Array.isArray(Na)&&2<=Na.length&&oa(Na[0])&&oa(Na[1])})}function Lb(na,Na,Ea){var Xa;return Xa=na.length-Na.length,ma(na,0>Xa?-1*Xa:0),ma(Na,0<Xa?Xa:0),dM(na,Na),pa(na,Na,Ea)}function ic(na,Na,Ea){Ea=Ea||2;var Xa=Na&&Na.length,mb=Xa?Na[0]*Ea:na.length,Zb=Vb(na,0,mb,Ea,!0),bb=[];if(!Zb)return bb;var Tb;if(Xa){var Kb=Ea,fd;var Ob=[];Xa=0;for(fd=Na.length;Xa<
fd;Xa++){var de=Na[Xa]*Kb;var De=Xa<fd-1?Na[Xa+1]*Kb:na.length;de=Vb(na,de,De,Kb,!1);de===de.next&&(de.steiner=!0);Ob.push(la(de))}Ob.sort(Rb);for(Xa=0;Xa<Ob.length;Xa++){Na=Ob[Xa];Kb=Zb;if(Kb=zd(Na,Kb))Na=Md(Kb,Na),jc(Na,Na.next);Zb=jc(Zb,Zb.next)}}if(na.length>80*Ea){var Of=Tb=na[0];var Kf=Xa=na[1];for(Kb=Ea;Kb<mb;Kb+=Ea)Ob=na[Kb],Na=na[Kb+1],Ob<Of&&(Of=Ob),Na<Kf&&(Kf=Na),Ob>Tb&&(Tb=Ob),Na>Xa&&(Xa=Na);Tb=Math.max(Tb-Of,Xa-Kf)}return Pc(Zb,bb,Ea,Of,Kf,Tb),bb}function Vb(na,Na,Ea,Xa,mb){if(mb===0<
Oh(na,Na,Ea,Xa))for(mb=Na;mb<Ea;mb+=Xa)var Zb=Wc(mb,na[mb],na[mb+1],Zb);else for(mb=Ea-Xa;mb>=Na;mb-=Xa)Zb=Wc(mb,na[mb],na[mb+1],Zb);return Zb&&yb(Zb,Zb.next)&&(cf(Zb),Zb=Zb.next),Zb}function jc(na,Na){if(!na)return na;Na||(Na=na);var Ea=na;do if(na=!1,Ea.steiner||!yb(Ea,Ea.next)&&0!==Pa(Ea.prev,Ea,Ea.next))Ea=Ea.next;else{if(cf(Ea),(Ea=Na=Ea.prev)===Ea.next)return null;na=!0}while(na||Ea!==Na);return Na}function Pc(na,Na,Ea,Xa,mb,Zb,bb){if(na){if(!bb&&Zb){var Tb=na,Kb=Tb;do null===Kb.z&&(Kb.z=ld(Kb.x,
Kb.y,Xa,mb,Zb)),Kb.prevZ=Kb.prev,Kb=Kb.nextZ=Kb.next;while(Kb!==Tb);Kb.prevZ.nextZ=null;Kb.prevZ=null;Tb=Kb;var fd,Ob,de,De,Of=1;do{Kb=Tb;var Kf=Tb=null;for(de=0;Kb;){de++;var We=Kb;for(fd=De=0;fd<Of&&(De++,We=We.nextZ);fd++);for(fd=Of;0<De||0<fd&&We;)0===De?(Ob=We,We=We.nextZ,fd--):0!==fd&&We?Kb.z<=We.z?(Ob=Kb,Kb=Kb.nextZ,De--):(Ob=We,We=We.nextZ,fd--):(Ob=Kb,Kb=Kb.nextZ,De--),Kf?Kf.nextZ=Ob:Tb=Ob,Ob.prevZ=Kf,Kf=Ob;Kb=We}Kf.nextZ=null;Of*=2}while(1<de)}for(Kb=na;na.prev!==na.next;){Ob=na.prev;Tb=
na.next;if(Zb)a:{We=na;fd=Xa;var Pf=mb,lp=Zb;Kf=We.prev;de=We;De=We.next;if(0<=Pa(Kf,de,De))We=!1;else{var VT=Kf.x>de.x?Kf.x>De.x?Kf.x:De.x:de.x>De.x?de.x:De.x,WT=Kf.y>de.y?Kf.y>De.y?Kf.y:De.y:de.y>De.y?de.y:De.y;Of=ld(Kf.x<de.x?Kf.x<De.x?Kf.x:De.x:de.x<De.x?de.x:De.x,Kf.y<de.y?Kf.y<De.y?Kf.y:De.y:de.y<De.y?de.y:De.y,fd,Pf,lp);fd=ld(VT,WT,fd,Pf,lp);for(Pf=We.nextZ;Pf&&Pf.z<=fd;){if(Pf!==We.prev&&Pf!==We.next&&Da(Kf.x,Kf.y,de.x,de.y,De.x,De.y,Pf.x,Pf.y)&&0<=Pa(Pf.prev,Pf,Pf.next)){We=!1;break a}Pf=
Pf.nextZ}for(Pf=We.prevZ;Pf&&Pf.z>=Of;){if(Pf!==We.prev&&Pf!==We.next&&Da(Kf.x,Kf.y,de.x,de.y,De.x,De.y,Pf.x,Pf.y)&&0<=Pa(Pf.prev,Pf,Pf.next)){We=!1;break a}Pf=Pf.prevZ}We=!0}}else a:if(We=na,Kf=We.prev,de=We,De=We.next,0<=Pa(Kf,de,De))We=!1;else{for(Of=We.next.next;Of!==We.prev;){if(Da(Kf.x,Kf.y,de.x,de.y,De.x,De.y,Of.x,Of.y)&&0<=Pa(Of.prev,Of,Of.next)){We=!1;break a}Of=Of.next}We=!0}if(We)Na.push(Ob.i/Ea),Na.push(na.i/Ea),Na.push(Tb.i/Ea),cf(na),Kb=na=Tb.next;else if((na=Tb)===Kb){if(bb)if(1===
bb){bb=Na;Ob=Ea;Tb=na;do Kb=Tb.prev,We=Tb.next.next,!yb(Kb,We)&&ac(Kb,Tb,Tb.next,We)&&Od(Kb,We)&&Od(We,Kb)&&(bb.push(Kb.i/Ob),bb.push(Tb.i/Ob),bb.push(We.i/Ob),cf(Tb),cf(Tb.next),Tb=na=We),Tb=Tb.next;while(Tb!==na);na=Tb;Pc(na,Na,Ea,Xa,mb,Zb,2)}else{if(2===bb)a:{bb=na;do{for(Ob=bb.next.next;Ob!==bb.prev;){if(Tb=bb.i!==Ob.i){Tb=bb;Kb=Ob;if(We=Tb.next.i!==Kb.i&&Tb.prev.i!==Kb.i){b:{We=Tb;do{if(We.i!==Tb.i&&We.next.i!==Tb.i&&We.i!==Kb.i&&We.next.i!==Kb.i&&ac(We,We.next,Tb,Kb)){We=!0;break b}We=We.next}while(We!==
Tb);We=!1}We=!We}if(We=We&&Od(Tb,Kb)&&Od(Kb,Tb)){We=Tb;Kf=!1;de=(Tb.x+Kb.x)/2;Kb=(Tb.y+Kb.y)/2;do We.y>Kb!=We.next.y>Kb&&de<(We.next.x-We.x)*(Kb-We.y)/(We.next.y-We.y)+We.x&&(Kf=!Kf),We=We.next;while(We!==Tb);We=Kf}Tb=We}if(Tb){na=Md(bb,Ob);bb=jc(bb,bb.next);na=jc(na,na.next);Pc(bb,Na,Ea,Xa,mb,Zb);Pc(na,Na,Ea,Xa,mb,Zb);break a}Ob=Ob.next}bb=bb.next}while(bb!==na)}}else Pc(jc(na),Na,Ea,Xa,mb,Zb,1);break}}}}function Rb(na,Na){return na.x-Na.x}function zd(na,Na){var Ea=Na,Xa=na.x,mb=na.y,Zb=-1/0;do{if(mb<=
Ea.y&&mb>=Ea.next.y){var bb=Ea.x+(mb-Ea.y)*(Ea.next.x-Ea.x)/(Ea.next.y-Ea.y);if(bb<=Xa&&bb>Zb){if(Zb=bb,bb===Xa){if(mb===Ea.y)return Ea;if(mb===Ea.next.y)return Ea.next}var Tb=Ea.x<Ea.next.x?Ea:Ea.next}}Ea=Ea.next}while(Ea!==Na);if(!Tb)return null;if(Xa===Zb)return Tb.prev;var Kb;Na=Tb;bb=Tb.x;var fd=Tb.y,Ob=1/0;for(Ea=Tb.next;Ea!==Na;)Xa>=Ea.x&&Ea.x>=bb&&Da(mb<fd?Xa:Zb,mb,bb,fd,mb<fd?Zb:Xa,mb,Ea.x,Ea.y)&&((Kb=Math.abs(mb-Ea.y)/(Xa-Ea.x))<Ob||Kb===Ob&&Ea.x>Tb.x)&&Od(Ea,na)&&(Tb=Ea,Ob=Kb),Ea=Ea.next;
return Tb}function ld(na,Na,Ea,Xa,mb){return na=32767*(na-Ea)/mb,Na=32767*(Na-Xa)/mb,na=16711935&(na|na<<8),na=252645135&(na|na<<4),na=858993459&(na|na<<2),na=1431655765&(na|na<<1),Na=16711935&(Na|Na<<8),Na=252645135&(Na|Na<<4),Na=858993459&(Na|Na<<2),Na=1431655765&(Na|Na<<1),na|Na<<1}function la(na){var Na=na,Ea=na;do Na.x<Ea.x&&(Ea=Na),Na=Na.next;while(Na!==na);return Ea}function Da(na,Na,Ea,Xa,mb,Zb,bb,Tb){return 0<=(mb-bb)*(Na-Tb)-(na-bb)*(Zb-Tb)&&0<=(na-bb)*(Xa-Tb)-(Ea-bb)*(Na-Tb)&&0<=(Ea-bb)*
(Zb-Tb)-(mb-bb)*(Xa-Tb)}function Pa(na,Na,Ea){return(Na.y-na.y)*(Ea.x-Na.x)-(Na.x-na.x)*(Ea.y-Na.y)}function yb(na,Na){return na.x===Na.x&&na.y===Na.y}function ac(na,Na,Ea,Xa){return!!(yb(na,Na)&&yb(Ea,Xa)||yb(na,Xa)&&yb(Ea,Na))||0<Pa(na,Na,Ea)!=0<Pa(na,Na,Xa)&&0<Pa(Ea,Xa,na)!=0<Pa(Ea,Xa,Na)}function Od(na,Na){return 0>Pa(na.prev,na,na.next)?0<=Pa(na,Na,na.next)&&0<=Pa(na,na.prev,Na):0>Pa(na,Na,na.prev)||0>Pa(na,na.next,Na)}function Md(na,Na){var Ea=new Se(na.i,na.x,na.y),Xa=new Se(Na.i,Na.x,Na.y),
mb=na.next,Zb=Na.prev;return na.next=Na,Na.prev=na,Ea.next=mb,mb.prev=Ea,Xa.next=Ea,Ea.prev=Xa,Zb.next=Xa,Xa.prev=Zb,Xa}function Wc(na,Na,Ea,Xa){na=new Se(na,Na,Ea);return Xa?(na.next=Xa.next,na.prev=Xa,Xa.next.prev=na,Xa.next=na):(na.prev=na,na.next=na),na}function cf(na){na.next.prev=na.prev;na.prev.next=na.next;na.prevZ&&(na.prevZ.nextZ=na.nextZ);na.nextZ&&(na.nextZ.prevZ=na.prevZ)}function Se(na,Na,Ea){(this||Kc).i=na;(this||Kc).x=Na;(this||Kc).y=Ea;(this||Kc).prev=null;(this||Kc).next=null;(this||
Kc).z=null;(this||Kc).prevZ=null;(this||Kc).nextZ=null;(this||Kc).steiner=!1}function Oh(na,Na,Ea,Xa){for(var mb=0,Zb=Ea-Xa;Na<Ea;Na+=Xa)mb+=(na[Zb]-na[Na])*(na[Na+1]+na[Zb+1]),Zb=Na;return mb}function nh(na,Na){var Ea=Na.id,Xa=Na.bbox,mb=null==Na.properties?{}:Na.properties;na=nj(na,Na);return null==Ea&&null==Xa?{type:"Feature",properties:mb,geometry:na}:null==Xa?{type:"Feature",id:Ea,properties:mb,geometry:na}:{type:"Feature",id:Ea,bbox:Xa,properties:mb,geometry:na}}function nj(na,Na){function Ea(fd){return Tb(fd)}
function Xa(fd){for(var Ob=[],de=0,De=fd.length;de<De;++de){var Of=fd[de],Kf=Ob;Kf.length&&Kf.pop();for(var We=Kb[0>Of?~Of:Of],Pf=0,lp=We.length;Pf<lp;++Pf)Kf.push(Tb(We[Pf],Pf));if(0>Of)for(Of=Kf,Kf=Of.length,We=Kf-lp;We<--Kf;)lp=Of[We],Of[We++]=Of[Kf],Of[Kf]=lp}return 2>Ob.length&&Ob.push(Ob[0]),Ob}function mb(fd){for(fd=Xa(fd);4>fd.length;)fd.push(fd[0]);return fd}function Zb(fd){return fd.map(mb)}function bb(fd){var Ob=fd.type;switch(Ob){case "GeometryCollection":return{type:Ob,geometries:fd.geometries.map(bb)};
case "Point":fd=Tb(fd.coordinates);break;case "MultiPoint":fd=fd.coordinates.map(Ea);break;case "LineString":fd=Xa(fd.arcs);break;case "MultiLineString":fd=fd.arcs.map(Xa);break;case "Polygon":fd=Zb(fd.arcs);break;case "MultiPolygon":fd=fd.arcs.map(Zb);break;default:return null}return{type:Ob,coordinates:fd}}var Tb=eM(na.transform),Kb=na.arcs;return bb(Na)}function cj(na,Na){function Ea(Kb){switch(Kb.type){case "GeometryCollection":Kb.geometries.forEach(Ea);break;case "Polygon":Xa(Kb.arcs);break;
case "MultiPolygon":Kb.arcs.forEach(Xa)}}function Xa(Kb){Kb.forEach(function(fd){fd.forEach(function(Ob){(Zb[Ob=0>Ob?~Ob:Ob]||(Zb[Ob]=[])).push(Kb)})});bb.push(Kb)}function mb(Kb){Kb=nj(na,{type:"Polygon",arcs:[Kb]}).coordinates[0];for(var fd,Ob=-1,de=Kb.length,De=Kb[de-1],Of=0;++Ob<de;)fd=De,De=Kb[Ob],Of+=fd[0]*De[1]-fd[1]*De[0];return Math.abs(Of)}var Zb={},bb=[],Tb=[];return Na.forEach(Ea),bb.forEach(function(Kb){if(!Kb._){var fd=[],Ob=[Kb];Kb._=1;for(Tb.push(fd);Kb=Ob.pop();)fd.push(Kb),Kb.forEach(function(de){de.forEach(function(De){Zb[0>
De?~De:De].forEach(function(Of){Of._||(Of._=1,Ob.push(Of))})})})}}),bb.forEach(function(Kb){delete Kb._}),{type:"MultiPolygon",arcs:Tb.map(function(Kb){var fd=[];if(Kb.forEach(function(Kf){Kf.forEach(function(We){We.forEach(function(Pf){2>Zb[0>Pf?~Pf:Pf].length&&fd.push(Pf)})})}),fd=fM(na,fd),1<(Kb=fd.length))for(var Ob,de,De=1,Of=mb(fd[0]);De<Kb;++De)(Ob=mb(fd[De]))>Of&&(de=fd[0],fd[0]=fd[De],fd[De]=de,Of=Ob);return fd})}}function oj(na){return function(Na,Ea){return gM(na(Na),Ea)}}function Fj(na,
Na){var Ea={},Xa={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return na.forEach(function(mb){var Zb=[];mb.forEach(function(bb,Tb){Tb=bb[0]<bb[1]?bb.join(","):bb[1]+","+bb[0];bb=bb.map(function(Kb){return Na[Kb]});Tb in Ea?Zb.push(~Ea[Tb]):(Zb.push(Ea[Tb]=Xa.arcs.length),Xa.arcs.push(bb))});Xa.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(Fy(mb.map(function(bb){return Na[bb[0]]}))),arcs:[Zb]})}),Xa.objects.triangles.geometries.sort(function(mb,
Zb){return mb.area-Zb.area}),Xa}function Nj(na,Na){for(var Ea=na.objects.triangles.geometries,Xa=hM(function(mb){return mb.area}).left;Ea.length>Na;)!function(){var mb=Ea[0],Zb=XT(Ea)[0][0],bb=Ea[Zb],Tb=cj(na,[mb,bb]);Tb.area=mb.area+bb.area;Tb.type="Polygon";Tb.arcs=Tb.arcs[0];Ea.splice(Zb,1);Ea.shift();Ea.splice(Xa(Ea,Tb.area),0,Tb)}();if(Na>Ea.length)throw new RangeError("Can't collapse topology into "+Na+" pieces.");return iM(na,na.objects.triangles).features.map(function(mb){return mb.geometry.coordinates[0].pop(),
mb.geometry.coordinates[0]})}function Ui(na){na=jM(na.reduce(function(mb,Zb){return mb.concat([Zb[0]],[Zb[1]])},[]));for(var Na=[],Ea=0,Xa=na.length;Ea<Xa;Ea+=3)Na.push([[na[Ea],na[Ea+1]],[na[Ea+1],na[Ea+2]],[na[Ea+2],na[Ea]]]);return Na}function th(na,Na,Ea){function Xa(bb,Tb,Kb){void 0===Tb&&(Tb=[]);void 0===Kb&&(Kb=0);for(var fd=0;fd<bb.length;fd++){var Ob=bb.splice(fd,1),de=Ea[Ob[0]][Tb.length];Kb+de<mb&&(bb.length?Xa(bb.slice(),Tb.concat(Ob),Kb+de):(mb=Kb+de,Zb=Tb.concat(Ob)));bb.length&&bb.splice(fd,
0,Ob[0])}}var mb=1/0,Zb=na.map(function(bb,Tb){return Tb});return Xa(Zb),Zb}function Wj(na,Na,Ea){void 0===Ea&&(Ea={});var Xa=Ea.maxSegmentLength;void 0===Xa&&(Xa=10);var mb=Ea.string;void 0===mb&&(mb=!0);Ea=Ea.single;void 0===Ea&&(Ea=!1);var Zb=ua(na,Xa);Zb.length<Na.length+2&&ma(Zb,Na.length+2-Zb.length);var bb;Zb=dB(Zb,Na.length);var Tb=Na.map(function(Kb){return ua(Kb,Xa)});na="string"==typeof na&&na;return Ea&&!Na.every(function(Kb){return"string"==typeof Kb})||(bb=Na.slice(0)),Ik(Zb,Tb,{match:!0,
string:mb,single:Ea,t0:na,t1:bb})}function Ik(na,Na,Ea){void 0===Ea&&(Ea={});var Xa=Ea.string,mb=Ea.single,Zb=Ea.t0,bb=Ea.t1,Tb=(Ea=Ea.match)?kM(na,Na):na.map(function(Ob,de){return de}),Kb=Tb.map(function(Ob,de){return Lb(na[Ob],Na[de],Xa)});if(Ea&&Array.isArray(Zb)&&(Zb=Tb.map(function(Ob){return Zb[Ob]})),mb&&Xa&&(Array.isArray(Zb)&&(Zb=Zb.join(" ")),Array.isArray(bb)&&(bb=bb.join(" "))),mb){var fd=Xa?function(Ob){return Kb.map(function(de){return de(Ob)}).join(" ")}:function(Ob){return Kb.map(function(de){return de(Ob)})};
return Xa&&(Zb||bb)?function(Ob){return 1E-4>Ob&&Zb||1E-4>1-Ob&&bb||fd(Ob)}:fd}return Xa?(Zb=Array.isArray(Zb)?Zb.map(function(Ob){return"string"==typeof Ob&&Ob}):[],bb=Array.isArray(bb)?bb.map(function(Ob){return"string"==typeof Ob&&Ob}):[],Kb.map(function(Ob,de){return Zb[de]||bb[de]?function(De){return 1E-4>De&&Zb[de]||1E-4>1-De&&bb[de]||Ob(De)}:Ob})):Kb}function ck(na,Na,Ea,Xa,mb){var Zb=Qd(na,Na,Ea),bb=na-Ea+","+Na,Tb="A"+Ea+","+Ea+",0,1,1,";return Gy(Zb,Xa,"M"+bb+Tb+(na+Ea+","+Na)+Tb+bb+"Z",
2*Math.PI*Ea,mb)}function Jk(na,Na,Ea,Xa,mb,Zb){var bb=Rd(na,Na,Ea,Xa),Tb=na+Ea,Kb=Na+Xa;return Gy(bb,mb,"M"+na+","+Na+"L"+Tb+","+Na+"L"+Tb+","+Kb+"L"+na+","+Kb+"Z",2*Ea+2*Xa,Zb)}function Gy(na,Na,Ea,Xa,mb){void 0===mb&&(mb={});var Zb=mb.maxSegmentLength;void 0===Zb&&(Zb=10);mb=mb.string;void 0===mb&&(mb=!0);var bb,Tb;Na=ua(Na,Zb);return oa(Xa)&&Na.length<Xa/Zb&&ma(Na,Math.ceil(Xa/Zb-Na.length)),bb=na(Na),Tb=pa(bb,Na,mb),mb?function(Kb){return 1E-4>Kb?Ea:Tb(Kb)}:Tb}function Qd(na,Na,Ea){return function(Xa){var mb=
hb(Xa),Zb=Sw(Xa.concat([Xa[0]])),bb=Math.atan2(Xa[0][1]-mb[1],Xa[0][0]-mb[0]),Tb=0;return Xa.map(function(Kb,fd){var Ob;return fd&&(Tb+=T(Kb,Xa[fd-1])),Ob=bb+2*Math.PI*(Zb?Tb/Zb:fd/Xa.length),[Math.cos(Ob)*Ea+na,Math.sin(Ob)*Ea+Na]})}}function Rd(na,Na,Ea,Xa){return function(mb){var Zb=hb(mb),bb=Sw(mb.concat([mb[0]]));Zb=Math.atan2(mb[0][1]-Zb[1],mb[0][0]-Zb[0]);var Tb=0;0>Zb&&(Zb=2*Math.PI+Zb);var Kb=Zb/(2*Math.PI);return mb.map(function(fd,Ob){Ob&&(Tb+=T(fd,mb[Ob-1]));fd=(Kb+(bb?Tb/bb:Ob/mb.length))%
1;fd=.125>=fd?[1,.5+4*fd]:.375>=fd?[1.5-4*fd,1]:.625>=fd?[0,2.5-4*fd]:.875>=fd?[4*fd-2.5,0]:[1,4*fd-3.5];return[na+fd[0]*Ea,Na+fd[1]*Xa]})}}var Fy=function(na){for(var Na,Ea=-1,Xa=na.length,mb=na[Xa-1],Zb=0;++Ea<Xa;)Na=mb,mb=na[Ea],Zb+=Na[1]*mb[0]-Na[0]*mb[1];return Zb/2},Sw=function(na){var Na=-1,Ea=na.length,Xa=na[Ea-1],mb=Xa[0];Xa=Xa[1];for(var Zb=0;++Na<Ea;){var bb=mb;var Tb=Xa;Xa=na[Na];mb=Xa[0];Xa=Xa[1];bb-=mb;Tb-=Xa;Zb+=Math.sqrt(bb*bb+Tb*Tb)}return Zb},xv={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},aB=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];a.prototype.matrix=function(na){return 1===na[0]&&0===na[1]&&0===na[2]&&1===na[3]&&0===na[4]&&0===na[5]?this||Kc:((this||Kc).cache=null,(this||Kc).queue.push(na),this||Kc)};a.prototype.translate=function(na,Na){return 0===na&&0===Na||((this||Kc).cache=null,(this||Kc).queue.push([1,0,0,1,na,Na])),this||Kc};a.prototype.scale=function(na,Na){return 1===na&&1===Na||((this||Kc).cache=null,(this||Kc).queue.push([na,
0,0,Na,0,0])),this||Kc};a.prototype.rotate=function(na,Na,Ea){var Xa,mb,Zb;return 0!==na&&(this.translate(Na,Ea),Xa=na*Math.PI/180,mb=Math.cos(Xa),Zb=Math.sin(Xa),(this||Kc).queue.push([mb,Zb,-Zb,mb,0,0]),(this||Kc).cache=null,this.translate(-Na,-Ea)),this||Kc};a.prototype.skewX=function(na){return 0!==na&&((this||Kc).cache=null,(this||Kc).queue.push([1,0,Math.tan(na*Math.PI/180),1,0,0])),this||Kc};a.prototype.skewY=function(na){return 0!==na&&((this||Kc).cache=null,(this||Kc).queue.push([1,Math.tan(na*
Math.PI/180),0,1,0,0])),this||Kc};a.prototype.toArray=function(){var na=this||Kc;if((this||Kc).cache)return(this||Kc).cache;if(!(this||Kc).queue.length)return(this||Kc).cache=[1,0,0,1,0,0],(this||Kc).cache;if((this||Kc).cache=(this||Kc).queue[0],1===(this||Kc).queue.length)return(this||Kc).cache;for(var Na=1;Na<(this||Kc).queue.length;Na++){var Ea=na.cache,Xa=na.queue[Na];na.cache=[Ea[0]*Xa[0]+Ea[2]*Xa[1],Ea[1]*Xa[0]+Ea[3]*Xa[1],Ea[0]*Xa[2]+Ea[2]*Xa[3],Ea[1]*Xa[2]+Ea[3]*Xa[3],Ea[0]*Xa[4]+Ea[2]*Xa[5]+
Ea[4],Ea[1]*Xa[4]+Ea[3]*Xa[5]+Ea[5]]}return(this||Kc).cache};a.prototype.calc=function(na,Na,Ea){var Xa;return(this||Kc).queue.length?((this||Kc).cache||((this||Kc).cache=this.toArray()),Xa=(this||Kc).cache,[na*Xa[0]+Na*Xa[2]+(Ea?0:Xa[4]),na*Xa[1]+Na*Xa[3]+(Ea?0:Xa[5])]):[na,Na]};var eB={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},fB=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,gB=/[\s,]+/,hB=function(na){var Na,Ea,Xa=new a;return na.split(fB).forEach(function(mb){if(mb.length){if(void 0!==
eB[mb])return void(Na=mb);switch(Ea=mb.split(gB).map(function(Zb){return+Zb||0}),Na){case "matrix":return void(6===Ea.length&&Xa.matrix(Ea));case "scale":return void(1===Ea.length?Xa.scale(Ea[0],Ea[0]):2===Ea.length&&Xa.scale(Ea[0],Ea[1]));case "rotate":return void(1===Ea.length?Xa.rotate(Ea[0],0,0):3===Ea.length&&Xa.rotate(Ea[0],Ea[1],Ea[2]));case "translate":return void(1===Ea.length?Xa.translate(Ea[0],0):2===Ea.length&&Xa.translate(Ea[0],Ea[1]));case "skewX":return void(1===Ea.length&&Xa.skewX(Ea[0]));
case "skewY":return void(1===Ea.length&&Xa.skewY(Ea[0]))}}}),Xa},bB=2*Math.PI,YT=function(na,Na,Ea,Xa,mb,Zb,bb,Tb,Kb){var fd=Math.sin(Kb*bB/360),Ob=Math.cos(Kb*bB/360);Kb=Ob*(na-Ea)/2+fd*(Na-Xa)/2;var de=-fd*(na-Ea)/2+Ob*(Na-Xa)/2;if(0===Kb&&0===de||0===bb||0===Tb)return[];bb=Math.abs(bb);Tb=Math.abs(Tb);Kb=Kb*Kb/(bb*bb)+de*de/(Tb*Tb);1<Kb&&(bb*=Math.sqrt(Kb),Tb*=Math.sqrt(Kb));var De=l(na,Na,Ea,Xa,mb,Zb,bb,Tb,fd,Ob);na=[];Na=De[2];Ea=De[3];Xa=Math.max(Math.ceil(Math.abs(Ea)/(bB/4)),1);Ea/=Xa;for(mb=
0;mb<Xa;mb++)na.push(r(Na,Ea)),Na+=Ea;return na.map(function(Of){for(var Kf=0;Kf<Of.length;Kf+=2){var We=Of[Kf+0],Pf=Of[Kf+1];We*=bb;Pf*=Tb;var lp=fd*We+Ob*Pf;Of[Kf+0]=Ob*We-fd*Pf+De[0];Of[Kf+1]=lp+De[1]}return Of})},lM=Math.PI/180;v.prototype.transform=function(na){var Na=Math.cos((this||Kc).ax*lM),Ea=Math.sin((this||Kc).ax*lM),Xa=[(this||Kc).rx*(na[0]*Na+na[2]*Ea),(this||Kc).rx*(na[1]*Na+na[3]*Ea),(this||Kc).ry*(-na[0]*Ea+na[2]*Na),(this||Kc).ry*(-na[1]*Ea+na[3]*Na)];na=Xa[0]*Xa[0]+Xa[2]*Xa[2];
Na=Xa[1]*Xa[1]+Xa[3]*Xa[3];Ea=((Xa[0]-Xa[3])*(Xa[0]-Xa[3])+(Xa[2]+Xa[1])*(Xa[2]+Xa[1]))*((Xa[0]+Xa[3])*(Xa[0]+Xa[3])+(Xa[2]-Xa[1])*(Xa[2]-Xa[1]));var mb=(na+Na)/2;if(Ea<1E-10*mb)return(this||Kc).rx=(this||Kc).ry=Math.sqrt(mb),(this||Kc).ax=0,this||Kc;Xa=Xa[0]*Xa[1]+Xa[2]*Xa[3];Ea=Math.sqrt(Ea);var Zb=mb+Ea/2;Ea=mb-Ea/2;return(this||Kc).ax=1E-10>Math.abs(Xa)&&1E-10>Math.abs(Zb-Na)?90:180*Math.atan(Math.abs(Xa)>Math.abs(Zb-Na)?(Zb-na)/Xa:Xa/(Zb-Na))/Math.PI,0<=(this||Kc).ax?((this||Kc).rx=Math.sqrt(Zb),
(this||Kc).ry=Math.sqrt(Ea)):((this||Kc).ax+=90,(this||Kc).rx=Math.sqrt(Ea),(this||Kc).ry=Math.sqrt(Zb)),this||Kc};v.prototype.isDegenerate=function(){return(this||Kc).rx<1E-10*(this||Kc).ry||(this||Kc).ry<1E-10*(this||Kc).rx};y.prototype.__matrix=function(na){var Na,Ea=this||Kc;na.queue.length&&this.iterate(function(Xa,mb,Zb,bb){switch(Xa[0]){case "v":var Tb=na.calc(0,Xa[1],!0);Zb=0===Tb[0]?["v",Tb[1]]:["l",Tb[0],Tb[1]];break;case "V":Tb=na.calc(Zb,Xa[1],!1);Zb=Tb[0]===na.calc(Zb,bb,!1)[0]?["V",
Tb[1]]:["L",Tb[0],Tb[1]];break;case "h":Tb=na.calc(Xa[1],0,!0);Zb=0===Tb[1]?["h",Tb[0]]:["l",Tb[0],Tb[1]];break;case "H":Tb=na.calc(Xa[1],bb,!1);Zb=Tb[1]===na.calc(Zb,bb,!1)[1]?["H",Tb[0]]:["L",Tb[0],Tb[1]];break;case "a":case "A":Tb=na.toArray();var Kb=v(Xa[1],Xa[2],Xa[3]).transform(Tb);if(0>Tb[0]*Tb[3]-Tb[1]*Tb[2]&&(Xa[5]=Xa[5]?"0":"1"),Tb=na.calc(Xa[6],Xa[7],"a"===Xa[0]),"A"===Xa[0]&&Xa[6]===Zb&&Xa[7]===bb||"a"===Xa[0]&&0===Xa[6]&&0===Xa[7]){Zb=["a"===Xa[0]?"l":"L",Tb[0],Tb[1]];break}Zb=Kb.isDegenerate()?
["a"===Xa[0]?"l":"L",Tb[0],Tb[1]]:[Xa[0],Kb.rx,Kb.ry,Kb.ax,Xa[4],Xa[5],Tb[0],Tb[1]];break;case "m":Tb=na.calc(Xa[1],Xa[2],0<mb);Zb=["m",Tb[0],Tb[1]];break;default:for(Tb=Xa[0],Zb=[Tb],bb=Tb.toLowerCase()===Tb,Na=1;Na<Xa.length;Na+=2)Tb=na.calc(Xa[Na],Xa[Na+1],bb),Zb.push(Tb[0],Tb[1])}Ea.segments[mb]=Zb},!0)};y.prototype.__evaluateStack=function(){var na,Na=this||Kc;if((this||Kc).__stack.length){if(1===(this||Kc).__stack.length)return this.__matrix((this||Kc).__stack[0]),void((this||Kc).__stack=[]);
var Ea=a();for(na=(this||Kc).__stack.length;0<=--na;)Ea.matrix(Na.__stack[na].toArray());this.__matrix(Ea);(this||Kc).__stack=[]}};y.prototype.toString=function(){var na=this||Kc,Na=[];this.__evaluateStack();for(var Ea=0;Ea<(this||Kc).segments.length;Ea++){var Xa=na.segments[Ea][0];Xa=0<Ea&&"m"!==Xa&&"M"!==Xa&&Xa===na.segments[Ea-1][0];Na=Na.concat(Xa?na.segments[Ea].slice(1):na.segments[Ea])}return Na.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};y.prototype.translate=
function(na,Na){return(this||Kc).__stack.push(a().translate(na,Na||0)),this||Kc};y.prototype.scale=function(na,Na){return(this||Kc).__stack.push(a().scale(na,Na||0===Na?Na:na)),this||Kc};y.prototype.rotate=function(na,Na,Ea){return(this||Kc).__stack.push(a().rotate(na,Na||0,Ea||0)),this||Kc};y.prototype.skewX=function(na){return(this||Kc).__stack.push(a().skewX(na)),this||Kc};y.prototype.skewY=function(na){return(this||Kc).__stack.push(a().skewY(na)),this||Kc};y.prototype.matrix=function(na){return(this||
Kc).__stack.push(a().matrix(na)),this||Kc};y.prototype.transform=function(na){return na.trim()?((this||Kc).__stack.push(hB(na)),this||Kc):this||Kc};y.prototype.round=function(na){var Na,Ea=0,Xa=0,mb=0,Zb=0;return na=na||0,this.__evaluateStack(),(this||Kc).segments.forEach(function(bb){var Tb=bb[0].toLowerCase()===bb[0];switch(bb[0]){case "H":case "h":return Tb&&(bb[1]+=mb),mb=bb[1]-bb[1].toFixed(na),void(bb[1]=+bb[1].toFixed(na));case "V":case "v":return Tb&&(bb[1]+=Zb),Zb=bb[1]-bb[1].toFixed(na),
void(bb[1]=+bb[1].toFixed(na));case "Z":case "z":return mb=Ea,void(Zb=Xa);case "M":case "m":return Tb&&(bb[1]+=mb,bb[2]+=Zb),mb=bb[1]-bb[1].toFixed(na),Zb=bb[2]-bb[2].toFixed(na),Ea=mb,Xa=Zb,bb[1]=+bb[1].toFixed(na),void(bb[2]=+bb[2].toFixed(na));case "A":case "a":return Tb&&(bb[6]+=mb,bb[7]+=Zb),mb=bb[6]-bb[6].toFixed(na),Zb=bb[7]-bb[7].toFixed(na),bb[1]=+bb[1].toFixed(na),bb[2]=+bb[2].toFixed(na),bb[3]=+bb[3].toFixed(na+2),bb[6]=+bb[6].toFixed(na),void(bb[7]=+bb[7].toFixed(na));default:return Na=
bb.length,Tb&&(bb[Na-2]+=mb,bb[Na-1]+=Zb),mb=bb[Na-2]-bb[Na-2].toFixed(na),Zb=bb[Na-1]-bb[Na-1].toFixed(na),void bb.forEach(function(Kb,fd){fd&&(bb[fd]=+bb[fd].toFixed(na))})}}),this||Kc};y.prototype.iterate=function(na,Na){var Ea,Xa=(this||Kc).segments,mb={},Zb=!1,bb=0,Tb=0,Kb=0,fd=0;if(Na||this.__evaluateStack(),Xa.forEach(function(de,De){var Of=na(de,De,bb,Tb);Array.isArray(Of)&&(mb[De]=Of,Zb=!0);De=de[0]===de[0].toLowerCase();switch(de[0]){case "m":case "M":return bb=de[1]+(De?bb:0),Tb=de[2]+
(De?Tb:0),Kb=bb,void(fd=Tb);case "h":case "H":return void(bb=de[1]+(De?bb:0));case "v":case "V":return void(Tb=de[1]+(De?Tb:0));case "z":case "Z":return bb=Kb,void(Tb=fd);default:bb=de[de.length-2]+(De?bb:0),Tb=de[de.length-1]+(De?Tb:0)}}),!Zb)return this||Kc;var Ob=[];for(Na=0;Na<Xa.length;Na++)if(void 0!==mb[Na])for(Ea=0;Ea<mb[Na].length;Ea++)Ob.push(mb[Na][Ea]);else Ob.push(Xa[Na]);return(this||Kc).segments=Ob,this||Kc};y.prototype.abs=function(){return this.iterate(function(na,Na,Ea,Xa){Na=na[0];
var mb=Na.toUpperCase();if(Na!==mb)switch(na[0]=mb,Na){case "v":return void(na[1]+=Xa);case "a":return na[6]+=Ea,void(na[7]+=Xa);default:for(Na=1;Na<na.length;Na++)na[Na]+=Na%2?Ea:Xa}},!0),this||Kc};y.prototype.rel=function(){return this.iterate(function(na,Na,Ea,Xa){var mb=na[0],Zb=mb.toLowerCase();if(mb!==Zb&&(0!==Na||"M"!==mb))switch(na[0]=Zb,mb){case "V":return void(na[1]-=Xa);case "A":return na[6]-=Ea,void(na[7]-=Xa);default:for(Na=1;Na<na.length;Na++)na[Na]-=Na%2?Ea:Xa}},!0),this||Kc};y.prototype.unarc=
function(){return this.iterate(function(na,Na,Ea,Xa){var mb,Zb,bb,Tb=[];Na=na[0];return"A"!==Na&&"a"!==Na?null:("a"===Na?(Zb=Ea+na[6],bb=Xa+na[7]):(Zb=na[6],bb=na[7]),mb=YT(Ea,Xa,Zb,bb,na[4],na[5],na[1],na[2],na[3]),0===mb.length?[["a"===na[0]?"l":"L",na[6],na[7]]]:(mb.forEach(function(Kb){Tb.push(["C",Kb[2],Kb[3],Kb[4],Kb[5],Kb[6],Kb[7]])}),Tb))}),this||Kc};y.prototype.unshort=function(){var na,Na,Ea,Xa,mb,Zb=(this||Kc).segments;return this.iterate(function(bb,Tb,Kb,fd){var Ob,de=bb[0],De=de.toUpperCase();
Tb&&("T"===De?(Ob="t"===de,Ea=Zb[Tb-1],"Q"===Ea[0]?(na=Ea[1]-Kb,Na=Ea[2]-fd):"q"===Ea[0]?(na=Ea[1]-Ea[3],Na=Ea[2]-Ea[4]):(na=0,Na=0),Xa=-na,mb=-Na,Ob||(Xa+=Kb,mb+=fd),Zb[Tb]=[Ob?"q":"Q",Xa,mb,bb[1],bb[2]]):"S"===De&&(Ob="s"===de,Ea=Zb[Tb-1],"C"===Ea[0]?(na=Ea[3]-Kb,Na=Ea[4]-fd):"c"===Ea[0]?(na=Ea[3]-Ea[5],Na=Ea[4]-Ea[6]):(na=0,Na=0),Xa=-na,mb=-Na,Ob||(Xa+=Kb,mb+=fd),Zb[Tb]=[Ob?"c":"C",Xa,mb,bb[1],bb[2],bb[3],bb[4]]))}),this||Kc};var cM=y,YG={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ZT=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
aU=function(na){var Na=[];return na.replace(ZT,function(Ea,Xa,mb){Ea=Xa.toLowerCase();mb=(mb=mb.match($T))?mb.map(Number):[];for("m"===Ea&&2<mb.length&&(Na.push([Xa].concat(mb.splice(0,2))),Ea="l",Xa="m"===Xa?"l":"L");0<=mb.length;){if(mb.length===YG[Ea])return mb.unshift(Xa),Na.push(mb);if(mb.length<YG[Ea])throw Error("malformed path data");Na.push([Xa].concat(mb.splice(0,YG[Ea])))}}),Na},$T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,wr=function(na,Na,Ea,Xa,mb,Zb,bb,Tb){return new A(na,Na,Ea,Xa,mb,Zb,bb,
Tb)};A.prototype={constructor:A,init:function(){(this||Kc).length=this.getArcLength([(this||Kc).a.x,(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y])},getTotalLength:function(){return(this||Kc).length},getPointAtLength:function(na){na=H(na,(this||Kc).length,(this||Kc).getArcLength,[(this||Kc).a.x,(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y]);return this.getPoint([(this||Kc).a.x,
(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y],na)},getTangentAtLength:function(na){na=H(na,(this||Kc).length,(this||Kc).getArcLength,[(this||Kc).a.x,(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y]);na=this.getDerivative([(this||Kc).a.x,(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y],na);var Na=Math.sqrt(na.x*na.x+na.y*
na.y);return 0<Na?{x:na.x/Na,y:na.y/Na}:{x:0,y:0}},getPropertiesAtLength:function(na){na=H(na,(this||Kc).length,(this||Kc).getArcLength,[(this||Kc).a.x,(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y]);var Na=this.getDerivative([(this||Kc).a.x,(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y],na);var Ea=Math.sqrt(Na.x*Na.x+Na.y*Na.y);Na=0<Ea?{x:Na.x/Ea,y:Na.y/Ea}:{x:0,y:0};na=this.getPoint([(this||
Kc).a.x,(this||Kc).b.x,(this||Kc).c.x,(this||Kc).d.x],[(this||Kc).a.y,(this||Kc).b.y,(this||Kc).c.y,(this||Kc).d.y],na);return{x:na.x,y:na.y,tangentX:Na.x,tangentY:Na.y}}};var RT=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,
.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,
-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,
.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],
[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,
.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,
-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,
.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,
-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,
.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,
-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,
.9951872199970213]],ST=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],
[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],
[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,
.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,
.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],
[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,
.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],
[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,
.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,
.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,
.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,
.0123412297999872,.0123412297999872]],QT=[[1],[1,1],[1,2,1],[1,3,3,1]],cB=2*Math.PI,TT=function(na,Na,Ea,Xa,mb,Zb,bb,Tb,Kb){var fd=Math.sin(mb*cB/360),Ob=Math.cos(mb*cB/360);mb=Ob*(na-Tb)/2+fd*(Na-Kb)/2;var de=-fd*(na-Tb)/2+Ob*(Na-Kb)/2;if(0===mb&&0===de||0===Ea||0===Xa)return[];Ea=Math.abs(Ea);Xa=Math.abs(Xa);mb=mb*mb/(Ea*Ea)+de*de/(Xa*Xa);1<mb&&(Ea*=Math.sqrt(mb),Xa*=Math.sqrt(mb));var De=Aa(na,Na,Tb,Kb,Zb,bb,Ea,Xa,fd,Ob);na=[];Na=De[2];Zb=De[3];bb=Math.max(Math.ceil(Math.abs(Zb)/(cB/4)),1);Zb/=
bb;for(Tb=0;Tb<bb;Tb++)na.push(Ka(Na,Zb)),Na+=Zb;return na.map(function(Of){for(var Kf=0;Kf<Of.length;Kf+=2){var We=Of[Kf+0],Pf=Of[Kf+1];We*=Ea;Pf*=Xa;var lp=fd*We+Ob*Pf;Of[Kf+0]=Ob*We-fd*Pf+De[0];Of[Kf+1]=lp+De[1]}return Of})},mM=function(na,Na,Ea,Xa,mb,Zb,bb,Tb,Kb){return new K(na,Na,Ea,Xa,mb,Zb,bb,Tb,Kb)};K.prototype={constructor:K,init:function(){},getTotalLength:function(){return(this||Kc).length},getPointAtLength:function(na){var Na=this||Kc;0>na?na=0:na>(this||Kc).length&&(na=(this||Kc).length);
for(var Ea=(this||Kc).partialLengths.length-1;(this||Kc).partialLengths[Ea]>=na&&0<(this||Kc).partialLengths[Ea];)Ea--;Ea<(this||Kc).partialLengths.length-1&&Ea++;for(var Xa=0,mb=0;mb<Ea;mb++)Xa+=Na.partialLengths[mb];return(this||Kc).curves[Ea].getPointAtLength(na-Xa)},getTangentAtLength:function(na){var Na=this||Kc;0>na?na=0:na>(this||Kc).length&&(na=(this||Kc).length);for(var Ea=(this||Kc).partialLengths.length-1;(this||Kc).partialLengths[Ea]>=na&&0<(this||Kc).partialLengths[Ea];)Ea--;Ea<(this||
Kc).partialLengths.length-1&&Ea++;for(var Xa=0,mb=0;mb<Ea;mb++)Xa+=Na.partialLengths[mb];return(this||Kc).curves[Ea].getTangentAtLength(na-Xa)},getPropertiesAtLength:function(na){var Na=this.getTangentAtLength(na);na=this.getPointAtLength(na);return{x:na.x,y:na.y,tangentX:Na.x,tangentY:Na.y}}};var Ot=function(na,Na,Ea,Xa){return new aa(na,Na,Ea,Xa)};aa.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||Kc).x0-(this||Kc).x1,2)+Math.pow((this||Kc).y0-(this||Kc).y1,2))};aa.prototype.getPointAtLength=
function(na){na/=Math.sqrt(Math.pow((this||Kc).x0-(this||Kc).x1,2)+Math.pow((this||Kc).y0-(this||Kc).y1,2));return{x:(this||Kc).x0+((this||Kc).x1-(this||Kc).x0)*na,y:(this||Kc).y0+((this||Kc).y1-(this||Kc).y0)*na}};aa.prototype.getTangentAtLength=function(){var na=Math.sqrt(((this||Kc).x1-(this||Kc).x0)*((this||Kc).x1-(this||Kc).x0)+((this||Kc).y1-(this||Kc).y0)*((this||Kc).y1-(this||Kc).y0));return{x:((this||Kc).x1-(this||Kc).x0)/na,y:((this||Kc).y1-(this||Kc).y0)/na}};aa.prototype.getPropertiesAtLength=
function(na){na=this.getPointAtLength(na);var Na=this.getTangentAtLength();return{x:na.x,y:na.y,tangentX:Na.x,tangentY:Na.y}};var UT=function(na){function Na(bb){if(!bb)return null;var Tb;bb=aU(bb);for(var Kb=[0,0],fd=[0,0],Ob=0;Ob<bb.length;Ob++)"M"===bb[Ob][0]?(Kb=[bb[Ob][1],bb[Ob][2]],mb.push(null)):"m"===bb[Ob][0]?(Kb=[bb[Ob][1]+Kb[0],bb[Ob][2]+Kb[1]],mb.push(null)):"L"===bb[Ob][0]?(Ea+=Math.sqrt(Math.pow(Kb[0]-bb[Ob][1],2)+Math.pow(Kb[1]-bb[Ob][2],2)),mb.push(new Ot(Kb[0],bb[Ob][1],Kb[1],bb[Ob][2])),
Kb=[bb[Ob][1],bb[Ob][2]]):"l"===bb[Ob][0]?(Ea+=Math.sqrt(Math.pow(bb[Ob][1],2)+Math.pow(bb[Ob][2],2)),mb.push(new Ot(Kb[0],bb[Ob][1]+Kb[0],Kb[1],bb[Ob][2]+Kb[1])),Kb=[bb[Ob][1]+Kb[0],bb[Ob][2]+Kb[1]]):"H"===bb[Ob][0]?(Ea+=Math.abs(Kb[0]-bb[Ob][1]),mb.push(new Ot(Kb[0],bb[Ob][1],Kb[1],Kb[1])),Kb[0]=bb[Ob][1]):"h"===bb[Ob][0]?(Ea+=Math.abs(bb[Ob][1]),mb.push(new Ot(Kb[0],Kb[0]+bb[Ob][1],Kb[1],Kb[1])),Kb[0]=bb[Ob][1]+Kb[0]):"V"===bb[Ob][0]?(Ea+=Math.abs(Kb[1]-bb[Ob][1]),mb.push(new Ot(Kb[0],Kb[0],Kb[1],
bb[Ob][1])),Kb[1]=bb[Ob][1]):"v"===bb[Ob][0]?(Ea+=Math.abs(bb[Ob][1]),mb.push(new Ot(Kb[0],Kb[0],Kb[1],Kb[1]+bb[Ob][1])),Kb[1]=bb[Ob][1]+Kb[1]):"z"===bb[Ob][0]||"Z"===bb[Ob][0]?(Ea+=Math.sqrt(Math.pow(bb[0][1]-Kb[0],2)+Math.pow(bb[0][2]-Kb[1],2)),mb.push(new Ot(Kb[0],bb[0][1],Kb[1],bb[0][2])),Kb=[bb[0][1],bb[0][2]]):"C"===bb[Ob][0]?(Tb=new wr(Kb[0],Kb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4],bb[Ob][5],bb[Ob][6]),Ea+=Tb.getTotalLength(),Kb=[bb[Ob][5],bb[Ob][6]],mb.push(Tb)):"c"===bb[Ob][0]?(Tb=new wr(Kb[0],
Kb[1],Kb[0]+bb[Ob][1],Kb[1]+bb[Ob][2],Kb[0]+bb[Ob][3],Kb[1]+bb[Ob][4],Kb[0]+bb[Ob][5],Kb[1]+bb[Ob][6]),Ea+=Tb.getTotalLength(),Kb=[bb[Ob][5]+Kb[0],bb[Ob][6]+Kb[1]],mb.push(Tb)):"S"===bb[Ob][0]?(Tb=0<Ob&&-1<["C","c","S","s"].indexOf(bb[Ob-1][0])?new wr(Kb[0],Kb[1],2*Kb[0]-bb[Ob-1][bb[Ob-1].length-4],2*Kb[1]-bb[Ob-1][bb[Ob-1].length-3],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4]):new wr(Kb[0],Kb[1],Kb[0],Kb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4]),Ea+=Tb.getTotalLength(),Kb=[bb[Ob][3],bb[Ob][4]],mb.push(Tb)):
"s"===bb[Ob][0]?(Tb=0<Ob&&-1<["C","c","S","s"].indexOf(bb[Ob-1][0])?new wr(Kb[0],Kb[1],Kb[0]+Tb.d.x-Tb.c.x,Kb[1]+Tb.d.y-Tb.c.y,Kb[0]+bb[Ob][1],Kb[1]+bb[Ob][2],Kb[0]+bb[Ob][3],Kb[1]+bb[Ob][4]):new wr(Kb[0],Kb[1],Kb[0],Kb[1],Kb[0]+bb[Ob][1],Kb[1]+bb[Ob][2],Kb[0]+bb[Ob][3],Kb[1]+bb[Ob][4]),Ea+=Tb.getTotalLength(),Kb=[bb[Ob][3]+Kb[0],bb[Ob][4]+Kb[1]],mb.push(Tb)):"Q"===bb[Ob][0]?(Tb=new wr(Kb[0],Kb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4]),Ea+=Tb.getTotalLength(),mb.push(Tb),Kb=[bb[Ob][3],bb[Ob][4]],
fd=[bb[Ob][1],bb[Ob][2]]):"q"===bb[Ob][0]?(Tb=new wr(Kb[0],Kb[1],Kb[0]+bb[Ob][1],Kb[1]+bb[Ob][2],Kb[0]+bb[Ob][3],Kb[1]+bb[Ob][4]),Ea+=Tb.getTotalLength(),fd=[Kb[0]+bb[Ob][1],Kb[1]+bb[Ob][2]],Kb=[bb[Ob][3]+Kb[0],bb[Ob][4]+Kb[1]],mb.push(Tb)):"T"===bb[Ob][0]?(Tb=0<Ob&&-1<["Q","q","T","t"].indexOf(bb[Ob-1][0])?new wr(Kb[0],Kb[1],2*Kb[0]-fd[0],2*Kb[1]-fd[1],bb[Ob][1],bb[Ob][2]):new Ot(Kb[0],bb[Ob][1],Kb[1],bb[Ob][2]),mb.push(Tb),Ea+=Tb.getTotalLength(),fd=[2*Kb[0]-fd[0],2*Kb[1]-fd[1]],Kb=[bb[Ob][1],bb[Ob][2]]):
"t"===bb[Ob][0]?(Tb=0<Ob&&-1<["Q","q","T","t"].indexOf(bb[Ob-1][0])?new wr(Kb[0],Kb[1],2*Kb[0]-fd[0],2*Kb[1]-fd[1],Kb[0]+bb[Ob][1],Kb[1]+bb[Ob][2]):new Ot(Kb[0],Kb[0]+bb[Ob][1],Kb[1],Kb[1]+bb[Ob][2]),Ea+=Tb.getTotalLength(),fd=[2*Kb[0]-fd[0],2*Kb[1]-fd[1]],Kb=[bb[Ob][1]+Kb[0],bb[Ob][2]+Kb[0]],mb.push(Tb)):"A"===bb[Ob][0]?(Tb=new mM(Kb[0],Kb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4],bb[Ob][5],bb[Ob][6],bb[Ob][7]),Ea+=Tb.getTotalLength(),Kb=[bb[Ob][6],bb[Ob][7]],mb.push(Tb)):"a"===bb[Ob][0]&&(Tb=new mM(Kb[0],
Kb[1],bb[Ob][1],bb[Ob][2],bb[Ob][3],bb[Ob][4],bb[Ob][5],Kb[0]+bb[Ob][6],Kb[1]+bb[Ob][7]),Ea+=Tb.getTotalLength(),Kb=[Kb[0]+bb[Ob][6],Kb[1]+bb[Ob][7]],mb.push(Tb)),Xa.push(Ea);return Na}var Ea=0,Xa=[],mb=[];Na.getTotalLength=function(){return Ea};Na.getPointAtLength=function(bb){bb=Zb(bb);return mb[bb.i].getPointAtLength(bb.fraction)};Na.getTangentAtLength=function(bb){bb=Zb(bb);return mb[bb.i].getTangentAtLength(bb.fraction)};Na.getPropertiesAtLength=function(bb){bb=Zb(bb);return mb[bb.i].getPropertiesAtLength(bb.fraction)};
var Zb=function(bb){0>bb?bb=0:bb>Ea&&(bb=Ea);for(var Tb=Xa.length-1;Xa[Tb]>=bb&&0<Xa[Tb];)Tb--;return Tb++,{fraction:bb-Xa[Tb-1],i:Tb}};return Na(na)},XG='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',dM=function(na,Na){for(var Ea,Xa,mb,Zb=na.length,bb=1/0,Tb=0;Tb<Zb;Tb++)!function(Kb){Xa=0;Na.forEach(function(fd,
Ob){fd=T(na[(Kb+Ob)%Zb],fd);Xa+=fd*fd});Xa<bb&&(bb=Xa,Ea=Kb)}(Tb);Ea&&(mb=na.splice(0,Ea),na.splice.apply(na,[na.length,0].concat(mb)))},jM=ic;ic.deviation=function(na,Na,Ea,Xa){var mb=Na&&Na.length,Zb=Math.abs(Oh(na,0,mb?Na[0]*Ea:na.length,Ea));if(mb){mb=0;for(var bb=Na.length;mb<bb;mb++)Zb-=Math.abs(Oh(na,Na[mb]*Ea,mb<bb-1?Na[mb+1]*Ea:na.length,Ea))}for(mb=Na=0;mb<Xa.length;mb+=3){bb=Xa[mb]*Ea;var Tb=Xa[mb+1]*Ea,Kb=Xa[mb+2]*Ea;Na+=Math.abs((na[bb]-na[Kb])*(na[Tb+1]-na[bb+1])-(na[bb]-na[Tb])*(na[Kb+
1]-na[bb+1]))}return 0===Zb&&0===Na?0:Math.abs((Na-Zb)/Zb)};ic.flatten=function(na){for(var Na=na[0][0].length,Ea={vertices:[],holes:[],dimensions:Na},Xa=0,mb=0;mb<na.length;mb++){for(var Zb=0;Zb<na[mb].length;Zb++)for(var bb=0;bb<Na;bb++)Ea.vertices.push(na[mb][Zb][bb]);0<mb&&(Xa+=na[mb-1].length,Ea.holes.push(Xa))}return Ea};var yv=function(na){return na},eM=function(na){if(null==na)return yv;var Na,Ea,Xa=na.scale[0],mb=na.scale[1],Zb=na.translate[0],bb=na.translate[1];return function(Tb,Kb){Kb||
(Na=Ea=0);Kb=2;var fd=Tb.length,Ob=Array(fd);Ob[0]=(Na+=Tb[0])*Xa+Zb;for(Ob[1]=(Ea+=Tb[1])*mb+bb;Kb<fd;)Ob[Kb]=Tb[Kb],++Kb;return Ob}},iM=function(na,Na){return"GeometryCollection"===Na.type?{type:"FeatureCollection",features:Na.geometries.map(function(Ea){return nh(na,Ea)})}:nh(na,Na)},fM=function(na,Na){function Ea(fd){var Ob,de=na.arcs[0>fd?~fd:fd],De=de[0];return na.transform?(Ob=[0,0],de.forEach(function(Of){Ob[0]+=Of[0];Ob[1]+=Of[1]})):Ob=de[de.length-1],0>fd?[Ob,De]:[De,Ob]}function Xa(fd,
Ob){for(var de in fd){var De=fd[de];delete Ob[De.start];delete De.start;delete De.end;De.forEach(function(Of){mb[0>Of?~Of:Of]=1});Tb.push(De)}}var mb={},Zb={},bb={},Tb=[],Kb=-1;return Na.forEach(function(fd,Ob){var de,De=na.arcs[0>fd?~fd:fd];3>De.length&&!De[1][0]&&!De[1][1]&&(de=Na[++Kb],Na[Kb]=fd,Na[Ob]=de)}),Na.forEach(function(fd){var Ob=Ea(fd);var de=Ob[0],De=Ob[1];(Ob=bb[de])?(delete bb[Ob.end],Ob.push(fd),Ob.end=De,fd=Zb[De])?(delete Zb[fd.start],de=fd===Ob?Ob:Ob.concat(fd),Zb[de.start=Ob.start]=
bb[de.end=fd.end]=de):Zb[Ob.start]=bb[Ob.end]=Ob:(Ob=Zb[De])?(delete Zb[Ob.start],Ob.unshift(fd),Ob.start=de,fd=bb[de])?(delete bb[fd.end],de=fd===Ob?Ob:fd.concat(Ob),Zb[de.start=fd.start]=bb[de.end=Ob.end]=de):Zb[Ob.start]=bb[Ob.end]=Ob:(Ob=[fd],Zb[Ob.start=de]=bb[Ob.end=De]=Ob)}),Xa(bb,Zb),Xa(Zb,bb),Na.forEach(function(fd){mb[0>fd?~fd:fd]||Tb.push([fd])}),Tb},Hy=function(na,Na){for(var Ea=0,Xa=na.length;Ea<Xa;){var mb=Ea+Xa>>>1;na[mb]<Na?Ea=mb+1:Xa=mb}return Ea},XT=function(na){function Na(Kf,We){Kf.forEach(function(Pf){0>
Pf&&(Pf=~Pf);var lp=mb[Pf];lp?lp.push(We):mb[Pf]=[We]})}function Ea(Kf,We){Kf.forEach(function(Pf){Na(Pf,We)})}function Xa(Kf,We){"GeometryCollection"===Kf.type?Kf.geometries.forEach(function(Pf){Xa(Pf,We)}):Kf.type in bb&&bb[Kf.type](Kf.arcs,We)}var mb={},Zb=na.map(function(){return[]}),bb={LineString:Na,MultiLineString:Ea,Polygon:Ea,MultiPolygon:function(Kf,We){Kf.forEach(function(Pf){Ea(Pf,We)})}};na.forEach(Xa);for(var Tb in mb){na=mb[Tb];for(var Kb=na.length,fd=0;fd<Kb;++fd)for(var Ob=fd+1;Ob<
Kb;++Ob){var de,De=na[fd],Of=na[Ob];(de=Zb[De])[Tb=Hy(de,Of)]!==Of&&de.splice(Tb,0,Of);(de=Zb[Of])[Tb=Hy(de,De)]!==De&&de.splice(Tb,0,De)}}return Zb},gM=function(na,Na){return na<Na?-1:na>Na?1:na>=Na?0:NaN},hM=function(na){return 1===na.length&&(na=oj(na)),{left:function(Na,Ea,Xa,mb){null==Xa&&(Xa=0);for(null==mb&&(mb=Na.length);Xa<mb;){var Zb=Xa+mb>>>1;0>na(Na[Zb],Ea)?Xa=Zb+1:mb=Zb}return Xa},right:function(Na,Ea,Xa,mb){null==Xa&&(Xa=0);for(null==mb&&(mb=Na.length);Xa<mb;){var Zb=Xa+mb>>>1;0<na(Na[Zb],
Ea)?mb=Zb:Xa=Zb+1}return Xa}}};hM(gM);var dB=function(na,Na){return Nj(Fj(Ui(na),na),Na)},kM=function(na,Na){if(8<na.length)return na.map(function(Xa,mb){return mb});var Ea=na.map(function(Xa){return Na.map(function(mb){mb=T(hb(Xa),hb(mb));return mb*mb})});return th(na,Na,Ea)};f.interpolate=function(na,Na,Ea){void 0===Ea&&(Ea={});var Xa=Ea.maxSegmentLength;void 0===Xa&&(Xa=10);Ea=Ea.string;void 0===Ea&&(Ea=!0);var mb=ua(na,Xa);Xa=ua(Na,Xa);var Zb=Lb(mb,Xa,Ea);return!Ea||"string"!=typeof na&&"string"!=
typeof Na?Zb:function(bb){return 1E-4>bb&&"string"==typeof na?na:1E-4>1-bb&&"string"==typeof Na?Na:Zb(bb)}};f.separate=Wj;f.combine=function(na,Na,Ea){void 0===Ea&&(Ea={});var Xa=Ea.maxSegmentLength;void 0===Xa&&(Xa=10);var mb=Ea.string;void 0===mb&&(mb=!0);Ea=Ea.single;void 0===Ea&&(Ea=!1);var Zb=Wj(Na,na,{maxSegmentLength:Xa,string:mb,single:Ea});return Ea?function(bb){return Zb(1-bb)}:Zb.map(function(bb){return function(Tb){return bb(1-Tb)}})};f.interpolateAll=function(na,Na,Ea){void 0===Ea&&(Ea=
{});var Xa=Ea.maxSegmentLength;void 0===Xa&&(Xa=10);var mb=Ea.string;void 0===mb&&(mb=!0);Ea=Ea.single;if(void 0===Ea&&(Ea=!1),!Array.isArray(na)||!Array.isArray(Na)||na.length!==Na.length||!na.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var Zb,bb,Tb=function(fd){return ua(fd,Xa)},Kb=na.map(Tb);Tb=Na.map(Tb);
return Ea?(na.every(function(fd){return"string"==typeof fd})&&(Zb=na.slice(0)),Na.every(function(fd){return"string"==typeof fd})&&(bb=Na.slice(0))):(Zb=na.slice(0),bb=Na.slice(0)),Ik(Kb,Tb,{string:mb,single:Ea,t0:Zb,t1:bb,match:!1})};f.splitPathString=function(na){return Cb((new cM(na)).abs())};f.toPathString=va;f.fromCircle=ck;f.toCircle=function(na,Na,Ea,Xa,mb){var Zb=ck(Na,Ea,Xa,na,mb);return function(bb){return Zb(1-bb)}};f.fromRect=Jk;f.toRect=function(na,Na,Ea,Xa,mb,Zb){var bb=Jk(Na,Ea,Xa,mb,
na,Zb);return function(Tb){return bb(1-Tb)}};Object.defineProperty(f,"__esModule",{value:!0})});var Hka={},Ika="function"===typeof Float32Array,Jka=Hka=function(f,k,n,b){if(!(0<=f&&1>=f&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(f===k&&n===b)return dJ;for(var e=Ika?new Float32Array(11):Array(11),m=0;11>m;++m)e[m]=sw(.1*m,f,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var g=0,l=1;10!==l&&e[l]<=a;++l)g+=.1;--l;l=g+(a-e[l])/(e[l+1]-e[l])*.1;var r=3*(1-3*n+
3*f)*l*l+2*(3*n-6*f)*l+3*f;if(.001<=r){for(g=0;4>g;++g){r=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(0===r)break;var v=sw(l,f,n)-a;l-=v/r}a=l}else if(0===r)a=l;else{l=g;g+=.1;var y=0;do v=l+(g-l)/2,r=sw(v,f,n)-a,0<r?g=v:l=v;while(1E-7<Math.abs(r)&&10>++y);a=v}return sw(a,k,b)}},yc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var f={},k={};!function(n,b){function e(){(this||yc)._delay=0;(this||yc)._endDelay=0;(this||yc)._fill="none";(this||yc)._iterationStart=
0;(this||yc)._iterations=1;(this||yc)._duration=0;(this||yc)._playbackRate=1;(this||yc)._direction="normal";(this||yc)._easing="linear";(this||yc)._easingFunction=F}function m(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(U,pa,fa){var oa=new e;return pa&&(oa.fill="both",oa.duration="auto"),"number"!=typeof U||isNaN(U)?void 0!==U&&Object.getOwnPropertyNames(U).forEach(function(hb){"auto"==U[hb]||("number"==typeof oa[hb]||
"duration"==hb)&&("number"!=typeof U[hb]||isNaN(U[hb]))||"fill"==hb&&-1==A.indexOf(U[hb])||"direction"==hb&&-1==E.indexOf(U[hb])||"playbackRate"==hb&&1!==U[hb]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(oa[hb]=U[hb])}):oa.duration=U,oa}function g(U,pa,fa,oa){return 0>U||1<U||0>fa||1<fa?F:function(hb){if(0>=hb){var Cb=0;return 0<U?Cb=pa/U:!pa&&0<fa&&(Cb=oa/fa),Cb*hb}if(1<=hb)return Cb=0,1>fa?Cb=(oa-1)/(fa-1):1==fa&&1>U&&(Cb=(pa-1)/(U-
1)),1+Cb*(hb-1);Cb=0;for(var va=1;Cb<va;){var ma=(Cb+va)/2,ua=3*U*(1-ma)*(1-ma)*ma+3*fa*(1-ma)*ma*ma+ma*ma*ma;if(1E-5>Math.abs(hb-ua))break;ua<hb?Cb=ma:va=ma}return 3*pa*(1-ma)*(1-ma)*ma+3*oa*(1-ma)*ma*ma+ma*ma*ma}}function l(U,pa){return function(fa){if(1<=fa)return 1;var oa=1/U;return(fa+=pa*oa)-fa%oa}}function r(U){X||(X=document.createElement("div").style);X.animationTimingFunction="";X.animationTimingFunction=U;var pa=X.animationTimingFunction;if(""==pa&&m())throw new TypeError(U+" is not a valid value for easing");
return pa}function v(U){if("linear"==U)return F;var pa=W.exec(U);return pa?g.apply(this||yc,pa.slice(1).map(Number)):(pa=ea.exec(U))?l(Number(pa[1]),M):(pa=Aa.exec(U))?l(Number(pa[1]),{start:H,middle:I,end:M}[pa[2]]):N[U]||F}function y(U,pa,fa){if(null==pa)return Ka;var oa=fa.delay+U+fa.endDelay;return pa<Math.min(fa.delay,oa)?K:pa>=Math.min(fa.delay+U,oa)?aa:T}var A=["backwards","forwards","both","none"],E=["reverse","alternate","alternate-reverse"],F=function(U){return U};e.prototype={_setMember:function(U,
pa){(this||yc)["_"+U]=pa;(this||yc)._effect&&((this||yc)._effect._timingInput[U]=pa,(this||yc)._effect._timing=n.normalizeTimingInput((this||yc)._effect._timingInput),(this||yc)._effect.activeDuration=n.calculateActiveDuration((this||yc)._effect._timing),(this||yc)._effect._animation&&(this||yc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||yc)._playbackRate},set delay(U){this._setMember("delay",U)},get delay(){return(this||yc)._delay},set endDelay(U){this._setMember("endDelay",
U)},get endDelay(){return(this||yc)._endDelay},set fill(U){this._setMember("fill",U)},get fill(){return(this||yc)._fill},set iterationStart(U){if((isNaN(U)||0>U)&&m())throw new TypeError("iterationStart must be a non-negative number, received: "+U);this._setMember("iterationStart",U)},get iterationStart(){return(this||yc)._iterationStart},set duration(U){if("auto"!=U&&(isNaN(U)||0>U)&&m())throw new TypeError("duration must be non-negative or auto, received: "+U);this._setMember("duration",U)},get duration(){return(this||
yc)._duration},set direction(U){this._setMember("direction",U)},get direction(){return(this||yc)._direction},set easing(U){(this||yc)._easingFunction=v(r(U));this._setMember("easing",U)},get easing(){return(this||yc)._easing},set iterations(U){if((isNaN(U)||0>U)&&m())throw new TypeError("iterations must be non-negative, received: "+U);this._setMember("iterations",U)},get iterations(){return(this||yc)._iterations}};var H=1,I=.5,M=0,N={ease:g(.25,.1,.25,1),"ease-in":g(.42,0,1,1),"ease-out":g(0,0,.58,
1),"ease-in-out":g(.42,0,.58,1),"step-start":l(1,H),"step-middle":l(1,I),"step-end":l(1,M)},X=null,W=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,ea=/steps\(\s*(\d+)\s*\)/,Aa=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Ka=0,K=1,aa=2,T=3;n.cloneTimingInput=function(U){if("number"==typeof U)return U;var pa={},fa;for(fa in U)pa[fa]=U[fa];return pa};n.makeTiming=a;n.numericTimingToObject=function(U){return"number"==
typeof U&&(U=isNaN(U)?{duration:0}:{duration:U}),U};n.normalizeTimingInput=function(U,pa){return U=n.numericTimingToObject(U),a(U,pa)};n.calculateActiveDuration=function(U){return Math.abs((0===U.duration||0===U.iterations?0:U.duration*U.iterations)/U.playbackRate)};n.calculateIterationProgress=function(U,pa,fa){var oa=y(U,pa,fa);a:{var hb=fa.fill;switch(oa){case K:U="backwards"==hb||"both"==hb?0:null;break a;case T:U=pa-fa.delay;break a;case aa:U="forwards"==hb||"both"==hb?U:null;break a;case Ka:U=
null;break a}U=void 0}if(null===U)return null;pa=fa.duration;hb=fa.iterationStart;pa=(0===pa?oa!==K&&(hb+=fa.iterations):hb+=U/pa,hb);hb=pa===1/0?fa.iterationStart%1:pa%1;U=(0!==hb||oa!==aa||0===fa.iterations||0===U&&0!==fa.duration||(hb=1),hb);hb=oa===aa&&fa.iterations===1/0?1/0:1===U?Math.floor(pa)-1:Math.floor(pa);pa=oa=fa.direction;"normal"!==oa&&"reverse"!==oa&&("alternate-reverse"===oa&&(hb+=1),pa="normal",hb!==1/0&&0!=hb%2&&(pa="reverse"));return fa._easingFunction("normal"===pa?U:1-U)};n.calculatePhase=
y;n.normalizeEasing=r;n.parseEasingFunction=v}(f);(function(n,b){function e(l){var r=[],v;for(v in l)if(!(v in["easing","offset","composite"])){var y=l[v];Array.isArray(y)||(y=[y]);for(var A,E=y.length,F=0;F<E;F++)A={},A.offset="offset"in l?l.offset:1==E?1:F/(E-1),"easing"in l&&(A.easing=l.easing),"composite"in l&&(A.composite=l.composite),A[v]=y[F],r.push(A)}return r.sort(function(H,I){return H.offset-I.offset}),r}var m={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var g={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=e;n.normalizeKeyframes=function(l){function r(){var F=v.length;null==v[F-1].offset&&(v[F-1].offset=1);1<F&&null==v[0].offset&&(v[0].offset=0);for(var H=0,I=v[0].offset,M=1;M<F;M++){var N=v[M].offset;if(null!=N){for(var X=1;X<M-H;X++)v[H+X].offset=I+(N-I)*X/(M-H);H=M;I=N}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=e(l));var v=l.map(function(F){var H={},I;for(I in F){var M=F[I];if("offset"==
I){if(null!=M){if(M=Number(M),!isFinite(M))throw new TypeError("Keyframe offsets must be numbers.");if(0>M||1<M)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==I){if("add"==M||"accumulate"==M)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=M)throw new TypeError("Invalid composite mode "+M+".");}else M="easing"==I?n.normalizeEasing(M):""+M;var N=void 0,X=I,W=M;M=H;var ea=X;if("display"!==
ea&&0!==ea.lastIndexOf("animation",0)&&0!==ea.lastIndexOf("transition",0))if(ea=m[X])for(N in a.style[X]=W,ea)X=ea[N],W=a.style[X],M[X]=X in g?g[X][W]||W:W;else M[X]=X in g?g[X][W]||W:W}return void 0==H.offset&&(H.offset=null),void 0==H.easing&&(H.easing="linear"),H});l=!0;for(var y=-1/0,A=0;A<v.length;A++){var E=v[A].offset;if(null!=E){if(E<y)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");y=E}else l=!1}return v=v.filter(function(F){return 0<=F.offset&&
1>=F.offset}),l||r(),v}})(f);(function(n){var b={};n.isDeprecated=function(e,m,a,g){g=g?"are":"is";var l=new Date;m=new Date(m);return m.setMonth(m.getMonth()+3),!(l<m&&(e in b||console.warn("Web Animations: "+e+" "+g+" deprecated and will stop working on "+m.toDateString()+". "+a),b[e]=!0,1))};n.deprecated=function(e,m,a,g){var l=g?"are":"is";if(n.isDeprecated(e,m,a,g))throw Error(e+" "+l+" no longer supported. "+a);}})(f);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(e){void 0===n[e]&&(b=!0)})),!b)return}!function(e,m,a){function g(r){for(var v={},y=0;y<r.length;y++)for(var A in r[y])if("offset"!=A&&"easing"!=A&&"composite"!=A){var E={offset:r[y].offset,easing:r[y].easing,value:r[y][A]};v[A]=v[A]||[];v[A].push(E)}for(var F in v)if(r=v[F],0!=r[0].offset||1!=r[r.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return v}function l(r){var v=[],y;for(y in r)for(var A=r[y],E=0;E<A.length-1;E++){var F=E,H=E+1,I=A[F].offset,M=A[H].offset,N=I,X=M;0==E&&(N=-1/0,0==M&&(H=F));E==A.length-2&&(X=1/0,1==I&&(F=H));v.push({applyFrom:N,applyTo:X,startOffset:A[F].offset,endOffset:A[H].offset,easingFunction:e.parseEasingFunction(A[F].easing),property:y,interpolation:m.propertyInterpolation(y,A[F].value,A[H].value)})}return v.sort(function(W,ea){return W.startOffset-ea.startOffset}),
v}m.convertEffectInput=function(r){r=e.normalizeKeyframes(r);var v=g(r),y=l(v);return function(A,E){if(null!=E)y.filter(function(H){return E>=H.applyFrom&&E<H.applyTo}).forEach(function(H){var I=E-H.startOffset,M=H.endOffset-H.startOffset;I=0==M?0:H.easingFunction(I/M);m.apply(A,H.property,H.interpolation(I))});else for(var F in v)"offset"!=F&&"easing"!=F&&"composite"!=F&&m.clear(A,F)}}}(f,k);(function(e,m,a){function g(v){return v.replace(/-(.)/g,function(y,A){return A.toUpperCase()})}var l={};m.addPropertiesHandler=
function(v,y,A){for(var E=0;E<A.length;E++){var F=v,H=y,I=g(A[E]);l[I]=l[I]||[];l[I].push([F,H])}};var r={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};m.propertyInterpolation=function(v,y,A){var E=v;/-/.test(v)&&!e.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(E=g(v));"initial"!=y&&"initial"!=A||("initial"==y&&(y=r[E]),"initial"==A&&(A=r[E]));v=y==A?[]:l[E];for(E=0;v&&E<v.length;E++){var F=v[E][0](y),H=v[E][0](A);if(void 0!==F&&void 0!==H&&(F=
v[E][1](F,H))){var I=m.Interpolation.apply(null,F);return function(M){return 0==M?y:1==M?A:I(M)}}}return m.Interpolation(!1,!0,function(M){return M?A:y})}})(f,k);(function(e,m,a){function g(l){var r=e.calculateActiveDuration(l),v=function(y){return e.calculateIterationProgress(r,y,l)};return v._totalDuration=l.delay+r+l.endDelay,v}m.KeyframeEffect=function(l,r,v,y){var A,E=g(e.normalizeTimingInput(v)),F=m.convertEffectInput(r);r=function(){F(l,A)};return r._update=function(H){return null!==(A=E(H))},
r._clear=function(){F(l,null)},r._hasSameTarget=function(H){return l===H},r._target=l,r._totalDuration=E._totalDuration,r._id=y,r}})(f,k);(function(e,m){function a(F,H,I){I.enumerable=!0;I.configurable=!0;Object.defineProperty(F,H,I)}function g(F){(this||yc)._element=F;(this||yc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||yc)._style=F.style;(this||yc)._length=0;(this||yc)._isAnimatedProperty={};var H=window;F=!(!F.namespaceURI||-1==F.namespaceURI.indexOf("/svg"))&&
(r in H||(H[r]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(H.navigator.userAgent)),H[r]);(this||yc)._updateSvgTransformAttr=F;(this||yc)._savedTransformAttr=null;for(F=0;F<(this||yc)._style.length;F++)H=(this||yc)._style[F],(this||yc)._surrogateStyle[H]=(this||yc)._style[H];this._updateIndices()}function l(F){if(!F._webAnimationsPatchedStyle){var H=new g(F);try{a(F,"style",{get:function(){return H}})}catch(I){F.style._set=function(M,N){F.style[M]=N},F.style._clear=function(M){F.style[M]=""}}F._webAnimationsPatchedStyle=
F.style}}var r="_webAnimationsUpdateSvgTransformAttr";m={cssText:1,length:1,parentRule:1};var v={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},y={removeProperty:1,setProperty:1};g.prototype={get cssText(){return(this||yc)._surrogateStyle.cssText},set cssText(F){for(var H={},I=0;I<(this||yc)._surrogateStyle.length;I++)H[(this||yc)._surrogateStyle[I]]=!0;(this||yc)._surrogateStyle.cssText=F;this._updateIndices();for(I=0;I<(this||yc)._surrogateStyle.length;I++)H[(this||
yc)._surrogateStyle[I]]=!0;for(var M in H)(this||yc)._isAnimatedProperty[M]||(this||yc)._style.setProperty(M,(this||yc)._surrogateStyle.getPropertyValue(M))},get length(){return(this||yc)._surrogateStyle.length},get parentRule(){return(this||yc)._style.parentRule},_updateIndices:function(){for(;(this||yc)._length<(this||yc)._surrogateStyle.length;)Object.defineProperty(this||yc,(this||yc)._length,{configurable:!0,enumerable:!1,get:function(F){return function(){return(this||yc)._surrogateStyle[F]}}((this||
yc)._length)}),(this||yc)._length++;for(;(this||yc)._length>(this||yc)._surrogateStyle.length;)(this||yc)._length--,Object.defineProperty(this||yc,(this||yc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(F,H){(this||yc)._style[F]=H;(this||yc)._isAnimatedProperty[F]=!0;(this||yc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(F)&&(null==(this||yc)._savedTransformAttr&&((this||yc)._savedTransformAttr=(this||yc)._element.getAttribute("transform")),(this||yc)._element.setAttribute("transform",
e.transformToSvgMatrix(H)))},_clear:function(F){(this||yc)._style[F]=(this||yc)._surrogateStyle[F];(this||yc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(F)&&((this||yc)._savedTransformAttr?(this||yc)._element.setAttribute("transform",(this||yc)._savedTransformAttr):(this||yc)._element.removeAttribute("transform"),(this||yc)._savedTransformAttr=null);delete (this||yc)._isAnimatedProperty[F]}};for(var A in v)g.prototype[A]=function(F,H){return function(){var I=(this||yc)._surrogateStyle[F].apply((this||
yc)._surrogateStyle,arguments);return H&&((this||yc)._isAnimatedProperty[arguments[0]]||(this||yc)._style[F].apply((this||yc)._style,arguments),this._updateIndices()),I}}(A,A in y);for(var E in document.documentElement.style)E in m||E in v||function(F){a(g.prototype,F,{get:function(){return(this||yc)._surrogateStyle[F]},set:function(H){(this||yc)._surrogateStyle[F]=H;this._updateIndices();(this||yc)._isAnimatedProperty[F]||((this||yc)._style[F]=H)}})}(E);e.apply=function(F,H,I){l(F);F.style._set(e.propertyName(H),
I)};e.clear=function(F,H){F._webAnimationsPatchedStyle&&F.style._clear(e.propertyName(H))}})(k);(function(e){window.Element.prototype.animate=function(m,a){var g="";return a&&a.id&&(g=a.id),e.timeline._play(e.KeyframeEffect(this||yc,m,a,g))}})(k);(function(e,m){function a(g,l,r){if("number"==typeof g&&"number"==typeof l)return g*(1-r)+l*r;if("boolean"==typeof g&&"boolean"==typeof l)return.5>r?g:l;if(g.length==l.length){for(var v=[],y=0;y<g.length;y++)v.push(a(g[y],l[y],r));return v}throw"Mismatched interpolation arguments "+
g+":"+l;}e.Interpolation=function(g,l,r){return function(v){return r(a(g,l,v))}}})(k);(function(e,m){m=function(){function a(g,l){for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],v=0;4>v;v++)for(var y=0;4>y;y++)for(var A=0;4>A;A++)r[v][y]+=l[v][A]*g[A][y];return r}return function(g,l,r,v,y){for(var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],E=0;4>E;E++)A[E][3]=y[E];for(E=0;3>E;E++)for(y=0;3>y;y++)A[3][E]+=g[y]*A[y][E];g=v[0];E=v[1];y=v[2];v=v[3];var F=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
F[0][0]=1-2*(E*E+y*y);F[0][1]=2*(g*E-y*v);F[0][2]=2*(g*y+E*v);F[1][0]=2*(g*E+y*v);F[1][1]=1-2*(g*g+y*y);F[1][2]=2*(E*y-g*v);F[2][0]=2*(g*y-E*v);F[2][1]=2*(E*y+g*v);F[2][2]=1-2*(g*g+E*E);A=a(A,F);v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],A=a(A,v));r[1]&&(v[2][1]=0,v[2][0]=r[0],A=a(A,v));r[0]&&(v[2][0]=0,v[1][0]=r[0],A=a(A,v));for(E=0;3>E;E++)for(y=0;3>y;y++)A[E][y]*=l[E];return 0==A[0][2]&&0==A[0][3]&&0==A[1][2]&&0==A[1][3]&&0==A[2][0]&&0==A[2][1]&&1==A[2][2]&&0==A[2][3]&&0==
A[3][2]&&1==A[3][3]?[A[0][0],A[0][1],A[1][0],A[1][1],A[3][0],A[3][1]]:A[0].concat(A[1],A[2],A[3])}}();e.composeMatrix=m;e.quat=function(a,g,l){var r=e.dot(a,g);r=Math.max(Math.min(r,1),-1);var v=[];if(1===r)v=a;else for(var y=Math.acos(r),A=1*Math.sin(l*y)/Math.sqrt(1-r*r),E=0;4>E;E++)v.push(a[E]*(Math.cos(l*y)-r*A)+g[E]*A);return v}})(k);(function(e,m,a){e.sequenceNumber=0;var g=function(l,r,v){(this||yc).target=l;(this||yc).currentTime=r;(this||yc).timelineTime=v;(this||yc).type="finish";(this||
yc).bubbles=!1;(this||yc).cancelable=!1;(this||yc).currentTarget=l;(this||yc).defaultPrevented=!1;(this||yc).eventPhase=Event.AT_TARGET;(this||yc).timeStamp=Date.now()};m.Animation=function(l){(this||yc).id="";l&&l._id&&((this||yc).id=l._id);(this||yc)._sequenceNumber=e.sequenceNumber++;(this||yc)._currentTime=0;(this||yc)._startTime=null;(this||yc)._paused=!1;(this||yc)._playbackRate=1;(this||yc)._inTimeline=!0;(this||yc)._finishedFlag=!0;(this||yc).onfinish=null;(this||yc)._finishHandlers=[];(this||
yc)._effect=l;(this||yc)._inEffect=(this||yc)._effect._update(0);(this||yc)._idle=!0;(this||yc)._currentTimePending=!1};m.Animation.prototype={_ensureAlive:function(){0>(this||yc).playbackRate&&0===(this||yc).currentTime?(this||yc)._inEffect=(this||yc)._effect._update(-1):(this||yc)._inEffect=(this||yc)._effect._update((this||yc).currentTime);(this||yc)._inTimeline||!(this||yc)._inEffect&&(this||yc)._finishedFlag||((this||yc)._inTimeline=!0,m.timeline._animations.push(this||yc))},_tickCurrentTime:function(l,
r){l!=(this||yc)._currentTime&&((this||yc)._currentTime=l,(this||yc)._isFinished&&!r&&((this||yc)._currentTime=0<(this||yc)._playbackRate?(this||yc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||yc)._idle||(this||yc)._currentTimePending?null:(this||yc)._currentTime},set currentTime(l){l=+l;isNaN(l)||(m.restart(),(this||yc)._paused||null==(this||yc)._startTime||((this||yc)._startTime=(this||yc)._timeline.currentTime-l/(this||yc)._playbackRate),(this||yc)._currentTimePending=
!1,(this||yc)._currentTime!=l&&((this||yc)._idle&&((this||yc)._idle=!1,(this||yc)._paused=!0),this._tickCurrentTime(l,!0),m.applyDirtiedAnimation(this||yc)))},get startTime(){return(this||yc)._startTime},set startTime(l){l=+l;isNaN(l)||(this||yc)._paused||(this||yc)._idle||((this||yc)._startTime=l,this._tickCurrentTime(((this||yc)._timeline.currentTime-(this||yc)._startTime)*(this||yc).playbackRate),m.applyDirtiedAnimation(this||yc))},get playbackRate(){return(this||yc)._playbackRate},set playbackRate(l){if(l!=
(this||yc)._playbackRate){var r=(this||yc).currentTime;(this||yc)._playbackRate=l;(this||yc)._startTime=null;"paused"!=(this||yc).playState&&"idle"!=(this||yc).playState&&((this||yc)._finishedFlag=!1,(this||yc)._idle=!1,this._ensureAlive(),m.applyDirtiedAnimation(this||yc));null!=r&&((this||yc).currentTime=r)}},get _isFinished(){return!(this||yc)._idle&&(0<(this||yc)._playbackRate&&(this||yc)._currentTime>=(this||yc)._totalDuration||0>(this||yc)._playbackRate&&0>=(this||yc)._currentTime)},get _totalDuration(){return(this||
yc)._effect._totalDuration},get playState(){return(this||yc)._idle?"idle":null==(this||yc)._startTime&&!(this||yc)._paused&&0!=(this||yc).playbackRate||(this||yc)._currentTimePending?"pending":(this||yc)._paused?"paused":(this||yc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||yc)._playbackRate)(this||yc)._currentTime=0;else{if(!((this||yc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||yc)._currentTime=(this||yc)._totalDuration}},play:function(){(this||yc)._paused=!1;((this||yc)._isFinished||(this||yc)._idle)&&(this._rewind(),(this||yc)._startTime=null);(this||yc)._finishedFlag=!1;(this||yc)._idle=!1;this._ensureAlive();m.applyDirtiedAnimation(this||yc)},pause:function(){(this||yc)._isFinished||(this||yc)._paused||(this||yc)._idle?(this||yc)._idle&&(this._rewind(),(this||yc)._idle=!1):(this||yc)._currentTimePending=!0;(this||yc)._startTime=null;(this||yc)._paused=!0},finish:function(){(this||
yc)._idle||((this||yc).currentTime=0<(this||yc)._playbackRate?(this||yc)._totalDuration:0,(this||yc)._startTime=(this||yc)._totalDuration-(this||yc).currentTime,(this||yc)._currentTimePending=!1,m.applyDirtiedAnimation(this||yc))},cancel:function(){(this||yc)._inEffect&&((this||yc)._inEffect=!1,(this||yc)._idle=!0,(this||yc)._paused=!1,(this||yc)._finishedFlag=!0,(this||yc)._currentTime=0,(this||yc)._startTime=null,(this||yc)._effect._update(null),m.applyDirtiedAnimation(this||yc))},reverse:function(){(this||
yc).playbackRate*=-1;this.play()},addEventListener:function(l,r){"function"==typeof r&&"finish"==l&&(this||yc)._finishHandlers.push(r)},removeEventListener:function(l,r){"finish"==l&&(l=(this||yc)._finishHandlers.indexOf(r),0<=l&&(this||yc)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||yc)._isFinished){if(!(this||yc)._finishedFlag){var r=new g(this||yc,(this||yc)._currentTime,l),v=(this||yc)._finishHandlers.concat((this||yc).onfinish?[(this||yc).onfinish]:[]);setTimeout(function(){v.forEach(function(y){y.call(r.target,
r)})},0);(this||yc)._finishedFlag=!0}}else(this||yc)._finishedFlag=!1},_tick:function(l,r){(this||yc)._idle||(this||yc)._paused||(null==(this||yc)._startTime?r&&((this||yc).startTime=l-(this||yc)._currentTime/(this||yc).playbackRate):(this||yc)._isFinished||this._tickCurrentTime((l-(this||yc)._startTime)*(this||yc).playbackRate));r&&((this||yc)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||yc).playState in{pending:1,running:1}||!(this||yc)._finishedFlag},_targetAnimations:function(){var l=
(this||yc)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();-1===l.indexOf(this||yc)&&l.push(this||yc)},_unmarkTarget:function(){var l=this._targetAnimations(),r=l.indexOf(this||yc);-1!==r&&l.splice(r,1)}}})(f,k);(function(e,m,a){function g(W){var ea=E;E=[];W<X.currentTime&&(W=X.currentTime);X._animations.sort(l);X._animations=y(W,!0,X._animations)[0];ea.forEach(function(Aa){Aa[1](W)});v()}function l(W,
ea){return W._sequenceNumber-ea._sequenceNumber}function r(){(this||yc)._animations=[];(this||yc).currentTime=window.performance&&performance.now?performance.now():0}function v(){M.forEach(function(W){W()});M.length=0}function y(W,ea,Aa){N=!0;I=!1;m.timeline.currentTime=W;H=!1;var Ka=[],K=[],aa=[],T=[];return Aa.forEach(function(U){U._tick(W,ea);U._inEffect?(K.push(U._effect),U._markTarget()):(Ka.push(U._effect),U._unmarkTarget());U._needsTick&&(H=!0);var pa=U._inEffect||U._needsTick;(U._inTimeline=
pa)?aa.push(U):T.push(U)}),M.push.apply(M,Ka),M.push.apply(M,K),H&&requestAnimationFrame(function(){}),N=!1,[aa,T]}var A=window.requestAnimationFrame,E=[],F=0;window.requestAnimationFrame=function(W){var ea=F++;return 0==E.length&&A(g),E.push([ea,W]),ea};window.cancelAnimationFrame=function(W){E.forEach(function(ea){ea[0]==W&&(ea[1]=function(){})})};r.prototype={_play:function(W){W._timing=e.normalizeTimingInput(W.timing);W=new m.Animation(W);return W._idle=!1,W._timeline=this||yc,(this||yc)._animations.push(W),
m.restart(),m.applyDirtiedAnimation(W),W}};var H=!1,I=!1;m.restart=function(){return H||(H=!0,requestAnimationFrame(function(){}),I=!0),I};m.applyDirtiedAnimation=function(W){N||(W._markTarget(),W=W._targetAnimations(),W.sort(l),y(m.timeline.currentTime,!1,W.slice())[1].forEach(function(ea){ea=X._animations.indexOf(ea);-1!==ea&&X._animations.splice(ea,1)}),v())};var M=[],N=!1,X=new r;m.timeline=X})(f,k);(function(e,m){function a(A,E){for(var F=0,H=0;H<A.length;H++)F+=A[H]*E[H];return F}function g(A,
E){return[A[0]*E[0]+A[4]*E[1]+A[8]*E[2]+A[12]*E[3],A[1]*E[0]+A[5]*E[1]+A[9]*E[2]+A[13]*E[3],A[2]*E[0]+A[6]*E[1]+A[10]*E[2]+A[14]*E[3],A[3]*E[0]+A[7]*E[1]+A[11]*E[2]+A[15]*E[3],A[0]*E[4]+A[4]*E[5]+A[8]*E[6]+A[12]*E[7],A[1]*E[4]+A[5]*E[5]+A[9]*E[6]+A[13]*E[7],A[2]*E[4]+A[6]*E[5]+A[10]*E[6]+A[14]*E[7],A[3]*E[4]+A[7]*E[5]+A[11]*E[6]+A[15]*E[7],A[0]*E[8]+A[4]*E[9]+A[8]*E[10]+A[12]*E[11],A[1]*E[8]+A[5]*E[9]+A[9]*E[10]+A[13]*E[11],A[2]*E[8]+A[6]*E[9]+A[10]*E[10]+A[14]*E[11],A[3]*E[8]+A[7]*E[9]+A[11]*E[10]+
A[15]*E[11],A[0]*E[12]+A[4]*E[13]+A[8]*E[14]+A[12]*E[15],A[1]*E[12]+A[5]*E[13]+A[9]*E[14]+A[13]*E[15],A[2]*E[12]+A[6]*E[13]+A[10]*E[14]+A[14]*E[15],A[3]*E[12]+A[7]*E[13]+A[11]*E[14]+A[15]*E[15]]}function l(A){return 2*((A.deg||0)/360+(A.grad||0)/400+(A.turn||0))*Math.PI+(A.rad||0)}function r(A){switch(A.t){case "rotatex":return A=l(A.d[0]),[1,0,0,0,0,Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1];case "rotatey":return A=l(A.d[0]),[Math.cos(A),0,-Math.sin(A),0,0,1,0,0,Math.sin(A),
0,Math.cos(A),0,0,0,0,1];case "rotate":case "rotatez":return A=l(A.d[0]),[Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var E=A.d[0],F=A.d[1],H=A.d[2];A=l(A.d[3]);var I=E*E+F*F+H*H;0===I?(E=1,H=F=0):1!==I&&(I=Math.sqrt(I),E/=I,F/=I,H/=I);I=Math.sin(A/2);A=I*Math.cos(A/2);I*=I;return[1-2*(F*F+H*H)*I,2*(E*F*I+H*A),2*(E*H*I-F*A),0,2*(E*F*I-H*A),1-2*(E*E+H*H)*I,2*(F*H*I+E*A),0,2*(E*H*I+F*A),2*(F*H*I-E*A),1-2*(E*E+F*F)*I,0,0,0,0,1];case "scale":return[A.d[0],
0,0,0,0,A.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[A.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,A.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,A.d[0],0,0,0,0,1];case "scale3d":return[A.d[0],0,0,0,0,A.d[1],0,0,0,0,A.d[2],0,0,0,0,1];case "skew":return E=l(A.d[0]),F=l(A.d[1]),[1,Math.tan(F),0,0,Math.tan(E),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return A=l(A.d[0]),[1,0,0,0,Math.tan(A),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return A=l(A.d[0]),[1,Math.tan(A),
0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return E=A.d[0].px||0,F=A.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,0,1];case "translatex":return E=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,0,0,1];case "translatey":return F=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,F,0,1];case "translatez":return H=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,H,1];case "translate3d":return E=A.d[0].px||0,F=A.d[1].px||0,H=A.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,H,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,A.d[0].px?
-1/A.d[0].px:0,0,0,0,1];case "matrix":return[A.d[0],A.d[1],0,0,A.d[2],A.d[3],0,0,0,0,1,0,A.d[4],A.d[5],0,1];case "matrix3d":return A.d}}function v(A){return 0===A.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:A.map(r).reduce(g)}var y=function(){function A(I){return I[0][0]*I[1][1]*I[2][2]+I[1][0]*I[2][1]*I[0][2]+I[2][0]*I[0][1]*I[1][2]-I[0][2]*I[1][1]*I[2][0]-I[1][2]*I[2][1]*I[0][0]-I[2][2]*I[0][1]*I[1][0]}function E(I){var M=F(I);return[I[0]/M,I[1]/M,I[2]/M]}function F(I){return Math.sqrt(I[0]*I[0]+I[1]*
I[1]+I[2]*I[2])}function H(I,M,N,X){return[N*I[0]+X*M[0],N*I[1]+X*M[1],N*I[2]+X*M[2]]}return function(I){I=[I.slice(0,4),I.slice(4,8),I.slice(8,12),I.slice(12,16)];if(1!==I[3][3])return null;for(var M=[],N=0;4>N;N++)M.push(I[N].slice());for(N=0;3>N;N++)M[N][3]=0;if(0===A(M))return null;var X=[];if(I[0][3]||I[1][3]||I[2][3]){X.push(I[0][3]);X.push(I[1][3]);X.push(I[2][3]);X.push(I[3][3]);var W=1/A(M),ea=M[0][0],Aa=M[0][1];N=M[0][2];var Ka=M[1][0],K=M[1][1],aa=M[1][2],T=M[2][0],U=M[2][1],pa=M[2][2];
W=[[(K*pa-aa*U)*W,(N*U-Aa*pa)*W,(Aa*aa-N*K)*W,0],[(aa*T-Ka*pa)*W,(ea*pa-N*T)*W,(N*Ka-ea*aa)*W,0],[(Ka*U-K*T)*W,(T*Aa-ea*U)*W,(ea*K-Aa*Ka)*W,0]];ea=[];for(Aa=0;3>Aa;Aa++){for(Ka=N=0;3>Ka;Ka++)N+=M[3][Ka]*W[Ka][Aa];ea.push(N)}M=(ea.push(1),W.push(ea),W);M=[[M[0][0],M[1][0],M[2][0],M[3][0]],[M[0][1],M[1][1],M[2][1],M[3][1]],[M[0][2],M[1][2],M[2][2],M[3][2]],[M[0][3],M[1][3],M[2][3],M[3][3]]];W=[];for(ea=0;4>ea;ea++){for(N=Aa=0;4>N;N++)Aa+=X[N]*M[N][ea];W.push(Aa)}X=W}else X=[0,0,0,1];M=I[3].slice(0,
3);W=[];W.push(I[0].slice(0,3));ea=[];ea.push(F(W[0]));W[0]=E(W[0]);Aa=[];W.push(I[1].slice(0,3));Aa.push(a(W[0],W[1]));W[1]=H(W[1],W[0],1,-Aa[0]);ea.push(F(W[1]));W[1]=E(W[1]);Aa[0]/=ea[1];W.push(I[2].slice(0,3));Aa.push(a(W[0],W[2]));W[2]=H(W[2],W[0],1,-Aa[1]);Aa.push(a(W[1],W[2]));W[2]=H(W[2],W[1],1,-Aa[2]);ea.push(F(W[2]));W[2]=E(W[2]);Aa[1]/=ea[2];Aa[2]/=ea[2];I=W[1];N=W[2];if(0>a(W[0],[I[1]*N[2]-I[2]*N[1],I[2]*N[0]-I[0]*N[2],I[0]*N[1]-I[1]*N[0]]))for(N=0;3>N;N++)ea[N]*=-1,W[N][0]*=-1,W[N][1]*=
-1,W[N][2]*=-1;var fa,oa;I=W[0][0]+W[1][1]+W[2][2]+1;return 1E-4<I?(fa=.5/Math.sqrt(I),oa=[(W[2][1]-W[1][2])*fa,(W[0][2]-W[2][0])*fa,(W[1][0]-W[0][1])*fa,.25/fa]):W[0][0]>W[1][1]&&W[0][0]>W[2][2]?(fa=2*Math.sqrt(1+W[0][0]-W[1][1]-W[2][2]),oa=[.25*fa,(W[0][1]+W[1][0])/fa,(W[0][2]+W[2][0])/fa,(W[2][1]-W[1][2])/fa]):W[1][1]>W[2][2]?(fa=2*Math.sqrt(1+W[1][1]-W[0][0]-W[2][2]),oa=[(W[0][1]+W[1][0])/fa,.25*fa,(W[1][2]+W[2][1])/fa,(W[0][2]-W[2][0])/fa]):(fa=2*Math.sqrt(1+W[2][2]-W[0][0]-W[1][1]),oa=[(W[0][2]+
W[2][0])/fa,(W[1][2]+W[2][1])/fa,.25*fa,(W[1][0]-W[0][1])/fa]),[M,ea,Aa,oa,X]}}();e.dot=a;e.makeMatrixDecomposition=function(A){return[y(v(A))]};e.transformListToMatrix=v})(k);(function(e){function m(r,v){var y=r.exec(v);if(y)return y=r.ignoreCase?y[0].toLowerCase():y[0],[y,v.substr(y.length)]}function a(r,v){v=v.replace(/^\s*/,"");if(r=r(v))return[r[0],r[1].replace(/^\s*/,"")]}function g(r,v){for(var y=r,A=v;y&&A;)y>A?y%=A:A%=y;return r*v/(y+A)}function l(r,v,y,A,E){for(var F=[],H=[],I=[],M=g(A.length,
E.length),N=0;N<M;N++){var X=v(A[N%A.length],E[N%E.length]);if(!X)return;F.push(X[0]);H.push(X[1]);I.push(X[2])}return[F,H,function(W){W=W.map(function(ea,Aa){return I[Aa](ea)}).join(y);return r?r(W):W}]}e.consumeToken=m;e.consumeTrimmed=a;e.consumeRepeated=function(r,v,y){r=a.bind(null,r);for(var A=[];;){var E=r(y);if(!E||(A.push(E[0]),y=E[1],!(E=m(v,y))||""==E[1]))return[A,y];y=E[1]}};e.consumeParenthesised=function(r,v){for(var y=0,A=0;A<v.length&&(!/\s|,/.test(v[A])||0!=y);A++)if("("==v[A])y++;
else if(")"==v[A]&&(y--,0==y&&A++,0>=y))break;r=r(v.substr(0,A));return void 0==r?void 0:[r,v.substr(A)]};e.ignore=function(r){return function(v){v=r(v);return v&&(v[0]=void 0),v}};e.optional=function(r,v){return function(y){return r(y)||[v,y]}};e.consumeList=function(r,v){for(var y=[],A=0;A<r.length;A++){v=e.consumeTrimmed(r[A],v);if(!v||""==v[0])return;void 0!==v[0]&&y.push(v[0]);v=v[1]}if(""==v)return y};e.mergeNestedRepeated=l.bind(null,null);e.mergeWrappedNestedRepeated=l;e.mergeList=function(r,
v,y){for(var A=[],E=[],F=[],H=0,I=0;I<y.length;I++)if("function"==typeof y[I]){var M=y[I](r[H],v[H++]);A.push(M[0]);E.push(M[1]);F.push(M[2])}else!function(N){A.push(!1);E.push(!1);F.push(function(){return y[N]})}(I);return[A,E,function(N){for(var X="",W=0;W<N.length;W++)X+=F[W](N[W]);return X}]}})(k);(function(e){function m(g){var l={inset:!1,lengths:[],color:null};if((g=e.consumeRepeated(function(r){var v=e.consumeToken(/^inset/i,r);return v?(l.inset=!0,v):(v=e.consumeLengthOrPercent(r))?(l.lengths.push(v[0]),
v):(v=e.consumeColor(r),v?(l.color=v[0],v):void 0)},/^/,g))&&g[0].length)return[l,g[1]]}var a=function(g,l,r,v){function y(M){return{inset:M,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var A=[],E=[],F=0;F<r.length||F<v.length;F++){var H=r[F]||y(v[F].inset),I=v[F]||y(r[F].inset);A.push(H);E.push(I)}return e.mergeNestedRepeated(g,l,A,E)}.bind(null,function(g,l){for(;g.lengths.length<Math.max(g.lengths.length,l.lengths.length);)g.lengths.push({px:0});for(;l.lengths.length<Math.max(g.lengths.length,
l.lengths.length);)l.lengths.push({px:0});if(g.inset==l.inset&&!!g.color==!!l.color){for(var r,v=[],y=[[],0],A=[[],0],E=0;E<g.lengths.length;E++){var F=e.mergeDimensions(g.lengths[E],l.lengths[E],2==E);y[0].push(F[0]);A[0].push(F[1]);v.push(F[2])}g.color&&l.color&&(l=e.mergeColors(g.color,l.color),y[1]=l[0],A[1]=l[1],r=l[2]);return[y,A,function(H){for(var I=g.inset?"inset ":" ",M=0;M<v.length;M++)I+=v[M](H[0][M])+" ";return r&&(I+=r(H[1])),I}]}},", ");e.addPropertiesHandler(function(g){if((g=e.consumeRepeated(m,
/^,/,g))&&""==g[1])return g[0]},a,["box-shadow","text-shadow"])})(k);(function(e,m){function a(y){return y.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function g(y,A,E){return Math.min(A,Math.max(y,E))}function l(y){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(y))return Number(y)}function r(y,A){return function(E,F){return[E,F,function(H){return a(g(y,A,H))}]}}function v(y){y=y.trim().split(/\s*[\s,]\s*/);if(0!==y.length){for(var A=[],E=0;E<y.length;E++){var F=l(y[E]);if(void 0===F)return;A.push(F)}return A}}
e.clamp=g;e.addPropertiesHandler(v,function(y,A){if(y.length==A.length)return[y,A,function(E){return E.map(a).join(" ")}]},["stroke-dasharray"]);e.addPropertiesHandler(l,r(0,1/0),["border-image-width","line-height"]);e.addPropertiesHandler(l,r(0,1),["opacity","shape-image-threshold"]);e.addPropertiesHandler(l,function(y,A){if(0!=y)return r(0,1/0)(y,A)},["flex-grow","flex-shrink"]);e.addPropertiesHandler(l,function(y,A){return[y,A,function(E){return Math.round(g(1,1/0,E))}]},["orphans","widows"]);
e.addPropertiesHandler(l,function(y,A){return[y,A,Math.round]},["z-index"]);e.parseNumber=l;e.parseNumberList=v;e.mergeNumbers=function(y,A){return[y,A,a]};e.numberToString=a})(k);(function(e,m){e.addPropertiesHandler(String,function(a,g){if("visible"==a||"visible"==g)return[0,1,function(l){return 0>=l?a:1<=l?g:"visible"}]},["visibility"])})(k);(function(e,m){function a(r){r=r.trim();l.fillStyle="#000";l.fillStyle=r;var v=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=r,v==l.fillStyle)return l.fillRect(0,
0,1,1),r=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),v=r[3]/255,[r[0]*v,r[1]*v,r[2]*v,v]}function g(r,v){return[r,v,function(y){if(y[3])for(var A=0;3>A;A++)y[A]=Math.round(Math.max(0,Math.min(255,y[A]/y[3])));return y[3]=e.numberToString(e.clamp(0,1,y[3])),"rgba("+y.join(",")+")"}]}m=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");m.width=m.height=1;var l=m.getContext("2d");e.addPropertiesHandler(a,g,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
e.consumeColor=e.consumeParenthesised.bind(null,a);e.mergeColors=g})(k);(function(e,m){function a(E){function F(){var W=X.exec(E);N=W?W[0]:void 0}function H(){if("("!==N){var W=Number(N);return F(),W}F();W=M();return")"!==N?NaN:(F(),W)}function I(){for(var W=H();"*"===N||"/"===N;){var ea=N;F();var Aa=H();"*"===ea?W*=Aa:W/=Aa}return W}function M(){for(var W=I();"+"===N||"-"===N;){var ea=N;F();var Aa=I();"+"===ea?W+=Aa:W-=Aa}return W}var N,X=/([\+\-\w\.]+|[\(\)\*\/])/g;return F(),M()}function g(E,F){if("0"==
(F=F.trim().toLowerCase())&&0<="px".search(E))return{px:0};if(/^[^(]*$|^calc/.test(F)){F=F.replace(/calc\(/g,"(");var H={};F=F.replace(E,function(W){return H[W]=null,"U"+W});E="U("+E.source+")";for(var I=F.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+E,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),M=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],N=0;N<M.length;)M[N].test(I)?(I=I.replace(M[N],"$1"),N=0):N++;if("D"==I){for(var X in H){I=a(F.replace(new RegExp("U"+
X,"g"),"").replace(new RegExp(E,"g"),"*0"));if(!isFinite(I))return;H[X]=I}return H}}}function l(E,F){return r(E,F,!0)}function r(E,F,H){var I,M=[];for(I in E)M.push(I);for(I in F)0>M.indexOf(I)&&M.push(I);return E=M.map(function(N){return E[N]||0}),F=M.map(function(N){return F[N]||0}),[E,F,function(N){var X=N.map(function(W,ea){return 1==N.length&&H&&(W=Math.max(W,0)),e.numberToString(W)+M[ea]}).join(" + ");return 1<N.length?"calc("+X+")":X}]}var v=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);
m=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var y=g.bind(null,/deg|rad|grad|turn/g);e.parseLength=v;e.parseLengthOrPercent=m;e.consumeLengthOrPercent=e.consumeParenthesised.bind(null,m);e.parseAngle=y;e.mergeDimensions=r;v=e.consumeParenthesised.bind(null,v);v=e.consumeRepeated.bind(void 0,v,/^/);var A=e.consumeRepeated.bind(void 0,v,/^,/);e.consumeSizePairList=A;v=e.mergeNestedRepeated.bind(void 0,l," ");y=e.mergeNestedRepeated.bind(void 0,v,",");e.mergeNonNegativeSizePair=
v;e.addPropertiesHandler(function(E){if((E=A(E))&&""==E[1])return E[0]},y,["background-size"]);e.addPropertiesHandler(m,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));e.addPropertiesHandler(m,r,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(k);
(function(e,m){function a(l){return e.consumeLengthOrPercent(l)||e.consumeToken(/^auto/,l)}function g(l){if((l=e.consumeList([e.ignore(e.consumeToken.bind(null,/^rect/)),e.ignore(e.consumeToken.bind(null,/^\(/)),e.consumeRepeated.bind(null,a,/^,/),e.ignore(e.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}m=e.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,r){return"auto"==l||"auto"==r?[!0,!1,function(v){v=v?l:r;if("auto"==v)return"auto";v=e.mergeDimensions(v,
v);return v[2](v[0])}]:e.mergeDimensions(l,r)},", ");e.parseBox=g;e.mergeBoxes=m;e.addPropertiesHandler(g,m,["clip"])})(k);(function(e,m){function a(I){return function(M){var N=0;return I.map(function(X){return X===A?M[N++]:X})}}function g(I){return I}function l(I){if("none"==(I=I.toLowerCase().trim()))return[];for(var M,N=/\s*(\w+)\(([^)]*)\)/g,X=[],W=0;(M=N.exec(I))&&M.index==W;){W=M.index+M[0].length;var ea=M[1],Aa=H[ea];if(!Aa)break;M=M[2].split(",");Aa=Aa[0];if(Aa.length<M.length)break;for(var Ka=
[],K=0;K<Aa.length;K++){var aa=M[K];var T=Aa[K];if(void 0===(aa=aa?{A:function(U){return"0"==U.trim()?F:e.parseAngle(U)},N:e.parseNumber,T:e.parseLengthOrPercent,L:e.parseLength}[T.toUpperCase()](aa):{a:F,n:Ka[0],t:E}[T]))return;Ka.push(aa)}if(X.push({t:ea,d:Ka}),N.lastIndex==I.length)return X}}function r(I){return I.toFixed(6).replace(".000000","")}function v(I,M){if(I.decompositionPair!==M){I.decompositionPair=M;var N=e.makeMatrixDecomposition(I)}if(M.decompositionPair!==I){M.decompositionPair=
I;var X=e.makeMatrixDecomposition(M)}return null==N[0]||null==X[0]?[[!1],[!0],function(W){return W?M[0].d:I[0].d}]:(N[0].push(0),X[0].push(1),[N,X,function(W){var ea=e.quat(N[0][3],X[0][3],W[5]);return e.composeMatrix(W[0],W[1],W[2],ea,W[4]).map(r).join(",")}])}function y(I){return I.replace(/(x|y|z|3d)?$/,"3d")}var A=null,E={px:0},F={deg:0},H={matrix:["NNNNNN",[A,A,0,0,A,A,0,0,0,0,1,0,A,A,0,1],g],matrix3d:["NNNNNNNNNNNNNNNN",g],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],
perspective:["L"],scale:["Nn",a([A,A,1]),g],scalex:["N",a([A,1,1]),a([A,1])],scaley:["N",a([1,A,1]),a([1,A])],scalez:["N",a([1,1,A])],scale3d:["NNN",g],skew:["Aa",null,g],skewx:["A",null,a([A,F])],skewy:["A",null,a([F,A])],translate:["Tt",a([A,A,E]),g],translatex:["T",a([A,E,E]),a([A,E])],translatey:["T",a([E,A,E]),a([E,A])],translatez:["L",a([E,E,A])],translate3d:["TTL",g]};e.addPropertiesHandler(l,function(I,M){var N=e.makeMatrixDecomposition&&!0,X=!1;if(!I.length||!M.length){I.length||(X=!0,I=
M,M=[]);for(var W=0;W<I.length;W++){var ea=I[W].t,Aa=I[W].d,Ka="scale"==ea.substr(0,5)?1:0;M.push({t:ea,d:Aa.map(function(va){if("number"==typeof va)return Ka;var ma={},ua;for(ua in va)ma[ua]=Ka;return ma})})}}Aa=[];var K=[],aa=[];if(I.length!=M.length){if(!N)return;var T=v(I,M);Aa=[T[0]];K=[T[1]];aa=[["matrix",[T[2]]]]}else for(W=0;W<I.length;W++){ea=I[W].t;var U=M[W].t,pa=I[W].d,fa=M[W].d;T=H[ea];var oa=H[U];if("perspective"==ea&&"perspective"==U||!("matrix"!=ea&&"matrix3d"!=ea||"matrix"!=U&&"matrix3d"!=
U)){if(!N)return;T=v([I[W]],[M[W]]);Aa.push(T[0]);K.push(T[1]);aa.push(["matrix",[T[2]]])}else{if(ea!=U)if(T[2]&&oa[2]&&ea.replace(/[xy]/,"")==U.replace(/[xy]/,""))ea=ea.replace(/[xy]/,""),pa=T[2](pa),fa=oa[2](fa);else{if(!T[1]||!oa[1]||y(ea)!=y(U)){if(!N)return;T=v(I,M);Aa=[T[0]];K=[T[1]];aa=[["matrix",[T[2]]]];break}ea=y(ea);pa=T[1](pa);fa=oa[1](fa)}oa=[];U=[];for(var hb=[],Cb=0;Cb<pa.length;Cb++)T=("number"==typeof pa[Cb]?e.mergeNumbers:e.mergeDimensions)(pa[Cb],fa[Cb]),oa[Cb]=T[0],U[Cb]=T[1],
hb.push(T[2]);Aa.push(oa);K.push(U);aa.push([ea,hb])}}X&&(I=Aa,Aa=K,K=I);return[Aa,K,function(va){return va.map(function(ma,ua){ma=ma.map(function(Ma,Lb){return aa[ua][1][Lb](Ma)}).join(",");return"matrix"==aa[ua][0]&&16==ma.split(",").length&&(aa[ua][0]="matrix3d"),aa[ua][0]+"("+ma+")"}).join(" ")}]},["transform"]);e.transformToSvgMatrix=function(I){I=e.transformListToMatrix(l(I));return"matrix("+r(I[0])+" "+r(I[1])+" "+r(I[4])+" "+r(I[5])+" "+r(I[12])+" "+r(I[13])+")"}})(k);(function(e){function m(a){return a=
100*Math.round(a/100),a=e.clamp(100,900,a),400===a?"normal":700===a?"bold":String(a)}e.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,g){return[a,g,m]},["font-weight"])})(k);(function(e){function m(v){return e.consumeToken(/^(left|center|right|top|bottom)\b/i,v)||e.consumeLengthOrPercent(v)}function a(v,y){if((y=e.consumeRepeated(m,/^/,y))&&""==y[1]&&(y=y[0],y[0]=y[0]||"center",y[1]=y[1]||"center",3==v&&(y[2]=y[2]||{px:0}),y.length==v)){if(/top|bottom/.test(y[0])||
/left|right/.test(y[1]))v=y[0],y[0]=y[1],y[1]=v;if(/left|right|center|Object/.test(y[0])&&/top|bottom|center|Object/.test(y[1]))return y.map(function(A){return"object"==typeof A?A:l[A]})}}function g(v){if(v=e.consumeRepeated(m,/^/,v)){for(var y=v[0],A=[{"%":50},{"%":50}],E=0,F=!1,H=0;H<y.length;H++){var I=y[H];if("string"==typeof I)F=/bottom|right/.test(I),E={left:0,right:0,center:E,top:1,bottom:1}[I],A[E]=l[I],"center"==I&&E++;else{if(F){F=void 0;var M={};for(F in I)M[F]=-I[F];I=M;I["%"]=(I["%"]||
0)+100}A[E]=I;E++;F=!1}}return[A,v[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},r=e.mergeNestedRepeated.bind(null,e.mergeDimensions," ");e.addPropertiesHandler(a.bind(null,3),r,["transform-origin"]);e.addPropertiesHandler(a.bind(null,2),r,["perspective-origin"]);e.consumePosition=g;e.mergeOffsetList=r;r=e.mergeNestedRepeated.bind(null,r,", ");e.addPropertiesHandler(function(v){if((v=e.consumeRepeated(g,/^,/,v))&&""==v[1])return v[0]},r,["background-position",
"object-position"])})(k);(function(e){var m=e.consumeParenthesised.bind(null,e.parseLengthOrPercent),a=e.consumeRepeated.bind(void 0,m,/^/),g=e.mergeNestedRepeated.bind(void 0,e.mergeDimensions," "),l=e.mergeNestedRepeated.bind(void 0,g,",");e.addPropertiesHandler(function(r){var v=e.consumeToken(/^circle/,r);return v&&v[0]?["circle"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),m,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,
/^\)/))],v[1])):(v=e.consumeToken(/^ellipse/,r))&&v[0]?["ellipse"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),a,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],v[1])):(r=e.consumeToken(/^polygon/,r))&&r[0]?["polygon"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),e.optional(e.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),e.consumeSizePairList,e.ignore(e.consumeToken.bind(void 0,
/^\)/))],r[1])):void 0},function(r,v){if(r[0]===v[0])return"circle"==r[0]?e.mergeList(r.slice(1),v.slice(1),["circle(",e.mergeDimensions," at ",e.mergeOffsetList,")"]):"ellipse"==r[0]?e.mergeList(r.slice(1),v.slice(1),["ellipse(",e.mergeNonNegativeSizePair," at ",e.mergeOffsetList,")"]):"polygon"==r[0]&&r[1]==v[1]?e.mergeList(r.slice(2),v.slice(2),["polygon(",r[1],l,")"]):void 0},["shape-outside"])})(k);(function(e,m){function a(r,v){v.concat([r]).forEach(function(y){y in document.documentElement.style&&
(g[r]=y);l[y]=r})}var g={},l={};a("transform",["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);e.propertyName=function(r){return g[r]||r};e.unprefixedPropertyName=function(r){return l[r]||r}})(k)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};
var b=function(m,a,g){(this||yc).target=m;(this||yc).currentTime=a;(this||yc).timelineTime=g;(this||yc).type="cancel";(this||yc).bubbles=!1;(this||yc).cancelable=!1;(this||yc).currentTarget=m;(this||yc).defaultPrevented=!1;(this||yc).eventPhase=Event.AT_TARGET;(this||yc).timeStamp=Date.now()},e=window.Element.prototype.animate;window.Element.prototype.animate=function(m,a){m=e.call(this||yc,m,a);m._cancelHandlers=[];m.oncancel=null;var g=m.cancel;m.cancel=function(){g.call(this||yc);var v=new b(this||
yc,null,n()),y=(this||yc)._cancelHandlers.concat((this||yc).oncancel?[(this||yc).oncancel]:[]);setTimeout(function(){y.forEach(function(A){A.call(v.target,v)})},0)};var l=m.addEventListener;m.addEventListener=function(v,y){"function"==typeof y&&"cancel"==v?(this||yc)._cancelHandlers.push(y):l.call(this||yc,v,y)};var r=m.removeEventListener;return m.removeEventListener=function(v,y){"cancel"==v?(v=(this||yc)._cancelHandlers.indexOf(y),0<=v&&(this||yc)._cancelHandlers.splice(v,1)):r.call(this||yc,v,
y)},m}}})();(function(n){var b=document.documentElement,e=null,m=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";e=b.animate({opacity:[a,a]},{duration:1});e.currentTime=0;m=getComputedStyle(b).getPropertyValue("opacity")==a}catch(l){}finally{e&&e.cancel()}if(!m){var g=window.Element.prototype.animate;window.Element.prototype.animate=function(l,r){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||null===l||
(l=n.convertToArrayForm(l)),g.call(this||yc,l,r)}}})(f)}();var Tf=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Tf.convertToSvgEasing=function(f){for(var k in Tf.easings)if(Tf.easings[k]===f){if(k.includes("inOut"))return k.replace("inOut","").toLowerCase()+"InOut";if(k.includes("out"))return k.replace("out","").toLowerCase()+"Out";if(k.includes("in"))return k.replace("in","").toLowerCase()+"In"}};Tf.stringToEasing=Su;Tf.obj=Ag;Tf.promise=ph;Tf.fun=Jn;Tf.num=Km;Tf.properties=
xp;Tf.arr=eg;Tf.string=ti;Tf.Color=Hg;Tf.styleProps=jr;Tf.addPathAttributes=bA;Tf.addSvgAttributes=aA;Tf.flubber=PT;Tf.Bezier=Jka;Tf.ShadowObject=Os;var xr=Ba("aw",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",
inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",
inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Tf.easings=xr;Tf.easings=xr;Tf.easings=xr;Tf.stringToEasing=Su;Tf.stringToEasing=
Su;var nM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=k.hasOwnProperty("AnimationQueue")&&"function"===typeof k.AnimationQueue?k.AnimationQueue:k.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?
Tf.obj.merge(this.animations.map(function(e){return e.getAnimationProps(b)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var e=this,m=new Tf.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:m},function(){var a=m.affectsMorph&&e.animations.find(function(l){return l.equals(m)});if(!a){var g;if(g=e.animations.find(function(l){return l.canMerge(m)}))return g.mergeWith(m),g;if(m.affectsMorph)return m.assignProps(),
e.animations.push(m),m}return a})}},{key:"startAnimationsFor",value:function(b){for(var e=0;e<this.animations.length;e++)this.animations[e].start(b)}},{key:"startSvgAnimationsFor",value:function(b,e){this.animations.forEach(function(m){return m.startSvg(b,e)})}},{key:"removeAnimation",value:function(b){Tf.arr.remove(this.animations,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Tf.AnimationQueue=nM;Tf.AnimationQueue=nM;Tf.AnimationQueue=nM;var bU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=k.hasOwnProperty("PropertyAnimation")&&"function"===typeof k.PropertyAnimation?k.PropertyAnimation:k.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){var a=this;this.queue=b;this.morph=e;if(e.isPath&&"fill"in m){var g=e.fill||Tf.Color.transparent,l=m.fill;m.customTween=Tf.fun.compose(function(E){e.fill=g.interpolate(E,l);return E},m.customTween||function(E){});delete m.fill;e.fill=g}if("dropShadow"in m){var r=e.dropShadow||new Tf.ShadowObject({blur:0,distance:0,spread:0}),v=m.dropShadow;m.customTween=
Tf.fun.compose(function(E){e.dropShadow=r.interpolate(E,v||new Tf.ShadowObject({blur:0,distance:0,spread:0}));1==E&&(e.dropShadow=v);return E},m.customTween||function(E){});delete m.dropShadow;e.dropShadow=r}if("visible"in m){var y=void 0===b.originalOpacity?e.opacity:b.originalOpacity;b.originalOpacity=y;var A=m.visible;m.customTween=Tf.fun.compose(function(E){if(a._otherVisibleTransformationInProgress)return E;0==E&&1==A&&(e.visible=!0);e.opacity=A?Tf.num.interpolate(E,0,y):Tf.num.interpolate(E,
y,0);1==E&&(e.visible=A,e.opacity=y,delete b.originalOpacity);return E},m.customTween||function(E){});this.queue.animations.forEach(function(E){return E._otherVisibleTransformationInProgress=!0});delete m.visible}this.config=this.convertBounds(m);this.needsAnimation={svg:e.isSvgMorph,path:e.isPath};this.capturedProperties=Tf.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;return this._promise||
(this._promise=new Promise(function(e,m){b.resolveCallback=function(){b.onFinish(b);b.subAnimations?b.subAnimations.then(e):e(b.morph)}}))}},{key:"finish",value:function(b){var e=this;this.config.scale&&this.morph.whenRendered().then(function(){return e.morph.withAllSubmorphsDo(function(m){return m.isText&&m.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;Tf.arr.any(Tf.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():
this.onFinish())}},{key:"convertBounds",value:function(b){var e=b.bounds,m=b.origin,a=b.rotation,g=b.scale;m=m||this.morph.origin;a=a||this.morph.rotation;g=g||this.morph.scale;return e?Object.assign({},Tf.obj.dissoc(b,["bounds"]),{origin:m,rotation:a,scale:g,position:e.topLeft().addPt(m),extent:e.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&Tf.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==
b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var e=this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(m){e&&e(m);b.config.customTween&&b.config.customTween(m);return m};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||Tf.properties.any(this.animatedProps,function(e,m){return!Tf.obj.equals(e[m],b.morph[m])})}},{key:"animatedProps",
get:function(){return Tf.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Tf.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,e){var m=[],a;for(a in b)Tf.obj.equals(e[a],b[a])&&m.push(a);return[Tf.obj.dissoc(b,
m),Tf.obj.dissoc(e,m)]}},{key:"getAnimationProps",value:function(b){var e=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),m=e.next().value;e=e.next().value;var a=this.capturedProperties.fill,g=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=g=!1,delete m.background,delete e.background,delete m.backgroundImage,delete e.backgroundImage);"none"==m.filter&&e.boxShadow&&(delete m.filter,m.boxShadow="none");"none"==e.filter&&m.boxShadow&&(delete e.filter,e.boxShadow=
"none");a&&g&&(a.isGradient||g.isGradient)&&(this.tweenGradient=this.interpolate("gradient",a,g));b=$jscomp.makeIterator(Tf.arr.union(Tf.obj.keys(m),Tf.obj.keys(e)));for(a=b.next();!a.done;a=b.next())a=a.value,a in m||(m[a]=e[a]),a in e||(e[a]=m[a]);return[Tf.obj.isEmpty(m)?!1:m,Tf.obj.isEmpty(e)?!1:e]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,e=b.isSvgMorph,m=b.isPath,a=b.isPolygon,g={};g.css=Tf.styleProps(this.morph);e&&(g.svg=Tf.addSvgAttributes(b,{}));m&&(g.path=Tf.addPathAttributes(b,
{}));a&&(g.polygon=Tf.addPathAttributes(b,{}));return g}},{key:"assignProps",value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Tf.arr.withoutAll(b,this.morph.styleClasses),added:Tf.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,e,m){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(g){return Tf.num.interpolate(g,
e,m)};case "d":return Tf.flubber.interpolate(e,m);case "stroke-width":return function(g){return Tf.num.interpolate(g,e,m)};case "stroke":return function(g){return Tf.Color.fromString(e).interpolate(g,Tf.Color.fromString(m),a.morph.bounds())};case "gradient":return function(g){return e.interpolate(g,m,a.morph.bounds())};case "fill":return e=Tf.Color.fromString(e),m=Tf.Color.fromString(m),function(g){return e.interpolate(g,m)}}}},{key:"startSvg",value:function(b,e){var m=this;if(this.needsAnimation[e]){this.needsAnimation[e]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(e)),g=a.next().value;a=a.next().value;var l={},r=Tf.stringToEasing(this.easing),v;for(v in g)l[v]=this.interpolate(v,g[v],a[v]);var y,A=function(E){y||(y=E);E-=y;if(1<E/m.duration)return m.finish(e);for(var F in l)l[F]&&b.setAttribute(F,l[F](r(E/m.duration)));requestAnimationFrame(A)};requestAnimationFrame(A)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var e=$jscomp.makeIterator(this.getAnimationProps("css")),m=e.next().value,
a=e.next().value;b&&this.tween(b,m,a);if(this.config.origin){var g=this.capturedProperties.origin,l=this.config.origin,r=b.childNodes[0];r&&this.tween(r,r.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+g.x+"px, "+g.y+"px, 0px)"},r.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(v){this.active=!1}}},{key:"tween",value:function(b,e,m,a){var g=this;a=void 0===a?!0:a;var l=this.animatedProps.scroll,r=this.config.customTween,v=!1,y=
function(){a&&(g.finish("css"),g.morph.makeDirty())};if(r){var A,E=Tf.stringToEasing(this.easing),F=function(fa){A||(A=fa);var oa=Math.min(1,(fa-A)/g.duration);g.morph.dontRecordChangesWhile(function(){return r(E(oa))});if(1<=oa)return g.finish("css");requestAnimationFrame(F)};requestAnimationFrame(F);v=!0}if(l){var H,I=this.morph.env.eventDispatcher.eventState;v=Tf.promise.deferred();var M=v.promise,N=v.resolve,X=this.interpolate("scrollLeft",b.scrollLeft,l.x),W=this.interpolate("scrollTop",b.scrollTop,
l.y),ea=Tf.stringToEasing(this.easing),Aa=function(fa){H||(H=fa);fa-=H;var oa=Math.min(1,fa/g.duration);b.scrollTop=W(ea(oa));b.scrollLeft=X(ea(oa));if(1<=fa/g.duration)return I.scroll.interactiveScrollInProgress=null,N(),g.finish("css");requestAnimationFrame(Aa)};M.debounce=function(){};requestAnimationFrame(Aa);v=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Ka,K=Tf.stringToEasing(this.easing),aa=function(fa){Ka||(Ka=fa);fa-=Ka;if(1<=fa/g.duration)return g.finish("css");b.style.setProperty("background-image",
g.tweenGradient(K(fa/g.duration)));requestAnimationFrame(aa)};delete e.backgroundImage;delete m.backgroundImage;delete e.background;delete m.background;requestAnimationFrame(aa);v=!0}else this.tweenGradient&&(v=!0);if(b&&e&&m){l={};M={};for(var T in e)l[Tf.string.camelize(T)]=e[T];for(var U in m)M[Tf.string.camelize(U)]=m[U];try{var pa=b.animate([l,M],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});pa.onfinish=function(){y();setTimeout(function(){return pa.cancel()},
200)};v=!0}catch(fa){v=!1}}v||y()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17134})}(void 0);Tf.PropertyAnimation=bU;Tf.PropertyAnimation=bU;Tf.PropertyAnimation=bU;var Bh=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");Bh.cumulativeOffset=ls;Bh.createIFrame=function(f,k,n){k=void 0===k?"about:blank":k;n=void 0===n?new Bh.Rectangle(0,0,700,700):n;return new Promise(function(b,e){if(!f)throw Error("Need parent element!");var m=document.createElement("iframe");m.style.position="absolute";m.style.top=n.top()+"px";m.style.left=n.left()+"px";m.style.width=n.width+"px";m.style.height=n.height+"px";m.src=k;var a=!1;m.onload=function(g){a=!0;m.onload=
null;b(m)};Bh.promise.waitFor(1E3,function(){return!!a}).catch(function(g){return e(Error("iframe load timeout"))});f.appendChild(m)})};Bh.requestAnimationFramePolyfill=function(f){for(var k=0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!f.requestAnimationFrame;++b)f.requestAnimationFrame=f[n[b]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[n[b]+"CancelAnimationFrame"]||f[n[b]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(e,m){var a=Date.now(),g=Math.max(0,
16-(a-k));m=f.setTimeout(function(){e(a+g)},g);k=a+g;return m});f.cancelAnimationFrame||(f.cancelAnimationFrame=function(e){clearTimeout(e)})};Bh.createDOMEnvironment_browser=function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(f=Bh.IFramedDomEnvironment,k.yield(Bh.createIFrame(document.body),2)):k.return(new f(k.yieldResult))})};Bh.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var f=System._nodeRequire("jsdom"),
k=f.createVirtualConsole().sendTo(console);return new Promise(function(n,b){f.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:k},function(e,m){return e?b(e):n(new Bh.DomEnvironment(m,m.document,function(){return m.close()}))})})};Bh.createDOMEnvironment=Li;Bh.defaultDOMEnv=bk;Bh.setCSSDef=function(f,k,n){Bh.arr.from(f.childNodes).forEach(function(b){return f.removeChild(b)});k=n.createTextNode(k);f.styleSheet?f.styleSheet.cssText=k.nodeValue:f.appendChild(k);return f};
Bh.addCSSDef=function(f,k,n){var b=n.createElement("style");b.type="text/css";f&&b.setAttribute("id",f);Bh.setCSSDef(b,k,n);n.head.appendChild(b);return b};Bh.addOrChangeCSSDeclaration=ms;Bh.addOrChangeLinkedCSS=tw;Bh.promise=ph;Bh.obj=Ag;Bh.arr=eg;Bh.Rectangle=Le;Bh.cumulativeOffset=ls;Bh.cumulativeOffset=ls;Bh.createDOMEnvironment=Li;Bh.createDOMEnvironment=Li;(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("DomEnvironment")&&"function"===
typeof k.DomEnvironment?k.DomEnvironment:k.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){Bh.requestAnimationFramePolyfill(b);this.window=b;this.document=e;this.destroyFn=m}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof k.IFramedDomEnvironment?k.IFramedDomEnvironment:
k.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){cc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(Bh.DomEnvironment);Bh._defaultEnv=Bh._defaultEnv||void 0;Bh.defaultDOMEnv=bk;Bh.defaultDOMEnv=bk;Bh.addOrChangeCSSDeclaration=ms;Bh.addOrChangeCSSDeclaration=
ms;Bh.addOrChangeLinkedCSS=tw;Bh.addOrChangeLinkedCSS=tw;var oM=function(){return function(f){f=void 0===f?window.document:f;return function(k,n,b){var e=n||void 0;"undefined"===typeof b&&(b=n,e=void 0);var m=k.split(".");if(1<m.length)for(k=m.shift(),n=0;n<m.length;n++){var a=m[n],g;-1<(g=a.indexOf("#"))&&(a.slice(g+1),a.slice(0,g))}n=k.split("#");1<n.length&&(k=n[0]);k=f.createElement(k);if(e){for(var l in e)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(k[l]=e[l]);if(l=e.style)for(var r in l)k.style[r]=
l[r];if(r=e.dataset)if(k.dataset)for(var v in r)k.dataset[v]=r[v];else for(v in r)k.setAttribute("data-"+v,r[v]);if(e=e.attributes)for(var y in e)e[y]&&Bh.obj.isBoolean(e[y])?k.toggleAttribute(y):k.setAttribute(y,e[y])}b||(b="");if("string"===typeof b)k.appendChild(f.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)y=b[n],k.appendChild("string"===typeof y?f.createTextNode(y):y);else k.appendChild("string"===typeof b?f.createTextNode(b):b);return k}}}();Bh.hyperscriptFnForDocument=
oM;Bh.hyperscriptFnForDocument=oM;Bh.hyperscriptFnForDocument=oM;var Xf=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Xf.applyExclude=uw;Xf.parseQuery=vj;Xf.stringifyQuery=Ue;Xf.withRelativePartsResolved=dA;Xf._relativePathBetween_checkPathes=function(f,k){f.startsWith("/")&&(f=f.slice(1));k.startsWith("/")&&(k=k.slice(1));f=f.split("/");k=k.split("/");for(var n=0;n<k.length&&f[n]&&f[n]==k[n];n++);return"../".repeat(Math.max(0,k.length-n-1))+f.splice(n,f.length).join("/")};
Xf.relativePathBetween=je;Xf.join=Sx;Xf.parent=eA;Xf.parents=Zc;Xf.resource=Tj;Xf.createFiles=ka;Xf.registerExtension=q;Xf.unregisterExtension=w;Xf.applyExclude=uw;Xf.applyExclude=uw;Xf.parseQuery=vj;Xf.parseQuery=vj;Xf.stringifyQuery=Ue;Xf.stringifyQuery=Ue;Xf.slashEndRe=/\/+$/;Xf.slashStartRe=/^\/+/;Xf.protocolRe=/^[a-z0-9-_\.]+:/;Xf.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Xf.slashslashRe=/^\/\/[^\/]+/;Xf.pathDotRe=/\/\.\//g;Xf.pathDoubleDotRe=/\/[^\/]+\/\.\./;Xf.pathDoubleSlashRe=/(^|[^:])[\/]+/g;
Xf.withRelativePartsResolved=dA;Xf.withRelativePartsResolved=dA;Xf.relativePathBetween=je;Xf.relativePathBetween=je;Xf.join=Sx;Xf.join=Sx;Xf.parent=eA;Xf.parent=eA;Xf.parents=Zc;Xf.parents=Zc;var iB=[];Xf.extensions=iB;Xf.extensions=iB;Xf.extensions=iB;Xf.resource=Tj;Xf.resource=Tj;Xf.createFiles=ka;Xf.createFiles=ka;Xf.registerExtension=q;Xf.registerExtension=q;Xf.unregisterExtension=w;Xf.unregisterExtension=w;var pM=/^file:\/\/\/[a-z]:\//i;Xf.windowsURLPrefixRe=pM;Xf.windowsURLPrefixRe=pM;Xf.windowsURLPrefixRe=
pM;var qM=/^[a-z]:\//i;Xf.windowsPathPrefixRe=qM;Xf.windowsPathPrefixRe=qM;Xf.windowsPathPrefixRe=qM;var rM=/^[a-z]:\/$/i;Xf.windowsRootPathRe=rM;Xf.windowsRootPathRe=rM;Xf.windowsRootPathRe=rM;var Oj=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");Oj.nyi=function(f,k){throw Error(k+" for "+f.constructor.name+" not yet implemented");};Oj.resource=Tj;Oj.parseQuery=vj;Oj.withRelativePartsResolved=dA;Oj.relativePathBetween=je;Oj.windowsPathPrefixRe=qM;Oj.stringifyQuery=Ue;Oj.slashEndRe=
/\/+$/;Oj.slashStartRe=/^\/+/;Oj.protocolRe=/^[a-z0-9-_\.]+:/;Oj.slashslashRe=/^\/\/[^\/]+/;var Ug=function(f,k){if(!f)throw Error("Cannot create resource without url");this.url=String(f);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};Ug.fromProps=function(f){f=void 0===f?{}:f;return(new this(f.url)).assignProperties(f)};Ug.prototype.equals=function(f){if(!f||this.constructor!==
f.constructor)return!1;var k=this.url;f=f.url;"/"===k[k.length-1]&&(k=k.slice(0,-1));"/"===f[f.length-1]&&(f=f.slice(0,-1));return k===f};Ug.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};Ug.prototype.newResource=function(f){return Oj.resource(f,this)};Ug.prototype.path=function(){var f=this.url.replace(Oj.protocolRe,"").replace(Oj.slashslashRe,"");return""===f?"/":f};Ug.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Ug.prototype.name=function(){var f=
this.path(),k=f.lastIndexOf("?");-1<k&&(f=f.slice(0,k));f.endsWith("/")&&(f=f.slice(0,-1));f=f.split("/");return decodeURIComponent(f[f.length-1])};Ug.prototype.ext=function(){var f=this.url;if(f.endsWith("/"))return"";f=$jscomp.makeIterator(f.match(/\.([^\/\.]+$)/)||["",""]);f.next();return f.next().value.toLowerCase()};Ug.prototype.nameWithoutExt=function(){var f=this.name(),k=f.lastIndexOf(".");0<k&&(f=f.slice(0,k));return f};Ug.prototype.scheme=function(){return this.url.split(":")[0]};Ug.prototype.host=
function(){var f=this.url.indexOf("://");if(-1===f)return null;f=this.url.slice(f+3);var k=f.indexOf("/");return f.slice(0,-1<k?k:f.length)};Ug.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};Ug.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(Oj.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};Ug.prototype.parents=function(){for(var f=[],k=this.parent();k;)f.unshift(k),
k=k.parent();return f};Ug.prototype.isParentOf=function(f){var k=this;return f.schemeAndHost()===this.schemeAndHost()&&f.parents().some(function(n){return n.equals(k)})};Ug.prototype.query=function(){return Oj.parseQuery(this.url)};Ug.prototype.withQuery=function(f){var k=Object.assign({},this.query(),{},f);f=$jscomp.makeIterator(this.url.split("?")).next().value;k=Oj.stringifyQuery(k);return this.newResource(f+"?"+k)};Ug.prototype.commonDirectory=function(f){if(f.schemeAndHost()!==this.schemeAndHost())return null;
if(this.isDirectory()&&this.equals(f))return this;if(this.isRoot())return this.asDirectory();if(f.isRoot())return f.asDirectory();f=f.parents();for(var k=this.parents(),n=this.root(),b=0;b<k.length;b++){var e=k[b],m=f[b];if(!m||!e.equals(m))break;n=e}return n};Ug.prototype.withRelativePartsResolved=function(){var f=this.path(),k=Oj.withRelativePartsResolved(f);if(k===f)return this;k.startsWith("/")&&(k=k.slice(1));k[1]===":".startsWith("/")?k=k.slice(1):":"===k[1]&&k.match(Oj.windowsPathPrefixRe)&&
(k=k.slice(3));return this.newResource(this.root().url+k)};Ug.prototype.relativePathFrom=function(f){return Oj.relativePathBetween(f.url,this.url)};Ug.prototype.withPath=function(f){return(this.isRoot()?this:this.root()).join(f)};Ug.prototype.join=function(f){return this.newResource(this.url.replace(Oj.slashEndRe,"")+"/"+f.replace(Oj.slashStartRe,""))};Ug.prototype.isRoot=function(){return"/"===this.path()};Ug.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(Oj.slashEndRe)};Ug.prototype.isDirectory=
function(){return!this.isFile()};Ug.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(Oj.slashEndRe,"")+"/")};Ug.prototype.root=function(){if(this.isRoot())return this;var f=this.url.slice(0,-this.path().length);return this.newResource(f+"/")};Ug.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(Oj.slashEndRe,"")):this};Ug.prototype.assignProperties=function(f){for(var k in f)if("url"!==k){var n=k;if("isLink"===
k||"isDirectory"===k)n="_"+k;this[n]=f[k]}return this};Ug.prototype.ensureExistance=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(k.exists(),2);case 2:return n.yieldResult?n.return(k):n.yield(k.parent().ensureExistance(),3);case 3:return k.isFile()?n.yield(k.write(f||""),5):n.yield(k.mkdir(),5);case 5:return n.return(k)}})};Ug.prototype.copyTo=function(f,k){k=void 0===k?!0:k;var n=this,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(n.isFile()){m=
f.isFile()?f:f.join(n.name());if(!k){l.jumpTo(8);break}return l.yield(m.parent().ensureExistance(),8)}if(!f.isDirectory())throw Error("Cannot copy a directory to a file!");return l.yield(n.dirList("infinity"),4);case 4:return b=l.yieldResult,e=b.map(function(r){return f.join(r.relativePathFrom(n))}),l.yield(f.ensureExistance(),5);case 5:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isDirectory()&&e[y].ensureExistance()).then(r)}},function(){return Promise.resolve()})(),
6);case 6:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isFile()&&v.copyTo(e[y],!1)).then(r)}},function(){return Promise.resolve()})(),3);case 8:return a=m,g=a.write,l.yield(n.read(),11);case 11:return l.yield(g.call(a,l.yieldResult),3);case 3:return l.return(n)}})};Ug.prototype.rename=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(k.copyTo(f),2);k.remove();return n.return(f)})};Ug.prototype.beBinary=
function(f){return this.setBinary(!0)};Ug.prototype.setBinary=function(f){this.binary=f;return this};Ug.prototype.read=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Oj.nyi(f,"read");k.jumpToEnd()})};Ug.prototype.write=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Oj.nyi(f,"write");k.jumpToEnd()})};Ug.prototype.mkdir=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Oj.nyi(f,"mkdir");k.jumpToEnd()})};
Ug.prototype.exists=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Oj.nyi(f,"exists");k.jumpToEnd()})};Ug.prototype.remove=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Oj.nyi(f,"remove");k.jumpToEnd()})};Ug.prototype.dirList=function(f,k){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){Oj.nyi(n,"dirList");b.jumpToEnd()})};Ug.prototype.readProperties=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){Oj.nyi(k,
"readProperties");n.jumpToEnd()})};Ug.prototype.writeJson=function(f,k){return this.write((void 0===k?0:k)?JSON.stringify(f,null,2):JSON.stringify(f))};Ug.prototype.readJson=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(n=JSON,b=n.parse,e.yield(k.read(),2)):e.return(b.call(n,e.yieldResult))})};Ug.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};
$jscomp.global.Object.defineProperties(Ug.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});Ba("bG",Ug);Oj.Resource=Ug;Oj.default=Ug;var lh=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");lh.davNs=function(f){return(f=f.match(/\/([a-z]+?):multistatus/i))?f[1]:"d"};lh.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};
lh.readPropertyNode=function(f,k){k=void 0===k?{}:k;var n=f.tagName.replace(/[^:]+:/,"");n=lh.propertyNodeMap[n];f=f.textContent;switch(n){case "lastModified":case "created":f=new Date(f);break;case "size":f=Number(f)}k[n]=f;return k};lh.readXMLPropfindResult=function(f){var k=(new DOMParser).parseFromString(f,"text/xml");f=lh.davNs(f);k=(new lh.XPathQuery("/"+f+":multistatus/"+f+":response")).findAll(k.documentElement);var n=new lh.XPathQuery(f+":href"),b=new lh.XPathQuery(f+":propstat/"+f+":prop");
return k.map(function(e){var m=b.findFirst(e);m=Array.from(m.childNodes).reduce(function(a,g){return lh.readPropertyNode(g,a)},{});e=n.findFirst(e);m.url=e.textContent||e.text;return m})};lh.defaultOrigin=function(){return document.location.origin};lh.makeRequest=function(f,k,n,b,e){b=void 0===b?{}:b;e=f.url;var m=f.useCors,a=f.useProxy,g=f.headers;m="undefined"!==typeof m?m:!0;k={method:void 0===k?"GET":k};if("undefined"!==typeof a?a:1)Object.assign(b,{pragma:"no-cache","cache-control":"no-cache",
"x-lively-proxy-request":e}),e=f.proxyDomain||lh.defaultOrigin();m&&(k.mode="cors");n&&(k.body=n);k.redirect="follow";k.headers=Object.assign({},b,{},g);return fetch(e,k)};lh.upload=B;lh.Resource=Ug;lh.applyExclude=uw;lh.promise=ph;lh.num=Km;var ZG=function(f){this.expression=f;this.contextNode=null;this.xpe=new XPathEvaluator};ZG.prototype.establishContext=function(f){this.nsResolver||(f=f.ownerDocument?f.ownerDocument.documentElement:f.documentElement,f!==this.contextNode&&(this.contextNode=f,this.nsResolver=
this.xpe.createNSResolver(f)))};ZG.prototype.manualNSLookup=function(){this.nsResolver=function(f){return Namespace[f.toUpperCase()]||null};return this};ZG.prototype.findAll=function(f,k){this.establishContext(f);f=this.xpe.evaluate(this.expression,f,this.nsResolver,XPathResult.ANY_TYPE,null);for(var n=[],b;b=f.iterateNext();)n.push(b);return 0<n.length||void 0===k?n:k};ZG.prototype.findFirst=function(f){this.establishContext(f);return this.xpe.evaluate(this.expression,f,this.nsResolver,XPathResult.ANY_TYPE,
null).iterateNext()};lh.XPathQuery=ZG;lh.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};lh.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
lh.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;lh.upload=B;lh.upload=B;var Zm=function(f,k){k=void 0===k?{}:k;f=lh.Resource.call(this,f,k)||this;f.onLoad=k.onLoad||function(){};f.onProgress=k.onProgress||function(){};f.useProxy=k.hasOwnProperty("useProxy")?k.useProxy:!1;f.proxyDomain=k.proxyDomain||void 0;f.useCors=k.hasOwnProperty("useCors")?k.useCors:!1;f.headers=k.headers||{};f.binary=f.isFile()?lh.binaryExtensions.includes(f.ext()):
!1;f.errorOnHTTPStatusCodes=k.hasOwnProperty("errorOnHTTPStatusCodes")?k.errorOnHTTPStatusCodes:!0;return f};$jscomp.inherits(Zm,lh.Resource);Zm.prototype.join=function(f){return Object.assign(lh.Resource.prototype.join.call(this,f),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Zm.prototype.makeProxied=function(f){void 0!==f&&(this.proxyDomain=f);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Zm.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Zm.prototype.read=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lh.makeRequest(f),2);k=n.yieldResult;if(!k.ok&&f.errorOnHTTPStatusCodes)throw Error("Cannot read "+f.url+": "+k.statusText+" "+k.status);if(!f.binary)return n.return(k.text());if("blob"===f.binary)return n.return(k.blob());if("function"===
typeof k.arrayBuffer)return n.return(k.arrayBuffer());if("function"===typeof k.buffer)return n.return(k.buffer());throw Error("Don't now how to read binary resource "+f+"'");})};Zm.prototype.write=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!k.isFile())throw Error("Cannot write a non-file: "+k.url);return b.yield(lh.upload(k,f),2)}n=b.yieldResult;if(!lh.num.between(n.status,200,300)&&k.errorOnHTTPStatusCodes)throw Error("Cannot write "+
k.url+": "+n.statusText+" "+n.status);return b.return(k)})};Zm.prototype.mkdir=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(f.isFile())throw Error("Cannot mkdir on a file: "+f.url);return n.yield(lh.makeRequest(f,"MKCOL"),2)}k=n.yieldResult;if(!k.ok&&f.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+f.url+": "+k.statusText+" "+k.status);return n.return(f)})};Zm.prototype.exists=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return f.isRoot()?(k=!0,n.jumpTo(2)):n.yield(lh.makeRequest(f,"HEAD"),3);2!=n.nextAddress&&(k=!!n.yieldResult.ok);return n.return(k)})};Zm.prototype.remove=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(lh.makeRequest(f,"DELETE"),2):k.return(f)})};Zm.prototype._propfind=function(){var f=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(lh.makeRequest(f,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=e.nextAddress){k=e.yieldResult;if(!k.ok&&f.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+f.url+": "+k.statusText);return e.yield(k.text(),3)}n=e.yieldResult;b=f.root();return e.return(lh.readXMLPropfindResult(n).map(function(m){return b.join(m.url).assignProperties(m)}))})};Zm.prototype.dirList=function(f,k){f=void 0===f?1:f;k=void 0===k?{}:k;var n=this,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if("number"!==
typeof f&&"infinity"!==f)throw Error("dirList \u2013 invalid depth argument: "+f);b=k;e=b.exclude;0>=f&&(f=1);return 1===f?l.yield(n._propfind(),5):l.yield(n.dirList(1,k),4)}if(5!=l.nextAddress)return m=l.yieldResult,a=m.filter(function(r){return r.isDirectory()}),l.return(Promise.all(a.map(function(r){return r.dirList("number"===typeof f?f-1:f,k)})).then(function(r){return r.reduce(function(v,y){return v.concat(y)},m)}));g=l.yieldResult;g.shift();e&&(g=lh.applyExclude(e,g));return l.return(g)})};
Zm.prototype.readProperties=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k._propfind(),2);n=b.yieldResult[0];return b.return(k.assignProperties(n))})};Zm.prototype.post=function(f){f=void 0===f?null:f;var k=this,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return"string"!==typeof f&&(f=JSON.stringify(f)),m.yield(lh.makeRequest(k,"POST",f,{}),2);case 2:return n=m.yieldResult,
m.setCatchFinallyBlocks(3),m.yield(n.text(),5);case 5:b=m.yieldResult;m.leaveTryBlock(4);break;case 3:m.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{e=JSON.parse(b)}catch(a){}if(!n.ok&&k.errorOnHTTPStatusCodes)throw Error("Error in POST "+k.url+": "+(b||n.statusText));return m.return(e||b)}})};Zm.prototype.copyTo=function(f,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(n.isFile()&&(b=f.isFile()?f:f.join(n.name()),
lh.isNode)){if(b.isHTTPResource)return e.return(n._copyTo_file_nodejs_http(b,k));if(b.isNodeJSFileResource)return e.return(n._copyTo_file_nodejs_fs(b,k))}return e.return(lh.Resource.prototype.copyTo.call(n,f,k))})};Zm.prototype._copyFrom_file_nodejs_fs=function(f,k){k=void 0===k?!0:k;var n=this,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return e=f._createReadStream(),e.on("error",
function(g){return b=g}),a.yield(lh.makeRequest(n,"PUT",e),4);m=a.yieldResult;if(b)throw b;if(!m.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+m.statusText+" "+m.status);return a.return(n)})};Zm.prototype._copyTo_file_nodejs_fs=function(f,k){k=void 0===k?!0:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return k?m.yield(f.parent().ensureExistance(),2):m.jumpTo(2);if(4!=m.nextAddress)return m.yield(lh.makeRequest(n,"GET"),4);b=
m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.return(new Promise(function(a,g){return b.body.pipe(f._createWriteStream()).on("error",function(l){return e=l}).on("finish",function(){return e?g(e):a(n)})}))})};Zm.prototype._copyTo_file_nodejs_http=function(f,k){k=void 0===k?!0:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(!k){m.jumpTo(2);break}return m.yield(f.parent().ensureExistance(),
2);case 2:return m.yield(lh.makeRequest(n,"GET"),4);case 4:b=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.yield(lh.makeRequest(f,"PUT",b.body),5);case 5:e=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+e.statusText+" "+e.status);m.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Zm.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});lh.WebDAVResource=
Zm;var sM={name:"http-webdav-resource",matches:function(f){return f.startsWith("http:")||f.startsWith("https:")},resourceClass:lh.WebDAVResource};lh.resourceExtension=sM;lh.resourceExtension=sM;lh.resourceExtension=sM;lh.default=Zm;var Pt=System.get("@system-env").node?require("fs"):{},Kka=Pt.readFile,Lka=Pt.writeFile,Mka=Pt.exists,Nka=Pt.readdir,Oka=Pt.mkdir,Pka=Pt.rmdir,Qka=Pt.unlink,Rka=Pt.lstat,Ska=Pt.rename,Tka=Pt.createWriteStream,Uka=Pt.createReadStream,ng=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
ng.wrapInPromise=function(f){return function(k){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(e,m){return f.apply(null,n.concat(function(a,g){return a?m(a):e(g)}))})}};ng.Resource=Ug;ng.applyExclude=uw;ng.windowsURLPrefixRe=pM;ng.windowsRootPathRe=rM;ng.createWriteStream=Tka;ng.createReadStream=Uka;ng.readFile=Kka;ng.writeFile=Lka;ng.exists=Mka;ng.mkdir=Oka;ng.rmdir=Pka;ng.unlink=Qka;ng.readdir=Nka;ng.lstat=Rka;ng.rename=Ska;ng.readFileP=ng.wrapInPromise(ng.readFile);
ng.writeFileP=ng.wrapInPromise(ng.writeFile);ng.existsP=function(f){return new Promise(function(k,n){return ng.exists(f,function(b){return k(!!b)})})};ng.readdirP=ng.wrapInPromise(ng.readdir);ng.mkdirP=ng.wrapInPromise(ng.mkdir);ng.rmdirP=ng.wrapInPromise(ng.rmdir);ng.unlinkP=ng.wrapInPromise(ng.unlink);ng.lstatP=ng.wrapInPromise(ng.lstat);ng.renameP=ng.wrapInPromise(ng.rename);var io=function(){return ng.Resource.apply(this,arguments)||this};$jscomp.inherits(io,ng.Resource);io.prototype.path=function(){return this.url.replace("file://",
"")};io.prototype.stat=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(ng.lstatP(f.path()))})};io.prototype.read=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){k=ng.readFileP(f.path());return n.return(f.binary?k:k.then(String))})};io.prototype.write=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(k.isDirectory())throw Error("Cannot write into a directory: "+
k.path());return n.yield(ng.writeFileP(k.path(),f),2)}return n.return(k)})};io.prototype.mkdir=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(f.isFile())throw Error("Cannot mkdir on a file: "+f.path());return k.yield(ng.mkdirP(f.path()),2)}return k.return(f)})};io.prototype.exists=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(f.isRoot()?!0:ng.existsP(f.path()))})};io.prototype.dirList=
function(f,k){f=void 0===f?1:f;k=void 0===k?{}:k;var n=this,b,e,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if("number"!==typeof f&&"infinity"!==f)throw Error("dirList \u2013 invalid depth argument: "+f);b=k;e=b.exclude;0>=f&&(f=1);if(1!==f){H.jumpTo(2);break}m=[];a=$jscomp;g=a.makeIterator;return H.yield(ng.readdirP(n.path()),3);case 3:l=g.call(a,H.yieldResult),r=l.next();case 4:if(r.done){H.jumpTo(6);break}v=r.value;y=n.join(v);
return H.yield(y.stat(),7);case 7:A=H.yieldResult;y=A.isDirectory()?y.asDirectory():y;y._assignPropsFromStat(A);m.push(y);r=l.next();H.jumpTo(4);break;case 6:return e&&(m=ng.applyExclude(e,m)),H.return(m);case 2:return H.yield(n.dirList(1,k),8);case 8:return E=H.yieldResult,F=E.filter(function(I){return I.isDirectory()}),H.return(Promise.all(F.map(function(I){return I.dirList("number"===typeof f?f-1:f,k)})).then(function(I){return I.reduce(function(M,N){return M.concat(N)},E)}))}})};io.prototype.isEmptyDirectory=
function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(f.dirList(),2):k.return(0===k.yieldResult.length)})};io.prototype.rename=function(f){var k=this,n,b,e,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if(!(f instanceof k.constructor))return H.return(ng.Resource.prototype.rename.call(k,f));if(k.isFile()){f=f.asFile();ng.renameP(k.path(),f.path());H.jumpTo(2);break}f=f.asDirectory();
return H.yield(f.ensureExistance(),3);case 3:return n=[],b=[],e=$jscomp,m=e.makeIterator,H.yield(k.dirList("infinity"),4);case 4:a=m.call(e,H.yieldResult);for(g=a.next();!g.done;g=a.next())l=g.value,l.isDirectory()?b.push(l):n.push(l);r=$jscomp.makeIterator(b);v=r.next();case 5:if(v.done){H.jumpTo(7);break}y=v.value;return H.yield(f.join(y.relativePathFrom(k)).ensureExistance(),6);case 6:v=r.next();H.jumpTo(5);break;case 7:A=$jscomp.makeIterator(n),E=A.next();case 9:if(E.done)return H.yield(k.remove(),
2);F=E.value;return H.yield(F.rename(f.join(F.relativePathFrom(k))),10);case 10:E=A.next();H.jumpTo(9);break;case 2:return H.return(f)}})};io.prototype.remove=function(){var f=this,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(f.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return f.isDirectory()?(k=$jscomp,n=k.makeIterator,a.yield(f.dirList(),7)):a.yield(ng.unlinkP(f.path()),3);case 7:b=n.call(k,a.yieldResult),e=b.next();
case 8:if(e.done)return a.yield(ng.rmdirP(f.path()),3);m=e.value;return a.yield(m.remove(),9);case 9:e=b.next();a.jumpTo(8);break;case 3:return a.return(f)}})};io.prototype.readProperties=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=f,n=k._assignPropsFromStat,b.yield(f.stat(),2)):b.return(n.call(k,b.yieldResult))})};io.prototype.copyTo=function(f,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return n.isFile()&&
(b=f.isFile()?f:f.join(n.name()),b.isHTTPResource)?e.return(b._copyFrom_file_nodejs_fs(n,k=!0)):e.return(ng.Resource.prototype.copyTo.call(n,f,k))})};io.prototype._assignPropsFromStat=function(f){return this.assignProperties({lastModified:f.mtime,created:f.ctime,size:f.size,type:f.isDirectory()?"directory":"file",isLink:f.isSymbolicLink()})};io.prototype._createWriteStream=function(){return ng.createWriteStream(this.path())};io.prototype._createReadStream=function(){return ng.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(io.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});ng.NodeJSFileResource=io;var $G=function(f,k){"file:///"!==f.slice(0,8)&&"file://"===f.slice(0,7)&&(f="file:///"+f.slice(7));f.includes("\\")&&(f=f.replace(/\\/g,"/"));return ng.NodeJSFileResource.call(this,f,k)||this};$jscomp.inherits($G,ng.NodeJSFileResource);$G.prototype.path=function(){return this.url.replace("file:///","")};$G.prototype.isRoot=function(){return!!this.path().match(ng.windowsRootPathRe)};
$G.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var f=this.url.match(ng.windowsURLPrefixRe);if(f)return this.newResource(f[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};ng.NodeJSWindowsFileResource=$G;var tM={name:"nodejs-file-resource",matches:function(f){return f.startsWith("file:")},resourceClass:"undefined"!=typeof process&&"win32"===process.platform?ng.NodeJSWindowsFileResource:ng.NodeJSFileResource};ng.resourceExtension=
tM;ng.resourceExtension=tM;ng.resourceExtension=tM;var yl=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");yl.applyExclude=function(f,k){return k?"string"===typeof k?!f.url.includes(k):"function"===typeof k?!k(f):k instanceof RegExp?!k.test(f.url):!0:!0};yl.Resource=Ug;yl.createFiles=ka;yl.debug=!1;yl.slashRe=/\//g;var Ps=function(f,k){k=void 0===k?{}:k;if(!f||"string"!==typeof f)throw Error("LocalResourceInMemoryBackend needs name!");this.name=f;this._filespec=k};Ps.removeHost=
function(f){delete this.hosts[f]};Ps.ensure=function(f,k){var n=this;k=void 0===k?{}:k;var b=this.named(k.host);return Promise.resolve().then(function(){return f?yl.createFiles("local://"+b.name,f):null}).then(function(){return n})};Ps.named=function(f){f||(f="default");return this.hosts[f]||(this.hosts[f]=new this(f))};Ps.prototype.get=function(f){return this._filespec[f]};Ps.prototype.set=function(f,k){this._filespec[f]=k};Ps.prototype.write=function(f,k){var n=this._filespec[f];n||(n=this._filespec[f]=
{created:new Date});n.content=k;n.isDirectory=!1;n.lastModified=new Date};Ps.prototype.read=function(f){return(f=this._filespec[f])&&f.content?f.content:""};Ps.prototype.mkdir=function(f){var k=this._filespec[f];k&&k.isDirectory||(k||(k=this._filespec[f]={created:new Date}),k.content&&delete k.content,k.isDirectory=!0,k.lastModified=new Date)};Ps.prototype.partialFilespec=function(f,k){f=void 0===f?"/":f;k=void 0===k?Infinity:k;for(var n={},b=this.filespec,e=Object.keys(b),m=0;m<e.length;m++){var a=
e[m];if(a.startsWith(f)&&f!==a){var g=a.slice(f.length);(g.includes("/")?g.match(yl.slashRe).length+1:1)>k||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(Ps.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(f){this._filespec=f}}});$jscomp.global.Object.defineProperties(Ps,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});yl.LocalResourceInMemoryBackend=Ps;var Qt=function(){return yl.Resource.apply(this,
arguments)||this};$jscomp.inherits(Qt,yl.Resource);Qt.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};Qt.prototype.write=function(f){yl.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var k=this.localBackend.get(this.path());if(k&&k.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),f);return Promise.resolve(this)};
Qt.prototype.mkdir=function(){yl.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var f=this.localBackend.get(this.path());if(f&&f.isDirectory)return Promise.resolve(this);if(f&&!f.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};Qt.prototype.exists=function(){yl.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};Qt.prototype.remove=function(){var f=this;yl.debug&&console.log("["+this+"] remove");var k=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(k)&&delete f.localBackend.filespec[n]});return Promise.resolve(this)};Qt.prototype.readProperties=function(){yl.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};Qt.prototype.dirList=function(f,k){f=void 0===f?1:f;k=void 0===k?{}:k;yl.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(f,k);k=k.exclude;var n=this.path(),b=[],e=Object.keys(this.localBackend.filespec);"infinity"===f&&(f=Infinity);for(var m={},a=0;a<e.length;m={$jscomp$loop$prop$dirToChild$2372:m.$jscomp$loop$prop$dirToChild$2372},a++){var g=e[a];g.startsWith(n)&&n!==g&&(g=g.slice(n.length),(g.includes("/")?g.match(yl.slashRe).length+1:1)>f?(m.$jscomp$loop$prop$dirToChild$2372=this.join(g.split("/").slice(0,f).join("/")+"/"),
b.some(function(l){return function(r){return r.equals(l.$jscomp$loop$prop$dirToChild$2372)}}(m))||b.push(m.$jscomp$loop$prop$dirToChild$2372)):(g=this.join(g),k&&!yl.applyExclude(g,k)||b.push(g)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(Qt.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return yl.LocalResourceInMemoryBackend.named(this.host())}}});yl.LocalResource=Qt;var uM={name:"local-resource",matches:function(f){return f.startsWith("local:")},resourceClass:yl.LocalResource};
yl.resourceExtension=uM;yl.resourceExtension=uM;yl.resourceExtension=uM;yl.default=Qt;var fi=lively.FreezerRuntime.recorderFor("lively.resources/index.js");fi.createFileSpec=D;fi.importModuleViaNative=J;fi.loadViaScript=O;fi.ensureFetch=Y;fi.default=Ug;fi.Resource=Ug;fi.unregisterExtension=w;fi.registerExtension=q;fi.parseQuery=vj;fi.extensions=iB;fi.createFiles=ka;fi.resource=Tj;fi.httpResourceExtension=sM;fi.fileResourceExtension=tM;fi.localResourceExtension=uM;fi.newUUID=en;fi.waitFor=Pr;fi.registerExtension(fi.localResourceExtension);
fi.registerExtension(fi.httpResourceExtension);fi.registerExtension(fi.fileResourceExtension);fi.createFileSpec=D;fi.createFileSpec=D;fi.importModuleViaNative=J;fi.importModuleViaNative=J;fi.loadViaScript=O;fi.loadViaScript=O;fi.ensureFetch=Y;fi.ensureFetch=Y;fi.registerExtension=q;fi.registerExtension=q;fi.unregisterExtension=w;fi.unregisterExtension=w;fi.parseQuery=vj;fi.parseQuery=vj;fi.extensions=iB;fi.extensions=iB;fi.createFiles=ka;fi.createFiles=ka;fi.resource=Tj;fi.resource=Tj;var Vka=Object.freeze({__proto__:null,
Resource:Ug,createFileSpec:D,importModuleViaNative:J,loadViaScript:O,ensureFetch:Y,registerExtension:q,unregisterExtension:w,parseQuery:vj,extensions:iB,createFiles:ka,resource:Tj}),Xi=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Xi.pathForBrowserHistory=ca;Xi.addClassMappings=sa;Xi.morph=qa;Xi.newMorphId=Qa;Xi.lazyInspect=function(f){var k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),
2);k=b.yieldResult;n=k.inspect;Xi.inspect=n;return b.return(n(f))})};Xi.locateClass=Ep;Xi.string=ti;Xi.parseQuery=vj;Xi.stringifyQuery=Ue;Xi.touchInput=Xi.touchInput||void 0;try{document.createEvent("TouchEvent"),Xi.touchInput=!0}catch(f){Xi.touchInput=!1}var yr=Ba("aB",Xi.touchInput);Xi.touchInputDevice=yr;Xi.touchInputDevice=yr;Xi.touchInputDevice=yr;Xi.nameToClassMapping=Xi.nameToClassMapping||{};Xi.pathForBrowserHistory=ca;Xi.pathForBrowserHistory=ca;Xi.addClassMappings=sa;Xi.addClassMappings=
sa;Xi.morph=qa;Xi.morph=qa;Xi.newMorphId=Qa;Xi.newMorphId=Qa;var jB=Ba("a8",Xi.lazyInspect);Xi.inspect=jB;Xi.inspect=jB;Xi.inspect=jB;var Qs=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");Qs.obj=Ag;Qs.morph=qa;var Op=Ba("ap",function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=k.hasOwnProperty("Icon")&&"function"===typeof k.Icon?k.Icon:k.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(n,f,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(b,e){var m=e=void 0===e?{prefix:"",suffix:""}:e,a=m.prefix;m=m.suffix;var g=[];a&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));g.push.apply(g,$jscomp.arrayFromIterable(this.textAttribute(b,Qs.obj.dissoc(e,["fontSize"]))));m&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof m?[m||"",{}]:m));return Qs.morph(Object.assign({type:"label",
value:g},Qs.obj.dissoc(e,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,e){e=void 0===e?{}:e;var m=e.textStyleClasses&&e.textStyleClasses.includes("far");return[Qs.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:m?"400":"900",textStyleClasses:["fas"]},e)]}},{key:"setIcon",value:function(b,e){b.textAndAttributes=this.textAttribute(e)}}],k,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));Qs.Icon=Op;Qs.Icon=Op;Qs.Icon=Op;var vM=Ba("bl",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},
affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},
"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},
archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},
"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},
backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},
"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},
blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},
bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},
bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},
camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},
"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},
centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},
"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},
church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},
"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},
"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},
"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},
"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},
"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},
"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},
donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},
"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},
equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},
eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},
file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},
"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},
"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},
"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},
"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},
gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},
google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},
"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},
"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},
"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},
headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},
"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},
"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},
"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},
khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},
"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},
"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},
male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},
mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},
"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},
"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},
node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},
osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},
pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},
phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},
pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},
poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},
qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},
rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},
restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},
"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},
seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},
"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},
"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},
snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},
"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},
"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},
"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},
"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},
tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},
th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},
"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},
trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},
tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},
university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},
"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},
vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},
"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},
whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},
"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},
"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});Qs.Icons=vM;Qs.Icons=vM;Qs.Icons=vM;var Me=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Me.vdom=WG;Me.promise=ph;Me.arr=eg;Me.tree=vu;Me.obj=Ag;Me.string=ti;Me.addOrChangeCSSDeclaration=ms;Me.addOrChangeLinkedCSS=tw;Me.defaultStyle=Rx;Me.renderGradient=FC;Me.defaultAttributes=rw;Me.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Me.pathAttributes=cA;Me.svgAttributes=EC;Me.renderMorph=GC;Me.Transform=el;Me.pt=Ii;Me.getSvgVertices=qw;Me.config=Cn;var wM=Me.vdom;Me.h=wM.h;Me.diff=wM.diff;Me.patch=wM.patch;Me.createNode=wM.create;Me.svgNs="http://www.w3.org/2000/svg";Me.CanvasHook=function(f){this.canvasMorph=f};Me.CanvasHook.prototype.hook=function(f,k,n){this.canvasMorph.afterRender(f,this.canvasMorph._canvas!==f&&"CANVAS"==f.tagName)};Me.InitStroke=function(f,k,n){this.path=f;this.renderer=k;this.reverse=n};Me.InitStroke.prototype.hook=
function(f,k,n){k=this.path.drawnProportion||0;0!=k&&(f.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),f.setAttribute("stroke-dasharray",f.getTotalLength()),f.setAttribute("stroke-dashoffset",f.getTotalLength()*(this.reverse?1-k:-1+(1-k))))};var xM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=k.hasOwnProperty("Renderer")&&"function"===typeof k.Renderer?k.Renderer:k.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+b);if(!(e&&"nodeType"in e))throw Error("Trying to initialize renderer with an invalid root node: "+e);m||(m={window:System.global,document:e.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=e;this.domNode=null;this.domEnvironment=m;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=
this.renderWorldLoopProcess=null;this.requestAnimationFrame=m.window.requestAnimationFrame.bind(m.window)}},{key:"clear",value:function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return e=b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:e&&(m=e.parentNode,m.removeChild(e),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(g){return m.removeChild(g)})),
b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return Me.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(e){return Promise.all([Me.addOrChangeCSSDeclaration("lively-morphic-css",Me.defaultCSS,e),Me.addOrChangeLinkedCSS("lively-ibm-plex",Me.config.css.ibmPlex),Me.addOrChangeLinkedCSS("lively-font-awesome",Me.config.css.fontAwesome,e,!1),Me.addOrChangeLinkedCSS("lively-font-inconsolata",Me.config.css.inconsolata,
e,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);
b.renderWorldLoopLater=null;return e.yield(Me.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var e=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){e.renderWorldLoopLater=null;0<e.renderWorldLoopLaterCounter&&e.renderLater(e.renderWorldLoopLaterCounter-1);try{e.renderStep()}catch(m){console.error("Error rendering morphs:",
m)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var e="#"+Me.string.regExpEscape(b.id),m=this.domNode&&this.domNode.querySelector(e);this.domNode&&this.domNode.id==b.id&&(m=this.domNode);if(m)return m;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(m=b.next();!m.done;m=b.next())if(m=m.value.querySelector(e))return m;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(e){return e.id===
b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var e=this.renderMap.get(b);if(e)return e}b.aboutToRender(this);e=b.render(this);this.renderMap.set(b,e);return e}},{key:"renderAsFixed",value:function(b){var e=this.render(b);b.isHTMLMorph||(e.properties.style.position="fixed");return e}},{key:"renderFixedMorphs",value:function(b,e){e=this.domNode;var m=this.fixedMorphNodeMap;if((b.length||m.size)&&e&&e.parentNode){e=e.parentNode;for(var a=$jscomp.makeIterator(m),g=a.next();!g.done;g=
a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;l=l.next().value;b.includes(g)||(l.parentNode&&l.parentNode.removeChild(l),m.delete(g))}a=b.map(function(y){return m.get(y)});var r=a.map(function(y){return y&&y.id});g=[].concat($jscomp.arrayFromIterable(e.children)).map(function(y){return y.id}).filter(function(y){return r.includes(y)});Me.arr.equals(r,g)||a.map(function(y){return y&&y.parentNode&&y.parentNode.removeChild(y)});b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){a=
a.value;g=this.renderMap.get(a)||this.renderAsFixed(a);l=this.renderAsFixed(a);l=Me.diff(g,l);var v=m.get(a);v||(v=Me.createNode(g,this.domEnvironment),m.set(a,v));v.parentNode||e.appendChild(v);Me.patch(v,l)}}}},{key:"renderMorph",value:function(b){var e=this.renderSubmorphs(b);return Me.h("div",Object.assign({},Me.defaultAttributes(b,this),{style:Me.defaultStyle(b)}),e)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,b.submorphs)}},{key:"renderSelectedSubmorphs",
value:function(b,e){var m=b.borderWidthLeft,a=b.borderWidthTop,g=b.origin,l=g.x;g=g.y;for(var r=e.length-1,v=Array(r+1);0<=r;r--)e[r].__stackIdx__=r,v[r]=this.render(e[r]);e={};return Me.h("div",{style:Object.assign({position:"absolute",left:l-(b.isPath?0:m)+"px",top:g-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==b.clipMode?(e[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+b.id+")",e):{}):
{})},v)}},{key:"renderWorld",value:function(b){for(var e=b.submorphs,m=[],a=[],g=0;g<e.length;g++){var l=e[g];l.hasFixedPosition?a.push(l):m.push(l)}e=this.renderSelectedSubmorphs(b,m);b=Me.h("div",Object.assign({},Me.defaultAttributes(b,this),{style:Me.defaultStyle(b)}),e);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var e=b.imageUrl;if(e.startsWith("data:")){var m=e.indexOf(","),a=e.substring(5,m),g=$jscomp.makeIterator(a.split(";"));a=g.next().value;g=g.next().value;m=e.substring(m+
1);"base64"!==g&&(e=Me.string.createDataURI(m,a))}return Me.h("div",Object.assign({},Me.defaultAttributes(b,this),{style:Me.defaultStyle(b)}),[Me.h("img",{src:e,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){return Me.h("div",Object.assign({},Me.defaultAttributes(b,this),{style:Me.defaultStyle(b)}),[Me.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",
position:"absolute"},canvasHook:new Me.CanvasHook(b)}),this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return Me.h("div",Object.assign({},Me.defaultAttributes(b,this),{style:Me.defaultStyle(b)}),[Me.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var e=b.startMarker,m=b.endMarker,a=b.showControlPoints,g=Me.getSvgVertices(b.vertices),
l=Me.h("path",Object.assign({namespace:Me.svgNs,id:"svg"+b.id},Me.pathAttributes(b))),r=Me.h("mask",{namespace:Me.svgNs,id:"mask"+b.id},[Me.h("rect",{namespace:Me.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),Me.h("path",{namespace:Me.svgNs,initStroke:new Me.InitStroke(b,this,!0),attributes:{d:g,stroke:"black",fill:"none"}}),Me.h("path",{namespace:Me.svgNs,initStroke:new Me.InitStroke(b,this,!1),attributes:{d:g,stroke:"white",fill:"none"}})]);g=[Me.h("clipPath",{namespace:Me.svgNs,
id:"clipPath"+b.id},Me.h("path",{namespace:Me.svgNs,attributes:{d:g,fill:"white"}})),r];e&&(e.id||(e.id="start-marker"),l.properties.attributes["marker-start"]="url(#"+b.id+"-"+e.id+")",g=[],g.push(this._renderPath_Marker(b,e)));m&&(m.id||(m.id="end-marker"),l.properties.attributes["marker-end"]="url(#"+b.id+"-"+m.id+")",g||(g=[]),g.push(this._renderPath_Marker(b,m)));var v;a&&(v=Me.h("g",{namespace:Me.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,l,g,v)}},{key:"_renderPath_ControlPoints",
value:function(b,e){function m(X,W,ea,Aa,Ka,K){var aa=Aa?12:Math.min(8,Math.max(3,l));ea="path-point path-point-"+ea;Aa=Aa?"orange":r;"string"===typeof Ka&&(ea+="-"+Ka);K&&(aa=Math.max(3,Math.ceil(aa/2)));return K?Me.h("circle",{namespace:Me.svgNs,style:{fill:"white","stroke-width":2,stroke:Aa},attributes:{class:ea,cx:X,cy:W,r:aa}}):Me.h("circle",{namespace:Me.svgNs,style:{fill:Aa},attributes:{class:ea,cx:X,cy:W,r:aa}})}var a=b.vertices;e=b.borderWidth;var g=b.showControlPoints;b=b._controlPointDrag;
var l=0==e?6:e+2,r="red";e=[];if("object"===typeof g){var v=g.radius;(g=g.fill)&&(r=String(g));"number"===typeof v&&(l=v)}if(a.length){g=0;var y=a[0];v=y.x;var A=y.y;y=y.controlPoints.next;var E=b&&b.maybeMerge&&b.maybeMerge.includes(g);e.push(m(v,A,g,E));for(g=1;g<a.length-1;g++){var F=a[g];E=F.isSmooth;var H=F.x,I=F.y,M=F.controlPoints;F=M.previous;M=M.next;var N=b&&b.maybeMerge&&b.maybeMerge.includes(g);E?e.push(m(H,I,g,N),m(v+y.x,A+y.y,g-1,!1,"control-2",!0),m(H+F.x,I+F.y,g,!1,"control-1",!0)):
e.push(m(H,I,g,N));v=H;A=I;y=M}I=a[a.length-1];a=I.isSmooth;E=I.x;H=I.y;I=I.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(g);a?e.push(m(E,H,g,b),m(v+y.x,A+y.y,g-1,!1,"control-2",!0),m(E+I.x,H+I.y,g,!1,"control-1",!0)):e.push(m(E,H,g,b))}return e}},{key:"_renderPath_Marker",value:function(b,e){function m(a){var g=a.tagName,l=a.id,r=a.children,v=a.style;r=r?r.map(m):void 0;l&&(l=b.id+"-"+l);return Me.h(g,{namespace:Me.svgNs,id:l,style:v,attributes:Me.obj.dissoc(a,["tagName","id","children",
"style"])},r)}return m(e)}},{key:"renderSvgMorph",value:function(b,e,m,a){a=void 0===a?[]:a;var g=Me.svgAttributes(b),l=b.innerBounds(),r=l.width;l=l.height;var v,y=[];b.fill&&b.fill.isGradient&&(v||(v=[]),v.push(Me.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&(v||(v=[]),v.push(Me.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));m&&m.length&&(v||(v=[]),v.push.apply(v,$jscomp.arrayFromIterable(m)));y.push(e);v&&y.push(Me.h("defs",{namespace:Me.svgNs},
v));e=Me.obj.select(Me.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return Me.h("div",Object.assign({},Me.defaultAttributes(b,this),{style:Object.assign({},e,{width:r+"px",height:l+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),[Me.h("svg",Object.assign({namespace:Me.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},g),y),this.renderSubmorphs(b),
Me.h("svg",Object.assign({namespace:Me.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},g),a)])}},{key:"renderPreview",value:function(b,e){var m=void 0===e.center?!0:e.center,a=void 0===e.ignoreMorphs?[]:e.ignoreMorphs,g=void 0===e.asNode?!1:e.asNode,l=b.origin,r=b.rotation,v=void 0===e.width?100:e.width;e=void 0===e.height?100:e.height;var y=Math.max(.1,1/b.scale);y=(new Me.Transform(b.position.negated(),0,Me.pt(y,y))).transformRectToRect(b.bounds());var A=Math.max(.1,Math.min(v/
y.width,e/y.height));l=new Me.Transform(y.topLeft().negated().scaleBy(A).subPt(l),r,Me.pt(A,A));r=(r=this.getNodeForMorph(b))?r.cloneNode(!0):Me.renderMorph(b);m&&(b=l.transformRectToRect(b.extent.extentAsRectangle()),l=l.preConcatenate(new Me.Transform(Me.pt(b.width<v?(v-b.width)/2:0,b.height<e?(e-b.height)/2:0))));r.style.transform=l.toCSSTransformString();r.style.pointerEvents="";Me.tree.prewalk(r,function(E){if("string"===typeof E.className){var F=E.className.split(" ").map(function(H){return H.trim()}).filter(Boolean);
F.includes("Morph")&&(E.className=Me.arr.withoutAll(F,["morph","Morph"]).join(" "),a.find(function(H){return H.id===E.id})&&E.remove(),E.id="")}},function(E){return Array.from(E.childNodes)});return g?r:r.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],k,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1406,end:20540})}(void 0);Me.Renderer=xM;Me.Renderer=xM;Me.Renderer=xM;var MD=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),F6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=k.hasOwnProperty("FontDetector")&&"function"===typeof k.FontDetector?k.FontDetector:k.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(e,m){return[e,String(100*(m+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=
null}},{key:"prepare",value:function(){var b=this.defaultWidth,e=this.defaultHeight,m=this.possibleFontWeights,a=this.baseFonts,g=this.document.getElementsByTagName("body")[0],l=this.span||this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var r=this.document.createElement("div");r.style.position="absolute";r.style.width="100%";r.style.overflow="hidden";r.style["pointer-events"]="none";r.style["-webkit-user-select"]="none";r.appendChild(l);
g.appendChild(r)}for(var v in m)for(var y in a)l.style.fontFamily=a[y],l.style.fontWeight=m[v],b[a[y]+"@"+m[v]]=l.offsetWidth,e[a[y]+"@"+m[v]]=l.offsetHeight;this.span=l;this.prepared=!0}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;this.possibleFontWeights.includes(e)||(e=this.namedToNumeric.get(e)||"normal");this.prepared||this.prepare();var m=this.defaultWidth,a=this.defaultHeight,g=this.baseFonts,l=this.span,r=this.document.body;l.parentNode||r.appendChild(l);for(var v in g)if(l.style.fontWeight=
e,l.style.fontFamily=b+","+g[v],l.offsetWidth!=m[g[v]+"@"+e]||l.offsetHeight!=a[g[v]+"@"+e])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return MD.fonts}}],k,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:15,end:3680})}(void 0),Wka=F6=MD.FontDetector,cU=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},
{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",
type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",
type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},
{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},
{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},
{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",
type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",
type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",
isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},
{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},
{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",
type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},
{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",
type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},
{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",
type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},
{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",
type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},
{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},
{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",
isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",
type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",
type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",
type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},
{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",
type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",
type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",
type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},
{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},
{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},
{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",
type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},
{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},
{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},
{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];MD.fonts=cU;MD.fonts=cU;MD.fonts=cU;MD.default=F6;var Oi=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Oi.textlayerNodeForFontMeasure=function(f){var k=
f.viewState,n=k.text_layer_node;k=k.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(f.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));k&&!k.className.includes("newtext-text-layer")&&(f.viewState.fontmetric_text_layer_node=k=null);n&&!k&&n.parentNode&&(k=f.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return k};Oi.isExtendingChar=function(f){return 768<=f.charCodeAt(0)&&Oi.extendingChars.test(f)};
Oi.skipExtendingChars=function(f,k,n){for(;(0>n?0<k:k<f.length)&&Oi.isExtendingChar(f.charAt(k));)k+=n;return k};Oi.charBoundsOfBigMonospacedLine=function(f,k,n,b,e,m,a,g){e=void 0===e?0:e;m=void 0===m?0:m;n=n.text.length;if(500>n||k.isProportional(Oi.getComputedFontFamily(b)))return null;var l=Infinity,r=a.defaultTextStyle;a.lineWrapping&&(l=b.getBoundingClientRect().width);k=k._domMeasure.defaultCharExtent(f,{defaultTextStyle:r},g);f=k.width;k=k.height;b=Array(n);for(a=0;a<n;a++)e+f>l&&(e=0,m+=
k),b[a]={x:e,y:m,width:f,height:k},e+=f;return b};Oi.charBoundsOfLine=function(f,k,n,b){n=void 0===n?0:n;b=void 0===b?0:b;f=k.ELEMENT_NODE;var e=k.TEXT_NODE,m=k.ownerDocument,a=[],g=0;if(k)if(k.className.includes("line")){n-=k.offsetLeft;b-=k.offsetTop;var l=k.childNodes[0]}else l=k.getElementsByClassName("line")[0].childNodes[0],n=n-k.offsetLeft+Oi.getComputedMarginLeft(k),b-=k.offsetTop;else l=null;if(!l){var r=l=m.createElement("br");k.appendChild(r)}for(;l&&!(Infinity<g);){var v="BR"!==l.tagName&&
l.nodeType===f&&l.childNodes[0]||l;if(v.nodeType===e)for(var y=v.length,A=0;A<y;A++){var E=Oi.measureCharInner(m,v,A,"right");var F=E.left;var H=E.top;k=E.width;E=E.height;F+=n;H+=b;a[g++]={x:F,y:H,width:k,height:E}}else if(l.nodeType===f)v=l.getBoundingClientRect(),F=v.left,H=v.top,k=v.width,E=v.height,F+=n,H+=b,a[g++]={x:F,y:H,width:k,height:E};else throw Error("Cannot deal with node "+l);l=l.nextSibling}r&&r.parentNode.removeChild(r);return a};Oi.measureCharInner=function(f,k,n,b){b=void 0===b?
"left":b;var e=n;n+=1;if(3==k.nodeType)for(var m=0;4>m;m++){var a=Oi.getUsefulRect(Oi.range(f,k,e,n).getClientRects(),b);if(a.left||a.right||0==e)break;n=e;--e}return a};Oi.range=function(f,k,n,b,e){f=f.createRange();f.setEnd(e||k,b);f.setStart(k,n);return f};Oi.getUsefulRect=function(f,k){var n={left:0,right:0,top:0,bottom:0};if("left"==k)for(k=0;k<f.length&&(n=f[k]).left==n.right;k++);else for(k=f.length-1;0<=k&&(n=f[k]).left==n.right;k--);return n};Oi.string=ti;Oi.obj=Ag;Oi.FontDetector=Wka;Oi.cumulativeOffset=
ls;Oi.config=Cn;Oi.debug=!!Oi.config.onloadURLQuery["debug-font-metric"];Oi.checkTimeout=1E3;var G6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("FontMetric")&&"function"===typeof k.FontMetric?k.FontMetric:k.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap=
{};this.cachedBoundsInfo={};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var e=this.element.parentNode;var m=this.element.ownerDocument}this.uninstall();this.charMap={};this.cachedBoundsInfo={};m&&e&&this.install(m,e,b)}},{key:"install",value:function(b,e,m){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);e.appendChild(this.element);this._domMeasure=(new Oi.DOMTextMeasure).install(b,
e,m)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e?"hidden":"visible"}},{key:"measure",value:function(b,e){var m=b.fontFamily,a=b.fontSize,g=b.fontWeight,l=b.fontStyle,r=
b.textDecoration,v=b.textStyleClasses;b=b.transform;var y=this.element;b&&(b=b.inverse());y.textContent=e;Object.assign(y.style,{"-webkit-text-size-adjust":"none",fontFamily:m,fontWeight:g,fontStyle:l,textDecoration:r,transform:b,fontSize:a+"px"});y.className=v?v.join(" "):"";try{var A=y.getBoundingClientRect();var E=A.width;var F=A.height}catch(H){return{width:0,height:0}}return{height:F,width:E}}},{key:"charBoundsFor",value:function(b,e){var m=e.length,a=Array(m),g=this.cachedBoundsInfo,l=g.bounds,
r=g.str;g=g.style;if(this.isProportional(b.fontFamily)){g=l&&Oi.obj.equals(g,b);for(var v=!b.fixedCharacterSpacing,y=0,A=0;y<m;y++){var E=e[y];if(v)if(g=g&&E===r[y]){var F=l[y];E=F.width;F=F.height}else E=e.substr(0,y+1),F=this.measure(b,E),E=F.width,F=F.height,E-=A;else F=this.sizeFor(b,E),E=F.width,F=F.height;a[y]={x:A,y:0,width:Math.ceil(E),height:Math.ceil(F)};A+=E}v&&(this.cachedBoundsInfo={bounds:a,str:e,style:b})}else for(e=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-e.width,e=e.height,
r=0;r<m;r++)l=b*r,a[r]={x:l,y:0,width:b,height:e};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var e={fontFamily:b,fontSize:12},m=this.sizeFor(e,"w").width;e=this.sizeFor(e,"i").width;return this.isProportionalCache[b]=m!==e}},{key:"sizeFor",value:function(b,e,m){var a=b.fontFamily,g=b.fontSize,l=b.fontWeight,r=b.fontStyle,v=b.textDecoration,y=b.textStyleClasses;b={fontFamily:a,fontSize:g,fontWeight:l,fontStyle:r,
textDecoration:v,textStyleClasses:y};if((void 0===m||!m)&&1<e.length)return this.measure(b,e);m=y?y.join(" "):"";a=[a,g,l,r,v,m].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][e]||(this.charMap[a][e]=this.measure(b,e));return this.charMap[a][e]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;var m=this.fontDetector||(this.fontDetector=new Oi.FontDetector(this.element.ownerDocument));
if(this.supportedFontCache[b+"-"+e]){var a=this.supportedFontCache[b+"-"+e],g=a.ts;a=a.value;if(Date.now()-g<Oi.checkTimeout)return a}m=m.isFontSupported(b,e);this.supportedFontCache[b+"-"+e]={ts:Date.now(),value:m};return m}},{key:"defaultCharExtent",value:function(b,e,m){return this._domMeasure.defaultCharExtent(b,e,m)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,e,m,a,g,l,r){return this._domMeasure.computeCharBBoxes(b,e,0,0,g,l,r,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,
e,m,a,g,l,r){return this._domMeasure.computeBBoxesOfLines(b,e,0,0,g,l,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},
{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var e=new Oi.FontMetric;e.install(b,b.body);return e}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:316,end:7454})}(void 0),
Xka=G6=Oi.FontMetric;Oi.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("DOMTextMeasure")&&"function"===typeof k.DOMTextMeasure?k.DOMTextMeasure:k.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var e=this.element.ownerDocument}this.uninstall();e&&b&&this.install(e,b);return this}},
{key:"install",value:function(b,e,m){this.maxLineBBoxCacheCount=(this.debug=m=void 0===m?!1:m)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=m?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(m?" debug":"");this.setMeasureNodeStyles(b.style,!0);e.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var e=b.defaultTextStyle;return[e.fontFamily,e.fontSize,e.fontWeight,e.fontStyle,e.textDecoration,e.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,e,m){var a=this,g=this.generateStyleKey(e),l=this.defaultCharWidthHeightCache[g];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var r=this.doc;return this.withTextLayerNodeDo(b,m,e,g,function(v){var y=r.createElement("span");y.className="line";y.style.whiteSpace="pre";v.appendChild(y);y.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var A=y.getBoundingClientRect().width,E=r.createElement("span");E.className="line";E.style.whiteSpace="pre";v.appendChild(E);E.textContent="H\ne\nll\no";var F=E.getBoundingClientRect().height;v.removeChild(y);v.removeChild(E);return a.defaultCharWidthHeightCache[g]={width:A/92,height:Math.ceil(F/4)}})}},{key:"computeBBoxesOfLines",value:function(b,e,m,a,g,l,r){var v=this;m=void 0===m?0:m;a=void 0===a?0:a;for(var y=this.generateStyleKey(g),A=Array(e.length),E=!0,F=0;F<e.length;F++){var H=!e[F].textAttributes.length&&
this.lineBBoxCache[y+"_"+e[F].text];H&&H.height&&H.width?A[F]=H:E=!1}return E?A:this.withTextLayerNodeDo(b,l,g,y,function(I,M,N){for(var X=Array(e.length),W=Array(e.length),ea=0;ea<e.length;ea++)if(!W[ea]){var Aa=r(e[ea]);Aa.style.display="inline-block";I.appendChild(Aa);X[ea]=Aa}for(ea=0;ea<X.length;ea++)if(!W[ea]){Aa=X[ea];var Ka=Aa.getBoundingClientRect();v.lineBBoxCache[y+"_"+e[ea].text]=W[ea]={x:Ka.left-Aa.offsetLeft+m-M,y:Ka.top-Aa.offsetTop+a-N,width:Ka.width,height:Ka.height}}for(M=0;M<X.length;M++)I.removeChild(X[M]);
return W})}},{key:"computeCharBBoxes",value:function(b,e,m,a,g,l,r,v){var y=this;m=void 0===m?0:m;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,l,g,this.generateStyleKey(g),function(A,E,F){var H=r(e);A.appendChild(H);A=1E4<e.stringSize&&Oi.charBoundsOfBigMonospacedLine(b,v,e,H,m,a,g,l)||Oi.charBoundsOfLine(e,H,m-E,a-F);y.debug||H.parentNode.removeChild(H);return A})}},{key:"withTextLayerNodeDo",value:function(b,e,m,a,g){var l=this.doc,r=this.textlayerNodeCache,v=this.element,y=Oi.textlayerNodeForFontMeasure(b);
y||(y=r[a]);if(!y){this.textlayerNodeCacheCount++;y=r[a]=e(m,[]);y.id=a;e=m.width;var A=m.clipMode;m.width||m.clipMode&&"visible"!==m.clipMode?(m=l.createElement("div"),m.style.position="absolute",A&&(m.style.overflow=A),e&&(m.style.width=e+"px"),m.id=a,m.appendChild(y),v.appendChild(m)):v.appendChild(y)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,y.style.transform=a.toString());a=y.getBoundingClientRect();
b=a.left;a=a.top;try{return g(y,b,a)}finally{if(y.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){g=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var E;g--&&(E=v.childNodes[0]);)r[E.id]=null,v.removeChild(E);this.textlayerNodeCacheCount-=g}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11123,end:19569})})(void 0);Oi.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Oi.getComputedFontFamily="function"===typeof Oi.GLOBAL.getComputedStyle?function(f){return Oi.GLOBAL.getComputedStyle(f).fontFamily}:function(){return""};Oi.getComputedMarginLeft="function"===typeof Oi.GLOBAL.getComputedStyle?function(f){return parseInt(Oi.GLOBAL.getComputedStyle(f).marginLeft)||
0}:function(){return 0};Oi.default=G6;var pj=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");pj.signalBindings=function(f,k,n){if(f=f.attributeConnections){f=f.slice();for(var b=0;b<f.length;b++)f[b].sourceAttrName===k&&f[b].update(n)}};pj.informMorph=function(f,k,n){try{n.onChange(k);pj.signalBindings(n,"change",k);for(var b=n.owner;b;)b.onSubmorphChange(k,n),b=b.owner}catch(e){console.error("Error in informMorph: "+e.stack)}};pj.arr=eg;pj.string=ti;pj.obj=Ag;pj.connect=Zk;pj.signal=
dm;pj.disconnect=Dp;(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("Change")&&"function"===typeof k.Change?k.Change:k.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var dU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=k.hasOwnProperty("GroupChange")&&"function"===typeof k.GroupChange?k.GroupChange:k.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){cc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);
b.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(pj.Change);pj.GroupChange=dU;pj.GroupChange=dU;pj.GroupChange=dU;var eU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("ValueChange")&&"function"===typeof k.ValueChange?k.ValueChange:k.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a){cc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=e;this.value=m;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],k,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(pj.Change);pj.ValueChange=eU;pj.ValueChange=eU;pj.ValueChange=eU;var fU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("MethodCallChange")&&"function"===typeof k.MethodCallChange?k.MethodCallChange:k.MethodCallChange=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g){cc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=e;this.args=m;this.undo=a;this.meta=g}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,e=b.target;e[b.selector].apply(e,b.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(pj.GroupChange);pj.MethodCallChange=fU;pj.MethodCallChange=fU;pj.MethodCallChange=fU;var yM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("ChangeManager")&&"function"===typeof k.ChangeManager?k.ChangeManager:k.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(e){return e.target===b})}},{key:"apply",value:function(b,e){e.apply()}},{key:"doWithValueChangeMeta",value:function(b,e,m){this.defaultMeta=b;this.metaStack.push(b);b=m(e);this.metaStack.pop();this.defaultMeta=
pj.arr.last(this.metaStack)||{};return b}},{key:"addValueChange",value:function(b,e,m,a){e=new pj.ValueChange(b,e,m,Object.assign({},this.defaultMeta,{},a));return this._record(b,e)}},{key:"addMethodCallChangeDoing",value:function(b,e,m){var a=b.target,g=b.selector,l=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+g)});l=new pj.MethodCallChange(a,g,l,b,this.defaultMeta);e.groupChangesWhile(l,m);return l}},{key:"_record",value:function(b,e){pj.signal(this,"changeRecorded",
e);e.hasOwnProperty("value")&&(e.prevValue=b._morphicState[e.prop],b._morphicState[e.prop]=e.value);b.makeDirty(e);var m=pj.arr.last(this.changeGroupStack);m&&m.consumesChanges()?m.addChange(e):(this.changes.push(e),b._rev=++this.revision,this.informChangeListeners(e));pj.informMorph(this,e,b);return e}},{key:"groupChangesWhile",value:function(b,e,m,a){a=void 0===a?!0:a;e||(e=new pj.GroupChange(b));this.changeGroupStack.push(e);try{return m(),pj.arr.remove(this.changeGroupStack,e),a?this._record(b,
e):e}catch(g){throw pj.arr.remove(this.changeGroupStack,e),g;}}},{key:"dontRecordChangesWhile",value:function(b,e){return this.groupChangesWhile(b,void 0,e,!1)}},{key:"recordChangesWhile",value:function(b,e){var m=this.changes.length;b();b=this.changes.slice(m,this.changes.length);return e?b.filter(e):b}},{key:"addChangeListener",value:function(b){pj.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){pj.arr.remove(this.changeRecordedListeners,b)}},
{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(e){return e(b)})}},{key:"recordChangesStart",value:function(b,e){e=pj.obj.newKeyIn(this.changeRecorders,(void 0===e?"":e)+"__change_recorder_"+Date.now());var m=b?function(g){return b(g)&&a.changes.push(g)}:function(g){return a.changes.push(g)},a=this.changeRecorders[e]={id:e,filter:b,changes:[],listener:m};this.addChangeListener(m);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];
var e=this.changeRecorders[b],m=e.changes;e=e.listener;delete this.changeRecorders[b];this.removeChangeListener(e);return m}},{key:"recordChangesStartForMorph",value:function(b,e){e=this.recordChangesStart(e,b.id);var m=this.changeRecordersPerMorph.get(b);m||(m=[],this.changeRecordersPerMorph.set(b,m));m.push(e.id);return e}},{key:"recordChangesStopForMorph",value:function(b,e){var m=this.changeRecordersPerMorph.get(b);if(!m||!m.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
b+": recorder not found"),[];(b=e)?pj.arr.remove(m,b):b=m.pop();return this.recordChangesStop(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7573})}(void 0);pj.ChangeManager=yM;pj.ChangeManager=
yM;pj.ChangeManager=yM;var Dn=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Dn.printArg=function(f){return Dn.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Dn.obj=Ag;Dn.arr=eg;Dn.events=uz;Dn.fun=Jn;(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("Undo")&&"function"===typeof k.Undo?k.Undo:k.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){e=void 0===e?[]:e;this.name=b;this.targets=e;this.timestamp=this.changes=this.recorder=null;this.no=void 0===m?0:m}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var e=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(m){var a=m.target;return a.isUsedAsEpiMorph()||!e.targets.some(function(g){return g===a||g.isAncestorOf(a)})?!1:"function"===typeof b?b(m):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){Dn.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=Dn.arr.sortBy(b.concat(this).filter(function(e){return e.recorded()}),function(e){return e.no});
b.length&&(this.changes=Dn.arr.flatmap(b,function(e){return e.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(e){return e.name}).join("-"))}},{key:"toString",value:function(){var b=this.name,e=this.changes,m=this.no,a=this.isRecording();e=e.length?"\n  "+e.map(function(g){var l=g.selector,r=g.args,v=g.prop,y=g.value;g=g.target;return l?g+"."+l+"("+r.map(Dn.printArg)+")":g+"."+v+" = "+Dn.printArg(y)}).join("\n  "):"no changes";return"Undo("+m+":"+b+" "+(a?"RECORDING ":
"")+e+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],k,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2498})})(void 0);var aH=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("UndoManager")&&"function"===
typeof k.UndoManager?k.UndoManager:k.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=
void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=Dn.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),this.undos=Dn.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,e){e=void 0===e?"new undo group":e;this.group();this.undoStart(b,e);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var e=this,m=this.grouping;(m.debounce||(m.debounce=Dn.fun.debounce(b||m.debounceTime,function(){m.debounce=null;m.debouncedCanceled||e.group()})))()}},{key:"undoStart",value:function(b,e){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new Dn.Undo(e,
[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"undo",value:function(){this.undoStop();var b=this.undos.pop();if(b){Dn.arr.remove(this.grouping.current,b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();
var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+b+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],k,{pathInPackage:function(){return"undo.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2633,end:5684})}(void 0);Dn.UndoManager=aH;Dn.UndoManager=aH;Dn.UndoManager=aH;var jo=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");jo.promise=ph;jo.bowser=Ms;jo.touchInputDevice=yr;jo.placeholderValue="\u0001\u0001";jo.placeholderRe=/\u0001/g;var H6=function(f){var k=
lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=k.hasOwnProperty("TextInput")&&"function"===typeof k.TextInput?k.TextInput:k.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,
manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,e){var m=this,a=this.domState,g=a.isInstalled,l=a.rootNode;this.world=e;if(g){if(l===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=b;b.tabIndex=1;e=a.textareaNode=b.ownerDocument.createElement("textarea");e.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
jo.touchInputDevice&&e.setAttribute("x-palm-disable-auto-cap",!0);e.setAttribute("wrap","off");e.setAttribute("autocorrect","off");e.setAttribute("autocapitalize","off");e.setAttribute("spellcheck",!1);e.setAttribute("aria-label","Lively Textinput Node");e.className="lively-text-input";e.value="";b.insertBefore(e,b.firstChild);jo.touchInputDevice&&(e.setAttribute("disabled",!0),e.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(r){return m.onRootNodeFocus(r)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(r){return m.onTextAreaFocus(r)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(r){return m.onTextAreaBlur(r)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(r){return m.inputState.manualCopy?m.inputState.manualCopy.onEvent(r):m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(r){return m.inputState.manualPaste?m.inputState.manualPaste.onEvent(r):m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(r){return m.onCompositionStart(r)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(r){return m.onCompositionEnd(r)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(r){return m.onCompositionUpdate(r)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(r){return m.onInput(r)},capturing:!1}];a.eventHandlers.forEach(function(r){return r.node.addEventListener(r.type,r.fn,r.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(m){return m.node.removeEventListener(m.type,m.fn,m.capturing)});var e=b.textareaNode;
e&&e.parentNode&&e.parentNode.removeChild(e);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=jo.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(jo.placeholderRe,""):""}},{key:"focus",value:function(b,e){var m=this.domState.textareaNode;m&&(jo.touchInputDevice&&b&&b.isText&&!b.readOnly&&m.removeAttribute("disabled"),b&&b.stealFocus||m.ownerDocument.activeElement!==m&&m.focus(),
jo.bowser.firefox&&Promise.resolve().then(function(){return m.ownerDocument.activeElement!==m&&m.focus()}),b&&b.isText&&b.focusable?(jo.touchInputDevice&&m.focus(),this.ensureBeingAtCursorOfText(b)):e&&this.ensureBeingInVisibleBoundsOfWorld(e))}},{key:"blur",value:function(){var b=this.domState.textareaNode;jo.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var m=e.domState.textareaNode,
a=function(g){m.removeEventListener("copy",a);g.preventDefault();b.forEach(function(l){return g.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return m.removeEventListener("copy",a)},300);m.addEventListener("copy",a);m.value="";m.select();m.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var m=e.domState.textareaNode;m.value=b;m.select();m.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var e=b.domState.textareaNode;e.value="";e.select();e.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,e){var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(!m.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=m.inputState;if(!a[b]){v.jumpTo(2);break}v.setCatchFinallyBlocks(3);return v.yield(a[b].promise,
5);case 5:v.leaveTryBlock(2);break;case 3:v.enterCatchBlock();case 2:return g=jo.promise.deferred(),l=!1,a[b]={onEvent:function(y){l||(a[b]=null,l=!0,g.resolve(y))},promise:g.promise},e(),v.setCatchFinallyBlocks(6),v.yield(jo.promise.waitFor(1E3,function(){return l}),8);case 8:v.leaveTryBlock(7);break;case 6:r=v.enterCatchBlock(),a[b]=null,l=!0,g.reject(r);case 7:return v.return(g.promise)}})}},{key:"onTextAreaBlur",value:function(b){var e=this;setTimeout(function(){var m=e.domState||{},a=m.textareaNode;
m=m.rootNode;!m||document.activeElement!==m||e.world.focusedMorph&&e.world.focusedMorph.stealFocus||jo.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var e=this.domState||{},m=e.rootNode;if(b.target===e.textareaNode||b.target===m)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var e=
this.readValue();b.__defineGetter__("data",function(){return e})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var e=this.inputState.composition,m=this.readValue();e.lastValue!==m&&(e.lastValue=m,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var e=(this.domState||{}).textareaNode;e&&(e.style.left=b.x+"px",e.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var e=b.world();if(e){var m=b.whatsVisible,a=b.cursorPosition,g=a.row;a=a.column;g=Math.max(m.startRow,Math.min(g,m.endRow));m=b.charBoundsFromTextPosition({row:g,column:a}).topLeft();b=e.visibleBounds().insetBy(10).constrainPt(b.worldPoint(m.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],k,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12306})}(void 0),Yka=H6=jo.TextInput;jo.default=H6;var gU=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");gU.arr=eg;var I6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=k.hasOwnProperty("KillRing")&&"function"===typeof k.KillRing?k.KillRing:k.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var e=this.buffer;e.push(b);this.size&&e.length>this.size&&e.splice(0,e.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],k,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),Zka=I6=gU.KillRing;gU.default=I6;var yi=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");yi.computeHashIdOfEvent=jb;
yi.isModifier=function(f){if(yi.isNumber(f))return!1;f=f.replace(/-$/,"").toLowerCase();return yi.arr.withoutAll(Object.keys(yi.KEY_MODS),["","input-"]).includes(f)};yi.canonicalizeFunctionKey=function(f){f=f.toLowerCase();switch(f){case "space":f="space";break;case "esc":f="escape";break;case "return":f="enter";break;case "arrowleft":f="left";break;case "arrowright":f="right";break;case "arrowup":f="up";break;case "arrowdown":f="down";break;case "esc":f="escape";break;case "return":f="enter"}return yi.FUNCTION_KEYS.includes(f)?
yi.string.capitalize(f):""};yi.decodeKeyIdentifier=function(f,k){var n=/u\+?([\d\w]{4})/gi,b=function(e,m){return String.fromCharCode(parseInt(m,16))};f=f&&f.replace(n,b);if("Command"===f||"Cmd"===f)f="Meta";" "===f&&(f="Space");8===k&&(f="Backspace");return f};yi.identifyKeyFromCode=function(f){f=f.code;if("string"!==typeof f)return null;if(f.startsWith("Key"))return f.slice(3);if(f.startsWith("Numpad"))return f;if(f.startsWith("Digit")||f.startsWith("Arrow"))return f.slice(5);if(f.match(/^F[0-9]{1-2}$/))return f;
switch(f){case "Insert":case "Home":case "PageUp":case "PageDown":return f;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};yi.dedasherize=function(f){for(var k=[];;){var n=f.indexOf("-");if(-1===n)return f&&k.push(f),
k;0===n?(k.push(f[0]),f=f.slice(2)):(k.push(f.slice(0,n)),f=f.slice(n+1))}};yi.bowser=Ms;yi.arr=eg;yi.string=ti;yi.letterRe=/[a-z]/i;yi.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};yi.KEY_MODS=function(){for(var f={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},k=["alt","ctrl","meta","shift"],n=Math.pow(2,k.length);n--;)f[n]=k.filter(function(b){return n&f[b]}).join("-")+"-";f[0]="";f[-1]="input-";return f}();yi.isNumber=function(){var f=/^[0-9]+$/;return function(k){return f.test(k)}}();
yi.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");yi.Keys={computeHashIdOfEvent:jb,keyComboToEventSpec:function(f,k){k=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},
k);var n=yi.dedasherize(f),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return k.keyCombo=f,k.key=n[1],k;for(var e=n.length-1;0<=e;e--){var m=b[n[e].toLowerCase()];m&&(n.splice(e,1),k.isModified=!0,k[m]=!0)}if(!n.length)return k.keyCombo=yi.Keys.eventToKeyCombo(k),k.key=yi.arr.last(yi.dedasherize(k.keyCombo)),k.onlyModifiers=!0,k;1<n.length&&console.warn('Strange key "'+f+'" encountered in keyComboToEventSpec, parsing probably failed');
f=yi.arr.last(n);(n=yi.canonicalizeFunctionKey(f))?(k.isFunctionKey=!0,k.key=n):k.key=k.isModified?yi.string.capitalize(f):f;k.keyCombo=yi.Keys.eventToKeyCombo(k);return k},eventToKeyCombo:function(f,k){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},k);k=f.key;var n=f.data,b=f.keyIdentifier;if("string"===typeof n)return"input-"+n;if(!k&&b&&(k=yi.decodeKeyIdentifier(b,f.which||f.keyCode),f.key=k=k[f.shiftKey?"toUpperCase":"toLowerCase"](),yi.isModifier(k)))return yi.string.capitalize(k);
n=yi.KEY_MODS[yi.computeHashIdOfEvent(f)];if("input-"===n)return n+k;f.code&&(k=yi.identifyKeyFromCode(f)||k);f=!k||yi.isModifier(k)?n.replace(/-$/,""):n+k;f.match(/\s$/)&&(f=f.replace(/\s$/,"Space"));return f.replace(/(^|-)([a-z])/g,function(e,m,a){return m+a.toUpperCase()})},canonicalizeKeyCombo:function(f){return yi.Keys.eventToKeyCombo(yi.Keys.keyComboToEventSpec(f))},canonicalizeEvent:function(f){return f._isLivelyKeyEventSpec?f:yi.Keys.keyComboToEventSpec(yi.Keys.eventToKeyCombo(f))}};var hU=
yi.Keys;yi.default=hU;var oi=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");oi.bowser=Ms;oi.obj=Ag;oi.pt=Ii;oi.Keys=hU;oi.cumulativeOffset=ls;var iU="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");oi.pointerEvents=iU;oi.pointerEvents=iU;oi.pointerEvents=iU;var jU="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");
oi.mouseEvents=jU;oi.mouseEvents=jU;oi.mouseEvents=jU;var kU=["keydown","keyup","keypress"];oi.keyboardEvents=kU;oi.keyboardEvents=kU;oi.keyboardEvents=kU;var zM=oi.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");oi.keyLikeEvents=zM;oi.keyLikeEvents=zM;oi.keyLikeEvents=zM;var AM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("Event")&&"function"===typeof k.Event?k.Event:k.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g,l,r){this.type=b;this.domEvt=e;this.dispatcher=m;this.targetMorphs=a;this.hand=g;this.halo=l;this.layoutHalo=r;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);
return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return oi.pointerEvents.includes(this.type)||oi.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&
oi.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(b){return b()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return oi.pt(0,
0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),oi.pt(0,0);b=oi.cumulativeOffset(b);var e=this.domEvt;b=oi.pt((e.pageX||0)-b.left,(e.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},
{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var e=this.state.clickedOnMorph;return e&&(b===e||b.isAncestorOf(e))}},{key:"leftMouseButtonPressed",value:function(){return this.domEvt?(this.domEvt.buttons||0)&1:!1}},{key:"rightMouseButtonPressed",value:function(){return 3===this.domEvt.which||2===this.domEvt.buttons}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?
(this.domEvt.buttons||0)&4:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var e=!1;oi.bowser.mac||(e=e||b.ctrlKey);if(oi.bowser.tablet||oi.bowser.tablet)e=e||!1;return e||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||
(this._keyCombo=oi.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:5006})}(void 0);oi.Event=AM;oi.Event=
AM;oi.Event=AM;var BM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("KeyEvent")&&"function"===typeof k.KeyEvent?k.KeyEvent:k.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g,l,r){console.assert(oi.keyLikeEvents.includes(b),"not a keyboard event: "+b);cc._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b,e,m,a,g,l,r);Object.assign(this,oi.Keys.canonicalizeEvent(e))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:5015,end:5385})}(oi.Event);oi.KeyEvent=BM;oi.KeyEvent=BM;oi.KeyEvent=BM;var CM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof k.SimulatedDOMEvent?k.SimulatedDOMEvent:k.SimulatedDOMEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=
void 0===b?{}:b;if(b.position){var e=b.position,m=e.x;e=e.y;b=oi.obj.dissoc(b,["position"]);b.pageX=m;b.pageY=e}!b.hasOwnProperty("pointerId")&&oi.mouseEvents.concat(oi.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",
value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5394,end:6299})}(void 0);oi.SimulatedDOMEvent=
CM;oi.SimulatedDOMEvent=CM;oi.SimulatedDOMEvent=CM;var Jf=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");Jf.dragStartEvent=function(f,k,n,b,e,m,a){var g=(new Jf.Event("morphicdragstart",f,k,[n],e,m,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=g.position;b.lastDragPosition=g.position;b.dragDelta=Jf.pt(0,0);b.absDragDelta=Jf.pt(0,0)}).onStop(function(){b.draggedMorph=null;k.schedule(Jf.dragEndEvent(f,k,n,b,e,m,a))});
return g};Jf.dragEvent=function(f,k,n,b,e,m,a){var g=(new Jf.Event("morphicdrag",f,k,[b.draggedMorph],e,m,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||k.world).getInverseTransform().transformDirection(g.position.subPt(b.lastDragPosition));b.absDragDelta=g.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=g.position}).onStop(function(){b.draggedMorph=null;k.schedule(Jf.dragEndEvent(f,k,n,b,e,m,a))});return g};Jf.dragEndEvent=function(f,k,n,b,
e,m,a){var g=b.draggedMorph||n,l=(new Jf.Event("morphicdragend",f,k,[g],e,m,a)).onDispatch(function(){b.dragDelta=(g.owner||k.world).getInverseTransform().transformDirection(l.position.subPt(b.lastDragPosition));b.absDragDelta=l.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=Jf.pt(0,0);b.absDragDelta=Jf.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return l};Jf.focusEvents=function(f,k){var n=f.eventState;
if(n.focusedMorph===k)return[];f=[];n.focusedMorph&&f.push((new Jf.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));f.push((new Jf.Event("focus",null,this,[k],null,null,null)).onDispatch(function(){return n.focusedMorph=k}));return f};Jf.arr=eg;Jf.fun=Jn;Jf.Path=$h;Jf.promise=ph;Jf.pt=Ii;Jf.config=Cn;Jf.TextInput=Yka;Jf.KillRing=Zka;Jf.Event=AM;Jf.KeyEvent=BM;Jf.SimulatedDOMEvent=CM;Jf.keyLikeEvents=zM;Jf.cumulativeOffset=ls;Jf.bowser=Ms;
Jf.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];
Jf.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);Jf.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];Jf.typeToMethodMap={pointerdown:"onMouseDown",
pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",
blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};Jf.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");Jf.textOnlyEvents=["input","compositionstart",
"compositionupdate","compositionend"];var J6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=k.hasOwnProperty("EventDispatcher")&&"function"===typeof k.EventDispatcher?k.EventDispatcher:k.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.activations=0;this.emitter=b;this.keyInputHelper=
null;this.world=e;this.installed=!1;this.handlerFunctions=[];this.killRing=new Jf.KillRing(Jf.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=Jf.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:null,draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,
dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var e=this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);Jf.focusEvents(this,b).forEach(function(m){return e.dispatchEvent(m)})}},{key:"isMorphFocused",
value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(e){return e.toLowerCase()}).includes(b.toLowerCase())}},{key:"whenIdle",value:function(){var b=this;return Jf.promise.waitFor(function(){return 0===b.activations})}},
{key:"install",value:function(b){var e=this;if(this.installed)return this;this.installed=!0;var m=this.emitter,a=System.global;Jf.domEventsWeListenTo.forEach(function(g){var l=g.type,r=g.capturing;g=g.passive;var v=function(y){return e.dispatchDOMEvent(y)};e.handlerFunctions.push({node:m,type:l,fn:v,capturing:r});m.addEventListener(l,v,{capture:r,passive:g})});a.addEventListener&&Jf.globalDomEventsWeListenTo.forEach(function(g){var l=g.type,r=g.capturing,v=g.morphMethod;g=g.passive;var y=function(A){return e.dispatchDOMEvent(A,
e.world,v)};e.handlerFunctions.push({node:a,type:l,fn:y,capturing:r});a.addEventListener(l,y,{capture:r,passive:g})});this.keyInputHelper=(new Jf.TextInput(this)).install(b,this.world);Jf.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(e){e.node.removeEventListener(e.type,e.fn,e.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},
{key:"processDOMEvent",value:function(b,e){var m=this,a=b.type,g=this.eventState,l=[e].concat(e.ownerChain()),r="touch"===b.pointerType,v=b.pointerId,y="number"===typeof v?this.world.handForPointerId(v,b.isPrimary):this.world.firstHand,A="number"!==typeof v||r?null:this.world.haloForPointerId(v),E="number"!==typeof v||r?null:this.world.layoutHaloForPointerId(v),F=new (Jf.keyLikeEvents.includes(a)?Jf.KeyEvent:Jf.Event)(a,b,this,l,y,A,E),H=[F],I=[];switch(a){case "keydown":g.pressedKeys[F.key]=!0;break;
case "keyup":"Meta"===F.key?g.pressedKeys={}:delete g.pressedKeys[F.key];break;case "click":H=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),e).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),e).events;H=H.concat(a);break;case "pointerdown":F.onDispatch(function(){m.focusMorph(e);g.clickedOnMorph=e;g.clickedOnPosition=F.position;g.downTimeStamp=b.timeStamp;var M=!1,N=0;if(g.prevClick){N=g.prevClick;M=N.clickedOnMorph;var X=N.clickedAtTime;N=N.clickCount;X=Date.now()-
X;M=M===e&&X<Jf.config.repeatClickInterval}g.clickCount=M?N+1:1});break;case "pointerup":F.onAfterDispatch(function(){var M=g.clickedOnMorph,N=g.clickedOnPosition,X=g.clickCount,W=Date.now();g.prevClick={clickedOnMorph:M,clickedOnPosition:N,clickedAtTime:W,clickCount:X};g.clickedOnMorph=null;g.clickCount=0;M=b.timeStamp-g.downTimeStamp;N=g.clickedOnPosition.dist(F.position);X=Jf.config.longClick;W=X.minDur;var ea=X.maxDur;N<X.maxDist&&M>=W&&M<=ea&&(M=new Jf.Event("longclick",b,m,l,y,A,E),m.schedule(M))});
g.draggedMorph&&(H.push(Jf.dragEndEvent(b,this,e,g,y,A,E)),F.targetMorphs=[this.world]);y.carriesMorphs()&&(g.dropHoverTarget?(H.push(new Jf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],y,A,E)),e=g.dropHoverTarget,g.dropHoverTarget=null):e=y.findDropTarget(F.position,y.grabbedMorphs),y.isAncestorOf(e)&&(e=this.world),H.push(new Jf.Event("morphicdrop",b,this,[e],y,A,E)),F.targetMorphs=[this.world]);break;case "pointermove":y.carriesMorphs()?(F.targetMorphs=[this.world],a=y.findDropTarget(F.position,
y.grabbedMorphs)||this.world,g.dropHoverTarget===a?H.push(new Jf.Event("morphicdrophoverupdate",b,this,[a],y,A,E)):(g.dropHoverTarget&&H.push(new Jf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],y,A,E)),g.dropHoverTarget=a,H.push(new Jf.Event("morphicdrophoverin",b,this,[a],y,A,E)))):g.draggedMorph?(F.targetMorphs=[this.world],H.push(Jf.dragEvent(b,this,e,g,y,A,E))):g.clickedOnMorph&&g.clickedOnPosition&&g.clickedOnMorph.draggable&&!g.draggedMorph&&!y.carriesMorphs()&&(a=g.clickedOnPosition.dist(F.position),
r=g.clickedOnMorph,a>r.dragTriggerDistance&&(r.grabbable?H.push(new Jf.Event("grab",b,this,[r],y,A,E)):r.draggable&&H.push(Jf.dragStartEvent(b,this,r,g,y,A,E)),F.targetMorphs=[this.world]));break;case "pointerover":g.hover.unresolvedPointerOut&&(g.hover.unresolvedPointerOut=!1);a=[e].concat(e.ownerChain()).reverse();H=Jf.arr.withoutAll(g.hover.hoveredOverMorphs,a).map(function(M){return(new Jf.Event("hoverout",b,m,[M],y,A,E)).onDispatch(function(){return Jf.arr.remove(g.hover.hoveredOverMorphs,M)})});
a=Jf.arr.withoutAll(a,g.hover.hoveredOverMorphs).map(function(M){return(new Jf.Event("hoverin",b,m,[M],y,A,E)).onDispatch(function(){return Jf.arr.pushIfNotIncluded(g.hover.hoveredOverMorphs,M)})});H=H.concat(a);break;case "pointerout":H=[];g.hover.unresolvedPointerOut=!0;I.push(function(){if(g.hover.unresolvedPointerOut)return Promise.all(g.hover.hoveredOverMorphs.map(function(M){return m.schedule((new Jf.Event("hoverout",b,m,[M],y,A,E)).onAfterDispatch(function(){return Jf.arr.remove(g.hover.hoveredOverMorphs,
M)}))}))});r&&this.world.removeHandForPointerId(v);break;case "blur":H=[(new Jf.Event(a,b,this,[e],y,A,E)).onDispatch(function(){return g.focusedMorph=null})];break;case "focus":H=Jf.focusEvents(this,e);break;case "scroll":H=[(new Jf.Event(a,b,this,[e],y,A,E)).onDispatch(function(){if(!g.scroll.interactiveScrollInProgress){var M=Jf.promise.deferred(),N=M.promise,X=M.resolve;M="Firefox"==Jf.bowser.name?500:250;"Safari"==Jf.bowser.name&&(M=1E3);g.scroll.interactiveScrollInProgress=N;N.debounce=Jf.fun.debounce(M,
function(){g.scroll.interactiveScrollInProgress=null;X()})}g.scroll.interactiveScrollInProgress.debounce();N=b.target.documentElement||b.target;M=N.scrollLeft;var W=N.scrollTop,ea=e.scroll,Aa=ea.x;ea=ea.y;if("hidden"!=N.style.overflow&&Aa!==M||ea!==W)e.scroll=Jf.pt(M,W)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":e.isText?F.targetMorphs=[e]:H=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==
a&&"dragover"!==a||b.preventDefault()}return{events:H,later:I}}},{key:"schedule",value:function(b){var e=this;this.activations++;return Promise.resolve().then(function(){return e.dispatchEvent(b)}).then(function(){return e.activations--},function(m){e.activations--;throw m;})}},{key:"dispatchEvent",value:function(b,e){e=e||Jf.typeToMethodMap[b.type];if(!e)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(g){return g()});this.activations++;for(var m,
a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][e](b)}catch(g){m=Error("Error in event handler "+b.targetMorphs[a]+"."+e+": "+(g.stack||g)),m.originalError=g,"undefined"!==typeof this.world?this.world.logError(m):console.error(m)}if(m||b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(g){return g()});if(m)throw m;}},{key:"dispatchDOMEvent",value:function(b,e,m){var a=this,g=this.world,l=this.eventState,r=this.nodeMorphMap,v=b.type;l.timeOfLastActivity=this.timestampBase+
b.timeStamp;if(!e&&Jf.focusTargetingEvents.includes(v))e=l.focusedMorph||g;else if(!e){for(l=b.target;;){e=l.className||"";"string"!==typeof e&&"baseVal"in e&&(e=e.baseVal);if(e&&e.includes("Morph"))break;if(!(l=l.parentNode))return}e=r.get(l);if(!e){var y=l.id;(e=g.withAllSubmorphsDetect(function(A){return A.id===y}))&&r.set(l,e)}}e&&(b=this.processDOMEvent(b,e),r=b.events,b.later.map(function(A){a.activations++;return Jf.promise.delay(0).then(A).then(function(){return a.activations--},function(E){a.activations--;
throw E;})}),r.forEach(function(A){return a.dispatchEvent(A,m)}),g&&g.needsRerender()&&Jf.eventsCausingImmediateRender.has(v)&&g.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var e=[],m=0;m<arguments.length;++m)e[m-0]=arguments[m];m=this.emitter.document||this.emitter.ownerDocument;var a=[];e=$jscomp.makeIterator(e);for(var g=e.next();!g.done;g=e.next()){var l=g=g.value,r=l.target,v=l.position;l=l.type;if(Jf.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+
l+", no keyInputHelper installed!");g=Object.assign({},g,{target:this.keyInputHelper.textareaNode})}r||(r=v?this.world.morphsContainingPoint(v)[0]:this.world);r.isMorph&&(g=Object.assign({},g,{target:m.getElementById(r.id)}));g.position&&(r=Jf.cumulativeOffset(m.getElementById(this.world.id)),g.position=g.position.addXY(r.left,r.top));"scroll"===l&&("scrollLeft"in g||"scrollTop"in g)&&(g.target.scrollLeft=g.scrollLeft||0,g.target.scrollTop=g.scrollTop||0);g=new Jf.SimulatedDOMEvent(g);a.push(g);this.dispatchDOMEvent(g)}return a}},
{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,e){var m=this,a=[],g=this.eventState;g.clickedOnMorph=null;g.dropHoverTarget&&(a.push(new Jf.Event("morphicdrophoverout",e.domEvt,this,[g.dropHoverTarget],b,null,null)),g.dropHoverTarget=null);a.forEach(function(l){return m.dispatchEvent(l)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],k,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7065,end:29482})}(void 0),$ka=J6=Jf.EventDispatcher;Jf.default=J6;var hm=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");hm.defaultDOMEnv=
bk;hm.Renderer=xM;hm.FontMetric=Xka;hm.ChangeManager=yM;hm.UndoManager=aH;hm.EventDispatcher=$ka;hm.subscribe=Ao;hm.unsubscribe=qC;var Fs=Ba("a_",function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),n=k.hasOwnProperty("MorphicEnv")&&"function"===typeof k.MorphicEnv?k.MorphicEnv:k.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){var e=this;b=void 0===b?hm.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=new hm.ChangeManager;this.undoManager=new hm.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(m){e._waitForDOMEnv=null;e.initWithDOMEnv(m);e.initialized=
!0}).catch(function(m){return console.error("Error initializing MorphicEnv with dom env: "+m.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=hm.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},
{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;
return Promise.resolve()}},{key:"setWorld",value:function(b){var e=this;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return e.setWorld(b)}):this.setWorldRenderedOn(b,this.domEnv.document.body)}},{key:"setWorldRenderedOn",value:function(b,e,m){var a=this;m=void 0===m?null:m;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,e,m)});this.deleteHistory();this.uninstallWorldRelated();
this.world=b;this.renderer=new hm.Renderer(b,e,this.domEnv);this.renderer.domNode=m;this.eventDispatcher=(new hm.EventDispatcher(this.domEnv.window,b)).install(e);b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var e=this.systemChangeHandlers={};e["lively.modules/moduleloaded"]=[hm.subscribe("lively.modules/moduleloaded",
function(m){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(m)})})];e["lively.modules/modulechanged"]=[hm.subscribe("lively.modules/modulechanged",function(m){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(m)})})];e["lively.partsbin/partpublished"]=[hm.subscribe("lively.partsbin/partpublished",function(m){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(m)})})];e["lively.user/userchanged"]=
[hm.subscribe("lively.user/userchanged",function(m){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(m)})})]}}},{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(e){return b[e].forEach(function(m){return hm.unsubscribe(e,m)})}))}},{key:"getTargetsFor",value:function(b){var e=this.world,m=[];if(!e||!e.submorphs)return m;"function"===typeof e[b]&&m.push(e);e=$jscomp.makeIterator(e.submorphs);
for(var a=e.next();!a.done;a=e.next())a=a.value,"function"===typeof a[b]&&m.push(a),a.isWindow&&a.targetMorph&&"function"===typeof a.targetMorph[b]&&m.push(a.targetMorph);return m}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(e){return e.world()})})}},{key:"deleteHistory",value:function(){var b=this.changeManager,e=this.world,m=this.fontMetric;b&&(b.changes.length=0);e&&e.withAllSubmorphsDo(function(a){return a.undoManager&&
a.undoManager.reset()});m&&m.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,e=this.world,m=0,a=0;e&&e.withAllSubmorphsDo(function(g){g.undoManager&&(m++,a+=g.undoManager.undos.length+g.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+m+" morphs with undos\n"+a+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var b=this,e=this.whenRenderedRequesters,m=0,a=$jscomp.makeIterator(e),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);
g=l.next().value;var r=l=l.next().value,v=r.maxAttempts,y=r.resolve;r=r.reject;g._dirty||g._rendering?++l.currentAttempt>v?(e.delete(g),r(Error("Failed to wait for whenRendered of "+g+" (tried "+v+"x)"))):m++:(e.delete(g),y(g))}this.whenRenderedTickingProcess=m?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(b,e){var m=this;e=void 0===e?50:e;var a=this.whenRenderedRequesters,g=this.whenRenderedTickingProcess,l=a.get(b);
if(!l){var r,v;l=new Promise(function(y,A){r=y;v=A});a.set(b,l={maxAttempts:e,currentAttempt:0,resolve:r,reject:v,promise:l})}g||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return m.updateWhenRenderedRequests()}));return l.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(e){console.error("Error uninstalling MorphicEnv: "+(e.stack||
e))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);return b[b.length-1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],k,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:405,end:8274})}(void 0));hm.MorphicEnv=Fs;hm.MorphicEnv=Fs;hm.MorphicEnv=Fs;var ala=Object.freeze({__proto__:null,MorphicEnv:Fs}),Tw=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Tw.printArg=function(f){return Tw.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Tw.obj=Ag;Tw.arr=eg;Tw.promise=ph;var K6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=k.hasOwnProperty("CommandHandler")&&"function"===
typeof k.CommandHandler?k.CommandHandler:k.CommandHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(b){var e=b.target.string,m=b.args,a=b.count,g=b.evt,l=b.keyCombo;return'"'+b.name+'" '+(g?g+" ":"")+(l?l+" ":"")+(m?Tw.printArg(m):"")+("number"===typeof a?" x"+a:"")+" "+e}},{key:"lookupCommand",value:function(b,e){var m;if(!b)return{};"string"===typeof b&&(m=b);"string"===typeof b.command&&(m=b.command);if(b.exec){var a=b;m=a.name}a||(a=e.commands.find(function(g){return g.name===m}));return{name:m,command:a}}},{key:"exec",value:function(b,e,m,a,g){var l=this,
r=this.lookupCommand(b,e)||{},v=r.name,y=r.command;if(!y)return console.warn("Cannot find command "+(v||b)),null;if(v){if(g){var A=g.type;if(g.isKeyEvent)var E=g.keyCombo}this.addToHistory({name:v,target:{string:String(e),id:e.id},args:m,count:a,time:Date.now(),evt:A,keyCombo:E})}var F=e.world();"string"===typeof y.progressIndicator&&(this.progressIndicator=F.execCommand("open loading indicator",y.progressIndicator));if("function"===typeof y.exec)try{var H=y.exec(e,m,y.handlesCount?a:void 0,g)}catch(I){H=
I,b="Error in interactive command "+v+": "+(I.stack||I),F?F.logError(b):console.error(b)}else console.error("command "+v+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();H&&"function"===typeof H.catch?(H.catch(function(I){var M="Error in interactive command "+v+": "+I+"\n"+(I.stack||I);F?F.logError(M):console.error(M);throw I;}),this.progressIndicator&&Tw.promise.finally(H,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
H&&"number"===typeof a&&1<a&&!y.handlesCount&&(H="function"===typeof H.then?H.then(function(){return l.exec(y,e,m,a-1,g,null)}):this.exec(y,e,m,a-1,g,null));return H}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],k,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:194,end:3656})}(void 0),bla=K6=Tw.CommandHandler;Tw.default=K6;var Pg=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Pg.ensureSpaces=function(f){return f.length?f:" "};Pg.invokeKeyHandlers=function(f,k,n){n=void 0===n?!1:n;var b=k=Pg.Keys.canonicalizeEvent(k),e=b.key,m=b.data,a,g=!1,l=f.keyhandlers,r=k.keyInputState||{};b=b.keyCombo.startsWith("input-");var v=!1,y=r.count,A=r.keyChain||"",E=!1;if(!l||n&&b)return!1;for(n=l.length;n--;)if((a=l[n].eventCommandLookup(f,
k))&&a.command){E=a;a=E.command;var F=E.args,H=E.passEvent,I=E.count;v=E.keyChain;var M=E.onlyWhenFocused;E=!0;y=I;A=v;v="null"===a;if(M&&(M=f.world())&&M.focusedMorph&&M.focusedMorph!==f)continue;g=v?!1:f.execCommand(a,F,I,k);!g||b&&"insertstring"===a||H||"function"!==typeof k.stop||k.stop();if(g||v)break}g||v||!b||!f.onTextInput||A||(g=f.execCommand("insertstring",{string:m||e,undoGroup:Pg.config.text.undoGroupDelay},r.count,k));if(E)if("function"===typeof k.onAfterDispatch)k.onAfterDispatch(function(){r.count=
g?void 0:y;r.keyChain=g?"":A});else r.count=g?void 0:y,r.keyChain=g?"":A;return g&&!v};Pg.simulateKeys=function(f,k,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&(b=1===k.length?[k]:k.split(/ /g).map(Pg.ensureSpaces),e=$jscomp.makeIterator(b),m=e.next());if(3!=g.nextAddress){if(m.done)return g.jumpTo(0);a=m.value;return g.yield(Pg.simulateKey(f,a,n),3)}m=e.next();return g.jumpTo(2)})};Pg.simulateKey=function(f,
k,n){return Pg.invokeKeyHandlers(f,Object.assign({},Pg.Keys.keyComboToEventSpec(k),{keyInputState:n}))};Pg.bowserOS=function(){return Pg.bowser.mac?"mac":Pg.bowser.windows?"windows":Pg.bowser.windowsphone?"windowsphone":Pg.bowser.linux?"linux":Pg.bowser.chromeos?"chromeos":Pg.bowser.android?"android":Pg.bowser.ios?"ios":Pg.bowser.blackberry?"blackberry":Pg.bowser.firefoxos?"firefoxos":Pg.bowser.webos?"webos":Pg.bowser.bada?"bada":Pg.bowser.tizen?"tizen":Pg.bowser.sailfish?"sailfish":"unknown"};Pg.findKeysForPlatform=
Jb;Pg.Keys=hU;Pg.bowser=Ms;Pg.config=Cn;Pg.arr=eg;Pg.findKeysForPlatform=Jb;Pg.findKeysForPlatform=Jb;Pg.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var lU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=k.hasOwnProperty("KeyHandler")&&
"function"===typeof k.KeyHandler?k.KeyHandler:k.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=b=void 0===b?Pg.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,e){return this.lookup(e.keyCombo,e.keyInputState)}},{key:"lookup",value:function(b,e){var m=this;e=void 0===e?{keyChain:void 0,
count:void 0}:e;b=Pg.Keys.canonicalizeKeyCombo(b);var a=e.keyChain||"";e=e.count;if(!a&&b.startsWith("Ctrl-")){var g=b.match(/^Ctrl-([0-9]+)/);if(g)return{command:"null",count:parseInt(("number"===typeof e?e:"")+g[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}g=[b];if(!r&&b.startsWith("input-")){r=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toUpperCase()});var l=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toLowerCase()});g.push(r,l)}var r=g.map(function(v){return m.keyBindings[v]})[0];
a&&(g=g.find(function(v){return m.keyBindings[a+" "+v]}))&&(a+=" "+g,r=this.keyBindings[a]||r);if(r&&"chainKeys"===r)return a=a||b,b={command:"null",keyChain:a},void 0!==e&&(b.count=e),b;if(r)return b="object"===typeof r?Object.assign({},r):{command:r},void 0!==e&&(b.count=e),b}},{key:"bindKey",value:function(b,e){var m=this;"object"===typeof b&&b&&!Array.isArray(b)&&(b=Pg.findKeysForPlatform(b,this.platform));if(b){if("function"===typeof e)return this.addCommand({exec:e,bindKey:b,name:e.name||b});
(Array.isArray(b)?b:b.includes("|")?b.split("|"):[b]).forEach(function(a){var g="";if(-1!=a.indexOf(" ")){var l=a.split(/\s+/);a=l.pop();l.forEach(function(r){r=Pg.Keys.canonicalizeKeyCombo(r);g+=(g?" ":"")+r;m.addCommandToBinding(g,"chainKeys")});g+=" "}m.addCommandToBinding(g+Pg.Keys.canonicalizeKeyCombo(a),e)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,e=Object.keys(this.keyBindings),m=e.filter(function(a){return"chainKeys"===
b.keyBindings[a]});m=Pg.arr.sortBy(m,function(a){return a.length}).reverse();m.forEach(function(a){e.some(function(g){return a!==g&&g.startsWith(a)})||(delete b.keyBindings[a],Pg.arr.remove(e,a),Pg.arr.remove(m,a))})}},{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,e){var m=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=e&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete m.keyBindings[a]});
e?this.keyBindings[b]=e:delete this.keyBindings[b];"chainKeys"!==e&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(b,e,m){return Pg.invokeKeyHandlers(b,e,void 0===m?!1:m)}},{key:"simulateKeys",value:function(b,e,m){return Pg.simulateKeys(b,e,m)}},{key:"withBindings",value:function(b,e){var m=new this(e);b.forEach(function(a){return m.bindKey(a.keys,a.command)});return m}},{key:"prettyCombo",value:function(b){var e=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[b]?e[b]:e[b]=b.replace(Pg.regexps.meta,"\u2318").replace(Pg.regexps.alt,"\u2325").replace(Pg.regexps.ctrl,"\u2303").replace(Pg.regexps.tab,"\u21e5").replace(Pg.regexps.enter,"\u23ce").replace(Pg.regexps.shift,"\u21e7").replace(Pg.regexps.backspace,"\u232b").replace(Pg.regexps.delete,"\u2326").replace(Pg.regexps.left,"\u2192").replace(Pg.regexps.right,"\u2190").replace(Pg.regexps.up,"\u2191").replace(Pg.regexps.down,"\u2193").replace(Pg.regexps.keySpacer,
"$1").replace(Pg.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,e,m){function a(v){if(r[v.id])return r[v.id];var y=l[v.id]||(l[v.id]=v.keyCommandMap);return r[v.id]=Pg.arr.groupBy(Object.keys(y),function(A){return y[A].name})}var g=this;m=void 0===m?!0:m;var l={},r={};return((void 0===e?0:e)?b.commandsIncludingOwners:b.commands.map(function(v){return{command:v,target:b}})).map(function(v){var y=v.target;v=v.command;var A=a(y)[v.name];return{keys:A,target:y,command:v,
prettyKeys:A&&m?A.map(function(E){return g.prettyCombo(E)}):null}})}}],k,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:12969})}(void 0);lU=Pg.KeyHandler;var mU=Ba("ab",lU);Pg.default=lU;var Iy=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),L6=function(f){var k=
lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("Script")&&"function"===typeof k.Script?k.Script:k.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,e,m){b.props.suspended.value=
!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout=
"setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Script"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:21,end:1376})}(void 0),nU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("TargetScript")&&"function"===typeof k.TargetScript?k.TargetScript:k.TargetScript=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){cc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=b;this.selector=e;this.args=m||[]}},{key:"execute",value:function(){this.target.isMorph&&!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&
this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(Iy.Script),M6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("FunctionScript")&&"function"===typeof k.FunctionScript?k.FunctionScript:k.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){cc._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this);this.callback=b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(Iy.Script);Iy.Script=L6;Iy.Script=L6;Iy.TargetScript=nU;Iy.TargetScript=nU;Iy.FunctionScript=M6;Iy.FunctionScript=M6;var uq=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");uq.install=xb;uq.remove=wc;uq.isInstalled=Nc;uq.arr=eg;uq.fun=Jn;uq.install=xb;uq.install=xb;uq.remove=wc;uq.remove=wc;uq.isInstalled=Nc;uq.isInstalled=
Nc;var DM=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");DM.classHolder={};var Uw=DM.classHolder;DM.classHolder=Uw;DM.classHolder=Uw;var vw=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");vw.computeRequireMap=$b;vw.graph=wu;vw.arr=eg;vw.obj=Ag;vw.loadedModules=gJ;vw.computeRequireMap=$b;vw.computeRequireMap=$b;var dp=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");dp.scheduleModuleExportsChange=cd;dp.runScheduledExportChanges=
Cd;dp.clearPendingModuleExportChanges=function(f,k){delete f.get("@lively-env").pendingExportChanges[k]};dp.updateModuleExports=function(f,k,n){var b=f.debug;dp.module(f,k).updateRecord(function(e){var m=[],a=[];Object.keys(n).forEach(function(E){var F=n[E];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",k,E,String(F).slice(0,30).replace(/\n/g,"")+"...");var H=!(E in e.exports);H&&(e.__lively_modules__.evalOnlyExport[E]=!0);e.exports[E]=F;H?m.push(E):a.push(E)});if(m.length){var g=
f.get(k);Object.isFrozen(g)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",k),f.set(k,f.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",k),m.forEach(function(E){Object.defineProperty(g,E,{configurable:!1,enumerable:!0,
get:function(){return e.exports[E]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,k);for(var l=0,r=e.importers.length;l<r;l++){var v=e.importers[l];if(!v.locked){var y;if(v.dependencies.some(function(E,F){y=F;return E&&E.name===e.name})){if(b){var A=dp.module(f,v.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+A["package"]().name+
"/"+A.pathInPackage())}dp.module(f,v.name).evaluationStart();v.setters[y](e.exports);dp.module(f,v.name).evaluationEnd()}}}}})};dp.module=Yg;dp.scheduleModuleExportsChange=cd;dp.scheduleModuleExportsChange=cd;dp.runScheduledExportChanges=Cd;dp.runScheduledExportChanges=Cd;var Ck=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");Ck.moduleSourceChange=ie;Ck.moduleSourceChangeEsm=function(f,k,n,b){var e,m,a,g,l,r,v,y,A,E,F,H,I,M,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:return e=
f.debug,m={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"esm"}},X.yield(Ck.instrumentSourceOfEsmModuleLoad(f,m),2);case 2:a=X.yieldResult,g=function(W,ea){return Ck.scheduleModuleExportsChange(f,m.name,W,ea,!0)},l=a.declare(g),e&&console.log("[lively.vm es6] sourceChange of %s with deps",m.name,a.localDeps),r=[],v=$jscomp.makeIterator(a.localDeps),y=v.next();case 3:if(y.done){X.jumpTo(5);break}A=y.value;return X.yield(f.normalize(A,m.name),6);case 6:return E=
X.yieldResult,F=Ck.classHolder.module(f,E),X.yield(F.load(),7);case 7:H=X.yieldResult;r.push({name:A,fullname:E,module:F,exports:H});y=v.next();X.jumpTo(3);break;case 5:if(I=f.loads&&f.loads[m.name])I.deps=r.map(function(W){return W.name}),I.depMap=r.reduce(function(W,ea){W[ea.name]=ea.fullname;return W},{}),I.metadata&&I.metadata.entry&&(I.metadata.entry.deps=I.deps,I.metadata.entry.normalizedDeps=r.map(function(W){return W.fullname}),I.metadata.entry.declare=a.declare);M=Ck.classHolder.module(f,
m.name);N=M.record();r.forEach(function(W,ea){return M.addDependencyToModuleRecord(W.module,l.setters[ea])});N&&(N.execute=l.execute);r.forEach(function(W,ea){return l.setters[ea](W.exports)});return X.return(l.execute())}})};Ck.moduleSourceChangeGlobal=function(f,k,n,b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"global"}},f.get(k)?g.jumpTo(2):g.yield(f["import"](k),
2);if(4!=g.nextAddress)return g.yield(Ck.instrumentSourceOfGlobalModuleLoad(f,e),4);m=g.yieldResult;e.source=m.translated;a=Ck.doInstantiateGlobalModule(f,e);f.delete(k);f.set(a.name,a.esModule);return g.return(a.module)})};Ck.doInstantiateGlobalModule=function(f,k){var n=Ck.__createEntry();n.name=k.name;n.esmExports=!0;k.metadata.entry=n;n.deps=[];for(var b in k.metadata.globals){var e=k.metadata.globals[b];e&&n.deps.push(e)}n.execute=function(m,a,g){(a=(a=Ck.classHolder.module(f,g.id).metadata())&&
a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(v){try{delete f.global[v]}catch(y){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+v+'"]')}});if(k.metadata.globals){var l={};for(var r in k.metadata.globals)k.metadata.globals[r]&&(l[r]=m(k.metadata.globals[r]))}if(m=k.metadata.exports)k.source+='\nSystem.global["'+m+'"] = '+m+";";g=f.get("@@global-helpers").prepareGlobal(g.id,m,l);Ck.__evaluateGlobalLoadSource(f,k);return g()};return Ck.runExecuteOfGlobalModule(f,
n)};Ck.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};Ck.__evaluateGlobalLoadSource=function(f,k){function n(){0==--e&&(m.System=m.SystemJS=b)}var b,e=0,m=f.global;return function(a){try{0==e++&&(b=m.System),m.System=m.SystemJS=this,(0,eval)(a.source),n()}catch(g){throw n(),Error("Error evaluating "+a.address+":\n"+g.stack);
}}.call(f,k)};Ck.runExecuteOfGlobalModule=function(f,k){var n={},b=k.module={exports:n,id:k.name};k.evaluated=!0;if(n=k.execute.call(f.global,function(e){var m=k.deps.find(function(a){return a===e});if(m=m&&f.get(k.normalizedDeps[k.deps.indexOf(m)])||f.get(f.decanonicalize(e,k.name)))return m;throw Error("Module "+e+" not declared as a dependency of "+k.name);},n,b))b.exports=n;n=b.exports;b=f.get("@system-env").constructor;k.esModule=n&&(n.__esModule||n instanceof b)?n:k.esmExports&&n!==f.global?
f.newModule(n):{"default":n};return k};Ck.arr=eg;Ck.emit=gs;Ck.instrumentSourceOfEsmModuleLoad=st;Ck.instrumentSourceOfGlobalModuleLoad=ns;Ck.scheduleModuleExportsChange=cd;Ck.classHolder=Uw;Ck.moduleSourceChange=ie;Ck.moduleSourceChange=ie;var Tn=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Tn.isJsFile=Ed;Tn.asDir=re;Tn.isURL=ef;Tn.urlResolve=af;Tn.string=ti;Tn.isJsFile=Ed;Tn.isJsFile=Ed;Tn.asDir=re;Tn.asDir=re;var bH=Tn.string.joinPath;Tn.join=bH;Tn.join=bH;Tn.join=bH;
Tn.isURL=ef;Tn.isURL=ef;Tn.urlResolve=af;Tn.urlResolve=af;var Rs=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");Rs.arr=eg;Rs.obj=Ag;Rs.isURL=ef;Rs.installHook=xb;Rs.isHookInstalled=Nc;var zv=function(f){this.pkg=f};zv.prototype.applyConfig=function(f){var k=this.System,n=this.packageURL,b=this.pkg;f=Rs.obj.deepMerge(b.config,f);var e=f.name||n.split("/").slice(-1)[0],m=f.version,a=f.systemjs||{},g=f.lively,l=f.main||"index.js",r={},v={};k.config({map:(r[e]=n,r),
packages:(v[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),v)});k.packages[n].configured=!0;k=k.getConfig().packages[n]||{};k.map||(k.map={});a&&(g&&g.main?l=g.main:a.main&&(l=a.main),this.applySystemJSConfig(a));l.match(/\.[^\/\.]+/)||(l+=".js");k.main=l;b.version=m;b.config=f;b._name=e;b.mergeWithConfig(k);return g?this.applyLivelyConfig(g):{subPackages:[]}};zv.prototype.applySystemJSConfig=function(f){var k=this.System;f.packageConfigPaths&&k.config({packageConfigPaths:Rs.arr.uniq(k.packageConfigPaths.concat(f.packageConfigPaths))});
f.packages&&k.config({packages:f.packages});f.globalmap&&k.config({map:f.globalmap});f.babelOptions&&k.config({babelOptions:f.babelOptions});f.meta&&k.config({meta:f.meta})};zv.prototype.applyLivelyConfig=function(f){this.applyLivelyConfigMeta(f);this.applyLivelyConfigHooks(f);this.applyLivelyConfigBundles(f)};zv.prototype.applyLivelyConfigHooks=function(f){var k=this;(f.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&Rs.isHookInstalled(k.System,n.target,b.name)||Rs.installHook(k.System,
n.target,b)}catch(e){console.error("Error installing hook for %s: %s",k.packageURL,e,n)}})};zv.prototype.applyLivelyConfigBundles=function(f){var k=this;if(!f.bundles)return Promise.resolve();var n=Object.keys(f.bundles).reduce(function(b,e){var m=k.packageURL+"/"+e;e=f.bundles[e].map(function(a){return k.System.decanonicalize(a,k.packageURL+"/")});b[m]=e;return b},{});this.System.config({bundles:n});return Promise.resolve()};zv.prototype.applyLivelyConfigMeta=function(f){if(f.meta){var k={},n=this.System.getConfig().packages[this.packageURL]||
{},b={meta:{},packages:(k[this.packageURL]=n,k)};Object.keys(f.meta).forEach(function(e){var m=f.meta[e];Rs.isURL(e)?b.meta[e]=m:(n.meta||(n.meta={}),n.meta[e]=m)});this.System.config(b)}};$jscomp.global.Object.defineProperties(zv.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});Rs.PackageConfiguration=zv;Rs.default=zv;var sf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");
sf.normalizePackageURL=function(f,k,n){n=void 0===n?[]:n;if(n.some(function(b){return b===k}))return k;f=f.decanonicalize(k.replace(/[\/]+$/,"")+"/");if(!sf.isURL(f))throw Error("Strange package URL: "+f+" is not a valid URL");f.match(/\.js/)&&(f=-1<f.indexOf(f+".js")?f.replace(/\.js$/,""):f.split("/").slice(0,-1).join("/"));f.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+f);return String(f).replace(/\/$/,"")};sf.lookupPackage=qe;sf.ensurePackage=
vf;sf.getPackage=Oe;sf.applyConfig=Ne;sf.importPackage=hf;sf.removePackage=Sf;sf.reloadPackage=If;sf.registerPackage=bg;sf.getPackageSpecs=qh;sf.arr=eg;sf.promise=ph;sf.obj=Ag;sf.emit=gs;sf.module=Yg;sf.resource=Tj;sf.PackageConfiguration=zv;sf.isURL=ef;sf.join=bH;sf.classHolder=Uw;var Gj=function(f,k,n,b,e){e=void 0===e?{}:e;this.System=f;this.url=k;this.registerProcess=null;this.map={};this.setConfig(e)};Gj.allPackages=function(f){return sf.obj.values(sf.classHolder.PackageRegistry.ofSystem(f).byURL)};
Gj.allPackageURLs=function(f){return sf.classHolder.PackageRegistry.ofSystem(f).allPackageURLs()};Gj.forModule=function(f,k){return this.forModuleId(f,k.id)};Gj.forModuleId=function(f,k){return(k=sf.classHolder.ModulePackageMapping.forSystem(f).getPackageURLForModuleId(k))?sf.getPackage(f,k,!0):null};Gj.fromJSON=function(f,k){return(new sf.Package(f)).fromJSON(k)};Gj.prototype.setConfig=function(f){this._name=f.name;this.version=f.version;this.dependencies=f.dependencies||{};this.devDependencies=
f.devDependencies||{};this.main=f.main||"index.js";this.systemjs=f.systemjs;this.lively=f.lively};Gj.prototype.toJSON=function(){var f=this.System,k=sf.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));k.url.startsWith(f.baseURL)&&(k.url=k.url.slice(f.baseURL.length).replace(/^\//,""));return k};Gj.prototype.fromJSON=function(f){var k=this.System;this.url=f.url;this._name=f._name;this.version=f.version;this.map=f.map||{};this.main=f.main;this.dependencies=
f.dependencies||{};this.devDependencies=f.devDependencies||{};this.systemjs=f.systemjs;this.lively=f.lively;sf.isURL(this.url)||(this.url=sf.join(k.baseURL,this.url));this.registerWithConfig();return this};Gj.prototype.asSpec=function(){return Object.assign({},sf.obj.select(this,"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(f){return{name:f.id,deps:f.directRequirements().map(function(k){return k.id})}})})};Gj.prototype.path=function(){var f=this.System.baseURL;
return 0===this.url.indexOf(f)?this.url.slice(f.length):this.url};Gj.prototype.modules=function(){var f=this.url,k=this.System;return sf.classHolder.ModulePackageMapping.forSystem(k).getModuleIdsForPackageURL(f).map(function(n){return sf.module(k,n)})};Gj.prototype.resources=function(f,k){k=void 0===k?[".git","node_modules",".module_cache","lively.next-node_modules"]:k;var n=this,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return b=n,e=b.System,
m=b.url,a=sf.Package.allPackageURLs(e),g=a.filter(function(A){return A!==m&&!m.startsWith(A)}),y.yield(sf.resource(m).dirList("infinity",{exclude:k}),2);l=y.yieldResult;r=l.filter(function(A){return!A.isDirectory()&&!g.some(function(E){return A.url.startsWith(E)})}).map(function(A){return A.url});v=sf.arr.pluck(n.modules(),"id");f&&(r=r.filter(f));return y.return(r.map(function(A){var E=A.replace(m,"").replace(/^\//,"");return{isLoaded:v.includes(A),url:A,nameInPackage:E,package:n}}))})};Gj.prototype.hasResource=
function(f){var k=this.url;return(f.startsWith(k)?sf.resource(f):sf.resource(k).join(f)).exists()};Gj.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};Gj.prototype.mergeWithConfig=function(f){var k=f=Object.assign({},f),n=k.name;k=k.map;n&&(delete f.name,this._name=n);k&&(delete f.map,Object.assign(this.map,k));Object.assign(this,f);return this};Gj.prototype.addMapping=function(f,k){this.map[f]=k;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[f]=k,
n)},b)})};Gj.prototype.tryToLoadPackageConfig=function(){var f=this,k,n,b,e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:k=f;n=k.System;b=k.url;e=b+"/package.json";m={};a={};n.config({meta:(m[e]={format:"json"},m),packages:(a[b]={meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",e);A.setCatchFinallyBlocks(2);if(g=n.get(e)){A.jumpTo(4);break}return A.yield(n.import(e),5);case 5:g=
A.yieldResult;case 4:return l=g,r=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),sf.arr.pushIfNotIncluded(r,e),n.config({packageConfigPaths:r}),A.return(l);case 2:return v=A.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",e,v),delete n.meta[e],y=b.split("/").slice(-1)[0],A.return({name:y})}})};Gj.prototype.import=function(){var f=this,k,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(f.register(),
2);case 2:return k=f,n=k.url,b=k.System,e=sf,m=e.module,a=b,r.yield(b.normalize(n),3);case 3:return g=m.call(e,a,r.yieldResult),r.yield(b.import(g.id),4);case 4:return l=r.yieldResult,r.yield(sf.promise.waitFor(1E3,function(){return g.isLoaded()}),5);case 5:return r.return(l)}})};Gj.prototype.isRegistering=function(){return!!this.registerProcess};Gj.prototype.register=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(k.isRegistering())return r.return(k.registerProcess.promise);
n=k;b=n.System;e=n.url;k.registerProcess=sf.promise.deferred();m=k.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);r.setCatchFinallyBlocks(2,3);if(a=f){r.jumpTo(5);break}return r.yield(k.tryToLoadPackageConfig(),6);case 6:a=r.yieldResult;case 5:g=a,k.registerWithConfig(g),k.registerProcess.resolve(g);case 3:r.enterFinallyBlock();delete k.registerProcess;r.leaveFinallyBlock(4);break;case 2:throw l=r.enterCatchBlock(),k.registerProcess.reject(l),l;case 4:return r.return(m)}})};
Gj.prototype.updateConfig=function(f){f=Object.assign({},this.runtimeConfig,{},f);var k=this.name,n=this.version,b=f,e=b.name;b=b.version;(new sf.PackageConfiguration(this)).applyConfig(f);if(k!==f.name||n!==f.version)console.log("[lively.modules] Updating registry "+k+"@"+n+" => "+e+"@"+b),sf.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,k,n,e,b)};Gj.prototype.registerWithConfig=function(f){f=void 0===f?this.runtimeConfig:f;var k=this.System,n=this.url,b=(new sf.PackageConfiguration(this)).applyConfig(f),
e=sf.join(n,"package.json");k.get(e)||k.set(e,k.newModule(Object.assign({},f,{default:f})));sf.emit("lively.modules/packageregistered",{"package":n},Date.now(),k);return b};Gj.prototype.remove=function(f){f=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},f);var k=this.System,n=this.url;n=n.replace(/\/$/,"");f.unloadModules&&this.modules().forEach(function(g){return g.unload(f)});sf.classHolder.PackageRegistry.ofSystem(k).removePackage(this);var b=k.getConfig(),e=n+"/package.json";k.delete(String(e));
sf.arr.remove(b.packageConfigPaths||[],e);var m={},a={};k.config({meta:(m[e]={},m),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});delete k.packages[n];sf.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),k)};Gj.prototype.reload=function(f){var k=this.url,n=sf.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(k);this.remove(f);f={};n.addPackageAt(k,b||"devPackageDirs",(f[k]=this,f));return this.import()};Gj.prototype.fork=function(f,k){var n=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k||(k=sf.resource(n.url).join("../"+f).withRelativePartsResolved().url),b.yield(n.changeAddress(k,f,!1),2)):b.return(b.yieldResult)})};Gj.prototype.rename=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=sf.resource(k.url).join("../"+f).withRelativePartsResolved().url,b.yield(k.changeAddress(n,f,!0),2)):b.return(b.yieldResult)})};Gj.prototype.changeAddress=
function(f,k,n){k=void 0===k?null:k;n=void 0===n?!0:n;var b=this,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:return f=f.replace(/\/?/,""),e=b,m=e.System,a=e.url,pa.yield(b.runtimeConfig,2);case 2:return g=pa.yieldResult,l=sf.resource(a).asDirectory(),r=new sf.Package(m,f),pa.yield(sf.resource(f).asDirectory(),3);case 3:return v=pa.yieldResult,g.name=k||b.name,y=sf.classHolder.PackageRegistry.ofSystem(m),
A=y.coversDirectory(a),sf.classHolder.ModulePackageMapping.forSystem(m).clearCache(),m.packages[a]&&(m.packages[f]=m.packages[a],n&&delete m.packages[a]),Object.assign(r,sf.obj.select(b,["_name","map","config"])),pa.yield(v.ensureExistance(),4);case 4:return pa.yield(b.resources(void 0,[]),5);case 5:E=pa.yieldResult.map(function(fa){return fa.url}),F=b.modules(),H=$jscomp.makeIterator(F),I=H.next();case 6:if(I.done){pa.jumpTo(8);break}M=I.value;N=v.join(M.pathInPackage()).url;return n?pa.yield(M.renameTo(N),
10):pa.yield(M.copyTo(N),10);case 10:X=E.indexOf(M.id);-1<X&&E.splice(X,1);I=H.next();pa.jumpTo(6);break;case 8:W=$jscomp.makeIterator(E),ea=W.next();case 13:if(ea.done){if(!n){pa.jumpTo(17);break}return pa.yield(b.remove({forgetEnv:!0,forgetDeps:!1}),18)}Aa=ea.value;Ka=sf.resource(Aa);K=Ka.relativePathFrom(l);return pa.yield(Ka.copyTo(v.join(K)),14);case 14:ea=W.next();pa.jumpTo(13);break;case 18:return pa.yield(l.remove(),17);case 17:if(!k){pa.jumpTo(20);break}r.name=k;r.config.name=k;aa=sf.resource(f).join("package.json");
pa.setCatchFinallyBlocks(21);return pa.yield(aa.exists(),23);case 23:if(!pa.yieldResult){pa.jumpTo(24);break}return pa.yield(aa.readJson(),25);case 25:T=pa.yieldResult;if(T.name!==b.name){pa.jumpTo(26);break}T.name=k;return pa.yield(aa.writeJson(T,!0),26);case 26:(U=m.get(aa.url))&&m.set(aa.url,m.newModule(Object.assign({},U,{name:k})));case 24:pa.leaveTryBlock(20);break;case 21:pa.enterCatchBlock();case 20:return A=A||"individualPackageDirs","individualPackageDirs"!==A&&"devPackageDirs"!==A||y._addPackageDir(f,
A,!0),y._addPackageWithConfig(r,g,f,A),y.resetByURL(),y._updateLatestPackages(),pa.return(r)}})};Gj.prototype.search=function(f,k){k=void 0===k?{}:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return k.includeUnloaded?m.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),m.jumpTo(2));2!=m.nextAddress&&(b=m.yieldResult.map(function(a){return sf.module(n.System,
a.url)}));e=b;return m.return(Promise.all(e.map(function(a){return a.search(f,k).catch(function(g){console.error("Error searching module "+a.name+":\n"+g.stack);return[]})})).then(function(a){return sf.arr.flatten(a,1)}))})};$jscomp.global.Object.defineProperties(Gj.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var f=this.System.get(this.url+"/package.json");return f&&f.name?f.name:sf.arr.last(this.url.replace(/[\/]+$/,
"").split("/"))},set:function(f){return this._name=f}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,get:function(){return this.url},set:function(f){return this.url=f}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var f=this.main,k=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};f&&(b.main=f);k&&(b.systemjs=
k);n&&(b.lively=n);return b}}});sf.Package=Gj;sf.ensurePackage=vf;sf.ensurePackage=vf;sf.importPackage=hf;sf.importPackage=hf;sf.removePackage=Sf;sf.removePackage=Sf;sf.reloadPackage=If;sf.reloadPackage=If;sf.registerPackage=bg;sf.registerPackage=bg;sf.getPackage=Oe;sf.getPackage=Oe;sf.lookupPackage=qe;sf.lookupPackage=qe;sf.applyConfig=Ne;sf.applyConfig=Ne;sf.getPackageSpecs=qh;sf.getPackageSpecs=qh;sf.Package=Gj;sf.Package=Gj;var Dd=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");
Dd.isFunctionNode=function(f){return"ArrowFunctionExpression"===f.type||"FunctionExpression"===f.type||"FunctionDeclaration"===f.type};Dd.ensureIdentifier=function(f){return f.replace(Dd.firstIdRe,"_").replace(Dd.trailingIdRe,"_")};Dd.constructorTemplate=function(f){return Dd.funcExpr({id:f?Dd.id(f):null},["__first_arg__"],Dd.ifStmt(Dd.binaryExpr(Dd.id("__first_arg__"),"&&",Dd.member("__first_arg__",Dd.funcCall(Dd.member("Symbol","for"),Dd.literal("lively-instance-restorer")),!0)),Dd.block(),Dd.block(Dd.exprStmt(Dd.funcCall(Dd.member(Dd.member("this",
Dd.funcCall(Dd.member("Symbol","for"),Dd.literal("lively-instance-initialize")),!0),"apply"),Dd.id("this"),Dd.id("arguments"))))))};Dd.replaceSuper=function(f,k,n,b){console.assert("Super"===f.type);(k=k.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+Dd.stringify(f)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?f:k&&"static"===k[Dd.methodKindSymbol]?
Dd.funcCall(Dd.member("Object","getPrototypeOf"),Dd.id(Dd.tempLivelyClassVar)):Dd.funcCall(Dd.member("Object","getPrototypeOf"),Dd.member(Dd.id(Dd.tempLivelyClassVar),"prototype"))};Dd.replaceSuperMethodCall=function(f,k,n,b){console.assert("CallExpression"===f.type);console.assert("Super"===f.callee.object.type);return Dd.funcCall.apply(Dd,[Dd.member(Dd.funcCall(Dd.member(b.functionNode,"_get"),Dd.replaceSuper(f.callee.object,k,n.concat(["callee","object"]),b),Dd.literal(f.callee.property.value||
f.callee.property.name),Dd.id("this")),"call"),Dd.id("this")].concat($jscomp.arrayFromIterable(f.arguments)))};Dd.replaceDirectSuperCall=function(f,k,n,b){console.assert("CallExpression"===f.type);console.assert("Super"===f.callee.type);return Dd.funcCall.apply(Dd,[Dd.member(Dd.funcCall(Dd.member(b.functionNode,"_get"),Dd.replaceSuper(f.callee,k,n.concat(["callee"]),b),Dd.funcCall(Dd.member("Symbol","for"),Dd.literal("lively-instance-initialize")),Dd.id("this")),"call"),Dd.id("this")].concat($jscomp.arrayFromIterable(f.arguments)))};
Dd.replaceSuperGetter=function(f,k,n,b){console.assert("MemberExpression"===f.type);console.assert("Super"===f.object.type);return Dd.funcCall(Dd.member(b.functionNode,"_get"),Dd.replaceSuper(f.object,k,n.concat(["object"]),b),Dd.literal(f.property.value||f.property.name),Dd.id("this"))};Dd.replaceSuperSetter=function(f,k,n,b){console.assert("AssignmentExpression"===f.type);console.assert("Super"===f.left.object.type);return Dd.funcCall(Dd.member(b.functionNode,"_set"),Dd.replaceSuper(f.left.object,
k,n.concat(["left","object"]),b),Dd.literal(f.left.property.value||f.left.property.name),f.right,Dd.id("this"))};Dd.replaceClass=function(f,k,n,b){console.assert("ClassDeclaration"===f.type||"ClassExpression"===f.type);var e=f.body.body,m=f.superClass;n=f.id;var a=f.type,g=f.start,l=f.end,r=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,v=Dd.id("undefined"),y=Dd.id("undefined"),A=n?n.name:"anonymous_class",E=b.evalId,F=b.sourceAccessorName;f=f["x-lively-object-meta"]||{start:g,end:l};e.length&&
(r=e.reduce(function(N,X){var W=X.key,ea=X.kind,Aa=X.value,Ka=X.static;"Literal"!==W.type&&"Identifier"!==W.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(W));if("method"===ea){ea={};X=Dd.id(A+"_"+Dd.ensureIdentifier(W.name||W.value||Dd.Path("property.name").get(W))+"_");Aa=["key",Dd.literal(W.name||W.value||Dd.Path("property.name").get(W)),"value",Object.assign({},Aa,(ea.id=X,ea[Dd.methodKindSymbol]=Ka?"static":"proto",ea))];var K=Dd.objectLiteral(Aa)}else"get"===
ea||"set"===ea?(X={},K=Dd.objectLiteral(["key",Dd.literal(W.name||W.value||Dd.Path("property.name").get(W)),ea,Object.assign({},Aa,(X.id=Dd.id(ea),X[Dd.methodKindSymbol]=Ka?"static":"proto",X))])):"constructor"===ea?(W={},Aa=["key",Dd.funcCall(Dd.member("Symbol","for"),Dd.literal("lively-instance-initialize")),"value",Object.assign({},Aa,(W.id=Dd.id(A+"_initialize_"),W[Dd.methodKindSymbol]="proto",W))],K=Dd.objectLiteral(Aa)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+
ea+", ignoring it, "+JSON.stringify(X));(Ka?N.clazz:N.inst).push(K);return N},{inst:[],clazz:r?[Dd.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+A+'"; } })').body[0].expression]:[]}),e=r.inst,r=r.clazz,e.length&&(v={type:"ArrayExpression",elements:e}),r.length&&(y={type:"ArrayExpression",elements:r}));e=b.scope;if(m&&b.currentModuleAccessor)if(b.classHolder===m.object){var H=m;var I=m.property.name}else{var M=e&&e.resolvedRefMap&&e.resolvedRefMap.get(m);M&&M.decl&&
e.decls&&e.decls.find(function(N){return $jscomp.makeIterator(N).next().value===M.decl})&&(H=m,I=m.name)}I=H?Dd.objectLiteral(["referencedAs",Dd.literal(I),"value",H]):m||Dd.id("undefined");H=n&&"ClassDeclaration"===a;m=["start",Dd.literal(f.start),"end",Dd.literal(f.end)];"undefined"!==typeof E&&m.push("evalId",Dd.literal(E));F&&m.push("moduleSource",Dd.nodes.id(F));E=Dd.objectLiteral(m);v=Dd.funcCall(Dd.funcExpr({},["superclass"],Dd.varDecl(Dd.tempLivelyClassHolderVar,k.classHolder),Dd.varDecl(Dd.tempLivelyClassVar,
H?{type:"ConditionalExpression",test:Dd.binaryExpr(Dd.funcCall(Dd.member(Dd.tempLivelyClassHolderVar,"hasOwnProperty"),Dd.literal(n.name)),"&&",Dd.binaryExpr({argument:Dd.member(Dd.tempLivelyClassHolderVar,n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",Dd.literal("function"))),consequent:Dd.member(Dd.tempLivelyClassHolderVar,n),alternate:Dd.assign(Dd.member(Dd.tempLivelyClassHolderVar,n),Dd.constructorTemplate(n.name))}:n?Dd.constructorTemplate(n.name):Dd.constructorTemplate(null)),
Dd.returnStmt(Dd.funcCall(b.functionNode,Dd.id(Dd.tempLivelyClassVar),Dd.id("superclass"),v,y,Dd.id(Dd.tempLivelyClassHolderVar),b.currentModuleAccessor||Dd.id("undefined"),E))),I);if("ClassExpression"===a)return v;a=v;b.declarationWrapper&&k.classHolder===b.classHolder&&(a=Dd.funcCall(b.declarationWrapper,Dd.literal(n.name),Dd.literal("class"),a,b.classHolder,E));a=Dd.varDecl(n,a,"var");a[Dd.isTransformedClassVarDeclSymbol]=!0;return a};Dd.splitExportDefaultWithClass=function(f,k,n,b){return f.declaration&&
f.declaration[Dd.isTransformedClassVarDeclSymbol]?[f.declaration,{declaration:f.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:f};Dd.classToFunctionTransform=mj;Dd.arr=eg;Dd.Path=$h;Dd.parse=Ri;Dd.stringify=tm;Dd.query=Nt;Dd.nodes=Qw;Dd.Visitor=He;var zr=Dd.nodes;Dd.assign=zr.assign;Dd.member=zr.member;Dd.id=zr.id;Dd.exprStmt=zr.exprStmt;Dd.funcCall=zr.funcCall;Dd.literal=zr.literal;Dd.objectLiteral=zr.objectLiteral;Dd.varDecl=zr.varDecl;Dd.funcExpr=zr.funcExpr;Dd.returnStmt=zr.returnStmt;
Dd.binaryExpr=zr.binaryExpr;Dd.ifStmt=zr.ifStmt;Dd.block=zr.block;Dd.firstIdRe=/^[^_a-z]/i;Dd.trailingIdRe=/[^_a-z0-9]/ig;Dd.isTransformedClassVarDeclSymbol=Symbol();Dd.methodKindSymbol=Symbol();Dd.tempLivelyClassVar="__lively_class__";Dd.tempLivelyClassHolderVar="__lively_classholder__";var EM=function(){return Dd.Visitor.apply(this,arguments)||this};$jscomp.inherits(EM,Dd.Visitor);EM.prototype.accept=function(f,k,n){Dd.isFunctionNode(f)&&(k=Object.assign({},k,{classHolder:Dd.objectLiteral([]),currentMethod:f[Dd.methodKindSymbol]?
f:k.currentMethod}));if("ClassExpression"===f.type||"ClassDeclaration"===f.type)f=Dd.replaceClass(f,k,n,k.options);"Super"===f.type&&(f=Dd.replaceSuper(f,k,n,k.options));"MemberExpression"===f.type&&f.object&&"Super"===f.object.type&&(f=Dd.replaceSuperGetter(f,k,n,k.options));"AssignmentExpression"===f.type&&"MemberExpression"===f.left.type&&"Super"===f.left.object.type&&(f=Dd.replaceSuperSetter(f,k,n,k.options));"CallExpression"===f.type&&"Super"===f.callee.type&&(f=Dd.replaceDirectSuperCall(f,k,
n,k.options));"CallExpression"===f.type&&f.callee.object&&"Super"===f.callee.object.type&&(f=Dd.replaceSuperMethodCall(f,k,n,k.options));f=Dd.Visitor.prototype.accept.call(this,f,k,n);return"ExportDefaultDeclaration"===f.type?Dd.splitExportDefaultWithClass(f,k,n,k.options):f};EM.run=function(f,k){var n=new this,b=k.classHolder||Dd.objectLiteral([]);return n.accept(f,{options:k,classHolder:b},[])};Dd.ClassReplaceVisitor=EM;Dd.classToFunctionTransform=mj;Dd.classToFunctionTransform=mj;var ND=lively.FreezerRuntime.recorderFor("lively.classes/index.js");
ND.runtime=LD;ND.classToFunctionTransform=mj;ND.runtime=LD;ND.runtime=LD;ND.classToFunctionTransform=mj;ND.classToFunctionTransform=mj;var cla=Object.freeze({__proto__:null,runtime:LD,classToFunctionTransform:mj}),ok=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");ok.arr=eg;ok.Path=$h;ok.fuzzyParse=ln;ok.query=Nt;ok.stringify=tm;ok.resource=Tj;var Rt=function(f,k,n,b,e,m,a){this.System=f;this.intoModuleId=k;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=
e.moduleId;this.importData=e;this.alias=m;this.parsed=a||ok.fuzzyParse(b)};Rt.run=function(f,k,n,b,e,m,a){return(new this(f,k,n,b,e,m,a)).run()};Rt.prototype.run=function(){var f=this.generateImportStatement(),k=f.standaloneImport,n=f.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,m=b.importsOfFromModule;b=b.importsOfVar;m=this.importsToBeReused(m,b,f);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:k,from:b[0].start,
to:b[0].end};if(m.length&&(f=this.modifyExistingImport(m,k)))return f;e=ok.arr.last(e);return this.insertNewImport(m,k,n,e?e.end:0)};Rt.prototype.importsToBeReused=function(f,k,n){n.isDefault&&(f=f.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return f};Rt.prototype.generateImportStatement=function(){var f=this.intoModuleId,k=this.fromModuleId,n=this.importData,b=this.intoPackage,e=this.alias,m="default"===n.exported;e=e?e:m?n.local:n.exported;
var a=!m&&n.exported!==e;b=b&&b.name;var g=k,l=n.packageName,r=n.pathInPackage;if(n.isMain)g=l;else if(b===l)try{g=ok.resource(k).relativePathFrom(ok.resource(f)),g.startsWith(".")||(g="./"+g)}catch(v){l&&"no group"!==l&&r&&(g=l+"/"+r)}else l&&"no group"!==l&&r&&(g=l+"/"+r);return{isDefault:m,standaloneImport:m?"import "+e+' from "'+g+'";':"import { "+n.exported+(a?" as "+e:"")+' } from "'+g+'";',importedVarName:e}};Rt.prototype.existingImportsOfFromModule=function(){var f=this.System,k=this.fromModuleId,
n=this.intoModuleId,b=this.importData,e=b.exported,m=b.local,a=this.alias,g="default"===e;b=this.parsed.body.filter(function(r){return"ImportDeclaration"===r.type});var l=g?a||m:a||e;m=b.filter(function(r){if(!r.source||"string"!==typeof r.source.value)return null;r=f.decanonicalize(r.source.value,n);return k===r});a=m.filter(function(r){return(r.specifiers||[]).some(function(v){return g?"ImportDefaultSpecifier"===v.type&&v.local.name===l:ok.Path("imported.name").get(v)===e&&ok.Path("local.name").get(v)===
l})});return{imports:b,importsOfFromModule:m,importsOfVar:a}};Rt.prototype.modifyExistingImport=function(f,k){f=ok.arr.flatmap(f,function(l){return l.specifiers||[]});if(!f.length)return null;f=$jscomp.makeIterator(ok.arr.partition(f,function(l){return"ImportDefaultSpecifier"===l.type}));var n=$jscomp.makeIterator(f.next().value).next().value,b=$jscomp.makeIterator(f.next().value).next().value;f=this.alias;var e=this.intoModuleSource,m=this.importData,a=m.exported;m=m.local;var g="default"===a;g?
console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");if(g){n=e.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;b=(f||m)+",";a=e.slice(0,n);e=e.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+e,generated:b,standaloneImport:k,importedVarName:f||m,from:n,to:n+b.length}}n=b?b.end:n.end;g=(m=f&&f!==a)?a+" as "+f:a;b=b?", "+g:", { "+g+" }";return{status:"modified",
newSource:""+e.slice(0,n)+b+e.slice(n),generated:b,standaloneImport:k,importedVarName:m?f:a,from:n,to:n+b.length}};Rt.prototype.insertNewImport=function(f,k,n,b){b=void 0===b?0:b;f&&f.length&&(b=ok.arr.last(f).end);var e=this.intoModuleSource;f=e.slice(0,b);e=e.slice(b);var m=k;f.length&&!f.endsWith("\n")&&(m="\n"+m);e.length&&!e.startsWith("\n")&&(m+="\n");return{status:"modified",newSource:f+m+e,generated:m,standaloneImport:k,importedVarName:n,from:b,to:b+m.length}};ok.ImportInjector=Rt;var FM=
function(){};FM.getGlobals=function(f,k){f=k||ok.fuzzyParse(f,{withComments:!0});return(f=f.comments?f.comments.find(function(n){return n.isBlock&&n.text.startsWith("global")}):null)?f.text.replace(/^global\s*/,"").split(",").map(function(n){return n.trim()}).filter(Boolean):[]};FM.run=function(f,k,n){n=n||ok.fuzzyParse(f,{withComments:!0});var b=(n=n.comments?n.comments.find(function(m){return m.isBlock&&m.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(m){return m.trim()}).filter(Boolean):
[],e=k.filter(function(m){return!b.includes(m)});if(!e.length)return{status:"not modified",newSource:f,generated:"",from:0,to:0};if(!n)return n="/*global "+e.join(",")+"*/\n",{status:"modified",newSource:n+f,generated:n,from:0,to:n.length};k=n.start+2+n.text.length;e=e.join(",");b.length?e=","+e:n.text.startsWith("global ")||(e=" "+e);n=k+e.length;return{status:"modified",newSource:f.slice(0,k)+e+f.slice(k),generated:e,from:k,to:n}};ok.GlobalInjector=FM;var cH=function(){};cH.removeImports=function(f,
k,n){n=n||ok.fuzzyParse(f);var b=ok.arr.flatmap(n.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(m){return{local:m.local,importStmt:e}}):[]}).filter(function(e){return k.some(function(m){return m.local===e.local.name})});n=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});f=ok.arr.uniq(b.map(function(e){var m=e.importStmt.specifiers.find(function(a){return e.local===a.local});ok.arr.remove(e.importStmt.specifiers,m);return e.importStmt})).slice().reverse().reduce(function(e,
m){var a=e.source;e=e.changes;var g=m.start,l=m.end,r=m.specifiers,v=a.slice(0,g),y=a.slice(l);a=a.slice(g,l);(m=r.length?ok.stringify(m):"")&&m.includes("\n")&&!a.includes("\n")&&(m=m.replace(/\s+/g," "));a=v+m+y;e=e.concat({replacement:m,start:g,end:l});return{source:a,changes:e}},{source:f,changes:[]});return Object.assign({},f,{removedImports:n})};cH.findUnusedImports=function(f){var k="string"===typeof f?ok.fuzzyParse(f):f;f=ok.arr.flatmap(k.body,function(e){return"ImportDeclaration"===e.type&&
e.specifiers.length?e.specifiers.map(function(m){return{local:m.local,from:e.source?e.source.value:"",importStmt:e}}):[]});var n=f.map(function(e){return e.local});k=ok.query.resolveReferences(ok.query.scopes(k));k=Array.from(k.resolvedRefMap.keys()).filter(function(e){return!n.includes(e)});var b=ok.arr.uniq(k.map(function(e){return e.name}));return f.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};cH.removeUnusedImports=function(f){var k=
ok.fuzzyParse(f);return this.removeImports(f,this.findUnusedImports(k),k)};ok.ImportRemover=cH;var Ip=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");Ip.ensureParent=function(f,k,n){if(n)return n;n=f.id;var b=f.System;k=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;n={id:k,filename:k,paths:[]};(f=f.package())&&n.paths.push(Ip.resource(f.url).join("node_modules/").path());return n};Ip.relative=function(f,k){return Ip.resource(f.id).parent().join(k).url.replace("file://",
"")};Ip._require=ik;Ip._resolve=aj;Ip.resource=Tj;Ip._require=ik;Ip._require=ik;Ip._resolve=aj;Ip._resolve=aj;var pf=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");pf.module=Yg;pf.isModuleLoaded=$k;pf.doesModuleExist=rk;pf.arr=eg;pf.obj=Ag;pf.graph=wu;pf.parse=Ri;pf.query=Nt;pf.computeRequireMap=$b;pf.moduleSourceChange=ie;pf.scheduleModuleExportsChange=cd;pf.runScheduledExportChanges=Cd;pf.livelySystemEnv=Nh;pf.Package=Gj;pf.isURL=ef;pf.emit=gs;pf.subscribe=Ao;pf.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";pf.classRuntime=LD;pf.ImportInjector=Rt;pf.GlobalInjector=FM;pf.ImportRemover=cH;pf._require=ik;pf._resolve=aj;pf.classHolder=Uw;var GM=function(){var f=/['"]format (esm|es6)['"];/,k=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):f.test(b.slice(0,
5E3))||!k.test(b.slice(0,5E3))&&n.test(b)?"esm":k.test(b.slice(0,5E3))?"cjs":"global"}}();pf.detectModuleFormat=GM;pf.detectModuleFormat=GM;pf.detectModuleFormat=GM;pf.classHolder.module=pf.module;pf.isModuleLoaded=$k;pf.isModuleLoaded=$k;pf.doesModuleExist=rk;pf.doesModuleExist=rk;pf.globalProps={initialized:!1,descriptors:{}};var Kg=function(f,k){var n=this;if(!pf.isURL(k)&&!/^@/.test(k))throw Error("ModuleInterface constructor called with "+k+" that does not seem to be a fully normalized module id.");
this.System=f;this.id=k;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;pf.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};Kg.prototype.fullName=function(){return this.id};Kg.prototype.shortName=function(){return this.package().name+"/"+this.pathInPackage()};
Kg.prototype.source=function(){var f=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(k){return f._source=k})};Kg.prototype.setSource=function(f){this.sourceAccessorName&&this.recorderName&&f.includes("var "+this.recorderName)&&f.includes("var "+this.sourceAccessorName)||this._source===f||(this.reset(),this._source=f)};Kg.prototype.ast=function(){var f=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress){if(f._ast)return e.return(f._ast);k=f;n=pf;b=n.parse;return e.yield(f.source(),2)}return e.return(k._ast=b.call(n,e.yieldResult))})};Kg.prototype.scope=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return f._scope?n.return(f._scope):n.yield(f.ast(),2);k=n.yieldResult;return n.return(f._scope=pf.query.topLevelDeclsAndRefs(k).scope)})};Kg.prototype.resolvedScope=function(){var f=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(k=f,n=pf.query,b=n.resolveReferences,e.yield(f.scope(),2)):e.return(k._scope=b.call(n,e.yieldResult))})};Kg.prototype.metadata=function(){var f=this.System.loads?this.System.loads[this.id]:null;return f?f.metadata:null};Kg.prototype.addMetadata=function(f){var k=this.System,n=this.id,b=this.metadata();f=b?Object.assign(b,f):f;b={};k.config({meta:(b[n]=f,b)});return k.meta[n]};Kg.prototype.format=function(){var f=this.metadata();return f&&f.format?f.format:this._source?pf.detectModuleFormat(this._source):
"global"};Kg.prototype.setFormat=function(f){return this.addMetadata({format:f})};Kg.prototype.reset=function(){this._scope=this._ast=this._source=null};Kg.prototype.get=function(){return this.System.get(this.id)};Kg.prototype.load=function(f){var k=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=k,b=n.id,e=n.System,f&&k.addMetadata(f),(m=e.get(b))?a.jumpTo(2):a.yield(e.import(b),3);2!=a.nextAddress&&(m=a.yieldResult);return a.return(m)})};
Kg.prototype.isLoaded=function(){return!!this.System.get(this.id)};Kg.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete pf.livelySystemEnv(this.System).loadedModules[this.id]};Kg.prototype.unloadDeps=function(f){var k=this;f=pf.obj.merge({forgetDeps:!0,forgetEnv:!0},f);this.dependents().forEach(function(n){k.System.delete(n.id);k.System.loads&&delete k.System.loads[n.id];f.forgetEnv&&n.unloadEnv()})};Kg.prototype.unload=function(f){var k=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return f=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},f),n=k,b=n.System,e=n.id,f.reset&&k.reset(),f.forgetDeps&&k.unloadDeps(f),k.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],f.forgetEnv&&k.unloadEnv(),(m=b._livelyModulesTranslationCache)?a.yield(m.deleteCachedData(e),2):a.jumpTo(2);pf.emit("lively.modules/moduleunloaded",{module:k.id},Date.now(),k.System);a.jumpToEnd()})};Kg.prototype.reload=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(f=pf.obj.merge({reloadDeps:!0,resetEnv:!0},f),n=[k],f.reloadDeps&&(n=k.dependents().concat(n)),b.yield(k.unload({forgetDeps:f.reloadDeps,forgetEnv:f.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(e){return e.id!==k.id&&e.load()})),3):b.yield(k.load(),0)})};Kg.prototype.copyTo=function(f){var k=this,n,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=k.System.resource(f),b=n.write,l.yield(k.source(),3);if(2!=l.nextAddress)return l.yield(b.call(n,
l.yieldResult),2);e=k;m=e.System;a=pf.module(m,f);g=pf.obj.select(k,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,g);m.set(f,m.newModule(m.get(k.id)));return l.return(a)})};Kg.prototype.renameTo=function(f,k){k=void 0===k?{}:k;var n=this,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:return b=k,e=void 0===b.unload?!0:b.unload,m=void 0===b.removeFile?!0:b.removeFile,g.yield(n.copyTo(f),
2);case 2:a=g.yieldResult;if(!e){g.jumpTo(3);break}return g.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!m){g.jumpTo(5);break}return g.yield(n.System.resource(n.id).remove(),5);case 5:return g.return(a)}})};Kg.prototype.whenLoaded=function(f){if(this.isLoaded())try{f(this)}catch(k){console.error(k)}else pf.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:f})};Kg.prototype.changeSourceAction=function(f){var k=this;return Promise.resolve(this.source()).then(function(n){return f(n)}).then(function(n){return k.changeSource(n)})};
Kg.prototype.changeSource=function(f,k){k=Object.assign({doSave:!0,doEval:!0},k);var n=this.System,b=this.id,e=this.format(),m;this.reset();this.lastModifiedAt=new Date;return Promise.all([k.doSave&&this.System.resource(b).write(f),k.doEval&&pf.moduleSourceChange(n,b,f,e,k).then(function(a){return m=a})]).then(function(){return m})};Kg.prototype.addDependencyToModuleRecord=function(f,k){var n=this;k=void 0===k?function(){}:k;var b=this.record(),e=f.record();if(b&&e){var m,a=b.dependencies.some(function(l,
r){if(l)return m=r,l&&l.name===f.id});a?e!==b.dependencies[m]&&b.dependencies.splice(m,1,e):b.dependencies.push(e);a&&b.setters[m]||(b.setters[a?m:b.dependencies.length-1]=k);var g;e.importers.some(function(l,r){if(l)return g=r,l&&l.name===n.id})?b!==e.importers[g]&&e.importers.splice(g,1,b):e.importers.push(b)}};Kg.prototype.dependents=function(){var f=this;return pf.graph.hull(pf.graph.invert(pf.computeRequireMap(this.System)),this.id).map(function(k){return pf.module(f.System,k)})};Kg.prototype.requirements=
function(){var f=this;return pf.graph.hull(pf.computeRequireMap(this.System),this.id).map(function(k){return pf.module(f.System,k)})};Kg.prototype.directRequirements=function(){var f=this,k=(this.record()||{}).dependencies||[];return pf.arr.pluck(k.filter(Boolean),"name").map(function(n){return pf.module(f.System,n)})};Kg.prototype.isMochaTest=function(){if(!this._source)return!1;var f=this._scope||(this._scope=pf.query.topLevelDeclsAndRefs(pf.parse(this._source)).scope);return pf.query.imports(f).map(function(k){return k.fromModule}).some(function(k){return k.endsWith("mocha-es6")||
k.endsWith("mocha-es6/index.js")})?!0:!1};Kg.prototype.define=function(f,k,n,b){n=void 0===n?!0:n;var e=this.System,m=this.id,a=this.recorder,g=Symbol.for("lively-object-meta"),l=Symbol.for("lively-module-meta");"function"!==typeof k||!b||"function"!==b.kind&&"class"!==b.kind||(k[g]=b);k&&k[g]&&!k[l]&&(b=this.pathInPackage(),g=this.package(),k[l]={package:g?{name:g.name,version:g.version}:{},pathInPackage:b});a[f]=k;pf.scheduleModuleExportsChange(e,m,f,k,!1);this.notifyTopLevelObservers(f);(n=n||
!this.isEvalutionInProgress())&&pf.runScheduledExportChanges(e,m);return k};Kg.prototype.undefine=function(f){delete this.recorder[f]};Kg.prototype.subscribeToToplevelDefinitionChanges=function(f){this._observersOfTopLevelState.push(f);return f};Kg.prototype.notifyTopLevelObservers=function(f){var k=this.recorder;pf.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],f)||this._observersOfTopLevelState.forEach(function(n){return n(f,k[f])})};Kg.prototype.unsubscribeFromToplevelDefinitionChanges=
function(f){this._observersOfTopLevelState="string"===typeof f?this._observersOfTopLevelState.filter(function(k){return k.name!==f}):this._observersOfTopLevelState.filter(function(k){return k!==f})};Kg.prototype.evaluationStart=function(){this._evaluationsInProgress++};Kg.prototype.evaluationEnd=function(){this._evaluationsInProgress--;pf.runScheduledExportChanges(this.System,this.id)};Kg.prototype.nextEvalId=function(){return this._evalId++};Kg.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};Kg.prototype.env=function(){return this};Kg.prototype.package=function(){return pf.Package.forModule(this.System,this)};Kg.prototype.pathInPackage=function(){var f=this.package();return f&&0===this.id.indexOf(f.address)?this.id.slice(f.address.length).replace(/^\//,""):this.id};Kg.prototype.imports=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=pf.query,n=k.imports,b.yield(f.scope(),2)):b.return(n.call(k,
b.yieldResult))})};Kg.prototype.exports=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=pf.query,n=k.exports,b.yield(f.scope(),2)):b.return(n.call(k,b.yieldResult))})};Kg.prototype.addImports=function(f){var k=this,n,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(k.source(),2);n=y.yieldResult;b=$jscomp.makeIterator(f);for(e=b.next();!e.done;e=b.next())m=e.value,a=
pf.module(k.System,m.from||m.moduleId),g=a.package(),l={exported:m.exported||m.local,moduleId:a.id,packageName:g.name,packageURL:g.url,pathInPackage:a.pathInPackage()},r=m.local,v=pf.ImportInjector.run(k.System,k.id,k.package(),n,l,r),n=v.newSource;return y.yield(k.changeSource(n),0)})};Kg.prototype.addGlobalDeclaration=function(f){var k=this,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(k.source(),2):3!=g.nextAddress?(n=g.yieldResult,b=pf.GlobalInjector.run(n,
f),e=b.status,m=b.newSource,(a="modified"===e)?g.yield(k.changeSource(m),3):g.jumpTo(3)):g.return(a)})};Kg.prototype.removeImports=function(f){var k=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return f.length?a.yield(k.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(pf.ImportRemover.removeImports(n,f),3);case 3:return b=a.yieldResult,e=b.source,m=b.removedImports,a.yield(k.changeSource(e),4);case 4:m.forEach(function(g){return delete k.recorder[g.local]}),
a.jumpToEnd()}})};Kg.prototype._localDeclForRefAt=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(k.resolvedScope(),2);n=e.yieldResult;b=pf.query.refWithDeclAt(f,n);return e.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Kg.prototype._localDeclForName=function(f){var k=this,n,b,e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(k.resolvedScope(),2);n=v.yieldResult;
e=$jscomp.makeIterator(n.resolvedRefMap.values());for(m=e.next();!m.done;m=e.next())if(g=a=m.value,l=g.ref,r=l.name,f===r){b=a;break}return v.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Kg.prototype._importForNSRefAt=function(f){var k=this,n,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(k.resolvedScope(),2);n=y.yieldResult;b=n.node;e=pf.query.nodesAtIndex(b,f);if(2>e.length)return y.return([null,null]);m=e[e.length-1];a=
e[e.length-2];if("Identifier"!=m.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return y.return([null,null]);g=n.resolvedRefMap.get(a.object)||{};l=g.decl;if(!l||"ImportDeclaration"!==l.type)return y.return([null,null]);r=a.object.name;v=l.specifiers.find(function(A){return A.local.name===r});return y.return("ImportNamespaceSpecifier"!==v.type?[null,null]:[l,v.local,m.name])})};Kg.prototype._resolveImportedDecl=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!f)return r.return([]);
n=f.id;b=n.name;return r.yield(k.imports(),2);case 2:e=r.yieldResult;m=e.find(function(v){return v.local==b});if(!m){r.jumpTo(3);break}a=pf.module(k.System,m.fromModule,k.id);g=[f];l=g.concat;return r.yield(a.bindingPathForExport(m.imported),4);case 4:return r.return(l.call(g,r.yieldResult));case 3:return r.return([f])}})};Kg.prototype.bindingPathFor=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(k._localDeclForName(f),2):4!=
b.nextAddress?(n=b.yieldResult)?b.yield(k._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};Kg.prototype.bindingPathForExport=function(f){var k=this,n,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return l.yield(k.resolvedScope(),2);case 2:return l.yield(k.exports(),3);case 3:n=l.yieldResult;b=n.find(function(r){return r.exported===f});if(!b.fromModule)return l.return(k._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?k:null}));e=pf.module(k.System,b.fromModule,k.id);m={decl:b.node,id:b.declId,declModule:k};a=[m];g=a.concat;return l.yield(e.bindingPathForExport(b.imported),5);case 5:return l.return(g.call(a,l.yieldResult))}})};Kg.prototype.bindingPathForRefAt=function(f){var k=this,n,b,e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(k._localDeclForRefAt(f),2);case 2:n=A.yieldResult;if(!n){A.jumpTo(3);break}return A.yield(k._resolveImportedDecl(n),
4);case 4:return A.return(A.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,A.yield(k._importForNSRefAt(f),5);case 5:m=e.call(b,A.yieldResult);a=m.next().value;g=m.next().value;l=m.next().value;if(!a)return A.return([]);r=pf.module(k.System,a.source.value,k.id);v=[{decl:a,declModule:k,id:g}];y=v.concat;return A.yield(r.bindingPathForExport(l),6);case 6:return A.return(y.call(v,A.yieldResult))}})};Kg.prototype.definitionForRefAt=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(k.bindingPathForRefAt(f),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};Kg.prototype.ensureRecord=function(){var f=this.System,k=f._loader.moduleRecords;return k[this.id]?k[this.id]:k[this.id]={name:this.id,exports:f.newModule({}),dependencies:[],importers:[],setters:[]}};Kg.prototype.record=function(){var f=this.System._loader.moduleRecords[this.id];if(!f)return null;f.hasOwnProperty("__lively_modules__")||(f.__lively_modules__={evalOnlyExport:{}});
return f};Kg.prototype.updateRecord=function(f){var k=this.record();if(!k)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");k.locked=!0;try{return f(k)}finally{k.locked=!1}};Kg.prototype.search=function(f,k){var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return k=Object.assign({excludedModules:[]},k),k.excludedModules.some(function(N){return"string"===typeof N?N===n.id:N instanceof
RegExp?N.test(n.id):"function"===typeof N?N(n.id):!1})?M.return([]):M.yield(n.source(),2);b=M.yieldResult;f instanceof RegExp?(m="g",f.ignoreCase&&(m+="i"),f.multiline&&(m+="m"),e=RegExp(f.source,m)):e=RegExp(f,"g");for(g=[];null!==(a=e.exec(b));)g.push([a.index,a[0].length]);r=l=0;v=1;for(y=0;l<b.length&&r<g.length;l++)"\n"==b[l]&&(v++,y=l+1),A=$jscomp.makeIterator(g[r]),E=A.next().value,F=A.next().value,l===E&&(H=b.slice(y).indexOf("\n"),H=-1===H?b.length:H+y,I=n.package(),g[r]={moduleId:n.id,packageName:I?
I.name:void 0,pathInPackage:I?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:F,line:v,column:l-y,lineString:1E3<H-y?"..."+b.slice(l-10,l+100)+"...":b.slice(y,H)},r++);return M.return(g)})};Kg.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(Kg.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch",
"getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:pf.GlobalInjector.getGlobals(this._source))).concat(pf.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(f){return this._recorder=f},get:function(){if(this._recorder)return this._recorder;var f=this.System,k=this;if(!pf.globalProps.initialized){pf.globalProps.initialized=!0;for(var n in f.global)if(f.global.__lookupGetter__(n)||"closed"==n)pf.globalProps.descriptors[n]={value:void 0,configurable:!0,
writable:!0}}n={};if(f.get("@system-env").node){var b=pf._require.bind(null,this);b.resolve=pf._resolve.bind(null,this);n.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(f.global,Object.assign({},pf.globalProps.descriptors,{},n,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:f},b.__currentLivelyModule={value:k},b[pf.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:pf.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(e,m,a,g,l){l=l||{};l.kind=m;return k.define(e,a,!1,l)}},b._moduleExport={value:function(e,m){pf.scheduleModuleExportsChange(f,k.id,e,m,!0)}},b._moduleImport={value:function(e,m){var a=f.decanonicalize(e,k.id),g=f.get(a);if(g){k.addDependencyToModuleRecord(pf.module(f,a),function(l){return Object.assign(k.recorder,l)});if(void 0==m)return g;g.hasOwnProperty(m)||console.warn("import from "+g+": Has no export "+m+"!");return g[m]}console.warn("import of "+
m+" failed: "+e+" (tried as "+k.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});pf.ModuleInterface=Kg;pf.default=Yg;var Re=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Re.canonicalURL=function(f){var k=f.match(/([^:]+:\/\/)(.*)/);if(k){var n=k[1];f=k[2]}f=f.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+f};Re.prepareNodejsCaching=function(){var f=System._nodeRequire("fs"),k=System._nodeRequire("path"),
n="win32"===process.platform;k=n||"/"!==process.cwd()?process.cwd():k.join(process.env.HOME,".lively.next");Re.nodejsCacheDirURL=n?"file:///"+k.replace(/\\/g,"/"):"file://"+k;f.existsSync(k)||f.mkdirSync(k)};Re.getExceptions=Jp;Re.setExceptions=Tu;Re.prepareCodeForCustomCompile=Uu;Re.prepareTranslatedCodeForSetterCapture=Vu;Re.getCachedNodejsModule=function(f,k){try{var n=f._nodeRequire("module").Module,b=n._resolveFilename(k.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));return n._cache[b]}catch(e){f.debug&&
console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",k.name)}return null};Re.addNodejsWrapperSource=function(f,k){var n=Re.getCachedNodejsModule(f,k);if(n)return k.metadata.format="esm",k.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+Re.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return Re.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
f.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",k.name),!0;f.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",k.name);return!1};Re.customTranslate=function(f,k){var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:b=n;e=b.debug;if(a=(m=k.metadata)&&m.hasOwnProperty("instrument")&&!m.instrument||Re.exceptions.some(function(Ka){return Ka(k.name)}))return e&&
console.log("[lively.modules customTranslate ignoring] %s",k.name),Aa.return(f(k));if(Re.isNode&&Re.addNodejsWrapperSource(b,k))return e&&console.log("[lively.modules] loaded %s from nodejs cache",k.name),Aa.return(f(k));g=Date.now();l=Re.detectModuleFormat(k.source,m);r=Re.module(b,k.name);v=!1;y="esm"===l;r.setSource(k.source);Aa.setCatchFinallyBlocks(2);A=b.useModuleTranslationCache;E=b.global.indexedDB;F=A&&String(Re.string.hashCode(k.source));if(A&&E&&y)return H=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new Re.BrowserModuleTranslationCache),Aa.yield(H.fetchStoredModuleSource(k.name),8);if(!(Re.isNode&&A&&y)){Aa.jumpTo(5);break}H=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Re.NodeModuleTranslationCache);return Aa.yield(H.fetchStoredModuleSource(k.name),7);case 7:if((I=Aa.yieldResult)&&I.hash==F&&I.timestamp>=Re.NodeModuleTranslationCache.earliestDate&&I.source)return m.format="register",m.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
k.name,Date.now()-g),Aa.return(Promise.resolve(I.source));Aa.jumpTo(5);break;case 8:if((I=Aa.yieldResult)&&I.hash==F&&I.timestamp>=Re.BrowserModuleTranslationCache.earliestDate&&I.source)return m.format="register",m.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",k.name,Date.now()-g),Aa.return(Promise.resolve(I.source));case 5:Aa.leaveTryBlock(3);break;case 2:M=Aa.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
M.stack);case 3:return N={},y?(r.recorderName="__lvVarRecorder",r.recorder===b.global&&r.unloadEnv(),k.metadata.format="esm",X=Re.prepareCodeForCustomCompile(b,k.source,k.name,r,e),N=X.options,W=X.source,k.source=W,v=k.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",k.name)):"global"===k.metadata.format&&(r.recorderName="System.global",r.recorder=b.global,k.metadata.format="global",ea=Re.prepareCodeForCustomCompile(b,k.source,k.name,r,e),N=ea.options,
W=ea.source,k.source=W,v=k.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",k.name)),v||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",k.name,k.metadata.format),Aa.return(f(k).then(function(Ka){var K,aa,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:0===Ka.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
k.name),Ka=Re.prepareTranslatedCodeForSetterCapture(b,Ka,k.name,r,N,e));if(Re.isNode&&A&&y)return K=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Re.NodeModuleTranslationCache),U.setCatchFinallyBlocks(8),U.yield(K.cacheModuleSource(k.name,F,Ka),10);if(!(A&&E&&y)){U.jumpTo(3);break}K=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Re.BrowserModuleTranslationCache);U.setCatchFinallyBlocks(5);return U.yield(K.cacheModuleSource(k.name,F,Ka),7);case 7:e&&
console.log("[lively.modules customTranslate] stored cached version for %s",k.name);U.leaveTryBlock(3);break;case 5:aa=U.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+aa.stack);U.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",k.name);U.leaveTryBlock(3);break;case 8:T=U.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+T.stack);case 3:return e&&
console.log("[lively.modules customTranslate] done %s after %sms",k.name,Date.now()-g),U.return(Ka)}})}))}})};Re.instrumentSourceOfEsmModuleLoad=st;Re.instrumentSourceOfGlobalModuleLoad=ns;Re.wrapModuleLoad=Ih;Re.unwrapModuleLoad=sk;Re.parse=Ri;Re.nodes=Qw;Re.isValidIdentifier=$q;var oU=Re.nodes;Re.funcCall=oU.funcCall;Re.member=oU.member;Re.literal=oU.literal;Re.evalCodeTransform=bp;Re.evalCodeTransformOfSystemRegisterSetters=Cp;Re.arr=eg;Re.string=ti;Re.properties=xp;Re.module=Yg;Re.detectModuleFormat=
GM;Re.resource=Tj;Re.installHook=xb;Re.removeHook=wc;Re.isHookInstalled=Nc;Re.classToFunctionTransform=mj;Re.isNode=System.get("@system-env").node;var dH=function(){};dH.prototype.cacheModuleSource=function(f,k,n){throw Error("not yet implemented");};dH.prototype.fetchStoredModuleSource=function(f){throw Error("not yet implemented");};dH.prototype.deleteCachedData=function(f){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(dH,{earliestDate:{configurable:!0,enumerable:!0,
get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Re.ModuleTranslationCache=dH;Re.nodejsCacheDirURL=null;var Vw=function(){return Re.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(Vw,Re.ModuleTranslationCache);Vw.prototype.ensurePath=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(k.moduleCacheDir.join(f).exists(),2);case 2:if(r.yieldResult)return r.return();
n="";m=$jscomp.makeIterator(f.split("/"));a=m.next();case 3:if(a.done){r.jumpTo(0);break}g=a.value;n+=g+"/";b=k.moduleCacheDir.join(n);return r.yield(b.exists(),6);case 6:if(r.yieldResult){r.jumpTo(7);break}r.setCatchFinallyBlocks(8);return r.yield(b.mkdir(),10);case 10:r.leaveTryBlock(7);break;case 8:if(l=r.enterCatchBlock(),"EEXIST"!=l.code)throw l;case 7:return b=Re.resource("file://"+n+"/package.json"),r.yield(b.exists(),11);case 11:if(!r.yieldResult){r.jumpTo(4);break}return r.yield(b.read(),
13);case 13:return e=r.yieldResult,r.yield(k.moduleCacheDir.join(n+"/package.json").write(e),4);case 4:a=m.next(),r.jumpTo(3)}})};Vw.prototype.dumpModuleCache=function(){var f=this,k,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:n=g.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(k=n.getNext())){g.jumpTo(0);break}b=Re.resource("file://"+k);return g.yield(b.exists(),5);case 5:if(!g.yieldResult){g.jumpTo(2);break}e=f;m=e.cacheModuleSource;
a=k;return g.yield(b.read(),8);case 8:return g.yield(m.call(e,a,"NO_HASH",g.yieldResult),2)}})};Vw.prototype.getFileName=function(f){return f.match(/([^\/]*.)(\.js)?$/)[0]};Vw.prototype.fetchStoredModuleSource=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return f=f.replace("file://",""),n=k.getFileName(f),b=f.replace(n,""),e=k.moduleCacheDir.join(f),r.yield(e.exists(),2);case 2:return r.yieldResult?r.yield(e.stat(),
3):r.return(null);case 3:return m=r.yieldResult,a=m.birthtime,r.yield(e.read(),4);case 4:return g=r.yieldResult,r.yield(k.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return l=r.yieldResult,r.return({source:g,timestamp:a,hash:l})}})};Vw.prototype.cacheModuleSource=function(f,k,n){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(f=f.replace("file://",""),e=b.getFileName(f),m=f.replace(e,""),a.yield(b.ensurePath(m),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(f).write(n),
3):a.yield(b.moduleCacheDir.join(m+"/.hash_"+e).write(k),0)})};Vw.prototype.deleteCachedData=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(f=f.replace("file://",""),n=k.getFileName(f),f.replace(n,""),b=k.moduleCacheDir.join(f),e.yield(b.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(Vw.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Re.nodejsCacheDirURL||
Re.prepareNodejsCaching();return Re.resource(Re.nodejsCacheDirURL+"/.module_cache/")}}});Re.NodeModuleTranslationCache=Vw;var Ww=function(f){f=void 0===f?"lively.modules-module-translation-cache":f;var k=Re.ModuleTranslationCache.call(this)||this;k.version=2;k.sourceCodeCacheStoreName="sourceCodeStore";k.dbName=f;k.db=k.openDb();return k};$jscomp.inherits(Ww,Re.ModuleTranslationCache);Ww.prototype.openDb=function(){var f=this,k=System.global.indexedDB.open(this.version);return new Promise(function(n,
b){k.onsuccess=function(e){n(this.result)};k.onerror=function(e){return b(e.target)};k.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(f.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};Ww.prototype.deleteDb=function(){var f=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(k,n){f.onerror=function(b){return n(b.target)};f.onsuccess=function(b){return k(b)}})};Ww.prototype.closeDb=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(f.db,2);k=b.yieldResult;n=k.close();return b.return(new Promise(function(e,m){n.onsuccess=function(a){e(this.result)};n.onerror=function(a){return m(a.target.errorCode)}}))})};Ww.prototype.cacheModuleSource=function(f,k,n){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.db,2);e=m.yieldResult;return m.return(new Promise(function(a,g){var l=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),r=l.objectStore(b.sourceCodeCacheStoreName),
v=Date.now();r.put({moduleId:f,hash:k,source:n,timestamp:v});l.oncomplete=a;l.onerror=g}))})};Ww.prototype.fetchStoredModuleSource=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(e,m){var a=n.transaction([k.sourceCodeCacheStoreName]).objectStore(k.sourceCodeCacheStoreName).get(f);a.onerror=m;a.onsuccess=function(g){return e(a.result)}}))})};Ww.prototype.deleteCachedData=
function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(e,m){var a=n.transaction([k.sourceCodeCacheStoreName],"readwrite").objectStore(k.sourceCodeCacheStoreName).delete(f);a.onerror=m;a.onsuccess=function(g){return e(a.result)}}))})};Ba("af",Ww);Re.BrowserModuleTranslationCache=Ww;Re.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Re.exceptions=[function(f){return!f.endsWith(".js")&&
!f.endsWith(".jsx")&&!f.startsWith("https://jspm.dev")},function(f){return f.endsWith("dist/acorn.js")||f.endsWith("dist/escodegen.browser.js")||f.endsWith("bowser.js")||f.endsWith("TweenMax.min.js")},function(f){return f.endsWith("babel-core/browser.js")||f.endsWith("system.src.js")||f.includes("systemjs-plugin-babel")}];Re.pendingConfigs=[];Re.configInitialized=!1;Re.prepareCodeForCustomCompile=Uu;Re.prepareCodeForCustomCompile=Uu;Re.prepareTranslatedCodeForSetterCapture=Vu;Re.prepareTranslatedCodeForSetterCapture=
Vu;Re.wrapModuleLoad=Ih;Re.wrapModuleLoad=Ih;Re.unwrapModuleLoad=sk;Re.unwrapModuleLoad=sk;Re.getExceptions=Jp;Re.getExceptions=Jp;Re.setExceptions=Tu;Re.setExceptions=Tu;Re.instrumentSourceOfEsmModuleLoad=st;Re.instrumentSourceOfEsmModuleLoad=st;Re.instrumentSourceOfGlobalModuleLoad=ns;Re.instrumentSourceOfGlobalModuleLoad=ns;var rh=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");rh.fetchResource=function(f,k){var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:b=
n;e=25E4;m=b.resource(k.name);a=b.get("@system-env").node&&!m.isNodeJSFileResource;if(!a){T.jumpTo(2);break}return T.yield(dla(k.name),3);case 3:m=T.yieldResult;case 2:if(!m)return T.return(f(k));if(rh.jsFileHashMap||b.get("@system-env").node){T.jumpTo(4);break}r=rh;return T.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:r.jsFileHashMap=T.yieldResult;case 4:v=b.useModuleTranslationCache;y=b.global.indexedDB;A=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!v||!y||!A){T.jumpTo(6);break}return T.yield(A.fetchStoredModuleSource(k.name),7);case 7:if((E=T.yieldResult)&&(rh.jsFileHashMap[k.name.replace(b.baseURL,"/")]==E.hash||k.name.includes("jspm")))return k.metadata.instrument=!1,T.return(E.source);case 6:if(m.isResource&&m.ext()&&m.ext().startsWith("css"))return T.return("");T.setCatchFinallyBlocks(8);if(!m.isResource){F=m;T.jumpTo(10);break}return T.yield(m.read(),11);case 11:F=T.yieldResult;case 10:g=F;T.leaveTryBlock(9);break;case 8:l=H=T.enterCatchBlock();
case 9:if(!l||!b.get("@system-env").browser){T.jumpTo(12);break}I=m.url.startsWith("http");M=!m.url.startsWith(document.location.origin);if(!I||!M){T.jumpTo(12);break}T.setCatchFinallyBlocks(14);return T.yield(m.makeProxied().read(),16);case 16:g=T.yieldResult;l=null;T.leaveTryBlock(12);break;case 14:T.enterCatchBlock();case 12:if(l)throw l;if(!a){T.jumpTo(17);break}N=g.headers||{};X=N._headers;W=$jscomp.makeIterator(X&&X["content-encoding"]||[]);ea=W.next().value;return"br"==ea?(Aa=rh.Buffer,Ka=
Aa.from,K=rh.brotli,aa=K.decompress,T.yield(g.buffer(),21)):T.yield(g.text(),20);case 20:g=T.yieldResult;T.jumpTo(17);break;case 21:g=Ka.call(Aa,aa.call(K,T.yieldResult)).toString();case 17:if(!(g.length>e&&$world)||b._loadingIndicator){T.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator","loading module");return T.yield(rh.promise.delay(500),23);case 23:if(!b._loadingIndicator){T.jumpTo(22);break}return T.yield(b._loadingIndicator.whenRendered(),22);case 22:return T.return(g)}})};
rh.livelyProtocol=function(f,k){var n=k.match(rh.livelyURLRe);if(!n)return f(k);f=$jscomp.makeIterator(n);f.next();f.next();var b=f.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(e?e.textString:"/*Could not locate "+b+"*/")},write:function(e){var m="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!m)return Promise.reject("Could not save morph "+b);m.textString=e;return Promise.resolve(this)}}};rh.wrapResource=Uj;rh.unwrapResource=
Go;rh.resource=Tj;rh.Resource=Ug;rh.installHook=xb;rh.removeHook=wc;rh.isHookInstalled=Nc;rh.brotli=rh.brotli||void 0;if(System.get("@system-env").node){var dla=System._nodeRequire("node-fetch");rh.brotli=System._nodeRequire("brotli")}rh.jsFileHashMap=rh.jsFileHashMap||void 0;rh.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;rh.wrapResource=Uj;rh.wrapResource=Uj;rh.unwrapResource=Go;rh.unwrapResource=Go;var kB=function(){return rh.Resource.apply(this,arguments)||this};$jscomp.inherits(kB,rh.Resource);
kB.prototype.read=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=f.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(k);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+k+"*/"))})};kB.prototype.write=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){n=k.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return e.return(Promise.reject("Could not save morph "+n));b.textString=
f;return e.return(Promise.resolve(k))})};kB.prototype.exists=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return("undefined"!==typeof $world&&$world.getMorphWithId(f.morphId))})};kB.prototype.remove=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){"undefined"!==typeof $world&&$world.getMorphWithId(f.morphId).remove();return k.return(!0)})};$jscomp.global.Object.defineProperties(kB.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var f=this.url.match(rh.livelyURLRe);f=$jscomp.makeIterator(f);f.next();f.next();return f.next().value}}});rh.LivelyResource=kB;var pU={name:"lively.modules",matches:function(f){return f.match(rh.livelyURLRe)},resourceClass:rh.LivelyResource};rh.resourceExtension=pU;rh.resourceExtension=pU;rh.resourceExtension=pU;rh.registerExtension=q;rh.promise=ph;rh.registerExtension(rh.resourceExtension);var ae=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
ae.wrapModuleResolution=fA;ae.unwrapModuleResolution=Tx;ae.livelySystemEnv=Nh;ae.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};ae.nameOfSystem=function(f){return Object.keys(ae.systems()).detect(function(k){return ae.systems()[k]===f})};ae.getSystem=Tl;ae.removeSystem=Un;ae.makeSystem=function(f){return ae.prepareSystem(new System.constructor,f)};ae.prepareSystem=Ux;ae.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(f,k){var n=k.split("=");k=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));f[k]=n;return f},{}):{}};ae.preNormalize=function(f,k,n){".."===k&&(k="../index.js");k=k.replace(ae.doubleSlashRe,function(g){return":"===g[0]?g:g[0]+"/"});var b=f.get("@lively-env").packageRegistry;if(b){var e=n&&b.findPackageHavingURL(n);if(e){var m=e.map,a=e.url;if(m=m&&m[k]||f.map[k])"object"===typeof m&&(m=ae.normalize_doMapWithObject(m,
e,f)),"string"===typeof m&&""!==m&&(k=m),k.startsWith(".")&&(k=ae.urlResolve(ae.join(a,k)))}}b&&(f=b.resolvePath(k,n))&&(f.endsWith("/")&&!k.endsWith("/")&&(f=f.slice(0,-1)),!f.endsWith("/")&&k.endsWith("/")&&(f+="/"),k=f);return k};ae.postNormalize=function(f,k,n){n=k.replace(ae.jsExtRe,"");if(k.endsWith("/"))return k;var b=f.get("@lively-env").packageRegistry;if(b){if(f=b.findPackageWithURL(n))return f=(f.main||"index.js").replace(ae.dotSlashStartRe,""),k=n.replace(ae.trailingSlashRe,"")+"/"+f}else if(n in
f.packages&&(f=f.packages[n].main))return k=n.replace(ae.trailingSlashRe,"")+"/"+f.replace(ae.dotSlashStartRe,"");return(n=k.match(ae.jsonJsExtRe))?n[1]:k};ae.checkExistence=function(f,k){var n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){k._fileCheckMap=k._fileCheckMap||{};if(f in k._fileCheckMap)return m.return(k._fileCheckMap[f]);if((n=k._livelyModulesTranslationCache)&&n.fetchStoredModuleSource(f))return m.return(k._fileCheckMap[f]=!0);b=k._fileCheckMap;
e=f;return m.yield(ae.resource(f).exists(),2)}return m.return(b[e]=m.yieldResult)})};ae.normalizeHook=function(f,k,n,b){var e=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(n&&"cjs"==k)return y.return("cjs");m=e;a=ae.preNormalize(m,k,n);return y.yield(f(a,n,b),2);case 2:g=y.yieldResult;l=ae.postNormalize(m,g||a,!1);r=l.startsWith("file:");m.debug&&console.log("[normalize] "+k+" => "+l);if(ae.jsExtRe.test(k)||ae.jsxExtRe.test(k)||ae.jsonExtRe.test(l)||
ae.nodeModRe.test(l)||ae.nodeExtRe.test(l)||m.loads&&m.loads[l]||!ae.jsExtRe.test(l)){y.jumpTo(3);break}return y.yield(ae.checkExistence(l,m),4);case 4:if(y.yieldResult)return y.return(l);v=l.replace(".js","/index.js");return y.yield(ae.checkExistence(v,m),5);case 5:return y.yieldResult||!r?y.return(v):y.return(l.replace(".js","/index.node"));case 3:return ae.jsxJsExtRe.test(l)&&(l=l.replace(".jsx.js",".jsx")),y.return(l)}})};ae.decanonicalizeHook=function(f,k,n,b){if(k&&k.endsWith("!cjs")){k=k.replace("!cjs",
"");var e="!cjs"}var m=ae.preNormalize(this,k,n);f=f(m,n,b);f=ae.postNormalize(this,f,!0);e&&(f+=e);this.debug&&console.log("[normalizeSync] "+k+" => "+f);return f};ae.locateHook=function(f,k){var n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=$jscomp.makeIterator(k.name.split("!")),b=n.next().value,n.next(),k.name=b,m.yield(f(k),2);e=m.yieldResult;return m.return(e)})};ae.normalize_doMapWithObject=function(f,k,n){k=n.get(k.map["@env"]||"@system-env");
var b;for(b in f){var e=(n="~"==b[0])?b.substr(1):b,m=k;for(e=e.split(".");e.length;)m=m[e.shift()];if(!n&&m||n&&!m){var a=f[b];break}}if(a&&"string"!==typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};ae.normalize_packageOfURL=function(f,k){var n=Object.keys(k.packages||{}).map(function(b){return 0===f.indexOf(b)?{url:b,penalty:f.slice(b.length).length}:null}).filter(function(b){return!!b});return(k=(n=n.length?n.reduce(function(b,e){return b.penalty>
e.penalty?e:b}).url:null)&&k.packages[n])?{systemPackage:k,packageURL:n}:null};ae.newModule_volatile=function(f,k){var n=Object.freeze;Object.freeze=function(b){return b};f=f(k);Object.freeze=n;return f};ae.printSystemConfig=eJ;ae.instantiate_triggerOnLoadCallbacks=function(f,k){var n=this;return f(k).then(function(b){var e={};ae.promise.waitFor(6E4,function(){return n.get(k.name)},e).then(function(m){if(m===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+k.name+" timed out");
else{m=k.name;for(var a=ae.classHolder.module(n,m),g=n.get("@lively-env").onLoadCallbacks,l=g.length;l--;){var r=g[l],v=r.moduleName,y=r.callback;if((r.resolved?v:n.decanonicalize(v))===m){g.splice(l,1);try{y(a)}catch(A){console.error(A)}}}ae.emit("lively.modules/moduleloaded",{module:k.name},Date.now(),n);n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}});return b})};ae.whenLoaded=fJ;ae.loadedModules=gJ;ae.knownModuleNames=hJ;ae.searchLoadedModules=RP;ae.arr=eg;ae.obj=
Ag;ae.promise=ph;ae.removeHook=wc;ae.installHook=xb;ae.isHookInstalled=Nc;ae.classHolder=Uw;ae.isNode=System.get("@system-env").node;ae.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;ae.defaultOptions={notificationLimit:null};ae.wrapModuleResolution=fA;ae.wrapModuleResolution=fA;ae.unwrapModuleResolution=Tx;ae.unwrapModuleResolution=Tx;ae.wrapModuleLoad=Ih;ae.wrapResource=Uj;ae.emit=gs;ae.join=bH;ae.urlResolve=af;ae.resource=Tj;ae.dotSlashStartRe=
/^\.?\//;ae.trailingSlashRe=/\/$/;ae.jsExtRe=/\.js$/;ae.jsxExtRe=/\.jsx$/;ae.nodeExtRe=/\.node$/;ae.jsonExtRe=/\.json$/;ae.jsonJsExtRe=/(.*\.json)\.js$/i;ae.jsxJsExtRe=/(.*\.jsx)\.js$/i;ae.doubleSlashRe=/.\/{2,}/g;ae.nodeModRe=/@node.*/;ae.whenLoaded=fJ;ae.whenLoaded=fJ;ae.getSystem=Tl;ae.getSystem=Tl;ae.removeSystem=Un;ae.removeSystem=Un;ae.prepareSystem=Ux;ae.prepareSystem=Ux;ae.printSystemConfig=eJ;ae.printSystemConfig=eJ;ae.livelySystemEnv=Nh;ae.livelySystemEnv=Nh;ae.loadedModules=gJ;ae.loadedModules=
gJ;ae.knownModuleNames=hJ;ae.knownModuleNames=hJ;ae.searchLoadedModules=RP;ae.searchLoadedModules=RP;var bh=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");bh.isAbsolute=function(f){return f.startsWith("/")||f.startsWith("http:")||f.startsWith("https:")||f.startsWith("file:")||f.match(bh.urlStartRe)};bh.ensureResource=function(f){return f.isResource?f:bh.resource(f)};bh.semver=RG;bh.arr=eg;bh.obj=Ag;bh.promise=ph;bh.getPackage=Oe;bh.Package=Gj;bh.resource=Tj;bh.isURL=
ef;bh.classHolder=Uw;bh.urlStartRe=/^[a-z\.-_\+]+:/i;var dj=function(f,k){k=void 0===k?{}:k;this.System=f;this.packageBaseDirs=k.packageBaseDirs||[];this.devPackageDirs=k.devPackageDirs||[];this.individualPackageDirs=k.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};dj.ofSystem=function(f){var k=f.get("@lively-env").packageRegistry;k||(k=f["__lively.modules__packageRegistry"]=new this(f));return k};dj.forDirectory=function(f,k){return new this(f,{packageBaseDirs:[bh.ensureResource(k)]})};
dj.fromJSON=function(f,k){return(new this(f)).fromJSON(k)};dj.prototype.resetByURL=function(){this._byURL=null};dj.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};dj.prototype.toJSON=function(){function f(v){v=v.url;return v.startsWith(k.baseURL)?v.slice(k.baseURL.length).replace(/^\//,""):v}var k=this.System,n=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,m=this.packageBaseDirs,a={},g;for(g in n){var l=n[g];a[g]={};a[g].latest=l.latest;a[g].versions={};for(var r in l.versions)a[g].versions[r]=
l.versions[r].toJSON()}return{packageMap:a,individualPackageDirs:b.map(f),devPackageDirs:e.map(f),packageBaseDirs:m.map(f)}};dj.prototype.fromJSON=function(f){function k(v){return bh.isURL(v)?bh.resource(v):bh.resource(b.baseURL).join(v)}var n={},b=this.System,e=bh.resource(b.baseURL),m;for(m in f.packageMap){var a=f.packageMap[m];n[m]={};n[m].latest=a.latest;n[m].versions={};for(var g in a.versions){var l=a.versions[g],r=l.url;bh.isAbsolute(r)||(r=e.join(r).url);l=bh.Package.fromJSON(b,Object.assign({},
l,{url:r}));n[m].versions[g]=l}}this.packageMap=n;this.individualPackageDirs=f.individualPackageDirs.map(k);this.devPackageDirs=f.devPackageDirs.map(k);this.packageBaseDirs=f.packageBaseDirs.map(k);this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};dj.prototype.updateFromJSON=function(f){var k=this.packageMap,n;for(n in f.packageMap){var b=f.packageMap[n];k[n]||(k[n]={});k[n].latest?bh.semver.gt(b.latest,k[n].latest)&&(k[n].latest=b.latest):k[n].latest;k[n].versions||
(k[n].versions={});var e=this.System,m=bh.resource(e.baseURL),a;for(a in b.versions){var g=b.versions[a],l=g.url;bh.isAbsolute(l)||(l=m.join(l).url);g=new bh.Package.fromJSON(e,Object.assign({},g,{url:l}));k[n].versions[a]=g}}this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};dj.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};dj.prototype.isReady=function(){return!this._readyPromise};dj.prototype.withPackagesDo=function(f){for(var k in this.packageMap){var n=
this.packageMap[k].versions,b;for(b in n)f(n[b])}};dj.prototype.findPackage=function(f){for(var k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n){var e=n[b];if(f(e))return e}}return null};dj.prototype.filterPackages=function(f){var k=[];this.withPackagesDo(function(n){return f(n)&&k.push(n)});return k};dj.prototype.allPackages=function(){var f=[],k;for(k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n)f.push(n[b])}return f};dj.prototype.sortPackagesByVersion=
function(f){return f.sort(function(k,n){return bh.semver.compare(k.version,n.version,!0)})};dj.prototype.matches=function(f,k,n){var b=f.version;return f.name!==k?!1:!n||bh.semver.validRange(b||"",!0)&&bh.semver.satisfies(b,n,!0)?!0:!1};dj.prototype.coversDirectory=function(f){f=bh.ensureResource(f).asDirectory();var k=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(f)}))return"individualPackageDirs";if(n.some(function(e){return e.equals(f)}))return"devPackageDirs";
var b=f.parent().parent();return k.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return bh.ensureResource(e.url).equals(f)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};dj.prototype.lookup=function(f,k){var n=this,b=this.packageMap[f];if(!b)return null;if(!k||"latest"===k)return b.versions[b.latest];if(!bh.semver.validRange(k,!0))throw Error("PackageRegistry>>lookup of "+f+": Invalid version - "+k);b=bh.obj.values(b.versions).filter(function(e){return n.matches(e,
f,k)});return 1>=b.length?b[0]:bh.arr.last(this.sortPackagesByVersion(b))};dj.prototype.findPackageDependency=function(f,k,n){n||(n=f.dependencies[k]||f.devDependencies[k]);bh.semver.validRange(n,!0)||(n=null);return this.lookup(k,n)};dj.prototype.findPackageWithURL=function(f){f.isResource&&(f=f.url);f.endsWith("/")&&(f=f.slice(0,-1));return this.byURL[f]};dj.prototype.findPackageHavingURL=function(f){f.isResource&&(f=f.url);f.endsWith("/")&&(f=f.slice(0,-1));var k=Infinity,n=null,b=this.byURL,e;
for(e in b)if(0===f.indexOf(e)){var m=f.slice(e.length).length;m>=k||(k=m,n=b[e])}return n};dj.prototype.findPackageForPath=function(f,k){if(bh.isAbsolute(f))return this.findPackageHavingURL(f);if(f.startsWith("."))return null;f=$jscomp.makeIterator(f.split("/")).next().value;if(!f)return null;var n=f.indexOf("@");if(-1<n){var b=f.slice(n+1);f=f.slice(0,n)}return!b&&k?this.findPackageDependency(k,f):this.lookup(f,b)};dj.prototype.resolvePath=function(f,k){if(bh.isAbsolute(f))return f;var n=k&&k.isPackage||
null;if(!n&&k){if(f.startsWith("."))return k=bh.resource(k),k.isDirectory()||(k=k.parent()),k.join(f).withRelativePartsResolved().url;n=this.findPackageHavingURL(k)}k=this.findPackageForPath(f,n);if(!k)return null;n=f.indexOf("/");return(f=-1===n||n===f.length-1?"":f.slice(n))?bh.resource(k.url).join(f).url:k.url};dj.prototype.update=function(){var f=this,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:if(!f.isReady())return T.return(f.whenReady().then(function(){return f.update()}));
k=bh.promise.deferred();f._readyPromise=k.promise;f.packageBaseDirs=f.packageBaseDirs.map(function(U){return U.asDirectory()});f.individualPackageDirs=f.individualPackageDirs.map(function(U){return U.asDirectory()});f.devPackageDirs=f.devPackageDirs.map(function(U){return U.asDirectory()});n={};T.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(f.packageBaseDirs);e=b.next();case 5:if(e.done){T.jumpTo(7);break}m=e.value;a=$jscomp;g=a.makeIterator;return T.yield(m.dirList(1),8);case 8:l=g.call(a,T.yieldResult),
r=l.next();case 9:if(r.done){e=b.next();T.jumpTo(5);break}v=r.value;y=$jscomp;A=y.makeIterator;return T.yield(v.dirList(1),12);case 12:E=A.call(y,T.yieldResult.filter(function(U){return U.isDirectory()})),F=E.next();case 13:if(F.done){r=l.next();T.jumpTo(9);break}H=F.value;return T.yield(f._discoverPackagesIn(H,n,"packageCollectionDirs"),16);case 16:n=T.yieldResult;F=E.next();T.jumpTo(13);break;case 7:I=$jscomp.makeIterator(f.individualPackageDirs),e=I.next();case 17:if(e.done){T.jumpTo(19);break}M=
e.value;return T.yield(f._discoverPackagesIn(M,n,"individualPackageDirs"),20);case 20:n=T.yieldResult;e=I.next();T.jumpTo(17);break;case 19:N=$jscomp.makeIterator(f.devPackageDirs),e=N.next();case 21:if(e.done){T.jumpTo(23);break}X=e.value;return T.yield(f._discoverPackagesIn(X,n,"devPackageDirs"),24);case 24:n=T.yieldResult;e=N.next();T.jumpTo(21);break;case 23:for(W in n)ea=n[W],Aa=ea.pkg,Ka=ea.config,K=ea.covered,f.System.debug&&console.log("[PackageRegistry] Adding discovered package "+W+" (from "+
K+")"),f._addPackageWithConfig(Aa,Ka,W+"/",K);f._updateLatestPackages();k.resolve();case 3:T.enterFinallyBlock();f._readyPromise=null;f.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(f.System).clearCache();T.leaveFinallyBlock(4);break;case 2:aa=T.enterCatchBlock();k.reject(aa);T.jumpTo(3);break;case 4:return T.return(f)}})};dj.prototype.addPackageAt=function(f,k,n){k=void 0===k?"individualPackageDirs":k;var b=this,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress){e=f.isResource?f.url:f;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return y.yield(b._discoverPackagesIn(bh.ensureResource(f).asDirectory(),{},void 0,n),2)}m=y.yieldResult;for(a in m)b.byURL[a]||(g=m[a],l=g.pkg,r=g.config,v=b._addPackageDir(a,k,!0),b._addPackageWithConfig(l,r,a+"/",v));b.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return y.return(b.findPackageWithURL(f))})};
dj.prototype.removePackage=function(f,k){k=void 0===k?!0:k;var n=f.name,b=f.version,e=bh.ensureResource(f.url),m=this.coversDirectory(e);"devPackageDirs"===m?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(e)}):"individualPackageDirs"===m&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(e)}));m=this.packageMap;m[n]&&(delete m[n].versions[b],0===Object.keys(m[n].versions).length&&delete m[n]);this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
k&&this._updateLatestPackages(f.name)};dj.prototype.updateNameAndVersionOf=function(f,k,n,b,e){var m=this.packageMap;m[k]?m[k].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+n+" of "+k+" found in registry ("+f.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+k+"@"+n+" not found in registry ("+f.url+")");this._addToPackageMap(f,b,e);m[k]&&m[k].versions[n]&&(delete m[k].versions[n],0===Object.keys(m[k].versions).length&&delete m[k]);this._updateLatestPackages(f.name)};
dj.prototype._updateLatestPackages=function(f){var k=this.packageMap;if(f&&k[f])k[f].latest=bh.arr.last(bh.semver.sort(Object.keys(k[f].versions),!0));else for(var n in k)k[n].latest=bh.arr.last(bh.semver.sort(Object.keys(k[n].versions),!0))};dj.prototype._discoverPackagesIn=function(f,k,n,b){b=void 0===b?null:b;var e=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!f.isDirectory())return y.return(k);m=f.asFile().url;if(k.hasOwnProperty(m))return y.return(k);
y.setCatchFinallyBlocks(2);a=b&&b[m]||new bh.Package(e.System,m);return y.yield(a.tryToLoadPackageConfig(),4)}if(2!=y.nextAddress)return g=y.yieldResult,a.setConfig(g),k[m]={pkg:a,config:g,covered:n},e.System.debug&&(l=g,r=l.name,v=l.version,console.log("[lively.modules] package "+r+"@"+v+" discovered in "+f.url)),y.return(k);y.enterCatchBlock();return y.return(k)})};dj.prototype._addToPackageMap=function(f,k,n,b){if(!k)throw Error("Cannot add package without name");n||(n="0.0.0");var e=this.packageMap;
k=e[k]||(e[k]={versions:{},latest:null});if(k.versions[n])if(e="Redefining version "+n+" of package "+f.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");k.versions[n]=f};dj.prototype._addPackageWithConfig=function(f,k,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);f.registerWithConfig(k);this._addToPackageMap(f,f.name,f.version);return f};dj.prototype._addPackageDir=function(f,k,n){k=void 0===k?"individualPackageDirs":k;n=void 0===n?!0:n;f=bh.ensureResource(f).asDirectory();
if(("packageCollectionDirs"===k||"maybe packageCollectionDirs"===k)&&(this.coversDirectory(f)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";f=this[k].concat(f);this[k]=n?bh.arr.uniqBy(f,function(b,e){return b.equals(e)}):f;return k};$jscomp.global.Object.defineProperties(dj.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var f=$jscomp.makeIterator(this.allPackages()),k=f.next();!k.done;k=f.next())k=k.value,this._byURL[k.url]=
k}return this._byURL}}});bh.PackageRegistry=dj;var ko=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");ko.arr=eg;ko.obj=Ag;ko.subscribe=Ao;ko.unsubscribe=qC;ko.module=Yg;var Jo=function(f){this.System=f;this.subscribeToSystemChanges()};Jo.forSystem=function(f){this._forSystemMap||(this._forSystemMap=new WeakMap);var k=this._forSystemMap.get(f);if(k)return k;k=new this(f);this._forSystemMap.set(f,k);return k};Jo.run=function(f,k){f=void 0===f?System:f;return this.forSystem(f).systemExports(k)};
Jo.findExportOfValue=function(f,k){k=void 0===k?System:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(n.run(k),2);b=e.yieldResult;return e.return(b.find(function(m){var a=m.local;m=ko.module(k,m.moduleId);m=m.recorder||k.get(m.id)||{};try{return m[a]===f}catch(g){return!1}}))})};Jo.prototype.subscribeToSystemChanges=function(){var f=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[ko.subscribe("lively.modules/moduleloaded",
function(n){return f.clearCacheFor(n.module)},k),ko.subscribe("lively.modules/modulechanged",function(n){return f.clearCacheFor(n.module)},k),ko.subscribe("lively.vm/doitresult",function(n){return f.clearCacheFor(n.targetModule)},k)]}};Jo.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var f=this.System;ko.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],f);ko.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],f);ko.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],f);this._notificationHandlers=null}};Jo.prototype.clearCacheFor=function(f){this.exportByModuleCache[f]=null};Jo.prototype.systemExports=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.rawExportsByModule(f),2);n=b.yieldResult;Object.keys(n).forEach(function(e){return k.resolveExportsOfModule(e,n)});return b.return(ko.arr.flatmap(Object.keys(n),function(e){return n[e]?n[e].resolvedExports||n[e].rawExports:
[]}))})};Jo.prototype.rawExportsByModule=function(f){var k=this,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(f=f||{},n=k.System,b=n.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),m={},a=function(l){1>l%50&&f.progress.step&&f.progress.step("Scanning ...",l/e.length)},g.yield(Promise.all(e.map(function(l,r){f.progress&&a(r);return k.rawExportsOfModule(l,f,m).then(function(v){return v?m[l]=v:null})})),2)):g.return(m)})};Jo.prototype.rawExportsOfModule=
function(f,k){k=void 0===k?{}:k;var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:b=n;e=b.System;m=b.exportByModuleCache;a=k.excludedPackages||[];g=k.excludedURLs||(k.excludedURLs=a.filter(function(T){return"string"===typeof T}));l=k.excludeFns||(k.excludeFns=a.filter(function(T){return"function"===typeof T}));r=k.excludedPackageURLs||(k.excludedPackageURLs=g.concat(g.map(function(T){return e.decanonicalize(T.replace(/\/?$/,
"/")).replace(/\/$/,"")})));v=k.livelyEnv||(k.livelyEnv=e.get("@lively-env")||{});k.modes||(k.modes=Object.keys(v.loadedModules||{}));if(m[f])return y=m[f].rawExports,aa.return(r.includes(y.packageURL)||l.some(function(T){return T(y.packageURL)})?null:m[f]);A=ko.module(e,f);E=A.pathInPackage();H=(F=A.package())&&F.main&&E===F.main;I=F?F.url:"";M=F?F.name:"";N=F?F.version:"";X={moduleId:f,isMain:H,pathInPackage:E,packageName:M,packageURL:I,packageVersion:N,exports:[]};if(r.includes(I)||l.some(function(T){return T(I)}))return aa.return(null);
aa.setCatchFinallyBlocks(2);W=A.format();return["register","es6","esm"].includes(W)?(Ka=X,aa.yield(A.exports(),7)):aa.yield(A.load(),6);case 6:ea=aa.yieldResult;X.exports=[];for(Aa in ea)"__useDefault"!==Aa&&"default"!==Aa&&X.exports.push({exported:Aa,local:Aa,type:"id"});aa.jumpTo(5);break;case 7:Ka.exports=aa.yieldResult;case 5:aa.leaveTryBlock(3);break;case 2:K=aa.enterCatchBlock(),X.error=K;case 3:return aa.return(m[f]={rawExports:X})}})};Jo.prototype.resolveExportsOfModule=function(f,k,n){var b=
this;n=void 0===n?{}:n;if(!n[f]){n[f]=!0;var e=k[f];if(e&&!e.resolvedExports){var m=this.System,a=ko.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=ko.arr.flatmap(e.rawExports.exports,function(g){var l=g.type,r=g.exported,v=g.local,y=g.fromModule;if("all"!==l)return[Object.assign({},a,{type:l,exported:r,local:v,fromModule:y})];g=m.decanonicalize(y,f);b.resolveExportsOfModule(g,k,n);return(k[g]&&k[g].resolvedExports||[]).map(function(A){return Object.assign({},
a,{type:A.type,exported:A.exported,local:A.local,fromModule:A.fromModule||y})})});n[f]=!1}}};$jscomp.global.Object.defineProperties(Jo.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Ba("bK",Jo);ko.ExportLookup=Jo;ko.default=Jo;var rn=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");rn.buildPackageMap=sF;rn.resolvePackageDependencies=iJ;rn.dependencyGraph=jJ;rn.arr=eg;rn.fun=Jn;
rn.promise=ph;rn.obj=Ag;rn.resource=Tj;rn.buildPackageMap=sF;rn.buildPackageMap=sF;rn.resolvePackageDependencies=iJ;rn.resolvePackageDependencies=iJ;rn.dependencyGraph=jJ;rn.dependencyGraph=jJ;var HM=Object.freeze({__proto__:null,buildPackageMap:sF,resolvePackageDependencies:iJ,dependencyGraph:jJ}),lo=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");lo.arr=eg;lo.unsubscribe=qC;lo.subscribe=Ao;lo.knownModuleNames=hJ;lo.classHolder=Uw;var Ss=function(f){this.System=
f;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};Ss.forSystem=function(f){var k=f["__lively.modules__modulePackageMapCache"];if(k)return k;k=new this(f);return f["__lively.modules__modulePackageMapCache"]=k};Ss.prototype.subscribeToSystemChanges=function(){var f=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[lo.subscribe("lively.modules/moduleloaded",function(n){return f.addModuleIdToCache(n.module)},k),lo.subscribe("lively.modules/moduleunloaded",
function(n){return f.removeModuleFromCache(n.module)},k),lo.subscribe("lively.modules/packageregistered",function(n){return f.clearCache()},k),lo.subscribe("lively.modules/packageremoved",function(n){return f.clearCache()},k)]}};Ss.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var f=this.System;lo.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],f);lo.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],f);lo.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],f);lo.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],f);this._notificationHandlers=null}};Ss.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};Ss.prototype.ensureCache=function(){var f=this.System,k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=lo.classHolder.Package.allPackageURLs(f),
m=0;m<e.length;m++)k[e[m]]=[];f=lo.knownModuleNames(f);for(m=0;m<f.length;m++){for(var a=f[m],g=void 0,l=0;l<e.length;l++){var r=e[l];a.startsWith(r)&&(!g||g.length<r.length)&&(g=r)}g?(k[g].push(a),n[a]=g):b[a]={}}this._cacheInitialized=!0;return this};Ss.prototype.addModuleIdToCache=function(f){this.ensureCache();var k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[f])return n[f];if(b[f])return null;for(var e=Object.keys(k),m,a=0;a<e.length;a++){var g=e[a];f.startsWith(g)&&
(!m||m.length<g.length)&&(m=g)}if(m)return(k[m]||(k[m]=[])).push(f),n[f]=m;b[f]={};return null};Ss.prototype.removeModuleFromCache=function(f){if(this._cacheInitialized){var k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(f))delete b[f];else if(b=n[f])delete n[f],k[b]&&lo.arr.remove(k[b],f)}};Ss.prototype.getPackageURLForModuleId=function(f){return this.modulesToPackage[f]||this.addModuleIdToCache(f)};Ss.prototype.getModuleIdsForPackageURL=function(f){this.ensureCache();
return this.packageToModule[f]||[]};lo.ModulePackageMapping=Ss;lo.default=Ss;var nd=lively.FreezerRuntime.recorderFor("lively.modules/index.js");nd.changeSystem=kJ;nd.wrapModuleResolution=lJ;nd.unwrapModuleResolution=mJ;nd.loadedModules=nJ;nd.module=tF;nd.isModuleLoaded=oJ;nd.doesModuleExist=pJ;nd.printSystemConfig=qJ;nd.whenLoaded=rJ;nd.importPackage=sJ;nd.registerPackage=tJ;nd.removePackage=uJ;nd.reloadPackage=vJ;nd.getPackages=wJ;nd.getPackage=xJ;nd.getPackageOfModule=yJ;nd.ensurePackage=zJ;nd.applyPackageConfig=
AJ;nd.lookupPackage=BJ;nd.moduleSourceChange=CJ;nd.requireMap=DJ;nd.isHookInstalled=EJ;nd.installHook=FJ;nd.removeHook=GJ;nd.wrapModuleLoad=HJ;nd.unwrapModuleLoad=IJ;nd.getSystem=Tl;nd.removeSystem=Un;nd.prepareSystem=Ux;nd._printSystemConfig=eJ;nd._unwrapModuleResolution=Tx;nd._wrapModuleResolution=fA;nd._whenLoaded=fJ;nd._module=Yg;nd._doesModuleExist=rk;nd._isModuleLoaded=$k;nd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;nd.defaultSystem=
nd.defaultSystem||nd.prepareSystem(nd.GLOBAL.System);var qU=nd.defaultSystem;nd.System=qU;nd.defaultSystem=qU;nd.getSystem=Tl;nd.getSystem=Tl;nd.removeSystem=Un;nd.removeSystem=Un;nd.loadedModules=nJ;nd.loadedModules=nJ;nd.printSystemConfig=qJ;nd.printSystemConfig=qJ;nd.whenLoaded=rJ;nd.whenLoaded=rJ;nd.changeSystem=kJ;nd.changeSystem=kJ;nd.module=tF;nd.module=tF;nd.doesModuleExist=pJ;nd.doesModuleExist=pJ;nd.isModuleLoaded=oJ;nd.isModuleLoaded=oJ;nd.unwrapModuleResolution=mJ;nd.unwrapModuleResolution=
mJ;nd.wrapModuleResolution=lJ;nd.wrapModuleResolution=lJ;nd.Package=Gj;nd._getPackage=Oe;nd._ensurePackage=vf;nd.getPackageSpecs=qh;nd._applyPackageConfig=Ne;nd._importPackage=hf;nd._removePackage=Sf;nd._reloadPackage=If;nd._registerPackage=bg;nd._lookupPackage=qe;nd.importPackage=sJ;nd.importPackage=sJ;nd.registerPackage=tJ;nd.registerPackage=tJ;nd.removePackage=uJ;nd.removePackage=uJ;nd.reloadPackage=vJ;nd.reloadPackage=vJ;nd.getPackages=wJ;nd.getPackages=wJ;nd.getPackage=xJ;nd.getPackage=xJ;nd.getPackageOfModule=
yJ;nd.getPackageOfModule=yJ;nd.ensurePackage=zJ;nd.ensurePackage=zJ;nd.applyPackageConfig=AJ;nd.applyPackageConfig=AJ;nd.lookupPackage=BJ;nd.lookupPackage=BJ;nd.PackageRegistry=dj;nd.PackageRegistry=dj;nd.PackageRegistry=dj;nd._moduleSourceChange=ie;nd.moduleSourceChange=CJ;nd.moduleSourceChange=CJ;nd.computeRequireMap=$b;nd.requireMap=DJ;nd.requireMap=DJ;nd._isHookInstalled=Nc;nd._installHook=xb;nd._removeHook=wc;nd.isHookInstalled=EJ;nd.isHookInstalled=EJ;nd.installHook=FJ;nd.installHook=FJ;nd.removeHook=
GJ;nd.removeHook=GJ;nd._wrapModuleLoad=Ih;nd._unwrapModuleLoad=sk;nd.wrapModuleLoad=HJ;nd.wrapModuleLoad=HJ;nd.unwrapModuleLoad=IJ;nd.unwrapModuleLoad=IJ;nd.default=Jo;nd.ExportLookup=Jo;nd.cjs=HM;nd.cjs=HM;nd.cjs=HM;nd.default=RG;nd.semver=RG;nd.ImportInjector=Rt;nd.scripting=nd.defaultSystem._scripting={module:nd._module,ensurePackage:nd._ensurePackage,registerPackage:nd._registerPackage,importPackage:nd._importPackage,lookupPackage:nd._lookupPackage,ImportInjector:Rt};nd.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";nd.classRuntime=LD;nd.defaultSystem.global[nd.defaultClassToFunctionConverterName]=nd.classRuntime.initializeClass;nd.classHolder=Uw;nd.ModulePackageMapping=Ss;nd.classHolder.ModulePackageMapping=nd.ModulePackageMapping;nd.classHolder.Package=nd.Package;nd.classHolder.PackageRegistry=nd.PackageRegistry;var rU=Ba("bJ",nd.scripting);nd.scripting=rU;nd.scripting=rU;var IM=Object.freeze({__proto__:null,System:qU,getSystem:Tl,removeSystem:Un,loadedModules:nJ,printSystemConfig:qJ,
whenLoaded:rJ,changeSystem:kJ,module:tF,doesModuleExist:pJ,isModuleLoaded:oJ,unwrapModuleResolution:mJ,wrapModuleResolution:lJ,importPackage:sJ,registerPackage:tJ,removePackage:uJ,reloadPackage:vJ,getPackages:wJ,getPackage:xJ,getPackageOfModule:yJ,ensurePackage:zJ,applyPackageConfig:AJ,lookupPackage:BJ,PackageRegistry:dj,moduleSourceChange:CJ,requireMap:DJ,isHookInstalled:EJ,installHook:FJ,removeHook:GJ,wrapModuleLoad:HJ,unwrapModuleLoad:IJ,ExportLookup:Jo,cjs:HM,semver:RG,scripting:rU});Ba("U",IM);
var En=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");En.isReference=SP;En.removeUnreachableObjects=Rm;En.obj=Ag;En.Path=$h;En.connect=Zk;En.disconnectAll=er;En.isReference=SP;En.isReference=SP;var JC=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(f){var k=f.snapshot,
n;for(n in k){var b=k[n],e=b.props&&b.props.textAndAttributes;if(e){var m=e.value;if(!Array.isArray(m))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(m.length&&"string"!==typeof m[0]){m=[].concat.apply([],m);for(var a=0;a<m.length;a+=2){var g=m[a+1];g&&Array.isArray(g)&&(m[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(g))))}b.props.textAndAttributes=Object.assign({},e,{value:m})}}}return f}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(f,k){(k=k.refForId(f.id).realObj)&&k.isMorph&&k.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name})||n.fixControls(),n.minimizedBounds=null,En.disconnectAll(n.get("minimize")),En.connect(n.get("minimize"),
"onMouseDown",n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return f}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(f){var k=f.id,n=f.snapshot,b;for(b in n){var e=n[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(m){m=
n[m.id];var a=n[m.props.rules.value.id];return!m.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}En.removeUnreachableObjects([k],n);return f}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(f){var k=f.snapshot,n;for(n in k){var b=k[n],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return f}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(f,k){(k=k.refForId(f.id).realObj)&&k.isMorph&&k.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var e in En.obj.dissoc(b.rules,["_rev"]))b.rules[e]=b.unwrapFoldedProps(b.rules[e])})});return f}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(f){var k=f.snapshot,n;for(n in k){var b=k[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return f}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(f){var k=f.snapshot,n=f.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(A){return"{"+A+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in b){for(var m=b[e]["index.js"],a=$jscomp.makeIterator(n),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value),r=l.next().value;
g=l.next().value;if(l=l.next().value){r=new RegExp('(import\\s)(.*)(\\sfrom \\"'+r+")","g");var v=r.exec(m);v&&(m=m.replace(r,"import "+l(v[2])+'from "'+g))}else m=m.replace(new RegExp(r,"g"),g)}b[e]["index.js"]=m}for(var y in k)if((e=k[y]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+e.module.pathInPackage,m=$jscomp.makeIterator(n),a=m.next();!a.done;a=m.next())if(l=$jscomp.makeIterator(a.value),a=l.next().value,g=l.next().value,l.next(),l=l.next().value,b.includes(a)){e.module.package.name=
g;e.module.package.version="0.1.0";e.module.pathInPackage=l||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return f}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(f,k){k=$jscomp.makeIterator(k.objectRefs());for(var n=k.next();!n.done;n=k.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return f}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(f){var k=
f.snapshot,n;for(n in k){var b=k[n],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete k[n],"InspectorTreeData"==e.className&&delete k[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete k[n])}return f}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(f){var k=
f.id,n=f.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&En.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&En.isReference(b.props.commit.value))){var e=n[b.props.commit.value.id].props;b.props.commit.value='__lv_expr__:({type: "'+e.type.value+'", name: "'+e.name.value+'", _id: "'+e._id.value+'"})'}});En.removeUnreachableObjects([k],n);return f}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(f){var k=f.packages,
n,b=En.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(k))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(k,n);return f}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(f){Object.values(f.snapshot).map(function(k){k.props.fontFamily&&
"Camphor"==k.props.fontFamily.value&&(k.props.fontFamily.value="Nunito")});return f}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(f){Object.values(f.snapshot).map(function(k){k.props.master&&"string"===typeof k.props.master.value&&(k.props.master.value=k.props.master.value.split("styleguide://style guide").join("styleguide://System"))});return f}}];En.migrations=JC;En.migrations=JC;En.migrations=JC;var tf=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");
tf.normalizeOptions=function(f){f=Object.assign({reinitializeIds:!1},f);f.reinitializeIds&&(f.reinitializeIds="function"===typeof f.reinitializeIds?f.reinitializeIds:function(k,n){return n.realObj.isMorph?tf.newMorphId(n.realObj.constructor):null});return f};tf.serializeMorph=uF;tf.deserializeMorph=vF;tf.loadWorldFromResource=JJ;tf.saveWorldToResource=TP;tf.copyMorph=KJ;tf.createMorphSnapshot=gA;tf.loadMorphFromSnapshot=Wu;tf.resourceToJSON=uZ;tf.findPackagesInFileSpec=vZ;tf.packagesOfSnapshot=UP;
tf.loadPackagesAndModulesOfSnapshot=wF;tf.findRequiredPackagesOfSnapshot=LJ;tf.requiredModulesOfSnapshot=pt;tf.deserializeWithMigrations=Eo;tf.serialize=js;tf.MorphicEnv=Fs;tf.resource=Tj;tf.newMorphId=Qa;tf.morph=qa;tf.pathForBrowserHistory=ca;tf.serializeMorph=uF;tf.serializeMorph=uF;tf.deserializeMorph=vF;tf.deserializeMorph=vF;tf.loadWorldFromResource=JJ;tf.loadWorldFromResource=JJ;tf.saveWorldToResource=TP;tf.saveWorldToResource=TP;tf.copyMorph=KJ;tf.copyMorph=KJ;tf.modules=IM;tf.createFiles=
ka;tf.promise=ph;tf.graph=wu;tf.arr=eg;tf.migrations=JC;var OD=tf.modules;tf.registerPackage=OD.registerPackage;tf.module=OD.module;tf.getPackage=OD.getPackage;tf.ensurePackage=OD.ensurePackage;tf.lookupPackage=OD.lookupPackage;tf.semver=OD.semver;tf.objectScriptingEnabled=!1;tf.createMorphSnapshot=gA;tf.createMorphSnapshot=gA;tf.loadMorphFromSnapshot=Wu;tf.loadMorphFromSnapshot=Wu;tf.packagesOfSnapshot=UP;tf.packagesOfSnapshot=UP;tf.loadPackagesAndModulesOfSnapshot=wF;tf.loadPackagesAndModulesOfSnapshot=
wF;tf.findRequiredPackagesOfSnapshot=LJ;tf.findRequiredPackagesOfSnapshot=LJ;var Av="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ela={},N6=Av.MutationObserver||Av.WebKitMutationObserver;if(N6){var O6=0,fla=new N6(MJ),P6=Av.document.createTextNode("");fla.observe(P6,{characterData:!0});var sU=function(){P6.data=O6=++O6%2}}else if(Av.setImmediate||"undefined"===typeof Av.MessageChannel)sU="document"in Av&&"onreadystatechange"in Av.document.createElement("script")?
function(){var f=Av.document.createElement("script");f.onreadystatechange=function(){MJ();f.onreadystatechange=null;f.parentNode.removeChild(f);f=null};Av.document.documentElement.appendChild(f)}:function(){setTimeout(MJ,0)};else{var Q6=new Av.MessageChannel;Q6.port1.onmessage=MJ;sU=function(){Q6.port2.postMessage(0)}}var VP,xF=[],gla=ela=function(f){1!==xF.push(f)||VP||sU()},tU={},R6="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&
"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(R6){var S6=new Uint8Array(16);tU=function(){R6(S6);return S6}}else{var T6=Array(16);tU=function(){for(var f=0,k;16>f;f++)0===(f&3)&&(k=4294967296*Math.random()),T6[f]=k>>>((f&3)<<3)&255;return T6}}for(var U6=tU,hla={},Ko=[],JM=0;256>JM;++JM)Ko[JM]=(JM+256).toString(16).substr(1);var V6=hla=function(f,k){k=k||0;return[Ko[f[k++]],Ko[f[k++]],Ko[f[k++]],Ko[f[k++]],"-",Ko[f[k++]],Ko[f[k++]],"-",Ko[f[k++]],Ko[f[k++]],
"-",Ko[f[k++]],Ko[f[k++]],"-",Ko[f[k++]],Ko[f[k++]],Ko[f[k++]],Ko[f[k++]],Ko[f[k++]],Ko[f[k++]]].join("")},ila={},W6,uU,vU=0,wU=0,jla=ila=function(f,k,n){n=k&&n||0;var b=k||[];f=f||{};var e=f.node||W6,m=void 0!==f.clockseq?f.clockseq:uU;if(null==e||null==m){var a=U6();null==e&&(e=W6=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);null==m&&(m=uU=(a[6]<<8|a[7])&16383)}a=void 0!==f.msecs?f.msecs:(new Date).getTime();var g=void 0!==f.nsecs?f.nsecs:wU+1,l=a-vU+(g-wU)/1E4;0>l&&void 0===f.clockseq&&(m=m+1&16383);(0>
l||a>vU)&&void 0===f.nsecs&&(g=0);if(1E4<=g)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");vU=a;wU=g;uU=m;a+=122192928E5;f=(1E4*(a&268435455)+g)%4294967296;b[n++]=f>>>24&255;b[n++]=f>>>16&255;b[n++]=f>>>8&255;b[n++]=f&255;f=a/4294967296*1E4&268435455;b[n++]=f>>>8&255;b[n++]=f&255;b[n++]=f>>>24&15|16;b[n++]=f>>>16&255;b[n++]=m>>>8|128;b[n++]=m&255;for(m=0;6>m;++m)b[n+m]=e[m];return k?k:V6(b)},X6={};X6=function(f,k,n){n=k&&n||0;"string"==typeof f&&(k="binary"===f?Array(16):null,f=null);
f=f||{};f=f.random||(f.rng||U6)();f[6]=f[6]&15|64;f[8]=f[8]&63|128;if(k)for(var b=0;16>b;++b)k[n+b]=f[b];return k||V6(f)};var kla={},xU=X6;xU.v1=jla;var lla=kla=xU.v4=xU,Uh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mla={},nla=mla=function(f){function k(v,y){var A=v[0],E=v[1],F=v[2],H=v[3];A+=(E&F|~E&H)+y[0]-680876936|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[1]-389564586|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[2]+606105819|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[3]-
1044525330|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[4]-176418897|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[5]+1200080426|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[6]-1473231341|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[7]-45705983|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[8]+1770035416|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[9]-1958414417|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[10]-42063|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[11]-1990404162|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[12]+1804603682|0;A=(A<<7|A>>>25)+E|
0;H+=(A&E|~A&F)+y[13]-40341101|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[14]-1502002290|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[15]+1236535329|0;E=(E<<22|E>>>10)+F|0;A+=(E&H|F&~H)+y[1]-165796510|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[6]-1069501632|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[11]+643717713|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[0]-373897302|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[5]-701558691|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[10]+38016083|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[15]-660478335|
0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[4]-405537848|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[9]+568446438|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[14]-1019803690|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[3]-187363961|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[8]+1163531501|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[13]-1444681467|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[2]-51403784|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[7]+1735328473|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[12]-1926607734|0;E=(E<<20|E>>>12)+F|0;A+=(E^F^
H)+y[5]-378558|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[8]-2022574463|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[11]+1839030562|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[14]-35309556|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[1]-1530992060|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[4]+1272893353|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[7]-155497632|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[10]-1094730640|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[13]+681279174|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[0]-358537222|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[3]-722521979|
0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[6]+76029189|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[9]-640364487|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[12]-421815835|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[15]+530742520|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[2]-995338651|0;E=(E<<23|E>>>9)+F|0;A+=(F^(E|~H))+y[0]-198630844|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[7]+1126891415|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[14]-1416354905|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[5]-57434055|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[12]+1700485571|
0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[3]-1894986606|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[10]-1051523|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[1]-2054922799|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[8]+1873313359|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[15]-30611744|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[6]-1560198380|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[13]+1309151649|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[4]-145523070|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[11]-1120210379|0;H=(H<<10|H>>>22)+A|0;F+=(A^
(H|~E))+y[2]+718787259|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[9]-343485551|0;v[0]=A+v[0]|0;v[1]=((E<<21|E>>>11)+F|0)+v[1]|0;v[2]=F+v[2]|0;v[3]=H+v[3]|0}function n(v){var y=[],A;for(A=0;64>A;A+=4)y[A>>2]=v.charCodeAt(A)+(v.charCodeAt(A+1)<<8)+(v.charCodeAt(A+2)<<16)+(v.charCodeAt(A+3)<<24);return y}function b(v){var y=[],A;for(A=0;64>A;A+=4)y[A>>2]=v[A]+(v[A+1]<<8)+(v[A+2]<<16)+(v[A+3]<<24);return y}function e(v){var y=v.length,A=[1732584193,-271733879,-1732584194,271733878],E;for(E=64;E<=y;E+=64)k(A,
n(v.substring(E-64,E)));v=v.substring(E-64);var F=v.length;var H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<F;E+=1)H[E>>2]|=v.charCodeAt(E)<<(E%4<<3);H[E>>2]|=128<<(E%4<<3);if(55<E)for(k(A,H),E=0;16>E;E+=1)H[E]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;H[14]=v;H[15]=y;k(A,H);return A}function m(v){var y;for(y=0;y<v.length;y+=1){var A=y,E,F=v[y],H="";for(E=0;4>E;E+=1)H+=r[F>>8*E+4&15]+r[F>>8*E&15];v[A]=H}return v.join("")}function a(v){/[\u0080-\uFFFF]/.test(v)&&
(v=unescape(encodeURIComponent(v)));return v}function g(v){var y=[],A=v.length,E;for(E=0;E<A-1;E+=2)y.push(parseInt(v.substr(E,2),16));return String.fromCharCode.apply(String,y)}function l(){this.reset()}var r="0123456789abcdef".split("");m(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function v(y,A){y=y|0||0;return 0>y?Math.max(y+A,0):Math.min(y,A)}ArrayBuffer.prototype.slice=function(y,A){var E=(this||Uh).byteLength;y=v(y,E);var F=E;A!==f&&(F=v(A,E));if(y>
F)return new ArrayBuffer(0);F-=y;A=new ArrayBuffer(F);E=new Uint8Array(A);y=new Uint8Array(this||Uh,y,F);E.set(y);return A}}();l.prototype.append=function(v){this.appendBinary(a(v));return this||Uh};l.prototype.appendBinary=function(v){(this||Uh)._buff+=v;(this||Uh)._length+=v.length;v=(this||Uh)._buff.length;var y;for(y=64;y<=v;y+=64)k((this||Uh)._hash,n((this||Uh)._buff.substring(y-64,y)));(this||Uh)._buff=(this||Uh)._buff.substring(y-64);return this||Uh};l.prototype.end=function(v){var y=(this||
Uh)._buff,A=y.length,E,F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<A;E+=1)F[E>>2]|=y.charCodeAt(E)<<(E%4<<3);this._finish(F,A);y=m((this||Uh)._hash);v&&(y=g(y));this.reset();return y};l.prototype.reset=function(){(this||Uh)._buff="";(this||Uh)._length=0;(this||Uh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Uh};l.prototype.getState=function(){return{buff:(this||Uh)._buff,length:(this||Uh)._length,hash:(this||Uh)._hash}};l.prototype.setState=function(v){(this||Uh)._buff=v.buff;
(this||Uh)._length=v.length;(this||Uh)._hash=v.hash;return this||Uh};l.prototype.destroy=function(){delete (this||Uh)._hash;delete (this||Uh)._buff;delete (this||Uh)._length};l.prototype._finish=function(v,y){v[y>>2]|=128<<(y%4<<3);if(55<y)for(k((this||Uh)._hash,v),y=0;16>y;y+=1)v[y]=0;var A=8*(this||Uh)._length;A=A.toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(A[2],16);A=parseInt(A[1],16)||0;v[14]=y;v[15]=A;k((this||Uh)._hash,v)};l.hash=function(v,y){return l.hashBinary(a(v),y)};l.hashBinary=function(v,
y){v=e(v);v=m(v);return y?g(v):v};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=function(v){var y=(this||Uh)._buff.buffer,A=new Uint8Array(y.byteLength+v.byteLength);A.set(new Uint8Array(y));A.set(new Uint8Array(v),y.byteLength);y=A.length;(this||Uh)._length+=v.byteLength;for(v=64;v<=y;v+=64)k((this||Uh)._hash,b(A.subarray(v-64,v)));(this||Uh)._buff=v-64<y?new Uint8Array(A.buffer.slice(v-64)):new Uint8Array(0);return this||Uh};l.ArrayBuffer.prototype.end=function(v){var y=
(this||Uh)._buff,A=y.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F;for(F=0;F<A;F+=1)E[F>>2]|=y[F]<<(F%4<<3);this._finish(E,A);y=m((this||Uh)._hash);v&&(y=g(y));this.reset();return y};l.ArrayBuffer.prototype.reset=function(){(this||Uh)._buff=new Uint8Array(0);(this||Uh)._length=0;(this||Uh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Uh};l.ArrayBuffer.prototype.getState=function(){var v=l.prototype.getState.call(this||Uh);v.buff=String.fromCharCode.apply(null,new Uint8Array(v.buff));
return v};l.ArrayBuffer.prototype.setState=function(v){var y=v.buff,A=y.length,E=new ArrayBuffer(A);E=new Uint8Array(E);var F;for(F=0;F<A;F+=1)E[F]=y.charCodeAt(F);v.buff=E;return l.prototype.setState.call(this||Uh,v)};l.ArrayBuffer.prototype.destroy=l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;l.ArrayBuffer.hash=function(v,y){var A=new Uint8Array(v),E=A.length;v=[1732584193,-271733879,-1732584194,271733878];var F;for(F=64;F<=E;F+=64)k(v,b(A.subarray(F-64,F)));A=F-64<E?
A.subarray(F-64):new Uint8Array(0);var H=A.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<H;F+=1)I[F>>2]|=A[F]<<(F%4<<3);I[F>>2]|=128<<(F%4<<3);if(55<F)for(k(v,I),F=0;16>F;F+=1)I[F]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(E[2],16);E=parseInt(E[1],16)||0;I[14]=A;I[15]=E;k(v,I);v=m(v);return y?g(v):v};return l}(),PD={stringify:function(f){var k=[];k.push({obj:f});f="";for(var n,b,e,m,a,g,l;n=k.pop();)if(b=n.obj,e=n.prefix||"",n=n.val||"",f+=e,n)f+=n;else if("object"!==typeof b)f+=
"undefined"===typeof b?null:JSON.stringify(b);else if(null===b)f+="null";else if(Array.isArray(b)){k.push({val:"]"});for(e=b.length-1;0<=e;e--)n=0===e?"":",",k.push({obj:b[e],prefix:n});k.push({val:"["})}else{n=[];for(m in b)b.hasOwnProperty(m)&&n.push(m);k.push({val:"}"});for(e=n.length-1;0<=e;e--)a=n[e],g=b[a],l=0<e?",":"",l+=JSON.stringify(a)+":",k.push({obj:g,prefix:l});k.push({val:"{"})}return f},parse:function(f){for(var k=[],n=[],b=0,e,m,a,g;;)if(e=f[b++],"}"===e||"]"===e||"undefined"===typeof e){if(1===
k.length)return k.pop();KC(k.pop(),k,n)}else switch(e){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;KC(null,k,n);break;case "t":b+=3;KC(!0,k,n);break;case "f":b+=4;KC(!1,k,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":e="";for(b--;;)if(m=f[b++],/[\d\.\-e\+]/.test(m))e+=m;else{b--;break}KC(parseFloat(e),k,n);break;case '"':e="";m=void 0;for(a=0;;)if(g=f[b++],'"'!==g||"\\"===m&&1===a%2)e+=g,m=g,"\\"===m?a++:a=0;else break;
KC(JSON.parse('"'+e+'"'),k,n);break;case "[":e={element:[],index:k.length};k.push(e.element);n.push(e);break;case "{":e={element:{},index:k.length};k.push(e.element);n.push(e);break;default:throw Error("unexpectedly reached end of input: "+e);}}},ola={},yU=ola=function(f){return function(){var k=arguments.length;if(k){for(var n=[],b=-1;++b<k;)n[b]=arguments[b];return f.call(this,n)}return f.call(this,[])}},pla={},xl=pla="function"===typeof Object.create?function(f,k){k&&(f.super_=k,f.prototype=Object.create(k.prototype,
{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,k){if(k){f.super_=k;var n=function(){};n.prototype=k.prototype;f.prototype=new n;f.prototype.constructor=f}},QD="object"==typeof Reflect?Reflect:null,Y6=QD&&"function"==typeof QD.apply?QD.apply:function(f,k,n){return Function.prototype.apply.call(f,k,n)};var qla=QD&&"function"==typeof QD.ownKeys?QD.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:
function(f){return Object.getOwnPropertyNames(f)};var Z6=Number.isNaN||function(f){return f!=f};Dk.EventEmitter=Dk;Dk.prototype._events=void 0;Dk.prototype._eventsCount=0;Dk.prototype._maxListeners=void 0;var $6=10;Object.defineProperty(Dk,"defaultMaxListeners",{enumerable:!0,get:function(){return $6},set:function(f){if("number"!=typeof f||0>f||Z6(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");$6=f}});Dk.init=function(){void 0!==
this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Dk.prototype.setMaxListeners=function(f){if("number"!=typeof f||0>f||Z6(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this};Dk.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Dk.defaultMaxListeners:this._maxListeners};
Dk.prototype.emit=function(f){for(var k=[],n=1;n<arguments.length;n++)k.push(arguments[n]);n="error"===f;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var e;if(0<k.length&&(e=k[0]),e instanceof Error)throw e;k=Error("Unhandled error."+(e?" ("+e.message+")":""));throw k.context=e,k;}n=b[f];if(void 0===n)return!1;if("function"==typeof n)Y6(n,this,k);else for(e=n.length,b=zZ(n,e),n=0;n<e;++n)Y6(b[n],this,k);return!0};Dk.prototype.addListener=function(f,k){return wZ(this,
f,k,!1)};Dk.prototype.on=Dk.prototype.addListener;Dk.prototype.prependListener=function(f,k){return wZ(this,f,k,!0)};Dk.prototype.once=function(f,k){return NJ(k),this.on(f,xZ(this,f,k)),this};Dk.prototype.prependOnceListener=function(f,k){return NJ(k),this.prependListener(f,xZ(this,f,k)),this};Dk.prototype.removeListener=function(f,k){var n,b,e;if((NJ(k),void 0===(b=this._events))||void 0===(n=b[f]))return this;if(n===k||n.listener===k)0==--this._eventsCount?this._events=Object.create(null):(delete b[f],
b.removeListener&&this.emit("removeListener",f,n.listener||k));else if("function"!=typeof n){var m=-1;for(e=n.length-1;0<=e;e--)if(n[e]===k||n[e].listener===k){var a=n[e].listener;m=e;break}if(0>m)return this;if(0===m)n.shift();else{for(;m+1<n.length;m++)n[m]=n[m+1];n.pop();!0}1===n.length&&(b[f]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",f,a||k)}return this};Dk.prototype.off=Dk.prototype.removeListener;Dk.prototype.removeAllListeners=function(f){var k,n;if(void 0===(n=this._events))return this;
if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[f]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(k=b[n])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(k=n[f]))this.removeListener(f,k);else if(void 0!==
k)for(n=k.length-1;0<=n;n--)this.removeListener(f,k[n]);return this};Dk.prototype.listeners=function(f){return yZ(this,f,!0)};Dk.prototype.rawListeners=function(f){return yZ(this,f,!1)};Dk.listenerCount=function(f,k){return"function"==typeof f.listenerCount?f.listenerCount(k):AZ.call(f,k)};Dk.prototype.listenerCount=AZ;Dk.prototype.eventNames=function(){return 0<this._eventsCount?qla(this._events):[]};var bv=Dk,a7="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rla=
{},WJ=uj,Yu=LC(gla),PZ=LC(lla),RJ=LC(nla),i_=LC(PD),MC=LC(yU),St=LC(xl),vq=bv;Vx.prototype.get=function(f){return this._store["$"+f]};Vx.prototype.set=function(f,k){this._store["$"+f]=k;return!0};Vx.prototype.has=function(f){return"$"+f in this._store};Vx.prototype.delete=function(f){f="$"+f;var k=f in this._store;delete this._store[f];return k};Vx.prototype.forEach=function(f){for(var k=Object.keys(this._store),n=0,b=k.length;n<b;n++){var e=k[n],m=this._store[e];e=e.substring(1);f(m,e)}};Object.defineProperty(Vx.prototype,
"size",{get:function(){return Object.keys(this._store).length}});yF.prototype.add=function(f){return this._store.set(f,!0)};yF.prototype.has=function(f){return this._store.has(f)};yF.prototype.forEach=function(f){this._store.forEach(function(k,n){f(n)})};Object.defineProperty(yF.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);
return f&&"get"in f&&Map[Symbol.species]===Map}()){var GF=Set;var kr=Map}else GF=yF,kr=Vx;var BZ=Function.prototype.toString,Qba=BZ.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var AF=!!localStorage.getItem("_pouch_check_localstorage")}catch(f){AF=!1}St(NC,vq.EventEmitter);NC.prototype.addListener=function(f,k,n,b){function e(){if(m._listeners[k])if(a)a="waiting";else{a=!0;var g=zF(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));
n.changes(g).on("change",function(l){l.seq>b.since&&!b.cancelled&&(b.since=l.seq,b.onChange(l))}).on("complete",function(){"waiting"===a&&Yu(e);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[k]){var m=this,a=!1;this._listeners[k]=e;this.on(f,e)}};NC.prototype.removeListener=function(f,k){k in this._listeners&&(vq.EventEmitter.prototype.removeListener.call(this,f,this._listeners[k]),delete this._listeners[k])};NC.prototype.notifyLocalWindows=function(f){AF&&(localStorage[f]="a"===localStorage[f]?
"b":"a")};NC.prototype.notify=function(f){this.emit(f);this.notifyLocalWindows(f)};var RC="function"===typeof Object.assign?Object.assign:function(f){for(var k=Object(f),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(k[e]=b[e])}return k};St(al,Error);al.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new al(401,"unauthorized","Name or password is incorrect.");
var sla=new al(400,"bad_request","Missing JSON list of 'docs'"),ut=new al(404,"not_found","missing"),QC=new al(409,"conflict","Document update conflict"),IZ=new al(400,"bad_request","_id field must contain a string"),Wba=new al(412,"missing_id","_id is required for puts"),Vba=new al(400,"bad_request","Only reserved document ids may start with underscore.");new al(412,"precondition_failed","Database not open");var GZ=new al(500,"unknown_error","Database encountered an unknown error"),h_=new al(500,
"badarg","Some query argument is invalid");new al(400,"invalid_request","Request was invalid");var tla=new al(400,"query_parse_error","Some query parameter is invalid"),g_=new al(500,"doc_validation","Bad special document member"),OJ=new al(400,"bad_request","Something wrong with the request"),zU=new al(400,"bad_request","Document must be a JSON object");new al(404,"not_found","Database not found");var jQ=new al(500,"indexed_db_went_bad","unknown");new al(500,"web_sql_went_bad","unknown");new al(500,
"levelDB_went_went_bad","unknown");new al(403,"forbidden","Forbidden by design doc validate_doc_update function");var e_=new al(400,"bad_request","Invalid rev format");new al(412,"file_exists","The database could not be created, the file already exists.");var Mca=new al(412,"missing_stub","A pre-existing attachment stub wasn't found");new al(413,"invalid_url","Provided URL is invalid");var LZ="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
Yba=/(?:^|&)([^&=]*)=?([^&]*)/g,Xba=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dca=a7.setImmediate||a7.setTimeout,SJ=PZ.v4;St(BF,vq.EventEmitter);BF.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};BF.prototype.validateChanges=function(f){var k=f.complete,n=this;Mi._changesFilterPlugin?Mi._changesFilterPlugin.validate(f,
function(b){if(b)return k(b);n.doChanges(f)}):n.doChanges(f)};BF.prototype.doChanges=function(f){var k=this,n=f.complete;f=sn(f);"live"in f&&!("continuous"in f)&&(f.continuous=f.live);f.processChange=lca;"latest"===f.since&&(f.since="now");f.since||(f.since=0);if("now"===f.since)this.db.info().then(function(m){k.isCancelled?n(null,{status:"cancelled"}):(f.since=m.update_seq,k.doChanges(f))},n);else{if(Mi._changesFilterPlugin){if(Mi._changesFilterPlugin.normalize(f),Mi._changesFilterPlugin.shouldFilter(this,
f))return Mi._changesFilterPlugin.filter(this,f)}else["doc_ids","filter","selector","view"].forEach(function(m){m in f&&os("warn",'The "'+m+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in f||(f.descending=!1);f.limit=0===f.limit?1:f.limit;f.complete=n;var b=this.db._changes(f);if(b&&"function"===typeof b.cancel){var e=k.cancel;k.cancel=MC(function(m){b.cancel();e.apply(this,
m)})}}};St(vl,vq.EventEmitter);vl.prototype.post=Tm("post",function(f,k,n){"function"===typeof k&&(n=k,k={});if("object"!==typeof f||Array.isArray(f))return n(Ti(zU));this.bulkDocs({docs:[f]},k,gQ(n,f._id))});vl.prototype.put=Tm("put",function(f,k,n){function b(){var a=f._rev.split("-"),g=a[1];a=parseInt(a[0],10)+1;var l=OZ();f._revisions={start:a,ids:[l,g]};f._rev=a+"-"+l;k.new_edits=!1}function e(a){"function"===typeof m._put&&!1!==k.new_edits?m._put(f,k,a):m.bulkDocs({docs:[f]},k,gQ(a,f._id))}
"function"===typeof k&&(n=k,k={});if("object"!==typeof f||Array.isArray(f))return n(Ti(zU));HZ(f._id);if(jA(f._id)&&"function"===typeof this._putLocal)return f._deleted?this._removeLocal(f,n):this._putLocal(f,n);var m=this;k.force&&f._rev?(b(),e(function(a){n(a,a?null:{ok:!0,id:f._id,rev:f._rev})})):e(n)});vl.prototype.putAttachment=Tm("putAttachment",function(f,k,n,b,e){function m(g){var l="_rev"in g?parseInt(g._rev,10):0;g._attachments=g._attachments||{};g._attachments[k]={content_type:e,data:b,
revpos:++l};return a.put(g)}var a=this;"function"===typeof e&&(e=b,b=n,n=null);"undefined"===typeof e&&(e=b,b=n,n=null);e||os("warn","Attachment",k,"on document",f,"is missing content_type");return a.get(f).then(function(g){if(g._rev!==n)throw Ti(QC);return m(g)},function(g){if(g.reason===ut.message)return m({_id:f});throw g;})});vl.prototype.removeAttachment=Tm("removeAttachment",function(f,k,n,b){var e=this;e.get(f,function(m,a){if(m)b(m);else if(a._rev!==n)b(Ti(QC));else{if(!a._attachments)return b();
delete a._attachments[k];0===Object.keys(a._attachments).length&&delete a._attachments;e.put(a,b)}})});vl.prototype.remove=Tm("remove",function(f,k,n,b){"string"===typeof k?(f={_id:f,_rev:k},"function"===typeof n&&(b=n,n={})):"function"===typeof k?(b=k,n={}):(b=n,n=k);n=n||{};n.was_delete=!0;k={_id:f._id,_rev:f._rev||n.rev,_deleted:!0};if(jA(k._id)&&"function"===typeof this._removeLocal)return this._removeLocal(f,b);this.bulkDocs({docs:[k]},n,gQ(b,k._id))});vl.prototype.revsDiff=Tm("revsDiff",function(f,
k,n){function b(l,r){g.has(l)||g.set(l,{missing:[]});g.get(l).missing.push(r)}function e(l,r){var v=f[l].slice(0);iA(r,function(y,A,E,F,H){y=A+"-"+E;A=v.indexOf(y);-1!==A&&(v.splice(A,1),"available"!==H.status&&b(l,y))});v.forEach(function(y){b(l,y)})}"function"===typeof k&&(n=k,k={});var m=Object.keys(f);if(!m.length)return n(null,{});var a=0,g=new kr;m.map(function(l){this._getRevisionTree(l,function(r,v){if(r&&404===r.status&&"missing"===r.message)g.set(l,{missing:f[l]});else{if(r)return n(r);
e(l,v)}if(++a===m.length){var y={};g.forEach(function(A,E){y[E]=A});return n(null,y)}})},this)});vl.prototype.bulkGet=Tm("bulkGet",function(f,k){FZ(this,f,k)});vl.prototype.compactDocument=Tm("compactDocument",function(f,k,n){var b=this;this._getRevisionTree(f,function(e,m){if(e)return n(e);var a=oca(m),g=[],l=[];Object.keys(a).forEach(function(r){a[r]>k&&g.push(r)});iA(m,function(r,v,y,A,E){r=v+"-"+y;"available"===E.status&&-1!==g.indexOf(r)&&l.push(r)});b._doCompaction(f,l,n)})});vl.prototype.compact=
Tm("compact",function(f,k){"function"===typeof f&&(k=f,f={});f=f||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:f,callback:k});1===this._compactionQueue.length&&VZ(this)});vl.prototype._compact=function(f,k){var n=this,b=[];n.changes({return_docs:!1,last_seq:f.last_seq||0}).on("change",function(e){b.push(n.compactDocument(e.id,0))}).on("complete",function(e){var m=e.last_seq;Promise.all(b).then(function(){return QJ(n,"_local/compaction",function(a){return!a.last_seq||
a.last_seq<m?(a.last_seq=m,a):!1})}).then(function(){k(null,{ok:!0})}).catch(k)}).on("error",k)};vl.prototype.get=Tm("get",function(f,k,n){function b(){var l=[],r=e.length;if(!r)return n(null,l);e.forEach(function(v){m.get(f,{rev:v,revs:k.revs,latest:k.latest,attachments:k.attachments,binary:k.binary},function(y,A){if(y)l.push({missing:v});else{y=0;for(var E=l.length;y<E;y++)if(l[y].ok&&l[y].ok._rev===A._rev){var F=!0;break}F||l.push({ok:A})}r--;r||n(null,l)})})}"function"===typeof k&&(n=k,k={});
if("string"!==typeof f)return n(Ti(IZ));if(jA(f)&&"function"===typeof this._getLocal)return this._getLocal(f,n);var e=[],m=this;if(k.open_revs)if("all"===k.open_revs)this._getRevisionTree(f,function(l,r){if(l)return n(l);e=eQ(r).map(function(v){return v.rev});b()});else if(Array.isArray(k.open_revs)){e=k.open_revs;for(var a=0;a<e.length;a++){var g=e[a];if("string"!==typeof g||!/^\d+-/.test(g))return n(Ti(e_))}b()}else return n(Ti(GZ,"function_clause"));else return this._get(f,k,function(l,r){if(l)return l.docId=
f,n(l);var v=r.doc,y=r.metadata,A=r.ctx;k.conflicts&&(r=fQ(y),r.length&&(v._conflicts=r));ww(y,v._rev)&&(v._deleted=!0);if(k.revs||k.revs_info){l=v._rev.split("-");r=parseInt(l[0],10);l=l[1];var E=QZ(y.rev_tree);y=null;for(var F=0;F<E.length;F++){var H=E[F],I=H.ids.map(function(ea){return ea.id}).indexOf(l);if(I===r-1||!y&&-1!==I)y=H}if(!y)return l=Error("invalid rev tree"),l.docId=f,n(l);r=y.ids.map(function(ea){return ea.id}).indexOf(v._rev.split("-")[1])+1;y.ids.splice(r,y.ids.length-r);y.ids.reverse();
k.revs&&(v._revisions={start:y.pos+y.ids.length-1,ids:y.ids.map(function(ea){return ea.id})});if(k.revs_info){var M=y.pos+y.ids.length;v._revs_info=y.ids.map(function(ea){M--;return{rev:M+"-"+ea.id,status:ea.opts.status}})}}if(k.attachments&&v._attachments){var N=v._attachments,X=Object.keys(N).length;if(0===X)return n(null,v);Object.keys(N).forEach(function(ea){this._getAttachment(v._id,ea,N[ea],{rev:v._rev,binary:k.binary,ctx:A},function(Aa,Ka){Aa=v._attachments[ea];Aa.data=Ka;delete Aa.stub;delete Aa.length;
--X||n(null,v)})},m)}else{if(v._attachments)for(var W in v._attachments)v._attachments.hasOwnProperty(W)&&(v._attachments[W].stub=!0);n(null,v)}})});vl.prototype.getAttachment=Tm("getAttachment",function(f,k,n,b){var e=this;n instanceof Function&&(b=n,n={});this._get(f,n,function(m,a){if(m)return b(m);if(a.doc._attachments&&a.doc._attachments[k])n.ctx=a.ctx,n.binary=!0,e._getAttachment(f,k,a.doc._attachments[k],n,b);else return b(Ti(ut))})});vl.prototype.allDocs=Tm("allDocs",function(f,k){"function"===
typeof f&&(k=f,f={});f.skip="undefined"!==typeof f.skip?f.skip:0;f.start_key&&(f.startkey=f.start_key);f.end_key&&(f.endkey=f.end_key);if("keys"in f){if(!Array.isArray(f.keys))return k(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in f})[0];if(n){k(Ti(tla,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!Xu(this)&&(pca(f),0===f.keys.length))return this._allDocs({limit:0},k)}return this._allDocs(f,k)});vl.prototype.changes=
function(f,k){"function"===typeof f&&(k=f,f={});f=f||{};f.return_docs="return_docs"in f?f.return_docs:!f.live;return new BF(this,f,k)};vl.prototype.close=Tm("close",function(f){this._closed=!0;this.emit("closed");return this._close(f)});vl.prototype.info=Tm("info",function(f){var k=this;this._info(function(n,b){if(n)return f(n);b.db_name=b.db_name||k.name;b.auto_compaction=!(!k.auto_compaction||Xu(k));b.adapter=k.adapter;f(null,b)})});vl.prototype.id=Tm("id",function(f){return this._id(f)});vl.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};vl.prototype.bulkDocs=Tm("bulkDocs",function(f,k,n){"function"===typeof k&&(n=k,k={});k=k||{};Array.isArray(f)&&(f={docs:f});if(!f||!f.docs||!Array.isArray(f.docs))return n(Ti(sla));for(var b=0;b<f.docs.length;++b)if("object"!==typeof f.docs[b]||Array.isArray(f.docs[b]))return n(Ti(zU));var e;f.docs.forEach(function(g){g._attachments&&Object.keys(g._attachments).forEach(function(l){var r;(r=e)||(r="_"===l.charAt(0)?l+" is not a valid attachment name, attachment names cannot start with '_'":
!1);e=r;g._attachments[l].content_type||os("warn","Attachment",l,"on document",g._id,"is missing content_type")})});if(e)return n(Ti(OJ,e));"new_edits"in k||(k.new_edits="new_edits"in f?f.new_edits:!0);var m=this;k.new_edits||Xu(m)||f.docs.sort(nca);mca(f.docs);var a=f.docs.map(function(g){return g._id});return this._bulkDocs(f,k,function(g,l){if(g)return n(g);k.new_edits||(l=l.filter(function(v){return v.error}));if(!Xu(m)){g=0;for(var r=l.length;g<r;g++)l[g].id=l[g].id||a[g]}n(null,l)})});vl.prototype.registerDependentDatabase=
Tm("registerDependentDatabase",function(f,k){var n=new this.constructor(f,this.__opts);QJ(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[f])return!1;b.dependentDbs[f]=!0;return b}).then(function(){k(null,{db:n})}).catch(k)});vl.prototype.destroy=Tm("destroy",function(f,k){function n(){b._destroy(f,function(m,a){if(m)return k(m);b._destroyed=!0;b.emit("destroyed");k(null,a||{ok:!0})})}"function"===typeof f&&(k=f,f={});var b=this,e="use_prefix"in b?
b.use_prefix:!0;if(Xu(b))return n();b.get("_local/_pouch_dependentDbs",function(m,a){if(m)return 404!==m.status?k(m):n();var g=b.constructor;m=Object.keys(a.dependentDbs).map(function(l){l=e?l.replace(new RegExp("^"+g.prefix),""):l;return(new g(l,b.__opts)).destroy()});Promise.all(m).then(n,k)})});CF.prototype.execute=function(){var f;if(this.failed)for(;f=this.queue.shift();)f(this.failed);else for(;f=this.queue.shift();)f()};CF.prototype.fail=function(f){this.failed=f;this.execute()};CF.prototype.ready=
function(f){this.isReady=!0;this.db=f;this.execute()};CF.prototype.addTask=function(f){this.queue.push(f);this.failed&&this.execute()};St(Mi,vl);var $ca="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},q_=fetch,TC=Headers;Mi.adapters={};Mi.preferredAdapters=[];Mi.prefix="_pouch_";var b7=new vq.EventEmitter;(function(f){Object.keys(vq.EventEmitter.prototype).forEach(function(n){"function"===typeof vq.EventEmitter.prototype[n]&&(f[n]=b7[n].bind(b7))});var k=
f._destructionListeners=new kr;f.on("ref",function(n){k.has(n.name)||k.set(n.name,[]);k.get(n.name).push(n)});f.on("unref",function(n){if(k.has(n.name)){var b=k.get(n.name),e=b.indexOf(n);0>e||(b.splice(e,1),1<b.length?k.set(n.name,b):k.delete(n.name))}});f.on("destroyed",function(n){if(k.has(n)){var b=k.get(n);k.delete(n);b.forEach(function(e){e.emit("destroyed",!0)})}})})(Mi);Mi.adapter=function(f,k,n){k.valid()&&(Mi.adapters[f]=k,n&&Mi.preferredAdapters.push(f))};Mi.plugin=function(f){if("function"===
typeof f)f(Mi);else{if("object"!==typeof f||0===Object.keys(f).length)throw Error('Invalid plugin: got "'+f+'", expected an object or a function');Object.keys(f).forEach(function(k){Mi.prototype[k]=f[k]})}this.__defaults&&(Mi.__defaults=RC({},this.__defaults));return Mi};Mi.defaults=function(f){function k(n,b){if(!(this instanceof k))return new k(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=RC({},k.__defaults,b);Mi.call(this,n,b)}St(k,Mi);k.preferredAdapters=Mi.preferredAdapters.slice();
Object.keys(Mi).forEach(function(n){n in k||(k[n]=Mi[n])});k.__defaults=RC({},this.__defaults,f);return k};Mi.fetch=function(f,k){return q_(f,k)};var YZ=["$or","$nor","$not"],a_={$elemMatch:function(f,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(e){return PC(e,k,Object.keys(k))}):b.some(function(e){return iQ(k,f,n,e)}):!1},$allMatch:function(f,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(e){return PC(e,k,Object.keys(k))}):
b.every(function(e){return iQ(k,f,n,e)}):!1},$eq:function(f,k,n,b){return lA(b)&&0===Vn(b,k)},$gte:function(f,k,n,b){return lA(b)&&0<=Vn(b,k)},$gt:function(f,k,n,b){return lA(b)&&0<Vn(b,k)},$lte:function(f,k,n,b){return lA(b)&&0>=Vn(b,k)},$lt:function(f,k,n,b){return lA(b)&&0>Vn(b,k)},$exists:function(f,k,n,b){return k?lA(b):!lA(b)},$mod:function(f,k,n,b){if(f=EF(b)){f=k[0];k=k[1];if(0===f)throw Error("Bad divisor, cannot divide by zero");if(parseInt(f,10)!==f)throw Error("Divisor is not an integer");
if(parseInt(k,10)!==k)throw Error("Modulus is not an integer");f=parseInt(b,10)!==b?!1:b%f===k}return f},$ne:function(f,k,n,b){return k.every(function(e){return 0!==Vn(b,e)})},$in:function(f,k,n,b){return EF(b)&&b_(b,k)},$nin:function(f,k,n,b){return EF(b)&&!b_(b,k)},$size:function(f,k,n,b){return EF(b)&&b.length===k},$all:function(f,k,n,b){return Array.isArray(b)&&yca(b,k)},$regex:function(f,k,n,b){if(f=EF(b))f=(new RegExp(k)).test(b);return f},$type:function(f,k,n,b){return zca(b,k)}};Mi.plugin(function(f){f._changesFilterPlugin=
{validate:Aca,normalize:Bca,shouldFilter:Cca,filter:Dca}});Mi.version="7.2.1";var Eca=c_("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),Fca=c_("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),FF=new NC,mQ=!1,nQ=[],SC=new kr,pQ,oQ=new kr;
o_.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var sQ={};rQ.valid=function(){return!0};St(oA,Error);St(XJ,Error);St(YJ,Error);var cda=os.bind(null,"log"),dda=Array.isArray,eda=JSON.parse;HF.prototype.add=function(f){return this.promise=this.promise.catch(function(){}).then(function(){return f()})};HF.prototype.finish=function(){return this.promise};var c7={},d7=new HF,ula=function(f,k){return vQ(k)},vla=function(f,k){return k.length},wla=function(f,k){f=
vQ(k);for(var n=Math.min.apply(null,k),b=Math.max.apply(null,k),e=k.length,m=0,a=0,g=k.length;a<g;a++){var l=k[a];m+=l*l}return{sum:f,min:n,max:b,count:e,sumsqr:m}},e7=function(f,k,n,b){function e(fa,oa,hb,Cb,va){try{return{output:oa(hb,Cb,va)}}catch(ma){return x_(fa,ma),{error:ma}}}function m(fa,oa){var hb=Vn(fa.key,oa.key);return 0!==hb?hb:Vn(fa.value,oa.value)}function a(fa,oa,hb){hb=hb||0;return"number"===typeof oa?fa.slice(hb,oa+hb):0<hb?fa.slice(hb):fa}function g(fa){var oa=fa.value;return oa&&
"object"===typeof oa&&oa._id||fa.id}function l(fa){fa.rows.forEach(function(oa){var hb=oa.doc&&oa.doc._attachments;hb&&Object.keys(hb).forEach(function(Cb){var va=hb[Cb];hb[Cb].data=bQ(va.data,va.content_type)})})}function r(fa){return function(oa){fa.include_docs&&fa.attachments&&fa.binary&&l(oa);return oa}}function v(fa,oa,hb,Cb){oa=oa[fa];"undefined"!==typeof oa&&(Cb&&(oa=encodeURIComponent(JSON.stringify(oa))),hb.push(fa+"="+oa))}function y(fa){if("undefined"!==typeof fa){var oa=Number(fa);return isNaN(oa)||
oa!==parseInt(fa,10)?fa:oa}}function A(fa){fa.group_level=y(fa.group_level);fa.limit=y(fa.limit);fa.skip=y(fa.skip);return fa}function E(fa,oa){var hb=fa.descending?"endkey":"startkey",Cb=fa.descending?"startkey":"endkey";if("undefined"!==typeof fa[hb]&&"undefined"!==typeof fa[Cb]&&0<Vn(fa[hb],fa[Cb]))throw new oA("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(oa.reduce&&!1!==fa.reduce){if(fa.include_docs)throw new oA("{include_docs:true} is invalid for reduce");
if(fa.keys&&1<fa.keys.length&&!fa.group&&!fa.group_level)throw new oA("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(va){a:{if(va=fa[va]){if("number"!==typeof va){va=new oA('Invalid value for integer: "'+va+'"');break a}if(0>va){va=new oA('Invalid value for positive integer: "'+va+'"');break a}}va=void 0}if(va)throw va;})}function F(fa,oa,hb){var Cb=[],va,ma="GET",ua,Ma;v("reduce",hb,Cb);v("include_docs",hb,Cb);v("attachments",hb,Cb);
v("limit",hb,Cb);v("descending",hb,Cb);v("group",hb,Cb);v("group_level",hb,Cb);v("skip",hb,Cb);v("stale",hb,Cb);v("conflicts",hb,Cb);v("startkey",hb,Cb,!0);v("start_key",hb,Cb,!0);v("endkey",hb,Cb,!0);v("end_key",hb,Cb,!0);v("inclusive_end",hb,Cb);v("key",hb,Cb,!0);v("update_seq",hb,Cb);Cb=Cb.join("&");Cb=""===Cb?"":"?"+Cb;if("undefined"!==typeof hb.keys){var Lb="keys="+encodeURIComponent(JSON.stringify(hb.keys));2E3>=Lb.length+Cb.length+1?Cb+=("?"===Cb[0]?"&":"?")+Lb:(ma="POST","string"===typeof oa?
va={keys:hb.keys}:oa.keys=hb.keys)}if("string"===typeof oa)return Lb=wQ(oa),fa.fetch("_design/"+Lb[0]+"/_view/"+Lb[1]+Cb,{headers:new TC({"Content-Type":"application/json"}),method:ma,body:JSON.stringify(va)}).then(function(ic){ua=ic.ok;Ma=ic.status;return ic.json()}).then(function(ic){if(!ua)throw ic.status=Ma,OC(ic);ic.rows.forEach(function(Vb){if(Vb.value&&Vb.value.error&&"builtin_reduce_error"===Vb.value.error)throw Error(Vb.reason);});return ic}).then(r(hb));va=va||{};Object.keys(oa).forEach(function(ic){Array.isArray(oa[ic])?
va[ic]=oa[ic]:va[ic]=oa[ic].toString()});return fa.fetch("_temp_view"+Cb,{headers:new TC({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(va)}).then(function(ic){ua=ic.ok;Ma=ic.status;return ic.json()}).then(function(ic){if(!ua)throw ic.status=Ma,OC(ic);return ic}).then(r(hb))}function H(fa,oa,hb){return new Promise(function(Cb,va){fa._query(oa,hb,function(ma,ua){if(ma)return va(ma);Cb(ua)})})}function I(fa){return new Promise(function(oa,hb){fa._viewCleanup(function(Cb,va){if(Cb)return hb(Cb);
oa(va)})})}function M(fa){return function(oa){if(404===oa.status)return fa;throw oa;}}function N(fa,oa,hb){function Cb(Ma,Lb){for(var ic=[],Vb=new GF,jc=0,Pc=Lb.rows.length;jc<Pc;jc++){var Rb=Lb.rows[jc].doc;if(Rb&&(ic.push(Rb),Vb.add(Rb._id),Rb._deleted=!ua.has(Rb._id),!Rb._deleted)){var zd=ua.get(Rb._id);"value"in zd&&(Rb.value=zd.value)}}Lb=uQ(ua);Lb.forEach(function(ld){if(!Vb.has(ld)){var la={_id:ld};ld=ua.get(ld);"value"in ld&&(la.value=ld.value);ic.push(la)}});Ma.keys=s_(Lb.concat(Ma.keys));
ic.push(Ma);return ic}var va="_local/doc_"+fa,ma={_id:va,keys:[]};fa=hb.get(fa);var ua=fa[0];va=gda(fa[1])?Promise.resolve(ma):oa.db.get(va).catch(M(ma));return va.then(function(Ma){return(Ma.keys.length?oa.db.allDocs({keys:Ma.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Lb){return Cb(Ma,Lb)})})}function X(fa,oa,hb){return fa.db.get("_local/lastSeq").catch(M({_id:"_local/lastSeq",seq:0})).then(function(Cb){var va=uQ(oa);return Promise.all(va.map(function(ma){return N(ma,fa,oa)})).then(function(ma){ma=
PJ(ma);Cb.seq=hb;ma.push(Cb);return fa.db.bulkDocs({docs:ma})})})}function W(fa){fa="string"===typeof fa?fa:fa.name;var oa=c7[fa];oa||(oa=c7[fa]=new HF);return oa}function ea(fa){return tQ(W(fa),function(){return Aa(fa)})()}function Aa(fa){function oa(ic,Vb){return function(){return X(fa,ic,Vb)}}function hb(){return fa.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Ma,limit:50}).then(Cb)}function Cb(ic){ic=ic.results;if(ic.length){for(var Vb=new kr,jc=0,Pc=ic.length;jc<
Pc;jc++){var Rb=ic[jc];if("_"!==Rb.doc._id[0]){va=[];ma=Rb.doc;if(!ma._deleted){var zd=fa.sourceDB;try{ua(ma)}catch(Od){x_(zd,Od)}}va.sort(m);zd=void 0;for(var ld=va,la=new kr,Da=0,Pa=ld.length;Da<Pa;Da++){var yb=ld[Da],ac=[yb.key,yb.id];0<Da&&0===Vn(yb.key,zd)&&ac.push(Da);la.set(tt(ac),yb);zd=yb.key}Vb.set(Rb.doc._id,[la,Rb.changes])}Ma=Rb.seq}Lb.add(oa(Vb,Ma));if(!(50>ic.length))return hb()}}var va,ma,ua=k(fa.mapFun,function(ic,Vb){ic={id:ma._id,key:kA(ic)};"undefined"!==typeof Vb&&null!==Vb&&
(ic.value=kA(Vb));va.push(ic)}),Ma=fa.seq||0,Lb=new HF;return hb().then(function(){return Lb.finish()}).then(function(){fa.seq=Ma})}function Ka(fa,oa,hb){0===hb.group_level&&delete hb.group_level;var Cb=hb.group||hb.group_level,va=n(fa.reduceFun),ma=[],ua=isNaN(hb.group_level)?Number.POSITIVE_INFINITY:hb.group_level;oa.forEach(function(jc){var Pc=ma[ma.length-1],Rb=Cb?jc.key:null;Cb&&Array.isArray(Rb)&&(Rb=Rb.slice(0,ua));Pc&&0===Vn(Pc.groupKey,Rb)?(Pc.keys.push([jc.key,jc.id]),Pc.values.push(jc.value)):
ma.push({keys:[[jc.key,jc.id]],values:[jc.value],groupKey:Rb})});oa=[];for(var Ma=0,Lb=ma.length;Ma<Lb;Ma++){var ic=ma[Ma],Vb=e(fa.sourceDB,va,ic.keys,ic.values,!1);if(Vb.error&&Vb.error instanceof YJ)throw Vb.error;oa.push({value:Vb.error?null:Vb.output,key:ic.groupKey})}return{rows:a(oa,hb.limit,hb.skip)}}function K(fa,oa){return tQ(W(fa),function(){return aa(fa,oa)})()}function aa(fa,oa){function hb(Vb){Vb.include_docs=!0;return fa.db.allDocs(Vb).then(function(jc){va=jc.total_rows;return jc.rows.map(function(Pc){if("value"in
Pc.doc&&"object"===typeof Pc.doc.value&&null!==Pc.doc.value){var Rb=Object.keys(Pc.doc.value).sort(),zd=["id","key","value"];if(!(Rb<zd||Rb>zd))return Pc.doc.value}a:{Rb=Pc.doc._id;zd=[];for(var ld=[],la=0;;){var Da=Rb[la++];if("\x00"===Da)if(1===zd.length){Rb=zd.pop();break a}else{var Pa=zd;var yb=ld;Da=Pa.pop();if(yb.length){var ac=yb[yb.length-1];Da===ac.element&&(yb.pop(),ac=yb[yb.length-1]);yb=ac.element;ac=ac.index;Array.isArray(yb)?yb.push(Da):ac===Pa.length-2?(Pa=Pa.pop(),yb[Pa]=Da):Pa.push(Da)}continue}switch(Da){case "1":zd.push(null);
break;case "2":zd.push("1"===Rb[la]);la++;break;case "3":ac=Rb;Pa=Da=la;if("1"===ac[Da])ac=0,Da++;else{yb="0"===ac[Da];Da++;var Od="",Md=ac.substring(Da,Da+3);Md=parseInt(Md,10)+-324;yb&&(Md=-Md);for(Da+=3;;){var Wc=ac[Da];if("\x00"===Wc)break;else Od+=Wc;Da++}Od=Od.split(".");ac=1===Od.length?parseInt(Od,10):parseFloat(Od[0]+"."+Od[1]);yb&&(ac-=10);0!==Md&&(ac=parseFloat(ac+"e"+Md))}yb=ac;Da-=Pa;zd.push(yb);la+=Da;break;case "4":for(Da="";;){Pa=Rb[la];if("\x00"===Pa)break;Da+=Pa;la++}Da=Da.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");zd.push(Da);break;case "5":Da={element:[],index:zd.length};zd.push(Da.element);ld.push(Da);break;case "6":Da={element:{},index:zd.length};zd.push(Da.element);ld.push(Da);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+Da);}}}return{key:Rb[0],id:Rb[1],value:"value"in Pc.doc?Pc.doc.value:null}})})}function Cb(Vb){var jc=ma?Ka(fa,Vb,oa):{total_rows:va,offset:ua,rows:Vb};oa.update_seq&&(jc.update_seq=
fa.seq);if(oa.include_docs){var Pc=s_(Vb.map(g));return fa.sourceDB.allDocs({keys:Pc,include_docs:!0,conflicts:oa.conflicts,attachments:oa.attachments,binary:oa.binary}).then(function(Rb){var zd=new kr;Rb.rows.forEach(function(ld){zd.set(ld.id,ld.doc)});Vb.forEach(function(ld){var la=g(ld);if(la=zd.get(la))ld.doc=la});return jc})}return jc}var va,ma=fa.reduceFun&&!1!==oa.reduce,ua=oa.skip||0;"undefined"===typeof oa.keys||oa.keys.length||(oa.limit=0,delete oa.keys);if("undefined"!==typeof oa.keys){var Ma=
oa.keys.map(function(Vb){Vb={startkey:tt([Vb]),endkey:tt([Vb,{}])};oa.update_seq&&(Vb.update_seq=!0);return hb(Vb)});return Promise.all(Ma).then(PJ).then(Cb)}Ma={descending:oa.descending};oa.update_seq&&(Ma.update_seq=!0);if("start_key"in oa)var Lb=oa.start_key;"startkey"in oa&&(Lb=oa.startkey);if("end_key"in oa)var ic=oa.end_key;"endkey"in oa&&(ic=oa.endkey);"undefined"!==typeof Lb&&(Ma.startkey=oa.descending?tt([Lb,{}]):tt([Lb]));"undefined"!==typeof ic&&(Lb=!1!==oa.inclusive_end,oa.descending&&
(Lb=!Lb),Ma.endkey=tt(Lb?[ic,{}]:[ic]));"undefined"!==typeof oa.key&&(ic=tt([oa.key]),Lb=tt([oa.key,{}]),Ma.descending?(Ma.endkey=ic,Ma.startkey=Lb):(Ma.startkey=ic,Ma.endkey=Lb));ma||("number"===typeof oa.limit&&(Ma.limit=oa.limit),Ma.skip=ua);return hb(Ma).then(Cb)}function T(fa){return fa.fetch("_view_cleanup",{headers:new TC({"Content-Type":"application/json"}),method:"POST"}).then(function(oa){return oa.json()})}function U(fa){return fa.get("_local/"+f).then(function(oa){var hb=new kr;Object.keys(oa.views).forEach(function(va){var ma=
wQ(va);va="_design/"+ma[0];ma=ma[1];var ua=hb.get(va);ua||(ua=new GF,hb.set(va,ua));ua.add(ma)});var Cb={keys:uQ(hb),include_docs:!0};return fa.allDocs(Cb).then(function(va){var ma={};va.rows.forEach(function(ua){var Ma=ua.key.substring(8);hb.get(ua.key).forEach(function(Lb){var ic=Ma+"/"+Lb;oa.views[ic]||(ic=Lb);ic=Object.keys(oa.views[ic]);var Vb=ua.doc&&ua.doc.views&&ua.doc.views[Lb];ic.forEach(function(jc){ma[jc]=ma[jc]||Vb})})});va=Object.keys(ma).filter(function(ua){return!ma[ua]}).map(function(ua){return tQ(W(ua),
function(){return(new fa.constructor(ua,fa.__opts)).destroy()})()});return Promise.all(va).then(function(){return{ok:!0}})})},M({ok:!0}))}function pa(fa,oa,hb){if("function"===typeof fa._query)return H(fa,oa,hb);if(Xu(fa))return F(fa,oa,hb);if("string"!==typeof oa)return E(hb,oa),d7.add(function(){return w_(fa,"temp_view/temp_view",oa.map,oa.reduce,!0,f).then(function(ma){return bda(ea(ma).then(function(){return K(ma,hb)}),function(){return ma.db.destroy()})})}),d7.finish();var Cb=wQ(oa),va=Cb[1];
return fa.get("_design/"+Cb[0]).then(function(ma){var ua=ma.views&&ma.views[va];if(!ua)throw new XJ("ddoc "+ma._id+" has no view named "+va);b(ma,va);E(hb,ua);return w_(fa,oa,ua.map,ua.reduce,!1,f).then(function(Ma){return"ok"===hb.stale||"update_after"===hb.stale?("update_after"===hb.stale&&Yu(function(){ea(Ma)}),K(Ma,hb)):ea(Ma).then(function(){return K(Ma,hb)})})})}return{query:function(fa,oa,hb){var Cb=this;"function"===typeof oa&&(hb=oa,oa={});oa=oa?A(oa):{};"function"===typeof fa&&(fa={map:fa});
var va=Promise.resolve().then(function(){return pa(Cb,fa,oa)});r_(va,hb);return va},viewCleanup:ada(function(){return"function"===typeof this._viewCleanup?I(this):Xu(this)?T(this):U(this)})}}("mrviews",function(f,k){return"function"===typeof f&&2===f.length?function(n){return f(n,k)}:u_(f.toString(),k)},function(f){f=f.toString();if(/^_sum/.test(f))var k=ula;else if(/^_count/.test(f))k=vla;else if(/^_stats/.test(f))k=wla;else{if(/^_/.test(f))throw Error(f+" is not a supported reduce function.");k=
void 0}return k?k:u_(f)},function(f,k){var n=f.views&&f.views[k];if("string"!==typeof n.map)throw new XJ("ddoc "+f._id+" has no string view named "+k+", instead found object of type: "+typeof n.map);});IF.prototype.writeCheckpoint=function(f,k){var n=this;return this.updateTarget(f,k).then(function(){return n.updateSource(f,k)})};IF.prototype.updateTarget=function(f,k){return this.opts.writeTargetCheckpoint?xQ(this.target,this.id,f,k,this.returnValue):Promise.resolve(!0)};IF.prototype.updateSource=
function(f,k){if(this.opts.writeSourceCheckpoint){var n=this;return xQ(this.src,this.id,f,k,this.returnValue).catch(function(b){if(A_(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var f7={undefined:function(f,k){return 0===Vn(f.last_seq,k.last_seq)?k.last_seq:0},1:function(f,k){f=k.session_id===f.session_id?{last_seq:k.last_seq,history:k.history}:z_(k.history,f.history);return f.last_seq}};IF.prototype.getCheckpoint=function(){var f=this;return f.opts&&f.opts.writeSourceCheckpoint&&
!f.opts.writeTargetCheckpoint?f.src.get(f.id).then(function(k){return k.last_seq||0}).catch(function(k){if(404!==k.status)throw k;return 0}):f.target.get(f.id).then(function(k){return f.opts&&f.opts.writeTargetCheckpoint&&!f.opts.writeSourceCheckpoint?k.last_seq||0:f.src.get(f.id).then(function(n){if(k.version!==n.version)return 0;var b=k.version?k.version.toString():"undefined";return b in f7?f7[b](k,n):0},function(n){if(404===n.status&&k.last_seq)return f.src.put({_id:f.id,last_seq:0}).then(function(){return 0},
function(b){return A_(b)?(f.opts.writeSourceCheckpoint=!1,k.last_seq):0});throw n;})}).catch(function(k){if(404!==k.status)throw k;return 0})};St(ZJ,vq.EventEmitter);ZJ.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};ZJ.prototype.ready=function(f,k){function n(){b.cancel()}var b=this;b._readyCalled||(b._readyCalled=!0,f.once("destroyed",n),k.once("destroyed",n),b.once("complete",function(){f.removeListener("destroyed",n);k.removeListener("destroyed",n)}))};
St(AQ,vq.EventEmitter);AQ.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};Mi.plugin(function(f){f.adapter("idb",o_,!0)}).plugin(function(f){f.adapter("http",rQ,!1);f.adapter("https",rQ,!1)}).plugin({query:function(f,k,n){return e7.query.call(this,f,k,n)},viewCleanup:function(f){return e7.viewCleanup.call(this,f)}}).plugin(function(f){f.replicate=zQ;f.sync=nda;Object.defineProperty(f.prototype,"replicate",{get:function(){var k=this;"undefined"===
typeof this.replicateMethods&&(this.replicateMethods={from:function(n,b,e){return k.constructor.replicate(n,k,b,e)},to:function(n,b,e){return k.constructor.replicate(k,n,b,e)}});return this.replicateMethods}});f.prototype.sync=function(k,n,b){return this.constructor.sync(this,k,n,b)}});var xla=rla=Mi,Jy={};Object.defineProperty(Jy,"__esModule",{value:!0});Wx.prototype.get=function(f){return this._store["$"+f]};Wx.prototype.set=function(f,k){this._store["$"+f]=k;return!0};Wx.prototype.has=function(f){return"$"+
f in this._store};Wx.prototype.delete=function(f){f="$"+f;var k=f in this._store;delete this._store[f];return k};Wx.prototype.forEach=function(f){for(var k=Object.keys(this._store),n=0,b=k.length;n<b;n++){var e=k[n],m=this._store[e];e=e.substring(1);f(m,e)}};Object.defineProperty(Wx.prototype,"size",{get:function(){return Object.keys(this._store).length}});JF.prototype.add=function(f){return this._store.set(f,!0)};JF.prototype.has=function(f){return this._store.has(f)};JF.prototype.forEach=function(f){this._store.forEach(function(k,
n){f(n)})};Object.defineProperty(JF.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map})()?(Jy.Set=Set,Jy.Map=Map):(Jy.Set=JF,Jy.Map=Wx);var AU={},BU=uj;AU.test=function(){return"undefined"!==typeof BU&&!BU.browser};AU.install=function(f){return function(){BU.nextTick(f)}};var g7="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,CU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,DU={},h7=CU.MutationObserver||CU.WebKitMutationObserver;DU.test=function(){return h7};DU.install=function(f){var k=0;f=new h7(f);var n=CU.document.createTextNode("");f.observe(n,{characterData:!0});return function(){n.data=k=++k%2}};var EU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,KM="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,yla={},eH=[AU,{test:function(){return"function"===typeof g7.queueMicrotask},install:function(f){return function(){g7.queueMicrotask(f)}}},DU,{test:function(){return EU.setImmediate?!1:"undefined"!==typeof EU.MessageChannel},install:function(f){var k=new EU.MessageChannel;k.port1.onmessage=f;return function(){k.port2.postMessage(0)}}},{test:function(){return"document"in KM&&"onreadystatechange"in KM.document.createElement("script")},install:function(f){return function(){var k=
KM.document.createElement("script");k.onreadystatechange=function(){f();k.onreadystatechange=null;k.parentNode.removeChild(k);k=null};KM.document.documentElement.appendChild(k);return f}}},{test:function(){return!0},install:function(f){return function(){setTimeout(f,0)}}}],UC,pA,KF=-1,Xx=[],BQ=!1,fH=-1,zla=eH.length;for(;++fH<zla;)if(eH[fH]&&eH[fH].test&&eH[fH].test()){var Ala=eH[fH].install(C_);break}D_.prototype.run=function(){var f=this.fun,k=this.array;switch(k.length){case 0:return f();case 1:return f(k[0]);
case 2:return f(k[0],k[1]);case 3:return f(k[0],k[1],k[2]);default:return f.apply(null,k)}};var Pj=yla=function(f){var k=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];Xx.push(new D_(f,k));BQ||UC||(BQ=!0,Ala())},Vg={};Object.defineProperty(Vg,"__esModule",{value:!0});(xl&&"object"===typeof xl&&"default"in xl?xl["default"]:xl)(bl,Error);bl.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,
reason:this.reason})};var Bla=new bl(401,"unauthorized","Name or password is incorrect."),Cla=new bl(400,"bad_request","Missing JSON list of 'docs'"),Dla=new bl(404,"not_found","missing"),Ela=new bl(409,"conflict","Document update conflict"),Fla=new bl(400,"bad_request","_id field must contain a string"),Gla=new bl(412,"missing_id","_id is required for puts"),Hla=new bl(400,"bad_request","Only reserved document ids may start with underscore."),Ila=new bl(412,"precondition_failed","Database not open"),
i7=new bl(500,"unknown_error","Database encountered an unknown error"),Jla=new bl(500,"badarg","Some query argument is invalid"),Kla=new bl(400,"invalid_request","Request was invalid"),Lla=new bl(400,"query_parse_error","Some query parameter is invalid"),Mla=new bl(500,"doc_validation","Bad special document member"),Nla=new bl(400,"bad_request","Something wrong with the request"),Ola=new bl(400,"bad_request","Document must be a JSON object"),Pla=new bl(404,"not_found","Database not found"),Qla=new bl(500,
"indexed_db_went_bad","unknown"),Rla=new bl(500,"web_sql_went_bad","unknown"),Sla=new bl(500,"levelDB_went_went_bad","unknown"),Tla=new bl(403,"forbidden","Forbidden by design doc validate_doc_update function"),Ula=new bl(400,"bad_request","Invalid rev format"),Vla=new bl(412,"file_exists","The database could not be created, the file already exists."),Wla=new bl(412,"missing_stub","A pre-existing attachment stub wasn't found"),Xla=new bl(413,"invalid_url","Provided URL is invalid");Vg.UNAUTHORIZED=
Bla;Vg.MISSING_BULK_DOCS=Cla;Vg.MISSING_DOC=Dla;Vg.REV_CONFLICT=Ela;Vg.INVALID_ID=Fla;Vg.MISSING_ID=Gla;Vg.RESERVED_ID=Hla;Vg.NOT_OPEN=Ila;Vg.UNKNOWN_ERROR=i7;Vg.BAD_ARG=Jla;Vg.INVALID_REQUEST=Kla;Vg.QUERY_PARSE_ERROR=Lla;Vg.DOC_VALIDATION=Mla;Vg.BAD_REQUEST=Nla;Vg.NOT_AN_OBJECT=Ola;Vg.DB_MISSING=Pla;Vg.WSQ_ERROR=Rla;Vg.LDB_ERROR=Sla;Vg.FORBIDDEN=Tla;Vg.INVALID_REV=Ula;Vg.FILE_EXISTS=Vla;Vg.MISSING_STUB=Wla;Vg.IDB_ERROR=Qla;Vg.INVALID_URL=Xla;Vg.createError=function(f,k){function n(b){for(var e=Object.getOwnPropertyNames(f),
m=0,a=e.length;m<a;m++)"function"!==typeof f[e[m]]&&(this[e[m]]=f[e[m]]);void 0!==b&&(this.reason=b)}n.prototype=bl.prototype;return new n(k)};Vg.generateErrorFromResponse=function(f){if("object"!==typeof f){var k=f;f=i7;f.data=k}"error"in f&&"conflict"===f.error&&(f.name="conflict",f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||(f.message=f.message||f.reason);return f};var Yla="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,FU=Object.prototype.toString,
LM=function(f){return!(Yla&&f&&"object"==typeof f&&Symbol.toStringTag in f)&&"[object Arguments]"===FU.call(f)},j7=function(f){return!!LM(f)||null!==f&&"object"==typeof f&&"number"==typeof f.length&&0<=f.length&&"[object Array]"!==FU.call(f)&&"[object Function]"===FU.call(f.callee)},Zla=function(){return LM(arguments)}();LM.isLegacyArguments=j7;var $la=Zla?LM:j7,ama=Object.prototype.toString,bma=Function.prototype.toString,cma=/^\s*(?:function)?\*/,k7="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
l7=Object.getPrototypeOf;a:if(k7){try{var MM=Function("return function*() {}")();break a}catch(f){}MM=void 0}else MM=!1;var dma=MM?l7(MM):{},zi="function"==typeof Object.create?function(f,k){k&&(f.super_=k,f.prototype=Object.create(k.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,k){if(k){f.super_=k;var n=function(){};n.prototype=k.prototype;f.prototype=new n;f.prototype.constructor=f}},m7=function(f){return f&&"object"==typeof f&&"function"==typeof f.copy&&
"function"==typeof f.fill&&"function"==typeof f.readUInt8},qj={},pda=m7,X_="undefined"!=typeof BigInt,DQ="undefined"!=typeof Symbol,lr=DQ&&void 0!==Symbol.toStringTag,wq="undefined"!=typeof Uint8Array,ema="undefined"!=typeof ArrayBuffer;if(wq&&lr)var fma=Object.getPrototypeOf(Uint8Array.prototype),ps=qA(Object.getOwnPropertyDescriptor(fma,Symbol.toStringTag).get);var Ul=qA(Object.prototype.toString),qda=qA(Number.prototype.valueOf),rda=qA(String.prototype.valueOf),sda=qA(Boolean.prototype.valueOf);
if(X_)var tda=qA(BigInt.prototype.valueOf);if(DQ)var uda=qA(Symbol.prototype.valueOf);qj.isArgumentsObject=$la;qj.isGeneratorFunction=function(f){return"function"==typeof f&&(!!cma.test(bma.call(f))||(k7?l7(f)===dma:"[object GeneratorFunction]"===ama.call(f)))};qj.isPromise=function(f){return"undefined"!=typeof Promise&&f instanceof Promise||null!==f&&"object"==typeof f&&"function"==typeof f.then&&"function"==typeof f.catch};qj.isArrayBufferView=function(f){return ema&&ArrayBuffer.isView?ArrayBuffer.isView(f):
E_(f)||R_(f)};qj.isTypedArray=E_;qj.isUint8Array=F_;qj.isUint8ClampedArray=G_;qj.isUint16Array=H_;qj.isUint32Array=I_;qj.isInt8Array=J_;qj.isInt16Array=K_;qj.isInt32Array=L_;qj.isFloat32Array=M_;qj.isFloat64Array=N_;qj.isBigInt64Array=O_;qj.isBigUint64Array=P_;aK.working="undefined"!=typeof Map&&aK(new Map);qj.isMap=function(f){return"undefined"!=typeof Map&&(aK.working?aK(f):f instanceof Map)};bK.working="undefined"!=typeof Set&&bK(new Set);qj.isSet=function(f){return"undefined"!=typeof Set&&(bK.working?
bK(f):f instanceof Set)};cK.working="undefined"!=typeof WeakMap&&cK(new WeakMap);qj.isWeakMap=function(f){return"undefined"!=typeof WeakMap&&(cK.working?cK(f):f instanceof WeakMap)};CQ.working="undefined"!=typeof WeakSet&&CQ(new WeakSet);qj.isWeakSet=function(f){return CQ(f)};dK.working="undefined"!=typeof ArrayBuffer&&dK(new ArrayBuffer);qj.isArrayBuffer=Q_;eK.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&eK(new DataView(new ArrayBuffer(1),0,1));qj.isDataView=R_;fK.working=
"undefined"!=typeof SharedArrayBuffer&&fK(new SharedArrayBuffer);qj.isSharedArrayBuffer=S_;qj.isAsyncFunction=function(f){return"[object AsyncFunction]"===Ul(f)};qj.isMapIterator=function(f){return"[object Map Iterator]"===Ul(f)};qj.isSetIterator=function(f){return"[object Set Iterator]"===Ul(f)};qj.isGeneratorObject=function(f){return"[object Generator]"===Ul(f)};qj.isWebAssemblyCompiledModule=function(f){return"[object WebAssembly.Module]"===Ul(f)};qj.isNumberObject=T_;qj.isStringObject=U_;qj.isBooleanObject=
V_;qj.isBigIntObject=W_;qj.isSymbolObject=Y_;qj.isBoxedPrimitive=function(f){return T_(f)||U_(f)||V_(f)||W_(f)||Y_(f)};qj.isAnyArrayBuffer=function(f){return wq&&(Q_(f)||S_(f))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(f){Object.defineProperty(qj,f,{enumerable:!1,value:function(){throw Error(f+" is not supported in userland");}})});var gH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Rh={},Bv=uj,n7=Object.getOwnPropertyDescriptors||function(f){for(var k=
Object.keys(f),n={},b=0;b<k.length;b++)n[k[b]]=Object.getOwnPropertyDescriptor(f,k[b]);return n},gma=/%[sdj%]/g;Rh.format=function(f){if(!iK(f)){for(var k=[],n=0;n<arguments.length;n++)k.push(Yx(arguments[n]));return k.join(" ")}n=1;var b=arguments,e=b.length;k=String(f).replace(gma,function(a){if("%%"===a)return"%";if(n>=e)return a;switch(a){case "%s":return String(b[n++]);case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(g){return"[Circular]"}default:return a}});
for(var m=b[n];n<e;m=b[++n])null!==m&&VC(m)?k+=" "+Yx(m):k+=" "+m;return k};Rh.deprecate=function(f,k){if(void 0!==Bv&&!0===Bv.noDeprecation)return f;if(void 0===Bv)return function(){return Rh.deprecate(f,k).apply(this||gH,arguments)};var n=!1;return function(){if(!n){if(Bv.throwDeprecation)throw Error(k);Bv.traceDeprecation?console.trace(k):console.error(k);n=!0}return f.apply(this||gH,arguments)}};var NM={},o7=/^$/;if(Bv.env.NODE_DEBUG){var GU=Bv.env.NODE_DEBUG;GU=GU.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();o7=new RegExp("^"+GU+"$","i")}Rh.debuglog=function(f){if(f=f.toUpperCase(),!NM[f])if(o7.test(f)){var k=Bv.pid;NM[f]=function(){var n=Rh.format.apply(Rh,arguments);console.error("%s %d: %s",f,k,n)}}else NM[f]=function(){};return NM[f]};Rh.inspect=Yx;Yx.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};
Yx.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Rh.types=qj;Rh.isArray=$_;Rh.isBoolean=EQ;Rh.isNull=function(f){return null===f};Rh.isNullOrUndefined=function(f){return null==f};Rh.isNumber=Z_;Rh.isString=iK;Rh.isSymbol=function(f){return"symbol"==typeof f};Rh.isUndefined=rA;Rh.isRegExp=NF;Rh.types.isRegExp=NF;Rh.isObject=VC;Rh.isDate=jK;Rh.types.isDate=jK;Rh.isError=MF;Rh.types.isNativeError=MF;Rh.isFunction=hK;Rh.isPrimitive=
function(f){return null===f||"boolean"==typeof f||"number"==typeof f||"string"==typeof f||"symbol"==typeof f||void 0===f};Rh.isBuffer=m7;var yda="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Rh.log=function(){console.log("%s - %s",xda(),Rh.format.apply(Rh,arguments))};Rh.inherits=zi;Rh._extend=function(f,k){if(!k||!VC(k))return f;for(var n=Object.keys(k),b=n.length;b--;)f[n[b]]=k[n[b]];return f};var lB="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Rh.promisify=function(f){function k(){for(var n,
b,e=new Promise(function(g,l){n=g;b=l}),m=[],a=0;a<arguments.length;a++)m.push(arguments[a]);m.push(function(g,l){g?b(g):n(l)});try{f.apply(this||gH,m)}catch(g){b(g)}return e}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');if(lB&&f[lB]){if("function"!=typeof(k=f[lB]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(k,lB,{value:k,enumerable:!1,writable:!1,configurable:!0}),k}return Object.setPrototypeOf(k,
Object.getPrototypeOf(f)),lB&&Object.defineProperty(k,lB,{value:k,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(k,n7(f))};Rh.promisify.custom=lB;Rh.callbackify=function(f){function k(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var e=n.pop();if("function"!=typeof e)throw new TypeError("The last argument must be of type Function");var m=this||gH,a=function(){return e.apply(m,arguments)};f.apply(this||gH,n).then(function(g){Bv.nextTick(a.bind(null,null,g))},function(g){Bv.nextTick(zda.bind(null,
g,a))})}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(k,Object.getPrototypeOf(f)),Object.defineProperties(k,n7(f)),k};for(var $u=[],Ts=[],hma="undefined"!=typeof Uint8Array?Uint8Array:Array,RD=0;64>RD;++RD)$u[RD]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[RD],Ts["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(RD)]=RD;Ts[45]=62;Ts[95]=63;var Ni=Ba("bn",{}),MQ={byteLength:function(f){f=
a0(f);var k=f[1];return 3*(f[0]+k)/4-k},toByteArray:function(f){var k=a0(f);var n=k[0];k=k[1];var b=new hma(3*(n+k)/4-k),e=0,m=0<k?n-4:n;for(n=0;n<m;n+=4){var a=Ts[f.charCodeAt(n)]<<18|Ts[f.charCodeAt(n+1)]<<12|Ts[f.charCodeAt(n+2)]<<6|Ts[f.charCodeAt(n+3)];b[e++]=a>>16&255;b[e++]=a>>8&255;b[e++]=255&a}2===k&&(a=Ts[f.charCodeAt(n)]<<2|Ts[f.charCodeAt(n+1)]>>4,b[e++]=255&a);1===k&&(a=Ts[f.charCodeAt(n)]<<10|Ts[f.charCodeAt(n+1)]<<4|Ts[f.charCodeAt(n+2)]>>2,b[e++]=a>>8&255,b[e++]=255&a);return b},fromByteArray:function(f){for(var k,
n=f.length,b=n%3,e=[],m=0,a=n-b;m<a;m+=16383)e.push(Ada(f,m,m+16383>a?a:m+16383));1===b?(k=f[n-1],e.push($u[k>>2]+$u[k<<4&63]+"==")):2===b&&(k=(f[n-2]<<8)+f[n-1],e.push($u[k>>10]+$u[k>>4&63]+$u[k<<2&63]+"="));return e.join("")}},WC={read:function(f,k,n,b,e){var m=8*e-b-1;var a=(1<<m)-1,g=a>>1,l=-7;e=n?e-1:0;var r=n?-1:1,v=f[k+e];e+=r;n=v&(1<<-l)-1;v>>=-l;for(l+=m;0<l;n=256*n+f[k+e],e+=r,l-=8);m=n&(1<<-l)-1;n>>=-l;for(l+=b;0<l;m=256*m+f[k+e],e+=r,l-=8);if(0===n)n=1-g;else{if(n===a)return m?NaN:1/0*
(v?-1:1);m+=Math.pow(2,b);n-=g}return(v?-1:1)*m*Math.pow(2,n-b)},write:function(f,k,n,b,e,m){var a,g,l,r=8*m-e-1,v=(1<<r)-1,y=v>>1,A=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;m=b?0:m-1;b=b?1:-1;var E=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);for(isNaN(k)||k===1/0?(g=isNaN(k)?1:0,a=v):(a=Math.floor(Math.log(k)/Math.LN2),1>k*(l=Math.pow(2,-a))&&(a--,l*=2),2<=(k+=1<=a+y?A/l:A*Math.pow(2,1-y))*l&&(a++,l/=2),a+y>=v?(g=0,a=v):1<=a+y?(g=(k*l-1)*Math.pow(2,e),a+=y):(g=k*Math.pow(2,y-1)*Math.pow(2,e),a=0));8<=e;f[n+
m]=255&g,m+=b,g/=256,e-=8);a=a<<e|g;for(r+=e;0<r;f[n+m]=255&a,m+=b,a/=256,r-=8);f[n+m-b]|=128*E}},p7="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ni.Buffer=df;Ni.SlowBuffer=function(f){+f!=f&&(f=0);return df.alloc(+f)};Ni.INSPECT_MAX_BYTES=50;Ni.kMaxLength=2147483647;df.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(f,k),42===
f.foo()}catch(n){return!1}}();df.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(df.prototype,"parent",{enumerable:!0,get:function(){if(df.isBuffer(this))return this.buffer}});Object.defineProperty(df.prototype,"offset",{enumerable:!0,get:function(){if(df.isBuffer(this))return this.byteOffset}});
df.poolSize=8192;df.from=function(f,k,n){return b0(f,k,n)};Object.setPrototypeOf(df.prototype,Uint8Array.prototype);Object.setPrototypeOf(df,Uint8Array);df.alloc=function(f,k,n){return d0(f),0>=f?xw(f):void 0!==k?"string"==typeof n?xw(f).fill(k,n):xw(f).fill(k):xw(f)};df.allocUnsafe=function(f){return IQ(f)};df.allocUnsafeSlow=function(f){return IQ(f)};df.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==df.prototype};df.compare=function(f,k){if(yw(f,Uint8Array)&&(f=df.from(f,f.offset,f.byteLength)),
yw(k,Uint8Array)&&(k=df.from(k,k.offset,k.byteLength)),!df.isBuffer(f)||!df.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===k)return 0;for(var n=f.length,b=k.length,e=0,m=Math.min(n,b);e<m;++e)if(f[e]!==k[e]){n=f[e];b=k[e];break}return n<b?-1:b<n?1:0};df.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};df.concat=function(f,k){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return df.alloc(0);var n;if(void 0===k)for(n=k=0;n<f.length;++n)k+=f[n].length;k=df.allocUnsafe(k);var b=0;for(n=0;n<f.length;++n){var e=f[n];if(yw(e,Uint8Array)&&(e=df.from(e)),!df.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(k,b);b+=e.length}return k};df.byteLength=c0;df.prototype._isBuffer=!0;df.prototype.swap16=
function(){var f=this.length;if(0!=f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<f;k+=2)sA(this,k,k+1);return this};df.prototype.swap32=function(){var f=this.length;if(0!=f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<f;k+=4)sA(this,k,k+3),sA(this,k+1,k+2);return this};df.prototype.swap64=function(){var f=this.length;if(0!=f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<f;k+=8)sA(this,k,
k+7),sA(this,k+1,k+6),sA(this,k+2,k+5),sA(this,k+3,k+4);return this};df.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?f0(this,0,f):Cda.apply(this,arguments)};df.prototype.toLocaleString=df.prototype.toString;df.prototype.equals=function(f){if(!df.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||0===df.compare(this,f)};df.prototype.inspect=function(){var f="",k=Ni.INSPECT_MAX_BYTES;return f=this.toString("hex",0,k).replace(/(.{2})/g,
"$1 ").trim(),this.length>k&&(f+=" ... "),"<Buffer "+f+">"};p7&&(df.prototype[p7]=df.prototype.inspect);df.prototype.compare=function(f,k,n,b,e){if(yw(f,Uint8Array)&&(f=df.from(f,f.offset,f.byteLength)),!df.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(void 0===k&&(k=0),void 0===n&&(n=f?f.length:0),void 0===b&&(b=0),void 0===e&&(e=this.length),0>k||n>f.length||0>b||e>this.length)throw new RangeError("out of range index");
if(b>=e&&k>=n)return 0;if(b>=e)return-1;if(k>=n)return 1;if(this===f)return 0;var m=(e>>>=0)-(b>>>=0),a=(n>>>=0)-(k>>>=0),g=Math.min(m,a);b=this.slice(b,e);f=f.slice(k,n);for(k=0;k<g;++k)if(b[k]!==f[k]){m=b[k];a=f[k];break}return m<a?-1:a<m?1:0};df.prototype.includes=function(f,k,n){return-1!==this.indexOf(f,k,n)};df.prototype.indexOf=function(f,k,n){return g0(this,f,k,n,!0)};df.prototype.lastIndexOf=function(f,k,n){return g0(this,f,k,n,!1)};df.prototype.write=function(f,k,n,b){if(void 0===k)b="utf8",
n=this.length,k=0;else if(void 0===n&&"string"==typeof k)b=k,n=this.length,k=0;else{if(!isFinite(k))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");k>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var e=this.length-k;if((void 0===n||n>e)&&(n=e),0<f.length&&(0>n||0>k)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{k=Number(k)||0;b=this.length-k;n?(n=Number(n))>b&&
(n=b):n=b;b=f.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){e=parseInt(f.substr(2*b,2),16);if(e!=e){n=b;break a}this[k+b]=e}n=b}return n;case "utf8":case "utf-8":return kK(LQ(f,this.length-k),this,k,n);case "ascii":return i0(this,f,k,n);case "latin1":case "binary":return i0(this,f,k,n);case "base64":return kK(e0(f),this,k,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;e=this.length-k;for(var m=[],a=0;a<f.length&&!(0>(e-=2));++a){var g=f.charCodeAt(a);n=g>>8;g%=256;m.push(g);m.push(n)}return kK(m,
this,k,b);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};df.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};df.prototype.slice=function(f,k){var n=this.length;0>(f=~~f)?0>(f+=n)&&(f=0):f>n&&(f=n);0>(k=void 0===k?n:~~k)?0>(k+=n)&&(k=0):k>n&&(k=n);k<f&&(k=f);f=this.subarray(f,k);return Object.setPrototypeOf(f,df.prototype),f};df.prototype.readUIntLE=function(f,k,n){f>>>=0;k>>>=0;n||Wn(f,k,this.length);n=this[f];
for(var b=1,e=0;++e<k&&(b*=256);)n+=this[f+e]*b;return n};df.prototype.readUIntBE=function(f,k,n){f>>>=0;k>>>=0;n||Wn(f,k,this.length);n=this[f+--k];for(var b=1;0<k&&(b*=256);)n+=this[f+--k]*b;return n};df.prototype.readUInt8=function(f,k){return f>>>=0,k||Wn(f,1,this.length),this[f]};df.prototype.readUInt16LE=function(f,k){return f>>>=0,k||Wn(f,2,this.length),this[f]|this[f+1]<<8};df.prototype.readUInt16BE=function(f,k){return f>>>=0,k||Wn(f,2,this.length),this[f]<<8|this[f+1]};df.prototype.readUInt32LE=
function(f,k){return f>>>=0,k||Wn(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};df.prototype.readUInt32BE=function(f,k){return f>>>=0,k||Wn(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};df.prototype.readIntLE=function(f,k,n){f>>>=0;k>>>=0;n||Wn(f,k,this.length);n=this[f];for(var b=1,e=0;++e<k&&(b*=256);)n+=this[f+e]*b;return n>=128*b&&(n-=Math.pow(2,8*k)),n};df.prototype.readIntBE=function(f,k,n){f>>>=0;k>>>=0;n||Wn(f,k,this.length);n=k;for(var b=
1,e=this[f+--n];0<n&&(b*=256);)e+=this[f+--n]*b;return e>=128*b&&(e-=Math.pow(2,8*k)),e};df.prototype.readInt8=function(f,k){return f>>>=0,k||Wn(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]};df.prototype.readInt16LE=function(f,k){f>>>=0;k||Wn(f,2,this.length);f=this[f]|this[f+1]<<8;return 32768&f?4294901760|f:f};df.prototype.readInt16BE=function(f,k){f>>>=0;k||Wn(f,2,this.length);f=this[f+1]|this[f]<<8;return 32768&f?4294901760|f:f};df.prototype.readInt32LE=function(f,k){return f>>>=0,
k||Wn(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};df.prototype.readInt32BE=function(f,k){return f>>>=0,k||Wn(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};df.prototype.readFloatLE=function(f,k){return f>>>=0,k||Wn(f,4,this.length),WC.read(this,f,!0,23,4)};df.prototype.readFloatBE=function(f,k){return f>>>=0,k||Wn(f,4,this.length),WC.read(this,f,!1,23,4)};df.prototype.readDoubleLE=function(f,k){return f>>>=0,k||Wn(f,8,this.length),WC.read(this,f,!0,52,8)};
df.prototype.readDoubleBE=function(f,k){return f>>>=0,k||Wn(f,8,this.length),WC.read(this,f,!1,52,8)};df.prototype.writeUIntLE=function(f,k,n,b){(f=+f,k>>>=0,n>>>=0,b)||xq(this,f,k,n,Math.pow(2,8*n)-1,0);b=1;var e=0;for(this[k]=255&f;++e<n&&(b*=256);)this[k+e]=f/b&255;return k+n};df.prototype.writeUIntBE=function(f,k,n,b){(f=+f,k>>>=0,n>>>=0,b)||xq(this,f,k,n,Math.pow(2,8*n)-1,0);b=n-1;var e=1;for(this[k+b]=255&f;0<=--b&&(e*=256);)this[k+b]=f/e&255;return k+n};df.prototype.writeUInt8=function(f,k,
n){return f=+f,k>>>=0,n||xq(this,f,k,1,255,0),this[k]=255&f,k+1};df.prototype.writeUInt16LE=function(f,k,n){return f=+f,k>>>=0,n||xq(this,f,k,2,65535,0),this[k]=255&f,this[k+1]=f>>>8,k+2};df.prototype.writeUInt16BE=function(f,k,n){return f=+f,k>>>=0,n||xq(this,f,k,2,65535,0),this[k]=f>>>8,this[k+1]=255&f,k+2};df.prototype.writeUInt32LE=function(f,k,n){return f=+f,k>>>=0,n||xq(this,f,k,4,4294967295,0),this[k+3]=f>>>24,this[k+2]=f>>>16,this[k+1]=f>>>8,this[k]=255&f,k+4};df.prototype.writeUInt32BE=function(f,
k,n){return f=+f,k>>>=0,n||xq(this,f,k,4,4294967295,0),this[k]=f>>>24,this[k+1]=f>>>16,this[k+2]=f>>>8,this[k+3]=255&f,k+4};df.prototype.writeIntLE=function(f,k,n,b){(f=+f,k>>>=0,b)||(b=Math.pow(2,8*n-1),xq(this,f,k,n,b-1,-b));b=0;var e=1,m=0;for(this[k]=255&f;++b<n&&(e*=256);)0>f&&0===m&&0!==this[k+b-1]&&(m=1),this[k+b]=(f/e>>0)-m&255;return k+n};df.prototype.writeIntBE=function(f,k,n,b){(f=+f,k>>>=0,b)||(b=Math.pow(2,8*n-1),xq(this,f,k,n,b-1,-b));b=n-1;var e=1,m=0;for(this[k+b]=255&f;0<=--b&&(e*=
256);)0>f&&0===m&&0!==this[k+b+1]&&(m=1),this[k+b]=(f/e>>0)-m&255;return k+n};df.prototype.writeInt8=function(f,k,n){return f=+f,k>>>=0,n||xq(this,f,k,1,127,-128),0>f&&(f=255+f+1),this[k]=255&f,k+1};df.prototype.writeInt16LE=function(f,k,n){return f=+f,k>>>=0,n||xq(this,f,k,2,32767,-32768),this[k]=255&f,this[k+1]=f>>>8,k+2};df.prototype.writeInt16BE=function(f,k,n){return f=+f,k>>>=0,n||xq(this,f,k,2,32767,-32768),this[k]=f>>>8,this[k+1]=255&f,k+2};df.prototype.writeInt32LE=function(f,k,n){return f=
+f,k>>>=0,n||xq(this,f,k,4,2147483647,-2147483648),this[k]=255&f,this[k+1]=f>>>8,this[k+2]=f>>>16,this[k+3]=f>>>24,k+4};df.prototype.writeInt32BE=function(f,k,n){return f=+f,k>>>=0,n||xq(this,f,k,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[k]=f>>>24,this[k+1]=f>>>16,this[k+2]=f>>>8,this[k+3]=255&f,k+4};df.prototype.writeFloatLE=function(f,k,n){return k0(this,f,k,!0,n)};df.prototype.writeFloatBE=function(f,k,n){return k0(this,f,k,!1,n)};df.prototype.writeDoubleLE=function(f,k,n){return l0(this,
f,k,!0,n)};df.prototype.writeDoubleBE=function(f,k,n){return l0(this,f,k,!1,n)};df.prototype.copy=function(f,k,n,b){if(!df.isBuffer(f))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),k>=f.length&&(k=f.length),k||(k=0),0<b&&b<n&&(b=n),b===n)||0===f.length||0===this.length)return 0;if(0>k)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");
b>this.length&&(b=this.length);f.length-k<b-n&&(b=f.length-k+n);var e=b-n;if(this===f&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(k,n,b);else if(this===f&&n<k&&k<b)for(b=e-1;0<=b;--b)f[b+k]=this[b+n];else Uint8Array.prototype.set.call(f,this.subarray(n,b),k);return e};df.prototype.fill=function(f,k,n,b){if("string"==typeof f){if("string"==typeof k?(b=k,k=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==b&&"string"!=typeof b)throw new TypeError("encoding must be a string");
if("string"==typeof b&&!df.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===f.length){var e=f.charCodeAt(0);("utf8"===b&&128>e||"latin1"===b)&&(f=e)}}else"number"==typeof f?f&=255:"boolean"==typeof f&&(f=Number(f));if(0>k||this.length<k||this.length<n)throw new RangeError("Out of range index");if(n<=k)return this;if(k>>>=0,n=void 0===n?this.length:n>>>0,f||(f=0),"number"==typeof f)for(b=k;b<n;++b)this[b]=f;else{e=df.isBuffer(f)?f:df.from(f,b);var m=e.length;if(0===m)throw new TypeError('The value "'+
f+'" is invalid for argument "value"');for(b=0;b<n-k;++b)this[b+k]=e[b%m]}return this};var Eda=/[^+/0-9A-Za-z-_]/g,Dda=function(){for(var f=Array(256),k=0;16>k;++k)for(var n=16*k,b=0;16>b;++b)f[n+b]="0123456789abcdef"[k]+"0123456789abcdef"[b];return f}(),OM={},PM=Ni,av=PM.Buffer;av.from&&av.alloc&&av.allocUnsafe&&av.allocUnsafeSlow?OM=PM:(m0(PM,OM),OM.Buffer=tA);tA.prototype=Object.create(av.prototype);m0(av,tA);tA.from=function(f,k,n){if("number"==typeof f)throw new TypeError("Argument must not be a number");
return av(f,k,n)};tA.alloc=function(f,k,n){if("number"!=typeof f)throw new TypeError("Argument must be a number");f=av(f);return void 0!==k?"string"==typeof n?f.fill(k,n):f.fill(k):f.fill(0),f};tA.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return av(f)};tA.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return PM.SlowBuffer(f)};var xj=OM,XC={},NQ=xj.Buffer,n0=NQ.isEncoding||function(f){switch((f=
""+f)&&f.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};XC.StringDecoder=OF;OF.prototype.write=function(f){if(0===f.length)return"";var k;if(this.lastNeed){if(void 0===(k=this.fillLast(f)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<f.length?k?k+this.text(f,n):this.text(f,n):k||""};OF.prototype.end=function(f){f=f&&f.length?this.write(f):"";
return this.lastNeed?f+"\ufffd":f};OF.prototype.text=function(f,k){var n=f.length-1;if(n<k)n=0;else{var b=OQ(f[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<k||-2===b?0:0<=(b=OQ(f[n]))?(0<b&&(this.lastNeed=b-2),b):--n<k||-2===b?0:0<=(b=OQ(f[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return f.toString("utf8",k);this.lastTotal=n;b=f.length-(n-this.lastNeed);return f.copy(this.lastChar,0,b),f.toString("utf8",k,b)};OF.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length);this.lastNeed-=f.length};var mK=bv.EventEmitter,wt={},o0={};qs("ERR_INVALID_OPT_VALUE",function(f,k){return'The value "'+k+'" is invalid for option "'+f+'"'},TypeError);qs("ERR_INVALID_ARG_TYPE",function(f,k,n){var b;f=("string"==typeof k&&"not "===k.substr(0,4)?(b="must not be",k=k.replace(/^not /,"")):b="must be",function(e,m,a){return(void 0===
a||a>e.length)&&(a=e.length),e.substring(a-m.length,a)===m}(f," argument"))?"The "+f+" "+b+" "+p0(k,"type"):'The "'+f+'" '+(function(e,m,a){return"number"!=typeof a&&(a=0),!(a+m.length>e.length)&&-1!==e.indexOf(m,a)}(f,".")?"property":"argument")+" "+b+" "+p0(k,"type");return f+=". Received type "+typeof n,f},TypeError);qs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");qs("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});qs("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");qs("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});qs("ERR_MULTIPLE_CALLBACK","Callback called multiple times");qs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");qs("ERR_STREAM_WRITE_AFTER_END","write after end");qs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);qs("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);qs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
wt.codes=o0;var x0=function(){throw Error("Readable.from is not available in the browser");},QQ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,z0=function(f,k){if(PQ("noDeprecation"))return f;var n=!1;return function(){if(!n){if(PQ("throwDeprecation"))throw Error(k);PQ("traceDeprecation")?console.trace(k):console.warn(k);n=!0}return f.apply(this||QQ,arguments)}},QM=Ni.Buffer,HU=Rh.inspect,ima=HU&&HU.custom||"inspect",Rda=function(){function f(){if(!(this instanceof
f))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var k;return k=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,
--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=n+b.data;return e}},{key:"concat",value:function(n){if(0===this.length)return QM.alloc(0);for(var b,e,m=QM.allocUnsafe(n>>>0),a=this.head,g=0;a;)n=a.data,b=m,e=g,void QM.prototype.copy.call(n,b,e),g+=a.data.length,a=a.next;return m}},{key:"consume",value:function(n,b){var e;return n<this.head.data.length?(e=
this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):e=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),e}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,e=1,m=b.data;for(n-=m.length;b=b.next;){var a=b.data,g=n>a.length?a.length:n;if(g===a.length?m+=a:m+=a.slice(0,n),0==(n-=g)){g===a.length?(++e,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(g));break}++e}return this.length-=
e,m}},{key:"_getBuffer",value:function(n){var b=QM.allocUnsafe(n),e=this.head,m=1;e.data.copy(b);for(n-=e.data.length;e=e.next;){var a=e.data,g=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,g),0==(n-=g)){g===a.length?(++m,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=a.slice(g));break}++m}return this.length-=m,b}},{key:ima,value:function(n,b){return HU(this,function(e){for(var m=1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?q0(Object(a),!0).forEach(function(g){var l=
a[g];g in e?Object.defineProperty(e,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q0(Object(a)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(a,g))})}return e}({},b,{depth:0,customInspect:!1}))}}],Mda(f.prototype,k),f}(),mB=uj,v0={destroy:function(f,k){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||
b?(k?k(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,mB.nextTick(RQ,this,f)):mB.nextTick(RQ,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(e){!k&&e?n._writableState?n._writableState.errorEmitted?mB.nextTick(lK,n):(n._writableState.errorEmitted=!0,mB.nextTick(r0,n,e)):mB.nextTick(r0,n,e):k?(mB.nextTick(lK,n),k(e)):mB.nextTick(lK,n)}),this)},
undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,k){var n=f._readableState,b=f._writableState;n&&n.autoDestroy||
b&&b.autoDestroy?f.destroy(k):f.emit("error",k)}},jma=wt.codes.ERR_INVALID_OPT_VALUE,w0={getHighWaterMark:function(f,k,n,b){k=null!=k.highWaterMark?k.highWaterMark:b?k[n]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new jma(b?n:"highWaterMark",k);return Math.floor(k)}return f.objectMode?16:16384}},q7=wt.codes.ERR_STREAM_PREMATURE_CLOSE,IU,s0=uj,kma=function e(k,n,b){if("function"==typeof n)return e(k,null,n);n||(n={});b=function(H){var I=!1;return function(){if(!I){I=!0;for(var M=
arguments.length,N=Array(M),X=0;X<M;X++)N[X]=arguments[X];H.apply(this,N)}}}(b||Nda);var m=n.readable||!1!==n.readable&&k.readable,a=n.writable||!1!==n.writable&&k.writable,g=function(){k.writable||r()},l=k._writableState&&k._writableState.finished,r=function(){a=!1;l=!0;m||b.call(k)},v=k._readableState&&k._readableState.endEmitted,y=function(){m=!1;v=!0;a||b.call(k)},A=function(H){b.call(k,H)},E=function(){var H;return m&&!v?(k._readableState&&k._readableState.ended||(H=new q7),b.call(k,H)):a&&!l?
(k._writableState&&k._writableState.ended||(H=new q7),b.call(k,H)):void 0},F=function(){k.req.on("finish",r)};return k.setHeader&&"function"==typeof k.abort?(k.on("complete",r),k.on("abort",E),k.req?F():k.on("request",F)):a&&!k._writableState&&(k.on("end",g),k.on("close",g)),k.on("end",y),k.on("finish",r),!1!==n.error&&k.on("error",A),k.on("close",E),function(){k.removeListener("complete",r);k.removeListener("abort",E);k.removeListener("request",F);k.req&&k.req.removeListener("finish",r);k.removeListener("end",
g);k.removeListener("close",g);k.removeListener("finish",r);k.removeListener("end",y);k.removeListener("error",A);k.removeListener("close",E)}},ay=Symbol("lastResolve"),wA=Symbol("lastReject"),hH=Symbol("error"),RM=Symbol("ended"),vA=Symbol("lastPromise"),JU=Symbol("handlePromise"),uA=Symbol("stream"),lma=Object.getPrototypeOf(function(){}),mma=Object.setPrototypeOf((Zx(IU={get stream(){return this[uA]},next:function(){var k=this,n=this[hH];if(null!==n)return Promise.reject(n);if(this[RM])return Promise.resolve($x(void 0,
!0));if(this[uA].destroyed)return new Promise(function(b,e){s0.nextTick(function(){k[hH]?e(k[hH]):b($x(void 0,!0))})});if(n=this[vA])n=new Promise(function(b,e){return function(m,a){b.then(function(){if(e[RM])return m($x(void 0,!0)),void 0;e[JU](m,a)},a)}}(n,this));else{n=this[uA].read();if(null!==n)return Promise.resolve($x(n,!1));n=new Promise(this[JU])}return this[vA]=n,n}},Symbol.asyncIterator,function(){return this}),Zx(IU,"return",function(){var k=this;return new Promise(function(n,b){k[uA].destroy(null,
function(e){if(e)return b(e),void 0;n($x(void 0,!0))})})}),IU),lma),Sda=function(k){var n,b=Object.create(mma,(Zx(n={},uA,{value:k,writable:!0}),Zx(n,ay,{value:null,writable:!0}),Zx(n,wA,{value:null,writable:!0}),Zx(n,hH,{value:null,writable:!0}),Zx(n,RM,{value:k._readableState.endEmitted,writable:!0}),Zx(n,JU,{value:function(e,m){var a=b[uA].read();a?(b[vA]=null,b[ay]=null,b[wA]=null,e($x(a,!1))):(b[ay]=e,b[wA]=m)},writable:!0}),n));return b[vA]=null,kma(k,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==
e.code){var m=b[wA];return null!==m&&(b[vA]=null,b[ay]=null,b[wA]=null,m(e)),b[hH]=e,void 0}e=b[ay];null!==e&&(b[vA]=null,b[ay]=null,b[wA]=null,e($x(void 0,!0)));b[RM]=!0}),k.on("readable",Pda.bind(null,b)),b},SQ={},u0=!1,Qda="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,TQ={},y0=!1,Uda="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,UQ={},A0=!1,nma=t0(),r7=wt.codes.ERR_STREAM_PREMATURE_CLOSE,$Q=function m(n,b,e){if("function"==typeof b)return m(n,
null,b);b||(b={});e=function(I){var M=!1;return function(){if(!M){M=!0;for(var N=arguments.length,X=Array(N),W=0;W<N;W++)X[W]=arguments[W];I.apply(this,X)}}}(e||Vda);var a=b.readable||!1!==b.readable&&n.readable,g=b.writable||!1!==b.writable&&n.writable,l=function(){n.writable||v()},r=n._writableState&&n._writableState.finished,v=function(){g=!1;r=!0;a||e.call(n)},y=n._readableState&&n._readableState.endEmitted,A=function(){a=!1;y=!0;g||e.call(n)},E=function(I){e.call(n,I)},F=function(){var I;return a&&
!y?(n._readableState&&n._readableState.ended||(I=new r7),e.call(n,I)):g&&!r?(n._writableState&&n._writableState.ended||(I=new r7),e.call(n,I)):void 0},H=function(){n.req.on("finish",v)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",v),n.on("abort",F),n.req?H():n.on("request",H)):g&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",A),n.on("finish",v),!1!==b.error&&n.on("error",E),n.on("close",F),function(){n.removeListener("complete",v);n.removeListener("abort",F);n.removeListener("request",
H);n.req&&n.req.removeListener("finish",v);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",v);n.removeListener("end",A);n.removeListener("error",E);n.removeListener("close",F)}},SM=Ni.Buffer,KU=Rh.inspect,oma=KU&&KU.custom||"inspect",aea=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=
e:this.head=e;this.tail=e;++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e);this.head=e;++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var m=this.head,a=""+m.data;m=m.next;)a+=e+m.data;
return a}},{key:"concat",value:function(e){if(0===this.length)return SM.alloc(0);for(var m,a,g=SM.allocUnsafe(e>>>0),l=this.head,r=0;l;)e=l.data,m=g,a=r,void SM.prototype.copy.call(e,m,a),r+=l.data.length,l=l.next;return g}},{key:"consume",value:function(e,m){var a;return e<this.head.data.length?(a=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):a=e===this.head.data.length?this.shift():m?this._getString(e):this._getBuffer(e),a}},{key:"first",value:function(){return this.head.data}},
{key:"_getString",value:function(e){var m=this.head,a=1,g=m.data;for(e-=g.length;m=m.next;){var l=m.data,r=e>l.length?l.length:e;if(r===l.length?g+=l:g+=l.slice(0,e),0==(e-=r)){r===l.length?(++a,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=l.slice(r));break}++a}return this.length-=a,g}},{key:"_getBuffer",value:function(e){var m=SM.allocUnsafe(e),a=this.head,g=1;a.data.copy(m);for(e-=a.data.length;a=a.next;){var l=a.data,r=e>l.length?l.length:e;if(l.copy(m,m.length-e,0,r),
0==(e-=r)){r===l.length?(++g,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=l.slice(r));break}++g}return this.length-=g,m}},{key:oma,value:function(e,m){return KU(this,function(a){for(var g=1;g<arguments.length;g++){var l=null!=arguments[g]?arguments[g]:{};g%2?B0(Object(l),!0).forEach(function(r){var v=l[r];r in a?Object.defineProperty(a,r,{value:v,enumerable:!0,configurable:!0,writable:!0}):a[r]=v}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):
B0(Object(l)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(l,r))})}return a}({},m,{depth:0,customInspect:!1}))}}],Wda(n.prototype,b),n}(),nB=uj,F0={destroy:function(n,b){var e=this,m=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||m?(b?b(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,nB.nextTick(VQ,this,n)):nB.nextTick(VQ,this,n)),this):(this._readableState&&
(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?e._writableState?e._writableState.errorEmitted?nB.nextTick(nK,e):(e._writableState.errorEmitted=!0,nB.nextTick(C0,e,a)):nB.nextTick(C0,e,a):b?(nB.nextTick(nK,e),b(a)):nB.nextTick(nK,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var e=n._readableState,m=n._writableState;e&&e.autoDestroy||m&&m.autoDestroy?n.destroy(b):n.emit("error",b)}},pma=wt.codes.ERR_INVALID_OPT_VALUE,LU,G0={getHighWaterMark:function(n,b,e,m){b=null!=b.highWaterMark?b.highWaterMark:m?b[e]:null;
if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new pma(m?e:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},D0=uj,qma=$Q,dy=Symbol("lastResolve"),zA=Symbol("lastReject"),iH=Symbol("error"),TM=Symbol("ended"),yA=Symbol("lastPromise"),MU=Symbol("handlePromise"),xA=Symbol("stream"),rma=Object.getPrototypeOf(function(){}),sma=Object.setPrototypeOf((by(LU={get stream(){return this[xA]},next:function(){var n=this,b=this[iH];if(null!==b)return Promise.reject(b);if(this[TM])return Promise.resolve(cy(void 0,
!0));if(this[xA].destroyed)return new Promise(function(e,m){D0.nextTick(function(){n[iH]?m(n[iH]):e(cy(void 0,!0))})});if(b=this[yA])b=new Promise(function(e,m){return function(a,g){e.then(function(){if(m[TM])return a(cy(void 0,!0)),void 0;m[MU](a,g)},g)}}(b,this));else{b=this[xA].read();if(null!==b)return Promise.resolve(cy(b,!1));b=new Promise(this[MU])}return this[yA]=b,b}},Symbol.asyncIterator,function(){return this}),by(LU,"return",function(){var n=this;return new Promise(function(b,e){n[xA].destroy(null,
function(m){if(m)return e(m),void 0;b(cy(void 0,!0))})})}),LU),rma),bea=function(n){var b,e=Object.create(sma,(by(b={},xA,{value:n,writable:!0}),by(b,dy,{value:null,writable:!0}),by(b,zA,{value:null,writable:!0}),by(b,iH,{value:null,writable:!0}),by(b,TM,{value:n._readableState.endEmitted,writable:!0}),by(b,MU,{value:function(m,a){var g=e[xA].read();g?(e[yA]=null,e[dy]=null,e[zA]=null,m(cy(g,!1))):(e[dy]=m,e[zA]=a)},writable:!0}),b));return e[yA]=null,qma(n,function(m){if(m&&"ERR_STREAM_PREMATURE_CLOSE"!==
m.code){var a=e[zA];return null!==a&&(e[yA]=null,e[dy]=null,e[zA]=null,a(m)),e[iH]=m,void 0}m=e[dy];null!==m&&(e[yA]=null,e[dy]=null,e[zA]=null,m(cy(void 0,!0)));e[TM]=!0}),n.on("readable",Yda.bind(null,e)),e},WQ={},E0=!1,$da="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,XQ={},I0=!1,cea="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,YQ={},J0=!1,tma=H0(),s7=PF(),UM=wt.codes,uma=UM.ERR_METHOD_NOT_IMPLEMENTED,eea=UM.ERR_MULTIPLE_CALLBACK,
hea=UM.ERR_TRANSFORM_ALREADY_TRANSFORMING,gea=UM.ERR_TRANSFORM_WITH_LENGTH_0,pK=s7;zi(cv,pK);cv.prototype.push=function(n,b){return this._transformState.needTransform=!1,pK.prototype.push.call(this,n,b)};cv.prototype._transform=function(n,b,e){e(new uma("_transform()"))};cv.prototype._write=function(n,b,e){var m=this._transformState;(m.writecb=e,m.writechunk=n,m.writeencoding=b,m.transforming)||(n=this._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};
cv.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};cv.prototype._destroy=function(n,b){pK.prototype._destroy.call(this,n,function(e){b(e)})};var L0=cv;zi(QF,L0);QF.prototype._transform=function(n,b,e){e(null,n)};var ZQ,t7=wt.codes,vma=t7.ERR_MISSING_ARGS,jea=t7.ERR_STREAM_DESTROYED,bR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,
aR=bv.EventEmitter;zi(rs,aR);rs.Readable=nma;rs.Writable=tma;rs.Duplex=s7;rs.Transform=cv;rs.PassThrough=QF;rs.finished=$Q;rs.pipeline=function(){for(var n=arguments.length,b=Array(n),e=0;e<n;e++)b[e]=arguments[e];var m,a=b.length?"function"!=typeof b[b.length-1]?M0:b.pop():M0;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new vma("streams");var g=b.map(function(l,r){var v=r<b.length-1;return iea(l,v,0<r,function(y){m||(m=y);y&&g.forEach(N0);v||(g.forEach(N0),a(m))})});return b.reduce(kea)};rs.Stream=
rs;rs.prototype.pipe=function(n,b){function e(A){n.writable&&!1===n.write(A)&&v.pause&&v.pause()}function m(){v.readable&&v.resume&&v.resume()}function a(){y||(y=!0,n.end())}function g(){y||(y=!0,"function"==typeof n.destroy&&n.destroy())}function l(A){if(r(),0===aR.listenerCount(this||bR,"error"))throw A;}function r(){v.removeListener("data",e);n.removeListener("drain",m);v.removeListener("end",a);v.removeListener("close",g);v.removeListener("error",l);n.removeListener("error",l);v.removeListener("end",
r);v.removeListener("close",r);n.removeListener("close",r)}var v=this||bR;v.on("data",e);n.on("drain",m);n._isStdio||b&&!1===b.end||(v.on("end",a),v.on("close",g));var y=!1;return v.on("error",l),n.on("error",l),v.on("end",r),v.on("close",r),n.on("close",r),n.emit("pipe",v),n};var MA=rs,VM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,FA={},SD=function(n){if(Object.keys)return Object.keys(n);var b=[],e;for(e in n)b.push(e);return b},oB=function(n,b){if(n.forEach)return n.forEach(b);
for(var e=0;e<n.length;e++)b(n[e],e,n)},wma=function(){try{return Object.defineProperty({},"_",{}),function(n,b,e){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:e})}}catch(n){return function(b,e,m){b[e]=m}}}(),u7="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
qK.prototype={};var Cv=FA.Script=function(n){if(!((this||VM)instanceof Cv))return new Cv(n);(this||VM).code=n};Cv.prototype.runInContext=function(n){if(!(n instanceof qK))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var e=b.contentWindow,m=e.eval,a=e.execScript;!m&&a&&(a.call(e,"null"),m=e.eval);oB(SD(n),function(l){e[l]=n[l]});oB(u7,function(l){n[l]&&(e[l]=n[l])});var g=SD(e);m=
m.call(e,(this||VM).code);return oB(SD(e),function(l){var r;if(!(r=l in n)){a:if(g.indexOf)r=g.indexOf(l);else{for(r=0;r<g.length;r++)if(g[r]===l)break a;r=-1}r=-1===r}r&&(n[l]=e[l])}),oB(u7,function(l){l in n||wma(n,l,e[l])}),document.body.removeChild(b),m};Cv.prototype.runInThisContext=function(){return eval((this||VM).code)};Cv.prototype.runInNewContext=function(n){var b=Cv.createContext(n),e=this.runInContext(b);return n&&oB(SD(b),function(m){n[m]=b[m]}),e};oB(SD(Cv.prototype),function(n){FA[n]=
Cv[n]=function(b){var e=Cv(b);return e[n].apply(e,[].slice.call(arguments,1))}});FA.isContext=function(n){return n instanceof qK};FA.createScript=function(n){return FA.Script(n)};FA.createContext=Cv.createContext=function(n){var b=new qK;return"object"==typeof n&&oB(SD(n),function(e){b[e]=n[e]}),b};var v7="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xma=uj,yma=xj.Buffer,WM=v7.crypto||v7.msCrypto,Ky=WM&&WM.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var e=yma.allocUnsafe(n);if(0<n)if(65536<n)for(var m=0;m<n;m+=65536)WM.getRandomValues(e.slice(m,m+65536));else WM.getRandomValues(e);return"function"==typeof b?xma.nextTick(function(){b(null,e)}):e}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},rK=xj.Buffer,O0=MA.Transform;zi(zw,O0);zw.prototype._transform=function(n,b,e){var m=null;try{this.update(n,b)}catch(a){m=a}e(m)};zw.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(e){b=e}n(b)};zw.prototype.update=function(n,b){var e=n;if(!rK.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");rK.isBuffer(n)||(n=rK.from(n,b));b=this._block;for(e=0;this._blockOffset+n.length-e>=this._blockSize;){for(var m=this._blockOffset;m<this._blockSize;)b[m++]=n[e++];this._update();this._blockOffset=0}for(;e<n.length;)b[this._blockOffset++]=n[e++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};zw.prototype._update=function(){throw Error("_update is not implemented");};zw.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};zw.prototype._digest=function(){throw Error("_digest is not implemented");
};var P0=zw,zma=xj.Buffer,wg=Array(16);zi(YC,P0);YC.prototype._update=function(){for(var n=0;16>n;++n)wg[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,e=this._c,m=this._d;n=ep(n,b,e,m,wg[0],3614090360,7);m=ep(m,n,b,e,wg[1],3905402710,12);e=ep(e,m,n,b,wg[2],606105819,17);b=ep(b,e,m,n,wg[3],3250441966,22);n=ep(n,b,e,m,wg[4],4118548399,7);m=ep(m,n,b,e,wg[5],1200080426,12);e=ep(e,m,n,b,wg[6],2821735955,17);b=ep(b,e,m,n,wg[7],4249261313,22);n=ep(n,b,e,m,wg[8],1770035416,7);m=ep(m,n,b,e,wg[9],
2336552879,12);e=ep(e,m,n,b,wg[10],4294925233,17);b=ep(b,e,m,n,wg[11],2304563134,22);n=ep(n,b,e,m,wg[12],1804603682,7);m=ep(m,n,b,e,wg[13],4254626195,12);e=ep(e,m,n,b,wg[14],2792965006,17);n=fp(n,b=ep(b,e,m,n,wg[15],1236535329,22),e,m,wg[1],4129170786,5);m=fp(m,n,b,e,wg[6],3225465664,9);e=fp(e,m,n,b,wg[11],643717713,14);b=fp(b,e,m,n,wg[0],3921069994,20);n=fp(n,b,e,m,wg[5],3593408605,5);m=fp(m,n,b,e,wg[10],38016083,9);e=fp(e,m,n,b,wg[15],3634488961,14);b=fp(b,e,m,n,wg[4],3889429448,20);n=fp(n,b,e,
m,wg[9],568446438,5);m=fp(m,n,b,e,wg[14],3275163606,9);e=fp(e,m,n,b,wg[3],4107603335,14);b=fp(b,e,m,n,wg[8],1163531501,20);n=fp(n,b,e,m,wg[13],2850285829,5);m=fp(m,n,b,e,wg[2],4243563512,9);e=fp(e,m,n,b,wg[7],1735328473,14);n=gp(n,b=fp(b,e,m,n,wg[12],2368359562,20),e,m,wg[5],4294588738,4);m=gp(m,n,b,e,wg[8],2272392833,11);e=gp(e,m,n,b,wg[11],1839030562,16);b=gp(b,e,m,n,wg[14],4259657740,23);n=gp(n,b,e,m,wg[1],2763975236,4);m=gp(m,n,b,e,wg[4],1272893353,11);e=gp(e,m,n,b,wg[7],4139469664,16);b=gp(b,
e,m,n,wg[10],3200236656,23);n=gp(n,b,e,m,wg[13],681279174,4);m=gp(m,n,b,e,wg[0],3936430074,11);e=gp(e,m,n,b,wg[3],3572445317,16);b=gp(b,e,m,n,wg[6],76029189,23);n=gp(n,b,e,m,wg[9],3654602809,4);m=gp(m,n,b,e,wg[12],3873151461,11);e=gp(e,m,n,b,wg[15],530742520,16);n=hp(n,b=gp(b,e,m,n,wg[2],3299628645,23),e,m,wg[0],4096336452,6);m=hp(m,n,b,e,wg[7],1126891415,10);e=hp(e,m,n,b,wg[14],2878612391,15);b=hp(b,e,m,n,wg[5],4237533241,21);n=hp(n,b,e,m,wg[12],1700485571,6);m=hp(m,n,b,e,wg[3],2399980690,10);e=
hp(e,m,n,b,wg[10],4293915773,15);b=hp(b,e,m,n,wg[1],2240044497,21);n=hp(n,b,e,m,wg[8],1873313359,6);m=hp(m,n,b,e,wg[15],4264355552,10);e=hp(e,m,n,b,wg[6],2734768916,15);b=hp(b,e,m,n,wg[13],1309151649,21);n=hp(n,b,e,m,wg[4],4149444226,6);m=hp(m,n,b,e,wg[11],3174756917,10);e=hp(e,m,n,b,wg[2],718787259,15);b=hp(b,e,m,n,wg[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+e|0;this._d=this._d+m|0};YC.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=zma.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var NU=Ni.Buffer,Q0=zw,Tt=Array(16),jH=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],kH=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],lH=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],mH=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],nH=[0,1518500249,1859775393,2400959708,2840853838],oH=[1352829926,1548603684,1836072691,2053994217,0];zi(ZC,Q0);ZC.prototype._update=function(){for(var n=0;16>n;++n)Tt[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var e=0|this._c,m=0|this._d,a=0|this._e,g=0|this._a,l=0|this._b,r=0|this._c,
v=0|this._d,y=0|this._e,A=0;80>A;A+=1){if(16>A){var E=a;E=ss(b+(n^e^m)+Tt[jH[A]]+nH[0]|0,lH[A])+E|0;b=y;var F=ss(g+(l^(r|~v))+Tt[kH[A]]+oH[0]|0,mH[A])+b|0}else 32>A?(E=a,E=ss(b+(n&e|~n&m)+Tt[jH[A]]+nH[1]|0,lH[A])+E|0,b=y,F=ss(g+(l&v|r&~v)+Tt[kH[A]]+oH[1]|0,mH[A])+b|0):48>A?(E=a,E=ss(b+((n|~e)^m)+Tt[jH[A]]+nH[2]|0,lH[A])+E|0,b=y,F=ss(g+((l|~r)^v)+Tt[kH[A]]+oH[2]|0,mH[A])+b|0):64>A?(E=a,E=ss(b+(n&m|e&~m)+Tt[jH[A]]+nH[3]|0,lH[A])+E|0,b=y,F=ss(g+(l&r|~l&v)+Tt[kH[A]]+oH[3]|0,mH[A])+b|0):(E=a,E=ss(b+(n^
(e|~m))+Tt[jH[A]]+nH[4]|0,lH[A])+E|0,b=y,F=ss(g+(l^r^v)+Tt[kH[A]]+oH[4]|0,mH[A])+b|0);b=a;a=m;m=ss(e,10);e=n;n=E;g=y;y=v;v=ss(r,10);r=l;l=F}e=this._b+e+v|0;this._b=this._c+m+y|0;this._c=this._d+a+g|0;this._d=this._e+b+l|0;this._e=this._a+n+r|0;this._a=e};ZC.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=NU.alloc?NU.alloc(20):new NU(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var wl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,R0=xj.Buffer;Aw.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=R0.from(n,b));b=(this||wl)._block;for(var e=(this||wl)._blockSize,m=n.length,a=(this||wl)._len,
g=0;g<m;){for(var l=a%e,r=Math.min(m-g,e-l),v=0;v<r;v++)b[l+v]=n[g+v];g+=r;0==(a+=r)%e&&this._update(b)}return(this||wl)._len+=m,this||wl};Aw.prototype.digest=function(n){var b=(this||wl)._len%(this||wl)._blockSize;(this||wl)._block[b]=128;(this||wl)._block.fill(0,b+1);b>=(this||wl)._finalSize&&(this._update((this||wl)._block),(this||wl)._block.fill(0));b=8*(this||wl)._len;if(4294967295>=b)(this||wl)._block.writeUInt32BE(b,(this||wl)._blockSize-4);else{var e=(4294967295&b)>>>0;(this||wl)._block.writeUInt32BE((b-
e)/4294967296,(this||wl)._blockSize-8);(this||wl)._block.writeUInt32BE(e,(this||wl)._blockSize-4)}this._update((this||wl)._block);b=this._hash();return n?b.toString(n):b};Aw.prototype._update=function(){throw Error("_update must be implemented by subclass");};var ni="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,S0=Aw,Ama=xj.Buffer,Bma=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],lea=Array(64);zi($C,S0);$C.prototype.init=function(){return(this||ni)._a=1779033703,(this||ni)._b=3144134277,(this||ni)._c=1013904242,(this||ni)._d=2773480762,(this||ni)._e=1359893119,(this||ni)._f=2600822924,(this||ni)._g=528734635,(this||ni)._h=1541459225,this||ni};$C.prototype._update=function(n){for(var b,e=(this||ni)._w,m=0|(this||ni)._a,a=0|(this||ni)._b,g=0|(this||ni)._c,l=0|(this||ni)._d,r=0|(this||ni)._e,v=0|(this||ni)._f,y=0|(this||ni)._g,A=0|
(this||ni)._h,E=0;16>E;++E)e[E]=n.readInt32BE(4*E);for(;64>E;++E){n=E;var F=(((b=e[E-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+e[E-7],H=e[E-15];e[n]=0|F+((H>>>7|H<<25)^(H>>>18|H<<14)^H>>>3)+e[E-16]}for(b=0;64>b;++b)E=A+((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(y^r&(v^y))+Bma[b]+e[b]|0,n=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&a|g&(m|a))|0,A=y,y=v,v=r,r=l+E|0,l=g,g=a,a=m,m=E+n|0;(this||ni)._a=m+(this||ni)._a|0;(this||ni)._b=a+(this||ni)._b|0;(this||ni)._c=g+(this||ni)._c|0;(this||ni)._d=
l+(this||ni)._d|0;(this||ni)._e=r+(this||ni)._e|0;(this||ni)._f=v+(this||ni)._f|0;(this||ni)._g=y+(this||ni)._g|0;(this||ni)._h=A+(this||ni)._h|0};$C.prototype._hash=function(){var n=Ama.allocUnsafe(32);return n.writeInt32BE((this||ni)._a,0),n.writeInt32BE((this||ni)._b,4),n.writeInt32BE((this||ni)._c,8),n.writeInt32BE((this||ni)._d,12),n.writeInt32BE((this||ni)._e,16),n.writeInt32BE((this||ni)._f,20),n.writeInt32BE((this||ni)._g,24),n.writeInt32BE((this||ni)._h,28),n};var Ek="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,T0=Aw,Cma=xj.Buffer,Dma=[1518500249,1859775393,-1894007588,-899497514],mea=Array(80);zi(RF,T0);RF.prototype.init=function(){return(this||Ek)._a=1732584193,(this||Ek)._b=4023233417,(this||Ek)._c=2562383102,(this||Ek)._d=271733878,(this||Ek)._e=3285377520,this||Ek};RF.prototype._update=function(n){for(var b,e=(this||Ek)._w,m=0|(this||Ek)._a,a=0|(this||Ek)._b,g=0|(this||Ek)._c,l=0|(this||Ek)._d,r=0|(this||Ek)._e,v=0;16>v;++v)e[v]=n.readInt32BE(4*v);for(;80>
v;++v)e[v]=e[v-3]^e[v-8]^e[v-14]^e[v-16];for(n=0;80>n;++n)v=~~(n/20),v=0|((b=m)<<5|b>>>27)+(0===v?a&g|~a&l:2===v?a&g|a&l|g&l:a^g^l)+r+e[n]+Dma[v],r=l,l=g,g=a<<30|a>>>2,a=m,m=v;(this||Ek)._a=m+(this||Ek)._a|0;(this||Ek)._b=a+(this||Ek)._b|0;(this||Ek)._c=g+(this||Ek)._c|0;(this||Ek)._d=l+(this||Ek)._d|0;(this||Ek)._e=r+(this||Ek)._e|0};RF.prototype._hash=function(){var n=Cma.allocUnsafe(20);return n.writeInt32BE(0|(this||Ek)._a,0),n.writeInt32BE(0|(this||Ek)._b,4),n.writeInt32BE(0|(this||Ek)._c,8),
n.writeInt32BE(0|(this||Ek)._d,12),n.writeInt32BE(0|(this||Ek)._e,16),n};var Fk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,U0=Aw,Ema=xj.Buffer,Fma=[1518500249,1859775393,-1894007588,-899497514],nea=Array(80);zi(SF,U0);SF.prototype.init=function(){return(this||Fk)._a=1732584193,(this||Fk)._b=4023233417,(this||Fk)._c=2562383102,(this||Fk)._d=271733878,(this||Fk)._e=3285377520,this||Fk};SF.prototype._update=function(n){for(var b,e=(this||Fk)._w,m=0|(this||Fk)._a,a=
0|(this||Fk)._b,g=0|(this||Fk)._c,l=0|(this||Fk)._d,r=0|(this||Fk)._e,v=0;16>v;++v)e[v]=n.readInt32BE(4*v);for(;80>v;++v)e[v]=(b=e[v-3]^e[v-8]^e[v-14]^e[v-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(m<<5|m>>>27)+(0===b?a&g|~a&l:2===b?a&g|a&l|g&l:a^g^l)+r+e[n]+Fma[b]|0,r=l,l=g,g=a<<30|a>>>2,a=m,m=b;(this||Fk)._a=m+(this||Fk)._a|0;(this||Fk)._b=a+(this||Fk)._b|0;(this||Fk)._c=g+(this||Fk)._c|0;(this||Fk)._d=l+(this||Fk)._d|0;(this||Fk)._e=r+(this||Fk)._e|0};SF.prototype._hash=function(){var n=Ema.allocUnsafe(20);
return n.writeInt32BE(0|(this||Fk)._a,0),n.writeInt32BE(0|(this||Fk)._b,4),n.writeInt32BE(0|(this||Fk)._c,8),n.writeInt32BE(0|(this||Fk)._d,12),n.writeInt32BE(0|(this||Fk)._e,16),n};var Xn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,pea=Aw,Gma=xj.Buffer,oea=Array(64);zi(tK,$C);tK.prototype.init=function(){return(this||Xn)._a=3238371032,(this||Xn)._b=914150663,(this||Xn)._c=812702999,(this||Xn)._d=4144912697,(this||Xn)._e=4290775857,(this||Xn)._f=1750603025,(this||
Xn)._g=1694076839,(this||Xn)._h=3204075428,this||Xn};tK.prototype._hash=function(){var n=Gma.allocUnsafe(28);return n.writeInt32BE((this||Xn)._a,0),n.writeInt32BE((this||Xn)._b,4),n.writeInt32BE((this||Xn)._c,8),n.writeInt32BE((this||Xn)._d,12),n.writeInt32BE((this||Xn)._e,16),n.writeInt32BE((this||Xn)._f,20),n.writeInt32BE((this||Xn)._g,24),n};var zf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,V0=Aw,Hma=xj.Buffer,w7=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],qea=Array(160);zi(aD,V0);aD.prototype.init=function(){return(this||zf)._ah=1779033703,(this||zf)._bh=3144134277,(this||zf)._ch=1013904242,(this||zf)._dh=2773480762,(this||zf)._eh=1359893119,(this||zf)._fh=2600822924,(this||zf)._gh=528734635,(this||zf)._hh=1541459225,(this||zf)._al=4089235720,(this||zf)._bl=2227873595,(this||zf)._cl=4271175723,(this||
zf)._dl=1595750129,(this||zf)._el=2917565137,(this||zf)._fl=725511199,(this||zf)._gl=4215389547,(this||zf)._hl=327033209,this||zf};aD.prototype._update=function(n){for(var b=(this||zf)._w,e=0|(this||zf)._ah,m=0|(this||zf)._bh,a=0|(this||zf)._ch,g=0|(this||zf)._dh,l=0|(this||zf)._eh,r=0|(this||zf)._fh,v=0|(this||zf)._gh,y=0|(this||zf)._hh,A=0|(this||zf)._al,E=0|(this||zf)._bl,F=0|(this||zf)._cl,H=0|(this||zf)._dl,I=0|(this||zf)._el,M=0|(this||zf)._fl,N=0|(this||zf)._gl,X=0|(this||zf)._hl,W=0;32>W;W+=
2)b[W]=n.readInt32BE(4*W),b[W+1]=n.readInt32BE(4*W+4);for(;160>W;W+=2){n=b[W-30];var ea=b[W-30+1],Aa=(n>>>1|ea<<31)^(n>>>8|ea<<24)^n>>>7,Ka=(ea>>>1|n<<31)^(ea>>>8|n<<24)^(ea>>>7|n<<25);var K=n=b[W-4];var aa=ea=b[W-4+1];K=(K>>>19|aa<<13)^(aa>>>29|K<<3)^K>>>6;ea=(ea>>>19|n<<13)^(n>>>29|ea<<3)^(ea>>>6|n<<26);aa=b[W-32];var T=b[W-32+1];n=Ka+b[W-14+1]|0;Aa=Aa+b[W-14]+Yn(n,Ka)|0;Aa=(Aa=Aa+K+Yn(n=n+ea|0,ea)|0)+aa+Yn(n=n+T|0,T)|0;b[W]=Aa;b[W+1]=n}for(W=0;160>W;W+=2){Aa=b[W];n=b[W+1];ea=e&m|a&(e|m);var U=
A&E|F&(A|E);aa=(e>>>28|A<<4)^(A>>>2|e<<30)^(A>>>7|e<<25);T=(A>>>28|e<<4)^(e>>>2|A<<30)^(e>>>7|A<<25);var pa=w7[W],fa=w7[W+1],oa=v^l&(r^v),hb=N^I&(M^N);Ka=X+((I>>>14|l<<18)^(I>>>18|l<<14)^(l>>>9|I<<23))|0;K=y+((l>>>14|I<<18)^(l>>>18|I<<14)^(I>>>9|l<<23))+Yn(Ka,X)|0;K=(K=(K=K+oa+Yn(Ka=Ka+hb|0,hb)|0)+pa+Yn(Ka=Ka+fa|0,fa)|0)+Aa+Yn(Ka=Ka+n|0,n)|0;n=T+U|0;Aa=aa+ea+Yn(n,T)|0;y=v;X=N;v=r;N=M;r=l;M=I;l=g+K+Yn(I=H+Ka|0,H)|0;g=a;H=F;a=m;F=E;m=e;E=A;e=K+Aa+Yn(A=Ka+n|0,Ka)|0}(this||zf)._al=(this||zf)._al+A|0;
(this||zf)._bl=(this||zf)._bl+E|0;(this||zf)._cl=(this||zf)._cl+F|0;(this||zf)._dl=(this||zf)._dl+H|0;(this||zf)._el=(this||zf)._el+I|0;(this||zf)._fl=(this||zf)._fl+M|0;(this||zf)._gl=(this||zf)._gl+N|0;(this||zf)._hl=(this||zf)._hl+X|0;(this||zf)._ah=(this||zf)._ah+e+Yn((this||zf)._al,A)|0;(this||zf)._bh=(this||zf)._bh+m+Yn((this||zf)._bl,E)|0;(this||zf)._ch=(this||zf)._ch+a+Yn((this||zf)._cl,F)|0;(this||zf)._dh=(this||zf)._dh+g+Yn((this||zf)._dl,H)|0;(this||zf)._eh=(this||zf)._eh+l+Yn((this||zf)._el,
I)|0;(this||zf)._fh=(this||zf)._fh+r+Yn((this||zf)._fl,M)|0;(this||zf)._gh=(this||zf)._gh+v+Yn((this||zf)._gl,N)|0;(this||zf)._hh=(this||zf)._hh+y+Yn((this||zf)._hl,X)|0};aD.prototype._hash=function(){function n(e,m,a){b.writeInt32BE(e,a);b.writeInt32BE(m,a+4)}var b=Hma.allocUnsafe(64);return n((this||zf)._ah,(this||zf)._al,0),n((this||zf)._bh,(this||zf)._bl,8),n((this||zf)._ch,(this||zf)._cl,16),n((this||zf)._dh,(this||zf)._dl,24),n((this||zf)._eh,(this||zf)._el,32),n((this||zf)._fh,(this||zf)._fl,
40),n((this||zf)._gh,(this||zf)._gl,48),n((this||zf)._hh,(this||zf)._hl,56),b};var jk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,sea=Aw,Ima=xj.Buffer,rea=Array(160);zi(uK,aD);uK.prototype.init=function(){return(this||jk)._ah=3418070365,(this||jk)._bh=1654270250,(this||jk)._ch=2438529370,(this||jk)._dh=355462360,(this||jk)._eh=1731405415,(this||jk)._fh=2394180231,(this||jk)._gh=3675008525,(this||jk)._hh=1203062813,(this||jk)._al=3238371032,(this||jk)._bl=914150663,
(this||jk)._cl=812702999,(this||jk)._dl=4144912697,(this||jk)._el=4290775857,(this||jk)._fl=1750603025,(this||jk)._gl=1694076839,(this||jk)._hl=3204075428,this||jk};uK.prototype._hash=function(){function n(e,m,a){b.writeInt32BE(e,a);b.writeInt32BE(m,a+4)}var b=Ima.allocUnsafe(48);return n((this||jk)._ah,(this||jk)._al,0),n((this||jk)._bh,(this||jk)._bl,8),n((this||jk)._ch,(this||jk)._cl,16),n((this||jk)._dh,(this||jk)._dl,24),n((this||jk)._eh,(this||jk)._el,32),n((this||jk)._fh,(this||jk)._fl,40),
b};var Ly,x7=Ly={};(Ly=x7=function(n){n=n.toLowerCase();var b=Ly[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=RF;Ly.sha1=SF;Ly.sha224=tK;Ly.sha256=$C;Ly.sha384=uK;Ly.sha512=aD;var OU=x7,em="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,y7=xj.Buffer,W0=MA.Transform,Jma=XC.StringDecoder;zi(Zn,W0);Zn.prototype.update=function(n,b,e){"string"==typeof n&&(n=y7.from(n,b));n=this._update(n);return(this||em).hashMode?this||em:(e&&
(n=this._toString(n,e)),n)};Zn.prototype.setAutoPadding=function(){};Zn.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};Zn.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};Zn.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};Zn.prototype._transform=function(n,b,e){try{(this||em).hashMode?this._update(n):this.push(this._update(n))}catch(a){var m=a}finally{e(m)}};Zn.prototype._flush=
function(n){try{this.push(this.__final())}catch(e){var b=e}n(b)};Zn.prototype._finalOrDigest=function(n){var b=this.__final()||y7.alloc(0);return n&&(b=this._toString(b,n,!0)),b};Zn.prototype._toString=function(n,b,e){if((this||em)._decoder||((this||em)._decoder=new Jma(b),(this||em)._encoding=b),(this||em)._encoding!==b)throw Error("can't switch encodings");n=(this||em)._decoder.write(n);return e&&(n+=(this||em)._decoder.end()),n};var X0=Zn;zi(vK,X0);vK.prototype._update=function(n){this._hash.update(n)};
vK.prototype._final=function(){return this._hash.digest()};var pH=function(n){return"md5"===(n=n.toLowerCase())?new YC:"rmd160"===n||"ripemd160"===n?new ZC:new vK(OU(n))},z7=function(n){return(new YC).update(n).digest()},Kma=zi,AA=xj.Buffer,Y0=Zn,tea=AA.alloc(128);Kma(wK,Y0);wK.prototype._update=function(n){this._hash.push(n)};wK.prototype._final=function(){var n=this._alg(AA.concat(this._hash));return this._alg(AA.concat([this._opad,n]))};var Lma=zi,Z0=Zn,UF=xj.Buffer,cR=ZC,dR=OU,uea=UF.alloc(128);
Lma(TF,Z0);TF.prototype._update=function(n){this._hash.update(n)};TF.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new cR:dR(this._alg)).update(this._opad).update(n).digest()};var A7=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new TF("rmd160",b):"md5"===n?new wK(z7,b):new TF(n,b)},B7={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},
sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",
id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",
id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},vea=Ni.Buffer,Mma=Math.pow(2,30)-1,PU,C7=function(n,b,e,m){if($0(n,"Password"),$0(b,"Salt"),"number"!=typeof e)throw new TypeError("Iterations not a number");if(0>e)throw new TypeError("Bad iterations");if("number"!=typeof m)throw new TypeError("Key length not a number");if(0>m||m>Mma||m!=m)throw new TypeError("Bad key length");
},D7=uj;D7.browser?PU="utf-8":PU=6<=parseInt(D7.version.split(".")[0].slice(1),10)?"utf-8":"binary";var XM=PU,yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yea=z7,xea=ZC,wea=OU,xt=xj.Buffer,zea=xt.alloc(128),xK={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};a1.prototype.run=function(n,b){return n.copy(b,(this||yt).blocksize),this.hash(b).copy((this||yt).opad,(this||yt).blocksize),this.hash((this||yt).opad)};var QU,RU=function(n,
b,e,m,a){C7(n,b,e,m);xt.isBuffer(n)||(n=xt.from(n,XM));xt.isBuffer(b)||(b=xt.from(b,XM));n=new a1(a=a||"sha1",n,b.length);var g=xt.allocUnsafe(m),l=xt.allocUnsafe(b.length+4);b.copy(l,0,0,b.length);var r=0;a=xK[a];m=Math.ceil(m/a);for(var v=1;v<=m;v++){l.writeUInt32BE(v,b.length);for(var y=n.run(l,n.ipad1),A=y,E=1;E<e;E++){A=n.run(A,n.ipad2);for(var F=0;F<a;F++)y[F]^=A[F]}y.copy(g,r);r+=a}return g},qH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,SU=uj,bD=xj.Buffer,
VF=qH.crypto&&qH.crypto.subtle,Nma={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},TU=[],YM={pbkdf2:function(n,b,e,m,a,g){"function"==typeof a&&(g=a,a=void 0);var l=Nma[(a=a||"sha1").toLowerCase()];if(!l||"function"!=typeof qH.Promise)return SU.nextTick(function(){try{var r=RU(n,b,e,m,a)}catch(v){return g(v)}g(null,r)});if(C7(n,b,e,m),"function"!=typeof g)throw Error("No callback provided to pbkdf2");
bD.isBuffer(n)||(n=bD.from(n,XM));bD.isBuffer(b)||(b=bD.from(b,XM));(function(r,v){r.then(function(y){SU.nextTick(function(){v(null,y)})},function(y){SU.nextTick(function(){v(y)})})})(function(r){if(qH.process&&!qH.process.browser||!VF||!VF.importKey||!VF.deriveBits)return Promise.resolve(!1);if(void 0!==TU[r])return TU[r];var v=b1(QU=QU||bD.alloc(8),QU,10,128,r).then(function(){return!0}).catch(function(){return!1});return TU[r]=v,v}(l).then(function(r){return r?b1(n,b,e,m,l):RU(n,b,e,m,a)}),g)}};
YM.pbkdf2Sync=RU;c1.equal=function(n,b,e){if(n!=b)throw Error(e||"Assertion failed: "+n+" != "+b);};var Cs=c1,Il={readUInt32BE:function(n,b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,e){n[0+e]=b>>>24;n[1+e]=b>>>16&255;n[2+e]=b>>>8&255;n[3+e]=255&b},ip:function(n,b,e,m){for(var a=0,g=0,l=6;0<=l;l-=2){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>>r+l&1}for(l=6;0<=l;l-=2){for(r=1;25>=r;r+=8)g<<=1,g|=b>>>r+l&1;for(r=1;25>=r;r+=8)g<<=1,g|=
n>>>r+l&1}e[m+0]=a>>>0;e[m+1]=g>>>0},rip:function(n,b,e,m){for(var a=0,g=0,l=0;4>l;l++)for(var r=24;0<=r;r-=8)a<<=1,a|=b>>>r+l&1,a<<=1,a|=n>>>r+l&1;for(l=4;8>l;l++)for(r=24;0<=r;r-=8)g<<=1,g|=b>>>r+l&1,g<<=1,g|=n>>>r+l&1;e[m+0]=a>>>0;e[m+1]=g>>>0},pc1:function(n,b,e,m){for(var a=0,g=0,l=7;5<=l;l--){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>r+l&1}for(r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(l=1;3>=l;l++){for(r=0;24>=r;r+=8)g<<=1,g|=b>>r+l&1;for(r=0;24>=r;r+=8)g<<=1,g|=n>>
r+l&1}for(r=0;24>=r;r+=8)g<<=1,g|=n>>r+l&1;e[m+0]=a>>>0;e[m+1]=g>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},ZM=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Il.pc2=function(n,b,e,m){for(var a=0,g=0,l=ZM.length>>>1,r=0;r<l;r++)a<<=1,a|=n>>>ZM[r]&1;for(r=l;r<ZM.length;r++)g<<=1,g|=b>>>ZM[r]&1;e[m+0]=a>>>0;e[m+1]=g>>>0};Il.expand=function(n,b,e){var m=0;var a=(1&n)<<5|n>>>27;for(var g=23;15<=g;g-=4)a<<=
6,a|=n>>>g&63;for(g=11;3<=g;g-=4)m|=n>>>g&63,m<<=6;b[e+0]=a>>>0;b[e+1]=(m|(31&n)<<1|n>>>31)>>>0};var E7=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,
0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,
0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Il.substitute=function(n,b){for(var e=0,m=0;4>m;m++)e<<=4,e|=E7[64*m+(n>>>18-6*m&63)];for(m=0;4>m;m++)e<<=4,e|=E7[256+64*m+(b>>>18-6*m&63)];return e>>>0};var F7=[16,25,12,11,3,20,4,15,
31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Il.permute=function(n){for(var b=0,e=0;e<F7.length;e++)b<<=1,b|=n>>>F7[e]&1;return b>>>0};Il.padSplit=function(n,b,e){for(n=n.toString(2);n.length<b;)n="0"+n;for(var m=[],a=0;a<b;a+=e)m.push(n.slice(a,a+e));return m.join(" ")};var Oma=Cs;mr.prototype._init=function(){};mr.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};mr.prototype._buffer=function(n,b){for(var e=
Math.min(this.buffer.length-this.bufferOff,n.length-b),m=0;m<e;m++)this.buffer[this.bufferOff+m]=n[b+m];return this.bufferOff+=e,e};mr.prototype._flushBuffer=function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};mr.prototype._updateEncrypt=function(n){var b=0,e=0,m=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(e+=this._flushBuffer(m,e)));for(var a=n.length-(n.length-
b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,m,e),e+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return m};mr.prototype._updateDecrypt=function(n){for(var b=0,e=0,m=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(m*this.blockSize);0<m;m--)b+=this._buffer(n,b),e+=this._flushBuffer(a,e);return this._buffer(n,b),a};mr.prototype.final=function(n){var b,e;return n&&(b=this.update(n)),e="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),
b?b.concat(e):e};mr.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};mr.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};mr.prototype._unpad=function(n){return n};mr.prototype._finalDecrypt=function(){Oma.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var G7=Cs,d1=mr;
zi(ts,d1);ts.create=function(n){return new ts(n)};var Pma=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];ts.prototype.deriveKeys=function(n,b){n.keys=Array(32);G7.equal(b.length,this.blockSize,"Invalid key length");var e=Il.readUInt32BE(b,0);b=Il.readUInt32BE(b,4);Il.pc1(e,b,n.tmp,0);e=n.tmp[0];b=n.tmp[1];for(var m=0;m<n.keys.length;m+=2){var a=Pma[m>>>1];e=Il.r28shl(e,a);b=Il.r28shl(b,a);Il.pc2(e,b,n.keys,m)}};ts.prototype._update=function(n,b,e,m){var a=this._desState,g=Il.readUInt32BE(n,b);n=Il.readUInt32BE(n,
b+4);Il.ip(g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,g,n,a.tmp,0):this._decrypt(a,g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];Il.writeUInt32BE(e,g,m);Il.writeUInt32BE(e,n,m+4)};ts.prototype._pad=function(n,b){for(var e=n.length-b;b<n.length;b++)n[b]=e;return!0};ts.prototype._unpad=function(n){for(var b=n[n.length-1],e=n.length-b;e<n.length;e++)G7.equal(n[e],b);return n.slice(0,n.length-b)};ts.prototype._encrypt=function(n,b,e,m,a){for(var g=0;g<n.keys.length;g+=2){var l=n.keys[g],
r=n.keys[g+1];Il.expand(e,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=Il.substitute(l,r);r=e;e=(b^Il.permute(l))>>>0;b=r}Il.rip(e,b,m,a)};ts.prototype._decrypt=function(n,b,e,m,a){for(var g=n.keys.length-2;0<=g;g-=2){var l=n.keys[g],r=n.keys[g+1];Il.expand(e,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=Il.substitute(l,r);r=e;e=(b^Il.permute(l))>>>0;b=r}Il.rip(e,b,m,a)};var $M={},Cea=Cs,Qma=zi,aN={};$M.instantiate=function(n){function b(g){n.call(this,g);this._cbcInit()}Qma(b,n);for(var e=Object.keys(aN),m=0;m<e.length;m++){var a=
e[m];b.prototype[a]=aN[a]}return b.create=function(g){return new b(g)},b};aN._cbcInit=function(){this._cbcState=new Bea(this.options.iv)};aN._update=function(n,b,e,m){var a=this.constructor.super_.prototype,g=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)g[l]^=n[b+l];a._update.call(this,g,0,e,m);for(l=0;l<this.blockSize;l++)g[l]=e[m+l]}else{a._update.call(this,n,b,e,m);for(l=0;l<this.blockSize;l++)e[m+l]^=g[l];for(l=0;l<this.blockSize;l++)g[l]=n[b+l]}};var Eea=Cs,e1=
mr,ey=ts;zi(dv,e1);dv.create=function(n){return new dv(n)};dv.prototype._update=function(n,b,e,m){var a=this._edeState;a.ciphers[0]._update(n,b,e,m);a.ciphers[1]._update(e,m,e,m);a.ciphers[2]._update(e,m,e,m)};dv.prototype._pad=ey.prototype._pad;dv.prototype._unpad=ey.prototype._unpad;var zK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,f1=Zn,Rma=zi,BA=xj.Buffer,WF={"des-ede3-cbc":$M.instantiate(dv),"des-ede3":dv,"des-ede-cbc":$M.instantiate(dv),"des-ede":dv,"des-cbc":$M.instantiate(ts),
"des-ecb":ts};WF.des=WF["des-cbc"];WF.des3=WF["des-ede3-cbc"];Rma(yK,f1);yK.prototype._update=function(n){return BA.from((this||zK)._des.update(n))};yK.prototype._final=function(){return BA.from((this||zK)._des.final())};var Sma=Ni.Buffer,TD=function(n,b){for(var e=Math.min(n.length,b.length),m=new Sma(e),a=0;a<e;++a)m[a]=n[a]^b[a];return m},H7=function(n){for(var b,e=n.length;e--;){if(255!==(b=n.readUInt8(e))){b++;n.writeUInt8(b,e);break}n.writeUInt8(0,e)}},I7={},XF=xj.Buffer,Fea=TD;I7.encrypt=function(n,
b,e){for(var m,a=XF.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=XF.allocUnsafe(0)),!(n._cache.length<=b.length)){a=XF.concat([a,g1(n,b,e)]);break}m=n._cache.length;a=XF.concat([a,g1(n,b.slice(0,m),e)]);b=b.slice(m)}return a};var J7={},UU=xj.Buffer;J7.encrypt=function(n,b,e){for(var m=b.length,a=UU.allocUnsafe(m),g=-1;++g<m;){var l=g;var r=n;var v=b[g],y=e,A=r._cipher.encryptBlock(r._prev)[0]^v;r=(r._prev=UU.concat([r._prev.slice(1),UU.from([y?
v:A])]),A);a[l]=r}return a};var K7={},bN=xj.Buffer;K7.encrypt=function(n,b,e){for(var m=b.length,a=bN.allocUnsafe(m),g=-1;++g<m;){for(var l=g,r,v,y=n,A=b[g],E=e,F=-1,H=0;8>++F;){v=A&1<<7-F?128:0;H+=(128&(r=y._cipher.encryptBlock(y._prev)[0]^v))>>F%8;var I=y,M=y._prev;r=E?v:r;v=M.length;var N=-1,X=bN.allocUnsafe(M.length);for(M=bN.concat([M,bN.from([r])]);++N<v;)X[N]=M[N]<<1|M[N+1]>>7;I._prev=X}a[l]=H}return a};var L7={},Tma=Ni.Buffer;L7.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=
Tma.concat([n._cache,Gea(n)]);var e=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),TD(b,e)};var VU={},M7=xj.Buffer;VU.encrypt=function(n,b){var e=Math.ceil(b.length/16),m=n._cache.length;n._cache=M7.concat([n._cache,M7.allocUnsafe(16*e)]);for(var a=0;a<e;a++){var g=n;var l=g._cipher.encryptBlockRaw(g._prev);g=(H7(g._prev),l);l=m+16*a;n._cache.writeUInt32BE(g[0],l+0);n._cache.writeUInt32BE(g[1],l+4);n._cache.writeUInt32BE(g[2],l+8);n._cache.writeUInt32BE(g[3],l+12)}e=n._cache.slice(0,
b.length);return n._cache=n._cache.slice(b.length),TD(b,e)};var pB={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,
mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",
key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",
type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},Uma={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=
TD(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var e=n._prev;n._prev=b;n=n._cipher.decryptBlock(b);return TD(n,e)}},CFB:I7,CFB8:J7,CFB1:K7,OFB:L7,CTR:VU,GCM:VU},WU;for(WU in pB)pB[WU].module=Uma[pB[WU].mode];var vs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,rH={},AK=xj.Buffer,Vma=[0,1,2,4,8,16,32,64,128,27,54],$m=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var e=[],m=[[],[],[],[]],a=[[],
[],[],[]],g=0,l=0,r=0;256>r;++r){var v=l^l<<1^l<<2^l<<3^l<<4;v=v>>>8^255&v^99;b[g]=v;e[v]=g;var y=n[g],A=n[y],E=n[A],F=257*n[v]^16843008*v;m[0][g]=F<<24|F>>>8;m[1][g]=F<<16|F>>>16;m[2][g]=F<<8|F>>>24;m[3][g]=F;F=16843009*E^65537*A^257*y^16843008*g;a[0][v]=F<<24|F>>>8;a[1][v]=F<<16|F>>>16;a[2][v]=F<<8|F>>>24;a[3][v]=F;0===g?g=l=1:(g=y^n[n[n[E^y]]],l^=n[n[l]])}return{SBOX:b,INV_SBOX:e,SUB_MIX:m,INV_SUB_MIX:a}}();us.blockSize=16;us.keySize=32;us.prototype.blockSize=us.blockSize;us.prototype.keySize=
us.keySize;us.prototype._reset=function(){for(var n=(this||vs)._key,b=n.length,e=b+6,m=4*(e+1),a=[],g=0;g<b;g++)a[g]=n[g];for(g=b;g<m;g++)n=a[g-1],0==g%b?(n=n<<8|n>>>24,n=$m.SBOX[n>>>24]<<24|$m.SBOX[n>>>16&255]<<16|$m.SBOX[n>>>8&255]<<8|$m.SBOX[255&n],n^=Vma[g/b|0]<<24):6<b&&4==g%b&&(n=$m.SBOX[n>>>24]<<24|$m.SBOX[n>>>16&255]<<16|$m.SBOX[n>>>8&255]<<8|$m.SBOX[255&n]),a[g]=a[g-b]^n;b=[];for(g=0;g<m;g++){n=m-g;var l=a[n-(g%4?0:4)];b[g]=4>g||4>=n?l:$m.INV_SUB_MIX[0][$m.SBOX[l>>>24]]^$m.INV_SUB_MIX[1][$m.SBOX[l>>>
16&255]]^$m.INV_SUB_MIX[2][$m.SBOX[l>>>8&255]]^$m.INV_SUB_MIX[3][$m.SBOX[255&l]]}(this||vs)._nRounds=e;(this||vs)._keySchedule=a;(this||vs)._invKeySchedule=b};us.prototype.encryptBlockRaw=function(n){return h1(eR(n),(this||vs)._keySchedule,$m.SUB_MIX,$m.SBOX,(this||vs)._nRounds)};us.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=AK.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};us.prototype.decryptBlock=
function(n){var b=(n=eR(n))[1];n[1]=n[3];n[3]=b;n=h1(n,(this||vs)._invKeySchedule,$m.INV_SUB_MIX,$m.INV_SBOX,(this||vs)._nRounds);b=AK.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[1],12),b};us.prototype.scrub=function(){fR((this||vs)._keySchedule);fR((this||vs)._invKeySchedule);fR((this||vs)._key)};rH.AES=us;var Ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,cD=xj.Buffer,Wma=cD.alloc(16,0);YF.prototype.ghash=
function(n){for(var b=-1;++b<n.length;)(this||Ho).state[b]^=n[b];this._multiply()};YF.prototype._multiply=function(){for(var n,b,e=[(n=(this||Ho).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],m=[0,0,0,0],a=-1;128>++a;){0!=((this||Ho).state[~~(a/8)]&1<<7-a%8)&&(m[0]^=e[0],m[1]^=e[1],m[2]^=e[2],m[3]^=e[3]);b=0!=(1&e[3]);for(n=3;0<n;n--)e[n]=e[n]>>>1|(1&e[n-1])<<31;e[0]>>>=1;b&&(e[0]^=-520093696)}(this||Ho).state=i1(m)};YF.prototype.update=function(n){for((this||Ho).cache=
cD.concat([(this||Ho).cache,n]);16<=(this||Ho).cache.length;)n=(this||Ho).cache.slice(0,16),(this||Ho).cache=(this||Ho).cache.slice(16),this.ghash(n)};YF.prototype.final=function(n,b){return(this||Ho).cache.length&&this.ghash(cD.concat([(this||Ho).cache,Wma],16)),this.ghash(i1([0,n,0,b])),(this||Ho).state};var Sh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hea=rH,yq=xj.Buffer,j1=Zn,k1=YF,Iea=H7;zi(fy,j1);fy.prototype._update=function(n){if(!(this||Sh)._called&&(this||
Sh)._alen){var b=16-(this||Sh)._alen%16;16>b&&(b=yq.alloc(b,0),(this||Sh)._ghash.update(b))}(this||Sh)._called=!0;b=(this||Sh)._mode.encrypt(this||Sh,n);return(this||Sh)._decrypt?(this||Sh)._ghash.update(n):(this||Sh)._ghash.update(b),(this||Sh)._len+=n.length,b};fy.prototype._final=function(){if((this||Sh)._decrypt&&!(this||Sh)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=TD((this||Sh)._ghash.final(8*(this||Sh)._alen,8*(this||Sh)._len),(this||Sh)._cipher.encryptBlock((this||
Sh)._finID)),b;if(b=(this||Sh)._decrypt){b=(this||Sh)._authTag;var e=0;n.length!==b.length&&e++;for(var m=Math.min(n.length,b.length),a=0;a<m;++a)e+=n[a]^b[a];b=e}if(b)throw Error("Unsupported state or unable to authenticate data");(this||Sh)._authTag=n;(this||Sh)._cipher.scrub()};fy.prototype.getAuthTag=function(){if((this||Sh)._decrypt||!yq.isBuffer((this||Sh)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Sh)._authTag};fy.prototype.setAuthTag=function(n){if(!(this||
Sh)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Sh)._authTag=n};fy.prototype.setAAD=function(n){if((this||Sh)._called)throw Error("Attempting to set AAD in unsupported state");(this||Sh)._ghash.update(n);(this||Sh)._alen+=n.length};var zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Jea=rH,gR=xj.Buffer,l1=Zn;zi(ZF,l1);ZF.prototype._update=function(n){return(this||zt)._mode.encrypt(this||zt,n,(this||zt)._decrypt)};ZF.prototype._final=
function(){(this||zt)._cipher.scrub()};var qB=xj.Buffer,dG=function(n,b,e,m){if(qB.isBuffer(n)||(n=qB.from(n,"binary")),b&&(qB.isBuffer(b)||(b=qB.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");e/=8;for(var a=qB.alloc(e),g=qB.alloc(m||0),l=qB.alloc(0);0<e||0<m;){var r=new YC;r.update(l);r.update(n);b&&r.update(b);l=r.digest();r=0;if(0<e){var v=a.length-e;r=Math.min(e,l.length);l.copy(a,v,0,r);e-=r}r<l.length&&0<m&&(v=Math.min(m,l.length-r),l.copy(g,
g.length-m,r,r+v),m-=v)}return l.fill(0),{key:a,iv:g}},kk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Mea=fy,dD=xj.Buffer,o1=pB,Lea=ZF,m1=Zn,Kea=rH;zi($F,m1);$F.prototype._update=function(n){var b;(this||kk)._cache.add(n);for(n=[];b=(this||kk)._cache.get((this||kk)._autopadding);)b=(this||kk)._mode.decrypt(this||kk,b),n.push(b);return dD.concat(n)};$F.prototype._final=function(){var n=(this||kk)._cache.flush();if((this||kk)._autopadding){n=(this||kk)._mode.decrypt(this||
kk,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var e=-1;++e<b;)if(n[e+(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};$F.prototype.setAutoPadding=function(n){return(this||kk)._autopadding=!!n,this||kk};BK.prototype.add=function(n){(this||kk).cache=dD.concat([(this||kk).cache,n])};BK.prototype.get=function(n){var b;if(n){if(16<(this||kk).cache.length)return b=(this||kk).cache.slice(0,
16),(this||kk).cache=(this||kk).cache.slice(16),b}else if(16<=(this||kk).cache.length)return b=(this||kk).cache.slice(0,16),(this||kk).cache=(this||kk).cache.slice(16),b;return null};BK.prototype.flush=function(){if((this||kk).cache.length)return(this||kk).cache};var cl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,r1=pB,Pea=fy,Bw=xj.Buffer,Oea=ZF,p1=Zn,Nea=rH;zi(aG,p1);aG.prototype._update=function(n){var b;(this||cl)._cache.add(n);for(n=[];b=(this||cl)._cache.get();)b=
(this||cl)._mode.encrypt(this||cl,b),n.push(b);return Bw.concat(n)};var Xma=Bw.alloc(16,16);aG.prototype._final=function(){var n=(this||cl)._cache.flush();if((this||cl)._autopadding)return n=(this||cl)._mode.encrypt(this||cl,n),(this||cl)._cipher.scrub(),n;if(!n.equals(Xma))throw(this||cl)._cipher.scrub(),Error("data not multiple of block length");};aG.prototype.setAutoPadding=function(n){return(this||cl)._autopadding=!!n,this||cl};CK.prototype.add=function(n){(this||cl).cache=Bw.concat([(this||cl).cache,
n])};CK.prototype.get=function(){if(15<(this||cl).cache.length){var n=(this||cl).cache.slice(0,16);return(this||cl).cache=(this||cl).cache.slice(16),n}return null};CK.prototype.flush=function(){for(var n=16-(this||cl).cache.length,b=Bw.allocUnsafe(n),e=-1;++e<n;)b.writeUInt8(n,e);return Bw.concat([(this||cl).cache,b])};var or={};or.createCipher=or.Cipher=function(n,b){var e=r1[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=dG(b,!1,e.key,e.iv);return q1(n,b.key,b.iv)};or.createCipheriv=
or.Cipheriv=q1;or.createDecipher=or.Decipher=function(n,b){var e=o1[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=dG(b,!1,e.key,e.iv);return n1(n,b.key,b.iv)};or.createDecipheriv=or.Decipheriv=n1;or.listCiphers=or.getCiphers=function(){return Object.keys(pB)};var My={"des-ecb":{key:8,iv:0}};My["des-cbc"]=My.des={key:8,iv:8};My["des-ede3-cbc"]=My.des3={key:24,iv:8};My["des-ede3"]={key:24,iv:0};My["des-ede-cbc"]={key:16,iv:8};My["des-ede"]={key:16,iv:0};var N7,O7,P7,s1=yK,iR=or,
gy=pB,Cw=My;var Yma=N7=function(n,b){if(n=n.toLowerCase(),gy[n]){var e=gy[n].key;var m=gy[n].iv}else{if(!Cw[n])throw new TypeError("invalid suite type");e=8*Cw[n].key;m=Cw[n].iv}b=dG(b,!1,e,m);return hR(n,b.key,b.iv)};var Zma=O7=function(n,b){if(n=n.toLowerCase(),gy[n]){var e=gy[n].key;var m=gy[n].iv}else{if(!Cw[n])throw new TypeError("invalid suite type");e=8*Cw[n].key;m=Cw[n].iv}b=dG(b,!1,e,m);return jR(n,b.key,b.iv)};var $ma=P7=function(){return Object.keys(Cw).concat(iR.getCiphers())};var ana=
Object.freeze({}),gb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Q7={},R7={exports:Q7};!function(n,b){function e(K,aa){if(!K)throw Error(aa||"Assertion failed");}function m(K,aa){K.super_=aa;var T=function(){};T.prototype=aa.prototype;K.prototype=new T;K.prototype.constructor=K}function a(K,aa,T){if(a.isBN(K))return K;(this||gb).negative=0;(this||gb).words=null;(this||gb).length=0;(this||gb).red=null;null!==K&&("le"!==aa&&"be"!==aa||(T=aa,aa=10),this._init(K||0,
aa||10,T||"be"))}function g(K,aa,T){var U=0;for(T=Math.min(K.length,T);aa<T;aa++){var pa=K.charCodeAt(aa)-48;U<<=4;U|=49<=pa&&54>=pa?pa-49+10:17<=pa&&22>=pa?pa-17+10:15&pa}return U}function l(K,aa,T,U){var pa=0;for(T=Math.min(K.length,T);aa<T;aa++){var fa=K.charCodeAt(aa)-48;pa*=U;pa+=49<=fa?fa-49+10:17<=fa?fa-17+10:fa}return pa}function r(K,aa,T){T.negative=aa.negative^K.negative;var U=K.length+aa.length|0;T.length=U;U=U-1|0;var pa=(0|K.words[0])*(0|aa.words[0]),fa=pa/67108864|0;T.words[0]=67108863&
pa;for(var oa=1;oa<U;oa++){var hb=fa>>>26;pa=67108863&fa;fa=Math.min(oa,aa.length-1);for(var Cb=Math.max(0,oa-K.length+1);Cb<=fa;Cb++)hb+=(pa=(0|K.words[oa-Cb|0])*(0|aa.words[Cb])+pa)/67108864|0,pa&=67108863;T.words[oa]=0|pa;fa=0|hb}return 0!==fa?T.words[oa]=0|fa:T.length--,T.strip()}function v(K,aa){(this||gb).x=K;(this||gb).y=aa}function y(K,aa){(this||gb).name=K;(this||gb).p=new a(aa,16);(this||gb).n=(this||gb).p.bitLength();(this||gb).k=(new a(1)).iushln((this||gb).n).isub((this||gb).p);(this||
gb).tmp=this._tmp()}function A(){y.call(this||gb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){y.call(this||gb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function F(){y.call(this||gb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function H(){y.call(this||gb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(K){"string"==typeof K?(K=a._prime(K),(this||gb).m=K.p,(this||
gb).prime=K):(e(K.gtn(1),"modulus must be greater than 1"),(this||gb).m=K,(this||gb).prime=null)}function M(K){I.call(this||gb,K);(this||gb).shift=(this||gb).m.bitLength();0!=(this||gb).shift%26&&((this||gb).shift+=26-(this||gb).shift%26);(this||gb).r=(new a(1)).iushln((this||gb).shift);(this||gb).r2=this.imod((this||gb).r.sqr());(this||gb).rinv=(this||gb).r._invmp((this||gb).m);(this||gb).minv=(this||gb).rinv.mul((this||gb).r).isubn(1).div((this||gb).m);(this||gb).minv=(this||gb).minv.umod((this||
gb).r);(this||gb).minv=(this||gb).r.sub((this||gb).minv)}"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var N=ana.Buffer}catch(K){}a.isBN=function(K){return K instanceof a||null!==K&&"object"==typeof K&&K.constructor.wordSize===a.wordSize&&Array.isArray(K.words)};a.max=function(K,aa){return 0<K.cmp(aa)?K:aa};a.min=function(K,aa){return 0>K.cmp(aa)?K:aa};a.prototype._init=function(K,aa,T){if("number"==typeof K)return this._initNumber(K,aa,T);if("object"==typeof K)return this._initArray(K,
aa,T);"hex"===aa&&(aa=16);e(aa===(0|aa)&&2<=aa&&36>=aa);var U=0;"-"===(K=K.toString().replace(/\s+/g,""))[0]&&U++;16===aa?this._parseHex(K,U):this._parseBase(K,aa,U);"-"===K[0]&&((this||gb).negative=1);this.strip();"le"===T&&this._initArray(this.toArray(),aa,T)};a.prototype._initNumber=function(K,aa,T){0>K&&((this||gb).negative=1,K=-K);67108864>K?((this||gb).words=[67108863&K],(this||gb).length=1):4503599627370496>K?((this||gb).words=[67108863&K,K/67108864&67108863],(this||gb).length=2):(e(9007199254740992>
K),(this||gb).words=[67108863&K,K/67108864&67108863,1],(this||gb).length=3);"le"===T&&this._initArray(this.toArray(),aa,T)};a.prototype._initArray=function(K,aa,T){if(e("number"==typeof K.length),0>=K.length)return(this||gb).words=[0],(this||gb).length=1,this||gb;(this||gb).length=Math.ceil(K.length/3);(this||gb).words=Array((this||gb).length);for(aa=0;aa<(this||gb).length;aa++)(this||gb).words[aa]=0;var U=0;if("be"===T)for(aa=K.length-1,T=0;0<=aa;aa-=3){var pa=K[aa]|K[aa-1]<<8|K[aa-2]<<16;(this||
gb).words[T]|=pa<<U&67108863;(this||gb).words[T+1]=pa>>>26-U&67108863;26<=(U+=24)&&(U-=26,T++)}else if("le"===T)for(T=aa=0;aa<K.length;aa+=3)pa=K[aa]|K[aa+1]<<8|K[aa+2]<<16,(this||gb).words[T]|=pa<<U&67108863,(this||gb).words[T+1]=pa>>>26-U&67108863,26<=(U+=24)&&(U-=26,T++);return this.strip()};a.prototype._parseHex=function(K,aa){(this||gb).length=Math.ceil((K.length-aa)/6);(this||gb).words=Array((this||gb).length);for(var T=0;T<(this||gb).length;T++)(this||gb).words[T]=0;var U,pa=0;T=K.length-6;
for(U=0;T>=aa;T-=6){var fa=g(K,T,T+6);(this||gb).words[U]|=fa<<pa&67108863;(this||gb).words[U+1]|=fa>>>26-pa&4194303;26<=(pa+=24)&&(pa-=26,U++)}T+6!==aa&&(fa=g(K,aa,T+6),(this||gb).words[U]|=fa<<pa&67108863,(this||gb).words[U+1]|=fa>>>26-pa&4194303);this.strip()};a.prototype._parseBase=function(K,aa,T){(this||gb).words=[0];(this||gb).length=1;for(var U=0,pa=1;67108863>=pa;pa*=aa)U++;U--;pa=pa/aa|0;var fa=K.length-T,oa=fa%U;fa=Math.min(fa,fa-oa)+T;for(var hb=T;hb<fa;hb+=U)T=l(K,hb,hb+U,aa),this.imuln(pa),
67108864>(this||gb).words[0]+T?(this||gb).words[0]+=T:this._iaddn(T);if(0!==oa){U=1;T=l(K,hb,K.length,aa);for(hb=0;hb<oa;hb++)U*=aa;this.imuln(U);67108864>(this||gb).words[0]+T?(this||gb).words[0]+=T:this._iaddn(T)}};a.prototype.copy=function(K){K.words=Array((this||gb).length);for(var aa=0;aa<(this||gb).length;aa++)K.words[aa]=(this||gb).words[aa];K.length=(this||gb).length;K.negative=(this||gb).negative;K.red=(this||gb).red};a.prototype.clone=function(){var K=new a(null);return this.copy(K),K};
a.prototype._expand=function(K){for(;(this||gb).length<K;)(this||gb).words[(this||gb).length++]=0;return this||gb};a.prototype.strip=function(){for(;1<(this||gb).length&&0===(this||gb).words[(this||gb).length-1];)(this||gb).length--;return this._normSign()};a.prototype._normSign=function(){return 1===(this||gb).length&&0===(this||gb).words[0]&&((this||gb).negative=0),this||gb};a.prototype.inspect=function(){return((this||gb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var X=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
W=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ea=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(K,aa){if(aa=0|aa||1,16===(K=K||10)||"hex"===K){var T="";for(var U=K=0,pa=0;pa<(this||
gb).length;pa++){var fa=(this||gb).words[pa],oa=(16777215&(fa<<K|U)).toString(16);T=0!==(U=fa>>>24-K&16777215)||pa!==(this||gb).length-1?X[6-oa.length]+oa+T:oa+T;26<=(K+=2)&&(K-=26,pa--)}for(0!==U&&(T=U.toString(16)+T);0!=T.length%aa;)T="0"+T;return 0!==(this||gb).negative&&(T="-"+T),T}if(K===(0|K)&&2<=K&&36>=K){U=W[K];pa=ea[K];T="";fa=this.clone();for(fa.negative=0;!fa.isZero();)oa=fa.modn(pa).toString(K),T=(fa=fa.idivn(pa)).isZero()?oa+T:X[U-oa.length]+oa+T;for(this.isZero()&&(T="0"+T);0!=T.length%
aa;)T="0"+T;return 0!==(this||gb).negative&&(T="-"+T),T}e(!1,"Base should be between 2 and 36")};a.prototype.toNumber=function(){var K=(this||gb).words[0];return 2===(this||gb).length?K+=67108864*(this||gb).words[1]:3===(this||gb).length&&1===(this||gb).words[2]?K+=4503599627370496+67108864*(this||gb).words[1]:2<(this||gb).length&&e(!1,"Number can only safely store up to 53 bits"),0!==(this||gb).negative?-K:K};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(K,
aa){return e(void 0!==N),this.toArrayLike(N,K,aa)};a.prototype.toArray=function(K,aa){return this.toArrayLike(Array,K,aa)};a.prototype.toArrayLike=function(K,aa,T){var U=this.byteLength();T=T||Math.max(1,U);e(U<=T,"byte array longer than desired length");e(0<T,"Requested array length <= 0");this.strip();var pa="le"===aa;K=new K(T);aa=this.clone();if(pa){for(pa=0;!aa.isZero();pa++)U=aa.andln(255),aa.iushrn(8),K[pa]=U;for(;pa<T;pa++)K[pa]=0}else{for(pa=0;pa<T-U;pa++)K[pa]=0;for(pa=0;!aa.isZero();pa++)U=
aa.andln(255),aa.iushrn(8),K[T-pa-1]=U}return K};Math.clz32?a.prototype._countBits=function(K){return 32-Math.clz32(K)}:a.prototype._countBits=function(K){var aa=0;return 4096<=K&&(aa+=13,K>>>=13),64<=K&&(aa+=7,K>>>=7),8<=K&&(aa+=4,K>>>=4),2<=K&&(aa+=2,K>>>=2),aa+K};a.prototype._zeroBits=function(K){if(0===K)return 26;var aa=0;return 0==(8191&K)&&(aa+=13,K>>>=13),0==(127&K)&&(aa+=7,K>>>=7),0==(15&K)&&(aa+=4,K>>>=4),0==(3&K)&&(aa+=2,K>>>=2),0==(1&K)&&aa++,aa};a.prototype.bitLength=function(){var K=
this._countBits((this||gb).words[(this||gb).length-1]);return 26*((this||gb).length-1)+K};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var K=0,aa=0;aa<(this||gb).length;aa++){var T=this._zeroBits((this||gb).words[aa]);if(K+=T,26!==T)break}return K};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(K){return 0!==(this||gb).negative?this.abs().inotn(K).iaddn(1):this.clone()};a.prototype.fromTwos=function(K){return this.testn(K-1)?this.notn(K).iaddn(1).ineg():
this.clone()};a.prototype.isNeg=function(){return 0!==(this||gb).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){return this.isZero()||((this||gb).negative^=1),this||gb};a.prototype.iuor=function(K){for(;(this||gb).length<K.length;)(this||gb).words[(this||gb).length++]=0;for(var aa=0;aa<K.length;aa++)(this||gb).words[aa]|=K.words[aa];return this.strip()};a.prototype.ior=function(K){return e(0==((this||gb).negative|K.negative)),this.iuor(K)};a.prototype.or=
function(K){return(this||gb).length>K.length?this.clone().ior(K):K.clone().ior(this||gb)};a.prototype.uor=function(K){return(this||gb).length>K.length?this.clone().iuor(K):K.clone().iuor(this||gb)};a.prototype.iuand=function(K){var aa=(this||gb).length>K.length?K:this||gb;for(var T=0;T<aa.length;T++)(this||gb).words[T]&=K.words[T];return(this||gb).length=aa.length,this.strip()};a.prototype.iand=function(K){return e(0==((this||gb).negative|K.negative)),this.iuand(K)};a.prototype.and=function(K){return(this||
gb).length>K.length?this.clone().iand(K):K.clone().iand(this||gb)};a.prototype.uand=function(K){return(this||gb).length>K.length?this.clone().iuand(K):K.clone().iuand(this||gb)};a.prototype.iuxor=function(K){var aa,T;(this||gb).length>K.length?(aa=this||gb,T=K):(aa=K,T=this||gb);for(K=0;K<T.length;K++)(this||gb).words[K]=aa.words[K]^T.words[K];if((this||gb)!==aa)for(;K<aa.length;K++)(this||gb).words[K]=aa.words[K];return(this||gb).length=aa.length,this.strip()};a.prototype.ixor=function(K){return e(0==
((this||gb).negative|K.negative)),this.iuxor(K)};a.prototype.xor=function(K){return(this||gb).length>K.length?this.clone().ixor(K):K.clone().ixor(this||gb)};a.prototype.uxor=function(K){return(this||gb).length>K.length?this.clone().iuxor(K):K.clone().iuxor(this||gb)};a.prototype.inotn=function(K){e("number"==typeof K&&0<=K);var aa=0|Math.ceil(K/26);K%=26;this._expand(aa);0<K&&aa--;for(var T=0;T<aa;T++)(this||gb).words[T]=67108863&~(this||gb).words[T];return 0<K&&((this||gb).words[T]=~(this||gb).words[T]&
67108863>>26-K),this.strip()};a.prototype.notn=function(K){return this.clone().inotn(K)};a.prototype.setn=function(K,aa){e("number"==typeof K&&0<=K);var T=K/26|0;K%=26;return this._expand(T+1),(this||gb).words[T]=aa?(this||gb).words[T]|1<<K:(this||gb).words[T]&~(1<<K),this.strip()};a.prototype.iadd=function(K){var aa,T,U;if(0!==(this||gb).negative&&0===K.negative)return(this||gb).negative=0,this.isub(K),(this||gb).negative^=1,this._normSign();if(0===(this||gb).negative&&0!==K.negative)return K.negative=
0,aa=this.isub(K),K.negative=1,aa._normSign();(this||gb).length>K.length?(T=this||gb,U=K):(T=K,U=this||gb);for(K=aa=0;K<U.length;K++)aa=(0|T.words[K])+(0|U.words[K])+aa,(this||gb).words[K]=67108863&aa,aa>>>=26;for(;0!==aa&&K<T.length;K++)aa=(0|T.words[K])+aa,(this||gb).words[K]=67108863&aa,aa>>>=26;if((this||gb).length=T.length,0!==aa)(this||gb).words[(this||gb).length]=aa,(this||gb).length++;else if(T!==(this||gb))for(;K<T.length;K++)(this||gb).words[K]=T.words[K];return this||gb};a.prototype.add=
function(K){var aa;return 0!==K.negative&&0===(this||gb).negative?(K.negative=0,aa=this.sub(K),K.negative^=1,aa):0===K.negative&&0!==(this||gb).negative?((this||gb).negative=0,aa=K.sub(this||gb),(this||gb).negative=1,aa):(this||gb).length>K.length?this.clone().iadd(K):K.clone().iadd(this||gb)};a.prototype.isub=function(K){if(0!==K.negative){K.negative=0;var aa=this.iadd(K);return K.negative=1,aa._normSign()}if(0!==(this||gb).negative)return(this||gb).negative=0,this.iadd(K),(this||gb).negative=1,
this._normSign();var T,U;aa=this.cmp(K);if(0===aa)return(this||gb).negative=0,(this||gb).length=1,(this||gb).words[0]=0,this||gb;0<aa?(T=this||gb,U=K):(T=K,U=this||gb);for(var pa=K=0;pa<U.length;pa++)K=(aa=(0|T.words[pa])-(0|U.words[pa])+K)>>26,(this||gb).words[pa]=67108863&aa;for(;0!==K&&pa<T.length;pa++)K=(aa=(0|T.words[pa])+K)>>26,(this||gb).words[pa]=67108863&aa;if(0===K&&pa<T.length&&T!==(this||gb))for(;pa<T.length;pa++)(this||gb).words[pa]=T.words[pa];return(this||gb).length=Math.max((this||
gb).length,pa),T!==(this||gb)&&((this||gb).negative=1),this.strip()};a.prototype.sub=function(K){return this.clone().isub(K)};var Aa=function(K,aa,T){var U=K.words,pa=aa.words,fa=T.words,oa=0|U[0],hb=8191&oa;oa>>>=13;var Cb=0|U[1],va=8191&Cb;Cb>>>=13;var ma=0|U[2],ua=8191&ma;ma>>>=13;var Ma=0|U[3],Lb=8191&Ma;Ma>>>=13;var ic=0|U[4],Vb=8191&ic;ic>>>=13;var jc=0|U[5],Pc=8191&jc;jc>>>=13;var Rb=0|U[6],zd=8191&Rb;Rb>>>=13;var ld=0|U[7],la=8191&ld;ld>>>=13;var Da=0|U[8],Pa=8191&Da;Da>>>=13;var yb=0|U[9];
U=8191&yb;yb>>>=13;var ac=0|pa[0],Od=8191&ac,Md=ac>>>13,Wc=0|pa[1];ac=8191&Wc;var cf=Wc>>>13,Se=0|pa[2];Wc=8191&Se;var Oh=Se>>>13,nh=0|pa[3];Se=8191&nh;var nj=nh>>>13,cj=0|pa[4];nh=8191&cj;var oj=cj>>>13,Fj=0|pa[5];cj=8191&Fj;var Nj=Fj>>>13,Ui=0|pa[6];Fj=8191&Ui;var th=Ui>>>13,Wj=0|pa[7];Ui=8191&Wj;var Ik=Wj>>>13,ck=0|pa[8];Wj=8191&ck;ck>>>=13;var Jk=0|pa[9];pa=8191&Jk;Jk>>>=13;T.negative=K.negative^aa.negative;T.length=19;var Gy=(0+Math.imul(hb,Od)|0)+((8191&(K=(K=Math.imul(hb,Md))+Math.imul(oa,
Od)|0))<<13)|0;aa=(Math.imul(oa,Md)+(K>>>13)|0)+(Gy>>>26)|0;Gy&=67108863;var Qd=Math.imul(va,Od);K=(K=Math.imul(va,Md))+Math.imul(Cb,Od)|0;var Rd=Math.imul(Cb,Md);var Fy=(aa+(Qd+Math.imul(hb,ac)|0)|0)+((8191&(K=(K=K+Math.imul(hb,cf)|0)+Math.imul(oa,ac)|0))<<13)|0;aa=((Rd+Math.imul(oa,cf)|0)+(K>>>13)|0)+(Fy>>>26)|0;Fy&=67108863;Qd=Math.imul(ua,Od);K=(K=Math.imul(ua,Md))+Math.imul(ma,Od)|0;Rd=Math.imul(ma,Md);Qd=Qd+Math.imul(va,ac)|0;K=(K=K+Math.imul(va,cf)|0)+Math.imul(Cb,ac)|0;Rd=Rd+Math.imul(Cb,
cf)|0;var Sw=(aa+(Qd+Math.imul(hb,Wc)|0)|0)+((8191&(K=(K=K+Math.imul(hb,Oh)|0)+Math.imul(oa,Wc)|0))<<13)|0;aa=((Rd+Math.imul(oa,Oh)|0)+(K>>>13)|0)+(Sw>>>26)|0;Sw&=67108863;Qd=Math.imul(Lb,Od);K=(K=Math.imul(Lb,Md))+Math.imul(Ma,Od)|0;Rd=Math.imul(Ma,Md);Qd=Qd+Math.imul(ua,ac)|0;K=(K=K+Math.imul(ua,cf)|0)+Math.imul(ma,ac)|0;Rd=Rd+Math.imul(ma,cf)|0;Qd=Qd+Math.imul(va,Wc)|0;K=(K=K+Math.imul(va,Oh)|0)+Math.imul(Cb,Wc)|0;Rd=Rd+Math.imul(Cb,Oh)|0;var xv=(aa+(Qd+Math.imul(hb,Se)|0)|0)+((8191&(K=(K=K+Math.imul(hb,
nj)|0)+Math.imul(oa,Se)|0))<<13)|0;aa=((Rd+Math.imul(oa,nj)|0)+(K>>>13)|0)+(xv>>>26)|0;xv&=67108863;Qd=Math.imul(Vb,Od);K=(K=Math.imul(Vb,Md))+Math.imul(ic,Od)|0;Rd=Math.imul(ic,Md);Qd=Qd+Math.imul(Lb,ac)|0;K=(K=K+Math.imul(Lb,cf)|0)+Math.imul(Ma,ac)|0;Rd=Rd+Math.imul(Ma,cf)|0;Qd=Qd+Math.imul(ua,Wc)|0;K=(K=K+Math.imul(ua,Oh)|0)+Math.imul(ma,Wc)|0;Rd=Rd+Math.imul(ma,Oh)|0;Qd=Qd+Math.imul(va,Se)|0;K=(K=K+Math.imul(va,nj)|0)+Math.imul(Cb,Se)|0;Rd=Rd+Math.imul(Cb,nj)|0;var aB=(aa+(Qd+Math.imul(hb,nh)|
0)|0)+((8191&(K=(K=K+Math.imul(hb,oj)|0)+Math.imul(oa,nh)|0))<<13)|0;aa=((Rd+Math.imul(oa,oj)|0)+(K>>>13)|0)+(aB>>>26)|0;aB&=67108863;Qd=Math.imul(Pc,Od);K=(K=Math.imul(Pc,Md))+Math.imul(jc,Od)|0;Rd=Math.imul(jc,Md);Qd=Qd+Math.imul(Vb,ac)|0;K=(K=K+Math.imul(Vb,cf)|0)+Math.imul(ic,ac)|0;Rd=Rd+Math.imul(ic,cf)|0;Qd=Qd+Math.imul(Lb,Wc)|0;K=(K=K+Math.imul(Lb,Oh)|0)+Math.imul(Ma,Wc)|0;Rd=Rd+Math.imul(Ma,Oh)|0;Qd=Qd+Math.imul(ua,Se)|0;K=(K=K+Math.imul(ua,nj)|0)+Math.imul(ma,Se)|0;Rd=Rd+Math.imul(ma,nj)|
0;Qd=Qd+Math.imul(va,nh)|0;K=(K=K+Math.imul(va,oj)|0)+Math.imul(Cb,nh)|0;Rd=Rd+Math.imul(Cb,oj)|0;var eB=(aa+(Qd+Math.imul(hb,cj)|0)|0)+((8191&(K=(K=K+Math.imul(hb,Nj)|0)+Math.imul(oa,cj)|0))<<13)|0;aa=((Rd+Math.imul(oa,Nj)|0)+(K>>>13)|0)+(eB>>>26)|0;eB&=67108863;Qd=Math.imul(zd,Od);K=(K=Math.imul(zd,Md))+Math.imul(Rb,Od)|0;Rd=Math.imul(Rb,Md);Qd=Qd+Math.imul(Pc,ac)|0;K=(K=K+Math.imul(Pc,cf)|0)+Math.imul(jc,ac)|0;Rd=Rd+Math.imul(jc,cf)|0;Qd=Qd+Math.imul(Vb,Wc)|0;K=(K=K+Math.imul(Vb,Oh)|0)+Math.imul(ic,
Wc)|0;Rd=Rd+Math.imul(ic,Oh)|0;Qd=Qd+Math.imul(Lb,Se)|0;K=(K=K+Math.imul(Lb,nj)|0)+Math.imul(Ma,Se)|0;Rd=Rd+Math.imul(Ma,nj)|0;Qd=Qd+Math.imul(ua,nh)|0;K=(K=K+Math.imul(ua,oj)|0)+Math.imul(ma,nh)|0;Rd=Rd+Math.imul(ma,oj)|0;Qd=Qd+Math.imul(va,cj)|0;K=(K=K+Math.imul(va,Nj)|0)+Math.imul(Cb,cj)|0;Rd=Rd+Math.imul(Cb,Nj)|0;var fB=(aa+(Qd+Math.imul(hb,Fj)|0)|0)+((8191&(K=(K=K+Math.imul(hb,th)|0)+Math.imul(oa,Fj)|0))<<13)|0;aa=((Rd+Math.imul(oa,th)|0)+(K>>>13)|0)+(fB>>>26)|0;fB&=67108863;Qd=Math.imul(la,
Od);K=(K=Math.imul(la,Md))+Math.imul(ld,Od)|0;Rd=Math.imul(ld,Md);Qd=Qd+Math.imul(zd,ac)|0;K=(K=K+Math.imul(zd,cf)|0)+Math.imul(Rb,ac)|0;Rd=Rd+Math.imul(Rb,cf)|0;Qd=Qd+Math.imul(Pc,Wc)|0;K=(K=K+Math.imul(Pc,Oh)|0)+Math.imul(jc,Wc)|0;Rd=Rd+Math.imul(jc,Oh)|0;Qd=Qd+Math.imul(Vb,Se)|0;K=(K=K+Math.imul(Vb,nj)|0)+Math.imul(ic,Se)|0;Rd=Rd+Math.imul(ic,nj)|0;Qd=Qd+Math.imul(Lb,nh)|0;K=(K=K+Math.imul(Lb,oj)|0)+Math.imul(Ma,nh)|0;Rd=Rd+Math.imul(Ma,oj)|0;Qd=Qd+Math.imul(ua,cj)|0;K=(K=K+Math.imul(ua,Nj)|0)+
Math.imul(ma,cj)|0;Rd=Rd+Math.imul(ma,Nj)|0;Qd=Qd+Math.imul(va,Fj)|0;K=(K=K+Math.imul(va,th)|0)+Math.imul(Cb,Fj)|0;Rd=Rd+Math.imul(Cb,th)|0;var gB=(aa+(Qd+Math.imul(hb,Ui)|0)|0)+((8191&(K=(K=K+Math.imul(hb,Ik)|0)+Math.imul(oa,Ui)|0))<<13)|0;aa=((Rd+Math.imul(oa,Ik)|0)+(K>>>13)|0)+(gB>>>26)|0;gB&=67108863;Qd=Math.imul(Pa,Od);K=(K=Math.imul(Pa,Md))+Math.imul(Da,Od)|0;Rd=Math.imul(Da,Md);Qd=Qd+Math.imul(la,ac)|0;K=(K=K+Math.imul(la,cf)|0)+Math.imul(ld,ac)|0;Rd=Rd+Math.imul(ld,cf)|0;Qd=Qd+Math.imul(zd,
Wc)|0;K=(K=K+Math.imul(zd,Oh)|0)+Math.imul(Rb,Wc)|0;Rd=Rd+Math.imul(Rb,Oh)|0;Qd=Qd+Math.imul(Pc,Se)|0;K=(K=K+Math.imul(Pc,nj)|0)+Math.imul(jc,Se)|0;Rd=Rd+Math.imul(jc,nj)|0;Qd=Qd+Math.imul(Vb,nh)|0;K=(K=K+Math.imul(Vb,oj)|0)+Math.imul(ic,nh)|0;Rd=Rd+Math.imul(ic,oj)|0;Qd=Qd+Math.imul(Lb,cj)|0;K=(K=K+Math.imul(Lb,Nj)|0)+Math.imul(Ma,cj)|0;Rd=Rd+Math.imul(Ma,Nj)|0;Qd=Qd+Math.imul(ua,Fj)|0;K=(K=K+Math.imul(ua,th)|0)+Math.imul(ma,Fj)|0;Rd=Rd+Math.imul(ma,th)|0;Qd=Qd+Math.imul(va,Ui)|0;K=(K=K+Math.imul(va,
Ik)|0)+Math.imul(Cb,Ui)|0;Rd=Rd+Math.imul(Cb,Ik)|0;var hB=(aa+(Qd+Math.imul(hb,Wj)|0)|0)+((8191&(K=(K=K+Math.imul(hb,ck)|0)+Math.imul(oa,Wj)|0))<<13)|0;aa=((Rd+Math.imul(oa,ck)|0)+(K>>>13)|0)+(hB>>>26)|0;hB&=67108863;Qd=Math.imul(U,Od);K=(K=Math.imul(U,Md))+Math.imul(yb,Od)|0;Rd=Math.imul(yb,Md);Qd=Qd+Math.imul(Pa,ac)|0;K=(K=K+Math.imul(Pa,cf)|0)+Math.imul(Da,ac)|0;Rd=Rd+Math.imul(Da,cf)|0;Qd=Qd+Math.imul(la,Wc)|0;K=(K=K+Math.imul(la,Oh)|0)+Math.imul(ld,Wc)|0;Rd=Rd+Math.imul(ld,Oh)|0;Qd=Qd+Math.imul(zd,
Se)|0;K=(K=K+Math.imul(zd,nj)|0)+Math.imul(Rb,Se)|0;Rd=Rd+Math.imul(Rb,nj)|0;Qd=Qd+Math.imul(Pc,nh)|0;K=(K=K+Math.imul(Pc,oj)|0)+Math.imul(jc,nh)|0;Rd=Rd+Math.imul(jc,oj)|0;Qd=Qd+Math.imul(Vb,cj)|0;K=(K=K+Math.imul(Vb,Nj)|0)+Math.imul(ic,cj)|0;Rd=Rd+Math.imul(ic,Nj)|0;Qd=Qd+Math.imul(Lb,Fj)|0;K=(K=K+Math.imul(Lb,th)|0)+Math.imul(Ma,Fj)|0;Rd=Rd+Math.imul(Ma,th)|0;Qd=Qd+Math.imul(ua,Ui)|0;K=(K=K+Math.imul(ua,Ik)|0)+Math.imul(ma,Ui)|0;Rd=Rd+Math.imul(ma,Ik)|0;Qd=Qd+Math.imul(va,Wj)|0;K=(K=K+Math.imul(va,
ck)|0)+Math.imul(Cb,Wj)|0;Rd=Rd+Math.imul(Cb,ck)|0;hb=(aa+(Qd+Math.imul(hb,pa)|0)|0)+((8191&(K=(K=K+Math.imul(hb,Jk)|0)+Math.imul(oa,pa)|0))<<13)|0;aa=((Rd+Math.imul(oa,Jk)|0)+(K>>>13)|0)+(hb>>>26)|0;hb&=67108863;Qd=Math.imul(U,ac);K=(K=Math.imul(U,cf))+Math.imul(yb,ac)|0;Rd=Math.imul(yb,cf);Qd=Qd+Math.imul(Pa,Wc)|0;K=(K=K+Math.imul(Pa,Oh)|0)+Math.imul(Da,Wc)|0;Rd=Rd+Math.imul(Da,Oh)|0;Qd=Qd+Math.imul(la,Se)|0;K=(K=K+Math.imul(la,nj)|0)+Math.imul(ld,Se)|0;Rd=Rd+Math.imul(ld,nj)|0;Qd=Qd+Math.imul(zd,
nh)|0;K=(K=K+Math.imul(zd,oj)|0)+Math.imul(Rb,nh)|0;Rd=Rd+Math.imul(Rb,oj)|0;Qd=Qd+Math.imul(Pc,cj)|0;K=(K=K+Math.imul(Pc,Nj)|0)+Math.imul(jc,cj)|0;Rd=Rd+Math.imul(jc,Nj)|0;Qd=Qd+Math.imul(Vb,Fj)|0;K=(K=K+Math.imul(Vb,th)|0)+Math.imul(ic,Fj)|0;Rd=Rd+Math.imul(ic,th)|0;Qd=Qd+Math.imul(Lb,Ui)|0;K=(K=K+Math.imul(Lb,Ik)|0)+Math.imul(Ma,Ui)|0;Rd=Rd+Math.imul(Ma,Ik)|0;Qd=Qd+Math.imul(ua,Wj)|0;K=(K=K+Math.imul(ua,ck)|0)+Math.imul(ma,Wj)|0;Rd=Rd+Math.imul(ma,ck)|0;oa=(aa+(Qd+Math.imul(va,pa)|0)|0)+((8191&
(K=(K=K+Math.imul(va,Jk)|0)+Math.imul(Cb,pa)|0))<<13)|0;aa=((Rd+Math.imul(Cb,Jk)|0)+(K>>>13)|0)+(oa>>>26)|0;oa&=67108863;Qd=Math.imul(U,Wc);K=(K=Math.imul(U,Oh))+Math.imul(yb,Wc)|0;Rd=Math.imul(yb,Oh);Qd=Qd+Math.imul(Pa,Se)|0;K=(K=K+Math.imul(Pa,nj)|0)+Math.imul(Da,Se)|0;Rd=Rd+Math.imul(Da,nj)|0;Qd=Qd+Math.imul(la,nh)|0;K=(K=K+Math.imul(la,oj)|0)+Math.imul(ld,nh)|0;Rd=Rd+Math.imul(ld,oj)|0;Qd=Qd+Math.imul(zd,cj)|0;K=(K=K+Math.imul(zd,Nj)|0)+Math.imul(Rb,cj)|0;Rd=Rd+Math.imul(Rb,Nj)|0;Qd=Qd+Math.imul(Pc,
Fj)|0;K=(K=K+Math.imul(Pc,th)|0)+Math.imul(jc,Fj)|0;Rd=Rd+Math.imul(jc,th)|0;Qd=Qd+Math.imul(Vb,Ui)|0;K=(K=K+Math.imul(Vb,Ik)|0)+Math.imul(ic,Ui)|0;Rd=Rd+Math.imul(ic,Ik)|0;Qd=Qd+Math.imul(Lb,Wj)|0;K=(K=K+Math.imul(Lb,ck)|0)+Math.imul(Ma,Wj)|0;Rd=Rd+Math.imul(Ma,ck)|0;va=(aa+(Qd+Math.imul(ua,pa)|0)|0)+((8191&(K=(K=K+Math.imul(ua,Jk)|0)+Math.imul(ma,pa)|0))<<13)|0;aa=((Rd+Math.imul(ma,Jk)|0)+(K>>>13)|0)+(va>>>26)|0;va&=67108863;Qd=Math.imul(U,Se);K=(K=Math.imul(U,nj))+Math.imul(yb,Se)|0;Rd=Math.imul(yb,
nj);Qd=Qd+Math.imul(Pa,nh)|0;K=(K=K+Math.imul(Pa,oj)|0)+Math.imul(Da,nh)|0;Rd=Rd+Math.imul(Da,oj)|0;Qd=Qd+Math.imul(la,cj)|0;K=(K=K+Math.imul(la,Nj)|0)+Math.imul(ld,cj)|0;Rd=Rd+Math.imul(ld,Nj)|0;Qd=Qd+Math.imul(zd,Fj)|0;K=(K=K+Math.imul(zd,th)|0)+Math.imul(Rb,Fj)|0;Rd=Rd+Math.imul(Rb,th)|0;Qd=Qd+Math.imul(Pc,Ui)|0;K=(K=K+Math.imul(Pc,Ik)|0)+Math.imul(jc,Ui)|0;Rd=Rd+Math.imul(jc,Ik)|0;Qd=Qd+Math.imul(Vb,Wj)|0;K=(K=K+Math.imul(Vb,ck)|0)+Math.imul(ic,Wj)|0;Rd=Rd+Math.imul(ic,ck)|0;Cb=(aa+(Qd+Math.imul(Lb,
pa)|0)|0)+((8191&(K=(K=K+Math.imul(Lb,Jk)|0)+Math.imul(Ma,pa)|0))<<13)|0;aa=((Rd+Math.imul(Ma,Jk)|0)+(K>>>13)|0)+(Cb>>>26)|0;Cb&=67108863;Qd=Math.imul(U,nh);K=(K=Math.imul(U,oj))+Math.imul(yb,nh)|0;Rd=Math.imul(yb,oj);Qd=Qd+Math.imul(Pa,cj)|0;K=(K=K+Math.imul(Pa,Nj)|0)+Math.imul(Da,cj)|0;Rd=Rd+Math.imul(Da,Nj)|0;Qd=Qd+Math.imul(la,Fj)|0;K=(K=K+Math.imul(la,th)|0)+Math.imul(ld,Fj)|0;Rd=Rd+Math.imul(ld,th)|0;Qd=Qd+Math.imul(zd,Ui)|0;K=(K=K+Math.imul(zd,Ik)|0)+Math.imul(Rb,Ui)|0;Rd=Rd+Math.imul(Rb,Ik)|
0;Qd=Qd+Math.imul(Pc,Wj)|0;K=(K=K+Math.imul(Pc,ck)|0)+Math.imul(jc,Wj)|0;Rd=Rd+Math.imul(jc,ck)|0;ua=(aa+(Qd+Math.imul(Vb,pa)|0)|0)+((8191&(K=(K=K+Math.imul(Vb,Jk)|0)+Math.imul(ic,pa)|0))<<13)|0;aa=((Rd+Math.imul(ic,Jk)|0)+(K>>>13)|0)+(ua>>>26)|0;ua&=67108863;Qd=Math.imul(U,cj);K=(K=Math.imul(U,Nj))+Math.imul(yb,cj)|0;Rd=Math.imul(yb,Nj);Qd=Qd+Math.imul(Pa,Fj)|0;K=(K=K+Math.imul(Pa,th)|0)+Math.imul(Da,Fj)|0;Rd=Rd+Math.imul(Da,th)|0;Qd=Qd+Math.imul(la,Ui)|0;K=(K=K+Math.imul(la,Ik)|0)+Math.imul(ld,
Ui)|0;Rd=Rd+Math.imul(ld,Ik)|0;Qd=Qd+Math.imul(zd,Wj)|0;K=(K=K+Math.imul(zd,ck)|0)+Math.imul(Rb,Wj)|0;Rd=Rd+Math.imul(Rb,ck)|0;ma=(aa+(Qd+Math.imul(Pc,pa)|0)|0)+((8191&(K=(K=K+Math.imul(Pc,Jk)|0)+Math.imul(jc,pa)|0))<<13)|0;aa=((Rd+Math.imul(jc,Jk)|0)+(K>>>13)|0)+(ma>>>26)|0;ma&=67108863;Qd=Math.imul(U,Fj);K=(K=Math.imul(U,th))+Math.imul(yb,Fj)|0;Rd=Math.imul(yb,th);Qd=Qd+Math.imul(Pa,Ui)|0;K=(K=K+Math.imul(Pa,Ik)|0)+Math.imul(Da,Ui)|0;Rd=Rd+Math.imul(Da,Ik)|0;Qd=Qd+Math.imul(la,Wj)|0;K=(K=K+Math.imul(la,
ck)|0)+Math.imul(ld,Wj)|0;Rd=Rd+Math.imul(ld,ck)|0;Lb=(aa+(Qd+Math.imul(zd,pa)|0)|0)+((8191&(K=(K=K+Math.imul(zd,Jk)|0)+Math.imul(Rb,pa)|0))<<13)|0;aa=((Rd+Math.imul(Rb,Jk)|0)+(K>>>13)|0)+(Lb>>>26)|0;Lb&=67108863;Qd=Math.imul(U,Ui);K=(K=Math.imul(U,Ik))+Math.imul(yb,Ui)|0;Rd=Math.imul(yb,Ik);Qd=Qd+Math.imul(Pa,Wj)|0;K=(K=K+Math.imul(Pa,ck)|0)+Math.imul(Da,Wj)|0;Rd=Rd+Math.imul(Da,ck)|0;Ma=(aa+(Qd+Math.imul(la,pa)|0)|0)+((8191&(K=(K=K+Math.imul(la,Jk)|0)+Math.imul(ld,pa)|0))<<13)|0;aa=((Rd+Math.imul(ld,
Jk)|0)+(K>>>13)|0)+(Ma>>>26)|0;Ma&=67108863;Qd=Math.imul(U,Wj);K=(K=Math.imul(U,ck))+Math.imul(yb,Wj)|0;Rd=Math.imul(yb,ck);Vb=(aa+(Qd+Math.imul(Pa,pa)|0)|0)+((8191&(K=(K=K+Math.imul(Pa,Jk)|0)+Math.imul(Da,pa)|0))<<13)|0;aa=((Rd+Math.imul(Da,Jk)|0)+(K>>>13)|0)+(Vb>>>26)|0;Vb&=67108863;ic=(aa+Math.imul(U,pa)|0)+((8191&(K=(K=Math.imul(U,Jk))+Math.imul(yb,pa)|0))<<13)|0;return aa=(Math.imul(yb,Jk)+(K>>>13)|0)+(ic>>>26)|0,ic&=67108863,fa[0]=Gy,fa[1]=Fy,fa[2]=Sw,fa[3]=xv,fa[4]=aB,fa[5]=eB,fa[6]=fB,fa[7]=
gB,fa[8]=hB,fa[9]=hb,fa[10]=oa,fa[11]=va,fa[12]=Cb,fa[13]=ua,fa[14]=ma,fa[15]=Lb,fa[16]=Ma,fa[17]=Vb,fa[18]=ic,0!==aa&&(fa[19]=aa,T.length++),T};Math.imul||(Aa=r);a.prototype.mulTo=function(K,aa){var T=(this||gb).length+K.length;if(10===(this||gb).length&&10===K.length)K=Aa(this||gb,K,aa);else if(63>T)K=r(this||gb,K,aa);else if(1024>T){T=this||gb;aa.negative=K.negative^T.negative;aa.length=T.length+K.length;for(var U=0,pa=0,fa=0;fa<aa.length-1;fa++){var oa=pa;pa=0;U&=67108863;for(var hb=Math.min(fa,
K.length-1),Cb=Math.max(0,fa-T.length+1);Cb<=hb;Cb++){var va=(0|T.words[fa-Cb])*(0|K.words[Cb]),ma=67108863&va;U=67108863&(ma=ma+U|0);pa+=(oa=(oa=oa+(va/67108864|0)|0)+(ma>>>26)|0)>>>26;oa&=67108863}aa.words[fa]=U;U=oa}K=(0!==U?aa.words[fa]=U:aa.length--,aa.strip())}else T=this||gb,K=(new v).mulp(T,K,aa);return K};v.prototype.makeRBT=function(K){for(var aa=Array(K),T=a.prototype._countBits(K)-1,U=0;U<K;U++)aa[U]=this.revBin(U,T,K);return aa};v.prototype.revBin=function(K,aa,T){if(0===K||K===T-1)return K;
for(var U=T=0;U<aa;U++)T|=(1&K)<<aa-U-1,K>>=1;return T};v.prototype.permute=function(K,aa,T,U,pa,fa){for(var oa=0;oa<fa;oa++)U[oa]=aa[K[oa]],pa[oa]=T[K[oa]]};v.prototype.transform=function(K,aa,T,U,pa,fa){this.permute(fa,K,aa,T,U,pa);for(K=1;K<pa;K<<=1){aa=K<<1;fa=Math.cos(2*Math.PI/aa);for(var oa=Math.sin(2*Math.PI/aa),hb=0;hb<pa;hb+=aa)for(var Cb=fa,va=oa,ma=0;ma<K;ma++){var ua=T[hb+ma],Ma=U[hb+ma],Lb=T[hb+ma+K],ic=U[hb+ma+K],Vb=Cb*Lb-va*ic;ic=Cb*ic+va*Lb;Lb=Vb;T[hb+ma]=ua+Lb;U[hb+ma]=Ma+ic;T[hb+
ma+K]=ua-Lb;U[hb+ma+K]=Ma-ic;ma!==aa&&(Vb=fa*Cb-oa*va,va=fa*va+oa*Cb,Cb=Vb)}}};v.prototype.guessLen13b=function(K,aa){K=1|Math.max(aa,K);aa=1&K;var T=0;for(K=K/2|0;K;K>>>=1)T++;return 1<<T+1+aa};v.prototype.conjugate=function(K,aa,T){if(!(1>=T))for(var U=0;U<T/2;U++){var pa=K[U];K[U]=K[T-U-1];K[T-U-1]=pa;pa=aa[U];aa[U]=-aa[T-U-1];aa[T-U-1]=-pa}};v.prototype.normalize13b=function(K,aa){for(var T=0,U=0;U<aa/2;U++)T=8192*Math.round(K[2*U+1]/aa)+Math.round(K[2*U]/aa)+T,K[U]=67108863&T,T=67108864>T?0:
T/67108864|0;return K};v.prototype.convert13b=function(K,aa,T,U){for(var pa=0,fa=0;fa<aa;fa++)pa+=0|K[fa],T[2*fa]=8191&pa,pa>>>=13,T[2*fa+1]=8191&pa,pa>>>=13;for(fa=2*aa;fa<U;++fa)T[fa]=0;e(0===pa);e(0==(-8192&pa))};v.prototype.stub=function(K){for(var aa=Array(K),T=0;T<K;T++)aa[T]=0;return aa};v.prototype.mulp=function(K,aa,T){var U=2*this.guessLen13b(K.length,aa.length),pa=this.makeRBT(U),fa=this.stub(U),oa=Array(U),hb=Array(U),Cb=Array(U),va=Array(U),ma=Array(U),ua=Array(U),Ma=T.words;Ma.length=
U;this.convert13b(K.words,K.length,oa,U);this.convert13b(aa.words,aa.length,va,U);this.transform(oa,fa,hb,Cb,U,pa);this.transform(va,fa,ma,ua,U,pa);for(oa=0;oa<U;oa++)va=hb[oa]*ma[oa]-Cb[oa]*ua[oa],Cb[oa]=hb[oa]*ua[oa]+Cb[oa]*ma[oa],hb[oa]=va;return this.conjugate(hb,Cb,U),this.transform(hb,Cb,Ma,fa,U,pa),this.conjugate(Ma,fa,U),this.normalize13b(Ma,U),T.negative=K.negative^aa.negative,T.length=K.length+aa.length,T.strip()};a.prototype.mul=function(K){var aa=new a(null);return aa.words=Array((this||
gb).length+K.length),this.mulTo(K,aa)};a.prototype.mulf=function(K){var aa=new a(null);aa.words=Array((this||gb).length+K.length);var T=this||gb;return(new v).mulp(T,K,aa)};a.prototype.imul=function(K){return this.clone().mulTo(K,this||gb)};a.prototype.imuln=function(K){e("number"==typeof K);e(67108864>K);for(var aa=0,T=0;T<(this||gb).length;T++){var U=(0|(this||gb).words[T])*K,pa=(67108863&U)+(67108863&aa);aa>>=26;aa+=U/67108864|0;aa+=pa>>>26;(this||gb).words[T]=67108863&pa}return 0!==aa&&((this||
gb).words[T]=aa,(this||gb).length++),this||gb};a.prototype.muln=function(K){return this.clone().imuln(K)};a.prototype.sqr=function(){return this.mul(this||gb)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(K){for(var aa=Array(K.bitLength()),T=0;T<aa.length;T++){var U=T%26;aa[T]=(K.words[T/26|0]&1<<U)>>>U}if(0===aa.length)return new a(1);K=this||gb;for(T=0;T<aa.length&&0===aa[T];T++,K=K.sqr());if(++T<aa.length)for(U=K.sqr();T<aa.length;T++,U=U.sqr())0!==aa[T]&&
(K=K.mul(U));return K};a.prototype.iushln=function(K){e("number"==typeof K&&0<=K);var aa=K%26,T=(K-aa)/26,U=67108863>>>26-aa<<26-aa;if(0!==aa){var pa=0;for(K=0;K<(this||gb).length;K++){var fa=(this||gb).words[K]&U;(this||gb).words[K]=(0|(this||gb).words[K])-fa<<aa|pa;pa=fa>>>26-aa}pa&&((this||gb).words[K]=pa,(this||gb).length++)}if(0!==T){for(K=(this||gb).length-1;0<=K;K--)(this||gb).words[K+T]=(this||gb).words[K];for(K=0;K<T;K++)(this||gb).words[K]=0;(this||gb).length+=T}return this.strip()};a.prototype.ishln=
function(K){return e(0===(this||gb).negative),this.iushln(K)};a.prototype.iushrn=function(K,aa,T){e("number"==typeof K&&0<=K);aa=aa?(aa-aa%26)/26:0;var U=K%26,pa=Math.min((K-U)/26,(this||gb).length);K=67108863^67108863>>>U<<U;if(aa-=pa,aa=Math.max(0,aa),T){for(var fa=0;fa<pa;fa++)T.words[fa]=(this||gb).words[fa];T.length=pa}if(0!==pa)if((this||gb).length>pa)for((this||gb).length-=pa,fa=0;fa<(this||gb).length;fa++)(this||gb).words[fa]=(this||gb).words[fa+pa];else(this||gb).words[0]=0,(this||gb).length=
1;pa=0;for(fa=(this||gb).length-1;0<=fa&&(0!==pa||fa>=aa);fa--){var oa=0|(this||gb).words[fa];(this||gb).words[fa]=pa<<26-U|oa>>>U;pa=oa&K}return T&&0!==pa&&(T.words[T.length++]=pa),0===(this||gb).length&&((this||gb).words[0]=0,(this||gb).length=1),this.strip()};a.prototype.ishrn=function(K,aa,T){return e(0===(this||gb).negative),this.iushrn(K,aa,T)};a.prototype.shln=function(K){return this.clone().ishln(K)};a.prototype.ushln=function(K){return this.clone().iushln(K)};a.prototype.shrn=function(K){return this.clone().ishrn(K)};
a.prototype.ushrn=function(K){return this.clone().iushrn(K)};a.prototype.testn=function(K){e("number"==typeof K&&0<=K);var aa=K%26;K=(K-aa)/26;return!((this||gb).length<=K)&&!!((this||gb).words[K]&1<<aa)};a.prototype.imaskn=function(K){e("number"==typeof K&&0<=K);var aa=K%26;K=(K-aa)/26;if(e(0===(this||gb).negative,"imaskn works only with positive numbers"),(this||gb).length<=K)return this||gb;if(0!==aa&&K++,(this||gb).length=Math.min(K,(this||gb).length),0!==aa)(this||gb).words[(this||gb).length-
1]&=67108863^67108863>>>aa<<aa;return this.strip()};a.prototype.maskn=function(K){return this.clone().imaskn(K)};a.prototype.iaddn=function(K){return e("number"==typeof K),e(67108864>K),0>K?this.isubn(-K):0!==(this||gb).negative?1===(this||gb).length&&(0|(this||gb).words[0])<K?((this||gb).words[0]=K-(0|(this||gb).words[0]),(this||gb).negative=0,this||gb):((this||gb).negative=0,this.isubn(K),(this||gb).negative=1,this||gb):this._iaddn(K)};a.prototype._iaddn=function(K){(this||gb).words[0]+=K;for(K=
0;K<(this||gb).length&&67108864<=(this||gb).words[K];K++)(this||gb).words[K]-=67108864,K===(this||gb).length-1?(this||gb).words[K+1]=1:(this||gb).words[K+1]++;return(this||gb).length=Math.max((this||gb).length,K+1),this||gb};a.prototype.isubn=function(K){if(e("number"==typeof K),e(67108864>K),0>K)return this.iaddn(-K);if(0!==(this||gb).negative)return(this||gb).negative=0,this.iaddn(K),(this||gb).negative=1,this||gb;if((this||gb).words[0]-=K,1===(this||gb).length&&0>(this||gb).words[0])(this||gb).words[0]=
-(this||gb).words[0],(this||gb).negative=1;else for(K=0;K<(this||gb).length&&0>(this||gb).words[K];K++)(this||gb).words[K]+=67108864,--(this||gb).words[K+1];return this.strip()};a.prototype.addn=function(K){return this.clone().iaddn(K)};a.prototype.subn=function(K){return this.clone().isubn(K)};a.prototype.iabs=function(){return(this||gb).negative=0,this||gb};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(K,aa,T){var U;this._expand(K.length+T);var pa=0;for(U=
0;U<K.length;U++){var fa=(0|(this||gb).words[U+T])+pa;pa=(0|K.words[U])*aa;pa=((fa-=67108863&pa)>>26)-(pa/67108864|0);(this||gb).words[U+T]=67108863&fa}for(;U<(this||gb).length-T;U++)pa=(fa=(0|(this||gb).words[U+T])+pa)>>26,(this||gb).words[U+T]=67108863&fa;if(0===pa)return this.strip();e(-1===pa);for(U=pa=0;U<(this||gb).length;U++)pa=(fa=-(0|(this||gb).words[U])+pa)>>26,(this||gb).words[U]=67108863&fa;return(this||gb).negative=1,this.strip()};a.prototype._wordDiv=function(K,aa){var T=((this||gb).length,
K.length),U=this.clone(),pa=0|K.words[K.length-1];0!==(T=26-this._countBits(pa))&&(K=K.ushln(T),U.iushln(T),pa=0|K.words[K.length-1]);var fa,oa=U.length-K.length;if("mod"!==aa){(fa=new a(null)).length=oa+1;fa.words=Array(fa.length);for(var hb=0;hb<fa.length;hb++)fa.words[hb]=0}hb=U.clone()._ishlnsubmul(K,1,oa);0===hb.negative&&(U=hb,fa&&(fa.words[oa]=1));for(--oa;0<=oa;oa--){hb=67108864*(0|U.words[K.length+oa])+(0|U.words[K.length+oa-1]);hb=Math.min(hb/pa|0,67108863);for(U._ishlnsubmul(K,hb,oa);0!==
U.negative;)hb--,U.negative=0,U._ishlnsubmul(K,1,oa),U.isZero()||(U.negative^=1);fa&&(fa.words[oa]=hb)}return fa&&fa.strip(),U.strip(),"div"!==aa&&0!==T&&U.iushrn(T),{div:fa||null,mod:U}};a.prototype.divmod=function(K,aa,T){return e(!K.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||gb).negative&&0===K.negative?(fa=this.neg().divmod(K,aa),"mod"!==aa&&(U=fa.div.neg()),"div"!==aa&&(pa=fa.mod.neg(),T&&0!==pa.negative&&pa.iadd(K)),{div:U,mod:pa}):0===(this||gb).negative&&0!==K.negative?
(fa=this.divmod(K.neg(),aa),"mod"!==aa&&(U=fa.div.neg()),{div:U,mod:fa.mod}):0!=((this||gb).negative&K.negative)?(fa=this.neg().divmod(K.neg(),aa),"div"!==aa&&(pa=fa.mod.neg(),T&&0!==pa.negative&&pa.isub(K)),{div:fa.div,mod:pa}):K.length>(this||gb).length||0>this.cmp(K)?{div:new a(0),mod:this||gb}:1===K.length?"div"===aa?{div:this.divn(K.words[0]),mod:null}:"mod"===aa?{div:null,mod:new a(this.modn(K.words[0]))}:{div:this.divn(K.words[0]),mod:new a(this.modn(K.words[0]))}:this._wordDiv(K,aa);var U,
pa,fa};a.prototype.div=function(K){return this.divmod(K,"div",!1).div};a.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod};a.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod};a.prototype.divRound=function(K){var aa=this.divmod(K);if(aa.mod.isZero())return aa.div;var T=0!==aa.div.negative?aa.mod.isub(K):aa.mod,U=K.ushrn(1);K=K.andln(1);T=T.cmp(U);return 0>T||1===K&&0===T?aa.div:0!==aa.div.negative?aa.div.isubn(1):aa.div.iaddn(1)};a.prototype.modn=function(K){e(67108863>=K);
for(var aa=67108864%K,T=0,U=(this||gb).length-1;0<=U;U--)T=(aa*T+(0|(this||gb).words[U]))%K;return T};a.prototype.idivn=function(K){e(67108863>=K);for(var aa=0,T=(this||gb).length-1;0<=T;T--)aa=(0|(this||gb).words[T])+67108864*aa,(this||gb).words[T]=aa/K|0,aa%=K;return this.strip()};a.prototype.divn=function(K){return this.clone().idivn(K)};a.prototype.egcd=function(K){e(0===K.negative);e(!K.isZero());var aa=this||gb,T=K.clone();aa=0!==aa.negative?aa.umod(K):aa.clone();K=new a(1);for(var U=new a(0),
pa=new a(0),fa=new a(1),oa=0;aa.isEven()&&T.isEven();)aa.iushrn(1),T.iushrn(1),++oa;for(var hb=T.clone(),Cb=aa.clone();!aa.isZero();){for(var va=0,ma=1;0==(aa.words[0]&ma)&&26>va;++va,ma<<=1);if(0<va)for(aa.iushrn(va);0<va--;)(K.isOdd()||U.isOdd())&&(K.iadd(hb),U.isub(Cb)),K.iushrn(1),U.iushrn(1);va=0;for(ma=1;0==(T.words[0]&ma)&&26>va;++va,ma<<=1);if(0<va)for(T.iushrn(va);0<va--;)(pa.isOdd()||fa.isOdd())&&(pa.iadd(hb),fa.isub(Cb)),pa.iushrn(1),fa.iushrn(1);0<=aa.cmp(T)?(aa.isub(T),K.isub(pa),U.isub(fa)):
(T.isub(aa),pa.isub(K),fa.isub(U))}return{a:pa,b:fa,gcd:T.iushln(oa)}};a.prototype._invmp=function(K){e(0===K.negative);e(!K.isZero());var aa=this||gb,T=K.clone();aa=0!==aa.negative?aa.umod(K):aa.clone();for(var U,pa=new a(1),fa=new a(0),oa=T.clone();0<aa.cmpn(1)&&0<T.cmpn(1);){for(var hb=0,Cb=1;0==(aa.words[0]&Cb)&&26>hb;++hb,Cb<<=1);if(0<hb)for(aa.iushrn(hb);0<hb--;)pa.isOdd()&&pa.iadd(oa),pa.iushrn(1);hb=0;for(Cb=1;0==(T.words[0]&Cb)&&26>hb;++hb,Cb<<=1);if(0<hb)for(T.iushrn(hb);0<hb--;)fa.isOdd()&&
fa.iadd(oa),fa.iushrn(1);0<=aa.cmp(T)?(aa.isub(T),pa.isub(fa)):(T.isub(aa),fa.isub(pa))}return 0>(U=0===aa.cmpn(1)?pa:fa).cmpn(0)&&U.iadd(K),U};a.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var aa=this.clone();K=K.clone();aa.negative=0;for(var T=K.negative=0;aa.isEven()&&K.isEven();T++)aa.iushrn(1),K.iushrn(1);for(;;){for(;aa.isEven();)aa.iushrn(1);for(;K.isEven();)K.iushrn(1);var U=aa.cmp(K);if(0>U)U=aa,aa=K,K=U;else if(0===U||0===K.cmpn(1))break;aa.isub(K)}return K.iushln(T)};
a.prototype.invm=function(K){return this.egcd(K).a.umod(K)};a.prototype.isEven=function(){return 0==(1&(this||gb).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||gb).words[0])};a.prototype.andln=function(K){return(this||gb).words[0]&K};a.prototype.bincn=function(K){e("number"==typeof K);var aa=K%26;K=(K-aa)/26;aa=1<<aa;if((this||gb).length<=K)return this._expand(K+1),(this||gb).words[K]|=aa,this||gb;for(;0!==aa&&K<(this||gb).length;K++){var T=0|(this||gb).words[K];aa=(T+=aa)>>>26;T&=67108863;
(this||gb).words[K]=T}return 0!==aa&&((this||gb).words[K]=aa,(this||gb).length++),this||gb};a.prototype.isZero=function(){return 1===(this||gb).length&&0===(this||gb).words[0]};a.prototype.cmpn=function(K){var aa=0>K;if(0!==(this||gb).negative&&!aa)return-1;if(0===(this||gb).negative&&aa)return 1;(this.strip(),1<(this||gb).length)?K=1:(aa&&(K=-K),e(67108863>=K,"Number is too big"),aa=0|(this||gb).words[0],K=aa===K?0:aa<K?-1:1);return 0!==(this||gb).negative?0|-K:K};a.prototype.cmp=function(K){if(0!==
(this||gb).negative&&0===K.negative)return-1;if(0===(this||gb).negative&&0!==K.negative)return 1;K=this.ucmp(K);return 0!==(this||gb).negative?0|-K:K};a.prototype.ucmp=function(K){if((this||gb).length>K.length)return 1;if((this||gb).length<K.length)return-1;for(var aa=0,T=(this||gb).length-1;0<=T;T--){var U=0|(this||gb).words[T],pa=0|K.words[T];if(U!==pa){U<pa?aa=-1:U>pa&&(aa=1);break}}return aa};a.prototype.gtn=function(K){return 1===this.cmpn(K)};a.prototype.gt=function(K){return 1===this.cmp(K)};
a.prototype.gten=function(K){return 0<=this.cmpn(K)};a.prototype.gte=function(K){return 0<=this.cmp(K)};a.prototype.ltn=function(K){return-1===this.cmpn(K)};a.prototype.lt=function(K){return-1===this.cmp(K)};a.prototype.lten=function(K){return 0>=this.cmpn(K)};a.prototype.lte=function(K){return 0>=this.cmp(K)};a.prototype.eqn=function(K){return 0===this.cmpn(K)};a.prototype.eq=function(K){return 0===this.cmp(K)};a.red=function(K){return new I(K)};a.prototype.toRed=function(K){return e(!(this||gb).red,
"Already a number in reduction context"),e(0===(this||gb).negative,"red works only with positives"),K.convertTo(this||gb)._forceRed(K)};a.prototype.fromRed=function(){return e((this||gb).red,"fromRed works only with numbers in reduction context"),(this||gb).red.convertFrom(this||gb)};a.prototype._forceRed=function(K){return(this||gb).red=K,this||gb};a.prototype.forceRed=function(K){return e(!(this||gb).red,"Already a number in reduction context"),this._forceRed(K)};a.prototype.redAdd=function(K){return e((this||
gb).red,"redAdd works only with red numbers"),(this||gb).red.add(this||gb,K)};a.prototype.redIAdd=function(K){return e((this||gb).red,"redIAdd works only with red numbers"),(this||gb).red.iadd(this||gb,K)};a.prototype.redSub=function(K){return e((this||gb).red,"redSub works only with red numbers"),(this||gb).red.sub(this||gb,K)};a.prototype.redISub=function(K){return e((this||gb).red,"redISub works only with red numbers"),(this||gb).red.isub(this||gb,K)};a.prototype.redShl=function(K){return e((this||
gb).red,"redShl works only with red numbers"),(this||gb).red.shl(this||gb,K)};a.prototype.redMul=function(K){return e((this||gb).red,"redMul works only with red numbers"),(this||gb).red._verify2(this||gb,K),(this||gb).red.mul(this||gb,K)};a.prototype.redIMul=function(K){return e((this||gb).red,"redMul works only with red numbers"),(this||gb).red._verify2(this||gb,K),(this||gb).red.imul(this||gb,K)};a.prototype.redSqr=function(){return e((this||gb).red,"redSqr works only with red numbers"),(this||
gb).red._verify1(this||gb),(this||gb).red.sqr(this||gb)};a.prototype.redISqr=function(){return e((this||gb).red,"redISqr works only with red numbers"),(this||gb).red._verify1(this||gb),(this||gb).red.isqr(this||gb)};a.prototype.redSqrt=function(){return e((this||gb).red,"redSqrt works only with red numbers"),(this||gb).red._verify1(this||gb),(this||gb).red.sqrt(this||gb)};a.prototype.redInvm=function(){return e((this||gb).red,"redInvm works only with red numbers"),(this||gb).red._verify1(this||gb),
(this||gb).red.invm(this||gb)};a.prototype.redNeg=function(){return e((this||gb).red,"redNeg works only with red numbers"),(this||gb).red._verify1(this||gb),(this||gb).red.neg(this||gb)};a.prototype.redPow=function(K){return e((this||gb).red&&!K.red,"redPow(normalNum)"),(this||gb).red._verify1(this||gb),(this||gb).red.pow(this||gb,K)};var Ka={k256:null,p224:null,p192:null,p25519:null};y.prototype._tmp=function(){var K=new a(null);return K.words=Array(Math.ceil((this||gb).n/13)),K};y.prototype.ireduce=
function(K){do{this.split(K,(this||gb).tmp);var aa=(K=(K=this.imulK(K)).iadd((this||gb).tmp)).bitLength()}while(aa>(this||gb).n);aa=aa<(this||gb).n?-1:K.ucmp((this||gb).p);return 0===aa?(K.words[0]=0,K.length=1):0<aa?K.isub((this||gb).p):K.strip(),K};y.prototype.split=function(K,aa){K.iushrn((this||gb).n,0,aa)};y.prototype.imulK=function(K){return K.imul((this||gb).k)};m(A,y);A.prototype.split=function(K,aa){for(var T=Math.min(K.length,9),U=0;U<T;U++)aa.words[U]=K.words[U];if(aa.length=T,9>=K.length)return K.words[0]=
0,K.length=1,void 0;T=K.words[9];aa.words[aa.length++]=4194303&T;for(U=10;U<K.length;U++)aa=0|K.words[U],K.words[U-10]=(4194303&aa)<<4|T>>>22,T=aa;T>>>=22;K.words[U-10]=T;0===T&&10<K.length?K.length-=10:K.length-=9};A.prototype.imulK=function(K){K.words[K.length]=0;K.words[K.length+1]=0;K.length+=2;for(var aa=0,T=0;T<K.length;T++){var U=0|K.words[T];aa+=977*U;K.words[T]=67108863&aa;aa=64*U+(aa/67108864|0)}return 0===K.words[K.length-1]&&(K.length--,0===K.words[K.length-1]&&K.length--),K};m(E,y);m(F,
y);m(H,y);H.prototype.imulK=function(K){for(var aa=0,T=0;T<K.length;T++){aa=19*(0|K.words[T])+aa;var U=67108863&aa;aa>>>=26;K.words[T]=U}return 0!==aa&&(K.words[K.length++]=aa),K};a._prime=function(K){if(Ka[K])return Ka[K];if("k256"===K)var aa=new A;else if("p224"===K)aa=new E;else if("p192"===K)aa=new F;else{if("p25519"!==K)throw Error("Unknown prime "+K);aa=new H}return Ka[K]=aa,aa};I.prototype._verify1=function(K){e(0===K.negative,"red works only with positives");e(K.red,"red works only with red numbers")};
I.prototype._verify2=function(K,aa){e(0==(K.negative|aa.negative),"red works only with positives");e(K.red&&K.red===aa.red,"red works only with red numbers")};I.prototype.imod=function(K){return(this||gb).prime?(this||gb).prime.ireduce(K)._forceRed(this||gb):K.umod((this||gb).m)._forceRed(this||gb)};I.prototype.neg=function(K){return K.isZero()?K.clone():(this||gb).m.sub(K)._forceRed(this||gb)};I.prototype.add=function(K,aa){this._verify2(K,aa);K=K.add(aa);return 0<=K.cmp((this||gb).m)&&K.isub((this||
gb).m),K._forceRed(this||gb)};I.prototype.iadd=function(K,aa){this._verify2(K,aa);K=K.iadd(aa);return 0<=K.cmp((this||gb).m)&&K.isub((this||gb).m),K};I.prototype.sub=function(K,aa){this._verify2(K,aa);K=K.sub(aa);return 0>K.cmpn(0)&&K.iadd((this||gb).m),K._forceRed(this||gb)};I.prototype.isub=function(K,aa){this._verify2(K,aa);K=K.isub(aa);return 0>K.cmpn(0)&&K.iadd((this||gb).m),K};I.prototype.shl=function(K,aa){return this._verify1(K),this.imod(K.ushln(aa))};I.prototype.imul=function(K,aa){return this._verify2(K,
aa),this.imod(K.imul(aa))};I.prototype.mul=function(K,aa){return this._verify2(K,aa),this.imod(K.mul(aa))};I.prototype.isqr=function(K){return this.imul(K,K.clone())};I.prototype.sqr=function(K){return this.mul(K,K)};I.prototype.sqrt=function(K){if(K.isZero())return K.clone();var aa=(this||gb).m.andln(3);if(e(1==aa%2),3===aa)return aa=(this||gb).m.add(new a(1)).iushrn(2),this.pow(K,aa);for(var T=(this||gb).m.subn(1),U=0;!T.isZero()&&0===T.andln(1);)U++,T.iushrn(1);e(!T.isZero());aa=(new a(1)).toRed(this||
gb);var pa=aa.redNeg(),fa=(this||gb).m.subn(1).iushrn(1),oa=(this||gb).m.bitLength();for(oa=(new a(2*oa*oa)).toRed(this||gb);0!==this.pow(oa,fa).cmp(pa);)oa.redIAdd(pa);fa=this.pow(oa,T);pa=this.pow(K,T.addn(1).iushrn(1));K=this.pow(K,T);for(T=U;0!==K.cmp(aa);){oa=K;for(U=0;0!==oa.cmp(aa);U++)oa=oa.redSqr();e(U<T);fa=this.pow(fa,(new a(1)).iushln(T-U-1));pa=pa.redMul(fa);fa=fa.redSqr();K=K.redMul(fa);T=U}return pa};I.prototype.invm=function(K){K=K._invmp((this||gb).m);return 0!==K.negative?(K.negative=
0,this.imod(K).redNeg()):this.imod(K)};I.prototype.pow=function(K,aa){if(aa.isZero())return(new a(1)).toRed(this||gb);if(0===aa.cmpn(1))return K.clone();var T=Array(16);T[0]=(new a(1)).toRed(this||gb);T[1]=K;for(var U=2;U<T.length;U++)T[U]=this.mul(T[U-1],K);K=T[0];var pa=0,fa=0,oa=aa.bitLength()%26;0===oa&&(oa=26);for(U=aa.length-1;0<=U;U--){var hb=aa.words[U];for(--oa;0<=oa;oa--){var Cb=hb>>oa&1;K!==T[0]&&(K=this.sqr(K));0!==Cb||0!==pa?(pa<<=1,pa|=Cb,(4===++fa||0===U&&0===oa)&&(K=this.mul(K,T[pa]),
fa=0,pa=0)):fa=0}oa=26}return K};I.prototype.convertTo=function(K){var aa=K.umod((this||gb).m);return aa===K?aa.clone():aa};I.prototype.convertFrom=function(K){K=K.clone();return K.red=null,K};a.mont=function(K){return new M(K)};m(M,I);M.prototype.convertTo=function(K){return this.imod(K.ushln((this||gb).shift))};M.prototype.convertFrom=function(K){K=this.imod(K.mul((this||gb).rinv));return K.red=null,K};M.prototype.imul=function(K,aa){if(K.isZero()||aa.isZero())return K.words[0]=0,K.length=1,K;K=
K.imul(aa);aa=K.maskn((this||gb).shift).mul((this||gb).minv).imaskn((this||gb).shift).mul((this||gb).m);aa=K=K.isub(aa).iushrn((this||gb).shift);return 0<=K.cmp((this||gb).m)?aa=K.isub((this||gb).m):0>K.cmpn(0)&&(aa=K.iadd((this||gb).m)),aa._forceRed(this||gb)};M.prototype.mul=function(K,aa){if(K.isZero()||aa.isZero())return(new a(0))._forceRed(this||gb);K=K.mul(aa);aa=K.maskn((this||gb).shift).mul((this||gb).minv).imaskn((this||gb).shift).mul((this||gb).m);aa=K=K.isub(aa).iushrn((this||gb).shift);
return 0<=K.cmp((this||gb).m)?aa=K.isub((this||gb).m):0>K.cmpn(0)&&(aa=K.iadd((this||gb).m)),aa._forceRed(this||gb)};M.prototype.invm=function(K){return this.imod(K._invmp((this||gb).m).mul((this||gb).r2))._forceRed(this||gb)}}(R7,Q7);var Um=R7.exports,cN,XU,S7=Object.freeze({}),DK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((cN=function(n){return XU||(XU=new hy(null)),XU.generate(n)}).Rand=hy,hy.prototype.generate=function(n){return this._rand(n)},hy.prototype._rand=
function(n){if((this||DK).rand.getBytes)return(this||DK).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||DK).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?hy.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?hy.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(hy.prototype._rand=
function(){throw Error("Not implemented yet");});else try{if("function"!=typeof S7.randomBytes)throw Error("Not supported");hy.prototype._rand=function(n){return S7.randomBytes(n)}}catch(n){}var t1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,rB=Um,Qea=cN;iy.create=function(n){return new iy(n)};iy.prototype._randbelow=function(n){var b=n.bitLength();b=Math.ceil(b/8);do var e=new rB((this||t1).rand.generate(b));while(0<=e.cmp(n));return e};iy.prototype._randrange=
function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};iy.prototype.test=function(n,b,e){var m=n.bitLength(),a=rB.mont(n),g=(new rB(1)).toRed(a);b||(b=Math.max(1,m/48|0));m=n.subn(1);for(var l=0;!m.testn(l);l++);n=n.shrn(l);for(var r=m.toRed(a);0<b;b--){var v=this._randrange(new rB(2),m);e&&e(v);v=v.toRed(a).redPow(n);if(0!==v.cmp(g)&&0!==v.cmp(r)){for(var y=1;y<l;y++){if(0===(v=v.redSqr()).cmp(g))return!1;if(0===v.cmp(r))break}if(y===l)return!1}}return!0};iy.prototype.getDivisor=function(n,b){var e=
n.bitLength(),m=rB.mont(n),a=(new rB(1)).toRed(m);b||(b=Math.max(1,e/48|0));e=n.subn(1);for(var g=0;!e.testn(g);g++);for(var l=n.shrn(g),r=e.toRed(m);0<b;b--){var v=this._randrange(new rB(2),e),y=n.gcd(v);if(0!==y.cmpn(1))return y;v=v.toRed(m).redPow(l);if(0!==v.cmp(a)&&0!==v.cmp(r)){for(y=1;y<g;y++){if(0===(v=v.redSqr()).cmp(a))return v.fromRed().subn(1).gcd(n);if(0===v.cmp(r))break}if(y===g)return v.redSqr().fromRed().subn(1).gcd(n)}}return!1};var Rea=Ky;bG.simpleSieve=kR;bG.fermatTest=mR;var ip=
Um,Wea=new ip(24),v1=new iy,Sea=new ip(1),nR=new ip(2),Tea=new ip(5),Uea=(new ip(16),new ip(8),new ip(10)),Vea=new ip(3),Xea=(new ip(7),new ip(11)),u1=new ip(4),lR=(new ip(12),null),Dj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ev=Ni.Buffer,ws=Um,T7=new iy,bna=new ws(24),cna=new ws(11),dna=new ws(10),ena=new ws(3),fna=new ws(7),dN={};Object.defineProperty(At.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||Dj)._primeCode){var n=(this||
Dj).__prime;var b=(this||Dj).__gen.toString("hex"),e=[b,n.toString(16)].join("_");if(e in dN)n=dN[e];else{var m,a=0;if(!n.isEven()&&bG.simpleSieve&&bG.fermatTest(n)&&T7.test(n)){switch(T7.test(n.shrn(1))||(a+=2),b){case "02":n.mod(bna).cmp(cna)&&(a+=8);break;case "05":(m=n.mod(dna)).cmp(ena)&&m.cmp(fna)&&(a+=8);break;default:a+=4}n=(dN[e]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,dN[e]=a,a)}(this||Dj)._primeCode=n}return(this||Dj)._primeCode}});At.prototype.generateKeys=function(){return(this||
Dj)._priv||((this||Dj)._priv=new ws(Ky((this||Dj)._primeLen))),(this||Dj)._pub=(this||Dj)._gen.toRed((this||Dj)._prime).redPow((this||Dj)._priv).fromRed(),this.getPublicKey()};At.prototype.computeSecret=function(n){n=(new ws(n)).toRed((this||Dj)._prime).redPow((this||Dj)._priv).fromRed();n=new ev(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new ev(b.length-n.length),b.fill(0),n=ev.concat([b,n]));return n};At.prototype.getPublicKey=function(n){return EK((this||Dj)._pub,n)};At.prototype.getPrivateKey=
function(n){return EK((this||Dj)._priv,n)};At.prototype.getPrime=function(n){return EK((this||Dj).__prime,n)};At.prototype.getGenerator=function(n){return EK((this||Dj)._gen,n)};At.prototype.setGenerator=function(n,b){return b=b||"utf8",ev.isBuffer(n)||(n=new ev(n,b)),(this||Dj).__gen=n,(this||Dj)._gen=new ws(n),this||Dj};var U7,V7,W7,Ny=Ni.Buffer,X7={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
gna={binary:!0,hex:!0,base64:!0};var hna=U7=V7=function(n){var b=new Ny(X7[n].prime,"hex");n=new Ny(X7[n].gen,"hex");return new At(b,n)};var ina=W7=function g(b,e,m,a){return Ny.isBuffer(e)||void 0===gna[e]?g(b,"binary",e,m):(e=e||"binary",a=a||"binary",m=m||new Ny([2]),Ny.isBuffer(m)||(m=new Ny(m,a)),"number"==typeof b?new At(bG(b,m),m,!0):(Ny.isBuffer(b)||(b=new Ny(b,e)),new At(b,m,!0)))};var $ea=Ni.Buffer,jy=Um,x1=Ky;FK.getr=w1;var Oy={toArray:function(b,e){if(Array.isArray(b))return b.slice();
if(!b)return[];var m=[];if("string"!=typeof b){for(e=0;e<b.length;e++)m[e]=0|b[e];return m}if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),e=0;e<b.length;e+=2)m.push(parseInt(b[e]+b[e+1],16));else for(e=0;e<b.length;e++){var a=b.charCodeAt(e),g=a>>8;a&=255;g?m.push(g,a):m.push(a)}return m}};Oy.zero2=y1;Oy.toHex=z1;Oy.encode=function(b,e){return"hex"===e?z1(b):b};var Pi={},jna=Um;Pi.assert=Cs;Pi.toArray=Oy.toArray;Pi.zero2=Oy.zero2;Pi.toHex=Oy.toHex;Pi.encode=Oy.encode;Pi.getNAF=
function(b,e,m){m=Array(Math.max(b.bitLength(),m)+1);m.fill(0);e=1<<e+1;b=b.clone();for(var a=0;a<m.length;a++){var g,l=b.andln(e-1);b.isOdd()?(g=l>(e>>1)-1?(e>>1)-l:l,b.isubn(g)):g=0;m[a]=g;b.iushrn(1)}return m};Pi.getJSF=function(b,e){var m=[[],[]];b=b.clone();e=e.clone();for(var a=0,g=0;0<b.cmpn(-a)||0<e.cmpn(-g);){var l;var r=b.andln(3)+a&3;var v=e.andln(3)+g&3;var y=(3===r&&(r=-1),3===v&&(v=-1),0==(1&r))?0:3!==(l=b.andln(7)+a&7)&&5!==l||2!==v?r:-r;r=(m[0].push(y),0==(1&v))?0:3!==(l=e.andln(7)+
g&7)&&5!==l||2!==r?v:-v;m[1].push(r);2*a===y+1&&(a=1-a);2*g===r+1&&(g=1-g);b.iushrn(1);e.iushrn(1)}return m};Pi.cachedProperty=function(b,e,m){var a="_"+e;b.prototype[e]=function(){return void 0!==this[a]?this[a]:this[a]=m.call(this)}};Pi.parseBytes=function(b){return"string"==typeof b?Pi.toArray(b,"hex"):b};Pi.intFromLE=function(b){return new jna(b,"hex","le")};var GK=Um,afa=Pi.assert;CA.prototype._importDER=function(b,e){b=Pi.toArray(b,e);var m=new bfa;if(48!==b[m.place++]||oR(b,m)+m.place!==b.length||
2!==b[m.place++])return!1;var a=oR(b,m);e=b.slice(m.place,a+m.place);if(m.place+=a,2!==b[m.place++])return!1;a=oR(b,m);if(b.length!==a+m.place)return!1;b=b.slice(m.place,a+m.place);return 0===e[0]&&128&e[1]&&(e=e.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new GK(e),this.s=new GK(b),this.recoveryParam=null,!0};CA.prototype.toDER=function(b){var e=this.r.toArray(),m=this.s.toArray();128&e[0]&&(e=[0].concat(e));128&m[0]&&(m=[0].concat(m));e=A1(e);for(m=A1(m);!(m[0]||128&m[1]);)m=m.slice(1);
var a=[2];pR(a,e.length);(a=a.concat(e)).push(2);pR(a,m.length);e=a.concat(m);m=[48];return pR(m,e.length),m=m.concat(e),Pi.encode(m,b)};var jg={},kna=Cs;jg.inherits=zi;jg.toArray=function(b,e){if(Array.isArray(b))return b.slice();if(!b)return[];var m=[];if("string"==typeof b)if(e){if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)m.push(parseInt(b[a]+b[a+1],16))}else for(var a=e=0;a<b.length;a++){var g=b.charCodeAt(a);if(128>g)m[e++]=g;else if(2048>g)m[e++]=
g>>6|192,m[e++]=63&g|128;else{var l=b,r=a;55296!=(64512&l.charCodeAt(r))||0>r||r+1>=l.length||56320!=(64512&l.charCodeAt(r+1))?(m[e++]=g>>12|224,m[e++]=g>>6&63|128,m[e++]=63&g|128):(g=65536+((1023&g)<<10)+(1023&b.charCodeAt(++a)),m[e++]=g>>18|240,m[e++]=g>>12&63|128,m[e++]=g>>6&63|128,m[e++]=63&g|128)}}else for(a=0;a<b.length;a++)m[a]=0|b[a];return m};jg.toHex=function(b){for(var e="",m=0;m<b.length;m++)e+=C1(b[m].toString(16));return e};jg.htonl=B1;jg.toHex32=function(b,e){for(var m="",a=0;a<b.length;a++){var g=
b[a];"little"===e&&(g=B1(g));m+=D1(g.toString(16))}return m};jg.zero2=C1;jg.zero8=D1;jg.join32=function(b,e,m,a){m-=e;kna(0==m%4);m=Array(m/4);for(var g=0;g<m.length;g++,e+=4)m[g]=("big"===a?b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3]:b[e+3]<<24|b[e+2]<<16|b[e+1]<<8|b[e])>>>0;return m};jg.split32=function(b,e){for(var m=Array(4*b.length),a=0,g=0;a<b.length;a++,g+=4){var l=b[a];"big"===e?(m[g]=l>>>24,m[g+1]=l>>>16&255,m[g+2]=l>>>8&255,m[g+3]=255&l):(m[g+3]=l>>>24,m[g+2]=l>>>16&255,m[g+1]=l>>>8&255,m[g]=255&
l)}return m};jg.rotr32=function(b,e){return b>>>e|b<<32-e};jg.rotl32=function(b,e){return b<<e|b>>>32-e};jg.sum32=function(b,e){return b+e>>>0};jg.sum32_3=function(b,e,m){return b+e+m>>>0};jg.sum32_4=function(b,e,m,a){return b+e+m+a>>>0};jg.sum32_5=function(b,e,m,a,g){return b+e+m+a+g>>>0};jg.sum64=function(b,e,m,a){var g=a+b[e+1]>>>0;b[e]=(g<a?1:0)+m+b[e]>>>0;b[e+1]=g};jg.sum64_hi=function(b,e,m,a){return(e+a>>>0<e?1:0)+b+m>>>0};jg.sum64_lo=function(b,e,m,a){return e+a>>>0};jg.sum64_4_hi=function(b,
e,m,a,g,l,r,v){var y=0,A=e;return y+=(A=A+a>>>0)<e?1:0,y+=(A=A+l>>>0)<l?1:0,b+m+g+r+(y+(A+v>>>0<v?1:0))>>>0};jg.sum64_4_lo=function(b,e,m,a,g,l,r,v){return e+a+l+v>>>0};jg.sum64_5_hi=function(b,e,m,a,g,l,r,v,y,A){var E=0,F=e;return E+=(F=F+a>>>0)<e?1:0,E+=(F=F+l>>>0)<l?1:0,E+=(F=F+v>>>0)<v?1:0,b+m+g+r+y+(E+(F+A>>>0<A?1:0))>>>0};jg.sum64_5_lo=function(b,e,m,a,g,l,r,v,y,A){return e+a+l+v+A>>>0};jg.rotr64_hi=function(b,e,m){return(e<<32-m|b>>>m)>>>0};jg.rotr64_lo=function(b,e,m){return(b<<32-m|e>>>m)>>>
0};jg.shr64_hi=function(b,e,m){return b>>>m};jg.shr64_lo=function(b,e,m){return(b<<32-m|e>>>m)>>>0};var UD={},lna=Cs;UD.BlockHash=HK;HK.prototype.update=function(b,e){if(b=jg.toArray(b,e),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(e=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-e,b.length),0===this.pending.length&&(this.pending=null),b=jg.join32(b,0,b.length-e,this.endian),e=0;e<b.length;e+=
this._delta32)this._update(b,e,e+this._delta32);return this};HK.prototype.digest=function(b){return this.update(this._pad()),lna(null===this.pending),this._digest(b)};HK.prototype._pad=function(){var b=this.pendingTotal,e=this._delta8,m=e-(b+this.padLength)%e;e=Array(m+this.padLength);e[0]=128;for(var a=1;a<m;a++)e[a]=0;if(b<<=3,"big"===this.endian){for(m=8;m<this.padLength;m++)e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=b>>>24&255;e[a++]=b>>>16&255;e[a++]=b>>>8&255;e[a++]=255&b}else for(e[a++]=
255&b,e[a++]=b>>>8&255,e[a++]=b>>>16&255,e[a++]=b>>>24&255,e[a++]=0,e[a++]=0,e[a++]=0,e[a++]=0,m=8;m<this.padLength;m++)e[a++]=0;return e};var mna=Cs,Dv=jg.rotr64_hi,Ev=jg.rotr64_lo,Y7=jg.shr64_hi,Z7=jg.shr64_lo,Py=jg.sum64,YU=jg.sum64_hi,ZU=jg.sum64_lo,nna=jg.sum64_4_hi,ona=jg.sum64_4_lo,pna=jg.sum64_5_hi,qna=jg.sum64_5_lo,E1=UD.BlockHash,cfa=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,
3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,
338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,
2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,
1607167915,987167468,1816402316,1246189591];jg.inherits(xs,E1);xs.blockSize=1024;xs.outSize=512;xs.hmacStrength=192;xs.padLength=128;xs.prototype._prepareBlock=function(b,e){for(var m=this.W,a=0;32>a;a++)m[a]=b[e+a];for(;a<m.length;a+=2){b=m[a-4];e=m[a-3];e=Dv(b,e,19)^Dv(e,b,29)^Y7(b,e,6);b=(0>e&&(e+=4294967296),e);e=m[a-4];var g=m[a-3];g=Ev(e,g,19)^Ev(g,e,29)^Z7(e,g,6);e=(0>g&&(g+=4294967296),g);g=m[a-14];var l=m[a-13];var r=m[a-30];var v=m[a-29];v=Dv(r,v,1)^Dv(r,v,8)^Y7(r,v,7);r=(0>v&&(v+=4294967296),
v);v=m[a-30];var y=m[a-29];y=Ev(v,y,1)^Ev(v,y,8)^Z7(v,y,7);v=(0>y&&(y+=4294967296),y);y=m[a-32];var A=m[a-31];m[a]=nna(b,e,g,l,r,v,y,A);m[a+1]=ona(b,e,g,l,r,v,y,A)}};xs.prototype._update=function(b,e){this._prepareBlock(b,e);b=this.W;e=this.h[0];var m=this.h[1],a=this.h[2],g=this.h[3],l=this.h[4],r=this.h[5],v=this.h[6],y=this.h[7],A=this.h[8],E=this.h[9],F=this.h[10],H=this.h[11],I=this.h[12],M=this.h[13],N=this.h[14],X=this.h[15];mna(this.k.length===b.length);for(var W=0;W<b.length;W+=2){var ea=
A;var Aa=E;ea=Dv(ea,Aa,14)^Dv(ea,Aa,18)^Dv(Aa,ea,9);Aa=(0>ea&&(ea+=4294967296),ea);ea=A;var Ka=E;ea=Ev(ea,Ka,14)^Ev(ea,Ka,18)^Ev(Ka,ea,9);var K=(0>ea&&(ea+=4294967296),ea);ea=A&F^~A&I;Ka=(0>ea&&(ea+=4294967296),ea);ea=E&H^~E&M;var aa=(0>ea&&(ea+=4294967296),ea);var T=this.k[W],U=this.k[W+1],pa=b[W],fa=b[W+1];ea=pna(N,X,Aa,K,Ka,aa,T,U,pa,fa);Ka=qna(N,X,Aa,K,Ka,aa,T,U,pa,fa);N=e;X=m;X=Dv(N,X,28)^Dv(X,N,2)^Dv(X,N,7);N=(0>X&&(X+=4294967296),X);X=e;Aa=m;Aa=Ev(X,Aa,28)^Ev(Aa,X,2)^Ev(Aa,X,7);X=(0>Aa&&(Aa+=
4294967296),Aa);K=e&a^e&l^a&l;Aa=(0>K&&(K+=4294967296),K);aa=m&g^m&r^g&r;K=(0>aa&&(aa+=4294967296),aa);aa=YU(N,X,Aa,K);Aa=ZU(N,X,Aa,K);N=I;X=M;I=F;M=H;F=A;H=E;A=YU(v,y,ea,Ka);E=ZU(y,y,ea,Ka);v=l;y=r;l=a;r=g;a=e;g=m;e=YU(ea,Ka,aa,Aa);m=ZU(ea,Ka,aa,Aa)}Py(this.h,0,e,m);Py(this.h,2,a,g);Py(this.h,4,l,r);Py(this.h,6,v,y);Py(this.h,8,A,E);Py(this.h,10,F,H);Py(this.h,12,I,M);Py(this.h,14,N,X)};xs.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"big"):jg.split32(this.h,"big")};var Fv=jg.rotr32,
rna=Cs,Ut=jg.sum32,sna=jg.sum32_4,tna=jg.sum32_5,F1=UD.BlockHash,dfa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,
2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];jg.inherits(Bt,F1);Bt.blockSize=512;Bt.outSize=256;Bt.hmacStrength=192;Bt.padLength=64;Bt.prototype._update=function(b,e){for(var m=this.W,a=0;16>a;a++)m[a]=b[e+a];for(;a<m.length;a++){b=a;e=m[a-2];e=Fv(e,17)^Fv(e,19)^e>>>10;var g=m[a-7];var l=m[a-15];l=
Fv(l,7)^Fv(l,18)^l>>>3;m[b]=sna(e,g,l,m[a-16])}b=this.h[0];e=this.h[1];g=this.h[2];l=this.h[3];var r=this.h[4],v=this.h[5],y=this.h[6],A=this.h[7];rna(this.k.length===m.length);for(a=0;a<m.length;a++){var E=A;A=r;A=Fv(A,6)^Fv(A,11)^Fv(A,25);E=tna(E,A,r&v^~r&y,this.k[a],m[a]);A=b;A=Fv(A,2)^Fv(A,13)^Fv(A,22);var F=Ut(A,b&e^b&g^e&g);A=y;y=v;v=r;r=Ut(l,E);l=g;g=e;e=b;b=Ut(E,F)}this.h[0]=Ut(this.h[0],b);this.h[1]=Ut(this.h[1],e);this.h[2]=Ut(this.h[2],g);this.h[3]=Ut(this.h[3],l);this.h[4]=Ut(this.h[4],
r);this.h[5]=Ut(this.h[5],v);this.h[6]=Ut(this.h[6],y);this.h[7]=Ut(this.h[7],A)};Bt.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"big"):jg.split32(this.h,"big")};var $U=jg.rotl32,sH=jg.sum32,una=jg.sum32_5,G1=UD.BlockHash,vna=[1518500249,1859775393,2400959708,3395469782];jg.inherits(fv,G1);fv.blockSize=512;fv.outSize=160;fv.hmacStrength=80;fv.padLength=64;fv.prototype._update=function(b,e){for(var m=this.W,a=0;16>a;a++)m[a]=b[e+a];for(;a<m.length;a++)m[a]=$U(m[a-3]^m[a-8]^m[a-
14]^m[a-16],1);b=this.h[0];e=this.h[1];var g=this.h[2],l=this.h[3],r=this.h[4];for(a=0;a<m.length;a++){var v=~~(a/20);v=una($U(b,5),0===v?e&g^~e&l:1===v||3===v?e^g^l:2===v?e&g^e&l^g&l:void 0,r,m[a],vna[v]);r=l;l=g;g=$U(e,30);e=b;b=v}this.h[0]=sH(this.h[0],b);this.h[1]=sH(this.h[1],e);this.h[2]=sH(this.h[2],g);this.h[3]=sH(this.h[3],l);this.h[4]=sH(this.h[4],r)};fv.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"big"):jg.split32(this.h,"big")};var H1=Bt;jg.inherits(Dw,H1);Dw.blockSize=
512;Dw.outSize=224;Dw.hmacStrength=192;Dw.padLength=64;Dw.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h.slice(0,7),"big"):jg.split32(this.h.slice(0,7),"big")};var I1=xs;jg.inherits(Ew,I1);Ew.blockSize=1024;Ew.outSize=384;Ew.hmacStrength=192;Ew.padLength=128;Ew.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h.slice(0,12),"big"):jg.split32(this.h.slice(0,12),"big")};var VD={};VD.sha1=fv;VD.sha224=Dw;VD.sha256=Bt;VD.sha384=Ew;VD.sha512=xs;var $7={},eN=jg.rotl32,a8=jg.sum32,
tH=jg.sum32_3,b8=jg.sum32_4,J1=UD.BlockHash;jg.inherits(gv,J1);$7.ripemd160=gv;gv.blockSize=512;gv.outSize=160;gv.hmacStrength=192;gv.padLength=64;gv.prototype._update=function(b,e){for(var m=this.h[0],a=this.h[1],g=this.h[2],l=this.h[3],r=this.h[4],v=m,y=a,A=g,E=l,F=r,H=0;80>H;H++){var I=a8(eN(b8(m,K1(H,a,g,l),b[wna[H]+e],15>=H?0:31>=H?1518500249:47>=H?1859775393:63>=H?2400959708:2840853838),xna[H]),r);m=r;r=l;l=eN(g,10);g=a;a=I;I=a8(eN(b8(v,K1(79-H,y,A,E),b[yna[H]+e],15>=H?1352829926:31>=H?1548603684:
47>=H?1836072691:63>=H?2053994217:0),zna[H]),F);v=F;F=E;E=eN(A,10);A=y;y=I}I=tH(this.h[1],g,E);this.h[1]=tH(this.h[2],l,F);this.h[2]=tH(this.h[3],r,v);this.h[3]=tH(this.h[4],m,y);this.h[4]=tH(this.h[0],a,A);this.h[0]=I};gv.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"little"):jg.split32(this.h,"little")};var wna=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,
10,14,1,3,8,11,6,15,13],yna=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],xna=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],zna=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,
15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],efa=jg,Ana=Cs;eD.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());Ana(b.length<=this.blockSize);for(var e=b.length;e<this.blockSize;e++)b.push(0);for(e=0;e<b.length;e++)b[e]^=54;this.inner=(new this.Hash).update(b);for(e=0;e<b.length;e++)b[e]^=106;this.outer=(new this.Hash).update(b)};eD.prototype.update=function(b,e){return this.inner.update(b,
e),this};eD.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var fl={};fl.utils=jg;fl.common=UD;fl.sha=VD;fl.ripemd=$7;fl.hmac=eD;fl.sha1=fl.sha.sha1;fl.sha256=fl.sha.sha256;fl.sha224=fl.sha.sha224;fl.sha384=fl.sha.sha384;fl.sha512=fl.sha.sha512;fl.ripemd160=fl.ripemd.ripemd160;var DA=Oy,L1=Cs;Fw.prototype._init=function(b,e,m){b=b.concat(e).concat(m);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=
1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};Fw.prototype._hmac=function(){return new fl.hmac(this.hash,this.K)};Fw.prototype._update=function(b){var e=this._hmac().update(this.V).update([0]);b&&(e=e.update(b));this.K=e.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};Fw.prototype.reseed=function(b,e,m,a){"string"!=typeof e&&(a=m,m=e,e=null);b=DA.toArray(b,
e);m=DA.toArray(m,a);L1(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(m||[]));this._reseed=1};Fw.prototype.generate=function(b,e,m,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof e&&(a=m,m=e,e=null);m&&(m=DA.toArray(m,a||"hex"),this._update(m));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(m),this._reseed++,DA.encode(b,e)};
var EA=Um,fN=Pi.getNAF,Bna=Pi.getJSF,gN=Pi.assert;Ct.prototype.point=function(){throw Error("Not implemented");};Ct.prototype.validate=function(){throw Error("Not implemented");};Ct.prototype._fixedNafMul=function(b,e){gN(b.precomputed);b=b._getDoubles();var m=fN(e,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var g=[],l=0;l<m.length;l+=b.step){var r=0;for(e=l+b.step-1;e>=l;e--)r=(r<<1)+m[e];g.push(r)}e=this.jpoint(null,null,null);for(m=this.jpoint(null,null,null);0<a;a--){for(l=0;l<
g.length;l++)(r=g[l])===a?m=m.mixedAdd(b.points[l]):r===-a&&(m=m.mixedAdd(b.points[l].neg()));e=e.add(m)}return e.toP()};Ct.prototype._wnafMul=function(b,e){var m=b._getNAFPoints(4),a=m.points;m=fN(e,m.wnd,this._bitLength);for(var g=this.jpoint(null,null,null),l=m.length-1;0<=l;l--){for(e=0;0<=l&&0===m[l];l--)e++;if(0<=l&&e++,g=g.dblp(e),0>l)break;e=m[l];gN(0!==e);g="affine"===b.type?0<e?g.mixedAdd(a[e-1>>1]):g.mixedAdd(a[-e-1>>1].neg()):0<e?g.add(a[e-1>>1]):g.add(a[-e-1>>1].neg())}return"affine"===
b.type?g.toP():g};Ct.prototype._wnafMulAdd=function(b,e,m,a,g){for(var l=this._wnafT1,r=this._wnafT2,v=this._wnafT3,y=0,A=0;A<a;A++){var E=(N=e[A])._getNAFPoints(b);l[A]=E.wnd;r[A]=E.points}for(A=a-1;1<=A;A-=2){E=A-1;var F=A;if(1===l[E]&&1===l[F]){var H=[e[E],null,null,e[F]];0===e[E].y.cmp(e[F].y)?(H[1]=e[E].add(e[F]),H[2]=e[E].toJ().mixedAdd(e[F].neg())):0===e[E].y.cmp(e[F].y.redNeg())?(H[1]=e[E].toJ().mixedAdd(e[F]),H[2]=e[E].add(e[F].neg())):(H[1]=e[E].toJ().mixedAdd(e[F]),H[2]=e[E].toJ().mixedAdd(e[F].neg()));
var I=[-3,-1,-5,-7,0,7,5,1,3],M=Bna(m[E],m[F]);y=Math.max(M[0].length,y);v[E]=Array(y);v[F]=Array(y);for(b=0;b<y;b++)v[E][b]=I[3*((0|M[0][b])+1)+((0|M[1][b])+1)],v[F][b]=0,r[E]=H}else v[E]=fN(m[E],l[E],this._bitLength),v[F]=fN(m[F],l[F],this._bitLength),y=Math.max(v[E].length,y),y=Math.max(v[F].length,y)}e=this.jpoint(null,null,null);m=this._wnafT4;for(A=y;0<=A;A--){for(y=0;0<=A;){l=!0;for(b=0;b<a;b++)m[b]=0|v[b][A],0!==m[b]&&(l=!1);if(!l)break;y++;A--}if(0<=A&&y++,e=e.dblp(y),0>A)break;for(b=0;b<
a;b++){var N;y=m[b];0!==y&&(0<y?N=r[b][y-1>>1]:0>y&&(N=r[b][-y-1>>1].neg()),e="affine"===N.type?e.mixedAdd(N):e.add(N))}}for(A=0;A<a;A++)r[A]=null;return g?e:e.toP()};Ct.BasePoint=ys;ys.prototype.eq=function(){throw Error("Not implemented");};ys.prototype.validate=function(){return this.curve.validate(this)};Ct.prototype.decodePoint=function(b,e){b=Pi.toArray(b,e);e=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*e)return 6===b[0]?gN(0==b[b.length-1]%2):7===b[0]&&gN(1==b[b.length-
1]%2),this.point(b.slice(1,1+e),b.slice(1+e,1+2*e));if((2===b[0]||3===b[0])&&b.length-1===e)return this.pointFromX(b.slice(1,1+e),3===b[0]);throw Error("Unknown point format");};ys.prototype.encodeCompressed=function(b){return this.encode(b,!0)};ys.prototype._encode=function(b){var e=this.curve.p.byteLength(),m=this.getX().toArray("be",e);return b?[this.getY().isEven()?2:3].concat(m):[4].concat(m,this.getY().toArray("be",e))};ys.prototype.encode=function(b,e){return Pi.encode(this._encode(e),b)};
ys.prototype.precompute=function(b){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,b),e.beta=this._getBeta(),this.precomputed=e,this};ys.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((b.bitLength()+1)/e.step)};ys.prototype._getDoubles=function(b,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var m=[this],a=this,g=0;g<e;g+=b){for(var l=0;l<b;l++)a=a.dbl();m.push(a)}return{step:b,points:m}};ys.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],m=(1<<b)-1,a=1===m?null:this.dbl(),g=1;g<m;g++)e[g]=e[g-1].add(a);return{wnd:b,points:e}};ys.prototype._getBeta=function(){return null};ys.prototype.dblp=function(b){for(var e=this,m=0;m<b;m++)e=e.dbl();return e};var fm=Um,aV=zi,fD=Ct,Cna=Pi.assert;aV(zs,fD);zs.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var e=(new fm(b.beta,16)).toRed(this.red);else e=this._getEndoRoots(this.p),e=(e=0>e[0].cmp(e[1])?e[0]:e[1]).toRed(this.red);if(b.lambda)var m=new fm(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(e))?m=a[0]:(m=a[1],Cna(0===this.g.mul(m).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:m,basis:b.basis?b.basis.map(function(g){return{a:new fm(g.a,16),b:new fm(g.b,16)}}):this._getEndoBasis(m)}}};
zs.prototype._getEndoRoots=function(b){var e=b===this.p?this.red:fm.mont(b),m=(new fm(2)).toRed(e).redInvm();b=m.redNeg();e=(new fm(3)).toRed(e).redNeg().redSqrt().redMul(m);return[b.redAdd(e).fromRed(),b.redSub(e).fromRed()]};zs.prototype._getEndoBasis=function(b){for(var e,m,a,g,l,r,v,y=this.n.ushrn(Math.floor(this.n.bitLength()/2)),A=this.n.clone(),E=new fm(1),F=new fm(0),H=new fm(0),I=new fm(1),M=0;0!==b.cmpn(0);){var N=A.div(b);v=A.sub(N.mul(b));r=H.sub(N.mul(E));N=I.sub(N.mul(F));if(!a&&0>v.cmp(y))e=
l.neg(),m=E,a=v.neg(),g=r;else if(a&&2==++M)break;l=v;A=b;b=v;H=E;E=r;I=F;F=N}l=v.neg();v=a.sqr().add(g.sqr());return 0<=l.sqr().add(r.sqr()).cmp(v)&&(l=e,r=m),a.negative&&(a=a.neg(),g=g.neg()),l.negative&&(l=l.neg(),r=r.neg()),[{a:a,b:g},{a:l,b:r}]};zs.prototype._endoSplit=function(b){var e=this.endo.basis,m=e[0],a=e[1],g=a.b.mul(b).divRound(this.n),l=m.b.neg().mul(b).divRound(this.n);e=g.mul(m.a);var r=l.mul(a.a);m=g.mul(m.b);a=l.mul(a.b);return{k1:b.sub(e).sub(r),k2:m.add(a).neg()}};zs.prototype.pointFromX=
function(b,e){(b=new fm(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(e&&!m||!e&&m)&&(a=a.redNeg()),this.point(b,a)};zs.prototype.validate=function(b){if(b.inf)return!0;var e=b.x;b=b.y;var m=this.a.redMul(e);e=e.redSqr().redMul(e).redIAdd(m).redIAdd(this.b);return 0===b.redSqr().redISub(e).cmpn(0)};zs.prototype._endoWnafMulAdd=
function(b,e,m){for(var a=this._endoWnafT1,g=this._endoWnafT2,l=0;l<b.length;l++){var r=this._endoSplit(e[l]),v=b[l],y=v._getBeta();r.k1.negative&&(r.k1.ineg(),v=v.neg(!0));r.k2.negative&&(r.k2.ineg(),y=y.neg(!0));a[2*l]=v;a[2*l+1]=y;g[2*l]=r.k1;g[2*l+1]=r.k2}b=this._wnafMulAdd(1,a,g,2*l,m);for(e=0;e<2*l;e++)a[e]=null,g[e]=null;return b};aV($n,fD.BasePoint);zs.prototype.point=function(b,e,m){return new $n(this,b,e,m)};zs.prototype.pointFromJSON=function(b,e){return $n.fromJSON(this,b,e)};$n.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var m=this.curve,a=function(g){return m.point(g.x.redMul(m.endo.beta),g.y)};b.beta=e;e.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return e}};$n.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};$n.fromJSON=function(b,e,m){function a(l){return b.point(l[0],l[1],m)}"string"==typeof e&&(e=JSON.parse(e));var g=b.point(e[0],e[1],m);if(!e[2])return g;e=e[2];return g.precomputed={beta:null,doubles:e.doubles&&{step:e.doubles.step,points:[g].concat(e.doubles.points.map(a))},naf:e.naf&&{wnd:e.naf.wnd,
points:[g].concat(e.naf.points.map(a))}},g};$n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};$n.prototype.isInfinity=function(){return this.inf};$n.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var e=this.y.redSub(b.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(b.x).redInvm()));
b=e.redSqr().redISub(this.x).redISub(b.x);e=e.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,e)};$n.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,m=this.x.redSqr();b=b.redInvm();m=m.redAdd(m).redIAdd(m).redIAdd(e).redMul(b);e=m.redSqr().redISub(this.x.redAdd(this.x));m=m.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,m)};$n.prototype.getX=function(){return this.x.fromRed()};
$n.prototype.getY=function(){return this.y.fromRed()};$n.prototype.mul=function(b){return b=new fm(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};$n.prototype.mulAdd=function(b,e,m){e=[this,e];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(e,b):this.curve._wnafMulAdd(1,e,b,2)};$n.prototype.jmulAdd=function(b,e,m){e=[this,e];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(e,
b,!0):this.curve._wnafMulAdd(1,e,b,2,!0)};$n.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};$n.prototype.neg=function(b){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var m=function(a){return a.neg()};e.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(m)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(m)}}}return e};$n.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};aV(Io,fD.BasePoint);zs.prototype.jpoint=function(b,e,m){return new Io(this,b,e,m)};Io.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),e=b.redSqr(),m=this.x.redMul(e);b=this.y.redMul(e).redMul(b);return this.curve.point(m,b)};Io.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Io.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var e=b.z.redSqr(),m=this.z.redSqr(),a=this.x.redMul(e),g=b.x.redMul(m);e=this.y.redMul(e.redMul(b.z));m=b.y.redMul(m.redMul(this.z));g=a.redSub(g);m=e.redSub(m);if(0===g.cmpn(0))return 0!==m.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=g.redSqr(),r=l.redMul(g);l=a.redMul(l);a=m.redSqr().redIAdd(r).redISub(l).redISub(l);e=m.redMul(l.redISub(a)).redISub(e.redMul(r));b=this.z.redMul(b.z).redMul(g);return this.curve.jpoint(a,e,b)};Io.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var e=this.z.redSqr(),m=this.x,a=b.x.redMul(e),g=this.y;b=b.y.redMul(e).redMul(this.z);a=m.redSub(a);b=g.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr();e=l.redMul(a);l=m.redMul(l);m=b.redSqr().redIAdd(e).redISub(l).redISub(l);g=b.redMul(l.redISub(m)).redISub(g.redMul(e));a=this.z.redMul(a);return this.curve.jpoint(m,g,a)};Io.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var e=this,m=0;m<b;m++)e=e.dbl();return e}e=this.curve.a;var a=this.curve.tinv,g=this.x;m=this.y;var l=this.z,r=l.redSqr().redSqr(),v=m.redAdd(m);for(m=0;m<b;m++){var y=g.redSqr(),A=v.redSqr(),E=A.redSqr();y=y.redAdd(y).redIAdd(y).redIAdd(e.redMul(r));A=g.redMul(A);g=y.redSqr().redISub(A.redAdd(A));A=A.redISub(g);y=y.redMul(A);y=y.redIAdd(y).redISub(E);l=v.redMul(l);m+1<b&&(r=r.redMul(E));v=y}return this.curve.jpoint(g,v.redMul(a),l)};Io.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Io.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var e=this.y.redSqr();var m=e.redSqr();e=this.x.redAdd(e).redSqr().redISub(b).redISub(m);e=e.redIAdd(e);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(e).redISub(e),g=m.redIAdd(m);g=(g=g.redIAdd(g)).redIAdd(g);m=a;b=b.redMul(e.redISub(a)).redISub(g);e=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();m=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(m);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);g=a.redSqr();var l=m.redIAdd(m);l=(l=l.redIAdd(l)).redIAdd(l);m=g.redISub(b).redISub(b);b=a.redMul(b.redISub(m)).redISub(l);e=(e=this.y.redMul(this.z)).redIAdd(e)}return this.curve.jpoint(m,b,e)};Io.prototype._threeDbl=function(){var b;if(this.zOne){var e=this.x.redSqr();var m=this.y.redSqr();var a=m.redSqr();m=this.x.redAdd(m).redSqr().redISub(e).redISub(a);m=m.redIAdd(m);var g=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a);e=b=g.redSqr().redISub(m).redISub(m);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=g.redMul(m.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),m=this.y.redSqr(),e=this.x.redMul(m),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),g=e.redIAdd(e),e=(g=g.redIAdd(g)).redAdd(g),e=a.redSqr().redISub(e),b=this.y.redAdd(this.z).redSqr().redISub(m).redISub(b),m=m.redSqr(),m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),a=a.redMul(g.redISub(e)).redISub(m);return this.curve.jpoint(e,a,b)};Io.prototype._dbl=
function(){var b=this.curve.a,e=this.x,m=this.y,a=this.z,g=a.redSqr().redSqr(),l=e.redSqr(),r=m.redSqr();b=l.redAdd(l).redIAdd(l).redIAdd(b.redMul(g));e=e.redAdd(e);g=e.redIAdd(e).redMul(r);e=b.redSqr().redISub(g.redAdd(g));g=g.redISub(e);r=r.redSqr();r=(r=(r=r.redIAdd(r)).redIAdd(r)).redIAdd(r);r=b.redMul(g).redISub(r);m=m.redAdd(m).redMul(a);return this.curve.jpoint(e,r,m)};Io.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),e=this.y.redSqr(),m=this.z.redSqr(),
a=e.redSqr(),g=b.redAdd(b).redIAdd(b),l=g.redSqr();b=this.x.redAdd(e).redSqr().redISub(b).redISub(a);var r=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(l)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);g=g.redIAdd(b).redSqr().redISub(l).redISub(r).redISub(a);e=e.redMul(g);e=(e=e.redIAdd(e)).redIAdd(e);e=this.x.redMul(r).redISub(e);e=(e=e.redIAdd(e)).redIAdd(e);a=this.y.redMul(g.redMul(a.redISub(g)).redISub(b.redMul(r)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);m=
this.z.redAdd(b).redSqr().redISub(m).redISub(r);return this.curve.jpoint(e,a,m)};Io.prototype.mul=function(b,e){return b=new fm(b,e),this.curve._wnafMul(this,b)};Io.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var e=this.z.redSqr(),m=b.z.redSqr();if(0!==this.x.redMul(m).redISub(b.x.redMul(e)).cmpn(0))return!1;e=e.redMul(this.z);m=m.redMul(b.z);return 0===this.y.redMul(m).redISub(b.y.redMul(e)).cmpn(0)};Io.prototype.eqXToP=function(b){var e=this.z.redSqr(),
m=b.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(m))return!0;b=b.clone();for(e=this.curve.redN.redMul(e);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(m.redIAdd(e),0===this.x.cmp(m))return!0}};Io.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Io.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var hD=Um,c8=zi,IK=Ct;c8(gD,IK);gD.prototype.validate=
function(b){b=b.normalize().x;var e=b.redSqr();b=e.redMul(b).redAdd(e.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};c8(ao,IK.BasePoint);gD.prototype.decodePoint=function(b,e){return this.point(Pi.toArray(b,e),1)};gD.prototype.point=function(b,e){return new ao(this,b,e)};gD.prototype.pointFromJSON=function(b){return ao.fromJSON(this,b)};ao.prototype.precompute=function(){};ao.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};ao.fromJSON=function(b,
e){return new ao(b,e[0],e[1]||b.one)};ao.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ao.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};ao.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),m=b.redSub(e);b=b.redMul(e);e=m.redMul(e.redAdd(this.curve.a24.redMul(m)));return this.curve.point(b,e)};ao.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};ao.prototype.diffAdd=function(b,e){var m=this.x.redAdd(this.z),a=this.x.redSub(this.z),g=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(m);g=g.redMul(a);a=e.z.redMul(b.redAdd(g).redSqr());e=e.x.redMul(b.redISub(g).redSqr());return this.curve.point(a,e)};ao.prototype.mul=function(b){var e=b.clone();b=this;for(var m=this.curve.point(null,null),a=[];0!==e.cmpn(0);e.iushrn(1))a.push(e.andln(1));for(e=a.length-1;0<=e;e--)0===a[e]?(b=b.diffAdd(m,this),m=m.dbl()):(m=b.diffAdd(m,this),b=b.dbl());return m};ao.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};ao.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};ao.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};ao.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};ao.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Gw=Um,d8=zi,JK=Ct,ffa=Pi.assert;d8(hv,JK);hv.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
hv.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};hv.prototype.jpoint=function(b,e,m,a){return this.point(b,e,m,a)};hv.prototype.pointFromX=function(b,e){(b=new Gw(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=this.c2.redSub(this.a.redMul(m));m=this.one.redSub(this.c2.redMul(this.d).redMul(m));m=a.redMul(m.redInvm());a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(e&&!m||!e&&m)&&(a=a.redNeg()),this.point(b,
a)};hv.prototype.pointFromY=function(b,e){(b=new Gw(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=m.redSub(this.c2);m=m.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(m.redInvm());if(0===a.cmp(this.zero)){if(e)throw Error("invalid point");return this.point(this.zero,b)}m=a.redSqrt();if(0!==m.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return m.fromRed().isOdd()!==e&&(m=m.redNeg()),this.point(m,b)};hv.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var e=b.x.redSqr(),m=b.y.redSqr();b=e.redMul(this.a).redAdd(m);e=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(m)));return 0===b.cmp(e)};d8(nl,JK.BasePoint);hv.prototype.pointFromJSON=function(b){return nl.fromJSON(this,b)};hv.prototype.point=function(b,e,m,a){return new nl(this,b,e,m,a)};nl.fromJSON=function(b,e){return new nl(b,e[0],e[1],e[2])};nl.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};nl.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};nl.prototype._extDbl=function(){var b=this.x.redSqr(),e=this.y.redSqr(),m=this.z.redSqr();m=m.redIAdd(m);var a=this.curve._mulA(b),g=this.x.redAdd(this.y).redSqr().redISub(b).redISub(e);b=a.redAdd(e);m=b.redSub(m);var l=a.redSub(e);e=g.redMul(m);a=b.redMul(l);g=g.redMul(l);b=m.redMul(b);return this.curve.point(e,a,b,g)};nl.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var e=this.x.redSqr();var m=this.y.redSqr();if(this.curve.twisted){var a=(l=this.curve._mulA(e)).redAdd(m);if(this.zOne)b=b.redSub(e).redSub(m).redMul(a.redSub(this.curve.two)),e=a.redMul(l.redSub(m)),a=a.redSqr().redSub(a).redSub(a);else{var g=this.z.redSqr();g=a.redSub(g).redISub(g);b=b.redSub(e).redISub(m).redMul(g);e=a.redMul(l.redSub(m));a=a.redMul(g)}}else{var l=e.redAdd(m);g=this.curve._mulC(this.z).redSqr();g=l.redSub(g).redSub(g);b=this.curve._mulC(b.redISub(l)).redMul(g);
e=this.curve._mulC(l).redMul(e.redISub(m));a=l.redMul(g)}return this.curve.point(b,e,a)};nl.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};nl.prototype._extAdd=function(b){var e=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),m=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),g=this.z.redMul(b.z.redAdd(b.z)),l=m.redSub(e);b=g.redSub(a);a=g.redAdd(a);g=m.redAdd(e);e=l.redMul(b);m=a.redMul(g);l=l.redMul(g);
b=b.redMul(a);return this.curve.point(e,m,b,l)};nl.prototype._projAdd=function(b){var e,m,a=this.z.redMul(b.z),g=a.redSqr(),l=this.x.redMul(b.x),r=this.y.redMul(b.y),v=this.curve.d.redMul(l).redMul(r),y=g.redSub(v);g=g.redAdd(v);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(l).redISub(r);b=a.redMul(y).redMul(b);return this.curve.twisted?(e=a.redMul(g).redMul(r.redSub(this.curve._mulA(l))),m=y.redMul(g)):(e=a.redMul(g).redMul(r.redSub(l)),m=this.curve._mulC(y).redMul(g)),this.curve.point(b,
e,m)};nl.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};nl.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};nl.prototype.mulAdd=function(b,e,m){return this.curve._wnafMulAdd(1,[this,e],[b,m],2,!1)};nl.prototype.jmulAdd=function(b,e,m){return this.curve._wnafMulAdd(1,[this,e],[b,m],2,!0)};nl.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};nl.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};nl.prototype.getX=function(){return this.normalize(),this.x.fromRed()};nl.prototype.getY=function(){return this.normalize(),this.y.fromRed()};nl.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};nl.prototype.eqXToP=
function(b){var e=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;b=b.clone();for(var m=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(e.redIAdd(m),0===this.x.cmp(e))return!0}};nl.prototype.toP=nl.prototype.normalize;nl.prototype.mixedAdd=nl.prototype.add;var WD={};WD.base=Ct;WD.short=zs;WD.mont=gD;WD.edwards=hv;var Dna={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},hN={},rR=hN,qR=WD,N1=Pi.assert;rR.PresetCurve=M1;ky("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:fl.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});ky("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:fl.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});ky("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:fl.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});ky("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:fl.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});ky("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:fl.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});ky("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fl.sha256,gRed:!1,g:["9"]});ky("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fl.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var e8=Dna}catch(b){e8=void 0}ky("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:fl.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",e8]});var Ena=Um,f8=Pi.assert;
bo.fromPublic=function(b,e,m){return e instanceof bo?e:new bo(b,{pub:e,pubEnc:m})};bo.fromPrivate=function(b,e,m){return e instanceof bo?e:new bo(b,{priv:e,privEnc:m})};bo.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};bo.prototype.getPublic=function(b,e){return"string"==
typeof b&&(e=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,b):this.pub};bo.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};bo.prototype._importPrivate=function(b,e){this.priv=new Ena(b,e||16);this.priv=this.priv.umod(this.ec.curve.n)};bo.prototype._importPublic=function(b,e){if(b.x||b.y)return"mont"===this.ec.curve.type?f8(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||f8(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,e)};bo.prototype.derive=function(b){return b.mul(this.priv).getX()};bo.prototype.sign=function(b,e,m){return this.ec.sign(b,this,e,m)};bo.prototype.verify=function(b,e){return this.ec.verify(b,e,this)};bo.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var sB=Um,sR=hN,O1=Pi.assert;As.prototype.keyPair=function(b){return new bo(this,
b)};As.prototype.keyFromPrivate=function(b,e){return bo.fromPrivate(this,b,e)};As.prototype.keyFromPublic=function(b,e){return bo.fromPublic(this,b,e)};As.prototype.genKeyPair=function(b){b||(b={});b=new Fw({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||cN(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var e=this.n.byteLength(),m=this.n.sub(new sB(2));;){var a=new sB(b.generate(e));if(!(0<a.cmp(m)))return a.iaddn(1),this.keyFromPrivate(a)}};
As.prototype._truncateToN=function(b,e){var m=8*b.byteLength()-this.n.bitLength();return 0<m&&(b=b.ushrn(m)),!e&&0<=b.cmp(this.n)?b.sub(this.n):b};As.prototype.sign=function(b,e,m,a){"object"==typeof m&&(a=m,m=null);a||(a={});e=this.keyFromPrivate(e,m);b=this._truncateToN(new sB(b,16));var g=this.n.byteLength();m=e.getPrivate().toArray("be",g);g=b.toArray("be",g);g=new Fw({hash:this.hash,entropy:m,nonce:g,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var l=this.n.sub(new sB(1)),r=0;;r++){var v=a.k?
a.k(r):new sB(g.generate(this.n.byteLength()));if(!(0>=(v=this._truncateToN(v,!0)).cmpn(1)||0<=v.cmp(l))){var y=this.g.mul(v);if(!y.isInfinity()){var A=y.getX();m=A.umod(this.n);if(0!==m.cmpn(0)&&(v=v.invm(this.n).mul(m.mul(e.getPrivate()).iadd(b)),0!==(v=v.umod(this.n)).cmpn(0)))return b=(y.getY().isOdd()?1:0)|(0!==A.cmp(m)?2:0),a.canonical&&0<v.cmp(this.nh)&&(v=this.n.sub(v),b^=1),new CA({r:m,s:v,recoveryParam:b})}}}};As.prototype.verify=function(b,e,m,a){b=this._truncateToN(new sB(b,16));m=this.keyFromPublic(m,
a);a=(e=new CA(e,"hex")).r;e=e.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>e.cmpn(1)||0<=e.cmp(this.n))return!1;var g;e=e.invm(this.n);b=e.mul(b).umod(this.n);e=e.mul(a).umod(this.n);return this.curve._maxwellTrick?!(g=this.g.jmulAdd(b,m.getPublic(),e)).isInfinity()&&g.eqXToP(a):!(g=this.g.mulAdd(b,m.getPublic(),e)).isInfinity()&&0===g.getX().umod(this.n).cmp(a)};As.prototype.recoverPubKey=function(b,e,m,a){O1((3&m)===m,"The recovery param is more than two bits");e=new CA(e,a);a=this.n;var g=new sB(b);
b=e.r;var l=e.s,r=1&m;m>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&m)throw Error("Unable to find sencond key candinate");b=m?this.curve.pointFromX(b.add(this.curve.n),r):this.curve.pointFromX(b,r);e=e.r.invm(a);m=a.sub(g).mul(e).umod(a);a=l.mul(e).umod(a);return this.g.mulAdd(m,b,a)};As.prototype.getKeyRecoveryParam=function(b,e,m,a){if(null!==(e=new CA(e,a)).recoveryParam)return e.recoveryParam;for(a=0;4>a;a++){try{var g=this.recoverPubKey(b,e,a)}catch(l){continue}if(g.eq(m))return a}throw Error("Unable to find valid recovery factor");
};var g8=Pi.assert,P1=Pi.parseBytes,XD=Pi.cachedProperty;un.fromPublic=function(b,e){return e instanceof un?e:new un(b,{pub:e})};un.fromSecret=function(b,e){return e instanceof un?e:new un(b,{secret:e})};un.prototype.secret=function(){return this._secret};XD(un,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});XD(un,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});XD(un,"privBytes",function(){var b=this.eddsa,e=this.hash(),
m=b.encodingLength-1;b=e.slice(0,b.encodingLength);return b[0]&=248,b[m]&=127,b[m]|=64,b});XD(un,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});XD(un,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});XD(un,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});un.prototype.sign=function(b){return g8(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};un.prototype.verify=function(b,e){return this.eddsa.verify(b,e,this)};
un.prototype.getSecret=function(b){return g8(this._secret,"KeyPair is public only"),Pi.encode(this.secret(),b)};un.prototype.getPublic=function(b){return Pi.encode(this.pubBytes(),b)};var ifa=Um,hfa=Pi.assert,iN=Pi.cachedProperty,gfa=Pi.parseBytes;iN(ly,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});iN(ly,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});iN(ly,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});iN(ly,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
ly.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ly.prototype.toHex=function(){return Pi.encode(this.toBytes(),"hex").toUpperCase()};var lfa=fl,kfa=hN,jfa=Pi.assert,h8=Pi.parseBytes;zq.prototype.sign=function(b,e){b=h8(b);var m=this.keyFromSecret(e),a=this.hashInt(m.messagePrefix(),b);e=this.g.mul(a);var g=this.encodePoint(e);b=this.hashInt(g,m.pubBytes(),b).mul(m.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:e,S:b,Rencoded:g})};zq.prototype.verify=
function(b,e,m){b=h8(b);e=this.makeSignature(e);m=this.keyFromPublic(m);b=this.hashInt(e.Rencoded(),m.pubBytes(),b);var a=this.g.mul(e.S());return e.R().add(m.pub().mul(b)).eq(a)};zq.prototype.hashInt=function(){for(var b=this.hash(),e=0;e<arguments.length;e++)b.update(arguments[e]);return Pi.intFromLE(b.digest()).umod(this.curve.n)};zq.prototype.keyFromPublic=function(b){return un.fromPublic(this,b)};zq.prototype.keyFromSecret=function(b){return un.fromSecret(this,b)};zq.prototype.makeSignature=
function(b){return b instanceof ly?b:new ly(this,b)};zq.prototype.encodePoint=function(b){var e=b.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=b.getX().isOdd()?128:0,e};zq.prototype.decodePoint=function(b){var e=(b=Pi.parseBytes(b)).length-1,m=b.slice(0,e).concat(-129&b[e]);b=0!=(128&b[e]);m=Pi.intFromLE(m);return this.curve.pointFromY(m,b)};zq.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};zq.prototype.decodeInt=function(b){return Pi.intFromLE(b)};
zq.prototype.isPoint=function(b){return b instanceof this.pointClass};var Xw={version:"6.5.2"};Xw.utils=Pi;Xw.rand=cN;Xw.curve=WD;Xw.curves=hN;Xw.ec=As;Xw.eddsa=zq;var FR={},g2=!1,nr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,T1={},Fna=zi;T1.Reporter=Bs;Bs.prototype.isError=function(b){return b instanceof iD};Bs.prototype.save=function(){var b=(this||vn)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};Bs.prototype.restore=function(b){var e=(this||vn)._reporterState;e.obj=b.obj;e.path=e.path.slice(0,b.pathLen)};Bs.prototype.enterKey=function(b){return(this||vn)._reporterState.path.push(b)};Bs.prototype.exitKey=function(b){var e=(this||vn)._reporterState;e.path=e.path.slice(0,b-1)};Bs.prototype.leaveKey=function(b,e,m){var a=(this||vn)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[e]=m)};Bs.prototype.path=function(){return(this||vn)._reporterState.path.join("/")};Bs.prototype.enterObject=
function(){var b=(this||vn)._reporterState,e=b.obj;return b.obj={},e};Bs.prototype.leaveObject=function(b){var e=(this||vn)._reporterState,m=e.obj;return e.obj=b,m};Bs.prototype.error=function(b){var e=(this||vn)._reporterState,m=b instanceof iD;if(b=m?b:new iD(e.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!e.options.partial)throw b;return m||e.errors.push(b),b};Bs.prototype.wrapResult=function(b){var e=(this||vn)._reporterState;return e.options.partial?{result:this.isError(b)?
null:b,errors:e.errors}:b};Fna(iD,Error);iD.prototype.rethrow=function(b){if((this||vn).message=b+" at: "+((this||vn).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||vn,iD),!(this||vn).stack)try{throw Error((this||vn).message);}catch(e){(this||vn).stack=e.stack}return this||vn};var KK={},R1=!1,Eh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,uR={},U1=!1,Zg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tR={},
S1=!1,my={},X1=!1,vR={},W1=!1,wR={},Z1=!1,ny="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zR={},a2=!1,yR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xR={},$1=!1,AR={},c2=!1,wn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,DR={},e2=!1,CR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,BR={},d2=!1,ER={},f2=!1,im=LK(),i8=im.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),Gna=im.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),bV=im.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),Hna=im.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(bV),this.key("subjectPublicKey").bitstr())}),Ina=im.define("RelativeDistinguishedName",function(){this.setof(Gna)}),
Jna=im.define("RDNSequence",function(){this.seqof(Ina)}),j8=im.define("Name",function(){this.choice({rdnSequence:this.use(Jna)})}),Kna=im.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i8),this.key("notAfter").use(i8))}),Lna=im.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),Mna=im.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),
this.key("signature").use(bV),this.key("issuer").use(j8),this.key("validity").use(Kna),this.key("subject").use(j8),this.key("subjectPublicKeyInfo").use(Hna),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Lna).optional())}),Nna=im.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(Mna),this.key("signatureAlgorithm").use(bV),this.key("signatureValue").bitstr())}),
Vt={};Vt.certificate=Nna;var Ona=im.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Vt.RSAPrivateKey=Ona;var Pna=im.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Vt.RSAPublicKey=
Pna;var Qna=im.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(k8),this.key("subjectPublicKey").bitstr())});Vt.PublicKey=Qna;var k8=im.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),Rna=im.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(k8),this.key("subjectPrivateKey").octstr())});Vt.PrivateKey=Rna;var Sna=im.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
Vt.EncryptedPrivateKey=Sna;var Tna=im.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Vt.DSAPrivateKey=Tna;Vt.DSAparam=im.define("DSAparam",function(){this.int()});var Vna=im.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(Una),this.key("publicKey").optional().explicit(1).bitstr())});
Vt.ECPrivateKey=Vna;var Una=im.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});Vt.signature=im.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var ofa=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,qfa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,pfa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,MK=xj.Buffer,Aq=Vt,rfa={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},tfa=or,sfa=YM,GR=xj.Buffer;jD.signature=Aq.signature;var l8={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},cV={},jp=Ni.Buffer,GA=A7,Wna=Xw.ec,NK=Um;(cV=function(b,e,m,a,g){e=jD(e);if(e.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(l,r){var v=l8[r.curve.join(".")];if(!v)throw Error("unknown curve "+r.curve.join("."));l=(new Wna(v)).keyFromPrivate(r.privateKey).sign(l);return new jp(l.toDER())}(b,e)}if("dsa"===e.type){if("dsa"!==a)throw Error("wrong private key type");
return function(l,r,v){var y=r.params.priv_key,A=r.params.p,E=r.params.q;r=r.params.g;var F=new NK(0),H=HR(l,E).mod(E);var I=!1;for(l=h2(y,E,l,v);!1===I;){F=I=i2(E,l,v);var M=E;F=r.toRed(NK.mont(A)).redPow(F).fromRed().mod(M);0===(I=I.invm(E).imul(H.add(y.mul(F))).mod(E)).cmpn(0)&&(I=!1,F=new NK(0))}v=I;y=F.toArray();v=v.toArray();128&y[0]&&(y=[0].concat(y));128&v[0]&&(v=[0].concat(v));A=[48,y.length+v.length+4,2,y.length];return A=A.concat(y,[2,v.length],v),new jp(A)}(b,e,m)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=jp.concat([g,b]);a=e.modulus.byteLength();for(m=[0,1];b.length+m.length+1<a;)m.push(255);m.push(0);for(a=-1;++a<b.length;)m.push(b[a]);return FK(m,e)}).getKey=h2;cV.makeKey=i2;var dV=Ni.Buffer,uH=Um,Xna=Xw.ec,gm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,jN=Ni.Buffer,k2=pH,OK=MA,m8=zi,Yna=cV,Zna=function(b,e,m,a,g){m=jD(m);if("ec"===m.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(v,
y,A){var E=l8[A.data.algorithm.curve.join(".")];if(!E)throw Error("unknown curve "+A.data.algorithm.curve.join("."));return(new Xna(E)).verify(y,v,A.data.subjectPrivateKey.data)}(b,e,m)}if("dsa"===m.type){if("dsa"!==a)throw Error("wrong public key type");return function(v,y,A){var E=A.data.p,F=A.data.q,H=A.data.g;A=A.data.pub_key;var I=jD.signature.decode(v,"der");v=I.s;I=I.r;j2(v,F);j2(I,F);var M=uH.mont(E);v=v.invm(F);return 0===H.toRed(M).redPow((new uH(y)).mul(v).mod(F)).fromRed().mul(A.toRed(M).redPow(I.mul(v).mod(F)).fromRed()).mod(E).mod(F).cmp(I)}(b,
e,m)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");e=dV.concat([g,e]);g=m.modulus.byteLength();a=[1];for(var l=0;e.length+a.length+2<g;)a.push(255),l++;a.push(0);for(var r=-1;++r<e.length;)a.push(e[r]);a=new dV(a);e=uH.mont(m.modulus);b=(b=(new uH(b)).toRed(e)).redPow(new uH(m.publicExponent));b=new dV(b.fromRed().toArray());e=8>l?1:0;g=Math.min(b.length,a.length);b.length!==a.length&&(e=1);for(r=-1;++r<g;)e|=b[r]^a[r];return 0===e},HA=B7;Object.keys(HA).forEach(function(b){HA[b].id=
new jN(HA[b].id,"hex");HA[b.toLowerCase()]=HA[b]});m8(eG,OK.Writable);eG.prototype._write=function(b,e,m){(this||gm)._hash.update(b);m()};eG.prototype.update=function(b,e){return"string"==typeof b&&(b=new jN(b,e)),(this||gm)._hash.update(b),this||gm};eG.prototype.sign=function(b,e){this.end();var m=(this||gm)._hash.digest();b=Yna(m,b,(this||gm)._hashType,(this||gm)._signType,(this||gm)._tag);return e?b.toString(e):b};m8(fG,OK.Writable);fG.prototype._write=function(b,e,m){(this||gm)._hash.update(b);
m()};fG.prototype.update=function(b,e){return"string"==typeof b&&(b=new jN(b,e)),(this||gm)._hash.update(b),this||gm};fG.prototype.verify=function(b,e,m){"string"==typeof e&&(e=new jN(e,m));this.end();m=(this||gm)._hash.digest();return Zna(e,m,b,(this||gm)._signType,(this||gm)._tag)};var xn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hw=Ni.Buffer,ufa=Xw,$na=Um,pr={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};pr.p224=pr.secp224r1;pr.p256=pr.secp256r1=pr.prime256v1;pr.p192=pr.secp192r1=pr.prime192v1;pr.p384=pr.secp384r1;pr.p521=pr.secp521r1;IA.prototype.generateKeys=function(b,e){return(this||xn).keys=(this||xn).curve.genKeyPair(),this.getPublicKey(b,e)};IA.prototype.computeSecret=function(b,e,m){return e=e||"utf8",Hw.isBuffer(b)||(b=new Hw(b,
e)),IR((this||xn).curve.keyFromPublic(b).getPublic().mul((this||xn).keys.getPrivate()).getX(),m,(this||xn).curveType.byteLength)};IA.prototype.getPublicKey=function(b,e){var m=(this||xn).keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(m[m.length-1]%2?m[0]=7:m[0]=6),IR(m,b)};IA.prototype.getPrivateKey=function(b){return IR((this||xn).keys.getPrivate(),b)};IA.prototype.setPublicKey=function(b,e){return e=e||"utf8",Hw.isBuffer(b)||(b=new Hw(b,e)),(this||xn).keys._importPublic(b),this||xn};IA.prototype.setPrivateKey=
function(b,e){e=e||"utf8";Hw.isBuffer(b)||(b=new Hw(b,e));b=new $na(b);return b=b.toString(16),(this||xn).keys=(this||xn).curve.genKeyPair(),(this||xn).keys._importPrivate(b),this||xn};var eV=xj.Buffer,kN=function(b,e){for(var m,a=eV.alloc(0),g=0;a.length<e;){m=g++;var l=eV.allocUnsafe(4);m=(l.writeUInt32BE(m,0),l);a=eV.concat([a,pH("sha1").update(b).update(m).digest()])}return a.slice(0,e)},lN=function(b,e){for(var m=b.length,a=-1;++a<m;)b[a]^=e[a];return b},n8=Um,aoa=xj.Buffer,o8=function(b,e){return aoa.from(b.toRed(n8.mont(e.modulus)).redPow(new n8(e.publicExponent)).fromRed().toArray())},
fV=Um,Wt=xj.Buffer,p8=Um,vH=xj.Buffer,YD={publicEncrypt:function(b,e,m){var a=b.padding?b.padding:m?1:4;b=jD(b);if(4===a)e=function(g,l){g=g.modulus.byteLength();var r=l.length,v=pH("sha1").update(Wt.alloc(0)).digest(),y=v.length,A=2*y;if(r>g-A-2)throw Error("message too long");A=Wt.alloc(g-r-A-2);var E=g-y-1;r=Ky(y);l=lN(Wt.concat([v,A,Wt.alloc(1,1),l],E),kN(r,E));y=lN(r,kN(l,y));return new fV(Wt.concat([Wt.alloc(1),y,l],g))}(b,e);else if(1===a)e=function(g,l,r){var v=l.length;g=g.modulus.byteLength();
if(v>g-11)throw Error("message too long");if(r)var y=Wt.alloc(g-v-3,255);else{v=g-v-3;for(var A=Wt.allocUnsafe(v),E=0,F=Ky(2*v),H=0;E<v;)H===F.length&&(F=Ky(2*v),H=0),(y=F[H++])&&(A[E++]=y);y=A}return new fV(Wt.concat([Wt.from([0,r?1:2]),y,Wt.alloc(1),l],g))}(b,e,m);else{if(3!==a)throw Error("unknown padding");if(0<=(e=new fV(e)).cmp(b.modulus))throw Error("data too long for modulus");}return m?FK(e,b):o8(e,b)},privateDecrypt:function(b,e,m){var a=b.padding?b.padding:m?1:4;b=jD(b);var g=b.modulus.byteLength();
if(e.length>g||0<=(new p8(e)).cmp(b.modulus))throw Error("decryption error");e=m?o8(new p8(e),b):FK(e,b);var l=vH.alloc(g-e.length);if(e=vH.concat([l,e],g),4===a)return function(r,v){var y=r.modulus.byteLength(),A=pH("sha1").update(vH.alloc(0)).digest();r=A.length;if(0!==v[0])throw Error("decryption error");var E=v.slice(1,r+1);v=v.slice(r+1);E=lN(E,kN(v,r));y=lN(v,kN(E,y-r-1));v=y.slice(0,r);A=vH.from(A);v=vH.from(v);E=0;var F=A.length;A.length!==v.length&&(E++,F=Math.min(A.length,v.length));for(var H=
-1;++H<F;)E+=A[H]^v[H];if(E)throw Error("decryption error");for(;0===y[r];)r++;if(1!==y[r++])throw Error("decryption error");return y.slice(r)}(b,e);if(1===a)return function(r,v,y){r=v.slice(0,2);for(var A=2,E=0;0!==v[A++];)if(A>=v.length){E++;break}var F=v.slice(2,A-1);("0002"!==r.toString("hex")&&!y||"0001"!==r.toString("hex")&&y)&&E++;8>F.length&&E++;if(E)throw Error("decryption error");return v.slice(A)}(0,e,m);if(3===a)return e;throw Error("unknown padding");},privateEncrypt:function(b,e){return YD.publicEncrypt(b,
e,!0)},publicDecrypt:function(b,e){return YD.privateDecrypt(b,e,!0)}},mN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,gV,hV,JR=uj,t2=Ky,q8=xj.Buffer,q2=xj.kMaxLength,KR=mN.crypto||mN.msCrypto,p2=Math.pow(2,32)-1;KR&&KR.getRandomValues||!JR.browser?(gV=function(b,e,m,a){if(!(q8.isBuffer(b)||b instanceof mN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)a=e,e=0,m=b.length;else if("function"==typeof m)a=m,m=b.length-
e;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return o2(e,b.length),r2(m,e,b.length),s2(b,e,m,a)},hV=function(b,e,m){void 0===e&&(e=0);if(!(q8.isBuffer(b)||b instanceof mN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');o2(e,b.length);void 0===m&&(m=b.length-e);return r2(m,e,b.length),s2(b,e,m)}):(gV=n2,hV=n2);var uh={};uh.randomBytes=uh.rng=uh.pseudoRandomBytes=uh.prng=Ky;uh.createHash=uh.Hash=pH;uh.createHmac=uh.Hmac=A7;var boa=
Object.keys(B7),coa="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(boa);uh.getHashes=function(){return coa};uh.pbkdf2=YM.pbkdf2;uh.pbkdf2Sync=YM.pbkdf2Sync;uh.Cipher=N7;uh.createCipher=Yma;uh.Cipheriv=hR;uh.createCipheriv=hR;uh.Decipher=O7;uh.createDecipher=Zma;uh.Decipheriv=jR;uh.createDecipheriv=jR;uh.getCiphers=P7;uh.listCiphers=$ma;uh.DiffieHellmanGroup=hna;uh.createDiffieHellmanGroup=U7;uh.getDiffieHellman=V7;uh.createDiffieHellman=ina;uh.DiffieHellman=W7;uh.createSign=l2;uh.Sign=
l2;uh.createVerify=m2;uh.Verify=m2;uh.createECDH=function(b){return new IA(b)};uh.publicEncrypt=YD.publicEncrypt;uh.privateEncrypt=YD.privateEncrypt;uh.publicDecrypt=YD.publicDecrypt;uh.privateDecrypt=YD.privateDecrypt;uh.randomFill=gV;uh.randomFillSync=hV;uh.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};uh.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,
DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Gv={};Object.defineProperty(Gv,"__esModule",{value:!0});Gv.default=function(){return doa.default.randomFillSync(eoa)};var doa=uh&&uh.__esModule?uh:{default:uh},eoa=new Uint8Array(16),Pp={};Object.defineProperty(Pp,"__esModule",
{value:!0});Pp.default=void 0;for(var Lo=[],iV=0;256>iV;++iV)Lo.push((iV+256).toString(16).substr(1));Pp.default=function(b,e){e=e||0;return(Lo[b[e+0]]+Lo[b[e+1]]+Lo[b[e+2]]+Lo[b[e+3]]+"-"+Lo[b[e+4]]+Lo[b[e+5]]+"-"+Lo[b[e+6]]+Lo[b[e+7]]+"-"+Lo[b[e+8]]+Lo[b[e+9]]+"-"+Lo[b[e+10]]+Lo[b[e+11]]+Lo[b[e+12]]+Lo[b[e+13]]+Lo[b[e+14]]+Lo[b[e+15]]).toLowerCase()};var nN={};Object.defineProperty(nN,"__esModule",{value:!0});nN.default=void 0;var foa=Gv&&Gv.__esModule?Gv:{default:Gv},goa=Pp&&Pp.__esModule?Pp:{default:Pp},
r8,jV,kV=0,lV=0;nN.default=function(b,e,m){m=e&&m||0;var a=e||[];b=b||{};var g=b.node||r8,l=void 0!==b.clockseq?b.clockseq:jV;if(null==g||null==l){var r=b.random||(b.rng||foa.default)();null==g&&(g=r8=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]);null==l&&(l=jV=(r[6]<<8|r[7])&16383)}r=void 0!==b.msecs?b.msecs:Date.now();var v=void 0!==b.nsecs?b.nsecs:lV+1,y=r-kV+(v-lV)/1E4;0>y&&void 0===b.clockseq&&(l=l+1&16383);(0>y||r>kV)&&void 0===b.nsecs&&(v=0);if(1E4<=v)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
kV=r;lV=v;jV=l;r+=122192928E5;b=(1E4*(r&268435455)+v)%4294967296;a[m++]=b>>>24&255;a[m++]=b>>>16&255;a[m++]=b>>>8&255;a[m++]=b&255;b=r/4294967296*1E4&268435455;a[m++]=b>>>8&255;a[m++]=b&255;a[m++]=b>>>24&15|16;a[m++]=b>>>16&255;a[m++]=l>>>8|128;a[m++]=l&255;for(l=0;6>l;++l)a[m+l]=g[l];return e||(0,goa.default)(a)};var Gq={};Object.defineProperty(Gq,"__esModule",{value:!0});Gq.default=function(b,e,m){function a(g,l,r,v){v=r&&v||0;if("string"===typeof g){g=unescape(encodeURIComponent(g));for(var y=
[],A=0;A<g.length;++A)y.push(g.charCodeAt(A));g=y}"string"===typeof l&&(l=vfa(l));if(!Array.isArray(g))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=m(l.concat(g));l[6]=l[6]&15|e;l[8]=l[8]&63|128;if(r)for(g=0;16>g;++g)r[v+g]=l[g];return r||(0,hoa.default)(l)}try{a.name=b}catch(g){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};
Gq.URL=Gq.DNS=void 0;var hoa=Pp&&Pp.__esModule?Pp:{default:Pp};Gq.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Gq.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var tB={},s8=Ni.Buffer;Object.defineProperty(tB,"__esModule",{value:!0});tB.default=void 0;var ioa=uh&&uh.__esModule?uh:{default:uh};tB.default=function(b){Array.isArray(b)?b=s8.from(b):"string"===typeof b&&(b=s8.from(b,"utf8"));return ioa.default.createHash("md5").update(b).digest()};var oN={};Object.defineProperty(oN,"__esModule",{value:!0});
oN.default=void 0;var joa=Gq&&Gq.__esModule?Gq:{default:Gq},koa=tB&&tB.__esModule?tB:{default:tB},loa=(0,joa.default)("v3",48,koa.default);oN.default=loa;var pN={};Object.defineProperty(pN,"__esModule",{value:!0});pN.default=void 0;var moa=Gv&&Gv.__esModule?Gv:{default:Gv},noa=Pp&&Pp.__esModule?Pp:{default:Pp};pN.default=function(b,e,m){"string"===typeof b&&(e="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||moa.default)();b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(e){m=m||0;for(var a=
0;16>a;++a)e[m+a]=b[a];return e}return(0,noa.default)(b)};var uB={},t8=Ni.Buffer;Object.defineProperty(uB,"__esModule",{value:!0});uB.default=void 0;var ooa=uh&&uh.__esModule?uh:{default:uh};uB.default=function(b){Array.isArray(b)?b=t8.from(b):"string"===typeof b&&(b=t8.from(b,"utf8"));return ooa.default.createHash("sha1").update(b).digest()};var qN={};Object.defineProperty(qN,"__esModule",{value:!0});qN.default=void 0;var poa=Gq&&Gq.__esModule?Gq:{default:Gq},qoa=uB&&uB.__esModule?uB:{default:uB},
roa=(0,poa.default)("v5",80,qoa.default);qN.default=roa;var vB={};Object.defineProperty(vB,"__esModule",{value:!0});Object.defineProperty(vB,"v1",{enumerable:!0,get:function(){return soa.default}});Object.defineProperty(vB,"v3",{enumerable:!0,get:function(){return toa.default}});Object.defineProperty(vB,"v4",{enumerable:!0,get:function(){return uoa.default}});Object.defineProperty(vB,"v5",{enumerable:!0,get:function(){return voa.default}});var soa=PK(nN),toa=PK(oN),uoa=PK(pN),voa=PK(qN),Mo={};Object.defineProperty(Mo,
"__esModule",{value:!0});Mo.atob=function(b){return u8(b)};Mo.btoa=function(b){return v8(b)};Mo.base64StringToBlobOrBuffer=function(b,e){return w2(u8(b),e)};Mo.binaryStringToArrayBuffer=v2;Mo.binaryStringToBlobOrBuffer=w2;Mo.blob=u2;Mo.blobOrBufferToBase64=function(b,e){y2(b,function(m){e(v8(m))})};Mo.blobOrBufferToBinaryString=y2;Mo.readAsArrayBuffer=function(b,e){var m=new FileReader;m.onloadend=function(a){a=a.target.result||new ArrayBuffer(0);e(a)};m.readAsArrayBuffer(b)};Mo.readAsBinaryString=
x2;Mo.typedBuffer=function(){};var u8=Mo.atob,v8=Mo.btoa,Vh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,woa={},wH=woa=function(b){function e(E,F){var H=E[0],I=E[1],M=E[2],N=E[3];H+=(I&M|~I&N)+F[0]-680876936|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[1]-389564586|0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[2]+606105819|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|~M&H)+F[3]-1044525330|0;I=(I<<22|I>>>10)+M|0;H+=(I&M|~I&N)+F[4]-176418897|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[5]+1200080426|
0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[6]-1473231341|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|~M&H)+F[7]-45705983|0;I=(I<<22|I>>>10)+M|0;H+=(I&M|~I&N)+F[8]+1770035416|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[9]-1958414417|0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[10]-42063|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|~M&H)+F[11]-1990404162|0;I=(I<<22|I>>>10)+M|0;H+=(I&M|~I&N)+F[12]+1804603682|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[13]-40341101|0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[14]-1502002290|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|
~M&H)+F[15]+1236535329|0;I=(I<<22|I>>>10)+M|0;H+=(I&N|M&~N)+F[1]-165796510|0;H=(H<<5|H>>>27)+I|0;N+=(H&M|I&~M)+F[6]-1069501632|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[11]+643717713|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[0]-373897302|0;I=(I<<20|I>>>12)+M|0;H+=(I&N|M&~N)+F[5]-701558691|0;H=(H<<5|H>>>27)+I|0;N+=(H&M|I&~M)+F[10]+38016083|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[15]-660478335|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[4]-405537848|0;I=(I<<20|I>>>12)+M|0;H+=(I&N|M&~N)+F[9]+568446438|0;H=(H<<5|H>>>
27)+I|0;N+=(H&M|I&~M)+F[14]-1019803690|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[3]-187363961|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[8]+1163531501|0;I=(I<<20|I>>>12)+M|0;H+=(I&N|M&~N)+F[13]-1444681467|0;H=(H<<5|H>>>27)+I|0;N+=(H&M|I&~M)+F[2]-51403784|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[7]+1735328473|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[12]-1926607734|0;I=(I<<20|I>>>12)+M|0;H+=(I^M^N)+F[5]-378558|0;H=(H<<4|H>>>28)+I|0;N+=(H^I^M)+F[8]-2022574463|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[11]+1839030562|0;
M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[14]-35309556|0;I=(I<<23|I>>>9)+M|0;H+=(I^M^N)+F[1]-1530992060|0;H=(H<<4|H>>>28)+I|0;N+=(H^I^M)+F[4]+1272893353|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[7]-155497632|0;M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[10]-1094730640|0;I=(I<<23|I>>>9)+M|0;H+=(I^M^N)+F[13]+681279174|0;H=(H<<4|H>>>28)+I|0;N+=(H^I^M)+F[0]-358537222|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[3]-722521979|0;M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[6]+76029189|0;I=(I<<23|I>>>9)+M|0;H+=(I^M^N)+F[9]-640364487|0;H=(H<<4|H>>>
28)+I|0;N+=(H^I^M)+F[12]-421815835|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[15]+530742520|0;M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[2]-995338651|0;I=(I<<23|I>>>9)+M|0;H+=(M^(I|~N))+F[0]-198630844|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[7]+1126891415|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[14]-1416354905|0;M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[5]-57434055|0;I=(I<<21|I>>>11)+M|0;H+=(M^(I|~N))+F[12]+1700485571|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[3]-1894986606|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[10]-1051523|0;
M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[1]-2054922799|0;I=(I<<21|I>>>11)+M|0;H+=(M^(I|~N))+F[8]+1873313359|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[15]-30611744|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[6]-1560198380|0;M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[13]+1309151649|0;I=(I<<21|I>>>11)+M|0;H+=(M^(I|~N))+F[4]-145523070|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[11]-1120210379|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[2]+718787259|0;M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[9]-343485551|0;E[0]=H+E[0]|0;E[1]=((I<<21|I>>>
11)+M|0)+E[1]|0;E[2]=M+E[2]|0;E[3]=N+E[3]|0}function m(E){var F=[],H;for(H=0;64>H;H+=4)F[H>>2]=E.charCodeAt(H)+(E.charCodeAt(H+1)<<8)+(E.charCodeAt(H+2)<<16)+(E.charCodeAt(H+3)<<24);return F}function a(E){var F=[],H;for(H=0;64>H;H+=4)F[H>>2]=E[H]+(E[H+1]<<8)+(E[H+2]<<16)+(E[H+3]<<24);return F}function g(E){var F=E.length,H=[1732584193,-271733879,-1732584194,271733878],I;for(I=64;I<=F;I+=64)e(H,m(E.substring(I-64,I)));E=E.substring(I-64);var M=E.length;var N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(I=
0;I<M;I+=1)N[I>>2]|=E.charCodeAt(I)<<(I%4<<3);N[I>>2]|=128<<(I%4<<3);if(55<I)for(e(H,N),I=0;16>I;I+=1)N[I]=0;F=(8*F).toString(16).match(/(.*?)(.{0,8})$/);E=parseInt(F[2],16);F=parseInt(F[1],16)||0;N[14]=E;N[15]=F;e(H,N);return H}function l(E){var F;for(F=0;F<E.length;F+=1){var H=F,I,M=E[F],N="";for(I=0;4>I;I+=1)N+=A[M>>8*I+4&15]+A[M>>8*I&15];E[H]=N}return E.join("")}function r(E){/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E)));return E}function v(E){var F=[],H=E.length,I;for(I=0;I<
H-1;I+=2)F.push(parseInt(E.substr(I,2),16));return String.fromCharCode.apply(String,F)}function y(){this.reset()}var A="0123456789abcdef".split("");l(g("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function E(F,H){F=F|0||0;return 0>F?Math.max(F+H,0):Math.min(F,H)}ArrayBuffer.prototype.slice=function(F,H){var I=(this||Vh).byteLength;F=E(F,I);var M=I;H!==b&&(M=E(H,I));if(F>M)return new ArrayBuffer(0);M-=F;H=new ArrayBuffer(M);I=new Uint8Array(H);F=new Uint8Array(this||
Vh,F,M);I.set(F);return H}}();y.prototype.append=function(E){this.appendBinary(r(E));return this||Vh};y.prototype.appendBinary=function(E){(this||Vh)._buff+=E;(this||Vh)._length+=E.length;E=(this||Vh)._buff.length;var F;for(F=64;F<=E;F+=64)e((this||Vh)._hash,m((this||Vh)._buff.substring(F-64,F)));(this||Vh)._buff=(this||Vh)._buff.substring(F-64);return this||Vh};y.prototype.end=function(E){var F=(this||Vh)._buff,H=F.length,I,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(I=0;I<H;I+=1)M[I>>2]|=F.charCodeAt(I)<<
(I%4<<3);this._finish(M,H);F=l((this||Vh)._hash);E&&(F=v(F));this.reset();return F};y.prototype.reset=function(){(this||Vh)._buff="";(this||Vh)._length=0;(this||Vh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Vh};y.prototype.getState=function(){return{buff:(this||Vh)._buff,length:(this||Vh)._length,hash:(this||Vh)._hash.slice()}};y.prototype.setState=function(E){(this||Vh)._buff=E.buff;(this||Vh)._length=E.length;(this||Vh)._hash=E.hash;return this||Vh};y.prototype.destroy=function(){delete (this||
Vh)._hash;delete (this||Vh)._buff;delete (this||Vh)._length};y.prototype._finish=function(E,F){E[F>>2]|=128<<(F%4<<3);if(55<F)for(e((this||Vh)._hash,E),F=0;16>F;F+=1)E[F]=0;var H=8*(this||Vh)._length;H=H.toString(16).match(/(.*?)(.{0,8})$/);F=parseInt(H[2],16);H=parseInt(H[1],16)||0;E[14]=F;E[15]=H;e((this||Vh)._hash,E)};y.hash=function(E,F){return y.hashBinary(r(E),F)};y.hashBinary=function(E,F){E=g(E);E=l(E);return F?v(E):E};y.ArrayBuffer=function(){this.reset()};y.ArrayBuffer.prototype.append=
function(E){var F=(this||Vh)._buff.buffer,H=new Uint8Array(F.byteLength+E.byteLength);H.set(new Uint8Array(F));H.set(new Uint8Array(E),F.byteLength);F=H.length;(this||Vh)._length+=E.byteLength;for(E=64;E<=F;E+=64)e((this||Vh)._hash,a(H.subarray(E-64,E)));(this||Vh)._buff=E-64<F?new Uint8Array(H.buffer.slice(E-64)):new Uint8Array(0);return this||Vh};y.ArrayBuffer.prototype.end=function(E){var F=(this||Vh)._buff,H=F.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M;for(M=0;M<H;M+=1)I[M>>2]|=F[M]<<(M%4<<
3);this._finish(I,H);F=l((this||Vh)._hash);E&&(F=v(F));this.reset();return F};y.ArrayBuffer.prototype.reset=function(){(this||Vh)._buff=new Uint8Array(0);(this||Vh)._length=0;(this||Vh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Vh};y.ArrayBuffer.prototype.getState=function(){var E=y.prototype.getState.call(this||Vh);E.buff=String.fromCharCode.apply(null,new Uint8Array(E.buff));return E};y.ArrayBuffer.prototype.setState=function(E){var F=E.buff,H=F.length,I=new ArrayBuffer(H);
I=new Uint8Array(I);var M;for(M=0;M<H;M+=1)I[M]=F.charCodeAt(M);E.buff=I;return y.prototype.setState.call(this||Vh,E)};y.ArrayBuffer.prototype.destroy=y.prototype.destroy;y.ArrayBuffer.prototype._finish=y.prototype._finish;y.ArrayBuffer.hash=function(E,F){var H=new Uint8Array(E),I=H.length;E=[1732584193,-271733879,-1732584194,271733878];var M;for(M=64;M<=I;M+=64)e(E,a(H.subarray(M-64,M)));H=M-64<I?H.subarray(M-64):new Uint8Array(0);var N=H.length;var X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(M=0;M<
N;M+=1)X[M>>2]|=H[M]<<(M%4<<3);X[M>>2]|=128<<(M%4<<3);if(55<M)for(e(E,X),M=0;16>M;M+=1)X[M]=0;I=(8*I).toString(16).match(/(.*?)(.{0,8})$/);H=parseInt(I[2],16);I=parseInt(I[1],16)||0;X[14]=H;X[15]=I;e(E,X);E=l(E);return F?v(E):E};return y}(),ZD={};Object.defineProperty(ZD,"__esModule",{value:!0});var z2=Mo,mV=wH&&"object"===typeof wH&&"default"in wH?wH["default"]:wH,xoa=self.setImmediate||self.setTimeout;ZD.binaryMd5=function(b,e){function m(){xoa(g)}function a(){var H=E.end(!0);H=z2.btoa(H);e(H);
E.destroy()}function g(){var H=A*v,I=H+v;A++;A<y?F(E,b,H,I,m):F(E,b,H,I,a)}var l="string"===typeof b,r=l?b.length:b.size,v=Math.min(32768,r),y=Math.ceil(r/v),A=0,E=l?new mV:new mV.ArrayBuffer,F=l?yfa:xfa;g()};ZD.stringMd5=function(b){return mV.hash(b)};var Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});var LR=QK(yU),yoa=QK(xl),w8=QK(Pj),SK=QK(bv),A2=Function.prototype.toString,zfa=A2.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var RK=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){RK=
!1}yoa(kD,SK);kD.prototype.addListener=function(b,e,m,a){function g(){if(l._listeners[e])if(r)r="waiting";else{r=!0;var v=MR(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));m.changes(v).on("change",function(y){y.seq>a.since&&!a.cancelled&&(a.since=y.seq,a.onChange(y))}).on("complete",function(){"waiting"===r&&w8(g);r=!1}).on("error",function(){r=!1})}}if(!this._listeners[e]){var l=this,r=!1;this._listeners[e]=g;this.on(b,g)}};kD.prototype.removeListener=
function(b,e){e in this._listeners&&(SK.prototype.removeListener.call(this,b,this._listeners[e]),delete this._listeners[e])};kD.prototype.notifyLocalWindows=function(b){RK&&(localStorage[b]="a"===localStorage[b]?"b":"a")};kD.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var zoa="function"===typeof Object.assign?Object.assign:function(b){for(var e=Object(b),m=1;m<arguments.length;m++){var a=arguments[m];if(null!=a)for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(e[g]=
a[g])}return e},Aoa=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},x8="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Boa=/(?:^|&)([^&=]*)=?([^&]*)/g,Coa=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Doa=vB.v4;Ch.adapterFun=function(b,e){return C2(LR(function(m){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;Afa(a,b,m);return this.taskqueue.isReady?e.apply(this,m):new Promise(function(g,l){a.taskqueue.addTask(function(r){r?l(r):g(a[b].apply(a,m))})})}))};Ch.assign=zoa;Ch.bulkGetShim=function(b,e,m){function a(){var I=[];E.forEach(function(M){M.docs.forEach(function(N){I.push({id:M.id,docs:[N]})})});
m(null,{results:I})}function g(){if(!(H>=F.length)){var I=F.slice(H,Math.min(H+6,F.length));l(I,H);H+=I.length}}function l(I,M){I.forEach(function(N,X){var W=M+X;X=v.get(N);var ea=MR(X[0],["atts_since","attachments"]);ea.open_revs=X.map(function(Ka){return Ka.rev});ea.open_revs=ea.open_revs.filter(D2);var Aa=D2;0===ea.open_revs.length&&(delete ea.open_revs,Aa=Bfa);["revs","attachments","binary","ajax","latest"].forEach(function(Ka){Ka in e&&(ea[Ka]=e[Ka])});b.get(N,ea,function(Ka,K){Ka=Ka?[{error:Ka}]:
Aa(K);E[W]={id:N,docs:Ka};++A===y&&a();g()})})}var r=e.docs,v=new Jy.Map;r.forEach(function(I){v.has(I.id)?v.get(I.id).push(I):v.set(I.id,[I])});var y=v.size,A=0,E=Array(y),F=[];v.forEach(function(I,M){F.push(M)});var H=0;g()};Ch.changesHandler=kD;Ch.clone=gG;Ch.defaultBackOff=function(b){var e=0;b||(e=2E3);b=parseInt(b,10)||0;e=parseInt(e,10);e=e!==e||e<=b?(b||1)<<1:e+1;6E5<e&&(b=3E5,e=6E5);return~~((e-b)*Math.random()+b)};Ch.explainError=function(b,e){NR("info","The above "+b+" is totally normal. "+
e)};Ch.filterChange=function(b){var e={},m=b.filter&&"function"===typeof b.filter;e.query=b.query_params;return function(a){a.doc||(a.doc={});var g;if(g=m)try{g=!(0,b.filter)(a.doc,e)}catch(r){g=Vg.createError(Vg.BAD_REQUEST,"Filter function threw: "+r.toString())}if("object"===typeof g)return g;if(g)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var l in a.doc._attachments)a.doc._attachments.hasOwnProperty(l)&&(a.doc._attachments[l].stub=!0);return!0}};Ch.flatten=function(b){for(var e=
[],m=0,a=b.length;m<a;m++)e=e.concat(b[m]);return e};Ch.functionName=Aoa;Ch.guardedConsole=NR;Ch.hasLocalStorage=function(){return RK};Ch.invalidIdError=function(b){var e;b?"string"!==typeof b?e=Vg.createError(Vg.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(e=Vg.createError(Vg.RESERVED_ID)):e=Vg.createError(Vg.MISSING_ID);if(e)throw e;};Ch.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(NR("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};Ch.listenerCount=function(b,e){return"listenerCount"in b?b.listenerCount(e):SK.listenerCount(b,e)};Ch.nextTick=w8;Ch.normalizeDdocFunctionName=function(b){return(b=E2(b))?b.join("/"):null};Ch.once=B2;Ch.parseDdocFunctionName=E2;Ch.parseUri=function(b){b=Coa.exec(b);for(var e={},m=14;m--;){var a=x8[m],g=b[m]||"",l=-1!==["user","password"].indexOf(a);e[a]=l?decodeURIComponent(g):g}e.queryKey={};e[x8[12]].replace(Boa,function(r,v,y){v&&(e.queryKey[v]=y)});return e};Ch.pick=MR;
Ch.rev=function(b,e){b=gG(b);if(!e)return vB.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return ZD.stringMd5(JSON.stringify(b))};Ch.scopeEval=function(b,e){var m=[],a=[],g;for(g in e)e.hasOwnProperty(g)&&(m.push(g),a.push(e[g]));m.push(b);return Function.apply(null,m).apply(null,a)};Ch.toPromise=C2;Ch.upsert=F2;Ch.uuid=Doa;var y8={};y8=function(){for(var b={},e=0;e<arguments.length;e++){var m=arguments[e],a;for(a in m)Eoa.call(m,a)&&(b[a]=m[a])}return b};var Eoa=Object.prototype.hasOwnProperty,
Qy=y8,z8={};z8=function(b){for(var e=1;e<arguments.length;e++){var m=arguments[e],a;for(a in m)Foa.call(m,a)&&(b[a]=m[a])}return b};for(var Foa=Object.prototype.hasOwnProperty,Goa={},Hoa=z8,A8=Goa=function(){var b=Qy.apply(null,arguments);return Hoa(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:Qy(b.additionalMethods)})},iv=[],Us=[],Ioa="undefined"!==typeof Uint8Array?Uint8Array:Array,$D=0;64>$D;++$D)iv[$D]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[$D],Us["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt($D)]=$D;Us[45]=62;Us[95]=63;var TK={byteLength:function(b){b=G2(b);var e=b[1];return 3*(b[0]+e)/4-e},toByteArray:function(b){var e=G2(b);var m=
e[0];e=e[1];var a=new Ioa(3*(m+e)/4-e),g=0,l=0<e?m-4:m,r;for(r=0;r<l;r+=4)m=Us[b.charCodeAt(r)]<<18|Us[b.charCodeAt(r+1)]<<12|Us[b.charCodeAt(r+2)]<<6|Us[b.charCodeAt(r+3)],a[g++]=m>>16&255,a[g++]=m>>8&255,a[g++]=m&255;2===e&&(m=Us[b.charCodeAt(r)]<<2|Us[b.charCodeAt(r+1)]>>4,a[g++]=m&255);1===e&&(m=Us[b.charCodeAt(r)]<<10|Us[b.charCodeAt(r+1)]<<4|Us[b.charCodeAt(r+2)]>>2,a[g++]=m>>8&255,a[g++]=m&255);return a},fromByteArray:function(b){for(var e=b.length,m=e%3,a=[],g=0,l=e-m;g<l;g+=16383)a.push(Efa(b,
g,g+16383>l?l:g+16383));1===m?(b=b[e-1],a.push(iv[b>>2]+iv[b<<4&63]+"==")):2===m&&(b=(b[e-2]<<8)+b[e-1],a.push(iv[b>>10]+iv[b>>4&63]+iv[b<<2&63]+"="));return a.join("")}},lD={read:function(b,e,m,a,g){var l=8*g-a-1;var r=(1<<l)-1,v=r>>1,y=-7;g=m?g-1:0;var A=m?-1:1,E=b[e+g];g+=A;m=E&(1<<-y)-1;E>>=-y;for(y+=l;0<y;m=256*m+b[e+g],g+=A,y-=8);l=m&(1<<-y)-1;m>>=-y;for(y+=a;0<y;l=256*l+b[e+g],g+=A,y-=8);if(0===m)m=1-v;else{if(m===r)return l?NaN:Infinity*(E?-1:1);l+=Math.pow(2,a);m-=v}return(E?-1:1)*l*Math.pow(2,
m-a)},write:function(b,e,m,a,g,l){var r,v=8*l-g-1,y=(1<<v)-1,A=y>>1,E=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;var F=a?1:-1,H=0>e||0===e&&0>1/e?1:0;e=Math.abs(e);isNaN(e)||Infinity===e?(e=isNaN(e)?1:0,a=y):(a=Math.floor(Math.log(e)/Math.LN2),1>e*(r=Math.pow(2,-a))&&(a--,r*=2),e=1<=a+A?e+E/r:e+E*Math.pow(2,1-A),2<=e*r&&(a++,r/=2),a+A>=y?(e=0,a=y):1<=a+A?(e=(e*r-1)*Math.pow(2,g),a+=A):(e=e*Math.pow(2,A-1)*Math.pow(2,g),a=0));for(;8<=g;b[m+l]=e&255,l+=F,e/=256,g-=8);a=a<<g|e;for(v+=g;0<v;b[m+
l]=a&255,l+=F,a/=256,v-=8);b[m+l-F]|=128*H}},B8="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var C8=Ke;var OR=2147483647;Ke.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),e={foo:function(){return 42}};Object.setPrototypeOf(e,Uint8Array.prototype);Object.setPrototypeOf(b,e);return 42===b.foo()}catch(m){return!1}}();Ke.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(Ke.prototype,"parent",{enumerable:!0,get:function(){if(Ke.isBuffer(this))return this.buffer}});Object.defineProperty(Ke.prototype,"offset",{enumerable:!0,get:function(){if(Ke.isBuffer(this))return this.byteOffset}});Ke.poolSize=8192;Ke.from=function(b,e,m){return H2(b,e,m)};Object.setPrototypeOf(Ke.prototype,Uint8Array.prototype);Object.setPrototypeOf(Ke,Uint8Array);Ke.alloc=function(b,e,m){K2(b);b=0>=b?Iw(b):void 0!==e?"string"===typeof m?Iw(b).fill(e,m):Iw(b).fill(e):Iw(b);
return b};Ke.allocUnsafe=function(b){return PR(b)};Ke.allocUnsafeSlow=function(b){return PR(b)};Ke.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==Ke.prototype};Ke.compare=function(b,e){jv(b,Uint8Array)&&(b=Ke.from(b,b.offset,b.byteLength));jv(e,Uint8Array)&&(e=Ke.from(e,e.offset,e.byteLength));if(!Ke.isBuffer(b)||!Ke.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===e)return 0;for(var m=b.length,a=e.length,g=0,l=Math.min(m,
a);g<l;++g)if(b[g]!==e[g]){m=b[g];a=e[g];break}return m<a?-1:a<m?1:0};Ke.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Ke.concat=function(b,e){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return Ke.alloc(0);var m;if(void 0===e)for(m=e=0;m<b.length;++m)e+=b[m].length;
e=Ke.allocUnsafe(e);var a=0;for(m=0;m<b.length;++m){var g=b[m];if(jv(g,Uint8Array))a+g.length>e.length?Ke.from(g).copy(e,a):Uint8Array.prototype.set.call(e,g,a);else if(Ke.isBuffer(g))g.copy(e,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=g.length}return e};Ke.byteLength=I2;Ke.prototype._isBuffer=!0;Ke.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<b;e+=2)JA(this,e,e+1);return this};
Ke.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<b;e+=4)JA(this,e,e+3),JA(this,e+1,e+2);return this};Ke.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<b;e+=8)JA(this,e,e+7),JA(this,e+1,e+6),JA(this,e+2,e+5),JA(this,e+3,e+4);return this};Ke.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?
M2(this,0,b):Gfa.apply(this,arguments)};Ke.prototype.toLocaleString=Ke.prototype.toString;Ke.prototype.equals=function(b){if(!Ke.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===Ke.compare(this,b)};Ke.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};B8&&(Ke.prototype[B8]=Ke.prototype.inspect);Ke.prototype.compare=function(b,e,m,a,g){jv(b,Uint8Array)&&(b=Ke.from(b,b.offset,
b.byteLength));if(!Ke.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===e&&(e=0);void 0===m&&(m=b?b.length:0);void 0===a&&(a=0);void 0===g&&(g=this.length);if(0>e||m>b.length||0>a||g>this.length)throw new RangeError("out of range index");if(a>=g&&e>=m)return 0;if(a>=g)return-1;if(e>=m)return 1;e>>>=0;m>>>=0;a>>>=0;g>>>=0;if(this===b)return 0;var l=g-a,r=m-e,v=Math.min(l,r);a=this.slice(a,g);b=b.slice(e,m);for(e=0;e<
v;++e)if(a[e]!==b[e]){l=a[e];r=b[e];break}return l<r?-1:r<l?1:0};Ke.prototype.includes=function(b,e,m){return-1!==this.indexOf(b,e,m)};Ke.prototype.indexOf=function(b,e,m){return N2(this,b,e,m,!0)};Ke.prototype.lastIndexOf=function(b,e,m){return N2(this,b,e,m,!1)};Ke.prototype.write=function(b,e,m,a){if(void 0===e)a="utf8",m=this.length,e=0;else if(void 0===m&&"string"===typeof e)a=e,m=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(m)?(m>>>=0,void 0===a&&(a="utf8")):(a=m,m=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var g=this.length-e;if(void 0===m||m>g)m=g;if(0<b.length&&(0>m||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(g=!1;;)switch(a){case "hex":a:{e=Number(e)||0;a=this.length-e;m?(m=Number(m),m>a&&(m=a)):m=a;a=b.length;m>a/2&&(m=a/2);for(a=0;a<m;++a){g=parseInt(b.substr(2*a,2),16);if(g!==g){b=a;break a}this[e+a]=g}b=a}return b;case "utf8":case "utf-8":return UK(SR(b,this.length-e),this,e,m);case "ascii":case "latin1":case "binary":a=[];for(g=0;g<b.length;++g)a.push(b.charCodeAt(g)&
255);return UK(a,this,e,m);case "base64":return UK(TK.toByteArray(L2(b)),this,e,m);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=b;g=this.length-e;for(var l=[],r=0;r<a.length&&!(0>(g-=2));++r){var v=a.charCodeAt(r);b=v>>8;v%=256;l.push(v);l.push(b)}return UK(l,this,e,m);default:if(g)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();g=!0}};Ke.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P2=4096;Ke.prototype.slice=
function(b,e){var m=this.length;b=~~b;e=void 0===e?m:~~e;0>b?(b+=m,0>b&&(b=0)):b>m&&(b=m);0>e?(e+=m,0>e&&(e=0)):e>m&&(e=m);e<b&&(e=b);b=this.subarray(b,e);Object.setPrototypeOf(b,Ke.prototype);return b};Ke.prototype.readUintLE=Ke.prototype.readUIntLE=function(b,e,m){b>>>=0;e>>>=0;m||co(b,e,this.length);m=this[b];for(var a=1,g=0;++g<e&&(a*=256);)m+=this[b+g]*a;return m};Ke.prototype.readUintBE=Ke.prototype.readUIntBE=function(b,e,m){b>>>=0;e>>>=0;m||co(b,e,this.length);m=this[b+--e];for(var a=1;0<
e&&(a*=256);)m+=this[b+--e]*a;return m};Ke.prototype.readUint8=Ke.prototype.readUInt8=function(b,e){b>>>=0;e||co(b,1,this.length);return this[b]};Ke.prototype.readUint16LE=Ke.prototype.readUInt16LE=function(b,e){b>>>=0;e||co(b,2,this.length);return this[b]|this[b+1]<<8};Ke.prototype.readUint16BE=Ke.prototype.readUInt16BE=function(b,e){b>>>=0;e||co(b,2,this.length);return this[b]<<8|this[b+1]};Ke.prototype.readUint32LE=Ke.prototype.readUInt32LE=function(b,e){b>>>=0;e||co(b,4,this.length);return(this[b]|
this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};Ke.prototype.readUint32BE=Ke.prototype.readUInt32BE=function(b,e){b>>>=0;e||co(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};Ke.prototype.readIntLE=function(b,e,m){b>>>=0;e>>>=0;m||co(b,e,this.length);m=this[b];for(var a=1,g=0;++g<e&&(a*=256);)m+=this[b+g]*a;m>=128*a&&(m-=Math.pow(2,8*e));return m};Ke.prototype.readIntBE=function(b,e,m){b>>>=0;e>>>=0;m||co(b,e,this.length);m=e;for(var a=1,g=this[b+--m];0<m&&(a*=256);)g+=
this[b+--m]*a;g>=128*a&&(g-=Math.pow(2,8*e));return g};Ke.prototype.readInt8=function(b,e){b>>>=0;e||co(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};Ke.prototype.readInt16LE=function(b,e){b>>>=0;e||co(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};Ke.prototype.readInt16BE=function(b,e){b>>>=0;e||co(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};Ke.prototype.readInt32LE=function(b,e){b>>>=0;e||co(b,4,this.length);return this[b]|this[b+
1]<<8|this[b+2]<<16|this[b+3]<<24};Ke.prototype.readInt32BE=function(b,e){b>>>=0;e||co(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};Ke.prototype.readFloatLE=function(b,e){b>>>=0;e||co(b,4,this.length);return lD.read(this,b,!0,23,4)};Ke.prototype.readFloatBE=function(b,e){b>>>=0;e||co(b,4,this.length);return lD.read(this,b,!1,23,4)};Ke.prototype.readDoubleLE=function(b,e){b>>>=0;e||co(b,8,this.length);return lD.read(this,b,!0,52,8)};Ke.prototype.readDoubleBE=function(b,
e){b>>>=0;e||co(b,8,this.length);return lD.read(this,b,!1,52,8)};Ke.prototype.writeUintLE=Ke.prototype.writeUIntLE=function(b,e,m,a){b=+b;e>>>=0;m>>>=0;a||Bq(this,b,e,m,Math.pow(2,8*m)-1,0);a=1;var g=0;for(this[e]=b&255;++g<m&&(a*=256);)this[e+g]=b/a&255;return e+m};Ke.prototype.writeUintBE=Ke.prototype.writeUIntBE=function(b,e,m,a){b=+b;e>>>=0;m>>>=0;a||Bq(this,b,e,m,Math.pow(2,8*m)-1,0);a=m-1;var g=1;for(this[e+a]=b&255;0<=--a&&(g*=256);)this[e+a]=b/g&255;return e+m};Ke.prototype.writeUint8=Ke.prototype.writeUInt8=
function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,1,255,0);this[e]=b&255;return e+1};Ke.prototype.writeUint16LE=Ke.prototype.writeUInt16LE=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,2,65535,0);this[e]=b&255;this[e+1]=b>>>8;return e+2};Ke.prototype.writeUint16BE=Ke.prototype.writeUInt16BE=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,2,65535,0);this[e]=b>>>8;this[e+1]=b&255;return e+2};Ke.prototype.writeUint32LE=Ke.prototype.writeUInt32LE=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,4,4294967295,0);this[e+3]=
b>>>24;this[e+2]=b>>>16;this[e+1]=b>>>8;this[e]=b&255;return e+4};Ke.prototype.writeUint32BE=Ke.prototype.writeUInt32BE=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,4,4294967295,0);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};Ke.prototype.writeIntLE=function(b,e,m,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*m-1),Bq(this,b,e,m,a-1,-a));a=0;var g=1,l=0;for(this[e]=b&255;++a<m&&(g*=256);)0>b&&0===l&&0!==this[e+a-1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};Ke.prototype.writeIntBE=
function(b,e,m,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*m-1),Bq(this,b,e,m,a-1,-a));a=m-1;var g=1,l=0;for(this[e+a]=b&255;0<=--a&&(g*=256);)0>b&&0===l&&0!==this[e+a+1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};Ke.prototype.writeInt8=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,1,127,-128);0>b&&(b=255+b+1);this[e]=b&255;return e+1};Ke.prototype.writeInt16LE=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,2,32767,-32768);this[e]=b&255;this[e+1]=b>>>8;return e+2};Ke.prototype.writeInt16BE=function(b,e,m){b=+b;e>>>=
0;m||Bq(this,b,e,2,32767,-32768);this[e]=b>>>8;this[e+1]=b&255;return e+2};Ke.prototype.writeInt32LE=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,4,2147483647,-2147483648);this[e]=b&255;this[e+1]=b>>>8;this[e+2]=b>>>16;this[e+3]=b>>>24;return e+4};Ke.prototype.writeInt32BE=function(b,e,m){b=+b;e>>>=0;m||Bq(this,b,e,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};Ke.prototype.writeFloatLE=function(b,e,m){return R2(this,b,e,
!0,m)};Ke.prototype.writeFloatBE=function(b,e,m){return R2(this,b,e,!1,m)};Ke.prototype.writeDoubleLE=function(b,e,m){return S2(this,b,e,!0,m)};Ke.prototype.writeDoubleBE=function(b,e,m){return S2(this,b,e,!1,m)};Ke.prototype.copy=function(b,e,m,a){if(!Ke.isBuffer(b))throw new TypeError("argument should be a Buffer");m||(m=0);a||0===a||(a=this.length);e>=b.length&&(e=b.length);e||(e=0);0<a&&a<m&&(a=m);if(a===m||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");
if(0>m||m>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-e<a-m&&(a=b.length-e+m);var g=a-m;this===b&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,m,a):Uint8Array.prototype.set.call(b,this.subarray(m,a),e);return g};Ke.prototype.fill=function(b,e,m,a){if("string"===typeof b){"string"===typeof e?(a=e,e=0,m=this.length):"string"===typeof m&&(a=m,m=this.length);if(void 0!==
a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!Ke.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var g=b.charCodeAt(0);if("utf8"===a&&128>g||"latin1"===a)b=g}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>e||this.length<e||this.length<m)throw new RangeError("Out of range index");if(m<=e)return this;e>>>=0;m=void 0===m?this.length:m>>>0;b||(b=0);if("number"===typeof b)for(a=e;a<m;++a)this[a]=b;else{g=
Ke.isBuffer(b)?b:Ke.from(b,a);var l=g.length;if(0===l)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<m-e;++a)this[a+e]=g[a%l]}return this};var Ifa=/[^+/0-9A-Za-z-_]/g,Hfa=function(){for(var b=Array(256),e=0;16>e;++e)for(var m=16*e,a=0;16>a;++a)b[m+a]="0123456789abcdef"[e]+"0123456789abcdef"[a];return b}(),Jw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Joa={};oy.prototype.next=function(b){var e=this||Jw;if("function"!==typeof b)throw Error("next() requires a callback argument");
if(e._ended)return Pj(b,Error("cannot call next() after end()")),e;if(e._nexting)return Pj(b,Error("cannot call next() before previous next() has completed")),e;e._nexting=!0;e._next(function(){e._nexting=!1;b.apply(null,arguments)});return e};oy.prototype._next=function(b){Pj(b)};oy.prototype.seek=function(b){if((this||Jw)._ended)throw Error("cannot call seek() after end()");if((this||Jw)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||Jw).db._serializeKey(b);this._seek(b)};
oy.prototype._seek=function(b){};oy.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||Jw)._ended)return Pj(b,Error("end() already called on iterator"));(this||Jw)._ended=!0;this._end(b)};oy.prototype._end=function(b){Pj(b)};oy.prototype._nextTick=Pj;var D8=Joa=oy,yn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Koa={};Dt.prototype._checkWritten=function(){if((this||yn)._written)throw Error("write() already called on this batch");
};Dt.prototype.put=function(b,e){this._checkWritten();var m=(this||yn).db._checkKey(b)||(this||yn).db._checkValue(e);if(m)throw m;b=(this||yn).db._serializeKey(b);e=(this||yn).db._serializeValue(e);this._put(b,e);return this||yn};Dt.prototype._put=function(b,e){(this||yn)._operations.push({type:"put",key:b,value:e})};Dt.prototype.del=function(b){this._checkWritten();var e=(this||yn).db._checkKey(b);if(e)throw e;b=(this||yn).db._serializeKey(b);this._del(b);return this||yn};Dt.prototype._del=function(b){(this||
yn)._operations.push({type:"del",key:b})};Dt.prototype.clear=function(){this._checkWritten();this._clear();return this||yn};Dt.prototype._clear=function(){(this||yn)._operations=[]};Dt.prototype.write=function(b,e){this._checkWritten();"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||yn)._written=!0;this._write(b,e)};Dt.prototype._write=function(b,e){(this||yn).db._batch((this||yn)._operations,b,
e)};Dt.prototype._nextTick=Pj;var Loa=Koa=Dt,qr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,E8={},Jfa=A8,Kfa=Object.prototype.hasOwnProperty,Lfa="start end gt gte lt lte".split(" ");Fl.prototype.open=function(b,e){var m=this||qr,a=(this||qr).status;"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;
(this||qr).status="opening";this._open(b,function(g){if(g)return m.status=a,e(g);m.status="open";e()})};Fl.prototype._open=function(b,e){Pj(e)};Fl.prototype.close=function(b){var e=this||qr,m=(this||qr).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||qr).status="closing";this._close(function(a){if(a)return e.status=m,b(a);e.status="closed";b()})};Fl.prototype._close=function(b){Pj(b)};Fl.prototype.get=function(b,e,m){"function"===typeof e&&(m=e);if("function"!==
typeof m)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return Pj(m,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};e.asBuffer=!1!==e.asBuffer;this._get(b,e,m)};Fl.prototype._get=function(b,e,m){Pj(function(){m(Error("NotFound"))})};Fl.prototype.put=function(b,e,m,a){"function"===typeof m&&(a=m);if("function"!==typeof a)throw Error("put() requires a callback argument");var g=this._checkKey(b)||this._checkValue(e);if(g)return Pj(a,g);b=this._serializeKey(b);
e=this._serializeValue(e);if("object"!==typeof m||null===m)m={};this._put(b,e,m,a)};Fl.prototype._put=function(b,e,m,a){Pj(a)};Fl.prototype.del=function(b,e,m){"function"===typeof e&&(m=e);if("function"!==typeof m)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return Pj(m,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};this._del(b,e,m)};Fl.prototype._del=function(b,e,m){Pj(m)};Fl.prototype.batch=function(b,e,m){if(!arguments.length)return this._chainedBatch();
"function"===typeof e&&(m=e);"function"===typeof b&&(m=b);if("function"!==typeof m)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return Pj(m,Error("batch(array) requires an array argument"));if(0===b.length)return Pj(m);if("object"!==typeof e||null===e)e={};for(var a=Array(b.length),g=0;g<b.length;g++){if("object"!==typeof b[g]||null===b[g])return Pj(m,Error("batch(array) element must be an object and not `null`"));var l=Qy(b[g]);if("put"!==l.type&&"del"!==l.type)return Pj(m,
Error("`type` must be 'put' or 'del'"));var r=this._checkKey(l.key);if(r)return Pj(m,r);l.key=this._serializeKey(l.key);if("put"===l.type){if(r=this._checkValue(l.value))return Pj(m,r);l.value=this._serializeValue(l.value)}a[g]=l}this._batch(a,e,m)};Fl.prototype._batch=function(b,e,m){Pj(m)};Fl.prototype.clear=function(b,e){if("function"===typeof b)e=b;else if("function"!==typeof e)throw Error("clear() requires a callback argument");b=T2(this||qr,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:
-1;this._clear(b,e)};Fl.prototype._clear=function(b,e){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var m=this._iterator(b),a={},g=this||qr,l=function(r){if(r)return m.end(function(){e(r)});m.next(function(v,y){if(v)return l(v);if(void 0===y)return m.end(e);g._del(y,a,l)})};l()};Fl.prototype._setupIteratorOptions=function(b){b=T2(this||qr,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=
!1!==b.valueAsBuffer;return b};Fl.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Fl.prototype._iterator=function(b){return new D8(this||qr)};Fl.prototype._chainedBatch=function(){return new Loa(this||qr)};Fl.prototype._serializeKey=function(b){return b};Fl.prototype._serializeValue=function(b){return b};Fl.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");if(C8.isBuffer(b)&&
0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Fl.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};Fl.prototype._nextTick=Pj;E8=Fl;var Moa=E8;var Et="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,F8={},U2=D8;xl(mD,U2);mD.prototype.setDb=function(b){var e=
(this||Et)._iterator=b.iterator((this||Et)._options);(this||Et)._operations.forEach(function(m){e[m.method].apply(e,m.args)})};mD.prototype._operation=function(b,e){if((this||Et)._iterator)return(this||Et)._iterator[b].apply((this||Et)._iterator,e);(this||Et)._operations.push({method:b,args:e})};["next","end"].forEach(function(b){mD.prototype["_"+b]=function(){this._operation(b,arguments)}});mD.prototype.seek=function(){this._operation("seek",arguments)};F8=mD;var eo="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,nV={},V2=Moa,Y2=F8,X2=["put","get","del","batch","clear"],Mfa=["approximateSize","compactRange"];xl(KA,V2);KA.prototype.type="deferred-leveldown";KA.prototype._open=function(b,e){var m=this||eo;(this||eo)._db.open(b,function(a){if(a)return e(a);m._operations.forEach(function(g){g.iterator?g.iterator.setDb(m._db):m._db[g.method].apply(m._db,g.args)});m._operations=[];Nfa(m);e()})};KA.prototype._close=function(b){var e=this||eo;(this||eo)._db.close(function(m){if(m)return b(m);
W2(e);b()})};KA.prototype._serializeKey=function(b){return b};KA.prototype._serializeValue=function(b){return b};nV=KA;nV.DeferredIterator=Y2;var Noa=nV,a3={},$2=!1,TR={},b3=!1,VR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ooa={},Zfa=Ooa=function(b,e){if(UR("noDeprecation"))return b;var m=!1;return function(){if(!m){if(UR("throwDeprecation"))throw Error(e);UR("traceDeprecation")?console.trace(e):console.warn(e);m=!0}return b.apply(this||VR,arguments)}},rN={},
sN=Ni,kv=sN.Buffer;kv.from&&kv.alloc&&kv.allocUnsafe&&kv.allocUnsafeSlow?rN=sN:(c3(sN,rN),rN.Buffer=LA);LA.prototype=Object.create(kv.prototype);c3(kv,LA);LA.from=function(b,e,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return kv(b,e,m)};LA.alloc=function(b,e,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=kv(b);void 0!==e?"string"===typeof m?b.fill(e,m):b.fill(e):b.fill(0);return b};LA.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return kv(b)};LA.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return sN.SlowBuffer(b)};var bS={},WR=rN.Buffer,d3=WR.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};bS.StringDecoder=hG;hG.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var e=
this.fillLast(b);if(void 0===e)return"";var m=this.lastNeed;this.lastNeed=0}else m=0;return m<b.length?e?e+this.text(b,m):this.text(b,m):e||""};hG.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};hG.prototype.text=function(b,e){var m=Wfa(this,b,e);if(!this.lastNeed)return b.toString("utf8",e);this.lastTotal=m;m=b.length-(m-this.lastNeed);b.copy(this.lastChar,0,m);return b.toString("utf8",e,m)};hG.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var f3={},e3=!1,h3={},g3=!1,k3=Object.freeze({}),j3={},i3=!1,n3={},m3=!1,q3={},p3=!1,$R={},s3=!1,$fa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aS={},t3=!1,w3={},v3=!1,cS={},x3=!1,bga="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dS={},z3=!1,
oV={},G8=!1,H8={},I8=!1,Ar={},J8=!1;J8||(J8=!0,Ar=Ar=u3(),Ar.Stream=Ar,Ar.Readable=Ar,Ar.Writable=r3(),Ar.Duplex=oD(),Ar.Transform=y3(),Ar.PassThrough=function(){function b(m){if(!(this instanceof b))return new b(m);e.call(this,m)}if(G8)return oV;G8=!0;oV=b;var e=y3();xl(b,e);b.prototype._transform=function(m,a,g){g(null,m)};return oV}(),Ar.finished=ZR(),Ar.pipeline=function(){function b(A){var E=!1;return function(){E||(E=!0,A.apply(void 0,arguments))}}function e(A){if(A)throw A;}function m(A,E,
F,H){H=b(H);var I=!1;A.on("close",function(){I=!0});void 0===l&&(l=ZR());l(A,{readable:E,writable:F},function(N){if(N)return H(N);I=!0;H()});var M=!1;return function(N){if(!I&&!M){M=!0;if(A.setHeader&&"function"===typeof A.abort)return A.abort();if("function"===typeof A.destroy)return A.destroy();H(N||new y("pipe"))}}}function a(A){A()}function g(A,E){return A.pipe(E)}if(I8)return H8;I8=!0;var l,r=nD().codes,v=r.ERR_MISSING_ARGS,y=r.ERR_STREAM_DESTROYED;return H8=function(){for(var A=arguments.length,
E=Array(A),F=0;F<A;F++)E[F]=arguments[F];var H=E.length?"function"!==typeof E[E.length-1]?e:E.pop():e;Array.isArray(E[0])&&(E=E[0]);if(2>E.length)throw new v("streams");var I,M=E.map(function(N,X){var W=X<E.length-1;return m(N,W,0<X,function(ea){I||(I=ea);ea&&M.forEach(a);W||(M.forEach(a),H(I))})});return E.reduce(g)}}());var K8=Ar;var Ft="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,L8={},Poa=xl,A3=K8.Readable,cga=Qy;L8=pD;Poa(pD,A3);pD.prototype._read=function(){var b=
this||Ft,e=(this||Ft)._options;(this||Ft).destroyed||(this||Ft)._iterator.next(function(m,a,g){if(!b.destroyed){if(m)return b.destroy(m);void 0===a&&void 0===g?b.push(null):!1!==e.keys&&!1===e.values?b.push(a):!1===e.keys&&!1!==e.values?b.push(g):b.push({key:a,value:g})}})};pD.prototype._destroy=function(b,e){(this||Ft)._iterator.end(function(m){e(b||m)})};var Qoa=L8,tN={};(function(b,e,m){tN?tN=m():e[b]=m()})("prr",tN,function(){var b="function"==typeof Object.defineProperty?function(m,a,g){Object.defineProperty(m,
a,g);return m}:function(m,a,g){m[a]=g.value;return m},e=function(m,a){var g="object"==typeof a,l=!g&&"string"==typeof a,r=function(v){return g?!!a[v]:l?-1<a.indexOf(v[0]):!1};return{enumerable:r("enumerable"),configurable:r("configurable"),writable:r("writable"),value:m}};return function(m,a,g,l){var r;l=e(g,l);if("object"==typeof a){for(r in a)Object.hasOwnProperty.call(a,r)&&(l.value=a[r],b(m,r,l));return m}return b(m,a,l)}});var Vm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,Roa={},dga=tN;eS.prototype=Error();var Soa=Roa=function(b){var e=function(m,a){return ega(b,m,a)};return{CustomError:eS,FilesystemError:e("FilesystemError"),createError:e}},Hv={},Toa=Hv.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Hv.errno={};Hv.code={};Toa.forEach(function(b){Hv.errno[b.errno]=b;Hv.code[b.code]=b});Hv.custom=Soa(Hv);
Hv.create=Hv.custom.createError;var Uoa={},wB=Hv.create,xB=wB("LevelUPError"),pV=wB("NotFoundError",xB);pV.prototype.notFound=!0;pV.prototype.status=404;var yB=Uoa={LevelUPError:xB,InitializationError:wB("InitializationError",xB),OpenError:wB("OpenError",xB),ReadError:wB("ReadError",xB),WriteError:wB("WriteError",xB),NotFoundError:pV,EncodingError:wB("EncodingError",xB)},Voa={},Ry=Voa=function(){var b,e=new Promise(function(m,a){b=function(g,l){g?a(g):m(l)}});b.promise=e;return b};var aE=function(b,
e){return"function"===typeof b?b:e};var M8=function(b){return"object"===typeof b&&null!==b?b:{}};var Wm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Woa={},xH=yB.WriteError;iG.prototype.put=function(b,e){try{(this||Wm).batch.put(b,e)}catch(m){throw new xH(m);}(this||Wm).ops.push({type:"put",key:b,value:e});(this||Wm).length++;return this||Wm};iG.prototype.del=function(b){try{(this||Wm).batch.del(b)}catch(e){throw new xH(e);}(this||Wm).ops.push({type:"del",key:b});
(this||Wm).length++;return this||Wm};iG.prototype.clear=function(){try{(this||Wm).batch.clear()}catch(b){throw new xH(b);}(this||Wm).ops=[];(this||Wm).length=0;return this||Wm};iG.prototype.write=function(b,e){var m=(this||Wm)._levelup,a=(this||Wm).ops;e=aE(b,e);if(!e){e=Ry();var g=e.promise}b=M8(b);try{(this||Wm).batch.write(b,function(l){if(l)return e(new xH(l));m.emit("batch",a);e()})}catch(l){throw new xH(l);}return g};var Xoa=Woa=iG,qga={assign:C3,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:C3})}},N8=Object.prototype.toString,O8=function(b){var e=N8.call(b),m="[object Arguments]"===e;return m||(m="[object Array]"!==e&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===N8.call(b.callee)),m};if(!Object.keys){var uN=Object.prototype.hasOwnProperty,P8=Object.prototype.toString,Q8=Object.prototype.propertyIsEnumerable,Yoa=!Q8.call({toString:null},"toString"),Zoa=Q8.call(function(){},"prototype"),
vN="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),qV=function(b){var e=b.constructor;return e&&e.prototype===b},$oa={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,
$window:!0},apa=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!$oa["$"+b]&&uN.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{qV(window[b])}catch(e){return!0}}catch(e){return!0}return!1}();var bpa=function(b){var e=null!==b&&"object"==typeof b,m="[object Function]"===P8.call(b),a=O8(b),g=e&&"[object String]"===P8.call(b),l=[];if(!e&&!m&&!a)throw new TypeError("Object.keys called on a non-object");e=Zoa&&m;if(g&&0<b.length&&!uN.call(b,0))for(g=0;g<b.length;++g)l.push(String(g));
if(a&&0<b.length)for(a=0;a<b.length;++a)l.push(String(a));else for(var r in b)e&&"prototype"===r||!uN.call(b,r)||l.push(String(r));if(Yoa){if("undefined"!=typeof window&&apa)try{var v=qV(b)}catch(y){v=!1}else v=qV(b);for(a=0;a<vN.length;++a)v&&"constructor"===vN[a]||!uN.call(b,vN[a])||l.push(vN[a])}return l}}var cpa=bpa,dpa=Array.prototype.slice,R8=Object.keys,wN=R8?function(b){return R8(b)}:cpa,S8=Object.keys;wN.shim=function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===
arguments.length}(1,2)||(Object.keys=function(b){return O8(b)?S8(dpa.call(b)):S8(b)}):Object.keys=wN;return Object.keys||wN};var epa="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),fpa=Object.prototype.toString,gpa=Array.prototype.concat,rV=Object.defineProperty,T8=rV&&function(){var b={};try{for(var e in rV(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(m){return!1}}(),yH=function(b,e){var m=2<arguments.length?arguments[2]:{},a=wN(e);epa&&(a=gpa.call(a,Object.getOwnPropertySymbols(e)));
for(var g=0;g<a.length;g+=1){var l=void 0,r=b,v=a[g],y=e[a[g]],A=m[a[g]];(!(v in r)||"function"==typeof(l=A)&&"[object Function]"===fpa.call(l)&&A())&&(T8?rV(r,v,{configurable:!0,enumerable:!1,value:y,writable:!0}):r[v]=y)}};yH.supportsDescriptors=!!T8;var U8=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,hpa=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b=
{},e=Symbol("test"),m=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(m))return!1;for(e in b[e]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;m=Object.getOwnPropertySymbols(b);return 1!==m.length||m[0]!==e||!Object.prototype.propertyIsEnumerable.call(b,e)||"function"==typeof Object.getOwnPropertyDescriptor&&
(b=Object.getOwnPropertyDescriptor(b,e),42!==b.value||!0!==b.enumerable)?!1:!0},sV=Array.prototype.slice,ipa=Object.prototype.toString,jpa=function(b){var e=this;if("function"!=typeof e||"[object Function]"!==ipa.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var m,a=sV.call(arguments,1),g=Math.max(0,e.length-a.length),l=[],r=0;r<g;r++)l.push("$"+r);if(m=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof
m){var v=e.apply(this,a.concat(sV.call(arguments)));return Object(v)===v?v:this}return e.apply(b,a.concat(sV.call(arguments)))}),e.prototype)g=function(){},g.prototype=e.prototype,m.prototype=new g,g.prototype=null;return m},tV=Function.prototype.bind||jpa,zH=TypeError,zB=Object.getOwnPropertyDescriptor;if(zB)try{zB({},"")}catch(b){zB=null}var uV=function(){throw new zH;},kpa=zB?function(){try{return arguments.callee,uV}catch(b){try{return zB(arguments,"callee").get}catch(e){return uV}}}():uV,AB=
"function"==typeof U8&&"function"==typeof Symbol&&"symbol"==typeof U8("foo")&&"symbol"==typeof Symbol("bar")&&hpa(),BB=Object.getPrototypeOf||function(b){return b.__proto__},vV="undefined"==typeof Uint8Array?void 0:BB(Uint8Array),wV={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":AB?BB([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,
"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,
"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:
Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==
typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":AB?BB(BB([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==
typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&AB?BB((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==
typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,
"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&AB?BB((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==
typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":AB?BB(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":AB?Symbol:void 0,"%SymbolPrototype%":AB?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":kpa,"%TypedArray%":vV,"%TypedArrayPrototype%":vV?vV.prototype:void 0,"%TypeError%":zH,"%TypeErrorPrototype%":zH.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?
void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,
"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},V8=tV.call(Function.call,String.prototype.replace),lpa=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,
mpa=/\\(\\)?/g,npa=function(b){var e=[];return V8(b,lpa,function(m,a,g,l){e[e.length]=g?V8(l,mpa,"$1"):a||m}),e},W8,X8=function(b,e){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var m=npa(b);var a="%"+(0<m.length?m[0]:"")+"%";if(!(a in wV))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===wV[a]&&!e)throw new zH("intrinsic "+
a+" exists, but is not available. Please file an issue!");a=wV[a];for(var g=1;g<m.length;g+=1)if(null!=a)if(zB&&g+1>=m.length){var l=zB(a,m[g]);if(!(e||m[g]in a))throw new zH("base intrinsic for "+b+" exists, but the property is not available.");a=l?l.get||l.value:a[m[g]]}else a=a[m[g]];return a}("%Function%"),opa=X8.apply,ppa=X8.call;(W8=function(){return tV.apply(ppa,arguments)}).apply=function(){return tV.apply(opa,arguments)};var xV,xN,qpa=(xV=function(b,e){return 0===b&&0===e?1/b==1/e:b===e||
!(b==b||e==e)},xV),rpa=(xN=function(){return"function"==typeof Object.is?Object.is:qpa},xN),Y8=W8(xN(),Object);yH(Y8,{getPolyfill:xN,implementation:xV,shim:function(){var b=rpa();return yH(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var Y3=Y8;var Z8=function(b){return b!=b};var yN,spa=Z8,tpa=(yN=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:spa},yH),upa=Z8,$8=yN();yH($8,{getPolyfill:yN,implementation:upa,shim:function(){var b=yN();return tpa(Number,
{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var fS={},E3=!1,G3={},F3=!1,hga=void 0!==/a/g.flags,$K=function(b){var e=[];return b.forEach(function(m){return e.push(m)}),e},V3=function(b){var e=[];return b.forEach(function(m,a){return e.push([a,m])}),e},J3=Object.is?Object.is:Y3,WK=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},iS=Number.isNaN?Number.isNaN:$8,kG=hS(Object.prototype.hasOwnProperty),ZK=hS(Object.prototype.propertyIsEnumerable),K3=hS(Object.prototype.toString),
Qp=Rh.types,mga=Qp.isAnyArrayBuffer,jga=Qp.isArrayBufferView,L3=Qp.isDate,XK=Qp.isMap,M3=Qp.isRegExp,YK=Qp.isSet,iga=Qp.isNativeError,nga=Qp.isBoxedPrimitive,N3=Qp.isNumberObject,O3=Qp.isStringObject,P3=Qp.isBooleanObject,Q3=Qp.isBigIntObject,oga=Qp.isSymbolObject,kga=Qp.isFloat32Array,lga=Qp.isFloat64Array,W3={isDeepEqual:function(b,e){return Ds(b,e,!1)},isDeepStrictEqual:function(b,e){return Ds(b,e,!0)}},jS={},X3=!1,vpa=gS(),Ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,wpa={},bL=uj,aL=bv.EventEmitter,xpa=Rh.inherits,Z3=Noa,tga=A8,sga=vpa,qD=M8,zN=yB.WriteError,$3=yB.ReadError,ypa=yB.NotFoundError,zpa=yB.OpenError,rga=yB.InitializationError;dl.prototype.emit=aL.prototype.emit;dl.prototype.once=aL.prototype.once;xpa(dl,aL);dl.prototype.open=function(b,e){var m=this||Ci;"function"===typeof b&&(e=b,b=null);if(!e){e=Ry();var a=e.promise}b||(b=(this||Ci).options);if(this.isOpen())return bL.nextTick(e,null,m),a;if(this._isOpening())return this.once("open",
function(){e(null,m)}),a;this.emit("opening");(this||Ci).db.open(b,function(g){if(g)return e(new zpa(g));m.db=m._db;e(null,m);m.emit("open");m.emit("ready")});return a};dl.prototype.close=function(b){var e=this||Ci;if(!b){b=Ry();var m=b.promise}if(this.isOpen())(this||Ci).db.close(function(){e.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||Ci).db=new Z3((this||Ci)._db);else if(this.isClosed())bL.nextTick(b);else if("closing"===(this||Ci).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",
function(){e.close(b)});return m};dl.prototype.isOpen=function(){return"open"===(this||Ci).db.status};dl.prototype._isOpening=function(){return"opening"===(this||Ci).db.status};dl.prototype.isClosed=function(){return/^clos|new/.test((this||Ci).db.status)};dl.prototype.get=function(b,e,m){m=aE(e,m);if(!m){m=Ry();var a=m.promise}if(lG(this||Ci,m))return a;e=qD(e);(this||Ci).db.get(b,e,function(g,l){if(g)return g=/notfound/i.test(g)||g.notFound?new ypa("Key not found in database ["+b+"]",g):new $3(g),
m(g);m(null,l)});return a};dl.prototype.put=function(b,e,m,a){var g=this||Ci;a=aE(m,a);if(!a){a=Ry();var l=a.promise}if(lG(this||Ci,a))return l;m=qD(m);(this||Ci).db.put(b,e,m,function(r){if(r)return a(new zN(r));g.emit("put",b,e);a()});return l};dl.prototype.del=function(b,e,m){var a=this||Ci;m=aE(e,m);if(!m){m=Ry();var g=m.promise}if(lG(this||Ci,m))return g;e=qD(e);(this||Ci).db.del(b,e,function(l){if(l)return m(new zN(l));a.emit("del",b);m()});return g};dl.prototype.batch=function(b,e,m){if(!arguments.length)return new Xoa(this||
Ci);var a=this||Ci;m="function"===typeof b?b:aE(e,m);if(!m){m=Ry();var g=m.promise}if(lG(this||Ci,m))return g;e=qD(e);(this||Ci).db.batch(b,e,function(l){if(l)return m(new zN(l));a.emit("batch",b);m()});return g};dl.prototype.iterator=function(b){return(this||Ci).db.iterator(b)};dl.prototype.clear=function(b,e){var m=this||Ci;e=aE(b,e);b=qD(b);if(!e){e=Ry();var a=e.promise}if(lG(this||Ci,e))return a;(this||Ci).db.clear(b,function(g){if(g)return e(new zN(g));m.emit("clear",b);e()});return a};dl.prototype.readStream=
dl.prototype.createReadStream=function(b){b=Qy({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new Qoa((this||Ci).db.iterator(b),b)};dl.prototype.keyStream=dl.prototype.createKeyStream=function(b){return this.createReadStream(Qy(b,{keys:!0,values:!1}))};dl.prototype.valueStream=dl.prototype.createValueStream=function(b){return this.createReadStream(Qy(b,{keys:!1,values:!0}))};dl.prototype.toString=function(){return"LevelUP"};dl.prototype.type="levelup";dl.errors=yB;var Apa=wpa=
dl.default=dl,jm={},Bpa=Ni.Buffer;jm.compare=function(b,e){if(Bpa.isBuffer(b)){for(var m=Math.min(b.length,e.length),a=0;a<m;a++){var g=b[a]-e[a];if(g)return g}return b.length-e.length}return b<e?-1:b>e?1:0};var Cpa=jm.lowerBoundKey=function(b){return lv(b,"gt")||lv(b,"gte")||lv(b,"min")||(b.reverse?lv(b,"end"):lv(b,"start"))||void 0},yV=jm.lowerBound=function(b,e){var m=Cpa(b);return m?b[m]:e},zV=jm.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},AV=jm.upperBoundInclusive=
function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},Dpa=jm.lowerBoundExclusive=function(b){return!zV(b)},Epa=jm.upperBoundExclusive=function(b){return!AV(b)},Fpa=jm.upperBoundKey=function(b){return lv(b,"lt")||lv(b,"lte")||lv(b,"max")||(b.reverse?lv(b,"start"):lv(b,"end"))||void 0},BV=jm.upperBound=function(b,e){var m=Fpa(b);return m?b[m]:e};jm.start=function(b,e){return b.reverse?BV(b,e):yV(b,e)};jm.end=function(b,e){return b.reverse?yV(b,e):BV(b,e)};jm.startInclusive=function(b){return b.reverse?
AV(b):zV(b)};jm.endInclusive=function(b){return b.reverse?zV(b):AV(b)};jm.toLtgt=function(b,e,m,a,g){e=e||{};m=m||uga;var l=3<arguments.length,r=jm.lowerBoundKey(b),v=jm.upperBoundKey(b);r?"gt"===r?e.gt=m(b.gt,!1):e.gte=m(b[r],!1):l&&(e.gte=m(a,!1));v?"lt"===v?e.lt=m(b.lt,!0):e.lte=m(b[v],!0):l&&(e.lte=m(g,!0));null!=b.reverse&&(e.reverse=!!b.reverse);Object.hasOwnProperty.call(e,"max")&&delete e.max;Object.hasOwnProperty.call(e,"min")&&delete e.min;Object.hasOwnProperty.call(e,"start")&&delete e.start;
Object.hasOwnProperty.call(e,"end")&&delete e.end;return e};jm.contains=function(b,e,m){m=m||jm.compare;var a=yV(b);if(void 0!==a&&""!==a&&(a=m(e,a),0>a||0===a&&Dpa(b)))return!1;a=BV(b);return void 0!==a&&""!==a&&(a=m(e,a),0<a||0===a&&Epa(b))?!1:!0};jm.filter=function(b,e){return function(m){return jm.contains(b,m,e)}};var Yw={},lS=C8;Yw.utf8=Yw["utf-8"]={encode:function(b){return kS(b)?b:String(b)},decode:cL,buffer:!1,type:"utf8"};Yw.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};
Yw.binary={encode:function(b){return kS(b)?b:lS.from(b)},decode:cL,buffer:!0,type:"binary"};Yw.none={encode:cL,decode:cL,buffer:!1,type:"id"};Yw.id=Yw.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Yw[b]={encode:function(e){return kS(e)?e:lS.from(e,b)},decode:function(e){return e.toString(b)},buffer:!0,type:b}});var Kw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,a9={},mS=Yw;a9=Kp;Kp.prototype._encoding=function(b){"string"===
typeof b&&(b=mS[b]);b||(b=mS.id);return b};Kp.prototype._keyEncoding=function(b,e){return this._encoding(e&&e.keyEncoding||b&&b.keyEncoding||(this||Kw).opts.keyEncoding)};Kp.prototype._valueEncoding=function(b,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||b&&(b.valueEncoding||b.encoding)||(this||Kw).opts.valueEncoding||(this||Kw).opts.encoding)};Kp.prototype.encodeKey=function(b,e,m){return this._keyEncoding(e,m).encode(b)};Kp.prototype.encodeValue=function(b,e,m){return this._valueEncoding(e,
m).encode(b)};Kp.prototype.decodeKey=function(b,e){return this._keyEncoding(e).decode(b)};Kp.prototype.decodeValue=function(b,e){return this._valueEncoding(e).decode(b)};Kp.prototype.encodeBatch=function(b,e){var m=this||Kw;return b.map(function(a){var g={type:a.type,key:m.encodeKey(a.key,e,a)};m.keyAsBuffer(e,a)&&(g.keyEncoding="binary");a.prefix&&(g.prefix=a.prefix);"value"in a&&(g.value=m.encodeValue(a.value,e,a),m.valueAsBuffer(e,a)&&(g.valueEncoding="binary"));return g})};var Gpa="lt gt lte gte start end".split(" ");
Kp.prototype.encodeLtgt=function(b){var e=this||Kw,m={};Object.keys(b).forEach(function(a){m[a]=-1<Gpa.indexOf(a)?e.encodeKey(b[a],b):b[a]});return m};Kp.prototype.createStreamDecoder=function(b){var e=this||Kw;return b.keys&&b.values?function(m,a){return{key:e.decodeKey(m,b),value:e.decodeValue(a,b)}}:b.keys?function(m){return e.decodeKey(m,b)}:b.values?function(m,a){return e.decodeValue(a,b)}:function(){}};Kp.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};Kp.prototype.valueAsBuffer=
function(b){return this._valueEncoding(b).buffer};var Hpa=a9,Ipa={},yga=Ipa=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},Xm={},Jpa=Ni.Buffer;Xm.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};Xm.isBoolean=function(b){return"boolean"===typeof b};Xm.isNull=function(b){return null===b};Xm.isNullOrUndefined=function(b){return null==b};Xm.isNumber=function(b){return"number"===typeof b};Xm.isString=
function(b){return"string"===typeof b};Xm.isSymbol=function(b){return"symbol"===typeof b};Xm.isUndefined=function(b){return void 0===b};Xm.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};Xm.isObject=function(b){return"object"===typeof b&&null!==b};Xm.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};Xm.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};Xm.isFunction=function(b){return"function"===
typeof b};Xm.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};Xm.isBuffer=Jpa.isBuffer;var Tg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pS={},b9=Ni.Buffer,Kpa=b9.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},CV=pS.StringDecoder=function(b){(this||Tg).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!Kpa(b))throw Error("Unknown encoding: "+b);switch((this||Tg).encoding){case "utf8":(this||Tg).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Tg).surrogateSize=2;(this||Tg).detectIncompleteChar=wga;break;case "base64":(this||Tg).surrogateSize=3;(this||Tg).detectIncompleteChar=xga;break;default:(this||Tg).write=vga;return}(this||Tg).charBuffer=new b9(6);(this||Tg).charReceived=
0;(this||Tg).charLength=0};CV.prototype.write=function(b){for(var e="";(this||Tg).charLength;){e=b.length>=(this||Tg).charLength-(this||Tg).charReceived?(this||Tg).charLength-(this||Tg).charReceived:b.length;b.copy((this||Tg).charBuffer,(this||Tg).charReceived,0,e);(this||Tg).charReceived+=e;if((this||Tg).charReceived<(this||Tg).charLength)return"";b=b.slice(e,b.length);e=(this||Tg).charBuffer.slice(0,(this||Tg).charLength).toString((this||Tg).encoding);var m=e.charCodeAt(e.length-1);if(55296<=m&&
56319>=m)(this||Tg).charLength+=(this||Tg).surrogateSize,e="";else{(this||Tg).charReceived=(this||Tg).charLength=0;if(0===b.length)return e;break}}this.detectIncompleteChar(b);var a=b.length;(this||Tg).charLength&&(b.copy((this||Tg).charBuffer,0,b.length-(this||Tg).charReceived,a),a-=(this||Tg).charReceived);e+=b.toString((this||Tg).encoding,0,a);a=e.length-1;m=e.charCodeAt(a);return 55296<=m&&56319>=m?(m=(this||Tg).surrogateSize,(this||Tg).charLength+=m,(this||Tg).charReceived+=m,(this||Tg).charBuffer.copy((this||
Tg).charBuffer,m,0,m),b.copy((this||Tg).charBuffer,0,0,m),e.substring(0,a)):e};CV.prototype.detectIncompleteChar=function(b){for(var e=3<=b.length?3:b.length;0<e;e--){var m=b[b.length-e];if(1==e&&6==m>>5){(this||Tg).charLength=2;break}if(2>=e&&14==m>>4){(this||Tg).charLength=3;break}if(3>=e&&30==m>>3){(this||Tg).charLength=4;break}}(this||Tg).charReceived=e};CV.prototype.end=function(b){var e="";b&&b.length&&(e=this.write(b));(this||Tg).charReceived&&(b=(this||Tg).encoding,e+=(this||Tg).charBuffer.slice(0,
(this||Tg).charReceived).toString(b));return e};var zga=Object.freeze({}),nS={},b4=!1,Di="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oS={},c4=!1,Ht="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qS={},e4=!1,gg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rS={},g4=!1,fo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sS={},i4=!1,h4="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Vs={},c9=!1,Lpa=function(){if(c9)return Vs;c9=!0;var b=uj;Vs=Vs=d4();Vs.Stream=MA;Vs.Readable=Vs;Vs.Writable=a4();Vs.Duplex=rD();Vs.Transform=f4();Vs.PassThrough=Aga();b.browser||"disable"!==b.env.READABLE_STREAM||(Vs=MA);return Vs}(),Mpa={},Dga=mG(jm),Npa=mG(bv),Opa=mG(Hpa),Ppa=mG(Lpa),d9=mG(xl);d9(tS,Error);tS.prototype.name="NotFoundError";var Qpa=Npa.EventEmitter,Rpa=new tS,e9=function(b,e,m,a){function g(r){var v={},y;if(a)for(y in a)"undefined"!==
typeof a[y]&&(v[y]=a[y]);if(r)for(y in r)"undefined"!==typeof r[y]&&(v[y]=r[y]);return v}var l=new Qpa;l.sublevels={};l.options=a;l.version="6.5.4";l.methods={};e=e||[];l.put=function(r,v,y,A){"function"===typeof y&&(A=y,y={});b.apply([{key:r,value:v,prefix:e.slice(),type:"put"}],g(y),function(E){if(E)return A(E);l.emit("put",r,v);A(null)})};l.prefix=function(){return e.slice()};l.batch=function(r,v,y){"function"===typeof v&&(y=v,v={});r=r.map(function(A){return{key:A.key,value:A.value,prefix:A.prefix||
e,keyEncoding:A.keyEncoding,valueEncoding:A.valueEncoding,type:A.type}});b.apply(r,g(v),function(A){if(A)return y(A);l.emit("batch",r);y(null)})};l.get=function(r,v,y){"function"===typeof v&&(y=v,v={});b.get(r,e,g(v),function(A,E){A?y(Rpa):y(null,E)})};l.sublevel=function(r,v){return l.sublevels[r]=l.sublevels[r]||e9(b,e.concat(r),m,g(v))};l.readStream=l.createReadStream=function(r){r=g(r);r.prefix=e;var v=b.iterator(r);r=m(r,b.createDecoder(r));r.setIterator(v);return r};l.close=function(r){b.close(r)};
l.isOpen=b.isOpen;l.isClosed=b.isClosed;return l},j4=Ppa.Readable;d9(py,j4);py.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};py.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=!0;b._iterator.next(function(e,m,a){if(e||void 0===m&&void 0===a)return e||b._destroyed||b.push(null),b._cleanup(e);a=b._makeData(m,a);b._destroyed||b.push(a)})}};py.prototype._cleanup=
function(b){if(!this._destroyed){this._destroyed=!0;var e=this;b&&"iterator has ended"!==b.message&&e.emit("error",b);e._iterator?e._iterator.end(function(){e._iterator=null;e.emit("close")}):e.emit("close")}};py.prototype.destroy=function(){this._cleanup()};var Spa={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+b[1]},decode:function(b){b=b.toString();var e=b.indexOf("\u00ff",1);return[b.substring(1,e),b.substring(e+1)]},lowerBound:"\x00",upperBound:"\u00ff"},Tpa=new Opa,Upa=Mpa=function(b){return e9(Cga(b,
Spa,Tpa),[],py,b.options)},Lw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,AN={},Vpa=uj,k4=K8.Transform,f9=xl;f9(sD,k4);sD.prototype.destroy=function(b){if(!(this||Lw)._destroyed){(this||Lw)._destroyed=!0;var e=this||Lw;Vpa.nextTick(function(){b&&e.emit("error",b);e.emit("close")})}};AN=uS(function(b,e,m){b=new sD(b);b._transform=e;m&&(b._flush=m);return b});AN.ctor=uS(function(b,e,m){function a(g){if(!((this||Lw)instanceof a))return new a(g);(this||Lw).options=
Object.assign({},b,g);sD.call(this||Lw,(this||Lw).options)}f9(a,sD);a.prototype._transform=e;m&&(a.prototype._flush=m);return a});AN.obj=uS(function(b,e,m){b=new sD(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=e;m&&(b._flush=m);return b});var g9=AN,Wpa={};lk.prototype.toArray=function(){for(var b=this._length,e=Array(b),m=this._front,a=this._capacity,g=0;g<b;++g)e[g]=this[m+g&a-1];return e};lk.prototype.push=function(b){var e=arguments.length,m=this._length;if(1<e){var a=this._capacity;
if(m+e>a){for(var g=0;g<e;++g){this._checkCapacity(m+1);var l=this._front+m&this._capacity-1;this[l]=arguments[g];m++;this._length=m}return m}l=this._front;for(g=0;g<e;++g)this[l+m&a-1]=arguments[g],l++;this._length=m+e;return m+e}if(0===e)return m;this._checkCapacity(m+1);g=this._front+m&this._capacity-1;this[g]=b;this._length=m+1;return m+1};lk.prototype.pop=function(){var b=this._length;if(0!==b){var e=this._front+b-1&this._capacity-1,m=this[e];this[e]=void 0;this._length=b-1;return m}};lk.prototype.shift=
function(){var b=this._length;if(0!==b){var e=this._front,m=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length=b-1;return m}};lk.prototype.unshift=function(b){var e=this._length,m=arguments.length;if(1<m){var a=this._capacity;if(e+m>a){for(var g=m-1;0<=g;g--){this._checkCapacity(e+1);a=this._capacity;var l=(this._front-1&a-1^a)-a;this[l]=arguments[g];e++;this._length=e;this._front=l}return e}l=this._front;for(g=m-1;0<=g;g--)l=(l-1&a-1^a)-a,this[l]=arguments[g];this._front=l;this._length=
e+m;return e+m}if(0===m)return e;this._checkCapacity(e+1);a=this._capacity;g=(this._front-1&a-1^a)-a;this[g]=b;this._length=e+1;this._front=g;return e+1};lk.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};lk.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};lk.prototype.get=function(b){if(b===(b|0)){var e=this._length;0>b&&(b+=e);if(!(0>b||b>=e))return this[this._front+b&this._capacity-1]}};lk.prototype.isEmpty=function(){return 0===
this._length};lk.prototype.clear=function(){for(var b=this._length,e=this._front,m=this._capacity,a=0;a<b;++a)this[e+a&m-1]=void 0;this._front=this._length=0};lk.prototype.toString=function(){return this.toArray().toString()};lk.prototype.valueOf=lk.prototype.toString;lk.prototype.removeFront=lk.prototype.shift;lk.prototype.removeBack=lk.prototype.pop;lk.prototype.insertFront=lk.prototype.unshift;lk.prototype.insertBack=lk.prototype.push;lk.prototype.enqueue=lk.prototype.push;lk.prototype.dequeue=
lk.prototype.shift;lk.prototype.toJSON=lk.prototype.toArray;Object.defineProperty(lk.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});lk.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(l4(1.5*this._capacity+16))};lk.prototype._resizeTo=function(b){var e=this._capacity;this._capacity=b;b=this._front;var m=this._length;if(b+m>e)for(b=b+m&e-1,m=0;m<b;++m)this[m+e]=this[m+0],this[m+0]=void 0};var m4=Array.isArray,Xpa=Wpa=lk,Ypa=
{},Iv=Ni.Buffer,Zpa=Object.prototype.toString,DV="function"===typeof Iv.alloc&&"function"===typeof Iv.allocUnsafe&&"function"===typeof Iv.from,$pa=Ypa=function(b,e,m){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Zpa.call(b).slice(8,-1)){e>>>=0;var a=b.byteLength-e;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===m)m=a;else if(m>>>=0,m>a)throw new RangeError("'length' is out of bounds");return DV?Iv.from(b.slice(e,e+m)):
new Iv(new Uint8Array(b.slice(e,e+m)))}if("string"===typeof b){m=e;if("string"!==typeof m||""===m)m="utf8";if(!Iv.isEncoding(m))throw new TypeError('"encoding" must be a valid string encoding');return DV?Iv.from(b,m):new Iv(b,m)}return DV?Iv.from(b):new Iv(b)},Hq={};Object.defineProperty(Hq,"__esModule",{value:!0});Hq.collectConflicts=function(b){var e=vS(b);b=n4(b.rev_tree);for(var m=[],a=0,g=b.length;a<g;a++){var l=b[a];l.rev===e||l.opts.deleted||m.push(l.rev)}return m};Hq.collectLeaves=n4;Hq.compactTree=
function(b){var e=[];dL(b.rev_tree,function(m,a,g,l,r){"available"!==r.status||m||(e.push(a+"-"+g),r.status="missing")});return e};Hq.isDeleted=function(b,e){e||(e=vS(b));e=e.substring(e.indexOf("-")+1);b=b.rev_tree.map(Jga);for(var m;m=b.pop();){if(m[0]===e)return!!m[1].deleted;b=b.concat(m[2])}};Hq.isLocalId=function(b){return/^_local/.test(b)};Hq.merge=function(b,e,m){b=r4(b,e);m=Iga(b.tree,m);return{tree:m.tree,stemmedRevs:m.revs,conflicts:b.conflicts}};Hq.revExists=function(b,e){b=b.slice();
var m=e.split("-");e=parseInt(m[0],10);m=m[1];for(var a;a=b.pop();){if(a.pos===e&&a.ids[0]===m)return!0;for(var g=a.ids[2],l=0,r=g.length;l<r;l++)b.push({pos:a.pos+1,ids:g[l]})}return!1};Hq.rootToLeaf=o4;Hq.traverseRevTree=dL;Hq.winningRev=vS;Hq.latest=function(b,e){for(var m=e.rev_tree.slice(),a;a=m.pop();){var g=a.pos,l=a.ids,r=l[0],v=l[1];l=l[2];var y=0===l.length;a=a.history?a.history.slice():[];a.push({id:r,pos:g,opts:v});if(y)for(v=0,y=a.length;v<y;v++){var A=a[v];if(A.pos+"-"+A.id===b)return g+
"-"+r}r=0;for(v=l.length;r<v;r++)m.push({pos:g+1,ids:l[r],history:a})}throw Error("Unable to resolve latest revision for id "+e.id+", rev "+b);};var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});var NA=Ch,nG=Mo,v4=ZD,rr=Vg,Cq=Hq,Kga=s4("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),Lga=s4("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
Fn.invalidIdError=NA.invalidIdError;Fn.normalizeDdocFunctionName=NA.normalizeDdocFunctionName;Fn.parseDdocFunctionName=NA.parseDdocFunctionName;Fn.isDeleted=Cq.isDeleted;Fn.isLocalId=Cq.isLocalId;Fn.allDocsKeysQuery=function(b,e){var m={offset:e.skip};return Promise.all(e.keys.map(function(a){var g=NA.assign({key:a,deleted:"ok"},e);["limit","skip","keys"].forEach(function(l){delete g[l]});return new Promise(function(l,r){b._allDocs(g,function(v,y){if(v)return r(v);e.update_seq&&void 0!==y.update_seq&&
(m.update_seq=y.update_seq);m.total_rows=y.total_rows;l(y.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){m.rows=a;return m})};Fn.parseDoc=u4;Fn.preprocessAttachments=function(b,e,m){function a(){g++;b.length===g&&(l?m(l):m())}if(!b.length)return m();var g=0,l;b.forEach(function(r){function v(F){l=F;A++;A===y.length&&a()}var y=r.data&&r.data._attachments?Object.keys(r.data._attachments):[],A=0;if(!y.length)return a();for(var E in r.data._attachments)r.data._attachments.hasOwnProperty(E)&&
Oga(r.data._attachments[E],e,v)})};Fn.processDocs=function(b,e,m,a,g,l,r,v,y){b=b||1E3;var A=v.new_edits,E=new Jy.Map,F=0,H=e.length;e.forEach(function(I,M){if(I._id&&Cq.isLocalId(I._id))m[I._deleted?"_removeLocal":"_putLocal"](I,{ctx:g},function(X,W){l[M]=X||W;++F===H&&y&&y()});else{var N=I.metadata.id;E.has(N)?(H--,E.get(N).push([I,M])):E.set(N,[[I,M]])}});E.forEach(function(I,M){function N(){++W<I.length?X():++F===H&&y&&y()}function X(){var ea=I[W],Aa=ea[0];ea=ea[1];if(a.has(M))w4(b,a.get(M),Aa,
l,ea,N,r,A);else{var Ka=Cq.merge([],Aa.metadata.rev_tree[0],b);Aa.metadata.rev_tree=Ka.tree;Aa.stemmedRevs=Ka.stemmedRevs||[];Ka=Cq.winningRev(Aa.metadata);var K=Cq.isDeleted(Aa.metadata,Ka);"was_delete"in v&&K?(l[ea]=rr.createError(rr.MISSING_DOC,"deleted"),N()):A&&"missing"===Aa.metadata.rev_tree[0].ids[1].status?(Aa=rr.createError(rr.REV_CONFLICT),l[ea]=Aa,N()):r(Aa,Ka,K,K,!1,K?0:1,ea,N)}}var W=0;X()})};Fn.updateDoc=w4;var AH={};Object.defineProperty(AH,"__esModule",{value:!0});var h9=PD&&"object"===
typeof PD&&"default"in PD?PD["default"]:PD;AH.safeJsonParse=function(b){try{return JSON.parse(b)}catch(e){return h9.parse(b)}};AH.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(e){return h9.stringify(b)}};var aqa={},bqa=oG(Apa),cqa=oG(Upa),BN=oG(yU),dqa=oG(Xpa),eqa=oG($pa),qG=Hq,pG=Mo,It=Jy;OA.prototype.get=function(b,e,m){var a=y4(this,b),g=a.get(e);if(g)return Ch.nextTick(function(){m(null,g)});if(null===g)return Ch.nextTick(function(){m({name:"NotFoundError"})});b.get(e,function(l,
r){if(l)return"NotFoundError"===l.name&&a.set(e,null),m(l);a.set(e,r);m(null,r)})};OA.prototype.batch=function(b){for(var e=0,m=b.length;e<m;e++){var a=b[e],g=y4(this,a.prefix);"put"===a.type?g.set(a.key,a.value):g.set(a.key,null)}this._batch=this._batch.concat(b)};OA.prototype.execute=function(b,e){for(var m=new It.Set,a=[],g=this._batch.length-1;0<=g;g--){var l=this._batch[g],r=l.prefix.prefix()[0]+"\u00ff"+l.key;m.has(r)||(m.add(r),a.push(l))}b.batch(a,e)};var BH=new It.Map,fqa={encode:AH.safeJsonStringify,
decode:AH.safeJsonParse,buffer:!1,type:"cheap-json"},CH=new Ch.changesHandler,gqa=aqa=function(b,e){function m(){N.docStore=K.sublevel("document-store",{valueEncoding:fqa});N.bySeqStore=K.sublevel("by-sequence",{valueEncoding:"json"});N.attachmentStore=K.sublevel("attach-store",{valueEncoding:"json"});N.binaryStore=K.sublevel("attach-binary-store",{valueEncoding:"binary"});N.localStore=K.sublevel("local-store",{valueEncoding:"json"});N.metaStore=K.sublevel("meta-store",{valueEncoding:"json"});"object"===
typeof b.migrate?b.migrate.doMigrationTwo(K,N,a):a()}function a(){N.metaStore.get("_local_last_update_seq",function(aa,T){"undefined"===typeof K._updateSeq&&(K._updateSeq=T||0);N.metaStore.get("_local_doc_count",function(U,pa){K._docCount=U?0:pa;N.metaStore.get("_local_uuid",function(fa,oa){M=fa?Ch.uuid():oa;N.metaStore.put("_local_uuid",M,function(){Ch.nextTick(function(){e(null,I)})})})})})}function g(aa){return K.isClosed()?aa(Error("database is closed")):aa(null,K._docCount)}function l(aa,T){try{aa.apply(null,
T)}catch(U){T[T.length-1](U)}}function r(){var aa=K._queue.peekFront();"read"===aa.type?v(aa):y(aa)}function v(aa){var T=[aa];aa=1;for(var U=K._queue.get(aa);"undefined"!==typeof U&&"read"===U.type;)T.push(U),aa++,U=K._queue.get(aa);var pa=0;T.forEach(function(fa){var oa=fa.args,hb=oa[oa.length-1];oa[oa.length-1]=BN(function(Cb){hb.apply(null,Cb);++pa===T.length&&Ch.nextTick(function(){T.forEach(function(){K._queue.shift()});K._queue.length&&r()})});l(fa.fun,oa)})}function y(aa){var T=aa.args,U=T[T.length-
1];T[T.length-1]=BN(function(pa){U.apply(null,pa);Ch.nextTick(function(){K._queue.shift();K._queue.length&&r()})});l(aa.fun,T)}function A(aa){return BN(function(T){K._queue.push({fun:aa,args:T,type:"write"});1===K._queue.length&&Ch.nextTick(r)})}function E(aa){return BN(function(T){K._queue.push({fun:aa,args:T,type:"read"});1===K._queue.length&&Ch.nextTick(r)})}function F(aa){return("0000000000000000"+aa).slice(-16)}function H(aa,T){"destroy"in ea?ea.destroy(aa,T):T(null)}b=Ch.clone(b);var I=this,
M,N={},X=b.revs_limit,W=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var ea=b.db,Aa=Ch.functionName(ea);if(BH.has(Aa))var Ka=BH.get(Aa);else Ka=new It.Map,BH.set(Aa,Ka);if(Ka.has(W)){var K=Ka.get(W);m()}else Ka.set(W,cqa(bqa(ea(W),b,function(aa){if(aa)return Ka.delete(W),e(aa);K=Ka.get(W);K._docCount=-1;K._queue=new dqa;"object"===typeof b.migrate?b.migrate.doMigrationOne(W,K,m):m()})));I._remote=!1;I.type=function(){return"leveldb"};I._id=function(aa){aa(null,M)};I._info=
function(aa){var T={doc_count:K._docCount,update_seq:K._updateSeq,backend_adapter:Ch.functionName(ea)};return Ch.nextTick(function(){aa(null,T)})};I._get=E(function(aa,T,U){T=Ch.clone(T);N.docStore.get(aa,function(pa,fa){if(pa||!fa)return U(Vg.createError(Vg.MISSING_DOC,"missing"));if(T.rev)var oa=T.latest?qG.latest(T.rev,fa):T.rev;else if(oa=wS(fa),"deleted"in fa?fa.deleted:Fn.isDeleted(fa,oa))return U(Vg.createError(Vg.MISSING_DOC,"deleted"));N.bySeqStore.get(F(fa.rev_map[oa]),function(hb,Cb){if(!Cb)return U(Vg.createError(Vg.MISSING_DOC));
if("_id"in Cb&&Cb._id!==fa.id)return U(Error("wrong doc returned"));Cb._id=fa.id;if("_rev"in Cb){if(Cb._rev!==oa)return U(Error("wrong doc returned"))}else Cb._rev=oa;return U(null,{doc:Cb,metadata:fa})})})});I._getAttachment=function(aa,T,U,pa,fa){var oa=U.content_type;N.binaryStore.get(U.digest,function(hb,Cb){if(hb)return"NotFoundError"!==hb.name?fa(hb):fa(null,pa.binary?pG.blob([""],{type:oa}):"");pa.binary?fa(null,x4(Cb,oa)):fa(null,Cb.toString("base64"))})};I._bulkDocs=A(function(aa,T,U){function pa(Pa,
yb){Pc.get(N.attachmentStore,Pa,function(ac){ac?(ac=Vg.createError(Vg.MISSING_STUB,"unknown stub attachment with digest "+Pa),yb(ac)):yb()})}function fa(Pa){function yb(){if(++ac===ld.length)return Pa(Od)}var ac=0,Od;ld.forEach(function(Md){if(Md._id&&Fn.isLocalId(Md._id))return yb();Pc.get(N.docStore,Md._id,function(Wc,cf){Wc?"NotFoundError"!==Wc.name&&(Od=Wc):Vb.set(Md._id,cf);yb()})})}function oa(Pa,yb){var ac=Promise.resolve();Pa.forEach(function(Od,Md){ac=ac.then(function(){return new Promise(function(Wc,
cf){I._doCompactionNoLock(Md,Od,{ctx:Pc},function(Se){if(Se)return cf(Se);Wc()})})})});ac.then(function(){yb()},yb)}function hb(Pa){var yb=new It.Map;Vb.forEach(function(ac,Od){yb.set(Od,qG.compactTree(ac))});oa(yb,Pa)}function Cb(){oa(jc,function(Pa){Pa&&Ma(Pa);if(I.auto_compaction)return hb(Ma);Ma()})}function va(Pa,yb,ac,Od,Md,Wc,cf,Se){function Oh(th){Fj++;oj||(th?(oj=th,Se(oj)):Fj===Nj.length&&cj())}function nh(th,Wj,Ik,ck){return function(Jk){ua(th,"md5-"+Jk,Wj,Ik,ck)}}function nj(th,Wj,Ik){return function(ck){ZD.binaryMd5(ck,
nh(th,Wj,ck,Ik))}}function cj(){var th=Pa.metadata.rev_map[Pa.metadata.rev];if(th)return Se();th=++zd;Pa.metadata.rev_map[Pa.metadata.rev]=Pa.metadata.seq=th;th=[{key:F(th),value:Pa.data,prefix:N.bySeqStore,type:"put"},{key:Pa.metadata.id,value:Pa.metadata,prefix:N.docStore,type:"put"}];Pc.batch(th);ic[cf]={ok:!0,id:Pa.metadata.id,rev:Pa.metadata.rev};Vb.set(Pa.metadata.id,Pa.metadata);Se()}Rb+=Wc;var oj=null,Fj=0;Pa.metadata.winningRev=yb;Pa.metadata.deleted=ac;Pa.data._id=Pa.metadata.id;Pa.data._rev=
Pa.metadata.rev;Od&&(Pa.data._deleted=!0);Pa.stemmedRevs.length&&jc.set(Pa.metadata.id,Pa.stemmedRevs);var Nj=Pa.data._attachments?Object.keys(Pa.data._attachments):[];for(yb=0;yb<Nj.length;yb++)if(ac=Nj[yb],Od=Pa.data._attachments[ac],Od.stub)ma(Pa.data._id,Pa.data._rev,Od.digest,Oh);else if("string"===typeof Od.data){try{var Ui=pG.atob(Od.data)}catch(th){U(Vg.createError(Vg.BAD_ARG,"Attachment is not a valid base64 string"));return}nj(Pa,ac,Oh)(Ui)}else Pga(Od.data,nj(Pa,ac,Oh));Nj.length||cj()}
function ma(Pa,yb,ac,Od){function Md(){return new Promise(function(Se,Oh){Pc.get(N.attachmentStore,ac,function(nh,nj){if(nh&&"NotFoundError"!==nh.name)return Oh(nh);Se(nj)})})}function Wc(Se){var Oh=[Pa,yb].join("@"),nh={};Se?Se.refs&&(nh.refs=Se.refs,nh.refs[Oh]=!0):(nh.refs={},nh.refs[Oh]=!0);return new Promise(function(nj){Pc.batch([{type:"put",prefix:N.attachmentStore,key:ac,value:nh}]);nj(!Se)})}var cf=Da[ac]||Promise.resolve();Da[ac]=cf.then(function(){return Md().then(Wc).then(function(Se){Od(null,
Se)},Od)})}function ua(Pa,yb,ac,Od,Md){ac=Pa.data._attachments[ac];delete ac.data;ac.digest=yb;ac.length=Od.length;var Wc=Pa.metadata.id;Pa=Pa.metadata.rev;ac.revpos=parseInt(Pa,10);ma(Wc,Pa,yb,function(cf,Se){if(cf||0===Od.length||!Se)return Md(cf);Pc.batch([{type:"put",prefix:N.binaryStore,key:yb,value:eqa(Od,"binary")}]);Md()})}function Ma(Pa){if(Pa)return Ch.nextTick(function(){U(Pa)});Pc.batch([{prefix:N.metaStore,type:"put",key:"_local_last_update_seq",value:zd},{prefix:N.metaStore,type:"put",
key:"_local_doc_count",value:K._docCount+Rb}]);Pc.execute(K,function(yb){if(yb)return U(yb);K._docCount+=Rb;K._updateSeq=zd;CH.notify(W);Ch.nextTick(function(){U(null,ic)})})}var Lb=T.new_edits,ic=Array(aa.docs.length),Vb=new It.Map,jc=new It.Map,Pc=new OA,Rb=0,zd=K._updateSeq,ld=aa.docs,la=ld.map(function(Pa){if(Pa._id&&Fn.isLocalId(Pa._id))return Pa;Pa=Fn.parseDoc(Pa,Lb,I.__opts);Pa.metadata&&!Pa.metadata.rev_map&&(Pa.metadata.rev_map={});return Pa});aa=la.filter(function(Pa){return Pa.error});
if(aa.length)return U(aa[0]);var Da={};if(!la.length)return U(null,[]);(function(Pa){var yb=[];ld.forEach(function(Md){Md&&Md._attachments&&Object.keys(Md._attachments).forEach(function(Wc){Wc=Md._attachments[Wc];Wc.stub&&yb.push(Wc.digest)})});if(!yb.length)return Pa();var ac=0,Od;yb.forEach(function(Md){pa(Md,function(Wc){Wc&&!Od&&(Od=Wc);++ac===yb.length&&Pa(Od)})})})(function(Pa){if(Pa)return U(Pa);fa(function(yb){if(yb)return U(yb);Fn.processDocs(X,la,I,Vb,Pc,ic,va,T,Cb)})})});I._allDocs=function(aa,
T){return"keys"in aa?Fn.allDocsKeysQuery(this,aa):E(function(U,pa){U=Ch.clone(U);g(function(fa,oa){if(fa)return pa(fa);fa={};var hb=U.skip||0;U.startkey&&(fa.gte=U.startkey);U.endkey&&(fa.lte=U.endkey);U.key&&(fa.gte=fa.lte=U.key);if(U.descending){fa.reverse=!0;var Cb=fa.lte;fa.lte=fa.gte;fa.gte=Cb}if("number"===typeof U.limit)var va=U.limit;if(0===va||"gte"in fa&&"lte"in fa&&fa.gte>fa.lte)return fa={total_rows:oa,offset:U.skip,rows:[]},U.update_seq&&(fa.update_seq=K._updateSeq),pa(null,fa);var ma=
[],ua=N.docStore.readStream(fa),Ma=g9.obj(function(Lb,ic,Vb){function jc(ld){var la={id:Pc.id,key:Pc.id,value:{rev:Rb}};if(U.include_docs){la.doc=ld;la.doc._rev=la.value.rev;U.conflicts&&(ld=qG.collectConflicts(Pc),ld.length&&(la.doc._conflicts=ld));for(var Da in la.doc._attachments)la.doc._attachments.hasOwnProperty(Da)&&(la.doc._attachments[Da].stub=!0)}if(!1===U.inclusive_end&&Pc.id===U.endkey)return Vb();if(zd)if("ok"===U.deleted)la.value.deleted=!0,la.doc=null;else return Vb();ma.push(la);Vb()}
var Pc=Lb.value,Rb=wS(Pc),zd="deleted"in Pc?Pc.deleted:Fn.isDeleted(Pc,Rb);if(!zd){if(0<hb--){Vb();return}if("number"===typeof va&&0>=va--){ua.unpipe();ua.destroy();Vb();return}}else if("ok"!==U.deleted){Vb();return}U.include_docs?N.bySeqStore.get(F(Pc.rev_map[Rb]),function(ld,la){jc(la)}):jc()},function(Lb){Promise.resolve().then(function(){if(U.include_docs&&U.attachments)return xS(ma,N,U)}).then(function(){var ic={total_rows:oa,offset:U.skip,rows:ma};U.update_seq&&(ic.update_seq=K._updateSeq);
pa(null,ic)},pa);Lb()}).on("unpipe",function(){Ma.end()});ua.on("error",pa);ua.pipe(Ma)})})(aa,T)};I._changes=function(aa){function T(){aa.done=!0;aa.return_docs&&aa.limit&&aa.limit<fa.length&&(fa.length=aa.limit);Lb.unpipe(ic);Lb.destroy();aa.continuous||aa.cancelled||(aa.include_docs&&aa.attachments&&aa.return_docs?xS(fa,N,aa).then(function(){aa.complete(null,{results:fa,last_seq:oa})}):aa.complete(null,{results:fa,last_seq:oa}))}aa=Ch.clone(aa);if(aa.continuous){var U=W+":"+Ch.uuid();CH.addListener(W,
U,I,aa);CH.notify(W);return{cancel:function(){CH.removeListener(W,U)}}}var pa=aa.descending,fa=[],oa=aa.since||0,hb=0,Cb={reverse:pa};if("limit"in aa&&0<aa.limit)var va=aa.limit;Cb.reverse||(Cb.start=F(aa.since||0));var ma=aa.doc_ids&&new It.Set(aa.doc_ids),ua=Ch.filterChange(aa),Ma=new It.Map,Lb=N.bySeqStore.readStream(Cb),ic=g9.obj(function(Vb,jc,Pc){function Rb(la){function Da(yb){var ac=aa.processChange(yb,la,aa);ac.seq=la.seq;yb=ua(ac);if("object"===typeof yb)return aa.complete(yb);if(yb){hb++;
if(aa.attachments&&aa.include_docs)xS([ac],N,aa).then(function(){aa.onChange(ac)});else aa.onChange(ac);aa.return_docs&&fa.push(ac)}Pc()}var Pa=wS(la);if(la.seq!==zd)return Pc();oa=zd;if(Pa===ld._rev)return Da(ld);N.bySeqStore.get(F(la.rev_map[Pa]),function(yb,ac){Da(ac)})}if(va&&hb>=va)return T(),Pc();if(aa.cancelled||aa.done)return Pc();var zd=parseInt(Vb.key,10),ld=Vb.value;if(zd===aa.since&&!pa||ma&&!ma.has(ld._id))return Pc();if(Vb=Ma.get(ld._id))return Rb(Vb);N.docStore.get(ld._id,function(la,
Da){if(aa.cancelled||aa.done||K.isClosed()||Fn.isLocalId(Da.id))return Pc();Ma.set(ld._id,Da);Rb(Da)})},function(Vb){if(aa.cancelled)return Vb();aa.return_docs&&aa.limit&&aa.limit<fa.length&&(fa.length=aa.limit);Vb()}).on("unpipe",function(){ic.end();T()});Lb.pipe(ic);return{cancel:function(){aa.cancelled=!0;T()}}};I._close=function(aa){if(K.isClosed())return aa(Vg.createError(Vg.NOT_OPEN));K.close(function(T){T?aa(T):(Ka.delete(W),aa())})};I._getRevisionTree=function(aa,T){N.docStore.get(aa,function(U,
pa){U?T(Vg.createError(Vg.MISSING_DOC)):T(null,pa.rev_tree)})};I._doCompaction=A(function(aa,T,U,pa){I._doCompactionNoLock(aa,T,U,pa)});I._doCompactionNoLock=function(aa,T,U,pa){"function"===typeof U&&(pa=U,U={});if(!T.length)return pa();var fa=U.ctx||new OA;fa.get(N.docStore,aa,function(oa,hb){function Cb(Vb){Vb&&(ic=Vb);if(++Lb===T.length){if(ic)return pa(ic);ma()}}function va(Vb){if(Vb)return pa(Vb);fa.batch(ua);if(U.ctx)return pa();fa.execute(K,pa)}function ma(){function Vb(ld){ld&&(Rb=ld);++Pc===
jc.length&&va(Rb)}var jc=Object.keys(Ma);if(!jc.length)return va();var Pc=0,Rb,zd=new It.Map;T.forEach(function(ld){zd.set(aa+"@"+ld,!0)});jc.forEach(function(ld){fa.get(N.attachmentStore,ld,function(la,Da){if(la)return"NotFoundError"===la.name?Vb():Vb(la);la=Object.keys(Da.refs||{}).filter(function(yb){return!zd.has(yb)});var Pa={};la.forEach(function(yb){Pa[yb]=!0});la.length?ua.push({key:ld,type:"put",value:{refs:Pa},prefix:N.attachmentStore}):ua=ua.concat([{key:ld,type:"del",prefix:N.attachmentStore},
{key:ld,type:"del",prefix:N.binaryStore}]);Vb()})})}if(oa)return pa(oa);oa=T.map(function(Vb){var jc=hb.rev_map[Vb];delete hb.rev_map[Vb];return jc});qG.traverseRevTree(hb.rev_tree,function(Vb,jc,Pc,Rb,zd){-1!==T.indexOf(jc+"-"+Pc)&&(zd.status="missing")});var ua=[];ua.push({key:hb.id,value:hb,type:"put",prefix:N.docStore});var Ma={},Lb=0,ic;oa.forEach(function(Vb){ua.push({key:F(Vb),type:"del",prefix:N.bySeqStore});fa.get(N.bySeqStore,F(Vb),function(jc,Pc){if(jc)return"NotFoundError"===jc.name?Cb():
Cb(jc);Object.keys(Pc._attachments||{}).forEach(function(Rb){Ma[Pc._attachments[Rb].digest]=!0});Cb()})})})};I._getLocal=function(aa,T){N.localStore.get(aa,function(U,pa){U?T(Vg.createError(Vg.MISSING_DOC)):T(null,pa)})};I._putLocal=function(aa,T,U){"function"===typeof T&&(U=T,T={});T.ctx?I._putLocalNoLock(aa,T,U):I._putLocalWithLock(aa,T,U)};I._putLocalWithLock=A(function(aa,T,U){I._putLocalNoLock(aa,T,U)});I._putLocalNoLock=function(aa,T,U){delete aa._revisions;var pa=aa._rev,fa=aa._id,oa=T.ctx||
new OA;oa.get(N.localStore,fa,function(hb,Cb){if(hb&&pa||Cb&&Cb._rev!==pa)return U(Vg.createError(Vg.REV_CONFLICT));aa._rev=pa?"0-"+(parseInt(pa.split("-")[1],10)+1):"0-1";oa.batch([{type:"put",prefix:N.localStore,key:fa,value:aa}]);var va={ok:!0,id:aa._id,rev:aa._rev};if(T.ctx)return U(null,va);oa.execute(K,function(ma){if(ma)return U(ma);U(null,va)})})};I._removeLocal=function(aa,T,U){"function"===typeof T&&(U=T,T={});T.ctx?I._removeLocalNoLock(aa,T,U):I._removeLocalWithLock(aa,T,U)};I._removeLocalWithLock=
A(function(aa,T,U){I._removeLocalNoLock(aa,T,U)});I._removeLocalNoLock=function(aa,T,U){var pa=T.ctx||new OA;pa.get(N.localStore,aa._id,function(fa,oa){if(fa)return"NotFoundError"!==fa.name?U(fa):U(Vg.createError(Vg.MISSING_DOC));if(oa._rev!==aa._rev)return U(Vg.createError(Vg.REV_CONFLICT));pa.batch([{prefix:N.localStore,type:"del",key:aa._id}]);var hb={ok:!0,id:aa._id,rev:"0-0"};if(T.ctx)return U(null,hb);pa.execute(K,function(Cb){if(Cb)return U(Cb);U(null,hb)})})};I._destroy=function(aa,T){aa=
Ch.functionName(ea);if(BH.has(aa))var U=BH.get(aa);else return H(W,T);U.has(W)?(CH.removeAllListeners(W),U.get(W).close(function(){U.delete(W);H(W,T)})):H(W,T)}},PA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hqa={},i9=uj;yS.prototype.next=function(b){var e=this||PA;if("function"!=typeof b)throw Error("next() requires a callback argument");if(e._ended)return b(Error("cannot call next() after end()"));if(e._nexting)return b(Error("cannot call next() before previous next() has completed"));
e._nexting=!0;if("function"==typeof e._next)return e._next(function(){e._nexting=!1;b.apply(null,arguments)});i9.nextTick(function(){e._nexting=!1;b()})};yS.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||PA)._ended)return b(Error("end() already called on iterator"));(this||PA)._ended=!0;if("function"==typeof(this||PA)._end)return this._end(b);i9.nextTick(b)};var j9=hqa=yS,Gl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,iqa={},jqa=uj;qy.prototype._serializeKey=function(b){return(this||Gl)._db._serializeKey(b)};qy.prototype._serializeValue=function(b){return(this||Gl)._db._serializeValue(b)};qy.prototype._checkWritten=function(){if((this||Gl)._written)throw Error("write() already called on this batch");};qy.prototype.put=function(b,e){this._checkWritten();var m=(this||Gl)._db._checkKey(b,"key",(this||Gl)._db._isBuffer);if(m)throw m;b=this._serializeKey(b);e=this._serializeValue(e);"function"==typeof(this||
Gl)._put?this._put(b,e):(this||Gl)._operations.push({type:"put",key:b,value:e});return this||Gl};qy.prototype.del=function(b){this._checkWritten();var e=(this||Gl)._db._checkKey(b,"key",(this||Gl)._db._isBuffer);if(e)throw e;b=this._serializeKey(b);"function"==typeof(this||Gl)._del?this._del(b):(this||Gl)._operations.push({type:"del",key:b});return this||Gl};qy.prototype.clear=function(){this._checkWritten();(this||Gl)._operations=[];"function"==typeof(this||Gl)._clear&&this._clear();return this||
Gl};qy.prototype.write=function(b,e){this._checkWritten();"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||Gl)._written=!0;if("function"==typeof(this||Gl)._write)return this._write(e);if("function"==typeof(this||Gl)._db._batch)return(this||Gl)._db._batch((this||Gl)._operations,b,e);jqa.nextTick(e)};var kqa=iqa=qy,ym="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,k9={},lqa=Ni.Buffer,
Sy=uj;Lp.prototype.open=function(b,e){var m=this||ym,a=(this||ym).status;"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||ym)._open?((this||ym).status="opening",this._open(b,function(g){if(g)return m.status=a,e(g);m.status="open";e()})):((this||ym).status="open",Sy.nextTick(e))};Lp.prototype.close=function(b){var e=this||
ym,m=(this||ym).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||ym)._close?((this||ym).status="closing",this._close(function(a){if(a)return e.status=m,b(a);e.status="closed";b()})):((this||ym).status="closed",Sy.nextTick(b))};Lp.prototype.get=function(b,e,m){var a;"function"==typeof e&&(m=e);if("function"!=typeof m)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=
typeof e&&(e={});e.asBuffer=0!=e.asBuffer;if("function"==typeof(this||ym)._get)return this._get(b,e,m);Sy.nextTick(function(){m(Error("NotFound"))})};Lp.prototype.put=function(b,e,m,a){var g;"function"==typeof m&&(a=m);if("function"!=typeof a)throw Error("put() requires a callback argument");if(g=this._checkKey(b,"key"))return a(g);b=this._serializeKey(b);e=this._serializeValue(e);"object"!=typeof m&&(m={});if("function"==typeof(this||ym)._put)return this._put(b,e,m,a);Sy.nextTick(a)};Lp.prototype.del=
function(b,e,m){var a;"function"==typeof e&&(m=e);if("function"!=typeof m)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});if("function"==typeof(this||ym)._del)return this._del(b,e,m);Sy.nextTick(m)};Lp.prototype.batch=function(b,e,m){if(!arguments.length)return this._chainedBatch();"function"==typeof e&&(m=e);"function"==typeof b&&(m=b);if("function"!=typeof m)throw Error("batch(array) requires a callback argument");
if(!Array.isArray(b))return m(Error("batch(array) requires an array argument"));e&&"object"==typeof e||(e={});for(var a=0,g=b.length,l,r;a<g;a++)if(l=b[a],"object"==typeof l&&((r=this._checkKey(l.type,"type"))||(r=this._checkKey(l.key,"key"))))return m(r);if("function"==typeof(this||ym)._batch)return this._batch(b,e,m);Sy.nextTick(m)};Lp.prototype.approximateSize=function(b,e,m){if(null==b||null==e||"function"==typeof b||"function"==typeof e)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");
if("function"!=typeof m)throw Error("approximateSize() requires a callback argument");b=this._serializeKey(b);e=this._serializeKey(e);if("function"==typeof(this||ym)._approximateSize)return this._approximateSize(b,e,m);Sy.nextTick(function(){m(null,0)})};Lp.prototype._setupIteratorOptions=function(b){var e=this||ym;b=Qy(b);"start end gt gte lt lte".split(" ").forEach(function(m){b[m]&&e._isBuffer(b[m])&&0===b[m].length&&delete b[m]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit=
"limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};Lp.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||ym)._iterator?this._iterator(b):new j9(this||ym)};Lp.prototype._chainedBatch=function(){return new kqa(this||ym)};Lp.prototype._isBuffer=function(b){return lqa.isBuffer(b)};Lp.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};Lp.prototype._serializeValue=
function(b){return null==b?"":this._isBuffer(b)||Sy.browser?b:String(b)};Lp.prototype._checkKey=function(b,e){if(null===b||void 0===b)return Error(e+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(e+" cannot be an empty Buffer");if(""===String(b))return Error(e+" cannot be an empty String")};k9=Lp;var mqa=k9;var l9={};l9=function(b){return new tD(b||Rga,null)};var Rp=tD.prototype;Object.defineProperty(Rp,"keys",{get:function(){var b=[];this.forEach(function(e,m){b.push(e)});
return b}});Object.defineProperty(Rp,"values",{get:function(){var b=[];this.forEach(function(e,m){b.push(m)});return b}});Object.defineProperty(Rp,"length",{get:function(){return this.root?this.root._count:0}});Rp.insert=function(b,e){for(var m=this._compare,a=this.root,g=[],l=[];a;){var r=m(b,a.key);g.push(a);l.push(r);a=0>=r?a.left:a.right}g.push(new sr(0,b,e,null,null,1));for(b=g.length-2;0<=b;--b)a=g[b],g[b]=0>=l[b]?new sr(a._color,a.key,a.value,g[b+1],a.right,a._count+1):new sr(a._color,a.key,
a.value,a.left,g[b+1],a._count+1);for(b=g.length-1;1<b;--b){l=g[b-1];a=g[b];if(1===l._color||1===a._color)break;e=g[b-2];if(e.left===l)if(l.left===a)if((r=e.right)&&0===r._color)l._color=1,e.right=ry(1,r),e._color=0,--b;else{e._color=0;e.left=l.right;l._color=1;l.right=e;g[b-2]=l;g[b-1]=a;Hl(e);Hl(l);3<=b&&(b=g[b-3],b.left===e?b.left=l:b.right=l);break}else if((r=e.right)&&0===r._color)l._color=1,e.right=ry(1,r),e._color=0,--b;else{l.right=a.left;e._color=0;e.left=a.right;a._color=1;a.left=l;a.right=
e;g[b-2]=a;g[b-1]=l;Hl(e);Hl(l);Hl(a);3<=b&&(b=g[b-3],b.left===e?b.left=a:b.right=a);break}else if(l.right===a)if((r=e.left)&&0===r._color)l._color=1,e.left=ry(1,r),e._color=0,--b;else{e._color=0;e.right=l.left;l._color=1;l.left=e;g[b-2]=l;g[b-1]=a;Hl(e);Hl(l);3<=b&&(b=g[b-3],b.right===e?b.right=l:b.left=l);break}else if((r=e.left)&&0===r._color)l._color=1,e.left=ry(1,r),e._color=0,--b;else{l.left=a.right;e._color=0;e.right=a.left;a._color=1;a.right=l;a.left=e;g[b-2]=a;g[b-1]=l;Hl(e);Hl(l);Hl(a);
3<=b&&(b=g[b-3],b.right===e?b.right=a:b.left=a);break}}g[0]._color=1;return new tD(m,g[0])};Rp.forEach=function(b,e,m){if(this.root)switch(arguments.length){case 1:return zS(b,this.root);case 2:return AS(e,this._compare,b,this.root);case 3:if(!(0<=this._compare(e,m)))return BS(e,m,this._compare,b,this.root)}};Object.defineProperty(Rp,"begin",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.left;return new tr(this,b)}});Object.defineProperty(Rp,"end",{get:function(){for(var b=[],e=this.root;e;)b.push(e),
e=e.right;return new tr(this,b)}});Rp.at=function(b){if(0>b)return new tr(this,[]);for(var e=this.root,m=[];;){m.push(e);if(e.left){if(b<e.left._count){e=e.left;continue}b-=e.left._count}if(!b)return new tr(this,m);--b;if(e.right){if(b>=e.right._count)break;e=e.right}else break}return new tr(this,[])};Rp.ge=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0>=l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new tr(this,a)};Rp.gt=function(b){for(var e=this._compare,
m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0>l&&(g=a.length);m=0>l?m.left:m.right}a.length=g;return new tr(this,a)};Rp.lt=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0<l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new tr(this,a)};Rp.le=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0<=l&&(g=a.length);m=0>l?m.left:m.right}a.length=g;return new tr(this,a)};Rp.find=function(b){for(var e=this._compare,
m=this.root,a=[];m;){var g=e(b,m.key);a.push(m);if(0===g)return new tr(this,a);m=0>=g?m.left:m.right}return new tr(this,[])};Rp.remove=function(b){return(b=this.find(b))?b.remove():this};Rp.get=function(b){for(var e=this._compare,m=this.root;m;){var a=e(b,m.key);if(0===a)return m.value;m=0>=a?m.left:m.right}};var Ws=tr.prototype;Object.defineProperty(Ws,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(Ws,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-
1]:null},enumerable:!0});Ws.clone=function(){return new tr(this.tree,this._stack.slice())};Ws.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var e=Array(b.length),m=b[b.length-1];e[e.length-1]=new sr(m._color,m.key,m.value,m.left,m.right,m._count);for(var a=b.length-2;0<=a;--a)m=b[a],e[a]=m.left===b[a+1]?new sr(m._color,m.key,m.value,e[a+1],m.right,m._count):new sr(m._color,m.key,m.value,m.left,e[a+1],m._count);m=e[e.length-1];if(m.left&&m.right){b=e.length;for(m=m.left;m.right;)e.push(m),
m=m.right;a=e[b-1];e.push(new sr(m._color,a.key,a.value,m.left,m.right,m._count));e[b-1].key=m.key;e[b-1].value=m.value;for(a=e.length-2;a>=b;--a)m=e[a],e[a]=new sr(m._color,m.key,m.value,m.left,e[a+1],m._count);e[b-1].left=e[b]}m=e[e.length-1];if(0===m._color)for(a=e[e.length-2],a.left===m?a.left=null:a.right===m&&(a.right=null),e.pop(),a=0;a<e.length;++a)e[a]._count--;else if(m.left||m.right)for(m.left?z4(m,m.left):m.right&&z4(m,m.right),m._color=1,a=0;a<e.length-1;++a)e[a]._count--;else{if(1===
e.length)return new tD(this.tree._compare,null);for(a=0;a<e.length;++a)e[a]._count--;a=e[e.length-2];for(var g,l,r,v=e.length-1;0<=v;--v){b=e[v];if(0===v){b._color=1;break}g=e[v-1];if(g.left===b){l=g.right;if(l.right&&0===l.right._color){l=g.right=mv(l);r=l.right=mv(l.right);g.right=l.left;l.left=g;l.right=r;l._color=g._color;b._color=1;g._color=1;r._color=1;Hl(g);Hl(l);if(1<v){var y=e[v-2];y.left===g?y.left=l:y.right=l}e[v-1]=l;break}else if(l.left&&0===l.left._color){l=g.right=mv(l);r=l.left=mv(l.left);
g.right=r.left;l.left=r.right;r.left=g;r.right=l;r._color=g._color;g._color=1;l._color=1;b._color=1;Hl(g);Hl(l);Hl(r);1<v&&(y=e[v-2],y.left===g?y.left=r:y.right=r);e[v-1]=r;break}if(1===l._color)if(0===g._color){g._color=1;g.right=ry(0,l);break}else g.right=ry(0,l);else l=mv(l),g.right=l.left,l.left=g,l._color=g._color,g._color=0,Hl(g),Hl(l),1<v&&(y=e[v-2],y.left===g?y.left=l:y.right=l),e[v-1]=l,e[v]=g,v+1<e.length?e[v+1]=b:e.push(b),v+=2}else{l=g.left;if(l.left&&0===l.left._color){l=g.left=mv(l);
r=l.left=mv(l.left);g.left=l.right;l.right=g;l.left=r;l._color=g._color;b._color=1;g._color=1;r._color=1;Hl(g);Hl(l);1<v&&(y=e[v-2],y.right===g?y.right=l:y.left=l);e[v-1]=l;break}else if(l.right&&0===l.right._color){l=g.left=mv(l);r=l.right=mv(l.right);g.left=r.right;l.right=r.left;r.right=g;r.left=l;r._color=g._color;g._color=1;l._color=1;b._color=1;Hl(g);Hl(l);Hl(r);1<v&&(y=e[v-2],y.right===g?y.right=r:y.left=r);e[v-1]=r;break}if(1===l._color)if(0===g._color){g._color=1;g.left=ry(0,l);break}else g.left=
ry(0,l);else l=mv(l),g.left=l.right,l.right=g,l._color=g._color,g._color=0,Hl(g),Hl(l),1<v&&(y=e[v-2],y.right===g?y.right=l:y.left=l),e[v-1]=l,e[v]=g,v+1<e.length?e[v+1]=b:e.push(b),v+=2}}a.left===m?a.left=null:a.right=null}return new tD(this.tree._compare,e[0])};Object.defineProperty(Ws,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(Ws,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-
1].value},enumerable:!0});Object.defineProperty(Ws,"index",{get:function(){var b=0,e=this._stack;if(0===e.length)return(b=this.tree.root)?b._count:0;e[e.length-1].left&&(b=e[e.length-1].left._count);for(var m=e.length-2;0<=m;--m)e[m+1]===e[m].right&&(++b,e[m].left&&(b+=e[m].left._count));return b},enumerable:!0});Ws.next=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.right)for(e=e.right;e;)b.push(e),e=e.left;else for(b.pop();0<b.length&&b[b.length-1].right===e;)e=b[b.length-
1],b.pop()}};Object.defineProperty(Ws,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].left===b[e])return!0;return!1}});Ws.update=function(b){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var m=Array(e.length),a=e[e.length-1];m[m.length-1]=new sr(a._color,a.key,b,a.left,a.right,a._count);for(b=e.length-2;0<=b;--b)a=e[b],m[b]=a.left===e[b+1]?new sr(a._color,a.key,a.value,m[b+1],a.right,
a._count):new sr(a._color,a.key,a.value,a.left,m[b+1],a._count);return new tD(this.tree._compare,m[0])};Ws.prev=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.left)for(e=e.left;e;)b.push(e),e=e.right;else for(b.pop();0<b.length&&b[b.length-1].left===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(Ws,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].right===b[e])return!0;return!1}});
var nqa=l9,CN={},DN=Ni,Mw=DN.Buffer;Mw.from&&Mw.alloc&&Mw.allocUnsafe&&Mw.allocUnsafeSlow?CN=DN:(A4(DN,CN),CN.Buffer=uD);A4(Mw,uD);uD.from=function(b,e,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Mw(b,e,m)};uD.alloc=function(b,e,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Mw(b);void 0!==e?"string"===typeof m?b.fill(e,m):b.fill(e):b.fill(0);return b};uD.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return Mw(b)};uD.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return DN.SlowBuffer(b)};var Zf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oqa={},m9=xl,C4=mqa,B4=j9,ur=jm,Wga=nqa,EN=CN.Buffer,vD={};m9(eL,B4);eL.prototype._next=function(b){if((this||Zf)._done++>=(this||Zf)._limit||!(this||Zf)._tree.valid)return Pj(b);var e=(this||Zf)._tree.key;var m=(this||Zf)._tree.value;if(!this._test(e))return Pj(b);(this||
Zf).keyAsBuffer&&(e=EN.from(e));(this||Zf).valueAsBuffer&&(m=EN.from(m));(this||Zf)._tree[(this||Zf)._incr]();Pj(function(){b(null,e,m)})};eL.prototype._test=function(){return!0};Dq.clearGlobalStore=function(b){b?Object.keys(vD).forEach(function(e){delete vD[e]}):vD={}};m9(Dq,C4);Dq.prototype._open=function(b,e){var m=this||Zf;Pj(function(){e(null,m)})};Dq.prototype._put=function(b,e,m,a){if("undefined"===typeof e||null===e)e="";m=(this||Zf)._store[(this||Zf)._location].find(b);(this||Zf)._store[(this||
Zf)._location]=m.valid?m.update(e):(this||Zf)._store[(this||Zf)._location].insert(b,e);Pj(a)};Dq.prototype._get=function(b,e,m){var a=(this||Zf)._store[(this||Zf)._location].get(b);if("undefined"===typeof a)return Pj(function(){m(Error("NotFound"))});!1===e.asBuffer||this._isBuffer(a)||(a=EN.from(String(a)));Pj(function(){m(null,a)})};Dq.prototype._del=function(b,e,m){(this||Zf)._store[(this||Zf)._location]=(this||Zf)._store[(this||Zf)._location].remove(b);Pj(m)};Dq.prototype._batch=function(b,e,
m){e=-1;for(var a,g,l,r=b.length,v=(this||Zf)._store[(this||Zf)._location];++e<r;)b[e]&&(a=this._isBuffer(b[e].key)?b[e].key:String(b[e].key),l=v.find(a),"put"===b[e].type?(g=this._isBuffer(b[e].value)?b[e].value:String(b[e].value),v=l.valid?l.update(g):v.insert(a,g)):v=l.remove());(this||Zf)._store[(this||Zf)._location]=v;Pj(m)};Dq.prototype._iterator=function(b){return new eL(this||Zf,b)};Dq.prototype._isBuffer=function(b){return EN.isBuffer(b)};Dq.destroy=function(b,e){b="$"+b;b in vD&&delete vD[b];
Pj(e)};var pqa=oqa=Dq.default=Dq,qqa={},Xga=Ch,Zga=D4(gqa),Yga=D4(pqa);CS.valid=function(){return!0};CS.use_prefix=!1;var rqa=qqa=function(b){b.adapter("memory",CS,!0)},gi=lively.FreezerRuntime.recorderFor("lively.storage/database.js");gi.nodejsRequire=function(b){if(!gi.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==typeof System?System._nodeRequire(b):require("module")._load(b)};gi.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&
(b=b.replace(/^file:\/\//,"")),b;if(!gi.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var e="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):gi.GLOBAL.process.cwd(),m=gi.nodejsRequire("path").join,a=gi.nodejsRequire("fs"),g=a.mkdirSync,l=a.existsSync;a=a.readFileSync;if(b.includes("/"))return m(e,b);try{var r=a(m(e,"../package.json")),v=JSON.parse(r);if("lively.web"===v.name||"lively.next"===v.name){var y=m(e,"../.livelydbs");
l(y)||g(y);return m(y,b)}}catch(A){}e=m(e,".livelydbs");l(e)||g(e);return m(e,b)};gi.nodejs_attemptToLoadProperPouchDB=function(){if(!gi.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,e=System.normalizeSync("lively.storage/index.js");e=System.normalizeSync("pouchdb",e).replace(/file:\/\//,"");b=b(e,"../../lib/index.js");try{return gi.PouchDB=System._nodeRequire(b),gi.PouchDB.plugin(gi.pouchdbAdapterMem),
!0}catch(m){return!1}}try{return gi.PouchDB=require("pouchdb"),gi.PouchDB.plugin(gi.pouchdbAdapterMem),!0}catch(m){return!1}};gi._PouchDB=xla;gi.pouchdbAdapterMem=rqa;gi.Path=$h;gi.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;gi.isNode="undefined"!==typeof global&&"undefined"!==typeof process;gi.PouchDB=gi._PouchDB;gi.PouchDB.plugin&&gi.pouchdbAdapterMem&&gi.PouchDB.plugin(gi.pouchdbAdapterMem);gi.createPouchDB=gi.isNode?function(){var b=
!1,e=!1;return function(m,a){a=void 0===a?{}:a;b||(b=!0,e=gi.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=m.startsWith("http")?"http":e?"leveldb":"memory");"leveldb"==a.adapter&&(m=gi.nodejs_leveldbPath(m));a=Object.assign({},a,{name:m});return new gi.PouchDB(a)}}():function(b,e){return new gi.PouchDB(Object.assign({name:b},e))};var vh=function(b,e){e=void 0===e?{}:e;this.name=b;this.options=e;this._pouchdb=null};vh.findDB=function(b){return this.databases.get(b)};vh.ensureDB=function(b,
e){var m=this.findDB(b);if(m)return m;m=new this(b,e);this.databases.set(b,m);b.endsWith("lively.storage-meta")||this.createMetaEntryForDB(b,e);return m};vh.knownDBs=function(b,e){return gi.Database.ensureDB("lively.storage-meta").getAll().then(function(m){return m.map(function(a){return a._id})})};vh.createMetaEntryForDB=function(b,e){var m=gi.Database.ensureDB("lively.storage-meta");m.has(b).then(function(a){return!a&&m.set(b,{created:Date.now(),options:e})})};vh.knowsDB=function(b){var e=this,
m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(m=e.ensureDB(b),g.yield(m.docCount(),2)):3!=g.nextAddress?(a=g.yieldResult,0<a?g.return(!0):g.yield(m.destroy(),3)):g.return(!1)})};vh.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};vh.prototype.isDestroyed=function(){return!!this.pouchdb._destroyed};vh.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};
vh.prototype.update=function(b,e,m,a){a=void 0===a?0:a;var g=this,l,r,v,y,A,E,F,H,I,M,N,X,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:return l=m=m||{},r=void 0===l.ensure?!0:l.ensure,v=void 0===l.retryOnConflict?!0:l.retryOnConflict,y=void 0===l.maxUpdateAttempts?10:l.maxUpdateAttempts,A={latest:!0},E=g,F=E.pouchdb,ea.setCatchFinallyBlocks(2),ea.yield(F.get(b,A),4);case 4:H=ea.yieldResult;ea.leaveTryBlock(3);break;case 2:if(M=ea.enterCatchBlock(),
"not_found"!==M.name||!r)throw M;case 3:return ea.yield(e(H),5);case 5:I=ea.yieldResult;if(!I||"object"!==typeof I)return ea.return(null);I._id!==b&&(I._id=b);H&&I._rev!==H._rev&&(I._rev=H._rev);ea.setCatchFinallyBlocks(6);return ea.yield(F.put(I),8);case 8:return N=ea.yieldResult,X=N.rev,ea.return(Object.assign(I,{_rev:X}));case 6:W=ea.enterCatchBlock();if("conflict"===W.name&&v&&a<y)return ea.return(g.update(b,e,m,a+1));throw W;}})};vh.prototype.mixin=function(b,e,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,
function(l){return Object.assign(l||{_id:b},e)},m))})};vh.prototype.set=function(b,e,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,function(l){return e},m))})};vh.prototype.get=function(b,e){e=void 0===e?{}:e;var m=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.setCatchFinallyBlocks(2),g.yield(m.pouchdb.get(b,e),4);if(2!=g.nextAddress)return g.return(g.yieldResult);a=g.enterCatchBlock();if("not_found"===
a.name)return g.return(void 0);throw a;})};vh.prototype.has=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(e.get(b),2):m.return(!!m.yieldResult)})};vh.prototype.add=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e.pouchdb.post(b))})};vh.prototype.docList=function(b){b=void 0===b?{}:b;var e=this,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(e.pouchdb.allDocs(b),2);m=E.yieldResult;a=m.rows;g=[];for(l=0;l<a.length;l++)r=a[l],v=r.id,y=r.value,A=y.rev,g.push({id:v,rev:A});return E.return(g)})};vh.prototype.docCount=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.pouchdb.allDocs(),2);e=m.yieldResult;return m.return(e.rows.length)})};vh.prototype.revList=function(b){var e=this,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(e.pouchdb.get(b,{revs:!0}),2);m=r.yieldResult;a=m._revisions;g=a.start;l=a.ids;return r.return(l.map(function(v){return g--+"-"+v}))})};vh.prototype.getAllRevisions=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=e,g=void 0===a.skip?0:a.skip,l=void 0===a.limit?0:a.limit,y.yield(m.revList(b),2)):3!=y.nextAddress?(r=y.yieldResult,0<g&&(r=r.slice(g)),0<l&&(r=r.slice(0,l)),v=r.map(function(A){return{rev:A,
id:b}}),y.yield(m.getDocuments(v),3)):y.return(y.yieldResult)})};vh.prototype.getAll=function(b){b=void 0===b?{}:b;var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(e.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){return l.doc}))})};vh.prototype.setDocuments=function(b,e){var m=this,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(m.pouchdb.bulkDocs(b,
e),2);case 2:a=E.yieldResult,g=0;case 3:if(!(g<a.length)){E.jumpTo(5);break}l=b[g];r=a[g];if(r.ok||"conflict"!==r.name||l._rev){E.jumpTo(4);break}return E.yield(m.set(l._id,l),7);case 7:v=E.yieldResult,y=v._id,A=v._rev,a[g]={ok:!0,id:y,rev:A};case 4:g++;E.jumpTo(3);break;case 5:return E.return(a)}})};vh.prototype.updateDocuments=function(b,e,m){var a=this,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(a.pouchdb.bulkDocs(b,
m),2);case 2:g=N.yieldResult,l=[],r={},v=0;case 3:if(!(v<g.length)){if(!l.length){N.jumpTo(8);break}H=Object;I=H.assign;M=r;return N.yield(a.updateDocuments(l,e,m),9)}y=b[v];A=g[v];r[A._id||y._id]=A;if(A.ok||"conflict"!==A.name){N.jumpTo(4);break}return N.yield(a.get(y._id),7);case 7:if(E=N.yieldResult,F=e(E,y))F._id||(F._id=y._id),F._rev||(F._rev=E._rev),l.push(F);case 4:v++;N.jumpTo(3);break;case 9:r=I.call(H,{},M,{},N.yieldResult);case 8:return N.return(r)}})};vh.prototype.getDocuments=function(b,
e){e=void 0===e?{}:e;var m=this,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return a=e,g=void 0===a.ignoreErrors?!0:a.ignoreErrors,M.yield(m.pouchdb.bulkGet({docs:b}),2);l=M.yieldResult;r=l.results;v=[];for(y=0;y<r.length;y++)for(A=r[y],E=A.docs,F=A.id,console.assert(1===E.length,"getDocuments: expected only one doc for "+F),H=0;H<E.length;H++)I=E[H],g&&!I.ok||v.push(I.ok||I.error||I);return M.return(v)})};vh.prototype.query=function(b,
e){return this.pouchdb.query(b,e)};vh.prototype.remove=function(b,e,m){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return"undefined"!==typeof e?(g={_id:b,_rev:e},r.jumpTo(2)):r.yield(a.get(b),3);2!=r.nextAddress&&(g=r.yieldResult);l=g;return r.return(l?a.pouchdb.remove(l):void 0)})};vh.prototype.removeAll=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(e=b.pouchdb,a.yield(e.allDocs(),
2)):3!=a.nextAddress?(m=a.yieldResult,a.yield(Promise.all(m.rows.map(function(g){return e.remove(g.id,g.value.rev)})),3)):a.return(a.yieldResult)})};vh.prototype.replicateTo=function(b,e){b instanceof gi.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,e)};vh.prototype.replicateFrom=function(b,e){b instanceof gi.Database&&(b=b.pouchdb);return this.pouchdb.replicate.from(b,e)};vh.prototype.sync=function(b,e){b instanceof gi.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,e)};vh.prototype.getConflicts=
function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(e.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){var r={id:l.id,rev:l.doc._rev,doc:l.doc};l.doc._conflicts&&(r.conflicts=l.doc._conflicts,delete l.doc._conflicts);return r}))})};vh.prototype.resolveConflicts=function(b,e){var m=this,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(m.pouchdb.get(b,
{conflicts:!0}),2);case 2:return a=E.yieldResult,g=a._conflicts.map(function(F){return{id:b,rev:F}}),E.yield(m.getDocuments(g),3);case 3:l=E.yieldResult,r=a,v=$jscomp.makeIterator(l),y=v.next();case 4:if(y.done){E.jumpTo(6);break}A=y.value;return E.yield(e(r,A),7);case 7:return(r=E.yieldResult)?E.yield(m.set(b,r),8):E.return(null);case 8:return r=E.yieldResult,E.yield(m.pouchdb.remove(A),5);case 5:y=v.next();E.jumpTo(4);break;case 6:return E.return(r)}})};vh.prototype.diffWith=function(b){var e=this,
m,a,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.yield(b.docList(),2);if(3!=N.nextAddress)return m=N.yieldResult,N.yield(e.docList(),3);a=N.yieldResult;g=m.reduce(function(X,W){var ea={};return Object.assign(X,(ea[W.id]=W.rev,ea))},{});l=a.reduce(function(X,W){var ea={};return Object.assign(X,(ea[W.id]=W.rev,ea))},{});r=[];v=[];y=[];for(A in g)E=g[A],(F=l[A])?E!=F&&y.push({right:{id:A,rev:E},left:{id:A,rev:F}}):v.push({id:A,rev:E});
for(H in l)I=l[H],(M=g[H])||r.push({id:H,rev:I});return N.return({inLeft:r,inRight:v,changed:y})})};vh.loadDump=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=b,g=a.header,l=a.docs,r=e.name||g.name,v=m.ensureDB(r),y.yield(v.setDocuments(l,{new_edits:!1}),2)):y.return(v)})};vh.prototype.dump=function(b){b=void 0===b?{}:b;var e=this,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==
ea.nextAddress)return m=b,a=m.filterFn,g=m.name,l=m.type,r=m.dbInfo,v=e,y=v.name,A=v.pouchdb,F=E=g||y,H=l||A.type(),I=(new Date).toJSON(),M=Object,N=M.assign,ea.yield(A.info(),2);if(3!=ea.nextAddress)return X={name:F,db_type:H,start_time:I,db_info:N.call(M,{},ea.yieldResult,{db_name:E},r)},ea.yield(e.getAll({attachments:!0}),3);W=ea.yieldResult;"function"===typeof a&&(W=a(W,X));return ea.return({header:X,docs:W})})};vh.prototype.backup=function(b){b=void 0===b?1:b;var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==
g.nextAddress?(m=e.name+"_backup_"+b,a=e.constructor.ensureDB(m),g.yield(e.replicateTo(a),2)):g.return(a)})};vh.prototype.migrate=function(b){var e=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(e.getAll(),2);if(3!=y.nextAddress){m=y.yieldResult;a=[];g=[];for(l=0;l<m.length;l++)r=m[l],(v=b(r,l))?(v.hasOwnProperty("_id")||(v._id=r._id),v.hasOwnProperty("_rev")&&delete v._rev,a.push(v)):g.push(r);return y.yield(e.setDocuments(a),3)}return y.return({migrated:a.length,
unchanged:g.length})})};vh.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};vh.prototype.createDesignDoc=function(b){var e=b.name,m=b.mapFn,a=b.reduceFn,g=b.filterFn;b={_id:"_design/"+e,version:void 0===b.version?1:b.version};g&&gi.Path("filters."+e).set(b,g.toString(),!0);m&&gi.Path("views."+e+".map").set(b,m.toString(),!0);a&&gi.Path("views."+e+".reduce").set(b,a.toString(),!0);return b};vh.prototype.addDesignDocs=function(b,e){e=void 0===e?!1:e;var m=this,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==
l.nextAddress?(a=m.createDesignDocs(b),l.yield(m.updateDocuments(a,function(r,v){return!r.hasOwnProperty("version")||v.hasOwnProperty("version")&&v.version>r.version?v:null}),2)):3!=l.nextAddress?(g=l.yieldResult,e?l.yield(Promise.all(a.map(function(r){return m.designDocDoQueryStale(r._id)})),3):l.jumpTo(3)):l.return(g)})};vh.prototype.addDesignDoc=function(b,e){var m=b.name,a=b.mapFn,g=b.reduceFn,l=b.version;e=void 0===e?!1:e;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==
A.nextAddress?(v=r.createDesignDoc({name:m,mapFn:a,reduceFn:g,version:l}),A.yield(r.set(v._id,v),2)):3!=A.nextAddress?(y=A.yieldResult,e?A.yield(r.designDocDoQueryStale(v._id),3):A.jumpTo(3)):A.return(y)})};vh.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};vh.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(vh.prototype,{pouchdb:{configurable:!0,
enumerable:!0,get:function(){return this._pouchdb?this._pouchdb:this._pouchdb=gi.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(vh,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return gi.PouchDB},set:function(b){gi.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});gi.Database=vh;gi.default=vh;var Je=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Je.isHash=function(b){return"string"===
typeof b&&40===b.length&&b.match(Je.hashRe)};Je.checkArg=function(b,e,m){if("undefined"===typeof e&&"string"===typeof m&&!m.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===e&&"string"===typeof m&&!m.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof m){var a=typeof e,g=e?e.constructor.name:"";if(!m.split("|").some(function(l){return a===l||g===l}))throw Error('parameter "'+b+'" expected to be of type '+m+" but is "+(g||a));}if("function"===typeof m&&
(e=m(e))&&e.error)throw Error('check of parameter "'+b+'" failed: '+e.error);};Je.checkArgs=function(b,e,m){for(var a in e)Je.checkArg(a,b[a],e[a]);if("function"===typeof m&&(e=m(b))&&e.error)throw Error(e.error);return b};Je.Database=vh;Je.resource=Tj;Je.obj=Ag;Je.promise=ph;Je.arr=eg;Je.string=ti;Je.Path=$h;Je.parse=Ri;Je.categorizer=JG;Je.sha1=function(){function b(){var l=g.createHash("sha1");return{update:function(r){return l.update(r)},digest:function(){return l.digest("hex")}}}function e(l){function r(ea){A[N]|=
(255&ea)<<X;X?X-=8:(N++,X=24);16===N&&v()}function v(){for(var ea=16;80>ea;ea++){var Aa=A[ea-3]^A[ea-8]^A[ea-14]^A[ea-16];A[ea]=Aa<<1|Aa>>>31}var Ka,K;Aa=E;var aa=F,T=H,U=I,pa=M;for(ea=0;80>ea;ea++){20>ea?(Ka=U^aa&(T^U),K=1518500249):40>ea?(Ka=aa^T^U,K=1859775393):60>ea?(Ka=aa&T|U&(aa|T),K=2400959708):(Ka=aa^T^U,K=3395469782);var fa=(Aa<<5|Aa>>>27)+Ka+pa+K+(0|A[ea]);pa=U;U=T;T=aa<<30|aa>>>2;aa=Aa;Aa=fa}E=E+Aa|0;F=F+aa|0;H=H+T|0;I=I+U|0;M=M+pa|0;for(ea=N=0;16>ea;ea++)A[ea]=0}function y(ea){for(var Aa=
"",Ka=28;0<=Ka;Ka-=4)Aa+=(ea>>Ka&15).toString(16);return Aa}var A,E=1732584193,F=4023233417,H=2562383102,I=271733878,M=3285377520,N=0,X=24,W=0;return A=l?m:new Uint32Array(80),{update:function(ea){if("string"==typeof ea){var Aa=ea.length;W+=8*Aa;for(var Ka=0;Ka<Aa;Ka++)r(ea.charCodeAt(Ka))}else for(Aa=ea.length,W+=8*Aa,Ka=0;Ka<Aa;Ka++)r(ea[Ka])},digest:function(){r(128);(14<N||14===N&&24>X)&&v();N=14;X=24;r(0);r(0);r(0xffffffffff<W?W/1099511627776:0);r(4294967295<W?W/4294967296:0);for(var ea=24;0<=
ea;ea-=8)r(W>>ea);return y(E)+y(F)+y(H)+y(I)+y(M)}}}var m,a,g;return"object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(g="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(m=new Uint32Array(80),a=e),function(l){if(void 0===l)return a(!1);var r=a(!0);return r.update(l),r.digest()}}();Je.hashRe=/^[0-9a-f]+$/i;Je.objectDBs=Je.objectDBs||new Map;var Wh=function(b,e){this.name=b;if(!e.snapshotLocation||!e.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=e.snapshotLocation;this.__versionDB=this.__commitDB=null};Wh.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(b=Je.Database.ensureDB("internal__objectdb-meta"),e.yield(b.getAll(),2)):e.return(e.yieldResult.map(function(m){return m._id}))})};Wh.find=function(b){var e=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(m=Je.objectDBs.get(b))return l.return(m);a=Je.Database.ensureDB("internal__objectdb-meta");
return l.yield(a.get(b),2)}return(g=l.yieldResult)?l.return(e.named(b,g)):l.return()})};Wh.named=function(b,e){e=void 0===e?{}:e;var m=Je.objectDBs.get(b);if(m)return m;if(!e||!e.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof e.snapshotLocation)try{e.snapshotLocation=Je.resource(e.snapshotLocation)}catch(a){e.snapshotLocation=Je.resource(System.baseURL).join(e.snapshotLocation)}m=new this(b,e);Je.objectDBs.set(b,m);Je.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},e,{snapshotLocation:e.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return m};Wh.prototype.destroy=function(){var b=this,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(e=Je.Database.findDB(b.name+"-commits"))?g.yield(e.destroy(),2):g.jumpTo(2);if(4!=g.nextAddress)return(m=Je.Database.findDB(b.name+"-version-graph"))?g.yield(m.destroy(),4):g.jumpTo(4);Je.objectDBs.delete(b.name);a=
Je.Database.ensureDB("internal__objectdb-meta");return g.yield(a.remove(b.name),0)})};Wh.prototype.snapshotResourceFor=function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(e+"/"+b+".json")};Wh.prototype.snapshotObject=function(b,e,m,a,g,l,r,v){var y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return A=function(H){return H},F.yield(A(m),2);E=F.yieldResult;return F.return(y.commit(b,e,E,g,l,r,v))})};Wh.prototype.loadObject=
function(b,e,m,a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.loadSnapshot(b,e,a,g),2);r=y.yieldResult;v=function(A){return A};return y.return(v(r))})};Wh.prototype.has=function(b,e){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(m.objectStats(b,e),2):a.return(!!a.yieldResult)})};Wh.prototype.objects=function(b){var e=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(e.objectStats(b),2);m=l.yieldResult;if(b)return l.return(Object.keys(m||{}));a={};for(g in m)a[g]=Object.keys(m[g]);return l.return(a)})};Wh.prototype.objectStats=function(b,e){var m=this,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:a={};if(g=m.__commitDB){T.jumpTo(2);break}return T.yield(m._commitDB(),3);case 3:g=T.yieldResult;case 2:return l=g,r={reduce:!0,group:!0},b&&e?r.key=
b+"\x00"+e:b&&(r.startkey=b+"\x00",r.endkey=b+"\ufff0"),T.setCatchFinallyBlocks(4),T.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",r),6);case 6:v=T.yieldResult;y=v.rows;A=$jscomp.makeIterator(y);for(E=A.next();!E.done;E=A.next())H=F=E.value,I=H.key,M=H.value,N=M.count,X=M.max,W=M.min,ea=$jscomp.makeIterator(I.split("\x00")),Aa=ea.next().value,Ka=ea.next().value,K=a[Aa]||(a[Aa]={}),K[Ka]={count:N,newest:X,oldest:W};T.leaveTryBlock(5);break;case 4:return aa=T.enterCatchBlock(),console.error(aa),
T.return(a);case 5:return b&&e?T.return((a[b]||{})[e]):b?T.return(a[b]):T.return(a)}})};Wh.prototype.getCommits=function(b,e,m,a){m=void 0===m?"HEAD":m;a=void 0===a?Infinity:a;var g=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(g._log(b,e,m,a),2);case 2:l=A.yieldResult;if(!l.length)return A.return([]);if(r=g.__commitDB){A.jumpTo(3);break}return A.yield(g._commitDB(),4);case 4:r=A.yieldResult;case 3:return v=r,A.yield(v.getDocuments(l.map(function(E){return{id:E}})),
5);case 5:return y=A.yieldResult,A.return(y)}})};Wh.prototype.getCommit=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(m=e.__commitDB)?g.jumpTo(2):g.yield(e._commitDB(),3);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.get(b))})};Wh.prototype.getCommitsWithIds=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return b.length?(m=e.__commitDB)?g.jumpTo(2):g.yield(e._commitDB(),
3):g.return([]);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.getDocuments(b.map(function(l){return{id:l}})))})};Wh.prototype.getLatestCommit=function(b,e,m,a){m=void 0===m?"HEAD":m;a=void 0===a?!1:a;var g=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:return l=$jscomp,r=l.makeIterator,H.yield(g._log(b,e,m,1),2);case 2:v=r.call(l,H.yieldResult);y=v.next().value;if(!y)return H.return(null);if(A=g.__commitDB){H.jumpTo(3);break}return H.yield(g._commitDB(),
4);case 4:A=H.yieldResult;case 3:return E=A,H.yield(E.get(y),5);case 5:return(F=H.yieldResult)&&F.deleted&&!a?H.return(null):H.return(F)}})};Wh.prototype.commit=function(b,e,m,a,g,l,r){l=void 0===l?"HEAD":l;var v=this,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oa){switch(oa.nextAddress){case 1:y=a;A=y.author;E=void 0===y.description?"no description":y.description;F=void 0===y.tags?[]:y.tags;H=y.timestamp;I=void 0===y.message?"":y.message;
M=y.metadata;N=y.preview;if(!b)throw Error("object needs a type");if(!e)throw Error("object needs a name");if(!A)throw Error("Cannot commit "+b+"/"+e+" without user");if(X=v.__versionDB){oa.jumpTo(2);break}return oa.yield(v._versionDB(),3);case 3:X=oa.yieldResult;case 2:return W=X,oa.yield(v.versionGraph(b,e),4);case 4:Ka=(Aa=(ea=oa.yieldResult)?ea.refs[l]:null)?[Aa]:[];if(r){if(!ea)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+r+" but no version entry exists!");if(Aa!==
r)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+r+" but ref "+l+" is of version "+Aa+"!");}aa=(K=Je.isHash(m))?null:m?JSON.stringify(m):null;T=v._createCommit(b,e,E,F,M,A,H,I,Ka,K?null:m,aa,g||N,K?m:null);if(!m||K){oa.jumpTo(5);break}U=v.snapshotResourceFor(T);return oa.yield(U.parent().ensureExistance(),6);case 6:return U.canDealWithJSON?oa.yield(U.writeJson(m),5):oa.yield(U.write(aa),5);case 5:if(pa=v.__commitDB){oa.jumpTo(11);break}return oa.yield(v._commitDB(),12);case 12:pa=
oa.yieldResult;case 11:return fa=pa,oa.yield(fa.set(T._id,T),13);case 13:return T=oa.yieldResult,ea||(ea={refs:{},history:{}}),ea.refs[l]=T._id,ea.history[T._id]=Ka,oa.yield(W.set(b+"/"+e,ea),14);case 14:return oa.return(T)}})};Wh.prototype.loadSnapshot=function(b,e,m,a){a=void 0===a?"HEAD":a;var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(m&&"string"!==typeof m){l=m;y.jumpTo(2);break}if(m){if(r=g.__commitDB){y.jumpTo(6);break}return y.yield(g._commitDB(),
7)}return y.yield(g.getLatestCommit(b,e,a),5);case 5:l=y.yieldResult;y.jumpTo(2);break;case 7:r=y.yieldResult;case 6:return v=r,y.yield(v.get(m),8);case 8:l=y.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+e+" (using "+m+")");return y.return(g.snapshotResourceFor(l).readJson())}})};Wh.prototype.revert=function(b,e,m,a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(l=g.__versionDB){y.jumpTo(2);break}return y.yield(g._versionDB(),
3);case 3:l=y.yieldResult;case 2:return r=l,y.yield(r.get(b+"/"+e),4);case 4:return v=y.yieldResult,v.refs[m||"HEAD"]=a,delete v.deleted,y.yield(r.set(b+"/"+e,v),5);case 5:return y.return(v)}})};Wh.prototype._createCommit=function(b,e,m,a,g,l,r,v,y,A,E,F,H){v=void 0===v?"":v;y=void 0===y?[]:y;!F&&A&&A.preview&&(F=A.preview);return this._createCommitFromSpec({name:e,type:b,timestamp:r||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},tags:a,description:m,preview:F,message:v,content:H||E&&
Je.sha1(E)||null,deleted:!H&&!A,metadata:g,ancestors:y},!0)};Wh.prototype._createCommitFromSpec=function(b,e){e=void 0===e?!1:e;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!e&&b.content&&(e=Je.isHash(b.content),e||(b.content=Je.sha1(b.content)));e=Je.obj.dissoc(b,["preview"]);e=Je.sha1(JSON.stringify(e));
return Object.assign(b,{_id:e})};Wh.prototype._commitDB=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);e=b.name+"-commits";if(m=Je.Database.findDB(e))return a.return(b.__commitDB=m);m=Je.Database.ensureDB(e);return a.yield(m.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=m)})};Wh.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(!b.__commitDB){e.jumpTo(2);
break}return e.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){e.jumpTo(0);break}return e.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,e.jumpToEnd()}})};Wh.prototype.versionGraph=function(b,e){var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(a=m.__versionDB){r.jumpTo(2);break}return r.yield(m._versionDB(),3);case 3:a=r.yieldResult;case 2:return g=a,r.yield(g.get(b+"/"+e),4);case 4:return l=
r.yieldResult,r.return(!l||l.deleted||l._deleted?null:l)}})};Wh.prototype._log=function(b,e,m,a){a=void 0===a?Infinity:a;var g=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(g.versionGraph(b,e),2);l=A.yieldResult;if(!l||l.deleted||l._deleted)return A.return([]);r=l.refs.HEAD;for(v=[];;){if(v.includes(r))throw Error("cyclic version graph???");v.push(r);y=$jscomp.makeIterator(l.history[r]||[]);r=y.next().value;if(!r||v.length>=a)break}return A.return(v)})};
Wh.prototype._findTimestampedVersionsOfObjectNamed=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:a=e;g=void 0===a.include_docs?!0:a.include_docs;l=void 0===a.descending?!0:a.descending;r=void 0===a.startTime?"0".repeat(13):a.startTime;v=void 0===a.endTime?"9".repeat(13):a.endTime;y=b+"\x00"+(l?v:r);A=b+"\x00"+(l?r:v);if(E=m.__commitDB){M.jumpTo(2);break}return M.yield(m._commitDB(),3);case 3:E=
M.yieldResult;case 2:return F=E,M.yield(F.pouchdb.query("nameAndTimestamp_index",Object.assign({},e,{descending:l,include_docs:g,startkey:y,endkey:A})),4);case 4:return H=M.yieldResult,I=H.rows,M.return(g?I.map(function(N){return N.doc}):I.map(function(N){return N.id}))}})};Wh.prototype._versionDB=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);e=b.name+"-version-graph";if(m=Je.Database.findDB(e))return a.return(b.__versionDB=
m);m=Je.Database.ensureDB(e);return a.yield(m.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=m)})};Wh.prototype.exportToDir=function(b,e,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;var g=this,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa,oa,hb,Cb,va,ma,ua,Ma,Lb,ic,Vb,jc,Pc,Rb,zd,ld,la,Da,Pa,yb,ac,Od,Md,Wc,cf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Se){switch(Se.nextAddress){case 1:"string"===typeof b&&(b=Je.resource(b));if(g.__commitDB){Se.jumpTo(2);break}return Se.yield(g._commitDB(),
3);case 3:case 2:if(l=g.__versionDB){Se.jumpTo(4);break}return Se.yield(g._versionDB(),5);case 5:l=Se.yieldResult;case 4:r=l;v=[];if(!e)return Se.yield(r.getAll(),13);y=$jscomp.makeIterator(e);A=y.next();case 8:if(A.done){Se.jumpTo(7);break}F=E=A.value;H=F.name;I=F.type;M=b.join(I).join(H).asDirectory();return Se.yield(g.versionGraph(I,H),11);case 11:return N=Se.yieldResult,X=N.refs,W=N.history,ea=Object.keys(W),Se.yield(g.getCommitsWithIds(ea),12);case 12:Aa=Se.yieldResult;v.push({refs:X,history:W,
currentExportDir:M,commits:Aa,name:H,type:I});A=y.next();Se.jumpTo(8);break;case 13:Ka=Se.yieldResult,K=$jscomp.makeIterator(Ka),aa=K.next();case 14:if(aa.done){Se.jumpTo(7);break}U=T=aa.value;pa=U.refs;fa=U.history;oa=U._id;if(oa.startsWith("_")){Se.jumpTo(15);break}return Se.yield(g.getCommit(pa.HEAD||Object.keys(fa)[0]),17);case 17:return hb=Se.yieldResult,Cb=hb.type,va=hb.name,ma=b.join(Cb).join(va).asDirectory(),ua=Object.keys(fa),Se.yield(g.getCommitsWithIds(ua),18);case 18:Ma=Se.yieldResult,
v.push({refs:pa,history:fa,currentExportDir:ma,commits:Ma,name:va,type:Cb});case 15:aa=K.next();Se.jumpTo(14);break;case 7:Lb={},ic=$jscomp.makeIterator(v),Vb=ic.next();case 19:if(Vb.done){Se.jumpTo(0);break}Pc=jc=Vb.value;Rb=Pc.refs;zd=Pc.history;Lb.$jscomp$loop$prop$currentExportDir$1159$2376=Pc.currentExportDir;ld=Pc.commits;la=Pc.name;Da=Pc.type;a||(ld=ld.filter(function(Oh){return!Oh.deleted}));Pa=m?ld.map(function(Oh){return function(nh){if(nh.deleted||nh._deleted||!nh.content)return null;delete nh._rev;
nh=g.snapshotResourceFor(nh);var nj=Oh.$jscomp$loop$prop$currentExportDir$1159$2376.join(nh.parent().name()+"/"+nh.name());return{from:nh,to:nj}}}(Lb)).filter(Boolean):[];m||ld.forEach(function(Oh){delete Oh._rev});return Se.yield(Lb.$jscomp$loop$prop$currentExportDir$1159$2376.ensureExistance(),22);case 22:return Se.yield(Lb.$jscomp$loop$prop$currentExportDir$1159$2376.join("index.json").writeJson({name:la,type:Da}),23);case 23:return Se.yield(Lb.$jscomp$loop$prop$currentExportDir$1159$2376.join("commits.json").writeJson(ld),
24);case 24:return Se.yield(Lb.$jscomp$loop$prop$currentExportDir$1159$2376.join("history.json").writeJson({refs:Rb,history:zd}),25);case 25:yb=$jscomp.makeIterator(Pa),ac=yb.next();case 26:if(ac.done){Lb={$jscomp$loop$prop$currentExportDir$1159$2376:Lb.$jscomp$loop$prop$currentExportDir$1159$2376};Vb=ic.next();Se.jumpTo(19);break}Md=Od=ac.value;Wc=Md.from;cf=Md.to;return Se.yield(Wc.copyTo(cf),27);case 27:ac=yb.next(),Se.jumpTo(26)}})};Wh.prototype.exportToSpecs=function(b,e){e=void 0===e?!1:e;var m=
this,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:a=[];if(b){ea.jumpTo(2);break}b=[];return ea.yield(m.objectStats(),3);case 3:for(l in g=ea.yieldResult||{},g)for(r in g[l])b.push({type:l,name:r});case 2:v=$jscomp.makeIterator(b),y=v.next();case 4:if(y.done){ea.jumpTo(6);break}E=A=y.value;F=E.name;H=E.type;return ea.yield(m.versionGraph(H,F),7);case 7:return I=ea.yieldResult,M=I.refs,N=I.history,X=Object.keys(N),ea.yield(m.getCommitsWithIds(X),
8);case 8:W=ea.yieldResult;e||(W=W.filter(function(Aa){return!Aa.deleted}));W.forEach(function(Aa){delete Aa._rev});a.push({type:H,name:F,commits:W,history:{refs:M,history:N}});y=v.next();ea.jumpTo(4);break;case 6:return ea.return(a)}})};Wh.prototype.importFromDir=function(b,e,m){function a(I){var M,N,X,W,ea,Aa,Ka,K,aa,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:return M=$jscomp,N=M.makeIterator,U.yield(Promise.all([I.join("index.json").readJson(),
I.join("commits.json").readJson(),I.join("history.json").readJson()]),2);case 2:X=N.call(M,U.yieldResult);W=X.next().value;ea=W.type;Aa=W.name;Ka=X.next().value;K=X.next().value;if(!m){aa=[];U.jumpTo(3);break}return U.yield(I.dirList(1,{exclude:function(pa){return!pa.isDirectory()}}),4);case 4:aa=U.yieldResult;case 3:return T=aa,U.return({dir:I,type:ea,name:Aa,commits:Ka,history:K,snapshotDirs:T})}})}e=void 0===e?!1:e;m=void 0===m?!1:m;var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(b.dirList(3,
{exclude:function(M){return!M.isDirectory()&&"index.json"!==M.name()}}),2);case 2:l=I.yieldResult,l=l.filter(function(M){return"index.json"===M.name()}),r=l.map(function(M){return M.parent()}),v=[],y=$jscomp.makeIterator(r),A=y.next();case 3:if(A.done){I.jumpTo(5);break}E=A.value;F=v;H=F.push;return I.yield(a(E),6);case 6:H.call(F,I.yieldResult);A=y.next();I.jumpTo(3);break;case 5:return I.return(g.importFromSpecs(v,e,m))}})};Wh.prototype.importFromSpecs=function(b,e,m){e=void 0===e?!1:e;m=void 0===
m?!1:m;var a=this,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:if(e){N.jumpTo(2);break}if(g=a.__versionDB){N.jumpTo(3);break}return N.yield(a._versionDB(),4);case 4:g=N.yieldResult;case 3:l=g,r=$jscomp.makeIterator(b),v=r.next();case 5:if(v.done){N.jumpTo(2);break}A=y=v.value;E=A.type;F=A.name;return N.yield(l.get(E+"/"+F),8);case 8:if(N.yieldResult)throw Error("Import failed: object "+E+"/"+F+" already exists and overwrite is not allowed");
v=r.next();N.jumpTo(5);break;case 2:H=$jscomp.makeIterator(b),I=H.next();case 9:if(I.done){N.jumpTo(11);break}M=I.value;return N.yield(a.importFromSpec(M,!0,m),10);case 10:I=H.next();N.jumpTo(9);break;case 11:return N.return(b)}})};Wh.prototype.importFromSpec=function(b,e,m){e=void 0===e?!1:e;m=void 0===m?!1:m;var a=this,g,l,r,v,y,A,E,F,H,I,M,N,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:if(g=a.__versionDB){W.jumpTo(2);break}return W.yield(a._versionDB(),
3);case 3:g=W.yieldResult;case 2:l=g;if(r=a.__commitDB){W.jumpTo(4);break}return W.yield(a._commitDB(),5);case 5:r=W.yieldResult;case 4:v=r;y=a;A=y.snapshotLocation;E=b;F=E.type;H=E.name;I=E.commits;M=E.history;N=E.snapshotDirs;if(!(X=!e)){W.jumpTo(6);break}return W.yield(l.get(F+"/"+H),7);case 7:X=W.yieldResult;case 6:if(X)throw Error("Import failed: object "+F+"/"+H+" already exists and overwrite is not allowed");return W.yield(Promise.all([v.setDocuments(I),l.set(F+"/"+H,M)].concat($jscomp.arrayFromIterable(N&&
m?N.map(function(ea){return ea.copyTo(A.join(ea.name()).asDirectory())}):[]))),8);case 8:return W.return(b)}})};Wh.prototype.importFromResource=function(b,e,m,a,g){g=void 0===g?!1:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(m.readJson(),2);case 2:r=y.yieldResult;if(!(v=g)){y.jumpTo(3);break}return y.yield(l.has(b,e),4);case 4:v=y.yieldResult;case 3:if(!v){y.jumpTo(5);break}return y.yield(l.delete(b,e,!1),5);case 5:return y.return(l.commit(b,
e,r,a))}})};Wh.prototype.replicateTo=function(b,e,m,a){return(new Je.Synchronization(this,b,e,m,Object.assign({method:"replicateTo"},a))).start()};Wh.prototype.replicateFrom=function(b,e,m,a){return(new Je.Synchronization(this,b,e,m,Object.assign({method:"replicateFrom"},a))).start()};Wh.prototype.sync=function(b,e,m,a){return(new Je.Synchronization(this,b,e,m,Object.assign({method:"sync"},a))).start()};Wh.prototype.getConflicts=function(b,e){function m(A,E){var F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){return 1==
H.nextAddress?H.yield(A.getConflicts({include_docs:!0}),2):3!=H.nextAddress?(F=H.yieldResult,H.yield(Promise.all(F.map(function(I){var M,N,X,W,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress){M=I;N=M.id;X=M.rev;W=M.conflicts;ea=M.doc;if(e&&e[E]&&!e[E][N])return Ka.return(null);if(!b)return Ka.jumpTo(2);Aa=W.map(function(K){return{id:N,rev:K}});return Ka.yield(A.getDocuments(Aa),3)}2!=Ka.nextAddress&&(W=Ka.yieldResult);b?Je.obj.dissoc(ea,["_conflicts"]):ea=
null;return Ka.return({id:N,rev:X,conflicts:W,kind:E,doc:ea})})})),3)):H.return(H.yieldResult.filter(Boolean))})}var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(g=a.__commitDB){A.jumpTo(2);break}return A.yield(a._commitDB(),3);case 3:g=A.yieldResult;case 2:l=g;if(r=a.__versionDB){A.jumpTo(4);break}return A.yield(a._versionDB(),5);case 5:r=A.yieldResult;case 4:return v=r,A.yield(m(v,"versions"),6);case 6:return y=A.yieldResult,A.yield(m(l,
"commits"),8);case 8:return A.yield(A.yieldResult,7);case 7:return A.return({versionConflicts:y,commitConflicts:A.yieldResult})}})};Wh.prototype.resolveConflict=function(b){var e=this,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:m=b;a=m.resolved;g=m.delete;l=m.kind;r=m.id;if("versions"===l){if(A=e.__versionDB){E.jumpTo(7);break}return E.yield(e._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(y=e.__commitDB){E.jumpTo(5);
break}return E.yield(e._commitDB(),6);case 6:y=E.yieldResult;case 5:v=y;E.jumpTo(3);break;case 8:A=E.yieldResult;case 7:v=A;case 3:return E.yield(v.set(r,a),9);case 9:return E.yield(Promise.all(g.map(function(F){return v.pouchdb.remove(r,F)})),0)}})};Wh.prototype.getDiff=function(b,e){var m=this,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa,oa,hb,Cb,va,ma,ua,Ma,Lb,ic,Vb,jc,Pc,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zd){switch(zd.nextAddress){case 1:a=b;"string"===typeof b&&
(a=Je.Database.ensureDB(b+"-commits"),e=Je.Database.ensureDB(b+"-version-graph"));if(g=m.__commitDB){zd.jumpTo(2);break}return zd.yield(m._commitDB(),3);case 3:g=zd.yieldResult;case 2:l=g;if(r=m.__versionDB){zd.jumpTo(4);break}return zd.yield(m._versionDB(),5);case 5:r=zd.yieldResult;case 4:return v=r,zd.yield(l.diffWith(a),6);case 6:return y=zd.yieldResult,zd.yield(v.diffWith(e),7);case 7:return A=zd.yieldResult,zd.yield(Promise.all(A.inLeft.map(function(ld){var la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){return 1==
Da.nextAddress?(la=ld.id,Da.yield(v.get(ld.id),2)):Da.return({id:la,doc:Da.yieldResult})})})),8);case 8:return E=zd.yieldResult,F=Je.arr,H=F.groupBy,zd.yield(e.getAll(),9);case 9:return I=H.call(F,zd.yieldResult,function(ld){return ld._id}),zd.yield(Promise.all(A.inRight.map(function(ld){return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){return la.return({id:ld.id,doc:I[ld.id]})})})),10);case 10:return M=zd.yieldResult,zd.yield(Promise.all(A.changed.map(function(ld){var la,Da,Pa,yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){return 1==
ac.nextAddress?(la=Object,Da=la.assign,Pa=ld.left,ac.yield(v.get(ld.left.id),2)):3!=ac.nextAddress?(yb=ac.yieldResult,ac.yield(e.get(ld.right.id),3)):ac.return(Da.call(la,{},Pa,{docA:yb,docB:ac.yieldResult}))})})),11);case 11:return N=zd.yieldResult,X=Je.arr,W=X.groupBy,zd.yield(a.getAll(),12);case 12:ea=W.call(X,zd.yieldResult,function(ld){return ld._id}),Aa=[],Ka=[],K=[],aa=$jscomp.makeIterator(y.inLeft),T=aa.next();case 13:if(T.done){zd.jumpTo(15);break}U=T.value;pa=Aa;fa=pa.push;return zd.yield(l.get(U.id),
16);case 16:fa.call(pa,zd.yieldResult);T=aa.next();zd.jumpTo(13);break;case 15:oa=$jscomp.makeIterator(y.inRight),T=oa.next();case 17:if(T.done){zd.jumpTo(19);break}hb=T.value;Cb=Ka;va=Cb.push;return zd.yield(ea[hb.id],20);case 20:va.call(Cb,zd.yieldResult);T=oa.next();zd.jumpTo(17);break;case 19:ma=$jscomp.makeIterator(y.changed),T=ma.next();case 21:if(T.done){zd.jumpTo(23);break}ua=T.value;Ma=K;Lb=Ma.push;return zd.yield(l.get(ua.left.id),24);case 24:return Lb.call(Ma,zd.yieldResult),ic=K,Vb=ic.push,
zd.yield(a.get(ua.right.id),25);case 25:Vb.call(ic,zd.yieldResult);T=ma.next();zd.jumpTo(21);break;case 23:return jc=Aa.map(function(ld){return Je.obj.select(ld,["_id","name","type"])}),Pc=Ka.map(function(ld){return Je.obj.select(ld,["_id","name","type"])}),Rb=K.map(function(ld){return Je.obj.select(ld,["_id","name","type"])}),zd.return({changed:N,remote:M,local:E,changedCommitTypeAndNames:Rb,remoteCommitTypeAndNames:Pc,localCommitTypeAndNames:jc})}})};Wh.prototype.delete=function(b,e,m){m=void 0===
m?!0:m;var a=this,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:g=[];l=[];if(r=a.__commitDB){aa.jumpTo(2);break}return aa.yield(a._commitDB(),3);case 3:r=aa.yieldResult;case 2:return v=r,y={include_docs:!0,startkey:b+"\x00"+e+"\x00",endkey:b+"\x00"+e+"\uffff"},aa.yield(v.query("nameAndTimestamp_index",y),4);case 4:A=aa.yieldResult;E=A.rows;F=$jscomp.makeIterator(E);for(H=F.next();!H.done;H=F.next())M=I=H.value,
N=M.doc,N.deleted||N._deleted||!N.content||g.push(a.snapshotResourceFor(N)),l.push(Object.assign({},N,{_deleted:!0}));if(X=a.__versionDB){aa.jumpTo(5);break}return aa.yield(a._versionDB(),6);case 6:X=aa.yieldResult;case 5:return W=X,aa.yield(W.get(b+"/"+e),7);case 7:ea=aa.yieldResult;Aa=ea._id;Ka=ea._rev;K={_id:Aa,_rev:Ka,_deleted:!0};if(m){aa.jumpTo(8);break}return aa.yield(v.setDocuments(l),9);case 9:return aa.yield(W.setDocuments([K]),10);case 10:Promise.all(g.map(function(T){return T.remove()}));
case 8:return aa.return({commits:l,history:K,resources:g})}})};Wh.prototype.deleteCommit=function(b,e,m){e=void 0===e?!0:e;m=void 0===m?"HEAD":m;var a=this,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:if(b&&"string"!==typeof b){g=b;Aa.jumpTo(2);break}if(!b){Aa.jumpTo(2);break}if(l=a.__commitDB){Aa.jumpTo(4);break}return Aa.yield(a._commitDB(),5);case 5:l=Aa.yieldResult;case 4:return r=l,Aa.yield(r.get(b),6);case 6:g=Aa.yieldResult;
case 2:if(!g)throw Error("commit needed!");if(v=a.__versionDB){Aa.jumpTo(7);break}return Aa.yield(a._versionDB(),8);case 8:v=Aa.yieldResult;case 7:y=v;if(A=a.__commitDB){Aa.jumpTo(9);break}return Aa.yield(a._commitDB(),10);case 10:A=Aa.yieldResult;case 9:return E=A,F=g,H=F.name,I=F.type,M=g.deleted||g._deleted||!g.content?[]:[a.snapshotResourceFor(g)],N=[Object.assign({},g,{_deleted:!0})],Aa.yield(y.get(I+"/"+H),11);case 11:X=Aa.yieldResult;if(!X)throw Error("No history for "+I+"/"+H+"@"+g._id);if(!X.refs[m])throw Error("Cannot delete commit "+
I+"/"+H+"@"+g._id+" b/c it is not where ref "+m+" is pointing!");W=$jscomp.makeIterator(X.history[g._id]||[]);ea=W.next().value;if(!ea&&1>=Object.keys(X.history).length)X._deleted=!0;else if(ea)delete X.history[g._id],X.refs[m]=ea;else throw Error("Cannot delete commit "+I+"/"+H+"@"+g._id+" b/c it has no ancestor but there are still other commits!");if(e){Aa.jumpTo(12);break}return Aa.yield(y.set(I+"/"+H,X),13);case 13:return Aa.yield(E.setDocuments(N),14);case 14:return Aa.yield(Promise.all(M.map(function(Ka){return Ka.remove()})),
12);case 12:return Aa.return({commits:N,history:X,resources:M})}})};$jscomp.global.Object.defineProperties(Wh.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Je.ObjectDB=Wh;var Zw=function(b,
e,m,a,g){g=void 0===g?{}:g;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},g);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=e;this.remoteVersionDB=m;this.remoteLocation=a;this.deferred=Je.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Zw.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return Je.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
Zw.prototype.waitForIt=function(){return this.deferred.promise};Zw.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};Zw.prototype._startReplicationAndCopy=function(){function b(Vb){return"paused"===ic&&"paused"===Lb&&0>=Ma.copyCalls&&0>=Ma.copyCallsWaiting?Vb.state="paused":"complete"===ic&&"complete"===Lb&&Ma.isComplete()?Vb.state="complete":Vb.state="running"}function e(Vb,jc){if(jc.length||
"complete"===Lb&&"complete"===ic&&Ma.isComplete()){U.cancel();if(jc.length){Vb.state="complete";Vb.errors=jc;ma.cancel();ua.cancel();var Pc=Error("Synchronization error:\n  "+jc.join("\n  "));Pc.errors=jc;console.log(Vb+" errored")}else console.log(Vb+" completed");Pc?Vb.deferred.reject(Pc):Vb.deferred.resolve(Vb)}}function m(Vb){if(!Vb.content)return null;var jc=Vb.content.slice(0,2);Vb=Vb.content.slice(2);return jc+"/"+Vb+".json"}var a=this,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa,oa,
hb,Cb,va,ma,ua,Ma,Lb,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){switch(Vb.nextAddress){case 1:g=a;l=g.fromObjectDB;r=g.remoteCommitDB;v=g.remoteVersionDB;y=g.remoteLocation;A=g.options;E=A.debug;F=void 0===A.live?!1:A.live;H=void 0===A.retry?!1:A.retry;I=A.method;M=A.replicationFilter;N=void 0===A.pushDesignDocToRemote?!1:A.pushDesignDocToRemote;if(X=l.__versionDB){Vb.jumpTo(2);break}return Vb.yield(l._versionDB(),3);case 3:X=Vb.yieldResult;case 2:W=X;if(ea=l.__commitDB){Vb.jumpTo(4);
break}return Vb.yield(l._commitDB(),5);case 5:ea=Vb.yieldResult;case 4:Aa=ea;Ka=l;K=Ka._commitdb_indexes;aa=Ka._versiondb_indexes;T=Ka.snapshotLocation;a.method=I;fa=K.find(function(jc){return"nameTypeFilter"===jc.name});oa=aa.find(function(jc){return"nameTypeFilter"===jc.name});if(!N){Vb.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Vb.yield(r.addDesignDoc(fa),7);case 7:return console.log("adding versionNameTypeFilter"),Vb.yield(v.addDesignDoc(oa),6);case 6:return hb={live:F,
retry:H},Cb=Object.assign({},hb),va=Object.assign({},hb),M&&(Cb.filter=eval("("+fa.filterFn+")"),Cb.query_params=M,va.filter=eval("("+oa.filterFn+")"),va.query_params=M),ma=Aa[I](r,Cb),ua=W[I](v,va),Ma={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},ic=Lb="not started",a.versionReplication=ua,a.commitReplication=ma,a.snapshotReplication=Ma,pa=r.pouchdb.changes({include_docs:!0,live:!0,
conflicts:!0}),U=v.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),pa.on("change",function(jc){var Pc=jc.id,Rb=jc.changes;jc=jc.doc._conflicts;E&&console.log("commit changes "+Pc+":",Rb,jc);jc&&(console.log("commit conflict "+Pc+":",Rb,jc),a.conflicts.push({db:"commits",id:Pc,changes:Rb,conflicts:jc}))}),U.on("change",function(jc){var Pc=jc.id,Rb=jc.changes;jc=jc.doc._conflicts;E&&console.log("version changes "+Pc+":",Rb,jc);jc&&(console.log("version conflict "+Pc+":",Rb,jc),a.conflicts.push({db:"versions",
id:Pc,changes:Rb,conflicts:jc}))}),ma.on("change",function(jc){var Pc,Rb,zd,ld,la,Da,Pa,yb,ac,Od,Md;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wc){switch(Wc.nextAddress){case 1:"replicateTo"===I?jc={direction:"push",change:jc}:"replicateFrom"===I&&(jc={direction:"pull",change:jc});Pc=jc;Rb=Pc.direction;zd=Pc.change;ld=zd.docs;console.log(a+" "+("push"===Rb?"send":"received")+" "+ld.length+" commits");Wc.setCatchFinallyBlocks(2,3);Da=[];Pa=$jscomp.makeIterator(ld);for(yb=Pa.next();!yb.done;yb=
Pa.next())ac=yb.value,ac._id.startsWith("_")||(a.changes.push({direction:Rb,kind:"commits",id:ac._id,type:ac.type,name:ac.name}),(Od=m(ac))&&Da.push(Od));Ma.nFilesToCopy+=Da.length;if(!(0<Ma.copyCalls)){Wc.jumpTo(5);break}Ma.copyCallsWaiting++;return Wc.yield(Je.promise.waitFor(function(){return 0>=Ma.copyCalls}),6);case 6:Ma.copyCallsWaiting--;case 5:return Ma.copyCalls++,b(a),console.log(a+" copying "+Da.length+" snapshots..."),Wc.yield(Je.promise.parallel(Da.map(function(cf){return function(){var Se=
("push"===Rb?T:y).join(cf),Oh=("push"===Rb?y:T).join(cf);return Ma.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+Ma.copyCalls+", "+Se.url+" => "+Oh.url+")"),Promise.resolve()):Oh.exists().then(function(nh){function nj(cj){cj=void 0===cj?0:cj;return Se.copyTo(Oh).catch(function(oj){if(5<=cj)throw oj;return nj(cj+1)})}return nh?(E&&console.log("Skip copying to "+Oh.url+", already exist"),Promise.resolve()):Se.exists().then(function(cj){if(!cj)return console.warn("Skip copying "+
Se.url+", does not exist"),Promise.resolve();E&&console.log(a+" Copying "+Se.url+" => "+Oh.url);return nj(0).then(function(oj){Ma.nFilesCopied++;Ma.stopped||0!==Ma.nFilesCopied%10||console.log(a+" copied "+Ma.nFilesCopied+" of "+Ma.nFilesToCopy+" snapshots");return oj})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:Wc.enterFinallyBlock();Ma.copyCalls--;b(a);e(a,la?[la]:[]);Wc.leaveFinallyBlock(0);break;case 2:throw Md=Wc.enterCatchBlock(),console.error("error in commitReplication onChange",
Md),la=Md,Md;}})}).on("paused",function(){Lb="paused";b(a);E&&console.log(a+" commit replication paused")}).on("active",function(){Lb="active";b(a);E&&console.log(a+" commit replication active")}).on("error",function(jc){Lb="complete";b(a);console.error(a+" commit replication error",jc);e(a,[jc])}).on("complete",function(jc){Lb="complete";b(a);jc="sync"===I?jc.push.errors.concat(jc.pull.errors):jc.errors;e(a,jc)}),ua.on("change",function(jc){"replicateTo"===I?jc={direction:"push",change:jc}:"replicateFrom"===
I&&(jc={direction:"pull",change:jc});var Pc=jc.direction;jc=jc.change.docs;E&&console.log(a+" "+("push"===Pc?"send":"received")+" "+jc.length+" histories");jc.forEach(function(Rb){Rb._id.startsWith("_")||a.changes.push({direction:Pc,kind:"versions",id:Rb._id})})}).on("paused",function(){ic="paused";b(a);E&&console.log(a+" version replication paused")}).on("active",function(jc){ic="active";b(a);E&&console.log(a+" version replication active",jc)}).on("error",function(jc){ic="complete";b(a);console.error(a+
" version replication error",jc);e(a,[jc])}).on("complete",function(jc){ic="complete";b(a);jc="sync"===I?jc.push.errors.concat(jc.pull.errors):jc.errors;e(a,jc)}),a.state="running",Vb.return(a)}})};Zw.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?"not started"!==b.state&&b.isSynchonizing?e.yield(b.whenPaused(),2):e.return(b):e.return(b.stop())})};Zw.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Zw.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Zw.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(e){var m=e.direction,a=e.id,g=e.kind;if("_"!==a[0]){if("versions"===g)var l=b[m][a]||(b[m][a]=[]);else"commits"===g&&(a=e.type+"/"+e.name,l=b[m][a]||(b[m][a]=[]));
l.push(e)}});return b}}});Je.Synchronization=Zw;var CB={describe:function(b){function e(v,y){v=v.find(function(H){return H.name===y}).node.value.body;var A=v.body||[],E=(v.comments||[]).find(function(H){return H.end<A[0].start});v={name:y,parameters:[],sideEffect:!1,returns:null,description:""};if(E&&E.text.trim()){E=Je.string.changeIndent(E.text," ",0).split("\n");E=$jscomp.makeIterator(E);for(var F=E.next();!F.done;F=E.next()){F=F.value;if(F.startsWith("ignore-in-doc")){v.description="";break}F.startsWith("side effect:")?
v.sideEffect=JSON.parse(F.split(":")[1]):F.startsWith("returns:")?v.returns=F.split(":")[1].trim():v.description+=F+"\n"}}E=$jscomp.makeIterator(A);for(F=E.next();!F.done;F=E.next())if(F=F.value,"checkArgs"===Je.Path("declarations.0.init.callee.name").get(F)&&(F=Je.Path("declarations.0.id.properties").get(F)))v.parameters=F.map(function(H){return H.key.name});return v}var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);
if(m._methodSpecs){v.jumpTo(4);break}return v.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=v.yieldResult,g=Je.parse(a,{withComments:!0}),l=Je.categorizer.findDecls(g),m._methodSpecs=l.filter(function(y){return y.parent&&"ObjectDBInterface"===y.parent.name});case 4:return v.return(b?e(m._methodSpecs,b):m._methodSpecs.map(function(y){return e(m._methodSpecs,y.name)}).filter(Boolean));case 2:return r=v.enterCatchBlock(),v.return("Error in describe "+r)}})},ensureDB:function(b){var e,
m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=Je.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),m=e.db,a=e.snapshotLocation,l.yield(Je.ObjectDB.find(m),2);if(g=l.yieldResult)return l.return(!1);Je.ObjectDB.named(m,{snapshotLocation:a});return l.return(!0)})},destroyDB:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(e=Je.checkArgs(b,{db:"string"}),m=e.db,g.yield(Je.ObjectDB.find(m),
2)):3!=g.nextAddress?(a=g.yieldResult)?g.yield(a.destroy(),3):g.return(!1):g.return(!0)})},fetchCommits:function(b){var e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa,T,U,pa,fa,oa,hb,Cb,va,ma,ua,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){switch(Lb.nextAddress){case 1:return e=Je.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
m=e.db,a=e.ref,g=e.type,l=e.typesAndNames,r=e.knownCommitIds,v=e.includeDeleted,y=e.filterFn,Lb.yield(Je.ObjectDB.find(m),2);case 2:A=Lb.yieldResult;a||(a="HEAD");if(!A)throw Error("db "+m+" does not exist");if(A.__commitDB){Lb.jumpTo(3);break}return Lb.yield(A._commitDB(),4);case 4:case 3:if(E=A.__versionDB){Lb.jumpTo(5);break}return Lb.yield(A._versionDB(),6);case 6:E=Lb.yieldResult;case 5:F=E;H={};I={};if(l)for(M=H.keys=[],N=$jscomp.makeIterator(l),X=N.next();!X.done;X=N.next())ea=W=X.value,Aa=
ea.type,Ka=ea.name,K=ea.ref,M.push(Aa+"/"+Ka),K&&(I[Aa+"/"+Ka]=K);else g&&(H.startkey=g+'/\x00"',H.endkey=g+'/\uffff"');return Lb.yield(F.getAll(H),7);case 7:aa=Lb.yieldResult;T=[];U=$jscomp.makeIterator(aa);for(pa=U.next();!pa.done;pa=U.next())fa=pa.value,fa.deleted||fa._deleted||(oa=fa,hb=oa._id,Cb=oa.refs,hb.startsWith("_")||(va=Cb[I[hb]||a]||a,!va||r&&r.hasOwnProperty(va)||T.push(va)));return Lb.yield(A.getCommitsWithIds(T),8);case 8:ma=Lb.yieldResult;v||(ma=ma.filter(function(ic){return!ic.deleted}));
if(y)try{ua=eval("("+y+")");if("function"!==typeof ua)throw Error(y+" does not eval to a function!");Ma=ma.filter(ua);if(Array.isArray(Ma))ma=Ma;else throw Error(y+" does not return an array!");}catch(ic){console.error("fetchCommits filterFn failed:",ic)}return Lb.return(ma)}})},fetchVersionGraph:function(b){var e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=Je.checkArgs(b,{db:"string",type:"string",name:"string"}),m=e.db,a=e.type,g=e.name,
A.yield(Je.ObjectDB.find(m),2);if(3!=A.nextAddress){l=A.yieldResult;if(!l)throw Error("db "+m+" does not exist");return A.yield(l.versionGraph(a,g),3)}r=A.yieldResult;v=r.refs;y=r.history;return A.return({refs:v,history:y})})},exists:function(b){var e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=Je.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),m=e.db,a=e.type,g=e.name,l=e.ref,A.yield(Je.ObjectDB.find(m),2);
if(3!=A.nextAddress)return r=A.yieldResult,A.yield(r.versionGraph(a,g),3);v=A.yieldResult;if(!v)return A.return({exists:!1,commitId:void 0});l=l||"HEAD";return(y=v.refs[l])?A.return({exists:!0,commitId:y}):A.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa,Ka,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:return e=Je.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(U){return U.type&&U.name||U.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),m=e.db,a=e.type,g=e.name,l=e.ref,r=e.commit,v=e.limit,y=e.includeCommits,A=e.knownCommitIds,T.yield(Je.ObjectDB.find(m),2);case 2:E=T.yieldResult;F=l||"HEAD";if(!E)throw Error("db "+m+" does not exist");v||(v=Infinity);r||l||(l=F);if(!r){T.jumpTo(3);break}H=r;if(a&&g){T.jumpTo(3);
break}return T.yield(E.getCommit(r),5);case 5:I=T.yieldResult;if(!I)throw Error("fetchLog: specified commit "+r+" but no commit with this id is in the database!");M=I;a=M.type;g=M.name;case 3:return T.yield(E.versionGraph(a,g),6);case 6:N=T.yieldResult;if(!N)throw Error("Unknown object "+a+"/"+g);X=N;W=X.refs;ea=X.history;H||(H=W[l]);Aa=H;for(Ka=[];Ka.length<v&&!Ka.includes(Aa);){Ka.push(Aa);K=ea[Aa];if(!K||!K.length)break;aa=$jscomp.makeIterator(K);Aa=aa.next().value}if(!y){T.jumpTo(7);break}A&&
(Ka=Ka.filter(function(U){return!A.hasOwnProperty(U)}));return T.yield(E.getCommitsWithIds(Ka),8);case 8:Ka=T.yieldResult;case 7:return T.return(Ka)}})},fetchSnapshot:function(b){var e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return e=Je.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(F){return F.type&&F.name||F.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
m=e.db,a=e.type,g=e.name,l=e.ref,r=e.commit,E.yield(Je.ObjectDB.find(m),2);case 2:v=E.yieldResult;l=l||"HEAD";if(!v)throw Error("db "+m+" does not exist");if(r){E.jumpTo(3);break}return E.yield(v.versionGraph(a,g),4);case 4:y=E.yieldResult;if(!y)throw Error("Unknown object "+a+"/"+g);r=y.refs[l];if(!r)throw Error("Cannot find commit for ref "+l+" of "+a+"/"+g);case 3:return E.yield(v.getCommit(r),5);case 5:A=E.yieldResult;if(!A)throw Error("Cannot find commit "+r);return E.return(v.loadSnapshot(void 0,
void 0,A))}})},revert:function(b){var e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Je.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),m=e.db,a=e.type,g=e.name,l=e.ref,r=e.toCommitId,y.yield(Je.ObjectDB.find(m),2);v=y.yieldResult;l||(l="HEAD");return y.return(v.revert(a,g,l,r))})},commit:function(b){var e,m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return e=Je.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),m=e.db,a=e.type,g=e.name,l=e.ref,r=e.expectedParentCommit,v=e.commitSpec,y=e.snapshot,A=e.preview,F.yield(Je.ObjectDB.find(m),2);E=F.yieldResult;l||(l="HEAD");return F.return(E.commit(a,g,y,v,A,l,r))})},exportToSpecs:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e=Je.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),m=e.db,a=e.nameAndTypes,l.yield(Je.ObjectDB.find(m),2);g=l.yieldResult;if(!g)throw Error("db "+m+" does not exist");return l.return(g.exportToSpecs(a))})},exportToDir:function(b){var e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=Je.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),m=e.db,a=e.url,g=e.nameAndTypes,l=e.copyResources,r=e.includeDeleted,A.yield(Je.ObjectDB.find(m),2);v=A.yieldResult;if(!v)throw Error("db "+m+" does not exist");try{y=Je.resource(a)}catch(E){y=Je.resource(System.baseURL).join(a)}return A.return(v.exportToDir(y,g,l,r))})},importFromDir:function(b){var e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Je.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),m=e.db,a=e.url,g=e.overwrite,l=e.copyResources,y.yield(Je.ObjectDB.find(m),2);r=y.yieldResult;if(!r)throw Error("db "+m+" does not exist");try{v=Je.resource(a)}catch(A){v=Je.resource(System.baseURL).join(a)}return y.return(r.importFromDir(v,g,l))})},importFromSpecs:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Je.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
m=e.db,a=e.specs,g=e.overwrite,l=e.copyResources,v.yield(Je.ObjectDB.find(m),2);r=v.yieldResult;if(!r)throw Error("db "+m+" does not exist");return v.return(r.importFromSpecs(a,g,l))})},importFromResource:function(b){var e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return e=Je.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),m=e.db,a=e.type,g=e.name,l=e.url,r=e.commitSpec,
v=e.purgeHistory,E.yield(Je.ObjectDB.find(m),2);y=E.yieldResult;if(!y)throw Error("db "+m+" does not exist");try{A=Je.resource(l)}catch(F){A=Je.resource(System.baseURL).join(l)}return E.return(y.importFromResource(a,g,A,r,v))})},delete:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Je.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),m=e.db,a=e.type,g=e.name,l=e.dryRun,v.yield(Je.ObjectDB.find(m),
2);r=v.yieldResult;return v.return(r.delete(a,g,"undefined"===typeof l||l))})},deleteCommit:function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=Je.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),m=e.db,a=e.commit,g=e.dryRun,r.yield(Je.ObjectDB.find(m),2);l=r.yieldResult;return r.return(l.deleteCommit(a,"undefined"===typeof g||g))})},fetchConflicts:function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return e=Je.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),m=e.db,a=e.includeDocs,g=e.only,r.yield(Je.ObjectDB.find(m),2);l=r.yieldResult;return r.return(l.getConflicts(a,g))})},resolveConflict:function(b){var e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Je.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),m=e.db,a=e.resolved,g=e.delete,l=e.kind,r=e.id,
y.yield(Je.ObjectDB.find(m),2);v=y.yieldResult;return y.return(v.resolveConflict({resolved:a,delete:g,kind:l,id:r}))})},fetchDiff:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=Je.checkArgs(b,{db:"string",otherDB:"string"}),m=e.db,a=e.otherDB,l.yield(Je.ObjectDB.find(m),2);g=l.yieldResult;return l.return(g.getDiff(a))})},synchronize:function(b){var e,m,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:return e=
Je.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),m=e.db,a=e.otherDB,g=e.otherDBSnapshotLocation,l=e.onlyTypesAndNames,r=e.method,M.yield(Je.ObjectDB.find(m),2);case 2:return g||(g=a.replace(/\/$/,"")+"/snapshots"),r||(r="replicateTo"),M.yield(Je.ObjectDB.find(m),3);case 3:return v=M.yieldResult,M.yield(Je.ObjectDB.named(a,{snapshotLocation:g}),4);case 4:return y=M.yieldResult,M.yield(y._commitDB(),
5);case 5:return A=M.yieldResult,M.yield(y._versionDB(),6);case 6:return E=M.yieldResult,F=y.snapshotLocation,H={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},I=v[r](A,E,F,H),M.yield(I.whenPaused(),7);case 7:return M.yield(I.safeStop(),8);case 8:return M.yield(I.waitForIt(),9);case 9:return M.return(Je.obj.select(I,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Je.ObjectDBInterface=CB;Je.ObjectDBInterface=CB;Je.ObjectDBInterface=CB;var vk=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};vk.prototype._processResponse=function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=b.headers.get("content-type"),g.yield(b.text(),2);m=g.yieldResult;if("application/json"===e)try{a=JSON.parse(m)}catch(l){}if(!b.ok||a&&a.error)throw Error(a&&a.error||m||b.statusText);return g.return(a||m)})};vk.prototype._GET=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(a=Object.keys(e).map(function(y){var A=e[y];"object"===typeof A&&(A=JSON.stringify(A));return y+"="+encodeURIComponent(A)}).join("&"),g=m.serverURL+b+"?"+a,l=m,r=l._processResponse,v.yield(fetch(g),2)):v.return(r.call(l,v.yieldResult))})};vk.prototype._POST=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(a=m.serverURL+b,g=m,l=g._processResponse,r.yield(fetch(a,{method:"POST",body:JSON.stringify(e),
headers:{"content-type":"application/json"}}),2)):r.return(l.call(g,r.yieldResult))})};vk.prototype.describe=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("describe",b))})};vk.prototype.ensureDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("ensureDB",b))})};vk.prototype.destroyDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("destroyDB",
b))})};vk.prototype.fetchCommits=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchCommits",b))})};vk.prototype.fetchVersionGraph=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchVersionGraph",b))})};vk.prototype.exists=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("exists",b))})};vk.prototype.fetchLog=function(b){var e=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchLog",b))})};vk.prototype.fetchSnapshot=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchSnapshot",b))})};vk.prototype.revert=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("revert",b))})};vk.prototype.commit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("commit",
b))})};vk.prototype.exportToSpecs=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("exportToSpecs",b))})};vk.prototype.exportToDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("exportToDir",b))})};vk.prototype.importFromDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromDir",b))})};vk.prototype.importFromSpecs=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromSpecs",b))})};vk.prototype.importFromResource=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromResource",b))})};vk.prototype.delete=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("delete",b))})};vk.prototype.deleteCommit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("deleteCommit",
b))})};vk.prototype.fetchConflicts=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchConflicts",b))})};vk.prototype.resolveConflict=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("resolveConflict",b))})};vk.prototype.fetchDiff=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchDiff",b))})};vk.prototype.synchronize=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("synchronize",b))})};Je.ObjectDBHTTPInterface=vk;Je.default=Wh;var wk=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");wk.applyExclude=function(b,e){return e?"string"===typeof e?!b.url.includes(e):"function"===typeof e?!e(b):e instanceof RegExp?!e.test(b.url):!0:!0};wk.Resource=Ug;wk.Database=vh;wk.debug=!1;wk.slashRe=/\//g;var EV=function(){return wk.Database.apply(this,
arguments)||this};$jscomp.inherits(EV,wk.Database);EV.ensureDB=function(b,e){return wk.Database.ensureDB.call(this,"lively.storage-"+b,e)};wk.StorageDatabase=EV;var Br=function(){return wk.Resource.apply(this,arguments)||this};$jscomp.inherits(Br,wk.Resource);Br.prototype.read=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return wk.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);m=(e=a.yieldResult)&&e.content;
return a.return(m?"string"===typeof m?m:JSON.stringify(m):"")})};Br.prototype.readJson=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.read(),2);e=m.yieldResult;return m.return("string"===typeof e?JSON.parse(e):e)})};Br.prototype.write=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){wk.debug&&console.log("["+e+"] write");b||(b="");if(e.isDirectory())throw Error("Cannot write into a directory! ("+
e.url+")");return m.yield(e.db.update(e.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(e.url+" already exists and is a directory (cannot write into it!)");var g=Date.now();return a?Object.assign({},a,{lastModified:g,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:g,created:g,size:"string"===typeof b?b.length:0,content:b}}),2)}return m.return(e)})};Br.prototype.writeJson=function(b){return this.write(b)};Br.prototype.mkdir=
function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){wk.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(e=a.yieldResult){if(!e.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}m=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:m,created:m,isDirectory:!0}),3)}return a.return(b)})};Br.prototype.exists=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return wk.debug&&console.log("["+b+"] exists"),(e=b.isRoot())?m.jumpTo(2):m.yield(b.db.get(b.pathWithoutQuery()),3);2!=m.nextAddress&&(e=!!m.yieldResult);return m.return(e)})};Br.prototype.remove=function(){var b=this,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==
g.nextAddress?(wk.debug&&console.log("["+b+"] remove"),e=b.pathWithoutQuery(),m=b.db,g.yield(m.docList({startkey:e,endkey:e+"\uffff"}),2)):3!=g.nextAddress?(a=g.yieldResult,g.yield(m.setDocuments(a.map(function(l){return{_id:l.id,_rev:l.rev,_deleted:!0}})),3)):g.return(b)})};Br.prototype.readProperties=function(){wk.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};Br.prototype.dirList=function(b,e){b=void 0===b?1:b;e=void 0===e?{}:e;var m=this,a,g,l,r,v,
y,A,E,F,H,I,M,N,X,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress){wk.debug&&console.log("["+m+"] dirList");if(!m.isDirectory())return ea.return(m.asDirectory().dirList(b,e));a=e;g=a.exclude;l=m.pathWithoutQuery();r=[];return ea.yield(m.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}v=ea.yieldResult;"infinity"===b&&(b=Infinity);y={};for(A=0;A<v.length;y={$jscomp$loop$prop$dirToChild$2378:y.$jscomp$loop$prop$dirToChild$2378},A++)if(F=E=v[A],H=F._id,H.startsWith(l)&&
l!==H)if(I=H.slice(l.length),M=I.includes("/")?I.match(wk.slashRe).length+1:1,M>b)y.$jscomp$loop$prop$dirToChild$2378=m.join(I.split("/").slice(0,b).join("/")+"/"),r.some(function(Aa){return function(Ka){return Ka.equals(Aa.$jscomp$loop$prop$dirToChild$2378)}}(y))||r.push(y.$jscomp$loop$prop$dirToChild$2378);else if(N=m.join(I),!g||wk.applyExclude(N,g))for(r.push(N),X="created lastModified mode group user contentType type etag size".split(" "),W=0;W<X.length;W++)N[X[W]]=E[X[W]];return ea.return(r)})};
$jscomp.global.Object.defineProperties(Br.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=wk.StorageDatabase.ensureDB(this.host()))}}});wk.LivelyStorageResource=Br;var FV={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:wk.LivelyStorageResource};wk.resourceExtension=FV;wk.resourceExtension=FV;wk.resourceExtension=FV;wk.registerExtension=q;
wk.registerExtension(wk.resourceExtension);wk.default=Br;var Xt=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Xt.default=vh;Xt.Database=vh;Xt.ObjectDB=Wh;Xt.ObjectDBInterface=CB;Xt.ObjectDBHTTPInterface=vk;Xt.ObjectDB=Wh;Xt.ObjectDB=Wh;Xt.ObjectDBInterface=CB;Xt.ObjectDBInterface=CB;Xt.ObjectDBHTTPInterface=vk;Xt.ObjectDBHTTPInterface=vk;var sqa=Object.freeze({__proto__:null,Database:vh,ObjectDB:Wh,ObjectDBInterface:CB,ObjectDBHTTPInterface:vk}),mh=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
mh.convertToSerializableCommit=DS;mh.ensureCommitInfo=rG;mh.ObjectDBHTTPInterface=vk;mh.Database=vh;mh.loadMorphFromSnapshot=Wu;mh.createMorphSnapshot=gA;mh.resource=Tj;mh.obj=Ag;mh.Path=$h;mh.arr=eg;mh.string=ti;mh.morphicDBs=mh.morphicDBs||(mh.morphicDBs=new Map);mh.defaultServerURL=("undefined"!==typeof document?document.location.origin:"http://localhost:9001")+"/objectdb/";mh.convertToSerializableCommit=DS;mh.convertToSerializableCommit=DS;mh.ensureCommitInfo=rG;mh.ensureCommitInfo=rG;var GV=
function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=e.hasOwnProperty("MorphicDB")&&"function"===typeof e.MorphicDB?e.MorphicDB:e.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){var l=g.snapshotLocation;g=g.serverURL;this.name=a;this.serverURL=g;this.snapshotLocation=l||a+"/snapshots/";this.httpDB=
new mh.ObjectDBHTTPInterface(g);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a._initialized?g.return():g.yield(a.ensureDB(),2);a._initialized=
!0;g.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(a){var g=a.content.slice(0,2);a=a.content.slice(2);return mh.resource(System.decanonicalize(this.snapshotLocation)).join(g+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,g){a=void 0===a?"world":a;g=void 0===g?!1:
g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(l.initializeIfNecessary(),2);r=l;v=r.name;y={};return A.return(l.httpDB.fetchCommits({db:v,type:a,ref:"HEAD",knownCommitIds:y,includeDeleted:g}))})}},{key:"fetchCommit",value:function(a,g,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);if(3!=A.nextAddress)return v=[{type:a,name:g,ref:l}],
A.yield(r.httpDB.fetchCommits({db:r.name,ref:l,type:a,typesAndNames:v,knownCommitIds:{}}),3);y=A.yieldResult;return A.return(mh.convertToSerializableCommit(y[0]))})}},{key:"fetchSnapshot",value:function(a,g,l,r){var v=this,y=arguments,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress)return A=a,1===y.length&&A.type&&A.name&&(a=A.type,g=A.name,l=A._id),H.yield(v.initializeIfNecessary(),2);E=v;F=E.name;return H.return(v.httpDB.fetchSnapshot({db:F,type:a,name:g,
ref:r,commit:l}))})}},{key:"exists",value:function(a,g,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return A.return(r.httpDB.exists({db:y,type:a,name:g,ref:l}))})}},{key:"history",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchVersionGraph({db:v,
type:a,name:g}))})}},{key:"log",value:function(a,g,l,r){l=void 0===l?!1:l;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==E.nextAddress?E.yield(v.initializeIfNecessary(),2):3!=E.nextAddress?(y=v,A=y.name,E.yield(v.httpDB.fetchLog({db:A,commit:a,limit:g,includeCommits:l,knownCommitIds:r}),3)):E.return(E.yieldResult.map(mh.convertToSerializableCommit))})}},{key:"revert",value:function(a,g,l,r){r=void 0===r?"HEAD":r;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(v.initializeIfNecessary(),2);y=v;A=y.name;return E.return(v.httpDB.revert({db:A,type:a,name:g,toCommitId:l,ref:r}))})}},{key:"snapshotAndCommit",value:function(a,g,l,r,v,y,A){var E=this,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(mh.createMorphSnapshot(l,r),2);if(3!=I.nextAddress)return F=I.yieldResult,I.yield(E.commit(a,g,F,v,y,A),3);H=I.yieldResult;H=mh.convertToSerializableCommit(H);l.changeMetaData("commit",
mh.obj.dissoc(H,["preview"]),!0,!1);return I.return(H)})}},{key:"commit",value:function(a,g,l,r,v,y){var A=this,E=arguments,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return F=a,1===E.length&&F.type&&F.name&&(a=F.type,g=F.name,l=F.snapshot||F.content,r=mh.obj.dissoc(F,["snapshot","_rev","_id","ancestors","deleted"]),y=F._id),M.yield(A.initializeIfNecessary(),2);H=A;I=H.name;return M.return(A.httpDB.commit({db:I,type:a,name:g,ref:v,expectedParentCommit:y,
commitSpec:r,snapshot:l}))})}},{key:"load",value:function(a,g,l,r,v){var y=this,A,E,F,H,I,M,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:"object"===typeof a?r=a:A=a;E=r;if(!E)return X.yield(y.fetchCommit(A,g,v),6);if("string"!==typeof E){X.jumpTo(3);break}F=$jscomp;H=F.makeIterator;return X.yield(y.log(E,1,!0),5);case 5:I=H.call(F,X.yieldResult);E=I.next().value;X.jumpTo(3);break;case 6:E=X.yieldResult;case 3:return X.yield(y.fetchSnapshot(void 0,void 0,
E._id),7);case 7:return M=X.yieldResult,X.yield(mh.loadMorphFromSnapshot(M,l),8);case 8:return N=X.yieldResult,E=mh.convertToSerializableCommit(E),N.changeMetaData("commit",mh.obj.dissoc(E,["preview"]),!0,!1),X.return(N)}})}},{key:"fetchDiff",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(g.initializeIfNecessary(),2);l=g;r=l.name;return v.return(g.httpDB.fetchDiff({db:r,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,
g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchConflicts({db:v,includeDocs:a,only:g}))})}},{key:"resolveConflict",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(g.initializeIfNecessary(),2);l=g;r=l.name;return v.return(g.httpDB.resolveConflict(Object.assign({db:r},a)))})}},{key:"synchronize",
value:function(a){var g=a.method,l=a.otherDB,r=a.otherDBSnapshotLocation,v=a.onlyTypesAndNames,y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.yield(y.initializeIfNecessary(),2);A=y;E=A.name;return F.return(y.httpDB.synchronize({db:E,method:g,otherDB:l,otherDBSnapshotLocation:r,onlyTypesAndNames:v}))})}},{key:"softDelete",value:function(a,g,l,r,v){var y=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return A.return(y.commit(a,
g,void 0,l,r,v))})}},{key:"delete",value:function(a,g,l){l=void 0===l?!0:l;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return A.return(r.httpDB.delete({db:y,type:a,name:g,dryRun:l}))})}},{key:"deleteCommit",value:function(a,g){g=void 0===g?!0:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;
v=r.name;return y.return(l.httpDB.deleteCommit({db:v,commit:a,dryRun:g}))})}},{key:"codeSearchInPackages",value:function(a,g,l,r){g=void 0===g?"part":g;var v=this,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(v.latestCommits(g),2);case 2:y=N.yieldResult,A=[],E=0,"function"===typeof r&&(y=y.filter(r)),F=$jscomp.makeIterator(y),H=F.next();case 3:if(H.done){N.jumpTo(5);break}I=H.value;"function"===typeof l&&l(I.name,E++,y.length);
return N.yield(v._textSearchInSnapshotOfCommit(a,I),6);case 6:M=N.yieldResult;M.length&&A.push.apply(A,$jscomp.arrayFromIterable(M));H=F.next();N.jumpTo(3);break;case 5:return N.return(A)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,g,l){var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return v=g,y=v._id,(A=l)?F.jumpTo(2):F.yield(r.fetchSnapshot(void 0,void 0,y),3);2!=F.nextAddress&&(A=F.yieldResult);E=A;return F.return((new mh.SnapshotPackageHelper(E)).textSearch(a,
g))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:mh.defaultServerURL})}},{key:"named",value:function(a,g){var l=mh.morphicDBs.get(a);if(l)return l;if(!g.serverURL)throw Error("Needs serverURL!");g=new this(a,g);mh.morphicDBs.set(a,g);return g}},{key:"wellKnownMorphicDBs",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return g=mh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),v.yield(g.getAll(),2);l=v.yieldResult;r=l.reduce(function(y,A){var E={};return Object.assign(y,(E[A._id]=a.named(A.name,{serverURL:A.serverURL,snapshotLocation:A.snapshotLocation}),E))},{});r.default||(r.default=a.default);return v.return(r)})}},{key:"addWellKnownMorphicDB",value:function(a,g){var l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){l=g;r=l.name;v=l.snapshotLocation;
y=l.serverURL;A=mh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return E.yield(A.set(a,{name:r,snapshotLocation:v,serverURL:y}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g=mh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return l.yield(g.remove(a),0)})}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1420,end:10197})}(void 0);GV=mh.MorphicDB;var $w=Ba("Z",GV),FN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=e.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof e.SnapshotPackageHelper?e.SnapshotPackageHelper:e.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,g){var l=a&&a instanceof RegExp,r=[];if(!a)return r;for(var v={},y=$jscomp.makeIterator(this.filesInPackages()),A=y.next();!A.done;v={$jscomp$loop$prop$file$2380:v.$jscomp$loop$prop$file$2380},A=y.next()){v.$jscomp$loop$prop$file$2380=A.value;A=v.$jscomp$loop$prop$file$2380.get(this.snapshot);var E=mh.string.lineIndexComputer(A),F=mh.string.lineRanges(A);
if(l)A=mh.string.reMatches(A,a),A.length&&r.push.apply(r,$jscomp.arrayFromIterable(A.map(function(ea){return function(Aa){return Object.assign(Aa,{commit:g,file:ea.$jscomp$loop$prop$file$2380})}}(v))));else for(var H=0,I=0;0<=(H=A.indexOf(a));){var M=H+I,N=M+a.length,X=E(M),W=A.slice.apply(A,$jscomp.arrayFromIterable(F[X]));r.push({match:a,start:M,end:N,length:a.length,line:X,lineString:W,commit:g,file:v.$jscomp$loop$prop$file$2380});I+=H+a.length;A=A.slice(H+a.length)}}return r}},{key:"filesInPackages",
value:function(){function a(r,v,y,A,E){E=void 0===E?[]:E;if(r["package.json"]&&"string"===typeof r["package.json"])try{var F=JSON.parse(r["package.json"]);A={url:y,path:v,name:F.name||mh.arr.last(v)}}catch(I){}F=[];for(var H in r)"string"===typeof r[H]?E.push({path:v.concat(H),url:mh.string.joinPath(y,H),package:A,get:function(I){return mh.Path(this.path).get(I.packages)},set:function(I,M){mh.Path(this.path).set(I.packages,M)}}):F.push(H);F.forEach(function(I){return a(r[I],v.concat(I),mh.string.joinPath(y,
I),A,E)});return E}var g=[],l;for(l in this.snapshot.packages)a(this.snapshot.packages[l],[l],l,null,g);return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10206,end:13279})}(void 0);mh.SnapshotPackageHelper=
FN;mh.SnapshotPackageHelper=FN;mh.SnapshotPackageHelper=FN;mh.default=GV;var gf=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");gf.getProjectName=function(b){return gf.Path("metadata.commit.name").get(b)||b.name};gf.arr=eg;gf.properties=xp;gf.Path=$h;gf.promise=ph;gf.obj=Ag;gf.registerExtension=q;gf.Resource=Ug;gf.resource=Tj;gf.pt=Ii;gf.MorphicDB=$w;gf.ObjectPool=Vj;gf.normalizeOptions=Wz;gf.deserializeMorph=vF;gf.loadPackagesAndModulesOfSnapshot=wF;gf.subscribeOnce=function(b,
e,m){Nz(m).emitter.once(b,e);return e};var GN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=e.hasOwnProperty("ComponentPolicy")&&"function"===typeof e.ComponentPolicy?e.ComponentPolicy:e.ComponentPolicy=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.derivedMorph=a;this._overriddenProps=new WeakMap;
if(g.isMorph||"string"===typeof g)this.auto=g,"string"===typeof g&&(this.auto.isComponent=!0);else{a=g.click;var l=g.auto,r=g.hover,v=void 0===g.light?{}:g.light;g=void 0===g.dark?{}:g.dark;v&&(this.light=v);g&&(this.dark=g);a&&(this.click=a);l&&(this.auto=l);r&&(this.hover=r);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return gf.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",
value:function(a){if(!a)return!1;for(var g=$jscomp.makeIterator(["auto","click","hover"]),l=g.next();!l.done;l=g.next())if(l=l.value,"string"===typeof a[l]){if(this.getResourceUrlFor(this[l])!=a[l])return!1}else if((this[l]||null)!=(a[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,g=[];this.derivedMorph.withAllSubmorphsDo(function(l){a.managesMorph(l)&&0<Object.keys(a._overriddenProps.get(l)).filter(function(r){return"_rev"!=r}).length&&g.push([l,Object.keys(a._overriddenProps.get(l))])});
return g}},{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];gf.obj.isEmpty(this.dark)&&a.push("dark");gf.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__serialize__",value:function(){var a={};this.auto&&(a.auto=this.getResourceUrlFor(this.auto));this.click&&(a.click=this.getResourceUrlFor(this.click));this.hover&&(a.hover=this.getResourceUrlFor(this.hover));return{__expr__:"("+JSON.stringify(a)+")"}}},{key:"__after_deserialize__",
value:function(a,g){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(a._hasUnresolvedMaster,2):3!=g.nextAddress?g.yield(gf.promise.waitFor(1E3,function(){return a._appliedMaster}),3):g.return(!0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url:void 0==a.name?null:"styleguide://"+
gf.getProjectName($world)+"/"+a.name:null}},{key:"resolveMasterComponents",value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){switch(Ka.nextAddress){case 1:g=gf.promise.deferred(),a._hasUnresolvedMaster=g.promise,l=a,r=void 0===l.light?{}:l.light,v=void 0===l.dark?{}:l.dark,y=["auto","click","hover"],A=[],Ka.setCatchFinallyBlocks(2),E=$jscomp.makeIterator(y),F=E.next();case 4:if(F.done){Ka.leaveTryBlock(3);break}H=F.value;
if("string"!==typeof a[H]){Ka.jumpTo(7);break}I=a;M=H;return Ka.yield(gf.resource(a[H]).read(),8);case 8:I[M]=Ka.yieldResult;case 7:if("string"!==typeof r[H]){Ka.jumpTo(9);break}N=r;X=H;return Ka.yield(gf.resource(r[H]).read(),10);case 10:N[X]=Ka.yieldResult;case 9:if("string"!==typeof v[H]){Ka.jumpTo(11);break}W=v;ea=H;return Ka.yield(gf.resource(v[H]).read(),12);case 12:W[ea]=Ka.yieldResult;case 11:A.push(a[H],r[H],v[H]);F=E.next();Ka.jumpTo(4);break;case 2:throw Aa=Ka.enterCatchBlock(),Error("Encountered invalid master component reference: "+
Aa.message);case 3:gf.arr.compact(A).forEach(function(K){K.isComponent||(K.isComponent=!0)}),g.resolve(),a._hasUnresolvedMaster=!1,Ka.jumpToEnd()}})}},{key:"applyIfNeeded",value:function(a){var g=this;a=void 0===a?!1:a;if(this._hasUnresolvedMaster)return this._originalOpacity=this.derivedMorph.opacity,this.derivedMorph.withMetaDo({metaInteraction:!0},function(){[g.derivedMorph].concat($jscomp.arrayFromIterable(g.derivedMorph.ownerChain())).find(function(v){return v.isComponent})||(g.derivedMorph.opacity=
0)}),this._hasUnresolvedMaster.then(function(){g.applyIfNeeded(a);g.derivedMorph.withMetaDo({metaInteraction:!0},function(){g.derivedMorph.opacity=g._originalOpacity});delete g._originalOpacity;delete g._capturedExtents});var l=this.derivedMorph,r=this.determineMaster(l);r&&this._appliedMaster!=r&&(a=!0);r&&a&&(this.apply(l,r),this._appliedMaster=r)}},{key:"apply",value:function(a,g){var l=this;if(!this._applying){this._applying=!0;try{a.dontRecordChangesWhile(function(){var r=l.prepareSubmorphsToBeManaged(a,
g);g.withAllSubmorphsDoExcluding(function(v){var y=v==g,A=y?a:r[v.name];if(A)if(gf.obj.isArray(A)&&(A=A.pop()),v.master&&!y)A.master=v.master.spec(),A._requestMasterStyling=!0,l._overriddenProps.get(A).position||(A.position=v.position),l._overriddenProps.get(A).extent||(A.extent=v.extent);else{y=$jscomp.makeIterator(v.styleProperties);for(var E=y.next();!E.done;E=y.next())if(E=E.value,!l._overriddenProps.get(A)[E])if("layout"==E)A.layout&&v.layout&&A.layout.name()==v.layout.name()&&A.layout.equals(v.layout)||
(A.layout=v.layout?v.layout.copy():void 0);else{if(v==g){if("extent"==E&&!A.extent.equals(gf.pt(10,10))&&(!A.owner||A.owner.isWorld||A.ownerChain().find(function(F){return F.master&&F.master.managesMorph(A)})))continue;if("position"==E)continue}A.isLabel&&"extent"==E||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(E)||(gf.obj.equals(A[E],v[E])||(A[E]=v[E]),["fixedHeight","fixedWidth"].includes(E)&&A._parametrizedProps&&A._parametrizedProps.extent&&(A.extent=A._parametrizedProps.extent))}A._parametrizedProps&&
delete A._parametrizedProps;l.reconcileSubmorphs(A,v)}},function(v){return g!=v&&v.master})})}finally{this._applying=!1,delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,g){var l=this._overriddenProps.get(a);this._overriddenProps.set(a,gf.obj.dissoc(l,g))}},{key:"prepareSubmorphsToBeManaged",value:function(a,g){var l=this,r={};a.withAllSubmorphsDoExcluding(function(v){r[v.name]&&(gf.obj.isArray(r[v.name])?r[v.name].push(v):r[v.name]=[r[v.name],v]);r[v.name]=v},function(v){return v!=
a&&v.master});g.withAllSubmorphsDoExcluding(function(v){if(v=v==g?a:r[v.name])gf.obj.isArray(v)&&(v=v.pop()),l.prepareMorphToBeManaged(v)},function(v){return v!=g&&v.master});return r}},{key:"reconcileSubmorphs",value:function(a,g){}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},{key:"propsToSerializeForMorph",value:function(a,g){if(!this.managesMorph(a))return g;for(var l=[],r=$jscomp.makeIterator(a.styleProperties),v=r.next();!v.done;v=r.next())v=v.value,this._overriddenProps.get(a)[v]||
!("position"==v&&a==this.derivedMorph||"extent"==v&&a==this.derivedMorph)&&l.push(v);return gf.arr.withoutAll(g,l)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var g={},l;for(l in a._parametrizedProps)"__takenFromSnapshot__"!=l&&(g[l]=!0);this._overriddenProps.set(a,g)}}},{key:"determineMaster",value:function(a){var g=a.env.world.colorScheme,l=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var r=this.getMasterForState(this,
{isHovered:l,isClicked:a});this.light&&"light"==g&&(r=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||r);this.dark&&"dark"==g&&(r=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||r);return r}},{key:"getMasterForState",value:function(a,g){var l=a.hover,r=a.click,v=g.isClicked;a=a.auto;if(g.isHovered)if(l)a=l;else for(g=a&&a.master;g;){if(g.hover){a=g.hover;break}g=g.auto}if(v)if(r)a=r;else for(r=a&&a.master;r;){if(r.click){a=r.click;break}r=r.auto}return a}},{key:"onMorphChange",
value:function(a,g){if(!this._applying&&!gf.Path("meta.metaInteraction").get(g)&&!["_rev","name","master"].includes(g.prop)&&("opacity"==g.prop&&delete this._originalOpacity,a.styleProperties.includes(g.prop)))if(this.managesMorph(a)){if(!a.master||a.master==this||["extent","position"].includes(g.prop))this._overriddenProps.get(a)[g.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[g.prop]=g.value;else{var l={};a._parametrizedProps=(l[g.prop]=g.value,l)}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,g){g=g.constructor===gf.ComponentPolicy?g:new this(a,g);a.master&&(g._overriddenProps=a.master._overriddenProps);return g}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1243,end:17106})}(void 0);gf.ComponentPolicy=
GN;gf.ComponentPolicy=GN;gf.ComponentPolicy=GN;gf.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;gf.fetchedSnapshots=gf.fetchedSnapshots||{};gf.objectPools=gf.objectPools||{};gf.resolvedMasters=gf.resolvedMasters||{};gf.modulesToLoad=gf.modulesToLoad||{};gf.li=gf.li||void 0;gf.localNamePromise=gf.localNamePromise||void 0;gf.masterComponentFetches=gf.masterComponentFetches||{};var n9=Ba("bY",gf.resolvedMasters);gf.resolvedMasters=n9;gf.resolvedMasters=n9;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),
m=e.hasOwnProperty("StyleGuideResource")&&"function"===typeof e.StyleGuideResource?e.StyleGuideResource:e.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=this.url.match(gf.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(gf.styleGuideURLRe);
a=$jscomp.makeIterator(a);a.next();var g=a.next().value;a.next();return g}},{key:"dirList",value:function(a,g){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return l.worldName==gf.getProjectName($world)?v.return($world.withAllSubmorphsSelect(function(y){return y.isComponent})):(r=gf.resolvedMasters[l.worldName])?v.return(Object.values(r)):v.return([])})}},{key:"localWorldName",value:function(){var a;if(a=gf.getProjectName($world))return a;if(gf.localNamePromise)return gf.localNamePromise;
a=gf.promise.deferred();var g=a.resolve;gf.localNamePromise=a.promise;if("__newWorld__"==gf.resource(document.location.href).query().name)return g("__newWorld__"),gf.localNamePromise;gf.subscribeOnce("world/loaded",function(){g(gf.getProjectName($world))},System);return gf.localNamePromise}},{key:"fetchFromMasterDir",value:function(a,g){var l=a.join(this.worldName).join(g+".json");if(gf.masterComponentFetches[l.url])return gf.masterComponentFetches[l.url];gf.masterComponentFetches[l.url]=function(){var r,
v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(r=gf,v=r.deserializeMorph,y.yield(l.readJson(),2)):y.return(v.call(r,y.yieldResult))})}();return gf.masterComponentFetches[l.url]}},{key:"read",value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M,N,X,W,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){switch(Ka.nextAddress){case 1:g=a.componentName;if(l=gf.Path([a.worldName,a.componentName]).get(gf.resolvedMasters))return Ka.return(l);if(!lively.FreezerRuntime){Ka.jumpTo(2);
break}r=gf.resource(window.location);r.isFile()&&(r=r.parent());v=r.join("masters/");return Ka.yield(a.fetchFromMasterDir(v,g),3);case 3:l=Ka.yieldResult;case 2:if(lively.FreezerRuntime){Ka.jumpTo(4);break}gf.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",a.worldName),A=gf.promise.deferred(),y=A.resolve,gf.fetchedSnapshots[a.worldName]=A.promise);return Ka.yield(a.localWorldName(),5);case 5:if(Ka.yieldResult==a.worldName){l="undefined"!==typeof $world&&$world.getSubmorphNamed(g);
if(!l)throw Error('Master component "'+g+'" can not be found in "'+a.worldName+'"');return Ka.return(l)}return y?(F=gf.MorphicDB.default,Ka.yield(F.exists("world",a.worldName),9)):Ka.yield(gf.fetchedSnapshots[a.worldName],8);case 8:E=Ka.yieldResult;Ka.jumpTo(7);break;case 9:if(Ka.yieldResult.exists)return Ka.yield(F.fetchSnapshot("world",a.worldName),15);H=gf.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+".json");return Ka.yield(H.exists(),12);case 12:if(!Ka.yieldResult){y(null);
Ka.jumpTo(11);break}return Ka.yield(H.readJson(),14);case 14:E=Ka.yieldResult;Ka.jumpTo(11);break;case 15:E=Ka.yieldResult;case 11:return Ka.yield(gf.loadPackagesAndModulesOfSnapshot(E),16);case 16:y(E);case 7:I=new gf.ObjectPool(gf.normalizeOptions({}));M=$jscomp.makeIterator(Object.entries(E.snapshot).find(function(K){K=$jscomp.makeIterator(K);K.next();K=K.next().value;return gf.Path("props.isComponent.value").get(K)&&gf.Path("props.name.value").get(K)==g})||[]);N=M.next().value;if(!N)throw Error('Master component "'+
g+'" can not be found in "'+a.worldName+'"');l=I.resolveFromSnapshotAndId(Object.assign({},E,{id:N}));case 4:gf.resolvedMasters[a.worldName]?gf.resolvedMasters[a.worldName][g]=l:(X={},gf.resolvedMasters[a.worldName]=(X[g]=l,X));l._resourceHandle=a;if(!l._pool.mastersInSubHierarchy){Ka.jumpTo(17);break}W=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);ea=W.next();case 18:if(ea.done){Ka.jumpTo(20);break}Aa=ea.value;return Ka.yield(Aa.applyIfNeeded(!0),21);case 21:Aa.derivedMorph.ownerChain().includes(l)||
Aa.derivedMorph.requestMasterStyling();ea=W.next();Ka.jumpTo(18);break;case 20:delete l._pool;case 17:return Ka.return(Promise.resolve(l))}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);return l.return(g&&g.isComponent)})}},
{key:"remove",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(g="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName))g.isComponent=!1;return l.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:20707,end:25683})})(gf.Resource);var HV={name:"styleguide",matches:function(b){return b.match(gf.styleGuideURLRe)},resourceClass:gf.StyleGuideResource};gf.resourceExtension=HV;gf.resourceExtension=HV;gf.resourceExtension=HV;gf.registerExtension(gf.resourceExtension);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=e.hasOwnProperty("StyleGuide")&&"function"===typeof e.StyleGuide?e.StyleGuide:e.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,void 0,void 0,e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25869,end:26353})})(void 0);var Fc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");Fc.generateUnfolded=function(b,e,m){e=void 0===
e?["top","left","right","bottom"]:e;m=void 0===m?"core":m;var a={},g={};e=$jscomp.makeIterator(e);for(var l=e.next();!l.done;g={$jscomp$loop$prop$m$1183$2383:g.$jscomp$loop$prop$m$1183$2383},l=e.next())g.$jscomp$loop$prop$m$1183$2383=l.value,a[b+Fc.string.capitalize(g.$jscomp$loop$prop$m$1183$2383)]={group:m,derived:!0,generated:!0,after:[b],get:function(r){return function(){return this.getProperty(b)[r.$jscomp$loop$prop$m$1183$2383]}}(g),set:function(r){return function(v){var y={};this[b]=Object.assign({},
this.getProperty(b),(y[r.$jscomp$loop$prop$m$1183$2383]=v,y))}}(g)};return a};Fc.Color=Hg;Fc.Line=zn;Fc.Point=Jg;Fc.pt=Ii;Fc.rect=Cl;Fc.Rectangle=Le;Fc.Transform=el;Fc.string=ti;Fc.properties=xp;Fc.obj=Ag;Fc.arr=eg;Fc.num=Km;Fc.promise=ph;Fc.tree=vu;Fc.PropertyPath=$h;Fc.signal=dm;Fc.copy=ei;Fc.deserializeSpec=Fp;Fc.ExpressionSerializer=ho;Fc.serializeSpec=Bo;Fc.getClassName=gr;Fc.renderRootMorph=IC;Fc.ShadowObject=Os;Fc.AnimationQueue=nM;Fc.easings=xr;Fc.addOrChangeCSSDeclaration=ms;Fc.Icon=Op;Fc.morph=
qa;Fc.newMorphId=Qa;Fc.MorphicEnv=Fs;Fc.config=Cn;Fc.CommandHandler=bla;Fc.KeyHandler=mU;Fc.findKeysForPlatform=Jb;Fc.TargetScript=nU;Fc.copyMorph=KJ;Fc.ComponentPolicy=GN;Fc.defaultCommandHandler=new Fc.CommandHandler;var Jl=Ba("aj",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Morph")&&"function"===typeof e.Morph?e.Morph:e.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var g=a.env||Fc.MorphicEnv.default();this._env=g;this._rev=g.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=Fc.newMorphId(Fc.getClassName(this));this._animationQueue=new Fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Fc.obj.select(a,Fc.arr.intersect(Object.keys(a),this.styleProperties));
this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,g,l,r){this._env=Fc.MorphicEnv.default();this._rev=a.rev;
this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=g.id;this._animationQueue=new Fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Fc.obj.select(a.props,Fc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=r.expressionSerializer;for(var v in this._parametrizedProps)(g=this._parametrizedProps[v].value)&&Fc.obj.isString(g)&&a.isSerializedExpression(g)&&
(this._parametrizedProps[v]=a.deserializeExpr(g));this.initializeProperties();this._pool=r}},{key:"__after_deserialize__",value:function(a,g,l){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(r){console.error("[lively.morphic] "+this+".onLoad() error: "+r.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(l.mastersInSubHierarchy?l.mastersInSubHierarchy.push(this.master):l.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var a=
this.defaultProperties,g=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var r=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(A){return A.__isBeingSerialized__&&A.master}).find(Boolean),v;for(v in g){var y=g[v];r&&r.managesMorph(this)&&void 0!=r._overriddenProps.get(this)[v]?l.push(v):y.readOnly||y.derived||Fc.obj.equals(this[v],a[v])||y.hasOwnProperty("serialize")&&
!y.serialize||l.push(v)}return r&&!this.isComponent?r.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(a,g,l,r){if((g=a.props.submorphs)&&!this.isEpiMorph)for(g=g.value,r=g.length;r--;)l.refForId(g[r].id).realObj.isEpiMorph&&Fc.arr.removeAt(g,r);l=$jscomp.makeIterator(Fc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(g=l.next();!g.done;g=l.next())g=g.value,a.props[g]={key:g,verbatim:!0,value:Fc.obj.extract(this[g],
["top","right","bottom","left"],function(v,y){return y&&y.isColor?y.toTuple():y})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,g){a=void 0===a?!0:a;g=void 0===g?new WeakMap:g;var l=this.defaultProperties,r=this.propertiesAndPropertySettings().properties,v={submorphs:!0},y={};if(g.has(this))return g.get(this);g.set(this,y);for(var A in r){var E=r[A];E&&(E.readOnly||E.derived||E.hasOwnProperty("serialize")&&
!E.serialize||A in v||a&&(Fc.obj.equals(this[A],l[A])||this[A]&&l[A]&&this[A].valueOf&&l[A].valueOf&&Fc.obj.equals(this[A].valueOf(),l[A].valueOf()))||(y[A]=this[A]&&this[A].isMorph?this[A].spec(a,g):this[A]&&"layout"===A?this[A].copy():this[A]))}y.submorphs=this.submorphs.map(function(F){return F.spec(a,g)});y.type=this.constructor;return y}},{key:"printSpec",value:function(a,g){g=void 0===g?0:g;a=(void 0===a?null:a)||this.spec();var l={name:!0,type:!0,submorphs:!0},r="  ".repeat(g+1),v="  ".repeat(g)+
"{\n"+(r+'name: "'+a.name+'",\n')+(r+'type: "'+a.type+'",\n'),y;for(y in a)l[y]||(v+=""+r+y+": "+Fc.string.print(a[y])+",\n");if(a.submorphs){v+=r+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(l=a.next();!l.done;l=a.next())v+=this.printSpec(l.value,g+1);v+="]\n"}return v+="  ".repeat(g)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,g=a[Symbol.for("lively-instance-superclass")];if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(g&&g._morphicDefaultPropertyValues)){a=
this.constructor._morphicDefaultPropertyValues={};g=this.propertiesAndPropertySettings().properties;for(var l in g){var r=g[l];r.hasOwnProperty("defaultValue")&&(r=r.defaultValue,Array.isArray(r)&&(r=r.slice()),a[l]=r)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},{key:"setProperty",value:function(a,g,l){return this.addValueChange(a,g,l)}},{key:"changeMetaData",
value:function(a,g,l,r){l=void 0===l?!0:l;r=void 0===r?!0:r;var v=this.metadata;v||(v={});(new Fc.PropertyPath(a)).withParentAndKeyDo(v,!0,function(y,A){y[A]=r?Object.assign({},y[A],{},g):g;var E=y.__dont_serialize__;l?E&&E.includes(A)&&(Fc.arr.remove(E,A),0===E.length&&delete y.__dont_serialize__):(E||(E=y.__dont_serialize__=[]),Fc.arr.pushIfNotIncluded(E,A))});this.metadata=v}},{key:"installFont",value:function(a,g){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[a]=g,l));this.insertFontCSS(a,
g)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,g){a=$jscomp.makeIterator(a);for(var l=a.next();!l.done;l=a.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();g=$jscomp.makeIterator(g);for(l=g.next();!l.done;l=g.next())a=l.value,this.insertFontCSS(a,this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(l.whenRendered(),2);g.endsWith(".otf")?Fc.addOrChangeCSSDeclaration(l.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+l.installedFonts[a]+'") format("opentype");\n         }'):Fc.addOrChangeCSSDeclaration(l.id+"-"+a,'@import url("'+l.installedFonts[a]+'");');r.jumpToEnd()})}},{key:"toString",value:function(){return"<"+Fc.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",
Object.assign({className:Fc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},g={},l=this.propertiesAndPropertySettings().properties,r=[],v;for(v in l)a[v]||l[v].derived&&!l[v].showInInspector||(g[v]=!0,r.push({key:v,value:this[v]}));r.push({key:"id",value:this.id});r.push({key:"owner",value:this.owner});r=r.sort(function(A,
E){A=A.key.toLowerCase();E=E.key.toLowerCase();return A<E?-1:A===E?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),v=l.next();!v.done;v=l.next())v=v.value,a["$$"+v.sourceAttrName,""+v.sourceAttrName]=!0;Object.assign(g,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=a.next();!l.done;l=a.next())l=l.value,l in this&&(g[l]=!0,r.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var y in this)!g[y]&&this.hasOwnProperty(y)&&r.unshift({key:y,value:this[y],keyString:"[UNKNOWN PROPERTY] "+y});return{sort:!1,includeDefault:!1,properties:r}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,g,l,r){var v=this.world();r=Object.assign({maxLines:7},r);return v?v.setStatusMessageFor(this,
a,g,l,r):console.log(a)}},{key:"showError",value:function(a){var g=this.world();return g?g.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var g=this,l=a.meta&&a.meta.animation,r=a.prop,v=a.value;if("position"===r||"rotation"===r||"scale"===r||"origin"===r||"reactsToPointer"===r)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[r]=v,l));else if("extent"==r)this.onBoundsChanged(this.bounds());else"layout"==r&&(l?v&&v.attachAnimated(l.duration,this,l.easing):
v&&v.attach());this.layout&&this.layout.onChange(a);this.isComponent&&(r=this.world(),(r?r.withAllSubmorphsSelect(function(y){return y.master&&y.master.uses(g)}):[]).forEach(function(y){y.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var g=this;Fc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(l){Fc.signal(g,l,a.partNamed(l))})}},{key:"onSubmorphChange",
value:function(a,g){var l=this;if(this.isComponent&&!a.meta.metaInteraction&&!a.meta.layoutAction){var r=this.world();r&&r.withAllSubmorphsDo(function(v){v.master&&v.master.uses(l)&&v.requestMasterStyling()})}if(this.master)this.master.onMorphChange(g,a);this.layout&&this.layout.onSubmorphChange(g,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,a)}},{key:"addValueChange",value:function(a,g,l){return this.env.changeManager.addValueChange(this,
a,g,l)}},{key:"addMethodCallChangeDoing",value:function(a,g){return this.env.changeManager.addMethodCallChangeDoing(a,this,g)}},{key:"groupChangesWhile",value:function(a,g){return this.env.changeManager.groupChangesWhile(this,a,g)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,g){return this.env.changeManager.recordChangesWhile(a,g)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,
a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,g){return this.env.changeManager.doWithValueChangeMeta(a,this,g)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var g=
this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=g._animationQueue.registerAnimation(a),g._animationQueue.animationsActive?l?r.yield(l.asPromise(),3):r.jumpTo(2):(l&&l.finish(),r.return(Promise.resolve(g)))):2!=r.nextAddress?r.return(r.yieldResult):r.return(Promise.resolve(g))})}},{key:"withAnimationDo",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=l.groupChangesWhile(!1,a);v=r.changes;return y.yield(Promise.all(Object.values(Fc.arr.groupBy(v,
function(A){return A.target.id})).map(function(A){var E=Object.assign({},g),F;A.forEach(function(H){F=H.target;H.reverseApply();E[H.prop]=H.value});return F.animate(E)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},{key:"scrollBounds",value:function(){var a=this.scroll,g=this.scrollExtent;return new Fc.Rectangle(a.x,
a.y,g.x,g.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},{key:"addStyleClass",value:function(a){this.styleClasses=Fc.arr.uniq(this.styleClasses.concat(a))}},
{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(g){return g!=a})}},{key:"adjustOrigin",value:function(a){var g=this.origin,l=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(v){return v.position=v.position.subPt(a.subPt(g))});var r=this.globalBounds().topLeft();l=l.subPt(r);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},
{key:"innerBounds",value:function(){var a=this.extent;return Fc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var g=this.origin.negated().extent(this.extent);g=a?this.transformRectToMorph(a,g):this.getGlobalTransform().transformRectToRect(g);this.isClip()||this.submorphs.forEach(function(l){g=g.union(l.relativeBounds(a))});return g}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();
return this.submorphs.map(function(g){g=g.bounds();return Fc.rect(g.x/a.width,g.y/a.height,g.width/a.width,g.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=Fc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(g){return g.bounds()}).reduce(function(g,l){return g.union(l)})}},{key:"fitToSubmorphs",value:function(a){a=void 0===a?Fc.Rectangle.inset(0):
a;var g=this.submorphs;if(g.length){g=g.reduce(function(v,y){return v.union(y.bounds())},g[0].bounds());var l=g.top()-a.top(),r=g.left()-a.left();this.moveBy(Fc.pt(r,l));Fc.arr.invoke(this.submorphs,"moveBy",Fc.pt(-r,-l));this.extent=Fc.pt(g.width+a.left()+a.right(),g.height+a.top()+a.bottom())}}},{key:"align",value:function(a,g){return this.moveBy(g.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},
{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,g,l){l=void 0===l?!0:l;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),a;var r=this.owner,v=this.submorphs,
y=this.getTransform().copy();g="number"===typeof g?g:r?r.submorphs.indexOf(this):-1;var A=a.owner,E=Fc.arr.without(a.submorphs,this),F=a.getTransform().copy(),H=A?A.submorphs.indexOf(a):-1;r&&this.remove();A&&a.remove();l&&(this.submorphs=[],a.submorphs=[]);r===a?(A&&A.addMorphAt(this,H),l&&(this.submorphs=E.slice(0,g).concat(a).concat(E.slice(g)),a.submorphs=v)):(r&&r.addMorphAt(a,g),A&&A.addMorphAt(this,H),l&&(a.submorphs=v,this.submorphs=E));a.setTransform(y);this.setTransform(F);return a}},{key:"addMorphAt",
value:function(a,g){var l=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=Fc.morph(a));var r=this.submorphs.indexOf(a);if(!(-1<r&&r===g))return this.addMethodCallChangeDoing({target:this,
selector:"addMorphAt",args:[a,g],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var v=a.owner,y=l.submorphs;if(v&&v!==l){var A=a.transformForNewOwner(l);a.remove()}a._env!==l._env&&(a._env=l._env);g=Math.min(y.length,Math.max(0,g));-1<r&&(y.splice(r,1),r<g&&g--);y.splice(g,0,a);a._owner=l;a._cachedPaths={};A&&a.setTransform(A);a.requestStyling();l._morphicState.submorphs=y;l._submorphOrderChanged=!0;l.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(E){return E.onOwnerChanged(l)});
l.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,g){var l=this.submorphs;g=g?l.indexOf(g):-1;return this.addMorphAt(a,-1===g?l.length:g)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var g=this.submorphs.indexOf(a);-1!==g&&((this.getProperty("submorphs")||[]).splice(g,1),this.addMethodCallChangeDoing({target:this,
selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,g]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=Fc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(g){g._stylingVisitor&&g._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths={};this._pathDependants.forEach(function(g){return g._cachedPaths={}});this._pathDependants=
[];this.withAllSubmorphsDo(function(g){return g.onOwnerChanged(null)});return this}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,duration:a,easing:Fc.easings.outQuad}),2);g.remove();g.opacity=1;l.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g.opacity=
0;g.animate({opacity:1,duration:a});return l.return(g)})}},{key:"fadeIntoWorld",value:function(a,g){a=void 0===a?$world.visibleBounds().center():a;g=void 0===g?200:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return r=new Fc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:Fc.Color.transparent}),v=l.env.world,r.openInWorld(),r.addMorph(l),l.position=r.extent.scaleBy(.5),r.center=a,r.scale=.8,A.yield(r.animate({opacity:1,scale:1,
duration:g}),2);y=l.globalBounds();v.addMorph(l);l.top=y.top();l.left=y.left();r.remove();return A.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&Fc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var g=$jscomp.makeIterator(this.submorphs),l=g.next();!l.done;l=g.next())if(l=
l.value.withAllSubmorphsDetect(a))return l}},{key:"withAllSubmorphsDoExcluding",value:function(a,g){var l=[a(this)];if(g(this))return l;for(var r=$jscomp.makeIterator(this.submorphs),v=r.next();!v.done;v=r.next())Fc.arr.pushAll(l,v.value.withAllSubmorphsDoExcluding(a,g));return l}},{key:"withAllSubmorphsDo",value:function(a){for(var g=[a(this)],l=$jscomp.makeIterator(this.submorphs),r=l.next();!r.done;r=l.next())Fc.arr.pushAll(g,r.value.withAllSubmorphsDo(a));return g}},{key:"withAllSubmorphsSelect",
value:function(a){var g=[];this.withAllSubmorphsDo(function(l){return a(l)&&g.push(l)});return g}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return this;this.center=a;
this.setBounds(g.visibleBounds().insetBy(50).translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var g=a.firstHand?a.firstHand.position:Fc.pt(0,0);return a?this.openInWorldNear(g):void 0}},{key:"openInWorld",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=this.hasFixedPosition?
g.visibleBounds().extent().scaleBy(.5,.5):g.visibleBounds().center(),this.snap());g.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=Fc.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,Fc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===
this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,g){g||(g=[]);if(!this.fullContainsWorldPoint(a))return g;for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(a,g);this.innerBoundsContainsWorldPoint(a)&&g.push(this);return g}},{key:"morphBeneath",value:function(a){var g=this.world()||this.owner;if(!g)return null;a=g.morphsContainingPoint(a);g=a.indexOf(this);return a[g+1]}},{key:"transformTillMorph",value:function(a,g){if("down"==(void 0===
g?"up":g))return a.transformTillMorph(this,"up").inverse();g=new Fc.Transform;for(var l=this;l&&l!=a;l=l.owner){var r=l,v=r.origin;r=r.scroll;0===v.x&&0===v.y||g.preConcatenate(new Fc.Transform(l.origin));g.preConcatenate(l.getTransform());l!=this&&(0===r.x&&0===r.y||!l.owner||g.preConcatenate(new Fc.Transform(r.negated())));l.hasFixedPosition&&l.owner&&g.preConcatenate(new Fc.Transform(l.owner.scroll))}return g}},{key:"localize",value:function(a){var g=this.world(),l=a.x,r=a.y;return g?g.transformPointToMorph(this,
Fc.pt(l,r)):a}},{key:"worldPoint",value:function(a){var g=this.world(),l=a.x,r=a.y;return g?this.transformPointToMorph(g,Fc.pt(l,r)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var g=this.getGlobalTransform(),l=a.getGlobalTransform().inverse();g.preConcatenate(l);l=a.scroll;0===l.x&&0===l.y||!a.owner||g.preConcatenate(new Fc.Transform(l));return g}},{key:"transformPointToMorph",value:function(a,g){var l=this.hasFixedPosition,r=this.pathToMorph(a);r=$jscomp.makeIterator(r);for(var v=
r.next();!v.done;v=r.next()){var y=$jscomp.makeIterator(v.value);v=y.next().value;y=y.next().value;this!=y&&"up"==v&&(g.x-=y.scroll.x,g.y-=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(g.x+=y.owner.scroll.x,g.y+=y.owner.scroll.y));this.applyTransform(v,y,g);this!=y&&"down"==v&&(g.x+=y.scroll.x,g.y+=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(g.x-=y.owner.scroll.x,g.y-=y.owner.scroll.y))}l&&
a.isWorld&&(g.x=g.x-a.position.x+a.scroll.x,g.y=g.y-a.position.y+a.scroll.y);l&&this.isWorld&&(g.x=g.x+this.position.x-this.scroll.x,g.y=g.y+this.position.y-this.scroll.y);return g}},{key:"transformRectToMorph",value:function(a,g){var l=this,r,v,y;[r=g.topLeft(),v=g.topRight(),y=g.bottomRight(),g=g.bottomLeft()].forEach(function(A){return l.transformPointToMorph(a,A)});return Fc.Rectangle.unionPts([r,v,y,g])}},{key:"applyTransform",value:function(a,g,l){"up"==a?(l.x+=g.origin.x,l.y+=g.origin.y,l.matrixTransform(g.getTransform(),
l)):(l.matrixTransform(g.getInverseTransform(),l),l.x-=g.origin.x,l.y-=g.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var g;if(g=this._cachedPaths[a.id])return g;g=this.closestCommonAncestor(a)||this;var l=this,r=[],v=[];for(g._addPathDependant(this);l&&l!=g;)v.push(["up",l]),l._addPathDependant(this),l=l.owner;for(l=a;l&&l!=g;)r.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[a.id]=
g=[].concat($jscomp.arrayFromIterable(v),$jscomp.arrayFromIterable(r.reverse()))}},{key:"closestCommonAncestor",value:function(a){return Fc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new Fc.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,g){var l=a.x;a=a.y;try{return g.transformPointToMorph(this,Fc.pt(l,a))}catch(r){return console.warn("problem "+
r+" in localizePointFrom"),Fc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(Fc.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var g=this.globalBounds();a=a.innerBounds().translateForInclusion(g).topLeft().subPt(g.topLeft());this.moveBy(a)}}},{key:"getTransform",
value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var g=a.position,l=a.scale,r=a.origin,v=a.rotation;a=this._transform||new Fc.Transform;var y=this._invTransform||new Fc.Transform;g=g||this.position;r=r||this.origin;l=l||this.scale;v=v||this.rotation;a.a=l*Math.cos(v);a.b=l*Math.sin(v);a.c=l*-Math.sin(v);
a.d=l*Math.cos(v);a.e=a.a*-r.x+a.c*-r.y+g.x;a.f=a.b*-r.x+a.d*-r.y+g.y;g=a.a;l=a.b;r=a.c;v=a.d;var A=a.e,E=a.f,F=1/(g*v-r*l);y.a=v*F;y.b=-l*F;y.c=-r*F;y.d=g*F;y.e=(r*E-A*v)*F;y.f=-(g*E-l*A)*F;this._transform=a;this._invTransform=y}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=Fc.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?
a:this.owner.localize(a))}},{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(g){if(g.constructor==
RangeError&&"Maximum call stack size exceeded"==g.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+g.stack);throw g;}}},{key:"getNameTest",value:function(a,g){if(Fc.obj.isRegExp(g)){if(g.test(a.name)||g.test(String(a)))return!0}else if(a.name===
g||String(a)===g)return!0;return!1}},{key:"getAllNamed",value:function(a,g){g=void 0===g?[]:g;if(!this._morphicState||!this.submorphs.length)return g;for(var l=0;l<this.submorphs.length;l++){var r=this.submorphs[l];this.getNameTest(r,a)&&g.push(r)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(a,g);return g}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var g=0;g<this.submorphs.length;g++){var l=this.submorphs[g];if(this.getNameTest(l,
a))return l}for(g=0;g<this.submorphs.length;g++)if(l=this.submorphs[g].getSubmorphNamed(a))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(g){return g.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(g){return g.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var g=this.owner;if(!g)return null;if(g.name===a)return g;for(var l=0;l<g.submorphs.length;l++){var r=
g.submorphs[l];if(r!==this&&(this.getNameTest(r,a)||(r=r.getSubmorphNamed(a))))return r}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(g){return a===g.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},
{key:"onMouseDown",value:function(a){this===a.targetMorph&&(a.state.clickedMorph=this);this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){g._keybindings||
(g._keybindings=[]);g._cachedKeyhandlers=null;g._keybindings.unshift.apply(g._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[Fc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(g,
l){var r=Fc.findKeysForPlatform(l.keys,a),v=l.command,y="string"===typeof v?v:v.command||v.name;return"string"!==typeof r?g:r.split("|").reduce(function(A,E){var F={};return Object.assign(A,(F[E]={name:y,command:v,prettyKeys:Fc.KeyHandler.prettyCombo(E)},F))},g)},{})}},{key:"keysForCommand",value:function(a,g){g=void 0===g?!0:g;var l=this.keyCommandMap,r=Object.keys(l).find(function(v){return l[v].name===a});return r&&g?l[r].prettyKeys:r}},{key:"simulateKeys",value:function(a){return Fc.KeyHandler.simulateKeys(this,
a)}},{key:"onKeyDown",value:function(a){Fc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",value:function(a){var g=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems()).then(function(l){return g.openMenu(l,a)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(a,g){var l=this.world();return a&&a.length&&l?l.openWorldMenu(g,a):null}},{key:"menuItems",value:function(){return this.world().defaultMenuItems(this)}},
{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var g=a.state;this.position=g.dragStartMorphPosition.addPt(g.absDragDelta);$world.execCommand("show and snap to guides",
{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var g=this.copy();g.position=this.transformPointToMorph(a.hand,Fc.pt(0,0));a.hand.grab(g)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,
g){g.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",
value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return Fc.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var g=this;this._env=a.env||a._env||Fc.MorphicEnv.default();this._rev=0;this._owner=
null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||Fc.newMorphId(Fc.getClassName(this));this._animationQueue=new Fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){g.initializeProperties();Fc.deserializeSpec(a,function(l){return Fc.morph(l)},g)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();Fc.tree.prewalk(a,function(g){return g._id=Fc.newMorphId(g.type)},
function(g){return g.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(g,l){return"copy "+(l&&l.trim()?Number(l)+1:"1")});return Fc.morph({type:a.type}).initFromJSON(a)}},{key:"copy",value:function(){return Fc.copyMorph(this)}},{key:"interactivelyPublish",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return g=a.world()||a.env.world,A.setCatchFinallyBlocks(2),A.yield(System.import("lively.morphic/partsbin.js"),
4);case 4:return l=A.yieldResult,r=l.interactivelySavePart,A.yield(r(a,{notifications:!1,loadingIndicator:!0}),5);case 5:v=A.yieldResult;g.setStatusMessage(v?"Published "+a+" as "+v.name:"Failed to publish part "+a,v?Fc.Color.green:Fc.Color.red);A.leaveTryBlock(0);break;case 2:y=A.enterCatchBlock(),"canceled"!=y&&g.showError(y),A.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",
value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();
this.layout&&!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(g){return a.master._capturedExtents.set(g,g.extent)})),this.master&&(this._requestMasterStyling=!0),this.makeDirty())}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",
value:function(a){var g=this;this.dontRecordChangesWhile(function(){g.applyLayoutIfNeeded()});return Fc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,g){a=void 0===a?{}:a;g=void 0===g?this.env.renderer:g;return g.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),g="number"===typeof a[0]?a.shift():null,l=a.shift();a=new Fc.TargetScript(this,l,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(g);return a}},{key:"tickingScripts",
get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){Fc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var g=this._tickingScripts.filter(function(l){return l.selector===a});this.stopScripts(g)}},{key:"stopScripts",value:function(a){Fc.arr.invoke(a,"stop");this._tickingScripts=Fc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&Fc.arr.invoke(this._tickingScripts,
"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){Fc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return Fc.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(g){return g.equals(a)}))}},{key:"commands",get:function(){return this._commands||
[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return Fc.arr.flatmap([this].concat(this.ownerChain()),function(a){return Fc.arr.sortByKey(a.commands,"name").map(function(g){return{target:a,command:g}})})}},{key:"addCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){g.removeCommands(a);
g._commands=(g._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var l=a.map(function(v){return"string"===typeof v?v:v.name}),r=(g._commands||[]).filter(function(v){return!l.includes(v.name)});r.length?g._commands=r:delete g._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||Fc.defaultCommandHandler}},
{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,g,l,r){return this.commandHandler.exec(a,this,g,l,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,g){this.setProperty(a,g)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",
initialize:function(a){a||(a=Fc.getClassName(this),a=(Fc.string.startsWithVowel(a)?"an":"a")+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||(this.setProperty("master",a?Fc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},
draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",
isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new Fc.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!Fc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Fc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Fc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Fc.pt(10,10),set:function(a){var g=this.extent;this.setProperty("extent",a);this.origin.equals(Fc.pt(0,
0))||(a=Fc.pt(a.x/g.x,a.y/g.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=Fc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=Fc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(Fc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(Fc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(Fc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(Fc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:Fc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var g=this,l=this.layout,r=l&&l.isEnabled();r&&l.disable();this.submorphs.forEach(function(v){return a.includes(v)||v.remove()});a.forEach(function(v,y){return g.submorphs[y]!==v&&g.addMorph(v,g.submorphs[y])});r&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=Fc.pt(0,0))}},scroll:{group:"geometry",defaultValue:Fc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var g=a.x;a=a.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),r=l.y;g=Math.max(0,Math.min(l.x,g));a=Math.max(0,Math.min(r,a));this.setProperty("scroll",Fc.pt(g,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:Fc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",Fc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){Fc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},Fc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);Fc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},Fc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){Fc.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},Fc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:Fc.Color.white,left:Fc.Color.white,bottom:Fc.Color.white,right:Fc.Color.white,valueOf:function(){return Fc.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=Fc.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?Fc.obj.extract(a,["top","left","right","bottom"],function(g,l){return Fc.obj.isArray(l)?Fc.Color.fromTuple(l):l}):a)}}},Fc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(g){a.borderStyle=g},get width(){return a.borderWidth},set width(g){a.borderWidth=g},get color(){return a.borderColor},set color(g){a.borderColor=g},get borderRadius(){return a.borderRadius},set borderRadius(g){a.borderRadius=g}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),g=a.properties,l=[];a=$jscomp.makeIterator(a.order);for(var r=a.next();!r.done;r=a.next())r=r.value,g[r].isStyleProp&&l.push(r);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,g={},l=0;l<a.length;l++){var r=a[l];g[r]=this[r]}return g}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var g=Fc.arr.without(Fc.obj.keys(this.installedFonts||
{}),"_rev"),l=Fc.arr.without(Fc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(g,l)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,g=[];a&&a!==Object;)g.push(a[Symbol.for("__LivelyClassName__")]),a=a[Symbol.for("lively-instance-superclass")];return this._styleClasses=g}}],e,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1653,end:79828})}(void 0));Fc.Morph=Jl;Fc.Morph=Jl;Fc.Morph=Jl;var DB=Ba("an",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Ellipse")&&"function"===typeof e.Ellipse?e.Ellipse:e.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},
set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:79837,end:80594})}(Fc.Morph));Fc.Ellipse=DB;Fc.Ellipse=DB;Fc.Ellipse=DB;var bE=
function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Triangle")&&"function"===typeof e.Triangle?e.Triangle:e.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},
{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||"fill"==a.prop&&a.value)&&this.update();cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,g=a.x;a=a.y;g!=a&&(this.extent=Fc.pt(Math.max(g,a),Math.max(g,a)));this.origin=Fc.pt(g/2,a/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;g={width:g/2,style:"solid",color:l};a={width:a/2,style:"solid",color:Fc.Color.transparent};switch(this.direction){case "down":var r=
"borderLeft";var v="borderRight";var y="borderTop";break;case "up":r="borderLeft";v="borderRight";y="borderBottom";break;case "left":r="borderBottom";v="borderTop";y="borderRight";break;case "right":r="borderBottom",v="borderTop",y="borderLeft"}l={};Object.assign(this,(l[r]=a,l[v]=a,l[y]=g,l))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=
this.fill}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:80603,end:82061})}(Fc.Morph);Fc.Triangle=bE;Fc.Triangle=bE;Fc.Triangle=bE;var Ty=Ba("I",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Image")&&"function"===typeof e.Image?
e.Image:e.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"__deserialize__",value:function(a,g,l,r){this._isDeserializing=!0;cc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r)}},{key:"__after_deserialize__",value:function(a,g,l){delete this._isDeserializing;cc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l)}},{key:"isImage",
get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,g){var l=this;g=void 0===g?this.autoResize:g;var r=this.autoResize;this.autoResize=g;this.imageUrl=a;return Fc.promise.finally(this.whenLoaded(),function(){return l.autoResize=r})}},{key:"whenLoaded",
value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(g,l){var r=a.imageUrl;a.imageElement(function(v){a.imageUrl!==r&&l(Error("url changed ("+r+" => "+a.imageUrl+")"));a.naturalExtent=Fc.pt(v.width,v.height);a.isLoaded=!0;g(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var g=this;return new Promise(function(l,r){var v=g.env.domEnv.document.createElement("img");v.onload=function(){l(v);"function"===typeof a&&a(v)};v.src=g.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return g=a.env.domEnv.document,y.yield(a.imageElement(),2);l=y.yieldResult;r=g.createElement("canvas");v=r.getContext("2d");r.width=l.width;r.height=l.height;v.drawImage(l,0,0,l.width,l.height);return y.return({canvas:r,ctx:v,image:l})})}},{key:"imageData",value:function(a){var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(g.canvasElementAndContext(),2);l=I.yieldResult;r=l.ctx;v=l.image;a||(a=Fc.rect(0,0,v.width,
v.height));y=a;A=y.x;E=y.y;F=y.width;H=y.height;console.log(A,E);return I.return(r.getImageData(A,E,F,H))})}},{key:"pixelAt",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(g.imageData(a.extent(Fc.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(l=Fc.Color,r=l.fromTuple8Bit,v.yield(g.pixelAt(a),
2)):v.return(r.call(l,v.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,g){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return g=a.imageUrl,l=g.slice(g.lastIndexOf(".")+1,g.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg",
"png","tiff","svg+xml"].includes(l)||(l="gif"),g.startsWith("http")||(g=Fc.location.origin+"/"+g),F.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=F.nextAddress)return r=F.yieldResult,v=r.runCommand,y='curl --silent "'+g+'" | openssl base64',F.yield(v(y).whenDone(),3);A=F.yieldResult;E=A.stdout;return F.return(a.loadUrl("data:image/"+l+";base64,"+E,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var g=this.name||"image-from-lively";var l=
a.match(/image\/([^;]+)/);l&&l[1]&&(g+="."+l[1])}else g||(g=Fc.arr.last(a.split("/")));l=document.createElement("a");l.download=g;l.href=a;l.click()}},{key:"convertTo",value:function(a,g){g||(g=1);var l=this.canvasElementAndContext(),r=l.ctx,v=l.canvas;l=l.image;var y=this.width,A=this.height;v.width=l.width;v.height=l.height;r.drawImage(l,0,0,y,A);return this.loadUrl(v.toDataURL(a,g),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==
N.nextAddress)return N.yield(a.canvasElementAndContext(),2);g=N.yieldResult;l=g.ctx;r=g.canvas;v=g.image;y=a;A=y.width;E=y.height;F=v;H=F.width;I=F.height;r.width=H;r.height=I;l.drawImage(v,0,0,A,E);M=l.getImageData(0,0,H,I);r.width=A;r.height=E;l.putImageData(M,0,0);return N.return(a.loadUrl(r.toDataURL(),!1))})}},{key:"crop",value:function(a){var g=this.canvasElementAndContext(),l=g.ctx,r=g.canvas;g=g.image;var v=this.innerBounds(),y=g.width,A=g.height;a=v.intersection(a);a=new Fc.Rectangle(a.x/
v.width,a.y/v.height,a.width/v.width,a.height/v.height);a=$jscomp.makeIterator((new Fc.Rectangle(0,0,y,A)).divide([a])).next().value;r.width=y;r.height=A;l.drawImage(g,0,0,y,A);g=l.getImageData(a.x,a.y,a.width,a.height);r.width=a.width;r.height=a.height;l.putImageData(g,0,0);return this.loadUrl(r.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);g=l.yieldResult;"string"===typeof g&&(a.imageUrl=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=cc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/
a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=a,r.yield(a.determineNaturalExtent(),2)):r.return(l.extent=r.yieldResult)})}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,
copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(a){var g=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var l=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){g.imageUrl===a&&(g.isLoaded=!0,l&&(g.extent=g.naturalExtent))})}},fill:{defaultValue:Fc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},
autoResize:{isStyleProp:!0,defaultValue:!1}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82070,end:91431})}(Fc.Morph));Fc.Image=Ty;Fc.Image=Ty;Fc.Image=Ty;var DH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("PathPoint")&&"function"===
typeof e.PathPoint?e.PathPoint:e.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){g=void 0===g?{}:g;this.path=a;this._isSmooth=g.isSmooth||!1;this.x=g.position?g.position.x:g.x||0;this.y=g.position?g.position.y:g.y||0;this._controlPoints=g.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints",
"$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return Fc.pt(this.x,this.y)}},{key:"position",set:function(a){var g=a.y;this.x=a.x;this.y=g;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var a=new Fc.ExpressionSerializer;return new Fc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:Fc.pt(0,0),previous:Fc.pt(0,0)}}},{key:"controlPoints",set:function(a){var g=a=void 0===a?{}:a;a=g.next;g=g.previous;this._controlPoints={next:a?Fc.Point.fromLiteral(a):Fc.pt(0,0),previous:g?Fc.Point.fromLiteral(g):Fc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",
a)}},{key:"moveControlPoint",value:function(a,g){var l=this.controlPoints[a];l=l?l.addPt(g):g;g="next"==a?"previous":"next";var r=this.controlPoints[g];this.isSmooth&&(r=l.negated().normalized().scaleBy(r.r()));var v={};this.controlPoints=(v[a]=l,v[g]=r,v);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,g,l,r){a=Fc.pt(a.x,a.y);g=Fc.pt(g.x,g.y);a=g.subPt(a);var v=a.scaleBy(1/a.r());l=g.subPt(l).dotProduct(v);return g.subPt(v.scaleBy(Math.max(1,Math.min(l,a.r())))).addXY(r,r)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"adaptControlPoints",value:function(a){var g=this.nextVertex,l=this.previousVertex,r=this.position,v=this.path,y=v.vertices,A=y.indexOf(this),E=0===A;y=A===y.length-1;l=l?l.position:r;g=g?g.position:r;a?(a=this.pointOnLine(l,g,r,v.borderWidth),this.controlPoints={previous:E?Fc.pt(0,0):a.subPt(g),next:a.subPt(l)}):this.controlPoints={previous:E?Fc.pt(0,
0):l.subPt(r).scaleBy(.5),next:y?Fc.pt(0,0):g.subPt(r).scaleBy(.5)};v.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:91440,end:95241})}(void 0);Fc.PathPoint=DH;Fc.PathPoint=DH;Fc.PathPoint=
DH;var EB=Ba("az",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Path")&&"function"===typeof e.Path?e.Path:e.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},
Fc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,g,l){cc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(a,g,l,r){cc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);g=this.getProperty("draggable");
g!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:g});if(g=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:g.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",Fc.getClassName(g)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},{key:"onVertexChanged",value:function(a){this.makeDirty();
this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var g=this.origin,l=this.extent,r=g.x/l.x;l=g.y/l.y;var v=[];a.forEach(function(A,E){var F=A.isSmooth,H=A.position,I=A.controlPoints||{};A=I.next;I=I.previous;v.push(H);F&&0<E&&E<a.length-1&&v.push(H.addPt(A),H.addPt(I))});g=Fc.Rectangle.unionPts(v);
r=Fc.pt(g.width*r,g.height*l);var y=g.topLeft();a.forEach(function(A){return A.moveBy(y.negated())});this.moveBy(this.getTransform().transformDirection(y));this.extent=g.extent().maxPt(Fc.pt(this.borderWidth,this.borderWidth));this.origin=r;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var g=a.prop,l=a.value,r=a.prevValue,v=this._adjustingVertices,y=this._adjustingOrigin;"extent"==g&&l&&r&&!v&&this.adjustVertices(l.scaleByPt(r.inverted()));(!y&&"vertices"===g||"borderWidthLeft"===
g)&&this.updateBounds("vertices"==g?l:this.vertices);v||"origin"!==g||this.updateBounds(this.vertices);cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var g=this,l=this.vertices;l&&l.forEach(function(r){var v=
r.controlPoints,y=v.next;v=v.previous;y=y.scaleByPt(a);v=v.scaleByPt(a);r.position=r.position.addPt(g.origin).scaleByPt(a).subPt(g.origin);r.controlPoints={next:y,previous:v}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var g=this.origin;this.vertices.forEach(function(l){return l.position=g.subPt(a).addXY(l.x,l.y)});cc._get(Object.getPrototypeOf(m.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",value:function(a,g){g=void 0===g?null:g;
var l=this.vertices;g="number"===typeof g?g:g&&g.isPathPoint?l.indexOf(g):void 0;"number"===typeof g&&-1<g?l.splice(g,0,a):l.push(a);this.vertices=l}},{key:"addVertexCloseTo",value:function(a){var g=this.verticesCloseTo(a),l=g.closest,r=l.length;l=l.vertex;g=g.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=r?l:g?g.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=Fc.PropertyPath("env.renderer").get(this);
return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+Fc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,g){g=void 0===g?!0:g;for(var l=this.vertices,r=Infinity,v=-1,y=0;y<l.length;y++){var A=l[y].position.dist(a);A>=r||(r=A,v=y)}a=0===v?null:{index:v-1,vertex:l[v-1]};r=v===l.length-1?null:{index:v+1,vertex:l[v+1]};l={index:v,vertex:l[v]};g&&(g=this._pathNode,a&&(v=this.findClosestPointOnPath(a.vertex.position,6,3,g).length,a.length=v),r&&(v=this.findClosestPointOnPath(r.vertex.position,
6,3,g).length,r.length=v),g=this.findClosestPointOnPath(l.vertex.position,20,3,g).length,l.length=g);return{previous:a,next:r,closest:l}}},{key:"findClosestPointOnPath",value:function(a,g,l,r){function v(y,A,E,F,H,I,M){E=void 0===E?10:E;F=void 0===F?3:F;H=void 0===H?0:H;I=void 0===I?y.getTotalLength():I;M=void 0===M?0:M;var N=I,X=E;I=[];var W=(H-N)/(X-1),ea=0;I.push([Fc.Point.ensure(y.getPointAtLength(N)),N,ea]);for(ea=1;ea<X-1;ea++){var Aa=N+ea*W;I.push([Fc.Point.ensure(y.getPointAtLength(Aa)),Aa,
ea])}I.push([Fc.Point.ensure(y.getPointAtLength(H)),H,ea]);H=Infinity;N=-1;X=$jscomp.makeIterator(I);for(W=X.next();!W.done;W=X.next())ea=$jscomp.makeIterator(W.value),W=ea.next().value,ea.next(),ea=ea.next().value,W=A.dist(W),W>=H||(H=W,N=ea);if(M>=F)return A=$jscomp.makeIterator(I[N]),y=A.next().value,A=A.next().value,{point:y,length:A};H=I[Math.max(0,N-1)][1];I=I[Math.min(I.length-1,N+1)][1];return v(y,A,E,F,H,I,M+1)}r||(r=(r=this.env.renderer.getNodeForMorph(this))&&r.querySelector("#svg"+Fc.string.regExpEscape(this.id)));
return r?v(r,a,g,l):{length:0,point:a}}},{key:"onDragStart",value:function(a){var g=a.domEvt.target,l=(new Fc.PropertyPath("attributes.class.value")).get(g);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),l.next(),a=l.next().value,l=l.next().value,this._controlPointDrag={marker:g,n:Number(a)},void 0!==l&&(this._controlPointDrag.ctrlN=Number(l));else return cc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",
value:function(a){if(!this._controlPointDrag)return cc._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a);var g=this._controlPointDrag,l=g.n,r=g.ctrlN,v=this.vertices;if(g=v[l])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===r?(g.moveBy(a),a=v[l-1],v=v[l+1],a&&10>a.position.dist(g.position)?this._controlPointDrag.maybeMerge=[l-1,l]:v&&10>v.position.dist(g.position)?this._controlPointDrag.maybeMerge=[l,l+1]:this._controlPointDrag.maybeMerge=void 0):1===
r?g.movePreviousControlPoint(a):2===r&&g.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var g=this._controlPointDrag;if(g&&(g=g.maybeMerge,delete this._controlPointDrag,g)){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;a[g].controlPoints.next=a[l].controlPoints.next;a.splice(l,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},
{key:"menuItems",value:function(){var a=this,g=Fc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=Fc.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";g[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?g:l),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?g:l),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(cc._get(Object.getPrototypeOf(m.prototype),
"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return Fc.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||Fc.pt(0,0);return Fc.pt(a.x,a.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=Fc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,
bottom:a};this.setProperty("borderColor",Fc.obj.extract(a,["top","left","right","bottom"],function(g,l){return Fc.obj.isArray(l)?Fc.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var g=this,l=this.isSmooth;this._adjustingVertices=!0;a=a.map(function(r){return r.isPathPoint?Object.assign(r,{path:g}):new Fc.PathPoint(g,Object.assign({isSmooth:l},r))});this.setProperty("vertices",
a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,
before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(g){return g.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:95250,end:108813})}(Fc.Morph));Fc.Path=EB;Fc.Path=EB;Fc.Path=EB;var cE=Ba("aA",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Polygon")&&"function"===typeof e.Polygon?e.Polygon:e.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)cc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108822,
end:109076})}(Fc.Path));Fc.Polygon=cE;Fc.Polygon=cE;Fc.Polygon=cE;var dE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("LineMorph")&&"function"===typeof e.LineMorph?e.LineMorph:e.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=
this.line,g=this.height,l=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,g,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:Fc.Color.black},height:{defaultValue:1},line:{defaultValue:Fc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);
this.update(a)}},start:{derived:!0,after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var g=a.subPt(this.start),l=this.rotation;this.line=new Fc.Line(a,this.end.addPt(g));this.rotation=l}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:109085,end:110577})}(Fc.Morph);Fc.LineMorph=dE;Fc.LineMorph=dE;Fc.LineMorph=dE;var tqa=Object.freeze({__proto__:null,Morph:Jl,Ellipse:DB,Triangle:bE,Image:Ty,PathPoint:DH,Path:EB,Polygon:cE,LineMorph:dE}),IV="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uqa={},o9=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,vqa=uqa=function(b,e){function m(fa){var oa=
fa.match(/\n/g);oa&&(Ka+=oa.length);oa=fa.lastIndexOf("\n");K=~oa?fa.length-oa:K+fa.length}function a(){var fa={line:Ka,column:K};return function(oa){oa.position=new g(fa);A(/^\s*/);return oa}}function g(fa){(this||IV).start=fa;(this||IV).end={line:Ka,column:K};(this||IV).source=e.source}function l(fa){var oa=Error(e.source+":"+Ka+":"+K+": "+fa);oa.reason=fa;oa.filename=e.source;oa.line=Ka;oa.column=K;oa.source=b;if(e.silent)aa.push(oa);else throw oa;}function r(){return A(/^{\s*/)}function v(){return A(/^}/)}
function y(){var fa,oa=[];A(/^\s*/);for(E(oa);b.length&&"}"!=b.charAt(0)&&(fa=ea()||Aa());)!1!==fa&&(oa.push(fa),E(oa));return oa}function A(fa){if(fa=fa.exec(b)){var oa=fa[0];m(oa);b=b.slice(oa.length);return fa}}function E(fa){var oa;for(fa=fa||[];oa=F();)!1!==oa&&fa.push(oa);return fa}function F(){var fa=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var oa=2;""!=b.charAt(oa)&&("*"!=b.charAt(oa)||"/"!=b.charAt(oa+1));)++oa;oa+=2;if(""===b.charAt(oa-1))return l("End of comment missing");var hb=
b.slice(2,oa-2);K+=2;m(hb);b=b.slice(oa);K+=2;return fa({type:"comment",comment:hb})}}function H(){var fa=A(/^([^{]+)/);if(fa)return Nw(fa[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(oa){return oa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(oa){return oa.replace(/\u200C/g,",")})}function I(){var fa=a(),oa=A(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(oa){oa=Nw(oa[0]);if(!A(/^:\s*/))return l("property missing ':'");
var hb=A(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);fa=fa({type:"declaration",property:oa.replace(o9,""),value:hb?Nw(hb[0]).replace(o9,""):""});A(/^[;\s]*/);return fa}}function M(){var fa=[];if(!r())return l("missing '{'");E(fa);for(var oa;oa=I();)!1!==oa&&(fa.push(oa),E(fa));return v()?fa:l("missing '}'")}function N(){for(var fa,oa=[],hb=a();fa=A(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)oa.push(fa[1]),A(/^,\s*/);if(oa.length)return hb({type:"keyframe",values:oa,declarations:M()})}function X(){var fa=
a(),oa=A(/^@([-\w]+)?keyframes\s*/);if(oa){var hb=oa[1];oa=A(/^([-\w]+)\s*/);if(!oa)return l("@keyframes missing name");oa=oa[1];if(!r())return l("@keyframes missing '{'");for(var Cb,va=E();Cb=N();)va.push(Cb),va=va.concat(E());return v()?fa({type:"keyframes",name:oa,vendor:hb,keyframes:va}):l("@keyframes missing '}'")}}function W(fa){var oa=new RegExp("^@"+fa+"\\s*([^;]+);");return function(){var hb=a(),Cb=A(oa);if(Cb){var va={type:fa};va[fa]=Cb[1].trim();return hb(va)}}}function ea(){if("@"==b[0]){var fa;
if(!(fa=X())){fa=a();var oa=A(/^@media *([^{]+)/);if(oa)if(oa=Nw(oa[1]),r()){var hb=E().concat(y());fa=v()?fa({type:"media",media:oa,rules:hb}):l("@media missing '}'")}else fa=l("@media missing '{'");else fa=void 0}fa||(fa=a(),fa=(oa=A(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?fa({type:"custom-media",name:Nw(oa[1]),media:Nw(oa[2])}):void 0);fa||(fa=a(),(oa=A(/^@supports *([^{]+)/))?(oa=Nw(oa[1]),r()?(hb=E().concat(y()),fa=v()?fa({type:"supports",supports:oa,rules:hb}):l("@supports missing '}'")):
fa=l("@supports missing '{'")):fa=void 0);if(!(fa=fa||T()||U()||pa()))if(fa=a(),hb=A(/^@([-\w]+)?document *([^{]+)/))if(oa=Nw(hb[1]),hb=Nw(hb[2]),r()){var Cb=E().concat(y());fa=v()?fa({type:"document",document:hb,vendor:oa,rules:Cb}):l("@document missing '}'")}else fa=l("@document missing '{'");else fa=void 0;if(!fa)if(fa=a(),A(/^@page */))if(oa=H()||[],r()){for(hb=E();Cb=I();)hb.push(Cb),hb=hb.concat(E());fa=v()?fa({type:"page",selectors:oa,declarations:hb}):l("@page missing '}'")}else fa=l("@page missing '{'");
else fa=void 0;fa||(fa=a(),A(/^@host\s*/)?r()?(oa=E().concat(y()),fa=v()?fa({type:"host",rules:oa}):l("@host missing '}'")):fa=l("@host missing '{'"):fa=void 0);if(!fa)if(fa=a(),A(/^@font-face\s*/))if(r()){for(oa=E();hb=I();)oa.push(hb),oa=oa.concat(E());fa=v()?fa({type:"font-face",declarations:oa}):l("@font-face missing '}'")}else fa=l("@font-face missing '{'");else fa=void 0;return fa}}function Aa(){var fa=a(),oa=H();if(!oa)return l("selector missing");E();return fa({type:"rule",selectors:oa,declarations:M()})}
e=e||{};var Ka=1,K=1;g.prototype.content=b;var aa=[],T=W("import"),U=W("charset"),pa=W("namespace");return ES(function(){var fa=y();return{type:"stylesheet",stylesheet:{source:e.source,rules:fa,parsingErrors:aa}}}())},$ga="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,p9={};p9=fL;fL.prototype.emit=function(b){return b};fL.prototype.visit=function(b){return this[b.type](b)};fL.prototype.mapVisit=function(b,e){var m="";e=e||"";for(var a=0,g=b.length;a<g;a++)m+=this.visit(b[a]),
e&&a<g-1&&(m+=this.emit(e));return m};var q9=p9,sy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r9={},E4=q9,wqa=xl;r9=Ym;wqa(Ym,E4);Ym.prototype.compile=function(b){return this.stylesheet(b)};Ym.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};Ym.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};Ym.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};Ym.prototype.media=
function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Ym.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Ym.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};Ym.prototype.namespace=function(b){return this.emit("@namespace "+
b.namespace+";",b.position)};Ym.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Ym.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};Ym.prototype.keyframe=function(b){var e=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),
b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};Ym.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+e,b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Ym.prototype["font-face"]=function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,
"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Ym.prototype.host=function(b){return this.emit("@host",b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Ym.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};Ym.prototype.rule=function(b){var e=this.indent(),m=b.declarations;return m.length?this.emit(b.selectors.map(function(a){return e+a}).join(",\n"),b.position)+this.emit(" {\n")+
this.emit(this.indent(1))+this.mapVisit(m,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};Ym.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};Ym.prototype.indent=function(b){(this||sy).level=(this||sy).level||1;return null!=b?((this||sy).level+=b,""):Array((this||sy).level).join((this||sy).indentation||"  ")};var xqa=r9,JV={},s9=Ni.Buffer;(function(b){var e=function(m){return"function"===typeof m?
m:"function"===typeof s9?function(a){return(new s9(a,"base64")).toString("binary")}:"object"===typeof b.base64js?function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(g){return String.fromCharCode(g)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=e;JV&&(JV=e)})(window);var yqa=JV,zqa=/^xn--/,Aqa=/[^\0-\x7E]/,bha=/[\x2E\u3002\uFF0E\uFF61]/g,aha={overflow:"Overflow: input needs wider integers to process",
"not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Jv=Math.floor,KV=String.fromCharCode,t9=function(b,e){return b+22+75*(26>b)-((0!=e)<<5)},u9=function(b,e,m){var a=0;b=m?Jv(b/700):b>>1;for(b+=Jv(b/e);455<b;a+=36)b=Jv(b/35);return Jv(a+36*b/(b+38))},v9=function(b){var e=[],m=b.length,a=0,g=128,l=72,r=b.lastIndexOf("-");0>r&&(r=0);for(var v=0;v<r;++v)128<=b.charCodeAt(v)&&QA("not-basic"),e.push(b.charCodeAt(v));for(r=0<r?r+1:0;r<m;){v=a;for(var y=1,A=36;;A+=
36){r>=m&&QA("invalid-input");var E=10>(H=b.charCodeAt(r++))-48?H-22:26>H-65?H-65:26>H-97?H-97:36;(36<=E||E>Jv((2147483647-a)/y))&&QA("overflow");a+=E*y;var F=A<=l?1:A>=l+26?26:A-l;if(E<F)break;E=36-F;y>Jv(2147483647/E)&&QA("overflow");y*=E}y=e.length+1;l=u9(a-v,y,0==v);Jv(a/y)>2147483647-g&&QA("overflow");g+=Jv(a/y);a%=y;e.splice(a++,0,g)}var H;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(e))},w9=function(b){for(var e=[],m=(b=G4(b)).length,a=128,g=0,l=72,r=$jscomp.makeIterator(b),
v=r.next();!v.done;v=r.next()){var y=v.value;128>y&&e.push(KV(y))}for((y=r=e.length)&&e.push("-");y<m;){var A=2147483647,E=$jscomp.makeIterator(b);for(v=E.next();!v.done;v=E.next())v=v.value,v>=a&&v<A&&(A=v);v=y+1;A-a>Jv((2147483647-g)/v)&&QA("overflow");g+=(A-a)*v;a=A;A=$jscomp.makeIterator(b);for(E=A.next();!E.done;E=A.next())if(E=E.value,E<a&&2147483647<++g&&QA("overflow"),E==a){var F=g;for(E=36;;E+=36){var H=E<=l?1:E>=l+26?26:E-l;if(F<H)break;F-=H;var I=36-H;e.push(KV(t9(H+F%I,0)));F=Jv(F/I)}e.push(KV(t9(F,
0)));l=u9(g,v,y==r);g=0;++y}++g;++a}return e.join("")},Bqa={version:"2.1.0",ucs2:{decode:G4,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:v9,encode:w9,toASCII:function(b){return F4(b,function(e){return Aqa.test(e)?"xn--"+w9(e):e})},toUnicode:function(b){return F4(b,function(e){return zqa.test(e)?v9(e.slice(4).toLowerCase()):e})}},EH=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?
b:"";default:return""}},FB={};FB.decode=FB.parse=function(b,e,m,a){m=m||"=";var g={};if("string"!=typeof b||0===b.length)return g;var l=/\+/g;b=b.split(e||"&");e=1E3;a&&"number"==typeof a.maxKeys&&(e=a.maxKeys);a=b.length;0<e&&a>e&&(a=e);for(e=0;e<a;++e){var r,v;var y=b[e].replace(l,"%20");var A=y.indexOf(m);0<=A?(r=y.substr(0,A),v=y.substr(A+1)):(r=y,v="");y=decodeURIComponent(r);A=decodeURIComponent(v);Object.prototype.hasOwnProperty.call(g,y)?Array.isArray(g[y])?g[y].push(A):g[y]=[g[y],A]:g[y]=
A}return g};FB.encode=FB.stringify=function(b,e,m,a){return e=e||"&",m=m||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(g){var l=encodeURIComponent(EH(g))+m;return Array.isArray(b[g])?b[g].map(function(r){return l+encodeURIComponent(EH(r))}).join(e):l+encodeURIComponent(EH(b[g]))}).join(e):a?encodeURIComponent(EH(a))+m+encodeURIComponent(EH(b)):""};var eE={},nv={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===
b},isNullOrUndefined:function(b){return null==b}};eE.parse=sG;eE.resolve=function(b,e){return sG(b,!1,!0).resolve(e)};eE.resolveObject=function(b,e){return b?sG(b,!1,!0).resolveObject(e):e};eE.format=function(b){nv.isString(b)&&(b=sG(b));return b instanceof Es?b.format():Es.prototype.format.call(b)};eE.Url=Es;var Cqa=/^([a-z0-9.+-]+:)/i,Dqa=/:[0-9]*$/,Eqa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Fqa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),LV=["'"].concat(Fqa),x9=["%","/","?",";","#"].concat(LV),
y9=["/","?","#"],z9=/^[+a-z0-9A-Z_-]{0,63}$/,Gqa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Hqa={javascript:!0,"javascript:":!0},MV={javascript:!0,"javascript:":!0},fE={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Es.prototype.parse=function(b,e,m){if(!nv.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),
!m&&1===b.split("#").length)if(b=Eqa.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?FB.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this;if(b=Cqa.exec(a)){var g=(b=b[0]).toLowerCase();this.protocol=g;a=a.substr(b.length)}if(m||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||b&&MV[b]||(a=a.substr(2),this.slashes=!0)}if(!MV[b]&&(l||b&&!fE[b])){var r,v;l=-1;for(m=0;m<y9.length;m++)-1!==(y=a.indexOf(y9[m]))&&
(-1===l||y<l)&&(l=y);-1!==(v=-1===l?a.lastIndexOf("@"):a.lastIndexOf("@",l))&&(r=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(r));l=-1;for(m=0;m<x9.length;m++){var y;-1!==(y=a.indexOf(x9[m]))&&(-1===l||y<l)&&(l=y)}-1===l&&(l=a.length);this.host=a.slice(0,l);a=a.slice(l);this.parseHost();this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(l=this.hostname.split(/\./),v=(m=0,l.length);m<v;m++)if((y=l[m])&&!y.match(z9)){b="";for(var A=
0,E=y.length;A<E;A++)127<y.charCodeAt(A)?b+="x":b+=y[A];if(!b.match(z9)){v=l.slice(0,m);m=l.slice(m+1);(y=y.match(Gqa))&&(v.push(y[1]),m.unshift(y[2]));m.length&&(a="/"+m.join(".")+a);this.hostname=v.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();r||(this.hostname=Bqa.toASCII(this.hostname));m=this.port?":"+this.port:"";this.host=(this.hostname||"")+m;this.href+=this.host;r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&
(a="/"+a))}if(!Hqa[g])for(m=0,v=LV.length;m<v;m++)r=LV[m],-1!==a.indexOf(r)&&(y=encodeURIComponent(r),y===r&&(y=escape(r)),a=a.split(r).join(y));m=a.indexOf("#");-1!==m&&(this.hash=a.substr(m),a=a.slice(0,m));m=a.indexOf("?");if(-1!==m?(this.search=a.substr(m),this.query=a.substr(m+1),e&&(this.query=FB.parse(this.query)),a=a.slice(0,m)):e&&(this.search="",this.query={}),a&&(this.pathname=a),fE[g]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)m=this.pathname||"",this.path=
m+(this.search||"");return this.href=this.format(),this};Es.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var e=this.protocol||"",m=this.pathname||"",a=this.hash||"",g=!1,l="";this.host?g=b+this.host:this.hostname&&(g=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(g+=":"+this.port));this.query&&nv.isObject(this.query)&&Object.keys(this.query).length&&(l=FB.stringify(this.query));b=this.search||l&&"?"+
l||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||fE[e])&&!1!==g?(g="//"+(g||""),m&&"/"!==m.charAt(0)&&(m="/"+m)):g||(g=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),e+g+(m=m.replace(/[?#]/g,function(r){return encodeURIComponent(r)}))+(b=b.replace("#","%23"))+a};Es.prototype.resolve=function(b){return this.resolveObject(sG(b,!1,!0)).format()};Es.prototype.resolveObject=function(b){if(nv.isString(b)){var e=new Es;e.parse(b,!1,!0);b=e}e=new Es;for(var m=Object.keys(this),
a=0;a<m.length;a++){var g=m[a];e[g]=this[g]}if(e.hash=b.hash,""===b.href)return e.href=e.format(),e;if(b.slashes&&!b.protocol){var l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],"protocol"!==a&&(e[a]=b[a]);return fE[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(b.protocol&&b.protocol!==e.protocol){if(!fE[b.protocol]){l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],e[a]=b[a];return e.href=e.format(),e}if(e.protocol=b.protocol,b.host||MV[b.protocol])e.pathname=
b.pathname;else{for(var r=(b.pathname||"").split("/");r.length&&!(b.host=r.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==r[0]&&r.unshift("");2>r.length&&r.unshift("");e.pathname=r.join("/")}if(e.search=b.search,e.query=b.query,e.host=b.host||"",e.auth=b.auth,e.hostname=b.hostname||b.host,e.port=b.port,e.pathname||e.search)e.path=(e.pathname||"")+(e.search||"");return e.slashes=e.slashes||b.slashes,e.href=e.format(),e}m=e.pathname&&"/"===e.pathname.charAt(0);var v=b.host||b.pathname&&
"/"===b.pathname.charAt(0),y=m=v||m||e.host&&b.pathname;a=e.pathname&&e.pathname.split("/")||[];g=(r=b.pathname&&b.pathname.split("/")||[],e.protocol&&!fE[e.protocol]);if(g&&(e.hostname="",e.port=null,e.host&&(""===a[0]?a[0]=e.host:a.unshift(e.host)),e.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===r[0]?r[0]=b.host:r.unshift(b.host)),b.host=null),m=m&&(""===r[0]||""===a[0])),v)e.host=b.host||""===b.host?b.host:e.host,e.hostname=b.hostname||""===b.hostname?b.hostname:e.hostname,e.search=
b.search,e.query=b.query,a=r;else if(r.length)a||(a=[]),a.pop(),a=a.concat(r),e.search=b.search,e.query=b.query;else if(!nv.isNullOrUndefined(b.search))return g&&(e.hostname=e.host=a.shift(),(l=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=l.shift(),e.host=e.hostname=l.shift())),e.search=b.search,e.query=b.query,nv.isNull(e.pathname)&&nv.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!a.length)return e.pathname=null,e.search?e.path=
"/"+e.search:e.path=null,e.href=e.format(),e;v=a.slice(-1)[0];r=(e.host||b.host||1<a.length)&&("."===v||".."===v)||""===v;for(var A=0,E=a.length;0<=E;E--)"."===(v=a[E])?a.splice(E,1):".."===v?(a.splice(E,1),A++):A&&(a.splice(E,1),A--);if(!m&&!y)for(;A--;A)a.unshift("..");!m||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");r&&"/"!==a.join("/").substr(-1)&&a.push("");y=""===a[0]||a[0]&&"/"===a[0].charAt(0);g&&(e.hostname=e.host=y?"":a.length?a.shift():"",(l=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&
(e.auth=l.shift(),e.host=e.hostname=l.shift()));return(m||e.host&&a.length)&&!y&&a.unshift(""),a.length?e.pathname=a.join("/"):(e.pathname=null,e.path=null),nv.isNull(e.pathname)&&nv.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=b.auth||e.auth,e.slashes=e.slashes||b.slashes,e.href=e.format(),e};Es.prototype.parseHost=function(){var b=this.host,e=Dqa.exec(b);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),b=b.substr(0,b.length-e.length));b&&(this.hostname=b)};var Iqa=
uj,FH={resolve:function(){for(var b,e="",m=!1,a=arguments.length-1;-1<=a&&!m;a--){var g;0<=a?g=arguments[a]:(void 0===b&&(b=Iqa.cwd()),g=b);ov(g);0!==g.length&&(e=g+"/"+e,m=47===g.charCodeAt(0))}return e=H4(e,!m),m?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(b){if(ov(b),0===b.length)return".";var e=47===b.charCodeAt(0),m=47===b.charCodeAt(b.length-1);return 0!==(b=H4(b,!e)).length||e||(b="."),0<b.length&&m&&(b+="/"),e?"/"+b:b},isAbsolute:function(b){return ov(b),0<b.length&&47===b.charCodeAt(0)},
join:function(){if(0===arguments.length)return".";for(var b,e=0;e<arguments.length;++e){var m=arguments[e];ov(m);0<m.length&&(void 0===b?b=m:b+="/"+m)}return void 0===b?".":FH.normalize(b)},relative:function(b,e){if((ov(b),ov(e),b===e)||(b=FH.resolve(b))===(e=FH.resolve(e)))return"";for(var m=1;m<b.length&&47===b.charCodeAt(m);++m);for(var a=b.length,g=a-m,l=1;l<e.length&&47===e.charCodeAt(l);++l);for(var r=e.length-l,v=g<r?g:r,y=-1,A=0;A<=v;++A){if(A===v){if(r>v){if(47===e.charCodeAt(l+A))return e.slice(l+
A+1);if(0===A)return e.slice(l+A)}else g>v&&(47===b.charCodeAt(m+A)?y=A:0===A&&(y=0));break}var E=b.charCodeAt(m+A);if(E!==e.charCodeAt(l+A))break;47===E&&(y=A)}g="";for(A=m+y+1;A<=a;++A)A!==a&&47!==b.charCodeAt(A)||(0===g.length?g+="..":g+="/..");return 0<g.length?g+e.slice(l+y):(l+=y,47===e.charCodeAt(l)&&++l,e.slice(l))},_makeLong:function(b){return b},dirname:function(b){if(ov(b),0===b.length)return".";for(var e=47===b.charCodeAt(0),m=-1,a=!0,g=b.length-1;1<=g;--g)if(47===b.charCodeAt(g)){if(!a){m=
g;break}}else a=!1;return-1===m?e?"/":".":e&&1===m?"//":b.slice(0,m)},basename:function(b,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');ov(b);var m,a=0,g=-1,l=!0;if(void 0!==e&&0<e.length&&e.length<=b.length){if(e.length===b.length&&e===b)return"";var r=e.length-1,v=-1;for(m=b.length-1;0<=m;--m){var y=b.charCodeAt(m);if(47===y){if(!l){a=m+1;break}}else-1===v&&(l=!1,v=m+1),0<=r&&(y===e.charCodeAt(r)?-1==--r&&(g=m):(r=-1,g=v))}return a===g?g=v:-1===g&&(g=
b.length),b.slice(a,g)}for(m=b.length-1;0<=m;--m)if(47===b.charCodeAt(m)){if(!l){a=m+1;break}}else-1===g&&(l=!1,g=m+1);return-1===g?"":b.slice(a,g)},extname:function(b){ov(b);for(var e=-1,m=0,a=-1,g=!0,l=0,r=b.length-1;0<=r;--r){var v=b.charCodeAt(r);if(47!==v)-1===a&&(g=!1,a=r+1),46===v?-1===e?e=r:1!==l&&(l=1):-1!==e&&(l=-1);else if(!g){m=r+1;break}}return-1===e||-1===a||0===l||1===l&&e===a-1&&e===m+1?"":b.slice(e,a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+
typeof b);var e=b.dir||b.root,m=b.base||(b.name||"")+(b.ext||"");return e?e===b.root?e+m:e+"/"+m:m},parse:function(b){ov(b);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return e;var m,a=b.charCodeAt(0),g=47===a;g?(e.root="/",m=1):m=0;for(var l=-1,r=0,v=-1,y=!0,A=b.length-1,E=0;A>=m;--A)if(47!==(a=b.charCodeAt(A)))-1===v&&(y=!1,v=A+1),46===a?-1===l?l=A:1!==E&&(E=1):-1!==l&&(E=-1);else if(!y){r=A+1;break}return-1===l||-1===v||0===E||1===E&&l===v-1&&l===r+1?-1!==v&&(e.base=e.name=0===
r&&g?b.slice(1,v):b.slice(r,v)):(0===r&&g?(e.name=b.slice(1,l),e.base=b.slice(1,v)):(e.name=b.slice(r,l),e.base=b.slice(r,v)),e.ext=b.slice(l,v)),0<r?e.dir=b.slice(0,r-1):g&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null},NV=FH.posix=FH,A9={},B9=/%[a-f0-9]{2}/gi,C9=/(%[a-f0-9]{2})+/gi;A9=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(r){for(var e={"%FE%FF":"\ufffd\ufffd",
"%FF%FE":"\ufffd\ufffd"},m=C9.exec(b);m;){try{e[m[0]]=decodeURIComponent(m[0])}catch(v){var a=m[0];try{var g=decodeURIComponent(a)}catch(y){g=a.match(B9);for(var l=1;l<g.length;l++)a=FS(g,l).join(""),g=a.match(B9);g=a}g!==m[0]&&(e[m[0]]=g)}m=C9.exec(b)}e["%C2"]="\ufffd";m=Object.keys(e);for(a=0;a<m.length;a++)g=m[a],b=b.replace(new RegExp(g,"g"),e[g]);return b}};var Jqa={},fha=uj,N4=yqa,cha=eE,dha=NV,eha=A9,D9=/[#@] sourceMappingURL=([^\s'"]*)/,gha=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+D9.source+
")\\s*\\*/|//(?:"+D9.source+"))\\s*"),hha=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,iha=/^(?:application|text)\/json$/,jha="utf-8",kha=/\/?$/,Kqa=Jqa={resolveSourceMap:K4,resolveSourceMapSync:M4,resolveSources:O4,resolveSourcesSync:Q4,resolve:function(b,e,m,a,g){function l(v){O4(v.map,v.sourcesRelativeTo,m,a,function(y,A){if(y)return g(y);v.sourcesResolved=A.sourcesResolved;v.sourcesContent=A.sourcesContent;g(null,v)})}"function"===typeof a&&(g=a,a={});if(null===b){var r={sourceMappingURL:null,url:e,
sourcesRelativeTo:e,map:null};b=tG(e);m(b,function(v,y){if(v)return v.sourceMapData=r,g(v);r.map=String(y);try{r.map=wD(r.map,r)}catch(A){return g(A)}l(r)})}else K4(b,e,m,function(v,y){if(v)return g(v);if(!y)return g(null,null);l(y)})},resolveSync:function(b,e,m,a){if(null===b)b={sourceMappingURL:null,url:e,sourcesRelativeTo:e,map:null},b.map=J4(m,e,b),b.map=wD(b.map,b);else if(b=M4(b,e,m),!b)return null;e=Q4(b.map,b.sourcesRelativeTo,m,a);b.sourcesResolved=e.sourcesResolved;b.sourcesContent=e.sourcesContent;
return b},parseMapToJSON:wD},Lqa=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},HS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,E9={},R4=q9,Mqa=xl;E9=go;Mqa(go,R4);go.prototype.compile=function(b){return b.stylesheet.rules.map((this||HS).visit,this||HS).join("")};go.prototype.comment=function(b){return this.emit("",
b.position)};go.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};go.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};go.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};go.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};go.prototype.namespace=
function(b){return this.emit("@namespace "+b.namespace+";",b.position)};go.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};go.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};go.prototype.keyframe=function(b){var e=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(e)+
this.emit("}")};go.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+e,b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};go.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};go.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};go.prototype["custom-media"]=function(b){return this.emit("@custom-media "+
b.name+" "+b.media+";",b.position)};go.prototype.rule=function(b){var e=b.declarations;return e.length?this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(e)+this.emit("}"):""};go.prototype.declaration=function(b){return this.emit(b.property+":"+b.value,b.position)+this.emit(";")};var Nqa=E9,Sp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ax={};ax=function(b){b._comment=b.comment;b.map=new Zo;b.position={line:1,column:1};b.files={};for(var e in ax)b[e]=
ax[e]};var F9=function(b){return"\\"===NV.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};ax.updatePosition=function(b){var e=b.match(/\n/g);e&&((this||Sp).position.line+=e.length);e=b.lastIndexOf("\n");(this||Sp).position.column=~e?b.length-e:(this||Sp).position.column+b.length};ax.emit=function(b,e){if(e){var m=F9(e.source||"source.css");(this||Sp).map.addMapping({source:m,generated:{line:(this||Sp).position.line,column:Math.max((this||Sp).position.column-1,0)},original:{line:e.start.line,
column:e.start.column-1}});this.addFile(m,e)}this.updatePosition(b);return b};ax.addFile=function(b,e){"string"!==typeof e.content||Object.prototype.hasOwnProperty.call((this||Sp).files,b)||((this||Sp).files[b]=e.content)};ax.applySourceMaps=function(){Object.keys((this||Sp).files).forEach(function(b){var e=(this||Sp).files[b];(this||Sp).map.setSourceContent(b,e);if(!1!==(this||Sp).options.inputSourcemaps&&(e=Kqa.resolveSync(e,b,Lqa))){var m=new sj(e.map);(this||Sp).map.applySourceMap(m,b,F9(NV.dirname(e.sourcesRelativeTo)))}},
this||Sp)};ax.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):this._comment(b)};var Oqa=ax,Pqa={},Qqa=Pqa=function(b,e){e=e||{};var m=e.compress?new Nqa(e):new xqa(e);return e.sourcemap?(Oqa(m),b=m.compile(b),m.applySourceMaps(),e="generator"===e.sourcemap?m.map:m.map.toJSON(),{code:b,map:e}):b=m.compile(b)},OV={};OV.parse=vqa;OV.stringify=Qqa;var ej=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");ej.obj=Ag;ej.promise=ph;ej.string=ti;ej.pt=
Ii;ej.Morph=Jl;ej.vdom=WG;ej.addOrChangeCSSDeclaration=ms;ej.css=OV;ej.importModuleViaNative=J;var HN=ej.vdom;ej.diff=HN.diff;ej.patch=HN.patch;ej.h=HN.h;ej.createElement=HN.create;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=e.hasOwnProperty("CustomVNode")&&"function"===typeof e.CustomVNode?e.CustomVNode:e.CustomVNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.morph=a;this.renderer=g;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,g=this.morphVtree=this.renderer.renderMorph(a),l="customNode-key-"+a.id;g.children[0]&&g.children[0].key===l||g.children.unshift(ej.h(a.domNodeTagName||"div",{key:l},[]));a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return g}},
{key:"init",value:function(){var a=ej.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,g){a=a.morphVtree||this.renderMorph();var l=this.renderMorph();a=ej.diff(a,l);ej.patch(g,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of "+
this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:484,end:2485})})(void 0);var Uy=Ba("ax",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),
m=e.hasOwnProperty("HTMLMorph")&&"function"===typeof e.HTMLMorph?e.HTMLMorph:e.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var g=ej.css.parse(this.cssDeclaration);this.whenRendered().then(function(){g.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(r){return"#"+
a.id+" "+r}))});ej.addOrChangeCSSDeclaration("css-for-"+a.id,ej.css.stringify(g))})}catch(l){console.error("Error setting cssDeclaration of "+this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new ej.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,g=cc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:ej.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(a.includes("<script")){a=this.domNode.querySelectorAll("script");a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=
a.next()){var l=g.value;g=l.parentNode;l.remove();for(var r=document.createElement("script"),v=$jscomp.makeIterator(l.attributes),y=v.next();!y.done;y=v.next())y=y.value,r.setAttribute(y.name,y.value);l=$jscomp.makeIterator(l.childNodes);for(v=l.next();!v.done;v=l.next())r.appendChild(v.value);g.appendChild(r)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||
(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return ej.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",
a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2810,end:6932})}(ej.Morph));ej.HTMLMorph=Uy;ej.HTMLMorph=Uy;ej.HTMLMorph=Uy;var GH=function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||
Promise.resolve()}},{key:"displayHTML",value:function(a,g){g=void 0===g?{}:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){r=g;if(v=void 0===r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.srcDoc=a;return A.yield(l.whenLoaded(),2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"loadURL",value:function(a,g){g=void 0===g?{}:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){r=g;if(v=void 0===
r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.src=a;return A.yield(l.whenLoaded(),2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a=(new ej.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",g.yield(a.loadURL("https://google.com"),2);a.iframe.src;
a.iframe.srcDoc;a.src="";a.srcDoc="fooo";return g.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var g=ej.promise.deferred().resolve;this._whenLoaded=
ej.promise;this.iframe.onload=function(l){return g(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return ej.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;return ej.pt(a.scrollX,a.scrollY)}catch(g){return ej.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,
a.y)}catch(g){}}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6941,end:10238})}(ej.HTMLMorph);ej.IFrameMorph=GH;ej.IFrameMorph=GH;ej.IFrameMorph=GH;var Rqa=Object.freeze({__proto__:null,HTMLMorph:Uy,IFrameMorph:GH}),Tp=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");
Tp.pt=Ii;Tp.Morph=Jl;Tp.morph=qa;Tp.config=Cn;var gE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),m=e.hasOwnProperty("TooltipViewer")&&"function"===typeof e.TooltipViewer?e.TooltipViewer:e.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip",
"currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){for(var g=a.hand,l=g.morphBeneath(a.positionIn($world));l&&!l.visible;)l=l.morphBeneath(a.positionIn($world));l&&this.currentMorph!==l&&this.invalidatesCurrentTooltip(l)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(l,g),this.currentMorph=
l)}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,g){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,g):this.scheduleTooltipFor(a,g)}},{key:"hoverOutOfMorph",value:function(a){var g=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return g.currentTooltip==l&&(g.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,g){var l=this;this.timer=
setTimeout(function(){return l.showTooltipFor(a,g)},1E3*Tp.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,g){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),g=g?g.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new Tp.Tooltip({position:g,description:a.tooltip}),a.world().addMorph(this.currentTooltip),
this.currentTooltip.update(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:154,end:2311})}(void 0);Tp.TooltipViewer=gE;Tp.TooltipViewer=gE;Tp.TooltipViewer=gE;var GB=Ba("ak",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),
m=e.hasOwnProperty("Tooltip")&&"function"===typeof e.Tooltip?e.Tooltip:e.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(Tp.pt(0,7))}},{key:"softRemove",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,
duration:300}),2);a&&a(g);g.remove();l.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(a){var g=$jscomp.makeIterator(this.submorphs).next().value;
g.value=a;g.fit()}},submorphs:{initialize:function(){this.submorphs=[new Tp.morph({type:"label",width:200})]}}}}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2320,end:3477})}(Tp.Morph));Tp.Tooltip=GB;Tp.Tooltip=GB;Tp.Tooltip=GB;var Sqa=Object.freeze({__proto__:null,TooltipViewer:gE,
Tooltip:GB}),G9=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");G9.default=$w;G9.MorphicDB=$w;var Tqa=Object.freeze({__proto__:null,MorphicDB:$w}),me=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");me.pt=Ii;me.Rectangle=Le;me.rect=Cl;me.arr=eg;me.Closure=Qj;me.num=Km;me.grid=vz;me.obj=Ag;me.once=fr;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("Layout")&&"function"===typeof e.Layout?e.Layout:e.Layout=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{}:a;a=g.spacing;var l=g.padding,r=g.border,v=g.container,y=g.manualUpdate,A=g.autoResize,E=g.ignore,F=g.onScheduleApply,H=g.layoutOrder;g=g.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},r);this.ignore=E||[];this.lastBoundsExtent=
this.container&&this.container.bounds().extent();this.active=!1;this.container=v;this.manualUpdate=y;this.reactToSubmorphAnimations=g||!1;this.autoResize=void 0!=A?A:!0;this.onScheduleApply=F||function(I,M,N){};H&&(this.layoutOrder=H,this.layoutOrderSource=JSON.stringify(String(H)));this.spacing=a||0;this._padding=l?"number"===typeof l?me.Rectangle.inset(l):l:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},
{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=me.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",
value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=me.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return me.arr.sortBy(this.container.submorphs.filter(function(g){return g.isLayoutable&&
!a.ignore.includes(g.name)}),function(g){return a.layoutOrder(g)})}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,g=this.layoutableSubmorphBounds;if(!g||a.length!=g.length)return!0;for(var l=0;l<a.length;l++)if(!g[l].equals(a[l].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},
{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,
animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var g=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(l){return g.forceLayoutsOfMorph(l)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(g){return a.forceLayoutsOfMorph(g)})}},{key:"scheduleApply",value:function(a,g,l){l=void 0===l?{}:l;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,
g,l);this.active||(g&&(this.lastAnim=g),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(a,g){this.scheduleApply(a,this.reactToSubmorphAnimations&&g.meta.animation,g)}},{key:"onSubmorphAdded",value:function(a,g){this.submorphsChanged=!0;this.scheduleApply(a,g)}},{key:"onSubmorphRemoved",value:function(a,g){this.submorphsChanged=!0;this.scheduleApply(a,g)}},{key:"onChange",value:function(a){var g=a.args,l=a.prop,r=a.value,v=a.prevValue,y=a.meta;y=this.reactToSubmorphAnimations&&y&&
y.animation;g=g&&g[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(g,y);break;case "addMorphAt":this.onSubmorphAdded(g,y)}"extent"===l&&r&&v&&(v.x!==r.x||v.y!==r.y)&&this.scheduleApply(g,y)}},{key:"affectsLayout",value:function(a,g){a=g.value;var l=g.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(g.prop)&&!me.obj.equals(a,l)}},{key:"onSubmorphChange",value:function(a,g){if(g.meta&&g.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&
g.meta.animation);if(this.affectsLayout(a,g))this.onSubmorphResized(a,g)}},{key:"changePropertyAnimated",value:function(a,g,l,r){if(r){var v=r.duration;r=r.easing;var y={};this.animationPromise=a.animate((y[g]=l,y.duration=v,y.easing=r,y))}else a[g]=l}},{key:"attachAnimated",value:function(a,g,l){this.active||(this.container=g,this.active=!0,g.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:l})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=
!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6611})})(void 0);var HH=Ba("a$",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=e.hasOwnProperty("CustomLayout")&&"function"===typeof e.CustomLayout?e.CustomLayout:e.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){cc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=me.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(g){console.error("Error in relayout() of a custom layout:",g)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6620,end:7548})}(me.Layout));me.CustomLayout=HH;me.CustomLayout=HH;me.CustomLayout=HH;var IH=Ba("bh",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=e.hasOwnProperty("SnapLayout")&&"function"===typeof e.SnapLayout?e.SnapLayout:e.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var g=this;a=void 0===a?!1:a;if(!this.active&&this.container){cc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var l=this.container.submorphBounds().insetBy(-this.spacing),r=me.pt(this.spacing,this.spacing).subPt(l.topLeft());r.r()&&this.container.submorphs.forEach(function(v){return g.changePropertyAnimated(v,"position",v.position.addPt(r),a)});this.changePropertyAnimated(this.container,
"extent",l.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7557,end:8354})}(me.Layout));me.SnapLayout=IH;me.SnapLayout=IH;me.SnapLayout=IH;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=e.hasOwnProperty("FloatLayout")&&"function"===typeof e.FloatLayout?e.FloatLayout:e.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(g.active||
!g.container||!g.container.submorphs.length||!g.layoutableSubmorphs.length)return r.return();g.layoutableSubmorphBounds||g.refreshBoundsCache();cc._get(Object.getPrototypeOf(m.prototype),"apply",g).call(g,a);g.active=!0;try{l=g.computeMinContainerExtent(),g.layoutSubmorphs(l,a),l=g.computeMinContainerExtent(),g.resizeContainer(l,a),g.lastBoundsExtent=g.container.bounds().extent()}finally{g.active=!1,g.layoutRequests=!1}return r.return(g.animationPromise)})}},{key:"resizeContainer",value:function(){}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8356,end:10764})})(me.Layout);var Vy=Ba("al",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("VerticalLayout")&&
"function"===typeof e.VerticalLayout?e.VerticalLayout:e.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},
{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return cc._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+me.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,g){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.spacing,A=this.autoResize,E=this.align,F=this.resizeSubmorphs,H=this.getStartY(a),I=[];a=F?r.width:a.x;A=A&&!F;var M=function(N,X){v.reduce(function(W,ea){F&&l.changePropertyAnimated(ea,"width",r.width-2*y,g);l.forceLayoutsOfMorph(ea);l.changePropertyAnimated(ea,N,W,g);W=ea.bounds();I.push(W);return W[N]().addXY(0,W.height+y)},X)};this.layoutableSubmorphBounds=
I;"left"===E?M("topLeft",me.pt(y,H)):"right"===E?M("topRight",me.pt(a+(A?y:-y),H)):M("topCenter",me.pt((a+(A?2*y:0))/2,H))}},{key:"resizeContainer",value:function(a,g){var l=this.direction,r=this.layoutableSubmorphs,v=this.resizeSubmorphs,y=this.spacing,A=this.container;this.autoResize&&("centered"===l?(l=r[0].top,r=me.arr.last(r).bottom+l):r=me.arr.last(r).bottom+y,a=me.pt(v?A.width:a.x+2*y,Math.max(r,a.y)),this.changePropertyAnimated(A,"extent",a,g))}},{key:"getStartY",value:function(a){var g=this.layoutableSubmorphBounds,
l=this.spacing,r=this.direction;var v=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var y=g.next();!y.done;y=g.next())v+=y.value.height;return Math.max(0,"bottomToTop"===r?a.y-v-2*l:"centered"===r?a.y/2-v/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,g=this.layoutableSubmorphs,l=this.autoResize,r=(g.length+1)*this.spacing,v=0,y=0,A=0;A<g.length;A++){var E=g[A].bounds(),F=E.width;y+=E.height;v=Math.max(F,v)}g=me.pt(v,y+r);l||(g=g.maxPt(a.extent));return g}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10773,end:14741})}(me.FloatLayout));me.VerticalLayout=Vy;me.VerticalLayout=
Vy;me.VerticalLayout=Vy;var Kv=Ba("aC",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("HorizontalLayout")&&"function"===typeof e.HorizontalLayout?e.HorizontalLayout:e.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
me.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return cc._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,g){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.resizeSubmorphs,A=this.spacing,E=this.autoResize,F=this.align,H=this.getStartX(a),I=[];a=y?r.height:a.y;E=E&&!y;var M=function(N,X){v.reduce(function(W,ea){y&&
l.changePropertyAnimated(ea,"height",r.height-2*A,g);l.forceLayoutsOfMorph(ea);l.changePropertyAnimated(ea,N,W,g);W=ea.bounds();I.push(W);return W[N]().addXY(W.width+A,0)},X)};this.layoutableSubmorphBounds=I;"top"===F?M("topLeft",me.pt(H,A)):"bottom"===F?M("bottomLeft",me.pt(H,a+(E?A:-A))):M("leftCenter",me.pt(H,(a+(E?2*A:0))/2))}},{key:"resizeContainer",value:function(a,g){var l=this.direction,r=this.layoutableSubmorphBounds,v=this.resizeSubmorphs,y=this.spacing,A=this.container;this.autoResize&&
("centered"===l?(l=r[0].left(),r=me.arr.last(r).right()+l):r=me.arr.last(r).right()+y,a=me.pt(Math.max(a.x,r),v?A.height:a.y+2*y),this.changePropertyAnimated(A,"extent",a,g))}},{key:"getStartX",value:function(a){var g=this.layoutableSubmorphBounds,l=this.spacing,r=this.direction;var v=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var y=g.next();!y.done;y=g.next())v+=y.value.width;return Math.max(0,"rightToLeft"===r?a.x-v-2*l:"centered"===r?a.x/2-v/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=
this.container,g=this.layoutableSubmorphBounds,l=this.autoResize,r=(g.length+1)*this.spacing,v=0,y=0,A=0;A<g.length;A++){var E=g[A],F=E.height;v+=E.width;y=Math.max(F,y)}g=me.pt(v+r,y);l||(g=g.maxPt(a.extent));return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14750,end:18667})}(me.FloatLayout));me.HorizontalLayout=Kv;me.HorizontalLayout=Kv;me.HorizontalLayout=Kv;var JH=Ba("aD",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("ProportionalLayout")&&"function"===typeof e.ProportionalLayout?e.ProportionalLayout:e.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=me.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+me.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(cc._get(Object.getPrototypeOf(m.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,g){var l=this._submorphSettings;a=this.container;g=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=me.pt(0,0);if(l&&a){l=$jscomp.makeIterator(l);for(var r=l.next();!r.done;r=l.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;(r=$jscomp.makeIterator(this._morphsMatchingSelector(a,r)).next().value)&&g.set(r,v)}this.proportionalLayoutSettingsForMorphs=
g}}},{key:"onSubmorphChange",value:function(a,g,l,r){"name"===g.prop&&(l=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,l,!0);return cc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,g,l){l=void 0===l?!1:l;"string"===typeof g&&(g={x:g,y:g});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},g));l&&(g=this.submorphSettings.filter(function(r){return r[0]!==a.name}),g.push([a.name,this.settingsFor(a)]),this._submorphSettings=g)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else me.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var g=this,l={};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;l={$jscomp$loop$prop$setting$2385:l.$jscomp$loop$prop$setting$2385},r=a.next()){r=$jscomp.makeIterator(r.value);var v=r.next().value;l.$jscomp$loop$prop$setting$2385=r.next().value;this._morphsMatchingSelector(this.container,v).forEach(function(y){return function(A){return g.changeSettingsFor(A,y.$jscomp$loop$prop$setting$2385)}}(l))}}},{key:"_morphsMatchingSelector",value:function(a,
g){var l=this,r=[];if(!g)return r;g.isMorph?r=[g]:g instanceof RegExp?r=a.submorphs.filter(function(v){return v.name.match(g)}):"string"===typeof g?r=a.submorphs.filter(function(v){return v.name===g}):Array.isArray(g)&&(r=me.arr.flatmap(g,function(v){return l._morphsMatchingSelector(a,v)}));return r}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,g=this.lastExtent;g&&!a.eqPt(g)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(g)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(l){return l.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.container,l=this.extentDelta,r=l.x;l=l.y;var v=(g||{}).extent;if(!this.active&&g&&(0!=r||0!=l)){this.extentDelta=me.pt(0,0);this.active=!0;cc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var y=this.layoutableSubmorphs;g=v.scaleByPt(v.addXY(-r,-l).invertedSafely());v=$jscomp.makeIterator(y);for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.settingsFor(y),
E=A.x,F=A.y,H=A=0,I=0,M=0;"move"===E&&(A=r);"move"===F&&(H=l);"resize"===E&&(I=r);"resize"===F&&(M=l);if("scale"===E||"scale"===F)E=me.pt("scale"===E?g.x:1,"scale"===F?g.y:1),this.changePropertyAnimated(y,"position",y.position.scaleByPt(E),a),this.changePropertyAnimated(y,"extent",y.extent.scaleByPt(E),a);(A||H)&&this.changePropertyAnimated(y,"position",y.position.addXY(A,H),a);(I||M)&&this.changePropertyAnimated(y,"extent",y.extent.addXY(I,M),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18676,end:24220})}(me.Layout));me.ProportionalLayout=JH;me.ProportionalLayout=JH;me.ProportionalLayout=
JH;var KH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof e.CenteredTilingLayout?e.CenteredTilingLayout:e.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;cc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var g=this.spacing,l=this.layoutableSubmorphs,r=g+this.border.top;l=l.slice();for(var v={};l.length;){v.$jscomp$loop$prop$remainingWidth$2387=a;var y=me.arr.takeWhile(l,function(F){return function(H){H=F.$jscomp$loop$prop$remainingWidth$2387-(H.width+2*g);if(0>H)return!1;F.$jscomp$loop$prop$remainingWidth$2387=
H;return!0}}(v));y.length?l=me.arr.withoutAll(l,y):(y=[l.shift()],v.$jscomp$loop$prop$remainingWidth$2387=0);var A=me.pt(v.$jscomp$loop$prop$remainingWidth$2387/2+g+this.border.left,r);y=$jscomp.makeIterator(y);for(var E=y.next();!E.done;E=y.next())E=E.value,E.position=A,A=A.addXY(2*g+E.width,0),r=Math.max(r,E.bottom);r+=2*g;v={$jscomp$loop$prop$remainingWidth$2387:v.$jscomp$loop$prop$remainingWidth$2387}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24229,end:25525})}(me.TilingLayout);me.CenteredTilingLayout=KH;me.CenteredTilingLayout=KH;me.CenteredTilingLayout=KH;var LH=Ba("b0",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("TilingLayout")&&
"function"===typeof e.TilingLayout?e.TilingLayout:e.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+me.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;cc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var g=this.axis,l=this.align,r=this.border,v=this.spacing,
y=this.layoutableSubmorphs,A=this.getOptimalWidth(this.container),E=(g="row"==g)?"left":"top",F=g?"x":"y",H=g?"y":"x",I=0,M=v+r[g?"top":"left"],N="topLeft";switch(this._verticalAlign){case "top":N="topLeft";break;case "center":N="leftCenter";break;case "bottom":N="bottomLeft"}for(;y.length;){var X=A-v,W=me.arr.takeWhile(y,function(Ka){Ka=Ka.bounds().extent();Ka=X-(Ka[F]+v);if(0>Ka)return!1;X=Ka;return!0});W.length?y.splice(0,W.length):(W=[y.shift()],X=0);I=me.arr.max(W.map(function(Ka){return Ka.bounds().extent()[H]}));
if(g)switch(l){case "left":var ea=me.pt(v,M);break;case "center":ea=me.pt(X/2+v+r[E],M);break;case "right":ea=me.pt(X-v,M)}else switch(l){case "left":ea=me.pt(M,v);break;case "center":ea=me.pt(M,X/2+v+r[E]);break;case "right":ea=me.pt(M,X-v)}"bottomLeft"==N&&(ea=ea.addXY(0,I));W=$jscomp.makeIterator(W);for(var Aa=W.next();!Aa.done;Aa=W.next())Aa=Aa.value,this.changePropertyAnimated(Aa,N,ea,a),Aa=Aa.bounds().extent(),ea=g?ea.addXY(v+Aa[F],0):ea.addXY(0,v+Aa[F]);M+=v+I;I=0}this.active=!1}}},{key:"getMinWidth",
value:function(){var a=this.border,g=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().width>l?r.bounds().width:l},0)+g+a}},{key:"getMinHeight",value:function(){var a=this.border,g=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().height>l?r.bounds().height:l},0)+g+a}},{key:"getOptimalWidth",value:function(a){var g=this.axis,l=this.border,r=l.left,v=l.top,y=l.right;l=l.bottom;a="row"==g?a.width-r-y:a.height-v-l;g="row"==g?
this.getMinWidth():this.getMinHeight();return Math.max(a,g)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25534,end:31071})}(me.Layout));me.TilingLayout=LH;me.TilingLayout=LH;me.TilingLayout=LH;var MH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CellGroup")&&"function"===typeof e.CellGroup?e.CellGroup:e.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var g=a.morph,l=a.layout;this.state={cells:[a.cell],layout:l,align:a.align,resize:l.fitToCell};l&&l.addGroup(this);this.morph=g}},{key:"morph",get:function(){var a=this.state,g=a.morph;a=a.layout;return g?g.isMorph?g:a.layoutableSubmorphs.find(function(l){return l.name==g}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},
{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var g=a&&this.layout.getCellGroupFor(a);g&&(g.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.morph;if(g){var l=this.bounds(),r=this.compensateOrigin?this.layout.container.origin.negated():
me.pt(0,0);if(a){var v=this.resize?l.extent():g.extent,y=a;a=y.duration;y=y.easing;var A={};g.animate((A[this.alignedProperty||this.align]=l[this.align]().addPt(r),A.extent=v,A.duration=a,A.easing=y,A))}else this.resize&&(g.extent=l.extent()),g[this.alignedProperty||this.align]=l[this.align]().addPt(r);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?
this.cells.map(function(a){return a.bounds()}).reduce(function(a,g){return a.union(g)}):me.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(g){return g==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,g){a.group=(void 0===g?null:g)||new me.CellGroup({morph:null,layout:this.layout,cell:a});me.arr.remove(this.cells,a);1>this.cells.length&&
this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var g=this;a.cells.forEach(function(l){g.connect(l)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(g){return(null==g.left||g.left.group!=a)&&(null==g.top||g.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(g){return(null==g.right||g.right.group!=a)&&(null==g.bottom||g.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31080,end:34312})}(void 0);me.CellGroup=MH;me.CellGroup=MH;me.CellGroup=MH;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutAxis")&&
"function"===typeof e.LayoutAxis?e.LayoutAxis:e.LayoutAxis=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,g=[];a=a.before;)g=[a].concat($jscomp.arrayFromIterable(g));
return g}},{key:"axisAfter",get:function(){for(var a=this,g=[];a=a.after;)g=[].concat($jscomp.arrayFromIterable(g),[a]);return g}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},
{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(g){return g.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var g=this;if(me.obj.isNumber(a)){var l=a;a=!0}this.items.forEach(function(v){v.fixed[g.dimension]=
a});var r=this.containerLength;void 0!=l&&(this[this.dimension]=l);this.adjustOtherProportions(a);this.containerLength=r}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var g=this;this.items.forEach(function(l){l[g.dimension]=me.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var g=this;this.items.forEach(function(l){l.proportion[g.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var g=this;this.items.forEach(function(l){l.min[g.dimension]=0>l.min[g.dimension]+a?0:l.min[g.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var g=this,l=this.axisBefore,r=this.axisAfter,v=me.arr.sum([].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(r)).filter(function(E){return!E.fixed}).map(function(E){return E.proportion})),
y=function(E){return E.proportion/=v},A=function(E){return E.proportion*=g.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=v);l.forEach(a?y:A);r.forEach(a?y:A)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var g;0>this.length+a&&(a=
-this.length);(g=this.axisAfter.find(function(l){return!l.fixed}))?(a=Math.min(a,g.length),this.length+=a,g.length-=a,this.adjustProportion(),g.adjustProportion()):(g=this.axisBefore.reverse().find(function(l){return!l.fixed}))?(g.length-=a,this.length+=a,this.adjustProportion(),g.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(l){return l.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(l){return!l.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),g=(this.containerLength-this.staticLength)/a.length;a.map(function(l){l.fixed||(l.length=g);return l}).forEach(function(l){return l.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34952,end:40669})})(void 0);var NH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutColumn")&&
"function"===typeof e.LayoutColumn?e.LayoutColumn:e.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new me.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new me.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(g){g.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(g){g.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new me.LayoutColumn(new me.LayoutCell({column:me.arr.withN(this.items.length,null),layout:this.layout}));me.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.height=l.height;g.fixed.height=l.fixed.height;g.frozen.height=l.frozen.height;g.proportion.height=l.proportion.height;g.min.height=l.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;me.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.right=l;l.left=g});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.left&&(l.left.right=l.right);l.right&&(l.right.left=l.left);l.group.disconnect(l);a.layout.removeGroup(l.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40678,end:43052})}(me.LayoutAxis);me.LayoutColumn=NH;me.LayoutColumn=NH;me.LayoutColumn=NH;var OH=function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutRow")&&"function"===typeof e.LayoutRow?e.LayoutRow:e.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new me.LayoutRow(new me.LayoutCell({row:me.arr.withN(this.items.length,null),layout:this.layout}));me.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.width=l.width;g.fixed.width=l.fixed.width;g.frozen.width=l.frozen.width;g.proportion.width=l.proportion.width;g.min.width=l.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(g){g.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(g){g.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new me.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new me.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;me.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.bottom=l;l.top=g});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.top&&(l.top.bottom=l.bottom);l.bottom&&(l.bottom.top=l.top);l.group.disconnect(l);a.layout.removeGroup(l.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43061,
end:45522})}(me.LayoutAxis);me.LayoutRow=OH;me.LayoutRow=OH;me.LayoutRow=OH;var PH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutCell")&&"function"===typeof e.LayoutCell?e.LayoutCell:e.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a.row,l=a.column,r=a.top,v=a.left,
y=a.right,A=a.bottom;a=a.layout;var E;g=$jscomp.makeIterator(g||[]);var F=g.next().value;g=$jscomp.arrayFromIterator(g);l=$jscomp.makeIterator(l||[]);var H=l.next().value;l=$jscomp.arrayFromIterator(l);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=r;this.left=v;this.bottom=A;this.right=y;this.padding=me.rect(0,0,0,0);0<g.length?this.right=new me.LayoutCell({row:g,left:this,layout:a}):0<l.length&&(this.bottom=new me.LayoutCell({column:l,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(E=a&&a.getCellGroupFor(F||H))?E.connect(this):this.group=new me.CellGroup({cell:this,morph:F||H,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var g=a.neighbor,l=a.prepend;a=a.append;for(var r=[],v=this;v=v[g];)l&&(r=[v].concat($jscomp.arrayFromIterable(r))),a&&(r=[].concat($jscomp.arrayFromIterable(r),[v]));return r}},{key:"col",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.right,
l--;if(!g)throw Error(a+" out of bounds! Last column was "+(a-l-1));return new me.LayoutColumn(g)}},{key:"row",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.bottom,l--;if(!g)throw Error(a+" out of bounds! Last row was "+(a-l-1));return new me.LayoutRow(g)}},{key:"extent",get:function(){return me.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return me.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return me.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return me.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return me.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return me.pt(me.arr.sum(this.before.map(function(a){return a.width})),me.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],e,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45531,end:49183})}(void 0);me.LayoutCell=PH;me.LayoutCell=PH;me.LayoutCell=PH;var Wy=Ba("am",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("GridLayout")&&"function"===typeof e.GridLayout?e.GridLayout:e.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],g=[],l=[],r={},v=$jscomp.makeIterator(me.arr.range(0,this.rowCount-1)),y=v.next();!y.done;y=v.next())a.push(this.grid.row(y.value).items.map(function(E){return E.group.state.morph?E.group.state.morph.name||E.group.state.morph:null}));v=$jscomp.makeIterator(me.arr.range(0,this.rowCount-1));for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.grid.row(y);g.push(y,Object.assign({},
A.fixed?{fixed:A.length}:{height:A.height},{paddingTop:A.paddingTop,paddingBottom:A.paddingBottom}))}v=$jscomp.makeIterator(me.arr.range(0,this.columnCount-1));for(y=v.next();!y.done;y=v.next())y=y.value,A=this.grid.col(y),l.push(y,Object.assign({},A.fixed?{fixed:A.length}:{},{paddingLeft:A.paddingLeft,paddingRight:A.paddingRight}));v=$jscomp.makeIterator(this.cellGroups);for(y=v.next();!y.done;y=v.next())y=y.value,y.state.morph&&(r["string"===typeof y.state.morph?y.state.morph:y.morph.name]=me.obj.select(y,
["align","resize"]));return{autoAssign:!1,grid:a,rows:g,columns:l,groups:r}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+me.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,g=this.ensureGrid(this.config).map(function(l){return new me.LayoutRow(new me.LayoutCell({row:l,layout:a}))});g.reduce(function(l,r){return l.attachTo(r)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=g[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var g in a){var l=this.getCellGroupFor(this.container.getSubmorphNamed(g)),r=a[g],v=r.resize,y=void 0===r.align?"topLeft":r.align;r=void 0===r.alignedProperty?"topLeft":r.alignedProperty;l&&(void 0!=v&&(l.resize=v),l.align=y,l.alignedProperty=r)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,g=void 0===a.columns?[]:a.columns,l=$jscomp.makeIterator(me.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Object.assign(this.row(a),r)}g=$jscomp.makeIterator(me.arr.toTuples(g,2));for(a=g.next();!a.done;a=g.next())l=$jscomp.makeIterator(a.value),a=l.next().value,r=l.next().value,Object.assign(this.col(a),r)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(g){return g.resize=a});this.apply()}},{key:"notInLayout",get:function(){return me.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){me.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,g,l;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(r){r.prepareForResize(a.container.height);g=a.grid.totalStaticHeight;return r}).forEach(function(r){r.fixed||
(r.length=r.proportion*Math.max(0,a.container.height-g))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(r){r.prepareForResize(a.container.width);l=a.grid.totalStaticWidth;return r}).forEach(function(r){r.fixed||(r.length=r.proportion*Math.max(0,a.container.width-l))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,cc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=me.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(g){g&&g.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),g=a.next();!g.done;g=a.next())if(g=g.value,g.morph&&!g.bounds().equals(g.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(g){return g.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var g=this.getCellGroupFor(a);g&&(g.morph=null);cc._get(Object.getPrototypeOf(m.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var g=this,l=a.grid,r=a.rowCount,v=a.columnCount;l=l||[[]];r=r||l.length;v=v||me.arr.max(l.map(function(y){return y.length}));l.length<r&&(l=l.concat(me.arr.withN(r-l.length,
[])));return l=l.map(function(y){y.length<v&&(y=y.concat(me.arr.withN(v-y.length,null)));return y.map(function(A){return A&&A.isMorph?(A.owner!=g.container&&g.container.addMorph(A),A):A?g.container.getSubmorphNamed(A)||A:A})})}},{key:"autoAssign",value:function(a){var g=this;a.forEach(function(l){var r,v=Infinity;g.cellGroups.forEach(function(y){y.morph||y.cells.forEach(function(A){A=A.position.dist(l.position);A<v&&(r=y,v=A)})});r&&(r.morph=l)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:49192,end:56229})}(me.Layout));me.GridLayout=Wy;me.GridLayout=Wy;me.GridLayout=Wy;var H9=Object.freeze({__proto__:null,CustomLayout:HH,SnapLayout:IH,VerticalLayout:Vy,HorizontalLayout:Kv,ProportionalLayout:JH,CenteredTilingLayout:KH,TilingLayout:LH,
CellGroup:MH,LayoutColumn:NH,LayoutRow:OH,LayoutCell:PH,GridLayout:Wy});Ba("bW",H9);var lf=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");lf.getAllPartResources=IS;lf.loadPart=hL;lf.savePart=JS;lf.interactivelySavePart=uG;lf.interactivelyLoadObjectFromPartsBinFolder=KS;lf.interactivelySaveObjectToPartsBinFolder=LS;lf.saveObjectToPartsbinFolder=MS;lf.loadObjectFromPartsbinFolder=vG;lf.buildCommitEditor=NS;lf.resource=Tj;lf.Resource=Ug;lf.registerExtension=q;lf.Path=$h;lf.obj=Ag;lf.date=
xu;lf.promise=ph;lf.HorizontalLayout=Kv;lf.VerticalLayout=Vy;lf.morph=qa;lf.pt=Ii;lf.Color=Hg;lf.Rectangle=Le;lf.connect=Zk;lf.emit=gs;lf.SnapshotPackageHelper=FN;lf.ensureCommitInfo=rG;lf.MorphicDB=$w;lf.createMorphSnapshot=gA;lf.getClassName=gr;lf.getAllPartResources=IS;lf.getAllPartResources=IS;lf.loadPart=hL;lf.loadPart=hL;lf.savePart=JS;lf.savePart=JS;lf.interactivelySavePart=uG;lf.interactivelySavePart=uG;lf.interactivelyLoadObjectFromPartsBinFolder=KS;lf.interactivelyLoadObjectFromPartsBinFolder=
KS;lf.interactivelySaveObjectToPartsBinFolder=LS;lf.interactivelySaveObjectToPartsBinFolder=LS;lf.saveObjectToPartsbinFolder=MS;lf.saveObjectToPartsbinFolder=MS;lf.loadObjectFromPartsbinFolder=vG;lf.loadObjectFromPartsbinFolder=vG;var PV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),m=e.hasOwnProperty("SnapshotEditor")&&"function"===typeof e.SnapshotEditor?e.SnapshotEditor:e.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){this.commit=a;this.snapshot=g;this._db=l}},{key:"db",get:function(){return this._db||lf.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,g){var l=this,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){r=a;v=r._id;y=r.name;A=r.type;if(!v)throw Error("No id of commit, cannot save!");return E.yield(l.db.commit(A,y,g,a,void 0,v),2)}a=E.yieldResult;l.commit=
a;l.snapshot=g;return E.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,g){var l=this,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){r=lf.promise.deferred();v=r.promise;y=r.resolve;A=r.reject;E=l;Object.assign(lf.buildCommitEditor(),{commit:Object.assign({},l.commit,{},a),cancel:function(){(this.getWindow()||this).remove();A("canceled")},accept:function(){var H=this,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.setCatchFinallyBlocks(2),
N.yield(E.saveModifiedSnapshot(H.commit,g),4);if(2!=N.nextAddress)return I=N.yieldResult,(H.getWindow()||H).remove(),y(H.commit=I),N.leaveTryBlock(0);M=N.enterCatchBlock();H.showError(M);A(M);N.jumpToEnd()})}}).openInWindow({title:"commit"});return F.return(v)})}},{key:"interactivelyEditMetadata",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(g.interactivelySaveModifiedSnapshot(g.commit,g.snapshot),2);l=r.yieldResult;
"function"===typeof a&&a({commit:l,snapshot:g.snapshot});return r.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var g=this,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return l=g,r=l.commit,v=l.snapshot,y=r,A=y._id,E=y.name,F=y.type,N.yield(System.import("lively.ide/text-editor.js"),2);I=N.yieldResult;M=I.default;M.openURL("<"+F+"/"+E+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(X){var W,
ea,Aa,Ka,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:if(W=v){T.jumpTo(2);break}return T.yield(g.db.fetchSnapshot(void 0,void 0,A),3);case 3:W=T.yieldResult;case 2:ea=W;Aa=JSON.stringify(ea,null,2);if(Aa===H){T.jumpTo(4);break}return T.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(Ka=T.yieldResult,!Ka)return T.return({saved:!1,
message:"canceled"});case 4:return K=JSON.parse(X.ui.contentText.textString),T.yield(g.interactivelySaveModifiedSnapshot(g.commit,K),6);case 6:return r=T.yieldResult,v=K,H=X.ui.contentText.textString,aa={saved:!0,snapshot:K,commit:r},"function"===typeof a&&a(aa),T.return(aa)}})},customLoadContentAction:function(X,W){var ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return(ea=v)?Ka.jumpTo(2):Ka.yield(g.db.fetchSnapshot(void 0,void 0,A),3);2!=Ka.nextAddress&&
(ea=Ka.yieldResult);Aa=ea;return Ka.return({content:H=JSON.stringify(Aa,null,2),url:F+"/"+E+".json"})})}});N.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var g=this,l,r,v,y,A,E,F,H,I,M,N,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:l=g;r=l.commit;v=l.snapshot;y=r;A=y._id;if(E=v){W.jumpTo(2);break}return W.yield(g.db.fetchSnapshot(void 0,void 0,A),3);case 3:E=W.yieldResult;case 2:return F=E,H=(new lf.SnapshotPackageHelper(F)).filesInPackages(),
I=H.map(function(ea){return{isListItem:!0,string:ea.url,value:ea}}),W.yield($world.filterableListPrompt("Select file to edit",I,{historyId:"object-serialization-debugger-hist"}),4);case 4:return M=W.yieldResult,N=$jscomp.makeIterator(M.selected),(X=N.next().value)?W.return(g.interactivelyEditFileInSnapshotPackage(X,a)):W.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,g,l){var r=this,v,y,A,E,F,H,I,M,N,X,W,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:v=
r;y=v.snapshot;A=v.commit;E=A._id;F=A.name;H=A.type;if(I=y){Aa.jumpTo(2);break}return Aa.yield(r.db.fetchSnapshot(void 0,void 0,E),3);case 3:I=Aa.yieldResult;case 2:return M=I,N=a.get(M),Aa.yield(System.import("lively.ide/text-editor.js"),4);case 4:return X=Aa.yieldResult,W=X.default,ea=W.openURL("<"+H+"/"+F+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",customSaveAction:function(Ka){var K,aa,T,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:K=
a.get(M);if(K===N){pa.jumpTo(2);break}return pa.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(aa=pa.yieldResult,!aa)return pa.return({saved:!1,message:"canceled"});case 2:return a.set(M,Ka.ui.contentText.textString),T=r,pa.yield(r.interactivelySaveModifiedSnapshot(r.commit,M),4);case 4:return T.commit=pa.yieldResult,U={commit:r.commit,snapshot:M,saved:!0},"function"===
typeof g&&g(U),pa.return(U)}})},customLoadContentAction:function(Ka,K){return{content:a.get(M),url:a.url}}}),l&&ea.whenRendered().then(function(){return ea.lineNumber=l.row}),Aa.return(ea)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9578,end:14797})}(void 0);lf.SnapshotEditor=PV;lf.SnapshotEditor=PV;lf.SnapshotEditor=PV;lf.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),m=e.hasOwnProperty("PartResource")&&"function"===typeof e.PartResource?e.PartResource:e.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"dirList",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?r.yield(lf.resource(l.url.replace("part://","styleguide://")).dirList(a,g),2):r.return(r.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");})}},{key:"read",
value:function(){var a=this,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(lf.resource(a.url.replace("part://","styleguide://")).read(),2);case 2:g=E.yieldResult;l=g.copy();l.isComponent=!1;l.name="a"+lf.getClassName(l);l.withAllSubmorphsDoExcluding(function(F){F!=l&&F.master||delete F._parametrizedProps},function(F){return F.master&&F!=l});r=l.master;l.master=g;if(!l._pool.mastersInSubHierarchy){E.jumpTo(3);break}v=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);
y=v.next();case 4:if(y.done){E.jumpTo(3);break}A=y.value;if(r==A){E.jumpTo(5);break}return E.yield(A.applyIfNeeded(!0),7);case 7:A.derivedMorph.ownerChain().includes(l)||A.derivedMorph.requestMasterStyling();case 5:y=v.next();E.jumpTo(4);break;case 3:return l.master.applyIfNeeded(!0),delete l._pool,l.withAllSubmorphsDo(function(F){if("function"===typeof F.onLoad)F.onLoad()}),E.return(l)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],e,{pathInPackage:function(){return"partsbin.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14847,end:16485})})(lf.Resource);var QV={name:"part",matches:function(b){return b.match(lf.partURLRe)},resourceClass:lf.PartResource};lf.resourceExtension=QV;lf.resourceExtension=QV;lf.resourceExtension=QV;lf.registerExtension(lf.resourceExtension);lf.buildCommitEditor=NS;lf.buildCommitEditor=
NS;var sg=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");sg.loadWorldFromURL=iL;sg.loadWorldFromCommit=jL;sg.loadWorldFromDB=kL;sg.loadWorld=lL;sg.loadLocalConfig=function(){var b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),m.setCatchFinallyBlocks(2),m.yield(sg.resource(b.id).exists(),4);case 4:if(!m.yieldResult){m.jumpTo(5);break}return m.yield(b.reload({resetEnv:!1,reloadDeps:!1}),
5);case 5:m.leaveTryBlock(0);break;case 2:e=m.enterCatchBlock(),console.error("Error loading localconfig:",e),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+e),m.jumpToEnd()}})};sg.setupLivelyShell=function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(lively.modules.importPackage("lively.shell"),2);case 2:return v.yield(System.import("lively.shell/client-command.js"),3);case 3:return e=
v.yieldResult,m=e.default,v.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=v.yieldResult,g=a.resourceExtension,l=b,r=l.l2lClient,m.installLively2LivelyServices(r),g.resourceClass.defaultL2lClient=r,sg.registerResourceExension(g),console.log("[lively] lively.shell setup"),v.jumpToEnd()}})};sg.setupLively2Lively=function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return e=b.getCurrentUser(),m={world:b.name},e&&(m.userToken=
e.token,m.userRealm=e.realm),r.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return r.yield(System.import("lively.2lively/client.js"),3);case 3:return a=r.yieldResult,g=a.default,r.yield(g.forLivelyInBrowser(m),4);case 4:return l=r.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?sg.reportWorldLoad(b,e):(l._onUserChange=function(v){l.isOnline()&&v.user&&(v=v.user,l.info=Object.assign({},l.info,{userToken:v.token,userRealm:v.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},
sg.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){sg.reportWorldLoad(b,e)}),l.on("registered",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("connected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("disconnected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)})),r.return(l)}})};sg.interactivelySaveWorld=
xD;sg.reportWorldLoad=function(b,e){e=e?e.name+" ("+(e.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(m){return console.warn("report-world-load failed: "+m)})};sg.resource=Tj;sg.registerResourceExension=q;sg.Color=Hg;sg.Path=$h;sg.obj=Ag;sg.date=xu;sg.promise=ph;sg.MorphicEnv=Fs;sg.loadWorldFromResource=JJ;sg.createMorphSnapshot=
gA;sg.MorphicDB=$w;sg.loadObjectFromPartsbinFolder=vG;sg.ensureCommitInfo=rG;sg.pathForBrowserHistory=ca;sg.subscribe=Ao;sg.emit=gs;sg.loadWorldFromURL=iL;sg.loadWorldFromURL=iL;sg.loadWorldFromCommit=jL;sg.loadWorldFromCommit=jL;sg.loadWorldFromDB=kL;sg.loadWorldFromDB=kL;sg.loadWorld=lL;sg.loadWorld=lL;sg.interactivelySaveWorld=xD;sg.interactivelySaveWorld=xD;var Kk=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Kk.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));
b.next();var e=b.next().value;b.next();return JSON.parse(atob(e))};Kk.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};Kk.makeRequest=function(b,e,m,a){a=void 0===a?{}:a;e={method:void 0===e?"GET":e,mode:"cors"};m&&(e.body=m);e.redirect="follow";e.headers=Object.assign({},a);return fetch(b,e)};Kk.POST=function(b,e){var m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==
typeof e&&(e=JSON.stringify(e)),l.yield(Kk.makeRequest(b,"POST",e,{}),2);case 2:return m=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(m.text(),5);case 5:a=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(a&&"application/json"===m.headers.get("content-type"))try{g=JSON.parse(a)}catch(r){}if(!g)throw Error("Unexpected response: "+a);return l.return(g)}})};var HB=Ba("bP",function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=e.hasOwnProperty("User")&&
"function"===typeof e.User?e.User:e.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.realm=g;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,g,l){var r=this,v,y,A,E,F,H,I,M,N,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==
W.nextAddress)return v=r,y=v.email,A=v.createdAt,E=v.roles,F=v.name,H="register"===a?{password:g,email:y,createdAt:A,roles:E,name:F}:{password:g,name:F},W.yield(Kk.POST(l+"/"+a,H),2);I=W.yieldResult;if(I.error)return W.return(I);M=I;N=M.token;X=Kk.jwtTokenDecode(N);E=X.roles;A=X.createdAt;y=X.email;Object.assign(r,{roles:E,createdAt:A,email:y,token:N});return W.return({status:I.status})})}},{key:"verify",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(Kk.POST(a.realm+"/verify",{token:a.token}),2);g=r.yieldResult;l=g.error;return r.return(l?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!g.isLoggedIn)throw Error("To check password, user needs to login.");
return y.yield(Kk.POST(g.realm+"/check-password",{token:g.token,password:a}),2)}l=y.yieldResult;r=l.error;v=l.status;if(r)throw Error(r);return y.return(v)})}},{key:"modify",value:function(a){var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(Kk.POST(g.realm+"/modify",{token:g.token,changes:a}),2);l=I.yieldResult;r=l.error;v=l.status;y=l.token;if(r)return I.return({error:r});y&&(A=Kk.jwtTokenDecode(y),E=A.roles,F=A.createdAt,
H=A.email,Object.assign(g,{roles:E,createdAt:F,email:H,token:y}));return I.return({status:v})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return Kk.guestUser}},{key:"named",value:function(a,g){var l=a+"-"+g,r=Kk.userMap.get(l);r||(r=new this(a,g),Kk.userMap.set(l,r));return r}},{key:"fromToken",value:function(a,g){var l=
Kk.jwtTokenDecode(a),r=l.roles,v=l.createdAt,y=l.email;return Object.assign(this.named(l.name,g),{roles:r,createdAt:v,email:y,token:a})}},{key:"clearCache",value:function(){Kk.userMap=new Map}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));Kk.User=HB;Kk.User=
HB;Kk.User=HB;var IB=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=e.hasOwnProperty("GuestUser")&&"function"===typeof e.GuestUser?e.GuestUser:e.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(a,g,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){throw Error("Guest user cannot "+
a+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3476,end:3702})}(Kk.User);Kk.GuestUser=IB;Kk.GuestUser=IB;Kk.GuestUser=IB;Kk.userMap=Kk.userMap||new Map;Kk.guestUser=Kk.guestUser||Kk.GuestUser.named("guest-"+
Kk.guid(),null);var Yt=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");Yt.User=HB;Yt.GuestUser=IB;Yt.emit=gs;var RV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),m=e.hasOwnProperty("UserRegistry")&&"function"===typeof e.UserRegistry?e.UserRegistry:e.UserRegistry=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"isTrackingGuestUsers",
get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a.isGuestUser?y.jumpTo(2):y.yield(a.login(g),3);if(2!=y.nextAddress&&(r=y.yieldResult,v=r.error))throw Error(v);l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"logout",value:function(a){var g=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{g.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(r){}a=a&&a.isGuestUser?a:Yt.User.guest;Yt.emit("lively.user/userchanged",{user:a},Date.now(),System);return l.return(a)})}},{key:"register",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return y.yield(a.register(g),
2)}r=y.yieldResult;if(v=r.error)throw Error(v);l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var g=localStorage["lively.user"]||sessionStorage["lively.user"];if(g)return g=JSON.parse(g),g.isGuest?Yt.GuestUser.named(g.name,null):Yt.User.fromToken(g.token,a)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?!1:Yt.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&
!a.token)return!1;Yt.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(g){return console.warn("Could not save user into local/sessionStorage: "+g),!1}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],e,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);RV=Yt.UserRegistry;var IN=Ba("bO",RV);Yt.default=RV;var hE=lively.FreezerRuntime.recorderFor("lively.user/index.js");
hE.User=HB;hE.ClientUser=HB;hE.GuestUser=IB;hE.GuestUser=IB;hE.default=IN;hE.UserRegistry=IN;var Uqa=Object.freeze({__proto__:null,ClientUser:HB,GuestUser:IB,UserRegistry:IN}),Bg=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");Bg.bowser=Ms;Bg.Rectangle=Le;Bg.Color=Hg;Bg.pt=Ii;Bg.arr=eg;Bg.promise=ph;Bg.Path=$h;Bg.obj=Ag;Bg.signal=dm;Bg.config=Cn;Bg.MorphicEnv=Fs;Bg.Morph=Jl;Bg.TooltipViewer=gE;Bg.Tooltip=GB;Bg.loadWorldFromURL=iL;Bg.loadWorldFromDB=kL;Bg.loadWorldFromCommit=jL;Bg.loadWorld=
lL;Bg.touchInputDevice=yr;Bg.UserRegistry=IN;Bg.loadMorphFromSnapshot=Wu;Bg.emit=gs;Bg.resource=Tj;var ty=Ba("aE",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=e.hasOwnProperty("World")&&"function"===typeof e.World?e.World:e.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new Bg.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,g,l,r){cc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this._renderer=null;this._tooltipViewer=new Bg.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,g,l,r){cc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);if(a.props.submorphs)for(a=
a.props.submorphs.value,g=a.length;g--;)l.refForId(a[g].id).realObj.isHand&&Bg.arr.removeAt(a,g)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(cc._get(Object.getPrototypeOf(m.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:g=function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():a.windowBounds().union(a.submorphBounds(function(A){return!A.isEpiMorph&&
!A.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return A.return(!a.windowBounds().extent().equals(a.extent))})},r=0;case 2:if(!(v=5>r)){y.jumpTo(4);break}return y.yield(l(),5);case 5:v=y.yieldResult;case 4:if(!v){y.jumpTo(3);break}r++;g();y.jumpTo(2);break;case 3:return a.relayout(),y.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"render",
value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(g){return g instanceof Bg.Hand&&g.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a,g){g=void 0===g?!1:g;var l=this.existingHandForPointerId(a);return l?l:!l&&this.firstHand&&g?(this.firstHand.pointerId=
a,this.firstHand):this.addMorph(new Bg.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return Bg.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},
{key:"getCurrentUser",value:function(){return Bg.UserRegistry.current.loadUserFromLocalStorage(Bg.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",
value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&Bg.config.altClickDefinesThat){var g=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=g},100);g.show();a.stop();console.log('Set global "that" to '+g)}}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(g){if("function"===
typeof g.onWorldUnload)g.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,g=a.positionChangedTime,l=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var r=
document.documentElement;500>Date.now()-g&&!Bg.bowser.firefox?(r.scrollLeft=l,r.scrollTop=a):(this.setProperty("scroll",Bg.pt(r.scrollLeft,r.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(g.whenRendered(),2);if(3!=y.nextAddress)return g._cachedWindowBounds=null,"elastic"!==g.resizePolicy?y.jumpTo(3):y.yield(g.execCommand("resize to fit window"),
3);g.updateVisibleWindowMorphs();l=$jscomp.makeIterator(g.submorphs);for(r=l.next();!r.done;r=l.next())if(v=r.value,"function"===typeof v.onWorldResize)v.onWorldResize(a);y.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var g=this.focusedMorph,l=Bg.arr.findAndGet(Bg.arr.without([g].concat($jscomp.arrayFromIterable(g.ownerChain())),this),function(r){return Bg.arr.findAndGet(r.keyhandlers,function(v){return(v=v.eventCommandLookup(r,a))?{command:v,morph:r}:
null})})||{};g=l.command;l=l.morph;return g?l.execCommand(g):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var g=1/this.scale;return this._cachedWindowBounds=new Bg.Rectangle(a.scrollX*g,a.scrollY*g,(a.innerWidth||this.width)*g,(a.innerHeight||this.height)*g)}},{key:"logError",value:function(a){console.log(a)}},
{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?
"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var g=this,l=Bg.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof l&&(a=l);this.setProperty("showsUserFlap",a);System.import("lively.user/morphic/user-ui.js").then(function(r){return r.UserUI[a?"showUserFlap":"hideUserFlap"](g)})}}}}},
{key:"defaultWorld",value:function(){return Bg.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Bg.loadWorldFromURL(a,g,l)}},{key:"loadWorld",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Bg.loadWorld(a,g,l)}},{key:"loadFromCommit",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Bg.loadWorldFromCommit(a,g,l)}},{key:"loadFromDB",value:function(a,
g,l,r){l=void 0===l?this.defaultWorld():l;r=void 0===r?{}:r;return Bg.loadWorldFromDB(a,g,l,r)}},{key:"loadFromResource",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return r=Bg,v=r.loadWorld,y=Bg,A=y.loadMorphFromSnapshot,E.yield(a.readJson(),4);case 4:return E.yield(A.call(y,E.yieldResult),3);case 3:return E.yield(v.call(r,E.yieldResult,g,l),2);case 2:return E.return(E.yieldResult)}})}}],
e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:770,end:11200})}(Bg.Morph));Bg.World=ty;Bg.World=ty;Bg.World=ty;var iE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=e.hasOwnProperty("Hand")&&"function"===typeof e.Hand?e.Hand:e.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,g,l,r){cc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",
get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,
g){return g}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(a,g){a=void 0===a?!0:a;var l=this,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(!l.grabbedMorphs.length)return N.return();l.env.eventDispatcher.cancelGrab(l,g);r=[];v=$jscomp.makeIterator(l.grabbedMorphs);for(y=v.next();!y.done;y=v.next())A=y.value,E=l._grabbedMorphProperties.get(A)||{},F=E.prevOwner,H=E.prevIndex,I=E.prevPosition,
M=E.pointerAndShadow,Object.assign(A,M),F?(F.addMorphAt(A,H),a?r.push(A.animate({position:I})):A.position=I):A.remove();return N.return(r.length?Promise.all(r):null)})}},{key:"grab",value:function(a){var g=this;if(Bg.obj.isArray(a))return a.forEach(function(l){return g.grab(l)});this.withMetaDo({metaInteraction:!0},function(){g._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:Bg.obj.select(a,["dropShadow","reactsToPointer"])});
a.reactsToPointer=!1;a.dropShadow=!0;g.addMorph(a)});Bg.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var g=this;this.withMetaDo({metaInteraction:!0},function(){g.grabbedMorphs.forEach(function(l){try{var r=(g._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,r);Bg.signal(g,"drop",l);l.onBeingDroppedOn(g,a)}catch(v){console.error(v),g.world().showError("Error dropping "+l+" onto "+a+":\n"+v.stack),l.owner!==a&&g.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,
g,l){var r=this;a=void 0===a?this.globalPosition:a;g=void 0===g?this.grabbedMorphs:g;a=this.world().morphsContainingPoint(a);return Bg.arr.sortBy(a,function(v){return[v].concat($jscomp.arrayFromIterable(v.ownerChain())).find(function(y){return Bg.Path("owner.isWorld").get(y)&&y.hasFixedPosition})?0:1}).find("function"===typeof l?function(v,y){return!r.isAncestorOf(v)&&v.acceptsDrops&&!g.includes(v)&&g.every(function(A){return A.wantsToBeDroppedOn(v)})&&l(v,y)}:function(v){return!r.isAncestorOf(v)&&
v.acceptsDrops&&g.every(function(y){return y.wantsToBeDroppedOn(v)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Bg.touchInputDevice?Bg.Color.transparent:Bg.Color.orange},extent:{defaultValue:Bg.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],e,{pathInPackage:function(){return"world.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11209,end:15203})}(Bg.Morph);Bg.Hand=iE;Bg.Hand=iE;Bg.Hand=iE;var Vqa=Object.freeze({__proto__:null,World:ty,Hand:iE}),Vl=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Vl.comparePosition=OS;Vl.lessPosition=pv;Vl.lessEqPosition=yD;Vl.eqPosition=qv;Vl.minPosition=
zD;Vl.maxPosition=AD;Vl.comparePosition=OS;Vl.comparePosition=OS;Vl.lessPosition=pv;Vl.lessPosition=pv;Vl.lessEqPosition=yD;Vl.lessEqPosition=yD;Vl.eqPosition=qv;Vl.eqPosition=qv;Vl.minPosition=zD;Vl.minPosition=zD;Vl.maxPosition=AD;Vl.maxPosition=AD;var fh=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");fh.lessPosition=pv;fh.lessEqPosition=yD;fh.eqPosition=qv;fh.minPosition=zD;fh.maxPosition=AD;var Xy=Ba("bp",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),
m=e.hasOwnProperty("Range")&&"function"===typeof e.Range?e.Range:e.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{start:{row:0,column:0},end:{row:0,column:0}}:a,l=g.start;a=l.row;l=l.column;var r=g.end;g=r.row;r=r.column;if(g<a||g===a&&r<l)l=$jscomp.makeIterator([a,l,g,r]),g=l.next().value,r=l.next().value,a=l.next().value,
l=l.next().value;this.start={row:a,column:l};this.end={row:g,column:r}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?fh.eqPosition(this.start,a.start)&&fh.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new fh.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||
(a=new fh.Range(a));return fh.lessPosition(this.end,a.start)||fh.lessPosition(a.end,this.start)?this:fh.Range.fromPositions(fh.minPosition(this.start,a.start),fh.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new fh.Range(a));var g=fh.Range.compare(this,a);return 0===g?fh.Range.fromPositions(this.start,this.start):5<=Math.abs(g)?this:0>g?fh.Range.fromPositions(this.start,a.start):fh.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||
(a=new fh.Range(a));var g=fh.Range.compare(this,a),l=0>g?this:a;a=0>g?a:this;switch(Math.abs(g)){case 0:case 1:return new fh.Range(l);case 2:case 3:return new fh.Range(a);case 4:return fh.Range.fromPositions(a.start,l.end);case 5:return fh.Range.at(a.start);case 6:return fh.Range.at(l.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new fh.Range(a));switch(fh.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new fh.Range(this)];case -1:case 0:case 2:case 3:return[fh.Range.at(this.start)];
case 1:case 4:return[fh.Range.fromPositions(a.end,this.end)];case -4:case -3:return[fh.Range.fromPositions(this.start,a.start)];case -2:return[fh.Range.fromPositions(this.start,a.start),fh.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return fh.lessEqPosition(this.start,a)&&fh.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,g=this.end;return"Range("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(fh.Range.compare)}},{key:"compare",value:function(a,g){var l=a.start,r=a.end,v=g.start,y=g.end;return fh.lessPosition(l,v)?fh.lessPosition(r,v)?-6:fh.eqPosition(r,v)?-5:fh.lessPosition(r,y)?-4:fh.eqPosition(r,y)?-3:-2:fh.eqPosition(l,v)?fh.eqPosition(r,y)?0:fh.lessPosition(r,y)?-1:1:-1*fh.Range.compare(g,a)}},{key:"at",value:function(a){return new this({start:a,end:a})}},{key:"fromPositions",value:function(a,g){return new this({start:a,
end:g})}},{key:"create",value:function(a,g,l,r){return new this({start:{row:a,column:g},end:{row:l,column:r}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],e,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));fh.Range=Xy;fh.Range=Xy;fh.Range=Xy;var JN=new fh.Range;fh.defaultRange=JN;fh.defaultRange=JN;fh.defaultRange=JN;var xk=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");xk.lessPosition=pv;xk.Range=Xy;xk.defaultRange=JN;xk.config=Cn;xk.string=ti;xk.arr=eg;xk.signal=dm;var KN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=e.hasOwnProperty("Selection")&&
"function"===typeof e.Selection?e.Selection:e.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.textMorph=a;this.initialize(g)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var g=xk.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+
g);this.endAnchor=this.textMorph.addAnchor("selection-end-"+g);this.range=xk.Range.isValidLiteral(a)?a:xk.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,g){var l=a.start,r=l.row;l=l.column;var v=a.end,y=v.row;v=v.column;var A=g.start,E=A.row;
A=A.column;var F=g.end,H=F.row;F=F.column;return r<E||r===E&&l<A?y<E||y===E&&v<A?"separate":y===E&&v===A?E===H&&A===F?"overlapping":"bordering":"overlapping":r===E&&l===A?y===H&&v===F?"equal":"overlapping":this.compareRangesForMerge(g,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var g=this.compareRangesForMerge(this.range,a.range);if("separate"===g||"bordering"===g)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",
get:function(){return this._range}},{key:"range",set:function(a){if(a){var g=a,l=g.start;g=g.end;if(void 0!==l&&void 0!==g){var r=this.textMorph.document;"number"===typeof l&&(a.start=l=r.indexToPosition(l));"number"===typeof g&&(a.end=g=r.indexToPosition(g));if(xk.Range.isValidLiteral(a)){l=r.clipPositionToLines(l);g=r.clipPositionToLines(g);if(this._isReverse=xk.lessPosition(g,l))g=$jscomp.makeIterator([g,l]),l=g.next().value,g=g.next().value;a.start=l;a.end=g;a.isRange||(a=new xk.Range(a));a.equals(this._range)||
(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),xk.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},
{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=xk.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=xk.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",
get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,g,l,r){var v=this.range,y=this.textMorph,A=this.isReverse();this.range=y.replace(v,a,g,l,r);A&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},
{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.end);
a=Math.min(l,g.positionToIndex(this.start)-a);l=this.isReverse();this.start=g.indexToPosition(a);this._isReverse=l;return this}},{key:"growRight",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.start);a=Math.max(l,g.positionToIndex(this.end)+a);l=this.isReverse();this.end=g.indexToPosition(a);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(a,
g){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===g?!1:g;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",
value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(a,g){return this.goUp(void 0===a?1:a,g,!0)}},{key:"selectDown",value:function(a,g){return this.selectUp(-(void 0===a?1:a),g)}},{key:"goUp",value:function(a,g,l){a=void 0===a?1:a;l=void 0===l?!1:l;if(0===a)return this;var r=this._goalColumn,v=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===g?!1:g,r,v);l||(this.anchor=this.lead);this._goalColumn=
r;this._goalX=v;return this}},{key:"goDown",value:function(a,g){return this.goUp(-(void 0===a?1:a),g)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=
this;this.cursorBlinkStop();var g=xk.config.text.cursorBlinkPeriod;if(g){var l=this.textMorph,r=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){r||(r=l.env.renderer.getNodeForMorph(l));if(r){a._cursorVisible=!a._cursorVisible;var v=r.className.split(" "),y=v.indexOf("hidden-cursor");a._cursorVisible&&-1<y&&(v.splice(y,1),r.className=v.join(" "));a._cursorVisible||-1!==y||(r.className=[].concat($jscomp.arrayFromIterable(v),["hidden-cursor"]).join(" "))}},1E3*g)}}},
{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var g=a.className.split(" "),l=g.indexOf("hidden-cursor");-1<l&&(g.splice(l,1),a.className=g.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,g=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],
e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:224,end:9243})}(void 0);xk.Selection=KN;xk.Selection=KN;xk.Selection=KN;var LN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=e.hasOwnProperty("MultiSelection")&&"function"===typeof e.MultiSelection?
e.MultiSelection:e.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"initialize",value:function(a){this._selections=[new xk.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,g){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var g=this._selections?this._selections.filter(function(l){return!a.includes(l)}):
[];this._selections=a;g.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return xk.arr.last(this.selections)}},{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(g){return g.uninstall()});this.selections=xk.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){xk.arr.without(this.selections,
this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",
get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(g){return g.text=
a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);
return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,g){this.includingLineEnd=g;this.defaultSelection.selectLine(a,g);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",
value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,g){this.defaultSelection.selectUp(a,g);return this}},{key:"selectDown",value:function(a,g){this.defaultSelection.selectDown(a,g);return this}},{key:"goUp",value:function(a,g){return this.defaultSelection.goUp(a,g)}},{key:"goDown",value:function(a,g){return this.defaultSelection.goDown(a,g)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},
{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),g=a.length-1;0<=g;g--)for(var l=a.length-1;0<=l;l--)if(g!==l&&a[l].mergeWith(a[g])){a.splice(g,1);break}this.selections=
a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var g=0;g<a.length;g++){var l=this.selections[g];l?l.range=a[g]:this.addRange(a[g],!1)}this.removeSelections(g);this.mergeSelections()}},{key:"addRange",value:function(a,g){g=void 0===g?!0:g;this.selections.push(new xk.Selection(this.textMorph,a));g&&this.mergeSelections();return xk.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],
e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9252,end:13920})}(xk.Selection);xk.MultiSelection=LN;xk.MultiSelection=LN;xk.MultiSelection=LN;var Jh=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Jh.shallowEquals=PS;Jh.concatAttributePair=mL;Jh.joinTextAttributes=
nL;Jh.splitTextAndAttributesAt=oL;Jh.splitTextAndAttributesAtColumns=pL;Jh.concatTextAndAttributes=qL;Jh.modifyAttributesInRange=rL;Jh.textAndAttributesWithSubRanges=sL;Jh.textAndAttributesDo=function(b,e){for(var m=0;m<b.length;m+=2)e(b[m],b[m+1])};Jh.splitTextAndAttributesIntoLines=wG;Jh.eqPosition=qv;Jh.lessPosition=pv;Jh.shallowEquals=PS;Jh.shallowEquals=PS;Jh.concatAttributePair=mL;Jh.concatAttributePair=mL;Jh.joinTextAttributes=nL;Jh.joinTextAttributes=nL;Jh.splitTextAndAttributesAt=oL;Jh.splitTextAndAttributesAt=
oL;Jh.splitTextAndAttributesAtColumns=pL;Jh.splitTextAndAttributesAtColumns=pL;Jh.concatTextAndAttributes=qL;Jh.concatTextAndAttributes=qL;Jh.modifyAttributesInRange=rL;Jh.modifyAttributesInRange=rL;Jh.textAndAttributesWithSubRanges=sL;Jh.textAndAttributesWithSubRanges=sL;Jh.splitTextAndAttributesIntoLines=wG;Jh.splitTextAndAttributesIntoLines=wG;var se=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");se.arr=eg;se.num=Km;se.string=ti;se.lessEqPosition=yD;se.minPosition=zD;se.maxPosition=
AD;se.lessPosition=pv;se.eqPosition=qv;se.concatTextAndAttributes=qL;se.splitTextAndAttributesAtColumns=pL;se.splitTextAndAttributesIntoLines=wG;se.joinTextAttributes=nL;se.modifyAttributesInRange=rL;se.concatAttributePair=mL;se.splitTextAndAttributesAt=oL;se.objectReplacementChar="\ufffd";se.objectReplacementChar="\ufffd";se.objectReplacementChar="\ufffd";se.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
m=e.hasOwnProperty("TreeNode")&&"function"===typeof e.TreeNode?e.TreeNode:e.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,g=[];a;)g.push(a),a=a.parent;
return g}},{key:"traverse",value:function(a){var g=[a.call(null,this)];if(this.isLeaf)return g;for(var l=0;l<this.children.length;l++)g.push.apply(g,$jscomp.arrayFromIterable(this.children[l].traverse(a)));return g}},{key:"consistencyCheck",value:function(){var a=[],g=this.isRoot,l=this.isLeaf,r=this.children,v=this.size,y=this.stringSize,A=this.height,E=this.width,F=this.options,H=F.maxLeafSize,I=F.maxNodeSize,M=F.minLeafSize;F=F.minNodeSize;g||0!==v||a.push({error:"size of "+this+" expected to be > 0!"});
if(!Array.isArray(r))return a.push({error:this+".children is not an array but "+r}),a;var N=se.arr.sum(se.arr.pluck(r,"size"));N!=v&&a.push({error:"Sum of child sizes is not size of "+this+": "+N+" != "+v});v=se.arr.sum(se.arr.pluck(r,"stringSize"));v!=y&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+v+" != "+y});y=se.arr.sum(se.arr.pluck(r,"height"));Number.parseInt(y)!=Number.parseInt(A)&&a.push({error:"Sum of child Height is not Height of "+this+": "+y+" != "+A});A=r.length?
Math.max.apply(null,se.arr.pluck(r,"width")):0;(r.find(function(X){return X.isLine&&X.hasEstimatedExtent})?Number.parseInt(A)>Number.parseInt(E):Number.parseInt(A)!=Number.parseInt(E))&&a.push({error:"max width of children of "+this+" is not node width: "+A+" != "+E});E=l?H:I;!g&&r.length>E&&a.push({error:"children count of "+this+" expected to be between "+(l?M:F)+" and "+E+" but is "+r.length});for(g=0;g<r.length;g++)(M=r[g])?(l&&!M.isLine?a.push({error:"child "+g+" of leaf "+this+" is not a line!"}):
!l&&M.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==M.parent&&a.push({error:"child.parent is "+M.parent+" but should be "+this})):a.push({error:"child "+g+" of "+this+" is nullish!"});a.push.apply(a,$jscomp.arrayFromIterable(se.arr.flatmap(r,function(X){return X.consistencyCheck()})));return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("InnerTreeNode")&&"function"===typeof e.InnerTreeNode?e.InnerTreeNode:e.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,g,l){this.size+=a;this.height+=g;this.stringSize+=l;for(var r=0,v=0;v<this.children.length;v++){var y=
this.children[v].width;y>r&&(r=y)}this.width=r;this.parent&&this.parent.resize(a,g,l)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),a;for(var g=0;g<this.children.length;g++)this.children[g].lines(a);return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var g=0;g<this.children.length;g++){var l=this.children[g],r=l.size;if(a<r)return l.findRow(a);a-=
r}return null}},{key:"findLineByVerticalOffset",value:function(a,g,l){g=void 0===g?0:g;l=void 0===l?0:l;if(0>a||a>this.height)return null;for(var r=0;r<this.children.length;r++){var v=this.children[r],y=v.height;if(a<=y)return this.isLeaf?{line:v,offset:a,y:g,row:l}:v.findLineByVerticalOffset(a,g,l);a-=y;g+=y;l+=v.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,g){g=void 0===g?0:g;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),g;if(this.isLeaf){for(var l=
0;l<Math.min(a,this.children.length);l++)g+=this.children[l].height;return g}for(l=0;l<this.children.length;l++){var r=this.children[l],v=r.size;if(a<v)return r.computeVerticalOffsetOf(a,g);a-=v;g+=r.height}return g}},{key:"ensureLine",value:function(a){a||(a="");var g="string"===typeof a;return!g&&a.isLine?(a.parent=this,a):new se.Line({parent:this,width:g?0:a.width||0,height:g?0:a.height||0,textAndAttributes:g?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,g){g=
void 0===g?this.size:g;var l=this.children,r=this.options;if(this.isLeaf){var v=[],y=0,A=0;for(r=0;r<a.length;r++){var E=this.ensureLine(a[r]);v.push(E);y+=E.height;A+=E.stringSize;l.splice(g++,0,E)}this.resize(v.length,y,A);this.balanceAfterGrowth();return v}0===l.length&&l.push(new se.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:r}));for(r=0;r<l.length;r++){v=l[r];y=v.size;if(g<=y)return v.insert(a,g);g-=y}g=l[r-1];return g.insert(a,g.size)}},{key:"withParentChainsUpToCommonParentDo",
value:function(a,g,l){for(var r=this.withParents(),v,y=0;a;){if(r.includes(a)){v=a;break}g(a,y++);a=a.parent}g=r.indexOf(v);0>g&&(g=r.length);r=r.slice(0,g);for(g=0;g<r.length;g++)l(r[g],g)}},{key:"findLineWithTextIndex",value:function(a,g){g=void 0===g?0:g;if(this.isLeaf){for(var l=0;l<this.children.length;l++){var r=this.children[l],v=r.stringSize;if(a<v)return{line:r,column:a,row:g};a-=v;g++}a=se.arr.last(this.children);return{line:a,row:g-1,column:a.stringSize-1}}for(r=l=0;r<this.children.length;r++){v=
this.children[r];var y=v.stringSize;if(a<l+y)return v.findLineWithTextIndex(a-l,g);g+=v.size;l+=y}return se.arr.last(this.children).findLineWithTextIndex(a-l)}},{key:"findLeafs",value:function(a,g,l){l=void 0===l?0:l;if(a>l+this.size||g<l)return[];if(this.isLeaf){a=Math.max(0,a-l);var r=this.children.length-1;g=Math.min(r,g-l);l=!1;0===a&&g===r&&(l=!0,g=r);return[{node:this,firstLine:a,lastLine:g,full:l}]}r=[];for(var v=0;v<this.children.length;v++){var y=this.children[v];r.push.apply(r,$jscomp.arrayFromIterable(y.findLeafs(a,
g,l)));l+=y.size}return r}},{key:"removeFromToInRoot",value:function(a,g,l){var r=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>g&&(g=$jscomp.makeIterator([g,a]),a=g.next().value,g=g.next().value);var v=this.size,y=this.options.minLeafSize,A=this.findLeafs(a,g),E=A.shift();g=A.pop();var F=[],H=!1,I=!1;if(!(a>=v)){g&&E.node===g.node&&(g=null);E.full?(l&&l.log("Removing complete first line "+E),A.push(E)):H=E.node.children.length-(E.lastLine-E.firstLine+1)<y;
g&&(g.full?(l&&l.log("Removing complete last line "+g),A.push(g)):(I=g,I=I.node.children.length-(I.lastLine-I.firstLine+1)<y));if(H||I){var M=(M=E.node.children[0].prevLine())?M.parent:null;var N=(N=se.arr.last(g?g.node.children:E.node.children).nextLine())?N.parent:null}for(a=0;a<A.length;a++){y=A[a].node;v=y.children.length;for(var X=0,W=0,ea=0;ea<v;ea++){var Aa=y.children[ea];X+=Aa.height;W+=Aa.stringSize;Aa.parent=null}y.children.length=0;y.resize(-v,-X,-W);if(v=y.parent)y.parent=null,v.children.splice(v.children.indexOf(y),
1),F.includes(v)||F.push(v)}if(!E.full){y=E.firstLine;A=E.node;a=E.lastLine-y+1;y=A.children.splice(y,a);for(W=X=v=0;W<y.length;W++)ea=y[W],v+=ea.height,X+=ea.stringSize,ea.parent=null;A.resize(-a,-v,-X)}if(g&&!g.full){a=g;y=a.firstLine;A=a.node;a=a.lastLine-y+1;y=A.children.splice(y,a);for(W=X=v=0;W<y.length;W++)ea=y[W],v+=ea.height,X+=ea.stringSize,ea.parent=null;A.resize(-a,-v,-X)}l&&l.dump(""+this.print(!1));H&&E.node.balanceByMergeOrTheft(M,!g||g.full?N:g.node,l);g&&I&&g.node.root===this&&(I=
!0,M=E.full||!E.node.parent?M:E.node,H&&(g.node.root!==this&&(I=!1),M&&M.root!==this&&(M=null),N&&N.root!==this&&(N=null)),I&&g.node.balanceByMergeOrTheft(M,N,l));F.forEach(function(Ka){return Ka.root===r&&Ka.balanceAfterShrink(l)})}}},{key:"balanceByMergeOrTheft",value:function(a,g,l){var r=this,v=this.children,y=this.options,A=this.isLeaf,E=A?y.maxLeafSize:y.maxNodeSize;y=A?y.minLeafSize:y.minNodeSize;A=a&&a.children.length+v.length<=E;E=!A&&g&&g.children.length+v.length<=E;var F=A?a:E?g:null;if(F){l&&
l.log("[balanceByMergeOrTheft] merging "+this+" "+(A?"left":"right")+" into "+F);var H=this.size,I=this.width,M=this.height,N=this.stringSize;v.forEach(function(T){return T.parent=F});A?F.children.push.apply(F.children,$jscomp.arrayFromIterable(v)):F.children.unshift.apply(F.children,$jscomp.arrayFromIterable(v));this.width=v.length=0;this.withParentChainsUpToCommonParentDo(F,function(T){I>T.width&&(T.width=I);T.height+=M;T.size+=H;T.stringSize+=N},function(T){if(I===T.width)for(var U=0;U<T.children.length;U++){var pa=
T.children[U];pa.width>T.width&&(T.width=pa.width)}T.height-=M;T.size-=H;T.stringSize-=N})}else{A=a?Math.ceil((a.children.length-y)/2):0;var X=g?Math.ceil((g.children.length-y)/2):0;if((E=0<A&&A>=X)||!E&&0<X){y=E?a.children.splice(a.children.length-A,A):g.children.splice(0,X);var W=E?a:g,ea=E?A:X,Aa=0,Ka=0,K=0,aa=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(E?"left":"right")+" node "+W+" "+ea+" nodes");for(a=0;a<y.length;a++)Aa+=y[a].height,Ka+=y[a].stringSize,K=Math.max(K,y[a].width);
for(a=0;a<W.children.length;a++)aa=Math.max(aa,W.children[a].width);this.withParentChainsUpToCommonParentDo(W,function(T){if(aa<K&&aa<T.width){if(T===W)T.width=aa;else{for(var U=!1,pa=0;pa<T.children.length;pa++)if(T.children[pa].width>aa){U=!0;break}U||(T.width=aa)}T.width=K}T.height-=Aa;T.size-=ea;T.stringSize-=Ka},function(T){T.width<K&&(T.width=K);T.height+=Aa;T.size+=ea;T.stringSize+=Ka});y.forEach(function(T){return T.parent=r});E?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(y)):
this.children.push.apply(this.children,$jscomp.arrayFromIterable(y))}}a=this.parent;0===v.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(l)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,g=this.size,l=this.stringSize,r=this.parent,v=this.children,y=this.width,A=this.height,E=this.options,F=a?E.maxLeafSize:E.maxNodeSize;if(v.length>F){r||(r=this.parent=new se.InnerTreeNode({parent:null,children:[this],size:g,width:y,height:A,stringSize:l,
options:E}),r.isLeaf=!1);var H=Math.floor(v.length/2),I=0,M=0,N=g=0,X=l=0,W=y=0;for(A=0;I<H;I++)M+=v[I].size,N=Math.max(N,v[I].width),X+=v[I].height,W+=v[I].stringSize;for(;I<v.length;I++)g+=v[I].size,l=Math.max(l,v[I].width),y+=v[I].height,A+=v[I].stringSize;this.children=v.slice(0,H);this.size=M;this.width=N;this.height=X;this.stringSize=W;I=r.children.indexOf(this);v=v.slice(H);var ea=new se.InnerTreeNode({parent:r,children:v,size:g,height:y,width:l,stringSize:A,options:E});ea.isLeaf=a;v.forEach(function(Aa){return Aa.parent=
ea});r.children.splice(I+1,0,ea);ea.children.length>F&&ea.balanceAfterGrowth();this.children.length>F&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var g=this,l=this.isLeaf,r=this.parent,v=this.children,y=this.options,A=y.maxLeafSize,E=y.maxNodeSize,F=y.minLeafSize,H=y.minNodeSize;y=l?A:E;F=l?F:H;H=!1;for(var I=v.length;I--;)0===v[I].size&&(v.splice(I,1),H=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+I+" b/c it is empty, remaining children: "+
v.length+" (min: "+F+", max: "+y+")"));H&&a&&a.dump(""+this.root.print(!1));if(v.length>=F)r&&r.balanceAfterShrink(a);else if(0===v.length)r&&r.balanceAfterShrink(a);else if(l)r&&(1===r.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,r.children.length=0,r.children.push.apply(r.children,$jscomp.arrayFromIterable(v)),v.forEach(function(N){return N.parent=r}),r.isLeaf=!0):(A=
(A=v[0].prevLine())&&A.parent,v=se.arr.last(v).nextLine(),this.balanceByMergeOrTheft(A,v&&v.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{l=[];y=H=F=!1;for(I=0;I<v.length;I++){var M=v[I];!F&&M.isLeaf&&(F=!0);H||M.isLeaf||(H=!0);if(F&&H){y=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(M.children))}!y&&l.length<=(F?A:E)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),
v.forEach(function(N){return N.parent=null}),l.forEach(function(N){return N.parent=g}),v.length=0,v.push.apply(v,$jscomp.arrayFromIterable(l)),this.isLeaf=F,a&&a.log("[balanceAfterShrink] "+v.join("\n")),a&&a.dump(""+this.root.print(!1)));r&&r.balanceAfterShrink(a)}}},{key:"print",value:function(a,g,l,r){a=void 0===a?!0:a;g=void 0===g?0:g;l=void 0===l?0:l;var v=this.isLeaf,y=this.size,A=this.stringSize,E=this.width,F=this.height,H=this.children;r=r||(v?"leaf":"node");A=""+" ".repeat(l)+r+" (size: "+
y+" width: "+Math.round(E)+" height: "+Math.round(F)+" text length: "+A+")";if(H.length){E="";g+=y;for(y=H.length;y--;)F=H[y],g-=F.size,E="\n"+F.print(a,g,l+1)+E;A+=E}return A}},{key:"toString",value:function(){var a=this.isLeaf,g=this.size,l=this.width,r=this.height,v=this.children;return"node ("+(a?"leaf, ":"")+(a&&v.length?"rows: "+v[0].row+"-"+se.arr.last(v).row+" ":"")+("size: "+g+" "+l+"x"+r+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4638,end:29081})})(se.TreeNode);var SV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("Line")&&"function"===typeof e.Line?e.Line:e.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.textAndAttributes=se.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},
{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;for(var a="",g=this.textAndAttributes,l=0;l<g.length;l+=2)a+="string"===typeof g[l]?g[l]:se.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],g=this.textAndAttributes,l=0;l<g.length;l+=2){var r=g[l+1];r&&!a.includes(r)&&a.push(r)}return this._textAttributes=
a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var g=0,l=a.length-1;1<=l;l--)for(var r=a[l],v=r.children.indexOf(a[l-1]),y=0;y<v;y++)g+=r.children[y].size;return g}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-
1):null}},{key:"changeExtent",value:function(a,g,l){var r=this.height,v=this.width,y=this.parent;this.width=a;this.height=g;this.hasEstimatedExtent=void 0===l?!1:l;if(v!==a||r!==g)for(g-=r;y;){y.height+=g;if(a>=y.width)y.width=a;else if(v===y.width){for(r=l=0;r<y.children.length;r++){var A=y.children[r].width;A>l&&(l=A)}y.width=l}y=y.parent}return this}},{key:"changeText",value:function(a,g){g=void 0===g?null:g;var l=this.parent,r=this.height,v=a.length+1-(this.text.length+1),y=0;this.modeState&&
this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,y=-r);this._text=a;this._textAttributes=null;this.textAndAttributes=g||(g=[a,null]);if(0!==g.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<g.length;a+=2)if((r=g[a+1])&&Array.isArray(r))throw Error("invalid attr part of text/attr pair, its an array: "+r);for(;l;){l.stringSize+=v;l.height+=y;
for(a=g=0;a<l.children.length;a++)r=l.children[a].width,r>g&&(g=r);l.width=g;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=se.joinTextAttributes(a);for(var g="",l=0;l<a.length;l+=2)g+="string"===typeof a[l]?a[l]:se.objectReplacementChar;return this.changeText(g,a)}},{key:"print",value:function(a,g,l){a=void 0===a?!0:a;g=void 0===g?0:g;g=" ".repeat(void 0===l?0:l)+"line "+g+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+
this.stringSize;l=se.arr.toTuples(this.textAndAttributes,2).map(function(r){var v=$jscomp.makeIterator(r);r=v.next().value;v=v.next().value;return("string"===typeof r?'"'+r+'"':String(r))+(","+JSON.stringify(v))}).join(",");return g+(a?")":" content: ["+l+"])")}},{key:"toString",value:function(){var a=this.width,g=this.height;return'line ("'+se.string.truncate(this._text,30)+'", '+a+"x"+g+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),
a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(se.TreeNode);se.Line=SV;se.Line=SV;se.Line=SV;se.documentFuzzier={makeString:function(b,e){b=void 0===b?5:b;e=void 0===e?50:e;var m=se.arr.range(65,
90).map(function(a){return String.fromCharCode(a)}).join("");m+=m.toLowerCase()+" \n";b=se.num.random(b,e);return se.arr.shuffle(Array.from(m.repeat(Math.ceil(b/m.length)))).slice(0,b).join("")},randomDocPosition:function(b){var e=0===b.rowCount?0:se.num.random(0,b.rowCount-1);b=se.num.random(0,b.getLineString(e).length-1);return{row:e,column:b}},insertRandom:function(b,e,m,a){m=[this.makeString(m,a),null];a=this.randomDocPosition(b);e.push(["insertTextAndAttributes",m,a]);b.insertTextAndAttributes(m,
a)},deleteRandom:function(b,e,m,a){m={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};e.push(["remove",m]);b.remove(m)},maybe:function(){return.5>Math.random()},replay:function(b,e,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;m&&(b.debug=m,m=b.debugHelper(),m.reset());var g=new se.Document([""]);e.forEach(function(l,r){var v=$jscomp.makeIterator(l);l=v.next().value;v=$jscomp.arrayFromIterator(v);if(a&&r==e.length-1)debugger;g[l].apply(g,[].concat($jscomp.arrayFromIterable(v),[m]))});b.changeDocument(g)},
run:function(){var b=Date.now(),e=0,m=new se.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>m.stringSize&&1E4>e++;)this.maybe()?this.deleteRandom(m,a):this.insertRandom(m,a),m.consistencyCheck()}catch(l){var g=l}b=Date.now()-b;return{error:g,doc:m,actions:a,time:b}}};se.newline="\n";se.newlineLength=1;var I9=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("Document")&&"function"===
typeof e.Document?e.Document:e.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.options=Object.assign({},se.defaultOptions,{},g);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},
{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new se.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},
{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var g=a.row;a=a.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>g?g=0:g>=l&&(g=l-1,a=Infinity);0>a?a=0:(l=this.getLineString(g).length,a>l&&(a=l));return{row:g,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},
{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?a.text:""}},{key:"insertLine",value:function(a,g){g=void 0===g?this.root.rowCount:g;return this.insertLines([a],g)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,g,l){this.root.removeFromToInRoot(a,g,l)}},{key:"insertLines",value:function(a,g){a=this.root.insert(a,g);this.fixRoot();return a}},
{key:"textString",get:function(){var a="",g=this.lines;if(!g.length)return a;for(var l=0;l<g.length-1;l++)a=a+g[l].text+se.newline;return a+=g[l].text}},{key:"textString",set:function(a){this.lines=a.split(se.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var g=this.getLine(a);return{row:a,column:g.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var g=se.newline,l=a.length-1,r=a[0].textAndAttributes.slice(),
v=1;v<=l;v++){var y=a[v],A=r.pop()||null,E=r.pop()||"";y=y.textAndAttributes;r.push.apply(r,$jscomp.arrayFromIterable(se.concatAttributePair(E,A,y[0]||"",y[1]||null,g)));for(A=2;A<y.length;A+=2)r.push(y[A],y[A+1])}return r}},{key:"textAndAttributes",set:function(a){this.lines=se.splitTextAndAttributesIntoLines(a,se.newline).map(function(g){return new se.Line({parent:null,width:0,height:0,textAndAttributes:g})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},
{key:"setTextAndAttributesOfLine",value:function(a,g){this.getLine(a).changeTextAndAttributes(g);return g}},{key:"mixinTextAttribute",value:function(a,g){se.modifyAttributesInRange(this,g,function(l,r){l._textAttributes=null;return Object.assign({},r,a)})}},{key:"setTextAttribute",value:function(a,g){se.modifyAttributesInRange(this,g,function(l,r){l._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,g){g=void 0===g?{start:{row:0,column:0},end:this.endPosition}:g;if(a){var l=
Object.keys(a);se.modifyAttributesInRange(this,g,function(r,v){if(!v)return v;r._textAttributes=null;r=0;var y={},A;for(A in v)l.includes(A)||(y[A]=v[A],r++);return 0===r?null:y})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function g(I,M,N,X){X=void 0===X?0:X;var W=0,ea=M.length;if(0>=N.length-X)return{attributes:[M,null],index:X};for(var Aa=[];X<N.length&&!(W>=ea);X+=2){var Ka=N[X],K=Ka.start;Ka=Ka.end;var aa=N[X+1];if(Ka.row<I)W=0;else{K.row===I&&W<K.column&&(Aa.push(M.slice(W,
K.column),null),W=K.column);if(Ka.row>I){Aa.push(aa.embeddedMorph||M.slice(W,ea),aa);W=ea;break}W<Ka.column&&Aa.push(aa.embeddedMorph||M.slice(W,Ka.column),aa);W=Ka.column}}W<ea&&Aa.push(M.slice(W,ea),null);return{attributes:Aa,index:X}}if(!(2>a.length)){var l=a[0].start,r=a.slice(-2)[0].end,v=this.getLine(l.row);if(l.row===r.row){if(!(l.column>=r.column)){var y=g(l.row,v.text,a,0).attributes,A=$jscomp.makeIterator(se.splitTextAndAttributesAtColumns(v.textAndAttributes,[l.column,r.column]));a=A.next().value;
A.next();A=A.next().value;r=$jscomp.makeIterator(se.splitTextAndAttributesAtColumns(y,[l.column,r.column]));r.next();l=r.next().value;r.next();v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(A)))}}else{A=l.row;var E=l.column;l=g(A,v.text,a,0);var F=l.attributes;l=l.index;var H=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,E));y=H.next().value;H.next();E=$jscomp.makeIterator(se.splitTextAndAttributesAt(F,
E));E.next();E=E.next().value;for(v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(y),$jscomp.arrayFromIterable(E)));v=v.nextLine();){A++;if(A===r.row)break;l=g(A,v.text,a,l);y=l.attributes;l=l.index;v.changeTextAndAttributes(y)}v&&(r=r.column,a=g(A,v.text,a,l).attributes,A=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,r)),A.next(),A=A.next().value,r=$jscomp.makeIterator(se.splitTextAndAttributesAt(a,r)).next().value,v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(r),
$jscomp.arrayFromIterable(A))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var g=a.row;a=a.column;a=Math.max(0,a);var l=this.getLine(g);if(!l)return null;g=0;l=l.textAndAttributes;for(var r=0;r<l.length;r+=2){var v=l[r],y=l[r+1];g+="string"===typeof v?v.length:1;if(a<g)return y}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(a){var g=a.start,l=a.end;if(se.eqPosition(g,
l))return["",null];se.lessPosition(l,g)&&(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);g=se.maxPosition(g,{column:0,row:0});l=se.minPosition(l,this.endPosition);var r=this.getLine(g.row),v=r;if(l.row===g.row)return a=g.column,l=l.column,a===l&&l++,a=$jscomp.makeIterator(se.splitTextAndAttributesAtColumns(v.textAndAttributes,[a,l])),a.next(),a.next().value;a=[r];for(var y=0;y<l.row-g.row;y++)a.push(r=r.nextLine());r=a[a.length-1];g=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,
g.column));g.next();g=g.next().value;l=$jscomp.makeIterator(se.splitTextAndAttributesAt(r.textAndAttributes,l.column)).next().value;0===g.length&&(g=["",null]);if(1===a.length)return se.concatTextAndAttributes(g,l,!0);for(v=1;v<a.length-1;v++)"string"===typeof g[g.length-2]&&(g[g.length-2]+=se.newline),se.concatTextAndAttributes(g,a[v].textAndAttributes,!0);"string"===typeof g[g.length-2]&&(g[g.length-2]+=se.newline);se.concatTextAndAttributes(g,l,!0);return se.joinTextAttributes(g,"")}},{key:"textInRange",
value:function(a){var g=a.start,l=a.end;g=this.clipPositionToLines(g);l=this.clipPositionToLines(l);se.lessPosition(l,g)&&(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);a=g;g=a.row;a=a.column;var r=l;l=r.row;r=r.column;if(g===l)return a===r?"":this.getLineString(g).slice(a,r);var v=this.getLine(g);for(a=v.text.slice(a);(v=v.nextLine())&&++g<l;)a+=se.newline+v.text;return a+se.newline+this.getLineString(l).slice(0,r)}},{key:"setTextInRange",value:function(a,g){this.remove(g);return this.insertText(a,
g.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var g=a.column,l=this.getLine(a.row);g=Math.max(0,Math.min(g,l.stringSize-1));for(a=l.parent;a;){l=a.children.indexOf(l);l=a.children.slice(0,l);for(var r=0;r<l.length;r++)g+=l[r].stringSize;l=a;a=a.parent}return g}},{key:"insertTextAndAttributes",value:function(a,g,l){l=void 0===l?!1:l;if(!a||!a.length||2===a.length&&
!a[0])return{start:g,end:g};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var r=g.row;g=g.column;0>r&&(r=0);0>g&&(g=0);var v=this.getLine(r);a=se.splitTextAndAttributesIntoLines(a,se.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!v)return r=this.insertLines(a.map(function(X){return new se.Line({parent:null,width:0,height:0,textAndAttributes:X})})),l&&l.log("insert "+r.length+" lines into empty text"),{start:{row:0,column:0},end:{row:r.length,
column:se.arr.last(r).text.length}};if(r>=this.rowCount){var y=this.endPosition;l&&l.log("insertion after doc end, "+r+"/"+g+", inserting "+(r-y.row)+" rows");for(g=0;g<r-y.row;g++)a.unshift(["",null]);r=y.row;g=y.column}if(1===a.length&&""===a[0][0])return l&&l.log("insert just newline at "+r+"/"+g),r=this.splitLineAt({row:r,column:g}),l&&l.dump(""+this.root.print(!1)),r;var A=a.shift(),E=a.length;y={row:r,column:g};var F=v.stringSize-1;g>F&&(l&&l.log("filling up insertion column at "+r+"/"+g+": "+
(g-F)),F=" ".repeat(g-F),A.length?"string"===typeof A[0]?A[0]=F+A[0]:A.unshift(F,null):A.push(F,null));F=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,g));var H=F.next().value;F=F.next().value;""===H[0]&&(H=[]);H=se.concatTextAndAttributes(H,A,!0);if(0===E){for(var I=0,M=0;M<A.length;M+=2){var N=A[M];I+="string"===typeof N?N.length:1}y.column=g+I;se.concatTextAndAttributes(H,F,!0)}v.changeTextAndAttributes(H);if(0===E)return l&&(l.log("single line inserted at "+r+"/"+g),l&&
l.dump(""+this.root.print(!1))),{start:{row:r,column:g},end:y};v=a[E-1];for(H=A=0;H<v.length;H+=2)I=v[H],A+="string"===typeof I?I.length:1;y.row+=E;y.column=A;a=this.insertLines(a.map(function(X){return new se.Line({parent:null,width:0,height:0,textAndAttributes:X})}),r+1);E=se.arr.last(a);E.changeTextAndAttributes(se.concatTextAndAttributes(E.textAndAttributes,F,!0));l&&(l.log(a.length+" inserted at "+r+"/"+g),l&&l.dump(""+this.root.print(!1)));return{start:{row:r,column:g},end:y}}},{key:"insertText",
value:function(a,g,l){l=void 0===l?!1:l;if(!a)return{start:g,end:g};var r=g.row;g=g.column;0>r&&(r=0);0>g&&(g=0);var v=this.getLine(r);if(!v)return r=this.insertLines(a.split(se.newline)),{start:{row:0,column:0},end:{row:r.length,column:se.arr.last(r).text.length}};r>=this.rowCount&&(g=this.endPosition,a="\n".repeat(r-g.row)+a,r=g.row,g=g.column);var y=a.split(se.newline),A=y.shift(),E=y.length;a={row:r,column:g};var F=v.stringSize-1;g>F&&(A=" ".repeat(g-F)+A);F=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,
g));var H=F.next().value;F=F.next().value;""===H[0]&&(H=[]);l=se.concatTextAndAttributes(H,[A,l&&H.length?H[H.length-1]:null],!0);0===E&&(a.column=g+A.length,se.concatTextAndAttributes(l,F,!0));v.changeTextAndAttributes(l);if(0===E)return{start:{row:r,column:g},end:a};a.row+=E;a.column=y[E-1].length;l=this.insertLines(y,r+1);l=se.arr.last(l);l.changeTextAndAttributes(se.concatTextAndAttributes(l.textAndAttributes,F,!0));return{start:{row:r,column:g},end:a}}},{key:"remove",value:function(a,g){g=void 0===
g?!1:g;if(0!==this.rowCount){var l=a.start,r=a.end;if(l.row!==r.row||l.column!==r.column){se.lessPosition(r,l)&&(r=$jscomp.makeIterator([r,l]),l=r.next().value,r=r.next().value);var v=this.endPosition;if(!se.lessEqPosition(v,l)){var y=se.maxPosition(l,{column:0,row:0});l=y.row;y=y.column;v=se.minPosition(r,v);r=v.row;var A=v.column;0>y&&(y=0);0>A&&(A=0);g&&!g.debugDocumentUpdate&&(g=!1);g&&(g.log||(g={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),
g.group("document.remove "+JSON.stringify(a)),g.log("[text doc] removing "+l+"/"+y+" => "+r+"/"+A));var E=this.getLine(l);a=E;v=[E];for(var F=0;F<r-l;F++)v.push(E=E.nextLine());E=v[v.length-1];y=$jscomp.makeIterator(se.splitTextAndAttributesAt(a.textAndAttributes,y)).next().value;A=$jscomp.makeIterator(se.splitTextAndAttributesAt(E.textAndAttributes,A));A.next();A=A.next().value;a.changeTextAndAttributes(se.concatTextAndAttributes(y,A,!0));g&&g.log('[text doc removal] what remains of start/end line: "'+
a.textAndAttributes+'"');1<v.length&&this.removeLines(l+1,r,g);g&&g.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var g=a.row;a=a.column;var l=this.getLine(g),r=$jscomp.makeIterator(se.splitTextAndAttributesAt(l.textAndAttributes,a)),v=r.next().value;r=r.next().value;l.changeTextAndAttributes(v);l=new se.Line({parent:null,width:0,height:0,textAndAttributes:r});this.insertLines([l],g+1);return{start:{row:g,column:a},end:{row:g+1,column:0}}}},{key:"replace",value:function(a,
g,l){var r=a.start;a=a.end;if(!g.length)return this.remove({start:r,end:a},l),{removed:{start:r,end:a},inserted:{start:r,end:r}};var v=this.clipPositionToLines(r),y=this.clipPositionToLines(a);v.row===y.row&&this.remove({start:v,end:y},l);if(v.row===y.row||se.lessEqPosition(this.endPosition,r)){var A;"string"===typeof g?g.length&&(A=g.length&&this.insertText(g,r)):g.length&&(2!==g.length||g[0])&&(A=this.insertTextAndAttributes(g,r,l));A||(A={start:v,end:v});return{removed:{start:r,end:a},inserted:A}}r=
v;a=y;l=r;A=l.row;y=l.column;v=a.row;if("string"===typeof g){l=[];g=g.split(se.newline);for(var E=0;E<g.length;E++)l.push([g[E],null])}else l=se.splitTextAndAttributesIntoLines(g,se.newline);var F=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);F&&(l=[]);var H=g=this.getLine(A);E=this.getLine(v);y=$jscomp.makeIterator(se.splitTextAndAttributesAt(H.textAndAttributes,y));var I=y.next().value;y.next();for(H.changeTextAndAttributes(F?I:se.concatTextAndAttributes(I,l.shift(),!0));l.length;){g=
g.nextLine();A++;if(g===E)break;g.changeTextAndAttributes(l.shift())}if(!l.length)return l=g.stringSize-1,this.remove({start:{row:A,column:g.stringSize},end:a}),{removed:{start:r,end:a},inserted:{start:r,end:{row:A,column:l}}};console.assert(A==v,"not end row");console.assert(g.row==A,"row != last line.row");this.remove({start:{row:A,column:0},end:a});v=[];g=l.length;for(y=0;y<g-1;y++)E=l[y],E.length||(E=["",null]),"string"===typeof E[E.length-2]?E[E.length-2]+=se.newline:E.push(se.newline,null),
v.push.apply(v,$jscomp.arrayFromIterable(E));v.push.apply(v,$jscomp.arrayFromIterable(l[g-1]));l=this.insertTextAndAttributes(v,{row:A,column:0}).end;return{removed:{start:r,end:a},inserted:{start:r,end:l}}}},{key:"wordsOfLine",value:function(a){for(var g=this.getLineString(a),l=[],r,v=0;v<g.length;v++)/[^a-z0-9_]/i.test(g[v])?r&&(r.range.end.column=v,l.push(r),r=null):(r=r||{index:l.length,string:"",range:{start:{row:a,column:v},end:{row:a,column:v}}},r.string+=g[v]);r&&(r.range.end.column=v,l.push(r));
return l}},{key:"wordAt",value:function(a,g){var l=a.row,r=a.column;g=void 0===g?this.wordsOfLine(l):g;return g.find(function(v){v=v.range;var y=v.end.column;return v.start.column<=r&&r<=y})||{range:{start:{column:r,row:l},end:{column:r,row:l}},string:""}}},{key:"wordLeft",value:function(a){var g=a.row,l=a.column,r=this.wordsOfLine(g);if(!r.length||se.lessEqPosition(a,r[0].range.start)){for(;0<=--g;)if(r=this.wordsOfLine(g),r.length)return se.arr.last(r);return{range:{start:a,end:a},string:""}}g=
this.wordAt(a);return g.string?se.eqPosition(g.range.start,a)?r[g.index-1]:g:r.slice().reverse().find(function(v){return v.range.end.column<=l})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var g=a.column,l=a.row,r=this.wordsOfLine(a.row);if(!r.length||se.lessEqPosition(se.arr.last(r).range.end,a)){for(;++l<this.lines.length;)if(r=this.wordsOfLine(l),r.length)return r[0];return{range:{start:a,end:a},string:""}}l=this.wordAt(a);return l.string?se.eqPosition(l.range.end,a)?
r[l.index+1]:l:r.find(function(v){return v.range.start.column>=g})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,g){var l=a.row,r=a.column;a=this.getLine(l);for(var v=a.text;r<a.stringSize-1;r++){var y=g(v[r],{row:l,column:r});if(y)return y}for(;a=a.nextLine();)for(l++,v=a.text,r=0;r<a.stringSize-1;r++)if(y=g(v[r],{row:l,column:r}))return y;return null}},{key:"scanBackward",value:function(a,g){var l=a.row,r=a.column;a=this.getLine(l);var v=a.text;for(--r;0<=r;r--){var y=
g(v[r],{row:l,column:r});if(y)return y}for(;a=a.prevLine();)for(l--,v=a.text,r=a.stringSize-2;0<=r;r--)if(y=g(v[r],{row:l,column:r}))return y;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],g=this.rowCount,l=this.stringSize,r=this.lines,v=this.textString,y=this.root;g!==r.length&&a.push({error:"document "+this+" row count: "+
g+" !== "+r.length});v.length!==l&&a.push({error:"document "+this+" textString.length vs stringSize: "+v.length+" !== "+l});a.push.apply(a,$jscomp.arrayFromIterable(y.consistencyCheck()));g=0;for(l=r[0];l;)l!=r[g]&&a.push({error:"line iteration at "+g+" is broken: nextLine() of "+r[g-1]+" is not "+r[g]+"!"}),g++,l=l.nextLine();r[g]&&a.push({error:"nextLine() of\n  "+r[g-1]+"\nis nullish but \n  "+r[g]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+
" error"+(1<a.length?"s":"")+":\n"+a.map(function(A){return A.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),g=(System.get(a)||{}).printTree;return g?g(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),
"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return se.documentFuzzier.run()}},{key:"newline",get:function(){return se.newline}},{key:"fromString",value:function(a,g){return new this(a.split(se.newline),g)}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),Wqa=I9=se.Document;se.default=I9;var Cr=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");Cr.lessPosition=pv;Cr.lessEqPosition=yD;Cr.eqPosition=qv;var jE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),m=e.hasOwnProperty("Anchor")&&"function"===typeof e.Anchor?e.Anchor:e.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){g=void 0===g?{column:0,row:0}:g;this.id=a||""+(this.constructor._id=(this.constructor._id||0)+1);this.position=g;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(Cr.lessEqPosition(this.position,a.start))return!1;if(Cr.lessEqPosition(a.start,this.position)&&Cr.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var g=
this.position,l=g.column,r=a.start,v=r.column,y=a.end;a=y.row;y=y.column;this.position={column:a!==this.position.row?l:v===y?l-(y-v):v+(l-y),row:g.row-(a-r.row)};return!0}},{key:"onInsert",value:function(a){if(Cr.lessPosition(this.position,a.start)||Cr.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var g=this.position,l=a.start,r=l.row;l=l.column;a=a.end;var v=a.column;this.position={column:g.column+(r!==this.position.row?0:v-l),row:g.row+(a.row-r)};return!0}},{key:"equalsPosition",
value:function(a){return a?a.isAnchor?Cr.eqPosition(this.position,a.position):Cr.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;return"Anchor("+this.id+" "+a.row+"/"+a.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],e,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82,end:3025})}(void 0);Cr.Anchor=jE;Cr.Anchor=jE;Cr.Anchor=jE;var Xqa=Object.freeze({__proto__:null,Anchor:jE}),xg=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");xg.pt=Ii;xg.Color=Hg;xg.connect=Zk;xg.once=fr;xg.disconnect=Dp;xg.Path=$h;xg.morph=qa;xg.GridLayout=Wy;xg.config=Cn;xg.Morph=Jl;xg.lessPosition=pv;xg.minPosition=zD;xg.maxPosition=AD;xg.Icon=Op;var MN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=e.hasOwnProperty("TextSearcher")&&
"function"===typeof e.TextSearcher?e.TextSearcher:e.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,g){var l=this.doc.positionToIndex(a);l=this.doc.indexToPosition(l+g.length);return{range:{start:a,end:l},match:g}}},
{key:"stringSearch",value:function(a,g,l,r,v,y,A){if(v&&(xg.lessPosition(A,v.start)||xg.lessPosition(v.end,A)))return this.STOP;l||(y=y.toLowerCase());if(y!==g[0])return null;v=A.row;A=A.column;y=a[v];a=1>=r?"":"\n"+a.slice(v+1,v+1+(r-1)).join("\n");a=y.slice(A)+a;return 0!==(l?a:a.toLowerCase()).indexOf(g)?null:this.processFind({row:v,column:A},a.slice(0,g.length))}},{key:"reSearch",value:function(a,g,l,r,v,y){if(r&&(xg.lessPosition(y,r.start)||xg.lessPosition(r.end,y)))return this.STOP;r=y.row;
y=y.column;return(a=(a[r].slice(y)+(l?"\n"+a.slice(r+1).join("\n"):"")).match(g))?this.processFind({row:r,column:y},a[0]):null}},{key:"search",value:function(a){var g=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=g.start;var l=g.needle,r=g.backwards,v=g.caseSensitive;g=g.inRange;if(!l)return null;g&&(a=r?xg.minPosition(g.end,a):xg.maxPosition(g.start,a));if(l instanceof RegExp){var y=(l.flags||"").split(""),A=!!l.multiline;y.splice(y.indexOf("m"),
1);v||y.includes("i")||y.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),y.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,l,A,g)}else l=String(l),v||(l=l.toLowerCase()),y=l.split(this.doc.constructor.newline).length,l=this.stringSearch.bind(this,this.doc.lineStrings,l,v,y,g);a=this.doc[r?"scanBackward":"scanForward"](a,l);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var g=[],l=0;;){if(1E4<l++)throw Error("endless loop");var r=this.search(a);if(!r)return g;
g.push(r);a=Object.assign({},a,{start:a.backwards?r.range.start:r.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);xg.TextSearcher=MN;xg.TextSearcher=MN;xg.TextSearcher=
MN;var TV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=e.hasOwnProperty("SearchWidget")&&"function"===typeof e.SearchWidget?e.SearchWidget:e.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");
cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var r=this.getSubmorphNamed("searchInput"),v=this.getSubmorphNamed("prevButton"),y=this.getSubmorphNamed("nextButton"),A=this.getSubmorphNamed("cancelButton"),E=this.getSubmorphNamed("acceptButton");xg.connect(E,"fire",this,"execCommand",{converter:function(){return"accept search"}});
xg.connect(A,"fire",this,"execCommand",{converter:function(){return"cancel search"}});xg.connect(y,"fire",this,"execCommand",{converter:function(){return"search next"}});xg.connect(v,"fire",this,"execCommand",{converter:function(){return"search prev"}});xg.connect(r,"inputChanged",this,"search");xg.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});xg.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,
before:null,position:null,inProgress:null,last:null};r.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){g.target.execCommand("realign top-bottom-center");g.addSearchMarkersForPreview(g.state.inProgress&&g.state.inProgress.found,!1);return F.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,!0)})}},
{key:"onBlur",value:function(a){var g=this,l=this.world();l&&setTimeout(function(){var r=l.focusedMorph;g.withAllSubmorphsDetect(function(v){return v.isFocused()})?g.get("searchInput")!=r&&g.get("replaceInput")!=r&&g.get("searchInput").focus():g.cancelSearch()})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();
this.removeTextMap();if(this.state.before){var a=this.state.before,g=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=g;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=
null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var g=this.target,l=g.selection,r=!!g.activeMark||!l.isEmpty(),v=a.found.range,y=v.start;v=v.end;y=a.backwards?y:v;r?l.lead=y:g.cursorPosition=y;g.isLineFullyVisible(y.row)||g.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(g){g=g.id;return g.startsWith("search-highlight")&&a.target.removeMarker(g)})}},{key:"addSearchMarkers",
value:function(a,g,l){l=void 0===l?!1:l;this.removeSearchMarkers();g=this.target;var r=this.textMap,v=g.whatsVisible,y=v.startRow;v=v.endRow;var A=g.document.lineStrings,E=0,F=xg.config.codeEditor.search,H=F.maxCharsPerLine;F=F.fastHighlightLineCount;r&&3<=a.match.length&&A.length<F&&(y=0,v=A.length-1);F=!1;for(var I=window.performance.now();y<=v&&!F;y++)for(var M=A[y]||"",N=0;N<Math.min(M.length,H);N++){if(300<window.performance.now()-I){F=!0;break}if(l?0===M.slice(N).indexOf(a.match):0===M.slice(N).toLowerCase().indexOf(a.match.toLowerCase()))g.addMarker({id:"search-highlight-"+
E++,range:{start:{row:y,column:N},end:{row:y,column:N+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),N+=a.match.length}this.state.backwards?(l=a.range.start,a=l.row,l=l.column,a={start:{row:a,column:l},end:{row:a,column:l+1}}):(l=a.range.end,a=l.row,l=l.column,a={start:{row:a,column:l-1},end:{row:a,column:l}});l={};g.addMarker({id:"search-highlight-cursor",range:a,style:(l["pointer-events"]=
"none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});r&&r.update()}},{key:"addSearchMarkersForPreview",value:function(a,g){g=void 0===g?!0:g;a&&(this.addSearchMarkers(a),g&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,g=this.state,l=a.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())xg.once(a.getWindow(),
"remove",this,"remove");l=this.get("searchInput");var r=a.scroll;a=a.selection;g.position=a.lead;g.before={scroll:r,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};g.last&&g.last.found&&(xg.disconnect(l,"inputChanged",this,"search"),this.input=g.last.needle,xg.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(g.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(a){var g=this.state.inProgress;if(g&&g.found){var l=g.found.range;g=l.start;
l=l.end;this.state.position=a!==this.state.backwards?a?l:g:a?g:l}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,g=a.backwards,l={backwards:g,start:a.position};a=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:a});this.applySearchResult(l);
a?this.addSearchMarkers(a,g):this.cleanup();return l}},{key:"showTextMap",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),2);g=a.textMap=xg.morph({type:"textmap"});g.attachTo(a.target);g.isLayoutable=!1;a.addMorph(g);g.topRight=a.innerBounds().bottomRight().addXY(0,5);g.height=a.target.height-a.height-15;g.update();a.renderOnGPU=!0;return l.return(g)})}},{key:"removeTextMap",
value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"accept search or replace and go to next"},{keys:"Tab",command:"change focus"},{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape|Ctrl-G",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",
mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(System.import("lively.morphic/text/occur.js"),2);g=r.yieldResult;l=g.occurStartCommand;a.target.addCommands([l]);a.execCommand("accept search");return r.return(a.target.execCommand("occur",{needle:a.input}))})}},{name:"accept search",
exec:function(){a.acceptSearch();return!0}},{name:"cancel search",exec:function(){a.cancelSearch();return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"accept search or replace and go to next",exec:function(g,l,r){return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"accept search",l,r)}},{name:"replace current search location with replace input",exec:function(){var g=xg.Path("state.inProgress").get(a);
if(g.found){var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();g.needle instanceof RegExp&&(l=g.found.match.replace(g.needle,l));a.target.replace(g.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var g=xg.Path("state.inProgress").get(a);if(g.found){g=Object.assign({},
g,{start:{row:0,column:0}});var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var r=(new xg.TextSearcher(a.target)).searchForAll(g);a.target.undoManager.group();r.forEach(function(v){var y=v.range;v=v.match;g.needle instanceof RegExp&&(l=v.replace(g.needle,l));a.target.replace(y,l,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();
return!0}},{name:"yank next word from text",exec:function(){var g=a.target,l=g.wordRight(),r=a.get("searchInput");r.selection.isEmpty()||(r.selection.text="");g=g.textInRange({start:g.cursorPosition,end:l.range.end});r.textString+=g;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:xg.Color.gray},borderRadius:{defaultValue:3},
fill:{defaultValue:xg.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=this.get("searchInput").textString,g=a.match(/^\/(.*)\/([a-z]*)$/);return g?new RegExp(g[1],g[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=
a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=new xg.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},
2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[xg.morph({type:"button",name:"acceptButton",label:xg.Icon.textAttribute("check-circle")}).fit(),xg.morph({type:"button",name:"cancelButton",label:xg.Icon.textAttribute("times-circle")}).fit(),
xg.morph({type:"button",name:"nextButton",label:xg.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),xg.morph({type:"button",name:"prevButton",label:xg.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),xg.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),xg.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),xg.morph({type:"button",
styleClasses:["replace"],name:"replaceButton",label:"replace"}),xg.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];xg.connect(this.get("searchInput"),"onBlur",this,"onBlur");xg.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21256})}(xg.Morph);xg.SearchWidget=TV;xg.SearchWidget=TV;xg.SearchWidget=TV;var NN=[{name:"search in text",exec:function(b,e){e=void 0===e?{backwards:!1}:e;b=b._searchWidget||(b._searchWidget=new xg.SearchWidget({target:b,extent:xg.pt(300,20)}));b.state.backwards=e.backwards;b.prepareForNewSearch();xg.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];xg.searchCommands=NN;xg.searchCommands=NN;xg.searchCommands=
NN;var Am=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");Am.todo=function(b){throw Error("not yet implemented "+b);};Am.Rectangle=Le;Am.rect=Cl;Am.pt=Ii;Am.arr=eg;Am.Range=Xy;var J9=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),m=e.hasOwnProperty("TextLayout")&&"function"===typeof e.TextLayout?e.TextLayout:e.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,g){var l=function(y){var A=0;return Am.arr.flatten(Am.arr.histogram(y,y.length/3).map(function(E){var F=$jscomp.makeIterator(E);E=F.next().value;var H=F.next().value;F=F.next().value;for(var I=[],M=0;M<E;M++)I.push(Am.rect(A,0,H,F)),A+=H;return I}))};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){var v=
$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;v=l(v);this.lineCharBoundsCache.set(g.document.getLine(r),v)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,g){var l=a.document;a._isDeserializing&&a._initializedByCachedBounds||
l&&this.resetLineCharBoundsCacheOfLine(l.getLine(g))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,g){for(var l=g.start.row;l<=g.end.row;l++)this.resetLineCharBoundsCacheOfRow(a,l)}},{key:"estimateLineHeightsInRange",value:function(a,g){for(var l=a.document,r=a.getGlobalTransform(),v=g.start.row;v<=g.end.row;v++)this.resetLineCharBoundsCacheOfRow(a,l.getLine(v),r)}},{key:"estimateExtentOfLine",value:function(a,g,l){l=void 0===l?a.getGlobalTransform():l;var r=a.fontMetric,v=a.lineWrapping,
y=a.padding,A=a.textRenderer,E=a.debug,F=a.defaultTextStyle,H=a.getProperty("extent").x,I=y.left(),M=y.right(),N=y.top();y=y.bottom();A=A.directRenderTextLayerFn(a);var X=g.textAndAttributes,W=[],ea;H=H-I-M;if(X&&X.length)for(var Aa=0,Ka=0;Aa<X.length;Aa+=2)(ea=X[Aa])&&ea.isMorph?(ea.position=this.pixelPositionFor(a,{row:g.row,column:Ka}).subPt(a.origin),Ka++):ea&&(Ka+=ea.length),W.push(Object.assign({},F,{},X[Aa+1]));else W.push(F);X=W.length;for(Aa=F=ea=0;Aa<X;Aa++){Ka=r.defaultCharExtent(a,{defaultTextStyle:W[Aa],
width:1E3,transform:l,paddingBottom:y,paddingTop:N,paddingRight:M,paddingLeft:I},A);var K=Ka.width;F=Math.max(Ka.height,F);ea+=K}a=F;l=g.text.length||1;r=Math.round(ea/X);I=l*r;I=v?Math.min(I,H):I;v&&(a=Math.round((Math.ceil(l/Math.max(3,H/r))||1)*F));E&&console.log(g.row+": "+g.height+" => "+a);g.changeExtent(I,a,!0)}},{key:"estimateLineHeights",value:function(a,g){var l=a.fontMetric,r=a.textRenderer,v=a.document,y=a.defaultTextStyle,A=a.clipMode,E=a.textAlign,F=a.padding,H=a.lineWrapping,I=a.debug,
M=a.getProperty("extent"),N=M.x,X=M.y;M=a.getGlobalTransform();var W=F.left(),ea=F.right(),Aa=F.top();F=F.bottom();v=v.lines;var Ka=r.directRenderTextLayerFn(a);I&&(I=a.debugHelper(I),I.debugTextLayout||(I=!1));if(!I&&10>a.lineCount()&&3E3>a.document.stringSize&&!Am.arr.any(a.textAndAttributes,function(K){return K&&void 0!=K.fontFamily}))for(g=r.directRenderLineFn(a),g=l.manuallyComputeBoundsOfLines(a,v,0,0,{defaultTextStyle:y,width:N,height:X,clipMode:A,lineWrapping:H,textAlign:E,transform:M,paddingLeft:W,
paddingRight:ea,paddingTop:Aa,paddingBottom:F},Ka,g),y=0;y<v.length;y++)I=g[y],v[y].changeExtent(I.width,I.height,!l.isFontSupported(a.fontFamily,a.fontWeight));else{for(y=l=0;y<v.length;y++)A=v[y],!g&&0<A.height||(l++,this.estimateExtentOfLine(a,A,M));a.viewState._textLayoutStale=!1;I&&I.log("estimateLineHeights, "+l+"/"+v.length+" updated, force: "+g)}}},{key:"defaultCharExtent",value:function(a){var g=a.textRenderer,l=a.fontMetric,r=a.defaultTextStyle,v=a.getGlobalTransform();g=g.directRenderTextLayerFn(a);
return l.defaultCharExtent(a,{transform:v,defaultTextStyle:r,width:1E3},g)}},{key:"textBounds",value:function(a){var g=a.document,l=a.padding,r=a.borderWidthLeft,v=a.borderWidthRight,y=a.borderWidthTop;a=a.borderWidthBottom;return new Am.Rectangle(l.left(),l.top(),Math.round(g.width+r+v),Math.round(g.height+y+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",
value:function(a,g){return g>=a.viewState.firstVisibleRow&&g<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,g){return g>=a.viewState.firstFullyVisibleRow&&g<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var g=a.viewState.firstVisibleRow,l=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(g,l),startRow:g,endRow:l}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},
{key:"screenLineRange",value:function(a,g,l){var r=g.row,v=g.column;v=Math.max(0,v);r=Math.min(a.lineCount()-1,Math.max(0,r));var y=this.charBoundsOfRow(a,r);v>y.length-1&&(v=y.length-1);for(var A=y[v],E=g=v,F=v+1;F<y.length&&!(y[F].y>A.y+A.height);F++)E=F;E===y.length-1&&E++;for(F=v-1;0<=F&&!(y[F].y<A.y+A.height);F--)g=F;l&&(a=a.getLine(r).slice(g,E).match(/^\s*/)[0].length,g+=a);return new Am.Range({start:{row:r,column:g},end:{row:r,column:E}})}},{key:"rangesOfWrappedLine",value:function(a,g){for(var l=
a.getLine(g).length,r=0,v=[];;){var y=this.screenLineRange(a,{row:g,column:r},!1);v.push(y);if(y.end.column>=l)break;var A=y.end.column+1;if(A>=l)break;if(A<=r){if(!a.env.renderer.getNodeForMorph(a))break;throw Error("should not happen "+y.end.column+" vs "+r);}r=A}return v}},{key:"chunkAtPos",value:function(a,g){Am.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,g){g=a.document.getLine(g);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=
!0);var l=this.lineCharBoundsCache.get(g);if(l)return l;var r=a.getProperty("extent");l=r.x;r=r.y;var v=a.fontMetric,y=a.textRenderer,A=a.defaultTextStyle,E=a.clipMode,F=a.textAlign,H=a.padding,I=a.lineWrapping,M=a.getGlobalTransform(),N=H.left(),X=H.right(),W=H.top();H=H.bottom();var ea=y.directRenderLineFn(a);y=y.directRenderTextLayerFn(a);a=v.manuallyComputeCharBoundsOfLine(a,g,0,0,{defaultTextStyle:A,width:l,height:r,clipMode:E,lineWrapping:I,textAlign:F,paddingLeft:N,paddingRight:X,paddingTop:W,
paddingBottom:H,transform:M},y,ea);if(a.find(function(Aa){return void 0==Aa.width&&void 0==Aa.height}))return a;this.lineCharBoundsCache.set(g,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,g){var l=g.start,r=g.end,v=a.textLayout,y=v.rangesOfWrappedLine(a,l.row).find(function(A){return A.containsPosition(l)});r=a.lineWrapping&&y?y.intersect(g).end:r;r=r.row==l.row?r:{row:r.row,column:-1};g=v.charBoundsOfRow(a,l.row);g=0>r.column?g.slice(l.column):g.slice(l.column,r.column+
1);r=l.column+(g?g.indexOf(Am.arr.max(g,function(A){return A.height})):0);return v.boundsFor(a,{row:l.row,column:r})}},{key:"boundsFor",value:function(a,g){var l=g.row;g=g.column;g=Math.max(0,g);l=Math.min(a.lineCount()-1,Math.max(0,l));var r=this.charBoundsOfRow(a,l);if(0<r.length)if(g>=r.length){var v=r[r.length-1];v=new Am.Rectangle(v.x+v.width,v.y,0,v.height)}else v=Am.Rectangle.fromLiteral(r[g]);v||(console.warn("Cannot compute bounds for line "+l+"/"+g),v=new Am.Rectangle(0,0,0,0));g=a.document;
a=a.padding;v.x+=a.left();v.y=v.y+g.computeVerticalOffsetOf(l)+a.top();return v}},{key:"pixelPositionFor",value:function(a,g){return this.boundsFor(a,g).topLeft()}},{key:"textPositionFromPoint",value:function(a,g){var l=g.addPt(a.origin),r=l.x,v=l.y,y=a.document;l=a.padding;var A=l.left(),E=l.top();if(v>y.height+E)return y.endPosition;if(v<E)return{row:0,column:0};l=y.findLineByVerticalOffset(v-E);if(!l)return{row:0,column:0};var F=l.line.row;a=this.charBoundsOfRow(a,F);var H=a.length,I=a[0],M=a[H-
1];l={row:F,column:0};r-=A;v-=E+y.computeVerticalOffsetOf(F);if(0===H||r<=I.x+Math.round(I.width/2)&&v>=I.y&&v<=I.y+I.height)return l;if(r>M.x+Math.round(M.width/2)&&v>=M.y&&v<=M.y+M.height)return l.column=H,l;A=[];for(y=H-1;0<=y;y--)if(M=E=a[y],F=M.x,H=M.width,I=M.y,M=M.height,!(v<I||v>I+M)&&(A.push(E),r>=F+Math.round(H/2)))return l.column=1===A.length?y:y+1,l;if(A.length)return l.column=a.indexOf(Am.arr.last(A)),l;r=Infinity;v=-1;for(y=0;y<a.length;y++)A=a[y],A=g.distSquared(Am.pt(A.x+A.width/2,
A.y+A.height/2)),A>=r||(r=A,v=y);l.column=v;return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],e,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),Yqa=J9=Am.TextLayout;Am.default=J9;var Lf=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");
Lf.printViewState=function(b){var e=b.viewState,m=e.scrollTop,a=e.scrollHeight,g=e.textHeight,l=e.firstVisibleRow;e=e.lastVisibleRow;var r=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+m+" + "+a+"\nlines: "+l+" - "+e+"\nvisible lines: "+(e-l)+"\nheight: "+g+", "+r.length+" lines")};Lf.installCSS=function(b){Lf.cssInstalled=!0;Lf.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};Lf.extractHTMLFromTextMorph=tL;Lf.obj=Ag;Lf.arr=eg;Lf.num=Km;Lf.pt=Ii;Lf.Rectangle=Le;Lf.vdom=WG;Lf.defaultAttributes=rw;Lf.defaultStyle=Rx;Lf.addOrChangeCSSDeclaration=ms;Lf.hyperscriptFnForDocument=oM;Lf.objectReplacementChar="\ufffd";Lf.config=Cn;Lf.getSvgVertices=qw;var ON=Lf.vdom;Lf.h=ON.h;Lf.create=ON.create;Lf.patch=ON.patch;Lf.diff=ON.diff;Lf.cssInstalled=!1;Lf.debug=!!Lf.config.onloadURLQuery["debug-text"];Lf.nextTick=function(b,e,m,a,g,l){for(;!g&&m<e.length;)g=b[e[m++]+"equestAnimationFrame"];
return g&&g.bind(b)||b.setImmediate||function(r){b.setTimeout(r,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=e.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof e.AfterTextRenderHook?e.AfterTextRenderHook:e.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,g,l){if(0===g.height||g.hasEstimatedExtent){var r=a.getGlobalTransform().inverse();r.e=r.f=0;var v=1!=r.getScale()||0!=r.getRotation();v&&(l.style.transform=r.toString());var y=l.getBoundingClientRect();r=y.height;y=y.width;v&&(l.style.transform="");r&&y&&(g.height!==r||g.width!==y)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(g.changeExtent(y,r,!1),a.textLayout.resetLineCharBoundsCacheOfLine(g),
this.needsRerender=!0,a.viewState._needsFit=!0);if(g.textAndAttributes&&g.textAndAttributes.length)for(y=v=0;v<g.textAndAttributes.length;v+=2)(l=g.textAndAttributes[v])&&l.isMorph?(a._positioningSubmorph=l,l.position=a.textLayout.pixelPositionFor(a,{row:g.row,column:y}).subPt(a.origin),l._dirty=!1,a._positioningSubmorph=null,y++):l&&(y+=l.length);return r}return g.height}},{key:"updateExtentsOfLines",value:function(a){var g=this.morph,l=g.viewState,r=g.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=
0;l.textWidth=a.scrollWidth;a=a.children;for(var v=0,y;v<a.length&&"line"!=a[v].className;)v++;if(v<a.length){y=a[v];var A=y.dataset;A=Number(A?A.row:y.getAttribute("data-row"));if("number"===typeof A&&!isNaN(A)){l.dom_nodeFirstRow=A;y=0;A=g.document.getLine(A);for(var E;v<a.length;v++){var F=a[v];l.dom_nodes.push(F);A&&(E||(E=A.hasEstimatedExtent),A.hasEstimatedExtent=E,y+=this.updateLineHeightOfNode(g,A,F),A.hasEstimatedExtent=!r.isFontSupported(g.fontFamily,g.fontWeight),A=A.nextLine())}this.needsRerender?
(g.fitIfNeeded(),g.makeDirty()):g._dirty=!!g.submorphs.find(function(H){return H.needsRerender()})}}}},{key:"hook",value:function(a,g,l){a&&a.parentNode&&(g=this.morph.viewState,g.text_layer_node=a,g.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4957,end:9032})})(void 0);var K9=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=e.hasOwnProperty("TextRenderer")&&"function"===typeof e.TextRenderer?e.TextRenderer:e.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
Lf.cssInstalled||Lf.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var g=this,l=a.viewState._renderLineFn;if(!l){var r=Lf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderLineFn=function(v){return g.renderLine(r,null,a,v)}}return l}},{key:"directRenderTextLayerFn",value:function(a){var g=this,l=a.viewState._renderTextLayerFn;if(!l){var r=
Lf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderTextLayerFn=function(v){return g.renderJustTextLayerNode(r,a,v,[])}}return l}},{key:"renderMorph",value:function(a,g){var l=[],r=a.selection;if(a.inMultiSelectMode()){r=r.selections;for(var v=0;v<r.length-1;v++)l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,r[v],!0,2)));l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,r[v],!1,4)))}else l=this.renderSelectionLayer(a,r,!1,1);r=this.renderTextLayer(a,
g);v=this.renderJustTextLayerNode(Lf.h,a,null,[]);var y=this.renderMarkerLayer(a,g),A=a.document.width>a.width?a.scrollbarOffset:Lf.pt(0,0);A=Lf.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[Lf.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-A.y+"px"}})]);r.properties.className+=" actual";
r.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";v.properties.className+=" font-measure";var E=a.embeddedMorphMap,F=E?a.submorphs.filter(function(H){return!E.has(H)}):a.submorphs;l=[].concat($jscomp.arrayFromIterable(l),[y,v,r,g.renderSelectedSubmorphs(a,F)]);return Lf.h("div",Object.assign({},Lf.defaultAttributes(a,g),{style:Object.assign({},Lf.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===
a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[A].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[Lf.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},l)]:l)))}},{key:"renderTextLayer",value:function(a,g){var l=this,r=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(Lf.h,g,a))):this.renderLines(Lf.h,
g,a);r=this.renderJustTextLayerNode(Lf.h,a,null,r);r.properties.style.position="absolute";var v=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new Lf.AfterTextRenderHook);v.reset(a);r.properties["after-text-render-hook"]=v;Lf.nextTick(function(){l.manuallyTriggerTextRenderHook(a,g)});return r}},{key:"manuallyTriggerTextRenderHook",value:function(a,g){var l=a.viewState.afterTextRenderHook;l&&!l.called&&((g=(g=g.getNodeForMorph(a))&&g.querySelector(".actual.newtext-text-layer"))&&
l.hook(g),a.ownerChain().every(function(r){return r.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,g,l,r){var v=g.padding,y=v.x,A=v.y,E=g.fixedWidth,F=g.fixedHeight,H=g.backgroundColor,I=g.fontColor,M=g.textAlign,N=g.fontSize,X=g.textDecoration,W=g.fontStyle,ea=g.fontWeight,Aa=g.fontFamily,Ka=g.lineHeight,K=g.wordSpacing,aa=g.letterSpacing,T=g.tabWidth,U=y+v.width;v=A+v.height;var pa=Math.max(g.document.height,g.height),fa="newtext-text-layer";switch(g.lineWrapping){case !0:case "by-words":fa+=
" wrap-by-words";break;case "only-by-words":fa+=" only-wrap-by-words";break;case "by-chars":fa+=" wrap-by-chars";break;case !1:fa+=" no-wrapping"}E||(fa+=" auto-width");F||(fa+=" auto-height");g={height:pa+"px"};0<y&&(g.paddingLeft=y+"px");0<U&&(g.paddingRight=U+"px");0<A&&(g.paddingTop=A+"px");0<v&&(g.paddingBottom=v+"px");aa&&(g.letterSpacing=aa);K&&(g.wordSpacing=K);Ka&&(g.lineHeight=Ka);Aa&&(g.fontFamily=Aa);ea&&(g.fontWeight=ea);W&&(g.fontStyle=W);X&&(g.textDecoration=X);N&&(g.fontSize=N+"px");
M&&(g.textAlign=M);I&&(g.color=String(I));H&&(g.backgroundColor=H);8!==T&&(g.tabSize=T);y={className:fa,style:g};g.overflow="hidden";l&&(A=l.clipMode,H=l.height,l=l.width,"number"===typeof l&&(g.width=l+"px"),"number"===typeof H&&(g.height=H+"px"),A&&(g.overflow=A));return a("div",y,r)}},{key:"renderLines",value:function(a,g,l){var r=l.height,v=l.scroll,y=l.padding.y,A=l.document,E=l.clipMode;g.getNodeForMorph(l);v=v.y;var F=A.rowCount-1,H=A.height,I="visible"!==E,M=A.findLineByVerticalOffset(I?Math.max(0,
I?v-y:0):0)||{row:0,y:0,offset:0,line:A.getLine(0)},N=M.line,X=M.offset;E=M.y;M=M.row;y=A.findLineByVerticalOffset(I?Math.min(H,v-y+r):H)||{row:F,offset:0,y:0,line:A.getLine(F)};A=y.line;var W=y.offset,ea=y.row;y=I?M:0;X=0===X?M:M+1;F=I?ea+1:F;I=A&&W!==A.height?ea-1:ea;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,F-y+1);M=[];A=[];A.push(a("div.newtext-before-filler",{key:"filler",style:{height:E+"px"}}));for(W=0;W<this.maxVisibleLines&&(M.push(N),ea=this.renderLine(a,g,l,N),A.push(ea),ea.key=
N.row%this.maxVisibleLines,W++,N=N.nextLine(),N););Object.assign(l.viewState,{scrollTop:v,scrollHeight:r,scrollBottom:v+r,heightBefore:E,textHeight:H,firstVisibleRow:y,lastVisibleRow:F,firstFullyVisibleRow:X,lastFullyVisibleRow:I,visibleLines:M});l.debug&&Lf.printViewState(l);return A}},{key:"renderLine",value:function(a,g,l,r){var v=r.textAndAttributes,y=[],A=v.length,E=l.fontSize;if(0<A)for(var F=0;F<A;F+=2){var H=v[F]||"\u00a0";var I=v[F+1];if("string"!==typeof H)y.push(H.isMorph?this.renderEmbeddedSubmorph(a,
g,H,I):Lf.objectReplacementChar);else if(I){var M=I.fontSize&&(Lf.obj.isString(I.fontSize)?I.fontSize:I.fontSize+"px");var N=I.fontFamily;var X=I.fontWeight;var W=I.fontStyle;var ea=I.textDecoration;var Aa=I.fontColor;var Ka=I.backgroundColor;var K=I.nativeCursor;var aa=I.textStyleClasses;var T=I.link;var U=I.lineHeight||U;var pa=I.textAlign||pa;var fa=I.wordSpacing||fa;var oa=I.letterSpacing||oa;var hb=I.paddingRight;var Cb=I.paddingLeft;var va=I.paddingTop;var ma=I.paddingBottom;var ua=I.verticalAlign;
var Ma=I.textStroke;var Lb=I.quote||Lb;var ic="span";var Vb={};var jc={style:Vb};M&&I.fontSize<E&&(E=I.fontSize);T&&(ic="a",(jc.href=T)&&T.startsWith("http")&&(jc.target="_blank"));if(T||K)Vb.pointerEvents="auto";M&&(Vb.fontSize=M);N&&(Vb.fontFamily=N);X&&(Vb.fontWeight=X);W&&(Vb.fontStyle=W);ea&&(Vb.textDecoration=ea);Aa&&(Vb.color=String(Aa));Ka&&(Vb.backgroundColor=String(Ka));K&&(Vb.cursor=K);hb&&(Vb.paddingRight=hb);Cb&&(Vb.paddingLeft=Cb);va&&(Vb.paddingTop=va);ma&&(Vb.paddingBottom=ma);ua&&
(Vb.verticalAlign=ua);Ma&&(Vb["-webkit-text-stroke"]=Ma);I.doit&&(Vb.pointerEvents="auto",Vb.cursor="pointer");aa&&aa.length&&(jc.className=aa.join(" "));y.push(a(ic,jc,H))}else y.push(H)}else y.push(a("br"));g={};l.fontSize>E&&(g.fontSize=E+"px");U&&(g.lineHeight=U);pa&&(g.textAlign=pa);oa&&(g.letterSpacing=oa);fa&&(g.wordSpacing=fa);l=a("div",{className:"line",style:g,dataset:{row:r.row}},y);if(Lb)for("number"!==typeof Lb&&(Lb=1);Lb--;)l=a("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",
value:function(a,g,l,r){r=r||{};if(g)return a=g.render(l),a.properties.style.position="relative",a.properties.style.transform="",a.properties.style.textAlign="initial",r.paddingTop&&(a.properties.style.marginTop=r.paddingTop),r.paddingLeft&&(a.properties.style.marginLeft=r.paddingLeft),r.paddingRight&&(a.properties.style.marginRight=r.paddingRight),r.paddingBottom&&(a.properties.style.marginBottom=r.paddingBottom),a;g=l.extent;r=g.x+"px";g=g.y+"px";return a("div",{className:l.styleClasses.join(" "),
style:{width:r,height:g}},[])}},{key:"renderSelectionLayer",value:function(a,g,l,r){l=void 0===l?!1:l;r=void 0===r?2:r;if(!g)return[];var v=a.textLayout,y=g.start,A=g.end,E=g.cursorVisible,F=g.selectionColor,H=a.document,I=a.cursorColor,M=g.isReverse();y=v.boundsFor(a,y);var N=v.computeMaxBoundsForLineSelection(a,g),X=v.boundsFor(a,A);Lf.pt(y.x,N.y);N=Lf.pt(X.x,X.y);A=y.height;X=X.height;y=M?Lf.pt(y.x,y.y):N;l=this.cursor(y,M?A:X,E,l,r,I);if(g.isEmpty())return[l];r=[];E=g.start.row;I=H.computeVerticalOffsetOf(E)+
a.padding.top();M=a.padding.left();for(var W,ea,Aa;E<=g.end.row;){A=H.getLine(E);if(!(E<a.viewState.firstVisibleRow-50)){if(E>a.viewState.lastVisibleRow+50)break;y=v.charBoundsOfRow(a,E).map(Lf.Rectangle.fromLiteral);X=E==g.start.row;if(Aa=y[0].bottom()<Lf.arr.last(y).top()){N=v.rangesOfWrappedLine(a,E).map(function(T){return T.intersect(g)});ea=X;var Ka=0,K=W=void 0,aa=$jscomp.makeIterator(N);for(N=aa.next();!N.done;N=aa.next())N=N.value,N.isEmpty()||(W=y.slice(N.start.column,N.end.column),Ka=ea?
Lf.arr.min(W.map(function(T){return T.top()})):Ka,K=Lf.arr.max(W.map(function(T){return T.bottom()})),ea=W[0],N=Lf.pt(M+ea.left(),I+Ka),ea=Lf.arr.last(W),W=Lf.pt(M+ea.right(),I+K),Ka=K,ea=!1,r.push(Lf.Rectangle.fromAny(N,W)))}Aa||(Aa=E==g.end.row,N=X?g.start.column:0,Ka=Aa?g.end.column:y.length-1,X=X&&Lf.arr.min(y.slice(N,Ka+1).map(function(T){return T.top()}))||0,aa=N>=Ka?5:0,ea=y[N],N=Lf.pt(M+(ea?ea.left():Lf.arr.last(y).right()),I+X),ea=y[Ka],g.includingLineEnd?W=Lf.pt(a.width-a.padding.right(),
I+X+A.height):(Aa=Aa&&g.end.column<=y.length-1,W=Lf.pt(M+(ea?Aa?ea.left():ea.right():Lf.arr.last(y).right())+aa,I+X+A.height)),r.push(Lf.Rectangle.fromAny(N,W)))}I+=A.height;E++}a=this.selectionLayerRounded(r,F,a);a.push(l);return a}},{key:"selectionLayerRounded",value:function(a,g,l){var r=[l={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var v=a.next();!v.done;v=a.next()){v=v.value;y&&(y.left()>v.right()||y.right()<v.left())&&r.push(l={left:[],right:[]});l.left.push(v.topLeft(),v.bottomLeft());
l.right.push(v.topRight(),v.bottomRight());var y=v}y=[];l={};r=$jscomp.makeIterator(r);for(a=r.next();!a.done;l={$jscomp$loop$prop$pos$2391:l.$jscomp$loop$prop$pos$2391},a=r.next())if(a=a.value,a.left.length){l.$jscomp$loop$prop$pos$2391=a.left.reduce(function(M,N){return M.minPt(N)});v=a.left.concat(a.right.reverse());a=[];for(var A=0;A<v.length;A++){var E=v[A-1]||Lf.arr.last(v),F=v[A],H=v[A+1]||Lf.arr.first(v),I=E.subPt(F).normalized().scaleBy(6);E=F.addPt(I);E._next=I.scaleBy(-1);H=H.subPt(F).normalized().scaleBy(6);
F=F.addPt(H);F._prev=H.scaleBy(-1);a.push(E,F)}a=a.map(function(M){return function(N){return{position:N.subPt(M.$jscomp$loop$prop$pos$2391),isSmooth:!0,controlPoints:{next:N._next||Lf.pt(0),previous:N._prev||Lf.pt(0)}}}}(l));v=Lf.getSvgVertices(a);F=a.map(function(M){return M.position}).reduce(function(M,N){return M.minPt(N)});A=F.y;F=F.x;a=a.map(function(M){return M.position}).reduce(function(M,N){return M.maxPt(N)});y.push(Lf.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",
left:l.$jscomp$loop$prop$pos$2391.x+"px",top:l.$jscomp$loop$prop$pos$2391.y+"px",width:a.x-F,height:a.y-A}},Lf.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:v,fill:g.toString()}})))}return y}},{key:"cursor",value:function(a,g,l,r,v,y){return Lf.h("div",{className:"newtext-cursor"+(r?" diminished":""),style:{left:a.x-Math.ceil(v/2)+"px",top:a.y+"px",width:v+"px",height:g+"px",display:l?"":"none",background:y||"black"}})}},{key:"renderMarkerLayer",value:function(a){var g=a.markers,
l=a.textLayout,r=a.viewState,v=r.firstVisibleRow;r=r.lastVisibleRow;var y=[];if(!g)return y;g=$jscomp.makeIterator(g);for(var A=g.next();!A.done;A=g.next()){var E=A.value;A=E.style;E=E.range;var F=E.start;E=E.end;if(!(E.row<v||F.row>r))if(F.row===E.row)y.push(this.renderMarkerPart(l,a,F,E,A));else{y.push(this.renderMarkerPart(l,a,F,a.lineRange(F.row).end,A));for(F=F.row+1;F<=E.row-1;F++){var H=a.lineRange(F);y.push(this.renderMarkerPart(l,a,H.start,H.end,A,!0))}y.push(this.renderMarkerPart(l,a,{row:E.row,
column:0},E,A))}}return y}},{key:"renderMarkerPart",value:function(a,g,l,r,v,y){y=void 0===y?!1:y;var A=g.document;var E=A.getLine(l.row);y?(a=g.padding,y=a.left(),l=a.top()+A.computeVerticalOffsetOf(l.row),a=y+E.width,E=E.height):(E=a.boundsFor(g,l),y=E.x,l=E.y,E=a.boundsFor(g,r),a=E.x,E=E.height);E=Math.ceil(E);return Lf.h("div.newtext-marker-layer",{style:Object.assign({},v,{left:y+"px",top:l+"px",height:E+"px",width:a-y+"px"})})}},{key:"renderDebugLayer",value:function(a){var g=[],l=a.viewState,
r=l.heightBefore,v=l.firstVisibleRow,y=l.lastVisibleRow;l=l.visibleLines;var A=a.padding,E=a.scroll,F=E.x,H=E.y;E=A.left();var I=A.right(),M=A.top();A.bottom();g.push(Lf.h("div.debug-info",{style:{left:F+E+"px",top:H+"px",width:a.width-I+"px"}},Lf.h("span","visible rows: "+v+" - "+y)));for(A=0;v<y;A++,v++){var N=l[A];H=a.textLayout.lineCharBoundsCache.get(N);N=N.height;g.push(Lf.h("div.debug-line",{style:{left:F+E+"px",top:M+r+"px",width:a.width-I+"px",height:N+"px"}},Lf.h("span",String(v))));if(H)for(var X=
0;X<H.length;X++){var W=H[X];g.push(Lf.h("div.debug-char",{style:{left:E+W.x+"px",top:M+r+W.y+"px",width:W.width+"px",height:W.height+"px"}}))}r+=N}return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:9049,end:35980})}(void 0),Zqa=K9=Lf.TextRenderer;Lf.extractHTMLFromTextMorph=tL;Lf.extractHTMLFromTextMorph=tL;Lf.default=K9;var Dr=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Dr.arr=eg;Dr.eqPosition=qv;Dr.KeyHandler=mU;Dr.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,e){e=void 0===e?{backwards:!1}:e;Dr.IyGotoCharKeyHandler.installInto(b,e.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,e){b.saveMark();var m=b.selection,
a=m.lead,g=a.row,l=a.column;a=!!b.activeMark||!m.isEmpty();var r={row:g,column:l-1};b=b.document[e.backwards?"scanBackward":"scanForward"](r,function(v,y){return v!==e.needle||Dr.eqPosition(r,y)?null:y});if(!b)return!0;b.column++;m.lead=b;a||(m.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var PN=Dr.commands.activate;Dr.activate=PN;Dr.activate=PN;Dr.activate=PN;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),m=e.hasOwnProperty("IyGotoCharKeyHandler")&&
"function"===typeof e.IyGotoCharKeyHandler?e.IyGotoCharKeyHandler:e.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},
{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;Dr.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,g){var l=g.keyCombo,r=l.startsWith("input-");if(g.onlyModifiers||l.startsWith("Shift-")||!r&&!g.isModified&&!g.isFunctionKey)return{command:"null",passEvent:!0};g=r&&l.slice(6);if(!this.charToFind)if(r)this.charToFind=g;else return this.uninstallFrom(a),null;return g!==this.charToFind?(this.uninstallFrom(a),null):{command:Dr.commands.moveTo,args:{backwards:this.backwards,
needle:g}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a,g){g=void 0===g?!1:g;a.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(g))}}],e,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1063,end:3067})})(Dr.KeyHandler);var Fi=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");Fi.chain=Ql;Fi.arr=eg;Fi.string=ti;Fi.date=xu;Fi.pt=Ii;Fi.Range=Xy;Fi.eqPosition=qv;Fi.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",
scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,e){e=void 0===e?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:e;var m=b.selection,a=m.text,g=e.hasOwnProperty("collapseSelection")?e.collapseSelection:!0;b.saveMark(m.anchor);b.activeMark=null;(m.isMultiSelection?m.selections.slice():[m]).forEach(function(l){var r=l.isEmpty()?b.lineRange():l.range,v=b.textInRange(r);b.env.eventDispatcher.killRing.add(v);e.delete?b.deleteText(r):!l.isEmpty()&&g&&l.collapse(l.lead)});e.dontTryNativeClipboard||
b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,e){e=void 0===e?{killRingCycleBack:!1}:e;var m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a=
b.env.eventDispatcher.killRing;e.killRingCycleBack&&(Fi.arr.last(Fi.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(m=a.back());!m&&a.isCycling()&&(m=a.yank());m||(m=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(l,r){r=a.pointer-1-r;0>r&&(r=a.buffer.length-1);return{selection:l,pasted:a.buffer[r]||""}}).concat({selection:b.selection.defaultSelection,pasted:m}).forEach(function(l){return l.selection.text=
l.pasted}),b.undoManager.group()):m&&(b.undoManager.group(),b.selection.text=m,b.undoManager.group());return g.return(!0)})}},{name:"browse clipboard",exec:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=b.env.eventDispatcher.killRing,m=e.pointer,a=e.buffer,g=a.map(function(y){return{isListItem:!0,string:Fi.string.truncate(y,80).replace(/\n/g,""),value:y}}),v.yield(b.world().filterableListPrompt("select items to paste",g,{preselect:m,
multiSelect:!0}),2);l=v.yieldResult;r=l.selected;r.length&&(b.undoManager.group(),b.insertTextAndSelect(r.join("\n")),b.undoManager.group());return v.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();
b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var e=b.selection;e.isEmpty()&&e.growLeft(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var e=b.selection;
if(b.rejectsInput())return!1;e.isEmpty()&&e.growRight(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,m){return b.insertText(b.tab,m.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,m){return e.startsWith(b.tab)&&b.deleteText({start:m.start,end:{row:m.start.row,
column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,e){e=void 0===e?{}:e;var m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){m=b.editorPlugin&&b.editorPlugin.mode;if(!m)return E.return(!0);l=e.hasOwnProperty("undo")?e.undo:!0;e.hasOwnProperty("firstRow")&&e.hasOwnProperty("lastRow")?(r=e,a=r.firstRow,g=r.lastRow):b.selection.isEmpty()?a=g=b.cursorPosition.row:(v=b.selection.selectedRows,a=v.first,
g=v.last);return E.yield(System.import("lively.ide/editor-modes.js"),2)}y=E.yieldResult;A=y.indentLines;l&&b.undoManager.group();A(b,m,a,g,"smart",!0,e);l&&b.undoManager.group();return E.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var e=b.snippets.find(function(m){return m.canExpand(b)});return e?(e.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",
scrollCursorIntoView:!0,exec:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=b.snippets.map(function(r){return{isListItem:!0,string:r.trigger+" - "+r.expansion,value:r}}),l.yield(b.world().filterableListPrompt("select snippet",e,{requester:b}),2);m=l.yieldResult;a=$jscomp.makeIterator(m.selected);(g=a.next().value)&&g.expandAtCursor(b);return l.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var e=
b.cursorPosition,m=e.row,a=e.column;e=Fi.Range.create(m,a-1,m,a+1);var g=b.getLine(m);m=g[a-1];a=g[a];m&&a&&b.replace(e,a+m,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var e=b.selection.selections;b.undoManager.group();
e.reduce(function(m,a){var g=a.text;a.text=m;return g},Fi.arr.last(e).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var e=b.selection,m=e.lead.row,a=b.lineRange(m,!1);e.range=e.range.equals(a)?b.lineRange(m,!0):a;return!0}},{name:"goto line start",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.selection,a=m.lead;
b=b.screenLineRange(a,!0);m.lead=Fi.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!e&&(m.anchor=m.lead);return!0}},{name:"goto line end",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.selection;b=b.screenLineRange(m.lead,!0);m.lead=b.end;!e&&(m.anchor=m.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentStart(Object.assign({},e));return!0}},{name:"goto end",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentEnd(Object.assign({},e));return!0}},{name:"goto paragraph above",
exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=b.paragraphRangeAbove(b.cursorPosition.row);m.start.row--;b.selection.lead=m.start;e.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=b.paragraphRangeBelow(b.cursorPosition.row);m.end.row++;b.selection.lead=m.end;e.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,
m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<a)m.row=a;else if(m.row<l)m.row=l;else if(m.row<g)m.row=g;else return!0;b.selection.lead=m;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<=a)return!0;
m.row=m.row<=l?a:m.row<=g?l:g;b.selection.lead=m;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=!!b.activeMark,m=Number,g.yield(b.world().prompt("Enter line number"),2);a=m(g.yieldResult);isNaN(a)||(e?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return g.return(!0)})}},{name:"join line",exec:function(b,
e){e=void 0===e?{withLine:"before"}:e;var m=b.selection,a=m.start,g=m.end;m=m.lead;if(!b.selection.isEmpty()){if(a.row===g.row)return!0;e=b.undoManager.ensureNewGroup(b,"join line");g=Fi.arr.range(0,g.row-1-a.row).map(function(l){return b.joinLine(a.row)});b.undoManager.group(e);b.selection.isMultiSelection&&(b.cursorPosition=g[0],g.slice(1).forEach(function(l){return b.selection.addRange({start:l,end:l})}));return!0}g=m.row;if("before"===e.withLine&&0>=g||"after"===e.withLine&&g>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===e.withLine?g-1:g);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(m),e);b.cursorPosition=e;return!0}},{name:"insert line",exec:function(b,e){e=void 0===e?{where:"above"}:e;var m=b.cursorPosition.row,a=b.getLine(m).match(/^\s*/)[0].length;"below"===e.where&&m++;b.insertText(" ".repeat(a)+"\n",{column:0,row:m});b.cursorPosition=
{column:a,row:m};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var e=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(e.row)+"\n",{column:0,row:e.row+1});else{var m=b.selection.range;b.insertText(b.selection.text,e);b.selection=m}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row);if(Fi.eqPosition(b.document.endPosition,e))return!0;e=m.trim()?{start:e,end:{row:e.row,
column:m.length}}:{start:{row:e.row,column:0},end:{row:e.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(e));b.undoManager.group();b.deleteText(e);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var e=b.lineRange(),m=b.cursorPosition;if(Fi.eqPosition({row:m.row,column:0},m))return!0;e={start:Fi.eqPosition(e.start,m)?{row:m.row,column:0}:e.start,end:m};
b.deleteText(e);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var m=e.selections.map(function(l){return l.range});m.slice().sort(Fi.Range.compare).forEach(function(l){b.selection=l;b.execCommand("move lines up")});m.forEach(function(l){l.start.row--;l.end.row--});b.selection.ranges=m;return!0}e.isEmpty()||0!==e.end.column||e.growRight(-1);m=e.start;e=e.end;var a=b.getLine(m.row-1),g=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:e.row+1,column:0});b.deleteText({start:{row:m.row-1,column:0},end:{row:m.row,column:0}});b.undoManager.group(g);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var m=e.selections.map(function(l){return l.range});m.slice().sort(Fi.Range.compare).reverse().forEach(function(l){b.selection=l;b.execCommand("move lines down")});m.forEach(function(l){l.start.row++;l.end.row++});b.selection.ranges=m;return!0}e.isEmpty()||
0!==e.end.column||e.growRight(-1);var a=e.range,g=a;m=g.start;g=g.end;e.isEmpty()?a={start:{row:m.row,column:0},end:{row:m.row+1,column:0}}:0!==g.column&&(a={start:m,end:{row:g.row+1,column:0}});e=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:m.row+1,column:0});b.undoManager.group(e);b.selection={start:Object.assign({},m,{row:m.row+1}),end:Object.assign({},g,{row:g.row+1})};return!0}},{name:"old select word",exec:function(b){var e=b.selection;e.range=b.wordAt(e.lead).range;
return!0}},{name:"select word",exec:function(b){var e=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(e.lead)))e.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var e=b.selection;e.anchor=b.wordRight(e.end).range.end;return!0}},{name:"goto word left",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.wordLeft().range;b.selection.lead=m.start;e||(b.selection.anchor=m.start);return!0}},{name:"goto word right",
exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.wordRight().range;b.selection.lead=m.end;e||(b.selection.anchor=m.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var e=b.wordRight().range.end;e={start:b.cursorPosition,end:e};b.env.eventDispatcher.doCopy(b.textInRange(e));b.deleteText(e);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var e={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(e);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=e.pairs||{"{":"}","[":"]","(":")","<":">"};if(m=b.findMatchingForward(b.cursorPosition,"right",m)||b.findMatchingForward(b.cursorPosition,"left",m))b.selection.lead=m,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=e.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(m=b.findMatchingBackward(b.cursorPosition,"left",m)||b.findMatchingBackward(b.cursorPosition,"right",m))b.selection.lead=m,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var e=b.charBoundsFromTextPosition(b.cursorPosition),m=e.topLeft();e=b.height-e.height;var a=b.scroll,g=a.x;a=a.y;
a=2>Math.abs(m.y-a)?m.y-e:2>Math.abs(m.y-a-.5*e)?m.y:m.y-.5*e;b.scroll=Fi.pt(g,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var e=b.selection;if(e.isEmpty()){var m=b.popSavedMark();m&&(b.saveMark(b.cursorPosition),e.lead=m.position)}else e.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,m){var a=b.activeMark;e=b.selection;var g=!e.isEmpty();if(4===m){if(b=b.popSavedMark())e.lead=
b.position,g||(e.anchor=e.lead);return!0}if(!a&&!g)return b.activeMark=e.lead,!0;b.saveMark(a||e.anchor);b.activeMark=null;g&&(b.inMultiSelectMode()?e.selections:[e]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,e,m){function a(y,A,E){if(y.length<=g)return[A+y.trim()];E=y.slice(0,g);var F=Fi.arr.last(Fi.string.reMatches(E,r)),H=F&&0<F.start?F.start:g;F=E.slice(0,H);y=A+(E.slice(H)+y.slice(g)).trimLeft();
return[F].concat(a(y,A))}if(4===m)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();e=b.selection;var g=m||80,l=e.selectedRows;m=e.range;var r=/[ ]+/g,v=/^[\s\t]+/;e=Fi.string.paragraphs(Fi.arr.range(l.first,l.last).map(function(y){return b.getLine(y)}).join("\n"),{keepEmptyLines:!0});e=Fi.chain(e.map(function(y){if(!/^\s*$/.test(y)){y=y.split("\n").join(" ");if(""===y.trim())y=[""];else{var A=y.match(v);A=A?A[0]:"";y=a(A+y.trim(),A)}y=y.join("\n")+"\n"}return y})).flatten().value().join("\n");
b.undoManager.group();b.replace(m,e);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var e=0;b.withLinesDo(0,b.documentEndPosition.row,function(m,a){return m.match(/\s+$/)&&++e&&b.replace(a,m.trimRight())});b.world().setStatusMessage(e+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row),a=m.match(/^\s*/)[0].length;b.undoManager.group();!m.trim()&&a&&(b.deleteText({start:{row:e.row,column:0},end:{row:e.row,column:a}}),e.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(e,m,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,e){var m=e=void 0===e?{string:null,undoGroup:!1}:e;e=m.string;m=m.undoGroup;var a="string"===typeof e&&e.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(e))return!0;
a=b.selection;var g=!a.isEmpty();g&&b.undoManager.group();var l=a.lead;a.replace(e,!0,!0,!0,!(1===e.length&&"\n"!==e&&0<l.column));a.collapseToEnd();g&&b.undoManager.group();m&&(/^[\s\.,\?\+=]+$/.test(e)||"number"!==typeof m?b.undoManager.group():b.undoManager.groupLater(m));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,e,m,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];Fi.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,e,m){e=Fi.date.format(new Date,m?"mediumDate":"isoDate");b.undoManager.group();b.insertText(e);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var e=b.selection;e.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var m=/\[X\]/g,a=e.text;a=b.test(a)?a.replace(b,"[X]"):m.test(a)?a.replace(m,"[ ]"):"[ ] "+a.trimLeft();e.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,e,function(g){var l=a.findIndex(function(r){return r>g});-1<l?a.splice(l,0,g):a.push(g)});b.undoManager.group();b.replace({start:{row:m,
column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,e,function(g){return a.push(g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:e+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,
e,function(g){return Fi.arr.pushIfNotIncluded(a,g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,m){function a(H,I){var M,N,X=g(H).trim();"uppercased"===X?M=/\s*[A-Z0-9]+/g:"dashed"===X?M=/-\w/g:"spaced"===X&&(M=/\s+.?/g);"uppercased"===I?N=function(W){return W.trim().replace(/^-/,"").toUpperCase()}:"dashed"===I?N=function(W){return"-"+
W.trim().replace(/^-/,"").toLowerCase()}:"spaced"===I&&(N=function(W){return" "+W.trim().replace(/^-/,"").toLowerCase()});return H.replace(M,N)}function g(H){return H.match(/[A-Z]/)?"uppercased":H.match(/-/)?"dashed":H.match(/\s/)?"spaced":"unknown"}var l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);l=b.selection.ranges;r=b.textInRange(l[0]);if(!r)return b.setStatusMessage("Please select some text"),
H.return(!0);v=g(r);y=Fi.arr.without(["uppercased","dashed","spaced"],v);return H.yield(b.world().listPrompt("Convert "+v+" into?",y,{}),2)}A=H.yieldResult;E=$jscomp.makeIterator(A.selected);F=E.next().value;if(!F)return H.return(!0);b.undoManager.group();l.forEach(function(I,M){M=b.textInRange(I);M=a(M,F);b.replace(I,M)});b.undoManager.group();b.focus();return H.return(!0)})}},{name:"spell check word",exec:function(b,e){var m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return m=
b.wordAt(),m.string?A.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),A.return(!0));case 2:return a=A.yieldResult,g=a.spellCheckWord,A.yield(g(m.string),3);case 3:return l=A.yieldResult,l.length?A.yield(b.world().filterableListPrompt("Choose replacement for "+m.string,l),4):(b.setStatusMessage("no suggestions for word "+m.string),A.return(!0));case 4:r=A.yieldResult;v=$jscomp.makeIterator(r.selected);if(y=v.next().value)b.undoManager.group(),
b.replace(m.range,y),b.undoManager.group();return A.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,e){var m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return a=(m=b.textInRange(b.selection))&&0!==m.length?{stdin:m}:{},E.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return g=E.yieldResult,E.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=E.yieldResult;r=l.runCommand;if(!g)return E.return(b.setStatusMessage("No command entered, aborting...!"));v=r(g,a);E.setCatchFinallyBlocks(4);return E.yield(v.whenDone(),6);case 6:y=v.output.trim();b.undoManager.group();b.selection.selections.forEach(function(F){return F.text=y});b.undoManager.group();E.leaveTryBlock(5);break;case 4:A=E.enterCatchBlock(),b.showError(A);case 5:return E.return(!0)}})}},{name:"open file at cursor",exec:function(b,e){var m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return b.getLine(),m=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(H,I){return(0>=I.column||H.match(/\s/))&&I})||{row:0,column:0},g=b.document.scanForward(b.cursorPosition,function(H,I){return(I.row!=m||H.match(/\s/))&&I})||b.documentEndPosition,l=b.textInRange({start:a,end:g}).replace(/\s/g,""),r=l.split(":"),v=r[0].match(/^file|http/)?r.shift()+":"+r.shift():r.shift(),r[0].match(/^[0-9]+$/)&&(v+=":"+r.shift()),F.yield(System.import("lively.ide/text-editor.js"),
2);y=F.yieldResult;A=y.default;E=A.openInWindow();E.location=v;return F.return(E)})}},{name:"run code on text morph",doc:"...",exec:function(b,e){var m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return m={targetModule:"lively://code-on-text-morph",context:b},v.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:m,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
v.yieldResult,v.setCatchFinallyBlocks(3),b.undoManager.group(),v.yield(lively.vm.runEval(a,m),5);case 5:l=v.yieldResult;b.undoManager.group();g=l.isError?l.value:null;v.leaveTryBlock(4);break;case 3:g=r=v.enterCatchBlock();case 4:return g&&b.showError(g),v.return(void 0)}})}},{name:"change editor mode",exec:function(b){var e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return e=function(F){return!F.endsWith("ide/editor-plugin.js")&&F.endsWith("editor-plugin.js")},
E.yield(lively.modules.getPackage("lively.ide").resources(e),2);case 2:return m=E.yieldResult,a=b.editorPlugin||{},g=a.shortName,l=0,r=["<no mode>"].concat(m.map(function(F,H){var I=F.url.match(/([^\/]+)\/editor-plugin.js/)[1];I===g&&(l=H);return{isListItem:!0,string:I,value:F}})),E.yield(b.world().filterableListPrompt("choose mode",r,{requester:b,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:v=E.yieldResult;y=$jscomp.makeIterator(v.selected);A=y.next().value;
if(!A)return E.return();if("<no mode>"!==A){E.jumpTo(4);break}return E.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),E.return();case 4:if(A.isLoaded){E.jumpTo(6);break}return E.yield(lively.modules.module(A.url).load(),6);case 6:return E.yield(b.changeEditorMode(A.url),0)}})}},{name:"report token at cursor",exec:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=b.tokenAt(b.cursorPosition)||{};m=e.token;a=e.start;g=e.end;b.setStatusMessage(m?
m+" "+a.column+" => "+g.column:"no token");return l.return(!0)})}}];Fi.commands.push.apply(Fi.commands,$jscomp.arrayFromIterable(Fi.usefulEditorCommands));Fi.iyGotoCharActivate=PN;Fi.commands.push(Fi.iyGotoCharActivate);Fi.searchCommands=NN;Fi.commands.push.apply(Fi.commands,$jscomp.arrayFromIterable(Fi.searchCommands));var L9=Fi.commands;Fi.default=L9;var Fd=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Fd.Rectangle=Le;Fd.Point=Jg;Fd.rect=Cl;Fd.Color=Hg;Fd.pt=Ii;Fd.string=ti;
Fd.num=Km;Fd.obj=Ag;Fd.fun=Jn;Fd.promise=ph;Fd.arr=eg;Fd.signal=dm;Fd.noUpdate=Ef;Fd.connect=Zk;Fd.disconnect=Dp;Fd.bowser=Ms;Fd.morph=qa;Fd.touchInputDevice=yr;Fd.config=Cn;Fd.Morph=Jl;Fd.Selection=KN;Fd.MultiSelection=LN;Fd.Document=Wqa;Fd.objectReplacementChar="\ufffd";Fd.Anchor=jE;Fd.Range=Xy;Fd.eqPosition=qv;Fd.lessPosition=pv;Fd.KeyHandler=mU;Fd.UndoManager=aH;Fd.TextSearcher=MN;Fd.TextLayout=Yqa;Fd.Renderer=Zqa;Fd.extractHTMLFromTextMorph=tL;Fd.commands=L9;Fd.textAndAttributesWithSubRanges=
sL;Fd.serializeMorph=uF;Fd.deserializeMorph=vF;Fd.getSvgVertices=qw;Fd.renderSubTree=HC;Fd.ShadowObject=Os;Fd.getClassName=gr;var Zt=Ba("a9",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),m=e.hasOwnProperty("Text")&&"function"===typeof e.Text?e.Text:e.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=
a=void 0===a?{}:a,l=g.position,r=g.rightCenter,v=g.leftCenter,y=g.topCenter,A=g.bottom,E=g.top,F=g.right,H=g.left,I=g.bottomCenter,M=g.bottomLeft,N=g.bottomRight,X=g.topRight,W=g.topLeft;g=g.center;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==r&&(this.rightCenter=r);void 0!==v&&(this.leftCenter=v);void 0!==y&&(this.topCenter=y);void 0!==A&&(this.bottom=A);void 0!==E&&
(this.top=E);void 0!==F&&(this.right=F);void 0!==H&&(this.left=H);void 0!==I&&(this.bottomCenter=I);void 0!==M&&(this.bottomLeft=M);void 0!==N&&(this.bottomRight=N);void 0!==X&&(this.topRight=X);void 0!==W&&(this.topLeft=W);void 0!==g&&(this.center=g)}},{key:"__deserialize__",value:function(a,g,l,r){cc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Fd.Renderer(this.env.domEnv);this.textLayout=
new Fd.TextLayout(this);this.changeDocument(Fd.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,g,l){var r=this;cc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l);this._isDeserializing=!1;this.whenRendered().then(function(){r.embeddedMorphs.forEach(function(v){return v.top=0})})}},{key:"__only_serialize__",get:function(){return Fd.arr.withoutAll(cc._get(Object.getPrototypeOf(m.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,g,l,r){cc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(I){return Fd.obj.select(I,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(I){return!I.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(I){if(!I)return I;if(I.isMorph)return l.ref(I).asRefForSerializedObjMap();if(Fd.obj.isObject(I)){var M={};I=JSON.stringify(I,function(N,X){return X&&X.__serialize__?(X=X.__serialize__(),Object.assign(M,X.bindings),"->["+(X.__expr__+"]")):X});I=
I.replace(/"->\[.*\]"/g,function(N){return N.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+I+")",bindings:M})}return I})};g=[];r=$jscomp.makeIterator(this.document.lines);for(var v=r.next();!v.done;v=r.next()){v=v.value;var y=this.textLayout.lineCharBoundsCache.get(v);if(y){var A=[],E=void 0,F=0;if(y){y=$jscomp.makeIterator(y);for(var H=y.next();!H.done;H=y.next()){H=H.value;if(E){if(Fd.num.roundTo(E.width,.001)==Fd.num.roundTo(H.width||0,.001)&&H.height==E.height){F++;
continue}A.push([F,Fd.num.roundTo(E.width||0,.001),E.height||0])}F=1;E=H}}E&&A.push([F,Fd.num.roundTo(E.width||0,.001),E.height||0]);g.push([v.row,Fd.arr.flatten(A)])}}a.cachedLineBounds=g}},{key:"spec",value:function(){var a=cc._get(Object.getPrototypeOf(m.prototype),"spec",this).call(this);a.textString=this.textString;return Fd.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||cc._get(Object.getPrototypeOf(m.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var g=this,l=a.prop,r=a.selector,v=a.meta,y=this.lineWrapping,A=!1,E=!1,F=!1,H=!1,I=!1,M=!1;if(r)A="replace"===r,H="addTextAttribute"===r,this._displacementChange=!this._displacing&&A;else switch(l){case "scroll":I=E=!0;break;case "extent":E=!0;l=a.prevValue.subPt(a.value);M=(F=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":y&&(H=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":H=a.prevValue!=a.value;break;case "lineWrapping":H=!0;break;case "borderWidth":case "fixedHeight":F=a.prevValue!=a.value;break;case "padding":F=!0}cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);l=function(){g._textChange=
!0;I&&(g.viewState.wasScrolled=!0);(H||M||F&&!v.styleSheetChange)&&g.invalidateTextLayout(H,H);(F||H)&&g.document&&g.world()&&g.document.lines.forEach(function(N){return N.hasEstimatedExtent=!0});g._displacementChange&&(g._displacementChange=!1);A&&Fd.signal(g,"textChange",a);E&&Fd.signal(g,"viewChange",a);g._textChange=!1};v.animation?Fd.promise.delay(v.animation.duration).then(l):l()}},{key:"onSubmorphChange",value:function(a,g){var l=this,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==
N.nextAddress){if(a.meta&&a.meta.styleSheetChange)return N.return();cc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",l).call(l,a,g);return a.meta.animation?N.yield(a.meta.animation.asPromise(),2):N.jumpTo(2)}if(l._textChange||l._positioningSubmorph===g)return N.return();r=a;v=r.prop;y="position"==v||"extent"==v||"scale"==v||"rotation"==v;l.displacingMorphMap.get(g)&&y&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(X){return X.top>=g.top}).forEach(function(X){l._intersectionShapeCache&&
l._intersectionShapeCache.delete(X);l.updateTextDisplacementFor(X)});A=l.embeddedMorphMap.get(g)||{};if((E=A.anchor)&&y){if("position"==v)return l._positioningSubmorph=g,g.position=a.prevValue,l._positioningSubmorph=null,N.return();F=g.bounds();H=g._lastBounds;I=E.position.row;M=l.document.getLine(I);H&&H.height==F.height&&H.bottom()==F.bottom()||(M.hasEstimatedExtent=!0,g._lastBounds=F)}N.jumpToEnd()})}},{key:"removeMorph",value:function(a,g){g=void 0===g?!0:g;var l=this.embeddedMorphMap,r=this.displacingMorphMap;
r&&r.has(a)&&this.toggleTextWrappingAround(a,!1);if(l&&l.has(a)){if(r=l.get(a).anchor){var v=r.position;r=v.row;v=v.column;this.replace({start:{row:r,column:v},end:{row:r,column:v+1}},[],!0,g);this.replace}l.delete(a)}return cc._get(Object.getPrototypeOf(m.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,g){var l=this;if(g)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));
else if(g=this.displacingMorphMap.get(a))this._displacing=!0,g.forEach(function(r){return l.removeMorph(r)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var g=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(a),r=this.computeDisplacementRectsFor(a).values(),v=[];l.forEach(function(H){return g.removeMorph(H,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);r=$jscomp.makeIterator(r);
for(var y=r.next();!y.done;y=r.next()){y=y.value;var A=l.shift()||Fd.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),E=this.textLayout.textPositionFromPoint(this,y.leftCenter());A.setBounds(y);this.insertText([A,{}],E);this.viewState._needsFit=!1;if(F==A.top)A.remove();else{var F=A.top;v.push(A)}}l.forEach(function(H){return g.removeMorph(H,!1)});this.displacingMorphMap.set(a,v);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var g=this.textLayout,l=g.textPositionFromPoint(this,
a.topLeft),r=g.textPositionFromPoint(this,a.bottomLeft),v=[];a._displacementRange=Fd.Range.fromPositions(l,r);for(l=l.row;l<r.row+1;l++)v.push.apply(v,$jscomp.arrayFromIterable(g.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(r=this._intersectionShapeCache.get(a))||(r=a.isPath?Fd.Shapes.path(Fd.getSvgVertices(a.vertices)):"Ellipse"==Fd.getClassName(a)?Fd.Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Fd.Shapes.rectangle(a.left,a.top,
a.width,a.height));this._intersectionShapeCache.set(a,r);a=this.width;l=new Map;v=$jscomp.makeIterator(v);for(var y=v.next();!y.done;y=v.next()){y=y.value;var A=g.computeMaxBoundsForLineSelection(this,y),E=A.height;A=A.y;var F=Fd.Shapes.rectangle(a,E,0,A);F=Fd.Intersection.intersect(F,r);1>F.points.length||(F=Fd.Rectangle.unionPts(F.points.map(Fd.Point.fromLiteral)),F.y=A,F.height=E,F.x-=15,F.width+=30,l.set(y,F))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",
value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var g=a,l=g.column,r=g.row;a=new Fd.Anchor(g.id,"number"===typeof r&&"number"===typeof l?{row:r,column:l}:void 0,g.insertBehavior||"move")}if(g=a.id&&this.anchors.find(function(v){return v.id===a.id}))return Object.assign(g,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var g=this.anchors,l,r=g.length;r--;){var v=g[r];if(v.id==a||v===a)l=v,g.splice(r,1)}return l}},{key:"addMarker",
value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var g="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(l){return l.id!==g});this.makeDirty()}},{key:"saveMark",value:function(a,g){a=void 0===a?this.cursorPosition:a;var l=this.activeMark;l&&l!==a&&!l.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(l));g?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",
value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=Fd.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||Fd.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var g=this.selection,l=this.savedMarks,r=this.multiSelect?this.multiSelect.getAllRanges().length:1;
r=l.length-(r-(g.index||0));g=l[r]||g.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=l.slice(0,r).concat(a).concat(l.slice(r+1)));return g}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=null;Fd.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},
{key:"pluginCollect",value:function(a,g){g=void 0===g?[]:g;this.plugins.forEach(function(l){return"function"===typeof l[a]&&(g=l[a](g))});return g}},{key:"pluginInvokeFirst",value:function(a,g){for(var l=[],r=1;r<arguments.length;++r)l[r-1]=arguments[r];return(r=this.pluginFind(function(v){return"function"===typeof v[a]}))?r[a].apply(r,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},
{key:"lookupEditorPluginNamed",value:function(a){var g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a=Fd.config.ide.modes.aliases[a]||a,l=(g=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",y.yield(lively.modules.doesModuleExist(l),2);if(3!=y.nextAddress)return y.yieldResult?y.yield(lively.modules.module(l).load(),3):y.return(null);r=y.yieldResult;v=r.default;return y.return(v)})}},{key:"changeEditorMode",value:function(a){var g=this,
l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l=g.plugins.filter(function(y){return!y.isEditorPlugin}),a?"string"!==typeof a?v.jumpTo(2):v.yield(g.lookupEditorPluginNamed(a),3):(g.plugins=l,v.return(null));if(2!=v.nextAddress){r=v.yieldResult;if(!r)throw Error("Cannot find editor mode "+a);a=new r(Fd.config.codeEditor.defaultTheme);g.evalEnvironment&&(a.evalEnvironment=g.evalEnvironment)}g.plugins=l.concat(a);return v.return(a)})}},{key:"invalidateTextLayout",
value:function(a,g){g=void 0===g?!1:g;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===a?0:a)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,g))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(cc._get(Object.getPrototypeOf(m.prototype),
"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Fd.commands))}},{key:"execCommand",value:function(a,g,l,r){function v(W){(A.hasOwnProperty("scrollCursorIntoView")?A.scrollCursorIntoView:1)&&Fd.fun.debounceNamed("execCommand-scrollCursorIntoView-"+W.id,100,function(){return W.scrollCursorIntoView()})()}var y=this,A=(this.lookupCommand(a)||{}).command;if(A){var E=this.inMultiSelectMode(),F=A.hasOwnProperty("multiSelectAction")?
A.multiSelectAction:"forEach";if(E&&"forEach"===F){var H=this.selection;E=this.selection.selections.slice().reverse();this.selection=E[0];this._multiSelection=H;try{var I=this.execCommand(a,g,l,r)}catch(W){throw this.selection=H,this._multiSelection=null,this.selection.mergeSelections(),W;}if(!I)return I;var M=[I];if("function"===typeof I.then&&"function"===typeof I.catch)return Fd.promise.finally(Fd.promise.chain([function(){return I}].concat(E.slice(1).map(function(W){return function(){y.selection=
W;return Promise.resolve(y.execCommand(a,g,l,r)).then(function(ea){return M.push(ea)})}}))).then(function(){return M}),function(){y.selection=H;y._multiSelection=null;y.selection.mergeSelections()});try{for(var N=$jscomp.makeIterator(E.slice(1)),X=N.next();!X.done;X=N.next())this.selection=X.value,M.push(this.execCommand(a,g,l,r))}finally{this.selection=H,this._multiSelection=null,this.selection.mergeSelections()}return M}(I=this.commandHandler.exec(a,this,g,l,r))&&("function"===typeof I.then&&"function"===
typeof I.catch?I.then(function(){return v(y)}):v(this));return I}}},{key:"changeDocument",value:function(a,g){g=void 0===g?!1:g;if(this.document)var l=this.defaultTextStyle;else g=!1;this.document=a;this.textLayout.reset();g&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g,g+1)}},{key:"charLeft",
value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g-1,g)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,
a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var g=this.getLine(a.row);return a.column===
g.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,g){a=void 0===a?this.cursorPosition.row:
a;g=void 0===g?!0:g;"number"!==typeof a&&this.cursorPosition.row;var l=this.getLine(a);a={start:{column:0,row:a},end:{column:l.length,row:a}};l=l.match(/^\s*/);l[0].length&&g&&(a.start.column+=l[0].length);return new Fd.Range(a)}},{key:"screenLineRange",value:function(a,g){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===g?!0:g)}},{key:"insertTextAndSelect",value:function(a,g){g=void 0===g?null:g;a=String(a);g?this.selection.range=this.insertText(a,g):this.selection.text=
a}},{key:"append",value:function(a){var g=this;return this.saveExcursion(function(){return g.insertText(a,g.documentEndPosition)})}},{key:"insertText",value:function(a,g,l,r){g=void 0===g?this.cursorPosition:g;return this.replace({start:g,end:g},a,void 0===l?!0:l,void 0===r?!0:r)}},{key:"deleteText",value:function(a,g){g=void 0===g?!0:g;var l=this.textAndAttributesInRange(a);this.replace(a,[],!1,g);return l}},{key:"replace",value:function(a,g,l,r,v,y){var A=this;l=void 0===l?!0:l;r=void 0===r?!0:
r;v=void 0===v?!0:v;y=void 0===y?!0:y;a=a.isRange?a:new Fd.Range(a);var E="string"===typeof g?[g,null]:Array.isArray(g)?g:[String(g||""),null];g=!E.length||2==E.length&&!E[0];var F=a.isEmpty();if(g&&F)return a;var H;l&&(H=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var I=[];for(l=0;l<E.length;l+=2)g=E[l],F=E[l+1],g.isMorph&&I.push(g),H&&(E[l+1]=Object.assign({},H,{},F));v&&this.undoManager.undoStart(this,"replace");var M=this.textAndAttributesInRange(a),N=
this.document.replace(a,E,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,E],undo:{target:this,selector:"replace",args:[N,M,!1]}},function(){r&&(A.invalidateTextLayout(!1,!1),A.textLayout.resetLineCharBoundsCacheOfRange(A,N));if(!Fd.eqPosition(a.end,N.end)){if(Fd.lessPosition(N.end,a.end)){var X=$jscomp.makeIterator((new Fd.Range(a)).subtract(N)).next().value;A.anchors.forEach(function(ea){return ea.onDelete(X)})}else{var W=
$jscomp.makeIterator((new Fd.Range(N)).subtract(a)).next().value;A.anchors.forEach(function(ea){return ea.onInsert(W)})}A._multiSelection?A._multiSelection.updateFromAnchors():A.selection.updateFromAnchors()}A._updateEmbeddedMorphsDuringReplace(I,N,E,M);A._isDeserializing&&A._initializedByCachedBounds||A.textLayout.estimateLineHeights(A,!1);y&&A.consistencyCheck()});v&&this.undoManager.undoStop();return N}},{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,g,l,r){for(var v=this.embeddedMorphMap,
y=0;y<r.length;y+=2){var A=r[y];if(A.isMorph&&!a.includes(A)){if(v){var E=v.get(A);E&&E.anchor&&(this.removeAnchor(E.anchor),Fd.disconnect(E.anchor,"position",A,"position"));v.set(A,Object.assign({},E,{anchor:null}))}A.remove()}}if(a.length)for(l=Fd.textAndAttributesWithSubRanges(g.start,l),g=l.ranges,l=l.textAndAttributes,r=0;r<g.length;r++)y=l[2*r],y.isMorph&&(console.assert(a.includes(y),"????"),A=g[r].start,y.owner!==this&&this.addMorph(y),v&&(v.has(y)?v.get(y).anchor.position=A:(A=this.addAnchor(Object.assign({id:"embedded-"+
y.id},A)),Fd.connect(A,"position",y,"position",{updater:function(F,H){var I=this.targetObj.owner,M=this.targetObj;H=I&&I.isText?I.charBoundsFromTextPosition(H).topLeft().subPt(I.origin):M.position;I&&(I._positioningSubmorph=M);F(H);I&&(I._positioningSubmorph=!1)}}).update(A.position),v.set(y,{anchor:A}))))}},{key:"applyJsDiffPatch",value:function(a){function g(F,H,I,M){var N=r.indexToPosition(F+I),X=r.indexToPosition(H+I);M.push(r.deleteText({start:N,end:X}));return I-(H-F)}function l(F,H,I,M){M.push(r.insertText(H,
r.indexToPosition(F+I)));return I}var r=this,v=[],y=0,A=0;a=$jscomp.makeIterator(a);for(var E=a.next();!E.done;E=a.next())E=E.value,E.removed?A=g(y,y+E.count,A,v):E.added&&(A=l(y,E.value,A,v)),y+=E.count;return v}},{key:"applyTextChanges",value:function(a,g,l,r){g=void 0===g?0:g;l=void 0===l?!0:l;var v=[];a=$jscomp.makeIterator(a);for(var y=a.next();!y.done;y=a.next()){var A=$jscomp.makeIterator(y.value);y=A.next().value;var E=A.next().value;A=A.next().value;g&&(E="number"===typeof E?E:this.positionToIndex(E),
A&&"string"!==typeof A&&!Array.isArray(A)&&(A=("number"===typeof A?A:this.positionToIndex(A))+g),E+=g);E="number"===typeof E?this.indexToPosition(E):E;switch(y){case "delete":case "remove":y="number"===typeof A?this.indexToPosition(A):A;v.push(this.deleteText({start:E,end:y},r));break;case "insert":v.push(this.insertText(A,E,l,r));break;default:console.warn("[applyTextChanges] unknown type: "+y)}}return v}},{key:"modifyLines",value:function(a,g,l){var r=this;l=Fd.arr.range(a,g).map(function(v){return r.getLine(v)}).map(l).join("\n")+
"\n";this.deleteText({start:{row:a,column:0},end:{row:g+1,column:0}},!1);this.insertText(l,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var g=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(g.start.row,g.end.row,a)}},{key:"withLinesDo",value:function(a,g,l){var r=this;return Fd.arr.range(a,g).map(function(v){var y=r.getLine(v);v=Fd.Range.create(v,0,v,y.length);return l(y,v)})}},{key:"withSelectedLinesDo",value:function(a){var g=this.selection.isEmpty()?
this.lineRange(void 0,!1):this.selection.range,l=g.start.row;g=g.end;var r=g.row;return this.withLinesDo(l,0===g.column&&r>l?r-1:r,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var g=this.getLine(a),l=this.getLine(a+1);l=g+l.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,row:a+2}},l,!0);return{row:a,column:g.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",
value:function(a,g){var l=this;a=void 0===a?this.selection.range:a;g=Object.assign({time:1E3,fill:Fd.Color.orange},g);var r=g.id||"flash"+Fd.string.newUUID();this.addMarker({id:r,range:a,style:{"background-color":g.fill.toCSSString(),"pointer-events":"none"}});Fd.fun.debounceNamed("flash-"+r,g.time,function(){return l.removeMarker(r)})()}},{key:"addTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var r={start:g.start,end:g.end};this.undoManager.undoStart(this,"addTextAttribute");
this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,r],undo:{target:this,selector:"removeTextAttribute",args:[a,r]}},function(){l.document.mixinTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var r={start:g.start,end:g.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",
args:[a,r],undo:{target:this,selector:"addTextAttribute",args:[a,r]}},function(){l.document.mixoutTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var g=0;g<a.length;)this.onAttributesChanged(a[g]),g+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",
value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var g=this.textLayout;g&&g.resetLineCharBoundsCacheOfRange(this,
a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(g,l){return 0!=l%2}).reduce(function(g,l){for(var r in l){var v=l[r];if(!g.hasOwnProperty(r)||void 0!==v&&null!==v)g[r]=v}return g},{})}},{key:"setStyleInRange",value:function(a,g){var l=this;g=void 0===g?this.selection:g;for(var r=
this.textAndAttributesInRange(g),v={start:Object.assign({},g.start),end:Object.assign({},g.start)},y=[],A=0;A<r.length;A+=2){var E=r[A],F=r[A+1],H=-1;"string"!==typeof E&&(E=Fd.objectReplacementChar);for(;-1<(H=E.indexOf("\n"));)0<H&&(v.end.column+=H,y.push(v,F)),v={row:v.end.row+1,column:0},v={start:v,end:Object.assign({},v)},E=E.slice(H+1);v.end.column+=E.length;y.push(v,F);v={start:Object.assign({},v.end),end:Object.assign({},v.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,
selector:"setStyleInRange",args:[a,g],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[y]}},function(){l.document.setTextAttribute(a,g);l.consistencyCheck();l.onAttributesChanged(g)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;for(var g=this.document.textAndAttributesInRange(a),l={},r=0;r<g.length;r+=2)Object.assign(l,g[r+1]);this.removeTextAttribute(l,a)}},{key:"changeStyleProperty",value:function(a,g,l){var r=this;l=
void 0===l?this.selection:l;l=this.getStyleInRange(l)[a];var v=g(l);this.selections.forEach(function(y){var A={};return r.addTextAttribute((A[a]=v,A),y)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(g){var l=a.charBoundsFromTextPosition(g.start),r=a.charBoundsFromTextPosition(g.end);return g.start.row===g.end.row?l.union(r):Fd.rect(Fd.pt(a.padding.left(),
l.top()),Fd.pt(a.width-a.padding.left(),r.bottom()))}).reduce(function(g,l){return l.union(g)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Fd.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",
value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,g,l,r,v){function y(H,I){H=H.slice();H.push({x:Fd.arr.last(H).x+Fd.arr.last(H).width});for(var M=0,N=Infinity,X=0;X<H.length;X++){var W=Math.abs(H[X].x-I);W<N&&(N=W,M=X)}return M}a=void 0===a?1:a;g=void 0===g?this.cursorPosition:
g;l=void 0===l?!1:l;if(0===a)return g;"number"===typeof v&&(v-=this.padding.left());var A=g.row,E=g.column;if(l&&this.lineWrapping){A=this.textLayout.rangesOfWrappedLine(this,g.row);if(!A.length)return g;E=A.length-1-A.slice().reverse().findIndex(function(H){return H.start.column<=g.column});if(1<=a){var F=0===E?0>=g.row?null:Fd.arr.last(this.textLayout.rangesOfWrappedLine(this,g.row-1)):A[E-1];if(!F)return g}else if(-1>=a&&(F=(A.length-1===E?g.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,
g.row+1):A.slice(E+1))[0],!F))return g;A=F.start.row;E=this.textLayout.charBoundsOfRow(this,A).slice(F.start.column,F.end.column+1);E=F.start.column+y(E,v)}else A=Math.min(Math.max(0,g.row-a),this.lineCount()-1),"number"===typeof v&&(F=this.textLayout.charBoundsOfRow(this,A),E=y(F,v));F={row:A,column:E};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),F,l,r,v):F}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",
value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===g?!1:g);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,g=a.start;return a.text||this.getLine(g.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,g,l){a=void 0===a?this.selection.range:a;
g=void 0===g?Fd.pt(0,0):g;l=void 0===l?!0:l;var r=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-r;this.scroll=a<this.height||!1===l?this.scroll.withY(r+a/2-this.height/2).addPt(g):this.scroll.withY(r).addPt(g)}},{key:"centerRow",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?Fd.pt(0,0):g;return this.alignRowAtTop(a,g.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;
g=void 0===g?Fd.pt(0,0):g;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(g)}},{key:"alignRowAtBottom",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?Fd.pt(0,0):g;var l=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,g.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(a,g){g=void 0===g?Fd.pt(0,0):g;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);
a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(Fd.pt(-20,0)));var r=20<l.bottom()-a.bottom()?"bottomLeft":"topLeft";l=a[r]().subPt(l.translateForInclusion(a)[r]()).addPt(g);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(g),this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,g){var l=this;g=void 0===g?this.cursorPosition:g;var r=this.scroll;g=this.selection.lead;var v=this.charBoundsFromTextPosition(g).y-
r.y;r=!1;var y=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(g).y-v)};try{var A=a();r=A&&A instanceof Promise}finally{!r&&y()}r&&Fd.promise.finally(A,y);return A}},{key:"saveExcursion",value:function(a,g){var l=this;g=Object.assign({useAnchors:!1},g);var r=this.selection.isMultiSelection?this.selection.selections.map(function(E){return E.directedRange}):[this.selection],v=g.useAnchors?r.map(function(E){var F=E.end;return[l.addAnchor(Object.assign({},E.start,{id:"save-excursion-"+
Fd.string.newUUID()})),l.addAnchor(Object.assign({},F,{id:"save-excursion-"+Fd.string.newUUID()}))]}):null,y=!1;g=g.useAnchors?function(){var E=v.map(function(F){var H=$jscomp.makeIterator(F);F=H.next().value.position;H=H.next().value.position;return{start:F,end:H}});l.selections=E;v.forEach(function(F){var H=$jscomp.makeIterator(F);F=H.next().value;H=H.next().value;l.removeAnchor(F);l.removeAnchor(H)})}:function(){return l.selections=r};try{var A=this.keepPosAtSameScrollOffsetWhile(a);y=A&&A instanceof
Promise}finally{!y&&g()}y&&Fd.promise.finally(A,g);return A}},{key:"alignRow",value:function(a,g){g=void 0===g?"center":g;if(this.isClip()){var l=this.scroll,r=this.padding;l=this.innerBounds().insetByRect(r).translatedBy(l);a=this.charBoundsFromTextPosition({row:a,column:0});if(g="top"===g||"bottom"===g?l[g]()-a[g]():"center"===g?l[g]().y-a[g]().y:0)this.scroll=this.scroll.addXY(0,-g)}}},{key:"fit",value:function(){var a=this,g=this.viewState,l=this.fixedWidth,r=this.fixedHeight;g._needsFit=!1;if(r&&
l||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var v=this.textBounds().outsetByRect(this.padding),y=function(){r||a.height==v.height||(a.height=v.height);l||a.width==v.width||(a.width=v.width);a.embeddedMorphs.forEach(function(A){A=a.embeddedMorphMap.get(A).anchor;A.position=A.position})};g._needsFit=!1;this.document.lines.find(function(A){return A.hasEstimatedExtent})?this.whenRendered().then(y):y();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&
this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var g=this.screenLineRange(a,!0).start.column;return a.column-g}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,
a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();cc._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,
a)}},{key:"directRender",value:function(){var a=this.env.renderer,g=this.textRenderer;a&&g&&!a._stopped&&(Fd.renderSubTree(this,a),g.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var g=a.state;if(g.clickedOnMorph===this){g=(g.clickCount-1)%3+1;var l=this.localize(a.position),r=this.textPositionFromPoint(l);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,
l);this.selectable&&(a.isShiftDown()?this.selection.lead=r:a.isAltDown()?this.selection.addRange(Fd.Range.at(r)):(this.selection.disableMultiSelect(),1===g?a.isShiftDown()?this.selection.lead=r:this.selection={start:r,end:r}:2===g?this.execCommand("select word",null,1,a):3===g&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var g="lively://text-doit/"+this.id;lively.modules.module(g);return{context:a.context||
this,format:"esm",targetModule:g}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,g){var l=this;g=(g=this.textAttributeAtPoint(g)||[],g.doit);if(!g||!g.code)return!1;var r=this.evalEnvForDoit(g),v=lively.modules.module(r.targetModule);v.recorder.evt=a;lively.vm.runEval(g.code,r).catch(function(y){return l.world().logError(Error("Error in text doit: "+y.stack))}).then(function(){return v.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&
a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,g){function l(F){return"\t"===F||" "===F}function r(F,H,I,M,N){for(var X=1;(0>N?0<=M-1:M+1<F.length)&&(M+=N,F[M]==H&&H!=I&&X++,F[M]==I&&X--,0!=X););return M}function v(F,H,I,M){for(var N=H;0>I?0<=N-1:N+1<F.length;)if(N+=I,F[N]==M)return 0<I?[H,N]:[N+1,H];return 0<I?[H+1,F.length-1]:[0,H]}if(!a)return g;if(0==g||g==a.length)return[0,a.length-1];
var y=g-1;if(0<g){if("\n"==a[g-1]||"\r"==a[g-1])return v(a,g,1,a[g-1]);var A="*({[<'\"`".indexOf(a[g-1]);"*"==a[g-1]&&(0>g-2||"/"!=a[g-2])&&(A=-1);if(0<=A)return y=r(a,"*({[<'\"`"[A],"*)}]>'\"`"[A],g-1,1),[g,y-1]}if(g<a.length){if("\n"==a[g]||"\r"==a[g])return v(a,g,-1,a[g]);A="*)}]>'\"`".indexOf(a[g]);"*"==a[g]&&(g+1>=a.length||"/"!=a[g+1])&&(A=-1);if(0<=A)return g=r(a,"*)}]>'\"`"[A],"*({[<'\"`"[A],g,-1),[g+1,y]}if("/"===a[g-1]&&"/"===a[g-2]){for(;y+1<a.length&&"\n"!==a[y+1]&&"\r"!==a[y+1];)y++;
return[g,y]}A=g;for(var E=y;0<=A-1&&l(a[A-1]);)A--;for(;E<a.length&&l(a[E+1]);)E++;if(1<=E-A)return[A,E];for(A=g<a.length?a[g]:"";0<=g-1&&((a[g-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[g-1]?0:0<="0123456789".indexOf(A)));)A=a[g-1],g--;for(;y+1<a.length&&((a[y+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[y+1]?0:0<="0123456789".indexOf(A)));)A=a[y+1],y++;return[g,y]}},{key:"onContextMenu",value:function(a){var g=this;if(a.targetMorph===this){a.stop();var l=this.textPositionFromPoint(this.localize(a.position)),
r=this.selection.selections||[this.selection];if(this.selection.isEmpty()||r.every(function(v){return!v.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(v){return g.openMenu(v,a)}).catch(function(v){return $world.logError(v)})}}},{key:"onDrop",value:function(a){var g=a.hand.grabbedMorphs.filter(function(r){return r.isLayoutable});cc._get(Object.getPrototypeOf(m.prototype),"onDrop",this).call(this,a);if(g[0]){var l=this.textPositionFromPoint(this.localize(a.hand.globalPosition));
this.insertText([g[0],null],l);g[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var g=this;if(a.simpleDrop)return null;var l=this.whatsVisible,r=l.startRow;l=Math.min(this.documentEndPosition.row,l.endRow);var v=this.document,y=this.padding.left(),A=this.padding.top();r=Fd.arr.range(r,l).reduce(function(E,F){var H=g.textLayout.charBoundsOfRow(g,F).slice();1<=H.length&&0==Fd.arr.last(H).width&&(Fd.arr.last(H).width=12);if(1<H.length){var I=Fd.arr.last(H);H.push({x:I.x+
I.width,y:I.y,height:I.height,width:I.width||12})}H=H.map(function(M,N){M=Fd.Rectangle.fromLiteral(M).translatedBy(Fd.pt(y,A+v.computeVerticalOffsetOf(F)));var X=g.getGlobalTransform().transformRectToRect(M);return{textPos:{row:F,column:N},bounds:M,globalBounds:X,morph:a.showDropGrid?Fd.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:M,border:{width:1,color:Fd.Color.green},fill:null}):null}});return E.concat(H)},[]);r.forEach(function(E){return E.morph&&g.addMorph(E.morph)});return r}},{key:"onDropHoverIn",
value:function(a){var g={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},l=a.hand.grabbedMorphs[0];l&&(a.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(g);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var r=a.get(this);r||(r={},a.set(this,r));r.config=g;r.dropGrid=l}},{key:"onDropHoverUpdate",
value:function(a){var g=a.hand.grabbedMorphs[0];if(g){var l=a.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var r=l.config;a=a.positionIn(this);for(var v,y,A=Infinity,E=$jscomp.makeIterator(l.dropGrid),F=E.next();!F.done;F=E.next()){F=F.value;if(F.bounds.containsPoint(a)){v=F;break}var H=F.bounds.closestPointToPt(a).dist(a);H<A&&(A=H,y=F)}v||(v=y);v&&(y=l.placeholder,y||(l.placeholder=y=Fd.morph({fill:g.fill,extent:g.extent,reactsToPointer:!1,acceptsDrops:!1})),Fd.obj.equals(y._textPos||{},
v.textPos)||(this!==y.owner&&this.addMorph(y),y.position=v.bounds.topLeft(),r&&r.useTextFlowPlaceholder&&(y.remove(),y._textPos=v.textPos,this.insertText([y,null],v.textPos))))}else g=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=g}}},{key:"onDropHoverOut",value:function(a){var g=a.hand.grabbedMorphs[0];g&&(g.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(g=a.get(this))a.delete(this),g.dropGrid&&(g.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),
g.dropGrid=null),g.placeholder&&(g.placeholder.remove(),g.placeholder=null)}},{key:"menuItems",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return g=$jscomp,l=g.makeIterator,A.yield(Promise.all([cc._get(Object.getPrototypeOf(m.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);r=l.call(g,A.yieldResult);v=r.next().value;y=r.next().value;return A.return(v.concat({isDivider:!0}).concat(y))})}},{key:"menuItemsForContextMenu",
value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:g=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},
{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},["run command",function(){a.focus();a.world().execCommand("run command")}]],l=$jscomp.makeIterator(a.plugins),r=l.next();case 2:if(r.done){y.jumpTo(4);break}v=r.value;if("function"!==typeof v.getMenuItems){y.jumpTo(3);break}return y.yield(v.getMenuItems(g),6);case 6:g=y.yieldResult;case 3:r=
l.next();y.jumpTo(2);break;case 4:return y.return(g)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat(a).concat(Fd.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){cc._set(Object.getPrototypeOf(m.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;
var a=cc._get(Object.getPrototypeOf(m.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onHoverOut",this).call(this,
a);Fd.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||(this.selection.cursorBlinkStart(),Fd.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){Fd.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;
this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!Fd.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,g){g=void 0===g?!1:g;if(this.isFocused()){a.stop();
var l=this.selection;try{for(var r=this.textAndAttributesInRange(this.selection.range),v=this.defaultTextStyle,y={},A=0;A<r.length;A+=2){var E=r[A];if(E.isMorph)if(E.isDisplacementMorph)r[A]="";else{var F=y[A]=Fd.serializeMorph(r[A]);r[A]=Fd.deserializeMorph(F,{reinitializeIds:!0})}}var H=Fd.extractHTMLFromTextMorph(this,r);a.domEvt.clipboardData.setData("text/html",H);for(var I in y)r[I]=y[I];var M=JSON.stringify({textAndAttributes:r,defaultTextStyle:v});a.domEvt.clipboardData.setData("application/x-lively-text",
M)}catch(N){$world.logError(N)}a.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:Fd.config.codeEditor.collapseSelection||!1,delete:g,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var g=this;if(!this.rejectsInput()){a.stop();var l="";try{l=a.domEvt.clipboardData.getData("text")}catch(A){console.warn(A)}if(!this.editorPlugin)try{var r=a.domEvt.clipboardData.getData("application/x-lively-text");var v=r&&JSON.parse(r);var y=
v.textAndAttributes;for(a=0;a<y.length;a+=2)"string"!==typeof y[a]&&(y[a]=Fd.deserializeMorph(y[a],{reinitializeIds:!0}))}catch(A){console.warn(A)}y=this.selection;y=y.isMultiSelection?y.selections:[y];v&&this.undoManager.group();y.forEach(function(A){v?g.replace(A.range,v.textAndAttributes,!1,!0,!0):A.text=l;g.saveMark(A.start);A.collapseToEnd()});v&&this.undoManager.group()}}},{key:"onFocus",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this.makeDirty();
this.selection.cursorBlinkStart();this._originalShadow||((a=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue)&&!a.equals&&(a=new Fd.ShadowObject(a)),a&&!a.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow),this.highlightWhenFocused&&this.animate({dropShadow:a,duration:200}))}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});
this._originalShadow=null;cc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(a=this.env.renderer.getNodeForMorph(this))&&Fd.signal(this,"viewChanged",{prop:"scroll",value:Fd.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",
value:function(){var a=this.padding,g=this.borderWidthBottom,l=this.borderWidthTop;return this.height-a.top()-a.bottom()-g-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var g=a=void 0===a?{direction:"up",select:!1}:a;a=g.direction;g=g.select;var l=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),r=this.cursorPosition.column,
v=this.padding;g?this.selection.lead={row:l,column:r}:this.cursorPosition={row:l,column:r};"down"===a?this.alignRowAtTop(l,Fd.pt(0,-v.top()-v.bottom())):(this.alignRowAtBottom(l,Fd.pt(0,0)),this.alignRowAtBottom(l,Fd.pt(0,v.top()+v.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;
a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var g=a-1;0<=g;g--)if(!this.isLineEmpty(g)){var l=g;break}if(void 0===l)return{start:{row:a,column:0},end:{row:a,column:0}}}else l=a;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(a){var g=this.isLineEmpty(a),l=this.documentEndPosition;if(g){for(g=a+1;g<=l.row;g++)if(!this.isLineEmpty(g)){var r=g;break}if(void 0===r)return{start:{row:a,column:0},
end:{row:a,column:0}}}else r=a;return this.paragraphRange(r)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,column:0},end:{row:a,column:0}};var g=this.documentEndPosition;for(a+=1;a<=g.row;a++)if(this.isLineEmpty(a)){var l={row:a-1,column:this.getLine(a-1).length};break}l||(l=g);for(a=l.row-1;0<=a;a--)if(this.isLineEmpty(a)){var r={row:a+1,column:0};break}r||(r={row:0,column:0});return{start:r,end:l}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),
end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",value:function(a){function g(A,E){for(var F="",H=0;H<A.length;H+=2)F+="string"===typeof A[H]?A[H]:Fd.objectReplacementChar;A=r.parseIntoLines(F);return 1===A.length?Fd.Range.fromPositions(E,{row:E.row,column:E.column+A[0].length}):1<A.length?Fd.Range.fromPositions(E,{row:E.row+A.length-1,column:Fd.arr.last(A).length}):Fd.Range.at(E)}var l=Fd.Range.at(this.cursorPosition);
if(!a.length)return l;var r=this,v=a[0];l="replace"===v.selector?g(v.args[1],v.args[0].start):l;for(v=1;v<a.length;v++){var y=a[v];l="replace"===y.selector?l.merge(g(y.args[1],y.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Fd.UndoManager(function(g){return a.includes(g.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();
a&&(a=a.changes.slice().reverse().map(function(g){return g.undo}),this.selection=this.computeTextRangeForChanges(a))}},{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,g,l){g=void 0===g?"right":g;l=void 0===l?{}:l;var r=this["right"===g?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="right"===g?-1:0;return this.document.scanForward(a,function(A,E){if(A===
v){if(0===y)return"right"===g?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"findMatchingBackward",value:function(a,g,l){g=void 0===g?"right":g;l=void 0===l?{}:l;var r=this["right"===g?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="left"===g?-1:0;return this.document.scanBackward(a,function(A,E){if(A===v){if(0===y)return"right"===g?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"search",value:function(a,g){g=void 0===g?{start:this.cursorPosition,
backwards:!1,caseSensitive:!1}:g;return(new Fd.TextSearcher(this)).search(Object.assign({needle:a},g))}},{key:"searchForAll",value:function(a,g){g=void 0===g?{caseSensitive:!1}:g;return(new Fd.TextSearcher(this)).searchForAll(Object.assign({needle:a},g))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},
{key:"evalEnvironment",set:function(a){var g=this.editorPlugin;g&&(g.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,g){g=void 0===g?{}:g;g=void 0===g.time?Date.now():g.time;if(!(12E4<a.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(r){}l||(l=[]);if(!l.some(function(r){return"string"===typeof r?r===a:r.source===
a})){l.push({source:a,time:g});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(r){}}}}},{key:"doEval",value:function(a,g,l){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;l=void 0===l?this.textInRange(a):l;a=this.pluginFind(function(r){return r.isEditorPlugin&&"function"===typeof r.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);g&&g.logDoit&&this.logDoit(l,g);return a.runEval(l,
g)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,g=a.lead,l=g.row;g=g.column;var r=this.selectionOrLineString();if(a.isEmpty()){var v=r.indexOf("//");-1===v||g<v||0<v&&0<=":\"'".indexOf(r[v-1])?this.selectLine(l):a.range={start:{row:l,column:v+2},end:{row:l,column:r.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,
{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(g){for(var l=[],r=0;r<arguments.length;++r)l[r-0]=arguments[r];console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(g){console.log(g.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:g})},group:function(g){this.groups.push([]);this.logged=Fd.arr.last(this.groups);console.group(g)},groupEnd:function(g){console.groupEnd(g)},
steps:function(g){for(var l=[];g.length;){var r=Fd.arr.takeWhile(g,function(y){return!y.dump});g=g.slice(r.length);var v=(g.shift()||{}).dump;l.push({actions:r,dump:v})}return l},printToConsole:function(){var g=this;console.clear();this.groups.forEach(function(l){var r=g.steps(l);console.group(r.length);g.steps(l).forEach(function(v,y){v=v.actions;console.group("step "+(y+1));v.forEach(function(A){return console.log.apply(console,$jscomp.arrayFromIterable(A.args))});console.groupEnd("step "+(y+1))});
console.groupEnd(r.length)})},report:function(){var g=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress)return H.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),2);if(3!=H.nextAddress)return l=H.yieldResult,H.yield(System.import("lively.ide/diff/editor-plugin.js"),3);r=H.yieldResult;v=r.default;y=0;A="";E=[];F=0;g.groups.forEach(function(I,M){A+=">>> group "+(M+1)+"\n";F++;y++;var N=g.steps(I);N.forEach(function(X,W){var ea=
X.actions;X=X.dump;A+=Fd.string.indent(">>> step "+(W+1)," ",y)+"\n";F++;y++;ea.forEach(function(Aa){Aa=Fd.string.indent(Fd.string.formatFromArray(Aa.args.slice()).trim()," ",y);F+=Aa.split("\n").length;A+=Aa+"\n"});1<=W&&X&&N[W-1].dump&&(ea=new v,X=l.createPatch(String(W),N[W-1].dump,X),ea.tokenize(X),E.push.apply(E,$jscomp.arrayFromIterable(ea.styledRanges(F,y))),A+=X,F+=X.split("\n").length-1);A+=Fd.string.indent("<< step "+(W+1)," ",y)+"\n";F++;y--});A+="<<< group "+(M+1)+"\n";F++;y--});return H.return({report:A,
reportStyles:E})})},openReport:function(){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(g.report(),2);l=y.yieldResult;r=l.reportStyles;v=l.report;return y.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:v,rangesAndStyles:r}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(r){var a=
this.document;this.brokenDocument||(this.brokenDocument=a);var g=this.world()||$world;try{var l=new Fd.Document([]);l.textAndAttributes=a.textAndAttributes;this.changeDocument(l)}catch(v){g?g.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}g?g.logError(r):console.error(r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,g){return new Fd.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",
fontColor:Fd.Color.almostBlack,fontSize:11},g))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,g=this.defaultTextStyleProps,l={},r=0;r<g.length;r++){var v=g[r];l[v]=a[v].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;
var a=this.prototype.propertiesAndPropertySettings().properties,g=[],l;for(l in a)a[l].isDefaultTextStyleProp&&g.push(l);return this._defaultTextStyleProps=g}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],
initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],initialize:function(){this.textRenderer=new Fd.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],
scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,
after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Fd.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Fd.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Fd.config.text.useSoftTabs?
Fd.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Fd.config.text.tabWidth||2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,g=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&g&&this.owner&&(this._measuringTextBox=
!0,Fd.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,
set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:Fd.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?Fd.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",
a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:Fd.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (Fd.config.text.useMultiSelect?Fd.MultiSelection:Fd.Selection)(this);this.setProperty("selection",
a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var g=this;
this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(l){return g.selection.addRange(l)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},
value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var g=$jscomp.makeIterator(a[0]),l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&
this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Fd.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a=
{},g=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,r=0;r<g.length;r++){var v=g[r],y=this[v];y!==l[v]&&(a[v]=y)}return a}},nativeCursor:{defaultValue:"",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:Fd.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,
after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Fd.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Fd.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Fd.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light",
"lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,
isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle",
"viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var g=
this,l=Fd.arr.withoutAll(a,this.anchors);Fd.arr.withoutAll(this.anchors,a).forEach(function(r){return g.removeAnchor(r)});l.forEach(function(r){return g.addAnchor(r)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var g=this;a=a.map(function(r){return r.isAnchor?r:g.addAnchor(Object.assign({},r,{id:"saved-mark-"+Fd.string.newUUID()}))});var l=this.savedMarks.filter(function(r){return!a.includes(r)});a>Fd.config.text.markStackSize&&
l.push.apply(l,$jscomp.arrayFromIterable(a.splice(0,a.length-Fd.config.text.markStackSize)));l.map(function(r){return g.removeAnchor(r)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+Fd.string.newUUID()}));else{var g=this.activeMark;this.savedMarks.includes(g)||
this.removeAnchor(g)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var g=this,l=this.getProperty("plugins");Fd.arr.withoutAll(l,a).forEach(function(r){return r&&g.removePlugin(r)});a.forEach(function(r){return r&&g.addPlugin(r)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],e,{pathInPackage:function(){return"text/morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1305,end:113370})}(Fd.Morph));Fd.Text=Zt;Fd.Text=Zt;Fd.Text=Zt;var $qa=Object.freeze({__proto__:null,Text:Zt}),hi=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");hi.obj=Ag;hi.promise=ph;hi.arr=eg;hi.string=ti;hi.properties=xp;hi.Rectangle=Le;hi.Color=Hg;hi.signal=dm;
hi.vdom=WG;hi.Morph=Jl;hi.config=Cn;hi.defaultStyle=Rx;hi.defaultAttributes=rw;hi.Icon=Op;hi.Icons=vM;hi.splitTextAndAttributesIntoLines=wG;hi.h=hi.vdom.h;var $t=Ba("ay",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),m=e.hasOwnProperty("Label")&&"function"===typeof e.Label?e.Label:e.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var g=a=void 0===a?{}:a,l=g.fontMetric,r=g.position,v=g.rightCenter,y=g.leftCenter,A=g.topCenter,E=g.bottom,F=g.top,H=g.right,I=g.left,M=g.bottomCenter,N=g.bottomLeft,X=g.bottomRight,W=g.topRight,ea=g.topLeft,Aa=g.center;g=g.extent;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,hi.obj.dissoc(a,["fontMetric"]));l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==g&&(this.extent=g);void 0!==r&&(this.position=
r);void 0!==v&&(this.rightCenter=v);void 0!==y&&(this.leftCenter=y);void 0!==A&&(this.topCenter=A);void 0!==E&&(this.bottom=E);void 0!==F&&(this.top=F);void 0!==H&&(this.right=H);void 0!==I&&(this.left=I);void 0!==M&&(this.bottomCenter=M);void 0!==N&&(this.bottomLeft=N);void 0!==X&&(this.bottomRight=X);void 0!==W&&(this.topRight=W);void 0!==ea&&(this.topLeft=ea);void 0!==Aa&&(this.center=Aa)}},{key:"__additionally_serialize__",value:function(a,g,l,r){cc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",
this).call(this,a,g,l,r);this.fit();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,g,l){cc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=hi.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return hi.obj.select(this,
"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent();this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return hi.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var a=
this,g=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,r){if(r%2)return{fontFamily:l&&l.fontFamily||a.fontFamily,fontWeight:l&&l.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(l){return g.isFontSupported(l.fontFamily,l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(hi.promise.waitFor(5E3,function(){return a.allFontsLoaded()}))})}},
{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,g=$jscomp.makeIterator(this.textAndAttributes),l=g.next().value;g=g.next().value;var r=Object.assign({},this.textStyle,{},g);g=this.padding;a.isProportional(r.fontFamily)?(a=a.sizeFor(r,l),l=a.width,a=a.height):(r=a.sizeFor(r,"x"),a=r.height,l=l.length*r.width);return new hi.Rectangle(0,0,Math.ceil(g.left()+g.right()+l),Math.ceil(g.top()+g.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=
this._fontMetric||this.env.fontMetric,g=this.padding,l=this.textStyle,r=this.textAndAttributesOfLines,v=!a.isProportional(l.fontFamily),y=a.sizeFor(l,"x").height,A=0,E=0,F=0;F<r.length;F++){var H=r[F];if(H.length){for(var I=0,M=0,N=0;N<H.length;N+=2){var X=H[N],W=H[N+1]||{},ea=Object.assign({},l,{},W);v&&!W.fontFamily||!a.isProportional(ea.fontFamily)?(ea=a.sizeFor(ea,"x"),W=ea.height,M+=X.length*ea.width,I=Math.max(I,W)):(X=a.sizeFor(ea,X),W=X.height,M+=X.width,ea.paddingRight&&(M+=Number.parseInt(ea.paddingRight)),
ea.paddingLeft&&(M+=Number.parseInt(ea.paddingLeft)),I=Math.max(I,W))}A+=I;E=Math.max(E,M)}else A+=y}return new hi.Rectangle(0,0,Math.ceil(g.left()+g.right()+E),Math.ceil(g.top()+g.bottom()+A))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},
{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();cc._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var g=[],l=this.textAndAttributesOfLines.length,r=0;r<l;r++){for(var v=this.textAndAttributesOfLines[r],y=0;y<v.length;y+=2){var A=
v[y+1];g.push(this.renderChunk(v[y],A))}r<l-1&&g.push(hi.h("br"))}A=this.textStyle;var E=A.fontColor,F=A.fontSize;l=A.fontStyle;r=A.fontWeight;v=A.textShadow;y=A.textDecoration;var H=A.textStyleClasses,I=this.padding;A={fontFamily:A.fontFamily,fontSize:"number"===typeof F?F+"px":F,color:E?String(E):"transparent",position:"absolute",cursor:this.nativeCursor};E=hi.defaultAttributes(this,a);v&&(A.textShadow=v);"normal"!==r&&(A.fontWeight=r);"normal"!==l&&(A.fontStyle=l);"none"!==y&&(A.textDecoration=
y);H&&H.length&&(E.className=(E.className||"")+" "+H.join(" "));E.style=Object.assign({},hi.defaultStyle(this),{},A);return hi.h("div",E,[hi.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:I.left()+"px",paddingRight:I.right()+"px",paddingTop:I.top()+"px",paddingBottom:I.bottom()+"px",width:"calc(100% - "+I.left()+"px - "+I.right()+"px)"}},g),a.renderSubmorphs(this)])}},{key:"renderChunk",value:function(a,g){var l=g=g||{},r=l.backgroundColor,v=l.fontColor,y=l.fontFamily,A=l.fontStyle,
E=l.fontWeight,F=l.textShadow,H=l.textDecoration,I=l.textStyleClasses,M=l.textAlign,N=l.float,X=l.display,W=l.lineHeight,ea=l.opacity;l={};var Aa={style:l};N&&(l.float=N);X&&(l.display=X);r&&(l.backgroundColor=String(r));y&&(l.fontFamily=y);v&&(l.color=String(v));F&&(l.textShadow=F);"normal"!==E&&(l.fontWeight=E);"normal"!==A&&(l.fontStyle=A);"none"!==H&&(l.textDecoration=H);M&&(l.textAlign=M);W&&(l.lineHeight=W);ea&&(l.opacity=ea);I&&I.length&&(Aa.className=I.join(" "));r="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");
for(v=0;v<r.length;v++)y=r[v],g.hasOwnProperty(y)&&(A=g[y],l[y]="number"===typeof A?A+"px":A);return hi.h("span",Aa,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.textString=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=cc._get(Object.getPrototypeOf(m.prototype),
"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},{key:"properties",get:function(){return{fill:{defaultValue:hi.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return hi.properties.values(hi.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,
after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,g){return 0==g%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{get:function(){var a=
this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();hi.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,g=null;if(2<a.length){var l=$jscomp.makeIterator(a.slice(-2)),r=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&
(a=a.slice(0,-2),g=[r,l])}return{value:a,annotation:g}},set:function(a){var g=a.value;a=a.annotation;g||(g="");"string"===typeof g&&(g=[g,null]);Array.isArray(g)||(g=[String(g),null]);g=g.slice();if(a){"string"===typeof a&&(a=[a,null]);var l=a[1];l||(l=a[1]={});g.push.apply(g,$jscomp.arrayFromIterable(a));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||l.textStyleClasses.push("annotation")}this.textAndAttributes=g}},autofit:{defaultValue:!0,
set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:hi.Rectangle.inset(0),initialize:function(a){this.padding=a},set:function(a){a||(a=hi.Rectangle.inset(0));var g=this.padding;this.setProperty("padding","number"===typeof a?hi.Rectangle.inset(a):a);this.autofit&&!g.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:hi.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var g=
this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,set:function(a){var g=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=g&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:hi.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontWeight;this.setProperty("fontWeight",
a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},
{key:"icon",value:function(a,g){g=void 0===g?{prefix:"",suffix:""}:g;return hi.Icon.makeLabel(a,g)}}],e,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:490,end:17597})}(hi.Morph));hi.Label=$t;hi.Label=$t;hi.Label=$t;var ara=Object.freeze({__proto__:null,Label:$t}),Yl=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
Yl.arr=eg;Yl.obj=Ag;Yl.rect=Cl;Yl.ShadowObject=Os;Yl.morph=qa;var Lv=Ba("aW",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),m=e.hasOwnProperty("StyleSheet")&&"function"===typeof e.StyleSheet?e.StyleSheet:e.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){Yl.obj.isObject(a)&&!g&&(g=a,a=null);
this.rules=g;for(var l in g)g[l]=this.unwrapFoldedProps(g[l]);this.name=a}},{key:"copy",value:function(){var a={},g;for(g in this.rules)a[g]=Object.assign({},this.rules[g]);return new Yl.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(g){if(g in
a){var l=a[g];l||(l=0);a[g]=4==Yl.arr.intersect(Yl.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,g){this.rules[a]=this.unwrapFoldedProps(g);this.context.requestStyling()}},{key:"toggleRule",value:function(a,g){this.rules[a]._deactivated=!g;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a=
{},g;for(g in this.rules)a[g]={styleSheet:this,rule:g};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+Yl.obj.inspect(this.rules,{customPrinter:function(a,g,l){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&Yl.arr.all([a.top,a.left,a.right,a.bottom],function(r){return r&&Yl.obj.equals(r,a.top)})?l(a.top):a&&Yl.obj.keys(a).includes("_rev")?l(Yl.obj.dissoc(a,["_rev","_deactivated"])):g},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,g,l){var r=
this.rules[a];if(r._deactivated)return{};r=Yl.obj.dissoc(r,["_deactivated"]);return g.withMetaDo({styleSheetChange:!0},function(){if("layout"in r){var v=r.layout.copy();v.container=g;r.layout=v}"dropShadow"in r&&(r.dropShadow=new Yl.ShadowObject(r.dropShadow),r.dropShadow.morph=g);"padding"in r&&(r.padding=r.padding.isRect?r.padding:Yl.rect(r.padding,r.padding));v=Yl.obj.keys(r).filter(function(F){return!Yl.obj.equals(g[F],r[F])});v=Yl.obj.select(r,v);var y=g.propertiesAndPropertySettings().properties,
A={},E;for(E in r)A[E]=y[E]&&y[E].defaultValue||g[E];l?g.animate(Object.assign({},v,{duration:l.duration,easing:l.easing})):Object.assign(g,v);return A})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],e,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3712})}(void 0));Yl.StyleSheet=Lv;Yl.StyleSheet=Lv;Yl.StyleSheet=Lv;var Xg=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Xg.obj=Ag;Xg.arr=eg;Xg.num=Km;Xg.Rectangle=Le;Xg.rect=Cl;Xg.Color=Hg;Xg.pt=Ii;Xg.connect=Zk;Xg.noUpdate=Ef;Xg.signal=dm;Xg.disconnect=Dp;Xg.Text=Zt;Xg.Range=Xy;Xg.HTMLMorph=Uy;Xg.Icon=Op;Xg.morph=qa;var UV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=e.hasOwnProperty("InputLine")&&"function"===typeof e.InputLine?
e.InputLine:e.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Xg.connect(this,"textChange",this,"onInputChanged");Xg.connect(this,"selectionChange",this,"fixCursor")}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&
this.updatePlaceholder();return cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=
a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();cc._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",
value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=3,g.borderColor=Xg.Color.red,g._errorIcon=g.addMorph(g._errorIcon||Xg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Xg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Xg.Color.red,opacity:0,reactsToPointer:!1,fill:Xg.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=
1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Xg.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var g=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;
a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?g.rightCenter().addXY(0,this.borderWidth):g.leftCenter().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);
return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);this.clearOnInput&&this.clear();Xg.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){Xg.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new Xg.Range(a);
if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],cc._get(Object.getPrototypeOf(m.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var g=this.inputHistory,l=g.items;if(Xg.arr.last(l)!==a){l.push(a);l.length>g.max&&(g.items=l=l.slice(-g.max));g.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=g.items.length-1;l--;)g.items[l]===a&&(g.items.splice(l,1),g.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,
g)}}},{key:"browseHistory",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=a.inputHistory.items.map(function(A,E){return{isListItem:!0,string:A,value:E}}).reverse(),y.yield(a.world().filterableListPrompt("Choose item:",g,{commands:[a.histEditCommandForHistBrowse()]}),2);l=y.yieldResult;r=$jscomp.makeIterator(l.selected);v=r.next().value;"number"===typeof v&&a.setAndShowHistItem(v);a.focus();y.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",
value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(g){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=a.inputHistory.items.slice().reverse(),A.yield(g.world().editListPrompt("edit history "+a.historyId,l),2);r=A.yieldResult;v=r.status;y=r.list;if("canceled"===v)return A.return(!0);l=l.filter(function(E){return E.isListItem?y.includes(E.value):y.includes(E)});a.inputHistory=Object.assign({},a.inputHistory,{items:l});
g.get("list").items=l.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse();return A.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var g=this.inputHistory,l=g.items,r=l.length-1;Xg.num.between(a,0,r+1)?g.index=a:g.index=a=r;this.input!==l[a]&&"undefined"!==typeof l[a]&&(this.input=l[a])}},{key:"showHistItem",value:function(a){a=a||"next";var g=this.inputHistory,l=g.items,r=l.length-1,v=g.index;Xg.num.between(v,0,r+1)||(g.index=v=r);if(this.input!==l[v]&&"undefined"!==
typeof l[v])this.input=l[v];else{if("next"===a){if(v>r)return;v=++g.index}else{if(0>=v)return;v=--g.index}this.input=l[v]||""}}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",
exec:function(g){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=g.inputHistory,r=l.items.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse(),A.yield(g.world().filterableListPrompt("Choose items to delete:",r,{multiSelect:!0}),2);v=A.yieldResult;y=v.selected;Xg.arr.sort(y).reverse().forEach(function(E){E<l.index&&l.index--;l.items.splice(E,1)});g.inputHistory=l;return A.return(!0)})}}].concat(cc._get(Object.getPrototypeOf(m.prototype),
"commands",this))}},{key:"keybindings",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var g=
a.ownerDocument.createElement("input"),l=a.querySelector(".newtext-text-layer.actual");g.id=a.id;g.className=a.className;g.style=a.style.cssText;Object.assign(g.style,Xg.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));g.placeholder=this.placeholder;g.type="text";g.autocomplete=g.name=this.name.replace(/[\s"]/g,"-");return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===
typeof localStorage)return null;try{var g=localStorage.getItem("lively.morphic-inputline-"+a);return g?JSON.parse(g):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",value:function(a,g){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(g))}catch(l){console.error(l)}}},{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var g=this.histories.get(a);
if(g)return g;g=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,g);return g}},{key:"setHistory",value:function(a,g){g=void 0===g?{items:[],max:50,index:0}:g;this.histories.set(a,g);this.addHistoryToLocalStorage(a,g);return g}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},extent:{defaultValue:Xg.pt(100,20)},padding:{defaultValue:Xg.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},
historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var g=this;this.setProperty("label",a);this.textString.startsWith(a)||Xg.noUpdate(function(){g.textString=a+g.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label",
"defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var g=this.getSubmorphNamed("placeholder");a?g?(g.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Xg.Color.gray}),g.value=a):this.addMorph(Xg.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,fontColor:Xg.Color.gray}))):g&&g.remove();this.updatePlaceholder()}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14425})}(Xg.Text);UV=Xg.InputLine;var QH=Ba("b1",UV),Yy=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=e.hasOwnProperty("PasswordInputLine")&&"function"===typeof e.PasswordInputLine?e.PasswordInputLine:e.PasswordInputLine=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"onChange",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",
value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.whenRendered(),2);a.ensureInputNode().then(function(l){a.updateHtml(a.input);l.onkeydown=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,a,"onKeyDown")};l.onkeyup=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,
a,"onKeyUp")}});g.jumpToEnd()})}},{key:"onMouseDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var g=a.domNode;g.parentNode&&"INPUT"==g.parentNode.tagName&&(g.parentNode.remove(),g=a.env.renderer.getNodeForMorph(a),g.insertBefore(a.domNode,g.firstChild));
return a.domNode})}},{key:"onKeyDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=
this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=3,g.borderColor=Xg.Color.red,
g._errorIcon=g.addMorph(g._errorIcon||Xg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Xg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Xg.Color.red,opacity:0,reactsToPointer:!1,fill:Xg.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),
this._errorIcon=null,this.borderColor=Xg.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;Xg.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();Xg.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var g=this,l,r,v,y,A,E,F,H,I,M,N,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==W.nextAddress)return l=g,r=l.fontSize,v=l.fontFamily,y=l.padding,A=l.placeholder,E=void 0===l.fill?Hg.white:
l.fill,F=l.borderRadius,H=y.top(),I=y.right(),M=y.bottom(),N=y.left(),W.yield(g.ensureInputNode(),2);X=W.yieldResult;X.setAttribute("type","password");X.setAttribute("placeholder",A);X.setAttribute("value",a);Object.assign(X.style,{position:"absolute",width:"calc(100% - "+N+"px - "+I+"px)","border-width":0,outline:"none","border-radius":F.valueOf()+"px",background:E.toString(),padding:H+"px "+I+"px "+M+"px "+N+"px","font-size":r+"px","font-family":""+v});W.jumpToEnd()})}},{key:"commands",get:function(){var a=
this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(cc._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var g=a.ownerDocument,l=g.createElement("div"),r=a.querySelector("input");g=g.createElement("input");
r.childNodes[0]&&"INPUT"===r.childNodes[0].tagName&&(r=r.childNodes[0]);g.id=a.id;g.className=a.className;l.style=a.style.cssText;Object.assign(g.style,Xg.obj.select(r.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));g.style.position="absolute";g.style.width=a.style.width;g.style.height=a.style.height;g.style["border-width"]=a.style["border-width"];g.placeholder=this.placeholder;g.type="password";g.autocomplete=g.name=this.name.replace(/[\s"]/g,
"-");l.appendChild(g);l.appendChild(a.childNodes[1]);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Xg.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},
input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},
padding:{defaultValue:Xg.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14500,end:21428})}(Xg.HTMLMorph);Xg.PasswordInputLine=Yy;Xg.PasswordInputLine=Yy;Xg.PasswordInputLine=
Yy;Xg.default=UV;var ig=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");ig.default=Cn;ig.config=Cn;Object.assign(ig,tqa);Object.assign(ig,Vqa);Object.assign(ig,$qa);Object.assign(ig,ara);Object.assign(ig,Xqa);Object.assign(ig,Rqa);Object.assign(ig,ala);Object.assign(ig,H9);ig.StyleSheet=Lv;ig.StyleSheet=Lv;ig.ShadowObject=Os;ig.ShadowObject=Os;ig.addOrChangeCSSDeclaration=ms;ig.addOrChangeCSSDeclaration=ms;ig.addOrChangeLinkedCSS=tw;ig.addOrChangeLinkedCSS=tw;ig.easings=xr;ig.easings=
xr;ig.stringToEasing=Su;ig.stringToEasing=Su;Object.assign(ig,Sqa);ig.Icon=Op;ig.Icon=Op;ig.loadMorphFromSnapshot=Wu;ig.loadMorphFromSnapshot=Wu;Object.assign(ig,Tqa);ig.World=ty;ig.Hand=iE;ig.Morph=Jl;ig.Image=Ty;ig.Ellipse=DB;ig.Triangle=bE;ig.Path=EB;ig.Polygon=cE;ig.LineMorph=dE;ig.Text=Zt;ig.Label=$t;ig.HTMLMorph=Uy;ig.InputLine=QH;ig.PasswordInputLine=Yy;ig.InputLine=QH;ig.InputLine=QH;ig.PasswordInputLine=Yy;ig.PasswordInputLine=Yy;ig.locateClass=Ep;ig.morph=qa;ig.addClassMappings=sa;ig.inspect=
jB;ig.touchInputDevice=yr;ig.addClassMappings({default:ig.Morph,world:ig.World,hand:ig.Hand,image:ig.Image,ellipse:ig.Ellipse,triangle:ig.Triangle,path:ig.Path,text:ig.Text,input:ig.InputLine,label:ig.Label,polygon:ig.Polygon,line:ig.LineMorph,html:ig.HTMLMorph});ig.morph=qa;ig.morph=qa;ig.inspect=jB;ig.inspect=jB;ig.touchInputDevice=yr;ig.touchInputDevice=yr;var bra=Object.freeze({__proto__:null,config:Cn,StyleSheet:Lv,ShadowObject:Os,addOrChangeCSSDeclaration:ms,addOrChangeLinkedCSS:tw,easings:xr,
stringToEasing:Su,Icon:Op,loadMorphFromSnapshot:Wu,InputLine:QH,PasswordInputLine:Yy,morph:qa,inspect:jB,touchInputDevice:yr,Morph:Jl,Ellipse:DB,Triangle:bE,Image:Ty,PathPoint:DH,Path:EB,Polygon:cE,LineMorph:dE,World:ty,Hand:iE,Text:Zt,Label:$t,Anchor:jE,HTMLMorph:Uy,IFrameMorph:GH,MorphicEnv:Fs,CustomLayout:HH,SnapLayout:IH,VerticalLayout:Vy,HorizontalLayout:Kv,ProportionalLayout:JH,CenteredTilingLayout:KH,TilingLayout:LH,CellGroup:MH,LayoutColumn:NH,LayoutRow:OH,LayoutCell:PH,GridLayout:Wy,TooltipViewer:gE,
Tooltip:GB,MorphicDB:$w}),km=lively.FreezerRuntime.recorderFor("lively.components/canvas.js");km.pt=Ii;km.Point=Jg;km.rect=Cl;km.Color=Hg;km.Morph=Jl;km.Image=Ty;km.connect=Zk;var RH=Ba("aV",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/canvas.js"),m=e.hasOwnProperty("Canvas")&&"function"===typeof e.Canvas?e.Canvas:e.Canvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"context",
get:function(){if(this._canvas)return this._canvas.getContext(this.contextType);this.world()&&this.env.renderer.getNodeForMorph(this)||console.warn("Context not yet rendered. Please ensure that the Canvas Morph has been rendered first before accessing the context. This can be achieved by waiting for the whenRendered() promise before you proceed accessing the context property.");return null}},{key:"_canvas",set:function(a){var g=this.__canvas__;this.__canvas__=a;this.restoreContent(g,a)}},{key:"_canvas",
get:function(){return this.__canvas__}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);km.connect(this,"extent",this,"onExtentChanged")}},{key:"afterRender",value:function(a,g){g?this._canvas=a:"function"===typeof this.__canvas_init__&&(this.__canvas_init__(),delete this.__canvas_init__)}},{key:"restoreContent",value:function(a,g){var l=this.contextType,r=this.preserveContents;
"function"===typeof this.__canvas_init__?(this.__canvas_init__(),delete this.__canvas_init__):r&&"2d"==l&&a&&a!==g&&this.context.drawImage(a,0,0)}},{key:"onExtentChanged",value:function(){var a=this;if(this._canvas&&this.preserveContents&&this.context.getImageData){var g=this._canvas,l=this.context.getImageData(0,0,g.width,g.height);this.__canvas_init__=function(){a.context.putImageData(l,0,0)}}}},{key:"clear",value:function(a){var g=this.context;if(g){var l=this._canvas,r=l.width;l=l.height;g.save();
g.setTransform(1,0,0,1,0,0);a?(a.toCSSString&&(a=a.toCSSString()),g.fillStyle=a,g.fillRect(0,0,r,l)):g.clearRect(0,0,r,l);g.restore()}}},{key:"render",value:function(a){return a.renderCanvas(this)}},{key:"withContextDo",value:function(a){var g=this;this._canvas?a(this.context):this.__canvas_init__=function(){return a(g.context)}}},{key:"toDataURI",value:function(){return this._canvas&&this._canvas.toDataURL()}},{key:"fromDataURI",value:function(a){var g=this,l=new km.Image;l.onload=function(){g._canvas.width=
l.width;g._canvas.height=l.height;g.context.drawImage(l,0,0)};l.src=a}},{key:"imageData",value:function(a){a||(a=this.canvasBounds);return this.context.getImageData(a.x,a.y,a.width,a.height)}},{key:"nonTransparentArea",value:function(){for(var a=this.imageData(),g=a.data,l=a.width,r=a.height,v=l,y=r,A=0;A<r;A++)for(var E=0;E<v;E++)0<g[4*(A*l+E)+3]&&(v=E,y>A&&(y=A));if(v===l)return km.rect(0,0,0,0);A=v;E=y;for(--r;r>y;r--)for(var F=l-1;F>A;F--)0<g[4*(r*l+F)+3]&&(A=F,E<r&&(E=r));return{imageData:a,
bounds:km.rect(v,y,A-v+1,E-y+1)}}},{key:"trimNonTransparent",value:function(){var a=this.nonTransparentArea(),g=a.imageData;a=a.bounds;if(!a.topLeft().equals(km.pt(0,0))){var l=a.x,r=a.y;this.context.putImageData(g,-l,-r,l,r,a.width,a.height);this.position=this.position.addPt(a.topLeft())}a.extent().equals(this.extent)||(this.extent=a.extent())}},{key:"finishDraw",value:function(a){a=void 0===a?{}:a;var g=this.context,l=a,r=void 0===l.color?"rgba(0,0,0,0.6)":l.color,v=void 0===l.width?4:l.width;l=
void 0===l.fill?!1:l.fill;a=a.fillColor||r;r.toCSSString&&(r=r.toCSSString());a.toCSSString&&(a=a.toCSSString());g.strokeStyle=r;g.lineWidth=v;g.stroke();g.closePath();l&&(g.fillStyle=a,g.fill())}},{key:"line",value:function(a,g,l){l=void 0===l?{}:l;var r=this.context;r.beginPath();r.moveTo(a.x,a.y);r.lineTo(g.x,g.y);r.lineCap="round";this.finishDraw(l)}},{key:"arc",value:function(a,g,l,r,v,y){v=void 0===v?!1:v;y=void 0===y?{}:y;var A=this.context;A.beginPath();A.arc(a.x,a.y,g,l,r,v);this.finishDraw(y)}},
{key:"polygon",value:function(a,g){g=void 0===g?{}:g;var l=this.context;l.beginPath();l.moveTo(a[0].x,a[0].y);for(var r=0;r<a.length;r++)l.lineTo(a[r].x,a[r].y);l.lineTo(a[0].x,a[0].y);this.finishDraw(g)}},{key:"text",value:function(a,g,l){l=void 0===l?{}:l;var r=this.context,v=l,y=void 0===v.color?"black":v.color,A=void 0===v.font?"14px Arial":v.font,E=void 0===v.align?"start":v.align;v=void 0===v.baseline?"bottom":v.baseline;r.save();r.font=A;r.fillStyle=y;r.textAlign=E;r.textBaseline=v;l.angle&&
!isNaN(l.angle)&&(r.translate(g.x,g.y),r.rotate(l.angle),r.translate(-g.x,-g.y));r.fillText(a,g.x,g.y);r.restore()}},{key:"line",value:function(a,g,l){l=void 0===l?{}:l;var r=this.context,v=l.color||"rgba(0,0,0,0.6)";l=l.width||4;v.toCSSString&&(v=v.toCSSString());r.strokeStyle=v;r.beginPath();r.lineWidth=l;r.moveTo(a.x,a.y);r.lineTo(g.x,g.y);r.stroke();r.closePath()}},{key:"spiral",value:function(){this.clear(km.Color.white);for(var a=this.innerBounds().center(),g=0,l=1,r=0;150>r;r++){var v=a.addPt(km.Point.polar(l,
g));this.line(a,v,{color:km.Color.random()});a=v;g+=Math.PI/10;l+=.3}}},{key:"rect",value:function(a,g,l){l=void 0===l?{}:l;var r=this.context;r.beginPath();r.rect(a.x,a.y,g.x,g.y);this.finishDraw(l)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Canvas"}},{key:"properties",get:function(){return{extent:{defaultValue:km.pt(200,200)},fill:{defaultValue:km.Color.transparent},contextType:{defaultValue:"2d"},preserveContents:{defaultValue:!0},canvasExtent:{get:function(){return this._canvas&&
km.pt(this._canvas.width,this._canvas.height)}},canvasBounds:{readOnly:!0,get:function(){return this._canvas&&this.canvasExtent.extentAsRectangle()}},_serializedContents:{get:function(){return this.preserveContents&&this.toDataURI()},set:function(a){var g=this;this.withContextDo(function(){return g.fromDataURI(a)})}}}}}],e,{pathInPackage:function(){return"canvas.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:233,end:8671})}(km.Morph));km.Canvas=RH;km.Canvas=RH;km.Canvas=RH;var bx=lively.FreezerRuntime.recorderFor("Globe/index.js");bx.Canvas=RH;bx.promise=ph;bx.easings=xr;var M9=function(b){var e=lively.FreezerRuntime.recorderFor("Globe/index.js"),m=e.hasOwnProperty("Globe")&&"function"===typeof e.Globe?e.Globe:e.Globe=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:"fullyLoaded",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(g=a.get("webgl canvas"),l.yield(bx.promise.waitFor(5E3,function(){return g.firstFrameRendered}),2)):l.return(l.yieldResult)})}},{key:"onLoad",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return navigator.webdriver||!lively.FreezerRuntime?l.return():l.yield(a.whenRendered(),
2);case 2:return g=a.get("webgl canvas"),g.renderGlobe(),l.yield(a.fullyLoaded(),3);case 3:return l.yield(bx.promise.delay(500),4);case 4:a.get("cover").animate({opacity:0,easing:bx.easings.inOutCubic}),g.relayout(),l.jumpToEnd()}})}},{key:"beforePublish",value:function(){this.get("cover").opacity=1}},{key:"onExtentChanged",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"onExtentChanged",this).call(this);this.get("webgl canvas").extent=this.extent;this.get("cover").extent=this.extent}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Globe"}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"Globe",version:"0.1.1-26"}}},{start:169,end:918})}(bx.Canvas);M9=bx.Globe;bx.default=M9;var SH={},N9=!1,p="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jsa=function(){if(N9)return SH;
N9=!0;(function(b,e){"object"===typeof SH?e(SH):"function"===typeof define&&define.amd?define(["exports"],e):(b="undefined"!==typeof globalThis?globalThis:b||self,e(b.THREE={}))})(SH,function(b){function e(){}function m(u,z){for(var t=0;t<z.length;t++){var x=z[t];x.enumerable=x.enumerable||!1;x.configurable=!0;"value"in x&&(x.writable=!0);Object.defineProperty(u,x.key,x)}}function a(u,z,t){z&&m(u.prototype,z);t&&m(u,t);return u}function g(u,z){u.prototype=Object.create(z.prototype);u.prototype.constructor=
u;u.__proto__=z}function l(u){if(void 0===u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function r(u,z,t,x,C,G,L,S,V,Z){Object.defineProperty(this||p,"id",{value:cra++});(this||p).uuid=Xh.generateUUID();(this||p).name="";(this||p).image=void 0!==u?u:r.DEFAULT_IMAGE;(this||p).mipmaps=[];(this||p).mapping=void 0!==z?z:r.DEFAULT_MAPPING;(this||p).wrapS=void 0!==t?t:1001;(this||p).wrapT=void 0!==x?x:1001;(this||p).magFilter=void 0!==C?C:1006;(this||p).minFilter=
void 0!==G?G:1008;(this||p).anisotropy=void 0!==V?V:1;(this||p).format=void 0!==L?L:1023;(this||p).internalFormat=null;(this||p).type=void 0!==S?S:1009;(this||p).offset=new Xe(0,0);(this||p).repeat=new Xe(1,1);(this||p).center=new Xe(0,0);(this||p).rotation=0;(this||p).matrixAutoUpdate=!0;(this||p).matrix=new Up;(this||p).generateMipmaps=!0;(this||p).premultiplyAlpha=!1;(this||p).flipY=!0;(this||p).unpackAlignment=4;(this||p).encoding=void 0!==Z?Z:3E3;(this||p).version=0;(this||p).onUpdate=null}function v(u,
z,t){(this||p).width=u;(this||p).height=z;(this||p).scissor=new Rk(0,0,u,z);(this||p).scissorTest=!1;(this||p).viewport=new Rk(0,0,u,z);t=t||{};(this||p).texture=new r(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding);(this||p).texture.image={};(this||p).texture.image.width=u;(this||p).texture.image.height=z;(this||p).texture.generateMipmaps=void 0!==t.generateMipmaps?t.generateMipmaps:!1;(this||p).texture.minFilter=void 0!==t.minFilter?t.minFilter:
1006;(this||p).depthBuffer=void 0!==t.depthBuffer?t.depthBuffer:!0;(this||p).stencilBuffer=void 0!==t.stencilBuffer?t.stencilBuffer:!1;(this||p).depthTexture=void 0!==t.depthTexture?t.depthTexture:null}function y(u,z,t){v.call(this||p,u,z,t);(this||p).samples=4}function A(u,z,t,x,C){for(var G=0,L=u.length-3;G<=L;G+=3){JB.fromArray(u,G);var S=C.x*Math.abs(JB.x)+C.y*Math.abs(JB.y)+C.z*Math.abs(JB.z),V=z.dot(JB),Z=t.dot(JB),ja=x.dot(JB);if(Math.max(-Math.max(V,Z,ja),Math.min(V,Z,ja))>S)return!1}return!0}
function E(){Object.defineProperty(this||p,"id",{value:dra++});(this||p).uuid=Xh.generateUUID();(this||p).name="";(this||p).type="Object3D";(this||p).parent=null;(this||p).children=[];(this||p).up=E.DefaultUp.clone();var u=new nc,z=new QN,t=new mp,x=new nc(1,1,1);z._onChange(function(){t.setFromEuler(z,!1)});t._onChange(function(){z.setFromQuaternion(t,void 0,!1)});Object.defineProperties(this||p,{position:{configurable:!0,enumerable:!0,value:u},rotation:{configurable:!0,enumerable:!0,value:z},quaternion:{configurable:!0,
enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:x},modelViewMatrix:{value:new fj},normalMatrix:{value:new Up}});(this||p).matrix=new fj;(this||p).matrixWorld=new fj;(this||p).matrixAutoUpdate=E.DefaultMatrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=!1;(this||p).layers=new VV;(this||p).visible=!0;(this||p).castShadow=!1;(this||p).receiveShadow=!1;(this||p).frustumCulled=!0;(this||p).renderOrder=0;(this||p).userData={}}function F(u,z,t){0>t&&(t+=1);1<t&&--t;return t<1/6?u+6*(z-u)*
t:.5>t?z:t<2/3?u+6*(z-u)*(2/3-t):u}function H(u){return.04045>u?.0773993808*u:Math.pow(.9478672986*u+.0521327014,2.4)}function I(u){return.0031308>u?12.92*u:1.055*Math.pow(u,.41666)-.055}function M(){Object.defineProperty(this||p,"id",{value:era++});(this||p).uuid=Xh.generateUUID();(this||p).name="";(this||p).type="Material";(this||p).fog=!0;(this||p).blending=1;(this||p).side=0;(this||p).flatShading=!1;(this||p).vertexColors=!1;(this||p).opacity=1;(this||p).transparent=!1;(this||p).blendSrc=204;
(this||p).blendDst=205;(this||p).blendEquation=100;(this||p).blendSrcAlpha=null;(this||p).blendDstAlpha=null;(this||p).blendEquationAlpha=null;(this||p).depthFunc=3;(this||p).depthTest=!0;(this||p).depthWrite=!0;(this||p).stencilWriteMask=255;(this||p).stencilFunc=519;(this||p).stencilRef=0;(this||p).stencilFuncMask=255;(this||p).stencilFail=7680;(this||p).stencilZFail=7680;(this||p).stencilZPass=7680;(this||p).stencilWrite=!1;(this||p).clippingPlanes=null;(this||p).clipIntersection=!1;(this||p).clipShadows=
!1;(this||p).shadowSide=null;(this||p).colorWrite=!0;(this||p).precision=null;(this||p).polygonOffset=!1;(this||p).polygonOffsetFactor=0;(this||p).polygonOffsetUnits=0;(this||p).dithering=!1;(this||p).alphaTest=0;(this||p).premultipliedAlpha=!1;(this||p).visible=!0;(this||p).toneMapped=!0;(this||p).userData={};(this||p).version=0}function N(u){M.call(this||p);(this||p).type="MeshBasicMaterial";(this||p).color=new rg(16777215);(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=
1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;this.setValues(u)}function X(u,z,t){if(Array.isArray(u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
(this||p).name="";(this||p).array=u;(this||p).itemSize=z;(this||p).count=void 0!==u?u.length/z:0;(this||p).normalized=!0===t;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0}function W(u,z,t){X.call(this||p,new Int8Array(u),z,t)}function ea(u,z,t){X.call(this||p,new Uint8Array(u),z,t)}function Aa(u,z,t){X.call(this||p,new Uint8ClampedArray(u),z,t)}function Ka(u,z,t){X.call(this||p,new Int16Array(u),z,t)}function K(u,z,t){X.call(this||p,new Uint16Array(u),z,t)}function aa(u,
z,t){X.call(this||p,new Int32Array(u),z,t)}function T(u,z,t){X.call(this||p,new Uint32Array(u),z,t)}function U(u,z,t){X.call(this||p,new Float32Array(u),z,t)}function pa(u,z,t){X.call(this||p,new Float64Array(u),z,t)}function fa(u){if(0===u.length)return-Infinity;for(var z=u[0],t=1,x=u.length;t<x;++t)u[t]>z&&(z=u[t]);return z}function oa(){Object.defineProperty(this||p,"id",{value:fra+=2});(this||p).uuid=Xh.generateUUID();(this||p).name="";(this||p).type="BufferGeometry";(this||p).index=null;(this||
p).attributes={};(this||p).morphAttributes={};(this||p).morphTargetsRelative=!1;(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).drawRange={start:0,count:Infinity};(this||p).userData={}}function hb(u,z){E.call(this||p);(this||p).type="Mesh";(this||p).geometry=void 0!==u?u:new oa;(this||p).material=void 0!==z?z:new N;this.updateMorphTargets()}function Cb(u,z,t,x,C,G,L,S){if(null===(1===z.side?x.intersectTriangle(L,G,C,!0,S):x.intersectTriangle(C,G,L,2!==z.side,
S)))return null;RN.copy(S);RN.applyMatrix4(u.matrixWorld);z=t.ray.origin.distanceTo(RN);return z<t.near||z>t.far?null:{distance:z,point:RN.clone(),object:u}}function va(u,z,t,x,C,G,L,S,V,Z,ja,ta){Zy.fromBufferAttribute(C,Z);$y.fromBufferAttribute(C,ja);az.fromBufferAttribute(C,ta);C=u.morphTargetInfluences;if(z.morphTargets&&G&&C){SN.set(0,0,0);TN.set(0,0,0);UN.set(0,0,0);for(var Ha=0,db=G.length;Ha<db;Ha++){var Ya=C[Ha],vb=G[Ha];0!==Ya&&(WV.fromBufferAttribute(vb,Z),XV.fromBufferAttribute(vb,ja),
YV.fromBufferAttribute(vb,ta),L?(SN.addScaledVector(WV,Ya),TN.addScaledVector(XV,Ya),UN.addScaledVector(YV,Ya)):(SN.addScaledVector(WV.sub(Zy),Ya),TN.addScaledVector(XV.sub($y),Ya),UN.addScaledVector(YV.sub(az),Ya)))}Zy.add(SN);$y.add(TN);az.add(UN)}u.isSkinnedMesh&&(u.boneTransform(Z,Zy),u.boneTransform(ja,$y),u.boneTransform(ta,az));if(u=Cb(u,z,t,x,Zy,$y,az,TH))S&&(kE.fromBufferAttribute(S,Z),lE.fromBufferAttribute(S,ja),mE.fromBufferAttribute(S,ta),u.uv=au.getUV(TH,Zy,$y,az,kE,lE,mE,new Xe)),V&&
(kE.fromBufferAttribute(V,Z),lE.fromBufferAttribute(V,ja),mE.fromBufferAttribute(V,ta),u.uv2=au.getUV(TH,Zy,$y,az,kE,lE,mE,new Xe)),S=new UH(Z,ja,ta),au.getNormal(Zy,$y,az,S.normal),u.face=S;return u}function ma(u){var z={},t;for(t in u){z[t]={};for(var x in u[t]){var C=u[t][x];C&&(C.isColor||C.isMatrix3||C.isMatrix4||C.isVector2||C.isVector3||C.isVector4||C.isTexture)?z[t][x]=C.clone():Array.isArray(C)?z[t][x]=C.slice():z[t][x]=C}}return z}function ua(u){for(var z={},t=0;t<u.length;t++){var x=ma(u[t]),
C;for(C in x)z[C]=x[C]}return z}function Ma(u){M.call(this||p);(this||p).type="ShaderMaterial";(this||p).defines={};(this||p).uniforms={};(this||p).vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";(this||p).fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";(this||p).linewidth=1;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;(this||p).lights=!1;(this||p).clipping=!1;(this||p).skinning=
!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};(this||p).defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};(this||p).index0AttributeName=void 0;(this||p).uniformsNeedUpdate=!1;(this||p).glslVersion=null;void 0!==u&&(void 0!==u.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(u))}function Lb(){E.call(this||p);(this||
p).type="Camera";(this||p).matrixWorldInverse=new fj;(this||p).projectionMatrix=new fj;(this||p).projectionMatrixInverse=new fj}function ic(u,z,t,x){Lb.call(this||p);(this||p).type="PerspectiveCamera";(this||p).fov=void 0!==u?u:50;(this||p).zoom=1;(this||p).near=void 0!==t?t:.1;(this||p).far=void 0!==x?x:2E3;(this||p).focus=10;(this||p).aspect=void 0!==z?z:1;(this||p).view=null;(this||p).filmGauge=35;(this||p).filmOffset=0;this.updateProjectionMatrix()}function Vb(u,z,t){E.call(this||p);(this||p).type=
"CubeCamera";if(!0!==t.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{(this||p).renderTarget=t;var x=new ic(90,1,u,z);x.layers=(this||p).layers;x.up.set(0,-1,0);x.lookAt(new nc(1,0,0));this.add(x);var C=new ic(90,1,u,z);C.layers=(this||p).layers;C.up.set(0,-1,0);C.lookAt(new nc(-1,0,0));this.add(C);var G=new ic(90,1,u,z);G.layers=(this||p).layers;G.up.set(0,0,1);G.lookAt(new nc(0,1,0));this.add(G);
var L=new ic(90,1,u,z);L.layers=(this||p).layers;L.up.set(0,0,-1);L.lookAt(new nc(0,-1,0));this.add(L);var S=new ic(90,1,u,z);S.layers=(this||p).layers;S.up.set(0,-1,0);S.lookAt(new nc(0,0,1));this.add(S);var V=new ic(90,1,u,z);V.layers=(this||p).layers;V.up.set(0,-1,0);V.lookAt(new nc(0,0,-1));this.add(V);(this||p).update=function(Z,ja){null===(this||p).parent&&this.updateMatrixWorld();var ta=Z.xr.enabled,Ha=Z.getRenderTarget();Z.xr.enabled=!1;var db=t.texture.generateMipmaps;t.texture.generateMipmaps=
!1;Z.setRenderTarget(t,0);Z.render(ja,x);Z.setRenderTarget(t,1);Z.render(ja,C);Z.setRenderTarget(t,2);Z.render(ja,G);Z.setRenderTarget(t,3);Z.render(ja,L);Z.setRenderTarget(t,4);Z.render(ja,S);t.texture.generateMipmaps=db;Z.setRenderTarget(t,5);Z.render(ja,V);Z.setRenderTarget(Ha);Z.xr.enabled=ta}}}function jc(u,z,t,x,C,G,L,S,V,Z){u=void 0!==u?u:[];r.call(this||p,u,void 0!==z?z:301,t,x,C,G,void 0!==L?L:1022,S,V,Z);(this||p).flipY=!1;(this||p)._needsFlipEnvMap=!0}function Pc(u,z,t){Number.isInteger(z)&&
(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),z=t);v.call(this||p,u,u,z);z=z||{};(this||p).texture=new jc(void 0,z.mapping,z.wrapS,z.wrapT,z.magFilter,z.minFilter,z.format,z.type,z.anisotropy,z.encoding);(this||p).texture._needsFlipEnvMap=!1}function Rb(u,z,t,x,C,G,L,S,V,Z,ja,ta){r.call(this||p,null,G,L,S,V,Z,x,C,ja,ta);(this||p).image={data:u||null,width:z||1,height:t||1};(this||p).magFilter=void 0!==V?V:1003;(this||p).minFilter=
void 0!==Z?Z:1003;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).unpackAlignment=1;(this||p).needsUpdate=!0}function zd(){function u(G,L){x(G,L);C=z.requestAnimationFrame(u)}var z=null,t=!1,x=null,C=null;return{start:function(){!0!==t&&null!==x&&(C=z.requestAnimationFrame(u),t=!0)},stop:function(){z.cancelAnimationFrame(C);t=!1},setAnimationLoop:function(G){x=G},setContext:function(G){z=G}}}function ld(u,z){function t(G,L){var S=G.array,V=G.usage,Z=u.createBuffer();u.bindBuffer(L,Z);u.bufferData(L,
S,V);G.onUploadCallback();L=5126;S instanceof Float32Array?L=5126:S instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):S instanceof Uint16Array?L=5123:S instanceof Int16Array?L=5122:S instanceof Uint32Array?L=5125:S instanceof Int32Array?L=5124:S instanceof Int8Array?L=5120:S instanceof Uint8Array&&(L=5121);return{buffer:Z,type:L,bytesPerElement:S.BYTES_PER_ELEMENT,version:G.version}}var x=z.isWebGL2,C=new WeakMap;return{get:function(G){G.isInterleavedBufferAttribute&&
(G=G.data);return C.get(G)},remove:function(G){G.isInterleavedBufferAttribute&&(G=G.data);var L=C.get(G);L&&(u.deleteBuffer(L.buffer),C.delete(G))},update:function(G,L){if(G.isGLBufferAttribute)L=C.get(G),(!L||L.version<G.version)&&C.set(G,{buffer:G.buffer,type:G.type,bytesPerElement:G.elementSize,version:G.version});else{G.isInterleavedBufferAttribute&&(G=G.data);var S=C.get(G);if(void 0===S)C.set(G,t(G,L));else if(S.version<G.version){var V=G.array,Z=G.updateRange;u.bindBuffer(L,S.buffer);-1===
Z.count?u.bufferSubData(L,0,V):(x?u.bufferSubData(L,Z.offset*V.BYTES_PER_ELEMENT,V,Z.offset,Z.count):u.bufferSubData(L,Z.offset*V.BYTES_PER_ELEMENT,V.subarray(Z.offset,Z.offset+Z.count)),Z.count=-1);S.version=G.version}}}}}function la(u,z,t,x,C){function G(db,Ya){t.buffers.color.setClear(db.r,db.g,db.b,Ya,C)}var L=new rg(0),S=0,V,Z,ja=null,ta=0,Ha=null;return{getClearColor:function(){return L},setClearColor:function(db,Ya){L.set(db);S=void 0!==Ya?Ya:1;G(L,S)},getClearAlpha:function(){return S},setClearAlpha:function(db){S=
db;G(L,S)},render:function(db,Ya,vb,sb){(Ya=!0===Ya.isScene?Ya.background:null)&&Ya.isTexture&&(Ya=z.get(Ya));vb=u.xr;(vb=vb.getSession&&vb.getSession())&&"additive"===vb.environmentBlendMode&&(Ya=null);null===Ya?G(L,S):Ya&&Ya.isColor&&(G(Ya,1),sb=!0);(u.autoClear||sb)&&u.clear(u.autoClearColor,u.autoClearDepth,u.autoClearStencil);if(Ya&&(Ya.isCubeTexture||Ya.isWebGLCubeRenderTarget||306===Ya.mapping)){void 0===Z&&(Z=new hb(new VH(1,1,1),new Ma({name:"BackgroundCubeMaterial",uniforms:ma(bu.cube.uniforms),
vertexShader:bu.cube.vertexShader,fragmentShader:bu.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),Z.geometry.deleteAttribute("normal"),Z.geometry.deleteAttribute("uv"),Z.onBeforeRender=function(Qc,zc,jd){(this||p).matrixWorld.copyPosition(jd.matrixWorld)},Object.defineProperty(Z.material,"envMap",{get:function(){return(this||p).uniforms.envMap.value}}),x.update(Z));Ya.isWebGLCubeRenderTarget&&(Ya=Ya.texture);Z.material.uniforms.envMap.value=Ya;Z.material.uniforms.flipEnvMap.value=
Ya.isCubeTexture&&Ya._needsFlipEnvMap?-1:1;if(ja!==Ya||ta!==Ya.version||Ha!==u.toneMapping)Z.material.needsUpdate=!0,ja=Ya,ta=Ya.version,Ha=u.toneMapping;db.unshift(Z,Z.geometry,Z.material,0,0,null)}else if(Ya&&Ya.isTexture){void 0===V&&(V=new hb(new VN(2,2),new Ma({name:"BackgroundMaterial",uniforms:ma(bu.background.uniforms),vertexShader:bu.background.vertexShader,fragmentShader:bu.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),V.geometry.deleteAttribute("normal"),Object.defineProperty(V.material,
"map",{get:function(){return(this||p).uniforms.t2D.value}}),x.update(V));V.material.uniforms.t2D.value=Ya;!0===Ya.matrixAutoUpdate&&Ya.updateMatrix();V.material.uniforms.uvTransform.value.copy(Ya.matrix);if(ja!==Ya||ta!==Ya.version||Ha!==u.toneMapping)V.material.needsUpdate=!0,ja=Ya,ta=Ya.version,Ha=u.toneMapping;db.unshift(V,V.geometry,V.material,0,0,null)}}}}function Da(u,z,t,x){function C(jd){return x.isWebGL2?u.bindVertexArray(jd):Ya.bindVertexArrayOES(jd)}function G(jd){return x.isWebGL2?u.deleteVertexArray(jd):
Ya.deleteVertexArrayOES(jd)}function L(jd){for(var Bc=[],kd=[],ud=[],Vd=0;Vd<db;Vd++)Bc[Vd]=0,kd[Vd]=0,ud[Vd]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Bc,enabledAttributes:kd,attributeDivisors:ud,object:jd,attributes:{},index:null}}function S(){for(var jd=zc.newAttributes,Bc=0,kd=jd.length;Bc<kd;Bc++)jd[Bc]=0}function V(jd){Z(jd,0)}function Z(jd,Bc){var kd=zc.enabledAttributes,ud=zc.attributeDivisors;zc.newAttributes[jd]=1;0===kd[jd]&&(u.enableVertexAttribArray(jd),kd[jd]=1);
ud[jd]!==Bc&&((x.isWebGL2?u:z.get("ANGLE_instanced_arrays"))[x.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](jd,Bc),ud[jd]=Bc)}function ja(){for(var jd=zc.newAttributes,Bc=zc.enabledAttributes,kd=0,ud=Bc.length;kd<ud;kd++)Bc[kd]!==jd[kd]&&(u.disableVertexAttribArray(kd),Bc[kd]=0)}function ta(){Ha();zc!==Qc&&(zc=Qc,C(zc.object))}function Ha(){Qc.geometry=null;Qc.program=null;Qc.wireframe=!1}var db=u.getParameter(34921),Ya=x.isWebGL2?null:z.get("OES_vertex_array_object"),vb=x.isWebGL2||
null!==Ya,sb={},Qc=L(null),zc=Qc;return{setup:function(jd,Bc,kd,ud,Vd){var Ad=!1;if(vb){Ad=!0===Bc.wireframe;var gd=sb[ud.id];void 0===gd&&(gd={},sb[ud.id]=gd);var xd=gd[kd.id];void 0===xd&&(xd={},gd[kd.id]=xd);gd=xd[Ad];void 0===gd&&(gd=L(x.isWebGL2?u.createVertexArray():Ya.createVertexArrayOES()),xd[Ad]=gd);Ad=gd;zc!==Ad&&(zc=Ad,C(zc.object));a:if(Ad=zc.attributes,xd=ud.attributes,Object.keys(Ad).length!==Object.keys(xd).length)Ad=!0;else{for(var jf in xd){gd=Ad[jf];var Ae=xd[jf];if(void 0===gd||
gd.attribute!==Ae||gd.data!==Ae.data){Ad=!0;break a}}Ad=zc.index!==Vd?!0:!1}if(Ad){jf={};xd=ud.attributes;for(var uf in xd)gd=xd[uf],Ae={},Ae.attribute=gd,gd.data&&(Ae.data=gd.data),jf[uf]=Ae;zc.attributes=jf;zc.index=Vd}}else if(uf=!0===Bc.wireframe,zc.geometry!==ud.id||zc.program!==kd.id||zc.wireframe!==uf)zc.geometry=ud.id,zc.program=kd.id,zc.wireframe=uf,Ad=!0;!0===jd.isInstancedMesh&&(Ad=!0);null!==Vd&&t.update(Vd,34963);if(Ad){if(!1!==x.isWebGL2||!jd.isInstancedMesh&&!ud.isInstancedBufferGeometry||
null!==z.get("ANGLE_instanced_arrays")){S();uf=ud.attributes;kd=kd.getAttributes();Bc=Bc.defaultAttributeValues;for(var Ff in kd)if(Ad=kd[Ff],0<=Ad){var $f=uf[Ff];if(void 0!==$f){if(jf=$f.normalized,Ae=$f.itemSize,gd=t.get($f),void 0!==gd){var gh=gd.buffer;xd=gd.type;gd=gd.bytesPerElement;if($f.isInterleavedBufferAttribute){var Qg=$f.data,Gi=Qg.stride;$f=$f.offset;Qg&&Qg.isInstancedInterleavedBuffer?(Z(Ad,Qg.meshPerAttribute),void 0===ud._maxInstanceCount&&(ud._maxInstanceCount=Qg.meshPerAttribute*
Qg.count)):V(Ad);u.bindBuffer(34962,gh);Gi*=gd;gd*=$f;!0!==x.isWebGL2||5124!==xd&&5125!==xd?u.vertexAttribPointer(Ad,Ae,xd,jf,Gi,gd):u.vertexAttribIPointer(Ad,Ae,xd,Gi,gd)}else $f.isInstancedBufferAttribute?(Z(Ad,$f.meshPerAttribute),void 0===ud._maxInstanceCount&&(ud._maxInstanceCount=$f.meshPerAttribute*$f.count)):V(Ad),u.bindBuffer(34962,gh),gd=Ae,!0!==x.isWebGL2||5124!==xd&&5125!==xd?u.vertexAttribPointer(Ad,gd,xd,jf,0,0):u.vertexAttribIPointer(Ad,gd,xd,0,0)}}else if("instanceMatrix"===Ff)xd=
t.get(jd.instanceMatrix),void 0!==xd&&(jf=xd.buffer,xd=xd.type,Z(Ad+0,1),Z(Ad+1,1),Z(Ad+2,1),Z(Ad+3,1),u.bindBuffer(34962,jf),u.vertexAttribPointer(Ad+0,4,xd,!1,64,0),u.vertexAttribPointer(Ad+1,4,xd,!1,64,16),u.vertexAttribPointer(Ad+2,4,xd,!1,64,32),u.vertexAttribPointer(Ad+3,4,xd,!1,64,48));else if("instanceColor"===Ff)xd=t.get(jd.instanceColor),void 0!==xd&&(jf=xd.buffer,xd=xd.type,Z(Ad,1),u.bindBuffer(34962,jf),u.vertexAttribPointer(Ad,3,xd,!1,12,0));else if(void 0!==Bc&&(jf=Bc[Ff],void 0!==jf))switch(jf.length){case 2:u.vertexAttrib2fv(Ad,
jf);break;case 3:u.vertexAttrib3fv(Ad,jf);break;case 4:u.vertexAttrib4fv(Ad,jf);break;default:u.vertexAttrib1fv(Ad,jf)}}ja()}null!==Vd&&u.bindBuffer(34963,t.get(Vd).buffer)}},reset:ta,resetDefaultState:Ha,dispose:function(){ta();for(var jd in sb){var Bc=sb[jd],kd;for(kd in Bc){var ud=Bc[kd],Vd;for(Vd in ud)G(ud[Vd].object),delete ud[Vd];delete Bc[kd]}delete sb[jd]}},releaseStatesOfGeometry:function(jd){if(void 0!==sb[jd.id]){var Bc=sb[jd.id],kd;for(kd in Bc){var ud=Bc[kd],Vd;for(Vd in ud)G(ud[Vd].object),
delete ud[Vd];delete Bc[kd]}delete sb[jd.id]}},releaseStatesOfProgram:function(jd){for(var Bc in sb){var kd=sb[Bc];if(void 0!==kd[jd.id]){var ud=kd[jd.id],Vd;for(Vd in ud)G(ud[Vd].object),delete ud[Vd];delete kd[jd.id]}}},initAttributes:S,enableAttribute:V,disableUnusedAttributes:ja}}function Pa(u,z,t,x){var C=x.isWebGL2,G;(this||p).setMode=function(L){G=L};(this||p).render=function(L,S){u.drawArrays(G,L,S);t.update(S,G,1)};(this||p).renderInstances=function(L,S,V){if(0!==V){if(C){var Z=u;var ja=
"drawArraysInstanced"}else if(Z=z.get("ANGLE_instanced_arrays"),ja="drawArraysInstancedANGLE",null===Z){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Z[ja](G,L,S,V);t.update(S,G,V)}}}function yb(u,z,t){function x(jd){if("highp"===jd){if(0<u.getShaderPrecisionFormat(35633,36338).precision&&0<u.getShaderPrecisionFormat(35632,36338).precision)return"highp";jd="mediump"}return"mediump"===jd&&0<u.getShaderPrecisionFormat(35633,
36337).precision&&0<u.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var C,G="undefined"!==typeof WebGL2RenderingContext&&u instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&u instanceof WebGL2ComputeRenderingContext,L=void 0!==t.precision?t.precision:"highp",S=x(L);S!==L&&(console.warn("THREE.WebGLRenderer:",L,"not supported, using",S,"instead."),L=S);t=!0===t.logarithmicDepthBuffer;S=u.getParameter(34930);var V=u.getParameter(35660),Z=u.getParameter(3379),
ja=u.getParameter(34076),ta=u.getParameter(34921),Ha=u.getParameter(36347),db=u.getParameter(36348),Ya=u.getParameter(36349),vb=0<V,sb=G||!!z.get("OES_texture_float"),Qc=vb&&sb,zc=G?u.getParameter(36183):0;return{isWebGL2:G,getMaxAnisotropy:function(){if(void 0!==C)return C;var jd=z.get("EXT_texture_filter_anisotropic");return C=null!==jd?u.getParameter(jd.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:x,precision:L,logarithmicDepthBuffer:t,maxTextures:S,maxVertexTextures:V,maxTextureSize:Z,maxCubemapSize:ja,
maxAttributes:ta,maxVertexUniforms:Ha,maxVaryings:db,maxFragmentUniforms:Ya,vertexTextures:vb,floatFragmentTextures:sb,floatVertexTextures:Qc,maxSamples:zc}}function ac(u){function z(){ja.value!==C&&(ja.value=C,ja.needsUpdate=0<G);x.numPlanes=G;x.numIntersection=0}function t(ta,Ha,db,Ya){var vb=null!==ta?ta.length:0,sb=null;if(0!==vb){sb=ja.value;if(!0!==Ya||null===sb){Ya=db+4*vb;Ha=Ha.matrixWorldInverse;Z.getNormalMatrix(Ha);if(null===sb||sb.length<Ya)sb=new Float32Array(Ya);for(Ya=0;Ya!==vb;++Ya,
db+=4)V.copy(ta[Ya]).applyMatrix4(Ha,Z),V.normal.toArray(sb,db),sb[db+3]=V.constant}ja.value=sb;ja.needsUpdate=!0}x.numPlanes=vb;x.numIntersection=0;return sb}var x=this||p,C=null,G=0,L=!1,S=!1,V=new Mv,Z=new Up,ja={value:null,needsUpdate:!1};(this||p).uniform=ja;(this||p).numPlanes=0;(this||p).numIntersection=0;(this||p).init=function(ta,Ha,db){var Ya=0!==ta.length||Ha||0!==G||L;L=Ha;C=t(ta,db,0);G=ta.length;return Ya};(this||p).beginShadows=function(){S=!0;t(null)};(this||p).endShadows=function(){S=
!1;z()};(this||p).setState=function(ta,Ha,db){var Ya=ta.clippingPlanes,vb=ta.clipIntersection,sb=ta.clipShadows;ta=u.get(ta);if(!L||null===Ya||0===Ya.length||S&&!sb)S?t(null):z();else{sb=S?0:G;var Qc=4*sb,zc=ta.clippingState||null;ja.value=zc;zc=t(Ya,Ha,Qc,db);for(Ha=0;Ha!==Qc;++Ha)zc[Ha]=C[Ha];ta.clippingState=zc;(this||p).numIntersection=vb?(this||p).numPlanes:0;(this||p).numPlanes+=sb}}}function Od(u){function z(C,G){303===G?C.mapping=301:304===G&&(C.mapping=302);return C}function t(C){C=C.target;
C.removeEventListener("dispose",t);var G=x.get(C);void 0!==G&&(x.delete(C),G.dispose())}var x=new WeakMap;return{get:function(C){if(C&&C.isTexture){var G=C.mapping;if(303===G||304===G){if(x.has(C))return G=x.get(C).texture,z(G,C.mapping);var L=C.image;if(L&&0<L.height){G=u.getRenderList();var S=u.getRenderTarget(),V=u.getRenderState();L=new Pc(L.height/2);L.fromEquirectangularTexture(u,C);x.set(C,L);u.setRenderTarget(S);u.setRenderList(G);u.setRenderState(V);C.addEventListener("dispose",t);return z(L.texture,
C.mapping)}return null}}return C},dispose:function(){x=new WeakMap}}}function Md(u){var z={};return{has:function(t){if(void 0!==z[t])return null!==z[t];switch(t){case "WEBGL_depth_texture":var x=u.getExtension("WEBGL_depth_texture")||u.getExtension("MOZ_WEBGL_depth_texture")||u.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":x=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
break;case "WEBGL_compressed_texture_s3tc":x=u.getExtension("WEBGL_compressed_texture_s3tc")||u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":x=u.getExtension("WEBGL_compressed_texture_pvrtc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:x=u.getExtension(t)}z[t]=x;return null!==x},get:function(t){this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported.");
return z[t]}}}function Wc(u,z,t,x){function C(V){V=V.target;var Z=L.get(V);null!==Z.index&&z.remove(Z.index);for(var ja in Z.attributes)z.remove(Z.attributes[ja]);V.removeEventListener("dispose",C);L.delete(V);if(ja=S.get(Z))z.remove(ja),S.delete(Z);x.releaseStatesOfGeometry(Z);!0===V.isInstancedBufferGeometry&&delete V._maxInstanceCount;t.memory.geometries--}function G(V){var Z=[],ja=V.index,ta=V.attributes.position;if(null!==ja){ta=ja.array;ja=ja.version;for(var Ha=0,db=ta.length;Ha<db;Ha+=3){var Ya=
ta[Ha+0],vb=ta[Ha+1],sb=ta[Ha+2];Z.push(Ya,vb,vb,sb,sb,Ya)}}else for(Ha=ta.array,ja=ta.version,ta=0,Ha=Ha.length/3-1;ta<Ha;ta+=3)db=ta+0,Ya=ta+1,vb=ta+2,Z.push(db,Ya,Ya,vb,vb,db);Z=new (65535<fa(Z)?T:K)(Z,1);Z.version=ja;(ja=S.get(V))&&z.remove(ja);S.set(V,Z)}var L=new WeakMap,S=new WeakMap;return{get:function(V,Z){var ja=L.get(Z);if(ja)return ja;Z.addEventListener("dispose",C);Z.isBufferGeometry?ja=Z:Z.isGeometry&&(void 0===Z._bufferGeometry&&(Z._bufferGeometry=(new oa).setFromObject(V)),ja=Z._bufferGeometry);
L.set(Z,ja);t.memory.geometries++;return ja},update:function(V){var Z=V.attributes;for(ta in Z)z.update(Z[ta],34962);V=V.morphAttributes;for(var ja in V){Z=V[ja];var ta=0;for(var Ha=Z.length;ta<Ha;ta++)z.update(Z[ta],34962)}},getWireframeAttribute:function(V){var Z=S.get(V);if(Z){var ja=V.index;null!==ja&&Z.version<ja.version&&G(V)}else G(V);return S.get(V)}}}function cf(u,z,t,x){var C=x.isWebGL2,G,L,S;(this||p).setMode=function(V){G=V};(this||p).setIndex=function(V){L=V.type;S=V.bytesPerElement};
(this||p).render=function(V,Z){u.drawElements(G,Z,L,V*S);t.update(Z,G,1)};(this||p).renderInstances=function(V,Z,ja){if(0!==ja){if(C){var ta=u;var Ha="drawElementsInstanced"}else if(ta=z.get("ANGLE_instanced_arrays"),Ha="drawElementsInstancedANGLE",null===ta){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ta[Ha](G,Z,L,V*S,ja);t.update(Z,G,ja)}}}function Se(u){var z={frame:0,calls:0,triangles:0,
points:0,lines:0};return{memory:{geometries:0,textures:0},render:z,programs:null,autoReset:!0,reset:function(){z.frame++;z.calls=0;z.triangles=0;z.points=0;z.lines=0},update:function(t,x,C){z.calls++;switch(x){case 4:z.triangles+=t/3*C;break;case 1:z.lines+=t/2*C;break;case 3:z.lines+=C*(t-1);break;case 2:z.lines+=C*t;break;case 0:z.points+=C*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",x)}}}}function Oh(u,z){return u[0]-z[0]}function nh(u,z){return Math.abs(z[1])-Math.abs(u[1])}
function nj(u){for(var z={},t=new Float32Array(8),x=[],C=0;8>C;C++)x[C]=[C,0];return{update:function(G,L,S,V){var Z=G.morphTargetInfluences;G=void 0===Z?0:Z.length;var ja=z[L.id];if(void 0===ja){ja=[];for(var ta=0;ta<G;ta++)ja[ta]=[ta,0];z[L.id]=ja}for(ta=0;ta<G;ta++){var Ha=ja[ta];Ha[0]=ta;Ha[1]=Z[ta]}ja.sort(nh);for(Z=0;8>Z;Z++)Z<G&&ja[Z][1]?(x[Z][0]=ja[Z][0],x[Z][1]=ja[Z][1]):(x[Z][0]=Number.MAX_SAFE_INTEGER,x[Z][1]=0);x.sort(Oh);G=S.morphTargets&&L.morphAttributes.position;S=S.morphNormals&&L.morphAttributes.normal;
for(Z=ja=0;8>Z;Z++)Ha=x[Z],ta=Ha[0],Ha=Ha[1],ta!==Number.MAX_SAFE_INTEGER&&Ha?(G&&L.getAttribute("morphTarget"+Z)!==G[ta]&&L.setAttribute("morphTarget"+Z,G[ta]),S&&L.getAttribute("morphNormal"+Z)!==S[ta]&&L.setAttribute("morphNormal"+Z,S[ta]),t[Z]=Ha,ja+=Ha):(G&&void 0!==L.getAttribute("morphTarget"+Z)&&L.deleteAttribute("morphTarget"+Z),S&&void 0!==L.getAttribute("morphNormal"+Z)&&L.deleteAttribute("morphNormal"+Z),t[Z]=0);L=L.morphTargetsRelative?1:1-ja;V.getUniforms().setValue(u,"morphTargetBaseInfluence",
L);V.getUniforms().setValue(u,"morphTargetInfluences",t)}}}function cj(u,z,t,x){var C=new WeakMap;return{update:function(G){var L=x.render.frame,S=G.geometry,V=z.get(G,S);C.get(V)!==L&&(S.isGeometry&&V.updateFromObject(G),z.update(V),C.set(V,L));G.isInstancedMesh&&(t.update(G.instanceMatrix,34962),null!==G.instanceColor&&t.update(G.instanceColor,34962));return V},dispose:function(){C=new WeakMap}}}function oj(u,z,t,x){r.call(this||p,null);(this||p).image={data:u||null,width:z||1,height:t||1,depth:x||
1};(this||p).magFilter=1003;(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=!0}function Fj(u,z,t,x){r.call(this||p,null);(this||p).image={data:u||null,width:z||1,height:t||1,depth:x||1};(this||p).magFilter=1003;(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=!0}function Nj(u,z,t){var x=u[0];if(0>=x||0<x)return u;var C=z*t,G=O9[C];void 0===G&&(G=new Float32Array(C),
O9[C]=G);if(0!==z)for(x.toArray(G,0),x=1,C=0;x!==z;++x)C+=t,u[x].toArray(G,C);return G}function Ui(u,z){if(u.length!==z.length)return!1;for(var t=0,x=u.length;t<x;t++)if(u[t]!==z[t])return!1;return!0}function th(u,z){for(var t=0,x=z.length;t<x;t++)u[t]=z[t]}function Wj(u,z){var t=P9[z];void 0===t&&(t=new Int32Array(z),P9[z]=t);for(var x=0;x!==z;++x)t[x]=u.allocateTextureUnit();return t}function Ik(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1f((this||p).addr,z),t[0]=z)}function ck(u,z){var t=(this||
p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y)u.uniform2f((this||p).addr,z.x,z.y),t[0]=z.x,t[1]=z.y}else Ui(t,z)||(u.uniform2fv((this||p).addr,z),th(t,z))}function Jk(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y||t[2]!==z.z)u.uniform3f((this||p).addr,z.x,z.y,z.z),t[0]=z.x,t[1]=z.y,t[2]=z.z}else if(void 0!==z.r){if(t[0]!==z.r||t[1]!==z.g||t[2]!==z.b)u.uniform3f((this||p).addr,z.r,z.g,z.b),t[0]=z.r,t[1]=z.g,t[2]=z.b}else Ui(t,z)||(u.uniform3fv((this||p).addr,z),th(t,z))}
function Gy(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y||t[2]!==z.z||t[3]!==z.w)u.uniform4f((this||p).addr,z.x,z.y,z.z,z.w),t[0]=z.x,t[1]=z.y,t[2]=z.z,t[3]=z.w}else Ui(t,z)||(u.uniform4fv((this||p).addr,z),th(t,z))}function Qd(u,z){var t=(this||p).cache,x=z.elements;void 0===x?Ui(t,z)||(u.uniformMatrix2fv((this||p).addr,!1,z),th(t,z)):Ui(t,x)||(Q9.set(x),u.uniformMatrix2fv((this||p).addr,!1,Q9),th(t,x))}function Rd(u,z){var t=(this||p).cache,x=z.elements;void 0===x?Ui(t,
z)||(u.uniformMatrix3fv((this||p).addr,!1,z),th(t,z)):Ui(t,x)||(R9.set(x),u.uniformMatrix3fv((this||p).addr,!1,R9),th(t,x))}function Fy(u,z){var t=(this||p).cache,x=z.elements;void 0===x?Ui(t,z)||(u.uniformMatrix4fv((this||p).addr,!1,z),th(t,z)):Ui(t,x)||(S9.set(x),u.uniformMatrix4fv((this||p).addr,!1,S9),th(t,x))}function Sw(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.safeSetTexture2D(z||T9,C)}function xv(u,z,t){var x=(this||p).cache,
C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.setTexture2DArray(z||gra,C)}function aB(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.setTexture3D(z||hra,C)}function eB(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.safeSetTextureCube(z||U9,C)}function fB(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1i((this||p).addr,z),t[0]=z)}function gB(u,z){var t=
(this||p).cache;Ui(t,z)||(u.uniform2iv((this||p).addr,z),th(t,z))}function hB(u,z){var t=(this||p).cache;Ui(t,z)||(u.uniform3iv((this||p).addr,z),th(t,z))}function bB(u,z){var t=(this||p).cache;Ui(t,z)||(u.uniform4iv((this||p).addr,z),th(t,z))}function YT(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1ui((this||p).addr,z),t[0]=z)}function lM(u){switch(u){case 5126:return Ik;case 35664:return ck;case 35665:return Jk;case 35666:return Gy;case 35674:return Qd;case 35675:return Rd;case 35676:return Fy;
case 5124:case 35670:return fB;case 35667:case 35671:return gB;case 35668:case 35672:return hB;case 35669:case 35673:return bB;case 5125:return YT;case 35678:case 36198:case 36298:case 36306:case 35682:return Sw;case 35679:case 36299:case 36307:return aB;case 35680:case 36300:case 36308:case 36293:return eB;case 36289:case 36303:case 36311:case 36292:return xv}}function cM(u,z){u.uniform1fv((this||p).addr,z)}function YG(u,z){u.uniform1iv((this||p).addr,z)}function ZT(u,z){u.uniform2iv((this||p).addr,
z)}function aU(u,z){u.uniform3iv((this||p).addr,z)}function $T(u,z){u.uniform4iv((this||p).addr,z)}function wr(u,z){z=Nj(z,(this||p).size,2);u.uniform2fv((this||p).addr,z)}function RT(u,z){z=Nj(z,(this||p).size,3);u.uniform3fv((this||p).addr,z)}function ST(u,z){z=Nj(z,(this||p).size,4);u.uniform4fv((this||p).addr,z)}function QT(u,z){z=Nj(z,(this||p).size,4);u.uniformMatrix2fv((this||p).addr,!1,z)}function cB(u,z){z=Nj(z,(this||p).size,9);u.uniformMatrix3fv((this||p).addr,!1,z)}function TT(u,z){z=
Nj(z,(this||p).size,16);u.uniformMatrix4fv((this||p).addr,!1,z)}function mM(u,z,t){var x=z.length,C=Wj(t,x);u.uniform1iv((this||p).addr,C);for(u=0;u!==x;++u)t.safeSetTexture2D(z[u]||T9,C[u])}function Ot(u,z,t){var x=z.length,C=Wj(t,x);u.uniform1iv((this||p).addr,C);for(u=0;u!==x;++u)t.safeSetTextureCube(z[u]||U9,C[u])}function UT(u){switch(u){case 5126:return cM;case 35664:return wr;case 35665:return RT;case 35666:return ST;case 35674:return QT;case 35675:return cB;case 35676:return TT;case 5124:case 35670:return YG;
case 35667:case 35671:return ZT;case 35668:case 35672:return aU;case 35669:case 35673:return $T;case 35678:case 36198:case 36298:case 36306:case 35682:return mM;case 35680:case 36300:case 36308:case 36293:return Ot}}function XG(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).setValue=lM(z.type)}function dM(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).size=z.size;(this||p).setValue=UT(z.type)}function jM(u){(this||p).id=u;(this||p).seq=[];(this||p).map={}}
function yv(u,z){(this||p).seq=[];(this||p).map={};for(var t=u.getProgramParameter(z,35718),x=0;x<t;++x){var C=u.getActiveUniform(z,x),G=u.getUniformLocation(z,C.name),L=this||p,S=C.name,V=S.length;for(ZV.lastIndex=0;;){var Z=ZV.exec(S),ja=ZV.lastIndex,ta=Z[1],Ha=Z[3];"]"===Z[2]&&(ta|=0);if(void 0===Ha||"["===Ha&&ja+2===V){S=L;C=void 0===Ha?new XG(ta,C,G):new dM(ta,C,G);S.seq.push(C);S.map[C.id]=C;break}else Ha=L.map[ta],void 0===Ha&&(Ha=new jM(ta),ta=L,L=Ha,ta.seq.push(L),ta.map[L.id]=L),L=Ha}}}
function eM(u,z,t){z=u.createShader(z);u.shaderSource(z,t);u.compileShader(z);return z}function iM(u){switch(u){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",
u),["Linear","( value )"]}}function fM(u,z,t){var x=u.getShaderParameter(z,35713),C=u.getShaderInfoLog(z).trim();if(x&&""===C)return"";u=u.getShaderSource(z).split("\n");for(z=0;z<u.length;z++)u[z]=z+1+": "+u[z];u=u.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+"\n"+C+u}function Hy(u,z){z=iM(z);return"vec4 "+u+"( vec4 value ) { return "+z[0]+"ToLinear"+z[1]+"; }"}function XT(u,z){z=iM(z);return"vec4 "+u+"( vec4 value ) { return LinearTo"+z[0]+z[1]+"; }"}function gM(u,z){switch(z){case 1:z=
"Linear";break;case 2:z="Reinhard";break;case 3:z="OptimizedCineon";break;case 4:z="ACESFilmic";break;case 5:z="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",z),z="Linear"}return"vec3 "+u+"( vec3 color ) { return "+z+"ToneMapping( color ); }"}function hM(u){var z=[],t;for(t in u){var x=u[t];!1!==x&&z.push("#define "+t+" "+x)}return z.join("\n")}function dB(u){return""!==u}function kM(u,z){return u.replace(/NUM_DIR_LIGHTS/g,z.numDirLights).replace(/NUM_SPOT_LIGHTS/g,
z.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,z.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,z.numPointLights).replace(/NUM_HEMI_LIGHTS/g,z.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,z.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,z.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,z.numPointLightShadows)}function na(u,z){return u.replace(/NUM_CLIPPING_PLANES/g,z.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,z.numClippingPlanes-z.numClipIntersection)}function Na(u,z){u=
gj[z];if(void 0===u)throw Error("Can not resolve #include <"+z+">");return u.replace($V,Na)}function Ea(u,z,t,x){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return Xa(u,z,t,x)}function Xa(u,z,t,x){u="";for(z=parseInt(z);z<parseInt(t);z++)u+=x.replace(/\[\s*i\s*\]/g,"[ "+z+" ]").replace(/UNROLLED_LOOP_INDEX/g,z);return u}function mb(u){var z="precision "+u.precision+" float;\nprecision "+u.precision+" int;";"highp"===
u.precision?z+="\n#define HIGH_PRECISION":"mediump"===u.precision?z+="\n#define MEDIUM_PRECISION":"lowp"===u.precision&&(z+="\n#define LOW_PRECISION");return z}function Zb(u){var z="SHADOWMAP_TYPE_BASIC";1===u.shadowMapType?z="SHADOWMAP_TYPE_PCF":2===u.shadowMapType?z="SHADOWMAP_TYPE_PCF_SOFT":3===u.shadowMapType&&(z="SHADOWMAP_TYPE_VSM");return z}function bb(u){var z="ENVMAP_TYPE_CUBE";if(u.envMap)switch(u.envMapMode){case 301:case 302:z="ENVMAP_TYPE_CUBE";break;case 306:case 307:z="ENVMAP_TYPE_CUBE_UV"}return z}
function Tb(u){var z="ENVMAP_MODE_REFLECTION";if(u.envMap)switch(u.envMapMode){case 302:case 307:z="ENVMAP_MODE_REFRACTION"}return z}function Kb(u){var z="ENVMAP_BLENDING_NONE";if(u.envMap)switch(u.combine){case 0:z="ENVMAP_BLENDING_MULTIPLY";break;case 1:z="ENVMAP_BLENDING_MIX";break;case 2:z="ENVMAP_BLENDING_ADD"}return z}function fd(u,z,t,x){var C=u.getContext(),G=t.defines,L=t.vertexShader,S=t.fragmentShader,V=Zb(t),Z=bb(t),ja=Tb(t),ta=Kb(t),Ha=0<u.gammaFactor?u.gammaFactor:1,db=t.isWebGL2?"":
[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":
""].filter(dB).join("\n"),Ya=hM(G),vb=C.createProgram(),sb=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(G=[Ya].filter(dB).join("\n"),0<G.length&&(G+="\n"),V=[db,Ya].filter(dB).join("\n"),0<V.length&&(V+="\n")):(G=[mb(t),"#define SHADER_NAME "+t.shaderName,Ya,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Ha,"#define MAX_BONES "+t.maxBones,t.useFog&&
t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+ja:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":
"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",
t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+V:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":
"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;",
"attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;",
"\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dB).join("\n"),V=[db,mb(t),"#define SHADER_NAME "+t.shaderName,Ya,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Ha,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",
t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+Z:"",t.envMap?"#define "+ja:"",t.envMap?"#define "+ta:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":
"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":
"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+V:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?
"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?gj.tonemapping_pars_fragment:"",0!==t.toneMapping?gM("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",gj.encodings_pars_fragment,t.map?Hy("mapTexelToLinear",t.mapEncoding):"",t.matcap?Hy("matcapTexelToLinear",
t.matcapEncoding):"",t.envMap?Hy("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Hy("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?Hy("lightMapTexelToLinear",t.lightMapEncoding):"",XT("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(dB).join("\n"));L=L.replace($V,Na);L=kM(L,t);L=na(L,t);S=S.replace($V,Na);S=kM(S,t);S=na(S,t);L=L.replace(V9,Xa).replace(W9,Ea);S=S.replace(V9,Xa).replace(W9,Ea);t.isWebGL2&&!0!==t.isRawShaderMaterial&&
(sb="#version 300 es\n",G="#define attribute in\n#define varying out\n#define texture2D texture\n"+G,V=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+V);S=sb+V+S;L=eM(C,35633,sb+G+L);S=eM(C,35632,S);C.attachShader(vb,L);C.attachShader(vb,S);void 0!==t.index0AttributeName?C.bindAttribLocation(vb,0,t.index0AttributeName):!0===t.morphTargets&&C.bindAttribLocation(vb,0,"position");C.linkProgram(vb);if(u.debug.checkShaderErrors){u=C.getProgramInfoLog(vb).trim();sb=C.getShaderInfoLog(L).trim();Z=C.getShaderInfoLog(S).trim();ta=ja=!0;if(!1===C.getProgramParameter(vb,35714))ja=!1,Ha=fM(C,L,"vertex"),db=fM(C,S,"fragment"),console.error("THREE.WebGLProgram: shader error: ",
C.getError(),"35715",C.getProgramParameter(vb,35715),"gl.getProgramInfoLog",u,Ha,db);else if(""!==u)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",u);else if(""===sb||""===Z)ta=!1;ta&&((this||p).diagnostics={runnable:ja,programLog:u,vertexShader:{log:sb,prefix:G},fragmentShader:{log:Z,prefix:V}})}C.deleteShader(L);C.deleteShader(S);var Qc;(this||p).getUniforms=function(){void 0===Qc&&(Qc=new yv(C,vb));return Qc};var zc;(this||p).getAttributes=function(){if(void 0===zc){for(var jd={},Bc=
C.getProgramParameter(vb,35721),kd=0;kd<Bc;kd++){var ud=C.getActiveAttrib(vb,kd).name;jd[ud]=C.getAttribLocation(vb,ud)}zc=jd}return zc};(this||p).destroy=function(){x.releaseStatesOfProgram(this||p);C.deleteProgram(vb);(this||p).program=void 0};(this||p).name=t.shaderName;(this||p).id=ira++;(this||p).cacheKey=z;(this||p).usedTimes=1;(this||p).program=vb;(this||p).vertexShader=L;(this||p).fragmentShader=S;return this||p}function Ob(u,z,t,x,C,G){function L(sb){if(sb)sb.isTexture?Qc=sb.encoding:sb.isWebGLRenderTarget&&
(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Qc=sb.texture.encoding);else var Qc=3E3;return Qc}var S=[],V=x.isWebGL2,Z=x.logarithmicDepthBuffer,ja=x.floatVertexTextures,ta=x.maxVertexUniforms,Ha=x.vertexTextures,db=x.precision,Ya={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",
MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},vb="precision isWebGL2 supportsVertexTextures outputEncoding instancing instancingColor map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");
return{getParameters:function(sb,Qc,zc,jd,Bc){var kd=jd.fog;jd=sb.isMeshStandardMaterial?jd.environment:null;jd=z.get(sb.envMap||jd);var ud=Ya[sb.type];if(Bc.isSkinnedMesh){var Vd=Bc.skeleton.bones;if(ja)Vd=1024;else{var Ad=Math.min(Math.floor((ta-20)/4),Vd.length);Ad<Vd.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Vd.length+" bones. This GPU supports "+Ad+"."),Vd=0):Vd=Ad}}else Vd=0;null!==sb.precision&&(db=x.getMaxPrecision(sb.precision),db!==sb.precision&&console.warn("THREE.WebGLProgram.getParameters:",
sb.precision,"not supported, using",db,"instead."));if(ud){var gd=bu[ud];Ad=gd.vertexShader;gd=gd.fragmentShader}else Ad=sb.vertexShader,gd=sb.fragmentShader;var xd=u.getRenderTarget();return{isWebGL2:V,shaderID:ud,shaderName:sb.type,vertexShader:Ad,fragmentShader:gd,defines:sb.defines,isRawShaderMaterial:!0===sb.isRawShaderMaterial,glslVersion:sb.glslVersion,precision:db,instancing:!0===Bc.isInstancedMesh,instancingColor:!0===Bc.isInstancedMesh&&null!==Bc.instanceColor,supportsVertexTextures:Ha,
outputEncoding:null!==xd?L(xd.texture):u.outputEncoding,map:!!sb.map,mapEncoding:L(sb.map),matcap:!!sb.matcap,matcapEncoding:L(sb.matcap),envMap:!!jd,envMapMode:jd&&jd.mapping,envMapEncoding:L(jd),envMapCubeUV:!!jd&&(306===jd.mapping||307===jd.mapping),lightMap:!!sb.lightMap,lightMapEncoding:L(sb.lightMap),aoMap:!!sb.aoMap,emissiveMap:!!sb.emissiveMap,emissiveMapEncoding:L(sb.emissiveMap),bumpMap:!!sb.bumpMap,normalMap:!!sb.normalMap,objectSpaceNormalMap:1===sb.normalMapType,tangentSpaceNormalMap:0===
sb.normalMapType,clearcoatMap:!!sb.clearcoatMap,clearcoatRoughnessMap:!!sb.clearcoatRoughnessMap,clearcoatNormalMap:!!sb.clearcoatNormalMap,displacementMap:!!sb.displacementMap,roughnessMap:!!sb.roughnessMap,metalnessMap:!!sb.metalnessMap,specularMap:!!sb.specularMap,alphaMap:!!sb.alphaMap,gradientMap:!!sb.gradientMap,sheen:!!sb.sheen,transmissionMap:!!sb.transmissionMap,combine:sb.combine,vertexTangents:sb.normalMap&&sb.vertexTangents,vertexColors:sb.vertexColors,vertexUvs:!!sb.map||!!sb.bumpMap||
!!sb.normalMap||!!sb.specularMap||!!sb.alphaMap||!!sb.emissiveMap||!!sb.roughnessMap||!!sb.metalnessMap||!!sb.clearcoatMap||!!sb.clearcoatRoughnessMap||!!sb.clearcoatNormalMap||!!sb.displacementMap||!!sb.transmissionMap,uvsVertexOnly:!(sb.map||sb.bumpMap||sb.normalMap||sb.specularMap||sb.alphaMap||sb.emissiveMap||sb.roughnessMap||sb.metalnessMap||sb.clearcoatNormalMap||sb.transmissionMap)&&!!sb.displacementMap,fog:!!kd,useFog:sb.fog,fogExp2:kd&&kd.isFogExp2,flatShading:sb.flatShading,sizeAttenuation:sb.sizeAttenuation,
logarithmicDepthBuffer:Z,skinning:sb.skinning&&0<Vd,maxBones:Vd,useVertexTexture:ja,morphTargets:sb.morphTargets,morphNormals:sb.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:Qc.directional.length,numPointLights:Qc.point.length,numSpotLights:Qc.spot.length,numRectAreaLights:Qc.rectArea.length,numHemiLights:Qc.hemi.length,numDirLightShadows:Qc.directionalShadowMap.length,numPointLightShadows:Qc.pointShadowMap.length,numSpotLightShadows:Qc.spotShadowMap.length,
numClippingPlanes:G.numPlanes,numClipIntersection:G.numIntersection,dithering:sb.dithering,shadowMapEnabled:u.shadowMap.enabled&&0<zc.length,shadowMapType:u.shadowMap.type,toneMapping:sb.toneMapped?u.toneMapping:0,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:sb.premultipliedAlpha,alphaTest:sb.alphaTest,doubleSided:2===sb.side,flipSided:1===sb.side,depthPacking:void 0!==sb.depthPacking?sb.depthPacking:!1,index0AttributeName:sb.index0AttributeName,extensionDerivatives:sb.extensions&&
sb.extensions.derivatives,extensionFragDepth:sb.extensions&&sb.extensions.fragDepth,extensionDrawBuffers:sb.extensions&&sb.extensions.drawBuffers,extensionShaderTextureLOD:sb.extensions&&sb.extensions.shaderTextureLOD,rendererExtensionFragDepth:V||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:V||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:V||t.has("EXT_shader_texture_lod"),customProgramCacheKey:sb.customProgramCacheKey()}},getProgramCacheKey:function(sb){var Qc=[];sb.shaderID?
Qc.push(sb.shaderID):(Qc.push(sb.fragmentShader),Qc.push(sb.vertexShader));if(void 0!==sb.defines)for(var zc in sb.defines)Qc.push(zc),Qc.push(sb.defines[zc]);if(!1===sb.isRawShaderMaterial){for(zc=0;zc<vb.length;zc++)Qc.push(sb[vb[zc]]);Qc.push(u.outputEncoding);Qc.push(u.gammaFactor)}Qc.push(sb.customProgramCacheKey);return Qc.join()},getUniforms:function(sb){var Qc=Ya[sb.type];return Qc?X9.clone(bu[Qc].uniforms):sb.uniforms},acquireProgram:function(sb,Qc){for(var zc,jd=0,Bc=S.length;jd<Bc;jd++){var kd=
S[jd];if(kd.cacheKey===Qc){zc=kd;++zc.usedTimes;break}}void 0===zc&&(zc=new fd(u,Qc,sb,C),S.push(zc));return zc},releaseProgram:function(sb){if(0===--sb.usedTimes){var Qc=S.indexOf(sb);S[Qc]=S[S.length-1];S.pop();sb.destroy()}},programs:S}}function de(){var u=new WeakMap;return{get:function(z){var t=u.get(z);void 0===t&&(t={},u.set(z,t));return t},remove:function(z){u.delete(z)},update:function(z,t,x){u.get(z)[t]=x},dispose:function(){u=new WeakMap}}}function De(u,z){return u.groupOrder!==z.groupOrder?
u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.program!==z.program?u.program.id-z.program.id:u.material.id!==z.material.id?u.material.id-z.material.id:u.z!==z.z?u.z-z.z:u.id-z.id}function Of(u,z){return u.groupOrder!==z.groupOrder?u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.z!==z.z?z.z-u.z:u.id-z.id}function Kf(u){function z(S,V,Z,ja,ta,Ha){var db=t[x],Ya=u.get(Z);void 0===db?(db={id:S.id,object:S,geometry:V,material:Z,
program:Ya.program||L,groupOrder:ja,renderOrder:S.renderOrder,z:ta,group:Ha},t[x]=db):(db.id=S.id,db.object=S,db.geometry=V,db.material=Z,db.program=Ya.program||L,db.groupOrder=ja,db.renderOrder=S.renderOrder,db.z=ta,db.group=Ha);x++;return db}var t=[],x=0,C=[],G=[],L={id:-1};return{opaque:C,transparent:G,init:function(){x=0;C.length=0;G.length=0},push:function(S,V,Z,ja,ta,Ha){S=z(S,V,Z,ja,ta,Ha);(!0===Z.transparent?G:C).push(S)},unshift:function(S,V,Z,ja,ta,Ha){S=z(S,V,Z,ja,ta,Ha);(!0===Z.transparent?
G:C).unshift(S)},finish:function(){for(var S=x,V=t.length;S<V;S++){var Z=t[S];if(null===Z.id)break;Z.id=null;Z.object=null;Z.geometry=null;Z.material=null;Z.program=null;Z.group=null}},sort:function(S,V){1<C.length&&C.sort(S||De);1<G.length&&G.sort(V||Of)}}}function We(u){var z=new WeakMap;return{get:function(t,x){var C=z.get(t);if(void 0===C){var G=new Kf(u);z.set(t,new WeakMap);z.get(t).set(x,G)}else G=C.get(x),void 0===G&&(G=new Kf(u),C.set(x,G));return G},dispose:function(){z=new WeakMap}}}function Pf(){var u=
{};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={direction:new nc,color:new rg};break;case "SpotLight":t={position:new nc,direction:new nc,color:new rg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":t={position:new nc,color:new rg,distance:0,decay:0};break;case "HemisphereLight":t={direction:new nc,skyColor:new rg,groundColor:new rg};break;case "RectAreaLight":t={color:new rg,position:new nc,halfWidth:new nc,halfHeight:new nc}}return u[z.id]=
t}}}function lp(){var u={};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case "SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case "PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1E3}}return u[z.id]=t}}}function VT(u,z){return(z.castShadow?1:0)-(u.castShadow?
1:0)}function WT(u,z){for(var t=new Pf,x=lp(),C={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},
G=0;9>G;G++)C.probe.push(new nc);var L=new nc,S=new fj,V=new fj;return{setup:function(Z,ja,ta){for(var Ha=ja=0,db=0,Ya=0;9>Ya;Ya++)C.probe[Ya].set(0,0,0);var vb=Ya=0,sb=0,Qc=0,zc=0,jd=0,Bc=0,kd=0;ta=ta.matrixWorldInverse;Z.sort(VT);for(var ud=0,Vd=Z.length;ud<Vd;ud++){var Ad=Z[ud],gd=Ad.color,xd=Ad.intensity,jf=Ad.distance,Ae=Ad.shadow&&Ad.shadow.map?Ad.shadow.map.texture:null;if(Ad.isAmbientLight)ja+=gd.r*xd,Ha+=gd.g*xd,db+=gd.b*xd;else if(Ad.isLightProbe)for(Ae=0;9>Ae;Ae++)C.probe[Ae].addScaledVector(Ad.sh.coefficients[Ae],
xd);else if(Ad.isDirectionalLight){xd=t.get(Ad);xd.color.copy(Ad.color).multiplyScalar(Ad.intensity);xd.direction.setFromMatrixPosition(Ad.matrixWorld);L.setFromMatrixPosition(Ad.target.matrixWorld);xd.direction.sub(L);xd.direction.transformDirection(ta);if(Ad.castShadow){var uf=Ad.shadow;gd=x.get(Ad);gd.shadowBias=uf.bias;gd.shadowNormalBias=uf.normalBias;gd.shadowRadius=uf.radius;gd.shadowMapSize=uf.mapSize;C.directionalShadow[Ya]=gd;C.directionalShadowMap[Ya]=Ae;C.directionalShadowMatrix[Ya]=Ad.shadow.matrix;
jd++}C.directional[Ya]=xd;Ya++}else Ad.isSpotLight?(uf=t.get(Ad),uf.position.setFromMatrixPosition(Ad.matrixWorld),uf.position.applyMatrix4(ta),uf.color.copy(gd).multiplyScalar(xd),uf.distance=jf,uf.direction.setFromMatrixPosition(Ad.matrixWorld),L.setFromMatrixPosition(Ad.target.matrixWorld),uf.direction.sub(L),uf.direction.transformDirection(ta),uf.coneCos=Math.cos(Ad.angle),uf.penumbraCos=Math.cos(Ad.angle*(1-Ad.penumbra)),uf.decay=Ad.decay,Ad.castShadow&&(xd=Ad.shadow,gd=x.get(Ad),gd.shadowBias=
xd.bias,gd.shadowNormalBias=xd.normalBias,gd.shadowRadius=xd.radius,gd.shadowMapSize=xd.mapSize,C.spotShadow[sb]=gd,C.spotShadowMap[sb]=Ae,C.spotShadowMatrix[sb]=Ad.shadow.matrix,kd++),C.spot[sb]=uf,sb++):Ad.isRectAreaLight?(Ae=t.get(Ad),Ae.color.copy(gd).multiplyScalar(xd),Ae.position.setFromMatrixPosition(Ad.matrixWorld),Ae.position.applyMatrix4(ta),V.identity(),S.copy(Ad.matrixWorld),S.premultiply(ta),V.extractRotation(S),Ae.halfWidth.set(.5*Ad.width,0,0),Ae.halfHeight.set(0,.5*Ad.height,0),Ae.halfWidth.applyMatrix4(V),
Ae.halfHeight.applyMatrix4(V),C.rectArea[Qc]=Ae,Qc++):Ad.isPointLight?(xd=t.get(Ad),xd.position.setFromMatrixPosition(Ad.matrixWorld),xd.position.applyMatrix4(ta),xd.color.copy(Ad.color).multiplyScalar(Ad.intensity),xd.distance=Ad.distance,xd.decay=Ad.decay,Ad.castShadow&&(uf=Ad.shadow,gd=x.get(Ad),gd.shadowBias=uf.bias,gd.shadowNormalBias=uf.normalBias,gd.shadowRadius=uf.radius,gd.shadowMapSize=uf.mapSize,gd.shadowCameraNear=uf.camera.near,gd.shadowCameraFar=uf.camera.far,C.pointShadow[vb]=gd,C.pointShadowMap[vb]=
Ae,C.pointShadowMatrix[vb]=Ad.shadow.matrix,Bc++),C.point[vb]=xd,vb++):Ad.isHemisphereLight&&(Ae=t.get(Ad),Ae.direction.setFromMatrixPosition(Ad.matrixWorld),Ae.direction.transformDirection(ta),Ae.direction.normalize(),Ae.skyColor.copy(Ad.color).multiplyScalar(xd),Ae.groundColor.copy(Ad.groundColor).multiplyScalar(xd),C.hemi[zc]=Ae,zc++)}0<Qc&&(z.isWebGL2?(C.rectAreaLTC1=ag.LTC_FLOAT_1,C.rectAreaLTC2=ag.LTC_FLOAT_2):!0===u.has("OES_texture_float_linear")?(C.rectAreaLTC1=ag.LTC_FLOAT_1,C.rectAreaLTC2=
ag.LTC_FLOAT_2):!0===u.has("OES_texture_half_float_linear")?(C.rectAreaLTC1=ag.LTC_HALF_1,C.rectAreaLTC2=ag.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));C.ambient[0]=ja;C.ambient[1]=Ha;C.ambient[2]=db;Z=C.hash;if(Z.directionalLength!==Ya||Z.pointLength!==vb||Z.spotLength!==sb||Z.rectAreaLength!==Qc||Z.hemiLength!==zc||Z.numDirectionalShadows!==jd||Z.numPointShadows!==Bc||Z.numSpotShadows!==kd)C.directional.length=Ya,C.spot.length=sb,C.rectArea.length=
Qc,C.point.length=vb,C.hemi.length=zc,C.directionalShadow.length=jd,C.directionalShadowMap.length=jd,C.pointShadow.length=Bc,C.pointShadowMap.length=Bc,C.spotShadow.length=kd,C.spotShadowMap.length=kd,C.directionalShadowMatrix.length=jd,C.pointShadowMatrix.length=Bc,C.spotShadowMatrix.length=kd,Z.directionalLength=Ya,Z.pointLength=vb,Z.spotLength=sb,Z.rectAreaLength=Qc,Z.hemiLength=zc,Z.numDirectionalShadows=jd,Z.numPointShadows=Bc,Z.numSpotShadows=kd,C.version=jra++},state:C}}function Y9(u,z){var t=
new WT(u,z),x=[],C=[];return{init:function(){x.length=0;C.length=0},state:{lightsArray:x,shadowsArray:C,lights:t},setupLights:function(G){t.setup(x,C,G)},pushLight:function(G){x.push(G)},pushShadow:function(G){C.push(G)}}}function kra(u,z){var t=new WeakMap;return{get:function(x,C){if(!1===t.has(x)){var G=new Y9(u,z);t.set(x,new WeakMap);t.get(x).set(C,G)}else!1===t.get(x).has(C)?(G=new Y9(u,z),t.get(x).set(C,G)):G=t.get(x).get(C);return G},dispose:function(){t=new WeakMap}}}function bz(u){M.call(this||
p);(this||p).type="MeshDepthMaterial";(this||p).depthPacking=3200;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;this.setValues(u)}function cz(u){M.call(this||p);(this||p).type="MeshDistanceMaterial";(this||p).referencePosition=new nc;(this||p).nearDistance=1;(this||p).farDistance=1E3;(this||p).skinning=
!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).fog=!1;this.setValues(u)}function Z9(u,z,t){function x(Bc,kd,ud){ud=Bc<<0|kd<<1|ud<<2;var Vd=ta[ud];void 0===Vd&&(Vd=new bz({depthPacking:3201,morphTargets:Bc,skinning:kd}),ta[ud]=Vd);return Vd}function C(Bc,kd,ud){ud=Bc<<0|kd<<1|ud<<2;var Vd=Ha[ud];void 0===Vd&&(Vd=new cz({morphTargets:Bc,skinning:kd}),Ha[ud]=Vd);return Vd}function G(Bc,
kd,ud,Vd,Ad,gd,xd){var jf=x,Ae=Bc.customDepthMaterial;!0===Vd.isPointLight&&(jf=C,Ae=Bc.customDistanceMaterial);void 0===Ae?(Ae=!1,!0===ud.morphTargets&&(Ae=kd.morphAttributes&&kd.morphAttributes.position&&0<kd.morphAttributes.position.length),kd=!1,!0===Bc.isSkinnedMesh&&(!0===ud.skinning?kd=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Bc)),Bc=jf(Ae,kd,!0===Bc.isInstancedMesh)):Bc=Ae;u.localClippingEnabled&&!0===ud.clipShadows&&0!==ud.clippingPlanes.length&&
(Ae=Bc.uuid,jf=ud.uuid,kd=db[Ae],void 0===kd&&(kd={},db[Ae]=kd),Ae=kd[jf],void 0===Ae&&(Ae=Bc.clone(),kd[jf]=Ae),Bc=Ae);Bc.visible=ud.visible;Bc.wireframe=ud.wireframe;Bc.side=3===xd?null!==ud.shadowSide?ud.shadowSide:ud.side:null!==ud.shadowSide?ud.shadowSide:Ya[ud.side];Bc.clipShadows=ud.clipShadows;Bc.clippingPlanes=ud.clippingPlanes;Bc.clipIntersection=ud.clipIntersection;Bc.wireframeLinewidth=ud.wireframeLinewidth;Bc.linewidth=ud.linewidth;!0===Vd.isPointLight&&!0===Bc.isMeshDistanceMaterial&&
(Bc.referencePosition.setFromMatrixPosition(Vd.matrixWorld),Bc.nearDistance=Ad,Bc.farDistance=gd);return Bc}function L(Bc,kd,ud,Vd,Ad){if(!1!==Bc.visible){if(Bc.layers.test(kd.layers)&&(Bc.isMesh||Bc.isLine||Bc.isPoints)&&(Bc.castShadow||Bc.receiveShadow&&3===Ad)&&(!Bc.frustumCulled||S.intersectsObject(Bc))){Bc.modelViewMatrix.multiplyMatrices(ud.matrixWorldInverse,Bc.matrixWorld);var gd=z.update(Bc),xd=Bc.material;if(Array.isArray(xd))for(var jf=gd.groups,Ae=0,uf=jf.length;Ae<uf;Ae++){var Ff=jf[Ae],
$f=xd[Ff.materialIndex];$f&&$f.visible&&($f=G(Bc,gd,$f,Vd,ud.near,ud.far,Ad),u.renderBufferDirect(ud,null,gd,$f,Bc,Ff))}else xd.visible&&(xd=G(Bc,gd,xd,Vd,ud.near,ud.far,Ad),u.renderBufferDirect(ud,null,gd,xd,Bc,null))}Bc=Bc.children;gd=0;for(xd=Bc.length;gd<xd;gd++)L(Bc[gd],kd,ud,Vd,Ad)}}var S=new WH,V=new Xe,Z=new Xe,ja=new Rk,ta=[],Ha=[],db={},Ya={0:1,1:0,2:2},vb=new Ma({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},
vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
sb=vb.clone();sb.defines.HORIZONAL_PASS=1;var Qc=new oa;Qc.setAttribute("position",new X(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var zc=new hb(Qc,vb),jd=this||p;(this||p).enabled=!1;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p).type=1;(this||p).render=function(Bc,kd,ud){if(!1!==jd.enabled&&(!1!==jd.autoUpdate||!1!==jd.needsUpdate)&&0!==Bc.length){var Vd=u.getRenderTarget(),Ad=u.getActiveCubeFace(),gd=u.getActiveMipmapLevel(),xd=u.state;xd.setBlending(0);xd.buffers.color.setClear(1,
1,1,1);xd.buffers.depth.setTest(!0);xd.setScissorTest(!1);for(var jf=0,Ae=Bc.length;jf<Ae;jf++){var uf=Bc[jf],Ff=uf.shadow;if(void 0===Ff)console.warn("THREE.WebGLShadowMap:",uf,"has no shadow.");else if(!1!==Ff.autoUpdate||!1!==Ff.needsUpdate){V.copy(Ff.mapSize);var $f=Ff.getFrameExtents();V.multiply($f);Z.copy(Ff.mapSize);if(V.x>t||V.y>t)V.x>t&&(Z.x=Math.floor(t/$f.x),V.x=Z.x*$f.x,Ff.mapSize.x=Z.x),V.y>t&&(Z.y=Math.floor(t/$f.y),V.y=Z.y*$f.y,Ff.mapSize.y=Z.y);null!==Ff.map||Ff.isPointLightShadow||
3!==(this||p).type||($f={minFilter:1006,magFilter:1006,format:1023},Ff.map=new v(V.x,V.y,$f),Ff.map.texture.name=uf.name+".shadowMap",Ff.mapPass=new v(V.x,V.y,$f),Ff.camera.updateProjectionMatrix());null===Ff.map&&(Ff.map=new v(V.x,V.y,{minFilter:1003,magFilter:1003,format:1023}),Ff.map.texture.name=uf.name+".shadowMap",Ff.camera.updateProjectionMatrix());u.setRenderTarget(Ff.map);u.clear();$f=Ff.getViewportCount();for(var gh=0;gh<$f;gh++){var Qg=Ff.getViewport(gh);ja.set(Z.x*Qg.x,Z.y*Qg.y,Z.x*Qg.z,
Z.y*Qg.w);xd.viewport(ja);Ff.updateMatrices(uf,gh);S=Ff.getFrustum();L(kd,ud,Ff.camera,uf,(this||p).type)}Ff.isPointLightShadow||3!==(this||p).type||(uf=Ff,$f=ud,gh=z.update(zc),vb.uniforms.shadow_pass.value=uf.map.texture,vb.uniforms.resolution.value=uf.mapSize,vb.uniforms.radius.value=uf.radius,u.setRenderTarget(uf.mapPass),u.clear(),u.renderBufferDirect($f,null,gh,vb,zc,null),sb.uniforms.shadow_pass.value=uf.mapPass.texture,sb.uniforms.resolution.value=uf.mapSize,sb.uniforms.radius.value=uf.radius,
u.setRenderTarget(uf.map),u.clear(),u.renderBufferDirect($f,null,gh,sb,zc,null));Ff.needsUpdate=!1}}jd.needsUpdate=!1;u.setRenderTarget(Vd,Ad,gd)}}}function lra(u,z,t){function x(hd,Te,mf){var Lg=new Uint8Array(4),Qf=u.createTexture();u.bindTexture(hd,Qf);u.texParameteri(hd,10241,9728);u.texParameteri(hd,10240,9728);for(hd=0;hd<mf;hd++)u.texImage2D(Te+hd,0,6408,1,1,0,6408,5121,Lg);return Qf}function C(hd){!0!==sb[hd]&&(u.enable(hd),sb[hd]=!0)}function G(hd){!1!==sb[hd]&&(u.disable(hd),sb[hd]=!1)}
function L(hd,Te,mf,Lg,Qf,Ph,Kh,ii){if(0===hd)zc&&(G(3042),zc=!1);else if(zc||(C(3042),zc=!0),5!==hd){if(hd!==jd||ii!==xd){if(100!==Bc||100!==Vd)u.blendEquation(32774),Vd=Bc=100;if(ii)switch(hd){case 1:u.blendFuncSeparate(1,771,1,771);break;case 2:u.blendFunc(1,1);break;case 3:u.blendFuncSeparate(0,0,769,771);break;case 4:u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",hd)}else switch(hd){case 1:u.blendFuncSeparate(770,771,1,771);break;case 2:u.blendFunc(770,
1);break;case 3:u.blendFunc(0,769);break;case 4:u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",hd)}gd=Ad=ud=kd=null;jd=hd;xd=ii}}else{Qf=Qf||Te;Ph=Ph||mf;Kh=Kh||Lg;if(Te!==Bc||Qf!==Vd)u.blendEquationSeparate($c[Te],$c[Qf]),Bc=Te,Vd=Qf;if(mf!==kd||Lg!==ud||Ph!==Ad||Kh!==gd)u.blendFuncSeparate(Ee[mf],Ee[Lg],Ee[Ph],Ee[Kh]),kd=mf,ud=Lg,Ad=Ph,gd=Kh;jd=hd;xd=null}}function S(hd){jf!==hd&&(hd?u.frontFace(2304):u.frontFace(2305),jf=hd)}function V(hd){0!==hd?(C(2884),
hd!==Ae&&(1===hd?u.cullFace(1029):2===hd?u.cullFace(1028):u.cullFace(1032))):G(2884);Ae=hd}function Z(hd,Te,mf){if(hd){if(C(32823),Ff!==Te||$f!==mf)u.polygonOffset(Te,mf),Ff=Te,$f=mf}else G(32823)}function ja(hd){void 0===hd&&(hd=33984+gh-1);wh!==hd&&(u.activeTexture(hd),wh=hd)}var ta,Ha;t=t.isWebGL2;var db=new function(){var hd=!1,Te=new Rk,mf=null,Lg=new Rk(0,0,0,0);return{setMask:function(Qf){mf===Qf||hd||(u.colorMask(Qf,Qf,Qf,Qf),mf=Qf)},setLocked:function(Qf){hd=Qf},setClear:function(Qf,Ph,Kh,
ii,Yh){!0===Yh&&(Qf*=ii,Ph*=ii,Kh*=ii);Te.set(Qf,Ph,Kh,ii);!1===Lg.equals(Te)&&(u.clearColor(Qf,Ph,Kh,ii),Lg.copy(Te))},reset:function(){hd=!1;mf=null;Lg.set(-1,0,0,0)}}},Ya=new function(){var hd=!1,Te=null,mf=null,Lg=null;return{setTest:function(Qf){Qf?C(2929):G(2929)},setMask:function(Qf){Te===Qf||hd||(u.depthMask(Qf),Te=Qf)},setFunc:function(Qf){if(mf!==Qf){if(Qf)switch(Qf){case 0:u.depthFunc(512);break;case 1:u.depthFunc(519);break;case 2:u.depthFunc(513);break;case 3:u.depthFunc(515);break;case 4:u.depthFunc(514);
break;case 5:u.depthFunc(518);break;case 6:u.depthFunc(516);break;case 7:u.depthFunc(517);break;default:u.depthFunc(515)}else u.depthFunc(515);mf=Qf}},setLocked:function(Qf){hd=Qf},setClear:function(Qf){Lg!==Qf&&(u.clearDepth(Qf),Lg=Qf)},reset:function(){hd=!1;Lg=mf=Te=null}}},vb=new function(){var hd=!1,Te=null,mf=null,Lg=null,Qf=null,Ph=null,Kh=null,ii=null,Yh=null;return{setTest:function(yk){hd||(yk?C(2960):G(2960))},setMask:function(yk){Te===yk||hd||(u.stencilMask(yk),Te=yk)},setFunc:function(yk,
Be,cg){if(mf!==yk||Lg!==Be||Qf!==cg)u.stencilFunc(yk,Be,cg),mf=yk,Lg=Be,Qf=cg},setOp:function(yk,Be,cg){if(Ph!==yk||Kh!==Be||ii!==cg)u.stencilOp(yk,Be,cg),Ph=yk,Kh=Be,ii=cg},setLocked:function(yk){hd=yk},setClear:function(yk){Yh!==yk&&(u.clearStencil(yk),Yh=yk)},reset:function(){hd=!1;Yh=ii=Kh=Ph=Qf=Lg=mf=Te=null}}},sb={},Qc=null,zc=null,jd=null,Bc=null,kd=null,ud=null,Vd=null,Ad=null,gd=null,xd=!1,jf=null,Ae=null,uf=null,Ff=null,$f=null,gh=u.getParameter(35661),Qg=!1,Gi=0;Gi=u.getParameter(7938);
-1!==Gi.indexOf("WebGL")?(Gi=parseFloat(/^WebGL ([0-9])/.exec(Gi)[1]),Qg=1<=Gi):-1!==Gi.indexOf("OpenGL ES")&&(Gi=parseFloat(/^OpenGL ES ([0-9])/.exec(Gi)[1]),Qg=2<=Gi);var wh=null,Xj={},zk=new Rk,Kl=new Rk,Ac={};Ac[3553]=x(3553,3553,1);Ac[34067]=x(34067,34069,6);db.setClear(0,0,0,1);Ya.setClear(1);vb.setClear(0);C(2929);Ya.setFunc(3);S(!1);V(1);C(2884);L(0);var $c=(ta={},ta[100]=32774,ta[101]=32778,ta[102]=32779,ta);t?($c[103]=32775,$c[104]=32776):(z=z.get("EXT_blend_minmax"),null!==z&&($c[103]=
z.MIN_EXT,$c[104]=z.MAX_EXT));var Ee=(Ha={},Ha[200]=0,Ha[201]=1,Ha[202]=768,Ha[204]=770,Ha[210]=776,Ha[208]=774,Ha[206]=772,Ha[203]=769,Ha[205]=771,Ha[209]=775,Ha[207]=773,Ha);return{buffers:{color:db,depth:Ya,stencil:vb},enable:C,disable:G,useProgram:function(hd){return Qc!==hd?(u.useProgram(hd),Qc=hd,!0):!1},setBlending:L,setMaterial:function(hd,Te){2===hd.side?G(2884):C(2884);var mf=1===hd.side;Te&&(mf=!mf);S(mf);1===hd.blending&&!1===hd.transparent?L(0):L(hd.blending,hd.blendEquation,hd.blendSrc,
hd.blendDst,hd.blendEquationAlpha,hd.blendSrcAlpha,hd.blendDstAlpha,hd.premultipliedAlpha);Ya.setFunc(hd.depthFunc);Ya.setTest(hd.depthTest);Ya.setMask(hd.depthWrite);db.setMask(hd.colorWrite);Te=hd.stencilWrite;vb.setTest(Te);Te&&(vb.setMask(hd.stencilWriteMask),vb.setFunc(hd.stencilFunc,hd.stencilRef,hd.stencilFuncMask),vb.setOp(hd.stencilFail,hd.stencilZFail,hd.stencilZPass));Z(hd.polygonOffset,hd.polygonOffsetFactor,hd.polygonOffsetUnits)},setFlipSided:S,setCullFace:V,setLineWidth:function(hd){hd!==
uf&&(Qg&&u.lineWidth(hd),uf=hd)},setPolygonOffset:Z,setScissorTest:function(hd){hd?C(3089):G(3089)},activeTexture:ja,bindTexture:function(hd,Te){null===wh&&ja();var mf=Xj[wh];void 0===mf&&(mf={type:void 0,texture:void 0},Xj[wh]=mf);if(mf.type!==hd||mf.texture!==Te)u.bindTexture(hd,Te||Ac[hd]),mf.type=hd,mf.texture=Te},unbindTexture:function(){var hd=Xj[wh];void 0!==hd&&void 0!==hd.type&&(u.bindTexture(hd.type,null),hd.type=void 0,hd.texture=void 0)},compressedTexImage2D:function(){try{u.compressedTexImage2D.apply(u,
arguments)}catch(hd){console.error("THREE.WebGLState:",hd)}},texImage2D:function(){try{u.texImage2D.apply(u,arguments)}catch(hd){console.error("THREE.WebGLState:",hd)}},texImage3D:function(){try{u.texImage3D.apply(u,arguments)}catch(hd){console.error("THREE.WebGLState:",hd)}},scissor:function(hd){!1===zk.equals(hd)&&(u.scissor(hd.x,hd.y,hd.z,hd.w),zk.copy(hd))},viewport:function(hd){!1===Kl.equals(hd)&&(u.viewport(hd.x,hd.y,hd.z,hd.w),Kl.copy(hd))},reset:function(){sb={};wh=null;Xj={};Ae=jf=jd=Qc=
null;db.reset();Ya.reset();vb.reset()}}}function mra(u,z,t,x,C,G,L){function S(Ac,$c){return Qg?new OffscreenCanvas(Ac,$c):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function V(Ac,$c,Ee,hd){var Te=1;if(Ac.width>hd||Ac.height>hd)Te=hd/Math.max(Ac.width,Ac.height);if(1>Te||!0===$c){if("undefined"!==typeof HTMLImageElement&&Ac instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&Ac instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&Ac instanceof ImageBitmap)return hd=
$c?Xh.floorPowerOfTwo:Math.floor,$c=hd(Te*Ac.width),Te=hd(Te*Ac.height),void 0===gh&&(gh=S($c,Te)),Ee=Ee?S($c,Te):gh,Ee.width=$c,Ee.height=Te,Ee.getContext("2d").drawImage(Ac,0,0,$c,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ac.width+"x"+Ac.height+") to ("+$c+"x"+Te+")."),Ee;"data"in Ac&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ac.width+"x"+Ac.height+").")}return Ac}function Z(Ac){return Xh.isPowerOfTwo(Ac.width)&&Xh.isPowerOfTwo(Ac.height)}
function ja(Ac,$c){return Ac.generateMipmaps&&$c&&1003!==Ac.minFilter&&1006!==Ac.minFilter}function ta(Ac,$c,Ee,hd){u.generateMipmap(Ac);x.get($c).__maxMipLevel=Math.log(Math.max(Ee,hd))*Math.LOG2E}function Ha(Ac,$c,Ee){if(!1===xd)return $c;if(null!==Ac){if(void 0!==u[Ac])return u[Ac];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ac+"'")}Ac=$c;6403===$c&&(5126===Ee&&(Ac=33326),5131===Ee&&(Ac=33325),5121===Ee&&(Ac=33321));6407===$c&&(5126===Ee&&(Ac=34837),
5131===Ee&&(Ac=34843),5121===Ee&&(Ac=32849));6408===$c&&(5126===Ee&&(Ac=34836),5131===Ee&&(Ac=34842),5121===Ee&&(Ac=32856));33325!==Ac&&33326!==Ac&&34842!==Ac&&34836!==Ac||z.get("EXT_color_buffer_float");return Ac}function db(Ac){return 1003===Ac||1004===Ac||1005===Ac?9728:9729}function Ya(Ac){Ac=Ac.target;Ac.removeEventListener("dispose",Ya);var $c=x.get(Ac);void 0!==$c.__webglInit&&(u.deleteTexture($c.__webglTexture),x.remove(Ac));Ac.isVideoTexture&&$f.delete(Ac);L.memory.textures--}function vb(Ac){Ac=
Ac.target;Ac.removeEventListener("dispose",vb);var $c=x.get(Ac),Ee=x.get(Ac.texture);if(Ac){void 0!==Ee.__webglTexture&&u.deleteTexture(Ee.__webglTexture);Ac.depthTexture&&Ac.depthTexture.dispose();if(Ac.isWebGLCubeRenderTarget)for(Ee=0;6>Ee;Ee++)u.deleteFramebuffer($c.__webglFramebuffer[Ee]),$c.__webglDepthbuffer&&u.deleteRenderbuffer($c.__webglDepthbuffer[Ee]);else u.deleteFramebuffer($c.__webglFramebuffer),$c.__webglDepthbuffer&&u.deleteRenderbuffer($c.__webglDepthbuffer),$c.__webglMultisampledFramebuffer&&
u.deleteFramebuffer($c.__webglMultisampledFramebuffer),$c.__webglColorRenderbuffer&&u.deleteRenderbuffer($c.__webglColorRenderbuffer),$c.__webglDepthRenderbuffer&&u.deleteRenderbuffer($c.__webglDepthRenderbuffer);x.remove(Ac.texture);x.remove(Ac)}L.memory.textures--}function sb(Ac,$c){var Ee=x.get(Ac);if(Ac.isVideoTexture){var hd=L.render.frame;$f.get(Ac)!==hd&&($f.set(Ac,hd),Ac.update())}if(0<Ac.version&&Ee.__version!==Ac.version)if(hd=Ac.image,void 0===hd)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
else if(!1===hd.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Bc(Ee,Ac,$c);return}t.activeTexture(33984+$c);t.bindTexture(3553,Ee.__webglTexture)}function Qc(Ac,$c){var Ee=x.get(Ac);if(0<Ac.version&&Ee.__version!==Ac.version){if(6===Ac.image.length){jd(Ee,Ac);t.activeTexture(33984+$c);t.bindTexture(34067,Ee.__webglTexture);u.pixelStorei(37440,Ac.flipY);var hd=Ac&&(Ac.isCompressedTexture||Ac.image[0].isCompressedTexture),Te=Ac.image[0]&&Ac.image[0].isDataTexture;
$c=[];for(var mf=0;6>mf;mf++)$c[mf]=hd||Te?Te?Ac.image[mf].image:Ac.image[mf]:V(Ac.image[mf],!1,!0,Ae);mf=$c[0];var Lg=Z(mf)||xd,Qf=G.convert(Ac.format),Ph=G.convert(Ac.type),Kh=Ha(Ac.internalFormat,Qf,Ph);zc(34067,Ac,Lg);if(hd){for(Te=0;6>Te;Te++){var ii=$c[Te].mipmaps;for(hd=0;hd<ii.length;hd++){var Yh=ii[hd];1023!==Ac.format&&1022!==Ac.format?null!==Qf?t.compressedTexImage2D(34069+Te,hd,Kh,Yh.width,Yh.height,0,Yh.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
t.texImage2D(34069+Te,hd,Kh,Yh.width,Yh.height,0,Qf,Ph,Yh.data)}}Ee.__maxMipLevel=ii.length-1}else{ii=Ac.mipmaps;for(hd=0;6>hd;hd++)if(Te)for(t.texImage2D(34069+hd,0,Kh,$c[hd].width,$c[hd].height,0,Qf,Ph,$c[hd].data),Yh=0;Yh<ii.length;Yh++){var yk=ii[Yh].image[hd].image;t.texImage2D(34069+hd,Yh+1,Kh,yk.width,yk.height,0,Qf,Ph,yk.data)}else for(t.texImage2D(34069+hd,0,Kh,Qf,Ph,$c[hd]),Yh=0;Yh<ii.length;Yh++)t.texImage2D(34069+hd,Yh+1,Kh,Qf,Ph,ii[Yh].image[hd]);Ee.__maxMipLevel=ii.length}ja(Ac,Lg)&&
ta(34067,Ac,mf.width,mf.height);Ee.__version=Ac.version;if(Ac.onUpdate)Ac.onUpdate(Ac)}}else t.activeTexture(33984+$c),t.bindTexture(34067,Ee.__webglTexture)}function zc(Ac,$c,Ee){Ee?(u.texParameteri(Ac,10242,wh[$c.wrapS]),u.texParameteri(Ac,10243,wh[$c.wrapT]),32879!==Ac&&35866!==Ac||u.texParameteri(Ac,32882,wh[$c.wrapR]),u.texParameteri(Ac,10240,Xj[$c.magFilter]),u.texParameteri(Ac,10241,Xj[$c.minFilter])):(u.texParameteri(Ac,10242,33071),u.texParameteri(Ac,10243,33071),32879!==Ac&&35866!==Ac||
u.texParameteri(Ac,32882,33071),1001===$c.wrapS&&1001===$c.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),u.texParameteri(Ac,10240,db($c.magFilter)),u.texParameteri(Ac,10241,db($c.minFilter)),1003!==$c.minFilter&&1006!==$c.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!(Ee=z.get("EXT_texture_filter_anisotropic"))||
1015===$c.type&&null===z.get("OES_texture_float_linear")||1016===$c.type&&null===(xd||z.get("OES_texture_half_float_linear"))||!(1<$c.anisotropy||x.get($c).__currentAnisotropy)||(u.texParameterf(Ac,Ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($c.anisotropy,C.getMaxAnisotropy())),x.get($c).__currentAnisotropy=$c.anisotropy)}function jd(Ac,$c){void 0===Ac.__webglInit&&(Ac.__webglInit=!0,$c.addEventListener("dispose",Ya),Ac.__webglTexture=u.createTexture(),L.memory.textures++)}function Bc(Ac,$c,Ee){var hd=
3553;$c.isDataTexture2DArray&&(hd=35866);$c.isDataTexture3D&&(hd=32879);jd(Ac,$c);t.activeTexture(33984+Ee);t.bindTexture(hd,Ac.__webglTexture);u.pixelStorei(37440,$c.flipY);u.pixelStorei(37441,$c.premultiplyAlpha);u.pixelStorei(3317,$c.unpackAlignment);Ee=xd?!1:1001!==$c.wrapS||1001!==$c.wrapT||1003!==$c.minFilter&&1006!==$c.minFilter;Ee=Ee&&!1===Z($c.image);Ee=V($c.image,Ee,!1,uf);var Te=Z(Ee)||xd,mf=G.convert($c.format),Lg=G.convert($c.type),Qf=Ha($c.internalFormat,mf,Lg);zc(hd,$c,Te);var Ph=$c.mipmaps;
if($c.isDepthTexture)Qf=6402,xd?Qf=1015===$c.type?36012:1014===$c.type?33190:1020===$c.type?35056:33189:1015===$c.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===$c.format&&6402===Qf&&1012!==$c.type&&1014!==$c.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$c.type=1012,Lg=G.convert($c.type)),1027===$c.format&&6402===Qf&&(Qf=34041,1020!==$c.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
$c.type=1020,Lg=G.convert($c.type))),t.texImage2D(3553,0,Qf,Ee.width,Ee.height,0,mf,Lg,null);else if($c.isDataTexture)if(0<Ph.length&&Te){for(var Kh=0,ii=Ph.length;Kh<ii;Kh++){var Yh=Ph[Kh];t.texImage2D(3553,Kh,Qf,Yh.width,Yh.height,0,mf,Lg,Yh.data)}$c.generateMipmaps=!1;Ac.__maxMipLevel=Ph.length-1}else t.texImage2D(3553,0,Qf,Ee.width,Ee.height,0,mf,Lg,Ee.data),Ac.__maxMipLevel=0;else if($c.isCompressedTexture){Kh=0;for(ii=Ph.length;Kh<ii;Kh++)Yh=Ph[Kh],1023!==$c.format&&1022!==$c.format?null!==
mf?t.compressedTexImage2D(3553,Kh,Qf,Yh.width,Yh.height,0,Yh.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Kh,Qf,Yh.width,Yh.height,0,mf,Lg,Yh.data);Ac.__maxMipLevel=Ph.length-1}else if($c.isDataTexture2DArray)t.texImage3D(35866,0,Qf,Ee.width,Ee.height,Ee.depth,0,mf,Lg,Ee.data),Ac.__maxMipLevel=0;else if($c.isDataTexture3D)t.texImage3D(32879,0,Qf,Ee.width,Ee.height,Ee.depth,0,mf,Lg,Ee.data),Ac.__maxMipLevel=0;
else if(0<Ph.length&&Te){Kh=0;for(ii=Ph.length;Kh<ii;Kh++)Yh=Ph[Kh],t.texImage2D(3553,Kh,Qf,mf,Lg,Yh);$c.generateMipmaps=!1;Ac.__maxMipLevel=Ph.length-1}else t.texImage2D(3553,0,Qf,mf,Lg,Ee),Ac.__maxMipLevel=0;ja($c,Te)&&ta(hd,$c,Ee.width,Ee.height);Ac.__version=$c.version;if($c.onUpdate)$c.onUpdate($c)}function kd(Ac,$c,Ee,hd){var Te=G.convert($c.texture.format),mf=G.convert($c.texture.type),Lg=Ha($c.texture.internalFormat,Te,mf);t.texImage2D(hd,0,Lg,$c.width,$c.height,0,Te,mf,null);u.bindFramebuffer(36160,
Ac);u.framebufferTexture2D(36160,Ee,hd,x.get($c.texture).__webglTexture,0);u.bindFramebuffer(36160,null)}function ud(Ac,$c,Ee){u.bindRenderbuffer(36161,Ac);if($c.depthBuffer&&!$c.stencilBuffer){var hd=33189;Ee?((Ee=$c.depthTexture)&&Ee.isDepthTexture&&(1015===Ee.type?hd=36012:1014===Ee.type&&(hd=33190)),Ee=Vd($c),u.renderbufferStorageMultisample(36161,Ee,hd,$c.width,$c.height)):u.renderbufferStorage(36161,hd,$c.width,$c.height);u.framebufferRenderbuffer(36160,36096,36161,Ac)}else $c.depthBuffer&&
$c.stencilBuffer?(Ee?(Ee=Vd($c),u.renderbufferStorageMultisample(36161,Ee,35056,$c.width,$c.height)):u.renderbufferStorage(36161,34041,$c.width,$c.height),u.framebufferRenderbuffer(36160,33306,36161,Ac)):(Ac=G.convert($c.texture.format),hd=G.convert($c.texture.type),Ac=Ha($c.texture.internalFormat,Ac,hd),Ee?(Ee=Vd($c),u.renderbufferStorageMultisample(36161,Ee,Ac,$c.width,$c.height)):u.renderbufferStorage(36161,Ac,$c.width,$c.height));u.bindRenderbuffer(36161,null)}function Vd(Ac){return xd&&Ac.isWebGLMultisampleRenderTarget?
Math.min(Ff,Ac.samples):0}var Ad,gd,xd=C.isWebGL2,jf=C.maxTextures,Ae=C.maxCubemapSize,uf=C.maxTextureSize,Ff=C.maxSamples,$f=new WeakMap,gh,Qg=!1;try{Qg="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(Ac){}var Gi=0,wh=(Ad={},Ad[1E3]=10497,Ad[1001]=33071,Ad[1002]=33648,Ad),Xj=(gd={},gd[1003]=9728,gd[1004]=9984,gd[1005]=9986,gd[1006]=9729,gd[1007]=9985,gd[1008]=9987,gd),zk=!1,Kl=!1;(this||p).allocateTextureUnit=function(){var Ac=Gi;Ac>=jf&&console.warn("THREE.WebGLTextures: Trying to use "+
Ac+" texture units while this GPU supports only "+jf);Gi+=1;return Ac};(this||p).resetTextureUnits=function(){Gi=0};(this||p).setTexture2D=sb;(this||p).setTexture2DArray=function(Ac,$c){var Ee=x.get(Ac);0<Ac.version&&Ee.__version!==Ac.version?Bc(Ee,Ac,$c):(t.activeTexture(33984+$c),t.bindTexture(35866,Ee.__webglTexture))};(this||p).setTexture3D=function(Ac,$c){var Ee=x.get(Ac);0<Ac.version&&Ee.__version!==Ac.version?Bc(Ee,Ac,$c):(t.activeTexture(33984+$c),t.bindTexture(32879,Ee.__webglTexture))};
(this||p).setTextureCube=Qc;(this||p).setupRenderTarget=function(Ac){var $c=x.get(Ac),Ee=x.get(Ac.texture);Ac.addEventListener("dispose",vb);Ee.__webglTexture=u.createTexture();L.memory.textures++;var hd=!0===Ac.isWebGLCubeRenderTarget,Te=!0===Ac.isWebGLMultisampleRenderTarget,mf=Z(Ac)||xd;!xd||1022!==Ac.texture.format||1015!==Ac.texture.type&&1016!==Ac.texture.type||(Ac.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));
if(hd)for($c.__webglFramebuffer=[],Te=0;6>Te;Te++)$c.__webglFramebuffer[Te]=u.createFramebuffer();else if($c.__webglFramebuffer=u.createFramebuffer(),Te)if(xd){$c.__webglMultisampledFramebuffer=u.createFramebuffer();$c.__webglColorRenderbuffer=u.createRenderbuffer();u.bindRenderbuffer(36161,$c.__webglColorRenderbuffer);Te=G.convert(Ac.texture.format);var Lg=G.convert(Ac.texture.type);Te=Ha(Ac.texture.internalFormat,Te,Lg);Lg=Vd(Ac);u.renderbufferStorageMultisample(36161,Lg,Te,Ac.width,Ac.height);
u.bindFramebuffer(36160,$c.__webglMultisampledFramebuffer);u.framebufferRenderbuffer(36160,36064,36161,$c.__webglColorRenderbuffer);u.bindRenderbuffer(36161,null);Ac.depthBuffer&&($c.__webglDepthRenderbuffer=u.createRenderbuffer(),ud($c.__webglDepthRenderbuffer,Ac,!0));u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(hd){t.bindTexture(34067,Ee.__webglTexture);zc(34067,Ac.texture,mf);for(Ee=0;6>Ee;Ee++)kd($c.__webglFramebuffer[Ee],
Ac,36064,34069+Ee);ja(Ac.texture,mf)&&ta(34067,Ac.texture,Ac.width,Ac.height);t.bindTexture(34067,null)}else t.bindTexture(3553,Ee.__webglTexture),zc(3553,Ac.texture,mf),kd($c.__webglFramebuffer,Ac,36064,3553),ja(Ac.texture,mf)&&ta(3553,Ac.texture,Ac.width,Ac.height),t.bindTexture(3553,null);if(Ac.depthBuffer){$c=x.get(Ac);mf=!0===Ac.isWebGLCubeRenderTarget;if(Ac.depthTexture){if(mf)throw Error("target.depthTexture not supported in Cube render targets");if(Ac&&Ac.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");
u.bindFramebuffer(36160,$c.__webglFramebuffer);if(!Ac.depthTexture||!Ac.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");x.get(Ac.depthTexture).__webglTexture&&Ac.depthTexture.image.width===Ac.width&&Ac.depthTexture.image.height===Ac.height||(Ac.depthTexture.image.width=Ac.width,Ac.depthTexture.image.height=Ac.height,Ac.depthTexture.needsUpdate=!0);sb(Ac.depthTexture,0);$c=x.get(Ac.depthTexture).__webglTexture;if(1026===Ac.depthTexture.format)u.framebufferTexture2D(36160,
36096,3553,$c,0);else if(1027===Ac.depthTexture.format)u.framebufferTexture2D(36160,33306,3553,$c,0);else throw Error("Unknown depthTexture format");}else if(mf)for($c.__webglDepthbuffer=[],mf=0;6>mf;mf++)u.bindFramebuffer(36160,$c.__webglFramebuffer[mf]),$c.__webglDepthbuffer[mf]=u.createRenderbuffer(),ud($c.__webglDepthbuffer[mf],Ac,!1);else u.bindFramebuffer(36160,$c.__webglFramebuffer),$c.__webglDepthbuffer=u.createRenderbuffer(),ud($c.__webglDepthbuffer,Ac,!1);u.bindFramebuffer(36160,null)}};
(this||p).updateRenderTargetMipmap=function(Ac){var $c=Ac.texture,Ee=Z(Ac)||xd;if(ja($c,Ee)){Ee=Ac.isWebGLCubeRenderTarget?34067:3553;var hd=x.get($c).__webglTexture;t.bindTexture(Ee,hd);ta(Ee,$c,Ac.width,Ac.height);t.bindTexture(Ee,null)}};(this||p).updateMultisampleRenderTarget=function(Ac){if(Ac.isWebGLMultisampleRenderTarget)if(xd){var $c=x.get(Ac);u.bindFramebuffer(36008,$c.__webglMultisampledFramebuffer);u.bindFramebuffer(36009,$c.__webglFramebuffer);var Ee=Ac.width,hd=Ac.height,Te=16384;Ac.depthBuffer&&
(Te|=256);Ac.stencilBuffer&&(Te|=1024);u.blitFramebuffer(0,0,Ee,hd,0,0,Ee,hd,Te,9728);u.bindFramebuffer(36160,$c.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};(this||p).safeSetTexture2D=function(Ac,$c){Ac&&Ac.isWebGLRenderTarget&&(!1===zk&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),zk=!0),Ac=Ac.texture);sb(Ac,$c)};(this||p).safeSetTextureCube=
function(Ac,$c){Ac&&Ac.isWebGLCubeRenderTarget&&(!1===Kl&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Kl=!0),Ac=Ac.texture);Qc(Ac,$c)}}function $9(u,z,t){var x=t.isWebGL2;return{convert:function(C){if(1009===C)return 5121;if(1017===C)return 32819;if(1018===C)return 32820;if(1019===C)return 33635;if(1010===C)return 5120;if(1011===C)return 5122;if(1012===C)return 5123;if(1013===C)return 5124;if(1014===C)return 5125;
if(1015===C)return 5126;if(1016===C){if(x)return 5131;var G=z.get("OES_texture_half_float");return null!==G?G.HALF_FLOAT_OES:null}if(1021===C)return 6406;if(1022===C)return 6407;if(1023===C)return 6408;if(1024===C)return 6409;if(1025===C)return 6410;if(1026===C)return 6402;if(1027===C)return 34041;if(1028===C)return 6403;if(1029===C)return 36244;if(1030===C)return 33319;if(1031===C)return 33320;if(1032===C)return 36248;if(1033===C)return 36249;if(33776===C||33777===C||33778===C||33779===C)if(G=z.get("WEBGL_compressed_texture_s3tc"),
null!==G){if(33776===C)return G.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===C)return G.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===C)return G.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===C)return G.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===C||35841===C||35842===C||35843===C)if(G=z.get("WEBGL_compressed_texture_pvrtc"),null!==G){if(35840===C)return G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===C)return G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===C)return G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===
C)return G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===C)return G=z.get("WEBGL_compressed_texture_etc1"),null!==G?G.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===C||37496===C)if(G=z.get("WEBGL_compressed_texture_etc"),null!==G){if(37492===C)return G.COMPRESSED_RGB8_ETC2;if(37496===C)return G.COMPRESSED_RGBA8_ETC2_EAC}if(37808===C||37809===C||37810===C||37811===C||37812===C||37813===C||37814===C||37815===C||37816===C||37817===C||37818===C||37819===C||37820===C||37821===C||37840===C||37841===
C||37842===C||37843===C||37844===C||37845===C||37846===C||37847===C||37848===C||37849===C||37850===C||37851===C||37852===C||37853===C)return G=z.get("WEBGL_compressed_texture_astc"),null!==G?C:null;if(36492===C)return G=z.get("EXT_texture_compression_bptc"),null!==G?C:null;if(1020===C){if(x)return 34042;G=z.get("WEBGL_depth_texture");return null!==G?G.UNSIGNED_INT_24_8_WEBGL:null}}}}function WN(u){ic.call(this||p);(this||p).cameras=u||[]}function dz(){E.call(this||p);(this||p).type="Group"}function XH(){(this||
p)._targetRay=null;(this||p)._grip=null;(this||p)._hand=null}function a$(u,z){function t(gd){var xd=Ya.get(gd.inputSource);xd&&xd.dispatchEvent({type:gd.type,data:gd.inputSource})}function x(){Ya.forEach(function(gd,xd){gd.disconnect(xd)});Ya.clear();u.setFramebuffer(null);u.setRenderTarget(u.getRenderTarget());Ad.stop();S.isPresenting=!1;S.dispatchEvent({type:"sessionend"})}function C(gd){ja=gd;Ad.setContext(V);Ad.start();S.isPresenting=!0;S.dispatchEvent({type:"sessionstart"})}function G(gd){for(var xd=
V.inputSources,jf=0;jf<db.length;jf++)Ya.set(xd[jf],db[jf]);for(xd=0;xd<gd.removed.length;xd++){jf=gd.removed[xd];var Ae=Ya.get(jf);Ae&&(Ae.dispatchEvent({type:"disconnected",data:jf}),Ya.delete(jf))}for(xd=0;xd<gd.added.length;xd++)jf=gd.added[xd],(Ae=Ya.get(jf))&&Ae.dispatchEvent({type:"connected",data:jf})}function L(gd,xd){null===xd?gd.matrixWorld.copy(gd.matrix):gd.matrixWorld.multiplyMatrices(xd.matrixWorld,gd.matrix);gd.matrixWorldInverse.getInverse(gd.matrixWorld)}var S=this||p,V=null,Z=1,
ja=null,ta="local-floor",Ha=null,db=[],Ya=new Map,vb=new ic;vb.layers.enable(1);vb.viewport=new Rk;var sb=new ic;sb.layers.enable(2);sb.viewport=new Rk;var Qc=[vb,sb],zc=new WN;zc.layers.enable(1);zc.layers.enable(2);var jd=null,Bc=null;(this||p).enabled=!1;(this||p).isPresenting=!1;(this||p).getController=function(gd){var xd=db[gd];void 0===xd&&(xd=new XH,db[gd]=xd);return xd.getTargetRaySpace()};(this||p).getControllerGrip=function(gd){var xd=db[gd];void 0===xd&&(xd=new XH,db[gd]=xd);return xd.getGripSpace()};
(this||p).getHand=function(gd){var xd=db[gd];void 0===xd&&(xd=new XH,db[gd]=xd);return xd.getHandSpace()};(this||p).setFramebufferScaleFactor=function(gd){Z=gd;!0===S.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};(this||p).setReferenceSpaceType=function(gd){ta=gd;!0===S.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};(this||p).getReferenceSpace=function(){return ja};(this||p).getSession=
function(){return V};(this||p).setSession=function(gd){V=gd;null!==V&&(V.addEventListener("select",t),V.addEventListener("selectstart",t),V.addEventListener("selectend",t),V.addEventListener("squeeze",t),V.addEventListener("squeezestart",t),V.addEventListener("squeezeend",t),V.addEventListener("end",x),gd=z.getContextAttributes(),!0!==gd.xrCompatible&&z.makeXRCompatible(),gd=new XRWebGLLayer(V,z,{antialias:gd.antialias,alpha:gd.alpha,depth:gd.depth,stencil:gd.stencil,framebufferScaleFactor:Z}),V.updateRenderState({baseLayer:gd}),
V.requestReferenceSpace(ta).then(C),V.addEventListener("inputsourceschange",G))};var kd=new nc,ud=new nc;(this||p).getCamera=function(gd){zc.near=sb.near=vb.near=gd.near;zc.far=sb.far=vb.far=gd.far;if(jd!==zc.near||Bc!==zc.far)V.updateRenderState({depthNear:zc.near,depthFar:zc.far}),jd=zc.near,Bc=zc.far;var xd=gd.parent,jf=zc.cameras;L(zc,xd);for(var Ae=0;Ae<jf.length;Ae++)L(jf[Ae],xd);gd.matrixWorld.copy(zc.matrixWorld);gd=gd.children;xd=0;for(Ae=gd.length;xd<Ae;xd++)gd[xd].updateMatrixWorld(!0);
if(2===jf.length){kd.setFromMatrixPosition(vb.matrixWorld);ud.setFromMatrixPosition(sb.matrixWorld);jf=kd.distanceTo(ud);var uf=vb.projectionMatrix.elements,Ff=sb.projectionMatrix.elements,$f=uf[14]/(uf[10]-1);gd=uf[14]/(uf[10]+1);xd=(uf[9]+1)/uf[5];Ae=(uf[9]-1)/uf[5];var gh=(uf[8]-1)/uf[0],Qg=(Ff[8]+1)/Ff[0];Ff=$f*gh;uf=$f*Qg;Qg=jf/(-gh+Qg);gh=Qg*-gh;vb.matrixWorld.decompose(zc.position,zc.quaternion,zc.scale);zc.translateX(gh);zc.translateZ(Qg);zc.matrixWorld.compose(zc.position,zc.quaternion,zc.scale);
zc.matrixWorldInverse.getInverse(zc.matrixWorld);$f+=Qg;Qg=gd+Qg;zc.projectionMatrix.makePerspective(Ff-gh,uf+(jf-gh),xd*gd/Qg*$f,Ae*gd/Qg*$f,$f,Qg)}else zc.projectionMatrix.copy(vb.projectionMatrix);return zc};var Vd=null,Ad=new zd;Ad.setAnimationLoop(function(gd,xd){Ha=xd.getViewerPose(ja);if(null!==Ha){var jf=Ha.views,Ae=V.renderState.baseLayer;u.setFramebuffer(Ae.framebuffer);var uf=!1;jf.length!==zc.cameras.length&&(zc.cameras.length=0,uf=!0);for(var Ff=0;Ff<jf.length;Ff++){var $f=jf[Ff],gh=
Ae.getViewport($f),Qg=Qc[Ff];Qg.matrix.fromArray($f.transform.matrix);Qg.projectionMatrix.fromArray($f.projectionMatrix);Qg.viewport.set(gh.x,gh.y,gh.width,gh.height);0===Ff&&zc.matrix.copy(Qg.matrix);!0===uf&&zc.cameras.push(Qg)}}jf=V.inputSources;for(Ae=0;Ae<db.length;Ae++)db[Ae].update(jf[Ae],xd,ja);Vd&&Vd(gd,xd)});(this||p).setAnimationLoop=function(gd){Vd=gd};(this||p).dispose=function(){}}function nra(u){function z(x,C){x.opacity.value=C.opacity;C.color&&x.diffuse.value.copy(C.color);C.emissive&&
x.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity);C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=C.alphaMap);C.specularMap&&(x.specularMap.value=C.specularMap);var G=u.get(C).envMap;G&&(x.envMap.value=G,x.flipEnvMap.value=G.isCubeTexture&&G._needsFlipEnvMap?-1:1,x.reflectivity.value=C.reflectivity,x.refractionRatio.value=C.refractionRatio,G=u.get(G).__maxMipLevel,void 0!==G&&(x.maxMipLevel.value=G));C.lightMap&&(x.lightMap.value=C.lightMap,x.lightMapIntensity.value=C.lightMapIntensity);
C.aoMap&&(x.aoMap.value=C.aoMap,x.aoMapIntensity.value=C.aoMapIntensity);if(C.map)var L=C.map;else C.specularMap?L=C.specularMap:C.displacementMap?L=C.displacementMap:C.normalMap?L=C.normalMap:C.bumpMap?L=C.bumpMap:C.roughnessMap?L=C.roughnessMap:C.metalnessMap?L=C.metalnessMap:C.alphaMap?L=C.alphaMap:C.emissiveMap?L=C.emissiveMap:C.clearcoatMap?L=C.clearcoatMap:C.clearcoatNormalMap?L=C.clearcoatNormalMap:C.clearcoatRoughnessMap&&(L=C.clearcoatRoughnessMap);void 0!==L&&(L.isWebGLRenderTarget&&(L=
L.texture),!0===L.matrixAutoUpdate&&L.updateMatrix(),x.uvTransform.value.copy(L.matrix));if(C.aoMap)var S=C.aoMap;else C.lightMap&&(S=C.lightMap);void 0!==S&&(S.isWebGLRenderTarget&&(S=S.texture),!0===S.matrixAutoUpdate&&S.updateMatrix(),x.uv2Transform.value.copy(S.matrix))}function t(x,C){x.roughness.value=C.roughness;x.metalness.value=C.metalness;C.roughnessMap&&(x.roughnessMap.value=C.roughnessMap);C.metalnessMap&&(x.metalnessMap.value=C.metalnessMap);C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap);
C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=-1));C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate());C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);u.get(C).envMap&&(x.envMapIntensity.value=C.envMapIntensity)}return{refreshFogUniforms:function(x,C){x.fogColor.value.copy(C.color);
C.isFog?(x.fogNear.value=C.near,x.fogFar.value=C.far):C.isFogExp2&&(x.fogDensity.value=C.density)},refreshMaterialUniforms:function(x,C,G,L){if(C.isMeshBasicMaterial)z(x,C);else if(C.isMeshLambertMaterial)z(x,C),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap);else if(C.isMeshToonMaterial)z(x,C),C.gradientMap&&(x.gradientMap.value=C.gradientMap),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=
-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshPhongMaterial)z(x,C),x.specular.value.copy(C.specular),x.shininess.value=Math.max(C.shininess,1E-4),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=
C.bumpScale,1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshStandardMaterial)z(x,C),C.isMeshPhysicalMaterial?(t(x,C),x.reflectivity.value=C.reflectivity,x.clearcoat.value=C.clearcoat,x.clearcoatRoughness.value=C.clearcoatRoughness,
C.sheen&&x.sheen.value.copy(C.sheen),C.clearcoatMap&&(x.clearcoatMap.value=C.clearcoatMap),C.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap),C.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),x.clearcoatNormalMap.value=C.clearcoatNormalMap,1===C.side&&x.clearcoatNormalScale.value.negate()),x.transmission.value=C.transmission,C.transmissionMap&&(x.transmissionMap.value=C.transmissionMap)):t(x,C);else if(C.isMeshMatcapMaterial)z(x,C),C.matcap&&
(x.matcap.value=C.matcap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshDepthMaterial)z(x,C),C.displacementMap&&(x.displacementMap.value=C.displacementMap,
x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshDistanceMaterial)z(x,C),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias),x.referencePosition.value.copy(C.referencePosition),x.nearDistance.value=C.nearDistance,x.farDistance.value=C.farDistance;else if(C.isMeshNormalMaterial)z(x,C),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,
1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isLineBasicMaterial)x.diffuse.value.copy(C.color),x.opacity.value=C.opacity,C.isLineDashedMaterial&&(x.dashSize.value=C.dashSize,x.totalSize.value=C.dashSize+C.gapSize,x.scale.value=
C.scale);else if(C.isPointsMaterial){x.diffuse.value.copy(C.color);x.opacity.value=C.opacity;x.size.value=C.size*G;x.scale.value=.5*L;C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=C.alphaMap);if(C.map)var S=C.map;else C.alphaMap&&(S=C.alphaMap);void 0!==S&&(!0===S.matrixAutoUpdate&&S.updateMatrix(),x.uvTransform.value.copy(S.matrix))}else if(C.isSpriteMaterial){x.diffuse.value.copy(C.color);x.opacity.value=C.opacity;x.rotation.value=C.rotation;C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=
C.alphaMap);if(C.map)var V=C.map;else C.alphaMap&&(V=C.alphaMap);void 0!==V&&(!0===V.matrixAutoUpdate&&V.updateMatrix(),x.uvTransform.value.copy(V.matrix))}else C.isShadowMaterial?(x.color.value.copy(C.color),x.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}}}function YH(u){function z(lc,ze){for(var Pd=0;Pd<lc.length;Pd++){var Pe=db.getContext(lc[Pd],ze);if(null!==Pe)return Pe}return null}function t(){cg=new Md(Be);oh=new yb(Be,cg,u);!1===oh.isWebGL2&&(cg.get("WEBGL_depth_texture"),
cg.get("OES_texture_float"),cg.get("OES_texture_half_float"),cg.get("OES_texture_half_float_linear"),cg.get("OES_standard_derivatives"),cg.get("OES_element_index_uint"),cg.get("OES_vertex_array_object"),cg.get("ANGLE_instanced_arrays"));cg.get("OES_texture_float_linear");cx=new $9(Be,cg,oh);ch=new lra(Be,cg,oh);ch.scissor(Xj.copy(mf).multiplyScalar($c).floor());ch.viewport(wh.copy(Te).multiplyScalar($c).floor());yj=new Se(Be);hj=new de;Ll=new mra(Be,cg,ch,hj,oh,cx,yj);Lk=new Od(gd);Iq=new ld(Be,oh);
Er=new Da(Be,cg,Iq,oh);dx=new Wc(Be,Iq,yj,Er);ez=new cj(Be,dx,Iq,yj);b$=new nj(Be);cu=new ac(hj);KB=new Ob(gd,Lk,cg,oh,Er,cu);aW=new nra(hj);XN=new We(hj);nE=new kra(cg,oh);fz=new la(gd,Lk,ch,ez,jd);c$=new Pa(Be,cg,yj,oh);d$=new cf(Be,cg,yj,oh);yj.programs=KB.programs;gd.capabilities=oh;gd.extensions=cg;gd.properties=hj;gd.renderLists=XN;gd.state=ch;gd.info=yj}function x(lc){lc.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");xd=!0}function C(){console.log("THREE.WebGLRenderer: Context Restored.");
xd=!1;t()}function G(lc){lc=lc.target;lc.removeEventListener("dispose",G);L(lc);hj.remove(lc)}function L(lc){lc=hj.get(lc).program;void 0!==lc&&KB.releaseProgram(lc)}function S(lc,ze){lc.render(function(Pd){gd.renderBufferImmediate(Pd,ze)})}function V(lc,ze,Pd,Pe){if(!1!==lc.visible){if(lc.layers.test(ze.layers))if(lc.isGroup)Pd=lc.renderOrder;else if(lc.isLOD)!0===lc.autoUpdate&&lc.update(ze);else if(lc.isLight)Ad.pushLight(lc),lc.castShadow&&Ad.pushShadow(lc);else if(lc.isSprite){if(!lc.frustumCulled||
Qf.intersectsSprite(lc)){Pe&&Yh.setFromMatrixPosition(lc.matrixWorld).applyMatrix4(ii);var Uf=ez.update(lc),Og=lc.material;Og.visible&&Vd.push(lc,Uf,Og,Pd,Yh.z,null)}}else if(lc.isImmediateRenderObject)Pe&&Yh.setFromMatrixPosition(lc.matrixWorld).applyMatrix4(ii),Vd.push(lc,null,lc.material,Pd,Yh.z,null);else if(lc.isMesh||lc.isLine||lc.isPoints)if(lc.isSkinnedMesh&&lc.skeleton.frame!==yj.render.frame&&(lc.skeleton.update(),lc.skeleton.frame=yj.render.frame),!lc.frustumCulled||Qf.intersectsObject(lc))if(Pe&&
Yh.setFromMatrixPosition(lc.matrixWorld).applyMatrix4(ii),Uf=ez.update(lc),Og=lc.material,Array.isArray(Og))for(var Wg=Uf.groups,Hj=0,zj=Wg.length;Hj<zj;Hj++){var mo=Wg[Hj],Yj=Og[mo.materialIndex];Yj&&Yj.visible&&Vd.push(lc,Uf,Yj,Pd,Yh.z,mo)}else Og.visible&&Vd.push(lc,Uf,Og,Pd,Yh.z,null);lc=lc.children;Uf=0;for(Og=lc.length;Uf<Og;Uf++)V(lc[Uf],ze,Pd,Pe)}}function Z(lc,ze,Pd){for(var Pe=!0===ze.isScene?ze.overrideMaterial:null,Uf=0,Og=lc.length;Uf<Og;Uf++){var Wg=lc[Uf],Hj=Wg.object,zj=Wg.geometry,
mo=null===Pe?Wg.material:Pe;Wg=Wg.group;if(Pd.isArrayCamera){Gi=Pd;for(var Yj=Pd.cameras,LB=0,bW=Yj.length;LB<bW;LB++){var YN=Yj[LB];Hj.layers.test(YN.layers)&&(ch.viewport(wh.copy(YN.viewport)),Ad.setupLights(YN),ja(Hj,ze,YN,zj,mo,Wg))}}else Gi=null,ja(Hj,ze,Pd,zj,mo,Wg)}}function ja(lc,ze,Pd,Pe,Uf,Og){lc.onBeforeRender(gd,ze,Pd,Pe,Uf,Og);Ad=nE.get(ze,Gi||Pd);lc.modelViewMatrix.multiplyMatrices(Pd.matrixWorldInverse,lc.matrixWorld);lc.normalMatrix.getNormalMatrix(lc.modelViewMatrix);if(lc.isImmediateRenderObject){var Wg=
Ha(Pd,ze,Uf,lc);ch.setMaterial(Uf);Er.reset();S(lc,Wg)}else gd.renderBufferDirect(Pd,ze,Pe,Uf,lc,Og);lc.onAfterRender(gd,ze,Pd,Pe,Uf,Og);Ad=nE.get(ze,Gi||Pd)}function ta(lc,ze,Pd){!0!==ze.isScene&&(ze=yk);var Pe=hj.get(lc),Uf=Ad.state.lights,Og=Uf.state.version;Pd=KB.getParameters(lc,Uf.state,Ad.state.shadowsArray,ze,Pd);var Wg=KB.getProgramCacheKey(Pd),Hj=Pe.program,zj=!0;if(void 0===Hj)lc.addEventListener("dispose",G);else if(Hj.cacheKey!==Wg)L(lc);else{if(Pe.lightsStateVersion===Og&&void 0!==Pd.shaderID){ze=
lc.isMeshStandardMaterial?ze.environment:null;Pe.envMap=Lk.get(lc.envMap||ze);return}zj=!1}zj&&(Pd.uniforms=KB.getUniforms(lc),lc.onBeforeCompile(Pd,gd),Hj=KB.acquireProgram(Pd,Wg),Pe.program=Hj,Pe.uniforms=Pd.uniforms,Pe.outputEncoding=Pd.outputEncoding);Pd=Pe.uniforms;if(!lc.isShaderMaterial&&!lc.isRawShaderMaterial||!0===lc.clipping)Pe.numClippingPlanes=cu.numPlanes,Pe.numIntersection=cu.numIntersection,Pd.clippingPlanes=cu.uniform;Pe.environment=lc.isMeshStandardMaterial?ze.environment:null;Pe.fog=
ze.fog;Pe.envMap=Lk.get(lc.envMap||Pe.environment);Pe.needsLights=lc.isMeshLambertMaterial||lc.isMeshToonMaterial||lc.isMeshPhongMaterial||lc.isMeshStandardMaterial||lc.isShadowMaterial||lc.isShaderMaterial&&!0===lc.lights;Pe.lightsStateVersion=Og;Pe.needsLights&&(Pd.ambientLightColor.value=Uf.state.ambient,Pd.lightProbe.value=Uf.state.probe,Pd.directionalLights.value=Uf.state.directional,Pd.directionalLightShadows.value=Uf.state.directionalShadow,Pd.spotLights.value=Uf.state.spot,Pd.spotLightShadows.value=
Uf.state.spotShadow,Pd.rectAreaLights.value=Uf.state.rectArea,Pd.ltc_1.value=Uf.state.rectAreaLTC1,Pd.ltc_2.value=Uf.state.rectAreaLTC2,Pd.pointLights.value=Uf.state.point,Pd.pointLightShadows.value=Uf.state.pointShadow,Pd.hemisphereLights.value=Uf.state.hemi,Pd.directionalShadowMap.value=Uf.state.directionalShadowMap,Pd.directionalShadowMatrix.value=Uf.state.directionalShadowMatrix,Pd.spotShadowMap.value=Uf.state.spotShadowMap,Pd.spotShadowMatrix.value=Uf.state.spotShadowMatrix,Pd.pointShadowMap.value=
Uf.state.pointShadowMap,Pd.pointShadowMatrix.value=Uf.state.pointShadowMatrix);lc=Pe.program.getUniforms();lc=yv.seqWithValue(lc.seq,Pd);Pe.uniformsList=lc}function Ha(lc,ze,Pd,Pe){!0!==ze.isScene&&(ze=yk);Ll.resetTextureUnits();var Uf=ze.fog,Og=Pd.isMeshStandardMaterial?ze.environment:null,Wg=null===Ff?gd.outputEncoding:Ff.texture.encoding,Hj=Lk.get(Pd.envMap||Og),zj=hj.get(Pd),mo=Ad.state.lights;!0!==Ph||!0!==Kh&&lc===Qg||cu.setState(Pd,lc,lc===Qg&&Pd.id===gh);Pd.version===zj.__version?Pd.fog&&
zj.fog!==Uf?ta(Pd,ze,Pe):zj.environment!==Og?ta(Pd,ze,Pe):zj.needsLights&&zj.lightsStateVersion!==mo.state.version?ta(Pd,ze,Pe):void 0===zj.numClippingPlanes||zj.numClippingPlanes===cu.numPlanes&&zj.numIntersection===cu.numIntersection?zj.outputEncoding!==Wg?ta(Pd,ze,Pe):zj.envMap!==Hj&&ta(Pd,ze,Pe):ta(Pd,ze,Pe):(ta(Pd,ze,Pe),zj.__version=Pd.version);var Yj=!1;mo=Hj=!1;ze=zj.program;Og=ze.getUniforms();Wg=zj.uniforms;ch.useProgram(ze.program)&&(mo=Hj=Yj=!0);Pd.id!==gh&&(gh=Pd.id,Hj=!0);if(Yj||Qg!==
lc){Og.setValue(Be,"projectionMatrix",lc.projectionMatrix);oh.logarithmicDepthBuffer&&Og.setValue(Be,"logDepthBufFC",2/(Math.log(lc.far+1)/Math.LN2));Qg!==lc&&(Qg=lc,mo=Hj=!0);if(Pd.isShaderMaterial||Pd.isMeshPhongMaterial||Pd.isMeshToonMaterial||Pd.isMeshStandardMaterial||Pd.envMap)Yj=Og.map.cameraPosition,void 0!==Yj&&Yj.setValue(Be,Yh.setFromMatrixPosition(lc.matrixWorld));(Pd.isMeshPhongMaterial||Pd.isMeshToonMaterial||Pd.isMeshLambertMaterial||Pd.isMeshBasicMaterial||Pd.isMeshStandardMaterial||
Pd.isShaderMaterial)&&Og.setValue(Be,"isOrthographic",!0===lc.isOrthographicCamera);(Pd.isMeshPhongMaterial||Pd.isMeshToonMaterial||Pd.isMeshLambertMaterial||Pd.isMeshBasicMaterial||Pd.isMeshStandardMaterial||Pd.isShaderMaterial||Pd.isShadowMaterial||Pd.skinning)&&Og.setValue(Be,"viewMatrix",lc.matrixWorldInverse)}if(Pd.skinning&&(Og.setOptional(Be,Pe,"bindMatrix"),Og.setOptional(Be,Pe,"bindMatrixInverse"),lc=Pe.skeleton))if(Yj=lc.bones,oh.floatVertexTextures){if(void 0===lc.boneTexture){Yj=Math.sqrt(4*
Yj.length);Yj=Xh.ceilPowerOfTwo(Yj);Yj=Math.max(Yj,4);var LB=new Float32Array(Yj*Yj*4);LB.set(lc.boneMatrices);var bW=new Rb(LB,Yj,Yj,1023,1015);lc.boneMatrices=LB;lc.boneTexture=bW;lc.boneTextureSize=Yj}Og.setValue(Be,"boneTexture",lc.boneTexture,Ll);Og.setValue(Be,"boneTextureSize",lc.boneTextureSize)}else Og.setOptional(Be,lc,"boneMatrices");if(Hj||zj.receiveShadow!==Pe.receiveShadow)zj.receiveShadow=Pe.receiveShadow,Og.setValue(Be,"receiveShadow",Pe.receiveShadow);Hj&&(Og.setValue(Be,"toneMappingExposure",
gd.toneMappingExposure),zj.needsLights&&(lc=mo,Wg.ambientLightColor.needsUpdate=lc,Wg.lightProbe.needsUpdate=lc,Wg.directionalLights.needsUpdate=lc,Wg.directionalLightShadows.needsUpdate=lc,Wg.pointLights.needsUpdate=lc,Wg.pointLightShadows.needsUpdate=lc,Wg.spotLights.needsUpdate=lc,Wg.spotLightShadows.needsUpdate=lc,Wg.rectAreaLights.needsUpdate=lc,Wg.hemisphereLights.needsUpdate=lc),Uf&&Pd.fog&&aW.refreshFogUniforms(Wg,Uf),aW.refreshMaterialUniforms(Wg,Pd,$c,Ac),yv.upload(Be,zj.uniformsList,Wg,
Ll));Pd.isShaderMaterial&&!0===Pd.uniformsNeedUpdate&&(yv.upload(Be,zj.uniformsList,Wg,Ll),Pd.uniformsNeedUpdate=!1);Pd.isSpriteMaterial&&Og.setValue(Be,"center",Pe.center);Og.setValue(Be,"modelViewMatrix",Pe.modelViewMatrix);Og.setValue(Be,"normalMatrix",Pe.normalMatrix);Og.setValue(Be,"modelMatrix",Pe.matrixWorld);return ze}u=u||{};var db=void 0!==u.canvas?u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Ya=void 0!==u.context?u.context:null,vb=void 0!==u.alpha?u.alpha:
!1,sb=void 0!==u.depth?u.depth:!0,Qc=void 0!==u.stencil?u.stencil:!0,zc=void 0!==u.antialias?u.antialias:!1,jd=void 0!==u.premultipliedAlpha?u.premultipliedAlpha:!0,Bc=void 0!==u.preserveDrawingBuffer?u.preserveDrawingBuffer:!1,kd=void 0!==u.powerPreference?u.powerPreference:"default",ud=void 0!==u.failIfMajorPerformanceCaveat?u.failIfMajorPerformanceCaveat:!1,Vd=null,Ad=null;(this||p).domElement=db;(this||p).debug={checkShaderErrors:!0};(this||p).autoClear=!0;(this||p).autoClearColor=!0;(this||p).autoClearDepth=
!0;(this||p).autoClearStencil=!0;(this||p).sortObjects=!0;(this||p).clippingPlanes=[];(this||p).localClippingEnabled=!1;(this||p).gammaFactor=2;(this||p).outputEncoding=3E3;(this||p).physicallyCorrectLights=!1;(this||p).toneMapping=0;(this||p).toneMappingExposure=1;(this||p).maxMorphTargets=8;(this||p).maxMorphNormals=4;var gd=this||p,xd=!1,jf=null,Ae=0,uf=0,Ff=null,$f=null,gh=-1,Qg=null,Gi=null,wh=new Rk,Xj=new Rk,zk=null,Kl=db.width,Ac=db.height,$c=1,Ee=null,hd=null,Te=new Rk(0,0,Kl,Ac),mf=new Rk(0,
0,Kl,Ac),Lg=!1,Qf=new WH,Ph=!1,Kh=!1,ii=new fj,Yh=new nc,yk={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Be=Ya;try{Ya={alpha:vb,depth:sb,stencil:Qc,antialias:zc,premultipliedAlpha:jd,preserveDrawingBuffer:Bc,powerPreference:kd,failIfMajorPerformanceCaveat:ud};db.addEventListener("webglcontextlost",x,!1);db.addEventListener("webglcontextrestored",C,!1);if(null===Be&&(vb=["webgl2","webgl","experimental-webgl"],!0===gd.isWebGL1Renderer&&vb.shift(),Be=z(vb,Ya),null===Be)){if(z(vb))throw Error("Error creating WebGL context with your selected attributes.");
throw Error("Error creating WebGL context.");}void 0===Be.getShaderPrecisionFormat&&(Be.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(lc){throw console.error("THREE.WebGLRenderer: "+lc.message),lc;}var cg,oh,ch,yj,hj,Ll,Lk,Iq,dx,ez,KB,aW,XN,nE,cu,fz,b$,c$,d$,cx,Er;t();var gz=new a$(gd,Be);(this||p).xr=gz;var e$=new Z9(gd,ez,oh.maxTextureSize);(this||p).shadowMap=e$;(this||p).getContext=function(){return Be};(this||p).getContextAttributes=function(){return Be.getContextAttributes()};
(this||p).forceContextLoss=function(){var lc=cg.get("WEBGL_lose_context");lc&&lc.loseContext()};(this||p).forceContextRestore=function(){var lc=cg.get("WEBGL_lose_context");lc&&lc.restoreContext()};(this||p).getPixelRatio=function(){return $c};(this||p).setPixelRatio=function(lc){void 0!==lc&&($c=lc,this.setSize(Kl,Ac,!1))};(this||p).getSize=function(lc){void 0===lc&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),lc=new Xe);return lc.set(Kl,Ac)};(this||p).setSize=
function(lc,ze,Pd){gz.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Kl=lc,Ac=ze,db.width=Math.floor(lc*$c),db.height=Math.floor(ze*$c),!1!==Pd&&(db.style.width=lc+"px",db.style.height=ze+"px"),this.setViewport(0,0,lc,ze))};(this||p).getDrawingBufferSize=function(lc){void 0===lc&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),lc=new Xe);return lc.set(Kl*$c,Ac*$c).floor()};(this||p).setDrawingBufferSize=
function(lc,ze,Pd){Kl=lc;Ac=ze;$c=Pd;db.width=Math.floor(lc*Pd);db.height=Math.floor(ze*Pd);this.setViewport(0,0,lc,ze)};(this||p).getCurrentViewport=function(lc){void 0===lc&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),lc=new Rk);return lc.copy(wh)};(this||p).getViewport=function(lc){return lc.copy(Te)};(this||p).setViewport=function(lc,ze,Pd,Pe){lc.isVector4?Te.set(lc.x,lc.y,lc.z,lc.w):Te.set(lc,ze,Pd,Pe);ch.viewport(wh.copy(Te).multiplyScalar($c).floor())};
(this||p).getScissor=function(lc){return lc.copy(mf)};(this||p).setScissor=function(lc,ze,Pd,Pe){lc.isVector4?mf.set(lc.x,lc.y,lc.z,lc.w):mf.set(lc,ze,Pd,Pe);ch.scissor(Xj.copy(mf).multiplyScalar($c).floor())};(this||p).getScissorTest=function(){return Lg};(this||p).setScissorTest=function(lc){ch.setScissorTest(Lg=lc)};(this||p).setOpaqueSort=function(lc){Ee=lc};(this||p).setTransparentSort=function(lc){hd=lc};(this||p).getClearColor=function(){return fz.getClearColor()};(this||p).setClearColor=function(){fz.setClearColor.apply(fz,
arguments)};(this||p).getClearAlpha=function(){return fz.getClearAlpha()};(this||p).setClearAlpha=function(){fz.setClearAlpha.apply(fz,arguments)};(this||p).clear=function(lc,ze,Pd){var Pe=0;if(void 0===lc||lc)Pe|=16384;if(void 0===ze||ze)Pe|=256;if(void 0===Pd||Pd)Pe|=1024;Be.clear(Pe)};(this||p).clearColor=function(){this.clear(!0,!1,!1)};(this||p).clearDepth=function(){this.clear(!1,!0,!1)};(this||p).clearStencil=function(){this.clear(!1,!1,!0)};(this||p).dispose=function(){db.removeEventListener("webglcontextlost",
x,!1);db.removeEventListener("webglcontextrestored",C,!1);XN.dispose();nE.dispose();hj.dispose();Lk.dispose();ez.dispose();Er.dispose();gz.dispose();ZH.stop()};(this||p).renderBufferImmediate=function(lc,ze){Er.initAttributes();var Pd=hj.get(lc);lc.hasPositions&&!Pd.position&&(Pd.position=Be.createBuffer());lc.hasNormals&&!Pd.normal&&(Pd.normal=Be.createBuffer());lc.hasUvs&&!Pd.uv&&(Pd.uv=Be.createBuffer());lc.hasColors&&!Pd.color&&(Pd.color=Be.createBuffer());ze=ze.getAttributes();lc.hasPositions&&
(Be.bindBuffer(34962,Pd.position),Be.bufferData(34962,lc.positionArray,35048),Er.enableAttribute(ze.position),Be.vertexAttribPointer(ze.position,3,5126,!1,0,0));lc.hasNormals&&(Be.bindBuffer(34962,Pd.normal),Be.bufferData(34962,lc.normalArray,35048),Er.enableAttribute(ze.normal),Be.vertexAttribPointer(ze.normal,3,5126,!1,0,0));lc.hasUvs&&(Be.bindBuffer(34962,Pd.uv),Be.bufferData(34962,lc.uvArray,35048),Er.enableAttribute(ze.uv),Be.vertexAttribPointer(ze.uv,2,5126,!1,0,0));lc.hasColors&&(Be.bindBuffer(34962,
Pd.color),Be.bufferData(34962,lc.colorArray,35048),Er.enableAttribute(ze.color),Be.vertexAttribPointer(ze.color,3,5126,!1,0,0));Er.disableUnusedAttributes();Be.drawArrays(4,0,lc.count);lc.count=0};(this||p).renderBufferDirect=function(lc,ze,Pd,Pe,Uf,Og){null===ze&&(ze=yk);var Wg=Uf.isMesh&&0>Uf.matrixWorld.determinant();lc=Ha(lc,ze,Pe,Uf);ch.setMaterial(Pe,Wg);Wg=Pd.index;ze=Pd.attributes.position;if(null===Wg){if(void 0===ze||0===ze.count)return}else if(0===Wg.count)return;var Hj=1;!0===Pe.wireframe&&
(Wg=dx.getWireframeAttribute(Pd),Hj=2);(Pe.morphTargets||Pe.morphNormals)&&b$.update(Uf,Pd,Pe,lc);Er.setup(Uf,Pe,lc,Pd,Wg);lc=c$;if(null!==Wg){var zj=Iq.get(Wg);lc=d$;lc.setIndex(zj)}var mo=Pd.drawRange.start*Hj,Yj=null!==Og?Og.start*Hj:0;zj=Math.max(mo,Yj);Og=Math.max(0,Math.min(null!==Wg?Wg.count:ze.count,mo+Pd.drawRange.count*Hj,Yj+(null!==Og?Og.count*Hj:Infinity))-1-zj+1);0!==Og&&(Uf.isMesh?!0===Pe.wireframe?(ch.setLineWidth(Pe.wireframeLinewidth*(null===Ff?$c:1)),lc.setMode(1)):lc.setMode(4):
Uf.isLine?(Pe=Pe.linewidth,void 0===Pe&&(Pe=1),ch.setLineWidth(Pe*(null===Ff?$c:1)),Uf.isLineSegments?lc.setMode(1):Uf.isLineLoop?lc.setMode(2):lc.setMode(3)):Uf.isPoints?lc.setMode(0):Uf.isSprite&&lc.setMode(4),Uf.isInstancedMesh?lc.renderInstances(zj,Og,Uf.count):Pd.isInstancedBufferGeometry?lc.renderInstances(zj,Og,Math.min(Pd.instanceCount,Pd._maxInstanceCount)):lc.render(zj,Og))};(this||p).compile=function(lc,ze){Ad=nE.get(lc,ze);Ad.init();lc.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(ze.layers)&&
(Ad.pushLight(Pe),Pe.castShadow&&Ad.pushShadow(Pe))});Ad.setupLights(ze);var Pd=new WeakMap;lc.traverse(function(Pe){var Uf=Pe.material;if(Uf)if(Array.isArray(Uf))for(var Og=0;Og<Uf.length;Og++){var Wg=Uf[Og];!1===Pd.has(Wg)&&(ta(Wg,lc,Pe),Pd.set(Wg))}else!1===Pd.has(Uf)&&(ta(Uf,lc,Pe),Pd.set(Uf))})};var cW=null,ZH=new zd;ZH.setAnimationLoop(function(lc){gz.isPresenting||cW&&cW(lc)});"undefined"!==typeof window&&ZH.setContext(window);(this||p).setAnimationLoop=function(lc){cW=lc;gz.setAnimationLoop(lc);
null===lc?ZH.stop():ZH.start()};(this||p).render=function(lc,ze,Pd,Pe){if(void 0!==Pd){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Uf=Pd}if(void 0!==Pe){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var Og=Pe}if(void 0!==ze&&!0!==ze.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==xd){Er.resetDefaultState();
gh=-1;Qg=null;!0===lc.autoUpdate&&lc.updateMatrixWorld();null===ze.parent&&ze.updateMatrixWorld();!0===gz.enabled&&!0===gz.isPresenting&&(ze=gz.getCamera(ze));if(!0===lc.isScene)lc.onBeforeRender(gd,lc,ze,Uf||Ff);Ad=nE.get(lc,ze);Ad.init();ii.multiplyMatrices(ze.projectionMatrix,ze.matrixWorldInverse);Qf.setFromProjectionMatrix(ii);Kh=(this||p).localClippingEnabled;Ph=cu.init((this||p).clippingPlanes,Kh,ze);Vd=XN.get(lc,ze);Vd.init();V(lc,ze,0,gd.sortObjects);Vd.finish();!0===gd.sortObjects&&Vd.sort(Ee,
hd);!0===Ph&&cu.beginShadows();e$.render(Ad.state.shadowsArray,lc,ze);Ad.setupLights(ze);!0===Ph&&cu.endShadows();!0===(this||p).info.autoReset&&(this||p).info.reset();void 0!==Uf&&this.setRenderTarget(Uf);fz.render(Vd,lc,ze,Og);Pd=Vd.opaque;Pe=Vd.transparent;0<Pd.length&&Z(Pd,lc,ze);0<Pe.length&&Z(Pe,lc,ze);if(!0===lc.isScene)lc.onAfterRender(gd,lc,ze);null!==Ff&&(Ll.updateRenderTargetMipmap(Ff),Ll.updateMultisampleRenderTarget(Ff));ch.buffers.depth.setTest(!0);ch.buffers.depth.setMask(!0);ch.buffers.color.setMask(!0);
ch.setPolygonOffset(!1);Ad=Vd=null}};(this||p).setFramebuffer=function(lc){jf!==lc&&null===Ff&&Be.bindFramebuffer(36160,lc);jf=lc};(this||p).getActiveCubeFace=function(){return Ae};(this||p).getActiveMipmapLevel=function(){return uf};(this||p).getRenderList=function(){return Vd};(this||p).setRenderList=function(lc){Vd=lc};(this||p).getRenderState=function(){return Ad};(this||p).setRenderState=function(lc){Ad=lc};(this||p).getRenderTarget=function(){return Ff};(this||p).setRenderTarget=function(lc,
ze,Pd){void 0===ze&&(ze=0);void 0===Pd&&(Pd=0);Ff=lc;Ae=ze;uf=Pd;lc&&void 0===hj.get(lc).__webglFramebuffer&&Ll.setupRenderTarget(lc);var Pe=jf,Uf=!1;lc?(Pe=hj.get(lc).__webglFramebuffer,lc.isWebGLCubeRenderTarget?(Pe=Pe[ze],Uf=!0):Pe=lc.isWebGLMultisampleRenderTarget?hj.get(lc).__webglMultisampledFramebuffer:Pe,wh.copy(lc.viewport),Xj.copy(lc.scissor),zk=lc.scissorTest):(wh.copy(Te).multiplyScalar($c).floor(),Xj.copy(mf).multiplyScalar($c).floor(),zk=Lg);$f!==Pe&&(Be.bindFramebuffer(36160,Pe),$f=
Pe);ch.viewport(wh);ch.scissor(Xj);ch.setScissorTest(zk);Uf&&(lc=hj.get(lc.texture),Be.framebufferTexture2D(36160,36064,34069+ze,lc.__webglTexture,Pd))};(this||p).readRenderTargetPixels=function(lc,ze,Pd,Pe,Uf,Og,Wg){if(lc&&lc.isWebGLRenderTarget){var Hj=hj.get(lc).__webglFramebuffer;lc.isWebGLCubeRenderTarget&&void 0!==Wg&&(Hj=Hj[Wg]);if(Hj){Wg=!1;Hj!==$f&&(Be.bindFramebuffer(36160,Hj),Wg=!0);try{var zj=lc.texture,mo=zj.format,Yj=zj.type;1023!==mo&&cx.convert(mo)!==Be.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
1009===Yj||cx.convert(Yj)===Be.getParameter(35738)||1015===Yj&&(oh.isWebGL2||cg.get("OES_texture_float")||cg.get("WEBGL_color_buffer_float"))||1016===Yj&&(oh.isWebGL2?cg.get("EXT_color_buffer_float"):cg.get("EXT_color_buffer_half_float"))?36053===Be.checkFramebufferStatus(36160)?0<=ze&&ze<=lc.width-Pe&&0<=Pd&&Pd<=lc.height-Uf&&Be.readPixels(ze,Pd,Pe,Uf,cx.convert(mo),cx.convert(Yj),Og):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{Wg&&Be.bindFramebuffer(36160,$f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};(this||p).copyFramebufferToTexture=function(lc,ze,Pd){void 0===Pd&&(Pd=0);var Pe=Math.pow(2,-Pd),Uf=Math.floor(ze.image.width*Pe);Pe=Math.floor(ze.image.height*Pe);var Og=cx.convert(ze.format);Ll.setTexture2D(ze,0);
Be.copyTexImage2D(3553,Pd,Og,lc.x,lc.y,Uf,Pe,0);ch.unbindTexture()};(this||p).copyTextureToTexture=function(lc,ze,Pd,Pe){void 0===Pe&&(Pe=0);var Uf=ze.image.width,Og=ze.image.height,Wg=cx.convert(Pd.format),Hj=cx.convert(Pd.type);Ll.setTexture2D(Pd,0);Be.pixelStorei(37440,Pd.flipY);Be.pixelStorei(37441,Pd.premultiplyAlpha);Be.pixelStorei(3317,Pd.unpackAlignment);ze.isDataTexture?Be.texSubImage2D(3553,Pe,lc.x,lc.y,Uf,Og,Wg,Hj,ze.image.data):ze.isCompressedTexture?Be.compressedTexSubImage2D(3553,Pe,
lc.x,lc.y,ze.mipmaps[0].width,ze.mipmaps[0].height,Wg,ze.mipmaps[0].data):Be.texSubImage2D(3553,Pe,lc.x,lc.y,Wg,Hj,ze.image);0===Pe&&Pd.generateMipmaps&&Be.generateMipmap(3553);ch.unbindTexture()};(this||p).initTexture=function(lc){Ll.setTexture2D(lc,0);ch.unbindTexture()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this||p}))}function dW(u){YH.call(this||p,u)}function Fr(u,z){(this||p).array=u;(this||p).stride=z;(this||p).count=void 0!==
u?u.length/z:0;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0;(this||p).uuid=Xh.generateUUID()}function hz(u,z,t,x){(this||p).name="";(this||p).data=u;(this||p).itemSize=z;(this||p).offset=t;(this||p).normalized=!0===x}function iz(u){M.call(this||p);(this||p).type="SpriteMaterial";(this||p).color=new rg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).rotation=0;(this||p).sizeAttenuation=!0;(this||p).transparent=!0;this.setValues(u)}function $H(u){E.call(this||
p);(this||p).type="Sprite";if(void 0===oE){oE=new oa;var z=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);z=new Fr(z,5);oE.setIndex([0,1,2,0,2,3]);oE.setAttribute("position",new hz(z,3,0,!1));oE.setAttribute("uv",new hz(z,2,3,!1))}(this||p).geometry=oE;(this||p).material=void 0!==u?u:new iz;(this||p).center=new Xe(.5,.5)}function ZN(u,z,t,x,C,G){pE.subVectors(u,t).addScalar(.5).multiply(x);void 0!==C?(aI.x=G*pE.x-C*pE.y,aI.y=C*pE.x+G*pE.y):aI.copy(pE);u.copy(z);u.x+=aI.x;
u.y+=aI.y;u.applyMatrix4(f$)}function bI(){E.call(this||p);(this||p)._currentLevel=0;(this||p).type="LOD";Object.defineProperties(this||p,{levels:{enumerable:!0,value:[]}});(this||p).autoUpdate=!0}function $N(u,z){u&&u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");hb.call(this||p,u,z);(this||p).type="SkinnedMesh";(this||p).bindMode="attached";(this||p).bindMatrix=new fj;(this||p).bindMatrixInverse=new fj}function aO(u,z){u=u||[];
(this||p).bones=u.slice(0);(this||p).boneMatrices=new Float32Array(16*(this||p).bones.length);(this||p).frame=-1;if(void 0===z)this.calculateInverses();else if((this||p).bones.length===z.length)(this||p).boneInverses=z.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),(this||p).boneInverses=[],u=0,z=(this||p).bones.length;u<z;u++)(this||p).boneInverses.push(new fj)}function eW(){E.call(this||p);(this||p).type="Bone"}function bO(u,z,t){hb.call(this||p,u,z);(this||p).instanceMatrix=
new X(new Float32Array(16*t),16);(this||p).instanceColor=null;(this||p).count=t;(this||p).frustumCulled=!1}function Ml(u){M.call(this||p);(this||p).type="LineBasicMaterial";(this||p).color=new rg(16777215);(this||p).linewidth=1;(this||p).linecap="round";(this||p).linejoin="round";(this||p).morphTargets=!1;this.setValues(u)}function Xs(u,z,t){1===t&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.");E.call(this||p);(this||p).type="Line";(this||
p).geometry=void 0!==u?u:new oa;(this||p).material=void 0!==z?z:new Ml;this.updateMorphTargets()}function Vp(u,z){Xs.call(this||p,u,z);(this||p).type="LineSegments"}function cO(u,z){Xs.call(this||p,u,z);(this||p).type="LineLoop"}function du(u){M.call(this||p);(this||p).type="PointsMaterial";(this||p).color=new rg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).size=1;(this||p).sizeAttenuation=!0;(this||p).morphTargets=!1;this.setValues(u)}function qE(u,z){E.call(this||p);(this||p).type=
"Points";(this||p).geometry=void 0!==u?u:new oa;(this||p).material=void 0!==z?z:new du;this.updateMorphTargets()}function fW(u,z,t,x,C,G,L){var S=gW.distanceSqToPoint(u);S<t&&(t=new nc,gW.closestPointToPoint(u,t),t.applyMatrix4(x),u=C.ray.origin.distanceTo(t),u<C.near||u>C.far||G.push({distance:u,distanceToRay:Math.sqrt(S),point:t,index:z,face:null,object:L}))}function hW(u,z,t,x,C,G,L,S,V){function Z(){ja.needsUpdate=!0;u.requestVideoFrameCallback(Z)}r.call(this||p,u,z,t,x,C,G,L,S,V);(this||p).format=
void 0!==L?L:1022;(this||p).minFilter=void 0!==G?G:1006;(this||p).magFilter=void 0!==C?C:1006;(this||p).generateMipmaps=!1;var ja=this||p;"requestVideoFrameCallback"in u&&u.requestVideoFrameCallback(Z)}function rE(u,z,t,x,C,G,L,S,V,Z,ja,ta){r.call(this||p,null,G,L,S,V,Z,x,C,ja,ta);(this||p).image={width:z,height:t};(this||p).mipmaps=u;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function cI(u,z,t,x,C,G,L,S,V){r.call(this||p,u,z,t,x,C,G,L,S,V);(this||p).needsUpdate=!0}function dI(u,z,t,x,C,G,L,
S,V,Z){Z=void 0!==Z?Z:1026;if(1026!==Z&&1027!==Z)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===t&&1026===Z&&(t=1012);void 0===t&&1027===Z&&(t=1020);r.call(this||p,null,x,C,G,L,S,Z,t,V);(this||p).image={width:u,height:z};(this||p).magFilter=void 0!==L?L:1003;(this||p).minFilter=void 0!==S?S:1003;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function Sk(){Object.defineProperty(this||p,"id",{value:ora+=2});(this||p).uuid=Xh.generateUUID();
(this||p).name="";(this||p).type="Geometry";(this||p).vertices=[];(this||p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=[];(this||p).morphNormals=[];(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).elementsNeedUpdate=!1;(this||p).verticesNeedUpdate=!1;(this||p).uvsNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=!1;(this||p).lineDistancesNeedUpdate=
!1;(this||p).groupsNeedUpdate=!1}function g$(u,z,t,x,C){for(var G,L=0,S=z,V=t-x;S<t;S+=x)L+=(u[V]-u[S])*(u[S+1]+u[V+1]),V=S;if(C===0<L)for(C=z;C<t;C+=x)G=h$(C,u[C],u[C+1],G);else for(C=t-x;C>=z;C-=x)G=h$(C,u[C],u[C+1],G);G&&dO(G,G.next)&&(eI(G),G=G.next);return G}function jz(u,z){if(!u)return u;z||(z=u);do{var t=!1;if(u.steiner||!dO(u,u.next)&&0!==Zl(u.prev,u,u.next))u=u.next;else{eI(u);u=z=u.prev;if(u===u.next)break;t=!0}}while(t||u!==z);return z}function fI(u,z,t,x,C,G,L){if(u){if(!L&&G){var S=
u,V=S;do null===V.z&&(V.z=iW(V.x,V.y,x,C,G)),V.prevZ=V.prev,V=V.nextZ=V.next;while(V!==S);V.prevZ.nextZ=null;V.prevZ=null;S=V;var Z,ja,ta,Ha,db=1;do{V=S;var Ya=S=null;for(ja=0;V;){ja++;var vb=V;for(Z=ta=0;Z<db&&(ta++,vb=vb.nextZ,vb);Z++);for(Ha=db;0<ta||0<Ha&&vb;)0!==ta&&(0===Ha||!vb||V.z<=vb.z)?(Z=V,V=V.nextZ,ta--):(Z=vb,vb=vb.nextZ,Ha--),Ya?Ya.nextZ=Z:S=Z,Z.prevZ=Ya,Ya=Z;V=vb}Ya.nextZ=null;db*=2}while(1<ja)}for(S=u;u.prev!==u.next;){V=u.prev;vb=u.next;if(G)Ya=pra(u,x,C,G);else a:if(Ya=u,ja=Ya.prev,
ta=Ya,db=Ya.next,0<=Zl(ja,ta,db))Ya=!1;else{for(Z=Ya.next.next;Z!==Ya.prev;){if(sE(ja.x,ja.y,ta.x,ta.y,db.x,db.y,Z.x,Z.y)&&0<=Zl(Z.prev,Z,Z.next)){Ya=!1;break a}Z=Z.next}Ya=!0}if(Ya)z.push(V.i/t),z.push(u.i/t),z.push(vb.i/t),eI(u),S=u=vb.next;else if(u=vb,u===S){if(!L)fI(jz(u),z,t,x,C,G,1);else if(1===L){u=jz(u);L=z;S=t;V=u;do vb=V.prev,Ya=V.next.next,!dO(vb,Ya)&&i$(vb,V,V.next,Ya)&&gI(vb,Ya)&&gI(Ya,vb)&&(L.push(vb.i/S),L.push(V.i/S),L.push(Ya.i/S),eI(V),eI(V.next),V=u=Ya),V=V.next;while(V!==u);u=
jz(V);fI(u,z,t,x,C,G,2)}else if(2===L)a:{L=u;do{for(S=L.next.next;S!==L.prev;){if(V=L.i!==S.i){V=L;vb=S;if(Ya=V.next.i!==vb.i&&V.prev.i!==vb.i){b:{Ya=V;do{if(Ya.i!==V.i&&Ya.next.i!==V.i&&Ya.i!==vb.i&&Ya.next.i!==vb.i&&i$(Ya,Ya.next,V,vb)){Ya=!0;break b}Ya=Ya.next}while(Ya!==V);Ya=!1}Ya=!Ya}if(Ya){if(Ya=gI(V,vb)&&gI(vb,V)){Ya=V;ja=!1;ta=(V.x+vb.x)/2;db=(V.y+vb.y)/2;do Ya.y>db!==Ya.next.y>db&&Ya.next.y!==Ya.y&&ta<(Ya.next.x-Ya.x)*(db-Ya.y)/(Ya.next.y-Ya.y)+Ya.x&&(ja=!ja),Ya=Ya.next;while(Ya!==V);Ya=
ja}Ya=Ya&&(Zl(V.prev,V,vb.prev)||Zl(V,vb.prev,vb))||dO(V,vb)&&0<Zl(V.prev,V,V.next)&&0<Zl(vb.prev,vb,vb.next)}V=Ya}if(V){u=j$(L,S);L=jz(L,L.next);u=jz(u,u.next);fI(L,z,t,x,C,G);fI(u,z,t,x,C,G);break a}S=S.next}L=L.next}while(L!==u)}break}}}}function pra(u,z,t,x){var C=u.prev,G=u.next;if(0<=Zl(C,u,G))return!1;var L=C.x>u.x?C.x>G.x?C.x:G.x:u.x>G.x?u.x:G.x,S=C.y>u.y?C.y>G.y?C.y:G.y:u.y>G.y?u.y:G.y,V=iW(C.x<u.x?C.x<G.x?C.x:G.x:u.x<G.x?u.x:G.x,C.y<u.y?C.y<G.y?C.y:G.y:u.y<G.y?u.y:G.y,z,t,x);z=iW(L,S,z,
t,x);t=u.prevZ;for(x=u.nextZ;t&&t.z>=V&&x&&x.z<=z;){if(t!==u.prev&&t!==u.next&&sE(C.x,C.y,u.x,u.y,G.x,G.y,t.x,t.y)&&0<=Zl(t.prev,t,t.next))return!1;t=t.prevZ;if(x!==u.prev&&x!==u.next&&sE(C.x,C.y,u.x,u.y,G.x,G.y,x.x,x.y)&&0<=Zl(x.prev,x,x.next))return!1;x=x.nextZ}for(;t&&t.z>=V;){if(t!==u.prev&&t!==u.next&&sE(C.x,C.y,u.x,u.y,G.x,G.y,t.x,t.y)&&0<=Zl(t.prev,t,t.next))return!1;t=t.prevZ}for(;x&&x.z<=z;){if(x!==u.prev&&x!==u.next&&sE(C.x,C.y,u.x,u.y,G.x,G.y,x.x,x.y)&&0<=Zl(x.prev,x,x.next))return!1;x=
x.nextZ}return!0}function qra(u,z){return u.x-z.x}function rra(u,z){var t=z,x=u.x,C=u.y,G=-Infinity;do{if(C<=t.y&&C>=t.next.y&&t.next.y!==t.y){var L=t.x+(C-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(L<=x&&L>G){G=L;if(L===x){if(C===t.y)return t;if(C===t.next.y)return t.next}var S=t.x<t.next.x?t:t.next}}t=t.next}while(t!==z);if(!S)return null;if(x===G)return S;z=S;L=S.x;var V=S.y,Z=Infinity;t=S;do{if(x>=t.x&&t.x>=L&&x!==t.x&&sE(C<V?x:G,C,L,V,C<V?G:x,C,t.x,t.y)){var ja=Math.abs(C-t.y)/(x-t.x);var ta;if((ta=
gI(t,u))&&!(ta=ja<Z)&&(ta=ja===Z)&&!(ta=t.x>S.x)&&(ta=t.x===S.x)){ta=S;var Ha=t;ta=0>Zl(ta.prev,ta,Ha.prev)&&0>Zl(Ha.next,ta,ta.next)}ta&&(S=t,Z=ja)}t=t.next}while(t!==z);return S}function iW(u,z,t,x,C){u=32767*(u-t)*C;z=32767*(z-x)*C;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;z=(z|z<<8)&16711935;z=(z|z<<4)&252645135;z=(z|z<<2)&858993459;return(u|u<<1)&1431655765|((z|z<<1)&1431655765)<<1}function sra(u){var z=u,t=u;do{if(z.x<t.x||z.x===t.x&&z.y<t.y)t=z;z=z.next}while(z!==u);return t}
function sE(u,z,t,x,C,G,L,S){return 0<=(C-L)*(z-S)-(u-L)*(G-S)&&0<=(u-L)*(x-S)-(t-L)*(z-S)&&0<=(t-L)*(G-S)-(C-L)*(x-S)}function Zl(u,z,t){return(z.y-u.y)*(t.x-z.x)-(z.x-u.x)*(t.y-z.y)}function dO(u,z){return u.x===z.x&&u.y===z.y}function i$(u,z,t,x){var C=eO(Zl(u,z,t)),G=eO(Zl(u,z,x)),L=eO(Zl(t,x,u)),S=eO(Zl(t,x,z));return C!==G&&L!==S||0===C&&fO(u,t,z)||0===G&&fO(u,x,z)||0===L&&fO(t,u,x)||0===S&&fO(t,z,x)?!0:!1}function fO(u,z,t){return z.x<=Math.max(u.x,t.x)&&z.x>=Math.min(u.x,t.x)&&z.y<=Math.max(u.y,
t.y)&&z.y>=Math.min(u.y,t.y)}function eO(u){return 0<u?1:0>u?-1:0}function gI(u,z){return 0>Zl(u.prev,u,u.next)?0<=Zl(u,z,u.next)&&0<=Zl(u,u.prev,z):0>Zl(u,z,u.prev)||0>Zl(u,u.next,z)}function j$(u,z){var t=new jW(u.i,u.x,u.y),x=new jW(z.i,z.x,z.y),C=u.next,G=z.prev;u.next=z;z.prev=u;t.next=C;C.prev=t;x.next=t;t.prev=x;G.next=x;x.prev=G;return x}function h$(u,z,t,x){u=new jW(u,z,t);x?(u.next=x.next,u.prev=x,x.next.prev=u,x.next=u):(u.prev=u,u.next=u);return u}function eI(u){u.next.prev=u.prev;u.prev.next=
u.next;u.prevZ&&(u.prevZ.nextZ=u.nextZ);u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function jW(u,z,t){(this||p).i=u;(this||p).x=z;(this||p).y=t;(this||p).prev=null;(this||p).next=null;(this||p).z=null;(this||p).prevZ=null;(this||p).nextZ=null;(this||p).steiner=!1}function k$(u){var z=u.length;2<z&&u[z-1].equals(u[0])&&u.pop()}function l$(u,z){for(var t=0;t<z.length;t++)u.push(z[t].x),u.push(z[t].y)}function tE(u,z,t){oa.call(this||p);(this||p).type="ParametricBufferGeometry";(this||p).parameters={func:u,slices:z,
stacks:t};var x=[],C=[],G=[],L=[],S=new nc,V=new nc,Z=new nc,ja=new nc,ta=new nc;3>u.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var Ha=z+1,db=0;db<=t;db++)for(var Ya=db/t,vb=0;vb<=z;vb++){var sb=vb/z;u(sb,Ya,V);C.push(V.x,V.y,V.z);0<=sb-1E-5?(u(sb-1E-5,Ya,Z),ja.subVectors(V,Z)):(u(sb+1E-5,Ya,Z),ja.subVectors(Z,V));0<=Ya-1E-5?(u(sb,Ya-1E-5,Z),ta.subVectors(V,Z)):(u(sb,Ya+1E-5,Z),ta.subVectors(Z,V));S.crossVectors(ja,ta).normalize();
G.push(S.x,S.y,S.z);L.push(sb,Ya)}for(u=0;u<t;u++)for(S=0;S<z;S++)V=u*Ha+S+1,Z=(u+1)*Ha+S+1,ja=(u+1)*Ha+S,x.push(u*Ha+S,V,ja),x.push(V,Z,ja);this.setIndex(x);this.setAttribute("position",new U(C,3));this.setAttribute("normal",new U(G,3));this.setAttribute("uv",new U(L,2))}function hI(u,z,t){Sk.call(this||p);(this||p).type="ParametricGeometry";(this||p).parameters={func:u,slices:z,stacks:t};this.fromBufferGeometry(new tE(u,z,t));this.mergeVertices()}function MB(u){M.call(this||p);(this||p).type="ShadowMaterial";
(this||p).color=new rg(0);(this||p).transparent=!0;this.setValues(u)}function ex(u){Ma.call(this||p,u);(this||p).type="RawShaderMaterial"}function Nv(u){M.call(this||p);(this||p).defines={STANDARD:""};(this||p).type="MeshStandardMaterial";(this||p).color=new rg(16777215);(this||p).roughness=1;(this||p).metalness=0;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new rg(0);(this||p).emissiveIntensity=1;(this||
p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Xe(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).roughnessMap=null;(this||p).metalnessMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).envMapIntensity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin=
"round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).vertexTangents=!1;this.setValues(u)}function kz(u){Nv.call(this||p);(this||p).defines={STANDARD:"",PHYSICAL:""};(this||p).type="MeshPhysicalMaterial";(this||p).clearcoat=0;(this||p).clearcoatMap=null;(this||p).clearcoatRoughness=0;(this||p).clearcoatRoughnessMap=null;(this||p).clearcoatNormalScale=new Xe(1,1);(this||p).clearcoatNormalMap=null;(this||p).reflectivity=.5;Object.defineProperty(this||p,"ior",{get:function(){return(1+
.4*(this||p).reflectivity)/(1-.4*(this||p).reflectivity)},set:function(z){(this||p).reflectivity=Xh.clamp(2.5*(z-1)/(z+1),0,1)}});(this||p).sheen=null;(this||p).transmission=0;(this||p).transmissionMap=null;this.setValues(u)}function lz(u){M.call(this||p);(this||p).type="MeshPhongMaterial";(this||p).color=new rg(16777215);(this||p).specular=new rg(1118481);(this||p).shininess=30;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=
1;(this||p).emissive=new rg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Xe(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=
1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function NB(u){M.call(this||p);(this||p).defines={TOON:""};(this||p).type="MeshToonMaterial";(this||p).color=new rg(16777215);(this||p).map=null;(this||p).gradientMap=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new rg(0);(this||p).emissiveIntensity=1;(this||
p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Xe(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function OB(u){M.call(this||
p);(this||p).type="MeshNormalMaterial";(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Xe(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function PB(u){M.call(this||p);(this||p).type="MeshLambertMaterial";(this||p).color=
new rg(16777215);(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new rg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||
p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function QB(u){M.call(this||p);(this||p).defines={MATCAP:""};(this||p).type="MeshMatcapMaterial";(this||p).color=new rg(16777215);(this||p).matcap=null;(this||p).map=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Xe(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||
p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function RB(u){Ml.call(this||p);(this||p).type="LineDashedMaterial";(this||p).scale=1;(this||p).dashSize=3;(this||p).gapSize=1;this.setValues(u)}function Gr(u,z,t,x){(this||p).parameterPositions=u;(this||p)._cachedIndex=0;(this||p).resultBuffer=void 0!==x?x:new z.constructor(t);(this||p).sampleValues=z;(this||p).valueSize=t}function gO(u,z,t,x){Gr.call(this||p,u,z,t,x);(this||p)._weightPrev=-0;(this||p)._offsetPrev=
-0;(this||p)._weightNext=-0;(this||p)._offsetNext=-0}function iI(u,z,t,x){Gr.call(this||p,u,z,t,x)}function hO(u,z,t,x){Gr.call(this||p,u,z,t,x)}function No(u,z,t,x){if(void 0===u)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===z||0===z.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+u);(this||p).name=u;(this||p).times=zl.convertArray(z,(this||p).TimeBufferType);(this||p).values=zl.convertArray(t,(this||p).ValueBufferType);this.setInterpolation(x||(this||
p).DefaultInterpolation)}function iO(u,z,t){No.call(this||p,u,z,t)}function jO(u,z,t,x){No.call(this||p,u,z,t,x)}function uE(u,z,t,x){No.call(this||p,u,z,t,x)}function kO(u,z,t,x){Gr.call(this||p,u,z,t,x)}function jI(u,z,t,x){No.call(this||p,u,z,t,x)}function lO(u,z,t,x){No.call(this||p,u,z,t,x)}function vE(u,z,t,x){No.call(this||p,u,z,t,x)}function Ys(u,z,t,x){(this||p).name=u;(this||p).tracks=t;(this||p).duration=void 0!==z?z:-1;(this||p).blendMode=void 0!==x?x:2500;(this||p).uuid=Xh.generateUUID();
0>(this||p).duration&&this.resetDuration()}function tra(u){switch(u.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return uE;case "vector":case "vector2":case "vector3":case "vector4":return vE;case "color":return jO;case "quaternion":return jI;case "bool":case "boolean":return iO;case "string":return lO}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+u);}function ura(u){if(void 0===u.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
var z=tra(u.type);if(void 0===u.times){var t=[],x=[];zl.flattenJSON(u.keys,t,x,"value");u.times=t;u.values=x}return void 0!==z.parse?z.parse(u):new z(u.name,u.times,u.values,u.interpolation)}function kW(u,z,t){var x=this||p,C=!1,G=0,L=0,S=void 0,V=[];(this||p).onStart=void 0;(this||p).onLoad=u;(this||p).onProgress=z;(this||p).onError=t;(this||p).itemStart=function(Z){L++;if(!1===C&&void 0!==x.onStart)x.onStart(Z,G,L);C=!0};(this||p).itemEnd=function(Z){G++;if(void 0!==x.onProgress)x.onProgress(Z,
G,L);if(G===L&&(C=!1,void 0!==x.onLoad))x.onLoad()};(this||p).itemError=function(Z){if(void 0!==x.onError)x.onError(Z)};(this||p).resolveURL=function(Z){return S?S(Z):Z};(this||p).setURLModifier=function(Z){S=Z;return this||p};(this||p).addHandler=function(Z,ja){V.push(Z,ja);return this||p};(this||p).removeHandler=function(Z){Z=V.indexOf(Z);-1!==Z&&V.splice(Z,2);return this||p};(this||p).getHandler=function(Z){for(var ja=0,ta=V.length;ja<ta;ja+=2){var Ha=V[ja],db=V[ja+1];Ha.global&&(Ha.lastIndex=
0);if(Ha.test(Z))return db}return null}}function Mk(u){(this||p).manager=void 0!==u?u:m$;(this||p).crossOrigin="anonymous";(this||p).withCredentials=!1;(this||p).path="";(this||p).resourcePath="";(this||p).requestHeader={}}function Zs(u){Mk.call(this||p,u)}function lW(u){Mk.call(this||p,u)}function mW(u){Mk.call(this||p,u)}function wE(u){Mk.call(this||p,u)}function mO(u){Mk.call(this||p,u)}function nO(u){Mk.call(this||p,u)}function oO(u){Mk.call(this||p,u)}function ah(){(this||p).type="Curve";(this||
p).arcLengthDivisions=200}function Hr(u,z,t,x,C,G,L,S){ah.call(this||p);(this||p).type="EllipseCurve";(this||p).aX=u||0;(this||p).aY=z||0;(this||p).xRadius=t||1;(this||p).yRadius=x||1;(this||p).aStartAngle=C||0;(this||p).aEndAngle=G||2*Math.PI;(this||p).aClockwise=L||!1;(this||p).aRotation=S||0}function xE(u,z,t,x,C,G){Hr.call(this||p,u,z,t,t,x,C,G);(this||p).type="ArcCurve"}function nW(){var u=0,z=0,t=0,x=0;return{initCatmullRom:function(C,G,L,S,V){C=V*(L-C);S=V*(S-G);u=G;z=C;t=-3*G+3*L-2*C-S;x=
2*G-2*L+C+S},initNonuniformCatmullRom:function(C,G,L,S,V,Z,ja){C=((G-C)/V-(L-C)/(V+Z)+(L-G)/Z)*Z;S=((L-G)/Z-(S-G)/(Z+ja)+(S-L)/ja)*Z;u=G;z=C;t=-3*G+3*L-2*C-S;x=2*G-2*L+C+S},calc:function(C){var G=C*C;return u+z*C+t*G+x*G*C}}}function np(u,z,t,x){ah.call(this||p);(this||p).type="CatmullRomCurve3";(this||p).points=u||[];(this||p).closed=z||!1;(this||p).curveType=t||"centripetal";(this||p).tension=void 0!==x?x:.5}function n$(u,z,t,x,C){z=.5*(x-z);C=.5*(C-t);var G=u*u;return(2*t-2*x+z+C)*u*G+(-3*t+3*
x-2*z-C)*G+z*u+t}function kI(u,z,t,x){var C=1-u;return C*C*z+2*(1-u)*u*t+u*u*x}function lI(u,z,t,x,C){var G=1-u,L=1-u;return G*G*G*z+3*L*L*u*t+3*(1-u)*u*u*x+u*u*u*C}function eu(u,z,t,x){ah.call(this||p);(this||p).type="CubicBezierCurve";(this||p).v0=u||new Xe;(this||p).v1=z||new Xe;(this||p).v2=t||new Xe;(this||p).v3=x||new Xe}function Ov(u,z,t,x){ah.call(this||p);(this||p).type="CubicBezierCurve3";(this||p).v0=u||new nc;(this||p).v1=z||new nc;(this||p).v2=t||new nc;(this||p).v3=x||new nc}function Jq(u,
z){ah.call(this||p);(this||p).type="LineCurve";(this||p).v1=u||new Xe;(this||p).v2=z||new Xe}function fu(u,z){ah.call(this||p);(this||p).type="LineCurve3";(this||p).v1=u||new nc;(this||p).v2=z||new nc}function gu(u,z,t){ah.call(this||p);(this||p).type="QuadraticBezierCurve";(this||p).v0=u||new Xe;(this||p).v1=z||new Xe;(this||p).v2=t||new Xe}function Pv(u,z,t){ah.call(this||p);(this||p).type="QuadraticBezierCurve3";(this||p).v0=u||new nc;(this||p).v1=z||new nc;(this||p).v2=t||new nc}function hu(u){ah.call(this||
p);(this||p).type="SplineCurve";(this||p).points=u||[]}function fx(){ah.call(this||p);(this||p).type="CurvePath";(this||p).curves=[];(this||p).autoClose=!1}function iu(u){fx.call(this||p);(this||p).type="Path";(this||p).currentPoint=new Xe;u&&this.setFromPoints(u)}function mz(u){iu.call(this||p,u);(this||p).uuid=Xh.generateUUID();(this||p).type="Shape";(this||p).holes=[]}function pl(u,z){E.call(this||p);(this||p).type="Light";(this||p).color=new rg(u);(this||p).intensity=void 0!==z?z:1}function pO(u,
z,t){pl.call(this||p,u,t);(this||p).type="HemisphereLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).groundColor=new rg(z)}function gx(u){(this||p).camera=u;(this||p).bias=0;(this||p).normalBias=0;(this||p).radius=1;(this||p).mapSize=new Xe(512,512);(this||p).map=null;(this||p).mapPass=null;(this||p).matrix=new fj;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p)._frustum=new WH;(this||p)._frameExtents=new Xe(1,1);(this||p)._viewportCount=1;(this||p)._viewports=[new Rk(0,
0,1,1)]}function oW(){gx.call(this||p,new ic(50,1,.5,500));(this||p).focus=1}function qO(u,z,t,x,C,G){pl.call(this||p,u,z);(this||p).type="SpotLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).target=new E;Object.defineProperty(this||p,"power",{get:function(){return(this||p).intensity*Math.PI},set:function(L){(this||p).intensity=L/Math.PI}});(this||p).distance=void 0!==t?t:0;(this||p).angle=void 0!==x?x:Math.PI/3;(this||p).penumbra=void 0!==C?C:0;(this||p).decay=void 0!==G?
G:1;(this||p).shadow=new oW}function pW(){gx.call(this||p,new ic(90,1,.5,500));(this||p)._frameExtents=new Xe(4,2);(this||p)._viewportCount=6;(this||p)._viewports=[new Rk(2,1,1,1),new Rk(0,1,1,1),new Rk(3,1,1,1),new Rk(1,1,1,1),new Rk(3,0,1,1),new Rk(1,0,1,1)];(this||p)._cubeDirections=[new nc(1,0,0),new nc(-1,0,0),new nc(0,0,1),new nc(0,0,-1),new nc(0,1,0),new nc(0,-1,0)];(this||p)._cubeUps=[new nc(0,1,0),new nc(0,1,0),new nc(0,1,0),new nc(0,1,0),new nc(0,0,1),new nc(0,0,-1)]}function rO(u,z,t,x){pl.call(this||
p,u,z);(this||p).type="PointLight";Object.defineProperty(this||p,"power",{get:function(){return 4*(this||p).intensity*Math.PI},set:function(C){(this||p).intensity=C/(4*Math.PI)}});(this||p).distance=void 0!==t?t:0;(this||p).decay=void 0!==x?x:1;(this||p).shadow=new pW}function yE(u,z,t,x,C,G){Lb.call(this||p);(this||p).type="OrthographicCamera";(this||p).zoom=1;(this||p).view=null;(this||p).left=void 0!==u?u:-1;(this||p).right=void 0!==z?z:1;(this||p).top=void 0!==t?t:1;(this||p).bottom=void 0!==
x?x:-1;(this||p).near=void 0!==C?C:.1;(this||p).far=void 0!==G?G:2E3;this.updateProjectionMatrix()}function qW(){gx.call(this||p,new yE(-5,5,5,-5,.5,500))}function sO(u,z){pl.call(this||p,u,z);(this||p).type="DirectionalLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).target=new E;(this||p).shadow=new qW}function tO(u,z){pl.call(this||p,u,z);(this||p).type="AmbientLight"}function uO(u,z,t,x){pl.call(this||p,u,z);(this||p).type="RectAreaLight";(this||p).width=void 0!==t?t:
10;(this||p).height=void 0!==x?x:10}function $s(u,z){pl.call(this||p,void 0,z);(this||p).type="LightProbe";(this||p).sh=void 0!==u?u:new o$}function vO(u){Mk.call(this||p,u);(this||p).textures={}}function mI(){oa.call(this||p);(this||p).type="InstancedBufferGeometry";(this||p).instanceCount=Infinity}function wO(u,z,t,x){"number"===typeof t&&(x=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));X.call(this||p,u,z,t);(this||p).meshPerAttribute=
x||1}function xO(u){Mk.call(this||p,u)}function rW(u){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");Mk.call(this||p,u);(this||p).options={premultiplyAlpha:"none"}}function sW(){(this||p).type="ShapePath";(this||p).color=new rg;(this||p).subPaths=[];(this||p).currentPath=null}function tW(u){(this||p).type="Font";(this||p).data=u}function uW(u){Mk.call(this||
p,u)}function yO(u){Mk.call(this||p,u)}function vW(u,z,t){$s.call(this||p,void 0,t);u=(new rg).set(u);t=(new rg).set(z);z=new nc(u.r,u.g,u.b);u=new nc(t.r,t.g,t.b);t=Math.sqrt(Math.PI);var x=t*Math.sqrt(.75);(this||p).sh.coefficients[0].copy(z).add(u).multiplyScalar(t);(this||p).sh.coefficients[1].copy(z).sub(u).multiplyScalar(x)}function wW(u,z){$s.call(this||p,void 0,z);u=(new rg).set(u);(this||p).sh.coefficients[0].set(u.r,u.g,u.b).multiplyScalar(2*Math.sqrt(Math.PI))}function p$(){(this||p).type=
"StereoCamera";(this||p).aspect=1;(this||p).eyeSep=.064;(this||p).cameraL=new ic;(this||p).cameraL.layers.enable(1);(this||p).cameraL.matrixAutoUpdate=!1;(this||p).cameraR=new ic;(this||p).cameraR.layers.enable(2);(this||p).cameraR.matrixAutoUpdate=!1;(this||p)._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function xW(u,z,t){(this||p).binding=u;(this||p).valueSize=t;switch(z){case "quaternion":u=(this||p)._slerp;z=(this||p)._slerpAdditive;var x=(this||p)._setAdditiveIdentityQuaternion;
(this||p).buffer=new Float64Array(6*t);(this||p)._workIndex=5;break;case "string":case "bool":u=(this||p)._select;z=(this||p)._select;x=(this||p)._setAdditiveIdentityOther;(this||p).buffer=Array(5*t);break;default:u=(this||p)._lerp,z=(this||p)._lerpAdditive,x=(this||p)._setAdditiveIdentityNumeric,(this||p).buffer=new Float64Array(5*t)}(this||p)._mixBufferRegion=u;(this||p)._mixBufferRegionAdditive=z;(this||p)._setIdentity=x;(this||p)._origIndex=3;(this||p)._addIndex=4;(this||p).cumulativeWeight=0;
(this||p).cumulativeWeightAdditive=0;(this||p).useCount=0;(this||p).referenceCount=0}function q$(u,z,t){t=t||op.parseTrackName(z);(this||p)._targetGroup=u;(this||p)._bindings=u.subscribe_(z,t)}function op(u,z,t){(this||p).path=z;(this||p).parsedPath=t||op.parseTrackName(z);(this||p).node=op.findNode(u,(this||p).parsedPath.nodeName)||u;(this||p).rootNode=u}function r$(){(this||p).uuid=Xh.generateUUID();(this||p)._objects=Array.prototype.slice.call(arguments);(this||p).nCachedObjects_=0;var u={};(this||
p)._indicesByUUID=u;for(var z=0,t=arguments.length;z!==t;++z)u[arguments[z].uuid]=z;(this||p)._paths=[];(this||p)._parsedPaths=[];(this||p)._bindings=[];(this||p)._bindingsIndicesByPath={};var x=this||p;(this||p).stats={objects:{get total(){return x._objects.length},get inUse(){return(this||p).total-x.nCachedObjects_}},get bindingsPerObject(){return x._bindings.length}}}function yW(u){(this||p)._root=u;this._initMemoryManager();(this||p)._accuIndex=0;(this||p).time=0;(this||p).timeScale=1}function zW(u,
z,t){Fr.call(this||p,u,z);(this||p).meshPerAttribute=t||1}function AW(u,z,t,x,C){(this||p).buffer=u;(this||p).type=z;(this||p).itemSize=t;(this||p).elementSize=x;(this||p).count=C;(this||p).version=0}function BW(u,z,t,x){(this||p).ray=new zE(u,z);(this||p).near=t||0;(this||p).far=x||Infinity;(this||p).camera=null;(this||p).layers=new VV;(this||p).params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties((this||p).params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");
return(this||p).Points}}})}function s$(u,z){return u.distance-z.distance}function CW(u,z,t,x){u.layers.test(z.layers)&&u.raycast(z,t);if(!0===x){u=u.children;x=0;for(var C=u.length;x<C;x++)CW(u[x],z,t,!0)}}function nI(u){E.call(this||p);(this||p).material=u;(this||p).render=function(){};(this||p).hasPositions=!1;(this||p).hasNormals=!1;(this||p).hasColors=!1;(this||p).hasUvs=!1;(this||p).positionArray=null;(this||p).normalArray=null;(this||p).colorArray=null;(this||p).uvArray=null;(this||p).count=
0}function t$(u){var z=[];u&&u.isBone&&z.push(u);for(var t=0;t<u.children.length;t++)z.push.apply(z,t$(u.children[t]));return z}function Bm(u,z,t,x,C,G,L){zO.set(C,G,L).unproject(x);u=z[u];if(void 0!==u)for(t=t.getAttribute("position"),z=0,x=u.length;z<x;z++)t.setXYZ(u[z],zO.x,zO.y,zO.z)}function u$(u){u=new v(3*Qv,3*Qv,u);u.texture.mapping=306;u.texture.name="PMREM.cubeUv";u.scissorTest=!0;return u}function AO(u,z,t,x,C){u.viewport.set(z,t,x,C);u.scissor.set(z,t,x,C)}function v$(){var u=new Xe(1,
1);return new ex({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:u},inputEncoding:{value:Rv[3E3]},outputEncoding:{value:Rv[3E3]}},vertexShader:DW(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+EW()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function w$(){return new ex({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Rv[3E3]},outputEncoding:{value:Rv[3E3]}},vertexShader:DW(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+EW()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function DW(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}
function EW(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}
function x$(u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");np.call(this||p,u);(this||p).type="catmullrom";(this||p).closed=!0}function y$(u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");np.call(this||p,u);(this||p).type="catmullrom"}function FW(u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");np.call(this||p,u);(this||p).type="catmullrom"}void 0===Number.EPSILON&&
(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(u){return"number"===typeof u&&isFinite(u)&&Math.floor(u)===u});void 0===Math.sign&&(Math.sign=function(u){return 0>u?-1:0<u?1:+u});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&(Object.assign=function(u){if(void 0===u||null===u)throw new TypeError("Cannot convert undefined or null to object");
for(var z=Object(u),t=1;t<arguments.length;t++){var x=arguments[t];if(void 0!==x&&null!==x)for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(z[C]=x[C])}return z});Object.assign(e.prototype,{addEventListener:function(u,z){void 0===(this||p)._listeners&&((this||p)._listeners={});var t=(this||p)._listeners;void 0===t[u]&&(t[u]=[]);-1===t[u].indexOf(z)&&t[u].push(z)},hasEventListener:function(u,z){if(void 0===(this||p)._listeners)return!1;var t=(this||p)._listeners;return void 0!==t[u]&&-1!==
t[u].indexOf(z)},removeEventListener:function(u,z){void 0!==(this||p)._listeners&&(u=(this||p)._listeners[u],void 0!==u&&(z=u.indexOf(z),-1!==z&&u.splice(z,1)))},dispatchEvent:function(u){if(void 0!==(this||p)._listeners){var z=(this||p)._listeners[u.type];if(void 0!==z){u.target=this||p;z=z.slice(0);for(var t=0,x=z.length;t<x;t++)z[t].call(this||p,u)}}}});for(var Oo=[],oI=0;256>oI;oI++)Oo[oI]=(16>oI?"0":"")+oI.toString(16);var BO=1234567,Xh={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var u=
4294967295*Math.random()|0,z=4294967295*Math.random()|0,t=4294967295*Math.random()|0,x=4294967295*Math.random()|0;return(Oo[u&255]+Oo[u>>8&255]+Oo[u>>16&255]+Oo[u>>24&255]+"-"+Oo[z&255]+Oo[z>>8&255]+"-"+Oo[z>>16&15|64]+Oo[z>>24&255]+"-"+Oo[t&63|128]+Oo[t>>8&255]+"-"+Oo[t>>16&255]+Oo[t>>24&255]+Oo[x&255]+Oo[x>>8&255]+Oo[x>>16&255]+Oo[x>>24&255]).toUpperCase()},clamp:function(u,z,t){return Math.max(z,Math.min(t,u))},euclideanModulo:function(u,z){return(u%z+z)%z},mapLinear:function(u,z,t,x,C){return x+
(u-z)*(C-x)/(t-z)},lerp:function(u,z,t){return(1-t)*u+t*z},smoothstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*(3-2*u)},smootherstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*u*(u*(6*u-15)+10)},randInt:function(u,z){return u+Math.floor(Math.random()*(z-u+1))},randFloat:function(u,z){return u+Math.random()*(z-u)},randFloatSpread:function(u){return u*(.5-Math.random())},seededRandom:function(u){void 0!==u&&(BO=u%2147483647);BO=16807*
BO%2147483647;return(BO-1)/2147483646},degToRad:function(u){return u*Xh.DEG2RAD},radToDeg:function(u){return u*Xh.RAD2DEG},isPowerOfTwo:function(u){return 0===(u&u-1)&&0!==u},ceilPowerOfTwo:function(u){return Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},floorPowerOfTwo:function(u){return Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},setQuaternionFromProperEuler:function(u,z,t,x,C){var G=Math.cos,L=Math.sin,S=G(t/2);t=L(t/2);var V=G((z+x)/2),Z=L((z+x)/2),ja=G((z-x)/2),ta=L((z-x)/2);G=G((x-z)/2);z=
L((x-z)/2);switch(C){case "XYX":u.set(S*Z,t*ja,t*ta,S*V);break;case "YZY":u.set(t*ta,S*Z,t*ja,S*V);break;case "ZXZ":u.set(t*ja,t*ta,S*Z,S*V);break;case "XZX":u.set(S*Z,t*z,t*G,S*V);break;case "YXY":u.set(t*G,S*Z,t*z,S*V);break;case "ZYZ":u.set(t*z,t*G,S*Z,S*V);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+C)}}},Xe=function(){function u(t,x){void 0===t&&(t=0);void 0===x&&(x=0);Object.defineProperty(this||p,"isVector2",{value:!0});(this||
p).x=t;(this||p).y=x}var z=u.prototype;z.set=function(t,x){(this||p).x=t;(this||p).y=x;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||p).y=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||
p).y;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;return this||p};z.addVectors=function(t,
x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;return this||p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||p).y-=t.y;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;return this||
p};z.multiply=function(t){(this||p).x*=t.x;(this||p).y*=t.y;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;return this||p};z.divide=function(t){(this||p).x/=t.x;(this||p).y/=t.y;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.applyMatrix3=function(t){var x=(this||p).x,C=(this||p).y;t=t.elements;(this||p).x=t[0]*x+t[3]*C+t[6];(this||p).y=t[1]*x+t[4]*C+t[7];return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||
p).y,t.y);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(x.y,(this||p).y));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,
Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);
return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y};z.cross=function(t){return(this||p).x*t.y-(this||p).y*t.x};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)};z.normalize=function(){return this.divideScalar(this.length()||
1)};z.angle=function(){return Math.atan2(-(this||p).y,-(this||p).x)+Math.PI};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var x=(this||p).x-t.x;t=(this||p).y-t.y;return x*x+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;return this||p};z.lerpVectors=
function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).x=t[x];(this||p).y=t[x+1];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");(this||p).x=
t.getX(x);(this||p).y=t.getY(x);return this||p};z.rotateAround=function(t,x){var C=Math.cos(x);x=Math.sin(x);var G=(this||p).x-t.x,L=(this||p).y-t.y;(this||p).x=G*C-L*x+t.x;(this||p).y=G*x+L*C+t.y;return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).x},set:function(t){(this||p).x=t}},{key:"height",get:function(){return(this||p).y},set:function(t){(this||p).y=t}}]);return u}(),Up=function(){function u(){Object.defineProperty(this||
p,"isMatrix3",{value:!0});(this||p).elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,x,C,G,L,S,V,Z,ja){var ta=(this||p).elements;ta[0]=t;ta[1]=G;ta[2]=V;ta[3]=x;ta[4]=L;ta[5]=Z;ta[6]=C;ta[7]=S;ta[8]=ja;return this||p};z.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this||p};z.clone=function(){return(new (this||p).constructor).fromArray((this||p).elements)};z.copy=
function(t){var x=(this||p).elements;t=t.elements;x[0]=t[0];x[1]=t[1];x[2]=t[2];x[3]=t[3];x[4]=t[4];x[5]=t[5];x[6]=t[6];x[7]=t[7];x[8]=t[8];return this||p};z.extractBasis=function(t,x,C){t.setFromMatrix3Column(this||p,0);x.setFromMatrix3Column(this||p,1);C.setFromMatrix3Column(this||p,2);return this||p};z.setFromMatrix4=function(t){t=t.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this||p};z.multiply=function(t){return this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,
this||p)};z.multiplyMatrices=function(t,x){var C=t.elements,G=x.elements;x=(this||p).elements;t=C[0];var L=C[3],S=C[6],V=C[1],Z=C[4],ja=C[7],ta=C[2],Ha=C[5];C=C[8];var db=G[0],Ya=G[3],vb=G[6],sb=G[1],Qc=G[4],zc=G[7],jd=G[2],Bc=G[5];G=G[8];x[0]=t*db+L*sb+S*jd;x[3]=t*Ya+L*Qc+S*Bc;x[6]=t*vb+L*zc+S*G;x[1]=V*db+Z*sb+ja*jd;x[4]=V*Ya+Z*Qc+ja*Bc;x[7]=V*vb+Z*zc+ja*G;x[2]=ta*db+Ha*sb+C*jd;x[5]=ta*Ya+Ha*Qc+C*Bc;x[8]=ta*vb+Ha*zc+C*G;return this||p};z.multiplyScalar=function(t){var x=(this||p).elements;x[0]*=
t;x[3]*=t;x[6]*=t;x[1]*=t;x[4]*=t;x[7]*=t;x[2]*=t;x[5]*=t;x[8]*=t;return this||p};z.determinant=function(){var t=(this||p).elements,x=t[0],C=t[1],G=t[2],L=t[3],S=t[4],V=t[5],Z=t[6],ja=t[7];t=t[8];return x*S*t-x*V*ja-C*L*t+C*V*Z+G*L*ja-G*S*Z};z.getInverse=function(t,x){void 0!==x&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var C=t.elements;t=(this||p).elements;x=C[0];var G=C[1],L=C[2],S=C[3],V=C[4],Z=C[5],ja=C[6],ta=C[7];C=C[8];var Ha=C*V-Z*ta,
db=Z*ja-C*S,Ya=ta*S-V*ja,vb=x*Ha+G*db+L*Ya;if(0===vb)return this.set(0,0,0,0,0,0,0,0,0);vb=1/vb;t[0]=Ha*vb;t[1]=(L*ta-C*G)*vb;t[2]=(Z*G-L*V)*vb;t[3]=db*vb;t[4]=(C*x-L*ja)*vb;t[5]=(L*S-Z*x)*vb;t[6]=Ya*vb;t[7]=(G*ja-ta*x)*vb;t[8]=(V*x-G*S)*vb;return this||p};z.transpose=function(){var t=(this||p).elements;var x=t[1];t[1]=t[3];t[3]=x;x=t[2];t[2]=t[6];t[6]=x;x=t[5];t[5]=t[7];t[7]=x;return this||p};z.getNormalMatrix=function(t){return this.setFromMatrix4(t).getInverse(this||p).transpose()};z.transposeIntoArray=
function(t){var x=(this||p).elements;t[0]=x[0];t[1]=x[3];t[2]=x[6];t[3]=x[1];t[4]=x[4];t[5]=x[7];t[6]=x[2];t[7]=x[5];t[8]=x[8];return this||p};z.setUvTransform=function(t,x,C,G,L,S,V){var Z=Math.cos(L);L=Math.sin(L);this.set(C*Z,C*L,-C*(Z*S+L*V)+S+t,-G*L,G*Z,-G*(-L*S+Z*V)+V+x,0,0,1)};z.scale=function(t,x){var C=(this||p).elements;C[0]*=t;C[3]*=t;C[6]*=t;C[1]*=x;C[4]*=x;C[7]*=x;return this||p};z.rotate=function(t){var x=Math.cos(t);t=Math.sin(t);var C=(this||p).elements,G=C[0],L=C[3],S=C[6],V=C[1],
Z=C[4],ja=C[7];C[0]=x*G+t*V;C[3]=x*L+t*Z;C[6]=x*S+t*ja;C[1]=-t*G+x*V;C[4]=-t*L+x*Z;C[7]=-t*S+x*ja;return this||p};z.translate=function(t,x){var C=(this||p).elements;C[0]+=t*C[2];C[3]+=t*C[5];C[6]+=t*C[8];C[1]+=x*C[2];C[4]+=x*C[5];C[7]+=x*C[8];return this||p};z.equals=function(t){var x=(this||p).elements;t=t.elements;for(var C=0;9>C;C++)if(x[C]!==t[C])return!1;return!0};z.fromArray=function(t,x){void 0===x&&(x=0);for(var C=0;9>C;C++)(this||p).elements[C]=t[C+x];return this||p};z.toArray=function(t,
x){void 0===t&&(t=[]);void 0===x&&(x=0);var C=(this||p).elements;t[x]=C[0];t[x+1]=C[1];t[x+2]=C[2];t[x+3]=C[3];t[x+4]=C[4];t[x+5]=C[5];t[x+6]=C[6];t[x+7]=C[7];t[x+8]=C[8];return t};return u}(),AE,nz={getDataURL:function(u){if(/^data:/i.test(u.src)||"undefined"==typeof HTMLCanvasElement)return u.src;if(!(u instanceof HTMLCanvasElement)){void 0===AE&&(AE=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));AE.width=u.width;AE.height=u.height;var z=AE.getContext("2d");u instanceof ImageData?
z.putImageData(u,0,0):z.drawImage(u,0,0,u.width,u.height);u=AE}return 2048<u.width||2048<u.height?u.toDataURL("image/jpeg",.6):u.toDataURL("image/png")}},cra=0;r.DEFAULT_IMAGE=void 0;r.DEFAULT_MAPPING=300;r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){(this||p).matrix.setUvTransform((this||p).offset.x,(this||p).offset.y,(this||p).repeat.x,(this||p).repeat.y,(this||p).rotation,(this||p).center.x,(this||p).center.y)},clone:function(){return(new (this||
p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).image=u.image;(this||p).mipmaps=u.mipmaps.slice(0);(this||p).mapping=u.mapping;(this||p).wrapS=u.wrapS;(this||p).wrapT=u.wrapT;(this||p).magFilter=u.magFilter;(this||p).minFilter=u.minFilter;(this||p).anisotropy=u.anisotropy;(this||p).format=u.format;(this||p).internalFormat=u.internalFormat;(this||p).type=u.type;(this||p).offset.copy(u.offset);(this||p).repeat.copy(u.repeat);(this||p).center.copy(u.center);(this||p).rotation=
u.rotation;(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrix.copy(u.matrix);(this||p).generateMipmaps=u.generateMipmaps;(this||p).premultiplyAlpha=u.premultiplyAlpha;(this||p).flipY=u.flipY;(this||p).unpackAlignment=u.unpackAlignment;(this||p).encoding=u.encoding;return this||p},toJSON:function(u){var z=void 0===u||"string"===typeof u;if(!z&&void 0!==u.textures[(this||p).uuid])return u.textures[(this||p).uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:(this||
p).uuid,name:(this||p).name,mapping:(this||p).mapping,repeat:[(this||p).repeat.x,(this||p).repeat.y],offset:[(this||p).offset.x,(this||p).offset.y],center:[(this||p).center.x,(this||p).center.y],rotation:(this||p).rotation,wrap:[(this||p).wrapS,(this||p).wrapT],format:(this||p).format,type:(this||p).type,encoding:(this||p).encoding,minFilter:(this||p).minFilter,magFilter:(this||p).magFilter,anisotropy:(this||p).anisotropy,flipY:(this||p).flipY,premultiplyAlpha:(this||p).premultiplyAlpha,unpackAlignment:(this||
p).unpackAlignment};if(void 0!==(this||p).image){var x=(this||p).image;void 0===x.uuid&&(x.uuid=Xh.generateUUID());if(!z&&void 0===u.images[x.uuid]){if(Array.isArray(x)){var C=[];for(var G=0,L=x.length;G<L;G++)C.push(nz.getDataURL(x[G]))}else C=nz.getDataURL(x);u.images[x.uuid]={uuid:x.uuid,url:C}}t.image=x.uuid}z||(u.textures[(this||p).uuid]=t);return t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(u){if(300!==(this||p).mapping)return u;u.applyMatrix3((this||p).matrix);
if(0>u.x||1<u.x)switch((this||p).wrapS){case 1E3:u.x-=Math.floor(u.x);break;case 1001:u.x=0>u.x?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(0>u.y||1<u.y)switch((this||p).wrapT){case 1E3:u.y-=Math.floor(u.y);break;case 1001:u.y=0>u.y?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}(this||p).flipY&&(u.y=1-u.y);return u}});Object.defineProperty(r.prototype,"needsUpdate",{set:function(u){!0===u&&(this||
p).version++}});var Rk=function(){function u(t,x,C,G){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===G&&(G=1);Object.defineProperty(this||p,"isVector4",{value:!0});(this||p).x=t;(this||p).y=x;(this||p).z=C;(this||p).w=G}var z=u.prototype;z.set=function(t,x,C,G){(this||p).x=t;(this||p).y=x;(this||p).z=C;(this||p).w=G;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;(this||p).w=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=
function(t){(this||p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};z.setW=function(t){(this||p).w=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;case 2:(this||p).z=x;break;case 3:(this||p).w=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;case 3:return(this||p).w;default:throw Error("index is out of range: "+
t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y,(this||p).z,(this||p).w)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;(this||p).w=void 0!==t.w?t.w:1;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;(this||p).w+=t.w;return this||p};z.addScalar=function(t){(this||
p).x+=t;(this||p).y+=t;(this||p).z+=t;(this||p).w+=t;return this||p};z.addVectors=function(t,x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;(this||p).z=t.z+x.z;(this||p).w=t.w+x.w;return this||p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;(this||p).z+=t.z*x;(this||p).w+=t.w*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||
p).y-=t.y;(this||p).z-=t.z;(this||p).w-=t.w;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;(this||p).w-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;(this||p).z=t.z-x.z;(this||p).w=t.w-x.w;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;(this||p).w*=t;return this||p};z.applyMatrix4=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z,L=(this||p).w;t=t.elements;(this||p).x=t[0]*
x+t[4]*C+t[8]*G+t[12]*L;(this||p).y=t[1]*x+t[5]*C+t[9]*G+t[13]*L;(this||p).z=t[2]*x+t[6]*C+t[10]*G+t[14]*L;(this||p).w=t[3]*x+t[7]*C+t[11]*G+t[15]*L;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.setAxisAngleFromQuaternion=function(t){(this||p).w=2*Math.acos(t.w);var x=Math.sqrt(1-t.w*t.w);1E-4>x?((this||p).x=1,(this||p).y=0,(this||p).z=0):((this||p).x=t.x/x,(this||p).y=t.y/x,(this||p).z=t.z/x);return this||p};z.setAxisAngleFromRotationMatrix=function(t){t=t.elements;
var x=t[0];var C=t[4];var G=t[8],L=t[1],S=t[5],V=t[9];var Z=t[2];var ja=t[6];var ta=t[10];if(.01>Math.abs(C-L)&&.01>Math.abs(G-Z)&&.01>Math.abs(V-ja)){if(.1>Math.abs(C+L)&&.1>Math.abs(G+Z)&&.1>Math.abs(V+ja)&&.1>Math.abs(x+S+ta-3))return this.set(1,0,0,0),this||p;t=Math.PI;x=(x+1)/2;S=(S+1)/2;ta=(ta+1)/2;C=(C+L)/4;G=(G+Z)/4;V=(V+ja)/4;x>S&&x>ta?.01>x?(ja=0,C=Z=.707106781):(ja=Math.sqrt(x),Z=C/ja,C=G/ja):S>ta?.01>S?(ja=.707106781,Z=0,C=.707106781):(Z=Math.sqrt(S),ja=C/Z,C=V/Z):.01>ta?(Z=ja=.707106781,
C=0):(C=Math.sqrt(ta),ja=G/C,Z=V/C);this.set(ja,Z,C,t);return this||p}t=Math.sqrt((ja-V)*(ja-V)+(G-Z)*(G-Z)+(L-C)*(L-C));.001>Math.abs(t)&&(t=1);(this||p).x=(ja-V)/t;(this||p).y=(G-Z)/t;(this||p).z=(L-C)/t;(this||p).w=Math.acos((x+S+ta-1)/2);return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);(this||p).w=Math.min((this||p).w,t.w);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||
p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,t.z);(this||p).w=Math.max((this||p).w,t.w);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(x.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(x.z,(this||p).z));(this||p).w=Math.max(t.w,Math.min(x.w,(this||p).w));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));(this||p).z=
Math.max(t,Math.min(x,(this||p).z));(this||p).w=Math.max(t,Math.min(x,(this||p).w));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||p).z=Math.floor((this||p).z);(this||p).w=Math.floor((this||p).w);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=
Math.ceil((this||p).z);(this||p).w=Math.ceil((this||p).w);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);(this||p).z=Math.round((this||p).z);(this||p).w=Math.round((this||p).w);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);(this||
p).w=0>(this||p).w?Math.ceil((this||p).w):Math.floor((this||p).w);return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;(this||p).w=-(this||p).w;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+(this||p).z*t.z+(this||p).w*t.w};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*
(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)+Math.abs((this||p).w)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;(this||p).z+=(t.z-(this||p).z)*x;(this||p).w+=(t.w-(this||p).w)*x;return this||p};z.lerpVectors=
function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;(this||p).z=t.z+(x.z-t.z)*C;(this||p).w=t.w+(x.w-t.w)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z&&t.w===(this||p).w};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).x=t[x];(this||p).y=t[x+1];(this||p).z=t[x+2];(this||p).w=t[x+3];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;t[x+2]=(this||p).z;t[x+
3]=(this||p).w;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");(this||p).x=t.getX(x);(this||p).y=t.getY(x);(this||p).z=t.getZ(x);(this||p).w=t.getW(x);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();(this||p).w=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).z},set:function(t){(this||p).z=t}},{key:"height",
get:function(){return(this||p).w},set:function(t){(this||p).w=t}}]);return u}();v.prototype=Object.assign(Object.create(e.prototype),{constructor:v,isWebGLRenderTarget:!0,setSize:function(u,z){if((this||p).width!==u||(this||p).height!==z)(this||p).width=u,(this||p).height=z,(this||p).texture.image.width=u,(this||p).texture.image.height=z,this.dispose();(this||p).viewport.set(0,0,u,z);(this||p).scissor.set(0,0,u,z)},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||
p).width=u.width;(this||p).height=u.height;(this||p).viewport.copy(u.viewport);(this||p).texture=u.texture.clone();(this||p).depthBuffer=u.depthBuffer;(this||p).stencilBuffer=u.stencilBuffer;(this||p).depthTexture=u.depthTexture;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});y.prototype=Object.assign(Object.create(v.prototype),{constructor:y,isWebGLMultisampleRenderTarget:!0,copy:function(u){v.prototype.copy.call(this||p,u);(this||p).samples=u.samples;return this||p}});
var mp=function(){function u(t,x,C,G){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===G&&(G=1);Object.defineProperty(this||p,"isQuaternion",{value:!0});(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._w=G}u.slerp=function(t,x,C,G){return C.copy(t).slerp(x,G)};u.slerpFlat=function(t,x,C,G,L,S,V){var Z=C[G+0],ja=C[G+1],ta=C[G+2];C=C[G+3];G=L[S+0];var Ha=L[S+1],db=L[S+2];L=L[S+3];if(C!==L||Z!==G||ja!==Ha||ta!==db){S=1-V;var Ya=Z*G+ja*Ha+ta*db+C*L,vb=0<=Ya?1:-1,sb=1-Ya*Ya;sb>Number.EPSILON&&
(sb=Math.sqrt(sb),Ya=Math.atan2(sb,Ya*vb),S=Math.sin(S*Ya)/sb,V=Math.sin(V*Ya)/sb);vb*=V;Z=Z*S+G*vb;ja=ja*S+Ha*vb;ta=ta*S+db*vb;C=C*S+L*vb;S===1-V&&(V=1/Math.sqrt(Z*Z+ja*ja+ta*ta+C*C),Z*=V,ja*=V,ta*=V,C*=V)}t[x]=Z;t[x+1]=ja;t[x+2]=ta;t[x+3]=C};u.multiplyQuaternionsFlat=function(t,x,C,G,L,S){var V=C[G],Z=C[G+1],ja=C[G+2];C=C[G+3];G=L[S];var ta=L[S+1],Ha=L[S+2];L=L[S+3];t[x]=V*L+C*G+Z*Ha-ja*ta;t[x+1]=Z*L+C*ta+ja*G-V*Ha;t[x+2]=ja*L+C*Ha+V*ta-Z*G;t[x+3]=C*L-V*G-Z*ta-ja*Ha;return t};var z=u.prototype;
z.set=function(t,x,C,G){(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._w=G;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||p)._x,(this||p)._y,(this||p)._z,(this||p)._w)};z.copy=function(t){(this||p)._x=t.x;(this||p)._y=t.y;(this||p)._z=t.z;(this||p)._w=t.w;this._onChangeCallback();return this||p};z.setFromEuler=function(t,x){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
var C=t._x,G=t._y,L=t._z;t=t._order;var S=Math.cos,V=Math.sin,Z=S(C/2),ja=S(G/2);S=S(L/2);C=V(C/2);G=V(G/2);L=V(L/2);switch(t){case "XYZ":(this||p)._x=C*ja*S+Z*G*L;(this||p)._y=Z*G*S-C*ja*L;(this||p)._z=Z*ja*L+C*G*S;(this||p)._w=Z*ja*S-C*G*L;break;case "YXZ":(this||p)._x=C*ja*S+Z*G*L;(this||p)._y=Z*G*S-C*ja*L;(this||p)._z=Z*ja*L-C*G*S;(this||p)._w=Z*ja*S+C*G*L;break;case "ZXY":(this||p)._x=C*ja*S-Z*G*L;(this||p)._y=Z*G*S+C*ja*L;(this||p)._z=Z*ja*L+C*G*S;(this||p)._w=Z*ja*S-C*G*L;break;case "ZYX":(this||
p)._x=C*ja*S-Z*G*L;(this||p)._y=Z*G*S+C*ja*L;(this||p)._z=Z*ja*L-C*G*S;(this||p)._w=Z*ja*S+C*G*L;break;case "YZX":(this||p)._x=C*ja*S+Z*G*L;(this||p)._y=Z*G*S+C*ja*L;(this||p)._z=Z*ja*L-C*G*S;(this||p)._w=Z*ja*S-C*G*L;break;case "XZY":(this||p)._x=C*ja*S-Z*G*L;(this||p)._y=Z*G*S-C*ja*L;(this||p)._z=Z*ja*L+C*G*S;(this||p)._w=Z*ja*S+C*G*L;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}!1!==x&&this._onChangeCallback();return this||p};z.setFromAxisAngle=
function(t,x){x/=2;var C=Math.sin(x);(this||p)._x=t.x*C;(this||p)._y=t.y*C;(this||p)._z=t.z*C;(this||p)._w=Math.cos(x);this._onChangeCallback();return this||p};z.setFromRotationMatrix=function(t){var x=t.elements,C=x[0];t=x[4];var G=x[8],L=x[1],S=x[5],V=x[9],Z=x[2],ja=x[6];x=x[10];var ta=C+S+x;0<ta?(C=.5/Math.sqrt(ta+1),(this||p)._w=.25/C,(this||p)._x=(ja-V)*C,(this||p)._y=(G-Z)*C,(this||p)._z=(L-t)*C):C>S&&C>x?(C=2*Math.sqrt(1+C-S-x),(this||p)._w=(ja-V)/C,(this||p)._x=.25*C,(this||p)._y=(t+L)/C,
(this||p)._z=(G+Z)/C):S>x?(C=2*Math.sqrt(1+S-C-x),(this||p)._w=(G-Z)/C,(this||p)._x=(t+L)/C,(this||p)._y=.25*C,(this||p)._z=(V+ja)/C):(C=2*Math.sqrt(1+x-C-S),(this||p)._w=(L-t)/C,(this||p)._x=(G+Z)/C,(this||p)._y=(V+ja)/C,(this||p)._z=.25*C);this._onChangeCallback();return this||p};z.setFromUnitVectors=function(t,x){var C=t.dot(x)+1;1E-6>C?(C=0,Math.abs(t.x)>Math.abs(t.z)?((this||p)._x=-t.y,(this||p)._y=t.x,(this||p)._z=0):((this||p)._x=0,(this||p)._y=-t.z,(this||p)._z=t.y)):((this||p)._x=t.y*x.z-
t.z*x.y,(this||p)._y=t.z*x.x-t.x*x.z,(this||p)._z=t.x*x.y-t.y*x.x);(this||p)._w=C;return this.normalize()};z.angleTo=function(t){return 2*Math.acos(Math.abs(Xh.clamp(this.dot(t),-1,1)))};z.rotateTowards=function(t,x){var C=this.angleTo(t);if(0===C)return this||p;this.slerp(t,Math.min(1,x/C));return this||p};z.identity=function(){return this.set(0,0,0,1)};z.inverse=function(){return this.conjugate()};z.conjugate=function(){(this||p)._x*=-1;(this||p)._y*=-1;(this||p)._z*=-1;this._onChangeCallback();
return this||p};z.dot=function(t){return(this||p)._x*t._x+(this||p)._y*t._y+(this||p)._z*t._z+(this||p)._w*t._w};z.lengthSq=function(){return(this||p)._x*(this||p)._x+(this||p)._y*(this||p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w};z.length=function(){return Math.sqrt((this||p)._x*(this||p)._x+(this||p)._y*(this||p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w)};z.normalize=function(){var t=this.length();0===t?((this||p)._x=0,(this||p)._y=0,(this||p)._z=0,(this||p)._w=1):(t=
1/t,(this||p)._x*=t,(this||p)._y*=t,(this||p)._z*=t,(this||p)._w*=t);this._onChangeCallback();return this||p};z.multiply=function(t,x){return void 0!==x?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,x)):this.multiplyQuaternions(this||p,t)};z.premultiply=function(t){return this.multiplyQuaternions(t,this||p)};z.multiplyQuaternions=function(t,x){var C=t._x,G=t._y,L=t._z;t=t._w;var S=x._x,V=x._y,Z=x._z;
x=x._w;(this||p)._x=C*x+t*S+G*Z-L*V;(this||p)._y=G*x+t*V+L*S-C*Z;(this||p)._z=L*x+t*Z+C*V-G*S;(this||p)._w=t*x-C*S-G*V-L*Z;this._onChangeCallback();return this||p};z.slerp=function(t,x){if(0===x)return this||p;if(1===x)return this.copy(t);var C=(this||p)._x,G=(this||p)._y,L=(this||p)._z,S=(this||p)._w,V=S*t._w+C*t._x+G*t._y+L*t._z;0>V?((this||p)._w=-t._w,(this||p)._x=-t._x,(this||p)._y=-t._y,(this||p)._z=-t._z,V=-V):this.copy(t);if(1<=V)return(this||p)._w=S,(this||p)._x=C,(this||p)._y=G,(this||p)._z=
L,this||p;t=1-V*V;if(t<=Number.EPSILON)return V=1-x,(this||p)._w=V*S+x*(this||p)._w,(this||p)._x=V*C+x*(this||p)._x,(this||p)._y=V*G+x*(this||p)._y,(this||p)._z=V*L+x*(this||p)._z,this.normalize(),this._onChangeCallback(),this||p;t=Math.sqrt(t);var Z=Math.atan2(t,V);V=Math.sin((1-x)*Z)/t;x=Math.sin(x*Z)/t;(this||p)._w=S*V+(this||p)._w*x;(this||p)._x=C*V+(this||p)._x*x;(this||p)._y=G*V+(this||p)._y*x;(this||p)._z=L*V+(this||p)._z*x;this._onChangeCallback();return this||p};z.equals=function(t){return t._x===
(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._w===(this||p)._w};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p)._x=t[x];(this||p)._y=t[x+1];(this||p)._z=t[x+2];(this||p)._w=t[x+3];this._onChangeCallback();return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p)._x;t[x+1]=(this||p)._y;t[x+2]=(this||p)._z;t[x+3]=(this||p)._w;return t};z.fromBufferAttribute=function(t,x){(this||p)._x=t.getX(x);(this||p)._y=t.getY(x);(this||p)._z=t.getZ(x);(this||
p)._w=t.getW(x);return this||p};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},set:function(t){(this||p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||p)._z=t;this._onChangeCallback()}},{key:"w",get:function(){return(this||p)._w},set:function(t){(this||
p)._w=t;this._onChangeCallback()}}]);return u}(),nc=function(){function u(t,x,C){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);Object.defineProperty(this||p,"isVector3",{value:!0});(this||p).x=t;(this||p).y=x;(this||p).z=C}var z=u.prototype;z.set=function(t,x,C){void 0===C&&(C=(this||p).z);(this||p).x=t;(this||p).y=x;(this||p).z=C;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||
p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;case 2:(this||p).z=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y,(this||
p).z)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;(this||p).z+=t;return this||p};z.addVectors=function(t,x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;(this||p).z=t.z+x.z;return this||
p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;(this||p).z+=t.z*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||p).y-=t.y;(this||p).z-=t.z;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;(this||p).z=
t.z-x.z;return this||p};z.multiply=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,x);(this||p).x*=t.x;(this||p).y*=t.y;(this||p).z*=t.z;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;return this||p};z.multiplyVectors=function(t,x){(this||p).x=t.x*x.x;(this||p).y=t.y*x.y;(this||p).z=t.z*x.z;return this||p};z.applyEuler=function(t){t&&
t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(z$.setFromEuler(t))};z.applyAxisAngle=function(t,x){return this.applyQuaternion(z$.setFromAxisAngle(t,x))};z.applyMatrix3=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;(this||p).x=t[0]*x+t[3]*C+t[6]*G;(this||p).y=t[1]*x+t[4]*C+t[7]*G;(this||p).z=t[2]*x+t[5]*C+t[8]*G;return this||p};z.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()};
z.applyMatrix4=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;var L=1/(t[3]*x+t[7]*C+t[11]*G+t[15]);(this||p).x=(t[0]*x+t[4]*C+t[8]*G+t[12])*L;(this||p).y=(t[1]*x+t[5]*C+t[9]*G+t[13])*L;(this||p).z=(t[2]*x+t[6]*C+t[10]*G+t[14])*L;return this||p};z.applyQuaternion=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z,L=t.x,S=t.y,V=t.z;t=t.w;var Z=t*x+S*G-V*C,ja=t*C+V*x-L*G,ta=t*G+L*C-S*x;x=-L*x-S*C-V*G;(this||p).x=Z*t+x*-L+ja*-V-ta*-S;(this||p).y=ja*t+x*-S+ta*-L-Z*-V;(this||
p).z=ta*t+x*-V+Z*-S-ja*-L;return this||p};z.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)};z.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)};z.transformDirection=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;(this||p).x=t[0]*x+t[4]*C+t[8]*G;(this||p).y=t[1]*x+t[5]*C+t[9]*G;(this||p).z=t[2]*x+t[6]*C+t[10]*G;return this.normalize()};z.divide=function(t){(this||p).x/=
t.x;(this||p).y/=t.y;(this||p).z/=t.z;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,t.z);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,
Math.min(x.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(x.z,(this||p).z));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));(this||p).z=Math.max(t,Math.min(x,(this||p).z));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||
p).z=Math.floor((this||p).z);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=Math.ceil((this||p).z);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);(this||p).z=Math.round((this||p).z);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||
p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+(this||p).z*t.z};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z)};z.manhattanLength=function(){return Math.abs((this||
p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;(this||p).z+=(t.z-(this||p).z)*x;return this||p};z.lerpVectors=function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;(this||p).z=t.z+(x.z-t.z)*C;return this||p};z.cross=function(t,x){return void 0!==x?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(t,x)):this.crossVectors(this||p,t)};z.crossVectors=function(t,x){var C=t.x,G=t.y;t=t.z;var L=x.x,S=x.y;x=x.z;(this||p).x=G*x-t*S;(this||p).y=t*L-C*x;(this||p).z=C*S-G*L;return this||p};z.projectOnVector=function(t){var x=t.lengthSq();if(0===x)return this.set(0,0,0);x=t.dot(this||p)/x;return this.copy(t).multiplyScalar(x)};z.projectOnPlane=function(t){GW.copy(this||p).projectOnVector(t);return this.sub(GW)};z.reflect=function(t){return this.sub(GW.copy(t).multiplyScalar(2*this.dot(t)))};
z.angleTo=function(t){var x=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===x)return Math.PI/2;t=this.dot(t)/x;return Math.acos(Xh.clamp(t,-1,1))};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var x=(this||p).x-t.x,C=(this||p).y-t.y;t=(this||p).z-t.z;return x*x+C*C+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)+Math.abs((this||p).z-t.z)};z.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,
t.phi,t.theta)};z.setFromSphericalCoords=function(t,x,C){var G=Math.sin(x)*t;(this||p).x=G*Math.sin(C);(this||p).y=Math.cos(x)*t;(this||p).z=G*Math.cos(C);return this||p};z.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)};z.setFromCylindricalCoords=function(t,x,C){(this||p).x=t*Math.sin(x);(this||p).y=C;(this||p).z=t*Math.cos(x);return this||p};z.setFromMatrixPosition=function(t){t=t.elements;(this||p).x=t[12];(this||p).y=t[13];(this||p).z=t[14];return this||
p};z.setFromMatrixScale=function(t){var x=this.setFromMatrixColumn(t,0).length(),C=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();(this||p).x=x;(this||p).y=C;(this||p).z=t;return this||p};z.setFromMatrixColumn=function(t,x){return this.fromArray(t.elements,4*x)};z.setFromMatrix3Column=function(t,x){return this.fromArray(t.elements,3*x)};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z};z.fromArray=function(t,x){void 0===x&&(x=0);
(this||p).x=t[x];(this||p).y=t[x+1];(this||p).z=t[x+2];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;t[x+2]=(this||p).z;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");(this||p).x=t.getX(x);(this||p).y=t.getY(x);(this||p).z=t.getZ(x);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();
return this||p};return u}(),GW=new nc,z$=new mp,Sv=function(){function u(t,x){Object.defineProperty(this||p,"isBox3",{value:!0});(this||p).min=void 0!==t?t:new nc(Infinity,Infinity,Infinity);(this||p).max=void 0!==x?x:new nc(-Infinity,-Infinity,-Infinity)}var z=u.prototype;z.set=function(t,x){(this||p).min.copy(t);(this||p).max.copy(x);return this||p};z.setFromArray=function(t){for(var x=Infinity,C=Infinity,G=Infinity,L=-Infinity,S=-Infinity,V=-Infinity,Z=0,ja=t.length;Z<ja;Z+=3){var ta=t[Z],Ha=t[Z+
1],db=t[Z+2];ta<x&&(x=ta);Ha<C&&(C=Ha);db<G&&(G=db);ta>L&&(L=ta);Ha>S&&(S=Ha);db>V&&(V=db)}(this||p).min.set(x,C,G);(this||p).max.set(L,S,V);return this||p};z.setFromBufferAttribute=function(t){for(var x=Infinity,C=Infinity,G=Infinity,L=-Infinity,S=-Infinity,V=-Infinity,Z=0,ja=t.count;Z<ja;Z++){var ta=t.getX(Z),Ha=t.getY(Z),db=t.getZ(Z);ta<x&&(x=ta);Ha<C&&(C=Ha);db<G&&(G=db);ta>L&&(L=ta);Ha>S&&(S=Ha);db>V&&(V=db)}(this||p).min.set(x,C,G);(this||p).max.set(L,S,V);return this||p};z.setFromPoints=function(t){this.makeEmpty();
for(var x=0,C=t.length;x<C;x++)this.expandByPoint(t[x]);return this||p};z.setFromCenterAndSize=function(t,x){x=pI.copy(x).multiplyScalar(.5);(this||p).min.copy(t).sub(x);(this||p).max.copy(t).add(x);return this||p};z.setFromObject=function(t){this.makeEmpty();return this.expandByObject(t)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=function(){(this||p).min.x=(this||p).min.y=
(this||p).min.z=Infinity;(this||p).max.x=(this||p).max.y=(this||p).max.z=-Infinity;return this||p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y||(this||p).max.z<(this||p).min.z};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new nc);return this.isEmpty()?t.set(0,0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),
t=new nc);return this.isEmpty()?t.set(0,0,0):t.subVectors((this||p).max,(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.expandByObject=function(t){t.updateWorldMatrix(!1,!1);var x=t.geometry;void 0!==x&&(null===x.boundingBox&&x.computeBoundingBox(),HW.copy(x.boundingBox),
HW.applyMatrix4(t.matrixWorld),this.union(HW));t=t.children;x=0;for(var C=t.length;x<C;x++)this.expandByObject(t[x]);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y||t.z<(this||p).min.z||t.z>(this||p).max.z?!1:!0};z.containsBox=function(t){return(this||p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y&&(this||p).min.z<=t.min.z&&t.max.z<=(this||p).max.z};z.getParameter=
function(t,x){void 0===x&&(console.warn("THREE.Box3: .getParameter() target is now required"),x=new nc);return x.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y),(t.z-(this||p).min.z)/((this||p).max.z-(this||p).min.z))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y||t.max.z<(this||p).min.z||t.min.z>(this||p).max.z?!1:!0};z.intersectsSphere=function(t){this.clampPoint(t.center,
pI);return pI.distanceToSquared(t.center)<=t.radius*t.radius};z.intersectsPlane=function(t){if(0<t.normal.x){var x=t.normal.x*(this||p).min.x;var C=t.normal.x*(this||p).max.x}else x=t.normal.x*(this||p).max.x,C=t.normal.x*(this||p).min.x;0<t.normal.y?(x+=t.normal.y*(this||p).min.y,C+=t.normal.y*(this||p).max.y):(x+=t.normal.y*(this||p).max.y,C+=t.normal.y*(this||p).min.y);0<t.normal.z?(x+=t.normal.z*(this||p).min.z,C+=t.normal.z*(this||p).max.z):(x+=t.normal.z*(this||p).max.z,C+=t.normal.z*(this||
p).min.z);return x<=-t.constant&&C>=-t.constant};z.intersectsTriangle=function(t){if(this.isEmpty())return!1;this.getCenter(qI);CO.subVectors((this||p).max,qI);BE.subVectors(t.a,qI);CE.subVectors(t.b,qI);DE.subVectors(t.c,qI);oz.subVectors(CE,BE);pz.subVectors(DE,CE);SB.subVectors(BE,DE);t=[0,-oz.z,oz.y,0,-pz.z,pz.y,0,-SB.z,SB.y,oz.z,0,-oz.x,pz.z,0,-pz.x,SB.z,0,-SB.x,-oz.y,oz.x,0,-pz.y,pz.x,0,-SB.y,SB.x,0];if(!A(t,BE,CE,DE,CO))return!1;t=[1,0,0,0,1,0,0,0,1];if(!A(t,BE,CE,DE,CO))return!1;DO.crossVectors(oz,
pz);t=[DO.x,DO.y,DO.z];return A(t,BE,CE,DE,CO)};z.clampPoint=function(t,x){void 0===x&&(console.warn("THREE.Box3: .clampPoint() target is now required"),x=new nc);return x.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return pI.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.getBoundingSphere=function(t){void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(t.center);t.radius=.5*this.getSize(pI).length();return t};
z.intersect=function(t){(this||p).min.max(t.min);(this||p).max.min(t.max);this.isEmpty()&&this.makeEmpty();return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.applyMatrix4=function(t){if(this.isEmpty())return this||p;hx[0].set((this||p).min.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);hx[1].set((this||p).min.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);hx[2].set((this||p).min.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);hx[3].set((this||
p).min.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);hx[4].set((this||p).max.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);hx[5].set((this||p).max.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);hx[6].set((this||p).max.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);hx[7].set((this||p).max.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);this.setFromPoints(hx);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};z.equals=function(t){return t.min.equals((this||
p).min)&&t.max.equals((this||p).max)};return u}(),hx=[new nc,new nc,new nc,new nc,new nc,new nc,new nc,new nc],pI=new nc,HW=new Sv,BE=new nc,CE=new nc,DE=new nc,oz=new nc,pz=new nc,SB=new nc,qI=new nc,CO=new nc,DO=new nc,JB=new nc,vra=new Sv,ix=function(){function u(t,x){(this||p).center=void 0!==t?t:new nc;(this||p).radius=void 0!==x?x:-1}var z=u.prototype;z.set=function(t,x){(this||p).center.copy(t);(this||p).radius=x;return this||p};z.setFromPoints=function(t,x){var C=(this||p).center;void 0!==
x?C.copy(x):vra.setFromPoints(t).getCenter(C);for(var G=x=0,L=t.length;G<L;G++)x=Math.max(x,C.distanceToSquared(t[G]));(this||p).radius=Math.sqrt(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).center.copy(t.center);(this||p).radius=t.radius;return this||p};z.isEmpty=function(){return 0>(this||p).radius};z.makeEmpty=function(){(this||p).center.set(0,0,0);(this||p).radius=-1;return this||p};z.containsPoint=function(t){return t.distanceToSquared((this||
p).center)<=(this||p).radius*(this||p).radius};z.distanceToPoint=function(t){return t.distanceTo((this||p).center)-(this||p).radius};z.intersectsSphere=function(t){var x=(this||p).radius+t.radius;return t.center.distanceToSquared((this||p).center)<=x*x};z.intersectsBox=function(t){return t.intersectsSphere(this||p)};z.intersectsPlane=function(t){return Math.abs(t.distanceToPoint((this||p).center))<=(this||p).radius};z.clampPoint=function(t,x){var C=(this||p).center.distanceToSquared(t);void 0===x&&
(console.warn("THREE.Sphere: .clampPoint() target is now required"),x=new nc);x.copy(t);C>(this||p).radius*(this||p).radius&&(x.sub((this||p).center).normalize(),x.multiplyScalar((this||p).radius).add((this||p).center));return x};z.getBoundingBox=function(t){void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Sv);if(this.isEmpty())return t.makeEmpty(),t;t.set((this||p).center,(this||p).center);t.expandByScalar((this||p).radius);return t};z.applyMatrix4=function(t){(this||
p).center.applyMatrix4(t);(this||p).radius*=t.getMaxScaleOnAxis();return this||p};z.translate=function(t){(this||p).center.add(t);return this||p};z.equals=function(t){return t.center.equals((this||p).center)&&t.radius===(this||p).radius};return u}(),jx=new nc,IW=new nc,EO=new nc,qz=new nc,JW=new nc,FO=new nc,KW=new nc,zE=function(){function u(t,x){(this||p).origin=void 0!==t?t:new nc;(this||p).direction=void 0!==x?x:new nc(0,0,-1)}var z=u.prototype;z.set=function(t,x){(this||p).origin.copy(t);(this||
p).direction.copy(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).origin.copy(t.origin);(this||p).direction.copy(t.direction);return this||p};z.at=function(t,x){void 0===x&&(console.warn("THREE.Ray: .at() target is now required"),x=new nc);return x.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.lookAt=function(t){(this||p).direction.copy(t).sub((this||p).origin).normalize();return this||p};z.recast=function(t){(this||
p).origin.copy(this.at(t,jx));return this||p};z.closestPointToPoint=function(t,x){void 0===x&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),x=new nc);x.subVectors(t,(this||p).origin);t=x.dot((this||p).direction);return 0>t?x.copy((this||p).origin):x.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))};z.distanceSqToPoint=function(t){var x=jx.subVectors(t,(this||p).origin).dot((this||
p).direction);if(0>x)return(this||p).origin.distanceToSquared(t);jx.copy((this||p).direction).multiplyScalar(x).add((this||p).origin);return jx.distanceToSquared(t)};z.distanceSqToSegment=function(t,x,C,G){IW.copy(t).add(x).multiplyScalar(.5);EO.copy(x).sub(t).normalize();qz.copy((this||p).origin).sub(IW);var L=.5*t.distanceTo(x),S=-(this||p).direction.dot(EO),V=qz.dot((this||p).direction),Z=-qz.dot(EO),ja=qz.lengthSq(),ta=Math.abs(1-S*S);if(0<ta){t=S*Z-V;x=S*V-Z;var Ha=L*ta;0<=t?x>=-Ha?x<=Ha?(L=
1/ta,t*=L,x*=L,S=t*(t+S*x+2*V)+x*(S*t+x+2*Z)+ja):(x=L,t=Math.max(0,-(S*x+V)),S=-t*t+x*(x+2*Z)+ja):(x=-L,t=Math.max(0,-(S*x+V)),S=-t*t+x*(x+2*Z)+ja):x<=-Ha?(t=Math.max(0,-(-S*L+V)),x=0<t?-L:Math.min(Math.max(-L,-Z),L),S=-t*t+x*(x+2*Z)+ja):x<=Ha?(t=0,x=Math.min(Math.max(-L,-Z),L),S=x*(x+2*Z)+ja):(t=Math.max(0,-(S*L+V)),x=0<t?L:Math.min(Math.max(-L,-Z),L),S=-t*t+x*(x+2*Z)+ja)}else x=0<S?-L:L,t=Math.max(0,-(S*x+V)),S=-t*t+x*(x+2*Z)+ja;C&&C.copy((this||p).direction).multiplyScalar(t).add((this||p).origin);
G&&G.copy(EO).multiplyScalar(x).add(IW);return S};z.intersectSphere=function(t,x){jx.subVectors(t.center,(this||p).origin);var C=jx.dot((this||p).direction),G=jx.dot(jx)-C*C;t=t.radius*t.radius;if(G>t)return null;t=Math.sqrt(t-G);G=C-t;C+=t;return 0>G&&0>C?null:0>G?this.at(C,x):this.at(G,x)};z.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius};z.distanceToPlane=function(t){var x=t.normal.dot((this||p).direction);if(0===x)return 0===t.distanceToPoint((this||p).origin)?
0:null;t=-((this||p).origin.dot(t.normal)+t.constant)/x;return 0<=t?t:null};z.intersectPlane=function(t,x){t=this.distanceToPlane(t);return null===t?null:this.at(t,x)};z.intersectsPlane=function(t){var x=t.distanceToPoint((this||p).origin);return 0===x||0>t.normal.dot((this||p).direction)*x?!0:!1};z.intersectBox=function(t,x){var C=1/(this||p).direction.x;var G=1/(this||p).direction.y;var L=1/(this||p).direction.z,S=(this||p).origin;if(0<=C){var V=(t.min.x-S.x)*C;C*=t.max.x-S.x}else V=(t.max.x-S.x)*
C,C*=t.min.x-S.x;if(0<=G){var Z=(t.min.y-S.y)*G;G*=t.max.y-S.y}else Z=(t.max.y-S.y)*G,G*=t.min.y-S.y;if(V>G||Z>C)return null;if(Z>V||V!==V)V=Z;if(G<C||C!==C)C=G;0<=L?(Z=(t.min.z-S.z)*L,t=(t.max.z-S.z)*L):(Z=(t.max.z-S.z)*L,t=(t.min.z-S.z)*L);if(V>t||Z>C)return null;if(Z>V||V!==V)V=Z;if(t<C||C!==C)C=t;return 0>C?null:this.at(0<=V?V:C,x)};z.intersectsBox=function(t){return null!==this.intersectBox(t,jx)};z.intersectTriangle=function(t,x,C,G,L){JW.subVectors(x,t);FO.subVectors(C,t);KW.crossVectors(JW,
FO);x=(this||p).direction.dot(KW);if(0<x){if(G)return null;G=1}else if(0>x)G=-1,x=-x;else return null;qz.subVectors((this||p).origin,t);t=G*(this||p).direction.dot(FO.crossVectors(qz,FO));if(0>t)return null;C=G*(this||p).direction.dot(JW.cross(qz));if(0>C||t+C>x)return null;t=-G*qz.dot(KW);return 0>t?null:this.at(t/x,L)};z.applyMatrix4=function(t){(this||p).origin.applyMatrix4(t);(this||p).direction.transformDirection(t);return this||p};z.equals=function(t){return t.origin.equals((this||p).origin)&&
t.direction.equals((this||p).direction)};return u}(),fj=function(){function u(){Object.defineProperty(this||p,"isMatrix4",{value:!0});(this||p).elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,x,C,G,L,S,V,Z,ja,ta,Ha,db,Ya,vb,sb,Qc){var zc=(this||p).elements;zc[0]=t;zc[4]=x;zc[8]=C;zc[12]=G;zc[1]=L;zc[5]=S;zc[9]=V;zc[13]=Z;zc[2]=ja;zc[6]=ta;zc[10]=Ha;zc[14]=
db;zc[3]=Ya;zc[7]=vb;zc[11]=sb;zc[15]=Qc;return this||p};z.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this||p};z.clone=function(){return(new u).fromArray((this||p).elements)};z.copy=function(t){var x=(this||p).elements;t=t.elements;x[0]=t[0];x[1]=t[1];x[2]=t[2];x[3]=t[3];x[4]=t[4];x[5]=t[5];x[6]=t[6];x[7]=t[7];x[8]=t[8];x[9]=t[9];x[10]=t[10];x[11]=t[11];x[12]=t[12];x[13]=t[13];x[14]=t[14];x[15]=t[15];return this||p};z.copyPosition=function(t){var x=(this||p).elements;t=t.elements;
x[12]=t[12];x[13]=t[13];x[14]=t[14];return this||p};z.extractBasis=function(t,x,C){t.setFromMatrixColumn(this||p,0);x.setFromMatrixColumn(this||p,1);C.setFromMatrixColumn(this||p,2);return this||p};z.makeBasis=function(t,x,C){this.set(t.x,x.x,C.x,0,t.y,x.y,C.y,0,t.z,x.z,C.z,0,0,0,0,1);return this||p};z.extractRotation=function(t){var x=(this||p).elements,C=t.elements,G=1/EE.setFromMatrixColumn(t,0).length(),L=1/EE.setFromMatrixColumn(t,1).length();t=1/EE.setFromMatrixColumn(t,2).length();x[0]=C[0]*
G;x[1]=C[1]*G;x[2]=C[2]*G;x[3]=0;x[4]=C[4]*L;x[5]=C[5]*L;x[6]=C[6]*L;x[7]=0;x[8]=C[8]*t;x[9]=C[9]*t;x[10]=C[10]*t;x[11]=0;x[12]=0;x[13]=0;x[14]=0;x[15]=1;return this||p};z.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var x=(this||p).elements,C=t.x,G=t.y,L=t.z,S=Math.cos(C);C=Math.sin(C);var V=Math.cos(G);G=Math.sin(G);var Z=Math.cos(L);L=Math.sin(L);if("XYZ"===t.order){t=S*Z;var ja=
S*L,ta=C*Z,Ha=C*L;x[0]=V*Z;x[4]=-V*L;x[8]=G;x[1]=ja+ta*G;x[5]=t-Ha*G;x[9]=-C*V;x[2]=Ha-t*G;x[6]=ta+ja*G;x[10]=S*V}else"YXZ"===t.order?(t=V*Z,ja=V*L,ta=G*Z,Ha=G*L,x[0]=t+Ha*C,x[4]=ta*C-ja,x[8]=S*G,x[1]=S*L,x[5]=S*Z,x[9]=-C,x[2]=ja*C-ta,x[6]=Ha+t*C,x[10]=S*V):"ZXY"===t.order?(t=V*Z,ja=V*L,ta=G*Z,Ha=G*L,x[0]=t-Ha*C,x[4]=-S*L,x[8]=ta+ja*C,x[1]=ja+ta*C,x[5]=S*Z,x[9]=Ha-t*C,x[2]=-S*G,x[6]=C,x[10]=S*V):"ZYX"===t.order?(t=S*Z,ja=S*L,ta=C*Z,Ha=C*L,x[0]=V*Z,x[4]=ta*G-ja,x[8]=t*G+Ha,x[1]=V*L,x[5]=Ha*G+t,x[9]=
ja*G-ta,x[2]=-G,x[6]=C*V,x[10]=S*V):"YZX"===t.order?(t=S*V,ja=S*G,ta=C*V,Ha=C*G,x[0]=V*Z,x[4]=Ha-t*L,x[8]=ta*L+ja,x[1]=L,x[5]=S*Z,x[9]=-C*Z,x[2]=-G*Z,x[6]=ja*L+ta,x[10]=t-Ha*L):"XZY"===t.order&&(t=S*V,ja=S*G,ta=C*V,Ha=C*G,x[0]=V*Z,x[4]=-L,x[8]=G*Z,x[1]=t*L+Ha,x[5]=S*Z,x[9]=ja*L-ta,x[2]=ta*L-ja,x[6]=C*Z,x[10]=Ha*L+t);x[3]=0;x[7]=0;x[11]=0;x[12]=0;x[13]=0;x[14]=0;x[15]=1;return this||p};z.makeRotationFromQuaternion=function(t){return this.compose(wra,t,xra)};z.lookAt=function(t,x,C){var G=(this||p).elements;
Wp.subVectors(t,x);0===Wp.lengthSq()&&(Wp.z=1);Wp.normalize();rz.crossVectors(C,Wp);0===rz.lengthSq()&&(1===Math.abs(C.z)?Wp.x+=1E-4:Wp.z+=1E-4,Wp.normalize(),rz.crossVectors(C,Wp));rz.normalize();GO.crossVectors(Wp,rz);G[0]=rz.x;G[4]=GO.x;G[8]=Wp.x;G[1]=rz.y;G[5]=GO.y;G[9]=Wp.y;G[2]=rz.z;G[6]=GO.z;G[10]=Wp.z;return this||p};z.multiply=function(t,x){return void 0!==x?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,
x)):this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,this||p)};z.multiplyMatrices=function(t,x){var C=t.elements,G=x.elements;x=(this||p).elements;t=C[0];var L=C[4],S=C[8],V=C[12],Z=C[1],ja=C[5],ta=C[9],Ha=C[13],db=C[2],Ya=C[6],vb=C[10],sb=C[14],Qc=C[3],zc=C[7],jd=C[11];C=C[15];var Bc=G[0],kd=G[4],ud=G[8],Vd=G[12],Ad=G[1],gd=G[5],xd=G[9],jf=G[13],Ae=G[2],uf=G[6],Ff=G[10],$f=G[14],gh=G[3],Qg=G[7],Gi=G[11];G=G[15];x[0]=t*Bc+L*Ad+S*Ae+V*gh;x[4]=t*kd+L*gd+S*uf+
V*Qg;x[8]=t*ud+L*xd+S*Ff+V*Gi;x[12]=t*Vd+L*jf+S*$f+V*G;x[1]=Z*Bc+ja*Ad+ta*Ae+Ha*gh;x[5]=Z*kd+ja*gd+ta*uf+Ha*Qg;x[9]=Z*ud+ja*xd+ta*Ff+Ha*Gi;x[13]=Z*Vd+ja*jf+ta*$f+Ha*G;x[2]=db*Bc+Ya*Ad+vb*Ae+sb*gh;x[6]=db*kd+Ya*gd+vb*uf+sb*Qg;x[10]=db*ud+Ya*xd+vb*Ff+sb*Gi;x[14]=db*Vd+Ya*jf+vb*$f+sb*G;x[3]=Qc*Bc+zc*Ad+jd*Ae+C*gh;x[7]=Qc*kd+zc*gd+jd*uf+C*Qg;x[11]=Qc*ud+zc*xd+jd*Ff+C*Gi;x[15]=Qc*Vd+zc*jf+jd*$f+C*G;return this||p};z.multiplyScalar=function(t){var x=(this||p).elements;x[0]*=t;x[4]*=t;x[8]*=t;x[12]*=t;x[1]*=
t;x[5]*=t;x[9]*=t;x[13]*=t;x[2]*=t;x[6]*=t;x[10]*=t;x[14]*=t;x[3]*=t;x[7]*=t;x[11]*=t;x[15]*=t;return this||p};z.determinant=function(){var t=(this||p).elements,x=t[0],C=t[4],G=t[8],L=t[12],S=t[1],V=t[5],Z=t[9],ja=t[13],ta=t[2],Ha=t[6],db=t[10],Ya=t[14];return t[3]*(+L*Z*Ha-G*ja*Ha-L*V*db+C*ja*db+G*V*Ya-C*Z*Ya)+t[7]*(+x*Z*Ya-x*ja*db+L*S*db-G*S*Ya+G*ja*ta-L*Z*ta)+t[11]*(+x*ja*Ha-x*V*Ya-L*S*Ha+C*S*Ya+L*V*ta-C*ja*ta)+t[15]*(-G*V*ta-x*Z*Ha+x*V*db+G*S*Ha-C*S*db+C*Z*ta)};z.transpose=function(){var t=(this||
p).elements;var x=t[1];t[1]=t[4];t[4]=x;x=t[2];t[2]=t[8];t[8]=x;x=t[6];t[6]=t[9];t[9]=x;x=t[3];t[3]=t[12];t[12]=x;x=t[7];t[7]=t[13];t[13]=x;x=t[11];t[11]=t[14];t[14]=x;return this||p};z.setPosition=function(t,x,C){var G=(this||p).elements;t.isVector3?(G[12]=t.x,G[13]=t.y,G[14]=t.z):(G[12]=t,G[13]=x,G[14]=C);return this||p};z.getInverse=function(t,x){void 0!==x&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");x=(this||p).elements;var C=t.elements;t=
C[0];var G=C[1],L=C[2],S=C[3],V=C[4],Z=C[5],ja=C[6],ta=C[7],Ha=C[8],db=C[9],Ya=C[10],vb=C[11],sb=C[12],Qc=C[13],zc=C[14];C=C[15];var jd=db*zc*ta-Qc*Ya*ta+Qc*ja*vb-Z*zc*vb-db*ja*C+Z*Ya*C,Bc=sb*Ya*ta-Ha*zc*ta-sb*ja*vb+V*zc*vb+Ha*ja*C-V*Ya*C,kd=Ha*Qc*ta-sb*db*ta+sb*Z*vb-V*Qc*vb-Ha*Z*C+V*db*C,ud=sb*db*ja-Ha*Qc*ja-sb*Z*Ya+V*Qc*Ya+Ha*Z*zc-V*db*zc,Vd=t*jd+G*Bc+L*kd+S*ud;if(0===Vd)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);Vd=1/Vd;x[0]=jd*Vd;x[1]=(Qc*Ya*S-db*zc*S-Qc*L*vb+G*zc*vb+db*L*C-G*Ya*C)*Vd;x[2]=
(Z*zc*S-Qc*ja*S+Qc*L*ta-G*zc*ta-Z*L*C+G*ja*C)*Vd;x[3]=(db*ja*S-Z*Ya*S-db*L*ta+G*Ya*ta+Z*L*vb-G*ja*vb)*Vd;x[4]=Bc*Vd;x[5]=(Ha*zc*S-sb*Ya*S+sb*L*vb-t*zc*vb-Ha*L*C+t*Ya*C)*Vd;x[6]=(sb*ja*S-V*zc*S-sb*L*ta+t*zc*ta+V*L*C-t*ja*C)*Vd;x[7]=(V*Ya*S-Ha*ja*S+Ha*L*ta-t*Ya*ta-V*L*vb+t*ja*vb)*Vd;x[8]=kd*Vd;x[9]=(sb*db*S-Ha*Qc*S-sb*G*vb+t*Qc*vb+Ha*G*C-t*db*C)*Vd;x[10]=(V*Qc*S-sb*Z*S+sb*G*ta-t*Qc*ta-V*G*C+t*Z*C)*Vd;x[11]=(Ha*Z*S-V*db*S-Ha*G*ta+t*db*ta+V*G*vb-t*Z*vb)*Vd;x[12]=ud*Vd;x[13]=(Ha*Qc*L-sb*db*L+sb*G*Ya-t*
Qc*Ya-Ha*G*zc+t*db*zc)*Vd;x[14]=(sb*Z*L-V*Qc*L-sb*G*ja+t*Qc*ja+V*G*zc-t*Z*zc)*Vd;x[15]=(V*db*L-Ha*Z*L+Ha*G*ja-t*db*ja-V*G*Ya+t*Z*Ya)*Vd;return this||p};z.scale=function(t){var x=(this||p).elements,C=t.x,G=t.y;t=t.z;x[0]*=C;x[4]*=G;x[8]*=t;x[1]*=C;x[5]*=G;x[9]*=t;x[2]*=C;x[6]*=G;x[10]*=t;x[3]*=C;x[7]*=G;x[11]*=t;return this||p};z.getMaxScaleOnAxis=function(){var t=(this||p).elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))};
z.makeTranslation=function(t,x,C){this.set(1,0,0,t,0,1,0,x,0,0,1,C,0,0,0,1);return this||p};z.makeRotationX=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(1,0,0,0,0,x,-t,0,0,t,x,0,0,0,0,1);return this||p};z.makeRotationY=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(x,0,t,0,0,1,0,0,-t,0,x,0,0,0,0,1);return this||p};z.makeRotationZ=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(x,-t,0,0,t,x,0,0,0,0,1,0,0,0,0,1);return this||p};z.makeRotationAxis=function(t,x){var C=Math.cos(x);x=
Math.sin(x);var G=1-C,L=t.x,S=t.y;t=t.z;var V=G*L,Z=G*S;this.set(V*L+C,V*S-x*t,V*t+x*S,0,V*S+x*t,Z*S+C,Z*t-x*L,0,V*t-x*S,Z*t+x*L,G*t*t+C,0,0,0,0,1);return this||p};z.makeScale=function(t,x,C){this.set(t,0,0,0,0,x,0,0,0,0,C,0,0,0,0,1);return this||p};z.makeShear=function(t,x,C){this.set(1,x,C,0,t,1,C,0,t,x,1,0,0,0,0,1);return this||p};z.compose=function(t,x,C){var G=(this||p).elements,L=x._x,S=x._y,V=x._z,Z=x._w,ja=L+L,ta=S+S,Ha=V+V;x=L*ja;var db=L*ta;L*=Ha;var Ya=S*ta;S*=Ha;V*=Ha;ja*=Z;ta*=Z;Z*=Ha;
Ha=C.x;var vb=C.y;C=C.z;G[0]=(1-(Ya+V))*Ha;G[1]=(db+Z)*Ha;G[2]=(L-ta)*Ha;G[3]=0;G[4]=(db-Z)*vb;G[5]=(1-(x+V))*vb;G[6]=(S+ja)*vb;G[7]=0;G[8]=(L+ta)*C;G[9]=(S-ja)*C;G[10]=(1-(x+Ya))*C;G[11]=0;G[12]=t.x;G[13]=t.y;G[14]=t.z;G[15]=1;return this||p};z.decompose=function(t,x,C){var G=(this||p).elements,L=EE.set(G[0],G[1],G[2]).length(),S=EE.set(G[4],G[5],G[6]).length(),V=EE.set(G[8],G[9],G[10]).length();0>this.determinant()&&(L=-L);t.x=G[12];t.y=G[13];t.z=G[14];an.copy(this||p);t=1/L;G=1/S;var Z=1/V;an.elements[0]*=
t;an.elements[1]*=t;an.elements[2]*=t;an.elements[4]*=G;an.elements[5]*=G;an.elements[6]*=G;an.elements[8]*=Z;an.elements[9]*=Z;an.elements[10]*=Z;x.setFromRotationMatrix(an);C.x=L;C.y=S;C.z=V;return this||p};z.makePerspective=function(t,x,C,G,L,S){void 0===S&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var V=(this||p).elements;V[0]=2*L/(x-t);V[4]=0;V[8]=(x+t)/(x-t);V[12]=0;V[1]=0;V[5]=2*L/(C-G);V[9]=(C+G)/(C-G);V[13]=0;V[2]=
0;V[6]=0;V[10]=-(S+L)/(S-L);V[14]=-2*S*L/(S-L);V[3]=0;V[7]=0;V[11]=-1;V[15]=0;return this||p};z.makeOrthographic=function(t,x,C,G,L,S){var V=(this||p).elements,Z=1/(x-t),ja=1/(C-G),ta=1/(S-L);V[0]=2*Z;V[4]=0;V[8]=0;V[12]=-((x+t)*Z);V[1]=0;V[5]=2*ja;V[9]=0;V[13]=-((C+G)*ja);V[2]=0;V[6]=0;V[10]=-2*ta;V[14]=-((S+L)*ta);V[3]=0;V[7]=0;V[11]=0;V[15]=1;return this||p};z.equals=function(t){var x=(this||p).elements;t=t.elements;for(var C=0;16>C;C++)if(x[C]!==t[C])return!1;return!0};z.fromArray=function(t,
x){void 0===x&&(x=0);for(var C=0;16>C;C++)(this||p).elements[C]=t[C+x];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);var C=(this||p).elements;t[x]=C[0];t[x+1]=C[1];t[x+2]=C[2];t[x+3]=C[3];t[x+4]=C[4];t[x+5]=C[5];t[x+6]=C[6];t[x+7]=C[7];t[x+8]=C[8];t[x+9]=C[9];t[x+10]=C[10];t[x+11]=C[11];t[x+12]=C[12];t[x+13]=C[13];t[x+14]=C[14];t[x+15]=C[15];return t};return u}(),EE=new nc,an=new fj,wra=new nc(0,0,0),xra=new nc(1,1,1),rz=new nc,GO=new nc,Wp=new nc,QN=function(){function u(t,
x,C,G){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===G&&(G=u.DefaultOrder);Object.defineProperty(this||p,"isEuler",{value:!0});(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._order=G}var z=u.prototype;z.set=function(t,x,C,G){(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._order=G||(this||p)._order;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||p)._x,(this||p)._y,(this||p)._z,(this||p)._order)};z.copy=function(t){(this||
p)._x=t._x;(this||p)._y=t._y;(this||p)._z=t._z;(this||p)._order=t._order;this._onChangeCallback();return this||p};z.setFromRotationMatrix=function(t,x,C){var G=Xh.clamp,L=t.elements;t=L[0];var S=L[4],V=L[8],Z=L[1],ja=L[5],ta=L[9],Ha=L[2],db=L[6];L=L[10];x=x||(this||p)._order;switch(x){case "XYZ":(this||p)._y=Math.asin(G(V,-1,1));.9999999>Math.abs(V)?((this||p)._x=Math.atan2(-ta,L),(this||p)._z=Math.atan2(-S,t)):((this||p)._x=Math.atan2(db,ja),(this||p)._z=0);break;case "YXZ":(this||p)._x=Math.asin(-G(ta,
-1,1));.9999999>Math.abs(ta)?((this||p)._y=Math.atan2(V,L),(this||p)._z=Math.atan2(Z,ja)):((this||p)._y=Math.atan2(-Ha,t),(this||p)._z=0);break;case "ZXY":(this||p)._x=Math.asin(G(db,-1,1));.9999999>Math.abs(db)?((this||p)._y=Math.atan2(-Ha,L),(this||p)._z=Math.atan2(-S,ja)):((this||p)._y=0,(this||p)._z=Math.atan2(Z,t));break;case "ZYX":(this||p)._y=Math.asin(-G(Ha,-1,1));.9999999>Math.abs(Ha)?((this||p)._x=Math.atan2(db,L),(this||p)._z=Math.atan2(Z,t)):((this||p)._x=0,(this||p)._z=Math.atan2(-S,
ja));break;case "YZX":(this||p)._z=Math.asin(G(Z,-1,1));.9999999>Math.abs(Z)?((this||p)._x=Math.atan2(-ta,ja),(this||p)._y=Math.atan2(-Ha,t)):((this||p)._x=0,(this||p)._y=Math.atan2(V,L));break;case "XZY":(this||p)._z=Math.asin(-G(S,-1,1));.9999999>Math.abs(S)?((this||p)._x=Math.atan2(db,ja),(this||p)._y=Math.atan2(V,t)):((this||p)._x=Math.atan2(-ta,L),(this||p)._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+x)}(this||p)._order=x;!1!==C&&this._onChangeCallback();
return this||p};z.setFromQuaternion=function(t,x,C){A$.makeRotationFromQuaternion(t);return this.setFromRotationMatrix(A$,x,C)};z.setFromVector3=function(t,x){return this.set(t.x,t.y,t.z,x||(this||p)._order)};z.reorder=function(t){B$.setFromEuler(this||p);return this.setFromQuaternion(B$,t)};z.equals=function(t){return t._x===(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._order===(this||p)._order};z.fromArray=function(t){(this||p)._x=t[0];(this||p)._y=t[1];(this||p)._z=t[2];void 0!==t[3]&&
((this||p)._order=t[3]);this._onChangeCallback();return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p)._x;t[x+1]=(this||p)._y;t[x+2]=(this||p)._z;t[x+3]=(this||p)._order;return t};z.toVector3=function(t){return t?t.set((this||p)._x,(this||p)._y,(this||p)._z):new nc((this||p)._x,(this||p)._y,(this||p)._z)};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},set:function(t){(this||
p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||p)._z=t;this._onChangeCallback()}},{key:"order",get:function(){return(this||p)._order},set:function(t){(this||p)._order=t;this._onChangeCallback()}}]);return u}();QN.DefaultOrder="XYZ";QN.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");var A$=new fj,B$=new mp,VV=function(){function u(){(this||
p).mask=1}var z=u.prototype;z.set=function(t){(this||p).mask=1<<t|0};z.enable=function(t){(this||p).mask=(this||p).mask|1<<t|0};z.enableAll=function(){(this||p).mask=-1};z.toggle=function(t){(this||p).mask^=1<<t|0};z.disable=function(t){(this||p).mask&=~(1<<t|0)};z.disableAll=function(){(this||p).mask=0};z.test=function(t){return 0!==((this||p).mask&t.mask)};return u}(),dra=0,C$=new nc,FE=new mp,kx=new fj,HO=new nc,rI=new nc,yra=new nc,zra=new mp,D$=new nc(1,0,0),E$=new nc(0,1,0),F$=new nc(0,0,1),
Ara={type:"added"},G$={type:"removed"};E.DefaultUp=new nc(0,1,0);E.DefaultMatrixAutoUpdate=!0;E.prototype=Object.assign(Object.create(e.prototype),{constructor:E,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();(this||p).matrix.premultiply(u);(this||p).matrix.decompose((this||p).position,(this||p).quaternion,(this||p).scale)},applyQuaternion:function(u){(this||p).quaternion.premultiply(u);return this||p},
setRotationFromAxisAngle:function(u,z){(this||p).quaternion.setFromAxisAngle(u,z)},setRotationFromEuler:function(u){(this||p).quaternion.setFromEuler(u,!0)},setRotationFromMatrix:function(u){(this||p).quaternion.setFromRotationMatrix(u)},setRotationFromQuaternion:function(u){(this||p).quaternion.copy(u)},rotateOnAxis:function(u,z){FE.setFromAxisAngle(u,z);(this||p).quaternion.multiply(FE);return this||p},rotateOnWorldAxis:function(u,z){FE.setFromAxisAngle(u,z);(this||p).quaternion.premultiply(FE);
return this||p},rotateX:function(u){return this.rotateOnAxis(D$,u)},rotateY:function(u){return this.rotateOnAxis(E$,u)},rotateZ:function(u){return this.rotateOnAxis(F$,u)},translateOnAxis:function(u,z){C$.copy(u).applyQuaternion((this||p).quaternion);(this||p).position.add(C$.multiplyScalar(z));return this||p},translateX:function(u){return this.translateOnAxis(D$,u)},translateY:function(u){return this.translateOnAxis(E$,u)},translateZ:function(u){return this.translateOnAxis(F$,u)},localToWorld:function(u){return u.applyMatrix4((this||
p).matrixWorld)},worldToLocal:function(u){return u.applyMatrix4(kx.getInverse((this||p).matrixWorld))},lookAt:function(u,z,t){u.isVector3?HO.copy(u):HO.set(u,z,t);u=(this||p).parent;this.updateWorldMatrix(!0,!1);rI.setFromMatrixPosition((this||p).matrixWorld);(this||p).isCamera||(this||p).isLight?kx.lookAt(rI,HO,(this||p).up):kx.lookAt(HO,rI,(this||p).up);(this||p).quaternion.setFromRotationMatrix(kx);u&&(kx.extractRotation(u.matrixWorld),FE.setFromRotationMatrix(kx),(this||p).quaternion.premultiply(FE.inverse()))},
add:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.add(arguments[z]);return this||p}if(u===(this||p))return console.error("THREE.Object3D.add: object can't be added as a child of itself.",u),this||p;u&&u.isObject3D?(null!==u.parent&&u.parent.remove(u),u.parent=this||p,(this||p).children.push(u),u.dispatchEvent(Ara)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",u);return this||p},remove:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.remove(arguments[z]);
return this||p}z=(this||p).children.indexOf(u);-1!==z&&(u.parent=null,(this||p).children.splice(z,1),u.dispatchEvent(G$));return this||p},clear:function(){for(var u=0;u<(this||p).children.length;u++){var z=(this||p).children[u];z.parent=null;z.dispatchEvent(G$)}(this||p).children.length=0;return this||p},attach:function(u){this.updateWorldMatrix(!0,!1);kx.getInverse((this||p).matrixWorld);null!==u.parent&&(u.parent.updateWorldMatrix(!0,!1),kx.multiply(u.parent.matrixWorld));u.applyMatrix4(kx);u.updateWorldMatrix(!1,
!1);this.add(u);return this||p},getObjectById:function(u){return this.getObjectByProperty("id",u)},getObjectByName:function(u){return this.getObjectByProperty("name",u)},getObjectByProperty:function(u,z){if((this||p)[u]===z)return this||p;for(var t=0,x=(this||p).children.length;t<x;t++){var C=(this||p).children[t].getObjectByProperty(u,z);if(void 0!==C)return C}},getWorldPosition:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),u=new nc);this.updateWorldMatrix(!0,
!1);return u.setFromMatrixPosition((this||p).matrixWorld)},getWorldQuaternion:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),u=new mp);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(rI,u,yra);return u},getWorldScale:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),u=new nc);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(rI,zra,u);return u},getWorldDirection:function(u){void 0===
u&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),u=new nc);this.updateWorldMatrix(!0,!1);var z=(this||p).matrixWorld.elements;return u.set(z[8],z[9],z[10]).normalize()},raycast:function(){},traverse:function(u){u(this||p);for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].traverse(u)},traverseVisible:function(u){if(!1!==(this||p).visible){u(this||p);for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].traverseVisible(u)}},traverseAncestors:function(u){var z=
(this||p).parent;null!==z&&(u(z),z.traverseAncestors(u))},updateMatrix:function(){(this||p).matrix.compose((this||p).position,(this||p).quaternion,(this||p).scale);(this||p).matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();if((this||p).matrixWorldNeedsUpdate||u)null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix),(this||p).matrixWorldNeedsUpdate=
!1,u=!0;for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].updateMatrixWorld(u)},updateWorldMatrix:function(u,z){var t=(this||p).parent;!0===u&&null!==t&&t.updateWorldMatrix(!0,!1);(this||p).matrixAutoUpdate&&this.updateMatrix();null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix);if(!0===z)for(u=(this||p).children,z=0,t=u.length;z<t;z++)u[z].updateWorldMatrix(!1,!0)},toJSON:function(u){function z(ja,
ta){void 0===ja[ta.uuid]&&(ja[ta.uuid]=ta.toJSON(u));return ta.uuid}function t(ja){var ta=[],Ha;for(Ha in ja){var db=ja[Ha];delete db.metadata;ta.push(db)}return ta}var x=void 0===u||"string"===typeof u,C={};x&&(u={geometries:{},materials:{},textures:{},images:{},shapes:{}},C.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var G={};G.uuid=(this||p).uuid;G.type=(this||p).type;""!==(this||p).name&&(G.name=(this||p).name);!0===(this||p).castShadow&&(G.castShadow=!0);!0===(this||p).receiveShadow&&
(G.receiveShadow=!0);!1===(this||p).visible&&(G.visible=!1);!1===(this||p).frustumCulled&&(G.frustumCulled=!1);0!==(this||p).renderOrder&&(G.renderOrder=(this||p).renderOrder);"{}"!==JSON.stringify((this||p).userData)&&(G.userData=(this||p).userData);G.layers=(this||p).layers.mask;G.matrix=(this||p).matrix.toArray();!1===(this||p).matrixAutoUpdate&&(G.matrixAutoUpdate=!1);(this||p).isInstancedMesh&&(G.type="InstancedMesh",G.count=(this||p).count,G.instanceMatrix=(this||p).instanceMatrix.toJSON());
if((this||p).isMesh||(this||p).isLine||(this||p).isPoints){G.geometry=z(u.geometries,(this||p).geometry);var L=(this||p).geometry.parameters;if(void 0!==L&&void 0!==L.shapes)if(L=L.shapes,Array.isArray(L))for(var S=0,V=L.length;S<V;S++)z(u.shapes,L[S]);else z(u.shapes,L)}if(void 0!==(this||p).material)if(Array.isArray((this||p).material)){L=[];S=0;for(V=(this||p).material.length;S<V;S++)L.push(z(u.materials,(this||p).material[S]));G.material=L}else G.material=z(u.materials,(this||p).material);if(0<
(this||p).children.length)for(G.children=[],L=0;L<(this||p).children.length;L++)G.children.push((this||p).children[L].toJSON(u).object);if(x){x=t(u.geometries);L=t(u.materials);S=t(u.textures);V=t(u.images);var Z=t(u.shapes);0<x.length&&(C.geometries=x);0<L.length&&(C.materials=L);0<S.length&&(C.textures=S);0<V.length&&(C.images=V);0<Z.length&&(C.shapes=Z)}C.object=G;return C},clone:function(u){return(new (this||p).constructor).copy(this||p,u)},copy:function(u,z){void 0===z&&(z=!0);(this||p).name=
u.name;(this||p).up.copy(u.up);(this||p).position.copy(u.position);(this||p).rotation.order=u.rotation.order;(this||p).quaternion.copy(u.quaternion);(this||p).scale.copy(u.scale);(this||p).matrix.copy(u.matrix);(this||p).matrixWorld.copy(u.matrixWorld);(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=u.matrixWorldNeedsUpdate;(this||p).layers.mask=u.layers.mask;(this||p).visible=u.visible;(this||p).castShadow=u.castShadow;(this||p).receiveShadow=u.receiveShadow;(this||
p).frustumCulled=u.frustumCulled;(this||p).renderOrder=u.renderOrder;(this||p).userData=JSON.parse(JSON.stringify(u.userData));if(!0===z)for(z=0;z<u.children.length;z++)this.add(u.children[z].clone());return this||p}});var LW=new nc,Bra=new nc,Cra=new Up,Mv=function(){function u(t,x){Object.defineProperty(this||p,"isPlane",{value:!0});(this||p).normal=void 0!==t?t:new nc(1,0,0);(this||p).constant=void 0!==x?x:0}var z=u.prototype;z.set=function(t,x){(this||p).normal.copy(t);(this||p).constant=x;return this||
p};z.setComponents=function(t,x,C,G){(this||p).normal.set(t,x,C);(this||p).constant=G;return this||p};z.setFromNormalAndCoplanarPoint=function(t,x){(this||p).normal.copy(t);(this||p).constant=-x.dot((this||p).normal);return this||p};z.setFromCoplanarPoints=function(t,x,C){x=LW.subVectors(C,x).cross(Bra.subVectors(t,x)).normalize();this.setFromNormalAndCoplanarPoint(x,t);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).normal.copy(t.normal);
(this||p).constant=t.constant;return this||p};z.normalize=function(){var t=1/(this||p).normal.length();(this||p).normal.multiplyScalar(t);(this||p).constant*=t;return this||p};z.negate=function(){(this||p).constant*=-1;(this||p).normal.negate();return this||p};z.distanceToPoint=function(t){return(this||p).normal.dot(t)+(this||p).constant};z.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius};z.projectPoint=function(t,x){void 0===x&&(console.warn("THREE.Plane: .projectPoint() target is now required"),
x=new nc);return x.copy((this||p).normal).multiplyScalar(-this.distanceToPoint(t)).add(t)};z.intersectLine=function(t,x){void 0===x&&(console.warn("THREE.Plane: .intersectLine() target is now required"),x=new nc);var C=t.delta(LW),G=(this||p).normal.dot(C);if(0===G){if(0===this.distanceToPoint(t.start))return x.copy(t.start)}else if(G=-(t.start.dot((this||p).normal)+(this||p).constant)/G,!(0>G||1<G))return x.copy(C).multiplyScalar(G).add(t.start)};z.intersectsLine=function(t){var x=this.distanceToPoint(t.start);
t=this.distanceToPoint(t.end);return 0>x&&0<t||0>t&&0<x};z.intersectsBox=function(t){return t.intersectsPlane(this||p)};z.intersectsSphere=function(t){return t.intersectsPlane(this||p)};z.coplanarPoint=function(t){void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new nc);return t.copy((this||p).normal).multiplyScalar(-(this||p).constant)};z.applyMatrix4=function(t,x){x=x||Cra.getNormalMatrix(t);t=this.coplanarPoint(LW).applyMatrix4(t);x=(this||p).normal.applyMatrix3(x).normalize();
(this||p).constant=-t.dot(x);return this||p};z.translate=function(t){(this||p).constant-=t.dot((this||p).normal);return this||p};z.equals=function(t){return t.normal.equals((this||p).normal)&&t.constant===(this||p).constant};return u}(),ju=new nc,lx=new nc,MW=new nc,mx=new nc,GE=new nc,HE=new nc,H$=new nc,NW=new nc,OW=new nc,PW=new nc,au=function(){function u(t,x,C){(this||p).a=void 0!==t?t:new nc;(this||p).b=void 0!==x?x:new nc;(this||p).c=void 0!==C?C:new nc}u.getNormal=function(t,x,C,G){void 0===
G&&(console.warn("THREE.Triangle: .getNormal() target is now required"),G=new nc);G.subVectors(C,x);ju.subVectors(t,x);G.cross(ju);t=G.lengthSq();return 0<t?G.multiplyScalar(1/Math.sqrt(t)):G.set(0,0,0)};u.getBarycoord=function(t,x,C,G,L){ju.subVectors(G,x);lx.subVectors(C,x);MW.subVectors(t,x);t=ju.dot(ju);x=ju.dot(lx);C=ju.dot(MW);var S=lx.dot(lx);G=lx.dot(MW);var V=t*S-x*x;void 0===L&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),L=new nc);if(0===V)return L.set(-2,-1,
-1);V=1/V;S=(S*C-x*G)*V;t=(t*G-x*C)*V;return L.set(1-S-t,t,S)};u.containsPoint=function(t,x,C,G){this.getBarycoord(t,x,C,G,mx);return 0<=mx.x&&0<=mx.y&&1>=mx.x+mx.y};u.getUV=function(t,x,C,G,L,S,V,Z){this.getBarycoord(t,x,C,G,mx);Z.set(0,0);Z.addScaledVector(L,mx.x);Z.addScaledVector(S,mx.y);Z.addScaledVector(V,mx.z);return Z};u.isFrontFacing=function(t,x,C,G){ju.subVectors(C,x);lx.subVectors(t,x);return 0>ju.cross(lx).dot(G)?!0:!1};var z=u.prototype;z.set=function(t,x,C){(this||p).a.copy(t);(this||
p).b.copy(x);(this||p).c.copy(C);return this||p};z.setFromPointsAndIndices=function(t,x,C,G){(this||p).a.copy(t[x]);(this||p).b.copy(t[C]);(this||p).c.copy(t[G]);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).a.copy(t.a);(this||p).b.copy(t.b);(this||p).c.copy(t.c);return this||p};z.getArea=function(){ju.subVectors((this||p).c,(this||p).b);lx.subVectors((this||p).a,(this||p).b);return.5*ju.cross(lx).length()};z.getMidpoint=function(t){void 0===
t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new nc);return t.addVectors((this||p).a,(this||p).b).add((this||p).c).multiplyScalar(1/3)};z.getNormal=function(t){return u.getNormal((this||p).a,(this||p).b,(this||p).c,t)};z.getPlane=function(t){void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Mv);return t.setFromCoplanarPoints((this||p).a,(this||p).b,(this||p).c)};z.getBarycoord=function(t,x){return u.getBarycoord(t,(this||p).a,(this||
p).b,(this||p).c,x)};z.getUV=function(t,x,C,G,L){return u.getUV(t,(this||p).a,(this||p).b,(this||p).c,x,C,G,L)};z.containsPoint=function(t){return u.containsPoint(t,(this||p).a,(this||p).b,(this||p).c)};z.isFrontFacing=function(t){return u.isFrontFacing((this||p).a,(this||p).b,(this||p).c,t)};z.intersectsBox=function(t){return t.intersectsTriangle(this||p)};z.closestPointToPoint=function(t,x){void 0===x&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),x=new nc);var C=
(this||p).a,G=(this||p).b,L=(this||p).c;GE.subVectors(G,C);HE.subVectors(L,C);NW.subVectors(t,C);var S=GE.dot(NW),V=HE.dot(NW);if(0>=S&&0>=V)return x.copy(C);OW.subVectors(t,G);var Z=GE.dot(OW),ja=HE.dot(OW);if(0<=Z&&ja<=Z)return x.copy(G);var ta=S*ja-Z*V;if(0>=ta&&0<=S&&0>=Z)return G=S/(S-Z),x.copy(C).addScaledVector(GE,G);PW.subVectors(t,L);t=GE.dot(PW);var Ha=HE.dot(PW);if(0<=Ha&&t<=Ha)return x.copy(L);S=t*V-S*Ha;if(0>=S&&0<=V&&0>=Ha)return ta=V/(V-Ha),x.copy(C).addScaledVector(HE,ta);V=Z*Ha-t*
ja;if(0>=V&&0<=ja-Z&&0<=t-Ha)return H$.subVectors(L,G),ta=(ja-Z)/(ja-Z+(t-Ha)),x.copy(G).addScaledVector(H$,ta);L=1/(V+S+ta);G=S*L;ta*=L;return x.copy(C).addScaledVector(GE,G).addScaledVector(HE,ta)};z.equals=function(t){return t.a.equals((this||p).a)&&t.b.equals((this||p).b)&&t.c.equals((this||p).c)};return u}(),I$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,
burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,
lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kq={h:0,s:0,l:0},IO={h:0,s:0,
l:0},rg=function(){function u(t,x,C){Object.defineProperty(this||p,"isColor",{value:!0});return void 0===x&&void 0===C?this.set(t):this.setRGB(t,x,C)}var z=u.prototype;z.set=function(t){t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t);return this||p};z.setScalar=function(t){(this||p).r=t;(this||p).g=t;(this||p).b=t;return this||p};z.setHex=function(t){t=Math.floor(t);(this||p).r=(t>>16&255)/255;(this||p).g=(t>>8&255)/255;(this||p).b=(t&255)/255;return this||
p};z.setRGB=function(t,x,C){(this||p).r=t;(this||p).g=x;(this||p).b=C;return this||p};z.setHSL=function(t,x,C){t=Xh.euclideanModulo(t,1);x=Xh.clamp(x,0,1);C=Xh.clamp(C,0,1);0===x?(this||p).r=(this||p).g=(this||p).b=C:(x=.5>=C?C*(1+x):C+x-C*x,C=2*C-x,(this||p).r=F(C,x,t+1/3),(this||p).g=F(C,x,t),(this||p).b=F(C,x,t-1/3));return this||p};z.setStyle=function(t){function x(V){void 0!==V&&1>parseFloat(V)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var C;if(C=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var G=
C[2];switch(C[1]){case "rgb":case "rgba":if(C=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G))return(this||p).r=Math.min(255,parseInt(C[1],10))/255,(this||p).g=Math.min(255,parseInt(C[2],10))/255,(this||p).b=Math.min(255,parseInt(C[3],10))/255,x(C[5]),this||p;if(C=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G))return(this||p).r=Math.min(100,parseInt(C[1],10))/100,(this||p).g=Math.min(100,parseInt(C[2],10))/100,(this||p).b=Math.min(100,parseInt(C[3],
10))/100,x(C[5]),this||p;break;case "hsl":case "hsla":if(C=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G)){G=parseFloat(C[1])/360;var L=parseInt(C[2],10)/100,S=parseInt(C[3],10)/100;x(C[5]);return this.setHSL(G,L,S)}}}else if(C=/^#([A-Fa-f0-9]+)$/.exec(t)){C=C[1];G=C.length;if(3===G)return(this||p).r=parseInt(C.charAt(0)+C.charAt(0),16)/255,(this||p).g=parseInt(C.charAt(1)+C.charAt(1),16)/255,(this||p).b=parseInt(C.charAt(2)+C.charAt(2),16)/255,this||p;if(6===
G)return(this||p).r=parseInt(C.charAt(0)+C.charAt(1),16)/255,(this||p).g=parseInt(C.charAt(2)+C.charAt(3),16)/255,(this||p).b=parseInt(C.charAt(4)+C.charAt(5),16)/255,this||p}return t&&0<t.length?this.setColorName(t):this||p};z.setColorName=function(t){var x=I$[t];void 0!==x?this.setHex(x):console.warn("THREE.Color: Unknown color "+t);return this||p};z.clone=function(){return new (this||p).constructor((this||p).r,(this||p).g,(this||p).b)};z.copy=function(t){(this||p).r=t.r;(this||p).g=t.g;(this||
p).b=t.b;return this||p};z.copyGammaToLinear=function(t,x){void 0===x&&(x=2);(this||p).r=Math.pow(t.r,x);(this||p).g=Math.pow(t.g,x);(this||p).b=Math.pow(t.b,x);return this||p};z.copyLinearToGamma=function(t,x){void 0===x&&(x=2);x=0<x?1/x:1;(this||p).r=Math.pow(t.r,x);(this||p).g=Math.pow(t.g,x);(this||p).b=Math.pow(t.b,x);return this||p};z.convertGammaToLinear=function(t){this.copyGammaToLinear(this||p,t);return this||p};z.convertLinearToGamma=function(t){this.copyLinearToGamma(this||p,t);return this||
p};z.copySRGBToLinear=function(t){(this||p).r=H(t.r);(this||p).g=H(t.g);(this||p).b=H(t.b);return this||p};z.copyLinearToSRGB=function(t){(this||p).r=I(t.r);(this||p).g=I(t.g);(this||p).b=I(t.b);return this||p};z.convertSRGBToLinear=function(){this.copySRGBToLinear(this||p);return this||p};z.convertLinearToSRGB=function(){this.copyLinearToSRGB(this||p);return this||p};z.getHex=function(){return 255*(this||p).r<<16^255*(this||p).g<<8^255*(this||p).b<<0};z.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};
z.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var x=(this||p).r,C=(this||p).g,G=(this||p).b,L=Math.max(x,C,G),S=Math.min(x,C,G),V,Z=(S+L)/2;if(S===L)S=V=0;else{var ja=L-S;S=.5>=Z?ja/(L+S):ja/(2-L-S);switch(L){case x:V=(C-G)/ja+(C<G?6:0);break;case C:V=(G-x)/ja+2;break;case G:V=(x-C)/ja+4}V/=6}t.h=V;t.s=S;t.l=Z;return t};z.getStyle=function(){return"rgb("+(255*(this||p).r|0)+","+(255*(this||p).g|0)+","+(255*(this||p).b|0)+")"};z.offsetHSL=
function(t,x,C){this.getHSL(Kq);Kq.h+=t;Kq.s+=x;Kq.l+=C;this.setHSL(Kq.h,Kq.s,Kq.l);return this||p};z.add=function(t){(this||p).r+=t.r;(this||p).g+=t.g;(this||p).b+=t.b;return this||p};z.addColors=function(t,x){(this||p).r=t.r+x.r;(this||p).g=t.g+x.g;(this||p).b=t.b+x.b;return this||p};z.addScalar=function(t){(this||p).r+=t;(this||p).g+=t;(this||p).b+=t;return this||p};z.sub=function(t){(this||p).r=Math.max(0,(this||p).r-t.r);(this||p).g=Math.max(0,(this||p).g-t.g);(this||p).b=Math.max(0,(this||p).b-
t.b);return this||p};z.multiply=function(t){(this||p).r*=t.r;(this||p).g*=t.g;(this||p).b*=t.b;return this||p};z.multiplyScalar=function(t){(this||p).r*=t;(this||p).g*=t;(this||p).b*=t;return this||p};z.lerp=function(t,x){(this||p).r+=(t.r-(this||p).r)*x;(this||p).g+=(t.g-(this||p).g)*x;(this||p).b+=(t.b-(this||p).b)*x;return this||p};z.lerpHSL=function(t,x){this.getHSL(Kq);t.getHSL(IO);t=Xh.lerp(Kq.h,IO.h,x);var C=Xh.lerp(Kq.s,IO.s,x);x=Xh.lerp(Kq.l,IO.l,x);this.setHSL(t,C,x);return this||p};z.equals=
function(t){return t.r===(this||p).r&&t.g===(this||p).g&&t.b===(this||p).b};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).r=t[x];(this||p).g=t[x+1];(this||p).b=t[x+2];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).r;t[x+1]=(this||p).g;t[x+2]=(this||p).b;return t};z.fromBufferAttribute=function(t,x){(this||p).r=t.getX(x);(this||p).g=t.getY(x);(this||p).b=t.getZ(x);!0===t.normalized&&((this||p).r/=255,(this||p).g/=255,(this||p).b/=255);return this||
p};z.toJSON=function(){return this.getHex()};return u}();rg.NAMES=I$;rg.prototype.r=1;rg.prototype.g=1;rg.prototype.b=1;var UH=function(){function u(t,x,C,G,L,S){(this||p).a=t;(this||p).b=x;(this||p).c=C;(this||p).normal=G&&G.isVector3?G:new nc;(this||p).vertexNormals=Array.isArray(G)?G:[];(this||p).color=L&&L.isColor?L:new rg;(this||p).vertexColors=Array.isArray(L)?L:[];(this||p).materialIndex=void 0!==S?S:0}var z=u.prototype;z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=
function(t){(this||p).a=t.a;(this||p).b=t.b;(this||p).c=t.c;(this||p).normal.copy(t.normal);(this||p).color.copy(t.color);(this||p).materialIndex=t.materialIndex;for(var x=0,C=t.vertexNormals.length;x<C;x++)(this||p).vertexNormals[x]=t.vertexNormals[x].clone();x=0;for(C=t.vertexColors.length;x<C;x++)(this||p).vertexColors[x]=t.vertexColors[x].clone();return this||p};return u}(),era=0;M.prototype=Object.assign(Object.create(e.prototype),{constructor:M,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return(this||
p).onBeforeCompile.toString()},setValues:function(u){if(void 0!==u)for(var z in u){var t=u[z];if(void 0===t)console.warn("THREE.Material: '"+z+"' parameter is undefined.");else if("shading"===z)console.warn("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead."),(this||p).flatShading=1===t?!0:!1;else{var x=(this||p)[z];void 0===x?console.warn("THREE."+(this||p).type+": '"+z+"' is not a property of this material."):x&&x.isColor?x.set(t):x&&x.isVector3&&t&&t.isVector3?
x.copy(t):(this||p)[z]=t}}},toJSON:function(u){function z(C){var G=[],L;for(L in C){var S=C[L];delete S.metadata;G.push(S)}return G}var t=void 0===u||"string"===typeof u;t&&(u={textures:{},images:{}});var x={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};x.uuid=(this||p).uuid;x.type=(this||p).type;""!==(this||p).name&&(x.name=(this||p).name);(this||p).color&&(this||p).color.isColor&&(x.color=(this||p).color.getHex());void 0!==(this||p).roughness&&(x.roughness=(this||p).roughness);
void 0!==(this||p).metalness&&(x.metalness=(this||p).metalness);(this||p).sheen&&(this||p).sheen.isColor&&(x.sheen=(this||p).sheen.getHex());(this||p).emissive&&(this||p).emissive.isColor&&(x.emissive=(this||p).emissive.getHex());(this||p).emissiveIntensity&&1!==(this||p).emissiveIntensity&&(x.emissiveIntensity=(this||p).emissiveIntensity);(this||p).specular&&(this||p).specular.isColor&&(x.specular=(this||p).specular.getHex());void 0!==(this||p).shininess&&(x.shininess=(this||p).shininess);void 0!==
(this||p).clearcoat&&(x.clearcoat=(this||p).clearcoat);void 0!==(this||p).clearcoatRoughness&&(x.clearcoatRoughness=(this||p).clearcoatRoughness);(this||p).clearcoatMap&&(this||p).clearcoatMap.isTexture&&(x.clearcoatMap=(this||p).clearcoatMap.toJSON(u).uuid);(this||p).clearcoatRoughnessMap&&(this||p).clearcoatRoughnessMap.isTexture&&(x.clearcoatRoughnessMap=(this||p).clearcoatRoughnessMap.toJSON(u).uuid);(this||p).clearcoatNormalMap&&(this||p).clearcoatNormalMap.isTexture&&(x.clearcoatNormalMap=(this||
p).clearcoatNormalMap.toJSON(u).uuid,x.clearcoatNormalScale=(this||p).clearcoatNormalScale.toArray());(this||p).map&&(this||p).map.isTexture&&(x.map=(this||p).map.toJSON(u).uuid);(this||p).matcap&&(this||p).matcap.isTexture&&(x.matcap=(this||p).matcap.toJSON(u).uuid);(this||p).alphaMap&&(this||p).alphaMap.isTexture&&(x.alphaMap=(this||p).alphaMap.toJSON(u).uuid);(this||p).lightMap&&(this||p).lightMap.isTexture&&(x.lightMap=(this||p).lightMap.toJSON(u).uuid);(this||p).aoMap&&(this||p).aoMap.isTexture&&
(x.aoMap=(this||p).aoMap.toJSON(u).uuid,x.aoMapIntensity=(this||p).aoMapIntensity);(this||p).bumpMap&&(this||p).bumpMap.isTexture&&(x.bumpMap=(this||p).bumpMap.toJSON(u).uuid,x.bumpScale=(this||p).bumpScale);(this||p).normalMap&&(this||p).normalMap.isTexture&&(x.normalMap=(this||p).normalMap.toJSON(u).uuid,x.normalMapType=(this||p).normalMapType,x.normalScale=(this||p).normalScale.toArray());(this||p).displacementMap&&(this||p).displacementMap.isTexture&&(x.displacementMap=(this||p).displacementMap.toJSON(u).uuid,
x.displacementScale=(this||p).displacementScale,x.displacementBias=(this||p).displacementBias);(this||p).roughnessMap&&(this||p).roughnessMap.isTexture&&(x.roughnessMap=(this||p).roughnessMap.toJSON(u).uuid);(this||p).metalnessMap&&(this||p).metalnessMap.isTexture&&(x.metalnessMap=(this||p).metalnessMap.toJSON(u).uuid);(this||p).emissiveMap&&(this||p).emissiveMap.isTexture&&(x.emissiveMap=(this||p).emissiveMap.toJSON(u).uuid);(this||p).specularMap&&(this||p).specularMap.isTexture&&(x.specularMap=
(this||p).specularMap.toJSON(u).uuid);(this||p).envMap&&(this||p).envMap.isTexture&&(x.envMap=(this||p).envMap.toJSON(u).uuid,x.reflectivity=(this||p).reflectivity,x.refractionRatio=(this||p).refractionRatio,void 0!==(this||p).combine&&(x.combine=(this||p).combine),void 0!==(this||p).envMapIntensity&&(x.envMapIntensity=(this||p).envMapIntensity));(this||p).gradientMap&&(this||p).gradientMap.isTexture&&(x.gradientMap=(this||p).gradientMap.toJSON(u).uuid);void 0!==(this||p).size&&(x.size=(this||p).size);
void 0!==(this||p).sizeAttenuation&&(x.sizeAttenuation=(this||p).sizeAttenuation);1!==(this||p).blending&&(x.blending=(this||p).blending);!0===(this||p).flatShading&&(x.flatShading=(this||p).flatShading);0!==(this||p).side&&(x.side=(this||p).side);(this||p).vertexColors&&(x.vertexColors=!0);1>(this||p).opacity&&(x.opacity=(this||p).opacity);!0===(this||p).transparent&&(x.transparent=(this||p).transparent);x.depthFunc=(this||p).depthFunc;x.depthTest=(this||p).depthTest;x.depthWrite=(this||p).depthWrite;
x.stencilWrite=(this||p).stencilWrite;x.stencilWriteMask=(this||p).stencilWriteMask;x.stencilFunc=(this||p).stencilFunc;x.stencilRef=(this||p).stencilRef;x.stencilFuncMask=(this||p).stencilFuncMask;x.stencilFail=(this||p).stencilFail;x.stencilZFail=(this||p).stencilZFail;x.stencilZPass=(this||p).stencilZPass;(this||p).rotation&&0!==(this||p).rotation&&(x.rotation=(this||p).rotation);!0===(this||p).polygonOffset&&(x.polygonOffset=!0);0!==(this||p).polygonOffsetFactor&&(x.polygonOffsetFactor=(this||
p).polygonOffsetFactor);0!==(this||p).polygonOffsetUnits&&(x.polygonOffsetUnits=(this||p).polygonOffsetUnits);(this||p).linewidth&&1!==(this||p).linewidth&&(x.linewidth=(this||p).linewidth);void 0!==(this||p).dashSize&&(x.dashSize=(this||p).dashSize);void 0!==(this||p).gapSize&&(x.gapSize=(this||p).gapSize);void 0!==(this||p).scale&&(x.scale=(this||p).scale);!0===(this||p).dithering&&(x.dithering=!0);0<(this||p).alphaTest&&(x.alphaTest=(this||p).alphaTest);!0===(this||p).premultipliedAlpha&&(x.premultipliedAlpha=
(this||p).premultipliedAlpha);!0===(this||p).wireframe&&(x.wireframe=(this||p).wireframe);1<(this||p).wireframeLinewidth&&(x.wireframeLinewidth=(this||p).wireframeLinewidth);"round"!==(this||p).wireframeLinecap&&(x.wireframeLinecap=(this||p).wireframeLinecap);"round"!==(this||p).wireframeLinejoin&&(x.wireframeLinejoin=(this||p).wireframeLinejoin);!0===(this||p).morphTargets&&(x.morphTargets=!0);!0===(this||p).morphNormals&&(x.morphNormals=!0);!0===(this||p).skinning&&(x.skinning=!0);!1===(this||p).visible&&
(x.visible=!1);!1===(this||p).toneMapped&&(x.toneMapped=!1);"{}"!==JSON.stringify((this||p).userData)&&(x.userData=(this||p).userData);t&&(t=z(u.textures),u=z(u.images),0<t.length&&(x.textures=t),0<u.length&&(x.images=u));return x},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).fog=u.fog;(this||p).blending=u.blending;(this||p).side=u.side;(this||p).flatShading=u.flatShading;(this||p).vertexColors=u.vertexColors;(this||p).opacity=
u.opacity;(this||p).transparent=u.transparent;(this||p).blendSrc=u.blendSrc;(this||p).blendDst=u.blendDst;(this||p).blendEquation=u.blendEquation;(this||p).blendSrcAlpha=u.blendSrcAlpha;(this||p).blendDstAlpha=u.blendDstAlpha;(this||p).blendEquationAlpha=u.blendEquationAlpha;(this||p).depthFunc=u.depthFunc;(this||p).depthTest=u.depthTest;(this||p).depthWrite=u.depthWrite;(this||p).stencilWriteMask=u.stencilWriteMask;(this||p).stencilFunc=u.stencilFunc;(this||p).stencilRef=u.stencilRef;(this||p).stencilFuncMask=
u.stencilFuncMask;(this||p).stencilFail=u.stencilFail;(this||p).stencilZFail=u.stencilZFail;(this||p).stencilZPass=u.stencilZPass;(this||p).stencilWrite=u.stencilWrite;var z=u.clippingPlanes,t=null;if(null!==z){var x=z.length;t=Array(x);for(var C=0;C!==x;++C)t[C]=z[C].clone()}(this||p).clippingPlanes=t;(this||p).clipIntersection=u.clipIntersection;(this||p).clipShadows=u.clipShadows;(this||p).shadowSide=u.shadowSide;(this||p).colorWrite=u.colorWrite;(this||p).precision=u.precision;(this||p).polygonOffset=
u.polygonOffset;(this||p).polygonOffsetFactor=u.polygonOffsetFactor;(this||p).polygonOffsetUnits=u.polygonOffsetUnits;(this||p).dithering=u.dithering;(this||p).alphaTest=u.alphaTest;(this||p).premultipliedAlpha=u.premultipliedAlpha;(this||p).visible=u.visible;(this||p).toneMapped=u.toneMapped;(this||p).userData=JSON.parse(JSON.stringify(u.userData));return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(M.prototype,"needsUpdate",{set:function(u){!0===u&&(this||
p).version++}});N.prototype=Object.create(M.prototype);N.prototype.constructor=N;N.prototype.isMeshBasicMaterial=!0;N.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=
u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;return this||p};var ql=new nc,JO=new Xe;Object.defineProperty(X.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(X.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},
setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).name=u.name;(this||p).array=new u.array.constructor(u.array);(this||p).itemSize=u.itemSize;(this||p).count=u.count;(this||p).normalized=u.normalized;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||p).itemSize;t*=z.itemSize;for(var x=0,C=(this||p).itemSize;x<C;x++)(this||p).array[u+x]=z.array[t+x];return this||p},copyArray:function(u){(this||p).array.set(u);return this||p},copyColorsArray:function(u){for(var z=
(this||p).array,t=0,x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",x),G=new rg);z[t++]=G.r;z[t++]=G.g;z[t++]=G.b}return this||p},copyVector2sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",x),G=new Xe);z[t++]=G.x;z[t++]=G.y}return this||p},copyVector3sArray:function(u){for(var z=(this||p).array,t=0,
x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",x),G=new nc);z[t++]=G.x;z[t++]=G.y;z[t++]=G.z}return this||p},copyVector4sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",x),G=new Rk);z[t++]=G.x;z[t++]=G.y;z[t++]=G.z;z[t++]=G.w}return this||p},applyMatrix3:function(u){if(2===(this||p).itemSize)for(var z=
0,t=(this||p).count;z<t;z++)JO.fromBufferAttribute(this||p,z),JO.applyMatrix3(u),this.setXY(z,JO.x,JO.y);else if(3===(this||p).itemSize)for(z=0,t=(this||p).count;z<t;z++)ql.fromBufferAttribute(this||p,z),ql.applyMatrix3(u),this.setXYZ(z,ql.x,ql.y,ql.z);return this||p},applyMatrix4:function(u){for(var z=0,t=(this||p).count;z<t;z++)ql.x=this.getX(z),ql.y=this.getY(z),ql.z=this.getZ(z),ql.applyMatrix4(u),this.setXYZ(z,ql.x,ql.y,ql.z);return this||p},applyNormalMatrix:function(u){for(var z=0,t=(this||
p).count;z<t;z++)ql.x=this.getX(z),ql.y=this.getY(z),ql.z=this.getZ(z),ql.applyNormalMatrix(u),this.setXYZ(z,ql.x,ql.y,ql.z);return this||p},transformDirection:function(u){for(var z=0,t=(this||p).count;z<t;z++)ql.x=this.getX(z),ql.y=this.getY(z),ql.z=this.getZ(z),ql.transformDirection(u),this.setXYZ(z,ql.x,ql.y,ql.z);return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},getX:function(u){return(this||p).array[u*(this||p).itemSize]},setX:function(u,z){(this||p).array[u*
(this||p).itemSize]=z;return this||p},getY:function(u){return(this||p).array[u*(this||p).itemSize+1]},setY:function(u,z){(this||p).array[u*(this||p).itemSize+1]=z;return this||p},getZ:function(u){return(this||p).array[u*(this||p).itemSize+2]},setZ:function(u,z){(this||p).array[u*(this||p).itemSize+2]=z;return this||p},getW:function(u){return(this||p).array[u*(this||p).itemSize+3]},setW:function(u,z){(this||p).array[u*(this||p).itemSize+3]=z;return this||p},setXY:function(u,z,t){u*=(this||p).itemSize;
(this||p).array[u+0]=z;(this||p).array[u+1]=t;return this||p},setXYZ:function(u,z,t,x){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;(this||p).array[u+2]=x;return this||p},setXYZW:function(u,z,t,x,C){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;(this||p).array[u+2]=x;(this||p).array[u+3]=C;return this||p},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},clone:function(){return(new (this||p).constructor((this||p).array,(this||p).itemSize)).copy(this||
p)},toJSON:function(){return{itemSize:(this||p).itemSize,type:(this||p).array.constructor.name,array:Array.prototype.slice.call((this||p).array),normalized:(this||p).normalized}}});W.prototype=Object.create(X.prototype);W.prototype.constructor=W;ea.prototype=Object.create(X.prototype);ea.prototype.constructor=ea;Aa.prototype=Object.create(X.prototype);Aa.prototype.constructor=Aa;Ka.prototype=Object.create(X.prototype);Ka.prototype.constructor=Ka;K.prototype=Object.create(X.prototype);K.prototype.constructor=
K;aa.prototype=Object.create(X.prototype);aa.prototype.constructor=aa;T.prototype=Object.create(X.prototype);T.prototype.constructor=T;U.prototype=Object.create(X.prototype);U.prototype.constructor=U;pa.prototype=Object.create(X.prototype);pa.prototype.constructor=pa;var Dra=function(){function u(){(this||p).vertices=[];(this||p).normals=[];(this||p).colors=[];(this||p).uvs=[];(this||p).uvs2=[];(this||p).groups=[];(this||p).morphTargets={};(this||p).skinWeights=[];(this||p).skinIndices=[];(this||
p).boundingBox=null;(this||p).boundingSphere=null;(this||p).verticesNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=!1;(this||p).uvsNeedUpdate=!1;(this||p).groupsNeedUpdate=!1}var z=u.prototype;z.computeGroups=function(t){var x=[],C=void 0,G=t.faces;for(t=0;t<G.length;t++){var L=G[t];if(L.materialIndex!==C){C=L.materialIndex;void 0!==S&&(S.count=3*t-S.start,x.push(S));var S={start:3*t,materialIndex:C}}}void 0!==S&&(S.count=3*t-S.start,x.push(S));(this||p).groups=x};z.fromGeometry=
function(t){var x=t.faces,C=t.vertices,G=t.faceVertexUvs,L=G[0]&&0<G[0].length,S=G[1]&&0<G[1].length,V=t.morphTargets,Z=V.length;if(0<Z){var ja=[];for(var ta=0;ta<Z;ta++)ja[ta]={name:V[ta].name,data:[]};(this||p).morphTargets.position=ja}ta=t.morphNormals;var Ha=ta.length;if(0<Ha){var db=[];for(var Ya=0;Ya<Ha;Ya++)db[Ya]={name:ta[Ya].name,data:[]};(this||p).morphTargets.normal=db}Ya=t.skinIndices;var vb=t.skinWeights,sb=Ya.length===C.length,Qc=vb.length===C.length;0<C.length&&0===x.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");
for(var zc=0;zc<x.length;zc++){var jd=x[zc];(this||p).vertices.push(C[jd.a],C[jd.b],C[jd.c]);var Bc=jd.vertexNormals;3===Bc.length?(this||p).normals.push(Bc[0],Bc[1],Bc[2]):(Bc=jd.normal,(this||p).normals.push(Bc,Bc,Bc));Bc=jd.vertexColors;3===Bc.length?(this||p).colors.push(Bc[0],Bc[1],Bc[2]):(Bc=jd.color,(this||p).colors.push(Bc,Bc,Bc));!0===L&&(Bc=G[0][zc],void 0!==Bc?(this||p).uvs.push(Bc[0],Bc[1],Bc[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",zc),(this||p).uvs.push(new Xe,
new Xe,new Xe)));!0===S&&(Bc=G[1][zc],void 0!==Bc?(this||p).uvs2.push(Bc[0],Bc[1],Bc[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",zc),(this||p).uvs2.push(new Xe,new Xe,new Xe)));for(Bc=0;Bc<Z;Bc++){var kd=V[Bc].vertices;ja[Bc].data.push(kd[jd.a],kd[jd.b],kd[jd.c])}for(Bc=0;Bc<Ha;Bc++)kd=ta[Bc].vertexNormals[zc],db[Bc].data.push(kd.a,kd.b,kd.c);sb&&(this||p).skinIndices.push(Ya[jd.a],Ya[jd.b],Ya[jd.c]);Qc&&(this||p).skinWeights.push(vb[jd.a],vb[jd.b],vb[jd.c])}this.computeGroups(t);
(this||p).verticesNeedUpdate=t.verticesNeedUpdate;(this||p).normalsNeedUpdate=t.normalsNeedUpdate;(this||p).colorsNeedUpdate=t.colorsNeedUpdate;(this||p).uvsNeedUpdate=t.uvsNeedUpdate;(this||p).groupsNeedUpdate=t.groupsNeedUpdate;null!==t.boundingSphere&&((this||p).boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&((this||p).boundingBox=t.boundingBox.clone());return this||p};return u}(),fra=1,Tv=new fj,QW=new E,IE=new nc,Ir=new Sv,sI=new Sv,no=new nc;oa.prototype=Object.assign(Object.create(e.prototype),
{constructor:oa,isBufferGeometry:!0,getIndex:function(){return(this||p).index},setIndex:function(u){Array.isArray(u)?(this||p).index=new (65535<fa(u)?T:K)(u,1):(this||p).index=u;return this||p},getAttribute:function(u){return(this||p).attributes[u]},setAttribute:function(u,z){(this||p).attributes[u]=z;return this||p},deleteAttribute:function(u){delete (this||p).attributes[u];return this||p},addGroup:function(u,z,t){(this||p).groups.push({start:u,count:z,materialIndex:void 0!==t?t:0})},clearGroups:function(){(this||
p).groups=[]},setDrawRange:function(u,z){(this||p).drawRange.start=u;(this||p).drawRange.count=z},applyMatrix4:function(u){var z=(this||p).attributes.position;void 0!==z&&(z.applyMatrix4(u),z.needsUpdate=!0);z=(this||p).attributes.normal;if(void 0!==z){var t=(new Up).getNormalMatrix(u);z.applyNormalMatrix(t);z.needsUpdate=!0}z=(this||p).attributes.tangent;void 0!==z&&(z.transformDirection(u),z.needsUpdate=!0);null!==(this||p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&
this.computeBoundingSphere();return this||p},rotateX:function(u){Tv.makeRotationX(u);this.applyMatrix4(Tv);return this||p},rotateY:function(u){Tv.makeRotationY(u);this.applyMatrix4(Tv);return this||p},rotateZ:function(u){Tv.makeRotationZ(u);this.applyMatrix4(Tv);return this||p},translate:function(u,z,t){Tv.makeTranslation(u,z,t);this.applyMatrix4(Tv);return this||p},scale:function(u,z,t){Tv.makeScale(u,z,t);this.applyMatrix4(Tv);return this||p},lookAt:function(u){QW.lookAt(u);QW.updateMatrix();this.applyMatrix4(QW.matrix);
return this||p},center:function(){this.computeBoundingBox();(this||p).boundingBox.getCenter(IE).negate();this.translate(IE.x,IE.y,IE.z);return this||p},setFromObject:function(u){var z=u.geometry;if(u.isPoints||u.isLine){u=new U(3*z.vertices.length,3);var t=new U(3*z.colors.length,3);this.setAttribute("position",u.copyVector3sArray(z.vertices));this.setAttribute("color",t.copyColorsArray(z.colors));z.lineDistances&&z.lineDistances.length===z.vertices.length&&(u=new U(z.lineDistances.length,1),this.setAttribute("lineDistance",
u.copyArray(z.lineDistances)));null!==z.boundingSphere&&((this||p).boundingSphere=z.boundingSphere.clone());null!==z.boundingBox&&((this||p).boundingBox=z.boundingBox.clone())}else u.isMesh&&z&&z.isGeometry&&this.fromGeometry(z);return this||p},setFromPoints:function(u){for(var z=[],t=0,x=u.length;t<x;t++){var C=u[t];z.push(C.x,C.y,C.z||0)}this.setAttribute("position",new U(z,3));return this||p},updateFromObject:function(u){var z=u.geometry;if(u.isMesh){var t=z.__directGeometry;!0===z.elementsNeedUpdate&&
(t=void 0,z.elementsNeedUpdate=!1);if(void 0===t)return this.fromGeometry(z);t.verticesNeedUpdate=z.verticesNeedUpdate;t.normalsNeedUpdate=z.normalsNeedUpdate;t.colorsNeedUpdate=z.colorsNeedUpdate;t.uvsNeedUpdate=z.uvsNeedUpdate;t.groupsNeedUpdate=z.groupsNeedUpdate;z.verticesNeedUpdate=!1;z.normalsNeedUpdate=!1;z.colorsNeedUpdate=!1;z.uvsNeedUpdate=!1;z.groupsNeedUpdate=!1;z=t}!0===z.verticesNeedUpdate&&(t=(this||p).attributes.position,void 0!==t&&(t.copyVector3sArray(z.vertices),t.needsUpdate=!0),
z.verticesNeedUpdate=!1);!0===z.normalsNeedUpdate&&(t=(this||p).attributes.normal,void 0!==t&&(t.copyVector3sArray(z.normals),t.needsUpdate=!0),z.normalsNeedUpdate=!1);!0===z.colorsNeedUpdate&&(t=(this||p).attributes.color,void 0!==t&&(t.copyColorsArray(z.colors),t.needsUpdate=!0),z.colorsNeedUpdate=!1);z.uvsNeedUpdate&&(t=(this||p).attributes.uv,void 0!==t&&(t.copyVector2sArray(z.uvs),t.needsUpdate=!0),z.uvsNeedUpdate=!1);z.lineDistancesNeedUpdate&&(t=(this||p).attributes.lineDistance,void 0!==t&&
(t.copyArray(z.lineDistances),t.needsUpdate=!0),z.lineDistancesNeedUpdate=!1);z.groupsNeedUpdate&&(z.computeGroups(u.geometry),(this||p).groups=z.groups,z.groupsNeedUpdate=!1);return this||p},fromGeometry:function(u){u.__directGeometry=(new Dra).fromGeometry(u);return this.fromDirectGeometry(u.__directGeometry)},fromDirectGeometry:function(u){var z=new Float32Array(3*u.vertices.length);this.setAttribute("position",(new X(z,3)).copyVector3sArray(u.vertices));0<u.normals.length&&(z=new Float32Array(3*
u.normals.length),this.setAttribute("normal",(new X(z,3)).copyVector3sArray(u.normals)));0<u.colors.length&&(z=new Float32Array(3*u.colors.length),this.setAttribute("color",(new X(z,3)).copyColorsArray(u.colors)));0<u.uvs.length&&(z=new Float32Array(2*u.uvs.length),this.setAttribute("uv",(new X(z,2)).copyVector2sArray(u.uvs)));0<u.uvs2.length&&(z=new Float32Array(2*u.uvs2.length),this.setAttribute("uv2",(new X(z,2)).copyVector2sArray(u.uvs2)));(this||p).groups=u.groups;for(var t in u.morphTargets){z=
[];for(var x=u.morphTargets[t],C=0,G=x.length;C<G;C++){var L=x[C],S=new U(3*L.data.length,3);S.name=L.name;z.push(S.copyVector3sArray(L.data))}(this||p).morphAttributes[t]=z}0<u.skinIndices.length&&(t=new U(4*u.skinIndices.length,4),this.setAttribute("skinIndex",t.copyVector4sArray(u.skinIndices)));0<u.skinWeights.length&&(t=new U(4*u.skinWeights.length,4),this.setAttribute("skinWeight",t.copyVector4sArray(u.skinWeights)));null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());
null!==u.boundingBox&&((this||p).boundingBox=u.boundingBox.clone());return this||p},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||p).boundingBox=new Sv);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this||p),(this||p).boundingBox.set(new nc(-Infinity,-Infinity,-Infinity),
new nc(Infinity,Infinity,Infinity));else{if(void 0!==u){if((this||p).boundingBox.setFromBufferAttribute(u),z){u=0;for(var t=z.length;u<t;u++)Ir.setFromBufferAttribute(z[u]),(this||p).morphTargetsRelative?(no.addVectors((this||p).boundingBox.min,Ir.min),(this||p).boundingBox.expandByPoint(no),no.addVectors((this||p).boundingBox.max,Ir.max),(this||p).boundingBox.expandByPoint(no)):((this||p).boundingBox.expandByPoint(Ir.min),(this||p).boundingBox.expandByPoint(Ir.max))}}else(this||p).boundingBox.makeEmpty();
(isNaN((this||p).boundingBox.min.x)||isNaN((this||p).boundingBox.min.y)||isNaN((this||p).boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this||p)}},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new ix);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
this||p),(this||p).boundingSphere.set(new nc,Infinity);else if(u){var t=(this||p).boundingSphere.center;Ir.setFromBufferAttribute(u);if(z)for(var x=0,C=z.length;x<C;x++)sI.setFromBufferAttribute(z[x]),(this||p).morphTargetsRelative?(no.addVectors(Ir.min,sI.min),Ir.expandByPoint(no),no.addVectors(Ir.max,sI.max),Ir.expandByPoint(no)):(Ir.expandByPoint(sI.min),Ir.expandByPoint(sI.max));Ir.getCenter(t);C=x=0;for(var G=u.count;C<G;C++)no.fromBufferAttribute(u,C),x=Math.max(x,t.distanceToSquared(no));if(z)for(C=
0,G=z.length;C<G;C++)for(var L=z[C],S=(this||p).morphTargetsRelative,V=0,Z=L.count;V<Z;V++)no.fromBufferAttribute(L,V),S&&(IE.fromBufferAttribute(u,V),no.add(IE)),x=Math.max(x,t.distanceToSquared(no));(this||p).boundingSphere.radius=Math.sqrt(x);isNaN((this||p).boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this||p)}},computeFaceNormals:function(){},computeVertexNormals:function(){var u=
(this||p).index,z=this.getAttribute("position");if(void 0!==z){var t=this.getAttribute("normal");if(void 0===t)t=new X(new Float32Array(3*z.count),3),this.setAttribute("normal",t);else for(var x=0,C=t.count;x<C;x++)t.setXYZ(x,0,0,0);x=new nc;C=new nc;var G=new nc,L=new nc,S=new nc,V=new nc,Z=new nc,ja=new nc;if(u)for(var ta=0,Ha=u.count;ta<Ha;ta+=3){var db=u.getX(ta+0),Ya=u.getX(ta+1),vb=u.getX(ta+2);x.fromBufferAttribute(z,db);C.fromBufferAttribute(z,Ya);G.fromBufferAttribute(z,vb);Z.subVectors(G,
C);ja.subVectors(x,C);Z.cross(ja);L.fromBufferAttribute(t,db);S.fromBufferAttribute(t,Ya);V.fromBufferAttribute(t,vb);L.add(Z);S.add(Z);V.add(Z);t.setXYZ(db,L.x,L.y,L.z);t.setXYZ(Ya,S.x,S.y,S.z);t.setXYZ(vb,V.x,V.y,V.z)}else for(u=0,L=z.count;u<L;u+=3)x.fromBufferAttribute(z,u+0),C.fromBufferAttribute(z,u+1),G.fromBufferAttribute(z,u+2),Z.subVectors(G,C),ja.subVectors(x,C),Z.cross(ja),t.setXYZ(u+0,Z.x,Z.y,Z.z),t.setXYZ(u+1,Z.x,Z.y,Z.z),t.setXYZ(u+2,Z.x,Z.y,Z.z);this.normalizeNormals();t.needsUpdate=
!0}},merge:function(u,z){if(u&&u.isBufferGeometry){void 0===z&&(z=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var t=(this||p).attributes,x;for(x in t)if(void 0!==u.attributes[x]){var C=t[x].array,G=u.attributes[x],L=G.array,S=G.itemSize*z;G=Math.min(L.length,C.length-S);for(var V=0;V<G;V++,S++)C[S]=L[V]}return this||p}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
u)},normalizeNormals:function(){for(var u=(this||p).attributes.normal,z=0,t=u.count;z<t;z++)no.fromBufferAttribute(u,z),no.normalize(),u.setXYZ(z,no.x,no.y,no.z)},toNonIndexed:function(){function u(ja,ta){var Ha=ja.array,db=ja.itemSize;ja=ja.normalized;for(var Ya=new Ha.constructor(ta.length*db),vb,sb=0,Qc=0,zc=ta.length;Qc<zc;Qc++){vb=ta[Qc]*db;for(var jd=0;jd<db;jd++)Ya[sb++]=Ha[vb++]}return new X(Ya,db,ja)}if(null===(this||p).index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
this||p;var z=new oa,t=(this||p).index.array,x=(this||p).attributes;for(L in x){var C=u(x[L],t);z.setAttribute(L,C)}x=(this||p).morphAttributes;for(var G in x){var L=[];C=x[G];for(var S=0,V=C.length;S<V;S++){var Z=u(C[S],t);L.push(Z)}z.morphAttributes[G]=L}z.morphTargetsRelative=(this||p).morphTargetsRelative;t=(this||p).groups;G=0;for(x=t.length;G<x;G++)L=t[G],z.addGroup(L.start,L.count,L.materialIndex);return z},toJSON:function(){var u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};
u.uuid=(this||p).uuid;u.type=(this||p).type;""!==(this||p).name&&(u.name=(this||p).name);0<Object.keys((this||p).userData).length&&(u.userData=(this||p).userData);if(void 0!==(this||p).parameters){var z=(this||p).parameters;for(t in z)void 0!==z[t]&&(u[t]=z[t]);return u}u.data={attributes:{}};var t=(this||p).index;null!==t&&(u.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});t=(this||p).attributes;for(var x in t){var C=t[x],G=C.toJSON(u.data);""!==C.name&&(G.name=
C.name);u.data.attributes[x]=G}x={};t=!1;for(z in(this||p).morphAttributes){C=(this||p).morphAttributes[z];G=[];for(var L=0,S=C.length;L<S;L++){var V=C[L],Z=V.toJSON(u.data);""!==V.name&&(Z.name=V.name);G.push(Z)}0<G.length&&(x[z]=G,t=!0)}t&&(u.data.morphAttributes=x,u.data.morphTargetsRelative=(this||p).morphTargetsRelative);z=(this||p).groups;0<z.length&&(u.data.groups=JSON.parse(JSON.stringify(z)));z=(this||p).boundingSphere;null!==z&&(u.data.boundingSphere={center:z.center.toArray(),radius:z.radius});
return u},clone:function(){return(new oa).copy(this||p)},copy:function(u){(this||p).index=null;(this||p).attributes={};(this||p).morphAttributes={};(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;var z={};(this||p).name=u.name;var t=u.index;null!==t&&this.setIndex(t.clone(z));t=u.attributes;for(var x in t)this.setAttribute(x,t[x].clone(z));x=u.morphAttributes;for(var C in x){t=[];for(var G=x[C],L=0,S=G.length;L<S;L++)t.push(G[L].clone(z));(this||p).morphAttributes[C]=
t}(this||p).morphTargetsRelative=u.morphTargetsRelative;z=u.groups;C=0;for(x=z.length;C<x;C++)t=z[C],this.addGroup(t.start,t.count,t.materialIndex);z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).drawRange.start=u.drawRange.start;(this||p).drawRange.count=u.drawRange.count;(this||p).userData=u.userData;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var J$=new fj,TB=new zE,RW=new ix,
Zy=new nc,$y=new nc,az=new nc,WV=new nc,XV=new nc,YV=new nc,SN=new nc,TN=new nc,UN=new nc,kE=new Xe,lE=new Xe,mE=new Xe,TH=new nc,RN=new nc;hb.prototype=Object.assign(Object.create(E.prototype),{constructor:hb,isMesh:!0,copy:function(u){E.prototype.copy.call(this||p,u);void 0!==u.morphTargetInfluences&&((this||p).morphTargetInfluences=u.morphTargetInfluences.slice());void 0!==u.morphTargetDictionary&&((this||p).morphTargetDictionary=Object.assign({},u.morphTargetDictionary));(this||p).material=u.material;
(this||p).geometry=u.geometry;return this||p},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},
raycast:function(u,z){var t=(this||p).geometry,x=(this||p).material,C=(this||p).matrixWorld;if(void 0!==x&&(null===t.boundingSphere&&t.computeBoundingSphere(),RW.copy(t.boundingSphere),RW.applyMatrix4(C),!1!==u.ray.intersectsSphere(RW)&&(J$.getInverse(C),TB.copy(u.ray).applyMatrix4(J$),null===t.boundingBox||!1!==TB.intersectsBox(t.boundingBox))))if(t.isBufferGeometry){var G=t.index,L=t.attributes.position;C=t.morphAttributes.position;var S=t.morphTargetsRelative,V=t.attributes.uv,Z=t.attributes.uv2,
ja=t.groups,ta=t.drawRange;if(null!==G)if(Array.isArray(x))for(var Ha=0,db=ja.length;Ha<db;Ha++)for(var Ya=ja[Ha],vb=x[Ya.materialIndex],sb=Math.max(Ya.start,ta.start),Qc=Math.min(Ya.start+Ya.count,ta.start+ta.count);sb<Qc;sb+=3){t=G.getX(sb);var zc=G.getX(sb+1),jd=G.getX(sb+2);if(t=va(this||p,vb,u,TB,L,C,S,V,Z,t,zc,jd))t.faceIndex=Math.floor(sb/3),t.face.materialIndex=Ya.materialIndex,z.push(t)}else for(ja=Math.max(0,ta.start),ta=Math.min(G.count,ta.start+ta.count);ja<ta;ja+=3){if(t=G.getX(ja),Ha=
G.getX(ja+1),db=G.getX(ja+2),t=va(this||p,x,u,TB,L,C,S,V,Z,t,Ha,db))t.faceIndex=Math.floor(ja/3),z.push(t)}else if(void 0!==L)if(Array.isArray(x))for(G=0,Ha=ja.length;G<Ha;G++)for(db=ja[G],Ya=x[db.materialIndex],vb=Math.max(db.start,ta.start),sb=Math.min(db.start+db.count,ta.start+ta.count);vb<sb;vb+=3){if(t=va(this||p,Ya,u,TB,L,C,S,V,Z,vb,vb+1,vb+2))t.faceIndex=Math.floor(vb/3),t.face.materialIndex=db.materialIndex,z.push(t)}else for(ja=Math.max(0,ta.start),ta=Math.min(L.count,ta.start+ta.count);ja<
ta;ja+=3)if(t=va(this||p,x,u,TB,L,C,S,V,Z,ja,ja+1,ja+2))t.faceIndex=Math.floor(ja/3),z.push(t)}else if(t.isGeometry)for(C=Array.isArray(x),S=t.vertices,V=t.faces,t=t.faceVertexUvs[0],0<t.length&&(L=t),Z=0,ta=V.length;Z<ta;Z++)if(ja=V[Z],t=C?x[ja.materialIndex]:x,void 0!==t&&(G=S[ja.a],Ha=S[ja.b],db=S[ja.c],t=Cb(this||p,t,u,TB,G,Ha,db,TH)))L&&L[Z]&&(Ya=L[Z],kE.copy(Ya[0]),lE.copy(Ya[1]),mE.copy(Ya[2]),t.uv=au.getUV(TH,G,Ha,db,kE,lE,mE,new Xe)),t.face=ja,t.faceIndex=Z,z.push(t)}});var VH=function(u){function z(t,
x,C,G,L,S){function V(Qc,zc,jd,Bc,kd,ud,Vd,Ad,gd,xd,jf){var Ae=ud/gd,uf=Vd/xd,Ff=ud/2,$f=Vd/2,gh=Ad/2;Vd=gd+1;for(var Qg=xd+1,Gi=ud=0,wh=new nc,Xj=0;Xj<Qg;Xj++)for(var zk=Xj*uf-$f,Kl=0;Kl<Vd;Kl++)wh[Qc]=(Kl*Ae-Ff)*Bc,wh[zc]=zk*kd,wh[jd]=gh,Ha.push(wh.x,wh.y,wh.z),wh[Qc]=0,wh[zc]=0,wh[jd]=0<Ad?1:-1,db.push(wh.x,wh.y,wh.z),Ya.push(Kl/gd),Ya.push(1-Xj/xd),ud+=1;for(Qc=0;Qc<xd;Qc++)for(zc=0;zc<gd;zc++)jd=vb+zc+Vd*(Qc+1),Bc=vb+(zc+1)+Vd*(Qc+1),kd=vb+(zc+1)+Vd*Qc,ta.push(vb+zc+Vd*Qc,jd,kd),ta.push(jd,Bc,
kd),Gi+=6;ja.addGroup(sb,Gi,jf);sb+=Gi;vb+=ud}void 0===t&&(t=1);void 0===x&&(x=1);void 0===C&&(C=1);void 0===G&&(G=1);void 0===L&&(L=1);void 0===S&&(S=1);var Z=u.call(this||p)||this||p;Z.type="BoxBufferGeometry";Z.parameters={width:t,height:x,depth:C,widthSegments:G,heightSegments:L,depthSegments:S};var ja=l(Z);G=Math.floor(G);L=Math.floor(L);S=Math.floor(S);var ta=[],Ha=[],db=[],Ya=[],vb=0,sb=0;V("z","y","x",-1,-1,C,x,t,S,L,0);V("z","y","x",1,-1,C,x,-t,S,L,1);V("x","z","y",1,1,t,C,x,G,S,2);V("x",
"z","y",1,-1,t,C,-x,G,S,3);V("x","y","z",1,-1,t,x,C,G,L,4);V("x","y","z",-1,-1,t,x,-C,G,L,5);Z.setIndex(ta);Z.setAttribute("position",new U(Ha,3));Z.setAttribute("normal",new U(db,3));Z.setAttribute("uv",new U(Ya,2));return Z}g(z,u);return z}(oa),X9={clone:ma,merge:ua};Ma.prototype=Object.create(M.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isShaderMaterial=!0;Ma.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).fragmentShader=u.fragmentShader;(this||p).vertexShader=u.vertexShader;
(this||p).uniforms=ma(u.uniforms);(this||p).defines=Object.assign({},u.defines);(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).lights=u.lights;(this||p).clipping=u.clipping;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).extensions=Object.assign({},u.extensions);(this||p).glslVersion=u.glslVersion;return this||p};Ma.prototype.toJSON=function(u){var z=M.prototype.toJSON.call(this||p,u);
z.glslVersion=(this||p).glslVersion;z.uniforms={};for(var t in(this||p).uniforms){var x=(this||p).uniforms[t].value;z.uniforms[t]=x&&x.isTexture?{type:"t",value:x.toJSON(u).uuid}:x&&x.isColor?{type:"c",value:x.getHex()}:x&&x.isVector2?{type:"v2",value:x.toArray()}:x&&x.isVector3?{type:"v3",value:x.toArray()}:x&&x.isVector4?{type:"v4",value:x.toArray()}:x&&x.isMatrix3?{type:"m3",value:x.toArray()}:x&&x.isMatrix4?{type:"m4",value:x.toArray()}:{value:x}}0<Object.keys((this||p).defines).length&&(z.defines=
(this||p).defines);z.vertexShader=(this||p).vertexShader;z.fragmentShader=(this||p).fragmentShader;u={};for(var C in(this||p).extensions)!0===(this||p).extensions[C]&&(u[C]=!0);0<Object.keys(u).length&&(z.extensions=u);return z};Lb.prototype=Object.assign(Object.create(E.prototype),{constructor:Lb,isCamera:!0,copy:function(u,z){E.prototype.copy.call(this||p,u,z);(this||p).matrixWorldInverse.copy(u.matrixWorldInverse);(this||p).projectionMatrix.copy(u.projectionMatrix);(this||p).projectionMatrixInverse.copy(u.projectionMatrixInverse);
return this||p},getWorldDirection:function(u){void 0===u&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),u=new nc);this.updateWorldMatrix(!0,!1);var z=(this||p).matrixWorld.elements;return u.set(-z[8],-z[9],-z[10]).normalize()},updateMatrixWorld:function(u){E.prototype.updateMatrixWorld.call(this||p,u);(this||p).matrixWorldInverse.getInverse((this||p).matrixWorld)},updateWorldMatrix:function(u,z){E.prototype.updateWorldMatrix.call(this||p,u,z);(this||p).matrixWorldInverse.getInverse((this||
p).matrixWorld)},clone:function(){return(new (this||p).constructor).copy(this||p)}});ic.prototype=Object.assign(Object.create(Lb.prototype),{constructor:ic,isPerspectiveCamera:!0,copy:function(u,z){Lb.prototype.copy.call(this||p,u,z);(this||p).fov=u.fov;(this||p).zoom=u.zoom;(this||p).near=u.near;(this||p).far=u.far;(this||p).focus=u.focus;(this||p).aspect=u.aspect;(this||p).view=null===u.view?null:Object.assign({},u.view);(this||p).filmGauge=u.filmGauge;(this||p).filmOffset=u.filmOffset;return this||
p},setFocalLength:function(u){u=.5*this.getFilmHeight()/u;(this||p).fov=2*Xh.RAD2DEG*Math.atan(u);this.updateProjectionMatrix()},getFocalLength:function(){var u=Math.tan(.5*Xh.DEG2RAD*(this||p).fov);return.5*this.getFilmHeight()/u},getEffectiveFOV:function(){return 2*Xh.RAD2DEG*Math.atan(Math.tan(.5*Xh.DEG2RAD*(this||p).fov)/(this||p).zoom)},getFilmWidth:function(){return(this||p).filmGauge*Math.min((this||p).aspect,1)},getFilmHeight:function(){return(this||p).filmGauge/Math.max((this||p).aspect,
1)},setViewOffset:function(u,z,t,x,C,G){(this||p).aspect=u/z;null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=z;(this||p).view.offsetX=t;(this||p).view.offsetY=x;(this||p).view.width=C;(this||p).view.height=G;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=
(this||p).near,z=u*Math.tan(.5*Xh.DEG2RAD*(this||p).fov)/(this||p).zoom,t=2*z,x=(this||p).aspect*t,C=-.5*x,G=(this||p).view;if(null!==(this||p).view&&(this||p).view.enabled){var L=G.fullWidth,S=G.fullHeight;C+=G.offsetX*x/L;z-=G.offsetY*t/S;x*=G.width/L;t*=G.height/S}G=(this||p).filmOffset;0!==G&&(C+=u*G/this.getFilmWidth());(this||p).projectionMatrix.makePerspective(C,C+x,z,z-t,u,(this||p).far);(this||p).projectionMatrixInverse.getInverse((this||p).projectionMatrix)},toJSON:function(u){u=E.prototype.toJSON.call(this||
p,u);u.object.fov=(this||p).fov;u.object.zoom=(this||p).zoom;u.object.near=(this||p).near;u.object.far=(this||p).far;u.object.focus=(this||p).focus;u.object.aspect=(this||p).aspect;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));u.object.filmGauge=(this||p).filmGauge;u.object.filmOffset=(this||p).filmOffset;return u}});Vb.prototype=Object.create(E.prototype);Vb.prototype.constructor=Vb;jc.prototype=Object.create(r.prototype);jc.prototype.constructor=jc;jc.prototype.isCubeTexture=
!0;Object.defineProperty(jc.prototype,"images",{get:function(){return(this||p).image},set:function(u){(this||p).image=u}});Pc.prototype=Object.create(v.prototype);Pc.prototype.constructor=Pc;Pc.prototype.isWebGLCubeRenderTarget=!0;Pc.prototype.fromEquirectangularTexture=function(u,z){(this||p).texture.type=z.type;(this||p).texture.format=1023;(this||p).texture.encoding=z.encoding;(this||p).texture.generateMipmaps=z.generateMipmaps;(this||p).texture.minFilter=z.minFilter;(this||p).texture.magFilter=
z.magFilter;var t=new VH(5,5,5),x=new Ma({name:"CubemapFromEquirect",uniforms:ma({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",
side:1,blending:0});x.uniforms.tEquirect.value=z;t=new hb(t,x);x=z.minFilter;1008===z.minFilter&&(z.minFilter=1006);(new Vb(1,10,this||p)).update(u,t);z.minFilter=x;t.geometry.dispose();t.material.dispose();return this||p};Pc.prototype.clear=function(u,z,t,x){for(var C=u.getRenderTarget(),G=0;6>G;G++)u.setRenderTarget(this||p,G),u.clear(z,t,x);u.setRenderTarget(C)};Rb.prototype=Object.create(r.prototype);Rb.prototype.constructor=Rb;Rb.prototype.isDataTexture=!0;var JE=new ix,KO=new nc,WH=function(){function u(t,
x,C,G,L,S){(this||p).planes=[void 0!==t?t:new Mv,void 0!==x?x:new Mv,void 0!==C?C:new Mv,void 0!==G?G:new Mv,void 0!==L?L:new Mv,void 0!==S?S:new Mv]}var z=u.prototype;z.set=function(t,x,C,G,L,S){var V=(this||p).planes;V[0].copy(t);V[1].copy(x);V[2].copy(C);V[3].copy(G);V[4].copy(L);V[5].copy(S);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){for(var x=(this||p).planes,C=0;6>C;C++)x[C].copy(t.planes[C]);return this||p};z.setFromProjectionMatrix=
function(t){var x=(this||p).planes,C=t.elements;t=C[0];var G=C[1],L=C[2],S=C[3],V=C[4],Z=C[5],ja=C[6],ta=C[7],Ha=C[8],db=C[9],Ya=C[10],vb=C[11],sb=C[12],Qc=C[13],zc=C[14];C=C[15];x[0].setComponents(S-t,ta-V,vb-Ha,C-sb).normalize();x[1].setComponents(S+t,ta+V,vb+Ha,C+sb).normalize();x[2].setComponents(S+G,ta+Z,vb+db,C+Qc).normalize();x[3].setComponents(S-G,ta-Z,vb-db,C-Qc).normalize();x[4].setComponents(S-L,ta-ja,vb-Ya,C-zc).normalize();x[5].setComponents(S+L,ta+ja,vb+Ya,C+zc).normalize();return this||
p};z.intersectsObject=function(t){var x=t.geometry;null===x.boundingSphere&&x.computeBoundingSphere();JE.copy(x.boundingSphere).applyMatrix4(t.matrixWorld);return this.intersectsSphere(JE)};z.intersectsSprite=function(t){JE.center.set(0,0,0);JE.radius=.7071067811865476;JE.applyMatrix4(t.matrixWorld);return this.intersectsSphere(JE)};z.intersectsSphere=function(t){var x=(this||p).planes,C=t.center;t=-t.radius;for(var G=0;6>G;G++)if(x[G].distanceToPoint(C)<t)return!1;return!0};z.intersectsBox=function(t){for(var x=
(this||p).planes,C=0;6>C;C++){var G=x[C];KO.x=0<G.normal.x?t.max.x:t.min.x;KO.y=0<G.normal.y?t.max.y:t.min.y;KO.z=0<G.normal.z?t.max.z:t.min.z;if(0>G.distanceToPoint(KO))return!1}return!0};z.containsPoint=function(t){for(var x=(this||p).planes,C=0;6>C;C++)if(0>x[C].distanceToPoint(t))return!1;return!0};return u}(),VN=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="PlaneBufferGeometry";L.parameters={width:t,height:x,widthSegments:C,heightSegments:G};t=t||1;x=x||1;var S=t/2,V=
x/2;C=Math.floor(C)||1;G=Math.floor(G)||1;var Z=C+1,ja=G+1,ta=t/C,Ha=x/G;x=[];t=[];for(var db=[],Ya=[],vb=0;vb<ja;vb++)for(var sb=vb*Ha-V,Qc=0;Qc<Z;Qc++)t.push(Qc*ta-S,-sb,0),db.push(0,0,1),Ya.push(Qc/C),Ya.push(1-vb/G);for(S=0;S<G;S++)for(V=0;V<C;V++)ja=V+Z*(S+1),ta=V+1+Z*(S+1),Ha=V+1+Z*S,x.push(V+Z*S,ja,Ha),x.push(ja,ta,Ha);L.setIndex(x);L.setAttribute("position",new U(t,3));L.setAttribute("normal",new U(db,3));L.setAttribute("uv",new U(Ya,2));return L}g(z,u);return z}(oa),gj={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",
alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
ag={common:{diffuse:{value:new rg(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Up},uv2Transform:{value:new Up},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new rg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],
properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rg(15658734)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Up}},sprite:{diffuse:{value:new rg(15658734)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Up}}},bu={basic:{uniforms:ua([ag.common,ag.specularmap,ag.envmap,ag.aomap,ag.lightmap,ag.fog]),vertexShader:gj.meshbasic_vert,fragmentShader:gj.meshbasic_frag},lambert:{uniforms:ua([ag.common,ag.specularmap,ag.envmap,ag.aomap,ag.lightmap,
ag.emissivemap,ag.fog,ag.lights,{emissive:{value:new rg(0)}}]),vertexShader:gj.meshlambert_vert,fragmentShader:gj.meshlambert_frag},phong:{uniforms:ua([ag.common,ag.specularmap,ag.envmap,ag.aomap,ag.lightmap,ag.emissivemap,ag.bumpmap,ag.normalmap,ag.displacementmap,ag.fog,ag.lights,{emissive:{value:new rg(0)},specular:{value:new rg(1118481)},shininess:{value:30}}]),vertexShader:gj.meshphong_vert,fragmentShader:gj.meshphong_frag},standard:{uniforms:ua([ag.common,ag.envmap,ag.aomap,ag.lightmap,ag.emissivemap,
ag.bumpmap,ag.normalmap,ag.displacementmap,ag.roughnessmap,ag.metalnessmap,ag.fog,ag.lights,{emissive:{value:new rg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gj.meshphysical_vert,fragmentShader:gj.meshphysical_frag},toon:{uniforms:ua([ag.common,ag.aomap,ag.lightmap,ag.emissivemap,ag.bumpmap,ag.normalmap,ag.displacementmap,ag.gradientmap,ag.fog,ag.lights,{emissive:{value:new rg(0)}}]),vertexShader:gj.meshtoon_vert,fragmentShader:gj.meshtoon_frag},matcap:{uniforms:ua([ag.common,
ag.bumpmap,ag.normalmap,ag.displacementmap,ag.fog,{matcap:{value:null}}]),vertexShader:gj.meshmatcap_vert,fragmentShader:gj.meshmatcap_frag},points:{uniforms:ua([ag.points,ag.fog]),vertexShader:gj.points_vert,fragmentShader:gj.points_frag},dashed:{uniforms:ua([ag.common,ag.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gj.linedashed_vert,fragmentShader:gj.linedashed_frag},depth:{uniforms:ua([ag.common,ag.displacementmap]),vertexShader:gj.depth_vert,fragmentShader:gj.depth_frag},
normal:{uniforms:ua([ag.common,ag.bumpmap,ag.normalmap,ag.displacementmap,{opacity:{value:1}}]),vertexShader:gj.normal_vert,fragmentShader:gj.normal_frag},sprite:{uniforms:ua([ag.sprite,ag.fog]),vertexShader:gj.sprite_vert,fragmentShader:gj.sprite_frag},background:{uniforms:{uvTransform:{value:new Up},t2D:{value:null}},vertexShader:gj.background_vert,fragmentShader:gj.background_frag},cube:{uniforms:ua([ag.envmap,{opacity:{value:1}}]),vertexShader:gj.cube_vert,fragmentShader:gj.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},
vertexShader:gj.equirect_vert,fragmentShader:gj.equirect_frag},distanceRGBA:{uniforms:ua([ag.common,ag.displacementmap,{referencePosition:{value:new nc},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:gj.distanceRGBA_vert,fragmentShader:gj.distanceRGBA_frag},shadow:{uniforms:ua([ag.lights,ag.fog,{color:{value:new rg(0)},opacity:{value:1}}]),vertexShader:gj.shadow_vert,fragmentShader:gj.shadow_frag}};bu.physical={uniforms:ua([bu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},
clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new rg(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:gj.meshphysical_vert,fragmentShader:gj.meshphysical_frag};oj.prototype=Object.create(r.prototype);oj.prototype.constructor=oj;oj.prototype.isDataTexture2DArray=!0;Fj.prototype=Object.create(r.prototype);Fj.prototype.constructor=Fj;Fj.prototype.isDataTexture3D=!0;var T9=new r,
gra=new oj,hra=new Fj,U9=new jc,O9=[],P9=[],S9=new Float32Array(16),R9=new Float32Array(9),Q9=new Float32Array(4);dM.prototype.updateCache=function(u){var z=(this||p).cache;u instanceof Float32Array&&z.length!==u.length&&((this||p).cache=new Float32Array(u.length));th(z,u)};jM.prototype.setValue=function(u,z,t){for(var x=(this||p).seq,C=0,G=x.length;C!==G;++C){var L=x[C];L.setValue(u,z[L.id],t)}};var ZV=/([\w\d_]+)(\])?(\[|\.)?/g;yv.prototype.setValue=function(u,z,t,x){z=(this||p).map[z];void 0!==
z&&z.setValue(u,t,x)};yv.prototype.setOptional=function(u,z,t){z=z[t];void 0!==z&&this.setValue(u,t,z)};yv.upload=function(u,z,t,x){for(var C=0,G=z.length;C!==G;++C){var L=z[C],S=t[L.id];!1!==S.needsUpdate&&L.setValue(u,S.value,x)}};yv.seqWithValue=function(u,z){for(var t=[],x=0,C=u.length;x!==C;++x){var G=u[x];G.id in z&&t.push(G)}return t};var ira=0,$V=/^[ \t]*#include +<([\w\d./]+)>/gm,W9=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,V9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,
jra=0;bz.prototype=Object.create(M.prototype);bz.prototype.constructor=bz;bz.prototype.isMeshDepthMaterial=!0;bz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).depthPacking=u.depthPacking;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||
p).wireframeLinewidth=u.wireframeLinewidth;return this||p};cz.prototype=Object.create(M.prototype);cz.prototype.constructor=cz;cz.prototype.isMeshDistanceMaterial=!0;cz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).referencePosition.copy(u.referencePosition);(this||p).nearDistance=u.nearDistance;(this||p).farDistance=u.farDistance;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=
u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;return this||p};WN.prototype=Object.assign(Object.create(ic.prototype),{constructor:WN,isArrayCamera:!0});dz.prototype=Object.assign(Object.create(E.prototype),{constructor:dz,isGroup:!0});Object.assign(XH.prototype,{constructor:XH,getHandSpace:function(){if(null===(this||p)._hand&&((this||p)._hand=new dz,(this||p)._hand.matrixAutoUpdate=!1,(this||p)._hand.visible=!1,(this||p)._hand.joints=
[],(this||p)._hand.inputState={pinching:!1},window.XRHand))for(var u=0;u<=window.XRHand.LITTLE_PHALANX_TIP;u++){var z=new dz;z.matrixAutoUpdate=!1;z.visible=!1;(this||p)._hand.joints.push(z);(this||p)._hand.add(z)}return(this||p)._hand},getTargetRaySpace:function(){null===(this||p)._targetRay&&((this||p)._targetRay=new dz,(this||p)._targetRay.matrixAutoUpdate=!1,(this||p)._targetRay.visible=!1);return(this||p)._targetRay},getGripSpace:function(){null===(this||p)._grip&&((this||p)._grip=new dz,(this||
p)._grip.matrixAutoUpdate=!1,(this||p)._grip.visible=!1);return(this||p)._grip},dispatchEvent:function(u){null!==(this||p)._targetRay&&(this||p)._targetRay.dispatchEvent(u);null!==(this||p)._grip&&(this||p)._grip.dispatchEvent(u);null!==(this||p)._hand&&(this||p)._hand.dispatchEvent(u);return this||p},disconnect:function(u){this.dispatchEvent({type:"disconnected",data:u});null!==(this||p)._targetRay&&((this||p)._targetRay.visible=!1);null!==(this||p)._grip&&((this||p)._grip.visible=!1);null!==(this||
p)._hand&&((this||p)._hand.visible=!1);return this||p},update:function(u,z,t){var x=null,C=null,G=null,L=(this||p)._targetRay,S=(this||p)._grip,V=(this||p)._hand;if(u)if(V&&u.hand){G=!0;for(var Z=0;Z<=window.XRHand.LITTLE_PHALANX_TIP;Z++)if(u.hand[Z]){var ja=z.getJointPose(u.hand[Z],t),ta=V.joints[Z];null!==ja&&(ta.matrix.fromArray(ja.transform.matrix),ta.matrix.decompose(ta.position,ta.rotation,ta.scale),ta.jointRadius=ja.radius);ta.visible=null!==ja;ja=V.joints[window.XRHand.INDEX_PHALANX_TIP].position.distanceTo(V.joints[window.XRHand.THUMB_PHALANX_TIP].position);
V.inputState.pinching&&.025<ja?(V.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:u.handedness,target:this||p})):!V.inputState.pinching&&.015>=ja&&(V.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:u.handedness,target:this||p}))}}else null!==L&&(x=z.getPose(u.targetRaySpace,t),null!==x&&(L.matrix.fromArray(x.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale))),null!==S&&u.gripSpace&&(C=z.getPose(u.gripSpace,t),null!==C&&(S.matrix.fromArray(C.transform.matrix),
S.matrix.decompose(S.position,S.rotation,S.scale)));null!==L&&(L.visible=null!==x);null!==S&&(S.visible=null!==C);null!==V&&(V.visible=null!==G);return this||p}});Object.assign(a$.prototype,e.prototype);dW.prototype=Object.assign(Object.create(YH.prototype),{constructor:dW,isWebGL1Renderer:!0});var K$=function(){function u(t,x){Object.defineProperty(this||p,"isFogExp2",{value:!0});(this||p).name="";(this||p).color=new rg(t);(this||p).density=void 0!==x?x:2.5E-4}var z=u.prototype;z.clone=function(){return new u((this||
p).color,(this||p).density)};z.toJSON=function(){return{type:"FogExp2",color:(this||p).color.getHex(),density:(this||p).density}};return u}(),L$=function(){function u(t,x,C){Object.defineProperty(this||p,"isFog",{value:!0});(this||p).name="";(this||p).color=new rg(t);(this||p).near=void 0!==x?x:1;(this||p).far=void 0!==C?C:1E3}var z=u.prototype;z.clone=function(){return new u((this||p).color,(this||p).near,(this||p).far)};z.toJSON=function(){return{type:"Fog",color:(this||p).color.getHex(),near:(this||
p).near,far:(this||p).far}};return u}(),SW=function(u){function z(){var x=u.call(this||p)||this||p;Object.defineProperty(l(x),"isScene",{value:!0});x.type="Scene";x.background=null;x.environment=null;x.fog=null;x.overrideMaterial=null;x.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:l(x)}));return x}g(z,u);var t=z.prototype;t.copy=function(x,C){u.prototype.copy.call(this||p,x,C);null!==x.background&&((this||p).background=x.background.clone());
null!==x.environment&&((this||p).environment=x.environment.clone());null!==x.fog&&((this||p).fog=x.fog.clone());null!==x.overrideMaterial&&((this||p).overrideMaterial=x.overrideMaterial.clone());(this||p).autoUpdate=x.autoUpdate;(this||p).matrixAutoUpdate=x.matrixAutoUpdate;return this||p};t.toJSON=function(x){var C=u.prototype.toJSON.call(this||p,x);null!==(this||p).background&&(C.object.background=(this||p).background.toJSON(x));null!==(this||p).environment&&(C.object.environment=(this||p).environment.toJSON(x));
null!==(this||p).fog&&(C.object.fog=(this||p).fog.toJSON());return C};return z}(E);Object.defineProperty(Fr.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(Fr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).array=new u.array.constructor(u.array);(this||p).count=u.count;(this||p).stride=u.stride;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||
p).stride;t*=z.stride;for(var x=0,C=(this||p).stride;x<C;x++)(this||p).array[u+x]=z.array[t+x];return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},clone:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=Xh.generateUUID());void 0===u.arrayBuffers[(this||p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=(this||p).array.slice(0).buffer);u=new (this||p).array.constructor(u.arrayBuffers[(this||
p).array.buffer._uuid]);u=new Fr(u,(this||p).stride);u.setUsage((this||p).usage);return u},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},toJSON:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=Xh.generateUUID());void 0===u.arrayBuffers[(this||p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array((this||p).array.buffer)));return{uuid:(this||p).uuid,
buffer:(this||p).array.buffer._uuid,type:(this||p).array.constructor.name,stride:(this||p).stride}}});var UB=new nc;Object.defineProperties(hz.prototype,{count:{get:function(){return(this||p).data.count}},array:{get:function(){return(this||p).data.array}},needsUpdate:{set:function(u){(this||p).data.needsUpdate=u}}});Object.assign(hz.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(u){for(var z=0,t=(this||p).data.count;z<t;z++)UB.x=this.getX(z),UB.y=this.getY(z),UB.z=this.getZ(z),UB.applyMatrix4(u),
this.setXYZ(z,UB.x,UB.y,UB.z);return this||p},setX:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset]=z;return this||p},setY:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]=z;return this||p},setZ:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+2]=z;return this||p},setW:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]=z;return this||p},getX:function(u){return(this||p).data.array[u*(this||
p).data.stride+(this||p).offset]},getY:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]},getZ:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+2]},getW:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]},setXY:function(u,z,t){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;return this||p},setXYZ:function(u,z,t,x){u=u*(this||p).data.stride+(this||p).offset;
(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=x;return this||p},setXYZW:function(u,z,t,x,C){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=x;(this||p).data.array[u+3]=C;return this||p},clone:function(u){if(void 0===u){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=
z*(this||p).data.stride+(this||p).offset,x=0;x<(this||p).itemSize;x++)u.push((this||p).data.array[t+x]);return new X(new (this||p).array.constructor(u),(this||p).itemSize,(this||p).normalized)}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&(u.interleavedBuffers[(this||p).data.uuid]=(this||p).data.clone(u));return new hz(u.interleavedBuffers[(this||p).data.uuid],(this||p).itemSize,(this||p).offset,(this||p).normalized)},toJSON:function(u){if(void 0===
u){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=z*(this||p).data.stride+(this||p).offset,x=0;x<(this||p).itemSize;x++)u.push((this||p).data.array[t+x]);return{itemSize:(this||p).itemSize,type:(this||p).array.constructor.name,array:u,normalized:(this||p).normalized}}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&
(u.interleavedBuffers[(this||p).data.uuid]=(this||p).data.toJSON(u));return{isInterleavedBufferAttribute:!0,itemSize:(this||p).itemSize,data:(this||p).data.uuid,offset:(this||p).offset,normalized:(this||p).normalized}}});iz.prototype=Object.create(M.prototype);iz.prototype.constructor=iz;iz.prototype.isSpriteMaterial=!0;iz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).rotation=u.rotation;(this||
p).sizeAttenuation=u.sizeAttenuation;return this||p};var oE,tI=new nc,KE=new nc,LE=new nc,pE=new Xe,aI=new Xe,f$=new fj,LO=new nc,uI=new nc,MO=new nc,M$=new Xe,TW=new Xe,N$=new Xe;$H.prototype=Object.assign(Object.create(E.prototype),{constructor:$H,isSprite:!0,raycast:function(u,z){null===u.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');KE.setFromMatrixScale((this||p).matrixWorld);f$.copy(u.camera.matrixWorld);(this||p).modelViewMatrix.multiplyMatrices(u.camera.matrixWorldInverse,
(this||p).matrixWorld);LE.setFromMatrixPosition((this||p).modelViewMatrix);u.camera.isPerspectiveCamera&&!1===(this||p).material.sizeAttenuation&&KE.multiplyScalar(-LE.z);var t=(this||p).material.rotation;if(0!==t){var x=Math.cos(t);var C=Math.sin(t)}t=(this||p).center;ZN(LO.set(-.5,-.5,0),LE,t,KE,C,x);ZN(uI.set(.5,-.5,0),LE,t,KE,C,x);ZN(MO.set(.5,.5,0),LE,t,KE,C,x);M$.set(0,0);TW.set(1,0);N$.set(1,1);var G=u.ray.intersectTriangle(LO,uI,MO,!1,tI);if(null===G&&(ZN(uI.set(-.5,.5,0),LE,t,KE,C,x),TW.set(0,
1),G=u.ray.intersectTriangle(LO,MO,uI,!1,tI),null===G))return;C=u.ray.origin.distanceTo(tI);C<u.near||C>u.far||z.push({distance:C,point:tI.clone(),uv:au.getUV(tI,LO,uI,MO,M$,TW,N$,new Xe),face:null,object:this||p})},copy:function(u){E.prototype.copy.call(this||p,u);void 0!==u.center&&(this||p).center.copy(u.center);(this||p).material=u.material;return this||p}});var NO=new nc,O$=new nc;bI.prototype=Object.assign(Object.create(E.prototype),{constructor:bI,isLOD:!0,copy:function(u){E.prototype.copy.call(this||
p,u,!1);for(var z=u.levels,t=0,x=z.length;t<x;t++){var C=z[t];this.addLevel(C.object.clone(),C.distance)}(this||p).autoUpdate=u.autoUpdate;return this||p},addLevel:function(u,z){void 0===z&&(z=0);z=Math.abs(z);var t=(this||p).levels,x;for(x=0;x<t.length&&!(z<t[x].distance);x++);t.splice(x,0,{distance:z,object:u});this.add(u);return this||p},getCurrentLevel:function(){return(this||p)._currentLevel},getObjectForDistance:function(u){var z=(this||p).levels;if(0<z.length){var t;var x=1;for(t=z.length;x<
t&&!(u<z[x].distance);x++);return z[x-1].object}return null},raycast:function(u,z){if(0<(this||p).levels.length){NO.setFromMatrixPosition((this||p).matrixWorld);var t=u.ray.origin.distanceTo(NO);this.getObjectForDistance(t).raycast(u,z)}},update:function(u){var z=(this||p).levels;if(1<z.length){NO.setFromMatrixPosition(u.matrixWorld);O$.setFromMatrixPosition((this||p).matrixWorld);u=NO.distanceTo(O$)/u.zoom;z[0].object.visible=!0;var t;var x=1;for(t=z.length;x<t;x++)if(u>=z[x].distance)z[x-1].object.visible=
!1,z[x].object.visible=!0;else break;for((this||p)._currentLevel=x-1;x<t;x++)z[x].object.visible=!1}},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);!1===(this||p).autoUpdate&&(u.object.autoUpdate=!1);u.object.levels=[];for(var z=(this||p).levels,t=0,x=z.length;t<x;t++){var C=z[t];u.object.levels.push({object:C.object.uuid,distance:C.distance})}return u}});$N.prototype=Object.assign(Object.create(hb.prototype),{constructor:$N,isSkinnedMesh:!0,copy:function(u){hb.prototype.copy.call(this||
p,u);(this||p).bindMode=u.bindMode;(this||p).bindMatrix.copy(u.bindMatrix);(this||p).bindMatrixInverse.copy(u.bindMatrixInverse);(this||p).skeleton=u.skeleton;return this||p},bind:function(u,z){(this||p).skeleton=u;void 0===z&&(this.updateMatrixWorld(!0),(this||p).skeleton.calculateInverses(),z=(this||p).matrixWorld);(this||p).bindMatrix.copy(z);(this||p).bindMatrixInverse.getInverse(z)},pose:function(){(this||p).skeleton.pose()},normalizeSkinWeights:function(){for(var u=new Rk,z=(this||p).geometry.attributes.skinWeight,
t=0,x=z.count;t<x;t++){u.x=z.getX(t);u.y=z.getY(t);u.z=z.getZ(t);u.w=z.getW(t);var C=1/u.manhattanLength();Infinity!==C?u.multiplyScalar(C):u.set(1,0,0,0);z.setXYZW(t,u.x,u.y,u.z,u.w)}},updateMatrixWorld:function(u){hb.prototype.updateMatrixWorld.call(this||p,u);"attached"===(this||p).bindMode?(this||p).bindMatrixInverse.getInverse((this||p).matrixWorld):"detached"===(this||p).bindMode?(this||p).bindMatrixInverse.getInverse((this||p).bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+
(this||p).bindMode)},boneTransform:function(){var u=new nc,z=new Rk,t=new Rk,x=new nc,C=new fj;return function(G,L){var S=(this||p).skeleton,V=(this||p).geometry;z.fromBufferAttribute(V.attributes.skinIndex,G);t.fromBufferAttribute(V.attributes.skinWeight,G);u.fromBufferAttribute(V.attributes.position,G).applyMatrix4((this||p).bindMatrix);L.set(0,0,0);for(G=0;4>G;G++)if(V=t.getComponent(G),0!==V){var Z=z.getComponent(G);C.multiplyMatrices(S.bones[Z].matrixWorld,S.boneInverses[Z]);L.addScaledVector(x.copy(u).applyMatrix4(C),
V)}return L.applyMatrix4((this||p).bindMatrixInverse)}}()});var P$=new fj,Era=new fj;Object.assign(aO.prototype,{calculateInverses:function(){(this||p).boneInverses=[];for(var u=0,z=(this||p).bones.length;u<z;u++){var t=new fj;(this||p).bones[u]&&t.getInverse((this||p).bones[u].matrixWorld);(this||p).boneInverses.push(t)}},pose:function(){for(var u=0,z=(this||p).bones.length;u<z;u++){var t=(this||p).bones[u];t&&t.matrixWorld.getInverse((this||p).boneInverses[u])}u=0;for(z=(this||p).bones.length;u<
z;u++)if(t=(this||p).bones[u])t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale)},update:function(){for(var u=(this||p).bones,z=(this||p).boneInverses,t=(this||p).boneMatrices,x=(this||p).boneTexture,C=0,G=u.length;C<G;C++)P$.multiplyMatrices(u[C]?u[C].matrixWorld:Era,z[C]),P$.toArray(t,16*C);void 0!==x&&(x.needsUpdate=!0)},clone:function(){return new aO((this||p).bones,
(this||p).boneInverses)},getBoneByName:function(u){for(var z=0,t=(this||p).bones.length;z<t;z++){var x=(this||p).bones[z];if(x.name===u)return x}},dispose:function(){(this||p).boneTexture&&((this||p).boneTexture.dispose(),(this||p).boneTexture=void 0)}});eW.prototype=Object.assign(Object.create(E.prototype),{constructor:eW,isBone:!0});var Q$=new fj,R$=new fj,OO=[],vI=new hb;bO.prototype=Object.assign(Object.create(hb.prototype),{constructor:bO,isInstancedMesh:!0,copy:function(u){hb.prototype.copy.call(this||
p,u);(this||p).instanceMatrix.copy(u.instanceMatrix);(this||p).count=u.count;return this||p},setColorAt:function(u,z){null===(this||p).instanceColor&&((this||p).instanceColor=new X(new Float32Array(3*(this||p).count),3));z.toArray((this||p).instanceColor.array,3*u)},getMatrixAt:function(u,z){z.fromArray((this||p).instanceMatrix.array,16*u)},raycast:function(u,z){var t=(this||p).matrixWorld,x=(this||p).count;vI.geometry=(this||p).geometry;vI.material=(this||p).material;if(void 0!==vI.material)for(var C=
0;C<x;C++){this.getMatrixAt(C,Q$);R$.multiplyMatrices(t,Q$);vI.matrixWorld=R$;vI.raycast(u,OO);for(var G=0,L=OO.length;G<L;G++){var S=OO[G];S.instanceId=C;S.object=this||p;z.push(S)}OO.length=0}},setMatrixAt:function(u,z){z.toArray((this||p).instanceMatrix.array,16*u)},updateMorphTargets:function(){}});Ml.prototype=Object.create(M.prototype);Ml.prototype.constructor=Ml;Ml.prototype.isLineBasicMaterial=!0;Ml.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);
(this||p).linewidth=u.linewidth;(this||p).linecap=u.linecap;(this||p).linejoin=u.linejoin;(this||p).morphTargets=u.morphTargets;return this||p};var S$=new nc,T$=new nc,U$=new fj,PO=new zE,wI=new ix;Xs.prototype=Object.assign(Object.create(E.prototype),{constructor:Xs,isLine:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=
u.attributes.position,t=[0],x=1,C=z.count;x<C;x++)S$.fromBufferAttribute(z,x-1),T$.fromBufferAttribute(z,x),t[x]=t[x-1],t[x]+=S$.distanceTo(T$);u.setAttribute("lineDistance",new U(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,u[0]=0,t=1,x=z.length;t<x;t++)u[t]=u[t-1],u[t]+=z[t-1].distanceTo(z[t]);return this||p},raycast:function(u,z){var t=(this||p).geometry,x=(this||
p).matrixWorld,C=u.params.Line.threshold;null===t.boundingSphere&&t.computeBoundingSphere();wI.copy(t.boundingSphere);wI.applyMatrix4(x);wI.radius+=C;if(!1!==u.ray.intersectsSphere(wI)){U$.getInverse(x);PO.copy(u.ray).applyMatrix4(U$);x=C/(((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/3);x*=x;var G=new nc,L=new nc;C=new nc;var S=new nc,V=(this||p).isLineSegments?2:1;if(t.isBufferGeometry){var Z=t.index;t=t.attributes.position;if(null!==Z){Z=Z.array;for(var ja=0,ta=Z.length-1;ja<ta;ja+=V){var Ha=
Z[ja+1];G.fromBufferAttribute(t,Z[ja]);L.fromBufferAttribute(t,Ha);PO.distanceSqToSegment(G,L,S,C)>x||(S.applyMatrix4((this||p).matrixWorld),Ha=u.ray.origin.distanceTo(S),Ha<u.near||Ha>u.far||z.push({distance:Ha,point:C.clone().applyMatrix4((this||p).matrixWorld),index:ja,face:null,faceIndex:null,object:this||p}))}}else for(Z=0,ja=t.count-1;Z<ja;Z+=V)G.fromBufferAttribute(t,Z),L.fromBufferAttribute(t,Z+1),PO.distanceSqToSegment(G,L,S,C)>x||(S.applyMatrix4((this||p).matrixWorld),ta=u.ray.origin.distanceTo(S),
ta<u.near||ta>u.far||z.push({distance:ta,point:C.clone().applyMatrix4((this||p).matrixWorld),index:Z,face:null,faceIndex:null,object:this||p}))}else if(t.isGeometry)for(G=t.vertices,L=G.length,t=0;t<L-1;t+=V)PO.distanceSqToSegment(G[t],G[t+1],S,C)>x||(S.applyMatrix4((this||p).matrixWorld),Z=u.ray.origin.distanceTo(S),Z<u.near||Z>u.far||z.push({distance:Z,point:C.clone().applyMatrix4((this||p).matrixWorld),index:t,face:null,faceIndex:null,object:this||p}))}},updateMorphTargets:function(){var u=(this||
p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});var QO=new nc,
RO=new nc;Vp.prototype=Object.assign(Object.create(Xs.prototype),{constructor:Vp,isLineSegments:!0,computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=u.attributes.position,t=[],x=0,C=z.count;x<C;x+=2)QO.fromBufferAttribute(z,x),RO.fromBufferAttribute(z,x+1),t[x]=0===x?0:t[x-1],t[x+1]=t[x]+QO.distanceTo(RO);u.setAttribute("lineDistance",new U(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,t=0,x=z.length;t<x;t+=2)QO.copy(z[t]),RO.copy(z[t+1]),u[t]=0===t?0:u[t-1],u[t+1]=u[t]+QO.distanceTo(RO);return this||p}});cO.prototype=Object.assign(Object.create(Xs.prototype),{constructor:cO,isLineLoop:!0});du.prototype=Object.create(M.prototype);du.prototype.constructor=du;du.prototype.isPointsMaterial=!0;du.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;
(this||p).size=u.size;(this||p).sizeAttenuation=u.sizeAttenuation;(this||p).morphTargets=u.morphTargets;return this||p};var V$=new fj,gW=new zE,xI=new ix,SO=new nc;qE.prototype=Object.assign(Object.create(E.prototype),{constructor:qE,isPoints:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},raycast:function(u,z){var t=(this||p).geometry,x=(this||p).matrixWorld,C=u.params.Points.threshold;null===t.boundingSphere&&t.computeBoundingSphere();
xI.copy(t.boundingSphere);xI.applyMatrix4(x);xI.radius+=C;if(!1!==u.ray.intersectsSphere(xI))if(V$.getInverse(x),gW.copy(u.ray).applyMatrix4(V$),C/=((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/3,C*=C,t.isBufferGeometry){var G=t.index;t=t.attributes.position;if(null!==G){G=G.array;for(var L=0,S=G.length;L<S;L++){var V=G[L];SO.fromBufferAttribute(t,V);fW(SO,V,C,x,u,z,this||p)}}else for(G=0,L=t.count;G<L;G++)SO.fromBufferAttribute(t,G),fW(SO,G,C,x,u,z,this||p)}else for(t=t.vertices,G=0,L=
t.length;G<L;G++)fW(t[G],G,C,x,u,z,this||p)},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});
hW.prototype=Object.assign(Object.create(r.prototype),{constructor:hW,clone:function(){return(new (this||p).constructor((this||p).image)).copy(this||p)},isVideoTexture:!0,update:function(){var u=(this||p).image;!1==="requestVideoFrameCallback"in u&&u.readyState>=u.HAVE_CURRENT_DATA&&((this||p).needsUpdate=!0)}});rE.prototype=Object.create(r.prototype);rE.prototype.constructor=rE;rE.prototype.isCompressedTexture=!0;cI.prototype=Object.create(r.prototype);cI.prototype.constructor=cI;cI.prototype.isCanvasTexture=
!0;dI.prototype=Object.create(r.prototype);dI.prototype.constructor=dI;dI.prototype.isDepthTexture=!0;var ora=0,Uv=new fj,UW=new E,TO=new nc;Sk.prototype=Object.assign(Object.create(e.prototype),{constructor:Sk,isGeometry:!0,applyMatrix4:function(u){for(var z=(new Up).getNormalMatrix(u),t=0,x=(this||p).vertices.length;t<x;t++)(this||p).vertices[t].applyMatrix4(u);u=0;for(t=(this||p).faces.length;u<t;u++){x=(this||p).faces[u];x.normal.applyMatrix3(z).normalize();for(var C=0,G=x.vertexNormals.length;C<
G;C++)x.vertexNormals[C].applyMatrix3(z).normalize()}null!==(this||p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&this.computeBoundingSphere();(this||p).verticesNeedUpdate=!0;(this||p).normalsNeedUpdate=!0;return this||p},rotateX:function(u){Uv.makeRotationX(u);this.applyMatrix4(Uv);return this||p},rotateY:function(u){Uv.makeRotationY(u);this.applyMatrix4(Uv);return this||p},rotateZ:function(u){Uv.makeRotationZ(u);this.applyMatrix4(Uv);return this||p},translate:function(u,
z,t){Uv.makeTranslation(u,z,t);this.applyMatrix4(Uv);return this||p},scale:function(u,z,t){Uv.makeScale(u,z,t);this.applyMatrix4(Uv);return this||p},lookAt:function(u){UW.lookAt(u);UW.updateMatrix();this.applyMatrix4(UW.matrix);return this||p},fromBufferGeometry:function(u){function z(db,Ya,vb,sb){var Qc=void 0===S?[]:[t.colors[db].clone(),t.colors[Ya].clone(),t.colors[vb].clone()],zc=void 0===L?[]:[(new nc).fromBufferAttribute(L,db),(new nc).fromBufferAttribute(L,Ya),(new nc).fromBufferAttribute(L,
vb)];sb=new UH(db,Ya,vb,zc,Qc,sb);t.faces.push(sb);void 0!==V&&t.faceVertexUvs[0].push([(new Xe).fromBufferAttribute(V,db),(new Xe).fromBufferAttribute(V,Ya),(new Xe).fromBufferAttribute(V,vb)]);void 0!==Z&&t.faceVertexUvs[1].push([(new Xe).fromBufferAttribute(Z,db),(new Xe).fromBufferAttribute(Z,Ya),(new Xe).fromBufferAttribute(Z,vb)])}var t=this||p,x=null!==u.index?u.index:void 0,C=u.attributes;if(void 0===C.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),
this||p;var G=C.position,L=C.normal,S=C.color,V=C.uv,Z=C.uv2;void 0!==Z&&((this||p).faceVertexUvs[1]=[]);for(C=0;C<G.count;C++)t.vertices.push((new nc).fromBufferAttribute(G,C)),void 0!==S&&t.colors.push((new rg).fromBufferAttribute(S,C));C=u.groups;if(0<C.length)for(G=0;G<C.length;G++){var ja=C[G],ta=ja.start,Ha=ta;for(ta+=ja.count;Ha<ta;Ha+=3)void 0!==x?z(x.getX(Ha),x.getX(Ha+1),x.getX(Ha+2),ja.materialIndex):z(Ha,Ha+1,Ha+2,ja.materialIndex)}else if(void 0!==x)for(C=0;C<x.count;C+=3)z(x.getX(C),
x.getX(C+1),x.getX(C+2));else for(x=0;x<G.count;x+=3)z(x,x+1,x+2);this.computeFaceNormals();null!==u.boundingBox&&((this||p).boundingBox=u.boundingBox.clone());null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());return this||p},center:function(){this.computeBoundingBox();(this||p).boundingBox.getCenter(TO).negate();this.translate(TO.x,TO.y,TO.z);return this||p},normalize:function(){this.computeBoundingSphere();var u=(this||p).boundingSphere.center,z=(this||p).boundingSphere.radius;
z=0===z?1:1/z;var t=new fj;t.set(z,0,0,-z*u.x,0,z,0,-z*u.y,0,0,z,-z*u.z,0,0,0,1);this.applyMatrix4(t);return this||p},computeFaceNormals:function(){for(var u=new nc,z=new nc,t=0,x=(this||p).faces.length;t<x;t++){var C=(this||p).faces[t],G=(this||p).vertices[C.a],L=(this||p).vertices[C.b];u.subVectors((this||p).vertices[C.c],L);z.subVectors(G,L);u.cross(z);u.normalize();C.normal.copy(u)}},computeVertexNormals:function(u){void 0===u&&(u=!0);for(var z=Array((this||p).vertices.length),t=0,x=(this||p).vertices.length;t<
x;t++)z[t]=new nc;if(u){u=new nc;t=new nc;x=0;for(var C=(this||p).faces.length;x<C;x++){var G=(this||p).faces[x],L=(this||p).vertices[G.a],S=(this||p).vertices[G.b];u.subVectors((this||p).vertices[G.c],S);t.subVectors(L,S);u.cross(t);z[G.a].add(u);z[G.b].add(u);z[G.c].add(u)}}else for(this.computeFaceNormals(),u=0,t=(this||p).faces.length;u<t;u++)x=(this||p).faces[u],z[x.a].add(x.normal),z[x.b].add(x.normal),z[x.c].add(x.normal);u=0;for(t=(this||p).vertices.length;u<t;u++)z[u].normalize();u=0;for(t=
(this||p).faces.length;u<t;u++)x=(this||p).faces[u],C=x.vertexNormals,3===C.length?(C[0].copy(z[x.a]),C[1].copy(z[x.b]),C[2].copy(z[x.c])):(C[0]=z[x.a].clone(),C[1]=z[x.b].clone(),C[2]=z[x.c].clone());0<(this||p).faces.length&&((this||p).normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u],x=t.vertexNormals;3===x.length?(x[0].copy(t.normal),x[1].copy(t.normal),x[2].copy(t.normal)):(x[0]=t.normal.clone(),
x[1]=t.normal.clone(),x[2]=t.normal.clone())}0<(this||p).faces.length&&((this||p).normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone();t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(var x=0,C=t.vertexNormals.length;x<C;x++)t.__originalVertexNormals[x]?t.__originalVertexNormals[x].copy(t.vertexNormals[x]):t.__originalVertexNormals[x]=
t.vertexNormals[x].clone()}u=new Sk;u.faces=(this||p).faces;z=0;for(t=(this||p).morphTargets.length;z<t;z++){if(!(this||p).morphNormals[z]){(this||p).morphNormals[z]={};(this||p).morphNormals[z].faceNormals=[];(this||p).morphNormals[z].vertexNormals=[];x=(this||p).morphNormals[z].faceNormals;C=(this||p).morphNormals[z].vertexNormals;for(var G=0,L=(this||p).faces.length;G<L;G++){var S=new nc,V={a:new nc,b:new nc,c:new nc};x.push(S);C.push(V)}}x=(this||p).morphNormals[z];u.vertices=(this||p).morphTargets[z].vertices;
u.computeFaceNormals();u.computeVertexNormals();C=0;for(G=(this||p).faces.length;C<G;C++)L=(this||p).faces[C],S=x.vertexNormals[C],x.faceNormals[C].copy(L.normal),S.a.copy(L.vertexNormals[0]),S.b.copy(L.vertexNormals[1]),S.c.copy(L.vertexNormals[2])}u=0;for(z=(this||p).faces.length;u<z;u++)t=(this||p).faces[u],t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||p).boundingBox=new Sv);(this||p).boundingBox.setFromPoints((this||
p).vertices)},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new ix);(this||p).boundingSphere.setFromPoints((this||p).vertices)},merge:function(u,z,t){if(u&&u.isGeometry){var x,C=(this||p).vertices.length,G=(this||p).vertices,L=u.vertices,S=(this||p).faces,V=u.faces,Z=(this||p).colors,ja=u.colors;void 0===t&&(t=0);void 0!==z&&(x=(new Up).getNormalMatrix(z));for(var ta=0,Ha=L.length;ta<Ha;ta++){var db=L[ta].clone();void 0!==z&&db.applyMatrix4(z);G.push(db)}z=
0;for(G=ja.length;z<G;z++)Z.push(ja[z].clone());Z=0;for(ja=V.length;Z<ja;Z++){z=V[Z];Ha=z.vertexNormals;G=z.vertexColors;L=new UH(z.a+C,z.b+C,z.c+C);L.normal.copy(z.normal);void 0!==x&&L.normal.applyMatrix3(x).normalize();db=0;for(var Ya=Ha.length;db<Ya;db++)ta=Ha[db].clone(),void 0!==x&&ta.applyMatrix3(x).normalize(),L.vertexNormals.push(ta);L.color.copy(z.color);Ha=0;for(db=G.length;Ha<db;Ha++)ta=G[Ha],L.vertexColors.push(ta.clone());L.materialIndex=z.materialIndex+t;S.push(L)}t=0;for(x=u.faceVertexUvs.length;t<
x;t++)for(C=u.faceVertexUvs[t],void 0===(this||p).faceVertexUvs[t]&&((this||p).faceVertexUvs[t]=[]),S=0,V=C.length;S<V;S++){Z=C[S];ja=[];z=0;for(G=Z.length;z<G;z++)ja.push(Z[z].clone());(this||p).faceVertexUvs[t].push(ja)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",u)},mergeMesh:function(u){u&&u.isMesh?(u.matrixAutoUpdate&&u.updateMatrix(),this.merge(u.geometry,u.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",
u)},mergeVertices:function(){for(var u={},z=[],t=[],x=Math.pow(10,4),C=0,G=(this||p).vertices.length;C<G;C++){var L=(this||p).vertices[C];L=Math.round(L.x*x)+"_"+Math.round(L.y*x)+"_"+Math.round(L.z*x);void 0===u[L]?(u[L]=C,z.push((this||p).vertices[C]),t[C]=z.length-1):t[C]=t[u[L]]}u=[];x=0;for(C=(this||p).faces.length;x<C;x++)for(G=(this||p).faces[x],G.a=t[G.a],G.b=t[G.b],G.c=t[G.c],G=[G.a,G.b,G.c],L=0;3>L;L++)if(G[L]===G[(L+1)%3]){u.push(x);break}for(t=u.length-1;0<=t;t--)for(x=u[t],(this||p).faces.splice(x,
1),C=0,G=(this||p).faceVertexUvs.length;C<G;C++)(this||p).faceVertexUvs[C].splice(x,1);t=(this||p).vertices.length-z.length;(this||p).vertices=z;return t},setFromPoints:function(u){(this||p).vertices=[];for(var z=0,t=u.length;z<t;z++){var x=u[z];(this||p).vertices.push(new nc(x.x,x.y,x.z||0))}return this||p},sortFacesByMaterialIndex:function(){for(var u=(this||p).faces,z=u.length,t=0;t<z;t++)u[t]._id=t;u.sort(function(V,Z){return V.materialIndex-Z.materialIndex});t=(this||p).faceVertexUvs[0];var x=
(this||p).faceVertexUvs[1],C,G;t&&t.length===z&&(C=[]);x&&x.length===z&&(G=[]);for(var L=0;L<z;L++){var S=u[L]._id;C&&C.push(t[S]);G&&G.push(x[S])}C&&((this||p).faceVertexUvs[0]=C);G&&((this||p).faceVertexUvs[1]=G)},toJSON:function(){function u(kd,ud,Vd){return Vd?kd|1<<ud:kd&~(1<<ud)}function z(kd){var ud=kd.x.toString()+kd.y.toString()+kd.z.toString();if(void 0!==Z[ud])return Z[ud];Z[ud]=V.length/3;V.push(kd.x,kd.y,kd.z);return Z[ud]}function t(kd){var ud=kd.r.toString()+kd.g.toString()+kd.b.toString();
if(void 0!==ta[ud])return ta[ud];ta[ud]=ja.length;ja.push(kd.getHex());return ta[ud]}function x(kd){var ud=kd.x.toString()+kd.y.toString();if(void 0!==db[ud])return db[ud];db[ud]=Ha.length/2;Ha.push(kd.x,kd.y);return db[ud]}var C={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};C.uuid=(this||p).uuid;C.type=(this||p).type;""!==(this||p).name&&(C.name=(this||p).name);if(void 0!==(this||p).parameters){var G=(this||p).parameters,L;for(L in G)void 0!==G[L]&&(C[L]=G[L]);return C}G=[];
for(L=0;L<(this||p).vertices.length;L++){var S=(this||p).vertices[L];G.push(S.x,S.y,S.z)}L=[];var V=[],Z={},ja=[],ta={},Ha=[],db={};for(S=0;S<(this||p).faces.length;S++){var Ya=(this||p).faces[S],vb=void 0!==(this||p).faceVertexUvs[0][S],sb=0<Ya.normal.length(),Qc=0<Ya.vertexNormals.length,zc=1!==Ya.color.r||1!==Ya.color.g||1!==Ya.color.b,jd=0<Ya.vertexColors.length,Bc=0;Bc=u(Bc,0,0);Bc=u(Bc,1,!0);Bc=u(Bc,2,!1);Bc=u(Bc,3,vb);Bc=u(Bc,4,sb);Bc=u(Bc,5,Qc);Bc=u(Bc,6,zc);Bc=u(Bc,7,jd);L.push(Bc);L.push(Ya.a,
Ya.b,Ya.c);L.push(Ya.materialIndex);vb&&(vb=(this||p).faceVertexUvs[0][S],L.push(x(vb[0]),x(vb[1]),x(vb[2])));sb&&L.push(z(Ya.normal));Qc&&(sb=Ya.vertexNormals,L.push(z(sb[0]),z(sb[1]),z(sb[2])));zc&&L.push(t(Ya.color));jd&&(Ya=Ya.vertexColors,L.push(t(Ya[0]),t(Ya[1]),t(Ya[2])))}C.data={};C.data.vertices=G;C.data.normals=V;0<ja.length&&(C.data.colors=ja);0<Ha.length&&(C.data.uvs=[Ha]);C.data.faces=L;return C},clone:function(){return(new Sk).copy(this||p)},copy:function(u){(this||p).vertices=[];(this||
p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=[];(this||p).morphNormals=[];(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).name=u.name;for(var z=u.vertices,t=0,x=z.length;t<x;t++)(this||p).vertices.push(z[t].clone());z=u.colors;t=0;for(x=z.length;t<x;t++)(this||p).colors.push(z[t].clone());z=u.faces;t=0;for(x=z.length;t<x;t++)(this||p).faces.push(z[t].clone());z=0;
for(t=u.faceVertexUvs.length;z<t;z++){x=u.faceVertexUvs[z];void 0===(this||p).faceVertexUvs[z]&&((this||p).faceVertexUvs[z]=[]);for(var C=0,G=x.length;C<G;C++){for(var L=x[C],S=[],V=0,Z=L.length;V<Z;V++)S.push(L[V].clone());(this||p).faceVertexUvs[z].push(S)}}z=u.morphTargets;t=0;for(x=z.length;t<x;t++){C={};C.name=z[t].name;if(void 0!==z[t].vertices)for(C.vertices=[],G=0,L=z[t].vertices.length;G<L;G++)C.vertices.push(z[t].vertices[G].clone());if(void 0!==z[t].normals)for(C.normals=[],G=0,L=z[t].normals.length;G<
L;G++)C.normals.push(z[t].normals[G].clone());(this||p).morphTargets.push(C)}z=u.morphNormals;t=0;for(x=z.length;t<x;t++){C={};if(void 0!==z[t].vertexNormals)for(C.vertexNormals=[],G=0,L=z[t].vertexNormals.length;G<L;G++)S=z[t].vertexNormals[G],V={},V.a=S.a.clone(),V.b=S.b.clone(),V.c=S.c.clone(),C.vertexNormals.push(V);if(void 0!==z[t].faceNormals)for(C.faceNormals=[],G=0,L=z[t].faceNormals.length;G<L;G++)C.faceNormals.push(z[t].faceNormals[G].clone());(this||p).morphNormals.push(C)}z=u.skinWeights;
t=0;for(x=z.length;t<x;t++)(this||p).skinWeights.push(z[t].clone());z=u.skinIndices;t=0;for(x=z.length;t<x;t++)(this||p).skinIndices.push(z[t].clone());z=u.lineDistances;t=0;for(x=z.length;t<x;t++)(this||p).lineDistances.push(z[t]);z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).elementsNeedUpdate=u.elementsNeedUpdate;(this||p).verticesNeedUpdate=u.verticesNeedUpdate;(this||p).uvsNeedUpdate=u.uvsNeedUpdate;(this||
p).normalsNeedUpdate=u.normalsNeedUpdate;(this||p).colorsNeedUpdate=u.colorsNeedUpdate;(this||p).lineDistancesNeedUpdate=u.lineDistancesNeedUpdate;(this||p).groupsNeedUpdate=u.groupsNeedUpdate;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var VW=function(u){function z(t,x,C,G,L,S){var V=u.call(this||p)||this||p;V.type="BoxGeometry";V.parameters={width:t,height:x,depth:C,widthSegments:G,heightSegments:L,depthSegments:S};V.fromBufferGeometry(new VH(t,x,C,G,L,S));V.mergeVertices();
return V}g(z,u);return z}(Sk),WW=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="CircleBufferGeometry";L.parameters={radius:t,segments:x,thetaStart:C,thetaLength:G};t=t||1;x=void 0!==x?Math.max(3,x):8;C=void 0!==C?C:0;G=void 0!==G?G:2*Math.PI;var S=[],V=[],Z=[],ja=[],ta=new nc,Ha=new Xe;V.push(0,0,0);Z.push(0,0,1);ja.push(.5,.5);for(var db=0,Ya=3;db<=x;db++,Ya+=3){var vb=C+db/x*G;ta.x=t*Math.cos(vb);ta.y=t*Math.sin(vb);V.push(ta.x,ta.y,ta.z);Z.push(0,0,1);Ha.x=(V[Ya]/t+1)/2;
Ha.y=(V[Ya+1]/t+1)/2;ja.push(Ha.x,Ha.y)}for(t=1;t<=x;t++)S.push(t,t+1,0);L.setIndex(S);L.setAttribute("position",new U(V,3));L.setAttribute("normal",new U(Z,3));L.setAttribute("uv",new U(ja,2));return L}g(z,u);return z}(oa),W$=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="CircleGeometry";L.parameters={radius:t,segments:x,thetaStart:C,thetaLength:G};L.fromBufferGeometry(new WW(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Sk),yI=function(u){function z(t,x,C,G,L,S,V,
Z){function ja(kd){for(var ud=Qc,Vd=new Xe,Ad=new nc,gd=0,xd=!0===kd?t:x,jf=!0===kd?1:-1,Ae=1;Ae<=G;Ae++)Ya.push(0,jd*jf,0),vb.push(0,jf,0),sb.push(.5,.5),Qc++;Ae=Qc;for(var uf=0;uf<=G;uf++){var Ff=uf/G*Z+V,$f=Math.cos(Ff);Ff=Math.sin(Ff);Ad.x=xd*Ff;Ad.y=jd*jf;Ad.z=xd*$f;Ya.push(Ad.x,Ad.y,Ad.z);vb.push(0,jf,0);Vd.x=.5*$f+.5;Vd.y=.5*Ff*jf+.5;sb.push(Vd.x,Vd.y);Qc++}for(Vd=0;Vd<G;Vd++)Ad=ud+Vd,xd=Ae+Vd,!0===kd?db.push(xd,xd+1,Ad):db.push(xd+1,xd,Ad),gd+=3;Ha.addGroup(Bc,gd,!0===kd?1:2);Bc+=gd}var ta=
u.call(this||p)||this||p;ta.type="CylinderBufferGeometry";ta.parameters={radiusTop:t,radiusBottom:x,height:C,radialSegments:G,heightSegments:L,openEnded:S,thetaStart:V,thetaLength:Z};var Ha=l(ta);t=void 0!==t?t:1;x=void 0!==x?x:1;C=C||1;G=Math.floor(G)||8;L=Math.floor(L)||1;S=void 0!==S?S:!1;V=void 0!==V?V:0;Z=void 0!==Z?Z:2*Math.PI;var db=[],Ya=[],vb=[],sb=[],Qc=0,zc=[],jd=C/2,Bc=0;(function(){for(var kd=new nc,ud=new nc,Vd=0,Ad=(x-t)/C,gd=0;gd<=L;gd++){for(var xd=[],jf=gd/L,Ae=jf*(x-t)+t,uf=0;uf<=
G;uf++){var Ff=uf/G,$f=Ff*Z+V,gh=Math.sin($f);$f=Math.cos($f);ud.x=Ae*gh;ud.y=-jf*C+jd;ud.z=Ae*$f;Ya.push(ud.x,ud.y,ud.z);kd.set(gh,Ad,$f).normalize();vb.push(kd.x,kd.y,kd.z);sb.push(Ff,1-jf);xd.push(Qc++)}zc.push(xd)}for(kd=0;kd<G;kd++)for(ud=0;ud<L;ud++)Ad=zc[ud+1][kd],gd=zc[ud+1][kd+1],xd=zc[ud][kd+1],db.push(zc[ud][kd],Ad,xd),db.push(Ad,gd,xd),Vd+=6;Ha.addGroup(Bc,Vd,0);Bc+=Vd})();!1===S&&(0<t&&ja(!0),0<x&&ja(!1));ta.setIndex(db);ta.setAttribute("position",new U(Ya,3));ta.setAttribute("normal",
new U(vb,3));ta.setAttribute("uv",new U(sb,2));return ta}g(z,u);return z}(oa),XW=function(u){function z(t,x,C,G,L,S,V,Z){var ja=u.call(this||p)||this||p;ja.type="CylinderGeometry";ja.parameters={radiusTop:t,radiusBottom:x,height:C,radialSegments:G,heightSegments:L,openEnded:S,thetaStart:V,thetaLength:Z};ja.fromBufferGeometry(new yI(t,x,C,G,L,S,V,Z));ja.mergeVertices();return ja}g(z,u);return z}(Sk),X$=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p,0,t,x,C,G,L,S,V)||this||p;Z.type="ConeGeometry";
Z.parameters={radius:t,height:x,radialSegments:C,heightSegments:G,openEnded:L,thetaStart:S,thetaLength:V};return Z}g(z,u);return z}(XW),Y$=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p,0,t,x,C,G,L,S,V)||this||p;Z.type="ConeBufferGeometry";Z.parameters={radius:t,height:x,radialSegments:C,heightSegments:G,openEnded:L,thetaStart:S,thetaLength:V};return Z}g(z,u);return z}(yI),VB=function(u){function z(t,x,C,G){function L(Ha){ja.push(Ha.x,Ha.y,Ha.z)}function S(Ha,db){Ha*=3;db.x=t[Ha+0];db.y=
t[Ha+1];db.z=t[Ha+2]}function V(Ha,db,Ya,vb){0>vb&&1===Ha.x&&(ta[db]=Ha.x-1);0===Ya.x&&0===Ya.z&&(ta[db]=vb/2/Math.PI+.5)}var Z=u.call(this||p)||this||p;Z.type="PolyhedronBufferGeometry";Z.parameters={vertices:t,indices:x,radius:C,detail:G};C=C||1;G=G||0;var ja=[],ta=[];(function(Ha){for(var db=new nc,Ya=new nc,vb=new nc,sb=0;sb<x.length;sb+=3){S(x[sb+0],db);S(x[sb+1],Ya);S(x[sb+2],vb);for(var Qc=db,zc=Ya,jd=vb,Bc=Ha+1,kd=[],ud=0;ud<=Bc;ud++){kd[ud]=[];for(var Vd=Qc.clone().lerp(jd,ud/Bc),Ad=zc.clone().lerp(jd,
ud/Bc),gd=Bc-ud,xd=0;xd<=gd;xd++)kd[ud][xd]=0===xd&&ud===Bc?Vd:Vd.clone().lerp(Ad,xd/gd)}for(Qc=0;Qc<Bc;Qc++)for(zc=0;zc<2*(Bc-Qc)-1;zc++)jd=Math.floor(zc/2),0===zc%2?(L(kd[Qc][jd+1]),L(kd[Qc+1][jd]),L(kd[Qc][jd])):(L(kd[Qc][jd+1]),L(kd[Qc+1][jd+1]),L(kd[Qc+1][jd]))}})(G);(function(Ha){for(var db=new nc,Ya=0;Ya<ja.length;Ya+=3)db.x=ja[Ya+0],db.y=ja[Ya+1],db.z=ja[Ya+2],db.normalize().multiplyScalar(Ha),ja[Ya+0]=db.x,ja[Ya+1]=db.y,ja[Ya+2]=db.z})(C);(function(){for(var Ha=new nc,db=0;db<ja.length;db+=
3)Ha.x=ja[db+0],Ha.y=ja[db+1],Ha.z=ja[db+2],ta.push(Math.atan2(Ha.z,-Ha.x)/2/Math.PI+.5,1-(Math.atan2(-Ha.y,Math.sqrt(Ha.x*Ha.x+Ha.z*Ha.z))/Math.PI+.5));Ha=new nc;db=new nc;for(var Ya=new nc,vb=new nc,sb=new Xe,Qc=new Xe,zc=new Xe,jd=0,Bc=0;jd<ja.length;jd+=9,Bc+=6){Ha.set(ja[jd+0],ja[jd+1],ja[jd+2]);db.set(ja[jd+3],ja[jd+4],ja[jd+5]);Ya.set(ja[jd+6],ja[jd+7],ja[jd+8]);sb.set(ta[Bc+0],ta[Bc+1]);Qc.set(ta[Bc+2],ta[Bc+3]);zc.set(ta[Bc+4],ta[Bc+5]);vb.copy(Ha).add(db).add(Ya).divideScalar(3);var kd=
Math.atan2(vb.z,-vb.x);V(sb,Bc+0,Ha,kd);V(Qc,Bc+2,db,kd);V(zc,Bc+4,Ya,kd)}for(Ha=0;Ha<ta.length;Ha+=6)db=ta[Ha+0],Ya=ta[Ha+2],vb=ta[Ha+4],sb=Math.min(db,Ya,vb),.9<Math.max(db,Ya,vb)&&.1>sb&&(.2>db&&(ta[Ha+0]+=1),.2>Ya&&(ta[Ha+2]+=1),.2>vb&&(ta[Ha+4]+=1))})();Z.setAttribute("position",new U(ja,3));Z.setAttribute("normal",new U(ja.slice(),3));Z.setAttribute("uv",new U(ta,2));0===G?Z.computeVertexNormals():Z.normalizeNormals();return Z}g(z,u);return z}(oa),YW=function(u){function z(t,x){var C=(1+Math.sqrt(5))/
2;var G=1/C;C=u.call(this||p,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-G,-C,0,-G,C,0,G,-C,0,G,C,-G,-C,0,-G,C,0,G,-C,0,G,C,0,-C,0,-G,C,0,-G,-C,0,G,C,0,G],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,x)||this||p;C.type="DodecahedronBufferGeometry";C.parameters=
{radius:t,detail:x};return C}g(z,u);return z}(VB),Z$=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="DodecahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new YW(t,x));C.mergeVertices();return C}g(z,u);return z}(Sk),UO=new nc,VO=new nc,ZW=new nc,ME=new au,$W=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="EdgesGeometry";C.parameters={thresholdAngle:x};x=void 0!==x?x:1;t.isGeometry&&(t=(new oa).fromGeometry(t));var G=Math.pow(10,4),L=Math.cos(Xh.DEG2RAD*
x),S=t.getIndex();t=t.getAttribute("position");var V=S?S.count:t.count,Z=[0,0,0],ja=["a","b","c"],ta=Array(3);x={};for(var Ha=[],db=0;db<V;db+=3){S?(Z[0]=S.getX(db),Z[1]=S.getX(db+1),Z[2]=S.getX(db+2)):(Z[0]=db,Z[1]=db+1,Z[2]=db+2);var Ya=ME.a,vb=ME.b,sb=ME.c;Ya.fromBufferAttribute(t,Z[0]);vb.fromBufferAttribute(t,Z[1]);sb.fromBufferAttribute(t,Z[2]);ME.getNormal(ZW);ta[0]=Math.round(Ya.x*G)+","+Math.round(Ya.y*G)+","+Math.round(Ya.z*G);ta[1]=Math.round(vb.x*G)+","+Math.round(vb.y*G)+","+Math.round(vb.z*
G);ta[2]=Math.round(sb.x*G)+","+Math.round(sb.y*G)+","+Math.round(sb.z*G);if(ta[0]!==ta[1]&&ta[1]!==ta[2]&&ta[2]!==ta[0])for(Ya=0;3>Ya;Ya++){vb=(Ya+1)%3;var Qc=ta[Ya],zc=ta[vb];sb=ME[ja[Ya]];var jd=ME[ja[vb]],Bc=Qc+"_"+zc;Qc=zc+"_"+Qc;Qc in x&&x[Qc]?(ZW.dot(x[Qc].normal)<=L&&(Ha.push(sb.x,sb.y,sb.z),Ha.push(jd.x,jd.y,jd.z)),x[Qc]=null):Bc in x||(x[Bc]={index0:Z[Ya],index1:Z[vb],normal:ZW.clone()})}}for(var kd in x)x[kd]&&(G=x[kd],L=G.index1,UO.fromBufferAttribute(t,G.index0),VO.fromBufferAttribute(t,
L),Ha.push(UO.x,UO.y,UO.z),Ha.push(VO.x,VO.y,VO.z));C.setAttribute("position",new U(Ha,3));return C}g(z,u);return z}(oa),Fra={triangulate:function(u,z,t){t=t||2;var x=z&&z.length,C=x?z[0]*t:u.length,G=g$(u,0,C,t,!0),L=[];if(!G||G.next===G.prev)return L;var S;if(x){var V=t;x=[];var Z;var ja=0;for(Z=z.length;ja<Z;ja++){var ta=z[ja]*V;var Ha=ja<Z-1?z[ja+1]*V:u.length;ta=g$(u,ta,Ha,V,!1);ta===ta.next&&(ta.steiner=!0);x.push(sra(ta))}x.sort(qra);for(ja=0;ja<x.length;ja++){V=x[ja];z=G;if(z=rra(V,z))V=j$(z,
V),jz(z,z.next),jz(V,V.next);G=jz(G,G.next)}}if(u.length>80*t){var db=S=u[0];var Ya=x=u[1];for(V=t;V<C;V+=t)ja=u[V],z=u[V+1],ja<db&&(db=ja),z<Ya&&(Ya=z),ja>S&&(S=ja),z>x&&(x=z);S=Math.max(S-db,x-Ya);S=0!==S?1/S:0}fI(G,L,t,db,Ya,S);return L}},nx={area:function(u){for(var z=u.length,t=0,x=z-1,C=0;C<z;x=C++)t+=u[x].x*u[C].y-u[C].x*u[x].y;return.5*t},isClockWise:function(u){return 0>nx.area(u)},triangulateShape:function(u,z){var t=[],x=[],C=[];k$(u);l$(t,u);u=u.length;z.forEach(k$);for(var G=0;G<z.length;G++)x.push(u),
u+=z[G].length,l$(t,z[G]);z=Fra.triangulate(t,x);for(t=0;t<z.length;t+=3)C.push(z.slice(t,t+3));return C}},zI=function(u){function z(t,x){function C(ta){function Ha(Be,cg,oh){cg||console.error("THREE.ExtrudeGeometry: vec does not exist");return cg.clone().multiplyScalar(oh).add(Be)}function db(Be,cg,oh){var ch=Be.x-cg.x;var yj=Be.y-cg.y;var hj=oh.x-Be.x;var Ll=oh.y-Be.y,Lk=ch*ch+yj*yj;if(Math.abs(ch*Ll-yj*hj)>Number.EPSILON){var Iq=Math.sqrt(Lk),dx=Math.sqrt(hj*hj+Ll*Ll);Lk=cg.x-yj/Iq;cg=cg.y+ch/
Iq;Ll=((oh.x-Ll/dx-Lk)*Ll-(oh.y+hj/dx-cg)*hj)/(ch*Ll-yj*hj);hj=Lk+ch*Ll-Be.x;ch=cg+yj*Ll-Be.y;yj=hj*hj+ch*ch;if(2>=yj)return new Xe(hj,ch);yj=Math.sqrt(yj/2)}else Be=!1,ch>Number.EPSILON?hj>Number.EPSILON&&(Be=!0):ch<-Number.EPSILON?hj<-Number.EPSILON&&(Be=!0):Math.sign(yj)===Math.sign(Ll)&&(Be=!0),Be?(hj=-yj,yj=Math.sqrt(Lk)):(hj=ch,ch=yj,yj=Math.sqrt(Lk/2));return new Xe(hj/yj,ch/yj)}function Ya(Be,cg){for(var oh=Be.length;0<=--oh;){var ch=oh,yj=oh-1;0>yj&&(yj=Be.length-1);for(var hj=0,Ll=kd+2*
jf;hj<Ll;hj++){var Lk=$c*hj,Iq=$c*(hj+1),dx=cg+yj+Lk,ez=cg+yj+Iq;Iq=cg+ch+Iq;Qc(cg+ch+Lk);Qc(dx);Qc(Iq);Qc(dx);Qc(ez);Qc(Iq);Lk=S.length/3;Lk=uf.generateSideWallUV(L,S,Lk-6,Lk-3,Lk-2,Lk-1);zc(Lk[0]);zc(Lk[1]);zc(Lk[3]);zc(Lk[1]);zc(Lk[2]);zc(Lk[3])}}}function vb(Be,cg,oh){jd.push(Be);jd.push(cg);jd.push(oh)}function sb(Be,cg,oh){Qc(Be);Qc(cg);Qc(oh);Be=S.length/3;Be=uf.generateTopUV(L,S,Be-3,Be-2,Be-1);zc(Be[0]);zc(Be[1]);zc(Be[2])}function Qc(Be){S.push(jd[3*Be]);S.push(jd[3*Be+1]);S.push(jd[3*Be+
2])}function zc(Be){V.push(Be.x);V.push(Be.y)}var jd=[],Bc=void 0!==x.curveSegments?x.curveSegments:12,kd=void 0!==x.steps?x.steps:1,ud=void 0!==x.depth?x.depth:100,Vd=void 0!==x.bevelEnabled?x.bevelEnabled:!0,Ad=void 0!==x.bevelThickness?x.bevelThickness:6,gd=void 0!==x.bevelSize?x.bevelSize:Ad-2,xd=void 0!==x.bevelOffset?x.bevelOffset:0,jf=void 0!==x.bevelSegments?x.bevelSegments:3,Ae=x.extrudePath,uf=void 0!==x.UVGenerator?x.UVGenerator:Gra;void 0!==x.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),
ud=x.amount);var Ff=!1;if(Ae){var $f=Ae.getSpacedPoints(kd);Ff=!0;Vd=!1;var gh=Ae.computeFrenetFrames(kd,!1);var Qg=new nc;var Gi=new nc;var wh=new nc}Vd||(xd=gd=Ad=jf=0);ta=ta.extractPoints(Bc);Ae=ta.shape;var Xj=ta.holes;if(!nx.isClockWise(Ae))for(Ae=Ae.reverse(),ta=0,Bc=Xj.length;ta<Bc;ta++){var zk=Xj[ta];nx.isClockWise(zk)&&(Xj[ta]=zk.reverse())}var Kl=nx.triangulateShape(Ae,Xj),Ac=Ae;ta=0;for(Bc=Xj.length;ta<Bc;ta++)Ae=Ae.concat(Xj[ta]);var $c=Ae.length,Ee=Kl.length;ta=[];Bc=0;zk=Ac.length;for(var hd=
zk-1,Te=Bc+1;Bc<zk;Bc++,hd++,Te++)hd===zk&&(hd=0),Te===zk&&(Te=0),ta[Bc]=db(Ac[Bc],Ac[hd],Ac[Te]);Bc=[];zk=ta.concat();Te=0;for(var mf=Xj.length;Te<mf;Te++){var Lg=Xj[Te];hd=[];for(var Qf=0,Ph=Lg.length,Kh=Ph-1,ii=Qf+1;Qf<Ph;Qf++,Kh++,ii++)Kh===Ph&&(Kh=0),ii===Ph&&(ii=0),hd[Qf]=db(Lg[Qf],Lg[Kh],Lg[ii]);Bc.push(hd);zk=zk.concat(hd)}for(Te=0;Te<jf;Te++){hd=Te/jf;mf=Ad*Math.cos(hd*Math.PI/2);Lg=gd*Math.sin(hd*Math.PI/2)+xd;hd=0;for(Qf=Ac.length;hd<Qf;hd++)Ph=Ha(Ac[hd],ta[hd],Lg),vb(Ph.x,Ph.y,-mf);Qf=
0;for(Ph=Xj.length;Qf<Ph;Qf++){Kh=Xj[Qf];hd=Bc[Qf];ii=0;for(var Yh=Kh.length;ii<Yh;ii++){var yk=Ha(Kh[ii],hd[ii],Lg);vb(yk.x,yk.y,-mf)}}}hd=gd+xd;for(Te=0;Te<$c;Te++)mf=Vd?Ha(Ae[Te],zk[Te],hd):Ae[Te],Ff?(Gi.copy(gh.normals[0]).multiplyScalar(mf.x),Qg.copy(gh.binormals[0]).multiplyScalar(mf.y),wh.copy($f[0]).add(Gi).add(Qg),vb(wh.x,wh.y,wh.z)):vb(mf.x,mf.y,0);for(Te=1;Te<=kd;Te++)for(mf=0;mf<$c;mf++)Lg=Vd?Ha(Ae[mf],zk[mf],hd):Ae[mf],Ff?(Gi.copy(gh.normals[Te]).multiplyScalar(Lg.x),Qg.copy(gh.binormals[Te]).multiplyScalar(Lg.y),
wh.copy($f[Te]).add(Gi).add(Qg),vb(wh.x,wh.y,wh.z)):vb(Lg.x,Lg.y,ud/kd*Te);for(gh=jf-1;0<=gh;gh--){Gi=gh/jf;Qg=Ad*Math.cos(Gi*Math.PI/2);Gi=gd*Math.sin(Gi*Math.PI/2)+xd;wh=0;for(Ae=Ac.length;wh<Ae;wh++)zk=Ha(Ac[wh],ta[wh],Gi),vb(zk.x,zk.y,ud+Qg);wh=0;for(Ae=Xj.length;wh<Ae;wh++)for(zk=Xj[wh],hd=Bc[wh],Te=0,mf=zk.length;Te<mf;Te++)Lg=Ha(zk[Te],hd[Te],Gi),Ff?vb(Lg.x,Lg.y+$f[kd-1].y,$f[kd-1].x+Qg):vb(Lg.x,Lg.y,ud+Qg)}(function(){var Be=S.length/3;if(Vd){for(var cg=0*$c,oh=0;oh<Ee;oh++){var ch=Kl[oh];
sb(ch[2]+cg,ch[1]+cg,ch[0]+cg)}cg=$c*(kd+2*jf);for(oh=0;oh<Ee;oh++)ch=Kl[oh],sb(ch[0]+cg,ch[1]+cg,ch[2]+cg)}else{for(cg=0;cg<Ee;cg++)oh=Kl[cg],sb(oh[2],oh[1],oh[0]);for(cg=0;cg<Ee;cg++)oh=Kl[cg],sb(oh[0]+$c*kd,oh[1]+$c*kd,oh[2]+$c*kd)}L.addGroup(Be,S.length/3-Be,0)})();(function(){var Be=S.length/3,cg=0;Ya(Ac,cg);cg+=Ac.length;for(var oh=0,ch=Xj.length;oh<ch;oh++){var yj=Xj[oh];Ya(yj,cg);cg+=yj.length}L.addGroup(Be,S.length/3-Be,1)})()}var G=u.call(this||p)||this||p;G.type="ExtrudeBufferGeometry";
G.parameters={shapes:t,options:x};t=Array.isArray(t)?t:[t];for(var L=l(G),S=[],V=[],Z=0,ja=t.length;Z<ja;Z++)C(t[Z]);G.setAttribute("position",new U(S,3));G.setAttribute("uv",new U(V,2));G.computeVertexNormals();return G}g(z,u);z.prototype.toJSON=function(){var t=oa.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes,C=(this||p).parameters.options;t.shapes=[];if(Array.isArray(x))for(var G=0,L=x.length;G<L;G++)t.shapes.push(x[G].uuid);else t.shapes.push(x.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=
C.extrudePath.toJSON());return t};return z}(oa),Gra={generateTopUV:function(u,z,t,x,C){u=z[3*x];x=z[3*x+1];var G=z[3*C];C=z[3*C+1];return[new Xe(z[3*t],z[3*t+1]),new Xe(u,x),new Xe(G,C)]},generateSideWallUV:function(u,z,t,x,C,G){u=z[3*t];var L=z[3*t+1];t=z[3*t+2];var S=z[3*x],V=z[3*x+1];x=z[3*x+2];var Z=z[3*C],ja=z[3*C+1];C=z[3*C+2];var ta=z[3*G],Ha=z[3*G+1];z=z[3*G+2];return.01>Math.abs(L-V)?[new Xe(u,1-t),new Xe(S,1-x),new Xe(Z,1-C),new Xe(ta,1-z)]:[new Xe(L,1-t),new Xe(V,1-x),new Xe(ja,1-C),new Xe(Ha,
1-z)]}},aX=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="ExtrudeGeometry";C.parameters={shapes:t,options:x};C.fromBufferGeometry(new zI(t,x));C.mergeVertices();return C}g(z,u);z.prototype.toJSON=function(){var t=u.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes,C=(this||p).parameters.options;t.shapes=[];if(Array.isArray(x))for(var G=0,L=x.length;G<L;G++)t.shapes.push(x[G].uuid);else t.shapes.push(x.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=C.extrudePath.toJSON());
return t};return z}(Sk),bX=function(u){function z(t,x){var C=(1+Math.sqrt(5))/2;C=u.call(this||p,[-1,C,0,1,C,0,-1,-C,0,1,-C,0,0,-1,C,0,1,C,0,-1,-C,0,1,-C,C,0,-1,C,0,1,-C,0,-1,-C,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,x)||this||p;C.type="IcosahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(VB),$$=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="IcosahedronGeometry";
C.parameters={radius:t,detail:x};C.fromBufferGeometry(new bX(t,x));C.mergeVertices();return C}g(z,u);return z}(Sk),cX=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="LatheBufferGeometry";L.parameters={points:t,segments:x,phiStart:C,phiLength:G};x=Math.floor(x)||12;C=C||0;G=G||2*Math.PI;G=Xh.clamp(G,0,2*Math.PI);for(var S=[],V=[],Z=[],ja=1/x,ta=new nc,Ha=new Xe,db=0;db<=x;db++){var Ya=C+db*ja*G,vb=Math.sin(Ya);Ya=Math.cos(Ya);for(var sb=0;sb<=t.length-1;sb++)ta.x=t[sb].x*vb,
ta.y=t[sb].y,ta.z=t[sb].x*Ya,V.push(ta.x,ta.y,ta.z),Ha.x=db/x,Ha.y=sb/(t.length-1),Z.push(Ha.x,Ha.y)}for(C=0;C<x;C++)for(ja=0;ja<t.length-1;ja++)ta=ja+C*t.length,Ha=ta+t.length,db=ta+t.length+1,vb=ta+1,S.push(ta,Ha,vb),S.push(Ha,db,vb);L.setIndex(S);L.setAttribute("position",new U(V,3));L.setAttribute("uv",new U(Z,2));L.computeVertexNormals();if(G===2*Math.PI)for(G=L.attributes.normal.array,S=new nc,V=new nc,Z=new nc,x=x*t.length*3,ja=C=0;C<t.length;C++,ja+=3)S.x=G[ja+0],S.y=G[ja+1],S.z=G[ja+2],V.x=
G[x+ja+0],V.y=G[x+ja+1],V.z=G[x+ja+2],Z.addVectors(S,V).normalize(),G[ja+0]=G[x+ja+0]=Z.x,G[ja+1]=G[x+ja+1]=Z.y,G[ja+2]=G[x+ja+2]=Z.z;return L}g(z,u);return z}(oa),aaa=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="LatheGeometry";L.parameters={points:t,segments:x,phiStart:C,phiLength:G};L.fromBufferGeometry(new cX(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Sk),WO=function(u){function z(t,x){var C=u.call(this||p,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,
3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,x)||this||p;C.type="OctahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(VB),baa=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="OctahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new WO(t,x));C.mergeVertices();return C}g(z,u);return z}(Sk);tE.prototype=Object.create(oa.prototype);tE.prototype.constructor=tE;hI.prototype=Object.create(Sk.prototype);hI.prototype.constructor=hI;var caa=
function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="PlaneGeometry";L.parameters={width:t,height:x,widthSegments:C,heightSegments:G};L.fromBufferGeometry(new VN(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Sk),daa=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="PolyhedronGeometry";L.parameters={vertices:t,indices:x,radius:C,detail:G};L.fromBufferGeometry(new VB(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Sk),dX=function(u){function z(t,x,
C,G,L,S){var V=u.call(this||p)||this||p;V.type="RingBufferGeometry";V.parameters={innerRadius:t,outerRadius:x,thetaSegments:C,phiSegments:G,thetaStart:L,thetaLength:S};t=t||.5;x=x||1;L=void 0!==L?L:0;S=void 0!==S?S:2*Math.PI;C=void 0!==C?Math.max(3,C):8;G=void 0!==G?Math.max(1,G):1;var Z=[],ja=[],ta=[],Ha=[],db=t;t=(x-t)/G;for(var Ya=new nc,vb=new Xe,sb=0;sb<=G;sb++){for(var Qc=0;Qc<=C;Qc++){var zc=L+Qc/C*S;Ya.x=db*Math.cos(zc);Ya.y=db*Math.sin(zc);ja.push(Ya.x,Ya.y,Ya.z);ta.push(0,0,1);vb.x=(Ya.x/
x+1)/2;vb.y=(Ya.y/x+1)/2;Ha.push(vb.x,vb.y)}db+=t}for(x=0;x<G;x++)for(L=x*(C+1),S=0;S<C;S++)db=S+L,t=db+C+1,Ya=db+C+2,vb=db+1,Z.push(db,t,vb),Z.push(t,Ya,vb);V.setIndex(Z);V.setAttribute("position",new U(ja,3));V.setAttribute("normal",new U(ta,3));V.setAttribute("uv",new U(Ha,2));return V}g(z,u);return z}(oa),eaa=function(u){function z(t,x,C,G,L,S){var V=u.call(this||p)||this||p;V.type="RingGeometry";V.parameters={innerRadius:t,outerRadius:x,thetaSegments:C,phiSegments:G,thetaStart:L,thetaLength:S};
V.fromBufferGeometry(new dX(t,x,C,G,L,S));V.mergeVertices();return V}g(z,u);return z}(Sk),eX=function(u){function z(t,x){function C(db){var Ya=S.length/3,vb=db.extractPoints(x);db=vb.shape;var sb=vb.holes;!1===nx.isClockWise(db)&&(db=db.reverse());vb=0;for(var Qc=sb.length;vb<Qc;vb++){var zc=sb[vb];!0===nx.isClockWise(zc)&&(sb[vb]=zc.reverse())}vb=nx.triangulateShape(db,sb);Qc=0;for(zc=sb.length;Qc<zc;Qc++)db=db.concat(sb[Qc]);sb=0;for(Qc=db.length;sb<Qc;sb++)zc=db[sb],S.push(zc.x,zc.y,0),V.push(0,
0,1),Z.push(zc.x,zc.y);db=0;for(sb=vb.length;db<sb;db++)Qc=vb[db],L.push(Qc[0]+Ya,Qc[1]+Ya,Qc[2]+Ya),ta+=3}var G=u.call(this||p)||this||p;G.type="ShapeBufferGeometry";G.parameters={shapes:t,curveSegments:x};x=x||12;var L=[],S=[],V=[],Z=[],ja=0,ta=0;if(!1===Array.isArray(t))C(t);else for(var Ha=0;Ha<t.length;Ha++)C(t[Ha]),G.addGroup(ja,ta,Ha),ja+=ta,ta=0;G.setIndex(L);G.setAttribute("position",new U(S,3));G.setAttribute("normal",new U(V,3));G.setAttribute("uv",new U(Z,2));return G}g(z,u);z.prototype.toJSON=
function(){var t=oa.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(x))for(var C=0,G=x.length;C<G;C++)t.shapes.push(x[C].uuid);else t.shapes.push(x.uuid);return t};return z}(oa),fX=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="ShapeGeometry";"object"===typeof x&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),x=x.curveSegments);C.parameters={shapes:t,curveSegments:x};C.fromBufferGeometry(new eX(t,x));C.mergeVertices();
return C}g(z,u);z.prototype.toJSON=function(){var t=Sk.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(x))for(var C=0,G=x.length;C<G;C++)t.shapes.push(x[C].uuid);else t.shapes.push(x.uuid);return t};return z}(Sk),XO=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="SphereBufferGeometry";Z.parameters={radius:t,widthSegments:x,heightSegments:C,phiStart:G,phiLength:L,thetaStart:S,thetaLength:V};t=t||1;x=Math.max(3,Math.floor(x)||8);
C=Math.max(2,Math.floor(C)||6);G=void 0!==G?G:0;L=void 0!==L?L:2*Math.PI;S=void 0!==S?S:0;V=void 0!==V?V:Math.PI;for(var ja=Math.min(S+V,Math.PI),ta=0,Ha=[],db=new nc,Ya=new nc,vb=[],sb=[],Qc=[],zc=[],jd=0;jd<=C;jd++){var Bc=[],kd=jd/C,ud=0;0==jd&&0==S?ud=.5/x:jd==C&&ja==Math.PI&&(ud=-.5/x);for(var Vd=0;Vd<=x;Vd++){var Ad=Vd/x;db.x=-t*Math.cos(G+Ad*L)*Math.sin(S+kd*V);db.y=t*Math.cos(S+kd*V);db.z=t*Math.sin(G+Ad*L)*Math.sin(S+kd*V);sb.push(db.x,db.y,db.z);Ya.copy(db).normalize();Qc.push(Ya.x,Ya.y,
Ya.z);zc.push(Ad+ud,1-kd);Bc.push(ta++)}Ha.push(Bc)}for(t=0;t<C;t++)for(G=0;G<x;G++)L=Ha[t][G+1],V=Ha[t][G],ta=Ha[t+1][G],db=Ha[t+1][G+1],(0!==t||0<S)&&vb.push(L,V,db),(t!==C-1||ja<Math.PI)&&vb.push(V,ta,db);Z.setIndex(vb);Z.setAttribute("position",new U(sb,3));Z.setAttribute("normal",new U(Qc,3));Z.setAttribute("uv",new U(zc,2));return Z}g(z,u);return z}(oa),faa=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="SphereGeometry";Z.parameters={radius:t,widthSegments:x,heightSegments:C,
phiStart:G,phiLength:L,thetaStart:S,thetaLength:V};Z.fromBufferGeometry(new XO(t,x,C,G,L,S,V));Z.mergeVertices();return Z}g(z,u);return z}(Sk),gX=function(u){function z(t,x){var C=u.call(this||p,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,x)||this||p;C.type="TetrahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(VB),gaa=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="TetrahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new gX(t,
x));C.mergeVertices();return C}g(z,u);return z}(Sk),hX=function(u){function z(t,x){x=x||{};var C=x.font;if(!C||!C.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new oa;t=C.generateShapes(t,x.size);x.depth=void 0!==x.height?x.height:50;void 0===x.bevelThickness&&(x.bevelThickness=10);void 0===x.bevelSize&&(x.bevelSize=8);void 0===x.bevelEnabled&&(x.bevelEnabled=!1);x=u.call(this||p,t,x)||this||p;x.type="TextBufferGeometry";return x}g(z,u);return z}(zI),
haa=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="TextGeometry";C.parameters={text:t,parameters:x};C.fromBufferGeometry(new hX(t,x));C.mergeVertices();return C}g(z,u);return z}(Sk),iX=function(u){function z(t,x,C,G,L){var S=u.call(this||p)||this||p;S.type="TorusBufferGeometry";S.parameters={radius:t,tube:x,radialSegments:C,tubularSegments:G,arc:L};t=t||1;x=x||.4;C=Math.floor(C)||8;G=Math.floor(G)||6;L=L||2*Math.PI;for(var V=[],Z=[],ja=[],ta=[],Ha=new nc,db=new nc,Ya=new nc,vb=
0;vb<=C;vb++)for(var sb=0;sb<=G;sb++){var Qc=sb/G*L,zc=vb/C*Math.PI*2;db.x=(t+x*Math.cos(zc))*Math.cos(Qc);db.y=(t+x*Math.cos(zc))*Math.sin(Qc);db.z=x*Math.sin(zc);Z.push(db.x,db.y,db.z);Ha.x=t*Math.cos(Qc);Ha.y=t*Math.sin(Qc);Ya.subVectors(db,Ha).normalize();ja.push(Ya.x,Ya.y,Ya.z);ta.push(sb/G);ta.push(vb/C)}for(t=1;t<=C;t++)for(x=1;x<=G;x++)L=(G+1)*(t-1)+x-1,Ha=(G+1)*(t-1)+x,db=(G+1)*t+x,V.push((G+1)*t+x-1,L,db),V.push(L,Ha,db);S.setIndex(V);S.setAttribute("position",new U(Z,3));S.setAttribute("normal",
new U(ja,3));S.setAttribute("uv",new U(ta,2));return S}g(z,u);return z}(oa),iaa=function(u){function z(t,x,C,G,L){var S=u.call(this||p)||this||p;S.type="TorusGeometry";S.parameters={radius:t,tube:x,radialSegments:C,tubularSegments:G,arc:L};S.fromBufferGeometry(new iX(t,x,C,G,L));S.mergeVertices();return S}g(z,u);return z}(Sk),jX=function(u){function z(t,x,C,G,L,S){function V(gd,xd,jf,Ae,uf){var Ff=Math.sin(gd);xd=jf/xd*gd;jf=Math.cos(xd);uf.x=Ae*(2+jf)*.5*Math.cos(gd);uf.y=Ae*(2+jf)*Ff*.5;uf.z=Ae*
Math.sin(xd)*.5}var Z=u.call(this||p)||this||p;Z.type="TorusKnotBufferGeometry";Z.parameters={radius:t,tube:x,tubularSegments:C,radialSegments:G,p:L,q:S};t=t||1;x=x||.4;C=Math.floor(C)||64;G=Math.floor(G)||8;L=L||2;S=S||3;for(var ja=[],ta=[],Ha=[],db=[],Ya=new nc,vb=new nc,sb=new nc,Qc=new nc,zc=new nc,jd=new nc,Bc=new nc,kd=0;kd<=C;++kd){var ud=kd/C*L*Math.PI*2;V(ud,L,S,t,sb);V(ud+.01,L,S,t,Qc);jd.subVectors(Qc,sb);Bc.addVectors(Qc,sb);zc.crossVectors(jd,Bc);Bc.crossVectors(zc,jd);zc.normalize();
Bc.normalize();for(ud=0;ud<=G;++ud){var Vd=ud/G*Math.PI*2,Ad=-x*Math.cos(Vd);Vd=x*Math.sin(Vd);Ya.x=sb.x+(Ad*Bc.x+Vd*zc.x);Ya.y=sb.y+(Ad*Bc.y+Vd*zc.y);Ya.z=sb.z+(Ad*Bc.z+Vd*zc.z);ta.push(Ya.x,Ya.y,Ya.z);vb.subVectors(Ya,sb).normalize();Ha.push(vb.x,vb.y,vb.z);db.push(kd/C);db.push(ud/G)}}for(t=1;t<=C;t++)for(x=1;x<=G;x++)L=(G+1)*t+(x-1),S=(G+1)*t+x,Ya=(G+1)*(t-1)+x,ja.push((G+1)*(t-1)+(x-1),L,Ya),ja.push(L,S,Ya);Z.setIndex(ja);Z.setAttribute("position",new U(ta,3));Z.setAttribute("normal",new U(Ha,
3));Z.setAttribute("uv",new U(db,2));return Z}g(z,u);return z}(oa),jaa=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="TorusKnotGeometry";Z.parameters={radius:t,tube:x,tubularSegments:C,radialSegments:G,p:L,q:S};void 0!==V&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");Z.fromBufferGeometry(new jX(t,x,C,G,L,S));Z.mergeVertices();return Z}g(z,u);return z}(Sk),kX=function(u){function z(t,x,C,G,L){function S(zc){db=
t.getPointAt(zc/x,db);var jd=Z.normals[zc];zc=Z.binormals[zc];for(var Bc=0;Bc<=G;Bc++){var kd=Bc/G*Math.PI*2,ud=Math.sin(kd);kd=-Math.cos(kd);ta.x=kd*jd.x+ud*zc.x;ta.y=kd*jd.y+ud*zc.y;ta.z=kd*jd.z+ud*zc.z;ta.normalize();vb.push(ta.x,ta.y,ta.z);ja.x=db.x+C*ta.x;ja.y=db.y+C*ta.y;ja.z=db.z+C*ta.z;Ya.push(ja.x,ja.y,ja.z)}}var V=u.call(this||p)||this||p;V.type="TubeBufferGeometry";V.parameters={path:t,tubularSegments:x,radius:C,radialSegments:G,closed:L};x=x||64;C=C||1;G=G||8;L=L||!1;var Z=t.computeFrenetFrames(x,
L);V.tangents=Z.tangents;V.normals=Z.normals;V.binormals=Z.binormals;var ja=new nc,ta=new nc,Ha=new Xe,db=new nc,Ya=[],vb=[],sb=[],Qc=[];(function(){for(var zc=0;zc<x;zc++)S(zc);S(!1===L?x:0);for(zc=0;zc<=x;zc++)for(var jd=0;jd<=G;jd++)Ha.x=zc/x,Ha.y=jd/G,sb.push(Ha.x,Ha.y);for(zc=1;zc<=x;zc++)for(jd=1;jd<=G;jd++){var Bc=(G+1)*zc+(jd-1),kd=(G+1)*zc+jd,ud=(G+1)*(zc-1)+jd;Qc.push((G+1)*(zc-1)+(jd-1),Bc,ud);Qc.push(Bc,kd,ud)}})();V.setIndex(Qc);V.setAttribute("position",new U(Ya,3));V.setAttribute("normal",
new U(vb,3));V.setAttribute("uv",new U(sb,2));return V}g(z,u);z.prototype.toJSON=function(){var t=oa.prototype.toJSON.call(this||p);t.path=(this||p).parameters.path.toJSON();return t};return z}(oa),kaa=function(u){function z(t,x,C,G,L,S){var V=u.call(this||p)||this||p;V.type="TubeGeometry";V.parameters={path:t,tubularSegments:x,radius:C,radialSegments:G,closed:L};void 0!==S&&console.warn("THREE.TubeGeometry: taper has been removed.");t=new kX(t,x,C,G,L);V.tangents=t.tangents;V.normals=t.normals;V.binormals=
t.binormals;V.fromBufferGeometry(t);V.mergeVertices();return V}g(z,u);return z}(Sk),lX=function(u){function z(t){var x=u.call(this||p)||this||p;x.type="WireframeGeometry";var C=[],G=[0,0],L={},S=["a","b","c"];if(t&&t.isGeometry){for(var V=t.faces,Z=0,ja=V.length;Z<ja;Z++)for(var ta=V[Z],Ha=0;3>Ha;Ha++){var db=ta[S[Ha]],Ya=ta[S[(Ha+1)%3]];G[0]=Math.min(db,Ya);G[1]=Math.max(db,Ya);db=G[0]+","+G[1];void 0===L[db]&&(L[db]={index1:G[0],index2:G[1]})}for(var vb in L)G=L[vb],V=t.vertices[G.index1],C.push(V.x,
V.y,V.z),V=t.vertices[G.index2],C.push(V.x,V.y,V.z)}else if(t&&t.isBufferGeometry)if(vb=new nc,null!==t.index){S=t.attributes.position;Z=t.index;t=t.groups;0===t.length&&(t=[{start:0,count:Z.count,materialIndex:0}]);ja=0;for(ta=t.length;ja<ta;++ja)for(db=t[ja],Ha=Ya=db.start,db=Ya+db.count;Ha<db;Ha+=3)for(Ya=0;3>Ya;Ya++){var sb=Z.getX(Ha+Ya),Qc=Z.getX(Ha+(Ya+1)%3);G[0]=Math.min(sb,Qc);G[1]=Math.max(sb,Qc);sb=G[0]+","+G[1];void 0===L[sb]&&(L[sb]={index1:G[0],index2:G[1]})}for(V in L)G=L[V],vb.fromBufferAttribute(S,
G.index1),C.push(vb.x,vb.y,vb.z),vb.fromBufferAttribute(S,G.index2),C.push(vb.x,vb.y,vb.z)}else for(L=t.attributes.position,G=0,V=L.count/3;G<V;G++)for(t=0;3>t;t++)vb.fromBufferAttribute(L,3*G+t),C.push(vb.x,vb.y,vb.z),vb.fromBufferAttribute(L,3*G+(t+1)%3),C.push(vb.x,vb.y,vb.z);x.setAttribute("position",new U(C,3));return x}g(z,u);return z}(oa),Xp=Object.freeze({__proto__:null,BoxGeometry:VW,BoxBufferGeometry:VH,CircleGeometry:W$,CircleBufferGeometry:WW,ConeGeometry:X$,ConeBufferGeometry:Y$,CylinderGeometry:XW,
CylinderBufferGeometry:yI,DodecahedronGeometry:Z$,DodecahedronBufferGeometry:YW,EdgesGeometry:$W,ExtrudeGeometry:aX,ExtrudeBufferGeometry:zI,IcosahedronGeometry:$$,IcosahedronBufferGeometry:bX,LatheGeometry:aaa,LatheBufferGeometry:cX,OctahedronGeometry:baa,OctahedronBufferGeometry:WO,ParametricGeometry:hI,ParametricBufferGeometry:tE,PlaneGeometry:caa,PlaneBufferGeometry:VN,PolyhedronGeometry:daa,PolyhedronBufferGeometry:VB,RingGeometry:eaa,RingBufferGeometry:dX,ShapeGeometry:fX,ShapeBufferGeometry:eX,
SphereGeometry:faa,SphereBufferGeometry:XO,TetrahedronGeometry:gaa,TetrahedronBufferGeometry:gX,TextGeometry:haa,TextBufferGeometry:hX,TorusGeometry:iaa,TorusBufferGeometry:iX,TorusKnotGeometry:jaa,TorusKnotBufferGeometry:jX,TubeGeometry:kaa,TubeBufferGeometry:kX,WireframeGeometry:lX});MB.prototype=Object.create(M.prototype);MB.prototype.constructor=MB;MB.prototype.isShadowMaterial=!0;MB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);return this||p};ex.prototype=
Object.create(Ma.prototype);ex.prototype.constructor=ex;ex.prototype.isRawShaderMaterial=!0;Nv.prototype=Object.create(M.prototype);Nv.prototype.constructor=Nv;Nv.prototype.isMeshStandardMaterial=!0;Nv.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:""};(this||p).color.copy(u.color);(this||p).roughness=u.roughness;(this||p).metalness=u.metalness;(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=
u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).roughnessMap=
u.roughnessMap;(this||p).metalnessMap=u.metalnessMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).envMapIntensity=u.envMapIntensity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).vertexTangents=
u.vertexTangents;return this||p};kz.prototype=Object.create(Nv.prototype);kz.prototype.constructor=kz;kz.prototype.isMeshPhysicalMaterial=!0;kz.prototype.copy=function(u){Nv.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:"",PHYSICAL:""};(this||p).clearcoat=u.clearcoat;(this||p).clearcoatMap=u.clearcoatMap;(this||p).clearcoatRoughness=u.clearcoatRoughness;(this||p).clearcoatRoughnessMap=u.clearcoatRoughnessMap;(this||p).clearcoatNormalMap=u.clearcoatNormalMap;(this||p).clearcoatNormalScale.copy(u.clearcoatNormalScale);
(this||p).reflectivity=u.reflectivity;(this||p).sheen=u.sheen?((this||p).sheen||new rg).copy(u.sheen):null;(this||p).transmission=u.transmission;(this||p).transmissionMap=u.transmissionMap;return this||p};lz.prototype=Object.create(M.prototype);lz.prototype.constructor=lz;lz.prototype.isMeshPhongMaterial=!0;lz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).specular.copy(u.specular);(this||p).shininess=u.shininess;(this||p).map=u.map;(this||p).lightMap=
u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;
(this||p).displacementBias=u.displacementBias;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=
u.morphNormals;return this||p};NB.prototype=Object.create(M.prototype);NB.prototype.constructor=NB;NB.prototype.isMeshToonMaterial=!0;NB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).gradientMap=u.gradientMap;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||
p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=u.alphaMap;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;
(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};OB.prototype=Object.create(M.prototype);OB.prototype.constructor=OB;OB.prototype.isMeshNormalMaterial=!0;OB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);
(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};PB.prototype=Object.create(M.prototype);PB.prototype.constructor=PB;PB.prototype.isMeshLambertMaterial=!0;PB.prototype.copy=function(u){M.prototype.copy.call(this||
p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=
u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};QB.prototype=Object.create(M.prototype);QB.prototype.constructor=QB;QB.prototype.isMeshMatcapMaterial=!0;QB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).defines=
{MATCAP:""};(this||p).color.copy(u.color);(this||p).matcap=u.matcap;(this||p).map=u.map;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=u.alphaMap;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||
p).morphNormals=u.morphNormals;return this||p};RB.prototype=Object.create(Ml.prototype);RB.prototype.constructor=RB;RB.prototype.isLineDashedMaterial=!0;RB.prototype.copy=function(u){Ml.prototype.copy.call(this||p,u);(this||p).scale=u.scale;(this||p).dashSize=u.dashSize;(this||p).gapSize=u.gapSize;return this||p};var Hra=Object.freeze({__proto__:null,ShadowMaterial:MB,SpriteMaterial:iz,RawShaderMaterial:ex,ShaderMaterial:Ma,PointsMaterial:du,MeshPhysicalMaterial:kz,MeshStandardMaterial:Nv,MeshPhongMaterial:lz,
MeshToonMaterial:NB,MeshNormalMaterial:OB,MeshLambertMaterial:PB,MeshDepthMaterial:bz,MeshDistanceMaterial:cz,MeshBasicMaterial:N,MeshMatcapMaterial:QB,LineDashedMaterial:RB,LineBasicMaterial:Ml,Material:M}),zl={arraySlice:function(u,z,t){return zl.isTypedArray(u)?new u.constructor(u.subarray(z,void 0!==t?t:u.length)):u.slice(z,t)},convertArray:function(u,z,t){return!u||!t&&u.constructor===z?u:"number"===typeof z.BYTES_PER_ELEMENT?new z(u):Array.prototype.slice.call(u)},isTypedArray:function(u){return ArrayBuffer.isView(u)&&
!(u instanceof DataView)},getKeyframeOrder:function(u){for(var z=u.length,t=Array(z),x=0;x!==z;++x)t[x]=x;t.sort(function(C,G){return u[C]-u[G]});return t},sortedArray:function(u,z,t){for(var x=u.length,C=new u.constructor(x),G=0,L=0;L!==x;++G)for(var S=t[G]*z,V=0;V!==z;++V)C[L++]=u[S+V];return C},flattenJSON:function(u,z,t,x){for(var C=1,G=u[0];void 0!==G&&void 0===G[x];)G=u[C++];if(void 0!==G){var L=G[x];if(void 0!==L)if(Array.isArray(L)){do L=G[x],void 0!==L&&(z.push(G.time),t.push.apply(t,L)),
G=u[C++];while(void 0!==G)}else if(void 0!==L.toArray){do L=G[x],void 0!==L&&(z.push(G.time),L.toArray(t,t.length)),G=u[C++];while(void 0!==G)}else{do L=G[x],void 0!==L&&(z.push(G.time),t.push(L)),G=u[C++];while(void 0!==G)}}},subclip:function(u,z,t,x,C){C=C||30;u=u.clone();u.name=z;z=[];for(var G=0;G<u.tracks.length;++G){for(var L=u.tracks[G],S=L.getValueSize(),V=[],Z=[],ja=0;ja<L.times.length;++ja){var ta=L.times[ja]*C;if(!(ta<t||ta>=x))for(V.push(L.times[ja]),ta=0;ta<S;++ta)Z.push(L.values[ja*
S+ta])}0!==V.length&&(L.times=zl.convertArray(V,L.times.constructor),L.values=zl.convertArray(Z,L.values.constructor),z.push(L))}u.tracks=z;t=Infinity;for(x=0;x<u.tracks.length;++x)t>u.tracks[x].times[0]&&(t=u.tracks[x].times[0]);for(x=0;x<u.tracks.length;++x)u.tracks[x].shift(-1*t);u.resetDuration();return u},makeClipAdditive:function(u,z,t,x){void 0===z&&(z=0);void 0===t&&(t=u);if(void 0===x||0>=x)x=30;var C=t.tracks.length,G=z/x;z=function(L){var S=t.tracks[L],V=S.ValueTypeName;if("bool"===V||
"string"===V)return"continue";L=u.tracks.find(function(Qc){return Qc.name===S.name&&Qc.ValueTypeName===V});if(void 0===L)return"continue";var Z=0,ja=S.getValueSize();S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=ja/3);var ta=0,Ha=L.getValueSize();L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ta=Ha/3);var db=S.times.length-1,Ya=void 0;G<=S.times[0]?Ya=zl.arraySlice(S.values,Z,ja-Z):G>=S.times[db]?(Ya=db*ja+Z,Ya=zl.arraySlice(S.values,Ya,Ya+ja-Z)):(Ya=S.createInterpolant(),
db=Z,Z=ja-Z,Ya.evaluate(G),Ya=zl.arraySlice(Ya.resultBuffer,db,Z));"quaternion"===V&&(new mp).fromArray(Ya).normalize().conjugate().toArray(Ya);Z=L.times.length;for(ja=0;ja<Z;++ja)if(db=ja*Ha+ta,"quaternion"===V)mp.multiplyQuaternionsFlat(L.values,db,Ya,0,L.values,db);else for(var vb=Ha-2*ta,sb=0;sb<vb;++sb)L.values[db+sb]-=Ya[sb]};for(x=0;x<C;++x)z(x);u.blendMode=2501;return u}};Object.assign(Gr.prototype,{evaluate:function(u){var z=(this||p).parameterPositions,t=(this||p)._cachedIndex,x=z[t],C=
z[t-1];a:{b:{c:{d:if(!(u<x)){for(var G=t+2;;){if(void 0===x){if(u<C)break d;t=z.length;(this||p)._cachedIndex=t;return this.afterEnd_(t-1,u,C)}if(t===G)break;C=x;x=z[++t];if(u<x)break b}x=z.length;break c}if(u>=C)break a;else{G=z[1];u<G&&(t=2,C=G);for(G=t-2;;){if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,u,x);if(t===G)break;x=C;C=z[--t-1];if(u>=C)break b}x=t;t=0}}for(;t<x;)C=t+x>>>1,u<z[C]?x=C:t=C+1;x=z[t];C=z[t-1];if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,
u,x);if(void 0===x)return t=z.length,(this||p)._cachedIndex=t,this.afterEnd_(t-1,C,u)}(this||p)._cachedIndex=t;this.intervalChanged_(t,C,x)}return this.interpolate_(t,C,u,x)},settings:null,DefaultSettings_:{},getSettings_:function(){return(this||p).settings||(this||p).DefaultSettings_},copySampleValue_:function(u){var z=(this||p).resultBuffer,t=(this||p).sampleValues,x=(this||p).valueSize;u*=x;for(var C=0;C!==x;++C)z[C]=t[u+C];return z},interpolate_:function(){throw Error("call to abstract method");
},intervalChanged_:function(){}});Object.assign(Gr.prototype,{beforeStart_:Gr.prototype.copySampleValue_,afterEnd_:Gr.prototype.copySampleValue_});gO.prototype=Object.assign(Object.create(Gr.prototype),{constructor:gO,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(u,z,t){var x=(this||p).parameterPositions,C=u-2,G=u+1,L=x[C],S=x[G];if(void 0===L)switch(this.getSettings_().endingStart){case 2401:C=u;L=2*z-t;break;case 2402:C=x.length-2;L=z+x[C]-x[C+1];break;default:C=u,
L=t}if(void 0===S)switch(this.getSettings_().endingEnd){case 2401:G=u;S=2*t-z;break;case 2402:G=1;S=t+x[1]-x[0];break;default:G=u-1,S=z}u=.5*(t-z);x=(this||p).valueSize;(this||p)._weightPrev=u/(z-L);(this||p)._weightNext=u/(S-t);(this||p)._offsetPrev=C*x;(this||p)._offsetNext=G*x},interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,G=(this||p).sampleValues,L=(this||p).valueSize;u*=L;var S=u-L,V=(this||p)._offsetPrev,Z=(this||p)._offsetNext,ja=(this||p)._weightPrev,ta=(this||p)._weightNext,
Ha=(t-z)/(x-z);t=Ha*Ha;x=t*Ha;z=-ja*x+2*ja*t-ja*Ha;ja=(1+ja)*x+(-1.5-2*ja)*t+(-.5+ja)*Ha+1;Ha=(-1-ta)*x+(1.5+ta)*t+.5*Ha;ta=ta*x-ta*t;for(t=0;t!==L;++t)C[t]=z*G[V+t]+ja*G[S+t]+Ha*G[u+t]+ta*G[Z+t];return C}});iI.prototype=Object.assign(Object.create(Gr.prototype),{constructor:iI,interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,G=(this||p).sampleValues,L=(this||p).valueSize;u*=L;var S=u-L;z=(t-z)/(x-z);t=1-z;for(x=0;x!==L;++x)C[x]=G[S+x]*t+G[u+x]*z;return C}});hO.prototype=Object.assign(Object.create(Gr.prototype),
{constructor:hO,interpolate_:function(u){return this.copySampleValue_(u-1)}});Object.assign(No,{toJSON:function(u){var z=u.constructor;if(void 0!==z.toJSON)z=z.toJSON(u);else{z={name:u.name,times:zl.convertArray(u.times,Array),values:zl.convertArray(u.values,Array)};var t=u.getInterpolation();t!==u.DefaultInterpolation&&(z.interpolation=t)}z.type=u.ValueTypeName;return z}});Object.assign(No.prototype,{constructor:No,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,
InterpolantFactoryMethodDiscrete:function(u){return new hO((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodLinear:function(u){return new iI((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:function(u){return new gO((this||p).times,(this||p).values,this.getValueSize(),u)},setInterpolation:function(u){switch(u){case 2300:var z=(this||p).InterpolantFactoryMethodDiscrete;break;case 2301:z=(this||p).InterpolantFactoryMethodLinear;
break;case 2302:z=(this||p).InterpolantFactoryMethodSmooth}if(void 0===z){z="unsupported interpolation for "+(this||p).ValueTypeName+" keyframe track named "+(this||p).name;if(void 0===(this||p).createInterpolant)if(u!==(this||p).DefaultInterpolation)this.setInterpolation((this||p).DefaultInterpolation);else throw Error(z);console.warn("THREE.KeyframeTrack:",z);return this||p}(this||p).createInterpolant=z;return this||p},getInterpolation:function(){switch((this||p).createInterpolant){case (this||
p).InterpolantFactoryMethodDiscrete:return 2300;case (this||p).InterpolantFactoryMethodLinear:return 2301;case (this||p).InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return(this||p).values.length/(this||p).times.length},shift:function(u){if(0!==u)for(var z=(this||p).times,t=0,x=z.length;t!==x;++t)z[t]+=u;return this||p},scale:function(u){if(1!==u)for(var z=(this||p).times,t=0,x=z.length;t!==x;++t)z[t]*=u;return this||p},trim:function(u,z){for(var t=(this||p).times,x=t.length,
C=0,G=x-1;C!==x&&t[C]<u;)++C;for(;-1!==G&&t[G]>z;)--G;++G;if(0!==C||G!==x)C>=G&&(G=Math.max(G,1),C=G-1),u=this.getValueSize(),(this||p).times=zl.arraySlice(t,C,G),(this||p).values=zl.arraySlice((this||p).values,C*u,G*u);return this||p},validate:function(){var u=!0,z=this.getValueSize();0!==z-Math.floor(z)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this||p),u=!1);var t=(this||p).times;z=(this||p).values;var x=t.length;0===x&&(console.error("THREE.KeyframeTrack: Track is empty.",
this||p),u=!1);for(var C=null,G=0;G!==x;G++){var L=t[G];if("number"===typeof L&&isNaN(L)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this||p,G,L);u=!1;break}if(null!==C&&C>L){console.error("THREE.KeyframeTrack: Out of order keys.",this||p,G,L,C);u=!1;break}C=L}if(void 0!==z&&zl.isTypedArray(z))for(t=0,x=z.length;t!==x;++t)if(C=z[t],isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this||p,t,C);u=!1;break}return u},optimize:function(){for(var u=zl.arraySlice((this||
p).times),z=zl.arraySlice((this||p).values),t=this.getValueSize(),x=2302===this.getInterpolation(),C=u.length-1,G=1,L=1;L<C;++L){var S=!1,V=u[L];if(V!==u[L+1]&&(1!==L||V!==V[0]))if(x)S=!0;else{V=L*t;for(var Z=V-t,ja=V+t,ta=0;ta!==t;++ta){var Ha=z[V+ta];if(Ha!==z[Z+ta]||Ha!==z[ja+ta]){S=!0;break}}}if(S){if(L!==G)for(u[G]=u[L],S=L*t,V=G*t,Z=0;Z!==t;++Z)z[V+Z]=z[S+Z];++G}}if(0<C){u[G]=u[C];x=C*t;C=G*t;for(L=0;L!==t;++L)z[C+L]=z[x+L];++G}G!==u.length?((this||p).times=zl.arraySlice(u,0,G),(this||p).values=
zl.arraySlice(z,0,G*t)):((this||p).times=u,(this||p).values=z);return this||p},clone:function(){var u=zl.arraySlice((this||p).times,0),z=zl.arraySlice((this||p).values,0);u=new (this||p).constructor((this||p).name,u,z);u.createInterpolant=(this||p).createInterpolant;return u}});iO.prototype=Object.assign(Object.create(No.prototype),{constructor:iO,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});jO.prototype=
Object.assign(Object.create(No.prototype),{constructor:jO,ValueTypeName:"color"});uE.prototype=Object.assign(Object.create(No.prototype),{constructor:uE,ValueTypeName:"number"});kO.prototype=Object.assign(Object.create(Gr.prototype),{constructor:kO,interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,G=(this||p).sampleValues,L=(this||p).valueSize;z=(t-z)/(x-z);u*=L;for(t=u+L;u!==t;u+=4)mp.slerpFlat(C,0,G,u-L,G,u,z);return C}});jI.prototype=Object.assign(Object.create(No.prototype),{constructor:jI,
ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(u){return new kO((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:void 0});lO.prototype=Object.assign(Object.create(No.prototype),{constructor:lO,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});vE.prototype=Object.assign(Object.create(No.prototype),{constructor:vE,ValueTypeName:"vector"});
Object.assign(Ys,{parse:function(u){for(var z=[],t=u.tracks,x=1/(u.fps||1),C=0,G=t.length;C!==G;++C)z.push(ura(t[C]).scale(x));return new Ys(u.name,u.duration,z,u.blendMode)},toJSON:function(u){var z=[],t=u.tracks;u={name:u.name,duration:u.duration,tracks:z,uuid:u.uuid,blendMode:u.blendMode};for(var x=0,C=t.length;x!==C;++x)z.push(No.toJSON(t[x]));return u},CreateFromMorphTargetSequence:function(u,z,t,x){for(var C=z.length,G=[],L=0;L<C;L++){var S=[],V=[];S.push((L+C-1)%C,L,(L+1)%C);V.push(0,1,0);
var Z=zl.getKeyframeOrder(S);S=zl.sortedArray(S,1,Z);V=zl.sortedArray(V,1,Z);x||0!==S[0]||(S.push(C),V.push(V[0]));G.push((new uE(".morphTargetInfluences["+z[L].name+"]",S,V)).scale(1/t))}return new Ys(u,-1,G)},findByName:function(u,z){var t=u;Array.isArray(u)||(t=u.geometry&&u.geometry.animations||u.animations);for(u=0;u<t.length;u++)if(t[u].name===z)return t[u];return null},CreateClipsFromMorphTargetSequences:function(u,z,t){for(var x={},C=/^([\w-]*?)([\d]+)$/,G=0,L=u.length;G<L;G++){var S=u[G],
V=S.name.match(C);if(V&&1<V.length){V=V[1];var Z=x[V];Z||(x[V]=Z=[]);Z.push(S)}}u=[];for(var ja in x)u.push(Ys.CreateFromMorphTargetSequence(ja,x[ja],z,t));return u},parseAnimation:function(u,z){if(!u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var t=function(sb,Qc,zc,jd,Bc){if(0!==zc.length){var kd=[],ud=[];zl.flattenJSON(zc,kd,ud,jd);0!==kd.length&&Bc.push(new sb(Qc,kd,ud))}},x=[],C=u.name||"default",G=u.fps||30,L=u.blendMode,S=u.length||-1;u=u.hierarchy||
[];for(var V=0;V<u.length;V++){var Z=u[V].keys;if(Z&&0!==Z.length)if(Z[0].morphTargets){S={};var ja=void 0;for(ja=0;ja<Z.length;ja++)if(Z[ja].morphTargets)for(var ta=0;ta<Z[ja].morphTargets.length;ta++)S[Z[ja].morphTargets[ta]]=-1;for(var Ha in S){ta=[];for(var db=[],Ya=0;Ya!==Z[ja].morphTargets.length;++Ya){var vb=Z[ja];ta.push(vb.time);db.push(vb.morphTarget===Ha?1:0)}x.push(new uE(".morphTargetInfluence["+Ha+"]",ta,db))}S=S.length*(G||1)}else ja=".bones["+z[V].name+"]",t(vE,ja+".position",Z,"pos",
x),t(jI,ja+".quaternion",Z,"rot",x),t(vE,ja+".scale",Z,"scl",x)}return 0===x.length?null:new Ys(C,S,x,L)}});Object.assign(Ys.prototype,{resetDuration:function(){for(var u=0,z=0,t=(this||p).tracks.length;z!==t;++z){var x=(this||p).tracks[z];u=Math.max(u,x.times[x.times.length-1])}(this||p).duration=u;return this||p},trim:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].trim(0,(this||p).duration);return this||p},validate:function(){for(var u=!0,z=0;z<(this||p).tracks.length;z++)u=
u&&(this||p).tracks[z].validate();return u},optimize:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].optimize();return this||p},clone:function(){for(var u=[],z=0;z<(this||p).tracks.length;z++)u.push((this||p).tracks[z].clone());return new Ys((this||p).name,(this||p).duration,u,(this||p).blendMode)}});var WB={enabled:!1,files:{},add:function(u,z){!1!==(this||p).enabled&&((this||p).files[u]=z)},get:function(u){if(!1!==(this||p).enabled)return(this||p).files[u]},remove:function(u){delete (this||
p).files[u]},clear:function(){(this||p).files={}}},m$=new kW;Object.assign(Mk.prototype,{load:function(){},loadAsync:function(u,z){var t=this||p;return new Promise(function(x,C){t.load(u,x,z,C)})},parse:function(){},setCrossOrigin:function(u){(this||p).crossOrigin=u;return this||p},setWithCredentials:function(u){(this||p).withCredentials=u;return this||p},setPath:function(u){(this||p).path=u;return this||p},setResourcePath:function(u){(this||p).resourcePath=u;return this||p},setRequestHeader:function(u){(this||
p).requestHeader=u;return this||p}});var ku={};Zs.prototype=Object.assign(Object.create(Mk.prototype),{constructor:Zs,load:function(u,z,t,x){void 0===u&&(u="");void 0!==(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,G=WB.get(u);if(void 0!==G)return C.manager.itemStart(u),setTimeout(function(){z&&z(G);C.manager.itemEnd(u)},0),G;if(void 0!==ku[u])ku[u].push({onLoad:z,onProgress:t,onError:x});else{var L=u.match(/^data:(.*?)(;base64)?,(.*)$/);if(L){t=L[1];var S=!!L[2];
L=L[3];L=decodeURIComponent(L);S&&(L=atob(L));try{var V=((this||p).responseType||"").toLowerCase();switch(V){case "arraybuffer":case "blob":var Z=new Uint8Array(L.length);for(S=0;S<L.length;S++)Z[S]=L.charCodeAt(S);var ja="blob"===V?new Blob([Z.buffer],{type:t}):Z.buffer;break;case "document":ja=(new DOMParser).parseFromString(L,t);break;case "json":ja=JSON.parse(L);break;default:ja=L}setTimeout(function(){z&&z(ja);C.manager.itemEnd(u)},0)}catch(Ha){setTimeout(function(){x&&x(Ha);C.manager.itemError(u);
C.manager.itemEnd(u)},0)}}else{ku[u]=[];ku[u].push({onLoad:z,onProgress:t,onError:x});var ta=new XMLHttpRequest;ta.open("GET",u,!0);ta.addEventListener("load",function(Ha){var db=(this||p).response,Ya=ku[u];delete ku[u];if(200===(this||p).status||0===(this||p).status){0===(this||p).status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");WB.add(u,db);Ha=0;for(var vb=Ya.length;Ha<vb;Ha++){var sb=Ya[Ha];if(sb.onLoad)sb.onLoad(db)}}else{db=0;for(vb=Ya.length;db<vb;db++)if(sb=Ya[db],sb.onError)sb.onError(Ha);
C.manager.itemError(u)}C.manager.itemEnd(u)},!1);ta.addEventListener("progress",function(Ha){for(var db=ku[u],Ya=0,vb=db.length;Ya<vb;Ya++){var sb=db[Ya];if(sb.onProgress)sb.onProgress(Ha)}},!1);ta.addEventListener("error",function(Ha){var db=ku[u];delete ku[u];for(var Ya=0,vb=db.length;Ya<vb;Ya++){var sb=db[Ya];if(sb.onError)sb.onError(Ha)}C.manager.itemError(u);C.manager.itemEnd(u)},!1);ta.addEventListener("abort",function(Ha){var db=ku[u];delete ku[u];for(var Ya=0,vb=db.length;Ya<vb;Ya++){var sb=
db[Ya];if(sb.onError)sb.onError(Ha)}C.manager.itemError(u);C.manager.itemEnd(u)},!1);void 0!==(this||p).responseType&&(ta.responseType=(this||p).responseType);void 0!==(this||p).withCredentials&&(ta.withCredentials=(this||p).withCredentials);ta.overrideMimeType&&ta.overrideMimeType(void 0!==(this||p).mimeType?(this||p).mimeType:"text/plain");for(S in(this||p).requestHeader)ta.setRequestHeader(S,(this||p).requestHeader[S]);ta.send(null)}C.manager.itemStart(u);return ta}},setResponseType:function(u){(this||
p).responseType=u;return this||p},setMimeType:function(u){(this||p).mimeType=u;return this||p}});lW.prototype=Object.assign(Object.create(Mk.prototype),{constructor:lW,load:function(u,z,t,x){var C=this||p,G=new Zs(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{z(C.parse(JSON.parse(L)))}catch(S){x?x(S):console.error(S),C.manager.itemError(u)}},t,x)},parse:function(u){for(var z=[],t=0;t<u.length;t++){var x=Ys.parse(u[t]);
z.push(x)}return z}});mW.prototype=Object.assign(Object.create(Mk.prototype),{constructor:mW,load:function(u,z,t,x){function C(Ha){V.load(u[Ha],function(db){db=G.parse(db,!0);L[Ha]={width:db.width,height:db.height,format:db.format,mipmaps:db.mipmaps};Z+=1;6===Z&&(1===db.mipmapCount&&(S.minFilter=1006),S.format=db.format,S.needsUpdate=!0,z&&z(S))},t,x)}var G=this||p,L=[],S=new rE;S.image=L;var V=new Zs((this||p).manager);V.setPath((this||p).path);V.setResponseType("arraybuffer");V.setRequestHeader((this||
p).requestHeader);V.setWithCredentials(G.withCredentials);var Z=0;if(Array.isArray(u))for(var ja=0,ta=u.length;ja<ta;++ja)C(ja);else V.load(u,function(Ha){Ha=G.parse(Ha,!0);if(Ha.isCubemap)for(var db=Ha.mipmaps.length/Ha.mipmapCount,Ya=0;Ya<db;Ya++){L[Ya]={mipmaps:[]};for(var vb=0;vb<Ha.mipmapCount;vb++)L[Ya].mipmaps.push(Ha.mipmaps[Ya*Ha.mipmapCount+vb]),L[Ya].format=Ha.format,L[Ya].width=Ha.width,L[Ya].height=Ha.height}else S.image.width=Ha.width,S.image.height=Ha.height,S.mipmaps=Ha.mipmaps;1===
Ha.mipmapCount&&(S.minFilter=1006);S.format=Ha.format;S.needsUpdate=!0;z&&z(S)},t,x);return S}});wE.prototype=Object.assign(Object.create(Mk.prototype),{constructor:wE,load:function(u,z,t,x){function C(){V.removeEventListener("load",C,!1);V.removeEventListener("error",G,!1);WB.add(u,this||p);z&&z(this||p);L.manager.itemEnd(u)}function G(Z){V.removeEventListener("load",C,!1);V.removeEventListener("error",G,!1);x&&x(Z);L.manager.itemError(u);L.manager.itemEnd(u)}void 0!==(this||p).path&&(u=(this||p).path+
u);u=(this||p).manager.resolveURL(u);var L=this||p,S=WB.get(u);if(void 0!==S)return L.manager.itemStart(u),setTimeout(function(){z&&z(S);L.manager.itemEnd(u)},0),S;var V=document.createElementNS("http://www.w3.org/1999/xhtml","img");V.addEventListener("load",C,!1);V.addEventListener("error",G,!1);"data:"!==u.substr(0,5)&&void 0!==(this||p).crossOrigin&&(V.crossOrigin=(this||p).crossOrigin);L.manager.itemStart(u);V.src=u;return V}});mO.prototype=Object.assign(Object.create(Mk.prototype),{constructor:mO,
load:function(u,z,t,x){function C(V){L.load(u[V],function(Z){G.images[V]=Z;S++;6===S&&(G.needsUpdate=!0,z&&z(G))},void 0,x)}var G=new jc,L=new wE((this||p).manager);L.setCrossOrigin((this||p).crossOrigin);L.setPath((this||p).path);var S=0;for(t=0;t<u.length;++t)C(t);return G}});nO.prototype=Object.assign(Object.create(Mk.prototype),{constructor:nO,load:function(u,z,t,x){var C=this||p,G=new Rb,L=new Zs((this||p).manager);L.setResponseType("arraybuffer");L.setRequestHeader((this||p).requestHeader);
L.setPath((this||p).path);L.setWithCredentials(C.withCredentials);L.load(u,function(S){if(S=C.parse(S))void 0!==S.image?G.image=S.image:void 0!==S.data&&(G.image.width=S.width,G.image.height=S.height,G.image.data=S.data),G.wrapS=void 0!==S.wrapS?S.wrapS:1001,G.wrapT=void 0!==S.wrapT?S.wrapT:1001,G.magFilter=void 0!==S.magFilter?S.magFilter:1006,G.minFilter=void 0!==S.minFilter?S.minFilter:1006,G.anisotropy=void 0!==S.anisotropy?S.anisotropy:1,void 0!==S.format&&(G.format=S.format),void 0!==S.type&&
(G.type=S.type),void 0!==S.mipmaps&&(G.mipmaps=S.mipmaps,G.minFilter=1008),1===S.mipmapCount&&(G.minFilter=1006),G.needsUpdate=!0,z&&z(G,S)},t,x);return G}});oO.prototype=Object.assign(Object.create(Mk.prototype),{constructor:oO,load:function(u,z,t,x){var C=new r,G=new wE((this||p).manager);G.setCrossOrigin((this||p).crossOrigin);G.setPath((this||p).path);G.load(u,function(L){C.image=L;L=0<u.search(/\.jpe?g($|\?)/i)||0===u.search(/^data:image\/jpeg/);C.format=L?1022:1023;C.needsUpdate=!0;void 0!==
z&&z(C)},t,x);return C}});Object.assign(ah.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(u,z){u=this.getUtoTmapping(u);return this.getPoint(u,z)},getPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));return z},getSpacedPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPointAt(t/u));return z},getLength:function(){var u=this.getLengths();return u[u.length-1]},
getLengths:function(u){void 0===u&&(u=(this||p).arcLengthDivisions);if((this||p).cacheArcLengths&&(this||p).cacheArcLengths.length===u+1&&!(this||p).needsUpdate)return(this||p).cacheArcLengths;(this||p).needsUpdate=!1;var z=[],t=this.getPoint(0),x=0;z.push(0);for(var C=1;C<=u;C++){var G=this.getPoint(C/u);x+=G.distanceTo(t);z.push(x);t=G}return(this||p).cacheArcLengths=z},updateArcLengths:function(){(this||p).needsUpdate=!0;this.getLengths()},getUtoTmapping:function(u,z){var t=this.getLengths(),x=
t.length;z=z?z:u*t[x-1];for(var C=0,G=x-1,L;C<=G;)if(u=Math.floor(C+(G-C)/2),L=t[u]-z,0>L)C=u+1;else if(0<L)G=u-1;else{G=u;break}u=G;if(t[u]===z)return u/(x-1);C=t[u];return(u+(z-C)/(t[u+1]-C))/(x-1)},getTangent:function(u,z){var t=u-1E-4;u+=1E-4;0>t&&(t=0);1<u&&(u=1);t=this.getPoint(t);u=this.getPoint(u);z=z||(t.isVector2?new Xe:new nc);z.copy(u).sub(t).normalize();return z},getTangentAt:function(u,z){u=this.getUtoTmapping(u);return this.getTangent(u,z)},computeFrenetFrames:function(u,z){for(var t=
new nc,x=[],C=[],G=[],L=new nc,S=new fj,V=0;V<=u;V++)x[V]=this.getTangentAt(V/u,new nc),x[V].normalize();C[0]=new nc;G[0]=new nc;V=Number.MAX_VALUE;var Z=Math.abs(x[0].x),ja=Math.abs(x[0].y),ta=Math.abs(x[0].z);Z<=V&&(V=Z,t.set(1,0,0));ja<=V&&(V=ja,t.set(0,1,0));ta<=V&&t.set(0,0,1);L.crossVectors(x[0],t).normalize();C[0].crossVectors(x[0],L);G[0].crossVectors(x[0],C[0]);for(t=1;t<=u;t++)C[t]=C[t-1].clone(),G[t]=G[t-1].clone(),L.crossVectors(x[t-1],x[t]),L.length()>Number.EPSILON&&(L.normalize(),V=
Math.acos(Xh.clamp(x[t-1].dot(x[t]),-1,1)),C[t].applyMatrix4(S.makeRotationAxis(L,V))),G[t].crossVectors(x[t],C[t]);if(!0===z)for(z=Math.acos(Xh.clamp(C[0].dot(C[u]),-1,1)),z/=u,0<x[0].dot(L.crossVectors(C[0],C[u]))&&(z=-z),L=1;L<=u;L++)C[L].applyMatrix4(S.makeRotationAxis(x[L],z*L)),G[L].crossVectors(x[L],C[L]);return{tangents:x,normals:C,binormals:G}},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).arcLengthDivisions=u.arcLengthDivisions;return this||
p},toJSON:function(){var u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};u.arcLengthDivisions=(this||p).arcLengthDivisions;u.type=(this||p).type;return u},fromJSON:function(u){(this||p).arcLengthDivisions=u.arcLengthDivisions;return this||p}});Hr.prototype=Object.create(ah.prototype);Hr.prototype.constructor=Hr;Hr.prototype.isEllipseCurve=!0;Hr.prototype.getPoint=function(u,z){z=z||new Xe;for(var t=2*Math.PI,x=(this||p).aEndAngle-(this||p).aStartAngle,C=Math.abs(x)<Number.EPSILON;0>
x;)x+=t;for(;x>t;)x-=t;x<Number.EPSILON&&(x=C?0:t);!0!==(this||p).aClockwise||C||(x=x===t?-t:x-t);t=(this||p).aStartAngle+u*x;u=(this||p).aX+(this||p).xRadius*Math.cos(t);var G=(this||p).aY+(this||p).yRadius*Math.sin(t);0!==(this||p).aRotation&&(t=Math.cos((this||p).aRotation),x=Math.sin((this||p).aRotation),C=u-(this||p).aX,G-=(this||p).aY,u=C*t-G*x+(this||p).aX,G=C*x+G*t+(this||p).aY);return z.set(u,G)};Hr.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).aX=u.aX;(this||p).aY=
u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};Hr.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.aX=(this||p).aX;u.aY=(this||p).aY;u.xRadius=(this||p).xRadius;u.yRadius=(this||p).yRadius;u.aStartAngle=(this||p).aStartAngle;u.aEndAngle=(this||p).aEndAngle;u.aClockwise=(this||p).aClockwise;u.aRotation=(this||p).aRotation;
return u};Hr.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).aX=u.aX;(this||p).aY=u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};xE.prototype=Object.create(Hr.prototype);xE.prototype.constructor=xE;xE.prototype.isArcCurve=!0;var YO=new nc,mX=new nW,nX=new nW,oX=new nW;np.prototype=Object.create(ah.prototype);
np.prototype.constructor=np;np.prototype.isCatmullRomCurve3=!0;np.prototype.getPoint=function(u,z){z=z||new nc;var t=(this||p).points,x=t.length;u*=x-((this||p).closed?0:1);var C=Math.floor(u);u-=C;(this||p).closed?C+=0<C?0:(Math.floor(Math.abs(C)/x)+1)*x:0===u&&C===x-1&&(C=x-2,u=1);if((this||p).closed||0<C)var G=t[(C-1)%x];else YO.subVectors(t[0],t[1]).add(t[0]),G=YO;var L=t[C%x],S=t[(C+1)%x];(this||p).closed||C+2<x?t=t[(C+2)%x]:(YO.subVectors(t[x-1],t[x-2]).add(t[x-1]),t=YO);if("centripetal"===
(this||p).curveType||"chordal"===(this||p).curveType){var V="chordal"===(this||p).curveType?.5:.25;x=Math.pow(G.distanceToSquared(L),V);C=Math.pow(L.distanceToSquared(S),V);V=Math.pow(S.distanceToSquared(t),V);1E-4>C&&(C=1);1E-4>x&&(x=C);1E-4>V&&(V=C);mX.initNonuniformCatmullRom(G.x,L.x,S.x,t.x,x,C,V);nX.initNonuniformCatmullRom(G.y,L.y,S.y,t.y,x,C,V);oX.initNonuniformCatmullRom(G.z,L.z,S.z,t.z,x,C,V)}else"catmullrom"===(this||p).curveType&&(mX.initCatmullRom(G.x,L.x,S.x,t.x,(this||p).tension),nX.initCatmullRom(G.y,
L.y,S.y,t.y,(this||p).tension),oX.initCatmullRom(G.z,L.z,S.z,t.z,(this||p).tension));z.set(mX.calc(u),nX.calc(u),oX.calc(u));return z};np.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};np.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.points=[];for(var z=0,t=(this||
p).points.length;z<t;z++)u.points.push((this||p).points[z].toArray());u.closed=(this||p).closed;u.curveType=(this||p).curveType;u.tension=(this||p).tension;return u};np.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++){var x=u.points[z];(this||p).points.push((new nc).fromArray(x))}(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};eu.prototype=Object.create(ah.prototype);
eu.prototype.constructor=eu;eu.prototype.isCubicBezierCurve=!0;eu.prototype.getPoint=function(u,z){z=z||new Xe;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2,G=(this||p).v3;z.set(lI(u,t.x,x.x,C.x,G.x),lI(u,t.y,x.y,C.y,G.y));return z};eu.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};eu.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();
u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};eu.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};Ov.prototype=Object.create(ah.prototype);Ov.prototype.constructor=Ov;Ov.prototype.isCubicBezierCurve3=!0;Ov.prototype.getPoint=function(u,z){z=z||new nc;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2,G=
(this||p).v3;z.set(lI(u,t.x,x.x,C.x,G.x),lI(u,t.y,x.y,C.y,G.y),lI(u,t.z,x.z,C.z,G.z));return z};Ov.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};Ov.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};Ov.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||
p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};Jq.prototype=Object.create(ah.prototype);Jq.prototype.constructor=Jq;Jq.prototype.isLineCurve=!0;Jq.prototype.getPoint=function(u,z){z=z||new Xe;1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};Jq.prototype.getPointAt=function(u,z){return this.getPoint(u,z)};Jq.prototype.getTangent=function(u,z){u=
z||new Xe;u.copy((this||p).v2).sub((this||p).v1).normalize();return u};Jq.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};Jq.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};Jq.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};fu.prototype=Object.create(ah.prototype);
fu.prototype.constructor=fu;fu.prototype.isLineCurve3=!0;fu.prototype.getPoint=function(u,z){z=z||new nc;1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};fu.prototype.getPointAt=function(u,z){return this.getPoint(u,z)};fu.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};fu.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();
u.v2=(this||p).v2.toArray();return u};fu.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};gu.prototype=Object.create(ah.prototype);gu.prototype.constructor=gu;gu.prototype.isQuadraticBezierCurve=!0;gu.prototype.getPoint=function(u,z){z=z||new Xe;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2;z.set(kI(u,t.x,x.x,C.x),kI(u,t.y,x.y,C.y));return z};gu.prototype.copy=function(u){ah.prototype.copy.call(this||
p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};gu.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};gu.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};Pv.prototype=Object.create(ah.prototype);Pv.prototype.constructor=Pv;
Pv.prototype.isQuadraticBezierCurve3=!0;Pv.prototype.getPoint=function(u,z){z=z||new nc;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2;z.set(kI(u,t.x,x.x,C.x),kI(u,t.y,x.y,C.y),kI(u,t.z,x.z,C.z));return z};Pv.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};Pv.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();
return u};Pv.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};hu.prototype=Object.create(ah.prototype);hu.prototype.constructor=hu;hu.prototype.isSplineCurve=!0;hu.prototype.getPoint=function(u,z){z=z||new Xe;var t=(this||p).points,x=(t.length-1)*u;u=Math.floor(x);x-=u;var C=t[0===u?u:u-1],G=t[u],L=t[u>t.length-2?t.length-1:u+1];t=t[u>t.length-3?t.length-1:u+2];z.set(n$(x,C.x,
G.x,L.x,t.x),n$(x,C.y,G.y,L.y,t.y));return z};hu.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());return this||p};hu.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.points=[];for(var z=0,t=(this||p).points.length;z<t;z++)u.points.push((this||p).points[z].toArray());return u};hu.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).points=[];
for(var z=0,t=u.points.length;z<t;z++){var x=u.points[z];(this||p).points.push((new Xe).fromArray(x))}return this||p};var pX=Object.freeze({__proto__:null,ArcCurve:xE,CatmullRomCurve3:np,CubicBezierCurve:eu,CubicBezierCurve3:Ov,EllipseCurve:Hr,LineCurve:Jq,LineCurve3:fu,QuadraticBezierCurve:gu,QuadraticBezierCurve3:Pv,SplineCurve:hu});fx.prototype=Object.assign(Object.create(ah.prototype),{constructor:fx,add:function(u){(this||p).curves.push(u)},closePath:function(){var u=(this||p).curves[0].getPoint(0),
z=(this||p).curves[(this||p).curves.length-1].getPoint(1);u.equals(z)||(this||p).curves.push(new Jq(z,u))},getPoint:function(u){var z=u*this.getLength(),t=this.getCurveLengths();for(u=0;u<t.length;){if(t[u]>=z)return z=t[u]-z,u=(this||p).curves[u],t=u.getLength(),u.getPointAt(0===t?0:1-z/t);u++}return null},getLength:function(){var u=this.getCurveLengths();return u[u.length-1]},updateArcLengths:function(){(this||p).needsUpdate=!0;(this||p).cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if((this||
p).cacheLengths&&(this||p).cacheLengths.length===(this||p).curves.length)return(this||p).cacheLengths;for(var u=[],z=0,t=0,x=(this||p).curves.length;t<x;t++)z+=(this||p).curves[t].getLength(),u.push(z);return(this||p).cacheLengths=u},getSpacedPoints:function(u){void 0===u&&(u=40);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));(this||p).autoClose&&z.push(z[0]);return z},getPoints:function(u){u=u||12;for(var z=[],t,x=0,C=(this||p).curves;x<C.length;x++){var G=C[x];G=G.getPoints(G&&G.isEllipseCurve?
2*u:G&&(G.isLineCurve||G.isLineCurve3)?1:G&&G.isSplineCurve?u*G.points.length:u);for(var L=0;L<G.length;L++){var S=G[L];t&&t.equals(S)||(z.push(S),t=S)}}(this||p).autoClose&&1<z.length&&!z[z.length-1].equals(z[0])&&z.push(z[0]);return z},copy:function(u){ah.prototype.copy.call(this||p,u);(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++)(this||p).curves.push(u.curves[z].clone());(this||p).autoClose=u.autoClose;return this||p},toJSON:function(){var u=ah.prototype.toJSON.call(this||p);u.autoClose=
(this||p).autoClose;u.curves=[];for(var z=0,t=(this||p).curves.length;z<t;z++)u.curves.push((this||p).curves[z].toJSON());return u},fromJSON:function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).autoClose=u.autoClose;(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++){var x=u.curves[z];(this||p).curves.push((new pX[x.type]).fromJSON(x))}return this||p}});iu.prototype=Object.assign(Object.create(fx.prototype),{constructor:iu,setFromPoints:function(u){this.moveTo(u[0].x,u[0].y);for(var z=
1,t=u.length;z<t;z++)this.lineTo(u[z].x,u[z].y);return this||p},moveTo:function(u,z){(this||p).currentPoint.set(u,z);return this||p},lineTo:function(u,z){var t=new Jq((this||p).currentPoint.clone(),new Xe(u,z));(this||p).curves.push(t);(this||p).currentPoint.set(u,z);return this||p},quadraticCurveTo:function(u,z,t,x){u=new gu((this||p).currentPoint.clone(),new Xe(u,z),new Xe(t,x));(this||p).curves.push(u);(this||p).currentPoint.set(t,x);return this||p},bezierCurveTo:function(u,z,t,x,C,G){u=new eu((this||
p).currentPoint.clone(),new Xe(u,z),new Xe(t,x),new Xe(C,G));(this||p).curves.push(u);(this||p).currentPoint.set(C,G);return this||p},splineThru:function(u){var z=[(this||p).currentPoint.clone()].concat(u);z=new hu(z);(this||p).curves.push(z);(this||p).currentPoint.copy(u[u.length-1]);return this||p},arc:function(u,z,t,x,C,G){this.absarc(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,x,C,G);return this||p},absarc:function(u,z,t,x,C,G){this.absellipse(u,z,t,t,x,C,G);return this||p},ellipse:function(u,
z,t,x,C,G,L,S){this.absellipse(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,x,C,G,L,S);return this||p},absellipse:function(u,z,t,x,C,G,L,S){u=new Hr(u,z,t,x,C,G,L,S);0<(this||p).curves.length&&(z=u.getPoint(0),z.equals((this||p).currentPoint)||this.lineTo(z.x,z.y));(this||p).curves.push(u);u=u.getPoint(1);(this||p).currentPoint.copy(u);return this||p},copy:function(u){fx.prototype.copy.call(this||p,u);(this||p).currentPoint.copy(u.currentPoint);return this||p},toJSON:function(){var u=fx.prototype.toJSON.call(this||
p);u.currentPoint=(this||p).currentPoint.toArray();return u},fromJSON:function(u){fx.prototype.fromJSON.call(this||p,u);(this||p).currentPoint.fromArray(u.currentPoint);return this||p}});mz.prototype=Object.assign(Object.create(iu.prototype),{constructor:mz,getPointsHoles:function(u){for(var z=[],t=0,x=(this||p).holes.length;t<x;t++)z[t]=(this||p).holes[t].getPoints(u);return z},extractPoints:function(u){return{shape:this.getPoints(u),holes:this.getPointsHoles(u)}},copy:function(u){iu.prototype.copy.call(this||
p,u);(this||p).holes=[];for(var z=0,t=u.holes.length;z<t;z++)(this||p).holes.push(u.holes[z].clone());return this||p},toJSON:function(){var u=iu.prototype.toJSON.call(this||p);u.uuid=(this||p).uuid;u.holes=[];for(var z=0,t=(this||p).holes.length;z<t;z++)u.holes.push((this||p).holes[z].toJSON());return u},fromJSON:function(u){iu.prototype.fromJSON.call(this||p,u);(this||p).uuid=u.uuid;(this||p).holes=[];for(var z=0,t=u.holes.length;z<t;z++){var x=u.holes[z];(this||p).holes.push((new iu).fromJSON(x))}return this||
p}});pl.prototype=Object.assign(Object.create(E.prototype),{constructor:pl,isLight:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).intensity=u.intensity;return this||p},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);u.object.color=(this||p).color.getHex();u.object.intensity=(this||p).intensity;void 0!==(this||p).groundColor&&(u.object.groundColor=(this||p).groundColor.getHex());void 0!==(this||p).distance&&(u.object.distance=(this||p).distance);
void 0!==(this||p).angle&&(u.object.angle=(this||p).angle);void 0!==(this||p).decay&&(u.object.decay=(this||p).decay);void 0!==(this||p).penumbra&&(u.object.penumbra=(this||p).penumbra);void 0!==(this||p).shadow&&(u.object.shadow=(this||p).shadow.toJSON());return u}});pO.prototype=Object.assign(Object.create(pl.prototype),{constructor:pO,isHemisphereLight:!0,copy:function(u){pl.prototype.copy.call(this||p,u);(this||p).groundColor.copy(u.groundColor);return this||p}});Object.assign(gx.prototype,{_projScreenMatrix:new fj,
_lightPositionWorld:new nc,_lookTarget:new nc,getViewportCount:function(){return(this||p)._viewportCount},getFrustum:function(){return(this||p)._frustum},updateMatrices:function(u){var z=(this||p).camera,t=(this||p).matrix,x=(this||p)._projScreenMatrix,C=(this||p)._lookTarget,G=(this||p)._lightPositionWorld;G.setFromMatrixPosition(u.matrixWorld);z.position.copy(G);C.setFromMatrixPosition(u.target.matrixWorld);z.lookAt(C);z.updateMatrixWorld();x.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse);
(this||p)._frustum.setFromProjectionMatrix(x);t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);t.multiply(z.projectionMatrix);t.multiply(z.matrixWorldInverse)},getViewport:function(u){return(this||p)._viewports[u]},getFrameExtents:function(){return(this||p)._frameExtents},copy:function(u){(this||p).camera=u.camera.clone();(this||p).bias=u.bias;(this||p).radius=u.radius;(this||p).mapSize.copy(u.mapSize);return this||p},clone:function(){return(new (this||p).constructor).copy(this||p)},toJSON:function(){var u=
{};0!==(this||p).bias&&(u.bias=(this||p).bias);0!==(this||p).normalBias&&(u.normalBias=(this||p).normalBias);1!==(this||p).radius&&(u.radius=(this||p).radius);if(512!==(this||p).mapSize.x||512!==(this||p).mapSize.y)u.mapSize=(this||p).mapSize.toArray();u.camera=(this||p).camera.toJSON(!1).object;delete u.camera.matrix;return u}});oW.prototype=Object.assign(Object.create(gx.prototype),{constructor:oW,isSpotLightShadow:!0,updateMatrices:function(u){var z=(this||p).camera,t=2*Xh.RAD2DEG*u.angle*(this||
p).focus,x=(this||p).mapSize.width/(this||p).mapSize.height,C=u.distance||z.far;if(t!==z.fov||x!==z.aspect||C!==z.far)z.fov=t,z.aspect=x,z.far=C,z.updateProjectionMatrix();gx.prototype.updateMatrices.call(this||p,u)}});qO.prototype=Object.assign(Object.create(pl.prototype),{constructor:qO,isSpotLight:!0,copy:function(u){pl.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).angle=u.angle;(this||p).penumbra=u.penumbra;(this||p).decay=u.decay;(this||p).target=u.target.clone();(this||
p).shadow=u.shadow.clone();return this||p}});pW.prototype=Object.assign(Object.create(gx.prototype),{constructor:pW,isPointLightShadow:!0,updateMatrices:function(u,z){void 0===z&&(z=0);var t=(this||p).camera,x=(this||p).matrix,C=(this||p)._lightPositionWorld,G=(this||p)._lookTarget,L=(this||p)._projScreenMatrix;C.setFromMatrixPosition(u.matrixWorld);t.position.copy(C);G.copy(t.position);G.add((this||p)._cubeDirections[z]);t.up.copy((this||p)._cubeUps[z]);t.lookAt(G);t.updateMatrixWorld();x.makeTranslation(-C.x,
-C.y,-C.z);L.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);(this||p)._frustum.setFromProjectionMatrix(L)}});rO.prototype=Object.assign(Object.create(pl.prototype),{constructor:rO,isPointLight:!0,copy:function(u){pl.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).decay=u.decay;(this||p).shadow=u.shadow.clone();return this||p}});yE.prototype=Object.assign(Object.create(Lb.prototype),{constructor:yE,isOrthographicCamera:!0,copy:function(u,z){Lb.prototype.copy.call(this||
p,u,z);(this||p).left=u.left;(this||p).right=u.right;(this||p).top=u.top;(this||p).bottom=u.bottom;(this||p).near=u.near;(this||p).far=u.far;(this||p).zoom=u.zoom;(this||p).view=null===u.view?null:Object.assign({},u.view);return this||p},setViewOffset:function(u,z,t,x,C,G){null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=z;(this||p).view.offsetX=t;(this||
p).view.offsetY=x;(this||p).view.width=C;(this||p).view.height=G;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=((this||p).right-(this||p).left)/(2*(this||p).zoom),z=((this||p).top-(this||p).bottom)/(2*(this||p).zoom),t=((this||p).right+(this||p).left)/2,x=((this||p).top+(this||p).bottom)/2,C=t-u;t+=u;u=x+z;z=x-z;null!==(this||p).view&&(this||p).view.enabled&&(x=((this||
p).right-(this||p).left)/(this||p).view.fullWidth/(this||p).zoom,z=((this||p).top-(this||p).bottom)/(this||p).view.fullHeight/(this||p).zoom,C+=x*(this||p).view.offsetX,t=C+x*(this||p).view.width,u-=z*(this||p).view.offsetY,z=u-z*(this||p).view.height);(this||p).projectionMatrix.makeOrthographic(C,t,u,z,(this||p).near,(this||p).far);(this||p).projectionMatrixInverse.getInverse((this||p).projectionMatrix)},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);u.object.zoom=(this||p).zoom;u.object.left=
(this||p).left;u.object.right=(this||p).right;u.object.top=(this||p).top;u.object.bottom=(this||p).bottom;u.object.near=(this||p).near;u.object.far=(this||p).far;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));return u}});qW.prototype=Object.assign(Object.create(gx.prototype),{constructor:qW,isDirectionalLightShadow:!0,updateMatrices:function(u){gx.prototype.updateMatrices.call(this||p,u)}});sO.prototype=Object.assign(Object.create(pl.prototype),{constructor:sO,isDirectionalLight:!0,
copy:function(u){pl.prototype.copy.call(this||p,u);(this||p).target=u.target.clone();(this||p).shadow=u.shadow.clone();return this||p}});tO.prototype=Object.assign(Object.create(pl.prototype),{constructor:tO,isAmbientLight:!0});uO.prototype=Object.assign(Object.create(pl.prototype),{constructor:uO,isRectAreaLight:!0,copy:function(u){pl.prototype.copy.call(this||p,u);(this||p).width=u.width;(this||p).height=u.height;return this||p},toJSON:function(u){u=pl.prototype.toJSON.call(this||p,u);u.object.width=
(this||p).width;u.object.height=(this||p).height;return u}});var o$=function(){function u(){Object.defineProperty(this||p,"isSphericalHarmonics3",{value:!0});(this||p).coefficients=[];for(var t=0;9>t;t++)(this||p).coefficients.push(new nc)}var z=u.prototype;z.set=function(t){for(var x=0;9>x;x++)(this||p).coefficients[x].copy(t[x]);return this||p};z.zero=function(){for(var t=0;9>t;t++)(this||p).coefficients[t].set(0,0,0);return this||p};z.getAt=function(t,x){var C=t.x,G=t.y;t=t.z;var L=(this||p).coefficients;
x.copy(L[0]).multiplyScalar(.282095);x.addScaledVector(L[1],.488603*G);x.addScaledVector(L[2],.488603*t);x.addScaledVector(L[3],.488603*C);x.addScaledVector(L[4],1.092548*C*G);x.addScaledVector(L[5],1.092548*G*t);x.addScaledVector(L[6],.315392*(3*t*t-1));x.addScaledVector(L[7],1.092548*C*t);x.addScaledVector(L[8],.546274*(C*C-G*G));return x};z.getIrradianceAt=function(t,x){var C=t.x,G=t.y;t=t.z;var L=(this||p).coefficients;x.copy(L[0]).multiplyScalar(.886227);x.addScaledVector(L[1],1.023328*G);x.addScaledVector(L[2],
1.023328*t);x.addScaledVector(L[3],1.023328*C);x.addScaledVector(L[4],.858086*C*G);x.addScaledVector(L[5],.858086*G*t);x.addScaledVector(L[6],.743125*t*t-.247708);x.addScaledVector(L[7],.858086*C*t);x.addScaledVector(L[8],.429043*(C*C-G*G));return x};z.add=function(t){for(var x=0;9>x;x++)(this||p).coefficients[x].add(t.coefficients[x]);return this||p};z.addScaledSH=function(t,x){for(var C=0;9>C;C++)(this||p).coefficients[C].addScaledVector(t.coefficients[C],x);return this||p};z.scale=function(t){for(var x=
0;9>x;x++)(this||p).coefficients[x].multiplyScalar(t);return this||p};z.lerp=function(t,x){for(var C=0;9>C;C++)(this||p).coefficients[C].lerp(t.coefficients[C],x);return this||p};z.equals=function(t){for(var x=0;9>x;x++)if(!(this||p).coefficients[x].equals(t.coefficients[x]))return!1;return!0};z.copy=function(t){return this.set(t.coefficients)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.fromArray=function(t,x){void 0===x&&(x=0);for(var C=(this||p).coefficients,G=0;9>G;G++)C[G].fromArray(t,
x+3*G);return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);for(var C=(this||p).coefficients,G=0;9>G;G++)C[G].toArray(t,x+3*G);return t};u.getBasisAt=function(t,x){var C=t.x,G=t.y;t=t.z;x[0]=.282095;x[1]=.488603*G;x[2]=.488603*t;x[3]=.488603*C;x[4]=1.092548*C*G;x[5]=1.092548*G*t;x[6]=.315392*(3*t*t-1);x[7]=1.092548*C*t;x[8]=.546274*(C*C-G*G)};return u}();$s.prototype=Object.assign(Object.create(pl.prototype),{constructor:$s,isLightProbe:!0,copy:function(u){pl.prototype.copy.call(this||
p,u);(this||p).sh.copy(u.sh);return this||p},fromJSON:function(u){(this||p).intensity=u.intensity;(this||p).sh.fromArray(u.sh);return this||p},toJSON:function(u){u=pl.prototype.toJSON.call(this||p,u);u.object.sh=(this||p).sh.toArray();return u}});vO.prototype=Object.assign(Object.create(Mk.prototype),{constructor:vO,load:function(u,z,t,x){var C=this||p,G=new Zs(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{z(C.parse(JSON.parse(L)))}catch(S){x?
x(S):console.error(S),C.manager.itemError(u)}},t,x)},parse:function(u){function z(S){void 0===t[S]&&console.warn("THREE.MaterialLoader: Undefined texture",S);return t[S]}var t=(this||p).textures,x=new Hra[u.type];void 0!==u.uuid&&(x.uuid=u.uuid);void 0!==u.name&&(x.name=u.name);void 0!==u.color&&void 0!==x.color&&x.color.setHex(u.color);void 0!==u.roughness&&(x.roughness=u.roughness);void 0!==u.metalness&&(x.metalness=u.metalness);void 0!==u.sheen&&(x.sheen=(new rg).setHex(u.sheen));void 0!==u.emissive&&
void 0!==x.emissive&&x.emissive.setHex(u.emissive);void 0!==u.specular&&void 0!==x.specular&&x.specular.setHex(u.specular);void 0!==u.shininess&&(x.shininess=u.shininess);void 0!==u.clearcoat&&(x.clearcoat=u.clearcoat);void 0!==u.clearcoatRoughness&&(x.clearcoatRoughness=u.clearcoatRoughness);void 0!==u.fog&&(x.fog=u.fog);void 0!==u.flatShading&&(x.flatShading=u.flatShading);void 0!==u.blending&&(x.blending=u.blending);void 0!==u.combine&&(x.combine=u.combine);void 0!==u.side&&(x.side=u.side);void 0!==
u.opacity&&(x.opacity=u.opacity);void 0!==u.transparent&&(x.transparent=u.transparent);void 0!==u.alphaTest&&(x.alphaTest=u.alphaTest);void 0!==u.depthTest&&(x.depthTest=u.depthTest);void 0!==u.depthWrite&&(x.depthWrite=u.depthWrite);void 0!==u.colorWrite&&(x.colorWrite=u.colorWrite);void 0!==u.stencilWrite&&(x.stencilWrite=u.stencilWrite);void 0!==u.stencilWriteMask&&(x.stencilWriteMask=u.stencilWriteMask);void 0!==u.stencilFunc&&(x.stencilFunc=u.stencilFunc);void 0!==u.stencilRef&&(x.stencilRef=
u.stencilRef);void 0!==u.stencilFuncMask&&(x.stencilFuncMask=u.stencilFuncMask);void 0!==u.stencilFail&&(x.stencilFail=u.stencilFail);void 0!==u.stencilZFail&&(x.stencilZFail=u.stencilZFail);void 0!==u.stencilZPass&&(x.stencilZPass=u.stencilZPass);void 0!==u.wireframe&&(x.wireframe=u.wireframe);void 0!==u.wireframeLinewidth&&(x.wireframeLinewidth=u.wireframeLinewidth);void 0!==u.wireframeLinecap&&(x.wireframeLinecap=u.wireframeLinecap);void 0!==u.wireframeLinejoin&&(x.wireframeLinejoin=u.wireframeLinejoin);
void 0!==u.rotation&&(x.rotation=u.rotation);1!==u.linewidth&&(x.linewidth=u.linewidth);void 0!==u.dashSize&&(x.dashSize=u.dashSize);void 0!==u.gapSize&&(x.gapSize=u.gapSize);void 0!==u.scale&&(x.scale=u.scale);void 0!==u.polygonOffset&&(x.polygonOffset=u.polygonOffset);void 0!==u.polygonOffsetFactor&&(x.polygonOffsetFactor=u.polygonOffsetFactor);void 0!==u.polygonOffsetUnits&&(x.polygonOffsetUnits=u.polygonOffsetUnits);void 0!==u.skinning&&(x.skinning=u.skinning);void 0!==u.morphTargets&&(x.morphTargets=
u.morphTargets);void 0!==u.morphNormals&&(x.morphNormals=u.morphNormals);void 0!==u.dithering&&(x.dithering=u.dithering);void 0!==u.vertexTangents&&(x.vertexTangents=u.vertexTangents);void 0!==u.visible&&(x.visible=u.visible);void 0!==u.toneMapped&&(x.toneMapped=u.toneMapped);void 0!==u.userData&&(x.userData=u.userData);void 0!==u.vertexColors&&(x.vertexColors="number"===typeof u.vertexColors?0<u.vertexColors?!0:!1:u.vertexColors);if(void 0!==u.uniforms)for(var C in u.uniforms){var G=u.uniforms[C];
x.uniforms[C]={};switch(G.type){case "t":x.uniforms[C].value=z(G.value);break;case "c":x.uniforms[C].value=(new rg).setHex(G.value);break;case "v2":x.uniforms[C].value=(new Xe).fromArray(G.value);break;case "v3":x.uniforms[C].value=(new nc).fromArray(G.value);break;case "v4":x.uniforms[C].value=(new Rk).fromArray(G.value);break;case "m3":x.uniforms[C].value=(new Up).fromArray(G.value);break;case "m4":x.uniforms[C].value=(new fj).fromArray(G.value);break;default:x.uniforms[C].value=G.value}}void 0!==
u.defines&&(x.defines=u.defines);void 0!==u.vertexShader&&(x.vertexShader=u.vertexShader);void 0!==u.fragmentShader&&(x.fragmentShader=u.fragmentShader);if(void 0!==u.extensions)for(var L in u.extensions)x.extensions[L]=u.extensions[L];void 0!==u.shading&&(x.flatShading=1===u.shading);void 0!==u.size&&(x.size=u.size);void 0!==u.sizeAttenuation&&(x.sizeAttenuation=u.sizeAttenuation);void 0!==u.map&&(x.map=z(u.map));void 0!==u.matcap&&(x.matcap=z(u.matcap));void 0!==u.alphaMap&&(x.alphaMap=z(u.alphaMap));
void 0!==u.bumpMap&&(x.bumpMap=z(u.bumpMap));void 0!==u.bumpScale&&(x.bumpScale=u.bumpScale);void 0!==u.normalMap&&(x.normalMap=z(u.normalMap));void 0!==u.normalMapType&&(x.normalMapType=u.normalMapType);void 0!==u.normalScale&&(C=u.normalScale,!1===Array.isArray(C)&&(C=[C,C]),x.normalScale=(new Xe).fromArray(C));void 0!==u.displacementMap&&(x.displacementMap=z(u.displacementMap));void 0!==u.displacementScale&&(x.displacementScale=u.displacementScale);void 0!==u.displacementBias&&(x.displacementBias=
u.displacementBias);void 0!==u.roughnessMap&&(x.roughnessMap=z(u.roughnessMap));void 0!==u.metalnessMap&&(x.metalnessMap=z(u.metalnessMap));void 0!==u.emissiveMap&&(x.emissiveMap=z(u.emissiveMap));void 0!==u.emissiveIntensity&&(x.emissiveIntensity=u.emissiveIntensity);void 0!==u.specularMap&&(x.specularMap=z(u.specularMap));void 0!==u.envMap&&(x.envMap=z(u.envMap));void 0!==u.envMapIntensity&&(x.envMapIntensity=u.envMapIntensity);void 0!==u.reflectivity&&(x.reflectivity=u.reflectivity);void 0!==u.refractionRatio&&
(x.refractionRatio=u.refractionRatio);void 0!==u.lightMap&&(x.lightMap=z(u.lightMap));void 0!==u.lightMapIntensity&&(x.lightMapIntensity=u.lightMapIntensity);void 0!==u.aoMap&&(x.aoMap=z(u.aoMap));void 0!==u.aoMapIntensity&&(x.aoMapIntensity=u.aoMapIntensity);void 0!==u.gradientMap&&(x.gradientMap=z(u.gradientMap));void 0!==u.clearcoatMap&&(x.clearcoatMap=z(u.clearcoatMap));void 0!==u.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap=z(u.clearcoatRoughnessMap));void 0!==u.clearcoatNormalMap&&(x.clearcoatNormalMap=
z(u.clearcoatNormalMap));void 0!==u.clearcoatNormalScale&&(x.clearcoatNormalScale=(new Xe).fromArray(u.clearcoatNormalScale));void 0!==u.transmission&&(x.transmission=u.transmission);void 0!==u.transmissionMap&&(x.transmissionMap=z(u.transmissionMap));return x},setTextures:function(u){(this||p).textures=u;return this||p}});var qX={decodeText:function(u){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(u);for(var z="",t=0,x=u.length;t<x;t++)z+=String.fromCharCode(u[t]);try{return decodeURIComponent(escape(z))}catch(C){return z}},
extractUrlBase:function(u){var z=u.lastIndexOf("/");return-1===z?"./":u.substr(0,z+1)}};mI.prototype=Object.assign(Object.create(oa.prototype),{constructor:mI,isInstancedBufferGeometry:!0,copy:function(u){oa.prototype.copy.call(this||p,u);(this||p).instanceCount=u.instanceCount;return this||p},clone:function(){return(new (this||p).constructor).copy(this||p)},toJSON:function(){var u=oa.prototype.toJSON.call(this||p);u.instanceCount=(this||p).instanceCount;u.isInstancedBufferGeometry=!0;return u}});
wO.prototype=Object.assign(Object.create(X.prototype),{constructor:wO,isInstancedBufferAttribute:!0,copy:function(u){X.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},toJSON:function(){var u=X.prototype.toJSON.call(this||p);u.meshPerAttribute=(this||p).meshPerAttribute;u.isInstancedBufferAttribute=!0;return u}});xO.prototype=Object.assign(Object.create(Mk.prototype),{constructor:xO,load:function(u,z,t,x){var C=this||p,G=new Zs(C.manager);G.setPath(C.path);
G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{z(C.parse(JSON.parse(L)))}catch(S){x?x(S):console.error(S),C.manager.itemError(u)}},t,x)},parse:function(u){function z(db,Ya){if(void 0!==t[Ya])return t[Ya];var vb=db.interleavedBuffers[Ya];var sb=vb.buffer;void 0!==x[sb]?sb=x[sb]:(db=(new Uint32Array(db.arrayBuffers[sb])).buffer,sb=x[sb]=db);sb=new ZO[vb.type](sb);sb=new Fr(sb,vb.stride);sb.uuid=vb.uuid;return t[Ya]=sb}var t={},x={},C=u.isInstancedBufferGeometry?
new mI:new oa,G=u.data.index;void 0!==G&&(G=new ZO[G.type](G.array),C.setIndex(new X(G,1)));G=u.data.attributes;for(var L in G){var S=G[L],V=void 0;S.isInterleavedBufferAttribute?(V=z(u.data,S.data),V=new hz(V,S.itemSize,S.offset,S.normalized)):(V=new ZO[S.type](S.array),V=new (S.isInstancedBufferAttribute?wO:X)(V,S.itemSize,S.normalized));void 0!==S.name&&(V.name=S.name);C.setAttribute(L,V)}if(L=u.data.morphAttributes)for(var Z in L){G=L[Z];S=[];V=0;for(var ja=G.length;V<ja;V++){var ta=G[V],Ha=void 0;
ta.isInterleavedBufferAttribute?(Ha=z(u.data,ta.data),Ha=new hz(Ha,ta.itemSize,ta.offset,ta.normalized)):(Ha=new ZO[ta.type](ta.array),Ha=new X(Ha,ta.itemSize,ta.normalized));void 0!==ta.name&&(Ha.name=ta.name);S.push(Ha)}C.morphAttributes[Z]=S}u.data.morphTargetsRelative&&(C.morphTargetsRelative=!0);Z=u.data.groups||u.data.drawcalls||u.data.offsets;if(void 0!==Z)for(L=0,G=Z.length;L!==G;++L)S=Z[L],C.addGroup(S.start,S.count,S.materialIndex);Z=u.data.boundingSphere;void 0!==Z&&(L=new nc,void 0!==
Z.center&&L.fromArray(Z.center),C.boundingSphere=new ix(L,Z.radius));u.name&&(C.name=u.name);u.userData&&(C.userData=u.userData);return C}});var ZO={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},Jra=function(u){function z(x){return u.call(this||p,x)||this||p}g(z,u);var t=z.prototype;
t.load=function(x,C,G,L){var S=this||p,V=""===(this||p).path?qX.extractUrlBase(x):(this||p).path;(this||p).resourcePath=(this||p).resourcePath||V;V=new Zs((this||p).manager);V.setPath((this||p).path);V.setRequestHeader((this||p).requestHeader);V.setWithCredentials((this||p).withCredentials);V.load(x,function(Z){var ja=null;try{ja=JSON.parse(Z)}catch(ta){void 0!==L&&L(ta);console.error("THREE:ObjectLoader: Can't parse "+x+".",ta.message);return}Z=ja.metadata;void 0===Z||void 0===Z.type||"geometry"===
Z.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+x):S.parse(ja,C)},G,L)};t.parse=function(x,C){var G=this.parseShape(x.shapes);G=this.parseGeometries(x.geometries,G);var L=this.parseImages(x.images,function(){void 0!==C&&C(S)});L=this.parseTextures(x.textures,L);L=this.parseMaterials(x.materials,L);var S=this.parseObject(x.object,G,L);x.animations&&(S.animations=this.parseAnimations(x.animations));void 0!==x.images&&0!==x.images.length||void 0===C||C(S);return S};t.parseShape=
function(x){var C={};if(void 0!==x)for(var G=0,L=x.length;G<L;G++){var S=(new mz).fromJSON(x[G]);C[S.uuid]=S}return C};t.parseGeometries=function(x,C){var G={};if(void 0!==x)for(var L=new xO,S=0,V=x.length;S<V;S++){var Z=void 0;var ja=x[S];switch(ja.type){case "PlaneGeometry":case "PlaneBufferGeometry":Z=new Xp[ja.type](ja.width,ja.height,ja.widthSegments,ja.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":Z=new Xp[ja.type](ja.width,ja.height,ja.depth,ja.widthSegments,
ja.heightSegments,ja.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":Z=new Xp[ja.type](ja.radius,ja.segments,ja.thetaStart,ja.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":Z=new Xp[ja.type](ja.radiusTop,ja.radiusBottom,ja.height,ja.radialSegments,ja.heightSegments,ja.openEnded,ja.thetaStart,ja.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":Z=new Xp[ja.type](ja.radius,ja.height,ja.radialSegments,ja.heightSegments,ja.openEnded,ja.thetaStart,
ja.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":Z=new Xp[ja.type](ja.radius,ja.widthSegments,ja.heightSegments,ja.phiStart,ja.phiLength,ja.thetaStart,ja.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":Z=new Xp[ja.type](ja.radius,ja.detail);break;case "RingGeometry":case "RingBufferGeometry":Z=
new Xp[ja.type](ja.innerRadius,ja.outerRadius,ja.thetaSegments,ja.phiSegments,ja.thetaStart,ja.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":Z=new Xp[ja.type](ja.radius,ja.tube,ja.radialSegments,ja.tubularSegments,ja.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":Z=new Xp[ja.type](ja.radius,ja.tube,ja.tubularSegments,ja.radialSegments,ja.p,ja.q);break;case "TubeGeometry":case "TubeBufferGeometry":Z=new Xp[ja.type]((new pX[ja.path.type]).fromJSON(ja.path),ja.tubularSegments,
ja.radius,ja.radialSegments,ja.closed);break;case "LatheGeometry":case "LatheBufferGeometry":Z=new Xp[ja.type](ja.points,ja.segments,ja.phiStart,ja.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":Z=new Xp[ja.type](ja.vertices,ja.indices,ja.radius,ja.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":Z=[];for(var ta=0,Ha=ja.shapes.length;ta<Ha;ta++)Z.push(C[ja.shapes[ta]]);Z=new Xp[ja.type](Z,ja.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":Z=
[];ta=0;for(Ha=ja.shapes.length;ta<Ha;ta++)Z.push(C[ja.shapes[ta]]);ta=ja.options.extrudePath;void 0!==ta&&(ja.options.extrudePath=(new pX[ta.type]).fromJSON(ta));Z=new Xp[ja.type](Z,ja.options);break;case "BufferGeometry":case "InstancedBufferGeometry":Z=L.parse(ja);break;case "Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+ja.type+'"');continue}Z.uuid=ja.uuid;void 0!==ja.name&&
(Z.name=ja.name);!0===Z.isBufferGeometry&&void 0!==ja.userData&&(Z.userData=ja.userData);G[ja.uuid]=Z}return G};t.parseMaterials=function(x,C){var G={},L={};if(void 0!==x){var S=new vO;S.setTextures(C);C=0;for(var V=x.length;C<V;C++){var Z=x[C];if("MultiMaterial"===Z.type){for(var ja=[],ta=0;ta<Z.materials.length;ta++){var Ha=Z.materials[ta];void 0===G[Ha.uuid]&&(G[Ha.uuid]=S.parse(Ha));ja.push(G[Ha.uuid])}L[Z.uuid]=ja}else void 0===G[Z.uuid]&&(G[Z.uuid]=S.parse(Z)),L[Z.uuid]=G[Z.uuid]}}return L};
t.parseAnimations=function(x){for(var C=[],G=0;G<x.length;G++){var L=x[G],S=Ys.parse(L);void 0!==L.uuid&&(S.uuid=L.uuid);C.push(S)}return C};t.parseImages=function(x,C){function G(vb){L.manager.itemStart(vb);return V.load(vb,function(){L.manager.itemEnd(vb)},void 0,function(){L.manager.itemError(vb);L.manager.itemEnd(vb)})}var L=this||p,S={};if(void 0!==x&&0<x.length){C=new kW(C);var V=new wE(C);V.setCrossOrigin((this||p).crossOrigin);C=0;for(var Z=x.length;C<Z;C++){var ja=x[C],ta=ja.url;if(Array.isArray(ta)){S[ja.uuid]=
[];for(var Ha=0,db=ta.length;Ha<db;Ha++){var Ya=ta[Ha];Ya=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ya)?Ya:L.resourcePath+Ya;S[ja.uuid].push(G(Ya))}}else ta=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ja.url)?ja.url:L.resourcePath+ja.url,S[ja.uuid]=G(ta)}}return S};t.parseTextures=function(x,C){function G(ta,Ha){if("number"===typeof ta)return ta;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ta);return Ha[ta]}var L={};if(void 0!==x)for(var S=0,V=x.length;S<V;S++){var Z=x[S];void 0===
Z.image&&console.warn('THREE.ObjectLoader: No "image" specified for',Z.uuid);void 0===C[Z.image]&&console.warn("THREE.ObjectLoader: Undefined image",Z.image);var ja=void 0;ja=Array.isArray(C[Z.image])?new jc(C[Z.image]):new r(C[Z.image]);ja.needsUpdate=!0;ja.uuid=Z.uuid;void 0!==Z.name&&(ja.name=Z.name);void 0!==Z.mapping&&(ja.mapping=G(Z.mapping,Ira));void 0!==Z.offset&&ja.offset.fromArray(Z.offset);void 0!==Z.repeat&&ja.repeat.fromArray(Z.repeat);void 0!==Z.center&&ja.center.fromArray(Z.center);
void 0!==Z.rotation&&(ja.rotation=Z.rotation);void 0!==Z.wrap&&(ja.wrapS=G(Z.wrap[0],laa),ja.wrapT=G(Z.wrap[1],laa));void 0!==Z.format&&(ja.format=Z.format);void 0!==Z.type&&(ja.type=Z.type);void 0!==Z.encoding&&(ja.encoding=Z.encoding);void 0!==Z.minFilter&&(ja.minFilter=G(Z.minFilter,maa));void 0!==Z.magFilter&&(ja.magFilter=G(Z.magFilter,maa));void 0!==Z.anisotropy&&(ja.anisotropy=Z.anisotropy);void 0!==Z.flipY&&(ja.flipY=Z.flipY);void 0!==Z.premultiplyAlpha&&(ja.premultiplyAlpha=Z.premultiplyAlpha);
void 0!==Z.unpackAlignment&&(ja.unpackAlignment=Z.unpackAlignment);L[Z.uuid]=ja}return L};t.parseObject=function(x,C,G){function L(Ha){void 0===C[Ha]&&console.warn("THREE.ObjectLoader: Undefined geometry",Ha);return C[Ha]}function S(Ha){if(void 0!==Ha){if(Array.isArray(Ha)){for(var db=[],Ya=0,vb=Ha.length;Ya<vb;Ya++){var sb=Ha[Ya];void 0===G[sb]&&console.warn("THREE.ObjectLoader: Undefined material",sb);db.push(G[sb])}return db}void 0===G[Ha]&&console.warn("THREE.ObjectLoader: Undefined material",
Ha);return G[Ha]}}switch(x.type){case "Scene":var V=new SW;void 0!==x.background&&Number.isInteger(x.background)&&(V.background=new rg(x.background));void 0!==x.fog&&("Fog"===x.fog.type?V.fog=new L$(x.fog.color,x.fog.near,x.fog.far):"FogExp2"===x.fog.type&&(V.fog=new K$(x.fog.color,x.fog.density)));break;case "PerspectiveCamera":V=new ic(x.fov,x.aspect,x.near,x.far);void 0!==x.focus&&(V.focus=x.focus);void 0!==x.zoom&&(V.zoom=x.zoom);void 0!==x.filmGauge&&(V.filmGauge=x.filmGauge);void 0!==x.filmOffset&&
(V.filmOffset=x.filmOffset);void 0!==x.view&&(V.view=Object.assign({},x.view));break;case "OrthographicCamera":V=new yE(x.left,x.right,x.top,x.bottom,x.near,x.far);void 0!==x.zoom&&(V.zoom=x.zoom);void 0!==x.view&&(V.view=Object.assign({},x.view));break;case "AmbientLight":V=new tO(x.color,x.intensity);break;case "DirectionalLight":V=new sO(x.color,x.intensity);break;case "PointLight":V=new rO(x.color,x.intensity,x.distance,x.decay);break;case "RectAreaLight":V=new uO(x.color,x.intensity,x.width,
x.height);break;case "SpotLight":V=new qO(x.color,x.intensity,x.distance,x.angle,x.penumbra,x.decay);break;case "HemisphereLight":V=new pO(x.color,x.groundColor,x.intensity);break;case "LightProbe":V=(new $s).fromJSON(x);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":V=L(x.geometry);var Z=S(x.material);V=new hb(V,Z);break;case "InstancedMesh":V=L(x.geometry);Z=S(x.material);var ja=x.instanceMatrix;V=new bO(V,Z,x.count);V.instanceMatrix=
new X(new Float32Array(ja.array),16);break;case "LOD":V=new bI;break;case "Line":V=new Xs(L(x.geometry),S(x.material),x.mode);break;case "LineLoop":V=new cO(L(x.geometry),S(x.material));break;case "LineSegments":V=new Vp(L(x.geometry),S(x.material));break;case "PointCloud":case "Points":V=new qE(L(x.geometry),S(x.material));break;case "Sprite":V=new $H(S(x.material));break;case "Group":V=new dz;break;default:V=new E}V.uuid=x.uuid;void 0!==x.name&&(V.name=x.name);void 0!==x.matrix?(V.matrix.fromArray(x.matrix),
void 0!==x.matrixAutoUpdate&&(V.matrixAutoUpdate=x.matrixAutoUpdate),V.matrixAutoUpdate&&V.matrix.decompose(V.position,V.quaternion,V.scale)):(void 0!==x.position&&V.position.fromArray(x.position),void 0!==x.rotation&&V.rotation.fromArray(x.rotation),void 0!==x.quaternion&&V.quaternion.fromArray(x.quaternion),void 0!==x.scale&&V.scale.fromArray(x.scale));void 0!==x.castShadow&&(V.castShadow=x.castShadow);void 0!==x.receiveShadow&&(V.receiveShadow=x.receiveShadow);x.shadow&&(void 0!==x.shadow.bias&&
(V.shadow.bias=x.shadow.bias),void 0!==x.shadow.normalBias&&(V.shadow.normalBias=x.shadow.normalBias),void 0!==x.shadow.radius&&(V.shadow.radius=x.shadow.radius),void 0!==x.shadow.mapSize&&V.shadow.mapSize.fromArray(x.shadow.mapSize),void 0!==x.shadow.camera&&(V.shadow.camera=this.parseObject(x.shadow.camera)));void 0!==x.visible&&(V.visible=x.visible);void 0!==x.frustumCulled&&(V.frustumCulled=x.frustumCulled);void 0!==x.renderOrder&&(V.renderOrder=x.renderOrder);void 0!==x.userData&&(V.userData=
x.userData);void 0!==x.layers&&(V.layers.mask=x.layers);if(void 0!==x.children)for(ja=x.children,Z=0;Z<ja.length;Z++)V.add(this.parseObject(ja[Z],C,G));if("LOD"===x.type)for(void 0!==x.autoUpdate&&(V.autoUpdate=x.autoUpdate),x=x.levels,ja=0;ja<x.length;ja++){Z=x[ja];var ta=V.getObjectByProperty("uuid",Z.object);void 0!==ta&&V.addLevel(ta,Z.distance)}return V};t.setTexturePath=function(x){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(x)};
return z}(Mk),Ira={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},laa={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},maa={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};rW.prototype=Object.assign(Object.create(Mk.prototype),
{constructor:rW,isImageBitmapLoader:!0,setOptions:function(u){(this||p).options=u;return this||p},load:function(u,z,t,x){void 0===u&&(u="");void 0!==(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,G=WB.get(u);if(void 0!==G)return C.manager.itemStart(u),setTimeout(function(){z&&z(G);C.manager.itemEnd(u)},0),G;t={};t.credentials="anonymous"===(this||p).crossOrigin?"same-origin":"include";fetch(u,t).then(function(L){return L.blob()}).then(function(L){return createImageBitmap(L,
C.options)}).then(function(L){WB.add(u,L);z&&z(L);C.manager.itemEnd(u)}).catch(function(L){x&&x(L);C.manager.itemError(u);C.manager.itemEnd(u)});C.manager.itemStart(u)}});Object.assign(sW.prototype,{moveTo:function(u,z){(this||p).currentPath=new iu;(this||p).subPaths.push((this||p).currentPath);(this||p).currentPath.moveTo(u,z);return this||p},lineTo:function(u,z){(this||p).currentPath.lineTo(u,z);return this||p},quadraticCurveTo:function(u,z,t,x){(this||p).currentPath.quadraticCurveTo(u,z,t,x);return this||
p},bezierCurveTo:function(u,z,t,x,C,G){(this||p).currentPath.bezierCurveTo(u,z,t,x,C,G);return this||p},splineThru:function(u){(this||p).currentPath.splineThru(u);return this||p},toShapes:function(u,z){function t(sb){for(var Qc=[],zc=0,jd=sb.length;zc<jd;zc++){var Bc=sb[zc],kd=new mz;kd.curves=Bc.curves;Qc.push(kd)}return Qc}function x(sb,Qc){for(var zc=Qc.length,jd=!1,Bc=zc-1,kd=0;kd<zc;Bc=kd++){var ud=Qc[Bc],Vd=Qc[kd],Ad=Vd.x-ud.x,gd=Vd.y-ud.y;if(Math.abs(gd)>Number.EPSILON){if(0>gd&&(ud=Qc[kd],
Ad=-Ad,Vd=Qc[Bc],gd=-gd),!(sb.y<ud.y||sb.y>Vd.y))if(sb.y===ud.y){if(sb.x===ud.x)return!0}else{Bc=gd*(sb.x-ud.x)-Ad*(sb.y-ud.y);if(0===Bc)return!0;0>Bc||(jd=!jd)}}else if(sb.y===ud.y&&(Vd.x<=sb.x&&sb.x<=ud.x||ud.x<=sb.x&&sb.x<=Vd.x))return!0}return jd}var C=nx.isClockWise,G=(this||p).subPaths;if(0===G.length)return[];if(!0===z)return t(G);z=[];if(1===G.length){var L=G[0];var S=new mz;S.curves=L.curves;z.push(S);return z}var V=!C(G[0].getPoints());V=u?!V:V;S=[];var Z=[],ja=[],ta=0;Z[ta]=void 0;ja[ta]=
[];for(var Ha=0,db=G.length;Ha<db;Ha++){L=G[Ha];var Ya=L.getPoints();var vb=C(Ya);(vb=u?!vb:vb)?(!V&&Z[ta]&&ta++,Z[ta]={s:new mz,p:Ya},Z[ta].s.curves=L.curves,V&&ta++,ja[ta]=[]):ja[ta].push({h:L,p:Ya[0]})}if(!Z[0])return t(G);if(1<Z.length){u=!1;C=[];G=0;for(L=Z.length;G<L;G++)S[G]=[];G=0;for(L=Z.length;G<L;G++)for(vb=ja[G],V=0;V<vb.length;V++){ta=vb[V];Ya=!0;for(Ha=0;Ha<Z.length;Ha++)x(ta.p,Z[Ha].p)&&(G!==Ha&&C.push({froms:G,tos:Ha,hole:V}),Ya?(Ya=!1,S[Ha].push(ta)):u=!0);Ya&&S[G].push(ta)}0<C.length&&
(u||(ja=S))}C=0;for(G=Z.length;C<G;C++)for(S=Z[C].s,z.push(S),u=ja[C],L=0,vb=u.length;L<vb;L++)S.holes.push(u[L].h);return z}});Object.assign(tW.prototype,{isFont:!0,generateShapes:function(u,z){void 0===z&&(z=100);var t=[],x=z;z=(this||p).data;var C=Array.from?Array.from(u):String(u).split("");x/=z.resolution;var G=(z.boundingBox.yMax-z.boundingBox.yMin+z.underlineThickness)*x;u=[];for(var L=0,S=0,V=0;V<C.length;V++){var Z=C[V];if("\n"===Z)L=0,S-=G;else{var ja=Z;Z=x;var ta=L,Ha=S,db=z,Ya=db.glyphs[ja]||
db.glyphs["?"];if(Ya){ja=new sW;if(Ya.o){db=Ya._cachedOutline||(Ya._cachedOutline=Ya.o.split(" "));for(var vb=0,sb=db.length;vb<sb;)switch(db[vb++]){case "m":var Qc=db[vb++]*Z+ta;var zc=db[vb++]*Z+Ha;ja.moveTo(Qc,zc);break;case "l":Qc=db[vb++]*Z+ta;zc=db[vb++]*Z+Ha;ja.lineTo(Qc,zc);break;case "q":var jd=db[vb++]*Z+ta;var Bc=db[vb++]*Z+Ha;var kd=db[vb++]*Z+ta;var ud=db[vb++]*Z+Ha;ja.quadraticCurveTo(kd,ud,jd,Bc);break;case "b":jd=db[vb++]*Z+ta,Bc=db[vb++]*Z+Ha,kd=db[vb++]*Z+ta,ud=db[vb++]*Z+Ha,Qc=
db[vb++]*Z+ta,zc=db[vb++]*Z+Ha,ja.bezierCurveTo(kd,ud,Qc,zc,jd,Bc)}}Z={offsetX:Ya.ha*Z,path:ja}}else console.error('THREE.Font: character "'+ja+'" does not exists in font family '+db.familyName+"."),Z=void 0;L+=Z.offsetX;u.push(Z.path)}}z=0;for(C=u.length;z<C;z++)Array.prototype.push.apply(t,u[z].toShapes());return t}});uW.prototype=Object.assign(Object.create(Mk.prototype),{constructor:uW,load:function(u,z,t,x){var C=this||p,G=new Zs((this||p).manager);G.setPath((this||p).path);G.setRequestHeader((this||
p).requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{var S=JSON.parse(L)}catch(V){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),S=JSON.parse(L.substring(65,L.length-2))}L=C.parse(S);z&&z(L)},t,x)},parse:function(u){return new tW(u)}});var $O,rX={getContext:function(){void 0===$O&&($O=new (window.AudioContext||window.webkitAudioContext));return $O},setContext:function(u){$O=u}};yO.prototype=Object.assign(Object.create(Mk.prototype),
{constructor:yO,load:function(u,z,t,x){var C=this||p,G=new Zs(C.manager);G.setResponseType("arraybuffer");G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{var S=L.slice(0);rX.getContext().decodeAudioData(S,function(V){z(V)})}catch(V){x?x(V):console.error(V),C.manager.itemError(u)}},t,x)}});vW.prototype=Object.assign(Object.create($s.prototype),{constructor:vW,isHemisphereLightProbe:!0,copy:function(u){$s.prototype.copy.call(this||
p,u);return this||p},toJSON:function(u){return $s.prototype.toJSON.call(this||p,u)}});wW.prototype=Object.assign(Object.create($s.prototype),{constructor:wW,isAmbientLightProbe:!0,copy:function(u){$s.prototype.copy.call(this||p,u);return this||p},toJSON:function(u){return $s.prototype.toJSON.call(this||p,u)}});var naa=new fj,oaa=new fj;Object.assign(p$.prototype,{update:function(u){var z=(this||p)._cache;if(z.focus!==u.focus||z.fov!==u.fov||z.aspect!==u.aspect*(this||p).aspect||z.near!==u.near||z.far!==
u.far||z.zoom!==u.zoom||z.eyeSep!==(this||p).eyeSep){z.focus=u.focus;z.fov=u.fov;z.aspect=u.aspect*(this||p).aspect;z.near=u.near;z.far=u.far;z.zoom=u.zoom;z.eyeSep=(this||p).eyeSep;var t=u.projectionMatrix.clone(),x=z.eyeSep/2,C=x*z.near/z.focus,G=z.near*Math.tan(Xh.DEG2RAD*z.fov*.5)/z.zoom;oaa.elements[12]=-x;naa.elements[12]=x;x=-G*z.aspect+C;var L=G*z.aspect+C;t.elements[0]=2*z.near/(L-x);t.elements[8]=(L+x)/(L-x);(this||p).cameraL.projectionMatrix.copy(t);x=-G*z.aspect-C;L=G*z.aspect-C;t.elements[0]=
2*z.near/(L-x);t.elements[8]=(L+x)/(L-x);(this||p).cameraR.projectionMatrix.copy(t)}(this||p).cameraL.matrixWorld.copy(u.matrixWorld).multiply(oaa);(this||p).cameraR.matrixWorld.copy(u.matrixWorld).multiply(naa)}});var paa=function(){function u(t){(this||p).autoStart=void 0!==t?t:!0;(this||p).startTime=0;(this||p).oldTime=0;(this||p).elapsedTime=0;(this||p).running=!1}var z=u.prototype;z.start=function(){(this||p).startTime=("undefined"===typeof performance?Date:performance).now();(this||p).oldTime=
(this||p).startTime;(this||p).elapsedTime=0;(this||p).running=!0};z.stop=function(){this.getElapsedTime();(this||p).running=!1;(this||p).autoStart=!1};z.getElapsedTime=function(){this.getDelta();return(this||p).elapsedTime};z.getDelta=function(){var t=0;if((this||p).autoStart&&!(this||p).running)return this.start(),0;if((this||p).running){var x=("undefined"===typeof performance?Date:performance).now();t=(x-(this||p).oldTime)/1E3;(this||p).oldTime=x;(this||p).elapsedTime+=t}return t};return u}(),XB=
new nc,qaa=new mp,Kra=new nc,YB=new nc,Lra=function(u){function z(){var x=u.call(this||p)||this||p;x.type="AudioListener";x.context=rX.getContext();x.gain=x.context.createGain();x.gain.connect(x.context.destination);x.filter=null;x.timeDelta=0;x._clock=new paa;return x}g(z,u);var t=z.prototype;t.getInput=function(){return(this||p).gain};t.removeFilter=function(){null!==(this||p).filter&&((this||p).gain.disconnect((this||p).filter),(this||p).filter.disconnect((this||p).context.destination),(this||
p).gain.connect((this||p).context.destination),(this||p).filter=null);return this||p};t.getFilter=function(){return(this||p).filter};t.setFilter=function(x){null!==(this||p).filter?((this||p).gain.disconnect((this||p).filter),(this||p).filter.disconnect((this||p).context.destination)):(this||p).gain.disconnect((this||p).context.destination);(this||p).filter=x;(this||p).gain.connect((this||p).filter);(this||p).filter.connect((this||p).context.destination);return this||p};t.getMasterVolume=function(){return(this||
p).gain.gain.value};t.setMasterVolume=function(x){(this||p).gain.gain.setTargetAtTime(x,(this||p).context.currentTime,.01);return this||p};t.updateMatrixWorld=function(x){u.prototype.updateMatrixWorld.call(this||p,x);x=(this||p).context.listener;var C=(this||p).up;(this||p).timeDelta=(this||p)._clock.getDelta();(this||p).matrixWorld.decompose(XB,qaa,Kra);YB.set(0,0,-1).applyQuaternion(qaa);if(x.positionX){var G=(this||p).context.currentTime+(this||p).timeDelta;x.positionX.linearRampToValueAtTime(XB.x,
G);x.positionY.linearRampToValueAtTime(XB.y,G);x.positionZ.linearRampToValueAtTime(XB.z,G);x.forwardX.linearRampToValueAtTime(YB.x,G);x.forwardY.linearRampToValueAtTime(YB.y,G);x.forwardZ.linearRampToValueAtTime(YB.z,G);x.upX.linearRampToValueAtTime(C.x,G);x.upY.linearRampToValueAtTime(C.y,G);x.upZ.linearRampToValueAtTime(C.z,G)}else x.setPosition(XB.x,XB.y,XB.z),x.setOrientation(YB.x,YB.y,YB.z,C.x,C.y,C.z)};return z}(E),sX=function(u){function z(x){var C=u.call(this||p)||this||p;C.type="Audio";C.listener=
x;C.context=x.context;C.gain=C.context.createGain();C.gain.connect(x.getInput());C.autoplay=!1;C.buffer=null;C.detune=0;C.loop=!1;C.loopStart=0;C.loopEnd=0;C.offset=0;C.duration=void 0;C.playbackRate=1;C.isPlaying=!1;C.hasPlaybackControl=!0;C.source=null;C.sourceType="empty";C._startedAt=0;C._progress=0;C._connected=!1;C.filters=[];return C}g(z,u);var t=z.prototype;t.getOutput=function(){return(this||p).gain};t.setNodeSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="audioNode";
(this||p).source=x;this.connect();return this||p};t.setMediaElementSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaNode";(this||p).source=(this||p).context.createMediaElementSource(x);this.connect();return this||p};t.setMediaStreamSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaStreamNode";(this||p).source=(this||p).context.createMediaStreamSource(x);this.connect();return this||p};t.setBuffer=function(x){(this||p).buffer=x;(this||p).sourceType=
"buffer";(this||p).autoplay&&this.play();return this||p};t.play=function(x){void 0===x&&(x=0);if(!0===(this||p).isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return(this||p)._startedAt=(this||p).context.currentTime+x,x=(this||p).context.createBufferSource(),x.buffer=(this||p).buffer,x.loop=(this||p).loop,x.loopStart=(this||p).loopStart,x.loopEnd=(this||p).loopEnd,x.onended=
(this||p).onEnded.bind(this||p),x.start((this||p)._startedAt,(this||p)._progress+(this||p).offset,(this||p).duration),(this||p).isPlaying=!0,(this||p).source=x,this.setDetune((this||p).detune),this.setPlaybackRate((this||p).playbackRate),this.connect()};t.pause=function(){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===(this||p).isPlaying&&((this||p)._progress+=Math.max((this||p).context.currentTime-(this||p)._startedAt,0)*(this||
p).playbackRate,!0===(this||p).loop&&((this||p)._progress%=(this||p).duration||(this||p).buffer.duration),(this||p).source.stop(),(this||p).source.onended=null,(this||p).isPlaying=!1),this||p};t.stop=function(){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return(this||p)._progress=0,(this||p).source.stop(),(this||p).source.onended=null,(this||p).isPlaying=!1,this||p};t.connect=function(){if(0<(this||p).filters.length){(this||p).source.connect((this||
p).filters[0]);for(var x=1,C=(this||p).filters.length;x<C;x++)(this||p).filters[x-1].connect((this||p).filters[x]);(this||p).filters[(this||p).filters.length-1].connect(this.getOutput())}else(this||p).source.connect(this.getOutput());(this||p)._connected=!0;return this||p};t.disconnect=function(){if(0<(this||p).filters.length){(this||p).source.disconnect((this||p).filters[0]);for(var x=1,C=(this||p).filters.length;x<C;x++)(this||p).filters[x-1].disconnect((this||p).filters[x]);(this||p).filters[(this||
p).filters.length-1].disconnect(this.getOutput())}else(this||p).source.disconnect(this.getOutput());(this||p)._connected=!1;return this||p};t.getFilters=function(){return(this||p).filters};t.setFilters=function(x){x||(x=[]);!0===(this||p)._connected?(this.disconnect(),(this||p).filters=x.slice(),this.connect()):(this||p).filters=x.slice();return this||p};t.setDetune=function(x){(this||p).detune=x;if(void 0!==(this||p).source.detune)return!0===(this||p).isPlaying&&(this||p).source.detune.setTargetAtTime((this||
p).detune,(this||p).context.currentTime,.01),this||p};t.getDetune=function(){return(this||p).detune};t.getFilter=function(){return this.getFilters()[0]};t.setFilter=function(x){return this.setFilters(x?[x]:[])};t.setPlaybackRate=function(x){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return(this||p).playbackRate=x,!0===(this||p).isPlaying&&(this||p).source.playbackRate.setTargetAtTime((this||p).playbackRate,(this||p).context.currentTime,
.01),this||p};t.getPlaybackRate=function(){return(this||p).playbackRate};t.onEnded=function(){(this||p).isPlaying=!1};t.getLoop=function(){return!1===(this||p).hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):(this||p).loop};t.setLoop=function(x){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return(this||p).loop=x,!0===(this||p).isPlaying&&((this||p).source.loop=(this||p).loop),this||p};t.setLoopStart=
function(x){(this||p).loopStart=x;return this||p};t.setLoopEnd=function(x){(this||p).loopEnd=x;return this||p};t.getVolume=function(){return(this||p).gain.gain.value};t.setVolume=function(x){(this||p).gain.gain.setTargetAtTime(x,(this||p).context.currentTime,.01);return this||p};return z}(E),ZB=new nc,raa=new mp,Mra=new nc,$B=new nc,Nra=function(u){function z(x){x=u.call(this||p,x)||this||p;x.panner=x.context.createPanner();x.panner.panningModel="HRTF";x.panner.connect(x.gain);return x}g(z,u);var t=
z.prototype;t.getOutput=function(){return(this||p).panner};t.getRefDistance=function(){return(this||p).panner.refDistance};t.setRefDistance=function(x){(this||p).panner.refDistance=x;return this||p};t.getRolloffFactor=function(){return(this||p).panner.rolloffFactor};t.setRolloffFactor=function(x){(this||p).panner.rolloffFactor=x;return this||p};t.getDistanceModel=function(){return(this||p).panner.distanceModel};t.setDistanceModel=function(x){(this||p).panner.distanceModel=x;return this||p};t.getMaxDistance=
function(){return(this||p).panner.maxDistance};t.setMaxDistance=function(x){(this||p).panner.maxDistance=x;return this||p};t.setDirectionalCone=function(x,C,G){(this||p).panner.coneInnerAngle=x;(this||p).panner.coneOuterAngle=C;(this||p).panner.coneOuterGain=G;return this||p};t.updateMatrixWorld=function(x){u.prototype.updateMatrixWorld.call(this||p,x);if(!0!==(this||p).hasPlaybackControl||!1!==(this||p).isPlaying)if((this||p).matrixWorld.decompose(ZB,raa,Mra),$B.set(0,0,1).applyQuaternion(raa),x=
(this||p).panner,x.positionX){var C=(this||p).context.currentTime+(this||p).listener.timeDelta;x.positionX.linearRampToValueAtTime(ZB.x,C);x.positionY.linearRampToValueAtTime(ZB.y,C);x.positionZ.linearRampToValueAtTime(ZB.z,C);x.orientationX.linearRampToValueAtTime($B.x,C);x.orientationY.linearRampToValueAtTime($B.y,C);x.orientationZ.linearRampToValueAtTime($B.z,C)}else x.setPosition(ZB.x,ZB.y,ZB.z),x.setOrientation($B.x,$B.y,$B.z)};return z}(sX),saa=function(){function u(t,x){(this||p).analyser=
t.context.createAnalyser();(this||p).analyser.fftSize=void 0!==x?x:2048;(this||p).data=new Uint8Array((this||p).analyser.frequencyBinCount);t.getOutput().connect((this||p).analyser)}var z=u.prototype;z.getFrequencyData=function(){(this||p).analyser.getByteFrequencyData((this||p).data);return(this||p).data};z.getAverageFrequency=function(){for(var t=0,x=this.getFrequencyData(),C=0;C<x.length;C++)t+=x[C];return t/x.length};return u}();Object.assign(xW.prototype,{accumulate:function(u,z){var t=(this||
p).buffer,x=(this||p).valueSize;u=u*x+x;var C=(this||p).cumulativeWeight;if(0===C){for(C=0;C!==x;++C)t[u+C]=t[C];C=z}else C+=z,this._mixBufferRegion(t,u,0,z/C,x);(this||p).cumulativeWeight=C},accumulateAdditive:function(u){var z=(this||p).buffer,t=(this||p).valueSize,x=t*(this||p)._addIndex;0===(this||p).cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(z,x,0,u,t);(this||p).cumulativeWeightAdditive+=u},apply:function(u){var z=(this||p).valueSize,t=(this||p).buffer;u=u*z+
z;var x=(this||p).cumulativeWeight,C=(this||p).cumulativeWeightAdditive,G=(this||p).binding;(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0;1>x&&this._mixBufferRegion(t,u,z*(this||p)._origIndex,1-x,z);0<C&&this._mixBufferRegionAdditive(t,u,(this||p)._addIndex*z,1,z);x=z;for(C=z+z;x!==C;++x)if(t[x]!==t[x+z]){G.setValue(t,u);break}},saveOriginalState:function(){var u=(this||p).buffer,z=(this||p).valueSize,t=z*(this||p)._origIndex;(this||p).binding.getValue(u,t);for(var x=z;x!==t;++x)u[x]=
u[t+x%z];this._setIdentity();(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0},restoreOriginalState:function(){(this||p).binding.setValue((this||p).buffer,3*(this||p).valueSize)},_setAdditiveIdentityNumeric:function(){for(var u=(this||p)._addIndex*(this||p).valueSize,z=u+(this||p).valueSize;u<z;u++)(this||p).buffer[u]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric();(this||p).buffer[(this||p)._addIndex*(this||p).valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var u=
(this||p)._origIndex*(this||p).valueSize,z=(this||p)._addIndex*(this||p).valueSize,t=0;t<(this||p).valueSize;t++)(this||p).buffer[z+t]=(this||p).buffer[u+t]},_select:function(u,z,t,x,C){if(.5<=x)for(x=0;x!==C;++x)u[z+x]=u[t+x]},_slerp:function(u,z,t,x){mp.slerpFlat(u,z,u,z,u,t,x)},_slerpAdditive:function(u,z,t,x,C){C*=(this||p)._workIndex;mp.multiplyQuaternionsFlat(u,C,u,z,u,t);mp.slerpFlat(u,z,u,z,u,C,x)},_lerp:function(u,z,t,x,C){for(var G=1-x,L=0;L!==C;++L){var S=z+L;u[S]=u[S]*G+u[t+L]*x}},_lerpAdditive:function(u,
z,t,x,C){for(var G=0;G!==C;++G){var L=z+G;u[L]+=u[t+G]*x}}});var Ora=/[\[\]\.:\/]/g,Pra="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Qra=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Rra=/(WCOD+)?/.source.replace("WCOD",Pra),Sra=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Tra=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Ura=new RegExp("^"+Qra+Rra+Sra+Tra+"$"),Vra=["material","materials","bones"];Object.assign(q$.prototype,{getValue:function(u,z){this.bind();
var t=(this||p)._bindings[(this||p)._targetGroup.nCachedObjects_];void 0!==t&&t.getValue(u,z)},setValue:function(u,z){for(var t=(this||p)._bindings,x=(this||p)._targetGroup.nCachedObjects_,C=t.length;x!==C;++x)t[x].setValue(u,z)},bind:function(){for(var u=(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].bind()},unbind:function(){for(var u=(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].unbind()}});Object.assign(op,{Composite:q$,
create:function(u,z,t){return u&&u.isAnimationObjectGroup?new op.Composite(u,z,t):new op(u,z,t)},sanitizeNodeName:function(u){return u.replace(/\s/g,"_").replace(Ora,"")},parseTrackName:function(u){var z=Ura.exec(u);if(!z)throw Error("PropertyBinding: Cannot parse trackName: "+u);z={nodeName:z[2],objectName:z[3],objectIndex:z[4],propertyName:z[5],propertyIndex:z[6]};var t=z.nodeName&&z.nodeName.lastIndexOf(".");if(void 0!==t&&-1!==t){var x=z.nodeName.substring(t+1);-1!==Vra.indexOf(x)&&(z.nodeName=
z.nodeName.substring(0,t),z.objectName=x)}if(null===z.propertyName||0===z.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+u);return z},findNode:function(u,z){if(!z||""===z||"."===z||-1===z||z===u.name||z===u.uuid)return u;if(u.skeleton){var t=u.skeleton.getBoneByName(z);if(void 0!==t)return t}return u.children&&(u=function G(C){for(var L=0;L<C.length;L++){var S=C[L];if(S.name===z||S.uuid===z||(S=G(S.children)))return S}return null}(u.children))?u:null}});
Object.assign(op.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(u,z){u[z]=(this||p).node[(this||p).propertyName]},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)u[z++]=t[x]},function(u,z){u[z]=(this||p).resolvedProperty[(this||p).propertyIndex]},function(u,z){(this||p).resolvedProperty.toArray(u,
z)}],SetterByBindingTypeAndVersioning:[[function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z]},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)t[x]=u[z++]},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)t[x]=u[z++];
(this||p).targetObject.needsUpdate=!0},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)t[x]=u[z++];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z]},function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||
p).resolvedProperty.fromArray(u,z)},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(u,z){this.bind();this.getValue(u,z)},setValue:function(u,z){this.bind();this.setValue(u,z)},bind:function(){var u=(this||p).node,z=(this||p).parsedPath,t=z.objectName,x=z.propertyName,C=z.propertyIndex;u||(u=op.findNode((this||p).rootNode,z.nodeName)||
(this||p).rootNode,(this||p).node=u);(this||p).getValue=(this||p)._getValue_unavailable;(this||p).setValue=(this||p)._setValue_unavailable;if(u){if(t){var G=z.objectIndex;switch(t){case "materials":if(!u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this||p);return}if(!u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this||p);return}u=u.material.materials;
break;case "bones":if(!u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this||p);return}u=u.skeleton.bones;for(t=0;t<u.length;t++)if(u[t].name===G){G=t;break}break;default:if(void 0===u[t]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this||p);return}u=u[t]}if(void 0!==G){if(void 0===u[G]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this||p,u);
return}u=u[G]}}G=u[x];if(void 0===G)console.error("THREE.PropertyBinding: Trying to update property for track: "+z.nodeName+"."+x+" but it wasn't found.",u);else{z=(this||p).Versioning.None;(this||p).targetObject=u;void 0!==u.needsUpdate?z=(this||p).Versioning.NeedsUpdate:void 0!==u.matrixWorldNeedsUpdate&&(z=(this||p).Versioning.MatrixWorldNeedsUpdate);t=(this||p).BindingType.Direct;if(void 0!==C){if("morphTargetInfluences"===x){if(!u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
this||p);return}if(u.geometry.isBufferGeometry){if(!u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this||p);return}void 0!==u.morphTargetDictionary[C]&&(C=u.morphTargetDictionary[C])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this||p);return}}t=(this||p).BindingType.ArrayElement;(this||p).resolvedProperty=
G;(this||p).propertyIndex=C}else void 0!==G.fromArray&&void 0!==G.toArray?(t=(this||p).BindingType.HasFromToArray,(this||p).resolvedProperty=G):Array.isArray(G)?(t=(this||p).BindingType.EntireArray,(this||p).resolvedProperty=G):(this||p).propertyName=x;(this||p).getValue=(this||p).GetterByBindingType[t];(this||p).setValue=(this||p).SetterByBindingTypeAndVersioning[t][z]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+(this||p).path+" but it wasn't found.")},unbind:function(){(this||
p).node=null;(this||p).getValue=(this||p)._getValue_unbound;(this||p).setValue=(this||p)._setValue_unbound}});Object.assign(op.prototype,{_getValue_unbound:op.prototype.getValue,_setValue_unbound:op.prototype.setValue});Object.assign(r$.prototype,{isAnimationObjectGroup:!0,add:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._paths,x=(this||p)._parsedPaths,C=(this||p)._bindings,G=C.length,L=void 0,S=u.length,V=(this||p).nCachedObjects_,Z=0,ja=arguments.length;Z!==ja;++Z){var ta=
arguments[Z],Ha=ta.uuid,db=z[Ha];if(void 0===db){db=S++;z[Ha]=db;u.push(ta);db=0;for(var Ya=G;db!==Ya;++db)C[db].push(new op(ta,t[db],x[db]))}else if(db<V){L=u[db];Ya=--V;var vb=u[Ya];z[vb.uuid]=db;u[db]=vb;z[Ha]=Ya;u[Ya]=ta;Ha=0;for(vb=G;Ha!==vb;++Ha){var sb=C[Ha],Qc=sb[db];sb[db]=sb[Ya];void 0===Qc&&(Qc=new op(ta,t[Ha],x[Ha]));sb[Ya]=Qc}}else u[db]!==L&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}(this||
p).nCachedObjects_=V},remove:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,x=t.length,C=(this||p).nCachedObjects_,G=0,L=arguments.length;G!==L;++G){var S=arguments[G],V=S.uuid,Z=z[V];if(void 0!==Z&&Z>=C){var ja=C++,ta=u[ja];z[ta.uuid]=Z;u[Z]=ta;z[V]=ja;u[ja]=S;S=0;for(V=x;S!==V;++S){ta=t[S];var Ha=ta[Z];ta[Z]=ta[ja];ta[ja]=Ha}}}(this||p).nCachedObjects_=C},uncache:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,x=
t.length,C=(this||p).nCachedObjects_,G=u.length,L=0,S=arguments.length;L!==S;++L){var V=arguments[L].uuid,Z=z[V];if(void 0!==Z)if(delete z[V],Z<C){V=--C;var ja=u[V],ta=--G,Ha=u[ta];z[ja.uuid]=Z;u[Z]=ja;z[Ha.uuid]=V;u[V]=Ha;u.pop();ja=0;for(Ha=x;ja!==Ha;++ja){var db=t[ja],Ya=db[ta];db[Z]=db[V];db[V]=Ya;db.pop()}}else for(V=--G,ta=u[V],0<V&&(z[ta.uuid]=Z),u[Z]=ta,u.pop(),ta=0,ja=x;ta!==ja;++ta)Ha=t[ta],Ha[Z]=Ha[V],Ha.pop()}(this||p).nCachedObjects_=C},subscribe_:function(u,z){var t=(this||p)._bindingsIndicesByPath,
x=t[u],C=(this||p)._bindings;if(void 0!==x)return C[x];var G=(this||p)._paths,L=(this||p)._parsedPaths,S=(this||p)._objects,V=(this||p).nCachedObjects_,Z=Array(S.length);x=C.length;t[u]=x;G.push(u);L.push(z);C.push(Z);t=V;for(x=S.length;t!==x;++t)Z[t]=new op(S[t],u,z);return Z},unsubscribe_:function(u){var z=(this||p)._bindingsIndicesByPath,t=z[u];if(void 0!==t){var x=(this||p)._paths,C=(this||p)._parsedPaths,G=(this||p)._bindings,L=G.length-1,S=G[L];z[u[L]]=t;G[t]=S;G.pop();C[t]=C[L];C.pop();x[t]=
x[L];x.pop()}}});var Wra=function(){function u(t,x,C,G){(this||p)._mixer=t;(this||p)._clip=x;(this||p)._localRoot=C||null;(this||p).blendMode=G||x.blendMode;t=x.tracks;x=t.length;C=Array(x);G={endingStart:2400,endingEnd:2400};for(var L=0;L!==x;++L){var S=t[L].createInterpolant(null);C[L]=S;S.settings=G}(this||p)._interpolantSettings=G;(this||p)._interpolants=C;(this||p)._propertyBindings=Array(x);(this||p)._cacheIndex=null;(this||p)._byClipCacheIndex=null;(this||p)._timeScaleInterpolant=null;(this||
p)._weightInterpolant=null;(this||p).loop=2201;(this||p)._loopCount=-1;(this||p)._startTime=null;(this||p).time=0;(this||p).timeScale=1;(this||p)._effectiveTimeScale=1;(this||p).weight=1;(this||p)._effectiveWeight=1;(this||p).repetitions=Infinity;(this||p).paused=!1;(this||p).enabled=!0;(this||p).clampWhenFinished=!1;(this||p).zeroSlopeAtStart=!0;(this||p).zeroSlopeAtEnd=!0}var z=u.prototype;z.play=function(){(this||p)._mixer._activateAction(this||p);return this||p};z.stop=function(){(this||p)._mixer._deactivateAction(this||
p);return this.reset()};z.reset=function(){(this||p).paused=!1;(this||p).enabled=!0;(this||p).time=0;(this||p)._loopCount=-1;(this||p)._startTime=null;return this.stopFading().stopWarping()};z.isRunning=function(){return(this||p).enabled&&!(this||p).paused&&0!==(this||p).timeScale&&null===(this||p)._startTime&&(this||p)._mixer._isActiveAction(this||p)};z.isScheduled=function(){return(this||p)._mixer._isActiveAction(this||p)};z.startAt=function(t){(this||p)._startTime=t;return this||p};z.setLoop=function(t,
x){(this||p).loop=t;(this||p).repetitions=x;return this||p};z.setEffectiveWeight=function(t){(this||p).weight=t;(this||p)._effectiveWeight=(this||p).enabled?t:0;return this.stopFading()};z.getEffectiveWeight=function(){return(this||p)._effectiveWeight};z.fadeIn=function(t){return this._scheduleFading(t,0,1)};z.fadeOut=function(t){return this._scheduleFading(t,1,0)};z.crossFadeFrom=function(t,x,C){t.fadeOut(x);this.fadeIn(x);if(C){C=(this||p)._clip.duration;var G=t._clip.duration,L=C/G;t.warp(1,G/
C,x);this.warp(L,1,x)}return this||p};z.crossFadeTo=function(t,x,C){return t.crossFadeFrom(this||p,x,C)};z.stopFading=function(){var t=(this||p)._weightInterpolant;null!==t&&((this||p)._weightInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.setEffectiveTimeScale=function(t){(this||p).timeScale=t;(this||p)._effectiveTimeScale=(this||p).paused?0:t;return this.stopWarping()};z.getEffectiveTimeScale=function(){return(this||p)._effectiveTimeScale};z.setDuration=function(t){(this||
p).timeScale=(this||p)._clip.duration/t;return this.stopWarping()};z.syncWith=function(t){(this||p).time=t.time;(this||p).timeScale=t.timeScale;return this.stopWarping()};z.halt=function(t){return this.warp((this||p)._effectiveTimeScale,0,t)};z.warp=function(t,x,C){var G=(this||p)._mixer,L=G.time,S=(this||p).timeScale,V=(this||p)._timeScaleInterpolant;null===V&&(V=G._lendControlInterpolant(),(this||p)._timeScaleInterpolant=V);G=V.parameterPositions;V=V.sampleValues;G[0]=L;G[1]=L+C;V[0]=t/S;V[1]=x/
S;return this||p};z.stopWarping=function(){var t=(this||p)._timeScaleInterpolant;null!==t&&((this||p)._timeScaleInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.getMixer=function(){return(this||p)._mixer};z.getClip=function(){return(this||p)._clip};z.getRoot=function(){return(this||p)._localRoot||(this||p)._mixer._root};z._update=function(t,x,C,G){if((this||p).enabled){var L=(this||p)._startTime;if(null!==L){x=(t-L)*C;if(0>x||0===C)return;(this||p)._startTime=null;
x*=C}x*=this._updateTimeScale(t);C=this._updateTime(x);t=this._updateWeight(t);if(0<t)switch(x=(this||p)._interpolants,L=(this||p)._propertyBindings,(this||p).blendMode){case 2501:G=0;for(var S=x.length;G!==S;++G)x[G].evaluate(C),L[G].accumulateAdditive(t);break;default:S=0;for(var V=x.length;S!==V;++S)x[S].evaluate(C),L[S].accumulate(G,t)}}else this._updateWeight(t)};z._updateWeight=function(t){var x=0;if((this||p).enabled){x=(this||p).weight;var C=(this||p)._weightInterpolant;if(null!==C){var G=
C.evaluate(t)[0];x*=G;t>C.parameterPositions[1]&&(this.stopFading(),0===G&&((this||p).enabled=!1))}}return(this||p)._effectiveWeight=x};z._updateTimeScale=function(t){var x=0;if(!(this||p).paused){x=(this||p).timeScale;var C=(this||p)._timeScaleInterpolant;if(null!==C){var G=C.evaluate(t)[0];x*=G;t>C.parameterPositions[1]&&(this.stopWarping(),0===x?(this||p).paused=!0:(this||p).timeScale=x)}}return(this||p)._effectiveTimeScale=x};z._updateTime=function(t){var x=(this||p)._clip.duration,C=(this||p).loop,
G=(this||p).time+t,L=(this||p)._loopCount,S=2202===C;if(0===t)return-1===L?G:S&&1===(L&1)?x-G:G;if(2200===C)a:{if(-1===L&&((this||p)._loopCount=0,this._setEndings(!0,!0,!1)),G>=x)G=x;else if(0>G)G=0;else{(this||p).time=G;break a}(this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1;(this||p).time=G;(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0>t?-1:1})}else{-1===L&&(0<=t?(L=0,this._setEndings(!0,0===(this||p).repetitions,S)):this._setEndings(0===(this||
p).repetitions,!0,S));if(G>=x||0>G){C=Math.floor(G/x);G-=x*C;L+=Math.abs(C);var V=(this||p).repetitions-L;0>=V?((this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1,G=0<t?x:0,(this||p).time=G,(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0<t?1:-1})):(1===V?(t=0>t,this._setEndings(t,!t,S)):this._setEndings(!1,!1,S),(this||p)._loopCount=L,(this||p).time=G,(this||p)._mixer.dispatchEvent({type:"loop",action:this||p,loopDelta:C}))}else(this||p).time=G;if(S&&1===
(L&1))return x-G}return G};z._setEndings=function(t,x,C){var G=(this||p)._interpolantSettings;C?(G.endingStart=2401,G.endingEnd=2401):(G.endingStart=t?(this||p).zeroSlopeAtStart?2401:2400:2402,G.endingEnd=x?(this||p).zeroSlopeAtEnd?2401:2400:2402)};z._scheduleFading=function(t,x,C){var G=(this||p)._mixer,L=G.time,S=(this||p)._weightInterpolant;null===S&&(S=G._lendControlInterpolant(),(this||p)._weightInterpolant=S);G=S.parameterPositions;S=S.sampleValues;G[0]=L;S[0]=x;G[1]=L+t;S[1]=C;return this||
p};return u}();yW.prototype=Object.assign(Object.create(e.prototype),{constructor:yW,_bindAction:function(u,z){var t=u._localRoot||(this||p)._root,x=u._clip.tracks,C=x.length,G=u._propertyBindings;u=u._interpolants;var L=t.uuid,S=(this||p)._bindingsByRootAndName,V=S[L];void 0===V&&(V={},S[L]=V);for(S=0;S!==C;++S){var Z=x[S],ja=Z.name,ta=V[ja];if(void 0===ta){ta=G[S];if(void 0!==ta){null===ta._cacheIndex&&(++ta.referenceCount,this._addInactiveBinding(ta,L,ja));continue}ta=new xW(op.create(t,ja,z&&
z._propertyBindings[S].binding.parsedPath),Z.ValueTypeName,Z.getValueSize());++ta.referenceCount;this._addInactiveBinding(ta,L,ja)}G[S]=ta;u[S].resultBuffer=ta.buffer}},_activateAction:function(u){if(!this._isActiveAction(u)){if(null===u._cacheIndex){var z=(u._localRoot||(this||p)._root).uuid,t=u._clip.uuid,x=(this||p)._actionsByClip[t];this._bindAction(u,x&&x.knownActions[0]);this._addInactiveAction(u,t,z)}z=u._propertyBindings;t=0;for(x=z.length;t!==x;++t){var C=z[t];0===C.useCount++&&(this._lendBinding(C),
C.saveOriginalState())}this._lendAction(u)}},_deactivateAction:function(u){if(this._isActiveAction(u)){for(var z=u._propertyBindings,t=0,x=z.length;t!==x;++t){var C=z[t];0===--C.useCount&&(C.restoreOriginalState(),this._takeBackBinding(C))}this._takeBackAction(u)}},_initMemoryManager:function(){(this||p)._actions=[];(this||p)._nActiveActions=0;(this||p)._actionsByClip={};(this||p)._bindings=[];(this||p)._nActiveBindings=0;(this||p)._bindingsByRootAndName={};(this||p)._controlInterpolants=[];(this||
p)._nActiveControlInterpolants=0;var u=this||p;(this||p).stats={actions:{get total(){return u._actions.length},get inUse(){return u._nActiveActions}},bindings:{get total(){return u._bindings.length},get inUse(){return u._nActiveBindings}},controlInterpolants:{get total(){return u._controlInterpolants.length},get inUse(){return u._nActiveControlInterpolants}}}},_isActiveAction:function(u){u=u._cacheIndex;return null!==u&&u<(this||p)._nActiveActions},_addInactiveAction:function(u,z,t){var x=(this||
p)._actions,C=(this||p)._actionsByClip,G=C[z];void 0===G?(G={knownActions:[u],actionByRoot:{}},u._byClipCacheIndex=0,C[z]=G):(z=G.knownActions,u._byClipCacheIndex=z.length,z.push(u));u._cacheIndex=x.length;x.push(u);G.actionByRoot[t]=u},_removeInactiveAction:function(u){var z=(this||p)._actions,t=z[z.length-1],x=u._cacheIndex;t._cacheIndex=x;z[x]=t;z.pop();u._cacheIndex=null;z=u._clip.uuid;t=(this||p)._actionsByClip;x=t[z];var C=x.knownActions,G=C[C.length-1],L=u._byClipCacheIndex;G._byClipCacheIndex=
L;C[L]=G;C.pop();u._byClipCacheIndex=null;delete x.actionByRoot[(u._localRoot||(this||p)._root).uuid];0===C.length&&delete t[z];this._removeInactiveBindingsForAction(u)},_removeInactiveBindingsForAction:function(u){u=u._propertyBindings;for(var z=0,t=u.length;z!==t;++z){var x=u[z];0===--x.referenceCount&&this._removeInactiveBinding(x)}},_lendAction:function(u){var z=(this||p)._actions,t=u._cacheIndex,x=(this||p)._nActiveActions++,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_takeBackAction:function(u){var z=
(this||p)._actions,t=u._cacheIndex,x=--(this||p)._nActiveActions,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_addInactiveBinding:function(u,z,t){var x=(this||p)._bindingsByRootAndName,C=(this||p)._bindings,G=x[z];void 0===G&&(G={},x[z]=G);G[t]=u;u._cacheIndex=C.length;C.push(u)},_removeInactiveBinding:function(u){var z=(this||p)._bindings,t=u.binding,x=t.rootNode.uuid;t=t.path;var C=(this||p)._bindingsByRootAndName,G=C[x],L=z[z.length-1];u=u._cacheIndex;L._cacheIndex=u;z[u]=L;z.pop();delete G[t];
0===Object.keys(G).length&&delete C[x]},_lendBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,x=(this||p)._nActiveBindings++,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_takeBackBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,x=--(this||p)._nActiveBindings,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_lendControlInterpolant:function(){var u=(this||p)._controlInterpolants,z=(this||p)._nActiveControlInterpolants++,t=u[z];void 0===t&&(t=new iI(new Float32Array(2),
new Float32Array(2),1,(this||p)._controlInterpolantsResultBuffer),t.__cacheIndex=z,u[z]=t);return t},_takeBackControlInterpolant:function(u){var z=(this||p)._controlInterpolants,t=u.__cacheIndex,x=--(this||p)._nActiveControlInterpolants,C=z[x];u.__cacheIndex=x;z[x]=u;C.__cacheIndex=t;z[t]=C},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(u,z,t){var x=z||(this||p)._root,C=x.uuid;x="string"===typeof u?Ys.findByName(x,u):u;u=null!==x?x.uuid:u;var G=(this||p)._actionsByClip[u],
L=null;void 0===t&&(t=null!==x?x.blendMode:2500);if(void 0!==G){L=G.actionByRoot[C];if(void 0!==L&&L.blendMode===t)return L;L=G.knownActions[0];null===x&&(x=L._clip)}if(null===x)return null;z=new Wra(this||p,x,z,t);this._bindAction(z,L);this._addInactiveAction(z,u,C);return z},existingAction:function(u,z){var t=z||(this||p)._root;z=t.uuid;t="string"===typeof u?Ys.findByName(t,u):u;u=(this||p)._actionsByClip[t?t.uuid:u];return void 0!==u?u.actionByRoot[z]||null:null},stopAllAction:function(){for(var u=
(this||p)._actions,z=(this||p)._nActiveActions-1;0<=z;--z)u[z].stop();return this||p},update:function(u){u*=(this||p).timeScale;for(var z=(this||p)._actions,t=(this||p)._nActiveActions,x=(this||p).time+=u,C=Math.sign(u),G=(this||p)._accuIndex^=1,L=0;L!==t;++L)z[L]._update(x,u,C,G);u=(this||p)._bindings;z=(this||p)._nActiveBindings;for(t=0;t!==z;++t)u[t].apply(G);return this||p},setTime:function(u){for(var z=(this||p).time=0;z<(this||p)._actions.length;z++)(this||p)._actions[z].time=0;return this.update(u)},
getRoot:function(){return(this||p)._root},uncacheClip:function(u){var z=(this||p)._actions;u=u.uuid;var t=(this||p)._actionsByClip,x=t[u];if(void 0!==x){x=x.knownActions;for(var C=0,G=x.length;C!==G;++C){var L=x[C];this._deactivateAction(L);var S=L._cacheIndex,V=z[z.length-1];L._cacheIndex=null;L._byClipCacheIndex=null;V._cacheIndex=S;z[S]=V;z.pop();this._removeInactiveBindingsForAction(L)}delete t[u]}},uncacheRoot:function(u){u=u.uuid;var z=(this||p)._actionsByClip;for(x in z){var t=z[x].actionByRoot[u];
void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}var x=(this||p)._bindingsByRootAndName[u];if(void 0!==x)for(var C in x)u=x[C],u.restoreOriginalState(),this._removeInactiveBinding(u)},uncacheAction:function(u,z){u=this.existingAction(u,z);null!==u&&(this._deactivateAction(u),this._removeInactiveAction(u))}});var taa=function(){function u(z,t){"string"===typeof z&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),z=t);(this||p).value=z}u.prototype.clone=function(){return new u(void 0===
(this||p).value.clone?(this||p).value:(this||p).value.clone())};return u}();zW.prototype=Object.assign(Object.create(Fr.prototype),{constructor:zW,isInstancedInterleavedBuffer:!0,copy:function(u){Fr.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},clone:function(u){u=Fr.prototype.clone.call(this||p,u);u.meshPerAttribute=(this||p).meshPerAttribute;return u},toJSON:function(u){u=Fr.prototype.toJSON.call(this||p,u);u.isInstancedInterleavedBuffer=!0;u.meshPerAttribute=
(this||p).meshPerAttribute;return u}});Object.defineProperty(AW.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(AW.prototype,{isGLBufferAttribute:!0,setBuffer:function(u){(this||p).buffer=u;return this||p},setType:function(u,z){(this||p).type=u;(this||p).elementSize=z;return this||p},setItemSize:function(u){(this||p).itemSize=u;return this||p},setCount:function(u){(this||p).count=u;return this||p}});Object.assign(BW.prototype,{set:function(u,z){(this||p).ray.set(u,
z)},setFromCamera:function(u,z){z&&z.isPerspectiveCamera?((this||p).ray.origin.setFromMatrixPosition(z.matrixWorld),(this||p).ray.direction.set(u.x,u.y,.5).unproject(z).sub((this||p).ray.origin).normalize(),(this||p).camera=z):z&&z.isOrthographicCamera?((this||p).ray.origin.set(u.x,u.y,(z.near+z.far)/(z.near-z.far)).unproject(z),(this||p).ray.direction.set(0,0,-1).transformDirection(z.matrixWorld),(this||p).camera=z):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(u,
z,t){t=t||[];CW(u,this||p,t,z);t.sort(s$);return t},intersectObjects:function(u,z,t){t=t||[];if(!1===Array.isArray(u))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),t;for(var x=0,C=u.length;x<C;x++)CW(u[x],this||p,t,z);t.sort(s$);return t}});var Xra=function(){function u(t,x,C){void 0===t&&(t=1);void 0===x&&(x=0);void 0===C&&(C=0);(this||p).radius=t;(this||p).phi=x;(this||p).theta=C;return this||p}var z=u.prototype;z.set=function(t,x,C){(this||p).radius=t;(this||
p).phi=x;(this||p).theta=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;(this||p).phi=t.phi;(this||p).theta=t.theta;return this||p};z.makeSafe=function(){(this||p).phi=Math.max(1E-6,Math.min(Math.PI-1E-6,(this||p).phi));return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,x,C){(this||p).radius=Math.sqrt(t*t+x*x+C*C);0===(this||p).radius?((this||
p).theta=0,(this||p).phi=0):((this||p).theta=Math.atan2(t,C),(this||p).phi=Math.acos(Xh.clamp(x/(this||p).radius,-1,1)));return this||p};return u}(),Yra=function(){function u(t,x,C){(this||p).radius=void 0!==t?t:1;(this||p).theta=void 0!==x?x:0;(this||p).y=void 0!==C?C:0;return this||p}var z=u.prototype;z.set=function(t,x,C){(this||p).radius=t;(this||p).theta=x;(this||p).y=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;
(this||p).theta=t.theta;(this||p).y=t.y;return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,x,C){(this||p).radius=Math.sqrt(t*t+C*C);(this||p).theta=Math.atan2(t,C);(this||p).y=x;return this||p};return u}(),uaa=new Xe,vaa=function(){function u(t,x){Object.defineProperty(this||p,"isBox2",{value:!0});(this||p).min=void 0!==t?t:new Xe(Infinity,Infinity);(this||p).max=void 0!==x?x:new Xe(-Infinity,-Infinity)}var z=u.prototype;
z.set=function(t,x){(this||p).min.copy(t);(this||p).max.copy(x);return this||p};z.setFromPoints=function(t){this.makeEmpty();for(var x=0,C=t.length;x<C;x++)this.expandByPoint(t[x]);return this||p};z.setFromCenterAndSize=function(t,x){x=uaa.copy(x).multiplyScalar(.5);(this||p).min.copy(t).sub(x);(this||p).max.copy(t).add(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=
function(){(this||p).min.x=(this||p).min.y=Infinity;(this||p).max.x=(this||p).max.y=-Infinity;return this||p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Xe);return this.isEmpty()?t.set(0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),
t=new Xe);return this.isEmpty()?t.set(0,0):t.subVectors((this||p).max,(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y?!1:!0};z.containsBox=function(t){return(this||
p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y};z.getParameter=function(t,x){void 0===x&&(console.warn("THREE.Box2: .getParameter() target is now required"),x=new Xe);return x.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y?!1:!0};z.clampPoint=function(t,
x){void 0===x&&(console.warn("THREE.Box2: .clampPoint() target is now required"),x=new Xe);return x.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return uaa.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.intersect=function(t){(this||p).min.max(t.min);(this||p).max.min(t.max);return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};
z.equals=function(t){return t.min.equals((this||p).min)&&t.max.equals((this||p).max)};return u}(),waa=new nc,aP=new nc,xaa=function(){function u(t,x){(this||p).start=void 0!==t?t:new nc;(this||p).end=void 0!==x?x:new nc}var z=u.prototype;z.set=function(t,x){(this||p).start.copy(t);(this||p).end.copy(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).start.copy(t.start);(this||p).end.copy(t.end);return this||p};z.getCenter=function(t){void 0===
t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new nc);return t.addVectors((this||p).start,(this||p).end).multiplyScalar(.5)};z.delta=function(t){void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new nc);return t.subVectors((this||p).end,(this||p).start)};z.distanceSq=function(){return(this||p).start.distanceToSquared((this||p).end)};z.distance=function(){return(this||p).start.distanceTo((this||p).end)};z.at=function(t,x){void 0===x&&(console.warn("THREE.Line3: .at() target is now required"),
x=new nc);return this.delta(x).multiplyScalar(t).add((this||p).start)};z.closestPointToPointParameter=function(t,x){waa.subVectors(t,(this||p).start);aP.subVectors((this||p).end,(this||p).start);t=aP.dot(aP);t=aP.dot(waa)/t;x&&(t=Xh.clamp(t,0,1));return t};z.closestPointToPoint=function(t,x,C){t=this.closestPointToPointParameter(t,x);void 0===C&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),C=new nc);return this.delta(C).multiplyScalar(t).add((this||p).start)};z.applyMatrix4=
function(t){(this||p).start.applyMatrix4(t);(this||p).end.applyMatrix4(t);return this||p};z.equals=function(t){return t.start.equals((this||p).start)&&t.end.equals((this||p).end)};return u}();nI.prototype=Object.create(E.prototype);nI.prototype.constructor=nI;nI.prototype.isImmediateRenderObject=!0;var yaa=new nc,Zra=function(u){function z(x,C){var G=u.call(this||p)||this||p;G.light=x;G.light.updateMatrixWorld();G.matrix=x.matrixWorld;G.matrixAutoUpdate=!1;G.color=C;x=new oa;C=[0,0,0,0,0,1,0,0,0,
1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var L=0,S=1;32>L;L++,S++){var V=L/32*Math.PI*2,Z=S/32*Math.PI*2;C.push(Math.cos(V),Math.sin(V),1,Math.cos(Z),Math.sin(Z),1)}x.setAttribute("position",new U(C,3));C=new Ml({fog:!1,toneMapped:!1});G.cone=new Vp(x,C);G.add(G.cone);G.update();return G}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).cone.geometry.dispose();(this||p).cone.material.dispose()};t.update=function(){(this||p).light.updateMatrixWorld();var x=(this||p).light.distance?(this||
p).light.distance:1E3,C=x*Math.tan((this||p).light.angle);(this||p).cone.scale.set(C,C,x);yaa.setFromMatrixPosition((this||p).light.target.matrixWorld);(this||p).cone.lookAt(yaa);void 0!==(this||p).color?(this||p).cone.material.color.set((this||p).color):(this||p).cone.material.color.copy((this||p).light.color)};return z}(E),sz=new nc,bP=new fj,tX=new fj,zaa=function(u){function z(t){var x=t$(t);var C=new oa;for(var G=[],L=[],S=new rg(0,0,1),V=new rg(0,1,0),Z=0;Z<x.length;Z++){var ja=x[Z];ja.parent&&
ja.parent.isBone&&(G.push(0,0,0),G.push(0,0,0),L.push(S.r,S.g,S.b),L.push(V.r,V.g,V.b))}C.setAttribute("position",new U(G,3));C.setAttribute("color",new U(L,3));G=new Ml({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});C=u.call(this||p,C,G)||this||p;C.type="SkeletonHelper";C.isSkeletonHelper=!0;C.root=t;C.bones=x;C.matrix=t.matrixWorld;C.matrixAutoUpdate=!1;return C}g(z,u);z.prototype.updateMatrixWorld=function(t){var x=(this||p).bones,C=(this||p).geometry,G=C.getAttribute("position");
tX.getInverse((this||p).root.matrixWorld);for(var L=0,S=0;L<x.length;L++){var V=x[L];V.parent&&V.parent.isBone&&(bP.multiplyMatrices(tX,V.matrixWorld),sz.setFromMatrixPosition(bP),G.setXYZ(S,sz.x,sz.y,sz.z),bP.multiplyMatrices(tX,V.parent.matrixWorld),sz.setFromMatrixPosition(bP),G.setXYZ(S+1,sz.x,sz.y,sz.z),S+=2)}C.getAttribute("position").needsUpdate=!0;u.prototype.updateMatrixWorld.call(this||p,t)};return z}(Vp),$ra=function(u){function z(x,C,G){C=new XO(C,4,2);var L=new N({wireframe:!0,fog:!1,
toneMapped:!1});C=u.call(this||p,C,L)||this||p;C.light=x;C.light.updateMatrixWorld();C.color=G;C.type="PointLightHelper";C.matrix=C.light.matrixWorld;C.matrixAutoUpdate=!1;C.update();return C}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).geometry.dispose();(this||p).material.dispose()};t.update=function(){void 0!==(this||p).color?(this||p).material.color.set((this||p).color):(this||p).material.color.copy((this||p).light.color)};return z}(hb),asa=new nc,Aaa=new rg,Baa=new rg,bsa=function(u){function z(x,
C,G){var L=u.call(this||p)||this||p;L.light=x;L.light.updateMatrixWorld();L.matrix=x.matrixWorld;L.matrixAutoUpdate=!1;L.color=G;x=new WO(C);x.rotateY(.5*Math.PI);L.material=new N({wireframe:!0,fog:!1,toneMapped:!1});void 0===L.color&&(L.material.vertexColors=!0);C=x.getAttribute("position");C=new Float32Array(3*C.count);x.setAttribute("color",new X(C,3));L.add(new hb(x,L.material));L.update();return L}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).children[0].geometry.dispose();(this||p).children[0].material.dispose()};
t.update=function(){var x=(this||p).children[0];if(void 0!==(this||p).color)(this||p).material.color.set((this||p).color);else{var C=x.geometry.getAttribute("color");Aaa.copy((this||p).light.color);Baa.copy((this||p).light.groundColor);for(var G=0,L=C.count;G<L;G++){var S=G<L/2?Aaa:Baa;C.setXYZ(G,S.r,S.g,S.b)}C.needsUpdate=!0}x.lookAt(asa.setFromMatrixPosition((this||p).light.matrixWorld).negate())};return z}(E),Caa=function(u){function z(t,x,C,G){t=t||10;x=x||10;C=new rg(void 0!==C?C:4473924);G=
new rg(void 0!==G?G:8947848);var L=x/2,S=t/x,V=t/2;t=[];for(var Z=[],ja=0,ta=0,Ha=-V;ja<=x;ja++,Ha+=S){t.push(-V,0,Ha,V,0,Ha);t.push(Ha,0,-V,Ha,0,V);var db=ja===L?C:G;db.toArray(Z,ta);ta+=3;db.toArray(Z,ta);ta+=3;db.toArray(Z,ta);ta+=3;db.toArray(Z,ta);ta+=3}x=new oa;x.setAttribute("position",new U(t,3));x.setAttribute("color",new U(Z,3));C=new Ml({vertexColors:!0,toneMapped:!1});x=u.call(this||p,x,C)||this||p;x.type="GridHelper";return x}g(z,u);return z}(Vp),csa=function(u){function z(t,x,C,G,L,
S){t=t||10;x=x||16;C=C||8;G=G||64;L=new rg(void 0!==L?L:4473924);S=new rg(void 0!==S?S:8947848);var V=[];for(var Z=[],ja=0;ja<=x;ja++){var ta=ja/x*2*Math.PI,Ha=Math.sin(ta)*t;ta=Math.cos(ta)*t;V.push(0,0,0);V.push(Ha,0,ta);Ha=ja&1?L:S;Z.push(Ha.r,Ha.g,Ha.b);Z.push(Ha.r,Ha.g,Ha.b)}for(x=0;x<=C;x++)for(ja=x&1?L:S,Ha=t-t/C*x,ta=0;ta<G;ta++){var db=ta/G*2*Math.PI,Ya=Math.sin(db)*Ha;db=Math.cos(db)*Ha;V.push(Ya,0,db);Z.push(ja.r,ja.g,ja.b);db=(ta+1)/G*2*Math.PI;Ya=Math.sin(db)*Ha;db=Math.cos(db)*Ha;V.push(Ya,
0,db);Z.push(ja.r,ja.g,ja.b)}t=new oa;t.setAttribute("position",new U(V,3));t.setAttribute("color",new U(Z,3));V=new Ml({vertexColors:!0,toneMapped:!1});V=u.call(this||p,t,V)||this||p;V.type="PolarGridHelper";return V}g(z,u);return z}(Vp),Daa=new nc,cP=new nc,Eaa=new nc,dsa=function(u){function z(x,C,G){var L=u.call(this||p)||this||p;L.light=x;L.light.updateMatrixWorld();L.matrix=x.matrixWorld;L.matrixAutoUpdate=!1;L.color=G;void 0===C&&(C=1);x=new oa;x.setAttribute("position",new U([-C,C,0,C,C,0,
C,-C,0,-C,-C,0,-C,C,0],3));C=new Ml({fog:!1,toneMapped:!1});L.lightPlane=new Xs(x,C);L.add(L.lightPlane);x=new oa;x.setAttribute("position",new U([0,0,0,0,0,1],3));L.targetLine=new Xs(x,C);L.add(L.targetLine);L.update();return L}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).lightPlane.geometry.dispose();(this||p).lightPlane.material.dispose();(this||p).targetLine.geometry.dispose();(this||p).targetLine.material.dispose()};t.update=function(){Daa.setFromMatrixPosition((this||p).light.matrixWorld);
cP.setFromMatrixPosition((this||p).light.target.matrixWorld);Eaa.subVectors(cP,Daa);(this||p).lightPlane.lookAt(cP);void 0!==(this||p).color?((this||p).lightPlane.material.color.set((this||p).color),(this||p).targetLine.material.color.set((this||p).color)):((this||p).lightPlane.material.color.copy((this||p).light.color),(this||p).targetLine.material.color.copy((this||p).light.color));(this||p).targetLine.lookAt(cP);(this||p).targetLine.scale.z=Eaa.length()};return z}(E),zO=new nc,lm=new Lb,esa=function(u){function z(t){function x(vb,
sb,Qc){C(vb,Qc);C(sb,Qc)}function C(vb,sb){S.push(0,0,0);V.push(sb.r,sb.g,sb.b);void 0===Z[vb]&&(Z[vb]=[]);Z[vb].push(S.length/3-1)}var G=new oa;var L=new Ml({color:16777215,vertexColors:!0,toneMapped:!1}),S=[],V=[],Z={},ja=new rg(16755200),ta=new rg(16711680),Ha=new rg(43775),db=new rg(16777215),Ya=new rg(3355443);x("n1","n2",ja);x("n2","n4",ja);x("n4","n3",ja);x("n3","n1",ja);x("f1","f2",ja);x("f2","f4",ja);x("f4","f3",ja);x("f3","f1",ja);x("n1","f1",ja);x("n2","f2",ja);x("n3","f3",ja);x("n4","f4",
ja);x("p","n1",ta);x("p","n2",ta);x("p","n3",ta);x("p","n4",ta);x("u1","u2",Ha);x("u2","u3",Ha);x("u3","u1",Ha);x("c","t",db);x("p","c",Ya);x("cn1","cn2",Ya);x("cn3","cn4",Ya);x("cf1","cf2",Ya);x("cf3","cf4",Ya);G.setAttribute("position",new U(S,3));G.setAttribute("color",new U(V,3));G=u.call(this||p,G,L)||this||p;G.type="CameraHelper";G.camera=t;G.camera.updateProjectionMatrix&&G.camera.updateProjectionMatrix();G.matrix=t.matrixWorld;G.matrixAutoUpdate=!1;G.pointMap=Z;G.update();return G}g(z,u);
z.prototype.update=function(){var t=(this||p).geometry,x=(this||p).pointMap;lm.projectionMatrixInverse.copy((this||p).camera.projectionMatrixInverse);Bm("c",x,t,lm,0,0,-1);Bm("t",x,t,lm,0,0,1);Bm("n1",x,t,lm,-1,-1,-1);Bm("n2",x,t,lm,1,-1,-1);Bm("n3",x,t,lm,-1,1,-1);Bm("n4",x,t,lm,1,1,-1);Bm("f1",x,t,lm,-1,-1,1);Bm("f2",x,t,lm,1,-1,1);Bm("f3",x,t,lm,-1,1,1);Bm("f4",x,t,lm,1,1,1);Bm("u1",x,t,lm,.7,1.1,-1);Bm("u2",x,t,lm,-.7,1.1,-1);Bm("u3",x,t,lm,0,2,-1);Bm("cf1",x,t,lm,-1,0,1);Bm("cf2",x,t,lm,1,0,
1);Bm("cf3",x,t,lm,0,-1,1);Bm("cf4",x,t,lm,0,1,1);Bm("cn1",x,t,lm,-1,0,-1);Bm("cn2",x,t,lm,1,0,-1);Bm("cn3",x,t,lm,0,-1,-1);Bm("cn4",x,t,lm,0,1,-1);t.getAttribute("position").needsUpdate=!0};return z}(Vp),dP=new Sv,Faa=function(u){function z(x,C){void 0===C&&(C=16776960);var G=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),L=new Float32Array(24),S=new oa;S.setIndex(new X(G,1));S.setAttribute("position",new X(L,3));C=u.call(this||p,S,new Ml({color:C,toneMapped:!1}))||this||p;C.object=
x;C.type="BoxHelper";C.matrixAutoUpdate=!1;C.update();return C}g(z,u);var t=z.prototype;t.update=function(x){void 0!==x&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==(this||p).object&&dP.setFromObject((this||p).object);if(!dP.isEmpty()){x=dP.min;var C=dP.max,G=(this||p).geometry.attributes.position,L=G.array;L[0]=C.x;L[1]=C.y;L[2]=C.z;L[3]=x.x;L[4]=C.y;L[5]=C.z;L[6]=x.x;L[7]=x.y;L[8]=C.z;L[9]=C.x;L[10]=x.y;L[11]=C.z;L[12]=C.x;L[13]=C.y;L[14]=x.z;L[15]=x.x;L[16]=C.y;
L[17]=x.z;L[18]=x.x;L[19]=x.y;L[20]=x.z;L[21]=C.x;L[22]=x.y;L[23]=x.z;G.needsUpdate=!0;(this||p).geometry.computeBoundingSphere()}};t.setFromObject=function(x){(this||p).object=x;this.update();return this||p};t.copy=function(x){Vp.prototype.copy.call(this||p,x);(this||p).object=x.object;return this||p};return z}(Vp),fsa=function(u){function z(t,x){void 0===x&&(x=16776960);var C=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),G=new oa;G.setIndex(new X(C,1));G.setAttribute("position",
new U([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));x=u.call(this||p,G,new Ml({color:x,toneMapped:!1}))||this||p;x.box=t;x.type="Box3Helper";x.geometry.computeBoundingSphere();return x}g(z,u);z.prototype.updateMatrixWorld=function(t){var x=(this||p).box;x.isEmpty()||(x.getCenter((this||p).position),x.getSize((this||p).scale),(this||p).scale.multiplyScalar(.5),u.prototype.updateMatrixWorld.call(this||p,t))};return z}(Vp),gsa=function(u){function z(t,x,C){C=void 0!==C?C:16776960;
var G=new oa;G.setAttribute("position",new U([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));G.computeBoundingSphere();G=u.call(this||p,G,new Ml({color:C,toneMapped:!1}))||this||p;G.type="PlaneHelper";G.plane=t;G.size=void 0===x?1:x;t=new oa;t.setAttribute("position",new U([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));t.computeBoundingSphere();G.add(new hb(t,new N({color:C,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})));return G}g(z,u);z.prototype.updateMatrixWorld=
function(t){var x=-(this||p).plane.constant;1E-8>Math.abs(x)&&(x=1E-8);(this||p).scale.set(.5*(this||p).size,.5*(this||p).size,x);(this||p).children[0].material.side=0>x?1:0;this.lookAt((this||p).plane.normal);u.prototype.updateMatrixWorld.call(this||p,t)};return z}(Xs),Gaa=new nc,eP,uX,hsa=function(u){function z(x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="ArrowHelper";void 0===x&&(x=new nc(0,0,1));void 0===C&&(C=new nc(0,0,0));void 0===G&&(G=1);void 0===L&&(L=16776960);void 0===S&&(S=.2*
G);void 0===V&&(V=.2*S);void 0===eP&&(eP=new oa,eP.setAttribute("position",new U([0,0,0,0,1,0],3)),uX=new yI(0,.5,1,5,1),uX.translate(0,-.5,0));Z.position.copy(C);Z.line=new Xs(eP,new Ml({color:L,toneMapped:!1}));Z.line.matrixAutoUpdate=!1;Z.add(Z.line);Z.cone=new hb(uX,new N({color:L,toneMapped:!1}));Z.cone.matrixAutoUpdate=!1;Z.add(Z.cone);Z.setDirection(x);Z.setLength(G,S,V);return Z}g(z,u);var t=z.prototype;t.setDirection=function(x){.99999<x.y?(this||p).quaternion.set(0,0,0,1):-.99999>x.y?(this||
p).quaternion.set(1,0,0,0):(Gaa.set(x.z,0,-x.x).normalize(),(this||p).quaternion.setFromAxisAngle(Gaa,Math.acos(x.y)))};t.setLength=function(x,C,G){void 0===C&&(C=.2*x);void 0===G&&(G=.2*C);(this||p).line.scale.set(1,Math.max(1E-4,x-C),1);(this||p).line.updateMatrix();(this||p).cone.scale.set(G,C,G);(this||p).cone.position.y=x;(this||p).cone.updateMatrix()};t.setColor=function(x){(this||p).line.material.color.set(x);(this||p).cone.material.color.set(x)};t.copy=function(x){u.prototype.copy.call(this||
p,x,!1);(this||p).line.copy(x.line);(this||p).cone.copy(x.cone);return this||p};return z}(E),Haa=function(u){function z(t){void 0===t&&(t=1);var x=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];t=new oa;t.setAttribute("position",new U(x,3));t.setAttribute("color",new U([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));x=new Ml({vertexColors:!0,toneMapped:!1});t=u.call(this||p,t,x)||this||p;t.type="AxesHelper";return t}g(z,u);return z}(Vp),ox,Qv=Math.pow(2,8),Iaa=[.125,.215,.35,.446,.526,.582],Jaa=5+Iaa.length,
Rv=(ox={},ox[3E3]=0,ox[3001]=1,ox[3002]=2,ox[3004]=3,ox[3005]=4,ox[3006]=5,ox[3007]=6,ox),vX=new yE,wX=function(){for(var u=[],z=[],t=[],x=8,C=0;C<Jaa;C++){var G=Math.pow(2,x);z.push(G);var L=1/G;4<C?L=Iaa[C-8+4-1]:0==C&&(L=0);t.push(L);L=1/(G-1);G=-L/2;L=1+L/2;var S=[G,G,L,G,L,L,G,G,L,L,G,L];G=new Float32Array(108);L=new Float32Array(72);for(var V=new Float32Array(36),Z=0;6>Z;Z++){var ja=Z%3*2/3-1,ta=2<Z?0:-1;G.set([ja,ta,0,ja+2/3,ta,0,ja+2/3,ta+1,0,ja,ta,0,ja+2/3,ta+1,0,ja,ta+1,0],18*Z);L.set(S,
12*Z);V.set([Z,Z,Z,Z,Z,Z],6*Z)}S=new oa;S.setAttribute("position",new X(G,3));S.setAttribute("uv",new X(L,2));S.setAttribute("faceIndex",new X(V,1));u.push(S);4<x&&x--}return{_lodPlanes:u,_sizeLods:z,_sigmas:t}}(),AI=wX._lodPlanes,Kaa=wX._sizeLods,fP=wX._sigmas,xX=null,aC=(1+Math.sqrt(5))/2,NE=1/aC,Laa=[new nc(1,1,1),new nc(-1,1,1),new nc(1,1,-1),new nc(-1,1,-1),new nc(0,aC,NE),new nc(0,aC,-NE),new nc(NE,0,aC),new nc(-NE,0,aC),new nc(aC,NE,0),new nc(-aC,NE,0)],isa=function(){function u(t){(this||
p)._renderer=t;(this||p)._pingPongRenderTarget=null;t=new Float32Array(20);var x=new nc(0,1,0);t=new ex({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:x},inputEncoding:{value:Rv[3E3]},outputEncoding:{value:Rv[3E3]}},vertexShader:DW(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+
EW()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1});(this||p)._blurMaterial=t;(this||p)._equirectShader=null;(this||p)._cubemapShader=null;this._compileMaterial((this||p)._blurMaterial)}var z=u.prototype;z.fromScene=function(t,x,C,G){void 0===x&&(x=0);void 0===C&&(C=.1);void 0===G&&(G=100);xX=(this||p)._renderer.getRenderTarget();var L=this._allocateTargets();this._sceneToCubeUV(t,C,G,L);0<x&&this._blur(L,0,0,x);this._applyPMREM(L);this._cleanup(L);return L};z.fromEquirectangular=function(t){return this._fromTexture(t)};
z.fromCubemap=function(t){return this._fromTexture(t)};z.compileCubemapShader=function(){null===(this||p)._cubemapShader&&((this||p)._cubemapShader=w$(),this._compileMaterial((this||p)._cubemapShader))};z.compileEquirectangularShader=function(){null===(this||p)._equirectShader&&((this||p)._equirectShader=v$(),this._compileMaterial((this||p)._equirectShader))};z.dispose=function(){(this||p)._blurMaterial.dispose();null!==(this||p)._cubemapShader&&(this||p)._cubemapShader.dispose();null!==(this||p)._equirectShader&&
(this||p)._equirectShader.dispose();for(var t=0;t<AI.length;t++)AI[t].dispose()};z._cleanup=function(t){(this||p)._pingPongRenderTarget.dispose();(this||p)._renderer.setRenderTarget(xX);t.scissorTest=!1;AO(t,0,0,t.width,t.height)};z._fromTexture=function(t){xX=(this||p)._renderer.getRenderTarget();var x=this._allocateTargets(t);this._textureToCubeUV(t,x);this._applyPMREM(x);this._cleanup(x);return x};z._allocateTargets=function(t){var x=void 0===t||1009!==t.type?!1:3E3===t.encoding||3001===t.encoding||
3007===t.encoding;x={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:x?t.encoding:3002,depthBuffer:!1};var C=u$(x);C.depthBuffer=t?!1:!0;(this||p)._pingPongRenderTarget=u$(x);return C};z._compileMaterial=function(t){t=new hb(AI[0],t);(this||p)._renderer.compile(t,vX)};z._sceneToCubeUV=function(t,x,C,G){x=new ic(90,1,x,C);C=[1,-1,1,1,1,1];var L=[1,1,1,-1,-1,-1],S=(this||p)._renderer,V=S.outputEncoding,Z=S.toneMapping,ja=S.getClearColor(),ta=S.getClearAlpha();S.toneMapping=
0;S.outputEncoding=3E3;var Ha=t.background;if(Ha&&Ha.isColor){Ha.convertSRGBToLinear();var db=Math.min(Math.max(Math.ceil(Math.log2(Math.max(Ha.r,Ha.g,Ha.b))),-128),127);Ha=Ha.multiplyScalar(Math.pow(2,-db));S.setClearColor(Ha,(db+128)/255);t.background=null}for(Ha=0;6>Ha;Ha++)db=Ha%3,0==db?(x.up.set(0,C[Ha],0),x.lookAt(L[Ha],0,0)):1==db?(x.up.set(0,0,C[Ha]),x.lookAt(0,L[Ha],0)):(x.up.set(0,C[Ha],0),x.lookAt(0,0,L[Ha])),AO(G,db*Qv,2<Ha?Qv:0,Qv,Qv),S.setRenderTarget(G),S.render(t,x);S.toneMapping=
Z;S.outputEncoding=V;S.setClearColor(ja,ta)};z._textureToCubeUV=function(t,x){var C=(this||p)._renderer;t.isCubeTexture?null==(this||p)._cubemapShader&&((this||p)._cubemapShader=w$()):null==(this||p)._equirectShader&&((this||p)._equirectShader=v$());var G=t.isCubeTexture?(this||p)._cubemapShader:(this||p)._equirectShader,L=new hb(AI[0],G);G=G.uniforms;G.envMap.value=t;t.isCubeTexture||G.texelSize.value.set(1/t.image.width,1/t.image.height);G.inputEncoding.value=Rv[t.encoding];G.outputEncoding.value=
Rv[x.texture.encoding];AO(x,0,0,3*Qv,2*Qv);C.setRenderTarget(x);C.render(L,vX)};z._applyPMREM=function(t){var x=(this||p)._renderer,C=x.autoClear;x.autoClear=!1;for(var G=1;G<Jaa;G++)this._blur(t,G-1,G,Math.sqrt(fP[G]*fP[G]-fP[G-1]*fP[G-1]),Laa[(G-1)%Laa.length]);x.autoClear=C};z._blur=function(t,x,C,G,L){var S=(this||p)._pingPongRenderTarget;this._halfBlur(t,S,x,C,G,"latitudinal",L);this._halfBlur(S,t,C,C,G,"longitudinal",L)};z._halfBlur=function(t,x,C,G,L,S,V){var Z=(this||p)._renderer,ja=(this||
p)._blurMaterial;"latitudinal"!==S&&"longitudinal"!==S&&console.error("blur direction must be either latitudinal or longitudinal!");var ta=new hb(AI[G],ja);ja=ja.uniforms;var Ha=Kaa[C]-1;Ha=isFinite(L)?Math.PI/(2*Ha):2*Math.PI/39;var db=L/Ha,Ya=isFinite(L)?1+Math.floor(3*db):20;20<Ya&&console.warn("sigmaRadians, "+L+", is too large and will clip, as it requested "+Ya+" samples when the maximum is set to 20");L=[];for(var vb=0,sb=0;20>sb;++sb){var Qc=sb/db;Qc=Math.exp(-Qc*Qc/2);L.push(Qc);0==sb?vb+=
Qc:sb<Ya&&(vb+=2*Qc)}for(db=0;db<L.length;db++)L[db]/=vb;ja.envMap.value=t.texture;ja.samples.value=Ya;ja.weights.value=L;ja.latitudinal.value="latitudinal"===S;V&&(ja.poleAxis.value=V);ja.dTheta.value=Ha;ja.mipInt.value=8-C;ja.inputEncoding.value=Rv[t.texture.encoding];ja.outputEncoding.value=Rv[t.texture.encoding];t=Kaa[G];AO(x,3*Math.max(0,Qv-2*t),(0===G?0:2*Qv)+2*t*(4<G?G-8+4:0),3*t,2*t);Z.setRenderTarget(x);Z.render(ta,vX)};return u}();ah.create=function(u,z){console.log("THREE.Curve.create() has been deprecated");
u.prototype=Object.create(ah.prototype);u.prototype.constructor=u;u.prototype.getPoint=z;return u};Object.assign(fx.prototype,{createPointsGeometry:function(u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");u=this.getPoints(u);return this.createGeometry(u)},createSpacedPointsGeometry:function(u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
u=this.getSpacedPoints(u);return this.createGeometry(u)},createGeometry:function(u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var z=new Sk,t=0,x=u.length;t<x;t++){var C=u[t];z.vertices.push(new nc(C.x,C.y,C.z||0))}return z}});Object.assign(iu.prototype,{fromPoints:function(u){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(u)}});x$.prototype=Object.create(np.prototype);
y$.prototype=Object.create(np.prototype);FW.prototype=Object.create(np.prototype);Object.assign(FW.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Caa.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
zaa.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Mk.prototype,{extractUrlBase:function(u){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return qX.extractUrlBase(u)}});Mk.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};
Object.assign(vaa.prototype,{center:function(u){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},size:function(u){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(u)}});
Object.assign(Sv.prototype,{center:function(u){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionSphere:function(u){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");
return this.intersectsSphere(u)},size:function(u){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(u)}});Object.assign(ix.prototype,{empty:function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()}});WH.prototype.setFromMatrix=function(u){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(u)};xaa.prototype.center=function(u){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");
return this.getCenter(u)};Object.assign(Xh,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(u){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return Xh.floorPowerOfTwo(u)},nextPowerOfTwo:function(u){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Xh.ceilPowerOfTwo(u)}});Object.assign(Up.prototype,{flattenToArrayOffset:function(u,
z){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},multiplyVector3:function(u){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return u.applyMatrix3(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");
return u.applyMatrix3(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(fj.prototype,{extractPosition:function(u){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(u)},flattenToArrayOffset:function(u,z){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},getPosition:function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
return(new nc).setFromMatrixColumn(this||p,3)},setRotationFromQuaternion:function(u){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(u){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||
p)},multiplyVector4:function(u){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");u.transformDirection(this||p)},crossVector:function(u){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return u.applyMatrix4(this||p)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");
return u.applyMatrix4(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(u,z,t,x,C,G){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(u,z,x,t,C,G)}});Mv.prototype.isIntersectionLine=function(u){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(u)};
mp.prototype.multiplyVector3=function(u){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return u.applyQuaternion(this||p)};Object.assign(zE.prototype,{isIntersectionBox:function(u){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionPlane:function(u){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(u)},
isIntersectionSphere:function(u){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(u)}});Object.assign(au.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(u,z){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(u,z)},midpoint:function(u){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");
return this.getMidpoint(u)},normal:function(u){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(u)},plane:function(u){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(u)}});Object.assign(au,{barycoordFromPoint:function(u,z,t,x,C){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return au.getBarycoord(u,z,t,x,C)},normal:function(u,z,t,x){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");
return au.getNormal(u,z,t,x)}});Object.assign(mz.prototype,{extractAllPoints:function(u){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(u)},extrude:function(u){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new aX(this||p,u)},makeGeometry:function(u){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new fX(this||p,u)}});Object.assign(Xe.prototype,
{fromAttribute:function(u,z,t){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(nc.prototype,
{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(u){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(u)},getScaleFromMatrix:function(u){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");
return this.setFromMatrixScale(u)},getColumnFromMatrix:function(u,z){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(z,u)},applyProjection:function(u){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(u)},fromAttribute:function(u,z,t){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,
z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Rk.prototype,{fromAttribute:function(u,z,t){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,
z,t)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Sk.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(u){console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().");
return this.applyMatrix4(u)}});Object.assign(E.prototype,{getChildByName:function(u){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(u,z){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(z,u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},
applyMatrix:function(u){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(E.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return(this||p).rotation.order},set:function(u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");(this||p).rotation.order=u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(hb.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(hb.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");
return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(bI.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return(this||p).levels}}});Object.defineProperty(aO.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},
set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});$N.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(ah.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return(this||p).arcLengthDivisions},set:function(u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");(this||p).arcLengthDivisions=u}});
ic.prototype.setLens=function(u,z){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==z&&((this||p).filmGauge=z);this.setFocalLength(u)};Object.defineProperties(pl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");(this||p).shadow.camera.fov=u}},shadowCameraLeft:{set:function(u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");
(this||p).shadow.camera.left=u}},shadowCameraRight:{set:function(u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");(this||p).shadow.camera.right=u}},shadowCameraTop:{set:function(u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");(this||p).shadow.camera.top=u}},shadowCameraBottom:{set:function(u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");(this||p).shadow.camera.bottom=u}},shadowCameraNear:{set:function(u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");
(this||p).shadow.camera.near=u}},shadowCameraFar:{set:function(u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");(this||p).shadow.camera.far=u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(u){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");(this||p).shadow.bias=u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},
shadowMapWidth:{set:function(u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");(this||p).shadow.mapSize.width=u}},shadowMapHeight:{set:function(u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");(this||p).shadow.mapSize.height=u}}});Object.defineProperties(X.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return(this||p).array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");
return 35048===(this||p).usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});Object.assign(X.prototype,{setDynamic:function(u){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===u?35048:35044);return this||p},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});
Object.assign(oa.prototype,{addIndex:function(u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(u)},addAttribute:function(u,z,t){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return z&&z.isBufferAttribute||z&&z.isInterleavedBufferAttribute?"index"===u?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(z),this||p):this.setAttribute(u,z):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
this.setAttribute(u,new X(z,t)))},addDrawCall:function(u,z,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(u,z)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},
removeAttribute:function(u){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(u)},applyMatrix:function(u){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(oa.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return(this||p).groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");
return(this||p).groups}}});Object.defineProperties(mI.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");return(this||p).instanceCount},set:function(u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");(this||p).instanceCount=u}}});Object.defineProperties(BW.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");
return(this||p).params.Line.threshold},set:function(u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");(this||p).params.Line.threshold=u}}});Object.defineProperties(Fr.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return 35048===(this||p).usage},set:function(u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(u)}}});
Object.assign(Fr.prototype,{setDynamic:function(u){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===u?35048:35044);return this||p},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(zI.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},
addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(SW.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(taa.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this||
p}}});Object.defineProperties(M.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new rg}},shading:{get:function(){console.error("THREE."+
(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(u){console.warn("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||p).flatShading=1===u}},stencilMask:{get:function(){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return(this||p).stencilFuncMask},set:function(u){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");
(this||p).stencilFuncMask=u}}});Object.defineProperties(lz.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(kz.prototype,{transparency:{get:function(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");return(this||
p).transmission},set:function(u){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");(this||p).transmission=u}}});Object.defineProperties(Ma.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return(this||p).extensions.derivatives},set:function(u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");(this||p).extensions.derivatives=u}}});
Object.assign(YH.prototype,{clearTarget:function(u,z,t,x){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(u);this.clear(z,t,x)},animate:function(u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(u)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");
return(this||p).capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return(this||p).capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return(this||p).state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return(this||p).extensions.get("OES_texture_float")},
supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return(this||p).extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return(this||p).extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return(this||p).extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return(this||p).extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return(this||p).extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return(this||p).capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return(this||p).extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},
addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},
setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()}});Object.defineProperties(YH.prototype,{shadowMapEnabled:{get:function(){return(this||p).shadowMap.enabled},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");(this||p).shadowMap.enabled=u}},shadowMapType:{get:function(){return(this||
p).shadowMap.type},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");(this||p).shadowMap.type=u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");
return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return(this||p).xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");
return!1},set:function(u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");(this||p).outputEncoding=!0===u?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Z9.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(v.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return(this||p).texture.wrapS},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");(this||p).texture.wrapS=u}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");
return(this||p).texture.wrapT},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");(this||p).texture.wrapT=u}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return(this||p).texture.magFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");(this||p).texture.magFilter=u}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");
return(this||p).texture.minFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");(this||p).texture.minFilter=u}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return(this||p).texture.anisotropy},set:function(u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");(this||p).texture.anisotropy=u}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");
return(this||p).texture.offset},set:function(u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");(this||p).texture.offset=u}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return(this||p).texture.repeat},set:function(u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");(this||p).texture.repeat=u}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return(this||
p).texture.format},set:function(u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");(this||p).texture.format=u}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return(this||p).texture.type},set:function(u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");(this||p).texture.type=u}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return(this||
p).texture.generateMipmaps},set:function(u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");(this||p).texture.generateMipmaps=u}}});Object.defineProperties(sX.prototype,{load:{value:function(u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var z=this||p;(new yO).load(u,function(t){z.setBuffer(t)});return this||p}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});saa.prototype.getData=
function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Vb.prototype.updateCubeMap=function(u,z){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(u,z)};Vb.prototype.clear=function(u,z,t,x){console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear().");return(this||p).renderTarget.clear(u,z,t,x)};nz.crossOrigin=void 0;nz.loadTexture=function(u,z,t,x){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
var C=new oO;C.setCrossOrigin((this||p).crossOrigin);u=C.load(u,t,void 0,x);z&&(u.mapping=z);return u};nz.loadTextureCube=function(u,z,t,x){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var C=new mO;C.setCrossOrigin((this||p).crossOrigin);u=C.load(u,t,void 0,x);z&&(u.mapping=z);return u};nz.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};nz.loadCompressedTextureCube=
function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"122"}}));b.ACESFilmicToneMapping=4;b.AddEquation=100;b.AddOperation=2;b.AdditiveAnimationBlendMode=2501;b.AdditiveBlending=2;b.AlphaFormat=1021;b.AlwaysDepth=1;b.AlwaysStencilFunc=519;b.AmbientLight=tO;b.AmbientLightProbe=wW;b.AnimationClip=Ys;b.AnimationLoader=
lW;b.AnimationMixer=yW;b.AnimationObjectGroup=r$;b.AnimationUtils=zl;b.ArcCurve=xE;b.ArrayCamera=WN;b.ArrowHelper=hsa;b.Audio=sX;b.AudioAnalyser=saa;b.AudioContext=rX;b.AudioListener=Lra;b.AudioLoader=yO;b.AxesHelper=Haa;b.AxisHelper=function(u){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Haa(u)};b.BackSide=1;b.BasicDepthPacking=3200;b.BasicShadowMap=0;b.BinaryTextureLoader=function(u){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");
return new nO(u)};b.Bone=eW;b.BooleanKeyframeTrack=iO;b.BoundingBoxHelper=function(u,z){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Faa(u,z)};b.Box2=vaa;b.Box3=Sv;b.Box3Helper=fsa;b.BoxBufferGeometry=VH;b.BoxGeometry=VW;b.BoxHelper=Faa;b.BufferAttribute=X;b.BufferGeometry=oa;b.BufferGeometryLoader=xO;b.ByteType=1010;b.Cache=WB;b.Camera=Lb;b.CameraHelper=esa;b.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};
b.CanvasTexture=cI;b.CatmullRomCurve3=np;b.CineonToneMapping=3;b.CircleBufferGeometry=WW;b.CircleGeometry=W$;b.ClampToEdgeWrapping=1001;b.Clock=paa;b.ClosedSplineCurve3=x$;b.Color=rg;b.ColorKeyframeTrack=jO;b.CompressedTexture=rE;b.CompressedTextureLoader=mW;b.ConeBufferGeometry=Y$;b.ConeGeometry=X$;b.CubeCamera=Vb;b.CubeGeometry=VW;b.CubeReflectionMapping=301;b.CubeRefractionMapping=302;b.CubeTexture=jc;b.CubeTextureLoader=mO;b.CubeUVReflectionMapping=306;b.CubeUVRefractionMapping=307;b.CubicBezierCurve=
eu;b.CubicBezierCurve3=Ov;b.CubicInterpolant=gO;b.CullFaceBack=1;b.CullFaceFront=2;b.CullFaceFrontBack=3;b.CullFaceNone=0;b.Curve=ah;b.CurvePath=fx;b.CustomBlending=5;b.CustomToneMapping=5;b.CylinderBufferGeometry=yI;b.CylinderGeometry=XW;b.Cylindrical=Yra;b.DataTexture=Rb;b.DataTexture2DArray=oj;b.DataTexture3D=Fj;b.DataTextureLoader=nO;b.DecrementStencilOp=7683;b.DecrementWrapStencilOp=34056;b.DefaultLoadingManager=m$;b.DepthFormat=1026;b.DepthStencilFormat=1027;b.DepthTexture=dI;b.DirectionalLight=
sO;b.DirectionalLightHelper=dsa;b.DiscreteInterpolant=hO;b.DodecahedronBufferGeometry=YW;b.DodecahedronGeometry=Z$;b.DoubleSide=2;b.DstAlphaFactor=206;b.DstColorFactor=208;b.DynamicBufferAttribute=function(u,z){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return(new X(u,z)).setUsage(35048)};b.DynamicCopyUsage=35050;b.DynamicDrawUsage=35048;b.DynamicReadUsage=35049;b.EdgesGeometry=$W;b.EdgesHelper=function(u,
z){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Vp(new $W(u.geometry),new Ml({color:void 0!==z?z:16777215}))};b.EllipseCurve=Hr;b.EqualDepth=4;b.EqualStencilFunc=514;b.EquirectangularReflectionMapping=303;b.EquirectangularRefractionMapping=304;b.Euler=QN;b.EventDispatcher=e;b.ExtrudeBufferGeometry=zI;b.ExtrudeGeometry=aX;b.Face3=UH;b.Face4=function(u,z,t,x,C,G,L){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");
return new UH(u,z,t,C,G,L)};b.FaceColors=1;b.FileLoader=Zs;b.FlatShading=1;b.Float32Attribute=function(u,z){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new U(u,z)};b.Float32BufferAttribute=U;b.Float64Attribute=function(u,z){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new pa(u,z)};b.Float64BufferAttribute=pa;b.FloatType=1015;b.Fog=L$;b.FogExp2=K$;b.Font=tW;b.FontLoader=
uW;b.FrontSide=0;b.Frustum=WH;b.GLBufferAttribute=AW;b.GLSL1="100";b.GLSL3="300 es";b.GammaEncoding=3007;b.Geometry=Sk;b.GeometryUtils={merge:function(u,z,t){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(z.isMesh){z.matrixAutoUpdate&&z.updateMatrix();var x=z.matrix;z=z.geometry}u.merge(z,x,t)},center:function(u){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");
return u.center()}};b.GreaterDepth=6;b.GreaterEqualDepth=5;b.GreaterEqualStencilFunc=518;b.GreaterStencilFunc=516;b.GridHelper=Caa;b.Group=dz;b.HalfFloatType=1016;b.HemisphereLight=pO;b.HemisphereLightHelper=bsa;b.HemisphereLightProbe=vW;b.IcosahedronBufferGeometry=bX;b.IcosahedronGeometry=$$;b.ImageBitmapLoader=rW;b.ImageLoader=wE;b.ImageUtils=nz;b.ImmediateRenderObject=nI;b.IncrementStencilOp=7682;b.IncrementWrapStencilOp=34055;b.InstancedBufferAttribute=wO;b.InstancedBufferGeometry=mI;b.InstancedInterleavedBuffer=
zW;b.InstancedMesh=bO;b.Int16Attribute=function(u,z){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Ka(u,z)};b.Int16BufferAttribute=Ka;b.Int32Attribute=function(u,z){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new aa(u,z)};b.Int32BufferAttribute=aa;b.Int8Attribute=function(u,z){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");
return new W(u,z)};b.Int8BufferAttribute=W;b.IntType=1013;b.InterleavedBuffer=Fr;b.InterleavedBufferAttribute=hz;b.Interpolant=Gr;b.InterpolateDiscrete=2300;b.InterpolateLinear=2301;b.InterpolateSmooth=2302;b.InvertStencilOp=5386;b.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};b.KeepStencilOp=7680;b.KeyframeTrack=No;b.LOD=bI;b.LatheBufferGeometry=cX;b.LatheGeometry=aaa;b.Layers=VV;b.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};
b.LessDepth=2;b.LessEqualDepth=3;b.LessEqualStencilFunc=515;b.LessStencilFunc=513;b.Light=pl;b.LightProbe=$s;b.Line=Xs;b.Line3=xaa;b.LineBasicMaterial=Ml;b.LineCurve=Jq;b.LineCurve3=fu;b.LineDashedMaterial=RB;b.LineLoop=cO;b.LinePieces=1;b.LineSegments=Vp;b.LineStrip=0;b.LinearEncoding=3E3;b.LinearFilter=1006;b.LinearInterpolant=iI;b.LinearMipMapLinearFilter=1008;b.LinearMipMapNearestFilter=1007;b.LinearMipmapLinearFilter=1008;b.LinearMipmapNearestFilter=1007;b.LinearToneMapping=1;b.Loader=Mk;b.LoaderUtils=
qX;b.LoadingManager=kW;b.LogLuvEncoding=3003;b.LoopOnce=2200;b.LoopPingPong=2202;b.LoopRepeat=2201;b.LuminanceAlphaFormat=1025;b.LuminanceFormat=1024;b.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};b.Material=M;b.MaterialLoader=vO;b.Math=Xh;b.MathUtils=Xh;b.Matrix3=Up;b.Matrix4=fj;b.MaxEquation=104;b.Mesh=hb;b.MeshBasicMaterial=N;b.MeshDepthMaterial=bz;b.MeshDistanceMaterial=cz;b.MeshFaceMaterial=function(u){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return u};
b.MeshLambertMaterial=PB;b.MeshMatcapMaterial=QB;b.MeshNormalMaterial=OB;b.MeshPhongMaterial=lz;b.MeshPhysicalMaterial=kz;b.MeshStandardMaterial=Nv;b.MeshToonMaterial=NB;b.MinEquation=103;b.MirroredRepeatWrapping=1002;b.MixOperation=1;b.MultiMaterial=function(u){void 0===u&&(u=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");u.isMultiMaterial=!0;u.materials=u;u.clone=function(){return u.slice()};return u};b.MultiplyBlending=4;b.MultiplyOperation=0;b.NearestFilter=1003;
b.NearestMipMapLinearFilter=1005;b.NearestMipMapNearestFilter=1004;b.NearestMipmapLinearFilter=1005;b.NearestMipmapNearestFilter=1004;b.NeverDepth=0;b.NeverStencilFunc=512;b.NoBlending=0;b.NoColors=0;b.NoToneMapping=0;b.NormalAnimationBlendMode=2500;b.NormalBlending=1;b.NotEqualDepth=7;b.NotEqualStencilFunc=517;b.NumberKeyframeTrack=uE;b.Object3D=E;b.ObjectLoader=Jra;b.ObjectSpaceNormalMap=1;b.OctahedronBufferGeometry=WO;b.OctahedronGeometry=baa;b.OneFactor=201;b.OneMinusDstAlphaFactor=207;b.OneMinusDstColorFactor=
209;b.OneMinusSrcAlphaFactor=205;b.OneMinusSrcColorFactor=203;b.OrthographicCamera=yE;b.PCFShadowMap=1;b.PCFSoftShadowMap=2;b.PMREMGenerator=isa;b.ParametricBufferGeometry=tE;b.ParametricGeometry=hI;b.Particle=function(u){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new $H(u)};b.ParticleBasicMaterial=function(u){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new du(u)};b.ParticleSystem=function(u,z){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");
return new qE(u,z)};b.ParticleSystemMaterial=function(u){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new du(u)};b.Path=iu;b.PerspectiveCamera=ic;b.Plane=Mv;b.PlaneBufferGeometry=VN;b.PlaneGeometry=caa;b.PlaneHelper=gsa;b.PointCloud=function(u,z){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new qE(u,z)};b.PointCloudMaterial=function(u){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new du(u)};
b.PointLight=rO;b.PointLightHelper=$ra;b.Points=qE;b.PointsMaterial=du;b.PolarGridHelper=csa;b.PolyhedronBufferGeometry=VB;b.PolyhedronGeometry=daa;b.PositionalAudio=Nra;b.PropertyBinding=op;b.PropertyMixer=xW;b.QuadraticBezierCurve=gu;b.QuadraticBezierCurve3=Pv;b.Quaternion=mp;b.QuaternionKeyframeTrack=jI;b.QuaternionLinearInterpolant=kO;b.REVISION="122";b.RGBADepthPacking=3201;b.RGBAFormat=1023;b.RGBAIntegerFormat=1033;b.RGBA_ASTC_10x10_Format=37819;b.RGBA_ASTC_10x5_Format=37816;b.RGBA_ASTC_10x6_Format=
37817;b.RGBA_ASTC_10x8_Format=37818;b.RGBA_ASTC_12x10_Format=37820;b.RGBA_ASTC_12x12_Format=37821;b.RGBA_ASTC_4x4_Format=37808;b.RGBA_ASTC_5x4_Format=37809;b.RGBA_ASTC_5x5_Format=37810;b.RGBA_ASTC_6x5_Format=37811;b.RGBA_ASTC_6x6_Format=37812;b.RGBA_ASTC_8x5_Format=37813;b.RGBA_ASTC_8x6_Format=37814;b.RGBA_ASTC_8x8_Format=37815;b.RGBA_BPTC_Format=36492;b.RGBA_ETC2_EAC_Format=37496;b.RGBA_PVRTC_2BPPV1_Format=35843;b.RGBA_PVRTC_4BPPV1_Format=35842;b.RGBA_S3TC_DXT1_Format=33777;b.RGBA_S3TC_DXT3_Format=
33778;b.RGBA_S3TC_DXT5_Format=33779;b.RGBDEncoding=3006;b.RGBEEncoding=3002;b.RGBEFormat=1023;b.RGBFormat=1022;b.RGBIntegerFormat=1032;b.RGBM16Encoding=3005;b.RGBM7Encoding=3004;b.RGB_ETC1_Format=36196;b.RGB_ETC2_Format=37492;b.RGB_PVRTC_2BPPV1_Format=35841;b.RGB_PVRTC_4BPPV1_Format=35840;b.RGB_S3TC_DXT1_Format=33776;b.RGFormat=1030;b.RGIntegerFormat=1031;b.RawShaderMaterial=ex;b.Ray=zE;b.Raycaster=BW;b.RectAreaLight=uO;b.RedFormat=1028;b.RedIntegerFormat=1029;b.ReinhardToneMapping=2;b.RepeatWrapping=
1E3;b.ReplaceStencilOp=7681;b.ReverseSubtractEquation=102;b.RingBufferGeometry=dX;b.RingGeometry=eaa;b.SRGB8_ALPHA8_ASTC_10x10_Format=37851;b.SRGB8_ALPHA8_ASTC_10x5_Format=37848;b.SRGB8_ALPHA8_ASTC_10x6_Format=37849;b.SRGB8_ALPHA8_ASTC_10x8_Format=37850;b.SRGB8_ALPHA8_ASTC_12x10_Format=37852;b.SRGB8_ALPHA8_ASTC_12x12_Format=37853;b.SRGB8_ALPHA8_ASTC_4x4_Format=37840;b.SRGB8_ALPHA8_ASTC_5x4_Format=37841;b.SRGB8_ALPHA8_ASTC_5x5_Format=37842;b.SRGB8_ALPHA8_ASTC_6x5_Format=37843;b.SRGB8_ALPHA8_ASTC_6x6_Format=
37844;b.SRGB8_ALPHA8_ASTC_8x5_Format=37845;b.SRGB8_ALPHA8_ASTC_8x6_Format=37846;b.SRGB8_ALPHA8_ASTC_8x8_Format=37847;b.Scene=SW;b.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};b.ShaderChunk=gj;b.ShaderLib=
bu;b.ShaderMaterial=Ma;b.ShadowMaterial=MB;b.Shape=mz;b.ShapeBufferGeometry=eX;b.ShapeGeometry=fX;b.ShapePath=sW;b.ShapeUtils=nx;b.ShortType=1011;b.Skeleton=aO;b.SkeletonHelper=zaa;b.SkinnedMesh=$N;b.SmoothShading=2;b.Sphere=ix;b.SphereBufferGeometry=XO;b.SphereGeometry=faa;b.Spherical=Xra;b.SphericalHarmonics3=o$;b.Spline=FW;b.SplineCurve=hu;b.SplineCurve3=y$;b.SpotLight=qO;b.SpotLightHelper=Zra;b.Sprite=$H;b.SpriteMaterial=iz;b.SrcAlphaFactor=204;b.SrcAlphaSaturateFactor=210;b.SrcColorFactor=202;
b.StaticCopyUsage=35046;b.StaticDrawUsage=35044;b.StaticReadUsage=35045;b.StereoCamera=p$;b.StreamCopyUsage=35042;b.StreamDrawUsage=35040;b.StreamReadUsage=35041;b.StringKeyframeTrack=lO;b.SubtractEquation=101;b.SubtractiveBlending=3;b.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};b.TangentSpaceNormalMap=0;b.TetrahedronBufferGeometry=gX;b.TetrahedronGeometry=gaa;b.TextBufferGeometry=hX;b.TextGeometry=haa;b.Texture=r;b.TextureLoader=oO;b.TorusBufferGeometry=iX;b.TorusGeometry=iaa;b.TorusKnotBufferGeometry=
jX;b.TorusKnotGeometry=jaa;b.Triangle=au;b.TriangleFanDrawMode=2;b.TriangleStripDrawMode=1;b.TrianglesDrawMode=0;b.TubeBufferGeometry=kX;b.TubeGeometry=kaa;b.UVMapping=300;b.Uint16Attribute=function(u,z){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new K(u,z)};b.Uint16BufferAttribute=K;b.Uint32Attribute=function(u,z){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new T(u,
z)};b.Uint32BufferAttribute=T;b.Uint8Attribute=function(u,z){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new ea(u,z)};b.Uint8BufferAttribute=ea;b.Uint8ClampedAttribute=function(u,z){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Aa(u,z)};b.Uint8ClampedBufferAttribute=Aa;b.Uniform=taa;b.UniformsLib=ag;b.UniformsUtils=X9;b.UnsignedByteType=1009;b.UnsignedInt248Type=
1020;b.UnsignedIntType=1014;b.UnsignedShort4444Type=1017;b.UnsignedShort5551Type=1018;b.UnsignedShort565Type=1019;b.UnsignedShortType=1012;b.VSMShadowMap=3;b.Vector2=Xe;b.Vector3=nc;b.Vector4=Rk;b.VectorKeyframeTrack=vE;b.Vertex=function(u,z,t){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new nc(u,z,t)};b.VertexColors=2;b.VideoTexture=hW;b.WebGL1Renderer=dW;b.WebGLCubeRenderTarget=Pc;b.WebGLMultisampleRenderTarget=y;b.WebGLRenderTarget=v;b.WebGLRenderTargetCube=
function(u,z,t){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new Pc(u,t)};b.WebGLRenderer=YH;b.WebGLUtils=$9;b.WireframeGeometry=lX;b.WireframeHelper=function(u,z){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Vp(new lX(u.geometry),new Ml({color:void 0!==z?z:16777215}))};b.WrapAroundEnding=2402;b.XHRLoader=function(u){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");
return new Zs(u)};b.ZeroCurvatureEnding=2400;b.ZeroFactor=200;b.ZeroSlopeEnding=2401;b.ZeroStencilOp=0;b.sRGBEncoding=3001;Object.defineProperty(b,"__esModule",{value:!0})});return SH}(),Ai=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js");Ai.Canvas=RH;Ai.THREE=jsa;var pp=Ai.THREE;Ai.Scene=pp.Scene;Ai.SpotLight=pp.SpotLight;Ai.MeshBasicMaterial=pp.MeshBasicMaterial;Ai.BackSide=pp.BackSide;Ai.ImageUtils=pp.ImageUtils;Ai.Color=pp.Color;Ai.MeshPhongMaterial=pp.MeshPhongMaterial;Ai.SphereGeometry=
pp.SphereGeometry;Ai.Mesh=pp.Mesh;Ai.DirectionalLight=pp.DirectionalLight;Ai.AmbientLight=pp.AmbientLight;Ai.WebGLRenderer=pp.WebGLRenderer;Ai.PerspectiveCamera=pp.PerspectiveCamera;Ai.TextureLoader=pp.TextureLoader;Ai.BoxGeometry=pp.BoxGeometry;Ai.MeshNormalMaterial=pp.MeshNormalMaterial;Ai.easings=xr;var Maa=function(b){var e=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js"),m=e.hasOwnProperty("WebGLCanvas")&&"function"===typeof e.WebGLCanvas?e.WebGLCanvas:e.WebGLCanvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"context",get:function(){return navigator.webdriver?this._canvas&&this._canvas.getContext("2d"):this._canvas&&this._canvas.getContext(this.contextType,{preserveDrawingBuffer:!0})}},{key:"restoreContent",value:function(a,g){this.renderer&&a&&a!==g&&(this.owner.context.drawImage(this.renderer.getContext().canvas,0,0),this.renderer=new Ai.WebGLRenderer({context:this.context,antialiasing:!0}),this.renderer.setSize(this.width,
this.height))}},{key:"onExtentChanged",value:function(){}},{key:"relayout",value:function(){var a=this;this.renderLoop&&(setTimeout(function(){return a.owner.context.drawImage(a.renderer.getContext().canvas,0,0)}),this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix())}},{key:"stopAnimation",value:function(){this.renderLoop&&(cancelAnimationFrame(this.renderLoop),this.renderer.dispose())}},{key:"renderGlobe",value:function(){var a=
this;this.stopAnimation();this.withContextDo(function(g){var l=a.width,r=a.height,v=new Ai.Scene,y=new Ai.PerspectiveCamera(45,l/r,.01,1E3);y.position.z=1;y.position.x=.4;y.position.y=.25;a.camera=y;v.add(new Ai.AmbientLight(3355443));var A=new Ai.SpotLight(16777215,1,200,Math.PI/2,1);A.position.set(1,1,0);A.castShadow=!0;A.shadow.mapSize.width=1024;A.shadow.mapSize.height=1024;A.shadow.camera.near=10;A.shadow.camera.far=100;A.shadow.bias=.01;v.add(A);var E=function(H,I){var M=new Ai.TextureLoader;
return new Ai.Mesh(new Ai.SphereGeometry(H,I,I),new Ai.MeshPhongMaterial({map:M.load("assets/globe-textures/2_no_clouds_4k.jpg"),bumpMap:M.load("assets/globe-textures/elev_bump_4k.jpg"),bumpScale:.005,shininess:5,specularMap:M.load("assets/globe-textures/water_4k.png"),specular:new Ai.Color("grey")}))}(.5,32);E.rotation.y=5.2;v.add(E);var F=function(H,I){var M=new Ai.TextureLoader;return new Ai.Mesh(new Ai.SphereGeometry(H+.003,I,I),new Ai.MeshPhongMaterial({map:M.load("assets/globe-textures/fair_clouds_4k.png"),
transparent:!0}))}(.5,32);F.rotation.y=5.2;v.add(F);A=function(H,I){var M=new Ai.TextureLoader;return new Ai.Mesh(new Ai.SphereGeometry(H,I,I),new Ai.MeshBasicMaterial({map:M.load("assets/globe-textures//galaxy_starfield.png"),side:Ai.BackSide}))}(90,64);v.add(A);a.renderer=new Ai.WebGLRenderer({context:g,antialias:!0});a.renderer.setSize(l,r);a.limitLoop(function(){if(!document.body.contains(a.renderer.getContext().canvas)){if(a.removeScheduled)return;a.removeScheduled=setTimeout(function(){document.body.contains(a.renderer.getContext().canvas)||
a.stopAnimation()},5E3)}E.rotation.y+=5E-4;F.rotation.y+=5E-4;a.renderer.render(v,y)});a.camera.position.z=1;a.camera.position.x=.4;a.camera.position.y=.25})}},{key:"limitLoop",value:function(a,g){var l=this,r=(new Date).getTime(),v=this,y;return(y=function(A){v.renderLoop=requestAnimationFrame(y);A=(new Date).getTime();var E=A-r,F=1E3/(g||l.fps);E>F&&(r=A-E%F,a(),v.firstFrameRendered=!0)})(0)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WebGLCanvas"}},{key:"properties",get:function(){return{fps:{}}}}],
e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WebGLCanvas",version:"0.1.1-56"}}},{start:407,end:6004})}(Ai.Canvas);Maa=Ai.WebGLCanvas;Ai.default=Maa;var pi=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");pi.Morph=Jl;pi.morph=qa;pi.Icon=Op;pi.touchInputDevice=yr;pi.Rectangle=Le;pi.LinearGradient=An;pi.Color=Hg;
pi.pt=Ii;pi.signal=dm;pi.connect=Zk;pi.arr=eg;pi.obj=Ag;pi.Closure=Qj;var OE=Ba("b5",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=e.hasOwnProperty("Button")&&"function"===typeof e.Button?e.Button:e.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=!0}},{key:"onChange",value:function(a){var g=a.prop;if(this.label)switch(g){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,g){g===this.labelMorph&&"extent"===a.prop&&
this.relayout();return cc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var g=this.padding,l=g.top(),r=g.bottom(),v=g.left(),y=g.right(),A=a.height+l+r,E=a.width+v+y;A>this.height&&(this.height=A);E>this.width&&
(this.width=E);var F=this.innerBounds().insetByRect(g);a.center=F.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,g=this.labelMorph;g.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(g.extent);this.relayout();return this}},{key:"trigger",value:function(){try{pi.signal(this,"fire"),"function"==typeof this.action&&this.action()}catch(g){var a=this.world();a?a.logError(g):console.error(g)}}},{key:"considerPress",value:function(a){return pi.touchInputDevice?
!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed={originalFill:this.fill})}},{key:"onMouseUp",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){pi.touchInputDevice?
(this.draggable=!0,this.pressed=null):cc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){!pi.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(a){pi.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(a.world().prompt("edit button label",{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.label=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=cc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},
{key:"properties",get:function(){return{padding:{isStyleProp:!0,defaultValue:pi.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:pi.pt(100,20)},borderColor:{defaultValue:pi.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new pi.LinearGradient({stops:[{offset:0,color:pi.Color.white},{offset:1,color:pi.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],
set:function(a){this.setProperty("deactivated",a);this.nativeCursor=a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a;this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.fontSize=a)},get:function(){return this.labelMorph.fontSize}},
fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var g=this.labelMorph;g&&g.remove();a.name="label";a.reactsToPointer=
!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));
this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8297})}(pi.Morph));pi.Button=OE;pi.Button=OE;pi.Button=OE;var BI=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),
m=e.hasOwnProperty("RadioButton")&&"function"===typeof e.RadioButton?e.RadioButton:e.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=pi.Color.gray;
this.selected=!1;pi.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(g){return g!==a})}},{key:"morph",set:function(a){var g=this.indicator;this.submorphs.forEach(function(l){l!==g&&l.remove()});a.position=pi.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=JSON.parse(this.valueFunctionString)}catch(g){a=this.valueFunctionString}this.valueFn=pi.Closure.fromSource(a).recreateFunc()}return this.morph?
this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],
defaultValue:!1,set:function(a){var g=this;this.whenRendered().then(function(l){g.master={auto:g.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8306,end:10657})}(pi.Morph);pi.RadioButton=BI;pi.RadioButton=BI;pi.RadioButton=BI;var CI=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=e.hasOwnProperty("RadioButtonGroup")&&"function"===typeof e.RadioButtonGroup?e.RadioButtonGroup:e.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,g){var l=new pi.RadioButton;l.reset();l.morph=a;void 0!=g&&(l.internalValue=g,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(l);return l}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(g){g!==
a&&(g.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var g=this.submorphs.find(function(l){try{return l.value===a}catch(r){return!1}});g?g.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,
defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var g=this;this.removeAllButtons();if(pi.obj.isArray(a)){if(0==a.length)return;a.forEach(function(l){g.addButton(pi.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))})}else{a=[].concat($jscomp.arrayFromIterable(a.entries()));if(0==a.length)return;a.forEach(function(l){var r=$jscomp.makeIterator(l);l=r.next().value;r=r.next().value;g.addButton(pi.morph({name:"label",type:"label",value:l,
reactsToPointer:!1}),r)})}this.submorphs[0].master.whenApplied().then(function(){return g.setSelection(g.submorphs[0])})},value:{derived:!0,after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var g=this.submorphs.find(function(l){try{return l.value===a}catch(r){return!1}});g?g.select():this.setSelection(null)}}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10666,end:13552})}(pi.Morph);pi.RadioButtonGroup=CI;pi.RadioButtonGroup=CI;pi.RadioButtonGroup=CI;var ksa=Object.freeze({__proto__:null,Button:OE,RadioButton:BI,RadioButtonGroup:CI}),Wd=lively.FreezerRuntime.recorderFor("lively.components/list.js");Wd.asItem=uL;Wd.Morph=Jl;Wd.Text=Zt;Wd.StyleSheet=Lv;Wd.Label=$t;Wd.Icon=Op;Wd.morph=qa;Wd.touchInputDevice=yr;Wd.pt=Ii;Wd.LinearGradient=An;Wd.Color=Hg;Wd.Rectangle=Le;Wd.rect=
Cl;Wd.arr=eg;Wd.Path=$h;Wd.string=ti;Wd.signal=dm;Wd.once=fr;Wd.Button=OE;Wd.bowser=Ms;Wd.asItem=uL;Wd.asItem=uL;var gP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("ListItemMorph")&&"function"===typeof e.ListItemMorph?e.ListItemMorph:e.ListItemMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"displayItem",value:function(a,g,l,r,v,y,A){y=void 0===
y?!1:y;var E=a.morph,F=E?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation={value:F,annotation:a.annotation}:"string"===typeof F?this.textString=F:this.value=F;this.tooltip=a.tooltip||this.tooltip||this.textString;this.itemIndex=g;this.position=v;if(A){g=A.fontFamily;v=A.selectionColor;F=A.selectionFontColor;var H=A.nonSelectionFontColor,I=A.borderRadius,M=A.fontSize;A=A.padding;F&&this.selectionFontColor!==F&&(this.selectionFontColor=F);H&&this.nonSelectionFontColor!==H&&
(this.nonSelectionFontColor=H);v&&this.selectionColor!==v&&(this.selectionColor=v);I&&I!=this.borderRadius&&(this.borderRadius=I);M&&this.fontSize!==M&&(this.fontSize=M);g&&this.fontFamily!==g&&(this.fontFamily=g);A&&!this.padding.equals(A)&&(this.padding=A)}a.autoFit&&(E.width=l);this.extent=Wd.pt(E?Math.max(E.width,l):l,r);E?(a=E.getTransform().copy(),this.submorphs=[E],E.setTransform(a),E.position=Wd.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=y}},{key:"onDragStart",value:function(a){var g=
this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!g.multiSelect||!g.multiSelectViaDrag)g.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},{key:"onDrag",value:function(a){var g=this.owner.owner;if(g.multiSelect&&g.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var l=g.selectedIndexes,r=g.itemMorphs;a!==this&&r.includes(a)&&
(this._dragState.sourceIsSelected&&!a.isSelected?(Wd.arr.pushIfNotIncluded(l,a.itemIndex),g.selectedIndexes=l):!this._dragState.sourceIsSelected&&a.isSelected&&(Wd.arr.remove(l,a.itemIndex),g.selectedIndexes=l))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!Wd.touchInputDevice},fill:{derived:!0,get:function(){return Wd.touchInputDevice&&
this.pressed?Wd.Color.gray.withA(.5):this.isSelected?this.selectionColor:Wd.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Wd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Wd.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Wd.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],e,{pathInPackage:function(){return"list.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:900,end:5155})}(Wd.Label);Wd.ListItemMorph=gP;Wd.ListItemMorph=gP;Wd.ListItemMorph=gP;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("ListScroller")&&"function"===typeof e.ListScroller?e.ListScroller:e.ListScroller=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var g=this,l=this.scroll.y;if(Wd.touchInputDevice){var r=this.owner.itemForClick(a);r&&(r.pressed=!0,r.makeDirty(),setTimeout(function(){r.pressed=!1;if(0==l-g.scroll.y)return g.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},fill:{defaultValue:Wd.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5157,end:6096})})(Wd.Morph);Wd.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-1,b.selectedIndex+Math.round(b.height/b.itemHeight)));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-
1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var e=b.selectedIndexes;if(!b.multiSelect||!e.length)return b.execCommand("arrow up");var m=e[0];if("number"!==typeof m)b.selectedIndexes=[m];else{var a=b.indexUp(m);e.includes(m)&&e.includes(a)?b.selectedIndexes=e.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(e.filter(function(g){return g!==
a}))}return!0}},{name:"select down",exec:function(b){var e=b.selectedIndexes;if(!b.multiSelect||!e.length)return b.execCommand("arrow down");var m=e[0],a=b.indexDown(m);e.includes(m)&&e.includes(a)?b.selectedIndexes=e.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(e.filter(function(g){return g!==a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=Wd.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var e,
m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=b.selectedIndex||0,g.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:e,requester:b.getWindow()||b,itemPadding:Wd.Rectangle.inset(0,2),multiSelect:!0}),2);m=g.yieldResult;a=m.selected;a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),b.update());return g.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var e=b.padding,
m=b.itemHeight,a=b.scroll,g=a.x;a=a.y;var l=Wd.pt(0,b.selectedIndex*m);e=b.height-m-e.top()-e.bottom();a=2>Math.abs(l.y-a)?l.y-e:2>Math.abs(l.y-a-.5*e)?l.y:l.y-.5*e;b.scroll=Wd.pt(g,a);return!0}}},{name:"print contents in text window",exec:function(b){var e="items of "+b.name,m=b.items.map(function(a){if("string"===typeof a)return a;var g=a.string,l=a.label;a=a.annotation;var r="";l?r="string"===typeof l?r+l:r+l.map(function(v,y){return 0==y%2?v:""}).join(""):g&&(r+=g);a&&(r+=" ",r="string"===typeof a?
r+a:r+a[0]);return r}).join("\n");return b.world().execCommand("open text window",{title:e,content:m,name:e,fontFamily:"Monaco, monospace"})}}];var PE=Ba("aP",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("List")&&"function"===typeof e.List?e.List:e.List=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=
void 0===a?{}:a;a.bounds||a.extent||(a.extent=Wd.pt(400,360));cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"__additionally_serialize__",value:function(a,g,l,r){var v=this;cc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);this.whenRendered().then(function(){return v.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Wd.touchInputDevice}},{key:"initializeSubmorphs",
value:function(a){this.submorphs=a=a||this.submorphs||[];for(var g=0;g<a.length;g++)switch(a[g].name){case "listItemContainer":var l=a[g];continue;case "scroller":var r=a[g]}r||(r=this.addMorph(new Wd.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",fill:Wd.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(l||r)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",
value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(g){return g.isListItem})||a[0]}},{key:"clickOnItem",value:function(a){var g=this.itemForClick(a);
this[2===a.state.clickCount?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,g)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(a){return this.items.find(function(g){return g===a||g.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(g){return g===a||g.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},
{key:"addItemAt",value:function(a,g){var l=this;g=void 0===g?this.items.length:g;var r=this.items;g=Math.min(r.length,Math.max(0,g));r.splice(g,0,Wd.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,g],undo:{target:this,selector:"removeItem",args:[a]}},function(){return l.update()})}},{key:"removeItem",value:function(a){var g=this;a=this.find(a);var l=this.items,r=l.indexOf(a);-1!==r&&(l.splice(r,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",
args:[a],undo:{target:this,selector:"addItemAt",args:[a,r]}},function(){return g.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",
value:function(){var a=this,g=this.items;g&&this.scroller&&this.dontRecordChangesWhile(function(){var l=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,H=a.fontColor,I=a.padding,M=a.itemPadding,N=a.selectionColor,X=a.selectionFontColor,W=a.nonSelectionFontColor,ea=a.itemBorderRadius,Aa=a.scrollBar,Ka=a.scroller,K=a.scrollable,aa=Ka.scroll.y;I=I||Wd.Rectangle.inset(0);var T=I.top(),U=I.left(),pa=I.bottom();I=I.right();var fa=Math.max(0,
Math.floor(aa/l)),oa=Math.min(g.length,fa+A/l+2);A=0;I=a.width-(U+I);r=Wd.arr.sortBy(r,function(Ma){return Ma.itemIndex});var hb=$jscomp.makeIterator(Wd.arr.partition(r,function(Ma){return Ma.itemIndex<fa}));r=hb.next().value;var Cb=hb.next().value;Cb=$jscomp.makeIterator(Wd.arr.partition(Cb,function(Ma){return Ma.itemIndex>oa-1}));hb=Cb.next().value;Cb=Cb.next().value;r=[].concat($jscomp.arrayFromIterable(hb),$jscomp.arrayFromIterable(Cb),$jscomp.arrayFromIterable(r));for(hb=0;hb<oa-fa;hb++){Cb=
fa+hb;var va=g[Cb];if(!va){r.slice(hb).forEach(function(Ma){Ma.remove()});break}var ma={fontSize:E,fontFamily:F,fontColor:W||H,padding:M,borderRadius:ea||0,selectionFontColor:X,nonSelectionFontColor:W,selectionColor:N},ua=r[hb];ua||(ua=r[hb]=v.addMorph(new Wd.ListItemMorph(ma)));ua.reactsToPointer=!K;ua.displayItem(va,Cb,I,l,Wd.pt(0,l*Cb),y.includes(Cb),ma);A=Math.max(A,ua.width)}r.slice(oa-fa).forEach(function(Ma){return Ma.remove()});l=Math.max(T+pa+l*g.length,a.height);v.setBounds(Wd.pt(U,T).subXY(0,
aa).extent(Wd.pt(a.width,l)));Ka.extent=a.extent;Aa.left=A-1;Ka.position=Wd.pt(0,0);Aa.extent=Wd.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var g=this.itemHeight,l=this.itemScroll;a=new Wd.Rectangle(0,a*g,this.width,g);g=this.innerBounds().insetByRect(this.padding).translatedBy(l);var r=0;a.bottom()>g.bottom()&&(r=a.bottom()-g.bottom());a.top()<g.top()&&(r=a.top()-g.top());
this.itemScroll=l.addXY(0,r);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,g){}},{key:"onItemMorphClicked",value:function(a,g){var l=g.itemIndex;g=this.selectedIndexes;var r=g.includes(l),v=[];if(this.multiSelect)if(a.isShiftDown())if(r)v=g.filter(function(A){return A!=l});else{a=g[0];var y="number"===typeof a?Wd.arr.range(l,a):[l];v=y.concat(g.filter(function(A){return!y.includes(A)}))}else v=this.multiSelectWithSimpleClick||a.isCommandKey()?r?g.filter(function(A){return A!=l}):
[l].concat(g.filter(function(A){return A!=l})):[l];else v=[l];this.selectedIndexes=v}},{key:"onItemMorphDragged",value:function(a,g){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){Wd.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",
command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},{key:"commands",get:function(){return Wd.listCommands}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Wd.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Wd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Wd.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Wd.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:Wd.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},
itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Wd.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",a);this.invalidateCache()}},
fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Wd.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Wd.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",
a.map(Wd.asItem));this.update();this.attributeConnections&&Wd.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],
get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var g=this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(l){return 0<=l&&l<g}));this.update();Wd.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(a){this.selections=[a]}},
selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]&&a.items[g].value})},set:function(a){var g=this;this.selectedIndexes=a.map(function(l){return g.findIndex(l)})}},selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],readOnly:!0,
get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},
itemHeight:{after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a},get:function(){var a=this.getProperty("itemHeight");if(a)return a;a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var g=this.itemPadding;g&&(a+=g.top()+g.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);
this.addStyleClass(a);this.setProperty("theme",a)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10493,end:26915})}(Wd.Morph));Wd.List=PE;Wd.List=PE;Wd.List=PE;Wd.connect=Zk;var DI=Ba("aQ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("FilterableList")&&
"function"===typeof e.FilterableList?e.FilterableList:e.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=Wd.pt(400,360));cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Wd.connect(this.inputMorph,"inputChanged",this,"updateFilter");
Wd.connect(this.listMorph,"selection",this,"selectionChanged");Wd.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Wd.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var a=this,g=this.attributeConnections;if(g){var l=["accepted","canceled","remove"];g.filter(function(r){return l.includes(r.sourceAttrName)&&r.targetObj!==a}).forEach(function(r){return r.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",
value:function(){var a=this.listMorph,g=this.inputMorph,l=this.paddingMorph,r=this.borderWidth;g.topLeft=Wd.pt(r,r);g.width=a.width=this.width-2*r;l&&(l.topLeft=g.bottomLeft);a.position=l?l.bottomLeft:g.bottomLeft;a.height=this.height-a.top-r}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(a){Wd.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=
this.get("input").textString,g=Array.from(a).reduce(function(r,v){if("\\"===v&&!r.escaped)return r.escaped=!0,r;" "!==v||r.escaped?(r.spaceSeen=!1,r.current+=v):(!r.spaceSeen&&r.current&&(r.tokens.push(r.current),r.current=""),r.spaceSeen=!0);r.escaped=!1;return r},{tokens:[],current:"",escaped:!1,spaceSeen:!1});g.current&&g.tokens.push(g.current);var l=g.tokens.map(function(r){return r.toLowerCase()});return{tokens:g.tokens,lowercasedTokens:l,input:a}}},{key:"updateFilter",value:function(){var a=
this,g=this.parseInput(),l=this.filterFunction,r=this.sortFunction,v=this.items.filter(function(E){return l.call(a,g,E)});r&&(v=Wd.arr.sortBy(v,function(E){return r.call(a,g,E)}));var y=this.listMorph,A=this.updateSelectionsAfterFilter?y.selectedIndexes.map(function(E){return v.indexOf(y.items[E])}).filter(function(E){return-1!==E}):y.selectedIndexes;y.items=v;y.selectedIndexes=A.length?A:v.length?[0]:[];this.scrollSelectionIntoView();Wd.signal(this,"filterChanged",{parsedInput:g,items:y.items})}},
{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};Wd.signal(this,"accepted",a);return a}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},
{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(Wd.arr.range(0,8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",args:{actionNo:a}}}}))).concat(cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return cc._get(Object.getPrototypeOf(m.prototype),
"commands",this).concat([{name:"accept input",exec:function(g){a.acceptInput();return!0}},{name:"cancel",exec:function(g){Wd.signal(g,"canceled");return!0}},{name:"choose action and accept input",exec:function(g,l){l=void 0===l?{}:l;g.selectedAction=(g.actions||[])[void 0===l.actionNo?0:l.actionNo];return g.execCommand("accept input")}},{name:"choose action",exec:function(g){var l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(!g.actions)return y.return(!0);l=Object.assign({},
g.style,{extent:g.extent});r=new Wd.FilterableList(l);r.openInWorld(g.globalPosition);r.items=g.actions;v=g.actions.indexOf(g.selectedAction);-1===v&&(v=0);r.selectedIndex=v;Wd.connect(r,"accepted",g,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return A.selected[0]}});Wd.connect(r,"canceled",g,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});r.focus();
return y.return(!0)})}}].concat($jscomp.arrayFromIterable(Wd.listCommands.map(function(g){return Object.assign({},g,{exec:function(l,r,v){return g.exec(a.listMorph,r,v)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:Wd.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);
this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[Wd.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new Wd.morph({name:"padding",fill:Wd.Color.transparent}),new Wd.List({name:"list",items:[],clipMode:"auto"})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,
after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,
derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=a}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,
after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},
set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(Wd.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},
set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,
after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;
"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(g,l){var r=String(Wd.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;g.lowercasedTokens.forEach(function(y){r.startsWith(y)?
v-=10:r.includes(y)&&(v-=5)});return Wd.arr.sum(g.lowercasedTokens.map(function(y){return Wd.string.levenshtein(r.toLowerCase(),y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(g.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;var v=String(Wd.Path(r).get(l)).toLowerCase();return 3>=Wd.arr.sum(g.lowercasedTokens.map(function(y){return Wd.string.levenshtein(v,
y)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27028,end:41367})}(Wd.Morph));Wd.FilterableList=DI;Wd.FilterableList=DI;Wd.FilterableList=DI;var EI=Ba("bu",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("DropDownList")&&"function"===typeof e.DropDownList?e.DropDownList:e.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a);Wd.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var g=this;setTimeout(function(){var l=g.listMorph,r=g.world()&&g.world().focusedMorph;if(l!==r&&r!==g&&l.world()&&!l.withAllSubmorphsDetect(function(v){return v==r}))l.fadeOut(200);else Wd.once(Wd.touchInputDevice?l.scroller:l,
"onBlur",g,"removeWhenFocusLost")},100)}},{key:"toggleList",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){g=a.listMorph;if(a.isListVisible())return Wd.signal(a,"deactivated"),a.selection=g.selection,g.epiMorph=!1,g.remove(),v.jumpTo(0);Wd.signal(a,"activated");a.openListInWorld?(g.openInWorld(),g.epiMorph=!0,g.hasFixedPosition=!0,g.setTransform(a.getGlobalTransform()),l=a.globalBounds()):(l=a.innerBounds(),a.addMorph(g));r=g.items.length*
g.itemHeight+g.padding.top()+g.padding.bottom();g.extent=Wd.pt(a.width,Math.min(a.listHeight,r));"top"===a.listAlign?g.bottomLeft=l.topLeft():g.topLeft=l.bottomLeft();Wd.once(g,"onItemMorphClicked",a,"toggleList");Wd.once(Wd.touchInputDevice?g.scroller:g,"onBlur",a,"removeWhenFocusLost");return v.yield(g.whenRendered(),3)}if(4!=v.nextAddress)return v.yield(g.whenRendered(),4);Wd.touchInputDevice?g.scroller.focus():g.focus();g.scrollSelectionIntoView();v.jumpToEnd()})}},{key:"commands",get:function(){var a=
this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(cc._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},
{key:"properties",get:function(){return{padding:{defaultValue:Wd.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new Wd.List({name:"dropDownList"});this.setProperty("listMorph",a);return a}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){this.listMorph.items=
a}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var g=this.listAlign,l=this.listMorph;if(a){var r=l.items,v=l.find(a);v||"string"!==typeof a||(v=r.find(function(A){return A.string===a}));if(!v)return;var y=v.label||[v.string,null];y=[].concat($jscomp.arrayFromIterable(y),[" ",null],$jscomp.arrayFromIterable(Wd.Icon.textAttribute("caret-"+("bottom"===g?"down":"up"))));y[5]&&(y[5].paddingRight="0px",y[5].textStyleClasses=["fa","annotation"]);
this.label=y;this.relayout();l.selectedIndex=r.indexOf(v)}else l.selection=null,this.label="";Wd.signal(this,"selection",l.selection)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41377,end:45973})}(Wd.Button));Wd.DropDownList=EI;Wd.DropDownList=EI;Wd.DropDownList=EI;var hP=function(b){var e=
lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("InteractiveItem")&&"function"===typeof e.InteractiveItem?e.InteractiveItem:e.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress){if(!g.item.isPreview)return r.jumpTo(0);l=a.hand.grabbedMorphs[0];cc._get(Object.getPrototypeOf(m.prototype),"onDrop",g).call(g,a);return r.yield(g.list.whenRendered(),3)}g.list.addItemAt({morph:l,isListItem:!0},g.itemIndex);g.list.clearPreviews();r.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){Wd.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){Wd.touchInputDevice&&
500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(a,g,l,r,v,y,A){y=void 0===y?!1:y;cc._get(Object.getPrototypeOf(m.prototype),"displayItem",this).call(this,a,g,l,r,v,y,A);a.morph&&(a.morph.selected=y)}},{key:"onGrab",value:function(a){var g=this.list,l=a.halo&&a.halo.target===this;l&&a.halo.detachFromTarget();var r=this.submorphs.length?this.submorphs[0]:Wd.morph({type:"label",value:this.value});a.hand.grab(r);r.position=a.hand.localize(this.globalPosition);l&&a.halo.refocus(r);
g.removeItem(this.list.items[this.itemIndex]);g.itemMorphs.forEach(function(v){return v.remove()});g.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:Wd.touchInputDevice?!1:!0},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],e,{pathInPackage:function(){return"list.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:45982,end:48256})}(Wd.ListItemMorph);Wd.InteractiveItem=hP;Wd.InteractiveItem=hP;Wd.InteractiveItem=hP;var iP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("MorphList")&&"function"===typeof e.MorphList?e.MorphList:e.MorphList=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"onLoad",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(a,g){a=a.itemIndex;this.items[a].isPreview&&g||(this.clearPreviews(),g&&this.addItemAt({isListItem:!0,isPreview:!0,morph:Wd.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,
height:this.itemHeight,fill:Wd.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=this;this.items.filter(function(g){return g.morph&&g.morph.owner&&!Wd.Path("morph.owner.isListItem").get(g)}).map(function(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(a.removeItem(g))})});this.items.filter(function(g){return g.isPreview}).map(function(g){return a.removeItem(g)})}},{key:"update",value:function(){var a=this,g=this.items;g&&this.listItemContainer&&
(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,H=a.fontColor,I=a.padding,M=a.itemPadding,N=a.selectionColor,X=a.selectionFontColor,W=a.nonSelectionFontColor,ea=a.itemBorderRadius,Aa=a.scrollBar,Ka=a.scroll.y;I=I||Wd.Rectangle.inset(0);var K=I.top(),aa=I.left(),T=I.bottom();I=I.right();var U=Math.max(0,Math.floor(Ka/l)),pa=Math.min(g.length,Math.ceil((Ka+
A)/l));A=0;Ka=a.width-(aa+I);r=Wd.arr.sortBy(r,function(hb){return hb.itemIndex});var fa=$jscomp.makeIterator(Wd.arr.partition(r,function(hb){return hb.itemIndex<U}));r=fa.next().value;var oa=fa.next().value;oa=$jscomp.makeIterator(Wd.arr.partition(oa,function(hb){return hb.itemIndex>pa}));fa=oa.next().value;oa=oa.next().value;r=[].concat($jscomp.arrayFromIterable(fa),$jscomp.arrayFromIterable(oa),$jscomp.arrayFromIterable(r));E={fontSize:E,fontFamily:F,fontColor:W||H,padding:M,borderRadius:ea||0,
selectionFontColor:X,nonSelectionFontColor:W,selectionColor:N};r.length&&pa-U>r.length&&(U!=r[0].itemIndex?Wd.arr.pushAt(r,v.addMorph(new Wd.InteractiveItem(E)),0):pa!=Wd.arr.last(r).itemIndex&&r.push(v.addMorph(new Wd.InteractiveItem(E))));for(F=0;F<pa-U;F++){H=U+F;M=g[H];if(!M){r.slice(F).forEach(function(hb){return hb.remove()});break}N=r[F];N||(N=r[F]=v.addMorph(new Wd.InteractiveItem(E)),N.clipMode="visible");N.displayItem(M,H,Ka,l,Wd.pt(0,l*H),y.includes(H),E);A=Math.max(A,N.width)}l=Math.max(K+
T+l*g.length,a.height);y=Wd.pt(a.width,l).subPt(Wd.pt(aa+I,0));v.setBounds(Wd.pt(aa,K).extent(y));Aa.left=A-10;Aa.fill=null;Aa.top=0;Aa.extent=Wd.pt(1,l)}))}},{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return Wd.touchInputDevice}},
items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Wd.asItem));this.itemMorphs.forEach(function(g){return g.remove()});this.update();this.attributeConnections&&Wd.signal(this,"values",this.values)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:48265,end:53492})}(Wd.List);Wd.MorphList=iP;Wd.MorphList=iP;Wd.MorphList=iP;var lsa=Object.freeze({__proto__:null,asItem:uL,ListItemMorph:gP,List:PE,FilterableList:DI,DropDownList:EI,InteractiveItem:hP,MorphList:iP}),hh=lively.FreezerRuntime.recorderFor("lively.components/menus.js");hh.Label=$t;hh.config=Cn;hh.Morph=Jl;hh.obj=Ag;hh.promise=ph;hh.fun=Jn;hh.pt=Ii;hh.Color=Hg;hh.Rectangle=Le;var jP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=e.hasOwnProperty("MenuDivider")&&
"function"===typeof e.MenuDivider?e.MenuDivider:e.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:hh.Color.gray.lighter()},extent:{defaultValue:hh.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"menus.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(hh.Morph);hh.MenuDivider=jP;hh.MenuDivider=jP;hh.MenuDivider=jP;var kP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=e.hasOwnProperty("MenuItem")&&"function"===typeof e.MenuItem?e.MenuItem:e.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"onHoverIn",value:function(a){var g=this;this.owner.itemMorphs.forEach(function(l){return l!==g&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var g=this,l=a.hand;setTimeout(function(){(g.owner?g.owner.submenus:[]).some(function(r){return r.fullContainsWorldPoint(l.globalPosition)})||(g.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},
{key:"onMouseDown",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(g.submenu)return v.return();v.setCatchFinallyBlocks(2);g.owner.startFinish();if("function"!==typeof g.action)throw Error("Menu item "+g.textString+" has no executable action!");return v.yield(g.action(),4)}if(2!=v.nextAddress)return g.owner.completeFinish(),v.leaveTryBlock(0);l=v.enterCatchBlock();(r=g.world())?r.logError(l):console.error(l);v.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:hh.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==a&&(this.addValueChange("selected",a),a?(this.fontColor=hh.Color.white,this.fill=
hh.Color.rgb(21,101,192)):(this.fill=hh.Color.transparent,this.fontColor=hh.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,g){return 0===g%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation={value:this.value,annotation:a}}},action:{},submenu:{}}}}],
e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(hh.Label);hh.MenuItem=kP;hh.MenuItem=kP;hh.MenuItem=kP;hh.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var lP=Ba("aR",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
m=e.hasOwnProperty("Menu")&&"function"===typeof e.Menu?e.Menu:e.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},{key:"whenFinished",value:function(){return this.finishedPromise.promise}},
{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();cc._get(Object.getPrototypeOf(m.prototype),"remove",a).call(a);g.jumpToEnd()})}},{key:"ensureItem",
value:function(a){if(!a)return hh.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return hh.obj.select(a,["string","action","annotation"]);if(Array.isArray(a)){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;return"string"===typeof l||Array.isArray(l)?g&&"function"!==typeof g?"object"===typeof g&&g.getItems?{label:l,submenu:g.getItems,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:
Array.isArray(g)?{label:l,submenu:g,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:hh.invalidItem:{label:l,action:g||function(){return $world.setStatusMessage(l)}}:hh.invalidItem}if(a.command){var r=a.command,v=a.showKeyShortcuts,y=a.target;g=a.alias;var A=a.args;if(!r||!y)return hh.invalidItem;void 0===v&&(v=!0);a=v?"string"===typeof v?v:y.keysForCommand(r):null;return{string:g||r,annotation:a?["\t"+a,{fontSize:"70%"}]:["",{}],action:function(){return y.execCommand(r,A)}}}return hh.invalidItem}},
{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var g=this.padding.left(),l=this.padding.right(),r=this.padding.top(),v=this.padding.bottom(),y=0,A=hh.pt(g,r),E={};this.fontFamily&&(E.fontFamily=this.fontFamily);this.fontSize&&(E.fontSize=this.fontSize);this.itemPadding&&(E.padding=this.itemPadding);this.title&&(r=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:A,fontWeight:"bold"},E)),A=r.bottomLeft,y=Math.max(r.width,y));this.items.forEach(function(F){var H=
F.label,I=F.string,M=F.annotation,N=F.action,X=F.submenu;F=a.addMorph(F.isDivider?new hh.MenuDivider({position:A}):new hh.MenuItem(Object.assign({label:H||I,annotation:M,action:N,submenu:X,position:A},E)));A=F.bottomLeft;y=Math.max(F.width,y)});this.submorphs.forEach(function(F){F.isLabel&&(F.fit(),F.autofit=!1,F.fixedWidth=!0,F.fixedHeight=!0);F.width=y});this.extent=hh.pt(y+l+g,A.y+v)}},{key:"openSubMenuDelayed",value:function(a,g,l){var r=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);
this.openingSubMenuProcess=setTimeout(function(){try{r.openSubMenu(a,g,l)}catch(y){var v=r.world();v?v.logError(y):console.error(y)}},200)}},{key:"openSubMenu",value:function(a,g,l){if(g.selected){var r=this.submenu;if(r){if(r.ownerItemMorph===g||this.morphsContainingPoint(a.position).includes(r))return;this.removeSubMenu()}"function"===typeof l&&(l=l());a=this.submenu=this.addMorph(new hh.Menu({items:l,ownerItemMorph:g,ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",
value:function(){var a=this;hh.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var g=a.world();if(g){var l=a.submenu,r=a.selectedItemMorph;g=g&&l&&l.fullContainsWorldPoint(g.firstHand.position);l&&l.ownerItemMorph!==r&&!l.ownerItemMorph.selected&&(g?(r&&(r.selected=!1),l.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},{key:"moveBoundsForVisibility",
value:function(a,g){var l=0,r=0;a.right()>g.right()&&(l=-1*(a.right()-g.right()));var v=a.left()+l;0>v&&(l+=-v);a.bottom()>g.bottom()&&(r=-1*(a.bottom()-g.bottom()),l+=1);g=a.top()+r;0>g&&(r+=-g);return a.translatedBy(hh.pt(l,r))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,g,l,r){r||(r=g.right()+a.width>l.right()?"left":"right");a=a.extent();a="left"===r?g.topLeft().addXY(-a.x,0).extent(a):g.topRight().extent(a);a.bottom()>l.bottom()&&(g=-1*(a.bottom()-l.bottom()),a=a.translatedBy(hh.pt(0,
g)));a.top()<l.top()&&(l=l.top()-a.top(),a=a.translatedBy(hh.pt(0,l)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,g=this.world().visibleBounds(),l=a.getGlobalTransform().inverse().transformRectToRect(g);a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),l),g);this.setBounds(a)}},{key:"clipForVisibility",value:function(a,g){a=void 0===a?this.bounds():a;g=void 0===g?this.world().visibleBounds():
g;var l=this.transformRectToMorph(this.world(),a.withX(0).withY(0));g.containsRect(l.insetBy(10))||(a=a.withExtent(hh.pt(5+a.width,Math.min(l.height,g.height))));return a}},{key:"offsetForWorld",value:function(a){a=this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var g=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,g),g)}this.setBounds(a)}},{key:"onHoverOut",value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Menu"}},{key:"forItems",value:function(a,g){g=void 0===g?{title:""}:g;return new this(Object.assign({},g,{items:a}))}},{key:"openAt",value:function(a,g,l){l=void 0===l?{title:""}:l;g=this.forItems(g,l).openInWorldNear(a);g.offsetForWorld(a);return g}},{key:"openAtHand",value:function(a,g){g=void 0===g?{title:""}:g;var l=g.hand;a=this.forItems(a,hh.obj.dissoc(g,["hand"]));l=l?l.position:hh.pt(0,0);a.titleMorph&&(l=l.addXY(0,-a.titleMorph.height));a.openInWorld(l);a.offsetForWorld(l);
return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(hh.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:hh.Rectangle.inset(0,2)},itemPadding:{defaultValue:hh.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},fill:{defaultValue:hh.Color.white},borderColor:{defaultValue:hh.Color.gray.lighter()},
borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",a)}},finishedPromise:{initialize:function(){this.finishedPromise=hh.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},
ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],e,{pathInPackage:function(){return"menus.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16023})}(hh.Morph));hh.Menu=lP;hh.Menu=lP;hh.Menu=lP;var msa=Object.freeze({__proto__:null,MenuDivider:jP,MenuItem:kP,Menu:lP}),Tk=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");Tk.arr=eg;Tk.pt=Ii;Tk.Color=Hg;Tk.Morph=Jl;var mP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),
m=e.hasOwnProperty("VerticalResizer")&&"function"===typeof e.VerticalResizer?e.VerticalResizer:e.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.x-this.extent.x;if(!(0>
g)){var l=this.getRelativeDivide();this.movedHorizontallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.left();g=this.owner.extent.x-g.width;return 0>g?NaN:a/g}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingRight).forEach(function(g){var l=g.position;g.position=Tk.pt(l.x+a,l.y)}),this.scalingLeft.forEach(function(g){var l=g.extent;g.extent=Tk.pt(l.x+a,l.y)}),this.scalingRight.forEach(function(g){var l=g.extent;
g.extent=Tk.pt(l.x-a,l.y)}),this.position=this.position.addPt(Tk.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingLeft.every(function(l){return l.extent.x+a>=g.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-a>=g.minWidth})}},{key:"addFixed",value:function(a){Tk.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){Tk.arr.pushIfNotIncluded(this.scalingLeft,a)}},{key:"addScalingRight",value:function(a){Tk.arr.pushIfNotIncluded(this.scalingRight,
a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Tk.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(Tk.Morph);Tk.VerticalResizer=mP;Tk.VerticalResizer=mP;Tk.VerticalResizer=mP;var nP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),m=e.hasOwnProperty("HorizontalResizer")&&"function"===typeof e.HorizontalResizer?e.HorizontalResizer:e.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return cc(m,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.y-this.extent.y;if(!(0>g)){var l=this.getRelativeDivide();this.movedVerticallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.top();g=this.owner.extent.y-g.height;return 0>g?NaN:a/g}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&
(this.fixed.concat(this.scalingBelow).forEach(function(g){var l=g.position;g.position=Tk.pt(l.x,l.y+a)}),this.scalingAbove.forEach(function(g){var l=g.extent;g.extent=Tk.pt(l.x,l.y+a)}),this.scalingBelow.forEach(function(g){var l=g.extent;g.extent=Tk.pt(l.x,l.y-a)}),this.position=this.position.addPt(Tk.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingAbove.every(function(l){return l.extent.y+a>=g.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-a>=
g.minHeight})}},{key:"addFixed",value:function(a){Tk.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){Tk.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){Tk.arr.pushIfNotIncluded(this.scalingBelow,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Tk.Color.gray.lighter()},nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},
scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(Tk.Morph);Tk.HorizontalResizer=nP;Tk.HorizontalResizer=nP;Tk.HorizontalResizer=nP;var nsa=Object.freeze({__proto__:null,
VerticalResizer:mP,HorizontalResizer:nP}),Eg=lively.FreezerRuntime.recorderFor("lively.components/tree.js");Eg.arr=eg;Eg.fun=Jn;Eg.obj=Ag;Eg.tree=vu;Eg.string=ti;Eg.promise=ph;Eg.pt=Ii;Eg.Rectangle=Le;Eg.Color=Hg;Eg.Morph=Jl;Eg.Text=Zt;Eg.config=Cn;Eg.touchInputDevice=yr;Eg.Label=$t;Eg.connect=Zk;Eg.signal=dm;Eg.bowser=Ms;var oP=Ba("bt",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),m=e.hasOwnProperty("Tree")&&"function"===typeof e.Tree?e.Tree:e.Tree=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onChange",
this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var g=this.textLayout.charBoundsOfRow(this,a);a=Eg.Rectangle.fromLiteral(Eg.arr.first(g)).topLeft();
g=Eg.Rectangle.fromLiteral(Eg.arr.last(g)).bottomRight();return Eg.Rectangle.fromAny(a,g)}},{key:"recoverOriginalLine",value:function(a){for(var g=this.document.getTextAndAttributesOfLine(a),l=0;l<g.length;l++){var r=this._originalColor[l];r&&!Eg.obj.isString(g[l])&&(g[l]?g[l].fontColor=r:g[l]={fontColor:r})}this.document.setTextAndAttributesOfLine(a,g)}},{key:"renderSelectedLine",value:function(a){var g=this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(g.length);for(var l=0;l<
g.length;l++)0===l%2?g[l]&&g[l].isMorph&&(this._originalColor[l]=g[l]?g[l].fontColor||this.nonSelectionFontColor:null,g[l].fontColor=this.selectionFontColor,g[l].isSelected=!0):(this._originalColor[l]=(g[l]?g[l].fontColor:null)||this.nonSelectionFontColor,g[l]?g[l].fontColor=this.selectionFontColor:g[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,g);this.selectLine(a,!0);this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];
for(var g=Eg.arr.genN(8*(a.length-1),function(){return null}),l=1,r,v,y=this.disableIndent?0:1.3*this.fontSize;l<a.length;l++){r=8*(l-1);v=this.selectedIndex==l;a[l].node.isSelected=v;g[r]=" ";g[r+1]={fontSize:y,fontColor:Eg.Color.transparent,textStyleClasses:["fas"],paddingRight:y*(a[l].depth-1)+"px"};g[r+3]={fontColor:Eg.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[l].node)?g[r+2]=this.disableIndent?"":"    ":
(g[r+2]=this.treeData.isCollapsed(a[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(g[r+3],{paddingRight:this.treeData.isCollapsed(a[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var A=this.treeData.safeDisplay(a[l].node);A.isMorph&&(A._capturedProps&&Object.assign(A,A._capturedProps),v&&(A._capturedProps=Eg.obj.select(A,["fontColor"])),A.fontColor=this.nonSelectionFontColor);g[r+4]=A;Eg.arr.isArray(A)?g[r+5]=[]:g[r+5]={fontColor:this.fontColor};
g[r+6]="\n";g[r+7]={}}g.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?Eg.arr.flatten(g):[]}},{key:"update",value:function(a){var g=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var l=g.treeData.asListWithIndexAndDepth();g.treeData!==g.lastTreeData||g.lastNumberOfNodes!==l.length||a?(g.replace({start:{row:0,column:0},end:g.documentEndPosition},g.computeTreeAttributes(l),!1,!1),
g.invalidateTextLayout(!0,!1),g.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){g.makeDirty();r.jumpToEnd()})})):g._lastSelectedIndex&&g.recoverOriginalLine(g._lastSelectedIndex-1);g.lastTreeData=g.treeData;g.lastNumberOfNodes=l.length;g.cursorPosition={row:0,column:0};0<g.selectedIndex&&g.renderSelectedLine(g.selectedIndex-1)})}finally{this._updating=!1}}}},{key:"buildViewState",value:function(a){var g=this;"function"!==typeof a&&(a=function(v){return v});
var l=this.selectedNode?a(this.selectedNode):null,r=new Map;Eg.tree.prewalk(this.treeData.root,function(v){return r.set(a(v),g.treeData.isCollapsed(v))},function(v){return g.treeData.getChildrenIfUncollapsed(v)});return{selectionId:l,collapsedMap:r,scroll:this.scroll}}},{key:"applyViewState",value:function(a,g){var l=this,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:"function"!==typeof g&&(g=function(N){return N}),r=a,v=r.selectionId,
y=r.collapsedMap,A=r.scroll,E=0,F=-1;case 2:H=l.nodes;if(E>=H.length){M.jumpTo(3);break}I=g(H[E]);v===I&&(F=E);if(!y.has(I)||y.get(I)){M.jumpTo(4);break}return M.yield(l.treeData.collapse(H[E],!1),4);case 4:E++;M.jumpTo(2);break;case 3:return l.selectedIndex=F,l.update(),l.scroll=A,l.scrollSelectionIntoView(),M.yield(Eg.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,g){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(r=l.buildViewState(g),
v.yield(a(),2)):v.yield(l.applyViewState(r,g),0)})}},{key:"onNodeCollapseChanged",value:function(a){var g=a.node,l=a.isCollapsed,r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r.resetCache(),y.setCatchFinallyBlocks(2),y.yield(r.treeData.collapse(g,l),4);if(2!=y.nextAddress)return Eg.signal(r,"nodeCollapseChanged",{node:g,isCollapsed:l}),r.update(),y.leaveTryBlock(0);v=y.enterCatchBlock();r.showError(v);y.jumpToEnd()})}},{key:"uncollapse",value:function(a){a=
void 0===a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?a&&g.treeData.isCollapsed(a)?l.yield(g.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):l.return():l.return(a)})}},{key:"collapse",value:function(a){a=void 0===a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!a||g.treeData.isCollapsed(a)?l.return():l.yield(g.onNodeCollapseChanged({node:a,isCollapsed:!0}),
2):l.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=g,r.yield(g.treeData.followPath(a),2)):r.return(l.selectedNode=r.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&this.scrollIndexIntoView(this.selectedIndex)}},
{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-1,column:0})}},{key:"contextMenuForNode",value:function(a,g){Eg.signal(this,"contextMenuRequested",{node:a,evt:g})}},{key:"onKeyDown",value:function(a){var g=this.world().focusedMorph;if(!g.isText||g.readOnly)return cc._get(Object.getPrototypeOf(m.prototype),
"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);var g=this.textAttributeAtPoint(a.positionIn(this))||{},l=g.onDragStart,r=g.onDrag;g=g.onDragEnd;r&&(this._onDragHandler=r);g&&(this._onDragEndHandler=g);l&&l(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):cc._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a)}},{key:"onDragEnd",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),
"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var g=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return l=g.textPositionFromPoint(a.positionIn(g)),r=l.row,v=l.column,y=g.nodes[r+1],y?!g.treeData.isLeaf(y)&&4>v?F.yield(y.isCollapsed,3):(g.selectedIndex!=r+1&&(g.selectedIndex=r+1),F.jumpTo(2)):F.return();2!=F.nextAddress&&
(F.yieldResult?g.uncollapse(y):g.collapse(y));A=g.textAttributeAt({row:r,column:v})||{};(E=A.onMouseDown)&&E(a);F.jumpToEnd()})}},{key:"onMouseUp",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);var g=(this.textAttributeAtPoint(a.positionIn(this))||{}).onMouseUp;g&&g(a)}},{key:"onHoverIn",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onHoverIn",this).call(this,a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),
"onHoverOut",this).call(this,a);!Eg.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var g=this.textPositionFromPoint(a.positionIn(this));(g=this.nodes[g.row+1])&&this.contextMenuForNode(g,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},
{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},
{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return Eg.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(g){g=$jscomp.makeIterator(g);var l=g.next().value;g.next();return l.renderedNode&&l.renderedNode.highlight()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",
defaultValue:Eg.Color.rgb(21,101,192)},fontFamily:{defaultValue:Eg.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:Eg.Rectangle.inset(3)},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},
defaultViewState:{get:function(){return Object.assign({},cc._get(Object.getPrototypeOf(m),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:Eg.Color.white,set:function(a){this.setProperty("selectionFontColor",
a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Eg.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(Eg.Text));Eg.Tree=oP;Eg.Tree=oP;Eg.Tree=oP;var pP=Ba("br",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),m=e.hasOwnProperty("TreeData")&&"function"===typeof e.TreeData?e.TreeData:e.TreeData=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");}},{key:"collapse",value:function(a,g){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");
}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(g){return"[TreeData] Error when trying to display node: "+g}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(g,l){return 0===l%2?g:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var g=this;return this.parentMap.get(a)||Eg.tree.detect(this.root,
function(l){return!g.isLeaf(l)&&g.getChildrenIfUncollapsed(l).includes(a)},function(l){return g.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},{key:"asListWithIndexAndDepth",value:function(a){var g=this;a=void 0===a?!1:a;var l=[];Eg.tree.prewalk(this.root,function(r,v,y){return l.push({node:r,depth:y,i:v})},
function(r){return g.getChildrenIfUncollapsed(r)});return a?Eg.arr.filter(l,a):l}},{key:"pathOf",value:function(a){for(var g=[];a;)g.unshift(a),a=this.parentNode(a);return g}},{key:"followPath",value:function(a,g,l){l=void 0===l?this.root:l;var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:g||(g=function(H,I){return H===I});v=a.findIndex(function(H){return g(H,l)});a=a.slice(v+1);if(!a.length)return F.return(null);y=l;case 2:if(!a.length){F.jumpTo(3);
break}if(!r.isCollapsed(y)){F.jumpTo(4);break}return F.yield(r.collapse(y,!1),4);case 4:A=a.shift();E=r.getChildrenIfUncollapsed(y).find(function(H){return g(A,H)});if(!E)throw Error("Cannot descend into tree, next node of "+a.join(".")+" not found at "+r.safeDisplay(y));y=E;F.jumpTo(2);break;case 3:return F.return(y)}})}},{key:"diff",value:function(a){var g=[],l=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(l.length!=a.length)return[];l=$jscomp.makeIterator(Eg.arr.zip(l,a));for(a=
l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Eg.obj.equals(a.node.value,r&&r.node.value)||g.push([a.node,r.node])}return g}},{key:"patch",value:function(a){var g=this.diff(a);if(0<g.length){a=$jscomp.makeIterator(g);for(g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;l=l.next().value;g.value=l.value}return this}return a}},{key:"uncollapseAll",value:function(a,g,l){g=void 0===g?0:g;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(l){A.jumpTo(2);
break}return A.yield(r.uncollapseAll(a,g,r.root),3);case 3:return A.return(A.yieldResult);case 2:if(!a(l,g)){A.jumpTo(0);break}if(!l.isCollapsed){A.jumpTo(5);break}return A.yield(r.collapse(l,!1),6);case 6:case 5:y=A.forIn(l.children);case 7:if(null==(v=y.getNext()))A.jumpTo(0);else return A.yield(r.uncollapseAll(a,g+1,l.children[v]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,end:22466})}(void 0));Eg.TreeData=pP;Eg.TreeData=pP;Eg.TreeData=pP;Eg.treeCommands=[{name:"select via filter",exec:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=b.treeData,e.asListWithIndexAndDepth(),e.asListWithIndexAndDepth().map(function(y){return Object.assign(y,{string:e.nodeToString(y.node)})}),
m=Eg.string.lines(Eg.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e))),a=e.asList().map(function(y,A){return{isListItem:!0,string:m[A],value:y}}),v.yield(b.world().filterableListPrompt("Select item",a),2);g=v.yieldResult;l=$jscomp.makeIterator(g.selected);if(r=l.next().value)b.selectedNode=r,b.scrollSelectionIntoView();return v.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var e=b.scroll,m=b.padding.top(),a=e.y;e=b.lineHeightCache.findIndex(function(g){return a<=
(m+=g)});e--;b.gotoIndex(Math.max(1,e));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var e=b.scroll,m=b.padding.top(),a=e.y+b.height;e=b.lineHeightCache.findIndex(function(g){return a<=(m+=g)});e--;b.gotoIndex(Math.min(e,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)+
1])b.selectedNode=e,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)-1])b.selectedNode=e,b.scrollSelectionIntoView();return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?
(e=b.selectedNode,e?b.treeData.isCollapsed(e)?(b.selectedNode=b.treeData.parentNode(e),b.scrollSelectionIntoView(),m.jumpTo(2)):m.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):m.return(!0)):m.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?b.selectedNode?e.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):e.jumpTo(2):e.return(!0)})}},{name:"collapse or uncollapse all siblings",
exec:function(b,e){function m(F){return Eg.arr.filter(l.getChildrenIfUncollapsed(F),function(H){return!l.isLeaf(H)})}function a(F,H){return Promise.all(F.map(function(I){return b.onNodeCollapseChanged({node:I,isCollapsed:H})}))}e=void 0===e?{what:"collapse"}:e;var g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress){g="collapse"===e.what;l=b.treeData;if(g){if(l.isCollapsed(b.selectedNode))return F.return(!0);v=l.parentNode(b.selectedNode);y=-1;Eg.tree.prewalk(v,
function(H,I,M){M<y||(M>y&&(y=M,r=[]),M===y&&Eg.arr.pushIfNotIncluded(r,l.parentNode(H)))},l.getChildrenIfUncollapsed.bind(l))}else for(A=Eg.arr.compact([l.parentNode(b.selectedNode)]);A.length;){r=Eg.arr.flatmap(A,function(H){return m(H)});E=r.every(function(H){return l.isCollapsed(H)===g});if(!E)break;A=r}return F.yield(a(r,g),2)}b.scrollSelectionIntoView();return F.return(!0)})}},{name:"select node above",exec:function(b){var e=b.nodes,m=b.selectedIndex;1>=m&&(m=e.length);b.selectedNode=e[m-1];
b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var e=b.nodes,m=b.selectedIndex;if(-1>=m||m>=e.length-1)m=0;b.selectedNode=e[m+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",exec:function(b){if(b.selectedNode){var e=b.scroll,m=e.x;e=e.y;var a=b.lineBounds(b.selectedIndex),g=a.topLeft();a=b.height-a.height;e=2>Math.abs(g.y-e)?g.y-a:2>Math.abs(g.y-e-.5*a)?g.y:g.y-.5*a;b.scroll=Eg.pt(m,e);return!0}}},{name:"print contents in text window",
exec:function(b){var e=b.treeData;e=Eg.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e));var m=b.getWindow()?"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:m,content:e,name:m,fontFamily:Eg.config.codeEditor.defaultStyle.fontFamily})}}];var osa=Object.freeze({__proto__:null,Tree:oP,TreeData:pP}),tz=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");tz.promise=ph;tz.HTMLMorph=Uy;var qP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),
m=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,g){var l=
this,r=this.iframe,v=this._loadPromise;v&&!v.loaded&&v.reject();this._loadPromise=tz.promise.deferred();this._loadPromise.loaded=!1;r.onload=function(y){l._loadPromise.loaded=!0;l._loadPromise.resolve(y)};g=a||g;v=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(v,g);r.removeAttribute(a);r.setAttribute(v,g);this._loadPromise[v]=g}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},
{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(a.whenRendered(),2);if(3!=A.nextAddress)return g=a.env.renderer.getNodeForMorph(a),l=tz.IFrameMorph.open({srcdoc:g.outerHTML}),A.yield(l.whenLoaded(),3);r=l.innerWindow.document;r.body.style.whiteSpace=
"normal";r.body.style.margin="0.5cm";r.querySelector(".Text").style.width="100%";r.querySelector(".Text").style.overflow="visible";r.querySelectorAll(".marker-layer-part").forEach(function(E){return E.parentNode.removeChild(E)});v=r.querySelector(".text-layer");v.style.whiteSpace="pre-wrap";y=Array.from(v.querySelectorAll("div"));y.forEach(function(E){E.childNodes[0]&&(Array.from(E.childNodes).forEach(function(F){return v.insertBefore(F,E)}),v.insertBefore(r.createElement("br"),E),v.removeChild(E))});
l.innerWindow.print();l.getWindow().remove();A.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],
set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],e,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,end:6160})}(tz.HTMLMorph);tz.IFrameMorph=qP;tz.IFrameMorph=qP;tz.IFrameMorph=qP;var psa=Object.freeze({__proto__:null,IFrameMorph:qP}),kg=lively.FreezerRuntime.recorderFor("lively.components/window.js");kg.arr=eg;kg.promise=ph;kg.pt=Ii;kg.LinearGradient=An;kg.Color=Hg;kg.Rectangle=Le;kg.Label=$t;kg.morph=qa;kg.Morph=Jl;kg.HorizontalLayout=Kv;kg.StyleSheet=
Lv;kg.connect=Zk;kg.signal=dm;kg.easings=xr;var yX=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/window.js"),m=e.hasOwnProperty("Window")&&"function"===typeof e.Window?e.Window:e.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,g,l,r,v,y,
A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){return 1==F.nextAddress?(g=a.world()||a.env.world,l=a.targetMorph.world(),r=l.openMenu,v=[["Change Window Title",function(){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(g.prompt("Enter New Name",{input:a.title}),2);if(H=I.yieldResult)a.title=H;I.jumpToEnd()})}],["Align and resize",[{alias:"left",target:g,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",
target:g,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:g,command:"resize active window",args:{window:a,how:"right"}},{alias:"reset",target:g,command:"resize active window",args:{window:a,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:g,command:"toggle minimize all except active window"},{alias:"close all except this",target:g,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:g,command:"toggle minimize all windows"},
{alias:"close all",target:g,command:"close all windows"}]],{isDivider:!0}],y=v.concat,A=$jscomp,E=A.arrayFromIterable,F.yield(a.targetMorph.menuItems(),2)):F.return(r.call(l,y.call(v,E.call(A,F.yieldResult))))})}},{key:"toggleFader",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:l=g.getSubmorphNamed("fader")||g.addMorph({name:"fader",fill:kg.Color.black.withA(.5),opacity:0,extent:g.extent});if(a){r=g.world().visibleBounds().translateForInclusion(g.bounds());
g._originalBounds=g.bounds();g.animate({bounds:r,duration:300});g.borderColor=kg.Color.gray.darker();g._faderTriggered=!0;l.opacity=1;v.jumpTo(0);break}g._originalBounds&&(g.animate({bounds:g._originalBounds,duration:300}),g._originalBounds=null);g._faderTriggered=!1;return v.yield(g.whenRendered(),3);case 3:return v.yield(kg.promise.delay(100),4);case 4:return g.borderColor=kg.Color.gray,g._faderTriggered?v.return():v.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),v.jumpToEnd()}})}},
{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",value:function(){return new kg.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){var a=this.innerBounds(),g=this.ui.windowTitle,l=this.ui.resizer,r=a.withHeight(25),v=this.ui.header,y=this.ui.windowControls.bounds().right()+3,A=r.withLeftCenter(kg.pt(y,r.height/2));l.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());
g.textBounds().width<r.width-2*y?g.center=r.center():g.leftCenter=A.leftCenter();v.width=this.width}},{key:"ensureNotOverTheTop",value:function(){var a=this.world();if(a){var g=this.globalBounds();g.top()<a.innerBounds().top()&&this.moveBy(kg.pt(0,a.innerBounds().top()-g.top()))}}},{key:"buildHeader",value:function(){return kg.morph({name:"header",extent:kg.pt(this.width,50),submorphs:[kg.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},
{key:"buildButtons",value:function(){var a=this.getSubmorphNamed("close")||kg.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[kg.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});kg.connect(a,"onMouseDown",this,"close");var g=this.getSubmorphNamed("minimize")||kg.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[kg.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});kg.connect(g,"onMouseDown",this,"minimized",{updater:function(r){r(!this.targetObj.minimized)}});if(this.resizable){var l=this.getSubmorphNamed("menu")||kg.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[kg.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});kg.connect(l,"onMouseDown",this,"openWindowMenu")}return kg.arr.compact([a,g,l])}},{key:"buildTitleLabel",value:function(){return this.addMorph({padding:kg.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",reactsToPointer:!1,value:""})}},{key:"resizeBy",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){var g=$jscomp.makeIterator(a);a=g.next().value;g=g.next().value;switch(a){case "right":this.resizeBy(g.withY(0));break;case "bottom right":this.resizeBy(g);break;case "bottom":this.resizeBy(g.withX(0));break;case "left":a=
this.right;this.resizeBy(g.withY(0).negated());this.right=a;break;case "bottom left":a=this.right,this.resizeBy(g.scaleByPt(kg.pt(-1,1))),this.right=a}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),g=$jscomp.makeIterator(a.submorphs),l=g.next().value,r=g.next().value,v=g.next().value,y=g.next().value;g=g.next().value;l.height=this.height-10;l.bottomRight=this.extent.subXY(0,10);r.bottomRight=this.extent;v.height=this.height-10;v.bottomLeft=
kg.pt(0,this.height-10);y.bottomLeft=kg.pt(0,this.height);g.width=this.width-20;g.bottomLeft=kg.pt(10,this.height);a.position=kg.pt(0,0)}},{key:"buildResizer",value:function(){var a,g,l,r;var v=kg.Color.transparent;var y=kg.morph({name:"resizer",fill:kg.Color.transparent,position:kg.pt(0,0),submorphs:[a=kg.morph({name:"right resizer",fill:v,width:10,draggable:!0,nativeCursor:"ew-resize"}),g=kg.morph({name:"bottom right resizer",fill:v,extent:kg.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),
l=kg.morph({name:"right resizer",fill:v,width:10,draggable:!0,nativeCursor:"ew-resize"}),r=kg.morph({name:"bottom left resizer",draggable:!0,fill:v,extent:kg.pt(10,10),nativeCursor:"nesw-resize"}),v=kg.morph({name:"bottom resizer",draggable:!0,fill:v,height:10,nativeCursor:"ns-resize"})]});kg.connect(g,"onDrag",this,"resizeAt",{converter:function(A){return["bottom right",A.state.dragDelta]}});kg.connect(a,"onDrag",this,"resizeAt",{converter:function(A){return["right",A.state.dragDelta]}});kg.connect(v,
"onDrag",this,"resizeAt",{converter:function(A){return["bottom",A.state.dragDelta]}});kg.connect(l,"onDrag",this,"resizeAt",{converter:function(A){return["left",A.state.dragDelta]}});kg.connect(r,"onDrag",this,"resizeAt",{converter:function(A){return["bottom left",A.state.dragDelta]}});this.addMorph(y);this.relayoutResizer();return y}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.minimized=!a.minimized;g.jumpToEnd()})}},{key:"applyMinimize",
value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M,N,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==W.nextAddress){if(!a.targetMorph)return W.return();g=a;l=g.nonMinizedBounds;r=g.minimized;v=g.width;y=a.ui;A=y.windowTitle;E=y.resizer;F=a.bounds();H=a.getSubmorphNamed("minimize");I=kg.easings.outQuad;if(!r)return a.minimizedBounds=F,a.targetMorph&&(a.targetMorph.visible=!0),l=a.world().bounds().translateForInclusion(l||F),a.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(kg.arr.without(a.styleClasses,
"minimzed"))),duration:100,easing:I}),H.tooltip="collapse window",W.jumpTo(2);a.nonMinizedBounds=F;M=(a.minimizedBounds||F).withExtent(kg.pt(v,28));N=A.textBounds();X=a.get("window controls").bounds().right()+3;N.width+2*X<M.width&&(M=M.withWidth(N.width+X+5));a.minimizedBounds=M;H.tooltip="uncollapse window";return W.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(kg.arr.without(a.styleClasses,"neutral"))),bounds:M,duration:100,easing:I}),3)}2!=W.nextAddress&&
a.withMetaDo({metaInteraction:!0},function(){a.targetMorph&&(a.targetMorph.visible=!1)});E.visible=!a.minimized;a.relayoutWindowControls();W.jumpToEnd()})}},{key:"close",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?v.yield(a.targetMorph.onWindowClose(),3):v.jumpTo(2);2!=v.nextAddress&&(g=v.yieldResult);if(!1===g)return v.return();l=a.world();a.deactivate();
a.remove();(r=l.activeWindow()||kg.arr.last(l.getWindows()))&&r.activate();kg.signal(a,"windowClosed",a);v.jumpToEnd()})}},{key:"onMouseUp",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this.activate(a);this.minimized||this.ui.resizer.submorphs.includes(a.targetMorph)||(this.ui.resizer.visible=
!1)}},{key:"onDragStart",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.targetMorph.reactsToPointer=!1)}},{key:"onDragEnd",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&(this.targetMorph.reactsToPointer=a.state.origReactsToPointer);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),
"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var a=this.world(),g=this.targetMorph;a&&g&&(!a.focusedMorph||a.focusedMorph!==g&&!g.isAncestorOf(a.focusedMorph))&&g.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?kg.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var g=this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),
this;this.master={auto:"styleguide://System/window/light/active"};this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;kg.arr.without(l.getWindows(),this).forEach(function(r){return r.deactivate()});this.focus(a);kg.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return g.relayoutWindowControls()});return this}},{key:"deactivate",value:function(){this.master&&"styleguide://System/window/light/inactive"==this.master.auto||
(this.master={auto:"styleguide://System/window/light/inactive"},this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"[window] change title",exec:function(a,g){g=void 0===g?{}:g;var l,
r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return(l=g.title)?v.jumpTo(2):v.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=v.nextAddress&&(l=v.yieldResult);if(r=l)a.title=r;return v.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},ui:{derived:!0,get:function(){return{header:this.get("header"),
resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var g=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress){l="string"===typeof a?[a,{}]:a;r=[];for(v=0;v<l.length;v+=2)y=l[v],A=l[v+1],y=y.replace(/\n/g,""),E=y.length+0-100,0<E&&(y=y.slice(0,-E)),r.push(y,A||{});g.ui.windowTitle.value=r;return F.yield(g.whenRendered(),2)}g.relayoutWindowControls();F.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return kg.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var g=[this.get("header"),this.get("resizer")];kg.arr.withoutAll(this.submorphs,
g).forEach(function(l){return l.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{}}}}],e,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:343,end:17028})}(kg.Morph);yX=kg.Window;var zX=Ba("aO",yX);kg.default=yX;var Ye=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");Ye.Rectangle=Le;Ye.rect=Cl;Ye.Color=Hg;Ye.pt=Ii;Ye.morph=qa;Ye.VerticalLayout=Vy;Ye.Morph=Jl;Ye.StyleSheet=Lv;Ye.Text=Zt;Ye.GridLayout=Wy;Ye.Icon=Op;Ye.HorizontalLayout=Kv;Ye.InputLine=QH;Ye.PasswordInputLine=Yy;Ye.arr=eg;Ye.obj=Ag;Ye.promise=ph;Ye.connect=Zk;Ye.List=PE;Ye.FilterableList=DI;Ye.RadioButtonGroup=CI;Ye.RadioButton=
BI;var rP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("AbstractPrompt")&&"function"===typeof e.AbstractPrompt?e.AbstractPrompt:e.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,Ye.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.focus();a.answer=Ye.promise.deferred();a._isActive=
!0;Ye.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&Ye.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return g.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"keybindings",
this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return cc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"resolve",exec:function(g,l){a.resolve(l);return!0}},{name:"reject",exec:function(g,l){a.reject(l);return!0}}])}},{key:"transitionTo",value:function(a,g){g=void 0===g?300:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=Ye.morph({fill:l.fill,
borderRadius:l.borderRadius});v=Ye.morph({fill:null,origin:Ye.pt(5,5)});a.opacity=0;a.fill=Ye.Color.transparent;a.openInWorld();l.fill=Ye.Color.transparent;$world.addMorph(r,l);r.setBounds(l.bounds());v.openInWorld();v.addMorph(a);a.center=v.origin;v.center=r.center=l.center;v.scale=a.width/l.width;r.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l.animate({scale:l.width/a.width,opacity:0,duration:g}),a.animate({opacity:1,duration:g}),
v.animate({scale:1,duration:g}),A.yield(r.animate({bounds:v.bounds(),duration:g}),2);a.fill=r.fill;$world.addMorph(a);r.remove();l.remove();v.remove();A.jumpToEnd()})});y.jumpToEnd()})}},{key:"addNamed",value:function(a,g){var l=this.getSubmorphNamed(a)||this.addMorph(g.isMorph?g:Ye.morph(Object.assign({},g,{name:a})));g.label&&(l.label=g.label);g.isMorph&&(l.name=a);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:Ye.Color.black.withA(.6)},
extent:{defaultValue:Ye.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=a}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:442,end:3898})}(Ye.Morph);Ye.AbstractPrompt=rP;Ye.AbstractPrompt=rP;Ye.AbstractPrompt=rP;var sP=Ba("aG",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("InformPrompt")&&"function"===typeof e.InformPrompt?e.InformPrompt:e.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:"build",value:function(a){var g=this,l=a=void 0===a?{}:a,r=l.label,v=this.addNamed("promptTitle",{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});v.textString=r;Ye.connect(l,"fire",this,"resolve");a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(v.document){var y=g.center;g.width=Math.max(g.width,v.document.width+100);g.align(g.center,y)}g.opacity=
1}))}},{key:"keybindings",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3907,end:5141})}(Ye.AbstractPrompt));Ye.InformPrompt=sP;Ye.InformPrompt=sP;Ye.InformPrompt=sP;var tP=Ba("aH",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("ConfirmPrompt")&&"function"===typeof e.ConfirmPrompt?e.ConfirmPrompt:e.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"build",value:function(a){var g=this,l=this.addNamed("promptTitle",{type:"text"});l.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var r=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[a,r]});Ye.connect(a,"fire",this,"resolve");Ye.connect(r,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||
(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=g.lineWrapping;var v=g.center;g.width=Math.max(g.width,l.document.width+100);g.center=v;g.opacity=1}))}},{key:"resolve",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5188,end:6560})}(Ye.AbstractPrompt));Ye.ConfirmPrompt=tP;Ye.ConfirmPrompt=
tP;Ye.ConfirmPrompt=tP;var uP=Ba("aI",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof e.MultipleChoicePrompt?e.MultipleChoicePrompt:e.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"resolve",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,a||
this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var g=a=void 0===a?{choices:["No choice"]}:a;a=g.label;var l=g.choices;g=this.addNamed("ok button",{type:"button"});var r=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);var v=this.addNamed("choices",{name:"choices",type:Ye.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[g,r]});g&&Ye.connect(g,"fire",this,"resolve");r&&Ye.connect(r,"fire",this,"reject");this.whenRendered().then(function(){v.choices=
l})}},{key:"onKeyDown",value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var g=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(g)return g.trigger(),a.stop()}return cc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultipleChoicePrompt"}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],
derived:!0,set:function(a){var g;if(g=this.getSubmorphNamed("choices"))g.choices=a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6649,end:8484})}(Ye.AbstractPrompt));Ye.MultipleChoicePrompt=
uP;Ye.MultipleChoicePrompt=uP;Ye.MultipleChoicePrompt=uP;var vP=Ba("aJ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("TextPrompt")&&"function"===typeof e.TextPrompt?e.TextPrompt:e.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var g=
this,l=a.label,r=a.input,v=a.historyId;a=a.useLastInput;var y=this.addNamed("promptTitle",{type:"text"});y.value=l;l=this.addNamed("input",Ye.Text.makeInputLine({historyId:v,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=r||"";v&&a&&(r=Ye.arr.last(l.inputHistory.items))&&(l.textString=r);this.width=Math.max(this.width,y.textBounds().width+50);r=this.addNamed("ok button",{type:"button",label:"OK"});v=this.addNamed("cancel button",{type:"button",label:"CANCEL"});this.addNamed("button wrapper",
{submorphs:[r,v]});Ye.connect(r,"fire",this,"resolve");Ye.connect(v,"fire",this,"reject");y.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var A=g.center;g.width=Math.max(350,y.document.width+100);g.opacity=1;g.center=A}));l.gotoDocumentEnd();l.scrollCursorIntoView()}},{key:"resolve",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.getSubmorphNamed("input").acceptInput())}},{key:"initLayout",value:function(){var a=
this;if(!this.layout){var g=this.getSubmorphNamed("promptTitle"),l=this.getSubmorphNamed("input");g.fit();this.whenRendered().then(function(){var r=Math.max(l.textBounds().width,g.textBounds().width)+20;a.width=Math.min(a.maxWidth,r);a.opacity=1});this.layout=new Ye.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:g.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,
paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle","promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),
2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8493,
end:11546})}(Ye.AbstractPrompt));Ye.TextPrompt=vP;Ye.TextPrompt=vP;Ye.TextPrompt=vP;var wP=Ba("aK",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("EditPrompt")&&"function"===typeof e.EditPrompt?e.EditPrompt:e.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",
value:function(a){var g=a.input,l=a.mode,r=a.textStyle,v=a.evalEnvironment;this.addNamed("promptTitle",{type:"text",textString:a.label});r||(r={});l&&!r.fontFamily&&(r.fontFamily="Monaco, monospace");var y=this.addNamed("editor",{type:"text"});y.textString=g||"";Object.assign(y,r);y.changeEditorMode(l).then(function(){v&&y.editorPlugin&&Object.assign(y.editorPlugin.evalEnvironment,v)});a=y.textBounds().width+50;a>this.width-25&&(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",
{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});Ye.connect(a,"fire",this,"resolve");Ye.connect(g,"fire",this,"reject");y.gotoDocumentEnd();y.scrollCursorIntoView()}},{key:"resolve",value:function(a){var g=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=Ye.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(l){return l!==g});for(a.items.push(g);a.items.length>a.items.max;)a.items.shift();a.index=
a.items.length;Ye.InputLine.setHistory(this.historyId,a)}return cc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,g)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var a=this;return cc._get(Object.getPrototypeOf(m.prototype),
"commands",this).concat([{name:"history back",exec:function(g,l){if(a.historyId){g=Ye.InputLine.getHistory(a.historyId);l=g.items;var r=g.index;g.index=--r;0>r&&(g.index=r=l.length-1);a.get("editor").undoManager.group();a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(g,l){var r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress){if(!a.historyId)return H.jumpTo(2);r=Ye.InputLine.getHistory(a.historyId);
return H.yield(a.world().editListPrompt("input history "+a.historyId,r.items,{requester:a}),3)}2!=H.nextAddress&&(v=H.yieldResult,y=v.status,A=v.list,E=$jscomp.makeIterator(v.selections),F=E.next().value,"canceled"!==y&&(r.items=A,Ye.InputLine.setHistory(a.historyId,r),F&&(r.index=r.items.indexOf(F),a.get("editor").textString=F)));return H.return(!0)})}},{name:"history forward",exec:function(g,l){if(a.historyId){g=Ye.InputLine.getHistory(a.historyId);l=g.items;var r=g.index;g.index=++r;r>=l.length&&
(g.index=r=0);a.get("editor").undoManager.group();a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),
2);a.editorPlugin.evalEnvironment;g.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Ye.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:11555,end:16011})}(Ye.AbstractPrompt));
Ye.EditPrompt=wP;Ye.EditPrompt=wP;Ye.EditPrompt=wP;var xP=Ba("aL",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("PasswordPrompt")&&"function"===typeof e.PasswordPrompt?e.PasswordPrompt:e.PasswordPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"build",value:function(a){var g=a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,
fixedHeight:!0});this.addNamed("input",{type:Ye.PasswordInputLine,name:"input",placeholder:g||""});a=this.addNamed("ok button",{type:"button",label:"OK"});g=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Ye.connect(a,"fire",this,"resolve");Ye.connect(g,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[a,g]})}},{key:"resolve",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var a=
this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16020,end:17258})}(Ye.AbstractPrompt));Ye.PasswordPrompt=xP;Ye.PasswordPrompt=xP;Ye.PasswordPrompt=xP;var yP=Ba("aM",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("ListPrompt")&&"function"===typeof e.ListPrompt?e.ListPrompt:e.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,
b,[{key:"onChange",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var g=a.label,l=a.filterable,r=a.multiSelect,
v=a.historyId,y=a.useLastInput,A=a.fuzzy,E=a.filterFunction,F=a.sortFunction,H=a.actions,I=a.selectedAction,M=a.items,N=a.onSelection,X=a.onFilter;this.extent=a.extent||Ye.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=g;var W=this.addNamed("prompt list",{type:l?Ye.FilterableList:Ye.List,multiSelect:r,historyId:v,useLastInput:y});l?this.get("list").master=!1:this.get("prompt list").master=!1;W.items=M;l&&A&&(W.fuzzy=A);l&&"function"===typeof E&&(W.filterFunction=E);l&&"function"===typeof F&&
(W.sortFunction=F);N&&"function"===typeof N&&(this.onSelection=N);l&&H&&(W.actions=H);l&&I&&(W.selectedAction=I);a=this.addNamed("ok button",{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});Ye.connect(a,"fire",this,"resolve");Ye.connect(g,"fire",this,"reject");l&&(Ye.connect(W,"accepted",this,"resolve"),Ye.connect(W,"canceled",this,"reject"),X&&Ye.connect(W,"updateFilter",function(){return X(W)}),W.whenRendered().then(function(){return W.relayout()}))}},
{key:"resolve",value:function(a){var g=this.getSubmorphNamed("prompt list");a=a||g instanceof Ye.FilterableList?g.acceptInput():{selected:g.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",
value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=a||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var g=this.getSubmorphNamed("prompt list");
g&&(g.selectedIndex=a,g.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect","submorphs"],set:function(a){var g=this,l=this.getSubmorphNamed("prompt list");l&&Ye.connect(l,"selection",function(r){return a(r,g)})}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17356,
end:21532})}(Ye.AbstractPrompt));Ye.ListPrompt=yP;Ye.ListPrompt=yP;Ye.ListPrompt=yP;var zP=Ba("aN",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("EditListPrompt")&&"function"===typeof e.EditListPrompt?e.EditListPrompt:e.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"build",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),
"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",{type:"button",label:Ye.Icon.makeLabel("plus")});var g=this.addNamed("remove item button",{type:"button",label:Ye.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(g);Ye.connect(a,"fire",this,"addItemToList");Ye.connect(g,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=
this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){g=a.get("prompt list");l=1!=g.selectedItems.length?-1:0===g.selectedIndex?0:g.selectedIndex-1;g.items=Ye.arr.withoutAll(g.items,g.selectedItems);0>l?g.selection=null:g.selectedIndex=l;g.focus();r.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=a.get("prompt list"),l=g.selection?g.items[g.selectedIndex].string:"",
y.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",input:l}),2);r=y.yieldResult;if(!r)return y.return();g=a.get("list");v=g.selection?g.selectedIndex+1:g.items.length;g.addItemAt(r,v);g.focus();g.selectedIndex=v;y.jumpToEnd()})}},{key:"keybindings",get:function(){return cc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",
command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var a=this;return cc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");
return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master=
{auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:21541,end:24396})}(Ye.ListPrompt));Ye.EditListPrompt=zP;Ye.EditListPrompt=zP;Ye.EditListPrompt=zP;var AX=Object.freeze({__proto__:null,AbstractPrompt:rP,InformPrompt:sP,ConfirmPrompt:tP,
MultipleChoicePrompt:uP,TextPrompt:vP,EditPrompt:wP,PasswordPrompt:xP,ListPrompt:yP,EditListPrompt:zP}),Jd=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");Jd.obj=Ag;Jd.PropertyPath=$h;Jd.string=ti;Jd.num=Km;Jd.arr=eg;Jd.properties=xp;Jd.pt=Ii;Jd.Color=Hg;Jd.Rectangle=Le;Jd.rect=Cl;Jd.signal=dm;Jd.connect=Zk;Jd.disconnect=Dp;Jd.Morph=Jl;Jd.ShadowObject=Os;Jd.morph=qa;Jd.Text=Zt;Jd.GridLayout=Wy;Jd.HorizontalLayout=Kv;Jd.Path=EB;Jd.Ellipse=DB;Jd.Label=$t;Jd.Tooltip=GB;Jd.Icon=Op;Jd.kld=
Qb;var Naa=Jd.kld;Jd.Shapes=Naa.Shapes;Jd.Intersection=Naa.Intersection;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("LeashEndpoint")&&"function"===typeof e.LeashEndpoint?e.LeashEndpoint:e.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(a){var g=
a.state;a.state.dragDelta=g.lastDragPosition.subPt(g.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(g){return g.isHaloItem})}},{key:"onDrag",value:function(a){var g=this;if(this.connectedMorph)this.clearConnection();else{var l=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(r){return g.canConnectTo(r)});
this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(Jd.obj.keys(Jd.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();
this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,g=a.isPath,l=a.isPolygon,r=a.vertices,v=a.origin;a=this.connectedMorph.globalBounds();if((g||l)&&"center"!=this.attachedSide){g=r.map(function(A){return Jd.pt(A.x,A.y).addPt(v)});l=Jd.Rectangle.unionPts(g);var y=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(y));l=Jd.Shapes.line(y.x,y.y,l.x,l.y);g=Jd.Shapes.polyline(Jd.arr.flatten(g.map(function(A){return[A.x,
A.y]})));g=Jd.arr.min(Jd.Intersection.intersect(g,l).points,function(A){return Jd.pt(A.x,A.y).dist(y)});return Jd.pt(g.x,g.y).addPt(a.topLeft())}return a[this.attachedSide]()}},{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),a=this.leash.localize(a),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(Jd.disconnect(this.connectedMorph,
"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var g=this.vertex.position,l=g.x;g=g.y;var r=this.leash.borderWidth;a&&a.meta&&a.meta.animation?this.animate({center:Jd.pt(l+r,g+r),duration:a.duration}):this.center=Jd.pt(l+r,g+r)}},{key:"attachTo",value:function(a,g){this.clearConnection();this.leash.world()||this.leash.openInWorld(a.globalPosition);this.connectedMorph=a;this.attachedSide=g;this.vertex.controlPoints=this.leash.controlPointsFor(g,this);this.update();
Jd.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],e,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:444,end:4551})})(Jd.Ellipse);var AP=Ba("bT",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("Leash")&&"function"===typeof e.Leash?e.Leash:e.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){cc._get(Object.getPrototypeOf(m.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=
a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var g=this.vertices[a];return new Jd.LeashEndpoint({index:a,leash:this,position:Jd.pt(g.x,g.y)})}},{key:"controlPointsFor",value:function(a,g){a=Jd.Leash.connectionPoints[a];a=g==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},
{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:Jd.pt(0,-1),topLeft:Jd.pt(-1,-1),rightCenter:Jd.pt(1,0),bottomRight:Jd.pt(1,1),bottomCenter:Jd.pt(0,1),bottomLeft:Jd.pt(-1,1),leftCenter:Jd.pt(-1,0),topRight:Jd.pt(1,-1),center:Jd.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:Jd.pt(0,
0)},end:{defaultValue:Jd.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},getLabelFor:{defaultValue:function(a){return a.name}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:Jd.Color.black,origin:Jd.pt(3.5,3.5),extent:Jd.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:Jd.Color.black},
fill:{defaultValue:Jd.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];Jd.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4560,end:7399})}(Jd.Path));Jd.Leash=AP;Jd.Leash=AP;Jd.Leash=AP;var BP=Ba("bg",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("Slider")&&"function"===typeof e.Slider?e.Slider:e.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"normalize",value:function(a){return Math.abs(a/
(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=Jd.pt(a+7.5,10)}},{key:"onSlide",value:function(a,g){a=Jd.num.roundTo(this.value+g.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:Jd.Color.transparent},
draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var a=new Jd.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new Jd.Path({borderColor:Jd.Color.gray.darker(),borderWidth:2,vertices:[Jd.pt(0,0),Jd.pt(this.width,0)],position:Jd.pt(0,this.height/2)}),a];Jd.connect(this,"extent",this,"update");this.update()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:7408,end:8693})}(Jd.Morph));Jd.Slider=BP;Jd.Slider=BP;Jd.Slider=BP;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("SliderHandle")&&"function"===typeof e.SliderHandle?e.SliderHandle:e.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"onDragStart",value:function(a){this.valueView=
(new Jd.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:Jd.Color.gray},borderColor:{defaultValue:Jd.Color.gray.darker()},
borderWidth:{defaultValue:1},dropShadow:{defaultValue:new Jd.ShadowObject({blur:5})},extent:{defaultValue:Jd.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8695,end:9551})})(Jd.Ellipse);var CP=Ba("b2",
function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("ValueScrubber")&&"function"===typeof e.ValueScrubber?e.ValueScrubber:e.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),
"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var g=$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=g.next().value;g.next();"string"==typeof l&&(this.value=parseFloat(l),this.scrub(this.scrubbedValue));a.stop()}}},{key:"scrub",value:function(a){this.field.update(a)}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=(new Jd.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10))}},{key:"getScaleAndOffset",
value:function(a){var g=a.position.subPt(this.initPos);a=g.x;g=Jd.num.roundTo(Math.exp(-g.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:g}}},{key:"onDrag",value:function(a){var g=this.getScaleAndOffset(a),l=g.scale;g=this.getCurrentValue(g.offset,l);this.scrub(g);g=this.floatingPoint?g.toFixed(3):Jd.obj.safeToString(g);this.unit&&(g+=" "+this.unit);this.replace(this.documentRange,g,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=
a.hand.position.addXY(10,10);this.relayout()}},{key:"getCurrentValue",value:function(a,g){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*g:Math.round(a*g))))}},{key:"onDragEnd",value:function(a){a=this.getScaleAndOffset(a);this.value=this.getCurrentValue(a.offset,a.scale);this.factorLabel.softRemove()}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):Jd.obj.safeToString(a);a=this.unit?
a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},field:{derived:!0,get:function(){return this.owner}},value:{defaultValue:0},fill:{defaultValue:Jd.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9560,end:12398})}(Jd.Text));Jd.ValueScrubber=CP;Jd.ValueScrubber=CP;Jd.ValueScrubber=CP;var FI=Ba("bk",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
m=e.hasOwnProperty("CheckBox")&&"function"===typeof e.CheckBox?e.CheckBox:e.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,Jd.signal(this,"toggle",this.checked)}catch(g){var a=this.world();a?a.logError(g):console.error(g)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Jd.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Jd.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12407,end:13133})}(Jd.Morph));Jd.CheckBox=FI;Jd.CheckBox=FI;Jd.CheckBox=FI;var DP=Ba("b3",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("LabeledCheckBox")&&"function"===typeof e.LabeledCheckBox?e.LabeledCheckBox:e.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,
b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new Jd.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},
alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new Jd.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new Jd.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],
derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;Jd.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=
[new Jd.CheckBox({name:"checkbox"}),new Jd.Label({nativeCursor:"pointer",name:"label",padding:Jd.Rectangle.inset(5,3)})];Jd.connect(this,"alignCheckBox",this,"extent");Jd.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13142,
end:15675})}(Jd.Morph));Jd.LabeledCheckBox=DP;Jd.LabeledCheckBox=DP;Jd.LabeledCheckBox=DP;var EP=Ba("bf",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("ModeSelector")&&"function"===typeof e.ModeSelector?e.ModeSelector:e.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"createLabels",value:function(a,g,l){var r=this;l=void 0===l?{}:
l;return Jd.arr.zip(a,g).map(function(v){v=$jscomp.makeIterator(v);var y=v.next().value,A=v.next().value;v=l[y];v=Jd.morph(Object.assign({name:y+"Label",master:{auto:"styleguide://SystemWidgets/mode label"},type:"label",value:y},v&&{tooltip:v}));Jd.connect(v,"onMouseDown",r,"update",{updater:function(E){E(y,A)},varMapping:{name:y,value:A}});return v})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g.layout.forceLayout(),
l=g.get("typeMarker"),r=g.currentLabel.bounds(),a?v.yield(l.animate({bounds:r,duration:200}),3):(l.setBounds(r),v.jumpTo(2));v.jumpToEnd()})}},{key:"animateFontColor",value:function(a,g,l){var r=a.fontColor;a.animate({customTween:function(v){return a.fontColor=r.interpolate(v,g)},duration:l})}},{key:"update",value:function(a,g,l){l=void 0===l?!1:l;var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){v=r.get(a+"Label");if(v==r.currentLabel)return y.return();r.getSubmorphsByStyleClassName("Label").forEach(function(A){A!=
v&&r.animateFontColor(A,r.fontColor,200)});r.currentLabel=v;!l&&Jd.signal(r,a,g);!l&&Jd.signal(r,"switchLabel",g);r.relayout(!l);return y.yield(r.animateFontColor(v,r.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",value:function(){(new Jd.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(a){Jd.obj.isArray(a)?this.keys=this.values=a:
(this.keys=Jd.obj.keys(a),this.values=Jd.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:Jd.Color.black},selectionFontColor:{defaultValue:Jd.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new Jd.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+
2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(Jd.arr.interpose(this.keys.map(function(a){return a+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),Jd.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?
this.keys.indexOf(this.init):0],!0))}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:15684,end:19317})}(Jd.Morph));Jd.ModeSelector=EP;Jd.ModeSelector=EP;Jd.ModeSelector=EP;var FP=Ba("b4",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("DropDownSelector")&&
"function"===typeof e.DropDownSelector?e.DropDownSelector:e.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"build",value:function(){this.dropDownLabel=Jd.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,g=this.getNameFor(this.selectedValue);
return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:g,target:this}]:[]),$jscomp.arrayFromIterable(Jd.arr.compact(this.commands.map(function(l){return l.name!=g&&{command:l.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return Jd.obj.isArray(this.values)?this.values.map(function(g){return{name:String(g),exec:function(){Jd.signal(a,"update",g);a.selectedValue=g}}}):Jd.properties.forEachOwn(this.values,function(g,l){return{name:g,exec:function(){Jd.signal(a,
"update",l);a.selectedValue=l}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?this.getCurrentValue():Jd.obj.isArray(this.values)?Jd.obj.safeToString(a):Jd.obj.safeToString(Jd.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),g=this.get("currentValue");"undefined"==a?(g.value="Not set",g.fontColor=Jd.Color.gray):(g.value=a,g.fontColor=Jd.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,
duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values",
"getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:Jd.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:Jd.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(a){this.setProperty("isSelected",a);this.fontColor=a?Jd.Color.white:Jd.Color.black}},layout:{initialize:function(){this.layout=
new Jd.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:19326,end:22563})}(Jd.Morph));Jd.DropDownSelector=FP;Jd.DropDownSelector=FP;Jd.DropDownSelector=FP;var GP=Ba("bj",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("SearchField")&&"function"===typeof e.SearchField?e.SearchField:e.SearchField=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(l,r){if("\\"===r&&!l.escaped)return l.escaped=!0,l;" "!==r||l.escaped?(l.spaceSeen=!1,l.current+=r):(!l.spaceSeen&&
l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);var g=a.tokens.map(function(l){return l.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:g}}},{key:"clearInput",value:function(){this.textString="";Jd.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):
!0}},{key:"onChange",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&Jd.signal(this,"searchInput",this.parseInput())}},{key:"onBlur",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,
a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){cc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:Jd.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:Jd.Color.gray},borderColor:{defaultValue:Jd.Color.gray},layout:{initialize:function(){this.layout=new Jd.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==
this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||
(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(g,l){var r=String(Jd.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;g.lowercasedTokens.forEach(function(y){r.startsWith(y)?v-=10:r.includes(y)&&(v-=5)});return Jd.arr.sum(g.lowercasedTokens.map(function(y){return Jd.string.levenshtein(r.toLowerCase(),
y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(g.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;var v=String(Jd.PropertyPath(r).get(l)).toLowerCase();return 3>=Jd.arr.sum(g.lowercasedTokens.map(function(y){return Jd.string.levenshtein(v,y)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=
[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},Jd.Icon.makeLabel("times-circle",{padding:Jd.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:Jd.pt(20,22),name:"placeholder icon",fontColor:Jd.Color.gray,nativeCursor:"pointer"})];Jd.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22606,end:29193})}(Jd.Text));Jd.SearchField=GP;Jd.SearchField=GP;Jd.SearchField=GP;var BX=Object.freeze({__proto__:null,Leash:AP,Slider:BP,ValueScrubber:CP,CheckBox:FI,LabeledCheckBox:DP,ModeSelector:EP,DropDownSelector:FP,SearchField:GP}),xh=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");xh.promise=ph;xh.fun=Jn;xh.num=Km;xh.Icon=Op;xh.stringToEasing=Su;xh.easings=xr;xh.VerticalLayout=Vy;xh.ShadowObject=
Os;xh.HorizontalLayout=Kv;xh.morph=qa;xh.Morph=Jl;xh.StyleSheet=Lv;xh.Image=Ty;xh.pt=Ii;xh.RadialGradient=Mp;xh.rect=Cl;xh.Rectangle=Le;xh.Color=Hg;xh.connect=Zk;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=e.hasOwnProperty("ProgressBar")&&"function"===typeof e.ProgressBar?e.ProgressBar:e.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"test",
value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&(a.progress=0);if(!(1>a.progress))return g.jumpTo(0);a.progress+=.1;return g.yield(xh.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=this;setTimeout(function(){a.world()||a.stopStepping()},1E3);if(this._lastWidth){var g=this.get("progress path"),l=xh.stringToEasing(xh.easings.inOutExpo)(xh.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),r=this._targetWidth;g.topLeft=xh.pt(0,
0);g.height=this.height;g.width=this._lastWidth>r?r:xh.num.interpolate(l,this._lastWidth,r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(a){var g=this.get("progress path");this._lastWidth=Math.max(g.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},
fill:{defaultValue:xh.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",fill:xh.Color.orange,width:1}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1929})})(xh.Morph);
var CX=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=e.hasOwnProperty("LoadingIndicator")&&"function"===typeof e.LoadingIndicator?e.LoadingIndicator:e.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;cc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a);var g=this.ui;a=g.label;var l=g.closeButton;if(g=g.progressBar)g.opacity=0,g.isLayoutable=!1;xh.connect(this,"extent",this,"relayout");xh.connect(a,"extent",this,"relayout");xh.connect(a,"value",this,"updateLabel");xh.connect(a,"fontSize",this,"updateLabel");xh.connect(a,"fontFamily",this,"updateLabel");xh.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return l=g.ui,(r=l.progressBar)||(r=g.addMorph(new xh.ProgressBar({name:"progress bar"}))),v=g.center,0==a?(r.isLayoutable=!1,r.opacity=0):(r.isLayoutable=!0,r.opacity=1),r.progress=a,y.yield(g.whenRendered(),2);g.center=v;y.jumpToEnd()})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",value:function(){xh.Rectangle.inset(20,12);var a=this.ui,g=a.label,l=a.progressBar,r=a.status;a.closeButton.topRight=
this.innerBounds().insetBy(2).topRight();l.extent=xh.pt(g.owner.bounds().width,5);r[r.visible?"top":"bottom"]=g.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,g){var l=xh.morph(Object.assign({type:xh.LoadingIndicator},g,{label:a}));if(g&&g.animated)return xh.promise.delay(g.delay||0).then(function(){l.openInWorld();
l.opacity=0;l.whenRendered().then(function(){l.ui.spinner.visible=!0;l.top+=25;l.animate({top:l.top-25,easing:xh.easings.outExpo});l.animate({opacity:1,easing:xh.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner.visible=!0;l.ui.label.fit()});return l}},{key:"forPromise",value:function(a,g,l){var r=this.open(g,l);xh.promise.finally(Promise.resolve(a),function(){return r.remove()});return r}},{key:"runFn",value:function(a,g,l){var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return v=
r.open(g,l),y.yield(v.whenRendered(),2);case 2:return y.setFinallyBlock(3),y.yield(a(v),5);case 5:return y.return(y.yieldResult);case 3:y.enterFinallyBlock(),v.remove(),y.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),
label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(a){this.animateProgress(xh.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var g=this.ui.status;a?(g.visible=!0,g.value=a):(g.visible=!1,g.value="");this.relayout()}},
fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=
[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:xh.pt(86.2,70.2)},{type:"label",name:"ld label",extent:xh.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:xh.Icon.textAttribute("times")},{type:xh.ProgressBar,name:"progress bar"}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:2085,end:7901})}(xh.Morph);CX=xh.LoadingIndicator;var GI=Ba("L",CX);xh.default=CX;var Nk=lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(Nk,lsa);Object.assign(Nk,ksa);Object.assign(Nk,msa);Object.assign(Nk,nsa);Object.assign(Nk,osa);Object.assign(Nk,psa);Nk.Window=zX;Nk.prompts=AX;Nk.widgets=BX;Nk.LoadingIndicator=GI;Nk.addClassMappings=sa;Nk.List=PE;Nk.DropDownList=EI;Nk.Button=OE;Nk.CheckBox=FI;Nk.addClassMappings({list:Nk.List,dropdownlist:Nk.DropDownList,
button:Nk.Button,checkbox:Nk.CheckBox,labeledcheckbox:Nk.widgets.LabeledCheckBox});Nk.Window=zX;Nk.Window=zX;Nk.LoadingIndicator=GI;Nk.LoadingIndicator=GI;Nk.prompts=AX;Nk.prompts=AX;Nk.widgets=BX;Nk.widgets=BX;var Jr=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");Jr.Morph=Jl;Jr.MorphicDB=$w;Jr.LoadingIndicator=GI;Jr.resource=Tj;var QE=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),m=e.hasOwnProperty("WorldLoadingScreen")&&"function"===
typeof e.WorldLoadingScreen?e.WorldLoadingScreen:e.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!lively.FreezerRuntime)return v.jumpTo(0);g=a.get("package loading indicator");g.startStepping("updateProgressBar");document.body.style.backgroundColor="black";l=a.getWorldName();(r=a.getFilePath())&&a.get("json target indicator").animate({opacity:1,duration:300});return v.yield(a.transitionToLivelyWorld({worldName:l,filePath:r},g),3)}g.stopStepping();v.jumpToEnd()})}},
{key:"transitionToLivelyWorld",value:function(a,g){var l=a.worldName,r=a.filePath,v=this,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:return y=v.get("package loading indicator"),M.yield(Promise.resolve().then(function(){return Oaa}),2);case 2:A=M.yieldResult;E=A.bootstrap;if(!(F=l&&"__newWorld__"!=l)){M.jumpTo(3);break}return M.yield(Jr.MorphicDB.default.exists("world",l),4);case 4:F=!M.yieldResult.exists;case 3:if(F)return M.return(v.indicateMissingWorld(!0));
if(!(H=r)){M.jumpTo(5);break}return M.yield(Jr.resource(document.location.origin).join(r).exists(),6);case 6:H=!M.yieldResult;case 5:if(H)return M.return(v.indicateMissingWorld(!0));I=Jr.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});g.opacity=1;return M.yield(E({worldName:l,filePath:r,loadingIndicator:I,progress:y}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":Jr.resource(document.location.href).query().name||
!1}},{key:"getFilePath",value:function(){return Jr.resource(document.location.href).query().file||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],e,{pathInPackage:function(){return"loading-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-72"}}},{start:158,end:2907})}(Jr.Morph);Jr.WorldLoadingScreen=QE;Jr.WorldLoadingScreen=QE;Jr.WorldLoadingScreen=QE;var Qh=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");Qh.Morph=Jl;Qh.MorphicDB=$w;Qh.World=ty;Qh.easings=xr;Qh.morph=qa;Qh.promise=ph;Qh.string=ti;Qh.date=xu;
Qh.Color=Hg;Qh.pt=Ii;Qh.LoadingIndicator=GI;Qh.resource=Tj;var RE=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=e.hasOwnProperty("WorldPreview")&&"function"===typeof e.WorldPreview?e.WorldPreview:e.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cc(m,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=
!1}},{key:"displayPreview",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.yield(a.initWithCommit(a._commit),0)})}},{key:"initWithCommit",value:function(a){var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return l=g.ui,r=l.preview,v=l.timestamp,y=l.title,A=l.description,E=l.previewContainer,g.opacity=.5,E.opacity=0,I.yield(g.whenRendered(),2);if(3!=I.nextAddress)return g._commit=a,r.imageUrl=
a.preview,F=a.author,H=F.name,H=H.startsWith("guest-")?"guest":H,v.value=[H,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Qh.date.format(a.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],y.value=Qh.string.truncate(a.name,18,"..."),A.value=a.description,I.yield(g.whenRendered(),3);E.opacity=1;g.animate({opacity:1,duration:300});I.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return l=
Qh.morph(Object.assign({},g.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[g.ui.spinner.spec()]})).openInWorld(),l.hasFixedPosition=!0,l.globalPosition=g.globalPosition,l.opacity=0,r.yield(l.whenRendered(),2);case 2:return r.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:a,borderRadius:0,duration:500,easing:Qh.easings.inOutQuint}),l.respondsToVisibleWindow=!0,r.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:Qh.easings.inOutQuint}),
4);case 4:return r.yield(Qh.promise.delay(1E3),5);case 5:return r.return(l)}})}},{key:"openWorld",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.openAnimated(),2);a.loadWorld();g.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){g=a._commit;l=g._id;r=g.name;if(lively.FreezerRuntime)return v=Qh.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,v),A.jumpTo(0);y=Qh.LoadingIndicator.open("loading "+r);return A.yield(Qh.World.loadFromCommit(l,void 0,{morphicDB:Qh.MorphicDB.default}),3)}y.remove();A.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,g,l){var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(Ab.import("./package loading progress indicator-0603d3b0.js"),3);case 3:if(!(r=
E.yieldResult)){E.jumpTo(4);break}return E.yield(Qh.resource("part://partial freezing/package loading progress indicator"),5);case 5:r=E.yieldResult;case 4:return E.yield(r.read(),2);case 2:return v=E.yieldResult,E.yield(Promise.resolve().then(function(){return Oaa}),6);case 6:return y=E.yieldResult,A=y.bootstrap,E.yield(A({commit:g,loadingIndicator:l,progress:v}),0)}})}},{key:"showVersions",value:function(){var a=this,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return a.versionContainer.opacity=
1,g=200,l=Qh.easings.inOutExpo,r=a.ui,v=r.previewContainer,E.yield(Ab.import("./version container-49dce23b.js"),3);case 3:if(!(y=E.yieldResult)){E.jumpTo(4);break}return E.yield(Qh.resource("part://partial freezing/version container"),5);case 5:y=E.yieldResult;case 4:return E.yield(y.read(),2);case 2:return A=E.yieldResult,A.name="version container",A.position=Qh.pt(0,0),a.addMorph(A),A.reactsToPointer=A.visible=!0,A.initializeFromStartCommit(a._commit),a.animate({width:515,duration:g,easing:l}),
v.animate({opacity:0,duration:g}),E.yield(A.animate({opacity:1,duration:g}),6);case 6:v.reactsToPointer=v.visible=!1,E.jumpToEnd()}})}},{key:"hideVersions",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=Qh.easings.inOutExpo,l=a.ui,r=l.previewContainer,v=l.versionContainer,r.reactsToPointer=r.visible=!0,a.animate({width:245,duration:200,easing:g}),r.animate({opacity:1,duration:200}),y.yield(v.animate({opacity:0,duration:200}),
2);v.reset();v.remove();y.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return g=300,l=a.ui,r=l.previewContainer,A.yield(Ab.import("./delete world prompt-fb999592.js"),3);case 3:if(!(v=
A.yieldResult)){A.jumpTo(4);break}return A.yield(Qh.resource("part://partial freezing/delete world prompt"),5);case 5:v=A.yieldResult;case 4:return A.yield(v.read(),2);case 2:return y=A.yieldResult,Object.assign(y,{name:"delete world prompt",position:Qh.pt(0,0),opacity:0}),a.addMorph(y),y.visible=!0,A.yield(a.withAnimationDo(function(){y.opacity=1;a.dropShadow=a.dropShadow.with({color:Qh.Color.black.withA(.5),blur:50});r.opacity=.3;r.blur=1},{duration:g}),0)}})}},{key:"confirmDelete",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(Qh.MorphicDB.default.commit(Object.assign({},a._commit,{content:void 0,snapshot:null})),2);a.isComponent||a.owner.isWorld||a.owner.remove();g.jumpToEnd()})}},{key:"cancelDelete",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g=a.ui,l=g.previewContainer,r=g.deleteWorldPrompt,v.yield(a.withAnimationDo(function(){Object.assign(l,
{opacity:1,blur:0});a.dropShadow=a.dropShadow.with({color:Qh.Color.rgba(0,0,0,.11)});r.opacity=0},{duration:300}),2);r.remove();v.jumpToEnd()})}},{key:"onMouseUp",value:function(a){var g=this.ui,l=g.openButton,r=g.versionButton,v=g.deleteButton,y=g.closeVersionsButton,A=g.cancelDeleteButton;g=g.confirmDeleteButton;switch(a.targetMorph){case l:this.openWorld();break;case r:this.showVersions();break;case v:this.tryToDelete();break;case y:this.hideVersions();break;case g:this.confirmDelete();break;case A:this.cancelDelete()}}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},{key:"properties",get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),
spinner:this.getSubmorphNamed("spinner"),deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-72"}}},{start:279,end:8286})}(Qh.Morph);Qh.WorldPreview=RE;Qh.WorldPreview=RE;Qh.WorldPreview=RE;var SE=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=e.hasOwnProperty("WorldLandingPage")&&"function"===typeof e.WorldLandingPage?e.WorldLandingPage:e.WorldLandingPage=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cc(m,b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var g=a.getSubmorphNamed("a project browser");g&&(g.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return $world.get("user flap")?
l.return():l.yield(Ab.import("./dark-348dfe95.js"),3);case 3:if(!(a=l.yieldResult)){l.jumpTo(4);break}return l.yield(Qh.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=l.yieldResult;case 4:return l.yield(a.read(),2);case 2:return g=l.yieldResult,g.name="user flap",g.showMorphControls=!1,g.hasFixedPosition=!0,g.openInWorld(),g.opacity=0,g.alignInWorld(),g.get("fast load toggler").refresh(),l.yield(Qh.promise.delay(1E3),6);case 6:g.animate({opacity:1}),l.jumpToEnd()}})}},{key:"beforePublish",
value:function(){var a=this.getSubmorphNamed("a project browser");a&&a.remove()}},{key:"onLoad",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=Qh.Color.black;document.documentElement.style.background=Qh.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();
(g=document.getElementById("loading screen"))&&g.remove();l.jumpToEnd()})}},{key:"showWorldList",value:function(){var a=this,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(g=a.getSubmorphNamed("a poject browser")){E.jumpTo(2);break}l=a;r=l.addMorph;v=l;return E.yield(Ab.import("./project browser-fb8b8e5b.js"),4);case 4:if(!(y=E.yieldResult)){E.jumpTo(5);break}return E.yield(Qh.resource("part://partial freezing/project browser"),6);case 6:y=
E.yieldResult;case 5:return E.yield(y.read(),3);case 3:g=r.call(v,E.yieldResult);case 2:A=g,A.name="a project browser",a.reset(),A.showCloseButton=!1,A.extent=Qh.pt(1110,800).minPt(a.extent.subPt(Qh.pt(50,150))),A.center=a.innerBounds().center(),A.animate({opacity:1,duration:300}),A.displayWorlds(),A.hasFixedPosition=!1,E.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-72"}}},{start:8296,end:11614})}(Qh.Morph);Qh.WorldLandingPage=
SE;Qh.WorldLandingPage=SE;Qh.WorldLandingPage=SE;var px=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");px.WorldLoadingScreen=QE;px.WorldLandingPage=SE;px.WorldPreview=RE;px.WorldLoadingScreen=QE;px.WorldLoadingScreen=QE;px.WorldLandingPage=SE;px.WorldLandingPage=SE;px.WorldPreview=RE;px.WorldPreview=RE;var Ve=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");Ve.bootstrap=vL;Ve.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return Ve.resource(document.location.origin).join("package-registry.json").readJson()}).then(function(e){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,e);return System}).then(function(){return Ve.loadViaScript("/lively.user/dist/lively.user-client.js")})};Ve.installFetchHook=function(b){lively.modules.installHook("fetch",function(e,m){Ve.loads++;b.status="loading "+Ve.string.truncateLeft(m.name.replace(window.System.baseURL,""),25,"...");b.progress=Ve.loads/(800-4*Object.keys(Ve.extractedModules).length);b.center=$world.innerBounds().center();return e(m)})};Ve.extractModules=function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(e){return e.startsWith(b)}).forEach(function(e){Ve.extractedModules[window.origin+
"/"+e]=Object.assign({},lively.FreezerRuntime.registry[e].exports)})};Ve.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(Ab.import("./world-31d85734.js"),2);case 2:return b.yield(Ab.import("./editor-plugin-c8470ec8.js").then(function(e){return e.e}),3);case 3:return b.yield(Ab.import("./editor-plugin-87697cac.js"),4);case 4:return b.yield(Ab.import("./index-a98bf65c.js"),5);case 5:return b.yield(Ab.import("./client-command-874783a6.js"),
6);case 6:return b.yield(Ab.import("./client-resource-283c8b71.js"),7);case 7:return b.yield(Promise.resolve().then(function(){return Vja}),8);case 8:Ve.extractModules("lively.bindings"),Ve.extractModules("lively.shell"),Ve.extractModules("lively.ide"),Ve.extractModules("lively.components"),b.jumpToEnd()}})};Ve.bootstrapLivelySystem=function(b,e,m){return Promise.resolve().then(function(){b.status="starting bootstrap process..."}).then(function(){var a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(e.whenRendered(),
2);case 2:if("frozen"!=m["lively.lang"]&&!Ve.fastLoad){A.jumpTo(3);break}return A.yield(Promise.resolve().then(function(){return T4}),4);case 4:a=A.yieldResult,Ve.extractModules("lively.lang"),e.finishPackage({packageName:"lively.lang",frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=m["lively.ast"]&&!Ve.fastLoad){A.jumpTo(5);break}g=lively;return A.yield(Promise.resolve().then(function(){return e5}),6);case 6:g.ast=A.yieldResult,Ve.extractModules("lively.ast"),e.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=m["lively.source-transform"]&&!Ve.fastLoad){A.jumpTo(7);break}l=lively;return A.yield(Promise.resolve().then(function(){return Sja}),8);case 8:l.sourceTransform=A.yieldResult,Ve.extractModules("lively.source-transform"),e.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=m["lively.classes"]&&!Ve.fastLoad){A.jumpTo(9);break}return A.yield(Ab.import("./object-classes-689941b4.js"),10);case 10:return r=lively,A.yield(Promise.resolve().then(function(){return cla}),
11);case 11:r.classes=A.yieldResult,Ve.extractModules("lively.class"),e.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=m["lively.vm"]&&!Ve.fastLoad){A.jumpTo(12);break}v=lively;return A.yield(Promise.resolve().then(function(){return Y5}),13);case 13:v.vm=A.yieldResult,Ve.extractModules("lively.vm"),e.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=m["lively.modules"]&&!Ve.fastLoad){A.jumpTo(14);break}return A.yield(Promise.resolve().then(function(){return IM}),
15);case 15:Ve.extractModules("lively.modules"),e.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=m["lively.user"]&&!Ve.fastLoad){A.jumpTo(16);break}return A.yield(Promise.resolve().then(function(){return Uqa}),17);case 17:return A.yield(Ab.import("./user-ui-494b4ae6.js"),18);case 18:Ve.extractModules("lively.user"),e.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=m["lively.storage"]&&!Ve.fastLoad){A.jumpTo(19);break}return A.yield(Promise.resolve().then(function(){return sqa}),
20);case 20:Ve.extractModules("lively.storage"),e.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=m["lively.morphic"]&&!Ve.fastLoad){A.jumpTo(0);break}return A.yield(Promise.resolve().then(function(){return Vka}),22);case 22:return Ve.extractModules("lively.resources"),A.yield(Ab.import("./client-55fd121b.js"),23);case 23:return A.yield(Ab.import("./index-792c91c7.js"),24);case 24:return Ve.extractModules("lively.2lively"),A.yield(Promise.resolve().then(function(){return Xja}),
25);case 25:return Ve.extractModules("lively.serializer2"),A.yield(Ve.loadComponents(),26);case 26:return A.yield(Ab.import("./index-1222f918.js").then(function(E){return E.i}),27);case 27:return Ve.extractModules("lively.halos"),A.yield(Ab.import("./index-9c46491a.js"),28);case 28:return Ve.extractModules("lively-system-interface"),A.yield(Promise.resolve().then(function(){return Wja}),29);case 29:return Ve.extractModules("lively.graphics"),y=lively,A.yield(Promise.resolve().then(function(){return bra}),
30);case 30:y.morphic=A.yieldResult,Ve.extractModules("lively.morphic"),e.finishPackage({packageName:"lively.morphic",frozen:!0}),A.jumpToEnd()}})}).then(function(){var a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(Ve.resource(document.location.origin).join("package-registry.json").readJson(),2);case 2:return a=v.yieldResult,v.yield(Ve.loadViaScript("/lively.next-node_modules/babel-standalone/babel.js"),3);case 3:return v.yield(Ve.loadViaScript("/lively.next-node_modules/systemjs/dist/system.src.js"),
4);case 4:return window.System.config({baseURL:document.location.origin}),v.yield(Ve.loadViaScript("/lively.modules/systemjs-init.js"),5);case 5:g=lively.modules.getSystem("bootstrapped",{baseURL:document.location.origin});lively.modules.changeSystem(g,!0);g["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(g,a);for(l in Ve.extractedModules)g.set(l,g.newModule(Ve.extractedModules[l])),r=lively.modules.module(l),r._recorder=Ve.extractedModules[l],r._frozenModule=!0;Ve.installFetchHook(b);
v.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.lang"]&&!Ve.fastLoad)return a.return(Ve.importPackageAndDo("lively.lang",function(g){e.finishPackage({packageName:"lively.lang",loaded:!0});delete g._prevLivelyGlobal},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){e.animate({opacity:1,easing:Ve.easings.outExpo,duration:300});if("dynamic"==m["lively.ast"]&&!Ve.fastLoad)return a.return(Ve.importPackageAndDo("lively.ast",
function(g){e.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.source-transform"]&&!Ve.fastLoad)return a.return(Ve.importPackageAndDo("lively.source-transform",function(g){e.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.classes"]&&!Ve.fastLoad)return a.return(Ve.importPackageAndDo("lively.classes",function(g){e.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.vm"]&&!Ve.fastLoad)return a.return(Ve.importPackageAndDo("lively.vm",function(g){e.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=g},b));a.jumpToEnd()})}).then(function(){function a(g){lively.modules=
g;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Ve.installFetchHook(b);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];g=System["__lively.modules__packageRegistry"]=g.PackageRegistry.ofSystem(System);Object.assign(g,Ve.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));g.resetByURL();l=g.allPackages();var r=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){Ve.adoptObject(y,r)});l=Object.values(System["__lively.modules__loadedModules"]);var v=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){Ve.adoptObject(y,v)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return"frozen"==m["lively.modules"]||
Ve.fastLoad?(System._scripting=lively.modules.scripting,g.jumpTo(2)):g.yield(Ve.importPackageAndDo("lively.modules",a,b),2);e.finishPackage({packageName:"lively.modules",loaded:!0});g.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.user"]&&!Ve.fastLoad)return a.return(Ve.importPackageAndDo("lively.user",function(g){e.finishPackage({packageName:"lively.user",loaded:!0});lively.user=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.storage"]&&!Ve.fastLoad)return a.return(Ve.importPackageAndDo("lively.storage",function(g){e.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=g},b));a.jumpToEnd()})})};Ve.importPackageAndDo=function(b,e,m){var a=b.split("/").slice(-1)[0];m.label="loading "+a;return lively.modules.importPackage(b).then(e||function(){})};Ve.polyfills=function(){var b=[];"PointerEvent"in window||b.push(Ve.loadViaScript(document.location.origin+"/lively.next-node_modules/pepjs/dist/pep.js"));
"fetch"in window||b.push(Ve.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};Ve.resource=Tj;Ve.loadViaScript=O;Ve.promise=ph;Ve.string=ti;Ve.obj=Ag;Ve.modulePackage=IM;Ve.easings=xr;Ve.adoptObject=rq;Ve.Color=Hg;lively.modules=Ve.modulePackage;Ve.loginDone=!0;Ve.doBootstrap=!0;Ve.askBeforeQuit=!0;Ve.worldLoaded=!1;Ve.loc=document.location;Ve.query=Ve.resource(Ve.loc.href).query();Ve.fastLoad=1==Ve.query.fastLoad;Ve.bootstrap=vL;Ve.bootstrap=vL;Ve.loads=
0;Ve.extractedModules={};var Oaa=Object.freeze({__proto__:null,bootstrap:vL}),S4=JSON.parse('{"id":"WorldLandingPage_FEA0F263_3198_4A12_8CE5_5DE5895862CF","snapshot":{"WorldLandingPage_FEA0F263_3198_4A12_8CE5_5DE5895862CF":{"rev":1566003,"props":{"name":{"value":"world landing page"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(65.60078124999927,36.453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1003.0232101304723,594.571136205233)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"Globe_870B517A_7084_4751_9370_C3466253BC97","rev":789}]},"clipMode":{"value":"hidden"},"styleClasses":{"value":["WorldLandingPage","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"CA2933F2-D370-45E9-871E-9418F8B0DDFA","rev":0}},"metadata":{"value":{"__ref__":true,"id":"A1F90761-8199-483A-A3FF-8D65BAEDDCD7","rev":0}},"loadingScreen":{"value":{"__ref__":true,"id":"HTMLMorph_20FEFB2D_F5B9_4DA4_9C67_FAAE157E96F0","rev":732}}},"lively.serializer-class-info":{"className":"WorldLandingPage","module":{"package":{"name":"PartialFreezing","version":"0.1.1-71"},"pathInPackage":"landing-page.js"}}},"Globe_870B517A_7084_4751_9370_C3466253BC97":{"rev":789,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"E95C793D-F88B-4E7E-B14A-87FDD17B9454","rev":0}]},"name":{"value":"globe"},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-1.2699218750001364,0.14453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"WebGLCanvas_D9594FB8_B8F7_452C_8E98_A6A75609FC2F","rev":773},{"__ref__":true,"id":"Morph_5A9FBF30_179C_4E0F_8628_11626206C0FB","rev":787}]},"styleClasses":{"value":["Globe","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"E44F53BF-AED3-4E78-8CBF-1B5BF9BFF224","rev":0}},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="}},"lively.serializer-class-info":{"className":"Globe","module":{"package":{"name":"Globe","version":"0.1.1-26"},"pathInPackage":"index.js"}}},"E95C793D-F88B-4E7E-B14A-87FDD17B9454":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"Globe_870B517A_7084_4751_9370_C3466253BC97","rev":789}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"Globe_870B517A_7084_4751_9370_C3466253BC97","rev":789}},"targetMethodName":{"value":"onExtentChanged"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"WebGLCanvas_D9594FB8_B8F7_452C_8E98_A6A75609FC2F":{"rev":773,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"243A6C61-D0C5-4BEE-AD8A-C25D9CF7A651","rev":0}]},"name":{"value":"webgl canvas"},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"styleClasses":{"value":["WebGLCanvas","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"right":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"bottom":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"left":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1]}},"metadata":{"value":{"__ref__":true,"id":"87663CA2-B6B4-42B0-9C50-43921D3CBA8B","rev":0}},"contextType":{"value":"webgl"},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="},"fps":{"value":15}},"lively.serializer-class-info":{"className":"WebGLCanvas","module":{"package":{"name":"WebGLCanvas","version":"0.1.1-56"},"pathInPackage":"index.js"}}},"243A6C61-D0C5-4BEE-AD8A-C25D9CF7A651":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"WebGLCanvas_D9594FB8_B8F7_452C_8E98_A6A75609FC2F","rev":773}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"WebGLCanvas_D9594FB8_B8F7_452C_8E98_A6A75609FC2F","rev":773}},"targetMethodName":{"value":"relayout"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"87663CA2-B6B4-42B0-9C50-43921D3CBA8B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"5543f15ce9adfccb56c979db92d7b0d38398d6a8\\"})"}}},"Morph_5A9FBF30_179C_4E0F_8628_11626206C0FB":{"rev":787,"props":{"name":{"value":"cover"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"97783107-7EAA-4DB6-A71E-37ABB738D994","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"97783107-7EAA-4DB6-A71E-37ABB738D994":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"44c59c7e6812baaed95b7a3660abcb246296e490\\"})"}}},"E44F53BF-AED3-4E78-8CBF-1B5BF9BFF224":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"f71e0d7aa02c9c874eba979fe444380bf583f9f2\\"})"}}},"CA2933F2-D370-45E9-871E-9418F8B0DDFA":{"rev":0,"props":{"_rev":{"value":0},"Nunito":{"value":"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap"}}},"A1F90761-8199-483A-A3FF-8D65BAEDDCD7":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"world landing page\\", _id: \\"32298ca0ee3f234f9baca22b5b5759595d486064\\"})"},"publishedAlias":{"value":"dashboard"},"excludedPackages":{"value":["kld-intersections"]},"publishedLocation":{"value":"/lively.freezer/dashboard/"}}},"HTMLMorph_20FEFB2D_F5B9_4DA4_9C67_FAAE157E96F0":{"rev":732,"props":{"name":{"value":"loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(485.34375,274.29296875)"},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7F62D157-2733-40AD-9967-7EA775CDC29C","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: black\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"7F62D157-2733-40AD-9967-7EA775CDC29C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/Globe":[],"local://lively-object-modules/WebGLCanvas":[],"local://lively-object-modules/PartialFreezing":[]}}');
lively.resources={resource:Tj,loadViaScript:O};lively.morphic={loadMorphFromSnapshot:Wu};Ba("bX",void 0)}}});