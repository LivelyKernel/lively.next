System.register(["./__root_module__-255c8c26.js","./index-e74b4e71.js","./color-picker-9a3cf97a.js"],function(){var Da,Ab,Tb,kc,ec,he,gd,Zd,kd,Sc,yd,Od,fe,Ud,md,db,Fb,tc,nc,td,ke,zc,Ec,Pb,Qb,Tc,ld,Rb;return{setters:[function(qb){Da=qb.as;Ab=qb.s;Tb=qb.a6;kc=qb.aV;ec=qb.a5;he=qb.a8;gd=qb.a9;Zd=qb.aA;kd=qb.aj;Sc=qb.am;yd=qb.ah;Od=qb.an;fe=qb.a2;Ud=qb.a0;md=qb.C;db=qb.ap;Fb=qb.at;tc=qb.bV;nc=qb.bs;td=qb.ab;ke=qb.ar;zc=qb.bh;Ec=qb.br;Pb=qb.bp;Qb=qb.bW},function(qb){Tc=qb.N;ld=qb.I},function(qb){Rb=
qb.a}],execute:function(){var qb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");qb.fun=Da;qb.string=Ab;qb.obj=Tb;qb.properties=kc;qb.arr=ec;qb.Text=he;qb.config=gd;qb.HorizontalLayout=Zd;qb.VerticalLayout=kd;qb.morph=Sc;qb.Morph=yd;qb.Icon=Od;qb.pt=fe;qb.Rectangle=Ud;qb.Color=md;qb.connect=db;qb.once=Fb;qb.noUpdate=tc;qb.ColorPicker=Rb;qb.DropDownList=nc;qb.loadObjectFromPartsbinFolder=td;qb.cachedControls=new WeakMap;var bc=function(mb){var ub=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),
Db=ub.hasOwnProperty("RichTextControl")&&"function"===typeof ub.RichTextControl?ub.RichTextControl:ub.RichTextControl=function(cb){cb&&cb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ke(Db,mb,[{key:"toggleButton",value:function(cb,fb){cb.master=fb?{auto:"styleguide://SystemIDE/selected button"}:{auto:"styleguide://System/dark button"}}},{key:"reset",value:function(){var cb=this.ui.fontSelection;cb.items=qb.RichTextControl.basicFontItems();
cb.selection=cb.items[0].value;qb.connect(this.target,"selectionChange",this,"update")}},{key:"alignAtTarget",value:function(cb){cb=void 0===cb?!!this.world():cb;var fb=this.target,Eb=fb.world()||$world,qc=this.globalBounds();fb=(fb.selection.isEmpty()?fb.globalBounds():fb.getGlobalTransform().transformRectToRect(fb.selectionBounds().translatedBy(fb.scroll.negated()))).bottomCenter().subPt(qc.topCenter());Eb=Eb.visibleBounds().translateForInclusion(qc.translatedBy(fb)).topLeft().subPt(qc.topLeft());
Eb=this.position.addPt(Eb);cb?this.animate({duration:300,position:Eb}):this.position=Eb}},{key:"removeFocus",value:function(){this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(cb,fb){fb=void 0===fb?!0:fb;var Eb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress)return Eb.target=cb,Eb.update(),qc.yield(Eb.whenRendered(),2);Eb.ui.fontSizeField.relayout();fb&&Eb.alignAtTarget();qc.jumpToEnd()})}},{key:"setupConnections",
value:function(){qb.connect(this.ui.paddingField,"number",this,"setPadding");qb.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");qb.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");qb.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");qb.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var cb=this,fb=this.target,Eb=this.updateSpec,qc=fb.selection;qc=qc?qc.isEmpty()?fb.textAttributeAt(qc.start):fb.getStyleInRange(qc):
{};var gc=this.managedProps,Oc=qb.obj.select(fb,gc);fb=$jscomp.makeIterator(Object.entries(qb.obj.select(qc||{},gc)));for(qc=fb.next();!qc.done;qc=fb.next())gc=$jscomp.makeIterator(qc.value),qc=gc.next().value,gc=gc.next().value,"undefined"!==typeof gc&&(Oc[qc]=gc);qb.noUpdate(function(){for(var Wc=$jscomp.makeIterator(Object.entries(cb.ui)),Q=Wc.next();!Q.done;Q=Wc.next()){var ea=$jscomp.makeIterator(Q.value);Q=ea.next().value;ea=ea.next().value;if(Eb[Q])Eb[Q](Oc,ea)}})}},{key:"relayout",value:function(){}},
{key:"changeAttributeInSelectionOrMorph",value:function(cb,fb){var Eb=this.target,qc=Eb.selection;Eb.isLabel||qc.isEmpty()?Eb[cb]="function"===typeof fb?fb(Eb[cb]):fb:(Eb.undoManager.group(),Eb.changeStyleProperty(cb,function(gc){return"function"===typeof fb?fb(gc):fb}),Eb.undoManager.group())}},{key:"changeFont",value:function(cb){var fb=this,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress)return fb._last=cb,(Eb="custom..."===cb)?qc.yield($world.prompt("Enter font family name",
{requester:fb.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):qc.jumpTo(2);if(2!=qc.nextAddress&&(cb=qc.yieldResult,!cb))return qc.return();fb.changeAttributeInSelectionOrMorph("fontFamily",cb);qc.jumpToEnd()})}},{key:"setPadding",value:function(cb){this.target.padding=qb.Rectangle.inset(cb)}},{key:"setPaddingTop",value:function(cb){var fb=this.target.padding;this.target.padding=qb.Rectangle.inset(fb.left(),cb,fb.right(),fb.bottom())}},{key:"setPaddingLeft",value:function(cb){var fb=
this.target.padding;this.target.padding=qb.Rectangle.inset(cb,fb.top(),fb.right(),fb.bottom())}},{key:"setPaddingRight",value:function(cb){var fb=this.target.padding;this.target.padding=qb.Rectangle.inset(fb.left(),fb.top(),cb,fb.bottom())}},{key:"setPaddingBottom",value:function(cb){var fb=this.target.padding;this.target.padding=qb.Rectangle.inset(fb.left(),fb.top(),fb.right(),cb)}},{key:"setLineWrapping",value:function(cb){this.target.lineWrapping=cb}},{key:"changeFontWeight",value:function(cb){this.changeAttributeInSelectionOrMorph("fontWeight",
cb)}},{key:"changeTextAlign",value:function(cb){this.changeAttributeInSelectionOrMorph("textAlign",cb)}},{key:"changeFontColor",value:function(cb){this.changeAttributeInSelectionOrMorph("fontColor",cb)}},{key:"changeFontSize",value:function(cb){this.changeAttributeInSelectionOrMorph("fontSize",cb)}},{key:"changeFixedWidth",value:function(cb){this.target.fixedWidth=cb}},{key:"changeFixedHeight",value:function(cb){this.target.fixedHeight=cb}},{key:"changeLink",value:function(){var cb=this,fb,Eb,qc,
gc,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wc){if(1==Wc.nextAddress)return fb=cb.target,Eb=fb.selection,qc=fb.getStyleInRange(Eb),gc=qc.link,Wc.yield(cb.world().prompt("Set link",{input:gc||"https://"}),2);Oc=Wc.yieldResult;fb.undoManager.group();fb.setStyleInRange({link:Oc||void 0},Eb);fb.undoManager.group();cb.autoRemove&&cb.remove();Wc.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(cb){return"underline"===
cb?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(cb){return"italic"===cb?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(cb){return"bold"===cb||"700"===cb?"normal":"bold"})}},{key:"copyStyle",value:function(){var cb=this,fb=this.target,Eb=this.ui.applyStyleButton;fb=fb.selection.isEmpty()?fb.defaultTextStyle:fb.getStyleInRange(fb.selection);var qc=JSON.stringify(fb,
null,2);this.constructor.copiedStyle=fb;Eb.tooltip="paste style\n"+qc;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:qc},{type:"application/morphic-text-style",styleString:qc}]).then(function(){return cb.setStatusMessage("Copied style\n"+qc)}).catch(function(gc){return cb.showError(gc)})}},{key:"pasteStyle",value:function(){var cb=this,fb=this.target,Eb=this.constructor.copiedStyle;fb.selection.isEmpty()?Object.assign(fb,Eb):fb.selections.forEach(function(qc){return fb.addTextAttribute(cb.constructor.copiedStyle,
qc)});this.update()}},{key:"clearStyle",value:function(){var cb=this.target;cb.selections.forEach(function(fb){return cb.resetStyleInRange(fb)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var cb=this.defaultSpec,fb=this.uiSpec;cb=this.addMorph({name:"config panel",layout:new qb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(cb).map(function(Eb){var qc=
fb.rows.some(function(gc){return gc.some(function(Oc){return Oc===Eb})});return{type:"labeledcheckbox",label:Eb,name:Eb,checked:qc}})),[{layout:new qb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});cb.center=this.innerBounds().center();qb.connect(cb.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");qb.connect(cb.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",
value:function(){var cb=this.getSubmorphNamed("config panel");cb&&(cb.remove(),cb.submorphs.filter(function(fb){return"LabeledCheckBox"===fb.constructor.name}))}},{key:"configureCanceled",value:function(){var cb=this.getSubmorphNamed("config panel");cb&&cb.remove()}},{key:"close",value:function(){var cb=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(fb){return fb.targetObj===cb&&fb.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",
value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var cb=this.world();cb&&(cb=cb.focusedMorph)&&(cb.isLabel||cb.isText)&&!this.isAncestorOf(cb)&&this.target!==cb&&this.focusOn(cb,!1)}},{key:"onMouseUp",value:function(cb){var fb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Eb){if(1==Eb.nextAddress)return Eb.yield(fb.whenRendered(),2);fb.update();Eb.jumpToEnd()})}},{key:"attachToWorld",value:function(){qb.connect($world,"onMouseDown",
this,"updateTarget",{garbageCollect:!0})}}],[{key:"className",get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var cb=this;return Object.assign({fontSelection:function(fb,Eb){var qc=fb.fontFamily;
(fb=qc&&Eb.items.find(function(gc){return gc.value.toLowerCase()===qc.toLowerCase()}))?Eb.selection=fb.value:qc&&(Eb.items=Eb.items.concat({isListItem:!0,label:[qc,{fontFamily:qc}],value:qc}),Eb.selection=qb.arr.last(Eb.items));Eb.fit();Eb.width=Math.max(Eb.width,170)},fontWeightSelection:function(fb,Eb){Eb.selection="normal"==fb.fontWeight?"Medium":fb.fontWeight?qb.string.capitalize(fb.fontWeight):"Medium"},boldButton:function(fb,Eb){cb.toggleButton(Eb,"bold"===fb.fontWeight)},italicButton:function(fb,
Eb){cb.toggleButton(Eb,"italic"===fb.fontStyle)},underlineButton:function(fb,Eb){cb.toggleButton(Eb,"underline"===fb.textDecoration)},linkButton:function(fb,Eb){cb.toggleButton(Eb,!!fb.link)},colorPicker:function(fb,Eb){Eb.colorValue=fb.fontColor},fontSizeField:function(fb,Eb){Eb.number=fb.fontSize},fixedWidthControl:function(fb,Eb){fb.isText?Eb.enable():Eb.disable();Eb.checked=fb.fixedWidth},fixedHeightControl:function(fb,Eb){fb.isText?Eb.enable():Eb.disable();Eb.checked=fb.fixedHeight},lineWrappingControl:function(fb,
Eb){var qc=$jscomp.makeIterator(Eb.submorphs);Eb=qc.next().value;qc=qc.next().value;Eb.checked=!!fb.lineWrapping;qc.deactivated=!fb.lineWrapping;qc.deactivated?qc.opacity=.5:(qc.opacity=1,qc.selection=fb.lineWrapping)},paddingControl:function(fb,Eb){var qc=fb.padding,gc=qc.left();fb=qc.top();var Oc=qc.right();qc=qc.bottom();var Wc=!qb.arr.every([gc,fb,Oc,qc],function(Q){return Q==gc});Eb.get("multi value indicator").visible=Wc;qb.connect(Eb.get("multi value indicator"),"onMouseDown",Eb.get("padding field"),
"number",{converter:"() => left",varMapping:{left:gc}});Eb.get("padding field").number=gc;Eb.get("padding field").visible=!Wc;Eb.get("padding field top").number=fb;Eb.get("padding field left").number=gc;Eb.get("padding field right").number=Oc;Eb.get("padding field bottom").number=qc}},["left","center","right","block"].reduce(function(fb,Eb){fb[Eb+"Align"]=function(qc,gc){cb.toggleButton(gc,qc.textAlign==Eb)};return fb},{}))}},ui:{get:function(){var cb=this,fb={fontSelection:"font selection",fontWeightSelection:"font weight selection",
boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",
paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return qb.obj.extract(fb,qb.obj.keys(fb),function(Eb,qc){return cb.getSubmorphNamed(qc)})}}}}},{key:"openDebouncedFor",value:function(cb){var fb=cb.selection;if(fb.isEmpty()){var Eb=qb.cachedControls.get(cb);Eb&&(Eb.update(),Eb.alignAtTarget(),Eb.world()||cb.world().addMorph(Eb))}else qb.fun.debounceNamed(cb.id+"openRichTextControl",
600,function(){var qc=qb.cachedControls.get(cb);fb.isEmpty()?qc&&qc.removeFocus():(qc&&qc.world()||(qc=new qb.RichTextControl,qb.cachedControls.set(cb,qc)),cb.world().addMorph(qc),qc.focusOn(cb,!0),qc.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(cb){var fb=qb.cachedControls.get(cb);fb?fb.update():(fb=new qb.RichTextControl,qb.cachedControls.set(cb,fb),fb.focusOn(cb,!0),fb.alwaysTargetFocusedMorph());fb.alignAtTarget();fb.world()||cb.world().addMorph(fb);return fb}}],ub,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:624,end:16984})}(qb.Morph);qb.RichTextControl=bc;qb.RichTextControl=bc;qb.RichTextControl=bc;bc=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js");bc.SearchField=zc;var Ic=function(mb){var ub=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js"),Db=ub.hasOwnProperty("ProtoSearchField")&&
"function"===typeof ub.ProtoSearchField?ub.ProtoSearchField:ub.ProtoSearchField=function(cb){cb&&cb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ke(Db,mb,void 0,[{key:"className",get:function(){return"ProtoSearchField"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],ub,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoSearchField",version:"0.1.1-0"}}},{start:76,end:221})}(bc.SearchField);Ic=bc.ProtoSearchField;bc.default=Ic;var ra=lively.FreezerRuntime.recorderFor("ProtoTree/index.js");ra.Tree=Ec;ra.TreeData=Pb;bc=function(mb){var ub=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Db=ub.hasOwnProperty("TestTreeData")&&"function"===typeof ub.TestTreeData?ub.TestTreeData:ub.TestTreeData=function(cb){cb&&cb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ke(Db,mb,[{key:"display",value:function(cb){return cb.name}},{key:"isCollapsed",value:function(cb){return cb.isCollapsed}},{key:"collapse",value:function(cb,fb){cb.isCollapsed=fb}},{key:"getChildren",value:function(cb){return cb.isLeaf?null:cb.isCollapsed?[]:cb.children}},{key:"isLeaf",value:function(cb){return cb.isLeaf}}],[{key:"className",get:function(){return"TestTreeData"}}],ub,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:113,end:417})}(ra.TreeData);ra.TestTreeData=bc;ra.TestTreeData=bc;ra.TestTreeData=bc;bc=function(mb){var ub=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Db=ub.hasOwnProperty("ProtoTree")&&"function"===typeof ub.ProtoTree?ub.ProtoTree:ub.ProtoTree=function(cb){cb&&cb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ke(Db,mb,void 0,[{key:"className",get:function(){return"ProtoTree"}},{key:"properties",get:function(){return{treeData:{initialize:function(){this.treeData=new ra.TestTreeData({name:"root",isCollapsed:!1,isLeaf:!1,children:[{name:"child 1",isLeaf:!0},{name:"child 2",isLeaf:!1,isCollapsed:!0,children:[{name:"child 2 - 1",isLeaf:!0}]},{name:"child 3",isLeaf:!1,isCollapsed:!1,children:[{name:"child 3 - 1",isLeaf:!0},{name:"child 3 - 2",isLeaf:!0}]},{name:"child 4",isLeaf:!0}]})}},master:{initialize:function(){}}}}}],
ub,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:434,end:1297})}(ra.Tree);bc=ra.ProtoTree;ra.default=bc;bc=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js");bc.NumberWidget=Tc;Ic=function(mb){var ub=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js"),Db=ub.hasOwnProperty("ProtoNumberWidget")&&
"function"===typeof ub.ProtoNumberWidget?ub.ProtoNumberWidget:ub.ProtoNumberWidget=function(cb){cb&&cb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ke(Db,mb,void 0,[{key:"className",get:function(){return"ProtoNumberWidget"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],ub,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoNumberWidget",version:"0.1.1-0"}}},{start:76,end:224})}(bc.NumberWidget);Ic=bc.ProtoNumberWidget;bc.default=Ic;bc=lively.FreezerRuntime.recorderFor("FrameResizer/index.js");bc.Morph=yd;Ic=function(mb){var ub=lively.FreezerRuntime.recorderFor("FrameResizer/index.js"),Db=ub.hasOwnProperty("FrameResizer")&&"function"===typeof ub.FrameResizer?ub.FrameResizer:ub.FrameResizer=function(cb){cb&&cb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ke(Db,mb,[{key:"onDrag",value:function(cb){var fb=this.owner.left;cb=cb.positionIn(this).x;cb*="left"==this.direction?-1:1;this.owner.width+=cb;350>this.owner.width&&(cb+=350-this.owner.width,this.owner.width=350);this.owner.left="left"==this.direction?fb-cb:fb}}],[{key:"className",get:function(){return"FrameResizer"}},{key:"properties",get:function(){return{direction:{type:"Enum",values:["left","right"]}}}}],ub,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"FrameResizer",version:"0.1.1-24"}}},{start:56,end:840})}(bc.Morph);Ic=bc.FrameResizer;bc.default=Ic;var Fa=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Fa.Morph=yd;Fa.morph=Sc;Fa.layouts=Qb;Fa.string=Ab;Fa.connect=db;Fa.noUpdate=tc;Fa.InteractiveMorphSelector=ld;Fa.Color=md;Fa.pt=fe;bc=function(mb){var ub=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),Db=ub.hasOwnProperty("ShapeLayoutControl")&&
"function"===typeof ub.ShapeLayoutControl?ub.ShapeLayoutControl:ub.ShapeLayoutControl=function(cb){cb&&cb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ke(Db,mb,[{key:"focusOn",value:function(cb){this.target=cb;this.update(!1)}},{key:"setupConnections",value:function(){var cb=this.ui;Fa.connect(cb.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Fa.connect(cb.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");
Fa.connect(cb.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Fa.connect(cb.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var fb={},Eb=$jscomp.makeIterator(this.managedProps),
qc=Eb.next();!qc.done;fb={$jscomp$loop$prop$prop$2293:fb.$jscomp$loop$prop$prop$2293},qc=Eb.next()){var gc=$jscomp.makeIterator(qc.value),Oc=gc.next().value;qc=gc.next().value;gc.next().value||(fb.$jscomp$loop$prop$prop$2293=this.join(Oc),gc=cb[this.join(Oc,"control")],Fa.connect(gc,qc,this,"updateLayout",{updater:function(Wc){return function(Q,ea){Q(Wc.$jscomp$loop$prop$prop$2293,ea)}}(fb),varMapping:{prop:fb.$jscomp$loop$prop$prop$2293}}))}}},{key:"lower",value:function(cb){return cb.charAt(0).toLowerCase()+
cb.slice(1)}},{key:"join",value:function(cb,fb){return this.lower(Fa.string.camelCaseString(cb+(fb?" "+fb:"")))}},{key:"updateLayoutOfTarget",value:function(cb){cb=Fa.layouts[Fa.string.camelCaseString(cb)];this.target.layout=cb?new cb({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(cb,fb){this.target.layout[cb]=fb}},{key:"update",value:function(cb){var fb=this;this.target&&Fa.noUpdate(function(){for(var Eb=fb.ui,qc=fb.target.layout||{name:function(){return"No"}},gc=$jscomp.makeIterator(fb.managedProps),
Oc=gc.next();!Oc.done;Oc=gc.next()){var Wc=$jscomp.makeIterator(Oc.value);Oc=Wc.next().value;var Q=Wc.next().value;Wc.next();Wc=Eb[fb.join(Oc,"control")];var ea=Eb[fb.join(Oc,"label")];if(Q)if("type"===Oc)Wc.selection=qc.name()+" Layout";else{var Ia=qc[fb.join(Oc)],Ra="undefined"!==typeof Ia;if(Ra){switch(Oc){case "align":Wc.items=qc.possibleAlignValues;break;case "direction":Wc.items=qc.possibleDirectionValues;break;case "axis":Wc.items=qc.possibleAxisValues}Wc[Q]=Ia}ea.isLayoutable=ea.visible=Ra}}fb.showGridLayoutControl("Grid"===
qc.name());fb.showProportionalControl("Proportional"===qc.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(cb){var fb={};this.target.layout.changeSettingsFor(cb.submorph,(fb[cb.axis]=cb.policy,fb),!0)}},{key:"onSubmorphSettingsDragStart",value:function(cb){var fb=this;cb.stop();var Eb=this.target.layout,qc=Eb.settingsFor(this.selectedSubmorph),gc=[],Oc;for(Oc in qc)gc=[].concat($jscomp.arrayFromIterable(gc),[Oc+": ",{fontWeight:"bold"},qc[Oc]+" ",{}]);var Wc=Fa.morph({type:"label",
fontColor:Fa.Color.white,value:gc,fill:Fa.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Wc.wantsToBeDroppedOn=function(Q){return Eb.layoutableSubmorphs.includes(Q)};Wc.onBeingDroppedOn=function(Q,ea){Wc.remove();if(Q=Eb.layoutableSubmorphs.includes(ea)?ea:cb.world.morphsContainingPoint(cb.hand.position).find(function(Ia){return Eb.layoutableSubmorphs.includes(Ia)}))fb.updateSubmorphProportionalLayoutSettings({policy:qc.x,axis:"x",submorph:Q}),fb.updateSubmorphProportionalLayoutSettings({policy:qc.y,
axis:"y",submorph:Q}),Q.show(),$world.setStatusMessage("layout settings applied")};cb.hand.grab(Wc);Wc.moveBy(Fa.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var cb=this,fb,Eb,qc,gc,Oc,Wc,Q,ea,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ra){switch(Ra.nextAddress){case 1:return fb=cb.target.layout.layoutableSubmorphs,cb.manageFocus=!0,cb.env.eventDispatcher.isKeyPressed("Shift")?(qc=fb.map(function(cc){return{isListItem:!0,string:String(cc),value:cc}}),
Ra.yield($world.listPrompt("Select morph",qc,{onSelection:function(cc){return cc.show()}}),5)):Ra.yield(Fa.InteractiveMorphSelector.selectMorph(cb.world(),cb,function(cc){return fb.includes(cc)}),4);case 4:Eb=Ra.yieldResult;Ra.jumpTo(3);break;case 5:gc=Ra.yieldResult,Oc=$jscomp.makeIterator(gc.selected),Eb=Oc.next().value;case 3:cb.manageFocus=!1;cb.selectedSubmorph=Eb;if(!Eb)return Ra.return();Wc=cb.ui;Q=Wc.xAxisPolicyControl;ea=Wc.yAxisPolicyControl;Ia=cb.target.layout.settingsFor(Eb);Fa.noUpdate(function(){Q.selection=
Ia.x;ea.selection=Ia.y});Ra.jumpToEnd()}})}},{key:"showProportionalControl",value:function(cb){var fb=this.ui;[fb.submorphSettingsControl,fb.dragmeControl,fb.xAxisPolicyControl,fb.xAxisPolicyLabel,fb.yAxisPolicyControl,fb.yAxisPolicyLabel].forEach(function(Eb){Eb.isLayoutable=cb;Eb.visible=cb})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(cb){var fb=this.ui.configureGridLayoutControl;fb.visible=fb.isLayoutable=cb}}],
[{key:"className",get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",
!1,!0]]}},ui:{readOnly:!0,get:function(){for(var cb={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},fb=$jscomp.makeIterator(this.managedProps),Eb=fb.next();!Eb.done;Eb=fb.next()){var qc=$jscomp.makeIterator(Eb.value).next().value;Eb=qc+" label";qc+=" control";cb[this.join(Eb)]=this.getSubmorphNamed(Eb);cb[this.join(qc)]=this.getSubmorphNamed(qc)}return cb}}}}}],ub,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Fa.Morph);bc=Fa.ShapeLayoutControl;Fa.default=bc}}});