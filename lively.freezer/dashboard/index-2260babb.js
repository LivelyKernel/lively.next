System.register(["./__root_module__-db735625.js"],function(db){var Zb,lc,Uc,Bc,Vd,Od,je,Bd,jd,zd,ge,We,kf,bf,Hd,Ae,uc,wd,ce,Gd,pe,Te,rc,bd,he,cd,ie,ac,Db,Tc,Nc,wc,Vc,hb,zc,Ub,Jc,Wc,Ad,Xd;return{setters:[function(xc){Zb=xc.f;lc=xc.p;Uc=xc.C;Bc=xc.m;Vd=xc._;Od=xc.a;je=xc.c;Bd=xc.R;jd=xc.a2;zd=xc.e;ge=xc.V;We=xc.I;kf=xc.M;bf=xc.ax;Hd=xc.d;Ae=xc.o;uc=xc.a1;wd=xc.i;ce=xc.S;Gd=xc.ah;pe=xc.O;Te=xc.ae;rc=xc.k;bd=xc.ac;he=xc.P;cd=xc.ay;ie=xc.n;ac=xc.b;Db=xc.g;Tc=xc.az;Nc=xc.aA;wc=xc.aB;Vc=xc.h;hb=xc.aC;
zc=xc.Y;Ub=xc.ad;Jc=xc.aD;Wc=xc.aE;Ad=xc.B;Xd=xc.j}],execute:function(){function xc(ic){(ic=ua.cachedGuideLines.get(ic))&&ic.forEach(function(Wb){return Wb.remove()})}function Pc(ic,Wb,$a,ma,Ta){Wb=void 0===Wb?!0:Wb;$a=void 0===$a?!0:$a;ma=void 0===ma?10:ma;Ta=void 0===Ta?100:Ta;if(Wb||$a){var qb=ic.owner,ec=qb.world();qb=qb.getGlobalTransform();var Ic=ic.owner.submorphs.filter(function(Sa){return Sa!==ic&&!Sa.isEpiMorph&&Sa.visible&&Sa.reactsToPointer}),ud=ua.findAlignedMorphs(ic,Ic,ma,Ta,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));Ta=[];var gd=0,me=0,ue=0,Uf=0;qb.e-=ec.scroll.x;qb.f-=ec.scroll.y;if(ud){ud=$jscomp.makeIterator(ud);for(var zf=ud.next();!zf.done;zf=ud.next()){zf=$jscomp.makeIterator(zf.value);zf.next();var qf=zf.next().value;zf=qf.vertical;qf=$jscomp.makeIterator(qf.horizontal);for(var C=qf.next();!C.done;C=qf.next()){C=C.value;var Df=C.edgeAVal,Bf=C.refPointsA,Pe=C.refPointsB,Tf=C.edgeBVal,fg=Math.ceil(ma-C.delta),kg=Math.min(Bf.top,Pe.top);Bf=Math.max(Bf.bottom,
Pe.bottom);C.maxDist>ma&&(fg-=ma/2);gd<fg&&(gd=fg,ue=Tf-Df);Ta.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ua.guideWidth,start:qb.transformPoint(ua.pt(Tf,kg)),end:qb.transformPoint(ua.pt(Tf,Bf)),fill:ua.guideColor,guideType:"h",priority:fg})}zf=$jscomp.makeIterator(zf);for(qf=zf.next();!qf.done;qf=zf.next())qf=qf.value,C=qf.edgeAVal,kg=qf.refPointsA,Bf=qf.refPointsB,Df=qf.edgeBVal,Tf=Math.ceil(ma-qf.delta),fg=Math.min(kg.left,Bf.left),kg=Math.max(kg.right,Bf.right),qf.maxDist>ma&&(Tf-=
ma/2),me<Tf&&Math.abs(Df-C)<=ma&&(me=Tf,Uf=Df-C),Ta.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ua.guideWidth,start:qb.transformPoint(ua.pt(fg,Df)),end:qb.transformPoint(ua.pt(kg,Df)),fill:ua.guideColor,guideType:"v",priority:Tf})}}if(!gd||!me){Ic=[ic].concat($jscomp.arrayFromIterable(Ic));C=ua.computeClosestMorphs(Ic);qf=C[0];Ic=qf.l;ud=qf.r;zf=qf.t;qf=qf.b;var wg;if(Ic||ud||zf||qf){var kh=(Ic||ud||zf||qf).refPointsA;for(Df=1;Df<C.length&&(Bf=C[Df],Tf=Bf.l,fg=Bf.r,kg=Bf.t,Bf=Bf.b,gd||
(Ic&&Tf&&Ic.index!==Tf.index&&Math.abs(Tf.dist-Ic.dist)<=ma?wg=Object.assign({neighbor:Df,direction:"left"},Tf):ud&&fg&&ud!==fg.index&&Math.abs(fg.dist-ud.dist)<=ma&&(wg=Object.assign({neighbor:Df,direction:"right"},fg))),me||(zf&&kg&&zf.index!==kg.index&&Math.abs(kg.dist-zf.dist)<=ma?wg=Object.assign({neighbor:Df,direction:"top"},kg):qf&&Bf&&qf.index!==Bf.index&&Math.abs(Bf.dist-qf.dist)<=ma&&(wg=Object.assign({neighbor:Df,direction:"bottom"},Bf))),!wg);Df++);}if(wg){var rd=wg;ma=rd.direction;kg=
rd.dist;var cf=kh.left;Pe=kh.top;var Bg=kh.bottom,Eh=kh.right,Kd=kh.width,lb=kh.height;Bf=rd.refPointsA;kh=Bf.left;C=Bf.top;Df=Bf.bottom;Tf=Bf.right;fg=Bf.width;Bf=Bf.height;var cb=rd.refPointsB,Cc=cb.left;rd=cb.top;var La=cb.bottom;cb=cb.right;Eh="left"===ma?cf:"right"===ma?Eh:cf+Kd/2;Bg="bottom"===ma?Bg:"top"===ma?Pe:Pe+lb/2;cf="left"===ma?Eh-kg:"right"===ma?Eh+kg:cf+Kd/2;kg="bottom"===ma?Bg+kg:"top"===ma?Bg-kg:Pe+lb/2;Pe="left"===ma?cb:"right"===ma?Cc:kh+fg/2;Kd="bottom"===ma?rd:"top"===ma?La:
C+Bf/2;!$a||gd||"right"!==ma&&"left"!==ma||(gd=10,ue=(wg.dist-(ud||Ic).dist)*("right"===ma?-1:1),Eh+=ue,cf+=ue);!$a||me||"top"!==ma&&"bottom"!==ma||(me=10,Uf=((zf||qf).dist-wg.dist)*("top"===ma?-1:1),Bg+=Uf,kg+=Uf);Ta.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:qb.transformPoint(ua.pt("left"===ma?kh:"right"===ma?Tf:kh+fg/2,"bottom"===ma?Df:"top"===ma?C:C+Bf/2)),end:qb.transformPoint(ua.pt(Pe,Kd)),fill:ua.Color.orange,height:ua.guideWidth,guideType:ma,priority:10},{type:"line",epiMorph:!0,
hasFixedPosition:!0,start:qb.transformPoint(ua.pt(Eh,Bg)),end:qb.transformPoint(ua.pt(cf,kg)),fill:ua.Color.orange,height:ua.guideWidth,guideType:ma,priority:10})}}$a&&(ue||Uf)&&ic.moveBy(ua.pt(ue,Uf));if(Wb){Ta=Ta.filter(function(Sa){var Ya=Sa.guideType;Sa=Sa.priority;return"h"===Ya?Sa===gd:"v"===Ya?Sa===me:!0});(Wb=ua.cachedGuideLines.get(ic))||ua.cachedGuideLines.set(ic,Wb=[]);for($a=0;$a<Ta.length;$a++)wg=void 0,Wb[$a]?wg=Object.assign(Wb[$a],Ta[$a]):(wg=ua.morph(Ta[$a]),Wb.push(wg)),wg.owner||
ec.addMorph(wg);Wb.slice($a).forEach(function(Sa){return Sa.remove()});ua.fun.debounceNamed(ic.id+"-drag-guides-cleanup",1300,function(){var Sa=ua.cachedGuideLines.get(ic);Sa&&Sa.forEach(function(Ya){return Ya.remove()})})()}}}function sc(ic,Wb,$a,ma,Ta,qb){$a=void 0===$a?!0:$a;ma=void 0===ma?!0:ma;Ta=void 0===Ta?5:Ta;qb=void 0===qb?100:qb;if($a||ma){var ec=ic.owner,Ic=ec.world(),ud=ec.getGlobalTransform(),gd=ic.owner.submorphs.filter(function(Bg){return Bg!==ic&&!Bg.isEpiMorph&&Bg.visible&&Bg.reactsToPointer});
ec=(Wb.includes("left")||Wb.includes("right")?"x":"")+(Wb.includes("top")||Wb.includes("bottom")?"y":"");var me=ua.findMorphsWithSimilarWidthOrHeight(ic,ec,gd,Ta,qb),ue=-Infinity,Uf=-Infinity,zf=0,qf=0,C=0,Df=0,Bf=0,Pe=0;ec=[];ud.e-=Ic.scroll.x;ud.f-=Ic.scroll.y;if(me){me=$jscomp.makeIterator(me);for(var Tf=me.next();!Tf.done;Tf=me.next()){Tf=$jscomp.makeIterator(Tf.value);Tf.next();var fg=Tf.next().value;Tf=fg.similarIn;var kg=fg.delta,wg=fg.refPointsA,kh=fg.refPointsB;fg=Ta-kg+(qb-fg.minDist);"width"===
Tf?ue<fg&&(ue=fg,Wb.includes("left")&&(qf=-kg),Wb.includes("right")&&(zf=kg)):Uf<fg&&(Uf=fg,Wb.includes("top")&&(C=-kg),Wb.includes("bottom")&&(Df=kg));kg={type:"line",epiMorph:!0,hasFixedPosition:!0,height:ua.guideWidth,fill:ua.guideColor,guideType:Tf,priority:fg,start:ud.transformPoint("width"===Tf?ua.pt(wg.left,wg.top+wg.height/2):ua.pt(wg.left+wg.width/2,wg.top)),end:ud.transformPoint("width"===Tf?ua.pt(wg.right,wg.top+wg.height/2):ua.pt(wg.left+wg.width/2,wg.bottom))};Tf=Object.assign({},kg,
{start:ud.transformPoint("width"===Tf?ua.pt(kh.left,kh.top+kh.height/2):ua.pt(kh.left+kh.width/2,kh.top)),end:ud.transformPoint("width"===Tf?ua.pt(kh.right,kh.top+kh.height/2):ua.pt(kh.left+kh.width/2,kh.bottom))});ec.push(kg,Tf)}}if(qb=ua.findAlignedMorphs(ic,gd,Ta,qb,Wb,void 0))for(qb=$jscomp.makeIterator(qb),gd=qb.next();!gd.done;gd=qb.next()){gd=$jscomp.makeIterator(gd.value);gd.next();me=gd.next().value;gd=me.vertical;me=$jscomp.makeIterator(me.horizontal);for(Tf=me.next();!Tf.done;Tf=me.next()){Tf=
Tf.value;kh=Tf.edgeAVal;var rd=Tf.refPointsA,cf=Tf.refPointsB;kg=Tf.edgeBVal;wg=Math.ceil(Ta-Tf.delta);fg=Math.min(rd.top,cf.top);rd=Math.max(rd.bottom,cf.bottom);Tf.maxDist>Ta&&(wg-=Ta/2);Bf<wg&&(Bf=wg,Wb.includes("left")&&(qf=-(kg-kh)),Wb.includes("right")&&(zf=+(kg-kh)));ec.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ua.guideWidth,start:ud.transformPoint(ua.pt(kg,fg)),end:ud.transformPoint(ua.pt(kg,rd)),fill:ua.guideColor,guideType:"h",priority:wg})}gd=$jscomp.makeIterator(gd);for(me=
gd.next();!me.done;me=gd.next())me=me.value,Tf=me.edgeAVal,fg=me.refPointsA,rd=me.refPointsB,kh=me.edgeBVal,kg=Math.ceil(Ta-me.delta),wg=Math.min(fg.left,rd.left),fg=Math.max(fg.right,rd.right),me.maxDist>Ta&&(kg-=Ta/2),Pe<kg&&Math.abs(kh-Tf)<=Ta&&(Pe=kg,Wb.includes("top")&&(C=kh-Tf),Wb.includes("bottom")&&(Df=kh-Tf)),ec.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ua.guideWidth,start:ud.transformPoint(ua.pt(wg,kh)),end:ud.transformPoint(ua.pt(fg,kh)),fill:ua.guideColor,guideType:"v",
priority:kg})}ma&&(qf&&(ic.left+=qf,ic.right-=qf),C&&(ic.top+=C,ic.bottom-=C),zf&&(ic.width+=zf),Df&&(ic.height+=Df));if($a){ec=ec.filter(function(Bg){var Eh=Bg.guideType;Bg=Bg.priority;return"width"===Eh?Bg===ue:"height"===Eh?Bg===Uf:"v"===Eh?Bg===Pe:"h"===Eh?Bg===Bf:!1});(Wb=ua.cachedGuideLines.get(ic))||ua.cachedGuideLines.set(ic,Wb=[]);for($a=0;$a<ec.length;$a++)ma=void 0,Wb[$a]?ma=Object.assign(Wb[$a],ec[$a]):(ma=ua.morph(ec[$a]),Wb.push(ma)),ma.owner||Ic.addMorph(ma);Wb.slice($a).forEach(function(Bg){return Bg.remove()});
ua.fun.debounceNamed(ic.id+"-drag-guides-cleanup",1300,function(){var Bg=ua.cachedGuideLines.get(ic);Bg&&Bg.forEach(function(Eh){return Eh.remove()})})()}}}function Za(ic,Wb){Wb=void 0===Wb?!1:Wb;var $a=Wa.MorphicEnv.default().world;if(null===ic||void 0===ic)ic=String(ic);if(ic.isMorph)return Wa.showRect(ic.world(),ic.globalBounds().translatedBy($a.scroll.negated()),Wb);if(ic.isPoint)return Wa.showRect($a,new Wa.Rectangle(ic.x-5,ic.y-5,10,10));if(ic.isLine)return Wa.showLine($a,ic);if(ic.isRectangle)return Wa.showRect($a,
ic);if("undefined"!==typeof Wa.Element&&ic instanceof Wa.Element)return Wa.showRect($a,Wa.Rectangle.fromElement(ic));if("number"===typeof ic||"symbol"===typeof ic||"boolean"===typeof ic||"undefined"!==typeof Wa.Node&&ic instanceof Wa.Node||ic instanceof RegExp)ic=String(ic);"object"===typeof ic&&(ic=Wa.obj.inspect(ic,{maxDepth:1}));return"string"===typeof ic&&1===arguments.length?$a.setStatusMessage(ic):$a.setStatusMessage(Wa.string.formatFromArray(Array.from(arguments)))}function Pa(ic,Wb,$a){$a=
void 0===$a?3E3:$a;var ma,Ta,qb,ec,Ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ud){if(1==ud.nextAddress){if(!(ic&&ic.world()&&Wb&&Wb.world()))return ud.return(null);ma=ic.owner.worldPoint(ic.center);Ta=Wb.owner.worldPoint(Wb.center);qb=ma.lineTo(Ta).sampleN(2)[1];ec={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Wa.Color.red,fill:Wa.Color.red,cx:5,cy:5,r:4}]};Ic=$world.addMorph(new Wa.Path({position:qb,
renderOnGPU:!0,vertices:[Wa.pt(0),Wa.pt(0)],borderWidth:2,startMarker:ec,endMarker:ec,borderColor:Wa.Color.red}));return ud.yield(Ic.whenRendered(),2)}if(3!=ud.nextAddress)return ud.yield(Ic.animate({opacity:1,customTween:function(gd){var me=Ic.center;Ic.vertices=[Wa.pt(0).interpolate(gd,ma.subPt(qb)),Wa.pt(0).interpolate(gd,Ta.subPt(qb))];Ic.center=me},duration:400}),3);$a&&setTimeout(function(){return Ic.fadeOut()},$a);return ud.return(Ic)})}db({a:Pc,e:Pa,r:xc,s:Za});var ua=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
ua.removeSnapToGuidesOf=xc;ua.showAndSnapToGuides=Pc;ua.showAndSnapToResizeGuides=sc;ua.computeRefPoints=function(ic){var Wb=ic.x,$a=ic.y,ma=ic.width;ic=ic.height;return{left:Wb,top:$a,hCenter:Wb+ma/2,vCenter:$a+ic/2,right:Wb+ma,bottom:$a+ic,width:ma,height:ic}};ua.findEdgesInAlignment=function(ic,Wb,$a,ma,Ta,qb,ec,Ic,ud,gd){$a=void 0===$a?15:$a;qb=void 0===qb?0:qb;ec=void 0===ec?0:ec;Ic=void 0===Ic?0:Ic;ud=void 0===ud?0:ud;gd=void 0===gd?0:gd;for(var me=[],ue=[],Uf=0;Uf<ua.edges.length;Uf++){var zf=
$jscomp.makeIterator(ua.edges[Uf]),qf=zf.next().value,C=zf.next().value;zf=zf.next().value;var Df=ic[C],Bf=Wb[zf],Pe=Math.max(Df,Bf)-Math.min(Df,Bf);Pe>$a||!(ma&&!ma.includes(C)||Ta&&!Ta.includes(zf))&&("vertical"===qf?me:ue).push({delta:Pe,edgeA:C,edgeB:zf,edgeAVal:Df,edgeBVal:Bf,refPointsA:ic,refPointsB:Wb,distLeft:qb,distTop:ec,distRight:Ic,distBottom:ud,maxDist:gd})}return me.length||ue.length?{vertical:me,horizontal:ue}:null};ua.findAlignedMorphs=function(ic,Wb,$a,ma,Ta,qb){$a=void 0===$a?15:
$a;ma=void 0===ma?Infinity:ma;for(var ec,Ic=ua.computeRefPoints(ic.bounds()),ud=0;ud<Wb.length;ud++){var gd=Wb[ud];if(gd!==ic){var me=ua.computeRefPoints(gd.bounds()),ue=Math.max(0,Ic.left-me.right),Uf=Math.max(0,me.left-Ic.right),zf=Math.max(0,Ic.top-me.bottom),qf=Math.max(0,me.top-Ic.bottom);Math.max(qf,zf,Uf,ue)>ma||!(me=ua.findEdgesInAlignment(Ic,me,$a,Ta,qb,ue,zf,Uf,qf,Math.max(qf,zf,Uf,ue)))||(ec||(ec=new Map),ec.set(gd,me))}}ic=ic.owner;Wb=ua.computeRefPoints(ic.innerBounds());if($a=ua.findEdgesInAlignment(Ic,
Wb,$a))ec||(ec=new Map),ec.set(ic,$a);return ec};ua.findMorphsWithSimilarWidthOrHeight=function(ic,Wb,$a,ma,Ta){ma=void 0===ma?15:ma;Ta=void 0===Ta?Infinity:Ta;for(var qb,ec=ua.computeRefPoints(ic.bounds()),Ic=0;Ic<$a.length;Ic++){var ud=$a[Ic];if(ud!==ic){var gd=ua.computeRefPoints(ud.bounds()),me=Math.max(0,ec.left-gd.right),ue=Math.max(0,gd.left-ec.right),Uf=Math.max(0,ec.top-gd.bottom),zf=Math.max(0,gd.top-ec.bottom),qf=Math.min(zf,Uf,ue,me),C=Math.max(zf,Uf,ue,me);if(!(Math.max(zf,Uf,ue,me)>
Ta)){ue=ec;me=ue.width;ue=ue.height;zf=gd;Uf=zf.width;zf=zf.height;var Df=Uf-me,Bf=zf-ue;("x"===Wb||"xy"===Wb)&&Math.abs(Df)<=ma&&(qb||(qb=new Map),qb.set(ud,{similarIn:"width",minDist:qf,maxDist:C,refPointsA:ec,refPointsB:gd,valA:me,valB:Uf,delta:Df}));("y"===Wb||"xy"===Wb)&&Math.abs(Bf)<=ma&&(qb||(qb=new Map),qb.set(ud,{similarIn:"height",minDist:qf,maxDist:C,refPointsA:ec,refPointsB:gd,valA:ue,valB:zf,delta:Bf}))}}}return qb};ua.closest=function(ic,Wb,$a,ma,Ta,qb,ec,Ic){Ic=void 0===Ic?!0:Ic;var ud=
ma[ic],gd=Ta[ic],me=qb[ic];Wb=ec[ic];for(var ue,Uf,zf,qf,C=0;C<Ta.length;C++)ic===C||ud<Ta[C]||ue&&Ta[ue.index]>=Ta[C]||Ic&&ec[ic]<qb[C]||qb[ic]>ec[C]||(ue={index:C,dist:ud-Ta[C],refPointsA:$a[ic],refPointsB:$a[C]});for(ud=0;ud<ma.length;ud++)ic===ud||gd>ma[ud]||Uf&&ma[Uf.index]<=ma[ud]||Ic&&ec[ic]<qb[ud]||qb[ic]>ec[ud]||(Uf={index:ud,dist:ma[ud]-gd,refPointsA:$a[ic],refPointsB:$a[ud]});for(gd=0;gd<ec.length;gd++)ic===gd||me<ec[gd]||zf&&ec[zf.index]>=ec[gd]||Ic&&ma[ic]>Ta[gd]||Ta[ic]<ma[gd]||(zf=
{index:gd,dist:me-ec[gd],refPointsA:$a[ic],refPointsB:$a[gd]});for(ec=0;ec<qb.length;ec++)ic===ec||Wb>qb[ec]||qf&&qb[qf.index]<=qb[ec]||Ic&&ma[ic]>Ta[ec]||Ta[ic]<ma[ec]||(qf={index:ec,dist:qb[ec]-Wb,refPointsA:$a[ic],refPointsB:$a[ec]});return{l:ue,r:Uf,t:zf,b:qf}};ua.computeClosestMorphs=function(ic){for(var Wb=[],$a=[],ma=[],Ta=[],qb=[],ec=[],Ic=0;Ic<ic.length;Ic++){var ud=ua.computeRefPoints(ic[Ic].bounds());qb.push(ud);var gd=ud.right,me=ud.top,ue=ud.bottom;Wb.push(ud.left);$a.push(gd);ma.push(me);
Ta.push(ue)}for(Ic=0;Ic<ic.length;Ic++)ec.push(ua.closest(Ic,ic,qb,Wb,$a,ma,Ta));return ec};ua.fun=Zb;ua.pt=lc;ua.Color=Uc;ua.morph=Bc;ua.cachedGuideLines=new WeakMap;ua.guideWidth=1;ua.guideColor=ua.Color.orange.lighter();ua.removeSnapToGuidesOf=xc;ua.removeSnapToGuidesOf=xc;ua.showAndSnapToGuides=Pc;ua.showAndSnapToGuides=Pc;ua.showAndSnapToResizeGuides=sc;ua.showAndSnapToResizeGuides=sc;ua.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top",
"vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom","vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var Na=lively.FreezerRuntime.recorderFor("lively.collab/index.js");Na.CommentGroupMorph=void 0;Na.CommentGroupMorph=void 0;Na.CommentMorph=void 0;Na.CommentMorph=void 0;Na.CommentIndicator=void 0;Na.CommentIndicator=
void 0;Na.CommentBrowser=void 0;Na.CommentBrowser=void 0;Na.Comment=void 0;Na.Comment=void 0;Na.Badge=void 0;Na.Badge=void 0;var Wa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Wa.show=Za;Wa.showRect=function(ic,Wb,$a){var ma=Wa.BoundsMarker.highlightBounds(Wb);return $a?Wa.showInLoop(ic,ma,Wb):Wa.showThenHide(ic,ma)};Wa.showInLoop=function(ic,Wb,$a){var ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ta){switch(Ta.nextAddress){case 1:return Wa.showThenHide(ic,Wb,!1),
Ta.yield(Wa.promise.delay(300),2);case 2:ma=!1,Wa.once(ic,"onMouseDown",function(){return ma=!0}),Wa.once(ic,"hideMarkers",function(){return ma=!0});case 3:if(ma){Ta.jumpTo(4);break}return Ta.yield(Wb.retract($a),3);case 4:Wb.fadeOut(2E3),Ta.jumpToEnd()}})};Wa.showThenHide=function(ic,Wb,$a){$a=void 0===$a?3:$a;if(ic){var ma=Array.isArray(Wb)?Wb:[Wb];ma.forEach(function(Ta){return ic.addMorph(Ta)});$a&&setTimeout(function(){return ma.forEach(function(Ta){return Ta.fadeOut(2E3)})},1E3*$a);return Wb}};
Wa.showLine=function(ic,Wb,$a){$a=void 0===$a?3E3:$a;var ma=Wb.start;Wb=Wb.end.subPt(ma);var Ta=ic.addMorph({position:ma,rotation:Wb.theta(),border:{width:1,color:Wa.Color.red},width:Wb.fastR(),height:0});$a&&setTimeout(function(){return Ta.fadeOut()},$a);return Ta};Wa.showConnector=Pa;Wa.obj=Vd;Wa.promise=Od;Wa.string=je;Wa.pt=lc;Wa.Color=Uc;Wa.Rectangle=Bd;Wa.rect=jd;Wa.morph=Bc;Wa.easings=zd;Wa.Path=ge;Wa.Icon=We;Wa.Morph=kf;Wa.MorphicEnv=bf;Wa.connect=Hd;Wa.once=Ae;Wa.disconnect=uc;Wa.show=Za;
Wa.show=Za;(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),$a=Wb.hasOwnProperty("BoundsMarker")&&"function"===typeof Wb.BoundsMarker?Wb.BoundsMarker:Wb.BoundsMarker=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:Symbol.for("lively-instance-initialize"),value:function(){wd._get(Object.getPrototypeOf($a.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
{borderWidth:0,fill:Wa.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(ma){ma=ma.insetBy(-2);ma=Math.min(ma.width,ma.height);return Math.max(4,Math.floor(10>ma/10?ma/2-5:ma/10))}},{key:"createMarkerEdge",value:function(){return Wa.morph({fill:Wa.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var ma=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),
Ta=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),qb=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),ec=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Ic=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),ud=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),gd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),me=this.bottomLeftV||(this.bottomLeftV=
this.addMorph(this.createMarkerEdge()));return[ma,Ta,qb,ec,Ic,ud,gd,me]}},{key:"alignWithMorph",value:function(ma){return this.alignWithBounds(ma.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(ma){this.alignWithRect(ma.insetBy(-20));return this.alignWithRect(ma,!0)}},{key:"alignWithRect",value:function(ma,Ta){var qb=this.ensureMarkerCorners(),ec=this.markerLength(ma),Ic=[ma.topLeft().addXY(0,0).extent(Wa.pt(ec,5)),ma.topLeft().addXY(0,0).extent(Wa.pt(5,
ec)),ma.topRight().addXY(-ec,0).extent(Wa.pt(ec,5)),ma.topRight().addXY(-5,0).extent(Wa.pt(5,ec)),ma.bottomRight().addXY(-5,-ec).extent(Wa.pt(5,ec)),ma.bottomRight().addXY(-ec,-5).extent(Wa.pt(ec,5)),ma.bottomLeft().addXY(0,-5).extent(Wa.pt(ec,5)),ma.bottomLeft().addXY(0,-ec).extent(Wa.pt(5,ec))];qb.forEach(function(ud,gd){return ud.setBounds(Ic[gd])});Ta&&(this.adjustOrigin(ma.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(ma){var Ta=
this,qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){if(1==ec.nextAddress)return ec.yield(Ta.animate({scale:Math.max(30/ma.width,1.05)}),2);qb=Ta.center;return ec.yield(Ta.animate({center:qb,scale:1,duration:300,easing:Wa.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(ma){return(new this).alignWithMorph(ma)}},{key:"highlightBounds",value:function(ma){return(new this).alignWithBounds(ma)}}],
Wb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2323,end:6E3})})(Wa.Morph);Na=db("S",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),$a=Wb.hasOwnProperty("StatusMessage")&&"function"===typeof Wb.StatusMessage?Wb.StatusMessage:Wb.StatusMessage=function(ma){ma&&
ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"relayout",value:function(){this.title=Wa.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(ma,Ta){this.message=ma;this.color=Ta}},{key:"slideTo",value:function(ma){var Ta=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==
qb.nextAddress)return Ta.sliding=Ta.animate({position:ma,duration:500}),qb.yield(Ta.sliding,2);Ta.sliding=!1;qb.jumpToEnd()})}},{key:"expand",value:function(){var ma=this,Ta,qb,ec,Ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ud){if(1==ud.nextAddress)return ma.expandable?ma.sliding?ud.yield(ma.sliding,2):ud.jumpTo(2):ud.return();Ta=ma.world();if(!Ta||ma.isMaximized)return ud.return();ma.isMaximized=!0;ma.stayOpen=!0;qb=ma.getSubmorphNamed("message text");qb.lineWrapping=!1;Object.assign(qb,
{clipMode:"auto",fixedWidth:!0,selectable:!0});ma.expandedContent&&(qb.value=ma.expandedContent);qb.fit();ec=qb.textBounds().extent();Ic=Ta.visibleBounds();ec.y>Ic.extent().y&&(ec.y=Ic.extent().y-20);ec.x>Ic.extent().x&&(ec.x=Ic.extent().x-20);ec=ma.extent.maxPt(ec);ma.animate({extent:ec,center:Ic.center(),duration:200});ma.relayout();ma.focus();ud.jumpToEnd()})}},{key:"fit",value:function(){var ma=this.getSubmorphNamed("message text");ma&&(this.extent=Wa.pt(100,35).maxPt(ma.textBounds().extent()),
this.relayout())}},{key:"focus",value:function(){var ma=this.getSubmorphNamed("message text");ma&&ma.focus()}},{key:"onMouseUp",value:function(ma){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Wa.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},
master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(ma){this.setProperty("message",ma);var Ta=this.getSubmorphNamed("message text");if(Ta){Ta.value=ma;var qb=Ta.documentEndPosition;qb.row>this.maxLines&&(Ta.replace({start:{row:this.maxLines,column:0},end:qb},"...\n"),this.expandedContent||(this.expandedContent=ma));qb=Ta.documentEndPosition;0!==qb.column&&Ta.insertText("\n",qb)}}},title:{isStyleProp:!0,derived:!0,set:function(ma){this.getSubmorphNamed("message title").value=
ma},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(ma){this.get("message icon").fontColor=ma;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=ma)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Wa.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},
{name:"message title",type:"label"},{name:"close button",type:"button"}];Wa.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Wa.connect(this,"extent",this,"relayout")}}}}}],Wb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(Wa.Morph));Wa.StatusMessage=
Na;Wa.StatusMessage=Na;Wa.StatusMessage=Na;var Vb=db("b",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),$a=Wb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Wb.StatusMessageForMorph?Wb.StatusMessageForMorph:Wb.StatusMessageForMorph=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"alignAtBottomOf",value:function(ma){var Ta=this.world();Ta&&(this.bringToFront(),
this.fit(),this.width=ma.bounds().width,this.relayout(),ma.world()&&(this.position=ma.owner.worldPoint(ma.bounds().bottomLeft())),ma=Ta.visibleBounds(),ma=this.bounds().top()+this.height-ma.bottom(),0<ma&&this.moveBy(Wa.pt(0,-ma)))}},{key:"onMouseUp",value:function(ma){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},
targetMorph:{defaultValue:null,get:function(){var ma=this.getProperty("targetMorph");return ma&&$world.getMorphWithId(ma)},set:function(ma){this.setProperty("targetMorph",ma?ma.id:null);this.alignAtBottomOf(ma)}},expandable:{after:["submorphs"],set:function(ma){this.setProperty("expandable",ma);if(ma){var Ta=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Wa.connect(Ta,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),
Wa.disconnect(Ta,"fire",this,"expand"))}}}}}],Wb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(Wa.StatusMessage));Wa.StatusMessageForMorph=Vb;Wa.StatusMessageForMorph=Vb;Wa.StatusMessageForMorph=Vb;Wa.showConnector=Pa;Wa.showConnector=Pa;var Fa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");
Fa.Morph=kf;Fa.Label=ce;Fa.HorizontalLayout=Gd;Fa.Path=ge;Fa.Text=pe;Fa.GridLayout=Te;Fa.morph=Bc;Fa.Icon=We;Fa.createMorphSnapshot=rc;Fa.Color=Uc;Fa.pt=lc;Fa.rect=jd;Fa.Rectangle=Bd;Fa.LinearGradient=bd;Fa.obj=Vd;Fa.PropertyPath=he;Fa.promise=Od;Fa.properties=cd;Fa.num=ie;Fa.arr=ac;Fa.connect=Hd;Fa.signal=Db;Fa.disconnect=uc;Fa.disconnectAll=Tc;Fa.once=Ae;Fa.showAndSnapToGuides=Pc;Fa.showAndSnapToResizeGuides=sc;Fa.removeSnapToGuidesOf=xc;Fa.CommentBrowser=void 0;Fa.show=Za;Fa.haloBlue=Fa.Color.rgb(23,
160,251);Fa.componentAccent=Fa.Color.magenta;Fa.derivedAccent=Fa.Color.purple;var Xa=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("Halo")&&"function"===typeof Wb.Halo?Wb.Halo:Wb.Halo=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",
win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(ma){ma.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var ma=this;setTimeout(function(){ma.target.owner||ma.remove()})}},{key:"initLayout",value:function(){var ma=this.layout=new Fa.GridLayout({autoAssign:!1,fitToCell:!1,renderViaCSS:!0,columns:[0,{fixed:36,paddingRight:10},
2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});
ma.col(1).row(7).group.align="topCenter";ma.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Fa.morph({name:"border-box",halosEnabled:!1,fill:Fa.Color.transparent,borderColor:this.target.isComponent?Fa.componentAccent:Fa.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(ma){this.state||(this.state={});this.state.pointerId=ma}},{key:"prepareTarget",value:function(ma){if(!Fa.obj.isArray(ma))return ma;
if(1>=ma.length)return ma[0];ma=ma[0].world().addMorph(new Fa.MultiSelectionTarget({selectedMorphs:ma}));ma.alignWithSelection();ma.modifiesSelectedMorphs=!0;return ma}},{key:"refocus",value:function(ma){this.target=ma;this.alignWithTarget()}},{key:"alignWithTarget",value:function(ma){var Ta=this;if((!ma||["extent","position","scale","rotation"].includes(ma.prop))&&!this.active&&this.target){ma=this.target.world()||$world;var qb=this.maskBounds,ec=this.target.globalBounds(),Ic=ec.insetBy(-36).intersection(qb);
qb=ec.intersection(qb);this.state.activeButton?(this.buttonControls.forEach(function(ud){return ud.visible=!1}),this.ensureResizeHandles().forEach(function(ud){return ud.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(ud){return ud.visible=!0}),this.buttonControls.filter(function(ud){return Ta.activeItems.includes("*")?!0:Ta.activeItems.includes(ud.name)}).forEach(function(ud){ud.visible=
!0}),this.propertyDisplay.disable());this.setBounds(Ic.translatedBy(ma.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,qb));this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(ud){return ud.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();return this}}},{key:"detachFromTarget",value:function(){var ma=this.target;ma&&(Fa.disconnect(ma,"onChange",this,"alignWithTarget"),Fa.disconnect(ma,"onOwnerChanged",this,"removeIfDetached"),ma instanceof
Fa.MultiSelectionTarget?(ma.modifiesSelectedMorphs=!1,ma.remove()):"function"===typeof ma.detachedHalo&&ma.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();wd._get(Object.getPrototypeOf($a.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return Fa.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Fa.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Fa.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Fa.GrabHaloItem.for(this)}},
{key:"dragHalo",value:function(){return Fa.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Fa.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Fa.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return Fa.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Fa.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Fa.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Fa.OriginHaloItem.for(this)}},{key:"componentHalo",
value:function(){return Fa.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(ma){return ma.isHaloItem&&!ma.isResizeHandle})}},{key:"addMorphToSelection",value:function(ma){var Ta=this,qb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ic){if(1==Ic.nextAddress){qb=Ta.world();ec=Ta.target.isMorphSelection?Ta.target.selectedMorphs:[Ta.target];if(ec.includes(ma))return Ic.return();Ta.remove();return Ic.yield(qb.showHaloForSelection([].concat($jscomp.arrayFromIterable(ec),
[ma]),Ta.state.pointerId),2)}return Ic.return(Ic.yieldResult)})}},{key:"removeMorphFromSelection",value:function(ma){var Ta=this,qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){if(1==ec.nextAddress){qb=Ta.world();Ta.remove();if(!Ta.target.isMorphSelection)return ec.jumpTo(0);Fa.arr.remove(Ta.target.selectedMorphs,ma);return ec.yield(qb.showHaloForSelection(Ta.target.selectedMorphs,Ta.state.pointerId),3)}return ec.return(ec.yieldResult)})}},{key:"isAlreadySelected",value:function(ma){return this.target==
ma||this.target.isMorphSelection&&this.target.selectsMorph(ma)}},{key:"updateBoundsFor",value:function(ma,Ta,qb,ec,Ic){var ud={topLeft:Fa.rect(-1,-1,1,1),topCenter:Ta?Fa.rect(1,-1,0,1):Fa.rect(0,-1,0,1),topRight:Fa.rect(0,-1,1,1),rightCenter:Ta?Fa.rect(0,1,1,1):Fa.rect(0,0,1,0),bottomRight:Fa.rect(0,0,1,1),bottomCenter:Ta?Fa.rect(1,0,0,1):Fa.rect(0,0,0,1),bottomLeft:Fa.rect(-1,0,1,1),leftCenter:Ta?Fa.rect(-1,1,1,0):Fa.rect(-1,0,1,0)}[ma];Ic=ud.x;var gd=ud.y,me=ud.width;ud=ud.height;qb=Ta?this.proportionalDelta(ma,
qb,ec):qb;ma=Fa.rect(qb.x*Ic,qb.y*gd,qb.x*me,qb.y*ud);this.active=!0;this.target.setBounds(ec.insetByRect(ma));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(ue){if(ue.activeSideBars.includes("Styling Palette"))ue.stylingPalette.onHierarchyChange()})}},{key:"proportionalDelta",value:function(ma,Ta,qb){var ec=qb.width,Ic=qb.height;qb={topLeft:Fa.pt(-1,-1),topCenter:Fa.pt(0,-1),topRight:Fa.pt(1,
-1),leftCenter:Fa.pt(-1,0),rightCenter:Fa.pt(1,0),bottomLeft:Fa.pt(-1,1),bottomCenter:Fa.pt(0,1),bottomRight:Fa.pt(1,1)};var ud=ec/Math.max(ec,Ic),gd=Ic/Math.max(Ic,ec);ec={topLeft:Fa.pt(-ud,-gd),topCenter:Fa.pt(1/(2*Ic/ec),-1),topRight:Fa.pt(ud,-gd),leftCenter:Fa.pt(-1,Ic/(2*ec)),rightCenter:Fa.pt(1,Ic/(3*ec)),bottomLeft:Fa.pt(-ud,gd),bottomCenter:Fa.pt(1/(2*Ic/ec),1),bottomRight:Fa.pt(ud,gd)};qb=qb[ma];return ec[ma].scaleBy(qb.dotProduct(Ta)/qb.dotProduct(qb))}},{key:"ensureResizeHandles",value:function(){return Fa.ResizeHandle.resizersFor(this)}},
{key:"updatePropertyDisplay",value:function(ma){ma=ma.valueForPropertyDisplay();"undefined"!==typeof ma?this.propertyDisplay.displayProperty(ma):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(ma,Ta){if(!Fa.rect(0).sides.includes(Ta)){var qb=this.getSubmorphNamed("diagonal");if(ma){ma=this.target.globalBounds();var ec=ma.width,Ic=ma.height;ma=this.localize(Fa.pt(ma.x,ma.y)).extent(Fa.pt(ec,Ic)).scaleRectTo(this.innerBounds());ec={topLeft:[Fa.pt(ec,Ic),Fa.pt(0,0)],topRight:[Fa.pt(0,
Ic),Fa.pt(ec,0)],bottomRight:[Fa.pt(0,0),Fa.pt(ec,Ic)],bottomLeft:[Fa.pt(ec,0),Fa.pt(0,Ic)]};qb?qb.setBounds(ma):(qb=$jscomp.makeIterator(ec[Ta]),Ta=qb.next().value,qb=qb.next().value,ec=new Fa.LinearGradient({stops:[{offset:0,color:Fa.Color.orange.withA(0)},{offset:.2,color:Fa.Color.orange},{offset:.8,color:Fa.Color.orange},{offset:1,color:Fa.Color.orange.withA(0)}]}),qb=this.addMorphBack(new Fa.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:ma,borderColor:ec,vertices:[Ta,
qb]})),qb.setBounds(ma),qb.animate({opacity:1,duration:500}))}else qb&&qb.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(ma,Ta){var qb=this.getSubmorphNamed("rotationIndicator");ma&&Ta?(ma=this.getSubmorphNamed("origin").center,qb=qb||this.addMorphBack(new Fa.Path({name:"rotationIndicator",borderColor:Fa.haloBlue,borderWidth:1,vertices:[]})),qb.setBounds(Ta.bounds().union(this.innerBounds())),qb.vertices=[qb.localizePointFrom(ma,this),qb.localizePointFrom(Ta.center,this)]):qb&&qb.remove()}},
{key:"toggleMorphHighlighter",value:function(ma,Ta,qb){qb=void 0===qb?!1:qb;if(Ta)if(Ta.onHaloGrabover)Ta.onHaloGrabover(ma);else qb=Fa.MorphHighlighter.for(this,Ta,qb),ma&&Ta&&Ta!=this.world()?qb&&qb.show(Ta):qb&&qb.deactivate()}},{key:"temporaryEditTextMorph",value:function(ma){if(this.target.isText){var Ta=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(ma.positionIn(this.target));var qb=this.world(),ec=this.target,Ic=
this.topBar,ud=function(gd){Ic.stylingPalette&&Ic.stylingPalette.fullContainsWorldPoint(qb.firstHand.position)?(ec.whenRendered().then(function(){Fa.once(ec,"onBlur",ud)}),Fa.once(ec,"onBlur",ud)):(Ic.setEditMode("Halo",!0),ec.readOnly=Ta,ec.collapseSelection(),Ic.showHaloFor(ec))};this.target.whenRendered().then(function(){Fa.once(ec,"onBlur",ud)});Ic.setEditMode("Hand",!0);this.remove()}}},{key:"onMouseDown",value:function(ma){var Ta=this,qb=ma.state.clickedOnMorph;if(!ma.isCommandKey()&&qb==this.borderBox){if(2==
ma.state.clickCount&&this.target.isText){this.temporaryEditTextMorph(ma);return}return Fa.promise.delay(200).then(function(){2!=ma.state.clickCount&&Ta.remove()})}if(ma.isShiftDown()&&ma.isCommandKey())qb=this.target.isMorphSelection?this.target.morphBeneath(ma.position):this.morphBeneath(ma.position),this.isAlreadySelected(qb)?this.removeMorphFromSelection(qb):this.addMorphToSelection(qb);else{if(qb==this.borderBox&&ma.isCommandKey()){var ec=ma.world.morphsContainingPoint(ma.position).filter(function(Ic){return Ic.halosEnabled});
(ec=ec.slice(ec.indexOf(this.target)+1)[0]||ec[0]||ma.world)&&ma.world.showHaloFor(ec,ma.domEvt.pointerId);this.remove()}qb==this&&ma.isCommandKey()&&(ec=this.morphBeneath(ma.position),ma.world.showHaloFor(ec,ma.domEvt.pointerId));qb==this&&Fa.promise.delay(500).then(function(){Ta.remove()})}}},{key:"onContextMenu",value:function(ma){var Ta=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(qb){return Ta.target.openMenu(qb,ma)}).catch(function(qb){return $world.logError(qb)})}},
{key:"onKeyUp",value:function(ma){this.changingName||this.buttonControls.map(function(Ta){return Ta.onKeyUp(ma)})}},{key:"getMesh",value:function(ma,Ta){var qb=ma.x;ma=ma.y;Ta=void 0===Ta?Fa.pt(0,0):Ta;var ec=this.world().visibleBounds(),Ic=ec.height;ec=ec.width;var ud={borderStyle:"dotted",borderWidth:2,borderColor:Fa.Color.orange};ud=this.get("mesh")||this.addMorph(new Fa.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:Fa.pt(ec,Ic),fill:null,submorphs:[new Fa.Path(Object.assign({name:"vertical"},
ud)),new Fa.Path(Object.assign({name:"horizontal"},ud))]}));ud.globalPosition=Ta;ud.getSubmorphNamed("vertical").vertices=[Fa.pt(qb,0).subPt(Ta),Fa.pt(qb,Ic).subPt(Ta)];ud.getSubmorphNamed("horizontal").vertices=[Fa.pt(0,ma).subPt(Ta),Fa.pt(ec,ma).subPt(Ta)];return ud}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Fa.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(ma){this.setProperty("maskBounds",ma);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(ma){this.setProperty("activeItems",ma);this.buttonControls.forEach(function(Ta){return Ta.visible=ma.includes(Ta.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},
hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Fa.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},target:{get:function(){return this.state?this.state.target:null},set:function(ma){this.state||(this.state={});var Ta=!!this.state.target;this.detachFromTarget();ma=this.prepareTarget(ma);this.state.target=ma;Ta&&this.alignWithTarget();Fa.connect(ma,"onChange",this,"alignWithTarget");Fa.connect(ma,"onOwnerChanged",
this,"removeIfDetached")}}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19551})}(Fa.Morph);Xa=Fa.Halo;var gc=db("H",Xa);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Wb.HaloPropertyDisplay?
Wb.HaloPropertyDisplay:Wb.HaloPropertyDisplay=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(ma){var Ta=this.halo.state.activeButton;ma=String(ma);this.visible=!0;this.textString=ma;this.position=this.constructor.defaultPosition;
this.bounds().insetBy(10).intersects(Ta.bounds())&&(this.position=Fa.pt(Ta.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return Fa.pt(25,0)}},{key:"for",value:function(ma){return ma.getSubmorphNamed(this.morphName)||ma.addMorph(new this({name:this.morphName}))}},
{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Fa.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Fa.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Fa.Color.white},position:{defaultValue:this.defaultPosition}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19741,end:21079})})(Fa.Label);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Wb.MultiSelectionTarget?Wb.MultiSelectionTarget:Wb.MultiSelectionTarget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"isHaloItem",get:function(){return!0}},
{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(ma){return this.selectedMorphs.includes(ma)}},{key:"alignWithSelection",value:function(){var ma=this.selectedMorphs.map(function(Ta){return Ta.globalBounds()}).reduce(function(Ta,qb){return Ta.union(qb)});this.setBounds(ma)}},{key:"onGrab",value:function(ma){this.grabbingHand=ma.hand;this.selectionGrabbed=!0;ma.hand.grab(this.selectedMorphs);Fa.once(ma.hand,"dropMorphsOn",this,"onGrabEnd");Fa.connect(ma.hand,"position",
this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Fa.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(ma){var Ta=ma.value.subPt(ma.prevValue);this.selectedMorphs.forEach(function(qb){return qb.resizeBy(Ta)})}},{key:"updatePosition",value:function(ma){if(!this.selectionGrabbed){var Ta=ma.value.subPt(ma.prevValue);this.selectedMorphs.forEach(function(qb){return qb.moveBy(Ta)})}}},{key:"updateRotation",value:function(ma){var Ta=this,qb=ma.value-
ma.prevValue;this.selectedMorphs.forEach(function(ec){var Ic=ec.origin;ec.adjustOrigin(ec.localize(Ta.worldPoint(Fa.pt(0,0))));ec.rotation+=qb;ec.adjustOrigin(Ic)})}},{key:"updateScale",value:function(ma){var Ta=this,qb=ma.value-ma.prevValue;this.selectedMorphs.forEach(function(ec){var Ic=ec.origin;ec.adjustOrigin(ec.localize(Ta.worldPoint(Fa.pt(0,0))));ec.scale+=qb;ec.adjustOrigin(Ic)})}},{key:"onChange",value:function(ma){wd._get(Object.getPrototypeOf($a.prototype),"onChange",this).call(this,ma);
if(this.modifiesSelectedMorphs){switch(ma.prop){case "extent":this.updateExtent(ma);break;case "scale":this.updateScale(ma);break;case "position":this.updatePosition(ma);break;case "rotation":this.updateRotation(ma)}return ma}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Wb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21147,end:23418})})(Fa.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("HaloItem")&&"function"===typeof Wb.HaloItem?Wb.HaloItem:Wb.HaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd($a,ic,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Fa.Color.gray.withA(.7)},
grabbable:{defaultValue:!1},extent:{defaultValue:Fa.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},{key:"for",value:function(ma){return ma.getSubmorphNamed(this.morphName)||ma.addMorph(new this({halo:ma,name:this.morphName}))}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23582,
end:24300})})(Fa.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("NameHolder")&&"function"===typeof Wb.NameHolder?Wb.NameHolder:Wb.NameHolder=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onHoverIn",value:function(ma){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=
Fa.Color.orange)}},{key:"onHoverOut",value:function(ma){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Fa.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(ma){"Enter"==ma.keyCombo?(this.accept(),this.halo.focus(),ma.stop()):wd._get(Object.getPrototypeOf($a.prototype),"onKeyDown",this).call(this,ma)}},{key:"onMouseUp",value:function(){Fa.signal(this,
"active",[!0,this])}},{key:"onMouseDown",value:function(ma){this.nameHolder.fontColor=Fa.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(ma){ma=this.nameHolder.textString;var Ta=this.target.owner;this.validName=!Ta||!Ta.getSubmorphNamed(ma)||this.target.name==ma;Fa.signal(this,"valid",[this.validName,ma])}},{key:"update",value:function(){var ma=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return ma.nameHolder.fit()}))}},
{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(ma){if(!this.forceUniqueName||this.validName)this.target.name=ma,Fa.signal(this,"active",[!1,this]),Fa.CommentBrowser.instance&&Fa.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Fa.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Fa.HorizontalLayout({renderViaCSS:!0,resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Fa.Text({fill:Fa.Color.transparent,
fontColor:Fa.Color.white,fontWeight:"bold",active:!0}));Fa.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24335,end:27086})})(Fa.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("NameHaloItem")&&
"function"===typeof Wb.NameHaloItem?Wb.NameHaloItem:Wb.NameHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:Symbol.for("lively-instance-initialize"),value:function(ma){wd._get(Object.getPrototypeOf($a.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ma);this.initComponentLink();this.initNameHolders();this.validityIndicator=Fa.Icon.makeLabel("check",{fontColor:Fa.Color.green,
fontSize:15,padding:Fa.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Fa.componentAccent:Fa.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var ma=this,Ta=this.halo.target;if(Ta&&!Ta.isMorphSelection&&Ta.master){var qb=Ta.master.determineMaster(Ta),ec=qb&&!!Ta.world().localComponents.includes(qb),Ic=qb?Ta.master.getWorldUrlFor(qb):"this project";Ta=this.addMorph(Fa.Icon.makeLabel(Ic?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Fa.Color.white,
padding:Fa.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+Ic}));Ic&&Fa.connect(Ta,"onMouseDown",function(){ec?ma.showLocalMaster(qb):window.open(Ic)})}}},{key:"showLocalMaster",value:function(ma){var Ta;if(Ta=ma.getWindow())Ta.activate(),Ta.minimized&&(Ta.minimized=!1);ma.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(ma){return{target:ma,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:
[]}},{key:"initNameHolders",value:function(){var ma=this;this.nameHolders=this.targets().map(function(Ta){Ta=new Fa.NameHolder({halo:ma.halo,highlightOnHover:Ta.highlightOnHover,target:Ta.target});Fa.connect(Ta,"active",ma,"toggleActive");Fa.connect(Ta,"valid",ma,"toggleNameValid");return Ta});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Fa.arr.interpose(this.nameHolders,{extent:Fa.pt(1,28),fill:Fa.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(ma){var Ta=
$jscomp.makeIterator(ma);ma=Ta.next().value;var qb=Ta.next().value;if(this.halo.changingName!==ma){this.halo.changingName=ma;if(Ta=this.get("master link"))Ta.visible=Ta.isLayoutable=!ma;ma?(this.nameHolders.forEach(function(ec){return ec!=qb&&ec.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Fa.Color.darkGray,setTimeout(function(){return qb.nameHolder.selectAll()})):(this.fill=Fa.haloBlue,this.nameHolders.forEach(function(ec){return ec!=qb&&ec.activate()}),this.borderWidth=
0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(ma){var Ta=$jscomp.makeIterator(ma);ma=Ta.next().value;Ta=Ta.next().value;(this.validName=ma)?(this.conflictingMorph=null,this.borderColor=Fa.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Fa.Color.green,Fa.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(Ta),this.borderColor=Fa.Color.red,this.validityIndicator.fontColor=Fa.Color.red,
this.validityIndicator.nativeCursor="pointer",Fa.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Fa.arr.zip(this.targets(),this.nameHolders).map(function(Ta){var qb=$jscomp.makeIterator(Ta);Ta=qb.next().value.target;qb=qb.next().value;qb.target=Ta;qb.update()});var ma=this.halo.innerBounds().bottomCenter().addPt(Fa.pt(0,2));this.topCenter=Fa.pt(Math.max(ma.x,30),Math.max(ma.y,80))}},{key:"onMouseDown",value:function(ma){var Ta=this,qb=this.conflictingMorph;
qb&&(this.halo.toggleMorphHighlighter(!0,qb),setTimeout(function(){return Ta.halo.toggleMorphHighlighter(!1,qb)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Fa.haloBlue},borderColor:{defaultValue:Fa.Color.green},layout:{initialize:function(){this.layout=new Fa.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",
orderByIndex:!0})}}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27088,end:31588})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("CloseHaloItem")&&"function"===typeof Wb.CloseHaloItem?Wb.CloseHaloItem:Wb.CloseHaloItem=
function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"update",value:function(){var ma=this.halo,Ta=ma.target.owner;Ta.undoStart("close-halo");ma.target.selectedMorphs?ma.target.selectedMorphs.forEach(function(qb){return qb.abandon()}):ma.target.abandon();Ta.undoStop("close-halo");ma.remove()}},{key:"onMouseDown",value:function(ma){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},
{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],initialize:function(){this.styleClasses=["fas",this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":"Remove this morph from the world"}}}}}],Wb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31590,end:32600})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("GrabHaloItem")&&"function"===typeof Wb.GrabHaloItem?Wb.GrabHaloItem:Wb.GrabHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd($a,ic,[{key:"adjustTarget",value:function(ma,Ta){Fa.PropertyPath("owner.layout.autoResize").get(ma)&&!ma.globalBounds().insetBy(10).containsPoint(Ta)&&(ma=ma.owner);return ma}},{key:"valueForPropertyDisplay",value:function(){var ma=this.hand,Ta=this.halo,qb=this.prevDropTarget,ec=ma.world(),Ic=ma.findDropTarget(ma.globalPosition,[Ta.target],function(ud){return!ud.isHaloItem&&!ud.ownerChain().some(function(gd){return gd.isHaloItem||!gd.visible||0==gd.opacity})});if(Ic)return Ic=
this.adjustTarget(Ic,ma.globalPosition),Ta.toggleMorphHighlighter(Ic&&Ic!=ec,Ic,!0),qb&&qb!=Ic&&Ta.toggleMorphHighlighter(!1,qb),(this.prevDropTarget=Ic)&&Ic.name}},{key:"init",value:function(ma){var Ta=this.halo,qb=Ta.target.undoStart("grab-halo");qb&&qb.addTarget(Ta.target.owner);this.hand=ma;Ta.target.onGrab({halo:Ta,hand:ma,isShiftDown:function(){return!1}});Ta.state.activeButton=this;this.opacity=.3;var ec=Fa.connect(ma,"update",this,"update");Fa.once(Ta.target,"remove",function(){return ec.disconnect()})}},
{key:"stop",value:function(ma){var Ta=this.halo,qb=this.prevDropTarget,ec=Ta.target.undoInProgress,Ic=ma.hand.findDropTarget(ma.hand.globalPosition,[Ta.target],function(ud){return!ud.isHaloItem&&!ud.ownerChain().some(function(gd){return gd.isHaloItem})});Ic=this.adjustTarget(Ic,ma.hand.globalPosition);Fa.disconnect(ma.hand,"update",this,"update");Fa.MorphHighlighter.interceptDrop(Ta,Ic,Ta.target);ec.addTarget(Ic);Ic.onDrop(ma);Ta.state.activeButton=null;Ta.alignWithTarget();Ta.toggleMorphHighlighter(!1,
qb);Fa.MorphHighlighter.removeHighlighters(Ta);Ta.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(ma){this.init(ma.hand)}},{key:"onDragEnd",value:function(ma){this.stop(ma)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},
draggable:{defaultValue:!0}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32664,end:35192})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("DragHaloItem")&&"function"===typeof Wb.DragHaloItem?Wb.DragHaloItem:Wb.DragHaloItem=
function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(ma){var Ta=this.halo.getSubmorphNamed("mesh");if(ma)return Ta=this.halo.getMesh(this.halo.target.worldPoint(Fa.pt(0,0))),this.focus(),Ta;Ta&&Ta.remove()}},{key:"init",value:function(){var ma=this.halo.target;ma.undoStart("drag-halo");
this.halo.state.activeButton=this;this.actualPos=ma.position;this.targetTransform=ma.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Fa.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(ma,Ta,qb){Ta=void 0===Ta?!1:Ta;qb=void 0===qb?!1:qb;this.actualPos=ma=this.actualPos.addPt(this.targetTransform.transformDirection(ma));Ta&&(ma=
ma.griddedBy(Fa.pt(10,10)));this.halo.target.position=ma;this.updateAlignmentGuide(Ta);this.world().withTopBarDo(function(ec){if(ec.activeSideBars.includes("Styling Palette"))ec.stylingPalette.onHierarchyChange()});Ta||Fa.showAndSnapToGuides(this.halo.target,!0,qb,5,500)}},{key:"onDragStart",value:function(ma){this.init()}},{key:"onDrag",value:function(ma){this.update(ma.state.dragDelta,ma.isAltDown(),ma.isCtrlDown())}},{key:"onDragEnd",value:function(ma){this.stop()}},{key:"onKeyUp",value:function(ma){this.updateAlignmentGuide(!1)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35194,end:37192})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("InspectHaloItem")&&"function"===typeof Wb.InspectHaloItem?Wb.InspectHaloItem:Wb.InspectHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){var Ta=this;
(function(){var qb,ec,Ic,ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gd){if(1==gd.nextAddress)return gd.yield(System.import("lively.ide/js/inspector.js"),2);qb=gd.yieldResult;ec=qb.default;(Ic=Ta.world().getSubmorphsByStyleClassName("Inspector").find(function(me){return me.targetObject==Ta.halo.target}))&&(ud=Ic.getWindow())?(ud.minimized=!1,ud.activate(),ud.animate({center:Ta.world().visibleBounds().center(),duration:200})):ec.openInWindow({targetObject:Ta.halo.target});Ta.halo.remove();
gd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37194,end:38111})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("EditHaloItem")&&"function"===typeof Wb.EditHaloItem?Wb.EditHaloItem:Wb.EditHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){var Ta=this;(ma=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(qb){return qb.target==
Ta.halo.target}))?(ma=ma.getWindow(),ma.bringToFront(),ma.minimized=!1,ma.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas",
"fa-wrench"]}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38113,end:38893})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("RotateHaloItem")&&"function"===typeof Wb.RotateHaloItem?Wb.RotateHaloItem:Wb.RotateHaloItem=
function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:Symbol.for("lively-instance-initialize"),value:function(ma){wd._get(Object.getPrototypeOf($a.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ma);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(ma){this.setProperty("angle",ma)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||
null}},{key:"scaleGauge",set:function(ma){this.setProperty("scaleGauge",ma)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(ma){this.setProperty("initRotation",ma)}},{key:"valueForPropertyDisplay",value:function(){var ma=this.halo.target;return this.scaleGauge?ma.scale.toFixed(4).toString():Fa.num.toDegrees(ma.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(ma){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");
this.halo.state.activeButton=this;this.angle=ma;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(ma){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=ma.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(ma){this.scaleGauge=null;ma=this.initRotation+(ma-this.angle);ma=Fa.num.toRadians(Fa.num.detent(Fa.num.toDegrees(ma),10,45));this.halo.target.rotation=
ma;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(ma){var Ta=this.scaleGauge,qb=this.halo;Ta||(Ta=this.scaleGauge=ma.scaleBy(1/qb.target.scale));this.angle=ma.theta();this.initRotation=qb.target.rotation;qb.target.scale=Fa.num.detent(ma.dist(Fa.pt(0,0))/Ta.dist(Fa.pt(0,0)),.1,.5);qb.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,
this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(ma){this.styleClasses=["fas",ma?"fa-search-plus":"fa-redo"];this.tooltip=ma?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){}},{key:"attachToLayout",value:function(){}},{key:"onDragStart",value:function(ma){this.adaptAppearance(ma.isShiftDown());ma.isShiftDown()?this.initScale(ma.position.subPt(this.halo.target.globalPosition)):this.init(ma.position.subPt(this.halo.target.globalPosition).theta())}},
{key:"onDrag",value:function(ma){this.globalPosition=ma.position.addPt(Fa.pt(-10,-10));this.adaptAppearance(ma.isShiftDown());ma.isShiftDown()?this.updateScale(ma.position.subPt(this.halo.target.globalPosition)):this.update(ma.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(ma){this.adaptAppearance(ma.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(ma){this.adaptAppearance(ma.isShiftDown())}},{key:"onKeyUp",value:function(ma){this.adaptAppearance(ma.isShiftDown())}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38895,end:42263})})(Fa.HaloItem);Fa.nameNumberRe=
/(.+)([0-9]+)$/;(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof Wb.ComponentHaloItem?Wb.ComponentHaloItem:Wb.ComponentHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"updateComponentIndicator",value:function(){var ma=this.world(),Ta=this.halo.target;this.halo.remove();ma.showHaloFor(Ta)}},{key:"checkForDuplicateNamesInHierarchy",
value:function(){var ma=this,Ta,qb,ec,Ic,ud,gd,me,ue,Uf,zf,qf,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Df){switch(Df.nextAddress){case 1:Ta=ma.halo.target;qb=ma.world();ec=[];Ta.withAllSubmorphsDoExcluding(function(Bf){Bf!=Ta&&ec.push(Bf)},function(Bf){return Bf.master&&Bf!=Ta});Ic=Fa.arr.groupBy(ec,function(Bf){return Bf.name});ud={fontWeight:"normal",fontSize:16};if(!Object.values(Ic).find(function(Bf){return 1<Bf.length})){Df.jumpTo(2);break}gd=Fa.arr.sum(Object.values(Ic).filter(function(Bf){return 1<
Bf.length}).map(function(Bf){return Bf.length}));return Df.yield(qb.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(Fa.Icon.textAttribute("exclamation-triangle",{fontColor:Fa.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+gd+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",
Object.assign({},ud,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",Object.assign({},ud,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},ud,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},ud,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(me=Df.yieldResult,!me)return Df.return();case 2:Uf=Df.forIn(Ic);case 4:if(null==(ue=Uf.getNext())){Df.jumpTo(6);break}if(2>Ic[ue].length){Df.jumpTo(4);break}zf=Ic[ue];case 7:if(!(1<zf.length)){Df.jumpTo(4);break}qf=zf[0];Fa.show(qf,!0);return Df.yield(qb.prompt(["Name Collision\n",{},"The name of\n",ud,qf.toString(),Object.assign({},ud,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},ud),Ta.name,Object.assign({},ud,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<zf.length?"are "+(zf.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",ud," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
ud],{input:qf.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Bf){return!Object.keys(Ic).includes(Bf)}}),9);case 9:C=Df.yieldResult;Fa.signal(qb,"hideMarkers");C&&(qf.name=C);if(C in Ic){Df.jumpTo(7);break}else if(!C){zf=Fa.arr.rotate(zf);Df.jumpTo(7);break}Fa.arr.remove(zf,qf);Df.jumpTo(7);break;case 6:return Df.return(!0)}})}},{key:"onMouseDown",value:function(){var ma=this,Ta,qb,ec,Ic,ud,gd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(me){switch(me.nextAddress){case 1:Ta=
ma.halo.target;qb=!Ta.isComponent;ec=$world.getAllNamed(Ta.name).length;if(!(qb&&1<ec)){me.jumpTo(2);break}return me.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(ec-1)+" other morph"+(2<ec?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:Ta.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(ue){return 0==$world.getAllNamed(ue).length}}),3);case 3:Ic=me.yieldResult;if(!Ic)return me.return();Ta.name=Ic;case 2:ud=Ta;if(!(gd=qb)){me.jumpTo(4);break}return me.yield(ma.checkForDuplicateNamesInHierarchy(),5);case 5:gd=me.yieldResult;case 4:ud.isComponent=gd,qb?(Fa.arr.pushIfNotIncluded(Ta.world().localComponents,Ta),Fa.arr.pushIfNotIncluded(Ta.world().hiddenComponents,Ta.name)):Fa.arr.remove(Ta.world().localComponents,Ta),ma.world()?ma.updateComponentIndicator():Ta.world().showHaloFor(Ta),
me.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42304,end:48458})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("CopyHaloItem")&&"function"===typeof Wb.CopyHaloItem?Wb.CopyHaloItem:Wb.CopyHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,
ic,[{key:"init",value:function(ma){function Ta(ue,Uf){return Uf.match(Fa.nameNumberRe)?Uf.replace(Fa.nameNumberRe,function(zf,qf,C){C||(C="0");for(zf=Number(C);ue.get(qf+ ++zf););return qf+zf}):Uf+"1"}var qb=this.halo,ec=qb.target,Ic=qb.world(),ud=ec instanceof Fa.MultiSelectionTarget;qb.remove();Fa.connect(ma,"update",this,"update");if(ud){var gd=Fa.arr.compact(ec.selectedMorphs.map(function(ue){if(ue.canBeCopied())return ue=ue.copy(!0),Ic.addMorph(ue),ue}));ud=gd.map(function(ue){ue.name=Ta(ec,
ue.name);return ue.position});gd[0].undoStart("copy-halo");Ic.addMorph(qb);qb.refocus(gd);ma.grab(qb.target);qb.target.onGrab({halo:qb,hand:ma,isShiftDown:function(){return!1}});ud.forEach(function(ue,Uf){return gd[Uf].globalPosition=ue});qb.alignWithTarget()}else{ud=ec.globalPosition;var me=ec.copy(!0);ec.isComponent&&(me.isComponent=!1,me.withAllSubmorphsDoExcluding(function(ue){ue!=me&&ue.master||delete ue._parametrizedProps},function(ue){return ue.master&&ue!=me}),me.master=ec);me.name=Ta(ec,
ec.name);Ic.addMorph(me);me.globalPosition=ud;me.undoStart("copy-halo");ma.grab(me);Ic.addMorph(qb);qb.visible=!1}}},{key:"stop",value:function(ma){var Ta=this.halo,qb=$jscomp.makeIterator(ma.grabbedMorphs).next().value,ec=ma.findDropTarget(ma.globalPosition,[Ta.target],function(ud){return!ud.isHaloItem&&!ud.ownerChain().some(function(gd){return gd.isHaloItem})}),Ic=Ta.target.undoInProgress;Fa.disconnect(ma,"update",this,"update");Ic.addTarget(ec);ma.dropMorphsOn(ec);Ta.target.undoStop("copy-halo");
Ta.remove();ma.world().showHaloFor(qb)}},{key:"onDragStart",value:function(ma){this.init(ma.hand)}},{key:"onDragEnd",value:function(ma){this.stop(ma.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var ma=this,Ta,qb,ec,Ic,ud,gd,me,ue,Uf,zf,qf,C,Df,Bf,Pe,Tf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fg){switch(fg.nextAddress){case 1:Ta=ma;qb=Ta.halo;if(qb.nameHalo().nameHolders.find(function(kg){return kg.nameHolder===$world.focusedMorph}))return fg.return();
ec=qb.target;Ic=qb.world();ud=ec instanceof Fa.MultiSelectionTarget;gd=ec.globalBounds().topLeft();me=ud?ec.selectedMorphs:[ec];return fg.yield(Promise.all(me.filter(function(kg){return!kg.isCommentIndicator}).map(function(kg){var wg;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kh){return 1==kh.nextAddress?(wg=kg.copy(!0),kh.yield(Promise.all(wg.withAllSubmorphsDo(function(rd){if(rd.master)return rd.master.applyIfNeeded(),rd.master.whenApplied()})),2)):kh.return(wg)})})),2);case 2:ue=
fg.yieldResult,Uf=[],zf='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>",qb.remove(),fg.setCatchFinallyBlocks(3),qf=$jscomp.makeIterator(ue),C=qf.next();case 5:if(C.done)return zf+="</body></html>",Pe=JSON.stringify(Uf),fg.yield(ma.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:zf},{type:"application/morphic",data:Pe}]),9);
Df=C.value;return fg.yield(Fa.createMorphSnapshot(Df,{addPreview:!1,testLoad:!1}),8);case 8:Bf=fg.yieldResult;Bf.copyMeta={offset:Df.worldPoint(Fa.pt(0,0)).subPt(gd)};Uf.push(Bf);zf+=Df.renderPreview();C=qf.next();fg.jumpTo(5);break;case 9:fg.leaveTryBlock(4);break;case 3:return Tf=fg.enterCatchBlock(),Ic.logError(Tf),fg.return();case 4:Ic.addMorph(qb),qb.refocus(me),qb.setStatusMessage("copied"),fg.jumpToEnd()}})}},{key:"onMouseUp",value:function(ma){var Ta=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){ma.stop();
return qb.yield(Ta.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:48460,end:53088})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("OriginHaloItem")&&"function"===typeof Wb.OriginHaloItem?Wb.OriginHaloItem:Wb.OriginHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"fill",get:function(){return Fa.Color.white.interpolate(.2,
this.borderColorTop)}},{key:"extent",get:function(){return Fa.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");
this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(ma){var Ta=this.halo,qb=Ta.target.origin,ec=Ta.target.worldPoint(qb);ma=Ta.target.localize(ec.addPt(ma)).subPt(Ta.target.scroll).subPt(qb);Ta.target.adjustOrigin(Ta.target.origin.addPt(ma))}},{key:"onDragStart",value:function(ma){this.init()}},{key:"onDragEnd",value:function(ma){this.stop()}},{key:"onDrag",
value:function(ma){this.update(ma.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Fa.componentAccent:Fa.haloBlue}}}}}],Wb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53090,end:54751})})(Fa.HaloItem);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("ResizeHandle")&&"function"===typeof Wb.ResizeHandle?Wb.ResizeHandle:Wb.ResizeHandle=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd($a,ic,[{key:"valueForPropertyDisplay",value:function(){var ma=this.halo.target.extent,Ta=ma.y;return ma.x.toFixed(1)+"x"+Ta.toFixed(1)}},{key:"positionInHalo",value:function(){var ma=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Fa.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),ma=ma.insetBy(-4));return ma.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(ma){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(ma.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(ma){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(ma.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(ma){this.init(ma.position,ma.isShiftDown())}},{key:"onDragEnd",value:function(ma){this.stop(ma.isShiftDown())}},{key:"onDrag",value:function(ma){this.update(ma.position,ma.isShiftDown(),ma.isAltDown(),ma.isCtrlDown());this.focus()}},{key:"init",value:function(ma,Ta){Ta=void 0===
Ta?!1:Ta;var qb=this.halo.target,ec=qb.origin,Ic=qb.position;qb=qb.extent;this.startPos=ma;this.startBounds=Ic.subPt(ec).extent(qb);this.startOrigin=this.halo.target.origin;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();ma=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Fa.num.toRadians(ma%45);this.halo.toggleDiagonal(Ta,this.corner)}},{key:"update",value:function(ma,Ta,qb,ec){Ta=void 0===Ta?!1:Ta;qb=void 0===qb?!1:qb;ec=void 0===
ec?!1:ec;var Ic=this.corner,ud=this.tfm;ma=this.startPos.subPt(ma);ud=ud.transformDirection(Fa.pt(ma.x,ma.y));qb&&(ud=ud.griddedBy(Fa.pt(10,10)));this.halo.updateBoundsFor(Ic,Ta,ud,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(Ta,Ic);this.updateAlignmentGuide(qb);Ta=[];Ic=Ic.toLowerCase();Ic.includes("left")&&Ta.push("left");Ic.includes("top")&&Ta.push("top");Ic.includes("bottom")&&Ta.push("bottom");Ic.includes("right")&&Ta.push("right");Fa.showAndSnapToResizeGuides(this.halo.target,
Ta,!0,ec,5,200)}},{key:"stop",value:function(ma){ma=this.halo;ma.state.activeButton=null;ma.alignWithTarget();ma.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Fa.removeSnapToGuidesOf(ma.target)}},{key:"updateAlignmentGuide",value:function(ma){var Ta=this.halo.getSubmorphNamed("mesh");if(ma)return ma=this.halo.target.extent,ma=Fa.pt(ma.x%10,ma.y%10),Ta=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),ma),this.focus(),Ta;Ta&&Ta.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(ma){0<ma&&(ma-=360);ma=-8-(ma/45).toFixed();0==ma&&(ma=8);return Fa.arr.zip(Fa.arr.rotate([["topLeft",function(Ta){return Ta.negated()}],["topCenter",function(Ta){return Ta.withX(0).negated()}],["topRight",function(Ta){return Ta.withX(0).negated()}],["rightCenter",function(Ta){return Fa.pt(0,
0)}],["bottomRight",function(Ta){return Fa.pt(0,0)}],["bottomCenter",function(Ta){return Fa.pt(0,0)}],["bottomLeft",function(Ta){return Ta.withY(0).negated()}],["leftCenter",function(Ta){return Ta.withY(0).negated()}]],ma),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(ma){var Ta=this;if(!ma.target)return[];
var qb=ma.target.getGlobalTransform().getRotation();return Fa.arr.compact(this.getResizeParts(qb).map(function(ec){var Ic=$jscomp.makeIterator(ec),ud=$jscomp.makeIterator(Ic.next().value);ec=ud.next().value;ud.next();ud.next();ud=$jscomp.makeIterator(Ic.next().value);Ic=ud.next().value;ud=ud.next().value;return Ta.for(ma,ec,ud,Ic)})).map(function(ec){return ec.alignInHalo()})}},{key:"for",value:function(ma,Ta,qb,ec){var Ic="Resize "+Ta;ma=ma.getSubmorphNamed(Ic)||new this({name:Ic,halo:ma,corner:Ta,
tooltip:"Resize "+Ta,extent:Fa.pt(10,10),borderWidth:1,borderRadius:0,borderColor:ma.target.isComponent?Fa.componentAccent:Fa.haloBlue,fill:Fa.Color.white});return Object.assign(ma,{nativeCursor:ec,location:qb})}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:54810,end:60003})})(Fa.HaloItem);
(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("MenuHaloItem")&&"function"===typeof Wb.MenuHaloItem?Wb.MenuHaloItem:Wb.MenuHaloItem=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){var Ta=this,qb,ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ic){if(1==Ic.nextAddress)return qb=Ta.halo.target,Ta.halo.remove(),
Ic.yield(qb.menuItems(ma),2);ec=Ic.yieldResult;qb.world().openMenu(ec).hasFixedPosition=Ta.halo.hasFixedPosition;Ic.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60005,end:60530})})(Fa.HaloItem);var ub=db("M",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("MorphHighlighter")&&"function"===typeof Wb.MorphHighlighter?Wb.MorphHighlighter:Wb.MorphHighlighter=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd($a,ic,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||
this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(ma){this.layoutHalo&&this.layoutHalo.handleDrop(ma)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Fa.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Fa.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},
acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(ma){var Ta=this;this.setProperty("highlightedSides",ma);this.submorphs=ma.map(function(qb){return{type:"ellipse",isHaloItem:!0,fill:Fa.Color.orange,center:Ta.innerBounds()[qb]()}});this.addMorph({type:"label",name:"name tag",padding:Fa.Rectangle.inset(5,5,5,5),fontColor:Fa.Color.white,fill:Fa.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,
derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(ma){ma=void 0===ma?$world:ma;var Ta=ma._morphHighlighters,qb;for(qb in Ta)Ta[qb].remove();delete ma._morphHighlighters}},{key:"for",value:function(ma,Ta,qb,ec){qb=void 0===qb?!1:qb;ec=void 0===ec?[]:ec;var Ic=ma._morphHighlighters=ma._morphHighlighters||{};Fa.properties.forEachOwn(Ic,function(ud,gd){return gd.alignWithHalo()});if(!Ta||Ta.ownerChain().find(function(ud){return ud.isHaloItem}))return null;
Ic[Ta.id]=Ic[Ta.id]||new this({targetId:Ta.id,halo:ma,showLayout:qb});ma.addMorph(Ic[Ta.id]);Ic[Ta.id].highlightedSides=ec;return Ic[Ta.id]}},{key:"interceptDrop",value:function(ma,Ta,qb){(ma=ma._morphHighlighters=ma._morphHighlighters||{},ma[Ta.id])&&ma[Ta.id].handleDrop(qb)}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:60719,end:64514})}(Fa.Morph));Fa.MorphHighlighter=ub;Fa.MorphHighlighter=ub;Fa.MorphHighlighter=ub;var qd=db("I",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),$a=Wb.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Wb.InteractiveMorphSelector?Wb.InteractiveMorphSelector:Wb.InteractiveMorphSelector=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return wd($a,ic,[{key:Symbol.for("lively-instance-initialize"),value:function(ma,Ta,qb){ma=void 0===ma?$world:ma;this.controllingMorph=void 0===Ta?null:Ta;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=ma;this.filterFn=qb;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var ma=Fa.promise.deferred();ma.promise.resolve=ma.resolve;this.whenDone=ma.promise;this.selectorMorph=Fa.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,
epiMorph:!0}).openInWorld();Fa.connect(this.world.firstHand,"position",this,"scanForTargetAt");Fa.once(this.selectorMorph,"onMouseUp",this,"selectTarget");Fa.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var ma=this.world.firstHand.globalPosition;this.selectorMorph.center=ma;this.selectorMorph.focus();var Ta=this.selectorMorph.morphBeneath(ma),qb,ec=this.possibleTarget,
Ic=this.controllingMorph,ud=this.filterFn,gd=this.world,me=this.morphHighlighter;for(me==Ta?Ta=me.morphBeneath(ma):Ta&&Ta.isEpiMorph&&(Ta=Ta.morphBeneath(ma));Ta&&(qb=[Ta].concat($jscomp.arrayFromIterable(Ta.ownerChain())).find(function(ue){return!ue.visible}));)Ta=qb=qb.morphBeneath(ma);if(Ta&&ud&&!ud(Ta))for(;Ta&&![Ta].concat($jscomp.arrayFromIterable(Ta.ownerChain())).find(ud);)Ta=Ta.morphBeneath(ma);!Ta||Ta==ec||Ic&&Ta.ownerChain().includes(Ic.getWindow())||(me&&me.deactivate(),(this.possibleTarget=
ec=Ta)&&!ec.isWorld&&(ma=this.morphHighlighter=Fa.MorphHighlighter.for(gd,Ta))&&ma.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Fa.MorphHighlighter.removeHighlighters(this.world);Fa.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(ma,Ta,qb){ma=new this(ma,Ta,qb);ma.selectNewTarget();return ma.whenDone}}],Wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64523,end:67276})}(void 0));Fa.InteractiveMorphSelector=qd;Fa.InteractiveMorphSelector=qd;Fa.InteractiveMorphSelector=qd;Fa.default=
Xa;var fc=lively.FreezerRuntime.recorderFor("lively.ide/index.js");fc.info="import via sub modules";fc.info="import via sub modules";fc.info="import via sub modules";Xa=db("v",{});fc.valueWidgets=Xa;fc.valueWidgets=Xa;fc.valueWidgets=Xa;var Ud=db("p",{});fc.popovers=Ud;fc.popovers=Ud;fc.popovers=Ud;var td=lively.FreezerRuntime.recorderFor("lively.components/popup.js");td.Morph=kf;td.Icon=We;td.Color=Uc;td.pt=lc;td.connect=Hd;td.duration=300;fc=db("P",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),
$a=Wb.hasOwnProperty("Popover")&&"function"===typeof Wb.Popover?Wb.Popover:Wb.Popover=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"relayout",value:function(ma){var Ta=this.get("body"),qb=this.get("arrow"),ec=this.get("close button");qb=qb.height;ma?(Ta.animate({topCenter:td.pt(0,qb),duration:200}),ec.animate({topRight:Ta.topRight.addXY(8,-8),duration:200})):(Ta.topCenter=td.pt(0,qb),ec.topRight=
Ta.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:td.pt(200,200),fill:td.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},
get:function(){return this.get("body").submorphs[0]},set:function(ma){var Ta=this;this.get("body").addMorph(ma);this.whenRendered().then(function(){return Ta.relayout()})}},submorphs:{initialize:function(){var ma=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:td.pt(0,0),borderColor:td.Color.transparent,vertices:[td.pt(-10,0),td.pt(0,-15),td.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(td.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",
fill:null,extent:td.pt(16,16),borderColor:td.Color.transparent}];var Ta=$jscomp.makeIterator(this.submorphs);Ta.next();var qb=Ta.next().value;Ta=Ta.next().value;td.connect(Ta,"fire",this,"close");td.connect(qb,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return ma.animated=!0},1E3)}}}}}],Wb,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:163,end:2541})}(td.Morph));td.Popover=fc;td.Popover=fc;td.Popover=fc;var fd=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");fd.Morph=kf;fd.TilingLayout=Nc;fd.morph=Bc;fd.Label=ce;fd.HorizontalLayout=Gd;fd.Icon=We;fd.InputLine=wc;fd.config=Vc;fd.connect=Hd;fd.signal=Db;fd.Color=Uc;fd.LinearGradient=bd;fd.pt=lc;fd.rect=jd;fd.num=ie;fd.obj=Vd;fd.popovers=Ud;fd.ValueScrubber=hb;fd.Popover=fc;(function(ic){var Wb=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Wb.ContextSensitiveWidget?Wb.ContextSensitiveWidget:Wb.ContextSensitiveWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:fd.Color.transparent},
isSelected:{defaultValue:"false",set:function(ma){this.setProperty("isSelected",ma);this.fontColor=ma?fd.Color.white:fd.Color.black}},layout:{initialize:function(){this.layout=new fd.HorizontalLayout}},context:{serialize:!1}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,
end:2441})})(fd.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("ShortcutWidget")&&"function"===typeof Wb.ShortcutWidget?Wb.ShortcutWidget:Wb.ShortcutWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){ma.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(ma){this.setProperty("title",ma);this.getSubmorphNamed("valueString").value=ma}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(ma){this.submorphs.forEach(function(Ta){return Ta.fontColor=ma})}},submorphs:{initialize:function(){this.submorphs=[fd.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],
fontSize:15,padding:fd.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:fd.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:2443,end:3793})})(fd.ContextSensitiveWidget);Ud=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("LayoutWidget")&&"function"===typeof Wb.LayoutWidget?Wb.LayoutWidget:Wb.LayoutWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var ma=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return Ta=new fd.popovers.LayoutPopover({hasFixedPosition:!!ma.ownerChain().find(function(ec){return ec.hasFixedPosition}),container:ma.context}),qb.yield(Ta.fadeIntoWorld(ma.globalBounds().center()),2);fd.connect(Ta,"layoutChanged",ma,"layoutChanged");fd.signal(ma,"openWidget",Ta);qb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,
end:4641})}(fd.ShortcutWidget);fd.LayoutWidget=Ud;fd.LayoutWidget=Ud;fd.LayoutWidget=Ud;Ud=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("ColorWidget")&&"function"===typeof Wb.ColorWidget?Wb.ColorWidget:Wb.ColorWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"relayout",value:function(ma){ma?this.submorphs=this.color?this.color.isGradient?
this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var ma=this.color;if(2*ma.stops.length==this.submorphs.length-3){var Ta;for(Ta in this.color.stops){var qb=ma.stops[Ta];var ec=qb.color,Ic=qb.offset,ud=$jscomp.makeIterator(this.submorphs[2+2*Ta].submorphs).next().value;qb=this.submorphs[3+2*Ta];ud.fill=ec;qb.value=(100*Ic).toFixed()+"%"+(Ta<ma.stops.length-
1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=fd.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:fd.pt(15,
15),fill:fd.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:fd.pt(5,7.5),fill:fd.Color.white,borderColor:fd.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[fd.pt(0,0),fd.pt(10,10)],borderColor:fd.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:fd.pt(15,15),fill:fd.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:fd.pt(5,7.5),fill:this.color,borderColor:fd.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:fd.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var ma=this.color,Ta=[{type:"label",padding:fd.rect(0,0,5,0),value:"linearGradient"==ma.type?fd.num.toDegrees(ma.vectorAsAngle()).toFixed()+"\u00b0,":""}],qb;for(qb in ma.stops){var ec=ma.stops[qb],Ic=ec.color;ec=ec.offset;
Ta.push({extent:fd.pt(this.fontSize,this.fontSize),fill:fd.Color.transparent,layout:new fd.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Ic}]});Ta.push({type:"label",padding:fd.rect(0,0,5,0),value:(100*ec).toFixed()+"%"+(qb<ma.stops.length-1?",":"")})}return Ta}},{key:"onMouseDown",value:function(ma){this.openFillEditor()}},{key:"update",value:function(ma){this.color=ma}},{key:"openFillEditor",value:function(){var ma=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==
qb.nextAddress)return Ta=new fd.popovers.FillPopover({hasFixedPosition:!!ma.ownerChain().find(function(ec){return ec.hasFixedPosition}),handleMorph:ma.context,fillValue:ma.color,title:"Fill Control",gradientEnabled:ma.gradientEnabled}),qb.yield(Ta.fadeIntoWorld(ma.globalBounds().center()),2);fd.connect(Ta,"fillValue",ma,"update");fd.signal(ma,"openWidget",Ta);qb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=
new fd.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:fd.Color.white},nonSelectionFontColor:{defaultValue:fd.Color.black},color:{defaultValue:fd.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(ma){this.getProperty("isSelected")!=ma&&(this.getSubmorphNamed("valueString").fontColor=ma?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",ma))}},submorphs:{after:["nonSelectionFontColor",
"selectionFontColor"],initialize:function(){fd.connect(this,"color",this,"relayout",{converter:function(ma,Ta){return(Ta&&Ta.isColor)!=(ma&&ma.isColor)}});this.relayout(!0)}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4705,end:10188})}(fd.ContextSensitiveWidget);fd.ColorWidget=
Ud;fd.ColorWidget=Ud;fd.ColorWidget=Ud;Ud=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("BooleanWidget")&&"function"===typeof Wb.BooleanWidget?Wb.BooleanWidget:Wb.BooleanWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},
{key:"properties",get:function(){return{fontFamily:{defaultValue:fd.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(ma){this.setProperty("boolean",ma);this.value=fd.obj.safeToString(ma);this.fontColor=this.boolean?fd.Color.green:fd.Color.red}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10197,end:10682})}(fd.Label);fd.BooleanWidget=Ud;fd.BooleanWidget=Ud;fd.BooleanWidget=Ud;Ud=db("N",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("NumberWidget")&&"function"===typeof Wb.NumberWidget?Wb.NumberWidget:Wb.NumberWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){wd._get(Object.getPrototypeOf($a.prototype),
"onMouseDown",this).call(this,ma);"up"==ma.targetMorph.name&&this.increment();"down"==ma.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return fd.obj.dissoc(wd._get(Object.getPrototypeOf($a.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(ma,Ta){Ta=void 0===Ta?!0:Ta;this.setProperty("number",Ta?ma/this.scaleFactor:ma);fd.signal(this,"number",this.number);this.relayout(Ta)}},{key:"relayoutButtons",value:function(){var ma=this.getSubmorphNamed("up"),
Ta=this.getSubmorphNamed("down");this.getSubmorphNamed("value");ma.height=Ta.height=Math.floor(this.height/2);ma.width=Ta.width=20}},{key:"onChange",value:function(ma){wd._get(Object.getPrototypeOf($a.prototype),"onChange",this).call(this,ma);"extent"!=ma.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(ma){var Ta=this.getSubmorphNamed("value"),qb=this.showStepControls?20:0;Ta&&(this.autofit?(ma||(Ta.value=this.number*this.scaleFactor),Ta.fit(),this.height=Ta.height,this.width=
Ta.width+qb):ma||(Ta.width=this.width-qb),this.relayoutButtons(),ma||(Ta.value=fd.num.roundTo(this.number*this.scaleFactor,1),Ta.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,Ta.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,Ta.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,
!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(ma){this.setProperty("autofit",ma);this.getSubmorphNamed("value").scaleToBounds=!ma}},number:{defaultValue:0,after:["unit","autofit"],set:function(ma){this.setProperty("number",ma);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
floatingPoint:{after:["number","submorphs"],set:function(ma){this.setProperty("floatingPoint",ma);this.get("value").floatingPoint=ma},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var ma=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&ma&&!!ma[1]}},padding:{isStyleProp:!0,defaultValue:fd.rect(5,3,0,0),after:["submorphs"],set:function(ma){this.setProperty("padding",ma);this.getSubmorphNamed("value").padding=
ma}},extent:{defaultValue:fd.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(ma){this.get("value").baseFactor=ma}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var ma=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){ma.relayout()})}},fontColor:{isStyleProp:!0,
defaultValue:fd.Color.rgbHex("#0086b3"),set:function(ma){this.setProperty("fontColor",ma)}},isSelected:{set:function(ma){this.getProperty("isSelected")!=ma&&(ma?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",ma))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(ma){this.setProperty("fontFamily",ma)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(ma){this.setProperty("fontSize",
ma)}},layout:{initialize:function(){this.layout=new fd.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(ma){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=ma)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(ma){0<ma.length||(this.submorphs=[new fd.ValueScrubber({name:"value",unit:this.unit,
floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[fd.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[fd.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(fd.Morph));fd.NumberWidget=Ud;fd.NumberWidget=Ud;fd.NumberWidget=Ud;fc=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("ShadowWidget")&&"function"===typeof Wb.ShadowWidget?Wb.ShadowWidget:Wb.ShadowWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){this.openPopover()}},
{key:"openPopover",value:function(){var ma=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return Ta=new fd.popovers.ShadowPopover({hasFixedPosition:!!ma.ownerChain().find(function(ec){return ec.hasFixedPosition}),shadowValue:ma.shadowValue}),qb.yield(Ta.fadeIntoWorld(ma.globalBounds().center()),2);fd.connect(Ta,"shadowValue",ma,"shadowValue");fd.connect(ma,"shadowValue",ma,"update");fd.signal(ma,"openWidget",Ta);qb.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var ma=this.shadowValue,Ta=ma.blur,qb=ma.spread,ec=ma.distance;ma=ma.color;var Ic=$jscomp.makeIterator(this.submorphs),ud=Ic.next().value,gd=Ic.next().value;gd=$jscomp.makeIterator(gd.submorphs).next().value;
Ic=Ic.next().value;ud.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";gd.fill=ma;Ic.value=", "+Ta+"px, "+ec+"px, "+qb+"px)"}},{key:"initShadowDisplay",value:function(){var ma=this.shadowValue,Ta=ma.blur,qb=ma.spread,ec=ma.distance;ma=ma.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},fd.morph({fill:fd.Color.transparent,extent:fd.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:fd.pt(this.fontSize,
this.fontSize),position:fd.pt(2,2),fill:ma,borderColor:fd.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+Ta+"px, "+ec+"px, "+qb+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(ma){this.setProperty("shadowValue",ma);this.renderShadowDisplay()}},fill:{defaultValue:fd.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(ma){this.submorphs.forEach(function(Ta){return Ta.fontColor=ma})}},isSelected:{defaultValue:!1,set:function(ma){this.setProperty("isSelected",ma);this.fontColor=ma?fd.Color.white:fd.Color.black}},layout:{initialize:function(){this.layout=new fd.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(fd.Morph);fd.ShadowWidget=fc;fd.ShadowWidget=fc;fd.ShadowWidget=fc;fc=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("PointWidget")&&"function"===typeof Wb.PointWidget?Wb.PointWidget:Wb.PointWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){this.openPopover()}},{key:"openPopover",value:function(){var ma=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return Ta=new fd.popovers.PointPopover({pointValue:ma.pointValue,hasFixedPosition:!!ma.ownerChain().find(function(ec){return ec.hasFixedPosition})}),qb.yield(Ta.fadeIntoWorld(ma.globalBounds().center()),2);fd.connect(Ta,"pointValue",ma,"pointValue");fd.signal(ma,"openWidget",Ta);
qb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(ma){this.setProperty("isSelected",ma);this.fontColor=ma?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:fd.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:fd.Color.black},fontFamily:{defaultValue:fd.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(ma){var Ta=fd.Color.rgbHex("#0086b3");this.setProperty("pointValue",ma);this.textAndAttributes=["pt(",null,ma.x.toFixed(),{fontColor:Ta},",",{},ma.y.toFixed(),{fontColor:Ta},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(fd.Label);fd.PointWidget=fc;fd.PointWidget=fc;fd.PointWidget=fc;fc=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("PaddingWidget")&&"function"===typeof Wb.PaddingWidget?Wb.PaddingWidget:Wb.PaddingWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){this.openPopover()}},{key:"openPopover",value:function(){var ma=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return Ta=new fd.popovers.RectanglePopover({hasFixedPosition:!!ma.ownerChain().find(function(ec){return ec.hasFixedPosition}),rectangle:ma.rectangle}),Ta.relayout(),qb.yield(Ta.fadeIntoWorld(ma.globalBounds().center()),2);fd.connect(Ta,"rectangle",ma,"rectangle");fd.signal(ma,
"openWidget",Ta);qb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:fd.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(ma){this.setProperty("isSelected",ma);this.fontColor=ma?fd.Color.white:fd.Color.black}},rectangle:{defaultValue:fd.rect(0),set:function(ma){this.setProperty("rectangle",
ma);this.value=fd.obj.safeToString(ma)}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(fd.Label);fd.PaddingWidget=fc;fd.PaddingWidget=fc;fd.PaddingWidget=fc;fc=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),$a=Wb.hasOwnProperty("IconWidget")&&
"function"===typeof Wb.IconWidget?Wb.IconWidget:Wb.IconWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"onMouseDown",value:function(ma){this.openPopover()}},{key:"openPopover",value:function(){var ma=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return Ta=new fd.popovers.IconPopover({hasFixedPosition:!!ma.ownerChain().find(function(ec){return ec.hasFixedPosition})}),
qb.yield(Ta.fadeIntoWorld(ma.globalBounds().center()),2);fd.connect(Ta,"select",ma,"iconValue",{converter:function(ec){return ec&&fd.Icon.makeLabel(ec).value},varMapping:{Icon:fd.Icon}});fd.signal(ma,"openWidget",Ta);qb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:fd.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,
get:function(){return this.value},set:function(ma){this.value=ma||"No Icon"}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(fd.Label);fd.IconWidget=fc;fd.IconWidget=fc;fd.IconWidget=fc;fc=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
$a=Wb.hasOwnProperty("StringWidget")&&"function"===typeof Wb.StringWidget?Wb.StringWidget:Wb.StringWidget=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"truncate",value:function(ma){return 200<ma.length?ma.slice(0,20)+"...":ma}},{key:"onFocus",value:function(ma){var Ta=this,qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){if(1==ec.nextAddress)return wd._get(Object.getPrototypeOf($a.prototype),
"onFocus",Ta).call(Ta,ma),Ta.readOnly?ec.return():Ta.stringTooLong?ec.yield(Ta.world().editPrompt("edit string",{requester:Ta,input:Ta.stringValue}),2):(Ta.borderColor=fd.Color.white.withA(.9),Ta.textString=Ta.stringValue,ec.return());qb=ec.yieldResult;if("string"===typeof qb)Ta.onInput(qb);ec.jumpToEnd()})}},{key:"onBlur",value:function(ma){wd._get(Object.getPrototypeOf($a.prototype),"onBlur",this).call(this,ma);this.readOnly||(this.borderColor=fd.Color.transparent,this.onInput(this.textString))}},
{key:"onInput",value:function(ma){this.owner.focus();fd.signal(this,"inputAccepted",ma);this.stringValue=ma}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:fd.Color.transparent},fontColor:{defaultValue:fd.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:fd.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:fd.rect(0,
0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(ma){this.setProperty("stringValue",ma);this.textString=this.truncate(ma);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(ma){this.setProperty("isSelected",ma);this.fontColor=ma?fd.Color.white:fd.Color.blue}}}}}],Wb,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(fd.InputLine);fd.StringWidget=fc;fd.StringWidget=fc;fd.StringWidget=fc;fd.valueWidgets=Xa;Object.assign(fd.valueWidgets,{NumberWidget:fd.NumberWidget,StringWidget:fd.StringWidget,IconWidget:fd.IconWidget,PaddingWidget:fd.PaddingWidget,ShadowWidget:fd.ShadowWidget,PointWidget:fd.PointWidget,
BooleanWidget:fd.BooleanWidget,LayoutWidget:fd.LayoutWidget,ColorWidget:fd.ColorWidget});var Xb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Xb.Ellipse=zc;Xb.Icon=We;Xb.Morph=kf;Xb.Path=ge;Xb.Text=pe;Xb.HorizontalLayout=Gd;Xb.VerticalLayout=Ub;Xb.morph=Bc;Xb.Color=Uc;Xb.pt=lc;Xb.rect=jd;Xb.Rectangle=Bd;Xb.arr=ac;Xb.connect=Hd;Xb.disconnect=uc;Xb.LabeledCheckBox=Jc;Xb.DropDownSelector=Wc;Xb.Button=Ad;Xb.Menu=Xd;Xb.NumberWidget=Ud;Xb.InteractiveMorphSelector=qd;Xb.easings=zd;(function(ic){var Wb=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("ProportionSlider")&&"function"===typeof Wb.ProportionSlider?Wb.ProportionSlider:Wb.ProportionSlider=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"alignWithTarget",value:function(){this.setBounds(this.axis.getProportionSliderBounds(this))}},{key:"onDragStart",value:function(){this.view.visible=!0}},{key:"onDrag",
value:function(ma){this.axis.adjustStretch(this.axis.getDelta(ma));this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){this.view.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionSlider"}},{key:"properties",get:function(){return{axis:{},view:{},fill:{defaultValue:Xb.Color.transparent}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:662,end:1139})})(Xb.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("MinViewer")&&"function"===typeof Wb.MinViewer?Wb.MinViewer:Wb.MinViewer=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"alignWithTarget",value:function(){this.textString="min: "+this.axis.targetAxis.min.toFixed()+
"px !"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinViewer"}},{key:"properties",get:function(){return{axis:{}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1141,end:1361})})(Xb.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
$a=Wb.hasOwnProperty("MinSlider")&&"function"===typeof Wb.MinSlider?Wb.MinSlider:Wb.MinSlider=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"alignWithTarget",value:function(){this.position=this.axis.getMinSliderPosition()}},{key:"requestToShow",value:function(){this.visible=!this.axis.targetAxis.fixed}},{key:"requestToHide",value:function(){this.active?this.shouldHide=!0:this.visible=!1}},{key:"onDragStart",
value:function(){var ma=$jscomp.makeIterator(this.submorphs),Ta=ma.next().value;ma=ma.next().value;this.axis.forceMenuHidden=!0;Ta.visible=!0;this.active=ma.visible=!0}},{key:"onDrag",value:function(ma){this.axis.targetAxis.min+=-this.getDelta(ma);this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){var ma=$jscomp.makeIterator(this.submorphs),Ta=ma.next().value;ma=ma.next().value;this.axis.forceMenuHidden=!1;Ta.visible=!1;this.active=ma.visible=!1;this.shouldHide&&(this.shouldHide=
this.visible=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinSlider"}},{key:"properties",get:function(){return{axis:{},fill:{defaultValue:Xb.Color.green},visible:{defaultValue:!1},becomesActiveOnHover:{defaultValue:!0}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:1363,end:2515})})(Xb.Ellipse);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("AxisHalo")&&"function"===typeof Wb.AxisHalo?Wb.AxisHalo:Wb.AxisHalo=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"initialize",value:function(){this.setBounds(this.fetchBounds());var ma=this.minSlider(),Ta=this.axisMenu(),qb=this.proportionSlider();qb.addMorph(ma);
this.submorphs=[qb,Ta];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(ma){this._forceMenuHidden=ma;this.axisMenu.visible=!ma}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();
this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(ma){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var ma=this.proportionViewer();return this.halo.addGuide(new Xb.ProportionSlider({nativeCursor:this.getResizeCursor(),axis:this,view:ma,submorphs:[this.devider(),ma]}))}},{key:"devider",value:function(){return new Xb.Morph({visible:!this.lastAxis,
fill:Xb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var ma=this.minSpaceVisualizer(),Ta=this.minViewer();return this.halo.addGuide(new Xb.MinSlider({nativeCursor:this.getResizeCursor(),axis:this,submorphs:[ma,Ta]}))}},{key:"minViewer",value:function(){return this.viewer(new Xb.MinViewer({axis:this,position:this.getMinViewerPosition()}))}},{key:"minSpaceBorder",value:function(){return new Xb.Path(Object.assign({position:Xb.pt(-1,
-1),borderStyle:"dashed",borderColor:Xb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var ma=this,Ta=this.minSpaceBorder();return this.halo.addGuide(new Xb.Morph({fill:Xb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[Ta],alignWithTarget:function(){this.extent=ma.getMinSpaceExtent();this.topLeft=Xb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var ma=this.lockButton(),Ta=this.menuButton(),qb=this;return new Xb.Morph({layout:this.getMenuLayout(),
submorphs:[ma,Ta],fill:Xb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(qb.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var ma=this;return this.halo.addGuide(new Xb.Morph({fill:Xb.Color.transparent,extent:Xb.pt(25,25),submorphs:[{center:Xb.pt(12.5,12.5),fill:Xb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){ma.targetAxis.fixed?(this.fontColor=Xb.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=Xb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){ma.targetAxis.fixed=!ma.targetAxis.fixed;ma.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var ma=this,Ta=this;return new Xb.Morph({fill:Xb.Color.transparent,extent:Xb.pt(25,25),submorphs:[{fill:Xb.Color.transparent,styleClasses:["fa","fa-cog"],center:Xb.pt(12.5,12.5)}],onMouseDown:function(qb){Ta.forceMenuVisible=!0;
this.addMorph(qb.state.menu=new Xb.Menu({position:Xb.pt(15,15),items:[["Remove "+Ta.subject,function(){ma.targetAxis.remove();ma.halo.initGuides();ma.halo.alignWithTarget()}],["Insert "+Ta.subject+" before",function(){ma.targetAxis.addBefore();ma.halo.initGuides();ma.halo.alignWithTarget()}],["Insert "+Ta.subject+" after",function(){ma.targetAxis.addAfter();ma.halo.initGuides();ma.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(ma){var Ta=ma.position;ma=ma.alignWithTarget;return this.halo.addGuide(new Xb.Text({styleClasses:["Halo"],
padding:Xb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Xb.Color.white,fill:Xb.Color.black.withA(.5),position:Ta,alignWithTarget:ma,readOnly:!0}))}},{key:"proportionViewer",value:function(){var ma=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=ma.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}},{key:"properties",get:function(){return{halo:{},targetAxis:{},container:{},
fill:{defaultValue:Xb.Color.transparent},submorphs:{initialize:function(){this.initialize()}}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2517,end:8448})})(Xb.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("RowHalo")&&
"function"===typeof Wb.RowHalo?Wb.RowHalo:Wb.RowHalo=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(ma){this.targetAxis.height+=ma}},{key:"getDelta",value:function(ma){return ma.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Xb.pt(-45,
this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Xb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(ma){return this.targetAxis.length>ma.height?Xb.pt(2,5):Xb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Xb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Xb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Xb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",
value:function(){return Xb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Xb.pt(this.container.width+50,2),vertices:[Xb.pt(0,1),Xb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Xb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(ma){return Xb.pt(0,ma.owner.height-5).extent(Xb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Xb.pt(15,4).extent(Xb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RowHalo"}},{key:"properties",get:function(){return{row:{},targetAxis:{derived:!0,get:function(){return this.halo.target.row(this.row)}}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8450,end:9799})})(Xb.AxisHalo);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
$a=Wb.hasOwnProperty("ColumnHalo")&&"function"===typeof Wb.ColumnHalo?Wb.ColumnHalo:Wb.ColumnHalo=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:Symbol.for("lively-instance-initialize"),value:function(ma){var Ta=ma.col;ma=ma.halo;wd._get(Object.getPrototypeOf($a.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:ma.target.col(Ta),halo:ma})}},{key:"subject",get:function(){return"column"}},
{key:"adjustStretch",value:function(ma){this.targetAxis.width+=ma}},{key:"getDelta",value:function(ma){return ma.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Xb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Xb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(ma){return this.targetAxis.length>ma.width?Xb.pt(5,3):Xb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Xb.HorizontalLayout}},
{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Xb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Xb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Xb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Xb.pt(2,this.container.height+50),vertices:[Xb.pt(1,0),Xb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Xb.pt(20,
40)}},{key:"getProportionSliderBounds",value:function(ma){return Xb.pt(ma.owner.width-5,0).extent(Xb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Xb.pt(4,15).extent(Xb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:9801,end:11056})})(Xb.AxisHalo);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("CellGuide")&&"function"===typeof Wb.CellGuide?Wb.CellGuide:Wb.CellGuide=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"menuItems",value:function(){var ma=this,Ta=Xb.Icon.textAttribute("check-square-o"),qb=Xb.Icon.textAttribute("square-o");
Ta[1].textStyleClasses.push("annotation");qb[1].textStyleClasses.push("annotation");qb[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?qb:Ta)),function(){ma.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ta:qb)),function(){ma.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Xb.Rectangle).sides),$jscomp.arrayFromIterable((new Xb.Rectangle).corners)).map(function(ec){return[[ec,
{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(ma.cellGroup.align==ec?Ta:qb),["  ",null]),function(){return ma.cellGroup.align=ec}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var ec=ma.cellGroup.morph;ec&&(ma.world().firstHand.grab(ec),ma.world().firstHand.longClickGrab=!0,ec.position=Xb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Wb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11058,end:12377})})(Xb.Morph);(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("LayoutHalo")&&"function"===typeof Wb.LayoutHalo?Wb.LayoutHalo:Wb.LayoutHalo=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd($a,ic,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{get:function(){return this.container.layout}},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Xb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12379,end:12833})})(Xb.Morph);Xa=db("G",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Wb.GridLayoutHalo?Wb.GridLayoutHalo:Wb.GridLayoutHalo=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return wd($a,ic,[{key:"previewDrop",value:function(ma){1>ma.length||(ma=this.cellGuides.find(function(Ta){return Ta.fullContainsWorldPoint($world.firstHand.position)}),ma!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=ma)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(ma){var Ta=this;this.currentCell&&ma.whenRendered().then(function(){return Ta.currentCell.cellGroup.morph=ma})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var ma=this.target,Ta=new Xb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Xb.Color.transparent,checked:ma.compensateOrigin}),qb=new Xb.LabeledCheckBox({label:"Resize Submorphs",fill:Xb.Color.transparent,name:"fitToCell",checked:ma.fitToCell});Xb.connect(Ta,"checked",ma,"compensateOrigin");Xb.connect(qb,"checked",ma,"fitToCell");Xb.connect(Ta,"checked",this,"alignWithTarget");return[Ta,qb]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Xb.arr.reverse(this.guides).forEach(function(ma){return ma.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var ma=this;Xb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(Ta){return Ta.cellGroup})).forEach(function(Ta){return ma.addMorph(ma.cellGuide(Ta))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var ma=this,Ta=this.addMorph({fill:Xb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(qb){Ta.addMorph(ma.cellGuide(qb))});this.cellGuides=Ta.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(ma){ma.isHaloItem=!0;this.guides.push(ma);return ma}},
{key:"initRowGuides",value:function(){var ma=this,Ta=this;this.addGuide(this.addMorph(new Xb.Morph({width:25,fill:Xb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Xb.pt(-5,0),alignWithTarget:function(){this.height=Ta.container.height}})));Xb.arr.range(0,this.target.rowCount-1).forEach(function(qb){ma.addMorph(new Xb.RowHalo({row:qb,halo:ma}))})}},{key:"initColumnGuides",value:function(){var ma=this,Ta=this;this.addGuide(this.addMorph(new Xb.Morph({height:25,fill:Xb.Color.gray.withA(.7),
borderRadius:15,width:this.container.width,bottomLeft:Xb.pt(0,-5),alignWithTarget:function(){this.width=Ta.container.width}})));Xb.arr.range(0,this.target.columnCount-1).forEach(function(qb){ma.addMorph(new Xb.ColumnHalo({col:qb,halo:ma}))})}},{key:"resizer",value:function(){var ma=this;return this.addGuide(new Xb.Morph({fill:Xb.Color.transparent,extent:Xb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(Ta){ma.container.resizeBy(Ta.state.dragDelta);ma.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
ma.extent}}))}},{key:"cellResizer",value:function(ma,Ta){var qb=this,ec="topLeft"==Ta?"bottomRight":"topLeft";return new Xb.Ellipse({borderWidth:1,visible:!1,borderColor:Xb.Color.black,nativeCursor:"nwse-resize",removeCell:function(Ic){ma.disconnect(Ic);qb.alignWithTarget()},addCell:function(Ic){ma.connect(Ic);qb.alignWithTarget()},start:function(){this.fixpointCell=ma[ec];this.draggedDelta=ma.bounds().partNamed(Ta);this.debugMorph=qb.addMorph(new Xb.Morph({fill:Xb.Color.orange.withA(.5)}))},update:function(Ic){var ud=
this;this.draggedDelta=this.draggedDelta.addPt(Ic);var gd=Xb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(gd);qb.cells.forEach(function(me){var ue=gd.intersection(me.bounds()).area()/me.bounds().area();ma.includes(me)&&.1>ue&&ud.removeCell(me);!ma.includes(me)&&ue>1/3&&ud.addCell(me)})},onDragEnd:function(Ic){this.debugMorph.remove()},onDragStart:function(Ic){this.start(Ic.position)},onDrag:function(Ic){this.update(Ic.state.dragDelta)}})}},{key:"cellGuide",
value:function(ma){var Ta=this,qb=this.cellResizer(ma,"topLeft"),ec=this.cellResizer(ma,"bottomRight");return this.addGuide(new Xb.CellGuide({cellGroup:ma,bounds:ma.bounds(),fill:Xb.Color.transparent,borderColor:Xb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[qb,ec],onMouseDown:function(Ic){this.becomeActive()},deactivate:function(){this.borderColor=Xb.Color.orange;this.fill=Xb.Color.transparent;this.submorphs.forEach(function(Ic){Ic.visible=!1})},becomeActive:function(){Ta.guides.forEach(function(Ic){Ic.isCell&&
Ic.deactivate()});this.borderColor=Xb.Color.rgbHex("#1565C0");this.fill=Xb.Color.rgbHex("#1565C0").withA(.3);Ta.addMorph(this.remove());this.submorphs.forEach(function(Ic){Ic.visible=!0})},startPreview:function(Ic){this.fill=Xb.Color.orange.withA(.7)},stopPreview:function(Ic){this.fill=Xb.Color.transparent},onDrop:function(Ic){var ud=$jscomp.makeIterator(Ic.hand.grabbedMorphs).next().value;Ic.hand.dropMorphsOn(Ta.container);ma.morph=ud},alignWithTarget:function(){ma.bounds().isNonEmpty()?(this.setBounds(ma.bounds()),
qb.center=this.innerBounds().topLeft(),ec.center=this.innerBounds().bottomRight()):(Xb.arr.remove(Ta.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Xb.Color.transparent},cells:{derived:!0,get:function(){return Xb.arr.flatten(this.target.col(0).items.map(function(ma){return ma.row(0).items}))}},submorphs:{after:["target"],initialize:function(){this.initialize()}}}}}],Wb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12842,end:20283})}(Xb.LayoutHalo));Xb.GridLayoutHalo=Xa;Xb.GridLayoutHalo=Xa;Xb.GridLayoutHalo=Xa;Ud=function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Wb.TilingLayoutHalo?Wb.TilingLayoutHalo:Wb.TilingLayoutHalo=
function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"remove",value:function(){wd._get(Object.getPrototypeOf($a.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(ma){}},{key:"removePreviews",value:function(){this.previews.forEach(function(ma){return ma.clear()})}},
{key:"previewDrop",value:function(ma){var Ta=this;0<this.previews.length||(this.previews=ma.map(function(qb){return Ta.container.addMorph({type:Xb.DropPreview,bounds:qb.bounds()})}),this.previews.forEach(function(qb){qb.step()}))}},{key:"updateSpacing",value:function(ma){this.target.spacing=ma}},{key:"updateAxis",value:function(ma){this.target.axis=ma}},{key:"updateAlign",value:function(ma){this.target.align=ma}},{key:"optionControls",value:function(){var ma=this.target,Ta=new Xb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:ma.axis,values:["row","column"]}),qb=new Xb.DropDownSelector({borderRadius:2,padding:3,selectedValue:ma.align,values:["left","center"]});ma=new Xb.NumberWidget({min:0,number:ma.spacing,padding:Xb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Xb.Color.gray,unit:"px"});Xb.connect(ma,"update",this,"updateSpacing");Xb.connect(qb,"update",this,"updateAlign");Xb.connect(Ta,"update",this,"updateAxis");var ec={type:"label",padding:Xb.rect(0,5,5,5),fill:Xb.Color.transparent,
fontColor:Xb.Color.gray.darker(),readOnly:!0};return[[Object.assign({},ec,{textString:"Submorph Spacing"}),ma],[Object.assign({},ec,{textString:"Tiling Align"}),qb],[Object.assign({},ec,{textString:"Tiling Axis"}),Ta]].map(function(Ic){return{submorphs:Ic,fill:null,layout:new Xb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Xb.Color.transparent},previews:{defaultValue:[]}}}}],
Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20292,end:22407})}(Xb.LayoutHalo);Xb.TilingLayoutHalo=Ud;Xb.TilingLayoutHalo=Ud;Xb.TilingLayoutHalo=Ud;(function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("DropPreview")&&"function"===typeof Wb.DropPreview?
Wb.DropPreview:Wb.DropPreview=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var ma=this,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return Ta=Xb.easings.inOutQuad,qb.yield(ma.animate({opacity:.5,duration:(ma.pulseDuration-10)/2,easing:Ta}),2);if(3!=qb.nextAddress)return qb.yield(ma.animate({opacity:1,
duration:(ma.pulseDuration-10)/2,easing:Ta}),3);ma.stopped||ma.step();qb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Xb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Xb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22409,end:23245})})(Xb.Morph);Ud=db("F",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Wb.FlexLayoutHalo?Wb.FlexLayoutHalo:Wb.FlexLayoutHalo=function(ma){ma&&
ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,ic,[{key:"handleDrop",value:function(ma){}},{key:"previewDrop",value:function(ma){var Ta=this;0<this.previews.length||(this.previews=ma.map(function(qb){return Ta.container.addMorph({type:Xb.DropPreview,position:Ta.container.localize(Ta.world().firstHand.position),extent:qb.bounds().extent()})}),this.previews.forEach(function(qb){qb.step()}))}},{key:"remove",value:function(){wd._get(Object.getPrototypeOf($a.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(ma){return ma.clear()})}},{key:"onDrop",value:function(ma){this.removePreviews();ma.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(ma){ma&&(this.originalExtent=this.container.extent);this.target.autoResize=ma;ma||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(ma){this.target.resizeSubmorphs=ma;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(ma){this.target.align=ma}},{key:"updateDirectionPolicy",value:function(ma){this.target.direction=ma}},{key:"updateSpacing",value:function(ma){this.target.spacing=ma}},{key:"optionControls",value:function(){var ma=this.target,Ta=ma.possibleAlignValues?{fill:Xb.Color.transparent,layout:new Xb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Xb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:ma.align,values:ma.possibleAlignValues})]}:null,qb=ma.possibleDirectionValues?{fill:Xb.Color.transparent,layout:new Xb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new Xb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:ma.direction,values:ma.possibleDirectionValues})]}:
null,ec=new Xb.NumberWidget({fill:Xb.Color.white,borderWidth:1,borderRadius:4,padding:Xb.rect(5,4,0,0),borderColor:Xb.Color.gray,min:0,number:ma.spacing,unit:"px"}),Ic=new Xb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Xb.Color.transparent,checked:ma.autoResize});ma=new Xb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:Xb.Color.transparent,checked:ma.resizeSubmorphs});Xb.connect(ec,"update",this,"updateSpacing");
Xb.connect(Ic,"checked",this,"updateAutoResizePolicy");Xb.connect(ma,"checked",this,"updateResizeSubmorphsPolicy");Ta&&Xb.connect(Ta.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");qb&&Xb.connect(qb.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[Ic,ma].concat($jscomp.arrayFromIterable([Ta,qb].filter(Boolean)),[{fill:Xb.Color.transparent,layout:new Xb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Xb.Color.gray.darker(),padding:Xb.rect(0,
5,5,5)},ec]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Xb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:23254,end:27441})}(Xb.LayoutHalo));Xb.FlexLayoutHalo=Ud;Xb.FlexLayoutHalo=Ud;Xb.FlexLayoutHalo=Ud;fc=db("c",function(ic){var Wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),$a=Wb.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof Wb.ProportionalLayoutHalo?Wb.ProportionalLayoutHalo:Wb.ProportionalLayoutHalo=function(ma){ma&&ma[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd($a,
ic,[{key:"handleDrop",value:function(ma){}},{key:"onDrop",value:function(ma){ma.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(ma){var Ta={};this.target.changeSettingsFor(ma.submorph,(Ta[ma.axis]=ma.policy,Ta),!0)}},{key:"onSubmorphSettingsDragStart",value:function(ma,Ta){var qb=this;ma.stop();var ec=this.target.settingsFor(Ta);Ta="";for(var Ic in ec)Ta+=Ic+":"+
ec[Ic]+" ";var ud=Xb.morph({type:"label",value:Ta,isLayoutable:!1});ud.wantsToBeDroppedOn=function(gd){return qb.target.layoutableSubmorphs.includes(gd)};ud.onBeingDroppedOn=function(gd,me){ud.remove();if(gd=qb.target.layoutableSubmorphs.includes(me)?me:ma.world.morphsContainingPoint(ma.hand.position).find(function(ue){return qb.target.layoutableSubmorphs.includes(ue)}))qb.updateSubmorphProportionalLayoutSettings({policy:ec.x,axis:"x",submorph:gd}),qb.updateSubmorphProportionalLayoutSettings({policy:ec.y,
axis:"y",submorph:gd}),gd.show(),$world.setStatusMessage("layout settings applied")};ma.hand.grab(ud)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var ma=this,Ta,qb,ec,Ic,ud,gd,me,ue,Uf,zf,qf,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Df){switch(Df.nextAddress){case 1:return Ta=ma.target.layoutableSubmorphs,ma.env.eventDispatcher.isKeyPressed("Shift")?(ec=Ta.map(function(Bf){return{isListItem:!0,string:String(Bf),value:Bf}}),Df.yield($world.listPrompt("Select morph",
ec,{requester:ma,onSelection:function(Bf){return Bf.show()}}),5)):Df.yield(Xb.InteractiveMorphSelector.selectMorph(ma.world(),ma,function(Bf){return Ta.includes(Bf)}),4);case 4:qb=Df.yieldResult;Df.jumpTo(3);break;case 5:Ic=Df.yieldResult,ud=$jscomp.makeIterator(Ic.selected),qb=ud.next().value;case 3:if(!qb)return Df.return();gd=ma.state.popover.get("controlContainer");me=gd.getAllNamed(/submorph config/);ue=["move","resize","scale","fixed"];Uf=ma.target.settingsFor(qb);me.length||(gd.submorphs=[].concat($jscomp.arrayFromIterable(gd.submorphs),
[{name:"submorph config X-Axis policy",position:Xb.pt(0,ma.height),fill:Xb.Color.transparent,layout:new Xb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Xb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Uf.x,values:ue})]},{name:"submorph config Y-Axis policy",position:Xb.pt(0,ma.height),fill:Xb.Color.transparent,layout:new Xb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),
submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Xb.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Uf.y,values:ue})]},Xb.morph({position:Xb.pt(0,ma.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));zf=gd.getSubmorphNamed("x-axis policy selector");qf=gd.getSubmorphNamed("y-axis policy selector");C=gd.getSubmorphNamed("dragme");Xb.disconnect(zf,"selectedValue",ma,"updateSubmorphProportionalLayoutSettings");Xb.disconnect(qf,
"selectedValue",ma,"updateSubmorphProportionalLayoutSettings");zf.selectedValue=Uf.x;qf.selectedValue=Uf.y;Xb.connect(C,"onDragStart",ma,"onSubmorphSettingsDragStart",{updater:function(Bf,Pe){return Bf(Pe,qb)},varMapping:{submorph:qb}});Xb.connect(zf,"selectedValue",ma,"updateSubmorphProportionalLayoutSettings",{converter:function(Bf){return{policy:Bf,axis:"x",submorph:qb}},varMapping:{submorph:qb}});Xb.connect(qf,"selectedValue",ma,"updateSubmorphProportionalLayoutSettings",{converter:function(Bf){return{policy:Bf,
axis:"y",submorph:qb}},varMapping:{submorph:qb}});Df.jumpToEnd()}})}},{key:"optionControls",value:function(ma){this.state.popover=ma;var Ta=this.target;ma=new Xb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Xb.Color.transparent,checked:Ta.xAxisEnabled});Ta=new Xb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Xb.Color.transparent,checked:Ta.yAxisEnabled});var qb=new Xb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Xb.Icon.textAttribute("crosshairs")),
["\u00a0Change submorph settings"])});Xb.connect(ma,"checked",this,"updateXAxisEnabled");Xb.connect(Ta,"checked",this,"updateYAxisEnabled");Xb.connect(qb,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[qb]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Xb.Color.transparent}}}}],Wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27450,end:33182})}(Xb.LayoutHalo));Xb.ProportionalLayoutHalo=fc;Xb.ProportionalLayoutHalo=fc;Xb.ProportionalLayoutHalo=fc;var Me=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Me.Halo=gc;Me.MorphHighlighter=ub;Me.InteractiveMorphSelector=qd;Me.StatusMessage=Na;Me.StatusMessageForMorph=Vb;Me.show=Za;Me.showConnector=Pa;Me.ProportionalLayoutHalo=fc;
Me.GridLayoutHalo=Xa;Me.FlexLayoutHalo=Ud;Me.showAndSnapToGuides=Pc;Me.removeSnapToGuidesOf=xc;Me.StatusMessage=Na;Me.StatusMessage=Na;Me.StatusMessageForMorph=Vb;Me.StatusMessageForMorph=Vb;Me.show=Za;Me.show=Za;Me.showConnector=Pa;Me.showConnector=Pa;Me.Halo=gc;Me.Halo=gc;Me.MorphHighlighter=ub;Me.MorphHighlighter=ub;Me.InteractiveMorphSelector=qd;Me.InteractiveMorphSelector=qd;Me.ProportionalLayoutHalo=fc;Me.ProportionalLayoutHalo=fc;Me.GridLayoutHalo=Xa;Me.GridLayoutHalo=Xa;Me.FlexLayoutHalo=
Ud;Me.FlexLayoutHalo=Ud;Me.showAndSnapToGuides=Pc;Me.showAndSnapToGuides=Pc;Me.removeSnapToGuidesOf=xc;Me.removeSnapToGuidesOf=xc;Na=Object.freeze({__proto__:null,StatusMessage:Na,StatusMessageForMorph:Vb,show:Za,showConnector:Pa,Halo:gc,MorphHighlighter:ub,InteractiveMorphSelector:qd,ProportionalLayoutHalo:fc,GridLayoutHalo:Xa,FlexLayoutHalo:Ud,showAndSnapToGuides:Pc,removeSnapToGuidesOf:xc,SvgStyleHalo:void 0});db("i",Na);db({_:void 0,d:void 0})}}});