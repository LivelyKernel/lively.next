System.register(["kld-intersections"],function(Ca,Bb){var Kb;return{setters:[function(lc){Kb=lc.default}],execute:function(){function lc(g,e,m){m=m||0;var c=[];if(g<=e)for(0>=m&&(m=-m||1);g<=e;g+=m)c.push(g);else for(0<=m&&(m=-m||-1);g>=e;g+=m)c.push(g);return c}function bc(g,e){for(var m=Array(g);0<g;)m[--g]=e;return m}function Td(g,e){for(var m=Array(g);0<g;)m[--g]=e(g);return m}function Xc(g,e,m){for(var c=[],h=0;h<g.length;h++){var n=g[h];e.call(m,n)&&c.push(n)}return c}function Wd(g,e){var m;
g.find(function(c,h){return m=e(c,h)});return m}function $c(g,e){return g.filter(function(m){return!!m[e]})}function Pc(g,e,m){"string"===typeof e&&(e=new RegExp(e,"i"));return Nb.filter(g,Nb.filter.test.bind(e))}function md(g,e){return Nb.filter(g,function(m,c){return!!e[c]})}function ge(g,e,m){return Nb.filter(g,function(c,h){return!e.call(m,c,h)})}function Qe(g,e){return Nb.filter(g,function(m){return!m[e]})}function kf(g,e){return Nb.filter(g,function(m){return m!==e})}function ke(g,e){return Nb.filter(g,
function(m){return-1===e.indexOf(m)})}function cc(g,e){if(!g.length)return g;var m=[g[0]];if(e)for(e=1;e<g.length;e++){var c=g[e];c!==m[m.length]&&m.push(c)}else for(e=1;e<g.length;e++)c=g[e],-1===m.indexOf(c)&&m.push(c);return m}function Jc(g,e,m){for(var c=g.slice(),h=c.length;h--;)for(var n=g[h],b=h+1;b<c.length;b++)e.call(m,n,c[b])&&c.splice(b--,1);return c}function Nd(g,e){for(var m={},c=[],h=0;h<g.length;h++){var n=g[h];m[n[e]]||(m[n[e]]=!0,c.push(n))}return c}function ec(g){return Nb.filter(g,
Boolean)}function Zd(g){for(var e=0,m=0,c=g.length;e<c;)g.hasOwnProperty(e)&&(g[m++]=g[e]),e++;for(;m++<c;)g.pop();return g}function le(g,e,m){return g.forEach(e,m)}function yc(){var g=Array.from(arguments),e=g.shift(),m="function"===typeof Nb.last(g)?g.pop():function(h){return h},c=[e].concat(g).map(function(h){return Array.from(h)});return e.map(function(h,n){return m(Nb.pluck(c,n),n)})}function Gc(g,e){if("number"===typeof e){if(0>=e)return g;e--}return g.reduce(function(m,c){return m.concat(Array.isArray(c)?
Gc(c,e):[c])},[])}function Qb(g,e,m){for(var c=[],h=0;h<g.length;h++)c.push.apply(c,e.call(m,g[h],h));return c}function Ec(g,e){return g.reduce(function(m,c){0<m.length&&m.push(e);m.push(c);return m},[])}function dd(g,e){return Nb.interpose(g,e)}function Hd(g,e,m){return g.map(e,m)}function Ld(g,e,m,c,h,n,b,d){return g.map(function(k){return k[e](m,c,h,n,b,d)})}function uc(g,e){return g.map(function(m){return m[e]})}function rb(g,e,m,c){return g.reduce(e,m,c)}function Gb(g,e,m,c){return g.reduceRight(e,
m,c)}function Oa(g,e,m){return g.some(e,m)}function ab(g,e,m){return g.every(e,m)}function Qa(g,e){var m=g.length;if(!e||m!==e.length)return!1;for(var c=0;c<m;c++){if(g[c]&&e[c]&&g[c].equals&&e[c].equals)if(g[c].equals(e[c]))continue;else return!1;if(g[c]!=e[c])return!1}return!0}function Ja(g,e){var m=g.length;if(!e||m!==e.length)return!1;for(var c=0;c<m;c++)if(!Nb.objectEquals(g[c],e[c]))return!1;return!0}function eb(g,e){if(e)for(e=1;e<g.length;e++){if(g[e-1]<g[e])return!1}else for(e=1;e<g.length;e++)if(g[e-
1]>g[e])return!1;return!0}function Sb(g,e){return g.sort(e)}function Ac(g,e,m){return Nb.pluck(g.map(function(c,h){return{value:c,criteria:e.call(m,c,h)}}).sort(function(c,h){c=c.criteria;h=h.criteria;return c<h?-1:c>h?1:0}),"value")}function sb(g,e){return Nb.sortBy(g,function(m){return m[e]})}function Ab(g){return g.reverse()}function vb(g){return g.slice().reverse()}function ha(g,e,m){m=m||String;return g.map(function(c){return m(c).match(e)})}function Ha(g){return g[0]}function W(g){return g[g.length-
1]}function ra(g,e){return Nb.filter(Nb.uniq(g),function(m){return-1<e.indexOf(m)})}function Za(g,e){g=g.slice();for(var m=0;m<e.length;m++){var c=e[m];-1===g.indexOf(c)&&g.push(c)}return g}function qb(g,e,m){g.splice(m,0,e)}function sc(g,e){g.splice(e,1)}function wd(g,e){var m=g.indexOf(e);0<=m&&Nb.removeAt(g,m);return e}function nc(g,e){g.push.apply(g,e);return g}function Ob(g,e,m){g.splice.apply(g,[m,0].concat(e))}function $d(g,e){g.includes(e)||g.push(e)}function Id(g,e,m){g.splice(m,1,e)}function kb(g){g.length=
0;return g}function Eb(g,e){for(var m=0;m<g.length;m++)if(!e.includes(g[m]))return!1;return!0}function ad(g,e,m,c){m=m||Nb.NullFunction;c=c||Nb.GLOBAL;e=e||function(h,n,b){n.call(c,h,b)};return g.reduceRight(function(h,n,b){return function(){e.call(c,h,n,b)}},m)()}function ub(g,e,m,c,h,n){c=c||function(){};return g.clone().reverse().reduce(function(b,d,k){return function(){e.call(h||Nb.GLOBAL,d,k);n&&0!==k%n?b():b.delay(m)}},c)()}function cd(){var g=Array.from(arguments),e=g.shift(),m=e.length,c=
!1;if(1===g.length){var h=g[0].progressBar;var n=g[0].iterator;var b=g[0].labelFunction;var d=g[0].whenDone;var k=g[0].context}else h=g[0],n=g[1],b=g[2],d=g[3],k=g[4];k||(k="undefined"!==typeof window?window:global);b||(b=function(a){return a});h||(c=!0,h=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});h.value=0;e.reduceRight(function(a,f,l){return function(){try{h.value=l/m,b&&(h.label=
b.call(k,f,l)),n.call(k,f,l)}catch(r){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",l,f,r,r.stack)}Nb.delay(a,0)}},function(){h.value=1;c&&function(){h.remove()}.delay(0);d&&d.call(k)})();return e}function Vc(g,e,m){0>e&&(e=g.length+e);0>m&&(m=g.length+m);var c=g[e];g[e]=g[m];g[m]=c;return g}function ib(g,e){e=e||1;return g.slice(e).concat(g.slice(0,e))}function Ra(g,e,m){return Nb.Group.fromArray(g,e,m)}function pb(g,e){return Nb.groupBy(g,function(m){return m[e]})}function bb(g,
e,m){e=e||function(n){return n};var c=[],h=[];g.forEach(function(n,b){(e.call(m,n,b)?c:h).push(n)});return[c,h]}function Oc(g,e,m){function c(n,b){if(!b.length)return[n,[]];var d=b[0];b=b.slice(1);var k=n.concat([d]);if(e.call(m,k))return c(k,b);n=c(n,b);return[n[0],[d].concat(n[1])]}function h(n,b){if(!b.length)return n;b=c([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return h(n.concat([b[0]]),b[1])}return h([],g)}function ma(g,
e){e=e||1;return Nb.range(0,Math.ceil(g.length/e)-1).map(function(m){return g.slice(m*e,m*e+e)},g)}function Aa(g,e){for(var m=g.map(function(b,d){return b[e[d]]}),c=e.slice(),h=g.length;h--;0<=h){var n=c[h]+1;if(g[h][n]){c[h]=n;break}else if(0===h){c=void 0;break}else c[h]=0}return[m,c]}function xb(g){for(var e=g.reduce(function(n,b){return n*b.length},1),m=g.map(function(n){return 0}),c=Array(e),h=0;h<e;h++)m=Nb.combinationsPick(g,m),c[h]=m[0],m=m[1];return c}function P(g,e){return g.slice(0,e)}
function va(g,e){return g.slice(e)}function Va(g,e,m){for(var c=0;c<g.length&&e.call(m,g[c],c);c++);return g.slice(0,c)}function Db(g,e,m){for(var c=0;c<g.length&&e.call(m,g[c],c);c++);return g.slice(c)}function mc(g){for(var e=Nb.range(0,g.length-1),m=Array(g.length),c=0;c<g.length;c++){var h=e.splice(Math.round(Math.random()*(e.length-1)),1);m[h]=g[c]}return m}function Tb(g,e,m){e=e||function(h){return h};var c;g.reduce(function(h,n,b){b=e.call(m,n,b);if("number"!==typeof b||b<=h)return h;c=n;return b},
-Infinity);return c}function Tc(g,e,m){e=e||function(c){return c};return Nb.max(g,function(c,h){return-e.call(m,c,h)})}function gd(g){for(var e=0,m=0;m<g.length;m++)e+=g[m];return e}function se(g,e){return g.reduce(function(m,c){return c===e?m+1:m},0)}function Cf(g){return g.length}function me(g,e){if("undefined"===typeof e||"number"===typeof e){var m=e||Math.ceil(Math.log(g.length)/Math.log(2)+1),c=Math.ceil(Math.round(g.length/m));return Nb.range(0,m-1).map(function(h){return g.slice(h*c,(h+1)*
c)})}if(e instanceof Array)return g.reduce(function(h,n){if(n<e[1])return h[0].push(n),h;for(var b=1;b<e.length;b++)if(n>=e[b]&&(!e[b+1]||n<=e[b+1]))return h[b].push(n),h;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+e);},Nb.range(1,e.length).map(function(){return[]}))}function Se(g){return[].concat(g)}function Ze(g){return Nb.from(g)}function yf(g,e,m){return g.forEach(e,m)}function vd(g,e,m){return g.every(e,m)}function Ve(g,e,m){return g.some(e,m)}function Ye(g,e,m){return g.map(e,
m)}function cg(g,e,m){return Nb.filter(g,e,m)}function eg(g,e,m,c){c&&(m=m.bind(c));return g.reduce(m,e)}function Vg(g,e,m){function c(b,d){if(!n&&(b||d)){n=!0;try{m(b,h)}catch(k){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(k.stack||k))}}}var h=[],n=!1;return g.reduceRight(function(b,d,k){if(!n)return function(a,f){if(a)return c(a);0<k&&h.push(f);try{e(d,k,Nb.once(b))}catch(l){c(l)}}},function(b,d){h.push(d);c(b,!0)})()}function pc(g,e,m,c){function h(){for(;f<e.parallel&&
a<g.length;)l[a++]()}function n(r,v){if(!(-1<d.indexOf(r)||(d.push(r),f--,k)))if(!v&&d.length<g.length)h();else{k=!0;try{c&&c(v,b)}catch(y){console.error("Error in mapAsync - main callback invocation error:\n"+(y.stack||y))}}}"function"===typeof e&&(c=m,m=e,e=null);e=e||{};if(!g.length)return c&&c(null,[]);e.parallel||(e.parallel=Infinity);var b=[],d=[],k=!1,a=0,f=0,l=g.map(function(r,v){return function(){f++;try{m(r,v,Nb.once(function(y,A){b[v]=y||A;n(v,y)}))}catch(y){n(v,y)}}});return h()}function qh(){return function(){}}
function rh(){return function(g){return g}}function nh(){return function(){return null}}function Jf(){return function(){return!1}}function Na(){return function(){return!0}}function fb(){return function(){throw Error("Not yet implemented");}}function Jb(g){var e=[],m;for(m in g)g.__lookupGetter__(m)||"function"!==typeof g[m]||e.push(m);return e}function da(g){var e=[],m;for(m in g)!g.__lookupGetter__(m)&&g.hasOwnProperty(m)&&"function"===typeof g[m]&&e.push(m);return e}function Ia(g){if(g.superclass)return[];
var e=g.toString();g="";var m=e.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);m?g=m[1]||m[2]||"":(e=e.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&e[1]&&(g=e[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(c){return c.trim()}).filter(function(c){return!!c})}function nb(g){var e="";g.declaredClass?e+=g.declaredClass+">>":g.declaredObject&&(e+=g.declaredObject+".");return e+(g.methodName||g.displayName||g.name||"anonymous")}function yb(g){g=
String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var e=g.split(/\n|\r/),m,c=0;c<e.length;c++){var h=e[c].match(/^(\s+)[^\s]/);h&&(void 0===m||h[1].length<m.length)&&(m=h[1])}return m?g.replace(new RegExp("^"+m,"gm"),""):g}function Cc(g){var e=Date.now();g();return Date.now()-e}function xc(g,e){for(var m=Date.now(),c=0;c<e;c++)g();return(Date.now()-m)/e}function jd(g,e){var m=Array.prototype.slice.call(arguments),c=m.shift();e=1E3*m.shift();return setTimeout(function(){return c.apply(c,
m)},e)}function ud(g,e){var m,c,h,n,b,d,k=od.debounce(e,function(){b=n=!1});return function(){m=this;c=arguments;h||(h=setTimeout(function(){h=null;b&&g.apply(m,c);k()},e));n?b=!0:d=g.apply(m,c);k();n=!0;return d}}function nd(g,e,m){var c;return function(){var h=this,n=arguments;m&&!c&&e.apply(h,n);clearTimeout(c);c=setTimeout(function(){c=null;m||e.apply(h,n)},g)}}function pf(g,e,m){var c=od._throttledByName;return c[g]?c[g]:c[g]=od.throttle(function(){od.debounceNamed(g,e,function(){delete c[g]})();
return m.apply(this,arguments)},e)}function kg(g,e,m,c){var h=od._debouncedByName;return h[g]?h[g]:h[g]=od.debounce(e,function(){delete h[g];return m.apply(this,arguments)},c)}function Wf(g,e){var m=od._queues,c=m[g]||(m[g]={_workerActive:!1,worker:e,tasks:[],drain:null,push:function(h){c.tasks.push(h);c._workerActive||c.activateWorker()},pushAll:function(h){h.forEach(function(n){c.tasks.push(n)});c._workerActive||c.activateWorker()},pushNoActivate:function(h){c.tasks.push(h)},handleError:function(h){h&&
console.error("Error in queue: "+h)},activateWorker:function(){function h(d){c.handleError(d);c.activateWorker()}var n=c.tasks,b=c._workerActive;if(0===n.length)b&&(c._workerActive=!1,"function"===typeof c.drain&&c.drain()),delete m[g];else{b||(c._workerActive=!0);try{c.worker(n.shift(),h)}catch(d){h(d)}}}});return c}function Fh(g,e,m){function c(){a&&clearTimeout(a);d=!0;delete n[g]}function h(f){d||(c(),b.callbacks.forEach(function(l){try{l.apply(null,f)}catch(r){console.error("Error when invoking callbacks in queueUntil ["+
g+"]:\n"+String(r.stack||r))}}))}var n=od._queueUntilCallbacks,b=n[g];if(b)return b;var d=!1,k=!1;if(m)var a=setTimeout(function(){d||h([Error("timeout")])},m);b=n[g]={callbacks:[],cancel:function(){k=!0;c()},whenDone:function(f){b.callbacks.push(f);return b}};setTimeout(function(){if(!k)try{e(function(){h(arguments)})}catch(f){h([f])}},0);return b}function Df(){var g=Array.prototype.slice,e=g.call(arguments),m=od._composeAsyncDefaultEndCallback,c=m,h,n,b=new Promise(function(d,k){h=d;n=k});return e.reverse().reduce(function(d,
k,a){var f=!1;return function(){function l(){f=!0;var y=g.call(arguments),A=y.shift();A?(c(A),n(A)):d.apply(null,y)}var r=g.call(arguments);if(c===m&&a===e.length-1){for(;r.length&&"function"!==typeof r[r.length-1];)r.pop();"function"===typeof r[r.length-1]&&(c=r.pop())}if("function"===typeof k)try{var v=k.apply(this,r.concat([l]));v&&"function"===typeof v.then&&"function"===typeof v.catch&&v.then(function(y){return l(null,y)}).catch(function(y){return l(y)})}catch(y){console.error("composeAsync: ",
y.stack||y),f||(c(y),n(y))}else k&&"function"===typeof k.then&&"function"===typeof k.catch?k.then(function(y){l(null,y)}).catch(function(y){l(y)}):(r=Error("Invalid argument to composeAsync: "+k),c(r),n(r));return b}},function(){var d=g.call(arguments);c.apply(null,[null].concat(d));h(d[0])})}function wh(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,e){return function(){return g(e.apply(this,arguments))}},function(g){return g})}function ck(g){return function(){var e=Array.prototype.slice.call(arguments);
e=[e[1],e[0]].concat(e.slice(2));return g.apply(null,e)}}function bi(g){g=g||function(){};return function(){var e=od.arr.from(arguments);g.apply(null,[null].concat(e))}}function Al(g,e,m){var c=Date.now(),h=50;m||(m=e,e=g,g=void 0);(function b(){if(e())return m();if(g){var d=Date.now()-c;d=g-d;if(0>=d)return m(Error("timeout"));d<h&&(h=d)}setTimeout(b,h)})()}function yg(g,e,m){function c(b,d,k,a){if(n.length){var f=null;b=n.indexOf(b);-1<b&&n.splice(b,1);k?(n.length=0,f=Error("in waitForAll at"+("number"===
typeof d?" "+d:"")+": \n"+(k.stack||String(k)))):a&&(h[d]=a);n.length||setTimeout(function(){m(f,h)},0)}}m||(m=e,e=g,g=null);g=g||{};var h=e.map(function(){return null});if(e.length){var n=Array.prototype.slice.call(e);e.forEach(function(b,d){try{b(function(){var k=Array.prototype.slice.call(arguments),a=k.shift();c(b,d,a,k)})}catch(k){c(b,d,k,null)}});g.timeout&&setTimeout(function(){if(n.length){var b=h.map(function(d,k){return null===d&&k}).filter(function(d){return"number"===typeof d}).join(", ");
c(null,null,Error("waitForAll timed out, functions at "+b+" not done"),null)}},g.timeout)}else m(null,h)}function Vj(g,e,m,c){function h(){return g.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);g=n.shift();h.isWrapper=!0;h.originalFunction=g;return h}function Ri(g,e){var m=function(){var c=Array.prototype.slice.call(arguments);c=e.isWrapper?c:[g.bind(this)].concat(c);return e.apply(this,c)};m.isWrapper=
!0;m.originalFunction=g;return m}function Jk(g){for(;g.originalFunction;)g=g.originalFunction;return g}function cl(g){var e=[];do e.push(g),g=g.originalFunction;while(g);return e}function wl(g,e,m){m.originalFunction=g[e];var c=g.hasOwnProperty(e);g[e]=function(){c?g[e]=m.originalFunction:delete g[e];return m.apply(this,arguments)};return g}function $l(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var e=!1,m;return function(){if(e)return m;e=!0;return m=g.apply(this,
arguments)}}}function Km(){var g=!1;return Array.prototype.slice.call(arguments).map(function(e){return function(){if(!g)return g=!0,e.apply(this,arguments)}})}function Kl(g,e){var m=Array.prototype.slice.call(arguments),c=od._eitherNameRegistry;g=m.shift();var h=c[g]||(c[g]={wasCalled:!1,callsLeft:0});h.callsLeft++;return function(){h.callsLeft--;0>=h.callsLeft&&delete c[g];if(!h.wasCalled)return h.wasCalled=!0,e.apply(this,arguments)}}function zl(g){return eval(g)}function Hi(g){return od.evalJS("("+
g.toString()+");")}function vo(g,e){return od.Closure.fromFunction(g,e).recreateFunc()}function Bf(g,e,m,c){var h=m||g.name;if(!h)throw Error("Function that wants to be a script needs a name: "+this);m=Object.getPrototypeOf(e);var n={this:e};c&&(n=od.objectMerge([n,c]));m&&m[h]&&(n.$super=od.Closure.fromFunction(function(){try{return Object.getPrototypeOf(e)[h].apply(e,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+
b+"\n"+b.stack),null}},{obj:e,name:h}).recreateFunc());return od.addToObject(od.asScript(g,n),e,h)}function wo(g,e,m){g.displayName=m;var c=e.attributeConnections?e.attributeConnections.filter(function(h){return"update"===h.getSourceAttrName()}):[];c&&c.forEach(function(h){h.disconnect()});e[m]=g;typeof e&&(g.declaredObject=od.safeToString(e));"undefined"!==typeof lively&&e&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(e,m,{declaredObject:od.safeToString(e)});
c&&c.forEach(function(h){h.connect()});return g}function Rb(g,e){return od.Closure.fromFunction(g,e||{}).recreateFunc()}function id(g,e,m){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[e]=m)}function zc(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function he(g,e,m){g[e]=m;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[e]=m)}function qg(g){for(var e=[],m=g.prototype;m;)e=Object.keys(m).reduce(function(c,h){"function"===
typeof m[h]&&-1===c.indexOf(h)&&c.push(h);return c},e),m=Object.getPrototypeOf(m);return e}function Gg(g){return Object.keys(g.prototype).filter(function(e){return"function"===typeof g.prototype[e]})}function Uj(g,e){var m=function(c){var h=Array.prototype.slice.call(arguments);h.shift();try{return c.apply(g,h)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;e?console.warn("ERROR: %s.%s(%s): err: %s %s",
g,e,h,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};m.methodName="$logErrorsAdvice";m=od.wrap(g,m);m.originalFunction=g;m.methodName="$logErrorsWrapper";return m}function Xn(g,e){var m=function(c){var h=Array.prototype.slice.call(arguments);h.shift();try{var n=c.apply(g,h)}catch(b){throw console.warn("failed to load "+e+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+e);return n};m.methodName="$logCompletionAdvice::"+
e;m=od.wrap(g,m);m.methodName="$logCompletionWrapper::"+e;m.originalFunction=g;return m}function qq(g,e){var m=function(h){var n=Array.prototype.slice.call(arguments);n.shift();c=h.apply(g,n);e?console.warn("%s(%s) -> %s",od.qualifiedMethodName(g),n,c):console.log("%s(%s) -> %s",od.qualifiedMethodName(g),n,c);return c};m.methodName="$logCallsAdvice::"+od.qualifiedMethodName(g);var c=od.wrap(g,m);c.originalFunction=g;c.methodName="$logCallsWrapper::"+od.qualifiedMethodName(g);return c}function Ls(g,
e){return od.wrap(g,function(m){var c=Array.prototype.slice.call(arguments);c.shift();e.push(c);c=m.apply(g,c);e.pop();return c})}function rq(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(e){return e.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}function Wo(g){if(g&&Array.isArray(g))return"["+g.map(Wo)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function nk(g){return Array.isArray(g)}
function uo(g){return g&&1==g.nodeType}function Vn(g){return g instanceof Function}function Hp(g){return"boolean"===typeof g}function Gp(g){return"string"===typeof g}function sq(g){return"number"===typeof g}function Xo(g){return"undefined"===typeof g}function am(g){return g instanceof RegExp}function Zo(g){return"object"===typeof g}function xl(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function lm(g){for(var e in g)if(g.hasOwnProperty(e))return!1;
return!0}function yl(g,e){if(g===e)return!0;if(!g||!e)return g==e;if(Array.isArray(g))return fe.arrayDeepEquals(g,e);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==e}if("function"===typeof g.isEqualNode)return g.isEqualNode(e);if("function"===typeof g.equals)return g.equals(e);var m=[],c;for(c in g)if(m.push(c),"function"!==typeof g[c]&&!yl(g[c],e[c]))return!1;for(c in e)if(-1===m.indexOf(c)&&"function"!==typeof e[c]&&!yl(e[c],g[c]))return!1;return!0}function cm(g){return g?
Object.keys(g).map(function(e){return g[e]}):[]}function Lm(g,e){for(var m={},c=0;c<e.length;c++)m[e[c]]=g[e[c]];return m}function on(g,e){g=g||{};g=fe.getOwnPropertyDescriptors(g);for(var m=0;m<e.length;m++)e[m]in g&&delete g[e[m]];return Object.defineProperties({},g)}function Ip(g,e,m,c){e=fe.functionFromString(e);return fe.asScriptOf(e,g,m,c)}function bm(g,e){for(var m=null,c=1;c<arguments.length;c++)if("string"===typeof arguments[c])m=arguments[c],g.categories||(g.categories={}),g.categories[m]||
(g.categories[m]=[]),m=g.categories[m];else{e=arguments[c];for(var h in e){var n=e.__lookupGetter__(h),b=e.__lookupSetter__(h);n&&g.__defineGetter__(h,n);b&&g.__defineSetter__(h,b);n||b||(n=e[h],g[h]=n,m&&m.push(h),"function"===typeof n&&(n.displayName||(n.displayName=h),"undefined"!==typeof lively&&lively.Module&&lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return g}function Ml(g){if(fe.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var e={},
m;for(m in g)g.hasOwnProperty(m)&&(e[m]=g[m]);return e}function yh(g,e,m){for(var c={},h=0;h<e.length;h++)e[h]in g&&(c[e[h]]=m?m(e[h],g[e[h]]):g[e[h]]);return c}function Tk(g,e,m){e=e||{};m=m||0;if(e.customPrinter){var c=e._ignoreSignal||(e._ignoreSignal={}),h=e.customPrinter(g,c,function(r){return Tk(r,e,m+1)});if(h!==c)return h}if(!g)return fe.print(g);if("function"===typeof g)return e.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+fe.argumentNames(g).join(",")+") {/*...*/}";
switch(g.constructor){case String:case Boolean:case RegExp:case Number:return fe.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var n=g&&Array.isArray(g);c=n?"[":"{";h=n?"]":"}";if(e.maxDepth&&m>=e.maxDepth)return c+"/*...*/"+h;var b=[];if(n)b=g.map(function(r){return Tk(r,e,m+1)});else for(var d=Object.keys(g).sort(function(r,v){var y="function"===typeof g[r];return y===("function"===typeof g[v])?r<v?-1:r>v?1:0:y?1:-1}),k=0;k<d.length;k++){if(k>(e.maxNumberOfKeys||Infinity)){d=
d.length-k;b.push("..."+d+" hidden "+(1<d?"entries":"entry")+"...");break}var a=d[k];n&&Tk(g[a],e,m+1);var f=Tk(g[a],e,m+1);b.push((e.escapeKeys?JSON.stringify(a):a)+": "+f)}if(0===b.length)return c+h;d=b.join(", ");k=(!n||e.newLineInArrays)&&(!e.minLengthForNewLine||d.length>=e.minLengthForNewLine);var l=fe.indent("",e.indent||"  ",m);a=fe.indent("",e.indent||"  ",m+1);f=k&&!n?"\n"+a:"";n=k&&!n?"\n"+l:"";k&&(d=b.join(","+(k?"\n"+a:"")));return c+f+d+n+h}function nl(g){return 1<arguments.length?nl(Array.prototype.slice.call(arguments)):
Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(e,m){for(var c in m)m.hasOwnProperty(c)&&(e[c]=m[c]);return e},{})}function Yn(g,e){if(!g)return e;if(!e)return g;if(Array.isArray(g)){if(!Array.isArray(e))return e;var m=g.map(function(c,h){return Yn(c,e[h])});e.length>g.length&&(m=m.concat(e.slice(g.length)));return m}return"object"!==typeof g||"object"!==typeof e?e:Object.keys(g).concat(Object.keys(e)).reduce(function(c,h){c[h]=g[h]?e[h]?"object"!==typeof g[h]||"object"!==
typeof e[h]?e[h]:Yn(g[h],e[h]):g[h]:e[h];return c},{})}function Kp(g,e){e=[];for(var m in g){var c=g[m],h=c.hasOwnProperty("before")?c.before:c.before=[];c=c.hasOwnProperty("after")?c.after:c.after=[];for(var n=h.length;n--;){var b=h[n],d=g[b];d?(d.hasOwnProperty("after")||(d.after=[]),d.after.push(m)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(m+" requires to be initialized before "+b+" but that property cannot be found.")),h.splice(n,1))}for(h=c.length;h--;)n=c[h],
g[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(m+" requires to be initialized after "+n+" but that property cannot be found.")),c.splice(h,1));e.push(m)}m=[];c=[];for(h=e.length+1;e.length;){if(h===e.length)throw Error("Circular dependencies in handler order, could not resolve properties "+e.map(function(k){var a=g[k].before,f=g[k].after;if(!(a&&a.length||f&&f.length))return"";k+="\n";a&&a.length&&(k+="  - before "+a.join(",")+"\n");f&&f.length&&(k+="  - after "+
f.join(",")+"\n");return k}).join(""));h=e.length;n=[];for(b=e.length;b--;)d=e[b],fe.isSubset(g[d].after,c)&&(e.splice(b,1),c.push(d),n.push(d));m.push(n)}return fe.flatten(m,1)}function $o(g){return Object.create(g)}function tq(g,e){for(var m=[];g;)g.hasOwnProperty(e)&&m.unshift(g[e]),g=Object.getPrototypeOf(g);return m}function Br(g,e){return fe.merge(fe.valuesInPropertyHierarchy(g,e))}function pn(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var e=Array.isArray(g)?Array(g.length):
{},m;for(m in g)g.hasOwnProperty(m)&&(e[m]=pn(g[m]));return e}function ap(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function Jp(g){function e(c,h,n,b){if(c.constructor.name===h){m+=n;if(c.length||Object.keys(c).length)m+="...";m+=b}}if(!fe.isMutableType(g))return fe.safeToString(g);if("Object"!==g.constructor.name&&!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var m=
"";e(g,"Object","{","}");e(g,"Array","[","]");return m}function mm(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(fe.typeStringOf(g))}function Ms(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(e){return"<error printing object>"}}function vq(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);case "number":return new Number(g);default:return g}}function Zn(g,e){e=void 0===e?"_":e;var m=1;do var c=e+"-"+m++;while(c in g);
return c}function uq(){return Nc.formatFromArray(Array.prototype.slice.call(arguments))}function Un(g){function e(r,v){return""+r}function m(r,v){return r.toString()}function c(r,v){return Nc.inspectObject(r)}var h=g.shift();h||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:e,d:m,i:m,f:function(r,v,y){return-1<y?r.toFixed(y):r.toString()},o:c},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;h=function(r){for(var v=[],y=b.exec(r);y;y=b.exec(r)){var A=
y[8]||y[5];A=A in n?n[A]:c;var E=y[3]?parseInt(y[3]):"."==y[4]?-1:0;v.push(r.substr(0,"%"==y[0][0]?y.index:y.index+1));v.push({appender:A,precision:E});r=r.substr(y.index+y[0].length)}r&&v.push(r.toString());return v}(h);for(var d="",k=0,a=0;a<h.length;++a){var f=h[a];if(f&&"object"==typeof f){var l=g[k++];d+=(f.appender||e)(l,d,f.precision)}else d+=""+f}return d}function Mm(g,e,m){if(!m||0>=m)return g;for(var c="";0<m;)m--,c+=e;return Nc.lines(g).map(function(h){return c+h}).join("\n")}function bp(g,
e){e||(e="  ");return Nc.min(g.match(new RegExp("^("+e+")*","gm")).map(function(m){return Math.floor(m.length/e.length)}))}function nm(g,e,m){e||(e="  ");m||(m=0);var c=Nc.minIndent(g,e);if(c===m)return g;if(c<m)return Nc.indent(g,e,m-c);var h=e.repeat(c-m);return Nc.lines(g).map(function(n){return n.slice(h.length)}).join("\n")}function Nm(g){return'"'+g.replace(/"/g,'\\"')+'"'}function ua(g){if(g&&Array.isArray(g))return"["+g.map(ua)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,
"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Pa(g,e){e=e||0;return g.reduce(function(m,c){return m+(Array.isArray(c)?Pa(c,e+1):Nc.indent(c+"\n","  ",e))},"")}function cb(g,e,m){return m?" ".repeat(e)+g:g+" ".repeat(e)}function Ya(g,e){function m(d){return n?!1:b?!0:e&&Array.isArray(e.align)&&"right"===e.align[d]}var c=[],h=e&&e.separator||" ",n=!e||!e.align||"left"===e.align,b=e&&"right"===e.align;g.forEach(function(d){d.forEach(function(k,a){void 0===c[a]&&(c[a]=0);c[a]=Math.max(c[a],
String(k).length)})});return g.map(function(d){return d.map(function(k,a){k=String(k);return Nc.pad(k,c[a]-k.length,m(a))}).join(h)}).join("\n")}function jc(g,e,m,c){function h(b,d,k){n[d]=c.repeat(b)+e(k,b);k=m(k,b);var a=d+1;if(!k||!k.length)return a;var f=a,l=k.length-1;k.forEach(function(r,v){a=h(b+1,a,r);r=l===v;var y=n[f].split(""),A=b*c.length+c.length;for(v=b*c.length+1;v<A;v++)y[v]="-";r&&(y[b*c.length]="\\");n[f]=y.join("");r||n.slice(f,a).forEach(function(E,F){E=E.split("");E[b*c.length]=
"|";n[f+F]=E.join("")});f=a});return a}var n=[];c=c||"  ";h(0,0,g);return n.join("\n")}function dc(g){return g.split("")}function tc(g){return g.split(/\n\r?/)}function Dc(g,e){var m=e?e.sep:"\n\n";return e&&e.keepEmptyLines?g.split("\n").concat("").reduce(function(c,h){var n=c[0];c=c[1];/^\s*$/.test(c)===/^\s*$/.test(h)?c+="\n"+h:(c.length&&n.push(c),c=h);return[n,c]},[[],""])[0]:g.split(new RegExp(m+"+"))}function Ad(g){return Nc.lines(g).compact()}function xf(g,e){return g.split(e||/\s+/).filter(function(m){return!/^\s*$/.test(m)})}
function Nf(g,e){e=e||{};var m=e.cellSplitter||/\s+/,c=/^\s*$/;e=e.hasOwnProperty("convertTypes")?!!e.convertTypes:!0;g=Nc.lines(g);for(var h=[],n=0;n<g.length;n++){var b=Nc.tokens(g[n],m);e&&(b=b.map(function(d){if(d.match(c))return d;var k=Number(d);if(!isNaN(k))return k;k=new Date(d);return isNaN(+k)?d.trim():k}));0<b.length&&h.push(b)}return h}function xh(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var e=document.createElement("div");e.innerHTML=g;return e.textContent}
function pg(g,e){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(e||"&").inject({},function(m,c){if((c=c.split("="))[0]){var h=decodeURIComponent(c.shift());c=1<c.length?c.join("="):c[0];void 0!=c&&(c=decodeURIComponent(c));h in m?(Array.isArray(m[h])||(m[h]=[m[h]]),m[h].push(c)):m[h]=c}return m}):{}}function Vh(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(e,m){return String.fromCharCode("0x"+m)}))}function mk(g){return decodeURIComponent(atob(g).split("").map(function(e){return"%"+
("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Ll(g){var e=g.match(Nc.urlStartRe),m=(e=e?e[0]:null)?g.slice(e.length):g;do g=m,m=g.replace(Nc.pathDoubleDotRe,"");while(m!=g);m=m.replace(Nc.pathDoubleSlashRe,"$1/");m=m.replace(Nc.pathDotRe,"/");e&&(m=e+m);return m}function Yo(){return Nc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,e){return"string"===typeof e?g.replace(/\/*$/,"")+"/"+e.replace(/^\/*/,""):g}))}function Wn(){return Nc.newUUIDTemplate.replace(Nc.newUUIDRe,
Nc.newUUIDReplacer).toUpperCase()}function mw(g,e){return"data:"+(e||"text/plain")+";base64,"+Nc.base64EncodeUnicode(g)}function nw(g){var e=0,m=g.length;if(0==m)return e;for(var c=0;c<m;c++){var h=g.charCodeAt(c);e=(e<<5)-e+h;e&=e}return e}function wq(g){function e(k,a,f,l,r,v){a=b(b(a,k),b(l,v));return b(a<<r|a>>>32-r,f)}function m(k,a,f,l,r,v,y){return e(a&f|~a&l,k,a,r,v,y)}function c(k,a,f,l,r,v,y){return e(a&l|f&~l,k,a,r,v,y)}function h(k,a,f,l,r,v,y){return e(f^(a|~l),k,a,r,v,y)}function n(k,
a){var f=k[0],l=k[1],r=k[2],v=k[3];f=m(f,l,r,v,a[0],7,-680876936);v=m(v,f,l,r,a[1],12,-389564586);r=m(r,v,f,l,a[2],17,606105819);l=m(l,r,v,f,a[3],22,-1044525330);f=m(f,l,r,v,a[4],7,-176418897);v=m(v,f,l,r,a[5],12,1200080426);r=m(r,v,f,l,a[6],17,-1473231341);l=m(l,r,v,f,a[7],22,-45705983);f=m(f,l,r,v,a[8],7,1770035416);v=m(v,f,l,r,a[9],12,-1958414417);r=m(r,v,f,l,a[10],17,-42063);l=m(l,r,v,f,a[11],22,-1990404162);f=m(f,l,r,v,a[12],7,1804603682);v=m(v,f,l,r,a[13],12,-40341101);r=m(r,v,f,l,a[14],17,
-1502002290);l=m(l,r,v,f,a[15],22,1236535329);f=c(f,l,r,v,a[1],5,-165796510);v=c(v,f,l,r,a[6],9,-1069501632);r=c(r,v,f,l,a[11],14,643717713);l=c(l,r,v,f,a[0],20,-373897302);f=c(f,l,r,v,a[5],5,-701558691);v=c(v,f,l,r,a[10],9,38016083);r=c(r,v,f,l,a[15],14,-660478335);l=c(l,r,v,f,a[4],20,-405537848);f=c(f,l,r,v,a[9],5,568446438);v=c(v,f,l,r,a[14],9,-1019803690);r=c(r,v,f,l,a[3],14,-187363961);l=c(l,r,v,f,a[8],20,1163531501);f=c(f,l,r,v,a[13],5,-1444681467);v=c(v,f,l,r,a[2],9,-51403784);r=c(r,v,f,l,
a[7],14,1735328473);l=c(l,r,v,f,a[12],20,-1926607734);f=e(l^r^v,f,l,a[5],4,-378558);v=e(f^l^r,v,f,a[8],11,-2022574463);r=e(v^f^l,r,v,a[11],16,1839030562);l=e(r^v^f,l,r,a[14],23,-35309556);f=e(l^r^v,f,l,a[1],4,-1530992060);v=e(f^l^r,v,f,a[4],11,1272893353);r=e(v^f^l,r,v,a[7],16,-155497632);l=e(r^v^f,l,r,a[10],23,-1094730640);f=e(l^r^v,f,l,a[13],4,681279174);v=e(f^l^r,v,f,a[0],11,-358537222);r=e(v^f^l,r,v,a[3],16,-722521979);l=e(r^v^f,l,r,a[6],23,76029189);f=e(l^r^v,f,l,a[9],4,-640364487);v=e(f^l^r,
v,f,a[12],11,-421815835);r=e(v^f^l,r,v,a[15],16,530742520);l=e(r^v^f,l,r,a[2],23,-995338651);f=h(f,l,r,v,a[0],6,-198630844);v=h(v,f,l,r,a[7],10,1126891415);r=h(r,v,f,l,a[14],15,-1416354905);l=h(l,r,v,f,a[5],21,-57434055);f=h(f,l,r,v,a[12],6,1700485571);v=h(v,f,l,r,a[3],10,-1894986606);r=h(r,v,f,l,a[10],15,-1051523);l=h(l,r,v,f,a[1],21,-2054922799);f=h(f,l,r,v,a[8],6,1873313359);v=h(v,f,l,r,a[15],10,-30611744);r=h(r,v,f,l,a[6],15,-1560198380);l=h(l,r,v,f,a[13],21,1309151649);f=h(f,l,r,v,a[4],6,-145523070);
v=h(v,f,l,r,a[11],10,-1120210379);r=h(r,v,f,l,a[2],15,718787259);l=h(l,r,v,f,a[9],21,-343485551);k[0]=b(f,k[0]);k[1]=b(l,k[1]);k[2]=b(r,k[2]);k[3]=b(v,k[3])}var b=function(k,a){var f=(k&65535)+(a&65535);return(k>>16)+(a>>16)+(f>>16)<<16|f&65535},d="0123456789abcdef".split("");return function(k){for(var a=k.length,f=0;f<a;f++){for(var l=f,r=k[f],v="",y=0;4>y;y++)v+=d[r>>8*y+4&15]+d[r>>8*y&15];k[l]=v}return k.join("")}(function(k){var a=k.length,f=[1732584193,-271733879,-1732584194,271733878],l;for(l=
64;l<=a;l+=64){var r,v=k.substring(l-64,l),y=[];for(r=0;64>r;r+=4)y[r>>2]=v.charCodeAt(r)+(v.charCodeAt(r+1)<<8)+(v.charCodeAt(r+2)<<16)+(v.charCodeAt(r+3)<<24);n(f,y)}k=k.substring(l-64);r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];v=k.length;for(l=0;l<v;l++)r[l>>2]|=k.charCodeAt(l)<<(l%4<<3);r[l>>2]|=128<<(l%4<<3);if(55<l)for(n(f,r),l=16;l--;)r[l]=0;r[14]=8*a;n(f,r);return f}(g))}function nu(g,e){var m=[];g.replace(e,function(c,h){m.push({match:c,start:h,end:h+c.length})});return m}function Lp(g,e,m){function c(b,
d){if(d.constructor!==RegExp){if(0===b.indexOf(d))return{match:d,rest:b.slice(d.length)};for(var k=0;k<d.length;k++)if(d[k]!=b[k])return{match:null,pos:k};return{match:null}}return(d=Nc.reMatches(b,d))&&d.length&&0===d[0].start?{match:d[0].match,rest:b.slice(d[0].end)}:{match:null}}function h(b){var d=Nc.reMatches(b,/__\//g),k=Nc.reMatches(b,/\/__/g);if(d.length!==k.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+
JSON.stringify(k));var a=0;return d.reduce(function(f,l,r){var v=k[r];r=f.pop();l=l.start-a;v=v.end-a;var y;var A=y=3;r=[r.slice(0,l),r.slice(l+y,v-A),r.slice(v)];r[0].length&&(f.push(r[0]),a+=r[0].length);try{r[1].length&&(f.push(new RegExp(r[1])),a+=r[1].length+3+3)}catch(E){throw Error("Cannot create pattern re from: "+Nc.inspectObject(r));}r[2].length&&f.push(r[2]);return f},[b])}function n(b,d){d=h(d);a:{for(var k=b,a=0,f=0;f<d.length;f++){var l=d[f];k=c(k,l);if(!k.match){d={matched:!1,pos:a+
(k.pos||0),pattern:l};break a}a+=k.match.length;k=k.rest}d=k.length?{matched:!1,pos:a}:{matched:!0}}if(d.matched)return d;d.error=b.slice(0,d.pos)+"<--UNMATCHED--\x3e"+b.slice(d.pos);return d}m=m||{};m.normalizeWhiteSpace&&(g=g.replace(/\s+/g," "));m.ignoreIndent&&(g=g.replace(/^\s+/gm,""),e=e.replace(/^\s+/gm,""));return g==e?{matched:!0}:n(g,e)}function ow(g,e,m){g=g.slice(e);return"string"===typeof m?(g=g.indexOf(m),-1===g?null:g+e):m.constructor===RegExp?(e=Nc.reMatches(g,m),e[0]?e[0].start:null):
null}function pw(g,e,m){g=g.slice(0,e);return"string"===typeof m?(g=g.lastIndexOf(m),-1===g?null:g):m.constructor===RegExp?(g=Nc.reMatches(g,m),Nc.last(g)?Nc.last(g).start:null):null}function ay(g){var e=Nc.lineRanges(g);return function(m){for(var c=0;c<e.length;c++){var h=e[c];if(m>=h[0]&&m<h[1])return c}return-1}}function by(g){return function(e){return Nc.lineRanges(g)[e]}}function qw(g){for(var e=0,m=Nc.lines(g),c=[],h=0;h<m.length;h++)g=e+m[h].length+1,c.push([e,g]),e=g;return c}function rw(g,
e){var m=g.length;if(0===m)return-1;for(var c=0;;){var h=c+Math.floor((m-c)/2),n=$jscomp.makeIterator(g[h]),b=n.next().value;n=n.next().value;if(e<b){if(0===h)break;m=h}else if(e>n)c=h;else return h}return-1}function sw(g,e,m){m=void 0===m?0:m;g=this.substring(m||0).search(e);return 0<=g?g+(m||0):g}function tw(g,e,m){m=void 0===m?g.length:m;e=e.global?e:new RegExp(e.source,"g"+(e.ignoreCase?"i":"")+(e.multiLine?"m":""));g=this.substring(0,m+1);m=-1;for(var c=0,h;null!=(h=e.exec(g));)m=h.index,e.lastIndex=
++c;return m}function uw(g,e){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(g,e))}function xq(g){return""==g}function Cr(g){g=g[0];return"A"===g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function Dr(g,e){var m=parseFloat(g);return isNaN(m)?g:m.toFixed(e)}function Ns(g){return g.length?g.charAt(0).toUpperCase()+g.slice(1):g}function ou(g){return g.split(" ").map(Nc.capitalize).join("")}function yq(g){var e=
g.split("-"),m=e.length;if(1==m)return e[0];g="-"==g.charAt(0)?e[0].charAt(0).toUpperCase()+e[0].substring(1):e[0];for(var c=1;c<m;c++)g+=e[c].charAt(0).toUpperCase()+e[c].substring(1);return g}function Os(g,e,m){e=e||30;m=void 0===m?"...":m;return g.length>e?g.slice(0,e-m.length)+m:String(g)}function Nl(g,e,m){e=e||30;return g.length>e?(void 0===m?"...":m)+g.slice(-e):String(g)}function Ps(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Mp(g){return g.slice(0,
g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function pu(g){return g.charCodeAt(0)-48}function vw(g,e){for(var m=[],c=0;c<g.length;c++){m[c]=[];for(var h=0;h<e.length;h++)m[c][h]=0}for(c=0;c<g.length;c++)m[c][0]=0;for(c=1;c<g.length;c++)for(h=1;h<e.length;h++)m[c][h]=g[c-1]==e[h-1]?m[c-1][h-1]+1:0;for(var n=h=c=-1,b=0;b<g.length;b++)for(var d=0;d<e.length;d++){var k=m[b][d];c<k&&(c=k,h=b-k,n=d-k)}return{length:c,indexA:h,indexB:n,string:0<c?g.slice(h,h+c):""}}function qu(g,e){return"insert"===
e.action?g.slice(0,e.start)+e.lines.join("\n")+g.slice(e.start):"remove"===e.action?g.slice(0,e.start)+g.slice(e.end):g}function cy(g,e){return e.reduce(function(m,c){return Nc.applyChange(g,c)},g)}function ru(g,e){if(0===g.length)return e.length;if(0===e.length)return g.length;var m;if(g.length>e.length){var c=g;g=e;e=c}var h=Array(g.length+1);for(c=0;c<=g.length;c++)h[c]=c;for(c=1;c<=e.length;c++){var n=c;for(m=1;m<=g.length;m++){var b=e[c-1]===g[m-1]?h[m-1]:Math.min(h[m-1]+1,Math.min(n+1,h[m]+
1));h[m-1]=n;n=b}h[g.length]=n}return h[g.length]}function su(g,e){g=g||0;return Math.round(Math.random()*((e||100)-g)+g)}function tu(g){return Math.floor(Math.random()*g)}function dy(g){if(1E3>g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function ey(g){return g.reduce(function(e,m){return e+m},0)/g.length}function fy(g,e,m){return(g-e)/m+e}function Qs(g){var e=g.sort(function(m,c){return c-m});g=g.length;
return 0===g%2?.5*(e[g/2-1]+e[g/2]):e[(g-1)/2]}function ww(g,e,m,c){c=c||0;if(e<m)var h=m;else h=e,e=m;return 0<=h-g+c&&0>=e-g-c}function xw(g,e,m){return Math.max(e,Math.min(m,g))}function Rs(g){return g.sort(function(e,m){return e-m})}function yw(g,e){e=e||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var m=parseFloat(g[1]);return rg.convertLength(m,g[2],e)}}function uu(g){if(!isFinite(g))return 0;for(var e=1,m=0;Math.round(g*e)/e!==g;)e*=10,m++;return m}function qn(g,e){e=1/e;return Math.round(g*
e)/e}function xo(g,e,m,c){var h=rg.roundTo(g,m);return Math.abs(g-h)<e/2?h:c?g:h+(g-(g<h?h-e/2:h+e/2))*m/(m-e)}function dm(g){return 180*g/Math.PI%360}function ri(g){return g/180*Math.PI}function zq(g,e,m){e=void 0===e?5:e;m=void 0===m?3E4:m;g=Math.min(m,e*Math.pow(2,g));return Math.min(m,e+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-e))}function Np(g,e,m){return e+g*(m-e)}function Ss(g,e){var m=[],c;for(c in g)(g.__lookupGetter__(c)||"function"!==typeof g[c])&&(e?e(c,g):1)&&m.push(c);return m}
function zw(g,e){return Object.getOwnPropertyNames(g).reduce(function(m,c){(e?e(g,c):1)&&m.push(c);return m},[])}function Ts(g){var e=[],m;for(m in g)g.hasOwnProperty(m)&&(g.__lookupGetter__(m)||"function"!==g[m])&&e.push(m);return e}function vu(g,e,m){var c=[],h;for(h in g)if(g.hasOwnProperty(h)){var n=g[h];"function"!==n&&c.push(e.call(m||this,h,n))}return c}function Er(g,e){for(var m in g)if(g[m]===e)return m}function Us(g){var e=[],m;for(m in g)e.push(g[m]);return e}function Aw(g){var e=[],m;
for(m in g)g.hasOwnProperty(m)&&e.push(g[m]);return e}function Bw(g,e){for(var m in g)if(e(g,m))return!0;return!1}function Vs(g,e){var m=[],c;for(c in g)(e?e(g,c):1)&&m.push(c);return m}function Op(g){return Object.keys(g).sort().join("").hashCode()}function Aq(g,e,m){return Pp.dateFormat(g,e,m)}function Ws(g,e){return e&&e instanceof Date&&e.getTime()===g.getTime()}function wu(g,e,m){m=void 0===m?{}:m;if(!(e instanceof Date)||e<g)return"";if(e===g)return"now";var c="min",h="sec",n="hour",b="day",
d=Math.round((e-g)/1E3);g=d%60;e=Math.floor(d/60)%60;var k=Math.floor(d/60/60)%24;d=Math.floor(d/60/60/24);var a=[];0<d&&(a.push(d),1<d&&(b+="s"),a.push(b));if(m.forceHours||0<k&&2>d)a.push(k),1<k&&(n+="s"),a.push(n);if(m.forceMinutes||0<e&&3>k&&0===d)a.push(e),1<e&&(c+="s"),a.push(c);if(m.forceSeconds||0<g&&3>e&&0===k&&0===d)a.push(g),1<g&&(h+="s"),a.push(h);return a.join(" ")}function Hg(g){return"function"===typeof g?Hg.convertCallbackFun(g):Promise.resolve(g)}function Cw(g,e){return new Promise(function(m){return setTimeout(m,
g,e)})}function xu(g,e){return new Promise(function(m,c){return setTimeout(c,g,e)})}function yu(g,e){return new Promise(function(m,c){var h=!1;setTimeout(function(){return!h&&(h=!0)&&c(Error("Promise timed out"))},g);e.then(function(n){return!h&&(h=!0)&&m(n)},function(n){return!h&&(h=!0)&&c(n)})})}function zu(g){var e=Date.now();return Promise.resolve(g).then(function(){return Date.now()-e})}function gy(g,e,m){"function"===typeof g&&(e=g,g=void 0);return new Promise(function(c,h){var n=!1,b=!1,d,
k,a=setInterval(function(){if(n)clearInterval(a),delete wg.waitForClosures[a];else{try{k=e()}catch(f){d=f}if(k||d||b)return n=!0,clearInterval(a),delete wg.waitForClosures[a],d?h(d):b?"undefined"===typeof m?h(Error("timeout")):c(m):c(k)}},10);wg.waitForClosures[a]=a;"number"===typeof g&&setTimeout(function(){return b=!0},g)})}function Au(){var g,e,m=new Promise(function(c,h){g=c;e=h});return{resolve:g,reject:e,promise:m}}function Dw(g){return function(){var e=Array.from(arguments),m=this;return new Promise(function(c,
h){e.push(function(n,b){return n?h(n):c(b)});g.apply(m,e)})}}function Qp(g){return function(){var e=Array.from(arguments),m=this;return new Promise(function(c,h){e.push(function(){var n=Array.from(arguments),b=n.shift();return b?h(b):c(n)});g.apply(m,e)})}}function yA(g,e,m,c,h){var n=g.shift();if(n)try{Promise.resolve(n(e,m)).then(function(b){return yA(g,b,m,c,h)}).catch(function(b){h(b)})}catch(b){h(b)}else c(e)}function hy(g){return new Promise(function(e,m){return wg._chainResolveNext(g.slice(),
void 0,{},e,m)})}function Bq(g,e){return Promise.resolve(g).then(function(m){try{e()}catch(c){console.error("Error in promise finally: "+c.stack||c)}return m}).catch(function(m){try{e()}catch(c){console.error("Error in promise finally: "+c.stack||c)}throw m;})}function Ew(g,e){function m(){e--;try{var f=b++;g[f]().then(function(l){e++;h[f]=l;0===--d?k():c()}).catch(function(l){return a(l)})}catch(l){a(l)}}function c(){for(;!n&&0<d&&b<g.length&&0<e;)m()}e=void 0===e?Infinity:e;if(!g.length)return Promise.resolve([]);
var h=[],n=null,b=0,d=g.length,k,a;return new Promise(function(f,l){k=function(){return f(h)};a=function(r){return l(n=r)};c()})}function ci(g,e){if(g instanceof ci)return g;if(!(this instanceof ci))return new ci(g,e);this.setSplitter(e||".");this.fromPath(g)}function Bu(g){var e={},m;for(m in g)e[m]=g[m].slice();return e}function Fw(g,e){var m={},c;for(c in g)if(!e.includes(c)){m[c]=[];for(var h=g[c],n=0;n<h.length;n++){var b=h[n];e.includes(b)||m[c].push(b)}}return m}function iy(g,e,m,c){m=void 0===
m?[]:m;c=void 0===c?Infinity:c;if(!Array.isArray(g[e]))return[];for(var h=[],n={},b={},d=0;d<m.length;d++)b[m[d]]=!0;e=g[e].slice();d={};for(var k=e.length;k--;){var a=e[k];a in b?e.splice(k,1):d[a]=1}if(m)for(;0!==e.length;)for(m=0;m<e.length;m++)if(a=e.shift(),!(a in n||a in b)&&(k=d[a]||0,!(k>c)&&(h.push(a),n[a]=!0,a=g[a])))for(var f=0;f<a.length;f++){var l=a[f];l in n||l in d||(d[l]=k+1,e.push(l))}return h}function Cu(g,e,m,c){c=void 0===c?Infinity:c;m&&(g=uj.without(g,m));e=[e];m=0;for(var h=
{};e.length&&m++<c;){var n=e.shift();if(!h[n]){var b=g[n]||[];h[n]=b;e.push.apply(e,$jscomp.arrayFromIterable(b))}}return h}function jy(g){var e={},m;for(m in g)for(var c=g[m],h=0;h<c.length;h++){var n=c[h];e[n]?e[n].push(m):e[n]=[m]}return e}function Xs(g,e){e=[];var m={},c={},h={};for(f in g){m.hasOwnProperty(f)||(m[f]=!0,e.push(f));var n=g[f],b={};if(n){c[f]=[];n=$jscomp.makeIterator(n);for(var d=n.next();!d.done;d=n.next())if(d=d.value,!b.hasOwnProperty(d)&&f!==d){var k=h[d]||(h[d]=[]);k.includes(f)||
k.push(f);b[d]=!0;c[f].push(d);m.hasOwnProperty(d)||(m[d]=!0,e.push(d))}}}for(g=[];e.length;){m=Infinity;var a=[];b=[];n=[];for(d=0;d<e.length;d++){var f=e[d];k=c[f]||[];k.length>m||(k.length!==m||k.some(function(l){return a.includes(l)})?(m=k.length,a=[f],b=[d],n=(h[f]||[]).slice()):(a.push(f),b.push(d),n.push.apply(n,$jscomp.arrayFromIterable(h[f]||[]))))}for(d=b.length;d--;)f=e[b[d]],h[f]=[],e.splice(b[d],1);m=$jscomp.makeIterator(n);for(f=m.next();!f.done;f=m.next())f=f.value,c[f]=c[f].filter(function(l){return!a.includes(l)});
g.push(a)}return g}function Gw(g,e,m,c,h,n){function b(a){-1<d.indexOf(a)||(c=g.call(n,c,a,k++),d=d.concat([a]),uj.withoutAll(e[a]||[],d).forEach(function(f){return b(f)}))}var d=h||[],k=0;b(m);return c}function cp(g){g=void 0===g?10:g;for(var e={},m=uj.range(1,g).map(String),c=0;c<m.length;c++){var h=Math.floor(Math.random()*g);e[m[c]]=uj.shuffle(m).slice(0,h)}return e}function ky(g){return Array.isArray(g)&&2<=g.length&&g[0]<=g[1]}function Cq(g){return g.sort(ki.compare)}function Dq(g,e){return g[0]<
e[0]?g[1]<e[0]?-3:g[1]===e[0]?-2:-1:g[0]===e[0]?g[1]===e[1]?0:g[1]<e[1]?-1:1:-1*Dq(e,g)}function yo(g,e,m){switch(this.compare(g,e)){case -3:case 3:return null;case 0:return m&&m(g,e,g),g;case 2:case 1:var c=g;g=e;e=c;case -2:case -1:return c=[g[0],Math.max(g[1],e[1])],m&&m(g,e,c),c;default:throw Error("Interval compare failed");}}function Hw(g,e){for(var m=[],c=g.length;0<c;){var h=g.shift();c--;for(var n=0;n<c;n++){var b=ki.coalesce(h,g[n],e);b&&(h=b,g.splice(n,1),c--,n--)}m.push(h)}return this.sort(m)}
function Om(g,e,m){for(var c=[];0<g.length;){var h=g.shift(),n=e.map(function(b){b=ki.compare(h,b);return-1===b||0===b||1===b});c.push(m(h,n[0]));c.push(h)}return c}function Du(g,e,m,c,h,n){n=n||ki.GLOBAL;m=this.sort(m);for(var b,d=[];b=m.shift();)if(!(b[1]<g)){b[0]<g&&(b=Array.prototype.slice.call(b),b[0]=g);var k=e<b[0]?e:b[0];g<k&&d.push(c.call(n,[g,k],!0));e<b[1]&&(b=Array.prototype.slice.call(b),b[1]=e);if(b[0]===b[1]){var a;h&&(a=d.slice(-1)[0])&&h.call(n,a,b,a)}else d.push(c.call(n,b,!1));
g=b[1];if(g>=e)break}g<e&&d.push(c.call(n,[g,e],!0));return d}function Eu(g,e,m){return ki.intervalsInRangeDo(g,e,ki.coalesceOverlapping(Array.prototype.slice.call(m)),function(c,h){return h?c:null}).filter(Boolean)}function Eq(g,e){var m=0,c,h;return e.map(function(n){for(;h=g[m];)if(h[0]<n[0])m++;else break;if(h&&h[0]===n[0]){for(c=m;h=g[c];)if(h[1]<n[1])c++;else break;if(h&&h[1]===n[1])return ki.range(m,c)}return[]})}function Ys(g,e,m){m=m||0;m+e>g.length&&(m-=m+e-g.length);return{array:g,from:m,
to:m+e}}function dl(g){return g.array.slice(g.from,g.to)}function zo(g,e){return e<g.from||e>=g.to?null:e-g.from}function dp(g,e){return 0>e||e>g.to-g.from?null:g.from+e}function Iw(g,e){if(!(e in g.array))return null;var m=0;e<g.from&&(m=-g.from+e);e>=g.to&&(m=e-g.to+1);return 0===m?g:Ao.create(g.array,g.to-g.from,g.from+m)}function ca(g,e,m){return(g=g[e])?g[m]:void 0}function ya(g,e,m,c){(g=g[e])&&(g[m]=c);return c}function hb(g,e){return g[e]}function Hb(g,e,m){return g[e]=m}function Vb(g,e){return g.reduce(function(m,
c){m.push(c[e]);return m},[])}function Qc(g,e,m){return g.map(function(c,h){return c[e]?c[e]=m[h]:void 0})}function Kd(g,e,m){for(var c=Array(g);0<g;)c[--g]=zh.arrayWithN(e,m);return c}function Ee(g,e,m,c){for(var h=Array(g),n=0;n<g;n++){h[n]=Array(e);for(var b=0;b<e;b++)h[n][b]=m.call(c||this,n,b)}return h}function df(g,e,m){g.forEach(function(c,h){c.forEach(function(n,b){e.call(m||this,n,h,b)})})}function Sf(g,e,m){var c=Array(g.length);g.forEach(function(h,n){c[n]=Array(h.length);h.forEach(function(b,
d){c[n][d]=e.call(m||this,b,n,d)})});return c}function Mg(g){for(var e=g[0],m=Array(g.length-1),c=1;c<g.length;c++)for(var h=m[c-1]={},n=0;n<e.length;n++)h[e[n]]=g[c][n];return m}function zg(g,e){Array.isArray(g)||(g=[g]);var m=[[]],c=m[0],h=g.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(d,k){var a=c.indexOf(k);-1===a&&(a=c.length,c.push(k));d[a]=b[k];return d},[])])},[]);e=1===arguments.length?null:e;h.forEach(function(n){for(var b=0;b<c.length;b++)n[b]||(n[b]=e)});return m.concat(h)}
function nf(g,e,m,c,h){c=void 0===c?{i:0}:c;h=void 0===h?0:h;var n=c.i++;e(g,n,h);(m(g,n,h)||[]).forEach(function(b){return nf(b,e,m,c,h+1)})}function li(g,e,m,c,h){c=void 0===c?{i:0}:c;h=void 0===h?0:h;var n=c.i++;(m(g,n,h)||[]).forEach(function(b){return li(b,e,m,c,h)});e(g,n,h)}function $i(g,e,m){if(e(g))return g;if((g=m(g))&&g.length)for(var c=0;c<g.length;c++){var h=$i(g[c],e,m);if(h)return h}}function Ii(g,e,m){var c=[];e(g)&&c.push(g);return c.concat(Uk.flatten((m(g)||[]).map(function(h){return Ii(h,
e,m)})))}function Vk(g,e,m,c){c=void 0===c?0:c;return[e(g,c)].concat(Uk.flatten((m(g)||[]).map(function(h){return Vk(h,e,m,c+1)})))}function Fq(g,e,m,c){c=void 0===c?0:c;var h=(m(g)||[]).map(function(n){return Fq(n,e,m,c+1)});return e(g,h,c)}function Ng(g){var e=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],m=e.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));
e.forEach(function(b){if(!g[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+")",Error(b);});e=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var c=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,h={_outgoing:[],_inflight:[],_id:g.id||Ol.newUUID(),_ignoreUnknownMessages:c,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:e,
_status:Ol.OFFLINE,_runWhenOnlineCallbacks:function(){var b=h._whenOnlineCallbacks.slice();h._whenOnlineCallbacks=[];b.forEach(function(d){try{d.call(null,null,h)}catch(k){console.error("error in _runWhenOnlineCallbacks: %s",k)}})},_ensureStatusWatcher:function(){h._statusWatcherProc||(h._statusWatcherProc=setInterval(function(){h.isOnline()&&h._whenOnlineCallbacks.length&&h._runWhenOnlineCallbacks();var b=h._status;h._status=h.isOnline()?Ol.ONLINE:Ol.OFFLINE;h._status!==Ol.ONLINE&&h._statusWatcherProc&&
h.reconnect();if(h._status!==b&&h.onStatusChange)h.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=Ol.newUUID());b.sender=h.id();b.messageIndex=h._messageCounter++;return b},_queueSend:function(b,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);h._outgoing.push([b,d])},_deliverMessageQueue:function(){function b(a){if(-1!==
h._inflight.indexOf(a)){var f=a[0],l=a[1];l&&(h._messageResponseCallbacks[f.messageId]=l);g.send.call(h,f,function(r){Ol.remove(h._inflight,a);r&&d(r,a);h._deliverMessageQueue()})}}function d(a,f){var l=f[1];delete h._messageResponseCallbacks[f[0].messageId];console.error(a);l&&l(a)}if(g.allowConcurrentSends||!h._inflight.length){var k=h._outgoing.shift();k&&(h._inflight.push(k),h.isOnline()?b(k):h.whenOnline(function(){b(k)}),function(a){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==
h._inflight.indexOf(a)&&(Ol.remove(h._inflight,a),d(Error("Timeout sending message"),a),h._deliverMessageQueue())},g.sendTimeout)}(k),g.allowConcurrentSends&&h._outgoing.length&&h._deliverMessageQueue())}},_startHeartbeatProcess:function(){h._startHeartbeatProcessProc||(h._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(h,function(b,d){h._startHeartbeatProcessProc=null;h._startHeartbeatProcess()})},h._heartbeatInterval))},id:function(){return h._id},isOnline:function(){return g.isOnline.call(h)},
heartbeatEnabled:function(){return"number"===typeof h._heartbeatInterval},listen:function(b){if(!h._listenInProgress)return h._listenInProgress=!0,h._ensureStatusWatcher(),g.listen.call(h,function(d){h._listenInProgress=null;b&&b(d);h.heartbeatEnabled()&&h._startHeartbeatProcess()})},reconnect:function(){if(h._status!==Ol.ONLINE)return h.listen(),h},send:function(b,d){h._addMissingData(b);h._queueSend(b,d);h._deliverMessageQueue();return b},sendTo:function(b,d,k,a){return h.send({target:b,action:d,
data:k},a)},onMessage:function(b){h.emit("message",b);if(b.inResponseTo){var d=h._messageResponseCallbacks[b.inResponseTo];d&&!b.expectMoreResponses&&delete h._messageResponseCallbacks[b.inResponseTo];d&&d(null,b)}else if(d=h._services[b.action])try{d.call(null,b,h)}catch(k){d=String(k.stack||k),console.error("Error invoking service: "+d),h.answer(b,{error:d})}else h._ignoreUnknownMessages||h.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,d,k,a){"function"===
typeof k&&(a=k,k=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:d};k&&(b.expectMoreResponses=!0);return h.send(b,a)},close:function(b){clearInterval(h._statusWatcherProc);h._statusWatcherProc=null;g.close.call(h,function(d){h._status=Ol.OFFLINE;b&&b(d)});return h},whenOnline:function(b){h._whenOnlineCallbacks.push(b);h.isOnline()&&h._runWhenOnlineCallbacks();return h},outgoingMessages:function(){return Ol.pluck(h._inflight.concat(h._outgoing),0)},addServices:function(b){Object.assign(h._services,
b);return h}};g.services&&h.addServices(g.services);Ol.makeEmitter(h);for(var n in g)-1===m.indexOf(n)&&g.hasOwnProperty(n)&&(h[n]=g[n]);return h}function Kg(g,e,m){m||(m=e,e=g,g=null);g=g||{};var c=g.args||[];g=Ah.create(g);g.run.apply(g,[e].concat(c).concat(m));return g}function ep(g){g=g||{};g.useMessenger=!0;var e=g.workerId||Ah.newUUID(),m=Ah.messengerCreate({sendTimeout:5E3,send:function(c,h){m.worker.postMessage(c);h()},listen:function(c){var h=m.worker=Ah.isNodejs?Ah.NodejsWorker.create(g):
Ah.BrowserWorker.create(g);h.on("message",function(n){m.onMessage(n)});h.on("ready",function(){Ah.NodejsWorker.debug&&console.log("WORKER READY!!!")});h.on("close",function(){Ah.NodejsWorker.debug&&console.log("WORKER CLOSED...!!!")});h.once("ready",c)},close:function(c){return m.worker.ready?m.sendTo(e,"close",{},function(h,n){(h=h||n.data.error)&&console.error("Error in worker messenger close: "+h.stack||h);if(h)c(h);else{var b=!1;m.worker.once("close",function(){b=!0});Ah.waitFor(1E3,function(){return!!b},
c)}}):c(null)},isOnline:function(){return m.worker&&m.worker.ready}});Object.assign(m,{eval:function(c,h){m.sendTo(e,"remoteEval",{expr:c},function(n,b){h(n,b?b.data.result:null)})},run:function(){var c=Array.prototype.slice.call(arguments),h=c.shift(),n=c.pop();if("function"!==typeof h)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return m.sendTo(e,"run",{func:String(h),args:c},function(b,d){n(b||d.data.error,d?d.data.result:
null)})}});m.listen();return m}function Zs(){if(!Jd.isNode||Jd.GLOBAL.lively||Jd.GLOBAL.lively)if(Jd.livelyLang._prevLivelyGlobal=Jd.GLOBAL.lively,Jd.GLOBAL.lively||(Jd.GLOBAL.lively={}),Jd.GLOBAL.lively.lang)for(var g in Jd.livelyLang)Jd.GLOBAL.lively.lang[g]=Jd.livelyLang[g];else Jd.GLOBAL.lively.lang=Jd.livelyLang}function Gq(g){if(!g)return g;if(Array.isArray(g))return Jd.createChain(Jd.arr,g);if("Date"===g.constructor.name)return Jd.createChain(Jd.date,g);switch(typeof g){case "string":return Jd.createChain(Jd.string,
g);case "object":return Jd.createChain(Jd.obj,g);case "function":return Jd.createChain(Jd.fun,g);case "number":return Jd.createChain(Jd.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function Jw(){Jd.isNode||(Jd.livelyLang._prevLivelyGlobal?delete Jd.GLOBAL.lively.lang:delete Jd.GLOBAL.lively);return Jd.livelyLang}function rn(){Object.assign(Jd.livelyLang,{worker:Jd.worker,messenger:Jd.messenger,events:Jd.events,tree:Jd.tree,grid:Jd.grid,arrayProjection:Jd.arrayProjection,
interval:Jd.interval,graph:Jd.graph,date:Jd.date,properties:Jd.properties,obj:Jd.obj,arr:Jd.arr,fun:Jd.fun,num:Jd.num,string:Jd.string,Closure:Jd.Closure,promise:Jd.promise,Path:Jd.Path,Group:Jd.Group});Jd.globalInterfaceSpec.forEach(function(g){if("installMethods"===g.action){var e=Jd.Path(g.target);e.isIn(Jd.GLOBAL)||e.set(Jd.GLOBAL,{},!0);var m=Jd.Path(g.sources[0]);g.methods.forEach(function(c){Jd.installProperty(m.concat([c]),e.concat([c]))});g.alias&&g.alias.forEach(function(c){Jd.installProperty(m.concat([c[1]]),
e.concat([c[0]]))})}else if("installObject"===g.action)e=Jd.Path(g.target),g=Jd.Path(g.source).get(Jd.livelyLang),e.set(Jd.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function ly(){Jd.globalInterfaceSpec.forEach(function(g){if("installMethods"===g.action){var e=Jd.Path(g.target),m=Jd.Path(g.source).get(Jd.livelyLang),c=e.get(Jd.GLOBAL);c&&(g.methods.filter(function(h){return m===c[h]}).forEach(function(h){delete c[h]}),g.alias&&g.alias.filter(function(h){return m===
c[h]}).forEach(function(h){delete c[h[0]]}))}else if("installObject"===g.action)e=Jd.Path(g.target),e.del(Jd.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function Fu(g){return(g=g.match(x_))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:null}function Kw(g){var e="";g.scheme&&(e+=g.scheme+":");e+="//";g.auth&&(e+=g.auth+"@");g.host&&(e+=g.host);g.port&&(e+=":"+g.port);g.path&&(e+=g.path);return e}function aG(g){var e=g,m=Fu(g);if(m){if(!m.path)return g;e=m.path}g=
Pm.isAbsolute(e);e=e.split(/\/+/);for(var c,h=0,n=e.length-1;0<=n;n--)c=e[n],"."===c?e.splice(n,1):".."===c?h++:0<h&&(""===c?(e.splice(n+1,h),h=0):(e.splice(n,2),h--));e=e.join("/");""===e&&(e=g?"/":".");return m?(m.path=e,Kw(m)):e}function bG(g,e){""===g&&(g=".");""===e&&(e=".");var m=Fu(e),c=Fu(g);c&&(g=c.path||"/");if(m&&!m.scheme)return c&&(m.scheme=c.scheme),Kw(m);if(m||e.match(Vea))return e;if(c&&!c.host&&!c.path)return c.host=e,Kw(c);g="/"===e.charAt(0)?e:aG(g.replace(/\/+$/,"")+"/"+e);return c?
(c.path=g,Kw(c)):g}function Fr(g){return g}function UJ(g){return Gr(g)?"$"+g:g}function cG(g){return Gr(g)?g.slice(1):g}function Gr(g){if(!g)return!1;var e=g.length;if(9>e||95!==g.charCodeAt(e-1)||95!==g.charCodeAt(e-2)||111!==g.charCodeAt(e-3)||116!==g.charCodeAt(e-4)||111!==g.charCodeAt(e-5)||114!==g.charCodeAt(e-6)||112!==g.charCodeAt(e-7)||95!==g.charCodeAt(e-8)||95!==g.charCodeAt(e-9))return!1;for(e-=10;0<=e;e--)if(36!==g.charCodeAt(e))return!1;return!0}function Lw(g,e){return g===e?0:null===
g?1:null===e?-1:g>e?1:-1}function Hr(){(this||$n)._array=[];(this||$n)._set=zA?new Map:Object.create(null)}function AA(){(this||Ir)._array=[];(this||Ir)._sorted=!0;(this||Ir)._last={generatedLine:-1,generatedColumn:0}}function hj(g){g||(g={});(this||mi)._file=om.getArg(g,"file",null);(this||mi)._sourceRoot=om.getArg(g,"sourceRoot",null);(this||mi)._skipValidation=om.getArg(g,"skipValidation",!1);(this||mi)._sources=new VJ;(this||mi)._names=new VJ;(this||mi)._mappings=new Wea;(this||mi)._sourcesContents=
null}function Rp(g,e,m,c,h,n){var b=Math.floor((e-g)/2)+g,d=h(m,c[b],!0);return 0===d?b:0<d?1<e-b?Rp(b,e,m,c,h,n):n==WJ.LEAST_UPPER_BOUND?e<c.length?e:-1:b:1<b-g?Rp(g,b,m,c,h,n):n==WJ.LEAST_UPPER_BOUND?b:0>g?-1:g}function Bo(g,e,m){var c=g[e];g[e]=g[m];g[m]=c}function my(g,e,m,c){if(m<c){var h=m-1;Bo(g,Math.round(m+Math.random()*(c-m)),c);for(var n=g[c],b=m;b<c;b++)0>=e(g[b],n)&&(h+=1,Bo(g,h,b));Bo(g,h+1,b);h+=1;my(g,e,m,h-1);my(g,e,h+1,c)}}function ok(g,e){var m=g;"string"===typeof g&&(m=lg.parseSourceMapInput(g));
return null!=m.sections?new Ji(m,e):new pm(m,e)}function pm(g,e){var m=g;"string"===typeof g&&(m=lg.parseSourceMapInput(g));g=lg.getArg(m,"version");var c=lg.getArg(m,"sources"),h=lg.getArg(m,"names",[]),n=lg.getArg(m,"sourceRoot",null),b=lg.getArg(m,"sourcesContent",null),d=lg.getArg(m,"mappings");m=lg.getArg(m,"file",null);if(g!=(this||Re)._version)throw Error("Unsupported version: "+g);n&&(n=lg.normalize(n));c=c.map(String).map(lg.normalize).map(function(k){return n&&lg.isAbsolute(n)&&lg.isAbsolute(k)?
lg.relative(n,k):k});(this||Re)._names=XC.fromArray(h.map(String),!0);(this||Re)._sources=XC.fromArray(c,!0);(this||Re)._absoluteSources=(this||Re)._sources.toArray().map(function(k){return lg.computeSourceURL(n,k,e)});(this||Re).sourceRoot=n;(this||Re).sourcesContent=b;(this||Re)._mappings=d;(this||Re)._sourceMapURL=e;(this||Re).file=m}function YC(){(this||Re).generatedLine=0;(this||Re).generatedColumn=0;(this||Re).source=null;(this||Re).originalLine=null;(this||Re).originalColumn=null;(this||Re).name=
null}function Ji(g,e){var m=g;"string"===typeof g&&(m=lg.parseSourceMapInput(g));g=lg.getArg(m,"version");m=lg.getArg(m,"sections");if(g!=(this||Re)._version)throw Error("Unsupported version: "+g);(this||Re)._sources=new XC;(this||Re)._names=new XC;var c={line:-1,column:0};(this||Re)._sections=m.map(function(h){if(h.url)throw Error("Support for url field in sections not implemented.");var n=lg.getArg(h,"offset"),b=lg.getArg(n,"line"),d=lg.getArg(n,"column");if(b<c.line||b===c.line&&d<c.column)throw Error("Section offsets must be ordered and non-overlapping.");
c=n;return{generatedOffset:{generatedLine:b+1,generatedColumn:d+1},consumer:new ok(lg.getArg(h,"map"),e)}})}function Bl(g,e,m,c,h){(this||ij).children=[];(this||ij).sourceContents={};(this||ij).line=null==g?null:g;(this||ij).column=null==e?null:e;(this||ij).source=null==m?null:m;(this||ij).name=null==h?null:h;(this||ij).$$$isSourceNode$$$=!0;null!=c&&this.add(c)}function qm(g,e){e=void 0===e?{}:e;var m=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:e&&e.format&&e.format.indent||
{}},quotes:"double"},Hq.obj.dissoc(e&&e.format||{},["indent"]));e=Object.assign({format:m,comment:!1},Hq.obj.dissoc(e,["format"]));return Hq.es.generate(g,e)}function ZC(g,e){for(var m=65536,c=0;c<e.length;c+=2){m+=e[c];if(m>g)return!1;m+=e[c+1];if(m>=g)return!0}}function ao(g,e){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&Xea.test(String.fromCharCode(g)):!1===e?!1:ZC(g,y_)}function Gu(g,e){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&Yea.test(String.fromCharCode(g)):
!1===e?!1:ZC(g,y_)||ZC(g,Zea)}function Wh(g,e){return new Dj(g,{beforeExpr:!0,binop:e})}function hg(g,e){void 0===e&&(e={});e.keyword=g;return XJ[g]=new Dj(g,e)}function bo(g,e){return 10===g||13===g||!e&&(8232===g||8233===g)}function Oj(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function Hu(g,e){for(var m=1,c=0;;){ny.lastIndex=c;var h=ny.exec(g);if(h&&h.index<e)++m,c=h.index+h[0].length;else return new $C(m,e-c)}}function hd(g){var e={},m;for(m in dG)e[m]=g&&YJ.call(g,m)?g[m]:dG[m];"latest"===
e.ecmaVersion?e.ecmaVersion=1E8:null==e.ecmaVersion?(!z_&&"object"===typeof console&&console.warn&&(z_=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):2015<=e.ecmaVersion&&(e.ecmaVersion-=2009);null==e.allowReserved&&(e.allowReserved=5>e.ecmaVersion);if(A_(e.onToken)){var c=e.onToken;e.onToken=function(h){return c.push(h)}}A_(e.onComment)&&(e.onComment=fp(e,e.onComment));return e}function fp(g,
e){return function(m,c,h,n,b,d){m={type:m?"Block":"Line",value:c,start:h,end:n};g.locations&&(m.loc=new BA(this,b,d));g.ranges&&(m.range=[h,n]);e.push(m)}}function Iq(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function oy(g,e,m,c){g.type=e;g.end=m;this.options.locations&&(g.loc.end=c);this.options.ranges&&(g.range[1]=m);return g}function Jr(g){g=B_[g]={binary:Oj($ea[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:Oj("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:Oj(afa[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function Iu(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Kr(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function $s(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function aD(g){return $s(g)||py(g)}function py(g){return 48<=
g&&57>=g}function bD(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function CA(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function DA(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function Ju(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Mw(g){return"string"===typeof g?function(e){return e===g}:g?g:function(){return!0}}function Ku(g,e){e=Object.create(e||hf);for(var m in g)e[m]=
g[m];return e}function Nw(g,e,m){m(g,e)}function gp(g,e,m){}function sh(g){return"\u2716"===g.name}function Jq(){}function sn(g){return 14>g&&8<g||32===g||160===g||bo(g)}function Lr(g,e,m,c){var h=[];c=c||ef.walk.make(ef.custom.withMemberExpression);Object.keys(ef.walk.base).forEach(function(n){var b=c[n];c[n]=function(d,k,a){ef.arr.pushIfNotIncluded(h,d);return b(d,k,a)}});c.Property=function(n,b,d){ef.arr.pushIfNotIncluded(h,n);d(n.key,b,"Expression");d(n.value,b,"Expression")};c.LabeledStatement=
function(n,b,d){n.label&&d(n.label,b,"Expression");d(n.body,b,"Statement")};ef.walk.findNodeAround(g,e,m,c);return h}function at(g,e){function m(h){return null===h?null:c[h.type](h,m)}var c=ef.obj.extend({Program:function(h,n){return{start:h.start,end:h.end,type:"Program",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},FunctionDeclaration:function(h,n){return{start:h.start,end:h.end,type:"FunctionDeclaration",id:n(h.id),params:h.params.map(n),body:n(h.body),source:h.source,astIndex:h.astIndex}},
BlockStatement:function(h,n){return{start:h.start,end:h.end,type:"BlockStatement",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},ExpressionStatement:function(h,n){return{start:h.start,end:h.end,type:"ExpressionStatement",expression:n(h.expression),source:h.source,astIndex:h.astIndex}},CallExpression:function(h,n){return{start:h.start,end:h.end,type:"CallExpression",callee:n(h.callee),arguments:h.arguments.map(n),source:h.source,astIndex:h.astIndex}},MemberExpression:function(h,n){return{start:h.start,
end:h.end,type:"MemberExpression",object:n(h.object),property:n(h.property),computed:h.computed,source:h.source,astIndex:h.astIndex}},NewExpression:function(h,n){return{start:h.start,end:h.end,type:"NewExpression",callee:n(h.callee),arguments:h.arguments.map(n),source:h.source,astIndex:h.astIndex}},VariableDeclaration:function(h,n){return{start:h.start,end:h.end,type:"VariableDeclaration",declarations:h.declarations.map(n),kind:h.kind,source:h.source,astIndex:h.astIndex}},VariableDeclarator:function(h,
n){return{start:h.start,end:h.end,type:"VariableDeclarator",id:n(h.id),init:n(h.init),source:h.source,astIndex:h.astIndex}},FunctionExpression:function(h,n){return{start:h.start,end:h.end,type:"FunctionExpression",id:n(h.id),params:h.params.map(n),body:n(h.body),source:h.source,astIndex:h.astIndex}},IfStatement:function(h,n){return{start:h.start,end:h.end,type:"IfStatement",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},ConditionalExpression:function(h,
n){return{start:h.start,end:h.end,type:"ConditionalExpression",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},SwitchStatement:function(h,n){return{start:h.start,end:h.end,type:"SwitchStatement",discriminant:n(h.discriminant),cases:h.cases.map(n),source:h.source,astIndex:h.astIndex}},SwitchCase:function(h,n){return{start:h.start,end:h.end,type:"SwitchCase",test:n(h.test),consequent:h.consequent.map(n),source:h.source,astIndex:h.astIndex}},BreakStatement:function(h,
n){return{start:h.start,end:h.end,type:"BreakStatement",label:h.label,source:h.source,astIndex:h.astIndex}},ContinueStatement:function(h,n){return{start:h.start,end:h.end,type:"ContinueStatement",label:h.label,source:h.source,astIndex:h.astIndex}},TryStatement:function(h,n){return{start:h.start,end:h.end,type:"TryStatement",block:n(h.block),handler:n(h.handler),finalizer:n(h.finalizer),guardedHandlers:h.guardedHandlers.map(n),source:h.source,astIndex:h.astIndex}},CatchClause:function(h,n){return{start:h.start,
end:h.end,type:"CatchClause",param:n(h.param),guard:n(h.guard),body:n(h.body),source:h.source,astIndex:h.astIndex}},ThrowStatement:function(h,n){return{start:h.start,end:h.end,type:"ThrowStatement",argument:n(h.argument),source:h.source,astIndex:h.astIndex}},ForStatement:function(h,n){return{start:h.start,end:h.end,type:"ForStatement",init:n(h.init),test:n(h.test),update:n(h.update),body:n(h.body),source:h.source,astIndex:h.astIndex}},ForInStatement:function(h,n){return{start:h.start,end:h.end,type:"ForInStatement",
left:n(h.left),right:n(h.right),body:n(h.body),source:h.source,astIndex:h.astIndex}},WhileStatement:function(h,n){return{start:h.start,end:h.end,type:"WhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},DoWhileStatement:function(h,n){return{start:h.start,end:h.end,type:"DoWhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},WithStatement:function(h,n){return{start:h.start,end:h.end,type:"WithStatement",object:n(h.object),body:n(h.body),
source:h.source,astIndex:h.astIndex}},UnaryExpression:function(h,n){return{start:h.start,end:h.end,type:"UnaryExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},BinaryExpression:function(h,n){return{start:h.start,end:h.end,type:"BinaryExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},LogicalExpression:function(h,n){return{start:h.start,end:h.end,type:"LogicalExpression",left:n(h.left),operator:h.operator,
right:n(h.right),source:h.source,astIndex:h.astIndex}},AssignmentExpression:function(h,n){return{start:h.start,end:h.end,type:"AssignmentExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},UpdateExpression:function(h,n){return{start:h.start,end:h.end,type:"UpdateExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},ReturnStatement:function(h,n){return{start:h.start,end:h.end,type:"ReturnStatement",
argument:n(h.argument),source:h.source,astIndex:h.astIndex}},Identifier:function(h,n){return{start:h.start,end:h.end,type:"Identifier",name:h.name,source:h.source,astIndex:h.astIndex}},Literal:function(h,n){return{start:h.start,end:h.end,type:"Literal",value:h.value,raw:h.raw,source:h.source,astIndex:h.astIndex}},ObjectExpression:function(h,n){return{start:h.start,end:h.end,type:"ObjectExpression",properties:h.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:h.source,
astIndex:h.astIndex}},ArrayExpression:function(h,n){return{start:h.start,end:h.end,type:"ArrayExpression",elements:h.elements.map(n),source:h.source,astIndex:h.astIndex}},SequenceExpression:function(h,n){return{start:h.start,end:h.end,type:"SequenceExpression",expressions:h.expressions.map(n),source:h.source,astIndex:h.astIndex}},EmptyStatement:function(h,n){return{start:h.start,end:h.end,type:"EmptyStatement",source:h.source,astIndex:h.astIndex}},ThisExpression:function(h,n){return{start:h.start,
end:h.end,type:"ThisExpression",source:h.source,astIndex:h.astIndex}},DebuggerStatement:function(h,n){return{start:h.start,end:h.end,type:"DebuggerStatement",source:h.source,astIndex:h.astIndex}},LabeledStatement:function(h,n){return{start:h.start,end:h.end,type:"LabeledStatement",label:h.label,body:n(h.body),source:h.source,astIndex:h.astIndex}}},e||{});return m(g)}function Lu(g,e,m){if(!e)return[];g=ef.findNodesIncluding(g,e.start);var c=g.indexOf(e);g=g.slice(0,c);g=ef.arr.detect(g.reverse(),function(h){return Array.isArray(h.body)}).body;
if(!m)return ef.arr.without(g,e);e=g.indexOf(e);return"before"===m?g.slice(0,e):g.slice(e+1)}function Kq(g,e,m){g.astIndex||null!=m&&!m||ef.addAstIndex(g);var c=null;ef.withMozillaAstDo(g,null,function(h,n,b){c||n.astIndex<e||(n.astIndex===e?c=n:h())});return c}function za(g,e,m){m||(m=e,e=g,g=null);g||(g={});e.astIndex||ef.addAstIndex(e);var c,h=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
ef.withMozillaAstDo(e,{},function(b,d,k,a){if(!(h||d.astIndex<m.astIndex)){if(d===m||d.astIndex===m.astIndex)if(h=!0,g.asPath)c=a;else{d=ef.Path(a);do c=d.get(e),d=d.slice(0,d.size()-1);while(-1==n.indexOf(c.type)&&0<d.size())}!h&&b()}});return c}function hp(g){ef.withMozillaAstDo(g,{index:0},function(e,m,c){e();m.astIndex=c.index++});return g}function Cl(g,e){"string"===typeof g&&(e=g,g=Bh.parse(g));e&&Bh.AllNodesVisitor.run(g,function(m,c,h){return!m.source&&(m.source=e.slice(m.start,m.end))});
return g}function Qm(g,e){e=void 0===e?{}:e;var m=Bh.parse("("+g+")",e);Bh.AllNodesVisitor.run(m,function(c,h,n){if(!c._positionFixed){c._positionFixed=!0;if(c.start||0===c.start)c.start+=-1,c.end+=-1;e.addSource&&!c.source&&(c.source=g.slice(c.start,c.end))}});return m.body[0].expression}function co(g,e){e=e||{};e.ecmaVersion=e.ecmaVersion||11;e.sourceType=e.sourceType||"module";e.plugins=e.plugins||{};e.plugins.jsx=e.plugins.hasOwnProperty("jsx")?e.plugins.jsx:!0;e.plugins.asyncawait=e.plugins.hasOwnProperty("asyncawait")?
e.plugins.asyncawait:{inAsyncFunction:!0};e.plugins.objectSpread=e.plugins.hasOwnProperty("objectSpread")?e.plugins.objectSpread:!0;var m;"LabeledStatement"===e.type&&(m="$={"+g+"}");try{var c=Bh.parse(m||g,e);m?c=null:e.addSource&&Bh.addSource(c,g)}catch(n){var h=n}h&&void 0!==h.raisedAt?(m&&(h.pos-=3,h.raisedAt-=3,h.loc.column-=3),m=""+g.slice(h.raisedAt-20,h.raisedAt),m=m+"<-error->"+g.slice(h.raisedAt,h.raisedAt+20),e.verbose&&console.log("parse error: "+m),h.parseErrorSource=m):h&&e.verbose&&
console.log(""+h+h.stack);c||(c=Bh.loose.parse(g,e),e.addSource&&Bh.addSource(c,g),c.isFuzzy=!0,c.parseError=h);return c}function ce(g,e){function m(l){l=h(c(l));b.allComments=l.comments}function c(l){n.forEach(function(r){var v=Bh.arr.detect(Bh.nodesAt(r.start,b).reverse(),function(y){return"BlockStatement"===y.type||"Program"===y.type});v||(v=b);v.comments||(v.comments=[]);v.comments.push(r);l.nodesWithComments.push(v)});return l}function h(l){l.nodesWithComments.forEach(function(r){Bh.arr.clone(r.comments).reduce(function(v,
y){if(y.isBlock)return v.lastComment=null,v;if(!v.lastComment)return v.lastComment=y,v;var A=v.lastComment;if(Bh.arr.detect(r.body,function(F){return F.start>=A.end&&F.end<=y.start}))return v.lastComment=y,v;var E=g.slice(A.end,y.start);if(/[\n\r][\n\r]+/.test(E))return v.lastComment=y,v;A.text+="\n"+y.text;A.end=y.end;Bh.arr.remove(r.comments,y);Bh.arr.remove(l.comments,y);return v},{lastComment:null})});return l}e=e||{};e.ecmaVersion=e.ecmaVersion||11;e.allowAwaitOutsideFunction=!0;e.sourceType=
e.sourceType||"module";e.hasOwnProperty("allowImportExportEverywhere")||(e.allowImportExportEverywhere=!0);e.plugins=e.plugins||{};e.plugins.jsx=e.plugins.hasOwnProperty("jsx")?e.plugins.jsx:!0;e.plugins.asyncawait=e.plugins.hasOwnProperty("asyncawait")?e.plugins.asyncawait:{inAsyncFunction:!0};e.plugins.objectSpread=e.plugins.hasOwnProperty("objectSpread")?e.plugins.objectSpread:!0;if(e.withComments){delete e.withComments;var n=[];e.onComment=function(l,r,v,y,A,E){n.push({isBlock:l,text:r,node:null,
start:v,end:y,line:A,column:E})}}try{var b=Bh.acorn.parse(g,e)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var d=g.split("\n"),k=l,a=k.loc;e=a.line;a=a.column;var f=k.pos;d=d[e-1];k="Syntax error at line "+e+" column "+a+" (index "+f+') "'+k.message+'"\nsource: '+d.slice(0,a)+"<--SyntaxError--\x3e"+d.slice(a);k=new SyntaxError(k);k.loc={line:e,column:a};k.pos=f;throw k;}throw l;}e.addSource&&Bh.addSource(b,g);e.addAstIndex&&!b.hasOwnProperty("astIndex")&&Bh.addAstIndex(b);
b&&n&&m({ast:b,comments:n,nodesWithComments:[]});return b}function qf(g){return af.identifierRe.test(g)&&-1===g.indexOf("-")}function Sa(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function rm(g){return{type:"Literal",value:g}}function ip(g){return{type:"ExpressionStatement",expression:g}}function Mr(g){return{type:"ReturnStatement",argument:g}}function qy(){return{type:"EmptyStatement"}}function EA(g,e,m){return{left:g,right:m,operator:e,type:"BinaryExpression"}}
function Ow(g,e,m){for(var c=[],h=2;h<arguments.length;++h)c[h-2]=arguments[h];h=g.arrow;var n=g.id,b=g.expression,d=g.generator;e=void 0===e?[]:e;e=e.map(function(k){return"string"===typeof k?af.id(k):k});return{type:(h?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?af.id(n):n:void 0,params:e,body:b&&1===c.length?c[0]:{body:c,type:"BlockStatement"},expression:b||!1,generator:d||!1}}function Lq(g,e){for(var m=[],c=1;c<arguments.length;++c)m[c-1]=arguments[c];"string"===typeof g&&(g=af.id(g));
return{type:"CallExpression",callee:g,arguments:m}}function vj(g,e,m){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:m||"var",declarations:[{type:"VariableDeclarator",id:g,init:e}]}}function jp(g,e,m){"string"===typeof g&&(g=af.id(g));"string"===typeof e?(m||af.isIdentifier(e)||(m=!0),e=m?af.literal(e):af.id(e)):"number"===typeof e?(e=af.literal(e),m=!0):"Literal"===e.type&&(m=!0);return{type:"MemberExpression",computed:!!m,object:g,property:e}}function Wk(g,
e){for(var m=[],c=1;c<arguments.length;++c)m[c-1]=arguments[c];return m.reduce(function(h,n){return af.member(h,n)},"object"===typeof g?g:af.id(g))}function Mq(g,e){return{type:"AssignmentExpression",operator:"=",right:e?"string"===typeof e?af.id(e):e:af.id("undefined"),left:"string"===typeof g?af.id(g):g}}function Co(g){for(var e=[],m=0;m<arguments.length;++m)e[m-0]=arguments[m];return{body:Array.isArray(e[0])?e[0]:e,type:"BlockStatement"}}function Mu(g){for(var e=[],m=0;m<arguments.length;++m)e[m-
0]=arguments[m];return Object.assign(af.block.apply(af,$jscomp.arrayFromIterable(e)),{sourceType:"module",type:"Program"})}function sm(g,e,m,c){for(var h=[],n=3;n<arguments.length;++n)h[n-3]=arguments[n];Array.isArray(m)||(h.unshift(m),m=null);return{block:af.block(h),finalizer:m?af.block(m):null,handler:{body:af.block(e),param:af.id(g),type:"CatchClause"},type:"TryStatement"}}function ry(g,e){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:e}}function tn(g){for(var e=
[],m=0;m<g.length;m+=2){var c=g[m];"string"===typeof c&&(c=af.id(c));e.push(af.prop(c,g[m+1]))}return{properties:e,type:"ObjectExpression"}}function tm(g,e,m){e=void 0===e?af.block():e;m=void 0===m?af.block():m;return{consequent:e,alternate:m,test:g,type:"IfStatement"}}function Nu(g,e,m){return{type:"ForInStatement",left:"string"===typeof g?af.varDecl(g):g,right:"string"===typeof e?af.id(e):e,body:m}}function Ou(g,e,m){e=void 0===e?af.id("undefined"):e;m=void 0===m?af.id("undefined"):m;return{consequent:e,
alternate:m,test:g,type:"ConditionalExpression"}}function FA(g,e,m){return{operator:g,left:e,right:m,type:"LogicalExpression"}}function Pw(g){var e=new Qd.ScopeVisitor,m=e.newScope(g,null);e.accept(g,m,[]);return m}function cD(g,e){return Qd.withMozillaAstDo(g,[],function(m,c,h){c.start<=e&&e<=c.end&&(h.push(c),m());return h})}function xi(g,e){return Qd.tree.filter(Qd.scopes(g),function(m){m=m.node;var c=m.start,h=m.end;"FunctionDeclaration"===m.type&&(c=m.params.length?m.params[0].start:m.body.start,
h=m.body.end);return c<=e&&e<=h},function(m){return m.subScopes})}function dD(g,e){return Qd.arr.last(Qd.scopesAtIndex(g,e))}function eD(g,e){return Qd.arr.filter(Qd.nodesAt(g,e),function(m){return"Program"===m.type||"FunctionDeclaration"===m.type||"FunctionExpression"===m.type})}function bt(g){return Qd.withMozillaAstDo(g,{root:g,result:[]},function(e,m,c){c.result.push(m);if(m!==c.root&&("Program"===m.type||"FunctionDeclaration"===m.type||"FunctionExpression"===m.type))return c;e();return c}).result}
function fD(g,e,m){m=void 0===m?[]:m;e&&g.node.id&&g.node.id.name&&m.push(g.node.id);Qd.helpers.declIds(g.params,m);for(e=0;e<g.funcDecls.length;e++){var c=g.funcDecls[e].id;c&&m.push(c)}Qd.helpers.varDeclIds(g,m);m.push.apply(m,$jscomp.arrayFromIterable(g.catches));for(e=0;e<g.classDecls.length;e++)(c=g.classDecls[e].id)&&m.push(c);m.push.apply(m,$jscomp.arrayFromIterable(g.importSpecifiers));return Qd.arr.compact(m)}function Nr(g,e){for(var m=[],c=$jscomp.makeIterator(Qd.declarationsOfScope(g,!0)),
h=c.next();!h.done;h=c.next())m.push(h.value.name);e&&Qd._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,m);return m}function Sp(g,e){e=void 0===e?[]:e;if(!g||!g.comments)return e;g=$jscomp.makeIterator(g.comments);for(var m=g.next();!m.done;m=g.next())if(m=m.value.text.trim(),m.startsWith("global")){m=$jscomp.makeIterator(m.replace(Qd.globalDeclRe,"").split(","));for(var c=m.next();!c.done;c=m.next())e.push(c.value.trim())}return e}function Nq(g){return Qd.FindToplevelFuncDeclVisitor.run(g)}
function Oq(g,e){if(0==e.length)return[null,null];var m=$jscomp.makeIterator(e);e=m.next().value;m=$jscomp.arrayFromIterator(m);var c=e.decls||Qd.declarationsWithIdsOfScope(e);e.decls=c;return c.find(function(h){h=$jscomp.makeIterator(h);h.next();return h.next().value.name==g})||Oq(g,m)}function um(g){function e(c,h){var n=[c].concat(h);c.refs.forEach(function(b){var d=$jscomp.makeIterator(Qd.resolveReference(b.name,n)),k=d.next().value;d=d.next().value;m.set(b,{decl:k,declId:d,ref:b})});c.subScopes.forEach(function(b){return e(b,
n)})}if(g.referencesResolvedSafely)return g;var m=g.resolvedRefMap||(g.resolvedRefMap=new Map);e(g,[]);g.referencesResolvedSafely=!0;return g}function gD(g,e){e=$jscomp.makeIterator(e.resolvedRefMap.values());for(var m=e.next();!m.done;m=e.next()){m=m.value;var c=m.ref,h=c.end;if(c.start<=g&&g<=h)return m}}function Rm(g,e){function m(b){var d=Qd._declaredVarNames(b,c);return Qd.arr.filter(b.subScopes.map(m).reduce(function(k,a){return k.concat(a)},b.refs),function(k){return-1===d.indexOf(k.name)})}
e=e||{};e.withComments=!0;"string"===typeof g&&(g=Qd.parse(g,e));g=Qd.scopes(g);var c=!!e.jslintGlobalComment;e=Qd._declaredVarNames(g,c);var h=g.refs.concat(Qd.arr.flatten(g.subScopes.map(m))),n=Qd.arr.withoutAll(h.map(function(b){return b.name}),e);return{scope:g,varDecls:g.varDecls,funcDecls:Qd.arr.filter(g.funcDecls,function(b){return b.id}),classDecls:Qd.arr.filter(g.classDecls,function(b){return b.id}),declaredNames:e,undeclaredNames:n,refs:h,thisRefs:g.thisRefs}}function Dk(g,e){g=Qd.topLevelDeclsAndRefs(g,
e);var m=g.declaredNames.concat(Qd.knownGlobals);return Qd.arr.filter(g.refs,function(c){return-1===m.indexOf(c.name)})}function sy(g,e,m,c){if(!e&&!g)throw Error("Need at least ast or code");e=e||Qd.stringify(g);g=g&&g.loc?g:Qd.parse(e,{locations:!0});return Qd.withMozillaAstDo(g,[],function(h,n,b){m.every(function(d){return Qd.num.between(d,n.loc.start.line,n.loc.end.line)})&&(Qd.arr.pushIfNotIncluded(b,n),h());return b})}function Or(g,e,m,c){m=void 0===m?!0:m;c=void 0===c?{refs:[],decls:[]}:c;
if("this"===e)return c.refs.push.apply(c.refs,$jscomp.arrayFromIterable(g.thisRefs)),c;var h=Qd.__varDeclIdsFor(g,e);if(!m&&h.length)return c;m=$jscomp.makeIterator(g.refs);for(var n=m.next();!n.done;n=m.next())n=n.value,n.name===e&&c.refs.push(n);c.decls.push.apply(c.decls,$jscomp.arrayFromIterable(h));g=$jscomp.makeIterator(g.subScopes);for(h=g.next();!h.done;h=g.next())Or(h.value,e,!1,c);return c}function ty(g,e,m){var c=null;Qd.arr.detect(Qd.scopesAtIndex(g,m).reverse(),function(h){h=Qd.declarationsOfScope(h,
!0);var n=Qd.arr.pluck(h,"name").indexOf(e);if(-1===n)return!1;c=h[n];return!0});return c}function Pu(g,e){e="string"===typeof e?Qd.parse(e):e;return Qd.custom.findNodesIncluding(e,g)}function eo(g,e,m){var c=Qd.nodesAt(e.start,g).reverse().find(function(n){return Qd.arr.include(Qd._stmtTypes,n.type)});if(m&&m.asPath){e=new Qd.BaseVisitor;var h;e.accept=Qd.fun.wrap(e.accept,function(n,b,d,k){if(b===c)throw h=k,Error("stop search");return n(b,d,k)});try{e.accept(g,{},[])}catch(n){}return h}return c}
function Pr(g){var e=[];g=g.node.body||[];for(var m=0;m<g.length;m++){var c=g[m];if("ImportDeclaration"===c.type)if(0===c.specifiers.length)e.push({local:null,imported:null,fromModule:c.source.value,node:c});else{var h=c.source?c.source.value:"unknown module";e.push.apply(e,$jscomp.arrayFromIterable(c.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:h,node:c}})))}}return e}function Qw(g,e){(void 0===e?0:e)&&Qd.resolveReferences(g);e=[];for(var m={},c=$jscomp.makeIterator(g.exportDecls),h=c.next();!h.done;m={$jscomp$loop$prop$node$2523:m.$jscomp$loop$prop$node$2523},h=c.next()){m.$jscomp$loop$prop$node$2523=h.value;var n=Qd.statementOf(g.node,m.$jscomp$loop$prop$node$2523);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?e.push({local:null,exported:"*",imported:"*",fromModule:b,node:m.$jscomp$loop$prop$node$2523,
type:"all"}):"ExportDefaultDeclaration"===n.type?Qd.helpers.isDeclaration(n.declaration)?e.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:m.$jscomp$loop$prop$node$2523,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(h=g.resolvedRefMap.get(n.declaration)||{},e.push({local:n.declaration.name,exported:"default",
fromModule:null,node:m.$jscomp$loop$prop$node$2523,type:"id",decl:h.decl,declId:h.declId})):e.push({local:null,exported:"default",fromModule:null,node:m.$jscomp$loop$prop$node$2523,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?e.push.apply(e,$jscomp.arrayFromIterable(n.specifiers.map(function(d){return function(k){if(b){var a=d.$jscomp$loop$prop$node$2523;var f=k.exported}else k.local&&(a=(f=g.resolvedRefMap.get(k.local))?f.decl:null,f=f?f.declId:null);return{local:!b&&
k.local?k.local.name:null,exported:k.exported?k.exported.name:null,imported:b&&k.local?k.local.name:null,fromModule:b||null,type:"id",node:d.$jscomp$loop$prop$node$2523,decl:a,declId:f}}}(m)))):n.declaration&&n.declaration.declarations?e.push.apply(e,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(d){return function(k){return{local:k.id?k.id.name:"default",exported:k.id?k.id.name:"default",type:n.declaration.kind,fromModule:null,node:d.$jscomp$loop$prop$node$2523,decl:k,declId:k.id}}}(m)))):
n.declaration&&e.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:m.$jscomp$loop$prop$node$2523,decl:n.declaration,declId:n.declaration.id})}}return Qd.arr.uniqBy(e,function(d,k){return d.local==k.local&&d.exported==k.exported&&d.fromModule==k.fromModule})}function Qu(g){return(new Pq.ObjectSpreadTransformer).accept(g,
{},[])}function Sm(g,e){if(g.start===e.start&&g.end===e.end)return 0;if(g.end<=e.start)return-1;if(g.start>=e.end||g.start<=e.start&&g.end>=e.end)return 1;if(e.start<=g.start&&e.end>=g.end)return-1;throw Error("Comparing nodes");}function Qr(g,e,m){m="object"===typeof m?m:{changes:[],source:m};var c=!1,h=m.changes.reduce(function(b,d){if(b.end<d.pos)return b;var k=d.pos<b.start;c=c||d.pos>=b.start&&d.pos<=b.end;if("add"===d.type)return{start:k?b.start+d.string.length:b.start,end:b.end+d.string.length};
if("del"===d.type)return{start:k?b.start-d.length:b.start,end:b.end-d.length};throw Error("Cannot deal with change "+je.obj.inspect(d));},{start:g.start,end:g.end}),n=m.source;g=e(g,n.slice(h.start,h.end),c);g="string"===typeof g?g:Array.isArray(g)?g.map(je._node2string).join("\n"+je._findIndentAt(n,h.start)):g=je._node2string(g);h=[{type:"del",pos:h.start,length:h.end-h.start},{type:"add",pos:h.start,string:g}];return{changes:m.changes.concat(h),source:je._applyChanges(h,n)}}function GA(g,e){g=g.sort(function(h,
n){return je._compareNodesForReplacement(h.target,n.target)});e="object"===typeof e?e:{changes:[],source:e};for(var m=0;m<g.length;m++){var c=g[m];e=je.replaceNode(c.target,c.replacementFunc,e)}return e}function hD(g,e,m,c){c="object"===typeof g?g:null;g="string"===typeof g?g:c.source||je._node2string(c);return je.replaceNode(e,m,g)}function ZJ(g,e){e=void 0===e?[]:e;e.push.apply(e,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var m=g.next();!m.done;m=g.next())ZJ(m.value,
e);return e}function Tp(g){var e="object"===typeof g?g:je.parse(g);g="string"===typeof g?g:e.source||je._node2string(e);e=je.scopes(e);var m=je.__findVarDecls(e);e=[];m=$jscomp.makeIterator(m);for(var c=m.next();!c.done;c=m.next())e.push({target:c.value,replacementFunc:function(h,n,b){b&&(h=je.parse(n).body[0]);return h.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}});return je.replaceNodes(e,g)}function uy(g){var e="object"===typeof g?g:je.parse(g);
g="string"===typeof g?g:e.source||je._node2string(e);e=je.scopes(e);var m=je.__findVarDecls(e);e=[];m=$jscomp.makeIterator(m);for(var c=m.next();!c.done;c=m.next())e.push({target:c.value,replacementFunc:function(h,n,b){b&&(h=je.parse(n).body[0]);n=[];h=$jscomp.makeIterator(h.declarations);for(b=h.next();!b.done;b=h.next()){var d=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:d.init}]});d=$jscomp.makeIterator(je.helpers.objPropertiesAsList(d.id,
[],!1));for(var k=d.next();!k.done;k=d.next())k=k.value.key,n.push(je.varDecl(k[k.length-2],je.memberChain.apply(je,[b.name].concat($jscomp.arrayFromIterable(k))),"var"))}return n}});return je.replaceNodes(e,g)}function Rw(g,e){e=e||{};var m=je.parse(g,e),c=je.arr.last(m.body);if("ExpressionStatement"!==c.type)return e.asAST?m:g;m.body.splice(m.body.length-1,1,je.returnStmt(c.expression));return e.asAST?m:je.stringify(m)}function vy(g,e){e=e||{};g=je.returnLastStatement(g,e);return e.asAST?je.program(je.funcExpr.apply(je,
[{id:e.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(e.id?" "+e.id:"")+"() {\n"+g+"\n}"}function iD(g,e){"string"===typeof g&&(g=je.parse(g));e=e||{};var m="Program"===g.type,c=e.startFuncNode||je.id("__start_execution");e=e.endFuncNode||je.id("__end_execution");var h=je.topLevelFuncDecls(g),n=g.body,b=[];h.forEach(function(d){var k=d.node;je.Path(d.path).set(g,je.exprStmt(k.id));b.push(k)});n.unshift(je.exprStmt(je.funcCall(c)));c=je.arr.last(n);"ExpressionStatement"===
c.type?(n.pop(),n.push(je.exprStmt(je.funcCall(e,je.id("null"),c.expression)))):"VariableDeclaration"===c.type&&"Identifier"===je.arr.last(c.declarations).id.type?n.push(je.exprStmt(je.funcCall(e,je.id("null"),je.arr.last(c.declarations).id))):n.push(je.exprStmt(je.funcCall(e,je.id("null"),je.id("undefined"))));b.push(je.tryStmt.apply(je,["err",[je.exprStmt(je.funcCall(e,je.id("err"),je.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return m?je.program.apply(je,$jscomp.arrayFromIterable(b)):
je.block.apply(je,$jscomp.arrayFromIterable(b))}function HA(g){if(!je.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var e=je.fuzzyParse(g);1===e.body.length&&("FunctionDeclaration"===e.body[0].type||"BlockStatement"===e.body[0].type&&"LabeledStatement"===e.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(m){"undefined"!==typeof $world?$world.logError(m):console.error("Eval preprocess error: %s",m.stack||m)}return g}function ct(g,e){var m=Yf.statementOf(g,
e,{asPath:!0}).slice(0,-2);m=Yf.Path(m).get(g);return m.comments&&m.comments.length?Yf.chain(Yf.extractComments(g)).reversed().detect(function(c){return c.followingNode===e}).value():null}function dt(g,e){function m(v){return Yf.arr.detect(v.node.body,function(y){return y.start>v.comment.end})}function c(v){return{type:"unknown",comment:v.comment.text}}function h(v){v=Yf.Path(v.path.slice(0,-1)).get(f);return{name:v.id?v.id.name:"<error: no name for function>",args:Yf.arr.pluck(v.params,"name")}}
function n(v){for(var y=Yf.Path(v.path.slice(0,-2)).get(f),A=y.key?y.key.name:"<error: no name for method>",E=v.path.slice(),F="<error: no object found for method>";E.length&&"init"!==Yf.arr.last(E);)E.pop();E.length&&(F=Yf.Path(E.slice(0,-1).concat(["id","name"])).get(f));if(Yf.string.startsWith(F,"<error")){for(E=v.path.slice();E.length&&"right"!==Yf.arr.last(E);)E.pop();E.length&&(F=Yf.Path(E.slice(0,-1).concat(["left"])).get(f),F=l.slice(F.start,F.end))}Yf.string.startsWith(F,"<error")&&(E=v.path.slice(),
(v=(v=Yf.Path(E.slice(0,-6)).get(f))&&"CallExpression"===v.type&&v.arguments[0])&&(F=l.slice(v.start,v.end)));return{name:A,args:Yf.arr.pluck(y.value.params,"name"),objectName:F}}function b(v){v=Yf.Path(v.path.slice(0,-1)).get(f);if("FunctionExpression"!==v.type&&"FunctionDeclaration"!==v.type)return{};var y=Yf.statementOf(f,v);if("ExpressionStatement"!==y.type||"AssignmentExpression"!==y.expression.type)return{};var A=l.slice(y.expression.left.object.start,y.expression.left.object.end);return{name:l.slice(y.expression.left.property.start,
y.expression.left.property.end),objectName:A,args:Yf.arr.pluck(v.params,"name")}}function d(v){var y=v.path.slice(0,-3);var A=Yf.Path(y).get(f);if(A&&"Property"===A.type){var E=Yf.arr.pluck(A.value.callee.params,"name");var F=A.key?A.key.name:"<error: no name for method>"}F||(y=v.path.slice(0,-2),(A=Yf.Path(y).get(f))&&"Property"===A.type&&(E=Yf.arr.pluck(A.value.params,"name"),F=A.key?A.key.name:"<error: no name for method>"));F||(F="<error: no name for method>",E=[],y=v.path);A=Yf.arr.clone(y);
for(v="<error: no object found for method>";A.length&&"init"!==Yf.arr.last(A);)A.pop();A.length&&(v=Yf.Path(A.slice(0,-1).concat(["id","name"])).get(f));if(Yf.string.startsWith(v,"<error")){for(A=Yf.arr.clone(y);A.length&&"right"!==Yf.arr.last(A);)A.pop();A.length&&(v=Yf.Path(A.slice(0,-1).concat(["left"])).get(f),v=l.slice(v.start,v.end))}Yf.string.startsWith(v,"<error")&&(A=Yf.arr.clone(y),(y=(y=Yf.Path(A.slice(0,-4)).get(f))&&"CallExpression"===y.type&&y.arguments[0])&&(v=l.slice(y.start,y.end)));
return{name:F,args:E,objectName:v}}function k(v){return v&&"VariableDeclaration"===v.type&&1===v.declarations.length}function a(v){return"AssignmentExpression"!==v.type?!1:"ObjectExpression"===v.right.type?!0:"AssignmentExpression"===v.right.type?a(v.right):!1}var f="string"===typeof g?Yf.parse(g,{withComments:!0}):g,l=e||("string"===typeof g?g:Yf.stringify(g)),r=Yf.arr.sortBy(function(v){var y=[],A=new Yf.Visitor;A.accept=Yf.fun.wrap(A.accept,function(E,F,H,J){F.comments&&Yf.arr.pushAll(y,F.comments.map(function(O){return{path:J,
comment:O,node:F}}));return E(F,H,J)});A.accept(v,y,[]);return y}(f),function(v){return v.comment.start});return r.map(function(v,y){if(Yf.arr.equals(v.path.slice(-2),["value","body"]))return Yf.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},n(v)]);var A=v.path.slice(-5);Yf.arr.removeAt(A,1);if(Yf.arr.equals(A,["properties","value","callee","body"]))return Yf.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},d(v)]);if((A=Yf.Path(v.path.slice(0,-1)).get(f))&&"FunctionDeclaration"===
A.type)return Yf.obj.merge([v,v.comment,{type:"function",comment:v.comment.text},h(v)]);if(Yf.arr.equals(v.path.slice(-2),["right","body"]))return Yf.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},b(v)]);A=m(v);return A?(y=r[y+1])&&y.comment.start<=A.start?Yf.obj.merge([v,v.comment,{followingNode:A},c(v)]):k(A)&&("ObjectExpression"===A.declarations[0].init.type||a(A.declarations[0].init))?Yf.obj.merge([v,v.comment,{followingNode:A},{type:"object",comment:v.comment.text},{name:A.declarations[0].id.name}]):
k(A)?Yf.obj.merge([v,v.comment,{followingNode:A},{type:"var",comment:v.comment.text},{name:A.declarations[0].id.name}]):Yf.obj.merge([v,v.comment,{followingNode:A},c(v)]):Yf.obj.merge([v,v.comment,{followingNode:A},c(v)])})}function Ru(g,e){e=e||Xh.obj.merge({hideOneLiners:!1},e);"string"===typeof g&&(g=Xh.parse(g,{addSource:!0}));for(var m=[],c=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),h=c.next();!h.done;h=c.next()){h=h.value;h=Xh.unwrapExport(h);var n=Xh.functionWrapper(h,e)||
Xh.varDefs(h)||Xh.funcDef(h)||Xh.es6ClassDef(h)||Xh.someObjectExpressionCall(h);if(n){if(e.hideOneLiners)if(g.loc)n=Xh.arr.filter(n,function(d){return!d.node.loc||d.node.loc.start.line!==d.node.loc.end.line});else if(g.source){h=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&h.includes(b.parent)||(b.node.source||"").includes("\n"))&&h.push(b);n=h}m.push.apply(m,$jscomp.arrayFromIterable(n))}}return m}function Rr(g){return Xh.arr.flatmap(g,function(e){return e?
"Identifier"===e.type?[e]:"RestElement"===e.type?[e.argument]:"ObjectPattern"===e.type?Rr(Xh.arr.pluck(e.properties,"value")):"ArrayPattern"===e.type?Rr(e.elements):[]:[]})}function wy(g){return mg.isValidIdentifierRe.test(g)}function vm(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function et(g,e){e=String(e).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(e&&e[1]||"")+")"}function Su(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function Sr(g,e){return g.map(function(m){return m[e]})}function Qq(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(Yh.knownSymbols.get(g))return Yh.knownSymbols.get(g);String(g).match(Yh.symMatcher);return String(g)}function Tu(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(Tu).join(",")+"]";if("symbol"===typeof g)return Yh.printSymbol(g);try{return String(g)}catch(e){throw Error("Cannot print object: "+e.stack);}}function Tr(g,e){e=void 0===e?{}:e;var m=g.value,c=g.isPromise,h=g.promisedValue,n=g.promiseStatus;return g.isError||m instanceof Error?(e=String(m),(h=m.stack||"")&&m.message!==m.stack&&(h=String(h),0===h.indexOf(e)&&(h=h.slice(e.length)),e+="\n"+h),e):c?(g=Yh.string.print(n),e="pending"===n?void 0:Tr({value:h},e),"Promise({status: "+
g+", "+(void 0===m?"":"value: "+e)+"})"):m instanceof Promise?'Promise({status: "unknown"})':e.inspect?Yh.printInspectEvalValue(m,e.inspectDepth||2):String(m)}function Sw(g,e){var m="";return Promise.resolve().then(function(){var c=e.lastIndexOf(".");0<=c?(m=e.slice(c+1),e=e.slice(0,c)):(m=e,e='(typeof window === "undefined" ? global : window)');return g(e)}).then(function(c){return{evalResult:c,startLetters:m,code:e}})}function wm(g,e,m){g=Ei.getObjectForCompletion(g,e).then(function(c){var h=c.evalResult;
c={completions:Ei.descriptorsOfObjAndProtoProperties(h&&h.isEvalResult?h.value:h),startLetters:c.startLetters,code:c.code};h&&h.isPromise&&("fulfilled"===h.promiseStatus?c.promiseResolvedCompletions=Ei.descriptorsOfObjAndProtoProperties(h.promisedValue):"rejected"===h.promiseStatus&&(c.promiseRejectedCompletions=Ei.descriptorsOfObjAndProtoProperties(h.promisedValue)));return c});"function"===typeof m&&g.then(function(c){return m(null,c)}).catch(function(c){return m(c)});return g}function xy(g,e,m){e||
(e={type:"Identifier",name:"__rec"});m=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:m&&m.exclude||[],includeDecls:null,excludeDecls:m&&m.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:e,moduleExportFunc:{name:m&&m.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:m&&m.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(h){return h}},m);e=g;if(m.ignoreUndeclaredExcept){var c=
oc.topLevelDeclsAndRefs(g);m.excludeRefs=oc.arr.withoutAll(c.undeclaredNames,m.ignoreUndeclaredExcept).concat(m.excludeRefs);m.excludeDecls=oc.arr.withoutAll(c.undeclaredNames,m.ignoreUndeclaredExcept).concat(m.excludeDecls)}m.excludeRefs=m.excludeRefs.concat(m.captureObj.name);m.excludeDecls=m.excludeDecls.concat(m.captureObj.name);m.recordDefRanges&&oc.computeDefRanges(e,m);m.excludeRefs=m.excludeRefs.concat(oc.additionalIgnoredRefs(g,m));m.excludeDecls=m.excludeDecls.concat(oc.additionalIgnoredDecls(g,
m));e=oc.fixDefaultAsyncFunctionExportForRegeneratorBug(e,m);m.es6ExportFuncId&&(m.excludeRefs.push(m.es6ExportFuncId),m.excludeRefs.push(m.es6ImportFuncId),e=oc.es6ModuleTransforms(e,m));e=oc.replaceRefs(e,m);e=oc.replaceVarDecls(e,m);e=oc.clearEmptyExports(e,m);e=oc.replaceClassDecls(e,m);e=oc.splitExportDeclarations(e,m);e=oc.insertCapturesForExportDeclarations(e,m);e=oc.insertCapturesForImportDeclarations(e,m);e=oc.insertDeclarationsForExports(e,m);e=oc.putFunctionDeclsInFront(e,m);return e=oc.transformImportMeta(e,
m)}function Uu(g,e,m){m=Object.assign({captureObj:e||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},m);e=oc.Path("body.0.expression").get(g);if("System"!==e.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+oc.stringify(g).slice(0,300)+"...");if("register"!==e.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+oc.stringify(g).slice(0,
300)+"...");e=oc.Path("arguments.1.body.body").get(e);var c=oc.arr.last(e);if("ReturnStatement"!==c.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+oc.stringify(g).slice(0,300)+"...");var h=c.argument.properties.find(function(n){return"setters"===n.key.name});if(!h)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+oc.stringify(g).slice(0,300)+
"...");c=c.argument.properties.find(function(n){return"execute"===n.key.name});if(!c)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+oc.stringify(g).slice(0,300)+"...");h.value.elements.forEach(function(n){n.params[0]=oc.assign(n.params[0],oc.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
oc.arr.include(m.exclude,b.expression.left.name))return b;var d=b.expression.left;b=m.declarationWrapper?oc.declarationWrapperCall(m.declarationWrapper,null,oc.literal(d.name),oc.literal("var"),b.expression,m.captureObj,m):b.expression;return oc.exprStmt(oc.assign(oc.member(m.captureObj,d),b))})});(h=c.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===m.captureObj.name}))||(h=c.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===m.captureObj.name}));h&&(oc.arr.remove(c.value.body.body,h),oc.arr.pushAt(e,h,e.length-1));m.sourceAccessorName&&((h=c.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===m.sourceAccessorName}))||(h=c.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===m.sourceAccessorName})),h&&(oc.arr.remove(c.value.body.body,
h),oc.arr.pushAt(e,h,e.length-1)));return g}function yy(g,e){var m=oc.stringify(e.captureObj),c=0;g.body=g.body.reduce(function(h,n){var b=[n],d="",k=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(f){return[f.local.name,f.exported.name]});d="import { "+a.map(function(f){var l=$jscomp.makeIterator(f);f=l.next().value;l=l.next().value;return f===l?l:f+" as "+l}).join(",")+" } from "+n.source.raw+";\n";k="export { "+a.map(function(f){f=$jscomp.makeIterator(f);f.next();
return f.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(f){return[f.id.name,f.id.name]})):a=n.specifiers.map(function(f){return[f.exported.name,f.local.name]});k&&(b=[],d+=k);b=b.concat(oc.parse(d+a.map(function(f){var l=$jscomp.makeIterator(f);f=l.next().value;l=l.next().value;return m+"."+f+" = "+l+";\n"+(m+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(c++,b=b.concat(oc.parse("\n       import * as __captured"+c+"__ from "+
n.source.raw+";\n       Object.assign("+m+", __captured"+c+"__);\n      ")));return h.concat(b)},[]);return g}function Tm(g){(this||IA).__wrapped__=g;(this||IA).__actions__=[];(this||IA).__dir__=1;(this||IA).__filtered__=!1;(this||IA).__iteratees__=[];(this||IA).__takeCount__=4294967295;(this||IA).__views__=[]}function zy(g,e){(this||eG).__wrapped__=g;(this||eG).__actions__=[];(this||eG).__chain__=!!e;(this||eG).__index__=0;(this||eG).__values__=void 0}function Ay(g){if(bfa(g)&&!cfa(g)&&!(g instanceof
dfa)){if(g instanceof C_)return g;if(efa.call(g,"__wrapped__"))return ffa(g)}return new C_(g)}function jD(g,e,m,c,h,n,b,d,k,a){function f(){for(var F=arguments.length,H=Array(F),J=F;J--;)H[J]=arguments[J];if(y)var O=gfa(f),L=hfa(H,O);c&&(H=ifa(H,c,h,y));n&&(H=jfa(H,n,b,y));F-=L;if(y&&F<a)return J=kfa(H,O),lfa(g,e,jD,f.placeholder,m,H,J,d,k,a-F);J=r?m:this||$J;O=v?J[g]:g;F=H.length;d?H=mfa(H,d):A&&1<F&&H.reverse();l&&k<F&&(H.length=k);(this||$J)&&(this||$J)!==nfa&&(this||$J)instanceof f&&(O=E||D_(O));
return O.apply(J,H)}var l=e&128,r=e&1,v=e&2,y=e&24,A=e&512,E=v?void 0:D_(g);return f}function JA(g){return g&&g.__esModule?g:{default:g}}function kD(g){if(Array.isArray(g)){for(var e=0,m=Array(g.length);e<g.length;e++)m[e]=g[e];return m}return Array.from(g)}function Tw(g){var e=null;"string"===typeof g.version&&/^7\./.test(g.version)&&(e=Object.getPrototypeOf(g),!e||Object.prototype.hasOwnProperty.call(e,"version")&&Object.prototype.hasOwnProperty.call(e,"transform")&&Object.prototype.hasOwnProperty.call(e,
"template")&&Object.prototype.hasOwnProperty.call(e,"types")||(e=null));return Object.assign({},e,g)}function Up(g,e){e=void 0===e?"__lvVarRecorder":e;Wj.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(e+".").join("");g="string"===typeof g?Wj.parseFunction(g):g;g=Wj.ReplaceVisitor.run(g,function(m){return"MemberExpression"===m.type&&"Identifier"===m.object.type&&m.object.name===e?m.property:m});return Wj.stringify(g)}function Rq(g){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),
g;Wj.ensureJSXPlugin();Wj.ensureOptionalCatchBinding();Wj.ensureImportMeta();g=babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function ft(g,e){g=Cg.transform.transformSingleExpression(g);
g=Cg.parse(g,{withComments:!0});e=Cg.processInlineCodeTransformOptions(g,e);var m=Cg.query.topLevelDeclsAndRefs(g),c=m.classDecls,h=m.funcDecls;m=m.varDecls;var n={};e.hasOwnProperty("evalId")&&(n.evalId=e.evalId);e.sourceAccessorName&&(n.sourceAccessorName=e.sourceAccessorName);[].concat($jscomp.arrayFromIterable(c),$jscomp.arrayFromIterable(h)).forEach(function(k){return k["x-lively-object-meta"]=Object.assign({},n,{start:k.start,end:k.end})});m.forEach(function(k){return k.declarations.forEach(function(a){return a["x-lively-object-meta"]=
Object.assign({},n,{start:a.start,end:a.end})})});g=Cg.transform.objectSpreadTransform(g);!e.topLevelVarRecorder&&e.topLevelVarRecorderName&&(c=Cg.getGlobal(),e.topLevelVarRecorder="GLOBAL"===e.topLevelVarRecorderName?Cg.getGlobal():Cg.Path(e.topLevelVarRecorderName).get(c));if(e.topLevelVarRecorder){c=(e.dontTransform||[]).concat(["arguments"]);h=e.recordGlobals?null:Cg.arr.withoutAll(Object.keys(e.topLevelVarRecorder),c);m=Cg.id(e.varRecorderName||"__lvVarRecorder");var b=void 0;if(e.declarationWrapperName||
"function"===typeof e.declarationCallback){var d=e.declarationWrapperName||Cg.defaultDeclarationWrapperName;e.declarationWrapper=Cg.member(Cg.id(e.varRecorderName||"__lvVarRecorder"),Cg.literal(d),!0);e.declarationCallback&&(e.topLevelVarRecorder[d]=e.declarationCallback)}if(e.hasOwnProperty("transformES6Classes")?e.transformES6Classes:1)b={currentModuleAccessor:e.currentModuleAccessor,classHolder:m,functionNode:Cg.member(m,Cg.defaultClassToFunctionConverterName),declarationWrapper:e.declarationWrapper,
evalId:e.evalId,sourceAccessorName:e.sourceAccessorName,transform:e.classTransform};g=Cg.capturing.rewriteToCaptureTopLevelVariables(g,m,{es6ImportFuncId:e.es6ImportFuncId,es6ExportFuncId:e.es6ExportFuncId,ignoreUndeclaredExcept:h,exclude:c,declarationWrapper:e.declarationWrapper||void 0,classToFunction:b,evalId:e.evalId,sourceAccessorName:e.sourceAccessorName,keepTopLevelVarDecls:e.keepTopLevelVarDecls})}e.wrapInStartEndCall&&(g=Cg.transform.wrapInStartEndCall(g,{startFuncNode:e.startFuncNode,endFuncNode:e.endFuncNode}));
g=Cg.stringify(g);e.jsx&&(g=Cg.es5Transpilation(g));e.sourceURL&&(g+="\n//# sourceURL="+e.sourceURL.replace(/\s/g,"_"));return g}function Vu(g,e){e=void 0===e?{}:e;if(!e.topLevelVarRecorder)return g;if("function"===typeof e.declarationCallback||e.declarationWrapperName){var m=e.declarationWrapperName||Cg.defaultDeclarationWrapperName;e.declarationWrapper=Cg.member(Cg.id(e.varRecorderName),Cg.literal(m),!0);e.declarationCallback&&(e.topLevelVarRecorder[m]=e.declarationCallback)}g=Cg.parse(g);m=(e.dontTransform||
[]).concat(["arguments"]);e.recordGlobals||Cg.arr.withoutAll(Object.keys(e.topLevelVarRecorder),m);e=Cg.capturing.rewriteToRegisterModuleToCaptureSetters(g,Cg.id(e.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:m},e));return Cg.stringify(e)}function fo(g,e,m){"function"===typeof e&&2===arguments.length&&(m=e,e=null);var c=new Xg.EvalResult,h=!1,n=!1;e=Xg._normalizeEvalOptions(e);var b=Xg.promise.deferred(),d=e.topLevelVarRecorder||Xg.getGlobal(),k=g;e.wrapInStartEndCall&&(d[Xg.startEvalFunctionName]&&
console.warn(c.addWarning("startEvalFunctionName "+Xg.startEvalFunctionName+" already exists in recorder!")),d[Xg.endEvalFunctionName]&&console.warn(c.addWarning("endEvalFunctionName "+Xg.endEvalFunctionName+" already exists in recorder!")),d[Xg.startEvalFunctionName]=function(){if(h)console.warn(c.addWarning("onEvalStartCalled multiple times!"));else if(h=!0,"function"===typeof e.onStartEval)e.onStartEval()},d[Xg.endEvalFunctionName]=function(l,r){n?console.warn(c.addWarning("onEvalEndCalled multiple times!")):
(n=!0,Xg.finishEval(l,r,c,e,d,b,m))});try{g=Xg.evalCodeTransform(g,e),e.header&&(g=e.header+g),e.footer&&(g+=e.footer),e.transpiler&&(g=e.transpiler(g,e.transpilerOptions))}catch(l){console.warn(c.addWarning("lively.vm evalCodeTransform not working: "+l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var a=Xg._eval.call(e.context,g,e.topLevelVarRecorder,e.originalSource||k)}catch(l){var f=l}if(e.wrapInStartEndCall){if(f&&!n)d[Xg.endEvalFunctionName](f,void 0)}else Xg.finishEval(f,
f||a,c,e,d,b,m);return e.sync?c:b.promise}function KA(g,e){e=Object.assign(e||{},{sync:!0});return Xg.runEval(g,e)}function gt(g,e,m){Ag.getEnv(m).emitter.on(g,e);return e}function Wu(g,e,m){Ag.getEnv(m).emitter.once(g,e);return e}function Kk(g,e,m,c){e=void 0===e?{}:e;m=void 0===m?Date.now():m;e=Object.assign({type:g,time:m},e);m=Ag.getEnv(c);c=m.emitter;m=m.notifications;c.emit(g,e);c.isLogging&&Ag.log(e);c.isRecording&&Ag.record(m,e);return e}function kp(g,e,m){Ag.getEnv(m).emitter.removeListener(g,
e);return e}function Xu(g,e){Ag.getEnv(e).emitter.removeAllListeners(g)}function go(g){Ag.getEnv(g).emitter.isRecording=!0}function Yu(g){Ag.getEnv(g).emitter.isRecording=!1}function lD(g){g=Ag.getEnv(g).notifications;g.splice(0,g.length)}function Um(g){return Ag.getEnv(g).notifications}function Zu(g){Ag.getEnv(g).emitter.isLogging=!0}function Vp(g){Ag.getEnv(g).emitter.isLogging=!1}function $u(g,e,m){m=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,
format:"esm"},m);g.debug&&console.log("[lively.module] runEval: "+e.slice(0,100).replace(/\n/mg," ")+"...");var c=m,h=c.format,n=c.targetModule;n=g.decanonicalize(n||"*scratch*",c.parentModule);m.targetModule=n;h&&((c=g.getConfig().meta[n])||(c={}),c[n]||(c[n]={}),c[n].format||(c[n].format=h,g.config(c)));h=g.get("@lively-env").moduleEnv(n);c=h.recorder;var b=h.recorderName,d=h.dontTransform,k=ni.getEs6Transpiler(g,m,h),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");
m=Object.assign({waitForPromise:!0,sync:!1,evalId:m.evalId||h.nextEvalId(),sourceAccessorName:(m.hasOwnProperty("embedOriginalCode")?m.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:e},m,{header:a,recordGlobals:!0,dontTransform:d,varRecorderName:b,topLevelVarRecorder:c,sourceURL:m.sourceURL||m.targetModule,context:m.context||c,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:k,declarationWrapperName:h.varDefinitionCallbackName,currentModuleAccessor:ni.funcCall(ni.member(ni.funcCall(ni.member(ni.member("__lvVarRecorder",
"System"),"get"),ni.literal("@lively-env")),"moduleEnv"),ni.literal(m.targetModule))});if(!m.sync&&!m.importsEnsured&&ni.hasUnimportedImports(g,e,n))return ni.ensureImportsAreImported(g,e,n).catch(function(f){return null}).then(function(f){return $u(g,f,Object.assign({},m,{importsEnsured:!0}))});if(!h.record()){if(!m.sync&&!m._moduleImported)return g.import(n).catch(function(f){return null}).then(function(){return $u(g,e,Object.assign({},m,{_moduleImported:!0}))});h.ensureRecord()}if(m.es6Transpile&&
m.transpiler instanceof Promise)if(m.sync||m._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),m.transpiler=null;else return m.transpiler.catch(function(f){return console.error(f)}).then(function(f){return $u(g,e,Object.assign({},m,{transpiler:f,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+n+" started");ni.emit("lively.vm/doitrequest",{code:e,waitForPromise:m.waitForPromise,
targetModule:m.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(n);n=ni.vmRunEval(e,m);return m.sync?ni.evalEnd(g,e,m,n):Promise.resolve(n).then(function(f){return ni.evalEnd(g,e,m,f)})}function Wp(g,e){var m=e=Object.assign({format:"esm",System:null,targetModule:null},e),c=m.format,h=m.System;m=m.targetModule;h||"undefined"===typeof System||(h=System);return!h&&m?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):m&&["esm","es6","register"].includes(c)?
el.esmEval.runEval(h,g,e):el.globalEval.runEval(g,e)}function ht(g,e){return el.globalEval.syncEval(g,e)}function it(g){return jf.withSuperclasses(g).slice(1)}function Ur(g){var e=[];do e.push(g),g=g[jf.superclassSymbol];while(g&&g.name);return e.map(function(m){return m.name}).join("->")}function Uw(g){for(var e=[];g;)e.push(g),g=g[jf.superclassSymbol];return e}function By(g,e){do if(g===e)return!0;while(g=g[jf.superclassSymbol]);return!1}function av(g,e){if(g.constructor===e&&g.__proto__===e.prototype)return g;
g.constructor=e;g.__proto__=e.prototype;return g}function Cy(g){return g&&"function"===typeof g}function bv(g){var e=jf.RuntimeSourceDescriptor.for(g),m=e.ast;e=e.type;if("ClassDeclaration"!==e)throw Error("Expected class but got "+e);return jf.Path("body.body").get(m).map(function(c){var h=c.static,n=c.kind;c=c.key;var b=c.value;c=c.name||b;b=jf.isOverridden(g,c);var d=h?g:g.prototype;d="get"===n?d.__lookupGetter__(c):"set"===n?d.__lookupSetter__(c):d[c];return{static:h,name:c,value:d,kind:n,owner:g,
overridden:b}})}function Dy(g){return jf.runtimeNonStaticMembers(g).concat(jf.runtimeNonStaticMembers(g))}function Ey(g){var e=jf.obj.getOwnPropertyDescriptors(g);return jf.arr.withoutAll(Object.keys(e),["prototype","name","length","toString"]).map(function(m){var c=e[m],h="function"===typeof c.value?"method":"get"in c?"get":"set"in c?"set":"unknown";return{static:!0,name:m,value:"method"===h?c.value:"get"===h?c.get:"set"===h?c.set:null,kind:h,owner:g}})}function Vw(g){return jf.arr.uniq(jf.arr.flatmap(jf.arr.without(jf.withSuperclasses(g),
Object),function(e){return jf.runtimeStaticClassMembers(e)}))}function mD(g){var e=aj.propertiesAndSettingsInHierarchyOf(g),m=e.properties;e=e.propertySettings;g[aj.propertiesAndSettingsCacheSym]={properties:m,order:aj.obj.sortKeysWithBeforeAndAfterConstraints(m),propertySettings:e,classHierarchy:aj.getClassHierarchy(g)};m&&"object"===typeof m?aj.prepareClassForProperties(g,e,m):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(aj.defaultPropertiesKey+
") does not return a valid property descriptor map"))}function lf(g,e){e!==g.constructor&&(g.constructor=e,Zf.setPrototypeOf(g,e.prototype))}function nD(g,e){e=e?"function"===typeof e?e:e.value?e.value:Object:Object;var m=g&&g[Zf.superclassSymbol];m&&m===e||(Zf.ensureInitializeStub(e),g[Zf.superclassSymbol]=e,Zf.setPrototypeOf(g.prototype,e.prototype),e!==Object&&Zf.setPrototypeOf(g,e));return e}function Zb(g,e,m,c,h,n,b){m=void 0===m?[]:m;c=void 0===c?[]:c;h=void 0===h?{}:h;var d=g.name,k=d&&h.hasOwnProperty(d)&&
h[d];h=k&&k[Zf.superclassSymbol];k&&"function"===typeof k&&h||(k=g);Zf.setSuperclass(k,e);Zf.installMethods(k,m,c);k[Zf.objMetaSymbol]=b;n&&(g=n.package(),b=k[Zf.moduleMetaSymbol],h=Date.now(),k[Zf.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?n.pathInPackage():n.id,lastChange:b&&b.lastChange&&h<=b.lastChange?b.lastChange+1:h,lastSuperclassChange:0},e&&e.referencedAs&&(k.hasOwnProperty(Zf.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(k[Zf.moduleSubscribeToToplevelChangesSym]),
k[Zf.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,f){if(a===e.referencedAs){a=f&&f[Zf.moduleMetaSymbol];var l=k[Zf.moduleMetaSymbol];if(a){if(a.lastChange===l.lastSuperclassChange)return;l.lastSuperclassChange=a.lastChange}Zf.setSuperclass(k,f);Zf.installMethods(k,m,c);Zf.prepareClassForManagedPropertiesAfterCreation(k)}})));k.toString=function(){var a=String(this.prototype[Zf.initializeSymbol]).match(Zf.constructorArgMatcher),f=this[Zf.superclassSymbol];
return"class "+this.name+" "+(f?"extends "+f.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};Zf.prepareClassForManagedPropertiesAfterCreation(k);return k}function oD(g){g=new Gd.Color(g);return{red:g.red()/255,green:g.green()/255,blue:g.blue()/255,alpha:g.alpha()}}function Fy(g){return function(e,m,c,h){null==c&&(c=g);null==h&&(h=c);null==m&&(m=Ki.unit(e));var n=Ki.unit(e);if(n===m)return e;var b=Ki.unitLess(e);"px"!==Ki.unit(c)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");
"px"!==Ki.unit(h)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)b=Ki.unitLess(e)*Ki.unitLess(c);else if("rem"===n)b=Ki.unitLess(e)*Ki.unitLess(g);else if("ex"===n)b=Ki.unitLess(e)*Ki.unitLess(c)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),e;c=b;if("px"!==m)if("em"===m)c=
b/Ki.unitLess(h);else if("rem"===m)c=b/Ki.unitLess(g);else if("ex"===m)c=b/Ki.unitLess(h)/2;else return"ch"===m||"vw"===m||"vh"===m||"vmin"===m?console.warn(m+" units can't be reliably converted; Returning original value."):console.warn(m+" is an unknown or unsupported length unit; Returning original value."),e;return parseFloat(c.toFixed(5))+m}}function Gy(g){return Number(Ki.parseCssLength(g,"px").slice(0,-2))}function Dl(g,e,m,c){if("number"===typeof g){var h=g;g=e;e=c}else h=g.x,g=g.y,m=e.x-h,
e=e.y-g;return new Vd.Rectangle(h,g,m,e)}function di(g,e){return new Vd.Point(g,e)}function Li(g,e,m,c,h){"function"!==typeof m||"undefined"!==typeof c&&"object"!==typeof c||(h=c,c="call",h||(h={}),h.updater||(h.updater=function(k,a){return k(null,a)}));var n=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,b=(n=n&&n[e])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||ch.AttributeConnection;"function"===
typeof h&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),h={converter:h});n&&(h=ch.obj.merge(n,h));b=new b(g,e,m,c,h);var d=b.getExistingConnection();if(d)return d.resetSpec(),d.init(g,e,m,c,h),d;h=b.connect();if("function"===typeof g.onConnect)g.onConnect(e,m,c);n&&n.updateOnConnect&&b.update(g[e]);return h}function Ek(g,e,m,c){"function"!==typeof m||"undefined"!==typeof c&&"object"!==typeof c||(c="call");if(g.attributeConnections){for(var h=
$jscomp.makeIterator(g.attributeConnections.slice()),n=h.next();!n.done;n=h.next())n=n.value,n.getSourceAttrName()==e&&n.getTargetObj()===m&&n.getTargetMethodName()==c&&n.disconnect();if("function"==typeof g.onDisconnect)g.onDisconnect(e,m,c)}}function fl(g){for(var e;g.attributeConnections&&(e=g.attributeConnections[0]);)e.disconnect()}function cv(g,e,m,c,h){"function"!==typeof m||"undefined"!==typeof c&&"object"!==typeof c?h=h||{}:(h=c,c="call",h=h||{},h.updater||(h.updater=function(n,b){return n(null,
b)}));h=h||{};h.removeAfterUpdate=!0;return ch.connect(g,e,m,c,h)}function em(g,e,m){var c=g.attributeConnections;if(c){g=g[e];for(var h=0,n=c.length;h<n;h++){var b=c[h];b.getSourceAttrName()==e&&b.update(m,g)}}}function sg(g,e,m,c){if(null!=g[e])m[c](g[e]);else ch.connect(g,e,m,c,{removeAfterUpdate:!0})}function Hy(g,e,m,c){for(var h={key:e.pop(),whenDefined:function(n){ch.callWhenNotNull(n,this.key,m,c)}};0<e.length;)h={key:e.pop(),next:h,whenDefined:function(n){ch.callWhenNotNull(n,this.key,this.next,
"whenDefined")}};h.whenDefined(g)}function lp(g,e){var m=!1;e||"function"!==typeof g||(e=g,m=!0);if(m){g=ch.AttributeConnection.prototype;g.isActive||(g.isActive=0);g.isActive++;try{var c=e()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{m=g.sourceObj;var h=g.sourceAttribute,n=g.targetObj,b=g.targetAttribute;g=n&&b?function(d){return d.getSourceAttrName()===h&&n===d.getTargetObj()&&b===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===h};(g=m.attributeConnections&&
m.attributeConnections.filter(g))&&ch.arr.invoke(g,"activate");try{c=e()}finally{g&&ch.arr.invoke(g,"deactivate")}}return c}function Iy(g){if(null==g)return!0;g=typeof g;return"boolean"===g||"number"===g||"string"===g?!0:!1}function fm(g){return g.constructor[wj.classNameProp]||g.constructor.name}function Vm(g){if(g&&g.constructor){var e=wj.getClassName(g);if(e){if(g=g.constructor[wj.moduleMetaInClassProp],"Object"!==e||g)return g&&(delete g.lastChange,delete g.lastSuperclassChange),{className:e,
module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function Pl(g){var e=g.module;if(e){var m=e.pathInPackage;if(e.package&&e.package.name&&"no group"!==e.package.name){var c=System.decanonicalize(e.package.name.replace(/\/*$/,"/"));m=wj.string.joinPath(c,m)}c=System.get("@lively-env");if(e=c.moduleEnv(m)||c.moduleEnv(e.pathInPackage))return e.recorder[g.className];console.warn("Trying to deserialize instance of class "+g.className+" but the module "+m+" is not yet loaded")}return System.global[g.className]}
function Sq(g,e,m){e=void 0===e?function(a){return a}:e;m=void 0===m?{}:m;var c=new Mi.ExpressionSerializer,h=m,n=m.isMorph?m.propertiesAndPropertySettings().order:[];n=n.length?n:Mi.obj.keys(g);for(var b=$jscomp.makeIterator(n),d=b.next();!d.done;d=b.next()){d=d.value;var k=g[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;Mi.obj.isString(k)&&c.isSerializedExpression(k)&&(k=c.deserializeExpr(k));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(k=
Sq(k,e));k&&k._id&&(k=e(Sq(k,e)));h[d]=k}g.submorphs&&(h.submorphs=g.submorphs.map(function(a){return Sq(a,e)}));if(m)for(c=$jscomp.makeIterator(n.filter(function(a){return!!g[a]})),d=c.next();!d.done;d=c.next())n=d.value,m[n]=h[n];if(g.__refs__)for(m=$jscomp.makeIterator(g.__refs__),c=m.next();!c.done;c=m.next())n=$jscomp.makeIterator(c.value),c=n.next().value,n=n.next().value,Mi.Path(c).set(h,Mi.Path(n).get(h));if(g.__connections__)for(m=$jscomp.makeIterator(g.__connections__),c=m.next();!c.done;c=
m.next())c=c.value,Mi.connect(Mi.Path(c.pathToSource).get(h),c.sourceAttrName,Mi.Path(c.pathToTarget).get(h),c.targetMethodName,Object.assign({},Mi.obj.select(c,["garbageCollect","converterString","updaterString","varMapping"])));return h}function mp(g,e){var m=e=void 0===e?{}:e,c=void 0===m.keepFunctions?!0:m.keepFunctions,h=void 0===m.skipAttributes?[]:m.skipAttributes,n=void 0===m.keepConnections?!0:m.keepConnections,b=void 0===m.asExpression?!1:m.asExpression;e=void 0===m.root?!0:m.root;var d=
void 0===m.path?"":m.path,k=void 0===m.skipUnchangedFromDefault?!1:m.skipUnchangedFromDefault,a=void 0===m.nestedExpressions?{}:m.nestedExpressions,f=void 0===m.objToPath?new WeakMap:m.objToPath,l=void 0===m.objRefs?[]:m.objRefs;m=void 0===m.connections?[]:m.connections;var r={skipAttributes:h,skipUnchangedFromDefault:k,root:!1,keepFunctions:c,asExpression:b,nestedExpressions:a,connections:m,objRefs:l,objToPath:f,keepConnections:n};if(f.has(g))return l.push([d,f.get(g)]),null;f.set(g,d);b&&(c=!1);
var v=new Mi.ExpressionSerializer,y=function(Fa,K){try{if(K=K.__serialize__(),b){var Z=Mi.string.newUUID();a[Z]=K;K=Z}else K=K.__expr__?v.exprStringEncode(K):K}catch(R){console.log("[export to JSON] failed converting "+Fa+" to serialized expression")}return K},A={};f.set(g,d);n&&g.attributeConnections&&m.push.apply(m,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(A.textAndAttributes=g.textAndAttributes.map(function(Fa,K){return Fa&&Fa.isMorph?mp(Fa,Object.assign({},r,{path:d?d+".textAndAttributes."+
K:"textAndAttributes."+K})):Fa}));g.submorphs&&0<g.submorphs.length&&(A.submorphs=g.submorphs.map(function(Fa,K){return mp(Fa,Object.assign({},r,{path:d?d+".submorphs."+K:"submorphs."+K}))}).filter(Boolean));var E={};for(S in g.spec(k)){E.$jscomp$loop$prop$name$2528=S;k=g[E.$jscomp$loop$prop$name$2528];!k||"object"!==typeof k||Array.isArray(k)||k.isMorph||f.set(k,d?d+"."+E.$jscomp$loop$prop$name$2528:E.$jscomp$loop$prop$name$2528);if("submorphs"!==E.$jscomp$loop$prop$name$2528&&!h.includes(E.$jscomp$loop$prop$name$2528))if("metadata"===
E.$jscomp$loop$prop$name$2528&&Mi.Path("commit.__serialize__").get(k))A[E.$jscomp$loop$prop$name$2528]=Object.assign({},k,{commit:y(E.$jscomp$loop$prop$name$2528+".commit",k.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(E.$jscomp$loop$prop$name$2528)){for(var F={},H=$jscomp.makeIterator(["top","left","right","bottom"]),J=H.next();!J.done;J=H.next()){J=J.value;var O=k[J];if(O&&O.__serialize__&&(O=O.__serialize__())&&O.__expr__)if(b){var L=Mi.string.newUUID();
a[L]=O;O=L}else O=v.exprStringEncode(O);F[J]=O}A[E.$jscomp$loop$prop$name$2528]=F}else if(k&&k.isMorph)A[E.$jscomp$loop$prop$name$2528]=mp(k,Object.assign({},r,{path:d?d+"."+E.$jscomp$loop$prop$name$2528:E.$jscomp$loop$prop$name$2528}));else if(k&&k.__serialize__)A[E.$jscomp$loop$prop$name$2528]=y(E.$jscomp$loop$prop$name$2528,k);else if(Array.isArray(k))A[E.$jscomp$loop$prop$name$2528]=k.map(function(Fa){return function(K,Z){return K&&K.isMorph?mp(K,Object.assign({},r,{path:d?d+"."+Fa.$jscomp$loop$prop$name$2528+
"."+Z:Fa.$jscomp$loop$prop$name$2528+"."+Z})):K&&K.__serialize__?y(Fa.$jscomp$loop$prop$name$2528+"."+Z,K):K}}(E));else{if(k&&!Mi.obj.isString(k)&&!Mi.obj.isNumber(k)&&0<Mi.properties.allOwnPropertiesOrFunctions(k).length)for(var Y in k)k[Y]&&k[Y].isMorph&&(k[Y]=mp(k[Y],Object.assign({},r,{path:d?d+"."+E.$jscomp$loop$prop$name$2528+"."+Y:E.$jscomp$loop$prop$name$2528+"."+Y})));A[E.$jscomp$loop$prop$name$2528]=k}E={$jscomp$loop$prop$name$2528:E.$jscomp$loop$prop$name$2528}}g.isText&&delete A.textString;
b||(A._id=g._id);c?(A.type=g.constructor,Object.keys(g).forEach(function(Fa){return"function"===typeof g[Fa]&&(A[Fa]=g[Fa])})):(A.styleSheets&&(A.styleSheets=[]),A.type=Mi.getSerializableClassMeta(g));if(n&&e){var S=[];Y=$jscomp.makeIterator(m);for(c=Y.next();!c.done;c=Y.next())H=c=c.value,h=H.sourceAttrName,n=H.targetMethodName,F=H.targetObj,m=H.updaterString,E=H.converterString,k=H.garbageCollect,H=f.get(H.sourceObj),F=f.get(F),"string"===typeof H&&"string"===typeof F?S.push({pathToSource:H,pathToTarget:F,
garbageCollect:k,updaterString:m,converterString:E,sourceAttrName:h,targetMethodName:n,varMapping:{properties:Mi.properties}}):console.log("skipping:",c);b||(A.__connections__=S)}if(b&&e){e="morph("+Mi.obj.inspect(A)+")";var ea={"lively.morphic":["morph"]},qa;for(qa in a)e=e.replace('"'+qa+'"',a[qa].__expr__),Object.entries(a[qa].bindings||{}).forEach(function(Fa){var K=$jscomp.makeIterator(Fa);Fa=K.next().value;K=K.next().value;ea[Fa]=ea[Fa]?Mi.arr.uniq([].concat($jscomp.arrayFromIterable(ea[Fa]),
$jscomp.arrayFromIterable(K))):K});return{__expr__:e,bindings:ea}}e&&(A.__refs__=l);return A}function pD(g){var e={},m;for(m in g)e[m]=Gf.referencesOfId(g,m);return e}function qD(g){return g&&g.__ref__}function fG(g,e){var m={};return Gf.referencesOfId((m[g.id]=g.currentSnapshot,m),g.id,e)}function rD(g,e,m){g=g[e];e=[];for(var c in g.props){var h=g.props[c]||{},n=h.value;h=h.verbatim;Array.isArray(n)?e.push.apply(e,$jscomp.arrayFromIterable(Gf.referencesInArray(n,m&&c))):!h&&n&&Gf.isReference(n)&&
e.push(m?{key:c,id:n.id}:n.id)}if(g.hasOwnProperty("entries"))for(c=0;c<g.entries.length;c++)n=g.entries[c],Array.isArray(n)?e.push.apply(e,$jscomp.arrayFromIterable(Gf.referencesInArray(n,m&&n))):n&&Gf.isReference(n)&&e.push(m?{key:n,id:n.id}:n.id);return e}function aK(g,e){for(var m=[],c=0;c<g.length;c++){var h=g[c];Array.isArray(h)?m.push.apply(m,$jscomp.arrayFromIterable(aK(h,e?e+"["+c+"]":void 0))):h&&Gf.isReference(h)&&m.push(e?{key:e+"["+c+"]",id:h.id}:h.id)}return m}function sD(g,e){return(g[e][Gf.ClassHelper.classMetaForSerializationProp]||
{}).module||{}}function tD(g,e){return Gf.referencesOfId(g,e).map(function(m){return m+":"+Gf.classNameOfId(g,m)})}function uD(g,e){return(g[e][Gf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function Nh(g,e,m,c){function h(y,A,E){if(!f)if(50<E)alert(""+k);else if(y===A)k.push(y),f=k.slice();else if(!a[y]){a[y]=!0;k.push(y);y=Gf.referencesOfId(g,y);for(var F=0;F<y.length;F++)h(y[F],A,E+1);k.pop()}}c=void 0===c?{}:c;var n=void 0===c.showPath?!0:c.showPath,b=c.hasOwnProperty("showClassNames")?
c.showClassNames:!n,d=c.hasOwnProperty("showPropNames")?c.showPropNames:n;c=c.hasOwnProperty("hideId")?c.hideId:n;var k=[],a={},f;h(e,m,0);if(!f)return null;if(!b&&!d)return f;e=[];for(m=0;m<f.length-1;m++){var l=f[m],r=f[m+1],v=[];c||v.push(l);b&&v.push((g[l][Gf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(l=Gf.referencesOfId(g,l,!0).find(function(y){return y.id===r})||{key:"????"},v.push(l.key));e.push(v.join(":"))}n&&(e="."+e.join("."));return e}function vD(g,e,m){m=
m.replace(/^\./,"");m=m.replace(/\[([^\]])+\]/g,".$1");m=Gf.Path(m).parts();var c=g[e];for(e=0;;){if(1E3<e++)throw"stop";var h=m.shift();if(!h)break;if(!c.props||!c.props[h])throw Error("Property "+h+" not found for ref "+JSON.stringify(c));c=c.props[h].value;if(!c)throw Error("Property "+h+" has no value");for(;Array.isArray(c);)c=c[m.shift()];if(!c||!c.__ref__)return c;c=g[c.id]}return c}function wD(g,e,m,c){m=m.replace(/^\./,"");m=m.replace(/\[([^\]])+\]/g,".$1");m=Gf.Path(m).parts();g=g[e];e=
m.shift();if(!g.props||!g.props[e])throw Error("Property "+e+" not found for ref "+JSON.stringify(g));var h=(g.props[e]||{}).value;if(!h)throw Error("Property "+e+" has no value");if(m.length){var n=Gf.Path(m).get(h);Gf.Path(m).set(h,c(g,e,n))}else g.props[e].value=c(g,e,h)}function ho(g,e){var m=Gf.arr.withoutAll(Object.keys(e),g),c=m.filter(function(n){if("AttributeConnection"===Gf.classNameOfId(e,n))return e[n].props.garbageCollect.value}),h=Gf.referenceGraph(Gf.obj.dissoc(Object.assign({},e),
c));g.forEach(function(n){n=Gf.graph.subgraphReachableBy(h,n);for(var b=m.length;b--;)m[b]in n&&m.splice(b,1)});m.forEach(function(n){return delete e[n]});return m}function LA(g){var e={},m;for(m in g){e.$jscomp$loop$prop$id$819$2530=m;if("AttributeConnection"===Gf.classNameOfId(g,e.$jscomp$loop$prop$id$819$2530)){var c=g[e.$jscomp$loop$prop$id$819$2530];if(!g[Gf.Path("props.targetObj.value.id").get(c)]){if(c=g[Gf.Path("props.sourceObj.value.id").get(c)])c.props.attributeConnections.value=c.props.attributeConnections.value.filter(function(h){return function(n){return n.id!=
h.$jscomp$loop$prop$id$819$2530}}(e));delete g[e.$jscomp$loop$prop$id$819$2530]}}e={$jscomp$loop$prop$id$819$2530:e.$jscomp$loop$prop$id$819$2530}}}function np(g,e){e=void 0===e?Gf.defaultExprSerializer:e;g.snapshot&&(g=g.snapshot);for(var m=[],c=0,h=Object.keys(g);c<h.length;c++){var n=g[h[c]];if(n.__expr__)(n=e.requiredModulesOf__expr__(n.__expr__))&&m.push.apply(m,$jscomp.arrayFromIterable(n));else{var b=Gf.ClassHelper.sourceModulesInObjRef(n);b&&b.length&&m.push.apply(m,$jscomp.arrayFromIterable(b.map(function(a){return(a.package&&
a.package.name||"")+"/"+a.pathInPackage})));if(n.props)for(var d in n.props){b=n.props[d].value;if("string"===typeof b){var k=e.requiredModulesOf__expr__(b);k&&m.push.apply(m,$jscomp.arrayFromIterable(k))}Gf.obj.isArray(b)&&b.forEach(function(a){"string"===typeof a&&(a=e.requiredModulesOf__expr__(a))&&m.push.apply(m,$jscomp.arrayFromIterable(a))})}}}return m=Gf.arr.uniq(m)}function Tq(){throw Error("setTimeout has not been defined");}function MA(){throw Error("clearTimeout has not been defined");
}function bK(g){if(Jy===setTimeout)return setTimeout(g,0);if((Jy===Tq||!Jy)&&setTimeout)return Jy=setTimeout,setTimeout(g,0);try{return Jy(g,0)}catch(e){try{return Jy.call(null,g,0)}catch(m){return Jy.call(this||xD,g,0)}}}function ER(){yD&&NA&&(yD=!1,NA.length?Ww=NA.concat(Ww):cK=-1,Ww.length&&zD())}function zD(){if(!yD){var g=bK(ER);yD=!0;for(var e=Ww.length;e;){NA=Ww;for(Ww=[];++cK<e;)NA&&NA[cK].run();cK=-1;e=Ww.length}NA=null;yD=!1;(function(m){if(Ky===clearTimeout)return clearTimeout(m);if((Ky===
MA||!Ky)&&clearTimeout)return Ky=clearTimeout,clearTimeout(m);try{Ky(m)}catch(c){try{return Ky.call(null,m)}catch(h){return Ky.call(this||xD,m)}}})(g)}}function gG(g,e){(this||xD).fun=g;(this||xD).array=e}function jt(){}function AD(){if(E_)return F_;E_=!0;return F_={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function OA(){if(G_)return H_;G_=!0;var g=bj;return H_="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?
function(e){for(var m=[],c=0;c<arguments.length;++c)m[c-0]=arguments[c];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(m)))}:function(){}}function Ly(){if(I_)return dv;I_=!0;var g=AD().MAX_SAFE_COMPONENT_LENGTH,e=OA();dv=dv={};var m=dv.re=[],c=dv.src=[],h=dv.t={},n=0,b=function(d,k,a){var f=n++;e(f,k);h[d]=f;c[f]=k;m[f]=new RegExp(k,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");
b("MAINVERSION","("+c[h.NUMERICIDENTIFIER]+")\\.("+(c[h.NUMERICIDENTIFIER]+")\\.(")+(c[h.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+c[h.NUMERICIDENTIFIERLOOSE]+")\\.("+(c[h.NUMERICIDENTIFIERLOOSE]+")\\.(")+(c[h.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+c[h.NUMERICIDENTIFIER]+"|"+c[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+c[h.NUMERICIDENTIFIERLOOSE]+"|"+c[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+c[h.PRERELEASEIDENTIFIER]+"(?:\\."+c[h.PRERELEASEIDENTIFIER]+
")*))");b("PRERELEASELOOSE","(?:-?("+c[h.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+c[h.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+c[h.BUILDIDENTIFIER]+"(?:\\."+c[h.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+c[h.MAINVERSION]+c[h.PRERELEASE]+"?"+c[h.BUILD]+"?");b("FULL","^"+c[h.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+c[h.MAINVERSIONLOOSE]+c[h.PRERELEASELOOSE]+"?"+c[h.BUILD]+"?");b("LOOSE","^"+c[h.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",
c[h.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",c[h.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+c[h.XRANGEIDENTIFIER]+")(?:\\.("+(c[h.XRANGEIDENTIFIER]+")(?:\\.(")+(c[h.XRANGEIDENTIFIER]+")(?:")+(c[h.PRERELEASE]+")?"+c[h.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+c[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(c[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(c[h.XRANGEIDENTIFIERLOOSE]+")(?:")+(c[h.PRERELEASELOOSE]+")?"+c[h.BUILD]+"?)?)?"));b("XRANGE","^"+c[h.GTLT]+"\\s*"+c[h.XRANGEPLAIN]+
"$");b("XRANGELOOSE","^"+c[h.GTLT]+"\\s*"+c[h.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));b("COERCERTL",c[h.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+c[h.LONETILDE]+"\\s+",!0);dv.tildeTrimReplace="$1~";b("TILDE","^"+c[h.LONETILDE]+c[h.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+c[h.LONETILDE]+c[h.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+c[h.LONECARET]+"\\s+",!0);dv.caretTrimReplace=
"$1^";b("CARET","^"+c[h.LONECARET]+c[h.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+c[h.LONECARET]+c[h.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+c[h.GTLT]+"\\s*("+c[h.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+c[h.GTLT]+"\\s*("+c[h.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+c[h.GTLT]+"\\s*("+c[h.LOOSEPLAIN]+"|"+c[h.XRANGEPLAIN]+")",!0);dv.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+c[h.XRANGEPLAIN]+")\\s+-\\s+("+(c[h.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+c[h.XRANGEPLAINLOOSE]+
")\\s+-\\s+("+(c[h.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return dv}function Si(){if(J_)return K_;J_=!0;var g=["includePrerelease","loose","rtl"];return K_=function(e){return e?"object"!==typeof e?{loose:!0}:g.filter(function(m){return e[m]}).reduce(function(m,c){m[c]=!0;return m},{}):{}}}function Do(){if(L_)return M_;L_=!0;var g=/^[0-9]+$/,e=function(m,c){var h=g.test(m),n=g.test(c);h&&n&&(m=+m,c=+c);return m===
c?0:h&&!n?-1:n&&!h?1:m<c?-1:1};return M_={compareIdentifiers:e,rcompareIdentifiers:function(m,c){return e(c,m)}}}function pk(){if(N_)return O_;N_=!0;var g=OA(),e=AD(),m=e.MAX_LENGTH,c=e.MAX_SAFE_INTEGER;e=Ly();var h=e.re,n=e.t,b=Si(),d=Do().compareIdentifiers,k=function(a,f){f=b(f);if(a instanceof k){if(a.loose===!!f.loose&&a.includePrerelease===!!f.includePrerelease)return a;a=a.version}else if("string"!==typeof a)throw new TypeError("Invalid Version: "+a);if(a.length>m)throw new TypeError("version is longer than "+
m+" characters");g("SemVer",a,f);this.options=f;this.loose=!!f.loose;this.includePrerelease=!!f.includePrerelease;f=a.trim().match(f.loose?h[n.LOOSE]:h[n.FULL]);if(!f)throw new TypeError("Invalid Version: "+a);this.raw=a;this.major=+f[1];this.minor=+f[2];this.patch=+f[3];if(this.major>c||0>this.major)throw new TypeError("Invalid major version");if(this.minor>c||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>c||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=
f[4]?f[4].split(".").map(function(l){if(/^[0-9]+$/.test(l)){var r=+l;if(0<=r&&r<c)return r}return l}):[];this.build=f[5]?f[5].split("."):[];this.format()};k.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};k.prototype.toString=function(){return this.version};k.prototype.compare=function(a){g("SemVer.compare",this.version,this.options,a);if(!(a instanceof k)){if("string"===typeof a&&
a===this.version)return 0;a=new k(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)};k.prototype.compareMain=function(a){a instanceof k||(a=new k(a,this.options));return d(this.major,a.major)||d(this.minor,a.minor)||d(this.patch,a.patch)};k.prototype.comparePre=function(a){a instanceof k||(a=new k(a,this.options));if(this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;
var f=0;do{var l=this.prerelease[f],r=a.prerelease[f];g("prerelease compare",f,l,r);if(void 0===l&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===l)return-1;if(l!==r)return d(l,r)}while(++f)};k.prototype.compareBuild=function(a){a instanceof k||(a=new k(a,this.options));var f=0;do{var l=this.build[f],r=a.build[f];g("prerelease compare",f,l,r);if(void 0===l&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===l)return-1;if(l!==r)return d(l,r)}while(++f)};k.prototype.inc=function(a,f){switch(a){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",f);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",f);break;case "prepatch":this.prerelease.length=0;this.inc("patch",f);this.inc("pre",f);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",f);this.inc("pre",f);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(a=this.prerelease.length;0<=--a;)"number"===typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);-1===a&&this.prerelease.push(0)}f&&(this.prerelease[0]===f?isNaN(this.prerelease[1])&&(this.prerelease=[f,0]):this.prerelease=[f,0]);break;default:throw Error("invalid increment argument: "+
a);}this.format();this.raw=this.version;return this};return O_=k}function kt(){if(P_)return Q_;P_=!0;var g=AD().MAX_LENGTH,e=Ly(),m=e.re,c=e.t,h=pk(),n=Si();return Q_=function(b,d){d=n(d);if(b instanceof h)return b;if("string"!==typeof b||b.length>g||!(d.loose?m[c.LOOSE]:m[c.FULL]).test(b))return null;try{return new h(b,d)}catch(k){return null}}}function Wb(){if(R_)return S_;R_=!0;var g=kt();return S_=function(e,m){return(e=g(e,m))?e.version:null}}function op(){if(T_)return U_;T_=!0;var g=pk();return U_=
function(e,m,c,h){"string"===typeof c&&(h=c,c=void 0);try{return(new g(e,c)).inc(m,h).version}catch(n){return null}}}function un(){if(V_)return W_;V_=!0;var g=pk();return W_=function(e,m,c){return(new g(e,c)).compare(new g(m,c))}}function PA(){if(X_)return Y_;X_=!0;var g=un();return Y_=function(e,m,c){return 0===g(e,m,c)}}function Xp(){if(Z_)return $_;Z_=!0;var g=kt(),e=PA();return $_=function(m,c){if(e(m,c))return null;m=g(m);c=g(c);var h=m.prerelease.length||c.prerelease.length,n=h?"pre":"",b;for(b in m)if(("major"===
b||"minor"===b||"patch"===b)&&m[b]!==c[b])return n+b;return h?"prerelease":""}}function dK(){if(a0)return b0;a0=!0;var g=pk();return b0=function(e,m){return(new g(e,m)).major}}function BD(){if(c0)return d0;c0=!0;var g=kt();return d0=function(e,m){return(e=g(e,m))&&e.prerelease.length?e.prerelease:null}}function FR(){if(e0)return f0;e0=!0;var g=un();return f0=function(e,m,c){return g(m,e,c)}}function CD(){if(g0)return h0;g0=!0;var g=pk();return h0=function(e,m,c){e=new g(e,c);m=new g(m,c);return e.compare(m)||
e.compareBuild(m)}}function My(){if(i0)return j0;i0=!0;var g=CD();return j0=function(e,m){return e.sort(function(c,h){return g(h,c,m)})}}function ev(){if(k0)return l0;k0=!0;var g=un();return l0=function(e,m,c){return 0<g(e,m,c)}}function Ny(){if(m0)return n0;m0=!0;var g=un();return n0=function(e,m,c){return 0>g(e,m,c)}}function DD(){if(o0)return p0;o0=!0;var g=un();return p0=function(e,m,c){return 0<=g(e,m,c)}}function Lk(){if(q0)return r0;q0=!0;var g=un();return r0=function(e,m,c){return 0!==g(e,
m,c)}}function Vr(){if(s0)return t0;s0=!0;var g=un();return t0=function(e,m,c){return 0>=g(e,m,c)}}function vn(){if(u0)return v0;u0=!0;var g=PA(),e=Lk(),m=ev(),c=DD(),h=Ny(),n=Vr();return v0=function(b,d,k,a){switch(d){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof k&&(k=k.version),b===k;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof k&&(k=k.version),b!==k;case "":case "=":case "==":return g(b,k,a);case "!=":return e(b,k,a);case ">":return m(b,k,a);case ">=":return c(b,
k,a);case "<":return h(b,k,a);case "<=":return n(b,k,a);default:throw new TypeError("Invalid operator: "+d);}}}function GR(){if(w0)return x0;w0=!0;var g=pk(),e=kt(),m=Ly(),c=m.re,h=m.t;return x0=function(n,b){if(n instanceof g)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var d=null;if(b.rtl){for(var k;(k=c[h.COERCERTL].exec(n))&&(!d||d.index+d[0].length!==n.length);)d&&k.index+k[0].length===d.index+d[0].length||(d=k),c[h.COERCERTL].lastIndex=k.index+k[1].length+
k[2].length;c[h.COERCERTL].lastIndex=-1}else d=n.match(c[h.COERCE]);return null===d?null:e(d[2]+"."+(d[3]||"0")+"."+(d[4]||"0"),b)}}function Pf(g){var e=this;e instanceof Pf||(e=new Pf);e.tail=null;e.head=null;e.length=0;if(g&&"function"===typeof g.forEach)g.forEach(function(h){e.push(h)});else if(0<arguments.length)for(var m=0,c=arguments.length;m<c;m++)e.push(arguments[m]);return e}function lt(g,e,m,c){if(!(this instanceof lt))return new lt(g,e,m,c);this.list=c;this.value=g;e?(e.next=this,this.prev=
e):this.prev=null;m?(m.prev=this,this.next=m):this.next=null}function Uq(){if(y0)return HR;y0=!0;var g=function(L,Y){var S=this;Y=m(Y);if(L instanceof g)return L.loose===!!Y.loose&&L.includePrerelease===!!Y.includePrerelease?L:new g(L.raw,Y);if(L instanceof c)return this.raw=L.value,this.set=[[L]],this.format(),this;this.options=Y;this.loose=!!Y.loose;this.includePrerelease=!!Y.includePrerelease;this.raw=L;this.set=L.split(/\s*\|\|\s*/).map(function(ea){return S.parseRange(ea.trim())}).filter(function(ea){return ea.length});
if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+L);if(1<this.set.length)if(L=this.set[0],this.set=this.set.filter(function(ea){return"<0.0.0-0"!==ea[0].value}),0===this.set.length)this.set=[L];else if(1<this.set.length)for(L=$jscomp.makeIterator(this.set),Y=L.next();!Y.done;Y=L.next())if(Y=Y.value,1===Y.length&&""===Y[0].value){this.set=[Y];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(L){return L.join(" ").trim()}).join("||").trim()};
g.prototype.toString=function(){return this.range};g.prototype.parseRange=function(L){var Y=this;L=L.trim();var S="parseRange:"+Object.keys(this.options).join(",")+":"+L,ea=e.get(S);if(ea)return ea;ea=this.options.loose;L=L.replace(ea?d[k.HYPHENRANGELOOSE]:d[k.HYPHENRANGE],O(this.options.includePrerelease));h("hyphen replace",L);L=L.replace(d[k.COMPARATORTRIM],a);h("comparator trim",L,d[k.COMPARATORTRIM]);L=L.replace(d[k.TILDETRIM],f);L=L.replace(d[k.CARETTRIM],l);L=L.split(/\s+/).join(" ");var qa=
ea?d[k.COMPARATORLOOSE]:d[k.COMPARATOR];ea=L.split(" ").map(function(K){var Z=K;K=Y.options;h("comp",Z,K);Z=E(Z,K);h("caret",Z);Z=y(Z,K);h("tildes",Z);Z=H(Z,K);h("xrange",Z);h("replaceStars",Z,K);Z=Z.trim().replace(d[k.STAR],"");h("stars",Z);return Z}).join(" ").split(/\s+/).map(function(K){var Z=Y.options;h("replaceGTE0",K,Z);return K.trim().replace(d[Z.includePrerelease?k.GTE0PRE:k.GTE0],"")}).filter(this.options.loose?function(K){return!!K.match(qa)}:function(){return!0}).map(function(K){return new c(K,
Y.options)});L=new Map;ea=$jscomp.makeIterator(ea);for(var Fa=ea.next();!Fa.done;Fa=ea.next()){Fa=Fa.value;if("<0.0.0-0"===Fa.value)return[Fa];L.set(Fa.value,Fa)}1<L.size&&L.has("")&&L.delete("");L=[].concat($jscomp.arrayFromIterable(L.values()));e.set(S,L);return L};g.prototype.intersects=function(L,Y){if(!(L instanceof g))throw new TypeError("a Range is required");return this.set.some(function(S){return r(S,Y)&&L.set.some(function(ea){return r(ea,Y)&&S.every(function(qa){return ea.every(function(Fa){return qa.intersects(Fa,
Y)})})})})};g.prototype.test=function(L){if(!L)return!1;if("string"===typeof L)try{L=new n(L,this.options)}catch(K){return!1}for(var Y=0;Y<this.set.length;Y++){a:{var S=this.set[Y];for(var ea=L,qa=this.options,Fa=0;Fa<S.length;Fa++)if(!S[Fa].test(ea)){S=!1;break a}if(ea.prerelease.length&&!qa.includePrerelease){for(qa=0;qa<S.length;qa++)if(h(S[qa].semver),S[qa].semver!==c.ANY&&0<S[qa].semver.prerelease.length&&(Fa=S[qa].semver,Fa.major===ea.major&&Fa.minor===ea.minor&&Fa.patch===ea.patch)){S=!0;break a}S=
!1}else S=!0}if(S)return!0}return!1};HR=g;var e=new ofa({max:1E3}),m=Si(),c=ED(),h=OA(),n=pk(),b=Ly(),d=b.re,k=b.t,a=b.comparatorTrimReplace,f=b.tildeTrimReplace,l=b.caretTrimReplace,r=function(L,Y){var S=!0;L=L.slice();for(var ea=L.pop();S&&L.length;)S=L.every(function(qa){return ea.intersects(qa,Y)}),ea=L.pop();return S},v=function(L){return!L||"x"===L.toLowerCase()||"*"===L},y=function(L,Y){return L.trim().split(/\s+/).map(function(S){return A(S,Y)}).join(" ")},A=function(L,Y){return L.replace(Y.loose?
d[k.TILDELOOSE]:d[k.TILDE],function(S,ea,qa,Fa,K){h("tilde",L,S,ea,qa,Fa,K);v(ea)?S="":v(qa)?S=">="+ea+".0.0 <"+(+ea+1)+".0.0-0":v(Fa)?S=">="+ea+"."+qa+".0 <"+ea+"."+(+qa+1)+".0-0":K?(h("replaceTilde pr",K),S=">="+ea+"."+qa+"."+Fa+"-"+K+" <"+ea+"."+(+qa+1)+".0-0"):S=">="+ea+"."+qa+"."+Fa+" <"+ea+"."+(+qa+1)+".0-0";h("tilde return",S);return S})},E=function(L,Y){return L.trim().split(/\s+/).map(function(S){return F(S,Y)}).join(" ")},F=function(L,Y){h("caret",L,Y);var S=Y.includePrerelease?"-0":"";
return L.replace(Y.loose?d[k.CARETLOOSE]:d[k.CARET],function(ea,qa,Fa,K,Z){h("caret",L,ea,qa,Fa,K,Z);v(qa)?ea="":v(Fa)?ea=">="+qa+".0.0"+S+" <"+(+qa+1)+".0.0-0":v(K)?ea="0"===qa?">="+qa+"."+Fa+".0"+S+" <"+qa+"."+(+Fa+1)+".0-0":">="+qa+"."+Fa+".0"+S+" <"+(+qa+1)+".0.0-0":Z?(h("replaceCaret pr",Z),ea="0"===qa?"0"===Fa?">="+qa+"."+Fa+"."+K+"-"+Z+" <"+qa+"."+Fa+"."+(+K+1)+"-0":">="+qa+"."+Fa+"."+K+"-"+Z+" <"+qa+"."+(+Fa+1)+".0-0":">="+qa+"."+Fa+"."+K+"-"+Z+" <"+(+qa+1)+".0.0-0"):(h("no pr"),ea="0"===
qa?"0"===Fa?">="+qa+"."+Fa+"."+K+S+" <"+qa+"."+Fa+"."+(+K+1)+"-0":">="+qa+"."+Fa+"."+K+S+" <"+qa+"."+(+Fa+1)+".0-0":">="+qa+"."+Fa+"."+K+" <"+(+qa+1)+".0.0-0");h("caret return",ea);return ea})},H=function(L,Y){h("replaceXRanges",L,Y);return L.split(/\s+/).map(function(S){return J(S,Y)}).join(" ")},J=function(L,Y){L=L.trim();return L.replace(Y.loose?d[k.XRANGELOOSE]:d[k.XRANGE],function(S,ea,qa,Fa,K,Z){h("xRange",L,S,ea,qa,Fa,K,Z);var R=v(qa),U=R||v(Fa);K=U||v(K);"="===ea&&K&&(ea="");Z=Y.includePrerelease?
"-0":"";R?S=">"===ea||"<"===ea?"<0.0.0-0":"*":ea&&K?(U&&(Fa=0),K=0,">"===ea?(ea=">=",U?(qa=+qa+1,Fa=0):Fa=+Fa+1,K=0):"<="===ea&&(ea="<",U?qa=+qa+1:Fa=+Fa+1),"<"===ea&&(Z="-0"),S=ea+qa+"."+Fa+"."+K+Z):U?S=">="+qa+".0.0"+Z+" <"+(+qa+1)+".0.0-0":K&&(S=">="+qa+"."+Fa+".0"+Z+" <"+qa+"."+(+Fa+1)+".0-0");h("xRange return",S);return S})},O=function(L){return function(Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,jb){S=v(ea)?"":v(qa)?">="+ea+".0.0"+(L?"-0":""):v(Fa)?">="+ea+"."+qa+".0"+(L?"-0":""):K?">="+S:">="+S+(L?"-0":
"");R=v(U)?"":v(na)?"<"+(+U+1)+".0.0-0":v(aa)?"<"+U+"."+(+na+1)+".0-0":xa?"<="+U+"."+na+"."+aa+"-"+xa:L?"<"+U+"."+na+"."+(+aa+1)+"-0":"<="+R;return(S+" "+R).trim()}};return HR}function ED(){if(z0)return IR;z0=!0;var g=Symbol("SemVer ANY"),e=function(f,l){l=m(l);if(f instanceof e){if(f.loose===!!l.loose)return f;f=f.value}d("comparator",f,l);this.options=l;this.loose=!!l.loose;this.parse(f);this.value=this.semver===g?"":this.operator+this.semver.version;d("comp",this)};e.prototype.parse=function(f){var l=
f.match(this.options.loose?h[n.COMPARATORLOOSE]:h[n.COMPARATOR]);if(!l)throw new TypeError("Invalid comparator: "+f);this.operator=void 0!==l[1]?l[1]:"";"="===this.operator&&(this.operator="");this.semver=l[2]?new k(l[2],this.options.loose):g};e.prototype.toString=function(){return this.value};e.prototype.test=function(f){d("Comparator.test",f,this.options.loose);if(this.semver===g||f===g)return!0;if("string"===typeof f)try{f=new k(f,this.options)}catch(l){return!1}return b(f,this.operator,this.semver,
this.options)};e.prototype.intersects=function(f,l){if(!(f instanceof e))throw new TypeError("a Comparator is required");l&&"object"===typeof l||(l={loose:!!l,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new a(f.value,l)).test(this.value);if(""===f.operator)return""===f.value?!0:(new a(this.value,l)).test(f.semver);var r=(">="===this.operator||">"===this.operator)&&(">="===f.operator||">"===f.operator),v=("<="===this.operator||"<"===this.operator)&&("<="===f.operator||"<"===
f.operator),y=this.semver.version===f.semver.version,A=(">="===this.operator||"<="===this.operator)&&(">="===f.operator||"<="===f.operator),E=b(this.semver,"<",f.semver,l)&&(">="===this.operator||">"===this.operator)&&("<="===f.operator||"<"===f.operator);f=b(this.semver,">",f.semver,l)&&("<="===this.operator||"<"===this.operator)&&(">="===f.operator||">"===f.operator);return r||v||y&&A||E||f};$jscomp.global.Object.defineProperties(e,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});
IR=e;var m=Si(),c=Ly(),h=c.re,n=c.t,b=vn(),d=OA(),k=pk(),a=Uq();return IR}function fv(){if(A0)return B0;A0=!0;var g=Uq();return B0=function(e,m,c){try{m=new g(m,c)}catch(h){return!1}return m.test(e)}}function hG(){if(C0)return D0;C0=!0;var g=pk(),e=Uq();return D0=function(m,c,h){var n=null,b=null,d=null;try{d=new e(c,h)}catch(k){return null}m.forEach(function(k){!d.test(k)||n&&-1!==b.compare(k)||(n=k,b=new g(n,h))});return n}}function Vq(){if(E0)return F0;E0=!0;var g=Uq();return F0=function(e,m){try{return(new g(e,
m)).range||"*"}catch(c){return null}}}function yi(){if(G0)return H0;G0=!0;var g=kt();return H0=function(e,m){return(e=g(e.trim().replace(/^[=v]+/,""),m))?e.version:null}}function JR(){if(I0)return J0;I0=!0;var g=pk();return J0=function(e,m){return(new g(e,m)).minor}}function FD(){if(K0)return L0;K0=!0;var g=pk();return L0=function(e,m){return(new g(e,m)).patch}}function gv(){if(M0)return N0;M0=!0;var g=un();return N0=function(e,m){return g(e,m,!0)}}function KR(){if(O0)return P0;O0=!0;var g=CD();return P0=
function(e,m){return e.sort(function(c,h){return g(c,h,m)})}}function QA(){if(Q0)return R0;Q0=!0;var g=Uq();return R0=function(e,m){return(new g(e,m)).set.map(function(c){return c.map(function(h){return h.value}).join(" ").trim().split(" ")})}}function RA(){if(S0)return T0;S0=!0;var g=pk(),e=Uq();return T0=function(m,c,h){var n=null,b=null,d=null;try{d=new e(c,h)}catch(k){return null}m.forEach(function(k){!d.test(k)||n&&1!==b.compare(k)||(n=k,b=new g(n,h))});return n}}function Yp(){if(U0)return V0;
U0=!0;var g=pk(),e=Uq(),m=ev();return V0=function(c,h){c=new e(c,h);h=new g("0.0.0");if(c.test(h))return h;h=new g("0.0.0-0");if(c.test(h))return h;h=null;for(var n={},b=0;b<c.set.length;n={$jscomp$loop$prop$setMin$2532:n.$jscomp$loop$prop$setMin$2532},++b){var d=c.set[b];n.$jscomp$loop$prop$setMin$2532=null;d.forEach(function(k){return function(a){var f=new g(a.semver.version);switch(a.operator){case ">":0===f.prerelease.length?f.patch++:f.prerelease.push(0),f.raw=f.format();case "":case ">=":if(!k.$jscomp$loop$prop$setMin$2532||
m(f,k.$jscomp$loop$prop$setMin$2532))k.$jscomp$loop$prop$setMin$2532=f;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+a.operator);}}}(n));!n.$jscomp$loop$prop$setMin$2532||h&&!m(h,n.$jscomp$loop$prop$setMin$2532)||(h=n.$jscomp$loop$prop$setMin$2532)}return h&&c.test(h)?h:null}}function Xk(){if(W0)return X0;W0=!0;var g=pk(),e=ED(),m=e.ANY,c=Uq(),h=fv(),n=ev(),b=Ny(),d=Vr(),k=DD();return X0=function(a,f,l,r){a=new g(a,r);f=new c(f,r);switch(l){case ">":var v=n;l=d;var y=
b;var A=">";var E=">=";break;case "<":v=b;l=k;y=n;A="<";E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(h(a,f,r))return!1;for(var F={},H=0;H<f.set.length;F={$jscomp$loop$prop$high$2534:F.$jscomp$loop$prop$high$2534,$jscomp$loop$prop$low$2535:F.$jscomp$loop$prop$low$2535},++H){var J=f.set[H];F.$jscomp$loop$prop$high$2534=null;F.$jscomp$loop$prop$low$2535=null;J.forEach(function(O){return function(L){L.semver===m&&(L=new e(">=0.0.0"));O.$jscomp$loop$prop$high$2534=
O.$jscomp$loop$prop$high$2534||L;O.$jscomp$loop$prop$low$2535=O.$jscomp$loop$prop$low$2535||L;v(L.semver,O.$jscomp$loop$prop$high$2534.semver,r)?O.$jscomp$loop$prop$high$2534=L:y(L.semver,O.$jscomp$loop$prop$low$2535.semver,r)&&(O.$jscomp$loop$prop$low$2535=L)}}(F));if(F.$jscomp$loop$prop$high$2534.operator===A||F.$jscomp$loop$prop$high$2534.operator===E||(!F.$jscomp$loop$prop$low$2535.operator||F.$jscomp$loop$prop$low$2535.operator===A)&&l(a,F.$jscomp$loop$prop$low$2535.semver)||F.$jscomp$loop$prop$low$2535.operator===
E&&y(a,F.$jscomp$loop$prop$low$2535.semver))return!1}return!0}}function GD(){if(Y0)return Z0;Y0=!0;var g=Xk();return Z0=function(e,m,c){return g(e,m,">",c)}}function LR(){if($0)return a1;$0=!0;var g=Xk();return a1=function(e,m,c){return g(e,m,"<",c)}}function MR(){if(b1)return c1;b1=!0;var g=Uq();return c1=function(e,m,c){e=new g(e,c);m=new g(m,c);return e.intersects(m)}}function eK(){if(d1)return e1;d1=!0;var g=fv(),e=un();return e1=function(m,c,h){var n=[],b=null,d=null;m=m.sort(function(f,l){return e(f,
l,h)});for(var k=$jscomp.makeIterator(m),a=k.next();!a.done;a=k.next())a=a.value,g(a,c,h)?(d=a,b||(b=a)):(d&&n.push([b,d]),b=d=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(d=n.next();!d.done;d=n.next())k=$jscomp.makeIterator(d.value),d=k.next().value,k=k.next().value,d===k?b.push(d):k||d!==m[0]?k?d===m[0]?b.push("<="+k):b.push(d+" - "+k):b.push(">="+d):b.push("*");m=b.join(" || ");return m.length<("string"===typeof c.raw?c.raw:String(c)).length?m:c}}function Og(){if(f1)return g1;f1=
!0;var g=Uq(),e=ED().ANY,m=fv(),c=un(),h=function(d,k,a){if(d===k)return!0;if(1===d.length&&d[0].semver===e)return 1===k.length&&k[0].semver===e;var f=new Set,l,r,v=$jscomp.makeIterator(d);for(d=v.next();!d.done;d=v.next())d=d.value,">"===d.operator||">="===d.operator?l=n(l,d,a):"<"===d.operator||"<="===d.operator?r=b(r,d,a):f.add(d.semver);if(1<f.size)return null;if(l&&r){var y=c(l.semver,r.semver,a);if(0<y||0===y&&(">="!==l.operator||"<="!==r.operator))return null}for(d=$jscomp.makeIterator(f).next();!d.done;){y=
d.value;if(l&&!m(y,String(l),a)||r&&!m(y,String(r),a))return null;l=$jscomp.makeIterator(k);for(d=l.next();!d.done;d=l.next())if(!m(y,String(d.value),a))return!1;return!0}k=$jscomp.makeIterator(k);for(d=k.next();!d.done;d=k.next()){d=d.value;var A=A||">"===d.operator||">="===d.operator;var E=E||"<"===d.operator||"<="===d.operator;if(l)if(">"===d.operator||">="===d.operator){if(f=n(l,d,a),f===d&&f!==l)return!1}else if(">="===l.operator&&!m(l.semver,String(d),a))return!1;if(r)if("<"===d.operator||"<="===
d.operator){if(f=b(r,d,a),f===d&&f!==r)return!1}else if("<="===r.operator&&!m(r.semver,String(d),a))return!1;if(!d.operator&&(r||l)&&0!==y)return!1}return l&&E&&!r&&0!==y||r&&A&&!l&&0!==y?!1:!0},n=function(d,k,a){if(!d)return k;a=c(d.semver,k.semver,a);return 0<a?d:0>a?k:">"===k.operator&&">="===d.operator?k:d},b=function(d,k,a){if(!d)return k;a=c(d.semver,k.semver,a);return 0>a?d:0<a?k:"<"===k.operator&&"<="===d.operator?k:d};return g1=function(d,k,a){if(d===k)return!0;d=new g(d,a);k=new g(k,a);
var f=!1;d=$jscomp.makeIterator(d.set);var l=d.next();a:for(;!l.done;l=d.next()){l=l.value;for(var r=$jscomp.makeIterator(k.set),v=r.next();!v.done;v=r.next())if(v=h(l,v.value,a),f=f||null!==v,v)continue a;if(f)return!1}return!0}}function pp(g){g=Object.assign({plugins:Uf.allPlugins,reinitializeIds:!1,skipMigrations:!0},g);if(g.reinitializeIds&&"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function mt(g,e){e=
Uf.normalizeOptions(e);var m=e.objPool||new Uf.ObjectPool(e);e=">="+Uf.serializerVersion.replace(Uf.majorAndMinorVersionRe,"");g=m.snapshotObject(g);Uf.removeUnreachableObjects([g.id],g.snapshot);Uf.clearDanglingConnections(g.snapshot);g.requiredVersion=e;return g}function si(g,e){e=Uf.normalizeOptions(e);var m=g.requiredVersion;m&&!Uf.semver.satisfies(Uf.serializerVersion,m)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(m+" but serializer has incompatible version ")+
(Uf.serializerVersion+". Deserialization might fail...!"));return(e.objPool||new Uf.ObjectPool(e)).resolveFromSnapshotAndId(g)}function Oy(g,e,m){function c(){var d=Uf.deserialize(g,m);Uf.runMigrations(n,"objectConverter",g,h);return d}m=Uf.normalizeOptions(m);e.length&&(m.skipMigrations=!1);var h=m.objPool||(m.objPool=new Uf.ObjectPool(m));e=Uf.normalizeMigrations(e);var n=e.after,b;Uf.runMigrations(e.before,"snapshotConverter",g,h);"function"===typeof m.onDeserializationStart&&(b=m.onDeserializationStart(g,
m));return b instanceof Promise?b.then(c):c()}function Eo(g,e){return Uf.deserialize(Uf.serialize(g,e),e)}function iG(g){return"[object Array]"===pfa.call(g)}function wn(g,e,m){(this||NR).type=Number(g);(this||NR).vNode=e;(this||NR).patch=m}function fK(g,e){var m=g.vnode;m||(m=g.vnode=g.render(e));if(!(qfa(m)||rfa(m)||sfa(m)))throw Error("thunk did not return a valid node");return m}function gK(g,e){var m;for(m in g){if(!(m in e)){var c=c||{};c[m]=void 0}var h=g[m],n=e[m];if(h!==n)if(h1(h)&&h1(n))if(hK(n)!==
hK(h))c=c||{},c[m]=n;else if(tfa(n))c=c||{},c[m]=n;else{if(h=gK(h,n))c=c||{},c[m]=h}else c=c||{},c[m]=n}for(var b in e)b in g||(c=c||{},c[b]=e[b]);return c}function hK(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function iK(g,e){var m={a:g};jG(g,e,m,0);return m}function jG(g,e,m,c){if(g!==e){var h=m[c],n=!1;if(jK(g)||jK(e))kG(g,e,m,c);else if(null==e)kK(g)||(gm(g,m,c),lG(g,m,c),h=m[c]),h=Wm(h,new ol(ol.REMOVE,
g,e));else if(SA(e))if(SA(g))if(g.tagName===e.tagName&&g.namespace===e.namespace&&g.key===e.key){var b=ufa(g.properties,e.properties);b&&(h=Wm(h,new ol(ol.PROPS,g,b)));b=c;var d=g.children;e=e.children;var k=io(e),a=k.keys,f=k.free;if(f.length===e.length)e={children:e,moves:null};else{k=io(d);var l=k.keys;if(k.free.length===d.length)e={children:e,moves:null};else{k=[];for(var r=0,v=f.length,y=0,A=0;A<d.length;A++){var E=d[A];E.key?a.hasOwnProperty(E.key)?(E=a[E.key],k.push(e[E])):(y++,k.push(null)):
r<v?(E=f[r++],k.push(e[E])):(y++,k.push(null))}f=r>=f.length?e.length:f[r];for(r=0;r<e.length;r++)v=e[r],v.key?l.hasOwnProperty(v.key)||k.push(v):r>=f&&k.push(v);l=k.slice();f=0;r=[];v=[];for(E=0;E<e.length;){var F=e[E];for(A=l[f];null===A&&l.length;)r.push(HD(l,f,null)),A=l[f];A&&A.key===F.key?(f++,E++):F.key?(A&&A.key?a[A.key]!==E+1?(r.push(HD(l,f,A.key)),(A=l[f])&&A.key===F.key?f++:v.push({key:F.key,to:E})):v.push({key:F.key,to:E}):v.push({key:F.key,to:E}),E++):A&&A.key&&r.push(HD(l,f,A.key))}for(;f<
l.length;)A=l[f],r.push(HD(l,f,A&&A.key));e=r.length!==y||v.length?{children:k,moves:{removes:r,inserts:v}}:{children:k,moves:null}}}a=e.children;k=d.length;y=a.length;k=k>y?k:y;for(y=0;y<k;y++)l=d[y],f=a[y],b+=1,l?jG(l,f,m,b):f&&(h=Wm(h,new ol(ol.INSERT,null,f))),SA(l)&&l.count&&(b+=l.count);e.moves&&(h=Wm(h,new ol(ol.ORDER,g,e.moves)))}else h=Wm(h,new ol(ol.VNODE,g,e)),n=!0;else h=Wm(h,new ol(ol.VNODE,g,e)),n=!0;else i1(e)?i1(g)?g.text!==e.text&&(h=Wm(h,new ol(ol.VTEXT,g,e))):(h=Wm(h,new ol(ol.VTEXT,
g,e)),n=!0):kK(e)&&(kK(g)||(n=!0),h=Wm(h,new ol(ol.WIDGET,g,e)));h&&(m[c]=h);n&&(gm(g,m,c),lG(g,m,c))}}function lG(g,e,m){if(kK(g))"function"===typeof g.destroy&&(e[m]=Wm(e[m],new ol(ol.REMOVE,g,null)));else if(SA(g)&&(g.hasWidgets||g.hasThunks)){g=g.children;for(var c=g.length,h=0;h<c;h++){var n=g[h];m+=1;lG(n,e,m);SA(n)&&n.count&&(m+=n.count)}}else jK(g)&&kG(g,null,e,m)}function kG(g,e,m,c){g=vfa(g,e);g=iK(g.a,g.b);a:{for(h in g)if("a"!==h){var h=!0;break a}h=!1}h&&(m[c]=new ol(ol.THUNK,null,g))}
function gm(g,e,m){if(SA(g)){if(g.hooks){var c=e[m],h=ol.PROPS,n=g.hooks,b={},d;for(d in n)b[d]=void 0;e[m]=Wm(c,new ol(h,g,b))}if(g.descendantHooks||g.hasThunks)for(g=g.children,c=g.length,h=0;h<c;h++)n=g[h],m+=1,gm(n,e,m),SA(n)&&n.count&&(m+=n.count)}else jK(g)&&kG(g,null,e,m)}function HD(g,e,m){g.splice(e,1);return{from:e,key:m}}function io(g){for(var e={},m=[],c=g.length,h=0;h<c;h++){var n=g[h];n.key?e[n.key]=h:m.push(h)}return{keys:e,free:m}}function Wm(g,e){return g?(wfa(g)?g.push(e):g=[g,e],
g):e}function lK(g,e,m,c){if(c)if(c=c[e],j1(c))c.unhook&&c.unhook(g,e,m);else if("attributes"===e)for(var h in c)g.removeAttribute(h);else if("style"===e)for(var n in c)g.style[n]="";else g[e]="string"===typeof c?"":null}function mK(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function mG(g,e){var m=e?e.document||k1:k1,c=e?e.warn:null;g=xfa(g).a;if(yfa(g))return g.init();if(zfa(g))return m.createTextNode(g.text);
if(!Afa(g))return c&&c("Item is not a valid virtual dom node",g),null;m=null===g.namespace?m.createElement(g.tagName):m.createElementNS(g.namespace,g.tagName);Bfa(m,g.properties);g=g.children;for(c=0;c<g.length;c++){var h=mG(g[c],e);h&&m.appendChild(h)}return m}function nK(g,e,m,c,h){c=c||{};if(g){oK(m,h,h)&&(c[h]=g);var n=e.children;if(n){g=g.childNodes;for(var b=0;b<e.children.length;b++){h+=1;var d=n[b]||Cfa,k=h+(d.count||0);oK(m,h,k)&&nK(g[b],d,m,c,h);h=k}}}return c}function oK(g,e,m){if(0===
g.length)return!1;for(var c=0,h=g.length-1,n,b;c<=h;){n=(h+c)/2>>0;b=g[n];if(c===h)return b>=e&&b<=m;if(b<e)c=n+1;else if(b>m)h=n-1;else return!0}return!1}function OR(g,e){return g>e?1:-1}function nG(g,e){"function"===typeof e.destroy&&Dfa(e)&&e.destroy(g)}function pK(g,e,m){m=m||{};m.patch=m.patch&&m.patch!==pK?m.patch:qK;m.render=m.render||Efa;return m.patch(g,e,m)}function qK(g,e,m){var c=[];for(h in e)"a"!==h&&c.push(Number(h));if(0===c.length)return g;var h=Ffa(g,e.a,c);var n=g.ownerDocument;
m.document||n===Gfa||(m.document=n);for(n=0;n<c.length;n++){var b=c[n];var d=h[b],k=e[b],a=m;if(d)if(Hfa(k))for(var f=0;f<k.length;f++)b=l1(k[f],d,a),d===g&&(g=b);else b=l1(k,d,a),d===g&&(g=b)}return g}function oG(g,e,m,c,h){(this||hv).tagName=g;(this||hv).properties=e||Ifa;(this||hv).children=m||Jfa;(this||hv).key=null!=c?String(c):void 0;(this||hv).namespace="string"===typeof h?h:null;g=m&&m.length||0;c=0;var n=h=!1,b=!1,d;for(a in e)if(e.hasOwnProperty(a)){var k=e[a];Kfa(k)&&k.unhook&&(d||(d={}),
d[a]=k)}for(e=0;e<g;e++){var a=m[e];Lfa(a)?(c+=a.count||0,!h&&a.hasWidgets&&(h=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!h&&Mfa(a)?"function"===typeof a.destroy&&(h=!0):!n&&Nfa(a)&&(n=!0)}(this||hv).count=g+c;(this||hv).hasWidgets=h;(this||hv).hasThunks=n;(this||hv).hooks=d;(this||hv).descendantHooks=b}function pG(g){(this||Ofa).text=String(g)}function ID(g){if(!(this instanceof ID))return new ID(g);this.value=g}function TA(g){if(!(this instanceof TA))return new TA(g);
this.value=g}function UA(g,e,m,c){if("string"===typeof g)e.push(new m1(g));else if("number"===typeof g)e.push(new m1(String(g)));else if(qG(g))e.push(g);else if(n1(g))for(var h=0;h<g.length;h++)UA(g[h],e,m,c);else if(null!==g&&void 0!==g)throw e={tagName:m,properties:c},m=Error(),m.type="virtual-hyperscript.unexpected.virtual-element",m.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+rK(g)+".\nThe parent vnode is:\n"+rK(e),m.foreignObject=
g,m.parentVnode=e,m;}function qG(g){return Pfa(g)||Qfa(g)||Rfa(g)||Sfa(g)}function rK(g){try{return JSON.stringify(g,null,"    ")}catch(e){return String(g)}}function Xw(g,e){if(3===g.nodeType)return new o1(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var m="http://www.w3.org/1999/xhtml"!==g.namespaceURI?g.namespaceURI:null,c=e&&g.getAttribute(e)?g.getAttribute(e):null,h=g.tagName;var n,b={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var d=g.namespaceURI;
for(var k=0;k<g.attributes.length;k++){if("style"==g.attributes[k].name){var a=g.style;var f={};for(n=0;n<a.length;++n){var l=a.item(n);f[l]=String(a[l]);-1<f[l].indexOf("url")&&(f[l]=f[l].replace(/"/g,""))}a="style";l=n=void 0}else d?(n=g.attributes[k],a=n.name,f=n.value,n=Tfa[n.name]||"",l=void 0):(n=void 0,f=g.attributes[k],a=p1[f.name]?p1[f.name]:f.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(f=f.value,n=!0):f=f.value,l=n||!1,n=void 0);n?b[a]={namespace:n,value:f}:l?(b.attributes||(b.attributes=
{}),b.attributes[a]=f):b[a]=f}}d=[];for(k=0;k<g.childNodes.length;k++)d.push(Xw(g.childNodes[k],e));return new Ufa(h,b,d,c,m)}return new o1("")}function Ej(g){var e={};zi.addFill(g,e);zi.addTransform(g,e);zi.addTransformOrigin(g,e);zi.addDisplay(g,e);zi.addExtentStyle(g,e);zi.addBorder(g,e);zi.addBorderRadius(g,e);zi.addShadowStyle(g,e);g.grayscale&&(e.filter=(e.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(e.filter=(e.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(e.opacity=g.opacity);
g.draggable&&!g.isWorld&&(e["touch-action"]="none");return e}function rG(g,e){var m=g.position,c=g.origin,h=g.scale,n=g.rotation,b=g.flipped,d=g.tilted,k=g.perspective,a=g.owner,f=Math.round(m.x-c.x-(g._skipWrapping&&a?a.borderWidthLeft:0));m=Math.round(m.y-c.y-(g._skipWrapping&&a?a.borderWidthTop:0));if(g=g.renderOnGPU||g.dropShadow&&!g.dropShadow.fast||0<g.grayscale)e.willChange="transform";a&&a.isText||g?e.transform="translate("+f+"px, "+m+"px)":(e.transform="",e.top=m+"px",e.left=f+"px");e.transform+=
" rotate("+n.toFixed(2)+"rad) scale("+h.toFixed(5)+","+h.toFixed(5)+")";k&&(e.perspective=k+"px");b&&(e.transform+=" rotateY("+180*b+"deg)");d&&(e.transform+=" rotateX("+180*d+"deg)")}function Py(g,e){var m=g.width;g=g.height;e.width=m||1;e.height=g||1;e.viewBox=[0,0,m||1,g||1].join(" ");return e}function Qy(g){var e="";if(0<g.length){var m=g[0];var c=m.position;var h=c.y;c=c.x;e+="M "+c+" "+h+" "}for(var n=1;n<g.length-1;n++){var b=g[n],d=b.position,k=d.x;d=d.y;var a=b,f=a.controlPoints.previous;
e=a.isSmooth?e+("C "+(c+m.controlPoints.next.x)+" "+(h+m.controlPoints.next.y)+" "+(k+f.x)+" "+(d+f.y)+" "+k+" "+d+" "):e+("L "+k+" "+d+" ");m=b;c=k;h=d}0<g.length&&(b=g[g.length-1].position,n=b.x,b=b.y,g=g[g.length-1],k=g.controlPoints.previous,e=g.isSmooth?e+("C "+(c+m.controlPoints.next.x)+" "+(h+m.controlPoints.next.y)+" "+(n+k.x)+" "+(b+k.y)+" "+n+" "+b):e+("L "+n+" "+b));return e}function Ry(g,e){var m=g.id,c=g.vertices,h=g.fill,n=g.borderColor,b=g.borderWidth;c.length&&(e.d=zi.getSvgVertices(c));
zi.addSvgBorderStyle(g,e);e["stroke-width"]=b.valueOf();e.fill=h?h.isGradient?"url(#gradient-fill"+m+")":h.toString():"transparent";e.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+m+")":n.valueOf().toString();return e}function Fj(g){var e=g.reactsToPointer,m=g.nativeCursor,c=g.clipMode,h=Le.styleProps(g);g=g._animationQueue.maskedProps("css");"backgroundImage"in g&&delete h.background;"visible"!==c&&(h.overflow=c,h["-webkit-overflow-scrolling"]="touch",h["overflow-anchor"]="none");Object.assign(h,
g);h.position="absolute";h["pointer-events"]=e?"auto":"none";h.cursor=m;return h}function De(g,e){this.morph=g;this.type=e}function Yw(g,e){e={animation:new Le.Animation(g),key:g.id,id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):g.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new Le.MorphAfterRenderHook(g,e)};e.attributes["touch-action"]=Le.bowser.ios&&g.draggable&&!g.isWorld?"none":Le.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":
"manipulation";return e}function Xd(g){var e=new Le.SvgAnimation(g,"svg"),m={};Le.addSvgAttributes(g,m);Object.assign(m,g._animationQueue.maskedProps("svg"));return{animation:e,attributes:m}}function Zw(g){var e=new Le.SvgAnimation(g,"path"),m={mask:0!==g.drawnProportion?"url(#mask"+g.id+")":""};Le.addPathAttributes(g,m);Object.assign(m,g._animationQueue.maskedProps("path"));return{animation:e,attributes:m}}function Sy(g,e,m){var c=m=m.valueOf(),h=c.bounds,n=c.focus,b=c.vector;c=c.stops;var d=e.x;
e=e.y;g={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&(g.attributes.gradientTransform="rotate("+Le.num.toDegrees(b.extent().theta())+", "+d/2+", "+e/2+")");n&&h&&(b=h.width,h=h.height,g.attributes.gradientTransform="matrix(\n"+b/d+", 0, 0, "+h/e+",\n"+(d/2-b/d*(d/2)+n.x*d-d/2)+",\n"+(e/2-h/e*(e/2)+n.y*e-e/2)+")");return Le.h(m.type,g,c.map(function(k){return Le.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*
k.offset+"%","stop-opacity":k.color.a,"stop-color":k.color.withA(1).toString()}})}))}function Hc(g,e){e=void 0===e?g.env.renderer:e;return Le.createNode(g.render(e),e.domEnvironment)}function Ty(g,e){var m=e.renderMap.get(g),c=e.getNodeForMorph(g);if(c&&m){var h=e.render(g),n=Le.diff(m,h);if(g=e.renderMap.get(g.owner))g=g.children[0].children,m=g.indexOf(m),g[m]=h,Le.patch(c,n)}}function ia(g,e){if(g.needsRerender()){var m=!1,c=e.domNode,h=e.renderMap.get(g)||c&&(m=!0)&&Le.parser(c)||e.render(g),
n=e.render(g);m&&(h.key=n.key);m=Le.diff(h,n);c=c||(e.domNode=Le.createNode(h,e.domEnvironment));c.parentNode||Le.initDOMState(e,g);Le.patch(c,m);e.renderFixedMorphs(n.fixedMorphs,g)}}function q(g,e,m){return(((1-3*m+3*e)*g+(3*m-6*e))*g+3*e)*g}function x(g){return g}function B(g){return Ef.obj.isFunction(g)?g:Ef.Bezier.apply(Ef,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function D(g){var e=0,m=0;do e+=g.offsetTop||0,m+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:e,
left:m}}function I(){return System.get("@system-env").browser?oh.createDOMEnvironment_browser():oh.createDOMEnvironment_node()}function N(){return oh._defaultEnv||(oh._defaultEnv=System.get("@system-env").browser?new oh.DomEnvironment(window,document,function(){}):oh.createDOMEnvironment())}function V(g,e,m){g=void 0===g?"lively-css":g;m=void 0===m?document:m;var c=m.getElementById(g);return c?oh.setCSSDef(c,e,m):oh.addCSSDef(g,e,m)}function ba(g,e,m,c){m=void 0===m?document:m;c=void 0===c?!0:c;var h=
m.getElementById(g),n=!1;return h?c&&h.getAttribute("href")!==e?(h.setAttribute("href",e),h.onload=function(){return n=!0},oh.promise.waitFor(3E4,function(){return!!n&&h})):Promise.resolve():(h=m.createElement("link"),h.type="text/css",h.rel="stylesheet",h.setAttribute("id",g),h.setAttribute("href",e),h.onload=function(){return n=!0},m.head.appendChild(h),oh.promise.waitFor(3E4,function(){return!!n&&h}))}function sa(g,e){return Array.isArray(g)?g.reduce(function(m,c){return sa(c,m)},e):"string"===
typeof g?e.filter(function(m){return m.path()!==g&&m.name()!==g}):g instanceof RegExp?e.filter(function(m){return!g.test(m.path())&&!g.test(m.name())}):"function"===typeof g?e.filter(function(m){return!g(m)}):e}function ta(g){g=$jscomp.makeIterator(g.split("?"));g.next();var e=g.next().value;g={};if(!e)return g;if(e=e.split("&"))for(var m=0;m<e.length;m++){var c=e[m].split("="),h=c[0],n=!0;if(1<c.length)if(n=decodeURIComponent(c.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=
JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}g[h]=n}return g}function Ma(g){return Object.keys(g).map(function(e){return e+"="+encodeURIComponent(String(g[e]))}).join("&")}function gb(g){var e=g;do g=e,e=g.replace(Hf.pathDoubleDotRe,"");while(e!=g);e=e.replace(Hf.pathDoubleSlashRe,"$1/");return e=e.replace(Hf.pathDotRe,"/")}function Cb(g,e){var m=g.match(Hf.urlRe),c=e.match(Hf.urlRe),h=!0;if(m&&!c||!m&&c)h=!1;if(m&&c){var n=m[1];var b=m[2];var d=c[1];var k=c[2];n!==d?h=!1:b!==k?
h=!1:(g=m[3],e=c[3])}if(!h)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+e);g=Hf.withRelativePartsResolved(g);e=Hf.withRelativePartsResolved(e);if(g==e)return"";m=Hf._relativePathBetween_checkPathes(e,g);if(!m)throw Error("pathname differs in relativePathFrom "+g+" vs "+e);return m}function zb(g,e){return Hf.withRelativePartsResolved(g.replace(Hf.slashEndRe,"")+"/"+e.replace(Hf.slashStartRe,""))}function fc(g){return g.startsWith("/")?g.replace(Hf.slashEndRe,"").split("/").slice(0,
-1).join("/")+"/":""}function Fc(g){var e=[];for(g=Hf.parent(g);g&&(e.unshift(g),g=Hf.parent(g),"/"!==g););return e}function Xb(g,e){if(!g)throw Error("lively.resource resource constructor: expects url but got "+g);if(g.isResource)return g;g=String(g);for(var m=0;m<Hf.extensions.length;m++)if(Hf.extensions[m].matches(g))return new Hf.extensions[m].resourceClass(g,e);throw Error("Cannot find resource type for url "+g);}function Sc(g,e,m){var c,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return c=
Xb(g,m).asDirectory(),d.yield(c.ensureExistance(),2);case 2:n=d.forIn(e);case 3:if(null==(h=n.getNext())){d.jumpTo(5);break}if(!e.hasOwnProperty(h)){d.jumpTo(3);break}b=c.join(h);return"object"===typeof e[h]?d.yield(Sc(b,e[h],m),9):d.yield(b.write(e[h]),8);case 8:d.jumpTo(7);break;case 9:case 7:d.jumpTo(3);break;case 5:return d.return(c)}})}function qd(g){var e=g.name;Hf.extensions=Hf.extensions.filter(function(m){return m.name!==e}).concat(g)}function xd(g){var e="string"===typeof g?g:g.name;Hf.extensions=
Hf.extensions.filter(function(m){return m.name!==e})}function kd(g,e){var m=void 0===g.useProxy?!0:g.useProxy,c=void 0===g.useCors?!0:g.useCors,h=g.url,n=g.onLoad,b=g.headers,d=g.onProgress,k=new XMLHttpRequest,a=dh.promise.deferred();k.open("PUT",h);m&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=g.proxyDomain||dh.defaultOrigin());for(var f in b)k.setRequestHeader(f,b[f]);k.upload.addEventListener("progress",d);k.responseType="json";k.onload=function(){n(k.response);
a.resolve(k)};c&&(k.withCredentials=!0);k.send(e);return a.promise}function be(g,e,m){e=void 0===e?"infinity":e;var c,h,n,b,d,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(g.dirList(e,m),2);case 2:c=A.yieldResult,h={},n=$jscomp.makeIterator(c),b=n.next();case 3:if(b.done){A.jumpTo(5);break}d=b.value;if(d.isDirectory()){k={};A.jumpTo(6);break}return A.yield(d.read(),7);case 7:k=A.yieldResult;case 6:a=k;f=d.asFile().relativePathFrom(g).split("/");
l=h;r=$jscomp.makeIterator(f.slice(0,-1));for(v=r.next();!v.done;v=r.next())y=v.value,l[y]||(l[y]={}),l=l[y];l[f[f.length-1]]=a;b=n.next();A.jumpTo(3);break;case 5:return A.return(h)}})}function Oe(g){var e,m,c,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return e=document.head,m=e.namespaceURI,c=Zh.newUUID(),h=document.createElementNS(m,"script"),h.setAttribute("type","module"),e.appendChild(h),h.innerText="import m from '"+g+"'; window['"+c+"'] = m;",h.setAttributeNS(null,
"async",!0),b.yield(Zh.waitFor(3E4,function(){return window[c]}),2);n=b.yieldResult;delete window[c];h.remove();return b.return(n)})}function ae(g,e){var m=document.head,c=m.namespaceURI;return new Promise(function(h,n){var b=document.createElementNS(c,"script");b.setAttribute("type","text/ecmascript");m.appendChild(b);b.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",g):b.setAttribute("src",g);b.onload=h;b.onerror=n;
b.setAttributeNS(null,"async",!0)})}function Md(){var g,e,m,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:if("fetch"in System.global&&"Headers"in System.global)return h.return(Promise.resolve());g=System.decanonicalize("lively.resources");if(System.get("@system-env").node){h.setCatchFinallyBlocks(5);e=System._nodeRequire("fetch-ponyfill");h.leaveTryBlock(3);break}return h.yield(System.import("fetch-ponyfill",g),4);case 4:e=h.yieldResult;h.jumpTo(3);
break;case 5:return h.enterCatchBlock(),h.yield(System.normalize("fetch-ponyfill",g),7);case 7:return m=h.yieldResult.replace("file://",""),h.yield(System.import(m),8);case 8:c=h.yieldResult,e=c.default;case 3:Object.assign(System.global,e()),h.jumpToEnd()}})}function $e(g,e){e||(e="undefined"!==typeof document?document.location.search:"");e=(e=e.trim())&&"?"!==e?Ni.parseQuery(e):{};g.endsWith(".json")?(e.file=g,delete e.name):(delete e.file,e.name=g);return"/worlds/load?"+Ni.stringifyQuery(e)}function Be(g){Object.assign(Ni.nameToClassMapping,
g)}function de(g,e){g=void 0===g?{}:g;e=void 0===e?{restore:!1}:e;var m=Ni.nameToClassMapping.default;g.type&&("function"===typeof g.type&&(m=g.type),"object"===typeof g.type?m=Ni.locateClass(g.type):"string"===typeof g.type&&(m=Ni.nameToClassMapping[g.type.toLowerCase()]||m));var c={};return e.restore?(new m((c[Symbol.for("lively-instance-restorer")]=!0,c))).initFromJSON(g):new m(g)}function Pe(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():
"")+"_"+Ni.string.newUUID().replace(/-/g,"_")}function zf(g,e){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(e){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||g.windows;case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;default:return g.linux||g.win||g.windows}}function gf(g,e,m,
c){c=void 0===c?m.name:c;(g[e]=Zp.fun.wrap(g[e],m)).hookFunc=m;m.hookName=c}function If(g,e,m){for(var c=[],h=g[e];h;)c.push(h),h=h.originalFunction;h="string"===typeof m?c.find(function(n){return n.hookFunc&&n.hookFunc.hookName===m}):c.find(function(n){return n.hookFunc===m});if(!h)return!1;Zp.arr.remove(c,h);g[e]=c.reduceRight(function(n,b){return Zp.fun.wrap(n,b.hookFunc||b)});return!0}function Pg(g,e,m){for(g=g[e];g;){if(g.hookFunc&&("string"===typeof m&&g.hookFunc.hookName===m||g.hookFunc===
m))return!0;g=g.originalFunction}return!1}function Gj(g){if(g.loads){var e=g.loads;return $w.arr.uniq(Object.keys($w.loadedModules(g)).concat(Object.keys(e))).reduce(function(m,c){var h=e[c]?e[c].depMap:{};m[c]=Object.keys(h).map(function(n){var b=h[n];return"@empty"===b?b+"/"+n:b});return m},{})}return Object.keys(g._loader.moduleRecords).reduce(function(m,c){m[c]=g._loader.moduleRecords[c].dependencies.filter(Boolean).map(function(h){return h.name});return m},{})}function Pj(g,e,m,c,h){var n=g.get("@lively-env").pendingExportChanges;
(g=Fo.module(g,e).record())&&(m in g.exports||h)&&((n[e]||(n[e]={}))[m]=c)}function Ti(g,e){var m=g.get("@lively-env").pendingExportChanges[e];m&&(Fo.clearPendingModuleExportChanges(g,e),Fo.updateModuleExports(g,e,m))}function Yg(g,e,m,c,h){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:d.setCatchFinallyBlocks(2);g.debug&&console.log("[module change] "+e+" "+m.slice(0,50).replace(/\n/g,"")+" "+c);if(!c||"es6"===c||"esm"===c||"register"===c||"defined"===
c)return d.yield(qk.moduleSourceChangeEsm(g,e,m,h),8);if("global"!==c)throw Error("moduleSourceChange is not supported for module "+e+" with format "+c);return d.yield(qk.moduleSourceChangeGlobal(g,e,m,h),7);case 7:n=d.yieldResult;d.jumpTo(5);break;case 8:n=d.yieldResult;case 5:return qk.emit("lively.modules/modulechanged",{module:e,newSource:m,options:h},Date.now(),g),d.return(n);case 2:throw b=d.enterCatchBlock(),qk.emit("lively.modules/modulechanged",{module:e,newSource:m,error:b,options:h},Date.now(),
g),b;}})}function Yk(g){return/\.js/i.test(g)}function rk(g){return xn.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,"")}function Xm(g){return/^[^:\\]+:\/\//.test(g)}function nt(g){var e=g.match(/^([^:]+:\/\/)(.*)/);if(!e)return g;g=e[1];var m=e=e[2];do e=m,m=e.replace(/\/[^\/]+\/\.\./,"");while(m!=e);m=m.replace(/(^|[^:])[\/]+/g,"$1/");m=m.replace(/\/\.\//g,"/");return g+m}function ot(g,e,m){m=void 0===m?!1:m;var c=bf.classHolder.PackageRegistry.ofSystem(g),h=c.allPackageURLs();g=m?e:bf.normalizePackageURL(g,
e,h);return{pkg:c.findPackageWithURL(g),url:g,allPackageURLs:h,registry:c}}function pt(g,e,m){g=bf.lookupPackage(g,e,void 0===m?!1:m);e=g.url;m=g.registry;return g.pkg||m.addPackageAt(e,"devPackageDirs")}function Wr(g,e,m){g=bf.lookupPackage(g,e,void 0===m?!1:m);if(m=g.pkg)return m;throw Error("[getPackage] package "+e+" (as "+g.url+") not found");}function Xr(g,e,m){return bf.getPackage(g,m).updateConfig(e)}function Gh(g,e){return Promise.resolve(bf.ensurePackage(g,e)).then(function(m){return m.import()})}
function dk(g,e){return(g=bf.lookupPackage(g,e).pkg)?g.remove():null}function Hj(g,e,m){return bf.getPackage(g,e).reload(m)}function yn(g,e,m){return Promise.resolve(bf.ensurePackage(g,e)).then(function(c){return c.register(m)})}function VA(g){return bf.Package.allPackages(g).map(function(e){return e.asSpec()})}function Wq(g,e){g="string"===typeof g?pd.parse(g):g;e.scope=pd.query.resolveReferences(pd.query.scopes(g));return pd.ClassReplaceVisitor.run(g,e)}function Hh(g,e,m){m=qp.ensureParent(g,e);
var c=g.System._nodeRequire("module");e.startsWith(".")&&(e=qp.relative(g,e));return c._load(e,m)}function xm(g,e,m){m=qp.ensureParent(g,e);var c=g.System._nodeRequire("module");e.startsWith(".")&&(e=qp.relative(g,e));return c._resolveFilename(e,m)}function zn(g,e,m){var c=We.livelySystemEnv(g);e=g.decanonicalize(e,m);return c.loadedModules[e]||(c.loadedModules[e]=new We.ModuleInterface(g,e))}function Uy(g,e,m){m=void 0===m?!1:m;var c=We.livelySystemEnv(g);return(m?e:g.normalizeSync(e))in c.loadedModules}
function sK(g,e,m){m=void 0===m?!1:m;var c,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){We.livelySystemEnv(g);c=m?e:g.normalizeSync(e);if(We.isModuleLoaded(g,c,!0))return b.return(!0);h=We.Package.forModuleId(g,c);return h&&"no group"!==h.name?b.yield(h.hasResource(c),3):(n=g.resource(c).exists(),b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function PR(){return we.exceptions}function QR(g){return we.exceptions=g}function RR(g,e,m,
c,h){e=String(e);g=c.sourceAccessorName;var n=c.recorder,b=c.recorderName,d=c.dontTransform,k=c.varDefinitionCallbackName,a=void 0===c.embedOriginalCode?!0:c.embedOriginalCode;g=a?g:void 0;c={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:g,dontTransform:d,jsx:m.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:k,evalId:c.nextEvalId(),classTransform:we.classToFunctionTransform,currentModuleAccessor:we.funcCall(we.member(we.funcCall(we.member(we.member("__lvVarRecorder",
"System"),"get"),we.literal("@lively-env")),"moduleEnv"),we.literal(m))};n=h?'console.log("[lively.modules] executing module '+m+'");\n':"";d="";"System.global"===b?delete c.declarationWrapperName:(n+='SystemJS.get("@lively-env").evaluationStart("'+m+'");\nvar '+(b+' = SystemJS.get("@lively-env").moduleEnv("'+m+'").recorder;\n')+(a?"\nvar "+g+" = "+JSON.stringify(e)+";\n":""),d+='\nSystemJS.get("@lively-env").evaluationEnd("'+m+'");');try{var f=n+we.evalCodeTransform(e,c)+d;h&&"undefined"!==typeof $world&&
$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=f);return{source:f,options:c}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+m+" "+l.stack),{source:e,options:c}}}function SR(g,e,m,c,h,n){e=String(e);g=Object.assign({},h,{classTransform:we.classToFunctionTransform,topLevelVarRecorder:c.recorder,varRecorderName:c.recorderName,dontTransform:c.dontTransform,recordGlobals:!0,declarationWrapperName:c.varDefinitionCallbackName,currentModuleAccessor:we.funcCall(we.member(we.funcCall(we.member(we.member("__lvVarRecorder",
"System"),"get"),we.literal("@lively-env")),"moduleEnv"),we.literal(m))});try{var b=we.evalCodeTransformOfSystemRegisterSetters(e,g);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(d){return console.error("Error in prepareTranslatedCodeForSetterCapture",d.stack),e}}function tK(g,e){return g.translate(e).then(function(m){var c=we.parse(m).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===
n.expression.callee.property.name});if(!c)throw Error("Cannot find register call in translated source of "+e.name);var h=c.expression;c=h.arguments[0].elements.map(function(n){return n.value});h=h.arguments[1];m=m.slice(h.start,h.end);m=eval('var __moduleName = "'+e.name+'";('+m+");\n//# sourceURL="+e.name+"\n");g.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=m);return{localDeps:c,declare:m}})}function uK(g,e){return g.translate(e).then(function(m){return{translated:m}})}
function sG(g){we.isHookInstalled(g,"translate","lively_modules_translate_hook")||we.installHook(g,"translate",function(e,m){return we.customTranslate.call(g,e,m)},"lively_modules_translate_hook")}function vK(g){we.removeHook(g,"translate","lively_modules_translate_hook")}function wK(g){g.resource=hh.resource;hh.isHookInstalled(g,"fetch",hh.fetchResource)&&hh.removeHook(g,"fetch","fetchResource");hh.installHook(g,"fetch",hh.fetchResource);hh.isHookInstalled(g,"resource","livelyProtocol")&&hh.removeHook(g,
"fetch","livelyProtocol");hh.installHook(g,"resource",hh.livelyProtocol)}function TR(g){hh.removeHook(g,"fetch","fetchResource");hh.removeHook(g,"resource","livelyProtocol");delete g.resource}function xK(g){Od.isHookInstalled(g,"normalize","normalizeHook")||Od.installHook(g,"normalize",Od.normalizeHook,"normalizeHook");Od.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||Od.installHook(g,"decanonicalize",Od.decanonicalizeHook,"decanonicalizeHook");Od.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||
Od.installHook(g,"normalizeSync",Od.decanonicalizeHook,"decanonicalizeHook");Od.isHookInstalled(g,"newModule","newModule_volatile")||Od.installHook(g,"newModule",Od.newModule_volatile,"newModule_volatile");Od.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||Od.installHook(g,"instantiate",Od.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");Od.isHookInstalled(g,"locate","locateHook")||Od.installHook(g,"locate",Od.locateHook,"locateHook")}function yK(g){Od.removeHook(g,
"normalize","normalizeHook");Od.removeHook(g,"decanonicalize","decanonicalizeHook");Od.removeHook(g,"normalizeSync","decanonicalizeHook");Od.removeHook(g,"newModule","newModule_volatile");Od.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");Od.removeHook(g,"locate","locateHook")}function zK(g){return{moduleEnv:function(e){return Od.classHolder.module(g,e)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(e){Od.classHolder.module(g,e).evaluationStart()},
evaluationEnd:function(e){Od.classHolder.module(g,e).evaluationEnd()},dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(e){g["__lively.modules__packageRegistry"]=e},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]=
{}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]={}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=
Od.obj.deepCopy(Od.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}function WA(g,e){return g&&"string"!==typeof g?g:Od.systems()[g]||(Od.systems()[g]=Od.makeSystem(e))}function XA(g){g=g&&"string"!==typeof g?Od.nameOfSystem(g):g;delete Od.systems()[g]}function AK(g,e){g.trace=!0;e=e||{};var m=e.hasOwnProperty("useModuleTranslationCache")?e.useModuleTranslationCache:
!Od.urlQuery().noModuleCache;g.useModuleTranslationCache=m;g.set("@lively-env",g.newModule(Od.livelySystemEnv(g)));"undefined"!==typeof Od.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},g.get("@system-env"),{browser:!0,worker:!0,location:Od.location})));(m="undefined"!==typeof Od.process&&Od.process.versions&&Od.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:m},g.get("@system-env"))));Od.wrapResource(g);Od.wrapModuleLoad(g);Od.wrapModuleResolution(g);
m&&(m=["electron"].reduce(function(c,h){c[h]="@node/"+h;return c},{}),e.map=Od.obj.merge(m,e.map));Od.isNode&&(m="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(c,h){c[h]="@node/"+h;return c},{}),e.map=Od.obj.merge(m,e.map));e.packageConfigPaths=e.packageConfigPaths||["./node_modules/*/package.json"];e.transpiler||
"traceur"!==g.transpiler||(m=Od.GLOBAL.System,"lively.transpiler"===m.transpiler?(g.set("lively.transpiler",m.get("lively.transpiler")),g._loader.transpilerPromise=m._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(m.babelOptions||{},e.babelOptions)})):g.config({map:{"plugin-babel":m.map["plugin-babel"],"systemjs-babel-build":m.map["systemjs-babel-build"]},transpiler:m.transpiler,babelOptions:Object.assign(m.babelOptions||{},e.babelOptions)}));g.config(e);
return g}function BK(g){g=Od.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function CK(g,e,m){var c=g.decanonicalize(e);if(g.get(c))try{m(Od.classHolder.module(g,c))}catch(h){console.error(h)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:e,resolved:!1,callback:m})}
function DK(g){return g.get("@lively-env").loadedModules}function EK(g){var e=g.loads?Object.keys(g.loads):Object.keys(g._loader.moduleRecords);return Od.arr.uniq(e.concat(Object.keys(Od.loadedModules(g))))}function UR(g,e,m){return Promise.all(Od.obj.values(Od.loadedModules(g)).map(function(c){return c.search(e,m)})).then(function(c){return Od.arr.flatten(c,1)})}function tG(g,e,m,c){e=void 0===e?{maxDepth:0,excludes:[]}:e;m=void 0===m?{}:m;c=void 0===c?0:c;var h,n,b,d,k,a,f,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:h=
e;n=h.maxDepth;b=h.excludes;if(0<n&&c>n)return F.return(m);F.setCatchFinallyBlocks(2);d=JSON;k=d.parse;return F.yield(Ym.resource(g).join("package.json").read(),4);case 4:a=k.call(d,F.yieldResult);f=a.name+"@"+a.version;if(m[f]||b.includes(a.name))return F.return(m);m[f]=Object.assign({url:g},Ym.obj.select(a,["name","version","dependencies","devDependencies","main"]));F.leaveTryBlock(3);break;case 2:return F.enterCatchBlock(),F.return(m);case 3:return F.setCatchFinallyBlocks(5),F.yield(Ym.resource(g).join("node_modules").dirList(1),
7);case 7:l=F.yieldResult;F.leaveTryBlock(6);break;case 5:return F.enterCatchBlock(),F.return(m);case 6:r=$jscomp.makeIterator(l),v=r.next();case 8:if(v.done){F.jumpTo(10);break}A=y=v.value;E=A.url;return F.yield(tG(E,e,m,c+1),11);case 11:m=F.yieldResult;v=r.next();F.jumpTo(8);break;case 10:return F.return(m)}})}function FK(g,e){var m=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(m).reduce(function(c,h){var n=m[h],b=Ym.obj.values(e).find(function(k){var a=k.version;return k.name===
h&&lively.modules.semver.satisfies(a,n)})||{},d=b.name;b=b.version;c[h]=d?d+"@"+b:void 0;return c},{})}function GK(g){function e(h,n){var b=h+"@"+n;if(b in c)return c[b];var d=m.find(function(a){var f=a.version;return a.name===h&&lively.modules.semver.satisfies(f,n)})||{},k=d.name;d=d.version;return c[b]=k?k+"@"+d:void 0}var m=Ym.obj.values(g),c={};return Object.keys(g).reduce(function(h,n){var b=g[n],d=Object.assign({},b.dependencies,{},b.devDependencies);h[n]=Object.keys(d).map(function(k){return e(k,
d[k])}).filter(function(k){return!!k});return h},{})}function HK(g,e){bd.defaultSystem=g;e&&(bd.GLOBAL.System=g);return g}function IK(){bd._wrapModuleResolution(bd.defaultSystem)}function JK(){bd._unwrapModuleResolution(bd.defaultSystem)}function KK(){return Object.keys(bd.requireMap())}function uG(g){return bd._module(bd.defaultSystem,g)}function LK(g,e){return bd._isModuleLoaded(bd.defaultSystem,g,e)}function MK(g,e){return bd._doesModuleExist(bd.defaultSystem,g,e)}function NK(){return bd._printSystemConfig(bd.defaultSystem)}
function OK(g,e){return bd._whenLoaded(bd.defaultSystem,g,e)}function PK(g){return bd._importPackage(bd.defaultSystem,g)}function QK(g,e){return bd._registerPackage(bd.defaultSystem,g,e)}function RK(g){return bd._removePackage(bd.defaultSystem,g)}function SK(g,e){return bd._reloadPackage(bd.defaultSystem,g,e)}function TK(){return bd.getPackageSpecs(bd.defaultSystem)}function UK(g,e){return bd._getPackage(bd.defaultSystem,g,void 0===e?!1:e)}function VK(g){return bd.Package.forModuleId(bd.defaultSystem,
g)}function WK(g){return bd._ensurePackage(bd.defaultSystem,g)}function XK(g,e){return bd._applyPackageConfig(bd.defaultSystem,g,e)}function YK(g,e){return bd._lookupPackage(bd.defaultSystem,g,void 0===e?!1:e)}function ZK(g,e,m){return bd._moduleSourceChange(bd.defaultSystem,g,e,m)}function $K(){return bd.computeRequireMap(bd.defaultSystem)}function aL(g,e){return bd._isHookInstalled(bd.defaultSystem,g,e)}function bL(g,e){return bd._installHook(bd.defaultSystem,g,e)}function cL(g,e){return bd._removeHook(bd.defaultSystem,
g,e)}function dL(){bd._wrapModuleLoad(bd.defaultSystem)}function eL(){bd._unwrapModuleLoad(bd.defaultSystem)}function VR(g){return g&&g.__ref__}function vG(g,e){return Xe.serialize(g,Xe.normalizeOptions(e))}function wG(g,e){e=void 0===e?{}:e;return Xe.deserializeWithMigrations(g,e.migrations||Xe.migrations,Xe.normalizeOptions(e))}function WR(g){var e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(e=Xe,m=e.loadMorphFromSnapshot,c.yield(g.readJson(),2)):c.return(m.call(e,
c.yieldResult))})}function YR(g,e,m){g=void 0===g?Xe.MorphicEnv.default().world:g;var c,h,n,b,d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:c=m||{};h=void 0===c.showIndicator?!0:c.showIndicator;n=void 0===c.changeName?!0:c.changeName;b=void 0===c.changeBrowserURL?!0:c.changeBrowserURL;e||(d=Xe.resource(document.location.href),k=d.name(),e=d.join("../"+k.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof e&&
(e=Xe.resource(e));n&&(g.name=e.nameWithoutExt());b&&(a=encodeURI(m.pathForBrowserHistory||Xe.pathForBrowserHistory(e.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!h){y.jumpTo(2);break}return y.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return l=y.yieldResult,r=l.LoadingIndicator,f=r.open("string"===typeof h?h:"Snapshotting..."),y.yield(f.whenRendered(),4);case 4:return y.yield(Xe.promise.delay(100),2);case 2:return y.setFinallyBlock(6),
y.yield(Xe.createMorphSnapshot(g,m),8);case 8:return v=y.yieldResult,f.label="Uploading...",y.yield(f.whenRendered(),9);case 9:return y.return(e.writeJson(v));case 6:y.enterFinallyBlock(),f&&f.remove(),y.leaveFinallyBlock(0)}})}function fL(g){return Xe.deserializeMorph(Xe.serializeMorph(g),{migrations:Xe.migrations,reinitializeIds:!0})}function YA(g,e){e=void 0===e?{}:e;var m,c,h,n,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:System.get("@system-env");
m=e;c=void 0===m.addPreview?!1:m.addPreview;h=void 0===m.previewWidth?100:m.previewWidth;n=void 0===m.previewHeight?100:m.previewHeight;b=void 0===m.previewType?"png":m.previewType;d=void 0===m.testLoad?!0:m.testLoad;k=void 0===m.addPackages?!0:m.addPackages;a=void 0===m.ignoreMorphs?[]:m.ignoreMorphs;f=void 0===m.frozenSnapshot?!1:m.frozenSnapshot;l=Xe.serializeMorph(g,{frozenSnapshot:f});if(!k){qa.jumpTo(2);break}return qa.yield(Xe.findRequiredPackagesOfSnapshot(l),3);case 3:r=qa.yieldResult,v=
r.packages,y=r.depMap,l.packages=v,l.packageDepMap=y;case 2:if(!c){qa.jumpTo(4);break}return qa.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return A=qa.yieldResult,E=A.renderMorphToDataURI,F=h||g.width,H=n||g.height,J=b||"png",qa.setCatchFinallyBlocks(6),O=l,qa.yield(E(g,{width:F,height:H,type:J,ignoreMorphs:[]}),8);case 8:O.preview=qa.yieldResult;qa.leaveTryBlock(4);break;case 6:return L=qa.enterCatchBlock(),console.error("Error generating morph preview: "+L),Y=l,
qa.yield(E(Xe.morph({fill:g.fill,width:F,height:H}),{width:F,height:H,type:J,ignoreMorphs:a}),9);case 9:Y.preview=qa.yieldResult;case 4:l.preview||(l.preview="");if(!d){qa.jumpTo(10);break}qa.setCatchFinallyBlocks(11);return qa.yield(Xe.loadMorphFromSnapshot(l,{highlightBuggyMorphs:!0,rootObject:g}),13);case 13:S=qa.yieldResult;if(!S||!S.isMorph)throw Error("reloading snapshot does not create a morph!");qa.leaveTryBlock(10);break;case 11:throw ea=qa.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+
ea.stack);case 10:return qa.return(l)}})}function iv(g,e){return Xe.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Xe.loadPackagesAndModulesOfSnapshot,migrations:Xe.migrations},e))}function q1(g,e){var m,c,h,n,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!g.isDirectory())return d=e,k=g.name(),a.yield(g.read(),9);m=e[g.name()]={};return a.yield(g.dirList(),4);case 4:c=a.yieldResult,h=$jscomp.makeIterator(c),
n=h.next();case 5:if(n.done)return a.return(e);b=n.value;return a.yield(q1(b,m),6);case 6:n=h.next();a.jumpTo(5);break;case 9:return d[k]=a.yieldResult,a.return(e)}})}function r1(g,e){e=void 0===e?[]:e;var m=[];if(g.hasOwnProperty("package.json")){var c=e.slice(1).reduceRight(function(n,b){return n.join(b)},Xe.resource(e[0])).url;m.push({files:g,url:c,requiredPackages:g.requiredPackages})}for(var h in g)"object"===typeof g[h]&&m.push.apply(m,$jscomp.arrayFromIterable(r1(g[h],e.concat(h))));return m}
function ZR(g){var e=Xe.findPackagesInFileSpec(g.packages),m={};g=g.packageDepMap;if(!g)return e;e=$jscomp.makeIterator(e);for(var c=e.next();!c.done;c=e.next())c=c.value,m[c.url]=c;return Xe.arr.flatten(Xe.graph.sortByReference(g)).map(function(h){return m[h]})}function xG(g){var e,m,c,h,n,b,d,k,a,f,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if(!g.packagesToRegister){H.jumpTo(2);break}e=$jscomp.makeIterator(g.packagesToRegister);m=e.next();
case 3:if(m.done){H.jumpTo(2);break}c=m.value;H.setCatchFinallyBlocks(6);return H.yield(Xe.registerPackage(c),8);case 8:H.leaveTryBlock(4);break;case 6:H.enterCatchBlock(),console.error("Failed to register package "+c);case 4:m=e.next();H.jumpTo(3);break;case 2:if(!g.packages){H.jumpTo(9);break}h=Xe.packagesOfSnapshot(g);n=$jscomp.makeIterator(h);b=n.next();case 10:if(b.done){H.jumpTo(9);break}k=d=b.value;a=k.files;f=k.url;if(r=(l=Xe.lookupPackage(f))&&l.pkg){v=r.version;y=JSON.parse(a["package.json"]);
A=y.version;try{if(A&&v&&Xe.semver.lte(A,v,!0)){console.log("[load morph] Package "+f+" is loaded in version "+v+(" which is newer than "+A+". Will NOT load older variant."));H.jumpTo(11);break}}catch(J){console.warn("Error in package version comparison: ",J)}}return H.yield(Xe.createFiles(f,a),13);case 13:return H.yield(Xe.ensurePackage(f),14);case 14:return r=H.yieldResult,H.yield(r.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return H.yield(System.import("lively.classes/object-classes.js"),
16);case 16:E=H.yieldResult,F=E.default,Xe.objectScriptingEnabled=!!F,Xe.objectScriptingEnabled&&F.withId(r.name);case 11:b=n.next();H.jumpTo(10);break;case 9:return H.yield(Promise.all(Xe.requiredModulesOfSnapshot(g).map(function(J){return(System.get(J)?null:System.import(J)).catch(function(O){return console.error("Error loading "+J,O)})})),0)}})}function gL(g){var e,m,c,h,n,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,jb,ob,pa,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){switch(wa.nextAddress){case 1:e=
{},m=g.snapshot,c=[],h={},n=!0,b={},d={},a=wa.forIn(m);case 2:if(null==(k=a.getNext())){wa.jumpTo(4);break}f=m[k]["lively.serializer-class-info"];if(!(f&&f.module&&f.module.package)){wa.jumpTo(5);break}l=Xe.getPackage(f.module.package.name);if(!l.address.startsWith("local://")){wa.jumpTo(5);break}return wa.yield(System.import("lively.classes/object-classes.js"),7);case 7:return r=wa.yieldResult,d.$jscomp$loop$prop$ObjectPackage$2539=r.default,wa.yield(System.import("lively.classes/util.js"),8);case 8:v=
wa.yieldResult,y=v.withSuperclasses,Xe.objectScriptingEnabled=!!d.$jscomp$loop$prop$ObjectPackage$2539,A=d.$jscomp$loop$prop$ObjectPackage$2539.forSystemPackage(l),E=A.objectModule.systemModule._recorder[f.className],F=y(E),F.forEach(function(Ka){return function(Fb){(Fb=Ka.$jscomp$loop$prop$ObjectPackage$2539.lookupPackageForClass(Fb))&&c.push(Fb.systemPackage)}}(d));case 5:if(H=m[k].props.metadata)if(J=void 0,H.value&&H.value.__ref__?(O=m[H.value.id],O.props.externalPackages&&(J=O.props.externalPackages.value)):
J=H.externalPackages,J)for(n=!0,L=0;L<J.length;L++)h[J[L]]=!0;d={$jscomp$loop$prop$ObjectPackage$2539:d.$jscomp$loop$prop$ObjectPackage$2539};wa.jumpTo(2);break;case 4:n&&(g.packagesToRegister=Object.keys(h)),Y=[],S=$jscomp.makeIterator(c),ea=S.next();case 9:if(ea.done)return c=[].concat($jscomp.arrayFromIterable(Y),$jscomp.arrayFromIterable(c)),wa.yield(Promise.all(c.map(function(Ka){var Fb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ub){if(1==Ub.nextAddress)return Fb=Xe.resource(Ka.address).asDirectory(),
Ub.yield(Xe.resourceToJSON(Fb,{}),2);hc=Ub.yieldResult;e[Fb.parent().url]||(e[Fb.parent().url]={});Object.assign(e[Fb.parent().url],hc);b[Ka.url]||(b[Ka.url]=[]);Ub.jumpToEnd()})})),16);qa=ea.value;Fa=$jscomp.makeIterator(qa.modules());K=Fa.next();case 12:if(K.done){ea=S.next();wa.jumpTo(9);break}Z=K.value;if(Z.id.endsWith(".json")){wa.jumpTo(13);break}R=$jscomp;U=R.makeIterator;return wa.yield(Z.imports(),15);case 15:for(na=U.call(R,wa.yieldResult),aa=na.next();!aa.done;aa=na.next())if(jb=xa=aa.value,
ob=jb.fromModule,pa=Xe.module(ob).package())ka=pa.config,ka.lively&&ka.lively.isObjectPackage&&(Y.push(pa),b[qa.url]?Xe.arr.pushIfNotIncluded(b[qa.url],pa.url):b[qa.url]=[pa.url]);case 13:K=Fa.next();wa.jumpTo(12);break;case 16:return wa.return({packages:e,depMap:b})}})}function hL(){$R=!0;for(var g,e,m=yG.length;m;){e=yG;yG=[];for(g=-1;++g<m;)e[g]();m=yG.length}$R=!1}function JD(g,e,m){var c=m[m.length-1];g===c.element&&(m.pop(),c=m[m.length-1]);m=c.element;c=c.index;Array.isArray(m)?m.push(g):c===
e.length-2?(e=e.pop(),m[e]=g):e.push(g)}function sk(){sk.init.call(this)}function iL(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g);}function s1(g,e,m,c){var h,n,b;if(iL(m),void 0===(n=g._events)?(n=g._events=Object.create(null),g._eventsCount=0):(void 0!==n.newListener&&(g.emit("newListener",e,m.listener?m.listener:m),n=g._events),b=n[e]),void 0===b)n[e]=m,++g._eventsCount;else if("function"==typeof b?b=n[e]=c?[m,b]:[b,
m]:c?b.unshift(m):b.push(m),0<(h=void 0===g._maxListeners?sk.defaultMaxListeners:g._maxListeners)&&b.length>h&&!b.warned)b.warned=!0,m=Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit"),m.name="MaxListenersExceededWarning",m.emitter=g,m.type=e,m.count=b.length,console&&console.warn&&console.warn(m);return g}function Vfa(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=
!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t1(g,e,m){g={fired:!1,wrapFn:void 0,target:g,type:e,listener:m};e=Vfa.bind(g);return e.listener=m,g.wrapFn=e,e}function u1(g,e,m){g=g._events;if(void 0===g)return[];e=g[e];if(void 0===e)m=[];else if("function"==typeof e)m=m?[e.listener||e]:[e];else if(m)for(m=Array(e.length),g=0;g<m.length;++g)m[g]=e[g].listener||e[g];else m=v1(e,e.length);return m}function w1(g){var e=this._events;if(void 0!==
e){g=e[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function v1(g,e){for(var m=Array(e),c=0;c<e;++c)m[c]=g[c];return m}function KD(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function Vy(){this._store={}}function zG(g){this._store=new Vy;if(g&&Array.isArray(g))for(var e=0,m=g.length;e<m;e++)this.add(g[e])}function Zm(g){var e;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var m=[];var c=0;for(e=g.length;c<e;c++)m[c]=Zm(g[c]);return m}if(g instanceof
Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(c=new ArrayBuffer(g.byteLength),m=new Uint8Array(c),g=new Uint8Array(g),m.set(g),g=c):(c=g.size,m=g.type,g="function"===typeof g.slice?g.slice(0,c,m):g.webkitSlice(0,c,m)),g;m=Object.getPrototypeOf(g);null===m?m=!0:(m=m.constructor,m="function"==typeof m&&m instanceof m&&x1.call(m)==Wfa);if(!m)return g;
m={};for(c in g)Object.prototype.hasOwnProperty.call(g,c)&&(e=Zm(g[c]),"undefined"!==typeof e&&(m[c]=e));return m}function y1(g){var e=!1;return LD(function(m){if(e)throw Error("once called more than once");e=!0;g.apply(this,m)})}function z1(g){return LD(function(e){e=Zm(e);var m=this,c="function"===typeof e[e.length-1]?e.pop():!1,h=new Promise(function(n,b){var d;try{var k=y1(function(a,f){a?b(a):n(f)});e.push(k);(d=g.apply(m,e))&&"function"===typeof d.then&&n(d)}catch(a){b(a)}});c&&h.then(function(n){c(null,
n)},c);return h})}function Xfa(g,e,m){if(g.constructor.listeners("debug").length){for(var c=["api",g.name,e],h=0;h<m.length-1;h++)c.push(m[h]);g.constructor.emit("debug",c);var n=m[m.length-1];m[m.length-1]=function(b,d){var k=["api",g.name,e];k=k.concat(b?["error",b]:["success",d]);g.constructor.emit("debug",k);n(b,d)}}}function ym(g,e){return z1(LD(function(m){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));
var c=this;Xfa(c,g,m);return this.taskqueue.isReady?e.apply(this,m):new Promise(function(h,n){c.taskqueue.addTask(function(b){b?n(b):h(c[g].apply(c,m))})})}))}function AG(g,e){for(var m={},c=0,h=e.length;c<h;c++){var n=e[c];n in g&&(m[n]=g[n])}return m}function A1(g){return g}function Yfa(g){return[{ok:g}]}function B1(g,e,m){function c(){var v=[];f.forEach(function(y){y.docs.forEach(function(A){v.push({id:y.id,docs:[A]})})});m(null,{results:v})}function h(){if(!(r>=l.length)){var v=l.slice(r,Math.min(r+
6,l.length));n(v,r);r+=v.length}}function n(v,y){v.forEach(function(A,E){var F=y+E;E=d.get(A);var H=AG(E[0],["atts_since","attachments"]);H.open_revs=E.map(function(O){return O.rev});H.open_revs=H.open_revs.filter(A1);var J=A1;0===H.open_revs.length&&(delete H.open_revs,J=Yfa);["revs","attachments","binary","ajax","latest"].forEach(function(O){O in e&&(H[O]=e[O])});g.get(A,H,function(O,L){O=O?[{error:O}]:J(L);f[F]={id:A,docs:O};++a===k&&c();h()})})}var b=e.docs,d=new Xq;b.forEach(function(v){d.has(v.id)?
d.get(v.id).push(v):d.set(v.id,[v])});var k=d.size,a=0,f=Array(k),l=[];d.forEach(function(v,y){l.push(y)});var r=0;h()}function Zfa(g){BG&&addEventListener("storage",function(e){g.emit(e.key)})}function MD(){$p.EventEmitter.call(this);this._listeners={};Zfa(this)}function Yr(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var e=Array.prototype.slice.call(arguments,1);console[g].apply(console,e)}}function $fa(g){var e=0;g||(e=2E3);g=parseInt(g,10)||0;e=parseInt(e,10);e=e!==e||e<=
g?(g||1)<<1:e+1;6E5<e&&(g=3E5,e=6E5);return~~((e-g)*Math.random()+g)}function aS(g,e){Yr("info","The above "+g+" is totally normal. "+e)}function Mk(g,e,m){Error.call(this,m);this.status=g;this.name=e;this.message=m;this.error=!0}function Fi(g,e){function m(c){for(var h in g)"function"!==typeof g[h]&&(this[h]=g[h]);void 0!==c&&(this.reason=c)}m.prototype=Mk.prototype;return new m(e)}function ND(g){if("object"!==typeof g){var e=g;g=C1;g.data=e}"error"in g&&"conflict"===g.error&&(g.name="conflict",
g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||(g.message=g.message||g.reason);return g}function bS(g){var e={},m=g.filter&&"function"===typeof g.filter;e.query=g.query_params;return function(c){c.doc||(c.doc={});var h;if(h=m)try{h=!(0,g.filter)(c.doc,e)}catch(b){h=Fi(jL,"Filter function threw: "+b.toString())}if("object"===typeof h)return h;if(h)return!1;if(!g.include_docs)delete c.doc;else if(!g.attachments)for(var n in c.doc._attachments)c.doc._attachments.hasOwnProperty(n)&&
(c.doc._attachments[n].stub=!0);return!0}}function kL(g){for(var e=[],m=0,c=g.length;m<c;m++)e=e.concat(g[m]);return e}function D1(g){var e;g?"string"!==typeof g?e=Fi(E1):/^_/.test(g)&&!/^_(design|local)/.test(g)&&(e=Fi(aga)):e=Fi(bga);if(e)throw e;}function jv(g){return"boolean"===typeof g._remote?g._remote:"function"===typeof g.type?(Yr("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===g.type()):!1}function cS(g){if(!g)return null;var e=g.split("/");return 2===
e.length?e:1===e.length?[g,g]:null}function F1(g){return(g=cS(g))?g.join("/"):null}function G1(g){g=cga.exec(g);for(var e={},m=14;m--;){var c=H1[m],h=g[m]||"",n=-1!==["user","password"].indexOf(c);e[c]=n?decodeURIComponent(h):h}e.queryKey={};e[H1[12]].replace(dga,function(b,d,k){d&&(e.queryKey[d]=k)});return e}function dS(g,e){var m=[],c=[],h;for(h in e)e.hasOwnProperty(h)&&(m.push(h),c.push(e[h]));m.push(g);return Function.apply(null,m).apply(null,c)}function lL(g,e,m){return new Promise(function(c,
h){g.get(e,function(n,b){if(n){if(404!==n.status)return h(n);b={}}n=b._rev;b=m(b);if(!b)return c({updated:!1,rev:n});b._id=e;b._rev=n;c(ega(g,b,m))})})}function ega(g,e,m){return g.put(e).then(function(c){return{updated:!0,rev:c.rev}},function(c){if(409!==c.status)throw c;return lL(g,e._id,m)})}function eS(g,e){g=g||[];e=e||{};try{return new Blob(g,e)}catch(h){if("TypeError"!==h.name)throw h;for(var m=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),c=0;c<g.length;c+=1)m.append(g[c]);return m.getBlob(e.type)}}function fS(g,e){for(var m=g.length,c=new ArrayBuffer(m),h=new Uint8Array(c),n=0;n<m;n++)h[n]=g.charCodeAt(n);return eS([c],{type:e})}function gS(g,e){return fS(atob(g),e)}function I1(g,e){var m=new FileReader,c="function"===typeof m.readAsBinaryString;m.onloadend=function(h){var n=h.target.result||"";if(c)return e(n);h="";n=new Uint8Array(n);for(var b=n.byteLength,d=
0;d<b;d++)h+=String.fromCharCode(n[d]);e(h)};c?m.readAsBinaryString(g):m.readAsArrayBuffer(g)}function J1(g,e){I1(g,function(m){e(m)})}function hS(g,e){J1(g,function(m){e(btoa(m))})}function fga(g,e){var m=new FileReader;m.onloadend=function(c){c=c.target.result||new ArrayBuffer(0);e(c)};m.readAsArrayBuffer(g)}function gga(g,e,m){return g.webkitSlice?g.webkitSlice(e,m):g.slice(e,m)}function hga(g,e,m,c,h){if(0<m||c<e.size)e=gga(e,m,c);fga(e,function(n){g.append(n);h()})}function iga(g,e,m,c,h){if(0<
m||c<e.length)e=e.substring(m,c);g.appendBinary(e);h()}function iS(g,e){function m(){jga(h)}function c(){var r=f.end(!0);r=btoa(r);e(r);f.destroy()}function h(){var r=a*d,v=r+d;a++;a<k?l(f,g,r,v,m):l(f,g,r,v,c)}var n="string"===typeof g,b=n?g.length:g.size,d=Math.min(32768,b),k=Math.ceil(b/d),a=0,f=n?new mL:new mL.ArrayBuffer,l=n?iga:hga;h()}function K1(g,e){g=Zm(g);if(!e)return L1.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return mL.hash(JSON.stringify(g))}function ZA(g){g=g.rev_tree.slice();
for(var e;e=g.pop();){var m=e.ids,c=m[2];e=e.pos;if(c.length){m=0;for(var h=c.length;m<h;m++)g.push({pos:e+1,ids:c[m]})}else if(c=!!m[1].deleted,m=m[0],!n||(d!==c?d:b!==e?b<e:n<m)){var n=m;var b=e;var d=c}}return b+"-"+n}function $A(g,e){g=g.slice();for(var m;m=g.pop();){var c=m.pos,h=m.ids,n=h[2];m=e(0===n.length,c,h[0],m.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)g.push({pos:c+1,ids:n[h],ctx:m})}}function kga(g,e){return g.pos-e.pos}function jS(g){var e=[];$A(g,function(c,h,n,b,d){c&&e.push({rev:h+
"-"+n,pos:h,opts:d})});e.sort(kga).reverse();g=0;for(var m=e.length;g<m;g++)delete e[g].pos;return e}function kS(g){var e=ZA(g);g=jS(g.rev_tree);for(var m=[],c=0,h=g.length;c<h;c++){var n=g[c];n.rev===e||n.opts.deleted||m.push(n.rev)}return m}function lga(g){var e=[];$A(g.rev_tree,function(m,c,h,n,b){"available"!==b.status||m||(e.push(c+"-"+h),b.status="missing")});return e}function M1(g){var e=[];g=g.slice();for(var m;m=g.pop();){var c=m.pos,h=m.ids,n=h[0],b=h[1];h=h[2];var d=0===h.length;m=m.history?
m.history.slice():[];m.push({id:n,opts:b});d&&e.push({pos:c+1-m.length,ids:m});n=0;for(b=h.length;n<b;n++)g.push({pos:c+1,ids:h[n],history:m})}return e.reverse()}function mga(g,e){return g.pos-e.pos}function N1(g,e){for(var m,c,h=g.length;e<h;e++){var n=g[e];n=[n.id,n.opts,[]];c?(c[2].push(n),c=n):m=c=n}return m}function nga(g,e){return g[0]<e[0]?-1:1}function O1(g,e){e=[{tree1:g,tree2:e}];for(var m=!1;0<e.length;){var c=e.pop(),h=c.tree1;c=c.tree2;if(h[1].status||c[1].status)h[1].status="available"===
h[1].status||"available"===c[1].status?"available":"missing";for(var n=0;n<c[2].length;n++)if(h[2][0]){for(var b=!1,d=0;d<h[2].length;d++)h[2][d][0]===c[2][n][0]&&(e.push({tree1:h[2][d],tree2:c[2][n]}),b=!0);if(!b){m="new_branch";b=h[2];d=c[2][n];for(var k,a=b,f=d,l=nga,r=0,v=a.length;r<v;)k=r+v>>>1,0>l(a[k],f)?r=k+1:v=k;b.splice(r,0,d)}}else m="new_leaf",h[2][0]=c[2][n]}return{conflicts:m,tree:g}}function P1(g,e,m){var c=[],h=!1,n=!1;if(!g.length)return{tree:[e],conflicts:"new_leaf"};for(var b=0,
d=g.length;b<d;b++){var k=g[b];if(k.pos===e.pos&&k.ids[0]===e.ids[0])n=O1(k.ids,e.ids),c.push({pos:k.pos,ids:n.tree}),h=h||n.conflicts,n=!0;else if(!0!==m){var a=k.pos<e.pos?k:e,f=k.pos<e.pos?e:k,l=[],r=[];for(r.push({ids:a.ids,diff:f.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===f.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=O1(l.ids,f.ids),l.parent[2][l.parentIdx]=
n.tree,c.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):c.push(k)}else c.push(k)}n||c.push(e);c.sort(mga);return{tree:c,conflicts:h||"internal_node"}}function oga(g,e){g=M1(g);for(var m,c,h=0,n=g.length;h<n;h++){var b=g[h],d=b.ids;if(d.length>e){m||(m={});var k=d.length-e;var a={pos:b.pos+k,ids:N1(d,k)};for(var f=0;f<k;f++)m[b.pos+f+"-"+d[f].id]=!0}else a={pos:b.pos,ids:N1(d,0)};c=c?P1(c,a,!0).tree:[a]}m&&$A(c,function(l,r,v){delete m[r+"-"+v]});return{tree:c,revs:m?Object.keys(m):[]}}function Q1(g,
e,m){g=P1(g,e);m=oga(g.tree,m);return{tree:m.tree,stemmedRevs:m.revs,conflicts:g.conflicts}}function pga(g){return g.ids}function ax(g,e){e||(e=ZA(g));e=e.substring(e.indexOf("-")+1);g=g.rev_tree.map(pga);for(var m;m=g.pop();){if(m[0]===e)return!!m[1].deleted;g=g.concat(m[2])}}function aB(g){return/^_local/.test(g)}function qga(g,e){for(var m=e.rev_tree.slice(),c;c=m.pop();){var h=c.pos,n=c.ids,b=n[0],d=n[1];n=n[2];var k=0===n.length;c=c.history?c.history.slice():[];c.push({id:b,pos:h,opts:d});if(k)for(d=
0,k=c.length;d<k;d++){var a=c[d];if(a.pos+"-"+a.id===g)return h+"-"+b}b=0;for(d=n.length;b<d;b++)m.push({pos:h+1,ids:n[b],history:c})}throw Error("Unable to resolve latest revision for id "+e.id+", rev "+g);}function CG(g,e,m){function c(){h.cancel()}$p.EventEmitter.call(this);var h=this;this.db=g;e=e?Zm(e):{};var n=e.complete=y1(function(d,k){d?(k=h,0<("listenerCount"in k?k.listenerCount("error"):$p.EventEmitter.listenerCount(k,"error"))&&h.emit("error",d)):h.emit("complete",k);h.removeAllListeners();
g.removeListener("destroyed",c)});m&&(h.on("complete",function(d){m(null,d)}),h.on("error",m));g.once("destroyed",c);e.onChange=function(d,k,a){if(!h.isCancelled)try{h.emit("change",d,k,a)}catch(f){Yr("error",'Error in .on("change", function):',f)}};var b=new Promise(function(d,k){e.complete=function(a,f){a?k(a):d(f)}});h.once("cancel",function(){g.removeListener("destroyed",c);e.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=b["catch"].bind(b);this.then(function(d){n(null,
d)},n);g.taskqueue.isReady?h.validateChanges(e):g.taskqueue.addTask(function(d){d?e.complete(d):h.isCancelled?h.emit("cancel"):h.validateChanges(e)})}function rga(g,e,m){var c=[{rev:g._rev}];"all_docs"===m.style&&(c=jS(e.rev_tree).map(function(h){return{rev:h.rev}}));c={id:e.id,changes:c,doc:g};ax(e,g._rev)&&(c.deleted=!0);m.conflicts&&(c.doc._conflicts=kS(e),c.doc._conflicts.length||delete c.doc._conflicts);return c}function lS(g,e){return function(m,c){m||c[0]&&c[0].error?(m=m||c[0],m.docId=e,g(m)):
g(null,c.length?c[0]:c)}}function sga(g){for(var e=0;e<g.length;e++){var m=g[e];if(m._deleted)delete m._attachments;else if(m._attachments)for(var c=Object.keys(m._attachments),h=0;h<c.length;h++){var n=c[h];m._attachments[n]=AG(m._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function tga(g,e){var m=g._id;var c=e._id;m=m<c?-1:m>c?1:0;if(0!==m)return m;g=g._revisions?g._revisions.start:0;e=e._revisions?e._revisions.start:0;return g<e?-1:g>e?1:0}function uga(g){var e={},
m=[];$A(g,function(c,h,n,b){h=h+"-"+n;c&&(e[h]=0);void 0!==b&&m.push({from:b,to:h});return h});m.reverse();m.forEach(function(c){e[c.from]=void 0===e[c.from]?1+e[c.to]:Math.min(e[c.from],1+e[c.to])});return e}function vga(g){var e="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):g.keys;g.keys=e;g.skip=0;delete g.limit;g.descending&&(e.reverse(),g.descending=!1)}function R1(g){var e=g._compactionQueue[0],m=e.opts,c=e.callback;g.get("_local/compaction").catch(function(){return!1}).then(function(h){h&&
h.last_seq&&(m.last_seq=h.last_seq);g._compact(m,function(n,b){n?c(n):c(null,b);kv(function(){g._compactionQueue.shift();g._compactionQueue.length&&R1(g)})})})}function gl(){$p.EventEmitter.call(this);for(var g in gl.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}function DG(){this.failed=this.isReady=!1;this.queue=[]}function wga(g,e){var m=g.match(/([a-z-]*):\/\/(.*)/);if(m)return{name:/https?/.test(m[1])?m[1]+"://"+m[2]:m[2],adapter:m[1]};var c=Ai.adapters,h=Ai.preferredAdapters;
m=Ai.prefix;e=e.adapter;if(!e)for(var n=0;n<h.length;++n)if(e=h[n],"idb"===e&&"websql"in c&&BG&&localStorage["_pouch__websqldb_"+m+g])Yr("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;c=c[e];return{name:(c&&"use_prefix"in c?c.use_prefix:1)?m+g:g,adapter:e}}function xga(g){function e(c){g.removeListener("closed",m);c||g.constructor.emit("destroyed",g.name)}function m(){g.removeListener("destroyed",e);g.constructor.emit("unref",
g)}g.once("destroyed",e);g.once("closed",m);g.constructor.emit("ref",g)}function Ai(g,e){if(!(this instanceof Ai))return new Ai(g,e);var m=this;e=e||{};g&&"object"===typeof g&&(e=g,g=e.name,delete e.name);void 0===e.deterministic_revs&&(e.deterministic_revs=!0);this.__opts=e=Zm(e);m.auto_compaction=e.auto_compaction;m.prefix=Ai.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var c=wga((e.prefix||"")+g,e);e.name=c.name;e.adapter=e.adapter||c.adapter;m.name=g;m._adapter=e.adapter;
Ai.emit("debug",["adapter","Picked adapter: ",e.adapter]);if(!Ai.adapters[e.adapter]||!Ai.adapters[e.adapter].valid())throw Error("Invalid Adapter: "+e.adapter);gl.call(m);m.taskqueue=new DG;m.adapter=e.adapter;Ai.adapters[e.adapter].call(m,e,function(h){if(h)return m.taskqueue.fail(h);xga(m);m.emit("created",m);Ai.emit("created",m.name);m.taskqueue.ready(m)})}function S1(g,e){for(var m=0,c=e.length;m<c&&(g=g[e[m]],g);m++);return g}function T1(g){for(var e=[],m="",c=0,h=g.length;c<h;c++){var n=g[c];
"."===n?0<c&&"\\"===g[c-1]?m=m.substring(0,m.length-1)+".":(e.push(m),m=""):m+=n}e.push(m);return e}function yga(g){return g[Object.keys(g)[0]]}function EG(g){var e={};g.forEach(function(m){Object.keys(m).forEach(function(c){var h=m[c];"object"!==typeof h&&(h={$eq:h});if(-1<U1.indexOf(c))e[c]=h instanceof Array?h.map(function(b){return EG([b])}):EG([h]);else{var n=e[c]=e[c]||{};Object.keys(h).forEach(function(b){var d=h[b];"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?
"$gte"===b?d>n.$gte&&(n.$gte=d):d>=n.$gte&&(delete n.$gte,n.$gt=d):"undefined"!==typeof n.$gt?"$gte"===b?d>n.$gt&&(delete n.$gt,n.$gte=d):d>n.$gt&&(n.$gt=d):n[b]=d):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?d<n.$lte&&(n.$lte=d):d<=n.$lte&&(delete n.$lte,n.$lt=d):"undefined"!==typeof n.$lt?"$lte"===b?d<n.$lt&&(delete n.$lt,n.$lte=d):d<n.$lt&&(n.$lt=d):n[b]=d):"$ne"===b?"$ne"in n?n.$ne.push(d):n.$ne=[d]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,
delete n.$lte,delete n.$ne,n.$eq=d):n[b]=d})}})});return e}function V1(g){for(var e in g){if(Array.isArray(g))for(var m in g)g[m].$and&&(g[m]=EG(g[m].$and));var c=g[e];"object"===typeof c&&V1(c)}return g}function W1(g,e){for(var m in g){"$and"===m&&(e=!0);var c=g[m];"object"===typeof c&&(e=W1(c,e))}return e}function zga(g){var e=Zm(g);g=!1;W1(e,!1)&&(e=V1(e),"$and"in e&&(e=EG(e.$and)),g=!0);["$or","$nor"].forEach(function(b){b in e&&e[b].forEach(function(d){for(var k=Object.keys(d),a=0;a<k.length;a++){var f=
k[a],l=d[f];if("object"!==typeof l||null===l)d[f]={$eq:l}}})});"$not"in e&&(e.$not=EG([e.$not]));for(var m=Object.keys(e),c=0;c<m.length;c++){var h=m[c],n=e[h];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!g&&(n.$ne=[n.$ne]);e[h]=n}return e}function An(g,e){if(g===e)return 0;g=bB(g);e=bB(e);var m=mS(g),c=mS(e);if(0!==m-c)return m-c;switch(typeof g){case "number":return g-e;case "boolean":return g<e?-1:1;case "string":return g===e?0:g>e?1:-1}if(Array.isArray(g))a:{m=Math.min(g.length,e.length);
for(c=0;c<m;c++){var h=An(g[c],e[c]);if(0!==h){g=h;break a}}g=g.length===e.length?0:g.length>e.length?1:-1}else a:{m=Object.keys(g);c=Object.keys(e);h=Math.min(m.length,c.length);for(var n=0;n<h;n++){var b=An(m[n],c[n]);if(0!==b){g=b;break a}b=An(g[m[n]],e[c[n]]);if(0!==b){g=b;break a}}g=m.length===c.length?0:m.length>c.length?1:-1}return g}function bB(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||-Infinity===g||isNaN(g))return null;break;case "object":var e=g;if(Array.isArray(g)){var m=
g.length;g=Array(m);for(var c=0;c<m;c++)g[c]=bB(e[c])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(m in g={},e)e.hasOwnProperty(m)&&(c=e[m],"undefined"!==typeof c&&(g[m]=bB(c)))}}return g}function Aga(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;case "number":if(0===g)g="1";else{var e=g.toExponential().split(/e\+?/),m=parseInt(e[1],10);g=0>g;m=((g?-m:m)- -324).toString();for(var c="",h=3-m.length;c.length<h;)c+="0";m=(g?"0":"2")+(""+(c+m));e=Math.abs(parseFloat(e[0]));
g&&(e=10-e);g=e.toFixed(20);g=g.replace(/\.?0+$/,"");g=m+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(g);e=n?g:Object.keys(g);m=-1;c=e.length;h="";if(n)for(;++m<c;)h+=qt(e[m]);else for(;++m<c;)n=e[m],h+=qt(n)+qt(g[n]);return h}return""}function qt(g){g=bB(g);return mS(g)+""+Aga(g)+"\x00"}function mS(g){var e=["boolean","number","string","object"].indexOf(typeof g);if(~e)return null===
g?1:Array.isArray(g)?5:3>e?e+2:e+3;if(Array.isArray(g))return 5}function Bga(g){function e(m){return g.map(function(c){c=Object.keys(c)[0];c=T1(c);return S1(m,c)})}return function(m,c){var h=e(m.doc),n=e(c.doc);h=An(h,n);if(0!==h)return h;m=m.doc._id;c=c.doc._id;return m<c?-1:m>c?1:0}}function Cga(g,e,m){g=g.filter(function(h){return OD(h.doc,e.selector,m)});if(e.sort){var c=Bga(e.sort);g=g.sort(c);"string"!==typeof e.sort[0]&&"desc"===yga(e.sort[0])&&(g=g.reverse())}if("limit"in e||"skip"in e)c=
e.skip||0,g=g.slice(c,("limit"in e?e.limit:g.length)+c);return g}function OD(g,e,m){return m.every(function(c){var h=e[c],n=T1(c),b=S1(g,n);return-1<U1.indexOf(c)?Dga(c,h,g):nS(h,g,n,b)})}function nS(g,e,m,c){return g?"object"===typeof g?Object.keys(g).every(function(h){var n=g[h];if(!X1[h])throw Error('unknown operator "'+h+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return X1[h](e,n,m,c)}):g===c:!0}function Dga(g,
e,m){return"$or"===g?e.some(function(c){return OD(m,c,Object.keys(c))}):"$not"===g?!OD(m,e,Object.keys(e)):!e.find(function(c){return OD(m,c,Object.keys(c))})}function FG(g){return"undefined"!==typeof g&&null!==g}function cB(g){return"undefined"!==typeof g}function Y1(g,e){return e.some(function(m){return g instanceof Array?-1<g.indexOf(m):g===m})}function Ega(g,e){return e.every(function(m){return-1<g.indexOf(m)})}function Fga(g,e){switch(e){case "null":return null===g;case "boolean":return"boolean"===
typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"==={}.toString.call(g)}throw Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function Gga(g,e){if(g.selector&&g.filter&&"_selector"!==g.filter)return e(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));e()}function Hga(g){g.view&&!g.filter&&
(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=F1(g.view):g.filter=F1(g.filter))}function Iga(g,e){return e.filter&&"string"===typeof e.filter&&!e.doc_ids&&!jv(g.db)}function Jga(g,e){var m=e.complete;if("_view"===e.filter){if(!e.view||"string"!==typeof e.view){var c=Fi(jL,"`view` filter parameter not found or invalid.");return m(c)}var h=cS(e.view);g.db.get("_design/"+h[0],function(b,d){if(g.isCancelled)return m(null,
{status:"cancelled"});if(b)return m(ND(b));b=d&&d.views&&d.views[h[1]]&&d.views[h[1]].map;if(!b)return m(Fi(rt,d.views?"missing json key: "+h[1]:"missing json key: views"));d=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=dS(d,{});e.filter=d;g.doChanges(e)})}else if(e.selector)e.filter=function(b){var d=e.selector;if("object"!==
typeof d)throw Error("Selector error: expected a JSON object");d=zga(d);return(b=Cga([{doc:b}],{selector:d},Object.keys(d)))&&1===b.length},g.doChanges(e);else{var n=cS(e.filter);g.db.get("_design/"+n[0],function(b,d){if(g.isCancelled)return m(null,{status:"cancelled"});if(b)return m(ND(b));b=d&&d.filters&&d.filters[n[1]];if(!b)return m(Fi(rt,d&&d.filters?"missing json key: "+n[1]:"missing json key: filters"));e.filter=dS('"use strict";\nreturn '+b+";",{});g.doChanges(e)})}}function Z1(g){return g.reduce(function(e,
m){e[m]=!0;return e},{})}function $1(g){if(!/^\d+-/.test(g))return Fi(a2);var e=g.indexOf("-"),m=g.substring(0,e);g=g.substring(e+1);return{prefix:parseInt(m,10),id:g}}function b2(g,e,m){m||(m={deterministic_revs:!0});var c={status:"available"};g._deleted&&(c.deleted=!0);if(e){g._id||(g._id=nL());var h=K1(g,m.deterministic_revs);if(g._rev){e=$1(g._rev);if(e.error)return e;g._rev_tree=[{pos:e.prefix,ids:[e.id,{status:"missing"},[[h,c,[]]]]}];var n=e.prefix+1}else g._rev_tree=[{pos:1,ids:[h,c,[]]}],
n=1}else{if(g._revisions){h=g._revisions;n=h.start-h.ids.length+1;h=h.ids;e=[h[0],c,[]];m=1;for(var b=h.length;m<b;m++)e=[h[m],{status:"missing"},[e]];g._rev_tree=[{pos:n,ids:e}];n=g._revisions.start;h=g._revisions.ids[0]}if(!g._rev_tree){e=$1(g._rev);if(e.error)return e;n=e.prefix;h=e.id;g._rev_tree=[{pos:n,ids:[h,c,[]]}]}}D1(g._id);g._rev=n+"-"+h;c={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!Kga[d])throw g=Fi(c2,d),g.message=c2.message+
": "+d,g;n&&!Lga[d]?c.metadata[d.slice(1)]=g[d]:c.data[d]=g[d]}return c}function Mga(g,e,m){try{var c=atob(g.data)}catch(h){c={error:Fi(d2,"Attachment is not a valid base64 string")}}if(c.error)return m(c.error);g.length=c.length;g.data="blob"===e?fS(c,g.content_type):"base64"===e?btoa(c):c;iS(c,function(h){g.digest="md5-"+h;m()})}function Nga(g,e,m){iS(g.data,function(c){g.digest="md5-"+c;g.length=g.data.size||g.data.length||0;"binary"===e?J1(g.data,function(h){g.data=h;m()}):"base64"===e?hS(g.data,
function(h){g.data=h;m()}):m()})}function Oga(g,e,m){if(g.stub)return m();"string"===typeof g.data?Mga(g,e,m):Nga(g,e,m)}function Pga(g,e,m){function c(){h++;g.length===h&&(n?m(n):m())}if(!g.length)return m();var h=0,n;g.forEach(function(b){function d(l){n=l;a++;a===k.length&&c()}var k=b.data&&b.data._attachments?Object.keys(b.data._attachments):[],a=0;if(!k.length)return c();for(var f in b.data._attachments)b.data._attachments.hasOwnProperty(f)&&Oga(b.data._attachments[f],e,d)})}function Qga(g,e,
m,c,h,n,b,d,k){g=g||1E3;var a=d.new_edits,f=new Xq,l=0,r=e.length;e.forEach(function(v,y){if(v._id&&aB(v._id))m[v._deleted?"_removeLocal":"_putLocal"](v,{ctx:h},function(E,F){n[y]=E||F;++l===r&&k&&k()});else{var A=v.metadata.id;f.has(A)?(r--,f.get(A).push([v,y])):f.set(A,[[v,y]])}});f.forEach(function(v,y){function A(){++F<v.length?E():++l===r&&k&&k()}function E(){var H=v[F],J=H[0];H=H[1];if(c.has(y)){var O=g,L=c.get(y);b:{var Y=J.metadata.rev;var S=L.rev_tree.slice();var ea=Y.split("-");Y=parseInt(ea[0],
10);ea=ea[1];for(var qa;qa=S.pop();){if(qa.pos===Y&&qa.ids[0]===ea){S=!0;break b}for(var Fa=qa.ids[2],K=0,Z=Fa.length;K<Z;K++)S.push({pos:qa.pos+1,ids:Fa[K]})}S=!1}S&&!a?(n[H]=J,A()):(ea=L.winningRev||ZA(L),S="deleted"in L?L.deleted:ax(L,ea),Y="deleted"in J.metadata?J.metadata.deleted:ax(J.metadata),qa=/^1-/.test(J.metadata.rev),S&&!Y&&a&&qa&&(qa=J.data,qa._rev=ea,qa._id=J.metadata.id,J=b2(qa,a)),ea=Q1(L.rev_tree,J.metadata.rev_tree[0],O),a&&(S&&Y&&"new_leaf"!==ea.conflicts||!S&&"new_leaf"!==ea.conflicts||
S&&!Y&&"new_branch"===ea.conflicts)?(J=Fi(PD),n[H]=J,A()):(O=J.metadata.rev,J.metadata.rev_tree=ea.tree,J.stemmedRevs=ea.stemmedRevs||[],L.rev_map&&(J.metadata.rev_map=L.rev_map),L=ZA(J.metadata),Y=ax(J.metadata,L),S=S===Y?0:S<Y?-1:1,O=O===L?Y:ax(J.metadata,O),b(J,L,Y,O,!0,S,H,A)))}else L=Q1([],J.metadata.rev_tree[0],g),J.metadata.rev_tree=L.tree,J.stemmedRevs=L.stemmedRevs||[],L=ZA(J.metadata),O=ax(J.metadata,L),"was_delete"in d&&O?(n[H]=Fi(rt,"deleted"),A()):a&&"missing"===J.metadata.rev_tree[0].ids[1].status?
(J=Fi(PD),n[H]=J,A()):b(J,L,O,O,!1,O?0:1,H,A)}var F=0;E()})}function lv(g){return function(e){var m="unknown_error";e.target&&e.target.error&&(m=e.target.error.name||e.target.error.message);g(Fi(oS,m,e.type))}}function pS(g,e,m){try{var c=JSON.stringify(g)}catch(h){c=e2.stringify(g)}return{data:c,winningRev:e,deletedOrLocal:m?"1":"0",seq:g.seq,id:g.id}}function dB(g){if(!g)return null;var e=g.data;try{var m=JSON.parse(e)}catch(c){m=e2.parse(e)}m.winningRev=g.winningRev;m.deleted="1"===g.deletedOrLocal;
m.seq=g.seq;return m}function oL(g){if(!g)return g;var e=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,e-1);g._rev=g._doc_id_rev.substring(e+1);delete g._doc_id_rev;return g}function f2(g,e,m,c){m?g?"string"!==typeof g?c(g):c(gS(g,e)):c(eS([""],{type:e})):g?"string"!==typeof g?I1(g,function(h){c(btoa(h))}):c(g):c("")}function g2(g,e,m,c){function h(d,k){var a=d._attachments[k];d=a.digest;m.objectStore("attach-store").get(d).onsuccess=function(f){a.body=f.target.result.body;++b===
n.length&&c&&c()}}var n=Object.keys(g._attachments||{});if(!n.length)return c&&c();var b=0;n.forEach(function(d){e.attachments&&e.include_docs?h(g,d):(g._attachments[d].stub=!0,++b===n.length&&c&&c())})}function qS(g,e){return Promise.all(g.map(function(m){if(m.doc&&m.doc._attachments){var c=Object.keys(m.doc._attachments);return Promise.all(c.map(function(h){var n=m.doc._attachments[h];if("body"in n){var b=n.body,d=n.content_type;return new Promise(function(k){f2(b,d,e,function(a){m.doc._attachments[h]=
QD(AG(n,["digest","content_type"]),{data:a});k()})})}}))}}))}function h2(g,e,m){function c(){h.length&&h.forEach(function(a){d.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(f){f.target.result||b.delete(a)}})}var h=[],n=m.objectStore("by-sequence"),b=m.objectStore("attach-store"),d=m.objectStore("attach-seq-store"),k=g.length;g.forEach(function(a){n.index("_doc_id_rev").getKey(e+"::"+a).onsuccess=function(f){f=f.target.result;"number"!==typeof f?(k--,k||
c()):(n.delete(f),d.index("seq").openCursor(IDBKeyRange.only(f)).onsuccess=function(l){if(l=l.target.result){var r=l.value.digestSeq.split("::")[0];h.push(r);d.delete(l.primaryKey);l.continue()}else k--,k||c()})}})}function st(g,e,m){try{return{txn:g.transaction(e,m)}}catch(c){return{error:c}}}function Rga(g,e,m,c,h,n){function b(){var ob=st(h,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(ob.error)return n(ob.error);O=ob.txn;O.onabort=
lv(n);O.ontimeout=lv(n);O.oncomplete=l;L=O.objectStore("document-store");Y=O.objectStore("by-sequence");S=O.objectStore("attach-store");ea=O.objectStore("attach-seq-store");qa=O.objectStore("meta-store");qa.get("meta-store").onsuccess=function(pa){K=pa.target.result;a()};v(function(pa){if(pa)return jb=!0,n(pa);f()})}function d(){U=!0;a()}function k(){Qga(g.revs_limit,J,c,xa,O,aa,y,m,d)}function a(){K&&U&&(K.docCount+=na,qa.put(K))}function f(){function ob(Fb){(Fb=dB(Fb.target.result))&&xa.set(Fb.id,
Fb);++pa===J.length&&k()}if(J.length)for(var pa=0,ka=0,wa=J.length;ka<wa;ka++){var Ka=J[ka];Ka._id&&aB(Ka._id)?++pa===J.length&&k():L.get(Ka.metadata.id).onsuccess=ob}}function l(){jb||(GG.notify(c._meta.name),n(null,aa))}function r(ob,pa){S.get(ob).onsuccess=function(ka){ka.target.result?pa():(ka=Fi(Sga,"unknown stub attachment with digest "+ob),ka.status=412,pa(ka))}}function v(ob){var pa=[];J.forEach(function(Ka){Ka.data&&Ka.data._attachments&&Object.keys(Ka.data._attachments).forEach(function(Fb){Fb=
Ka.data._attachments[Fb];Fb.stub&&pa.push(Fb.digest)})});if(!pa.length)return ob();var ka=0,wa;pa.forEach(function(Ka){r(Ka,function(Fb){Fb&&!wa&&(wa=Fb);++ka===pa.length&&ob(wa)})})}function y(ob,pa,ka,wa,Ka,Fb,hc,Ub){ob.metadata.winningRev=pa;ob.metadata.deleted=ka;var ac=ob.data;ac._id=ob.metadata.id;ac._rev=ob.metadata.rev;wa&&(ac._deleted=!0);if(ac._attachments&&Object.keys(ac._attachments).length)return E(ob,pa,ka,Ka,hc,Ub);na+=Fb;a();A(ob,pa,ka,Ka,hc,Ub)}function A(ob,pa,ka,wa,Ka,Fb){function hc(ed){var Bd=
ob.stemmedRevs||[];wa&&c.auto_compaction&&(Bd=Bd.concat(lga(ob.metadata)));Bd&&Bd.length&&h2(Bd,ob.metadata.id,O);Ic.seq=ed.target.result;ed=pS(Ic,pa,ka);L.put(ed).onsuccess=Ub}function Ub(){aa[Ka]={ok:!0,id:Ic.id,rev:Ic.rev};xa.set(ob.metadata.id,ob.metadata);F(ob,Ic.seq,Fb)}var ac=ob.data,Ic=ob.metadata;ac._doc_id_rev=Ic.id+"::"+Ic.rev;delete ac._id;delete ac._rev;var Mb=Y.put(ac);Mb.onsuccess=hc;Mb.onerror=function(ed){ed.preventDefault();ed.stopPropagation();Y.index("_doc_id_rev").getKey(ac._doc_id_rev).onsuccess=
function(Bd){Y.put(ac,Bd.target.result).onsuccess=hc}}}function E(ob,pa,ka,wa,Ka,Fb){function hc(){ac===Ic.length&&A(ob,pa,ka,wa,Ka,Fb)}function Ub(){ac++;hc()}var ac=0,Ic=Object.keys(ob.data._attachments);Ic.forEach(function(Mb){Mb=ob.data._attachments[Mb];if(Mb.stub)ac++,hc();else{var ed=Mb.data;delete Mb.data;Mb.revpos=parseInt(pa,10);H(Mb.digest,ed,Ub)}})}function F(ob,pa,ka){function wa(){++Fb===hc.length&&ka()}function Ka(ac){ac=ea.put({seq:pa,digestSeq:ob.data._attachments[ac].digest+"::"+
pa});ac.onsuccess=wa;ac.onerror=function(Ic){Ic.preventDefault();Ic.stopPropagation();wa()}}var Fb=0,hc=Object.keys(ob.data._attachments||{});if(!hc.length)return ka();for(var Ub=0;Ub<hc.length;Ub++)Ka(hc[Ub])}function H(ob,pa,ka){S.count(ob).onsuccess=function(wa){if(wa.target.result)return ka();S.put({digest:ob,body:pa}).onsuccess=ka}}var J=e.docs,O,L,Y,S,ea,qa,Fa,K;e=0;for(var Z=J.length;e<Z;e++){var R=J[e];R._id&&aB(R._id)||(R=J[e]=b2(R,m.new_edits,g),R.error&&!Fa&&(Fa=R))}if(Fa)return n(Fa);
var U=!1,na=0,aa=Array(J.length),xa=new Xq,jb=!1;Pga(J,c._meta.blobSupport?"blob":"base64",function(ob){if(ob)return n(ob);b()})}function i2(g,e,m,c,h){function n(r){f=r.target.result;a&&h(a,f,l)}function b(r){a=r.target.result;f&&h(a,f,l)}function d(){if(!a.length)return h();var r=a[a.length-1];if(e&&e.upper)try{var v=IDBKeyRange.bound(r,e.upper,!0,e.upperOpen)}catch(y){if("DataError"===y.name&&0===y.code)return h()}else v=IDBKeyRange.lowerBound(r,!0);e=v;f=a=null;g.getAll(e,c).onsuccess=n;g.getAllKeys(e,
c).onsuccess=b}function k(r){r=r.target.result;if(!r)return h();h([r.key],[r.value],r)}-1===c&&(c=1E3);var a,f;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<c&&!m){var l={"continue":d};g.getAll(e,c).onsuccess=n;g.getAllKeys(e,c).onsuccess=b}else m?g.openCursor(e,"prev").onsuccess=k:g.openCursor(e).onsuccess=k}function Tga(g,e,m){if("function"===typeof g.getAll)g.getAll(e).onsuccess=m;else{var c=[];g.openCursor(e).onsuccess=function(h){(h=h.target.result)?(c.push(h.value),h.continue()):
m({target:{result:c}})}}}function Uga(g,e,m){var c=Array(g.length),h=0;g.forEach(function(n,b){e.get(n).onsuccess=function(d){c[b]=d.target.result?d.target.result:{key:n,error:"not_found"};h++;h===g.length&&m(g,c,{})}})}function Vga(g,e,m,c,h){try{if(g&&e)return h?IDBKeyRange.bound(e,g,!m,!1):IDBKeyRange.bound(g,e,!1,!m);if(g)return h?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(e)return h?IDBKeyRange.lowerBound(e,!m):IDBKeyRange.upperBound(e,!m);if(c)return IDBKeyRange.only(c)}catch(n){return{error:n}}return null}
function Wga(g,e,m){function c(S,ea){S.openCursor(null,"prev").onsuccess=function(qa){qa=qa.target.result;var Fa=void 0;qa&&qa.key&&(Fa=qa.key);return ea({target:{result:[Fa]}})}}function h(S,ea,qa){J.get(S.id+"::"+qa).onsuccess=function(Fa){ea.doc=oL(Fa.target.result)||{};g.conflicts&&(Fa=kS(S),Fa.length&&(ea.doc._conflicts=Fa));g2(ea.doc,g,H)}}function n(S){for(var ea=0,qa=S.length;ea<qa&&O.length!==y;ea++){var Fa=S[ea];if(Fa.error&&r)O.push(Fa);else{var K=dB(Fa);Fa=K.winningRev;var Z={id:K.id,
key:K.id,value:{rev:Fa}};K.deleted?r&&(O.push(Z),Z.value.deleted=!0,Z.doc=null):0>=v--&&(O.push(Z),g.include_docs&&h(K,Z,Fa))}}}function b(S,ea,qa){qa&&(n(ea),O.length<y&&qa.continue())}function d(S){S=S.target.result;g.descending&&(S=S.reverse());n(S)}function k(){var S={total_rows:L,offset:g.skip,rows:O};g.update_seq&&void 0!==Y&&(S.update_seq=Y);m(null,S)}var a="startkey"in g?g.startkey:!1,f="endkey"in g?g.endkey:!1,l="key"in g?g.key:!1,r="keys"in g?g.keys:!1,v=g.skip||0,y="number"===typeof g.limit?
g.limit:-1,A=!1!==g.inclusive_end,E,F;if(!r&&(F=(E=Vga(a,f,A,l,g.descending))&&E.error)&&("DataError"!==F.name||0!==F.code))return m(Fi(oS,F.name,F.message));a=["document-store","by-sequence","meta-store"];g.attachments&&a.push("attach-store");e=st(e,a,"readonly");if(e.error)return m(e.error);var H=e.txn;H.oncomplete=function(){g.attachments?qS(O,g.binary).then(k):k()};H.onabort=lv(m);e=H.objectStore("document-store");a=H.objectStore("by-sequence");f=H.objectStore("meta-store");var J=a.index("_doc_id_rev"),
O=[],L,Y;f.get("meta-store").onsuccess=function(S){L=S.target.result.docCount};g.update_seq&&c(a,function(S){S.target.result&&0<S.target.result.length&&(Y=S.target.result[0])});if(!F&&0!==y){if(r)return Uga(g.keys,e,b);if(-1===y)return Tga(e,E,d);i2(e,E,g.descending,y+v,b)}}function Xga(g){return(new Promise(function(e){var m=eS([""]);m=g.objectStore("detect-blob-support").put(m,"key");m.onsuccess=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),h=navigator.userAgent.match(/Edge\//);e(h||
!c||43<=parseInt(c[1],10))};m.onerror=g.onabort=function(c){c.preventDefault();c.stopPropagation();e(!1)}})).catch(function(){return!1})}function Yga(g,e){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(m){e(m.target.result)}}function Zga(g,e,m,c){try{g(e,m)}catch(h){c.emit("error",h)}}function j2(){!rS&&sS.length&&(rS=!0,sS.shift()())}function $ga(g,e,m){sS.push(function(){g(function(c,h){Zga(e,c,h,m);rS=!1;kv(function(){j2()})})});j2()}function aha(g,
e,m,c){function h(H,J,O,L){if(O.seq!==J)return L();if(O.winningRev===H._rev)return L(O,H);F.get(H._id+"::"+O.winningRev).onsuccess=function(Y){L(O,oL(Y.target.result))}}function n(H,J,O){if(k&&!k.has(H._id))return O();var L=y.get(H._id);if(L)return h(H,J,L,O);E.get(H._id).onsuccess=function(Y){L=dB(Y.target.result);y.set(H._id,L);h(H,J,L,O)}}function b(){g.complete(null,{results:l,last_seq:a})}g=Zm(g);if(g.continuous){var d=m+":"+nL();GG.addListener(m,d,e,g);GG.notify(m);return{cancel:function(){GG.removeListener(m,
d)}}}var k=g.doc_ids&&new HG(g.doc_ids);g.since=g.since||0;var a=g.since,f="limit"in g?g.limit:-1;0===f&&(f=1);var l=[],r=0,v=bS(g),y=new Xq;e=["document-store","by-sequence"];g.attachments&&e.push("attach-store");c=st(c,e,"readonly");if(c.error)return g.complete(c.error);var A=c.txn;A.onabort=lv(g.complete);A.oncomplete=function(){!g.continuous&&g.attachments?qS(l).then(b):b()};c=A.objectStore("by-sequence");var E=A.objectStore("document-store");var F=c.index("_doc_id_rev");e=g.since&&!g.descending?
IDBKeyRange.lowerBound(g.since,!0):null;i2(c,e,g.descending,f,function(H,J,O){function L(Fa,K){var Z=g.processChange(K,Fa,g);a=Z.seq=Fa.seq;Fa=v(Z);if("object"===typeof Fa)return Promise.reject(Fa);if(!Fa)return Promise.resolve();r++;g.return_docs&&l.push(Z);return g.attachments&&g.include_docs?new Promise(function(R){g2(K,g,A,function(){qS([Z],g.binary).then(function(){R(Z)})})}):Promise.resolve(Z)}function Y(){for(var Fa=[],K=0,Z=S.length;K<Z&&r!==f;K++){var R=S[K];R&&Fa.push(L(ea[K],R))}Promise.all(Fa).then(function(U){for(var na=
0,aa=U.length;na<aa;na++)if(U[na])g.onChange(U[na])}).catch(g.complete);r!==f&&O.continue()}if(O&&H.length){var S=Array(H.length),ea=Array(H.length),qa=0;J.forEach(function(Fa,K){Fa=oL(Fa);n(Fa,H[K],function(Z,R){ea[K]=Z;S[K]=R;++qa===H.length&&Y()})})}})}function k2(g,e){var m=this;$ga(function(c){bha(m,g,c)},e,m.constructor)}function bha(g,e,m){function c(r){var v=r.createObjectStore("document-store",{keyPath:"id"});r.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev",
"_doc_id_rev",{unique:!0});r.createObjectStore("attach-store",{keyPath:"digest"});r.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});r.createObjectStore("detect-blob-support");v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});r.createObjectStore("local-store",{keyPath:"_id"});r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function h(r,v){var y=r.objectStore("document-store");y.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});y.openCursor().onsuccess=function(A){if(A=A.target.result){var E=A.value,F=ax(E);E.deletedOrLocal=F?"1":"0";y.put(E);A.continue()}else v()}}function n(r,v){var y=r.objectStore("local-store"),A=r.objectStore("document-store"),E=r.objectStore("by-sequence");A.openCursor().onsuccess=function(F){var H=F.target.result;if(H){var J=H.value;F=J.id;var O=aB(F);J=ZA(J);if(O){var L=F+"::"+J;O=F+"::";J=F+"::~";F=E.index("_doc_id_rev");O=IDBKeyRange.bound(O,J,!1,!1);var Y=F.openCursor(O);
Y.onsuccess=function(S){(Y=S.target.result)?(S=Y.value,S._doc_id_rev===L&&y.put(S),E.delete(Y.primaryKey),Y.continue()):(A.delete(H.primaryKey),H.continue())}}else H.continue()}else v&&v()}}function b(r){r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function d(r,v){var y=r.objectStore("by-sequence"),A=r.objectStore("attach-store"),E=r.objectStore("attach-seq-store");A.count().onsuccess=function(F){if(!F.target.result)return v();
y.openCursor().onsuccess=function(H){H=H.target.result;if(!H)return v();for(var J=H.value,O=H.primaryKey,L=Object.keys(J._attachments||{}),Y={},S=0;S<L.length;S++)Y[J._attachments[L[S]].digest]=!0;J=Object.keys(Y);for(S=0;S<J.length;S++)E.put({seq:O,digestSeq:J[S]+"::"+O});H.continue()}}}function k(r){function v(E){return E.data?dB(E):(E.deleted="1"===E.deletedOrLocal,E)}var y=r.objectStore("by-sequence"),A=r.objectStore("document-store");A.openCursor().onsuccess=function(E){function F(){var O=pS(J,
J.winningRev,J.deleted);A.put(O).onsuccess=function(){H.continue()}}var H=E.target.result;if(H){var J=v(H.value);J.winningRev=J.winningRev||ZA(J);if(J.seq)return F();(function(){var O=J.id+"::",L=J.id+"::\uffff",Y=0;y.index("_doc_id_rev").openCursor(IDBKeyRange.bound(O,L)).onsuccess=function(S){S=S.target.result;if(!S)return J.seq=Y,F();var ea=S.primaryKey;ea>Y&&(Y=ea);S.continue()}})()}}}var a=e.name,f=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=z1(function(r){r(null,g._meta.instanceId)});
g._bulkDocs=function(r,v,y){Rga(e,r,v,g,f,y)};g._get=function(r,v,y){function A(){y(H,{doc:E,metadata:F,ctx:J})}var E,F,H,J=v.ctx;if(!J){var O=st(f,["document-store","by-sequence","attach-store"],"readonly");if(O.error)return y(O.error);J=O.txn}J.objectStore("document-store").get(r).onsuccess=function(L){F=dB(L.target.result);if(!F)return H=Fi(rt,"missing"),A();if(v.rev)var Y=v.latest?qga(v.rev,F):v.rev;else if(Y=F.winningRev,ax(F))return H=Fi(rt,"deleted"),A();L=J.objectStore("by-sequence");Y=F.id+
"::"+Y;L.index("_doc_id_rev").get(Y).onsuccess=function(S){(E=S.target.result)&&(E=oL(E));if(!E)return H=Fi(rt,"missing"),A();A()}}};g._getAttachment=function(r,v,y,A,E){if(A.ctx)r=A.ctx;else{r=st(f,["document-store","by-sequence","attach-store"],"readonly");if(r.error)return E(r.error);r=r.txn}v=y.digest;var F=y.content_type;r.objectStore("attach-store").get(v).onsuccess=function(H){f2(H.target.result.body,F,A.binary,function(J){E(null,J)})}};g._info=function(r){var v,y,A=st(f,["meta-store","by-sequence"],
"readonly");if(A.error)return r(A.error);A=A.txn;A.objectStore("meta-store").get("meta-store").onsuccess=function(E){y=E.target.result.docCount};A.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(E){v=(E=E.target.result)?E.key:0};A.oncomplete=function(){r(null,{doc_count:y,update_seq:v,idb_attachment_format:g._meta.blobSupport?"binary":"base64"})}};g._allDocs=function(r,v){Wga(r,f,v)};g._changes=function(r){return aha(r,g,a,f)};g._close=function(r){f.close();RD.delete(a);r()};
g._getRevisionTree=function(r,v){var y=st(f,["document-store"],"readonly");if(y.error)return v(y.error);y.txn.objectStore("document-store").get(r).onsuccess=function(A){(A=dB(A.target.result))?v(null,A.rev_tree):v(Fi(rt))}};g._doCompaction=function(r,v,y){var A=st(f,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(A.error)return y(A.error);var E=A.txn;E.objectStore("document-store").get(r).onsuccess=function(F){F=dB(F.target.result);$A(F.rev_tree,function(O,L,Y,S,
ea){-1!==v.indexOf(L+"-"+Y)&&(ea.status="missing")});h2(v,r,E);var H=F.winningRev,J=F.deleted;E.objectStore("document-store").put(pS(F,H,J))};E.onabort=lv(y);E.oncomplete=function(){y()}};g._getLocal=function(r,v){var y=st(f,["local-store"],"readonly");if(y.error)return v(y.error);r=y.txn.objectStore("local-store").get(r);r.onerror=lv(v);r.onsuccess=function(A){(A=A.target.result)?(delete A._doc_id_rev,v(null,A)):v(Fi(rt))}};g._putLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});delete r._revisions;
var A=r._rev,E=r._id;r._rev=A?"0-"+(parseInt(A.split("-")[1],10)+1):"0-1";var F=v.ctx,H;if(!F){F=st(f,["local-store"],"readwrite");if(F.error)return y(F.error);F=F.txn;F.onerror=lv(y);F.oncomplete=function(){H&&y(null,H)}}var J=F.objectStore("local-store");A?(E=J.get(E),E.onsuccess=function(O){(O=O.target.result)&&O._rev===A?J.put(r).onsuccess=function(){H={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,H)}:y(Fi(PD))}):(E=J.add(r),E.onerror=function(O){y(Fi(PD));O.preventDefault();O.stopPropagation()},
E.onsuccess=function(){H={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,H)})};g._removeLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});var A=v.ctx;if(!A){A=st(f,["local-store"],"readwrite");if(A.error)return y(A.error);A=A.txn;A.oncomplete=function(){E&&y(null,E)}}var E,F=r._id,H=A.objectStore("local-store");A=H.get(F);A.onerror=lv(y);A.onsuccess=function(J){(J=J.target.result)&&J._rev===r._rev?(H.delete(F),E={ok:!0,id:F,rev:"0-0"},v.ctx&&y(null,E)):y(Fi(rt))}};g._destroy=function(r,v){GG.removeAllListeners(a);
(r=tS.get(a))&&r.result&&(r.result.close(),RD.delete(a));r=indexedDB.deleteDatabase(a);r.onsuccess=function(){tS.delete(a);BG&&a in localStorage&&delete localStorage[a];v(null,{ok:!0})};r.onerror=lv(v)};var l=RD.get(a);if(l)return f=l.idb,g._meta=l.global,kv(function(){m(null,g)});l=indexedDB.open(a,5);tS.set(a,l);l.onupgradeneeded=function(r){function v(){var H=E[F-1];F++;H&&H(A,v)}var y=r.target.result;if(1>r.oldVersion)return c(y);var A=r.currentTarget.transaction;3>r.oldVersion&&y.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>r.oldVersion&&b(y);var E=[h,n,d,k],F=r.oldVersion;v()};l.onsuccess=function(r){function v(){"undefined"!==typeof J&&E&&(g._meta={name:a,instanceId:O,blobSupport:J},RD.set(a,{idb:f,global:g._meta}),m(null,g))}function y(){if("undefined"!==typeof H&&"undefined"!==typeof F){var L=a+"_id";L in F?O=F[L]:F[L]=O=nL();F.docCount=H;A.objectStore("meta-store").put(F)}}f=r.target.result;f.onversionchange=function(){f.close();RD.delete(a)};
f.onabort=function(L){Yr("error","Database has a global failure",L.target.error);f.close();RD.delete(a)};var A=f.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),E=!1,F,H,J,O;A.objectStore("meta-store").get("meta-store").onsuccess=function(L){F=L.target.result||{id:"meta-store"};y()};Yga(A,function(L){H=L;y()});uS||(uS=Xga(A));uS.then(function(L){J=L;v()});A.oncomplete=function(){E=!0;v()};A.onabort=lv(m)};l.onerror=function(r){(r=r.target.error&&r.target.error.message)?
-1!==r.indexOf("stored database is a higher version")&&(r=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):r="Failed to open indexedDB, are you in private browsing mode?";Yr("error",r);m(Fi(oS,r))}}function cha(g,e){return new Promise(function(m,c){function h(){k++;g[a++]().then(b,d)}function n(){if(++f===l)r?c(r):m();else for(;k<e&&a<l;)h()}function b(){k--;n()}function d(v){k--;r=r||v;n()}for(var k=0,a=0,f=0,l=g.length,
r;k<e&&a<l;)h()})}function vS(g){var e=(g=g.doc||g.ok)&&g._attachments;e&&Object.keys(e).forEach(function(m){m=e[m];m.data=gS(m.data,m.content_type)})}function eB(g){return/^_design/.test(g)?"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function l2(g){return g._attachments&&Object.keys(g._attachments)?Promise.all(Object.keys(g._attachments).map(function(e){var m=g._attachments[e];if(m.data&&"string"!==typeof m.data)return(new Promise(function(c){hS(m.data,
c)})).then(function(c){m.data=c})})):Promise.resolve()}function dha(g,e){if(e.prefix){var m=G1(e.prefix).protocol;m="http"===m||"https"===m}else m=!1;m&&(g=e.name.substr(e.prefix.length),g=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));e=G1(g);if(e.user||e.password)e.auth={username:e.user,password:e.password};g=e.path.replace(/(^\/|\/$)/g,"").split("/");e.db=g.pop();-1===e.db.indexOf("%")&&(e.db=encodeURIComponent(e.db));e.path=g.join("/");return e}function $m(g,e){return pL(g,g.db+"/"+e)}function pL(g,
e){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+e}function qL(g){return"?"+Object.keys(g).map(function(e){return e+"="+encodeURIComponent(g[e])}).join("&")}function eha(g){var e="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",m=-1!==e.indexOf("msie"),c=-1!==e.indexOf("trident");e=-1!==e.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(m||c||e)&&g}function wS(g,e){function m(l,r){return ym(l,LD(function(v){h().then(function(){return r.apply(this,
v)}).catch(function(y){v.pop()(y)})})).bind(b)}function c(l,r,v){var y={};r=r||{};r.headers=r.headers||new SD;r.headers.get("Content-Type")||r.headers.set("Content-Type","application/json");r.headers.get("Accept")||r.headers.set("Accept","application/json");return a(l,r).then(function(A){y.ok=A.ok;y.status=A.status;return A.json()}).then(function(A){y.data=A;if(!y.ok){y.data.status=y.status;A=ND(y.data);if(v)return v(A);throw A;}Array.isArray(y.data)&&(y.data=y.data.map(function(E){return E.error||
E.missing?ND(E):E}));if(v)v(null,y.data);else return y})}function h(){if(g.skip_setup)return Promise.resolve();if(f)return f;f=c(k).catch(function(l){return l&&l.status&&404===l.status?(aS(404,"PouchDB is just detecting if the remote exists."),c(k,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&l.status&&412===l.status?!0:Promise.reject(l)});f.catch(function(){f=null});return f}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var b=this,d=dha(g.name,g),k=$m(d,"");
g=Zm(g);var a=function(l,r){r=r||{};r.headers=r.headers||new SD;r.credentials="include";if(g.auth||d.auth){var v=g.auth||d.auth;v=btoa(unescape(encodeURIComponent(v.username+":"+v.password)));r.headers.set("Authorization","Basic "+v)}var y=g.headers||{};Object.keys(y).forEach(function(A){r.headers.append(A,y[A])});eha(r)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||m2)(l,r)},f;kv(function(){e(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=m("id",function(l){a(pL(d,
"")).then(function(r){return r.json()}).catch(function(){return{}}).then(function(r){r=r&&r.uuid?r.uuid+d.db:$m(d,"");l(null,r)})});b.compact=m("compact",function(l,r){"function"===typeof l&&(r=l,l={});l=Zm(l);c($m(d,"_compact"),{method:"POST"}).then(function(){function v(){b.info(function(y,A){A&&!A.compact_running?r(null,{ok:!0}):setTimeout(v,l.interval||200)})}v()})});b.bulkGet=ym("bulkGet",function(l,r){function v(H){var J={};l.revs&&(J.revs=!0);l.attachments&&(J.attachments=!0);l.latest&&(J.latest=
!0);c($m(d,"_bulk_get"+qL(J)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(O){l.attachments&&l.binary&&O.data.results.forEach(function(L){L.docs.forEach(vS)});H(null,O.data)}).catch(H)}function y(){function H(ea){return function(qa,Fa){L[ea]=Fa.results;++O===J&&r(null,{results:kL(L)})}}for(var J=Math.ceil(l.docs.length/50),O=0,L=Array(J),Y=0;Y<J;Y++){var S=AG(l,["revs","attachments","binary","latest"]);S.docs=l.docs.slice(50*Y,Math.min(l.docs.length,50*(Y+1)));B1(A,S,H(Y))}}var A=
this,E=pL(d,""),F=xS[E];"boolean"!==typeof F?v(function(H,J){H?(xS[E]=!1,aS(H.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),y()):(xS[E]=!0,r(null,J))}):F?v(r):y()});b._info=function(l){h().then(function(){return a($m(d,""))}).then(function(r){return r.json()}).then(function(r){r.host=$m(d,"");l(null,r)}).catch(l)};b.fetch=function(l,r){return h().then(function(){var v="/"===l.substring(0,1)?pL(d,l.substring(1)):$m(d,l);return a(v,r)})};b.get=m("get",function(l,r,v){function y(F){function H(L){var Y=
J[L];L=eB(F._id)+"/"+n(L)+"?rev="+F._rev;return a($m(d,L)).then(function(S){return"buffer"in S?S.buffer():S.blob()}).then(function(S){if(r.binary){var ea=Object.getOwnPropertyDescriptor(S.__proto__,"type");if(!ea||ea.set)S.type=Y.content_type;return S}return new Promise(function(qa){hS(S,qa)})}).then(function(S){delete Y.stub;delete Y.length;Y.data=S})}var J=F._attachments,O=J&&Object.keys(J);if(J&&O.length)return O=O.map(function(L){return function(){return H(L)}}),cha(O,5)}function A(F){return Array.isArray(F)?
Promise.all(F.map(function(H){if(H.ok)return y(H.ok)})):y(F)}"function"===typeof r&&(v=r,r={});r=Zm(r);var E={};r.revs&&(E.revs=!0);r.revs_info&&(E.revs_info=!0);r.latest&&(E.latest=!0);r.open_revs&&("all"!==r.open_revs&&(r.open_revs=JSON.stringify(r.open_revs)),E.open_revs=r.open_revs);r.rev&&(E.rev=r.rev);r.conflicts&&(E.conflicts=r.conflicts);r.update_seq&&(E.update_seq=r.update_seq);l=eB(l);E=$m(d,l+qL(E));c(E).then(function(F){return Promise.resolve().then(function(){if(r.attachments)return A(F.data)}).then(function(){v(null,
F.data)})}).catch(function(F){F.docId=l;v(F)})});b.remove=m("remove",function(l,r,v,y){"string"===typeof r?(l={_id:l,_rev:r},"function"===typeof v&&(y=v,v={})):"function"===typeof r?(y=r,v={}):(y=v,v=r);r=l._rev||v.rev;r=$m(d,eB(l._id))+"?rev="+r;c(r,{method:"DELETE"},y).catch(y)});b.getAttachment=m("getAttachment",function(l,r,v,y){"function"===typeof v&&(y=v,v={});v=v.rev?"?rev="+v.rev:"";l=$m(d,eB(l))+"/"+n(r)+v;var A;a(l,{method:"GET"}).then(function(E){A=E.headers.get("content-type");if(E.ok)return"undefined"===
typeof rL||rL.browser||"function"!==typeof E.buffer?E.blob():E.buffer();throw E;}).then(function(E){"undefined"===typeof rL||rL.browser||(E.type=A);y(null,E)}).catch(function(E){y(E)})});b.removeAttachment=m("removeAttachment",function(l,r,v,y){l=$m(d,eB(l)+"/"+n(r))+"?rev="+v;c(l,{method:"DELETE"},y).catch(y)});b.putAttachment=m("putAttachment",function(l,r,v,y,A,E){"function"===typeof A&&(E=A,A=y,y=v,v=null);l=eB(l)+"/"+n(r);l=$m(d,l);v&&(l+="?rev="+v);if("string"===typeof y){try{var F=atob(y)}catch(H){return E(Fi(d2,
"Attachment is not a valid base64 string"))}y=F?fS(F,A):""}c(l,{headers:new SD({"Content-Type":A}),method:"PUT",body:y},E).catch(E)});b._bulkDocs=function(l,r,v){l.new_edits=r.new_edits;h().then(function(){return Promise.all(l.docs.map(l2))}).then(function(){return c($m(d,"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},v)}).catch(v)};b._put=function(l,r,v){h().then(function(){return l2(l)}).then(function(){return c($m(d,eB(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(y){v(null,
y.data)}).catch(function(y){y.docId=l&&l._id;v(y)})};b.allDocs=m("allDocs",function(l,r){"function"===typeof l&&(r=l,l={});l=Zm(l);var v={},y="GET";l.conflicts&&(v.conflicts=!0);l.update_seq&&(v.update_seq=!0);l.descending&&(v.descending=!0);l.include_docs&&(v.include_docs=!0);l.attachments&&(v.attachments=!0);l.key&&(v.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(v.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(v.endkey=JSON.stringify(l.endkey));
"undefined"!==typeof l.inclusive_end&&(v.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(v.limit=l.limit);"undefined"!==typeof l.skip&&(v.skip=l.skip);v=qL(v);if("undefined"!==typeof l.keys){y="POST";var A={keys:l.keys}}c($m(d,"_all_docs"+v),{method:y,body:JSON.stringify(A)}).then(function(E){l.include_docs&&l.attachments&&l.binary&&E.data.rows.forEach(vS);r(null,E.data)}).catch(r)});b._changes=function(l){var r="batch_size"in l?l.batch_size:25;l=Zm(l);!l.continuous||"heartbeat"in
l||(l.heartbeat=1E4);var v="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>v-l.timeout&&(v=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>v-l.heartbeat&&(v=l.heartbeat+5E3);var y={};"timeout"in l&&l.timeout&&(y.timeout=l.timeout);var A="undefined"!==typeof l.limit?l.limit:!1,E=A;l.style&&(y.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)y.include_docs=!0;l.attachments&&(y.attachments=!0);l.continuous&&(y.feed="longpoll");l.seq_interval&&(y.seq_interval=l.seq_interval);
l.conflicts&&(y.conflicts=!0);l.descending&&(y.descending=!0);l.update_seq&&(y.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(y.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(y.filter=l.filter);l.view&&"string"===typeof l.view&&(y.filter="_view",y.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var F in l.query_params)l.query_params.hasOwnProperty(F)&&(y[F]=l.query_params[F]);var H="GET";if(l.doc_ids){y.filter="_doc_ids";H="POST";var J={doc_ids:l.doc_ids}}else l.selector&&
(y.filter="_selector",H="POST",J={selector:l.selector});var O=new fha,L,Y=function(qa,Fa){if(!l.aborted){y.since=qa;"object"===typeof y.since&&(y.since=JSON.stringify(y.since));l.descending?A&&(y.limit=E):y.limit=!A||E>r?r:E;var K=$m(d,"_changes"+qL(y)),Z={signal:O.signal,method:H,body:JSON.stringify(J)};L=qa;l.aborted||h().then(function(){return c(K,Z,Fa)}).catch(Fa)}},S={results:[]},ea=function(qa,Fa){if(!l.aborted){var K=0;if(Fa&&Fa.results){K=Fa.results.length;S.last_seq=Fa.last_seq;var Z=null,
R=null;"number"===typeof Fa.pending&&(Z=Fa.pending);if("string"===typeof S.last_seq||"number"===typeof S.last_seq)R=S.last_seq;Fa.results=Fa.results.filter(function(U){E--;var na=bS(l)(U);na&&(l.include_docs&&l.attachments&&l.binary&&vS(U),l.return_docs&&S.results.push(U),l.onChange(U,Z,R));return na})}else if(qa){l.aborted=!0;l.complete(qa);return}Fa&&Fa.last_seq&&(L=Fa.last_seq);qa=A&&0>=E||Fa&&K<r||l.descending;(!l.continuous||A&&0>=E)&&qa?l.complete(null,S):kv(function(){Y(L,ea)})}};Y(l.since||
0,ea);return{cancel:function(){l.aborted=!0;O.abort()}}};b.revsDiff=m("revsDiff",function(l,r,v){"function"===typeof r&&(v=r);c($m(d,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},v).catch(v)});b._close=function(l){l()};b._destroy=function(l,r){c($m(d,""),{method:"DELETE"}).then(function(v){r(null,v)}).catch(function(v){404===v.status?r(null,{ok:!0}):r(v)})}}function fB(g){this.status=400;this.name="query_parse_error";this.message=g;this.error=!0;try{Error.captureStackTrace(this,fB)}catch(e){}}
function sL(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,sL)}catch(e){}}function tL(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,tL)}catch(e){}}function n2(g,e){e&&g.then(function(m){kv(function(){e(null,m)})},function(m){kv(function(){e(m)})});return g}function gha(g){return LD(function(e){var m=e.pop();e=g.apply(this,e);"function"===typeof m&&n2(e,m);return e})}function hha(g,
e){return g.then(function(m){return e().then(function(){return m})},function(m){return e().then(function(){throw m;})})}function yS(g,e){return function(){var m=arguments,c=this;return g.add(function(){return e.apply(c,m)})}}function o2(g){g=new HG(g);var e=Array(g.size),m=-1;g.forEach(function(c){e[++m]=c});return e}function zS(g){var e=Array(g.size),m=-1;g.forEach(function(c,h){e[++m]=h});return e}function p2(g){return new tL("builtin "+g+" function requires map values to be numbers or number arrays")}
function AS(g){for(var e=0,m=0,c=g.length;m<c;m++){var h=g[m];if("number"!==typeof h)if(Array.isArray(h)){e="number"===typeof e?[e]:e;for(var n=0,b=h.length;n<b;n++){var d=h[n];if("number"!==typeof d)throw p2("_sum");"undefined"===typeof e[n]?e.push(d):e[n]+=d}}else throw p2("_sum");else"number"===typeof e?e+=h:e[0]+=h}return e}function q2(g,e){return dS("return ("+g.replace(/;\s*$/,"")+");",{emit:e,sum:AS,log:iha,isArray:jha,toJSON:kha})}function IG(){this.promise=new Promise(function(g){g()})}function r2(g){if(!g)return"undefined";
switch(typeof g){case "function":return g.toString();case "string":return g.toString();default:return JSON.stringify(g)}}function lha(g,e){return r2(g)+r2(e)+"undefined"}function s2(g,e,m,c,h,n){var b=lha(m,c);if(!h){var d=g._cachedViews=g._cachedViews||{};if(d[b])return d[b]}var k=g.info().then(function(a){var f=a.db_name+"-mrview-"+(h?"temp":mL.hash(b));return lL(g,"_local/"+n,function(l){l.views=l.views||{};var r=e;-1===r.indexOf("/")&&(r=e+"/"+e);r=l.views[r]=l.views[r]||{};if(!r[f])return r[f]=
!0,l}).then(function(){return g.registerDependentDatabase(f).then(function(l){l=l.db;l.auto_compaction=!0;var r={name:f,db:l,sourceDB:g,adapter:g.adapter,mapFun:m,reduceFun:c};return r.db.get("_local/lastSeq").catch(function(v){if(404!==v.status)throw v;}).then(function(v){r.seq=v?v.seq:0;if(d)r.db.once("destroyed",function(){delete d[b]});return r})})})});d&&(d[b]=k);return k}function BS(g){return-1===g.indexOf("/")?[g,g]:g.split("/")}function mha(g){return 1===g.length&&/^1-/.test(g[0].rev)}function t2(g,
e){try{g.emit("error",e)}catch(m){Yr("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Yr("error",e)}}function u2(g,e){var m=Object.keys(e._attachments);return Promise.all(m.map(function(c){return g.getAttachment(e._id,c,{rev:e._rev})}))}function nha(g,e,m){var c=jv(e)&&!jv(g),h=Object.keys(m._attachments);return c?g.get(m._id).then(function(n){return Promise.all(h.map(function(b){return n._attachments&&
n._attachments[b]&&n._attachments[b].digest===m._attachments[b].digest?g.getAttachment(n._id,b):e.getAttachment(m._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return u2(e,m)}):u2(e,m)}function oha(g){var e=[];Object.keys(g).forEach(function(m){g[m].missing.forEach(function(c){e.push({id:m,rev:c})})});return{docs:e,revs:!0,latest:!0}}function pha(g,e,m,c){function h(d){return g.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(k){if(c.cancelled)throw Error("cancelled");k.rows.forEach(function(a){var f;
(f=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(f=a.doc,f=f._attachments&&0<Object.keys(f._attachments).length);f||(f=a.doc,f=f._conflicts&&0<f._conflicts.length);f||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete m[a.id])})})}m=Zm(m);var n=[],b=!0;return Promise.resolve().then(function(){var d=Object.keys(m).filter(function(k){k=m[k].missing;return 1===k.length&&/^1-/.test(k[0])});if(0<d.length)return h(d)}).then(function(){var d=oha(m);if(d.docs.length)return g.bulkGet(d).then(function(k){if(c.cancelled)throw Error("cancelled");
return Promise.all(k.results.map(function(a){return Promise.all(a.docs.map(function(f){var l=f.ok;f.error&&(b=!1);return l&&l._attachments?nha(e,g,l).then(function(r){var v=Object.keys(l._attachments);r.forEach(function(y,A){A=l._attachments[v[A]];delete A.stub;delete A.length;A.data=y});return l}):l}))})).then(function(a){n=n.concat(kL(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function CS(g,e,m,c,h){return g.get(e).catch(function(n){if(404===n.status)return"http"!==g.adapter&&
"https"!==g.adapter||aS(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:c,_id:e,history:[],replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!h.cancelled&&n.last_seq!==m)return n.history=(n.history||[]).filter(function(b){return b.session_id!==c}),n.history.unshift({last_seq:m,session_id:c}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=c,n.last_seq=m,g.put(n).catch(function(b){if(409===b.status)return CS(g,e,m,c,h);throw b;
})})}function JG(g,e,m,c,h){this.src=g;this.target=e;this.id=m;this.returnValue=c;this.opts=h||{}}function v2(g,e){var m=g[0],c=g.slice(1),h=e[0],n=e.slice(1);return m&&0!==e.length?DS(m.session_id,e)?{last_seq:m.last_seq,history:g}:DS(h.session_id,c)?{last_seq:h.last_seq,history:n}:v2(c,n):{last_seq:0,history:[]}}function DS(g,e){var m=e[0],c=e.slice(1);return g&&0!==e.length?g===m.session_id?!0:DS(g,c):!1}function w2(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function qha(g,
e,m,c){if(!1===g.retry)e.emit("error",m),e.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=$fa);e.emit("requestError",m);if("active"===e.state||"pending"===e.state){e.emit("paused",m);e.state="stopped";var h=function(){g.current_back_off=0};e.once("paused",function(){e.removeListener("active",h)});e.once("active",h)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(c,g.current_back_off)}}function rha(g){return Object.keys(g).sort(An).reduce(function(e,
m){e[m]=g[m];return e},{})}function sha(g,e,m){var c=m.doc_ids?m.doc_ids.sort(An):"",h=m.filter?m.filter.toString():"",n="",b="",d="";m.selector&&(d=JSON.stringify(m.selector));m.filter&&m.query_params&&(n=JSON.stringify(rha(m.query_params)));m.filter&&"_view"===m.filter&&(b=m.view.toString());return Promise.all([g.id(),e.id()]).then(function(k){var a=k[0]+k[1]+h+b+n+c+d;return new Promise(function(f){iS(a,f)})}).then(function(k){k=k.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+k})}function x2(g,
e,m,c,h){function n(){return jb?Promise.resolve():sha(g,e,m).then(function(wa){xa=wa;jb=new JG(g,e,xa,c,!1===m.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===m.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===m.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){ob=[];if(0!==L.docs.length){var wa=L.docs;return e.bulkDocs({docs:wa,new_edits:!1},{timeout:m.timeout}).then(function(Ka){if(c.cancelled)throw v(),
Error("cancelled");var Fb=Object.create(null);Ka.forEach(function(hc){hc.error&&(Fb[hc.id]=hc)});Ka=Object.keys(Fb).length;h.doc_write_failures+=Ka;h.docs_written+=wa.length-Ka;wa.forEach(function(hc){var Ub=Fb[hc._id];if(Ub)if(h.errors.push(Ub),hc=(Ub.name||"").toLowerCase(),"unauthorized"===hc||"forbidden"===hc)c.emit("denied",Zm(Ub));else throw Ub;else ob.push(hc)})},function(Ka){h.doc_write_failures+=wa.length;throw Ka;})}}function d(){if(L.error)throw Error("There was a problem getting docs.");
h.last_seq=Fa=L.seq;var wa=Zm(h);ob.length&&(wa.docs=ob,"number"===typeof L.pending&&(wa.pending=L.pending,delete L.pending),c.emit("change",wa));S=!0;return jb.writeCheckpoint(L.seq,pa).then(function(){S=!1;if(c.cancelled)throw v(),Error("cancelled");L=void 0;F()}).catch(function(Ka){J(Ka);throw Ka;})}function k(){var wa={};L.changes.forEach(function(Ka){"_user/"!==Ka.id&&(wa[Ka.id]=Ka.changes.map(function(Fb){return Fb.rev}))});return e.revsDiff(wa).then(function(Ka){if(c.cancelled)throw v(),Error("cancelled");
L.diffs=Ka})}function a(){return pha(g,e,L.diffs,c).then(function(wa){L.error=!wa.ok;wa.docs.forEach(function(Ka){delete L.diffs[Ka._id];h.docs_read++;L.docs.push(Ka)})})}function f(){c.cancelled||L||(0===O.length?l(!0):(L=O.shift(),k().then(a).then(b).then(d).then(f).catch(function(wa){r("batch processing terminated with error",wa)})))}function l(wa){if(0===Y.changes.length){if(0===O.length&&!L){if(K&&ka.live||ea)c.state="pending",c.emit("paused");ea&&v()}}else if(wa||ea||Y.changes.length>=Z){O.push(Y);
Y={seq:0,changes:[],docs:[]};if("pending"===c.state||"stopped"===c.state)c.state="active",c.emit("active");f()}}function r(wa,Ka){qa||(Ka.message||(Ka.message=wa),h.ok=!1,h.status="aborting",O=[],Y={seq:0,changes:[],docs:[]},v(Ka))}function v(wa){if(!qa){if(c.cancelled&&(h.status="cancelled",S))return;h.status=h.status||"complete";h.end_time=(new Date).toISOString();h.last_seq=Fa;qa=!0;if(wa){wa=Fi(wa);wa.result=h;var Ka=(wa.name||"").toLowerCase();"unauthorized"===Ka||"forbidden"===Ka?(c.emit("error",
wa),c.removeAllListeners()):qha(m,c,wa,function(){x2(g,e,m,c)})}else c.emit("complete",h),c.removeAllListeners()}}function y(wa,Ka,Fb){if(c.cancelled)return v();"number"===typeof Ka&&(Y.pending=Ka);bS(m)(wa)&&(Y.seq=wa.seq||Fb,Y.changes.push(wa),kv(function(){l(0===O.length&&ka.live)}))}function A(wa){U=!1;if(c.cancelled)return v();if(0<wa.results.length)ka.since=wa.results[wa.results.length-1].seq,F(),l(!0);else{var Ka=function(){K?(ka.live=!0,F()):ea=!0;l(!0)};L||0!==wa.results.length?Ka():(S=!0,
jb.writeCheckpoint(wa.last_seq,pa).then(function(){S=!1;h.last_seq=Fa=wa.last_seq;Ka()}).catch(J))}}function E(wa){U=!1;if(c.cancelled)return v();r("changes rejected",wa)}function F(){function wa(){Fb.cancel()}function Ka(){c.removeListener("cancel",wa)}if(!U&&!ea&&O.length<R){U=!0;c._changes&&(c.removeListener("cancel",c._abortChanges),c._changes.cancel());c.once("cancel",wa);var Fb=g.changes(ka).on("change",y);Fb.then(Ka,Ka);Fb.then(A).catch(E);m.retry&&(c._changes=Fb,c._abortChanges=wa)}}function H(){n().then(function(){if(c.cancelled)v();
else return jb.getCheckpoint().then(function(wa){Fa=wa;ka={since:Fa,limit:Z,batch_size:Z,style:"all_docs",doc_ids:na,selector:aa,return_docs:!0};m.filter&&("string"!==typeof m.filter?ka.include_docs=!0:ka.filter=m.filter);"heartbeat"in m&&(ka.heartbeat=m.heartbeat);"timeout"in m&&(ka.timeout=m.timeout);m.query_params&&(ka.query_params=m.query_params);m.view&&(ka.view=m.view);F()})}).catch(function(wa){r("getCheckpoint rejected with ",wa)})}function J(wa){S=!1;r("writeCheckpoint completed with error",
wa)}var O=[],L,Y={seq:0,changes:[],docs:[]},S=!1,ea=!1,qa=!1,Fa=0,K=m.continuous||m.live||!1,Z=m.batch_size||100,R=m.batches_limit||10,U=!1,na=m.doc_ids,aa=m.selector,xa,jb,ob=[],pa=nL();h=h||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ka={};c.ready(g,e);c.cancelled?v():(c._addedListeners||(c.once("cancel",v),"function"===typeof m.complete&&(c.once("error",m.complete),c.once("complete",function(wa){m.complete(null,wa)})),c._addedListeners=
!0),"undefined"===typeof m.since?H():n().then(function(){S=!0;return jb.writeCheckpoint(m.since,pa)}).then(function(){S=!1;c.cancelled?v():(Fa=m.since,H())}).catch(J))}function uL(){$p.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,e=new Promise(function(m,c){g.once("complete",m);g.once("error",c)});g.then=function(m,c){return e.then(m,c)};g.catch=function(m){return e.catch(m)};g.catch(function(){})}function vL(g,e){var m=e.PouchConstructor;return"string"===typeof g?new m(g,
e):g}function ES(g,e,m,c){"function"===typeof m&&(c=m,m={});"undefined"===typeof m&&(m={});if(m.doc_ids&&!Array.isArray(m.doc_ids))throw Fi(jL,"`doc_ids` filter parameter is not a list.");m.complete=c;m=Zm(m);m.continuous=m.continuous||m.live;m.retry="retry"in m?m.retry:!1;m.PouchConstructor=m.PouchConstructor||this;c=new uL(m);g=vL(g,m);e=vL(e,m);x2(g,e,m,c);return c}function tha(g,e,m,c){"function"===typeof m&&(c=m,m={});"undefined"===typeof m&&(m={});m=Zm(m);m.PouchConstructor=m.PouchConstructor||
this;g=vL(g,m);e=vL(e,m);return new FS(g,e,m,c)}function FS(g,e,m,c){function h(J){y.emit("change",{direction:"pull",change:J})}function n(J){y.emit("change",{direction:"push",change:J})}function b(J){y.emit("denied",{direction:"push",doc:J})}function d(J){y.emit("denied",{direction:"pull",doc:J})}function k(){y.pushPaused=!0;y.pullPaused&&y.emit("paused")}function a(){y.pullPaused=!0;y.pushPaused&&y.emit("paused")}function f(){y.pushPaused=!1;y.pullPaused&&y.emit("active",{direction:"push"})}function l(){y.pullPaused=
!1;y.pushPaused&&y.emit("active",{direction:"pull"})}function r(J){return function(O,L){var Y="denied"===O&&(L===d||L===b),S="paused"===O&&(L===a||L===k),ea="active"===O&&(L===l||L===f);if("change"===O&&(L===h||L===n)||Y||S||ea)O in F||(F[O]={}),F[O][J]=!0,2===Object.keys(F[O]).length&&y.removeAllListeners(O)}}function v(J,O,L){if(-1==J.listeners(O).indexOf(L))J.on(O,L)}var y=this;this.canceled=!1;var A=m.push?QD({},m,m.push):m,E=m.pull?QD({},m,m.pull):m;this.push=ES(g,e,A);this.pull=ES(e,g,E);this.pullPaused=
this.pushPaused=!0;var F={};m.live&&(this.push.on("complete",y.pull.cancel.bind(y.pull)),this.pull.on("complete",y.push.cancel.bind(y.push)));this.on("newListener",function(J){"change"===J?(v(y.pull,"change",h),v(y.push,"change",n)):"denied"===J?(v(y.pull,"denied",d),v(y.push,"denied",b)):"active"===J?(v(y.pull,"active",l),v(y.push,"active",f)):"paused"===J&&(v(y.pull,"paused",a),v(y.push,"paused",k))});this.on("removeListener",function(J){"change"===J?(y.pull.removeListener("change",h),y.push.removeListener("change",
n)):"denied"===J?(y.pull.removeListener("denied",d),y.push.removeListener("denied",b)):"active"===J?(y.pull.removeListener("active",l),y.push.removeListener("active",f)):"paused"===J&&(y.pull.removeListener("paused",a),y.push.removeListener("paused",k))});this.pull.on("removeListener",r("pull"));this.push.on("removeListener",r("push"));var H=Promise.all([this.push,this.pull]).then(function(J){J={push:J[0],pull:J[1]};y.emit("complete",J);c&&c(null,J);y.removeAllListeners();return J},function(J){y.cancel();
c?c(J):y.emit("error",J);y.removeAllListeners();if(c)throw J;});this.then=function(J,O){return H.then(J,O)};this.catch=function(J){return H.catch(J)}}function Wy(){this._store={}}function KG(g){this._store=new Wy;if(g&&Array.isArray(g))for(var e=0,m=g.length;e<m;e++)this.add(g[e])}function uha(){TD&&gB&&(TD=!1,gB.length?Xy=gB.concat(Xy):LG=-1,Xy.length&&y2())}function y2(){if(!TD){GS=!1;TD=!0;for(var g=Xy.length,e=setTimeout(uha);g;){gB=Xy;for(Xy=[];gB&&++LG<g;)gB[LG].run();LG=-1;g=Xy.length}gB=null;
LG=-1;TD=!1;clearTimeout(e)}}function z2(g,e){this.fun=g;this.array=e}function Nk(g,e,m){Error.call(this,m);this.status=g;this.name=e;this.message=m;this.error=!0}function hB(g){return g.call.bind(g)}function MG(g,e){if("object"!=typeof g)return!1;try{return e(g),!0}catch(m){return!1}}function A2(g){return aq&&Yq?void 0!==Zr(g):B2(g)||C2(g)||D2(g)||E2(g)||F2(g)||G2(g)||H2(g)||I2(g)||J2(g)||K2(g)||L2(g)}function B2(g){return aq&&Yq?"Uint8Array"===Zr(g):"[object Uint8Array]"===El(g)||vha(g)&&void 0!==
g.buffer}function C2(g){return aq&&Yq?"Uint8ClampedArray"===Zr(g):"[object Uint8ClampedArray]"===El(g)}function D2(g){return aq&&Yq?"Uint16Array"===Zr(g):"[object Uint16Array]"===El(g)}function E2(g){return aq&&Yq?"Uint32Array"===Zr(g):"[object Uint32Array]"===El(g)}function F2(g){return aq&&Yq?"Int8Array"===Zr(g):"[object Int8Array]"===El(g)}function G2(g){return aq&&Yq?"Int16Array"===Zr(g):"[object Int16Array]"===El(g)}function H2(g){return aq&&Yq?"Int32Array"===Zr(g):"[object Int32Array]"===El(g)}
function I2(g){return aq&&Yq?"Float32Array"===Zr(g):"[object Float32Array]"===El(g)}function J2(g){return aq&&Yq?"Float64Array"===Zr(g):"[object Float64Array]"===El(g)}function K2(g){return aq&&Yq?"BigInt64Array"===Zr(g):"[object BigInt64Array]"===El(g)}function L2(g){return aq&&Yq?"BigUint64Array"===Zr(g):"[object BigUint64Array]"===El(g)}function wL(g){return"[object Map]"===El(g)}function xL(g){return"[object Set]"===El(g)}function yL(g){return"[object WeakMap]"===El(g)}function HS(g){return"[object WeakSet]"===
El(g)}function zL(g){return"[object ArrayBuffer]"===El(g)}function M2(g){return"undefined"!=typeof ArrayBuffer&&(zL.working?zL(g):g instanceof ArrayBuffer)}function AL(g){return"[object DataView]"===El(g)}function N2(g){return"undefined"!=typeof DataView&&(AL.working?AL(g):g instanceof DataView)}function BL(g){return"[object SharedArrayBuffer]"===El(g)}function O2(g){return"undefined"!=typeof SharedArrayBuffer&&(BL.working?BL(g):g instanceof SharedArrayBuffer)}function P2(g){return MG(g,wha)}function Q2(g){return MG(g,
xha)}function R2(g){return MG(g,yha)}function S2(g){return T2&&MG(g,zha)}function U2(g){return IS&&MG(g,Aha)}function Yy(g,e){var m={seen:[],stylize:Bha};return 3<=arguments.length&&(m.depth=arguments[2]),4<=arguments.length&&(m.colors=arguments[3]),JS(e)?m.showHidden=e:e&&Oh._extend(m,e),iB(m.showHidden)&&(m.showHidden=!1),iB(m.depth)&&(m.depth=2),iB(m.colors)&&(m.colors=!1),iB(m.customInspect)&&(m.customInspect=!0),m.colors&&(m.stylize=Cha),CL(m,g,m.depth)}function Cha(g,e){return(e=Yy.styles[e])?
"\u001b["+Yy.colors[e][0]+"m"+g+"\u001b["+Yy.colors[e][1]+"m":g}function Bha(g,e){return g}function CL(g,e,m){if(g.customInspect&&e&&DL(e.inspect)&&e.inspect!==Oh.inspect&&(!e.constructor||e.constructor.prototype!==e)){var c=e.inspect(m,g);return EL(c)||(c=CL(g,c,m)),c}var h=function(a,f){if(iB(f))return a.stylize("undefined","undefined");if(EL(f))return f="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(f,"string");if(V2(f))return a.stylize(""+f,"number");
if(JS(f))return a.stylize(""+f,"boolean");if(null===f)return a.stylize("null","null")}(g,e);if(h)return h;h=Object.keys(e);var n=function(a){var f={};return a.forEach(function(l,r){f[l]=!0}),f}(h);if(g.showHidden&&(h=Object.getOwnPropertyNames(e)),NG(e)&&(0<=h.indexOf("message")||0<=h.indexOf("description")))return KS(e);if(0===h.length){if(DL(e))return g.stylize("[Function"+(e.name?": "+e.name:"")+"]","special");if(OG(e))return g.stylize(RegExp.prototype.toString.call(e),"regexp");if(FL(e))return g.stylize(Date.prototype.toString.call(e),
"date");if(NG(e))return KS(e)}var b="",d=!1,k=["{","}"];(W2(e)&&(d=!0,k=["[","]"]),DL(e))&&(b=" [Function"+(e.name?": "+e.name:"")+"]");return OG(e)&&(b=" "+RegExp.prototype.toString.call(e)),FL(e)&&(b=" "+Date.prototype.toUTCString.call(e)),NG(e)&&(b=" "+KS(e)),0!==h.length||d&&0!=e.length?0>m?OG(e)?g.stylize(RegExp.prototype.toString.call(e),"regexp"):g.stylize("[Object]","special"):(g.seen.push(e),c=d?function(a,f,l,r,v){for(var y=[],A=0,E=f.length;A<E;++A)Object.prototype.hasOwnProperty.call(f,
String(A))?y.push(LS(a,f,l,r,String(A),!0)):y.push("");return v.forEach(function(F){F.match(/^\d+$/)||y.push(LS(a,f,l,r,F,!0))}),y}(g,e,m,n,h):h.map(function(a){return LS(g,e,m,n,a,d)}),g.seen.pop(),function(a,f,l){var r=0;return 60<a.reduce(function(v,y){return r++,0<=y.indexOf("\n")&&r++,v+y.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===f?"":f+"\n ")+" "+a.join(",\n  ")+" "+l[1]:l[0]+f+" "+a.join(", ")+" "+l[1]}(c,b,k)):k[0]+b+k[1]}function KS(g){return"["+Error.prototype.toString.call(g)+
"]"}function LS(g,e,m,c,h,n){var b,d,k;if((k=Object.getOwnPropertyDescriptor(e,h)||{value:e[h]}).get?d=k.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):k.set&&(d=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(c,h)||(b="["+h+"]"),d||(0>g.seen.indexOf(k.value)?-1<(d=null===m?CL(g,k.value,null):CL(g,k.value,m-1)).indexOf("\n")&&(d=n?d.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+d.split("\n").map(function(a){return"   "+a}).join("\n")):
d=g.stylize("[Circular]","special")),iB(b)){if(n&&h.match(/^\d+$/))return d;(b=JSON.stringify(""+h)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=g.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=g.stylize(b,"string"))}return b+": "+d}function W2(g){return Array.isArray(g)}function JS(g){return"boolean"==typeof g}function V2(g){return"number"==typeof g}function EL(g){return"string"==typeof g}function iB(g){return void 0===g}function OG(g){return UD(g)&&
"[object RegExp]"===Object.prototype.toString.call(g)}function UD(g){return"object"==typeof g&&null!==g}function FL(g){return UD(g)&&"[object Date]"===Object.prototype.toString.call(g)}function NG(g){return UD(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function DL(g){return"function"==typeof g}function MS(g){return 10>g?"0"+g.toString(10):g.toString(10)}function Dha(){var g=new Date,e=[MS(g.getHours()),MS(g.getMinutes()),MS(g.getSeconds())].join(":");return[g.getDate(),
Eha[g.getMonth()],e].join(" ")}function Fha(g,e){if(!g){var m=Error("Promise was rejected with a falsy value");m.reason=g;g=m}return e(g)}function X2(g){var e=g.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");return-1===g&&(g=e),[g,g===e?0:4-g%4]}function Gha(g,e,m){for(var c,h=[],n=e;n<m;n+=3)e=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(255&g[n+2]),h.push(mv[(c=e)>>18&63]+mv[c>>12&63]+mv[c>>6&63]+mv[63&c]);return h.join("")}function bx(g){if(2147483647<
g)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,Ne.prototype),g}function Ne(g,e,m){if("number"==typeof g){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return NS(g)}return Y2(g,e,m)}function Y2(g,e,m){if("string"==typeof g)return function(h,n){"string"==typeof n&&""!==n||(n="utf8");if(!Ne.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|Z2(h,
n),d=bx(b);h=d.write(h,n);h!==b&&(d=d.slice(0,h));return d}(g,e);if(ArrayBuffer.isView(g))return OS(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(cx(g,ArrayBuffer)||g&&cx(g.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(cx(g,SharedArrayBuffer)||g&&cx(g.buffer,SharedArrayBuffer)))return Hha(g,e,m);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
var c=g.valueOf&&g.valueOf();if(null!=c&&c!==g)return Ne.from(c,e,m);if(c=function(h){if(Ne.isBuffer(h)){var n=0|PS(h.length),b=bx(n);return 0===b.length||h.copy(b,0,0,n),b}if(void 0!==h.length)return(n="number"!=typeof h.length)||(n=h.length,n=n!=n),n?bx(0):OS(h);if("Buffer"===h.type&&Array.isArray(h.data))return OS(h.data)}(g))return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return Ne.from(g[Symbol.toPrimitive]("string"),e,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function $2(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function NS(g){return $2(g),bx(0>g?0:0|PS(g))}function OS(g){for(var e=0>g.length?0:0|PS(g.length),m=bx(e),c=0;c<e;c+=1)m[c]=255&g[c];return m}function Hha(g,e,m){if(0>e||g.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<e+(m||0))throw new RangeError('"length" is outside of buffer bounds');
var c;return c=void 0===e&&void 0===m?new Uint8Array(g):void 0===m?new Uint8Array(g,e):new Uint8Array(g,e,m),Object.setPrototypeOf(c,Ne.prototype),c}function PS(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function Z2(g,e){if(Ne.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||cx(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var m=g.length,c=2<arguments.length&&!0===arguments[2];if(!c&&0===m)return 0;for(var h=!1;;)switch(e){case "ascii":case "latin1":case "binary":return m;case "utf8":case "utf-8":return QS(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*m;case "hex":return m>>>1;case "base64":return a3(g).length;default:if(h)return c?-1:QS(g).length;e=(""+e).toLowerCase();h=!0}}function Iha(g,e,m){var c=!1;if(((void 0===e||0>e)&&(e=0),e>this.length)||((void 0===m||m>this.length)&&
(m=this.length),0>=m)||(m>>>=0)<=(e>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;(!e||0>e)&&(e=0);(!m||0>m||m>g)&&(m=g);for(g="";e<m;++e)g+=Jha[this[e]];return g;case "utf8":case "utf-8":return b3(this,e,m);case "ascii":g="";for(m=Math.min(this.length,m);e<m;++e)g+=String.fromCharCode(127&this[e]);return g;case "latin1":case "binary":g="";for(m=Math.min(this.length,m);e<m;++e)g+=String.fromCharCode(this[e]);return g;case "base64":return 0===e&&m===this.length?RS.fromByteArray(this):
RS.fromByteArray(this.slice(e,m));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(e,m);m="";for(g=0;g<e.length;g+=2)m+=String.fromCharCode(e[g]+256*e[g+1]);return m;default:if(c)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();c=!0}}function jB(g,e,m){var c=g[e];g[e]=g[m];g[m]=c}function c3(g,e,m,c,h){if(0===g.length)return-1;"string"==typeof m?(c=m,m=0):2147483647<m?m=2147483647:-2147483648>m&&(m=-2147483648);var n=m=+m;if(n!=n&&(m=h?0:g.length-1),0>m&&(m=g.length+
m),m>=g.length){if(h)return-1;m=g.length-1}else if(0>m){if(!h)return-1;m=0}if("string"==typeof e&&(e=Ne.from(e,c)),Ne.isBuffer(e))return 0===e.length?-1:d3(g,e,m,c,h);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(g,e,m):Uint8Array.prototype.lastIndexOf.call(g,e,m):d3(g,[e],m,c,h);throw new TypeError("val must be string, number or Buffer");}function d3(g,e,m,c,h){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,
d=g.length,k=e.length;if(void 0!==c&&("ucs2"===(c=String(c).toLowerCase())||"ucs-2"===c||"utf16le"===c||"utf-16le"===c)){if(2>g.length||2>e.length)return-1;b=2;d/=2;k/=2;m/=2}if(h)for(c=-1;m<d;m++)if(n(g,m)===n(e,-1===c?0:m-c)){if(-1===c&&(c=m),m-c+1===k)return c*b}else-1!==c&&(m-=m-c),c=-1;else for(m+k>d&&(m=d-k);0<=m;m--){d=!0;for(c=0;c<k;c++)if(n(g,m+c)!==n(e,c)){d=!1;break}if(d)return m}return-1}function e3(g,e,m,c){for(var h=[],n=0;n<e.length;++n)h.push(255&e.charCodeAt(n));return GL(h,g,m,c)}
function b3(g,e,m){m=Math.min(g.length,m);for(var c=[];e<m;){var h,n,b=g[e],d=null,k=239<b?4:223<b?3:191<b?2:1;if(e+k<=m)switch(k){case 1:128>b&&(d=b);break;case 2:128==(192&(h=g[e+1]))&&127<(n=(31&b)<<6|63&h)&&(d=n);break;case 3:h=g[e+1];var a=g[e+2];128==(192&h)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&h)<<6|63&a)&&(55296>n||57343<n)&&(d=n);break;case 4:h=g[e+1];a=g[e+2];var f=g[e+3];128==(192&h)&&128==(192&a)&&128==(192&f)&&65535<(n=(15&b)<<18|(63&h)<<12|(63&a)<<6|63&f)&&1114112>n&&(d=n)}null===d?
(d=65533,k=1):65535<d&&(d-=65536,c.push(d>>>10&1023|55296),d=56320|1023&d);c.push(d);e+=k}g=c.length;if(4096>=g)c=String.fromCharCode.apply(String,c);else{m="";for(h=0;h<g;)m+=String.fromCharCode.apply(String,c.slice(h,h+=4096));c=m}return c}function Bn(g,e,m){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+e>m)throw new RangeError("Trying to access beyond buffer length");}function bq(g,e,m,c,h,n){if(!Ne.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(e>h||e<n)throw new RangeError('"value" argument is out of bounds');if(m+c>g.length)throw new RangeError("Index out of range");}function f3(g,e,m,c,h,n){if(m+c>g.length)throw new RangeError("Index out of range");if(0>m)throw new RangeError("Index out of range");}function g3(g,e,m,c,h){return e=+e,m>>>=0,h||f3(g,0,m,4),VD.write(g,e,m,c,23,4),m+4}function h3(g,e,m,c,h){return e=+e,m>>>=0,h||f3(g,0,m,8),VD.write(g,e,m,c,52,8),m+8}function QS(g,e){var m;e=e||1/0;for(var c=g.length,h=null,n=[],b=0;b<
c;++b){if(55295<(m=g.charCodeAt(b))&&57344>m){if(!h){if(56319<m){-1<(e-=3)&&n.push(239,191,189);continue}if(b+1===c){-1<(e-=3)&&n.push(239,191,189);continue}h=m;continue}if(56320>m){-1<(e-=3)&&n.push(239,191,189);h=m;continue}m=65536+(h-55296<<10|m-56320)}else h&&-1<(e-=3)&&n.push(239,191,189);if(h=null,128>m){if(0>--e)break;n.push(m)}else if(2048>m){if(0>(e-=2))break;n.push(m>>6|192,63&m|128)}else if(65536>m){if(0>(e-=3))break;n.push(m>>12|224,m>>6&63|128,63&m|128)}else{if(!(1114112>m))throw Error("Invalid code point");
if(0>(e-=4))break;n.push(m>>18|240,m>>12&63|128,m>>6&63|128,63&m|128)}}return n}function a3(g){return RS.toByteArray(function(e){if(2>(e=(e=e.split("=")[0]).trim().replace(Kha,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(g))}function GL(g,e,m,c){for(var h=0;h<c&&!(h+m>=e.length||h>=g.length);++h)e[h+m]=g[h];return h}function cx(g,e){return g instanceof e||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===e.name}function i3(g,e){for(var m in g)e[m]=g[m]}function kB(g,
e,m){return nv(g,e,m)}function PG(g){switch(this.encoding=function(e){var m=function(c){if(!c)return"utf8";for(var h;;)switch(c){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return c;default:if(h)return;c=(""+c).toLowerCase();h=!0}}(e);if("string"!=typeof m&&(SS.isEncoding===j3||!j3(e)))throw Error("Unknown encoding: "+e);return m||e}(g),this.encoding){case "utf16le":this.text=
Lha;this.end=Mha;g=4;break;case "utf8":this.fillLast=Nha;g=4;break;case "base64":this.text=Oha;this.end=Pha;g=3;break;default:return this.write=Qha,this.end=Rha,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=SS.allocUnsafe(g)}function TS(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function Nha(g){var e=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var m=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){m=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<g.length&&128!=(192&g[2])){m=(this.lastNeed=2,"\ufffd");break a}}m=void 0}return void 0!==m?m:this.lastNeed<=g.length?(g.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,e,0,g.length),this.lastNeed-=g.length,void 0)}function Lha(g,e){if(0==(g.length-e)%2){if(e=g.toString("utf16le",e)){var m=e.charCodeAt(e.length-1);if(55296<=m&&56319>=m)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=
g[g.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",e,g.length-1)}function Mha(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function Oha(g,e){var m=(g.length-e)%3;return 0===m?g.toString("base64",e):(this.lastNeed=3-m,this.lastTotal=3,1===m?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",
e,g.length-m))}function Pha(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function Qha(g){return g.toString(this.encoding)}function Rha(g){return g&&g.length?this.write(g):""}function $r(g,e,m){m||(m=Error);var c=function(h,n,b){return b.call(this,"string"==typeof e?e:e(h,n,b))||this};$jscomp.inherits(c,m);c.prototype.name=m.name;c.prototype.code=g;k3[g]=c}function l3(g,e){if(Array.isArray(g)){var m=g.length;return g=g.map(function(c){return String(c)}),
2<m?"one of "+e+" "+g.slice(0,m-1).join(", ")+", or "+g[m-1]:2===m?"one of "+e+" "+g[0]+" or "+g[1]:"of "+e+" "+g[0]}return"of "+e+" "+String(g)}function US(g){try{if(!VS.localStorage)return!1}catch(e){return!1}g=VS.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function m3(g,e){var m=Object.keys(g);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(g);e&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(g,h).enumerable}));m.push.apply(m,c)}return m}
function Sha(g,e){for(var m=0;m<e.length;m++){var c=e[m];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(g,c.key,c)}}function n3(g,e){WS(g,e);HL(g)}function HL(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function WS(g,e){g.emit("error",e)}function Tha(){}function Zy(g,e,m){return e in g?Object.defineProperty(g,e,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[e]=m,g}function $y(g,
e){return{value:g,done:e}}function Uha(g){var e=g[az];if(null!==e){var m=g[lB].read();null!==m&&(g[mB]=null,g[az]=null,g[nB]=null,e($y(m,!1)))}}function Vha(g){o3.nextTick(Uha,g)}function p3(){function g(pa,ka,wa){F=F||QG();pa=pa||{};"boolean"!=typeof wa&&(wa=ka instanceof F);this.objectMode=!!pa.objectMode;wa&&(this.objectMode=this.objectMode||!!pa.readableObjectMode);this.highWaterMark=Z(this,pa,"readableHighWaterMark",wa);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==pa.emitClose;this.autoDestroy=!!pa.autoDestroy;this.destroyed=!1;this.defaultEncoding=pa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;pa.encoding&&(ea||(ea=WD.StringDecoder),this.decoder=new ea(pa.encoding),this.encoding=pa.encoding)}function e(pa){if(F=F||QG(),!(this instanceof
e))return new e(pa);this._readableState=new g(pa,this,this instanceof F);this.readable=!0;pa&&("function"==typeof pa.read&&(this._read=pa.read),"function"==typeof pa.destroy&&(this._destroy=pa.destroy));J.call(this)}function m(pa,ka,wa,Ka,Fb){S("readableAddChunk",ka);var hc,Ub=pa._readableState;if(null===ka)Ub.reading=!1,function(ac,Ic){if(S("onEofChunk"),!Ic.ended){if(Ic.decoder){var Mb=Ic.decoder.end();Mb&&Mb.length&&(Ic.buffer.push(Mb),Ic.length+=Ic.objectMode?1:Mb.length)}Ic.ended=!0;Ic.sync?
n(ac):(Ic.needReadable=!1,Ic.emittedReadable||(Ic.emittedReadable=!0,b(ac)))}}(pa,Ub);else if(Fb||(hc=function(ac,Ic){var Mb;var ed=Ic;O.isBuffer(ed)||ed instanceof L||"string"==typeof Ic||void 0===Ic||ac.objectMode||(Mb=new U("chunk",["string","Buffer","Uint8Array"],Ic));return Mb}(Ub,ka)),hc)jb(pa,hc);else if(Ub.objectMode||ka&&0<ka.length)if("string"==typeof ka||Ub.objectMode||Object.getPrototypeOf(ka)===O.prototype||(ka=O.from(ka)),Ka)Ub.endEmitted?jb(pa,new xa):c(pa,Ub,ka,!0);else if(Ub.ended)jb(pa,
new na);else{if(Ub.destroyed)return!1;Ub.reading=!1;Ub.decoder&&!wa?(ka=Ub.decoder.write(ka),Ub.objectMode||0!==ka.length?c(pa,Ub,ka,!1):d(pa,Ub)):c(pa,Ub,ka,!1)}else Ka||(Ub.reading=!1,d(pa,Ub));return!Ub.ended&&(Ub.length<Ub.highWaterMark||0===Ub.length)}function c(pa,ka,wa,Ka){ka.flowing&&0===ka.length&&!ka.sync?(ka.awaitDrain=0,pa.emit("data",wa)):(ka.length+=ka.objectMode?1:wa.length,Ka?ka.buffer.unshift(wa):ka.buffer.push(wa),ka.needReadable&&n(pa));d(pa,ka)}function h(pa,ka){if(0>=pa||0===
ka.length&&ka.ended)pa=0;else if(ka.objectMode)pa=1;else if(pa!=pa)pa=ka.flowing&&ka.length?ka.buffer.head.data.length:ka.length;else{if(pa>ka.highWaterMark){var wa=pa;var Ka=(1073741824<=wa?wa=1073741824:(wa--,wa|=wa>>>1,wa|=wa>>>2,wa|=wa>>>4,wa|=wa>>>8,wa|=wa>>>16,wa++),wa);ka.highWaterMark=Ka}pa=pa<=ka.length?pa:ka.ended?ka.length:(ka.needReadable=!0,0)}return pa}function n(pa){var ka=pa._readableState;S("emitReadable",ka.needReadable,ka.emittedReadable);ka.needReadable=!1;ka.emittedReadable||
(S("emitReadable",ka.flowing),ka.emittedReadable=!0,H.nextTick(b,pa))}function b(pa){var ka=pa._readableState;S("emitReadable_",ka.destroyed,ka.length,ka.ended);ka.destroyed||!ka.length&&!ka.ended||(pa.emit("readable"),ka.emittedReadable=!1);ka.needReadable=!ka.flowing&&!ka.ended&&ka.length<=ka.highWaterMark;r(pa)}function d(pa,ka){ka.readingMore||(ka.readingMore=!0,H.nextTick(k,pa,ka))}function k(pa,ka){for(;!ka.reading&&!ka.ended&&(ka.length<ka.highWaterMark||ka.flowing&&0===ka.length);){var wa=
ka.length;if(S("maybeReadMore read 0"),pa.read(0),wa===ka.length)break}ka.readingMore=!1}function a(pa){var ka=pa._readableState;ka.readableListening=0<pa.listenerCount("readable");ka.resumeScheduled&&!ka.paused?ka.flowing=!0:0<pa.listenerCount("data")&&pa.resume()}function f(pa){S("readable nexttick read 0");pa.read(0)}function l(pa,ka){S("resume",ka.reading);ka.reading||pa.read(0);ka.resumeScheduled=!1;pa.emit("resume");r(pa);ka.flowing&&!ka.reading&&pa.read(0)}function r(pa){var ka=pa._readableState;
for(S("flow",ka.flowing);ka.flowing&&null!==pa.read(););}function v(pa,ka){return 0===ka.length?null:(ka.objectMode?wa=ka.buffer.shift():!pa||pa>=ka.length?(wa=ka.decoder?ka.buffer.join(""):1===ka.buffer.length?ka.buffer.first():ka.buffer.concat(ka.length),ka.buffer.clear()):wa=ka.buffer.consume(pa,ka.decoder),wa);var wa}function y(pa){var ka=pa._readableState;S("endReadable",ka.endEmitted);ka.endEmitted||(ka.ended=!0,H.nextTick(A,ka,pa))}function A(pa,ka){if(S("endReadableNT",pa.endEmitted,pa.length),
!pa.endEmitted&&0===pa.length&&(pa.endEmitted=!0,ka.readable=!1,ka.emit("end"),pa.autoDestroy))pa=ka._writableState,(!pa||pa.autoDestroy&&pa.finished)&&ka.destroy()}function E(pa,ka){for(var wa=0,Ka=pa.length;wa<Ka;wa++)if(pa[wa]===ka)return wa;return-1}if(q3)return XS;q3=!0;var F,H=bj;XS=e;e.ReadableState=g;ov.EventEmitter;var J=IL,O=ei.Buffer,L=Wha.Uint8Array||function(){},Y=Oh;var S=Y&&Y.debuglog?Y.debuglog("stream"):function(){};var ea,qa,Fa,K=Xha;Y=r3;var Z=s3.getHighWaterMark,R=tt.codes,U=R.ERR_INVALID_ARG_TYPE,
na=R.ERR_STREAM_PUSH_AFTER_EOF,aa=R.ERR_METHOD_NOT_IMPLEMENTED,xa=R.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;oi(e,J);var jb=Y.errorOrDestroy,ob=["error","close","destroy","pause","resume"];Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(pa){this._readableState&&(this._readableState.destroyed=pa)}});e.prototype.destroy=Y.destroy;e.prototype._undestroy=Y.undestroy;e.prototype._destroy=function(pa,
ka){ka(pa)};e.prototype.push=function(pa,ka){var wa,Ka=this._readableState;return Ka.objectMode?wa=!0:"string"==typeof pa&&((ka=ka||Ka.defaultEncoding)!==Ka.encoding&&(pa=O.from(pa,ka),ka=""),wa=!0),m(this,pa,ka,!1,wa)};e.prototype.unshift=function(pa){return m(this,pa,null,!0,!1)};e.prototype.isPaused=function(){return!1===this._readableState.flowing};e.prototype.setEncoding=function(pa){ea||(ea=WD.StringDecoder);pa=new ea(pa);this._readableState.decoder=pa;this._readableState.encoding=this._readableState.decoder.encoding;
for(var ka=this._readableState.buffer.head,wa="";null!==ka;)wa+=pa.write(ka.data),ka=ka.next;return this._readableState.buffer.clear(),""!==wa&&this._readableState.buffer.push(wa),this._readableState.length=wa.length,this};return e.prototype.read=function(pa){S("read",pa);pa=parseInt(pa,10);var ka=this._readableState,wa=pa;if(0!==pa&&(ka.emittedReadable=!1),0===pa&&ka.needReadable&&((0!==ka.highWaterMark?ka.length>=ka.highWaterMark:0<ka.length)||ka.ended))return S("read: emitReadable",ka.length,ka.ended),
0===ka.length&&ka.ended?y(this):n(this),null;if(0===(pa=h(pa,ka))&&ka.ended)return 0===ka.length&&y(this),null;var Ka,Fb=ka.needReadable;return S("need readable",Fb),(0===ka.length||ka.length-pa<ka.highWaterMark)&&S("length less than watermark",Fb=!0),ka.ended||ka.reading?S("reading or ended",!1):Fb&&(S("do read"),ka.reading=!0,ka.sync=!0,0===ka.length&&(ka.needReadable=!0),this._read(ka.highWaterMark),ka.sync=!1,ka.reading||(pa=h(wa,ka))),null===(Ka=0<pa?v(pa,ka):null)?(ka.needReadable=ka.length<=
ka.highWaterMark,pa=0):(ka.length-=pa,ka.awaitDrain=0),0===ka.length&&(ka.ended||(ka.needReadable=!0),wa!==pa&&ka.ended&&y(this)),null!==Ka&&this.emit("data",Ka),Ka},e.prototype._read=function(pa){jb(this,new aa("_read()"))},e.prototype.pipe=function(pa,ka){function wa(Ba,Ea){S("onunpipe");Ba===Mb&&Ea&&!1===Ea.hasUnpiped&&(Ea.hasUnpiped=!0,S("cleanup"),pa.removeListener("close",Ub),pa.removeListener("finish",ac),pa.removeListener("drain",Bd),pa.removeListener("error",hc),pa.removeListener("unpipe",
wa),Mb.removeListener("end",Ka),Mb.removeListener("end",Ic),Mb.removeListener("data",Fb),ja=!0,!ed.awaitDrain||pa._writableState&&!pa._writableState.needDrain||Bd())}function Ka(){S("onend");pa.end()}function Fb(Ba){S("ondata");Ba=pa.write(Ba);S("dest.write",Ba);!1===Ba&&((1===ed.pipesCount&&ed.pipes===pa||1<ed.pipesCount&&-1!==E(ed.pipes,pa))&&!ja&&(S("false write response, pause",ed.awaitDrain),ed.awaitDrain++),Mb.pause())}function hc(Ba){S("onerror",Ba);Ic();pa.removeListener("error",hc);0===pa.listeners("error").length&&
jb(pa,Ba)}function Ub(){pa.removeListener("finish",ac);Ic()}function ac(){S("onfinish");pa.removeListener("close",Ub);Ic()}function Ic(){S("unpipe");Mb.unpipe(pa)}var Mb=this,ed=this._readableState;switch(ed.pipesCount){case 0:ed.pipes=pa;break;case 1:ed.pipes=[ed.pipes,pa];break;default:ed.pipes.push(pa)}ed.pipesCount+=1;S("pipe count=%d opts=%j",ed.pipesCount,ka);ka=ka&&!1===ka.end||pa===H.stdout||pa===H.stderr?Ic:Ka;ed.endEmitted?H.nextTick(ka):Mb.once("end",ka);pa.on("unpipe",wa);var Bd=function(Ba){return function(){var Ea=
Ba._readableState;S("pipeOnDrain",Ea.awaitDrain);Ea.awaitDrain&&Ea.awaitDrain--;0===Ea.awaitDrain&&Ba.listeners("data").length&&(Ea.flowing=!0,r(Ba))}}(Mb);pa.on("drain",Bd);var ja=!1;return Mb.on("data",Fb),function(Ba,Ea,wb){if("function"==typeof Ba.prependListener)return Ba.prependListener(Ea,wb);Ba._events&&Ba._events[Ea]?Array.isArray(Ba._events[Ea])?Ba._events[Ea].unshift(wb):Ba._events[Ea]=[wb,Ba._events[Ea]]:Ba.on(Ea,wb)}(pa,"error",hc),pa.once("close",Ub),pa.once("finish",ac),pa.emit("pipe",
Mb),ed.flowing||(S("pipe resume"),Mb.resume()),pa},e.prototype.unpipe=function(pa){var ka=this._readableState,wa={hasUnpiped:!1};if(0===ka.pipesCount)return this;if(1===ka.pipesCount)return pa&&pa!==ka.pipes||(pa||(pa=ka.pipes),ka.pipes=null,ka.pipesCount=0,ka.flowing=!1,pa&&pa.emit("unpipe",this,wa)),this;if(!pa){pa=ka.pipes;wa=ka.pipesCount;ka.pipes=null;ka.pipesCount=0;ka.flowing=!1;for(ka=0;ka<wa;ka++)pa[ka].emit("unpipe",this,{hasUnpiped:!1});return this}var Ka=E(ka.pipes,pa);return-1===Ka||
(ka.pipes.splice(Ka,1),--ka.pipesCount,1===ka.pipesCount&&(ka.pipes=ka.pipes[0]),pa.emit("unpipe",this,wa)),this},e.prototype.on=function(pa,ka){ka=J.prototype.on.call(this,pa,ka);var wa=this._readableState;return"data"===pa?(wa.readableListening=0<this.listenerCount("readable"),!1!==wa.flowing&&this.resume()):"readable"===pa&&(wa.endEmitted||wa.readableListening||(wa.readableListening=wa.needReadable=!0,wa.flowing=!1,wa.emittedReadable=!1,S("on readable",wa.length,wa.reading),wa.length?n(this):wa.reading||
H.nextTick(f,this))),ka},e.prototype.addListener=e.prototype.on,e.prototype.removeListener=function(pa,ka){ka=J.prototype.removeListener.call(this,pa,ka);return"readable"===pa&&H.nextTick(a,this),ka},e.prototype.removeAllListeners=function(pa){var ka=J.prototype.removeAllListeners.apply(this,arguments);return"readable"!==pa&&void 0!==pa||H.nextTick(a,this),ka},e.prototype.resume=function(){var pa=this._readableState;pa.flowing||(S("resume"),pa.flowing=!pa.readableListening,pa.resumeScheduled||(pa.resumeScheduled=
!0,H.nextTick(l,this,pa)));return pa.paused=!1,this},e.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},e.prototype.wrap=function(pa){var ka=this,wa=this._readableState,Ka=!1,Fb;for(Fb in pa.on("end",function(){if(S("wrapped end"),wa.decoder&&!wa.ended){var hc=wa.decoder.end();hc&&hc.length&&ka.push(hc)}ka.push(null)}),pa.on("data",
function(hc){(S("wrapped data"),wa.decoder&&(hc=wa.decoder.write(hc)),wa.objectMode&&null==hc)||(wa.objectMode||hc&&hc.length)&&(ka.push(hc)||(Ka=!0,pa.pause()))}),pa)void 0===this[Fb]&&"function"==typeof pa[Fb]&&(this[Fb]=function(hc){return function(){return pa[hc].apply(pa,arguments)}}(Fb));for(Fb=0;Fb<ob.length;Fb++)pa.on(ob[Fb],this.emit.bind(this,ob[Fb]));return this._read=function(hc){S("wrapped _read",hc);Ka&&(Ka=!1,pa.resume())},this},"function"==typeof Symbol&&(e.prototype[Symbol.asyncIterator]=
function(){return void 0===qa&&(qa=Yha),qa(this)}),Object.defineProperty(e.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(e.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(e.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(pa){this._readableState&&(this._readableState.flowing=
pa)}}),e._fromList=v,Object.defineProperty(e.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(e.from=function(pa,ka){return void 0===Fa&&(Fa=t3),Fa(e,pa,ka)}),XS}function Zha(){function g(R){var U=this;this.entry=this.next=null;this.finish=function(){var na=U.entry;for(U.entry=null;na;){var aa=na.callback;R.pendingcb--;aa(void 0);na=na.next}R.corkedRequestsFree.next=U;!0}}function e(){}function m(R,U,na){f=f||QG();R=R||{};"boolean"!=
typeof na&&(na=U instanceof f);this.objectMode=!!R.objectMode;na&&(this.objectMode=this.objectMode||!!R.writableObjectMode);this.highWaterMark=H(this,R,"writableHighWaterMark",na);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==R.decodeStrings;this.defaultEncoding=R.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(aa){!function(xa,jb){var ob=xa._writableState,
pa=ob.sync,ka=ob.writecb;if("function"!=typeof ka)throw new Y;(function(wa){wa.writing=!1;wa.writecb=null;wa.length-=wa.writelen;wa.writelen=0}(ob),jb)?!function(wa,Ka,Fb,hc,Ub){--Ka.pendingcb;Fb?(l.nextTick(Ub,hc),l.nextTick(a,wa,Ka),wa._writableState.errorEmitted=!0,Z(wa,hc)):(Ub(hc),wa._writableState.errorEmitted=!0,Z(wa,hc),a(wa,Ka))}(xa,ob,pa,jb,ka):((jb=d(ob)||xa.destroyed)||ob.corked||ob.bufferProcessing||!ob.bufferedRequest||b(xa,ob),pa?l.nextTick(n,xa,ob,jb,ka):n(xa,ob,jb,ka))}(U,aa)};this.writecb=
null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==R.emitClose;this.autoDestroy=!!R.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function c(R){var U=this instanceof(f=f||QG());if(!U&&!E.call(c,this))return new c(R);this._writableState=new m(R,this,U);this.writable=!0;R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),
"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final));v.call(this)}function h(R,U,na,aa,xa,jb,ob){U.writelen=aa;U.writecb=ob;U.writing=!0;U.sync=!0;U.destroyed?U.onwrite(new ea("write")):na?R._writev(xa,U.onwrite):R._write(xa,jb,U.onwrite);U.sync=!1}function n(R,U,na,aa){na||(0===U.length&&U.needDrain&&(U.needDrain=!1,R.emit("drain")),!0);U.pendingcb--;aa();a(R,U)}function b(R,U){U.bufferProcessing=!0;var na=U.bufferedRequest;if(R._writev&&na&&
na.next){var aa=Array(U.bufferedRequestCount),xa=U.corkedRequestsFree;xa.entry=na;for(var jb=0,ob=!0;na;)aa[jb]=na,na.isBuf||(ob=!1),na=na.next,jb+=1;aa.allBuffers=ob;h(R,U,!0,U.length,aa,"",xa.finish);U.pendingcb++;U.lastBufferedRequest=null;xa.next?(U.corkedRequestsFree=xa.next,xa.next=null):U.corkedRequestsFree=new g(U);U.bufferedRequestCount=0}else{for(;na&&(aa=na.chunk,h(R,U,!1,U.objectMode?1:aa.length,aa,na.encoding,na.callback),na=na.next,U.bufferedRequestCount--,!U.writing););null===na&&(U.lastBufferedRequest=
null)}U.bufferedRequest=na;U.bufferProcessing=!1}function d(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function k(R,U){R._final(function(na){U.pendingcb--;na&&Z(R,na);U.prefinished=!0;R.emit("prefinish");a(R,U)})}function a(R,U){var na=d(U),aa;if(aa=na)U.prefinished||U.finalCalled||("function"!=typeof R._final||U.destroyed?(U.prefinished=!0,R.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,l.nextTick(k,R,U))),aa=(!0,0===U.pendingcb&&(U.finished=!0,R.emit("finish"),
U.autoDestroy));aa&&(U=R._readableState,(!U||U.autoDestroy&&U.endEmitted)&&R.destroy());return na}if(u3)return YS;u3=!0;var f,l=bj;YS=c;c.WritableState=m;var r={deprecate:v3},v=IL,y=ei.Buffer,A=$ha.Uint8Array||function(){},E,F=r3,H=s3.getHighWaterMark,J=tt.codes,O=J.ERR_INVALID_ARG_TYPE,L=J.ERR_METHOD_NOT_IMPLEMENTED,Y=J.ERR_MULTIPLE_CALLBACK,S=J.ERR_STREAM_CANNOT_PIPE,ea=J.ERR_STREAM_DESTROYED,qa=J.ERR_STREAM_NULL_VALUES,Fa=J.ERR_STREAM_WRITE_AFTER_END,K=J.ERR_UNKNOWN_ENCODING,Z=F.errorOrDestroy;
return oi(c,v),m.prototype.getBuffer=function(){for(var R=this.bufferedRequest,U=[];R;)U.push(R),R=R.next;return U},function(){try{Object.defineProperty(m.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,
Symbol.hasInstance,{value:function(R){return!!E.call(this,R)||this===c&&R&&R._writableState instanceof m}})):E=function(R){return R instanceof this},c.prototype.pipe=function(){Z(this,new S)},c.prototype.write=function(R,U,na){var aa,xa=this._writableState,jb=!1,ob=!xa.objectMode&&(aa=R,y.isBuffer(aa)||aa instanceof A);return ob&&!y.isBuffer(R)&&(R=y.from(R)),"function"==typeof U&&(na=U,U=null),ob?U="buffer":U||(U=xa.defaultEncoding),"function"!=typeof na&&(na=e),xa.ending?function(pa,ka){var wa=
new Fa;Z(pa,wa);l.nextTick(ka,wa)}(this,na):(ob||function(pa,ka,wa,Ka){var Fb;return null===wa?Fb=new qa:"string"==typeof wa||ka.objectMode||(Fb=new O("chunk",["string","Buffer"],wa)),!Fb||(Z(pa,Fb),l.nextTick(Ka,Fb),!1)}(this,xa,R,na))&&(xa.pendingcb++,jb=function(pa,ka,wa,Ka,Fb,hc){if(!wa){var Ub=Ka;ka.objectMode||!1===ka.decodeStrings||"string"!=typeof Ub||(Ub=y.from(Ub,Fb));Ka!==Ub&&(wa=!0,Fb="buffer",Ka=Ub)}var ac=ka.objectMode?1:Ka.length;ka.length+=ac;(Ub=ka.length<ka.highWaterMark)||(ka.needDrain=
!0);ka.writing||ka.corked?(pa=ka.lastBufferedRequest,ka.lastBufferedRequest={chunk:Ka,encoding:Fb,isBuf:wa,callback:hc,next:null},pa?pa.next=ka.lastBufferedRequest:ka.bufferedRequest=ka.lastBufferedRequest,ka.bufferedRequestCount+=1):h(pa,ka,!1,ac,Ka,Fb,hc);return Ub}(this,xa,ob,R,U,na)),jb},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||b(this,R))},
c.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((R+"").toLowerCase())))throw new K(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
c.prototype._write=function(R,U,na){na(new L("_write()"))},c.prototype._writev=null,c.prototype.end=function(R,U,na){var aa=this._writableState;"function"==typeof R?(na=R,R=null,U=null):"function"==typeof U&&(na=U,U=null);null!=R&&this.write(R,U);aa.corked&&(aa.corked=1,this.uncork());aa.ending||(R=na,aa.ending=!0,a(this,aa),R&&(aa.finished?l.nextTick(R):this.once("finish",R)),aa.ended=!0,this.writable=!1);return this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),c.prototype.destroy=F.destroy,c.prototype._undestroy=F.undestroy,c.prototype._destroy=function(R,U){U(R)},YS}function QG(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&
(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",e)))}function e(){this._writableState.ended||c.nextTick(m,this)}function m(a){a.end()}if(w3)return ZS;w3=!0;var c=bj,h=Object.keys||function(a){var f=[],l;for(l in a)f.push(l);return f};ZS=g;var n=p3(),b=Zha();oi(g,n);h=h(b.prototype);for(var d=0;d<h.length;d++){var k=h[d];g.prototype[k]||(g.prototype[k]=b.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),ZS}function aia(){}function x3(g,e){var m=Object.keys(g);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(g);e&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(g,h).enumerable}));m.push.apply(m,c)}return m}function bia(g,e){for(var m=0;m<e.length;m++){var c=e[m];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(g,c.key,
c)}}function y3(g,e){$S(g,e);JL(g)}function JL(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function $S(g,e){g.emit("error",e)}function bz(g,e,m){return e in g?Object.defineProperty(g,e,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[e]=m,g}function cz(g,e){return{value:g,done:e}}function cia(g){var e=g[dz];if(null!==e){var m=g[oB].read();null!==m&&(g[pB]=null,g[dz]=null,g[qB]=null,e(cz(m,!1)))}}function dia(g){z3.nextTick(cia,
g)}function eia(){function g(pa,ka,wa){F=F||KL();pa=pa||{};"boolean"!=typeof wa&&(wa=ka instanceof F);this.objectMode=!!pa.objectMode;wa&&(this.objectMode=this.objectMode||!!pa.readableObjectMode);this.highWaterMark=Z(this,pa,"readableHighWaterMark",wa);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=
!1!==pa.emitClose;this.autoDestroy=!!pa.autoDestroy;this.destroyed=!1;this.defaultEncoding=pa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;pa.encoding&&(ea||(ea=WD.StringDecoder),this.decoder=new ea(pa.encoding),this.encoding=pa.encoding)}function e(pa){if(F=F||KL(),!(this instanceof e))return new e(pa);this._readableState=new g(pa,this,this instanceof F);this.readable=!0;pa&&("function"==typeof pa.read&&(this._read=pa.read),"function"==typeof pa.destroy&&
(this._destroy=pa.destroy));J.call(this)}function m(pa,ka,wa,Ka,Fb){S("readableAddChunk",ka);var hc,Ub=pa._readableState;if(null===ka)Ub.reading=!1,function(ac,Ic){if(S("onEofChunk"),!Ic.ended){if(Ic.decoder){var Mb=Ic.decoder.end();Mb&&Mb.length&&(Ic.buffer.push(Mb),Ic.length+=Ic.objectMode?1:Mb.length)}Ic.ended=!0;Ic.sync?n(ac):(Ic.needReadable=!1,Ic.emittedReadable||(Ic.emittedReadable=!0,b(ac)))}}(pa,Ub);else if(Fb||(hc=function(ac,Ic){var Mb;var ed=Ic;O.isBuffer(ed)||ed instanceof L||"string"==
typeof Ic||void 0===Ic||ac.objectMode||(Mb=new U("chunk",["string","Buffer","Uint8Array"],Ic));return Mb}(Ub,ka)),hc)jb(pa,hc);else if(Ub.objectMode||ka&&0<ka.length)if("string"==typeof ka||Ub.objectMode||Object.getPrototypeOf(ka)===O.prototype||(ka=O.from(ka)),Ka)Ub.endEmitted?jb(pa,new xa):c(pa,Ub,ka,!0);else if(Ub.ended)jb(pa,new na);else{if(Ub.destroyed)return!1;Ub.reading=!1;Ub.decoder&&!wa?(ka=Ub.decoder.write(ka),Ub.objectMode||0!==ka.length?c(pa,Ub,ka,!1):d(pa,Ub)):c(pa,Ub,ka,!1)}else Ka||
(Ub.reading=!1,d(pa,Ub));return!Ub.ended&&(Ub.length<Ub.highWaterMark||0===Ub.length)}function c(pa,ka,wa,Ka){ka.flowing&&0===ka.length&&!ka.sync?(ka.awaitDrain=0,pa.emit("data",wa)):(ka.length+=ka.objectMode?1:wa.length,Ka?ka.buffer.unshift(wa):ka.buffer.push(wa),ka.needReadable&&n(pa));d(pa,ka)}function h(pa,ka){if(0>=pa||0===ka.length&&ka.ended)pa=0;else if(ka.objectMode)pa=1;else if(pa!=pa)pa=ka.flowing&&ka.length?ka.buffer.head.data.length:ka.length;else{if(pa>ka.highWaterMark){var wa=pa;var Ka=
(1073741824<=wa?wa=1073741824:(wa--,wa|=wa>>>1,wa|=wa>>>2,wa|=wa>>>4,wa|=wa>>>8,wa|=wa>>>16,wa++),wa);ka.highWaterMark=Ka}pa=pa<=ka.length?pa:ka.ended?ka.length:(ka.needReadable=!0,0)}return pa}function n(pa){var ka=pa._readableState;S("emitReadable",ka.needReadable,ka.emittedReadable);ka.needReadable=!1;ka.emittedReadable||(S("emitReadable",ka.flowing),ka.emittedReadable=!0,H.nextTick(b,pa))}function b(pa){var ka=pa._readableState;S("emitReadable_",ka.destroyed,ka.length,ka.ended);ka.destroyed||
!ka.length&&!ka.ended||(pa.emit("readable"),ka.emittedReadable=!1);ka.needReadable=!ka.flowing&&!ka.ended&&ka.length<=ka.highWaterMark;r(pa)}function d(pa,ka){ka.readingMore||(ka.readingMore=!0,H.nextTick(k,pa,ka))}function k(pa,ka){for(;!ka.reading&&!ka.ended&&(ka.length<ka.highWaterMark||ka.flowing&&0===ka.length);){var wa=ka.length;if(S("maybeReadMore read 0"),pa.read(0),wa===ka.length)break}ka.readingMore=!1}function a(pa){var ka=pa._readableState;ka.readableListening=0<pa.listenerCount("readable");
ka.resumeScheduled&&!ka.paused?ka.flowing=!0:0<pa.listenerCount("data")&&pa.resume()}function f(pa){S("readable nexttick read 0");pa.read(0)}function l(pa,ka){S("resume",ka.reading);ka.reading||pa.read(0);ka.resumeScheduled=!1;pa.emit("resume");r(pa);ka.flowing&&!ka.reading&&pa.read(0)}function r(pa){var ka=pa._readableState;for(S("flow",ka.flowing);ka.flowing&&null!==pa.read(););}function v(pa,ka){return 0===ka.length?null:(ka.objectMode?wa=ka.buffer.shift():!pa||pa>=ka.length?(wa=ka.decoder?ka.buffer.join(""):
1===ka.buffer.length?ka.buffer.first():ka.buffer.concat(ka.length),ka.buffer.clear()):wa=ka.buffer.consume(pa,ka.decoder),wa);var wa}function y(pa){var ka=pa._readableState;S("endReadable",ka.endEmitted);ka.endEmitted||(ka.ended=!0,H.nextTick(A,ka,pa))}function A(pa,ka){if(S("endReadableNT",pa.endEmitted,pa.length),!pa.endEmitted&&0===pa.length&&(pa.endEmitted=!0,ka.readable=!1,ka.emit("end"),pa.autoDestroy))pa=ka._writableState,(!pa||pa.autoDestroy&&pa.finished)&&ka.destroy()}function E(pa,ka){for(var wa=
0,Ka=pa.length;wa<Ka;wa++)if(pa[wa]===ka)return wa;return-1}if(A3)return aT;A3=!0;var F,H=bj;aT=e;e.ReadableState=g;ov.EventEmitter;var J=IL,O=ei.Buffer,L=fia.Uint8Array||function(){},Y=Oh;var S=Y&&Y.debuglog?Y.debuglog("stream"):function(){};var ea,qa,Fa,K=gia;Y=B3;var Z=C3.getHighWaterMark,R=tt.codes,U=R.ERR_INVALID_ARG_TYPE,na=R.ERR_STREAM_PUSH_AFTER_EOF,aa=R.ERR_METHOD_NOT_IMPLEMENTED,xa=R.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;oi(e,J);var jb=Y.errorOrDestroy,ob=["error","close","destroy","pause",
"resume"];Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(pa){this._readableState&&(this._readableState.destroyed=pa)}});e.prototype.destroy=Y.destroy;e.prototype._undestroy=Y.undestroy;e.prototype._destroy=function(pa,ka){ka(pa)};e.prototype.push=function(pa,ka){var wa,Ka=this._readableState;return Ka.objectMode?wa=!0:"string"==typeof pa&&((ka=ka||Ka.defaultEncoding)!==Ka.encoding&&(pa=O.from(pa,
ka),ka=""),wa=!0),m(this,pa,ka,!1,wa)};e.prototype.unshift=function(pa){return m(this,pa,null,!0,!1)};e.prototype.isPaused=function(){return!1===this._readableState.flowing};e.prototype.setEncoding=function(pa){ea||(ea=WD.StringDecoder);pa=new ea(pa);this._readableState.decoder=pa;this._readableState.encoding=this._readableState.decoder.encoding;for(var ka=this._readableState.buffer.head,wa="";null!==ka;)wa+=pa.write(ka.data),ka=ka.next;return this._readableState.buffer.clear(),""!==wa&&this._readableState.buffer.push(wa),
this._readableState.length=wa.length,this};return e.prototype.read=function(pa){S("read",pa);pa=parseInt(pa,10);var ka=this._readableState,wa=pa;if(0!==pa&&(ka.emittedReadable=!1),0===pa&&ka.needReadable&&((0!==ka.highWaterMark?ka.length>=ka.highWaterMark:0<ka.length)||ka.ended))return S("read: emitReadable",ka.length,ka.ended),0===ka.length&&ka.ended?y(this):n(this),null;if(0===(pa=h(pa,ka))&&ka.ended)return 0===ka.length&&y(this),null;var Ka,Fb=ka.needReadable;return S("need readable",Fb),(0===
ka.length||ka.length-pa<ka.highWaterMark)&&S("length less than watermark",Fb=!0),ka.ended||ka.reading?S("reading or ended",!1):Fb&&(S("do read"),ka.reading=!0,ka.sync=!0,0===ka.length&&(ka.needReadable=!0),this._read(ka.highWaterMark),ka.sync=!1,ka.reading||(pa=h(wa,ka))),null===(Ka=0<pa?v(pa,ka):null)?(ka.needReadable=ka.length<=ka.highWaterMark,pa=0):(ka.length-=pa,ka.awaitDrain=0),0===ka.length&&(ka.ended||(ka.needReadable=!0),wa!==pa&&ka.ended&&y(this)),null!==Ka&&this.emit("data",Ka),Ka},e.prototype._read=
function(pa){jb(this,new aa("_read()"))},e.prototype.pipe=function(pa,ka){function wa(Ba,Ea){S("onunpipe");Ba===Mb&&Ea&&!1===Ea.hasUnpiped&&(Ea.hasUnpiped=!0,S("cleanup"),pa.removeListener("close",Ub),pa.removeListener("finish",ac),pa.removeListener("drain",Bd),pa.removeListener("error",hc),pa.removeListener("unpipe",wa),Mb.removeListener("end",Ka),Mb.removeListener("end",Ic),Mb.removeListener("data",Fb),ja=!0,!ed.awaitDrain||pa._writableState&&!pa._writableState.needDrain||Bd())}function Ka(){S("onend");
pa.end()}function Fb(Ba){S("ondata");Ba=pa.write(Ba);S("dest.write",Ba);!1===Ba&&((1===ed.pipesCount&&ed.pipes===pa||1<ed.pipesCount&&-1!==E(ed.pipes,pa))&&!ja&&(S("false write response, pause",ed.awaitDrain),ed.awaitDrain++),Mb.pause())}function hc(Ba){S("onerror",Ba);Ic();pa.removeListener("error",hc);0===pa.listeners("error").length&&jb(pa,Ba)}function Ub(){pa.removeListener("finish",ac);Ic()}function ac(){S("onfinish");pa.removeListener("close",Ub);Ic()}function Ic(){S("unpipe");Mb.unpipe(pa)}
var Mb=this,ed=this._readableState;switch(ed.pipesCount){case 0:ed.pipes=pa;break;case 1:ed.pipes=[ed.pipes,pa];break;default:ed.pipes.push(pa)}ed.pipesCount+=1;S("pipe count=%d opts=%j",ed.pipesCount,ka);ka=ka&&!1===ka.end||pa===H.stdout||pa===H.stderr?Ic:Ka;ed.endEmitted?H.nextTick(ka):Mb.once("end",ka);pa.on("unpipe",wa);var Bd=function(Ba){return function(){var Ea=Ba._readableState;S("pipeOnDrain",Ea.awaitDrain);Ea.awaitDrain&&Ea.awaitDrain--;0===Ea.awaitDrain&&Ba.listeners("data").length&&(Ea.flowing=
!0,r(Ba))}}(Mb);pa.on("drain",Bd);var ja=!1;return Mb.on("data",Fb),function(Ba,Ea,wb){if("function"==typeof Ba.prependListener)return Ba.prependListener(Ea,wb);Ba._events&&Ba._events[Ea]?Array.isArray(Ba._events[Ea])?Ba._events[Ea].unshift(wb):Ba._events[Ea]=[wb,Ba._events[Ea]]:Ba.on(Ea,wb)}(pa,"error",hc),pa.once("close",Ub),pa.once("finish",ac),pa.emit("pipe",Mb),ed.flowing||(S("pipe resume"),Mb.resume()),pa},e.prototype.unpipe=function(pa){var ka=this._readableState,wa={hasUnpiped:!1};if(0===
ka.pipesCount)return this;if(1===ka.pipesCount)return pa&&pa!==ka.pipes||(pa||(pa=ka.pipes),ka.pipes=null,ka.pipesCount=0,ka.flowing=!1,pa&&pa.emit("unpipe",this,wa)),this;if(!pa){pa=ka.pipes;wa=ka.pipesCount;ka.pipes=null;ka.pipesCount=0;ka.flowing=!1;for(ka=0;ka<wa;ka++)pa[ka].emit("unpipe",this,{hasUnpiped:!1});return this}var Ka=E(ka.pipes,pa);return-1===Ka||(ka.pipes.splice(Ka,1),--ka.pipesCount,1===ka.pipesCount&&(ka.pipes=ka.pipes[0]),pa.emit("unpipe",this,wa)),this},e.prototype.on=function(pa,
ka){ka=J.prototype.on.call(this,pa,ka);var wa=this._readableState;return"data"===pa?(wa.readableListening=0<this.listenerCount("readable"),!1!==wa.flowing&&this.resume()):"readable"===pa&&(wa.endEmitted||wa.readableListening||(wa.readableListening=wa.needReadable=!0,wa.flowing=!1,wa.emittedReadable=!1,S("on readable",wa.length,wa.reading),wa.length?n(this):wa.reading||H.nextTick(f,this))),ka},e.prototype.addListener=e.prototype.on,e.prototype.removeListener=function(pa,ka){ka=J.prototype.removeListener.call(this,
pa,ka);return"readable"===pa&&H.nextTick(a,this),ka},e.prototype.removeAllListeners=function(pa){var ka=J.prototype.removeAllListeners.apply(this,arguments);return"readable"!==pa&&void 0!==pa||H.nextTick(a,this),ka},e.prototype.resume=function(){var pa=this._readableState;pa.flowing||(S("resume"),pa.flowing=!pa.readableListening,pa.resumeScheduled||(pa.resumeScheduled=!0,H.nextTick(l,this,pa)));return pa.paused=!1,this},e.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),
!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},e.prototype.wrap=function(pa){var ka=this,wa=this._readableState,Ka=!1,Fb;for(Fb in pa.on("end",function(){if(S("wrapped end"),wa.decoder&&!wa.ended){var hc=wa.decoder.end();hc&&hc.length&&ka.push(hc)}ka.push(null)}),pa.on("data",function(hc){(S("wrapped data"),wa.decoder&&(hc=wa.decoder.write(hc)),wa.objectMode&&null==hc)||(wa.objectMode||hc&&hc.length)&&(ka.push(hc)||
(Ka=!0,pa.pause()))}),pa)void 0===this[Fb]&&"function"==typeof pa[Fb]&&(this[Fb]=function(hc){return function(){return pa[hc].apply(pa,arguments)}}(Fb));for(Fb=0;Fb<ob.length;Fb++)pa.on(ob[Fb],this.emit.bind(this,ob[Fb]));return this._read=function(hc){S("wrapped _read",hc);Ka&&(Ka=!1,pa.resume())},this},"function"==typeof Symbol&&(e.prototype[Symbol.asyncIterator]=function(){return void 0===qa&&(qa=hia),qa(this)}),Object.defineProperty(e.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),
Object.defineProperty(e.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(e.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(pa){this._readableState&&(this._readableState.flowing=pa)}}),e._fromList=v,Object.defineProperty(e.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(e.from=function(pa,
ka){return void 0===Fa&&(Fa=t3),Fa(e,pa,ka)}),aT}function D3(){function g(R){var U=this;this.entry=this.next=null;this.finish=function(){var na=U.entry;for(U.entry=null;na;){var aa=na.callback;R.pendingcb--;aa(void 0);na=na.next}R.corkedRequestsFree.next=U;!0}}function e(){}function m(R,U,na){f=f||KL();R=R||{};"boolean"!=typeof na&&(na=U instanceof f);this.objectMode=!!R.objectMode;na&&(this.objectMode=this.objectMode||!!R.writableObjectMode);this.highWaterMark=H(this,R,"writableHighWaterMark",na);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==R.decodeStrings;this.defaultEncoding=R.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(aa){!function(xa,jb){var ob=xa._writableState,pa=ob.sync,ka=ob.writecb;if("function"!=typeof ka)throw new Y;(function(wa){wa.writing=!1;wa.writecb=null;wa.length-=wa.writelen;wa.writelen=0}(ob),jb)?!function(wa,Ka,Fb,hc,Ub){--Ka.pendingcb;
Fb?(l.nextTick(Ub,hc),l.nextTick(a,wa,Ka),wa._writableState.errorEmitted=!0,Z(wa,hc)):(Ub(hc),wa._writableState.errorEmitted=!0,Z(wa,hc),a(wa,Ka))}(xa,ob,pa,jb,ka):((jb=d(ob)||xa.destroyed)||ob.corked||ob.bufferProcessing||!ob.bufferedRequest||b(xa,ob),pa?l.nextTick(n,xa,ob,jb,ka):n(xa,ob,jb,ka))}(U,aa)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==R.emitClose;this.autoDestroy=!!R.autoDestroy;
this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function c(R){var U=this instanceof(f=f||KL());if(!U&&!E.call(c,this))return new c(R);this._writableState=new m(R,this,U);this.writable=!0;R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final));v.call(this)}function h(R,U,na,aa,xa,jb,ob){U.writelen=aa;U.writecb=ob;U.writing=!0;
U.sync=!0;U.destroyed?U.onwrite(new ea("write")):na?R._writev(xa,U.onwrite):R._write(xa,jb,U.onwrite);U.sync=!1}function n(R,U,na,aa){na||(0===U.length&&U.needDrain&&(U.needDrain=!1,R.emit("drain")),!0);U.pendingcb--;aa();a(R,U)}function b(R,U){U.bufferProcessing=!0;var na=U.bufferedRequest;if(R._writev&&na&&na.next){var aa=Array(U.bufferedRequestCount),xa=U.corkedRequestsFree;xa.entry=na;for(var jb=0,ob=!0;na;)aa[jb]=na,na.isBuf||(ob=!1),na=na.next,jb+=1;aa.allBuffers=ob;h(R,U,!0,U.length,aa,"",
xa.finish);U.pendingcb++;U.lastBufferedRequest=null;xa.next?(U.corkedRequestsFree=xa.next,xa.next=null):U.corkedRequestsFree=new g(U);U.bufferedRequestCount=0}else{for(;na&&(aa=na.chunk,h(R,U,!1,U.objectMode?1:aa.length,aa,na.encoding,na.callback),na=na.next,U.bufferedRequestCount--,!U.writing););null===na&&(U.lastBufferedRequest=null)}U.bufferedRequest=na;U.bufferProcessing=!1}function d(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function k(R,U){R._final(function(na){U.pendingcb--;
na&&Z(R,na);U.prefinished=!0;R.emit("prefinish");a(R,U)})}function a(R,U){var na=d(U),aa;if(aa=na)U.prefinished||U.finalCalled||("function"!=typeof R._final||U.destroyed?(U.prefinished=!0,R.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,l.nextTick(k,R,U))),aa=(!0,0===U.pendingcb&&(U.finished=!0,R.emit("finish"),U.autoDestroy));aa&&(U=R._readableState,(!U||U.autoDestroy&&U.endEmitted)&&R.destroy());return na}if(E3)return bT;E3=!0;var f,l=bj;bT=c;c.WritableState=m;var r={deprecate:v3},v=IL,y=ei.Buffer,
A=iia.Uint8Array||function(){},E,F=B3,H=C3.getHighWaterMark,J=tt.codes,O=J.ERR_INVALID_ARG_TYPE,L=J.ERR_METHOD_NOT_IMPLEMENTED,Y=J.ERR_MULTIPLE_CALLBACK,S=J.ERR_STREAM_CANNOT_PIPE,ea=J.ERR_STREAM_DESTROYED,qa=J.ERR_STREAM_NULL_VALUES,Fa=J.ERR_STREAM_WRITE_AFTER_END,K=J.ERR_UNKNOWN_ENCODING,Z=F.errorOrDestroy;return oi(c,v),m.prototype.getBuffer=function(){for(var R=this.bufferedRequest,U=[];R;)U.push(R),R=R.next;return U},function(){try{Object.defineProperty(m.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},
"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(R){return!!E.call(this,R)||this===c&&R&&R._writableState instanceof m}})):E=function(R){return R instanceof this},c.prototype.pipe=function(){Z(this,new S)},c.prototype.write=function(R,U,na){var aa,
xa=this._writableState,jb=!1,ob=!xa.objectMode&&(aa=R,y.isBuffer(aa)||aa instanceof A);return ob&&!y.isBuffer(R)&&(R=y.from(R)),"function"==typeof U&&(na=U,U=null),ob?U="buffer":U||(U=xa.defaultEncoding),"function"!=typeof na&&(na=e),xa.ending?function(pa,ka){var wa=new Fa;Z(pa,wa);l.nextTick(ka,wa)}(this,na):(ob||function(pa,ka,wa,Ka){var Fb;return null===wa?Fb=new qa:"string"==typeof wa||ka.objectMode||(Fb=new O("chunk",["string","Buffer"],wa)),!Fb||(Z(pa,Fb),l.nextTick(Ka,Fb),!1)}(this,xa,R,na))&&
(xa.pendingcb++,jb=function(pa,ka,wa,Ka,Fb,hc){if(!wa){var Ub=Ka;ka.objectMode||!1===ka.decodeStrings||"string"!=typeof Ub||(Ub=y.from(Ub,Fb));Ka!==Ub&&(wa=!0,Fb="buffer",Ka=Ub)}var ac=ka.objectMode?1:Ka.length;ka.length+=ac;(Ub=ka.length<ka.highWaterMark)||(ka.needDrain=!0);ka.writing||ka.corked?(pa=ka.lastBufferedRequest,ka.lastBufferedRequest={chunk:Ka,encoding:Fb,isBuf:wa,callback:hc,next:null},pa?pa.next=ka.lastBufferedRequest:ka.bufferedRequest=ka.lastBufferedRequest,ka.bufferedRequestCount+=
1):h(pa,ka,!1,ac,Ka,Fb,hc);return Ub}(this,xa,ob,R,U,na)),jb},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||b(this,R))},c.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((R+"").toLowerCase())))throw new K(R);return this._writableState.defaultEncoding=
R,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(R,U,na){na(new L("_write()"))},c.prototype._writev=null,c.prototype.end=function(R,U,na){var aa=this._writableState;"function"==typeof R?(na=R,R=null,U=null):"function"==typeof U&&(na=U,U=null);
null!=R&&this.write(R,U);aa.corked&&(aa.corked=1,this.uncork());aa.ending||(R=na,aa.ending=!0,a(this,aa),R&&(aa.finished?l.nextTick(R):this.once("finish",R)),aa.ended=!0,this.writable=!1);return this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=
R)}}),c.prototype.destroy=F.destroy,c.prototype._undestroy=F.undestroy,c.prototype._destroy=function(R,U){U(R)},bT}function KL(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",e)))}function e(){this._writableState.ended||c.nextTick(m,this)}function m(a){a.end()}if(F3)return cT;F3=!0;var c=bj,h=Object.keys||
function(a){var f=[],l;for(l in a)f.push(l);return f};cT=g;var n=eia(),b=D3();oi(g,n);h=h(b.prototype);for(var d=0;d<h.length;d++){var k=h[d];g.prototype[k]||(g.prototype[k]=b.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),cT}function jia(g,e){var m=this._transformState;m.transforming=!1;var c=
m.writecb;if(null===c)return this.emit("error",new kia);m.writechunk=null;m.writecb=null;null!=e&&this.push(e);c(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function pv(g){if(!(this instanceof pv))return new pv(g);LL.call(this,g);this._transformState={afterTransform:jia.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==
typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush));this.on("prefinish",lia)}function lia(){var g=this;"function"!=typeof this._flush||this._readableState.destroyed?G3(this,null,null):this._flush(function(e,m){G3(g,e,m)})}function G3(g,e,m){if(e)return g.emit("error",e);if(null!=m&&g.push(m),g._writableState.length)throw new mia;if(g._transformState.transforming)throw new nia;return g.push(null)}function RG(g){if(!(this instanceof RG))return new RG(g);
H3.call(this,g)}function I3(g){if(g)throw g;}function oia(g,e,m,c){c=function(b){var d=!1;return function(){d||(d=!0,b.apply(void 0,arguments))}}(c);var h=!1;g.on("close",function(){h=!0});void 0===dT&&(dT=eT);dT(g,{readable:e,writable:m},function(b){if(b)return c(b);h=!0;c()});var n=!1;return function(b){if(!h&&!n)return n=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(c(b||new pia("pipe")),void 0)}}function J3(g){g()}function qia(g,e){return g.pipe(e)}
function as(){fT.call(this||gT)}function ML(){}function dx(g){K3.call(this);this._block=NL.allocUnsafe(g);this._blockSize=g;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function XD(){L3.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function OL(g,e){return g<<e|g>>>32-e}function Go(g,e,m,c,h,n,b){return OL(g+(e&m|~e&c)+h+n|0,b)+e|0}function Ho(g,e,m,c,h,n,b){return OL(g+(e&c|m&~c)+h+n|0,b)+e|0}function Io(g,e,m,c,h,n,b){return OL(g+(e^m^c)+
h+n|0,b)+e|0}function Jo(g,e,m,c,h,n,b){return OL(g+(m^(e|~c))+h+n|0,b)+e|0}function YD(){M3.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function bs(g,e){return g<<e|g>>>32-e}function ex(g,e){(this||hl)._block=N3.alloc(g);(this||hl)._finalSize=e;(this||hl)._blockSize=g;(this||hl)._len=0}function ZD(){this.init();(this||fi)._w=ria;O3.call(this||fi,64,56)}function SG(){this.init();(this||tk)._w=sia;P3.call(this||tk,64,56)}function TG(){this.init();
(this||uk)._w=tia;Q3.call(this||uk,64,56)}function PL(){this.init();(this||Cn)._w=uia;via.call(this||Cn,64,56)}function $D(){this.init();(this||cf)._w=wia;R3.call(this||cf,128,112)}function Dn(g,e){return g>>>0<e>>>0?1:0}function QL(){this.init();(this||Xj)._w=xia;yia.call(this||Xj,128,112)}function En(g){S3.call(this||Ql);(this||Ql).hashMode="string"==typeof g;(this||Ql).hashMode?(this||Ql)[g]=(this||Ql)._finalOrDigest:(this||Ql).final=(this||Ql)._finalOrDigest;(this||Ql)._final&&((this||Ql).__final=
(this||Ql)._final,(this||Ql)._final=null);(this||Ql)._decoder=null;(this||Ql)._encoding=null}function RL(g){T3.call(this,"digest");this._hash=g}function SL(g,e){U3.call(this,"digest");"string"==typeof e&&(e=rB.from(e));this._alg=g;this._key=e;64<e.length?e=g(e):64>e.length&&(e=rB.concat([e,zia],64));g=this._ipad=rB.allocUnsafe(64);for(var m=this._opad=rB.allocUnsafe(64),c=0;64>c;c++)g[c]=54^e[c],m[c]=92^e[c];this._hash=[g]}function UG(g,e){V3.call(this,"digest");"string"==typeof e&&(e=VG.from(e));
var m="sha512"===g||"sha384"===g?128:64;(this._alg=g,this._key=e,e.length>m)?e=("rmd160"===g?new hT:iT(g)).update(e).digest():e.length<m&&(e=VG.concat([e,Aia],m));for(var c=this._ipad=VG.allocUnsafe(m),h=this._opad=VG.allocUnsafe(m),n=0;n<m;n++)c[n]=54^e[n],h[n]=92^e[n];this._hash="rmd160"===g?new hT:iT(g);this._hash.update(c)}function W3(g,e){if("string"!=typeof g&&!Bia.isBuffer(g))throw new TypeError(e+" must be a buffer or string");}function X3(g,e,m){var c=function(k){function a(f){return Cia(k).update(f).digest()}
return"rmd160"===k||"ripemd160"===k?function(f){return(new Dia).update(f).digest()}:"md5"===k?Eia:a}(g),h="sha512"===g||"sha384"===g?128:64;e.length>h?e=c(e):e.length<h&&(e=ut.concat([e,Fia],h));for(var n=ut.allocUnsafe(h+TL[g]),b=ut.allocUnsafe(h+TL[g]),d=0;d<h;d++)n[d]=54^e[d],b[d]=92^e[d];e=ut.allocUnsafe(h+m+4);n.copy(e,0,0,h);(this||vt).ipad1=e;(this||vt).ipad2=n;(this||vt).opad=b;(this||vt).alg=g;(this||vt).blocksize=h;(this||vt).hash=c;(this||vt).size=TL[g]}function Y3(g,e,m,c,h){return WG.importKey("raw",
g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return WG.deriveBits({name:"PBKDF2",salt:e,iterations:m,hash:{name:h}},n,c<<3)}).then(function(n){return aE.from(n)})}function Z3(g,e){if(!g)throw Error(e||"Assertion failed");}function Zq(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function Gia(){this.tmp=Array(2);this.keys=null}function cs(g){$3.call(this,g);var e=new Gia;this._desState=e;this.deriveKeys(e,g.key)}
function Hia(g){Iia.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=g[e]}function Jia(g,e){Kia.equal(e.length,24,"Invalid key length");var m=e.slice(0,8),c=e.slice(8,16);e=e.slice(16,24);this.ciphers="encrypt"===g?[ez.create({type:"encrypt",key:m}),ez.create({type:"decrypt",key:c}),ez.create({type:"encrypt",key:e})]:[ez.create({type:"decrypt",key:e}),ez.create({type:"encrypt",key:c}),ez.create({type:"decrypt",key:m})]}function qv(g){a4.call(this,
g);this._edeState=new Jia(this.type,this.options.key)}function UL(g){b4.call(this||VL);var e=g.mode.toLowerCase(),m=XG[e];var c=g.decrypt?"decrypt":"encrypt";var h=g.key;sB.isBuffer(h)||(h=sB.from(h));"des-ede"!==e&&"des-ede-cbc"!==e||(h=sB.concat([h,h.slice(0,8)]));g=g.iv;sB.isBuffer(g)||(g=sB.from(g));(this||VL)._des=m.create({key:h,iv:g,type:c})}function c4(g,e,m){var c=e.length,h=Lia(e,g._cache);return g._cache=g._cache.slice(c),g._prev=YG.concat([g._prev,m?e:h]),h}function Mia(g){return g._prev=
g._cipher.encryptBlock(g._prev),g._prev}function jT(g){WL.isBuffer(g)||(g=WL.from(g));for(var e=g.length/4|0,m=Array(e),c=0;c<e;c++)m[c]=g.readUInt32BE(4*c);return m}function kT(g){for(;0<g.length;g++)g[0]=0}function d4(g,e,m,c,h){var n=m[0],b=m[1],d=m[2];m=m[3];var k=g[0]^e[0],a=g[1]^e[1],f=g[2]^e[2];g=g[3]^e[3];for(var l=4,r=1;r<h;r++){var v=n[k>>>24]^b[a>>>16&255]^d[f>>>8&255]^m[255&g]^e[l++];var y=n[a>>>24]^b[f>>>16&255]^d[g>>>8&255]^m[255&k]^e[l++];var A=n[f>>>24]^b[g>>>16&255]^d[k>>>8&255]^
m[255&a]^e[l++];var E=n[g>>>24]^b[k>>>16&255]^d[a>>>8&255]^m[255&f]^e[l++];k=v;a=y;f=A;g=E}return v=(c[k>>>24]<<24|c[a>>>16&255]<<16|c[f>>>8&255]<<8|c[255&g])^e[l++],y=(c[a>>>24]<<24|c[f>>>16&255]<<16|c[g>>>8&255]<<8|c[255&k])^e[l++],A=(c[f>>>24]<<24|c[g>>>16&255]<<16|c[k>>>8&255]<<8|c[255&a])^e[l++],E=(c[g>>>24]<<24|c[k>>>16&255]<<16|c[a>>>8&255]<<8|c[255&f])^e[l++],[v>>>0,y>>>0,A>>>0,E>>>0]}function ds(g){(this||es)._key=jT(g);this._reset()}function e4(g){var e=bE.allocUnsafe(16);return e.writeUInt32BE(g[0]>>>
0,0),e.writeUInt32BE(g[1]>>>0,4),e.writeUInt32BE(g[2]>>>0,8),e.writeUInt32BE(g[3]>>>0,12),e}function ZG(g){(this||jo).h=g;(this||jo).state=bE.alloc(16,0);(this||jo).cache=bE.allocUnsafe(0)}function fz(g,e,m,c){f4.call(this||Ph);var h=cq.alloc(4,0);(this||Ph)._cipher=new Nia.AES(e);var n=(this||Ph)._cipher.encryptBlock(h);(this||Ph)._ghash=new g4(n);e=this||Ph;h=m;if(12===h.length)e=(e._finID=cq.concat([h,cq.from([0,0,0,1])]),cq.concat([h,cq.from([0,0,0,2])]));else{m=new g4(n);n=h.length;var b=n%16;
m.update(h);b&&(b=16-b,m.update(cq.alloc(b,0)));m.update(cq.alloc(8,0));h=8*n;n=cq.alloc(8);n.writeUIntBE(h,0,8);m.update(n);e._finID=m.state;e=cq.from(e._finID);e=(Oia(e),e)}(this||Ph)._prev=cq.from(e);(this||Ph)._cache=cq.allocUnsafe(0);(this||Ph)._secCache=cq.allocUnsafe(0);(this||Ph)._decrypt=c;(this||Ph)._alen=0;(this||Ph)._len=0;(this||Ph)._mode=g;(this||Ph)._authTag=null;(this||Ph)._called=!1}function $G(g,e,m,c){h4.call(this||wt);(this||wt)._cipher=new Pia.AES(e);(this||wt)._prev=lT.from(m);
(this||wt)._cache=lT.allocUnsafe(0);(this||wt)._secCache=lT.allocUnsafe(0);(this||wt)._decrypt=c;(this||wt)._mode=g}function aH(g,e,m){i4.call(this||Yj);(this||Yj)._cache=new XL;(this||Yj)._last=void 0;(this||Yj)._cipher=new Qia.AES(e);(this||Yj)._prev=cE.from(m);(this||Yj)._mode=g;(this||Yj)._autopadding=!0}function XL(){(this||Yj).cache=cE.allocUnsafe(0)}function j4(g,e,m){g=k4[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof m&&(m=cE.from(m)),"GCM"!==g.mode&&
m.length!==g.iv)throw new TypeError("invalid iv length "+m.length);if("string"==typeof e&&(e=cE.from(e)),e.length!==g.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===g.type?new Ria(g.module,e,m,!0):"auth"===g.type?new Sia(g.module,e,m,!0):new aH(g.module,e,m)}function bH(g,e,m){l4.call(this||Ok);(this||Ok)._cache=new YL;(this||Ok)._cipher=new Tia.AES(e);(this||Ok)._prev=fx.from(m);(this||Ok)._mode=g;(this||Ok)._autopadding=!0}function YL(){(this||Ok).cache=fx.allocUnsafe(0)}
function m4(g,e,m){g=n4[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=fx.from(e)),e.length!==g.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof m&&(m=fx.from(m)),"GCM"!==g.mode&&m.length!==g.iv)throw new TypeError("invalid iv length "+m.length);return"stream"===g.type?new Uia(g.module,e,m):"auth"===g.type?new Via(g.module,e,m):new bH(g.module,e,m)}function mT(g,e,m){if(g=g.toLowerCase(),gz[g])return nT.createCipheriv(g,e,m);
if(gx[g])return new o4({key:e,iv:m,mode:g});throw new TypeError("invalid suite type");}function oT(g,e,m){if(g=g.toLowerCase(),gz[g])return nT.createDecipheriv(g,e,m);if(gx[g])return new o4({key:e,iv:m,mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function hz(g){(this||ZL).rand=g}function iz(g){(this||p4).rand=g||new Wia.Rand}function pT(g){if(null!==qT)var e=qT;else{e=[2];for(var m=1,c=3;1048576>c;c+=2){for(var h=Math.ceil(Math.sqrt(c)),n=0;n<m&&e[n]<=h&&0!=c%e[n];n++);m!==n&&e[n]<=
h||(e[m++]=c)}e=(qT=e,e)}for(m=0;m<e.length;m++)if(0===g.modn(e[m]))return 0===g.cmpn(e[m]);return!0}function rT(g){var e=Ko.mont(g);return 0===sT.toRed(e).redPow(g.subn(1)).fromRed().cmpn(1)}function cH(g,e){if(16>g)return new Ko(2===e||5===e?[140,123]:[140,39]);var m,c;for(e=new Ko(e);;){for(m=new Ko(Xia(Math.ceil(g/8)));m.bitLength()>g;)m.ishrn(1);if(m.isEven()&&m.iadd(Yia),m.testn(1)||m.iadd(sT),e.cmp(sT)){if(!e.cmp(Zia))for(;m.mod($ia).cmp(aja);)m.iadd(q4)}else for(;m.mod(bja).cmp(cja);)m.iadd(q4);
if(pT(c=m.shrn(1))&&pT(m)&&rT(c)&&rT(m)&&r4.test(c)&&r4.test(m))return m}}function dja(g,e){return e=e||"utf8",rv.isBuffer(g)||(g=new rv(g,e)),(this||oj)._pub=new fs(g),this||oj}function eja(g,e){return e=e||"utf8",rv.isBuffer(g)||(g=new rv(g,e)),(this||oj)._priv=new fs(g),this||oj}function xt(g,e,m){this.setGenerator(e);(this||oj).__prime=new fs(g);(this||oj)._prime=fs.mont((this||oj).__prime);(this||oj)._primeLen=g.length;(this||oj)._pub=void 0;(this||oj)._priv=void 0;(this||oj)._primeCode=void 0;
m?((this||oj).setPublicKey=dja,(this||oj).setPrivateKey=eja):(this||oj)._primeCode=8}function $L(g,e){g=new rv(g.toArray());return e?g.toString(e):g}function aM(g,e){var m=s4(e);var c=m.toRed(jz.mont(e.modulus)).redPow(new jz(e.publicExponent)).fromRed();m=m.invm(e.modulus);var h=e.modulus.byteLength();g=(jz.mont(e.modulus),(new jz(g)).mul(c).umod(e.modulus));var n=g.toRed(jz.mont(e.prime1)),b=g.toRed(jz.mont(e.prime2));c=e.coefficient;var d=e.prime1;g=e.prime2;n=n.redPow(e.exponent1);b=b.redPow(e.exponent2);
n=n.fromRed();b=b.fromRed();c=n.isub(b).imul(c).umod(d);return c.imul(g),b.iadd(c),new fja(b.imul(m).umod(e.modulus).toArray(!1,h))}function s4(g){for(var e=g.modulus.byteLength(),m=new jz(t4(e));0<=m.cmp(g.modulus)||!m.umod(g.prime1)||!m.umod(g.prime2);)m=new jz(t4(e));return m}function u4(g){return 1===g.length?"0"+g:g}function v4(g){for(var e="",m=0;m<g.length;m++)e+=u4(g[m].toString(16));return e}function tB(g,e){if(g instanceof tB)return g;this._importDER(g,e)||(gja(g.r&&g.s,"Signature without r or s"),
this.r=new bM(g.r,16),this.s=new bM(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}function hja(){this.place=0}function tT(g,e){var m=g[e.place++];if(!(128&m))return m;m&=15;for(var c=0,h=0,n=e.place;h<m;h++,n++)c<<=8,c|=g[n];return e.place=n,c}function w4(g){for(var e=0,m=g.length-1;!(g[e]||128&g[e+1])&&e<m;)e++;return 0===e?g:g.slice(e)}function uT(g,e){if(128>e)return g.push(e),void 0;var m=1+(Math.log(e)/Math.LN2>>>3);for(g.push(128|m);--m;)g.push(e>>>
(m<<3)&255);g.push(e)}function x4(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function y4(g){return 1===g.length?"0"+g:g}function z4(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function cM(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=
this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function gs(){if(!(this instanceof gs))return new gs;A4.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=ija;this.W=Array(160)}function yt(){if(!(this instanceof yt))return new yt;B4.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,
1359893119,2600822924,528734635,1541459225];this.k=jja;this.W=Array(64)}function sv(){if(!(this instanceof sv))return new sv;C4.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function hx(){if(!(this instanceof hx))return new hx;D4.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function ix(){if(!(this instanceof ix))return new ix;E4.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,
812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function tv(){if(!(this instanceof tv))return new tv;F4.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function G4(g,e,m,c){return 15>=g?e^m^c:31>=g?e&m|~e&c:47>=g?(e|~m)^c:63>=g?e&c|m&~c:e^(m|~c)}function dE(g,e,m){if(!(this instanceof dE))return new dE(g,e,m);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=
this.inner=null;this._init(kja.toArray(e,m))}function jx(g){if(!(this instanceof jx))return new jx(g);this.hash=g.hash;this.predResist=!!g.predResist;this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var e=uB.toArray(g.entropy,g.entropyEnc||"hex"),m=uB.toArray(g.nonce,g.nonceEnc||"hex");g=uB.toArray(g.pers,g.persEnc||"hex");H4(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");
this._init(e,m,g)}function zt(g,e){this.type=g;this.p=new vB(e.p,16);this.red=e.prime?vB.red(e.prime):vB.mont(this.p);this.zero=(new vB(0)).toRed(this.red);this.one=(new vB(1)).toRed(this.red);this.two=(new vB(2)).toRed(this.red);this.n=e.n&&new vB(e.n,16);this.g=e.g&&this.pointFromJSON(e.g,e.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=
!0,this.redN=this.n.toRed(this.red))}function hs(g,e){this.curve=g;this.type=e;this.precomputed=null}function is(g){eE.call(this,"short",g);this.a=(new Rl(g.a,16)).toRed(this.red);this.b=(new Rl(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function Fn(g,e,m,c){eE.BasePoint.call(this,g,"affine");null===e&&null===
m?(this.x=null,this.y=null,this.inf=!0):(this.x=new Rl(e,16),this.y=new Rl(m,16),c&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ko(g,e,m,c){eE.BasePoint.call(this,g,"jacobian");null===e&&null===m&&null===c?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Rl(0)):(this.x=new Rl(e,16),this.y=new Rl(m,16),this.z=new Rl(c,16));this.x.red||(this.x=this.x.toRed(this.curve.red));
this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function fE(g){dM.call(this,"mont",g);this.a=(new gE(g.a,16)).toRed(this.red);this.b=(new gE(g.b,16)).toRed(this.red);this.i4=(new gE(4)).toRed(this.red).redInvm();this.two=(new gE(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Gn(g,e,m){dM.BasePoint.call(this,g,"projective");null===e&&null===m?(this.x=this.curve.one,this.z=this.curve.zero):
(this.x=new gE(e,16),this.z=new gE(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function uv(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);eM.call(this,"edwards",g);this.a=(new kx(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new kx(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new kx(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);lja(!this.twisted||0===this.c.fromRed().cmpn(1));
this.oneC=1==(0|g.c)}function Zk(g,e,m,c,h){eM.BasePoint.call(this,g,"projective");null===e&&null===m&&null===c?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new kx(e,16),this.y=new kx(m,16),this.z=c?new kx(c,16):this.curve.one,this.t=h&&new kx(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),
this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function I4(g){"short"===g.type?this.curve=new vT.short(g):"edwards"===g.type?this.curve=new vT.edwards(g):this.curve=new vT.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;J4(this.g.validate(),"Invalid curve");J4(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function kz(g,e){Object.defineProperty(wT,g,{configurable:!0,enumerable:!0,
get:function(){var m=new I4(e);return Object.defineProperty(wT,g,{configurable:!0,enumerable:!0,value:m}),m}})}function Hn(g,e){this.ec=g;this.pub=this.priv=null;e.priv&&this._importPrivate(e.priv,e.privEnc);e.pub&&this._importPublic(e.pub,e.pubEnc)}function js(g){if(!(this instanceof js))return new js(g);"string"==typeof g&&(K4(xT.hasOwnProperty(g),"Unknown curve "+g),g=xT[g]);g instanceof xT.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;
this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function an(g,e){this.eddsa=g;this._secret=L4(e.secret);g.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=L4(e.pub)}function lz(g,e){this.eddsa=g;"object"!=typeof e&&(e=mja(e));Array.isArray(e)&&(e={R:e.slice(0,g.encodingLength),S:e.slice(g.encodingLength)});nja(e.R&&e.S,"Signature without R or S");g.isPoint(e.R)&&(this._R=e.R);e.S instanceof oja&&(this._S=e.S);this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded;
this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}function dq(g){if(pja("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof dq))return new dq(g);this.curve=g=qja[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=rja.sha512}function ks(g){(this||bn)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function hE(g,e){(this||bn).path=g;this.rethrow(e)}function M4(){function g(n,
b){if(c.call(this||th,b),!h.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||th).base=n;(this||th).offset=0;(this||th).length=n.length}function e(n,b){if(Array.isArray(n))(this||th).length=0,(this||th).value=n.map(function(d){return d instanceof e||(d=new e(d,b)),(this||th).length+=d.length,d},this||th);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||th).value=n;(this||th).length=1}else if("string"==typeof n)(this||th).value=n,(this||
th).length=h.byteLength(n);else{if(!h.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||th).value=n;(this||th).length=n.length}}if(N4)return fM;N4=!0;var m=oi,c=dH().Reporter,h=ei.Buffer;return m(g,c),fM.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||th).offset,reporter:c.prototype.save.call(this||th)}},g.prototype.restore=function(n){var b=new g((this||th).base);return b.offset=n.offset,b.length=(this||th).offset,(this||th).offset=n.offset,c.prototype.restore.call(this||
th,n.reporter),b},g.prototype.isEmpty=function(){return(this||th).offset===(this||th).length},g.prototype.readUInt8=function(n){return(this||th).offset+1<=(this||th).length?(this||th).base.readUInt8((this||th).offset++,!0):this.error(n||"DecoderBuffer overrun")},g.prototype.skip=function(n,b){if(!((this||th).offset+n<=(this||th).length))return this.error(b||"DecoderBuffer overrun");b=new g((this||th).base);return b._reporterState=(this||th)._reporterState,b.offset=(this||th).offset,b.length=(this||
th).offset+n,(this||th).offset+=n,b},g.prototype.raw=function(n){return(this||th).base.slice(n?n.offset:(this||th).offset,(this||th).length)},fM.EncoderBuffer=e,e.prototype.join=function(n,b){return n||(n=new h((this||th).length)),b||(b=0),0===(this||th).length||(Array.isArray((this||th).value)?(this||th).value.forEach(function(d){d.join(n,b);b+=d.length}):("number"==typeof(this||th).value?n[b]=(this||th).value:"string"==typeof(this||th).value?n.write((this||th).value,b):h.isBuffer((this||th).value)&&
(this||th).value.copy(n,b),b+=(this||th).length)),n},fM}function dH(){if(O4)return yT;O4=!0;var g=yT;return g.Reporter=P4.Reporter,g.DecoderBuffer=M4().DecoderBuffer,g.EncoderBuffer=M4().EncoderBuffer,g.Node=function(){function e(a,f){var l={};(this||Qg)._baseState=l;l.enc=a;l.parent=f||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||
(l.children=[],this._wrap())}if(Q4)return zT;Q4=!0;var m=dH().Reporter,c=dH().EncoderBuffer,h=dH().DecoderBuffer,n=ls,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),d="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);zT=e;var k="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");
return e.prototype.clone=function(){var a=(this||Qg)._baseState,f={};k.forEach(function(r){f[r]=a[r]});var l=new (this||Qg).constructor(f.parent);return l._baseState=f,l},e.prototype._wrap=function(){var a=(this||Qg)._baseState;d.forEach(function(f){(this||Qg)[f]=function(){var l=new (this||Qg).constructor(this||Qg);return a.children.push(l),l[f].apply(l,arguments)}},this||Qg)},e.prototype._init=function(a){var f=(this||Qg)._baseState;n(null===f.parent);a.call(this||Qg);f.children=f.children.filter(function(l){return l._baseState.parent===
(this||Qg)},this||Qg);n.equal(f.children.length,1,"Root node can have only one child")},e.prototype._useArgs=function(a){var f=(this||Qg)._baseState,l=a.filter(function(r){return r instanceof(this||Qg).constructor},this||Qg);a=a.filter(function(r){return!(r instanceof(this||Qg).constructor)},this||Qg);0!==l.length&&(n(null===f.children),f.children=l,l.forEach(function(r){r._baseState.parent=this||Qg},this||Qg));0!==a.length&&(n(null===f.args),f.args=a,f.reverseArgs=a.map(function(r){if("object"!=
typeof r||r.constructor!==Object)return r;var v={};return Object.keys(r).forEach(function(y){y==(0|y)&&(y|=0);v[r[y]]=y}),v}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){e.prototype[a]=function(){throw Error(a+" not implemented for encoding: "+(this||Qg)._baseState.enc);}}),b.forEach(function(a){e.prototype[a]=function(){var f=
(this||Qg)._baseState,l=Array.prototype.slice.call(arguments);return n(null===f.tag),f.tag=a,this._useArgs(l),this||Qg}}),e.prototype.use=function(a){n(a);var f=(this||Qg)._baseState;return n(null===f.use),f.use=a,this||Qg},e.prototype.optional=function(){return(this||Qg)._baseState.optional=!0,this||Qg},e.prototype.def=function(a){var f=(this||Qg)._baseState;return n(null===f.default),f.default=a,f.optional=!0,this||Qg},e.prototype.explicit=function(a){var f=(this||Qg)._baseState;return n(null===
f.explicit&&null===f.implicit),f.explicit=a,this||Qg},e.prototype.implicit=function(a){var f=(this||Qg)._baseState;return n(null===f.explicit&&null===f.implicit),f.implicit=a,this||Qg},e.prototype.obj=function(){var a=(this||Qg)._baseState,f=Array.prototype.slice.call(arguments);return a.obj=!0,0!==f.length&&this._useArgs(f),this||Qg},e.prototype.key=function(a){var f=(this||Qg)._baseState;return n(null===f.key),f.key=a,this||Qg},e.prototype.any=function(){return(this||Qg)._baseState.any=!0,this||
Qg},e.prototype.choice=function(a){var f=(this||Qg)._baseState;return n(null===f.choice),f.choice=a,this._useArgs(Object.keys(a).map(function(l){return a[l]})),this||Qg},e.prototype.contains=function(a){var f=(this||Qg)._baseState;return n(null===f.use),f.contains=a,this||Qg},e.prototype._decode=function(a,f){var l=(this||Qg)._baseState;if(null===l.parent)return a.wrapResult(l.children[0]._decode(a,f));var r,v=l.default,y=!0,A=null;if(null!==l.key&&(A=a.enterKey(l.key)),l.optional){var E=null;if(null!==
l.explicit?E=l.explicit:null!==l.implicit?E=l.implicit:null!==l.tag&&(E=l.tag),null!==E||l.any){if(y=this._peekTag(a,E,l.any),a.isError(y))return y}else{var F=a.save();try{null===l.choice?this._decodeGeneric(l.tag,a,f):this._decodeChoice(a,f),y=!0}catch(J){y=!1}a.restore(F)}}if(l.obj&&y&&(r=a.enterObject()),y){if(null!==l.explicit){E=this._decodeTag(a,l.explicit);if(a.isError(E))return E;a=E}E=a.offset;if(null===l.use&&null===l.choice){l.any&&(F=a.save());var H=this._decodeTag(a,null!==l.implicit?
l.implicit:l.tag,l.any);if(a.isError(H))return H;l.any?v=a.raw(F):a=H}if(f&&f.track&&null!==l.tag&&f.track(a.path(),E,a.length,"tagged"),f&&f.track&&null!==l.tag&&f.track(a.path(),a.offset,a.length,"content"),v=l.any?v:null===l.choice?this._decodeGeneric(l.tag,a,f):this._decodeChoice(a,f),a.isError(v))return v;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(J){J._decode(a,f)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(v=new h(v),v=this._getUse(l.contains,a._reporterState.obj)._decode(v,
f))}return l.obj&&y&&(v=a.leaveObject(r)),null===l.key||null===v&&!0!==y?null!==A&&a.exitKey(A):a.leaveKey(A,l.key,v),v},e.prototype._decodeGeneric=function(a,f,l){var r=(this||Qg)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(f,a,r.args[0],l):/str$/.test(a)?this._decodeStr(f,a,l):"objid"===a&&r.args?this._decodeObjid(f,r.args[0],r.args[1],l):"objid"===a?this._decodeObjid(f,null,null,l):"gentime"===a||"utctime"===a?this._decodeTime(f,a,l):"null_"===a?this._decodeNull(f,
l):"bool"===a?this._decodeBool(f,l):"objDesc"===a?this._decodeStr(f,a,l):"int"===a||"enum"===a?this._decodeInt(f,r.args&&r.args[0],l):null!==r.use?this._getUse(r.use,f._reporterState.obj)._decode(f,l):f.error("unknown tag: "+a)},e.prototype._getUse=function(a,f){var l=(this||Qg)._baseState;return l.useDecoder=this._use(a,f),n(null===l.useDecoder._baseState.parent),l.useDecoder=l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=
l.implicit),l.useDecoder},e.prototype._decodeChoice=function(a,f){var l=(this||Qg)._baseState,r=null,v=!1;return Object.keys(l.choice).some(function(y){var A=a.save(),E=l.choice[y];try{var F=E._decode(a,f);if(a.isError(F))return!1;r={type:y,value:F};v=!0}catch(H){return a.restore(A),!1}return!0},this||Qg),v?r:a.error("Choice not matched")},e.prototype._createEncoderBuffer=function(a){return new c(a,(this||Qg).reporter)},e.prototype._encode=function(a,f,l){var r=(this||Qg)._baseState;if(null===r.default||
r.default!==a)if(a=this._encodeValue(a,f,l),void 0!==a&&!this._skipDefault(a,f,l))return a},e.prototype._encodeValue=function(a,f,l){var r=(this||Qg)._baseState;if(null===r.parent)return r.children[0]._encode(a,f||new m);var v=null;if((this||Qg).reporter=f,r.optional&&void 0===a){if(null===r.default)return;a=r.default}var y=null,A=!1;if(r.any)v=this._createEncoderBuffer(a);else if(r.choice)v=this._encodeChoice(a,f);else if(r.contains)y=this._getUse(r.contains,l)._encode(a,f),A=!0;else if(r.children)y=
r.children.map(function(F){if("null_"===F._baseState.tag)return F._encode(null,f,a);if(null===F._baseState.key)return f.error("Child should have a key");var H=f.enterKey(F._baseState.key);if("object"!=typeof a)return f.error("Child expected, but input is not object");F=F._encode(a[F._baseState.key],f,a);return f.leaveKey(H),F},this||Qg).filter(function(F){return F}),y=this._createEncoderBuffer(y);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return f.error("Too many args for : "+
r.tag);if(!Array.isArray(a))return f.error("seqof/setof, but data is not Array");y=this.clone();y._baseState.implicit=null;y=this._createEncoderBuffer(a.map(function(F){return this._getUse((this||Qg)._baseState.args[0],a)._encode(F,f)},y))}else null!==r.use?v=this._getUse(r.use,l)._encode(a,f):(y=this._encodePrimitive(r.tag,a),A=!0);if(!r.any&&null===r.choice){l=null!==r.implicit?r.implicit:r.tag;var E=null===r.implicit?"universal":"context";null===l?null===r.use&&f.error("Tag could be omitted only for .use()"):
null===r.use&&(v=this._encodeComposite(l,A,E,y))}return null!==r.explicit&&(v=this._encodeComposite(r.explicit,!1,"context",v)),v},e.prototype._encodeChoice=function(a,f){var l=(this||Qg)._baseState,r=l.choice[a.type];return r||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(l.choice))),r._encode(a.value,f)},e.prototype._encodePrimitive=function(a,f){var l=(this||Qg)._baseState;if(/str$/.test(a))return this._encodeStr(f,a);if("objid"===a&&l.args)return this._encodeObjid(f,l.reverseArgs[0],
l.args[1]);if("objid"===a)return this._encodeObjid(f,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(f,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(f,l.args&&l.reverseArgs[0]);if("bool"===a)return this._encodeBool(f);if("objDesc"===a)return this._encodeStr(f,a);throw Error("Unsupported tag: "+a);},e.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},e.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},
zT}(),yT}function R4(){if(S4)return AT;S4=!0;var g=AT;return g._reverse=function(e){var m={};return Object.keys(e).forEach(function(c){(0|c)==c&&(c|=0);m[e[c]]=c}),m},g.der=function(){if(T4)return mz;T4=!0;var e=R4();return mz.tagClass={0:"universal",1:"application",2:"context",3:"private"},mz.tagClassByName=e._reverse(mz.tagClass),mz.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",
17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},mz.tagByName=e._reverse(mz.tag),mz}(),AT}function U4(){function g(a){(this||nz).enc="der";(this||nz).name=a.name;(this||nz).entity=a;(this||nz).tree=new e;(this||nz).tree._init(a.body)}function e(a){b.Node.call(this||nz,"der",a)}function m(a,f){var l=a.readUInt8(f);if(a.isError(l))return l;var r=k.tagClass[l>>6],v=0==(32&
l);if(31==(31&l)){var y=l;for(l=0;128==(128&y);){if(y=a.readUInt8(f),a.isError(y))return y;l<<=7;l|=127&y}}else l&=31;return{cls:r,primitive:v,tag:l,tagStr:k.tag[l]}}function c(a,f,l){var r=a.readUInt8(l);if(a.isError(r))return r;if(!f&&128===r)return null;if(0==(128&r))return r;f=127&r;if(4<f)return a.error("length octect is too long");for(var v=r=0;v<f;v++){r<<=8;var y=a.readUInt8(l);if(a.isError(y))return y;r|=y}return r}if(V4)return BT;V4=!0;var h=oi,n=gM(),b=n.base,d=n.bignum,k=n.constants.der;
return BT=g,g.prototype.decode=function(a,f){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,f)),(this||nz).tree._decode(a,f)},h(e,b.Node),e.prototype._peekTag=function(a,f,l){if(a.isEmpty())return!1;var r=a.save(),v=m(a,'Failed to peek tag: "'+f+'"');return a.isError(v)?v:(a.restore(r),v.tag===f||v.tagStr===f||v.tagStr+"of"===f||l)},e.prototype._decodeTag=function(a,f,l){var r=m(a,'Failed to decode tag of "'+f+'"');if(a.isError(r))return r;var v=c(a,r.primitive,'Failed to get length of "'+
f+'"');if(a.isError(v))return v;if(!l&&r.tag!==f&&r.tagStr!==f&&r.tagStr+"of"!==f)return a.error('Failed to match tag: "'+f+'"');if(r.primitive||null!==v)return a.skip(v,'Failed to match body of: "'+f+'"');l=a.save();r=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||nz).tag+'"');return a.isError(r)?r:(v=a.offset-l.offset,a.restore(l),a.skip(v,'Failed to match body of: "'+f+'"'))},e.prototype._skipUntilEnd=function(a,f){for(;;){var l=m(a,f);if(a.isError(l))return l;var r,v=c(a,
l.primitive,f);if(a.isError(v))return v;if(r=l.primitive||null!==v?a.skip(v):this._skipUntilEnd(a,f),a.isError(r))return r;if("end"===l.tagStr)break}},e.prototype._decodeList=function(a,f,l,r){for(f=[];!a.isEmpty();){var v=this._peekTag(a,"end");if(a.isError(v))return v;var y=l.decode(a,"der",r);if(a.isError(y)&&v)break;f.push(y)}return f},e.prototype._decodeStr=function(a,f){if("bitstr"===f)return f=a.readUInt8(),a.isError(f)?f:{unused:f,data:a.raw()};if("bmpstr"===f){f=a.raw();if(1==f.length%2)return a.error("Decoding of string type: bmpstr length mismatch");
a="";for(var l=0;l<f.length/2;l++)a+=String.fromCharCode(f.readUInt16BE(2*l));return a}return"numstr"===f?(f=a.raw().toString("ascii"),this._isNumstr(f)?f:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===f||"objDesc"===f?a.raw():"printstr"===f?(f=a.raw().toString("ascii"),this._isPrintstr(f)?f:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(f)?a.raw().toString():a.error("Decoding of string type: "+f+" unsupported")},e.prototype._decodeObjid=
function(a,f,l){for(var r=[],v=0;!a.isEmpty();){var y=a.readUInt8();v<<=7;v|=127&y;0==(128&y)&&(r.push(v),v=0)}128&y&&r.push(v);a=r[0]/40|0;v=r[0]%40;if(l=l?r:[a,v].concat(r.slice(1)),f)r=f[l.join(" ")],void 0===r&&(r=f[l.join(".")]),void 0!==r&&(l=r);return l},e.prototype._decodeTime=function(a,f){var l=a.raw().toString();if("gentime"===f){a=0|l.slice(0,4);f=0|l.slice(4,6);var r=0|l.slice(6,8),v=0|l.slice(8,10),y=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==f)return a.error("Decoding "+
f+" time is not supported yet");a=0|l.slice(0,2);f=0|l.slice(2,4);r=0|l.slice(4,6);v=0|l.slice(6,8);y=0|l.slice(8,10);l=0|l.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,f-1,r,v,y,l,0)},e.prototype._decodeNull=function(a){return null},e.prototype._decodeBool=function(a){var f=a.readUInt8();return a.isError(f)?f:0!==f},e.prototype._decodeInt=function(a,f){a=a.raw();a=new d(a);return f&&(a=f[a.toString(10)]||a),a},e.prototype._use=function(a,f){return"function"==typeof a&&(a=a(f)),a._getDecoder("der").tree},
BT}function sja(){if(W4)return CT;W4=!0;var g=CT;return g.der=U4(),g.pem=function(){function e(n){h.call(this||DT,n);(this||DT).enc="pem"}if(X4)return ET;X4=!0;var m=oi,c=ei.Buffer,h=U4();return m(e,h),ET=e,e.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var d=b.label.toUpperCase(),k=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,f=-1,l=0;l<n.length;l++){var r=n[l].match(k);if(null!==r&&r[2]===d){if(-1!==a){if("END"!==r[1])break;f=l;break}if("BEGIN"!==r[1])break;a=l}}if(-1===a||-1===
f)throw Error("PEM section not found for: "+d);n=n.slice(a+1,f).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new c(n,"base64");return h.prototype.decode.call(this||DT,n,b)},ET}(),CT}function Y4(){function g(k){(this||cn).enc="der";(this||cn).name=k.name;(this||cn).entity=k;(this||cn).tree=new e;(this||cn).tree._init(k.body)}function e(k){b.Node.call(this||cn,"der",k)}function m(k){return 10>k?"0"+k:k}if(Z4)return FT;Z4=!0;var c=oi,h=ei.Buffer,n=gM(),b=n.base,d=n.constants.der;return FT=g,g.prototype.encode=
function(k,a){return(this||cn).tree._encode(k,a).join()},c(e,b.Node),e.prototype._encodeComposite=function(k,a,f,l){var r;a:{var v=k;k=(this||cn).reporter;"seqof"===v?v="seq":"setof"===v&&(v="set");if(d.tagByName.hasOwnProperty(v))v=d.tagByName[v];else if("number"!=typeof v||(0|v)!==v){f=k.error("Unknown tag: "+v);break a}31<=v?f=k.error("Multi-octet tag encoding unsupported"):(a||(v|=32),f=v|d.tagClassByName[f||"universal"]<<6)}if(128>l.length)return(r=new h(2))[0]=f,r[1]=l.length,this._createEncoderBuffer([r,
l]);k=1;for(a=l.length;256<=a;a>>=8)k++;(r=new h(2+k))[0]=f;r[1]=128|k;a=1+k;for(f=l.length;0<f;a--,f>>=8)r[a]=255&f;return this._createEncoderBuffer([r,l])},e.prototype._encodeStr=function(k,a){if("bitstr"===a)return this._createEncoderBuffer([0|k.unused,k.data]);if("bmpstr"===a){a=new h(2*k.length);for(var f=0;f<k.length;f++)a.writeUInt16BE(k.charCodeAt(f),2*f);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(k)?this._createEncoderBuffer(k):(this||cn).reporter.error("Encoding of string type: numstr supports only digits and space"):
"printstr"===a?this._isPrintstr(k)?this._createEncoderBuffer(k):(this||cn).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(k):(this||cn).reporter.error("Encoding of string type: "+a+" unsupported")},e.prototype._encodeObjid=function(k,a,f){if("string"==typeof k){if(!a)return(this||
cn).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(k))return(this||cn).reporter.error("objid not found in values map");k=a[k].split(/[\s\.]+/g);for(a=0;a<k.length;a++)k[a]|=0}else if(Array.isArray(k))for(k=k.slice(),a=0;a<k.length;a++)k[a]|=0;if(!Array.isArray(k))return(this||cn).reporter.error("objid() should be either array or string, got: "+JSON.stringify(k));if(!f){if(40<=k[1])return(this||cn).reporter.error("Second objid identifier OOB");k.splice(0,2,40*k[0]+
k[1])}var l=0;for(a=0;a<k.length;a++)for(f=k[a],l++;128<=f;f>>=7)l++;l=new h(l);var r=l.length-1;for(a=k.length-1;0<=a;a--)for(f=k[a],l[r--]=127&f;0<(f>>=7);)l[r--]=128|127&f;return this._createEncoderBuffer(l)},e.prototype._encodeTime=function(k,a){var f;k=new Date(k);return"gentime"===a?f=[m(k.getFullYear()),m(k.getUTCMonth()+1),m(k.getUTCDate()),m(k.getUTCHours()),m(k.getUTCMinutes()),m(k.getUTCSeconds()),"Z"].join(""):"utctime"===a?f=[m(k.getFullYear()%100),m(k.getUTCMonth()+1),m(k.getUTCDate()),
m(k.getUTCHours()),m(k.getUTCMinutes()),m(k.getUTCSeconds()),"Z"].join(""):(this||cn).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(f,"octstr")},e.prototype._encodeNull=function(){return this._createEncoderBuffer("")},e.prototype._encodeInt=function(k,a){if("string"==typeof k){if(!a)return(this||cn).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(k))return(this||cn).reporter.error("Values map doesn't contain: "+JSON.stringify(k));k=a[k]}"number"==
typeof k||h.isBuffer(k)||(a=k.toArray(),!k.sign&&128&a[0]&&a.unshift(0),k=new h(a));if(h.isBuffer(k)){var f=k.length;0===k.length&&f++;f=new h(f);return k.copy(f),0===k.length&&(f[0]=0),this._createEncoderBuffer(f)}if(128>k)return this._createEncoderBuffer(k);if(256>k)return this._createEncoderBuffer([0,k]);f=1;for(a=k;256<=a;a>>=8)f++;for(a=(f=Array(f)).length-1;0<=a;a--)f[a]=255&k,k>>=8;return 128&f[0]&&f.unshift(0),this._createEncoderBuffer(new h(f))},e.prototype._encodeBool=function(k){return this._createEncoderBuffer(k?
255:0)},e.prototype._use=function(k,a){return"function"==typeof k&&(k=k(a)),k._getEncoder("der").tree},e.prototype._skipDefault=function(k,a,f){var l=(this||cn)._baseState;if(null===l.default)return!1;k=k.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,a,f).join()),k.length!==l.defaultBuffer.length)return!1;for(a=0;a<k.length;a++)if(k[a]!==l.defaultBuffer[a])return!1;return!0},FT}function tja(){if($4)return GT;$4=!0;var g=GT;return g.der=Y4(),g.pem=function(){function e(h){c.call(this||
HT,h);(this||HT).enc="pem"}if(a5)return IT;a5=!0;var m=oi,c=Y4();return m(e,c),IT=e,e.prototype.encode=function(h,n){h=c.prototype.encode.call(this||HT,h).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],d=0;d<h.length;d+=64)b.push(h.slice(d,d+64));return b.push("-----END "+n.label+"-----"),b.join("\n")},IT}(),GT}function gM(){if(b5)return JT;b5=!0;var g=JT;return g.bignum=zm,g.define=function(){function e(h,n){(this||$q).name=h;(this||$q).body=n;(this||$q).decoders={};(this||$q).encoders=
{}}if(c5)return KT;c5=!0;var m=gM(),c=oi;return KT.define=function(h,n){return new e(h,n)},e.prototype._createNamed=function(h){try{var n=wB.runInThisContext("(function "+(this||$q).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(d){this._initNamed(d)}}return c(n,h),n.prototype._initNamed=function(b){h.call(this||$q,b)},new n(this||$q)},e.prototype._getDecoder=function(h){return h=h||"der",(this||$q).decoders.hasOwnProperty(h)||((this||$q).decoders[h]=this._createNamed(m.decoders[h])),
(this||$q).decoders[h]},e.prototype.decode=function(h,n,b){return this._getDecoder(n).decode(h,b)},e.prototype._getEncoder=function(h){return h=h||"der",(this||$q).encoders.hasOwnProperty(h)||((this||$q).encoders[h]=this._createNamed(m.encoders[h])),(this||$q).encoders[h]},e.prototype.encode=function(h,n,b){return this._getEncoder(n).encode(h,b)},KT}().define,g.base=dH(),g.constants=R4(),g.decoders=sja(),g.encoders=tja(),JT}function iE(g){var e;"object"!=typeof g||LT.isBuffer(g)||(e=g.passphrase,
g=g.key);"string"==typeof g&&(g=LT.from(g));var m=e;g=g.toString();var c=g.match(uja);if(c){var h="aes"+c[1],n=hM.from(c[2],"hex");var b=hM.from(c[3].replace(/[\r\n]/g,""),"base64");c=eH(m,n.slice(0,8),parseInt(c[1],10)).key;m=[];h=ar.createDecipheriv(h,c,n);m.push(h.update(b));m.push(h.final());b=hM.concat(m)}else b=g.match(vja),b=new hM(b[2].replace(/[\r\n]/g,""),"base64");g=g.match(wja)[1];switch(g){case "CERTIFICATE":var d=eq.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(d||
(d=eq.PublicKey.decode(b,"der")),e=d.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return eq.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case "1.2.840.10040.4.1":return d.algorithm.params.pub_key=eq.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw Error("unknown key id "+e);}case "ENCRYPTED PRIVATE KEY":m=eq.EncryptedPrivateKey.decode(b,"der"),
b=e,h=m.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(m.algorithm.decrypt.kde.kdeparams.iters.toString(),10),d=xja[m.algorithm.decrypt.cipher.algo.join(".")],g=m.algorithm.decrypt.cipher.iv,e=m.subjectPrivateKey,m=parseInt(d.split("-")[1],10)/8,b=yja.pbkdf2Sync(b,h,n,m,"sha1"),d=zja.createDecipheriv(d,b,g),g=[],b=(g.push(d.update(e)),g.push(d.final()),LT.concat(g));case "PRIVATE KEY":switch(e=(d=eq.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return eq.RSAPrivateKey.decode(d.subjectPrivateKey,
"der");case "1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:eq.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return d.algorithm.params.priv_key=eq.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw Error("unknown key id "+e);}case "RSA PUBLIC KEY":return eq.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return eq.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:eq.DSAPrivateKey.decode(b,
"der")};case "EC PRIVATE KEY":return{curve:(b=eq.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+g);}}function d5(g,e,m,c){if((g=new Lo(g.toArray())).length<e.byteLength()){var h=new Lo(e.byteLength()-g.length);h.fill(0);g=Lo.concat([h,g])}h=m.length;m=(m=MT(m,e)).mod(e);m=new Lo(m.toArray());m.length<e.byteLength()&&(e=new Lo(e.byteLength()-m.length),e.fill(0),m=Lo.concat([e,m]));e=m;m=new Lo(h);m.fill(1);h=new Lo(h);return h.fill(0),
h=xB(c,h).update(m).update(new Lo([0])).update(g).update(e).digest(),m=xB(c,h).update(m).digest(),{k:h=xB(c,h).update(m).update(new Lo([1])).update(g).update(e).digest(),v:xB(c,h).update(m).digest()}}function MT(g,e){var m=new iM(g);g=(g.length<<3)-e.bitLength();return 0<g&&m.ishrn(g),m}function e5(g,e,m){var c;do{for(c=new Lo(0);8*c.length<g.bitLength();)e.v=xB(m,e.k).update(e.v).digest(),c=Lo.concat([c,e.v]);c=MT(c,g);e.k=xB(m,e.k).update(e.v).update(new Lo([0])).digest();e.v=xB(m,e.k).update(e.v).digest()}while(-1!==
c.cmp(g));return c}function f5(g,e){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(e)>=e)throw Error("invalid sig");}function fH(g){jM.Writable.call(this||Sl);g=yB[g];if(!g)throw Error("Unknown message digest");(this||Sl)._hashType=g.hash;(this||Sl)._hash=g5(g.hash);(this||Sl)._tag=g.id;(this||Sl)._signType=g.sign}function gH(g){jM.Writable.call(this||Sl);g=yB[g];if(!g)throw Error("Unknown message digest");(this||Sl)._hash=g5(g.hash);(this||Sl)._tag=g.id;(this||Sl)._signType=g.sign}function h5(g){return new fH(g)}
function i5(g){return new gH(g)}function zB(g){(this||dn).curveType=br[g];(this||dn).curveType||((this||dn).curveType={name:g});(this||dn).curve=new Aja.ec((this||dn).curveType.name);(this||dn).keys=void 0}function NT(g,e,m){Array.isArray(g)||(g=g.toArray());g=new lx(g);m&&g.length<m&&(m=new lx(m-g.length),m.fill(0),g=lx.concat([m,g]));return e?g.toString(e):g}function j5(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function k5(g,
e){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>l5||0>g)throw new TypeError("offset must be a uint32");if(g>m5||g>e)throw new RangeError("offset out of range");}function n5(g,e,m){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>l5||0>g)throw new TypeError("size must be a uint32");if(g+e>m||g>m5)throw new RangeError("buffer too small");}function o5(g,e,m,c){return OT.browser?(m=new Uint8Array(g.buffer,e,m),PT.getRandomValues(m),c?(OT.nextTick(function(){c(null,
g)}),void 0):g):c?(p5(m,function(h,n){if(h)return c(h);n.copy(g,e);c(null,g)}),void 0):(p5(m).copy(g,e),g)}function Bja(g){var e=[];g.replace(/[a-fA-F0-9]{2}/g,function(m){e.push(parseInt(m,16))});return e}function kM(g){return g&&g.__esModule?g:{default:g}}function q5(g,e){g=g||[];e=e||{};try{return new Blob(g,e)}catch(h){if("TypeError"!==h.name)throw h;for(var m=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),c=0;c<g.length;c+=1)m.append(g[c]);return m.getBlob(e.type)}}function r5(g){for(var e=g.length,m=new ArrayBuffer(e),c=new Uint8Array(m),h=0;h<e;h++)c[h]=g.charCodeAt(h);return m}function s5(g,e){return q5([r5(g)],{type:e})}function t5(g,e){var m=new FileReader,c="function"===typeof m.readAsBinaryString;m.onloadend=function(h){var n=h.target.result||"";if(c)return e(n);h="";n=new Uint8Array(n);for(var b=n.byteLength,d=0;d<b;d++)h+=String.fromCharCode(n[d]);e(h)};c?
m.readAsBinaryString(g):m.readAsArrayBuffer(g)}function u5(g,e){t5(g,function(m){e(m)})}function Cja(g,e,m){return g.webkitSlice?g.webkitSlice(e,m):g.slice(e,m)}function Dja(g,e,m,c,h){if(0<m||c<e.size)e=Cja(e,m,c);v5.readAsArrayBuffer(e,function(n){g.append(n);h()})}function Eja(g,e,m,c,h){if(0<m||c<e.length)e=e.substring(m,c);g.appendBinary(e);h()}function lM(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function hH(g){var e;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var m=
[];var c=0;for(e=g.length;c<e;c++)m[c]=hH(g[c]);return m}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(c=new ArrayBuffer(g.byteLength),m=new Uint8Array(c),g=new Uint8Array(g),m.set(g),g=c):(c=g.size,m=g.type,g="function"===typeof g.slice?g.slice(0,c,m):g.webkitSlice(0,c,m)),g;m=Object.getPrototypeOf(g);null===m?m=!0:(m=
m.constructor,m="function"==typeof m&&m instanceof m&&w5.call(m)==Fja);if(!m)return g;m={};for(c in g)Object.prototype.hasOwnProperty.call(g,c)&&(e=hH(g[c]),"undefined"!==typeof e&&(m[c]=e));return m}function x5(g){var e=!1;return QT(function(m){if(e)throw Error("once called more than once");e=!0;g.apply(this,m)})}function y5(g){return QT(function(e){e=hH(e);var m=this,c="function"===typeof e[e.length-1]?e.pop():!1,h=new Promise(function(n,b){var d;try{var k=x5(function(a,f){a?b(a):n(f)});e.push(k);
(d=g.apply(m,e))&&"function"===typeof d.then&&n(d)}catch(a){b(a)}});c&&h.then(function(n){c(null,n)},c);return h})}function Gja(g,e,m){if(g.constructor.listeners("debug").length){for(var c=["api",g.name,e],h=0;h<m.length-1;h++)c.push(m[h]);g.constructor.emit("debug",c);var n=m[m.length-1];m[m.length-1]=function(b,d){var k=["api",g.name,e];k=k.concat(b?["error",b]:["success",d]);g.constructor.emit("debug",k);n(b,d)}}}function RT(g,e){for(var m={},c=0,h=e.length;c<h;c++){var n=e[c];n in g&&(m[n]=g[n])}return m}
function z5(g){return g}function Hja(g){return[{ok:g}]}function Ija(g){mM&&addEventListener("storage",function(e){g.emit(e.key)})}function jE(){nM.call(this);this._listeners={};Ija(this)}function ST(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var e=Array.prototype.slice.call(arguments,1);console[g].apply(console,e)}}function A5(g){if(!g)return null;var e=g.split("/");return 2===e.length?e:1===e.length?[g,g]:null}function B5(g,e,m){return new Promise(function(c,h){g.get(e,function(n,
b){if(n){if(404!==n.status)return h(n);b={}}n=b._rev;b=m(b);if(!b)return c({updated:!1,rev:n});b._id=e;b._rev=n;c(Jja(g,b,m))})})}function Jja(g,e,m){return g.put(e).then(function(c){return{updated:!0,rev:c.rev}},function(c){if(409!==c.status)throw c;return B5(g,e._id,m)})}function C5(g){var e=g.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=e);return[g,g===e?0:4-g%4]}function Kja(g,e,m){for(var c=[],h=e;h<m;h+=3)e=(g[h]<<16&16711680)+(g[h+
1]<<8&65280)+(g[h+2]&255),c.push(vv[e>>18&63]+vv[e>>12&63]+vv[e>>6&63]+vv[e&63]);return c.join("")}function mx(g){if(g>TT)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);Object.setPrototypeOf(g,xe.prototype);return g}function xe(g,e,m){if("number"===typeof g){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return UT(g)}return D5(g,e,m)}function D5(g,e,m){if("string"===typeof g){var c=e;if("string"!==
typeof c||""===c)c="utf8";if(!xe.isEncoding(c))throw new TypeError("Unknown encoding: "+c);e=E5(g,c)|0;m=mx(e);g=m.write(g,c);g!==e&&(m=m.slice(0,g));return m}if(ArrayBuffer.isView(g))return wv(g,Uint8Array)?(g=new Uint8Array(g),g=F5(g.buffer,g.byteOffset,g.byteLength)):g=VT(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(wv(g,ArrayBuffer)||g&&wv(g.buffer,ArrayBuffer)||"undefined"!==
typeof SharedArrayBuffer&&(wv(g,SharedArrayBuffer)||g&&wv(g.buffer,SharedArrayBuffer)))return F5(g,e,m);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');c=g.valueOf&&g.valueOf();if(null!=c&&c!==g)return xe.from(c,e,m);if(c=Lja(g))return c;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return xe.from(g[Symbol.toPrimitive]("string"),e,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function G5(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function UT(g){G5(g);return mx(0>g?0:WT(g)|0)}function VT(g){for(var e=0>g.length?0:WT(g.length)|0,m=mx(e),c=0;c<e;c+=1)m[c]=g[c]&255;return m}function F5(g,e,m){if(0>e||g.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<e+(m||0))throw new RangeError('"length" is outside of buffer bounds');
g=void 0===e&&void 0===m?new Uint8Array(g):void 0===m?new Uint8Array(g,e):new Uint8Array(g,e,m);Object.setPrototypeOf(g,xe.prototype);return g}function Lja(g){if(xe.isBuffer(g)){var e=WT(g.length)|0,m=mx(e);if(0===m.length)return m;g.copy(m,0,0,e);return m}if(void 0!==g.length)return(e="number"!==typeof g.length)||(e=g.length,e=e!==e),e?mx(0):VT(g);if("Buffer"===g.type&&Array.isArray(g.data))return VT(g.data)}function WT(g){if(g>=TT)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
TT.toString(16)+" bytes");return g|0}function E5(g,e){if(xe.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||wv(g,ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var m=g.length,c=2<arguments.length&&!0===arguments[2];if(!c&&0===m)return 0;for(var h=!1;;)switch(e){case "ascii":case "latin1":case "binary":return m;case "utf8":case "utf-8":return XT(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
m;case "hex":return m>>>1;case "base64":return oM.toByteArray(H5(g)).length;default:if(h)return c?-1:XT(g).length;e=(""+e).toLowerCase();h=!0}}function Mja(g,e,m){var c=!1;if(void 0===e||0>e)e=0;if(e>this.length)return"";if(void 0===m||m>this.length)m=this.length;if(0>=m)return"";m>>>=0;e>>>=0;if(m<=e)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!e||0>e)e=0;if(!m||0>m||m>g)m=g;for(g="";e<m;++e)g+=Nja[this[e]];return g;case "utf8":case "utf-8":return I5(this,e,m);case "ascii":g=
"";for(m=Math.min(this.length,m);e<m;++e)g+=String.fromCharCode(this[e]&127);return g;case "latin1":case "binary":g="";for(m=Math.min(this.length,m);e<m;++e)g+=String.fromCharCode(this[e]);return g;case "base64":return e=0===e&&m===this.length?oM.fromByteArray(this):oM.fromByteArray(this.slice(e,m)),e;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(e,m);m="";for(g=0;g<e.length-1;g+=2)m+=String.fromCharCode(e[g]+256*e[g+1]);return m;default:if(c)throw new TypeError("Unknown encoding: "+
g);g=(g+"").toLowerCase();c=!0}}function AB(g,e,m){var c=g[e];g[e]=g[m];g[m]=c}function J5(g,e,m,c,h){if(0===g.length)return-1;"string"===typeof m?(c=m,m=0):2147483647<m?m=2147483647:-2147483648>m&&(m=-2147483648);m=+m;m!==m&&(m=h?0:g.length-1);0>m&&(m=g.length+m);if(m>=g.length){if(h)return-1;m=g.length-1}else if(0>m)if(h)m=0;else return-1;"string"===typeof e&&(e=xe.from(e,c));if(xe.isBuffer(e))return 0===e.length?-1:K5(g,e,m,c,h);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?
h?Uint8Array.prototype.indexOf.call(g,e,m):Uint8Array.prototype.lastIndexOf.call(g,e,m):K5(g,[e],m,c,h);throw new TypeError("val must be string, number or Buffer");}function K5(g,e,m,c,h){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,d=g.length,k=e.length;if(void 0!==c&&(c=String(c).toLowerCase(),"ucs2"===c||"ucs-2"===c||"utf16le"===c||"utf-16le"===c)){if(2>g.length||2>e.length)return-1;b=2;d/=2;k/=2;m/=2}if(h)for(c=-1;m<d;m++)if(n(g,m)===n(e,-1===c?0:m-c)){if(-1===c&&(c=m),m-c+1===
k)return c*b}else-1!==c&&(m-=m-c),c=-1;else for(m+k>d&&(m=d-k);0<=m;m--){d=!0;for(c=0;c<k;c++)if(n(g,m+c)!==n(e,c)){d=!1;break}if(d)return m}return-1}function I5(g,e,m){m=Math.min(g.length,m);for(var c=[];e<m;){var h=g[e],n=null,b=239<h?4:223<h?3:191<h?2:1;if(e+b<=m)switch(b){case 1:128>h&&(n=h);break;case 2:var d=g[e+1];128===(d&192)&&(h=(h&31)<<6|d&63,127<h&&(n=h));break;case 3:d=g[e+1];var k=g[e+2];128===(d&192)&&128===(k&192)&&(h=(h&15)<<12|(d&63)<<6|k&63,2047<h&&(55296>h||57343<h)&&(n=h));break;
case 4:d=g[e+1];k=g[e+2];var a=g[e+3];128===(d&192)&&128===(k&192)&&128===(a&192)&&(h=(h&15)<<18|(d&63)<<12|(k&63)<<6|a&63,65535<h&&1114112>h&&(n=h))}null===n?(n=65533,b=1):65535<n&&(n-=65536,c.push(n>>>10&1023|55296),n=56320|n&1023);c.push(n);e+=b}g=c.length;if(g<=L5)c=String.fromCharCode.apply(String,c);else{m="";for(e=0;e<g;)m+=String.fromCharCode.apply(String,c.slice(e,e+=L5));c=m}return c}function In(g,e,m){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+e>m)throw new RangeError("Trying to access beyond buffer length");
}function fq(g,e,m,c,h,n){if(!xe.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>h||e<n)throw new RangeError('"value" argument is out of bounds');if(m+c>g.length)throw new RangeError("Index out of range");}function M5(g,e,m,c,h,n){if(m+c>g.length)throw new RangeError("Index out of range");if(0>m)throw new RangeError("Index out of range");}function N5(g,e,m,c,h){e=+e;m>>>=0;h||M5(g,e,m,4);kE.write(g,e,m,c,23,4);return m+4}function O5(g,e,m,c,h){e=+e;m>>>=0;h||M5(g,
e,m,8);kE.write(g,e,m,c,52,8);return m+8}function H5(g){g=g.split("=")[0];g=g.trim().replace(Oja,"");if(2>g.length)return"";for(;0!==g.length%4;)g+="=";return g}function XT(g,e){e=e||Infinity;for(var m,c=g.length,h=null,n=[],b=0;b<c;++b){m=g.charCodeAt(b);if(55295<m&&57344>m){if(!h){if(56319<m){-1<(e-=3)&&n.push(239,191,189);continue}else if(b+1===c){-1<(e-=3)&&n.push(239,191,189);continue}h=m;continue}if(56320>m){-1<(e-=3)&&n.push(239,191,189);h=m;continue}m=(h-55296<<10|m-56320)+65536}else h&&-1<
(e-=3)&&n.push(239,191,189);h=null;if(128>m){if(0>--e)break;n.push(m)}else if(2048>m){if(0>(e-=2))break;n.push(m>>6|192,m&63|128)}else if(65536>m){if(0>(e-=3))break;n.push(m>>12|224,m>>6&63|128,m&63|128)}else if(1114112>m){if(0>(e-=4))break;n.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw Error("Invalid code point");}return n}function pM(g,e,m,c){for(var h=0;h<c&&!(h+m>=e.length||h>=g.length);++h)e[h+m]=g[h];return h}function wv(g,e){return g instanceof e||null!=g&&null!=g.constructor&&
null!=g.constructor.name&&g.constructor.name===e.name}function oz(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||nx).db=g;(this||nx)._ended=!1;(this||nx)._nexting=!1}function At(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||en).db=g;(this||en)._operations=[];(this||en)._written=!1}function pl(g){(this||cr).status="new";(this||cr).supports=
Pja(g,{status:!0})}function P5(g,e){var m={},c;for(c in e)if(Qja.call(e,c)){var h=e[c];-1!==Rja.indexOf(c)&&(h=g._serializeKey(h));m[c]=h}return m}function lE(g,e){Q5.call(this||Bt,g);(this||Bt)._options=e;(this||Bt)._iterator=null;(this||Bt)._operations=[]}function BB(g){R5.call(this||Jn,g.supports||{});Sja.forEach(function(e){"function"!==typeof g[e]||(this||Jn).supports.additionalMethods[e]||((this||Jn).supports.additionalMethods[e]=!0)},this||Jn);(this||Jn)._db=g;(this||Jn)._operations=[];S5(this||
Jn)}function Tja(g){T5.concat("iterator").forEach(function(e){g["_"+e]=function(){return(this||Jn)._db[e].apply((this||Jn)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(e){g[e]=function(){return(this||Jn)._db[e].apply((this||Jn)._db,arguments)}})}function S5(g){T5.forEach(function(e){g["_"+e]=function(){(this||Jn)._operations.push({method:e,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(e){g[e]=function(){(this||Jn)._operations.push({method:e,
args:arguments})}});g._iterator=function(e){e=new U5(g,e);(this||Jn)._operations.push({iterator:e});return e}}function V5(){if(W5)return X5;W5=!0;return X5=ov.EventEmitter}function mE(){function g(c,h,n){n||(n=Error);var b=function(d,k,a){return n.call(this,"string"===typeof h?h:h(d,k,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=c;m[c]=b}function e(c,h){if(Array.isArray(c)){var n=c.length;c=c.map(function(b){return String(b)});return 2<n?"one of "+h+" "+c.slice(0,n-1).join(", ")+
", or "+c[n-1]:2===n?"one of "+h+" "+c[0]+" or "+c[1]:"of "+h+" "+c[0]}return"of "+h+" "+String(c)}if(Y5)return YT;Y5=!0;var m={};g("ERR_INVALID_OPT_VALUE",function(c,h){return'The value "'+h+'" is invalid for option "'+c+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(c,h,n){var b;if(b="string"===typeof h)b="not "===h.substr(0,4);b?(b="must not be",h=h.replace(/^not /,"")):b="must be";var d=void 0;if(void 0===d||d>c.length)d=c.length;" argument"===c.substring(d-9,d)?c="The "+c+" "+b+" "+e(h,"type"):
(d=void 0,"number"!==typeof d&&(d=0),d=d+1>c.length?!1:-1!==c.indexOf(".",d),c='The "'+c+'" '+(d?"property":"argument")+" "+b+" "+e(h,"type"));return c+(". Received type "+typeof n)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK",
"Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");YT.codes=m;return YT}function ZT(g){try{if(!$T.localStorage)return!1}catch(e){return!1}g=$T.localStorage[g];return null==g?!1:"true"===
String(g).toLowerCase()}function Z5(g,e){for(var m in g)e[m]=g[m]}function CB(g,e,m){return xv(g,e,m)}function Uja(g){if(!g)return"utf8";for(var e;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(e)return;g=(""+g).toLowerCase();e=!0}}function iH(g){var e=Uja(g);if("string"!==typeof e&&(aU.isEncoding===$5||!$5(g)))throw Error("Unknown encoding: "+
g);this.encoding=e||g;switch(this.encoding){case "utf16le":this.text=Vja;this.end=Wja;g=4;break;case "utf8":this.fillLast=Xja;g=4;break;case "base64":this.text=Yja;this.end=Zja;g=3;break;default:this.write=$ja;this.end=aka;return}this.lastTotal=this.lastNeed=0;this.lastChar=aU.allocUnsafe(g)}function bU(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function bka(g,e,m){var c=e.length-1;if(c<m)return 0;var h=bU(e[c]);if(0<=h)return 0<h&&(g.lastNeed=h-1),h;if(--c<m||-2===h)return 0;
h=bU(e[c]);if(0<=h)return 0<h&&(g.lastNeed=h-2),h;if(--c<m||-2===h)return 0;h=bU(e[c]);return 0<=h?(0<h&&(2===h?h=0:g.lastNeed=h-3),h):0}function Xja(g){var e=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var m="\ufffd"}else{if(1<this.lastNeed&&1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;m="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;m="\ufffd";break a}}m=void 0}if(void 0!==m)return m;if(this.lastNeed<=g.length)return g.copy(this.lastChar,
e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,e,0,g.length);this.lastNeed-=g.length}function Vja(g,e){if(0===(g.length-e)%2){if(e=g.toString("utf16le",e)){var m=e.charCodeAt(e.length-1);if(55296<=m&&56319>=m)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],e.slice(0,-1)}return e}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",e,g.length-1)}function Wja(g){g=
g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function Yja(g,e){var m=(g.length-e)%3;if(0===m)return g.toString("base64",e);this.lastNeed=3-m;this.lastTotal=3;1===m?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",e,g.length-m)}function Zja(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function $ja(g){return g.toString(this.encoding)}
function aka(g){return g&&g.length?this.write(g):""}function cU(){function g(h){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,d=Array(b),k=0;k<b;k++)d[k]=arguments[k];h.apply(this,d)}}}function e(){}function m(h,n,b){if("function"===typeof n)return m(h,null,n);n||(n={});b=g(b||e);var d=n.readable||!1!==n.readable&&h.readable,k=n.writable||!1!==n.writable&&h.writable,a=function(){h.writable||l()},f=h._writableState&&h._writableState.finished,l=function(){k=!1;f=!0;d||b.call(h)},
r=h._readableState&&h._readableState.endEmitted,v=function(){d=!1;r=!0;k||b.call(h)},y=function(F){b.call(h,F)},A=function(){var F;if(d&&!r)return h._readableState&&h._readableState.ended||(F=new c),b.call(h,F);if(k&&!f)return h._writableState&&h._writableState.ended||(F=new c),b.call(h,F)},E=function(){h.req.on("finish",l)};if(h.setHeader&&"function"===typeof h.abort)if(h.on("complete",l),h.on("abort",A),h.req)E();else h.on("request",E);else k&&!h._writableState&&(h.on("end",a),h.on("close",a));
h.on("end",v);h.on("finish",l);if(!1!==n.error)h.on("error",y);h.on("close",A);return function(){h.removeListener("complete",l);h.removeListener("abort",A);h.removeListener("request",E);h.req&&h.req.removeListener("finish",l);h.removeListener("end",a);h.removeListener("close",a);h.removeListener("finish",l);h.removeListener("end",v);h.removeListener("error",y);h.removeListener("close",A)}}if(a6)return b6;a6=!0;var c=mE().codes.ERR_STREAM_PREMATURE_CLOSE;return b6=m}function cka(){if(c6)return d6;
c6=!0;return d6=function(){throw Error("Readable.from is not available in the browser");}}function dka(){function g(d,k){var a=Object.keys(d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(d);k&&(f=f.filter(function(l){return Object.getOwnPropertyDescriptor(d,l).enumerable}));a.push.apply(a,f)}return a}function e(d){for(var k=1;k<arguments.length;k++){var a=null!=arguments[k]?arguments[k]:{};k%2?g(Object(a),!0).forEach(function(f){var l=a[f];f in d?Object.defineProperty(d,f,{value:l,
enumerable:!0,configurable:!0,writable:!0}):d[f]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(f){Object.defineProperty(d,f,Object.getOwnPropertyDescriptor(a,f))})}return d}function m(d,k){for(var a=0;a<k.length;a++){var f=k[a];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(d,f.key,f)}}function c(d,k,a){k&&m(d.prototype,k);a&&m(d,a);return d}if(e6)return f6;e6=!0;
var h=ei.Buffer,n=g6.inspect,b=n&&n.custom||"inspect";return f6=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}c(d,[{key:"push",value:function(k){k={data:k,next:null};0<this.length?this.tail.next=k:this.head=k;this.tail=k;++this.length}},{key:"unshift",value:function(k){k={data:k,next:this.head};0===this.length&&(this.tail=k);this.head=k;++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=
this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return k}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var a=this.head,f=""+a.data;a=a.next;)f+=k+a.data;return f}},{key:"concat",value:function(k){if(0===this.length)return h.alloc(0);k=h.allocUnsafe(k>>>0);for(var a=this.head,f=0;a;)h.prototype.copy.call(a.data,k,f),f+=a.data.length,a=a.next;return k}},{key:"consume",value:function(k,
a){k<this.head.data.length?(a=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):a=k===this.head.data.length?this.shift():a?this._getString(k):this._getBuffer(k);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var a=this.head,f=1,l=a.data;for(k-=l.length;a=a.next;){var r=a.data,v=k>r.length?r.length:k;l=v===r.length?l+r:l+r.slice(0,k);k-=v;if(0===k){v===r.length?(++f,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=r.slice(v));
break}++f}this.length-=f;return l}},{key:"_getBuffer",value:function(k){var a=h.allocUnsafe(k),f=this.head,l=1;f.data.copy(a);for(k-=f.data.length;f=f.next;){var r=f.data,v=k>r.length?r.length:k;r.copy(a,a.length-k,0,v);k-=v;if(0===k){v===r.length?(++l,this.head=f.next?f.next:this.tail=null):(this.head=f,f.data=r.slice(v));break}++l}this.length-=l;return a}},{key:b,value:function(k,a){return n(this,e({},a,{depth:0,customInspect:!1}))}}]);return d}()}function h6(){function g(h,n){m(h,n);e(h)}function e(h){h._writableState&&
!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function m(h,n){h.emit("error",n)}if(i6)return j6;i6=!0;var c=bj;return j6={destroy:function(h,n){var b=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return n?n(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(m,this,h)):c.nextTick(m,this,h)),this;this._readableState&&(this._readableState.destroyed=
!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(h||null,function(k){!n&&k?b._writableState?b._writableState.errorEmitted?c.nextTick(e,b):(b._writableState.errorEmitted=!0,c.nextTick(g,b,k)):c.nextTick(g,b,k):n?(c.nextTick(e,b),n(k)):c.nextTick(e,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=
!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,n){var b=h._readableState,d=h._writableState;b&&b.autoDestroy||d&&d.autoDestroy?h.destroy(n):h.emit("error",n)}}}function k6(){if(l6)return m6;l6=!0;var g=mE().codes.ERR_INVALID_OPT_VALUE;return m6={getHighWaterMark:function(e,m,c,h){m=null!=m.highWaterMark?m.highWaterMark:
h?m[c]:null;if(null!=m){if(!isFinite(m)||Math.floor(m)!==m||0>m)throw new g(h?c:"highWaterMark",m);return Math.floor(m)}return e.objectMode?16:16384}}}function n6(){function g(R){var U=this;this.entry=this.next=null;this.finish=function(){var na=U.entry;for(U.entry=null;na;){var aa=na.callback;R.pendingcb--;aa(void 0);na=na.next}R.corkedRequestsFree.next=U}}function e(){}function m(R,U,na){l=l||nE();R=R||{};"boolean"!==typeof na&&(na=U instanceof l);this.objectMode=!!R.objectMode;na&&(this.objectMode=
this.objectMode||!!R.writableObjectMode);this.highWaterMark=F(this,R,"writableHighWaterMark",na);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==R.decodeStrings;this.defaultEncoding=R.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(aa){var xa=U._writableState,jb=xa.sync,ob=xa.writecb;if("function"!==typeof ob)throw new L;xa.writing=!1;xa.writecb=null;xa.length-=
xa.writelen;xa.writelen=0;aa?(--xa.pendingcb,jb?(f.nextTick(ob,aa),f.nextTick(a,U,xa),U._writableState.errorEmitted=!0,K(U,aa)):(ob(aa),U._writableState.errorEmitted=!0,K(U,aa),a(U,xa))):((aa=d(xa)||U.destroyed)||xa.corked||xa.bufferProcessing||!xa.bufferedRequest||b(U,xa),jb?f.nextTick(n,U,xa,aa,ob):n(U,xa,aa,ob))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==R.emitClose;this.autoDestroy=
!!R.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function c(R){l=l||nE();var U=this instanceof l;if(!U&&!Z.call(c,this))return new c(R);this._writableState=new m(R,this,U);this.writable=!0;R&&("function"===typeof R.write&&(this._write=R.write),"function"===typeof R.writev&&(this._writev=R.writev),"function"===typeof R.destroy&&(this._destroy=R.destroy),"function"===typeof R.final&&(this._final=R.final));v.call(this)}function h(R,U,na,aa,xa,jb,ob){U.writelen=aa;U.writecb=
ob;U.writing=!0;U.sync=!0;if(U.destroyed)U.onwrite(new S("write"));else na?R._writev(xa,U.onwrite):R._write(xa,jb,U.onwrite);U.sync=!1}function n(R,U,na,aa){!na&&0===U.length&&U.needDrain&&(U.needDrain=!1,R.emit("drain"));U.pendingcb--;aa();a(R,U)}function b(R,U){U.bufferProcessing=!0;var na=U.bufferedRequest;if(R._writev&&na&&na.next){var aa=Array(U.bufferedRequestCount),xa=U.corkedRequestsFree;xa.entry=na;for(var jb=0,ob=!0;na;)aa[jb]=na,na.isBuf||(ob=!1),na=na.next,jb+=1;aa.allBuffers=ob;h(R,U,
!0,U.length,aa,"",xa.finish);U.pendingcb++;U.lastBufferedRequest=null;xa.next?(U.corkedRequestsFree=xa.next,xa.next=null):U.corkedRequestsFree=new g(U);U.bufferedRequestCount=0}else{for(;na&&(aa=na.chunk,h(R,U,!1,U.objectMode?1:aa.length,aa,na.encoding,na.callback),na=na.next,U.bufferedRequestCount--,!U.writing););null===na&&(U.lastBufferedRequest=null)}U.bufferedRequest=na;U.bufferProcessing=!1}function d(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function k(R,
U){R._final(function(na){U.pendingcb--;na&&K(R,na);U.prefinished=!0;R.emit("prefinish");a(R,U)})}function a(R,U){var na=d(U);na&&(U.prefinished||U.finalCalled||("function"!==typeof R._final||U.destroyed?(U.prefinished=!0,R.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,f.nextTick(k,R,U))),0===U.pendingcb&&(U.finished=!0,R.emit("finish"),U.autoDestroy&&(U=R._readableState,(!U||U.autoDestroy&&U.endEmitted)&&R.destroy())));return na}if(o6)return dU;o6=!0;var f=bj;dU=c;var l;c.WritableState=m;var r=
{deprecate:eka},v=V5(),y=ei.Buffer,A=fka.Uint8Array||function(){},E=h6(),F=k6().getHighWaterMark,H=mE().codes,J=H.ERR_INVALID_ARG_TYPE,O=H.ERR_METHOD_NOT_IMPLEMENTED,L=H.ERR_MULTIPLE_CALLBACK,Y=H.ERR_STREAM_CANNOT_PIPE,S=H.ERR_STREAM_DESTROYED,ea=H.ERR_STREAM_NULL_VALUES,qa=H.ERR_STREAM_WRITE_AFTER_END,Fa=H.ERR_UNKNOWN_ENCODING,K=E.errorOrDestroy;il(c,v);m.prototype.getBuffer=function(){for(var R=this.bufferedRequest,U=[];R;)U.push(R),R=R.next;return U};(function(){try{Object.defineProperty(m.prototype,
"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var Z=Function.prototype[Symbol.hasInstance];Object.defineProperty(c,Symbol.hasInstance,{value:function(R){return Z.call(this,R)?!0:this!==c?!1:R&&R._writableState instanceof m}})}else Z=function(R){return R instanceof this};
c.prototype.pipe=function(){K(this,new Y)};c.prototype.write=function(R,U,na){var aa=this._writableState,xa=!1,jb;if(jb=!aa.objectMode)jb=R,jb=y.isBuffer(jb)||jb instanceof A;jb&&!y.isBuffer(R)&&(R=y.from(R));"function"===typeof U&&(na=U,U=null);jb?U="buffer":U||(U=aa.defaultEncoding);"function"!==typeof na&&(na=e);if(aa.ending)aa=na,na=new qa,K(this,na),f.nextTick(aa,na);else{var ob;if(!(ob=jb)){ob=R;var pa=na,ka;null===ob?ka=new ea:"string"===typeof ob||aa.objectMode||(ka=new J("chunk",["string",
"Buffer"],ob));ka?(K(this,ka),f.nextTick(pa,ka),ob=!1):ob=!0}ob&&(aa.pendingcb++,xa=jb,xa||(ka=R,aa.objectMode||!1===aa.decodeStrings||"string"!==typeof ka||(ka=y.from(ka,U)),R!==ka&&(xa=!0,U="buffer",R=ka)),jb=aa.objectMode?1:R.length,aa.length+=jb,ka=aa.length<aa.highWaterMark,ka||(aa.needDrain=!0),aa.writing||aa.corked?(jb=aa.lastBufferedRequest,aa.lastBufferedRequest={chunk:R,encoding:U,isBuf:xa,callback:na,next:null},jb?jb.next=aa.lastBufferedRequest:aa.bufferedRequest=aa.lastBufferedRequest,
aa.bufferedRequestCount+=1):h(this,aa,!1,jb,R,U,na),xa=ka)}return xa};c.prototype.cork=function(){this._writableState.corked++};c.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||b(this,R))};c.prototype.setDefaultEncoding=function(R){"string"===typeof R&&(R=R.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((R+"").toLowerCase())))throw new Fa(R);this._writableState.defaultEncoding=
R;return this};Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});c.prototype._write=function(R,U,na){na(new O("_write()"))};c.prototype._writev=null;c.prototype.end=function(R,U,na){var aa=this._writableState;"function"===typeof R?(na=R,U=R=null):"function"===typeof U&&(na=U,
U=null);null!==R&&void 0!==R&&this.write(R,U);aa.corked&&(aa.corked=1,this.uncork());if(!aa.ending){R=na;aa.ending=!0;a(this,aa);if(R)if(aa.finished)f.nextTick(R);else this.once("finish",R);aa.ended=!0;this.writable=!1}return this};Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(R){this._writableState&&
(this._writableState.destroyed=R)}});c.prototype.destroy=E.destroy;c.prototype._undestroy=E.undestroy;c.prototype._destroy=function(R,U){U(R)};return dU}function nE(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",e)))}function e(){this._writableState.ended||c.nextTick(m,this)}function m(a){a.end()}if(p6)return eU;
p6=!0;var c=bj,h=Object.keys||function(a){var f=[],l;for(l in a)f.push(l);return f};eU=g;var n=q6(),b=n6();il(g,n);h=h(b.prototype);for(var d=0;d<h.length;d++){var k=h[d];g.prototype[k]||(g.prototype[k]=b.prototype[k])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});return eU}function gka(){function g(F,H,J){H in F?Object.defineProperty(F,
H,{value:J,enumerable:!0,configurable:!0,writable:!0}):F[H]=J;return F}function e(F,H){return{value:F,done:H}}function m(F){var H=F[k];if(null!==H){var J=F[y].read();null!==J&&(F[r]=null,F[k]=null,F[a]=null,H(e(J,!1)))}}function c(F){n.nextTick(m,F)}function h(F,H){return function(J,O){F.then(function(){if(H[l])J(e(void 0,!0));else H[v](J,O)},O)}}if(r6)return s6;r6=!0;var n=bj,b,d=cU(),k=Symbol("lastResolve"),a=Symbol("lastReject"),f=Symbol("error"),l=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),
y=Symbol("stream"),A=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((b={get stream(){return this[y]},next:function(){var F=this,H=this[f];if(null!==H)return Promise.reject(H);if(this[l])return Promise.resolve(e(void 0,!0));if(this[y].destroyed)return new Promise(function(J,O){n.nextTick(function(){F[f]?O(F[f]):J(e(void 0,!0))})});if(H=this[r])H=new Promise(h(H,this));else{H=this[y].read();if(null!==H)return Promise.resolve(e(H,!1));H=new Promise(this[v])}return this[r]=H}},g(b,Symbol.asyncIterator,
function(){return this}),g(b,"return",function(){var F=this;return new Promise(function(H,J){F[y].destroy(null,function(O){O?J(O):H(e(void 0,!0))})})}),b),A);return s6=function(F){var H,J=Object.create(E,(H={},g(H,y,{value:F,writable:!0}),g(H,k,{value:null,writable:!0}),g(H,a,{value:null,writable:!0}),g(H,f,{value:null,writable:!0}),g(H,l,{value:F._readableState.endEmitted,writable:!0}),g(H,v,{value:function(O,L){var Y=J[y].read();Y?(J[r]=null,J[k]=null,J[a]=null,O(e(Y,!1))):(J[k]=O,J[a]=L)},writable:!0}),
H));J[r]=null;d(F,function(O){if(O&&"ERR_STREAM_PREMATURE_CLOSE"!==O.code){var L=J[a];null!==L&&(J[r]=null,J[k]=null,J[a]=null,L(O));J[f]=O}else O=J[k],null!==O&&(J[r]=null,J[k]=null,J[a]=null,O(e(void 0,!0))),J[l]=!0});F.on("readable",c.bind(null,J));return J}}function q6(){function g(wa,Ka,Fb){if("function"===typeof wa.prependListener)return wa.prependListener(Ka,Fb);if(wa._events&&wa._events[Ka])Array.isArray(wa._events[Ka])?wa._events[Ka].unshift(Fb):wa._events[Ka]=[Fb,wa._events[Ka]];else wa.on(Ka,
Fb)}function e(wa,Ka,Fb){O=O||nE();wa=wa||{};"boolean"!==typeof Fb&&(Fb=Ka instanceof O);this.objectMode=!!wa.objectMode;Fb&&(this.objectMode=this.objectMode||!!wa.readableObjectMode);this.highWaterMark=K(this,wa,"readableHighWaterMark",Fb);this.buffer=new Fa;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==
wa.emitClose;this.autoDestroy=!!wa.autoDestroy;this.destroyed=!1;this.defaultEncoding=wa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;wa.encoding&&(xa||(xa=fU.StringDecoder),this.decoder=new xa(wa.encoding),this.encoding=wa.encoding)}function m(wa){O=O||nE();if(!(this instanceof m))return new m(wa);this._readableState=new e(wa,this,this instanceof O);this.readable=!0;wa&&("function"===typeof wa.read&&(this._read=wa.read),"function"===typeof wa.destroy&&
(this._destroy=wa.destroy));L.call(this)}function c(wa,Ka,Fb,hc,Ub){qa("readableAddChunk",Ka);var ac=wa._readableState;if(null===Ka)ac.reading=!1,qa("onEofChunk"),ac.ended||(ac.decoder&&(Ka=ac.decoder.end())&&Ka.length&&(ac.buffer.push(Ka),ac.length+=ac.objectMode?1:Ka.length),ac.ended=!0,ac.sync?b(wa):(ac.needReadable=!1,ac.emittedReadable||(ac.emittedReadable=!0,d(wa))));else{if(!Ub){Ub=Ka;var Ic;Y.isBuffer(Ub)||Ub instanceof S||"string"===typeof Ub||void 0===Ub||ac.objectMode||(Ic=new R("chunk",
["string","Buffer","Uint8Array"],Ub));var Mb=Ic}if(Mb)pa(wa,Mb);else if(ac.objectMode||Ka&&0<Ka.length)if("string"===typeof Ka||ac.objectMode||Object.getPrototypeOf(Ka)===Y.prototype||(Ka=Y.from(Ka)),hc)ac.endEmitted?pa(wa,new aa):h(wa,ac,Ka,!0);else if(ac.ended)pa(wa,new U);else{if(ac.destroyed)return!1;ac.reading=!1;ac.decoder&&!Fb?(Ka=ac.decoder.write(Ka),ac.objectMode||0!==Ka.length?h(wa,ac,Ka,!1):k(wa,ac)):h(wa,ac,Ka,!1)}else hc||(ac.reading=!1,k(wa,ac))}return!ac.ended&&(ac.length<ac.highWaterMark||
0===ac.length)}function h(wa,Ka,Fb,hc){Ka.flowing&&0===Ka.length&&!Ka.sync?(Ka.awaitDrain=0,wa.emit("data",Fb)):(Ka.length+=Ka.objectMode?1:Fb.length,hc?Ka.buffer.unshift(Fb):Ka.buffer.push(Fb),Ka.needReadable&&b(wa));k(wa,Ka)}function n(wa,Ka){if(0>=wa||0===Ka.length&&Ka.ended)return 0;if(Ka.objectMode)return 1;if(wa!==wa)return Ka.flowing&&Ka.length?Ka.buffer.head.data.length:Ka.length;if(wa>Ka.highWaterMark){var Fb=wa;1073741824<=Fb?Fb=1073741824:(Fb--,Fb|=Fb>>>1,Fb|=Fb>>>2,Fb|=Fb>>>4,Fb|=Fb>>>
8,Fb|=Fb>>>16,Fb++);Ka.highWaterMark=Fb}return wa<=Ka.length?wa:Ka.ended?Ka.length:(Ka.needReadable=!0,0)}function b(wa){var Ka=wa._readableState;qa("emitReadable",Ka.needReadable,Ka.emittedReadable);Ka.needReadable=!1;Ka.emittedReadable||(qa("emitReadable",Ka.flowing),Ka.emittedReadable=!0,J.nextTick(d,wa))}function d(wa){var Ka=wa._readableState;qa("emitReadable_",Ka.destroyed,Ka.length,Ka.ended);Ka.destroyed||!Ka.length&&!Ka.ended||(wa.emit("readable"),Ka.emittedReadable=!1);Ka.needReadable=!Ka.flowing&&
!Ka.ended&&Ka.length<=Ka.highWaterMark;y(wa)}function k(wa,Ka){Ka.readingMore||(Ka.readingMore=!0,J.nextTick(a,wa,Ka))}function a(wa,Ka){for(;!Ka.reading&&!Ka.ended&&(Ka.length<Ka.highWaterMark||Ka.flowing&&0===Ka.length);){var Fb=Ka.length;qa("maybeReadMore read 0");wa.read(0);if(Fb===Ka.length)break}Ka.readingMore=!1}function f(wa){return function(){var Ka=wa._readableState;qa("pipeOnDrain",Ka.awaitDrain);Ka.awaitDrain&&Ka.awaitDrain--;0===Ka.awaitDrain&&wa.listeners("data").length&&(Ka.flowing=
!0,y(wa))}}function l(wa){var Ka=wa._readableState;Ka.readableListening=0<wa.listenerCount("readable");Ka.resumeScheduled&&!Ka.paused?Ka.flowing=!0:0<wa.listenerCount("data")&&wa.resume()}function r(wa){qa("readable nexttick read 0");wa.read(0)}function v(wa,Ka){qa("resume",Ka.reading);Ka.reading||wa.read(0);Ka.resumeScheduled=!1;wa.emit("resume");y(wa);Ka.flowing&&!Ka.reading&&wa.read(0)}function y(wa){var Ka=wa._readableState;for(qa("flow",Ka.flowing);Ka.flowing&&null!==wa.read(););}function A(wa,
Ka){if(0===Ka.length)return null;Ka.objectMode?wa=Ka.buffer.shift():!wa||wa>=Ka.length?(wa=Ka.decoder?Ka.buffer.join(""):1===Ka.buffer.length?Ka.buffer.first():Ka.buffer.concat(Ka.length),Ka.buffer.clear()):wa=Ka.buffer.consume(wa,Ka.decoder);return wa}function E(wa){var Ka=wa._readableState;qa("endReadable",Ka.endEmitted);Ka.endEmitted||(Ka.ended=!0,J.nextTick(F,Ka,wa))}function F(wa,Ka){qa("endReadableNT",wa.endEmitted,wa.length);wa.endEmitted||0!==wa.length||(wa.endEmitted=!0,Ka.readable=!1,Ka.emit("end"),
wa.autoDestroy&&(wa=Ka._writableState,(!wa||wa.autoDestroy&&wa.finished)&&Ka.destroy()))}function H(wa,Ka){for(var Fb=0,hc=wa.length;Fb<hc;Fb++)if(wa[Fb]===Ka)return Fb;return-1}if(t6)return gU;t6=!0;var J=bj;gU=m;var O;m.ReadableState=e;var L=V5(),Y=ei.Buffer,S=hka.Uint8Array||function(){},ea=g6;var qa=ea&&ea.debuglog?ea.debuglog("stream"):function(){};var Fa=dka();ea=h6();var K=k6().getHighWaterMark,Z=mE().codes,R=Z.ERR_INVALID_ARG_TYPE,U=Z.ERR_STREAM_PUSH_AFTER_EOF,na=Z.ERR_METHOD_NOT_IMPLEMENTED,
aa=Z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,xa,jb,ob;il(m,L);var pa=ea.errorOrDestroy,ka=["error","close","destroy","pause","resume"];Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(wa){this._readableState&&(this._readableState.destroyed=wa)}});m.prototype.destroy=ea.destroy;m.prototype._undestroy=ea.undestroy;m.prototype._destroy=function(wa,Ka){Ka(wa)};m.prototype.push=function(wa,Ka){var Fb=
this._readableState;if(Fb.objectMode)var hc=!0;else"string"===typeof wa&&(Ka=Ka||Fb.defaultEncoding,Ka!==Fb.encoding&&(wa=Y.from(wa,Ka),Ka=""),hc=!0);return c(this,wa,Ka,!1,hc)};m.prototype.unshift=function(wa){return c(this,wa,null,!0,!1)};m.prototype.isPaused=function(){return!1===this._readableState.flowing};m.prototype.setEncoding=function(wa){xa||(xa=fU.StringDecoder);wa=new xa(wa);this._readableState.decoder=wa;this._readableState.encoding=this._readableState.decoder.encoding;for(var Ka=this._readableState.buffer.head,
Fb="";null!==Ka;)Fb+=wa.write(Ka.data),Ka=Ka.next;this._readableState.buffer.clear();""!==Fb&&this._readableState.buffer.push(Fb);this._readableState.length=Fb.length;return this};m.prototype.read=function(wa){qa("read",wa);wa=parseInt(wa,10);var Ka=this._readableState,Fb=wa;0!==wa&&(Ka.emittedReadable=!1);if(0===wa&&Ka.needReadable&&((0!==Ka.highWaterMark?Ka.length>=Ka.highWaterMark:0<Ka.length)||Ka.ended))return qa("read: emitReadable",Ka.length,Ka.ended),0===Ka.length&&Ka.ended?E(this):b(this),
null;wa=n(wa,Ka);if(0===wa&&Ka.ended)return 0===Ka.length&&E(this),null;var hc=Ka.needReadable;qa("need readable",hc);if(0===Ka.length||Ka.length-wa<Ka.highWaterMark)hc=!0,qa("length less than watermark",hc);Ka.ended||Ka.reading?qa("reading or ended",!1):hc&&(qa("do read"),Ka.reading=!0,Ka.sync=!0,0===Ka.length&&(Ka.needReadable=!0),this._read(Ka.highWaterMark),Ka.sync=!1,Ka.reading||(wa=n(Fb,Ka)));hc=0<wa?A(wa,Ka):null;null===hc?(Ka.needReadable=Ka.length<=Ka.highWaterMark,wa=0):(Ka.length-=wa,Ka.awaitDrain=
0);0===Ka.length&&(Ka.ended||(Ka.needReadable=!0),Fb!==wa&&Ka.ended&&E(this));null!==hc&&this.emit("data",hc);return hc};m.prototype._read=function(wa){pa(this,new na("_read()"))};m.prototype.pipe=function(wa,Ka){function Fb(wb,$b){qa("onunpipe");wb===Bd&&$b&&!1===$b.hasUnpiped&&($b.hasUnpiped=!0,qa("cleanup"),wa.removeListener("close",Ic),wa.removeListener("finish",Mb),wa.removeListener("drain",Ba),wa.removeListener("error",ac),wa.removeListener("unpipe",Fb),Bd.removeListener("end",hc),Bd.removeListener("end",
ed),Bd.removeListener("data",Ub),Ea=!0,!ja.awaitDrain||wa._writableState&&!wa._writableState.needDrain||Ba())}function hc(){qa("onend");wa.end()}function Ub(wb){qa("ondata");wb=wa.write(wb);qa("dest.write",wb);!1===wb&&((1===ja.pipesCount&&ja.pipes===wa||1<ja.pipesCount&&-1!==H(ja.pipes,wa))&&!Ea&&(qa("false write response, pause",ja.awaitDrain),ja.awaitDrain++),Bd.pause())}function ac(wb){qa("onerror",wb);ed();wa.removeListener("error",ac);0===wa.listeners("error").length&&pa(wa,wb)}function Ic(){wa.removeListener("finish",
Mb);ed()}function Mb(){qa("onfinish");wa.removeListener("close",Ic);ed()}function ed(){qa("unpipe");Bd.unpipe(wa)}var Bd=this,ja=this._readableState;switch(ja.pipesCount){case 0:ja.pipes=wa;break;case 1:ja.pipes=[ja.pipes,wa];break;default:ja.pipes.push(wa)}ja.pipesCount+=1;qa("pipe count=%d opts=%j",ja.pipesCount,Ka);Ka=Ka&&!1===Ka.end||wa===J.stdout||wa===J.stderr?ed:hc;if(ja.endEmitted)J.nextTick(Ka);else Bd.once("end",Ka);wa.on("unpipe",Fb);var Ba=f(Bd);wa.on("drain",Ba);var Ea=!1;Bd.on("data",
Ub);g(wa,"error",ac);wa.once("close",Ic);wa.once("finish",Mb);wa.emit("pipe",Bd);ja.flowing||(qa("pipe resume"),Bd.resume());return wa};m.prototype.unpipe=function(wa){var Ka=this._readableState,Fb={hasUnpiped:!1};if(0===Ka.pipesCount)return this;if(1===Ka.pipesCount){if(wa&&wa!==Ka.pipes)return this;wa||(wa=Ka.pipes);Ka.pipes=null;Ka.pipesCount=0;Ka.flowing=!1;wa&&wa.emit("unpipe",this,Fb);return this}if(!wa){wa=Ka.pipes;Fb=Ka.pipesCount;Ka.pipes=null;Ka.pipesCount=0;Ka.flowing=!1;for(Ka=0;Ka<Fb;Ka++)wa[Ka].emit("unpipe",
this,{hasUnpiped:!1});return this}var hc=H(Ka.pipes,wa);if(-1===hc)return this;Ka.pipes.splice(hc,1);--Ka.pipesCount;1===Ka.pipesCount&&(Ka.pipes=Ka.pipes[0]);wa.emit("unpipe",this,Fb);return this};m.prototype.on=function(wa,Ka){Ka=L.prototype.on.call(this,wa,Ka);var Fb=this._readableState;"data"===wa?(Fb.readableListening=0<this.listenerCount("readable"),!1!==Fb.flowing&&this.resume()):"readable"!==wa||Fb.endEmitted||Fb.readableListening||(Fb.readableListening=Fb.needReadable=!0,Fb.flowing=!1,Fb.emittedReadable=
!1,qa("on readable",Fb.length,Fb.reading),Fb.length?b(this):Fb.reading||J.nextTick(r,this));return Ka};m.prototype.addListener=m.prototype.on;m.prototype.removeListener=function(wa,Ka){Ka=L.prototype.removeListener.call(this,wa,Ka);"readable"===wa&&J.nextTick(l,this);return Ka};m.prototype.removeAllListeners=function(wa){var Ka=L.prototype.removeAllListeners.apply(this,arguments);"readable"!==wa&&void 0!==wa||J.nextTick(l,this);return Ka};m.prototype.resume=function(){var wa=this._readableState;wa.flowing||
(qa("resume"),wa.flowing=!wa.readableListening,wa.resumeScheduled||(wa.resumeScheduled=!0,J.nextTick(v,this,wa)));wa.paused=!1;return this};m.prototype.pause=function(){qa("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(qa("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};m.prototype.wrap=function(wa){var Ka=this,Fb=this._readableState,hc=!1;wa.on("end",function(){qa("wrapped end");if(Fb.decoder&&!Fb.ended){var ac=
Fb.decoder.end();ac&&ac.length&&Ka.push(ac)}Ka.push(null)});wa.on("data",function(ac){qa("wrapped data");Fb.decoder&&(ac=Fb.decoder.write(ac));Fb.objectMode&&(null===ac||void 0===ac)||!(Fb.objectMode||ac&&ac.length)||Ka.push(ac)||(hc=!0,wa.pause())});for(var Ub in wa)void 0===this[Ub]&&"function"===typeof wa[Ub]&&(this[Ub]=function(ac){return function(){return wa[ac].apply(wa,arguments)}}(Ub));for(Ub=0;Ub<ka.length;Ub++)wa.on(ka[Ub],this.emit.bind(this,ka[Ub]));this._read=function(ac){qa("wrapped _read",
ac);hc&&(hc=!1,wa.resume())};return this};"function"===typeof Symbol&&(m.prototype[Symbol.asyncIterator]=function(){void 0===jb&&(jb=gka());return jb(this)});Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(m.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(m.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(wa){this._readableState&&(this._readableState.flowing=wa)}});m._fromList=A;Object.defineProperty(m.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(m.from=function(wa,Ka){void 0===ob&&(ob=cka());return ob(m,wa,Ka)});return gU}function u6(){function g(f,l){var r=this._transformState;r.transforming=!1;var v=r.writecb;if(null===v)return this.emit("error",new b);r.writechunk=null;r.writecb=null;null!=l&&this.push(l);
v(f);f=this._readableState;f.reading=!1;(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function e(f){if(!(this instanceof e))return new e(f);a.call(this,f);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;f&&("function"===typeof f.transform&&(this._transform=f.transform),"function"===typeof f.flush&&(this._flush=f.flush));this.on("prefinish",
m)}function m(){var f=this;"function"!==typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(l,r){c(f,l,r)})}function c(f,l,r){if(l)return f.emit("error",l);null!=r&&f.push(r);if(f._writableState.length)throw new k;if(f._transformState.transforming)throw new d;return f.push(null)}if(v6)return hU;v6=!0;hU=e;var h=mE().codes,n=h.ERR_METHOD_NOT_IMPLEMENTED,b=h.ERR_MULTIPLE_CALLBACK,d=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=h.ERR_TRANSFORM_WITH_LENGTH_0,a=nE();il(e,
a);e.prototype.push=function(f,l){this._transformState.needTransform=!1;return a.prototype.push.call(this,f,l)};e.prototype._transform=function(f,l,r){r(new n("_transform()"))};e.prototype._write=function(f,l,r){var v=this._transformState;v.writecb=r;v.writechunk=f;v.writeencoding=l;v.transforming||(f=this._readableState,(v.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark))};e.prototype._read=function(f){f=this._transformState;null===f.writechunk||f.transforming?
f.needTransform=!0:(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform))};e.prototype._destroy=function(f,l){a.prototype._destroy.call(this,f,function(r){l(r)})};return hU}function oE(g,e){if(!((this||Ct)instanceof oE))return new oE(g,e);e=e||{};w6.call(this||Ct,ika(e,{objectMode:!0}));(this||Ct)._iterator=g;(this||Ct)._options=e;this.on("end",(this||Ct).destroy.bind(this||Ct,null,null))}function x6(g,e,m){e&&"string"!=typeof e&&(e=e.message||e.name);jka(this||Am,{type:g,
name:g,cause:"string"!=typeof e?e:m,message:e},"ewr")}function iU(g,e){Error.call(this||Am);Error.captureStackTrace&&Error.captureStackTrace(this||Am,(this||Am).constructor);x6.call(this||Am,"CustomError",g,e)}function kka(g,e,m){var c=function(h,n){x6.call(this||Am,e,h,n);"FilesystemError"==e&&((this||Am).code=(this||Am).cause.code,(this||Am).path=(this||Am).cause.path,(this||Am).errno=(this||Am).cause.errno,(this||Am).message=(g.errno[(this||Am).cause.errno]?g.errno[(this||Am).cause.errno].description:
(this||Am).cause.message)+((this||Am).cause.path?" ["+(this||Am).cause.path+"]":""));Error.call(this||Am);Error.captureStackTrace&&Error.captureStackTrace(this||Am,c)};c.prototype=m?new m:new iU;return c}function jH(g){(this||Bm).db=(this||Bm)._levelup=g;(this||Bm).batch=g.db.batch();(this||Bm).ops=[];(this||Bm).length=0}function y6(g,e){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var m=Object(g),c=1;c<arguments.length;c++){var h=arguments[c];if(null!=h)for(var n=
Object.keys(Object(h)),b=0,d=n.length;b<d;b++){var k=n[b],a=Object.getOwnPropertyDescriptor(h,k);void 0!==a&&a.enumerable&&(m[k]=h[k])}}return m}function z6(){function g(k){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(k)}function e(k){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(k)}
function m(k,a){return(m=Object.setPrototypeOf||function(f,l){return f.__proto__=l,f})(k,a)}function c(k,a,f){f||(f=Error);f=function(l){function r(v,y,A){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");!0;v=e(r).call(this,"string"==typeof a?a:a(v,y,A));if(!v||"object"!==g(v)&&"function"!=typeof v){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");v=this}return v.code=k,v}return!function(v,y){if("function"!=typeof y&&
null!==y)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}});y&&m(v,y)}(r,l),r}(f);d[k]=f}function h(k,a){if(Array.isArray(k)){var f=k.length;return k=k.map(function(l){return String(l)}),2<f?"one of ".concat(a," ").concat(k.slice(0,f-1).join(", "),", or ")+k[f-1]:2===f?"one of ".concat(a," ").concat(k[0]," or ").concat(k[1]):"of ".concat(a," ").concat(k[0])}return"of ".concat(a," ").concat(String(k))}
if(A6)return jU;A6=!0;var n,b,d={};return c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",function(k,a,f){var l;if(void 0===n&&(n=kU()),n("string"==typeof k,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(l="must not be",a=a.replace(/^not /,"")):l="must be",function(v,y,A){return(void 0===A||A>v.length)&&(A=v.length),v.substring(A-y.length,A)===y}(k," argument"))k="The ".concat(k," ").concat(l," ").concat(h(a,"type"));else{var r=
function(v,y,A){return"number"!=typeof A&&(A=0),!(A+y.length>v.length)&&-1!==v.indexOf(y,A)}(k,".")?"property":"argument";k='The "'.concat(k,'" ').concat(r," ").concat(l," ").concat(h(a,"type"))}return k+=". Received type ".concat(g(f))},TypeError),c("ERR_INVALID_ARG_VALUE",function(k,a){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=Oh);var l=b.inspect(a);return 128<l.length&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(k,"' ").concat(f,". Received ").concat(l)},
TypeError),c("ERR_INVALID_RETURN_VALUE",function(k,a,f){var l;return l=f&&f.constructor&&f.constructor.name?"instance of ".concat(f.constructor.name):"type ".concat(g(f)),"Expected ".concat(k,' to be returned from the "').concat(a,'"')+" function but got ".concat(l,".")},TypeError),c("ERR_MISSING_ARGS",function(){for(var k=arguments.length,a=Array(k),f=0;f<k;f++)a[f]=arguments[f];void 0===n&&(n=kU());n(0<a.length,"At least one arg needs to be specified");k="The ";f=a.length;switch(a=a.map(function(l){return'"'.concat(l,
'"')}),f){case 1:k+="".concat(a[0]," argument");break;case 2:k+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:k+=a.slice(0,f-1).join(", "),k+=", and ".concat(a[f-1]," arguments")}return"".concat(k," must be specified")},TypeError),jU.codes=d,jU}function lka(){function g(L,Y){for(var S=0;S<Y.length;S++){var ea=Y[S];ea.enumerable=ea.enumerable||!1;ea.configurable=!0;"value"in ea&&(ea.writable=!0);Object.defineProperty(L,ea.key,ea)}}function e(L,Y){return!Y||"object"!==k(Y)&&"function"!=
typeof Y?m(L):Y}function m(L){if(void 0===L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function c(L){var Y="function"==typeof Map?new Map:void 0;return(c=function(S){function ea(){return n(S,arguments,d(this).constructor)}if(null===S||(qa=S,-1===Function.toString.call(qa).indexOf("[native code]")))return S;var qa;if("function"!=typeof S)throw new TypeError("Super expression must either be null or a function");if(void 0!==Y){if(Y.has(S))return Y.get(S);
Y.set(S,ea)}return ea.prototype=Object.create(S.prototype,{constructor:{value:ea,enumerable:!1,writable:!0,configurable:!0}}),b(ea,S)})(L)}function h(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(L){return!1}}function n(L,Y,S){return(n=h()?Reflect.construct:function(ea,qa,Fa){var K=[null];K.push.apply(K,qa);ea=new (Function.bind.apply(ea,
K));return Fa&&b(ea,Fa.prototype),ea}).apply(null,arguments)}function b(L,Y){return(b=Object.setPrototypeOf||function(S,ea){return S.__proto__=ea,S})(L,Y)}function d(L){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(L)}function k(L){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Y){return typeof Y}:function(Y){return Y&&"function"==typeof Symbol&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(L)}
function a(L,Y,S){return(void 0===S||S>L.length)&&(S=L.length),L.substring(S-Y.length,S)===Y}function f(L){var Y=Object.keys(L),S=Object.create(Object.getPrototypeOf(L));return Y.forEach(function(ea){S[ea]=L[ea]}),Object.defineProperty(S,"message",{value:L.message}),S}function l(L){return y(L,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function r(L,Y,S){var ea="",qa="",Fa=0,K="",Z=!1,R=l(L),U=R.split("\n"),na=l(Y).split("\n"),
aa=0,xa="";if("strictEqual"===S&&"object"===k(L)&&"object"===k(Y)&&null!==L&&null!==Y&&(S="strictEqualObject"),1===U.length&&1===na.length&&U[0]!==na[0]){var jb=U[0].length+na[0].length;if(10>=jb){if(!("object"===k(L)&&null!==L||"object"===k(Y)&&null!==Y||0===L&&0===Y))return"".concat(O[S],"\n\n")+"".concat(U[0]," !== ").concat(na[0],"\n")}else if("strictEqualObject"!==S&&jb<(v.stderr&&v.stderr.isTTY?v.stderr.columns:80)){for(;U[0][aa]===na[0][aa];)aa++;2<aa&&(xa="\n  ".concat(function(wa,Ka){if(Ka=
Math.floor(Ka),0==wa.length||0==Ka)return"";var Fb=wa.length*Ka;for(Ka=Math.floor(Math.log(Ka)/Math.log(2));Ka;)wa+=wa,Ka--;return wa+wa.substring(0,Fb-wa.length)}(" ",aa),"^"),aa=0)}}L=U[U.length-1];for(Y=na[na.length-1];L===Y&&(2>aa++?K="\n  ".concat(L).concat(K):ea=L,U.pop(),na.pop(),0!==U.length&&0!==na.length);)L=U[U.length-1],Y=na[na.length-1];L=Math.max(U.length,na.length);if(0===L){ea=R.split("\n");if(30<ea.length)for(ea[26]="".concat(E,"...").concat(J);27<ea.length;)ea.pop();return"".concat(O.notIdentical,
"\n\n").concat(ea.join("\n"),"\n")}3<aa&&(K="\n".concat(E,"...").concat(J).concat(K),Z=!0);""!==ea&&(K="\n  ".concat(ea).concat(K),ea="");R=0;S=O[S]+"\n".concat(F,"+ actual").concat(J," ").concat(H,"- expected").concat(J);Y=" ".concat(E,"...").concat(J," Lines skipped");for(aa=0;aa<L;aa++){jb=aa-Fa;if(U.length<aa+1)1<jb&&2<aa&&(4<jb?(qa+="\n".concat(E,"...").concat(J),Z=!0):3<jb&&(qa+="\n  ".concat(na[aa-2]),R++),qa+="\n  ".concat(na[aa-1]),R++),Fa=aa,ea+="\n".concat(H,"-").concat(J," ").concat(na[aa]),
R++;else if(na.length<aa+1)1<jb&&2<aa&&(4<jb?(qa+="\n".concat(E,"...").concat(J),Z=!0):3<jb&&(qa+="\n  ".concat(U[aa-2]),R++),qa+="\n  ".concat(U[aa-1]),R++),Fa=aa,qa+="\n".concat(F,"+").concat(J," ").concat(U[aa]),R++;else{var ob=na[aa],pa=U[aa],ka=pa!==ob&&(!a(pa,",")||pa.slice(0,-1)!==ob);ka&&a(ob,",")&&ob.slice(0,-1)===pa&&(ka=!1,pa+=",");ka?(1<jb&&2<aa&&(4<jb?(qa+="\n".concat(E,"...").concat(J),Z=!0):3<jb&&(qa+="\n  ".concat(U[aa-2]),R++),qa+="\n  ".concat(U[aa-1]),R++),Fa=aa,qa+="\n".concat(F,
"+").concat(J," ").concat(pa),ea+="\n".concat(H,"-").concat(J," ").concat(ob),R+=2):(qa+=ea,ea="",1!==jb&&0!==aa||(qa+="\n  ".concat(pa),R++))}if(20<R&&aa<L-2)return"".concat(S).concat(Y,"\n").concat(qa,"\n").concat(E,"...").concat(J).concat(ea,"\n")+"".concat(E,"...").concat(J)}return"".concat(S).concat(Z?Y:"","\n").concat(qa).concat(ea).concat(K).concat(xa)}if(B6)return C6;B6=!0;var v=bj,y=Oh.inspect,A=z6().codes.ERR_INVALID_ARG_TYPE,E="",F="",H="",J="",O={deepStrictEqual:"Expected values to be strictly deep-equal:",
strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',
notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return C6=function(L){function Y(ea){if(!(this instanceof Y))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==k(ea)||null===ea)throw new A("options","Object",ea);var qa=ea.message,Fa=ea.operator,K=ea.stackStartFn,Z=ea.actual;ea=ea.expected;var R=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=qa)var U=e(this,d(Y).call(this,String(qa)));else if(v.stderr&&
v.stderr.isTTY&&(v.stderr&&v.stderr.getColorDepth&&1!==v.stderr.getColorDepth()?(E="\u001b[34m",F="\u001b[32m",J="\u001b[39m",H="\u001b[31m"):(E="",F="",J="",H="")),"object"===k(Z)&&null!==Z&&"object"===k(ea)&&null!==ea&&"stack"in Z&&Z instanceof Error&&"stack"in ea&&ea instanceof Error&&(Z=f(Z),ea=f(ea)),"deepStrictEqual"===Fa||"strictEqual"===Fa)U=e(this,d(Y).call(this,r(Z,ea,Fa)));else if("notDeepStrictEqual"===Fa||"notStrictEqual"===Fa){U=O[Fa];var na=l(Z).split("\n");if("notStrictEqual"===Fa&&
"object"===k(Z)&&null!==Z&&(U=O.notStrictEqualObject),30<na.length)for(na[26]="".concat(E,"...").concat(J);27<na.length;)na.pop();U=1===na.length?e(this,d(Y).call(this,"".concat(U," ").concat(na[0]))):e(this,d(Y).call(this,"".concat(U,"\n\n").concat(na.join("\n"),"\n")))}else{U=l(Z);na="";var aa=O[Fa];"notDeepEqual"===Fa||"notEqual"===Fa?1024<(U="".concat(O[Fa],"\n\n").concat(U)).length&&(U="".concat(U.slice(0,1021),"...")):(na="".concat(l(ea)),512<U.length&&(U="".concat(U.slice(0,509),"...")),512<
na.length&&(na="".concat(na.slice(0,509),"...")),"deepEqual"===Fa||"equal"===Fa?U="".concat(aa,"\n\n").concat(U,"\n\nshould equal\n\n"):na=" ".concat(Fa," ").concat(na));U=e(this,d(Y).call(this,"".concat(U).concat(na)))}return Error.stackTraceLimit=R,U.generatedMessage=!qa,Object.defineProperty(m(U),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),U.code="ERR_ASSERTION",U.actual=Z,U.expected=ea,U.operator=Fa,Error.captureStackTrace&&Error.captureStackTrace(m(U),
K),U.stack,U.name="AssertionError",e(U)}var S;return!function(ea,qa){if("function"!=typeof qa&&null!==qa)throw new TypeError("Super expression must either be null or a function");ea.prototype=Object.create(qa&&qa.prototype,{constructor:{value:ea,writable:!0,configurable:!0}});qa&&b(ea,qa)}(Y,L),S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:y.custom,value:function(ea,qa){return y(this,function(Fa){for(var K=1;K<arguments.length;K++){var Z=
null!=arguments[K]?arguments[K]:{},R=Object.keys(Z);"function"==typeof Object.getOwnPropertySymbols&&(R=R.concat(Object.getOwnPropertySymbols(Z).filter(function(U){return Object.getOwnPropertyDescriptor(Z,U).enumerable})));R.forEach(function(U){var na=Z[U];U in Fa?Object.defineProperty(Fa,U,{value:na,enumerable:!0,configurable:!0,writable:!0}):Fa[U]=na})}return Fa}({},qa,{customInspect:!1,depth:0}))}}],g(Y.prototype,S),Y}(c(Error))}function D6(g,e){if(!(g=function(m){if(Array.isArray(m))return m}(g)||
function(m,c){var h=[],n=!0,b=!1,d=void 0;try{for(var k,a=m[Symbol.iterator]();!(n=(k=a.next()).done)&&(h.push(k.value),!c||h.length!==c);n=!0);}catch(f){b=!0,d=f}finally{try{n||null==a.return||a.return()}finally{if(b)throw d;}}return h}(g,e)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function Dt(g){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===
Symbol&&e!==Symbol.prototype?"symbol":typeof e})(g)}function lU(g){return g.call.bind(g)}function mka(g){if(0===g.length||10<g.length)return!0;for(var e=0;e<g.length;e++){var m=g.charCodeAt(e);if(48>m||57<m)return!0}return 10===g.length&&g>=Math.pow(2,32)}function qM(g){return Object.keys(g).filter(mka).concat(rM(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}function E6(g,e){if(g===e)return 0;for(var m=g.length,c=e.length,h=0,n=Math.min(m,c);h<n;++h)if(g[h]!==e[h]){m=g[h];c=e[h];break}return m<
c?-1:c<m?1:0}function ms(g,e,m,c){if(g===e)return 0!==g||!m||F6(g,e);if(m){if("object"!==Dt(g))return"number"==typeof g&&mU(g)&&mU(e);if("object"!==Dt(e)||null===g||null===e||Object.getPrototypeOf(g)!==Object.getPrototypeOf(e))return!1}else{if(null===g||"object"!==Dt(g))return(null===e||"object"!==Dt(e))&&g==e;if(null===e||"object"!==Dt(e))return!1}var h=G6(g);if(h!==G6(e))return!1;if(Array.isArray(g)){if(g.length!==e.length)return!1;h=qM(g);var n=qM(e);return h.length===n.length&&kH(g,e,m,c,1,h)}if("[object Object]"===
h&&(!sM(g)&&sM(e)||!tM(g)&&tM(e)))return!1;if(H6(g)){if(!H6(e)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(e))return!1}else if(I6(g)){if(!I6(e)||(nka?g.source!==e.source||g.flags!==e.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(e)))return!1}else if(oka(g)||g instanceof Error){if(g.message!==e.message||g.name!==e.name)return!1}else{if(pka(g)){if(m||!qka(g)&&!rka(g)){if(!function(b,d){return b.byteLength===d.byteLength&&0===E6(new Uint8Array(b.buffer,b.byteOffset,
b.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(g,e))return!1}else if(!function(b,d){if(b.byteLength!==d.byteLength)return!1;for(var k=0;k<b.byteLength;k++)if(b[k]!==d[k])return!1;return!0}(g,e))return!1;h=qM(g);n=qM(e);return h.length===n.length&&kH(g,e,m,c,0,h)}if(tM(g))return!(!tM(e)||g.size!==e.size)&&kH(g,e,m,c,2);if(sM(g))return!(!sM(e)||g.size!==e.size)&&kH(g,e,m,c,3);if(ska(g)){if(g.byteLength!==e.byteLength||0!==E6(new Uint8Array(g),new Uint8Array(e)))return!1}else if(tka(g)&&
!function(b,d){return J6(b)?J6(d)&&F6(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(d)):K6(b)?K6(d)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(d):L6(b)?L6(d)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(d):M6(b)?M6(d)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(d):uka(d)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(d)}(g,e))return!1}return kH(g,e,m,c,0)}function N6(g,e){return e.filter(function(m){return uM(g,
m)})}function kH(g,e,m,c,h,n){if(5===arguments.length){n=Object.keys(g);var b=Object.keys(e);if(n.length!==b.length)return!1}for(var d=0;d<n.length;d++)if(!lH(e,n[d]))return!1;if(m&&5===arguments.length)if(b=rM(g),0!==b.length){var k=0;for(d=0;d<b.length;d++){var a=b[d];if(uM(g,a)){if(!uM(e,a))return!1;n.push(a);k++}else if(uM(e,a))return!1}d=rM(e);if(b.length!==d.length&&N6(e,d).length!==k)return!1}else if(b=rM(e),0!==b.length&&0!==N6(e,b).length)return!1;if(0===n.length&&(0===h||1===h&&0===g.length||
0===g.size))return!0;if(void 0===c)c={val1:new Map,val2:new Map,position:0};else{b=c.val1.get(g);if(void 0!==b&&(k=c.val2.get(e),void 0!==k))return b===k;c.position++}c.val1.set(g,c.position);c.val2.set(e,c.position);b=vka(g,e,m,n,c,h);return c.val1.delete(g),c.val2.delete(e),b}function O6(g,e,m,c){for(var h=vM(g),n=0;n<h.length;n++){var b=h[n];if(ms(e,b,m,c))return g.delete(b),!0}return!1}function P6(g){switch(Dt(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=
+g;case "number":if(mU(g))return!1}return!0}function Q6(g,e,m,c,h,n){for(var b=vM(g),d=0;d<b.length;d++){var k=b[d];if(ms(m,k,h,n)&&ms(c,e.get(k),h,n))return g.delete(k),!0}return!1}function vka(g,e,m,c,h,n){var b=0;if(2===n){if(!function(d,k,a,f){for(var l=null,r=vM(d),v=0;v<r.length;v++){var y=r[v];if("object"===Dt(y)&&null!==y)null===l&&(l=new Set),l.add(y);else if(!k.has(y)){if(a)return!1;var A=d,E=k,F=P6(y);if(null!=F?!F:!E.has(F)||A.has(F))return!1;null===l&&(l=new Set);l.add(y)}}if(null!==
l){k=vM(k);for(r=0;r<k.length;r++)if(v=k[r],"object"===Dt(v)&&null!==v){if(!O6(l,v,a,f))return!1}else if(!a&&!d.has(v)&&!O6(l,v,a,f))return!1;return 0===l.size}return!0}(g,e,m,h))return!1}else if(3===n){if(!function(d,k,a,f){for(var l=null,r=R6(d),v=0;v<r.length;v++){var y=D6(r[v],2),A=y[0],E=y[1];if("object"===Dt(A)&&null!==A)null===l&&(l=new Set),l.add(A);else if(y=k.get(A),void 0===y&&!k.has(A)||!ms(E,y,a,f)){if(a)return!1;y=d;var F=k,H=f,J=P6(A);if(null!=J)y=J;else{var O=F.get(J);y=!(void 0===
O&&!F.has(J)||!ms(E,O,!1,H))&&!y.has(J)&&ms(E,O,!1,H)}if(!y)return!1;null===l&&(l=new Set);l.add(A)}}if(null!==l){k=R6(k);for(r=0;r<k.length;r++)if(v=D6(k[r],2),v=(A=v[0],v[1]),"object"===Dt(A)&&null!==A){if(!Q6(l,d,A,v,a,f))return!1}else if(!(a||d.has(A)&&ms(d.get(A),v,!1,f)||Q6(l,d,A,v,!1,f)))return!1;return 0===l.size}return!0}(g,e,m,h))return!1}else if(1===n)for(;b<g.length;b++){if(!lH(g,b)){if(lH(e,b))return!1;for(c=Object.keys(g);b<c.length;b++)if(n=c[b],!lH(e,n)||!ms(g[n],e[n],m,h))return!1;
return c.length===Object.keys(e).length}if(!lH(e,b)||!ms(g[b],e[b],m,h))return!1}for(b=0;b<c.length;b++)if(n=c[b],!ms(g[n],e[n],m,h))return!1;return!0}function kU(){function g(U){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(na){return typeof na}:function(na){return na&&"function"==typeof Symbol&&na.constructor===Symbol&&na!==Symbol.prototype?"symbol":typeof na})(U)}function e(){v=S6.isDeepEqual;y=S6.isDeepStrictEqual}function m(U){if(U.message instanceof Error)throw U.message;
throw new L(U);}function c(U,na,aa,xa){if(!aa){var jb=!1;if(0===na)jb=!0,xa="No value argument passed to `assert.ok()`";else if(xa instanceof Error)throw xa;U=new L({actual:aa,expected:!0,message:xa,operator:"==",stackStartFn:U});throw U.generatedMessage=jb,U;}}function h(){for(var U=arguments.length,na=Array(U),aa=0;aa<U;aa++)na[aa]=arguments[aa];c.apply(void 0,[h,na.length].concat(na))}function n(U,na,aa,xa){if("function"!=typeof na){if(ea(na))return na.test(U);if(2===arguments.length)throw new F("expected",
["Function","RegExp"],na);if("object"!==g(U)||null===U){var jb=new L({actual:U,expected:na,message:aa,operator:"deepStrictEqual",stackStartFn:xa});throw jb.operator=xa.name,jb;}var ob=Object.keys(na);if(na instanceof Error)ob.push("name","message");else if(0===ob.length)throw new H("error",na,"may not be an empty object");return void 0===v&&e(),ob.forEach(function(pa){if(!("string"==typeof U[pa]&&ea(na[pa])&&na[pa].test(U[pa])||pa in U&&y(U[pa],na[pa]))){if(!aa){pa=new R(U,ob);var ka=new R(na,ob,
U);pa=new L({actual:pa,expected:ka,operator:"deepStrictEqual",stackStartFn:xa});throw pa.actual=U,pa.expected=na,pa.operator=xa.name,pa;}m({actual:U,expected:na,message:aa,operator:xa.name,stackStartFn:xa})}}),!0}return void 0!==na.prototype&&U instanceof na||!Error.isPrototypeOf(na)&&!0===na.call({},U)}function b(U){if("function"!=typeof U)throw new F("fn","Function",U);try{U()}catch(na){return na}return Z}function d(U){return S(U)||null!==U&&"object"===g(U)&&"function"==typeof U.then&&"function"==
typeof U.catch}function k(U){return Promise.resolve().then(function(){var na;if("function"==typeof U){if(!d(na=U()))throw new J("instance of Promise","promiseFn",na);}else{if(!d(U))throw new F("promiseFn",["Function","Promise"],U);na=U}return Promise.resolve().then(function(){return na}).then(function(){return Z}).catch(function(aa){return aa})})}function a(U,na,aa,xa){if("string"==typeof aa){if(4===arguments.length)throw new F("error",["Object","Error","Function","RegExp"],aa);if("object"===g(na)&&
null!==na){if(na.message===aa)throw new E("error/message",'The error message "'.concat(na.message,'" is identical to the message.'));}else if(na===aa)throw new E("error/message",'The error "'.concat(na,'" is identical to the message.'));xa=aa;aa=void 0}else if(null!=aa&&"object"!==g(aa)&&"function"!=typeof aa)throw new F("error",["Object","Error","Function","RegExp"],aa);if(na===Z){var jb="";aa&&aa.name&&(jb+=" (".concat(aa.name,")"));jb+=xa?": ".concat(xa):".";m({actual:void 0,expected:aa,operator:U.name,
message:"Missing expected ".concat("rejects"===U.name?"rejection":"exception").concat(jb),stackStartFn:U})}if(aa&&!n(na,aa,xa,U))throw na;}function f(U,na,aa,xa){if(na!==Z){if("string"==typeof aa&&(xa=aa,aa=void 0),!aa||n(na,aa))xa=xa?": ".concat(xa):".",m({actual:na,expected:aa,operator:U.name,message:"Got unwanted ".concat("doesNotReject"===U.name?"rejection":"exception").concat(xa,"\n")+'Actual message: "'.concat(na&&na.message,'"'),stackStartFn:U});throw na;}}function l(){for(var U=arguments.length,
na=Array(U),aa=0;aa<U;aa++)na[aa]=arguments[aa];c.apply(void 0,[l,na.length].concat(na))}if(T6)return nU;T6=!0;var r=bj,v,y,A=z6().codes,E=A.ERR_AMBIGUOUS_ARGUMENT,F=A.ERR_INVALID_ARG_TYPE,H=A.ERR_INVALID_ARG_VALUE,J=A.ERR_INVALID_RETURN_VALUE,O=A.ERR_MISSING_ARGS,L=lka(),Y=Oh.inspect;A=Oh.types;var S=A.isPromise,ea=A.isRegExp;A=Object.assign?Object.assign:wka.assign;var qa=Object.is?Object.is:U6,Fa=!1,K=nU=h,Z={};K.fail=function pa(na,aa,xa,jb,ob){var ka=arguments.length;if(0===ka)var wa="Failed";
else 1===ka?(xa=na,na=void 0):(!1===Fa&&(Fa=!0,(r.emitWarning?r.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ka&&(jb="!="));if(xa instanceof Error)throw xa;ka={actual:na,expected:aa,operator:void 0===jb?"fail":jb,stackStartFn:ob||pa};void 0!==xa&&(ka.message=xa);ka=new L(ka);throw wa&&(ka.message=wa,ka.generatedMessage=!0),ka;};K.AssertionError=
L;K.ok=h;K.equal=function ob(aa,xa,jb){if(2>arguments.length)throw new O("actual","expected");aa!=xa&&m({actual:aa,expected:xa,message:jb,operator:"==",stackStartFn:ob})};K.notEqual=function pa(xa,jb,ob){if(2>arguments.length)throw new O("actual","expected");xa==jb&&m({actual:xa,expected:jb,message:ob,operator:"!=",stackStartFn:pa})};K.deepEqual=function ka(jb,ob,pa){if(2>arguments.length)throw new O("actual","expected");void 0===v&&e();v(jb,ob)||m({actual:jb,expected:ob,message:pa,operator:"deepEqual",
stackStartFn:ka})};K.notDeepEqual=function wa(ob,pa,ka){if(2>arguments.length)throw new O("actual","expected");void 0===v&&e();v(ob,pa)&&m({actual:ob,expected:pa,message:ka,operator:"notDeepEqual",stackStartFn:wa})};K.deepStrictEqual=function Ka(pa,ka,wa){if(2>arguments.length)throw new O("actual","expected");void 0===v&&e();y(pa,ka)||m({actual:pa,expected:ka,message:wa,operator:"deepStrictEqual",stackStartFn:Ka})};K.notDeepStrictEqual=function Fb(ka,wa,Ka){if(2>arguments.length)throw new O("actual",
"expected");void 0===v&&e();y(ka,wa)&&m({actual:ka,expected:wa,message:Ka,operator:"notDeepStrictEqual",stackStartFn:Fb})};K.strictEqual=function hc(wa,Ka,Fb){if(2>arguments.length)throw new O("actual","expected");qa(wa,Ka)||m({actual:wa,expected:Ka,message:Fb,operator:"strictEqual",stackStartFn:hc})};K.notStrictEqual=function Ub(Ka,Fb,hc){if(2>arguments.length)throw new O("actual","expected");qa(Ka,Fb)&&m({actual:Ka,expected:Fb,message:hc,operator:"notStrictEqual",stackStartFn:Ub})};var R=function ac(Fb,
hc,Ub){var Ic=this;if(!(this instanceof ac))throw new TypeError("Cannot call a class as a function");!0;hc.forEach(function(Mb){Mb in Fb&&(void 0!==Ub&&"string"==typeof Ub[Mb]&&ea(Fb[Mb])&&Fb[Mb].test(Ub[Mb])?Ic[Mb]=Ub[Mb]:Ic[Mb]=Fb[Mb])})};return K.throws=function Ub(hc){for(var ac=arguments.length,Ic=Array(1<ac?ac-1:0),Mb=1;Mb<ac;Mb++)Ic[Mb-1]=arguments[Mb];a.apply(void 0,[Ub,b(hc)].concat(Ic))},K.rejects=function ac(Ub){for(var Ic=arguments.length,Mb=Array(1<Ic?Ic-1:0),ed=1;ed<Ic;ed++)Mb[ed-1]=
arguments[ed];return k(Ub).then(function(Bd){return a.apply(void 0,[ac,Bd].concat(Mb))})},K.doesNotThrow=function Ic(ac){for(var Mb=arguments.length,ed=Array(1<Mb?Mb-1:0),Bd=1;Bd<Mb;Bd++)ed[Bd-1]=arguments[Bd];f.apply(void 0,[Ic,b(ac)].concat(ed))},K.doesNotReject=function Mb(Ic){for(var ed=arguments.length,Bd=Array(1<ed?ed-1:0),ja=1;ja<ed;ja++)Bd[ja-1]=arguments[ja];return k(Ic).then(function(Ba){return f.apply(void 0,[Mb,Ba].concat(Bd))})},K.ifError=function ed(Mb){if(null!=Mb){var Bd="ifError got unwanted exception: ";
"object"===g(Mb)&&"string"==typeof Mb.message?0===Mb.message.length&&Mb.constructor?Bd+=Mb.constructor.name:Bd+=Mb.message:Bd+=Y(Mb);Bd=new L({actual:Mb,expected:null,operator:"ifError",message:Bd,stackStartFn:ed});Mb=Mb.stack;if("string"==typeof Mb){Mb=Mb.split("\n");Mb.shift();for(var ja=Bd.stack.split("\n"),Ba=0;Ba<Mb.length;Ba++){var Ea=ja.indexOf(Mb[Ba]);if(-1!==Ea){ja=ja.slice(0,Ea);break}}Bd.stack="".concat(ja.join("\n"),"\n").concat(Mb.join("\n"))}throw Bd;}},K.strict=A(l,K,{equal:K.strictEqual,
deepEqual:K.deepStrictEqual,notEqual:K.notStrictEqual,notDeepEqual:K.notDeepStrictEqual}),K.strict.strict=K.strict,nU}function Pk(g,e,m){if(!((this||ti)instanceof Pk))return new Pk(g,e,m);var c=this||ti;wM.call(this||ti);this.setMaxListeners(Infinity);"function"===typeof e&&(m=e,e={});e=e||{};if(!g||"object"!==typeof g){g=new xka("First argument must be an abstract-leveldown compliant store");if("function"===typeof m)return xM.nextTick(m,g);throw g;}yka.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");
(this||ti).options=pE(e);(this||ti)._db=g;(this||ti).db=new V6(g);this.open(m||function(h){h&&c.emit("error",h)});(this||ti).supports=zka((this||ti).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||ti).supports.additionalMethods).forEach(function(h){null==(this||ti)[h]&&((this||ti)[h]=function(){return(this||ti).db[h].apply((this||ti).db,arguments)})},this||ti)}function mH(g,e){if(!g._isOpening()&&!g.isOpen())return xM.nextTick(e,new W6("Database is not open")),
!0}function yv(g,e){return Object.hasOwnProperty.call(g,e)&&e}function Aka(g){return g}function yM(g){return g}function oU(g){return void 0===g||null===g||pU.isBuffer(g)}function rp(g){if(!((this||ox)instanceof rp))return new rp(g);(this||ox).opts=g||{};(this||ox).encodings=qU}function Bka(g){return g.toString((this||Dg).encoding)}function Cka(g){(this||Dg).charReceived=g.length%2;(this||Dg).charLength=(this||Dg).charReceived?2:0}function Dka(g){(this||Dg).charReceived=g.length%3;(this||Dg).charLength=
(this||Dg).charReceived?3:0}function X6(){function g(F,H,J){(this||ui).chunk=F;(this||ui).encoding=H;(this||ui).callback=J}function e(F,H){var J=qE();F=F||{};var O=F.highWaterMark,L=F.objectMode?16:16384;(this||ui).highWaterMark=O||0===O?O:L;(this||ui).objectMode=!!F.objectMode;H instanceof J&&((this||ui).objectMode=(this||ui).objectMode||!!F.writableObjectMode);(this||ui).highWaterMark=~~(this||ui).highWaterMark;(this||ui).needDrain=!1;(this||ui).ending=!1;(this||ui).ended=!1;(this||ui).finished=
!1;(this||ui).decodeStrings=!1!==F.decodeStrings;(this||ui).defaultEncoding=F.defaultEncoding||"utf8";(this||ui).length=0;(this||ui).writing=!1;(this||ui).corked=0;(this||ui).sync=!0;(this||ui).bufferProcessing=!1;(this||ui).onwrite=function(Y){a(H,Y)};(this||ui).writecb=null;(this||ui).writelen=0;(this||ui).buffer=[];(this||ui).pendingcb=0;(this||ui).prefinished=!1;(this||ui).errorEmitted=!1}function m(F){var H=qE();if(!((this||ui)instanceof m||(this||ui)instanceof H))return new m(F);(this||ui)._writableState=
new e(F,this||ui);(this||ui).writable=!0;E.call(this||ui)}function c(F,H,J){var O=Error("write after end");F.emit("error",O);v.nextTick(function(){J(O)})}function h(F,H,J,O){var L=!0;if(!(A.isBuffer(J)||A.isString(J)||A.isNullOrUndefined(J)||H.objectMode)){var Y=new TypeError("Invalid non-string/buffer chunk");F.emit("error",Y);v.nextTick(function(){O(Y)});L=!1}return L}function n(F,H,J,O,L){var Y=O;!H.objectMode&&!1!==H.decodeStrings&&A.isString(J)&&(J=new y(J,Y));A.isBuffer(J)&&(O="buffer");Y=H.objectMode?
1:J.length;H.length+=Y;var S=H.length<H.highWaterMark;S||(H.needDrain=!0);H.writing||H.corked?H.buffer.push(new g(J,O,L)):b(F,H,!1,Y,J,O,L);return S}function b(F,H,J,O,L,Y,S){H.writelen=O;H.writecb=S;H.writing=!0;H.sync=!0;J?F._writev(L,H.onwrite):F._write(L,Y,H.onwrite);H.sync=!1}function d(F,H,J,O,L){J?v.nextTick(function(){H.pendingcb--;L(O)}):(H.pendingcb--,L(O));F._writableState.errorEmitted=!0;F.emit("error",O)}function k(F){F.writing=!1;F.writecb=null;F.length-=F.writelen;F.writelen=0}function a(F,
H){var J=F._writableState,O=J.sync,L=J.writecb;k(J);if(H)d(F,J,O,H,L);else{var Y=J.ending&&0===J.length&&!J.finished&&!J.writing;Y||J.corked||J.bufferProcessing||!J.buffer.length||l(F,J);O?v.nextTick(function(){f(F,J,Y,L)}):f(F,J,Y,L)}}function f(F,H,J,O){!J&&0===H.length&&H.needDrain&&(H.needDrain=!1,F.emit("drain"));H.pendingcb--;O();r(F,H)}function l(F,H){H.bufferProcessing=!0;if(F._writev&&1<H.buffer.length){for(var J=[],O=0;O<H.buffer.length;O++)J.push(H.buffer[O].callback);H.pendingcb++;b(F,
H,!0,H.length,H.buffer,"",function(S){for(var ea=0;ea<J.length;ea++)H.pendingcb--,J[ea](S)});H.buffer=[]}else{for(O=0;O<H.buffer.length;O++){var L=H.buffer[O],Y=L.chunk;b(F,H,!1,H.objectMode?1:Y.length,Y,L.encoding,L.callback);if(H.writing){O++;break}}O<H.buffer.length?H.buffer=H.buffer.slice(O):H.buffer.length=0}H.bufferProcessing=!1}function r(F,H){var J=H.ending&&0===H.length&&!H.finished&&!H.writing;J&&(0===H.pendingcb?(H.prefinished||(H.prefinished=!0,F.emit("prefinish")),H.finished=!0,F.emit("finish")):
H.prefinished||(H.prefinished=!0,F.emit("prefinish")));return J}if(Y6)return rU;Y6=!0;var v=bj;rU=m;var y=ei.Buffer;m.WritableState=e;var A=Cm;A.inherits=il;var E=DB;A.inherits(m,E);m.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};m.prototype.write=function(F,H,J){var O=(this||ui)._writableState,L=!1;A.isFunction(H)&&(J=H,H=null);A.isBuffer(F)?H="buffer":H||(H=O.defaultEncoding);A.isFunction(J)||(J=function(){});O.ended?c(this||ui,O,J):h(this||ui,O,F,J)&&(O.pendingcb++,
L=n(this||ui,O,F,H,J));return L};m.prototype.cork=function(){(this||ui)._writableState.corked++};m.prototype.uncork=function(){var F=(this||ui)._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.finished||F.bufferProcessing||!F.buffer.length||l(this||ui,F))};m.prototype._write=function(F,H,J){J(Error("not implemented"))};m.prototype._writev=null;m.prototype.end=function(F,H,J){var O=(this||ui)._writableState;A.isFunction(F)?(J=F,H=F=null):A.isFunction(H)&&(J=H,H=null);A.isNullOrUndefined(F)||
this.write(F,H);O.corked&&(O.corked=1,this.uncork());if(!O.ending&&!O.finished){F=this||ui;O.ending=!0;r(F,O);if(J)if(O.finished)v.nextTick(J);else F.once("finish",J);O.ended=!0}};return rU}function qE(){function g(d){if(!((this||Et)instanceof g))return new g(d);n.call(this||Et,d);b.call(this||Et,d);d&&!1===d.readable&&((this||Et).readable=!1);d&&!1===d.writable&&((this||Et).writable=!1);(this||Et).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||Et).allowHalfOpen=!1);this.once("end",e)}function e(){(this||
Et).allowHalfOpen||(this||Et)._writableState.ended||m.nextTick((this||Et).end.bind(this||Et))}if(Z6)return sU;Z6=!0;var m=bj;sU=g;var c=Object.keys||function(d){var k=[],a;for(a in d)k.push(a);return k},h=Cm;h.inherits=il;var n=$6(),b=X6();h.inherits(g,n);(function(d,k){for(var a=0,f=d.length;a<f;a++)k(d[a],a)})(c(b.prototype),function(d){g.prototype[d]||(g.prototype[d]=b.prototype[d])});return sU}function $6(){function g(L,Y){var S=qE();L=L||{};var ea=L.highWaterMark,qa=L.objectMode?16:16384;(this||
Tf).highWaterMark=ea||0===ea?ea:qa;(this||Tf).highWaterMark=~~(this||Tf).highWaterMark;(this||Tf).buffer=[];(this||Tf).length=0;(this||Tf).pipes=null;(this||Tf).pipesCount=0;(this||Tf).flowing=null;(this||Tf).ended=!1;(this||Tf).endEmitted=!1;(this||Tf).reading=!1;(this||Tf).sync=!0;(this||Tf).needReadable=!1;(this||Tf).emittedReadable=!1;(this||Tf).readableListening=!1;(this||Tf).objectMode=!!L.objectMode;Y instanceof S&&((this||Tf).objectMode=(this||Tf).objectMode||!!L.readableObjectMode);(this||
Tf).defaultEncoding=L.defaultEncoding||"utf8";(this||Tf).ranOut=!1;(this||Tf).awaitDrain=0;(this||Tf).readingMore=!1;(this||Tf).decoder=null;(this||Tf).encoding=null;L.encoding&&(J||(J=tU.StringDecoder),(this||Tf).decoder=new J(L.encoding),(this||Tf).encoding=L.encoding)}function e(L){qE();if(!((this||Tf)instanceof e))return new e(L);(this||Tf)._readableState=new g(L,this||Tf);(this||Tf).readable=!0;F.call(this||Tf)}function m(L,Y,S,ea,qa){var Fa=S;var K=null;H.isBuffer(Fa)||H.isString(Fa)||H.isNullOrUndefined(Fa)||
Y.objectMode||(K=new TypeError("Invalid non-string/buffer chunk"));(Fa=K)?L.emit("error",Fa):H.isNullOrUndefined(S)?(Y.reading=!1,Y.ended||(Y.decoder&&!Y.ended&&(S=Y.decoder.end())&&S.length&&(Y.buffer.push(S),Y.length+=Y.objectMode?1:S.length),Y.ended=!0,h(L))):Y.objectMode||S&&0<S.length?Y.ended&&!qa?(S=Error("stream.push() after EOF"),L.emit("error",S)):Y.endEmitted&&qa?(S=Error("stream.unshift() after end event"),L.emit("error",S)):(!Y.decoder||qa||ea||(S=Y.decoder.write(S)),qa||(Y.reading=!1),
Y.flowing&&0===Y.length&&!Y.sync?(L.emit("data",S),L.read(0)):(Y.length+=Y.objectMode?1:S.length,qa?Y.buffer.unshift(S):Y.buffer.push(S),Y.needReadable&&h(L)),b(L,Y)):qa||(Y.reading=!1);return!Y.ended&&(Y.needReadable||Y.length<Y.highWaterMark||0===Y.length)}function c(L,Y){if(0===Y.length&&Y.ended)return 0;if(Y.objectMode)return 0===L?0:1;if(isNaN(L)||H.isNull(L))return Y.flowing&&Y.buffer.length?Y.buffer[0].length:Y.length;if(0>=L)return 0;if(L>Y.highWaterMark){var S=L;if(8388608<=S)S=8388608;else{S--;
for(var ea=1;32>ea;ea<<=1)S|=S>>ea;S++}Y.highWaterMark=S}if(L>Y.length){if(Y.ended)return Y.length;Y.needReadable=!0;return 0}return L}function h(L){var Y=L._readableState;Y.needReadable=!1;Y.emittedReadable||(O("emitReadable",Y.flowing),Y.emittedReadable=!0,Y.sync?v.nextTick(function(){n(L)}):n(L))}function n(L){O("emit readable");L.emit("readable");a(L)}function b(L,Y){Y.readingMore||(Y.readingMore=!0,v.nextTick(function(){for(var S=Y.length;!Y.reading&&!Y.flowing&&!Y.ended&&Y.length<Y.highWaterMark&&
(O("maybeReadMore read 0"),L.read(0),S!==Y.length);)S=Y.length;Y.readingMore=!1}))}function d(L){return function(){var Y=L._readableState;O("pipeOnDrain",Y.awaitDrain);Y.awaitDrain&&Y.awaitDrain--;0===Y.awaitDrain&&E.listenerCount(L,"data")&&(Y.flowing=!0,a(L))}}function k(L,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,v.nextTick(function(){Y.resumeScheduled=!1;L.emit("resume");a(L);Y.flowing&&!Y.reading&&L.read(0)}))}function a(L){var Y=L._readableState;O("flow",Y.flowing);if(Y.flowing){do var S=
L.read();while(null!==S&&Y.flowing)}}function f(L,Y){var S=Y.buffer,ea=Y.length,qa=!!Y.decoder;Y=!!Y.objectMode;if(0===S.length)return null;if(0===ea)ea=null;else if(Y)ea=S.shift();else if(!L||L>=ea)ea=qa?S.join(""):A.concat(S,ea),S.length=0;else if(L<S[0].length)Y=S[0],ea=Y.slice(0,L),S[0]=Y.slice(L);else if(L===S[0].length)ea=S.shift();else{ea=qa?"":new A(L);for(var Fa=0,K=0,Z=S.length;K<Z&&Fa<L;K++){Y=S[0];var R=Math.min(L-Fa,Y.length);qa?ea+=Y.slice(0,R):Y.copy(ea,Fa,0,R);R<Y.length?S[0]=Y.slice(R):
S.shift();Fa+=R}}return ea}function l(L){var Y=L._readableState;if(0<Y.length)throw Error("endReadable called on non-empty stream");Y.endEmitted||(Y.ended=!0,v.nextTick(function(){Y.endEmitted||0!==Y.length||(Y.endEmitted=!0,L.readable=!1,L.emit("end"))}))}function r(L,Y){for(var S=0,ea=L.length;S<ea;S++)Y(L[S],S)}if(a7)return uU;a7=!0;var v=bj;uU=e;var y=Eka,A=ei.Buffer;e.ReadableState=g;var E=ov.EventEmitter;E.listenerCount||(E.listenerCount=function(L,Y){return L.listeners(Y).length});var F=DB,
H=Cm;H.inherits=il;var J,O=Fka;O=O&&O.debuglog?O.debuglog("stream"):function(){};H.inherits(e,F);e.prototype.push=function(L,Y){var S=(this||Tf)._readableState;H.isString(L)&&!S.objectMode&&(Y=Y||S.defaultEncoding,Y!==S.encoding&&(L=new A(L,Y),Y=""));return m(this||Tf,S,L,Y,!1)};e.prototype.unshift=function(L){return m(this||Tf,(this||Tf)._readableState,L,"",!0)};e.prototype.setEncoding=function(L){J||(J=tU.StringDecoder);(this||Tf)._readableState.decoder=new J(L);(this||Tf)._readableState.encoding=
L;return this||Tf};e.prototype.read=function(L){O("read",L);var Y=(this||Tf)._readableState,S=L;if(!H.isNumber(L)||0<L)Y.emittedReadable=!1;if(0===L&&Y.needReadable&&(Y.length>=Y.highWaterMark||Y.ended))return O("read: emitReadable",Y.length,Y.ended),0===Y.length&&Y.ended?l(this||Tf):h(this||Tf),null;L=c(L,Y);if(0===L&&Y.ended)return 0===Y.length&&l(this||Tf),null;var ea=Y.needReadable;O("need readable",ea);if(0===Y.length||Y.length-L<Y.highWaterMark)ea=!0,O("length less than watermark",ea);if(Y.ended||
Y.reading)ea=!1,O("reading or ended",ea);ea&&(O("do read"),Y.reading=!0,Y.sync=!0,0===Y.length&&(Y.needReadable=!0),this._read(Y.highWaterMark),Y.sync=!1);ea&&!Y.reading&&(L=c(S,Y));ea=0<L?f(L,Y):null;H.isNull(ea)&&(Y.needReadable=!0,L=0);Y.length-=L;0!==Y.length||Y.ended||(Y.needReadable=!0);S!==L&&Y.ended&&0===Y.length&&l(this||Tf);H.isNull(ea)||this.emit("data",ea);return ea};e.prototype._read=function(L){this.emit("error",Error("not implemented"))};e.prototype.pipe=function(L,Y){function S(jb){O("onunpipe");
jb===na&&qa()}function ea(){O("onend");L.end()}function qa(){O("cleanup");L.removeListener("close",Z);L.removeListener("finish",R);L.removeListener("drain",xa);L.removeListener("error",K);L.removeListener("unpipe",S);na.removeListener("end",ea);na.removeListener("end",qa);na.removeListener("data",Fa);!aa.awaitDrain||L._writableState&&!L._writableState.needDrain||xa()}function Fa(jb){O("ondata");!1===L.write(jb)&&(O("false write response, pause",na._readableState.awaitDrain),na._readableState.awaitDrain++,
na.pause())}function K(jb){O("onerror",jb);U();L.removeListener("error",K);0===E.listenerCount(L,"error")&&L.emit("error",jb)}function Z(){L.removeListener("finish",R);U()}function R(){O("onfinish");L.removeListener("close",Z);U()}function U(){O("unpipe");na.unpipe(L)}var na=this||Tf,aa=(this||Tf)._readableState;switch(aa.pipesCount){case 0:aa.pipes=L;break;case 1:aa.pipes=[aa.pipes,L];break;default:aa.pipes.push(L)}aa.pipesCount+=1;O("pipe count=%d opts=%j",aa.pipesCount,Y);Y=Y&&!1===Y.end||L===
v.stdout||L===v.stderr?qa:ea;if(aa.endEmitted)v.nextTick(Y);else na.once("end",Y);L.on("unpipe",S);var xa=d(na);L.on("drain",xa);na.on("data",Fa);if(L._events&&L._events.error)y(L._events.error)?L._events.error.unshift(K):L._events.error=[K,L._events.error];else L.on("error",K);L.once("close",Z);L.once("finish",R);L.emit("pipe",na);aa.flowing||(O("pipe resume"),na.resume());return L};e.prototype.unpipe=function(L){var Y=(this||Tf)._readableState;if(0===Y.pipesCount)return this||Tf;if(1===Y.pipesCount){if(L&&
L!==Y.pipes)return this||Tf;L||(L=Y.pipes);Y.pipes=null;Y.pipesCount=0;Y.flowing=!1;L&&L.emit("unpipe",this||Tf);return this||Tf}if(!L){L=Y.pipes;var S=Y.pipesCount;Y.pipes=null;Y.pipesCount=0;Y.flowing=!1;for(var ea=0;ea<S;ea++)L[ea].emit("unpipe",this||Tf);return this||Tf}a:{ea=Y.pipes;S=0;for(var qa=ea.length;S<qa;S++)if(ea[S]===L){ea=S;break a}ea=-1}if(-1===ea)return this||Tf;Y.pipes.splice(ea,1);--Y.pipesCount;1===Y.pipesCount&&(Y.pipes=Y.pipes[0]);L.emit("unpipe",this||Tf);return this||Tf};
e.prototype.on=function(L,Y){Y=F.prototype.on.call(this||Tf,L,Y);"data"===L&&!1!==(this||Tf)._readableState.flowing&&this.resume();if("readable"===L&&(this||Tf).readable&&(L=(this||Tf)._readableState,!L.readableListening))if(L.readableListening=!0,L.emittedReadable=!1,L.needReadable=!0,L.reading)L.length&&h(this||Tf);else{var S=this||Tf;v.nextTick(function(){O("readable nexttick read 0");S.read(0)})}return Y};e.prototype.addListener=e.prototype.on;e.prototype.resume=function(){var L=(this||Tf)._readableState;
L.flowing||(O("resume"),L.flowing=!0,L.reading||(O("resume read 0"),this.read(0)),k(this||Tf,L));return this||Tf};e.prototype.pause=function(){O("call pause flowing=%j",(this||Tf)._readableState.flowing);!1!==(this||Tf)._readableState.flowing&&(O("pause"),(this||Tf)._readableState.flowing=!1,this.emit("pause"));return this||Tf};e.prototype.wrap=function(L){var Y=(this||Tf)._readableState,S=!1,ea=this||Tf;L.on("end",function(){O("wrapped end");if(Y.decoder&&!Y.ended){var Fa=Y.decoder.end();Fa&&Fa.length&&
ea.push(Fa)}ea.push(null)});L.on("data",function(Fa){O("wrapped data");Y.decoder&&(Fa=Y.decoder.write(Fa));Fa&&(Y.objectMode||Fa.length)&&!ea.push(Fa)&&(S=!0,L.pause())});for(var qa in L)H.isFunction(L[qa])&&H.isUndefined((this||Tf)[qa])&&((this||Tf)[qa]=function(Fa){return function(){return L[Fa].apply(L,arguments)}}(qa));r(["error","close","destroy","pause","resume"],function(Fa){L.on(Fa,ea.emit.bind(ea,Fa))});ea._read=function(Fa){O("wrapped _read",Fa);S&&(S=!1,L.resume())};return ea};e._fromList=
f;return uU}function b7(){function g(n,b){(this||Kn).afterTransform=function(d,k){var a=b._transformState;a.transforming=!1;var f=a.writecb;f?(a.writechunk=null,a.writecb=null,h.isNullOrUndefined(k)||b.push(k),f&&f(d),d=b._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&b._read(d.highWaterMark),d=void 0):d=b.emit("error",Error("no writecb in Transform class"));return d};(this||Kn).needTransform=!1;(this||Kn).transforming=!1;(this||Kn).writecb=null;(this||Kn).writechunk=null}
function e(n){if(!((this||Kn)instanceof e))return new e(n);c.call(this||Kn,n);(this||Kn)._transformState=new g(n,this||Kn);var b=this||Kn;(this||Kn)._readableState.needReadable=!0;(this||Kn)._readableState.sync=!1;this.once("prefinish",function(){h.isFunction((this||Kn)._flush)?this._flush(function(d){m(b,d)}):m(b)})}function m(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(b.transforming)throw Error("calling transform done when still transforming");
return n.push(null)}if(c7)return vU;c7=!0;vU=e;var c=qE(),h=Cm;h.inherits=il;h.inherits(e,c);e.prototype.push=function(n,b){(this||Kn)._transformState.needTransform=!1;return c.prototype.push.call(this||Kn,n,b)};e.prototype._transform=function(n,b,d){throw Error("not implemented");};e.prototype._write=function(n,b,d){var k=(this||Kn)._transformState;k.writecb=d;k.writechunk=n;k.writeencoding=b;k.transforming||(n=(this||Kn)._readableState,(k.needTransform||n.needReadable||n.length<n.highWaterMark)&&
this._read(n.highWaterMark))};e.prototype._read=function(n){n=(this||Kn)._transformState;h.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return vU}function Gka(){function g(c){if(!((this||d7)instanceof g))return new g(c);e.call(this||d7,c)}if(e7)return wU;e7=!0;wU=g;var e=b7(),m=Cm;m.inherits=il;m.inherits(g,e);g.prototype._transform=function(c,h,n){n(null,c)};return wU}function nH(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function Hka(g){var e={},m;for(m in g)e[m]=g[m];return e}function Ika(g,e,m){g.open(function(){});return{apply:function(c,h,n){h=h||{};for(var b=[],d=-1,k=c.length;++d<k;){var a=c[d],f=a,l=a.prefix;l&&l.options&&(f.keyEncoding=f.keyEncoding||l.options.keyEncoding,f.valueEncoding=f.valueEncoding||l.options.valueEncoding);f=a;l=a.prefix;l="function"===typeof l.prefix?l.prefix():l;f.prefix=l;b.push({key:e.encode([a.prefix,m.encodeKey(a.key,h,a)]),value:"del"!==
a.type&&m.encodeValue(a.value,h,a),type:a.type})}g.db.batch(b,h,n)},get:function(c,h,n,b){n.asBuffer=m.valueAsBuffer(n);return g.db.get(e.encode([h,m.encodeKey(c,n,void 0)]),n,function(d,k){d?b(d):b(null,m.decodeValue(k,n))})},createDecoder:function(c){return function(h,n){return{key:m.decodeKey(e.decode(h)[1],c),value:m.decodeValue(n,c)}}},isClosed:function(){return g.isClosed()},close:function(c){return g.close(c)},iterator:function(c){var h=Hka(c||{}),n=c.prefix||[];Jka.toLtgt(c,h,function(b){return e.encode([n,
m.encodeKey(b,h,{})])},e.lowerBound,e.upperBound);h.prefix=null;h.keyAsBuffer=h.valueAsBuffer=!1;"number"!==typeof h.limit&&(h.limit=-1);h.keyAsBuffer=e.buffer;h.valueAsBuffer=m.valueAsBuffer(h);return function(b){return{next:function(d){return b.next(d)},end:function(d){b.end(d)}}}(g.db.iterator(h))}}}function xU(){Error.call(this)}function pz(g,e){if(!(this instanceof pz))return new pz(g,e);f7.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=
e}function rE(g){g7.call(this||px,g);(this||px)._destroyed=!1}function Kka(g,e,m){m(null,g)}function yU(g){return function(e,m,c){"function"==typeof e&&(c=m,m=e,e={});"function"!=typeof m&&(m=Kka);"function"!=typeof c&&(c=null);return g(e,m,c)}}function Zj(g){this._capacity=h7(g);this._front=this._length=0;if(i7(g)){for(var e=g.length,m=0;m<e;++m)this[m]=g[m];this._length=e}}function h7(g){if("number"!==typeof g)if(i7(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;
g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function zU(g){g=g.rev_tree.slice();for(var e;e=g.pop();){var m=e.ids,c=m[2];e=e.pos;if(c.length){m=0;for(var h=c.length;m<h;m++)g.push({pos:e+1,ids:c[m]})}else if(c=!!m[1].deleted,m=m[0],!n||(d!==c?d:b!==e?b<e:n<m)){var n=m;var b=e;var d=c}}return b+"-"+n}function zM(g,e){g=g.slice();for(var m;m=g.pop();){var c=m.pos,h=m.ids,n=h[2];m=e(0===n.length,c,h[0],m.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)g.push({pos:c+1,ids:n[h],ctx:m})}}function Lka(g,
e){return g.pos-e.pos}function j7(g){var e=[];zM(g,function(c,h,n,b,d){c&&e.push({rev:h+"-"+n,pos:h,opts:d})});e.sort(Lka).reverse();g=0;for(var m=e.length;g<m;g++)delete e[g].pos;return e}function k7(g){var e=[];g=g.slice();for(var m;m=g.pop();){var c=m.pos,h=m.ids,n=h[0],b=h[1];h=h[2];var d=0===h.length;m=m.history?m.history.slice():[];m.push({id:n,opts:b});d&&e.push({pos:c+1-m.length,ids:m});n=0;for(b=h.length;n<b;n++)g.push({pos:c+1,ids:h[n],history:m})}return e.reverse()}function Mka(g,e){return g.pos-
e.pos}function l7(g,e){for(var m,c,h=g.length;e<h;e++){var n=g[e];n=[n.id,n.opts,[]];c?(c[2].push(n),c=n):m=c=n}return m}function Nka(g,e){return g[0]<e[0]?-1:1}function m7(g,e){e=[{tree1:g,tree2:e}];for(var m=!1;0<e.length;){var c=e.pop(),h=c.tree1;c=c.tree2;if(h[1].status||c[1].status)h[1].status="available"===h[1].status||"available"===c[1].status?"available":"missing";for(var n=0;n<c[2].length;n++)if(h[2][0]){for(var b=!1,d=0;d<h[2].length;d++)h[2][d][0]===c[2][n][0]&&(e.push({tree1:h[2][d],tree2:c[2][n]}),
b=!0);if(!b){m="new_branch";b=h[2];d=c[2][n];for(var k,a=b,f=d,l=Nka,r=0,v=a.length;r<v;)k=r+v>>>1,0>l(a[k],f)?r=k+1:v=k;b.splice(r,0,d)}}else m="new_leaf",h[2][0]=c[2][n]}return{conflicts:m,tree:g}}function n7(g,e,m){var c=[],h=!1,n=!1;if(!g.length)return{tree:[e],conflicts:"new_leaf"};for(var b=0,d=g.length;b<d;b++){var k=g[b];if(k.pos===e.pos&&k.ids[0]===e.ids[0])n=m7(k.ids,e.ids),c.push({pos:k.pos,ids:n.tree}),h=h||n.conflicts,n=!0;else if(!0!==m){var a=k.pos<e.pos?k:e,f=k.pos<e.pos?e:k,l=[],
r=[];for(r.push({ids:a.ids,diff:f.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===f.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=m7(l.ids,f.ids),l.parent[2][l.parentIdx]=n.tree,c.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):c.push(k)}else c.push(k)}n||c.push(e);c.sort(Mka);return{tree:c,conflicts:h||"internal_node"}}function Oka(g,e){g=k7(g);for(var m,c,h=0,n=
g.length;h<n;h++){var b=g[h],d=b.ids;if(d.length>e){m||(m={});var k=d.length-e;var a={pos:b.pos+k,ids:l7(d,k)};for(var f=0;f<k;f++)m[b.pos+f+"-"+d[f].id]=!0}else a={pos:b.pos,ids:l7(d,0)};c=c?n7(c,a,!0).tree:[a]}m&&zM(c,function(l,r,v){delete m[r+"-"+v]});return{tree:c,revs:m?Object.keys(m):[]}}function Pka(g){return g.ids}function o7(g){return g.reduce(function(e,m){e[m]=!0;return e},{})}function p7(g){if(!/^\d+-/.test(g))return dr.createError(dr.INVALID_REV);var e=g.indexOf("-"),m=g.substring(0,
e);g=g.substring(e+1);return{prefix:parseInt(m,10),id:g}}function q7(g,e,m){m||(m={deterministic_revs:!0});var c={status:"available"};g._deleted&&(c.deleted=!0);if(e){g._id||(g._id=EB.uuid());var h=EB.rev(g,m.deterministic_revs);if(g._rev){e=p7(g._rev);if(e.error)return e;g._rev_tree=[{pos:e.prefix,ids:[e.id,{status:"missing"},[[h,c,[]]]]}];var n=e.prefix+1}else g._rev_tree=[{pos:1,ids:[h,c,[]]}],n=1}else{if(g._revisions){h=g._revisions;n=h.start-h.ids.length+1;h=h.ids;e=[h[0],c,[]];m=1;for(var b=
h.length;m<b;m++)e=[h[m],{status:"missing"},[e]];g._rev_tree=[{pos:n,ids:e}];n=g._revisions.start;h=g._revisions.ids[0]}if(!g._rev_tree){e=p7(g._rev);if(e.error)return e;n=e.prefix;h=e.id;g._rev_tree=[{pos:n,ids:[h,c,[]]}]}}EB.invalidIdError(g._id);g._rev=n+"-"+h;c={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!Qka[d])throw g=dr.createError(dr.DOC_VALIDATION,d),g.message=dr.DOC_VALIDATION.message+": "+d,g;n&&!Rka[d]?c.metadata[d.slice(1)]=g[d]:
c.data[d]=g[d]}return c}function Ska(g,e,m){try{var c=oH.atob(g.data)}catch(h){c={error:dr.createError(dr.BAD_ARG,"Attachment is not a valid base64 string")}}if(c.error)return m(c.error);g.length=c.length;g.data="blob"===e?oH.binaryStringToBlobOrBuffer(c,g.content_type):"base64"===e?oH.btoa(c):c;r7.binaryMd5(c,function(h){g.digest="md5-"+h;m()})}function Tka(g,e,m){r7.binaryMd5(g.data,function(c){g.digest="md5-"+c;g.length=g.data.size||g.data.length||0;"binary"===e?oH.blobOrBufferToBinaryString(g.data,
function(h){g.data=h;m()}):"base64"===e?oH.blobOrBufferToBase64(g.data,function(h){g.data=h;m()}):m()})}function Uka(g,e,m){if(g.stub)return m();"string"===typeof g.data?Ska(g,e,m):Tka(g,e,m)}function s7(g,e,m,c,h,n,b,d){if(gq.revExists(e.rev_tree,m.metadata.rev)&&!d)return c[h]=m,n();var k=e.winningRev||gq.winningRev(e),a="deleted"in e?e.deleted:gq.isDeleted(e,k),f="deleted"in m.metadata?m.metadata.deleted:gq.isDeleted(m.metadata),l=/^1-/.test(m.metadata.rev);a&&!f&&d&&l&&(l=m.data,l._rev=k,l._id=
m.metadata.id,m=q7(l,d));g=gq.merge(e.rev_tree,m.metadata.rev_tree[0],g);if(d&&(a&&f&&"new_leaf"!==g.conflicts||!a&&"new_leaf"!==g.conflicts||a&&!f&&"new_branch"===g.conflicts))return m=dr.createError(dr.REV_CONFLICT),c[h]=m,n();c=m.metadata.rev;m.metadata.rev_tree=g.tree;m.stemmedRevs=g.stemmedRevs||[];e.rev_map&&(m.metadata.rev_map=e.rev_map);e=gq.winningRev(m.metadata);d=gq.isDeleted(m.metadata,e);a=a===d?0:a<d?-1:1;c=c===e?d:gq.isDeleted(m.metadata,c);b(m,e,d,c,!0,a,h,n)}function pH(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function t7(g,e){g=new Uint8Array(g);return qH.blob([g],{type:e})}function Vka(g,e){qH.readAsBinaryString(g,e)}function u7(g,e){e=e.prefix()[0];g=g._cache;var m=g.get(e);m||(m=new Ft.Map,g.set(e,m));return m}function FB(){this._batch=[];this._cache=new Ft.Map}function AU(g){return"winningRev"in g?g.winningRev:rH.winningRev(g)}function Wka(g,e,m){var c=g.content_type;return new Promise(function(h,n){e.binaryStore.get(g.digest,function(b,d){if(b){if("NotFoundError"!==
b.name)return n(b);b=m.binary?qH.binaryStringToBlobOrBuffer("",c):""}else b=m.binary?t7(d,c):d.toString("base64");delete g.stub;delete g.length;g.data=b;h()})})}function BU(g,e,m){var c=[];g.forEach(function(h){h.doc&&h.doc._attachments&&Object.keys(h.doc._attachments).forEach(function(n){n=h.doc._attachments[n];"data"in n||c.push(n)})});return Promise.all(c.map(function(h){return Wka(h,e,m)}))}function CU(g){(this||GB).db=g;(this||GB)._ended=!1;(this||GB)._nexting=!1}function qz(g){(this||ql)._db=
g;(this||ql)._operations=[];(this||ql)._written=!1}function sp(g){if(!arguments.length||void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||hm).location=g;(this||hm).status="new"}function er(g,e,m,c,h,n){this._color=g;this.key=e;this.value=m;this.left=c;this.right=h;this._count=n}function zv(g){return new er(g._color,g.key,g.value,g.left,g.right,g._count)}function rz(g,e){return new er(g,
e.key,e.value,e.left,e.right,e._count)}function rl(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function sE(g,e){this._compare=g;this.root=e}function DU(g,e){if(e.left){var m=DU(g,e.left);if(m)return m}if(m=g(e.key,e.value))return m;if(e.right)return DU(g,e.right)}function EU(g,e,m,c){if(0>=e(g,c.key)){if(c.left){var h=EU(g,e,m,c.left);if(h)return h}if(h=m(c.key,c.value))return h}if(c.right)return EU(g,e,m,c.right)}function FU(g,e,m,c,h){var n=m(g,h.key),b=m(e,h.key);if(0>=n&&
(h.left&&(n=FU(g,e,m,c,h.left))||0<b&&(n=c(h.key,h.value))))return n;if(0<b&&h.right)return FU(g,e,m,c,h.right)}function fr(g,e){this.tree=g;this._stack=e}function v7(g,e){g.key=e.key;g.value=e.value;g.left=e.left;g.right=e.right;g._color=e._color;g._count=e._count}function Xka(g,e){return g<e?-1:g>e?1:0}function w7(g,e){for(var m in g)e[m]=g[m]}function tE(g,e,m){return qx(g,e,m)}function Yka(g){return 0<gr.compare(g,(this||Kf)._end)}function Zka(g){return 0<=gr.compare(g,(this||Kf)._end)}function $ka(g){return 0>
gr.compare(g,(this||Kf)._end)}function ala(g){return 0>=gr.compare(g,(this||Kf)._end)}function AM(g,e){x7.call(this||Kf,g);(this||Kf)._limit=e.limit;-1===(this||Kf)._limit&&((this||Kf)._limit=Infinity);g=g._store[g._location];(this||Kf).keyAsBuffer=!1!==e.keyAsBuffer;(this||Kf).valueAsBuffer=!1!==e.valueAsBuffer;(this||Kf)._reverse=e.reverse;(this||Kf)._options=e;(this||Kf)._done=0;(this||Kf)._reverse?((this||Kf)._incr="prev",(this||Kf)._start=gr.upperBound(e),(this||Kf)._end=gr.lowerBound(e),"undefined"===
typeof(this||Kf)._start?(this||Kf)._tree=g.end:gr.upperBoundInclusive(e)?(this||Kf)._tree=g.le((this||Kf)._start):(this||Kf)._tree=g.lt((this||Kf)._start),(this||Kf)._end&&(gr.lowerBoundInclusive(e)?(this||Kf)._test=Zka:(this||Kf)._test=Yka)):((this||Kf)._incr="next",(this||Kf)._start=gr.lowerBound(e),(this||Kf)._end=gr.upperBound(e),"undefined"===typeof(this||Kf)._start?(this||Kf)._tree=g.begin:gr.lowerBoundInclusive(e)?(this||Kf)._tree=g.ge((this||Kf)._start):(this||Kf)._tree=g.gt((this||Kf)._start),
(this||Kf)._end&&(gr.upperBoundInclusive(e)?(this||Kf)._test=ala:(this||Kf)._test=$ka))}function hq(g){if(!((this||Kf)instanceof hq))return new hq(g);y7.call(this||Kf,"string"===typeof g?g:"");(this||Kf)._location=(this||Kf).location?"$"+(this||Kf).location:"_tree";(this||Kf)._store=(this||Kf).location?uE:this||Kf;(this||Kf)._store[(this||Kf)._location]=(this||Kf)._store[(this||Kf)._location]||bla(gr.compare)}function z7(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function GU(g,
e){g=cla.assign({db:dla},g);ela.call(this,g,e)}function HU(g){g&&(g.__serialize__=function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function sH(g){var e,m,c,h,n,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(!g||eh.obj.isEmpty(g))return k.return(!1);if(g&&g._rev)return k.return(g);e=g;m=e.type;c=e.name;h=e._id;k.setFinallyBlock(2);n=Object;b=n.assign;d=g;return k.yield(eh.MorphicDB.default.fetchCommit(m,
c,h),4)}2!=k.nextAddress&&b.call(n,d,k.yieldResult);k.enterFinallyBlock();return k.return(g)})}function BM(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return g.label="loading System Elements",g.progress=0,g.status="core elements...",e.yield(ne.resource("styleguide://System/buttons/light").read(),2);case 2:return g.progress=.2,g.status="top bar...",e.yield(ne.resource("styleguide://SystemIDE/lively top bar master").read(),3);case 3:return g.progress=
.4,g.status="scene graph...",e.yield(ne.resource("styleguide://SystemIDE/styling side bar master").read(),4);case 4:return g.progress=.6,g.status="styling palette...",e.yield(ne.resource("styleguide://SystemIDE/scene graph side bar master").read(),5);case 5:return g.progress=.8,g.status="world loader...",e.yield(ne.resource("styleguide://partial freezing/project browser").read(),6);case 6:return g.progress=1,e.yield(ne.promise.delay(500),0)}})}function IU(g){delete ne.fetchedSnapshots[g]}function fla(g,
e){var m={};e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(c,h,n){h&&(m[h]=n)});return m}function gla(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var e=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return e*hla;case "days":case "day":case "d":return e*tH;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*
e;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*e;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*e;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return e}}}function CM(g,e,m){if(!(g<e))return g<1.5*e?Math.floor(g/e)+" "+m:Math.ceil(g/e)+" "+m+"s"}function ila(g){var e=0,m;for(m in g)e=(e<<5)-e+g.charCodeAt(m),e|=0;return Ui.colors[Math.abs(e)%Ui.colors.length]}function JU(g){function e(){if(e.enabled){var c=+new Date;e.diff=
c-(m||c);e.prev=m;m=e.curr=c;var h=Array(arguments.length);for(c=0;c<h.length;c++)h[c]=arguments[c];h[0]=Ui.coerce(h[0]);"string"!==typeof h[0]&&h.unshift("%O");var n=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(b,d){if("%%"===b)return b;n++;d=Ui.formatters[d];"function"===typeof d&&(b=d.call(e,h[n]),h.splice(n,1),n--);return b});Ui.formatArgs.call(e,h);(e.log||Ui.log||console.log.bind(console)).apply(e,h)}}var m;e.namespace=g;e.enabled=Ui.enabled(g);e.useColors=Ui.useColors();e.color=ila(g);e.destroy=
jla;"function"===typeof Ui.init&&Ui.init(e);Ui.instances.push(e);return e}function jla(){var g=Ui.instances.indexOf(this||kla);return-1!==g?(Ui.instances.splice(g,1),!0):!1}function A7(){try{var g=Mo.storage.debug}catch(e){}!g&&"undefined"!==typeof KU&&"env"in KU&&(g=KU.env.DEBUG);return g}function hr(g){if(g){for(var e in hr.prototype)g[e]=hr.prototype[e];return g}}function LU(g,e){if(!g)return g;if(B7(g)){var m={_placeholder:!0,num:e.length};e.push(g);return m}if(MU(g)){m=Array(g.length);for(var c=
0;c<g.length;c++)m[c]=LU(g[c],e);return m}if("object"===typeof g&&!(g instanceof Date)){m={};for(c in g)m[c]=LU(g[c],e);return m}return g}function NU(g,e){if(!g)return g;if(g&&g._placeholder)return e[g.num];if(MU(g))for(var m=0;m<g.length;m++)g[m]=NU(g[m],e);else if("object"===typeof g)for(m in g)g[m]=NU(g[m],e);return g}function C7(){}function D7(g){var e=""+g.type;if(Qk.BINARY_EVENT===g.type||Qk.BINARY_ACK===g.type)e+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(e+=g.nsp+",");null!=g.id&&(e+=g.id);if(null!=
g.data){try{var m=JSON.stringify(g.data)}catch(c){m=!1}if(!1!==m)e+=m;else return lla}OU("encoded %j as %s",g,e);return e}function mla(g,e){PU.removeBlobs(g,function(m){var c=PU.deconstructPacket(m);m=D7(c.packet);c=c.buffers;c.unshift(m);e(c)})}function DM(){(this||lo).reconstructor=null}function QU(g){(this||lo).reconPack=g;(this||lo).buffers=[]}function EM(g){if(!g||"object"!==typeof g)return!1;if(nla(g)){for(var e=0,m=g.length;e<m;e++)if(EM(g[e]))return!0;return!1}if("function"===typeof RU&&RU.isBuffer&&
RU.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof ArrayBuffer||ola&&g instanceof Blob||pla&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return EM(g.toJSON(),!0);for(e in g)if(Object.prototype.hasOwnProperty.call(g,e)&&EM(g[e]))return!0;return!1}function qla(){}function E7(g){return g.map(function(e){if(e.buffer instanceof ArrayBuffer){var m=e.buffer;if(e.byteLength!==m.byteLength){var c=new Uint8Array(e.byteLength);c.set(new Uint8Array(m,
e.byteOffset,e.byteLength));m=c.buffer}return m}return e})}function F7(g,e){e=e||{};var m=new vE;E7(g).forEach(function(c){m.append(c)});return e.type?m.getBlob(e.type):m.getBlob()}function G7(g,e){return new Blob(E7(g),e||{})}function H7(g){for(var e=[],m=0,c=g.length,h,n;m<c;)h=g.charCodeAt(m++),55296<=h&&56319>=h&&m<c?(n=g.charCodeAt(m++),56320==(n&64512)?e.push(((h&1023)<<10)+(n&1023)+65536):(e.push(h),m--)):e.push(h);return e}function I7(g,e){if(55296<=g&&57343>=g){if(e)throw Error("Lone surrogate U+"+
g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function wE(){if(sz>=FM)throw Error("Invalid byte index");var g=GM[sz]&255;sz++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function rla(g){if(sz>FM)throw Error("Invalid byte index");if(sz==FM)return!1;var e=GM[sz]&255;sz++;if(0==(e&128))return e;if(192==(e&224)){var m=wE();e=(e&31)<<6|m;if(128<=e)return e;throw Error("Invalid continuation byte");}if(224==(e&240)){m=wE();var c=wE();e=(e&15)<<12|m<<6|
c;if(2048<=e)return I7(e,g)?e:65533;throw Error("Invalid continuation byte");}if(240==(e&248)&&(m=wE(),c=wE(),g=wE(),e=(e&7)<<18|m<<12|c<<6|g,65536<=e&&1114111>=e))return e;throw Error("Invalid UTF-8 detected");}function sla(g,e,m){if(!e)return Qj.encodeBase64Packet(g,m);var c=new FileReader;c.onload=function(){Qj.encodePacket({type:g.type,data:c.result},e,!0,m)};return c.readAsArrayBuffer(g.data)}function SU(g,e,m){var c=Array(g.length);m=tla(g.length,m);for(var h=function(b,d,k){e(d,function(a,
f){c[b]=f;k(a,c)})},n=0;n<g.length;n++)h(n,g[n],m)}function TU(g){var e="";do e=J7[g%64]+e,g=Math.floor(g/64);while(0<g);return e}function UU(){var g=TU(+new Date);return g!==K7?(L7=0,K7=g):g+"."+TU(L7++)}function Av(g){(this||jj).path=g.path;(this||jj).hostname=g.hostname;(this||jj).port=g.port;(this||jj).secure=g.secure;(this||jj).query=g.query;(this||jj).timestampParam=g.timestampParam;(this||jj).timestampRequests=g.timestampRequests;(this||jj).readyState="";(this||jj).agent=g.agent||!1;(this||
jj).socket=g.socket;(this||jj).enablesXDR=g.enablesXDR;(this||jj).withCredentials=g.withCredentials;(this||jj).pfx=g.pfx;(this||jj).key=g.key;(this||jj).passphrase=g.passphrase;(this||jj).cert=g.cert;(this||jj).ca=g.ca;(this||jj).ciphers=g.ciphers;(this||jj).rejectUnauthorized=g.rejectUnauthorized;(this||jj).forceNode=g.forceNode;(this||jj).isReactNative=g.isReactNative;(this||jj).extraHeaders=g.extraHeaders;(this||jj).localAddress=g.localAddress}function Bv(g){var e=g&&g.forceBase64;if(!ula||e)(this||
Ij).supportsBinary=!1;M7.call(this||Ij,g)}function N7(){}function xE(g){O7.call(this||ff,g);(this||ff).requestTimeout=g.requestTimeout;(this||ff).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var e="https:"===location.protocol,m=location.port;m||(m=e?443:80);(this||ff).xd="undefined"!==typeof location&&g.hostname!==location.hostname||m!==g.port;(this||ff).xs=g.secure!==e}}function fn(g){(this||ff).method=g.method||"GET";(this||ff).uri=g.uri;(this||ff).xd=!!g.xd;(this||ff).xs=!!g.xs;
(this||ff).async=!1!==g.async;(this||ff).data=void 0!==g.data?g.data:null;(this||ff).agent=g.agent;(this||ff).isBinary=g.isBinary;(this||ff).supportsBinary=g.supportsBinary;(this||ff).enablesXDR=g.enablesXDR;(this||ff).withCredentials=g.withCredentials;(this||ff).requestTimeout=g.requestTimeout;(this||ff).pfx=g.pfx;(this||ff).key=g.key;(this||ff).passphrase=g.passphrase;(this||ff).cert=g.cert;(this||ff).ca=g.ca;(this||ff).ciphers=g.ciphers;(this||ff).rejectUnauthorized=g.rejectUnauthorized;(this||
ff).extraHeaders=g.extraHeaders;this.create()}function P7(){for(var g in fn.requests)fn.requests.hasOwnProperty(g)&&fn.requests[g].abort()}function vla(){}function yE(g){VU.call(this||pj,g);(this||pj).query=(this||pj).query||{};HM||(HM=Q7.___eio=Q7.___eio||[]);(this||pj).index=HM.length;var e=this||pj;HM.push(function(m){e.onData(m)});(this||pj).query.j=(this||pj).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=vla)},!1)}function ns(g){g&&
g.forceBase64&&((this||Rg).supportsBinary=!1);(this||Rg).perMessageDeflate=g.perMessageDeflate;(this||Rg).usingBrowserWebSocket=IM&&!g.forceNode;(this||Rg).protocols=g.protocols;(this||Rg).usingBrowserWebSocket||(zE=R7);WU.call(this||Rg,g)}function qj(g,e){if(!((this||Pd)instanceof qj))return new qj(g,e);e=e||{};g&&"object"===typeof g&&(e=g,g=null);g?(g=S7(g),e.hostname=g.host,e.secure="https"===g.protocol||"wss"===g.protocol,e.port=g.port,g.query&&(e.query=g.query)):e.host&&(e.hostname=S7(e.host).host);
(this||Pd).secure=null!=e.secure?e.secure:"undefined"!==typeof location&&"https:"===location.protocol;e.hostname&&!e.port&&(e.port=(this||Pd).secure?"443":"80");(this||Pd).agent=e.agent||!1;(this||Pd).hostname=e.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||Pd).port=e.port||("undefined"!==typeof location&&location.port?location.port:(this||Pd).secure?443:80);(this||Pd).query=e.query||{};"string"===typeof(this||Pd).query&&((this||Pd).query=wla.decode((this||Pd).query));
(this||Pd).upgrade=!1!==e.upgrade;(this||Pd).path=(e.path||"/engine.io").replace(/\/$/,"")+"/";(this||Pd).forceJSONP=!!e.forceJSONP;(this||Pd).jsonp=!1!==e.jsonp;(this||Pd).forceBase64=!!e.forceBase64;(this||Pd).enablesXDR=!!e.enablesXDR;(this||Pd).withCredentials=!1!==e.withCredentials;(this||Pd).timestampParam=e.timestampParam||"t";(this||Pd).timestampRequests=e.timestampRequests;(this||Pd).transports=e.transports||["polling","websocket"];(this||Pd).transportOptions=e.transportOptions||{};(this||
Pd).readyState="";(this||Pd).writeBuffer=[];(this||Pd).prevBufferLen=0;(this||Pd).policyPort=e.policyPort||843;(this||Pd).rememberUpgrade=e.rememberUpgrade||!1;(this||Pd).binaryType=null;(this||Pd).onlyBinaryUpgrades=e.onlyBinaryUpgrades;(this||Pd).perMessageDeflate=!1!==e.perMessageDeflate?e.perMessageDeflate||{}:!1;!0===(this||Pd).perMessageDeflate&&((this||Pd).perMessageDeflate={});(this||Pd).perMessageDeflate&&null==(this||Pd).perMessageDeflate.threshold&&((this||Pd).perMessageDeflate.threshold=
1024);(this||Pd).pfx=e.pfx||null;(this||Pd).key=e.key||null;(this||Pd).passphrase=e.passphrase||null;(this||Pd).cert=e.cert||null;(this||Pd).ca=e.ca||null;(this||Pd).ciphers=e.ciphers||null;(this||Pd).rejectUnauthorized=void 0===e.rejectUnauthorized?!0:e.rejectUnauthorized;(this||Pd).forceNode=!!e.forceNode;(this||Pd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||Pd).isReactNative)e.extraHeaders&&
0<Object.keys(e.extraHeaders).length&&((this||Pd).extraHeaders=e.extraHeaders),e.localAddress&&((this||Pd).localAddress=e.localAddress);(this||Pd).id=null;(this||Pd).upgrades=null;(this||Pd).pingInterval=null;(this||Pd).pingTimeout=null;(this||Pd).pingIntervalTimer=null;(this||Pd).pingTimeoutTimer=null;this.open()}function Tl(g,e,m){(this||rf).io=g;(this||rf).nsp=e;(this||rf).json=this||rf;(this||rf).ids=0;(this||rf).acks={};(this||rf).receiveBuffer=[];(this||rf).sendBuffer=[];(this||rf).connected=
!1;(this||rf).disconnected=!0;(this||rf).flags={};m&&m.query&&((this||rf).query=m.query);(this||rf).io.autoConnect&&this.open()}function AE(g){g=g||{};(this||tp).ms=g.min||100;(this||tp).max=g.max||1E4;(this||tp).factor=g.factor||2;(this||tp).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||tp).attempts=0}function Rj(g,e){if(!((this||ie)instanceof Rj))return new Rj(g,e);g&&"object"===typeof g&&(e=g,g=void 0);e=e||{};e.path=e.path||"/socket.io";(this||ie).nsps={};(this||ie).subs=[];(this||ie).opts=
e;this.reconnection(!1!==e.reconnection);this.reconnectionAttempts(e.reconnectionAttempts||Infinity);this.reconnectionDelay(e.reconnectionDelay||1E3);this.reconnectionDelayMax(e.reconnectionDelayMax||5E3);this.randomizationFactor(e.randomizationFactor||.5);(this||ie).backoff=new xla({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==e.timeout?2E4:e.timeout);(this||ie).readyState="closed";(this||ie).uri=g;(this||ie).connecting=[];(this||
ie).lastPing=null;(this||ie).encoding=!1;(this||ie).packetBuffer=[];g=e.parser||yla;(this||ie).encoder=new g.Encoder;(this||ie).decoder=new g.Decoder;(this||ie).autoConnect=!1!==e.autoConnect;(this||ie).autoConnect&&this.open()}function T7(g,e){"object"===typeof g&&(e=g,g=void 0);e=e||{};g=zla(g);var m=g.source,c=g.id,h=g.path;h=uH[c]&&h in uH[c].nsps;e.forceNew||e["force new connection"]||!1===e.multiplex||h?(U7("ignoring socket cache for %s",m),m=V7(m,e)):(uH[c]||(U7("new io instance for %s",m),
uH[c]=V7(m,e)),m=uH[c]);g.query&&!e.query&&(e.query=g.query);return m.socket(g.path,e)}function HB(g,e){e=void 0===e?{}:e;var m=e.l2lClient;if(!m)throw Error("lively.shell client side runCommand needs opts.l2lClient!");Ig.ClientCommand.installLively2LivelyServices(m);m=new Ig.ClientCommand(m);m.spawn(Object.assign({command:g},Ig.obj.dissoc(e,["l2lClient"])));return m}function vH(g){return Ig.dirCache[g.trackerId]?Ig.dirCache[g.trackerId]:Promise.resolve().then(function(){var e,m,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==
h.nextAddress)return h.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);e=h.yieldResult;m=e.data;c=m.defaultDirectory;return h.return(Ig.dirCache[g.trackerId]=c)})})}function wH(g){var e,m,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(g.sendToAndWait(g.trackerId,"lively.shell.env",{}),2);e=h.yieldResult;m=e.data;c=m.env;return h.return(c)})}function JM(g,e){e=(e=void 0===e?{}:e)||{};var m=Ig.runCommand('cat "'+g+'"',e);return m.whenDone().then(function(){if(m.exitCode)throw Error("Read "+
g+" failed: "+m.stderr);return m.output})}function KM(g,e,m){!m&&e&&e.content&&(m=e,e=m.content);var c=Ig.runCommand('tee "'+g+'"',Object.assign({stdin:e||""},m));return c.whenDone().then(function(){if(c.exitCode)throw Error("Write "+g+" failed: "+c.stderr);return c})}function LM(g,e){e=void 0===e?{}:e;return cj._runCommand(g,Object.assign({l2lClient:cj.L2LClient.ensure(cj.defaultConnection)},e))}function MM(){return cj._defaultDirectory(cj.L2LClient.ensure(cj.defaultConnection))}function XU(){return cj._env(cj.L2LClient.ensure(cj.defaultConnection))}
function YU(g){function e(){0<c.length&&m.push(c);c=""}for(var m=[],c="",h="normal",n=0,b;b=g[n];n++)if("normal"===h&&/\s/.test(b))e();else{if('"'===b||"'"===b){if("normal"===h){h=b;continue}if(h===b){h="normal";continue}}"\\"===b&&h===g[n+1]&&(n++,b=g[n]);c+=b}e();return m}function ZU(g,e,m){var c=m=void 0===m?{}:m,h=c.exclusions,n=void 0===c.fileTypes?[]:c.fileTypes,b=void 0===c.sizeLimit?"+1M":c.sizeLimit;m=void 0===c.charsBefore?80:c.charsBefore;c=void 0===c.charsAfter?80:c.charsAfter;h||(h=cj.defaultGrepExclusions);
h=(h=[h.length?"-iname "+h.map(JSON.stringify).join(" -o -iname "):"",b?"-size "+b:""].filter(Boolean).join(" -o "))?"\\( "+h+" \\) -prune -o":"";n=(n=n.length?"-iname "+n.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( "+n+" \\)":"";b='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=cj.string.format(b,e,h,n,m,g,c);var d=cj.runCommand(g);d.whenDone().then(function(k){var a=k.exitCode;a&&1!==a||(d.results=k.stdout.split("\n").map(function(f){f=
f.match(/(.*):([0-9]+):(.*)/);if(!f)return null;var l=$jscomp.makeIterator(f);l.next();f=l.next().value;var r=l.next().value;l=l.next().value;return{filename:f,lineno:Number(r)-1,match:l}}).filter(Boolean))});return d}function NM(g,e){var m,c,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return m=Gi.fileInfoCommandString(g,e),c=Gi.runCommand(m,e),d.yield(c.whenDone(),2);if(h=0!=c.exitCode?c.output:null)throw h;n=$jscomp.makeIterator(Gi.parseDirectoryListFromLs(c.stdout,
e.rootDirectory||"."));b=n.next().value;return d.return(b)})}function $U(g,e){return Gi.string.lines(g).map(function(m){return m.trim().length?(new Gi.FileInfo(e)).readFromDirectoryListLine(m):null}).filter(Boolean)}function OM(g,e){var m,c,h,n,b,d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){m=Object.assign({findFilesGroup:"default-find-files-process"},e);c=m.findFilesGroup;h=m.rootDirectory;b=n=Gi.findFilesProcesses[c]||(Gi.findFilesProcesses[c]={promiseState:null,commands:[]});
d=b.commands;k=b.promiseState;k||(n.promiseState=k=Gi.promise.deferred());a=Gi.findFilesCommandString(g,e);d.forEach(function(r){return r.kill()});f=Gi.runCommand(a,e);d.push(f);f.whenDone().then(function(){Gi.arr.remove(d,f);if(d.some(function(v){return v.startTime>f.startTime}))console.log("[findFiles] command "+f+" exited but a newer findFiles command was started for group "+c+", discarding output");else{var r=0!=f.exitCode?f.output:null;r&&console.warn(r);r=r?[]:Gi.parseDirectoryListFromLs(f.stdout,
h)||[];k.resolve(r);Object.assign(n,{promiseState:null,commands:[]})}}).catch(function(r){return console.error(r)});return l.return(k.promise)})}function aV(g){function e(m){return Array.prototype.concat.apply([m],m.children?m.children.map(e):[])}return e(g).map(function(m){var c=m.fullPath.replace(/^\//,"");return{fileName:c,path:c,rootDirectory:"./",isDirectory:m.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function bV(g){return[]}
function PM(g,e){e=void 0===e?{}:e;var m,c,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return m=e.morphicDB||Te.MorphicDB.default,b.yield(m.load("part","string"===typeof g?g:g.name,e,"string"===typeof g?void 0:g),2);case 2:c=b.yieldResult;if(!c.isWindow||!c.targetMorph){b.jumpTo(3);break}h=c.targetMorph;return b.yield(Te.ensureCommitInfo(c.metadata&&c.metadata.commit),4);case 4:(n=b.yieldResult)&&h.changeMetaData("commit",n,!0,!1);case 3:return b.return(c)}})}
function cV(g,e,m,c,h,n){var b,d,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:A.setCatchFinallyBlocks(2);if(g.isMorph){A.jumpTo(4);break}if("function"!==typeof g.beforePublish){A.jumpTo(5);break}return A.yield(g.beforePublish(e,g),5);case 4:b=[],g.withAllSubmorphsDo(function(E){"function"===typeof E.beforePublish&&b.push(E)}),d=$jscomp.makeIterator(b),k=d.next();case 8:if(k.done){A.jumpTo(5);break}a=k.value;return A.yield(a.beforePublish(),
9);case 9:k=d.next();A.jumpTo(8);break;case 5:A.leaveTryBlock(3);break;case 2:f=A.enterCatchBlock(),l="Error in beforePublish of "+g+"\n"+f.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(l)):console.error(l);case 3:return r=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},m),v=m.morphicDB||Te.MorphicDB.default,A.yield(v.snapshotAndCommit("part",e,g,r,c,h,n),12);case 12:return y=A.yieldResult,Te.emit("lively.partsbin/partpublished",y),A.return(y)}})}function xH(g,
e){e=void 0===e?{}:e;var m,c,h,n,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,jb,ob,pa,ka,wa,Ka,Fb,hc,Ub,ac,Ic,Mb,ed,Bd,ja,Ba,Ea,wb,$b,zd,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mc){switch(Mc.nextAddress){case 1:return m=e,c=void 0===m.showPublishDialog?!0:m.showPublishDialog,h=void 0===m.notifications?!0:m.notifications,n=void 0===m.loadingIndicator?!0:m.loadingIndicator,b=void 0===m.preferWindow?!0:m.preferWindow,a=g,f=g.world()||g.env.world,l=g.name,r=[],
v="",Mc.yield(Te.ensureCommitInfo(Te.Path("metadata.commit").get(g)||Te.Path("metadata.commit").get(a)),2);case 2:y=Mc.yieldResult;A=e.morphicDB||Te.MorphicDB.default;y||(y={type:"part",name:g.name,author:f.getCurrentUser(),tags:[],description:"no description"});if(!c){y&&(E=y,l=E.name,r=E.tags,v=E.description);Mc.jumpTo(3);break}F=f;H=F.openPrompt;return Mc.yield(Te.loadPart("publish part dialog"),5);case 5:return Mc.yield(H.call(F,Mc.yieldResult,{part:g}),4);case 4:J=Mc.yieldResult;O=J.db;L=J.commit;
if(!L)return Mc.return(null);O&&(e.morphicDB=A=O);Y=L;l=Y.name;r=Y.tags;v=Y.description;case 3:if(!n){Mc.jumpTo(6);break}S=$world.execCommand("open loading indicator","saving "+l+"...");return Mc.yield(Te.promise.delay(80),6);case 6:Mc.setCatchFinallyBlocks(8,9);ea="HEAD";qa=y?y.name:g.name;if(qa===l){Fa=y?y._id:void 0;Mc.jumpTo(11);break}return Mc.yield(A.exists("part",l),12);case 12:K=Mc.yieldResult;Z=K.exists;R=K.commitId;if(!Z){Mc.jumpTo(13);break}return Mc.yield(f.confirm('A part "'+l+'" already exists, overwrite?'),
14);case 14:U=Mc.yieldResult;if(!U)return Mc.return(null);Fa=R;case 13:a.name=l;case 11:return b&&!g.isWindow&&(na=g.getWindow())&&na.targetMorph===g&&(g=na,k=na.metadata,d=!0),aa={author:g.world().getCurrentUser(),message:"published",tags:r,description:v},Mc.yield(Te.savePart(g,l,e,aa,ea,Fa),15);case 15:xa=Mc.yieldResult;if(!d){Mc.jumpTo(16);break}if(a.metadata)return ob=a.metadata,Mc.yield(Te.ensureCommitInfo(na.metadata.commit),20);jb=a;return Mc.yield(Te.ensureCommitInfo(na.metadata.commit),19);
case 19:jb.metadata={commit:Mc.yieldResult};Mc.jumpTo(18);break;case 20:ob.commit=Mc.yieldResult;case 18:na.metadata=k;case 16:return h&&g.setStatusMessage("saved part "+l),Mc.return(xa);case 9:Mc.enterFinallyBlock();S&&S.remove();Mc.leaveFinallyBlock(0);break;case 8:pa=Mc.enterCatchBlock();ka=$jscomp.makeIterator(pa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);ka.next();ka.next();wa=ka.next().value;Ka=ka.next().value;if(!wa||
!Ka){Mc.jumpTo(21);break}Fb=$jscomp;hc=Fb.makeIterator;return Mc.yield(A.log(Ka,1,!0),22);case 22:return Ub=hc.call(Fb,Mc.yieldResult),Ic=ac=Ub.next().value,Mb=Ic.author,ed=Mb.name,Bd=Ic.timestamp,ja='The current version of part "'+l+'" is not the most recent!\nA newer version by '+(ed+" was saved on ")+(Te.date.format(new Date(Bd),"yyyy-mm-dd HH:MM")+". Overwrite?"),Mc.yield(f.confirm(["Version Mismatch\n",{},ja,{fontWeight:"normal",fontSize:16}]),23);case 23:Ba=Mc.yieldResult;if(!Ba)return Mc.return(null);
Ea=Te.obj.dissoc(ac,["preview"]);a.changeMetaData("commit",Ea,!0,!1);return Mc.return(xH(a,Object.assign({},e,{morphicDB:A,showPublishDialog:!1})));case 21:wb=$jscomp.makeIterator(pa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[]);wb.next();wb.next();$b=wb.next().value;if(!$b){Mc.jumpTo(24);break}zd="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";return Mc.yield(f.confirm(zd),25);case 25:yd=Mc.yieldResult;
if(!yd)return Mc.return(null);a.changeMetaData("commit",null,!0,!1);return Mc.return(xH(a,Object.assign({},e,{morphicDB:A,showPublishDialog:!1})));case 24:throw console.error(pa),h&&f.logError("Error saving part: "+pa),pa;}})}function dV(g){g=void 0===g?{}:g;var e,m,c,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return e=g.morphicDB||Te.MorphicDB.default,d.yield(e.latestCommits("part"),2);if(3!=d.nextAddress)return m=d.yieldResult,c=m.map(function(k){return{isListItem:!0,
string:k.name,value:k}}),d.yield($world.filterableListPrompt("Select part to load",c,{fuzzy:!0}),3);h=d.yieldResult;n=$jscomp.makeIterator(h.selected);b=n.next().value;return d.return(b?Te.loadPart(b):null)})}function eV(g){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield($world.prompt("Enter part name to publish object under",{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);e=m.yieldResult;if(!e)throw"canceled";
return m.return(Te.saveObjectToPartsbinFolder(g,e,{previewWidth:g.width,previewHeight:g.height}))})}function fV(g,e,m){m=void 0===m?{}:m;var c,h,n,b,d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:m=Object.assign({preferWindow:!0},m);m.preferWindow&&(g=(c=g.getWindow())&&c.targetMorph===g?c:g);r.setCatchFinallyBlocks(2);if(g.isMorph){r.jumpTo(4);break}if("function"!==typeof g.beforePublish){r.jumpTo(5);break}return r.yield(g.beforePublish(e,g),
5);case 4:h=[],g.withAllSubmorphsDo(function(v){"function"===typeof v.beforePublish&&h.push(v)}),n=$jscomp.makeIterator(h),b=n.next();case 8:if(b.done){r.jumpTo(5);break}d=b.value;return r.yield(d.beforePublish(),9);case 9:b=n.next();r.jumpTo(8);break;case 5:r.leaveTryBlock(3);break;case 2:k=r.enterCatchBlock(),a="Error in beforePublish of "+g+"\n"+k.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(a)):console.error(a);case 3:return r.yield(Te.resource(m.partsbinFolder).ensureExistance(),
12);case 12:return f=Te.resource(m.partsbinFolder).join(e+".json"),r.yield(Te.createMorphSnapshot(g,m),13);case 13:return l=r.yieldResult,r.yield(f.write(JSON.stringify(l,null,2)),14);case 14:return r.return({partName:e,url:f.url})}})}function QM(g,e){e=void 0===e?{}:e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Te.loadPart(g,e))})}function gV(g){var e={type:"input",extent:Te.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:Te.Rectangle.inset(4,4),border:{color:Te.Color.gray,
width:1}};return Object.assign(Te.morph({extent:Te.pt(420,24),layout:new Te.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},e,{name:"name input",placeholder:"name"}),Object.assign({},e,{name:"type input",placeholder:"type"}),Object.assign({},e,{name:"timestamp input",placeholder:"timestamp"}),{layout:new Te.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},e,{name:"author.name input",placeholder:"author name"}),Object.assign({},e,{name:"author.email input",
placeholder:"author email"}),Object.assign({},e,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},e,{name:"tags input",placeholder:"tags"}),Object.assign({},e,{height:70,name:"description input",type:"text"}),Object.assign({},e,{height:70,name:"message input",type:"text"}),Object.assign({},e,{height:70,name:"metadata input",type:"text"}),{layout:new Te.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",
name:"cancel button",label:"Cancel"}]}],name:"commit editor",get ui(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),
okButton:this.get("ok button")}},set commit(m){this._commit=m;var c=m.type,h=m.timestamp,n=m.author,b=m.tags,d=m.description,k=m.metadata,a=this.ui,f=a.typeInput,l=a.timestampInput,r=a.authorNameInput,v=a.authorEmailInput,y=a.authorRealmInput,A=a.tagsInput,E=a.descriptionInput,F=a.messageInput,H=a.metadataInput;a.nameInput.input=m.name;f.input=c;l.input=String(new Date(h));r.input=n.name;v.input=n.email;y.input=n.realm;A.input=b.join(" ");E.textString=d;F.textString="";H.textString=k?JSON.stringify(k,
null,2):""},get commit(){var m=this._commit;if(!m)throw Error("commit editor does not have a _commit object");var c=this.ui,h=c.authorNameInput,n=c.authorEmailInput,b=c.authorRealmInput,d=c.tagsInput,k=c.descriptionInput,a=c.messageInput,f=c.metadataInput,l=c.nameInput.input;c=c.typeInput.input;if(m.name!==l)throw Error("name does not match _commit.name: "+l+" vs "+m.name);if(m.type!==c)throw Error("type does not match _commit.type: "+c+" vs "+m.type);m.author.name=h.input;m.author.email=n.input;
m.author.realm=b.input;m.tags=d.input.split(" ").map(function(r){return r.trim()}).filter(Boolean);m.description=k.textString;m.message=a.textString;m.metadata=f.textString?JSON.parse(f.textString):null;return m},onLoad:function(){Te.connect(this.ui.okButton,"fire",this,"accept");Te.connect(this.ui.cancelButton,"fire",this,"cancel")},accept:function(){},cancel:function(){}}),g)}function RM(g,e,m){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){c=g.isResource?g:$f.resource(System.decanonicalize(g));
h=c.nameWithoutExt();return n.return($f.loadWorldFromDB(h,void 0,e,m))})}function SM(g,e,m){var c,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return c=$f.MorphicDB.default,b.yield(c.load("world",void 0,m,g),2);h=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";m=Object.assign({pathForBrowserHistory:$f.pathForBrowserHistory(h.name,n)},m);return b.return($f.loadWorld(h,e,m))})}function TM(g,e,m,c){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress)return h=$f.MorphicDB.default,d.yield(h.load("world",g,c,void 0,e||void 0),2);n=d.yieldResult;b="undefined"!==typeof document?document.location.search:"";c=Object.assign({pathForBrowserHistory:$f.pathForBrowserHistory(g,b)},c);return d.return($f.loadWorld(n,m,c))})}function UM(g,e,m){m=void 0===m?{}:m;var c,h,n,b,d,k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:c=m;h=c.env;n=void 0===c.verbose?!0:c.verbose;b=void 0===c.localconfig?
!0:c.localconfig;d=void 0===c.l2l?!0:c.l2l;k=void 0===c.shell?!0:c.shell;a=void 0===c.worldLoadDialog?!1:c.worldLoadDialog;f=void 0===c.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:c.showUserFlap;h=h||(e?e.env:$f.MorphicEnv.default());l=h.domEnv.document||document;r=l.getElementById("dom-loading-indicator");E.setCatchFinallyBlocks(2,3);if(!(v=d)){E.jumpTo(5);break}return E.yield($f.setupLively2Lively(g),6);case 6:v=E.yieldResult;case 5:y=v;if(!y||!k){E.jumpTo(7);break}return E.yield($f.setupLivelyShell({l2lClient:y}),
7);case 7:n&&r&&(r.style.display="");if(!b){E.jumpTo(9);break}return E.yield($f.loadLocalConfig(),10);case 10:case 9:return E.yield(h.setWorld(g),11);case 11:a&&g.execCommand("load world");m.pathForBrowserHistory&&window.history.pushState({},"lively.next",m.pathForBrowserHistory);g.showsUserFlap=f;if(e)e.onUnload();$f.emit("world/loaded",g);return E.return(g);case 3:E.enterFinallyBlock();r&&(r.style.display="none");E.leaveFinallyBlock(0);break;case 2:A=E.enterCatchBlock();console.error("Error loading world: ",
A);if(!e){E.jumpTo(12);break}return E.yield(h.setWorld(e),13);case 13:e.showError(A);case 12:throw A;}})}function BE(g,e){var m,c,h,n,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,jb,ob,pa,ka,wa,Ka,Fb,hc,Ub,ac,Ic,Mb,ed,Bd,ja,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){switch(Ea.nextAddress){case 1:return e=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},e),m=g.name,c=[],h="",Ea.yield($f.ensureCommitInfo($f.Path("metadata.commit").get(g)),
2);case 2:n=Ea.yieldResult;b=e.morphicdb||$f.MorphicDB.default;d="";k="db";if(!e.showSaveDialog){n&&(a=n,m=a.name,c=a.tags,h=a.description);Ea.jumpTo(3);break}return Ea.yield($f.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return f=Ea.yieldResult,Ea.yield(g.openPrompt(f,{targetWorld:g}),5);case 5:if(l=Ea.yieldResult,r=l.commit,v=l.db,y=l.mode,A=l.filePath,v&&(b=v),k=y,d=A,E=r||{},m=E.name,c=E.tags,h=E.description,!m)return Ea.return(null);case 3:return F=$world.execCommand("open loading indicator",
"saving "+m+"..."),Ea.yield($f.promise.delay(80),6);case 6:if("json"!=k){Ea.jumpTo(7);break}H=$f.resource(System.baseURL).join(d).withRelativePartsResolved();return Ea.yield(H.exists(),8);case 8:return Ea.yieldResult?(F.visible=!1,Ea.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},H.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):
Ea.yield(H.ensureExistance(),10);case 12:J=Ea.yieldResult;if(!J)return F.remove(),Ea.return();F.visible=!0;case 10:return g.changeMetaData("file",d,!1,!1),Ea.yield($f.createMorphSnapshot(g),13);case 13:return O=Ea.yieldResult,Ea.yield(H.writeJson(O),14);case 14:return L=JSON.stringify(O),Y=d.replace(".json",".br.json"),S=$f,ea=S.resource,Ea.yield($f.defaultDirectory($f.ShellClientResource.defaultL2lClient),16);case 16:return Ea.yield(ea.call(S,Ea.yieldResult+"/..").join(Y).withRelativePartsResolved().brotli(L),
15);case 15:return $f.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(m).read(),F.remove(),g.setStatusMessage("saved world "+m+" to file: "+H.url),Ea.return();case 7:Ea.setCatchFinallyBlocks(17,18);qa={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[F]};Fa="HEAD";K=n?n.name:g.name;if(!e.useExpectedCommit){Ea.jumpTo(20);break}if(K===m||!e.confirmOverwrite){Z=n?n._id:void 0;Ea.jumpTo(20);break}return Ea.yield(b.exists("world",m),22);case 22:R=Ea.yieldResult;
U=R.exists;na=R.commitId;if(!U){Ea.jumpTo(23);break}return Ea.yield(g.confirm('A world "'+m+'" already exists, overwrite?',{styleClasses:["Halo"],fill:$f.Color.rgba(0,0,0,.8)}),24);case 24:aa=Ea.yieldResult;if(!aa)return Ea.return(null);Z=na;case 23:g.name=m;case 20:return xa={author:g.getCurrentUser(),message:"world save",tags:c,description:h},Ea.yield(b.snapshotAndCommit("world",m,g,qa,xa,Fa,Z),25);case 25:return jb=Ea.yieldResult,window.history&&(ob=$f.pathForBrowserHistory(m),window.history.pushState({},
"lively.next",ob)),$f.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(m).read(),g.setStatusMessage("saved world "+m),g.get("world-list")&&g.get("world-list").onWorldSaved(m),Ea.return(jb);case 18:Ea.enterFinallyBlock();F.remove();Ea.leaveFinallyBlock(0);break;case 17:pa=Ea.enterCatchBlock();if(pa.message.includes("but no version entry exists")&&!e.errorOnMissingExpectedCommit)return Ea.return(BE(g,Object.assign({},e,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));
ka=$jscomp.makeIterator(pa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);ka.next();ka.next();wa=ka.next().value;Ka=ka.next().value;if(!wa||!Ka){Ea.jumpTo(26);break}Fb=$jscomp;hc=Fb.makeIterator;return Ea.yield(b.log(Ka,1,!0),27);case 27:Ub=hc.call(Fb,Ea.yieldResult);ac=Ub.next().value;Ic=!0;if(!e.confirmOverwrite){Ea.jumpTo(28);break}Mb=ac;ed=Mb.author;Bd=ed.name;ja=Mb.timestamp;Ba="The current version of world "+m+" is not the most recent!\nA newer version by "+
(Bd+" was saved on ")+($f.date.format(new Date(ja),"yyyy-mm-dd HH:MM")+". Overwrite?");return Ea.yield(g.confirm(["Version Conflict\n",null,Ba,{fontSize:16,fontWeight:"normal"}],{width:600}),29);case 29:Ic=Ea.yieldResult;case 28:if(!Ic)return Ea.return(null);g.changeMetaData("commit",$f.obj.dissoc(ac,["preview"]),!0,!1);return Ea.return(BE(g,Object.assign({},e,{morphicdb:b,showSaveDialog:!1})));case 26:console.error(pa),g.logError("Error saving world: "+pa),Ea.jumpTo(18)}})}function hV(g,e){var m=
g.row;g=g.column;var c=e.row;e=e.column;return m<c?-2:m===c?g<e?-1:g===e?0:1:2}function Cv(g,e){return 0>Fl.comparePosition(g,e)}function CE(g,e){return 0>=Fl.comparePosition(g,e)}function Dv(g,e){return 0===Fl.comparePosition(g,e)}function DE(g,e){return Fl.lessPosition(g,e)?g:e}function EE(g,e){return Fl.lessPosition(g,e)?e:g}function iV(g,e){if(!g||!e)return g==e;var m=!0,c={},h;for(h in g)if(c[h]=!0,!e.hasOwnProperty(h)||g[h]!==e[h]){m=!1;break}if(m)for(var n in e)if(!(c[n]||g.hasOwnProperty(n)&&
g[n]===e[n])){m=!1;break}return m}function VM(g,e,m,c,h){h=void 0===h?"":h;var n="string"!==typeof g,b="string"!==typeof m;if(n||b){var d=[];n?d.push(g,e):d.push(g+h,e);b?d.push(m,c):d.push(m+h,c);return d}return!e&&!c||e==c?[g+h+m,e]:e&&c?Ch.shallowEquals(e,c)?[g+h+m,e]:[g+h,e,m,c]:[g+h,e,m,c]}function WM(g,e){e=void 0===e?"":e;if(2>=g.length)return g;var m=[],c=$jscomp.makeIterator(g),h=c.next().value,n=c.next().value;for(c=2;c<g.length;c+=2)n=Ch.concatAttributePair(h,n,g[c],g[c+1],e),2>=n.length?
(h=n[0],n=n[1]):(m.push.apply(m,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),h=n.next().value,n=n.next().value);m.push(h,n);return m}function XM(g,e){for(var m=0,c=0;c<g.length;c+=2){var h=g[c],n=m+("string"===typeof h?h.length:1);if(n<e)m=n;else{if(m===e)return[g.slice(0,c),g.slice(c)];if(n===e)return[g.slice(0,c+2),g.slice(c+2)];if("string"!==typeof h)throw Error("Assuming text is a string for splitting it, got "+h+" instead!");var b=g[c+1],d=e-m;n=[].concat($jscomp.arrayFromIterable(g.slice(0,
c)),[h.slice(0,d),b]);g=h.length===d?g.slice(c+2):[h.slice(e-m),b].concat($jscomp.arrayFromIterable(g.slice(c+2)));return[n,g]}}return[g,[]]}function YM(g,e){var m=g;g=0;for(var c=[],h=0;h<e.length;h++){var n=$jscomp.makeIterator(Ch.splitTextAndAttributesAt(m,e[h]-g));m=n.next().value;n=n.next().value;c.push(m);for(var b=0;b<m.length;b+=2)g+="string"===typeof m[b]?m[b].length:1;m=n}c.push(m);return c}function ZM(g,e,m){m=void 0===m?!1:m;if(!g.length||2===g.length&&""==g[0])return m?e:e.slice();if(!e.length||
2===e.length&&""==e[0])return m?g:g.slice();g=m?g:g.slice();for(m=0;m<e.length;m+=2)g.push(e[m],e[m+1]);return g}function $M(g,e,m){var c=e.start;e=e.end;if(Ch.eqPosition(c,e))return null;Ch.lessPosition(e,c)&&(e=$jscomp.makeIterator([e,c]),c=e.next().value,e=e.next().value);var h=c;c=h.row;var n=h.column;h=e;e=h.row;h=h.column;var b=g.getLine(c),d=b.textAndAttributes,k=0;n=$jscomp.makeIterator(Ch.splitTextAndAttributesAt(d,n));g=n.next().value;n=n.next().value;d.length=0;Ch.textAndAttributesDo(g,
function(l,r){k+="string"===typeof l?l.length:1;d.push(l,r)});if(c===e){var a=$jscomp.makeIterator(Ch.splitTextAndAttributesAt(n,h-k));n=a.next().value;a=a.next().value}Ch.textAndAttributesDo(n,function(l,r){return d.push(l,m(b,r))});c===e&&Ch.textAndAttributesDo(a,function(l,r){return d.push(l,r)});b._textAttributes=null;b.textAndAttributes=Ch.joinTextAttributes(d);if(c!==e){a={};for(c+=1;c<e;a={$jscomp$loop$prop$textAndAttributes$1421$2554:a.$jscomp$loop$prop$textAndAttributes$1421$2554},c++)b=
b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1421$2554=b.textAndAttributes,g=a.$jscomp$loop$prop$textAndAttributes$1421$2554.slice(),a.$jscomp$loop$prop$textAndAttributes$1421$2554.length=0,Ch.textAndAttributesDo(g,function(l){return function(r,v){return l.$jscomp$loop$prop$textAndAttributes$1421$2554.push(r,m(b,v))}}(a)),b._textAttributes=null,b.textAndAttributes=Ch.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1421$2554);b=b.nextLine();var f=b.textAndAttributes;c=$jscomp.makeIterator(Ch.splitTextAndAttributesAt(f,
h));a=c.next().value;c=c.next().value;f.length=0;Ch.textAndAttributesDo(a,function(l,r){return f.push(l,m(b,r))});Ch.textAndAttributesDo(c,function(l,r){return f.push(l,r)});b._textAttributes=null;b.textAndAttributes=Ch.joinTextAttributes(f)}}function aN(g,e){var m=g.column;g=g.row;var c=[],h=[];e=$jscomp.makeIterator(Ch.splitTextAndAttributesIntoLines(e));for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var b=0;b<n.length;b+=2){var d=n[b];d=m+("string"===typeof d?d.length:1);c.push({start:{row:g,
column:m},end:{row:g,column:d}});h.push(n[b],n[b+1]);m=d}m=0;g++}return{ranges:c,textAndAttributes:h}}function yH(g,e){e=void 0===e?"\n":e;if(!g.length)return[];for(var m=[],c=[],h=0;h<g.length;h+=2){var n=g[h],b=g[h+1];if("string"!==typeof n)c.push(n,b);else for(;n.length;){var d=n.indexOf(e);if(-1===d){c.push(n,b);break}0<d&&c.push(n.slice(0,d),b);m.push(c);n=n.slice(d+1);c=[]}}c.length?m.push(c):(c=$jscomp.makeIterator(g.slice(-2)),g=c.next().value,c=c.next().value,"string"===typeof g&&g.endsWith(e)&&
m.push(["",c]));return m}function bN(g,e){e=void 0===e?g.textAndAttributesInRange(g.selection.range):e;var m=new g.constructor(Object.assign({},g.defaultTextStyle,{width:g.width,textAndAttributes:e}));e=m.textRenderer.directRenderTextLayerFn(m);g=m.textRenderer.directRenderLineFn(m);e=e();var c=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(e):null;c&&(e.ownerDocument.body.appendChild(e),e.style.whiteSpace=c.whiteSpace,e.style.overflowWrap=c.overflowWrap,e.style.wordBreak=
c.wordBreak,e.style.minWidth=c.minWidth,e.parentNode.removeChild(e));m=$jscomp.makeIterator(m.document.lines);for(c=m.next();!c.done;c=m.next())e.appendChild(g(c.value));return e.outerHTML}function rx(g){return g?g.replace(/^\s+|\s+$/g,""):""}function jV(g,e){var m=g&&"string"===typeof g.type,c=m?g:e,h;for(h in g){var n=g[h];Array.isArray(n)?n.forEach(function(b){jV(b,c)}):n&&"object"===typeof n&&jV(n,c)}m&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null});
return g}function cN(g){(this||Ala).options=g||{}}function Dm(g){g=g||{};W7.call(this||tz,g);(this||tz).indentation=g.indent}function IB(g){throw new RangeError(Bla[g]);}function X7(g,e){var m=g.split("@"),c="";1<m.length&&(c=m[0]+"@",g=m[1]);g=g.replace(Cla,".").split(".");m=[];for(var h=g.length;h--;)m[h]=e(g[h]);e=m.join(".");return c+e}function Y7(g){for(var e=[],m=0,c=g.length;m<c;){var h=g.charCodeAt(m++);if(55296<=h&&56319>=h&&m<c){var n=g.charCodeAt(m++);56320==(64512&n)?e.push(((1023&h)<<
10)+(1023&n)+65536):(e.push(h),m--)}else e.push(h)}return e}function os(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function zH(g,e,m){if(g&&Ev.isObject(g)&&g instanceof os)return g;var c=new os;return c.parse(g,e,m),c}function Fv(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g));}function Z7(g,e){for(var m,c="",h=0,n=-1,b=0,d=0;d<=g.length;++d){if(d<
g.length)m=g.charCodeAt(d);else{if(47===m)break;m=47}if(47===m){if(n!==d-1&&1!==b)if(n!==d-1&&2===b){if(2>c.length||2!==h||46!==c.charCodeAt(c.length-1)||46!==c.charCodeAt(c.length-2))if(2<c.length){if(n=c.lastIndexOf("/"),n!==c.length-1){-1===n?(c="",h=0):h=(c=c.slice(0,n)).length-1-c.lastIndexOf("/");n=d;b=0;continue}}else if(2===c.length||1===c.length){c="";h=0;n=d;b=0;continue}e&&(0<c.length?c+="/..":c="..",h=2)}else 0<c.length?c+="/"+g.slice(n+1,d):c=g.slice(n+1,d),h=d-n-1;n=d;b=0}else 46===
m&&-1!==b?++b:b=-1}return c}function kV(g,e){try{return decodeURIComponent(g.join(""))}catch(c){}if(1===g.length)return g;e=e||1;var m=g.slice(0,e);g=g.slice(e);return Array.prototype.concat.call([],kV(m),kV(g))}function lV(){return Array.prototype.reduce.call(arguments,function(g,e){return Dla.resolve(g,e)})}function $7(g){return"\\"===Ela.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function AH(g){return Fla(g.replace(/\+/g,"%2B"))}function dN(g,e,m){Gla.nextTick(function(){g(e,m)})}function FE(g,
e){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(m){throw m.sourceMapData=e,m;}}function a8(g,e,m){e=AH(e);try{return String(g(e))}catch(c){throw c.sourceMapData=m,c;}}function b8(g,e,m,c){try{var h=c8(g,e)}catch(n){return dN(c,n)}if(!h||h.map)return dN(c,null,h);g=AH(h.url);m(g,function(n,b){if(n)return n.sourceMapData=h,c(n);h.map=String(b);try{h.map=FE(h.map,h)}catch(d){return c(d)}c(null,h)})}function d8(g,e,m){g=c8(g,e);if(!g||g.map)return g;g.map=a8(m,g.url,g);g.map=FE(g.map,g);return g}
function c8(g,e){e=$7(e);g=(g=g.match(Hla))?g[1]||g[2]||"":null;if(!g)return null;var m=g.match(Ila);if(m){var c=m[1]||"text/plain",h=m[2]||"";m=m[3]||"";e={sourceMappingURL:g,url:null,sourcesRelativeTo:e,map:m};if(!Jla.test(c)){var n=Error("Unuseful data uri mime type: "+c);n.sourceMapData=e;throw n;}try{if(";base64"===h)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=e8(m);else{var b=e8(m),d=b.length,k=new Uint8Array(d);for(g=0;g<d;g++)k[g]=b.charCodeAt(g);n=(new TextDecoder(Kla,
{fatal:!0})).decode(k)}else n=decodeURIComponent(m);e.map=FE(n,e)}catch(a){throw a.sourceMapData=e,a;}return e}n=lV(e,g);return{sourceMappingURL:g,url:n,sourcesRelativeTo:n,map:null}}function f8(g,e,m,c,h){"function"===typeof c&&(h=c,c={});var n=g.sources?g.sources.length:0,b={sourcesResolved:[],sourcesContent:[]};if(0===n)dN(h,null,b);else{var d=function(){n--;0===n&&h(null,b)};g8(g,e,c,function(k,a,f){b.sourcesResolved[f]=k;"string"===typeof a?(b.sourcesContent[f]=a,dN(d,null)):(k=AH(k),m(k,function(l,
r){b.sourcesContent[f]=l?l:String(r);d()}))})}}function h8(g,e,m,c){var h={sourcesResolved:[],sourcesContent:[]};if(!g.sources||0===g.sources.length)return h;g8(g,e,c,function(n,b,d){h.sourcesResolved[d]=n;if(null!==m)if("string"===typeof b)h.sourcesContent[d]=b;else{n=AH(n);try{h.sourcesContent[d]=String(m(n))}catch(k){h.sourcesContent[d]=k}}});return h}function g8(g,e,m,c){m=m||{};e=$7(e);for(var h,n,b=0,d=g.sources.length;b<d;b++)h=null,"string"===typeof m.sourceRoot?h=m.sourceRoot:"string"===
typeof g.sourceRoot&&!1!==m.sourceRoot&&(h=g.sourceRoot),h=null===h||""===h?lV(e,g.sources[b]):lV(e,h.replace(Lla,"/"),g.sources[b]),n=(g.sourcesContent||[])[b],c(h,n,b)}function Ln(g){i8.call(this||mV,g)}function eN(g){if(g&&g.isListItem&&"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,string:String(g),value:g};var e=g.string||g.label||"no item.string";g.string=e&&"string"!==typeof e?Array.isArray(e)?e.map(function(m,c){return 0==c%2?String(m):""}).join(""):String(e):
String(e);return g}function fN(g){var e=g.filePath,m=g.worldName,c=g.commit,h=g.loadingIndicator,n=g.progress,b=void 0===g.logError?function(L){return console.log(L)}:g.logError,d,k,a,f,l,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return L.setCatchFinallyBlocks(2),d=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),
n.opacity=0,n.hasFixedPosition=!0,n.openInWorld(),n.bottomCenter=h.topCenter,L.yield(He.polyfills(),4);case 4:return k=$world.env,He.doBootstrap?L.yield(He.bootstrapLivelySystem(h,n,d),8):L.yield(He.fastPrepLivelySystem(h),7);case 7:L.jumpTo(6);break;case 8:case 6:return h.label="Loading lively.2lively...",L.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:He.askBeforeQuit&&window.addEventListener("beforeunload",function(Y){return Y.returnValue="Really?"},!0);if("dynamic"!=d["lively.morphic"]||
He.fastLoad){a=lively.morphic;L.jumpTo(10);break}h.label="Loading lively.morphic...";return L.yield(lively.modules.importPackage("lively.morphic"),11);case 11:a=L.yieldResult,n.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:h.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;f=document.location;window.worldLoadingIndicator=h;L.setCatchFinallyBlocks(12);l={verbose:!0,
localconfig:!0,l2l:!0,shell:!0};if(c)return L.yield(a.World.loadFromCommit(c,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+c.name})),15);if(m)return"__newWorld__"==m?Object.values(d).every(function(Y){return"frozen"==Y})||He.fastLoad?L.yield(lively.modules.module("lively.ide/world.js").recorder,27):L.yield(lively.modules.System.import("lively.ide/world.js"),25):L.yield(a.World.loadFromDB(m,void 0,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+m.replace(/\.json($|\?)/,"")})),
15);if(!e){L.jumpTo(15);break}return L.yield(a.World.loadFromResource(He.resource(System.baseURL).join(e),void 0,Object.assign({},l,{browserURL:"/worlds/load?file="+e})),15);case 25:return y=L.yieldResult,r=y.LivelyWorld,L.yield(lively.modules.System.import("lively.morphic/world-loading.js"),26);case 26:A=L.yieldResult;v=A.loadWorld;L.jumpTo(24);break;case 27:return E=L.yieldResult,r=E.LivelyWorld,L.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,28);case 28:F=L.yieldResult,
v=F.loadWorld;case 24:return L.yield(v(new r({openNewProjectPrompt:!0})),15);case 15:L.leaveTryBlock(13,2);break;case 12:H=L.enterCatchBlock(2),window.__loadError__=H;case 13:return n.finishPackage({packageName:"world",loaded:!0}),n.fadeIntoBack(),window.addEventListener("popstate",function(Y){document.location==f&&document.location.reload()}),He.worldLoaded=!0,L.yield($world.whenReady(),31);case 31:return h.remove(),L.yield(k.renderer.worldMorph.whenRendered(),32);case 32:"dynamic"!=d["lively.morphic"]||
He.fastLoad||(k.renderer.clear(),k.fontMetric.uninstall(),k.eventDispatcher.uninstall());L.leaveTryBlock(0);break;case 2:throw J=L.enterCatchBlock(),J.originalErr&&(J=J.originalErr),O=J.message,J.stack!==J.message&&(O+=J.stack.includes(J.message)?J.stack.replace(J.message,"\n"):J.stack),b(O),J;}})}Ca({$:Hg,B:qm,D:yy,F:$d,G:Ra,H:Xc,J:vd,K:Jc,M:Gc,N:yq,O:W,P:ci,Q:Pl,R:Gp,S:yc,U:np,V:gL,W:wd,X:mt,Z:xG,_:LM,a:rD,a2:Dl,a3:di,aG:iv,aU:Wp,aV:fm,aX:BM,aZ:Ek,ab:de,af:QM,ag:PM,ah:BE,aj:cv,au:Li,av:em,aw:Zb,
b:qD,b0:fl,bC:co,bF:wy,bG:Qm,bL:lf,bO:$e,bP:B,bR:lp,bS:$l,bW:function(g){g=void 0===g?document.body:g;var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){ps.default().world||(e=window.$world=window.$$world=new sx({name:j8.name,extent:di(window.innerWidth,window.innerHeight)}),ps.default().setWorldRenderedOn(e,g,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var c=si(j8,{reinitializeIds:function(h){return h}});if(c.isWorld)c.position=di(0,0),ps.default().setWorldRenderedOn(c,
g,window.prerenderNode),"elastic"===c.resizePolicy&&c.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(h){return c.execCommand("resize on client",h[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return c.execCommand("resize on client")},c.openInWorld(di(0,0)),c.execCommand("resize on client",g)}catch(h){c.position=di(0,0)}});m.jumpToEnd()})},bp:Gq,br:Wn,bu:ht,by:Sc,c:uD,e:Rq,f:ho,g:YA,h:wh,i:ra,j:Up,k:uG,l:Wq,m:sD,
n:lc,o:ec,p:ce,q:on,r:Xb,s:vG,t:GA,u:cc,v:cm,w:ke,x:Pw,y:xy,z:Qu});var GE=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");GE.evalJS=zl;GE.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var Sj=function(g,e,m,c){this.originalFunc=g;this.varMapping=e||{};this.setFuncSource(m||g);this.setFuncProperties(g||c)};Sj.fromFunction=function(g,e){return new this(g,e||{})};Sj.fromSource=function(g,e){return new this(null,e||{},g)};Sj.prototype.setFuncSource=function(g){return this.source=
g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):String(g)};Sj.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};Sj.prototype.hasFuncSource=function(){return this.source&&!0};Sj.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};Sj.prototype.getFuncProperties=function(){return this.funcProperties||
(this.funcProperties={})};Sj.prototype.setFuncProperties=function(g){var e=this.getFuncProperties(),m;for(m in g)g.hasOwnProperty(m)&&(e[m]=g[m])};Sj.prototype.lookup=function(g){return this.varMapping[g]};Sj.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(e){return"Identifier"===e.type?e.name:e.left&&"Identifier"===e.left.type?e.left.name:null}).filter(Boolean):(g=GE.parameterRegex.exec(g))?
(g[1]||g[2]||"").split(",").map(function(e){return e.trim()}):[]};Sj.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||null};Sj.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};Sj.prototype.recreateFuncFromSource=function(g,e){e=[];var m="$super"===this.firstParameter(g);for(c in this.varMapping)this.varMapping.hasOwnProperty(c)&&"this"!=c&&e.push("var "+c+" = this.varMapping."+c+";\n");var c="";0<e.length&&(c+=e.join("\n"));
m&&(c+="(function superWrapperForClosure() { return ");c+="("+g+")";m&&(c+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var h=GE.evalJS.call(this,c)||this.couldNotCreateFunc(c);this.addFuncProperties(h);return this.originalFunc=h}catch(n){throw g="Cannot create function "+n+" src: "+c,console.error(g),Error(g);}};Sj.prototype.addFuncProperties=function(g){var e=this.getFuncProperties(),m;for(m in e)e.hasOwnProperty(m)&&(g[m]=e[m]);this.addClosureInformation(g)};Sj.prototype.couldNotCreateFunc=
function(g){var e="Could not recreate closure from source: \n"+g;console.error(e);return function(){throw Error(e);}};Sj.prototype.asFunction=function(){return this.recreateFunc()};Sj.prototype.addClosureInformation=function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};$jscomp.global.Object.defineProperties(Sj.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Ca("bw",
Sj);GE.Closure=Sj;GE.default=Sj;var uz=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");uz.groupBy=Ra;var mo=function(){};mo.fromArray=function(g,e,m){for(var c=new uz.Group,h=0,n=g.length;h<n;h++){var b=e.call(m,g[h],h);uz.Group.prototype.hasOwnProperty(b)&&(b="_"+b);c[b]||(c[b]=[]);c[b].push(g[h])}return c};mo.prototype.toArray=function(){return this.reduceGroups(function(g,e,m){return g.concat([m])},[])};mo.prototype.forEach=function(g,e){var m=this;Object.keys(m).forEach(function(c){m[c].forEach(g.bind(e,
c))});return m};mo.prototype.forEachGroup=function(g,e){var m=this;Object.keys(m).forEach(function(c){g.call(e,c,m[c])});return m};mo.prototype.map=function(g,e){var m=new uz.Group;this.forEachGroup(function(c,h){m[c]=h.map(g.bind(e,c))});return m};mo.prototype.mapGroups=function(g,e){var m=new uz.Group;this.forEachGroup(function(c,h){m[c]=g.call(e,c,h)});return m};mo.prototype.keys=function(){return Object.keys(this)};mo.prototype.reduceGroups=function(g,e,m){this.forEachGroup(function(c,h){e=g.call(m,
e,c,h)});return e};mo.prototype.count=function(){return this.reduceGroups(function(g,e,m){g[e]=m.length;return g},{})};$jscomp.global.Object.defineProperties(mo,{by:{configurable:!0,enumerable:!0,get:function(){return uz.groupBy}}});uz.Group=mo;uz.default=mo;var Nb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Nb.range=lc;Nb.withN=bc;Nb.genN=Td;Nb.filter=Xc;Nb.findAndGet=Wd;Nb.filterByKey=$c;Nb.grep=Pc;Nb.mask=md;Nb.reject=ge;Nb.rejectByKey=Qe;Nb.without=kf;Nb.withoutAll=ke;Nb.uniq=cc;
Nb.uniqBy=Jc;Nb.uniqByKey=Nd;Nb.compact=ec;Nb.mutableCompact=Zd;Nb.forEach=le;Nb.zip=yc;Nb.flatten=Gc;Nb.flatmap=Qb;Nb.interpose=Ec;Nb.delimWith=dd;Nb.map=Hd;Nb.invoke=Ld;Nb.pluck=uc;Nb.reduce=rb;Nb.reduceRight=Gb;Nb.some=Oa;Nb.every=ab;Nb.equals=Qa;Nb.deepEquals=Ja;Nb.isSorted=eb;Nb.sort=Sb;Nb.sortBy=Ac;Nb.sortByKey=sb;Nb.reverse=Ab;Nb.reversed=vb;Nb.reMatches=ha;Nb.first=Ha;Nb.last=W;Nb.intersect=ra;Nb.union=Za;Nb.pushAt=qb;Nb.removeAt=sc;Nb.remove=wd;Nb.pushAll=nc;Nb.pushAllAt=Ob;Nb.pushIfNotIncluded=
$d;Nb.replaceAt=Id;Nb.clear=kb;Nb.isSubset=Eb;Nb.doAndContinue=ad;Nb.nestedDelay=ub;Nb.forEachShowingProgress=cd;Nb.swap=Vc;Nb.rotate=ib;Nb.groupBy=Ra;Nb.groupByKey=pb;Nb.partition=bb;Nb.batchify=Oc;Nb.toTuples=ma;Nb.combinationsPick=Aa;Nb.combinations=xb;Nb.take=P;Nb.drop=va;Nb.takeWhile=Va;Nb.dropWhile=Db;Nb.shuffle=mc;Nb.max=Tb;Nb.min=Tc;Nb.sum=gd;Nb.count=se;Nb.size=Cf;Nb.histogram=me;Nb.clone=Se;Nb.toArray=Ze;Nb.each=yf;Nb.all=vd;Nb.any=Ve;Nb.collect=Ye;Nb.findAll=cg;Nb.inject=eg;Nb.mapAsyncSeries=
Vg;Nb.mapAsync=pc;Nb.objectEquals=yl;Nb.delay=jd;Nb.once=$l;Nb.NullFunction=nh;Nb.Group=mo;Nb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Nb.features={from:!!Array.from,filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Nb.from=Nb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var e=g.length,m=Array(e);e--;)m[e]=
g[e];return m};Nb.detect=Nb.features.find?function(g,e,m){return g.find(e,m)}:function(g,e,m){for(var c,h=0,n=g.length;h<n;h++)if(c=g[h],e.call(m,c,h))return c};Nb.findIndex=Nb.features.findIndex?function(g,e,m){return g.findIndex(e,m)}:function(g,e,m){var c=-1;return g.find(function(h,n){c=n;return e.call(h,m)})?c:-1};Nb.isArray=Array.isArray;Nb.includes=Nb.features.includes?function(g,e){return g.includes(e)}:function(g,e){return-1!==g.indexOf(e)};Nb.include=Nb.includes;Nb.permutations=function(){function g(e,
m){return e.length?Nb.flatmap(e,function(c,h){return g(e.slice(0,h).concat(e.slice(h+1)),m.concat([c]))}):[m]}return function(e){return g(e,[])}}();Nb.features.from||(Array.from=Nb.from);Nb.features.filter||(Array.prototype.filter=function(g,e){return Nb.filter(this,g,e)});Nb.features.find||(Array.prototype.find=function(g,e){return Nb.detect(this,g,e)});Nb.features.findIndex||(Array.prototype.findIndex=function(g,e){return Nb.findIndex(this,g,e)});Nb.features.includes||(Array.prototype.includes=
function(g){return Nb.includes(this,g)});var nV=Nb.from,oV=Nb.detect,pV=Nb.findIndex,qV=Ca("d",Nb.isArray),rV=Nb.includes,sV=Nb.include,tV=Nb.permutations;Nb.range=lc;Nb.range=lc;Nb.from=nV;Nb.from=nV;Nb.withN=bc;Nb.withN=bc;Nb.genN=Td;Nb.genN=Td;Nb.filter=Xc;Nb.filter=Xc;Nb.detect=oV;Nb.detect=oV;Nb.findIndex=pV;Nb.findIndex=pV;Nb.findAndGet=Wd;Nb.findAndGet=Wd;Nb.filterByKey=$c;Nb.filterByKey=$c;Nb.grep=Pc;Nb.grep=Pc;Nb.mask=md;Nb.mask=md;Nb.reject=ge;Nb.reject=ge;Nb.rejectByKey=Qe;Nb.rejectByKey=
Qe;Nb.without=kf;Nb.without=kf;Nb.withoutAll=ke;Nb.withoutAll=ke;Nb.uniq=cc;Nb.uniq=cc;Nb.uniqBy=Jc;Nb.uniqBy=Jc;Nb.uniqByKey=Nd;Nb.uniqByKey=Nd;Nb.compact=ec;Nb.compact=ec;Nb.mutableCompact=Zd;Nb.mutableCompact=Zd;Nb.forEach=le;Nb.forEach=le;Nb.zip=yc;Nb.zip=yc;Nb.flatten=Gc;Nb.flatten=Gc;Nb.flatmap=Qb;Nb.flatmap=Qb;Nb.interpose=Ec;Nb.interpose=Ec;Nb.delimWith=dd;Nb.delimWith=dd;Nb.map=Hd;Nb.map=Hd;Nb.invoke=Ld;Nb.invoke=Ld;Nb.pluck=uc;Nb.pluck=uc;Nb.reduce=rb;Nb.reduce=rb;Nb.reduceRight=Gb;Nb.reduceRight=
Gb;Nb.isArray=qV;Nb.isArray=qV;Nb.includes=rV;Nb.includes=rV;Nb.include=sV;Nb.include=sV;Nb.some=Oa;Nb.some=Oa;Nb.every=ab;Nb.every=ab;Nb.equals=Qa;Nb.equals=Qa;Nb.deepEquals=Ja;Nb.deepEquals=Ja;Nb.isSorted=eb;Nb.isSorted=eb;Nb.sort=Sb;Nb.sort=Sb;Nb.sortBy=Ac;Nb.sortBy=Ac;Nb.sortByKey=sb;Nb.sortByKey=sb;Nb.reverse=Ab;Nb.reverse=Ab;Nb.reversed=vb;Nb.reversed=vb;Nb.reMatches=ha;Nb.reMatches=ha;Nb.first=Ha;Nb.first=Ha;Nb.last=W;Nb.last=W;Nb.intersect=ra;Nb.intersect=ra;Nb.union=Za;Nb.union=Za;Nb.pushAt=
qb;Nb.pushAt=qb;Nb.removeAt=sc;Nb.removeAt=sc;Nb.remove=wd;Nb.remove=wd;Nb.pushAll=nc;Nb.pushAll=nc;Nb.pushAllAt=Ob;Nb.pushAllAt=Ob;Nb.pushIfNotIncluded=$d;Nb.pushIfNotIncluded=$d;Nb.replaceAt=Id;Nb.replaceAt=Id;Nb.clear=kb;Nb.clear=kb;Nb.isSubset=Eb;Nb.isSubset=Eb;Nb.doAndContinue=ad;Nb.doAndContinue=ad;Nb.nestedDelay=ub;Nb.nestedDelay=ub;Nb.forEachShowingProgress=cd;Nb.forEachShowingProgress=cd;Nb.swap=Vc;Nb.swap=Vc;Nb.rotate=ib;Nb.rotate=ib;Nb.groupBy=Ra;Nb.groupBy=Ra;Nb.groupByKey=pb;Nb.groupByKey=
pb;Nb.partition=bb;Nb.partition=bb;Nb.batchify=Oc;Nb.batchify=Oc;Nb.toTuples=ma;Nb.toTuples=ma;Nb.permutations=tV;Nb.permutations=tV;Nb.combinationsPick=Aa;Nb.combinationsPick=Aa;Nb.combinations=xb;Nb.combinations=xb;Nb.take=P;Nb.take=P;Nb.drop=va;Nb.drop=va;Nb.takeWhile=Va;Nb.takeWhile=Va;Nb.dropWhile=Db;Nb.dropWhile=Db;Nb.shuffle=mc;Nb.shuffle=mc;Nb.max=Tb;Nb.max=Tb;Nb.min=Tc;Nb.min=Tc;Nb.sum=gd;Nb.sum=gd;Nb.count=se;Nb.count=se;Nb.size=Cf;Nb.size=Cf;Nb.histogram=me;Nb.histogram=me;Nb.clone=Se;
Nb.clone=Se;Nb.toArray=Ze;Nb.toArray=Ze;Nb.each=yf;Nb.each=yf;Nb.all=vd;Nb.all=vd;Nb.any=Ve;Nb.any=Ve;Nb.collect=Ye;Nb.collect=Ye;Nb.findAll=cg;Nb.findAll=cg;Nb.inject=eg;Nb.inject=eg;Nb.mapAsyncSeries=Vg;Nb.mapAsyncSeries=Vg;Nb.mapAsync=pc;Nb.mapAsync=pc;var Lf=Object.freeze({__proto__:null,range:lc,from:nV,withN:bc,genN:Td,filter:Xc,detect:oV,findIndex:pV,findAndGet:Wd,filterByKey:$c,grep:Pc,mask:md,reject:ge,rejectByKey:Qe,without:kf,withoutAll:ke,uniq:cc,uniqBy:Jc,uniqByKey:Nd,compact:ec,mutableCompact:Zd,
forEach:le,zip:yc,flatten:Gc,flatmap:Qb,interpose:Ec,delimWith:dd,map:Hd,invoke:Ld,pluck:uc,reduce:rb,reduceRight:Gb,isArray:qV,includes:rV,include:sV,some:Oa,every:ab,equals:Qa,deepEquals:Ja,isSorted:eb,sort:Sb,sortBy:Ac,sortByKey:sb,reverse:Ab,reversed:vb,reMatches:ha,first:Ha,last:W,intersect:ra,union:Za,pushAt:qb,removeAt:sc,remove:wd,pushAll:nc,pushAllAt:Ob,pushIfNotIncluded:$d,replaceAt:Id,clear:kb,isSubset:Eb,doAndContinue:ad,nestedDelay:ub,forEachShowingProgress:cd,swap:Vc,rotate:ib,groupBy:Ra,
groupByKey:pb,partition:bb,batchify:Oc,toTuples:ma,permutations:tV,combinationsPick:Aa,combinations:xb,take:P,drop:va,takeWhile:Va,dropWhile:Db,shuffle:mc,max:Tb,min:Tc,sum:gd,count:se,size:Cf,histogram:me,clone:Se,toArray:Ze,each:yf,all:vd,any:Ve,collect:Ye,findAll:cg,inject:eg,mapAsyncSeries:Vg,mapAsync:pc});Ca("a6",Lf);var od=lively.FreezerRuntime.recorderFor("lively.lang/function.js");od.Empty=qh;od.K=rh;od.Null=nh;od.False=Jf;od.True=Na;od.notYetImplemented=fb;od.all=Jb;od.own=da;od.argumentNames=
Ia;od.qualifiedMethodName=nb;od.extractBody=yb;od.timeToRun=Cc;od.timeToRunN=xc;od.delay=jd;od.throttle=ud;od.debounce=nd;od.throttleNamed=pf;od.debounceNamed=kg;od.createQueue=Wf;od.workerWithCallbackQueue=Fh;od._composeAsyncDefaultEndCallback=function(g,e){g&&console.error("lively.lang.composeAsync error",g)};od.composeAsync=Df;od.compose=wh;od.flip=ck;od.withNull=bi;od.waitFor=Al;od.waitForAll=yg;od.curry=Vj;od.wrap=Ri;od.getOriginal=Jk;od.wrapperChain=cl;od.replaceMethodForOneCall=wl;od.once=
$l;od.either=Km;od.eitherNamed=Kl;od.evalJS=zl;od.fromString=Hi;od.asScript=vo;od.asScriptOf=Bf;od.addToObject=wo;od.binds=Rb;od.setLocalVarValue=id;od.getVarMapping=zc;od.setProperty=he;od.functionNames=qg;od.localFunctionNames=Gg;od.logErrors=Uj;od.logCompletion=Xn;od.logCalls=qq;od.traceCalls=Ls;od.webkitStack=rq;od.objectMerge=nl;od.safeToString=Ms;od.Closure=Sj;od.arr=Lf;od._throttledByName={};od._debouncedByName={};od._queues={};od._queueUntilCallbacks={};od._eitherNameRegistry={};od.Empty=
qh;od.Empty=qh;od.K=rh;od.K=rh;od.Null=nh;od.Null=nh;od.False=Jf;od.False=Jf;od.True=Na;od.True=Na;od.notYetImplemented=fb;od.notYetImplemented=fb;od.withNull=bi;od.withNull=bi;od.all=Jb;od.all=Jb;od.own=da;od.own=da;od.argumentNames=Ia;od.argumentNames=Ia;od.qualifiedMethodName=nb;od.qualifiedMethodName=nb;od.extractBody=yb;od.extractBody=yb;od.timeToRun=Cc;od.timeToRun=Cc;od.timeToRunN=xc;od.timeToRunN=xc;od.delay=jd;od.delay=jd;od.throttle=ud;od.throttle=ud;od.debounce=nd;od.debounce=nd;od.throttleNamed=
pf;od.throttleNamed=pf;od.debounceNamed=kg;od.debounceNamed=kg;od.createQueue=Wf;od.createQueue=Wf;od.workerWithCallbackQueue=Fh;od.workerWithCallbackQueue=Fh;od.composeAsync=Df;od.composeAsync=Df;od.compose=wh;od.compose=wh;od.waitFor=Al;od.waitFor=Al;od.waitForAll=yg;od.waitForAll=yg;od.flip=ck;od.flip=ck;od.curry=Vj;od.curry=Vj;od.wrap=Ri;od.wrap=Ri;od.binds=Rb;od.binds=Rb;od.getOriginal=Jk;od.getOriginal=Jk;od.wrapperChain=cl;od.wrapperChain=cl;od.replaceMethodForOneCall=wl;od.replaceMethodForOneCall=
wl;od.once=$l;od.once=$l;od.either=Km;od.either=Km;od.eitherNamed=Kl;od.eitherNamed=Kl;od.evalJS=zl;od.evalJS=zl;od.fromString=Hi;od.fromString=Hi;od.asScript=vo;od.asScript=vo;od.asScriptOf=Bf;od.asScriptOf=Bf;od.addToObject=wo;od.addToObject=wo;od.setLocalVarValue=id;od.setLocalVarValue=id;od.getVarMapping=zc;od.getVarMapping=zc;od.setProperty=he;od.setProperty=he;od.functionNames=qg;od.functionNames=qg;od.localFunctionNames=Gg;od.localFunctionNames=Gg;od.logErrors=Uj;od.logErrors=Uj;od.logCompletion=
Xn;od.logCompletion=Xn;od.logCalls=qq;od.logCalls=qq;od.traceCalls=Ls;od.traceCalls=Ls;od.webkitStack=rq;od.webkitStack=rq;var gn=Object.freeze({__proto__:null,Empty:qh,K:rh,Null:nh,False:Jf,True:Na,notYetImplemented:fb,withNull:bi,all:Jb,own:da,argumentNames:Ia,qualifiedMethodName:nb,extractBody:yb,timeToRun:Cc,timeToRunN:xc,delay:jd,throttle:ud,debounce:nd,throttleNamed:pf,debounceNamed:kg,createQueue:Wf,workerWithCallbackQueue:Fh,composeAsync:Df,compose:wh,waitFor:Al,waitForAll:yg,flip:ck,curry:Vj,
wrap:Ri,binds:Rb,getOriginal:Jk,wrapperChain:cl,replaceMethodForOneCall:wl,once:$l,either:Km,eitherNamed:Kl,evalJS:zl,fromString:Hi,asScript:vo,asScriptOf:Bf,addToObject:wo,setLocalVarValue:id,getVarMapping:zc,setProperty:he,functionNames:qg,localFunctionNames:Gg,logErrors:Uj,logCompletion:Xn,logCalls:qq,traceCalls:Ls,webkitStack:rq});Ca("ax",gn);var fe=lively.FreezerRuntime.recorderFor("lively.lang/object.js");fe.print=Wo;fe.indent=function(g,e,m){if(!m||0>=m)return g;for(;0<m;)m--,g=e+g;return g};
fe.isArray=nk;fe.isElement=uo;fe.isFunction=Vn;fe.isBoolean=Hp;fe.isString=Gp;fe.isNumber=sq;fe.isUndefined=Xo;fe.isRegExp=am;fe.isObject=Zo;fe.isPrimitive=xl;fe.isEmpty=lm;fe.equals=yl;fe.values=cm;fe.select=Lm;fe.dissoc=on;fe.addScript=Ip;fe.extend=bm;fe.clone=Ml;fe.extract=yh;fe.inspect=Tk;fe.merge=nl;fe.deepMerge=Yn;fe.sortKeysWithBeforeAndAfterConstraints=Kp;fe.inherit=$o;fe.valuesInPropertyHierarchy=tq;fe.mergePropertyInHierarchy=Br;fe.deepCopy=pn;fe.typeStringOf=ap;fe.shortPrintStringOf=Jp;
fe.isMutableType=mm;fe.safeToString=Ms;fe.asObject=vq;fe.newKeyIn=Zn;fe.functionFromString=Hi;fe.asScriptOf=Bf;fe.argumentNames=Ia;fe.arrayDeepEquals=Ja;fe.isSubset=Eb;fe.flatten=Gc;fe.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var e={},m;for(m in g)Object.prototype.hasOwnProperty.call(g,m)&&Object.defineProperty(e,m,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,m)});return e};fe.keys=
Object.keys;var uV=fe.keys,vV=fe.getOwnPropertyDescriptors;fe.isArray=nk;fe.isArray=nk;fe.isElement=uo;fe.isElement=uo;fe.isFunction=Vn;fe.isFunction=Vn;fe.isBoolean=Hp;fe.isBoolean=Hp;fe.isString=Gp;fe.isString=Gp;fe.isNumber=sq;fe.isNumber=sq;fe.isUndefined=Xo;fe.isUndefined=Xo;fe.isRegExp=am;fe.isRegExp=am;fe.isObject=Zo;fe.isObject=Zo;fe.isPrimitive=xl;fe.isPrimitive=xl;fe.isEmpty=lm;fe.isEmpty=lm;fe.equals=yl;fe.equals=yl;fe.keys=uV;fe.keys=uV;fe.values=cm;fe.values=cm;fe.select=Lm;fe.select=
Lm;fe.dissoc=on;fe.dissoc=on;fe.addScript=Ip;fe.addScript=Ip;fe.extend=bm;fe.extend=bm;fe.clone=Ml;fe.clone=Ml;fe.extract=yh;fe.extract=yh;fe.inspect=Tk;fe.inspect=Tk;fe.merge=nl;fe.merge=nl;fe.deepMerge=Yn;fe.deepMerge=Yn;fe.inherit=$o;fe.inherit=$o;fe.valuesInPropertyHierarchy=tq;fe.valuesInPropertyHierarchy=tq;fe.mergePropertyInHierarchy=Br;fe.mergePropertyInHierarchy=Br;fe.sortKeysWithBeforeAndAfterConstraints=Kp;fe.sortKeysWithBeforeAndAfterConstraints=Kp;fe.deepCopy=pn;fe.deepCopy=pn;fe.typeStringOf=
ap;fe.typeStringOf=ap;fe.shortPrintStringOf=Jp;fe.shortPrintStringOf=Jp;fe.isMutableType=mm;fe.isMutableType=mm;fe.safeToString=Ms;fe.safeToString=Ms;fe.asObject=vq;fe.asObject=vq;fe.newKeyIn=Zn;fe.newKeyIn=Zn;fe.getOwnPropertyDescriptors=vV;fe.getOwnPropertyDescriptors=vV;var dg=Object.freeze({__proto__:null,isArray:nk,isElement:uo,isFunction:Vn,isBoolean:Hp,isString:Gp,isNumber:sq,isUndefined:Xo,isRegExp:am,isObject:Zo,isPrimitive:xl,isEmpty:lm,equals:yl,keys:uV,values:cm,select:Lm,dissoc:on,addScript:Ip,
extend:bm,clone:Ml,extract:yh,inspect:Tk,merge:nl,deepMerge:Yn,inherit:$o,valuesInPropertyHierarchy:tq,mergePropertyInHierarchy:Br,sortKeysWithBeforeAndAfterConstraints:Kp,deepCopy:pn,typeStringOf:ap,shortPrintStringOf:Jp,isMutableType:mm,safeToString:Ms,asObject:vq,newKeyIn:Zn,getOwnPropertyDescriptors:vV});Ca("a8",dg);var Nc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");Nc.format=uq;Nc.formatFromArray=Un;Nc.indent=Mm;Nc.minIndent=bp;Nc.changeIndent=nm;Nc.quote=Nm;Nc.print=ua;Nc.printNested=
Pa;Nc.pad=cb;Nc.printTable=Ya;Nc.printTree=jc;Nc.toArray=dc;Nc.lines=tc;Nc.paragraphs=Dc;Nc.nonEmptyLines=Ad;Nc.tokens=xf;Nc.tableize=Nf;Nc.unescapeCharacterEntities=xh;Nc.toQueryParams=pg;Nc.base64EncodeUnicode=Vh;Nc.base64DecodeUnicode=mk;Nc.normalizePath=Ll;Nc.joinPath=Yo;Nc.newUUID=Wn;Nc.createDataURI=mw;Nc.hashCode=nw;Nc.md5=wq;Nc.reMatches=nu;Nc.stringMatch=Lp;Nc.peekRight=ow;Nc.peekLeft=pw;Nc.lineIndexComputer=ay;Nc.lineNumberToIndexesComputer=by;Nc.lineRanges=qw;Nc.findLineWithIndexInLineRanges=
rw;Nc.regexIndexOf=sw;Nc.regexLastIndexOf=tw;Nc.diff=uw;Nc.empty=xq;Nc.startsWithVowel=Cr;Nc.withDecimalPrecision=Dr;Nc.capitalize=Ns;Nc.camelCaseString=ou;Nc.camelize=yq;Nc.truncate=Os;Nc.truncateLeft=Nl;Nc.regExpEscape=Ps;Nc.succ=Mp;Nc.digitValue=pu;Nc.longestCommonSubstring=vw;Nc.applyChange=qu;Nc.applyChanges=cy;Nc.levenshtein=ru;Nc.inspectObject=Tk;Nc.min=Tc;Nc.last=W;Nc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,endsWith:!!String.prototype.endsWith};
Nc.pathDotRe=/\/\.\//g;Nc.pathDoubleDotRe=/\/[^\/]+\/\.\./;Nc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Nc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;Nc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";Nc.newUUIDRe=/[xy]/g;Nc.newUUIDReplacer=function(g){var e=16*Math.random()|0;return("x"==g?e:e&3|8).toString(16)};Nc.includes=Nc.features.includes?function(g,e){return g.includes(e)}:function(g,e){return-1<g.indexOf(e)};Nc.include=Nc.includes;Nc.startsWith=Nc.features.startsWith?function(g,e){return g.startsWith(e)}:
function(g,e){return 0===g.indexOf(e)};Nc.endsWith=Nc.features.endsWith?function(g,e){return g.endsWith(e)}:function(g,e){var m=g.length-e.length;return 0<=m&&g.lastIndexOf(e)===m};Nc.times=Nc.features.repeat?function(g,e){return g.repeat(e)}:function(g,e){return 1>e?"":Array(e+1).join(g)};var wV=Nc.includes,xV=Nc.include,yV=Nc.startsWith,zV=Nc.endsWith,AV=Nc.times;Nc.format=uq;Nc.format=uq;Nc.formatFromArray=Un;Nc.formatFromArray=Un;Nc.indent=Mm;Nc.indent=Mm;Nc.minIndent=bp;Nc.minIndent=bp;Nc.changeIndent=
nm;Nc.changeIndent=nm;Nc.quote=Nm;Nc.quote=Nm;Nc.print=ua;Nc.print=ua;Nc.printNested=Pa;Nc.printNested=Pa;Nc.pad=cb;Nc.pad=cb;Nc.printTable=Ya;Nc.printTable=Ya;Nc.printTree=jc;Nc.printTree=jc;Nc.toArray=dc;Nc.toArray=dc;Nc.lines=tc;Nc.lines=tc;Nc.paragraphs=Dc;Nc.paragraphs=Dc;Nc.nonEmptyLines=Ad;Nc.nonEmptyLines=Ad;Nc.tokens=xf;Nc.tokens=xf;Nc.tableize=Nf;Nc.tableize=Nf;Nc.unescapeCharacterEntities=xh;Nc.unescapeCharacterEntities=xh;Nc.base64EncodeUnicode=Vh;Nc.base64EncodeUnicode=Vh;Nc.base64DecodeUnicode=
mk;Nc.base64DecodeUnicode=mk;Nc.toQueryParams=pg;Nc.toQueryParams=pg;Nc.normalizePath=Ll;Nc.normalizePath=Ll;Nc.joinPath=Yo;Nc.joinPath=Yo;Nc.newUUID=Wn;Nc.newUUID=Wn;Nc.createDataURI=mw;Nc.createDataURI=mw;Nc.hashCode=nw;Nc.hashCode=nw;Nc.md5=wq;Nc.md5=wq;Nc.reMatches=nu;Nc.reMatches=nu;Nc.stringMatch=Lp;Nc.stringMatch=Lp;Nc.peekRight=ow;Nc.peekRight=ow;Nc.peekLeft=pw;Nc.peekLeft=pw;Nc.lineIndexComputer=ay;Nc.lineIndexComputer=ay;Nc.lineNumberToIndexesComputer=by;Nc.lineNumberToIndexesComputer=by;
Nc.findLineWithIndexInLineRanges=rw;Nc.findLineWithIndexInLineRanges=rw;Nc.regexIndexOf=sw;Nc.regexIndexOf=sw;Nc.regexLastIndexOf=tw;Nc.regexLastIndexOf=tw;Nc.lineRanges=qw;Nc.lineRanges=qw;Nc.diff=uw;Nc.diff=uw;Nc.empty=xq;Nc.empty=xq;Nc.includes=wV;Nc.includes=wV;Nc.include=xV;Nc.include=xV;Nc.startsWith=yV;Nc.startsWith=yV;Nc.startsWithVowel=Cr;Nc.startsWithVowel=Cr;Nc.endsWith=zV;Nc.endsWith=zV;Nc.withDecimalPrecision=Dr;Nc.withDecimalPrecision=Dr;Nc.capitalize=Ns;Nc.capitalize=Ns;Nc.camelCaseString=
ou;Nc.camelCaseString=ou;Nc.camelize=yq;Nc.camelize=yq;Nc.truncate=Os;Nc.truncate=Os;Nc.truncateLeft=Nl;Nc.truncateLeft=Nl;Nc.regExpEscape=Ps;Nc.regExpEscape=Ps;Nc.succ=Mp;Nc.succ=Mp;Nc.digitValue=pu;Nc.digitValue=pu;Nc.times=AV;Nc.times=AV;Nc.longestCommonSubstring=vw;Nc.longestCommonSubstring=vw;Nc.applyChange=qu;Nc.applyChange=qu;Nc.applyChanges=cy;Nc.applyChanges=cy;Nc.levenshtein=ru;Nc.levenshtein=ru;var Ih=Object.freeze({__proto__:null,format:uq,formatFromArray:Un,indent:Mm,minIndent:bp,changeIndent:nm,
quote:Nm,print:ua,printNested:Pa,pad:cb,printTable:Ya,printTree:jc,toArray:dc,lines:tc,paragraphs:Dc,nonEmptyLines:Ad,tokens:xf,tableize:Nf,unescapeCharacterEntities:xh,base64EncodeUnicode:Vh,base64DecodeUnicode:mk,toQueryParams:pg,normalizePath:Ll,joinPath:Yo,newUUID:Wn,createDataURI:mw,hashCode:nw,md5:wq,reMatches:nu,stringMatch:Lp,peekRight:ow,peekLeft:pw,lineIndexComputer:ay,lineNumberToIndexesComputer:by,findLineWithIndexInLineRanges:rw,regexIndexOf:sw,regexLastIndexOf:tw,lineRanges:qw,diff:uw,
empty:xq,includes:wV,include:xV,startsWith:yV,startsWithVowel:Cr,endsWith:zV,withDecimalPrecision:Dr,capitalize:Ns,camelCaseString:ou,camelize:yq,truncate:Os,truncateLeft:Nl,regExpEscape:Ps,succ:Mp,digitValue:pu,times:AV,longestCommonSubstring:vw,applyChange:qu,applyChanges:cy,levenshtein:ru});Ca("a7",Ih);var rg=lively.FreezerRuntime.recorderFor("lively.lang/number.js");rg.random=su;rg.randomSmallerInteger=tu;rg.humanReadableByteSize=dy;rg.average=ey;rg.averageInc=fy;rg.median=Qs;rg.between=ww;rg.clamp=
xw;rg.sort=Rs;rg.parseLength=yw;rg.precision=uu;rg.roundTo=qn;rg.detent=xo;rg.toDegrees=dm;rg.toRadians=ri;rg.backoff=zq;rg.interpolate=Np;rg.normalRandom=function(g,e){var m,c=!1;return function(h,n){if(c)return c=!1,m*n+h;do{var b=2*Math.random()-1;var d=2*Math.random()-1;var k=b*b+d*d}while(1<=k||0==k);k=Math.sqrt(-2*Math.log(k)/k);m=d*k;c=!0;return h+n*b*k}}();rg.convertLength=function(){function g(e,m){if("cm"===m)return e;if("mm"===m)return.1*e;if("in"===m)return 2.54*e;if("px"===m)return e*
g(1/96,"in");if("pt"===m)return e*g(1/72,"in");if("pc"===m)return e*g(12,"pt")}return function n(m,c,h){return c===h?m:"cm"===h?g(m,c):"cm"===c?m/g(1,h):n(n(m,c,"cm"),"cm",h)}}();var BV=rg.normalRandom,CV=rg.convertLength;rg.random=su;rg.random=su;rg.normalRandom=BV;rg.normalRandom=BV;rg.randomSmallerInteger=tu;rg.randomSmallerInteger=tu;rg.humanReadableByteSize=dy;rg.humanReadableByteSize=dy;rg.average=ey;rg.average=ey;rg.averageInc=fy;rg.averageInc=fy;rg.median=Qs;rg.median=Qs;rg.between=ww;rg.between=
ww;rg.sort=Rs;rg.sort=Rs;rg.parseLength=yw;rg.parseLength=yw;rg.convertLength=CV;rg.convertLength=CV;rg.roundTo=qn;rg.roundTo=qn;rg.detent=xo;rg.detent=xo;rg.toDegrees=dm;rg.toDegrees=dm;rg.toRadians=ri;rg.toRadians=ri;rg.backoff=zq;rg.backoff=zq;rg.interpolate=Np;rg.interpolate=Np;rg.clamp=xw;rg.clamp=xw;rg.precision=uu;rg.precision=uu;var Em=Object.freeze({__proto__:null,random:su,normalRandom:BV,randomSmallerInteger:tu,humanReadableByteSize:dy,average:ey,averageInc:fy,median:Qs,between:ww,sort:Rs,
parseLength:yw,convertLength:CV,roundTo:qn,detent:xo,toDegrees:dm,toRadians:ri,backoff:zq,interpolate:Np,clamp:xw,precision:uu});Ca("at",Em);var ek=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");ek.all=Ss;ek.allOwnPropertiesOrFunctions=zw;ek.own=Ts;ek.forEachOwn=vu;ek.nameFor=Er;ek.values=Us;ek.ownValues=Aw;ek.any=Bw;ek.allProperties=Vs;ek.hash=Op;ek.all=Ss;ek.all=Ss;ek.allOwnPropertiesOrFunctions=zw;ek.allOwnPropertiesOrFunctions=zw;ek.own=Ts;ek.own=Ts;ek.forEachOwn=vu;ek.forEachOwn=
vu;ek.nameFor=Er;ek.nameFor=Er;ek.values=Us;ek.values=Us;ek.ownValues=Aw;ek.ownValues=Aw;ek.any=Bw;ek.any=Bw;ek.allProperties=Vs;ek.allProperties=Vs;ek.hash=Op;ek.hash=Op;var ir=Object.freeze({__proto__:null,all:Ss,allOwnPropertiesOrFunctions:zw,own:Ts,forEachOwn:vu,nameFor:Er,values:Us,ownValues:Aw,any:Bw,allProperties:Vs,hash:Op});Ca("a$",ir);var Pp=lively.FreezerRuntime.recorderFor("lively.lang/date.js");Pp.format=Aq;Pp.equals=Ws;Pp.relativeTo=wu;Pp.dateFormat=function(){var g=function(){var e=
/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,m=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,h=function(n,b){n=String(n);for(b=b||2;n.length<b;)n="0"+n;return n};return function(n,b,d){var k=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");b=String(k.masks[b]||
b||k.masks.default);"UTC:"==b.slice(0,4)&&(b=b.slice(4),d=!0);var a=d?"getUTC":"get",f=n[a+"Date"](),l=n[a+"Day"](),r=n[a+"Month"](),v=n[a+"FullYear"](),y=n[a+"Hours"](),A=n[a+"Minutes"](),E=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var F=d?0:n.getTimezoneOffset(),H={d:f,dd:h(f),ddd:k.i18n.dayNames[l],dddd:k.i18n.dayNames[l+7],m:r+1,mm:h(r+1),mmm:k.i18n.monthNames[r],mmmm:k.i18n.monthNames[r+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:h(y%12||12),H:y,HH:h(y),M:A,MM:h(A),s:E,ss:h(E),l:h(a,3),L:h(99<
a?Math.round(a/10):a),t:12>y?"a":"p",tt:12>y?"am":"pm",T:12>y?"A":"P",TT:12>y?"AM":"PM",Z:d?"UTC":(String(n).match(m)||[""]).pop().replace(c,""),o:(0<F?"-":"+")+h(100*Math.floor(Math.abs(F)/60)+Math.abs(F)%60,4),S:["th","st","nd","rd"][3<f%10?0:(10!=f%100-f%10)*f%10]};return b.replace(e,function(J){return J in H?H[J]:J.slice(1,J.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",
mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return g}();var DV=Pp.dateFormat;Pp.format=Aq;Pp.format=
Aq;Pp.equals=Ws;Pp.equals=Ws;Pp.relativeTo=wu;Pp.relativeTo=wu;Pp.dateFormat=DV;Pp.dateFormat=DV;var Gv=Object.freeze({__proto__:null,format:Aq,equals:Ws,relativeTo:wu,dateFormat:DV});Ca("a5",Gv);var wg=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");wg.promise=Hg;wg.delay=Cw;wg.delayReject=xu;wg.timeout=yu;wg.timeToRun=zu;wg.clearPendingWaitFors=function(){Object.kets(wg.waitForClosures).forEach(function(g){delete wg.waitForClosures[g];clearInterval(g)})};wg.waitFor=gy;wg.deferred=Au;
wg.convertCallbackFun=Dw;wg.convertCallbackFunWithManyArgs=Qp;wg._chainResolveNext=yA;wg.chain=hy;wg.promise_finally=Bq;wg.parallel=Ew;wg.newUUID=Wn;wg.pushIfNotIncluded=$d;wg.removeAt=sc;wg.waitForClosures={};Object.assign(wg.promise,{delay:wg.delay,delayReject:wg.delayReject,timeout:wg.timeout,waitFor:wg.waitFor,deferred:wg.deferred,convertCallbackFun:wg.convertCallbackFun,convertCallbackFunWithManyArgs:wg.convertCallbackFunWithManyArgs,chain:wg.chain,finally:wg.promise_finally,parallel:wg.parallel});
wg.promise=Hg;wg.promise=Hg;wg.delay=Cw;wg.delay=Cw;wg.delayReject=xu;wg.delayReject=xu;wg.timeout=yu;wg.timeout=yu;wg.timeToRun=zu;wg.timeToRun=zu;wg.waitFor=gy;wg.waitFor=gy;wg.deferred=Au;wg.deferred=Au;wg.convertCallbackFun=Dw;wg.convertCallbackFun=Dw;wg.convertCallbackFunWithManyArgs=Qp;wg.convertCallbackFunWithManyArgs=Qp;wg.chain=hy;wg.chain=hy;wg.finally=Bq;wg.promise_finally=Bq;wg.parallel=Ew;wg.parallel=Ew;wg.default=Hg;var Hv=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");Hv.Path=
ci;Hv.inspect=Tk;Object.assign(Hv.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,e){return Hv.Path(this.parts().slice(g,e))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:Hv.Path(g);var e=this.parts();g=g.parts();for(var m=0;m<e.length;m++)if(e[m]!=g[m])return!1;return!0},
relativePathTo:function(g){g=Hv.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var e=0;e<this._parts.length-1;e++){var m=this._parts[e];if(g.hasOwnProperty(m))g=g[m];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,e,m){if(this.isRoot())return m(null,null);for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(!g.hasOwnProperty(h)||"object"!==typeof g[h]&&"function"!==
typeof g[h])if(e)g=g[h]={};else return m(null,h);else g=g[h]}return m(g,this._parts[this._parts.length-1])},set:function(g,e,m){return this.withParentAndKeyDo(g,m,function(c,h){return c?c[h]=e:void 0})},defineProperty:function(g,e,m){return this.withParentAndKeyDo(g,m,function(c,h){return c?Object.defineProperty(c,h,e):void 0})},get:function(g,e){var m=this;return(e?this._parts.slice(0,e):this._parts).reduce(function(c,h){return c?m._mapper?m._mapper(h,c[h]):c[h]:c},g)},concat:function(g,e){return Hv.Path(this.parts().concat(Hv.Path(g,
e).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+Hv.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var e=g.target,m=this.get(e,-1),c=this.parts().slice(-1)[0],h="propertyWatcher$"+c,n=m&&m.hasOwnProperty(h),b=g.uninstall,d=g.haltWhenChanged,k=g.showStack,a=m.__lookupGetter__(c),f=m.__lookupSetter__(c);e&&c&&m&&(b?n&&(delete m[c],m[c]=m[h],delete m[h]):n||(a||f?console.log(m+'["'+c+'"] is a getter/setter, watching not support'):
(m[h]=m[c],m.__defineSetter__(c,function(l){var r=m[h];if(g.onSet)g.onSet(l,r);r=m+"."+c+" changed: "+r+" -> "+l;k&&(r+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(r);if(d)debugger;return m[h]=l}),m.__defineGetter__(c,function(){if(g.onGet)g.onGet(m[h]);return m[h]}),console.log("Watcher for "+m+"."+c+" installed"))))}},debugFunctionWrapper:function(g){var e=g.target,m=this.get(e,-1),c=this.parts().slice(-1)[0],h=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
n=m&&c&&m[c],b=n&&n.isDebugFunctionWrapper;e&&c&&n&&m&&(g.uninstall?b&&(m[c]=m[c].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+m+"."+c)):b?console.log("debugFunctionWrapper for "+m+"."+c+" already installed"):(g=m[c]=n.wrap(function(d){var k=Array.from(arguments);if(h)debugger;return k.shift().apply(m,k)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=n,console.log("debugFunctionWrapper for "+m+"."+c+" installed")))}});Hv.default=ci;var uj=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
uj.clone=Bu;uj.without=Fw;uj.hull=iy;uj.subgraphReachableBy=Cu;uj.invert=jy;uj.sortByReference=Xs;uj.reduce=Gw;uj.random=cp;uj.range=lc;uj.shuffle=mc;uj.withoutAll=ke;uj.flatten=Gc;uj.uniq=cc;uj.values=cm;uj.clone=Bu;uj.clone=Bu;uj.without=Fw;uj.without=Fw;uj.hull=iy;uj.hull=iy;uj.subgraphReachableBy=Cu;uj.subgraphReachableBy=Cu;uj.invert=jy;uj.invert=jy;uj.sortByReference=Xs;uj.sortByReference=Xs;uj.reduce=Gw;uj.reduce=Gw;uj.random=cp;uj.random=cp;var tx=Object.freeze({__proto__:null,clone:Bu,without:Fw,
hull:iy,subgraphReachableBy:Cu,invert:jy,sortByReference:Xs,reduce:Gw,random:cp}),ki=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");ki.isInterval=ky;ki.sort=Cq;ki.compare=Dq;ki.coalesce=yo;ki.coalesceOverlapping=Hw;ki.mergeOverlapping=Om;ki.intervalsInRangeDo=Du;ki.intervalsInbetween=Eu;ki.mapToMatchingIndexes=Eq;ki.benchmark=function(){function g(e,m,c){return e.name+" "+ki.timeToRunN(function(){return e.apply(null,m,1E5)},c)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(ki.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(ki.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(ki.mapToMatchingIndexes,[ki.range(0,1E3).map(function(e){return[e,e+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};ki.range=lc;ki.timeToRunN=xc;ki.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;ki.isInterval=ky;ki.isInterval=ky;ki.sort=Cq;ki.sort=Cq;ki.compare=Dq;ki.compare=Dq;ki.coalesce=yo;ki.coalesce=
yo;ki.coalesceOverlapping=Hw;ki.coalesceOverlapping=Hw;ki.mergeOverlapping=Om;ki.mergeOverlapping=Om;ki.intervalsInRangeDo=Du;ki.intervalsInRangeDo=Du;ki.intervalsInbetween=Eu;ki.intervalsInbetween=Eu;ki.mapToMatchingIndexes=Eq;ki.mapToMatchingIndexes=Eq;var gN=Object.freeze({__proto__:null,isInterval:ky,sort:Cq,compare:Dq,coalesce:yo,coalesceOverlapping:Hw,mergeOverlapping:Om,intervalsInRangeDo:Du,intervalsInbetween:Eu,mapToMatchingIndexes:Eq}),Ao=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
Ao.create=Ys;Ao.toArray=dl;Ao.originalToProjectedIndex=zo;Ao.projectedToOriginalIndex=dp;Ao.transformToIncludeIndex=Iw;Ao.create=Ys;Ao.create=Ys;Ao.toArray=dl;Ao.toArray=dl;Ao.originalToProjectedIndex=zo;Ao.originalToProjectedIndex=zo;Ao.projectedToOriginalIndex=dp;Ao.projectedToOriginalIndex=dp;Ao.transformToIncludeIndex=Iw;Ao.transformToIncludeIndex=Iw;var hN=Object.freeze({__proto__:null,create:Ys,toArray:dl,originalToProjectedIndex:zo,projectedToOriginalIndex:dp,transformToIncludeIndex:Iw}),zh=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");zh.get=ca;zh.set=ya;zh.getRow=hb;zh.setRow=Hb;zh.getCol=Vb;zh.setCol=Qc;zh.create=Kd;zh.mapCreate=Ee;zh.forEach=df;zh.map=Sf;zh.toObjects=Mg;zh.tableFromObjects=zg;zh.benchmark=function(){var g=[],e=zh.create(1E3,200,1);var m=zh.timeToRunN(function(){zh.forEach(e,function(h){})},10);g.push("forEach: "+m.toFixed(2)+"ms");m=zh.timeToRunN(function(){zh.map(e,function(h,n,b){return n+b+Math.round(100*Math.random())})},10);g.push("map: "+m.toFixed(2)+
"ms");var c=zh.create(1E3,2E3);m=zh.timeToRunN(function(){c=Array(1E3);for(var h=0;1E3>h;h++)c[h]=Array(2E3);zh.forEach(e,function(n,b,d){c[b][d]=b+d+Math.round(100*Math.random())})},10);g.push("map with forEach: "+m+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};zh.arrayWithN=bc;zh.timeToRunN=xc;zh.get=ca;zh.get=ca;zh.set=ya;zh.set=ya;zh.getRow=hb;zh.getRow=hb;zh.setRow=Hb;zh.setRow=Hb;zh.getCol=Vb;zh.getCol=Vb;zh.setCol=Qc;zh.setCol=
Qc;zh.create=Kd;zh.create=Kd;zh.mapCreate=Ee;zh.mapCreate=Ee;zh.forEach=df;zh.forEach=df;zh.map=Sf;zh.map=Sf;zh.toObjects=Mg;zh.toObjects=Mg;zh.tableFromObjects=zg;zh.tableFromObjects=zg;var HE=Object.freeze({__proto__:null,get:ca,set:ya,getRow:hb,setRow:Hb,getCol:Vb,setCol:Qc,create:Kd,mapCreate:Ee,forEach:df,map:Sf,toObjects:Mg,tableFromObjects:zg}),Uk=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");Uk.prewalk=nf;Uk.postwalk=li;Uk.find=$i;Uk.filter=Ii;Uk.map=Vk;Uk.mapTree=Fq;Uk.flatten=
Gc;Uk.detect=Uk.find;var EV=Uk.detect;Uk.prewalk=nf;Uk.prewalk=nf;Uk.postwalk=li;Uk.postwalk=li;Uk.find=$i;Uk.find=$i;Uk.detect=EV;Uk.detect=EV;Uk.filter=Ii;Uk.filter=Ii;Uk.map=Vk;Uk.map=Vk;Uk.mapTree=Fq;Uk.mapTree=Fq;var ux=Object.freeze({__proto__:null,prewalk:nf,postwalk:li,find:$i,detect:EV,filter:Ii,map:Vk,mapTree:Fq});Ca("a4",ux);var Iv=lively.FreezerRuntime.recorderFor("lively.lang/events.js");Iv.isNode="undefined"!==typeof Iv.process&&Iv.process.versions&&Iv.process.versions.node;Iv.makeEmitter=
Iv.isNode?function(g,e){if(g.on&&g.removeListener)return g;var m="undefined"!==typeof System?System._nodeRequire("events"):Iv.require("events");Object.assign(g,m.EventEmitter.prototype);m.EventEmitter.call(g);e&&e.maxListenerLimit&&g.setMaxListeners(e.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(e,m){m&&(g.listeners[e]||(g.listeners[e]=[]),g.listeners[e].push(m))};g.once=function(e,m){function c(){g.removeListener(e,c);m.apply(this,arguments)}
if(m)g.on(e,c)};g.removeListener=function(e,m){g.listeners[e]&&(g.listeners[e]=g.listeners[e].filter(function(c){return c!==m}))};g.removeAllListeners=function(e){g.listeners[e]&&(g.listeners[e]=[])};g.emit=function(){var e=Array.prototype.slice.call(arguments),m=e.shift();(m=g.listeners[m])&&m.length&&m.forEach(function(c){try{c.apply(null,e)}catch(h){console.error("Error in event handler: %s",h.stack||String(h))}})};return g};var BH=Iv.makeEmitter;Iv.makeEmitter=BH;Iv.makeEmitter=BH;var vz=Object.freeze({__proto__:null,
makeEmitter:BH}),Ol=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");Ol.create=Ng;Ol.remove=wd;Ol.pluck=uc;Ol.makeEmitter=BH;Ol.newUUID=Wn;Ol.OFFLINE="offline";Ol.ONLINE="online";Ol.CONNECTING="connecting";Ol.create=Ng;Ol.create=Ng;var iN=Object.freeze({__proto__:null,create:Ng}),Ah=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");Ah.fork=Kg;Ah.create=ep;Ah.makeEmitter=BH;Ah.newUUID=Wn;Ah.waitFor=Al;Ah.messengerCreate=Ng;Ah.Closure=Sj;Ah.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;Ah.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(e){postMessage(e)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var e={};["log","error","warn"].forEach(function(m){e[m]=
function(){for(var c=arguments[0],h=1;h<arguments.length;h++)c=c.replace("%s",arguments[h]);remoteWorker.send({type:m,message:["[",m.toUpperCase(),"] ",c].join("")})}});return e}()},initOnMessageHandler:function(g){function e(m){m=m.data.data?m.data:m;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(m);else"close"==m.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",e);else remoteWorker.onmessage=e},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(e,m,c){try{var h=eval("("+e+")")}catch(d){c(Error("Cannot create function from string: "+d.stack||d));return}e=h.length===m.length+1;var n=lively.lang.fun.once(function(d,k){remoteWorker.isBusy=!1;c(d,k)});remoteWorker.isBusy=!0;e&&m.push(n);try{var b=h.apply(remoteWorker,m.concat([n]))}catch(d){n(d,null);return}e||n(null,b)};remoteWorker.httpRequest=function(e){if(e.url){var m=new XMLHttpRequest,c=e.method||"GET";m.onreadystatechange=function(){4===m.readyState&&e.done&&e.done(m)};m.open(c,
e.url);m.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(e){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(e):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},e)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(e,m){try{var c=eval(e.data.expr)}catch(h){c=h.stack||h}m.answer(e,{result:String(c)})},run:function(e,m){var c=e.data.func,h=e.data.args;c?remoteWorker.callStringifiedFunction(c,h,function(n,b){m.answer(e,{error:n?String(n):null,result:b})}):m.answer(e,{error:"no funcString"})},close:function(e,m){m.answer(e,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(e,m){remoteWorker.send(e);m()},listen:function(e){e()},close:function(e){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Ah.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var e=document.querySelector('script[src$="worker.js"]');if(!e)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=e.src.replace(/worker.js$/,"")}e=String(function(){self.onmessage=
function(m){if("setup"!==m.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(m.data));m=m.data.options||{};initBrowserGlobals(m);loadDependenciesBrowser(m);initOnMessageHandler(m);initWorkerInterface(m);initWorkerMessenger(m);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Ah.WorkerSetup.initBrowserGlobals,Ah.WorkerSetup.loadDependenciesBrowser,Ah.WorkerSetup.initOnMessageHandler,Ah.WorkerSetup.initWorkerInterface,
Ah.WorkerSetup.initWorkerMessenger].join("\n"));e="("+Ah.Closure.fromSource(e).getFuncSource()+")();";e=new Worker(function(m){try{var c=new Blob([m],{type:"text/javascript"})}catch(h){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,c=new BlobBuilder,c.append(m),c=c.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(c)}(e));(function(m,c){Ah.makeEmitter(c);m.scriptsToLoad||(m.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return m.libLocation+
n}));var h=Object.keys(m).reduce(function(n,b){"function"!==typeof m[b]&&(n[b]=m[b]);return n},{});c.onmessage=function(n){void 0!==n.data.workerReady?(c.ready=!!n.data.workerReady,c.ready?c.emit("ready"):c.emit("close")):c.emit("message",n.data)};c.errors=[];c.onerror=function(n){console.error(n);c.errors.push(n);c.emit("error",n)};c.postMessage({action:"setup",options:h})})(g,e);return e}};Ah.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var e,m=Ah.makeEmitter({ready:!1,
errors:[],postMessage:function(c){e?m.ready?e.send(c):m.emit("error",Error("nodejs worker process not ready or already closed")):m.emit("error",Error("nodejs worker process not yet created"))}});Ah.NodejsWorker.startWorker(g,function(c,h){c?(m.ready=!1,m.emit("error",c)):(e=h,e.on("message",function(n){Ah.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);m.emit("message",n)}),e.on("close",function(){console.log("[WORKER PARENT] worker closed");m.emit("close")}),e.on("error",function(n){console.log("[WORKER PARENT] error ",
n);m.errors.push(n);m.emit("error",n)}),m.ready=!0,m.emit("ready"))});return m},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(e){if("setup"!==e.action)throw Error("expected setup to be first message but got "+JSON.stringify(e.data));g.removeAllListeners("message");e=e.data.options||{};console.log("[WORKER] running setup with options",e);loadDependenciesNodejs(e);initOnMessageHandler(e);initWorkerInterface(e);initWorkerMessenger(e);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,e,m){var c=require("path"),h=require("os"),n=require("fs");h=c.join(h.tmpDir(),"lively-nodejs-workers/");var b=c.join(h,"nodejs-worker-init.js");Ah.NodejsWorker.initCodeFileCreated?n.exists(b,function(d){d?m(null,b):Ah.NodejsWorker.createWorkerCodeFile(g,b,e,m)}):Ah.NodejsWorker.createWorkerCodeFile(g,b,e,m)},createWorkerCodeFile:function(g,e,m,c){g=require("path");var h=require("fs"),n=require("child_process").exec;n("mkdir -p "+g.dirname(e),
function(b,d,k){b?c(Error(["[WORKER PARENT] Could not create worker temp dir:",d,k].join("\n"))):h.writeFile(e,m,function(a){Ah.NodejsWorker.debug&&console.log("worker code file %s created",e);Ah.NodejsWorker.initCodeFileCreated=!0;c(a,e)})})},startWorker:function(g,e){var m=require("util"),c=require("child_process").fork,h=String(Ah.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Ah.WorkerSetup.loadDependenciesNodejs,Ah.WorkerSetup.initOnMessageHandler,Ah.WorkerSetup.initWorkerInterface,
Ah.WorkerSetup.initWorkerMessenger].join("\n"));m=m.format("(%s)();\n",h);Ah.NodejsWorker.ensureInitCodeFile(g,m,function(n,b){if(n)return e(n);var d=c(b,{});Ah.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(k){"pong"===k.action?console.log("[WORKER pong] ",k):"log"===k.action&&console.log("[Message from WORKER] ",k.data)});d.once("message",function(k){Ah.NodejsWorker.debug&&console.log("worker setup done");e(null,d,k)});d.on("close",function(){Ah.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
d.send({action:"setup",data:{options:g}});global.WORKER=d})}};Ah.fork=Kg;Ah.fork=Kg;Ah.create=ep;Ah.create=ep;var jN=Object.freeze({__proto__:null,fork:Kg,create:ep}),Jd=lively.FreezerRuntime.recorderFor("lively.lang/index.js");Jd.createLivelyLangObject=function(){return{chain:Jd.chain,noConflict:Jd.noConflict,installGlobals:Jd.installGlobals,uninstallGlobals:Jd.uninstallGlobals,globalInterfaceSpec:Jd.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};Jd.globalInstall=Zs;Jd.chain=
Gq;Jd.createChain=function(g,e){return Object.keys(g).reduce(function(m,c){m[c]=function(){var h=Array.prototype.slice.call(arguments);h=g[c].apply(null,[e].concat(h));return Jd.chain(h)};return m},{value:function(){return e}})};Jd.noConflict=Jw;Jd.installGlobals=rn;Jd.installProperty=function(g,e){if(!g.isIn(Jd.livelyLang))throw e=Error("property not provided by lively.lang: "+g),console.error(e.stack||e),e;g=g.get(Jd.livelyLang);if("function"===typeof g&&"prototype"===e.slice(-2,-1).toString()){var m=
g;g=function(){var c=Array.prototype.slice.call(arguments);c.unshift(this);return m.apply(null,c)};g.toString=function(){return m.toString()}}e.set(Jd.GLOBAL,g,!0)};Jd.uninstallGlobals=ly;Jd.string=Ih;Jd.num=Em;Jd.fun=gn;Jd.Closure=Sj;Jd.arr=Lf;Jd.obj=dg;Jd.properties=ir;Jd.date=Gv;Jd.promise=Hg;Jd.Path=ci;Jd.graph=tx;Jd.interval=gN;Jd.arrayProjection=hN;Jd.Group=mo;Jd.grid=HE;Jd.tree=ux;Jd.events=vz;Jd.messenger=iN;Jd.worker=jN;Jd.worker=jN;Jd.worker=jN;Jd.messenger=iN;Jd.messenger=iN;Jd.events=
vz;Jd.events=vz;Jd.tree=ux;Jd.tree=ux;Jd.grid=HE;Jd.grid=HE;Jd.arrayProjection=hN;Jd.arrayProjection=hN;Jd.interval=gN;Jd.interval=gN;Jd.graph=tx;Jd.graph=tx;Jd.date=Gv;Jd.date=Gv;Jd.properties=ir;Jd.properties=ir;Jd.obj=dg;Jd.obj=dg;Jd.arr=Lf;Jd.arr=Lf;Jd.fun=gn;Jd.fun=gn;Jd.num=Em;Jd.num=Em;Jd.string=Ih;Jd.string=Ih;Jd.Closure=Sj;Jd.Closure=Sj;Jd.promise=Hg;Jd.promise=Hg;Jd.Path=ci;Jd.Path=ci;Jd.Group=mo;Jd.Group=mo;Jd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;Jd.isNode="undefined"!==typeof Jd.process&&Jd.process.env&&"function"===typeof Jd.process.exit;Jd.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var kN=Jd.createLivelyLangObject();Jd.livelyLang=kN;Jd.livelyLang=kN;Jd.livelyLang=kN;Jd.globalInstall=
Zs;Jd.globalInstall=Zs;Jd.chain=Gq;Jd.chain=Gq;Jd.noConflict=Jw;Jd.noConflict=Jw;Jd.installGlobals=rn;Jd.installGlobals=rn;Jd.uninstallGlobals=ly;Jd.uninstallGlobals=ly;var k8=Object.freeze({__proto__:null,worker:jN,messenger:iN,events:vz,tree:ux,grid:HE,arrayProjection:hN,interval:gN,graph:tx,date:Gv,properties:ir,obj:dg,arr:Lf,fun:gn,num:Em,string:Ih,Closure:Sj,promise:Hg,Path:ci,Group:mo,livelyLang:kN,globalInstall:Zs,chain:Gq,noConflict:Jw,installGlobals:rn,uninstallGlobals:ly}),l8=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),
ue=function(){};ue.prototype.accept=function(g,e,m){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+m.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+m.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,e,m);case "SourceLocation":return this.visitSourceLocation(g,e,m);case "Position":return this.visitPosition(g,e,m);case "Program":return this.visitProgram(g,e,m);case "Function":return this.visitFunction(g,
e,m);case "Statement":return this.visitStatement(g,e,m);case "Directive":return this.visitDirective(g,e,m);case "SwitchCase":return this.visitSwitchCase(g,e,m);case "CatchClause":return this.visitCatchClause(g,e,m);case "VariableDeclarator":return this.visitVariableDeclarator(g,e,m);case "Expression":return this.visitExpression(g,e,m);case "Property":return this.visitProperty(g,e,m);case "Pattern":return this.visitPattern(g,e,m);case "Super":return this.visitSuper(g,e,m);case "SpreadElement":return this.visitSpreadElement(g,
e,m);case "TemplateElement":return this.visitTemplateElement(g,e,m);case "Class":return this.visitClass(g,e,m);case "ClassBody":return this.visitClassBody(g,e,m);case "MethodDefinition":return this.visitMethodDefinition(g,e,m);case "ModuleDeclaration":return this.visitModuleDeclaration(g,e,m);case "ModuleSpecifier":return this.visitModuleSpecifier(g,e,m);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,e,m);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,e,m);
case "JSXSpreadChild":return this.visitJSXSpreadChild(g,e,m);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,e,m);case "JSXAttribute":return this.visitJSXAttribute(g,e,m);case "JSXText":return this.visitJSXText(g,e,m);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,e,m);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,e,m);case "Identifier":return this.visitIdentifier(g,e,m);case "Literal":return this.visitLiteral(g,e,m);case "ExpressionStatement":return this.visitExpressionStatement(g,
e,m);case "BlockStatement":return this.visitBlockStatement(g,e,m);case "EmptyStatement":return this.visitEmptyStatement(g,e,m);case "DebuggerStatement":return this.visitDebuggerStatement(g,e,m);case "WithStatement":return this.visitWithStatement(g,e,m);case "ReturnStatement":return this.visitReturnStatement(g,e,m);case "LabeledStatement":return this.visitLabeledStatement(g,e,m);case "BreakStatement":return this.visitBreakStatement(g,e,m);case "ContinueStatement":return this.visitContinueStatement(g,
e,m);case "IfStatement":return this.visitIfStatement(g,e,m);case "SwitchStatement":return this.visitSwitchStatement(g,e,m);case "ThrowStatement":return this.visitThrowStatement(g,e,m);case "TryStatement":return this.visitTryStatement(g,e,m);case "WhileStatement":return this.visitWhileStatement(g,e,m);case "DoWhileStatement":return this.visitDoWhileStatement(g,e,m);case "ForStatement":return this.visitForStatement(g,e,m);case "ForInStatement":return this.visitForInStatement(g,e,m);case "Declaration":return this.visitDeclaration(g,
e,m);case "ThisExpression":return this.visitThisExpression(g,e,m);case "ArrayExpression":return this.visitArrayExpression(g,e,m);case "ObjectExpression":return this.visitObjectExpression(g,e,m);case "FunctionExpression":return this.visitFunctionExpression(g,e,m);case "UnaryExpression":return this.visitUnaryExpression(g,e,m);case "UpdateExpression":return this.visitUpdateExpression(g,e,m);case "BinaryExpression":return this.visitBinaryExpression(g,e,m);case "AssignmentExpression":return this.visitAssignmentExpression(g,
e,m);case "LogicalExpression":return this.visitLogicalExpression(g,e,m);case "MemberExpression":return this.visitMemberExpression(g,e,m);case "ConditionalExpression":return this.visitConditionalExpression(g,e,m);case "CallExpression":return this.visitCallExpression(g,e,m);case "NewExpression":return this.visitNewExpression(g,e,m);case "SequenceExpression":return this.visitSequenceExpression(g,e,m);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,e,m);case "YieldExpression":return this.visitYieldExpression(g,
e,m);case "TemplateLiteral":return this.visitTemplateLiteral(g,e,m);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,e,m);case "AssignmentProperty":return this.visitAssignmentProperty(g,e,m);case "ObjectPattern":return this.visitObjectPattern(g,e,m);case "ArrayPattern":return this.visitArrayPattern(g,e,m);case "RestElement":return this.visitRestElement(g,e,m);case "AssignmentPattern":return this.visitAssignmentPattern(g,e,m);case "ClassExpression":return this.visitClassExpression(g,
e,m);case "MetaProperty":return this.visitMetaProperty(g,e,m);case "ImportDeclaration":return this.visitImportDeclaration(g,e,m);case "ImportSpecifier":return this.visitImportSpecifier(g,e,m);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,e,m);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,e,m);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,e,m);case "ExportSpecifier":return this.visitExportSpecifier(g,e,m);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,
e,m);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,e,m);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,e,m);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,e,m);case "AwaitExpression":return this.visitAwaitExpression(g,e,m);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,e,m);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,e,m);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,
e,m);case "JSXClosingElement":return this.visitJSXClosingElement(g,e,m);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,e,m);case "JSXElement":return this.visitJSXElement(g,e,m);case "JSXFragment":return this.visitJSXFragment(g,e,m);case "ImportExpression":return this.visitImportExpression(g,e,m);case "RegExpLiteral":return this.visitRegExpLiteral(g,e,m);case "FunctionBody":return this.visitFunctionBody(g,e,m);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,e,m);
case "VariableDeclaration":return this.visitVariableDeclaration(g,e,m);case "ForOfStatement":return this.visitForOfStatement(g,e,m);case "ClassDeclaration":return this.visitClassDeclaration(g,e,m);case "JSXIdentifier":return this.visitJSXIdentifier(g,e,m);case "BigIntLiteral":return this.visitBigIntLiteral(g,e,m)}throw Error("No visit function in AST visitor Visitor for:\n  "+m.join(".")+"\n  "+JSON.stringify(g));};ue.prototype.visitNode=function(g,e,m){return g};ue.prototype.visitSourceLocation=
function(g,e,m){g.start=this.accept(g.start,e,m.concat(["start"]));g.end=this.accept(g.end,e,m.concat(["end"]));return g};ue.prototype.visitPosition=function(g,e,m){return g};ue.prototype.visitProgram=function(g,e,m){for(var c=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,e,m.concat(["body",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.body=c;return g};ue.prototype.visitFunction=function(g,e,m){g.id&&(g.id=this.accept(g.id,e,m.concat(["id"])));for(var c=[],h=0;h<g.params.length;h++){var n=
g.params[h];n=n?this.accept(n,e,m.concat(["params",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.params=c;g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitStatement=function(g,e,m){return g};ue.prototype.visitDirective=function(g,e,m){g.expression=this.accept(g.expression,e,m.concat(["expression"]));return g};ue.prototype.visitSwitchCase=function(g,e,m){g.test&&(g.test=this.accept(g.test,e,m.concat(["test"])));for(var c=[],h=0;h<g.consequent.length;h++){var n=g.consequent[h];
n=n?this.accept(n,e,m.concat(["consequent",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.consequent=c;return g};ue.prototype.visitCatchClause=function(g,e,m){g.param&&(g.param=this.accept(g.param,e,m.concat(["param"])));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitVariableDeclarator=function(g,e,m){g.id=this.accept(g.id,e,m.concat(["id"]));g.init&&(g.init=this.accept(g.init,e,m.concat(["init"])));return g};ue.prototype.visitExpression=function(g,e,m){return g};
ue.prototype.visitProperty=function(g,e,m){g.key=this.accept(g.key,e,m.concat(["key"]));g.value=this.accept(g.value,e,m.concat(["value"]));return g};ue.prototype.visitPattern=function(g,e,m){return g};ue.prototype.visitSuper=function(g,e,m){return g};ue.prototype.visitSpreadElement=function(g,e,m){g.argument=this.accept(g.argument,e,m.concat(["argument"]));return g};ue.prototype.visitTemplateElement=function(g,e,m){return g};ue.prototype.visitClass=function(g,e,m){g.id&&(g.id=this.accept(g.id,e,m.concat(["id"])));
g.superClass&&(g.superClass=this.accept(g.superClass,e,m.concat(["superClass"])));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitClassBody=function(g,e,m){for(var c=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,e,m.concat(["body",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.body=c;return g};ue.prototype.visitMethodDefinition=function(g,e,m){g.key=this.accept(g.key,e,m.concat(["key"]));g.value=this.accept(g.value,e,m.concat(["value"]));return g};
ue.prototype.visitModuleDeclaration=function(g,e,m){return g};ue.prototype.visitModuleSpecifier=function(g,e,m){g.local=this.accept(g.local,e,m.concat(["local"]));return g};ue.prototype.visitJSXEmptyExpression=function(g,e,m){return g};ue.prototype.visitJSXExpressionContainer=function(g,e,m){g.expression=this.accept(g.expression,e,m.concat(["expression"]));return g};ue.prototype.visitJSXSpreadChild=function(g,e,m){g.expression=this.accept(g.expression,e,m.concat(["expression"]));return g};ue.prototype.visitJSXBoundaryElement=
function(g,e,m){g.name=this.accept(g.name,e,m.concat(["name"]));return g};ue.prototype.visitJSXAttribute=function(g,e,m){g.name=this.accept(g.name,e,m.concat(["name"]));g.value&&(g.value=this.accept(g.value,e,m.concat(["value"])));return g};ue.prototype.visitJSXText=function(g,e,m){return g};ue.prototype.visitJSXOpeningFragment=function(g,e,m){return g};ue.prototype.visitJSXClosingFragment=function(g,e,m){return g};ue.prototype.visitIdentifier=function(g,e,m){return g};ue.prototype.visitLiteral=function(g,
e,m){return g};ue.prototype.visitExpressionStatement=function(g,e,m){g.expression=this.accept(g.expression,e,m.concat(["expression"]));return g};ue.prototype.visitBlockStatement=function(g,e,m){for(var c=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,e,m.concat(["body",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.body=c;return g};ue.prototype.visitEmptyStatement=function(g,e,m){return g};ue.prototype.visitDebuggerStatement=function(g,e,m){return g};ue.prototype.visitWithStatement=
function(g,e,m){g.object=this.accept(g.object,e,m.concat(["object"]));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitReturnStatement=function(g,e,m){g.argument&&(g.argument=this.accept(g.argument,e,m.concat(["argument"])));return g};ue.prototype.visitLabeledStatement=function(g,e,m){g.label=this.accept(g.label,e,m.concat(["label"]));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitBreakStatement=function(g,e,m){g.label&&(g.label=this.accept(g.label,
e,m.concat(["label"])));return g};ue.prototype.visitContinueStatement=function(g,e,m){g.label&&(g.label=this.accept(g.label,e,m.concat(["label"])));return g};ue.prototype.visitIfStatement=function(g,e,m){g.test=this.accept(g.test,e,m.concat(["test"]));g.consequent=this.accept(g.consequent,e,m.concat(["consequent"]));g.alternate&&(g.alternate=this.accept(g.alternate,e,m.concat(["alternate"])));return g};ue.prototype.visitSwitchStatement=function(g,e,m){g.discriminant=this.accept(g.discriminant,e,m.concat(["discriminant"]));
for(var c=[],h=0;h<g.cases.length;h++){var n=g.cases[h];n=n?this.accept(n,e,m.concat(["cases",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.cases=c;return g};ue.prototype.visitThrowStatement=function(g,e,m){g.argument=this.accept(g.argument,e,m.concat(["argument"]));return g};ue.prototype.visitTryStatement=function(g,e,m){g.block=this.accept(g.block,e,m.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,e,m.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,
e,m.concat(["finalizer"])));return g};ue.prototype.visitWhileStatement=function(g,e,m){g.test=this.accept(g.test,e,m.concat(["test"]));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitDoWhileStatement=function(g,e,m){g.body=this.accept(g.body,e,m.concat(["body"]));g.test=this.accept(g.test,e,m.concat(["test"]));return g};ue.prototype.visitForStatement=function(g,e,m){g.init&&(g.init=this.accept(g.init,e,m.concat(["init"])));g.test&&(g.test=this.accept(g.test,e,m.concat(["test"])));
g.update&&(g.update=this.accept(g.update,e,m.concat(["update"])));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitForInStatement=function(g,e,m){g.left=this.accept(g.left,e,m.concat(["left"]));g.right=this.accept(g.right,e,m.concat(["right"]));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitDeclaration=function(g,e,m){return g};ue.prototype.visitThisExpression=function(g,e,m){return g};ue.prototype.visitArrayExpression=function(g,e,m){if(g.elements){for(var c=
[],h=0;h<g.elements.length;h++){var n=g.elements[h];n=n?this.accept(n,e,m.concat(["elements",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.elements=c}return g};ue.prototype.visitObjectExpression=function(g,e,m){for(var c=[],h=0;h<g.properties.length;h++){var n=g.properties[h];n=n?this.accept(n,e,m.concat(["properties",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.properties=c;return g};ue.prototype.visitFunctionExpression=function(g,e,m){g.id&&(g.id=this.accept(g.id,e,m.concat(["id"])));
for(var c=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,e,m.concat(["params",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.params=c;g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitUnaryExpression=function(g,e,m){g.argument=this.accept(g.argument,e,m.concat(["argument"]));return g};ue.prototype.visitUpdateExpression=function(g,e,m){g.argument=this.accept(g.argument,e,m.concat(["argument"]));return g};ue.prototype.visitBinaryExpression=function(g,
e,m){g.left=this.accept(g.left,e,m.concat(["left"]));g.right=this.accept(g.right,e,m.concat(["right"]));return g};ue.prototype.visitAssignmentExpression=function(g,e,m){g.left=this.accept(g.left,e,m.concat(["left"]));g.right=this.accept(g.right,e,m.concat(["right"]));return g};ue.prototype.visitLogicalExpression=function(g,e,m){g.left=this.accept(g.left,e,m.concat(["left"]));g.right=this.accept(g.right,e,m.concat(["right"]));return g};ue.prototype.visitMemberExpression=function(g,e,m){g.object=this.accept(g.object,
e,m.concat(["object"]));g.property=this.accept(g.property,e,m.concat(["property"]));return g};ue.prototype.visitConditionalExpression=function(g,e,m){g.test=this.accept(g.test,e,m.concat(["test"]));g.alternate=this.accept(g.alternate,e,m.concat(["alternate"]));g.consequent=this.accept(g.consequent,e,m.concat(["consequent"]));return g};ue.prototype.visitCallExpression=function(g,e,m){g.callee=this.accept(g.callee,e,m.concat(["callee"]));for(var c=[],h=0;h<g.arguments.length;h++){var n=g.arguments[h];
n=n?this.accept(n,e,m.concat(["arguments",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.arguments=c;return g};ue.prototype.visitNewExpression=function(g,e,m){g.callee=this.accept(g.callee,e,m.concat(["callee"]));for(var c=[],h=0;h<g.arguments.length;h++){var n=g.arguments[h];n=n?this.accept(n,e,m.concat(["arguments",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.arguments=c;return g};ue.prototype.visitSequenceExpression=function(g,e,m){for(var c=[],h=0;h<g.expressions.length;h++){var n=
g.expressions[h];n=n?this.accept(n,e,m.concat(["expressions",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.expressions=c;return g};ue.prototype.visitArrowFunctionExpression=function(g,e,m){g.body=this.accept(g.body,e,m.concat(["body"]));g.id&&(g.id=this.accept(g.id,e,m.concat(["id"])));for(var c=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,e,m.concat(["params",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.params=c;return g};ue.prototype.visitYieldExpression=function(g,
e,m){g.argument&&(g.argument=this.accept(g.argument,e,m.concat(["argument"])));return g};ue.prototype.visitTemplateLiteral=function(g,e,m){for(var c=[],h=0;h<g.quasis.length;h++){var n=g.quasis[h];n=n?this.accept(n,e,m.concat(["quasis",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.quasis=c;c=[];for(h=0;h<g.expressions.length;h++)n=(n=g.expressions[h])?this.accept(n,e,m.concat(["expressions",h])):n,Array.isArray(n)?c.push.apply(c,n):c.push(n);g.expressions=c;return g};ue.prototype.visitTaggedTemplateExpression=
function(g,e,m){g.tag=this.accept(g.tag,e,m.concat(["tag"]));g.quasi=this.accept(g.quasi,e,m.concat(["quasi"]));return g};ue.prototype.visitAssignmentProperty=function(g,e,m){g.value=this.accept(g.value,e,m.concat(["value"]));g.key=this.accept(g.key,e,m.concat(["key"]));return g};ue.prototype.visitObjectPattern=function(g,e,m){for(var c=[],h=0;h<g.properties.length;h++){var n=g.properties[h];n=n?this.accept(n,e,m.concat(["properties",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.properties=
c;return g};ue.prototype.visitArrayPattern=function(g,e,m){if(g.elements){for(var c=[],h=0;h<g.elements.length;h++){var n=g.elements[h];n=n?this.accept(n,e,m.concat(["elements",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.elements=c}return g};ue.prototype.visitRestElement=function(g,e,m){g.argument=this.accept(g.argument,e,m.concat(["argument"]));return g};ue.prototype.visitAssignmentPattern=function(g,e,m){g.left=this.accept(g.left,e,m.concat(["left"]));g.right=this.accept(g.right,e,m.concat(["right"]));
return g};ue.prototype.visitClassExpression=function(g,e,m){g.id&&(g.id=this.accept(g.id,e,m.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,e,m.concat(["superClass"])));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitMetaProperty=function(g,e,m){g.meta=this.accept(g.meta,e,m.concat(["meta"]));g.property=this.accept(g.property,e,m.concat(["property"]));return g};ue.prototype.visitImportDeclaration=function(g,e,m){for(var c=[],h=0;h<g.specifiers.length;h++){var n=
g.specifiers[h];n=n?this.accept(n,e,m.concat(["specifiers",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.specifiers=c;g.source=this.accept(g.source,e,m.concat(["source"]));return g};ue.prototype.visitImportSpecifier=function(g,e,m){g.imported=this.accept(g.imported,e,m.concat(["imported"]));g.local=this.accept(g.local,e,m.concat(["local"]));return g};ue.prototype.visitImportDefaultSpecifier=function(g,e,m){g.local=this.accept(g.local,e,m.concat(["local"]));return g};ue.prototype.visitImportNamespaceSpecifier=
function(g,e,m){g.local=this.accept(g.local,e,m.concat(["local"]));return g};ue.prototype.visitExportNamedDeclaration=function(g,e,m){g.declaration&&(g.declaration=this.accept(g.declaration,e,m.concat(["declaration"])));for(var c=[],h=0;h<g.specifiers.length;h++){var n=g.specifiers[h];n=n?this.accept(n,e,m.concat(["specifiers",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.specifiers=c;g.source&&(g.source=this.accept(g.source,e,m.concat(["source"])));return g};ue.prototype.visitExportSpecifier=
function(g,e,m){g.exported=this.accept(g.exported,e,m.concat(["exported"]));g.local=this.accept(g.local,e,m.concat(["local"]));return g};ue.prototype.visitAnonymousDefaultExportedFunctionDeclaration=function(g,e,m){g.id&&(g.id=this.accept(g.id,e,m.concat(["id"])));for(var c=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,e,m.concat(["params",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.params=c;g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitAnonymousDefaultExportedClassDeclaration=
function(g,e,m){g.id&&(g.id=this.accept(g.id,e,m.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,e,m.concat(["superClass"])));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitExportDefaultDeclaration=function(g,e,m){g.declaration=this.accept(g.declaration,e,m.concat(["declaration"]));return g};ue.prototype.visitExportAllDeclaration=function(g,e,m){g.source=this.accept(g.source,e,m.concat(["source"]));return g};ue.prototype.visitAwaitExpression=function(g,
e,m){g.argument=this.accept(g.argument,e,m.concat(["argument"]));return g};ue.prototype.visitJSXMemberExpression=function(g,e,m){g.object=this.accept(g.object,e,m.concat(["object"]));g.property=this.accept(g.property,e,m.concat(["property"]));return g};ue.prototype.visitJSXNamespacedName=function(g,e,m){g.namespace=this.accept(g.namespace,e,m.concat(["namespace"]));g.name=this.accept(g.name,e,m.concat(["name"]));return g};ue.prototype.visitJSXOpeningElement=function(g,e,m){for(var c=[],h=0;h<g.attributes.length;h++){var n=
g.attributes[h];n=n?this.accept(n,e,m.concat(["attributes",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.attributes=c;g.name=this.accept(g.name,e,m.concat(["name"]));return g};ue.prototype.visitJSXClosingElement=function(g,e,m){g.name=this.accept(g.name,e,m.concat(["name"]));return g};ue.prototype.visitJSXSpreadAttribute=function(g,e,m){g.argument=this.accept(g.argument,e,m.concat(["argument"]));return g};ue.prototype.visitJSXElement=function(g,e,m){g.openingElement=this.accept(g.openingElement,
e,m.concat(["openingElement"]));for(var c=[],h=0;h<g.children.length;h++){var n=g.children[h];n=n?this.accept(n,e,m.concat(["children",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.children=c;g.closingElement&&(g.closingElement=this.accept(g.closingElement,e,m.concat(["closingElement"])));return g};ue.prototype.visitJSXFragment=function(g,e,m){g.openingFragment=this.accept(g.openingFragment,e,m.concat(["openingFragment"]));for(var c=[],h=0;h<g.children.length;h++){var n=g.children[h];n=n?
this.accept(n,e,m.concat(["children",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.children=c;g.closingFragment=this.accept(g.closingFragment,e,m.concat(["closingFragment"]));return g};ue.prototype.visitImportExpression=function(g,e,m){g.source=this.accept(g.source,e,m.concat(["source"]));return g};ue.prototype.visitRegExpLiteral=function(g,e,m){return g};ue.prototype.visitFunctionBody=function(g,e,m){for(var c=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,e,m.concat(["body",
h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.body=c;return g};ue.prototype.visitFunctionDeclaration=function(g,e,m){g.id=this.accept(g.id,e,m.concat(["id"]));for(var c=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,e,m.concat(["params",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.params=c;g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitVariableDeclaration=function(g,e,m){for(var c=[],h=0;h<g.declarations.length;h++){var n=g.declarations[h];
n=n?this.accept(n,e,m.concat(["declarations",h])):n;Array.isArray(n)?c.push.apply(c,n):c.push(n)}g.declarations=c;return g};ue.prototype.visitForOfStatement=function(g,e,m){g.left=this.accept(g.left,e,m.concat(["left"]));g.right=this.accept(g.right,e,m.concat(["right"]));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitClassDeclaration=function(g,e,m){g.id=this.accept(g.id,e,m.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,e,m.concat(["superClass"])));
g.body=this.accept(g.body,e,m.concat(["body"]));return g};ue.prototype.visitJSXIdentifier=function(g,e,m){return g};ue.prototype.visitBigIntLiteral=function(g,e,m){return g};Ca("bE",ue);l8.Visitor=ue;l8.default=ue;var Qh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Qh.obj=dg;Qh.Path=ci;Qh.Visitor=ue;var IE=function(){return Qh.Visitor.apply(this,arguments)||this};$jscomp.inherits(IE,Qh.Visitor);IE.prototype.accept=function(g,e,m){var c=m.map(function(n){return"string"===
typeof n?"."+n:"["+n+"]"}).join(""),h=[];m=Qh.Visitor.prototype.accept.call(this,g,{index:e.index,tree:h},m);e.tree.push({node:g,path:c,index:e.index++,children:h});return m};Qh.PrinterVisitor=IE;var $k=function(){return Qh.Visitor.apply(this,arguments)||this};$jscomp.inherits($k,Qh.Visitor);$k.prototype.recordNotEqual=function(g,e,m,c){m.comparisons.errors.push({node1:g,node2:e,path:m.completePath,msg:c})};$k.prototype.compareType=function(g,e,m){return this.compareField("type",g,e,m)};$k.prototype.compareField=
function(g,e,m,c){m=Qh.Path(c.completePath.join(".")).get(m);if(e&&m&&e[g]===m[g]||e&&"*"===e[g]||m&&"*"===m[g])return!0;var h=c.completePath.join(".")+"."+g;this.recordNotEqual(e,m,c,e?m?h+" is not equal: "+e[g]+" vs. "+m[g]:"node2 not defined but node1 ("+h+") is: "+e[g]:"node1 on "+h+" not defined");return!1};$k.prototype.accept=function(g,e,m,c){var h=Qh.Path(c.join(".")).get(e);if("*"!==g&&"*"!==h&&(m={completePath:c,comparisons:m.comparisons},this.compareType(g,e,m)))this["visit"+g.type](g,
e,m,c)};$k.prototype.visitFunction=function(g,e,m,c){g.generator&&this.compareField("generator",g,e,m);g.expression&&this.compareField("expression",g,e,m);return Qh.Visitor.prototype.visitFunction.call(this,g,e,m,c)};$k.prototype.visitSwitchStatement=function(g,e,m,c){g.lexical&&this.compareField("lexical",g,e,m);return Qh.Visitor.prototype.visitSwitchStatement.call(this,g,e,m,c)};$k.prototype.visitForInStatement=function(g,e,m,c){g.each&&this.compareField("each",g,e,m);return Qh.Visitor.prototype.visitForInStatement.call(this,
g,e,m,c)};$k.prototype.visitFunctionDeclaration=function(g,e,m,c){g.generator&&this.compareField("generator",g,e,m);g.expression&&this.compareField("expression",g,e,m);return Qh.Visitor.prototype.visitFunctionDeclaration.call(this,g,e,m,c)};$k.prototype.visitVariableDeclaration=function(g,e,m,c){this.compareField("kind",g,e,m);return Qh.Visitor.prototype.visitVariableDeclaration.call(this,g,e,m,c)};$k.prototype.visitUnaryExpression=function(g,e,m,c){this.compareField("operator",g,e,m);g.prefix&&this.compareField("prefix",
g,e,m);return Qh.Visitor.prototype.visitUnaryExpression.call(this,g,e,m,c)};$k.prototype.visitBinaryExpression=function(g,e,m,c){this.compareField("operator",g,e,m);return Qh.Visitor.prototype.visitBinaryExpression.call(this,g,e,m,c)};$k.prototype.visitAssignmentExpression=function(g,e,m,c){this.compareField("operator",g,e,m);return Qh.Visitor.prototype.visitAssignmentExpression.call(this,g,e,m,c)};$k.prototype.visitUpdateExpression=function(g,e,m,c){this.compareField("operator",g,e,m);g.prefix&&
this.compareField("prefix",g,e,m);return Qh.Visitor.prototype.visitUpdateExpression.call(this,g,e,m,c)};$k.prototype.visitLogicalExpression=function(g,e,m,c){this.compareField("operator",g,e,m);return Qh.Visitor.prototype.visitLogicalExpression.call(this,g,e,m,c)};$k.prototype.visitMemberExpression=function(g,e,m,c){g.computed&&this.compareField("computed",g,e,m);return Qh.Visitor.prototype.visitMemberExpression.call(this,g,e,m,c)};$k.prototype.visitComprehensionBlock=function(g,e,m,c){g.each&&this.compareField("each",
g,e,m);return Qh.Visitor.prototype.visitComprehensionBlock.call(this,g,e,m,c)};$k.prototype.visitIdentifier=function(g,e,m,c){this.compareField("name",g,e,m);return Qh.Visitor.prototype.visitIdentifier.call(this,g,e,m,c)};$k.prototype.visitLiteral=function(g,e,m,c){this.compareField("value",g,e,m);return Qh.Visitor.prototype.visitLiteral.call(this,g,e,m,c)};$k.prototype.visitClassDeclaration=function(g,e,m,c){this.compareField("id",g,e,m);g.superClass&&this.compareField("superClass",g,e,m);this.compareField("body",
g,e,m);return Qh.Visitor.prototype.visitClassDeclaration.call(this,g,e,m,c)};$k.prototype.visitClassBody=function(g,e,m,c){this.compareField("body",g,e,m);return Qh.Visitor.prototype.visitClassBody.call(this,g,e,m,c)};$k.prototype.visitMethodDefinition=function(g,e,m,c){this.compareField("static",g,e,m);this.compareField("computed",g,e,m);this.compareField("kind",g,e,m);this.compareField("key",g,e,m);this.compareField("value",g,e,m);return Qh.Visitor.prototype.visitMethodDefinition.call(this,g,e,
m,c)};Qh.ComparisonVisitor=$k;var ak=function(){return Qh.Visitor.apply(this,arguments)||this};$jscomp.inherits(ak,Qh.Visitor);ak.prototype.newScope=function(g,e){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};e&&e.subScopes.push(g);
return g};ak.prototype.visitVariableDeclaration=function(g,e,m){e.varDecls.push(g);e.varDeclPaths.push(m);return Qh.Visitor.prototype.visitVariableDeclaration.call(this,g,e,m)};ak.prototype.visitVariableDeclarator=function(g,e,m){g.init&&(g.init=this.accept(g.init,e,m.concat(["init"])));return g};ak.prototype.visitFunction=function(g,e,m){var c=this,h=this.newScope(g,e);g.params.forEach(function(n,b){"AssignmentPattern"===n.type&&c.accept(n.right,h,m.concat("params",b,"right"))});h.params=Array.prototype.slice.call(g.params);
return h};ak.prototype.visitFunctionDeclaration=function(g,e,m){var c=this.visitFunction(g,e,m);e.funcDecls.push(g);e.funcDeclPaths.push(m);var h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,d){b=h.accept(b,c,m.concat(["defaults",d]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,c,m.concat(["rest"])));g.body=h.accept(g.body,c,m.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,c,m.concat(["loc"])));return g};ak.prototype.visitFunctionExpression=
function(g,e,m){var c=this.visitFunction(g,e,m),h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,d){b=h.accept(b,c,m.concat(["defaults",d]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,c,m.concat(["rest"])));g.body=h.accept(g.body,c,m.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,c,m.concat(["loc"])));return g};ak.prototype.visitArrowFunctionExpression=function(g,e,m){var c=this.visitFunction(g,e,m),h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,
b,d){b=h.accept(b,c,m.concat(["defaults",d]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,c,m.concat(["rest"])));g.body=h.accept(g.body,c,m.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,c,m.concat(["loc"])));return g};ak.prototype.visitIdentifier=function(g,e,m){e.refs.push(g);return Qh.Visitor.prototype.visitIdentifier.call(this,g,e,m)};ak.prototype.visitMemberExpression=function(g,e,m){g.object=this.accept(g.object,e,m.concat(["object"]));g.computed&&
(g.property=this.accept(g.property,e,m.concat(["property"])));return g};ak.prototype.visitProperty=function(g,e,m){g.computed&&(g.key=this.accept(g.key,e,m.concat(["key"])));g.value=this.accept(g.value,e,m.concat(["value"]));return g};ak.prototype.visitThisExpression=function(g,e,m){e.thisRefs.push(g);return Qh.Visitor.prototype.visitThisExpression.call(this,g,e,m)};ak.prototype.visitTryStatement=function(g,e,m){g.block=this.accept(g.block,e,m.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,
e,m.concat(["handler"])),e.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,e,m.concat(["finalizer"])));return g};ak.prototype.visitLabeledStatement=function(g,e,m){g.body=this.accept(g.body,e,m.concat(["body"]));return g};ak.prototype.visitClassDeclaration=function(g,e,m){e.classDecls.push(g);e.classDeclPaths.push(m);g.superClass&&(g.superClass=this.accept(g.superClass,e,m.concat(["superClass"])));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ak.prototype.visitClassExpression=
function(g,e,m){g.id&&(e.classExprs.push(g),e.classExprPaths.push(m));g.superClass&&(g.superClass=this.accept(g.superClass,e,m.concat(["superClass"])));g.body=this.accept(g.body,e,m.concat(["body"]));return g};ak.prototype.visitMethodDefinition=function(g,e,m){g.value=this.accept(g.value,e,m.concat(["value"]));return g};ak.prototype.visitMetaProperty=function(g,e,m){return g};ak.prototype.visitBreakStatement=function(g,e,m){return g};ak.prototype.visitContinueStatement=function(g,e,m){return g};ak.prototype.visitImportSpecifier=
function(g,e,m){e.importSpecifiers.push(g.local);e.importSpecifierPaths.push(m);return g};ak.prototype.visitImportDefaultSpecifier=function(g,e,m){e.importSpecifiers.push(g.local);e.importSpecifierPaths.push(m);return g};ak.prototype.visitImportNamespaceSpecifier=function(g,e,m){e.importSpecifiers.push(g.local);e.importSpecifierPaths.push(m);return g};ak.prototype.visitExportSpecifier=function(g,e,m){g.local=this.accept(g.local,e,m.concat(["local"]));return g};ak.prototype.visitExportNamedDeclaration=
function(g,e,m){e.exportDecls.push(g);e.exportDeclPaths.push(m);g.source||Qh.Visitor.prototype.visitExportNamedDeclaration.call(this,g,e,m);return g};ak.prototype.visitExportDefaultDeclaration=function(g,e,m){e.exportDecls.push(g);e.exportDeclPaths.push(m);return Qh.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,e,m)};ak.prototype.visitExportAllDeclaration=function(g,e,m){e.exportDecls.push(g);e.exportDeclPaths.push(m);return Qh.Visitor.prototype.visitExportAllDeclaration.call(this,g,
e,m)};Qh.ScopeVisitor=ak;Qh.BaseVisitor=ue;Qh.Visitor=ue;Qh.PrinterVisitor=IE;Qh.PrinterVisitor=IE;Qh.ComparisonVisitor=$k;Qh.ComparisonVisitor=$k;Qh.ScopeVisitor=ak;Qh.ScopeVisitor=ak;var Sg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,FV={};(function m(e){function c(H){var J={},O;for(O in H)if(H.hasOwnProperty(O)){var L=H[O];J[O]="object"===typeof L&&null!==L?c(L):L}return J}function h(H,J){var O;var L=H.length;for(O=0;L;){var Y=L>>>1;var S=O+Y;J(H[S])?L=Y:(O=
S+1,L-=Y+1)}return O}function n(H,J){(this||Sg).parent=H;(this||Sg).key=J}function b(H,J,O,L){(this||Sg).node=H;(this||Sg).path=J;(this||Sg).wrap=O;(this||Sg).ref=L}function d(){}function k(H){return null==H?!1:"object"===typeof H&&"string"===typeof H.type}function a(H,J){for(var O=H.length-1;0<=O;--O)if(H[O].node===J)return!0;return!1}function f(H,J){return(new d).traverse(H,J)}function l(H,J){var O=h(J,function(L){return L.range[0]>H.range[0]});H.extendedRange=[H.range[0],H.range[1]];O!==J.length&&
(H.extendedRange[1]=J[O].range[0]);--O;0<=O&&(H.extendedRange[0]=J[O].range[1]);return H}var r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",
ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",
ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",
ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",
SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",
WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var v={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],
ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported",
"local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported",
"local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant",
"cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var y={};var A={};var E={};var F={Break:y,Skip:A,
Remove:E};n.prototype.replace=function(H){(this||Sg).parent[(this||Sg).key]=H};n.prototype.remove=function(){if(Array.isArray((this||Sg).parent))return(this||Sg).parent.splice((this||Sg).key,1),!0;this.replace(null);return!1};d.prototype.path=function(){function H(qa,Fa){if(Array.isArray(Fa))for(O=0,L=Fa.length;O<L;++O)qa.push(Fa[O]);else qa.push(Fa)}var J,O,L;if(!(this||Sg).__current.path)return null;var Y=[];var S=2;for(J=(this||Sg).__leavelist.length;S<J;++S){var ea=(this||Sg).__leavelist[S];H(Y,
ea.path)}H(Y,(this||Sg).__current.path);return Y};d.prototype.type=function(){return this.current().type||(this||Sg).__current.wrap};d.prototype.parents=function(){var H;var J=[];var O=1;for(H=(this||Sg).__leavelist.length;O<H;++O)J.push((this||Sg).__leavelist[O].node);return J};d.prototype.current=function(){return(this||Sg).__current.node};d.prototype.__execute=function(H,J){var O=void 0;var L=(this||Sg).__current;(this||Sg).__current=J;(this||Sg).__state=null;H&&(O=H.call(this||Sg,J.node,(this||
Sg).__leavelist[(this||Sg).__leavelist.length-1].node));(this||Sg).__current=L;return O};d.prototype.notify=function(H){(this||Sg).__state=H};d.prototype.skip=function(){this.notify(A)};d.prototype["break"]=function(){this.notify(y)};d.prototype.remove=function(){this.notify(E)};d.prototype.__initialize=function(H,J){(this||Sg).visitor=J;(this||Sg).root=H;(this||Sg).__worklist=[];(this||Sg).__leavelist=[];(this||Sg).__current=null;(this||Sg).__state=null;(this||Sg).__fallback=null;"iteration"===J.fallback?
(this||Sg).__fallback=Object.keys:"function"===typeof J.fallback&&((this||Sg).__fallback=J.fallback);(this||Sg).__keys=v;J.keys&&((this||Sg).__keys=Object.assign(Object.create((this||Sg).__keys),J.keys))};d.prototype.traverse=function(H,J){var O,L,Y;this.__initialize(H,J);var S={};var ea=(this||Sg).__worklist;var qa=(this||Sg).__leavelist;ea.push(new b(H,null,null,null));for(qa.push(new b(null,null,null,null));ea.length;)if(H=ea.pop(),H===S){H=qa.pop();var Fa=this.__execute(J.leave,H);if((this||Sg).__state===
y||Fa===y)break}else if(H.node){Fa=this.__execute(J.enter,H);if((this||Sg).__state===y||Fa===y)break;ea.push(S);qa.push(H);if((this||Sg).__state!==A&&Fa!==A){Fa=H.node;var K=Fa.type||H.wrap;var Z=(this||Sg).__keys[K];if(!Z)if((this||Sg).__fallback)Z=this.__fallback(Fa);else throw Error("Unknown node type "+K+".");for(O=Z.length;0<=--O;){var R=Z[O];if(Y=Fa[R])if(Array.isArray(Y))for(L=Y.length;0<=--L;){if(Y[L]&&!a(qa,Y[L])){if(K!==r.ObjectExpression&&K!==r.ObjectPattern||"properties"!==Z[O])if(k(Y[L]))H=
new b(Y[L],[R,L],null,null);else continue;else H=new b(Y[L],[R,L],"Property",null);ea.push(H)}}else k(Y)&&!a(qa,Y)&&ea.push(new b(Y,R,null,null))}}}};d.prototype.replace=function(H,J){function O(aa){if(aa.ref.remove()){var xa=aa.ref.key;var jb=aa.ref.parent;for(aa=qa.length;aa--;){var ob=qa[aa];if(ob.ref&&ob.ref.parent===jb){if(ob.ref.key<xa)break;--ob.ref.key}}}}var L,Y,S;this.__initialize(H,J);var ea={};var qa=(this||Sg).__worklist;var Fa=(this||Sg).__leavelist;var K={root:H};var Z=new b(H,null,
null,new n(K,"root"));qa.push(Z);for(Fa.push(Z);qa.length;)if(Z=qa.pop(),Z===ea){Z=Fa.pop();var R=this.__execute(J.leave,Z);void 0!==R&&R!==y&&R!==A&&R!==E&&Z.ref.replace(R);(this||Sg).__state!==E&&R!==E||O(Z);if((this||Sg).__state===y||R===y)break}else{R=this.__execute(J.enter,Z);void 0!==R&&R!==y&&R!==A&&R!==E&&(Z.ref.replace(R),Z.node=R);if((this||Sg).__state===E||R===E)O(Z),Z.node=null;if((this||Sg).__state===y||R===y)break;if(H=Z.node)if(qa.push(ea),Fa.push(Z),(this||Sg).__state!==A&&R!==A){R=
H.type||Z.wrap;var U=(this||Sg).__keys[R];if(!U)if((this||Sg).__fallback)U=this.__fallback(H);else throw Error("Unknown node type "+R+".");for(L=U.length;0<=--L;){var na=U[L];if(S=H[na])if(Array.isArray(S))for(Y=S.length;0<=--Y;){if(S[Y]){if(R!==r.ObjectExpression&&R!==r.ObjectPattern||"properties"!==U[L])if(k(S[Y]))Z=new b(S[Y],[na,Y],null,new n(S,Y));else continue;else Z=new b(S[Y],[na,Y],"Property",new n(S,Y));qa.push(Z)}}else k(S)&&qa.push(new b(S,na,null,new n(H,na)))}}}return K.root};e.Syntax=
r;e.traverse=f;e.replace=function(H,J){return(new d).replace(H,J)};e.attachComments=function(H,J,O){var L=[],Y;if(!H.range)throw Error("attachComments needs range information");if(!O.length){if(J.length){var S=0;for(Y=J.length;S<Y;S+=1)O=c(J[S]),O.extendedRange=[0,H.range[0]],L.push(O);H.leadingComments=L}return H}S=0;for(Y=J.length;S<Y;S+=1)L.push(l(c(J[S]),O));var ea=0;f(H,{enter:function(qa){for(var Fa;ea<L.length;){Fa=L[ea];if(Fa.extendedRange[1]>qa.range[0])break;Fa.extendedRange[1]===qa.range[0]?
(qa.leadingComments||(qa.leadingComments=[]),qa.leadingComments.push(Fa),L.splice(ea,1)):ea+=1}if(ea===L.length)return F.Break;if(L[ea].extendedRange[0]>qa.range[1])return F.Skip}});ea=0;f(H,{leave:function(qa){for(var Fa;ea<L.length;){Fa=L[ea];if(qa.range[1]<Fa.extendedRange[0])break;qa.range[1]===Fa.extendedRange[0]?(qa.trailingComments||(qa.trailingComments=[]),qa.trailingComments.push(Fa),L.splice(ea,1)):ea+=1}if(ea===L.length)return F.Break;if(L[ea].extendedRange[0]>qa.range[1])return F.Skip}});
return H};e.VisitorKeys=v;e.VisitorOption=F;e.Controller=d;e.cloneEnvironment=function(){return m({})};return e})(FV);var m8={};(function(){function e(c){if(null==c)return!1;switch(c.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function m(c){switch(c.type){case "IfStatement":return null!=c.alternate?c.alternate:c.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return c.body}return null}m8={isExpression:function(c){if(null==c)return!1;switch(c.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:e,isIterationStatement:function(c){if(null==c)return!1;switch(c.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(c){return e(c)||null!=c&&"FunctionDeclaration"===c.type},isProblematicIfStatement:function(c){if("IfStatement"!==c.type||null==c.alternate)return!1;c=c.consequent;do{if("IfStatement"===c.type&&null==c.alternate)return!0;c=m(c)}while(c);return!1},trailingStatement:m}})();var Mla=m8,n8={};
(function(){function e(f){if(65535>=f)return String.fromCharCode(f);var l=String.fromCharCode(Math.floor((f-65536)/1024)+55296);f=String.fromCharCode((f-65536)%1024+56320);return l+f}var m;var c=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var h=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var d=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var k=Array(128);for(m=0;128>m;++m)k[m]=97<=m&&122>=m||65<=m&&90>=m||36===m||95===m;var a=Array(128);for(m=0;128>m;++m)a[m]=97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||36===m||95===m;n8={isDecimalDigit:function(f){return 48<=f&&57>=f},isHexDigit:function(f){return 48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f},isOctalDigit:function(f){return 48<=f&&55>=f},isWhiteSpace:function(f){return 32===f||9===f||11===f||12===
f||160===f||5760<=f&&0<=d.indexOf(f)},isLineTerminator:function(f){return 10===f||13===f||8232===f||8233===f},isIdentifierStartES5:function(f){return 128>f?k[f]:c.test(e(f))},isIdentifierPartES5:function(f){return 128>f?a[f]:h.test(e(f))},isIdentifierStartES6:function(f){return 128>f?k[f]:n.test(e(f))},isIdentifierPartES6:function(f){return 128>f?a[f]:b.test(e(f))}}})();var o8=n8,p8={};(function(){function e(k,a){return a||"yield"!==k?m(k,a):!1}function m(k,a){if(a)a:switch(k){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(k.length){case 2:return"if"===k||"in"===k||"do"===k;case 3:return"var"===k||"for"===k||"new"===k||"try"===k;case 4:return"this"===k||"else"===k||"case"===k||"void"===k||"with"===k||"enum"===k;case 5:return"while"===k||"break"===k||"catch"===k||"throw"===k||"const"===k||"yield"===k||"class"===k||"super"===k;case 6:return"return"===k||"typeof"===k||"delete"===k||"switch"===k||"export"===k||"import"===k;case 7:return"default"===k||"finally"===k||"extends"===
k;case 8:return"function"===k||"continue"===k||"debugger"===k;case 10:return"instanceof"===k;default:return!1}}function c(k,a){return"null"===k||"true"===k||"false"===k||e(k,a)}function h(k,a){return"null"===k||"true"===k||"false"===k||m(k,a)}function n(k){var a;if(0===k.length)return!1;var f=k.charCodeAt(0);if(!d.isIdentifierStartES5(f))return!1;var l=1;for(a=k.length;l<a;++l)if(f=k.charCodeAt(l),!d.isIdentifierPartES5(f))return!1;return!0}function b(k){var a;if(0===k.length)return!1;var f=d.isIdentifierStartES6;
var l=0;for(a=k.length;l<a;++l){var r=k.charCodeAt(l);if(55296<=r&&56319>=r){++l;if(l>=a)return!1;var v=k.charCodeAt(l);if(!(56320<=v&&57343>=v))return!1;r=1024*(r-55296)+(v-56320)+65536}if(!f(r))return!1;f=d.isIdentifierPartES6}return!0}var d=o8;p8={isKeywordES5:e,isKeywordES6:m,isReservedWordES5:c,isReservedWordES6:h,isRestrictedWord:function(k){return"eval"===k||"arguments"===k},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(k,a){return n(k)&&!c(k,a)},isIdentifierES6:function(k,
a){return b(k)&&!h(k,a)}}})();var Nla=p8,CH={};CH.ast=Mla;CH.code=o8;CH.keyword=Nla;var Pm={getArg:function(e,m,c){if(m in e)return e[m];if(3===arguments.length)return c;throw Error('"'+m+'" is a required argument.');}},x_=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Vea=/^data:.+,.+$/;Pm.urlParse=Fu;Pm.urlGenerate=Kw;Pm.normalize=aG;Pm.join=bG;Pm.isAbsolute=function(e){return"/"===e.charAt(0)||x_.test(e)};Pm.relative=function(e,m){""===e&&(e=".");e=e.replace(/\/$/,"");for(var c=
0;0!==m.indexOf(e+"/");){var h=e.lastIndexOf("/");if(0>h)return m;e=e.slice(0,h);if(e.match(/^([^\/]+:\/)?\/*$/))return m;++c}return Array(c+1).join("../")+m.substr(e.length+1)};var q8=!("__proto__"in Object.create(null));Pm.toSetString=q8?Fr:UJ;Pm.fromSetString=q8?Fr:cG;Pm.compareByOriginalPositions=function(e,m,c){var h=Lw(e.source,m.source);if(0!==h)return h;h=e.originalLine-m.originalLine;if(0!==h)return h;h=e.originalColumn-m.originalColumn;if(0!==h||c)return h;h=e.generatedColumn-m.generatedColumn;
if(0!==h)return h;h=e.generatedLine-m.generatedLine;return 0!==h?h:Lw(e.name,m.name)};Pm.compareByGeneratedPositionsDeflated=function(e,m,c){var h=e.generatedLine-m.generatedLine;if(0!==h)return h;h=e.generatedColumn-m.generatedColumn;if(0!==h||c)return h;h=Lw(e.source,m.source);if(0!==h)return h;h=e.originalLine-m.originalLine;if(0!==h)return h;h=e.originalColumn-m.originalColumn;return 0!==h?h:Lw(e.name,m.name)};Pm.compareByGeneratedPositionsInflated=function(e,m){var c=e.generatedLine-m.generatedLine;
if(0!==c)return c;c=e.generatedColumn-m.generatedColumn;if(0!==c)return c;c=Lw(e.source,m.source);if(0!==c)return c;c=e.originalLine-m.originalLine;if(0!==c)return c;c=e.originalColumn-m.originalColumn;return 0!==c?c:Lw(e.name,m.name)};Pm.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))};Pm.computeSourceURL=function(e,m,c){m=m||"";e&&("/"!==e[e.length-1]&&"/"!==m[0]&&(e+="/"),m=e+m);if(c){e=Fu(c);if(!e)throw Error("sourceMapURL could not be parsed");e.path&&(c=e.path.lastIndexOf("/"),
0<=c&&(e.path=e.path.substring(0,c+1)));m=bG(Kw(e),m)}return aG(m)};var lN={},r8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");lN.encode=function(e){if(0<=e&&e<r8.length)return r8[e];throw new TypeError("Must be between 0 and 63: "+e);};lN.decode=function(e){return 65<=e&&90>=e?e-65:97<=e&&122>=e?e-97+26:48<=e&&57>=e?e-48+52:43==e?62:47==e?63:-1};var JE={encode:function(e){var m="",c=0>e?(-e<<1)+1:e<<1;do e=c&31,c>>>=5,0<c&&(e|=32),m+=lN.encode(e);while(0<c);return m},
decode:function(e,m,c){var h=e.length,n=0,b=0;do{if(m>=h)throw Error("Expected more digits in base 64 VLQ value.");var d=lN.decode(e.charCodeAt(m++));if(-1===d)throw Error("Invalid base64 digit: "+e.charAt(m-1));var k=!!(d&32);d&=31;n+=d<<b;b+=5}while(k);e=n>>1;c.value=1===(n&1)?-e:e;c.rest=m}},$n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,GV=Pm,HV=Object.prototype.hasOwnProperty,zA="undefined"!==typeof Map;Hr.fromArray=function(e,m){for(var c=new Hr,h=0,n=e.length;h<
n;h++)c.add(e[h],m);return c};Hr.prototype.size=function(){return zA?(this||$n)._set.size:Object.getOwnPropertyNames((this||$n)._set).length};Hr.prototype.add=function(e,m){var c=zA?e:GV.toSetString(e),h=zA?this.has(e):HV.call((this||$n)._set,c),n=(this||$n)._array.length;h&&!m||(this||$n)._array.push(e);h||(zA?(this||$n)._set.set(e,n):(this||$n)._set[c]=n)};Hr.prototype.has=function(e){if(zA)return(this||$n)._set.has(e);e=GV.toSetString(e);return HV.call((this||$n)._set,e)};Hr.prototype.indexOf=
function(e){if(zA){var m=(this||$n)._set.get(e);if(0<=m)return m}else if(m=GV.toSetString(e),HV.call((this||$n)._set,m))return(this||$n)._set[m];throw Error('"'+e+'" is not in the set.');};Hr.prototype.at=function(e){if(0<=e&&e<(this||$n)._array.length)return(this||$n)._array[e];throw Error("No element indexed by "+e);};Hr.prototype.toArray=function(){return(this||$n)._array.slice()};var Ir="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,s8=Pm;AA.prototype.unsortedForEach=
function(e,m){(this||Ir)._array.forEach(e,m)};AA.prototype.add=function(e){var m=(this||Ir)._last,c=m.generatedLine,h=e.generatedLine,n=m.generatedColumn,b=e.generatedColumn;h>c||h==c&&b>=n||0>=s8.compareByGeneratedPositionsInflated(m,e)?(this||Ir)._last=e:(this||Ir)._sorted=!1;(this||Ir)._array.push(e)};AA.prototype.toArray=function(){(this||Ir)._sorted||((this||Ir)._array.sort(s8.compareByGeneratedPositionsInflated),(this||Ir)._sorted=!0);return(this||Ir)._array};var mi="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,om=Pm,VJ=Hr,Wea=AA;hj.prototype._version=3;hj.fromSourceMap=function(e){var m=e.sourceRoot,c=new hj({file:e.file,sourceRoot:m});e.eachMapping(function(h){var n={generated:{line:h.generatedLine,column:h.generatedColumn}};null!=h.source&&(n.source=h.source,null!=m&&(n.source=om.relative(m,n.source)),n.original={line:h.originalLine,column:h.originalColumn},null!=h.name&&(n.name=h.name));c.addMapping(n)});e.sources.forEach(function(h){var n=h;null!==m&&
(n=om.relative(m,h));c._sources.has(n)||c._sources.add(n);n=e.sourceContentFor(h);null!=n&&c.setSourceContent(h,n)});return c};hj.prototype.addMapping=function(e){var m=om.getArg(e,"generated"),c=om.getArg(e,"original",null),h=om.getArg(e,"source",null);e=om.getArg(e,"name",null);(this||mi)._skipValidation||this._validateMapping(m,c,h,e);null!=h&&(h=String(h),(this||mi)._sources.has(h)||(this||mi)._sources.add(h));null!=e&&(e=String(e),(this||mi)._names.has(e)||(this||mi)._names.add(e));(this||mi)._mappings.add({generatedLine:m.line,
generatedColumn:m.column,originalLine:null!=c&&c.line,originalColumn:null!=c&&c.column,source:h,name:e})};hj.prototype.setSourceContent=function(e,m){null!=(this||mi)._sourceRoot&&(e=om.relative((this||mi)._sourceRoot,e));null!=m?((this||mi)._sourcesContents||((this||mi)._sourcesContents=Object.create(null)),(this||mi)._sourcesContents[om.toSetString(e)]=m):(this||mi)._sourcesContents&&(delete (this||mi)._sourcesContents[om.toSetString(e)],0===Object.keys((this||mi)._sourcesContents).length&&((this||
mi)._sourcesContents=null))};hj.prototype.applySourceMap=function(e,m,c){var h=m;if(null==m){if(null==e.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');h=e.file}var n=(this||mi)._sourceRoot;null!=n&&(h=om.relative(n,h));var b=new VJ,d=new VJ;(this||mi)._mappings.unsortedForEach(function(k){if(k.source===h&&null!=k.originalLine){var a=e.originalPositionFor({line:k.originalLine,column:k.originalColumn});
null!=a.source&&(k.source=a.source,null!=c&&(k.source=om.join(c,k.source)),null!=n&&(k.source=om.relative(n,k.source)),k.originalLine=a.line,k.originalColumn=a.column,null!=a.name&&(k.name=a.name))}a=k.source;null==a||b.has(a)||b.add(a);k=k.name;null==k||d.has(k)||d.add(k)},this||mi);(this||mi)._sources=b;(this||mi)._names=d;e.sources.forEach(function(k){var a=e.sourceContentFor(k);null!=a&&(null!=c&&(k=om.join(c,k)),null!=n&&(k=om.relative(n,k)),this.setSourceContent(k,a))},this||mi)};hj.prototype._validateMapping=
function(e,m,c,h){if(m&&"number"!==typeof m.line&&"number"!==typeof m.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column&&!m&&!c&&!h||e&&"line"in e&&"column"in e&&m&&"line"in m&&"column"in m&&0<e.line&&0<=e.column&&0<m.line&&0<=m.column&&
c))throw Error("Invalid mapping: "+JSON.stringify({generated:e,source:c,original:m,name:h}));};hj.prototype._serializeMappings=function(){for(var e=0,m=1,c=0,h=0,n=0,b=0,d="",k,a,f,l=(this||mi)._mappings.toArray(),r=0,v=l.length;r<v;r++){a=l[r];k="";if(a.generatedLine!==m)for(e=0;a.generatedLine!==m;)k+=";",m++;else if(0<r){if(!om.compareByGeneratedPositionsInflated(a,l[r-1]))continue;k+=","}k+=JE.encode(a.generatedColumn-e);e=a.generatedColumn;null!=a.source&&(f=(this||mi)._sources.indexOf(a.source),
k+=JE.encode(f-b),b=f,k+=JE.encode(a.originalLine-1-h),h=a.originalLine-1,k+=JE.encode(a.originalColumn-c),c=a.originalColumn,null!=a.name&&(a=(this||mi)._names.indexOf(a.name),k+=JE.encode(a-n),n=a));d+=k}return d};hj.prototype._generateSourcesContent=function(e,m){return e.map(function(c){if(!(this||mi)._sourcesContents)return null;null!=m&&(c=om.relative(m,c));c=om.toSetString(c);return Object.prototype.hasOwnProperty.call((this||mi)._sourcesContents,c)?(this||mi)._sourcesContents[c]:null},this||
mi)};hj.prototype.toJSON=function(){var e={version:(this||mi)._version,sources:(this||mi)._sources.toArray(),names:(this||mi)._names.toArray(),mappings:this._serializeMappings()};null!=(this||mi)._file&&(e.file=(this||mi)._file);null!=(this||mi)._sourceRoot&&(e.sourceRoot=(this||mi)._sourceRoot);(this||mi)._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot));return e};hj.prototype.toString=function(){return JSON.stringify(this.toJSON())};var WJ={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(e,m,c,h){if(0===m.length)return-1;e=Rp(-1,m.length,e,m,c,h||WJ.GREATEST_LOWER_BOUND);if(0>e)return-1;for(;0<=e-1&&0===c(m[e],m[e-1],!0);)--e;return e}},Re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,lg=Pm,IV=WJ,XC=Hr,DH=function(e,m){my(e,m,0,e.length-1)};ok.fromSourceMap=function(e,m){return pm.fromSourceMap(e,m)};ok.prototype._version=3;ok.prototype.__generatedMappings=null;Object.defineProperty(ok.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||Re).__generatedMappings||this._parseMappings((this||Re)._mappings,(this||Re).sourceRoot);return(this||Re).__generatedMappings}});ok.prototype.__originalMappings=null;Object.defineProperty(ok.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||Re).__originalMappings||this._parseMappings((this||Re)._mappings,(this||Re).sourceRoot);return(this||Re).__originalMappings}});ok.prototype._charIsMappingSeparator=function(e,
m){e=e.charAt(m);return";"===e||","===e};ok.prototype._parseMappings=function(e,m){throw Error("Subclasses must implement _parseMappings");};ok.GENERATED_ORDER=1;ok.ORIGINAL_ORDER=2;ok.GREATEST_LOWER_BOUND=1;ok.LEAST_UPPER_BOUND=2;ok.prototype.eachMapping=function(e,m,c){m=m||null;switch(c||ok.GENERATED_ORDER){case ok.GENERATED_ORDER:c=(this||Re)._generatedMappings;break;case ok.ORIGINAL_ORDER:c=(this||Re)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var h=(this||Re).sourceRoot;
c.map(function(n){var b=null===n.source?null:(this||Re)._sources.at(n.source);b=lg.computeSourceURL(h,b,(this||Re)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||Re)._names.at(n.name)}},this||Re).forEach(e,m)};ok.prototype.allGeneratedPositionsFor=function(e){var m=lg.getArg(e,"line"),c={source:lg.getArg(e,"source"),originalLine:m,originalColumn:lg.getArg(e,"column",
0)};c.source=this._findSourceIndex(c.source);if(0>c.source)return[];var h=[];c=this._findMapping(c,(this||Re)._originalMappings,"originalLine","originalColumn",lg.compareByOriginalPositions,IV.LEAST_UPPER_BOUND);if(0<=c){var n=(this||Re)._originalMappings[c];if(void 0===e.column)for(m=n.originalLine;n&&n.originalLine===m;)h.push({line:lg.getArg(n,"generatedLine",null),column:lg.getArg(n,"generatedColumn",null),lastColumn:lg.getArg(n,"lastGeneratedColumn",null)}),n=(this||Re)._originalMappings[++c];
else for(e=n.originalColumn;n&&n.originalLine===m&&n.originalColumn==e;)h.push({line:lg.getArg(n,"generatedLine",null),column:lg.getArg(n,"generatedColumn",null),lastColumn:lg.getArg(n,"lastGeneratedColumn",null)}),n=(this||Re)._originalMappings[++c]}return h};pm.prototype=Object.create(ok.prototype);pm.prototype.consumer=ok;pm.prototype._findSourceIndex=function(e){var m=e;null!=(this||Re).sourceRoot&&(m=lg.relative((this||Re).sourceRoot,m));if((this||Re)._sources.has(m))return(this||Re)._sources.indexOf(m);
for(m=0;m<(this||Re)._absoluteSources.length;++m)if((this||Re)._absoluteSources[m]==e)return m;return-1};pm.fromSourceMap=function(e,m){var c=Object.create(pm.prototype),h=c._names=XC.fromArray(e._names.toArray(),!0),n=c._sources=XC.fromArray(e._sources.toArray(),!0);c.sourceRoot=e._sourceRoot;c.sourcesContent=e._generateSourcesContent(c._sources.toArray(),c.sourceRoot);c.file=e._file;c._sourceMapURL=m;c._absoluteSources=c._sources.toArray().map(function(r){return lg.computeSourceURL(c.sourceRoot,
r,m)});e=e._mappings.toArray().slice();for(var b=c.__generatedMappings=[],d=c.__originalMappings=[],k=0,a=e.length;k<a;k++){var f=e[k],l=new YC;l.generatedLine=f.generatedLine;l.generatedColumn=f.generatedColumn;f.source&&(l.source=n.indexOf(f.source),l.originalLine=f.originalLine,l.originalColumn=f.originalColumn,f.name&&(l.name=h.indexOf(f.name)),d.push(l));b.push(l)}DH(c.__originalMappings,lg.compareByOriginalPositions);return c};pm.prototype._version=3;Object.defineProperty(pm.prototype,"sources",
{get:function(){return(this||Re)._absoluteSources.slice()}});pm.prototype._parseMappings=function(e,m){m=1;for(var c=0,h=0,n=0,b=0,d=0,k=e.length,a=0,f={},l={},r=[],v=[],y,A,E,F,H;a<k;)if(";"===e.charAt(a))m++,a++,c=0;else if(","===e.charAt(a))a++;else{y=new YC;y.generatedLine=m;for(F=a;F<k&&!this._charIsMappingSeparator(e,F);F++);A=e.slice(a,F);if(E=f[A])a+=A.length;else{for(E=[];a<F;)JE.decode(e,a,l),H=l.value,a=l.rest,E.push(H);if(2===E.length)throw Error("Found a source, but no line and column");
if(3===E.length)throw Error("Found a source and line, but no column");f[A]=E}y.generatedColumn=c+E[0];c=y.generatedColumn;1<E.length&&(y.source=b+E[1],b+=E[1],y.originalLine=h+E[2],h=y.originalLine,y.originalLine+=1,y.originalColumn=n+E[3],n=y.originalColumn,4<E.length&&(y.name=d+E[4],d+=E[4]));v.push(y);"number"===typeof y.originalLine&&r.push(y)}DH(v,lg.compareByGeneratedPositionsDeflated);(this||Re).__generatedMappings=v;DH(r,lg.compareByOriginalPositions);(this||Re).__originalMappings=r};pm.prototype._findMapping=
function(e,m,c,h,n,b){if(0>=e[c])throw new TypeError("Line must be greater than or equal to 1, got "+e[c]);if(0>e[h])throw new TypeError("Column must be greater than or equal to 0, got "+e[h]);return IV.search(e,m,n,b)};pm.prototype.computeColumnSpans=function(){for(var e=0;e<(this||Re)._generatedMappings.length;++e){var m=(this||Re)._generatedMappings[e];if(e+1<(this||Re)._generatedMappings.length){var c=(this||Re)._generatedMappings[e+1];if(m.generatedLine===c.generatedLine){m.lastGeneratedColumn=
c.generatedColumn-1;continue}}m.lastGeneratedColumn=Infinity}};pm.prototype.originalPositionFor=function(e){var m={generatedLine:lg.getArg(e,"line"),generatedColumn:lg.getArg(e,"column")};e=this._findMapping(m,(this||Re)._generatedMappings,"generatedLine","generatedColumn",lg.compareByGeneratedPositionsDeflated,lg.getArg(e,"bias",ok.GREATEST_LOWER_BOUND));if(0<=e&&(e=(this||Re)._generatedMappings[e],e.generatedLine===m.generatedLine)){m=lg.getArg(e,"source",null);null!==m&&(m=(this||Re)._sources.at(m),
m=lg.computeSourceURL((this||Re).sourceRoot,m,(this||Re)._sourceMapURL));var c=lg.getArg(e,"name",null);null!==c&&(c=(this||Re)._names.at(c));return{source:m,line:lg.getArg(e,"originalLine",null),column:lg.getArg(e,"originalColumn",null),name:c}}return{source:null,line:null,column:null,name:null}};pm.prototype.hasContentsOfAllSources=function(){return(this||Re).sourcesContent?(this||Re).sourcesContent.length>=(this||Re)._sources.size()&&!(this||Re).sourcesContent.some(function(e){return null==e}):
!1};pm.prototype.sourceContentFor=function(e,m){if(!(this||Re).sourcesContent)return null;var c=this._findSourceIndex(e);if(0<=c)return(this||Re).sourcesContent[c];null!=(this||Re).sourceRoot&&(e=lg.relative((this||Re).sourceRoot,e));var h;if(null!=(this||Re).sourceRoot&&(h=lg.urlParse((this||Re).sourceRoot))){c=e.replace(/^file:\/\//,"");if("file"==h.scheme&&(this||Re)._sources.has(c))return(this||Re).sourcesContent[(this||Re)._sources.indexOf(c)];if((!h.path||"/"==h.path)&&(this||Re)._sources.has("/"+
e))return(this||Re).sourcesContent[(this||Re)._sources.indexOf("/"+e)]}if(m)return null;throw Error('"'+e+'" is not in the SourceMap.');};pm.prototype.generatedPositionFor=function(e){var m=lg.getArg(e,"source");m=this._findSourceIndex(m);if(0>m)return{line:null,column:null,lastColumn:null};m={source:m,originalLine:lg.getArg(e,"line"),originalColumn:lg.getArg(e,"column")};e=this._findMapping(m,(this||Re)._originalMappings,"originalLine","originalColumn",lg.compareByOriginalPositions,lg.getArg(e,"bias",
ok.GREATEST_LOWER_BOUND));return 0<=e&&(e=(this||Re)._originalMappings[e],e.source===m.source)?{line:lg.getArg(e,"generatedLine",null),column:lg.getArg(e,"generatedColumn",null),lastColumn:lg.getArg(e,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};Ji.prototype=Object.create(ok.prototype);Ji.prototype.constructor=ok;Ji.prototype._version=3;Object.defineProperty(Ji.prototype,"sources",{get:function(){for(var e=[],m=0;m<(this||Re)._sections.length;m++)for(var c=0;c<(this||Re)._sections[m].consumer.sources.length;c++)e.push((this||
Re)._sections[m].consumer.sources[c]);return e}});Ji.prototype.originalPositionFor=function(e){var m={generatedLine:lg.getArg(e,"line"),generatedColumn:lg.getArg(e,"column")},c=IV.search(m,(this||Re)._sections,function(h,n){var b=h.generatedLine-n.generatedOffset.generatedLine;return b?b:h.generatedColumn-n.generatedOffset.generatedColumn});return(c=(this||Re)._sections[c])?c.consumer.originalPositionFor({line:m.generatedLine-(c.generatedOffset.generatedLine-1),column:m.generatedColumn-(c.generatedOffset.generatedLine===
m.generatedLine?c.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Ji.prototype.hasContentsOfAllSources=function(){return(this||Re)._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Ji.prototype.sourceContentFor=function(e,m){for(var c=0;c<(this||Re)._sections.length;c++){var h=(this||Re)._sections[c].consumer.sourceContentFor(e,!0);if(h)return h}if(m)return null;throw Error('"'+e+'" is not in the SourceMap.');};Ji.prototype.generatedPositionFor=
function(e){for(var m=0;m<(this||Re)._sections.length;m++){var c=(this||Re)._sections[m];if(-1!==c.consumer._findSourceIndex(lg.getArg(e,"source"))){var h=c.consumer.generatedPositionFor(e);if(h)return{line:h.line+(c.generatedOffset.generatedLine-1),column:h.column+(c.generatedOffset.generatedLine===h.line?c.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};Ji.prototype._parseMappings=function(e,m){(this||Re).__generatedMappings=[];(this||Re).__originalMappings=[];for(e=0;e<(this||
Re)._sections.length;e++){m=(this||Re)._sections[e];for(var c=m.consumer._generatedMappings,h=0;h<c.length;h++){var n=c[h],b=m.consumer._sources.at(n.source);b=lg.computeSourceURL(m.consumer.sourceRoot,b,(this||Re)._sourceMapURL);(this||Re)._sources.add(b);b=(this||Re)._sources.indexOf(b);var d=null;n.name&&(d=m.consumer._names.at(n.name),(this||Re)._names.add(d),d=(this||Re)._names.indexOf(d));n={source:b,generatedLine:n.generatedLine+(m.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(m.generatedOffset.generatedLine===n.generatedLine?m.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:d};(this||Re).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||Re).__originalMappings.push(n)}}DH((this||Re).__generatedMappings,lg.compareByGeneratedPositionsDeflated);DH((this||Re).__originalMappings,lg.compareByOriginalPositions)};var ij="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mN=Pm,
Ola=/(\r?\n)/;Bl.fromStringWithSourceMap=function(e,m,c){function h(r,v){if(null===r||void 0===r.source)n.add(v);else{var y=c?mN.join(c,r.source):r.source;n.add(new Bl(r.originalLine,r.originalColumn,y,v,r.name))}}var n=new Bl,b=e.split(Ola),d=0,k=function(){var r=d<b.length?b[d++]:void 0,v=(d<b.length?b[d++]:void 0)||"";return r+v},a=1,f=0,l=null;m.eachMapping(function(r){if(null!==l)if(a<r.generatedLine)h(l,k()),a++,f=0;else{var v=b[d]||"",y=v.substr(0,r.generatedColumn-f);b[d]=v.substr(r.generatedColumn-
f);f=r.generatedColumn;h(l,y);l=r;return}for(;a<r.generatedLine;)n.add(k()),a++;f<r.generatedColumn&&(v=b[d]||"",n.add(v.substr(0,r.generatedColumn)),b[d]=v.substr(r.generatedColumn),f=r.generatedColumn);l=r},this||ij);d<b.length&&(l&&h(l,k()),n.add(b.splice(d).join("")));m.sources.forEach(function(r){var v=m.sourceContentFor(r);null!=v&&(null!=c&&(r=mN.join(c,r)),n.setSourceContent(r,v))});return n};Bl.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(m){this.add(m)},this||ij);else if(e.$$$isSourceNode$$$||
"string"===typeof e)e&&(this||ij).children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this||ij};Bl.prototype.prepend=function(e){if(Array.isArray(e))for(var m=e.length-1;0<=m;m--)this.prepend(e[m]);else if(e.$$$isSourceNode$$$||"string"===typeof e)(this||ij).children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this||ij};Bl.prototype.walk=function(e){for(var m,
c=0,h=(this||ij).children.length;c<h;c++)m=(this||ij).children[c],m.$$$isSourceNode$$$?m.walk(e):""!==m&&e(m,{source:(this||ij).source,line:(this||ij).line,column:(this||ij).column,name:(this||ij).name})};Bl.prototype.join=function(e){var m,c=(this||ij).children.length;if(0<c){var h=[];for(m=0;m<c-1;m++)h.push((this||ij).children[m]),h.push(e);h.push((this||ij).children[m]);(this||ij).children=h}return this||ij};Bl.prototype.replaceRight=function(e,m){var c=(this||ij).children[(this||ij).children.length-
1];c.$$$isSourceNode$$$?c.replaceRight(e,m):"string"===typeof c?(this||ij).children[(this||ij).children.length-1]=c.replace(e,m):(this||ij).children.push("".replace(e,m));return this||ij};Bl.prototype.setSourceContent=function(e,m){(this||ij).sourceContents[mN.toSetString(e)]=m};Bl.prototype.walkSourceContents=function(e){for(var m=0,c=(this||ij).children.length;m<c;m++)(this||ij).children[m].$$$isSourceNode$$$&&(this||ij).children[m].walkSourceContents(e);var h=Object.keys((this||ij).sourceContents);
m=0;for(c=h.length;m<c;m++)e(mN.fromSetString(h[m]),(this||ij).sourceContents[h[m]])};Bl.prototype.toString=function(){var e="";this.walk(function(m){e+=m});return e};Bl.prototype.toStringWithSourceMap=function(e){var m="",c=1,h=0,n=new hj(e),b=!1,d=null,k=null,a=null,f=null;this.walk(function(l,r){m+=l;null!==r.source&&null!==r.line&&null!==r.column?(d===r.source&&k===r.line&&a===r.column&&f===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:c,column:h},
name:r.name}),d=r.source,k=r.line,a=r.column,f=r.name,b=!0):b&&(n.addMapping({generated:{line:c,column:h}}),d=null,b=!1);for(var v=0,y=l.length;v<y;v++)10===l.charCodeAt(v)?(c++,h=0,v+1===y?(d=null,b=!1):b&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:c,column:h},name:r.name})):h++});this.walkSourceContents(function(l,r){n.setSourceContent(l,r)});return{code:m,map:n}};var hn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,No=
{};(function(){function e(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function m(ja,
Ba){var Ea="";for(Ba|=0;0<Ba;Ba>>>=1,ja+=ja)Ba&1&&(Ea+=ja);return Ea}function c(ja){var Ba=ja.length;return Ba&&ac.code.isLineTerminator(ja.charCodeAt(Ba-1))}function h(ja,Ba){for(var Ea in Ba)Ba.hasOwnProperty(Ea)&&(ja[Ea]=Ba[Ea]);return ja}function n(ja,Ba){function Ea(zd){return"object"===typeof zd&&zd instanceof Object&&!(zd instanceof RegExp)}var wb;for(wb in Ba)if(Ba.hasOwnProperty(wb)){var $b=Ba[wb];Ea($b)?Ea(ja[wb])?n(ja[wb],$b):ja[wb]=n({},$b):ja[wb]=$b}return ja}function b(ja,Ba){return 8232===
(ja&-2)?(Ba?"u":"\\u")+(8232===ja?"2028":"2029"):10===ja||13===ja?(Ba?"":"\\")+(10===ja?"n":"r"):String.fromCharCode(ja)}function d(ja,Ba){if(8===ja)return"\\b";if(12===ja)return"\\f";if(9===ja)return"\\t";var Ea=ja.toString(16).toUpperCase();return K||255<ja?"\\u"+"0000".slice(Ea.length)+Ea:0!==ja||ac.code.isDecimalDigit(Ba)?11===ja?"\\x0B":"\\x"+"00".slice(Ea.length)+Ea:"\\0"}function k(ja){if(92===ja)return"\\\\";if(10===ja)return"\\n";if(13===ja)return"\\r";if(8232===ja)return"\\u2028";if(8233===
ja)return"\\u2029";throw Error("Incorrectly classified character");}function a(ja){var Ba,Ea="";var wb=0;for(Ba=ja.length;wb<Ba;++wb){var $b=ja[wb];Ea+=Array.isArray($b)?a($b):$b}return Ea}function f(ja,Ba){if(!Fb)return Array.isArray(ja)?a(ja):ja;if(null==Ba){if(ja instanceof ea)return ja;Ba={}}return null==Ba.loc?new ea(null,null,Fb,ja,Ba.name||null):new ea(Ba.loc.start.line,Ba.loc.start.column,!0===Fb?Ba.loc.source||null:Fb,ja,Ba.name||null)}function l(){return xa?xa:" "}function r(ja,Ba){var Ea=
f(ja).toString();if(0===Ea.length)return[Ba];var wb=f(Ba).toString();if(0===wb.length)return[ja];Ea=Ea.charCodeAt(Ea.length-1);wb=wb.charCodeAt(0);return(43===Ea||45===Ea)&&Ea===wb||ac.code.isIdentifierPartES5(Ea)&&ac.code.isIdentifierPartES5(wb)||47===Ea&&105===wb?[ja,l(),Ba]:ac.code.isWhiteSpace(Ea)||ac.code.isLineTerminator(Ea)||ac.code.isWhiteSpace(wb)||ac.code.isLineTerminator(wb)?[ja,Ba]:[ja,xa,Ba]}function v(ja){var Ba=qa;qa+=Fa;ja(qa);qa=Ba}function y(ja,Ba){if("Line"===ja.type){if(c(ja.value))return"//"+
ja.value;Ba="//"+ja.value;Ub||(Ba+="\n");return Ba}if(wa.format.indent.adjustMultilineComment&&/[\n\r]/.test(ja.value)){var Ea,wb;ja=("/*"+ja.value+"*/").split(/\r\n|[\r\n]/);var $b=Number.MAX_VALUE;var zd=1;for(Ea=ja.length;zd<Ea;++zd){var yd=ja[zd];for(wb=0;wb<yd.length&&ac.code.isWhiteSpace(yd.charCodeAt(wb));)++wb;$b>wb&&($b=wb)}"undefined"!==typeof Ba?(yd=qa,"*"===ja[1][$b]&&(Ba+=" "),qa=Ba):($b&1&&--$b,yd=qa);zd=1;for(Ea=ja.length;zd<Ea;++zd)Ba=f([qa,ja[zd].slice($b)]),ja[zd]=Fb?Ba.join(""):
Ba;qa=yd;return ja.join("\n")}return"/*"+ja.value+"*/"}function A(ja,Ba){var Ea;if(ja.leadingComments&&0<ja.leadingComments.length){var wb=Ba;if(Ub){var $b=ja.leadingComments[0];Ba=[];var zd=$b.extendedRange;var yd=$b.range;var Mc=hc.substring(zd[0],yd[0]);var Me=(Mc.match(/\n/g)||[]).length;0<Me?(Ba.push(m("\n",Me)),Ba.push([qa,y($b)])):(Ba.push(Mc),Ba.push(y($b)));Me=yd;Mc=1;for(Ea=ja.leadingComments.length;Mc<Ea;Mc++)$b=ja.leadingComments[Mc],yd=$b.range,Me=hc.substring(Me[1],yd[0]),Me=(Me.match(/\n/g)||
[]).length,Ba.push(m("\n",Me)),Ba.push([qa,y($b)]),Me=yd;Mc=hc.substring(yd[1],zd[1]);Me=(Mc.match(/\n/g)||[]).length;Ba.push(m("\n",Me))}else for($b=ja.leadingComments[0],Ba=[],pa&&ja.type===Ic.Program&&0===ja.body.length&&Ba.push("\n"),Ba.push(y($b)),c(f(Ba).toString())||Ba.push("\n"),Mc=1,Ea=ja.leadingComments.length;Mc<Ea;++Mc)$b=ja.leadingComments[Mc],$b=[y($b)],c(f($b).toString())||$b.push("\n"),Ba.push([qa,$b]);Ba.push([qa,wb])}if(ja.trailingComments)if(Ub)$b=ja.trailingComments[0],zd=$b.extendedRange,
yd=$b.range,Mc=hc.substring(zd[0],yd[0]),Me=(Mc.match(/\n/g)||[]).length,0<Me?(Ba.push(m("\n",Me)),Ba.push([qa,y($b)])):(Ba.push(Mc),Ba.push(y($b)));else{wb=!c(f(Ba).toString());Mc=f([qa,Ba,Fa]).toString();for(Ea=Mc.length-1;0<=Ea&&!ac.code.isLineTerminator(Mc.charCodeAt(Ea));--Ea);zd=m(" ",Mc.length-1-Ea);Mc=0;for(Ea=ja.trailingComments.length;Mc<Ea;++Mc)$b=ja.trailingComments[Mc],wb?(Ba=0===Mc?[Ba,Fa]:[Ba,zd],Ba.push(y($b,zd))):Ba=[Ba,[qa,y($b)]],Mc===Ea-1||c(f(Ba).toString())||(Ba=[Ba,"\n"])}return Ba}
function E(ja,Ba,Ea){for(var wb=0;ja<Ba;ja++)"\n"===hc[ja]&&wb++;for(ja=1;ja<wb;ja++)Ea.push(aa)}function F(ja,Ba,Ea){return Ba<Ea?["(",ja,")"]:ja}function H(ja){var Ba;var Ea=ja.split(/\r\n|\n/);ja=1;for(Ba=Ea.length;ja<Ba;ja++)Ea[ja]=aa+qa+Ea[ja];return Ea}function J(){}function O(ja){return f(ja.name,ja)}function L(ja,Ba){return ja.async?"async"+(Ba?l():xa):""}function Y(ja){return ja.generator&&!wa.moz.starlessGenerator?"*"+xa:""}function S(ja){var Ba=ja.value,Ea="";Ba.async&&(Ea+=L(Ba,!ja.computed));
Ba.generator&&(Ea+=Y(Ba)?"*":"");return Ea}var ea,qa,Fa,K,Z,R,U,na,aa,xa,jb,ob,pa,ka,wa,Ka,Fb,hc,Ub;var ac=CH;var Ic=FV.Syntax;var Mb={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var ed={"||":Mb.LogicalOR,"&&":Mb.LogicalAND,"|":Mb.BitwiseOR,
"^":Mb.BitwiseXOR,"&":Mb.BitwiseAND,"==":Mb.Equality,"!=":Mb.Equality,"===":Mb.Equality,"!==":Mb.Equality,is:Mb.Equality,isnt:Mb.Equality,"<":Mb.Relational,">":Mb.Relational,"<=":Mb.Relational,">=":Mb.Relational,"in":Mb.Relational,"instanceof":Mb.Relational,"<<":Mb.BitwiseSHIFT,">>":Mb.BitwiseSHIFT,">>>":Mb.BitwiseSHIFT,"+":Mb.Additive,"-":Mb.Additive,"*":Mb.Multiplicative,"%":Mb.Multiplicative,"/":Mb.Multiplicative,"**":Mb.Exponentiation};J.prototype.maybeBlock=function(ja,Ba){var Ea,wb=this||hn;
var $b=!wa.comment||!ja.leadingComments;if(ja.type===Ic.BlockStatement&&$b)return[xa,this.generateStatement(ja,Ba)];if(ja.type===Ic.EmptyStatement&&$b)return";";v(function(){Ea=[aa,[qa,wb.generateStatement(ja,Ba)]]});return Ea};J.prototype.maybeBlockSuffix=function(ja,Ba){var Ea=c(f(Ba).toString());return ja.type!==Ic.BlockStatement||wa.comment&&ja.leadingComments||Ea?Ea?[Ba,qa]:[Ba,aa,qa]:[Ba,xa]};J.prototype.generatePattern=function(ja,Ba,Ea){return ja.type===Ic.Identifier?O(ja):this.generateExpression(ja,
Ba,Ea)};J.prototype.generateFunctionParams=function(ja){var Ba;var Ea=!1;if(ja.type!==Ic.ArrowFunctionExpression||ja.rest||ja.defaults&&0!==ja.defaults.length||1!==ja.params.length||ja.params[0].type!==Ic.Identifier){var wb=ja.type===Ic.ArrowFunctionExpression?[L(ja,!1)]:[];wb.push("(");ja.defaults&&(Ea=!0);var $b=0;for(Ba=ja.params.length;$b<Ba;++$b)Ea&&ja.defaults[$b]?wb.push(this.generateAssignment(ja.params[$b],ja.defaults[$b],"=",Mb.Assignment,7)):wb.push(this.generatePattern(ja.params[$b],Mb.Assignment,
7)),$b+1<Ba&&wb.push(","+xa);ja.rest&&(ja.params.length&&wb.push(","+xa),wb.push("..."),wb.push(O(ja.rest)));wb.push(")")}else wb=[L(ja,!0),O(ja.params[0])];return wb};J.prototype.generateFunctionBody=function(ja){var Ba=this.generateFunctionParams(ja);ja.type===Ic.ArrowFunctionExpression&&(Ba.push(xa),Ba.push("=>"));ja.expression?(Ba.push(xa),ja=this.generateExpression(ja.body,Mb.Assignment,7),"{"===ja.toString().charAt(0)&&(ja=["(",ja,")"]),Ba.push(ja)):Ba.push(this.maybeBlock(ja.body,9));return Ba};
J.prototype.generateIterationForStatement=function(ja,Ba,Ea){var wb=["for"+(Ba.await?l()+"await":"")+xa+"("],$b=this||hn;v(function(){Ba.left.type===Ic.VariableDeclaration?v(function(){wb.push(Ba.left.kind+l());wb.push($b.generateStatement(Ba.left.declarations[0],0))}):wb.push($b.generateExpression(Ba.left,Mb.Call,7));wb=r(wb,ja);wb=[r(wb,$b.generateExpression(Ba.right,Mb.Assignment,7)),")"]});wb.push(this.maybeBlock(Ba.body,Ea));return wb};J.prototype.generatePropertyKey=function(ja,Ba){var Ea=[];
Ba&&Ea.push("[");Ea.push(this.generateExpression(ja,Mb.Assignment,7));Ba&&Ea.push("]");return Ea};J.prototype.generateAssignment=function(ja,Ba,Ea,wb,$b){Mb.Assignment<wb&&($b|=1);return F([this.generateExpression(ja,Mb.Call,$b),xa+Ea+xa,this.generateExpression(Ba,Mb.Assignment,$b)],Mb.Assignment,wb)};J.prototype.semicolon=function(ja){return!ob&&ja&32?"":";"};J.Statement={BlockStatement:function(ja,Ba){var Ea,wb,$b=["{",aa],zd=this||hn;v(function(){0===ja.body.length&&Ub&&(Ea=ja.range,2<Ea[1]-Ea[0]&&
(wb=hc.substring(Ea[0]+1,Ea[1]-1),"\n"===wb[0]&&($b=["{"]),$b.push(wb)));var yd;var Mc=1;Ba&8&&(Mc|=16);var Me=0;for(yd=ja.body.length;Me<yd;++Me){Ub&&(0===Me&&(ja.body[0].leadingComments&&(Ea=ja.body[0].leadingComments[0].extendedRange,wb=hc.substring(Ea[0],Ea[1]),"\n"===wb[0]&&($b=["{"])),ja.body[0].leadingComments||E(ja.range[0],ja.body[0].range[0],$b)),0<Me&&(ja.body[Me-1].trailingComments||ja.body[Me].leadingComments||E(ja.body[Me-1].range[1],ja.body[Me].range[0],$b)));Me===yd-1&&(Mc|=32);var Fe=
ja.body[Me].leadingComments&&Ub?zd.generateStatement(ja.body[Me],Mc):[qa,zd.generateStatement(ja.body[Me],Mc)];$b.push(Fe);c(f(Fe).toString())||(Ub&&Me<yd-1?ja.body[Me+1].leadingComments||$b.push(aa):$b.push(aa));Ub&&Me===yd-1&&(ja.body[Me].trailingComments||E(ja.body[Me].range[1],ja.range[1],$b))}});$b.push([qa,"}"]);return $b},BreakStatement:function(ja,Ba){return ja.label?"break "+ja.label.name+this.semicolon(Ba):"break"+this.semicolon(Ba)},ContinueStatement:function(ja,Ba){return ja.label?"continue "+
ja.label.name+this.semicolon(Ba):"continue"+this.semicolon(Ba)},ClassBody:function(ja,Ba){var Ea=["{",aa],wb=this||hn;v(function($b){var zd;var yd=0;for(zd=ja.body.length;yd<zd;++yd)Ea.push($b),Ea.push(wb.generateExpression(ja.body[yd],Mb.Sequence,7)),yd+1<zd&&Ea.push(aa)});c(f(Ea).toString())||Ea.push(aa);Ea.push(qa);Ea.push("}");return Ea},ClassDeclaration:function(ja,Ba){Ba=["class"];ja.id&&(Ba=r(Ba,this.generateExpression(ja.id,Mb.Sequence,7)));if(ja.superClass){var Ea=r("extends",this.generateExpression(ja.superClass,
Mb.Unary,7));Ba=r(Ba,Ea)}Ba.push(xa);Ba.push(this.generateStatement(ja.body,33));return Ba},DirectiveStatement:function(ja,Ba){if(wa.raw&&ja.raw)return ja.raw+this.semicolon(Ba);ja=ja.directive;var Ea;var wb="double"===U?'"':"'";var $b=0;for(Ea=ja.length;$b<Ea;++$b){var zd=ja.charCodeAt($b);if(39===zd){wb='"';break}else if(34===zd){wb="'";break}else 92===zd&&++$b}return wb+ja+wb+this.semicolon(Ba)},DoWhileStatement:function(ja,Ba){var Ea=r("do",this.maybeBlock(ja.body,1));Ea=this.maybeBlockSuffix(ja.body,
Ea);return r(Ea,["while"+xa+"(",this.generateExpression(ja.test,Mb.Sequence,7),")"+this.semicolon(Ba)])},CatchClause:function(ja,Ba){var Ea,wb=this||hn;v(function(){if(ja.param){if(Ea=["catch"+xa+"(",wb.generateExpression(ja.param,Mb.Sequence,7),")"],ja.guard){var $b=wb.generateExpression(ja.guard,Mb.Sequence,7);Ea.splice(2,0," if ",$b)}}else Ea=["catch"]});Ea.push(this.maybeBlock(ja.body,1));return Ea},DebuggerStatement:function(ja,Ba){return"debugger"+this.semicolon(Ba)},EmptyStatement:function(ja,
Ba){return";"},ExportDefaultDeclaration:function(ja,Ba){var Ea=["export"];var wb=Ba&32?33:1;Ea=r(Ea,"default");return Ea=J.Statement.hasOwnProperty(ja.declaration.type)?r(Ea,this.generateStatement(ja.declaration,wb)):r(Ea,this.generateExpression(ja.declaration,Mb.Assignment,7)+this.semicolon(Ba))},ExportNamedDeclaration:function(ja,Ba){var Ea=["export"],wb=this||hn;var $b=Ba&32?33:1;if(ja.declaration)return r(Ea,this.generateStatement(ja.declaration,$b));ja.specifiers&&(0===ja.specifiers.length?Ea=
r(Ea,"{"+xa+"}"):ja.specifiers[0].type===Ic.ExportBatchSpecifier?Ea=r(Ea,this.generateExpression(ja.specifiers[0],Mb.Sequence,7)):(Ea=r(Ea,"{"),v(function(zd){var yd;Ea.push(aa);var Mc=0;for(yd=ja.specifiers.length;Mc<yd;++Mc)Ea.push(zd),Ea.push(wb.generateExpression(ja.specifiers[Mc],Mb.Sequence,7)),Mc+1<yd&&Ea.push(","+aa)}),c(f(Ea).toString())||Ea.push(aa),Ea.push(qa+"}")),ja.source?Ea=r(Ea,["from"+xa,this.generateExpression(ja.source,Mb.Sequence,7),this.semicolon(Ba)]):Ea.push(this.semicolon(Ba)));
return Ea},ExportAllDeclaration:function(ja,Ba){return["export"+xa,"*"+xa,"from"+xa,this.generateExpression(ja.source,Mb.Sequence,7),this.semicolon(Ba)]},ExpressionStatement:function(ja,Ba){function Ea(Mc){if("class"!==Mc.slice(0,5))return!1;Mc=Mc.charCodeAt(5);return 123===Mc||ac.code.isWhiteSpace(Mc)||ac.code.isLineTerminator(Mc)}function wb(Mc){if("function"!==Mc.slice(0,8))return!1;Mc=Mc.charCodeAt(8);return 40===Mc||ac.code.isWhiteSpace(Mc)||42===Mc||ac.code.isLineTerminator(Mc)}function $b(Mc){var Me;
if("async"!==Mc.slice(0,5)||!ac.code.isWhiteSpace(Mc.charCodeAt(5)))return!1;var Fe=6;for(Me=Mc.length;Fe<Me&&ac.code.isWhiteSpace(Mc.charCodeAt(Fe));++Fe);if(Fe===Me||"function"!==Mc.slice(Fe,Fe+8))return!1;Mc=Mc.charCodeAt(Fe+8);return 40===Mc||ac.code.isWhiteSpace(Mc)||42===Mc||ac.code.isLineTerminator(Mc)}var zd=[this.generateExpression(ja.expression,Mb.Sequence,7)];var yd=f(zd).toString();123===yd.charCodeAt(0)||Ea(yd)||wb(yd)||$b(yd)||ka&&Ba&16&&ja.expression.type===Ic.Literal&&"string"===typeof ja.expression.value?
zd=["(",zd,")"+this.semicolon(Ba)]:zd.push(this.semicolon(Ba));return zd},ImportDeclaration:function(ja,Ba){var Ea=this||hn;if(0===ja.specifiers.length)return["import",xa,this.generateExpression(ja.source,Mb.Sequence,7),this.semicolon(Ba)];var wb=["import"];var $b=0;ja.specifiers[$b].type===Ic.ImportDefaultSpecifier&&(wb=r(wb,[this.generateExpression(ja.specifiers[$b],Mb.Sequence,7)]),++$b);ja.specifiers[$b]&&(0!==$b&&wb.push(","),ja.specifiers[$b].type===Ic.ImportNamespaceSpecifier?wb=r(wb,[xa,this.generateExpression(ja.specifiers[$b],
Mb.Sequence,7)]):(wb.push(xa+"{"),1===ja.specifiers.length-$b?(wb.push(xa),wb.push(this.generateExpression(ja.specifiers[$b],Mb.Sequence,7)),wb.push(xa+"}"+xa)):(v(function(zd){var yd;wb.push(aa);var Mc=$b;for(yd=ja.specifiers.length;Mc<yd;++Mc)wb.push(zd),wb.push(Ea.generateExpression(ja.specifiers[Mc],Mb.Sequence,7)),Mc+1<yd&&wb.push(","+aa)}),c(f(wb).toString())||wb.push(aa),wb.push(qa+"}"+xa))));return wb=r(wb,["from"+xa,this.generateExpression(ja.source,Mb.Sequence,7),this.semicolon(Ba)])},VariableDeclarator:function(ja,
Ba){Ba=Ba&1?7:6;return ja.init?[this.generateExpression(ja.id,Mb.Assignment,Ba),xa,"=",xa,this.generateExpression(ja.init,Mb.Assignment,Ba)]:this.generatePattern(ja.id,Mb.Assignment,Ba)},VariableDeclaration:function(ja,Ba){function Ea(){zd=ja.declarations[0];wa.comment&&zd.leadingComments?(Mc.push("\n"),Mc.push([qa,yd.generateStatement(zd,Me)])):(Mc.push(l()),Mc.push(yd.generateStatement(zd,Me)));wb=1;for($b=ja.declarations.length;wb<$b;++wb)zd=ja.declarations[wb],wa.comment&&zd.leadingComments?(Mc.push(","+
aa),Mc.push([qa,yd.generateStatement(zd,Me)])):(Mc.push(","+xa),Mc.push(yd.generateStatement(zd,Me)))}var wb,$b,zd,yd=this||hn;var Mc=[ja.kind];var Me=Ba&1?1:0;1<ja.declarations.length?v(Ea):Ea();Mc.push(this.semicolon(Ba));return Mc},ThrowStatement:function(ja,Ba){return[r("throw",this.generateExpression(ja.argument,Mb.Sequence,7)),this.semicolon(Ba)]},TryStatement:function(ja,Ba){var Ea;Ba=["try",this.maybeBlock(ja.block,1)];Ba=this.maybeBlockSuffix(ja.block,Ba);if(ja.handlers){var wb=0;for(Ea=
ja.handlers.length;wb<Ea;++wb)if(Ba=r(Ba,this.generateStatement(ja.handlers[wb],1)),ja.finalizer||wb+1!==Ea)Ba=this.maybeBlockSuffix(ja.handlers[wb].body,Ba)}else{var $b=ja.guardedHandlers||[];wb=0;for(Ea=$b.length;wb<Ea;++wb)if(Ba=r(Ba,this.generateStatement($b[wb],1)),ja.finalizer||wb+1!==Ea)Ba=this.maybeBlockSuffix($b[wb].body,Ba);if(ja.handler)if(Array.isArray(ja.handler))for(wb=0,Ea=ja.handler.length;wb<Ea;++wb){if(Ba=r(Ba,this.generateStatement(ja.handler[wb],1)),ja.finalizer||wb+1!==Ea)Ba=
this.maybeBlockSuffix(ja.handler[wb].body,Ba)}else Ba=r(Ba,this.generateStatement(ja.handler,1)),ja.finalizer&&(Ba=this.maybeBlockSuffix(ja.handler.body,Ba))}ja.finalizer&&(Ba=r(Ba,["finally",this.maybeBlock(ja.finalizer,1)]));return Ba},SwitchStatement:function(ja,Ba){var Ea,wb,$b=this||hn;v(function(){Ea=["switch"+xa+"(",$b.generateExpression(ja.discriminant,Mb.Sequence,7),")"+xa+"{"+aa]});if(ja.cases){var zd=1;var yd=0;for(wb=ja.cases.length;yd<wb;++yd)yd===wb-1&&(zd|=32),Ba=[qa,this.generateStatement(ja.cases[yd],
zd)],Ea.push(Ba),c(f(Ba).toString())||Ea.push(aa)}Ea.push([qa,"}"]);return Ea},SwitchCase:function(ja,Ba){var Ea,wb,$b,zd,yd,Mc=this||hn;v(function(){Ea=ja.test?[r("case",Mc.generateExpression(ja.test,Mb.Sequence,7)),":"]:["default:"];$b=0;(zd=ja.consequent.length)&&ja.consequent[0].type===Ic.BlockStatement&&(wb=Mc.maybeBlock(ja.consequent[0],1),Ea.push(wb),$b=1);$b===zd||c(f(Ea).toString())||Ea.push(aa);for(yd=1;$b<zd;++$b)$b===zd-1&&Ba&32&&(yd|=32),wb=[qa,Mc.generateStatement(ja.consequent[$b],
yd)],Ea.push(wb),$b+1===zd||c(f(wb).toString())||Ea.push(aa)});return Ea},IfStatement:function(ja,Ba){var Ea=this||hn;v(function(){$b=["if"+xa+"(",Ea.generateExpression(ja.test,Mb.Sequence,7),")"]});var wb=1;Ba&32&&(wb|=32);if(ja.alternate){$b.push(this.maybeBlock(ja.consequent,1));var $b=this.maybeBlockSuffix(ja.consequent,$b);$b=ja.alternate.type===Ic.IfStatement?r($b,["else ",this.generateStatement(ja.alternate,wb)]):r($b,r("else",this.maybeBlock(ja.alternate,wb)))}else $b.push(this.maybeBlock(ja.consequent,
wb));return $b},ForStatement:function(ja,Ba){var Ea,wb=this||hn;v(function(){Ea=["for"+xa+"("];ja.init?ja.init.type===Ic.VariableDeclaration?Ea.push(wb.generateStatement(ja.init,0)):(Ea.push(wb.generateExpression(ja.init,Mb.Sequence,6)),Ea.push(";")):Ea.push(";");ja.test&&(Ea.push(xa),Ea.push(wb.generateExpression(ja.test,Mb.Sequence,7)));Ea.push(";");ja.update&&(Ea.push(xa),Ea.push(wb.generateExpression(ja.update,Mb.Sequence,7)));Ea.push(")")});Ea.push(this.maybeBlock(ja.body,Ba&32?33:1));return Ea},
ForInStatement:function(ja,Ba){return this.generateIterationForStatement("in",ja,Ba&32?33:1)},ForOfStatement:function(ja,Ba){return this.generateIterationForStatement("of",ja,Ba&32?33:1)},LabeledStatement:function(ja,Ba){return[ja.label.name+":",this.maybeBlock(ja.body,Ba&32?33:1)]},Program:function(ja,Ba){var Ea;var wb=ja.body.length;Ba=[pa&&0<wb?"\n":""];var $b=17;for(Ea=0;Ea<wb;++Ea){pa||Ea!==wb-1||($b|=32);Ub&&(0===Ea&&(ja.body[0].leadingComments||E(ja.range[0],ja.body[Ea].range[0],Ba)),0<Ea&&
(ja.body[Ea-1].trailingComments||ja.body[Ea].leadingComments||E(ja.body[Ea-1].range[1],ja.body[Ea].range[0],Ba)));var zd=[qa,this.generateStatement(ja.body[Ea],$b)];Ba.push(zd);Ea+1<wb&&!c(f(zd).toString())&&(Ub?ja.body[Ea+1].leadingComments||Ba.push(aa):Ba.push(aa));Ub&&Ea===wb-1&&(ja.body[Ea].trailingComments||E(ja.body[Ea].range[1],ja.range[1],Ba))}return Ba},FunctionDeclaration:function(ja,Ba){return[L(ja,!0),"function",Y(ja)||l(),ja.id?O(ja.id):"",this.generateFunctionBody(ja)]},ReturnStatement:function(ja,
Ba){return ja.argument?[r("return",this.generateExpression(ja.argument,Mb.Sequence,7)),this.semicolon(Ba)]:["return"+this.semicolon(Ba)]},WhileStatement:function(ja,Ba){var Ea,wb=this||hn;v(function(){Ea=["while"+xa+"(",wb.generateExpression(ja.test,Mb.Sequence,7),")"]});Ea.push(this.maybeBlock(ja.body,Ba&32?33:1));return Ea},WithStatement:function(ja,Ba){var Ea,wb=this||hn;v(function(){Ea=["with"+xa+"(",wb.generateExpression(ja.object,Mb.Sequence,7),")"]});Ea.push(this.maybeBlock(ja.body,Ba&32?33:
1));return Ea}};h(J.prototype,J.Statement);J.Expression={SequenceExpression:function(ja,Ba,Ea){var wb;Mb.Sequence<Ba&&(Ea|=1);var $b=[];var zd=0;for(wb=ja.expressions.length;zd<wb;++zd)$b.push(this.generateExpression(ja.expressions[zd],Mb.Assignment,Ea)),zd+1<wb&&$b.push(","+xa);return F($b,Mb.Sequence,Ba)},AssignmentExpression:function(ja,Ba,Ea){return this.generateAssignment(ja.left,ja.right,ja.operator,Ba,Ea)},ArrowFunctionExpression:function(ja,Ba,Ea){return F(this.generateFunctionBody(ja),Mb.ArrowFunction,
Ba)},ConditionalExpression:function(ja,Ba,Ea){Mb.Conditional<Ba&&(Ea|=1);return F([this.generateExpression(ja.test,Mb.LogicalOR,Ea),xa+"?"+xa,this.generateExpression(ja.consequent,Mb.Assignment,Ea),xa+":"+xa,this.generateExpression(ja.alternate,Mb.Assignment,Ea)],Mb.Conditional,Ba)},LogicalExpression:function(ja,Ba,Ea){return this.BinaryExpression(ja,Ba,Ea)},BinaryExpression:function(ja,Ba,Ea){var wb=ed[ja.operator];var $b="**"===ja.operator?Mb.Postfix:wb;var zd="**"===ja.operator?wb:wb+1;wb<Ba&&
(Ea|=1);$b=this.generateExpression(ja.left,$b,Ea);var yd=$b.toString();yd=47===yd.charCodeAt(yd.length-1)&&ac.code.isIdentifierPartES5(ja.operator.charCodeAt(0))?[$b,l(),ja.operator]:r($b,ja.operator);$b=this.generateExpression(ja.right,zd,Ea);"/"===ja.operator&&"/"===$b.toString().charAt(0)||"<"===ja.operator.slice(-1)&&"!--"===$b.toString().slice(0,3)?(yd.push(l()),yd.push($b)):yd=r(yd,$b);return"in"!==ja.operator||Ea&1?F(yd,wb,Ba):["(",yd,")"]},CallExpression:function(ja,Ba,Ea){var wb;var $b=[this.generateExpression(ja.callee,
Mb.Call,3)];ja.optional&&$b.push("?.");$b.push("(");var zd=0;for(wb=ja.arguments.length;zd<wb;++zd)$b.push(this.generateExpression(ja.arguments[zd],Mb.Assignment,7)),zd+1<wb&&$b.push(","+xa);$b.push(")");return Ea&2?F($b,Mb.Call,Ba):["(",$b,")"]},ChainExpression:function(ja,Ba,Ea){Mb.OptionalChaining<Ba&&(Ea|=2);ja=this.generateExpression(ja.expression,Mb.OptionalChaining,Ea);return F(ja,Mb.OptionalChaining,Ba)},NewExpression:function(ja,Ba,Ea){var wb=ja.arguments.length;var $b=r("new",this.generateExpression(ja.callee,
Mb.New,Ea&4&&!jb&&0===wb?5:1));if(!(Ea&4)||jb||0<wb){$b.push("(");for(Ea=0;Ea<wb;++Ea)$b.push(this.generateExpression(ja.arguments[Ea],Mb.Assignment,7)),Ea+1<wb&&$b.push(","+xa);$b.push(")")}return F($b,Mb.New,Ba)},MemberExpression:function(ja,Ba,Ea){var wb=[this.generateExpression(ja.object,Mb.Call,Ea&2?3:1)];ja.computed?(ja.optional&&wb.push("?."),wb.push("["),wb.push(this.generateExpression(ja.property,Mb.Sequence,Ea&2?7:5)),wb.push("]")):(ja.optional||ja.object.type!==Ic.Literal||"number"!==typeof ja.object.value||
(Ea=f(wb).toString(),0>Ea.indexOf(".")&&!/[eExX]/.test(Ea)&&ac.code.isDecimalDigit(Ea.charCodeAt(Ea.length-1))&&!(2<=Ea.length&&48===Ea.charCodeAt(0))&&wb.push(" ")),wb.push(ja.optional?"?.":"."),wb.push(O(ja.property)));return F(wb,Mb.Member,Ba)},MetaProperty:function(ja,Ba,Ea){Ea=[];Ea.push("string"===typeof ja.meta?ja.meta:O(ja.meta));Ea.push(".");Ea.push("string"===typeof ja.property?ja.property:O(ja.property));return F(Ea,Mb.Member,Ba)},UnaryExpression:function(ja,Ba,Ea){var wb=this.generateExpression(ja.argument,
Mb.Unary,7);if(""===xa)Ea=r(ja.operator,wb);else if(Ea=[ja.operator],2<ja.operator.length)Ea=r(Ea,wb);else{ja=f(Ea).toString();var $b=ja.charCodeAt(ja.length-1);ja=wb.toString().charCodeAt(0);((43===$b||45===$b)&&$b===ja||ac.code.isIdentifierPartES5($b)&&ac.code.isIdentifierPartES5(ja))&&Ea.push(l());Ea.push(wb)}return F(Ea,Mb.Unary,Ba)},YieldExpression:function(ja,Ba,Ea){Ea=ja.delegate?"yield*":"yield";ja.argument&&(Ea=r(Ea,this.generateExpression(ja.argument,Mb.Yield,7)));return F(Ea,Mb.Yield,Ba)},
AwaitExpression:function(ja,Ba,Ea){ja=r(ja.all?"await*":"await",this.generateExpression(ja.argument,Mb.Await,7));return F(ja,Mb.Await,Ba)},UpdateExpression:function(ja,Ba,Ea){return ja.prefix?F([ja.operator,this.generateExpression(ja.argument,Mb.Unary,7)],Mb.Unary,Ba):F([this.generateExpression(ja.argument,Mb.Postfix,7),ja.operator],Mb.Postfix,Ba)},FunctionExpression:function(ja,Ba,Ea){Ba=[L(ja,!0),"function"];ja.id?(Ba.push(Y(ja)||l()),Ba.push(O(ja.id))):Ba.push(Y(ja)||xa);Ba.push(this.generateFunctionBody(ja));
return Ba},ArrayPattern:function(ja,Ba,Ea){return this.ArrayExpression(ja,Ba,Ea,!0)},ArrayExpression:function(ja,Ba,Ea,wb){var $b=this||hn;if(!ja.elements.length)return"[]";var zd=wb?!1:1<ja.elements.length;var yd=["[",zd?aa:""];v(function(Mc){var Me;var Fe=0;for(Me=ja.elements.length;Fe<Me;++Fe)ja.elements[Fe]?(yd.push(zd?Mc:""),yd.push($b.generateExpression(ja.elements[Fe],Mb.Assignment,7))):(zd&&yd.push(Mc),Fe+1===Me&&yd.push(",")),Fe+1<Me&&yd.push(","+(zd?aa:xa))});zd&&!c(f(yd).toString())&&yd.push(aa);
yd.push(zd?qa:"");yd.push("]");return yd},RestElement:function(ja,Ba,Ea){return"..."+this.generatePattern(ja.argument)},ClassExpression:function(ja,Ba,Ea){Ba=["class"];ja.id&&(Ba=r(Ba,this.generateExpression(ja.id,Mb.Sequence,7)));ja.superClass&&(Ea=r("extends",this.generateExpression(ja.superClass,Mb.Unary,7)),Ba=r(Ba,Ea));Ba.push(xa);Ba.push(this.generateStatement(ja.body,33));return Ba},MethodDefinition:function(ja,Ba,Ea){Ba=ja["static"]?["static"+xa]:[];ja="get"===ja.kind||"set"===ja.kind?[r(ja.kind,
this.generatePropertyKey(ja.key,ja.computed)),this.generateFunctionBody(ja.value)]:[S(ja),this.generatePropertyKey(ja.key,ja.computed),this.generateFunctionBody(ja.value)];return r(Ba,ja)},Property:function(ja,Ba,Ea){return"get"===ja.kind||"set"===ja.kind?[ja.kind,l(),this.generatePropertyKey(ja.key,ja.computed),this.generateFunctionBody(ja.value)]:ja.shorthand?"AssignmentPattern"===ja.value.type?this.AssignmentPattern(ja.value,Mb.Sequence,7):this.generatePropertyKey(ja.key,ja.computed):ja.method?
[S(ja),this.generatePropertyKey(ja.key,ja.computed),this.generateFunctionBody(ja.value)]:[this.generatePropertyKey(ja.key,ja.computed),":"+xa,this.generateExpression(ja.value,Mb.Assignment,7)]},ObjectExpression:function(ja,Ba,Ea){var wb,$b,zd=this||hn;if(!ja.properties.length)return"{}";var yd=1<ja.properties.length;v(function(){$b=zd.generateExpression(ja.properties[0],Mb.Sequence,7)});if(!yd&&!/[\r\n]/g.test(f($b).toString()))return["{",xa,$b,xa,"}"];v(function(Mc){var Me;wb=["{",aa,Mc,$b];if(yd){wb.push(","+
aa);var Fe=1;for(Me=ja.properties.length;Fe<Me;++Fe)wb.push(Mc),wb.push(zd.generateExpression(ja.properties[Fe],Mb.Sequence,7)),Fe+1<Me&&wb.push(","+aa)}});c(f(wb).toString())||wb.push(aa);wb.push(qa);wb.push("}");return wb},AssignmentPattern:function(ja,Ba,Ea){return this.generateAssignment(ja.left,ja.right,"=",Ba,Ea)},ObjectPattern:function(ja,Ba,Ea){var wb=this||hn;if(!ja.properties.length)return"{}";var $b=!1;if(1===ja.properties.length){var zd=ja.properties[0];zd.type===Ic.Property&&zd.value.type!==
Ic.Identifier&&($b=!0)}else for(Ba=0,Ea=ja.properties.length;Ba<Ea;++Ba)if(zd=ja.properties[Ba],zd.type===Ic.Property&&!zd.shorthand){$b=!0;break}var yd=["{",$b?aa:""];v(function(Mc){var Me;var Fe=0;for(Me=ja.properties.length;Fe<Me;++Fe)yd.push($b?Mc:""),yd.push(wb.generateExpression(ja.properties[Fe],Mb.Sequence,7)),Fe+1<Me&&yd.push(","+($b?aa:xa))});$b&&!c(f(yd).toString())&&yd.push(aa);yd.push($b?qa:"");yd.push("}");return yd},ThisExpression:function(ja,Ba,Ea){return"this"},Super:function(ja,
Ba,Ea){return"super"},Identifier:function(ja,Ba,Ea){return O(ja)},ImportDefaultSpecifier:function(ja,Ba,Ea){return O(ja.id||ja.local)},ImportNamespaceSpecifier:function(ja,Ba,Ea){Ba=["*"];(ja=ja.id||ja.local)&&Ba.push(xa+"as"+l()+O(ja));return Ba},ImportSpecifier:function(ja,Ba,Ea){Ba=ja.imported;Ea=[Ba.name];(ja=ja.local)&&ja.name!==Ba.name&&Ea.push(l()+"as"+l()+O(ja));return Ea},ExportSpecifier:function(ja,Ba,Ea){Ba=ja.local;Ea=[Ba.name];(ja=ja.exported)&&ja.name!==Ba.name&&Ea.push(l()+"as"+l()+
O(ja));return Ea},Literal:function(ja,Ba,Ea){if(ja.hasOwnProperty("raw")&&Ka&&wa.raw)try{var wb=Ka(ja.raw).body[0].expression;if(wb.type===Ic.Literal&&wb.value===ja.value)return ja.raw}catch(Fe){}if(ja.regex)return"/"+ja.regex.pattern+"/"+ja.regex.flags;if(null===ja.value)return"null";if("string"===typeof ja.value){ja=ja.value;Ba="";var $b=0,zd=0,yd;Ea=0;for(wb=ja.length;Ea<wb;++Ea){var Mc=ja.charCodeAt(Ea);if(39===Mc)++$b;else if(34===Mc)++zd;else if(47===Mc&&K)Ba+="\\";else if(ac.code.isLineTerminator(Mc)||
92===Mc){Ba+=k(Mc);continue}else if(!ac.code.isIdentifierPartES5(Mc)&&(K&&32>Mc||!K&&!na&&(32>Mc||126<Mc))){Ba+=d(Mc,ja.charCodeAt(Ea+1));continue}Ba+=String.fromCharCode(Mc)}var Me=(yd=!("double"===U||"auto"===U&&zd<$b))?"'":'"';if(yd?$b:zd){ja=Ba;Ba=Me;Ea=0;for(wb=ja.length;Ea<wb;++Ea){Mc=ja.charCodeAt(Ea);if(39===Mc&&yd||34===Mc&&!yd)Ba+="\\";Ba+=String.fromCharCode(Mc)}ja=Ba+Me}else ja=Me+Ba+Me;return ja}if("number"===typeof ja.value){ja=ja.value;if(ja!==ja)throw Error("Numeric literal whose value is NaN");
if(0>ja||0===ja&&0>1/ja)throw Error("Numeric literal whose value is negative");if(ja===1/0)ja=K?"null":Z?"1e400":"1e+400";else{Ba=""+ja;if(Z&&!(3>Ba.length)){Ea=Ba.indexOf(".");K||48!==Ba.charCodeAt(0)||1!==Ea||(Ea=0,Ba=Ba.slice(1));wb=Ba;Ba=Ba.replace("e+","e");Mc=0;0<($b=wb.indexOf("e"))&&(Mc=+wb.slice($b+1),wb=wb.slice(0,$b));0<=Ea&&(Mc-=wb.length-Ea-1,wb=+(wb.slice(0,Ea)+wb.slice(Ea+1))+"");for($b=0;48===wb.charCodeAt(wb.length+$b-1);)--$b;0!==$b&&(Mc-=$b,wb=wb.slice(0,$b));0!==Mc&&(wb+="e"+Mc);
(wb.length<Ba.length||R&&1E12<ja&&Math.floor(ja)===ja&&(wb="0x"+ja.toString(16)).length<Ba.length)&&+wb===ja&&(Ba=wb)}ja=Ba}return ja}if("boolean"===typeof ja.value)return ja.value?"true":"false";ja=ja.value;Ba=ja.toString();if(ja.source)if(Ea=Ba.match(/\/([^/]*)$/)){Ea=Ea[1];Ba="";yd=zd=!1;wb=0;for(Mc=ja.source.length;wb<Mc;++wb)$b=ja.source.charCodeAt(wb),yd?(Ba+=b($b,yd),yd=!1):(zd?93===$b&&(zd=!1):47===$b?Ba+="\\":91===$b&&(zd=!0),Ba+=b($b,yd),yd=92===$b);ja="/"+Ba+"/"+Ea}else ja=Ba;else ja=Ba;
return ja},GeneratorExpression:function(ja,Ba,Ea){return this.ComprehensionExpression(ja,Ba,Ea)},ComprehensionExpression:function(ja,Ba,Ea){var wb,$b,zd=this||hn;var yd=ja.type===Ic.GeneratorExpression?["("]:["["];if(wa.moz.comprehensionExpressionStartsWithAssignment){var Mc=this.generateExpression(ja.body,Mb.Assignment,7);yd.push(Mc)}ja.blocks&&v(function(){wb=0;for($b=ja.blocks.length;wb<$b;++wb)Mc=zd.generateExpression(ja.blocks[wb],Mb.Sequence,7),0<wb||wa.moz.comprehensionExpressionStartsWithAssignment?
yd=r(yd,Mc):yd.push(Mc)});ja.filter&&(yd=r(yd,"if"+xa),Mc=this.generateExpression(ja.filter,Mb.Sequence,7),yd=r(yd,["(",Mc,")"]));wa.moz.comprehensionExpressionStartsWithAssignment||(Mc=this.generateExpression(ja.body,Mb.Assignment,7),yd=r(yd,Mc));yd.push(ja.type===Ic.GeneratorExpression?")":"]");return yd},ComprehensionBlock:function(ja,Ba,Ea){Ba=ja.left.type===Ic.VariableDeclaration?[ja.left.kind,l(),this.generateStatement(ja.left.declarations[0],0)]:this.generateExpression(ja.left,Mb.Call,7);Ba=
r(Ba,ja.of?"of":"in");Ba=r(Ba,this.generateExpression(ja.right,Mb.Sequence,7));return["for"+xa+"(",Ba,")"]},SpreadElement:function(ja,Ba,Ea){return["...",this.generateExpression(ja.argument,Mb.Assignment,7)]},TaggedTemplateExpression:function(ja,Ba,Ea){var wb=3;Ea&2||(wb=1);ja=[this.generateExpression(ja.tag,Mb.Call,wb),this.generateExpression(ja.quasi,Mb.Primary,4)];return F(ja,Mb.TaggedTemplate,Ba)},TemplateElement:function(ja,Ba,Ea){return ja.value.raw},TemplateLiteral:function(ja,Ba,Ea){var wb;
Ba=["`"];Ea=0;for(wb=ja.quasis.length;Ea<wb;++Ea)Ba.push(this.generateExpression(ja.quasis[Ea],Mb.Primary,7)),Ea+1<wb&&(Ba.push("${"+xa),Ba.push(this.generateExpression(ja.expressions[Ea],Mb.Sequence,7)),Ba.push(xa+"}"));Ba.push("`");return Ba},ModuleSpecifier:function(ja,Ba,Ea){return this.Literal(ja,Ba,Ea)},ImportExpression:function(ja,Ba,Ea){return F(["import(",this.generateExpression(ja.source,Mb.Assignment,7),")"],Mb.Call,Ba)}};h(J.prototype,J.Expression);J.prototype.generateExpression=function(ja,
Ba,Ea){var wb=ja.type||Ic.Property;if(wa.verbatim&&ja.hasOwnProperty(wa.verbatim))return wb=ja[wa.verbatim],"string"===typeof wb?Ea=F(H(wb),Mb.Sequence,Ba):(Ea=H(wb.content),wb=null!=wb.precedence?wb.precedence:Mb.Sequence,Ea=F(Ea,wb,Ba)),f(Ea,ja);Ba=this[wb](ja,Ba,Ea);wa.comment&&(Ba=A(ja,Ba));return f(Ba,ja)};J.prototype.generateStatement=function(ja,Ba){Ba=this[ja.type](ja,Ba);wa.comment&&(Ba=A(ja,Ba));var Ea=f(Ba).toString();ja.type!==Ic.Program||pa||""!==aa||"\n"!==Ea.charAt(Ea.length-1)||(Ba=
Fb?f(Ba).replaceRight(/\s+$/,""):Ea.replace(/\s+$/,""));return f(Ba,ja)};var Bd=e().format;No.version="2.0.0";No.generate=function(ja,Ba){var Ea=e();null!=Ba?("string"===typeof Ba.indent&&(Ea.format.indent.style=Ba.indent),"number"===typeof Ba.base&&(Ea.format.indent.base=Ba.base),Ba=n(Ea,Ba),Fa=Ba.format.indent.style,qa="string"===typeof Ba.base?Ba.base:m(Fa,Ba.format.indent.base)):(Ba=Ea,Fa=Ba.format.indent.style,qa=m(Fa,Ba.format.indent.base));K=Ba.format.json;Z=Ba.format.renumber;R=K?!1:Ba.format.hexadecimal;
U=K?"double":Ba.format.quotes;na=Ba.format.escapeless;aa=Ba.format.newline;xa=Ba.format.space;Ba.format.compact&&(aa=xa=Fa=qa="");jb=Ba.format.parentheses;ob=Ba.format.semicolons;pa=Ba.format.safeConcatenation;ka=Ba.directive;Ka=K?null:Ba.parse;Fb=Ba.sourceMap;hc=Ba.sourceCode;Ub=Ba.format.preserveBlankLines&&null!==hc;wa=Ba;Fb&&(ea=No.browser?hn.sourceMap.SourceNode:Bl);Ea=new J;if(J.Statement.hasOwnProperty(ja.type))ja=Ea.generateStatement(ja,1);else if(J.Expression.hasOwnProperty(ja.type))ja=Ea.generateExpression(ja,
Mb.Sequence,7);else throw Error("Unknown node type: "+ja.type);if(!Fb)return ja={code:ja.toString(),map:null},Ba.sourceMapWithCode?ja:ja.code;ja=ja.toStringWithSourceMap({file:Ba.file,sourceRoot:Ba.sourceMapRoot});Ba.sourceContent&&ja.map.setSourceContent(Ba.sourceMap,Ba.sourceContent);return Ba.sourceMapWithCode?ja:ja.map.toString()};No.attachComments=FV.attachComments;No.Precedence=n({},Mb);No.browser=!1;No.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,
compact:!0,parentheses:!1,semicolons:!1};No.FORMAT_DEFAULTS=Bd})();var Pla=Object.freeze({__proto__:null,"default":No,FORMAT_DEFAULTS:No.FORMAT_DEFAULTS,FORMAT_MINIFY:No.FORMAT_MINIFY,Precedence:No.Precedence,attachComments:No.attachComments,browser:No.browser,generate:No.generate,version:No.version}),Hq=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");Hq.stringify=qm;Hq.obj=dg;Hq.escodegen=Pla;Hq.es=Hq.escodegen.escodegen||Hq.escodegen;var KE=Hq.es;Hq.escodegen=KE;Hq.es=KE;Hq.default=
qm;var JV={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Qla={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},Rla=/^in(stanceof)?$/,KV="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
t8="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
Xea=new RegExp("["+KV+"]"),Yea=new RegExp("["+KV+t8+"]");KV=t8=null;var y_=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Zea=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],Dj=function(e,m){void 0===m&&(m={});this.label=e;this.keyword=m.keyword;this.beforeExpr=!!m.beforeExpr;this.startsExpr=!!m.startsExpr;this.isLoop=!!m.isLoop;this.isAssign=!!m.isAssign;this.prefix=!!m.prefix;this.postfix=!!m.postfix;this.binop=m.binop||null;this.updateContext=null},qs={beforeExpr:!0},jr={startsExpr:!0},XJ={},Ta={num:new Dj("num",jr),regexp:new Dj("regexp",jr),string:new Dj("string",jr),name:new Dj("name",jr),eof:new Dj("eof"),bracketL:new Dj("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new Dj("]"),braceL:new Dj("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Dj("}"),parenL:new Dj("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Dj(")"),comma:new Dj(",",qs),semi:new Dj(";",qs),colon:new Dj(":",qs),dot:new Dj("."),question:new Dj("?",qs),questionDot:new Dj("?."),arrow:new Dj("=>",qs),template:new Dj("template"),invalidTemplate:new Dj("invalidTemplate"),ellipsis:new Dj("...",qs),backQuote:new Dj("`",jr),dollarBraceL:new Dj("${",{beforeExpr:!0,startsExpr:!0}),eq:new Dj("=",{beforeExpr:!0,
isAssign:!0}),assign:new Dj("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Dj("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Dj("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Wh("||",1),logicalAND:Wh("&&",2),bitwiseOR:Wh("|",3),bitwiseXOR:Wh("^",4),bitwiseAND:Wh("&",5),equality:Wh("==/!=/===/!==",6),relational:Wh("</>/<=/>=",7),bitShift:Wh("<</>>/>>>",8),plusMin:new Dj("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Wh("%",10),star:Wh("*",10),slash:Wh("/",10),starstar:new Dj("**",
{beforeExpr:!0}),coalesce:Wh("??",1),_break:hg("break"),_case:hg("case",qs),_catch:hg("catch"),_continue:hg("continue"),_debugger:hg("debugger"),_default:hg("default",qs),_do:hg("do",{isLoop:!0,beforeExpr:!0}),_else:hg("else",qs),_finally:hg("finally"),_for:hg("for",{isLoop:!0}),_function:hg("function",jr),_if:hg("if"),_return:hg("return",qs),_switch:hg("switch"),_throw:hg("throw",qs),_try:hg("try"),_var:hg("var"),_const:hg("const"),_while:hg("while",{isLoop:!0}),_with:hg("with"),_new:hg("new",{beforeExpr:!0,
startsExpr:!0}),_this:hg("this",jr),_super:hg("super",jr),_class:hg("class",jr),_extends:hg("extends",qs),_export:hg("export"),_import:hg("import",jr),_null:hg("null",jr),_true:hg("true",jr),_false:hg("false",jr),_in:hg("in",{beforeExpr:!0,binop:7}),_instanceof:hg("instanceof",{beforeExpr:!0,binop:7}),_typeof:hg("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:hg("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:hg("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},iq=/\r\n?|\n|\u2028|\u2029/,
ny=new RegExp(iq.source,"g"),LV=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,rs=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,u8=Object.prototype,YJ=u8.hasOwnProperty,Sla=u8.toString,A_=Array.isArray||function(e){return"[object Array]"===Sla.call(e)},$C=function(e,m){this.line=e;this.column=m};$C.prototype.offset=function(e){return new $C(this.line,this.column+e)};var BA=function(e,m,c){this.start=m;this.end=c;null!==e.sourceFile&&(this.source=e.sourceFile)},dG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},z_=!1,Gl=function(e,m,c){this.options=e=hd(e);this.sourceFile=e.sourceFile;this.keywords=Oj(Qla[6<=e.ecmaVersion?6:"module"===e.sourceType?"5module":5]);var h="";!0!==e.allowReserved&&(h=JV[6<=e.ecmaVersion?6:5===e.ecmaVersion?5:3],"module"===
e.sourceType&&(h+=" await"));this.reservedWords=Oj(h);h=(h?h+" ":"")+JV.strict;this.reservedWordsStrict=Oj(h);this.reservedWordsStrictBind=Oj(h+" "+JV.strictBind);this.input=String(m);this.containsEsc=!1;c?(this.pos=c,this.lineStart=this.input.lastIndexOf("\n",c-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(iq).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ta.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===e.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},wz={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Gl.prototype.parse=function(){var e=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(e)};wz.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};wz.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};wz.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};wz.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};wz.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};wz.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};wz.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};Gl.extend=function(){for(var e=[],m=arguments.length;m--;)e[m]=arguments[m];m=this;for(var c=0;c<e.length;c++)m=e[c](m);return m};Gl.parse=function(e,m){return(new this(m,
e)).parse()};Gl.parseExpressionAt=function(e,m,c){e=new this(c,e,m);e.nextToken();return e.parseExpression()};Gl.tokenizer=function(e,m){return new this(m,e)};Object.defineProperties(Gl.prototype,wz);var up=Gl.prototype,Tla=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;up.strictDirective=function(e){for(;;){rs.lastIndex=e;e+=rs.exec(this.input)[0].length;var m=Tla.exec(this.input.slice(e));if(!m)return!1;if("use strict"===(m[1]||m[2])){rs.lastIndex=e+m[0].length;e=rs.exec(this.input);m=e.index+
e[0].length;var c=this.input.charAt(m);return";"===c||"}"===c||iq.test(e[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(c)||"!"===c&&"="===this.input.charAt(m+1))}e+=m[0].length;rs.lastIndex=e;e+=rs.exec(this.input)[0].length;";"===this.input[e]&&e++}};up.eat=function(e){return this.type===e?(this.next(),!0):!1};up.isContextual=function(e){return this.type===Ta.name&&this.value===e&&!this.containsEsc};up.eatContextual=function(e){if(!this.isContextual(e))return!1;this.next();return!0};up.expectContextual=function(e){this.eatContextual(e)||
this.unexpected()};up.canInsertSemicolon=function(){return this.type===Ta.eof||this.type===Ta.braceR||iq.test(this.input.slice(this.lastTokEnd,this.start))};up.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};up.semicolon=function(){this.eat(Ta.semi)||this.insertSemicolon()||this.unexpected()};up.afterTrailingComma=function(e,m){if(this.type===e){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);m||this.next();return!0}};up.expect=function(e){this.eat(e)||this.unexpected()};up.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};up.checkPatternErrors=function(e,m){e&&(-1<e.trailingComma&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element"),e=m?e.parenthesizedAssign:e.parenthesizedBind,-1<e&&this.raiseRecoverable(e,"Parenthesized pattern"))};up.checkExpressionErrors=function(e,m){if(!e)return!1;var c=e.shorthandAssign;
e=e.doubleProto;if(!m)return 0<=c||0<=e;0<=c&&this.raise(c,"Shorthand property assignments are valid only in destructuring patterns");0<=e&&this.raiseRecoverable(e,"Redefinition of __proto__ property")};up.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};up.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===
e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var vi=Gl.prototype;vi.parseTopLevel=function(e){var m={};e.body||(e.body=[]);for(;this.type!==Ta.eof;){var c=this.parseStatement(null,!0,m);e.body.push(c)}if(this.inModule)for(m=0,c=Object.keys(this.undefinedExports);m<c.length;m+=1){var h=c[m];this.raiseRecoverable(this.undefinedExports[h].start,"Export '"+h+"' is not defined")}this.adaptDirectivePrologue(e.body);this.next();e.sourceType=this.options.sourceType;
return this.finishNode(e,"Program")};var MV={kind:"loop"},Ula={kind:"switch"};vi.isLet=function(e){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;rs.lastIndex=this.pos;var m=rs.exec(this.input);m=this.pos+m[0].length;var c=this.input.charCodeAt(m);if(91===c)return!0;if(e)return!1;if(123===c)return!0;if(ao(c,!0)){for(e=m+1;Gu(this.input.charCodeAt(e),!0);)++e;e=this.input.slice(m,e);if(!Rla.test(e))return!0}return!1};vi.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
rs.lastIndex=this.pos;var e=rs.exec(this.input);e=this.pos+e[0].length;return!iq.test(this.input.slice(this.pos,e))&&"function"===this.input.slice(e,e+8)&&(e+8===this.input.length||!Gu(this.input.charAt(e+8)))};vi.parseStatement=function(e,m,c){var h=this.type,n=this.startNode();if(this.isLet(e)){h=Ta._var;var b="let"}switch(h){case Ta._break:case Ta._continue:return this.parseBreakContinueStatement(n,h.keyword);case Ta._debugger:return this.parseDebuggerStatement(n);case Ta._do:return this.parseDoStatement(n);
case Ta._for:return this.parseForStatement(n);case Ta._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!e);case Ta._class:return e&&this.unexpected(),this.parseClass(n,!0);case Ta._if:return this.parseIfStatement(n);case Ta._return:return this.parseReturnStatement(n);case Ta._switch:return this.parseSwitchStatement(n);case Ta._throw:return this.parseThrowStatement(n);case Ta._try:return this.parseTryStatement(n);
case Ta._const:case Ta._var:return b=b||this.value,e&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Ta._while:return this.parseWhileStatement(n);case Ta._with:return this.parseWithStatement(n);case Ta.braceL:return this.parseBlock(!0,n);case Ta.semi:return this.parseEmptyStatement(n);case Ta._export:case Ta._import:if(10<this.options.ecmaVersion&&h===Ta._import&&(rs.lastIndex=this.pos,e=rs.exec(this.input),e=this.input.charCodeAt(this.pos+e[0].length),40===e||46===e))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(m||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return h===Ta._import?this.parseImport(n):this.parseExport(n,c);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!e);m=this.value;c=this.parseExpression();return h===Ta.name&&"Identifier"===
c.type&&this.eat(Ta.colon)?this.parseLabeledStatement(n,m,c,e):this.parseExpressionStatement(n,c)}};vi.parseBreakContinueStatement=function(e,m){var c="break"===m;this.next();this.eat(Ta.semi)||this.insertSemicolon()?e.label=null:this.type!==Ta.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var h=0;h<this.labels.length;++h){var n=this.labels[h];if(null==e.label||n.name===e.label.name){if(null!=n.kind&&(c||"loop"===n.kind))break;if(e.label&&c)break}}h===this.labels.length&&
this.raise(e.start,"Unsyntactic "+m);return this.finishNode(e,c?"BreakStatement":"ContinueStatement")};vi.parseDebuggerStatement=function(e){this.next();this.semicolon();return this.finishNode(e,"DebuggerStatement")};vi.parseDoStatement=function(e){this.next();this.labels.push(MV);e.body=this.parseStatement("do");this.labels.pop();this.expect(Ta._while);e.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ta.semi):this.semicolon();return this.finishNode(e,"DoWhileStatement")};vi.parseForStatement=
function(e){this.next();var m=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(MV);this.enterScope(0);this.expect(Ta.parenL);if(this.type===Ta.semi)return-1<m&&this.unexpected(m),this.parseFor(e,null);var c=this.isLet();if(this.type===Ta._var||this.type===Ta._const||c){var h=this.startNode();c=c?"let":this.value;this.next();this.parseVar(h,!0,c);this.finishNode(h,"VariableDeclaration");
if((this.type===Ta._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===h.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ta._in?-1<m&&this.unexpected(m):e.await=-1<m),this.parseForIn(e,h);-1<m&&this.unexpected(m);return this.parseFor(e,h)}h=new Iq;c=this.parseExpression(!0,h);if(this.type===Ta._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Ta._in?-1<m&&this.unexpected(m):e.await=-1<m),this.toAssignable(c,
!1,h),this.checkLValPattern(c),this.parseForIn(e,c);this.checkExpressionErrors(h,!0);-1<m&&this.unexpected(m);return this.parseFor(e,c)};vi.parseFunctionStatement=function(e,m,c){this.next();return this.parseFunction(e,EH|(c?0:NV),!1,m)};vi.parseIfStatement=function(e){this.next();e.test=this.parseParenExpression();e.consequent=this.parseStatement("if");e.alternate=this.eat(Ta._else)?this.parseStatement("if"):null;return this.finishNode(e,"IfStatement")};vi.parseReturnStatement=function(e){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ta.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon());return this.finishNode(e,"ReturnStatement")};vi.parseSwitchStatement=function(e){this.next();e.discriminant=this.parseParenExpression();e.cases=[];this.expect(Ta.braceL);this.labels.push(Ula);this.enterScope(0);for(var m,c=!1;this.type!==Ta.braceR;)if(this.type===Ta._case||this.type===
Ta._default){var h=this.type===Ta._case;m&&this.finishNode(m,"SwitchCase");e.cases.push(m=this.startNode());m.consequent=[];this.next();h?m.test=this.parseExpression():(c&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),c=!0,m.test=null);this.expect(Ta.colon)}else m||this.unexpected(),m.consequent.push(this.parseStatement(null));this.exitScope();m&&this.finishNode(m,"SwitchCase");this.next();this.labels.pop();return this.finishNode(e,"SwitchStatement")};vi.parseThrowStatement=
function(e){this.next();iq.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");e.argument=this.parseExpression();this.semicolon();return this.finishNode(e,"ThrowStatement")};var Vla=[];vi.parseTryStatement=function(e){this.next();e.block=this.parseBlock();e.handler=null;if(this.type===Ta._catch){var m=this.startNode();this.next();if(this.eat(Ta.parenL)){m.param=this.parseBindingAtom();var c="Identifier"===m.param.type;this.enterScope(c?32:
0);this.checkLValPattern(m.param,c?4:2);this.expect(Ta.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),m.param=null,this.enterScope(0);m.body=this.parseBlock(!1);this.exitScope();e.handler=this.finishNode(m,"CatchClause")}e.finalizer=this.eat(Ta._finally)?this.parseBlock():null;e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause");return this.finishNode(e,"TryStatement")};vi.parseVarStatement=function(e,m){this.next();this.parseVar(e,!1,m);this.semicolon();return this.finishNode(e,
"VariableDeclaration")};vi.parseWhileStatement=function(e){this.next();e.test=this.parseParenExpression();this.labels.push(MV);e.body=this.parseStatement("while");this.labels.pop();return this.finishNode(e,"WhileStatement")};vi.parseWithStatement=function(e){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();e.object=this.parseParenExpression();e.body=this.parseStatement("with");return this.finishNode(e,"WithStatement")};vi.parseEmptyStatement=function(e){this.next();return this.finishNode(e,
"EmptyStatement")};vi.parseLabeledStatement=function(e,m,c,h){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===m&&this.raise(c.start,"Label '"+m+"' is already declared");n=this.type.isLoop?"loop":this.type===Ta._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var d=this.labels[b];if(d.statementStart===e.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:m,kind:n,statementStart:this.start});e.body=this.parseStatement(h?-1===h.indexOf("label")?h+"label":h:"label");
this.labels.pop();e.label=c;return this.finishNode(e,"LabeledStatement")};vi.parseExpressionStatement=function(e,m){e.expression=m;this.semicolon();return this.finishNode(e,"ExpressionStatement")};vi.parseBlock=function(e,m,c){void 0===e&&(e=!0);void 0===m&&(m=this.startNode());m.body=[];this.expect(Ta.braceL);for(e&&this.enterScope(0);this.type!==Ta.braceR;){var h=this.parseStatement(null);m.body.push(h)}c&&(this.strict=!1);this.next();e&&this.exitScope();return this.finishNode(m,"BlockStatement")};
vi.parseFor=function(e,m){e.init=m;this.expect(Ta.semi);e.test=this.type===Ta.semi?null:this.parseExpression();this.expect(Ta.semi);e.update=this.type===Ta.parenR?null:this.parseExpression();this.expect(Ta.parenR);e.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(e,"ForStatement")};vi.parseForIn=function(e,m){var c=this.type===Ta._in;this.next();"VariableDeclaration"===m.type&&null!=m.declarations[0].init&&(!c||8>this.options.ecmaVersion||this.strict||"var"!==
m.kind||"Identifier"!==m.declarations[0].id.type)&&this.raise(m.start,(c?"for-in":"for-of")+" loop variable declaration may not have an initializer");e.left=m;e.right=c?this.parseExpression():this.parseMaybeAssign();this.expect(Ta.parenR);e.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(e,c?"ForInStatement":"ForOfStatement")};vi.parseVar=function(e,m,c){e.declarations=[];for(e.kind=c;;){var h=this.startNode();this.parseVarId(h,c);this.eat(Ta.eq)?h.init=this.parseMaybeAssign(m):
"const"!==c||this.type===Ta._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===h.id.type||m&&(this.type===Ta._in||this.isContextual("of"))?h.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();e.declarations.push(this.finishNode(h,"VariableDeclarator"));if(!this.eat(Ta.comma))break}return e};vi.parseVarId=function(e,m){e.id=this.parseBindingAtom();this.checkLValPattern(e.id,"var"===m?1:2,!1)};var EH=1,NV=2;vi.parseFunction=
function(e,m,c,h){this.initFunction(e);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!h)this.type===Ta.star&&m&NV&&this.unexpected(),e.generator=this.eat(Ta.star);8<=this.options.ecmaVersion&&(e.async=!!h);m&EH&&(e.id=m&4&&this.type!==Ta.name?null:this.parseIdent(),!e.id||m&NV||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));h=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(e.async?4:0)|(e.generator?8:0));m&EH||(e.id=this.type===Ta.name?this.parseIdent():null);this.parseFunctionParams(e);this.parseFunctionBody(e,c,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(e,m&EH?"FunctionDeclaration":"FunctionExpression")};vi.parseFunctionParams=function(e){this.expect(Ta.parenL);e.params=this.parseBindingList(Ta.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};vi.parseClass=function(e,m){this.next();var c=this.strict;
this.strict=!0;this.parseClassId(e,m);this.parseClassSuper(e);var h=this.startNode(),n=!1;h.body=[];for(this.expect(Ta.braceL);this.type!==Ta.braceR;){var b=this.parseClassElement(null!==e.superClass);b&&(h.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=c;this.next();e.body=this.finishNode(h,"ClassBody");return this.finishNode(e,m?"ClassDeclaration":"ClassExpression")};vi.parseClassElement=function(e){var m=
this;if(this.eat(Ta.semi))return null;var c=this.startNode(),h=function(k,a){void 0===a&&(a=!1);var f=m.start,l=m.startLoc;if(!m.eatContextual(k))return!1;if(!(m.type===Ta.parenL||a&&m.canInsertSemicolon()))return!0;c.key&&m.unexpected();c.computed=!1;c.key=m.startNodeAt(f,l);c.key.name=k;m.finishNode(c.key,"Identifier");return!1};c.kind="method";c.static=h("static");var n=this.eat(Ta.star),b=!1;n||(8<=this.options.ecmaVersion&&h("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Ta.star)):
h("get")?c.kind="get":h("set")&&(c.kind="set"));c.key||this.parsePropertyName(c);h=c.key;var d=!1;c.computed||c.static||!("Identifier"===h.type&&"constructor"===h.name||"Literal"===h.type&&"constructor"===h.value)?c.static&&"Identifier"===h.type&&"prototype"===h.name&&this.raise(h.start,"Classes may not have a static property named prototype"):("method"!==c.kind&&this.raise(h.start,"Constructor can't have get/set modifier"),n&&this.raise(h.start,"Constructor can't be a generator"),b&&this.raise(h.start,
"Constructor can't be an async method"),c.kind="constructor",d=e);this.parseClassMethod(c,n,b,d);"get"===c.kind&&0!==c.value.params.length&&this.raiseRecoverable(c.value.start,"getter should have no params");"set"===c.kind&&1!==c.value.params.length&&this.raiseRecoverable(c.value.start,"setter should have exactly one param");"set"===c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params");return c};vi.parseClassMethod=function(e,
m,c,h){e.value=this.parseMethod(m,c,h);return this.finishNode(e,"MethodDefinition")};vi.parseClassId=function(e,m){this.type===Ta.name?(e.id=this.parseIdent(),m&&this.checkLValSimple(e.id,2,!1)):(!0===m&&this.unexpected(),e.id=null)};vi.parseClassSuper=function(e){e.superClass=this.eat(Ta._extends)?this.parseExprSubscripts():null};vi.parseExport=function(e,m){this.next();if(this.eat(Ta.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(m,
e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==Ta.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(Ta._default)){this.checkExport(m,"default",this.lastTokStart);var c;this.type===Ta._function||(c=this.isAsyncFunction())?(m=this.startNode(),this.next(),c&&this.next(),e.declaration=this.parseFunction(m,EH|4,!1,c)):this.type===Ta._class?(c=this.startNode(),e.declaration=this.parseClass(c,
"nullableID")):(e.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(m,e.declaration.declarations):this.checkExport(m,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{e.declaration=null;e.specifiers=this.parseExportSpecifiers(m);if(this.eatContextual("from"))this.type!==
Ta.string&&this.unexpected(),e.source=this.parseExprAtom();else{c=0;for(m=e.specifiers;c<m.length;c+=1){var h=m[c];this.checkUnreserved(h.local);this.checkLocalExport(h.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};vi.checkExport=function(e,m,c){e&&(YJ.call(e,m)&&this.raiseRecoverable(c,"Duplicate export '"+m+"'"),e[m]=!0)};vi.checkPatternExport=function(e,m){var c=m.type;if("Identifier"===c)this.checkExport(e,m.name,m.start);else if("ObjectPattern"===c)for(c=
0,m=m.properties;c<m.length;c+=1)this.checkPatternExport(e,m[c]);else if("ArrayPattern"===c)for(c=0,m=m.elements;c<m.length;c+=1){var h=m[c];h&&this.checkPatternExport(e,h)}else"Property"===c?this.checkPatternExport(e,m.value):"AssignmentPattern"===c?this.checkPatternExport(e,m.left):"RestElement"===c?this.checkPatternExport(e,m.argument):"ParenthesizedExpression"===c&&this.checkPatternExport(e,m.expression)};vi.checkVariableExport=function(e,m){if(e)for(var c=0;c<m.length;c+=1)this.checkPatternExport(e,
m[c].id)};vi.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};vi.parseExportSpecifiers=function(e){var m=[],c=!0;for(this.expect(Ta.braceL);!this.eat(Ta.braceR);){if(c)c=!1;else if(this.expect(Ta.comma),this.afterTrailingComma(Ta.braceR))break;var h=this.startNode();h.local=this.parseIdent(!0);h.exported=this.eatContextual("as")?this.parseIdent(!0):
h.local;this.checkExport(e,h.exported.name,h.exported.start);m.push(this.finishNode(h,"ExportSpecifier"))}return m};vi.parseImport=function(e){this.next();this.type===Ta.string?(e.specifiers=Vla,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===Ta.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(e,"ImportDeclaration")};vi.parseImportSpecifiers=function(){var e=[],m=!0;if(this.type===Ta.name){var c=
this.startNode();c.local=this.parseIdent();this.checkLValSimple(c.local,2);e.push(this.finishNode(c,"ImportDefaultSpecifier"));if(!this.eat(Ta.comma))return e}if(this.type===Ta.star)return m=this.startNode(),this.next(),this.expectContextual("as"),m.local=this.parseIdent(),this.checkLValSimple(m.local,2),e.push(this.finishNode(m,"ImportNamespaceSpecifier")),e;for(this.expect(Ta.braceL);!this.eat(Ta.braceR);){if(m)m=!1;else if(this.expect(Ta.comma),this.afterTrailingComma(Ta.braceR))break;c=this.startNode();
c.imported=this.parseIdent(!0);this.eatContextual("as")?c.local=this.parseIdent():(this.checkUnreserved(c.imported),c.local=c.imported);this.checkLValSimple(c.local,2);e.push(this.finishNode(c,"ImportSpecifier"))}return e};vi.adaptDirectivePrologue=function(e){for(var m=0;m<e.length&&this.isDirectiveCandidate(e[m]);++m)e[m].directive=e[m].expression.raw.slice(1,-1)};vi.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&
('"'===this.input[e.start]||"'"===this.input[e.start])};var Gt=Gl.prototype;Gt.toAssignable=function(e,m,c){if(6<=this.options.ecmaVersion&&e)switch(e.type){case "Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":e.type="ObjectPattern";c&&this.checkPatternErrors(c,!0);c=0;for(var h=e.properties;c<h.length;c+=
1){var n=h[c];this.toAssignable(n,m);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter");this.toAssignable(e.value,m);break;case "ArrayExpression":e.type="ArrayPattern";c&&this.checkPatternErrors(c,!0);this.toAssignableList(e.elements,m);break;case "SpreadElement":e.type="RestElement";this.toAssignable(e.argument,
m);"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value.");e.type="AssignmentPattern";delete e.operator;this.toAssignable(e.left,m);break;case "ParenthesizedExpression":this.toAssignable(e.expression,m,c);break;case "ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!m)break;default:this.raise(e.start,"Assigning to rvalue")}else c&&this.checkPatternErrors(c,!0);return e};Gt.toAssignableList=function(e,m){for(var c=e.length,h=0;h<c;h++){var n=e[h];n&&this.toAssignable(n,m)}c&&(c=e[c-1],6===this.options.ecmaVersion&&m&&c&&"RestElement"===c.type&&"Identifier"!==c.argument.type&&this.unexpected(c.argument.start));return e};Gt.parseSpread=function(e){var m=this.startNode();this.next();m.argument=this.parseMaybeAssign(!1,e);return this.finishNode(m,
"SpreadElement")};Gt.parseRestBinding=function(){var e=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ta.name&&this.unexpected();e.argument=this.parseBindingAtom();return this.finishNode(e,"RestElement")};Gt.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ta.bracketL:var e=this.startNode();this.next();e.elements=this.parseBindingList(Ta.bracketR,!0,!0);return this.finishNode(e,"ArrayPattern");case Ta.braceL:return this.parseObj(!0)}return this.parseIdent()};
Gt.parseBindingList=function(e,m,c){for(var h=[],n=!0;!this.eat(e);)if(n?n=!1:this.expect(Ta.comma),m&&this.type===Ta.comma)h.push(null);else if(c&&this.afterTrailingComma(e))break;else if(this.type===Ta.ellipsis){m=this.parseRestBinding();this.parseBindingListItem(m);h.push(m);this.type===Ta.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(e);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);h.push(b)}return h};
Gt.parseBindingListItem=function(e){return e};Gt.parseMaybeDefault=function(e,m,c){c=c||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ta.eq))return c;e=this.startNodeAt(e,m);e.left=c;e.right=this.parseMaybeAssign();return this.finishNode(e,"AssignmentPattern")};Gt.checkLValSimple=function(e,m,c){void 0===m&&(m=0);var h=0!==m;switch(e.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(h?"Binding ":"Assigning to ")+e.name+
" in strict mode");h&&(2===m&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),c&&(YJ.call(c,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),c[e.name]=!0),5!==m&&this.declareName(e.name,m,e.start));break;case "ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":h&&this.raiseRecoverable(e.start,"Binding member expression");break;case "ParenthesizedExpression":return h&&
this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,m,c);default:this.raise(e.start,(h?"Binding":"Assigning to")+" rvalue")}};Gt.checkLValPattern=function(e,m,c){void 0===m&&(m=0);switch(e.type){case "ObjectPattern":var h=0;for(e=e.properties;h<e.length;h+=1)this.checkLValInnerPattern(e[h],m,c);break;case "ArrayPattern":h=0;for(e=e.elements;h<e.length;h+=1){var n=e[h];n&&this.checkLValInnerPattern(n,m,c)}break;default:this.checkLValSimple(e,m,c)}};Gt.checkLValInnerPattern=
function(e,m,c){void 0===m&&(m=0);switch(e.type){case "Property":this.checkLValInnerPattern(e.value,m,c);break;case "AssignmentPattern":this.checkLValPattern(e.left,m,c);break;case "RestElement":this.checkLValPattern(e.argument,m,c);break;default:this.checkLValPattern(e,m,c)}};var Oi=Gl.prototype;Oi.checkPropClash=function(e,m,c){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===e.type||6<=this.options.ecmaVersion&&(e.computed||e.method||e.shorthand))){var h=e.key;switch(h.type){case "Identifier":var n=
h.name;break;case "Literal":n=String(h.value);break;default:return}e=e.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===e&&(m.proto&&(c?0>c.doubleProto&&(c.doubleProto=h.start):this.raiseRecoverable(h.start,"Redefinition of __proto__ property")),m.proto=!0):(n="$"+n,(c=m[n])?("init"===e?this.strict&&c.init||c.get||c.set:c.init||c[e])&&this.raiseRecoverable(h.start,"Redefinition of property"):c=m[n]={init:!1,get:!1,set:!1},c[e]=!0)}};Oi.parseExpression=function(e,m){var c=this.start,h=this.startLoc,
n=this.parseMaybeAssign(e,m);if(this.type===Ta.comma){c=this.startNodeAt(c,h);for(c.expressions=[n];this.eat(Ta.comma);)c.expressions.push(this.parseMaybeAssign(e,m));return this.finishNode(c,"SequenceExpression")}return n};Oi.parseMaybeAssign=function(e,m,c){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var h=!1,n=-1,b=-1;m?(n=m.parenthesizedAssign,b=m.trailingComma,m.parenthesizedAssign=m.trailingComma=-1):(m=new Iq,h=!0);var d=this.start,k=this.startLoc;
if(this.type===Ta.parenL||this.type===Ta.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(e,m);c&&(a=c.call(this,a,d,k));if(this.type.isAssign)return c=this.startNodeAt(d,k),c.operator=this.value,this.type===Ta.eq&&(a=this.toAssignable(a,!1,m)),h||(m.parenthesizedAssign=m.trailingComma=m.doubleProto=-1),m.shorthandAssign>=a.start&&(m.shorthandAssign=-1),this.type===Ta.eq?this.checkLValPattern(a):this.checkLValSimple(a),c.left=a,this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,
"AssignmentExpression");h&&this.checkExpressionErrors(m,!0);-1<n&&(m.parenthesizedAssign=n);-1<b&&(m.trailingComma=b);return a};Oi.parseMaybeConditional=function(e,m){var c=this.start,h=this.startLoc,n=this.parseExprOps(e,m);return this.checkExpressionErrors(m)?n:this.eat(Ta.question)?(m=this.startNodeAt(c,h),m.test=n,m.consequent=this.parseMaybeAssign(),this.expect(Ta.colon),m.alternate=this.parseMaybeAssign(e),this.finishNode(m,"ConditionalExpression")):n};Oi.parseExprOps=function(e,m){var c=this.start,
h=this.startLoc,n=this.parseMaybeUnary(m,!1);return this.checkExpressionErrors(m)?n:n.start===c&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,c,h,-1,e)};Oi.parseExprOp=function(e,m,c,h,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Ta._in)&&b>h){var d=this.type===Ta.logicalOR||this.type===Ta.logicalAND,k=this.type===Ta.coalesce;k&&(b=Ta.logicalAND.binop);var a=this.value;this.next();var f=this.start,l=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),f,l,b,n);e=this.buildBinary(m,
c,e,b,a,d||k);(d&&this.type===Ta.coalesce||k&&(this.type===Ta.logicalOR||this.type===Ta.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(e,m,c,h,n)}return e};Oi.buildBinary=function(e,m,c,h,n,b){e=this.startNodeAt(e,m);e.left=c;e.operator=n;e.right=h;return this.finishNode(e,b?"LogicalExpression":"BinaryExpression")};Oi.parseMaybeUnary=function(e,m){var c=this.start,h=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();m=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Ta.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(e,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):m=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(e);if(this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)e=this.startNodeAt(c,h),e.operator=this.value,e.prefix=!1,e.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(e,"UpdateExpression")}return!m&&this.eat(Ta.starstar)?this.buildBinary(c,h,n,this.parseMaybeUnary(null,!1),"**",!1):n};Oi.parseExprSubscripts=function(e){var m=this.start,c=this.startLoc,h=this.parseExprAtom(e);if("ArrowFunctionExpression"===
h.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return h;m=this.parseSubscripts(h,m,c);e&&"MemberExpression"===m.type&&(e.parenthesizedAssign>=m.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=m.start&&(e.parenthesizedBind=-1));return m};Oi.parseSubscripts=function(e,m,c,h){for(var n=8<=this.options.ecmaVersion&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&5===e.end-e.start&&this.potentialArrowAt===e.start,b=!1;;){var d=this.parseSubscript(e,
m,c,h,n,b);d.optional&&(b=!0);if(d===e||"ArrowFunctionExpression"===d.type)return b&&(e=this.startNodeAt(m,c),e.expression=d,d=this.finishNode(e,"ChainExpression")),d;e=d}};Oi.parseSubscript=function(e,m,c,h,n,b){var d=11<=this.options.ecmaVersion,k=d&&this.eat(Ta.questionDot);h&&k&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Ta.bracketL);if(a||k&&this.type!==Ta.parenL&&this.type!==Ta.backQuote||this.eat(Ta.dot))m=this.startNodeAt(m,
c),m.object=e,m.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),m.computed=!!a,a&&this.expect(Ta.bracketR),d&&(m.optional=k),e=this.finishNode(m,"MemberExpression");else if(!h&&this.eat(Ta.parenL)){h=new Iq;b=this.yieldPos;var f=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Ta.parenR,8<=this.options.ecmaVersion,!1,h);if(n&&!k&&!this.canInsertSemicolon()&&this.eat(Ta.arrow))return this.checkPatternErrors(h,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=f,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(m,c),a,!0);this.checkExpressionErrors(h,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=f||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;m=this.startNodeAt(m,c);m.callee=e;m.arguments=a;d&&(m.optional=k);e=this.finishNode(m,"CallExpression")}else this.type===
Ta.backQuote&&((k||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(m,c),d.tag=e,d.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(d,"TaggedTemplateExpression"));return e};Oi.parseExprAtom=function(e){this.type===Ta.slash&&this.readRegexp();var m=this.potentialArrowAt===this.start;switch(this.type){case Ta._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),m=this.startNode(),this.next(),
this.type!==Ta.parenL||this.allowDirectSuper||this.raise(m.start,"super() call outside constructor of a subclass"),this.type!==Ta.dot&&this.type!==Ta.bracketL&&this.type!==Ta.parenL&&this.unexpected(),this.finishNode(m,"Super");case Ta._this:return m=this.startNode(),this.next(),this.finishNode(m,"ThisExpression");case Ta.name:e=this.start;var c=this.startLoc,h=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!h&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Ta._function))return this.parseFunction(this.startNodeAt(e,
c),0,!1,!0);if(m&&!this.canInsertSemicolon()){if(this.eat(Ta.arrow))return this.parseArrowExpression(this.startNodeAt(e,c),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Ta.name&&!h)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ta.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(e,c),[n],!0)}return n;case Ta.regexp:return e=this.value,m=this.parseLiteral(e.value),m.regex={pattern:e.pattern,flags:e.flags},m;case Ta.num:case Ta.string:return this.parseLiteral(this.value);
case Ta._null:case Ta._true:case Ta._false:return m=this.startNode(),m.value=this.type===Ta._null?null:this.type===Ta._true,m.raw=this.type.keyword,this.next(),this.finishNode(m,"Literal");case Ta.parenL:return c=this.start,m=this.parseParenAndDistinguishExpression(m),e&&(0>e.parenthesizedAssign&&!this.isSimpleAssignTarget(m)&&(e.parenthesizedAssign=c),0>e.parenthesizedBind&&(e.parenthesizedBind=c)),m;case Ta.bracketL:return m=this.startNode(),this.next(),m.elements=this.parseExprList(Ta.bracketR,
!0,!0,e),this.finishNode(m,"ArrayExpression");case Ta.braceL:return this.parseObj(!1,e);case Ta._function:return m=this.startNode(),this.next(),this.parseFunction(m,0);case Ta._class:return this.parseClass(this.startNode(),!1);case Ta._new:return this.parseNew();case Ta.backQuote:return this.parseTemplate();case Ta._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Oi.parseExprImport=function(){var e=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var m=this.parseIdent(!0);switch(this.type){case Ta.parenL:return this.parseDynamicImport(e);case Ta.dot:return e.meta=m,this.parseImportMeta(e);default:this.unexpected()}};Oi.parseDynamicImport=function(e){this.next();e.source=this.parseMaybeAssign();if(!this.eat(Ta.parenR)){var m=this.start;this.eat(Ta.comma)&&this.eat(Ta.parenR)?this.raiseRecoverable(m,"Trailing comma is not allowed in import()"):this.unexpected(m)}return this.finishNode(e,
"ImportExpression")};Oi.parseImportMeta=function(e){this.next();var m=this.containsEsc;e.property=this.parseIdent(!0);"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'");m&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module");return this.finishNode(e,"MetaProperty")};Oi.parseLiteral=function(e){var m=
this.startNode();m.value=e;m.raw=this.input.slice(this.start,this.end);110===m.raw.charCodeAt(m.raw.length-1)&&(m.bigint=m.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(m,"Literal")};Oi.parseParenExpression=function(){this.expect(Ta.parenL);var e=this.parseExpression();this.expect(Ta.parenR);return e};Oi.parseParenAndDistinguishExpression=function(e){var m=this.start,c=this.startLoc,h=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,d=[],k=!0,a=!1,f=new Iq,l=this.yieldPos,r=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ta.parenR;)if(k?k=!1:this.expect(Ta.comma),h&&this.afterTrailingComma(Ta.parenR,!0)){a=!0;break}else if(this.type===Ta.ellipsis){var v=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===Ta.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,f,this.parseParenItem));h=this.start;k=this.startLoc;
this.expect(Ta.parenR);if(e&&!this.canInsertSemicolon()&&this.eat(Ta.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=r,this.parseParenArrowList(m,c,d);d.length&&!a||this.unexpected(this.lastTokStart);v&&this.unexpected(v);this.checkExpressionErrors(f,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=r||this.awaitPos;1<d.length?(e=this.startNodeAt(n,b),e.expressions=d,this.finishNodeAt(e,"SequenceExpression",h,k)):e=d[0]}else e=this.parseParenExpression();
return this.options.preserveParens?(m=this.startNodeAt(m,c),m.expression=e,this.finishNode(m,"ParenthesizedExpression")):e};Oi.parseParenItem=function(e){return e};Oi.parseParenArrowList=function(e,m,c){return this.parseArrowExpression(this.startNodeAt(e,m),c)};var Wla=[];Oi.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),m=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ta.dot))return e.meta=m,m=this.containsEsc,
e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),m&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty");m=this.start;var c=this.startLoc,h=this.type===Ta._import;e.callee=this.parseSubscripts(this.parseExprAtom(),m,c,!0);h&&"ImportExpression"===
e.callee.type&&this.raise(m,"Cannot use new with import()");this.eat(Ta.parenL)?e.arguments=this.parseExprList(Ta.parenR,8<=this.options.ecmaVersion,!1):e.arguments=Wla;return this.finishNode(e,"NewExpression")};Oi.parseTemplateElement=function(e){e=e.isTagged;var m=this.startNode();this.type===Ta.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),m.value={raw:this.value,cooked:null}):m.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();m.tail=this.type===Ta.backQuote;return this.finishNode(m,"TemplateElement")};Oi.parseTemplate=function(e){void 0===e&&(e={});e=e.isTagged;void 0===e&&(e=!1);var m=this.startNode();this.next();m.expressions=[];var c=this.parseTemplateElement({isTagged:e});for(m.quasis=[c];!c.tail;)this.type===Ta.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ta.dollarBraceL),m.expressions.push(this.parseExpression()),this.expect(Ta.braceR),m.quasis.push(c=
this.parseTemplateElement({isTagged:e}));this.next();return this.finishNode(m,"TemplateLiteral")};Oi.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===Ta.name||this.type===Ta.num||this.type===Ta.string||this.type===Ta.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ta.star)&&!iq.test(this.input.slice(this.lastTokEnd,this.start))};Oi.parseObj=function(e,m){var c=this.startNode(),h=!0,n={};c.properties=[];for(this.next();!this.eat(Ta.braceR);){if(h)h=
!1;else if(this.expect(Ta.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Ta.braceR))break;var b=this.parseProperty(e,m);e||this.checkPropClash(b,n,m);c.properties.push(b)}return this.finishNode(c,e?"ObjectPattern":"ObjectExpression")};Oi.parseProperty=function(e,m){var c=this.startNode(),h;if(9<=this.options.ecmaVersion&&this.eat(Ta.ellipsis)){if(e)return c.argument=this.parseIdent(!1),this.type===Ta.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(c,
"RestElement");this.type===Ta.parenL&&m&&(0>m.parenthesizedAssign&&(m.parenthesizedAssign=this.start),0>m.parenthesizedBind&&(m.parenthesizedBind=this.start));c.argument=this.parseMaybeAssign(!1,m);this.type===Ta.comma&&m&&0>m.trailingComma&&(m.trailingComma=this.start);return this.finishNode(c,"SpreadElement")}if(6<=this.options.ecmaVersion){c.method=!1;c.shorthand=!1;if(e||m){var n=this.start;var b=this.startLoc}e||(h=this.eat(Ta.star))}var d=this.containsEsc;this.parsePropertyName(c);if(!e&&!d&&
8<=this.options.ecmaVersion&&!h&&this.isAsyncProp(c)){var k=!0;h=9<=this.options.ecmaVersion&&this.eat(Ta.star);this.parsePropertyName(c,m)}else k=!1;this.parsePropertyValue(c,e,h,k,n,b,m,d);return this.finishNode(c,"Property")};Oi.parsePropertyValue=function(e,m,c,h,n,b,d,k){(c||h)&&this.type===Ta.colon&&this.unexpected();this.eat(Ta.colon)?(e.value=m?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),e.kind="init"):6<=this.options.ecmaVersion&&this.type===Ta.parenL?(m&&
this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(c,h)):m||k||!(5<=this.options.ecmaVersion)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===Ta.comma||this.type===Ta.braceR||this.type===Ta.eq?6<=this.options.ecmaVersion&&!e.computed&&"Identifier"===e.key.type?((c||h)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),e.kind="init",m?e.value=this.parseMaybeDefault(n,b,this.copyNode(e.key)):
this.type===Ta.eq&&d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),e.value=this.parseMaybeDefault(n,b,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((c||h)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1),e.value.params.length!==("get"===e.kind?0:1)?(m=e.value.start,"get"===e.kind?this.raiseRecoverable(m,"getter should have no params"):this.raiseRecoverable(m,"setter should have exactly one param")):"set"===
e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params"))};Oi.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(Ta.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(Ta.bracketR),e.key;e.computed=!1}return e.key=this.type===Ta.num||this.type===Ta.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Oi.initFunction=function(e){e.id=null;6<=this.options.ecmaVersion&&
(e.generator=e.expression=!1);8<=this.options.ecmaVersion&&(e.async=!1)};Oi.parseMethod=function(e,m,c){var h=this.startNode(),n=this.yieldPos,b=this.awaitPos,d=this.awaitIdentPos;this.initFunction(h);6<=this.options.ecmaVersion&&(h.generator=e);8<=this.options.ecmaVersion&&(h.async=!!m);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(m?4:0)|(h.generator?8:0)|64|(c?128:0));this.expect(Ta.parenL);h.params=this.parseBindingList(Ta.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(h,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=d;return this.finishNode(h,"FunctionExpression")};Oi.parseArrowExpression=function(e,m,c){var h=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((c?4:0)|18);this.initFunction(e);8<=this.options.ecmaVersion&&(e.async=!!c);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;e.params=this.toAssignableList(m,!0);this.parseFunctionBody(e,!0,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(e,
"ArrowFunctionExpression")};Oi.parseFunctionBody=function(e,m,c){var h=this.strict,n=!1;if(m&&this.type!==Ta.braceL)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(e.params);(!h||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(e,!h&&!n&&!m&&!c&&this.isSimpleParamList(e.params));
this.strict&&e.id&&this.checkLValSimple(e.id,5);e.body=this.parseBlock(!1,void 0,n&&!h);e.expression=!1;this.adaptDirectivePrologue(e.body.body);this.labels=b}this.exitScope()};Oi.isSimpleParamList=function(e){for(var m=0;m<e.length;m+=1)if("Identifier"!==e[m].type)return!1;return!0};Oi.checkParams=function(e,m){var c={},h=0;for(e=e.params;h<e.length;h+=1)this.checkLValInnerPattern(e[h],1,m?null:c)};Oi.parseExprList=function(e,m,c,h){for(var n=[],b=!0;!this.eat(e);){if(b)b=!1;else if(this.expect(Ta.comma),
m&&this.afterTrailingComma(e))break;if(c&&this.type===Ta.comma)var d=null;else this.type===Ta.ellipsis?(d=this.parseSpread(h),h&&this.type===Ta.comma&&0>h.trailingComma&&(h.trailingComma=this.start)):d=this.parseMaybeAssign(!1,h);n.push(d)}return n};Oi.checkUnreserved=function(e){var m=e.start,c=e.end;e=e.name;this.inGenerator&&"yield"===e&&this.raiseRecoverable(m,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===e&&this.raiseRecoverable(m,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(e)&&this.raise(m,"Unexpected keyword '"+e+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(m,c).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(e)||(this.inAsync||"await"!==e||this.raiseRecoverable(m,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(m,"The keyword '"+e+"' is reserved"))};Oi.parseIdent=function(e,m){m=this.startNode();this.type===Ta.name?m.name=this.value:this.type.keyword?(m.name=this.type.keyword,
"class"!==m.name&&"function"!==m.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!e);this.finishNode(m,"Identifier");e||(this.checkUnreserved(m),"await"!==m.name||this.awaitIdentPos||(this.awaitIdentPos=m.start));return m};Oi.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var m=this.startNode();this.next();this.type===Ta.semi||this.canInsertSemicolon()||this.type!==Ta.star&&!this.type.startsExpr?
(m.delegate=!1,m.argument=null):(m.delegate=this.eat(Ta.star),m.argument=this.parseMaybeAssign(e));return this.finishNode(m,"YieldExpression")};Oi.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();this.next();e.argument=this.parseMaybeUnary(null,!0);return this.finishNode(e,"AwaitExpression")};var nN=Gl.prototype;nN.raise=function(e,m){var c=Hu(this.input,e);m+=" ("+c.line+":"+c.column+")";m=new SyntaxError(m);m.pos=e;m.loc=c;m.raisedAt=this.pos;throw m;};nN.raiseRecoverable=
nN.raise;nN.curPosition=function(){if(this.options.locations)return new $C(this.curLine,this.pos-this.lineStart)};var xz=Gl.prototype,Xla=function(e){this.flags=e;this.var=[];this.lexical=[];this.functions=[]};xz.enterScope=function(e){this.scopeStack.push(new Xla(e))};xz.exitScope=function(){this.scopeStack.pop()};xz.treatFunctionsAsVarInScope=function(e){return e.flags&2||!this.inModule&&e.flags&1};xz.declareName=function(e,m,c){var h=!1;if(2===m)m=this.currentScope(),h=-1<m.lexical.indexOf(e)||
-1<m.functions.indexOf(e)||-1<m.var.indexOf(e),m.lexical.push(e),this.inModule&&m.flags&1&&delete this.undefinedExports[e];else if(4===m)this.currentScope().lexical.push(e);else if(3===m)m=this.currentScope(),h=this.treatFunctionsAsVar?-1<m.lexical.indexOf(e):-1<m.lexical.indexOf(e)||-1<m.var.indexOf(e),m.functions.push(e);else for(m=this.scopeStack.length-1;0<=m;--m){var n=this.scopeStack[m];if(-1<n.lexical.indexOf(e)&&!(n.flags&32&&n.lexical[0]===e)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(e)){h=
!0;break}n.var.push(e);this.inModule&&n.flags&1&&delete this.undefinedExports[e];if(n.flags&3)break}h&&this.raiseRecoverable(c,"Identifier '"+e+"' has already been declared")};xz.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)};xz.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};xz.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var m=this.scopeStack[e];
if(m.flags&3)return m}};xz.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var m=this.scopeStack[e];if(m.flags&3&&!(m.flags&16))return m}};var yz=function(e,m,c){this.type="";this.start=m;this.end=0;e.options.locations&&(this.loc=new BA(e,c));e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile);e.options.ranges&&(this.range=[m,0])},FH=Gl.prototype;FH.startNode=function(){return new yz(this,this.start,this.startLoc)};FH.startNodeAt=function(e,m){return new yz(this,
e,m)};FH.finishNode=function(e,m){return oy.call(this,e,m,this.lastTokEnd,this.lastTokEndLoc)};FH.finishNodeAt=function(e,m,c,h){return oy.call(this,e,m,c,h)};FH.copyNode=function(e){var m=new yz(this,e.start,this.startLoc),c;for(c in e)m[c]=e[c];return m};var ss=function(e,m,c,h,n){this.token=e;this.isExpr=!!m;this.preserveSpace=!!c;this.override=h;this.generator=!!n},Hl={b_stat:new ss("{",!1),b_expr:new ss("{",!0),b_tmpl:new ss("${",!1),p_stat:new ss("(",!1),p_expr:new ss("(",!0),q_tmpl:new ss("`",
!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ss("function",!1),f_expr:new ss("function",!0),f_expr_gen:new ss("function",!0,!1,null,!0),f_gen:new ss("function",!1,!1,null,!0)},oN=Gl.prototype;oN.initialContext=function(){return[Hl.b_stat]};oN.braceIsBlock=function(e){var m=this.curContext();return m===Hl.f_expr||m===Hl.f_stat?!0:e!==Ta.colon||m!==Hl.b_stat&&m!==Hl.b_expr?e===Ta._return||e===Ta.name&&this.exprAllowed?iq.test(this.input.slice(this.lastTokEnd,this.start)):e===Ta._else||
e===Ta.semi||e===Ta.eof||e===Ta.parenR||e===Ta.arrow?!0:e===Ta.braceL?m===Hl.b_stat:e===Ta._var||e===Ta._const||e===Ta.name?!1:!this.exprAllowed:!m.isExpr};oN.inGeneratorContext=function(){for(var e=this.context.length-1;1<=e;e--){var m=this.context[e];if("function"===m.token)return m.generator}return!1};oN.updateContext=function(e){var m,c=this.type;c.keyword&&e===Ta.dot?this.exprAllowed=!1:(m=c.updateContext)?m.call(this,e):this.exprAllowed=c.beforeExpr};Ta.parenR.updateContext=Ta.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var e=this.context.pop();e===Hl.b_stat&&"function"===this.curContext().token&&(e=this.context.pop());this.exprAllowed=!e.isExpr}};Ta.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Hl.b_stat:Hl.b_expr);this.exprAllowed=!0};Ta.dollarBraceL.updateContext=function(){this.context.push(Hl.b_tmpl);this.exprAllowed=!0};Ta.parenL.updateContext=function(e){this.context.push(e===Ta._if||e===Ta._for||e===Ta._with||e===Ta._while?
Hl.p_stat:Hl.p_expr);this.exprAllowed=!0};Ta.incDec.updateContext=function(){};Ta._function.updateContext=Ta._class.updateContext=function(e){!e.beforeExpr||e===Ta._else||e===Ta.semi&&this.curContext()!==Hl.p_stat||e===Ta._return&&iq.test(this.input.slice(this.lastTokEnd,this.start))||(e===Ta.colon||e===Ta.braceL)&&this.curContext()===Hl.b_stat?this.context.push(Hl.f_stat):this.context.push(Hl.f_expr);this.exprAllowed=!1};Ta.backQuote.updateContext=function(){this.curContext()===Hl.q_tmpl?this.context.pop():
this.context.push(Hl.q_tmpl);this.exprAllowed=!1};Ta.star.updateContext=function(e){e===Ta._function&&(e=this.context.length-1,this.context[e]=this.context[e]===Hl.f_expr?Hl.f_expr_gen:Hl.f_gen);this.exprAllowed=!0};Ta.name.updateContext=function(e){var m=!1;6<=this.options.ecmaVersion&&e!==Ta.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(m=!0);this.exprAllowed=m};var $ea={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
afa={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
B_={};Jr(9);Jr(10);Jr(11);Jr(12);var Zg=Gl.prototype,vx=function(e){this.parser=e;this.validFlags="gim"+(6<=e.options.ecmaVersion?"uy":"")+(9<=e.options.ecmaVersion?"s":"");this.unicodeProperties=B_[12<=e.options.ecmaVersion?12:e.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
vx.prototype.reset=function(e,m,c){var h=-1!==c.indexOf("u");this.start=e|0;this.source=m+"";this.flags=c;this.switchU=h&&6<=this.parser.options.ecmaVersion;this.switchN=h&&9<=this.parser.options.ecmaVersion};vx.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};vx.prototype.at=function(e,m){void 0===m&&(m=!1);var c=this.source,h=c.length;if(e>=h)return-1;var n=c.charCodeAt(e);if(!m&&!this.switchU||55295>=n||57344<=n||e+1>=h)return n;
e=c.charCodeAt(e+1);return 56320<=e&&57343>=e?(n<<10)+e-56613888:n};vx.prototype.nextIndex=function(e,m){void 0===m&&(m=!1);var c=this.source,h=c.length;if(e>=h)return h;var n=c.charCodeAt(e),b;return!m&&!this.switchU||55295>=n||57344<=n||e+1>=h||56320>(b=c.charCodeAt(e+1))||57343<b?e+1:e+2};vx.prototype.current=function(e){void 0===e&&(e=!1);return this.at(this.pos,e)};vx.prototype.lookahead=function(e){void 0===e&&(e=!1);return this.at(this.nextIndex(this.pos,e),e)};vx.prototype.advance=function(e){void 0===
e&&(e=!1);this.pos=this.nextIndex(this.pos,e)};vx.prototype.eat=function(e,m){void 0===m&&(m=!1);return this.current(m)===e?(this.advance(m),!0):!1};Zg.validateRegExpFlags=function(e){for(var m=e.validFlags,c=e.flags,h=0;h<c.length;h++){var n=c.charAt(h);-1===m.indexOf(n)&&this.raise(e.start,"Invalid regular expression flag");-1<c.indexOf(n,h+1)&&this.raise(e.start,"Duplicate regular expression flag")}};Zg.validateRegExpPattern=function(e){this.regexp_pattern(e);!e.switchN&&9<=this.options.ecmaVersion&&
0<e.groupNames.length&&(e.switchN=!0,this.regexp_pattern(e))};Zg.regexp_pattern=function(e){e.pos=0;e.lastIntValue=0;e.lastStringValue="";e.lastAssertionIsQuantifiable=!1;e.numCapturingParens=0;e.maxBackReference=0;e.groupNames.length=0;e.backReferenceNames.length=0;this.regexp_disjunction(e);e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets"));e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var m=0,c=e.backReferenceNames;m<
c.length;m+=1)-1===e.groupNames.indexOf(c[m])&&e.raise("Invalid named capture referenced")};Zg.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat");e.eat(123)&&e.raise("Lone quantifier brackets")};Zg.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Zg.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&
e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Zg.regexp_eatAssertion=function(e){var m=e.pos;e.lastAssertionIsQuantifiable=!1;if(e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=m}if(e.eat(40)&&e.eat(63)){var c=!1;9<=this.options.ecmaVersion&&(c=e.eat(60));if(e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=
!c,!0}e.pos=m;return!1};Zg.regexp_eatQuantifier=function(e,m){void 0===m&&(m=!1);return this.regexp_eatQuantifierPrefix(e,m)?(e.eat(63),!0):!1};Zg.regexp_eatQuantifierPrefix=function(e,m){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,m)};Zg.regexp_eatBracedQuantifier=function(e,m){var c=e.pos;if(e.eat(123)){var h=-1;if(this.regexp_eatDecimalDigits(e)){var n=e.lastIntValue;e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(h=e.lastIntValue);if(e.eat(125))return-1!==h&&h<n&&!m&&
e.raise("numbers out of order in {} quantifier"),!0}e.switchU&&!m&&e.raise("Incomplete quantifier");e.pos=c}return!1};Zg.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Zg.regexp_eatReverseSolidusAtomEscape=function(e){var m=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=m}return!1};Zg.regexp_eatUncapturingGroup=
function(e){var m=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){this.regexp_disjunction(e);if(e.eat(41))return!0;e.raise("Unterminated group")}e.pos=m}return!1};Zg.regexp_eatCapturingGroup=function(e){if(e.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group");this.regexp_disjunction(e);if(e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Zg.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||
this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Zg.regexp_eatInvalidBracedQuantifier=function(e){this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat");return!1};Zg.regexp_eatSyntaxCharacter=function(e){var m=e.current();return Kr(m)?(e.lastIntValue=m,e.advance(),!0):!1};Zg.regexp_eatPatternCharacters=function(e){for(var m=e.pos,c=0;-1!==(c=e.current())&&
!Kr(c);)e.advance();return e.pos!==m};Zg.regexp_eatExtendedPatternCharacter=function(e){var m=e.current();return-1===m||36===m||40<=m&&43>=m||46===m||63===m||91===m||94===m||124===m?!1:(e.advance(),!0)};Zg.regexp_groupSpecifier=function(e){e.eat(63)&&(this.regexp_eatGroupName(e)?(-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue)):e.raise("Invalid group"))};Zg.regexp_eatGroupName=function(e){e.lastStringValue="";if(e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&
e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Zg.regexp_eatRegExpIdentifierName=function(e){e.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Iu(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Iu(e.lastIntValue);return!0}return!1};Zg.regexp_eatRegExpIdentifierStart=function(e){var m=e.pos,c=11<=this.options.ecmaVersion,h=e.current(c);e.advance(c);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(e,c)&&(h=e.lastIntValue);
c=h;if(ao(c,!0)||36===c||95===c)return e.lastIntValue=h,!0;e.pos=m;return!1};Zg.regexp_eatRegExpIdentifierPart=function(e){var m=e.pos,c=11<=this.options.ecmaVersion,h=e.current(c);e.advance(c);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(e,c)&&(h=e.lastIntValue);c=h;if(Gu(c,!0)||36===c||95===c||8204===c||8205===c)return e.lastIntValue=h,!0;e.pos=m;return!1};Zg.regexp_eatAtomEscape=function(e){if(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||
e.switchN&&this.regexp_eatKGroupName(e))return!0;e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape"));return!1};Zg.regexp_eatBackReference=function(e){var m=e.pos;if(this.regexp_eatDecimalEscape(e)){var c=e.lastIntValue;if(e.switchU)return c>e.maxBackReference&&(e.maxBackReference=c),!0;if(c<=e.numCapturingParens)return!0;e.pos=m}return!1};Zg.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),
!0;e.raise("Invalid named reference")}return!1};Zg.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Zg.regexp_eatCControlLetter=function(e){var m=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=m}return!1};Zg.regexp_eatZero=
function(e){return 48!==e.current()||py(e.lookahead())?!1:(e.lastIntValue=0,e.advance(),!0)};Zg.regexp_eatControlEscape=function(e){var m=e.current();return 116===m?(e.lastIntValue=9,e.advance(),!0):110===m?(e.lastIntValue=10,e.advance(),!0):118===m?(e.lastIntValue=11,e.advance(),!0):102===m?(e.lastIntValue=12,e.advance(),!0):114===m?(e.lastIntValue=13,e.advance(),!0):!1};Zg.regexp_eatControlLetter=function(e){var m=e.current();return 65<=m&&90>=m||97<=m&&122>=m?(e.lastIntValue=m%32,e.advance(),!0):
!1};Zg.regexp_eatRegExpUnicodeEscapeSequence=function(e,m){void 0===m&&(m=!1);var c=e.pos;m=m||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){c=e.lastIntValue;if(m&&55296<=c&&56319>=c){m=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var h=e.lastIntValue;if(56320<=h&&57343>=h)return e.lastIntValue=1024*(c-55296)+(h-56320)+65536,!0}e.pos=m;e.lastIntValue=c}return!0}if(h=m&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125))h=e.lastIntValue,h=0<=h&&1114111>=h;
if(h)return!0;m&&e.raise("Invalid unicode escape");e.pos=c}return!1};Zg.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var m=e.current();return 99===m||e.switchN&&107===m?!1:(e.lastIntValue=m,e.advance(),!0)};Zg.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var m=e.current();if(49<=m&&57>=m){do e.lastIntValue=10*e.lastIntValue+(m-48),e.advance();while(48<=(m=e.current())&&57>=m);return!0}return!1};Zg.regexp_eatCharacterClassEscape=
function(e){var m=e.current();if(100===m||68===m||115===m||83===m||119===m||87===m)return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&9<=this.options.ecmaVersion&&(80===m||112===m)){e.lastIntValue=-1;e.advance();if(e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};Zg.regexp_eatUnicodePropertyValueExpression=function(e){var m=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var c=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e))return this.regexp_validateUnicodePropertyNameAndValue(e,
c,e.lastStringValue),!0}e.pos=m;return this.regexp_eatLoneUnicodePropertyNameOrValue(e)?(this.regexp_validateUnicodePropertyNameOrValue(e,e.lastStringValue),!0):!1};Zg.regexp_validateUnicodePropertyNameAndValue=function(e,m,c){YJ.call(e.unicodeProperties.nonBinary,m)||e.raise("Invalid property name");e.unicodeProperties.nonBinary[m].test(c)||e.raise("Invalid property value")};Zg.regexp_validateUnicodePropertyNameOrValue=function(e,m){e.unicodeProperties.binary.test(m)||e.raise("Invalid property name")};
Zg.regexp_eatUnicodePropertyName=function(e){var m;for(e.lastStringValue="";$s(m=e.current());)e.lastStringValue+=Iu(m),e.advance();return""!==e.lastStringValue};Zg.regexp_eatUnicodePropertyValue=function(e){var m;for(e.lastStringValue="";aD(m=e.current());)e.lastStringValue+=Iu(m),e.advance();return""!==e.lastStringValue};Zg.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Zg.regexp_eatCharacterClass=function(e){if(e.eat(91)){e.eat(94);this.regexp_classRanges(e);
if(e.eat(93))return!0;e.raise("Unterminated character class")}return!1};Zg.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var m=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var c=e.lastIntValue;!e.switchU||-1!==m&&-1!==c||e.raise("Invalid character class");-1!==m&&-1!==c&&m>c&&e.raise("Range out of order in character class")}}};Zg.regexp_eatClassAtom=function(e){var m=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var c=e.current();(99===
c||48<=c&&55>=c)&&e.raise("Invalid class escape");e.raise("Invalid escape")}e.pos=m}m=e.current();return 93!==m?(e.lastIntValue=m,e.advance(),!0):!1};Zg.regexp_eatClassEscape=function(e){var m=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=m}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Zg.regexp_eatClassControlLetter=function(e){var m=
e.current();return py(m)||95===m?(e.lastIntValue=m%32,e.advance(),!0):!1};Zg.regexp_eatHexEscapeSequence=function(e){var m=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape");e.pos=m}return!1};Zg.regexp_eatDecimalDigits=function(e){var m=e.pos,c;for(e.lastIntValue=0;py(c=e.current());)e.lastIntValue=10*e.lastIntValue+(c-48),e.advance();return e.pos!==m};Zg.regexp_eatHexDigits=function(e){var m=e.pos,c;for(e.lastIntValue=0;bD(c=e.current());)e.lastIntValue=
16*e.lastIntValue+CA(c),e.advance();return e.pos!==m};Zg.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var m=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var c=e.lastIntValue;3>=m&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*m+8*c+e.lastIntValue:e.lastIntValue=8*m+c}else e.lastIntValue=m;return!0}return!1};Zg.regexp_eatOctalDigit=function(e){var m=e.current();if(48<=m&&55>=m)return e.lastIntValue=m-48,e.advance(),!0;e.lastIntValue=0;return!1};Zg.regexp_eatFixedHexDigits=
function(e,m){for(var c=e.pos,h=e.lastIntValue=0;h<m;++h){var n=e.current();if(!bD(n))return e.pos=c,!1;e.lastIntValue=16*e.lastIntValue+CA(n);e.advance()}return!0};var GH=function(e){this.type=e.type;this.value=e.value;this.start=e.start;this.end=e.end;e.options.locations&&(this.loc=new BA(e,e.startLoc,e.endLoc));e.options.ranges&&(this.range=[e.start,e.end])},kj=Gl.prototype;kj.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new GH(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};kj.getToken=function(){this.next();return new GH(this)};"undefined"!==typeof Symbol&&(kj[Symbol.iterator]=function(){var e=this;return{next:function(){var m=e.getToken();return{done:m.type===Ta.eof,value:m}}}});kj.curContext=function(){return this.context[this.context.length-1]};kj.nextToken=
function(){var e=this.curContext();e&&e.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ta.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};kj.readToken=function(e){return ao(e,6<=this.options.ecmaVersion)||92===e?this.readWord():this.getTokenFromCode(e)};kj.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(55295>=e||57344<=e)return e;
var m=this.input.charCodeAt(this.pos+1);return(e<<10)+m-56613888};kj.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),m=this.pos,c=this.input.indexOf("*/",this.pos+=2);-1===c&&this.raise(this.pos-2,"Unterminated comment");this.pos=c+2;if(this.options.locations){ny.lastIndex=m;for(var h;(h=ny.exec(this.input))&&h.index<this.pos;)++this.curLine,this.lineStart=h.index+h[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(m+2,c),m,this.pos,e,this.curPosition())};
kj.skipLineComment=function(e){for(var m=this.pos,c=this.options.onComment&&this.curPosition(),h=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!bo(h);)h=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(m+e,this.pos),m,this.pos,c,this.curPosition())};kj.skipSpace=function(){a:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<e&&14>e||5760<=e&&LV.test(String.fromCharCode(e)))++this.pos;else break a}}};kj.finishToken=function(e,m){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var c=this.type;this.type=e;this.value=
m;this.updateContext(c)};kj.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(48<=e&&57>=e)return this.readNumber(!0);var m=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===e&&46===m)return this.pos+=3,this.finishToken(Ta.ellipsis);++this.pos;return this.finishToken(Ta.dot)};kj.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(Ta.assign,2):this.finishOp(Ta.slash,1)};
kj.readToken_mult_modulo_exp=function(e){var m=this.input.charCodeAt(this.pos+1),c=1,h=42===e?Ta.star:Ta.modulo;7<=this.options.ecmaVersion&&42===e&&42===m&&(++c,h=Ta.starstar,m=this.input.charCodeAt(this.pos+2));return 61===m?this.finishOp(Ta.assign,c+1):this.finishOp(h,c)};kj.readToken_pipe_amp=function(e){var m=this.input.charCodeAt(this.pos+1);return m===e?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ta.assign,3):this.finishOp(124===e?Ta.logicalOR:Ta.logicalAND,
2):61===m?this.finishOp(Ta.assign,2):this.finishOp(124===e?Ta.bitwiseOR:Ta.bitwiseAND,1)};kj.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ta.assign,2):this.finishOp(Ta.bitwiseXOR,1)};kj.readToken_plus_min=function(e){var m=this.input.charCodeAt(this.pos+1);return m===e?45!==m||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!iq.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ta.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===m?this.finishOp(Ta.assign,2):this.finishOp(Ta.plusMin,1)};kj.readToken_lt_gt=function(e){var m=this.input.charCodeAt(this.pos+1),c=1;if(m===e)return c=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+c)?this.finishOp(Ta.assign,c+1):this.finishOp(Ta.bitShift,c);if(33===m&&60===e&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===m&&(c=2);return this.finishOp(Ta.relational,c)};kj.readToken_eq_excl=function(e){var m=this.input.charCodeAt(this.pos+1);return 61===m?this.finishOp(Ta.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===m&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ta.arrow)):this.finishOp(61===e?Ta.eq:Ta.prefix,1)};kj.readToken_question=function(){var e=this.options.ecmaVersion;if(11<=e){var m=this.input.charCodeAt(this.pos+1);if(46===m){var c=this.input.charCodeAt(this.pos+
2);if(48>c||57<c)return this.finishOp(Ta.questionDot,2)}if(63===m)return 12<=e&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ta.assign,3):this.finishOp(Ta.coalesce,2)}return this.finishOp(Ta.question,1)};kj.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ta.parenL);case 41:return++this.pos,this.finishToken(Ta.parenR);case 59:return++this.pos,this.finishToken(Ta.semi);case 44:return++this.pos,this.finishToken(Ta.comma);case 91:return++this.pos,
this.finishToken(Ta.bracketL);case 93:return++this.pos,this.finishToken(Ta.bracketR);case 123:return++this.pos,this.finishToken(Ta.braceL);case 125:return++this.pos,this.finishToken(Ta.braceR);case 58:return++this.pos,this.finishToken(Ta.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ta.backQuote);case 48:e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===e||79===e)return this.readRadixNumber(8);
if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);
case 63:return this.readToken_question();case 126:return this.finishOp(Ta.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ju(e)+"'")};kj.finishOp=function(e,m){var c=this.input.slice(this.pos,this.pos+m);this.pos+=m;return this.finishToken(e,c)};kj.readRegexp=function(){for(var e,m,c=this.pos;;){this.pos>=this.input.length&&this.raise(c,"Unterminated regular expression");var h=this.input.charAt(this.pos);iq.test(h)&&this.raise(c,"Unterminated regular expression");if(e)e=!1;else{if("["===h)m=
!0;else if("]"===h&&m)m=!1;else if("/"===h&&!m)break;e="\\"===h}++this.pos}e=this.input.slice(c,this.pos);++this.pos;h=this.pos;m=this.readWord1();this.containsEsc&&this.unexpected(h);h=this.regexpState||(this.regexpState=new vx(this));h.reset(c,e,m);this.validateRegExpFlags(h);this.validateRegExpPattern(h);c=null;try{c=new RegExp(e,m)}catch(n){}return this.finishToken(Ta.regexp,{pattern:e,flags:m,value:c})};kj.readInt=function(e,m,c){var h=12<=this.options.ecmaVersion&&void 0===m;c=c&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,d=0,k=0,a=null==m?Infinity:m;k<a;++k,++this.pos){var f=this.input.charCodeAt(this.pos);if(h&&95===f)c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===k&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=f;else{var l=97<=f?f-97+10:65<=f?f-65+10:48<=f&&57>=f?f-48:Infinity;if(l>=e)break;d=f;
b=b*e+l}}h&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=m&&this.pos-n!==m?null:b};kj.readRadixNumber=function(e){var m=this.pos;this.pos+=2;var c=this.readInt(e);null==c&&this.raise(this.start+2,"Expected number in radix "+e);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(c=DA(this.input.slice(m,this.pos)),++this.pos):ao(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Ta.num,c)};kj.readNumber=function(e){var m=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(m,"Invalid number");var c=2<=this.pos-m&&48===this.input.charCodeAt(m);c&&this.strict&&this.raise(m,"Invalid number");var h=this.input.charCodeAt(this.pos);if(!c&&!e&&11<=this.options.ecmaVersion&&110===h)return c=DA(this.input.slice(m,this.pos)),++this.pos,ao(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ta.num,c);c&&/[89]/.test(this.input.slice(m,
this.pos))&&(c=!1);46!==h||c||(++this.pos,this.readInt(10),h=this.input.charCodeAt(this.pos));69!==h&&101!==h||c||(h=this.input.charCodeAt(++this.pos),43!==h&&45!==h||++this.pos,null===this.readInt(10)&&this.raise(m,"Invalid number"));ao(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");e=this.input.slice(m,this.pos);c=c?parseInt(e,8):parseFloat(e.replace(/_/g,""));return this.finishToken(Ta.num,c)};kj.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var e=++this.pos;var m=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<m&&this.invalidStringToken(e,"Code point out of bounds")}else m=this.readHexChar(4);return m};kj.readString=function(e){for(var m="",c=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var h=this.input.charCodeAt(this.pos);if(h===e)break;92===h?(m+=this.input.slice(c,this.pos),m+=this.readEscapedChar(!1),c=
this.pos):(bo(h,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}m+=this.input.slice(c,this.pos++);return this.finishToken(Ta.string,m)};var v8={};kj.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===v8)this.readInvalidTemplateToken();else throw e;}this.inTemplateElement=!1};kj.invalidStringToken=function(e,m){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw v8;this.raise(e,m)};kj.readTmplToken=
function(){for(var e="",m=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var c=this.input.charCodeAt(this.pos);if(96===c||36===c&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ta.template||this.type===Ta.invalidTemplate)){if(36===c)return this.pos+=2,this.finishToken(Ta.dollarBraceL);++this.pos;return this.finishToken(Ta.backQuote)}e+=this.input.slice(m,this.pos);return this.finishToken(Ta.template,e)}if(92===c)e+=this.input.slice(m,
this.pos),e+=this.readEscapedChar(!0),m=this.pos;else if(bo(c)){e+=this.input.slice(m,this.pos);++this.pos;switch(c){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(c)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);m=this.pos}else++this.pos}};kj.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Ta.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};kj.readEscapedChar=function(e){var m=this.input.charCodeAt(++this.pos);++this.pos;switch(m){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ju(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=m&&55>=m){var c=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],h=parseInt(c,8);255<h&&(c=c.slice(0,-1),h=parseInt(c,8));this.pos+=c.length-1;m=this.input.charCodeAt(this.pos);"0"===c&&56!==m&&57!==m||!this.strict&&
!e||this.invalidStringToken(this.pos-1-c.length,e?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(h)}return bo(m)?"":String.fromCharCode(m)}};kj.readHexChar=function(e){var m=this.pos;e=this.readInt(16,e);null===e&&this.invalidStringToken(m,"Bad character escape sequence");return e};kj.readWord1=function(){this.containsEsc=!1;for(var e="",m=!0,c=this.pos,h=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Gu(n,
h))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,e+=this.input.slice(c,this.pos),c=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(m?ao:Gu)(n,h)||this.invalidStringToken(c,"Invalid Unicode escape"),e+=Ju(n),c=this.pos;else break;m=!1}return e+this.input.slice(c,this.pos)};kj.readWord=function(){var e=this.readWord1(),m=Ta.name;this.keywords.test(e)&&(m=XJ[e]);return this.finishToken(m,
e)};Gl.acorn={Parser:Gl,version:"8.0.4",defaultOptions:dG,Position:$C,SourceLocation:BA,getLineInfo:Hu,Node:yz,TokenType:Dj,tokTypes:Ta,keywordTypes:XJ,TokContext:ss,tokContexts:Hl,isIdentifierChar:Gu,isIdentifierStart:ao,Token:GH,isNewLine:bo,lineBreak:iq,lineBreakG:ny,nonASCIIwhitespace:LV};var Jv=Object.freeze({__proto__:null,Node:yz,Parser:Gl,Position:$C,SourceLocation:BA,TokContext:ss,Token:GH,TokenType:Dj,defaultOptions:dG,getLineInfo:Hu,isIdentifierChar:Gu,isIdentifierStart:ao,isNewLine:bo,
keywordTypes:XJ,lineBreak:iq,lineBreakG:ny,nonASCIIwhitespace:LV,parse:function(e,m){return Gl.parse(e,m)},parseExpressionAt:function(e,m,c){return Gl.parseExpressionAt(e,m,c)},tokContexts:Hl,tokTypes:Ta,tokenizer:function(e,m){return Gl.tokenizer(e,m)},version:"8.0.4"});Ca("bD",Jv);var JB=function(e,m){this.node=e;this.state=m},hf={};hf.Program=hf.BlockStatement=function(e,m,c){var h=0;for(e=e.body;h<e.length;h+=1)c(e[h],m,"Statement")};hf.Statement=Nw;hf.EmptyStatement=gp;hf.ExpressionStatement=
hf.ParenthesizedExpression=hf.ChainExpression=function(e,m,c){return c(e.expression,m,"Expression")};hf.IfStatement=function(e,m,c){c(e.test,m,"Expression");c(e.consequent,m,"Statement");e.alternate&&c(e.alternate,m,"Statement")};hf.LabeledStatement=function(e,m,c){return c(e.body,m,"Statement")};hf.BreakStatement=hf.ContinueStatement=gp;hf.WithStatement=function(e,m,c){c(e.object,m,"Expression");c(e.body,m,"Statement")};hf.SwitchStatement=function(e,m,c){c(e.discriminant,m,"Expression");var h=0;
for(e=e.cases;h<e.length;h+=1){var n=e[h];n.test&&c(n.test,m,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)c(n[b],m,"Statement")}};hf.SwitchCase=function(e,m,c){e.test&&c(e.test,m,"Expression");var h=0;for(e=e.consequent;h<e.length;h+=1)c(e[h],m,"Statement")};hf.ReturnStatement=hf.YieldExpression=hf.AwaitExpression=function(e,m,c){e.argument&&c(e.argument,m,"Expression")};hf.ThrowStatement=hf.SpreadElement=function(e,m,c){return c(e.argument,m,"Expression")};hf.TryStatement=function(e,
m,c){c(e.block,m,"Statement");e.handler&&c(e.handler,m);e.finalizer&&c(e.finalizer,m,"Statement")};hf.CatchClause=function(e,m,c){e.param&&c(e.param,m,"Pattern");c(e.body,m,"Statement")};hf.WhileStatement=hf.DoWhileStatement=function(e,m,c){c(e.test,m,"Expression");c(e.body,m,"Statement")};hf.ForStatement=function(e,m,c){e.init&&c(e.init,m,"ForInit");e.test&&c(e.test,m,"Expression");e.update&&c(e.update,m,"Expression");c(e.body,m,"Statement")};hf.ForInStatement=hf.ForOfStatement=function(e,m,c){c(e.left,
m,"ForInit");c(e.right,m,"Expression");c(e.body,m,"Statement")};hf.ForInit=function(e,m,c){"VariableDeclaration"===e.type?c(e,m):c(e,m,"Expression")};hf.DebuggerStatement=gp;hf.FunctionDeclaration=function(e,m,c){return c(e,m,"Function")};hf.VariableDeclaration=function(e,m,c){var h=0;for(e=e.declarations;h<e.length;h+=1)c(e[h],m)};hf.VariableDeclarator=function(e,m,c){c(e.id,m,"Pattern");e.init&&c(e.init,m,"Expression")};hf.Function=function(e,m,c){e.id&&c(e.id,m,"Pattern");for(var h=0,n=e.params;h<
n.length;h+=1)c(n[h],m,"Pattern");c(e.body,m,e.expression?"Expression":"Statement")};hf.Pattern=function(e,m,c){"Identifier"===e.type?c(e,m,"VariablePattern"):"MemberExpression"===e.type?c(e,m,"MemberPattern"):c(e,m)};hf.VariablePattern=gp;hf.MemberPattern=Nw;hf.RestElement=function(e,m,c){return c(e.argument,m,"Pattern")};hf.ArrayPattern=function(e,m,c){var h=0;for(e=e.elements;h<e.length;h+=1){var n=e[h];n&&c(n,m,"Pattern")}};hf.ObjectPattern=function(e,m,c){var h=0;for(e=e.properties;h<e.length;h+=
1){var n=e[h];"Property"===n.type?(n.computed&&c(n.key,m,"Expression"),c(n.value,m,"Pattern")):"RestElement"===n.type&&c(n.argument,m,"Pattern")}};hf.Expression=Nw;hf.ThisExpression=hf.Super=hf.MetaProperty=gp;hf.ArrayExpression=function(e,m,c){var h=0;for(e=e.elements;h<e.length;h+=1){var n=e[h];n&&c(n,m,"Expression")}};hf.ObjectExpression=function(e,m,c){var h=0;for(e=e.properties;h<e.length;h+=1)c(e[h],m)};hf.FunctionExpression=hf.ArrowFunctionExpression=hf.FunctionDeclaration;hf.SequenceExpression=
function(e,m,c){var h=0;for(e=e.expressions;h<e.length;h+=1)c(e[h],m,"Expression")};hf.TemplateLiteral=function(e,m,c){for(var h=0,n=e.quasis;h<n.length;h+=1)c(n[h],m);h=0;for(e=e.expressions;h<e.length;h+=1)c(e[h],m,"Expression")};hf.TemplateElement=gp;hf.UnaryExpression=hf.UpdateExpression=function(e,m,c){c(e.argument,m,"Expression")};hf.BinaryExpression=hf.LogicalExpression=function(e,m,c){c(e.left,m,"Expression");c(e.right,m,"Expression")};hf.AssignmentExpression=hf.AssignmentPattern=function(e,
m,c){c(e.left,m,"Pattern");c(e.right,m,"Expression")};hf.ConditionalExpression=function(e,m,c){c(e.test,m,"Expression");c(e.consequent,m,"Expression");c(e.alternate,m,"Expression")};hf.NewExpression=hf.CallExpression=function(e,m,c){c(e.callee,m,"Expression");if(e.arguments){var h=0;for(e=e.arguments;h<e.length;h+=1)c(e[h],m,"Expression")}};hf.MemberExpression=function(e,m,c){c(e.object,m,"Expression");e.computed&&c(e.property,m,"Expression")};hf.ExportNamedDeclaration=hf.ExportDefaultDeclaration=
function(e,m,c){e.declaration&&c(e.declaration,m,"ExportNamedDeclaration"===e.type||e.declaration.id?"Statement":"Expression");e.source&&c(e.source,m,"Expression")};hf.ExportAllDeclaration=function(e,m,c){e.exported&&c(e.exported,m);c(e.source,m,"Expression")};hf.ImportDeclaration=function(e,m,c){for(var h=0,n=e.specifiers;h<n.length;h+=1)c(n[h],m);c(e.source,m,"Expression")};hf.ImportExpression=function(e,m,c){c(e.source,m,"Expression")};hf.ImportSpecifier=hf.ImportDefaultSpecifier=hf.ImportNamespaceSpecifier=
hf.Identifier=hf.Literal=gp;hf.TaggedTemplateExpression=function(e,m,c){c(e.tag,m,"Expression");c(e.quasi,m,"Expression")};hf.ClassDeclaration=hf.ClassExpression=function(e,m,c){return c(e,m,"Class")};hf.Class=function(e,m,c){e.id&&c(e.id,m,"Pattern");e.superClass&&c(e.superClass,m,"Expression");c(e.body,m)};hf.ClassBody=function(e,m,c){var h=0;for(e=e.body;h<e.length;h+=1)c(e[h],m)};hf.MethodDefinition=hf.Property=function(e,m,c){e.computed&&c(e.key,m,"Expression");c(e.value,m,"Expression")};var Ht=
Object.freeze({__proto__:null,ancestor:function(e,m,c,h,n){var b=[];c||(c=hf);(function l(k,a,f){f=f||k.type;var r=m[f],v=k!==b[b.length-1];v&&b.push(k);c[f](k,a,l);r&&r(k,a||b,b);v&&b.pop()})(e,h,n)},base:hf,findNodeAfter:function(e,m,c,h,n){c=Mw(c);h||(h=hf);try{(function f(d,k,a){if(!(d.end<m)){a=a||d.type;if(d.start>=m&&c(a,d))throw new JB(d,k);h[a](d,k,f)}})(e,n)}catch(b){if(b instanceof JB)return b;throw b;}},findNodeAround:function(e,m,c,h,n){c=Mw(c);h||(h=hf);try{(function f(d,k,a){a=a||d.type;
if(!(d.start>m||d.end<m)&&(h[a](d,k,f),c(a,d)))throw new JB(d,k);})(e,n)}catch(b){if(b instanceof JB)return b;throw b;}},findNodeAt:function(e,m,c,h,n,b){n||(n=hf);h=Mw(h);try{(function l(k,a,f){f=f||k.type;if((null==m||k.start<=m)&&(null==c||k.end>=c))n[f](k,a,l);if(!(null!=m&&k.start!==m||null!=c&&k.end!==c)&&h(f,k))throw new JB(k,a);})(e,b)}catch(d){if(d instanceof JB)return d;throw d;}},findNodeBefore:function(e,m,c,h,n){c=Mw(c);h||(h=hf);var b;(function l(k,a,f){k.start>m||(f=f||k.type,k.end<=
m&&(!b||b.node.end<k.end)&&c(f,k)&&(b=new JB(k,a)),h[f](k,a,l))})(e,n);return b},full:function(e,m,c,h,n){c||(c=hf);var b;(function l(k,a,f){f=f||k.type;c[f](k,a,l);b!=k&&(m(k,a,f),b=k)})(e,h,n)},fullAncestor:function(e,m,c,h){c||(c=hf);var n=[],b;(function l(k,a,f){f=f||k.type;var r=k!==n[n.length-1];r&&n.push(k);c[f](k,a,l);b!=k&&(m(k,a||n,n,f),b=k);r&&n.pop()})(e,h)},make:Ku,recursive:function(e,m,c,h,n){var b=c?Ku(c,h||void 0):h;(function l(k,a,f){b[f||k.type](k,a,l)})(e,m,n)},simple:function(e,
m,c,h,n){c||(c=hf);(function f(d,k,a){a=a||d.type;var l=m[a];c[a](d,k,f);l&&l(d,k)})(e,h,n)}}),vk=function(e,m){void 0===m&&(m={});this.toks=this.constructor.BaseParser.tokenizer(e,m);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ta.eof,start:0,end:0};this.tok.validateRegExpFlags=Jq;this.tok.validateRegExpPattern=Jq;this.options.locations&&(e=this.toks.curPosition(),this.tok.loc=new BA(this.toks,e,e));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=
0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};vk.prototype.startNode=function(){return new yz(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};vk.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};vk.prototype.startNodeAt=function(e){return this.options.locations?new yz(this.toks,e[0],e[1]):new yz(this.toks,e)};vk.prototype.finishNode=function(e,m){e.type=m;e.end=
this.last.end;this.options.locations&&(e.loc.end=this.last.loc.end);this.options.ranges&&(e.range[1]=this.last.end);return e};vk.prototype.dummyNode=function(e){var m=this.startNode();m.type=e;m.end=m.start;this.options.locations&&(m.loc.end=m.loc.start);this.options.ranges&&(m.range[1]=m.start);this.last={type:Ta.name,start:m.start,end:m.start,loc:m.loc};return m};vk.prototype.dummyIdent=function(){var e=this.dummyNode("Identifier");e.name="\u2716";return e};vk.prototype.dummyString=function(){var e=
this.dummyNode("Literal");e.value=e.raw="\u2716";return e};vk.prototype.eat=function(e){return this.tok.type===e?(this.next(),!0):!1};vk.prototype.isContextual=function(e){return this.tok.type===Ta.name&&this.tok.value===e};vk.prototype.eatContextual=function(e){return this.tok.value===e&&this.eat(Ta.name)};vk.prototype.canInsertSemicolon=function(){return this.tok.type===Ta.eof||this.tok.type===Ta.braceR||iq.test(this.input.slice(this.last.end,this.tok.start))};vk.prototype.semicolon=function(){return this.eat(Ta.semi)};
vk.prototype.expect=function(e){if(this.eat(e))return!0;for(var m=1;2>=m;m++)if(this.lookAhead(m).type===e){for(e=0;e<m;e++)this.next();return!0}};vk.prototype.pushCx=function(){this.context.push(this.curIndent)};vk.prototype.popCx=function(){this.curIndent=this.context.pop()};vk.prototype.lineEnd=function(e){for(;e<this.input.length&&!bo(this.input.charCodeAt(e));)++e;return e};vk.prototype.indentationAfter=function(e){for(var m=0;;++e){var c=this.input.charCodeAt(e);if(32===c)++m;else if(9===c)m+=
this.options.tabSize;else return m}};vk.prototype.closes=function(e,m,c,h){return this.tok.type===e||this.tok.type===Ta.eof?!0:c!==this.curLineStart&&this.curIndent<m&&this.tokenStartsLine()&&(!h||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<m)};vk.prototype.tokenStartsLine=function(){for(var e=this.tok.start-1;e>=this.curLineStart;--e){var m=this.input.charCodeAt(e);if(9!==m&&32!==m)return!1}return!0};vk.prototype.extend=function(e,m){this[e]=m(this[e])};vk.prototype.parse=
function(){this.next();return this.parseTopLevel()};vk.extend=function(){for(var e=[],m=arguments.length;m--;)e[m]=arguments[m];m=this;for(var c=0;c<e.length;c++)m=e[c](m);return m};vk.parse=function(e,m){return(new this(e,m)).parse()};vk.BaseParser=Gl;var pN=vk.prototype;pN.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};pN.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ta.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ta.ellipsis),new GH(this.toks)}catch(h){if(!(h instanceof SyntaxError))throw h;var e=h.message,m=h.raisedAt,c=!0;if(/unterminated/i.test(e))if(m=this.lineEnd(h.pos+1),/string/.test(e))c={start:h.pos,end:m,type:Ta.string,value:this.input.slice(h.pos+
1,m)};else if(/regular expr/i.test(e)){c=this.input.slice(h.pos,m);try{c=new RegExp(c)}catch(n){}c={start:h.pos,end:m,type:Ta.regexp,value:c}}else c=/template/.test(e)?{start:h.pos,end:m,type:Ta.template,value:this.input.slice(h.pos,m)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(e))for(;m<this.input.length&&!sn(this.input.charCodeAt(m));)++m;else if(/character escape|expected hexadecimal/i.test(e))for(;m<
this.input.length&&(e=this.input.charCodeAt(m++),34!==e&&39!==e&&!bo(e)););else if(/unexpected character/i.test(e))m++,c=!1;else if(/regular expression/i.test(e))c=!0;else throw h;this.resetTo(m);!0===c&&(c={start:m,end:m,type:Ta.name,value:"\u2716"});if(c)return this.options.locations&&(c.loc=new BA(this.toks,Hu(this.input,c.start),Hu(this.input,c.end))),c}};pN.resetTo=function(e){this.toks.pos=e;var m=this.input.charAt(e-1);this.toks.exprAllowed=!m||/[[{(,;:?/*=+\-~!|&%^<>]/.test(m)||/[enwfd]/.test(m)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(e-10,e));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=ny.lastIndex=0;for(var c;(c=ny.exec(this.input))&&c.index<e;)++this.toks.curLine,this.toks.lineStart=c.index+c[0].length}};pN.lookAhead=function(e){for(;e>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[e-1]};var ts=vk.prototype;ts.parseTopLevel=function(){var e=this.startNodeAt(this.options.locations?[0,Hu(this.input,
0)]:0);for(e.body=[];this.tok.type!==Ta.eof;)e.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(e.body);this.last=this.tok;e.sourceType=this.options.sourceType;return this.finishNode(e,"Program")};ts.parseStatement=function(){var e=this.tok.type,m=this.startNode();if(this.toks.isLet()){e=Ta._var;var c="let"}switch(e){case Ta._break:case Ta._continue:this.next();var h=e===Ta._break;this.semicolon()||this.canInsertSemicolon()?m.label=null:(m.label=this.tok.type===Ta.name?this.parseIdent():
null,this.semicolon());return this.finishNode(m,h?"BreakStatement":"ContinueStatement");case Ta._debugger:return this.next(),this.semicolon(),this.finishNode(m,"DebuggerStatement");case Ta._do:return this.next(),m.body=this.parseStatement(),m.test=this.eat(Ta._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(m,"DoWhileStatement");case Ta._for:this.next();h=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Ta.parenL);if(this.tok.type===
Ta.semi)return this.parseFor(m,null);if((e=this.toks.isLet())||this.tok.type===Ta._var||this.tok.type===Ta._const)return e=this.parseVar(this.startNode(),!0,e?"let":this.tok.value),1!==e.declarations.length||this.tok.type!==Ta._in&&!this.isContextual("of")?this.parseFor(m,e):(9<=this.options.ecmaVersion&&this.tok.type!==Ta._in&&(m.await=h),this.parseForIn(m,e));e=this.parseExpression(!0);return this.tok.type===Ta._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Ta._in&&(m.await=
h),this.parseForIn(m,this.toAssignable(e))):this.parseFor(m,e);case Ta._function:return this.next(),this.parseFunction(m,!0);case Ta._if:return this.next(),m.test=this.parseParenExpression(),m.consequent=this.parseStatement(),m.alternate=this.eat(Ta._else)?this.parseStatement():null,this.finishNode(m,"IfStatement");case Ta._return:return this.next(),this.eat(Ta.semi)||this.canInsertSemicolon()?m.argument=null:(m.argument=this.parseExpression(),this.semicolon()),this.finishNode(m,"ReturnStatement");
case Ta._switch:e=this.curIndent;c=this.curLineStart;this.next();m.discriminant=this.parseParenExpression();m.cases=[];this.pushCx();for(this.expect(Ta.braceL);!this.closes(Ta.braceR,e,c,!0);)if(this.tok.type===Ta._case||this.tok.type===Ta._default){var n=this.tok.type===Ta._case;h&&this.finishNode(h,"SwitchCase");m.cases.push(h=this.startNode());h.consequent=[];this.next();h.test=n?this.parseExpression():null;this.expect(Ta.colon)}else h||(m.cases.push(h=this.startNode()),h.consequent=[],h.test=
null),h.consequent.push(this.parseStatement());h&&this.finishNode(h,"SwitchCase");this.popCx();this.eat(Ta.braceR);return this.finishNode(m,"SwitchStatement");case Ta._throw:return this.next(),m.argument=this.parseExpression(),this.semicolon(),this.finishNode(m,"ThrowStatement");case Ta._try:return this.next(),m.block=this.parseBlock(),m.handler=null,this.tok.type===Ta._catch&&(h=this.startNode(),this.next(),this.eat(Ta.parenL)?(h.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ta.parenR)):
h.param=null,h.body=this.parseBlock(),m.handler=this.finishNode(h,"CatchClause")),m.finalizer=this.eat(Ta._finally)?this.parseBlock():null,m.handler||m.finalizer?this.finishNode(m,"TryStatement"):m.block;case Ta._var:case Ta._const:return this.parseVar(m,!1,c||this.tok.value);case Ta._while:return this.next(),m.test=this.parseParenExpression(),m.body=this.parseStatement(),this.finishNode(m,"WhileStatement");case Ta._with:return this.next(),m.object=this.parseParenExpression(),m.body=this.parseStatement(),
this.finishNode(m,"WithStatement");case Ta.braceL:return this.parseBlock();case Ta.semi:return this.next(),this.finishNode(m,"EmptyStatement");case Ta._class:return this.parseClass(!0);case Ta._import:return 10<this.options.ecmaVersion&&(h=this.lookAhead(1).type,h===Ta.parenL||h===Ta.dot)?(m.expression=this.parseExpression(),this.semicolon(),this.finishNode(m,"ExpressionStatement")):this.parseImport();case Ta._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(m,!0,!0);h=this.parseExpression();if(sh(h))return this.next(),this.tok.type===Ta.eof?this.finishNode(m,"EmptyStatement"):this.parseStatement();if(e===Ta.name&&"Identifier"===h.type&&this.eat(Ta.colon))return m.body=this.parseStatement(),m.label=h,this.finishNode(m,"LabeledStatement");m.expression=h;this.semicolon();return this.finishNode(m,"ExpressionStatement")}};ts.parseBlock=function(){var e=this.startNode();this.pushCx();this.expect(Ta.braceL);var m=this.curIndent,
c=this.curLineStart;for(e.body=[];!this.closes(Ta.braceR,m,c,!0);)e.body.push(this.parseStatement());this.popCx();this.eat(Ta.braceR);return this.finishNode(e,"BlockStatement")};ts.parseFor=function(e,m){e.init=m;e.test=e.update=null;this.eat(Ta.semi)&&this.tok.type!==Ta.semi&&(e.test=this.parseExpression());this.eat(Ta.semi)&&this.tok.type!==Ta.parenR&&(e.update=this.parseExpression());this.popCx();this.expect(Ta.parenR);e.body=this.parseStatement();return this.finishNode(e,"ForStatement")};ts.parseForIn=
function(e,m){var c=this.tok.type===Ta._in?"ForInStatement":"ForOfStatement";this.next();e.left=m;e.right=this.parseExpression();this.popCx();this.expect(Ta.parenR);e.body=this.parseStatement();return this.finishNode(e,c)};ts.parseVar=function(e,m,c){e.kind=c;this.next();e.declarations=[];do c=this.startNode(),c.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),c.init=this.eat(Ta.eq)?this.parseMaybeAssign(m):null,e.declarations.push(this.finishNode(c,"VariableDeclarator"));
while(this.eat(Ta.comma));e.declarations.length||(c=this.startNode(),c.id=this.dummyIdent(),e.declarations.push(this.finishNode(c,"VariableDeclarator")));m||this.semicolon();return this.finishNode(e,"VariableDeclaration")};ts.parseClass=function(e){var m=this.startNode();this.next();m.id=this.tok.type===Ta.name?this.parseIdent():!0===e?this.dummyIdent():null;m.superClass=this.eat(Ta._extends)?this.parseExpression():null;m.body=this.startNode();m.body.body=[];this.pushCx();var c=this.curIndent+1,h=
this.curLineStart;this.eat(Ta.braceL);this.curIndent+1<c&&(c=this.curIndent,h=this.curLineStart);for(;!this.closes(Ta.braceR,c,h);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Ta.star));this.parsePropertyName(n);if(sh(n.key))sh(this.parseMaybeAssign())&&this.next(),this.eat(Ta.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===Ta.parenL||this.tok.type===Ta.braceL?n.static=!1:(n.static=!0,b=this.eat(Ta.star),
this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Ta.parenL||this.canInsertSemicolon())var d=!1;else d=!0,b=9<=this.options.ecmaVersion&&this.eat(Ta.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Ta.parenL&&this.tok.type!==Ta.braceL?(n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||
b||d||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,d));m.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Ta.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(m.body,"ClassBody");return this.finishNode(m,e?"ClassDeclaration":"ClassExpression")};ts.parseFunction=function(e,
m,c){var h=this.inAsync,n=this.inFunction;this.initFunction(e);6<=this.options.ecmaVersion&&(e.generator=this.eat(Ta.star));8<=this.options.ecmaVersion&&(e.async=!!c);this.tok.type===Ta.name?e.id=this.parseIdent():!0===m&&(e.id=this.dummyIdent());this.inAsync=e.async;this.inFunction=!0;e.params=this.parseFunctionParams();e.body=this.parseBlock();this.toks.adaptDirectivePrologue(e.body.body);this.inAsync=h;this.inFunction=n;return this.finishNode(e,m?"FunctionDeclaration":"FunctionExpression")};ts.parseExport=
function(){var e=this.startNode();this.next();if(this.eat(Ta.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?e.exported=this.parseExprAtom():e.exported=null),e.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(Ta._default)){var m;if(this.tok.type===Ta._function||(m=this.toks.isAsyncFunction())){var c=this.startNode();this.next();m&&this.next();e.declaration=this.parseFunction(c,"nullableID",m)}else this.tok.type===
Ta._class?e.declaration=this.parseClass("nullableID"):(e.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(e,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(e.declaration=this.parseStatement(),e.specifiers=[],e.source=null):(e.declaration=null,e.specifiers=this.parseExportSpecifierList(),e.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(e,"ExportNamedDeclaration")};ts.parseImport=
function(){var e=this.startNode();this.next();if(this.tok.type===Ta.string)e.specifiers=[],e.source=this.parseExprAtom();else{if(this.tok.type===Ta.name&&"from"!==this.tok.value){var m=this.startNode();m.local=this.parseIdent();this.finishNode(m,"ImportDefaultSpecifier");this.eat(Ta.comma)}e.specifiers=this.parseImportSpecifiers();e.source=this.eatContextual("from")&&this.tok.type===Ta.string?this.parseExprAtom():this.dummyString();m&&e.specifiers.unshift(m)}this.semicolon();return this.finishNode(e,
"ImportDeclaration")};ts.parseImportSpecifiers=function(){var e=[];if(this.tok.type===Ta.star){var m=this.startNode();this.next();m.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();e.push(this.finishNode(m,"ImportNamespaceSpecifier"))}else{m=this.curIndent;var c=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Ta.braceL);this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Ta.braceR,m+(this.curLineStart<=h?1:0),c);){var n=this.startNode();if(this.eat(Ta.star))n.local=
this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(sh(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}e.push(n);this.eat(Ta.comma)}this.eat(Ta.braceR);this.popCx()}return e};ts.parseExportSpecifierList=function(){var e=[],m=this.curIndent,c=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Ta.braceL);
this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Ta.braceR,m+(this.curLineStart<=h?1:0),c)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(sh(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");e.push(n);this.eat(Ta.comma)}this.eat(Ta.braceR);this.popCx();return e};var wk=vk.prototype;wk.checkLVal=function(e){if(!e)return e;switch(e.type){case "Identifier":case "MemberExpression":return e;case "ParenthesizedExpression":return e.expression=
this.checkLVal(e.expression),e;default:return this.dummyIdent()}};wk.parseExpression=function(e){var m=this.storeCurrentPos(),c=this.parseMaybeAssign(e);if(this.tok.type===Ta.comma){m=this.startNodeAt(m);for(m.expressions=[c];this.eat(Ta.comma);)m.expressions.push(this.parseMaybeAssign(e));return this.finishNode(m,"SequenceExpression")}return c};wk.parseParenExpression=function(){this.pushCx();this.expect(Ta.parenL);var e=this.parseExpression();this.popCx();this.expect(Ta.parenR);return e};wk.parseMaybeAssign=
function(e){if(this.toks.isContextual("yield"))return e=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ta.star&&!this.tok.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(Ta.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression");var m=this.storeCurrentPos(),c=this.parseMaybeConditional(e);return this.tok.type.isAssign?(m=this.startNodeAt(m),m.operator=this.tok.value,m.left=this.tok.type===Ta.eq?this.toAssignable(c):
this.checkLVal(c),this.next(),m.right=this.parseMaybeAssign(e),this.finishNode(m,"AssignmentExpression")):c};wk.parseMaybeConditional=function(e){var m=this.storeCurrentPos(),c=this.parseExprOps(e);return this.eat(Ta.question)?(m=this.startNodeAt(m),m.test=c,m.consequent=this.parseMaybeAssign(),m.alternate=this.expect(Ta.colon)?this.parseMaybeAssign(e):this.dummyIdent(),this.finishNode(m,"ConditionalExpression")):c};wk.parseExprOps=function(e){var m=this.storeCurrentPos(),c=this.curIndent,h=this.curLineStart;
return this.parseExprOp(this.parseMaybeUnary(!1),m,-1,e,c,h)};wk.parseExprOp=function(e,m,c,h,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return e;var d=this.tok.type.binop;if(null!=d&&(!h||this.tok.type!==Ta._in)&&d>c){var k=this.startNodeAt(m);k.left=e;k.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine()?k.right=this.dummyIdent():(e=this.storeCurrentPos(),k.right=this.parseExprOp(this.parseMaybeUnary(!1),e,d,h,n,b));this.finishNode(k,
/&&|\|\||\?\?/.test(k.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(k,m,c,h,n,b)}return e};wk.parseMaybeUnary=function(e){var m=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var c=this.parseAwait();e=!0}else if(this.tok.type.prefix){c=this.startNode();var h=this.tok.type===Ta.incDec;h||(e=!0);c.operator=this.tok.value;c.prefix=!0;this.next();c.argument=this.parseMaybeUnary(!0);
h&&(c.argument=this.checkLVal(c.argument));c=this.finishNode(c,h?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ta.ellipsis)c=this.startNode(),this.next(),c.argument=this.parseMaybeUnary(e),c=this.finishNode(c,"SpreadElement");else for(c=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)h=this.startNodeAt(m),h.operator=this.tok.value,h.prefix=!1,h.argument=this.checkLVal(c),this.next(),c=this.finishNode(h,"UpdateExpression");return!e&&this.eat(Ta.starstar)?
(e=this.startNodeAt(m),e.operator="**",e.left=c,e.right=this.parseMaybeUnary(!1),this.finishNode(e,"BinaryExpression")):c};wk.parseExprSubscripts=function(){var e=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),e,!1,this.curIndent,this.curLineStart)};wk.parseSubscripts=function(e,m,c,h,n){for(var b=11<=this.options.ecmaVersion,d=!1;;){if(this.curLineStart!==n&&this.curIndent<=h&&this.tokenStartsLine())if(this.tok.type===Ta.dot&&this.curIndent===h)--h;else break;var k="Identifier"===
e.type&&"async"===e.name&&!this.canInsertSemicolon(),a=b&&this.eat(Ta.questionDot);a&&(d=!0);if(a&&this.tok.type!==Ta.parenL&&this.tok.type!==Ta.bracketL&&this.tok.type!==Ta.backQuote||this.eat(Ta.dot)){var f=this.startNodeAt(m);f.object=e;this.curLineStart!==n&&this.curIndent<=h&&this.tokenStartsLine()?f.property=this.dummyIdent():f.property=this.parsePropertyAccessor()||this.dummyIdent();f.computed=!1;b&&(f.optional=a);e=this.finishNode(f,"MemberExpression")}else if(this.tok.type===Ta.bracketL)this.pushCx(),
this.next(),f=this.startNodeAt(m),f.object=e,f.property=this.parseExpression(),f.computed=!0,b&&(f.optional=a),this.popCx(),this.expect(Ta.bracketR),e=this.finishNode(f,"MemberExpression");else if(c||this.tok.type!==Ta.parenL)if(this.tok.type===Ta.backQuote)a=this.startNodeAt(m),a.tag=e,a.quasi=this.parseTemplate(),e=this.finishNode(a,"TaggedTemplateExpression");else break;else{f=this.parseExprList(Ta.parenR);if(k&&this.eat(Ta.arrow))return this.parseArrowExpression(this.startNodeAt(m),f,!0);k=this.startNodeAt(m);
k.callee=e;k.arguments=f;b&&(k.optional=a);e=this.finishNode(k,"CallExpression")}}d&&(m=this.startNodeAt(m),m.expression=e,e=this.finishNode(m,"ChainExpression"));return e};wk.parseExprAtom=function(){switch(this.tok.type){case Ta._this:case Ta._super:var e=this.tok.type===Ta._this?"ThisExpression":"Super";var m=this.startNode();this.next();return this.finishNode(m,e);case Ta.name:m=this.storeCurrentPos();e=this.parseIdent();var c=!1;if("async"===e.name&&!this.canInsertSemicolon()){if(this.eat(Ta._function))return this.parseFunction(this.startNodeAt(m),
!1,!0);this.tok.type===Ta.name&&(e=this.parseIdent(),c=!0)}return this.eat(Ta.arrow)?this.parseArrowExpression(this.startNodeAt(m),[e],c):e;case Ta.regexp:return m=this.startNode(),e=this.tok.value,m.regex={pattern:e.pattern,flags:e.flags},m.value=e.value,m.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(m,"Literal");case Ta.num:case Ta.string:return m=this.startNode(),m.value=this.tok.value,m.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ta.num&&
110===m.raw.charCodeAt(m.raw.length-1)&&(m.bigint=m.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(m,"Literal");case Ta._null:case Ta._true:case Ta._false:return m=this.startNode(),m.value=this.tok.type===Ta._null?null:this.tok.type===Ta._true,m.raw=this.tok.type.keyword,this.next(),this.finishNode(m,"Literal");case Ta.parenL:m=this.storeCurrentPos();this.next();e=this.parseExpression();this.expect(Ta.parenR);if(this.eat(Ta.arrow))return e=e.expressions||[e],e.length&&sh(e[e.length-
1])&&e.pop(),this.parseArrowExpression(this.startNodeAt(m),e);this.options.preserveParens&&(m=this.startNodeAt(m),m.expression=e,e=this.finishNode(m,"ParenthesizedExpression"));return e;case Ta.bracketL:return m=this.startNode(),m.elements=this.parseExprList(Ta.bracketR,!0),this.finishNode(m,"ArrayExpression");case Ta.braceL:return this.parseObj();case Ta._class:return this.parseClass(!1);case Ta._function:return m=this.startNode(),this.next(),this.parseFunction(m,!1);case Ta._new:return this.parseNew();
case Ta.backQuote:return this.parseTemplate();case Ta._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};wk.parseExprImport=function(){var e=this.startNode(),m=this.parseIdent(!0);switch(this.tok.type){case Ta.parenL:return this.parseDynamicImport(e);case Ta.dot:return e.meta=m,this.parseImportMeta(e);default:return e.name="import",this.finishNode(e,"Identifier")}};wk.parseDynamicImport=function(e){e.source=this.parseExprList(Ta.parenR)[0]||
this.dummyString();return this.finishNode(e,"ImportExpression")};wk.parseImportMeta=function(e){this.next();e.property=this.parseIdent(!0);return this.finishNode(e,"MetaProperty")};wk.parseNew=function(){var e=this.startNode(),m=this.curIndent,c=this.curLineStart,h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ta.dot))return e.meta=h,e.property=this.parseIdent(!0),this.finishNode(e,"MetaProperty");h=this.storeCurrentPos();e.callee=this.parseSubscripts(this.parseExprAtom(),h,!0,m,c);
e.arguments=this.tok.type===Ta.parenL?this.parseExprList(Ta.parenR):[];return this.finishNode(e,"NewExpression")};wk.parseTemplateElement=function(){var e=this.startNode();e.value=this.tok.type===Ta.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();e.tail=this.tok.type===Ta.backQuote;return this.finishNode(e,"TemplateElement")};wk.parseTemplate=function(){var e=this.startNode();this.next();
e.expressions=[];var m=this.parseTemplateElement();for(e.quasis=[m];!m.tail;)this.next(),e.expressions.push(this.parseExpression()),this.expect(Ta.braceR)?m=this.parseTemplateElement():(m=this.startNode(),m.value={cooked:"",raw:""},m.tail=!0,this.finishNode(m,"TemplateElement")),e.quasis.push(m);this.expect(Ta.backQuote);return this.finishNode(e,"TemplateLiteral")};wk.parseObj=function(){var e=this.startNode();e.properties=[];this.pushCx();var m=this.curIndent+1,c=this.curLineStart;this.eat(Ta.braceL);
this.curIndent+1<m&&(m=this.curIndent,c=this.curLineStart);for(;!this.closes(Ta.braceR,m,c);){var h=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ta.ellipsis))h.argument=this.parseMaybeAssign(),e.properties.push(this.finishNode(h,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),h.method=!1,h.shorthand=!1,n=this.eat(Ta.star));this.parsePropertyName(h);if(this.toks.isAsyncProp(h)){var d=!0;n=9<=this.options.ecmaVersion&&this.eat(Ta.star);this.parsePropertyName(h)}else d=
!1;sh(h.key)?sh(this.parseMaybeAssign())&&this.next():(this.eat(Ta.colon)?(h.kind="init",h.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ta.parenL||this.tok.type===Ta.braceL)?(h.kind="init",h.method=!0,h.value=this.parseMethod(n,d)):5<=this.options.ecmaVersion&&"Identifier"===h.key.type&&!h.computed&&("get"===h.key.name||"set"===h.key.name)&&this.tok.type!==Ta.comma&&this.tok.type!==Ta.braceR&&this.tok.type!==Ta.eq?(h.kind=h.key.name,this.parsePropertyName(h),h.value=
this.parseMethod(!1)):(h.kind="init",6<=this.options.ecmaVersion?this.eat(Ta.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=h.key,n.right=this.parseMaybeAssign(),h.value=this.finishNode(n,"AssignmentExpression")):h.value=h.key:h.value=this.dummyIdent(),h.shorthand=!0),e.properties.push(this.finishNode(h,"Property")))}this.eat(Ta.comma)}this.popCx();this.eat(Ta.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(e,"ObjectExpression")};
wk.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(Ta.bracketL)){e.computed=!0;e.key=this.parseExpression();this.expect(Ta.bracketR);return}e.computed=!1}var m=this.tok.type===Ta.num||this.tok.type===Ta.string?this.parseExprAtom():this.parseIdent();e.key=m||this.dummyIdent()};wk.parsePropertyAccessor=function(){if(this.tok.type===Ta.name||this.tok.type.keyword)return this.parseIdent()};wk.parseIdent=function(){var e=this.tok.type===Ta.name?this.tok.value:this.tok.type.keyword;
if(!e)return this.dummyIdent();var m=this.startNode();this.next();m.name=e;return this.finishNode(m,"Identifier")};wk.initFunction=function(e){e.id=null;e.params=[];6<=this.options.ecmaVersion&&(e.generator=!1,e.expression=!1);8<=this.options.ecmaVersion&&(e.async=!1)};wk.toAssignable=function(e,m){if(e&&"Identifier"!==e.type&&("MemberExpression"!==e.type||m))if("ParenthesizedExpression"===e.type)this.toAssignable(e.expression,m);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===
e.type){e.type="ObjectPattern";for(var c=0,h=e.properties;c<h.length;c+=1)this.toAssignable(h[c],m)}else if("ArrayExpression"===e.type)e.type="ArrayPattern",this.toAssignableList(e.elements,m);else if("Property"===e.type)this.toAssignable(e.value,m);else if("SpreadElement"===e.type)e.type="RestElement",this.toAssignable(e.argument,m);else if("AssignmentExpression"===e.type)e.type="AssignmentPattern",delete e.operator;else return this.dummyIdent()}return e};wk.toAssignableList=function(e,m){for(var c=
0;c<e.length;c+=1)this.toAssignable(e[c],m);return e};wk.parseFunctionParams=function(e){e=this.parseExprList(Ta.parenR);return this.toAssignableList(e,!0)};wk.parseMethod=function(e,m){var c=this.startNode(),h=this.inAsync,n=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=!!e);8<=this.options.ecmaVersion&&(c.async=!!m);this.inAsync=c.async;this.inFunction=!0;c.params=this.parseFunctionParams();c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=
h;this.inFunction=n;return this.finishNode(c,"FunctionExpression")};wk.parseArrowExpression=function(e,m,c){var h=this.inAsync,n=this.inFunction;this.initFunction(e);8<=this.options.ecmaVersion&&(e.async=!!c);this.inAsync=e.async;this.inFunction=!0;e.params=this.toAssignableList(m,!0);e.expression=this.tok.type!==Ta.braceL;e.expression?e.body=this.parseMaybeAssign():(e.body=this.parseBlock(),this.toks.adaptDirectivePrologue(e.body.body));this.inAsync=h;this.inFunction=n;return this.finishNode(e,"ArrowFunctionExpression")};
wk.parseExprList=function(e,m){this.pushCx();var c=this.curIndent,h=this.curLineStart,n=[];for(this.next();!this.closes(e,c+1,h);)if(this.eat(Ta.comma))n.push(m?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(sh(b)){if(this.closes(e,c,h))break;this.next()}else n.push(b);this.eat(Ta.comma)}this.popCx();this.eat(e)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};wk.parseAwait=function(){var e=this.startNode();this.next();e.argument=
this.parseMaybeUnary();return this.finishNode(e,"AwaitExpression")};dG.tabSize=4;var qN=Object.freeze({__proto__:null,LooseParser:vk,isDummy:sh,parse:function(e,m){return vk.parse(e,m)}}),ef=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");ef.forEachNode=function(e,m,c,h){h=h||{};var n=h.traversal||"preorder",b=ef.obj.clone(h.visitors?h.visitors:ef.walk.make(ef.custom.visitors.withMemberExpression)),d="preorder"===n?function(k,a,f,l,r){m(f,c,l,a);return k(f,l+1,r)}:function(k,
a,f,l,r){k=k(f,l+1,r);m(f,c,l,a);return k};Object.keys(b).forEach(function(k){var a=b[k];b[k]=function(f,l,r){return d(a,k,f,l,r)}});ef.walk.recursive(e,0,null,b);return e};ef.matchNodes=function(e,m,c,h){return ef.forEachNode(e,function(n,b,d,k){if(m[n.type])m[n.type](n,b,d,k)},c,h)};ef.findNodesIncluding=Lr;ef.withParentInfo=function(e,m,c){function h(a){var f={id:ef.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(f);return f}c=c||{};var n=ef.walk.make({Function:function(a,
f,l){f&&f.scope&&(f.scope=h(f.scope));l(a.body,f,"ScopeBody")},VariableDeclarator:function(a,f,l){a.init&&l(a.init,f,"Expression")},VariableDeclaration:function(a,f,l){for(var r=0;r<a.declarations.length;++r){var v=a.declarations[r];v&&l(v,f,"VariableDeclarator")}},ObjectExpression:function(a,f,l){for(var r=0;r<a.properties.length;++r){var v=a.properties[r];l(v.key,f,"Expression");l(v.value,f,"Expression")}},MemberExpression:function(a,f,l){l(a.object,f,"Expression");l(a.property,f,"Expression")}},
ef.walk.base),b,d=[];ef.forEachNode(e,function(a){ef.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(f){if(!a.__lookupGetter__(f)){var l=a[f];a.__defineGetter__(f,function(){b=f;return l});d.push([a,f,a[f]])}})},null,{visitors:n});var k=[];Object.keys(n).forEach(function(a){var f=n[a];n[a]=function(l,r,v){return a===l.type||c.visitAllNodes?(k.push(m.call(null,l,{scope:r.scope,depth:r.depth,parent:r.parent,type:a,propertyInParent:b})),f(l,{scope:r.scope,parent:l,
depth:r.depth+1},v)):f(l,r,v)}});ef.walk.recursive(e,{scope:h(),parent:null,propertyInParent:"",depth:0},null,n);d.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return k};ef.copy=at;ef.findSiblings=Lu;ef.findNodeByAstIndex=Kq;ef.findStatementOfNode=za;ef.addAstIndex=hp;ef.obj=dg;ef.arr=Lf;ef.string=Ih;ef.Path=ci;ef.withMozillaAstDo=KB;ef.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;ef.acorn=Jv;ef.walk=Ht;ef.loose=qN;ef.custom=
{};ef.custom.forEachNode=ef.forEachNode;ef.custom.matchNodes=ef.matchNodes;ef.custom.findNodesIncluding=ef.findNodesIncluding;ef.custom.withParentInfo=ef.withParentInfo;ef.custom.copy=ef.copy;ef.custom.findSiblings=ef.findSiblings;ef.custom.findNodeByAstIndex=ef.findNodeByAstIndex;ef.custom.findStatementOfNode=ef.findStatementOfNode;ef.custom.addAstIndex=ef.addAstIndex;var zz=Ca("E",ef.custom);ef.walk=Ht;ef.walk=Ht;ef.loose=qN;ef.loose=qN;ef.acorn=Jv;ef.acorn=Jv;ef.custom=zz;ef.custom=zz;ef.findStatementOfNode=
za;ef.findStatementOfNode=za;ef.addAstIndex=hp;ef.addAstIndex=hp;ef.findNodesIncluding=Lr;ef.findNodesIncluding=Lr;ef.findSiblings=Lu;ef.findSiblings=Lu;ef.findNodeByAstIndex=Kq;ef.findNodeByAstIndex=Kq;ef.copy=at;ef.copy=at;ef.custom.visitors={stopAtFunctions:ef.walk.make(Object.assign({Function:function(){}},ef.walk.base)),withMemberExpression:ef.walk.make({MemberExpression:function(e,m,c){c(e.object,m,"Expression");c(e.property,m,"Expression")}},ef.walk.base)};var rj=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");
rj.blockInliner=function(e){if(Array.isArray(e.body))for(var m=e.body.length-1;0<=m;m--){var c=e.body[m];"BlockStatement"===c.type&&c[rj.canBeInlinedSym]&&e.body.splice.apply(e.body,[m,1].concat(c.body))}return e};rj.block=function(e){return{type:"BlockStatement",body:e}};rj.Visitor=ue;var It=function(){return rj.Visitor.apply(this,arguments)||this};$jscomp.inherits(It,rj.Visitor);It.prototype.accept=function(e,m,c){this.doFunc(e,m,c);return rj.Visitor.prototype.accept.call(this,e,m,c)};It.run=function(e,
m,c){var h=new this;h.doFunc=m;h.accept(e,c,[]);return c};Ca("A",It);rj.AllNodesVisitor=It;var LB=function(){return rj.Visitor.apply(this,arguments)||this};$jscomp.inherits(LB,rj.Visitor);LB.prototype.accept=function(e,m,c){switch(e.type){case "ArrowFunctionExpression":return e;case "FunctionExpression":return e;case "FunctionDeclaration":return m.unshift({node:e,path:c}),e;default:return rj.Visitor.prototype.accept.call(this,e,m,c)}};LB.run=function(e){var m=[];(new this).accept(e,m,[]);return m};
rj.FindToplevelFuncDeclVisitor=LB;rj.canBeInlinedSym=Symbol("canBeInlined");var us=function(){return rj.Visitor.apply(this,arguments)||this};$jscomp.inherits(us,rj.Visitor);us.prototype.accept=function(e,m,c){e=this.replacer(rj.Visitor.prototype.accept.call(this,e,m,c));m={};return Array.isArray(e)?1===e.length?e[0]:Object.assign(rj.block(e),(m[rj.canBeInlinedSym]=!0,m)):e};us.prototype.visitBlockStatement=function(e,m,c){return rj.blockInliner(rj.Visitor.prototype.visitBlockStatement.call(this,e,
m,c))};us.prototype.visitProgram=function(e,m,c){return rj.blockInliner(rj.Visitor.prototype.visitProgram.call(this,e,m,c))};us.run=function(e,m){var c=new this;c.replacer=m;return c.accept(e,null,[])};rj.ReplaceManyVisitor=us;var Jt=function(){return rj.Visitor.apply(this,arguments)||this};$jscomp.inherits(Jt,rj.Visitor);Jt.prototype.accept=function(e,m,c){return this.replacer(rj.Visitor.prototype.accept.call(this,e,m,c),c)};Jt.run=function(e,m){var c=new this;c.replacer=m;return c.accept(e,null,
[])};rj.ReplaceVisitor=Jt;rj.AllNodesVisitor=It;rj.AllNodesVisitor=It;rj.FindToplevelFuncDeclVisitor=LB;rj.FindToplevelFuncDeclVisitor=LB;rj.ReplaceVisitor=Jt;rj.ReplaceVisitor=Jt;rj.ReplaceManyVisitor=us;rj.ReplaceManyVisitor=us;var Bh=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");Bh.addSource=Cl;Bh.nodesAt=function(e,m){m="string"===typeof m?this.parse(m):m;return Bh.findNodesIncluding(m,e)};Bh.parseFunction=Qm;Bh.fuzzyParse=co;Bh.acornParseAsyncAware=function(e,m){if(m.onComment){var c=
m.onComment;m.onComment=function(b,d,k,a,f,l){return c.call(this,b,d,k-14,a-14,f,l)}}var h=Bh.acorn.parse("async () => {\n"+e+"\n}",m);if(h.loc)var n=h.loc.constructor;h={body:h.body[0].expression.body.body,sourceType:"module",type:"Program"};Bh.AllNodesVisitor.run(h,function(b,d,k){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(k=b.loc,d=k.start,k=k.end,b.loc=new n(m,{column:d.column,line:d.line-1},{column:k.column,line:k.line-1}));m.addSource&&
!b.source&&(b.source=e.slice(b.start,b.end))}});h.start=h.body[0].start;h.end=Bh.arr.last(h.body).end;m.addSource&&(h.source=e);h.body[0].loc&&n&&(h.loc=new n(m,h.body[0].loc.start,Bh.arr.last(h.body).loc.end));return h};Bh.parse=ce;Bh.arr=Lf;Bh.acorn=Jv;Bh.loose=qN;Bh.walk=Ht;Bh.addAstIndex=hp;Bh.findNodesIncluding=Lr;Bh.custom=zz;Bh.AllNodesVisitor=It;Bh.walk=Ht;Bh.walk=Ht;Bh.parse=ce;Bh.parse=ce;Bh.parseFunction=Qm;Bh.parseFunction=Qm;Bh.fuzzyParse=co;Bh.fuzzyParse=co;Bh.addSource=Cl;Bh.addSource=
Cl;Bh.custom.addSource=Bh.addSource;var ih=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");ih.string=Ih;ih.Path=ci;ih.BaseVisitor=ue;ih.PrinterVisitor=IE;ih.ComparisonVisitor=$k;ih.stringify=qm;ih.addAstIndex=hp;ih.parse=ce;ih.addSource=Cl;ih.methods={withMozillaAstDo:function(e,m,c){var h=new ih.BaseVisitor,n=h.accept;h.accept=function(b,d,k){m=c(function(){n.call(h,b,d,k)},b,d,k);return b};h.accept(e,m,[]);return m},printAst:function(e,m){m=m||{};var c=m.printSource||
!1,h=m.printPositions||!1,n=m.printIndex||!1,b=[];if("string"===typeof e){var d=e;e=ih.parse(e)}else d=m.source||e.source;c&&!e.source&&(d||(d=ih.stringify(e),e=ih.parse(d)),ih.addSource(e,d));(new ih.PrinterVisitor).accept(e,{index:0,tree:b},[]);return ih.string.printTree(b[0],function(k){var a=k.path+":"+k.node.type,f=[];n&&f.push(k.index);h&&f.push(k.node.start+"-"+k.node.end);c&&(k=k.node.source||d.slice(k.node.start,k.node.end),k=ih.string.print(k.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),f.push(k));f.length&&(a+="("+f.join(",")+")");return a},function(k){return k.children},"  ")},compareAst:function(e,m){if(!e||!m)throw Error("node"+(e?"1":"2")+" not defined");var c={completePath:[],comparisons:{errors:[]}};(new ih.ComparisonVisitor).accept(e,m,c,[]);return c.comparisons.errors.length?c.comparisons.errors.pluck("msg"):null},pathToNode:function(e,m,c){e.astIndex||ih.addAstIndex(e);c=new ih.BaseVisitor;var h=null;(c.accept=function(n,b,d,k){if(!h)return b=b.concat(k),n.astIndex===
m&&(h={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,d,k)}).call(c,e,[],{},[]);return h},rematchAstWithSource:function(e,m,c,h){c=!!c;m=ih.parse(m,c?{locations:!0}:void 0);var n=new ih.BaseVisitor;h&&(m=ih.Path(h).get(m));n.accept=function(b,d,k){k=k||[];var a=k.reduce(function(f,l){return f[l]},e);a.start=b.start;a.end=b.end;c&&(a.loc=b.loc);return this["visit"+b.type](b,d,k)};n.accept(m)}};ih.withMozillaAstDo=ih.methods.withMozillaAstDo;
ih.printAst=ih.methods.printAst;ih.compareAst=ih.methods.compareAst;ih.pathToNode=ih.methods.pathToNode;ih.rematchAstWithSource=ih.methods.rematchAstWithSource;var KB=ih.withMozillaAstDo,HH=ih.printAst,IH=ih.compareAst,JH=ih.pathToNode,KH=ih.rematchAstWithSource;ih.BaseVisitor=ue;ih.BaseVisitor=ue;ih.withMozillaAstDo=KB;ih.withMozillaAstDo=KB;ih.printAst=HH;ih.printAst=HH;ih.compareAst=IH;ih.compareAst=IH;ih.pathToNode=JH;ih.pathToNode=JH;ih.rematchAstWithSource=KH;ih.rematchAstWithSource=KH;var af=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");af.isIdentifier=qf;af.id=Sa;af.literal=rm;af.exprStmt=ip;af.returnStmt=Mr;af.empty=qy;af.binaryExpr=EA;af.funcExpr=Ow;af.funcCall=Lq;af.varDecl=vj;af.member=jp;af.memberChain=Wk;af.assign=Mq;af.block=Co;af.program=Mu;af.tryStmt=sm;af.prop=ry;af.objectLiteral=tn;af.ifStmt=tm;af.forIn=Nu;af.conditional=Ou;af.logical=FA;af.isIdentifier=qf;af.isIdentifier=qf;af.id=Sa;af.id=Sa;af.literal=rm;af.literal=rm;af.objectLiteral=tn;af.objectLiteral=
tn;af.prop=ry;af.prop=ry;af.exprStmt=ip;af.exprStmt=ip;af.returnStmt=Mr;af.returnStmt=Mr;af.empty=qy;af.empty=qy;af.binaryExpr=EA;af.binaryExpr=EA;af.funcExpr=Ow;af.funcExpr=Ow;af.funcCall=Lq;af.funcCall=Lq;af.varDecl=vj;af.varDecl=vj;af.member=jp;af.member=jp;af.memberChain=Wk;af.memberChain=Wk;af.assign=Mq;af.assign=Mq;af.block=Co;af.block=Co;af.program=Mu;af.program=Mu;af.tryStmt=sm;af.tryStmt=sm;af.ifStmt=tm;af.ifStmt=tm;af.forIn=Nu;af.forIn=Nu;af.conditional=Ou;af.conditional=Ou;af.logical=FA;
af.logical=FA;af.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var wx=Object.freeze({__proto__:null,isIdentifier:qf,id:Sa,literal:rm,objectLiteral:tn,prop:ry,exprStmt:ip,returnStmt:Mr,empty:qy,binaryExpr:EA,funcExpr:Ow,funcCall:Lq,varDecl:vj,member:jp,memberChain:Wk,assign:Mq,block:Co,program:Mu,tryStmt:sm,ifStmt:tm,forIn:Nu,conditional:Ou,logical:FA}),Qd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");Qd.scopes=Pw;Qd.nodesAtIndex=cD;Qd.scopesAtIndex=xi;Qd.scopeAtIndex=
dD;Qd.scopesAtPos=eD;Qd.nodesInScopeOf=bt;Qd.declarationsOfScope=fD;Qd.declarationsWithIdsOfScope=function(e){var m=Qd.arr.compact(Qd.helpers.declIds(e.params).concat(e.catches)),c=[].concat($jscomp.arrayFromIterable(e.node.id&&e.node.id.name?[e.node]:[]),$jscomp.arrayFromIterable(Qd.arr.filter(e.funcDecls,function(h){return h.id})),$jscomp.arrayFromIterable(Qd.arr.filter(e.classDecls,function(h){return h.id})));return m.map(function(h){return[h,h]}).concat(c.map(function(h){return[h,h.id]})).concat(Qd.helpers.varDecls(e)).concat(e.importSpecifiers.map(function(h){return[Qd.statementOf(e.node,
h),h]}))};Qd._declaredVarNames=Nr;Qd._findJsLintGlobalDeclarations=Sp;Qd.topLevelFuncDecls=Nq;Qd.resolveReference=Oq;Qd.resolveReferences=um;Qd.refWithDeclAt=gD;Qd.topLevelDeclsAndRefs=Rm;Qd.findGlobalVarRefs=Dk;Qd.findNodesIncludingLines=sy;Qd.__varDeclIdsFor=function(e,m){for(var c=[],h=$jscomp.makeIterator(e.params),n=h.next();!n.done;n=h.next())n=n.value,n.name===m&&c.push(n);h=$jscomp.makeIterator(e.funcDecls);for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===m&&c.push(n.id);h=$jscomp.makeIterator(e.classDecls);
for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===m&&c.push(n.id);h=$jscomp.makeIterator(e.importSpecifiers);for(n=h.next();!n.done;n=h.next())n=n.value,n.name===m&&c.push(n);e=$jscomp.makeIterator(Qd.helpers.varDeclIds(e));for(n=e.next();!n.done;n=e.next())n=n.value,n.name===m&&c.push(n);return c};Qd.findReferencesAndDeclsInScope=Or;Qd.findDeclarationClosestToIndex=ty;Qd.nodesAt=Pu;Qd.statementOf=eo;Qd.imports=Pr;Qd.exports=Qw;Qd.arr=Lf;Qd.chain=Gq;Qd.num=Em;Qd.tree=ux;Qd.fun=gn;Qd.obj=
dg;Qd.BaseVisitor=ue;Qd.ScopeVisitor=ak;Qd.FindToplevelFuncDeclVisitor=LB;Qd.withMozillaAstDo=KB;Qd.parse=ce;Qd.acorn=Jv;Qd.walk=Ht;Qd.custom=zz;Qd.stringify=qm;Qd.helpers={declIds:function(e,m){m=void 0===m?[]:m;for(var c=0;c<e.length;c++){var h=e[c];if(h)if("Identifier"===h.type)m.push(h);else if("RestElement"===h.type)m.push(h.argument);else if("AssignmentPattern"===h.type)Qd.helpers.declIds([h.left],m);else if("ObjectPattern"===h.type)for(var n=0;n<h.properties.length;n++){var b=h.properties[n];
Qd.helpers.declIds([b.value||b],m)}else"ArrayPattern"===h.type&&Qd.helpers.declIds(h.elements,m)}return m},varDecls:function(e,m){m=void 0===m?[]:m;e=$jscomp.makeIterator(e.varDecls);for(var c=e.next();!c.done;c=e.next()){c=$jscomp.makeIterator(c.value.declarations);for(var h=c.next();!h.done;h=c.next()){h=h.value;for(var n=$jscomp.makeIterator(Qd.helpers.declIds([h.id])),b=n.next();!b.done;b=n.next())m.push([h,b.value])}}return m},varDeclIds:function(e,m){m=void 0===m?[]:m;e=$jscomp.makeIterator(e.varDecls);
for(var c=e.next();!c.done;c=e.next()){c=$jscomp.makeIterator(c.value.declarations);for(var h=c.next();!h.done;h=c.next())Qd.helpers.declIds([h.value.id],m)}return m},objPropertiesAsList:function(e,m,c,h){h=void 0===h?[]:h;e=$jscomp.makeIterator(e.properties);for(var n=e.next();!n.done;n=e.next()){n=n.value;var b=n.key.name,d={key:m.concat([b]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":c||h.push(d);for(d=0;d<n.value.elements.length;d++)Qd.helpers.objPropertiesAsList(n.value.elements[d],
m.concat([b,d]),c,h);break;case "ObjectExpression":case "ObjectPattern":c||h.push(d);Qd.helpers.objPropertiesAsList(n.value,m.concat([b]),c,h);break;case "AssignmentPattern":c||h.push(d);Qd.helpers.objPropertiesAsList(n.left,m.concat([b]),c,h);break;default:h.push(d)}}return h},isDeclaration:function(e){return"FunctionDeclaration"===e.type||"VariableDeclaration"===e.type||"ClassDeclaration"===e.type}};Qd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
Qd.globalDeclRe=/^\s*global\s*/;Qd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var rN=Qd.helpers,OV=Qd.knownGlobals;
Qd.helpers=rN;Qd.helpers=rN;Qd.knownGlobals=OV;Qd.knownGlobals=OV;Qd.scopes=Pw;Qd.scopes=Pw;Qd.nodesAtIndex=cD;Qd.nodesAtIndex=cD;Qd.scopesAtIndex=xi;Qd.scopesAtIndex=xi;Qd.scopeAtIndex=dD;Qd.scopeAtIndex=dD;Qd.scopesAtPos=eD;Qd.scopesAtPos=eD;Qd.nodesInScopeOf=bt;Qd.nodesInScopeOf=bt;Qd.declarationsOfScope=fD;Qd.declarationsOfScope=fD;Qd._declaredVarNames=Nr;Qd._declaredVarNames=Nr;Qd._findJsLintGlobalDeclarations=Sp;Qd._findJsLintGlobalDeclarations=Sp;Qd.topLevelDeclsAndRefs=Rm;Qd.topLevelDeclsAndRefs=
Rm;Qd.topLevelFuncDecls=Nq;Qd.topLevelFuncDecls=Nq;Qd.findGlobalVarRefs=Dk;Qd.findGlobalVarRefs=Dk;Qd.findNodesIncludingLines=sy;Qd.findNodesIncludingLines=sy;Qd.findReferencesAndDeclsInScope=Or;Qd.findReferencesAndDeclsInScope=Or;Qd.findDeclarationClosestToIndex=ty;Qd.findDeclarationClosestToIndex=ty;Qd.nodesAt=Pu;Qd.nodesAt=Pu;Qd.statementOf=eo;Qd.statementOf=eo;Qd.resolveReferences=um;Qd.resolveReferences=um;Qd.refWithDeclAt=gD;Qd.refWithDeclAt=gD;Qd.imports=Pr;Qd.imports=Pr;Qd.exports=Qw;Qd.exports=
Qw;var Kt=Object.freeze({__proto__:null,helpers:rN,knownGlobals:OV,scopes:Pw,nodesAtIndex:cD,scopesAtIndex:xi,scopeAtIndex:dD,scopesAtPos:eD,nodesInScopeOf:bt,declarationsOfScope:fD,_declaredVarNames:Nr,_findJsLintGlobalDeclarations:Sp,topLevelDeclsAndRefs:Rm,topLevelFuncDecls:Nq,findGlobalVarRefs:Dk,findNodesIncludingLines:sy,findReferencesAndDeclsInScope:Or,findDeclarationClosestToIndex:ty,nodesAt:Pu,statementOf:eo,resolveReferences:um,refWithDeclAt:gD,imports:Pr,exports:Qw});Ca("bB",Kt);var Pq=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");Pq.objectSpreadTransform=Qu;Pq.Visitor=ue;Pq.funcCall=Lq;Pq.member=jp;var sN=function(){return Pq.Visitor.apply(this,arguments)||this};$jscomp.inherits(sN,Pq.Visitor);sN.prototype.accept=function(e,m,c){"ObjectExpression"===e.type&&(e=this.transformSpreadElement(e));return Pq.Visitor.prototype.accept.call(this,e,m,c)};sN.prototype.transformSpreadElement=function(e){var m=[],c=[m];e.properties.forEach(function(h){"SpreadElement"!==
h.type?(h.shorthand=!1,m.push(h)):(c.push(h),m=[],c.push(m))});if(1===c.length)return e;m.length||c.pop();return Pq.funcCall.apply(Pq,[Pq.member("Object","assign")].concat($jscomp.arrayFromIterable(c.map(function(h){return"SpreadElement"===h.type?h.argument:{properties:h,type:"ObjectExpression"}}))))};Pq.ObjectSpreadTransformer=sN;Pq.default=Qu;var je=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");je._node2string=function(e){return e.source||je.stringify(e)};je._findIndentAt=function(e,
m){var c=je.string.peekLeft(e,m,/\s+$/);e="number"===typeof c?e.slice(c,m):"";"\n"===e[0]&&(e=e.slice(1));return e};je._applyChanges=function(e,m){for(var c=0;c<e.length;c++){var h=e[c];if("del"===h.type)m=m.slice(0,h.pos)+m.slice(h.pos+h.length);else if("add"===h.type)m=m.slice(0,h.pos)+h.string+m.slice(h.pos);else throw Error("Unexpected change "+je.obj.inspect(h));}return m};je._compareNodesForReplacement=Sm;je.replaceNode=Qr;je.replaceNodes=GA;je.replace=hD;je.__findVarDecls=ZJ;je.oneDeclaratorPerVarDecl=
Tp;je.oneDeclaratorForVarsInDestructoring=uy;je.returnLastStatement=Rw;je.wrapInFunction=vy;je.wrapInStartEndCall=iD;je.transformSingleExpression=HA;je.arr=Lf;je.obj=dg;je.string=Ih;je.chain=Gq;je.Path=ci;je.helpers=rN;je.scopes=Pw;je.topLevelDeclsAndRefs=Rm;je.topLevelFuncDecls=Nq;je.parse=ce;je.fuzzyParse=co;je.objectSpreadTransform=Qu;je.varDecl=vj;je.memberChain=Wk;je.id=Sa;je.exprStmt=ip;je.funcCall=Lq;je.returnStmt=Mr;je.tryStmt=sm;je.program=Mu;je.block=Co;je.funcExpr=Ow;je.stringify=qm;je.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;je.replaceNode=Qr;je.replaceNode=Qr;je.replaceNodes=GA;je.replaceNodes=GA;je.replace=hD;je.replace=hD;je._compareNodesForReplacement=Sm;je._compareNodesForReplacement=Sm;je.oneDeclaratorPerVarDecl=Tp;je.oneDeclaratorPerVarDecl=Tp;je.oneDeclaratorForVarsInDestructoring=uy;je.oneDeclaratorForVarsInDestructoring=uy;je.returnLastStatement=Rw;je.returnLastStatement=Rw;je.wrapInFunction=vy;je.wrapInFunction=vy;je.wrapInStartEndCall=iD;je.wrapInStartEndCall=iD;je.transformSingleExpression=
HA;je.transformSingleExpression=HA;je.objectSpreadTransform=Qu;je.objectSpreadTransform=Qu;var MB=Object.freeze({__proto__:null,replaceNode:Qr,replaceNodes:GA,replace:hD,_compareNodesForReplacement:Sm,oneDeclaratorPerVarDecl:Tp,oneDeclaratorForVarsInDestructoring:uy,returnLastStatement:Rw,wrapInFunction:vy,wrapInStartEndCall:iD,transformSingleExpression:HA,objectSpreadTransform:Qu});Ca("bx",MB);var Yf=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");Yf.getCommentPrecedingNode=ct;Yf.extractComments=
dt;Yf.obj=dg;Yf.string=Ih;Yf.Path=ci;Yf.chain=Gq;Yf.arr=Lf;Yf.fun=gn;Yf.parse=ce;Yf.statementOf=eo;Yf.Visitor=ue;Yf.stringify=qm;Yf.getCommentPrecedingNode=ct;Yf.getCommentPrecedingNode=ct;Yf.extractComments=dt;Yf.extractComments=dt;var tN=Object.freeze({__proto__:null,getCommentPrecedingNode:ct,extractComments:dt}),Xh=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");Xh.findDecls=Ru;Xh.es6ClassDef=function(e){if("ClassDeclaration"!==e.type)return null;var m={type:"class-decl",
name:e.id.name,node:e,children:[]};m.children.push.apply(m.children,$jscomp.arrayFromIterable(Xh.arr.compact(e.body.body.map(function(c,h){return Xh.es6ClassMethod(c,m,h)}))));return[m].concat($jscomp.arrayFromIterable(m.children))};Xh.es6ClassMethod=function(e,m,c){if("MethodDefinition"!==e.type)return null;var h;"constructor"===e.kind?h="class-constructor":"method"===e.kind?h=e.static?"class-class-method":"class-instance-method":"get"===e.kind?h=e.static?"class-class-getter":"class-instance-getter":
"set"===e.kind&&(h=e.static?"class-class-setter":"class-instance-setter");return h?{type:h,parent:m,node:e,name:e.key.name}:null};Xh.varDefs=function(e){if("VariableDeclaration"!==e.type)return null;var m=[],c={};e=$jscomp.makeIterator(Xh.withVarDeclIds(e));for(var h=e.next();!h.done;c={$jscomp$loop$prop$def$2526:c.$jscomp$loop$prop$def$2526},h=e.next())if(h=h.value,c.$jscomp$loop$prop$def$2526={name:h.id.name,node:h.node,type:"var-decl"},m.push(c.$jscomp$loop$prop$def$2526),c.$jscomp$loop$prop$def$2526.node.init){for(h=
c.$jscomp$loop$prop$def$2526.node.init;"AssignmentExpression"===h.type;)h=h.right;if("ObjectExpression"===h.type)c.$jscomp$loop$prop$def$2526.type="object-decl",c.$jscomp$loop$prop$def$2526.children=Xh.objectKeyValsAsDefs(h).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2526})}}(c)),m.push.apply(m,$jscomp.arrayFromIterable(c.$jscomp$loop$prop$def$2526.children));else if(h=Xh.someObjectExpressionCall(h,c.$jscomp$loop$prop$def$2526))c.$jscomp$loop$prop$def$2526.children=
h.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2526})}}(c)),m.push.apply(m,$jscomp.arrayFromIterable(c.$jscomp$loop$prop$def$2526.children))}return m};Xh.funcDef=function(e){return"FunctionStatement"!==e.type&&"FunctionDeclaration"!==e.type||!e.id?null:[{name:e.id.name,node:e,type:"function-decl"}]};Xh.someObjectExpressionCall=function(e,m){"ExpressionStatement"===e.type&&(e=e.expression);return"CallExpression"!==e.type?null:(e=e.arguments.find(function(c){return"ObjectExpression"===
c.type}))?Xh.objectKeyValsAsDefs(e,m):null};Xh.functionWrapper=function(e,m){if(!Xh.isFunctionWrapper(e))return null;var c=Xh.Path("expression.arguments.0").get(e);m=c&&"FunctionExpression"===c.type&&5<Xh.string.lines(c.source||"").length?Xh.findDecls(c,m):Xh.findDecls(Xh.Path("expression.callee").get(e),m);var h={node:e,name:Xh.Path("expression.callee.id.name").get(e)};m.forEach(function(n){return n.parent||(n.parent=h)});return m};Xh.unwrapExport=function(e){return"ExportNamedDeclaration"!==e.type&&
"ExportDefaultDeclaration"!==e.type||!e.declaration?e:e.declaration};Xh.objectKeyValsAsDefs=function(e,m){return e.properties.map(function(c){return{name:c.key.name||c.key.value,type:"FunctionExpression"===c.value.type?"method":"property",node:c,parent:m}})};Xh.isFunctionWrapper=function(e){return"CallExpression"===Xh.Path("expression.type").get(e)&&"FunctionExpression"===Xh.Path("expression.callee.type").get(e)};Xh.declIds=Rr;Xh.withVarDeclIds=function(e){return e.declarations.map(function(m){!m.source&&
m.init&&(m.source=m.id.name+" = "+m.init.source);return{node:m,id:m.id}})};Xh.parse=ce;Xh.arr=Lf;Xh.Path=ci;Xh.string=Ih;Xh.obj=dg;Xh.findDecls=Ru;Xh.findDecls=Ru;var LH=Object.freeze({__proto__:null,findDecls:Ru}),mg=lively.FreezerRuntime.recorderFor("lively.ast/index.js");mg.isValidIdentifier=wy;mg.BaseVisitor=ue;mg.BaseVisitor=ue;mg.withMozillaAstDo=KB;mg.withMozillaAstDo=KB;mg.printAst=HH;mg.printAst=HH;mg.compareAst=IH;mg.compareAst=IH;mg.pathToNode=JH;mg.pathToNode=JH;mg.rematchAstWithSource=
KH;mg.rematchAstWithSource=KH;mg.ReplaceManyVisitor=us;mg.ReplaceManyVisitor=us;mg.ReplaceVisitor=Jt;mg.ReplaceVisitor=Jt;mg.AllNodesVisitor=It;mg.AllNodesVisitor=It;mg.parse=ce;mg.parse=ce;mg.parseFunction=Qm;mg.parseFunction=Qm;mg.fuzzyParse=co;mg.fuzzyParse=co;mg.acorn=Jv;mg.walk=Ht;mg.custom=zz;mg.stringify=qm;mg.escodegen=KE;mg.escodegen=KE;mg.escodegen=KE;mg.acorn=Jv;mg.acorn=Jv;mg.walk=Ht;mg.walk=Ht;mg.nodes=wx;mg.query=Kt;mg.transform=MB;mg.comments=tN;mg.categorizer=LH;mg.query=Kt;mg.query=
Kt;mg.transform=MB;mg.transform=MB;mg.comments=tN;mg.comments=tN;mg.categorizer=LH;mg.categorizer=LH;mg.stringify=qm;mg.stringify=qm;mg.nodes=wx;mg.nodes=wx;mg.custom=zz;mg.custom=zz;mg.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
mg.isValidIdentifier=wy;mg.isValidIdentifier=wy;mg.parse=ce;mg.Node=mg.parse("").constructor;Object.defineProperty(mg.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var w8=Object.freeze({__proto__:null,BaseVisitor:ue,withMozillaAstDo:KB,printAst:HH,compareAst:IH,pathToNode:JH,rematchAstWithSource:KH,ReplaceManyVisitor:us,ReplaceVisitor:Jt,AllNodesVisitor:It,parse:ce,parseFunction:Qm,fuzzyParse:co,escodegen:KE,acorn:Jv,walk:Ht,query:Kt,
transform:MB,comments:tN,categorizer:LH,stringify:qm,nodes:wx,custom:zz,isValidIdentifier:wy});Ca("bv",w8);var Yh=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");Yh.getGlobal=vm;Yh.signatureOf=et;Yh.isClass=Su;Yh.pluck=Sr;Yh.printSymbol=Qq;Yh.safeToString=Tu;Yh.printEvalResult=Tr;Yh.obj=dg;Yh.string=Ih;Yh.getGlobal=vm;Yh.getGlobal=vm;Yh.signatureOf=et;Yh.signatureOf=et;Yh.isClass=Su;Yh.isClass=Su;Yh.pluck=Sr;Yh.pluck=Sr;Yh.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(e){return"symbol"===
typeof Symbol[e]}).reduce(function(e,m){return e.set(Symbol[m],"Symbol."+m)},new Map)}();Yh.symMatcher=/^Symbol\((.*)\)$/;Yh.printSymbol=Qq;Yh.printSymbol=Qq;Yh.safeToString=Tu;Yh.safeToString=Tu;Yh.printEvalResult=Tr;Yh.printEvalResult=Tr;var PV=function(){function e(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||Yh.safeToString(n);if(!Yh.obj.isObject(n))return Yh.safeToString(n);
try{var d=Yh.obj.inspect(n,{customPrinter:c,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(k){}return"{}"===d?Yh.safeToString(n):d}function m(n,b){if("string"===typeof n||Array.isArray(n)||!h||"function"!==typeof n[h])return b;var d="function"===typeof n.entries,k=d?n.entries():n[h](),a=[];b=d?"{":"[";var f=d?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,r;10>l;l++){r=k.next();if(r.done)break;a.push(r.value)}k=a.map(function(v){return d?String(v[0])+": "+String(v[1]):
e(v,2)}).join(", ");return n+"("+b+k+f+")"}function c(n,b,d){if(!n)return b;if("symbol"===typeof n)return Yh.printSymbol(n);if("string"===typeof n)return Yh.string.print(Yh.string.truncate(n,100));if(n.isMorph)return Yh.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return Yh.safeToString(n);var k=n.length||n.byteLength;if(void 0!==k&&10<k&&n.slice)return"["+("string"===typeof n||n.byteLength?
Yh.safeToString(n.slice(0,10)):n.slice(0,10).map(d))+",...]";n=m(n,b);return n!==b?n:b}var h="undefined"!==typeof Symbol&&Symbol.iterator;return e}();Yh.printInspectEvalValue=PV;Yh.printInspectEvalValue=PV;Yh.printInspectEvalValue=PV;var Ei=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");Ei.getObjectForCompletion=Sw;Ei.propertyExtract=function(e,m,c){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m).map(Ei.printSymbol)).filter(function(h){return-1===e.indexOf(h)}).map(c).filter(function(h){return!!h}).sort(function(h,
n){return h.name<n.name?-1:h.name>n.name?1:0})};Ei.getMethodsOf=function(e,m){return Ei.propertyExtract(e,m,function(c){return m.__lookupGetter__&&m.__lookupGetter__(c)||"function"!==typeof m[c]?null:{name:c,completion:Ei.signatureOf(c,m[c])}})};Ei.getAttributesOf=function(e,m){return Ei.propertyExtract(e,m,function(c){return m.__lookupGetter__&&!m.__lookupGetter__(c)&&"function"===typeof m[c]?null:{name:c,completion:c}})};Ei.getProtoChain=function(e){for(var m=[];e;)m.push(e),e=e.__proto__;return m};
Ei.getDescriptorOf=function(e,m){function c(h,n){h.length>n&&(h=h.slice(0,n)+"...");return h.replace(/\n/g,"").replace(/\s+/g," ")}if(e===m){if("function"!==typeof e)return c(Ei.safeToString(e),50);m=e.toString();m=c(m.slice(m.indexOf("{")+1,m.lastIndexOf("}")),50);return Ei.signatureOf(e.displayName||e.name||"function",e)+" {"+m+"}"}return(e=m.hasOwnProperty("constructor")&&m.constructor)?"string"===typeof e.type&&e.type.length?c(e.type,50):"string"===typeof e.name&&e.name.length?c(e.name,50):"anonymous class":
"prototype"};Ei.getCompletionsOfObj=function(e,m){try{var c=[];var h=Ei.getProtoChain(e).map(function(b){var d=Ei.getDescriptorOf(e,b);b=Ei.getMethodsOf(c,b).concat(Ei.getAttributesOf(c,b));c=c.concat(Ei.pluck(b,"name"));return[d,Ei.pluck(b,"completion")]})}catch(b){var n=b}m(n,h)};Ei.descriptorsOfObjAndProtoProperties=function(e){var m=[];return Ei.getProtoChain(e).map(function(c){var h=Ei.getDescriptorOf(e,c);c=Ei.getMethodsOf(m,c).concat(Ei.getAttributesOf(m,c));m=m.concat(Ei.pluck(c,"name"));
return[h,Ei.pluck(c,"completion")]})};Ei.getCompletions=wm;Ei.lang=k8;Ei.signatureOf=et;Ei.pluck=Sr;Ei.safeToString=Tu;Ei.printSymbol=Qq;Ei.getObjectForCompletion=Sw;Ei.getObjectForCompletion=Sw;Ei.getCompletions=wm;Ei.getCompletions=wm;var MH=Object.freeze({__proto__:null,getObjectForCompletion:Sw,getCompletions:wm});Ca("aT",MH);var oc=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");oc.rewriteToCaptureTopLevelVariables=xy;oc.transformImportMeta=function(e,m){return oc.ReplaceVisitor.run(e,
function(c){return"MetaProperty"==c.type&&"import"==c.meta.name?oc.parse("({url: _context.id})").body[0].expression:c})};oc.rewriteToRegisterModuleToCaptureSetters=Uu;oc.clearEmptyExports=function(e,m){m=oc.topLevelDeclsAndRefs(e);m=$jscomp.makeIterator(m.scope.exportDecls);for(var c=m.next();!c.done;c=m.next())c=c.value,c.declaration||!c.specifiers||c.specifiers.length||oc.arr.remove(e.body,c);return e};oc.replaceRefs=function(e,m){var c=oc.topLevelDeclsAndRefs(e),h=c.refs.filter(function(b){return oc.shouldRefBeCaptured(b,
c,m)}),n=[];e=oc.ReplaceVisitor.run(e,function(b,d){if("Property"===b.type&&h.includes(b.key)&&b.shorthand)return oc.prop(oc.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){d=b.declaration;var k=b.specifiers;d&&(d.id?n.push(d.id):d.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(d.declarations.map(function(a){return a.id}))));k&&k.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&h.includes(b.left)&&m.declarationWrapper?Object.assign({},
b,{right:oc.declarationWrapperCall(m.declarationWrapper,null,oc.literal(b.left.name),oc.literal("assignment"),b.right,m.captureObj,m)}):b});return oc.ReplaceVisitor.run(e,function(b,d,k){return h.includes(b)&&!n.includes(b)?oc.member(m.captureObj,b):b})};oc.replaceVarDecls=function(e,m){var c=oc.topLevelDeclsAndRefs(e);return oc.ReplaceManyVisitor.run(e,function(h){if(!c.varDecls.includes(h)||h.declarations.every(function(l){return!oc.shouldDeclBeCaptured(l,m)}))return h;for(var n=[],b=0;b<h.declarations.length;b++){var d=
h.declarations[b];if(oc.shouldDeclBeCaptured(d,m)){var k=d.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:m.captureObj,property:d.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};k=m.declarationWrapper&&d.id.name?oc.declarationWrapperCall(m.declarationWrapper,d,oc.literal(d.id.name),oc.literal(h.kind),k,m.captureObj,m):k;if(d.id.type.includes("Pattern")){var a=oc.generateUniqueName(c.declaredNames,"destructured_1"),f={type:"Identifier",name:a};d=oc.transformPattern(d.id,
{parent:f,declaredNames:c.declaredNames}).map(function(l){return l[oc.annotationSym]&&l[oc.annotationSym].capture?oc.assignExpr(m.captureObj,l.declarations[0].id,m.declarationWrapper?oc.declarationWrapperCall(m.declarationWrapper,null,oc.literal(l.declarations[0].id.name),oc.literal(h.kind),l.declarations[0].init,m.captureObj,m):l.declarations[0].init,!1):l});c.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([oc.varDecl(f,k,h.kind)].concat(d)))}else n.push(oc.assignExpr(m.captureObj,
d.id,k,!1)),m.keepTopLevelVarDecls&&n.push(oc.varDecl(d.id,oc.member(m.captureObj,d.id)))}else n.push({type:"VariableDeclaration",kind:h.kind||"var",declarations:[d]})}return n})};oc.generateUniqueName=function(e,m){for(var c=1;-1<e.indexOf(m);){if(1E3<c)throw Error("Endless loop searching for unique variable "+m);m=m.replace(/_[0-9]+$|$/,"_"+ ++c)}return m};oc.additionalIgnoredDecls=function(e,m){m=oc.topLevelDeclsAndRefs(e);for(var c=[],h=0;h<m.scope.varDecls.length;h++){var n=m.scope.varDecls[h],
b=oc.Path(m.scope.varDeclPaths[h]).slice(0,-1).get(e);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||c.push.apply(c,$jscomp.arrayFromIterable(n.declarations))}return m.scope.catches.map(function(d){return d.name}).concat(c.map(function(d){return d.id.name}))};oc.additionalIgnoredRefs=function(e,m){m=oc.topLevelDeclsAndRefs(e);for(var c=[],h=0;h<m.scope.varDecls.length;h++){var n=m.scope.varDecls[h],b=oc.Path(m.scope.varDeclPaths[h]).slice(0,
-1).get(e);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||c.push.apply(c,$jscomp.arrayFromIterable(n.declarations))}return m.scope.catches.map(function(d){return d.name}).concat(oc.queryHelpers.declIds(c.map(function(d){return d.id})).map(function(d){return d.name}))};oc.shouldDeclBeCaptured=function(e,m){return-1===m.excludeDecls.indexOf(e.id.name)&&(!m.includeDecls||-1<m.includeDecls.indexOf(e.id.name))};oc.shouldRefBeCaptured=function(e,m,c){if(m.scope.importSpecifiers.includes(e))return!1;
for(var h=0;h<m.scope.exportDecls.length;h++){var n=m.scope.exportDecls[h];if(n.declarations&&n.declarations.includes(e)||n.declaration===e)return!1}return c.excludeRefs.includes(e.name)||c.includeRefs&&!c.includeRefs.includes(e.name)?!1:!0};oc.replaceClassDecls=function(e,m){if(m.classToFunction)return m.classToFunction.transform(e,m.classToFunction);var c=oc.topLevelDeclsAndRefs(e);if(!c.classDecls.length)return e;for(var h=e.body.length-1;0<=h;h--){var n=e.body[h];n.id&&c.classDecls.includes(n)&&
e.body.splice(h+1,0,oc.assignExpr(m.captureObj,n.id,n.id,!1))}return e};oc.splitExportDeclarations=function(e,m){m=e.body;for(var c=e.body=[],h=0;h<m.length;h++){var n=m[h];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)c.push(n);else for(var b=n.declaration.declarations,d=0;d<b.length;d++)c.push({type:"ExportNamedDeclaration",specifiers:[],declaration:oc.varDecl(b[d].id,b[d].init,n.declaration.kind)})}return e};
oc.insertCapturesForExportedImports=yy;oc.insertCapturesForExportDeclarations=function(e,m){for(var c=[],h=0;h<e.body.length;h++){var n=e.body[h];c.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,d=oc.generateUniqueName(oc.topLevelDeclsAndRefs(e).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=oc.id(d);oc.arr.pushAt(c,oc.assignExpr(m.captureObj,
d,b.raw,!1),c.indexOf(n))}else n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(k){var a=k.id;m.declarationWrapper&&(k.init.callee&&k.init.callee.name===m.declarationWrapper.name||(a=oc.declarationWrapperCall(m.declarationWrapper,k,oc.literal(k.id.name),oc.literal("assignment"),k.id,m.captureObj,m)));return oc.assignExpr(m.captureObj,k.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&c.push(oc.assignExpr(m.captureObj,
n.declaration.id,n.declaration.id,!1))}e.body=c;return e};oc.insertCapturesForImportDeclarations=function(e,m){e.body=e.body.reduce(function(c,h){return c.concat("ImportDeclaration"===h.type&&h.specifiers.length?[h].concat(h.specifiers.map(function(n){return oc.assignExpr(m.captureObj,n.local,n.local,!1)})):[h])},[]);return e};oc.insertDeclarationsForExports=function(e,m){for(var c=oc.topLevelDeclsAndRefs(e),h=[],n=0;n<e.body.length;n++){var b=e.body[n];m.classToFunction&&"ExportDefaultDeclaration"===
b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?h=h.concat([oc.varDeclOrAssignment(e,{type:"VariableDeclarator",id:b.declaration,init:oc.member(m.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?h.push(b):h=h.concat(b.specifiers.map(function(d){return c.declaredNames.includes(d.local.name)?null:oc.varDeclOrAssignment(e,{type:"VariableDeclarator",id:d.local,init:oc.member(m.captureObj,
d.local)})}).filter(Boolean)).concat(b)}e.body=h;return e};oc.fixDefaultAsyncFunctionExportForRegeneratorBug=function(e,m){m=[];for(var c=0;c<e.body.length;c++){var h=e.body[c];"ExportDefaultDeclaration"===h.type&&"FunctionDeclaration"===h.declaration.type&&h.declaration.id&&h.declaration.async&&(m.push(h.declaration),h.declaration={type:"Identifier",name:h.declaration.id.name});m.push(h)}e.body=m;return e};oc.es6ModuleTransforms=function(e,m){e.body=e.body.reduce(function(c,h){if("ExportNamedDeclaration"===
h.type)if(h.source){var n=d=h.source;var b=h.specifiers.map(function(k){return{type:"ExpressionStatement",expression:oc.exportFromImport({type:"Literal",value:k.exported.name},{type:"Literal",value:k.local.name},d,m.moduleExportFunc,m.moduleImportFunc)}})}else b=h.declaration?(b=h.declaration.declarations)?b.map(function(k){m.excludeDecls.push(k.id);return oc.varDecl(k.id,oc.assignExpr(m.captureObj,k.id,m.declarationWrapper?oc.declarationWrapperCall(m.declarationWrapper,null,oc.literal(k.id.name),
oc.literal(h.declaration.kind),k,m.captureObj,m):k.init,!1),h.declaration.kind)}).concat(b.map(function(k){return oc.exportCallStmt(m.moduleExportFunc,k.id.name,k.id)})):[h.declaration].concat(oc.exportCallStmt(m.moduleExportFunc,h.declaration.id.name,h.declaration.id)):h.specifiers.map(function(k){return oc.exportCallStmt(m.moduleExportFunc,k.exported.name,oc.shouldDeclBeCaptured({id:k.local},m)?oc.member(m.captureObj,k.local):k.local)});else if("ExportDefaultDeclaration"===h.type)b=h.declaration&&
h.declaration.id?[h.declaration].concat(oc.exportCallStmt(m.moduleExportFunc,"default",h.declaration.id)):[oc.exportCallStmt(m.moduleExportFunc,"default",h.declaration)];else if("ExportAllDeclaration"===h.type){n={name:m.es6ExportFuncId+"__iterator__",type:"Identifier"};var d=h.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",expression:oc.exportFromImport(n,n,d,m.moduleExportFunc,m.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",
id:n,init:null}]},right:oc.importCall(null,d,m.moduleImportFunc)}];m.excludeRefs.push(n.name);m.excludeDecls.push(n.name)}else b="ImportDeclaration"===h.type?h.specifiers.length?h.specifiers.map(function(k){return oc.varDeclAndImportCall(e,k.local,"ImportSpecifier"===k.type&&k.imported.name||"ImportDefaultSpecifier"===k.type&&"default"||null,h.source,m.moduleImportFunc)}):oc.importCallStmt(null,h.source,m.moduleImportFunc):[h];return c.concat(b)},[]);return e};oc.putFunctionDeclsInFront=function(e,
m){var c=oc.topLevelDeclsAndRefs(e).scope,h=c.funcDecls;if(!h.length)return e;for(var n=[],b=h.length;b--;){var d=h[b];if(d.id&&oc.shouldDeclBeCaptured(d,m)){var k=c.funcDeclPaths[b].slice(0,-1),a=oc.Path(k).get(c.node);k={type:"Identifier",name:d.id.name};var f=m.declarationWrapper?oc.declarationWrapperCall(m.declarationWrapper,d,oc.literal(k.name),oc.literal("function"),k,m.captureObj,m):k,l=Object.assign({},d);Array.isArray(a)?a.splice(a.indexOf(d),1,oc.exprStmt(d.id)):"ExportNamedDeclaration"===
a.type?(a=c.node.body.indexOf(a),-1<a&&c.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:d.id,local:d.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=d.id);n.unshift(oc.assignExpr(m.captureObj,k,f,!1));n.unshift(l)}}e.body=n.concat(e.body);return e};oc.computeDefRanges=function(e,m){e=oc.topLevelDeclsAndRefs(e);return oc.chain(e.scope.varDecls).pluck("declarations").flatten().value().concat(e.scope.funcDecls.filter(function(c){return c.id})).reduce(function(c,
h){c[h.id.name]||(c[h.id.name]=[]);c[h.id.name].push({type:h.type,start:h.start,end:h.end});return c},{})};oc.transformPattern=function(e,m){return"ArrayPattern"===e.type?oc.transformArrayPattern(e,m):"ObjectPattern"===e.type?oc.transformObjectPattern(e,m):[]};oc.transformArrayPattern=function(e,m){for(var c=m.declaredNames,h=oc.annotationSym,n=[],b=0;b<e.elements.length;b++){var d=e.elements[b];if("Identifier"===d.type)d=oc.varDecl(d,oc.member(m.parent,oc.id(b),!0)),d[h]={capture:!0},n.push(d);else if("RestElement"===
d.type)d=oc.varDecl(d.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:oc.member(m.parent,oc.id("slice"),!1)}),d[h]={capture:!0},n.push(d);else if("AssignmentPattern"==d.type)d=oc.varDecl(d.left,oc.conditional(oc.binaryExpr(oc.member(m.parent,oc.id(b),!0),"===",oc.id("undefined")),d.right,oc.member(m.parent,oc.id(b),!0))),d[h]={capture:!0},n.push(d);else{var k=oc.id(oc.generateUniqueName(c,m.parent.name+"$"+b)),a=oc.varDecl(k,oc.member(m.parent,b));c.push(k.name);n.push(a);
n.push.apply(n,$jscomp.arrayFromIterable(oc.transformPattern(d,{parent:k,declaredNames:c})))}}return n};oc.transformObjectPattern=function(e,m){for(var c=m.declaredNames,h=oc.annotationSym,n=[],b=0;b<e.properties.length;b++){var d=e.properties[b];if("RestElement"==d.type){var k=e.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),a=oc.nodes.varDecl(d.argument.name,oc.nodes.objectLiteral([])),f=oc.nodes.varDecl(d.argument.name,oc.id(d.argument.name));d=oc.nodes.exprStmt(oc.nodes.funcCall(oc.nodes.funcExpr({},
[],oc.nodes.forIn("__key",m.parent,oc.nodes.block.apply(oc.nodes,[].concat($jscomp.arrayFromIterable(k.length?k.map(function(l){return oc.nodes.ifStmt(oc.nodes.binaryExpr(oc.nodes.id("__key"),"===",oc.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[oc.nodes.exprStmt(oc.nodes.assign(oc.nodes.member(d.argument.name,oc.nodes.id("__key"),!0),oc.nodes.member(m.parent,oc.nodes.id("__key"),!0)))]))))));f[h]={capture:!0};n.push(a,f,d)}else"Identifier"==d.value.type?(a=oc.varDecl(d.value,
oc.member(m.parent,d.key)),a[h]={capture:!0},n.push(a)):"AssignmentPattern"==d.value.type?(a=oc.varDecl(d.value.left,oc.conditional(oc.binaryExpr(oc.member(m.parent,d.key),"===",oc.id("undefined")),d.value.right,oc.member(m.parent,d.key))),a[h]={capture:!0},n.push(a)):(a=oc.id(oc.generateUniqueName(c,m.parent.name+"$"+d.key.name)),f=oc.varDecl(a,oc.member(m.parent,d.key)),f[h]={capture:!1},c.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([f].concat(oc.transformPattern(d.value,{parent:a,declaredNames:c})))))}return n};
oc.varDeclOrAssignment=function(e,m,c){return-1<oc.topLevelDeclsAndRefs(e).declaredNames.indexOf(m.id.name)?oc.exprStmt(oc.assign(m.id,m.init)):{declarations:[m],kind:c||"var",type:"VariableDeclaration"}};oc.assignExpr=function(e,m,c,h){return oc.exprStmt(oc.assign(oc.member(e,m,h),c||oc.id("undefined")))};oc.exportFromImport=function(e,m,c,h,n){return oc.exportCall(h,e,oc.importCall(m,c,n))};oc.varDeclAndImportCall=function(e,m,c,h,n){return oc.varDecl(m,oc.importCall(c,h,n))};oc.importCall=function(e,
m,c){"string"===typeof e&&(e=oc.literal(e));return{arguments:[m].concat(e||[]),callee:c,type:"CallExpression"}};oc.importCallStmt=function(e,m,c){return oc.exprStmt(oc.importCall(e,m,c))};oc.exportCall=function(e,m,c){"string"===typeof m&&(m=oc.literal(m));c=oc.obj.deepCopy(c);return oc.funcCall(e,m,c)};oc.exportCallStmt=function(e,m,c){return oc.exprStmt(oc.exportCall(e,m,c))};oc.declarationWrapperCall=function(e,m,c,h,n,b,d){if(m){var k=[],a=!1;if(m["x-lively-object-meta"]){a=m["x-lively-object-meta"];
m=a.start;var f=a.end,l=a.evalId,r=a.sourceAccessorName;a=!0;k.push("start",oc.nodes.literal(m),"end",oc.nodes.literal(f))}void 0===l&&d.hasOwnProperty("evalId")&&(l=d.evalId,a=!0);void 0===r&&d.hasOwnProperty("sourceAccessorName")&&(r=d.sourceAccessorName,a=!0);void 0!==l&&k.push("evalId",oc.nodes.literal(l));r&&k.push("moduleSource",oc.nodes.id(r));if(a)return oc.funcCall(e,c,h,n,b,oc.nodes.objectLiteral(k))}return oc.funcCall(e,c,h,n,b)};oc.obj=dg;oc.string=Ih;oc.chain=Gq;oc.arr=Lf;oc.fun=gn;oc.Path=
ci;oc.parse=ce;oc.stringify=qm;oc.query=Kt;oc.transform=MB;oc.nodes=wx;oc.Visitor=ue;oc.ReplaceManyVisitor=us;oc.ReplaceVisitor=Jt;var Kv=oc.nodes;oc.member=Kv.member;oc.prop=Kv.prop;oc.varDecl=Kv.varDecl;oc.assign=Kv.assign;oc.id=Kv.id;oc.literal=Kv.literal;oc.exprStmt=Kv.exprStmt;oc.conditional=Kv.conditional;oc.binaryExpr=Kv.binaryExpr;oc.funcCall=Kv.funcCall;var x8=oc.query;oc.topLevelDeclsAndRefs=x8.topLevelDeclsAndRefs;oc.queryHelpers=x8.helpers;var y8=oc.transform;oc.transformSingleExpression=
y8.transformSingleExpression;oc.wrapInStartEndCall=y8.wrapInStartEndCall;oc.rewriteToCaptureTopLevelVariables=xy;oc.rewriteToCaptureTopLevelVariables=xy;oc.rewriteToRegisterModuleToCaptureSetters=Uu;oc.rewriteToRegisterModuleToCaptureSetters=Uu;oc.insertCapturesForExportedImports=yy;oc.insertCapturesForExportedImports=yy;oc.annotationSym=Symbol("lively.ast-destructuring-transform");var NH=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:xy,rewriteToRegisterModuleToCaptureSetters:Uu,
insertCapturesForExportedImports:yy}),z8={__esModule:!0,default:function(){return{manipulateOptions:function(e,m){m.plugins.push("jsx")}}}},Yla=z8=z8["default"],Zla={},A8=Zla=Array.isArray,uN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,B8={};B8="object"==typeof uN&&uN&&uN.Object===Object&&uN;var $la={},ama="object"==typeof self&&self&&self.Object===Object&&self,NB=$la=B8||ama||Function("return this")(),bma={},vN=bma=NB.Symbol,cma={},C8=Object.prototype,dma=C8.hasOwnProperty,
ema=C8.toString,OH=vN?vN.toStringTag:void 0,fma=cma=function(e){var m=dma.call(e,OH),c=e[OH];try{e[OH]=void 0;var h=!0}catch(b){}var n=ema.call(e);h&&(m?e[OH]=c:delete e[OH]);return n},D8={},gma=Object.prototype.toString;D8=function(e){return gma.call(e)};var hma={},ima=D8,E8=vN?vN.toStringTag:void 0,QV=hma=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":E8&&E8 in Object(e)?fma(e):ima(e)},jma={},RV=jma=function(e){return null!=e&&"object"==typeof e},kma={},lma=kma=function(e){return"string"==
typeof e||!A8(e)&&RV(e)&&"[object String]"==QV(e)},mma={},SV=mma=function(e){return e},nma={},oma=nma=function(e){return"symbol"==typeof e||RV(e)&&"[object Symbol]"==QV(e)},pma={},LE=pma=function(e){var m=typeof e;return null!=e&&("object"==m||"function"==m)},qma={},rma=qma=function(e){if(!LE(e))return!1;e=QV(e);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},F8={};F8=NB["__core-js_shared__"];var sma={},TV=F8,G8=function(){var e=/[^.]+$/.exec(TV&&
TV.keys&&TV.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),tma=sma=function(e){return!!G8&&G8 in e},H8={},uma=Function.prototype.toString;H8=function(e){if(null!=e){try{return uma.call(e)}catch(m){}return e+""}return""};var vma={},wma=H8,xma=/^\[object .+?Constructor\]$/,yma=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zma=vma=function(e){return!LE(e)||
tma(e)?!1:(rma(e)?yma:xma).test(wma(e))},I8={};I8=function(e,m){return null==e?void 0:e[m]};var Ama={},Bma=I8,J8=Ama=function(e,m){e=Bma(e,m);return zma(e)?e:void 0},Cma={},K8=Cma=function(){try{var e=J8(Object,"defineProperty");e({},"",{});return e}catch(m){}}(),Dma={},L8=Dma=function(e,m){var c=-1,h=e.length;for(m||(m=Array(h));++c<h;)m[c]=e[c];return m},Ema={},M8=Object.create,UV=Ema=function(){function e(){}return function(m){if(!LE(m))return{};if(M8)return M8(m);e.prototype=m;m=new e;e.prototype=
void 0;return m}}(),Fma={},Gma=/^(?:0|[1-9]\d*)$/,Hma=Fma=function(e,m){var c=typeof e;m=null==m?9007199254740991:m;return!!m&&("number"==c||"symbol"!=c&&Gma.test(e))&&-1<e&&0==e%1&&e<m},Ima={},N8=Ima=function(e,m,c){switch(c.length){case 0:return e.call(m);case 1:return e.call(m,c[0]);case 2:return e.call(m,c[0],c[1]);case 3:return e.call(m,c[0],c[1],c[2])}return e.apply(m,c)},O8={};O8=function(e){return function(){return e}};var Jma={},Kma=O8,Lma=Jma=K8?function(e,m){return K8(e,"toString",{configurable:!0,
enumerable:!1,value:Kma(m),writable:!0})}:SV,Mma={},Nma=Date.now,P8=Mma=function(e){var m=0,c=0;return function(){var h=Nma(),n=16-(h-c);c=h;if(0<n){if(800<=++m)return arguments[0]}else m=0;return e.apply(void 0,arguments)}},Oma={},Pma=Oma=P8(Lma),Qma={},Q8=Qma=J8(NB,"WeakMap"),Rma={},Sma=Rma=function(e,m){for(var c=-1,h=null==e?0:e.length;++c<h&&!1!==m(e[c],c,e););return e},Tma={},R8=0/0,Uma=/^\s+|\s+$/g,Vma=/^[-+]0x[0-9a-f]+$/i,Wma=/^0b[01]+$/i,Xma=/^0o[0-7]+$/i,Yma=parseInt,Zma=Tma=function(e){if("number"==
typeof e)return e;if(oma(e))return R8;LE(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=LE(e)?e+"":e);if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Uma,"");var m=Wma.test(e);return m||Xma.test(e)?Yma(e.slice(2),m?2:8):Vma.test(e)?R8:+e},$ma={},ana=$ma=function(e,m,c,h){var n=e.length;for(c+=h?1:-1;h?c--:++c<n;)if(m(e[c],c,e))return c;return-1},S8={},T8=1/0;S8=function(e){if(!e)return 0===e?e:0;e=Zma(e);return e===T8||e===-T8?1.7976931348623157E308*(0>e?-1:1):e===e?e:0};var bna={},cna=S8,
U8=bna=function(e){e=cna(e);var m=e%1;return e===e?m?e-m:e:0},dna={},ena=dna=function(e){return e!==e},V8={};V8=function(e,m,c){--c;for(var h=e.length;++c<h;)if(e[c]===m)return c;return-1};var W8={},fna=V8;W8=function(e,m,c){return m===m?fna(e,m,c):ana(e,ena,c)};var gna={},hna=W8,ina=gna=function(e,m){return!(null==e||!e.length)&&-1<hna(e,m,0)},jna={},kna=jna=function(){},lna={},VV=lna=function(){},IA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mna={};Tm.prototype=
UV(VV.prototype);var WV=mna=Tm.prototype.constructor=Tm,eG="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nna={};zy.prototype=UV(VV.prototype);var X8=nna=zy.prototype.constructor=zy,Y8={};Y8=function(e){if(e instanceof WV)return e.clone();var m=new X8(e.__wrapped__,e.__chain__);m.__actions__=L8(e.__actions__);m.__index__=e.__index__;m.__values__=e.__values__;return m};var ona={},dfa=WV,C_=X8,cfa=A8,bfa=RV,ffa=Y8,efa=Object.prototype.hasOwnProperty;Ay.prototype=VV.prototype;
var pna=ona=Ay.prototype.constructor=Ay,qna={},wN=qna=Q8&&new Q8,rna={},Z8=rna=wN?function(e){return wN.get(e)}:kna,$8={};$8={};var a9={},b9=$8,sna=Object.prototype.hasOwnProperty;a9=function(e){for(var m=e.name+"",c=b9[m],h=sna.call(b9,m)?c.length:0;h--;){var n=c[h],b=n.func;if(null==b||b==e)return n.name}return m};var tna={},una=a9,vna=tna=function(e){var m=una(e),c=pna[m];if("function"!=typeof c||!(m in WV.prototype))return!1;if(e===c)return!0;m=Z8(c);return!!m&&e===m[0]},wna={},c9=wna=wN?function(e,
m){wN.set(e,m);return e}:SV,xna={},xN=xna=function(e){return function(){var m=arguments;switch(m.length){case 0:return new e;case 1:return new e(m[0]);case 2:return new e(m[0],m[1]);case 3:return new e(m[0],m[1],m[2]);case 4:return new e(m[0],m[1],m[2],m[3]);case 5:return new e(m[0],m[1],m[2],m[3],m[4]);case 6:return new e(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new e(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var c=UV(e.prototype);m=e.apply(c,m);return LE(m)?m:c}},yN="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,yna={},zna=yna=function(e,m,c){function h(){return((this||yN)&&(this||yN)!==NB&&(this||yN)instanceof h?b:e).apply(n?c:this||yN,arguments)}var n=m&1,b=xN(e);return h},Ana={},Bna=Math.max,d9=Ana=function(e,m,c,h){var n=-1,b=e.length,d=c.length,k=-1,a=m.length,f=Bna(b-d,0),l=Array(a+f);for(h=!h;++k<a;)l[k]=m[k];for(;++n<d;)if(h||n<b)l[c[n]]=e[n];for(;f--;)l[k++]=e[n++];return l},Cna={},Dna=Math.max,e9=Cna=function(e,m,c,h){var n=-1,b=e.length,d=-1,k=c.length,
a=-1,f=m.length,l=Dna(b-k,0),r=Array(l+f);for(h=!h;++n<l;)r[n]=e[n];for(l=n;++a<f;)r[l+a]=m[a];for(;++d<k;)if(h||n<b)r[l+c[d]]=e[n++];return r},Ena={},Fna=Ena=function(e,m){for(var c=e.length,h=0;c--;)e[c]===m&&++h;return h},Gna={},f9=Gna=P8(c9),Hna={},Ina=/\{\n\/\* \[wrapped with (.+)\] \*/,Jna=/,? & /,Kna=Hna=function(e){return(e=e.match(Ina))?e[1].split(Jna):[]},Lna={},Mna=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nna=Lna=function(e,m){var c=m.length;if(!c)return e;var h=c-1;m[h]=(1<c?"& ":"")+
m[h];m=m.join(2<c?", ":" ");return e.replace(Mna,"{\n/* [wrapped with "+m+"] */\n")},g9={},Ona=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];g9=function(e,m){Sma(Ona,function(c){var h="_."+c[0];m&c[1]&&!ina(e,h)&&e.push(h)});return e.sort()};var Pna={},Qna=g9,h9=Pna=function(e,m,c){m+="";return Pma(e,Nna(m,Qna(Kna(m),c)))},Rna={},i9=Rna=function(e,m,c,h,n,b,d,k,a,f){var l=m&8;m=(m|(l?32:64))&~(l?64:32);m&4||(m&=-4);
n=[e,m,n,l?b:void 0,l?d:void 0,l?void 0:b,l?void 0:d,k,a,f];c=c.apply(void 0,n);vna(e)&&f9(c,n);c.placeholder=h;return h9(c,e,m)},Sna={},j9=Sna=function(e){return e.placeholder},Tna={},Una=Math.min,Vna=Tna=function(e,m){for(var c=e.length,h=Una(m.length,c),n=L8(e);h--;){var b=m[h];e[h]=Hma(b,c)?n[b]:void 0}return e},Wna={},zN=Wna=function(e,m){for(var c=-1,h=e.length,n=0,b=[];++c<h;){var d=e[c];if(d===m||"__lodash_placeholder__"===d)e[c]="__lodash_placeholder__",b[n++]=c}return b},$J="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Xna={},ifa=d9,jfa=e9,hfa=Fna,D_=xN,lfa=i9,gfa=j9,mfa=Vna,kfa=zN,nfa=NB,k9=Xna=jD,AN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Yna={},Zna=Yna=function(e,m,c){function h(){for(var b=arguments.length,d=Array(b),k=b,a=j9(h);k--;)d[k]=arguments[k];k=3>b&&d[0]!==a&&d[b-1]!==a?[]:zN(d,a);b-=k.length;return b<c?i9(e,m,k9,h.placeholder,void 0,d,k,void 0,void 0,c-b):N8((this||AN)&&(this||AN)!==NB&&(this||
AN)instanceof h?n:e,this||AN,d)}var n=xN(e);return h},BN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$na={},aoa=$na=function(e,m,c,h){function n(){for(var k=-1,a=arguments.length,f=-1,l=h.length,r=Array(l+a),v=(this||BN)&&(this||BN)!==NB&&(this||BN)instanceof n?d:e;++f<l;)r[f]=h[f];for(;a--;)r[f++]=arguments[++k];return N8(v,b?c:this||BN,r)}var b=m&1,d=xN(e);return n},l9={},boa=Math.min;l9=function(e,m){var c=e[1],h=m[1],n=c|h,b=128==h&&8==c||128==h&&256==c&&e[7].length<=
m[8]||384==h&&m[7].length<=m[8]&&8==c;if(!(131>n||b))return e;h&1&&(e[2]=m[2],n|=c&1?0:4);if(c=m[3])b=e[3],e[3]=b?d9(b,c,m[4]):c,e[4]=b?zN(e[3],"__lodash_placeholder__"):m[4];if(c=m[5])b=e[5],e[5]=b?e9(b,c,m[6]):c,e[6]=b?zN(e[5],"__lodash_placeholder__"):m[6];(c=m[7])&&(e[7]=c);h&128&&(e[8]=null==e[8]?m[8]:boa(e[8],m[8]));null==e[9]&&(e[9]=m[9]);e[0]=m[0];e[1]=n;return e};var m9={},coa=l9,n9=Math.max;m9=function(e,m,c,h,n,b,d,k){var a=m&2;if(!a&&"function"!=typeof e)throw new TypeError("Expected a function");
var f=h?h.length:0;f||(m&=-97,h=n=void 0);d=void 0===d?d:n9(U8(d),0);k=void 0===k?k:U8(k);f-=n?n.length:0;if(m&64){var l=h,r=n;h=n=void 0}var v=a?void 0:Z8(e);b=[e,m,c,h,n,l,r,b,d,k];v&&coa(b,v);e=b[0];m=b[1];c=b[2];h=b[3];n=b[4];k=b[9]=void 0===b[9]?a?0:e.length:n9(b[9]-f,0);!k&&m&24&&(m&=-25);c=m&&1!=m?8==m||16==m?Zna(e,m,k):32!=m&&33!=m||n.length?k9.apply(void 0,b):aoa(e,m,c,h):zna(e,m,c);return h9((v?c9:f9)(c,b),e,m)};var doa={},eoa=m9,foa=doa=function(e,m,c){m=c?void 0:m;m=e&&null==m?e.length:
m;return eoa(e,128,void 0,void 0,void 0,void 0,m)},XV={};Object.defineProperty(XV,"__esModule",{value:!0});XV.default=function(e){var m=e.types,c=function(n){return function(b){var d=n[b.type];if(d)return d(b);throw Error(b.type+" could not be transformed");}},h=function(n,b){var d=b.opts;b=d.useNew;var k=void 0===b?!1:b;b=d.module;var a=d.function;d=d.useVariables;var f=void 0===d?!1:d,l=d=void 0;!0===f?d=/^[A-Z]/:(0,goa.default)(f)&&(d=new RegExp(f));var r=k?m.newExpression:m.callExpression;l=function(v){return function(y){return r(v,
[y])}};b?(k=n.scope.generateUidIdentifier(k?"JSXNode":"jsx"),l=l(k),b=m.importDeclaration([m.importDefaultSpecifier(k)],m.stringLiteral(b)),n.findParent(function(v){return v.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,o9.default)(m.identifier,1)).reduce((0,o9.default)(m.memberExpression,2)),l=l(n)):l=hoa.default;return{variablesRegex:d,jsxObjectTransformer:l}};return{inherits:Yla,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",h(n,b));var d=b.get("jsxConfig"),
k=d.variablesRegex,a=d.jsxObjectTransformer,f=function(J){return m.stringLiteral(J.name)},l=function(J){return m.stringLiteral(J.namespace.name+":"+J.name.name)},r=c({JSXIdentifier:function(J){return m.identifier(J.name)},JSXMemberExpression:function(J){return m.memberExpression(r(J.object),r(J.property))}}),v=c({JSXIdentifier:k?function(J){return k.test(J.name)?m.identifier(J.name):f(J)}:f,JSXNamespacedName:l,JSXMemberExpression:r});d=function(J){return J.expression};var y=c({JSXIdentifier:f,JSXNamespacedName:l,
JSXMemberExpression:r}),A=c({StringLiteral:function(J){return J},JSXExpressionContainer:d}),E=function(J){var O=[],L=[];J.forEach(function(Y){switch(Y.type){case "JSXAttribute":O||(O=[]);var S=y(Y.name);S=ioa.default.keyword.isIdentifierNameES6(S.value)?m.identifier(S.value):S;O.push(m.objectProperty(S,A(Y.value)));break;case "JSXSpreadAttribute":O&&(L.push(m.objectExpression(O)),O=null);L.push(Y.argument);break;default:throw Error(Y.type+" cannot be used as a JSX attribute");}});O&&0<O.length&&L.push(m.objectExpression(O));
return 0===L.length?m.objectExpression([]):1===L.length?L[0]:m.callExpression(b.addHelper("extends"),L)};l=function(J){return a(m.objectExpression([m.objectProperty(m.identifier(joa),v(J.openingElement.name)),m.objectProperty(m.identifier(koa),E(J.openingElement.attributes)),m.objectProperty(m.identifier(loa),J.closingElement?H(J.children):m.nullLiteral())]))};var F=c({JSXText:function(J){if(b.opts.noTrim)return m.stringLiteral(J.value);J=J.value.replace(/\n\s*/g,"");return""===J?null:m.stringLiteral(J)},
JSXElement:l,JSXExpressionContainer:d}),H=function(J){return m.arrayExpression(J.map(F).filter(Boolean).reduce(function(O,L){var Y=0<O.length?O[O.length-1]:null;return"StringLiteral"===L.type&&Y&&"StringLiteral"===Y.type?[].concat(kD(O.slice(0,-1)),[m.stringLiteral(Y.value+L.value)]):[].concat(kD(O),[L])},[]))};n.replaceWith(l(n.node))}}}};var goa=JA(lma),hoa=JA(SV),o9=JA(foa),ioa=JA(CH),joa="elementName",koa="attributes",loa="children",PH={};Object.defineProperty(PH,"__esModule",{value:!0});PH.declare=
function(e){return function(m,c,h){m.assertVersion||(m=Object.assign(Tw(m),{assertVersion:function(n){var b=m.version;if("number"===typeof n){if(!Number.isInteger(n))throw Error("Expected string or integer value.");n="^"+n+".0.0-0"}if("string"!==typeof n)throw Error("Expected string or integer value.");var d=Error.stackTraceLimit;"number"===typeof d&&25>d&&(Error.stackTraceLimit=25);var k="7."===b.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+b+"\". You'll need to update your @babel/core version."):
Error('Requires Babel "'+n+'", but was loaded with "'+b+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');"number"===typeof d&&(Error.stackTraceLimit=d);throw Object.assign(k,{code:"BABEL_VERSION_UNSUPPORTED",version:b,range:n});}}));return e(m,c||{},h)}};
var OB={};Object.defineProperty(OB,"__esModule",{value:!0});OB.default=void 0;var moa=(0,PH.declare)(function(e){e.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(m,c){c.plugins.push("optionalCatchBinding")}}});OB.default=moa;var CN={};Object.defineProperty(CN,"__esModule",{value:!0});CN.default=void 0;var noa=OB&&OB.__esModule?OB:{default:OB},ooa=(0,PH.declare)(function(e){e.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:noa.default,
visitor:{CatchClause:function(m){if(!m.node.param){var c=m.scope.generateUidIdentifier("unused");m.get("param").replaceWith(c)}}}}});CN.default=ooa;var DN={};Object.defineProperty(DN,"__esModule",{value:!0});DN.default=void 0;var poa=(0,PH.declare)(function(e){e.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(m,c){c.plugins.push("importMeta")}}});DN.default=poa;var Wj=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");Wj.ensureJSXPlugin=function(){Wj.transformJSX&&
("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",Wj.transformJSX.default))};Wj.ensureOptionalCatchBinding=function(){Wj.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",Wj.catchBinding.default))};Wj.ensureImportMeta=function(){Wj.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",Wj.importMeta.default))};Wj.stringifyFunctionWithoutToplevelRecorder=Up;Wj.es5Transpilation=Rq;Wj.capturing=NH;Wj.capturing=NH;Wj.capturing=NH;Wj.parseFunction=Qm;Wj.stringify=qm;Wj.ReplaceVisitor=Jt;Wj.transformJSX=XV;Wj.catchBinding=CN;Wj.importMeta=DN;Wj.stringifyFunctionWithoutToplevelRecorder=Up;Wj.stringifyFunctionWithoutToplevelRecorder=Up;Wj.es5Transpilation=Rq;Wj.es5Transpilation=Rq;var qoa=Object.freeze({__proto__:null,
capturing:NH,stringifyFunctionWithoutToplevelRecorder:Up,es5Transpilation:Rq}),Cg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");Cg.processInlineCodeTransformOptions=function(e,m){if(!e.comments)return m;e=e.comments.find(function(h){return h.text.startsWith("lively.vm ")});if(!e)return m;try{var c=eval("inlineOptions = {"+e.text.slice(10)+"};");return Object.assign(m,c)}catch(h){return m}};Cg.evalCodeTransform=ft;Cg.evalCodeTransformOfSystemRegisterSetters=Vu;Cg.copyProperties=
function(e,m,c){c=void 0===c?[]:c;Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(h){return-1===c.indexOf(h)&&Object.defineProperty(m,h,Object.getOwnPropertyDescriptor(e,h))})};Cg.arr=Lf;Cg.Path=ci;Cg.parse=ce;Cg.stringify=qm;Cg.transform=MB;Cg.query=Kt;Cg.nodes=wx;Cg.capturing=NH;Cg.es5Transpilation=Rq;Cg.getGlobal=vm;var EN=Cg.nodes;Cg.id=EN.id;Cg.literal=EN.literal;Cg.member=EN.member;Cg.objectLiteral=EN.objectLiteral;Cg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
Cg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Cg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Cg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cg.evalCodeTransform=ft;Cg.evalCodeTransform=ft;Cg.evalCodeTransformOfSystemRegisterSetters=Vu;Cg.evalCodeTransformOfSystemRegisterSetters=Vu;var Xg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
Xg._normalizeEvalOptions=function(e){e||(e={});e=Object.assign({targetModule:null,sourceURL:e.targetModule,runtime:null,context:Xg.getGlobal(),varRecorderName:Xg.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},e);if(e.targetModule){var m=e.runtime&&e.runtime.modules&&e.runtime.modules[e.targetModule];m&&(e=Object.assign(e,m))}e.wrapInStartEndCall&&(e.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:e.varRecorderName},property:{type:"Literal",value:Xg.startEvalFunctionName},computed:!0},e.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:e.varRecorderName},property:{type:"Literal",value:Xg.endEvalFunctionName},computed:!0});return e};Xg.runEval=fo;Xg.finishEval=function(e,m,c,h,n,b,d){h.wrapInStartEndCall&&(delete n[Xg.startEvalFunctionName],delete n[Xg.endEvalFunctionName]);e?(c.isError=!0,c.value=e):c.value=m;c.value instanceof Promise&&(c.isPromise=
!0);if(h.sync){if(c.processSync(h),"function"===typeof h.onEndEval)h.onEndEval(e,m)}else c.process(h).then(function(){"function"===typeof d&&d(null,c);"function"===typeof h.onEndEval&&h.onEndEval(e,m);return c},function(k){"function"===typeof d&&d(k,void 0);"function"===typeof h.onEndEval&&h.onEndEval(k,void 0);return c}).then(b.resolve,b.reject)};Xg.syncEval=KA;Xg.tryToWaitForPromise=function(e,m){console.assert(e.isPromise,"no promise in tryToWaitForPromise???");var c={},h=new Promise(function(n){return setTimeout(n,
m,c)});return Promise.race([h,e.value]).then(function(n){return Object.assign(e,n!==c?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(e,{promiseStatus:"rejected",promisedValue:n})})};Xg.arr=Lf;Xg.obj=dg;Xg.string=Ih;Xg.Path=ci;Xg.promise=Hg;Xg.Closure=Sj;Xg.evalCodeTransform=ft;Xg.printEvalResult=Tr;Xg.getGlobal=vm;Xg.defaultTopLevelVarRecorderName="__lvVarRecorder";Xg.startEvalFunctionName="lively.vm-on-eval-start";Xg.endEvalFunctionName=
"lively.vm-on-eval-end";Xg._eval=Xg.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var QH=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};QH.prototype.addWarning=function(e){this.warnings.push(e);return e};QH.prototype.printed=function(e){e=void 0===e?{}:e;this.value=Xg.printEvalResult(this,
e)};QH.prototype.processSync=function(e){if(e.inspect||e.asString)this.value=this.print(this.value,e);return this};QH.prototype.process=function(e){var m=this;if(m.isPromise&&e.waitForPromise)return Xg.tryToWaitForPromise(m,e.promiseTimeout).then(function(){(e.inspect||e.asString)&&m.printed(e);return m});(e.inspect||e.asString)&&m.printed(e);return Promise.resolve(m)};Xg.EvalResult=QH;var ME=Xg.defaultTopLevelVarRecorderName;Xg.defaultTopLevelVarRecorderName=ME;Xg.defaultTopLevelVarRecorderName=
ME;Xg.getGlobal=vm;Xg.getGlobal=vm;Xg.runEval=fo;Xg.runEval=fo;Xg.syncEval=KA;Xg.syncEval=KA;var roa=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:ME,getGlobal:vm,runEval:fo,syncEval:KA}),Ag=lively.FreezerRuntime.recorderFor("lively.notifications/index.js");Ag.getEnv=function(e){if(void 0===e){if("undefined"===typeof System)return void 0!==Ag.env?Ag.env:Ag.env||(Ag.env={emitter:Ag.events.makeEmitter({},{maxListenerLimit:1E4}),notifications:[]});e=System}var m=e.get("@lively-env");m||
e.set("@lively-env",e.newModule({options:{}}));m=m.options;if(!m)throw Error("@lively-env registered read-only");m.emitter||Object.assign(m,{emitter:e["__lively.notifications_emitter"]||(e["__lively.notifications_emitter"]=Ag.events.makeEmitter({},{maxListenerLimit:1E4})),notifications:e["__lively.notifications_notifications"]||(e["__lively.notifications_notifications"]=[])});return{emitter:m.emitter,notifications:m.notifications}};Ag.subscribe=gt;Ag.subscribeOnce=Wu;Ag.emit=Kk;Ag.unsubscribe=kp;
Ag.unsubscribeAll=Xu;Ag.record=function(e,m){e.push(m);e.limit&&e.splice(0,e.length-e.limit)};Ag.startRecording=go;Ag.stopRecording=Yu;Ag.clearRecord=lD;Ag.getRecord=Um;Ag.log=function(e){var m=e.type+" ".repeat(Math.max(0,32-e.type.length));console.log(m+" "+Ag.obj.inspect(e,{maxDepth:2}))};Ag.startLogging=Zu;Ag.stopLogging=Vp;Ag.events=vz;Ag.obj=dg;Ag.env=null;Ag.subscribe=gt;Ag.subscribe=gt;Ag.subscribeOnce=Wu;Ag.subscribeOnce=Wu;Ag.emit=Kk;Ag.emit=Kk;Ag.unsubscribe=kp;Ag.unsubscribe=kp;Ag.unsubscribeAll=
Xu;Ag.unsubscribeAll=Xu;Ag.startRecording=go;Ag.startRecording=go;Ag.stopRecording=Yu;Ag.stopRecording=Yu;Ag.clearRecord=lD;Ag.clearRecord=lD;Ag.getRecord=Um;Ag.getRecord=Um;Ag.startLogging=Zu;Ag.startLogging=Zu;Ag.stopLogging=Vp;Ag.stopLogging=Vp;var ni=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");ni.ensureImportsAreImported=function(e,m,c){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(h=ni.parse(m),n=h.body,b=n.filter(function(k){return"ImportDeclaration"===
k.type}),d.yield(Promise.all(b.map(function(k){return e.normalize(k.source.value,c).then(function(a){k.source.value=a;return e.get(a)||e.import(a)})})).catch(function(k){console.error("Error ensuring imports: "+k.message);throw k;}),2)):d.return(ni.stringify(h))})};ni.hasUnimportedImports=function(e,m,c){m=ni.parse(m).body.filter(function(h){return"ImportDeclaration"===h.type});return 0<ni.arr.uniq(m.map(function(h){return h.source.value})).filter(Boolean).filter(function(h){return!e.get(e.decanonicalize(h,
c))}).length};ni.babelTranspilerForAsyncAwaitCode=function(e,m,c,h){return function(n,b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:c,code:!0,ast:!1},b);n=m.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};ni.babelPluginTranspilerForAsyncAwaitCode=function(e,m,c,h){return function(n,b){var d=e.babelOptions||{},k=[];k.push(m.presetES2015);d.stage3&&k.push({plugins:m.pluginsStage3});d.stage2&&
k.push({plugins:m.pluginsStage2});d.stage1&&k.push({plugins:m.pluginsStage1});b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:c,babelrc:!1,presets:k,moduleIds:!1,code:!0,ast:!1},b);n=m.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};ni.getEs6Transpiler=function(e,m,c){if(m.transpiler)return m.transpiler;if(!m.es6Transpile)return null;if("babel"===e.transpiler){var h=e.global[e.transpiler]||
e.get(e.decanonicalize(e.transpiler));return h?ni.babelTranspilerForAsyncAwaitCode(e,h,m.targetModule,c):e.import(e.transpiler).then(function(d){return ni.babelTranspilerForAsyncAwaitCode(e,d,m.targetModule,c)})}if("plugin-babel"===e.transpiler){h=e.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var n=e.get(h);return n?ni.babelPluginTranspilerForAsyncAwaitCode(e,n,m.targetModule,c):e.import(h).then(function(d){return ni.babelPluginTranspilerForAsyncAwaitCode(e,
d,m.targetModule,c)})}if("lively.transpiler"===e.transpiler){var b=new (e.get(e.decanonicalize("lively.transpiler")).default)(e,m.targetModule,c);return function(d,k){return b.transpileDoit(d,k)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};ni.runEval=$u;ni.evalEnd=function(e,m,c,h){e.get("@lively-env").evaluationEnd(c.targetModule);e.debug&&console.log("[lively.module] runEval in module "+c.targetModule+" done");ni.emit("lively.vm/doitresult",{code:m,result:h,
waitForPromise:c.waitForPromise,targetModule:c.targetModule},Date.now(),e);return h};ni.parse=ce;ni.nodes=wx;ni.stringify=qm;ni.emit=Kk;var FN=ni.nodes;ni.funcCall=FN.funcCall;ni.member=FN.member;ni.id=FN.id;ni.literal=FN.literal;ni.arr=Lf;ni.vmRunEval=fo;ni.runEval=$u;ni.runEval=$u;var soa=Object.freeze({__proto__:null,runEval:$u}),fk=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");fk.obj=dg;var NE=function(){};NE.prototype.runEval=function(e,m){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("runEval(source, options) not yet implemented for "+
c.constructor.name))})};NE.prototype.keysOfObject=function(e,m){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+c.constructor.name))})};fk.EvalStrategy=NE;var PB=function(){return fk.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(PB,fk.EvalStrategy);PB.prototype.runEval=function(e,m){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(e)})}catch(h){return{isError:!0,
value:h}}}))})};PB.prototype.keysOfObject=function(e,m){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return c.runEval(b,m)},e),2);h=n.yieldResult;return n.return({completions:h.completions,prefix:h.startLetters})})};fk.SimpleEvalStrategy=PB;var Az=function(){return fk.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Az,fk.EvalStrategy);Az.prototype.normalizeOptions=function(e){if(!e.targetModule)throw Error("runEval called but options.targetModule not specified!");
return Object.assign({sourceURL:e.targetModule+"_doit_"+Date.now()},e)};Az.prototype.runEval=function(e,m){var c=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){m=c.normalizeOptions(m);h=m.System||lively.modules.System;n={};h.config({meta:(n[m.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(e,m))})};Az.prototype.keysOfObject=function(e,m){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,
m)},e),2);c=h.yieldResult;return h.return({completions:c.completions,prefix:c.startLetters})})};fk.LivelyVmEvalStrategy=Az;var Bz=function(){return fk.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Bz,fk.LivelyVmEvalStrategy);Bz.prototype.sourceForRemote=function(e,m,c){var h=fk.obj.isString(c.context)?c.context:!1;c=fk.obj.dissoc(c,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(m)+",\n      options = "+JSON.stringify(c)+
';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+h+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===e?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};Bz.prototype.runEval=function(e,m){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(c.remoteEval(c.sourceForRemote("eval",e,m),m))})};Bz.prototype.keysOfObject=function(e,m){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(c.remoteEval(c.sourceForRemote("keysOfObject",
e,m),m))})};Bz.prototype.remoteEval=function(e,m){var c=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(c.basicRemoteEval(e,m),4);if(2!=b.nextAddress)return h=b.yieldResult,b.return("string"===typeof h?JSON.parse(h):h);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(h||n)})})};Bz.prototype.basicRemoteEval=function(e,m){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){throw Error("Not yet implemented");
})};fk.RemoteEvalStrategy=Bz;var Lv=function(e){var m=fk.RemoteEvalStrategy.call(this)||this;m.url=e||m.constructor.defaultURL;return m};$jscomp.inherits(Lv,fk.RemoteEvalStrategy);Lv.prototype.normalizeOptions=function(e){e=fk.RemoteEvalStrategy.prototype.normalizeOptions.call(this,e);return Object.assign({serverEvalURL:this.url},e,{context:null})};Lv.prototype.basicRemoteEval=function(e,m){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(m=c.normalizeOptions(m),
h="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(c[h]({method:"POST",body:e},m.serverEvalURL),2)):n.return(n.yieldResult)})};Lv.prototype.basicRemoteEval_web=function(e,m){var c,h,n,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:c=$jscomp.makeIterator(m.match(/[^:]+:\/\/[^\/]+/)||[m]);h=c.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==h)e.headers=Object.assign({},e.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":m}),m=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(m,e),4);case 4:d=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw k=a.enterCatchBlock(),Error("Cannot reach server at "+m+": "+k.message);case 3:if(!d.ok)throw Error("Server at "+m+": "+d.statusText);return a.return(d.text())}})};Lv.prototype.basicRemoteEval_node=function(e,m){var c,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){c=System._nodeRequire("url").parse;
h=System._nodeRequire(m.startsWith("https:")?"https":"http");n=Object.assign({method:e.method||"GET"},c(m));return b.return(new Promise(function(d,k){var a=h.request(n,function(f){f.setEncoding("utf8");var l="";f.on("data",function(r){return l+=r});f.on("end",function(){return d(l)});f.on("error",function(r){return k(r)})});a.on("error",function(f){return k(f)});a.end(e.body)}))})};$jscomp.global.Object.defineProperties(Lv,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
fk.HttpEvalStrategy=Lv;var OE=function(e,m){var c=fk.RemoteEvalStrategy.call(this)||this;c.l2lClient=e;c.targetId=m;return c};$jscomp.inherits(OE,fk.RemoteEvalStrategy);OE.prototype.basicRemoteEval=function(e,m){var c=this,h,n,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h=c,n=h.l2lClient,b=h.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:e},{ackTimeout:m.ackTimeout||3500}),2);d=a.yieldResult;(k=d.data)&&k.value&&k.value.isEvalResult&&(k=
k.value);return a.return(k)})};fk.L2LEvalStrategy=OE;fk.EvalStrategy=NE;fk.EvalStrategy=NE;fk.SimpleEvalStrategy=PB;fk.SimpleEvalStrategy=PB;fk.LivelyVmEvalStrategy=Az;fk.LivelyVmEvalStrategy=Az;fk.HttpEvalStrategy=Lv;fk.HttpEvalStrategy=Lv;fk.L2LEvalStrategy=OE;fk.L2LEvalStrategy=OE;var RH=Object.freeze({__proto__:null,RemoteEvalStrategy:Bz,EvalStrategy:NE,SimpleEvalStrategy:PB,LivelyVmEvalStrategy:Az,HttpEvalStrategy:Lv,L2LEvalStrategy:OE});Ca("bA",RH);var el=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
el.runEval=Wp;el.syncEval=ht;el.completions=MH;el.completions=MH;el.completions=MH;el.globalEval=roa;el.esmEval=soa;el.defaultTopLevelVarRecorderName=ME;el.defaultTopLevelVarRecorderName=ME;el.defaultClassToFunctionConverterName="initializeES6ClassForLively";el.defaultClassToFunctionConverterName="initializeES6ClassForLively";el.evalCodeTransform=ft;el.evalCodeTransform=ft;el.evalCodeTransformOfSystemRegisterSetters=Vu;el.evalCodeTransformOfSystemRegisterSetters=Vu;el.runEval=Wp;el.runEval=Wp;el.syncEval=
ht;el.syncEval=ht;el.evalStrategies=RH;el.evalStrategies=RH;el.evalStrategies=RH;var p9=Object.freeze({__proto__:null,completions:MH,defaultTopLevelVarRecorderName:ME,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:ft,evalCodeTransformOfSystemRegisterSetters:Vu,runEval:Wp,syncEval:ht,evalStrategies:RH});Ca("bz",p9);var Vi=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Vi.string=Ih;Vi.arr=Lf;Vi.parse=ce;Vi.query=Kt;Vi.runEval=Wp;Vi.objMetaSym=
Symbol.for("lively-object-meta");Vi.moduleSym=Symbol.for("lively-module-meta");Vi.descriptorCache=new Map;var PE=function(e,m){e&&m?this.update(m,e):this.reset()};PE.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};PE.prototype.update=function(e,m){this._moduleSource===e&&m&&this._sourceLocation&&m.start===this._sourceLocation.start&&m.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=e,this._sourceLocation=m)};PE.prototype.changeSource=function(e){var m=this.moduleSource,c=this.sourceLocation,h=c.start;c=c.end;m=m.slice(0,h)+e+m.slice(c);this.update(m,{start:h,end:h+e.length});this._source=e;return this};PE.prototype.toString=function(){var e=Vi.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+e+")"};$jscomp.global.Object.defineProperties(PE.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=Vi.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
Vi.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=Vi.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var e=Vi.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===e.type&&(e=e.expression);return this._ast=e}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var e=this.sourceLocation;
return this._source=this.moduleSource.slice(e.start,e.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var e=this.ast,m=Vi.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,c=Vi.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=Vi.arr.withoutAll(m,c);e=Vi.arr.withoutAll(Vi.query.findGlobalVarRefs(e).map(function(n){return n.name}),
m);return this._declaredAndUndeclaredNames={declaredNames:m,declaredImports:c,localDeclaredNames:h,undeclaredNames:e}}}});Vi.SourceDescriptor=PE;var jq=function(e,m){this.obj=e;this.System=m;this.reset()};jq.forObjectWithModuleSource=function(e,m,c){e=this.for(e,c);e.ensureSourceDescriptor(e.sourceLocation,m);return e};jq.for=function(e,m){var c=Vi.descriptorCache.get(e);c||(c=new this(e,m),Vi.descriptorCache.set(e,c));return c};jq.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};jq.prototype.resetIfChanged=function(){var e=this.meta.moduleSource;this._moduleSource&&e&&this._moduleSource!==e&&this.reset()};jq.prototype.changeSourceSync=function(e){var m=this.System;this._basicChangeSource(e);this.module.changeSource(this.moduleSource,{doSave:!0});e=Vi.runEval(e,{sync:!0,targetModule:this.module.id,System:m});if(e.isError)throw e.value;return this};jq.prototype.changeSource=
function(e){var m=this,c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(c=m,h=c.module,n.yield(h.changeSourceAction(function(b){if(b!==m.moduleSource)throw Error("source of module "+h.id+" and source of "+m+" don't match");m._basicChangeSource(e);return m.moduleSource}),2)):n.return(m)})};jq.prototype._modifiedSource=function(e){var m=this.moduleSource,c=this.sourceLocation,h=c.start;c=c.end;return{moduleSource:m.slice(0,h)+e+m.slice(c),sourceLocation:{start:h,
end:h+e.length}}};jq.prototype._renamedSource=function(e){var m=this.ast,c=m.type,h=m.id;m=h.start;h=h.end;if("ClassDeclaration"!==c)throw Error("Don't know how to rename "+c);return this._modifiedSource(this.source.slice(0,m)+e+this.source.slice(h))};jq.prototype._basicChangeSource=function(e){var m=this.meta,c=this._modifiedSource(e),h=c.moduleSource;c=c.sourceLocation;this.reset();this.meta=Object.assign({},m,{moduleSource:h},c);this._sourceLocation=c;this._moduleSource=h;this._source=e;return this};
jq.prototype.toString=function(){var e=Vi.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var m=this.module.shortName()}catch(c){m="NO MODULE!"}return this.constructor.name+"("+e+" in "+m+")"};$jscomp.global.Object.defineProperties(jq.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(e){this._System=e}},module:{configurable:!0,enumerable:!0,get:function(){var e=this.obj,m=this.System;if(!e[Vi.moduleSym])throw Error("runtime object of source descriptor has no module data");
var c=e[Vi.moduleSym];e=c.package.name;c=c.pathInPackage;e=c.includes("://")?c:e+"/"+c;m=this.System._scripting.module(m,e);m._frozenModule||m._source||!this.moduleSource||m.setSource(this.moduleSource);return m}},meta:{configurable:!0,enumerable:!0,get:function(){var e=this.obj;if(!e[Vi.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return e[Vi.objMetaSym]},set:function(e){this.obj[Vi.objMetaSym]=e;e.hasOwnProperty("start")&&e.hasOwnProperty("end")&&(this._sourceLocation=
{start:e.start,end:e.end});e.hasOwnProperty("moduleSource")&&(this._moduleSource=e.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var e=this.meta,m=e.start;e=e.end;if(void 0===m||void 0===e)throw Error("lively meta data has no start/end");return this._sourceLocation={start:m,end:e}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var e=this.meta.moduleSource;if(void 0===e)throw Error("lively meta data has no moduleSource");return this._moduleSource=e}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Vi.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Vi.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=Vi.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var e=this.ast,m=Vi.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,c=Vi.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=Vi.arr.withoutAll(m,c);
e=Vi.arr.withoutAll(Vi.query.findGlobalVarRefs(e).map(function(n){return n.name}),m);return this._declaredAndUndeclaredNames={declaredNames:m,declaredImports:c,localDeclaredNames:h,undeclaredNames:e}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var e=this.sourceLocation;return this._source=this.moduleSource.slice(e.start,e.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var e=Vi.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===e.type&&(e=e.expression);return this._ast=e}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var e=this.ast.id;return this.source.slice(e.start,e.end)}return"unknown"}}});Ca("bJ",jq);Vi.RuntimeSourceDescriptor=jq;var jf=lively.FreezerRuntime.recorderFor("lively.classes/util.js");jf.superclasses=it;jf.getClassHierarchy=
Ur;jf.withSuperclasses=Uw;jf.inheritsFrom=By;jf.changeClass=av;jf.isClass=Cy;jf.isOverridden=function(e,m){for(;e!=Object;)if(e=e[Symbol.for("lively-instance-superclass")],e.prototype.hasOwnProperty(m))return!0;return!1};jf.lexicalClassMembers=bv;jf.runtimeClassMembers=Dy;jf.runtimeClassMembersInProtoChain=function(e){return jf.arr.uniq(jf.arr.flatmap(jf.arr.without(jf.withSuperclasses(e),Object),function(m){return jf.runtimeClassMembers(m)}))};jf.runtimeNonStaticMembers=function(e){var m=e.prototype,
c=jf.obj.getOwnPropertyDescriptors(m);return jf.arr.withoutAll(Object.keys(c),["constructor"]).map(function(h){var n=c[h],b="function"===typeof n.value?"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:h,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:m}})};jf.runtimeNonstaticClassMembersInProtoChain=function(e){return jf.arr.uniq(jf.arr.flatmap(jf.arr.without(jf.withSuperclasses(e),Object),function(m){return jf.runtimeNonStaticMembers(m)}))};jf.runtimeStaticClassMembers=
Ey;jf.runtimeStaticClassMembersInProtoChain=Vw;jf.arr=Lf;jf.obj=dg;jf.Path=ci;jf.RuntimeSourceDescriptor=jq;jf.superclasses=it;jf.superclasses=it;var GN=Symbol.for("lively-instance-initialize");jf.initializeSymbol=GN;jf.initializeSymbol=GN;jf.initializeSymbol=GN;var YV=Symbol.for("lively-instance-restorer");jf.instanceRestorerSymbol=YV;jf.instanceRestorerSymbol=YV;jf.instanceRestorerSymbol=YV;var HN=Symbol.for("lively-instance-superclass");jf.superclassSymbol=HN;jf.superclassSymbol=HN;jf.superclassSymbol=
HN;var IN=Symbol.for("lively-module-meta");jf.moduleMetaSymbol=IN;jf.moduleMetaSymbol=IN;jf.moduleMetaSymbol=IN;var JN=Symbol.for("lively-object-meta");jf.objMetaSymbol=JN;jf.objMetaSymbol=JN;jf.objMetaSymbol=JN;var KN=Symbol.for("lively-klass-changes-subscriber");jf.moduleSubscribeToToplevelChangesSym=KN;jf.moduleSubscribeToToplevelChangesSym=KN;jf.moduleSubscribeToToplevelChangesSym=KN;jf.getClassHierarchy=Ur;jf.getClassHierarchy=Ur;jf.withSuperclasses=Uw;jf.withSuperclasses=Uw;jf.inheritsFrom=
By;jf.inheritsFrom=By;jf.changeClass=av;jf.changeClass=av;jf.isClass=Cy;jf.isClass=Cy;jf.lexicalClassMembers=bv;jf.lexicalClassMembers=bv;jf.runtimeClassMembers=Dy;jf.runtimeClassMembers=Dy;jf.runtimeStaticClassMembers=Ey;jf.runtimeStaticClassMembers=Ey;jf.runtimeStaticClassMembersInProtoChain=Vw;jf.runtimeStaticClassMembersInProtoChain=Vw;var ZV=Ca("bK",function(){function e(d){return d.replace(b,function(k,a){return a[a.length-1].toUpperCase()})}var m="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
c={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},h={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(d){return c[d]||"ASCII_"+d.charCodeAt(0)},b=/([\s-]+.)/g;return function(d){d=e(d);return 0<=m.indexOf(d)?d:0===d.length?"_null_":d.replace(/^\d/,function(k){return h[k]}).replace(/[^\w\$_]/g,n)}}());jf.toJsIdentifier=ZV;jf.toJsIdentifier=ZV;jf.toJsIdentifier=ZV;var aj=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
aj.hasManagedProperties=function(e){return e.hasOwnProperty(aj.defaultPropertiesKey)};aj.prepareClassForManagedPropertiesAfterCreation=mD;aj.prepareClassForProperties=function(e,m,c){aj.ensurePropertyInitializer(e);var h=m.valueStoreProperty,n=m.defaultGetter,b=m.defaultSetter,d=e.prototype;Object.keys(c).forEach(function(k){var a=c[k],f=d.hasOwnProperty(k)&&d.__lookupGetter__(k);if(!f||f._wasGenerated)f=a.get||"function"===typeof n&&function(){return n.call(this,k)}||function(){return this[h][k]},
f._wasGenerated=!0,d.__defineGetter__(k,f);f=d.hasOwnProperty(k)&&d.__lookupSetter__(k);if(!f||f._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(l){b.call(this,k,l)}||function(l){this[h][k]=l},a._wasGenerated=!0,d.__defineSetter__(k,a)})};aj.ensurePropertyInitializer=function(e){Object.defineProperty(e.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var m=this.constructor,c=m[aj.propertiesAndSettingsCacheSym];
if(c)if(c.classHierarchy!=aj.getClassHierarchy(m)){var h=aj.propertiesAndSettingsInHierarchyOf(m);c=h.properties;h=h.propertySettings;m[aj.propertiesAndSettingsCacheSym]={properties:c,propertySettings:h,order:aj.obj.sortKeysWithBeforeAndAfterConstraints(c),classHierarchy:aj.getClassHierarchy(m)};aj.prepareClassForProperties(m,h,c)}else return c;return m[aj.propertiesAndSettingsCacheSym]||aj.propertiesAndSettingsInHierarchyOf(m)}});Object.defineProperty(e.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(m){var c=this.propertiesAndPropertySettings();aj.prepareInstanceForProperties(this,c.propertySettings,c.properties,m,c.order);return this}})};aj.propertiesAndSettingsInHierarchyOf=function(e){for(var m=Object.assign({},aj.defaultPropertySettings),c={},h=aj.obj.valuesInPropertyHierarchy(e,"propertySettings"),n=aj.obj.valuesInPropertyHierarchy(e,"properties"),b=0;b<h.length;b++){var d=h[b];d&&"object"===typeof d&&Object.assign(m,d)}for(b=0;b<n.length;b++)if(h=
n[b],"object"!==typeof h)console.error("[initializeProperties] "+e+" encountered property declaration that is not a JS object: "+h);else for(var k in h)c.hasOwnProperty(k)?Object.assign(c[k],h[k]):c[k]=h[k];return{properties:c,propertySettings:m}};aj.prepareInstanceForProperties=function(e,m,c,h,n){var b=m.valueStoreProperty;n=n||aj.obj.sortKeysWithBeforeAndAfterConstraints(c);m=[];var d={};e.hasOwnProperty(b)||(e[b]={});for(var k=0;k<n.length;k++){var a=n[k],f=c[a],l=f.derived,r=!!f.foldable,v=f.hasOwnProperty("defaultValue")?
f.defaultValue:void 0;Array.isArray(v)&&(v=v.slice());l||r||(e[b][a]=v);var y=void 0;f.hasOwnProperty("initialize")?(y=d[a]={initialize:v},m.push(a)):l&&void 0!==v?(y=d[a]={derived:v},m.push(a)):r&&void 0!==v&&(y=d[a]={folded:v},m.push(a));h&&a in h&&(f.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+e+", skipping setting value"):(y||(y=d[a]={},m.push(a)),y.value=h[a]))}for(k=0;k<m.length;k++)h=m[k],n=d[h],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(c[h].initialize.call(e,
b?n.value:n.initialize),b&&(e[h]=n.value)):n.hasOwnProperty("derived")?e[h]=b?n.value:n.derived:n.hasOwnProperty("folded")?e[h]=b?n.value:n.folded:b&&(e[h]=n.value)};aj.obj=dg;aj.getClassHierarchy=Ur;aj.defaultPropertiesSettingKey="propertySettings";aj.defaultPropertiesKey="properties";aj.defaultInstanceInitializerMethod="initializeProperties";aj.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");aj.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
aj.prepareClassForManagedPropertiesAfterCreation=mD;aj.prepareClassForManagedPropertiesAfterCreation=mD;var Zf=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");Zf.adoptObject=lf;Zf.setSuperclass=nD;Zf.installValueDescriptor=function(e,m,c){c=Object.assign(c,Zf.defaultPropertyDescriptorForValue);c.value.displayName=c.key;if(c.needsDeclaringClass){var h=c.value.originalFunction||c.value;c.value=Object.assign(function(){return h.call.apply(h,[this,m].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:h,toString:function(){return h.toString()},displayName:c.key})}Object.defineProperty(e,c.key,c)};Zf.installGetterSetterDescriptor=function(e,m){m=Object.assign(m,Zf.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(e,m.key,m)};Zf.installMethods=function(e,m,c){c&&c.forEach(function(d){d.value?Zf.installValueDescriptor(e,e,d):Zf.installGetterSetterDescriptor(e,d)});m&&m.forEach(function(d){d.value?Zf.installValueDescriptor(e.prototype,e,d):Zf.installGetterSetterDescriptor(e.prototype,
d)});e.prototype[Zf.initializeSymbol]?Object.getOwnPropertySymbols(e.prototype).includes(Zf.initializeSymbol)&&e.prototype[Zf.initializeSymbol].isDefaultInitializer&&e[Zf.superclassSymbol].prototype[Zf.initializeSymbol]&&delete e.prototype[Zf.initializeSymbol]:(Object.defineProperty(e.prototype,Zf.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e.prototype[Zf.initializeSymbol].isDefaultInitializer=!0,e.prototype[Zf.initializeSymbol].displayName="lively-initialize");
m=m.map(function(d){return d.key}).concat(["constructor","arguments","caller"]);for(var h=Object.getOwnPropertyNames(e.prototype),n=0;n<h.length;n++){var b=h[n];m.includes(b)||delete e.prototype[b]}c=c.map(function(d){return d.key}).concat(["length","name","prototype","arguments","caller"]);m=Object.getOwnPropertyNames(e);for(h=0;h<m.length;h++)n=m[h],c.includes(n)||delete e[n]};Zf.ensureInitializeStub=function(e){e===Object||e.prototype[Zf.initializeSymbol]||(Object.defineProperty(e.prototype,Zf.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){e.apply(this,arguments)}}),e.prototype[Zf.initializeSymbol].displayName="lively-initialize-stub")};Zf.initializeClass=Zb;Zf.prepareClassForManagedPropertiesAfterCreation=mD;Zf.superclassSymbol=HN;Zf.moduleSubscribeToToplevelChangesSym=KN;Zf.moduleMetaSymbol=IN;Zf.objMetaSymbol=JN;Zf.initializeSymbol=GN;Zf.constructorArgMatcher=/\([^\\)]*\)/;Zf.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};Zf.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var LN="function"===typeof Object.setPrototypeOf?function(e,m){return Object.setPrototypeOf(e,m)}:function(e,m){return e.__proto__=m};Zf.setPrototypeOf=LN;Zf.setPrototypeOf=LN;Zf.setPrototypeOf=LN;Zf.adoptObject=lf;Zf.adoptObject=lf;Zf.setSuperclass=nD;Zf.setSuperclass=nD;Zf.initializeClass=Zb;Zf.initializeClass=Zb;Zf.initializeClass._get=function n(m,c,h){null===m&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,c);if(void 0===b)return m=
Object.getPrototypeOf(m),null===m?void 0:n(m,c,h);if("value"in b)return b.value;c=b.get;return void 0===c?void 0:c.call(h)};Zf.initializeClass._set=function d(c,h,n,b){var k=Object.getOwnPropertyDescriptor(c,h);void 0===k?(c=Object.getPrototypeOf(c),null!==c&&d(c,h,n,b)):"value"in k&&k.writable?k.value=n:(h=k.set,void 0!==h&&h.call(b,n));return n};var QE=Object.freeze({__proto__:null,setPrototypeOf:LN,adoptObject:lf,setSuperclass:nD,initializeClass:Zb}),Gd=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
Gd.parse=oD;Gd.Color=function(c){this._listeners={};this.subscribe(Gd.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Gd.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Gd.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(Gd.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Gd.Events.INT_UPDATED,this._INTUpdated);this.parse(c)};Gd.parse=oD;Gd.parse=oD;Gd.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};Gd.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Gd.absround=function(c){return.5+c<<0};Gd.hue2rgb=function(c,h,n){0>n&&(n+=1);1<n&&--n;return n<1/6?c+6*(h-c)*n:.5>n?h:n<2/3?c+(h-c)*(2/3-n)*6:c};Gd.p2v=function(c){return Gd.isPercent.test(c)?
Gd.absround(2.55*parseInt(c)):c};Gd.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Gd.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Gd.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;Gd.isPercent=/^\d+(\.\d+)*%$/;Gd.hexBit=/([0-9a-f])/gi;Gd.leadHex=/^#/;Gd.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;Gd.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Gd.Color.prototype._decimal=
0;Gd.Color.prototype._hex="#000000";Gd.Color.prototype._red=0;Gd.Color.prototype._green=0;Gd.Color.prototype._blue=0;Gd.Color.prototype._hue=0;Gd.Color.prototype._saturation=0;Gd.Color.prototype._lightness=0;Gd.Color.prototype._brightness=0;Gd.Color.prototype._alpha=1;Gd.Color.prototype.parse=function(c){if("undefined"==typeof c)return this;switch(!0){case isFinite(c):this.decimal(c);this.output=Gd.Color.INT;break;case c instanceof Gd.Color:this.copy(c);break;default:switch(typeof c){case "object":this.set(c);
break;case "string":switch(!0){case Gd.namedColors.hasOwnProperty(c):c=Gd.namedColors[c];c=c.replace(Gd.leadHex,"");this.decimal(parseInt(c,16));break;case Gd.isHex.test(c):c=c.replace(Gd.leadHex,"");3==c.length&&(c=c.replace(Gd.hexBit,"$1$1"));this.decimal(parseInt(c,16));break;case Gd.isRGB.test(c):c=c.match(Gd.matchRGB);this.red(Gd.p2v(c[1]));this.green(Gd.p2v(c[2]));this.blue(Gd.p2v(c[3]));this.alpha(parseFloat(c[5])||1);this.output=(Gd.isPercent.test(c[1])?2:1)+(c[5]?2:0);break;case Gd.isHSL.test(c):c=
c.match(Gd.matchHSL),this.hue(parseInt(c[1])),this.saturation(parseInt(c[2])),this.lightness(parseInt(c[3])),this.alpha(parseFloat(c[5])||1),this.output=c[5]?6:5}}}return this};Gd.Color.prototype.clone=function(){return new Gd.Color(this.decimal())};Gd.Color.prototype.copy=function(c){this.set(c.decimal());return this};Gd.Color.prototype.set=function(c,h){if(1==arguments.length)if("object"==typeof c)for(var n in c){if("function"==typeof this[n])this[n](c[n])}else isFinite(c)&&this.decimal(c);else if("function"==
typeof this[c])this[c](h);return this};Gd.Color.prototype.interpolate=function(c,h){c instanceof Gd.Color||(c=new Gd.Color(c));this._red=Gd.absround(+this._red+(c._red-this._red)*h);this._green=Gd.absround(+this._green+(c._green-this._green)*h);this._blue=Gd.absround(+this._blue+(c._blue-this._blue)*h);this._alpha=Gd.absround(+this._alpha+(c._alpha-this._alpha)*h);this.broadcast(Gd.Events.RGB_UPDATED);this.broadcast(Gd.Events.UPDATED);return this};Gd.Color.prototype._RGB2HSL=function(){var c=this._red/
255,h=this._green/255,n=this._blue/255,b=Math.max(c,h,n),d=Math.min(c,h,n),k=(b+d)/2;if(b==d)this._saturation=this._hue=0;else{var a=b-d;d=a/(.5>=k?b+d:2-b-d);this._hue=Gd.absround((b==c?(h-n)/a+(h<n?6:0):b==h?(n-c)/a+2:(c-h)/a+4)/6*360);this._saturation=Gd.absround(100*d)}this._lightness=Gd.absround(100*k);this._brightness=Gd.absround(100*b)};Gd.Color.prototype._HSL2RGB=function(){var c=this._hue/360,h=this._saturation/100,n=this._lightness/100;h=.5>n?n*(1+h):n+h-n*h;n=2*n-h;this._red=Gd.absround(255*
Gd.hue2rgb(n,h,c+1/3));this._green=Gd.absround(255*Gd.hue2rgb(n,h,c));this._blue=Gd.absround(255*Gd.hue2rgb(n,h,c-1/3))};Gd.Color.prototype._HSV2RGB=function(){var c=this._hue/360,h=this._saturation/100,n=this._brightness/100,b=0,d=0,k=0,a=Math.floor(6*c),f=6*c-a;c=n*(1-h);var l=n*(1-f*h);h=n*(1-(1-f)*h);switch(a%6){case 0:b=n;d=h;k=c;break;case 1:b=l;d=n;k=c;break;case 2:b=c;d=n;k=h;break;case 3:b=c;d=l;k=n;break;case 4:b=h;d=c;k=n;break;case 5:b=n,d=c,k=l}this._red=Gd.absround(255*b);this._green=
Gd.absround(255*d);this._blue=Gd.absround(255*k)};Gd.Color.prototype._INT2HEX=function(){var c=this._decimal.toString(16);c="000000".substr(0,6-c.length)+c;this._hex="#"+c.toUpperCase()};Gd.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Gd.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};Gd.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Gd.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Gd.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Gd.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};Gd.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};Gd.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Gd.Color.prototype._broadcastUpdate=function(){this.broadcast(Gd.Events.UPDATED)};
Gd.Color.prototype.decimal=function(c){return this._handle("_decimal",c,Gd.Events.INT_UPDATED)};Gd.Color.prototype.hex=function(c){return this._handle("_hex",c,Gd.Events.HEX_UPDATED)};Gd.Color.prototype.red=function(c){return this._handle("_red",c,Gd.Events.RGB_UPDATED)};Gd.Color.prototype.green=function(c){return this._handle("_green",c,Gd.Events.RGB_UPDATED)};Gd.Color.prototype.blue=function(c){return this._handle("_blue",c,Gd.Events.RGB_UPDATED)};Gd.Color.prototype.hue=function(c){return this._handle("_hue",
c,Gd.Events.HSL_UPDATED)};Gd.Color.prototype.saturation=function(c){return this._handle("_saturation",c,Gd.Events.HSL_UPDATED)};Gd.Color.prototype.lightness=function(c){return this._handle("_lightness",c,Gd.Events.HSL_UPDATED)};Gd.Color.prototype.brightness=function(c){return this._handle("_brightness",c,Gd.Events.HSV_UPDATED)};Gd.Color.prototype.alpha=function(c){return this._handle("_alpha",c)};Gd.Color.prototype._handle=function(c,h,n){"undefined"!=typeof this[c]&&"undefined"!=typeof h&&(h!=this[c]&&
(this[c]=h,n&&this.broadcast(n)),this.broadcast(Gd.Events.UPDATED));return this[c]};Gd.Color.prototype.getHex=function(){return this._hex};Gd.Color.prototype.getRGB=function(){return"rgb("+[Gd.absround(this._red),Gd.absround(this._green),Gd.absround(this._blue)].join(", ")+")"};Gd.Color.prototype.getPRGB=function(){return"rgb("+[Gd.absround(100*this._red/255)+"%",Gd.absround(100*this._green/255)+"%",Gd.absround(100*this._blue/255)+"%"].join(", ")+")"};Gd.Color.prototype.getRGBA=function(){return"rgba("+
[Gd.absround(this._red),Gd.absround(this._green),Gd.absround(this._blue),this._alpha].join(", ")+")"};Gd.Color.prototype.getPRGBA=function(){return"rgba("+[Gd.absround(100*this._red/255)+"%",Gd.absround(100*this._green/255)+"%",Gd.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};Gd.Color.prototype.getHSL=function(){return"hsl("+[Gd.absround(this._hue),Gd.absround(this._saturation)+"%",Gd.absround(this._lightness)+"%"].join(", ")+")"};Gd.Color.prototype.getHSLA=function(){return"hsla("+
[Gd.absround(this._hue),Gd.absround(this._saturation)+"%",Gd.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Gd.Color.prototype.format=function(c){var h={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in h)c=c.split("%"+n+"%").join(h[n]);return c};Gd.Color.prototype.output=0;Gd.Color.HEX=0;Gd.Color.RGB=1;Gd.Color.PRGB=2;Gd.Color.RGBA=3;Gd.Color.PRGBA=4;Gd.Color.HSL=5;Gd.Color.HSLA=
6;Gd.Color.INT=7;Gd.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};Gd.Color.prototype._listeners=null;Gd.Color.prototype._isSubscribed=function(c){return null!=this._listeners[c]};Gd.Color.prototype.subscribe=function(c,h){this._isSubscribed(c)||(this._listeners[c]=[]);
this._listeners[c].push(h)};Gd.Color.prototype.unsubscribe=function(c,h){if(this._isSubscribed(c))for(var n=this._listeners[c],b=0,d=n.length;b<d;b++)if(n[b]===h)return n.splice(b,1),this.unsubscribe(c,h)};Gd.Color.prototype.broadcast=function(c,h){if(this._isSubscribed(c)){c=this._listeners[c];for(var n=c.length,b=0;b<n;b++)c[b].apply(this,h)}};Gd.Color.prototype.tween=function(c,h){h instanceof Gd.Color||(h=new Gd.Color(h));var n=+new Date,b=this;this.broadcast("tweenStart");var d=setInterval(function(){var k=
Math.min(1,(+new Date-n)/c);b.interpolate(h,k);b.broadcast("tweenProgress");1==k&&(clearInterval(d),b.broadcast("tweenComplete"))},20);return d};Gd.Color.prototype.bind=function(c,h){var n=this;this.subscribe("updated",function(){c[h]=n.toString()})};Gd.Color.random=function(){return new Gd.Color(Gd.absround(16777215*Math.random()))};Gd.Color.bind=function(c,h){var n=new Gd.Color(c[h]);n.bind(c,h);return n};var Ki=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");Ki.parseUnit=
function(c,h){h||(h=[0,""]);c=String(c);var n=parseFloat(c,10);h[0]=n;h[1]=c.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return h};Ki.unit=function(c){return Ki.parseUnit(c)[1]};Ki.unitLess=function(c){return Ki.parseUnit(c)[0]};Ki.genericCssLengthParser=Fy;Ki.cssLengthToPixels=Gy;Ki.baseFontSize="16px";if(System.get("@system-env").browser)try{Ki.newBaseFontSize=Ki.genericCssLengthParser(Ki.baseFontSize)(window.getComputedStyle(document.body).fontSize),Ki.newBaseFontSize&&"NaN"!==Ki.newBaseFontSize.slice(0,
3)&&(Ki.baseFontSize=Ki.newBaseFontSize)}catch(c){}Ki.genericCssLengthParser=Fy;Ki.genericCssLengthParser=Fy;var $V=Ki.genericCssLengthParser(Ki.baseFontSize);Ki.parseCssLength=$V;Ki.parseCssLength=$V;Ki.parseCssLength=$V;Ki.cssLengthToPixels=Gy;Ki.cssLengthToPixels=Gy;var Vd=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");Vd.rect=Dl;Vd.pt=di;Vd.num=Em;Vd.string=Ih;Vd.grid=HE;Vd.cssLengthToPixels=Gy;var tg=function(c,h){this.x=c||0;this.y=h||0};tg.ensure=function(c){return c instanceof
Vd.Point?c:new Vd.Point(c.x,c.y)};tg.polar=function(c,h){return new Vd.Point(c*Math.cos(h),c*Math.sin(h))};tg.random=function(c){return new Vd.Point(Vd.num.randomSmallerInteger(c.x),Vd.num.randomSmallerInteger(c.y))};tg.fromLiteral=function(c){return Vd.pt(c.x,c.y)};tg.fromTuple=function(c){return Vd.pt(c[0],c[1])};tg.prototype.getX=function(){return this.x};tg.prototype.getY=function(){return this.y};tg.prototype.toFixed=function(c){return new Vd.Point(this.x.toFixed(c),this.y.toFixed(c))};tg.prototype.addPt=
function(c){return new Vd.Point(this.x+c.x,this.y+c.y)};tg.prototype.addXY=function(c,h){return new Vd.Point(this.x+c,this.y+h)};tg.prototype.midPt=function(c){return new Vd.Point((this.x+c.x)/2,(this.y+c.y)/2)};tg.prototype.subPt=function(c){return new Vd.Point(this.x-c.x,this.y-c.y)};tg.prototype.subXY=function(c,h){return new Vd.Point(this.x-c,this.y-h)};tg.prototype.scaleBy=function(c,h){return new Vd.Point(this.x*c,this.y*(h||c))};tg.prototype.scaleByPt=function(c){return new Vd.Point(this.x*
c.x,this.y*c.y)};tg.prototype.negated=function(){return new Vd.Point(-this.x,-this.y)};tg.prototype.inverted=function(){return new Vd.Point(1/this.x,1/this.y)};tg.prototype.invertedSafely=function(){return new Vd.Point(this.x&&1/this.x,this.y&&1/this.y)};tg.prototype.lessPt=function(c){return this.x<c.x&&this.y<c.y};tg.prototype.leqPt=function(c){return this.x<=c.x&&this.y<=c.y};tg.prototype.eqPt=function(c){return this.x==c.x&&this.y==c.y};tg.prototype.equals=function(c){return this.x==c.x&&this.y==
c.y};tg.prototype.withX=function(c){return Vd.pt(c,this.y)};tg.prototype.withY=function(c){return Vd.pt(this.x,c)};tg.prototype.copy=function(){return new Vd.Point(this.x,this.y)};tg.prototype.minPt=function(c,h){h||(h=new Vd.Point(0,0));h.x=Math.min(this.x,c.x);h.y=Math.min(this.y,c.y);return h};tg.prototype.maxPt=function(c,h){h||(h=new Vd.Point(0,0));h.x=Math.max(this.x,c.x);h.y=Math.max(this.y,c.y);return h};tg.prototype.random=function(){return Vd.Point.random(this)};tg.prototype.normalized=
function(){var c=this.r();return Vd.pt(this.x/c,this.y/c)};tg.prototype.fastNormalized=function(){var c=this.fastR();return Vd.pt(this.x/c,this.y/c)};tg.prototype.dotProduct=function(c){return this.x*c.x+this.y*c.y};tg.prototype.matrixTransform=function(c,h){var n=c.a*this.x+c.c*this.y+c.e;c=c.b*this.x+c.d*this.y+c.f;return h?Object.assign(h,{x:n,y:c}):Vd.pt(n,c)};tg.prototype.matrixTransformDirection=function(c,h){var n=c.a*this.x+c.c*this.y;c=c.b*this.x+c.d*this.y;return h?Object.assign(h,{x:n,
y:c}):Vd.pt(n,c)};tg.prototype.griddedBy=function(c){return Vd.pt(this.x-this.x%c.x,this.y-this.y%c.y)};tg.prototype.roundTo=function(c){return new Vd.Point(Vd.num.roundTo(this.x,c),Vd.num.roundTo(this.y,c))};tg.prototype.dist=function(c){var h=this.x-c.x;c=this.y-c.y;return Math.sqrt(h*h+c*c)};tg.prototype.distSquared=function(c){var h=this.x-c.x;c=this.y-c.y;return h*h+c*c};tg.prototype.nearestPointOnLineBetween=function(c,h){if(c.x==h.x)return Vd.pt(c.x,this.y);if(c.y==h.y)return Vd.pt(this.x,
c.y);var n=c.x;c=c.y;var b=h.x-n;h=h.y-c;var d=((this.y-c)/b+(this.x-n)/h)/(b/h+h/b);return Vd.pt(n+d*b,c+d*h)};tg.prototype.interpolate=function(c,h,n){return void 0===n||n?Vd.pt(Vd.num.interpolate(c,this.x,h.x),Vd.num.interpolate(c,this.y,h.y)):Vd.Point.polar(Vd.num.interpolate(c,this.r(),h.r()),Vd.num.interpolate(c,this.theta(),h.theta()))};tg.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};tg.prototype.fastR=function(){for(var c=this.x*this.x+this.y*this.y,h=17,n=0;6>n;n++)h=
(h+c/h)/2;return h};tg.prototype.theta=function(){return Math.atan2(this.y,this.x)};tg.prototype.asRectangle=function(){return new Vd.Rectangle(this.x,this.y,0,0)};tg.prototype.extent=function(c){return new Vd.Rectangle(this.x,this.y,c.x,c.y)};tg.prototype.extentAsRectangle=function(){return new Vd.Rectangle(0,0,this.x,this.y)};tg.prototype.lineTo=function(c){return new Vd.Line(this,c)};tg.prototype.toTuple=function(){return[this.x,this.y]};tg.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
tg.prototype.toString=function(c){return void 0===c||c?Vd.string.format("pt(%1.f,%1.f)",this.x,this.y):Vd.string.format("pt(%10.d,%10.d)",this.x,this.y)};tg.prototype.inspect=function(){return JSON.stringify(this)};tg.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(tg.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ca("al",tg);Vd.Point=tg;var ye=function(c,
h,n,b){this.x=c||0;this.y=h||0;this.width=n||0;this.height=b||0};ye.fromAny=function(c,h){return Vd.rect(c.minPt(h),c.maxPt(h))};ye.fromLiteral=function(c){return new Vd.Rectangle(c.x,c.y,c.width,c.height)};ye.fromTuple=function(c){return new Vd.Rectangle(c[0],c[1],c[2],c[3])};ye.unionPts=function(c){for(var h=c[0],n=c[0],b=1;b<c.length;b++)h=h.minPt(c[b]),n=n.maxPt(c[b]);return Vd.rect(h,n)};ye.ensure=function(c){return c instanceof Vd.Rectangle?c:new Vd.Rectangle(c.x,c.y,c.width,c.height)};ye.fromElement=
function(c){if("function"===typeof c.getBoundingClientRect){var h=c.getBoundingClientRect();return Vd.rect(h.left,h.top,h.width,h.height)}if("http://www.w3.org/1999/xhtml"==c.namespaceURI){h=Vd.cssLengthToPixels(c.style.left||"0px");var n=Vd.cssLengthToPixels(c.style.top||"0px"),b=Vd.cssLengthToPixels(c.style.width||"0px");c=Vd.cssLengthToPixels(c.style.hieght||"0px");return new Vd.Rectangle(h,n,b,c)}if("http://www.w3.org/2000/svg"==c.namespaceURI)return new Vd.Rectangle(c.x.baseVal.value,c.y.baseVal.value,
c.width.baseVal.value,c.height.baseVal.value);throw Error("Cannot create Rectangle from "+c);};ye.inset=function(c,h,n,b){void 0===h&&(h=c);void 0===n&&(n=c);void 0===b&&(b=h);return new Vd.Rectangle(c,h,n-c,b-h)};ye.prototype.getX=function(){return this.x};ye.prototype.getY=function(){return this.y};ye.prototype.getWidth=function(){return this.width};ye.prototype.getHeight=function(){return this.height};ye.prototype.copy=function(){return new Vd.Rectangle(this.x,this.y,this.width,this.height)};ye.prototype.toFixed=
function(c){return new Vd.Rectangle(this.x.toFixed(c),this.y.toFixed(c),this.width.toFixed(c),this.height.toFixed(c))};ye.prototype.withWidth=function(c){return new Vd.Rectangle(this.x,this.y,c,this.height)};ye.prototype.withHeight=function(c){return new Vd.Rectangle(this.x,this.y,this.width,c)};ye.prototype.withX=function(c){return new Vd.Rectangle(c,this.y,this.width,this.height)};ye.prototype.withY=function(c){return new Vd.Rectangle(this.x,c,this.width,this.height)};ye.prototype.withExtent=function(c){return new Vd.Rectangle(this.x,
this.y,c.x,c.y)};ye.prototype.withTopLeft=function(c){return Vd.Rectangle.fromAny(c,this.bottomRight())};ye.prototype.withTopRight=function(c){return Vd.Rectangle.fromAny(this.bottomLeft(),c)};ye.prototype.withBottomRight=function(c){return Vd.Rectangle.fromAny(c,this.topLeft())};ye.prototype.withBottomLeft=function(c){return Vd.Rectangle.fromAny(c,this.topRight())};ye.prototype.withLeftCenter=function(c){return new Vd.Rectangle(c.x,this.y,this.width+(this.x-c.x),this.height)};ye.prototype.withRightCenter=
function(c){return new Vd.Rectangle(this.x,this.y,c.x-this.x,this.height)};ye.prototype.withTopCenter=function(c){return new Vd.Rectangle(this.x,c.y,this.width,this.height+(this.y-c.y))};ye.prototype.withBottomCenter=function(c){return new Vd.Rectangle(this.x,this.y,this.width,c.y-this.y)};ye.prototype.withCenter=function(c){return new Vd.Rectangle(c.x-this.width/2,c.y-this.height/2,this.width,this.height)};ye.prototype.insetBy=function(c){return new Vd.Rectangle(this.x+c,this.y+c,this.width-2*c,
this.height-2*c)};ye.prototype.insetByPt=function(c){return new Vd.Rectangle(this.x+c.x,this.y+c.y,this.width-2*c.x,this.height-2*c.y)};ye.prototype.grid=function(c,h){var n=this.width/h,b=this.height/c;return Vd.grid.mapCreate(c,h,function(d,k){return new Vd.Rectangle(n*k,b*d,n,b)})};ye.prototype.divide=function(c){var h=this;return c.map(function(n){return Vd.rect(h.x+h.width*n.x,h.y+h.height*n.y,h.width*n.width,h.height*n.height)})};ye.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};ye.prototype.lineTo=function(c){var h=this.center(),n=c.center();n=h.lineTo(n);h=this.lineIntersection(n)[0];c=c.lineIntersection(n)[0];return h&&c&&h.lineTo(c)};ye.prototype.equals=function(c){return c?this.x==c.x&&this.y==c.y&&this.width==c.width&&this.height==c.height:!1};ye.prototype.inspect=function(){return JSON.stringify(this)};ye.prototype.topLeft=function(){return new Vd.Point(this.x,this.y)};ye.prototype.topRight=function(){return new Vd.Point(this.maxX(),this.y)};ye.prototype.bottomRight=
function(){return new Vd.Point(this.maxX(),this.maxY())};ye.prototype.bottomLeft=function(){return new Vd.Point(this.x,this.maxY())};ye.prototype.leftCenter=function(){return new Vd.Point(this.x,this.center().y)};ye.prototype.rightCenter=function(){return new Vd.Point(this.maxX(),this.center().y)};ye.prototype.topCenter=function(){return new Vd.Point(this.center().x,this.y)};ye.prototype.bottomCenter=function(){return new Vd.Point(this.center().x,this.maxY())};ye.prototype.extent=function(){return new Vd.Point(this.width,
this.height)};ye.prototype.center=function(){return new Vd.Point(this.x+this.width/2,this.y+this.height/2)};ye.prototype.topEdge=function(){return new Vd.Line(this.topLeft(),this.topRight())};ye.prototype.bottomEdge=function(){return new Vd.Line(this.bottomLeft(),this.bottomRight())};ye.prototype.leftEdge=function(){return new Vd.Line(this.topLeft(),this.bottomLeft())};ye.prototype.rightEdge=function(){return new Vd.Line(this.topRight(),this.bottomRight())};ye.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};ye.prototype.allPoints=function(){for(var c=this.x,h=this.y,n=this.width,b=this.height,d=[],k=h;k<h+b;k++)for(var a=c;a<c+n;a++)d.push(Vd.pt(a,k));return d};ye.prototype.isNonEmpty=function(c){return 0<this.width&&0<this.height};ye.prototype.containsRect=function(c){return this.x<=c.x&&this.y<=c.y&&c.maxX()<=this.maxX()&&c.maxY()<=this.maxY()};ye.prototype.intersects=function(c){return this.intersection(c).isNonEmpty()};ye.prototype.containsPoint=
function(c){return this.x<=c.x&&c.x<=this.x+this.width&&this.y<=c.y&&c.y<=this.y+this.height};ye.prototype.translatedBy=function(c){return new Vd.Rectangle(this.x+c.x,this.y+c.y,this.width,this.height)};ye.prototype.scaleByRect=function(c){return new Vd.Rectangle(this.x+c.x*this.width,this.y+c.y*this.height,c.width*this.width,c.height*this.height)};ye.prototype.scaleRectIn=function(c){return new Vd.Rectangle((this.x-c.x)/c.width,(this.y-c.y)/c.height,this.width/c.width,this.height/c.height)};ye.prototype.scaleRectTo=
function(c){var h,n;this.width>this.height?n=this.width:h=this.height;c=n?c.width/n:c.height/h;return this.withExtent(this.extent().scaleBy(c)).withCenter(this.center())};ye.prototype.expandBy=function(c){return this.insetBy(0-c)};ye.prototype.translateForInclusion=function(c){var h=c.x,n=c.y,b=h+c.width,d=n+c.height;b>this.right()&&(h-=b-this.right());d>this.bottom()&&(n-=d-this.bottom());h<this.x&&(h=this.x);n<this.y&&(n=this.y);return Vd.rect(h,n,c.width,c.height)};ye.prototype.transformRectForInclusion=
function(c){var h=this.topLeft().maxPt(c.topLeft());c=h.addPt(c.extent());c=this.bottomRight().minPt(c);return Vd.rect(h,c)};ye.prototype.insetByRect=function(c){return new Vd.Rectangle(this.x+c.left(),this.y+c.top(),this.width-(c.left()+c.right()),this.height-(c.top()+c.bottom()))};ye.prototype.outsetByRect=function(c){return new Vd.Rectangle(this.x-c.left(),this.y-c.top(),this.width+(c.left()+c.right()),this.height+(c.top()+c.bottom()))};ye.prototype.interpolate=function(c,h){var n=this.topLeft(),
b=this.bottomRight(),d=h.topLeft();h=h.bottomRight();return Vd.Rectangle.fromAny(n.interpolate(c,d),b.interpolate(c,h))};ye.prototype.intersection=function(c){var h=Math.max(this.x,c.x),n=Math.max(this.y,c.y);return new Vd.Rectangle(h,n,Math.min(this.x+this.width,c.x+c.width)-h,Math.min(this.y+this.height,c.y+c.height)-n)};ye.prototype.union=function(c){return Vd.rect(this.topLeft().minPt(c.topLeft()),this.bottomRight().maxPt(c.bottomRight()))};ye.prototype.lineIntersection=function(c){return this.edges().map(function(h){return h.intersection(c)}).filter(function(h){return!!h})};
ye.prototype.dist=function(c){var h=this.closestPointToPt(c.center());c=c.closestPointToPt(h);return h.dist(c)};ye.prototype.relativeToAbsPoint=function(c){return new Vd.Point(this.x+this.width*c.x,this.y+this.height*c.y)};ye.prototype.closestPointToPt=function(c){return Vd.pt(Math.min(Math.max(this.x,c.x),this.maxX()),Math.min(Math.max(this.y,c.y),this.maxY()))};ye.prototype.maxX=function(){return this.x+this.width};ye.prototype.maxY=function(){return this.y+this.height};ye.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};ye.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};ye.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};ye.prototype.randomPoint=function(){return Vd.Point.random(Vd.pt(this.width,this.height)).addPt(this.topLeft())};ye.prototype.constrainPt=function(c){return c.maxPt(this.topLeft()).minPt(this.bottomRight())};ye.prototype.left=function(){return this.x};ye.prototype.right=function(){return this.maxX()};
ye.prototype.top=function(){return this.y};ye.prototype.bottom=function(){return this.maxY()};ye.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};ye.prototype.toAttributeValue=function(c){c=.01;var h=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&h.push(this.top()):h=h.concat([this.top(),this.right(),this.bottom()]);return h.invoke("roundTo",c||.01)};ye.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};ye.prototype.partNamed=function(c){return this[c].call(this)};ye.prototype.withPartNamed=function(c,h){return this[this.setterName(c)].call(this,h)};ye.prototype.setterName=function(c){return"with"+c[0].toUpperCase()+c.slice(1)};ye.prototype.partNameNear=function(c,h,n){c=this.partNameNearest(c,h);return h.dist(this.partNamed(c))<n?c:null};ye.prototype.partNameNearest=function(c,h){for(var n=1E99,b,d=0;d<c.length;d++){b=c[d];var k=h.dist(this.partNamed(b));if(k<
n){var a=b;n=k}}return a};ye.prototype.toString=function(){return Vd.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};ye.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(ye.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ca("a1",ye);Vd.Rectangle=ye;var Rk=function(c,h,n){c?c instanceof Vd.Point?(h=h||0,void 0===n&&(n=Vd.pt(1,1)),this.a=this.ensureNumber(n.x*Math.cos(h)),this.b=this.ensureNumber(n.y*Math.sin(h)),this.c=this.ensureNumber(n.x*-Math.sin(h)),this.d=this.ensureNumber(n.y*Math.cos(h)),this.e=this.ensureNumber(c.x),this.f=this.ensureNumber(c.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(c):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};Rk.prototype.copy=function(){return new Vd.Transform(this)};Rk.prototype.fromMatrix=function(c){this.a=this.ensureNumber(c.a);this.b=this.ensureNumber(c.b);this.c=this.ensureNumber(c.c);this.d=this.ensureNumber(c.d);this.e=this.ensureNumber(c.e);this.f=this.ensureNumber(c.f)};Rk.prototype.getRotation=function(){var c=Vd.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(c)<this.eps?0:c};Rk.prototype.getScale=function(){var c=this.a,h=this.c;c=Math.sqrt(c*c+h*h);return Math.abs(c-1)<this.eps?1:c};Rk.prototype.getScalePoint=function(){var c=this.a,h=this.b,n=this.c,b=this.d,d=Math.atan2(-n,c);return Vd.pt(Math.sqrt(c*c+n*n),Math.abs(h)>Math.abs(b)?h/Math.sin(d):b/Math.cos(d))};Rk.prototype.getTranslation=function(){return Vd.pt(this.e,this.f)};Rk.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};Rk.prototype.toSVGAttributeValue=
function(){var c=this.getTranslation();c="translate("+c.x+","+c.y+")";var h=this.getRotation(),n=this.getScalePoint();0!=h&&(c+=" rotate("+this.getRotation()+")");if(1!=n.x||1!=n.y)c+=" scale("+n.x+","+n.y+")";return c};Rk.prototype.toCSSValue=function(c){var h="",n=this.getTranslation();h+="translate("+n.x.toFixed(2)+"px,"+n.y.toFixed(2)+"px)";if(c){n=c.width/2;var b=c.height/2;h+=" translate("+n.toFixed(2)+"px,"+b.toFixed(2)+"px)"}0!=this.getRotation()&&(h+=" rotate("+this.getRotation().toFixed(2)+
"deg)");c&&(n=c.width/2,b=c.height/2,h+=" translate("+(-1*n).toFixed(2)+"px,"+(-1*b).toFixed(2)+"px)");c=this.getScalePoint();if(1!=c.x||1!=c.y)h+=" scale("+c.x.toFixed(2)+","+c.y.toFixed(2)+")";return h};Rk.prototype.toCSSTransformString=function(){var c=this.getRotation(),h=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+c+"deg) scale("+h+","+h+")"};Rk.prototype.toString=function(){return this.toCSSTransformString()};Rk.prototype.toMatrix=function(){return this.copy()};Rk.prototype.transformPoint=
function(c,h){return c.matrixTransform(this,h)};Rk.prototype.transformDirection=function(c,h){return c.matrixTransformDirection(this,h)};Rk.prototype.matrixTransformForMinMax=function(c,h,n){var b=this.a*c.x+this.c*c.y+this.e;c=this.b*c.x+this.d*c.y+this.f;b>n.x&&(n.x=b);c>n.y&&(n.y=c);b<h.x&&(h.x=b);c<h.y&&(h.y=c)};Rk.prototype.transformRectToRect=function(c){var h=Vd.pt(Infinity,Infinity),n=Vd.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(c.topLeft(),h,n);this.matrixTransformForMinMax(c.bottomRight(),
h,n);this.isTranslation()||(this.matrixTransformForMinMax(c.topRight(),h,n),this.matrixTransformForMinMax(c.bottomLeft(),h,n));return Vd.rect(h,n)};Rk.prototype.preConcatenate=function(c){var h=this.matrix_||this.toMatrix();this.a=c.a*h.a+c.c*h.b;this.b=c.b*h.a+c.d*h.b;this.c=c.a*h.c+c.c*h.d;this.d=c.b*h.c+c.d*h.d;this.e=c.a*h.e+c.c*h.f+c.e;this.f=c.b*h.e+c.d*h.f+c.f;this.matrix_=this.toMatrix();return this};Rk.prototype.invert=function(){var c=this.copy(),h=1/(c.a*c.d-c.c*c.b);this.a=c.d*h;this.b=
-c.b*h;this.c=-c.c*h;this.d=c.a*h;this.e=(c.c*c.f-c.e*c.d)*h;this.f=-(c.a*c.f-c.b*c.e)*h;return this};Rk.prototype.inverse=function(){var c=this.matrix_||this.toMatrix();c=new this.constructor(c);c.invert();return c};Rk.prototype.ensureNumber=function(c){if(isNaN(c))throw Error("not a number");return c};Rk.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(Rk.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});Vd.Transform=Rk;var jn=function(c,h){this.start=c;this.end=h};jn.fromCoords=function(c,h,n,b){return new Vd.Line(Vd.pt(c,h),Vd.pt(n,b))};jn.prototype.withStart=function(c){return new Vd.Line(c,this.end)};jn.prototype.withEnd=function(c){return new Vd.Line(this.start,c)};jn.prototype.sampleN=function(c){c=c||10;for(var h=
this.end.subPt(this.start).scaleBy(1/c),n=[],b=0;b<=c;b++)n.push(this.start.addPt(h.scaleBy(b)));return n};jn.prototype.sample=function(c){return this.sampleN(this.length()/c)};jn.prototype.length=function(){return this.start.dist(this.end)};jn.prototype.equals=function(c){return c?this.start.eqPt(c.start)&&this.end.eqPt(c.end):!1};jn.prototype.distanceFromLine=function(c){var h=this.start.x,n=this.start.y,b=this.end.x,d=this.end.y;return Math.abs((d-n)*c.x-(b-h)*c.y+b*n-d*h)/Math.sqrt(Math.pow(d-
n,2)+Math.pow(b-h,2))};jn.prototype.includesPoint=function(c,h){var n=this.start.x,b=this.start.y,d=this.end.x,k=this.end.y,a=c.x;c=c.y;var f=0===(d-n)*(c-b)-(a-n)*(k-b);if(h||!f)return f;h=Math.min(b,k);f=Math.max(n,d);b=Math.max(b,k);return Math.min(n,d)<=a&&a<=f&&h<=c&&c<=b};jn.prototype.intersection=function(c,h){var n=this.start,b=this.end,d=c.start,k=c.end;c=n.x;n=n.y;var a=b.x;b=b.y;var f=d.x;d=d.y;var l=k.x;k=k.y;var r=((c*b-n*a)*(f-l)-(c-a)*(f*k-d*l))/((c-a)*(d-k)-(n-b)*(f-l)),v=((c*b-n*
a)*(d-k)-(n-b)*(f*k-d*l))/((c-a)*(d-k)-(n-b)*(f-l));return Infinity!==r&&Infinity!==v&&(h||Vd.num.between(r,c,a,1E-4)&&Vd.num.between(v,n,b,1E-4)&&Vd.num.between(r,f,l,1E-4)&&Vd.num.between(v,d,k,1E-4))?Vd.pt(r,v):null};jn.prototype.perpendicularLine=function(c,h,n){c=void 0===c?0:c;h=void 0===h?1:h;n=void 0===n?"cc":n;var b=this.start,d=this.toVector();c=b.addPt(d.scaleBy(c));n=d.theta()+("cc"===n?-1:1)*Math.PI/2;return new Vd.Line(c,c.addPt(Vd.Point.polar(h,n)))};jn.prototype.toVector=function(){return this.end.subPt(this.start)};
jn.prototype.toString=function(){return Vd.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};jn.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(jn.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});Vd.Line=jn;Vd.rect=Dl;Vd.rect=Dl;Vd.pt=di;Vd.pt=di;var toa=
Object.freeze({__proto__:null,Point:tg,Rectangle:ye,Transform:Rk,Line:jn,rect:Dl,pt:di}),Sd=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");Sd.floor=function(c){return Math.floor(255.99*c)};Sd.pad=function(c,h,n){n=void 0===n?Sd.arr.last:n;return[].concat($jscomp.arrayFromIterable(c),$jscomp.arrayFromIterable(Array(Math.max(h-c.length,0)).fill(n(c))))};Sd.num=Em;Sd.obj=dg;Sd.arr=Lf;Sd.parse=oD;Sd.Rectangle=ye;Sd.rect=Dl;Sd.pt=di;Sd.Point=tg;Sd.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var RE=function(){};RE.prototype.offsets=function(){return null};RE.prototype.stepCount=function(){return 0};RE.prototype.stepSize=function(){return 0};RE.prototype.chord=function(c){var h=this,n=c.hue,b=c.saturation,d=c.brightness;return(this.offsets()||Sd.arr.range(0,this.steps()).map(function(k){return k*h.stepSize()})).map(function(k){return Sd.Color.hsb(n+k%360,b,d)})};$jscomp.global.Object.defineProperties(RE.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
Sd.ColorHarmony=RE;var Cz=function(){return Sd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Cz,Sd.ColorHarmony);Cz.prototype.steps=function(){return 1};Cz.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(Cz.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Ca("b8",Cz);Sd.Complementary=Cz;var Dz=function(){return Sd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Dz,Sd.ColorHarmony);Dz.prototype.steps=function(){return 2};
Dz.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(Dz.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Ca("b9",Dz);Sd.Triadic=Dz;var QB=function(){return Sd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(QB,Sd.ColorHarmony);QB.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(QB.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Ca("ba",QB);Sd.Tetradic=
QB;var Ez=function(){return Sd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Ez,Sd.ColorHarmony);Ez.prototype.steps=function(){return 3};Ez.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(Ez.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Ca("bb",Ez);Sd.Quadratic=Ez;var Fz=function(){return Sd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Fz,Sd.ColorHarmony);Fz.prototype.steps=function(){return 5};Fz.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(Fz.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Ca("bc",Fz);Sd.Analogous=Fz;var RB=function(){return Sd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(RB,Sd.ColorHarmony);RB.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(RB.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Ca("bd",RB);Sd.Neutral=
RB;var ng=function(c,h,n,b){this.r=c||0;this.g=h||0;this.b=n||0;this.a=b||(0===b?0:1)};ng.random=function(c,h){void 0===c&&(c=0);void 0===h&&(h=255);return Sd.Color.rgb(Sd.num.random(c,h),Sd.num.random(c,h),Sd.num.random(c,h))};ng.hsb=function(c,h,n){if(0==h)return new Sd.Color(n,n,n);var b=c%360/60;c=Math.floor(b);var d=b-c;b=(1-h)*n;var k=(1-h*d)*n;h=(1-h*(1-d))*n;switch(c){case 0:return new Sd.Color(n,h,b);case 1:return new Sd.Color(k,n,b);case 2:return new Sd.Color(b,n,h);case 3:return new Sd.Color(b,
k,n);case 4:return new Sd.Color(h,b,n);case 5:return new Sd.Color(n,b,k);default:return new Sd.Color(0,0,0)}};ng.wheel=function(c){return Sd.Color.wheelHsb(void 0===c?10:c,0,.9,.7)};ng.wheelHsb=function(c,h,n,b){for(var d=Array(c),k=360/Math.max(c,1),a=0;a<c;a++)d[a]=Sd.Color.hsb(h+a*k,n,b);return d};ng.rgb=function(c,h,n){return new Sd.Color(c/255,h/255,n/255)};ng.rgbHex=function(c){return(c=this.parseHex(c))&&0<=c[0]&&0<=c[1]&&0<=c[2]?new Sd.Color(c[0],c[1],c[2]):null};ng.rgba=function(c,h,n,b){return new Sd.Color(c/
255,h/255,n/255,b)};ng.fromLiteral=function(c){return new Sd.Color(c.r,c.g,c.b,c.a)};ng.fromTuple=function(c){return new Sd.Color(c[0],c[1],c[2],c[3])};ng.fromTuple8Bit=function(c){return new Sd.Color(c[0]/255,c[1]/255,c[2]/255,c[3]/255)};ng.fromString=function(c){return c&&"none"!==c?this.fromTuple(this.parse(c)):null};ng.parse=function(c){return c&&"none"!==c?(c=Sd.parse(c),[c.red,c.green,c.blue,c.alpha]):null};ng.parseRGB=function(c){var h=c.match(this.rgbaRegex);if(h){c=parseInt(h[1])/(h[2]?100:
255);var n=parseInt(h[3])/(h[4]?100:255),b=parseInt(h[5])/(h[6]?100:255);h=h[7]?parseFloat(h[7]):1;return[c,n,b,h]}return null};ng.parseHex=function(c){var h;var n="";for(h=0;h<c.length;h++){var b=c[h].toLowerCase();if("a"==b||"b"==b||"c"==b||"d"==b||"e"==b||"f"==b||"0"==b||"1"==b||"2"==b||"3"==b||"4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b)n+=b}if(6==n.length)h=n.substring(0,2),c=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)h=n.substring(0,1),h+=h,c=n.substring(1,2),c+=c,n=n.substring(2,
3),n+=n;else return null;h=parseInt(h,16)/255;c=parseInt(c,16)/255;n=parseInt(n,16)/255;return[h,c,n]};ng.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};ng.prototype.equals=function(c){return c?this.r===c.r&&this.g===c.g&&this.b===c.b&&this.a===c.a:!1};ng.prototype.darker=function(c){var h=this.mixedWith(Sd.Color.black,.5);return 1<c?h.darker(c-1):h};ng.prototype.lighter=function(c){if(0==c)return this;var h=this.mixedWith(Sd.Color.white,.5);return 1<c?h.lighter(c-1):h};ng.prototype.interpolate=
function(c,h){if(h.isGradient)return h.interpolate(1-c,this);h=Sd.obj.isArray(h)?h:h.toTuple();return Sd.Color.fromTuple(this.toTuple().map(function(n,b){return Sd.num.interpolate(c,n,h[b])}))};ng.prototype.toString=function(){return 1===this.a?"rgb("+Sd.floor(this.r)+","+Sd.floor(this.g)+","+Sd.floor(this.b)+")":this.toRGBAString()};ng.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};ng.prototype.toHexString=
function(){function c(h){for(;2>h.length;)h="0"+h;return h}return c(Math.floor(255.99*this.r).toString(16))+c(Math.floor(255.99*this.g).toString(16))+c(Math.floor(255.99*this.b).toString(16))};ng.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};ng.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};ng.prototype.toHSB=function(){var c=Math.max(this.r,this.g,this.b),h=Math.min(this.r,this.g,this.b),n;c==h?n=0:c==this.r?n=(this.g-this.b)/(c-h)*60:c==
this.g?n=60*(2+(this.b-this.r)/(c-h)):c==this.b&&(n=60*(4+(this.r-this.g)/(c-h)));return[(n+360)%360,0==c?0:(c-h)/c,c]};ng.prototype.withA=function(c){return new Sd.Color(this.r,this.g,this.b,c)};ng.prototype.mixedWith=function(c,h){var n=1-h;return new Sd.Color(this.r*h+c.r*n,this.g*h+c.g*n,this.b*h+c.b*n,this.a*h+c.a*n)};ng.prototype.invert=function(){return Sd.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};ng.prototype.toCSSString=function(){return this.toRGBAString()};ng.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};ng.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(ng.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var c=this,h=Sd.Color.named;return Object.keys(h).find(function(n){return h[n].equals(c)})}}});$jscomp.global.Object.defineProperties(ng,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return Sd.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new Sd.Color(0,0,0),almostBlack:Sd.Color.rgb(64,64,64),white:new Sd.Color(1,1,1),gray:new Sd.Color(.8,.8,.8),red:new Sd.Color(.8,0,0),green:new Sd.Color(0,.8,0),yellow:new Sd.Color(.8,.8,0),blue:new Sd.Color(0,0,.8),purple:new Sd.Color(.5,0,.5),magenta:new Sd.Color(1,0,1),pink:Sd.Color.rgb(255,30,153),turquoise:Sd.Color.rgb(0,240,255),tangerine:Sd.Color.rgb(242,
133,0),orange:Sd.Color.rgb(255,153,0),cyan:Sd.Color.rgb(0,255,255),brown:Sd.Color.rgb(182,67,0),limeGreen:Sd.Color.rgb(51,255,0),darkGray:Sd.Color.rgb(102,102,102),lightGray:Sd.Color.rgb(230,230,230),veryLightGray:Sd.Color.rgb(243,243,243),transparent:Sd.Color.rgba(0,0,0,0),lively:Sd.Color.rgb(245,124,0)}}}});Ca("C",ng);Sd.Color=ng;Object.assign(Sd.Color,Sd.Color.named);var xx=function(c){this.stops=c?c.map(function(h){return h}):[]};xx.create=function(c){var h=[],n;for(n in c)h.push({offset:Number(n),
color:c[n]});return new this({stops:h})};xx.parse=function(c){return c.startsWith("radial-gradient")?Sd.RadialGradient.parse(c):c.startsWith("linear-gradient")?Sd.LinearGradient.parse(c):Sd.Color.fromTuple(Sd.Color.parse(c))};xx.prototype.equals=function(c){return c&&c.isGradient?this.toString()==c.toString():!1};xx.prototype.getStopsLighter=function(c){return Sd.arr.collect(this.stops,function(h){return{offset:h.offset,color:h.color.lighter(c)}})};xx.prototype.getStopsDarker=function(c){return Sd.arr.collect(this.stops,
function(h){return{offset:h.offset,color:h.color.darker(c)}})};xx.prototype.interpolateStops=function(c,h){var n=Sd.pad(this.stops,h.length);h=Sd.pad(h,this.stops.length);var b=[],d;for(d=0;d<n.length;d++){var k=n[d];var a=k.color;var f=k.offset;var l=h[d];k=l.color;l=l.offset;b.push({color:a.interpolate(c,k),offset:Sd.num.interpolate(c,f,l)})}return b};xx.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(xx.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});Sd.Gradient=xx;var kn=function(c){var h=void 0===c?{}:c;c=h.vector;h=Sd.Gradient.call(this,h.stops)||this;h.vector=c;return h};$jscomp.inherits(kn,Sd.Gradient);kn.parse=function(c){c.match(/\((.*)\)/)[1].split(",")};kn.prototype.angleToRect=function(c){return Sd.Point.polar(1,c).extentAsRectangle().withCenter(Sd.pt(.5,.5))};kn.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};kn.prototype.toString=function(){return this.toCSSString()};kn.prototype.lighter=function(c){return new this.constructor({stops:this.getStopsLighter(c),vector:this.vector})};kn.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),vector:this.vector})};kn.prototype.interpolate=function(c,h,n){n=void 0===n?{width:1E3,height:1E3}:n;h.isColor&&(h=new Sd.LinearGradient({vector:this.vector,stops:this.stops.map(function(b){return{color:h,
offset:b.offset}})}));if("radialGradient"==h.type){if(.5>c)return new Sd.LinearGradient({vector:this.vector.interpolate(c,Sd.rect(0,0,0,1)),stops:this.interpolateStops(c,h.stops.map(function(b,d){return{color:b.color,offset:1}}))});if(.5<=c)return new Sd.RadialGradient({stops:this.interpolateStops(c,h.stops),focus:Sd.pt(.5,0).interpolate(c,h.focus),bounds:Sd.rect(0,0,100*n.width,2*n.height).interpolate(c,h.bounds)})}return new Sd.LinearGradient({stops:this.interpolateStops(c,h.stops),vector:this.vector.interpolate(c,
h.vector)})};kn.prototype.toCSSString=function(){var c="linear-gradient("+(Sd.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(h){return h.color.toRGBAString()+" "+((100*h.offset).toFixed()+"%")}).join(",");return c+")"};kn.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(c){return"{offset: "+c.offset+", color: "+c.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(kn.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:Sd.rect(Sd.pt(0,0),Sd.pt(0,1)),northeast:Sd.rect(Sd.pt(1,0),Sd.pt(0,1)),westeast:Sd.rect(Sd.pt(1,0),Sd.pt(0,0)),southeast:Sd.rect(Sd.pt(1,1),Sd.pt(0,0)),southnorth:Sd.rect(Sd.pt(0,1),Sd.pt(0,0)),southwest:Sd.rect(Sd.pt(0,1),Sd.pt(1,0)),eastwest:Sd.rect(Sd.pt(0,0),Sd.pt(1,0)),northwest:Sd.rect(Sd.pt(0,0),Sd.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(c){this._vector=c?"string"===typeof c?this.vectors[c.toLowerCase()]:"number"===typeof c?this.angleToRect(c):c:this.vectors.northsouth}}});Ca("am",kn);Sd.LinearGradient=kn;var vp=function(c){var h=void 0===c?{}:c;c=h.focus;var n=h.bounds;h=Sd.Gradient.call(this,h.stops)||this;h.focus=c||Sd.pt(.5,.5);h.bounds=n||new Sd.Rectangle(0,0,20,20);return h};$jscomp.inherits(vp,Sd.Gradient);vp.parse=function(c){c.match(/\((.*)\)/)[1].split(",")};vp.prototype.toString=function(){return this.toCSSString()};
vp.prototype.lighter=function(c){return new this.constructor({stops:this.getStopsLighter(c),focus:this.focus,bounds:this.bounds})};vp.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};vp.prototype.interpolate=function(c,h,n){n=void 0===n?{height:1E3,width:1E3}:n;h.isColor&&(h=new Sd.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(b){return{color:h,offset:b.offset}})}));return"linearGradient"==
h.type?h.interpolate(1-c,this,n):new Sd.RadialGradient({bounds:this.bounds.interpolate(c,h.bounds),stops:this.interpolateStops(c,h.stops),focus:this.focus.interpolate(c,h.focus)})};vp.prototype.toCSSString=function(){var c=this.focus.scaleBy(100),h=this.bounds.extent();c="radial-gradient("+h.x/2+"px "+h.y/2+"px at "+c.x+"% "+c.y+"%";for(h=0;h<this.stops.length;h++)c+=","+this.stops[h].color.toRGBAString()+" "+((100*this.stops[h].offset).toFixed()+"%");return c+")"};vp.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(c){return"{offset: "+c.offset+", color: "+c.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(vp.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Ca("ak",vp);Sd.RadialGradient=vp;var SH=Ca("be","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
Sd.flatDesignColors=SH;Sd.flatDesignColors=SH;Sd.flatDesignColors=SH;var TH=Ca("bf","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
Sd.materialDesignColors=TH;Sd.materialDesignColors=TH;Sd.materialDesignColors=TH;var UH=Ca("bg","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
Sd.webSafeColors=UH;Sd.webSafeColors=UH;Sd.webSafeColors=UH;var uoa=Object.freeze({__proto__:null,Complementary:Cz,Triadic:Dz,Tetradic:QB,Quadratic:Ez,Analogous:Fz,Neutral:RB,Color:ng,LinearGradient:kn,RadialGradient:vp,flatDesignColors:SH,materialDesignColors:TH,webSafeColors:UH}),q9=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(q9,uoa);Object.assign(q9,toa);var voa=Object.freeze({__proto__:null,Complementary:Cz,Triadic:Dz,Tetradic:QB,Quadratic:Ez,Analogous:Fz,Neutral:RB,
Color:ng,LinearGradient:kn,RadialGradient:vp,flatDesignColors:SH,materialDesignColors:TH,webSafeColors:UH,Point:tg,Rectangle:ye,Transform:Rk,Line:jn,rect:Dl,pt:di}),woa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aW={};!function(c,h){aW?aW=h():(this||woa)[c]=h()}("bowser",function(){function c(k){function a(R){return(R=k.match(R))&&1<R.length&&R[1]||""}function f(R){return(R=k.match(R))&&1<R.length&&R[2]||""}var l=a(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(k)&&
/android/i.test(k),v=/nexus\s*[0-6]\s*/i.test(k),y=!v&&/nexus\s*[0-9]+/i.test(k),A=/CrOS/.test(k),E=/silk/i.test(k),F=/sailfish/i.test(k),H=/tizen/i.test(k),J=/(web|hpw)os/i.test(k),O=/windows phone/i.test(k),L=!O&&/windows/i.test(k),Y=!l&&!E&&/macintosh/i.test(k),S=!r&&!F&&!H&&!J&&/linux/i.test(k),ea=a(/edge\/(\d+(\.\d+)?)/i),qa=a(/version\/(\d+(\.\d+)?)/i),Fa=/tablet/i.test(k),K=!Fa&&/[^-]mobi/i.test(k),Z=/xbox/i.test(k);/opera|opr|opios/i.test(k)?A={name:"Opera",opera:!0,version:qa||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:
/coast/i.test(k)?A={name:"Opera Coast",coast:!0,version:qa||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(k)?A={name:"Yandex Browser",yandexbrowser:!0,version:qa||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(k)?A={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(k)?A={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(k)?A={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:
/puffin/i.test(k)?A={name:"Puffin",puffin:!0,version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(k)?A={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(k)?A={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:O?(A={name:"Windows Phone",windowsphone:!0},ea?(A.msedge=!0,A.version=ea):(A.msie=!0,A.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(k)?A={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:
A?A={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(k)?A={name:"Microsoft Edge",msedge:!0,version:ea}:/vivaldi/i.test(k)?A={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||qa}:F?A={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(k)?A={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(k)?(A={name:"Firefox",
firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(k)&&(A.firefoxos=!0)):E?A={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(k)?A={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(k)?A={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(k)||/rim\stablet/i.test(k)?A={name:"BlackBerry",blackberry:!0,version:qa||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:
J?(A={name:"WebOS",webos:!0,version:qa||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(k)&&(A.touchpad=!0)):/bada/i.test(k)?A={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:H?A={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||qa}:/qupzilla/i.test(k)?A={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||qa}:/chromium/i.test(k)?A={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||qa}:/chrome|crios|crmo/i.test(k)?
A={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?A={name:"Android",version:qa}:/safari|applewebkit/i.test(k)?(A={name:"Safari",safari:!0},qa&&(A.version=qa)):l?(A={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},qa&&(A.version=qa)):A=/googlebot/i.test(k)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||qa}:{name:a(/^(.*)\/(.*) /),version:f(/^(.*)\/(.*) /)};!A.msedge&&/(apple)?webkit/i.test(k)?(/(apple)?webkit\/537\.36/i.test(k)?(A.name=A.name||
"Blink",A.blink=!0):(A.name=A.name||"Webkit",A.webkit=!0),!A.version&&qa&&(A.version=qa)):!A.opera&&/gecko\//i.test(k)&&(A.name=A.name||"Gecko",A.gecko=!0,A.version=A.version||a(/gecko\/(\d+(\.\d+)?)/i));A.msedge||!r&&!A.silk?l?(A[l]=!0,A.ios=!0):Y?A.mac=!0:Z?A.xbox=!0:L?A.windows=!0:S&&(A.linux=!0):A.android=!0;L="";A.windowsphone?L=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(L=a(/os (\d+([_\s]\d+)*) like mac os x/i),L=L.replace(/[_\s]/g,".")):r?L=a(/android[ \/-](\d+(\.\d+)*)/i):A.webos?L=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):
A.blackberry?L=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):A.bada?L=a(/bada\/(\d+(\.\d+)*)/i):A.tizen&&(L=a(/tizen[\/\s](\d+(\.\d+)*)/i));L&&(A.osversion=L);L=L.split(".")[0];if(Fa||y||"ipad"==l||r&&(3==L||4<=L&&!K)||A.silk)A.tablet=!0;else if(K||"iphone"==l||"ipod"==l||r||v||A.blackberry||A.webos||A.bada)A.mobile=!0;A.msedge||A.msie&&10<=A.version||A.yandexbrowser&&15<=A.version||A.vivaldi&&1<=A.version||A.chrome&&20<=A.version||A.firefox&&20<=A.version||A.safari&&6<=A.version||A.opera&&10<=A.version||
A.ios&&A.osversion&&6<=A.osversion.split(".")[0]||A.blackberry&&10.1<=A.version||A.chromium&&20<=A.version?A.a=!0:A.msie&&10>A.version||A.chrome&&20>A.version||A.firefox&&20>A.version||A.safari&&6>A.version||A.opera&&10>A.version||A.ios&&A.osversion&&6>A.osversion.split(".")[0]||A.chromium&&20>A.version?A.c=!0:A.x=!0;return A}function h(k,a){var f=[],l;if(Array.prototype.map)return Array.prototype.map.call(k,a);for(l=0;l<k.length;l++)f=a(k[l]);return f}function n(k){var a=Math.max(k[0].split(".").length,
k[1].split(".").length);for(k=h(k,function(f){var l=a-f.split(".").length;f+=Array(l+1).join(".0");return h(f.split("."),function(r){return Array(20-r.length).join("0")+r}).reverse()});0<=--a;){if(k[0][a]>k[1][a])return 1;if(k[0][a]===k[1][a]){if(0===a)return 0}else return-1}}function b(k,a,f){var l=d;"string"===typeof a&&(f=a,a=void 0);void 0===a&&(a=!1);f&&(l=c(f));f=""+l.version;for(var r in k)if(k.hasOwnProperty(r)&&l[r])return 0>n([f,k[r]]);return a}var d=c("undefined"!==typeof navigator?navigator.userAgent:
"");d.test=function(k){for(var a=0;a<k.length;++a){var f=k[a];if("string"===typeof f&&f in d)return!0}return!1};d.isUnsupportedBrowser=b;d.compareVersions=n;d.check=function(k,a,f){return!b(k,a,f)};d._detect=c;return d});var vs=aW,ws=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");ws.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var c=(document.location.hash||document.location.search).slice(1);c=c&&c.split("&");var h={};if(c)for(var n=0;n<c.length;n++){var b=
c[n].split("="),d=b[0],k=!0;if(1<b.length&&(k=decodeURIComponent(b.slice(1).join("=")),k.match(/^(true|false|null|[0-9"[{].*)$/)))try{k=JSON.parse(k)}catch(a){"["===k[0]&&(k=k.slice(1,-1).split(","))}h[d]=k}return h};ws.Rectangle=ye;ws.Color=ng;ws.bowser=vs;ws.isMac=!!ws.bowser.mac;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(c){return c.hasOwnProperty("_cachedKeyhandlers")&&(c._cachedKeyhandlers=null)});ws.config={onloadURLQuery:ws.parseURLQuery(),defaultShadow:{fast:!0,distance:18,
blur:30,color:ws.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(c){return c.includes("lively.morphic/objectdb")||c.includes("lively.next-node_modules")||c.includes("node_modules")||c.includes("custom-npm-modules")||
c.includes("mocha-es6")||c.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},
{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open javascript workspace",
onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},
{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",
command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",
direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",
command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",
args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",
args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},
{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",
win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",
command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",
mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",
mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",
command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},
{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},
command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",
command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},
command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",
args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",
mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},
command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},
{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",
mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},
{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",
command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",
command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",
mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",
command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:ws.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},
remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:"/lively.morphic/assets/ibm-plex/css/ibm-plex.css",fontAwesome:"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css",inconsolata:"/lively.morphic/assets/inconsolata/inconsolata.css"}};var Ul=Ca("ad",ws.config);ws.default=Ul;var ch=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");ch.connect=Li;ch.disconnect=Ek;ch.disconnectAll=fl;ch.once=cv;ch.signal=em;ch.callWhenNotNull=sg;ch.callWhenPathNotNull=
Hy;ch.noUpdate=lp;ch.string=Ih;ch.arr=Lf;ch.Closure=Sj;ch.obj=dg;ch.stringifyFunctionWithoutToplevelRecorder=Up;ch.connect=Li;ch.connect=Li;ch.disconnect=Ek;ch.disconnect=Ek;ch.disconnectAll=fl;ch.disconnectAll=fl;ch.once=cv;ch.once=cv;ch.signal=em;ch.signal=em;ch.noUpdate=lp;ch.noUpdate=lp;var MN=function(c){var h=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=h.hasOwnProperty("AttributeConnection")&&"function"===typeof h.AttributeConnection?h.AttributeConnection:h.AttributeConnection=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k,a,f){this.init(b,d,k,a,f)}},{key:"init",value:function(b,d,k,a,f){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=d;this.targetObj=k;this.targetMethodName=a;this.varMapping={source:b,target:k};f=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,
garbageCollect:!1,signalOnAssignment:!0},f);f.removeAfterUpdate&&(this.removeAfterUpdate=!0);f.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof f.garbageCollect&&(this.garbageCollect=f.garbageCollect);"boolean"===typeof f.signalOnAssignment&&(this.signalOnAssignment=f.signalOnAssignment);f.converter&&this.setConverter(f.converter);f.updater&&this.setUpdater(f.updater);f.varMapping&&(this.varMapping=Object.assign(f.varMapping,this.varMapping));this.getSpec();return this}},
{key:"__additionally_serialize__",value:function(b,d,k,a){ch.arr.equals(ch.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,d){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&
this.connect()}},{key:"copy",value:function(b){return ch.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,d,k){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},
{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=ch.Closure.fromSource(this.converterString,
this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=ch.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?ch.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",
value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;
delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var d=this.sourceAttrName,
k=this.forceAttributeConnection,a=b.__lookupSetter__(d),f=b.__lookupGetter__(d),l=!a&&!f&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||k?this.addSourceObjGetterAndSetter(f,a):l.isWrapped||this.addConnectionWrapper(b,d,l);return this}},{key:"disconnect",value:function(){var b=this,d=this.sourceObj;if(!d||!d.attributeConnections)return this.removeSourceObjGetterAndSetter();d.attributeConnections=d.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});
var k=d.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==d.attributeConnections.length&&delete d.attributeConnections;0==k.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,d){if(this.isActive)return null;var k=this,a=this.getUpdater(),f=this.getConverter(),l=this.targetObj,r=this.targetMethodName;if(!l||!r)return d="Cannot update "+this.toString(b)+" because of no target ("+l+") or targetProp ("+r+") ",this.isWeakConnection&&
this.disconnect(),console.error(d),null;var v=l[r],y=function(E,F,H,J,O,L){H=[E,F,H,J,O,L];f&&(b=f.call(k,E,F),E=H[0]=b);E="function"===typeof v?v.apply(l,H):l[r]=E;k.removeAfterUpdate&&k.disconnect();return E};try{return this.isActive=!0,a?a.call(this,y,b,d):y(b,d)}catch(E){var A=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===typeof this.targetObj.world&&this.targetObj.world();A?A.logError(E,"AttributeConnection>>update: "):console.error("Error when trying to update "+
this+" with value "+b+":\n"+E+"\n"+E.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(b,d){if(!(b&&b.isAttributeConnectionGetter||d&&d.isAttributeConnectionSetter)){var k=this.sourceObj,a=this.sourceAttrName,f=this.privateAttrName(a);k[f]&&console.warn("newAttrName "+f+" already exists.Are there already other connections?");k.hasOwnProperty("doNotSerialize")||(k.doNotSerialize=[]);ch.arr.pushIfNotIncluded(k.doNotSerialize,f);k.hasOwnProperty("doNotCopyProperties")||
(k.doNotCopyProperties=[]);ch.arr.pushIfNotIncluded(k.doNotCopyProperties,f);b&&(k.hasOwnProperty(a)?k.__defineGetter__(f,b):k.__defineGetter__(f,function(){return k.constructor.prototype.__lookupGetter__(a).bind(k)()}));d&&(k.hasOwnProperty(a)?k.__defineSetter__(f,d):k.__defineSetter__(f,function(l){k.constructor.prototype.__lookupSetter__(a).bind(k)(l)}));b||d||!k.hasOwnProperty(a)||(k[f]=k[a]);k.__defineSetter__(a,function(l){var r=k[f];k[f]=l;if(void 0===k.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),
null;k.attributeConnections.forEach(function(v){v&&v.getSourceAttrName()===a&&v.signalOnAssignment&&v.update(l,r)});return l});k.__lookupSetter__(a).isAttributeConnectionSetter=!0;k.__defineGetter__(a,function(){return k[f]});k.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",value:function(b,d,k){if("function"!==typeof k)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(d)){b[this.privateAttrName(d)]=k;var f=function(){return k}}else f=
function(){return Object.getPrototypeOf(b)[d]};b[d]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),r=this[d].originalFunction.apply(this,arguments),v=0;v<l.length;v++){var y=l[v];y.getSourceAttrName()===d&&y.update(arguments[0])}return r};b[d].isOwnProperty=a;b[d].isWrapped=!0;b[d].isConnectionWrapper=!0;Object.defineProperty(b[d],"originalFunction",
{get:f});b[d].toString=function(){return"<Wrapped "+f()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var b=this.sourceAttrName,d=this.privateAttrName(b),k=this.sourceObj;if(k){if(k.__lookupGetter__(b)){if(delete k[b],k.hasOwnProperty(d)){try{k[b]=k[d]}catch(f){}delete k[d]}}else if(k[b]&&k[b].isConnectionWrapper){var a=k[b];delete k[b];k[b]||(k[b]=a.originalFunction)}k.doNotSerialize&&k.doNotSerialize.includes(d)&&(k.doNotSerialize=ch.arr.without(k.doNotSerialize,d),0==k.doNotSerialize.length&&
delete k.doNotSerialize);k.doNotCopyProperties&&k.doNotCopyProperties.includes(d)&&(k.doNotCopyProperties=ch.arr.without(k.doNotCopyProperties,d),0==k.doNotCopyProperties.length&&delete k.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;
for(var d=0,k=b.length;d<k;d++)if(this.isSimilarConnection(b[d]))return b[d];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return ch.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),
this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(d){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],h,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},
{start:221,end:16605})}(void 0);ch.AttributeConnection=MN;ch.AttributeConnection=MN;ch.AttributeConnection=MN;ch.callWhenNotNull=sg;ch.callWhenNotNull=sg;ch.callWhenPathNotNull=Hy;ch.callWhenPathNotNull=Hy;var xoa=Object.freeze({__proto__:null,connect:Li,disconnect:Ek,disconnectAll:fl,once:cv,signal:em,noUpdate:lp,AttributeConnection:MN,callWhenNotNull:sg,callWhenPathNotNull:Hy});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",
{configurable:!0,value:function(){var c=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],"Symbol."+b)},new Map)}(),h=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(c.get(n))return{__expr__:c.get(n)};n=String(n).match(h);return{__expr__:n?'Symbol("'+n[1]+'")':
"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(c,h,n){var b=c.add(this),d=b.currentRev,k=b.currentSnapshot,a=k.entries=[],f=0;h[b.id]=k;c.classHelper.addClassInfo(b,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=
k.next()){var r=$jscomp.makeIterator(l.value);l=r.next().value;r=r.next().value;f++;l=b.snapshotProperty(b.id,l,n.concat("key",String(f)),h,c);r=b.snapshotProperty(b.id,r,n.concat("value",String(f)),h,c);a.push(l,r)}return b.asRefForSerializedObjMap(d)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(c,h,n,b,d){c=c.entries;for(var k=0;k<c.length;k+=2){var a=c[k+1],f=h.recreateProperty("key."+k,c[k],n,b,d.concat("key",k));a=h.recreateProperty("value."+k,a,n,
b,d.concat("value",k));this.set(f,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(c,h,n){var b=c.add(this),d=b.currentRev,k=b.currentSnapshot,a=k.entries=[],f=0;h[b.id]=k;c.classHelper.addClassInfo(b,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=k.next())l=l.value,f++,l=b.snapshotProperty(b.id,l,n.concat("entry",String(f)),h,c),a.push(l);return b.asRefForSerializedObjMap(d)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,
value:function(c,h,n,b,d){c=c.entries;for(var k=0;k<c.length;k++){var a=h.recreateProperty("entry."+k,c[k],n,b,d.concat("key",k));this.add(a)}}});var bW=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");bW.isPrimitive=Iy;bW.isPrimitive=Iy;bW.isPrimitive=Iy;var wj=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");wj.getClassName=fm;wj.getSerializableClassMeta=Vm;wj.locateClass=Pl;wj.arr=Lf;wj.string=Ih;wj.classMetaForSerializationProp="lively.serializer-class-info";
wj.classSuperClassProp=Symbol.for("lively-instance-superclass");wj.classNameProp=Symbol.for("__LivelyClassName__");wj.moduleMetaInClassProp=Symbol.for("lively-module-meta");wj.getClassName=fm;wj.getClassName=fm;wj.getSerializableClassMeta=Vm;wj.getSerializableClassMeta=Vm;wj.locateClass=Pl;wj.locateClass=Pl;var Mv=function(c){this.options=Object.assign({ignoreClassNotFound:!0},c);this[Symbol.for("lively-instance-restorer")]=!0};Mv.prototype.addClassInfo=function(c,h,n){(c=wj.getSerializableClassMeta(h))&&
(n[wj.classMetaForSerializationProp]=c)};Mv.prototype.restoreIfClassInstance=function(c,h){if(h.hasOwnProperty(wj.classMetaForSerializationProp)&&(c=h[wj.classMetaForSerializationProp],c.className)){h=wj.locateClass(c);if(!h||"function"!==typeof h){h="Trying to deserialize instance of "+JSON.stringify(c)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(h);console.error(h);return{isClassPlaceHolder:!0,className:c.className}}return h.hasOwnProperty(Symbol.for("lively-instance-superclass"))?
new h(this):new h}};Mv.sourceModulesInObjRef=function(c){var h=[];(c=c&&c[wj.classMetaForSerializationProp])&&c.module&&h.push(c.module);return h};Mv.sourceModulesIn=function(c){var h=[];Object.keys(c).forEach(function(n){(n=c[n])&&n[wj.classMetaForSerializationProp]&&h.push(n[wj.classMetaForSerializationProp])});return wj.arr.uniqBy(h,function(n,b){var d=n.module,k=b.module;return!d&&!k||d&&!k||!d&&k?n.className===b.className:n.className===b.className&&d.package.name==k.package.name&&d.package.pathInPackage==
k.package.pathInPackage})};$jscomp.global.Object.defineProperties(Mv.prototype,{sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(Mv,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return wj.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return wj.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return wj.classSuperClassProp}},
classNameProperty:{configurable:!0,enumerable:!0,get:function(){return wj.classNameProp}}});wj.ClassHelper=Mv;wj.default=Mv;var Mi=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");Mi.deserializeSpec=Sq;Mi.serializeSpec=mp;Mi.string=Ih;Mi.Closure=Sj;Mi.Path=ci;Mi.obj=dg;Mi.properties=ir;Mi.arr=Lf;Mi.getSerializableClassMeta=Vm;Mi.connect=Li;var Mn=function(c){this.prefix=Object.assign({prefix:"__lv_expr__"},c).prefix+":"};Mn.prototype.isSerializedExpression=
function(c){return 0===c.indexOf(this.prefix)};Mn.prototype.requiredModulesOf__expr__=function(c){return this.isSerializedExpression(c)?(c=this.exprStringDecode(c).bindings)?Object.keys(c):null:null};Mn.prototype.exprStringDecode=function(c){var h=c.indexOf(":");c.slice(0,h);c=c.slice(h+1);for(var n={},b=!1;c&&c.startsWith("{")&&0<=(h=c.indexOf("}:"));){b=!0;var d=c.slice(1,h);c=c.slice(h+2);c.includes("https:")&&c.indexOf("https:")<c.indexOf(":")?(c=c.replace("https:","__HTTP_PLACEHOLDER__"),h=c.indexOf(":")-
20+6,c=c.replace("__HTTP_PLACEHOLDER__","https:")):h=c.indexOf(":");var k=c.slice(0,h);d=d.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var f=$jscomp.makeIterator(a.split(":"));a=f.next().value;f=f.next().value;return{exported:a,local:f}});n[k]=d;c=c.slice(h+1)}return{__expr__:c,bindings:b?n:null}};Mn.prototype.exprStringEncode=function(c){var h=c.bindings;c=String(c.__expr__);if(h)for(var n=Object.keys(h),b=0;b<n.length;b++){var d=n[b],k=h[d];Array.isArray(k)&&
(k=k.map(function(a){return"string"===typeof a?a:a.exported+":"+a.local}).join(","));c="{"+k+"}:"+d+":"+c}return this.prefix+c};Mn.prototype.convert__expr__obj=function(c){console.assert("__expr__"in c,"obj has no property __expr__");return this.prefix+c.__expr__};Mn.prototype.__eval__=function(c,h){return Mi.__eval__(c,h)};Mn.prototype.deserializeExpr=function(c){if(!c.startsWith(this.prefix))throw Error('"'+c+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(c))};
Mn.prototype.deserializeExprObj=function(c){var h=c.__expr__;c=c.bindings;var n={};if(c)for(var b=c?Object.keys(c):[],d=0;d<b.length;d++){var k=b[d],a=c[k];if(lively.FreezerRuntime){var f=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(k));if(!f){var l=lively.FreezerRuntime.fetchStandaloneFor(k);l&&(f=l.exports)}f.exports&&(f=f.exports)}else f=System.get(System.decanonicalize(k));if(!f)throw Error("[lively.serializer] expression eval: bindings specify to import "+k+" but this module is not loaded!\nSource: "+
h);for(k=0;k<a.length;k++){var r=a[k],v=l=void 0;"string"===typeof r?v=l=r:"object"===typeof r&&(l=r.local,v=r.exported);n[l]=f[v];h="var "+l+" = __boundValues__."+l+";\n"+h}}return this.__eval__(h,n)};Ca("a0",Mn);Mi.ExpressionSerializer=Mn;Mi.__eval__=Mi.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();Mi.deserializeSpec=Sq;Mi.deserializeSpec=Sq;Mi.serializeSpec=mp;Mi.serializeSpec=mp;Mi.default=Mn;var xj=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
xj.obj=dg;xj.Plugin=function(){};var cW=function(){};cW.prototype.serializeObject=function(c,h,n,b,d){if("function"!==typeof c.__serialize__)return null;(c=c.__serialize__(n,b,d))&&c.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(c),c=h?n:{__expr__:n});return c};cW.prototype.deserializeObject=function(c,h,n,b){return(h=n.__expr__)?c.expressionSerializer.deserializeExpr(h):null};xj.CustomSerializePlugin=cW;var dW=function(){};dW.prototype.additionallySerialize=function(c,h,
n,b){c.classHelper.addClassInfo(h,h.realObj,n)};dW.prototype.deserializeObject=function(c,h,n,b){return c.classHelper.restoreIfClassInstance(h,n)};xj.ClassPlugin=dW;var r9=function(){};r9.prototype.serializeObject=function(c,h,n,b,d){c&&c.isMorph&&(c.__isBeingSerialized__=!0);return null};xj.SerializationIndicationPlugin=r9;var s9=function(){};s9.prototype.additionallySerialize=function(c,h,n,b){h.realObj&&h.realObj.isMorph&&(h.realObj.__isBeingSerialized__=!1)};xj.SerializationFinishPlugin=s9;var NN=
function(){};NN.prototype.additionallySerialize=function(c,h,n,b){var d=h.realObj;d&&"function"===typeof d.__additionally_serialize__&&d.__additionally_serialize__(n,h,c,b)};NN.prototype.additionallyDeserializeBeforeProperties=function(c,h,n,b,d,k,a){"function"===typeof n.__deserialize__&&n.__deserialize__(d,h,k,c,a)};NN.prototype.additionallyDeserializeAfterProperties=function(c,h,n,b,d,k){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,h,c)};xj.AdditionallySerializePlugin=
NN;var t9=function(){};t9.prototype.propertiesToSerialize=function(c,h,n,b){return(c=h.realObj)&&c.__only_serialize__||null};xj.OnlySerializePropsPlugin=t9;var u9=function(){};u9.prototype.propertiesToSerialize=function(c,h,n,b){c=h.realObj;if(!c||!c.__dont_serialize__)return null;c=xj.obj.mergePropertyInHierarchy(c,"__dont_serialize__");h=[];for(n=0;n<b.length;n++){var d=b[n];c.includes(d)||h.push(d)}return h};xj.DontSerializePropsPlugin=u9;var eW=function(){};eW.prototype.propertiesToSerialize=
function(c,h,n,b){var d=h.realObj;h=d.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!h)return null;c=h.properties;n=h.propertySettings.valueStoreProperty||"_state";h=[];if(d[n]){if(d.__only_serialize__){for(var k=0;k<b.length;k++){d=b[k];var a=c[d];d!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||h.push(d))}return h}n=b.indexOf(n);-1<n&&b.splice(n,1);for(k in c)n=c[k],d=b.indexOf(k),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?
-1<d&&b.splice(d,1):-1===d&&h.push(k);return h.concat(b)}};eW.prototype.additionallyDeserializeBeforeProperties=function(c,h,n,b,d,k,a){var f=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!f)return b;var l=f.order;f=f.propertySettings.valueStoreProperty||"_state";b=d.props;if(b[f])return b;b=xj.obj.clone(b);n.hasOwnProperty(f)||n.initializeProperties();for(d=0;d<l.length;d++)f=l[d],b.hasOwnProperty(f)&&(h.recreatePropertyAndSetProperty(n,b,f,k,c,a),delete b[f]);return b};
xj.LivelyClassPropertiesPlugin=eW;var fW={livelyClassPropertiesPlugin:new xj.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new xj.DontSerializePropsPlugin,onlySerializePropsPlugin:new xj.OnlySerializePropsPlugin,additionallySerializePlugin:new xj.AdditionallySerializePlugin,classPlugin:new xj.ClassPlugin,customSerializePlugin:new xj.CustomSerializePlugin,indicationPlugin:new xj.SerializationIndicationPlugin,finishPlugin:new xj.SerializationFinishPlugin};xj.plugins=fW;xj.plugins=fW;xj.plugins=
fW;var VH=[xj.plugins.indicationPlugin,xj.plugins.customSerializePlugin,xj.plugins.classPlugin,xj.plugins.additionallySerializePlugin,xj.plugins.onlySerializePropsPlugin,xj.plugins.dontSerializePropsPlugin,xj.plugins.livelyClassPropertiesPlugin,xj.plugins.finishPlugin];xj.allPlugins=VH;xj.allPlugins=VH;xj.allPlugins=VH;var bk=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");bk.__additionally_serialize__addObjectFunction=function(c,h,n,b,d){d=void 0===d?[]:d;return function(k,
a,f){f=void 0===f?!1:f;return h.props[k]=f?{value:a,verbatim:f}:{value:c.snapshotProperty(c.id,a,d.concat([k]),n,b)}}};bk.arr=Lf;bk.Path=ci;bk.obj=dg;bk.string=Ih;bk.isPrimitive=Iy;bk.ClassHelper=Mv;bk.ExpressionSerializer=Mn;bk.allPlugins=VH;bk.debugSerialization=!1;bk.debugDeserialization=!1;var Jj=function(c){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},c);this.reset()};Jj.withDefaultPlugins=function(c){return new this(Object.assign({plugins:bk.allPlugins},
c))};Jj.resolveFromSnapshotAndId=function(c,h){return(new this(h)).resolveFromSnapshotAndId(c)};Jj.fromSnapshot=function(c,h){return(new this(h)).readSnapshot(c)};Jj.withObject=function(c,h){h=new this(h);h.add(c);return h};Jj.prototype.reset=function(){this.uuidGen=bk.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var c=this.options;this.classHelper=new bk.ClassHelper(c);this.expressionSerializer=new bk.ExpressionSerializer;c.idPropertyName&&(this.idPropertyName=c.idPropertyName);c.uuidGen&&
(this.uuidGen=c.uuidGen);c.reinitializeIds&&(this.reinitializeIds=c.reinitializeIds);c.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=c.ignoreClassNotFound);var h=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};c.plugins&&c.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&h.serializeObject.push(n);"function"===typeof n.additionallySerialize&&h.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&h.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&h.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&h.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&h.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&h.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&h.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&h.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&h.afterSerialization.push(n)})};Jj.prototype.knowsId=function(c){return!!this._id_ref_map[c]};Jj.prototype.refForId=function(c){return this._id_ref_map[c]};Jj.prototype.resolveToObj=function(c){return(c=this._id_ref_map[c])?c.realObj:void 0};Jj.prototype.ref=
function(c){return this._obj_ref_map.get(c)};Jj.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};Jj.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};Jj.prototype.internalAddRef=function(c){c.realObj&&this._obj_ref_map.set(c.realObj,c);return this._id_ref_map[c.id]=c};Jj.prototype.add=function(c){var h=this;if(!bk.isPrimitive(c)){if(Array.isArray(c))return c.map(function(b){return h.add(b)});var n=c.__serialization_id_property__||this.idPropertyName;
return this.ref(c)||this.internalAddRef(new bk.ObjectRef(c[n]||this.uuidGen(),c,void 0,this.idPropertyName))}};Jj.prototype.snapshot=function(c){var h={};this.plugin_beforeSerialization(h,c);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(h,this);return h=this.plugin_afterSerialization(h,c)};Jj.prototype.snapshotObject=function(c){c=this.add(c).id;var h=this.snapshot(c);return{id:c,snapshot:h}};Jj.prototype.readSnapshot=function(c,h){if(c.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)bk.ObjectRef.fromSnapshot(h,c,this,[],this.idPropertyName);else{h=0;for(var n=Object.keys(c);h<n.length;h++)this.resolveToObj(n[h])||bk.ObjectRef.fromSnapshot(n[h],c,this,[],this.idPropertyName)}return this};Jj.prototype.resolveFromSnapshotAndId=function(c){if(!c.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!c.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var h=c=this.plugin_beforeDeserialization(c),n=h.id;this.readSnapshot(h.snapshot,
n);this.plugin_afterDeserialization(c);return this.resolveToObj(n)};Jj.prototype.plugin_beforeSerialization=function(c,h){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,c,h)};Jj.prototype.plugin_afterSerialization=function(c,h){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,c,h);b&&(c=b)}return c};Jj.prototype.plugin_beforeDeserialization=function(c){for(var h=
0;h<this.plugins.beforeDeserialization.length;h++){var n=this.plugins.beforeDeserialization[h].beforeDeserialization(this,c);n&&(c=n)}return c};Jj.prototype.plugin_afterDeserialization=function(c){for(var h=0;h<this.plugins.afterDeserialization.length;h++)this.plugins.afterDeserialization[h].afterDeserialization(this,c)};Jj.prototype.plugin_serializeObject=function(c,h,n,b){for(var d=0;d<this.plugins.serializeObject.length;d++){var k=this.plugins.serializeObject[d].serializeObject(c,h,this,n,b);if(k)return k}};
Jj.prototype.plugin_propertiesToSerialize=function(c,h,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var d=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,c,h,n);d&&(n=d)}return n};Jj.prototype.plugin_additionallySerialize=function(c,h,n,b){n=this.plugins.additionallySerialize.length?bk.__additionally_serialize__addObjectFunction(c,h,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,
c,h,n)};Jj.prototype.plugin_deserializeObject=function(c,h,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var d=this.plugins.deserializeObject[b].deserializeObject(this,c,h,n);if(d)return d}};Jj.prototype.plugin_additionallyDeserializeBeforeProperties=function(c,h,n,b,d,k){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var f=this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,c,h,n,b,d,k);f&&(n=f)}return n};
Jj.prototype.plugin_additionallyDeserializeAfterProperties=function(c,h,n,b,d){for(var k=0;k<this.plugins.additionallyDeserializeAfterProperties.length;k++)this.plugins.additionallyDeserializeAfterProperties[k].additionallyDeserializeAfterProperties(this,c,h,n,b,d)};bk.ObjectPool=Jj;var xs=function(c,h,n,b){this.id=c;this.idPropertyName=void 0===b?"id":b;this.realObj=h;this.snapshotVersions=[];this.snapshots={};n&&(c=n.rev||0,this.snapshotVersions.push(c),this.snapshots[c]=n)};xs.fromSnapshot=function(c,
h,n,b,d){b=void 0===b?[]:b;c=new this(c,void 0,void 0,d);try{return n.internalAddRef(c).recreateObjFromSnapshot(h,n,b)}catch(k){if(n.options.highlightBuggyMorphs)for(;b.length;){if((h=bk.Path(b).map(function(a,f){return"submorphs"==a?f.filter(function(l){return!l.isHand&&!l.isEpiMorph}):f}).get(n.options.rootObject))&&h.isMorph&&h.world()){h.show(!0);n.options.highlightBuggyMorphs=!1;break}b.pop()}throw k;}};xs.prototype.asRefForSerializedObjMap=function(c){return{__ref__:!0,id:this.id,rev:void 0===
c?"????":c}};xs.prototype.snapshotObject=function(c,h,n){n=void 0===n?[]:n;bk.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,d=this.realObj,k=this.snapshots;if(!d)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var a=d._rev||0;var f=this.asRefForSerializedObjMap(a);bk.arr.pushIfNotIncluded(this.snapshotVersions,
a);if(k[a])return c[b]||(c[b]=k[a]),f;var l=typeof b;"number"===l&&(b=String(b),l="string");if("string"!==l)throw Error("Error snapshoting "+d+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(l=h.plugin_serializeObject(d,!1,c,n))return k[a]=c[b]=l,f;l=Object.getOwnPropertyNames(d);var r={};k=k[a]=c[b]={rev:a,props:r};(a=h.plugin_propertiesToSerialize(this,k,l))&&(l=a);for(a=0;a<l.length;a++){var v=l[a];r[v]={value:this.snapshotProperty(b,d[v],n.concat([v]),c,h)}}h.plugin_additionallySerialize(this,
k,c,n);return f};xs.prototype.snapshotProperty=function(c,h,n,b,d){var k=this;if(bk.isPrimitive(h))return h;var a=d.plugin_serializeObject(h,!0,b,n);if(a)return a;if("function"!==typeof h)return Array.isArray(h)?h.map(function(f,l){return k.snapshotProperty(c,f,n.concat(l),b,d)}):(h=d.add(h))&&h.isObjectRef?h.snapshotObject(b,d,n):h};xs.prototype.recreateObjFromSnapshot=function(c,h,n){if(this.realObj)return this;bk.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var b=c[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var d=b.rev,k;d=d||0;this.snapshotVersions.push(d);this.snapshots[d]=b;(k=h.plugin_deserializeObject(this,b,n))||(k={});"undefined"===typeof k._rev&&"object"===typeof k&&(k._rev=d||0);this.realObj=k;h.internalAddRef(this);if(!k)return this;d=b.props;var a=h.plugin_additionallyDeserializeBeforeProperties(this,k,d,b,c,n);a&&(d=a);if(d)for(var f in d)this.recreatePropertyAndSetProperty(k,
d,f,c,h,n);f=k.__serialization_id_property__||this.idPropertyName;h.reinitializeIds&&k.hasOwnProperty(f)&&(k[f]=h.reinitializeIds(this.id,this));h.plugin_additionallyDeserializeAfterProperties(this,k,b,c,n);return this};xs.prototype.recreatePropertyAndSetProperty=function(c,h,n,b,d,k){try{var a=h[n]||{value:"NON EXISTING"},f=a.value;c[n]=a.verbatim?f:this.recreateProperty(n,f,b,d,k.concat(n))}catch(r){try{var l=String(c)}catch(v){l="[some "+c.constructor.name+"]"}r.__seen?console.error("Error deserializing property "+
n+" of "+l):(c=n+" of "+l+" ("+JSON.stringify(f)+")",console.error("Error deserializing property "+c),r.__seen=!0);throw r;}};xs.prototype.recreateProperty=function(c,h,n,b,d){var k=this;if("string"===typeof h&&b.expressionSerializer.isSerializedExpression(h))return b.expressionSerializer.deserializeExpr(h);if(bk.isPrimitive(h))return h;if(Array.isArray(h))return h.map(function(a,f){return k.recreateProperty(f,a,n,b,d.concat(f))});c=h.__serialization_id_property__||this.idPropertyName;return(b.refForId(h[c])||
bk.ObjectRef.fromSnapshot(h[c],n,b,d,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(xs.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var c=bk.arr.last(this.snapshotVersions);else c=0,this.snapshotVersions.push(c);return this.snapshots[c]||(this.snapshots[c]={rev:c,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
bk.arr.last(this.snapshotVersions):0}}});bk.ObjectRef=xs;var Gf=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Gf.referenceGraph=pD;Gf.isReference=qD;Gf.referencesOfRef=fG;Gf.referencesOfId=rD;Gf.referencesInArray=aK;Gf.moduleOfId=sD;Gf.referencesAndClassNamesOfId=tD;Gf.classNameOfId=uD;Gf.findPathFromToId=Nh;Gf.lookupPath=vD;Gf.modifyProperty=wD;Gf.removeUnreachableObjects=ho;Gf.clearDanglingConnections=LA;Gf.requiredModulesOfSnapshot=np;Gf.ClassHelper=Mv;Gf.Path=
ci;Gf.obj=dg;Gf.arr=Lf;Gf.graph=tx;Gf.ExpressionSerializer=Mn;Gf.referenceGraph=pD;Gf.referenceGraph=pD;Gf.isReference=qD;Gf.isReference=qD;Gf.referencesOfRef=fG;Gf.referencesOfRef=fG;Gf.referencesOfId=rD;Gf.referencesOfId=rD;Gf.moduleOfId=sD;Gf.moduleOfId=sD;Gf.referencesAndClassNamesOfId=tD;Gf.referencesAndClassNamesOfId=tD;Gf.classNameOfId=uD;Gf.classNameOfId=uD;Gf.findPathFromToId=Nh;Gf.findPathFromToId=Nh;Gf.lookupPath=vD;Gf.lookupPath=vD;Gf.modifyProperty=wD;Gf.modifyProperty=wD;Gf.removeUnreachableObjects=
ho;Gf.removeUnreachableObjects=ho;Gf.clearDanglingConnections=LA;Gf.clearDanglingConnections=LA;Gf.defaultExprSerializer=new Gf.ExpressionSerializer;Gf.requiredModulesOfSnapshot=np;Gf.requiredModulesOfSnapshot=np;var v9,xD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,im=v9={};try{var Jy="function"==typeof setTimeout?setTimeout:Tq}catch(c){Jy=Tq}try{var Ky="function"==typeof clearTimeout?clearTimeout:MA}catch(c){Ky=MA}!0;var NA,Ww=[],yD=!1,cK=-1;im.nextTick=function(c){var h=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];Ww.push(new gG(c,h));1!==Ww.length||yD||bK(zD)};gG.prototype.run=function(){(this||xD).fun.apply(null,(this||xD).array)};im.title="browser";im.browser=!0;im.env={};im.argv=[];im.version="";im.versions={};im.on=jt;im.addListener=jt;im.once=jt;im.off=jt;im.removeListener=jt;im.removeAllListeners=jt;im.emit=jt;im.prependListener=jt;im.prependOnceListener=jt;im.listeners=function(c){return[]};im.binding=
function(c){throw Error("process.binding is not supported");};im.cwd=function(){return"/"};im.chdir=function(c){throw Error("process.chdir is not supported");};im.umask=function(){return 0};var bj=v9,F_={},E_=!1,H_={},G_=!1,dv={},I_=!1,K_={},J_=!1,M_={},L_=!1,O_={},N_=!1,Q_={},P_=!1,S_={},R_=!1,U_={},T_=!1,W_={},V_=!1,Y_={},X_=!1,$_={},Z_=!1,b0={},a0=!1,d0={},c0=!1,f0={},e0=!1,h0={},g0=!1,j0={},i0=!1,l0={},k0=!1,n0={},m0=!1,p0={},o0=!1,r0={},q0=!1,t0={},s0=!1,v0={},u0=!1,x0={},w0=!1,yoa={},zoa=yoa=
function(c){c.prototype[Symbol.iterator]=function n(){var b=this,d;return $jscomp.generator.createGenerator(n,function(k){1==k.nextAddress&&(d=b.head);if(3!=k.nextAddress)return d?k.yield(d.value,3):k.jumpTo(0);d=d.next;return k.jumpTo(2)})}},w9={};w9=Pf;Pf.Node=lt;Pf.create=Pf;Pf.prototype.removeNode=function(c){if(c.list!==this)throw Error("removing node which does not belong to this list");var h=c.next,n=c.prev;h&&(h.prev=n);n&&(n.next=h);c===this.head&&(this.head=h);c===this.tail&&(this.tail=
n);c.list.length--;c.next=null;c.prev=null;c.list=null;return h};Pf.prototype.unshiftNode=function(c){if(c!==this.head){c.list&&c.list.removeNode(c);var h=this.head;c.list=this;if(c.next=h)h.prev=c;this.head=c;this.tail||(this.tail=c);this.length++}};Pf.prototype.pushNode=function(c){if(c!==this.tail){c.list&&c.list.removeNode(c);var h=this.tail;c.list=this;if(c.prev=h)h.next=c;this.tail=c;this.head||(this.head=c);this.length++}};Pf.prototype.push=function(){for(var c=0,h=arguments.length;c<h;c++)this.tail=
new lt(arguments[c],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};Pf.prototype.unshift=function(){for(var c=0,h=arguments.length;c<h;c++)this.head=new lt(arguments[c],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};Pf.prototype.pop=function(){if(this.tail){var c=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return c}};Pf.prototype.shift=function(){if(this.head){var c=this.head.value;
(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return c}};Pf.prototype.forEach=function(c,h){h=h||this;for(var n=this.head,b=0;null!==n;b++)c.call(h,n.value,b,this),n=n.next};Pf.prototype.forEachReverse=function(c,h){h=h||this;for(var n=this.tail,b=this.length-1;null!==n;b--)c.call(h,n.value,b,this),n=n.prev};Pf.prototype.get=function(c){for(var h=0,n=this.head;null!==n&&h<c;h++)n=n.next;if(h===c&&null!==n)return n.value};Pf.prototype.getReverse=function(c){for(var h=
0,n=this.tail;null!==n&&h<c;h++)n=n.prev;if(h===c&&null!==n)return n.value};Pf.prototype.map=function(c,h){h=h||this;for(var n=new Pf,b=this.head;null!==b;)n.push(c.call(h,b.value,this)),b=b.next;return n};Pf.prototype.mapReverse=function(c,h){h=h||this;for(var n=new Pf,b=this.tail;null!==b;)n.push(c.call(h,b.value,this)),b=b.prev;return n};Pf.prototype.reduce=function(c,h){var n=this.head;if(1<arguments.length)var b=h;else if(this.head)n=this.head.next,b=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");
for(var d=0;null!==n;d++)b=c(b,n.value,d),n=n.next;return b};Pf.prototype.reduceReverse=function(c,h){var n=this.tail;if(1<arguments.length)var b=h;else if(this.tail)n=this.tail.prev,b=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;null!==n;d--)b=c(b,n.value,d),n=n.prev;return b};Pf.prototype.toArray=function(){for(var c=Array(this.length),h=0,n=this.head;null!==n;h++)c[h]=n.value,n=n.next;return c};Pf.prototype.toArrayReverse=function(){for(var c=
Array(this.length),h=0,n=this.tail;null!==n;h++)c[h]=n.value,n=n.prev;return c};Pf.prototype.slice=function(c,h){h=h||this.length;0>h&&(h+=this.length);c=c||0;0>c&&(c+=this.length);var n=new Pf;if(h<c||0>h)return n;0>c&&(c=0);h>this.length&&(h=this.length);for(var b=0,d=this.head;null!==d&&b<c;b++)d=d.next;for(;null!==d&&b<h;b++,d=d.next)n.push(d.value);return n};Pf.prototype.sliceReverse=function(c,h){h=h||this.length;0>h&&(h+=this.length);c=c||0;0>c&&(c+=this.length);var n=new Pf;if(h<c||0>h)return n;
0>c&&(c=0);h>this.length&&(h=this.length);for(var b=this.length,d=this.tail;null!==d&&b>h;b--)d=d.prev;for(;null!==d&&b>c;b--,d=d.prev)n.push(d.value);return n};Pf.prototype.splice=function(c,h,n){for(var b=[],d=2;d<arguments.length;++d)b[d-2]=arguments[d];c>this.length&&(c=this.length-1);0>c&&(c=this.length+c);d=0;for(var k=this.head;null!==k&&d<c;d++)k=k.next;var a=[];for(d=0;k&&d<h;d++)a.push(k.value),k=this.removeNode(k);null===k&&(k=this.tail);k!==this.head&&k!==this.tail&&(k=k.prev);for(d=0;d<
b.length;d++){var f=b[d];k=k===this.head?new lt(f,null,k,this):new lt(f,k,k.next,this);null===k.next&&(this.tail=k);null===k.prev&&(this.head=k);this.length++}return a};Pf.prototype.reverse=function(){for(var c=this.head,h=this.tail,n=c;null!==n;n=n.prev){var b=n.prev;n.prev=n.next;n.next=b}this.head=h;this.tail=c;return this};try{zoa(Pf)}catch(c){}var Aoa={},Boa=w9,SB=Symbol("max"),kr=Symbol("length"),SE=Symbol("lengthCalculator"),WH=Symbol("allowStale"),TB=Symbol("maxAge"),yx=Symbol("dispose"),
x9=Symbol("noDisposeOnSet"),Nn=Symbol("lruList"),Lt=Symbol("cache"),y9=Symbol("updateAgeOnGet"),gW=function(){return 1},no=function(c){"number"===typeof c&&(c={max:c});c||(c={});if(c.max&&("number"!==typeof c.max||0>c.max))throw new TypeError("max must be a non-negative number");this[SB]=c.max||Infinity;var h=c.length||gW;this[SE]="function"!==typeof h?gW:h;this[WH]=c.stale||!1;if(c.maxAge&&"number"!==typeof c.maxAge)throw new TypeError("maxAge must be a number");this[TB]=c.maxAge||0;this[yx]=c.dispose;
this[x9]=c.noDisposeOnSet||!1;this[y9]=c.updateAgeOnGet||!1;this.reset()};no.prototype.rforEach=function(c,h){h=h||this;for(var n=this[Nn].tail;null!==n;){var b=n.prev;z9(this,c,n,h);n=b}};no.prototype.forEach=function(c,h){h=h||this;for(var n=this[Nn].head;null!==n;){var b=n.next;z9(this,c,n,h);n=b}};no.prototype.keys=function(){return this[Nn].toArray().map(function(c){return c.key})};no.prototype.values=function(){return this[Nn].toArray().map(function(c){return c.value})};no.prototype.reset=function(){var c=
this;this[yx]&&this[Nn]&&this[Nn].length&&this[Nn].forEach(function(h){return c[yx](h.key,h.value)});this[Lt]=new Map;this[Nn]=new Boa;this[kr]=0};no.prototype.dump=function(){var c=this;return this[Nn].map(function(h){return ON(c,h)?!1:{k:h.key,v:h.value,e:h.now+(h.maxAge||0)}}).toArray().filter(function(h){return h})};no.prototype.dumpLru=function(){return this[Nn]};no.prototype.set=function(c,h,n){if((n=n||this[TB])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var b=n?Date.now():
0,d=this[SE](h,c);if(this[Lt].has(c)){if(d>this[SB])return TE(this,this[Lt].get(c)),!1;var k=this[Lt].get(c).value;if(this[yx]&&!this[x9])this[yx](c,k.value);k.now=b;k.maxAge=n;k.value=h;this[kr]+=d-k.length;k.length=d;this.get(c);XH(this);return!0}n=new Coa(c,h,d,b,n);if(n.length>this[SB]){if(this[yx])this[yx](c,h);return!1}this[kr]+=n.length;this[Nn].unshift(n);this[Lt].set(c,this[Nn].head);XH(this);return!0};no.prototype.has=function(c){if(!this[Lt].has(c))return!1;c=this[Lt].get(c).value;return!ON(this,
c)};no.prototype.get=function(c){return hW(this,c,!0)};no.prototype.peek=function(c){return hW(this,c,!1)};no.prototype.pop=function(){var c=this[Nn].tail;if(!c)return null;TE(this,c);return c.value};no.prototype.del=function(c){TE(this,this[Lt].get(c))};no.prototype.load=function(c){this.reset();for(var h=Date.now(),n=c.length-1;0<=n;n--){var b=c[n],d=b.e||0;0===d?this.set(b.k,b.v):(d-=h,0<d&&this.set(b.k,b.v,d))}};no.prototype.prune=function(){var c=this;this[Lt].forEach(function(h,n){return hW(c,
n,!1)})};$jscomp.global.Object.defineProperties(no.prototype,{max:{configurable:!0,enumerable:!0,set:function(c){if("number"!==typeof c||0>c)throw new TypeError("max must be a non-negative number");this[SB]=c||Infinity;XH(this)},get:function(){return this[SB]}},allowStale:{configurable:!0,enumerable:!0,set:function(c){this[WH]=!!c},get:function(){return this[WH]}},maxAge:{configurable:!0,enumerable:!0,set:function(c){if("number"!==typeof c)throw new TypeError("maxAge must be a non-negative number");
this[TB]=c;XH(this)},get:function(){return this[TB]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(c){var h=this;"function"!==typeof c&&(c=gW);c!==this[SE]&&(this[SE]=c,this[kr]=0,this[Nn].forEach(function(n){n.length=h[SE](n.value,n.key);h[kr]+=n.length}));XH(this)},get:function(){return this[SE]}},length:{configurable:!0,enumerable:!0,get:function(){return this[kr]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[Nn].length}}});var hW=function(c,h,n){if(h=c[Lt].get(h)){var b=
h.value;if(ON(c,b)){if(TE(c,h),!c[WH])return}else n&&(c[y9]&&(h.value.now=Date.now()),c[Nn].unshiftNode(h));return b.value}},ON=function(c,h){if(!h||!h.maxAge&&!c[TB])return!1;var n=Date.now()-h.now;return h.maxAge?n>h.maxAge:c[TB]&&n>c[TB]},XH=function(c){if(c[kr]>c[SB])for(var h=c[Nn].tail;c[kr]>c[SB]&&null!==h;){var n=h.prev;TE(c,h);h=n}},TE=function(c,h){if(h){var n=h.value;if(c[yx])c[yx](n.key,n.value);c[kr]-=n.length;c[Lt].delete(n.key);c[Nn].removeNode(h)}},Coa=function(c,h,n,b,d){this.key=
c;this.value=h;this.length=n;this.now=b;this.maxAge=d||0},z9=function(c,h,n,b){var d=n.value;ON(c,d)&&(TE(c,n),c[WH]||(d=void 0));d&&h.call(b,d.value,d.key,c)},ofa=Aoa=no,HR={},y0=!1,IR={},z0=!1,B0={},A0=!1,D0={},C0=!1,F0={},E0=!1,H0={},G0=!1,J0={},I0=!1,L0={},K0=!1,N0={},M0=!1,P0={},O0=!1,R0={},Q0=!1,T0={},S0=!1,V0={},U0=!1,X0={},W0=!1,Z0={},Y0=!1,a1={},$0=!1,c1={},b1=!1,e1={},d1=!1,g1={},f1=!1,A9={},B9=!1,YH=function(){if(B9)return A9;B9=!0;var c=Ly();return A9={re:c.re,src:c.src,tokens:c.t,SEMVER_SPEC_VERSION:AD().SEMVER_SPEC_VERSION,
SemVer:pk(),compareIdentifiers:Do().compareIdentifiers,rcompareIdentifiers:Do().rcompareIdentifiers,parse:kt(),valid:Wb(),clean:yi(),inc:op(),diff:Xp(),major:dK(),minor:JR(),patch:FD(),prerelease:BD(),compare:un(),rcompare:FR(),compareLoose:gv(),compareBuild:CD(),sort:KR(),rsort:My(),gt:ev(),lt:Ny(),eq:PA(),neq:Lk(),gte:DD(),lte:Vr(),cmp:vn(),coerce:GR(),Comparator:ED(),Range:Uq(),satisfies:fv(),toComparators:QA(),maxSatisfying:hG(),minSatisfying:RA(),minVersion:Yp(),validRange:Vq(),outside:Xk(),
gtr:GD(),ltr:LR(),intersects:MR(),simplifyRange:eK(),subset:Og()}}(),Uf=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");Uf.normalizeOptions=pp;Uf.normalizeMigrations=function(c){c=void 0===c?[]:c;return{before:c.filter(function(h){return"function"===typeof h.snapshotConverter}),after:c.filter(function(h){return"function"===typeof h.objectConverter})}};Uf.runMigrations=function(c,h,n,b){for(var d=0;d<c.length;d++){var k=c[d];try{n=k[h](n,b)}catch(a){console.error("migration "+k.name+
" failed:"),console.error(a)}}return n};Uf.serialize=mt;Uf.deserialize=si;Uf.deserializeWithMigrations=Oy;Uf.copy=Eo;Uf.ObjectPool=Jj;Uf.serializerVersion="0.1.3";Uf.requiredModulesOfSnapshot=np;Uf.removeUnreachableObjects=ho;Uf.clearDanglingConnections=LA;Uf.allPlugins=VH;Uf.semver=YH;Uf.normalizeOptions=pp;Uf.normalizeOptions=pp;Uf.majorAndMinorVersionRe=/\.[^\.]+$/;Uf.ObjectRef=xs;Uf.ObjectRef=xs;Uf.ObjectPool=Jj;Uf.ObjectPool=Jj;Uf.requiredModulesOfSnapshot=np;Uf.requiredModulesOfSnapshot=np;
Uf.removeUnreachableObjects=ho;Uf.removeUnreachableObjects=ho;Uf.serialize=mt;Uf.serialize=mt;Uf.deserialize=si;Uf.deserialize=si;Uf.deserializeWithMigrations=Oy;Uf.deserializeWithMigrations=Oy;Uf.copy=Eo;Uf.copy=Eo;Uf.ExpressionSerializer=Mn;Uf.serializeSpec=mp;Uf.deserializeSpec=Sq;Uf.getSerializableClassMeta=Vm;Uf.locateClass=Pl;Uf.getClassName=fm;Uf.ExpressionSerializer=Mn;Uf.ExpressionSerializer=Mn;Uf.getSerializableClassMeta=Vm;Uf.getSerializableClassMeta=Vm;Uf.locateClass=Pl;Uf.locateClass=
Pl;Uf.serializeSpec=mp;Uf.serializeSpec=mp;Uf.deserializeSpec=Sq;Uf.deserializeSpec=Sq;Uf.getClassName=fm;Uf.getClassName=fm;var Doa=Object.freeze({__proto__:null,normalizeOptions:pp,ObjectRef:xs,ObjectPool:Jj,requiredModulesOfSnapshot:np,removeUnreachableObjects:ho,serialize:mt,deserialize:si,deserializeWithMigrations:Oy,copy:Eo,ExpressionSerializer:Mn,getSerializableClassMeta:Vm,locateClass:Pl,serializeSpec:mp,deserializeSpec:Sq,getClassName:fm}),Eoa={},pfa=Object.prototype.toString,iW=Eoa=Array.isArray||
iG,Foa={},ZH=Foa="2",NR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,C9={};wn.NONE=0;wn.VTEXT=1;wn.VNODE=2;wn.WIDGET=3;wn.PROPS=4;wn.ORDER=5;wn.INSERT=6;wn.REMOVE=7;wn.THUNK=8;C9=wn;wn.prototype.version=ZH;wn.prototype.type="VirtualPatch";var zx=C9,Goa={},$H=Goa=function(c){return c&&"VirtualNode"===c.type&&c.version===ZH},Hoa={},PN=Hoa=function(c){return c&&"VirtualText"===c.type&&c.version===ZH},Ioa={},Gz=Ioa=function(c){return c&&"Widget"===c.type},Joa={},aI=
Joa=function(c){return c&&"Thunk"===c.type},Koa={},qfa=$H,rfa=PN,sfa=Gz,D9=Koa=function(c,h){var n=c,b=h;aI(h)&&(b=fK(h,c));aI(c)&&(n=fK(c,null));return{a:n,b:b}},Loa={},QN=Loa=function(c){return"object"===typeof c&&null!==c},Moa={},bI=Moa=function(c){return c&&("function"===typeof c.hook&&!c.hasOwnProperty("hook")||"function"===typeof c.unhook&&!c.hasOwnProperty("unhook"))},E9={},h1=QN,tfa=bI;E9=gK;var F9={},wfa=iW,ol=zx,SA=$H,i1=PN,kK=Gz,jK=aI,vfa=D9,ufa=E9;F9=iK;var Noa={},Ooa=Noa=F9,Poa=Object.freeze({}),
G9="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qoa={},H9="undefined"!==typeof G9?G9:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var jW=document;else(jW=H9["__GLOBAL_DOCUMENT_CACHE@4"])||(jW=H9["__GLOBAL_DOCUMENT_CACHE@4"]=Poa);var I9=Qoa=jW,Roa={},j1=bI,J9=Roa=function(c,h,n){for(var b in h){var d=h[b];if(void 0===d)lK(c,b,d,n);else if(j1(d))lK(c,b,d,n),d.hook&&d.hook(c,b,n?n[b]:void 0);else if(QN(d)){var k=void 0,a=void 0,f=c,l=b,r=
n?n[l]:void 0;if("attributes"===l)for(a in d)k=d[a],void 0===k?f.removeAttribute(a):f.setAttribute(a,k);else if(r&&QN(r)&&mK(r)!==mK(d))f[l]=d;else for(k in QN(f[l])||(f[l]={}),a="style"===l?"":void 0,d)r=d[k],f[l][k]=void 0===r?a:r}else c[b]=d}},Soa={},k1=I9,Bfa=J9,Afa=$H,zfa=PN,yfa=Gz,xfa=D9,K9=Soa=mG,Toa={},Uoa=Toa=function(c,h){return Gz(c)&&Gz(h)?"name"in c&&"name"in h?c.id===h.id:c.init===h.init:!1},Voa={},Cfa={},Woa=Voa=function(c,h,n,b){return n&&0!==n.length?(n.sort(OR),nK(c,h,n,b,0)):{}},
L9={},Dfa=Gz;L9=function(c,h,n){var b=c.vNode,d=c.patch;switch(c.type){case zx.REMOVE:return(d=h.parentNode)&&d.removeChild(h),nG(h,b),null;case zx.INSERT:return d=n.render(d,n),h&&h.appendChild(d),h;case zx.VTEXT:return 3===h.nodeType?(h.replaceData(0,h.length,d.text),d=h):(b=h.parentNode,d=n.render(d,n),b&&d!==h&&b.replaceChild(d,h)),d;case zx.WIDGET:return d=(c=Uoa(b,d))?d.update(b,h)||h:n.render(d,n),(n=h.parentNode)&&d!==h&&n.replaceChild(d,h),c||nG(h,b),d;case zx.VNODE:return b=h.parentNode,
d=n.render(d,n),b&&d!==h&&b.replaceChild(d,h),d;case zx.ORDER:b=h.childNodes;n={};for(var k,a=0;a<d.removes.length;a++)k=d.removes[a],c=b[k.from],k.key&&(n[k.key]=c),h.removeChild(c);a=b.length;for(var f=0;f<d.inserts.length;f++)k=d.inserts[f],c=n[k.key],h.insertBefore(c,k.to>=a++?null:b[k.to]);return h;case zx.PROPS:return J9(h,d,b.properties),h;case zx.THUNK:return d=n.patch(h,d,n),h&&d&&h!==d&&h.parentNode&&h.parentNode.replaceChild(d,h),d;default:return h}};var M9={},Gfa=I9,Hfa=iW,Efa=K9,Ffa=
Woa,l1=L9;M9=pK;var Xoa={},Yoa=Xoa=M9,hv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,N9={},Lfa=$H,Mfa=Gz,Nfa=aI,Kfa=bI;N9=oG;var Ifa={},Jfa=[];oG.prototype.version=ZH;oG.prototype.type="VirtualNode";var kW=N9,Ofa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O9={};O9=pG;pG.prototype.version=ZH;pG.prototype.type="VirtualText";var lW=O9,P9={};P9=function(c){var h=String.prototype.split,n=/()??/.exec("")[1]===c;return function(b,
d,k){if("[object RegExp]"!==Object.prototype.toString.call(d))return h.call(b,d,k);var a=[],f=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),l=0;d=new RegExp(d.source,f+"g");var r,v;b+="";n||(r=new RegExp("^"+d.source+"$(?!\\s)",f));for(k=k===c?4294967295:k>>>0;v=d.exec(b);){f=v.index+v[0].length;if(f>l){a.push(b.slice(l,v.index));!n&&1<v.length&&v[0].replace(r,function(){for(var A=1;A<arguments.length-2;A++)arguments[A]===c&&(v[A]=c)});1<v.length&&v.index<b.length&&
Array.prototype.push.apply(a,v.slice(1));var y=v[0].length;l=f;if(a.length>=k)break}d.lastIndex===v.index&&d.lastIndex++}l===b.length?(y||!d.test(""))&&a.push(""):a.push(b.slice(l));return a.length>k?a.slice(0,k):a}}();var Zoa={},$oa=P9,apa=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,bpa=/^\.|#/,cpa=Zoa=function(c,h){if(!c)return"DIV";var n=!h.hasOwnProperty("id");c=$oa(c,apa);var b=null;bpa.test(c[1])&&(b="DIV");var d,k;for(k=0;k<c.length;k++)if(d=c[k]){var a=d.charAt(0);if(b)if("."===a){var f=f||[];
f.push(d.substring(1,d.length))}else"#"===a&&n&&(h.id=d.substring(1,d.length));else b=d}f&&(h.className&&f.push(h.className),h.className=f.join(" "));return h.namespace?b:b.toUpperCase()},Q9={};Q9=ID;ID.prototype.hook=function(c,h){c[h]!==this.value&&(c[h]=this.value)};var dpa=Q9,R9="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,S9={},mW="undefined"!==typeof window?window:"undefined"!==typeof R9?R9:{};S9=function(c,h){return c in mW?mW[c]:mW[c]=h};var T9={},U9=S9;
T9=function(c,h,n){var b="__INDIVIDUAL_ONE_VERSION_"+c,d=U9(b+"_ENFORCE_SINGLETON",h);if(d!==h)throw Error("Can only have one copy of "+c+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+h);return U9(b,n)};var V9={};T9("ev-store","7");V9=function(c){var h=c["__EV_STORE_KEY@7"];h||(h=c["__EV_STORE_KEY@7"]={});return h};var W9={},X9=V9;W9=TA;TA.prototype.hook=function(c,h){c=X9(c);h=h.substr(3);c[h]=this.value};TA.prototype.unhook=function(c,h){c=X9(c);h=h.substr(3);
c[h]=void 0};var Y9={},n1=iW,m1=lW,Pfa=$H,Qfa=PN,Rfa=Gz,Sfa=aI,epa=W9;Y9=function(c,h,n){var b=[],d;if(d=!n)d="string"===typeof h||n1(h)||qG(h);if(d){n=h;var k={}}k=k||h||{};c=cpa(c,k);if(k.hasOwnProperty("key")){var a=k.key;k.key=void 0}if(k.hasOwnProperty("namespace")){var f=k.namespace;k.namespace=void 0}"INPUT"!==c||f||!k.hasOwnProperty("value")||void 0===k.value||bI(k.value)||(k.value=dpa(k.value));h=k;for(var l in h)h.hasOwnProperty(l)&&(d=h[l],bI(d)||"ev-"===l.substr(0,3)&&(h[l]=epa(d)));void 0!==
n&&null!==n&&UA(n,b,c,k);return new kW(c,k,b,a,f)};var fpa={},gpa=fpa=Y9,Z9={};Z9=K9;var hpa={},cI=hpa={diff:Ooa,patch:Yoa,h:gpa,create:Z9,VNode:kW,VText:lW},ipa={},jpa=ipa={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",
charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",
formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",
mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",
size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},$9={};$9={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,
attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,
descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusHighlight:null,focusable:null,"font-family":null,"font-size":null,
"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,"in":null,in2:null,initialVisibility:null,intercept:null,
k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:null,
mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,patternContentUnits:null,patternTransform:null,
patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,role:null,rotate:null,rx:null,ry:null,scale:null,
seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,"stroke-width":null,surfaceScale:null,
syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,"units-per-em":null,
"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink","xlink:role":"http://www.w3.org/1999/xlink",
"xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var kpa={},Ufa=kW,o1=lW,nW,p1=jpa,Tfa=$9,lpa=kpa=function(c,h){if(!c)return Xw(document.createTextNode(""));
if("string"===typeof c){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");nW=nW||new DOMParser;c=nW.parseFromString(c,"text/html");c=c.body.firstChild?c.getElementsByTagName("body")[0].firstChild:c.head.firstChild&&("TITLE"!==c.head.firstChild.tagName||c.title)?c.head.firstChild:c.firstChild&&"HTML"!==c.firstChild.tagName?c.firstChild:document.createTextNode("")}if("object"!==typeof c||!c||!c.nodeType)throw Error("invalid dom node",
c);return Xw(c,h)},zi=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");zi.styleProps=Ej;zi.addTransform=rG;zi.addTransformOrigin=function(c,h){if(c=c.origin)h.transformOrigin=c.x+"px "+c.y+"px"};zi.addDisplay=function(c,h){c=c.visible;null!=c&&(h.display=c?"":"none")};zi.addBorderRadius=function(c,h){var n=c.borderRadiusLeft,b=c.borderRadiusRight,d=c.borderRadiusBottom;c=c.borderRadiusTop;h.borderRadius=c+"px "+c+"px "+d+"px "+d+"px / "+n+"px "+b+"px "+b+"px "+
n+"px"};zi.addBorder=function(c,h){var n=c.borderWidthLeft,b=c.borderColorLeft,d=c.borderStyleLeft,k=c.borderWidthRight,a=c.borderColorRight,f=c.borderStyleRight,l=c.borderColor,r=c.borderWidthBottom,v=c.borderColorBottom,y=c.borderStyleBottom,A=c.borderWidthTop,E=c.borderColorTop;c=c.borderStyleTop;var F=function(H){return zi.bowser.safari?zi.string.camelize(H):H};h[F("border-left-style")]=""+d;h[F("border-right-style")]=""+f;h[F("border-bottom-style")]=""+y;h[F("border-top-style")]=""+c;h[F("border-left-width")]=
n+"px";h[F("border-right-width")]=k+"px";h[F("border-bottom-width")]=r+"px";h[F("border-top-width")]=A+"px";h[F("border-top-color")]=E?E.toString():"transparent";h[F("border-right-color")]=a?a.toString():"transparent";h[F("border-bottom-color")]=v?v.toString():"transparent";h[F("border-left-color")]=b?b.toString():"transparent";l&&l.isGradient&&(h["border-image"]=l.toString())};zi.addFill=function(c,h){(c=c.fill)?c.isGradient?h.backgroundImage=c.toString():h.background=c.toString():h.background=zi.Color.transparent.toString()};
zi.addExtentStyle=function(c,h){c=c.extent;h.width=c.x+"px";h.height=c.y+"px"};zi.shadowCss=function(c){return c.dropShadow?c.dropShadow.toFilterCss():""};zi.addShadowStyle=function(c,h){c.isSvgMorph||c.isImage?h.filter=zi.shadowCss(c):(c=c.dropShadow)&&c.fast||c&&c.inset?h.boxShadow=c?c.toCss():"none":h.filter=c?c.toFilterCss():""};zi.addSvgAttributes=Py;zi.getSvgVertices=Qy;zi.addPathAttributes=Ry;zi.addSvgBorderStyle=function(c,h){var n=c.borderStyle.valueOf();"dashed"===n?(c=c.borderWidth.valueOf(),
h["stroke-dasharray"]=1.61*c+" "+c):"dotted"===n&&(h["stroke-dasharray"]="1 "+2*c.borderWidth.valueOf(),h["stroke-linecap"]="round",h["stroke-linejoin"]="round");return h};zi.Color=ng;zi.string=Ih;zi.bowser=vs;zi.styleProps=Ej;zi.styleProps=Ej;zi.addTransform=rG;zi.addTransform=rG;zi.addSvgAttributes=Py;zi.addSvgAttributes=Py;zi.getSvgVertices=Qy;zi.getSvgVertices=Qy;zi.addPathAttributes=Ry;zi.addPathAttributes=Ry;var Le=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");
Le.defaultStyle=Fj;Le.MorphAfterRenderHook=function(c,h){this.morph=c;this.renderer=h};Le.Animation=function(c){this.morph=c};Le.SvgAnimation=De;Le.defaultAttributes=Yw;Le.svgAttributes=Xd;Le.pathAttributes=Zw;Le.renderGradient=Sy;Le.initDOMState=function(c,h){c.rootNode.appendChild(c.domNode);c.ensureDefaultCSS().then(function(){return Le.promise.delay(500)}).then(function(){return h.env.fontMetric&&h.env.fontMetric.reset()}).then(function(){return h.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=
(n.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};Le.renderMorph=Hc;Le.renderSubTree=Ty;Le.renderRootMorph=ia;Le.vdom=cI;Le.parser=lpa;Le.num=Em;Le.obj=dg;Le.arr=Lf;Le.properties=ir;Le.promise=Hg;Le.Color=ng;Le.RadialGradient=vp;Le.pt=di;Le.Point=tg;Le.LinearGradient=kn;Le.rect=Dl;Le.config=Ul;Le.styleProps=Ej;Le.addSvgAttributes=Py;Le.addPathAttributes=Ry;Le.bowser=vs;var RN=Le.vdom;Le.h=RN.h;Le.diff=RN.diff;Le.patch=
RN.patch;Le.createNode=RN.create;Le.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Le.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Le.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var ys=Ca("bk",function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=h.hasOwnProperty("ShadowObject")&&"function"===typeof h.ShadowObject?h.ShadowObject:h.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Le.obj.isBoolean(b)&&(b=Le.config.defaultShadow);var d=b;b=d.rotation;var k=d.distance,
a=d.blur,f=d.color,l=d.morph,r=d.inset,v=d.spread;d=d.fast;this.rotation=Le.obj.isNumber(b)?b:45;this.distance=Le.obj.isNumber(k)?k:2;this.blur=Le.obj.isNumber(a)?a:6;this.inset=r||!1;this.spread=v||0;this.color=f||Le.Color.gray.darker();this.morph=l;this.fast=d}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),d=b.distance,k=b.rotation,a=b.color,f=b.inset,l=b.blur,r=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:d,rotation:k,color:a,inset:f,blur:l,spread:r,fast:b}).map(function(v){var y=$jscomp.makeIterator(v);v=y.next().value;y=y.next().value;return v+":"+y})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(b){return new Le.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},b))}},{key:"toCss",value:function(){var b=this.color,d=this.inset,k=this.blur,a=this.spread,f=Le.Point.polar(this.distance,Le.num.toRadians(this.rotation)),l=f.y;return(d?"inset":"")+" "+b.toString()+" "+f.x.toFixed(2)+"px "+l.toFixed(2)+"px "+k+"px "+a+"px"}},{key:"toJson",value:function(){return Le.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(b){return!!b&&Le.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,d=this.color,k=Le.Point.polar(this.distance,Le.num.toRadians(this.rotation)),a=k.x;k=k.y;b=Le.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+k.toFixed(2)+"px "+b.toFixed(2)+"px "+d.toString()+")"}},{key:"interpolate",value:function(b,d){return new Le.ShadowObject({distance:Le.num.interpolate(b,this.distance,d.distance),rotation:Le.num.interpolate(b,this.rotation,
d.rotation),color:this.color.interpolate(b,d.color),blur:Le.num.interpolate(b,this.blur,d.blur),spread:Le.num.interpolate(b,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],h,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));Le.ShadowObject=ys;Le.ShadowObject=ys;Le.ShadowObject=ys;Le.defaultStyle=Fj;Le.defaultStyle=Fj;Le.MorphAfterRenderHook.prototype.hook=function(c,h,n,b){var d=this;b=void 0===b?0:b;var k=!!c.parentNode;k&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,c));k||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(c)):
(b++,setTimeout(function(){return d.hook(c,h,n,b)},20*b))};Le.MorphAfterRenderHook.prototype.updateScroll=function(c,h,n){var b=this,d=c.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(h&&d)return d.then(function(){return b.updateScroll(c,h,!0)});if(!c.isWorld&&h){d=c.scroll;var k=d.x,a=d.y;if(!c._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var f=c.isText&&c.viewState.fastScroll?h.querySelector(".scrollLayer"):h;!c._skipScrollUpdate&&f&&(f.scrollTop!==
a&&(f.scrollTop=a),f.scrollLeft!==k&&(f.scrollLeft=k),!n&&requestAnimationFrame(function(){f.scrollTop!==a&&(f.scrollTop=a);f.scrollLeft!==k&&(f.scrollLeft=k)},c.id))}}};Le.MorphAfterRenderHook.prototype.unhook=function(c,h){};Le.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(c,h){var n=this;c.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,h.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,h)})};Le.Animation.prototype.hook=function(c){this.morph._animationQueue.startAnimationsFor(c)};
Le.SvgAnimation=De;Le.SvgAnimation=De;Le.SvgAnimation.prototype.hook=function(c){this.morph._animationQueue.startSvgAnimationsFor(c,this.type)};Le.defaultAttributes=Yw;Le.defaultAttributes=Yw;Le.svgAttributes=Xd;Le.svgAttributes=Xd;Le.pathAttributes=Zw;Le.pathAttributes=Zw;Le.renderGradient=Sy;Le.renderGradient=Sy;Le.renderMorph=Hc;Le.renderMorph=Hc;Le.renderSubTree=Ty;Le.renderSubTree=Ty;Le.renderRootMorph=ia;Le.renderRootMorph=ia;var Bc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,oW={};!function(c,h){h(oW)}(oW,function(c){function h(la){return 10===la||13===la||8232===la||8233===la||32===la||9===la||11===la||12===la||160===la||5760<=la&&0<=UB.indexOf(la)}function n(la){return 48<=la&&57>=la}function b(la){(this||Bc).index=0;(this||Bc).path=la;(this||Bc).max=la.length;(this||Bc).result=[];(this||Bc).param=0;(this||Bc).err="";(this||Bc).segmentStart=0;(this||Bc).data=[]}function d(la){for(;la.index<la.max&&h(la.path.charCodeAt(la.index));)la.index++}function k(la){var La,
Da=la.index,Ua=Da,lb=la.max,Yb=!1,$a=!1,Pb=!1,Ib=!1;if(Ua>=lb)return void(la.err="SvgPath: missed param (at pos "+Ua+")");if(La=la.path.charCodeAt(Ua),43!==La&&45!==La||(Ua++,La=Ua<lb?la.path.charCodeAt(Ua):0),!n(La)&&46!==La)return void(la.err="SvgPath: param should start with 0..9 or `.` (at pos "+Ua+")");if(46!==La){if(Yb=48===La,Ua++,La=Ua<lb?la.path.charCodeAt(Ua):0,Yb&&Ua<lb&&La&&n(La))return void(la.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Da+")");for(;Ua<lb&&
n(la.path.charCodeAt(Ua));)Ua++,$a=!0;La=Ua<lb?la.path.charCodeAt(Ua):0}if(46===La){Ib=!0;for(Ua++;n(la.path.charCodeAt(Ua));)Ua++,Pb=!0;La=Ua<lb?la.path.charCodeAt(Ua):0}if(101===La||69===La){if(Ib&&!$a&&!Pb||(Ua++,La=Ua<lb?la.path.charCodeAt(Ua):0,43!==La&&45!==La||Ua++,!(Ua<lb&&n(la.path.charCodeAt(Ua)))))return void(la.err="SvgPath: invalid float exponent (at pos "+Ua+")");for(;Ua<lb&&n(la.path.charCodeAt(Ua));)Ua++}la.index=Ua;la.param=parseFloat(la.path.slice(Da,Ua))+0}function a(){if(!((this||
Bc)instanceof a))return new a;(this||Bc).queue=[];(this||Bc).cache=null}function f(la,La,Da,Ua){var lb=(la*Da+La*Ua)/(Math.sqrt(la*la+La*La)*Math.sqrt(la*la+La*La));return 1<lb&&(lb=1),-1>lb&&(lb=-1),(0>la*Ua-La*Da?-1:1)*Math.acos(lb)}function l(la,La,Da,Ua,lb,Yb,$a,Pb,Ib,Uc){var Lb=Uc*(la-Da)/2+Ib*(La-Ua)/2,Ud=-Ib*(la-Da)/2+Uc*(La-Ua)/2,pe=$a*$a,uf=Pb*Pb,vf=Lb*Lb,Ie=Ud*Ud,sf=pe*uf-pe*Ie-uf*vf;0>sf&&(sf=0);sf=Math.sqrt(sf/(pe*Ie+uf*vf))*(lb===Yb?-1:1);lb=sf*$a/Pb*Ud;sf=sf*-Pb/$a*Lb;la=Uc*lb-Ib*sf+
(la+Da)/2;La=Ib*lb+Uc*sf+(La+Ua)/2;Ua=(Lb-lb)/$a;Ib=(Ud-sf)/Pb;$a=(-Lb-lb)/$a;Ud=(-Ud-sf)/Pb;Pb=f(1,0,Ua,Ib);Ud=f(Ua,Ib,$a,Ud);return 0===Yb&&0<Ud&&(Ud-=VB),1===Yb&&0>Ud&&(Ud+=VB),[la,La,Pb,Ud]}function r(la,La){var Da=4/3*Math.tan(La/4),Ua=Math.cos(la),lb=Math.sin(la),Yb=Math.cos(la+La);la=Math.sin(la+La);return[Ua,lb,Ua-lb*Da,lb+Ua*Da,Yb+la*Da,la-Yb*Da,Yb,la]}function v(la,La,Da){if(!((this||Bc)instanceof v))return new v(la,La,Da);(this||Bc).rx=la;(this||Bc).ry=La;(this||Bc).ax=Da}function y(la){if(!((this||
Bc)instanceof y))return new y(la);la=new b(la);var La=la.max;for(d(la);la.index<La&&!la.err.length;)a:{var Da,Ua=void 0,lb=la,Yb=lb.max;lb.segmentStart=lb.index;var $a=lb.path.charCodeAt(lb.index);b:{switch(32|$a){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:$a=!0;break b}$a=!1}if($a){if(Ua=Nv[lb.path[lb.index].toLowerCase()],lb.index++,d(lb),lb.data=[],Ua)for($a=!1;;){for(Da=Ua;0<Da;Da--){if(k(lb),lb.err.length)break a;lb.data.push(lb.param);d(lb);
$a=!1;lb.index<Yb&&44===lb.path.charCodeAt(lb.index)&&(lb.index++,d(lb),$a=!0)}if(!$a){if(lb.index>=lb.max)break;Da=lb.path.charCodeAt(lb.index);if(!(48<=Da&&57>=Da||43===Da||45===Da||46===Da))break}}Yb=lb;lb=Yb.path[Yb.segmentStart];Ua=lb.toLowerCase();$a=Yb.data;if("m"===Ua&&2<$a.length&&(Yb.result.push([lb,$a[0],$a[1]]),$a=$a.slice(2),Ua="l",lb="m"===lb?"l":"L"),"r"===Ua)Yb.result.push([lb].concat($a));else for(;$a.length>=Nv[Ua]&&(Yb.result.push([lb].concat($a.splice(0,Nv[Ua]))),Nv[Ua]););}else lb.err=
"SvgPath: bad command "+lb.path[lb.index]+" (at pos "+lb.index+")"}la=(la.err.length?la.result=[]:la.result.length&&(0>"mM".indexOf(la.result[0][0])?(la.err="SvgPath: string should start with `M` or `m`",la.result=[]):la.result[0][0]="M"),{err:la.err,segments:la.result});(this||Bc).segments=la.segments;(this||Bc).err=la.err;(this||Bc).__stack=[]}function A(la,La,Da,Ua,lb,Yb,$a,Pb){(this||Bc).a={x:la,y:La};(this||Bc).b={x:Da,y:Ua};(this||Bc).c={x:lb,y:Yb};(this||Bc).d={x:$a,y:Pb};null!==$a&&void 0!==
$a&&null!==Pb&&void 0!==Pb?((this||Bc).getArcLength=S,(this||Bc).getPoint=O,(this||Bc).getDerivative=F):((this||Bc).getArcLength=L,(this||Bc).getPoint=J,(this||Bc).getDerivative=E);this.init()}function E(la,La,Da){return{x:2*(1-Da)*(la[1]-la[0])+2*Da*(la[2]-la[1]),y:2*(1-Da)*(La[1]-La[0])+2*Da*(La[2]-La[1])}}function F(la,La,Da){return J([3*(la[1]-la[0]),3*(la[2]-la[1]),3*(la[3]-la[2])],[3*(La[1]-La[0]),3*(La[2]-La[1]),3*(La[3]-La[2])],Da)}function H(la,La,Da,Ua,lb){for(var Yb=1,$a=la/La,Pb=(la-Da(Ua,
lb,$a))/La;.001<Yb;){var Ib=Da(Ua,lb,$a+Pb),Uc=Da(Ua,lb,$a-Pb);Ib=Math.abs(la-Ib)/La;Uc=Math.abs(la-Uc)/La;Ib<Yb?(Yb=Ib,$a+=Pb):Uc<Yb?(Yb=Uc,$a-=Pb):Pb/=2}return $a}function J(la,La,Da){return{x:(1-Da)*(1-Da)*la[0]+2*(1-Da)*Da*la[1]+Da*Da*la[2],y:(1-Da)*(1-Da)*La[0]+2*(1-Da)*Da*La[1]+Da*Da*La[2]}}function O(la,La,Da){return{x:(1-Da)*(1-Da)*(1-Da)*la[0]+3*(1-Da)*(1-Da)*Da*la[1]+3*(1-Da)*Da*Da*la[2]+Da*Da*Da*la[3],y:(1-Da)*(1-Da)*(1-Da)*La[0]+3*(1-Da)*(1-Da)*Da*La[1]+3*(1-Da)*Da*Da*La[2]+Da*Da*Da*La[3]}}
function L(la,La,Da){void 0===Da&&(Da=1);var Ua=la[0]-2*la[1]+la[2],lb=La[0]-2*La[1]+La[2],Yb=2*la[1]-2*la[0],$a=2*La[1]-2*La[0],Pb=4*(Ua*Ua+lb*lb);if(0===Pb)return Da*Math.sqrt(Math.pow(la[2]-la[0],2)+Math.pow(La[2]-La[0],2));la=4*(Ua*Yb+lb*$a)/(2*Pb);Da+=la;Yb=(Yb*Yb+$a*$a)/Pb-la*la;return Math.sqrt(Pb)/2*(Da*Math.sqrt(Da*Da+Yb)-la*Math.sqrt(la*la+Yb)+Yb*Math.log(Math.abs((Da+Math.sqrt(Da*Da+Yb))/(la+Math.sqrt(la*la+Yb)))))}function Y(la,La,Da){var Ua,lb=Da.length-1;if(0===lb)return 0;if(0===la){for(Ua=
la=0;Ua<=lb;Ua++)la+=pW[lb][Ua]*Math.pow(1-La,lb-Ua)*Math.pow(La,Ua)*Da[Ua];return la}var Yb=Array(lb);for(Ua=0;Ua<lb;Ua++)Yb[Ua]=lb*(Da[Ua+1]-Da[Ua]);return Y(la-1,La,Yb)}function S(la,La,Da){var Ua,lb;void 0===Da&&(Da=1);Da/=2;for(lb=Ua=0;20>lb;lb++){var Yb=Da*qW[20][lb]+Da;var $a=rW[20][lb],Pb=La,Ib=Yb;Yb=Y(1,Ib,la);Pb=Y(1,Ib,Pb);Ua+=$a*Math.sqrt(Yb*Yb+Pb*Pb)}return Da*Ua}function ea(la,La,Da,Ua){var lb=la*Da+La*Ua;return 1<lb&&(lb=1),-1>lb&&(lb=-1),(0>la*Ua-La*Da?-1:1)*Math.acos(lb)}function qa(la,
La,Da,Ua,lb,Yb,$a,Pb,Ib,Uc){var Lb=Uc*(la-Da)/2+Ib*(La-Ua)/2,Ud=-Ib*(la-Da)/2+Uc*(La-Ua)/2,pe=$a*$a,uf=Pb*Pb,vf=Lb*Lb,Ie=Ud*Ud,sf=pe*uf-pe*Ie-uf*vf;0>sf&&(sf=0);sf=Math.sqrt(sf/(pe*Ie+uf*vf))*(lb===Yb?-1:1);lb=sf*$a/Pb*Ud;sf=sf*-Pb/$a*Lb;la=Uc*lb-Ib*sf+(la+Da)/2;La=Ib*lb+Uc*sf+(La+Ua)/2;Ua=(Lb-lb)/$a;Ib=(Ud-sf)/Pb;$a=(-Lb-lb)/$a;Ud=(-Ud-sf)/Pb;Pb=ea(1,0,Ua,Ib);Ud=ea(Ua,Ib,$a,Ud);return 0===Yb&&0<Ud&&(Ud-=WB),1===Yb&&0>Ud&&(Ud+=WB),[la,La,Pb,Ud]}function Fa(la,La){var Da=4/3*Math.tan(La/4),Ua=Math.cos(la),
lb=Math.sin(la),Yb=Math.cos(la+La);la=Math.sin(la+La);return[Ua,lb,Ua-lb*Da,lb+Ua*Da,Yb+la*Da,la-Yb*Da,Yb,la]}function K(la,La,Da,Ua,lb,Yb,$a,Pb,Ib){var Uc=0,Lb=[],Ud=[];sW(la,La,Da,Ua,lb,Yb,$a,Pb,Ib).forEach(function(pe){pe=new lr(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6],pe[7]);var uf=pe.getTotalLength();Uc+=uf;Lb.push(uf);Ud.push(pe)});(this||Bc).length=Uc;(this||Bc).partialLengths=Lb;(this||Bc).curves=Ud}function Z(la,La,Da,Ua){(this||Bc).x0=la;(this||Bc).x1=La;(this||Bc).y0=Da;(this||Bc).y1=
Ua}function R(la,La){return Math.sqrt((la[0]-La[0])*(la[0]-La[0])+(la[1]-La[1])*(la[1]-La[1]))}function U(la,La,Da){return[la[0]+(La[0]-la[0])*Da,la[1]+(La[1]-la[1])*Da]}function na(la,La,Da){var Ua=la.map(function(lb,Yb){return aa(lb,La[Yb])});return function(lb){var Yb=Ua.map(function($a){return $a(lb)});return Da?pa(Yb):Yb}}function aa(la,La){return function(Da){return la.map(function(Ua,lb){return Ua+Da*(La[lb]-Ua)})}}function xa(la){return"number"==typeof la&&isFinite(la)}function jb(la){var La;
a:{for(La=0;La<la.length-2;La++){var Da=la[La],Ua=la[La+1],lb=la[La+2];if(Da[0]*(Ua[1]-lb[1])+Ua[0]*(lb[1]-Da[1])+lb[0]*(Da[1]-Ua[1])){La=!0;break a}}La=!1}if(La){lb=-1;var Yb=la.length,$a=0,Pb=0,Ib=la[Yb-1];for(La=0;++lb<Yb;)Da=Ib,Ib=la[lb],La+=Ua=Da[0]*Ib[1]-Ib[0]*Da[1],$a+=(Da[0]+Ib[0])*Ua,Pb+=(Da[1]+Ib[1])*Ua;la=(La*=3,[$a/La,Pb/La])}else la=[(la[0][0]+la[la.length-1][0])/2,(la[0][1]+la[la.length-1][1])/2];return la}function ob(la){return la.toString().split("M").map(function(La,Da){return La=
La.trim(),Da&&La?"M"+La:La}).filter(function(La){return La})}function pa(la){return"M"+la.join("L")+"Z"}function ka(la,La){var Da=la.length+La;La=Ax(la)/La;for(var Ua=0,lb=0,Yb=La/2;la.length<Da;){var $a=la[Ua],Pb=la[(Ua+1)%la.length],Ib=R($a,Pb);Yb<=lb+Ib?(la.splice(Ua+1,0,Ib?U($a,Pb,(Yb-lb)/Ib):$a.slice(0)),Yb+=La):(lb+=Ib,Ua++)}}function wa(la,La){var Da;if("string"==typeof la){la=(new SN(la)).abs();a:{var Ua=la.segments||[];var lb=[];if(Ua.length&&"M"===Ua[0][0]){for(var Yb=0;Yb<Ua.length;Yb++){var $a=
Ua[Yb],Pb=$a[0],Ib=$a[1];$a=$a[2];if("M"===Pb&&Yb||"Z"===Pb)break;if("M"===Pb||"L"===Pb)lb.push([Ib,$a]);else if("H"===Pb)lb.push([Ib,lb[lb.length-1][1]]);else{if("V"!==Pb){Ua=!1;break a}lb.push([lb[lb.length-1][0],Ib])}}Ua=!!lb.length&&{ring:lb}}else Ua=!1}if(!Ua){lb=ob(la)[0];la=[];Ua=3;if(!lb)throw new TypeError(dI);a:{if("undefined"!=typeof window&&window&&window.document)try{var Uc=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Lb=(Uc.setAttributeNS(null,"d",lb),Uc);
break a}catch(Ud){}Lb=tW(lb)}Uc=Lb;Lb=Uc.getTotalLength();La&&xa(La)&&0<La&&(Ua=Math.max(Ua,Math.ceil(Lb/La)));for(lb=0;lb<Ua;lb++)Yb=Uc.getPointAtLength(Lb*lb/Ua),la.push([Yb.x,Yb.y]);Ua={ring:la,skipBisect:!0}}Lb=Ua;la=Lb.ring;Ua=Lb.skipBisect}else if(!Array.isArray(la))throw new TypeError(dI);if(Da=la.slice(0),!Ka(Da))throw new TypeError(dI);1<Da.length&&1E-9>R(Da[0],Da[Da.length-1])&&Da.pop();0<Hz(Da)&&Da.reverse();if(!Ua&&La&&xa(La)&&0<La)for(void 0===La&&(La=1/0),Lb=0;Lb<Da.length;Lb++)for(Uc=
Da[Lb],la=Lb===Da.length-1?Da[0]:Da[Lb+1];R(Uc,la)>La;)la=U(Uc,la,.5),Da.splice(Lb+1,0,la);return Da}function Ka(la){return la.every(function(La){return Array.isArray(La)&&2<=La.length&&xa(La[0])&&xa(La[1])})}function Fb(la,La,Da){var Ua;return Ua=la.length-La.length,ka(la,0>Ua?-1*Ua:0),ka(La,0<Ua?Ua:0),uW(la,La),na(la,La,Da)}function hc(la,La,Da){Da=Da||2;var Ua=La&&La.length,lb=Ua?La[0]*Da:la.length,Yb=Ub(la,0,lb,Da,!0),$a=[];if(!Yb)return $a;var Pb;if(Ua){var Ib=Da,Uc;var Lb=[];Ua=0;for(Uc=La.length;Ua<
Uc;Ua++){var Ud=La[Ua]*Ib;var pe=Ua<Uc-1?La[Ua+1]*Ib:la.length;Ud=Ub(la,Ud,pe,Ib,!1);Ud===Ud.next&&(Ud.steiner=!0);Lb.push(ja(Ud))}Lb.sort(Mb);for(Ua=0;Ua<Lb.length;Ua++){La=Lb[Ua];Ib=Yb;if(Ib=ed(La,Ib))La=yd(Ib,La),ac(La,La.next);Yb=ac(Yb,Yb.next)}}if(la.length>80*Da){var uf=Pb=la[0];var vf=Ua=la[1];for(Ib=Da;Ib<lb;Ib+=Da)Lb=la[Ib],La=la[Ib+1],Lb<uf&&(uf=Lb),La<vf&&(vf=La),Lb>Pb&&(Pb=Lb),La>Ua&&(Ua=La);Pb=Math.max(Pb-uf,Ua-vf)}return Ic(Yb,$a,Da,uf,vf,Pb),$a}function Ub(la,La,Da,Ua,lb){if(lb===0<
Jh(la,La,Da,Ua))for(lb=La;lb<Da;lb+=Ua)var Yb=Mc(lb,la[lb],la[lb+1],Yb);else for(lb=Da-Ua;lb>=La;lb-=Ua)Yb=Mc(lb,la[lb],la[lb+1],Yb);return Yb&&wb(Yb,Yb.next)&&(Me(Yb),Yb=Yb.next),Yb}function ac(la,La){if(!la)return la;La||(La=la);var Da=la;do if(la=!1,Da.steiner||!wb(Da,Da.next)&&0!==Ea(Da.prev,Da,Da.next))Da=Da.next;else{if(Me(Da),(Da=La=Da.prev)===Da.next)return null;la=!0}while(la||Da!==La);return La}function Ic(la,La,Da,Ua,lb,Yb,$a){if(la){if(!$a&&Yb){var Pb=la,Ib=Pb;do null===Ib.z&&(Ib.z=Bd(Ib.x,
Ib.y,Ua,lb,Yb)),Ib.prevZ=Ib.prev,Ib=Ib.nextZ=Ib.next;while(Ib!==Pb);Ib.prevZ.nextZ=null;Ib.prevZ=null;Pb=Ib;var Uc,Lb,Ud,pe,uf=1;do{Ib=Pb;var vf=Pb=null;for(Ud=0;Ib;){Ud++;var Ie=Ib;for(Uc=pe=0;Uc<uf&&(pe++,Ie=Ie.nextZ);Uc++);for(Uc=uf;0<pe||0<Uc&&Ie;)0===pe?(Lb=Ie,Ie=Ie.nextZ,Uc--):0!==Uc&&Ie?Ib.z<=Ie.z?(Lb=Ib,Ib=Ib.nextZ,pe--):(Lb=Ie,Ie=Ie.nextZ,Uc--):(Lb=Ib,Ib=Ib.nextZ,pe--),vf?vf.nextZ=Lb:Pb=Lb,Lb.prevZ=vf,vf=Lb;Ib=Ie}vf.nextZ=null;uf*=2}while(1<Ud)}for(Ib=la;la.prev!==la.next;){Lb=la.prev;Pb=
la.next;if(Yb)a:{Ie=la;Uc=Ua;var sf=lb,Oo=Yb;vf=Ie.prev;Ud=Ie;pe=Ie.next;if(0<=Ea(vf,Ud,pe))Ie=!1;else{var vW=vf.x>Ud.x?vf.x>pe.x?vf.x:pe.x:Ud.x>pe.x?Ud.x:pe.x,wW=vf.y>Ud.y?vf.y>pe.y?vf.y:pe.y:Ud.y>pe.y?Ud.y:pe.y;uf=Bd(vf.x<Ud.x?vf.x<pe.x?vf.x:pe.x:Ud.x<pe.x?Ud.x:pe.x,vf.y<Ud.y?vf.y<pe.y?vf.y:pe.y:Ud.y<pe.y?Ud.y:pe.y,Uc,sf,Oo);Uc=Bd(vW,wW,Uc,sf,Oo);for(sf=Ie.nextZ;sf&&sf.z<=Uc;){if(sf!==Ie.prev&&sf!==Ie.next&&Ba(vf.x,vf.y,Ud.x,Ud.y,pe.x,pe.y,sf.x,sf.y)&&0<=Ea(sf.prev,sf,sf.next)){Ie=!1;break a}sf=
sf.nextZ}for(sf=Ie.prevZ;sf&&sf.z>=uf;){if(sf!==Ie.prev&&sf!==Ie.next&&Ba(vf.x,vf.y,Ud.x,Ud.y,pe.x,pe.y,sf.x,sf.y)&&0<=Ea(sf.prev,sf,sf.next)){Ie=!1;break a}sf=sf.prevZ}Ie=!0}}else a:if(Ie=la,vf=Ie.prev,Ud=Ie,pe=Ie.next,0<=Ea(vf,Ud,pe))Ie=!1;else{for(uf=Ie.next.next;uf!==Ie.prev;){if(Ba(vf.x,vf.y,Ud.x,Ud.y,pe.x,pe.y,uf.x,uf.y)&&0<=Ea(uf.prev,uf,uf.next)){Ie=!1;break a}uf=uf.next}Ie=!0}if(Ie)La.push(Lb.i/Da),La.push(la.i/Da),La.push(Pb.i/Da),Me(la),Ib=la=Pb.next;else if((la=Pb)===Ib){if($a)if(1===
$a){$a=La;Lb=Da;Pb=la;do Ib=Pb.prev,Ie=Pb.next.next,!wb(Ib,Ie)&&$b(Ib,Pb,Pb.next,Ie)&&zd(Ib,Ie)&&zd(Ie,Ib)&&($a.push(Ib.i/Lb),$a.push(Pb.i/Lb),$a.push(Ie.i/Lb),Me(Pb),Me(Pb.next),Pb=la=Ie),Pb=Pb.next;while(Pb!==la);la=Pb;Ic(la,La,Da,Ua,lb,Yb,2)}else{if(2===$a)a:{$a=la;do{for(Lb=$a.next.next;Lb!==$a.prev;){if(Pb=$a.i!==Lb.i){Pb=$a;Ib=Lb;if(Ie=Pb.next.i!==Ib.i&&Pb.prev.i!==Ib.i){b:{Ie=Pb;do{if(Ie.i!==Pb.i&&Ie.next.i!==Pb.i&&Ie.i!==Ib.i&&Ie.next.i!==Ib.i&&$b(Ie,Ie.next,Pb,Ib)){Ie=!0;break b}Ie=Ie.next}while(Ie!==
Pb);Ie=!1}Ie=!Ie}if(Ie=Ie&&zd(Pb,Ib)&&zd(Ib,Pb)){Ie=Pb;vf=!1;Ud=(Pb.x+Ib.x)/2;Ib=(Pb.y+Ib.y)/2;do Ie.y>Ib!=Ie.next.y>Ib&&Ud<(Ie.next.x-Ie.x)*(Ib-Ie.y)/(Ie.next.y-Ie.y)+Ie.x&&(vf=!vf),Ie=Ie.next;while(Ie!==Pb);Ie=vf}Pb=Ie}if(Pb){la=yd($a,Lb);$a=ac($a,$a.next);la=ac(la,la.next);Ic($a,La,Da,Ua,lb,Yb);Ic(la,La,Da,Ua,lb,Yb);break a}Lb=Lb.next}$a=$a.next}while($a!==la)}}else Ic(ac(la),La,Da,Ua,lb,Yb,1);break}}}}function Mb(la,La){return la.x-La.x}function ed(la,La){var Da=La,Ua=la.x,lb=la.y,Yb=-1/0;do{if(lb<=
Da.y&&lb>=Da.next.y){var $a=Da.x+(lb-Da.y)*(Da.next.x-Da.x)/(Da.next.y-Da.y);if($a<=Ua&&$a>Yb){if(Yb=$a,$a===Ua){if(lb===Da.y)return Da;if(lb===Da.next.y)return Da.next}var Pb=Da.x<Da.next.x?Da:Da.next}}Da=Da.next}while(Da!==La);if(!Pb)return null;if(Ua===Yb)return Pb.prev;var Ib;La=Pb;$a=Pb.x;var Uc=Pb.y,Lb=1/0;for(Da=Pb.next;Da!==La;)Ua>=Da.x&&Da.x>=$a&&Ba(lb<Uc?Ua:Yb,lb,$a,Uc,lb<Uc?Yb:Ua,lb,Da.x,Da.y)&&((Ib=Math.abs(lb-Da.y)/(Ua-Da.x))<Lb||Ib===Lb&&Da.x>Pb.x)&&zd(Da,la)&&(Pb=Da,Lb=Ib),Da=Da.next;
return Pb}function Bd(la,La,Da,Ua,lb){return la=32767*(la-Da)/lb,La=32767*(La-Ua)/lb,la=16711935&(la|la<<8),la=252645135&(la|la<<4),la=858993459&(la|la<<2),la=1431655765&(la|la<<1),La=16711935&(La|La<<8),La=252645135&(La|La<<4),La=858993459&(La|La<<2),La=1431655765&(La|La<<1),la|La<<1}function ja(la){var La=la,Da=la;do La.x<Da.x&&(Da=La),La=La.next;while(La!==la);return Da}function Ba(la,La,Da,Ua,lb,Yb,$a,Pb){return 0<=(lb-$a)*(La-Pb)-(la-$a)*(Yb-Pb)&&0<=(la-$a)*(Ua-Pb)-(Da-$a)*(La-Pb)&&0<=(Da-$a)*
(Yb-Pb)-(lb-$a)*(Ua-Pb)}function Ea(la,La,Da){return(La.y-la.y)*(Da.x-La.x)-(La.x-la.x)*(Da.y-La.y)}function wb(la,La){return la.x===La.x&&la.y===La.y}function $b(la,La,Da,Ua){return!!(wb(la,La)&&wb(Da,Ua)||wb(la,Ua)&&wb(Da,La))||0<Ea(la,La,Da)!=0<Ea(la,La,Ua)&&0<Ea(Da,Ua,la)!=0<Ea(Da,Ua,La)}function zd(la,La){return 0>Ea(la.prev,la,la.next)?0<=Ea(la,La,la.next)&&0<=Ea(la,la.prev,La):0>Ea(la,La,la.prev)||0>Ea(la,la.next,La)}function yd(la,La){var Da=new Fe(la.i,la.x,la.y),Ua=new Fe(La.i,La.x,La.y),
lb=la.next,Yb=La.prev;return la.next=La,La.prev=la,Da.next=lb,lb.prev=Da,Ua.next=Da,Da.prev=Ua,Yb.next=Ua,Ua.prev=Yb,Ua}function Mc(la,La,Da,Ua){la=new Fe(la,La,Da);return Ua?(la.next=Ua.next,la.prev=Ua,Ua.next.prev=la,Ua.next=la):(la.prev=la,la.next=la),la}function Me(la){la.next.prev=la.prev;la.prev.next=la.next;la.prevZ&&(la.prevZ.nextZ=la.nextZ);la.nextZ&&(la.nextZ.prevZ=la.prevZ)}function Fe(la,La,Da){(this||Bc).i=la;(this||Bc).x=La;(this||Bc).y=Da;(this||Bc).prev=null;(this||Bc).next=null;(this||
Bc).z=null;(this||Bc).prevZ=null;(this||Bc).nextZ=null;(this||Bc).steiner=!1}function Jh(la,La,Da,Ua){for(var lb=0,Yb=Da-Ua;La<Da;La+=Ua)lb+=(la[Yb]-la[La])*(la[La+1]+la[Yb+1]),Yb=La;return lb}function fh(la,La){var Da=La.id,Ua=La.bbox,lb=null==La.properties?{}:La.properties;la=dj(la,La);return null==Da&&null==Ua?{type:"Feature",properties:lb,geometry:la}:null==Ua?{type:"Feature",id:Da,properties:lb,geometry:la}:{type:"Feature",id:Da,bbox:Ua,properties:lb,geometry:la}}function dj(la,La){function Da(Uc){return Pb(Uc)}
function Ua(Uc){for(var Lb=[],Ud=0,pe=Uc.length;Ud<pe;++Ud){var uf=Uc[Ud],vf=Lb;vf.length&&vf.pop();for(var Ie=Ib[0>uf?~uf:uf],sf=0,Oo=Ie.length;sf<Oo;++sf)vf.push(Pb(Ie[sf],sf));if(0>uf)for(uf=vf,vf=uf.length,Ie=vf-Oo;Ie<--vf;)Oo=uf[Ie],uf[Ie++]=uf[vf],uf[vf]=Oo}return 2>Lb.length&&Lb.push(Lb[0]),Lb}function lb(Uc){for(Uc=Ua(Uc);4>Uc.length;)Uc.push(Uc[0]);return Uc}function Yb(Uc){return Uc.map(lb)}function $a(Uc){var Lb=Uc.type;switch(Lb){case "GeometryCollection":return{type:Lb,geometries:Uc.geometries.map($a)};
case "Point":Uc=Pb(Uc.coordinates);break;case "MultiPoint":Uc=Uc.coordinates.map(Da);break;case "LineString":Uc=Ua(Uc.arcs);break;case "MultiLineString":Uc=Uc.arcs.map(Ua);break;case "Polygon":Uc=Yb(Uc.arcs);break;case "MultiPolygon":Uc=Uc.arcs.map(Yb);break;default:return null}return{type:Lb,coordinates:Uc}}var Pb=TN(la.transform),Ib=la.arcs;return $a(La)}function Wi(la,La){function Da(Ib){switch(Ib.type){case "GeometryCollection":Ib.geometries.forEach(Da);break;case "Polygon":Ua(Ib.arcs);break;
case "MultiPolygon":Ib.arcs.forEach(Ua)}}function Ua(Ib){Ib.forEach(function(Uc){Uc.forEach(function(Lb){(Yb[Lb=0>Lb?~Lb:Lb]||(Yb[Lb]=[])).push(Ib)})});$a.push(Ib)}function lb(Ib){Ib=dj(la,{type:"Polygon",arcs:[Ib]}).coordinates[0];for(var Uc,Lb=-1,Ud=Ib.length,pe=Ib[Ud-1],uf=0;++Lb<Ud;)Uc=pe,pe=Ib[Lb],uf+=Uc[0]*pe[1]-Uc[1]*pe[0];return Math.abs(uf)}var Yb={},$a=[],Pb=[];return La.forEach(Da),$a.forEach(function(Ib){if(!Ib._){var Uc=[],Lb=[Ib];Ib._=1;for(Pb.push(Uc);Ib=Lb.pop();)Uc.push(Ib),Ib.forEach(function(Ud){Ud.forEach(function(pe){Yb[0>
pe?~pe:pe].forEach(function(uf){uf._||(uf._=1,Lb.push(uf))})})})}}),$a.forEach(function(Ib){delete Ib._}),{type:"MultiPolygon",arcs:Pb.map(function(Ib){var Uc=[];if(Ib.forEach(function(vf){vf.forEach(function(Ie){Ie.forEach(function(sf){2>Yb[0>sf?~sf:sf].length&&Uc.push(sf)})})}),Uc=UN(la,Uc),1<(Ib=Uc.length))for(var Lb,Ud,pe=1,uf=lb(Uc[0]);pe<Ib;++pe)(Lb=lb(Uc[pe]))>uf&&(Ud=Uc[0],Uc[0]=Uc[pe],Uc[pe]=Ud,uf=Lb);return Uc})}}function Tj(la){return function(La,Da){return Iz(la(La),Da)}}function gk(la,
La){var Da={},Ua={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return la.forEach(function(lb){var Yb=[];lb.forEach(function($a,Pb){Pb=$a[0]<$a[1]?$a.join(","):$a[1]+","+$a[0];$a=$a.map(function(Ib){return La[Ib]});Pb in Da?Yb.push(~Da[Pb]):(Yb.push(Da[Pb]=Ua.arcs.length),Ua.arcs.push($a))});Ua.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(Hz(lb.map(function($a){return La[$a[0]]}))),arcs:[Yb]})}),Ua.objects.triangles.geometries.sort(function(lb,
Yb){return lb.area-Yb.area}),Ua}function yj(la,La){for(var Da=la.objects.triangles.geometries,Ua=VN(function(lb){return lb.area}).left;Da.length>La;)!function(){var lb=Da[0],Yb=WN(Da)[0][0],$a=Da[Yb],Pb=Wi(la,[lb,$a]);Pb.area=lb.area+$a.area;Pb.type="Polygon";Pb.arcs=Pb.arcs[0];Da.splice(Yb,1);Da.shift();Da.splice(Ua(Da,Pb.area),0,Pb)}();if(La>Da.length)throw new RangeError("Can't collapse topology into "+La+" pieces.");return Ov(la,la.objects.triangles).features.map(function(lb){return lb.geometry.coordinates[0].pop(),
lb.geometry.coordinates[0]})}function zj(la){la=xW(la.reduce(function(lb,Yb){return lb.concat([Yb[0]],[Yb[1]])},[]));for(var La=[],Da=0,Ua=la.length;Da<Ua;Da+=3)La.push([[la[Da],la[Da+1]],[la[Da+1],la[Da+2]],[la[Da+2],la[Da]]]);return La}function gi(la,La,Da){function Ua($a,Pb,Ib){void 0===Pb&&(Pb=[]);void 0===Ib&&(Ib=0);for(var Uc=0;Uc<$a.length;Uc++){var Lb=$a.splice(Uc,1),Ud=Da[Lb[0]][Pb.length];Ib+Ud<lb&&($a.length?Ua($a.slice(),Pb.concat(Lb),Ib+Ud):(lb=Ib+Ud,Yb=Pb.concat(Lb)));$a.length&&$a.splice(Uc,
0,Lb[0])}}var lb=1/0,Yb=la.map(function($a,Pb){return Pb});return Ua(Yb),Yb}function pi(la,La,Da){void 0===Da&&(Da={});var Ua=Da.maxSegmentLength;void 0===Ua&&(Ua=10);var lb=Da.string;void 0===lb&&(lb=!0);Da=Da.single;void 0===Da&&(Da=!1);var Yb=wa(la,Ua);Yb.length<La.length+2&&ka(Yb,La.length+2-Yb.length);var $a;Yb=yW(Yb,La.length);var Pb=La.map(function(Ib){return wa(Ib,Ua)});la="string"==typeof la&&la;return Da&&!La.every(function(Ib){return"string"==typeof Ib})||($a=La.slice(0)),Bi(Yb,Pb,{match:!0,
string:lb,single:Da,t0:la,t1:$a})}function Bi(la,La,Da){void 0===Da&&(Da={});var Ua=Da.string,lb=Da.single,Yb=Da.t0,$a=Da.t1,Pb=(Da=Da.match)?zW(la,La):la.map(function(Lb,Ud){return Ud}),Ib=Pb.map(function(Lb,Ud){return Fb(la[Lb],La[Ud],Ua)});if(Da&&Array.isArray(Yb)&&(Yb=Pb.map(function(Lb){return Yb[Lb]})),lb&&Ua&&(Array.isArray(Yb)&&(Yb=Yb.join(" ")),Array.isArray($a)&&($a=$a.join(" "))),lb){var Uc=Ua?function(Lb){return Ib.map(function(Ud){return Ud(Lb)}).join(" ")}:function(Lb){return Ib.map(function(Ud){return Ud(Lb)})};
return Ua&&(Yb||$a)?function(Lb){return 1E-4>Lb&&Yb||1E-4>1-Lb&&$a||Uc(Lb)}:Uc}return Ua?(Yb=Array.isArray(Yb)?Yb.map(function(Lb){return"string"==typeof Lb&&Lb}):[],$a=Array.isArray($a)?$a.map(function(Lb){return"string"==typeof Lb&&Lb}):[],Ib.map(function(Lb,Ud){return Yb[Ud]||$a[Ud]?function(pe){return 1E-4>pe&&Yb[Ud]||1E-4>1-pe&&$a[Ud]||Lb(pe)}:Lb})):Ib}function Kj(la,La,Da,Ua,lb){var Yb=Dd(la,La,Da),$a=la-Da+","+La,Pb="A"+Da+","+Da+",0,1,1,";return Jz(Yb,Ua,"M"+$a+Pb+(la+Da+","+La)+Pb+$a+"Z",
2*Math.PI*Da,lb)}function xk(la,La,Da,Ua,lb,Yb){var $a=Ed(la,La,Da,Ua),Pb=la+Da,Ib=La+Ua;return Jz($a,lb,"M"+la+","+La+"L"+Pb+","+La+"L"+Pb+","+Ib+"L"+la+","+Ib+"Z",2*Da+2*Ua,Yb)}function Jz(la,La,Da,Ua,lb){void 0===lb&&(lb={});var Yb=lb.maxSegmentLength;void 0===Yb&&(Yb=10);lb=lb.string;void 0===lb&&(lb=!0);var $a,Pb;La=wa(La,Yb);return xa(Ua)&&La.length<Ua/Yb&&ka(La,Math.ceil(Ua/Yb-La.length)),$a=la(La),Pb=na($a,La,lb),lb?function(Ib){return 1E-4>Ib?Da:Pb(Ib)}:Pb}function Dd(la,La,Da){return function(Ua){var lb=
jb(Ua),Yb=Ax(Ua.concat([Ua[0]])),$a=Math.atan2(Ua[0][1]-lb[1],Ua[0][0]-lb[0]),Pb=0;return Ua.map(function(Ib,Uc){var Lb;return Uc&&(Pb+=R(Ib,Ua[Uc-1])),Lb=$a+2*Math.PI*(Yb?Pb/Yb:Uc/Ua.length),[Math.cos(Lb)*Da+la,Math.sin(Lb)*Da+La]})}}function Ed(la,La,Da,Ua){return function(lb){var Yb=jb(lb),$a=Ax(lb.concat([lb[0]]));Yb=Math.atan2(lb[0][1]-Yb[1],lb[0][0]-Yb[0]);var Pb=0;0>Yb&&(Yb=2*Math.PI+Yb);var Ib=Yb/(2*Math.PI);return lb.map(function(Uc,Lb){Lb&&(Pb+=R(Uc,lb[Lb-1]));Uc=(Ib+($a?Pb/$a:Lb/lb.length))%
1;Uc=.125>=Uc?[1,.5+4*Uc]:.375>=Uc?[1.5-4*Uc,1]:.625>=Uc?[0,2.5-4*Uc]:.875>=Uc?[4*Uc-2.5,0]:[1,4*Uc-3.5];return[la+Uc[0]*Da,La+Uc[1]*Ua]})}}var Hz=function(la){for(var La,Da=-1,Ua=la.length,lb=la[Ua-1],Yb=0;++Da<Ua;)La=lb,lb=la[Da],Yb+=La[1]*lb[0]-La[0]*lb[1];return Yb/2},Ax=function(la){var La=-1,Da=la.length,Ua=la[Da-1],lb=Ua[0];Ua=Ua[1];for(var Yb=0;++La<Da;){var $a=lb;var Pb=Ua;Ua=la[La];lb=Ua[0];Ua=Ua[1];$a-=lb;Pb-=Ua;Yb+=Math.sqrt($a*$a+Pb*Pb)}return Yb},Nv={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},UB=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];a.prototype.matrix=function(la){return 1===la[0]&&0===la[1]&&0===la[2]&&1===la[3]&&0===la[4]&&0===la[5]?this||Bc:((this||Bc).cache=null,(this||Bc).queue.push(la),this||Bc)};a.prototype.translate=function(la,La){return 0===la&&0===La||((this||Bc).cache=null,(this||Bc).queue.push([1,0,0,1,la,La])),this||Bc};a.prototype.scale=function(la,La){return 1===la&&1===La||((this||Bc).cache=null,(this||Bc).queue.push([la,
0,0,La,0,0])),this||Bc};a.prototype.rotate=function(la,La,Da){var Ua,lb,Yb;return 0!==la&&(this.translate(La,Da),Ua=la*Math.PI/180,lb=Math.cos(Ua),Yb=Math.sin(Ua),(this||Bc).queue.push([lb,Yb,-Yb,lb,0,0]),(this||Bc).cache=null,this.translate(-La,-Da)),this||Bc};a.prototype.skewX=function(la){return 0!==la&&((this||Bc).cache=null,(this||Bc).queue.push([1,0,Math.tan(la*Math.PI/180),1,0,0])),this||Bc};a.prototype.skewY=function(la){return 0!==la&&((this||Bc).cache=null,(this||Bc).queue.push([1,Math.tan(la*
Math.PI/180),0,1,0,0])),this||Bc};a.prototype.toArray=function(){var la=this||Bc;if((this||Bc).cache)return(this||Bc).cache;if(!(this||Bc).queue.length)return(this||Bc).cache=[1,0,0,1,0,0],(this||Bc).cache;if((this||Bc).cache=(this||Bc).queue[0],1===(this||Bc).queue.length)return(this||Bc).cache;for(var La=1;La<(this||Bc).queue.length;La++){var Da=la.cache,Ua=la.queue[La];la.cache=[Da[0]*Ua[0]+Da[2]*Ua[1],Da[1]*Ua[0]+Da[3]*Ua[1],Da[0]*Ua[2]+Da[2]*Ua[3],Da[1]*Ua[2]+Da[3]*Ua[3],Da[0]*Ua[4]+Da[2]*Ua[5]+
Da[4],Da[1]*Ua[4]+Da[3]*Ua[5]+Da[5]]}return(this||Bc).cache};a.prototype.calc=function(la,La,Da){var Ua;return(this||Bc).queue.length?((this||Bc).cache||((this||Bc).cache=this.toArray()),Ua=(this||Bc).cache,[la*Ua[0]+La*Ua[2]+(Da?0:Ua[4]),la*Ua[1]+La*Ua[3]+(Da?0:Ua[5])]):[la,La]};var XB={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},YB=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,ZB=/[\s,]+/,$B=function(la){var La,Da,Ua=new a;return la.split(YB).forEach(function(lb){if(lb.length){if(void 0!==
XB[lb])return void(La=lb);switch(Da=lb.split(ZB).map(function(Yb){return+Yb||0}),La){case "matrix":return void(6===Da.length&&Ua.matrix(Da));case "scale":return void(1===Da.length?Ua.scale(Da[0],Da[0]):2===Da.length&&Ua.scale(Da[0],Da[1]));case "rotate":return void(1===Da.length?Ua.rotate(Da[0],0,0):3===Da.length&&Ua.rotate(Da[0],Da[1],Da[2]));case "translate":return void(1===Da.length?Ua.translate(Da[0],0):2===Da.length&&Ua.translate(Da[0],Da[1]));case "skewX":return void(1===Da.length&&Ua.skewX(Da[0]));
case "skewY":return void(1===Da.length&&Ua.skewY(Da[0]))}}}),Ua},VB=2*Math.PI,AW=function(la,La,Da,Ua,lb,Yb,$a,Pb,Ib){var Uc=Math.sin(Ib*VB/360),Lb=Math.cos(Ib*VB/360);Ib=Lb*(la-Da)/2+Uc*(La-Ua)/2;var Ud=-Uc*(la-Da)/2+Lb*(La-Ua)/2;if(0===Ib&&0===Ud||0===$a||0===Pb)return[];$a=Math.abs($a);Pb=Math.abs(Pb);Ib=Ib*Ib/($a*$a)+Ud*Ud/(Pb*Pb);1<Ib&&($a*=Math.sqrt(Ib),Pb*=Math.sqrt(Ib));var pe=l(la,La,Da,Ua,lb,Yb,$a,Pb,Uc,Lb);la=[];La=pe[2];Da=pe[3];Ua=Math.max(Math.ceil(Math.abs(Da)/(VB/4)),1);Da/=Ua;for(lb=
0;lb<Ua;lb++)la.push(r(La,Da)),La+=Da;return la.map(function(uf){for(var vf=0;vf<uf.length;vf+=2){var Ie=uf[vf+0],sf=uf[vf+1];Ie*=$a;sf*=Pb;var Oo=Uc*Ie+Lb*sf;uf[vf+0]=Lb*Ie-Uc*sf+pe[0];uf[vf+1]=Oo+pe[1]}return uf})},XN=Math.PI/180;v.prototype.transform=function(la){var La=Math.cos((this||Bc).ax*XN),Da=Math.sin((this||Bc).ax*XN),Ua=[(this||Bc).rx*(la[0]*La+la[2]*Da),(this||Bc).rx*(la[1]*La+la[3]*Da),(this||Bc).ry*(-la[0]*Da+la[2]*La),(this||Bc).ry*(-la[1]*Da+la[3]*La)];la=Ua[0]*Ua[0]+Ua[2]*Ua[2];
La=Ua[1]*Ua[1]+Ua[3]*Ua[3];Da=((Ua[0]-Ua[3])*(Ua[0]-Ua[3])+(Ua[2]+Ua[1])*(Ua[2]+Ua[1]))*((Ua[0]+Ua[3])*(Ua[0]+Ua[3])+(Ua[2]-Ua[1])*(Ua[2]-Ua[1]));var lb=(la+La)/2;if(Da<1E-10*lb)return(this||Bc).rx=(this||Bc).ry=Math.sqrt(lb),(this||Bc).ax=0,this||Bc;Ua=Ua[0]*Ua[1]+Ua[2]*Ua[3];Da=Math.sqrt(Da);var Yb=lb+Da/2;Da=lb-Da/2;return(this||Bc).ax=1E-10>Math.abs(Ua)&&1E-10>Math.abs(Yb-La)?90:180*Math.atan(Math.abs(Ua)>Math.abs(Yb-La)?(Yb-la)/Ua:Ua/(Yb-La))/Math.PI,0<=(this||Bc).ax?((this||Bc).rx=Math.sqrt(Yb),
(this||Bc).ry=Math.sqrt(Da)):((this||Bc).ax+=90,(this||Bc).rx=Math.sqrt(Da),(this||Bc).ry=Math.sqrt(Yb)),this||Bc};v.prototype.isDegenerate=function(){return(this||Bc).rx<1E-10*(this||Bc).ry||(this||Bc).ry<1E-10*(this||Bc).rx};y.prototype.__matrix=function(la){var La,Da=this||Bc;la.queue.length&&this.iterate(function(Ua,lb,Yb,$a){switch(Ua[0]){case "v":var Pb=la.calc(0,Ua[1],!0);Yb=0===Pb[0]?["v",Pb[1]]:["l",Pb[0],Pb[1]];break;case "V":Pb=la.calc(Yb,Ua[1],!1);Yb=Pb[0]===la.calc(Yb,$a,!1)[0]?["V",
Pb[1]]:["L",Pb[0],Pb[1]];break;case "h":Pb=la.calc(Ua[1],0,!0);Yb=0===Pb[1]?["h",Pb[0]]:["l",Pb[0],Pb[1]];break;case "H":Pb=la.calc(Ua[1],$a,!1);Yb=Pb[1]===la.calc(Yb,$a,!1)[1]?["H",Pb[0]]:["L",Pb[0],Pb[1]];break;case "a":case "A":Pb=la.toArray();var Ib=v(Ua[1],Ua[2],Ua[3]).transform(Pb);if(0>Pb[0]*Pb[3]-Pb[1]*Pb[2]&&(Ua[5]=Ua[5]?"0":"1"),Pb=la.calc(Ua[6],Ua[7],"a"===Ua[0]),"A"===Ua[0]&&Ua[6]===Yb&&Ua[7]===$a||"a"===Ua[0]&&0===Ua[6]&&0===Ua[7]){Yb=["a"===Ua[0]?"l":"L",Pb[0],Pb[1]];break}Yb=Ib.isDegenerate()?
["a"===Ua[0]?"l":"L",Pb[0],Pb[1]]:[Ua[0],Ib.rx,Ib.ry,Ib.ax,Ua[4],Ua[5],Pb[0],Pb[1]];break;case "m":Pb=la.calc(Ua[1],Ua[2],0<lb);Yb=["m",Pb[0],Pb[1]];break;default:for(Pb=Ua[0],Yb=[Pb],$a=Pb.toLowerCase()===Pb,La=1;La<Ua.length;La+=2)Pb=la.calc(Ua[La],Ua[La+1],$a),Yb.push(Pb[0],Pb[1])}Da.segments[lb]=Yb},!0)};y.prototype.__evaluateStack=function(){var la,La=this||Bc;if((this||Bc).__stack.length){if(1===(this||Bc).__stack.length)return this.__matrix((this||Bc).__stack[0]),void((this||Bc).__stack=[]);
var Da=a();for(la=(this||Bc).__stack.length;0<=--la;)Da.matrix(La.__stack[la].toArray());this.__matrix(Da);(this||Bc).__stack=[]}};y.prototype.toString=function(){var la=this||Bc,La=[];this.__evaluateStack();for(var Da=0;Da<(this||Bc).segments.length;Da++){var Ua=la.segments[Da][0];Ua=0<Da&&"m"!==Ua&&"M"!==Ua&&Ua===la.segments[Da-1][0];La=La.concat(Ua?la.segments[Da].slice(1):la.segments[Da])}return La.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};y.prototype.translate=
function(la,La){return(this||Bc).__stack.push(a().translate(la,La||0)),this||Bc};y.prototype.scale=function(la,La){return(this||Bc).__stack.push(a().scale(la,La||0===La?La:la)),this||Bc};y.prototype.rotate=function(la,La,Da){return(this||Bc).__stack.push(a().rotate(la,La||0,Da||0)),this||Bc};y.prototype.skewX=function(la){return(this||Bc).__stack.push(a().skewX(la)),this||Bc};y.prototype.skewY=function(la){return(this||Bc).__stack.push(a().skewY(la)),this||Bc};y.prototype.matrix=function(la){return(this||
Bc).__stack.push(a().matrix(la)),this||Bc};y.prototype.transform=function(la){return la.trim()?((this||Bc).__stack.push($B(la)),this||Bc):this||Bc};y.prototype.round=function(la){var La,Da=0,Ua=0,lb=0,Yb=0;return la=la||0,this.__evaluateStack(),(this||Bc).segments.forEach(function($a){var Pb=$a[0].toLowerCase()===$a[0];switch($a[0]){case "H":case "h":return Pb&&($a[1]+=lb),lb=$a[1]-$a[1].toFixed(la),void($a[1]=+$a[1].toFixed(la));case "V":case "v":return Pb&&($a[1]+=Yb),Yb=$a[1]-$a[1].toFixed(la),
void($a[1]=+$a[1].toFixed(la));case "Z":case "z":return lb=Da,void(Yb=Ua);case "M":case "m":return Pb&&($a[1]+=lb,$a[2]+=Yb),lb=$a[1]-$a[1].toFixed(la),Yb=$a[2]-$a[2].toFixed(la),Da=lb,Ua=Yb,$a[1]=+$a[1].toFixed(la),void($a[2]=+$a[2].toFixed(la));case "A":case "a":return Pb&&($a[6]+=lb,$a[7]+=Yb),lb=$a[6]-$a[6].toFixed(la),Yb=$a[7]-$a[7].toFixed(la),$a[1]=+$a[1].toFixed(la),$a[2]=+$a[2].toFixed(la),$a[3]=+$a[3].toFixed(la+2),$a[6]=+$a[6].toFixed(la),void($a[7]=+$a[7].toFixed(la));default:return La=
$a.length,Pb&&($a[La-2]+=lb,$a[La-1]+=Yb),lb=$a[La-2]-$a[La-2].toFixed(la),Yb=$a[La-1]-$a[La-1].toFixed(la),void $a.forEach(function(Ib,Uc){Uc&&($a[Uc]=+$a[Uc].toFixed(la))})}}),this||Bc};y.prototype.iterate=function(la,La){var Da,Ua=(this||Bc).segments,lb={},Yb=!1,$a=0,Pb=0,Ib=0,Uc=0;if(La||this.__evaluateStack(),Ua.forEach(function(Ud,pe){var uf=la(Ud,pe,$a,Pb);Array.isArray(uf)&&(lb[pe]=uf,Yb=!0);pe=Ud[0]===Ud[0].toLowerCase();switch(Ud[0]){case "m":case "M":return $a=Ud[1]+(pe?$a:0),Pb=Ud[2]+
(pe?Pb:0),Ib=$a,void(Uc=Pb);case "h":case "H":return void($a=Ud[1]+(pe?$a:0));case "v":case "V":return void(Pb=Ud[1]+(pe?Pb:0));case "z":case "Z":return $a=Ib,void(Pb=Uc);default:$a=Ud[Ud.length-2]+(pe?$a:0),Pb=Ud[Ud.length-1]+(pe?Pb:0)}}),!Yb)return this||Bc;var Lb=[];for(La=0;La<Ua.length;La++)if(void 0!==lb[La])for(Da=0;Da<lb[La].length;Da++)Lb.push(lb[La][Da]);else Lb.push(Ua[La]);return(this||Bc).segments=Lb,this||Bc};y.prototype.abs=function(){return this.iterate(function(la,La,Da,Ua){La=la[0];
var lb=La.toUpperCase();if(La!==lb)switch(la[0]=lb,La){case "v":return void(la[1]+=Ua);case "a":return la[6]+=Da,void(la[7]+=Ua);default:for(La=1;La<la.length;La++)la[La]+=La%2?Da:Ua}},!0),this||Bc};y.prototype.rel=function(){return this.iterate(function(la,La,Da,Ua){var lb=la[0],Yb=lb.toLowerCase();if(lb!==Yb&&(0!==La||"M"!==lb))switch(la[0]=Yb,lb){case "V":return void(la[1]-=Ua);case "A":return la[6]-=Da,void(la[7]-=Ua);default:for(La=1;La<la.length;La++)la[La]-=La%2?Da:Ua}},!0),this||Bc};y.prototype.unarc=
function(){return this.iterate(function(la,La,Da,Ua){var lb,Yb,$a,Pb=[];La=la[0];return"A"!==La&&"a"!==La?null:("a"===La?(Yb=Da+la[6],$a=Ua+la[7]):(Yb=la[6],$a=la[7]),lb=AW(Da,Ua,Yb,$a,la[4],la[5],la[1],la[2],la[3]),0===lb.length?[["a"===la[0]?"l":"L",la[6],la[7]]]:(lb.forEach(function(Ib){Pb.push(["C",Ib[2],Ib[3],Ib[4],Ib[5],Ib[6],Ib[7]])}),Pb))}),this||Bc};y.prototype.unshort=function(){var la,La,Da,Ua,lb,Yb=(this||Bc).segments;return this.iterate(function($a,Pb,Ib,Uc){var Lb,Ud=$a[0],pe=Ud.toUpperCase();
Pb&&("T"===pe?(Lb="t"===Ud,Da=Yb[Pb-1],"Q"===Da[0]?(la=Da[1]-Ib,La=Da[2]-Uc):"q"===Da[0]?(la=Da[1]-Da[3],La=Da[2]-Da[4]):(la=0,La=0),Ua=-la,lb=-La,Lb||(Ua+=Ib,lb+=Uc),Yb[Pb]=[Lb?"q":"Q",Ua,lb,$a[1],$a[2]]):"S"===pe&&(Lb="s"===Ud,Da=Yb[Pb-1],"C"===Da[0]?(la=Da[3]-Ib,La=Da[4]-Uc):"c"===Da[0]?(la=Da[3]-Da[5],La=Da[4]-Da[6]):(la=0,La=0),Ua=-la,lb=-La,Lb||(Ua+=Ib,lb+=Uc),Yb[Pb]=[Lb?"c":"C",Ua,lb,$a[1],$a[2],$a[3],$a[4]]))}),this||Bc};var SN=y,eI={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},BW=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
DW=function(la){var La=[];return la.replace(BW,function(Da,Ua,lb){Da=Ua.toLowerCase();lb=(lb=lb.match(CW))?lb.map(Number):[];for("m"===Da&&2<lb.length&&(La.push([Ua].concat(lb.splice(0,2))),Da="l",Ua="m"===Ua?"l":"L");0<=lb.length;){if(lb.length===eI[Da])return lb.unshift(Ua),La.push(lb);if(lb.length<eI[Da])throw Error("malformed path data");La.push([Ua].concat(lb.splice(0,eI[Da])))}}),La},CW=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,lr=function(la,La,Da,Ua,lb,Yb,$a,Pb){return new A(la,La,Da,Ua,lb,Yb,$a,
Pb)};A.prototype={constructor:A,init:function(){(this||Bc).length=this.getArcLength([(this||Bc).a.x,(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y])},getTotalLength:function(){return(this||Bc).length},getPointAtLength:function(la){la=H(la,(this||Bc).length,(this||Bc).getArcLength,[(this||Bc).a.x,(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y]);return this.getPoint([(this||Bc).a.x,
(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y],la)},getTangentAtLength:function(la){la=H(la,(this||Bc).length,(this||Bc).getArcLength,[(this||Bc).a.x,(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y]);la=this.getDerivative([(this||Bc).a.x,(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y],la);var La=Math.sqrt(la.x*la.x+la.y*
la.y);return 0<La?{x:la.x/La,y:la.y/La}:{x:0,y:0}},getPropertiesAtLength:function(la){la=H(la,(this||Bc).length,(this||Bc).getArcLength,[(this||Bc).a.x,(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y]);var La=this.getDerivative([(this||Bc).a.x,(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y],la);var Da=Math.sqrt(La.x*La.x+La.y*La.y);La=0<Da?{x:La.x/Da,y:La.y/Da}:{x:0,y:0};la=this.getPoint([(this||
Bc).a.x,(this||Bc).b.x,(this||Bc).c.x,(this||Bc).d.x],[(this||Bc).a.y,(this||Bc).b.y,(this||Bc).c.y,(this||Bc).d.y],la);return{x:la.x,y:la.y,tangentX:La.x,tangentY:La.y}}};var qW=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,
.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,
-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,
.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],
[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,
.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,
-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,
.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,
-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,
.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,
-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,
.9951872199970213]],rW=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],
[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],
[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,
.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,
.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],
[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,
.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],
[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,
.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,
.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,
.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,
.0123412297999872,.0123412297999872]],pW=[[1],[1,1],[1,2,1],[1,3,3,1]],WB=2*Math.PI,sW=function(la,La,Da,Ua,lb,Yb,$a,Pb,Ib){var Uc=Math.sin(lb*WB/360),Lb=Math.cos(lb*WB/360);lb=Lb*(la-Pb)/2+Uc*(La-Ib)/2;var Ud=-Uc*(la-Pb)/2+Lb*(La-Ib)/2;if(0===lb&&0===Ud||0===Da||0===Ua)return[];Da=Math.abs(Da);Ua=Math.abs(Ua);lb=lb*lb/(Da*Da)+Ud*Ud/(Ua*Ua);1<lb&&(Da*=Math.sqrt(lb),Ua*=Math.sqrt(lb));var pe=qa(la,La,Pb,Ib,Yb,$a,Da,Ua,Uc,Lb);la=[];La=pe[2];Yb=pe[3];$a=Math.max(Math.ceil(Math.abs(Yb)/(WB/4)),1);Yb/=
$a;for(Pb=0;Pb<$a;Pb++)la.push(Fa(La,Yb)),La+=Yb;return la.map(function(uf){for(var vf=0;vf<uf.length;vf+=2){var Ie=uf[vf+0],sf=uf[vf+1];Ie*=Da;sf*=Ua;var Oo=Uc*Ie+Lb*sf;uf[vf+0]=Lb*Ie-Uc*sf+pe[0];uf[vf+1]=Oo+pe[1]}return uf})},YN=function(la,La,Da,Ua,lb,Yb,$a,Pb,Ib){return new K(la,La,Da,Ua,lb,Yb,$a,Pb,Ib)};K.prototype={constructor:K,init:function(){},getTotalLength:function(){return(this||Bc).length},getPointAtLength:function(la){var La=this||Bc;0>la?la=0:la>(this||Bc).length&&(la=(this||Bc).length);
for(var Da=(this||Bc).partialLengths.length-1;(this||Bc).partialLengths[Da]>=la&&0<(this||Bc).partialLengths[Da];)Da--;Da<(this||Bc).partialLengths.length-1&&Da++;for(var Ua=0,lb=0;lb<Da;lb++)Ua+=La.partialLengths[lb];return(this||Bc).curves[Da].getPointAtLength(la-Ua)},getTangentAtLength:function(la){var La=this||Bc;0>la?la=0:la>(this||Bc).length&&(la=(this||Bc).length);for(var Da=(this||Bc).partialLengths.length-1;(this||Bc).partialLengths[Da]>=la&&0<(this||Bc).partialLengths[Da];)Da--;Da<(this||
Bc).partialLengths.length-1&&Da++;for(var Ua=0,lb=0;lb<Da;lb++)Ua+=La.partialLengths[lb];return(this||Bc).curves[Da].getTangentAtLength(la-Ua)},getPropertiesAtLength:function(la){var La=this.getTangentAtLength(la);la=this.getPointAtLength(la);return{x:la.x,y:la.y,tangentX:La.x,tangentY:La.y}}};var Mt=function(la,La,Da,Ua){return new Z(la,La,Da,Ua)};Z.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||Bc).x0-(this||Bc).x1,2)+Math.pow((this||Bc).y0-(this||Bc).y1,2))};Z.prototype.getPointAtLength=
function(la){la/=Math.sqrt(Math.pow((this||Bc).x0-(this||Bc).x1,2)+Math.pow((this||Bc).y0-(this||Bc).y1,2));return{x:(this||Bc).x0+((this||Bc).x1-(this||Bc).x0)*la,y:(this||Bc).y0+((this||Bc).y1-(this||Bc).y0)*la}};Z.prototype.getTangentAtLength=function(){var la=Math.sqrt(((this||Bc).x1-(this||Bc).x0)*((this||Bc).x1-(this||Bc).x0)+((this||Bc).y1-(this||Bc).y0)*((this||Bc).y1-(this||Bc).y0));return{x:((this||Bc).x1-(this||Bc).x0)/la,y:((this||Bc).y1-(this||Bc).y0)/la}};Z.prototype.getPropertiesAtLength=
function(la){la=this.getPointAtLength(la);var La=this.getTangentAtLength();return{x:la.x,y:la.y,tangentX:La.x,tangentY:La.y}};var tW=function(la){function La($a){if(!$a)return null;var Pb;$a=DW($a);for(var Ib=[0,0],Uc=[0,0],Lb=0;Lb<$a.length;Lb++)"M"===$a[Lb][0]?(Ib=[$a[Lb][1],$a[Lb][2]],lb.push(null)):"m"===$a[Lb][0]?(Ib=[$a[Lb][1]+Ib[0],$a[Lb][2]+Ib[1]],lb.push(null)):"L"===$a[Lb][0]?(Da+=Math.sqrt(Math.pow(Ib[0]-$a[Lb][1],2)+Math.pow(Ib[1]-$a[Lb][2],2)),lb.push(new Mt(Ib[0],$a[Lb][1],Ib[1],$a[Lb][2])),
Ib=[$a[Lb][1],$a[Lb][2]]):"l"===$a[Lb][0]?(Da+=Math.sqrt(Math.pow($a[Lb][1],2)+Math.pow($a[Lb][2],2)),lb.push(new Mt(Ib[0],$a[Lb][1]+Ib[0],Ib[1],$a[Lb][2]+Ib[1])),Ib=[$a[Lb][1]+Ib[0],$a[Lb][2]+Ib[1]]):"H"===$a[Lb][0]?(Da+=Math.abs(Ib[0]-$a[Lb][1]),lb.push(new Mt(Ib[0],$a[Lb][1],Ib[1],Ib[1])),Ib[0]=$a[Lb][1]):"h"===$a[Lb][0]?(Da+=Math.abs($a[Lb][1]),lb.push(new Mt(Ib[0],Ib[0]+$a[Lb][1],Ib[1],Ib[1])),Ib[0]=$a[Lb][1]+Ib[0]):"V"===$a[Lb][0]?(Da+=Math.abs(Ib[1]-$a[Lb][1]),lb.push(new Mt(Ib[0],Ib[0],Ib[1],
$a[Lb][1])),Ib[1]=$a[Lb][1]):"v"===$a[Lb][0]?(Da+=Math.abs($a[Lb][1]),lb.push(new Mt(Ib[0],Ib[0],Ib[1],Ib[1]+$a[Lb][1])),Ib[1]=$a[Lb][1]+Ib[1]):"z"===$a[Lb][0]||"Z"===$a[Lb][0]?(Da+=Math.sqrt(Math.pow($a[0][1]-Ib[0],2)+Math.pow($a[0][2]-Ib[1],2)),lb.push(new Mt(Ib[0],$a[0][1],Ib[1],$a[0][2])),Ib=[$a[0][1],$a[0][2]]):"C"===$a[Lb][0]?(Pb=new lr(Ib[0],Ib[1],$a[Lb][1],$a[Lb][2],$a[Lb][3],$a[Lb][4],$a[Lb][5],$a[Lb][6]),Da+=Pb.getTotalLength(),Ib=[$a[Lb][5],$a[Lb][6]],lb.push(Pb)):"c"===$a[Lb][0]?(Pb=new lr(Ib[0],
Ib[1],Ib[0]+$a[Lb][1],Ib[1]+$a[Lb][2],Ib[0]+$a[Lb][3],Ib[1]+$a[Lb][4],Ib[0]+$a[Lb][5],Ib[1]+$a[Lb][6]),Da+=Pb.getTotalLength(),Ib=[$a[Lb][5]+Ib[0],$a[Lb][6]+Ib[1]],lb.push(Pb)):"S"===$a[Lb][0]?(Pb=0<Lb&&-1<["C","c","S","s"].indexOf($a[Lb-1][0])?new lr(Ib[0],Ib[1],2*Ib[0]-$a[Lb-1][$a[Lb-1].length-4],2*Ib[1]-$a[Lb-1][$a[Lb-1].length-3],$a[Lb][1],$a[Lb][2],$a[Lb][3],$a[Lb][4]):new lr(Ib[0],Ib[1],Ib[0],Ib[1],$a[Lb][1],$a[Lb][2],$a[Lb][3],$a[Lb][4]),Da+=Pb.getTotalLength(),Ib=[$a[Lb][3],$a[Lb][4]],lb.push(Pb)):
"s"===$a[Lb][0]?(Pb=0<Lb&&-1<["C","c","S","s"].indexOf($a[Lb-1][0])?new lr(Ib[0],Ib[1],Ib[0]+Pb.d.x-Pb.c.x,Ib[1]+Pb.d.y-Pb.c.y,Ib[0]+$a[Lb][1],Ib[1]+$a[Lb][2],Ib[0]+$a[Lb][3],Ib[1]+$a[Lb][4]):new lr(Ib[0],Ib[1],Ib[0],Ib[1],Ib[0]+$a[Lb][1],Ib[1]+$a[Lb][2],Ib[0]+$a[Lb][3],Ib[1]+$a[Lb][4]),Da+=Pb.getTotalLength(),Ib=[$a[Lb][3]+Ib[0],$a[Lb][4]+Ib[1]],lb.push(Pb)):"Q"===$a[Lb][0]?(Pb=new lr(Ib[0],Ib[1],$a[Lb][1],$a[Lb][2],$a[Lb][3],$a[Lb][4]),Da+=Pb.getTotalLength(),lb.push(Pb),Ib=[$a[Lb][3],$a[Lb][4]],
Uc=[$a[Lb][1],$a[Lb][2]]):"q"===$a[Lb][0]?(Pb=new lr(Ib[0],Ib[1],Ib[0]+$a[Lb][1],Ib[1]+$a[Lb][2],Ib[0]+$a[Lb][3],Ib[1]+$a[Lb][4]),Da+=Pb.getTotalLength(),Uc=[Ib[0]+$a[Lb][1],Ib[1]+$a[Lb][2]],Ib=[$a[Lb][3]+Ib[0],$a[Lb][4]+Ib[1]],lb.push(Pb)):"T"===$a[Lb][0]?(Pb=0<Lb&&-1<["Q","q","T","t"].indexOf($a[Lb-1][0])?new lr(Ib[0],Ib[1],2*Ib[0]-Uc[0],2*Ib[1]-Uc[1],$a[Lb][1],$a[Lb][2]):new Mt(Ib[0],$a[Lb][1],Ib[1],$a[Lb][2]),lb.push(Pb),Da+=Pb.getTotalLength(),Uc=[2*Ib[0]-Uc[0],2*Ib[1]-Uc[1]],Ib=[$a[Lb][1],$a[Lb][2]]):
"t"===$a[Lb][0]?(Pb=0<Lb&&-1<["Q","q","T","t"].indexOf($a[Lb-1][0])?new lr(Ib[0],Ib[1],2*Ib[0]-Uc[0],2*Ib[1]-Uc[1],Ib[0]+$a[Lb][1],Ib[1]+$a[Lb][2]):new Mt(Ib[0],Ib[0]+$a[Lb][1],Ib[1],Ib[1]+$a[Lb][2]),Da+=Pb.getTotalLength(),Uc=[2*Ib[0]-Uc[0],2*Ib[1]-Uc[1]],Ib=[$a[Lb][1]+Ib[0],$a[Lb][2]+Ib[0]],lb.push(Pb)):"A"===$a[Lb][0]?(Pb=new YN(Ib[0],Ib[1],$a[Lb][1],$a[Lb][2],$a[Lb][3],$a[Lb][4],$a[Lb][5],$a[Lb][6],$a[Lb][7]),Da+=Pb.getTotalLength(),Ib=[$a[Lb][6],$a[Lb][7]],lb.push(Pb)):"a"===$a[Lb][0]&&(Pb=new YN(Ib[0],
Ib[1],$a[Lb][1],$a[Lb][2],$a[Lb][3],$a[Lb][4],$a[Lb][5],Ib[0]+$a[Lb][6],Ib[1]+$a[Lb][7]),Da+=Pb.getTotalLength(),Ib=[Ib[0]+$a[Lb][6],Ib[1]+$a[Lb][7]],lb.push(Pb)),Ua.push(Da);return La}var Da=0,Ua=[],lb=[];La.getTotalLength=function(){return Da};La.getPointAtLength=function($a){$a=Yb($a);return lb[$a.i].getPointAtLength($a.fraction)};La.getTangentAtLength=function($a){$a=Yb($a);return lb[$a.i].getTangentAtLength($a.fraction)};La.getPropertiesAtLength=function($a){$a=Yb($a);return lb[$a.i].getPropertiesAtLength($a.fraction)};
var Yb=function($a){0>$a?$a=0:$a>Da&&($a=Da);for(var Pb=Ua.length-1;Ua[Pb]>=$a&&0<Ua[Pb];)Pb--;return Pb++,{fraction:$a-Ua[Pb-1],i:Pb}};return La(la)},dI='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',uW=function(la,La){for(var Da,Ua,lb,Yb=la.length,$a=1/0,Pb=0;Pb<Yb;Pb++)!function(Ib){Ua=0;La.forEach(function(Uc,
Lb){Uc=R(la[(Ib+Lb)%Yb],Uc);Ua+=Uc*Uc});Ua<$a&&($a=Ua,Da=Ib)}(Pb);Da&&(lb=la.splice(0,Da),la.splice.apply(la,[la.length,0].concat(lb)))},xW=hc;hc.deviation=function(la,La,Da,Ua){var lb=La&&La.length,Yb=Math.abs(Jh(la,0,lb?La[0]*Da:la.length,Da));if(lb){lb=0;for(var $a=La.length;lb<$a;lb++)Yb-=Math.abs(Jh(la,La[lb]*Da,lb<$a-1?La[lb+1]*Da:la.length,Da))}for(lb=La=0;lb<Ua.length;lb+=3){$a=Ua[lb]*Da;var Pb=Ua[lb+1]*Da,Ib=Ua[lb+2]*Da;La+=Math.abs((la[$a]-la[Ib])*(la[Pb+1]-la[$a+1])-(la[$a]-la[Pb])*(la[Ib+
1]-la[$a+1]))}return 0===Yb&&0===La?0:Math.abs((La-Yb)/Yb)};hc.flatten=function(la){for(var La=la[0][0].length,Da={vertices:[],holes:[],dimensions:La},Ua=0,lb=0;lb<la.length;lb++){for(var Yb=0;Yb<la[lb].length;Yb++)for(var $a=0;$a<La;$a++)Da.vertices.push(la[lb][Yb][$a]);0<lb&&(Ua+=la[lb-1].length,Da.holes.push(Ua))}return Da};var ZN=function(la){return la},TN=function(la){if(null==la)return ZN;var La,Da,Ua=la.scale[0],lb=la.scale[1],Yb=la.translate[0],$a=la.translate[1];return function(Pb,Ib){Ib||
(La=Da=0);Ib=2;var Uc=Pb.length,Lb=Array(Uc);Lb[0]=(La+=Pb[0])*Ua+Yb;for(Lb[1]=(Da+=Pb[1])*lb+$a;Ib<Uc;)Lb[Ib]=Pb[Ib],++Ib;return Lb}},Ov=function(la,La){return"GeometryCollection"===La.type?{type:"FeatureCollection",features:La.geometries.map(function(Da){return fh(la,Da)})}:fh(la,La)},UN=function(la,La){function Da(Uc){var Lb,Ud=la.arcs[0>Uc?~Uc:Uc],pe=Ud[0];return la.transform?(Lb=[0,0],Ud.forEach(function(uf){Lb[0]+=uf[0];Lb[1]+=uf[1]})):Lb=Ud[Ud.length-1],0>Uc?[Lb,pe]:[pe,Lb]}function Ua(Uc,
Lb){for(var Ud in Uc){var pe=Uc[Ud];delete Lb[pe.start];delete pe.start;delete pe.end;pe.forEach(function(uf){lb[0>uf?~uf:uf]=1});Pb.push(pe)}}var lb={},Yb={},$a={},Pb=[],Ib=-1;return La.forEach(function(Uc,Lb){var Ud,pe=la.arcs[0>Uc?~Uc:Uc];3>pe.length&&!pe[1][0]&&!pe[1][1]&&(Ud=La[++Ib],La[Ib]=Uc,La[Lb]=Ud)}),La.forEach(function(Uc){var Lb=Da(Uc);var Ud=Lb[0],pe=Lb[1];(Lb=$a[Ud])?(delete $a[Lb.end],Lb.push(Uc),Lb.end=pe,Uc=Yb[pe])?(delete Yb[Uc.start],Ud=Uc===Lb?Lb:Lb.concat(Uc),Yb[Ud.start=Lb.start]=
$a[Ud.end=Uc.end]=Ud):Yb[Lb.start]=$a[Lb.end]=Lb:(Lb=Yb[pe])?(delete Yb[Lb.start],Lb.unshift(Uc),Lb.start=Ud,Uc=$a[Ud])?(delete $a[Uc.end],Ud=Uc===Lb?Lb:Uc.concat(Lb),Yb[Ud.start=Uc.start]=$a[Ud.end=Lb.end]=Ud):Yb[Lb.start]=$a[Lb.end]=Lb:(Lb=[Uc],Yb[Lb.start=Ud]=$a[Lb.end=pe]=Lb)}),Ua($a,Yb),Ua(Yb,$a),La.forEach(function(Uc){lb[0>Uc?~Uc:Uc]||Pb.push([Uc])}),Pb},fI=function(la,La){for(var Da=0,Ua=la.length;Da<Ua;){var lb=Da+Ua>>>1;la[lb]<La?Da=lb+1:Ua=lb}return Da},WN=function(la){function La(vf,Ie){vf.forEach(function(sf){0>
sf&&(sf=~sf);var Oo=lb[sf];Oo?Oo.push(Ie):lb[sf]=[Ie]})}function Da(vf,Ie){vf.forEach(function(sf){La(sf,Ie)})}function Ua(vf,Ie){"GeometryCollection"===vf.type?vf.geometries.forEach(function(sf){Ua(sf,Ie)}):vf.type in $a&&$a[vf.type](vf.arcs,Ie)}var lb={},Yb=la.map(function(){return[]}),$a={LineString:La,MultiLineString:Da,Polygon:Da,MultiPolygon:function(vf,Ie){vf.forEach(function(sf){Da(sf,Ie)})}};la.forEach(Ua);for(var Pb in lb){la=lb[Pb];for(var Ib=la.length,Uc=0;Uc<Ib;++Uc)for(var Lb=Uc+1;Lb<
Ib;++Lb){var Ud,pe=la[Uc],uf=la[Lb];(Ud=Yb[pe])[Pb=fI(Ud,uf)]!==uf&&Ud.splice(Pb,0,uf);(Ud=Yb[uf])[Pb=fI(Ud,pe)]!==pe&&Ud.splice(Pb,0,pe)}}return Yb},Iz=function(la,La){return la<La?-1:la>La?1:la>=La?0:NaN},VN=function(la){return 1===la.length&&(la=Tj(la)),{left:function(La,Da,Ua,lb){null==Ua&&(Ua=0);for(null==lb&&(lb=La.length);Ua<lb;){var Yb=Ua+lb>>>1;0>la(La[Yb],Da)?Ua=Yb+1:lb=Yb}return Ua},right:function(La,Da,Ua,lb){null==Ua&&(Ua=0);for(null==lb&&(lb=La.length);Ua<lb;){var Yb=Ua+lb>>>1;0<la(La[Yb],
Da)?lb=Yb:Ua=Yb+1}return Ua}}};VN(Iz);var yW=function(la,La){return yj(gk(zj(la),la),La)},zW=function(la,La){if(8<la.length)return la.map(function(Ua,lb){return lb});var Da=la.map(function(Ua){return La.map(function(lb){lb=R(jb(Ua),jb(lb));return lb*lb})});return gi(la,La,Da)};c.interpolate=function(la,La,Da){void 0===Da&&(Da={});var Ua=Da.maxSegmentLength;void 0===Ua&&(Ua=10);Da=Da.string;void 0===Da&&(Da=!0);var lb=wa(la,Ua);Ua=wa(La,Ua);var Yb=Fb(lb,Ua,Da);return!Da||"string"!=typeof la&&"string"!=
typeof La?Yb:function($a){return 1E-4>$a&&"string"==typeof la?la:1E-4>1-$a&&"string"==typeof La?La:Yb($a)}};c.separate=pi;c.combine=function(la,La,Da){void 0===Da&&(Da={});var Ua=Da.maxSegmentLength;void 0===Ua&&(Ua=10);var lb=Da.string;void 0===lb&&(lb=!0);Da=Da.single;void 0===Da&&(Da=!1);var Yb=pi(La,la,{maxSegmentLength:Ua,string:lb,single:Da});return Da?function($a){return Yb(1-$a)}:Yb.map(function($a){return function(Pb){return $a(1-Pb)}})};c.interpolateAll=function(la,La,Da){void 0===Da&&(Da=
{});var Ua=Da.maxSegmentLength;void 0===Ua&&(Ua=10);var lb=Da.string;void 0===lb&&(lb=!0);Da=Da.single;if(void 0===Da&&(Da=!1),!Array.isArray(la)||!Array.isArray(La)||la.length!==La.length||!la.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var Yb,$a,Pb=function(Uc){return wa(Uc,Ua)},Ib=la.map(Pb);Pb=La.map(Pb);
return Da?(la.every(function(Uc){return"string"==typeof Uc})&&(Yb=la.slice(0)),La.every(function(Uc){return"string"==typeof Uc})&&($a=La.slice(0))):(Yb=la.slice(0),$a=La.slice(0)),Bi(Ib,Pb,{string:lb,single:Da,t0:Yb,t1:$a,match:!1})};c.splitPathString=function(la){return ob((new SN(la)).abs())};c.toPathString=pa;c.fromCircle=Kj;c.toCircle=function(la,La,Da,Ua,lb){var Yb=Kj(La,Da,Ua,la,lb);return function($a){return Yb(1-$a)}};c.fromRect=xk;c.toRect=function(la,La,Da,Ua,lb,Yb){var $a=xk(La,Da,Ua,lb,
la,Yb);return function(Pb){return $a(1-Pb)}};Object.defineProperty(c,"__esModule",{value:!0})});var mpa={},npa="function"===typeof Float32Array,opa=mpa=function(c,h,n,b){if(!(0<=c&&1>=c&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(c===h&&n===b)return x;for(var d=npa?new Float32Array(11):Array(11),k=0;11>k;++k)d[k]=q(.1*k,c,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var f=0,l=1;10!==l&&d[l]<=a;++l)f+=.1;--l;l=f+(a-d[l])/(d[l+1]-d[l])*.1;var r=3*(1-3*n+3*
c)*l*l+2*(3*n-6*c)*l+3*c;if(.001<=r){for(f=0;4>f;++f){r=3*(1-3*n+3*c)*l*l+2*(3*n-6*c)*l+3*c;if(0===r)break;var v=q(l,c,n)-a;l-=v/r}a=l}else if(0===r)a=l;else{l=f;f+=.1;var y=0;do v=l+(f-l)/2,r=q(v,c,n)-a,0<r?f=v:l=v;while(1E-7<Math.abs(r)&&10>++y);a=v}return q(a,h,b)}},qc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var c={},h={};!function(n,b){function d(){(this||qc)._delay=0;(this||qc)._endDelay=0;(this||qc)._fill="none";(this||qc)._iterationStart=
0;(this||qc)._iterations=1;(this||qc)._duration=0;(this||qc)._playbackRate=1;(this||qc)._direction="normal";(this||qc)._easing="linear";(this||qc)._easingFunction=F}function k(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(U,na,aa){var xa=new d;return na&&(xa.fill="both",xa.duration="auto"),"number"!=typeof U||isNaN(U)?void 0!==U&&Object.getOwnPropertyNames(U).forEach(function(jb){"auto"==U[jb]||("number"==typeof xa[jb]||
"duration"==jb)&&("number"!=typeof U[jb]||isNaN(U[jb]))||"fill"==jb&&-1==A.indexOf(U[jb])||"direction"==jb&&-1==E.indexOf(U[jb])||"playbackRate"==jb&&1!==U[jb]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(xa[jb]=U[jb])}):xa.duration=U,xa}function f(U,na,aa,xa){return 0>U||1<U||0>aa||1<aa?F:function(jb){if(0>=jb){var ob=0;return 0<U?ob=na/U:!na&&0<aa&&(ob=xa/aa),ob*jb}if(1<=jb)return ob=0,1>aa?ob=(xa-1)/(aa-1):1==aa&&1>U&&(ob=(na-1)/(U-
1)),1+ob*(jb-1);ob=0;for(var pa=1;ob<pa;){var ka=(ob+pa)/2,wa=3*U*(1-ka)*(1-ka)*ka+3*aa*(1-ka)*ka*ka+ka*ka*ka;if(1E-5>Math.abs(jb-wa))break;wa<jb?ob=ka:pa=ka}return 3*na*(1-ka)*(1-ka)*ka+3*xa*(1-ka)*ka*ka+ka*ka*ka}}function l(U,na){return function(aa){if(1<=aa)return 1;var xa=1/U;return(aa+=na*xa)-aa%xa}}function r(U){Y||(Y=document.createElement("div").style);Y.animationTimingFunction="";Y.animationTimingFunction=U;var na=Y.animationTimingFunction;if(""==na&&k())throw new TypeError(U+" is not a valid value for easing");
return na}function v(U){if("linear"==U)return F;var na=S.exec(U);return na?f.apply(this||qc,na.slice(1).map(Number)):(na=ea.exec(U))?l(Number(na[1]),O):(na=qa.exec(U))?l(Number(na[1]),{start:H,middle:J,end:O}[na[2]]):L[U]||F}function y(U,na,aa){if(null==na)return Fa;var xa=aa.delay+U+aa.endDelay;return na<Math.min(aa.delay,xa)?K:na>=Math.min(aa.delay+U,xa)?Z:R}var A=["backwards","forwards","both","none"],E=["reverse","alternate","alternate-reverse"],F=function(U){return U};d.prototype={_setMember:function(U,
na){(this||qc)["_"+U]=na;(this||qc)._effect&&((this||qc)._effect._timingInput[U]=na,(this||qc)._effect._timing=n.normalizeTimingInput((this||qc)._effect._timingInput),(this||qc)._effect.activeDuration=n.calculateActiveDuration((this||qc)._effect._timing),(this||qc)._effect._animation&&(this||qc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||qc)._playbackRate},set delay(U){this._setMember("delay",U)},get delay(){return(this||qc)._delay},set endDelay(U){this._setMember("endDelay",
U)},get endDelay(){return(this||qc)._endDelay},set fill(U){this._setMember("fill",U)},get fill(){return(this||qc)._fill},set iterationStart(U){if((isNaN(U)||0>U)&&k())throw new TypeError("iterationStart must be a non-negative number, received: "+U);this._setMember("iterationStart",U)},get iterationStart(){return(this||qc)._iterationStart},set duration(U){if("auto"!=U&&(isNaN(U)||0>U)&&k())throw new TypeError("duration must be non-negative or auto, received: "+U);this._setMember("duration",U)},get duration(){return(this||
qc)._duration},set direction(U){this._setMember("direction",U)},get direction(){return(this||qc)._direction},set easing(U){(this||qc)._easingFunction=v(r(U));this._setMember("easing",U)},get easing(){return(this||qc)._easing},set iterations(U){if((isNaN(U)||0>U)&&k())throw new TypeError("iterations must be non-negative, received: "+U);this._setMember("iterations",U)},get iterations(){return(this||qc)._iterations}};var H=1,J=.5,O=0,L={ease:f(.25,.1,.25,1),"ease-in":f(.42,0,1,1),"ease-out":f(0,0,.58,
1),"ease-in-out":f(.42,0,.58,1),"step-start":l(1,H),"step-middle":l(1,J),"step-end":l(1,O)},Y=null,S=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,ea=/steps\(\s*(\d+)\s*\)/,qa=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Fa=0,K=1,Z=2,R=3;n.cloneTimingInput=function(U){if("number"==typeof U)return U;var na={},aa;for(aa in U)na[aa]=U[aa];return na};n.makeTiming=a;n.numericTimingToObject=function(U){return"number"==
typeof U&&(U=isNaN(U)?{duration:0}:{duration:U}),U};n.normalizeTimingInput=function(U,na){return U=n.numericTimingToObject(U),a(U,na)};n.calculateActiveDuration=function(U){return Math.abs((0===U.duration||0===U.iterations?0:U.duration*U.iterations)/U.playbackRate)};n.calculateIterationProgress=function(U,na,aa){var xa=y(U,na,aa);a:{var jb=aa.fill;switch(xa){case K:U="backwards"==jb||"both"==jb?0:null;break a;case R:U=na-aa.delay;break a;case Z:U="forwards"==jb||"both"==jb?U:null;break a;case Fa:U=
null;break a}U=void 0}if(null===U)return null;na=aa.duration;jb=aa.iterationStart;na=(0===na?xa!==K&&(jb+=aa.iterations):jb+=U/na,jb);jb=na===1/0?aa.iterationStart%1:na%1;U=(0!==jb||xa!==Z||0===aa.iterations||0===U&&0!==aa.duration||(jb=1),jb);jb=xa===Z&&aa.iterations===1/0?1/0:1===U?Math.floor(na)-1:Math.floor(na);na=xa=aa.direction;"normal"!==xa&&"reverse"!==xa&&("alternate-reverse"===xa&&(jb+=1),na="normal",jb!==1/0&&0!=jb%2&&(na="reverse"));return aa._easingFunction("normal"===na?U:1-U)};n.calculatePhase=
y;n.normalizeEasing=r;n.parseEasingFunction=v}(c);(function(n,b){function d(l){var r=[],v;for(v in l)if(!(v in["easing","offset","composite"])){var y=l[v];Array.isArray(y)||(y=[y]);for(var A,E=y.length,F=0;F<E;F++)A={},A.offset="offset"in l?l.offset:1==E?1:F/(E-1),"easing"in l&&(A.easing=l.easing),"composite"in l&&(A.composite=l.composite),A[v]=y[F],r.push(A)}return r.sort(function(H,J){return H.offset-J.offset}),r}var k={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var f={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=d;n.normalizeKeyframes=function(l){function r(){var F=v.length;null==v[F-1].offset&&(v[F-1].offset=1);1<F&&null==v[0].offset&&(v[0].offset=0);for(var H=0,J=v[0].offset,O=1;O<F;O++){var L=v[O].offset;if(null!=L){for(var Y=1;Y<O-H;Y++)v[H+Y].offset=J+(L-J)*Y/(O-H);H=O;J=L}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=d(l));var v=l.map(function(F){var H={},J;for(J in F){var O=F[J];if("offset"==
J){if(null!=O){if(O=Number(O),!isFinite(O))throw new TypeError("Keyframe offsets must be numbers.");if(0>O||1<O)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==J){if("add"==O||"accumulate"==O)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=O)throw new TypeError("Invalid composite mode "+O+".");}else O="easing"==J?n.normalizeEasing(O):""+O;var L=void 0,Y=J,S=O;O=H;var ea=Y;if("display"!==
ea&&0!==ea.lastIndexOf("animation",0)&&0!==ea.lastIndexOf("transition",0))if(ea=k[Y])for(L in a.style[Y]=S,ea)Y=ea[L],S=a.style[Y],O[Y]=Y in f?f[Y][S]||S:S;else O[Y]=Y in f?f[Y][S]||S:S}return void 0==H.offset&&(H.offset=null),void 0==H.easing&&(H.easing="linear"),H});l=!0;for(var y=-1/0,A=0;A<v.length;A++){var E=v[A].offset;if(null!=E){if(E<y)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");y=E}else l=!1}return v=v.filter(function(F){return 0<=F.offset&&
1>=F.offset}),l||r(),v}})(c);(function(n){var b={};n.isDeprecated=function(d,k,a,f){f=f?"are":"is";var l=new Date;k=new Date(k);return k.setMonth(k.getMonth()+3),!(l<k&&(d in b||console.warn("Web Animations: "+d+" "+f+" deprecated and will stop working on "+k.toDateString()+". "+a),b[d]=!0,1))};n.deprecated=function(d,k,a,f){var l=f?"are":"is";if(n.isDeprecated(d,k,a,f))throw Error(d+" "+l+" no longer supported. "+a);}})(c);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===n[d]&&(b=!0)})),!b)return}!function(d,k,a){function f(r){for(var v={},y=0;y<r.length;y++)for(var A in r[y])if("offset"!=A&&"easing"!=A&&"composite"!=A){var E={offset:r[y].offset,easing:r[y].easing,value:r[y][A]};v[A]=v[A]||[];v[A].push(E)}for(var F in v)if(r=v[F],0!=r[0].offset||1!=r[r.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return v}function l(r){var v=[],y;for(y in r)for(var A=r[y],E=0;E<A.length-1;E++){var F=E,H=E+1,J=A[F].offset,O=A[H].offset,L=J,Y=O;0==E&&(L=-1/0,0==O&&(H=F));E==A.length-2&&(Y=1/0,1==J&&(F=H));v.push({applyFrom:L,applyTo:Y,startOffset:A[F].offset,endOffset:A[H].offset,easingFunction:d.parseEasingFunction(A[F].easing),property:y,interpolation:k.propertyInterpolation(y,A[F].value,A[H].value)})}return v.sort(function(S,ea){return S.startOffset-ea.startOffset}),
v}k.convertEffectInput=function(r){r=d.normalizeKeyframes(r);var v=f(r),y=l(v);return function(A,E){if(null!=E)y.filter(function(H){return E>=H.applyFrom&&E<H.applyTo}).forEach(function(H){var J=E-H.startOffset,O=H.endOffset-H.startOffset;J=0==O?0:H.easingFunction(J/O);k.apply(A,H.property,H.interpolation(J))});else for(var F in v)"offset"!=F&&"easing"!=F&&"composite"!=F&&k.clear(A,F)}}}(c,h);(function(d,k,a){function f(v){return v.replace(/-(.)/g,function(y,A){return A.toUpperCase()})}var l={};k.addPropertiesHandler=
function(v,y,A){for(var E=0;E<A.length;E++){var F=v,H=y,J=f(A[E]);l[J]=l[J]||[];l[J].push([F,H])}};var r={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};k.propertyInterpolation=function(v,y,A){var E=v;/-/.test(v)&&!d.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(E=f(v));"initial"!=y&&"initial"!=A||("initial"==y&&(y=r[E]),"initial"==A&&(A=r[E]));v=y==A?[]:l[E];for(E=0;v&&E<v.length;E++){var F=v[E][0](y),H=v[E][0](A);if(void 0!==F&&void 0!==H&&(F=
v[E][1](F,H))){var J=k.Interpolation.apply(null,F);return function(O){return 0==O?y:1==O?A:J(O)}}}return k.Interpolation(!1,!0,function(O){return O?A:y})}})(c,h);(function(d,k,a){function f(l){var r=d.calculateActiveDuration(l),v=function(y){return d.calculateIterationProgress(r,y,l)};return v._totalDuration=l.delay+r+l.endDelay,v}k.KeyframeEffect=function(l,r,v,y){var A,E=f(d.normalizeTimingInput(v)),F=k.convertEffectInput(r);r=function(){F(l,A)};return r._update=function(H){return null!==(A=E(H))},
r._clear=function(){F(l,null)},r._hasSameTarget=function(H){return l===H},r._target=l,r._totalDuration=E._totalDuration,r._id=y,r}})(c,h);(function(d,k){function a(F,H,J){J.enumerable=!0;J.configurable=!0;Object.defineProperty(F,H,J)}function f(F){(this||qc)._element=F;(this||qc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||qc)._style=F.style;(this||qc)._length=0;(this||qc)._isAnimatedProperty={};var H=window;F=!(!F.namespaceURI||-1==F.namespaceURI.indexOf("/svg"))&&
(r in H||(H[r]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(H.navigator.userAgent)),H[r]);(this||qc)._updateSvgTransformAttr=F;(this||qc)._savedTransformAttr=null;for(F=0;F<(this||qc)._style.length;F++)H=(this||qc)._style[F],(this||qc)._surrogateStyle[H]=(this||qc)._style[H];this._updateIndices()}function l(F){if(!F._webAnimationsPatchedStyle){var H=new f(F);try{a(F,"style",{get:function(){return H}})}catch(J){F.style._set=function(O,L){F.style[O]=L},F.style._clear=function(O){F.style[O]=""}}F._webAnimationsPatchedStyle=
F.style}}var r="_webAnimationsUpdateSvgTransformAttr";k={cssText:1,length:1,parentRule:1};var v={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},y={removeProperty:1,setProperty:1};f.prototype={get cssText(){return(this||qc)._surrogateStyle.cssText},set cssText(F){for(var H={},J=0;J<(this||qc)._surrogateStyle.length;J++)H[(this||qc)._surrogateStyle[J]]=!0;(this||qc)._surrogateStyle.cssText=F;this._updateIndices();for(J=0;J<(this||qc)._surrogateStyle.length;J++)H[(this||
qc)._surrogateStyle[J]]=!0;for(var O in H)(this||qc)._isAnimatedProperty[O]||(this||qc)._style.setProperty(O,(this||qc)._surrogateStyle.getPropertyValue(O))},get length(){return(this||qc)._surrogateStyle.length},get parentRule(){return(this||qc)._style.parentRule},_updateIndices:function(){for(;(this||qc)._length<(this||qc)._surrogateStyle.length;)Object.defineProperty(this||qc,(this||qc)._length,{configurable:!0,enumerable:!1,get:function(F){return function(){return(this||qc)._surrogateStyle[F]}}((this||
qc)._length)}),(this||qc)._length++;for(;(this||qc)._length>(this||qc)._surrogateStyle.length;)(this||qc)._length--,Object.defineProperty(this||qc,(this||qc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(F,H){(this||qc)._style[F]=H;(this||qc)._isAnimatedProperty[F]=!0;(this||qc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(F)&&(null==(this||qc)._savedTransformAttr&&((this||qc)._savedTransformAttr=(this||qc)._element.getAttribute("transform")),(this||qc)._element.setAttribute("transform",
d.transformToSvgMatrix(H)))},_clear:function(F){(this||qc)._style[F]=(this||qc)._surrogateStyle[F];(this||qc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(F)&&((this||qc)._savedTransformAttr?(this||qc)._element.setAttribute("transform",(this||qc)._savedTransformAttr):(this||qc)._element.removeAttribute("transform"),(this||qc)._savedTransformAttr=null);delete (this||qc)._isAnimatedProperty[F]}};for(var A in v)f.prototype[A]=function(F,H){return function(){var J=(this||qc)._surrogateStyle[F].apply((this||
qc)._surrogateStyle,arguments);return H&&((this||qc)._isAnimatedProperty[arguments[0]]||(this||qc)._style[F].apply((this||qc)._style,arguments),this._updateIndices()),J}}(A,A in y);for(var E in document.documentElement.style)E in k||E in v||function(F){a(f.prototype,F,{get:function(){return(this||qc)._surrogateStyle[F]},set:function(H){(this||qc)._surrogateStyle[F]=H;this._updateIndices();(this||qc)._isAnimatedProperty[F]||((this||qc)._style[F]=H)}})}(E);d.apply=function(F,H,J){l(F);F.style._set(d.propertyName(H),
J)};d.clear=function(F,H){F._webAnimationsPatchedStyle&&F.style._clear(d.propertyName(H))}})(h);(function(d){window.Element.prototype.animate=function(k,a){var f="";return a&&a.id&&(f=a.id),d.timeline._play(d.KeyframeEffect(this||qc,k,a,f))}})(h);(function(d,k){function a(f,l,r){if("number"==typeof f&&"number"==typeof l)return f*(1-r)+l*r;if("boolean"==typeof f&&"boolean"==typeof l)return.5>r?f:l;if(f.length==l.length){for(var v=[],y=0;y<f.length;y++)v.push(a(f[y],l[y],r));return v}throw"Mismatched interpolation arguments "+
f+":"+l;}d.Interpolation=function(f,l,r){return function(v){return r(a(f,l,v))}}})(h);(function(d,k){k=function(){function a(f,l){for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],v=0;4>v;v++)for(var y=0;4>y;y++)for(var A=0;4>A;A++)r[v][y]+=l[v][A]*f[A][y];return r}return function(f,l,r,v,y){for(var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],E=0;4>E;E++)A[E][3]=y[E];for(E=0;3>E;E++)for(y=0;3>y;y++)A[3][E]+=f[y]*A[y][E];f=v[0];E=v[1];y=v[2];v=v[3];var F=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
F[0][0]=1-2*(E*E+y*y);F[0][1]=2*(f*E-y*v);F[0][2]=2*(f*y+E*v);F[1][0]=2*(f*E+y*v);F[1][1]=1-2*(f*f+y*y);F[1][2]=2*(E*y-f*v);F[2][0]=2*(f*y-E*v);F[2][1]=2*(E*y+f*v);F[2][2]=1-2*(f*f+E*E);A=a(A,F);v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],A=a(A,v));r[1]&&(v[2][1]=0,v[2][0]=r[0],A=a(A,v));r[0]&&(v[2][0]=0,v[1][0]=r[0],A=a(A,v));for(E=0;3>E;E++)for(y=0;3>y;y++)A[E][y]*=l[E];return 0==A[0][2]&&0==A[0][3]&&0==A[1][2]&&0==A[1][3]&&0==A[2][0]&&0==A[2][1]&&1==A[2][2]&&0==A[2][3]&&0==
A[3][2]&&1==A[3][3]?[A[0][0],A[0][1],A[1][0],A[1][1],A[3][0],A[3][1]]:A[0].concat(A[1],A[2],A[3])}}();d.composeMatrix=k;d.quat=function(a,f,l){var r=d.dot(a,f);r=Math.max(Math.min(r,1),-1);var v=[];if(1===r)v=a;else for(var y=Math.acos(r),A=1*Math.sin(l*y)/Math.sqrt(1-r*r),E=0;4>E;E++)v.push(a[E]*(Math.cos(l*y)-r*A)+f[E]*A);return v}})(h);(function(d,k,a){d.sequenceNumber=0;var f=function(l,r,v){(this||qc).target=l;(this||qc).currentTime=r;(this||qc).timelineTime=v;(this||qc).type="finish";(this||
qc).bubbles=!1;(this||qc).cancelable=!1;(this||qc).currentTarget=l;(this||qc).defaultPrevented=!1;(this||qc).eventPhase=Event.AT_TARGET;(this||qc).timeStamp=Date.now()};k.Animation=function(l){(this||qc).id="";l&&l._id&&((this||qc).id=l._id);(this||qc)._sequenceNumber=d.sequenceNumber++;(this||qc)._currentTime=0;(this||qc)._startTime=null;(this||qc)._paused=!1;(this||qc)._playbackRate=1;(this||qc)._inTimeline=!0;(this||qc)._finishedFlag=!0;(this||qc).onfinish=null;(this||qc)._finishHandlers=[];(this||
qc)._effect=l;(this||qc)._inEffect=(this||qc)._effect._update(0);(this||qc)._idle=!0;(this||qc)._currentTimePending=!1};k.Animation.prototype={_ensureAlive:function(){0>(this||qc).playbackRate&&0===(this||qc).currentTime?(this||qc)._inEffect=(this||qc)._effect._update(-1):(this||qc)._inEffect=(this||qc)._effect._update((this||qc).currentTime);(this||qc)._inTimeline||!(this||qc)._inEffect&&(this||qc)._finishedFlag||((this||qc)._inTimeline=!0,k.timeline._animations.push(this||qc))},_tickCurrentTime:function(l,
r){l!=(this||qc)._currentTime&&((this||qc)._currentTime=l,(this||qc)._isFinished&&!r&&((this||qc)._currentTime=0<(this||qc)._playbackRate?(this||qc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||qc)._idle||(this||qc)._currentTimePending?null:(this||qc)._currentTime},set currentTime(l){l=+l;isNaN(l)||(k.restart(),(this||qc)._paused||null==(this||qc)._startTime||((this||qc)._startTime=(this||qc)._timeline.currentTime-l/(this||qc)._playbackRate),(this||qc)._currentTimePending=
!1,(this||qc)._currentTime!=l&&((this||qc)._idle&&((this||qc)._idle=!1,(this||qc)._paused=!0),this._tickCurrentTime(l,!0),k.applyDirtiedAnimation(this||qc)))},get startTime(){return(this||qc)._startTime},set startTime(l){l=+l;isNaN(l)||(this||qc)._paused||(this||qc)._idle||((this||qc)._startTime=l,this._tickCurrentTime(((this||qc)._timeline.currentTime-(this||qc)._startTime)*(this||qc).playbackRate),k.applyDirtiedAnimation(this||qc))},get playbackRate(){return(this||qc)._playbackRate},set playbackRate(l){if(l!=
(this||qc)._playbackRate){var r=(this||qc).currentTime;(this||qc)._playbackRate=l;(this||qc)._startTime=null;"paused"!=(this||qc).playState&&"idle"!=(this||qc).playState&&((this||qc)._finishedFlag=!1,(this||qc)._idle=!1,this._ensureAlive(),k.applyDirtiedAnimation(this||qc));null!=r&&((this||qc).currentTime=r)}},get _isFinished(){return!(this||qc)._idle&&(0<(this||qc)._playbackRate&&(this||qc)._currentTime>=(this||qc)._totalDuration||0>(this||qc)._playbackRate&&0>=(this||qc)._currentTime)},get _totalDuration(){return(this||
qc)._effect._totalDuration},get playState(){return(this||qc)._idle?"idle":null==(this||qc)._startTime&&!(this||qc)._paused&&0!=(this||qc).playbackRate||(this||qc)._currentTimePending?"pending":(this||qc)._paused?"paused":(this||qc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||qc)._playbackRate)(this||qc)._currentTime=0;else{if(!((this||qc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||qc)._currentTime=(this||qc)._totalDuration}},play:function(){(this||qc)._paused=!1;((this||qc)._isFinished||(this||qc)._idle)&&(this._rewind(),(this||qc)._startTime=null);(this||qc)._finishedFlag=!1;(this||qc)._idle=!1;this._ensureAlive();k.applyDirtiedAnimation(this||qc)},pause:function(){(this||qc)._isFinished||(this||qc)._paused||(this||qc)._idle?(this||qc)._idle&&(this._rewind(),(this||qc)._idle=!1):(this||qc)._currentTimePending=!0;(this||qc)._startTime=null;(this||qc)._paused=!0},finish:function(){(this||
qc)._idle||((this||qc).currentTime=0<(this||qc)._playbackRate?(this||qc)._totalDuration:0,(this||qc)._startTime=(this||qc)._totalDuration-(this||qc).currentTime,(this||qc)._currentTimePending=!1,k.applyDirtiedAnimation(this||qc))},cancel:function(){(this||qc)._inEffect&&((this||qc)._inEffect=!1,(this||qc)._idle=!0,(this||qc)._paused=!1,(this||qc)._finishedFlag=!0,(this||qc)._currentTime=0,(this||qc)._startTime=null,(this||qc)._effect._update(null),k.applyDirtiedAnimation(this||qc))},reverse:function(){(this||
qc).playbackRate*=-1;this.play()},addEventListener:function(l,r){"function"==typeof r&&"finish"==l&&(this||qc)._finishHandlers.push(r)},removeEventListener:function(l,r){"finish"==l&&(l=(this||qc)._finishHandlers.indexOf(r),0<=l&&(this||qc)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||qc)._isFinished){if(!(this||qc)._finishedFlag){var r=new f(this||qc,(this||qc)._currentTime,l),v=(this||qc)._finishHandlers.concat((this||qc).onfinish?[(this||qc).onfinish]:[]);setTimeout(function(){v.forEach(function(y){y.call(r.target,
r)})},0);(this||qc)._finishedFlag=!0}}else(this||qc)._finishedFlag=!1},_tick:function(l,r){(this||qc)._idle||(this||qc)._paused||(null==(this||qc)._startTime?r&&((this||qc).startTime=l-(this||qc)._currentTime/(this||qc).playbackRate):(this||qc)._isFinished||this._tickCurrentTime((l-(this||qc)._startTime)*(this||qc).playbackRate));r&&((this||qc)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||qc).playState in{pending:1,running:1}||!(this||qc)._finishedFlag},_targetAnimations:function(){var l=
(this||qc)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();-1===l.indexOf(this||qc)&&l.push(this||qc)},_unmarkTarget:function(){var l=this._targetAnimations(),r=l.indexOf(this||qc);-1!==r&&l.splice(r,1)}}})(c,h);(function(d,k,a){function f(S){var ea=E;E=[];S<Y.currentTime&&(S=Y.currentTime);Y._animations.sort(l);Y._animations=y(S,!0,Y._animations)[0];ea.forEach(function(qa){qa[1](S)});v()}function l(S,
ea){return S._sequenceNumber-ea._sequenceNumber}function r(){(this||qc)._animations=[];(this||qc).currentTime=window.performance&&performance.now?performance.now():0}function v(){O.forEach(function(S){S()});O.length=0}function y(S,ea,qa){L=!0;J=!1;k.timeline.currentTime=S;H=!1;var Fa=[],K=[],Z=[],R=[];return qa.forEach(function(U){U._tick(S,ea);U._inEffect?(K.push(U._effect),U._markTarget()):(Fa.push(U._effect),U._unmarkTarget());U._needsTick&&(H=!0);var na=U._inEffect||U._needsTick;(U._inTimeline=
na)?Z.push(U):R.push(U)}),O.push.apply(O,Fa),O.push.apply(O,K),H&&requestAnimationFrame(function(){}),L=!1,[Z,R]}var A=window.requestAnimationFrame,E=[],F=0;window.requestAnimationFrame=function(S){var ea=F++;return 0==E.length&&A(f),E.push([ea,S]),ea};window.cancelAnimationFrame=function(S){E.forEach(function(ea){ea[0]==S&&(ea[1]=function(){})})};r.prototype={_play:function(S){S._timing=d.normalizeTimingInput(S.timing);S=new k.Animation(S);return S._idle=!1,S._timeline=this||qc,(this||qc)._animations.push(S),
k.restart(),k.applyDirtiedAnimation(S),S}};var H=!1,J=!1;k.restart=function(){return H||(H=!0,requestAnimationFrame(function(){}),J=!0),J};k.applyDirtiedAnimation=function(S){L||(S._markTarget(),S=S._targetAnimations(),S.sort(l),y(k.timeline.currentTime,!1,S.slice())[1].forEach(function(ea){ea=Y._animations.indexOf(ea);-1!==ea&&Y._animations.splice(ea,1)}),v())};var O=[],L=!1,Y=new r;k.timeline=Y})(c,h);(function(d,k){function a(A,E){for(var F=0,H=0;H<A.length;H++)F+=A[H]*E[H];return F}function f(A,
E){return[A[0]*E[0]+A[4]*E[1]+A[8]*E[2]+A[12]*E[3],A[1]*E[0]+A[5]*E[1]+A[9]*E[2]+A[13]*E[3],A[2]*E[0]+A[6]*E[1]+A[10]*E[2]+A[14]*E[3],A[3]*E[0]+A[7]*E[1]+A[11]*E[2]+A[15]*E[3],A[0]*E[4]+A[4]*E[5]+A[8]*E[6]+A[12]*E[7],A[1]*E[4]+A[5]*E[5]+A[9]*E[6]+A[13]*E[7],A[2]*E[4]+A[6]*E[5]+A[10]*E[6]+A[14]*E[7],A[3]*E[4]+A[7]*E[5]+A[11]*E[6]+A[15]*E[7],A[0]*E[8]+A[4]*E[9]+A[8]*E[10]+A[12]*E[11],A[1]*E[8]+A[5]*E[9]+A[9]*E[10]+A[13]*E[11],A[2]*E[8]+A[6]*E[9]+A[10]*E[10]+A[14]*E[11],A[3]*E[8]+A[7]*E[9]+A[11]*E[10]+
A[15]*E[11],A[0]*E[12]+A[4]*E[13]+A[8]*E[14]+A[12]*E[15],A[1]*E[12]+A[5]*E[13]+A[9]*E[14]+A[13]*E[15],A[2]*E[12]+A[6]*E[13]+A[10]*E[14]+A[14]*E[15],A[3]*E[12]+A[7]*E[13]+A[11]*E[14]+A[15]*E[15]]}function l(A){return 2*((A.deg||0)/360+(A.grad||0)/400+(A.turn||0))*Math.PI+(A.rad||0)}function r(A){switch(A.t){case "rotatex":return A=l(A.d[0]),[1,0,0,0,0,Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1];case "rotatey":return A=l(A.d[0]),[Math.cos(A),0,-Math.sin(A),0,0,1,0,0,Math.sin(A),
0,Math.cos(A),0,0,0,0,1];case "rotate":case "rotatez":return A=l(A.d[0]),[Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var E=A.d[0],F=A.d[1],H=A.d[2];A=l(A.d[3]);var J=E*E+F*F+H*H;0===J?(E=1,H=F=0):1!==J&&(J=Math.sqrt(J),E/=J,F/=J,H/=J);J=Math.sin(A/2);A=J*Math.cos(A/2);J*=J;return[1-2*(F*F+H*H)*J,2*(E*F*J+H*A),2*(E*H*J-F*A),0,2*(E*F*J-H*A),1-2*(E*E+H*H)*J,2*(F*H*J+E*A),0,2*(E*H*J+F*A),2*(F*H*J-E*A),1-2*(E*E+F*F)*J,0,0,0,0,1];case "scale":return[A.d[0],
0,0,0,0,A.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[A.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,A.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,A.d[0],0,0,0,0,1];case "scale3d":return[A.d[0],0,0,0,0,A.d[1],0,0,0,0,A.d[2],0,0,0,0,1];case "skew":return E=l(A.d[0]),F=l(A.d[1]),[1,Math.tan(F),0,0,Math.tan(E),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return A=l(A.d[0]),[1,0,0,0,Math.tan(A),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return A=l(A.d[0]),[1,Math.tan(A),
0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return E=A.d[0].px||0,F=A.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,0,1];case "translatex":return E=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,0,0,1];case "translatey":return F=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,F,0,1];case "translatez":return H=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,H,1];case "translate3d":return E=A.d[0].px||0,F=A.d[1].px||0,H=A.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,H,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,A.d[0].px?
-1/A.d[0].px:0,0,0,0,1];case "matrix":return[A.d[0],A.d[1],0,0,A.d[2],A.d[3],0,0,0,0,1,0,A.d[4],A.d[5],0,1];case "matrix3d":return A.d}}function v(A){return 0===A.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:A.map(r).reduce(f)}var y=function(){function A(J){return J[0][0]*J[1][1]*J[2][2]+J[1][0]*J[2][1]*J[0][2]+J[2][0]*J[0][1]*J[1][2]-J[0][2]*J[1][1]*J[2][0]-J[1][2]*J[2][1]*J[0][0]-J[2][2]*J[0][1]*J[1][0]}function E(J){var O=F(J);return[J[0]/O,J[1]/O,J[2]/O]}function F(J){return Math.sqrt(J[0]*J[0]+J[1]*
J[1]+J[2]*J[2])}function H(J,O,L,Y){return[L*J[0]+Y*O[0],L*J[1]+Y*O[1],L*J[2]+Y*O[2]]}return function(J){J=[J.slice(0,4),J.slice(4,8),J.slice(8,12),J.slice(12,16)];if(1!==J[3][3])return null;for(var O=[],L=0;4>L;L++)O.push(J[L].slice());for(L=0;3>L;L++)O[L][3]=0;if(0===A(O))return null;var Y=[];if(J[0][3]||J[1][3]||J[2][3]){Y.push(J[0][3]);Y.push(J[1][3]);Y.push(J[2][3]);Y.push(J[3][3]);var S=1/A(O),ea=O[0][0],qa=O[0][1];L=O[0][2];var Fa=O[1][0],K=O[1][1],Z=O[1][2],R=O[2][0],U=O[2][1],na=O[2][2];
S=[[(K*na-Z*U)*S,(L*U-qa*na)*S,(qa*Z-L*K)*S,0],[(Z*R-Fa*na)*S,(ea*na-L*R)*S,(L*Fa-ea*Z)*S,0],[(Fa*U-K*R)*S,(R*qa-ea*U)*S,(ea*K-qa*Fa)*S,0]];ea=[];for(qa=0;3>qa;qa++){for(Fa=L=0;3>Fa;Fa++)L+=O[3][Fa]*S[Fa][qa];ea.push(L)}O=(ea.push(1),S.push(ea),S);O=[[O[0][0],O[1][0],O[2][0],O[3][0]],[O[0][1],O[1][1],O[2][1],O[3][1]],[O[0][2],O[1][2],O[2][2],O[3][2]],[O[0][3],O[1][3],O[2][3],O[3][3]]];S=[];for(ea=0;4>ea;ea++){for(L=qa=0;4>L;L++)qa+=Y[L]*O[L][ea];S.push(qa)}Y=S}else Y=[0,0,0,1];O=J[3].slice(0,3);S=
[];S.push(J[0].slice(0,3));ea=[];ea.push(F(S[0]));S[0]=E(S[0]);qa=[];S.push(J[1].slice(0,3));qa.push(a(S[0],S[1]));S[1]=H(S[1],S[0],1,-qa[0]);ea.push(F(S[1]));S[1]=E(S[1]);qa[0]/=ea[1];S.push(J[2].slice(0,3));qa.push(a(S[0],S[2]));S[2]=H(S[2],S[0],1,-qa[1]);qa.push(a(S[1],S[2]));S[2]=H(S[2],S[1],1,-qa[2]);ea.push(F(S[2]));S[2]=E(S[2]);qa[1]/=ea[2];qa[2]/=ea[2];J=S[1];L=S[2];if(0>a(S[0],[J[1]*L[2]-J[2]*L[1],J[2]*L[0]-J[0]*L[2],J[0]*L[1]-J[1]*L[0]]))for(L=0;3>L;L++)ea[L]*=-1,S[L][0]*=-1,S[L][1]*=-1,
S[L][2]*=-1;var aa,xa;J=S[0][0]+S[1][1]+S[2][2]+1;return 1E-4<J?(aa=.5/Math.sqrt(J),xa=[(S[2][1]-S[1][2])*aa,(S[0][2]-S[2][0])*aa,(S[1][0]-S[0][1])*aa,.25/aa]):S[0][0]>S[1][1]&&S[0][0]>S[2][2]?(aa=2*Math.sqrt(1+S[0][0]-S[1][1]-S[2][2]),xa=[.25*aa,(S[0][1]+S[1][0])/aa,(S[0][2]+S[2][0])/aa,(S[2][1]-S[1][2])/aa]):S[1][1]>S[2][2]?(aa=2*Math.sqrt(1+S[1][1]-S[0][0]-S[2][2]),xa=[(S[0][1]+S[1][0])/aa,.25*aa,(S[1][2]+S[2][1])/aa,(S[0][2]-S[2][0])/aa]):(aa=2*Math.sqrt(1+S[2][2]-S[0][0]-S[1][1]),xa=[(S[0][2]+
S[2][0])/aa,(S[1][2]+S[2][1])/aa,.25*aa,(S[1][0]-S[0][1])/aa]),[O,ea,qa,xa,Y]}}();d.dot=a;d.makeMatrixDecomposition=function(A){return[y(v(A))]};d.transformListToMatrix=v})(h);(function(d){function k(r,v){var y=r.exec(v);if(y)return y=r.ignoreCase?y[0].toLowerCase():y[0],[y,v.substr(y.length)]}function a(r,v){v=v.replace(/^\s*/,"");if(r=r(v))return[r[0],r[1].replace(/^\s*/,"")]}function f(r,v){for(var y=r,A=v;y&&A;)y>A?y%=A:A%=y;return r*v/(y+A)}function l(r,v,y,A,E){for(var F=[],H=[],J=[],O=f(A.length,
E.length),L=0;L<O;L++){var Y=v(A[L%A.length],E[L%E.length]);if(!Y)return;F.push(Y[0]);H.push(Y[1]);J.push(Y[2])}return[F,H,function(S){S=S.map(function(ea,qa){return J[qa](ea)}).join(y);return r?r(S):S}]}d.consumeToken=k;d.consumeTrimmed=a;d.consumeRepeated=function(r,v,y){r=a.bind(null,r);for(var A=[];;){var E=r(y);if(!E||(A.push(E[0]),y=E[1],!(E=k(v,y))||""==E[1]))return[A,y];y=E[1]}};d.consumeParenthesised=function(r,v){for(var y=0,A=0;A<v.length&&(!/\s|,/.test(v[A])||0!=y);A++)if("("==v[A])y++;
else if(")"==v[A]&&(y--,0==y&&A++,0>=y))break;r=r(v.substr(0,A));return void 0==r?void 0:[r,v.substr(A)]};d.ignore=function(r){return function(v){v=r(v);return v&&(v[0]=void 0),v}};d.optional=function(r,v){return function(y){return r(y)||[v,y]}};d.consumeList=function(r,v){for(var y=[],A=0;A<r.length;A++){v=d.consumeTrimmed(r[A],v);if(!v||""==v[0])return;void 0!==v[0]&&y.push(v[0]);v=v[1]}if(""==v)return y};d.mergeNestedRepeated=l.bind(null,null);d.mergeWrappedNestedRepeated=l;d.mergeList=function(r,
v,y){for(var A=[],E=[],F=[],H=0,J=0;J<y.length;J++)if("function"==typeof y[J]){var O=y[J](r[H],v[H++]);A.push(O[0]);E.push(O[1]);F.push(O[2])}else!function(L){A.push(!1);E.push(!1);F.push(function(){return y[L]})}(J);return[A,E,function(L){for(var Y="",S=0;S<L.length;S++)Y+=F[S](L[S]);return Y}]}})(h);(function(d){function k(f){var l={inset:!1,lengths:[],color:null};if((f=d.consumeRepeated(function(r){var v=d.consumeToken(/^inset/i,r);return v?(l.inset=!0,v):(v=d.consumeLengthOrPercent(r))?(l.lengths.push(v[0]),
v):(v=d.consumeColor(r),v?(l.color=v[0],v):void 0)},/^/,f))&&f[0].length)return[l,f[1]]}var a=function(f,l,r,v){function y(O){return{inset:O,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var A=[],E=[],F=0;F<r.length||F<v.length;F++){var H=r[F]||y(v[F].inset),J=v[F]||y(r[F].inset);A.push(H);E.push(J)}return d.mergeNestedRepeated(f,l,A,E)}.bind(null,function(f,l){for(;f.lengths.length<Math.max(f.lengths.length,l.lengths.length);)f.lengths.push({px:0});for(;l.lengths.length<Math.max(f.lengths.length,
l.lengths.length);)l.lengths.push({px:0});if(f.inset==l.inset&&!!f.color==!!l.color){for(var r,v=[],y=[[],0],A=[[],0],E=0;E<f.lengths.length;E++){var F=d.mergeDimensions(f.lengths[E],l.lengths[E],2==E);y[0].push(F[0]);A[0].push(F[1]);v.push(F[2])}f.color&&l.color&&(l=d.mergeColors(f.color,l.color),y[1]=l[0],A[1]=l[1],r=l[2]);return[y,A,function(H){for(var J=f.inset?"inset ":" ",O=0;O<v.length;O++)J+=v[O](H[0][O])+" ";return r&&(J+=r(H[1])),J}]}},", ");d.addPropertiesHandler(function(f){if((f=d.consumeRepeated(k,
/^,/,f))&&""==f[1])return f[0]},a,["box-shadow","text-shadow"])})(h);(function(d,k){function a(y){return y.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function f(y,A,E){return Math.min(A,Math.max(y,E))}function l(y){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(y))return Number(y)}function r(y,A){return function(E,F){return[E,F,function(H){return a(f(y,A,H))}]}}function v(y){y=y.trim().split(/\s*[\s,]\s*/);if(0!==y.length){for(var A=[],E=0;E<y.length;E++){var F=l(y[E]);if(void 0===F)return;A.push(F)}return A}}
d.clamp=f;d.addPropertiesHandler(v,function(y,A){if(y.length==A.length)return[y,A,function(E){return E.map(a).join(" ")}]},["stroke-dasharray"]);d.addPropertiesHandler(l,r(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(l,r(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(l,function(y,A){if(0!=y)return r(0,1/0)(y,A)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(l,function(y,A){return[y,A,function(E){return Math.round(f(1,1/0,E))}]},["orphans","widows"]);
d.addPropertiesHandler(l,function(y,A){return[y,A,Math.round]},["z-index"]);d.parseNumber=l;d.parseNumberList=v;d.mergeNumbers=function(y,A){return[y,A,a]};d.numberToString=a})(h);(function(d,k){d.addPropertiesHandler(String,function(a,f){if("visible"==a||"visible"==f)return[0,1,function(l){return 0>=l?a:1<=l?f:"visible"}]},["visibility"])})(h);(function(d,k){function a(r){r=r.trim();l.fillStyle="#000";l.fillStyle=r;var v=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=r,v==l.fillStyle)return l.fillRect(0,
0,1,1),r=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),v=r[3]/255,[r[0]*v,r[1]*v,r[2]*v,v]}function f(r,v){return[r,v,function(y){if(y[3])for(var A=0;3>A;A++)y[A]=Math.round(Math.max(0,Math.min(255,y[A]/y[3])));return y[3]=d.numberToString(d.clamp(0,1,y[3])),"rgba("+y.join(",")+")"}]}k=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");k.width=k.height=1;var l=k.getContext("2d");d.addPropertiesHandler(a,f,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
d.consumeColor=d.consumeParenthesised.bind(null,a);d.mergeColors=f})(h);(function(d,k){function a(E){function F(){var S=Y.exec(E);L=S?S[0]:void 0}function H(){if("("!==L){var S=Number(L);return F(),S}F();S=O();return")"!==L?NaN:(F(),S)}function J(){for(var S=H();"*"===L||"/"===L;){var ea=L;F();var qa=H();"*"===ea?S*=qa:S/=qa}return S}function O(){for(var S=J();"+"===L||"-"===L;){var ea=L;F();var qa=J();"+"===ea?S+=qa:S-=qa}return S}var L,Y=/([\+\-\w\.]+|[\(\)\*\/])/g;return F(),O()}function f(E,F){if("0"==
(F=F.trim().toLowerCase())&&0<="px".search(E))return{px:0};if(/^[^(]*$|^calc/.test(F)){F=F.replace(/calc\(/g,"(");var H={};F=F.replace(E,function(S){return H[S]=null,"U"+S});E="U("+E.source+")";for(var J=F.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+E,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),O=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],L=0;L<O.length;)O[L].test(J)?(J=J.replace(O[L],"$1"),L=0):L++;if("D"==J){for(var Y in H){J=a(F.replace(new RegExp("U"+
Y,"g"),"").replace(new RegExp(E,"g"),"*0"));if(!isFinite(J))return;H[Y]=J}return H}}}function l(E,F){return r(E,F,!0)}function r(E,F,H){var J,O=[];for(J in E)O.push(J);for(J in F)0>O.indexOf(J)&&O.push(J);return E=O.map(function(L){return E[L]||0}),F=O.map(function(L){return F[L]||0}),[E,F,function(L){var Y=L.map(function(S,ea){return 1==L.length&&H&&(S=Math.max(S,0)),d.numberToString(S)+O[ea]}).join(" + ");return 1<L.length?"calc("+Y+")":Y}]}var v=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);
k=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var y=f.bind(null,/deg|rad|grad|turn/g);d.parseLength=v;d.parseLengthOrPercent=k;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,k);d.parseAngle=y;d.mergeDimensions=r;v=d.consumeParenthesised.bind(null,v);v=d.consumeRepeated.bind(void 0,v,/^/);var A=d.consumeRepeated.bind(void 0,v,/^,/);d.consumeSizePairList=A;v=d.mergeNestedRepeated.bind(void 0,l," ");y=d.mergeNestedRepeated.bind(void 0,v,",");d.mergeNonNegativeSizePair=
v;d.addPropertiesHandler(function(E){if((E=A(E))&&""==E[1])return E[0]},y,["background-size"]);d.addPropertiesHandler(k,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(k,r,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(h);
(function(d,k){function a(l){return d.consumeLengthOrPercent(l)||d.consumeToken(/^auto/,l)}function f(l){if((l=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,a,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}k=d.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,r){return"auto"==l||"auto"==r?[!0,!1,function(v){v=v?l:r;if("auto"==v)return"auto";v=d.mergeDimensions(v,
v);return v[2](v[0])}]:d.mergeDimensions(l,r)},", ");d.parseBox=f;d.mergeBoxes=k;d.addPropertiesHandler(f,k,["clip"])})(h);(function(d,k){function a(J){return function(O){var L=0;return J.map(function(Y){return Y===A?O[L++]:Y})}}function f(J){return J}function l(J){if("none"==(J=J.toLowerCase().trim()))return[];for(var O,L=/\s*(\w+)\(([^)]*)\)/g,Y=[],S=0;(O=L.exec(J))&&O.index==S;){S=O.index+O[0].length;var ea=O[1],qa=H[ea];if(!qa)break;O=O[2].split(",");qa=qa[0];if(qa.length<O.length)break;for(var Fa=
[],K=0;K<qa.length;K++){var Z=O[K];var R=qa[K];if(void 0===(Z=Z?{A:function(U){return"0"==U.trim()?F:d.parseAngle(U)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[R.toUpperCase()](Z):{a:F,n:Fa[0],t:E}[R]))return;Fa.push(Z)}if(Y.push({t:ea,d:Fa}),L.lastIndex==J.length)return Y}}function r(J){return J.toFixed(6).replace(".000000","")}function v(J,O){if(J.decompositionPair!==O){J.decompositionPair=O;var L=d.makeMatrixDecomposition(J)}if(O.decompositionPair!==J){O.decompositionPair=J;var Y=
d.makeMatrixDecomposition(O)}return null==L[0]||null==Y[0]?[[!1],[!0],function(S){return S?O[0].d:J[0].d}]:(L[0].push(0),Y[0].push(1),[L,Y,function(S){var ea=d.quat(L[0][3],Y[0][3],S[5]);return d.composeMatrix(S[0],S[1],S[2],ea,S[4]).map(r).join(",")}])}function y(J){return J.replace(/(x|y|z|3d)?$/,"3d")}var A=null,E={px:0},F={deg:0},H={matrix:["NNNNNN",[A,A,0,0,A,A,0,0,0,0,1,0,A,A,0,1],f],matrix3d:["NNNNNNNNNNNNNNNN",f],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",a([A,A,1]),f],scalex:["N",a([A,1,1]),a([A,1])],scaley:["N",a([1,A,1]),a([1,A])],scalez:["N",a([1,1,A])],scale3d:["NNN",f],skew:["Aa",null,f],skewx:["A",null,a([A,F])],skewy:["A",null,a([F,A])],translate:["Tt",a([A,A,E]),f],translatex:["T",a([A,E,E]),a([A,E])],translatey:["T",a([E,A,E]),a([E,A])],translatez:["L",a([E,E,A])],translate3d:["TTL",f]};d.addPropertiesHandler(l,function(J,O){var L=d.makeMatrixDecomposition&&!0,Y=!1;if(!J.length||!O.length){J.length||(Y=!0,J=O,O=[]);for(var S=
0;S<J.length;S++){var ea=J[S].t,qa=J[S].d,Fa="scale"==ea.substr(0,5)?1:0;O.push({t:ea,d:qa.map(function(pa){if("number"==typeof pa)return Fa;var ka={},wa;for(wa in pa)ka[wa]=Fa;return ka})})}}qa=[];var K=[],Z=[];if(J.length!=O.length){if(!L)return;var R=v(J,O);qa=[R[0]];K=[R[1]];Z=[["matrix",[R[2]]]]}else for(S=0;S<J.length;S++){ea=J[S].t;var U=O[S].t,na=J[S].d,aa=O[S].d;R=H[ea];var xa=H[U];if("perspective"==ea&&"perspective"==U||!("matrix"!=ea&&"matrix3d"!=ea||"matrix"!=U&&"matrix3d"!=U)){if(!L)return;
R=v([J[S]],[O[S]]);qa.push(R[0]);K.push(R[1]);Z.push(["matrix",[R[2]]])}else{if(ea!=U)if(R[2]&&xa[2]&&ea.replace(/[xy]/,"")==U.replace(/[xy]/,""))ea=ea.replace(/[xy]/,""),na=R[2](na),aa=xa[2](aa);else{if(!R[1]||!xa[1]||y(ea)!=y(U)){if(!L)return;R=v(J,O);qa=[R[0]];K=[R[1]];Z=[["matrix",[R[2]]]];break}ea=y(ea);na=R[1](na);aa=xa[1](aa)}xa=[];U=[];for(var jb=[],ob=0;ob<na.length;ob++)R=("number"==typeof na[ob]?d.mergeNumbers:d.mergeDimensions)(na[ob],aa[ob]),xa[ob]=R[0],U[ob]=R[1],jb.push(R[2]);qa.push(xa);
K.push(U);Z.push([ea,jb])}}Y&&(J=qa,qa=K,K=J);return[qa,K,function(pa){return pa.map(function(ka,wa){ka=ka.map(function(Ka,Fb){return Z[wa][1][Fb](Ka)}).join(",");return"matrix"==Z[wa][0]&&16==ka.split(",").length&&(Z[wa][0]="matrix3d"),Z[wa][0]+"("+ka+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(J){J=d.transformListToMatrix(l(J));return"matrix("+r(J[0])+" "+r(J[1])+" "+r(J[4])+" "+r(J[5])+" "+r(J[12])+" "+r(J[13])+")"}})(h);(function(d){function k(a){return a=100*Math.round(a/
100),a=d.clamp(100,900,a),400===a?"normal":700===a?"bold":String(a)}d.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,f){return[a,f,k]},["font-weight"])})(h);(function(d){function k(v){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,v)||d.consumeLengthOrPercent(v)}function a(v,y){if((y=d.consumeRepeated(k,/^/,y))&&""==y[1]&&(y=y[0],y[0]=y[0]||"center",y[1]=y[1]||"center",3==v&&(y[2]=y[2]||{px:0}),y.length==v)){if(/top|bottom/.test(y[0])||
/left|right/.test(y[1]))v=y[0],y[0]=y[1],y[1]=v;if(/left|right|center|Object/.test(y[0])&&/top|bottom|center|Object/.test(y[1]))return y.map(function(A){return"object"==typeof A?A:l[A]})}}function f(v){if(v=d.consumeRepeated(k,/^/,v)){for(var y=v[0],A=[{"%":50},{"%":50}],E=0,F=!1,H=0;H<y.length;H++){var J=y[H];if("string"==typeof J)F=/bottom|right/.test(J),E={left:0,right:0,center:E,top:1,bottom:1}[J],A[E]=l[J],"center"==J&&E++;else{if(F){F=void 0;var O={};for(F in J)O[F]=-J[F];J=O;J["%"]=(J["%"]||
0)+100}A[E]=J;E++;F=!1}}return[A,v[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},r=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(a.bind(null,3),r,["transform-origin"]);d.addPropertiesHandler(a.bind(null,2),r,["perspective-origin"]);d.consumePosition=f;d.mergeOffsetList=r;r=d.mergeNestedRepeated.bind(null,r,", ");d.addPropertiesHandler(function(v){if((v=d.consumeRepeated(f,/^,/,v))&&""==v[1])return v[0]},r,["background-position",
"object-position"])})(h);(function(d){var k=d.consumeParenthesised.bind(null,d.parseLengthOrPercent),a=d.consumeRepeated.bind(void 0,k,/^/),f=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),l=d.mergeNestedRepeated.bind(void 0,f,",");d.addPropertiesHandler(function(r){var v=d.consumeToken(/^circle/,r);return v&&v[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),k,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,
/^\)/))],v[1])):(v=d.consumeToken(/^ellipse/,r))&&v[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),a,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],v[1])):(r=d.consumeToken(/^polygon/,r))&&r[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,d.ignore(d.consumeToken.bind(void 0,
/^\)/))],r[1])):void 0},function(r,v){if(r[0]===v[0])return"circle"==r[0]?d.mergeList(r.slice(1),v.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==r[0]?d.mergeList(r.slice(1),v.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==r[0]&&r[1]==v[1]?d.mergeList(r.slice(2),v.slice(2),["polygon(",r[1],l,")"]):void 0},["shape-outside"])})(h);(function(d,k){function a(r,v){v.concat([r]).forEach(function(y){y in document.documentElement.style&&
(f[r]=y);l[y]=r})}var f={},l={};a("transform",["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(r){return f[r]||r};d.unprefixedPropertyName=function(r){return l[r]||r}})(h)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};
var b=function(k,a,f){(this||qc).target=k;(this||qc).currentTime=a;(this||qc).timelineTime=f;(this||qc).type="cancel";(this||qc).bubbles=!1;(this||qc).cancelable=!1;(this||qc).currentTarget=k;(this||qc).defaultPrevented=!1;(this||qc).eventPhase=Event.AT_TARGET;(this||qc).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(k,a){k=d.call(this||qc,k,a);k._cancelHandlers=[];k.oncancel=null;var f=k.cancel;k.cancel=function(){f.call(this||qc);var v=new b(this||
qc,null,n()),y=(this||qc)._cancelHandlers.concat((this||qc).oncancel?[(this||qc).oncancel]:[]);setTimeout(function(){y.forEach(function(A){A.call(v.target,v)})},0)};var l=k.addEventListener;k.addEventListener=function(v,y){"function"==typeof y&&"cancel"==v?(this||qc)._cancelHandlers.push(y):l.call(this||qc,v,y)};var r=k.removeEventListener;return k.removeEventListener=function(v,y){"cancel"==v?(v=(this||qc)._cancelHandlers.indexOf(y),0<=v&&(this||qc)._cancelHandlers.splice(v,1)):r.call(this||qc,v,
y)},k}}})();(function(n){var b=document.documentElement,d=null,k=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";d=b.animate({opacity:[a,a]},{duration:1});d.currentTime=0;k=getComputedStyle(b).getPropertyValue("opacity")==a}catch(l){}finally{d&&d.cancel()}if(!k){var f=window.Element.prototype.animate;window.Element.prototype.animate=function(l,r){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||null===l||
(l=n.convertToArrayForm(l)),f.call(this||qc,l,r)}}})(c)}();var Ef=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Ef.convertToSvgEasing=function(c){for(var h in Ef.easings)if(Ef.easings[h]===c){if(h.includes("inOut"))return h.replace("inOut","").toLowerCase()+"InOut";if(h.includes("out"))return h.replace("out","").toLowerCase()+"Out";if(h.includes("in"))return h.replace("in","").toLowerCase()+"In"}};Ef.stringToEasing=B;Ef.obj=dg;Ef.promise=Hg;Ef.fun=gn;Ef.num=Em;Ef.properties=
ir;Ef.arr=Lf;Ef.string=Ih;Ef.Color=ng;Ef.styleProps=Ej;Ef.addPathAttributes=Ry;Ef.addSvgAttributes=Py;Ef.flubber=oW;Ef.Bezier=opa;Ef.ShadowObject=ys;var mr=Ca("aa",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",
inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",
inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Ef.easings=mr;Ef.easings=mr;Ef.easings=mr;Ef.stringToEasing=B;Ef.stringToEasing=
B;var $N=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=h.hasOwnProperty("AnimationQueue")&&"function"===typeof h.AnimationQueue?h.AnimationQueue:h.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?
Ef.obj.merge(this.animations.map(function(d){return d.getAnimationProps(b)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var d=this,k=new Ef.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:k},function(){var a=k.affectsMorph&&d.animations.find(function(l){return l.equals(k)});if(!a){var f;if(f=d.animations.find(function(l){return l.canMerge(k)}))return f.mergeWith(k),f;if(k.affectsMorph)return k.assignProps(),
d.animations.push(k),k}return a})}},{key:"startAnimationsFor",value:function(b){for(var d=0;d<this.animations.length;d++)this.animations[d].start(b)}},{key:"startSvgAnimationsFor",value:function(b,d){this.animations.forEach(function(k){return k.startSvg(b,d)})}},{key:"removeAnimation",value:function(b){Ef.arr.remove(this.animations,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],h,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Ef.AnimationQueue=$N;Ef.AnimationQueue=$N;Ef.AnimationQueue=$N;var EW=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=h.hasOwnProperty("PropertyAnimation")&&"function"===typeof h.PropertyAnimation?h.PropertyAnimation:h.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k){var a=this;this.queue=b;this.morph=d;if(d.isPath&&"fill"in k){var f=d.fill||Ef.Color.transparent,l=k.fill;k.customTween=Ef.fun.compose(function(E){d.fill=f.interpolate(E,l);return E},k.customTween||function(E){});delete k.fill;d.fill=f}if("dropShadow"in k){var r=d.dropShadow||new Ef.ShadowObject({blur:0,distance:0,spread:0}),v=k.dropShadow;k.customTween=
Ef.fun.compose(function(E){d.dropShadow=r.interpolate(E,v||new Ef.ShadowObject({blur:0,distance:0,spread:0}));1==E&&(d.dropShadow=v);return E},k.customTween||function(E){});delete k.dropShadow;d.dropShadow=r}if("visible"in k&&k.visible!=d.visible){var y=void 0===b.originalOpacity?d.opacity:b.originalOpacity;b.originalOpacity=y;var A=k.visible;k.customTween=Ef.fun.compose(function(E){if(a._otherVisibleTransformationInProgress)return E;0==E&&1==A&&(d.visible=!0);d.opacity=A?Ef.num.interpolate(E,0,y):
Ef.num.interpolate(E,y,0);1==E&&(d.visible=A,d.opacity=y,delete b.originalOpacity);return E},k.customTween||function(E){});this.queue.animations.forEach(function(E){return E._otherVisibleTransformationInProgress=!0});delete k.visible}this.config=this.convertBounds(k);this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=Ef.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;
return this._promise||(this._promise=new Promise(function(d,k){b.resolveCallback=function(){b.onFinish(b);b.subAnimations?b.subAnimations.then(d):d(b.morph)}}))}},{key:"finish",value:function(b){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(k){return k.isText&&k.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;Ef.arr.any(Ef.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?
this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(b){var d=b.bounds,k=b.origin,a=b.rotation,f=b.scale;k=k||this.morph.origin;a=a||this.morph.rotation;f=f||this.morph.scale;return d?Object.assign({},Ef.obj.dissoc(b,["bounds"]),{origin:k,rotation:a,scale:f,position:d.topLeft().addPt(k),extent:d.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&Ef.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==
b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var d=this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(k){d&&d(k);b.config.customTween&&b.config.customTween(k);return k};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||Ef.properties.any(this.animatedProps,function(d,k){return!Ef.obj.equals(d[k],b.morph[k])})}},{key:"animatedProps",
get:function(){return Ef.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Ef.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,d){var k=[],a;for(a in b)Ef.obj.equals(d[a],b[a])&&k.push(a);return[Ef.obj.dissoc(b,
k),Ef.obj.dissoc(d,k)]}},{key:"getAnimationProps",value:function(b){var d=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),k=d.next().value;d=d.next().value;var a=this.capturedProperties.fill,f=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=f=!1,delete k.background,delete d.background,delete k.backgroundImage,delete d.backgroundImage);"none"==k.filter&&d.boxShadow&&(delete k.filter,k.boxShadow="none");"none"==d.filter&&k.boxShadow&&(delete d.filter,d.boxShadow=
"none");a&&f&&(a.isGradient||f.isGradient)&&(this.tweenGradient=this.interpolate("gradient",a,f));b=$jscomp.makeIterator(Ef.arr.union(Ef.obj.keys(k),Ef.obj.keys(d)));for(a=b.next();!a.done;a=b.next())a=a.value,a in k||(k[a]=d[a]),a in d||(d[a]=k[a]);return[Ef.obj.isEmpty(k)?!1:k,Ef.obj.isEmpty(d)?!1:d]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,d=b.isSvgMorph,k=b.isPath,a=b.isPolygon,f={};f.css=Ef.styleProps(this.morph);d&&(f.svg=Ef.addSvgAttributes(b,{}));k&&(f.path=Ef.addPathAttributes(b,
{}));a&&(f.polygon=Ef.addPathAttributes(b,{}));return f}},{key:"assignProps",value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Ef.arr.withoutAll(b,this.morph.styleClasses),added:Ef.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,d,k){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(f){return Ef.num.interpolate(f,
d,k)};case "d":return Ef.flubber.interpolate(d,k);case "stroke-width":return function(f){return Ef.num.interpolate(f,d,k)};case "stroke":return function(f){return Ef.Color.fromString(d).interpolate(f,Ef.Color.fromString(k),a.morph.bounds())};case "gradient":return function(f){return d.interpolate(f,k,a.morph.bounds())};case "fill":return d=Ef.Color.fromString(d),k=Ef.Color.fromString(k),function(f){return d.interpolate(f,k)}}}},{key:"startSvg",value:function(b,d){var k=this;if(this.needsAnimation[d]){this.needsAnimation[d]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(d)),f=a.next().value;a=a.next().value;var l={},r=Ef.stringToEasing(this.easing),v;for(v in f)l[v]=this.interpolate(v,f[v],a[v]);var y,A=function(E){y||(y=E);E-=y;if(1<E/k.duration)return k.finish(d);for(var F in l)l[F]&&b.setAttribute(F,l[F](r(E/k.duration)));requestAnimationFrame(A)};requestAnimationFrame(A)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var d=$jscomp.makeIterator(this.getAnimationProps("css")),k=d.next().value,
a=d.next().value;b&&this.tween(b,k,a);if(this.config.origin){var f=this.capturedProperties.origin,l=this.config.origin,r=b.childNodes[0];r&&this.tween(r,r.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+f.x+"px, "+f.y+"px, 0px)"},r.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(v){this.active=!1}}},{key:"tween",value:function(b,d,k,a){var f=this;a=void 0===a?!0:a;var l=this.animatedProps.scroll,r=this.config.customTween,v=!1,y=
function(){a&&(f.finish("css"),f.morph.makeDirty())};if(r){var A,E=Ef.stringToEasing(this.easing),F=function(aa){A||(A=aa);var xa=Math.min(1,(aa-A)/f.duration);f.morph.dontRecordChangesWhile(function(){return r(E(xa))});if(1<=xa)return f.finish("css");requestAnimationFrame(F)};requestAnimationFrame(F);v=!0}if(l){var H,J=this.morph.env.eventDispatcher.eventState;v=Ef.promise.deferred();var O=v.promise,L=v.resolve,Y=this.interpolate("scrollLeft",b.scrollLeft,l.x),S=this.interpolate("scrollTop",b.scrollTop,
l.y),ea=Ef.stringToEasing(this.easing),qa=function(aa){H||(H=aa);aa-=H;var xa=Math.min(1,aa/f.duration);b.scrollTop=S(ea(xa));b.scrollLeft=Y(ea(xa));if(1<=aa/f.duration)return J.scroll.interactiveScrollInProgress=null,L(),f.finish("css");requestAnimationFrame(qa)};O.debounce=function(){};requestAnimationFrame(qa);v=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Fa,K=Ef.stringToEasing(this.easing),Z=function(aa){Fa||(Fa=aa);aa-=Fa;if(1<=aa/f.duration)return f.finish("css");b.style.setProperty("background-image",
f.tweenGradient(K(aa/f.duration)));requestAnimationFrame(Z)};delete d.backgroundImage;delete k.backgroundImage;delete d.background;delete k.background;requestAnimationFrame(Z);v=!0}else this.tweenGradient&&(v=!0);if(b&&d&&k){l={};O={};for(var R in d)l[Ef.string.camelize(R)]=d[R];for(var U in k)O[Ef.string.camelize(U)]=k[U];try{var na=b.animate([l,O],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});na.onfinish=function(){y();setTimeout(function(){return na.cancel()},
200)};v=!0}catch(aa){v=!1}}v||y()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],h,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);Ef.PropertyAnimation=EW;Ef.PropertyAnimation=EW;Ef.PropertyAnimation=EW;var oh=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");oh.cumulativeOffset=D;oh.createIFrame=function(c,h,n){h=void 0===h?"about:blank":h;n=void 0===n?new oh.Rectangle(0,0,700,700):n;return new Promise(function(b,d){if(!c)throw Error("Need parent element!");var k=document.createElement("iframe");k.style.position="absolute";k.style.top=n.top()+"px";k.style.left=n.left()+"px";k.style.width=n.width+"px";k.style.height=n.height+"px";k.src=h;var a=!1;k.onload=function(f){a=!0;k.onload=
null;b(k)};oh.promise.waitFor(1E3,function(){return!!a}).catch(function(f){return d(Error("iframe load timeout"))});c.appendChild(k)})};oh.requestAnimationFramePolyfill=function(c){for(var h=0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!c.requestAnimationFrame;++b)c.requestAnimationFrame=c[n[b]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[n[b]+"CancelAnimationFrame"]||c[n[b]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(d,k){var a=Date.now(),f=Math.max(0,
16-(a-h));k=c.setTimeout(function(){d(a+f)},f);h=a+f;return k});c.cancelAnimationFrame||(c.cancelAnimationFrame=function(d){clearTimeout(d)})};oh.createDOMEnvironment_browser=function(){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?(c=oh.IFramedDomEnvironment,h.yield(oh.createIFrame(document.body),2)):h.return(new c(h.yieldResult))})};oh.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var c=System._nodeRequire("jsdom"),
h=c.createVirtualConsole().sendTo(console);return new Promise(function(n,b){c.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:h},function(d,k){return d?b(d):n(new oh.DomEnvironment(k,k.document,function(){return k.close()}))})})};oh.createDOMEnvironment=I;oh.defaultDOMEnv=N;oh.setCSSDef=function(c,h,n){oh.arr.from(c.childNodes).forEach(function(b){return c.removeChild(b)});h=n.createTextNode(h);c.styleSheet?c.styleSheet.cssText=h.nodeValue:c.appendChild(h);return c};
oh.addCSSDef=function(c,h,n){var b=n.createElement("style");b.type="text/css";c&&b.setAttribute("id",c);oh.setCSSDef(b,h,n);n.head.appendChild(b);return b};oh.addOrChangeCSSDeclaration=V;oh.addOrChangeLinkedCSS=ba;oh.promise=Hg;oh.obj=dg;oh.arr=Lf;oh.Rectangle=ye;oh.cumulativeOffset=D;oh.cumulativeOffset=D;oh.createDOMEnvironment=I;oh.createDOMEnvironment=I;(function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("DomEnvironment")&&"function"===
typeof h.DomEnvironment?h.DomEnvironment:h.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k){oh.requestAnimationFramePolyfill(b);this.window=b;this.document=d;this.destroyFn=k}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof h.IFramedDomEnvironment?h.IFramedDomEnvironment:
h.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(oh.DomEnvironment);oh._defaultEnv=oh._defaultEnv||void 0;oh.defaultDOMEnv=N;oh.defaultDOMEnv=N;oh.addOrChangeCSSDeclaration=V;oh.addOrChangeCSSDeclaration=V;oh.addOrChangeLinkedCSS=
ba;oh.addOrChangeLinkedCSS=ba;var aO=function(){return function(c){c=void 0===c?window.document:c;return function(h,n,b){var d=n||void 0;"undefined"===typeof b&&(b=n,d=void 0);var k=h.split(".");if(1<k.length)for(h=k.shift(),n=0;n<k.length;n++){var a=k[n],f;-1<(f=a.indexOf("#"))&&(a.slice(f+1),a.slice(0,f))}n=h.split("#");1<n.length&&(h=n[0]);h=c.createElement(h);if(d){for(var l in d)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(h[l]=d[l]);if(l=d.style)for(var r in l)h.style[r]=l[r];if(r=d.dataset)if(h.dataset)for(var v in r)h.dataset[v]=
r[v];else for(v in r)h.setAttribute("data-"+v,r[v]);if(d=d.attributes)for(var y in d)d[y]&&oh.obj.isBoolean(d[y])?h.toggleAttribute(y):h.setAttribute(y,d[y])}b||(b="");if("string"===typeof b)h.appendChild(c.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)y=b[n],h.appendChild("string"===typeof y?c.createTextNode(y):y);else h.appendChild("string"===typeof b?c.createTextNode(b):b);return h}}}();oh.hyperscriptFnForDocument=aO;oh.hyperscriptFnForDocument=aO;oh.hyperscriptFnForDocument=
aO;var Hf=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Hf.applyExclude=sa;Hf.parseQuery=ta;Hf.stringifyQuery=Ma;Hf.withRelativePartsResolved=gb;Hf._relativePathBetween_checkPathes=function(c,h){c.startsWith("/")&&(c=c.slice(1));h.startsWith("/")&&(h=h.slice(1));c=c.split("/");h=h.split("/");for(var n=0;n<h.length&&c[n]&&c[n]==h[n];n++);return"../".repeat(Math.max(0,h.length-n-1))+c.splice(n,c.length).join("/")};Hf.relativePathBetween=Cb;Hf.join=zb;Hf.parent=fc;Hf.parents=Fc;
Hf.resource=Xb;Hf.createFiles=Sc;Hf.registerExtension=qd;Hf.unregisterExtension=xd;Hf.applyExclude=sa;Hf.applyExclude=sa;Hf.parseQuery=ta;Hf.parseQuery=ta;Hf.stringifyQuery=Ma;Hf.stringifyQuery=Ma;Hf.slashEndRe=/\/+$/;Hf.slashStartRe=/^\/+/;Hf.protocolRe=/^[a-z0-9-_\.]+:/;Hf.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Hf.slashslashRe=/^\/\/[^\/]+/;Hf.pathDotRe=/\/\.\//g;Hf.pathDoubleDotRe=/\/[^\/]+\/\.\./;Hf.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Hf.withRelativePartsResolved=gb;Hf.withRelativePartsResolved=gb;
Hf.relativePathBetween=Cb;Hf.relativePathBetween=Cb;Hf.join=zb;Hf.join=zb;Hf.parent=fc;Hf.parent=fc;Hf.parents=Fc;Hf.parents=Fc;var aC=[];Hf.extensions=aC;Hf.extensions=aC;Hf.extensions=aC;Hf.resource=Xb;Hf.resource=Xb;Hf.createFiles=Sc;Hf.createFiles=Sc;Hf.registerExtension=qd;Hf.registerExtension=qd;Hf.unregisterExtension=xd;Hf.unregisterExtension=xd;var bO=/^file:\/\/\/[a-z]:\//i;Hf.windowsURLPrefixRe=bO;Hf.windowsURLPrefixRe=bO;Hf.windowsURLPrefixRe=bO;var cO=/^[a-z]:\//i;Hf.windowsPathPrefixRe=
cO;Hf.windowsPathPrefixRe=cO;Hf.windowsPathPrefixRe=cO;var dO=/^[a-z]:\/$/i;Hf.windowsRootPathRe=dO;Hf.windowsRootPathRe=dO;Hf.windowsRootPathRe=dO;var Aj=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");Aj.nyi=function(c,h){throw Error(h+" for "+c.constructor.name+" not yet implemented");};Aj.resource=Xb;Aj.parseQuery=ta;Aj.withRelativePartsResolved=gb;Aj.relativePathBetween=Cb;Aj.windowsPathPrefixRe=cO;Aj.stringifyQuery=Ma;Aj.slashEndRe=/\/+$/;Aj.slashStartRe=/^\/+/;Aj.protocolRe=
/^[a-z0-9-_\.]+:/;Aj.slashslashRe=/^\/\/[^\/]+/;var Eg=function(c,h){if(!c)throw Error("Cannot create resource without url");this.url=String(c);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};Eg.fromProps=function(c){c=void 0===c?{}:c;return(new this(c.url)).assignProperties(c)};Eg.prototype.equals=function(c){if(!c||this.constructor!==c.constructor)return!1;var h=this.url;
c=c.url;"/"===h[h.length-1]&&(h=h.slice(0,-1));"/"===c[c.length-1]&&(c=c.slice(0,-1));return h===c};Eg.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};Eg.prototype.newResource=function(c){return Aj.resource(c,this)};Eg.prototype.path=function(){var c=this.url.replace(Aj.protocolRe,"").replace(Aj.slashslashRe,"");return""===c?"/":c};Eg.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Eg.prototype.name=function(){var c=this.path(),h=c.lastIndexOf("?");
-1<h&&(c=c.slice(0,h));c.endsWith("/")&&(c=c.slice(0,-1));c=c.split("/");return decodeURIComponent(c[c.length-1])};Eg.prototype.ext=function(){var c=this.url;if(c.endsWith("/"))return"";c=$jscomp.makeIterator(c.match(/\.([^\/\.]+$)/)||["",""]);c.next();return c.next().value.toLowerCase()};Eg.prototype.nameWithoutExt=function(){var c=this.name(),h=c.lastIndexOf(".");0<h&&(c=c.slice(0,h));return c};Eg.prototype.scheme=function(){return this.url.split(":")[0]};Eg.prototype.host=function(){var c=this.url.indexOf("://");
if(-1===c)return null;c=this.url.slice(c+3);var h=c.indexOf("/");return c.slice(0,-1<h?h:c.length)};Eg.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};Eg.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(Aj.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};Eg.prototype.parents=function(){for(var c=[],h=this.parent();h;)c.unshift(h),h=h.parent();return c};Eg.prototype.isParentOf=
function(c){var h=this;return c.schemeAndHost()===this.schemeAndHost()&&c.parents().some(function(n){return n.equals(h)})};Eg.prototype.query=function(){return Aj.parseQuery(this.url)};Eg.prototype.withQuery=function(c){var h=Object.assign({},this.query(),{},c);c=$jscomp.makeIterator(this.url.split("?")).next().value;h=Aj.stringifyQuery(h);return this.newResource(c+"?"+h)};Eg.prototype.commonDirectory=function(c){if(c.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(c))return this;
if(this.isRoot())return this.asDirectory();if(c.isRoot())return c.asDirectory();c=c.parents();for(var h=this.parents(),n=this.root(),b=0;b<h.length;b++){var d=h[b],k=c[b];if(!k||!d.equals(k))break;n=d}return n};Eg.prototype.withRelativePartsResolved=function(){var c=this.path(),h=Aj.withRelativePartsResolved(c);if(h===c)return this;h.startsWith("/")&&(h=h.slice(1));h[1]===":".startsWith("/")?h=h.slice(1):":"===h[1]&&h.match(Aj.windowsPathPrefixRe)&&(h=h.slice(3));return this.newResource(this.root().url+
h)};Eg.prototype.relativePathFrom=function(c){return Aj.relativePathBetween(c.url,this.url)};Eg.prototype.withPath=function(c){return(this.isRoot()?this:this.root()).join(c)};Eg.prototype.join=function(c){return this.newResource(this.url.replace(Aj.slashEndRe,"")+"/"+c.replace(Aj.slashStartRe,""))};Eg.prototype.isRoot=function(){return"/"===this.path()};Eg.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(Aj.slashEndRe)};Eg.prototype.isDirectory=function(){return!this.isFile()};Eg.prototype.asDirectory=
function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(Aj.slashEndRe,"")+"/")};Eg.prototype.root=function(){if(this.isRoot())return this;var c=this.url.slice(0,-this.path().length);return this.newResource(c+"/")};Eg.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(Aj.slashEndRe,"")):this};Eg.prototype.assignProperties=function(c){for(var h in c)if("url"!==h){var n=h;if("isLink"===h||"isDirectory"===h)n="_"+h;this[n]=c[h]}return this};
Eg.prototype.ensureExistance=function(c){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(h.exists(),2);case 2:return n.yieldResult?n.return(h):n.yield(h.parent().ensureExistance(),3);case 3:return h.isFile()?n.yield(h.write(c||""),5):n.yield(h.mkdir(),5);case 5:return n.return(h)}})};Eg.prototype.copyTo=function(c,h){h=void 0===h?!0:h;var n=this,b,d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(n.isFile()){k=
c.isFile()?c:c.join(n.name());if(!h){l.jumpTo(8);break}return l.yield(k.parent().ensureExistance(),8)}if(!c.isDirectory())throw Error("Cannot copy a directory to a file!");return l.yield(n.dirList("infinity"),4);case 4:return b=l.yieldResult,d=b.map(function(r){return c.join(r.relativePathFrom(n))}),l.yield(c.ensureExistance(),5);case 5:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isDirectory()&&d[y].ensureExistance()).then(r)}},function(){return Promise.resolve()})(),
6);case 6:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isFile()&&v.copyTo(d[y],!1)).then(r)}},function(){return Promise.resolve()})(),3);case 8:return a=k,f=a.write,l.yield(n.read(),11);case 11:return l.yield(f.call(a,l.yieldResult),3);case 3:return l.return(n)}})};Eg.prototype.rename=function(c){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(h.copyTo(c),2);h.remove();return n.return(c)})};Eg.prototype.beBinary=
function(c){return this.setBinary(!0)};Eg.prototype.setBinary=function(c){this.binary=c;return this};Eg.prototype.read=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Aj.nyi(c,"read");h.jumpToEnd()})};Eg.prototype.write=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Aj.nyi(c,"write");h.jumpToEnd()})};Eg.prototype.mkdir=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Aj.nyi(c,"mkdir");h.jumpToEnd()})};
Eg.prototype.exists=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Aj.nyi(c,"exists");h.jumpToEnd()})};Eg.prototype.remove=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Aj.nyi(c,"remove");h.jumpToEnd()})};Eg.prototype.dirList=function(c,h){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){Aj.nyi(n,"dirList");b.jumpToEnd()})};Eg.prototype.readProperties=function(c){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){Aj.nyi(h,
"readProperties");n.jumpToEnd()})};Eg.prototype.writeJson=function(c,h){return this.write((void 0===h?0:h)?JSON.stringify(c,null,2):JSON.stringify(c))};Eg.prototype.readJson=function(c){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(n=JSON,b=n.parse,d.yield(h.read(),2)):d.return(b.call(n,d.yieldResult))})};Eg.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};
$jscomp.global.Object.defineProperties(Eg.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});Aj.Resource=Eg;Aj.default=Eg;var dh=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");dh.davNs=function(c){return(c=c.match(/\/([a-z]+?):multistatus/i))?c[1]:"d"};dh.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};
dh.readPropertyNode=function(c,h){h=void 0===h?{}:h;var n=c.tagName.replace(/[^:]+:/,"");n=dh.propertyNodeMap[n];c=c.textContent;switch(n){case "lastModified":case "created":c=new Date(c);break;case "size":c=Number(c)}h[n]=c;return h};dh.readXMLPropfindResult=function(c){var h=(new DOMParser).parseFromString(c,"text/xml");c=dh.davNs(c);h=(new dh.XPathQuery("/"+c+":multistatus/"+c+":response")).findAll(h.documentElement);var n=new dh.XPathQuery(c+":href"),b=new dh.XPathQuery(c+":propstat/"+c+":prop");
return h.map(function(d){var k=b.findFirst(d);k=Array.from(k.childNodes).reduce(function(a,f){return dh.readPropertyNode(f,a)},{});d=n.findFirst(d);k.url=d.textContent||d.text;return k})};dh.defaultOrigin=function(){return document.location.origin};dh.makeRequest=function(c,h,n,b,d){b=void 0===b?{}:b;d=c.url;var k=c.useCors,a=c.useProxy,f=c.headers;k="undefined"!==typeof k?k:!0;h={method:void 0===h?"GET":h};if("undefined"!==typeof a?a:1)Object.assign(b,{pragma:"no-cache","cache-control":"no-cache",
"x-lively-proxy-request":d}),d=c.proxyDomain||dh.defaultOrigin();k&&(h.mode="cors");n&&(h.body=n);h.redirect="follow";h.headers=Object.assign({},b,{},f);return fetch(d,h)};dh.upload=kd;dh.Resource=Eg;dh.applyExclude=sa;dh.promise=Hg;dh.num=Em;var gI=function(c){this.expression=c;this.contextNode=null;this.xpe=new XPathEvaluator};gI.prototype.establishContext=function(c){this.nsResolver||(c=c.ownerDocument?c.ownerDocument.documentElement:c.documentElement,c!==this.contextNode&&(this.contextNode=c,
this.nsResolver=this.xpe.createNSResolver(c)))};gI.prototype.manualNSLookup=function(){this.nsResolver=function(c){return Namespace[c.toUpperCase()]||null};return this};gI.prototype.findAll=function(c,h){this.establishContext(c);c=this.xpe.evaluate(this.expression,c,this.nsResolver,XPathResult.ANY_TYPE,null);for(var n=[],b;b=c.iterateNext();)n.push(b);return 0<n.length||void 0===h?n:h};gI.prototype.findFirst=function(c){this.establishContext(c);return this.xpe.evaluate(this.expression,c,this.nsResolver,
XPathResult.ANY_TYPE,null).iterateNext()};dh.XPathQuery=gI;dh.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};dh.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
dh.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;dh.upload=kd;dh.upload=kd;var Fm=function(c,h){h=void 0===h?{}:h;c=dh.Resource.call(this,c,h)||this;c.onLoad=h.onLoad||function(){};c.onProgress=h.onProgress||function(){};c.useProxy=h.hasOwnProperty("useProxy")?h.useProxy:!1;c.proxyDomain=h.proxyDomain||void 0;c.useCors=h.hasOwnProperty("useCors")?h.useCors:!1;c.headers=h.headers||{};c.binary=c.isFile()?dh.binaryExtensions.includes(c.ext()):
!1;c.errorOnHTTPStatusCodes=h.hasOwnProperty("errorOnHTTPStatusCodes")?h.errorOnHTTPStatusCodes:!0;return c};$jscomp.inherits(Fm,dh.Resource);Fm.prototype.join=function(c){return Object.assign(dh.Resource.prototype.join.call(this,c),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Fm.prototype.makeProxied=function(c){void 0!==c&&(this.proxyDomain=c);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Fm.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Fm.prototype.read=function(){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(dh.makeRequest(c),2);h=n.yieldResult;if(!h.ok&&c.errorOnHTTPStatusCodes)throw Error("Cannot read "+c.url+": "+h.statusText+" "+h.status);if(!c.binary)return n.return(h.text());if("blob"===c.binary)return n.return(h.blob());if("function"===
typeof h.arrayBuffer)return n.return(h.arrayBuffer());if("function"===typeof h.buffer)return n.return(h.buffer());throw Error("Don't now how to read binary resource "+c+"'");})};Fm.prototype.write=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!h.isFile())throw Error("Cannot write a non-file: "+h.url);return b.yield(dh.upload(h,c),2)}n=b.yieldResult;if(!dh.num.between(n.status,200,300)&&h.errorOnHTTPStatusCodes)throw Error("Cannot write "+
h.url+": "+n.statusText+" "+n.status);return b.return(h)})};Fm.prototype.mkdir=function(){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(c.isFile())throw Error("Cannot mkdir on a file: "+c.url);return n.yield(dh.makeRequest(c,"MKCOL"),2)}h=n.yieldResult;if(!h.ok&&c.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+c.url+": "+h.statusText+" "+h.status);return n.return(c)})};Fm.prototype.exists=function(){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return c.isRoot()?(h=!0,n.jumpTo(2)):n.yield(dh.makeRequest(c,"HEAD"),3);2!=n.nextAddress&&(h=!!n.yieldResult.ok);return n.return(h)})};Fm.prototype.remove=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(dh.makeRequest(c,"DELETE"),2):h.return(c)})};Fm.prototype._propfind=function(){var c=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(dh.makeRequest(c,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=d.nextAddress){h=d.yieldResult;if(!h.ok&&c.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+c.url+": "+h.statusText);return d.yield(h.text(),3)}n=d.yieldResult;b=c.root();return d.return(dh.readXMLPropfindResult(n).map(function(k){return b.join(k.url).assignProperties(k)}))})};Fm.prototype.dirList=function(c,h){c=void 0===c?1:c;h=void 0===h?{}:h;var n=this,b,d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if("number"!==
typeof c&&"infinity"!==c)throw Error("dirList \u2013 invalid depth argument: "+c);b=h;d=b.exclude;0>=c&&(c=1);return 1===c?l.yield(n._propfind(),5):l.yield(n.dirList(1,h),4)}if(5!=l.nextAddress)return k=l.yieldResult,a=k.filter(function(r){return r.isDirectory()}),l.return(Promise.all(a.map(function(r){return r.dirList("number"===typeof c?c-1:c,h)})).then(function(r){return r.reduce(function(v,y){return v.concat(y)},k)}));f=l.yieldResult;f.shift();d&&(f=dh.applyExclude(d,f));return l.return(f)})};
Fm.prototype.readProperties=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h._propfind(),2);n=b.yieldResult[0];return b.return(h.assignProperties(n))})};Fm.prototype.post=function(c){c=void 0===c?null:c;var h=this,n,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return"string"!==typeof c&&(c=JSON.stringify(c)),k.yield(dh.makeRequest(h,"POST",c,{}),2);case 2:return n=k.yieldResult,
k.setCatchFinallyBlocks(3),k.yield(n.text(),5);case 5:b=k.yieldResult;k.leaveTryBlock(4);break;case 3:k.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{d=JSON.parse(b)}catch(a){}if(!n.ok&&h.errorOnHTTPStatusCodes)throw Error("Error in POST "+h.url+": "+(b||n.statusText));return k.return(d||b)}})};Fm.prototype.copyTo=function(c,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(n.isFile()&&(b=c.isFile()?c:c.join(n.name()),
dh.isNode)){if(b.isHTTPResource)return d.return(n._copyTo_file_nodejs_http(b,h));if(b.isNodeJSFileResource)return d.return(n._copyTo_file_nodejs_fs(b,h))}return d.return(dh.Resource.prototype.copyTo.call(n,c,h))})};Fm.prototype._copyFrom_file_nodejs_fs=function(c,h){h=void 0===h?!0:h;var n=this,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return d=c._createReadStream(),d.on("error",
function(f){return b=f}),a.yield(dh.makeRequest(n,"PUT",d),4);k=a.yieldResult;if(b)throw b;if(!k.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+k.statusText+" "+k.status);return a.return(n)})};Fm.prototype._copyTo_file_nodejs_fs=function(c,h){h=void 0===h?!0:h;var n=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return h?k.yield(c.parent().ensureExistance(),2):k.jumpTo(2);if(4!=k.nextAddress)return k.yield(dh.makeRequest(n,"GET"),4);b=
k.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return k.return(new Promise(function(a,f){return b.body.pipe(c._createWriteStream()).on("error",function(l){return d=l}).on("finish",function(){return d?f(d):a(n)})}))})};Fm.prototype._copyTo_file_nodejs_http=function(c,h){h=void 0===h?!0:h;var n=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(!h){k.jumpTo(2);break}return k.yield(c.parent().ensureExistance(),
2);case 2:return k.yield(dh.makeRequest(n,"GET"),4);case 4:b=k.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return k.yield(dh.makeRequest(c,"PUT",b.body),5);case 5:d=k.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+d.statusText+" "+d.status);k.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Fm.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});dh.WebDAVResource=
Fm;var eO={name:"http-webdav-resource",matches:function(c){return c.startsWith("http:")||c.startsWith("https:")},resourceClass:dh.WebDAVResource};dh.resourceExtension=eO;dh.resourceExtension=eO;dh.resourceExtension=eO;dh.default=Fm;var Nt=System.get("@system-env").node?require("fs"):{},ppa=Nt.readFile,qpa=Nt.writeFile,rpa=Nt.exists,spa=Nt.readdir,tpa=Nt.mkdir,upa=Nt.rmdir,vpa=Nt.unlink,wpa=Nt.lstat,xpa=Nt.rename,ypa=Nt.createWriteStream,zpa=Nt.createReadStream,ag=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
ag.wrapInPromise=function(c){return function(h){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(d,k){return c.apply(null,n.concat(function(a,f){return a?k(a):d(f)}))})}};ag.Resource=Eg;ag.applyExclude=sa;ag.windowsURLPrefixRe=bO;ag.windowsRootPathRe=dO;ag.createWriteStream=ypa;ag.createReadStream=zpa;ag.readFile=ppa;ag.writeFile=qpa;ag.exists=rpa;ag.mkdir=tpa;ag.rmdir=upa;ag.unlink=vpa;ag.readdir=spa;ag.lstat=wpa;ag.rename=xpa;ag.readFileP=ag.wrapInPromise(ag.readFile);
ag.writeFileP=ag.wrapInPromise(ag.writeFile);ag.existsP=function(c){return new Promise(function(h,n){return ag.exists(c,function(b){return h(!!b)})})};ag.readdirP=ag.wrapInPromise(ag.readdir);ag.mkdirP=ag.wrapInPromise(ag.mkdir);ag.rmdirP=ag.wrapInPromise(ag.rmdir);ag.unlinkP=ag.wrapInPromise(ag.unlink);ag.lstatP=ag.wrapInPromise(ag.lstat);ag.renameP=ag.wrapInPromise(ag.rename);var On=function(){return ag.Resource.apply(this,arguments)||this};$jscomp.inherits(On,ag.Resource);On.prototype.path=function(){return this.url.replace("file://",
"")};On.prototype.stat=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(ag.lstatP(c.path()))})};On.prototype.read=function(){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){h=ag.readFileP(c.path());return n.return(c.binary?h:h.then(String))})};On.prototype.write=function(c){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(h.isDirectory())throw Error("Cannot write into a directory: "+
h.path());return n.yield(ag.writeFileP(h.path(),c),2)}return n.return(h)})};On.prototype.mkdir=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(c.isFile())throw Error("Cannot mkdir on a file: "+c.path());return h.yield(ag.mkdirP(c.path()),2)}return h.return(c)})};On.prototype.exists=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(c.isRoot()?!0:ag.existsP(c.path()))})};On.prototype.dirList=
function(c,h){c=void 0===c?1:c;h=void 0===h?{}:h;var n=this,b,d,k,a,f,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if("number"!==typeof c&&"infinity"!==c)throw Error("dirList \u2013 invalid depth argument: "+c);b=h;d=b.exclude;0>=c&&(c=1);if(1!==c){H.jumpTo(2);break}k=[];a=$jscomp;f=a.makeIterator;return H.yield(ag.readdirP(n.path()),3);case 3:l=f.call(a,H.yieldResult),r=l.next();case 4:if(r.done){H.jumpTo(6);break}v=r.value;y=n.join(v);
return H.yield(y.stat(),7);case 7:A=H.yieldResult;y=A.isDirectory()?y.asDirectory():y;y._assignPropsFromStat(A);k.push(y);r=l.next();H.jumpTo(4);break;case 6:return d&&(k=ag.applyExclude(d,k)),H.return(k);case 2:return H.yield(n.dirList(1,h),8);case 8:return E=H.yieldResult,F=E.filter(function(J){return J.isDirectory()}),H.return(Promise.all(F.map(function(J){return J.dirList("number"===typeof c?c-1:c,h)})).then(function(J){return J.reduce(function(O,L){return O.concat(L)},E)}))}})};On.prototype.isEmptyDirectory=
function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(c.dirList(),2):h.return(0===h.yieldResult.length)})};On.prototype.rename=function(c){var h=this,n,b,d,k,a,f,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if(!(c instanceof h.constructor))return H.return(ag.Resource.prototype.rename.call(h,c));if(h.isFile()){c=c.asFile();ag.renameP(h.path(),c.path());H.jumpTo(2);break}c=c.asDirectory();
return H.yield(c.ensureExistance(),3);case 3:return n=[],b=[],d=$jscomp,k=d.makeIterator,H.yield(h.dirList("infinity"),4);case 4:a=k.call(d,H.yieldResult);for(f=a.next();!f.done;f=a.next())l=f.value,l.isDirectory()?b.push(l):n.push(l);r=$jscomp.makeIterator(b);v=r.next();case 5:if(v.done){H.jumpTo(7);break}y=v.value;return H.yield(c.join(y.relativePathFrom(h)).ensureExistance(),6);case 6:v=r.next();H.jumpTo(5);break;case 7:A=$jscomp.makeIterator(n),E=A.next();case 9:if(E.done)return H.yield(h.remove(),
2);F=E.value;return H.yield(F.rename(c.join(F.relativePathFrom(h))),10);case 10:E=A.next();H.jumpTo(9);break;case 2:return H.return(c)}})};On.prototype.remove=function(){var c=this,h,n,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(c.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return c.isDirectory()?(h=$jscomp,n=h.makeIterator,a.yield(c.dirList(),7)):a.yield(ag.unlinkP(c.path()),3);case 7:b=n.call(h,a.yieldResult),d=b.next();
case 8:if(d.done)return a.yield(ag.rmdirP(c.path()),3);k=d.value;return a.yield(k.remove(),9);case 9:d=b.next();a.jumpTo(8);break;case 3:return a.return(c)}})};On.prototype.readProperties=function(){var c=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=c,n=h._assignPropsFromStat,b.yield(c.stat(),2)):b.return(n.call(h,b.yieldResult))})};On.prototype.copyTo=function(c,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return n.isFile()&&
(b=c.isFile()?c:c.join(n.name()),b.isHTTPResource)?d.return(b._copyFrom_file_nodejs_fs(n,h=!0)):d.return(ag.Resource.prototype.copyTo.call(n,c,h))})};On.prototype._assignPropsFromStat=function(c){return this.assignProperties({lastModified:c.mtime,created:c.ctime,size:c.size,type:c.isDirectory()?"directory":"file",isLink:c.isSymbolicLink()})};On.prototype._createWriteStream=function(){return ag.createWriteStream(this.path())};On.prototype._createReadStream=function(){return ag.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(On.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});ag.NodeJSFileResource=On;var hI=function(c,h){"file:///"!==c.slice(0,8)&&"file://"===c.slice(0,7)&&(c="file:///"+c.slice(7));c.includes("\\")&&(c=c.replace(/\\/g,"/"));return ag.NodeJSFileResource.call(this,c,h)||this};$jscomp.inherits(hI,ag.NodeJSFileResource);hI.prototype.path=function(){return this.url.replace("file:///","")};hI.prototype.isRoot=function(){return!!this.path().match(ag.windowsRootPathRe)};
hI.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var c=this.url.match(ag.windowsURLPrefixRe);if(c)return this.newResource(c[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};ag.NodeJSWindowsFileResource=hI;var fO={name:"nodejs-file-resource",matches:function(c){return c.startsWith("file:")},resourceClass:"undefined"!=typeof process&&"win32"===process.platform?ag.NodeJSWindowsFileResource:ag.NodeJSFileResource};ag.resourceExtension=
fO;ag.resourceExtension=fO;ag.resourceExtension=fO;var jl=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");jl.applyExclude=function(c,h){return h?"string"===typeof h?!c.url.includes(h):"function"===typeof h?!h(c):h instanceof RegExp?!h.test(c.url):!0:!0};jl.Resource=Eg;jl.createFiles=Sc;jl.debug=!1;jl.slashRe=/\//g;var zs=function(c,h){h=void 0===h?{}:h;if(!c||"string"!==typeof c)throw Error("LocalResourceInMemoryBackend needs name!");this.name=c;this._filespec=h};zs.removeHost=
function(c){delete this.hosts[c]};zs.ensure=function(c,h){var n=this;h=void 0===h?{}:h;var b=this.named(h.host);return Promise.resolve().then(function(){return c?jl.createFiles("local://"+b.name,c):null}).then(function(){return n})};zs.named=function(c){c||(c="default");return this.hosts[c]||(this.hosts[c]=new this(c))};zs.prototype.get=function(c){return this._filespec[c]};zs.prototype.set=function(c,h){this._filespec[c]=h};zs.prototype.write=function(c,h){var n=this._filespec[c];n||(n=this._filespec[c]=
{created:new Date});n.content=h;n.isDirectory=!1;n.lastModified=new Date};zs.prototype.read=function(c){return(c=this._filespec[c])&&c.content?c.content:""};zs.prototype.mkdir=function(c){var h=this._filespec[c];h&&h.isDirectory||(h||(h=this._filespec[c]={created:new Date}),h.content&&delete h.content,h.isDirectory=!0,h.lastModified=new Date)};zs.prototype.partialFilespec=function(c,h){c=void 0===c?"/":c;h=void 0===h?Infinity:h;for(var n={},b=this.filespec,d=Object.keys(b),k=0;k<d.length;k++){var a=
d[k];if(a.startsWith(c)&&c!==a){var f=a.slice(c.length);(f.includes("/")?f.match(jl.slashRe).length+1:1)>h||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(zs.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(c){this._filespec=c}}});$jscomp.global.Object.defineProperties(zs,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});jl.LocalResourceInMemoryBackend=zs;var Ot=function(){return jl.Resource.apply(this,
arguments)||this};$jscomp.inherits(Ot,jl.Resource);Ot.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};Ot.prototype.write=function(c){jl.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var h=this.localBackend.get(this.path());if(h&&h.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),c);return Promise.resolve(this)};
Ot.prototype.mkdir=function(){jl.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var c=this.localBackend.get(this.path());if(c&&c.isDirectory)return Promise.resolve(this);if(c&&!c.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};Ot.prototype.exists=function(){jl.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};Ot.prototype.remove=function(){var c=this;jl.debug&&console.log("["+this+"] remove");var h=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(h)&&delete c.localBackend.filespec[n]});return Promise.resolve(this)};Ot.prototype.readProperties=function(){jl.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};Ot.prototype.dirList=function(c,h){c=void 0===c?1:c;h=void 0===h?{}:h;jl.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(c,h);h=h.exclude;var n=this.path(),b=[],d=Object.keys(this.localBackend.filespec);"infinity"===c&&(c=Infinity);for(var k={},a=0;a<d.length;k={$jscomp$loop$prop$dirToChild$2537:k.$jscomp$loop$prop$dirToChild$2537},a++){var f=d[a];f.startsWith(n)&&n!==f&&(f=f.slice(n.length),(f.includes("/")?f.match(jl.slashRe).length+1:1)>c?(k.$jscomp$loop$prop$dirToChild$2537=this.join(f.split("/").slice(0,c).join("/")+"/"),
b.some(function(l){return function(r){return r.equals(l.$jscomp$loop$prop$dirToChild$2537)}}(k))||b.push(k.$jscomp$loop$prop$dirToChild$2537)):(f=this.join(f),h&&!jl.applyExclude(f,h)||b.push(f)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(Ot.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return jl.LocalResourceInMemoryBackend.named(this.host())}}});jl.LocalResource=Ot;var gO={name:"local-resource",matches:function(c){return c.startsWith("local:")},resourceClass:jl.LocalResource};
jl.resourceExtension=gO;jl.resourceExtension=gO;jl.resourceExtension=gO;jl.default=Ot;var Zh=lively.FreezerRuntime.recorderFor("lively.resources/index.js");Zh.createFileSpec=be;Zh.importModuleViaNative=Oe;Zh.loadViaScript=ae;Zh.ensureFetch=Md;Zh.default=Eg;Zh.Resource=Eg;Zh.unregisterExtension=xd;Zh.registerExtension=qd;Zh.parseQuery=ta;Zh.extensions=aC;Zh.createFiles=Sc;Zh.resource=Xb;Zh.httpResourceExtension=eO;Zh.fileResourceExtension=fO;Zh.localResourceExtension=gO;Zh.newUUID=Wn;Zh.waitFor=gy;
Zh.registerExtension(Zh.localResourceExtension);Zh.registerExtension(Zh.httpResourceExtension);Zh.registerExtension(Zh.fileResourceExtension);Zh.createFileSpec=be;Zh.createFileSpec=be;Zh.importModuleViaNative=Oe;Zh.importModuleViaNative=Oe;Zh.loadViaScript=ae;Zh.loadViaScript=ae;Zh.ensureFetch=Md;Zh.ensureFetch=Md;Zh.registerExtension=qd;Zh.registerExtension=qd;Zh.unregisterExtension=xd;Zh.unregisterExtension=xd;Zh.parseQuery=ta;Zh.parseQuery=ta;Zh.extensions=aC;Zh.extensions=aC;Zh.createFiles=Sc;
Zh.createFiles=Sc;Zh.resource=Xb;Zh.resource=Xb;var Apa=Object.freeze({__proto__:null,Resource:Eg,createFileSpec:be,importModuleViaNative:Oe,loadViaScript:ae,ensureFetch:Md,registerExtension:qd,unregisterExtension:xd,parseQuery:ta,extensions:aC,createFiles:Sc,resource:Xb}),Ni=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Ni.pathForBrowserHistory=$e;Ni.addClassMappings=Be;Ni.morph=de;Ni.newMorphId=Pe;Ni.lazyInspect=function(c){var h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),2);h=b.yieldResult;n=h.inspect;Ni.inspect=n;return b.return(n(c))})};Ni.locateClass=Pl;Ni.string=Ih;Ni.parseQuery=ta;Ni.stringifyQuery=Ma;Ni.touchInput=Ni.touchInput||void 0;try{document.createEvent("TouchEvent"),Ni.touchInput=!0}catch(c){Ni.touchInput=!1}var nr=Ca("aC",Ni.touchInput);Ni.touchInputDevice=nr;Ni.touchInputDevice=nr;Ni.touchInputDevice=nr;Ni.nameToClassMapping=Ni.nameToClassMapping||{};Ni.pathForBrowserHistory=
$e;Ni.pathForBrowserHistory=$e;Ni.addClassMappings=Be;Ni.addClassMappings=Be;Ni.morph=de;Ni.morph=de;Ni.newMorphId=Pe;Ni.newMorphId=Pe;var bC=Ca("a9",Ni.lazyInspect);Ni.inspect=bC;Ni.inspect=bC;Ni.inspect=bC;var As=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");As.obj=dg;As.morph=de;var wp=Ca("as",function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=h.hasOwnProperty("Icon")&&"function"===typeof h.Icon?h.Icon:h.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(b,d){var k=d=void 0===d?{prefix:"",suffix:""}:d,a=k.prefix;k=k.suffix;var f=[];a&&f.push.apply(f,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));f.push.apply(f,$jscomp.arrayFromIterable(this.textAttribute(b,As.obj.dissoc(d,["fontSize"]))));k&&f.push.apply(f,$jscomp.arrayFromIterable("string"===
typeof k?[k||"",{}]:k));return As.morph(Object.assign({type:"label",value:f},As.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,d){d=void 0===d?{}:d;var k=d.textStyleClasses&&d.textStyleClasses.includes("far");return[As.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:k?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(b,d){b.textAndAttributes=this.textAttribute(d)}}],h,{pathInPackage:function(){return"text/icons.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));As.Icon=wp;As.Icon=wp;As.Icon=wp;var hO=Ca("bn",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},
adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},
anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},
apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},
"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},
baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},
"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},
bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},
"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},
buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},
"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},
"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},
"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},
cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},
child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},
"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},
"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},
"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},
"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},
cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},
"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},
"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},
drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},
"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},
"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},
female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},
"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},
"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},
"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},
fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},
"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},
"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},
"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},
gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},
"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},
hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},
horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},
"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},
invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},
keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},
laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},
linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},
magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},
"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},
microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},
monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},
"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},
openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},
passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},
percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},
"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},
"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},
pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},
react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},
republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},
"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},
"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},
shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},
sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},
snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},
"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},
spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},
"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},
studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},
sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},
"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},
"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},
"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},
"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},
undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},
"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},
"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},
"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},
weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},
"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},
yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});As.Icons=hO;As.Icons=hO;As.Icons=hO;var ze=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");ze.vdom=cI;ze.promise=Hg;ze.arr=Lf;ze.tree=ux;ze.obj=dg;ze.string=Ih;ze.addOrChangeCSSDeclaration=V;ze.addOrChangeLinkedCSS=
ba;ze.defaultStyle=Fj;ze.renderGradient=Sy;ze.defaultAttributes=Yw;ze.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
ze.pathAttributes=Zw;ze.svgAttributes=Xd;ze.renderMorph=Hc;ze.Transform=Rk;ze.pt=di;ze.getSvgVertices=Qy;ze.config=Ul;var iO=ze.vdom;ze.h=iO.h;ze.diff=iO.diff;ze.patch=iO.patch;ze.createNode=iO.create;ze.svgNs="http://www.w3.org/2000/svg";ze.CanvasHook=function(c){this.canvasMorph=c};ze.CanvasHook.prototype.hook=function(c,h,n){this.canvasMorph.afterRender(c,this.canvasMorph._canvas!==c&&"CANVAS"==c.tagName)};ze.InitStroke=function(c,h,n){this.path=c;this.renderer=h;this.reverse=n};ze.InitStroke.prototype.hook=
function(c,h,n){h=this.path.drawnProportion||0;0!=h&&(c.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),c.setAttribute("stroke-dasharray",c.getTotalLength()),c.setAttribute("stroke-dashoffset",c.getTotalLength()*(this.reverse?1-h:-1+(1-h))))};var jO=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=h.hasOwnProperty("Renderer")&&"function"===typeof h.Renderer?h.Renderer:h.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+b);if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: "+d);k||(k={window:System.global,document:d.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=d;this.domNode=null;this.domEnvironment=k;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=
this.renderWorldLoopProcess=null;this.requestAnimationFrame=k.window.requestAnimationFrame.bind(k.window)}},{key:"clear",value:function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return d=b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:d&&(k=d.parentNode,k.removeChild(d),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(f){return k.removeChild(f)})),
b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return ze.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(d){return Promise.all([ze.addOrChangeCSSDeclaration("lively-morphic-css",ze.defaultCSS,d),ze.addOrChangeLinkedCSS("lively-ibm-plex",ze.config.css.ibmPlex),ze.addOrChangeLinkedCSS("lively-font-awesome",ze.config.css.fontAwesome,d,!1),ze.addOrChangeLinkedCSS("lively-font-inconsolata",ze.config.css.inconsolata,
d,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);
b.renderWorldLoopLater=null;return d.yield(ze.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var d=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){d.renderWorldLoopLater=null;0<d.renderWorldLoopLaterCounter&&d.renderLater(d.renderWorldLoopLaterCounter-1);try{d.renderStep()}catch(k){console.error("Error rendering morphs:",
k)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var d="#"+ze.string.regExpEscape(b.id),k=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==b.id&&(k=this.domNode);if(k)return k;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(k=b.next();!k.done;k=b.next())if(k=k.value.querySelector(d))return k;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===
b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var d=this.renderMap.get(b);if(d)return d}b.aboutToRender(this);d=b.render(this);this.renderMap.set(b,d);return d}},{key:"renderAsFixed",value:function(b){var d=this.render(b);b.isHTMLMorph||(d.properties.style.position="fixed");return d}},{key:"renderFixedMorphs",value:function(b,d){d=this.domNode;var k=this.fixedMorphNodeMap;if((b.length||k.size)&&d&&d.parentNode){d=d.parentNode;for(var a=$jscomp.makeIterator(k),f=a.next();!f.done;f=
a.next()){var l=$jscomp.makeIterator(f.value);f=l.next().value;l=l.next().value;b.includes(f)||(l.parentNode&&l.parentNode.removeChild(l),k.delete(f))}a=b.map(function(y){return k.get(y)});var r=a.map(function(y){return y&&y.id});f=[].concat($jscomp.arrayFromIterable(d.children)).map(function(y){return y.id}).filter(function(y){return r.includes(y)});ze.arr.equals(r,f)||a.map(function(y){return y&&y.parentNode&&y.parentNode.removeChild(y)});b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){a=
a.value;f=this.renderMap.get(a)||this.renderAsFixed(a);l=this.renderAsFixed(a);l=ze.diff(f,l);var v=k.get(a);v||(v=ze.createNode(f,this.domEnvironment),k.set(a,v));v.parentNode||d.appendChild(v);ze.patch(v,l)}}}},{key:"renderMorph",value:function(b){var d=this.renderSubmorphs(b);return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),d)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,b.submorphs)}},{key:"renderSelectedSubmorphs",
value:function(b,d){var k=b.borderWidthLeft,a=b.borderWidthTop,f=b.origin,l=f.x;f=f.y;for(var r=d.length-1,v=Array(r+1);0<=r;r--)v[r]=this.render(d[r]);d={};return ze.h("div",{style:Object.assign({position:"absolute",left:l-(b.isPath?0:k)+"px",top:f-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==b.clipMode?(d[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+b.id+")",d):{}):{})},v)}},{key:"renderWorld",
value:function(b){for(var d=b.submorphs,k=[],a=[],f=0;f<d.length;f++){var l=d[f];l.hasFixedPosition?a.push(l):k.push(l)}d=this.renderSelectedSubmorphs(b,k);b=ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),d);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var d=b.imageUrl;if(d.startsWith("data:")){var k=d.indexOf(","),a=d.substring(5,k),f=$jscomp.makeIterator(a.split(";"));a=f.next().value;f=f.next().value;k=d.substring(k+1);"base64"!==f&&(d=ze.string.createDataURI(k,
a))}return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),[ze.h("img",{src:d,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),[ze.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new ze.CanvasHook(b)}),
this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),[ze.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var d=b.startMarker,k=b.endMarker,a=b.showControlPoints,f=ze.getSvgVertices(b.vertices),l=ze.h("path",Object.assign({namespace:ze.svgNs,
id:"svg"+b.id},ze.pathAttributes(b))),r=ze.h("mask",{namespace:ze.svgNs,id:"mask"+b.id},[ze.h("rect",{namespace:ze.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),ze.h("path",{namespace:ze.svgNs,initStroke:new ze.InitStroke(b,this,!0),attributes:{d:f,stroke:"black",fill:"none"}}),ze.h("path",{namespace:ze.svgNs,initStroke:new ze.InitStroke(b,this,!1),attributes:{d:f,stroke:"white",fill:"none"}})]);f=[ze.h("clipPath",{namespace:ze.svgNs,id:"clipPath"+b.id},ze.h("path",
{namespace:ze.svgNs,attributes:{d:f,fill:"white"}})),r];d&&(d.id||(d.id="start-marker"),l.properties.attributes["marker-start"]="url(#"+b.id+"-"+d.id+")",f=[],f.push(this._renderPath_Marker(b,d)));k&&(k.id||(k.id="end-marker"),l.properties.attributes["marker-end"]="url(#"+b.id+"-"+k.id+")",f||(f=[]),f.push(this._renderPath_Marker(b,k)));var v;a&&(v=ze.h("g",{namespace:ze.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,l,f,v)}},{key:"_renderPath_ControlPoints",value:function(b,
d){function k(Y,S,ea,qa,Fa,K){var Z=qa?12:Math.min(8,Math.max(3,l));ea="path-point path-point-"+ea;qa=qa?"orange":r;"string"===typeof Fa&&(ea+="-"+Fa);K&&(Z=Math.max(3,Math.ceil(Z/2)));return K?ze.h("circle",{namespace:ze.svgNs,style:{fill:"white","stroke-width":2,stroke:qa},attributes:{class:ea,cx:Y,cy:S,r:Z}}):ze.h("circle",{namespace:ze.svgNs,style:{fill:qa},attributes:{class:ea,cx:Y,cy:S,r:Z}})}var a=b.vertices;d=b.borderWidth;var f=b.showControlPoints;b=b._controlPointDrag;var l=0==d?6:d+2,r=
"red";d=[];if("object"===typeof f){var v=f.radius;(f=f.fill)&&(r=String(f));"number"===typeof v&&(l=v)}if(a.length){f=0;var y=a[0];v=y.x;var A=y.y;y=y.controlPoints.next;var E=b&&b.maybeMerge&&b.maybeMerge.includes(f);d.push(k(v,A,f,E));for(f=1;f<a.length-1;f++){var F=a[f];E=F.isSmooth;var H=F.x,J=F.y,O=F.controlPoints;F=O.previous;O=O.next;var L=b&&b.maybeMerge&&b.maybeMerge.includes(f);E?d.push(k(H,J,f,L),k(v+y.x,A+y.y,f-1,!1,"control-2",!0),k(H+F.x,J+F.y,f,!1,"control-1",!0)):d.push(k(H,J,f,L));
v=H;A=J;y=O}J=a[a.length-1];a=J.isSmooth;E=J.x;H=J.y;J=J.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(f);a?d.push(k(E,H,f,b),k(v+y.x,A+y.y,f-1,!1,"control-2",!0),k(E+J.x,H+J.y,f,!1,"control-1",!0)):d.push(k(E,H,f,b))}return d}},{key:"_renderPath_Marker",value:function(b,d){function k(a){var f=a.tagName,l=a.id,r=a.children,v=a.style;r=r?r.map(k):void 0;l&&(l=b.id+"-"+l);return ze.h(f,{namespace:ze.svgNs,id:l,style:v,attributes:ze.obj.dissoc(a,["tagName","id","children","style"])},
r)}return k(d)}},{key:"renderSvgMorph",value:function(b,d,k,a){a=void 0===a?[]:a;var f=ze.svgAttributes(b),l=b.innerBounds(),r=l.width;l=l.height;var v,y=[];b.fill&&b.fill.isGradient&&(v||(v=[]),v.push(ze.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&(v||(v=[]),v.push(ze.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));k&&k.length&&(v||(v=[]),v.push.apply(v,$jscomp.arrayFromIterable(k)));y.push(d);v&&y.push(ze.h("defs",{namespace:ze.svgNs},
v));d=ze.obj.select(ze.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:Object.assign({},d,{width:r+"px",height:l+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),[ze.h("svg",Object.assign({namespace:ze.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},f),y),this.renderSubmorphs(b),
ze.h("svg",Object.assign({namespace:ze.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},f),a)])}},{key:"renderPreview",value:function(b,d){var k=void 0===d.center?!0:d.center,a=void 0===d.ignoreMorphs?[]:d.ignoreMorphs,f=void 0===d.asNode?!1:d.asNode,l=b.origin,r=b.rotation,v=void 0===d.width?100:d.width;d=void 0===d.height?100:d.height;var y=Math.max(.1,1/b.scale);y=(new ze.Transform(b.position.negated(),0,ze.pt(y,y))).transformRectToRect(b.bounds());var A=Math.max(.1,Math.min(v/
y.width,d/y.height));l=new ze.Transform(y.topLeft().negated().scaleBy(A).subPt(l),r,ze.pt(A,A));r=(r=this.getNodeForMorph(b))?r.cloneNode(!0):ze.renderMorph(b);k&&(b=l.transformRectToRect(b.extent.extentAsRectangle()),l=l.preConcatenate(new ze.Transform(ze.pt(b.width<v?(v-b.width)/2:0,b.height<d?(d-b.height)/2:0))));r.style.transform=l.toCSSTransformString();r.style.pointerEvents="";ze.tree.prewalk(r,function(E){if("string"===typeof E.className){var F=E.className.split(" ").map(function(H){return H.trim()}).filter(Boolean);
F.includes("Morph")&&(E.className=ze.arr.withoutAll(F,["morph","Morph"]).join(" "),a.find(function(H){return H.id===E.id})&&E.remove(),E.id="")}},function(E){return Array.from(E.childNodes)});return f?r:r.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],h,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1406,end:20500})}(void 0);ze.Renderer=jO;ze.Renderer=jO;ze.Renderer=jO;var UE=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),a$=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=h.hasOwnProperty("FontDetector")&&"function"===typeof h.FontDetector?h.FontDetector:h.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,k){return[d,String(100*(k+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=
null}},{key:"prepare",value:function(){var b=this.defaultWidth,d=this.defaultHeight,k=this.possibleFontWeights,a=this.baseFonts,f=this.document.getElementsByTagName("body")[0],l=this.span||this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var r=this.document.createElement("div");r.style.position="absolute";r.style.width="100%";r.style.overflow="hidden";r.style["pointer-events"]="none";r.style["-webkit-user-select"]="none";r.appendChild(l);
f.appendChild(r)}for(var v in k)for(var y in a)l.style.fontFamily=a[y],l.style.fontWeight=k[v],b[a[y]+"@"+k[v]]=l.offsetWidth,d[a[y]+"@"+k[v]]=l.offsetHeight;this.span=l;this.prepared=!0}},{key:"isFontSupported",value:function(b,d){d=void 0===d?"normal":d;this.possibleFontWeights.includes(d)||(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var k=this.defaultWidth,a=this.defaultHeight,f=this.baseFonts,l=this.span,r=this.document.body;l.parentNode||r.appendChild(l);for(var v in f)if(l.style.fontWeight=
d,l.style.fontFamily=b+","+f[v],l.offsetWidth!=k[f[v]+"@"+d]||l.offsetHeight!=a[f[v]+"@"+d])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return UE.fonts}}],h,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:15,end:3680})}(void 0),Bpa=a$=UE.FontDetector,FW=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},
{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",
type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",
type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},
{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},
{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},
{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",
type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",
type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",
isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},
{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},
{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",
type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},
{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",
type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},
{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",
type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},
{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",
type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},
{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},
{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",
isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",
type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",
type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",
type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},
{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",
type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",
type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",
type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},
{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},
{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},
{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",
type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},
{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},
{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},
{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];UE.fonts=FW;UE.fonts=FW;UE.fonts=FW;UE.default=a$;var Ci=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Ci.textlayerNodeForFontMeasure=function(c){var h=
c.viewState,n=h.text_layer_node;h=h.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(c.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));h&&!h.className.includes("newtext-text-layer")&&(c.viewState.fontmetric_text_layer_node=h=null);n&&!h&&n.parentNode&&(h=c.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return h};Ci.isExtendingChar=function(c){return 768<=c.charCodeAt(0)&&Ci.extendingChars.test(c)};
Ci.skipExtendingChars=function(c,h,n){for(;(0>n?0<h:h<c.length)&&Ci.isExtendingChar(c.charAt(h));)h+=n;return h};Ci.charBoundsOfBigMonospacedLine=function(c,h,n,b,d,k,a,f){d=void 0===d?0:d;k=void 0===k?0:k;n=n.text.length;if(500>n||h.isProportional(Ci.getComputedFontFamily(b)))return null;var l=Infinity,r=a.defaultTextStyle;a.lineWrapping&&(l=b.getBoundingClientRect().width);h=h._domMeasure.defaultCharExtent(c,{defaultTextStyle:r},f);c=h.width;h=h.height;b=Array(n);for(a=0;a<n;a++)d+c>l&&(d=0,k+=
h),b[a]={x:d,y:k,width:c,height:h},d+=c;return b};Ci.charBoundsOfLine=function(c,h,n,b){n=void 0===n?0:n;b=void 0===b?0:b;c=h.ELEMENT_NODE;var d=h.TEXT_NODE,k=h.ownerDocument,a=[],f=0;if(h)if(h.className.includes("line")){n-=h.offsetLeft;b-=h.offsetTop;var l=h.childNodes[0]}else l=h.getElementsByClassName("line")[0].childNodes[0],n=n-h.offsetLeft+Ci.getComputedMarginLeft(h),b-=h.offsetTop;else l=null;if(!l){var r=l=k.createElement("br");h.appendChild(r)}for(;l&&!(Infinity<f);){var v="BR"!==l.tagName&&
l.nodeType===c&&l.childNodes[0]||l;if(v.nodeType===d)for(var y=v.length,A=0;A<y;A++){var E=Ci.measureCharInner(k,v,A,"right");var F=E.left;var H=E.top;h=E.width;E=E.height;F+=n;H+=b;a[f++]={x:F,y:H,width:h,height:E}}else if(l.nodeType===c)v=l.getBoundingClientRect(),F=v.left,H=v.top,h=v.width,E=v.height,F+=n,H+=b,a[f++]={x:F,y:H,width:h,height:E};else throw Error("Cannot deal with node "+l);l=l.nextSibling}r&&r.parentNode.removeChild(r);return a};Ci.measureCharInner=function(c,h,n,b){b=void 0===b?
"left":b;var d=n;n+=1;if(3==h.nodeType)for(var k=0;4>k;k++){var a=Ci.getUsefulRect(Ci.range(c,h,d,n).getClientRects(),b);if(a.left||a.right||0==d)break;n=d;--d}return a};Ci.range=function(c,h,n,b,d){c=c.createRange();c.setEnd(d||h,b);c.setStart(h,n);return c};Ci.getUsefulRect=function(c,h){var n={left:0,right:0,top:0,bottom:0};if("left"==h)for(h=0;h<c.length&&(n=c[h]).left==n.right;h++);else for(h=c.length-1;0<=h&&(n=c[h]).left==n.right;h--);return n};Ci.string=Ih;Ci.obj=dg;Ci.FontDetector=Bpa;Ci.cumulativeOffset=
D;Ci.config=Ul;Ci.debug=!!Ci.config.onloadURLQuery["debug-font-metric"];Ci.checkTimeout=1E3;var b$=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("FontMetric")&&"function"===typeof h.FontMetric?h.FontMetric:h.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap=
{};this.cachedBoundsInfo={};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var d=this.element.parentNode;var k=this.element.ownerDocument}this.uninstall();this.charMap={};this.cachedBoundsInfo={};k&&d&&this.install(k,d,b)}},{key:"install",value:function(b,d,k){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new Ci.DOMTextMeasure).install(b,
d,k)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(b,d){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=d?"hidden":"visible"}},{key:"measure",value:function(b,d){var k=b.fontFamily,a=b.fontSize,f=b.fontWeight,l=b.fontStyle,r=
b.textDecoration,v=b.textStyleClasses;b=b.transform;var y=this.element;b&&(b=b.inverse());y.textContent=d;Object.assign(y.style,{"-webkit-text-size-adjust":"none",fontFamily:k,fontWeight:f,fontStyle:l,textDecoration:r,transform:b,fontSize:a+"px"});y.className=v?v.join(" "):"";try{var A=y.getBoundingClientRect();var E=A.width;var F=A.height}catch(H){return{width:0,height:0}}return{height:F,width:E}}},{key:"charBoundsFor",value:function(b,d){var k=d.length,a=Array(k),f=this.cachedBoundsInfo,l=f.bounds,
r=f.str;f=f.style;if(this.isProportional(b.fontFamily)){f=l&&Ci.obj.equals(f,b);for(var v=!b.fixedCharacterSpacing,y=0,A=0;y<k;y++){var E=d[y];if(v)if(f=f&&E===r[y]){var F=l[y];E=F.width;F=F.height}else E=d.substr(0,y+1),F=this.measure(b,E),E=F.width,F=F.height,E-=A;else F=this.sizeFor(b,E),E=F.width,F=F.height;a[y]={x:A,y:0,width:Math.ceil(E),height:Math.ceil(F)};A+=E}v&&(this.cachedBoundsInfo={bounds:a,str:d,style:b})}else for(d=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-d.width,d=d.height,
r=0;r<k;r++)l=b*r,a[r]={x:l,y:0,width:b,height:d};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var d={fontFamily:b,fontSize:12},k=this.sizeFor(d,"w").width;d=this.sizeFor(d,"i").width;return this.isProportionalCache[b]=k!==d}},{key:"sizeFor",value:function(b,d,k){d=void 0===d?"":d;var a=b.fontFamily,f=b.fontSize,l=b.fontWeight,r=b.fontStyle,v=b.textDecoration,y=b.textStyleClasses;b={fontFamily:a,fontSize:f,fontWeight:l,
fontStyle:r,textDecoration:v,textStyleClasses:y};if((void 0===k||!k)&&1<d.length)return this.measure(b,d);k=y?y.join(" "):"";a=[a,f,l,r,v,k].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][d]||(this.charMap[a][d]=this.measure(b,d));return this.charMap[a][d]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,d){d=void 0===d?"normal":d;var k=this.fontDetector||(this.fontDetector=new Ci.FontDetector(this.element.ownerDocument));
if(this.supportedFontCache[b+"-"+d]){var a=this.supportedFontCache[b+"-"+d],f=a.ts;a=a.value;if(Date.now()-f<Ci.checkTimeout)return a}k=k.isFontSupported(b,d);this.supportedFontCache[b+"-"+d]={ts:Date.now(),value:k};return k}},{key:"defaultCharExtent",value:function(b,d,k){return this._domMeasure.defaultCharExtent(b,d,k)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,d,k,a,f,l,r){return this._domMeasure.computeCharBBoxes(b,d,0,0,f,l,r,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,
d,k,a,f,l,r){return this._domMeasure.computeBBoxesOfLines(b,d,0,0,f,l,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},
{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var d=new Ci.FontMetric;d.install(b,b.body);return d}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:316,end:7459})}(void 0),
Cpa=b$=Ci.FontMetric;Ci.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("DOMTextMeasure")&&"function"===typeof h.DOMTextMeasure?h.DOMTextMeasure:h.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&b&&this.install(d,b);return this}},
{key:"install",value:function(b,d,k){this.maxLineBBoxCacheCount=(this.debug=k=void 0===k?!1:k)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=k?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(k?" debug":"");this.setMeasureNodeStyles(b.style,!0);d.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,d){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var d=b.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,d.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,d,k){var a=this,f=this.generateStyleKey(d),l=this.defaultCharWidthHeightCache[f];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var r=this.doc;return this.withTextLayerNodeDo(b,k,d,f,function(v){var y=r.createElement("span");y.className="line";y.style.whiteSpace="pre";v.appendChild(y);y.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var A=y.getBoundingClientRect().width,E=r.createElement("span");E.className="line";E.style.whiteSpace="pre";v.appendChild(E);E.textContent="H\ne\nll\no";var F=E.getBoundingClientRect().height;v.removeChild(y);v.removeChild(E);return a.defaultCharWidthHeightCache[f]={width:A/92,height:Math.ceil(F/4)}})}},{key:"computeBBoxesOfLines",value:function(b,d,k,a,f,l,r){var v=this;k=void 0===k?0:k;a=void 0===a?0:a;for(var y=this.generateStyleKey(f),A=Array(d.length),E=!0,F=0;F<d.length;F++){var H=!d[F].textAttributes.length&&
this.lineBBoxCache[y+"_"+d[F].text];H&&H.height&&H.width?A[F]=H:E=!1}return E?A:this.withTextLayerNodeDo(b,l,f,y,function(J,O,L){for(var Y=Array(d.length),S=Array(d.length),ea=0;ea<d.length;ea++)if(!S[ea]){var qa=r(d[ea]);qa.style.display="inline-block";J.appendChild(qa);Y[ea]=qa}for(ea=0;ea<Y.length;ea++)if(!S[ea]){qa=Y[ea];var Fa=qa.getBoundingClientRect();v.lineBBoxCache[y+"_"+d[ea].text]=S[ea]={x:Fa.left-qa.offsetLeft+k-O,y:Fa.top-qa.offsetTop+a-L,width:Fa.width,height:Fa.height}}for(O=0;O<Y.length;O++)J.removeChild(Y[O]);
return S})}},{key:"computeCharBBoxes",value:function(b,d,k,a,f,l,r,v){var y=this;k=void 0===k?0:k;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,l,f,this.generateStyleKey(f),function(A,E,F){var H=r(d);A.appendChild(H);A=1E4<d.stringSize&&Ci.charBoundsOfBigMonospacedLine(b,v,d,H,k,a,f,l)||Ci.charBoundsOfLine(d,H,k-E,a-F);y.debug||H.parentNode.removeChild(H);return A})}},{key:"withTextLayerNodeDo",value:function(b,d,k,a,f){var l=this.doc,r=this.textlayerNodeCache,v=this.element,y=Ci.textlayerNodeForFontMeasure(b);
y||(y=r[a]);if(!y){this.textlayerNodeCacheCount++;y=r[a]=d(k,[]);y.id=a;d=k.width;var A=k.clipMode;k.width||k.clipMode&&"visible"!==k.clipMode?(k=l.createElement("div"),k.style.position="absolute",A&&(k.style.overflow=A),d&&(k.style.width=d+"px"),k.id=a,k.appendChild(y),v.appendChild(k)):v.appendChild(y)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,y.style.transform=a.toString());a=y.getBoundingClientRect();
b=a.left;a=a.top;try{return f(y,b,a)}finally{if(y.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){f=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var E;f--&&(E=v.childNodes[0]);)r[E.id]=null,v.removeChild(E);this.textlayerNodeCacheCount-=f}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11128,end:19574})})(void 0);Ci.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Ci.getComputedFontFamily="function"===typeof Ci.GLOBAL.getComputedStyle?function(c){return Ci.GLOBAL.getComputedStyle(c).fontFamily}:function(){return""};Ci.getComputedMarginLeft="function"===typeof Ci.GLOBAL.getComputedStyle?function(c){return parseInt(Ci.GLOBAL.getComputedStyle(c).marginLeft)||
0}:function(){return 0};Ci.default=b$;var ej=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");ej.signalBindings=function(c,h,n){if(c=c.attributeConnections){c=c.slice();for(var b=0;b<c.length;b++)c[b].sourceAttrName===h&&c[b].update(n)}};ej.informMorph=function(c,h,n){try{n.onChange(h);ej.signalBindings(n,"change",h);for(var b=n.owner;b;)b.onSubmorphChange(h,n),b=b.owner}catch(d){console.error("Error in informMorph: "+d.stack)}};ej.arr=Lf;ej.string=Ih;ej.obj=dg;ej.connect=Li;ej.signal=
em;ej.disconnect=Ek;(function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("Change")&&"function"===typeof h.Change?h.Change:h.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var GW=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=h.hasOwnProperty("GroupChange")&&"function"===typeof h.GroupChange?h.GroupChange:h.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);
b.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(ej.Change);ej.GroupChange=GW;ej.GroupChange=GW;ej.GroupChange=GW;var HW=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("ValueChange")&&"function"===typeof h.ValueChange?h.ValueChange:h.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k,a){Zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=d;this.value=k;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],h,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(ej.Change);ej.ValueChange=HW;ej.ValueChange=HW;ej.ValueChange=HW;var IW=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("MethodCallChange")&&"function"===typeof h.MethodCallChange?h.MethodCallChange:h.MethodCallChange=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k,a,f){Zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=d;this.args=k;this.undo=a;this.meta=f}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,d=b.target;d[b.selector].apply(d,b.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(ej.GroupChange);ej.MethodCallChange=IW;ej.MethodCallChange=IW;ej.MethodCallChange=IW;var kO=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("ChangeManager")&&"function"===typeof h.ChangeManager?h.ChangeManager:h.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(d){return d.target===b})}},{key:"apply",value:function(b,d){d.apply()}},{key:"doWithValueChangeMeta",value:function(b,d,k){this.defaultMeta=b;this.metaStack.push(b);b=k(d);this.metaStack.pop();this.defaultMeta=
ej.arr.last(this.metaStack)||{};return b}},{key:"addValueChange",value:function(b,d,k,a){d=new ej.ValueChange(b,d,k,Object.assign({},this.defaultMeta,{},a));return this._record(b,d)}},{key:"addMethodCallChangeDoing",value:function(b,d,k){var a=b.target,f=b.selector,l=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+f)});l=new ej.MethodCallChange(a,f,l,b,this.defaultMeta);d.groupChangesWhile(l,k);return l}},{key:"_record",value:function(b,d){ej.signal(this,"changeRecorded",
d);d.hasOwnProperty("value")&&(d.prevValue=b._morphicState[d.prop],b._morphicState[d.prop]=d.value);b.makeDirty(d);var k=ej.arr.last(this.changeGroupStack);k&&k.consumesChanges()?k.addChange(d):(this.changes.push(d),b._rev=++this.revision,this.informChangeListeners(d));ej.informMorph(this,d,b);return d}},{key:"groupChangesWhile",value:function(b,d,k,a){a=void 0===a?!0:a;d||(d=new ej.GroupChange(b));this.changeGroupStack.push(d);try{return k(),ej.arr.remove(this.changeGroupStack,d),a?this._record(b,
d):d}catch(f){throw ej.arr.remove(this.changeGroupStack,d),f;}}},{key:"dontRecordChangesWhile",value:function(b,d){return this.groupChangesWhile(b,void 0,d,!1)}},{key:"recordChangesWhile",value:function(b,d){var k=this.changes.length;b();b=this.changes.slice(k,this.changes.length);return d?b.filter(d):b}},{key:"addChangeListener",value:function(b){ej.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){ej.arr.remove(this.changeRecordedListeners,b)}},
{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(d){return d(b)})}},{key:"recordChangesStart",value:function(b,d){d=ej.obj.newKeyIn(this.changeRecorders,(void 0===d?"":d)+"__change_recorder_"+Date.now());var k=b?function(f){return b(f)&&a.changes.push(f)}:function(f){return a.changes.push(f)},a=this.changeRecorders[d]={id:d,filter:b,changes:[],listener:k};this.addChangeListener(k);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];
var d=this.changeRecorders[b],k=d.changes;d=d.listener;delete this.changeRecorders[b];this.removeChangeListener(d);return k}},{key:"recordChangesStartForMorph",value:function(b,d){d=this.recordChangesStart(d,b.id);var k=this.changeRecordersPerMorph.get(b);k||(k=[],this.changeRecordersPerMorph.set(b,k));k.push(d.id);return d}},{key:"recordChangesStopForMorph",value:function(b,d){var k=this.changeRecordersPerMorph.get(b);if(!k||!k.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
b+": recorder not found"),[];(b=d)?ej.arr.remove(k,b):b=k.pop();return this.recordChangesStop(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7573})}(void 0);ej.ChangeManager=kO;ej.ChangeManager=
kO;ej.ChangeManager=kO;var ln=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");ln.printArg=function(c){return ln.obj.inspect(c,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};ln.obj=dg;ln.arr=Lf;ln.events=vz;ln.fun=gn;(function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("Undo")&&"function"===typeof h.Undo?h.Undo:h.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k){d=void 0===d?[]:d;this.name=b;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=void 0===k?0:k}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(k){var a=k.target;return a.isUsedAsEpiMorph()||!d.targets.some(function(f){return f===a||f.isAncestorOf(a)})?!1:"function"===typeof b?b(k):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){ln.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=ln.arr.sortBy(b.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});
b.length&&(this.changes=ln.arr.flatmap(b,function(d){return d.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var b=this.name,d=this.changes,k=this.no,a=this.isRecording();d=d.length?"\n  "+d.map(function(f){var l=f.selector,r=f.args,v=f.prop,y=f.value;f=f.target;return l?f+"."+l+"("+r.map(ln.printArg)+")":f+"."+v+" = "+ln.printArg(y)}).join("\n  "):"no changes";return"Undo("+k+":"+b+" "+(a?"RECORDING ":
"")+d+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],h,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2498})})(void 0);var iI=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("UndoManager")&&"function"===
typeof h.UndoManager?h.UndoManager:h.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=
void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=ln.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),this.undos=ln.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,d){d=void 0===d?"new undo group":d;this.group();this.undoStart(b,d);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var d=this,k=this.grouping;(k.debounce||(k.debounce=ln.fun.debounce(b||k.debounceTime,function(){k.debounce=null;k.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(b,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new ln.Undo(d,
[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"undo",value:function(){this.undoStop();var b=this.undos.pop();if(b){ln.arr.remove(this.grouping.current,b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();
var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+b+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],h,{pathInPackage:function(){return"undo.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2633,end:5684})}(void 0);ln.UndoManager=iI;ln.UndoManager=iI;ln.UndoManager=iI;var Pn=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");Pn.promise=Hg;Pn.bowser=vs;Pn.touchInputDevice=nr;Pn.placeholderValue="\u0001\u0001";Pn.placeholderRe=/\u0001/g;var c$=function(c){var h=
lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=h.hasOwnProperty("TextInput")&&"function"===typeof h.TextInput?h.TextInput:h.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,
manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,d){var k=this,a=this.domState,f=a.isInstalled,l=a.rootNode;this.world=d;if(f){if(l===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=b;b.tabIndex=1;d=a.textareaNode=b.ownerDocument.createElement("textarea");d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
Pn.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";b.insertBefore(d,b.firstChild);Pn.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(r){return k.onRootNodeFocus(r)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(r){return k.onTextAreaFocus(r)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(r){return k.onTextAreaBlur(r)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(r){return k.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(r){return k.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(r){return k.eventDispatcher.dispatchDOMEvent(r)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(r){return k.inputState.manualCopy?k.inputState.manualCopy.onEvent(r):k.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(r){return k.inputState.manualPaste?k.inputState.manualPaste.onEvent(r):k.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(r){return k.onCompositionStart(r)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(r){return k.onCompositionEnd(r)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(r){return k.onCompositionUpdate(r)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(r){return k.onInput(r)},capturing:!1}];a.eventHandlers.forEach(function(r){return r.node.addEventListener(r.type,r.fn,r.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(k){return k.node.removeEventListener(k.type,k.fn,k.capturing)});var d=b.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=Pn.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(Pn.placeholderRe,""):""}},{key:"focus",value:function(b,d){var k=this.domState.textareaNode;k&&(Pn.touchInputDevice&&b&&b.isText&&!b.readOnly&&k.removeAttribute("disabled"),b&&b.stealFocus||k.ownerDocument.activeElement!==k&&k.focus(),
Pn.bowser.firefox&&Promise.resolve().then(function(){return k.ownerDocument.activeElement!==k&&k.focus()}),b&&b.isText&&b.focusable?(Pn.touchInputDevice&&k.focus(),this.ensureBeingAtCursorOfText(b)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var b=this.domState.textareaNode;Pn.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode,
a=function(f){k.removeEventListener("copy",a);f.preventDefault();b.forEach(function(l){return f.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return k.removeEventListener("copy",a)},300);k.addEventListener("copy",a);k.value="";k.select();k.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode;k.value=b;k.select();k.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var d=b.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,d){var k=this,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(!k.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=k.inputState;if(!a[b]){v.jumpTo(2);break}v.setCatchFinallyBlocks(3);return v.yield(a[b].promise,
5);case 5:v.leaveTryBlock(2);break;case 3:v.enterCatchBlock();case 2:return f=Pn.promise.deferred(),l=!1,a[b]={onEvent:function(y){l||(a[b]=null,l=!0,f.resolve(y))},promise:f.promise},d(),v.setCatchFinallyBlocks(6),v.yield(Pn.promise.waitFor(1E3,function(){return l}),8);case 8:v.leaveTryBlock(7);break;case 6:r=v.enterCatchBlock(),a[b]=null,l=!0,f.reject(r);case 7:return v.return(f.promise)}})}},{key:"onTextAreaBlur",value:function(b){var d=this;setTimeout(function(){var k=d.domState||{},a=k.textareaNode;
k=k.rootNode;!k||document.activeElement!==k||d.world.focusedMorph&&d.world.focusedMorph.stealFocus||Pn.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var d=this.domState||{},k=d.rootNode;if(b.target===d.textareaNode||b.target===k)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var d=
this.readValue();b.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var d=this.inputState.composition,k=this.readValue();d.lastValue!==k&&(d.lastValue=k,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var d=(this.domState||{}).textareaNode;d&&(d.style.left=b.x+"px",d.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var d=b.world();if(d){var k=b.whatsVisible,a=b.cursorPosition,f=a.row;a=a.column;f=Math.max(k.startRow,Math.min(f,k.endRow));k=b.charBoundsFromTextPosition({row:f,column:a}).topLeft();b=d.visibleBounds().insetBy(10).constrainPt(b.worldPoint(k.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],h,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12306})}(void 0),Dpa=c$=Pn.TextInput;Pn.default=c$;var JW=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");JW.arr=Lf;var d$=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=h.hasOwnProperty("KillRing")&&"function"===typeof h.KillRing?h.KillRing:h.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var d=this.buffer;d.push(b);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],h,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),Epa=d$=JW.KillRing;JW.default=d$;var hi=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");hi.computeHashIdOfEvent=function(c){var h=
c.key;c=0|(c.ctrlKey?1:0)|(c.altKey?2:0)|(c.shiftKey?4:0)|(c.metaKey?8:0);0===c&&!hi.canonicalizeFunctionKey(h)&&h&&hi.letterRe.test(h)&&(c=-1);return c};hi.isModifier=function(c){if(hi.isNumber(c))return!1;c=c.replace(/-$/,"").toLowerCase();return hi.arr.withoutAll(Object.keys(hi.KEY_MODS),["","input-"]).includes(c)};hi.canonicalizeFunctionKey=function(c){c=c.toLowerCase();switch(c){case "space":c="space";break;case "esc":c="escape";break;case "return":c="enter";break;case "arrowleft":c="left";break;
case "arrowright":c="right";break;case "arrowup":c="up";break;case "arrowdown":c="down";break;case "esc":c="escape";break;case "return":c="enter"}return hi.FUNCTION_KEYS.includes(c)?hi.string.capitalize(c):""};hi.decodeKeyIdentifier=function(c,h){var n=/u\+?([\d\w]{4})/gi,b=function(d,k){return String.fromCharCode(parseInt(k,16))};c=c&&c.replace(n,b);if("Command"===c||"Cmd"===c)c="Meta";" "===c&&(c="Space");8===h&&(c="Backspace");return c};hi.identifyKeyFromCode=function(c){c=c.code;if("string"!==
typeof c)return null;if(c.startsWith("Key"))return c.slice(3);if(c.startsWith("Numpad"))return c;if(c.startsWith("Digit")||c.startsWith("Arrow"))return c.slice(5);if(c.match(/^F[0-9]{1-2}$/))return c;switch(c){case "Insert":case "Home":case "PageUp":case "PageDown":return c;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";
case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};hi.dedasherize=function(c){for(var h=[];;){var n=c.indexOf("-");if(-1===n)return c&&h.push(c),h;0===n?(h.push(c[0]),c=c.slice(2)):(h.push(c.slice(0,n)),c=c.slice(n+1))}};hi.bowser=vs;hi.arr=Lf;hi.string=Ih;hi.letterRe=/[a-z]/i;hi.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};hi.KEY_MODS=function(){for(var c={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},h=["alt","ctrl",
"meta","shift"],n=Math.pow(2,h.length);n--;)c[n]=h.filter(function(b){return n&c[b]}).join("-")+"-";c[0]="";c[-1]="input-";return c}();hi.isNumber=function(){var c=/^[0-9]+$/;return function(h){return c.test(h)}}();hi.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");hi.Keys=
{computeHashIdOfEvent:hi.computeHashIdOfEvent,keyComboToEventSpec:function(c,h){h=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},h);var n=hi.dedasherize(c),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return h.keyCombo=c,h.key=n[1],h;for(var d=n.length-1;0<=d;d--){var k=b[n[d].toLowerCase()];
k&&(n.splice(d,1),h.isModified=!0,h[k]=!0)}if(!n.length)return h.keyCombo=hi.Keys.eventToKeyCombo(h),h.key=hi.arr.last(hi.dedasherize(h.keyCombo)),h.onlyModifiers=!0,h;1<n.length&&console.warn('Strange key "'+c+'" encountered in keyComboToEventSpec, parsing probably failed');c=hi.arr.last(n);(n=hi.canonicalizeFunctionKey(c))?(h.isFunctionKey=!0,h.key=n):h.key=h.isModified?hi.string.capitalize(c):c;h.keyCombo=hi.Keys.eventToKeyCombo(h);return h},eventToKeyCombo:function(c,h){Object.assign({ignoreModifiersIfNoCombo:!1,
ignoreKeys:[]},h);h=c.key;var n=c.data,b=c.keyIdentifier;if("string"===typeof n)return"input-"+n;if(!h&&b&&(h=hi.decodeKeyIdentifier(b,c.which||c.keyCode),c.key=h=h[c.shiftKey?"toUpperCase":"toLowerCase"](),hi.isModifier(h)))return hi.string.capitalize(h);n=hi.KEY_MODS[hi.computeHashIdOfEvent(c)];if("input-"===n)return n+h;c.code&&(h=hi.identifyKeyFromCode(c)||h);c=!h||hi.isModifier(h)?n.replace(/-$/,""):n+h;c.match(/\s$/)&&(c=c.replace(/\s$/,"Space"));return c.replace(/(^|-)([a-z])/g,function(d,
k,a){return k+a.toUpperCase()})},canonicalizeKeyCombo:function(c){return hi.Keys.eventToKeyCombo(hi.Keys.keyComboToEventSpec(c))},canonicalizeEvent:function(c){return c._isLivelyKeyEventSpec?c:hi.Keys.keyComboToEventSpec(hi.Keys.eventToKeyCombo(c))}};var KW=hi.Keys;hi.default=KW;var ii=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");ii.bowser=vs;ii.obj=dg;ii.pt=di;ii.Keys=KW;ii.cumulativeOffset=D;var LW="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");
ii.pointerEvents=LW;ii.pointerEvents=LW;ii.pointerEvents=LW;var MW="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");ii.mouseEvents=MW;ii.mouseEvents=MW;ii.mouseEvents=MW;var NW=["keydown","keyup","keypress"];ii.keyboardEvents=NW;ii.keyboardEvents=NW;ii.keyboardEvents=NW;var lO=ii.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");ii.keyLikeEvents=lO;ii.keyLikeEvents=lO;ii.keyLikeEvents=lO;var mO=
function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("Event")&&"function"===typeof h.Event?h.Event:h.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k,a,f,l,r){this.type=b;this.domEvt=d;this.dispatcher=k;this.targetMorphs=a;this.hand=f;this.halo=l;this.layoutHalo=r;this.stopped=!1;this._keyCombo=
void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},
{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return ii.pointerEvents.includes(this.type)||ii.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&ii.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();
this.onStopCallbacks.forEach(function(b){return b()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return ii.pt(0,0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),
ii.pt(0,0);b=ii.cumulativeOffset(b);var d=this.domEvt;b=ii.pt((d.pageX||0)-b.left,(d.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var d=this.state.clickedOnMorph;return d&&(b===d||b.isAncestorOf(d))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?(this.domEvt.buttons||0)&1:!1}},{key:"rightMouseButtonPressed",value:function(){return 3===this.domEvt.which||2===this.domEvt.buttons}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?(this.domEvt.buttons||0)&4:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var d=!1;ii.bowser.mac||(d=d||b.ctrlKey);if(ii.bowser.tablet||ii.bowser.tablet)d=d||!1;return d||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=ii.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:5006})}(void 0);ii.Event=mO;ii.Event=mO;ii.Event=mO;var nO=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("KeyEvent")&&"function"===typeof h.KeyEvent?h.KeyEvent:h.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k,a,f,l,r){console.assert(ii.keyLikeEvents.includes(b),"not a keyboard event: "+b);Zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b,d,k,a,f,l,r);Object.assign(this,ii.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5015,end:5385})}(ii.Event);ii.KeyEvent=nO;ii.KeyEvent=nO;ii.KeyEvent=nO;var oO=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof h.SimulatedDOMEvent?h.SimulatedDOMEvent:h.SimulatedDOMEvent=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(b.position){var d=b.position,k=d.x;d=d.y;b=ii.obj.dissoc(b,["position"]);b.pageX=k;b.pageY=d}!b.hasOwnProperty("pointerId")&&ii.mouseEvents.concat(ii.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5394,end:6299})}(void 0);ii.SimulatedDOMEvent=oO;ii.SimulatedDOMEvent=oO;ii.SimulatedDOMEvent=oO;var of=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");of.dragStartEvent=function(c,h,n,b,d,k,a){var f=(new of.Event("morphicdragstart",c,h,[n],d,k,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=
f.position;b.lastDragPosition=f.position;b.dragDelta=of.pt(0,0);b.absDragDelta=of.pt(0,0)}).onStop(function(){b.draggedMorph=null;h.schedule(of.dragEndEvent(c,h,n,b,d,k,a))});return f};of.dragEvent=function(c,h,n,b,d,k,a){var f=(new of.Event("morphicdrag",c,h,[b.draggedMorph],d,k,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||h.world).getInverseTransform().transformDirection(f.position.subPt(b.lastDragPosition));b.absDragDelta=f.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=
f.position}).onStop(function(){b.draggedMorph=null;h.schedule(of.dragEndEvent(c,h,n,b,d,k,a))});return f};of.dragEndEvent=function(c,h,n,b,d,k,a){var f=b.draggedMorph||n,l=(new of.Event("morphicdragend",c,h,[f],d,k,a)).onDispatch(function(){b.dragDelta=(f.owner||h.world).getInverseTransform().transformDirection(l.position.subPt(b.lastDragPosition));b.absDragDelta=l.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=of.pt(0,0);b.absDragDelta=
of.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return l};of.focusEvents=function(c,h){var n=c.eventState;if(n.focusedMorph===h)return[];c=[];n.focusedMorph&&c.push((new of.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));c.push((new of.Event("focus",null,this,[h],null,null,null)).onDispatch(function(){return n.focusedMorph=h}));return c};of.arr=Lf;of.fun=gn;of.Path=ci;of.promise=Hg;of.pt=di;of.config=Ul;of.TextInput=
Dpa;of.KillRing=Epa;of.Event=mO;of.KeyEvent=nO;of.SimulatedDOMEvent=oO;of.keyLikeEvents=lO;of.cumulativeOffset=D;of.bowser=vs;of.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},
{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];of.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);of.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},
{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];of.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",
input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};of.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");
of.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var e$=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=h.hasOwnProperty("EventDispatcher")&&"function"===typeof h.EventDispatcher?h.EventDispatcher:h.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,
d){this.activations=0;this.emitter=b;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new of.KillRing(of.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=of.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,
absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);of.focusEvents(this,
b).forEach(function(k){return d.dispatchEvent(k)})}},{key:"isMorphFocused",value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(b.toLowerCase())}},{key:"whenIdle",value:function(){var b=
this;return of.promise.waitFor(function(){return 0===b.activations})}},{key:"install",value:function(b){var d=this;if(this.installed)return this;this.installed=!0;var k=this.emitter,a=System.global;of.domEventsWeListenTo.forEach(function(f){var l=f.type,r=f.capturing;f=f.passive;var v=function(y){return d.dispatchDOMEvent(y)};d.handlerFunctions.push({node:k,type:l,fn:v,capturing:r});k.addEventListener(l,v,{capture:r,passive:f})});a.addEventListener&&of.globalDomEventsWeListenTo.forEach(function(f){var l=
f.type,r=f.capturing,v=f.morphMethod;f=f.passive;var y=function(A){return d.dispatchDOMEvent(A,d.world,v)};d.handlerFunctions.push({node:a,type:l,fn:y,capturing:r});a.addEventListener(l,y,{capture:r,passive:f})});this.keyInputHelper=(new of.TextInput(this)).install(b,this.world);of.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(b){var d=this.handlerFuntions.find(function(k){return k.type==b});d&&d.node.removeEventListener(d.node,d.fn,d.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(b,d){var k=this,a=b.type,f=this.eventState,l=[d].concat(d.ownerChain()),r="touch"===b.pointerType,v=b.pointerId,y="number"===typeof v?this.world.handForPointerId(v,b.isPrimary):this.world.firstHand,A="number"!==
typeof v||r?null:this.world.haloForPointerId(v),E="number"!==typeof v||r?null:this.world.layoutHaloForPointerId(v),F=new (of.keyLikeEvents.includes(a)?of.KeyEvent:of.Event)(a,b,this,l,y,A,E),H=[F],J=[];switch(a){case "keydown":f.pressedKeys[F.key]=!0;break;case "keyup":"Meta"===F.key?f.pressedKeys={}:delete f.pressedKeys[F.key];break;case "click":H=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),d).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),d).events;H=H.concat(a);
break;case "pointerdown":F.onDispatch(function(){k.focusMorph(d);f.clickedOnMorph=d;f.clickedOnPosition=F.position;f.downTimeStamp=b.timeStamp;var O=!1,L=0;if(f.prevClick){L=f.prevClick;O=L.clickedOnMorph;var Y=L.clickedAtTime;L=L.clickCount;Y=Date.now()-Y;O=O===d&&Y<of.config.repeatClickInterval}f.clickCount=O?L+1:1});break;case "pointerup":F.onAfterDispatch(function(){var O=f.clickedOnMorph,L=f.clickedOnPosition,Y=f.clickCount,S=Date.now();f.prevClick={clickedOnMorph:O,clickedOnPosition:L,clickedAtTime:S,
clickCount:Y};f.clickedOnMorph=null;f.clickCount=0;O=b.timeStamp-f.downTimeStamp;L=f.clickedOnPosition.dist(F.position);Y=of.config.longClick;S=Y.minDur;var ea=Y.maxDur;L<Y.maxDist&&O>=S&&O<=ea&&(O=new of.Event("longclick",b,k,l,y,A,E),k.schedule(O))});f.draggedMorph&&(H.push(of.dragEndEvent(b,this,d,f,y,A,E)),F.targetMorphs=[this.world]);y.carriesMorphs()&&(f.dropHoverTarget?(H.push(new of.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],y,A,E)),d=f.dropHoverTarget,f.dropHoverTarget=null):
d=y.findDropTarget(F.position,y.grabbedMorphs),y.isAncestorOf(d)&&(d=this.world),H.push(new of.Event("morphicdrop",b,this,[d],y,A,E)),F.targetMorphs=[this.world]);break;case "pointermove":y.carriesMorphs()?(F.targetMorphs=[this.world],a=y.findDropTarget(F.position,y.grabbedMorphs)||this.world,f.dropHoverTarget===a?H.push(new of.Event("morphicdrophoverupdate",b,this,[a],y,A,E)):(f.dropHoverTarget&&H.push(new of.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],y,A,E)),f.dropHoverTarget=a,H.push(new of.Event("morphicdrophoverin",
b,this,[a],y,A,E)))):f.draggedMorph?(F.targetMorphs=[this.world],H.push(of.dragEvent(b,this,d,f,y,A,E))):f.clickedOnMorph&&f.clickedOnPosition&&f.clickedOnMorph.draggable&&!f.draggedMorph&&!y.carriesMorphs()&&(a=f.clickedOnPosition.dist(F.position),r=f.clickedOnMorph,a>r.dragTriggerDistance&&(r.grabbable?H.push(new of.Event("grab",b,this,[r],y,A,E)):r.draggable&&H.push(of.dragStartEvent(b,this,r,f,y,A,E)),F.targetMorphs=[this.world]));break;case "pointerover":f.hover.unresolvedPointerOut&&(f.hover.unresolvedPointerOut=
!1);a=[d].concat(d.ownerChain()).reverse();H=of.arr.withoutAll(f.hover.hoveredOverMorphs,a).map(function(O){return(new of.Event("hoverout",b,k,[O],y,A,E)).onDispatch(function(){return of.arr.remove(f.hover.hoveredOverMorphs,O)})});a=of.arr.withoutAll(a,f.hover.hoveredOverMorphs).map(function(O){return(new of.Event("hoverin",b,k,[O],y,A,E)).onDispatch(function(){return of.arr.pushIfNotIncluded(f.hover.hoveredOverMorphs,O)})});H=H.concat(a);break;case "pointerout":H=[];f.hover.unresolvedPointerOut=
!0;J.push(function(){if(f.hover.unresolvedPointerOut)return Promise.all(f.hover.hoveredOverMorphs.map(function(O){return k.schedule((new of.Event("hoverout",b,k,[O],y,A,E)).onAfterDispatch(function(){return of.arr.remove(f.hover.hoveredOverMorphs,O)}))}))});r&&this.world.removeHandForPointerId(v);break;case "blur":H=[(new of.Event(a,b,this,[d],y,A,E)).onDispatch(function(){return f.focusedMorph=null})];break;case "focus":H=of.focusEvents(this,d);break;case "scroll":H=[(new of.Event(a,b,this,[d],y,
A,E)).onDispatch(function(){if(!f.scroll.interactiveScrollInProgress){var O=of.promise.deferred(),L=O.promise,Y=O.resolve;O="Firefox"==of.bowser.name?500:250;"Safari"==of.bowser.name&&(O=1E3);f.scroll.interactiveScrollInProgress=L;L.debounce=of.fun.debounce(O,function(){f.scroll.interactiveScrollInProgress=null;Y()})}f.scroll.interactiveScrollInProgress.debounce();L=b.target.documentElement||b.target;O=L.scrollLeft;var S=L.scrollTop,ea=d.scroll,qa=ea.x;ea=ea.y;if("hidden"!=L.style.overflow&&qa!==
O||ea!==S)d.scroll=of.pt(O,S)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?F.targetMorphs=[d]:H=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==a&&"dragover"!==a||b.preventDefault()}return{events:H,later:J}}},{key:"schedule",value:function(b){var d=this;this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(b)}).then(function(){return d.activations--},
function(k){d.activations--;throw k;})}},{key:"dispatchEvent",value:function(b,d){d=d||of.typeToMethodMap[b.type];if(!d)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(f){return f()});this.activations++;for(var k,a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][d](b)}catch(f){k=Error("Error in event handler "+b.targetMorphs[a]+"."+d+": "+(f.stack||f)),k.originalError=f,"undefined"!==typeof this.world?this.world.logError(k):console.error(k)}if(k||
b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(f){return f()});if(k)throw k;}},{key:"dispatchDOMEvent",value:function(b,d,k){var a=this,f=this.world,l=this.eventState,r=this.nodeMorphMap,v=b.type;l.timeOfLastActivity=this.timestampBase+b.timeStamp;if(!d&&of.focusTargetingEvents.includes(v))d=l.focusedMorph||f;else if(!d){for(l=b.target;;){d=l.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(l=l.parentNode))return}d=
r.get(l);if(!d){var y=l.id;(d=f.withAllSubmorphsDetect(function(A){return A.id===y}))&&r.set(l,d)}}d&&(b=this.processDOMEvent(b,d),r=b.events,b.later.map(function(A){a.activations++;return of.promise.delay(0).then(A).then(function(){return a.activations--},function(E){a.activations--;throw E;})}),r.forEach(function(A){return a.dispatchEvent(A,k)}),f&&f.needsRerender()&&of.eventsCausingImmediateRender.has(v)&&f.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var d=[],k=
0;k<arguments.length;++k)d[k-0]=arguments[k];k=this.emitter.document||this.emitter.ownerDocument;var a=[];d=$jscomp.makeIterator(d);for(var f=d.next();!f.done;f=d.next()){var l=f=f.value,r=l.target,v=l.position;l=l.type;if(of.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+l+", no keyInputHelper installed!");f=Object.assign({},f,{target:this.keyInputHelper.textareaNode})}r||(r=v?this.world.morphsContainingPoint(v)[0]:this.world);
r.isMorph&&(f=Object.assign({},f,{target:k.getElementById(r.id)}));f.position&&(r=of.cumulativeOffset(k.getElementById(this.world.id)),f.position=f.position.addXY(r.left,r.top));"scroll"===l&&("scrollLeft"in f||"scrollTop"in f)&&(f.target.scrollLeft=f.scrollLeft||0,f.target.scrollTop=f.scrollTop||0);f=new of.SimulatedDOMEvent(f);a.push(f);this.dispatchDOMEvent(f)}return a}},{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},
{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,d){var k=this,a=[],f=this.eventState;f.clickedOnMorph=null;f.dropHoverTarget&&(a.push(new of.Event("morphicdrophoverout",d.domEvt,this,[f.dropHoverTarget],b,null,null)),f.dropHoverTarget=null);a.forEach(function(l){return k.dispatchEvent(l)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],h,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7065,end:29760})}(void 0),Fpa=e$=of.EventDispatcher;of.default=e$;var Vl=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");Vl.defaultDOMEnv=N;Vl.Renderer=jO;Vl.FontMetric=Cpa;Vl.ChangeManager=kO;Vl.UndoManager=iI;Vl.EventDispatcher=Fpa;Vl.subscribe=gt;Vl.unsubscribe=kp;var ps=Ca("aY",function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),
n=h.hasOwnProperty("MorphicEnv")&&"function"===typeof h.MorphicEnv?h.MorphicEnv:h.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var d=this;b=void 0===b?Vl.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=
new Vl.ChangeManager;this.undoManager=new Vl.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(k){d._waitForDOMEnv=null;d.initWithDOMEnv(k);d.initialized=!0}).catch(function(k){return console.error("Error initializing MorphicEnv with dom env: "+k.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===
this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=Vl.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(b){var d=this;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return d.setWorld(b)}):this.setWorldRenderedOn(b,this.domEnv.document.body)}},{key:"setWorldRenderedOn",
value:function(b,d,k){var a=this;k=void 0===k?null:k;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,d,k)});this.deleteHistory();this.uninstallWorldRelated();this.world=b;this.renderer=new Vl.Renderer(b,d,this.domEnv);this.renderer.domNode=k;this.eventDispatcher=(new Vl.EventDispatcher(this.domEnv.window,b)).install(d);b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=
b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[Vl.subscribe("lively.modules/moduleloaded",function(k){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(k)})})];d["lively.modules/modulechanged"]=[Vl.subscribe("lively.modules/modulechanged",function(k){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(k)})})];
d["lively.partsbin/partpublished"]=[Vl.subscribe("lively.partsbin/partpublished",function(k){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(k)})})];d["lively.user/userchanged"]=[Vl.subscribe("lively.user/userchanged",function(k){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(k)})})]}}},{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(d){return b[d].forEach(function(k){return Vl.unsubscribe(d,
k)})}))}},{key:"getTargetsFor",value:function(b){var d=this.world,k=[];if(!d||!d.submorphs)return k;"function"===typeof d[b]&&k.push(d);d=$jscomp.makeIterator(d.submorphs);for(var a=d.next();!a.done;a=d.next())a=a.value,"function"===typeof a[b]&&k.push(a),a.isWindow&&a.targetMorph&&"function"===typeof a.targetMorph[b]&&k.push(a.targetMorph);return k}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(d){return d.world()})})}},
{key:"deleteHistory",value:function(){var b=this.changeManager,d=this.world,k=this.fontMetric;b&&(b.changes.length=0);d&&d.withAllSubmorphsDo(function(a){return a.undoManager&&a.undoManager.reset()});k&&k.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,d=this.world,k=0,a=0;d&&d.withAllSubmorphsDo(function(f){f.undoManager&&(k++,a+=f.undoManager.undos.length+f.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+k+" morphs with undos\n"+a+" undo changes"}},
{key:"updateWhenRenderedRequests",value:function(){for(var b=this,d=this.whenRenderedRequesters,k=0,a=$jscomp.makeIterator(d),f=a.next();!f.done;f=a.next()){var l=$jscomp.makeIterator(f.value);f=l.next().value;var r=l=l.next().value,v=r.maxAttempts,y=r.resolve;r=r.reject;f._dirty||f._rendering?++l.currentAttempt>v?(d.delete(f),r(Error("Failed to wait for whenRendered of "+f+" (tried "+v+"x)"))):k++:(d.delete(f),y(f))}this.whenRenderedTickingProcess=k?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):
null}},{key:"whenRendered",value:function(b,d){var k=this;d=void 0===d?50:d;var a=this.whenRenderedRequesters,f=this.whenRenderedTickingProcess,l=a.get(b);if(!l){var r,v;l=new Promise(function(y,A){r=y;v=A});a.set(b,l={maxAttempts:d,currentAttempt:0,resolve:r,reject:v,promise:l})}f||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return k.updateWhenRenderedRequests()}));return l.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},
{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: "+(d.stack||d))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);return b[b.length-1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],h,{pathInPackage:function(){return"env.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8274})}(void 0));Vl.MorphicEnv=ps;Vl.MorphicEnv=ps;Vl.MorphicEnv=ps;var Gpa=Object.freeze({__proto__:null,MorphicEnv:ps}),Bx=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Bx.printArg=function(c){return Bx.obj.inspect(c,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g,
" ")};Bx.obj=dg;Bx.arr=Lf;Bx.promise=Hg;var f$=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=h.hasOwnProperty("CommandHandler")&&"function"===typeof h.CommandHandler?h.CommandHandler:h.CommandHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",
value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},{key:"printCommand",value:function(b){var d=b.target.string,k=b.args,a=b.count,f=b.evt,l=b.keyCombo;return'"'+b.name+'" '+(f?f+" ":"")+(l?l+" ":"")+(k?Bx.printArg(k):"")+("number"===typeof a?" x"+a:"")+" "+d}},{key:"lookupCommand",value:function(b,d){var k;if(!b)return{};
"string"===typeof b&&(k=b);"string"===typeof b.command&&(k=b.command);if(b.exec){var a=b;k=a.name}a||(a=d.commands.find(function(f){return f.name===k}));return{name:k,command:a}}},{key:"exec",value:function(b,d,k,a,f){var l=this,r=this.lookupCommand(b,d)||{},v=r.name,y=r.command;if(!y)return console.warn("Cannot find command "+(v||b)),null;if(v){if(f){var A=f.type;if(f.isKeyEvent)var E=f.keyCombo}this.addToHistory({name:v,target:{string:String(d),id:d.id},args:k,count:a,time:Date.now(),evt:A,keyCombo:E})}var F=
d.world();"string"===typeof y.progressIndicator&&(this.progressIndicator=F.execCommand("open loading indicator",y.progressIndicator));if("function"===typeof y.exec)try{var H=y.exec(d,k,y.handlesCount?a:void 0,f)}catch(J){H=J,b="Error in interactive command "+v+": "+(J.stack||J),F?F.logError(b):console.error(b)}else console.error("command "+v+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();H&&"function"===typeof H.catch?(H.catch(function(J){var O="Error in interactive command "+
v+": "+J+"\n"+(J.stack||J);F?F.logError(O):console.error(O);throw J;}),this.progressIndicator&&Bx.promise.finally(H,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();H&&"number"===typeof a&&1<a&&!y.handlesCount&&(H="function"===typeof H.then?H.then(function(){return l.exec(y,d,k,a-1,f,null)}):this.exec(y,d,k,a-1,f,null));return H}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],h,{pathInPackage:function(){return"CommandHandler.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:194,end:3656})}(void 0),Hpa=f$=Bx.CommandHandler;Bx.default=f$;var Bg=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Bg.ensureSpaces=function(c){return c.length?c:" "};Bg.invokeKeyHandlers=function(c,h,n){n=void 0===n?!1:n;var b=h=Bg.Keys.canonicalizeEvent(h),
d=b.key,k=b.data,a,f=!1,l=c.keyhandlers,r=h.keyInputState||{};b=b.keyCombo.startsWith("input-");var v=!1,y=r.count,A=r.keyChain||"",E=!1;if(!l||n&&b)return!1;for(n=l.length;n--;)if((a=l[n].eventCommandLookup(c,h))&&a.command){E=a;a=E.command;var F=E.args,H=E.passEvent,J=E.count;v=E.keyChain;var O=E.onlyWhenFocused;E=!0;y=J;A=v;v="null"===a;if(O&&(O=c.world())&&O.focusedMorph&&O.focusedMorph!==c)continue;f=v?!1:c.execCommand(a,F,J,h);!f||b&&"insertstring"===a||H||"function"!==typeof h.stop||h.stop();
if(f||v)break}f||v||!b||!c.onTextInput||A||(f=c.execCommand("insertstring",{string:k||d,undoGroup:Bg.config.text.undoGroupDelay},r.count,h));if(E)if("function"===typeof h.onAfterDispatch)h.onAfterDispatch(function(){r.count=f?void 0:y;r.keyChain=f?"":A});else r.count=f?void 0:y,r.keyChain=f?"":A;return f&&!v};Bg.simulateKeys=function(c,h,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(b=1===h.length?[h]:
h.split(/ /g).map(Bg.ensureSpaces),d=$jscomp.makeIterator(b),k=d.next());if(3!=f.nextAddress){if(k.done)return f.jumpTo(0);a=k.value;return f.yield(Bg.simulateKey(c,a,n),3)}k=d.next();return f.jumpTo(2)})};Bg.simulateKey=function(c,h,n){return Bg.invokeKeyHandlers(c,Object.assign({},Bg.Keys.keyComboToEventSpec(h),{keyInputState:n}))};Bg.bowserOS=function(){return Bg.bowser.mac?"mac":Bg.bowser.windows?"windows":Bg.bowser.windowsphone?"windowsphone":Bg.bowser.linux?"linux":Bg.bowser.chromeos?"chromeos":
Bg.bowser.android?"android":Bg.bowser.ios?"ios":Bg.bowser.blackberry?"blackberry":Bg.bowser.firefoxos?"firefoxos":Bg.bowser.webos?"webos":Bg.bowser.bada?"bada":Bg.bowser.tizen?"tizen":Bg.bowser.sailfish?"sailfish":"unknown"};Bg.findKeysForPlatform=zf;Bg.Keys=KW;Bg.bowser=vs;Bg.config=Ul;Bg.arr=Lf;Bg.findKeysForPlatform=zf;Bg.findKeysForPlatform=zf;Bg.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,
left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var OW=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=h.hasOwnProperty("KeyHandler")&&"function"===typeof h.KeyHandler?h.KeyHandler:h.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=
b=void 0===b?Bg.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(b,d){var k=this;d=void 0===d?{keyChain:void 0,count:void 0}:d;b=Bg.Keys.canonicalizeKeyCombo(b);var a=d.keyChain||"";d=d.count;if(!a&&b.startsWith("Ctrl-")){var f=b.match(/^Ctrl-([0-9]+)/);if(f)return{command:"null",count:parseInt(("number"===typeof d?d:"")+f[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}f=
[b];if(!r&&b.startsWith("input-")){r=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toUpperCase()});var l=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toLowerCase()});f.push(r,l)}var r=f.map(function(v){return k.keyBindings[v]})[0];a&&(f=f.find(function(v){return k.keyBindings[a+" "+v]}))&&(a+=" "+f,r=this.keyBindings[a]||r);if(r&&"chainKeys"===r)return a=a||b,b={command:"null",keyChain:a},void 0!==d&&(b.count=d),b;if(r)return b="object"===typeof r?Object.assign({},r):{command:r},
void 0!==d&&(b.count=d),b}},{key:"bindKey",value:function(b,d){var k=this;"object"===typeof b&&b&&!Array.isArray(b)&&(b=Bg.findKeysForPlatform(b,this.platform));if(b){if("function"===typeof d)return this.addCommand({exec:d,bindKey:b,name:d.name||b});(Array.isArray(b)?b:b.includes("|")?b.split("|"):[b]).forEach(function(a){var f="";if(-1!=a.indexOf(" ")){var l=a.split(/\s+/);a=l.pop();l.forEach(function(r){r=Bg.Keys.canonicalizeKeyCombo(r);f+=(f?" ":"")+r;k.addCommandToBinding(f,"chainKeys")});f+=
" "}k.addCommandToBinding(f+Bg.Keys.canonicalizeKeyCombo(a),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,d=Object.keys(this.keyBindings),k=d.filter(function(a){return"chainKeys"===b.keyBindings[a]});k=Bg.arr.sortBy(k,function(a){return a.length}).reverse();k.forEach(function(a){d.some(function(f){return a!==f&&f.startsWith(a)})||(delete b.keyBindings[a],Bg.arr.remove(d,a),Bg.arr.remove(k,a))})}},
{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,d){var k=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete k.keyBindings[a]});d?this.keyBindings[b]=d:delete this.keyBindings[b];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",
value:function(b,d,k){return Bg.invokeKeyHandlers(b,d,void 0===k?!1:k)}},{key:"simulateKeys",value:function(b,d,k){return Bg.simulateKeys(b,d,k)}},{key:"withBindings",value:function(b,d){var k=new this(d);b.forEach(function(a){return k.bindKey(a.keys,a.command)});return k}},{key:"prettyCombo",value:function(b){var d=this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[b]?d[b]:d[b]=b.replace(Bg.regexps.meta,"\u2318").replace(Bg.regexps.alt,"\u2325").replace(Bg.regexps.ctrl,"\u2303").replace(Bg.regexps.tab,
"\u21e5").replace(Bg.regexps.enter,"\u23ce").replace(Bg.regexps.shift,"\u21e7").replace(Bg.regexps.backspace,"\u232b").replace(Bg.regexps.delete,"\u2326").replace(Bg.regexps.left,"\u2192").replace(Bg.regexps.right,"\u2190").replace(Bg.regexps.up,"\u2191").replace(Bg.regexps.down,"\u2193").replace(Bg.regexps.keySpacer,"$1").replace(Bg.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,d,k){function a(v){if(r[v.id])return r[v.id];var y=l[v.id]||(l[v.id]=v.keyCommandMap);
return r[v.id]=Bg.arr.groupBy(Object.keys(y),function(A){return y[A].name})}var f=this;k=void 0===k?!0:k;var l={},r={};return((void 0===d?0:d)?b.commandsIncludingOwners:b.commands.map(function(v){return{command:v,target:b}})).map(function(v){var y=v.target;v=v.command;var A=a(y)[v.name];return{keys:A,target:y,command:v,prettyKeys:A&&k?A.map(function(E){return f.prettyCombo(E)}):null}})}}],h,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:12969})}(void 0);OW=Bg.KeyHandler;var PW=Ca("ae",OW);Bg.default=OW;var Kz=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),g$=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("Script")&&"function"===typeof h.Script?h.Script:h.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,d,k){b.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+
this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=
!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Script"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:21,end:1376})}(void 0),QW=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("TargetScript")&&"function"===typeof h.TargetScript?h.TargetScript:h.TargetScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,k){Zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),
this).call(this);this.target=b;this.selector=d;this.args=k||[]}},{key:"execute",value:function(){this.target.isMorph&&!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"TargetScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(Kz.Script),h$=function(c){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("FunctionScript")&&"function"===typeof h.FunctionScript?h.FunctionScript:
h.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(n,c,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+
(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(Kz.Script);Kz.Script=g$;Kz.Script=g$;Kz.TargetScript=QW;Kz.TargetScript=
QW;Kz.FunctionScript=h$;Kz.FunctionScript=h$;var Zp=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");Zp.install=gf;Zp.remove=If;Zp.isInstalled=Pg;Zp.arr=Lf;Zp.fun=gn;Zp.install=gf;Zp.install=gf;Zp.remove=If;Zp.remove=If;Zp.isInstalled=Pg;Zp.isInstalled=Pg;var pO=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");pO.classHolder={};var Cx=pO.classHolder;pO.classHolder=Cx;pO.classHolder=Cx;var $w=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");
$w.computeRequireMap=Gj;$w.graph=tx;$w.arr=Lf;$w.obj=dg;$w.loadedModules=DK;$w.computeRequireMap=Gj;$w.computeRequireMap=Gj;var Fo=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");Fo.scheduleModuleExportsChange=Pj;Fo.runScheduledExportChanges=Ti;Fo.clearPendingModuleExportChanges=function(c,h){delete c.get("@lively-env").pendingExportChanges[h]};Fo.updateModuleExports=function(c,h,n){var b=c.debug;Fo.module(c,h).updateRecord(function(d){var k=[],a=[];Object.keys(n).forEach(function(E){var F=
n[E];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",h,E,String(F).slice(0,30).replace(/\n/g,"")+"...");var H=!(E in d.exports);H&&(d.__lively_modules__.evalOnlyExport[E]=!0);d.exports[E]=F;H?k.push(E):a.push(E)});if(k.length){var f=c.get(h);Object.isFrozen(f)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
h),c.set(h,c.newModule(d.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",h),k.forEach(function(E){Object.defineProperty(f,E,{configurable:!1,enumerable:!0,get:function(){return d.exports[E]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",d.importers.length,h);for(var l=0,r=d.importers.length;l<r;l++){var v=d.importers[l];if(!v.locked){var y;
if(v.dependencies.some(function(E,F){y=F;return E&&E.name===d.name})){if(b){var A=Fo.module(c,v.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+A["package"]().name+"/"+A.pathInPackage())}Fo.module(c,v.name).evaluationStart();v.setters[y](d.exports);Fo.module(c,v.name).evaluationEnd()}}}}})};Fo.module=zn;Fo.scheduleModuleExportsChange=Pj;Fo.scheduleModuleExportsChange=Pj;Fo.runScheduledExportChanges=Ti;Fo.runScheduledExportChanges=Ti;var qk=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
qk.moduleSourceChange=Yg;qk.moduleSourceChangeEsm=function(c,h,n,b){var d,k,a,f,l,r,v,y,A,E,F,H,J,O,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:return d=c.debug,k={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"esm"}},Y.yield(qk.instrumentSourceOfEsmModuleLoad(c,k),2);case 2:a=Y.yieldResult,f=function(S,ea){return qk.scheduleModuleExportsChange(c,k.name,S,ea,!0)},l=a.declare(f),d&&console.log("[lively.vm es6] sourceChange of %s with deps",
k.name,a.localDeps),r=[],v=$jscomp.makeIterator(a.localDeps),y=v.next();case 3:if(y.done){Y.jumpTo(5);break}A=y.value;return Y.yield(c.normalize(A,k.name),6);case 6:return E=Y.yieldResult,F=qk.classHolder.module(c,E),Y.yield(F.load(),7);case 7:H=Y.yieldResult;r.push({name:A,fullname:E,module:F,exports:H});y=v.next();Y.jumpTo(3);break;case 5:if(J=c.loads&&c.loads[k.name])J.deps=r.map(function(S){return S.name}),J.depMap=r.reduce(function(S,ea){S[ea.name]=ea.fullname;return S},{}),J.metadata&&J.metadata.entry&&
(J.metadata.entry.deps=J.deps,J.metadata.entry.normalizedDeps=r.map(function(S){return S.fullname}),J.metadata.entry.declare=a.declare);O=qk.classHolder.module(c,k.name);L=O.record();r.forEach(function(S,ea){return O.addDependencyToModuleRecord(S.module,l.setters[ea])});L&&(L.execute=l.execute);r.forEach(function(S,ea){return l.setters[ea](S.exports)});return Y.return(l.execute())}})};qk.moduleSourceChangeGlobal=function(c,h,n,b){var d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return d={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"global"}},c.get(h)?f.jumpTo(2):f.yield(c["import"](h),2);if(4!=f.nextAddress)return f.yield(qk.instrumentSourceOfGlobalModuleLoad(c,d),4);k=f.yieldResult;d.source=k.translated;a=qk.doInstantiateGlobalModule(c,d);c.delete(h);c.set(a.name,a.esModule);return f.return(a.module)})};qk.doInstantiateGlobalModule=function(c,h){var n=qk.__createEntry();n.name=h.name;n.esmExports=!0;h.metadata.entry=
n;n.deps=[];for(var b in h.metadata.globals){var d=h.metadata.globals[b];d&&n.deps.push(d)}n.execute=function(k,a,f){(a=(a=qk.classHolder.module(c,f.id).metadata())&&a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(v){try{delete c.global[v]}catch(y){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+v+'"]')}});if(h.metadata.globals){var l={};for(var r in h.metadata.globals)h.metadata.globals[r]&&(l[r]=k(h.metadata.globals[r]))}if(k=h.metadata.exports)h.source+=
'\nSystem.global["'+k+'"] = '+k+";";f=c.get("@@global-helpers").prepareGlobal(f.id,k,l);qk.__evaluateGlobalLoadSource(c,h);return f()};return qk.runExecuteOfGlobalModule(c,n)};qk.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};qk.__evaluateGlobalLoadSource=function(c,h){function n(){0==--d&&(k.System=k.SystemJS=b)}var b,d=
0,k=c.global;return function(a){try{0==d++&&(b=k.System),k.System=k.SystemJS=this,(0,eval)(a.source),n()}catch(f){throw n(),Error("Error evaluating "+a.address+":\n"+f.stack);}}.call(c,h)};qk.runExecuteOfGlobalModule=function(c,h){var n={},b=h.module={exports:n,id:h.name};h.evaluated=!0;if(n=h.execute.call(c.global,function(d){var k=h.deps.find(function(a){return a===d});if(k=k&&c.get(h.normalizedDeps[h.deps.indexOf(k)])||c.get(c.decanonicalize(d,h.name)))return k;throw Error("Module "+d+" not declared as a dependency of "+
h.name);},n,b))b.exports=n;n=b.exports;b=c.get("@system-env").constructor;h.esModule=n&&(n.__esModule||n instanceof b)?n:h.esmExports&&n!==c.global?c.newModule(n):{"default":n};return h};qk.arr=Lf;qk.emit=Kk;qk.instrumentSourceOfEsmModuleLoad=tK;qk.instrumentSourceOfGlobalModuleLoad=uK;qk.scheduleModuleExportsChange=Pj;qk.classHolder=Cx;qk.moduleSourceChange=Yg;qk.moduleSourceChange=Yg;var xn=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");xn.isJsFile=Yk;xn.asDir=rk;xn.isURL=
Xm;xn.urlResolve=nt;xn.string=Ih;xn.isJsFile=Yk;xn.isJsFile=Yk;xn.asDir=rk;xn.asDir=rk;var jI=xn.string.joinPath;xn.join=jI;xn.join=jI;xn.join=jI;xn.isURL=Xm;xn.isURL=Xm;xn.urlResolve=nt;xn.urlResolve=nt;var Bs=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");Bs.arr=Lf;Bs.obj=dg;Bs.isURL=Xm;Bs.installHook=gf;Bs.isHookInstalled=Pg;var Pv=function(c){this.pkg=c};Pv.prototype.applyConfig=function(c){var h=this.System,n=this.packageURL,b=this.pkg;c=Bs.obj.deepMerge(b.config,
c);var d=c.name||n.split("/").slice(-1)[0],k=c.version,a=c.systemjs||{},f=c.lively,l=c.main||"index.js",r={},v={};h.config({map:(r[d]=n,r),packages:(v[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),v)});h.packages[n].configured=!0;h=h.getConfig().packages[n]||{};h.map||(h.map={});a&&(f&&f.main?l=f.main:a.main&&(l=a.main),this.applySystemJSConfig(a));l.match(/\.[^\/\.]+/)||(l+=".js");h.main=l;b.version=k;b.config=c;b._name=d;b.mergeWithConfig(h);
return f?this.applyLivelyConfig(f):{subPackages:[]}};Pv.prototype.applySystemJSConfig=function(c){var h=this.System;c.packageConfigPaths&&h.config({packageConfigPaths:Bs.arr.uniq(h.packageConfigPaths.concat(c.packageConfigPaths))});c.packages&&h.config({packages:c.packages});c.globalmap&&h.config({map:c.globalmap});c.babelOptions&&h.config({babelOptions:c.babelOptions});c.meta&&h.config({meta:c.meta})};Pv.prototype.applyLivelyConfig=function(c){this.applyLivelyConfigMeta(c);this.applyLivelyConfigHooks(c);
this.applyLivelyConfigBundles(c)};Pv.prototype.applyLivelyConfigHooks=function(c){var h=this;(c.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&Bs.isHookInstalled(h.System,n.target,b.name)||Bs.installHook(h.System,n.target,b)}catch(d){console.error("Error installing hook for %s: %s",h.packageURL,d,n)}})};Pv.prototype.applyLivelyConfigBundles=function(c){var h=this;if(!c.bundles)return Promise.resolve();var n=Object.keys(c.bundles).reduce(function(b,d){var k=h.packageURL+"/"+
d;d=c.bundles[d].map(function(a){return h.System.decanonicalize(a,h.packageURL+"/")});b[k]=d;return b},{});this.System.config({bundles:n});return Promise.resolve()};Pv.prototype.applyLivelyConfigMeta=function(c){if(c.meta){var h={},n=this.System.getConfig().packages[this.packageURL]||{},b={meta:{},packages:(h[this.packageURL]=n,h)};Object.keys(c.meta).forEach(function(d){var k=c.meta[d];Bs.isURL(d)?b.meta[d]=k:(n.meta||(n.meta={}),n.meta[d]=k)});this.System.config(b)}};$jscomp.global.Object.defineProperties(Pv.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});Bs.PackageConfiguration=Pv;Bs.default=Pv;var bf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");bf.normalizePackageURL=function(c,h,n){n=void 0===n?[]:n;if(n.some(function(b){return b===h}))return h;c=c.decanonicalize(h.replace(/[\/]+$/,"")+"/");if(!bf.isURL(c))throw Error("Strange package URL: "+c+" is not a valid URL");
c.match(/\.js/)&&(c=-1<c.indexOf(c+".js")?c.replace(/\.js$/,""):c.split("/").slice(0,-1).join("/"));c.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+c);return String(c).replace(/\/$/,"")};bf.lookupPackage=ot;bf.ensurePackage=pt;bf.getPackage=Wr;bf.applyConfig=Xr;bf.importPackage=Gh;bf.removePackage=dk;bf.reloadPackage=Hj;bf.registerPackage=yn;bf.getPackageSpecs=VA;bf.arr=Lf;bf.promise=Hg;bf.obj=dg;bf.emit=Kk;bf.module=zn;bf.resource=Xb;bf.PackageConfiguration=
Pv;bf.isURL=Xm;bf.join=jI;bf.classHolder=Cx;var sj=function(c,h,n,b,d){d=void 0===d?{}:d;this.System=c;this.url=h;this.registerProcess=null;this.map={};this.setConfig(d)};sj.allPackages=function(c){return bf.obj.values(bf.classHolder.PackageRegistry.ofSystem(c).byURL)};sj.allPackageURLs=function(c){return bf.classHolder.PackageRegistry.ofSystem(c).allPackageURLs()};sj.forModule=function(c,h){return this.forModuleId(c,h.id)};sj.forModuleId=function(c,h){return(h=bf.classHolder.ModulePackageMapping.forSystem(c).getPackageURLForModuleId(h))?
bf.getPackage(c,h,!0):null};sj.fromJSON=function(c,h){return(new bf.Package(c)).fromJSON(h)};sj.prototype.setConfig=function(c){this._name=c.name;this.version=c.version;this.dependencies=c.dependencies||{};this.devDependencies=c.devDependencies||{};this.main=c.main||"index.js";this.systemjs=c.systemjs;this.lively=c.lively};sj.prototype.toJSON=function(){var c=this.System,h=bf.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));h.url.startsWith(c.baseURL)&&
(h.url=h.url.slice(c.baseURL.length).replace(/^\//,""));return h};sj.prototype.fromJSON=function(c){var h=this.System;this.url=c.url;this._name=c._name;this.version=c.version;this.map=c.map||{};this.main=c.main;this.dependencies=c.dependencies||{};this.devDependencies=c.devDependencies||{};this.systemjs=c.systemjs;this.lively=c.lively;bf.isURL(this.url)||(this.url=bf.join(h.baseURL,this.url));this.registerWithConfig();return this};sj.prototype.asSpec=function(){return Object.assign({},bf.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(c){return{name:c.id,deps:c.directRequirements().map(function(h){return h.id})}})})};sj.prototype.path=function(){var c=this.System.baseURL;return 0===this.url.indexOf(c)?this.url.slice(c.length):this.url};sj.prototype.modules=function(){var c=this.url,h=this.System;return bf.classHolder.ModulePackageMapping.forSystem(h).getModuleIdsForPackageURL(c).map(function(n){return bf.module(h,n)})};sj.prototype.resources=
function(c,h){h=void 0===h?[".git","node_modules",".module_cache","lively.next-node_modules"]:h;var n=this,b,d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return b=n,d=b.System,k=b.url,a=bf.Package.allPackageURLs(d),f=a.filter(function(A){return A!==k&&!k.startsWith(A)}),y.yield(bf.resource(k).dirList("infinity",{exclude:h}),2);l=y.yieldResult;r=l.filter(function(A){return!A.isDirectory()&&!f.some(function(E){return A.url.startsWith(E)})}).map(function(A){return A.url});
v=bf.arr.pluck(n.modules(),"id");c&&(r=r.filter(c));return y.return(r.map(function(A){var E=A.replace(k,"").replace(/^\//,"");return{isLoaded:v.includes(A),url:A,nameInPackage:E,package:n}}))})};sj.prototype.hasResource=function(c){var h=this.url;return(c.startsWith(h)?bf.resource(c):bf.resource(h).join(c)).exists()};sj.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};sj.prototype.mergeWithConfig=function(c){var h=c=Object.assign({},c),n=h.name;h=h.map;n&&(delete c.name,
this._name=n);h&&(delete c.map,Object.assign(this.map,h));Object.assign(this,c);return this};sj.prototype.addMapping=function(c,h){this.map[c]=h;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[c]=h,n)},b)})};sj.prototype.tryToLoadPackageConfig=function(){var c=this,h,n,b,d,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:h=c;n=h.System;b=h.url;d=b+"/package.json";k={};a={};n.config({meta:(k[d]={format:"json"},k),packages:(a[b]=
{meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",d);A.setCatchFinallyBlocks(2);if(f=n.get(d)){A.jumpTo(4);break}return A.yield(n.import(d),5);case 5:f=A.yieldResult;case 4:return l=f,r=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),bf.arr.pushIfNotIncluded(r,d),n.config({packageConfigPaths:r}),A.return(l);case 2:return v=A.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
d,v),delete n.meta[d],y=b.split("/").slice(-1)[0],A.return({name:y})}})};sj.prototype.import=function(){var c=this,h,n,b,d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(c.register(),2);case 2:return h=c,n=h.url,b=h.System,d=bf,k=d.module,a=b,r.yield(b.normalize(n),3);case 3:return f=k.call(d,a,r.yieldResult),r.yield(b.import(f.id),4);case 4:return l=r.yieldResult,r.yield(bf.promise.waitFor(1E3,function(){return f.isLoaded()}),5);
case 5:return r.return(l)}})};sj.prototype.isRegistering=function(){return!!this.registerProcess};sj.prototype.register=function(c){var h=this,n,b,d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(h.isRegistering())return r.return(h.registerProcess.promise);n=h;b=n.System;d=n.url;h.registerProcess=bf.promise.deferred();k=h.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",d);r.setCatchFinallyBlocks(2,3);if(a=
c){r.jumpTo(5);break}return r.yield(h.tryToLoadPackageConfig(),6);case 6:a=r.yieldResult;case 5:f=a,h.registerWithConfig(f),h.registerProcess.resolve(f);case 3:r.enterFinallyBlock();delete h.registerProcess;r.leaveFinallyBlock(4);break;case 2:throw l=r.enterCatchBlock(),h.registerProcess.reject(l),l;case 4:return r.return(k)}})};sj.prototype.updateConfig=function(c){c=Object.assign({},this.runtimeConfig,{},c);var h=this.name,n=this.version,b=c,d=b.name;b=b.version;(new bf.PackageConfiguration(this)).applyConfig(c);
if(h!==c.name||n!==c.version)console.log("[lively.modules] Updating registry "+h+"@"+n+" => "+d+"@"+b),bf.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,h,n,d,b)};sj.prototype.registerWithConfig=function(c){c=void 0===c?this.runtimeConfig:c;var h=this.System,n=this.url,b=(new bf.PackageConfiguration(this)).applyConfig(c),d=bf.join(n,"package.json");h.get(d)||h.set(d,h.newModule(Object.assign({},c,{default:c})));bf.emit("lively.modules/packageregistered",{"package":n},
Date.now(),h);return b};sj.prototype.remove=function(c){c=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},c);var h=this.System,n=this.url;n=n.replace(/\/$/,"");c.unloadModules&&this.modules().forEach(function(f){return f.unload(c)});bf.classHolder.PackageRegistry.ofSystem(h).removePackage(this);var b=h.getConfig(),d=n+"/package.json";h.delete(String(d));bf.arr.remove(b.packageConfigPaths||[],d);var k={},a={};h.config({meta:(k[d]={},k),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});
delete h.packages[n];bf.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),h)};sj.prototype.reload=function(c){var h=this.url,n=bf.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(h);this.remove(c);c={};n.addPackageAt(h,b||"devPackageDirs",(c[h]=this,c));return this.import()};sj.prototype.fork=function(c,h){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h||(h=bf.resource(n.url).join("../"+c).withRelativePartsResolved().url),
b.yield(n.changeAddress(h,c,!1),2)):b.return(b.yieldResult)})};sj.prototype.rename=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=bf.resource(h.url).join("../"+c).withRelativePartsResolved().url,b.yield(h.changeAddress(n,c,!0),2)):b.return(b.yieldResult)})};sj.prototype.changeAddress=function(c,h,n){h=void 0===h?null:h;n=void 0===n?!0:n;var b=this,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:return c=
c.replace(/\/?/,""),d=b,k=d.System,a=d.url,na.yield(b.runtimeConfig,2);case 2:return f=na.yieldResult,l=bf.resource(a).asDirectory(),r=new bf.Package(k,c),na.yield(bf.resource(c).asDirectory(),3);case 3:return v=na.yieldResult,f.name=h||b.name,y=bf.classHolder.PackageRegistry.ofSystem(k),A=y.coversDirectory(a),bf.classHolder.ModulePackageMapping.forSystem(k).clearCache(),k.packages[a]&&(k.packages[c]=k.packages[a],n&&delete k.packages[a]),Object.assign(r,bf.obj.select(b,["_name","map","config"])),
na.yield(v.ensureExistance(),4);case 4:return na.yield(b.resources(void 0,[]),5);case 5:E=na.yieldResult.map(function(aa){return aa.url}),F=b.modules(),H=$jscomp.makeIterator(F),J=H.next();case 6:if(J.done){na.jumpTo(8);break}O=J.value;L=v.join(O.pathInPackage()).url;return n?na.yield(O.renameTo(L),10):na.yield(O.copyTo(L),10);case 10:Y=E.indexOf(O.id);-1<Y&&E.splice(Y,1);J=H.next();na.jumpTo(6);break;case 8:S=$jscomp.makeIterator(E),ea=S.next();case 13:if(ea.done){if(!n){na.jumpTo(17);break}return na.yield(b.remove({forgetEnv:!0,
forgetDeps:!1}),18)}qa=ea.value;Fa=bf.resource(qa);K=Fa.relativePathFrom(l);return na.yield(Fa.copyTo(v.join(K)),14);case 14:ea=S.next();na.jumpTo(13);break;case 18:return na.yield(l.remove(),17);case 17:if(!h){na.jumpTo(20);break}r.name=h;r.config.name=h;Z=bf.resource(c).join("package.json");na.setCatchFinallyBlocks(21);return na.yield(Z.exists(),23);case 23:if(!na.yieldResult){na.jumpTo(24);break}return na.yield(Z.readJson(),25);case 25:R=na.yieldResult;if(R.name!==b.name){na.jumpTo(26);break}R.name=
h;return na.yield(Z.writeJson(R,!0),26);case 26:(U=k.get(Z.url))&&k.set(Z.url,k.newModule(Object.assign({},U,{name:h})));case 24:na.leaveTryBlock(20);break;case 21:na.enterCatchBlock();case 20:return A=A||"individualPackageDirs","individualPackageDirs"!==A&&"devPackageDirs"!==A||y._addPackageDir(c,A,!0),y._addPackageWithConfig(r,f,c,A),y.resetByURL(),y._updateLatestPackages(),na.return(r)}})};sj.prototype.search=function(c,h){h=void 0===h?{}:h;var n=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==
k.nextAddress)return h.includeUnloaded?k.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),k.jumpTo(2));2!=k.nextAddress&&(b=k.yieldResult.map(function(a){return bf.module(n.System,a.url)}));d=b;return k.return(Promise.all(d.map(function(a){return a.search(c,h).catch(function(f){console.error("Error searching module "+a.name+":\n"+f.stack);return[]})})).then(function(a){return bf.arr.flatten(a,
1)}))})};$jscomp.global.Object.defineProperties(sj.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var c=this.System.get(this.url+"/package.json");return c&&c.name?c.name:bf.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(c){return this._name=c}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,
get:function(){return this.url},set:function(c){return this.url=c}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var c=this.main,h=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};c&&(b.main=c);h&&(b.systemjs=h);n&&(b.lively=n);return b}}});bf.Package=sj;bf.ensurePackage=pt;bf.ensurePackage=pt;bf.importPackage=Gh;bf.importPackage=Gh;bf.removePackage=dk;bf.removePackage=dk;bf.reloadPackage=
Hj;bf.reloadPackage=Hj;bf.registerPackage=yn;bf.registerPackage=yn;bf.getPackage=Wr;bf.getPackage=Wr;bf.lookupPackage=ot;bf.lookupPackage=ot;bf.applyConfig=Xr;bf.applyConfig=Xr;bf.getPackageSpecs=VA;bf.getPackageSpecs=VA;bf.Package=sj;bf.Package=sj;var pd=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");pd.isFunctionNode=function(c){return"ArrowFunctionExpression"===c.type||"FunctionExpression"===c.type||"FunctionDeclaration"===c.type};pd.ensureIdentifier=function(c){return c.replace(pd.firstIdRe,
"_").replace(pd.trailingIdRe,"_")};pd.constructorTemplate=function(c){return pd.funcExpr({id:c?pd.id(c):null},["__first_arg__"],pd.ifStmt(pd.binaryExpr(pd.id("__first_arg__"),"&&",pd.member("__first_arg__",pd.funcCall(pd.member("Symbol","for"),pd.literal("lively-instance-restorer")),!0)),pd.block(),pd.block(pd.exprStmt(pd.funcCall(pd.member(pd.member("this",pd.funcCall(pd.member("Symbol","for"),pd.literal("lively-instance-initialize")),!0),"apply"),pd.id("this"),pd.id("arguments"))))))};pd.replaceSuper=
function(c,h,n,b){console.assert("Super"===c.type);(h=h.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+pd.stringify(c)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?c:h&&"static"===h[pd.methodKindSymbol]?pd.funcCall(pd.member("Object","getPrototypeOf"),pd.id(pd.tempLivelyClassVar)):pd.funcCall(pd.member("Object","getPrototypeOf"),pd.member(pd.id(pd.tempLivelyClassVar),
"prototype"))};pd.replaceSuperMethodCall=function(c,h,n,b){console.assert("CallExpression"===c.type);console.assert("Super"===c.callee.object.type);return pd.funcCall.apply(pd,[pd.member(pd.funcCall(pd.member(b.functionNode,"_get"),pd.replaceSuper(c.callee.object,h,n.concat(["callee","object"]),b),pd.literal(c.callee.property.value||c.callee.property.name),pd.id("this")),"call"),pd.id("this")].concat($jscomp.arrayFromIterable(c.arguments)))};pd.replaceDirectSuperCall=function(c,h,n,b){console.assert("CallExpression"===
c.type);console.assert("Super"===c.callee.type);return pd.funcCall.apply(pd,[pd.member(pd.funcCall(pd.member(b.functionNode,"_get"),pd.replaceSuper(c.callee,h,n.concat(["callee"]),b),pd.funcCall(pd.member("Symbol","for"),pd.literal("lively-instance-initialize")),pd.id("this")),"call"),pd.id("this")].concat($jscomp.arrayFromIterable(c.arguments)))};pd.replaceSuperGetter=function(c,h,n,b){console.assert("MemberExpression"===c.type);console.assert("Super"===c.object.type);return pd.funcCall(pd.member(b.functionNode,
"_get"),pd.replaceSuper(c.object,h,n.concat(["object"]),b),pd.literal(c.property.value||c.property.name),pd.id("this"))};pd.replaceSuperSetter=function(c,h,n,b){console.assert("AssignmentExpression"===c.type);console.assert("Super"===c.left.object.type);return pd.funcCall(pd.member(b.functionNode,"_set"),pd.replaceSuper(c.left.object,h,n.concat(["left","object"]),b),pd.literal(c.left.property.value||c.left.property.name),c.right,pd.id("this"))};pd.replaceClass=function(c,h,n,b){console.assert("ClassDeclaration"===
c.type||"ClassExpression"===c.type);var d=c.body.body,k=c.superClass;n=c.id;var a=c.type,f=c.start,l=c.end,r=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,v=pd.id("undefined"),y=pd.id("undefined"),A=n?n.name:"anonymous_class",E=b.evalId,F=b.sourceAccessorName;c=c["x-lively-object-meta"]||{start:f,end:l};d.length&&(r=d.reduce(function(L,Y){var S=Y.key,ea=Y.kind,qa=Y.value,Fa=Y.static;"Literal"!==S.type&&"Identifier"!==S.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(S));
if("method"===ea){ea={};Y=pd.id(A+"_"+pd.ensureIdentifier(S.name||S.value||pd.Path("property.name").get(S))+"_");qa=["key",pd.literal(S.name||S.value||pd.Path("property.name").get(S)),"value",Object.assign({},qa,(ea.id=Y,ea[pd.methodKindSymbol]=Fa?"static":"proto",ea))];var K=pd.objectLiteral(qa)}else"get"===ea||"set"===ea?(Y={},K=pd.objectLiteral(["key",pd.literal(S.name||S.value||pd.Path("property.name").get(S)),ea,Object.assign({},qa,(Y.id=pd.id(ea),Y[pd.methodKindSymbol]=Fa?"static":"proto",Y))])):
"constructor"===ea?(S={},qa=["key",pd.funcCall(pd.member("Symbol","for"),pd.literal("lively-instance-initialize")),"value",Object.assign({},qa,(S.id=pd.id(A+"_initialize_"),S[pd.methodKindSymbol]="proto",S))],K=pd.objectLiteral(qa)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+ea+", ignoring it, "+JSON.stringify(Y));(Fa?L.clazz:L.inst).push(K);return L},{inst:[],clazz:r?[pd.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+
A+'"; } })').body[0].expression]:[]}),d=r.inst,r=r.clazz,d.length&&(v={type:"ArrayExpression",elements:d}),r.length&&(y={type:"ArrayExpression",elements:r}));d=b.scope;if(k&&b.currentModuleAccessor)if(b.classHolder===k.object){var H=k;var J=k.property.name}else{var O=d&&d.resolvedRefMap&&d.resolvedRefMap.get(k);O&&O.decl&&d.decls&&d.decls.find(function(L){return $jscomp.makeIterator(L).next().value===O.decl})&&(H=k,J=k.name)}J=H?pd.objectLiteral(["referencedAs",pd.literal(J),"value",H]):k||pd.id("undefined");
H=n&&"ClassDeclaration"===a;k=["start",pd.literal(c.start),"end",pd.literal(c.end)];"undefined"!==typeof E&&k.push("evalId",pd.literal(E));F&&k.push("moduleSource",pd.nodes.id(F));E=pd.objectLiteral(k);v=pd.funcCall(pd.funcExpr({},["superclass"],pd.varDecl(pd.tempLivelyClassHolderVar,h.classHolder),pd.varDecl(pd.tempLivelyClassVar,H?{type:"ConditionalExpression",test:pd.binaryExpr(pd.funcCall(pd.member(pd.tempLivelyClassHolderVar,"hasOwnProperty"),pd.literal(n.name)),"&&",pd.binaryExpr({argument:pd.member(pd.tempLivelyClassHolderVar,
n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",pd.literal("function"))),consequent:pd.member(pd.tempLivelyClassHolderVar,n),alternate:pd.assign(pd.member(pd.tempLivelyClassHolderVar,n),pd.constructorTemplate(n.name))}:n?pd.constructorTemplate(n.name):pd.constructorTemplate(null)),pd.returnStmt(pd.funcCall(b.functionNode,pd.id(pd.tempLivelyClassVar),pd.id("superclass"),v,y,pd.id(pd.tempLivelyClassHolderVar),b.currentModuleAccessor||pd.id("undefined"),E))),J);if("ClassExpression"===a)return v;
a=v;b.declarationWrapper&&h.classHolder===b.classHolder&&(a=pd.funcCall(b.declarationWrapper,pd.literal(n.name),pd.literal("class"),a,b.classHolder,E));a=pd.varDecl(n,a,"var");a[pd.isTransformedClassVarDeclSymbol]=!0;return a};pd.splitExportDefaultWithClass=function(c,h,n,b){return c.declaration&&c.declaration[pd.isTransformedClassVarDeclSymbol]?[c.declaration,{declaration:c.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:c};pd.classToFunctionTransform=Wq;pd.arr=Lf;pd.Path=ci;pd.parse=
ce;pd.stringify=qm;pd.query=Kt;pd.nodes=wx;pd.Visitor=ue;var or=pd.nodes;pd.assign=or.assign;pd.member=or.member;pd.id=or.id;pd.exprStmt=or.exprStmt;pd.funcCall=or.funcCall;pd.literal=or.literal;pd.objectLiteral=or.objectLiteral;pd.varDecl=or.varDecl;pd.funcExpr=or.funcExpr;pd.returnStmt=or.returnStmt;pd.binaryExpr=or.binaryExpr;pd.ifStmt=or.ifStmt;pd.block=or.block;pd.firstIdRe=/^[^_a-z]/i;pd.trailingIdRe=/[^_a-z0-9]/ig;pd.isTransformedClassVarDeclSymbol=Symbol();pd.methodKindSymbol=Symbol();pd.tempLivelyClassVar=
"__lively_class__";pd.tempLivelyClassHolderVar="__lively_classholder__";var qO=function(){return pd.Visitor.apply(this,arguments)||this};$jscomp.inherits(qO,pd.Visitor);qO.prototype.accept=function(c,h,n){pd.isFunctionNode(c)&&(h=Object.assign({},h,{classHolder:pd.objectLiteral([]),currentMethod:c[pd.methodKindSymbol]?c:h.currentMethod}));if("ClassExpression"===c.type||"ClassDeclaration"===c.type)c=pd.replaceClass(c,h,n,h.options);"Super"===c.type&&(c=pd.replaceSuper(c,h,n,h.options));"MemberExpression"===
c.type&&c.object&&"Super"===c.object.type&&(c=pd.replaceSuperGetter(c,h,n,h.options));"AssignmentExpression"===c.type&&"MemberExpression"===c.left.type&&"Super"===c.left.object.type&&(c=pd.replaceSuperSetter(c,h,n,h.options));"CallExpression"===c.type&&"Super"===c.callee.type&&(c=pd.replaceDirectSuperCall(c,h,n,h.options));"CallExpression"===c.type&&c.callee.object&&"Super"===c.callee.object.type&&(c=pd.replaceSuperMethodCall(c,h,n,h.options));c=pd.Visitor.prototype.accept.call(this,c,h,n);return"ExportDefaultDeclaration"===
c.type?pd.splitExportDefaultWithClass(c,h,n,h.options):c};qO.run=function(c,h){var n=new this,b=h.classHolder||pd.objectLiteral([]);return n.accept(c,{options:h,classHolder:b},[])};pd.ClassReplaceVisitor=qO;pd.classToFunctionTransform=Wq;pd.classToFunctionTransform=Wq;var VE=lively.FreezerRuntime.recorderFor("lively.classes/index.js");VE.runtime=QE;VE.classToFunctionTransform=Wq;VE.runtime=QE;VE.runtime=QE;VE.classToFunctionTransform=Wq;VE.classToFunctionTransform=Wq;var Ipa=Object.freeze({__proto__:null,
runtime:QE,classToFunctionTransform:Wq}),Bj=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");Bj.arr=Lf;Bj.Path=ci;Bj.fuzzyParse=co;Bj.query=Kt;Bj.stringify=qm;Bj.resource=Xb;var Qv=function(c,h,n,b,d,k,a){this.System=c;this.intoModuleId=h;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=d.moduleId;this.importData=d;this.alias=k;this.parsed=a||Bj.fuzzyParse(b)};Qv.run=function(c,h,n,b,d,k,a){return(new this(c,h,n,b,d,k,a)).run()};Qv.prototype.run=function(){var c=
this.generateImportStatement(),h=c.standaloneImport,n=c.importedVarName,b=this.existingImportsOfFromModule(),d=b.imports,k=b.importsOfFromModule;b=b.importsOfVar;k=this.importsToBeReused(k,b,c);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:h,from:b[0].start,to:b[0].end};if(k.length&&(c=this.modifyExistingImport(k,h)))return c;d=Bj.arr.last(d);return this.insertNewImport(k,h,n,d?d.end:0)};Qv.prototype.importsToBeReused=function(c,
h,n){n.isDefault&&(c=c.filter(function(b){return!b.specifiers.some(function(d){return"ImportDefaultSpecifier"==d.type})}));return c};Qv.prototype.generateImportStatement=function(){var c=this.intoModuleId,h=this.fromModuleId,n=this.importData,b=this.intoPackage,d="default"===n.exported,k=this.alias||(d?n.local:n.exported),a=!d&&n.exported!==k;b=b&&b.name;var f=h,l=n.packageName,r=n.pathInPackage;if(n.isMain)f=l;else if(b===l)try{f=Bj.resource(h).relativePathFrom(Bj.resource(c)),f.startsWith(".")||
(f="./"+f)}catch(v){l&&"no group"!==l&&r&&(f=l+"/"+r)}else l&&"no group"!==l&&r&&(f=l+"/"+r);return{isDefault:d,standaloneImport:d?"import "+k+' from "'+f+'";':"import { "+n.exported+(a?" as "+k:"")+' } from "'+f+'";',importedVarName:k}};Qv.prototype.existingImportsOfFromModule=function(){var c=this.System,h=this.fromModuleId,n=this.intoModuleId,b=this.importData,d=b.exported,k=b.local,a=this.alias,f="default"===d;b=this.parsed.body.filter(function(r){return"ImportDeclaration"===r.type});var l=f?
a||k:a||d;k=b.filter(function(r){if(!r.source||"string"!==typeof r.source.value)return null;r=c.decanonicalize(r.source.value,n);return h===r});a=k.filter(function(r){return(r.specifiers||[]).some(function(v){return f?"ImportDefaultSpecifier"===v.type&&v.local.name===l:Bj.Path("imported.name").get(v)===d&&Bj.Path("local.name").get(v)===l})});return{imports:b,importsOfFromModule:k,importsOfVar:a}};Qv.prototype.modifyExistingImport=function(c,h){c=Bj.arr.flatmap(c,function(l){return l.specifiers||[]});
if(!c.length)return null;c=$jscomp.makeIterator(Bj.arr.partition(c,function(l){return"ImportDefaultSpecifier"===l.type}));var n=$jscomp.makeIterator(c.next().value).next().value,b=$jscomp.makeIterator(c.next().value).next().value;c=this.alias;var d=this.intoModuleSource,k=this.importData,a=k.exported;k=k.local;var f="default"===a;f?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");if(f){n=d.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;
b=(c||k)+",";a=d.slice(0,n);d=d.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);d.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+d,generated:b,standaloneImport:h,importedVarName:c||k,from:n,to:n+b.length}}n=b?b.end:n.end;f=(k=c&&c!==a)?a+" as "+c:a;b=b?", "+f:", { "+f+" }";return{status:"modified",newSource:""+d.slice(0,n)+b+d.slice(n),generated:b,standaloneImport:h,importedVarName:k?c:a,from:n,to:n+b.length}};Qv.prototype.insertNewImport=function(c,h,n,b){b=void 0===b?
0:b;c&&c.length&&(b=Bj.arr.last(c).end);var d=this.intoModuleSource;c=d.slice(0,b);d=d.slice(b);var k=h;c.length&&!c.endsWith("\n")&&(k="\n"+k);d.length&&!d.startsWith("\n")&&(k+="\n");return{status:"modified",newSource:c+k+d,generated:k,standaloneImport:h,importedVarName:n,from:b,to:b+k.length}};Bj.ImportInjector=Qv;var rO=function(){};rO.getGlobals=function(c,h){c=h||Bj.fuzzyParse(c,{withComments:!0});h=(h=c.comments?c.comments.find(function(b){return b.isBlock&&b.text.startsWith("global")}):null)?
h.text.replace(/^global\s*/,"").split(",").map(function(b){return b.trim()}).filter(Boolean):[];var n=[].concat($jscomp.arrayFromIterable(h),$jscomp.arrayFromIterable(Bj.query.knownGlobals));c=Bj.query.findGlobalVarRefs(c,{jslintGlobalComment:!0}).filter(function(b){return!n.includes(b.name)}).map(function(b){return b.name});return Bj.arr.compact([].concat($jscomp.arrayFromIterable(h),$jscomp.arrayFromIterable(c)))};rO.run=function(c,h,n){n=n||Bj.fuzzyParse(c,{withComments:!0});var b=(n=n.comments?
n.comments.find(function(k){return k.isBlock&&k.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(k){return k.trim()}).filter(Boolean):[],d=h.filter(function(k){return!b.includes(k)});if(!d.length)return{status:"not modified",newSource:c,generated:"",from:0,to:0};if(!n)return n="/*global "+d.join(",")+"*/\n",{status:"modified",newSource:n+c,generated:n,from:0,to:n.length};h=n.start+2+n.text.length;d=d.join(",");b.length?d=","+d:n.text.startsWith("global ")||
(d=" "+d);n=h+d.length;return{status:"modified",newSource:c.slice(0,h)+d+c.slice(h),generated:d,from:h,to:n}};Bj.GlobalInjector=rO;var kI=function(){};kI.removeImports=function(c,h,n){n=n||Bj.fuzzyParse(c);var b=Bj.arr.flatmap(n.body,function(d){return"ImportDeclaration"===d.type&&d.specifiers.length?d.specifiers.map(function(k){return{local:k.local,importStmt:d}}):[]}).filter(function(d){return h.some(function(k){return k.local===d.local.name})});n=b.map(function(d){return{local:d.local.name,from:d.importStmt.source.value}});
c=Bj.arr.uniq(b.map(function(d){var k=d.importStmt.specifiers.find(function(a){return d.local===a.local});Bj.arr.remove(d.importStmt.specifiers,k);return d.importStmt})).slice().reverse().reduce(function(d,k){var a=d.source;d=d.changes;var f=k.start,l=k.end,r=k.specifiers,v=a.slice(0,f),y=a.slice(l);a=a.slice(f,l);(k=r.length?Bj.stringify(k):"")&&k.includes("\n")&&!a.includes("\n")&&(k=k.replace(/\s+/g," "));a=v+k+y;d=d.concat({replacement:k,start:f,end:l});return{source:a,changes:d}},{source:c,changes:[]});
return Object.assign({},c,{removedImports:n})};kI.findUnusedImports=function(c){var h="string"===typeof c?Bj.fuzzyParse(c):c;c=Bj.arr.flatmap(h.body,function(d){return"ImportDeclaration"===d.type&&d.specifiers.length?d.specifiers.map(function(k){return{local:k.local,from:d.source?d.source.value:"",importStmt:d}}):[]});var n=c.map(function(d){return d.local});h=Bj.query.resolveReferences(Bj.query.scopes(h));h=Array.from(h.resolvedRefMap.keys()).filter(function(d){return!n.includes(d)});var b=Bj.arr.uniq(h.map(function(d){return d.name}));
return c.filter(function(d){return!b.includes(d.local.name)}).map(function(d){return Object.assign({},d,{local:d.local.name})})};kI.removeUnusedImports=function(c){var h=Bj.fuzzyParse(c);return this.removeImports(c,this.findUnusedImports(h),h)};Bj.ImportRemover=kI;var qp=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");qp.ensureParent=function(c,h,n){if(n)return n;n=c.id;var b=c.System;h=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;
n={id:h,filename:h,paths:[]};(c=c.package())&&n.paths.push(qp.resource(c.url).join("node_modules/").path());return n};qp.relative=function(c,h){return qp.resource(c.id).parent().join(h).url.replace("file://","")};qp._require=Hh;qp._resolve=xm;qp.resource=Xb;qp._require=Hh;qp._require=Hh;qp._resolve=xm;qp._resolve=xm;var We=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");We.module=zn;We.isModuleLoaded=Uy;We.doesModuleExist=sK;We.arr=Lf;We.obj=dg;We.graph=tx;We.parse=ce;We.query=Kt;
We.computeRequireMap=Gj;We.moduleSourceChange=Yg;We.scheduleModuleExportsChange=Pj;We.runScheduledExportChanges=Ti;We.livelySystemEnv=zK;We.Package=sj;We.isURL=Xm;We.emit=Kk;We.subscribe=gt;We.defaultClassToFunctionConverterName="initializeES6ClassForLively";We.classRuntime=QE;We.ImportInjector=Qv;We.GlobalInjector=rO;We.ImportRemover=kI;We._require=Hh;We._resolve=xm;We.classHolder=Cx;var sO=function(){var c=/['"]format (esm|es6)['"];/,h=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
return function(b,d){return d&&d.format?("es6"==d.format&&"esm"==d.format,d.format):c.test(b.slice(0,5E3))||!h.test(b.slice(0,5E3))&&n.test(b)?"esm":h.test(b.slice(0,5E3))?"cjs":"global"}}();We.detectModuleFormat=sO;We.detectModuleFormat=sO;We.detectModuleFormat=sO;We.classHolder.module=We.module;We.isModuleLoaded=Uy;We.isModuleLoaded=Uy;We.doesModuleExist=sK;We.doesModuleExist=sK;We.globalProps={initialized:!1,descriptors:{}};var ug=function(c,h){var n=this;if(!We.isURL(h)&&!/^@/.test(h))throw Error("ModuleInterface constructor called with "+
h+" that does not seem to be a fully normalized module id.");this.System=c;this.id=h;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;We.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};ug.prototype.fullName=function(){return this.id};ug.prototype.shortName=function(){return this.package().name+
"/"+this.pathInPackage()};ug.prototype.source=function(){var c=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(h){return c._source=h})};ug.prototype.setSource=function(c){this.sourceAccessorName&&this.recorderName&&c.includes("var "+this.recorderName)&&c.includes("var "+this.sourceAccessorName)||this._source===c||(this.reset(),this._source=c)};ug.prototype.ast=function(){var c=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress){if(c._ast)return d.return(c._ast);h=c;n=We;b=n.parse;return d.yield(c.source(),2)}return d.return(h._ast=b.call(n,d.yieldResult))})};ug.prototype.scope=function(){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return c._scope?n.return(c._scope):n.yield(c.ast(),2);h=n.yieldResult;return n.return(c._scope=We.query.topLevelDeclsAndRefs(h).scope)})};ug.prototype.resolvedScope=function(){var c=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==
d.nextAddress?(h=c,n=We.query,b=n.resolveReferences,d.yield(c.scope(),2)):d.return(h._scope=b.call(n,d.yieldResult))})};ug.prototype.metadata=function(){var c=this.System.loads?this.System.loads[this.id]:null;return c?c.metadata:null};ug.prototype.addMetadata=function(c){var h=this.System,n=this.id,b=this.metadata();c=b?Object.assign(b,c):c;b={};h.config({meta:(b[n]=c,b)});return h.meta[n]};ug.prototype.format=function(){var c=this.metadata();return c&&c.format?c.format:this._source?We.detectModuleFormat(this._source):
"global"};ug.prototype.setFormat=function(c){return this.addMetadata({format:c})};ug.prototype.reset=function(){this._scope=this._ast=this._source=null};ug.prototype.get=function(){return this.System.get(this.id)};ug.prototype.load=function(c){var h=this,n,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=h,b=n.id,d=n.System,c&&h.addMetadata(c),(k=d.get(b))?a.jumpTo(2):a.yield(d.import(b),3);2!=a.nextAddress&&(k=a.yieldResult);return a.return(k)})};
ug.prototype.isLoaded=function(){return!!this.System.get(this.id)};ug.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete We.livelySystemEnv(this.System).loadedModules[this.id]};ug.prototype.unloadDeps=function(c){var h=this;c=We.obj.merge({forgetDeps:!0,forgetEnv:!0},c);this.dependents().forEach(function(n){h.System.delete(n.id);h.System.loads&&delete h.System.loads[n.id];c.forgetEnv&&n.unloadEnv()})};ug.prototype.unload=function(c){var h=this,n,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return c=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},c),n=h,b=n.System,d=n.id,c.reset&&h.reset(),c.forgetDeps&&h.unloadDeps(c),h.System.delete(d),b.loads&&delete b.loads[d],b.meta&&delete b.meta[d],c.forgetEnv&&h.unloadEnv(),(k=b._livelyModulesTranslationCache)?a.yield(k.deleteCachedData(d),2):a.jumpTo(2);We.emit("lively.modules/moduleunloaded",{module:h.id},Date.now(),h.System);a.jumpToEnd()})};ug.prototype.reload=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(c=We.obj.merge({reloadDeps:!0,resetEnv:!0},c),n=[h],c.reloadDeps&&(n=h.dependents().concat(n)),b.yield(h.unload({forgetDeps:c.reloadDeps,forgetEnv:c.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(d){return d.id!==h.id&&d.load()})),3):b.yield(h.load(),0)})};ug.prototype.copyTo=function(c){var h=this,n,b,d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=h.System.resource(c),b=n.write,l.yield(h.source(),3);if(2!=l.nextAddress)return l.yield(b.call(n,
l.yieldResult),2);d=h;k=d.System;a=We.module(k,c);f=We.obj.select(h,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,f);k.set(c,k.newModule(k.get(h.id)));return l.return(a)})};ug.prototype.renameTo=function(c,h){h=void 0===h?{}:h;var n=this,b,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b=h,d=void 0===b.unload?!0:b.unload,k=void 0===b.removeFile?!0:b.removeFile,f.yield(n.copyTo(c),
2);case 2:a=f.yieldResult;if(!d){f.jumpTo(3);break}return f.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!k){f.jumpTo(5);break}return f.yield(n.System.resource(n.id).remove(),5);case 5:return f.return(a)}})};ug.prototype.whenLoaded=function(c){if(this.isLoaded())try{c(this)}catch(h){console.error(h)}else We.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:c})};ug.prototype.changeSourceAction=function(c){var h=this;return Promise.resolve(this.source()).then(function(n){return c(n)}).then(function(n){return h.changeSource(n)})};
ug.prototype.changeSource=function(c,h){h=Object.assign({doSave:!0,doEval:!0},h);var n=this.System,b=this.id,d=this.format(),k;this.reset();this.lastModifiedAt=new Date;return Promise.all([h.doSave&&this.System.resource(b).write(c),h.doEval&&We.moduleSourceChange(n,b,c,d,h).then(function(a){return k=a})]).then(function(){return k})};ug.prototype.addDependencyToModuleRecord=function(c,h){var n=this;h=void 0===h?function(){}:h;var b=this.record(),d=c.record();if(b&&d){var k,a=b.dependencies.some(function(l,
r){if(l)return k=r,l&&l.name===c.id});a?d!==b.dependencies[k]&&b.dependencies.splice(k,1,d):b.dependencies.push(d);a&&b.setters[k]||(b.setters[a?k:b.dependencies.length-1]=h);var f;d.importers.some(function(l,r){if(l)return f=r,l&&l.name===n.id})?b!==d.importers[f]&&d.importers.splice(f,1,b):d.importers.push(b)}};ug.prototype.dependents=function(){var c=this;return We.graph.hull(We.graph.invert(We.computeRequireMap(this.System)),this.id).map(function(h){return We.module(c.System,h)})};ug.prototype.requirements=
function(){var c=this;return We.graph.hull(We.computeRequireMap(this.System),this.id).map(function(h){return We.module(c.System,h)})};ug.prototype.directRequirements=function(){var c=this,h=(this.record()||{}).dependencies||[];return We.arr.pluck(h.filter(Boolean),"name").map(function(n){return We.module(c.System,n)})};ug.prototype.isMochaTest=function(){if(!this._source)return!1;var c=this._scope||(this._scope=We.query.topLevelDeclsAndRefs(We.parse(this._source)).scope);return We.query.imports(c).map(function(h){return h.fromModule}).some(function(h){return h.endsWith("mocha-es6")||
h.endsWith("mocha-es6/index.js")})?!0:!1};ug.prototype.define=function(c,h,n,b){n=void 0===n?!0:n;var d=this.System,k=this.id,a=this.recorder,f=Symbol.for("lively-object-meta"),l=Symbol.for("lively-module-meta");"function"!==typeof h||!b||"function"!==b.kind&&"class"!==b.kind||(h[f]=b);h&&h[f]&&!h[l]&&(b=this.pathInPackage(),f=this.package(),h[l]={package:f?{name:f.name,version:f.version}:{},pathInPackage:b});a[c]=h;We.scheduleModuleExportsChange(d,k,c,h,!1);this.notifyTopLevelObservers(c);(n=n||
!this.isEvalutionInProgress())&&We.runScheduledExportChanges(d,k);return h};ug.prototype.undefine=function(c){delete this.recorder[c]};ug.prototype.subscribeToToplevelDefinitionChanges=function(c){this._observersOfTopLevelState.push(c);return c};ug.prototype.notifyTopLevelObservers=function(c){var h=this.recorder;We.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],c)||this._observersOfTopLevelState.forEach(function(n){return n(c,h[c])})};ug.prototype.unsubscribeFromToplevelDefinitionChanges=
function(c){this._observersOfTopLevelState="string"===typeof c?this._observersOfTopLevelState.filter(function(h){return h.name!==c}):this._observersOfTopLevelState.filter(function(h){return h!==c})};ug.prototype.evaluationStart=function(){this._evaluationsInProgress++};ug.prototype.evaluationEnd=function(){this._evaluationsInProgress--;We.runScheduledExportChanges(this.System,this.id)};ug.prototype.nextEvalId=function(){return this._evalId++};ug.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};ug.prototype.env=function(){return this};ug.prototype.package=function(){return We.Package.forModule(this.System,this)};ug.prototype.pathInPackage=function(){var c=this.package();return c&&0===this.id.indexOf(c.address)?this.id.slice(c.address.length).replace(/^\//,""):this.id};ug.prototype.imports=function(){var c=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=We.query,n=h.imports,b.yield(c.scope(),2)):b.return(n.call(h,
b.yieldResult))})};ug.prototype.exports=function(){var c=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=We.query,n=h.exports,b.yield(c.scope(),2)):b.return(n.call(h,b.yieldResult))})};ug.prototype.addImports=function(c){var h=this,n,b,d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(h.source(),2);n=y.yieldResult;b=$jscomp.makeIterator(c);for(d=b.next();!d.done;d=b.next())k=d.value,a=
We.module(h.System,k.from||k.moduleId),f=a.package(),l={exported:k.exported||k.local,moduleId:a.id,packageName:f.name,packageURL:f.url,pathInPackage:a.pathInPackage()},r=k.local,v=We.ImportInjector.run(h.System,h.id,h.package(),n,l,r),n=v.newSource;return y.yield(h.changeSource(n),0)})};ug.prototype.addGlobalDeclaration=function(c){var h=this,n,b,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?f.yield(h.source(),2):3!=f.nextAddress?(n=f.yieldResult,b=We.GlobalInjector.run(n,
c),d=b.status,k=b.newSource,(a="modified"===d)?f.yield(h.changeSource(k),3):f.jumpTo(3)):f.return(a)})};ug.prototype.removeImports=function(c){var h=this,n,b,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return c.length?a.yield(h.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(We.ImportRemover.removeImports(n,c),3);case 3:return b=a.yieldResult,d=b.source,k=b.removedImports,a.yield(h.changeSource(d),4);case 4:k.forEach(function(f){return delete h.recorder[f.local]}),
a.jumpToEnd()}})};ug.prototype._localDeclForRefAt=function(c){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(h.resolvedScope(),2);n=d.yieldResult;b=We.query.refWithDeclAt(c,n);return d.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};ug.prototype._localDeclForName=function(c){var h=this,n,b,d,k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(h.resolvedScope(),2);n=v.yieldResult;
d=$jscomp.makeIterator(n.resolvedRefMap.values());for(k=d.next();!k.done;k=d.next())if(f=a=k.value,l=f.ref,r=l.name,c===r){b=a;break}return v.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};ug.prototype._importForNSRefAt=function(c){var h=this,n,b,d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(h.resolvedScope(),2);n=y.yieldResult;b=n.node;d=We.query.nodesAtIndex(b,c);if(2>d.length)return y.return([null,null]);k=d[d.length-1];a=
d[d.length-2];if("Identifier"!=k.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return y.return([null,null]);f=n.resolvedRefMap.get(a.object)||{};l=f.decl;if(!l||"ImportDeclaration"!==l.type)return y.return([null,null]);r=a.object.name;v=l.specifiers.find(function(A){return A.local.name===r});return y.return("ImportNamespaceSpecifier"!==v.type?[null,null]:[l,v.local,k.name])})};ug.prototype._resolveImportedDecl=function(c){var h=this,n,b,d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!c)return r.return([]);
n=c.id;b=n.name;return r.yield(h.imports(),2);case 2:d=r.yieldResult;k=d.find(function(v){return v.local==b});if(!k){r.jumpTo(3);break}a=We.module(h.System,k.fromModule,h.id);f=[c];l=f.concat;return r.yield(a.bindingPathForExport(k.imported),4);case 4:return r.return(l.call(f,r.yieldResult));case 3:return r.return([c])}})};ug.prototype.bindingPathFor=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(h._localDeclForName(c),2):4!=
b.nextAddress?(n=b.yieldResult)?b.yield(h._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};ug.prototype.bindingPathForExport=function(c){var h=this,n,b,d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return l.yield(h.resolvedScope(),2);case 2:return l.yield(h.exports(),3);case 3:n=l.yieldResult;b=n.find(function(r){return r.exported===c});if(!b.fromModule)return l.return(h._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?h:null}));d=We.module(h.System,b.fromModule,h.id);k={decl:b.node,id:b.declId,declModule:h};a=[k];f=a.concat;return l.yield(d.bindingPathForExport(b.imported),5);case 5:return l.return(f.call(a,l.yieldResult))}})};ug.prototype.bindingPathForRefAt=function(c){var h=this,n,b,d,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(h._localDeclForRefAt(c),2);case 2:n=A.yieldResult;if(!n){A.jumpTo(3);break}return A.yield(h._resolveImportedDecl(n),
4);case 4:return A.return(A.yieldResult);case 3:return b=$jscomp,d=b.makeIterator,A.yield(h._importForNSRefAt(c),5);case 5:k=d.call(b,A.yieldResult);a=k.next().value;f=k.next().value;l=k.next().value;if(!a)return A.return([]);r=We.module(h.System,a.source.value,h.id);v=[{decl:a,declModule:h,id:f}];y=v.concat;return A.yield(r.bindingPathForExport(l),6);case 6:return A.return(y.call(v,A.yieldResult))}})};ug.prototype.definitionForRefAt=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(h.bindingPathForRefAt(c),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};ug.prototype.ensureRecord=function(){var c=this.System,h=c._loader.moduleRecords;return h[this.id]?h[this.id]:h[this.id]={name:this.id,exports:c.newModule({}),dependencies:[],importers:[],setters:[]}};ug.prototype.record=function(){var c=this.System._loader.moduleRecords[this.id];if(!c)return null;c.hasOwnProperty("__lively_modules__")||(c.__lively_modules__={evalOnlyExport:{}});
return c};ug.prototype.updateRecord=function(c){var h=this.record();if(!h)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");h.locked=!0;try{return c(h)}finally{h.locked=!1}};ug.prototype.search=function(c,h){var n=this,b,d,k,a,f,l,r,v,y,A,E,F,H,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){if(1==O.nextAddress)return h=Object.assign({excludedModules:[]},h),h.excludedModules.some(function(L){return"string"===typeof L?L===n.id:L instanceof
RegExp?L.test(n.id):"function"===typeof L?L(n.id):!1})?O.return([]):O.yield(n.source(),2);b=O.yieldResult;c instanceof RegExp?(k="g",c.ignoreCase&&(k+="i"),c.multiline&&(k+="m"),d=RegExp(c.source,k)):d=RegExp(c,"g");for(f=[];null!==(a=d.exec(b));)f.push([a.index,a[0].length]);r=l=0;v=1;for(y=0;l<b.length&&r<f.length;l++)"\n"==b[l]&&(v++,y=l+1),A=$jscomp.makeIterator(f[r]),E=A.next().value,F=A.next().value,l===E&&(H=b.slice(y).indexOf("\n"),H=-1===H?b.length:H+y,J=n.package(),f[r]={moduleId:n.id,packageName:J?
J.name:void 0,pathInPackage:J?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:F,line:v,column:l-y,lineString:1E3<H-y?"..."+b.slice(l-10,l+100)+"...":b.slice(y,H)},r++);return O.return(f)})};ug.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(ug.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch",
"getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:We.GlobalInjector.getGlobals(this._source))).concat(We.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(c){return this._recorder=c},get:function(){if(this._recorder)return this._recorder;var c=this.System,h=this;if(!We.globalProps.initialized){We.globalProps.initialized=!0;for(var n in c.global)if(c.global.__lookupGetter__(n)||"closed"==n)We.globalProps.descriptors[n]={value:void 0,configurable:!0,
writable:!0}}n={};if(c.get("@system-env").node){var b=We._require.bind(null,this);b.resolve=We._resolve.bind(null,this);n.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(c.global,Object.assign({},We.globalProps.descriptors,{},n,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:c},b.__currentLivelyModule={value:h},b[We.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:We.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(d,k,a,f,l){l=l||{};l.kind=k;return h.define(d,a,!1,l)}},b._moduleExport={value:function(d,k){We.scheduleModuleExportsChange(c,h.id,d,k,!0)}},b._moduleImport={value:function(d,k){var a=c.decanonicalize(d,h.id),f=c.get(a);if(f){h.addDependencyToModuleRecord(We.module(c,a),function(l){return Object.assign(h.recorder,l)});if(void 0==k)return f;f.hasOwnProperty(k)||console.warn("import from "+f+": Has no export "+k+"!");return f[k]}console.warn("import of "+
k+" failed: "+d+" (tried as "+h.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});We.ModuleInterface=ug;We.default=zn;var we=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");we.canonicalURL=function(c){var h=c.match(/([^:]+:\/\/)(.*)/);if(h){var n=h[1];c=h[2]}c=c.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+c};we.prepareNodejsCaching=function(){var c=System._nodeRequire("fs"),h=System._nodeRequire("path"),
n="win32"===we.process.platform;h=n||"/"!==we.process.cwd()?we.process.cwd():h.join(we.process.env.HOME,".lively.next");we.nodejsCacheDirURL=n?"file:///"+h.replace(/\\/g,"/"):"file://"+h;c.existsSync(h)||c.mkdirSync(h)};we.getExceptions=PR;we.setExceptions=QR;we.prepareCodeForCustomCompile=RR;we.prepareTranslatedCodeForSetterCapture=SR;we.getCachedNodejsModule=function(c,h){try{var n=c._nodeRequire("module").Module,b=n._resolveFilename(h.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));
return n._cache[b]}catch(d){c.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",h.name)}return null};we.addNodejsWrapperSource=function(c,h){var n=we.getCachedNodejsModule(c,h);if(n)return h.metadata.format="esm",h.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+we.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return we.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
c.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",h.name),!0;c.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",h.name);return!1};we.customTranslate=function(c,h){var n=this,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:b=n;d=b.debug;if(a=(k=h.metadata)&&k.hasOwnProperty("instrument")&&!k.instrument||we.exceptions.some(function(Fa){return Fa(h.name)}))return d&&
console.log("[lively.modules customTranslate ignoring] %s",h.name),qa.return(c(h));if(we.isNode&&we.addNodejsWrapperSource(b,h))return d&&console.log("[lively.modules] loaded %s from nodejs cache",h.name),qa.return(c(h));f=Date.now();l=we.detectModuleFormat(h.source,k);r=we.module(b,h.name);v=!1;y="esm"===l;r.setSource(h.source);qa.setCatchFinallyBlocks(2);A=b.useModuleTranslationCache;E=b.global.indexedDB;F=A&&String(we.string.hashCode(h.source));if(A&&E&&y)return H=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new we.BrowserModuleTranslationCache),qa.yield(H.fetchStoredModuleSource(h.name),8);if(!(we.isNode&&A&&y)){qa.jumpTo(5);break}H=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new we.NodeModuleTranslationCache);return qa.yield(H.fetchStoredModuleSource(h.name),7);case 7:if((J=qa.yieldResult)&&J.hash==F&&J.timestamp>=we.NodeModuleTranslationCache.earliestDate&&J.source)return k.format="register",k.deps=[],d&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
h.name,Date.now()-f),qa.return(Promise.resolve(J.source));qa.jumpTo(5);break;case 8:if((J=qa.yieldResult)&&J.hash==F&&J.timestamp>=we.BrowserModuleTranslationCache.earliestDate&&J.source)return k.format="register",k.deps=[],d&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",h.name,Date.now()-f),qa.return(Promise.resolve(J.source));case 5:qa.leaveTryBlock(3);break;case 2:O=qa.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
O.stack);case 3:return L={},y?(r.recorderName="__lvVarRecorder",r.recorder===b.global&&r.unloadEnv(),h.metadata.format="esm",Y=we.prepareCodeForCustomCompile(b,h.source,h.name,r,d),L=Y.options,S=Y.source,h.source=S,v=h.metadata["lively.modules instrumented"]=!0,d&&console.log("[lively.modules] loaded %s as es6 module",h.name)):"global"===h.metadata.format&&(r.recorderName="System.global",r.recorder=b.global,h.metadata.format="global",ea=we.prepareCodeForCustomCompile(b,h.source,h.name,r,d),L=ea.options,
S=ea.source,h.source=S,v=h.metadata["lively.modules instrumented"]=!0,d&&console.log("[lively.modules] loaded %s as instrumented global module",h.name)),v||d&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",h.name,h.metadata.format),qa.return(c(h).then(function(Fa){var K,Z,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:0===Fa.indexOf("System.register(")&&(d&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
h.name),Fa=we.prepareTranslatedCodeForSetterCapture(b,Fa,h.name,r,L,d));if(we.isNode&&A&&y)return K=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new we.NodeModuleTranslationCache),U.setCatchFinallyBlocks(8),U.yield(K.cacheModuleSource(h.name,F,Fa),10);if(!(A&&E&&y)){U.jumpTo(3);break}K=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new we.BrowserModuleTranslationCache);U.setCatchFinallyBlocks(5);return U.yield(K.cacheModuleSource(h.name,F,Fa),7);case 7:d&&
console.log("[lively.modules customTranslate] stored cached version for %s",h.name);U.leaveTryBlock(3);break;case 5:Z=U.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+Z.stack);U.jumpTo(3);break;case 10:d&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",h.name);U.leaveTryBlock(3);break;case 8:R=U.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+R.stack);case 3:return d&&
console.log("[lively.modules customTranslate] done %s after %sms",h.name,Date.now()-f),U.return(Fa)}})}))}})};we.instrumentSourceOfEsmModuleLoad=tK;we.instrumentSourceOfGlobalModuleLoad=uK;we.wrapModuleLoad=sG;we.unwrapModuleLoad=vK;we.parse=ce;we.nodes=wx;we.isValidIdentifier=wy;var RW=we.nodes;we.funcCall=RW.funcCall;we.member=RW.member;we.literal=RW.literal;we.evalCodeTransform=ft;we.evalCodeTransformOfSystemRegisterSetters=Vu;we.arr=Lf;we.string=Ih;we.properties=ir;we.module=zn;we.detectModuleFormat=
sO;we.resource=Xb;we.installHook=gf;we.removeHook=If;we.isHookInstalled=Pg;we.classToFunctionTransform=Wq;we.isNode=System.get("@system-env").node;var lI=function(){};lI.prototype.cacheModuleSource=function(c,h,n){throw Error("not yet implemented");};lI.prototype.fetchStoredModuleSource=function(c){throw Error("not yet implemented");};lI.prototype.deleteCachedData=function(c){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(lI,{earliestDate:{configurable:!0,enumerable:!0,
get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});we.ModuleTranslationCache=lI;we.nodejsCacheDirURL=null;var Dx=function(){return we.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(Dx,we.ModuleTranslationCache);Dx.prototype.ensurePath=function(c){var h=this,n,b,d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(h.moduleCacheDir.join(c).exists(),2);case 2:if(r.yieldResult)return r.return();
n="";k=$jscomp.makeIterator(c.split("/"));a=k.next();case 3:if(a.done){r.jumpTo(0);break}f=a.value;n+=f+"/";b=h.moduleCacheDir.join(n);return r.yield(b.exists(),6);case 6:if(r.yieldResult){r.jumpTo(7);break}r.setCatchFinallyBlocks(8);return r.yield(b.mkdir(),10);case 10:r.leaveTryBlock(7);break;case 8:if(l=r.enterCatchBlock(),"EEXIST"!=l.code)throw l;case 7:return b=we.resource("file://"+n+"/package.json"),r.yield(b.exists(),11);case 11:if(!r.yieldResult){r.jumpTo(4);break}return r.yield(b.read(),
13);case 13:return d=r.yieldResult,r.yield(h.moduleCacheDir.join(n+"/package.json").write(d),4);case 4:a=k.next(),r.jumpTo(3)}})};Dx.prototype.dumpModuleCache=function(){var c=this,h,n,b,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:n=f.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(h=n.getNext())){f.jumpTo(0);break}b=we.resource("file://"+h);return f.yield(b.exists(),5);case 5:if(!f.yieldResult){f.jumpTo(2);break}d=c;k=d.cacheModuleSource;
a=h;return f.yield(b.read(),8);case 8:return f.yield(k.call(d,a,"NO_HASH",f.yieldResult),2)}})};Dx.prototype.getFileName=function(c){return c.match(/([^\/]*.)(\.js)?$/)[0]};Dx.prototype.fetchStoredModuleSource=function(c){var h=this,n,b,d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return c=c.replace("file://",""),n=h.getFileName(c),b=c.replace(n,""),d=h.moduleCacheDir.join(c),r.yield(d.exists(),2);case 2:return r.yieldResult?r.yield(d.stat(),
3):r.return(null);case 3:return k=r.yieldResult,a=k.birthtime,r.yield(d.read(),4);case 4:return f=r.yieldResult,r.yield(h.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return l=r.yieldResult,r.return({source:f,timestamp:a,hash:l})}})};Dx.prototype.cacheModuleSource=function(c,h,n){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(c=c.replace("file://",""),d=b.getFileName(c),k=c.replace(d,""),a.yield(b.ensurePath(k),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(c).write(n),
3):a.yield(b.moduleCacheDir.join(k+"/.hash_"+d).write(h),0)})};Dx.prototype.deleteCachedData=function(c){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(c=c.replace("file://",""),n=h.getFileName(c),c.replace(n,""),b=h.moduleCacheDir.join(c),d.yield(b.exists(),2)):3!=d.nextAddress?d.yieldResult?d.yield(b.remove(),3):d.return(!1):d.return(!0)})};$jscomp.global.Object.defineProperties(Dx.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){we.nodejsCacheDirURL||
we.prepareNodejsCaching();return we.resource(we.nodejsCacheDirURL+"/.module_cache/")}}});we.NodeModuleTranslationCache=Dx;var Ex=function(c){c=void 0===c?"lively.modules-module-translation-cache":c;var h=we.ModuleTranslationCache.call(this)||this;h.version=2;h.sourceCodeCacheStoreName="sourceCodeStore";h.dbName=c;h.db=h.openDb();return h};$jscomp.inherits(Ex,we.ModuleTranslationCache);Ex.prototype.openDb=function(){var c=this,h=System.global.indexedDB.open(this.version);return new Promise(function(n,
b){h.onsuccess=function(d){n(this.result)};h.onerror=function(d){return b(d.target)};h.onupgradeneeded=function(d){return d.currentTarget.result.createObjectStore(c.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};Ex.prototype.deleteDb=function(){var c=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(h,n){c.onerror=function(b){return n(b.target)};c.onsuccess=function(b){return h(b)}})};Ex.prototype.closeDb=function(){var c=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(c.db,2);h=b.yieldResult;n=h.close();return b.return(new Promise(function(d,k){n.onsuccess=function(a){d(this.result)};n.onerror=function(a){return k(a.target.errorCode)}}))})};Ex.prototype.cacheModuleSource=function(c,h,n){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(b.db,2);d=k.yieldResult;return k.return(new Promise(function(a,f){var l=d.transaction([b.sourceCodeCacheStoreName],"readwrite"),r=l.objectStore(b.sourceCodeCacheStoreName),
v=Date.now();r.put({moduleId:c,hash:h,source:n,timestamp:v});l.oncomplete=a;l.onerror=f}))})};Ex.prototype.fetchStoredModuleSource=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(d,k){var a=n.transaction([h.sourceCodeCacheStoreName]).objectStore(h.sourceCodeCacheStoreName).get(c);a.onerror=k;a.onsuccess=function(f){return d(a.result)}}))})};Ex.prototype.deleteCachedData=
function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(d,k){var a=n.transaction([h.sourceCodeCacheStoreName],"readwrite").objectStore(h.sourceCodeCacheStoreName).delete(c);a.onerror=k;a.onsuccess=function(f){return d(a.result)}}))})};Ca("ai",Ex);we.BrowserModuleTranslationCache=Ex;we.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");we.exceptions=[function(c){return!c.endsWith(".js")&&
!c.endsWith(".jsx")&&!c.startsWith("https://jspm.dev")},function(c){return c.endsWith("dist/acorn.js")||c.endsWith("dist/escodegen.browser.js")||c.endsWith("bowser.js")||c.endsWith("TweenMax.min.js")},function(c){return c.endsWith("babel-core/browser.js")||c.endsWith("system.src.js")||c.includes("systemjs-plugin-babel")}];we.pendingConfigs=[];we.configInitialized=!1;we.prepareCodeForCustomCompile=RR;we.prepareCodeForCustomCompile=RR;we.prepareTranslatedCodeForSetterCapture=SR;we.prepareTranslatedCodeForSetterCapture=
SR;we.wrapModuleLoad=sG;we.wrapModuleLoad=sG;we.unwrapModuleLoad=vK;we.unwrapModuleLoad=vK;we.getExceptions=PR;we.getExceptions=PR;we.setExceptions=QR;we.setExceptions=QR;we.instrumentSourceOfEsmModuleLoad=tK;we.instrumentSourceOfEsmModuleLoad=tK;we.instrumentSourceOfGlobalModuleLoad=uK;we.instrumentSourceOfGlobalModuleLoad=uK;var hh=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");hh.fetchResource=function(c,h){var n=this,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:b=
n;d=25E4;k=b.resource(h.name);a=b.get("@system-env").node&&!k.isNodeJSFileResource;if(!a){R.jumpTo(2);break}return R.yield(Jpa(h.name),3);case 3:k=R.yieldResult;case 2:if(!k)return R.return(c(h));if(hh.jsFileHashMap||b.get("@system-env").node){R.jumpTo(4);break}r=hh;return R.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:r.jsFileHashMap=R.yieldResult;case 4:v=b.useModuleTranslationCache;y=b.global.indexedDB;A=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!v||!y||!A){R.jumpTo(6);break}return R.yield(A.fetchStoredModuleSource(h.name),7);case 7:if((E=R.yieldResult)&&(hh.jsFileHashMap[h.name.replace(b.baseURL,"/")]==E.hash||h.name.includes("jspm")))return h.metadata.instrument=!1,R.return(E.source);case 6:if(k.isResource&&k.ext()&&k.ext().startsWith("css"))return R.return("");R.setCatchFinallyBlocks(8);if(!k.isResource){F=k;R.jumpTo(10);break}return R.yield(k.read(),11);case 11:F=R.yieldResult;case 10:f=F;R.leaveTryBlock(9);break;case 8:l=H=R.enterCatchBlock();
case 9:if(!l||!b.get("@system-env").browser){R.jumpTo(12);break}J=k.url.startsWith("http");O=!k.url.startsWith(document.location.origin);if(!J||!O){R.jumpTo(12);break}R.setCatchFinallyBlocks(14);return R.yield(k.makeProxied().read(),16);case 16:f=R.yieldResult;l=null;R.leaveTryBlock(12);break;case 14:R.enterCatchBlock();case 12:if(l)throw l;if(!a){R.jumpTo(17);break}L=f.headers||{};Y=L._headers;S=$jscomp.makeIterator(Y&&Y["content-encoding"]||[]);ea=S.next().value;return"br"==ea?(qa=hh.Buffer,Fa=
qa.from,K=hh.brotli,Z=K.decompress,R.yield(f.buffer(),21)):R.yield(f.text(),20);case 20:f=R.yieldResult;R.jumpTo(17);break;case 21:f=Fa.call(qa,Z.call(K,R.yieldResult)).toString();case 17:if(!(f.length>d&&$world)||b._loadingIndicator){R.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator",{label:"loading module",status:h.name.replace(b.baseURL,"")});return R.yield(hh.promise.delay(500),23);case 23:if(!b._loadingIndicator){R.jumpTo(22);break}return R.yield(b._loadingIndicator.whenRendered(),
22);case 22:return R.return(f)}})};hh.livelyProtocol=function(c,h){var n=h.match(hh.livelyURLRe);if(!n)return c(h);c=$jscomp.makeIterator(n);c.next();c.next();var b=c.next().value;return{read:function(){var d="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(d?d.textString:"/*Could not locate "+b+"*/")},write:function(d){var k="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!k)return Promise.reject("Could not save morph "+b);k.textString=d;return Promise.resolve(this)}}};
hh.wrapResource=wK;hh.unwrapResource=TR;hh.resource=Xb;hh.Resource=Eg;hh.installHook=gf;hh.removeHook=If;hh.isHookInstalled=Pg;hh.brotli=hh.brotli||void 0;if(System.get("@system-env").node){var Jpa=System._nodeRequire("node-fetch");hh.brotli=System._nodeRequire("brotli")}hh.jsFileHashMap=hh.jsFileHashMap||void 0;hh.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;hh.wrapResource=wK;hh.wrapResource=wK;hh.unwrapResource=TR;hh.unwrapResource=TR;var cC=function(){return hh.Resource.apply(this,arguments)||this};
$jscomp.inherits(cC,hh.Resource);cC.prototype.read=function(){var c=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=c.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(h);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+h+"*/"))})};cC.prototype.write=function(c){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){n=h.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return d.return(Promise.reject("Could not save morph "+
n));b.textString=c;return d.return(Promise.resolve(h))})};cC.prototype.exists=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return("undefined"!==typeof $world&&$world.getMorphWithId(c.morphId))})};cC.prototype.remove=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){"undefined"!==typeof $world&&$world.getMorphWithId(c.morphId).remove();return h.return(!0)})};$jscomp.global.Object.defineProperties(cC.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var c=this.url.match(hh.livelyURLRe);c=$jscomp.makeIterator(c);c.next();c.next();return c.next().value}}});hh.LivelyResource=cC;var SW={name:"lively.modules",matches:function(c){return c.match(hh.livelyURLRe)},resourceClass:hh.LivelyResource};hh.resourceExtension=SW;hh.resourceExtension=SW;hh.resourceExtension=SW;hh.registerExtension=qd;hh.promise=Hg;hh.registerExtension(hh.resourceExtension);var Od=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
Od.wrapModuleResolution=xK;Od.unwrapModuleResolution=yK;Od.livelySystemEnv=zK;Od.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};Od.nameOfSystem=function(c){return Object.keys(Od.systems()).detect(function(h){return Od.systems()[h]===c})};Od.getSystem=WA;Od.removeSystem=XA;Od.makeSystem=function(c){return Od.prepareSystem(new System.constructor,c)};Od.prepareSystem=AK;Od.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(c,h){var n=h.split("=");h=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));c[h]=n;return c},{}):{}};Od.preNormalize=function(c,h,n){".."===h&&(h="../index.js");h=h.replace(Od.doubleSlashRe,function(f){return":"===f[0]?f:f[0]+"/"});var b=c.get("@lively-env").packageRegistry;if(b){var d=n&&b.findPackageHavingURL(n);if(d){var k=d.map,a=d.url;if(k=k&&k[h]||c.map[h])"object"===typeof k&&(k=Od.normalize_doMapWithObject(k,
d,c)),"string"===typeof k&&""!==k&&(h=k),h.startsWith(".")&&(h=Od.urlResolve(Od.join(a,h)))}}b&&(c=b.resolvePath(h,n))&&(c.endsWith("/")&&!h.endsWith("/")&&(c=c.slice(0,-1)),!c.endsWith("/")&&h.endsWith("/")&&(c+="/"),h=c);return h};Od.postNormalize=function(c,h,n){n=h.replace(Od.jsExtRe,"");if(h.endsWith("/"))return h;var b=c.get("@lively-env").packageRegistry;if(b){if(c=b.findPackageWithURL(n))return c=(c.main||"index.js").replace(Od.dotSlashStartRe,""),h=n.replace(Od.trailingSlashRe,"")+"/"+c}else if(n in
c.packages&&(c=c.packages[n].main))return h=n.replace(Od.trailingSlashRe,"")+"/"+c.replace(Od.dotSlashStartRe,"");return(n=h.match(Od.jsonJsExtRe))?n[1]:h};Od.checkExistence=function(c,h){var n,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){h._fileCheckMap=h._fileCheckMap||{};if(c in h._fileCheckMap)return k.return(h._fileCheckMap[c]);if((n=h._livelyModulesTranslationCache)&&n.fetchStoredModuleSource(c))return k.return(h._fileCheckMap[c]=!0);b=h._fileCheckMap;
d=c;return k.yield(Od.resource(c).exists(),2)}return k.return(b[d]=k.yieldResult)})};Od.normalizeHook=function(c,h,n,b){var d=this,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(n&&"cjs"==h)return y.return("cjs");k=d;a=Od.preNormalize(k,h,n);return y.yield(c(a,n,b),2);case 2:f=y.yieldResult;l=Od.postNormalize(k,f||a,!1);r=l.startsWith("file:");k.debug&&console.log("[normalize] "+h+" => "+l);if(Od.jsExtRe.test(h)||Od.jsxExtRe.test(h)||Od.jsonExtRe.test(l)||
Od.nodeModRe.test(l)||Od.nodeExtRe.test(l)||k.loads&&k.loads[l]||!Od.jsExtRe.test(l)){y.jumpTo(3);break}return y.yield(Od.checkExistence(l,k),4);case 4:if(y.yieldResult)return y.return(l);v=l.replace(".js","/index.js");return y.yield(Od.checkExistence(v,k),5);case 5:return y.yieldResult||!r?y.return(v):y.return(l.replace(".js","/index.node"));case 3:return Od.jsxJsExtRe.test(l)&&(l=l.replace(".jsx.js",".jsx")),y.return(l)}})};Od.decanonicalizeHook=function(c,h,n,b){if(h&&h.endsWith("!cjs")){h=h.replace("!cjs",
"");var d="!cjs"}var k=Od.preNormalize(this,h,n);c=c(k,n,b);c=Od.postNormalize(this,c,!0);d&&(c+=d);this.debug&&console.log("[normalizeSync] "+h+" => "+c);return c};Od.locateHook=function(c,h){var n,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return n=$jscomp.makeIterator(h.name.split("!")),b=n.next().value,n.next(),h.name=b,k.yield(c(h),2);d=k.yieldResult;return k.return(d)})};Od.normalize_doMapWithObject=function(c,h,n){h=n.get(h.map["@env"]||"@system-env");
var b;for(b in c){var d=(n="~"==b[0])?b.substr(1):b,k=h;for(d=d.split(".");d.length;)k=k[d.shift()];if(!n&&k||n&&!k){var a=c[b];break}}if(a&&"string"!==typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};Od.normalize_packageOfURL=function(c,h){var n=Object.keys(h.packages||{}).map(function(b){return 0===c.indexOf(b)?{url:b,penalty:c.slice(b.length).length}:null}).filter(function(b){return!!b});return(h=(n=n.length?n.reduce(function(b,d){return b.penalty>
d.penalty?d:b}).url:null)&&h.packages[n])?{systemPackage:h,packageURL:n}:null};Od.newModule_volatile=function(c,h){var n=Object.freeze;Object.freeze=function(b){return b};c=c(h);Object.freeze=n;return c};Od.printSystemConfig=BK;Od.instantiate_triggerOnLoadCallbacks=function(c,h){var n=this;return c(h).then(function(b){var d={};Od.promise.waitFor(6E4,function(){return n.get(h.name)},d).then(function(k){if(k===d)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+h.name+" timed out");
else{k=h.name;for(var a=Od.classHolder.module(n,k),f=n.get("@lively-env").onLoadCallbacks,l=f.length;l--;){var r=f[l],v=r.moduleName,y=r.callback;if((r.resolved?v:n.decanonicalize(v))===k){f.splice(l,1);try{y(a)}catch(A){console.error(A)}}}Od.emit("lively.modules/moduleloaded",{module:h.name},Date.now(),n);n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}});return b})};Od.whenLoaded=CK;Od.loadedModules=DK;Od.knownModuleNames=EK;Od.searchLoadedModules=UR;Od.arr=Lf;Od.obj=
dg;Od.promise=Hg;Od.removeHook=If;Od.installHook=gf;Od.isHookInstalled=Pg;Od.classHolder=Cx;Od.isNode=System.get("@system-env").node;Od.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Od.defaultOptions={notificationLimit:null};Od.wrapModuleResolution=xK;Od.wrapModuleResolution=xK;Od.unwrapModuleResolution=yK;Od.unwrapModuleResolution=yK;Od.wrapModuleLoad=sG;Od.wrapResource=wK;Od.emit=Kk;Od.join=jI;Od.urlResolve=nt;Od.resource=Xb;Od.dotSlashStartRe=
/^\.?\//;Od.trailingSlashRe=/\/$/;Od.jsExtRe=/\.js$/;Od.jsxExtRe=/\.jsx$/;Od.nodeExtRe=/\.node$/;Od.jsonExtRe=/\.json$/;Od.jsonJsExtRe=/(.*\.json)\.js$/i;Od.jsxJsExtRe=/(.*\.jsx)\.js$/i;Od.doubleSlashRe=/.\/{2,}/g;Od.nodeModRe=/@node.*/;Od.whenLoaded=CK;Od.whenLoaded=CK;Od.getSystem=WA;Od.getSystem=WA;Od.removeSystem=XA;Od.removeSystem=XA;Od.prepareSystem=AK;Od.prepareSystem=AK;Od.printSystemConfig=BK;Od.printSystemConfig=BK;Od.livelySystemEnv=zK;Od.livelySystemEnv=zK;Od.loadedModules=DK;Od.loadedModules=
DK;Od.knownModuleNames=EK;Od.knownModuleNames=EK;Od.searchLoadedModules=UR;Od.searchLoadedModules=UR;var Wg=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");Wg.isAbsolute=function(c){return c.startsWith("/")||c.startsWith("http:")||c.startsWith("https:")||c.startsWith("file:")||c.match(Wg.urlStartRe)};Wg.ensureResource=function(c){return c.isResource?c:Wg.resource(c)};Wg.semver=YH;Wg.arr=Lf;Wg.obj=dg;Wg.promise=Hg;Wg.getPackage=Wr;Wg.Package=sj;Wg.resource=Xb;Wg.isURL=
Xm;Wg.classHolder=Cx;Wg.urlStartRe=/^[a-z\.-_\+]+:/i;var Xi=function(c,h){h=void 0===h?{}:h;this.System=c;this.packageBaseDirs=h.packageBaseDirs||[];this.devPackageDirs=h.devPackageDirs||[];this.individualPackageDirs=h.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};Xi.ofSystem=function(c){var h=c.get("@lively-env").packageRegistry;h||(h=c["__lively.modules__packageRegistry"]=new this(c));return h};Xi.forDirectory=function(c,h){return new this(c,{packageBaseDirs:[Wg.ensureResource(h)]})};
Xi.fromJSON=function(c,h){return(new this(c)).fromJSON(h)};Xi.prototype.resetByURL=function(){this._byURL=null};Xi.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};Xi.prototype.toJSON=function(){function c(v){v=v.url;return v.startsWith(h.baseURL)?v.slice(h.baseURL.length).replace(/^\//,""):v}var h=this.System,n=this.packageMap,b=this.individualPackageDirs,d=this.devPackageDirs,k=this.packageBaseDirs,a={},f;for(f in n){var l=n[f];a[f]={};a[f].latest=l.latest;a[f].versions={};for(var r in l.versions)a[f].versions[r]=
l.versions[r].toJSON()}return{packageMap:a,individualPackageDirs:b.map(c),devPackageDirs:d.map(c),packageBaseDirs:k.map(c)}};Xi.prototype.fromJSON=function(c){function h(v){return Wg.isURL(v)?Wg.resource(v):Wg.resource(b.baseURL).join(v)}var n={},b=this.System,d=Wg.resource(b.baseURL),k;for(k in c.packageMap){var a=c.packageMap[k];n[k]={};n[k].latest=a.latest;n[k].versions={};for(var f in a.versions){var l=a.versions[f],r=l.url;Wg.isAbsolute(r)||(r=d.join(r).url);l=Wg.Package.fromJSON(b,Object.assign({},
l,{url:r}));n[k].versions[f]=l}}this.packageMap=n;this.individualPackageDirs=c.individualPackageDirs.map(h);this.devPackageDirs=c.devPackageDirs.map(h);this.packageBaseDirs=c.packageBaseDirs.map(h);this.resetByURL();Wg.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};Xi.prototype.updateFromJSON=function(c){var h=this.packageMap,n;for(n in c.packageMap){var b=c.packageMap[n];h[n]||(h[n]={});h[n].latest?Wg.semver.gt(b.latest,h[n].latest)&&(h[n].latest=b.latest):h[n].latest;h[n].versions||
(h[n].versions={});var d=this.System,k=Wg.resource(d.baseURL),a;for(a in b.versions){var f=b.versions[a],l=f.url;Wg.isAbsolute(l)||(l=k.join(l).url);f=new Wg.Package.fromJSON(d,Object.assign({},f,{url:l}));h[n].versions[a]=f}}this.resetByURL();Wg.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};Xi.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};Xi.prototype.isReady=function(){return!this._readyPromise};Xi.prototype.withPackagesDo=function(c){for(var h in this.packageMap){var n=
this.packageMap[h].versions,b;for(b in n)c(n[b])}};Xi.prototype.findPackage=function(c){for(var h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n){var d=n[b];if(c(d))return d}}return null};Xi.prototype.filterPackages=function(c){var h=[];this.withPackagesDo(function(n){return c(n)&&h.push(n)});return h};Xi.prototype.allPackages=function(){var c=[],h;for(h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n)c.push(n[b])}return c};Xi.prototype.sortPackagesByVersion=
function(c){return c.sort(function(h,n){return Wg.semver.compare(h.version,n.version,!0)})};Xi.prototype.matches=function(c,h,n){var b=c.version;return c.name!==h?!1:!n||Wg.semver.validRange(b||"",!0)&&Wg.semver.satisfies(b,n,!0)?!0:!1};Xi.prototype.coversDirectory=function(c){c=Wg.ensureResource(c).asDirectory();var h=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(d){return d.equals(c)}))return"individualPackageDirs";if(n.some(function(d){return d.equals(c)}))return"devPackageDirs";
var b=c.parent().parent();return h.some(function(d){return d.equals(b)})?this.allPackages().find(function(d){return Wg.ensureResource(d.url).equals(c)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};Xi.prototype.lookup=function(c,h){var n=this,b=this.packageMap[c];if(!b)return null;if(!h||"latest"===h)return b.versions[b.latest];if(!Wg.semver.validRange(h,!0))throw Error("PackageRegistry>>lookup of "+c+": Invalid version - "+h);b=Wg.obj.values(b.versions).filter(function(d){return n.matches(d,
c,h)});return 1>=b.length?b[0]:Wg.arr.last(this.sortPackagesByVersion(b))};Xi.prototype.findPackageDependency=function(c,h,n){n||(n=c.dependencies[h]||c.devDependencies[h]);Wg.semver.validRange(n,!0)||(n=null);return this.lookup(h,n)};Xi.prototype.findPackageWithURL=function(c){c.isResource&&(c=c.url);c.endsWith("/")&&(c=c.slice(0,-1));return this.byURL[c]};Xi.prototype.findPackageHavingURL=function(c){c.isResource&&(c=c.url);c.endsWith("/")&&(c=c.slice(0,-1));var h=Infinity,n=null,b=this.byURL,d;
for(d in b)if(0===c.indexOf(d)){var k=c.slice(d.length).length;k>=h||(h=k,n=b[d])}return n};Xi.prototype.findPackageForPath=function(c,h){if(Wg.isAbsolute(c))return this.findPackageHavingURL(c);if(c.startsWith("."))return null;c=$jscomp.makeIterator(c.split("/")).next().value;if(!c)return null;var n=c.indexOf("@");if(-1<n){var b=c.slice(n+1);c=c.slice(0,n)}return!b&&h?this.findPackageDependency(h,c):this.lookup(c,b)};Xi.prototype.resolvePath=function(c,h){if(Wg.isAbsolute(c))return c;var n=h&&h.isPackage||
null;if(!n&&h){if(c.startsWith("."))return h=Wg.resource(h),h.isDirectory()||(h=h.parent()),h.join(c).withRelativePartsResolved().url;n=this.findPackageHavingURL(h)}h=this.findPackageForPath(c,n);if(!h)return null;n=c.indexOf("/");return(c=-1===n||n===c.length-1?"":c.slice(n))?Wg.resource(h.url).join(c).url:h.url};Xi.prototype.update=function(){var c=this,h,n,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:if(!c.isReady())return R.return(c.whenReady().then(function(){return c.update()}));
h=Wg.promise.deferred();c._readyPromise=h.promise;c.packageBaseDirs=c.packageBaseDirs.map(function(U){return U.asDirectory()});c.individualPackageDirs=c.individualPackageDirs.map(function(U){return U.asDirectory()});c.devPackageDirs=c.devPackageDirs.map(function(U){return U.asDirectory()});n={};R.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(c.packageBaseDirs);d=b.next();case 5:if(d.done){R.jumpTo(7);break}k=d.value;a=$jscomp;f=a.makeIterator;return R.yield(k.dirList(1),8);case 8:l=f.call(a,R.yieldResult),
r=l.next();case 9:if(r.done){d=b.next();R.jumpTo(5);break}v=r.value;y=$jscomp;A=y.makeIterator;return R.yield(v.dirList(1),12);case 12:E=A.call(y,R.yieldResult.filter(function(U){return U.isDirectory()})),F=E.next();case 13:if(F.done){r=l.next();R.jumpTo(9);break}H=F.value;return R.yield(c._discoverPackagesIn(H,n,"packageCollectionDirs"),16);case 16:n=R.yieldResult;F=E.next();R.jumpTo(13);break;case 7:J=$jscomp.makeIterator(c.individualPackageDirs),d=J.next();case 17:if(d.done){R.jumpTo(19);break}O=
d.value;return R.yield(c._discoverPackagesIn(O,n,"individualPackageDirs"),20);case 20:n=R.yieldResult;d=J.next();R.jumpTo(17);break;case 19:L=$jscomp.makeIterator(c.devPackageDirs),d=L.next();case 21:if(d.done){R.jumpTo(23);break}Y=d.value;return R.yield(c._discoverPackagesIn(Y,n,"devPackageDirs"),24);case 24:n=R.yieldResult;d=L.next();R.jumpTo(21);break;case 23:for(S in n)ea=n[S],qa=ea.pkg,Fa=ea.config,K=ea.covered,c.System.debug&&console.log("[PackageRegistry] Adding discovered package "+S+" (from "+
K+")"),c._addPackageWithConfig(qa,Fa,S+"/",K);c._updateLatestPackages();h.resolve();case 3:R.enterFinallyBlock();c._readyPromise=null;c.resetByURL();Wg.classHolder.ModulePackageMapping.forSystem(c.System).clearCache();R.leaveFinallyBlock(4);break;case 2:Z=R.enterCatchBlock();h.reject(Z);R.jumpTo(3);break;case 4:return R.return(c)}})};Xi.prototype.addPackageAt=function(c,h,n){h=void 0===h?"individualPackageDirs":h;var b=this,d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress){d=c.isResource?c.url:c;d.endsWith("/")&&d.slice(0,-1);if(b.byURL[d])throw Error("package in "+d+" already added to registry");return y.yield(b._discoverPackagesIn(Wg.ensureResource(c).asDirectory(),{},void 0,n),2)}k=y.yieldResult;for(a in k)b.byURL[a]||(f=k[a],l=f.pkg,r=f.config,v=b._addPackageDir(a,h,!0),b._addPackageWithConfig(l,r,a+"/",v));b.resetByURL();Wg.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return y.return(b.findPackageWithURL(c))})};
Xi.prototype.removePackage=function(c,h){h=void 0===h?!0:h;var n=c.name,b=c.version,d=Wg.ensureResource(c.url),k=this.coversDirectory(d);"devPackageDirs"===k?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(d)}):"individualPackageDirs"===k&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(d)}));k=this.packageMap;k[n]&&(delete k[n].versions[b],0===Object.keys(k[n].versions).length&&delete k[n]);this.resetByURL();Wg.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
h&&this._updateLatestPackages(c.name)};Xi.prototype.updateNameAndVersionOf=function(c,h,n,b,d){var k=this.packageMap;k[h]?k[h].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+n+" of "+h+" found in registry ("+c.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+h+"@"+n+" not found in registry ("+c.url+")");this._addToPackageMap(c,b,d);k[h]&&k[h].versions[n]&&(delete k[h].versions[n],0===Object.keys(k[h].versions).length&&delete k[h]);this._updateLatestPackages(c.name)};
Xi.prototype._updateLatestPackages=function(c){var h=this.packageMap;if(c&&h[c])h[c].latest=Wg.arr.last(Wg.semver.sort(Object.keys(h[c].versions),!0));else for(var n in h)h[n].latest=Wg.arr.last(Wg.semver.sort(Object.keys(h[n].versions),!0))};Xi.prototype._discoverPackagesIn=function(c,h,n,b){b=void 0===b?null:b;var d=this,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!c.isDirectory())return y.return(h);k=c.asFile().url;if(h.hasOwnProperty(k))return y.return(h);
y.setCatchFinallyBlocks(2);a=b&&b[k]||new Wg.Package(d.System,k);return y.yield(a.tryToLoadPackageConfig(),4)}if(2!=y.nextAddress)return f=y.yieldResult,a.setConfig(f),h[k]={pkg:a,config:f,covered:n},d.System.debug&&(l=f,r=l.name,v=l.version,console.log("[lively.modules] package "+r+"@"+v+" discovered in "+c.url)),y.return(h);y.enterCatchBlock();return y.return(h)})};Xi.prototype._addToPackageMap=function(c,h,n,b){if(!h)throw Error("Cannot add package without name");n||(n="0.0.0");var d=this.packageMap;
h=d[h]||(d[h]={versions:{},latest:null});if(h.versions[n])if(d="Redefining version "+n+" of package "+c.url,void 0===b||b)console.warn(d);else throw Error(d+" not allowed");h.versions[n]=c};Xi.prototype._addPackageWithConfig=function(c,h,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);c.registerWithConfig(h);this._addToPackageMap(c,c.name,c.version);return c};Xi.prototype._addPackageDir=function(c,h,n){h=void 0===h?"individualPackageDirs":h;n=void 0===n?!0:n;c=Wg.ensureResource(c).asDirectory();
if(("packageCollectionDirs"===h||"maybe packageCollectionDirs"===h)&&(this.coversDirectory(c)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";c=this[h].concat(c);this[h]=n?Wg.arr.uniqBy(c,function(b,d){return b.equals(d)}):c;return h};$jscomp.global.Object.defineProperties(Xi.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var c=$jscomp.makeIterator(this.allPackages()),h=c.next();!h.done;h=c.next())h=h.value,this._byURL[h.url]=
h}return this._byURL}}});Wg.PackageRegistry=Xi;var Qn=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");Qn.arr=Lf;Qn.obj=dg;Qn.subscribe=gt;Qn.unsubscribe=kp;Qn.module=zn;var oo=function(c){this.System=c;this.subscribeToSystemChanges()};oo.forSystem=function(c){this._forSystemMap||(this._forSystemMap=new WeakMap);var h=this._forSystemMap.get(c);if(h)return h;h=new this(c);this._forSystemMap.set(c,h);return h};oo.run=function(c,h){c=void 0===c?System:c;return this.forSystem(c).systemExports(h)};
oo.findExportOfValue=function(c,h){h=void 0===h?System:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(n.run(h),2);b=d.yieldResult;return d.return(b.find(function(k){var a=k.local;k=Qn.module(h,k.moduleId);k=k.recorder||h.get(k.id)||{};try{return k[a]===c}catch(f){return!1}}))})};oo.prototype.subscribeToSystemChanges=function(){var c=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[Qn.subscribe("lively.modules/moduleloaded",
function(n){return c.clearCacheFor(n.module)},h),Qn.subscribe("lively.modules/modulechanged",function(n){return c.clearCacheFor(n.module)},h),Qn.subscribe("lively.vm/doitresult",function(n){return c.clearCacheFor(n.targetModule)},h)]}};oo.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var c=this.System;Qn.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],c);Qn.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],c);Qn.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],c);this._notificationHandlers=null}};oo.prototype.clearCacheFor=function(c){this.exportByModuleCache[c]=null};oo.prototype.systemExports=function(c){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.rawExportsByModule(c),2);n=b.yieldResult;Object.keys(n).forEach(function(d){return h.resolveExportsOfModule(d,n)});return b.return(Qn.arr.flatmap(Object.keys(n),function(d){return n[d]?n[d].resolvedExports||n[d].rawExports:
[]}))})};oo.prototype.rawExportsByModule=function(c){var h=this,n,b,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=c||{},n=h.System,b=n.get("@lively-env")||{},d=Object.keys(b.loadedModules||{}),k={},a=function(l){1>l%50&&c.progress.step&&c.progress.step("Scanning ...",l/d.length)},f.yield(Promise.all(d.map(function(l,r){c.progress&&a(r);return h.rawExportsOfModule(l,c,k).then(function(v){return v?k[l]=v:null})})),2)):f.return(k)})};oo.prototype.rawExportsOfModule=
function(c,h){h=void 0===h?{}:h;var n=this,b,d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Z){switch(Z.nextAddress){case 1:b=n;d=b.System;k=b.exportByModuleCache;a=h.excludedPackages||[];f=h.excludedURLs||(h.excludedURLs=a.filter(function(R){return"string"===typeof R}));l=h.excludeFns||(h.excludeFns=a.filter(function(R){return"function"===typeof R}));r=h.excludedPackageURLs||(h.excludedPackageURLs=f.concat(f.map(function(R){return d.decanonicalize(R.replace(/\/?$/,
"/")).replace(/\/$/,"")})));v=h.livelyEnv||(h.livelyEnv=d.get("@lively-env")||{});h.modes||(h.modes=Object.keys(v.loadedModules||{}));if(k[c])return y=k[c].rawExports,Z.return(r.includes(y.packageURL)||l.some(function(R){return R(y.packageURL)})?null:k[c]);A=Qn.module(d,c);E=A.pathInPackage();H=(F=A.package())&&F.main&&E===F.main;J=F?F.url:"";O=F?F.name:"";L=F?F.version:"";Y={moduleId:c,isMain:H,pathInPackage:E,packageName:O,packageURL:J,packageVersion:L,exports:[]};if(r.includes(J)||l.some(function(R){return R(J)}))return Z.return(null);
Z.setCatchFinallyBlocks(2);S=A.format();return["register","es6","esm"].includes(S)?(Fa=Y,Z.yield(A.exports(),7)):Z.yield(A.load(),6);case 6:ea=Z.yieldResult;Y.exports=[];for(qa in ea)"__useDefault"!==qa&&"default"!==qa&&Y.exports.push({exported:qa,local:qa,type:"id"});Z.jumpTo(5);break;case 7:Fa.exports=Z.yieldResult;case 5:Z.leaveTryBlock(3);break;case 2:K=Z.enterCatchBlock(),Y.error=K;case 3:return Z.return(k[c]={rawExports:Y})}})};oo.prototype.resolveExportsOfModule=function(c,h,n){var b=this;
n=void 0===n?{}:n;if(!n[c]){n[c]=!0;var d=h[c];if(d&&!d.resolvedExports){var k=this.System,a=Qn.obj.select(d.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));d.resolvedExports=Qn.arr.flatmap(d.rawExports.exports,function(f){var l=f.type,r=f.exported,v=f.local,y=f.fromModule;if("all"!==l)return[Object.assign({},a,{type:l,exported:r,local:v,fromModule:y})];f=k.decanonicalize(y,c);b.resolveExportsOfModule(f,h,n);return(h[f]&&h[f].resolvedExports||[]).map(function(A){return Object.assign({},
a,{type:A.type,exported:A.exported,local:A.local,fromModule:A.fromModule||y})})});n[c]=!1}}};$jscomp.global.Object.defineProperties(oo.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Ca("bI",oo);Qn.ExportLookup=oo;Qn.default=oo;var Ym=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");Ym.buildPackageMap=tG;Ym.resolvePackageDependencies=FK;Ym.dependencyGraph=GK;Ym.arr=Lf;Ym.fun=gn;
Ym.promise=Hg;Ym.obj=dg;Ym.resource=Xb;Ym.buildPackageMap=tG;Ym.buildPackageMap=tG;Ym.resolvePackageDependencies=FK;Ym.resolvePackageDependencies=FK;Ym.dependencyGraph=GK;Ym.dependencyGraph=GK;var tO=Object.freeze({__proto__:null,buildPackageMap:tG,resolvePackageDependencies:FK,dependencyGraph:GK}),Rn=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");Rn.arr=Lf;Rn.unsubscribe=kp;Rn.subscribe=gt;Rn.knownModuleNames=EK;Rn.classHolder=Cx;var Cs=function(c){this.System=
c;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};Cs.forSystem=function(c){var h=c["__lively.modules__modulePackageMapCache"];if(h)return h;h=new this(c);return c["__lively.modules__modulePackageMapCache"]=h};Cs.prototype.subscribeToSystemChanges=function(){var c=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[Rn.subscribe("lively.modules/moduleloaded",function(n){return c.addModuleIdToCache(n.module)},h),Rn.subscribe("lively.modules/moduleunloaded",
function(n){return c.removeModuleFromCache(n.module)},h),Rn.subscribe("lively.modules/packageregistered",function(n){return c.clearCache()},h),Rn.subscribe("lively.modules/packageremoved",function(n){return c.clearCache()},h)]}};Cs.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var c=this.System;Rn.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],c);Rn.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],c);Rn.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],c);Rn.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],c);this._notificationHandlers=null}};Cs.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};Cs.prototype.ensureCache=function(){var c=this.System,h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var d=Rn.classHolder.Package.allPackageURLs(c),
k=0;k<d.length;k++)h[d[k]]=[];c=Rn.knownModuleNames(c);for(k=0;k<c.length;k++){for(var a=c[k],f=void 0,l=0;l<d.length;l++){var r=d[l];a.startsWith(r)&&(!f||f.length<r.length)&&(f=r)}f?(h[f].push(a),n[a]=f):b[a]={}}this._cacheInitialized=!0;return this};Cs.prototype.addModuleIdToCache=function(c){this.ensureCache();var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[c])return n[c];if(b[c])return null;for(var d=Object.keys(h),k,a=0;a<d.length;a++){var f=d[a];c.startsWith(f)&&
(!k||k.length<f.length)&&(k=f)}if(k)return(h[k]||(h[k]=[])).push(c),n[c]=k;b[c]={};return null};Cs.prototype.removeModuleFromCache=function(c){if(this._cacheInitialized){var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(c))delete b[c];else if(b=n[c])delete n[c],h[b]&&Rn.arr.remove(h[b],c)}};Cs.prototype.getPackageURLForModuleId=function(c){return this.modulesToPackage[c]||this.addModuleIdToCache(c)};Cs.prototype.getModuleIdsForPackageURL=function(c){this.ensureCache();
return this.packageToModule[c]||[]};Rn.ModulePackageMapping=Cs;Rn.default=Cs;var bd=lively.FreezerRuntime.recorderFor("lively.modules/index.js");bd.changeSystem=HK;bd.wrapModuleResolution=IK;bd.unwrapModuleResolution=JK;bd.loadedModules=KK;bd.module=uG;bd.isModuleLoaded=LK;bd.doesModuleExist=MK;bd.printSystemConfig=NK;bd.whenLoaded=OK;bd.importPackage=PK;bd.registerPackage=QK;bd.removePackage=RK;bd.reloadPackage=SK;bd.getPackages=TK;bd.getPackage=UK;bd.getPackageOfModule=VK;bd.ensurePackage=WK;bd.applyPackageConfig=
XK;bd.lookupPackage=YK;bd.moduleSourceChange=ZK;bd.requireMap=$K;bd.isHookInstalled=aL;bd.installHook=bL;bd.removeHook=cL;bd.wrapModuleLoad=dL;bd.unwrapModuleLoad=eL;bd.getSystem=WA;bd.removeSystem=XA;bd.prepareSystem=AK;bd._printSystemConfig=BK;bd._unwrapModuleResolution=yK;bd._wrapModuleResolution=xK;bd._whenLoaded=CK;bd._module=zn;bd._doesModuleExist=sK;bd._isModuleLoaded=Uy;bd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;bd.defaultSystem=
bd.defaultSystem||bd.prepareSystem(bd.GLOBAL.System);var TW=bd.defaultSystem;bd.System=TW;bd.defaultSystem=TW;bd.getSystem=WA;bd.getSystem=WA;bd.removeSystem=XA;bd.removeSystem=XA;bd.loadedModules=KK;bd.loadedModules=KK;bd.printSystemConfig=NK;bd.printSystemConfig=NK;bd.whenLoaded=OK;bd.whenLoaded=OK;bd.changeSystem=HK;bd.changeSystem=HK;bd.module=uG;bd.module=uG;bd.doesModuleExist=MK;bd.doesModuleExist=MK;bd.isModuleLoaded=LK;bd.isModuleLoaded=LK;bd.unwrapModuleResolution=JK;bd.unwrapModuleResolution=
JK;bd.wrapModuleResolution=IK;bd.wrapModuleResolution=IK;bd.Package=sj;bd._getPackage=Wr;bd._ensurePackage=pt;bd.getPackageSpecs=VA;bd._applyPackageConfig=Xr;bd._importPackage=Gh;bd._removePackage=dk;bd._reloadPackage=Hj;bd._registerPackage=yn;bd._lookupPackage=ot;bd.importPackage=PK;bd.importPackage=PK;bd.registerPackage=QK;bd.registerPackage=QK;bd.removePackage=RK;bd.removePackage=RK;bd.reloadPackage=SK;bd.reloadPackage=SK;bd.getPackages=TK;bd.getPackages=TK;bd.getPackage=UK;bd.getPackage=UK;bd.getPackageOfModule=
VK;bd.getPackageOfModule=VK;bd.ensurePackage=WK;bd.ensurePackage=WK;bd.applyPackageConfig=XK;bd.applyPackageConfig=XK;bd.lookupPackage=YK;bd.lookupPackage=YK;bd.PackageRegistry=Xi;bd.PackageRegistry=Xi;bd.PackageRegistry=Xi;bd._moduleSourceChange=Yg;bd.moduleSourceChange=ZK;bd.moduleSourceChange=ZK;bd.computeRequireMap=Gj;bd.requireMap=$K;bd.requireMap=$K;bd._isHookInstalled=Pg;bd._installHook=gf;bd._removeHook=If;bd.isHookInstalled=aL;bd.isHookInstalled=aL;bd.installHook=bL;bd.installHook=bL;bd.removeHook=
cL;bd.removeHook=cL;bd._wrapModuleLoad=sG;bd._unwrapModuleLoad=vK;bd.wrapModuleLoad=dL;bd.wrapModuleLoad=dL;bd.unwrapModuleLoad=eL;bd.unwrapModuleLoad=eL;bd.default=oo;bd.ExportLookup=oo;bd.cjs=tO;bd.cjs=tO;bd.cjs=tO;bd.default=YH;bd.semver=YH;bd.ImportInjector=Qv;bd.scripting=bd.defaultSystem._scripting={module:bd._module,ensurePackage:bd._ensurePackage,registerPackage:bd._registerPackage,importPackage:bd._importPackage,lookupPackage:bd._lookupPackage,ImportInjector:bd.ImportInjector};bd.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";bd.classRuntime=QE;bd.defaultSystem.global[bd.defaultClassToFunctionConverterName]=bd.classRuntime.initializeClass;bd.classHolder=Cx;bd.ModulePackageMapping=Cs;bd.classHolder.ModulePackageMapping=bd.ModulePackageMapping;bd.classHolder.Package=bd.Package;bd.classHolder.PackageRegistry=bd.PackageRegistry;var UW=Ca("bH",bd.scripting);bd.scripting=UW;bd.scripting=UW;var uO=Object.freeze({__proto__:null,System:TW,getSystem:WA,removeSystem:XA,loadedModules:KK,printSystemConfig:NK,
whenLoaded:OK,changeSystem:HK,module:uG,doesModuleExist:MK,isModuleLoaded:LK,unwrapModuleResolution:JK,wrapModuleResolution:IK,importPackage:PK,registerPackage:QK,removePackage:RK,reloadPackage:SK,getPackages:TK,getPackage:UK,getPackageOfModule:VK,ensurePackage:WK,applyPackageConfig:XK,lookupPackage:YK,PackageRegistry:Xi,moduleSourceChange:ZK,requireMap:$K,isHookInstalled:aL,installHook:bL,removeHook:cL,wrapModuleLoad:dL,unwrapModuleLoad:eL,ExportLookup:oo,cjs:tO,semver:YH,scripting:UW});Ca("T",uO);
var mn=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");mn.isReference=VR;mn.removeUnreachableObjects=ho;mn.obj=dg;mn.Path=ci;mn.connect=Li;mn.disconnectAll=fl;mn.isReference=VR;mn.isReference=VR;var vO=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(c){var h=c.snapshot,
n;for(n in h){var b=h[n],d=b.props&&b.props.textAndAttributes;if(d){var k=d.value;if(!Array.isArray(k))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(k.length&&"string"!==typeof k[0]){k=[].concat.apply([],k);for(var a=0;a<k.length;a+=2){var f=k[a+1];f&&Array.isArray(f)&&(k[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(f))))}b.props.textAndAttributes=Object.assign({},d,{value:k})}}}return c}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(c,h){(h=h.refForId(c.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name}),n.minimizedBounds=null,mn.disconnectAll(n.get("minimize")),mn.connect(n.get("minimize"),"onMouseDown",
n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return c}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(c){var h=c.id,n=c.snapshot,b;for(b in n){var d=n[b].props;d&&d.styleSheets&&(d.styleSheets.value||(d.styleSheets.value=[]),d.styleSheets.value=d.styleSheets.value&&d.styleSheets.value.filter(function(k){k=
n[k.id];var a=n[k.props.rules.value.id];return!k.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}mn.removeUnreachableObjects([h],n);return c}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(c){var h=c.snapshot,n;for(n in h){var b=h[n],d=b["lively.serializer-class-info"];d&&("ChromeTheme"===d.className||"GithubTheme"===d.className?(d.className="DefaultTheme",d.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===d.className&&delete b["lively.serializer-class-info"])}return c}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(c,h){(h=h.refForId(c.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var d in mn.obj.dissoc(b.rules,["_rev"]))b.rules[d]=b.unwrapFoldedProps(b.rules[d])})});return c}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(c){var h=c.snapshot,n;for(n in h){var b=h[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return c}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(c){var h=c.snapshot,n=c.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(A){return"{"+A+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var d in b){for(var k=b[d]["index.js"],a=$jscomp.makeIterator(n),f=a.next();!f.done;f=a.next()){var l=$jscomp.makeIterator(f.value),r=l.next().value;
f=l.next().value;if(l=l.next().value){r=new RegExp('(import\\s)(.*)(\\sfrom \\"'+r+")","g");var v=r.exec(k);v&&(k=k.replace(r,"import "+l(v[2])+'from "'+f))}else k=k.replace(new RegExp(r,"g"),f)}b[d]["index.js"]=k}for(var y in h)if((d=h[y]["lively.serializer-class-info"])&&d.module)for(b=d.module.package.name+"/"+d.module.pathInPackage,k=$jscomp.makeIterator(n),a=k.next();!a.done;a=k.next())if(l=$jscomp.makeIterator(a.value),a=l.next().value,f=l.next().value,l.next(),l=l.next().value,b.includes(a)){d.module.package.name=
f;d.module.package.version="0.1.0";d.module.pathInPackage=l||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return c}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(c,h){h=$jscomp.makeIterator(h.objectRefs());for(var n=h.next();!n.done;n=h.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return c}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(c){var h=
c.snapshot,n;for(n in h){var b=h[n],d=b["lively.serializer-class-info"];d&&d.module&&("Tree"==d.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==d.className&&delete h[n],"InspectorTreeData"==d.className&&delete h[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(d.className)&&(d.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete h[n])}return c}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(c){var h=
c.id,n=c.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&mn.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&mn.isReference(b.props.commit.value))){var d=n[b.props.commit.value.id].props;b.props.commit.value='__lv_expr__:({type: "'+d.type.value+'", name: "'+d.name.value+'", _id: "'+d._id.value+'"})'}});mn.removeUnreachableObjects([h],n);return c}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(c){var h=c.packages,
n,b=mn.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(h))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(h,n);return c}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(c){Object.values(c.snapshot).map(function(h){h.props.fontFamily&&
"Camphor"==h.props.fontFamily.value&&(h.props.fontFamily.value="Nunito")});return c}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(c){var h=c.snapshot;Object.values(h).map(function(n){n.props.master&&"string"===typeof n.props.master.value&&(n.props.master.value=n.props.master.value.split("styleguide://style guide").join("styleguide://System"));n.props.master&&n.props.master.value.id&&(n=h[n.props.master.value.id],n.props.auto.value=n.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return c}}];mn.migrations=vO;mn.migrations=vO;mn.migrations=vO;var Xe=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Xe.normalizeOptions=function(c){c=Object.assign({reinitializeIds:!1},c);c.reinitializeIds&&(c.reinitializeIds="function"===typeof c.reinitializeIds?c.reinitializeIds:function(h,n){return n.realObj.isMorph?Xe.newMorphId(n.realObj.constructor):null});return c};Xe.serializeMorph=vG;Xe.deserializeMorph=wG;Xe.loadWorldFromResource=WR;Xe.saveWorldToResource=YR;Xe.copyMorph=
fL;Xe.createMorphSnapshot=YA;Xe.loadMorphFromSnapshot=iv;Xe.resourceToJSON=q1;Xe.findPackagesInFileSpec=r1;Xe.packagesOfSnapshot=ZR;Xe.loadPackagesAndModulesOfSnapshot=xG;Xe.findRequiredPackagesOfSnapshot=gL;Xe.requiredModulesOfSnapshot=np;Xe.deserializeWithMigrations=Oy;Xe.serialize=mt;Xe.MorphicEnv=ps;Xe.resource=Xb;Xe.newMorphId=Pe;Xe.morph=de;Xe.pathForBrowserHistory=$e;Xe.serializeMorph=vG;Xe.serializeMorph=vG;Xe.deserializeMorph=wG;Xe.deserializeMorph=wG;Xe.loadWorldFromResource=WR;Xe.loadWorldFromResource=
WR;Xe.saveWorldToResource=YR;Xe.saveWorldToResource=YR;Xe.copyMorph=fL;Xe.copyMorph=fL;Xe.modules=uO;Xe.createFiles=Sc;Xe.promise=Hg;Xe.graph=tx;Xe.arr=Lf;Xe.migrations=vO;var WE=Xe.modules;Xe.registerPackage=WE.registerPackage;Xe.module=WE.module;Xe.getPackage=WE.getPackage;Xe.ensurePackage=WE.ensurePackage;Xe.lookupPackage=WE.lookupPackage;Xe.semver=WE.semver;Xe.objectScriptingEnabled=!1;Xe.createMorphSnapshot=YA;Xe.createMorphSnapshot=YA;Xe.loadMorphFromSnapshot=iv;Xe.loadMorphFromSnapshot=iv;
Xe.packagesOfSnapshot=ZR;Xe.packagesOfSnapshot=ZR;Xe.loadPackagesAndModulesOfSnapshot=xG;Xe.loadPackagesAndModulesOfSnapshot=xG;Xe.findRequiredPackagesOfSnapshot=gL;Xe.findRequiredPackagesOfSnapshot=gL;var Rv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kpa={},i$=Rv.MutationObserver||Rv.WebKitMutationObserver;if(i$){var j$=0,Lpa=new i$(hL),k$=Rv.document.createTextNode("");Lpa.observe(k$,{characterData:!0});var VW=function(){k$.data=j$=++j$%2}}else if(Rv.setImmediate||
"undefined"===typeof Rv.MessageChannel)VW="document"in Rv&&"onreadystatechange"in Rv.document.createElement("script")?function(){var c=Rv.document.createElement("script");c.onreadystatechange=function(){hL();c.onreadystatechange=null;c.parentNode.removeChild(c);c=null};Rv.document.documentElement.appendChild(c)}:function(){setTimeout(hL,0)};else{var l$=new Rv.MessageChannel;l$.port1.onmessage=hL;VW=function(){l$.port2.postMessage(0)}}var $R,yG=[],Mpa=Kpa=function(c){1!==yG.push(c)||$R||VW()},WW={},
m$="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(m$){var n$=new Uint8Array(16);WW=function(){m$(n$);return n$}}else{var o$=Array(16);WW=function(){for(var c=0,h;16>c;c++)0===(c&3)&&(h=4294967296*Math.random()),o$[c]=h>>>((c&3)<<3)&255;return o$}}for(var p$=WW,Npa={},po=[],wO=0;256>wO;++wO)po[wO]=(wO+256).toString(16).substr(1);var q$=
Npa=function(c,h){h=h||0;return[po[c[h++]],po[c[h++]],po[c[h++]],po[c[h++]],"-",po[c[h++]],po[c[h++]],"-",po[c[h++]],po[c[h++]],"-",po[c[h++]],po[c[h++]],"-",po[c[h++]],po[c[h++]],po[c[h++]],po[c[h++]],po[c[h++]],po[c[h++]]].join("")},Opa={},r$,XW,YW=0,ZW=0,Ppa=Opa=function(c,h,n){n=h&&n||0;var b=h||[];c=c||{};var d=c.node||r$,k=void 0!==c.clockseq?c.clockseq:XW;if(null==d||null==k){var a=p$();null==d&&(d=r$=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);null==k&&(k=XW=(a[6]<<8|a[7])&16383)}a=void 0!==c.msecs?
c.msecs:(new Date).getTime();var f=void 0!==c.nsecs?c.nsecs:ZW+1,l=a-YW+(f-ZW)/1E4;0>l&&void 0===c.clockseq&&(k=k+1&16383);(0>l||a>YW)&&void 0===c.nsecs&&(f=0);if(1E4<=f)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");YW=a;ZW=f;XW=k;a+=122192928E5;c=(1E4*(a&268435455)+f)%4294967296;b[n++]=c>>>24&255;b[n++]=c>>>16&255;b[n++]=c>>>8&255;b[n++]=c&255;c=a/4294967296*1E4&268435455;b[n++]=c>>>8&255;b[n++]=c&255;b[n++]=c>>>24&15|16;b[n++]=c>>>16&255;b[n++]=k>>>8|128;b[n++]=k&255;for(k=0;6>
k;++k)b[n+k]=d[k];return h?h:q$(b)},s$={};s$=function(c,h,n){n=h&&n||0;"string"==typeof c&&(h="binary"===c?Array(16):null,c=null);c=c||{};c=c.random||(c.rng||p$)();c[6]=c[6]&15|64;c[8]=c[8]&63|128;if(h)for(var b=0;16>b;++b)h[n+b]=c[b];return h||q$(c)};var Qpa={},$W=s$;$W.v1=Ppa;var Rpa=Qpa=$W.v4=$W,Rh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Spa={},Tpa=Spa=function(c){function h(v,y){var A=v[0],E=v[1],F=v[2],H=v[3];A+=(E&F|~E&H)+y[0]-680876936|0;A=(A<<7|A>>>
25)+E|0;H+=(A&E|~A&F)+y[1]-389564586|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[2]+606105819|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[3]-1044525330|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[4]-176418897|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[5]+1200080426|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[6]-1473231341|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[7]-45705983|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[8]+1770035416|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[9]-1958414417|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[10]-42063|
0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[11]-1990404162|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[12]+1804603682|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[13]-40341101|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[14]-1502002290|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[15]+1236535329|0;E=(E<<22|E>>>10)+F|0;A+=(E&H|F&~H)+y[1]-165796510|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[6]-1069501632|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[11]+643717713|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[0]-373897302|0;E=(E<<20|E>>>12)+F|0;A+=
(E&H|F&~H)+y[5]-701558691|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[10]+38016083|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[15]-660478335|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[4]-405537848|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[9]+568446438|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[14]-1019803690|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[3]-187363961|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[8]+1163531501|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[13]-1444681467|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[2]-51403784|0;H=(H<<
9|H>>>23)+A|0;F+=(H&E|A&~E)+y[7]+1735328473|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[12]-1926607734|0;E=(E<<20|E>>>12)+F|0;A+=(E^F^H)+y[5]-378558|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[8]-2022574463|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[11]+1839030562|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[14]-35309556|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[1]-1530992060|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[4]+1272893353|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[7]-155497632|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[10]-1094730640|0;E=(E<<23|
E>>>9)+F|0;A+=(E^F^H)+y[13]+681279174|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[0]-358537222|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[3]-722521979|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[6]+76029189|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[9]-640364487|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[12]-421815835|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[15]+530742520|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[2]-995338651|0;E=(E<<23|E>>>9)+F|0;A+=(F^(E|~H))+y[0]-198630844|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[7]+1126891415|0;H=(H<<10|H>>>22)+
A|0;F+=(A^(H|~E))+y[14]-1416354905|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[5]-57434055|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[12]+1700485571|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[3]-1894986606|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[10]-1051523|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[1]-2054922799|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[8]+1873313359|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[15]-30611744|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[6]-1560198380|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[13]+1309151649|
0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[4]-145523070|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[11]-1120210379|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[2]+718787259|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[9]-343485551|0;v[0]=A+v[0]|0;v[1]=((E<<21|E>>>11)+F|0)+v[1]|0;v[2]=F+v[2]|0;v[3]=H+v[3]|0}function n(v){var y=[],A;for(A=0;64>A;A+=4)y[A>>2]=v.charCodeAt(A)+(v.charCodeAt(A+1)<<8)+(v.charCodeAt(A+2)<<16)+(v.charCodeAt(A+3)<<24);return y}function b(v){var y=[],A;for(A=0;64>A;A+=4)y[A>>2]=v[A]+(v[A+1]<<8)+
(v[A+2]<<16)+(v[A+3]<<24);return y}function d(v){var y=v.length,A=[1732584193,-271733879,-1732584194,271733878],E;for(E=64;E<=y;E+=64)h(A,n(v.substring(E-64,E)));v=v.substring(E-64);var F=v.length;var H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<F;E+=1)H[E>>2]|=v.charCodeAt(E)<<(E%4<<3);H[E>>2]|=128<<(E%4<<3);if(55<E)for(h(A,H),E=0;16>E;E+=1)H[E]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;H[14]=v;H[15]=y;h(A,H);return A}function k(v){var y;for(y=0;y<
v.length;y+=1){var A=y,E,F=v[y],H="";for(E=0;4>E;E+=1)H+=r[F>>8*E+4&15]+r[F>>8*E&15];v[A]=H}return v.join("")}function a(v){/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v)));return v}function f(v){var y=[],A=v.length,E;for(E=0;E<A-1;E+=2)y.push(parseInt(v.substr(E,2),16));return String.fromCharCode.apply(String,y)}function l(){this.reset()}var r="0123456789abcdef".split("");k(d("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function v(y,A){y=y|0||
0;return 0>y?Math.max(y+A,0):Math.min(y,A)}ArrayBuffer.prototype.slice=function(y,A){var E=(this||Rh).byteLength;y=v(y,E);var F=E;A!==c&&(F=v(A,E));if(y>F)return new ArrayBuffer(0);F-=y;A=new ArrayBuffer(F);E=new Uint8Array(A);y=new Uint8Array(this||Rh,y,F);E.set(y);return A}}();l.prototype.append=function(v){this.appendBinary(a(v));return this||Rh};l.prototype.appendBinary=function(v){(this||Rh)._buff+=v;(this||Rh)._length+=v.length;v=(this||Rh)._buff.length;var y;for(y=64;y<=v;y+=64)h((this||Rh)._hash,
n((this||Rh)._buff.substring(y-64,y)));(this||Rh)._buff=(this||Rh)._buff.substring(y-64);return this||Rh};l.prototype.end=function(v){var y=(this||Rh)._buff,A=y.length,E,F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<A;E+=1)F[E>>2]|=y.charCodeAt(E)<<(E%4<<3);this._finish(F,A);y=k((this||Rh)._hash);v&&(y=f(y));this.reset();return y};l.prototype.reset=function(){(this||Rh)._buff="";(this||Rh)._length=0;(this||Rh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Rh};l.prototype.getState=
function(){return{buff:(this||Rh)._buff,length:(this||Rh)._length,hash:(this||Rh)._hash}};l.prototype.setState=function(v){(this||Rh)._buff=v.buff;(this||Rh)._length=v.length;(this||Rh)._hash=v.hash;return this||Rh};l.prototype.destroy=function(){delete (this||Rh)._hash;delete (this||Rh)._buff;delete (this||Rh)._length};l.prototype._finish=function(v,y){v[y>>2]|=128<<(y%4<<3);if(55<y)for(h((this||Rh)._hash,v),y=0;16>y;y+=1)v[y]=0;var A=8*(this||Rh)._length;A=A.toString(16).match(/(.*?)(.{0,8})$/);
y=parseInt(A[2],16);A=parseInt(A[1],16)||0;v[14]=y;v[15]=A;h((this||Rh)._hash,v)};l.hash=function(v,y){return l.hashBinary(a(v),y)};l.hashBinary=function(v,y){v=d(v);v=k(v);return y?f(v):v};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=function(v){var y=(this||Rh)._buff.buffer,A=new Uint8Array(y.byteLength+v.byteLength);A.set(new Uint8Array(y));A.set(new Uint8Array(v),y.byteLength);y=A.length;(this||Rh)._length+=v.byteLength;for(v=64;v<=y;v+=64)h((this||Rh)._hash,b(A.subarray(v-
64,v)));(this||Rh)._buff=v-64<y?new Uint8Array(A.buffer.slice(v-64)):new Uint8Array(0);return this||Rh};l.ArrayBuffer.prototype.end=function(v){var y=(this||Rh)._buff,A=y.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F;for(F=0;F<A;F+=1)E[F>>2]|=y[F]<<(F%4<<3);this._finish(E,A);y=k((this||Rh)._hash);v&&(y=f(y));this.reset();return y};l.ArrayBuffer.prototype.reset=function(){(this||Rh)._buff=new Uint8Array(0);(this||Rh)._length=0;(this||Rh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||
Rh};l.ArrayBuffer.prototype.getState=function(){var v=l.prototype.getState.call(this||Rh);v.buff=String.fromCharCode.apply(null,new Uint8Array(v.buff));return v};l.ArrayBuffer.prototype.setState=function(v){var y=v.buff,A=y.length,E=new ArrayBuffer(A);E=new Uint8Array(E);var F;for(F=0;F<A;F+=1)E[F]=y.charCodeAt(F);v.buff=E;return l.prototype.setState.call(this||Rh,v)};l.ArrayBuffer.prototype.destroy=l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;l.ArrayBuffer.hash=function(v,
y){var A=new Uint8Array(v),E=A.length;v=[1732584193,-271733879,-1732584194,271733878];var F;for(F=64;F<=E;F+=64)h(v,b(A.subarray(F-64,F)));A=F-64<E?A.subarray(F-64):new Uint8Array(0);var H=A.length;var J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<H;F+=1)J[F>>2]|=A[F]<<(F%4<<3);J[F>>2]|=128<<(F%4<<3);if(55<F)for(h(v,J),F=0;16>F;F+=1)J[F]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(E[2],16);E=parseInt(E[1],16)||0;J[14]=A;J[15]=E;h(v,J);v=k(v);return y?f(v):v};return l}(),XE={stringify:function(c){var h=
[];h.push({obj:c});c="";for(var n,b,d,k,a,f,l;n=h.pop();)if(b=n.obj,d=n.prefix||"",n=n.val||"",c+=d,n)c+=n;else if("object"!==typeof b)c+="undefined"===typeof b?null:JSON.stringify(b);else if(null===b)c+="null";else if(Array.isArray(b)){h.push({val:"]"});for(d=b.length-1;0<=d;d--)n=0===d?"":",",h.push({obj:b[d],prefix:n});h.push({val:"["})}else{n=[];for(k in b)b.hasOwnProperty(k)&&n.push(k);h.push({val:"}"});for(d=n.length-1;0<=d;d--)a=n[d],f=b[a],l=0<d?",":"",l+=JSON.stringify(a)+":",h.push({obj:f,
prefix:l});h.push({val:"{"})}return c},parse:function(c){for(var h=[],n=[],b=0,d,k,a,f;;)if(d=c[b++],"}"===d||"]"===d||"undefined"===typeof d){if(1===h.length)return h.pop();JD(h.pop(),h,n)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;JD(null,h,n);break;case "t":b+=3;JD(!0,h,n);break;case "f":b+=4;JD(!1,h,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d="";for(b--;;)if(k=c[b++],/[\d\.\-e\+]/.test(k))d+=
k;else{b--;break}JD(parseFloat(d),h,n);break;case '"':d="";k=void 0;for(a=0;;)if(f=c[b++],'"'!==f||"\\"===k&&1===a%2)d+=f,k=f,"\\"===k?a++:a=0;else break;JD(JSON.parse('"'+d+'"'),h,n);break;case "[":d={element:[],index:h.length};h.push(d.element);n.push(d);break;case "{":d={element:{},index:h.length};h.push(d.element);n.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}},Upa={},aX=Upa=function(c){return function(){var h=arguments.length;if(h){for(var n=[],b=-1;++b<h;)n[b]=
arguments[b];return c.call(this,n)}return c.call(this,[])}},Vpa={},il=Vpa="function"===typeof Object.create?function(c,h){h&&(c.super_=h,c.prototype=Object.create(h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:function(c,h){if(h){c.super_=h;var n=function(){};n.prototype=h.prototype;c.prototype=new n;c.prototype.constructor=c}},YE="object"==typeof Reflect?Reflect:null,t$=YE&&"function"==typeof YE.apply?YE.apply:function(c,h,n){return Function.prototype.apply.call(c,
h,n)};var Wpa=YE&&"function"==typeof YE.ownKeys?YE.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var u$=Number.isNaN||function(c){return c!=c};sk.EventEmitter=sk;sk.prototype._events=void 0;sk.prototype._eventsCount=0;sk.prototype._maxListeners=void 0;var v$=10;Object.defineProperty(sk,"defaultMaxListeners",{enumerable:!0,get:function(){return v$},set:function(c){if("number"!=
typeof c||0>c||u$(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");v$=c}});sk.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};sk.prototype.setMaxListeners=function(c){if("number"!=typeof c||0>c||u$(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
c+".");return this._maxListeners=c,this};sk.prototype.getMaxListeners=function(){return void 0===this._maxListeners?sk.defaultMaxListeners:this._maxListeners};sk.prototype.emit=function(c){for(var h=[],n=1;n<arguments.length;n++)h.push(arguments[n]);n="error"===c;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var d;if(0<h.length&&(d=h[0]),d instanceof Error)throw d;h=Error("Unhandled error."+(d?" ("+d.message+")":""));throw h.context=d,h;}n=b[c];if(void 0===n)return!1;
if("function"==typeof n)t$(n,this,h);else for(d=n.length,b=v1(n,d),n=0;n<d;++n)t$(b[n],this,h);return!0};sk.prototype.addListener=function(c,h){return s1(this,c,h,!1)};sk.prototype.on=sk.prototype.addListener;sk.prototype.prependListener=function(c,h){return s1(this,c,h,!0)};sk.prototype.once=function(c,h){return iL(h),this.on(c,t1(this,c,h)),this};sk.prototype.prependOnceListener=function(c,h){return iL(h),this.prependListener(c,t1(this,c,h)),this};sk.prototype.removeListener=function(c,h){var n,
b,d;if((iL(h),void 0===(b=this._events))||void 0===(n=b[c]))return this;if(n===h||n.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete b[c],b.removeListener&&this.emit("removeListener",c,n.listener||h));else if("function"!=typeof n){var k=-1;for(d=n.length-1;0<=d;d--)if(n[d]===h||n[d].listener===h){var a=n[d].listener;k=d;break}if(0>k)return this;if(0===k)n.shift();else{for(;k+1<n.length;k++)n[k]=n[k+1];n.pop();!0}1===n.length&&(b[c]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",
c,a||h)}return this};sk.prototype.off=sk.prototype.removeListener;sk.prototype.removeAllListeners=function(c){var h,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[c]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[c]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(h=b[n])&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=n[c]))this.removeListener(c,h);else if(void 0!==h)for(n=h.length-1;0<=n;n--)this.removeListener(c,h[n]);return this};sk.prototype.listeners=function(c){return u1(this,c,!0)};sk.prototype.rawListeners=function(c){return u1(this,c,!1)};sk.listenerCount=function(c,h){return"function"==typeof c.listenerCount?c.listenerCount(h):w1.call(c,h)};sk.prototype.listenerCount=w1;sk.prototype.eventNames=function(){return 0<this._eventsCount?
Wpa(this._events):[]};var ov=sk,w$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Xpa={},rL=bj,kv=KD(Mpa),L1=KD(Rpa),mL=KD(Tpa),e2=KD(XE),LD=KD(aX),Pt=KD(il),$p=ov;Vy.prototype.get=function(c){return this._store["$"+c]};Vy.prototype.set=function(c,h){this._store["$"+c]=h;return!0};Vy.prototype.has=function(c){return"$"+c in this._store};Vy.prototype.delete=function(c){c="$"+c;var h=c in this._store;delete this._store[c];return h};Vy.prototype.forEach=function(c){for(var h=
Object.keys(this._store),n=0,b=h.length;n<b;n++){var d=h[n],k=this._store[d];d=d.substring(1);c(k,d)}};Object.defineProperty(Vy.prototype,"size",{get:function(){return Object.keys(this._store).length}});zG.prototype.add=function(c){return this._store.set(c,!0)};zG.prototype.has=function(c){return this._store.has(c)};zG.prototype.forEach=function(c){this._store.forEach(function(h,n){c(n)})};Object.defineProperty(zG.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===
typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var c=Object.getOwnPropertyDescriptor(Map,Symbol.species);return c&&"get"in c&&Map[Symbol.species]===Map}()){var HG=Set;var Xq=Map}else HG=zG,Xq=Vy;var x1=Function.prototype.toString,Wfa=x1.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var BG=!!localStorage.getItem("_pouch_check_localstorage")}catch(c){BG=!1}Pt(MD,$p.EventEmitter);MD.prototype.addListener=function(c,h,n,b){function d(){if(k._listeners[h])if(a)a=
"waiting";else{a=!0;var f=AG(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(f).on("change",function(l){l.seq>b.since&&!b.cancelled&&(b.since=l.seq,b.onChange(l))}).on("complete",function(){"waiting"===a&&kv(d);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[h]){var k=this,a=!1;this._listeners[h]=d;this.on(c,d)}};MD.prototype.removeListener=function(c,h){h in this._listeners&&($p.EventEmitter.prototype.removeListener.call(this,
c,this._listeners[h]),delete this._listeners[h])};MD.prototype.notifyLocalWindows=function(c){BG&&(localStorage[c]="a"===localStorage[c]?"b":"a")};MD.prototype.notify=function(c){this.emit(c);this.notifyLocalWindows(c)};var QD="function"===typeof Object.assign?Object.assign:function(c){for(var h=Object(c),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(h[d]=b[d])}return h};Pt(Mk,Error);Mk.prototype.toString=function(){return JSON.stringify({status:this.status,
name:this.name,message:this.message,reason:this.reason})};new Mk(401,"unauthorized","Name or password is incorrect.");var Ypa=new Mk(400,"bad_request","Missing JSON list of 'docs'"),rt=new Mk(404,"not_found","missing"),PD=new Mk(409,"conflict","Document update conflict"),E1=new Mk(400,"bad_request","_id field must contain a string"),bga=new Mk(412,"missing_id","_id is required for puts"),aga=new Mk(400,"bad_request","Only reserved document ids may start with underscore.");new Mk(412,"precondition_failed",
"Database not open");var C1=new Mk(500,"unknown_error","Database encountered an unknown error"),d2=new Mk(500,"badarg","Some query argument is invalid");new Mk(400,"invalid_request","Request was invalid");var Zpa=new Mk(400,"query_parse_error","Some query parameter is invalid"),c2=new Mk(500,"doc_validation","Bad special document member"),jL=new Mk(400,"bad_request","Something wrong with the request"),bX=new Mk(400,"bad_request","Document must be a JSON object");new Mk(404,"not_found","Database not found");
var oS=new Mk(500,"indexed_db_went_bad","unknown");new Mk(500,"web_sql_went_bad","unknown");new Mk(500,"levelDB_went_went_bad","unknown");new Mk(403,"forbidden","Forbidden by design doc validate_doc_update function");var a2=new Mk(400,"bad_request","Invalid rev format");new Mk(412,"file_exists","The database could not be created, the file already exists.");var Sga=new Mk(412,"missing_stub","A pre-existing attachment stub wasn't found");new Mk(413,"invalid_url","Provided URL is invalid");var H1="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
dga=/(?:^|&)([^&=]*)=?([^&]*)/g,cga=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,jga=w$.setImmediate||w$.setTimeout,nL=L1.v4;Pt(CG,$p.EventEmitter);CG.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};CG.prototype.validateChanges=function(c){var h=c.complete,n=this;Ai._changesFilterPlugin?Ai._changesFilterPlugin.validate(c,
function(b){if(b)return h(b);n.doChanges(c)}):n.doChanges(c)};CG.prototype.doChanges=function(c){var h=this,n=c.complete;c=Zm(c);"live"in c&&!("continuous"in c)&&(c.continuous=c.live);c.processChange=rga;"latest"===c.since&&(c.since="now");c.since||(c.since=0);if("now"===c.since)this.db.info().then(function(k){h.isCancelled?n(null,{status:"cancelled"}):(c.since=k.update_seq,h.doChanges(c))},n);else{if(Ai._changesFilterPlugin){if(Ai._changesFilterPlugin.normalize(c),Ai._changesFilterPlugin.shouldFilter(this,
c))return Ai._changesFilterPlugin.filter(this,c)}else["doc_ids","filter","selector","view"].forEach(function(k){k in c&&Yr("warn",'The "'+k+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in c||(c.descending=!1);c.limit=0===c.limit?1:c.limit;c.complete=n;var b=this.db._changes(c);if(b&&"function"===typeof b.cancel){var d=h.cancel;h.cancel=LD(function(k){b.cancel();d.apply(this,
k)})}}};Pt(gl,$p.EventEmitter);gl.prototype.post=ym("post",function(c,h,n){"function"===typeof h&&(n=h,h={});if("object"!==typeof c||Array.isArray(c))return n(Fi(bX));this.bulkDocs({docs:[c]},h,lS(n,c._id))});gl.prototype.put=ym("put",function(c,h,n){function b(){var a=c._rev.split("-"),f=a[1];a=parseInt(a[0],10)+1;var l=K1();c._revisions={start:a,ids:[l,f]};c._rev=a+"-"+l;h.new_edits=!1}function d(a){"function"===typeof k._put&&!1!==h.new_edits?k._put(c,h,a):k.bulkDocs({docs:[c]},h,lS(a,c._id))}
"function"===typeof h&&(n=h,h={});if("object"!==typeof c||Array.isArray(c))return n(Fi(bX));D1(c._id);if(aB(c._id)&&"function"===typeof this._putLocal)return c._deleted?this._removeLocal(c,n):this._putLocal(c,n);var k=this;h.force&&c._rev?(b(),d(function(a){n(a,a?null:{ok:!0,id:c._id,rev:c._rev})})):d(n)});gl.prototype.putAttachment=ym("putAttachment",function(c,h,n,b,d){function k(f){var l="_rev"in f?parseInt(f._rev,10):0;f._attachments=f._attachments||{};f._attachments[h]={content_type:d,data:b,
revpos:++l};return a.put(f)}var a=this;"function"===typeof d&&(d=b,b=n,n=null);"undefined"===typeof d&&(d=b,b=n,n=null);d||Yr("warn","Attachment",h,"on document",c,"is missing content_type");return a.get(c).then(function(f){if(f._rev!==n)throw Fi(PD);return k(f)},function(f){if(f.reason===rt.message)return k({_id:c});throw f;})});gl.prototype.removeAttachment=ym("removeAttachment",function(c,h,n,b){var d=this;d.get(c,function(k,a){if(k)b(k);else if(a._rev!==n)b(Fi(PD));else{if(!a._attachments)return b();
delete a._attachments[h];0===Object.keys(a._attachments).length&&delete a._attachments;d.put(a,b)}})});gl.prototype.remove=ym("remove",function(c,h,n,b){"string"===typeof h?(c={_id:c,_rev:h},"function"===typeof n&&(b=n,n={})):"function"===typeof h?(b=h,n={}):(b=n,n=h);n=n||{};n.was_delete=!0;h={_id:c._id,_rev:c._rev||n.rev,_deleted:!0};if(aB(h._id)&&"function"===typeof this._removeLocal)return this._removeLocal(c,b);this.bulkDocs({docs:[h]},n,lS(b,h._id))});gl.prototype.revsDiff=ym("revsDiff",function(c,
h,n){function b(l,r){f.has(l)||f.set(l,{missing:[]});f.get(l).missing.push(r)}function d(l,r){var v=c[l].slice(0);$A(r,function(y,A,E,F,H){y=A+"-"+E;A=v.indexOf(y);-1!==A&&(v.splice(A,1),"available"!==H.status&&b(l,y))});v.forEach(function(y){b(l,y)})}"function"===typeof h&&(n=h,h={});var k=Object.keys(c);if(!k.length)return n(null,{});var a=0,f=new Xq;k.map(function(l){this._getRevisionTree(l,function(r,v){if(r&&404===r.status&&"missing"===r.message)f.set(l,{missing:c[l]});else{if(r)return n(r);
d(l,v)}if(++a===k.length){var y={};f.forEach(function(A,E){y[E]=A});return n(null,y)}})},this)});gl.prototype.bulkGet=ym("bulkGet",function(c,h){B1(this,c,h)});gl.prototype.compactDocument=ym("compactDocument",function(c,h,n){var b=this;this._getRevisionTree(c,function(d,k){if(d)return n(d);var a=uga(k),f=[],l=[];Object.keys(a).forEach(function(r){a[r]>h&&f.push(r)});$A(k,function(r,v,y,A,E){r=v+"-"+y;"available"===E.status&&-1!==f.indexOf(r)&&l.push(r)});b._doCompaction(c,l,n)})});gl.prototype.compact=
ym("compact",function(c,h){"function"===typeof c&&(h=c,c={});c=c||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:c,callback:h});1===this._compactionQueue.length&&R1(this)});gl.prototype._compact=function(c,h){var n=this,b=[];n.changes({return_docs:!1,last_seq:c.last_seq||0}).on("change",function(d){b.push(n.compactDocument(d.id,0))}).on("complete",function(d){var k=d.last_seq;Promise.all(b).then(function(){return lL(n,"_local/compaction",function(a){return!a.last_seq||
a.last_seq<k?(a.last_seq=k,a):!1})}).then(function(){h(null,{ok:!0})}).catch(h)}).on("error",h)};gl.prototype.get=ym("get",function(c,h,n){function b(){var l=[],r=d.length;if(!r)return n(null,l);d.forEach(function(v){k.get(c,{rev:v,revs:h.revs,latest:h.latest,attachments:h.attachments,binary:h.binary},function(y,A){if(y)l.push({missing:v});else{y=0;for(var E=l.length;y<E;y++)if(l[y].ok&&l[y].ok._rev===A._rev){var F=!0;break}F||l.push({ok:A})}r--;r||n(null,l)})})}"function"===typeof h&&(n=h,h={});
if("string"!==typeof c)return n(Fi(E1));if(aB(c)&&"function"===typeof this._getLocal)return this._getLocal(c,n);var d=[],k=this;if(h.open_revs)if("all"===h.open_revs)this._getRevisionTree(c,function(l,r){if(l)return n(l);d=jS(r).map(function(v){return v.rev});b()});else if(Array.isArray(h.open_revs)){d=h.open_revs;for(var a=0;a<d.length;a++){var f=d[a];if("string"!==typeof f||!/^\d+-/.test(f))return n(Fi(a2))}b()}else return n(Fi(C1,"function_clause"));else return this._get(c,h,function(l,r){if(l)return l.docId=
c,n(l);var v=r.doc,y=r.metadata,A=r.ctx;h.conflicts&&(r=kS(y),r.length&&(v._conflicts=r));ax(y,v._rev)&&(v._deleted=!0);if(h.revs||h.revs_info){l=v._rev.split("-");r=parseInt(l[0],10);l=l[1];var E=M1(y.rev_tree);y=null;for(var F=0;F<E.length;F++){var H=E[F],J=H.ids.map(function(ea){return ea.id}).indexOf(l);if(J===r-1||!y&&-1!==J)y=H}if(!y)return l=Error("invalid rev tree"),l.docId=c,n(l);r=y.ids.map(function(ea){return ea.id}).indexOf(v._rev.split("-")[1])+1;y.ids.splice(r,y.ids.length-r);y.ids.reverse();
h.revs&&(v._revisions={start:y.pos+y.ids.length-1,ids:y.ids.map(function(ea){return ea.id})});if(h.revs_info){var O=y.pos+y.ids.length;v._revs_info=y.ids.map(function(ea){O--;return{rev:O+"-"+ea.id,status:ea.opts.status}})}}if(h.attachments&&v._attachments){var L=v._attachments,Y=Object.keys(L).length;if(0===Y)return n(null,v);Object.keys(L).forEach(function(ea){this._getAttachment(v._id,ea,L[ea],{rev:v._rev,binary:h.binary,ctx:A},function(qa,Fa){qa=v._attachments[ea];qa.data=Fa;delete qa.stub;delete qa.length;
--Y||n(null,v)})},k)}else{if(v._attachments)for(var S in v._attachments)v._attachments.hasOwnProperty(S)&&(v._attachments[S].stub=!0);n(null,v)}})});gl.prototype.getAttachment=ym("getAttachment",function(c,h,n,b){var d=this;n instanceof Function&&(b=n,n={});this._get(c,n,function(k,a){if(k)return b(k);if(a.doc._attachments&&a.doc._attachments[h])n.ctx=a.ctx,n.binary=!0,d._getAttachment(c,h,a.doc._attachments[h],n,b);else return b(Fi(rt))})});gl.prototype.allDocs=ym("allDocs",function(c,h){"function"===
typeof c&&(h=c,c={});c.skip="undefined"!==typeof c.skip?c.skip:0;c.start_key&&(c.startkey=c.start_key);c.end_key&&(c.endkey=c.end_key);if("keys"in c){if(!Array.isArray(c.keys))return h(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in c})[0];if(n){h(Fi(Zpa,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!jv(this)&&(vga(c),0===c.keys.length))return this._allDocs({limit:0},h)}return this._allDocs(c,h)});gl.prototype.changes=
function(c,h){"function"===typeof c&&(h=c,c={});c=c||{};c.return_docs="return_docs"in c?c.return_docs:!c.live;return new CG(this,c,h)};gl.prototype.close=ym("close",function(c){this._closed=!0;this.emit("closed");return this._close(c)});gl.prototype.info=ym("info",function(c){var h=this;this._info(function(n,b){if(n)return c(n);b.db_name=b.db_name||h.name;b.auto_compaction=!(!h.auto_compaction||jv(h));b.adapter=h.adapter;c(null,b)})});gl.prototype.id=ym("id",function(c){return this._id(c)});gl.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};gl.prototype.bulkDocs=ym("bulkDocs",function(c,h,n){"function"===typeof h&&(n=h,h={});h=h||{};Array.isArray(c)&&(c={docs:c});if(!c||!c.docs||!Array.isArray(c.docs))return n(Fi(Ypa));for(var b=0;b<c.docs.length;++b)if("object"!==typeof c.docs[b]||Array.isArray(c.docs[b]))return n(Fi(bX));var d;c.docs.forEach(function(f){f._attachments&&Object.keys(f._attachments).forEach(function(l){var r;(r=d)||(r="_"===l.charAt(0)?l+" is not a valid attachment name, attachment names cannot start with '_'":
!1);d=r;f._attachments[l].content_type||Yr("warn","Attachment",l,"on document",f._id,"is missing content_type")})});if(d)return n(Fi(jL,d));"new_edits"in h||(h.new_edits="new_edits"in c?c.new_edits:!0);var k=this;h.new_edits||jv(k)||c.docs.sort(tga);sga(c.docs);var a=c.docs.map(function(f){return f._id});return this._bulkDocs(c,h,function(f,l){if(f)return n(f);h.new_edits||(l=l.filter(function(v){return v.error}));if(!jv(k)){f=0;for(var r=l.length;f<r;f++)l[f].id=l[f].id||a[f]}n(null,l)})});gl.prototype.registerDependentDatabase=
ym("registerDependentDatabase",function(c,h){var n=new this.constructor(c,this.__opts);lL(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[c])return!1;b.dependentDbs[c]=!0;return b}).then(function(){h(null,{db:n})}).catch(h)});gl.prototype.destroy=ym("destroy",function(c,h){function n(){b._destroy(c,function(k,a){if(k)return h(k);b._destroyed=!0;b.emit("destroyed");h(null,a||{ok:!0})})}"function"===typeof c&&(h=c,c={});var b=this,d="use_prefix"in b?
b.use_prefix:!0;if(jv(b))return n();b.get("_local/_pouch_dependentDbs",function(k,a){if(k)return 404!==k.status?h(k):n();var f=b.constructor;k=Object.keys(a.dependentDbs).map(function(l){l=d?l.replace(new RegExp("^"+f.prefix),""):l;return(new f(l,b.__opts)).destroy()});Promise.all(k).then(n,h)})});DG.prototype.execute=function(){var c;if(this.failed)for(;c=this.queue.shift();)c(this.failed);else for(;c=this.queue.shift();)c()};DG.prototype.fail=function(c){this.failed=c;this.execute()};DG.prototype.ready=
function(c){this.isReady=!0;this.db=c;this.execute()};DG.prototype.addTask=function(c){this.queue.push(c);this.failed&&this.execute()};Pt(Ai,gl);var fha="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},m2=fetch,SD=Headers;Ai.adapters={};Ai.preferredAdapters=[];Ai.prefix="_pouch_";var x$=new $p.EventEmitter;(function(c){Object.keys($p.EventEmitter.prototype).forEach(function(n){"function"===typeof $p.EventEmitter.prototype[n]&&(c[n]=x$[n].bind(x$))});var h=
c._destructionListeners=new Xq;c.on("ref",function(n){h.has(n.name)||h.set(n.name,[]);h.get(n.name).push(n)});c.on("unref",function(n){if(h.has(n.name)){var b=h.get(n.name),d=b.indexOf(n);0>d||(b.splice(d,1),1<b.length?h.set(n.name,b):h.delete(n.name))}});c.on("destroyed",function(n){if(h.has(n)){var b=h.get(n);h.delete(n);b.forEach(function(d){d.emit("destroyed",!0)})}})})(Ai);Ai.adapter=function(c,h,n){h.valid()&&(Ai.adapters[c]=h,n&&Ai.preferredAdapters.push(c))};Ai.plugin=function(c){if("function"===
typeof c)c(Ai);else{if("object"!==typeof c||0===Object.keys(c).length)throw Error('Invalid plugin: got "'+c+'", expected an object or a function');Object.keys(c).forEach(function(h){Ai.prototype[h]=c[h]})}this.__defaults&&(Ai.__defaults=QD({},this.__defaults));return Ai};Ai.defaults=function(c){function h(n,b){if(!(this instanceof h))return new h(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=QD({},h.__defaults,b);Ai.call(this,n,b)}Pt(h,Ai);h.preferredAdapters=Ai.preferredAdapters.slice();
Object.keys(Ai).forEach(function(n){n in h||(h[n]=Ai[n])});h.__defaults=QD({},this.__defaults,c);return h};Ai.fetch=function(c,h){return m2(c,h)};var U1=["$or","$nor","$not"],X1={$elemMatch:function(c,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(d){return OD(d,h,Object.keys(h))}):b.some(function(d){return nS(h,c,n,d)}):!1},$allMatch:function(c,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(d){return OD(d,h,Object.keys(h))}):
b.every(function(d){return nS(h,c,n,d)}):!1},$eq:function(c,h,n,b){return cB(b)&&0===An(b,h)},$gte:function(c,h,n,b){return cB(b)&&0<=An(b,h)},$gt:function(c,h,n,b){return cB(b)&&0<An(b,h)},$lte:function(c,h,n,b){return cB(b)&&0>=An(b,h)},$lt:function(c,h,n,b){return cB(b)&&0>An(b,h)},$exists:function(c,h,n,b){return h?cB(b):!cB(b)},$mod:function(c,h,n,b){if(c=FG(b)){c=h[0];h=h[1];if(0===c)throw Error("Bad divisor, cannot divide by zero");if(parseInt(c,10)!==c)throw Error("Divisor is not an integer");
if(parseInt(h,10)!==h)throw Error("Modulus is not an integer");c=parseInt(b,10)!==b?!1:b%c===h}return c},$ne:function(c,h,n,b){return h.every(function(d){return 0!==An(b,d)})},$in:function(c,h,n,b){return FG(b)&&Y1(b,h)},$nin:function(c,h,n,b){return FG(b)&&!Y1(b,h)},$size:function(c,h,n,b){return FG(b)&&b.length===h},$all:function(c,h,n,b){return Array.isArray(b)&&Ega(b,h)},$regex:function(c,h,n,b){if(c=FG(b))c=(new RegExp(h)).test(b);return c},$type:function(c,h,n,b){return Fga(b,h)}};Ai.plugin(function(c){c._changesFilterPlugin=
{validate:Gga,normalize:Hga,shouldFilter:Iga,filter:Jga}});Ai.version="7.2.1";var Kga=Z1("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),Lga=Z1("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),GG=new MD,rS=!1,sS=[],RD=new Xq,uS,tS=new Xq;
k2.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var xS={};wS.valid=function(){return!0};Pt(fB,Error);Pt(sL,Error);Pt(tL,Error);var iha=Yr.bind(null,"log"),jha=Array.isArray,kha=JSON.parse;IG.prototype.add=function(c){return this.promise=this.promise.catch(function(){}).then(function(){return c()})};IG.prototype.finish=function(){return this.promise};var y$={},z$=new IG,$pa=function(c,h){return AS(h)},aqa=function(c,h){return h.length},bqa=function(c,h){c=
AS(h);for(var n=Math.min.apply(null,h),b=Math.max.apply(null,h),d=h.length,k=0,a=0,f=h.length;a<f;a++){var l=h[a];k+=l*l}return{sum:c,min:n,max:b,count:d,sumsqr:k}},A$=function(c,h,n,b){function d(aa,xa,jb,ob,pa){try{return{output:xa(jb,ob,pa)}}catch(ka){return t2(aa,ka),{error:ka}}}function k(aa,xa){var jb=An(aa.key,xa.key);return 0!==jb?jb:An(aa.value,xa.value)}function a(aa,xa,jb){jb=jb||0;return"number"===typeof xa?aa.slice(jb,xa+jb):0<jb?aa.slice(jb):aa}function f(aa){var xa=aa.value;return xa&&
"object"===typeof xa&&xa._id||aa.id}function l(aa){aa.rows.forEach(function(xa){var jb=xa.doc&&xa.doc._attachments;jb&&Object.keys(jb).forEach(function(ob){var pa=jb[ob];jb[ob].data=gS(pa.data,pa.content_type)})})}function r(aa){return function(xa){aa.include_docs&&aa.attachments&&aa.binary&&l(xa);return xa}}function v(aa,xa,jb,ob){xa=xa[aa];"undefined"!==typeof xa&&(ob&&(xa=encodeURIComponent(JSON.stringify(xa))),jb.push(aa+"="+xa))}function y(aa){if("undefined"!==typeof aa){var xa=Number(aa);return isNaN(xa)||
xa!==parseInt(aa,10)?aa:xa}}function A(aa){aa.group_level=y(aa.group_level);aa.limit=y(aa.limit);aa.skip=y(aa.skip);return aa}function E(aa,xa){var jb=aa.descending?"endkey":"startkey",ob=aa.descending?"startkey":"endkey";if("undefined"!==typeof aa[jb]&&"undefined"!==typeof aa[ob]&&0<An(aa[jb],aa[ob]))throw new fB("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(xa.reduce&&!1!==aa.reduce){if(aa.include_docs)throw new fB("{include_docs:true} is invalid for reduce");
if(aa.keys&&1<aa.keys.length&&!aa.group&&!aa.group_level)throw new fB("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(pa){a:{if(pa=aa[pa]){if("number"!==typeof pa){pa=new fB('Invalid value for integer: "'+pa+'"');break a}if(0>pa){pa=new fB('Invalid value for positive integer: "'+pa+'"');break a}}pa=void 0}if(pa)throw pa;})}function F(aa,xa,jb){var ob=[],pa,ka="GET",wa,Ka;v("reduce",jb,ob);v("include_docs",jb,ob);v("attachments",jb,ob);
v("limit",jb,ob);v("descending",jb,ob);v("group",jb,ob);v("group_level",jb,ob);v("skip",jb,ob);v("stale",jb,ob);v("conflicts",jb,ob);v("startkey",jb,ob,!0);v("start_key",jb,ob,!0);v("endkey",jb,ob,!0);v("end_key",jb,ob,!0);v("inclusive_end",jb,ob);v("key",jb,ob,!0);v("update_seq",jb,ob);ob=ob.join("&");ob=""===ob?"":"?"+ob;if("undefined"!==typeof jb.keys){var Fb="keys="+encodeURIComponent(JSON.stringify(jb.keys));2E3>=Fb.length+ob.length+1?ob+=("?"===ob[0]?"&":"?")+Fb:(ka="POST","string"===typeof xa?
pa={keys:jb.keys}:xa.keys=jb.keys)}if("string"===typeof xa)return Fb=BS(xa),aa.fetch("_design/"+Fb[0]+"/_view/"+Fb[1]+ob,{headers:new SD({"Content-Type":"application/json"}),method:ka,body:JSON.stringify(pa)}).then(function(hc){wa=hc.ok;Ka=hc.status;return hc.json()}).then(function(hc){if(!wa)throw hc.status=Ka,ND(hc);hc.rows.forEach(function(Ub){if(Ub.value&&Ub.value.error&&"builtin_reduce_error"===Ub.value.error)throw Error(Ub.reason);});return hc}).then(r(jb));pa=pa||{};Object.keys(xa).forEach(function(hc){Array.isArray(xa[hc])?
pa[hc]=xa[hc]:pa[hc]=xa[hc].toString()});return aa.fetch("_temp_view"+ob,{headers:new SD({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(pa)}).then(function(hc){wa=hc.ok;Ka=hc.status;return hc.json()}).then(function(hc){if(!wa)throw hc.status=Ka,ND(hc);return hc}).then(r(jb))}function H(aa,xa,jb){return new Promise(function(ob,pa){aa._query(xa,jb,function(ka,wa){if(ka)return pa(ka);ob(wa)})})}function J(aa){return new Promise(function(xa,jb){aa._viewCleanup(function(ob,pa){if(ob)return jb(ob);
xa(pa)})})}function O(aa){return function(xa){if(404===xa.status)return aa;throw xa;}}function L(aa,xa,jb){function ob(Ka,Fb){for(var hc=[],Ub=new HG,ac=0,Ic=Fb.rows.length;ac<Ic;ac++){var Mb=Fb.rows[ac].doc;if(Mb&&(hc.push(Mb),Ub.add(Mb._id),Mb._deleted=!wa.has(Mb._id),!Mb._deleted)){var ed=wa.get(Mb._id);"value"in ed&&(Mb.value=ed.value)}}Fb=zS(wa);Fb.forEach(function(Bd){if(!Ub.has(Bd)){var ja={_id:Bd};Bd=wa.get(Bd);"value"in Bd&&(ja.value=Bd.value);hc.push(ja)}});Ka.keys=o2(Fb.concat(Ka.keys));
hc.push(Ka);return hc}var pa="_local/doc_"+aa,ka={_id:pa,keys:[]};aa=jb.get(aa);var wa=aa[0];pa=mha(aa[1])?Promise.resolve(ka):xa.db.get(pa).catch(O(ka));return pa.then(function(Ka){return(Ka.keys.length?xa.db.allDocs({keys:Ka.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Fb){return ob(Ka,Fb)})})}function Y(aa,xa,jb){return aa.db.get("_local/lastSeq").catch(O({_id:"_local/lastSeq",seq:0})).then(function(ob){var pa=zS(xa);return Promise.all(pa.map(function(ka){return L(ka,aa,xa)})).then(function(ka){ka=
kL(ka);ob.seq=jb;ka.push(ob);return aa.db.bulkDocs({docs:ka})})})}function S(aa){aa="string"===typeof aa?aa:aa.name;var xa=y$[aa];xa||(xa=y$[aa]=new IG);return xa}function ea(aa){return yS(S(aa),function(){return qa(aa)})()}function qa(aa){function xa(hc,Ub){return function(){return Y(aa,hc,Ub)}}function jb(){return aa.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Ka,limit:50}).then(ob)}function ob(hc){hc=hc.results;if(hc.length){for(var Ub=new Xq,ac=0,Ic=hc.length;ac<
Ic;ac++){var Mb=hc[ac];if("_"!==Mb.doc._id[0]){pa=[];ka=Mb.doc;if(!ka._deleted){var ed=aa.sourceDB;try{wa(ka)}catch(zd){t2(ed,zd)}}pa.sort(k);ed=void 0;for(var Bd=pa,ja=new Xq,Ba=0,Ea=Bd.length;Ba<Ea;Ba++){var wb=Bd[Ba],$b=[wb.key,wb.id];0<Ba&&0===An(wb.key,ed)&&$b.push(Ba);ja.set(qt($b),wb);ed=wb.key}Ub.set(Mb.doc._id,[ja,Mb.changes])}Ka=Mb.seq}Fb.add(xa(Ub,Ka));if(!(50>hc.length))return jb()}}var pa,ka,wa=h(aa.mapFun,function(hc,Ub){hc={id:ka._id,key:bB(hc)};"undefined"!==typeof Ub&&null!==Ub&&
(hc.value=bB(Ub));pa.push(hc)}),Ka=aa.seq||0,Fb=new IG;return jb().then(function(){return Fb.finish()}).then(function(){aa.seq=Ka})}function Fa(aa,xa,jb){0===jb.group_level&&delete jb.group_level;var ob=jb.group||jb.group_level,pa=n(aa.reduceFun),ka=[],wa=isNaN(jb.group_level)?Number.POSITIVE_INFINITY:jb.group_level;xa.forEach(function(ac){var Ic=ka[ka.length-1],Mb=ob?ac.key:null;ob&&Array.isArray(Mb)&&(Mb=Mb.slice(0,wa));Ic&&0===An(Ic.groupKey,Mb)?(Ic.keys.push([ac.key,ac.id]),Ic.values.push(ac.value)):
ka.push({keys:[[ac.key,ac.id]],values:[ac.value],groupKey:Mb})});xa=[];for(var Ka=0,Fb=ka.length;Ka<Fb;Ka++){var hc=ka[Ka],Ub=d(aa.sourceDB,pa,hc.keys,hc.values,!1);if(Ub.error&&Ub.error instanceof tL)throw Ub.error;xa.push({value:Ub.error?null:Ub.output,key:hc.groupKey})}return{rows:a(xa,jb.limit,jb.skip)}}function K(aa,xa){return yS(S(aa),function(){return Z(aa,xa)})()}function Z(aa,xa){function jb(Ub){Ub.include_docs=!0;return aa.db.allDocs(Ub).then(function(ac){pa=ac.total_rows;return ac.rows.map(function(Ic){if("value"in
Ic.doc&&"object"===typeof Ic.doc.value&&null!==Ic.doc.value){var Mb=Object.keys(Ic.doc.value).sort(),ed=["id","key","value"];if(!(Mb<ed||Mb>ed))return Ic.doc.value}a:{Mb=Ic.doc._id;ed=[];for(var Bd=[],ja=0;;){var Ba=Mb[ja++];if("\x00"===Ba)if(1===ed.length){Mb=ed.pop();break a}else{var Ea=ed;var wb=Bd;Ba=Ea.pop();if(wb.length){var $b=wb[wb.length-1];Ba===$b.element&&(wb.pop(),$b=wb[wb.length-1]);wb=$b.element;$b=$b.index;Array.isArray(wb)?wb.push(Ba):$b===Ea.length-2?(Ea=Ea.pop(),wb[Ea]=Ba):Ea.push(Ba)}continue}switch(Ba){case "1":ed.push(null);
break;case "2":ed.push("1"===Mb[ja]);ja++;break;case "3":$b=Mb;Ea=Ba=ja;if("1"===$b[Ba])$b=0,Ba++;else{wb="0"===$b[Ba];Ba++;var zd="",yd=$b.substring(Ba,Ba+3);yd=parseInt(yd,10)+-324;wb&&(yd=-yd);for(Ba+=3;;){var Mc=$b[Ba];if("\x00"===Mc)break;else zd+=Mc;Ba++}zd=zd.split(".");$b=1===zd.length?parseInt(zd,10):parseFloat(zd[0]+"."+zd[1]);wb&&($b-=10);0!==yd&&($b=parseFloat($b+"e"+yd))}wb=$b;Ba-=Ea;ed.push(wb);ja+=Ba;break;case "4":for(Ba="";;){Ea=Mb[ja];if("\x00"===Ea)break;Ba+=Ea;ja++}Ba=Ba.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");ed.push(Ba);break;case "5":Ba={element:[],index:ed.length};ed.push(Ba.element);Bd.push(Ba);break;case "6":Ba={element:{},index:ed.length};ed.push(Ba.element);Bd.push(Ba);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+Ba);}}}return{key:Mb[0],id:Mb[1],value:"value"in Ic.doc?Ic.doc.value:null}})})}function ob(Ub){var ac=ka?Fa(aa,Ub,xa):{total_rows:pa,offset:wa,rows:Ub};xa.update_seq&&(ac.update_seq=
aa.seq);if(xa.include_docs){var Ic=o2(Ub.map(f));return aa.sourceDB.allDocs({keys:Ic,include_docs:!0,conflicts:xa.conflicts,attachments:xa.attachments,binary:xa.binary}).then(function(Mb){var ed=new Xq;Mb.rows.forEach(function(Bd){ed.set(Bd.id,Bd.doc)});Ub.forEach(function(Bd){var ja=f(Bd);if(ja=ed.get(ja))Bd.doc=ja});return ac})}return ac}var pa,ka=aa.reduceFun&&!1!==xa.reduce,wa=xa.skip||0;"undefined"===typeof xa.keys||xa.keys.length||(xa.limit=0,delete xa.keys);if("undefined"!==typeof xa.keys){var Ka=
xa.keys.map(function(Ub){Ub={startkey:qt([Ub]),endkey:qt([Ub,{}])};xa.update_seq&&(Ub.update_seq=!0);return jb(Ub)});return Promise.all(Ka).then(kL).then(ob)}Ka={descending:xa.descending};xa.update_seq&&(Ka.update_seq=!0);if("start_key"in xa)var Fb=xa.start_key;"startkey"in xa&&(Fb=xa.startkey);if("end_key"in xa)var hc=xa.end_key;"endkey"in xa&&(hc=xa.endkey);"undefined"!==typeof Fb&&(Ka.startkey=xa.descending?qt([Fb,{}]):qt([Fb]));"undefined"!==typeof hc&&(Fb=!1!==xa.inclusive_end,xa.descending&&
(Fb=!Fb),Ka.endkey=qt(Fb?[hc,{}]:[hc]));"undefined"!==typeof xa.key&&(hc=qt([xa.key]),Fb=qt([xa.key,{}]),Ka.descending?(Ka.endkey=hc,Ka.startkey=Fb):(Ka.startkey=hc,Ka.endkey=Fb));ka||("number"===typeof xa.limit&&(Ka.limit=xa.limit),Ka.skip=wa);return jb(Ka).then(ob)}function R(aa){return aa.fetch("_view_cleanup",{headers:new SD({"Content-Type":"application/json"}),method:"POST"}).then(function(xa){return xa.json()})}function U(aa){return aa.get("_local/"+c).then(function(xa){var jb=new Xq;Object.keys(xa.views).forEach(function(pa){var ka=
BS(pa);pa="_design/"+ka[0];ka=ka[1];var wa=jb.get(pa);wa||(wa=new HG,jb.set(pa,wa));wa.add(ka)});var ob={keys:zS(jb),include_docs:!0};return aa.allDocs(ob).then(function(pa){var ka={};pa.rows.forEach(function(wa){var Ka=wa.key.substring(8);jb.get(wa.key).forEach(function(Fb){var hc=Ka+"/"+Fb;xa.views[hc]||(hc=Fb);hc=Object.keys(xa.views[hc]);var Ub=wa.doc&&wa.doc.views&&wa.doc.views[Fb];hc.forEach(function(ac){ka[ac]=ka[ac]||Ub})})});pa=Object.keys(ka).filter(function(wa){return!ka[wa]}).map(function(wa){return yS(S(wa),
function(){return(new aa.constructor(wa,aa.__opts)).destroy()})()});return Promise.all(pa).then(function(){return{ok:!0}})})},O({ok:!0}))}function na(aa,xa,jb){if("function"===typeof aa._query)return H(aa,xa,jb);if(jv(aa))return F(aa,xa,jb);if("string"!==typeof xa)return E(jb,xa),z$.add(function(){return s2(aa,"temp_view/temp_view",xa.map,xa.reduce,!0,c).then(function(ka){return hha(ea(ka).then(function(){return K(ka,jb)}),function(){return ka.db.destroy()})})}),z$.finish();var ob=BS(xa),pa=ob[1];
return aa.get("_design/"+ob[0]).then(function(ka){var wa=ka.views&&ka.views[pa];if(!wa)throw new sL("ddoc "+ka._id+" has no view named "+pa);b(ka,pa);E(jb,wa);return s2(aa,xa,wa.map,wa.reduce,!1,c).then(function(Ka){return"ok"===jb.stale||"update_after"===jb.stale?("update_after"===jb.stale&&kv(function(){ea(Ka)}),K(Ka,jb)):ea(Ka).then(function(){return K(Ka,jb)})})})}return{query:function(aa,xa,jb){var ob=this;"function"===typeof xa&&(jb=xa,xa={});xa=xa?A(xa):{};"function"===typeof aa&&(aa={map:aa});
var pa=Promise.resolve().then(function(){return na(ob,aa,xa)});n2(pa,jb);return pa},viewCleanup:gha(function(){return"function"===typeof this._viewCleanup?J(this):jv(this)?R(this):U(this)})}}("mrviews",function(c,h){return"function"===typeof c&&2===c.length?function(n){return c(n,h)}:q2(c.toString(),h)},function(c){c=c.toString();if(/^_sum/.test(c))var h=$pa;else if(/^_count/.test(c))h=aqa;else if(/^_stats/.test(c))h=bqa;else{if(/^_/.test(c))throw Error(c+" is not a supported reduce function.");h=
void 0}return h?h:q2(c)},function(c,h){var n=c.views&&c.views[h];if("string"!==typeof n.map)throw new sL("ddoc "+c._id+" has no string view named "+h+", instead found object of type: "+typeof n.map);});JG.prototype.writeCheckpoint=function(c,h){var n=this;return this.updateTarget(c,h).then(function(){return n.updateSource(c,h)})};JG.prototype.updateTarget=function(c,h){return this.opts.writeTargetCheckpoint?CS(this.target,this.id,c,h,this.returnValue):Promise.resolve(!0)};JG.prototype.updateSource=
function(c,h){if(this.opts.writeSourceCheckpoint){var n=this;return CS(this.src,this.id,c,h,this.returnValue).catch(function(b){if(w2(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var B$={undefined:function(c,h){return 0===An(c.last_seq,h.last_seq)?h.last_seq:0},1:function(c,h){c=h.session_id===c.session_id?{last_seq:h.last_seq,history:h.history}:v2(h.history,c.history);return c.last_seq}};JG.prototype.getCheckpoint=function(){var c=this;return c.opts&&c.opts.writeSourceCheckpoint&&
!c.opts.writeTargetCheckpoint?c.src.get(c.id).then(function(h){return h.last_seq||0}).catch(function(h){if(404!==h.status)throw h;return 0}):c.target.get(c.id).then(function(h){return c.opts&&c.opts.writeTargetCheckpoint&&!c.opts.writeSourceCheckpoint?h.last_seq||0:c.src.get(c.id).then(function(n){if(h.version!==n.version)return 0;var b=h.version?h.version.toString():"undefined";return b in B$?B$[b](h,n):0},function(n){if(404===n.status&&h.last_seq)return c.src.put({_id:c.id,last_seq:0}).then(function(){return 0},
function(b){return w2(b)?(c.opts.writeSourceCheckpoint=!1,h.last_seq):0});throw n;})}).catch(function(h){if(404!==h.status)throw h;return 0})};Pt(uL,$p.EventEmitter);uL.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};uL.prototype.ready=function(c,h){function n(){b.cancel()}var b=this;b._readyCalled||(b._readyCalled=!0,c.once("destroyed",n),h.once("destroyed",n),b.once("complete",function(){c.removeListener("destroyed",n);h.removeListener("destroyed",n)}))};
Pt(FS,$p.EventEmitter);FS.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};Ai.plugin(function(c){c.adapter("idb",k2,!0)}).plugin(function(c){c.adapter("http",wS,!1);c.adapter("https",wS,!1)}).plugin({query:function(c,h,n){return A$.query.call(this,c,h,n)},viewCleanup:function(c){return A$.viewCleanup.call(this,c)}}).plugin(function(c){c.replicate=ES;c.sync=tha;Object.defineProperty(c.prototype,"replicate",{get:function(){var h=this;"undefined"===
typeof this.replicateMethods&&(this.replicateMethods={from:function(n,b,d){return h.constructor.replicate(n,h,b,d)},to:function(n,b,d){return h.constructor.replicate(h,n,b,d)}});return this.replicateMethods}});c.prototype.sync=function(h,n,b){return this.constructor.sync(this,h,n,b)}});var cqa=Xpa=Ai,Lz={};Object.defineProperty(Lz,"__esModule",{value:!0});Wy.prototype.get=function(c){return this._store["$"+c]};Wy.prototype.set=function(c,h){this._store["$"+c]=h;return!0};Wy.prototype.has=function(c){return"$"+
c in this._store};Wy.prototype.delete=function(c){c="$"+c;var h=c in this._store;delete this._store[c];return h};Wy.prototype.forEach=function(c){for(var h=Object.keys(this._store),n=0,b=h.length;n<b;n++){var d=h[n],k=this._store[d];d=d.substring(1);c(k,d)}};Object.defineProperty(Wy.prototype,"size",{get:function(){return Object.keys(this._store).length}});KG.prototype.add=function(c){return this._store.set(c,!0)};KG.prototype.has=function(c){return this._store.has(c)};KG.prototype.forEach=function(c){this._store.forEach(function(h,
n){c(n)})};Object.defineProperty(KG.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var c=Object.getOwnPropertyDescriptor(Map,Symbol.species);return c&&"get"in c&&Map[Symbol.species]===Map})()?(Lz.Set=Set,Lz.Map=Map):(Lz.Set=KG,Lz.Map=Wy);var cX={},dX=bj;cX.test=function(){return"undefined"!==typeof dX&&!dX.browser};cX.install=function(c){return function(){dX.nextTick(c)}};var C$="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eX="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fX={},D$=eX.MutationObserver||eX.WebKitMutationObserver;fX.test=function(){return D$};fX.install=function(c){var h=0;c=new D$(c);var n=eX.document.createTextNode("");c.observe(n,{characterData:!0});return function(){n.data=h=++h%2}};var gX="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xO="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,dqa={},mI=[cX,{test:function(){return"function"===typeof C$.queueMicrotask},install:function(c){return function(){C$.queueMicrotask(c)}}},fX,{test:function(){return gX.setImmediate?!1:"undefined"!==typeof gX.MessageChannel},install:function(c){var h=new gX.MessageChannel;h.port1.onmessage=c;return function(){h.port2.postMessage(0)}}},{test:function(){return"document"in xO&&"onreadystatechange"in xO.document.createElement("script")},install:function(c){return function(){var h=
xO.document.createElement("script");h.onreadystatechange=function(){c();h.onreadystatechange=null;h.parentNode.removeChild(h);h=null};xO.document.documentElement.appendChild(h);return c}}},{test:function(){return!0},install:function(c){return function(){setTimeout(c,0)}}}],TD,gB,LG=-1,Xy=[],GS=!1,nI=-1,eqa=mI.length;for(;++nI<eqa;)if(mI[nI]&&mI[nI].test&&mI[nI].test()){var fqa=mI[nI].install(y2);break}z2.prototype.run=function(){var c=this.fun,h=this.array;switch(h.length){case 0:return c();case 1:return c(h[0]);
case 2:return c(h[0],h[1]);case 3:return c(h[0],h[1],h[2]);default:return c.apply(null,h)}};var Cj=dqa=function(c){var h=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];Xy.push(new z2(c,h));GS||TD||(GS=!0,fqa())},Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});(il&&"object"===typeof il&&"default"in il?il["default"]:il)(Nk,Error);Nk.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,
reason:this.reason})};var gqa=new Nk(401,"unauthorized","Name or password is incorrect."),hqa=new Nk(400,"bad_request","Missing JSON list of 'docs'"),iqa=new Nk(404,"not_found","missing"),jqa=new Nk(409,"conflict","Document update conflict"),kqa=new Nk(400,"bad_request","_id field must contain a string"),lqa=new Nk(412,"missing_id","_id is required for puts"),mqa=new Nk(400,"bad_request","Only reserved document ids may start with underscore."),nqa=new Nk(412,"precondition_failed","Database not open"),
E$=new Nk(500,"unknown_error","Database encountered an unknown error"),oqa=new Nk(500,"badarg","Some query argument is invalid"),pqa=new Nk(400,"invalid_request","Request was invalid"),qqa=new Nk(400,"query_parse_error","Some query parameter is invalid"),rqa=new Nk(500,"doc_validation","Bad special document member"),sqa=new Nk(400,"bad_request","Something wrong with the request"),tqa=new Nk(400,"bad_request","Document must be a JSON object"),uqa=new Nk(404,"not_found","Database not found"),vqa=new Nk(500,
"indexed_db_went_bad","unknown"),wqa=new Nk(500,"web_sql_went_bad","unknown"),xqa=new Nk(500,"levelDB_went_went_bad","unknown"),yqa=new Nk(403,"forbidden","Forbidden by design doc validate_doc_update function"),zqa=new Nk(400,"bad_request","Invalid rev format"),Aqa=new Nk(412,"file_exists","The database could not be created, the file already exists."),Bqa=new Nk(412,"missing_stub","A pre-existing attachment stub wasn't found"),Cqa=new Nk(413,"invalid_url","Provided URL is invalid");Fg.UNAUTHORIZED=
gqa;Fg.MISSING_BULK_DOCS=hqa;Fg.MISSING_DOC=iqa;Fg.REV_CONFLICT=jqa;Fg.INVALID_ID=kqa;Fg.MISSING_ID=lqa;Fg.RESERVED_ID=mqa;Fg.NOT_OPEN=nqa;Fg.UNKNOWN_ERROR=E$;Fg.BAD_ARG=oqa;Fg.INVALID_REQUEST=pqa;Fg.QUERY_PARSE_ERROR=qqa;Fg.DOC_VALIDATION=rqa;Fg.BAD_REQUEST=sqa;Fg.NOT_AN_OBJECT=tqa;Fg.DB_MISSING=uqa;Fg.WSQ_ERROR=wqa;Fg.LDB_ERROR=xqa;Fg.FORBIDDEN=yqa;Fg.INVALID_REV=zqa;Fg.FILE_EXISTS=Aqa;Fg.MISSING_STUB=Bqa;Fg.IDB_ERROR=vqa;Fg.INVALID_URL=Cqa;Fg.createError=function(c,h){function n(b){for(var d=Object.getOwnPropertyNames(c),
k=0,a=d.length;k<a;k++)"function"!==typeof c[d[k]]&&(this[d[k]]=c[d[k]]);void 0!==b&&(this.reason=b)}n.prototype=Nk.prototype;return new n(h)};Fg.generateErrorFromResponse=function(c){if("object"!==typeof c){var h=c;c=E$;c.data=h}"error"in c&&"conflict"===c.error&&(c.name="conflict",c.status=409);"name"in c||(c.name=c.error||"unknown");"status"in c||(c.status=500);"message"in c||(c.message=c.message||c.reason);return c};var Dqa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,hX=Object.prototype.toString,
yO=function(c){return!(Dqa&&c&&"object"==typeof c&&Symbol.toStringTag in c)&&"[object Arguments]"===hX.call(c)},F$=function(c){return!!yO(c)||null!==c&&"object"==typeof c&&"number"==typeof c.length&&0<=c.length&&"[object Array]"!==hX.call(c)&&"[object Function]"===hX.call(c.callee)},Eqa=function(){return yO(arguments)}();yO.isLegacyArguments=F$;var Fqa=Eqa?yO:F$,Gqa=Object.prototype.toString,Hqa=Function.prototype.toString,Iqa=/^\s*(?:function)?\*/,G$="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
H$=Object.getPrototypeOf;a:if(G$){try{var zO=Function("return function*() {}")();break a}catch(c){}zO=void 0}else zO=!1;var Jqa=zO?H$(zO):{},oi="function"==typeof Object.create?function(c,h){h&&(c.super_=h,c.prototype=Object.create(h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:function(c,h){if(h){c.super_=h;var n=function(){};n.prototype=h.prototype;c.prototype=new n;c.prototype.constructor=c}},I$=function(c){return c&&"object"==typeof c&&"function"==typeof c.copy&&
"function"==typeof c.fill&&"function"==typeof c.readUInt8},fj={},vha=I$,T2="undefined"!=typeof BigInt,IS="undefined"!=typeof Symbol,Yq=IS&&void 0!==Symbol.toStringTag,aq="undefined"!=typeof Uint8Array,Kqa="undefined"!=typeof ArrayBuffer;if(aq&&Yq)var Lqa=Object.getPrototypeOf(Uint8Array.prototype),Zr=hB(Object.getOwnPropertyDescriptor(Lqa,Symbol.toStringTag).get);var El=hB(Object.prototype.toString),wha=hB(Number.prototype.valueOf),xha=hB(String.prototype.valueOf),yha=hB(Boolean.prototype.valueOf);
if(T2)var zha=hB(BigInt.prototype.valueOf);if(IS)var Aha=hB(Symbol.prototype.valueOf);fj.isArgumentsObject=Fqa;fj.isGeneratorFunction=function(c){return"function"==typeof c&&(!!Iqa.test(Hqa.call(c))||(G$?H$(c)===Jqa:"[object GeneratorFunction]"===Gqa.call(c)))};fj.isPromise=function(c){return"undefined"!=typeof Promise&&c instanceof Promise||null!==c&&"object"==typeof c&&"function"==typeof c.then&&"function"==typeof c.catch};fj.isArrayBufferView=function(c){return Kqa&&ArrayBuffer.isView?ArrayBuffer.isView(c):
A2(c)||N2(c)};fj.isTypedArray=A2;fj.isUint8Array=B2;fj.isUint8ClampedArray=C2;fj.isUint16Array=D2;fj.isUint32Array=E2;fj.isInt8Array=F2;fj.isInt16Array=G2;fj.isInt32Array=H2;fj.isFloat32Array=I2;fj.isFloat64Array=J2;fj.isBigInt64Array=K2;fj.isBigUint64Array=L2;wL.working="undefined"!=typeof Map&&wL(new Map);fj.isMap=function(c){return"undefined"!=typeof Map&&(wL.working?wL(c):c instanceof Map)};xL.working="undefined"!=typeof Set&&xL(new Set);fj.isSet=function(c){return"undefined"!=typeof Set&&(xL.working?
xL(c):c instanceof Set)};yL.working="undefined"!=typeof WeakMap&&yL(new WeakMap);fj.isWeakMap=function(c){return"undefined"!=typeof WeakMap&&(yL.working?yL(c):c instanceof WeakMap)};HS.working="undefined"!=typeof WeakSet&&HS(new WeakSet);fj.isWeakSet=function(c){return HS(c)};zL.working="undefined"!=typeof ArrayBuffer&&zL(new ArrayBuffer);fj.isArrayBuffer=M2;AL.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&AL(new DataView(new ArrayBuffer(1),0,1));fj.isDataView=N2;BL.working=
"undefined"!=typeof SharedArrayBuffer&&BL(new SharedArrayBuffer);fj.isSharedArrayBuffer=O2;fj.isAsyncFunction=function(c){return"[object AsyncFunction]"===El(c)};fj.isMapIterator=function(c){return"[object Map Iterator]"===El(c)};fj.isSetIterator=function(c){return"[object Set Iterator]"===El(c)};fj.isGeneratorObject=function(c){return"[object Generator]"===El(c)};fj.isWebAssemblyCompiledModule=function(c){return"[object WebAssembly.Module]"===El(c)};fj.isNumberObject=P2;fj.isStringObject=Q2;fj.isBooleanObject=
R2;fj.isBigIntObject=S2;fj.isSymbolObject=U2;fj.isBoxedPrimitive=function(c){return P2(c)||Q2(c)||R2(c)||S2(c)||U2(c)};fj.isAnyArrayBuffer=function(c){return aq&&(M2(c)||O2(c))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(c){Object.defineProperty(fj,c,{enumerable:!1,value:function(){throw Error(c+" is not supported in userland");}})});var oI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Oh={},Sv=bj,J$=Object.getOwnPropertyDescriptors||function(c){for(var h=
Object.keys(c),n={},b=0;b<h.length;b++)n[h[b]]=Object.getOwnPropertyDescriptor(c,h[b]);return n},Mqa=/%[sdj%]/g;Oh.format=function(c){if(!EL(c)){for(var h=[],n=0;n<arguments.length;n++)h.push(Yy(arguments[n]));return h.join(" ")}n=1;var b=arguments,d=b.length;h=String(c).replace(Mqa,function(a){if("%%"===a)return"%";if(n>=d)return a;switch(a){case "%s":return String(b[n++]);case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(f){return"[Circular]"}default:return a}});
for(var k=b[n];n<d;k=b[++n])null!==k&&UD(k)?h+=" "+Yy(k):h+=" "+k;return h};Oh.deprecate=function(c,h){if(void 0!==Sv&&!0===Sv.noDeprecation)return c;if(void 0===Sv)return function(){return Oh.deprecate(c,h).apply(this||oI,arguments)};var n=!1;return function(){if(!n){if(Sv.throwDeprecation)throw Error(h);Sv.traceDeprecation?console.trace(h):console.error(h);n=!0}return c.apply(this||oI,arguments)}};var AO={},K$=/^$/;if(Sv.env.NODE_DEBUG){var iX=Sv.env.NODE_DEBUG;iX=iX.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();K$=new RegExp("^"+iX+"$","i")}Oh.debuglog=function(c){if(c=c.toUpperCase(),!AO[c])if(K$.test(c)){var h=Sv.pid;AO[c]=function(){var n=Oh.format.apply(Oh,arguments);console.error("%s %d: %s",c,h,n)}}else AO[c]=function(){};return AO[c]};Oh.inspect=Yy;Yy.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};
Yy.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Oh.types=fj;Oh.isArray=W2;Oh.isBoolean=JS;Oh.isNull=function(c){return null===c};Oh.isNullOrUndefined=function(c){return null==c};Oh.isNumber=V2;Oh.isString=EL;Oh.isSymbol=function(c){return"symbol"==typeof c};Oh.isUndefined=iB;Oh.isRegExp=OG;Oh.types.isRegExp=OG;Oh.isObject=UD;Oh.isDate=FL;Oh.types.isDate=FL;Oh.isError=NG;Oh.types.isNativeError=NG;Oh.isFunction=DL;Oh.isPrimitive=
function(c){return null===c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||"symbol"==typeof c||void 0===c};Oh.isBuffer=I$;var Eha="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Oh.log=function(){console.log("%s - %s",Dha(),Oh.format.apply(Oh,arguments))};Oh.inherits=oi;Oh._extend=function(c,h){if(!h||!UD(h))return c;for(var n=Object.keys(h),b=n.length;b--;)c[n[b]]=h[n[b]];return c};var dC="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Oh.promisify=function(c){function h(){for(var n,
b,d=new Promise(function(f,l){n=f;b=l}),k=[],a=0;a<arguments.length;a++)k.push(arguments[a]);k.push(function(f,l){f?b(f):n(l)});try{c.apply(this||oI,k)}catch(f){b(f)}return d}if("function"!=typeof c)throw new TypeError('The "original" argument must be of type Function');if(dC&&c[dC]){if("function"!=typeof(h=c[dC]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(h,dC,{value:h,enumerable:!1,writable:!1,configurable:!0}),h}return Object.setPrototypeOf(h,
Object.getPrototypeOf(c)),dC&&Object.defineProperty(h,dC,{value:h,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(h,J$(c))};Oh.promisify.custom=dC;Oh.callbackify=function(c){function h(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var d=n.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var k=this||oI,a=function(){return d.apply(k,arguments)};c.apply(this||oI,n).then(function(f){Sv.nextTick(a.bind(null,null,f))},function(f){Sv.nextTick(Fha.bind(null,
f,a))})}if("function"!=typeof c)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(h,Object.getPrototypeOf(c)),Object.defineProperties(h,J$(c)),h};for(var mv=[],Ds=[],Nqa="undefined"!=typeof Uint8Array?Uint8Array:Array,ZE=0;64>ZE;++ZE)mv[ZE]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[ZE],Ds["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ZE)]=ZE;Ds[45]=62;Ds[95]=63;var ei={},RS={byteLength:function(c){c=
X2(c);var h=c[1];return 3*(c[0]+h)/4-h},toByteArray:function(c){var h=X2(c);var n=h[0];h=h[1];var b=new Nqa(3*(n+h)/4-h),d=0,k=0<h?n-4:n;for(n=0;n<k;n+=4){var a=Ds[c.charCodeAt(n)]<<18|Ds[c.charCodeAt(n+1)]<<12|Ds[c.charCodeAt(n+2)]<<6|Ds[c.charCodeAt(n+3)];b[d++]=a>>16&255;b[d++]=a>>8&255;b[d++]=255&a}2===h&&(a=Ds[c.charCodeAt(n)]<<2|Ds[c.charCodeAt(n+1)]>>4,b[d++]=255&a);1===h&&(a=Ds[c.charCodeAt(n)]<<10|Ds[c.charCodeAt(n+1)]<<4|Ds[c.charCodeAt(n+2)]>>2,b[d++]=a>>8&255,b[d++]=255&a);return b},fromByteArray:function(c){for(var h,
n=c.length,b=n%3,d=[],k=0,a=n-b;k<a;k+=16383)d.push(Gha(c,k,k+16383>a?a:k+16383));1===b?(h=c[n-1],d.push(mv[h>>2]+mv[h<<4&63]+"==")):2===b&&(h=(c[n-2]<<8)+c[n-1],d.push(mv[h>>10]+mv[h>>4&63]+mv[h<<2&63]+"="));return d.join("")}},VD={read:function(c,h,n,b,d){var k=8*d-b-1;var a=(1<<k)-1,f=a>>1,l=-7;d=n?d-1:0;var r=n?-1:1,v=c[h+d];d+=r;n=v&(1<<-l)-1;v>>=-l;for(l+=k;0<l;n=256*n+c[h+d],d+=r,l-=8);k=n&(1<<-l)-1;n>>=-l;for(l+=b;0<l;k=256*k+c[h+d],d+=r,l-=8);if(0===n)n=1-f;else{if(n===a)return k?NaN:1/0*
(v?-1:1);k+=Math.pow(2,b);n-=f}return(v?-1:1)*k*Math.pow(2,n-b)},write:function(c,h,n,b,d,k){var a,f,l,r=8*k-d-1,v=(1<<r)-1,y=v>>1,A=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;k=b?0:k-1;b=b?1:-1;var E=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);for(isNaN(h)||h===1/0?(f=isNaN(h)?1:0,a=v):(a=Math.floor(Math.log(h)/Math.LN2),1>h*(l=Math.pow(2,-a))&&(a--,l*=2),2<=(h+=1<=a+y?A/l:A*Math.pow(2,1-y))*l&&(a++,l/=2),a+y>=v?(f=0,a=v):1<=a+y?(f=(h*l-1)*Math.pow(2,d),a+=y):(f=h*Math.pow(2,y-1)*Math.pow(2,d),a=0));8<=d;c[n+
k]=255&f,k+=b,f/=256,d-=8);a=a<<d|f;for(r+=d;0<r;c[n+k]=255&a,k+=b,a/=256,r-=8);c[n+k-b]|=128*E}},L$="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ei.Buffer=Ne;ei.SlowBuffer=function(c){+c!=c&&(c=0);return Ne.alloc(+c)};ei.INSPECT_MAX_BYTES=50;ei.kMaxLength=2147483647;Ne.TYPED_ARRAY_SUPPORT=function(){try{var c=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(c,h),42===
c.foo()}catch(n){return!1}}();Ne.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(Ne.prototype,"parent",{enumerable:!0,get:function(){if(Ne.isBuffer(this))return this.buffer}});Object.defineProperty(Ne.prototype,"offset",{enumerable:!0,get:function(){if(Ne.isBuffer(this))return this.byteOffset}});
Ne.poolSize=8192;Ne.from=function(c,h,n){return Y2(c,h,n)};Object.setPrototypeOf(Ne.prototype,Uint8Array.prototype);Object.setPrototypeOf(Ne,Uint8Array);Ne.alloc=function(c,h,n){return $2(c),0>=c?bx(c):void 0!==h?"string"==typeof n?bx(c).fill(h,n):bx(c).fill(h):bx(c)};Ne.allocUnsafe=function(c){return NS(c)};Ne.allocUnsafeSlow=function(c){return NS(c)};Ne.isBuffer=function(c){return null!=c&&!0===c._isBuffer&&c!==Ne.prototype};Ne.compare=function(c,h){if(cx(c,Uint8Array)&&(c=Ne.from(c,c.offset,c.byteLength)),
cx(h,Uint8Array)&&(h=Ne.from(h,h.offset,h.byteLength)),!Ne.isBuffer(c)||!Ne.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===h)return 0;for(var n=c.length,b=h.length,d=0,k=Math.min(n,b);d<k;++d)if(c[d]!==h[d]){n=c[d];b=h[d];break}return n<b?-1:b<n?1:0};Ne.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};Ne.concat=function(c,h){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return Ne.alloc(0);var n;if(void 0===h)for(n=h=0;n<c.length;++n)h+=c[n].length;h=Ne.allocUnsafe(h);var b=0;for(n=0;n<c.length;++n){var d=c[n];if(cx(d,Uint8Array)&&(d=Ne.from(d)),!Ne.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(h,b);b+=d.length}return h};Ne.byteLength=Z2;Ne.prototype._isBuffer=!0;Ne.prototype.swap16=
function(){var c=this.length;if(0!=c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<c;h+=2)jB(this,h,h+1);return this};Ne.prototype.swap32=function(){var c=this.length;if(0!=c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<c;h+=4)jB(this,h,h+3),jB(this,h+1,h+2);return this};Ne.prototype.swap64=function(){var c=this.length;if(0!=c%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<c;h+=8)jB(this,h,
h+7),jB(this,h+1,h+6),jB(this,h+2,h+5),jB(this,h+3,h+4);return this};Ne.prototype.toString=function(){var c=this.length;return 0===c?"":0===arguments.length?b3(this,0,c):Iha.apply(this,arguments)};Ne.prototype.toLocaleString=Ne.prototype.toString;Ne.prototype.equals=function(c){if(!Ne.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c||0===Ne.compare(this,c)};Ne.prototype.inspect=function(){var c="",h=ei.INSPECT_MAX_BYTES;return c=this.toString("hex",0,h).replace(/(.{2})/g,
"$1 ").trim(),this.length>h&&(c+=" ... "),"<Buffer "+c+">"};L$&&(Ne.prototype[L$]=Ne.prototype.inspect);Ne.prototype.compare=function(c,h,n,b,d){if(cx(c,Uint8Array)&&(c=Ne.from(c,c.offset,c.byteLength)),!Ne.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(void 0===h&&(h=0),void 0===n&&(n=c?c.length:0),void 0===b&&(b=0),void 0===d&&(d=this.length),0>h||n>c.length||0>b||d>this.length)throw new RangeError("out of range index");
if(b>=d&&h>=n)return 0;if(b>=d)return-1;if(h>=n)return 1;if(this===c)return 0;var k=(d>>>=0)-(b>>>=0),a=(n>>>=0)-(h>>>=0),f=Math.min(k,a);b=this.slice(b,d);c=c.slice(h,n);for(h=0;h<f;++h)if(b[h]!==c[h]){k=b[h];a=c[h];break}return k<a?-1:a<k?1:0};Ne.prototype.includes=function(c,h,n){return-1!==this.indexOf(c,h,n)};Ne.prototype.indexOf=function(c,h,n){return c3(this,c,h,n,!0)};Ne.prototype.lastIndexOf=function(c,h,n){return c3(this,c,h,n,!1)};Ne.prototype.write=function(c,h,n,b){if(void 0===h)b="utf8",
n=this.length,h=0;else if(void 0===n&&"string"==typeof h)b=h,n=this.length,h=0;else{if(!isFinite(h))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var d=this.length-h;if((void 0===n||n>d)&&(n=d),0<c.length&&(0>n||0>h)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(d=!1;;)switch(b){case "hex":a:{h=Number(h)||0;b=this.length-h;n?(n=Number(n))>b&&
(n=b):n=b;b=c.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){d=parseInt(c.substr(2*b,2),16);if(d!=d){n=b;break a}this[h+b]=d}n=b}return n;case "utf8":case "utf-8":return GL(QS(c,this.length-h),this,h,n);case "ascii":return e3(this,c,h,n);case "latin1":case "binary":return e3(this,c,h,n);case "base64":return GL(a3(c),this,h,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;d=this.length-h;for(var k=[],a=0;a<c.length&&!(0>(d-=2));++a){var f=c.charCodeAt(a);n=f>>8;f%=256;k.push(f);k.push(n)}return GL(k,
this,h,b);default:if(d)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();d=!0}};Ne.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Ne.prototype.slice=function(c,h){var n=this.length;0>(c=~~c)?0>(c+=n)&&(c=0):c>n&&(c=n);0>(h=void 0===h?n:~~h)?0>(h+=n)&&(h=0):h>n&&(h=n);h<c&&(h=c);c=this.subarray(c,h);return Object.setPrototypeOf(c,Ne.prototype),c};Ne.prototype.readUIntLE=function(c,h,n){c>>>=0;h>>>=0;n||Bn(c,h,this.length);n=this[c];
for(var b=1,d=0;++d<h&&(b*=256);)n+=this[c+d]*b;return n};Ne.prototype.readUIntBE=function(c,h,n){c>>>=0;h>>>=0;n||Bn(c,h,this.length);n=this[c+--h];for(var b=1;0<h&&(b*=256);)n+=this[c+--h]*b;return n};Ne.prototype.readUInt8=function(c,h){return c>>>=0,h||Bn(c,1,this.length),this[c]};Ne.prototype.readUInt16LE=function(c,h){return c>>>=0,h||Bn(c,2,this.length),this[c]|this[c+1]<<8};Ne.prototype.readUInt16BE=function(c,h){return c>>>=0,h||Bn(c,2,this.length),this[c]<<8|this[c+1]};Ne.prototype.readUInt32LE=
function(c,h){return c>>>=0,h||Bn(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};Ne.prototype.readUInt32BE=function(c,h){return c>>>=0,h||Bn(c,4,this.length),16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};Ne.prototype.readIntLE=function(c,h,n){c>>>=0;h>>>=0;n||Bn(c,h,this.length);n=this[c];for(var b=1,d=0;++d<h&&(b*=256);)n+=this[c+d]*b;return n>=128*b&&(n-=Math.pow(2,8*h)),n};Ne.prototype.readIntBE=function(c,h,n){c>>>=0;h>>>=0;n||Bn(c,h,this.length);n=h;for(var b=
1,d=this[c+--n];0<n&&(b*=256);)d+=this[c+--n]*b;return d>=128*b&&(d-=Math.pow(2,8*h)),d};Ne.prototype.readInt8=function(c,h){return c>>>=0,h||Bn(c,1,this.length),128&this[c]?-1*(255-this[c]+1):this[c]};Ne.prototype.readInt16LE=function(c,h){c>>>=0;h||Bn(c,2,this.length);c=this[c]|this[c+1]<<8;return 32768&c?4294901760|c:c};Ne.prototype.readInt16BE=function(c,h){c>>>=0;h||Bn(c,2,this.length);c=this[c+1]|this[c]<<8;return 32768&c?4294901760|c:c};Ne.prototype.readInt32LE=function(c,h){return c>>>=0,
h||Bn(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};Ne.prototype.readInt32BE=function(c,h){return c>>>=0,h||Bn(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};Ne.prototype.readFloatLE=function(c,h){return c>>>=0,h||Bn(c,4,this.length),VD.read(this,c,!0,23,4)};Ne.prototype.readFloatBE=function(c,h){return c>>>=0,h||Bn(c,4,this.length),VD.read(this,c,!1,23,4)};Ne.prototype.readDoubleLE=function(c,h){return c>>>=0,h||Bn(c,8,this.length),VD.read(this,c,!0,52,8)};
Ne.prototype.readDoubleBE=function(c,h){return c>>>=0,h||Bn(c,8,this.length),VD.read(this,c,!1,52,8)};Ne.prototype.writeUIntLE=function(c,h,n,b){(c=+c,h>>>=0,n>>>=0,b)||bq(this,c,h,n,Math.pow(2,8*n)-1,0);b=1;var d=0;for(this[h]=255&c;++d<n&&(b*=256);)this[h+d]=c/b&255;return h+n};Ne.prototype.writeUIntBE=function(c,h,n,b){(c=+c,h>>>=0,n>>>=0,b)||bq(this,c,h,n,Math.pow(2,8*n)-1,0);b=n-1;var d=1;for(this[h+b]=255&c;0<=--b&&(d*=256);)this[h+b]=c/d&255;return h+n};Ne.prototype.writeUInt8=function(c,h,
n){return c=+c,h>>>=0,n||bq(this,c,h,1,255,0),this[h]=255&c,h+1};Ne.prototype.writeUInt16LE=function(c,h,n){return c=+c,h>>>=0,n||bq(this,c,h,2,65535,0),this[h]=255&c,this[h+1]=c>>>8,h+2};Ne.prototype.writeUInt16BE=function(c,h,n){return c=+c,h>>>=0,n||bq(this,c,h,2,65535,0),this[h]=c>>>8,this[h+1]=255&c,h+2};Ne.prototype.writeUInt32LE=function(c,h,n){return c=+c,h>>>=0,n||bq(this,c,h,4,4294967295,0),this[h+3]=c>>>24,this[h+2]=c>>>16,this[h+1]=c>>>8,this[h]=255&c,h+4};Ne.prototype.writeUInt32BE=function(c,
h,n){return c=+c,h>>>=0,n||bq(this,c,h,4,4294967295,0),this[h]=c>>>24,this[h+1]=c>>>16,this[h+2]=c>>>8,this[h+3]=255&c,h+4};Ne.prototype.writeIntLE=function(c,h,n,b){(c=+c,h>>>=0,b)||(b=Math.pow(2,8*n-1),bq(this,c,h,n,b-1,-b));b=0;var d=1,k=0;for(this[h]=255&c;++b<n&&(d*=256);)0>c&&0===k&&0!==this[h+b-1]&&(k=1),this[h+b]=(c/d>>0)-k&255;return h+n};Ne.prototype.writeIntBE=function(c,h,n,b){(c=+c,h>>>=0,b)||(b=Math.pow(2,8*n-1),bq(this,c,h,n,b-1,-b));b=n-1;var d=1,k=0;for(this[h+b]=255&c;0<=--b&&(d*=
256);)0>c&&0===k&&0!==this[h+b+1]&&(k=1),this[h+b]=(c/d>>0)-k&255;return h+n};Ne.prototype.writeInt8=function(c,h,n){return c=+c,h>>>=0,n||bq(this,c,h,1,127,-128),0>c&&(c=255+c+1),this[h]=255&c,h+1};Ne.prototype.writeInt16LE=function(c,h,n){return c=+c,h>>>=0,n||bq(this,c,h,2,32767,-32768),this[h]=255&c,this[h+1]=c>>>8,h+2};Ne.prototype.writeInt16BE=function(c,h,n){return c=+c,h>>>=0,n||bq(this,c,h,2,32767,-32768),this[h]=c>>>8,this[h+1]=255&c,h+2};Ne.prototype.writeInt32LE=function(c,h,n){return c=
+c,h>>>=0,n||bq(this,c,h,4,2147483647,-2147483648),this[h]=255&c,this[h+1]=c>>>8,this[h+2]=c>>>16,this[h+3]=c>>>24,h+4};Ne.prototype.writeInt32BE=function(c,h,n){return c=+c,h>>>=0,n||bq(this,c,h,4,2147483647,-2147483648),0>c&&(c=4294967295+c+1),this[h]=c>>>24,this[h+1]=c>>>16,this[h+2]=c>>>8,this[h+3]=255&c,h+4};Ne.prototype.writeFloatLE=function(c,h,n){return g3(this,c,h,!0,n)};Ne.prototype.writeFloatBE=function(c,h,n){return g3(this,c,h,!1,n)};Ne.prototype.writeDoubleLE=function(c,h,n){return h3(this,
c,h,!0,n)};Ne.prototype.writeDoubleBE=function(c,h,n){return h3(this,c,h,!1,n)};Ne.prototype.copy=function(c,h,n,b){if(!Ne.isBuffer(c))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),h>=c.length&&(h=c.length),h||(h=0),0<b&&b<n&&(b=n),b===n)||0===c.length||0===this.length)return 0;if(0>h)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");
b>this.length&&(b=this.length);c.length-h<b-n&&(b=c.length-h+n);var d=b-n;if(this===c&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(h,n,b);else if(this===c&&n<h&&h<b)for(b=d-1;0<=b;--b)c[b+h]=this[b+n];else Uint8Array.prototype.set.call(c,this.subarray(n,b),h);return d};Ne.prototype.fill=function(c,h,n,b){if("string"==typeof c){if("string"==typeof h?(b=h,h=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==b&&"string"!=typeof b)throw new TypeError("encoding must be a string");
if("string"==typeof b&&!Ne.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===c.length){var d=c.charCodeAt(0);("utf8"===b&&128>d||"latin1"===b)&&(c=d)}}else"number"==typeof c?c&=255:"boolean"==typeof c&&(c=Number(c));if(0>h||this.length<h||this.length<n)throw new RangeError("Out of range index");if(n<=h)return this;if(h>>>=0,n=void 0===n?this.length:n>>>0,c||(c=0),"number"==typeof c)for(b=h;b<n;++b)this[b]=c;else{d=Ne.isBuffer(c)?c:Ne.from(c,b);var k=d.length;if(0===k)throw new TypeError('The value "'+
c+'" is invalid for argument "value"');for(b=0;b<n-h;++b)this[b+h]=d[b%k]}return this};var Kha=/[^+/0-9A-Za-z-_]/g,Jha=function(){for(var c=Array(256),h=0;16>h;++h)for(var n=16*h,b=0;16>b;++b)c[n+b]="0123456789abcdef"[h]+"0123456789abcdef"[b];return c}(),BO={},CO=ei,nv=CO.Buffer;nv.from&&nv.alloc&&nv.allocUnsafe&&nv.allocUnsafeSlow?BO=CO:(i3(CO,BO),BO.Buffer=kB);kB.prototype=Object.create(nv.prototype);i3(nv,kB);kB.from=function(c,h,n){if("number"==typeof c)throw new TypeError("Argument must not be a number");
return nv(c,h,n)};kB.alloc=function(c,h,n){if("number"!=typeof c)throw new TypeError("Argument must be a number");c=nv(c);return void 0!==h?"string"==typeof n?c.fill(h,n):c.fill(h):c.fill(0),c};kB.allocUnsafe=function(c){if("number"!=typeof c)throw new TypeError("Argument must be a number");return nv(c)};kB.allocUnsafeSlow=function(c){if("number"!=typeof c)throw new TypeError("Argument must be a number");return CO.SlowBuffer(c)};var lj=BO,WD={},SS=lj.Buffer,j3=SS.isEncoding||function(c){switch((c=
""+c)&&c.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};WD.StringDecoder=PG;PG.prototype.write=function(c){if(0===c.length)return"";var h;if(this.lastNeed){if(void 0===(h=this.fillLast(c)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<c.length?h?h+this.text(c,n):this.text(c,n):h||""};PG.prototype.end=function(c){c=c&&c.length?this.write(c):"";
return this.lastNeed?c+"\ufffd":c};PG.prototype.text=function(c,h){var n=c.length-1;if(n<h)n=0;else{var b=TS(c[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<h||-2===b?0:0<=(b=TS(c[n]))?(0<b&&(this.lastNeed=b-2),b):--n<h||-2===b?0:0<=(b=TS(c[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return c.toString("utf8",h);this.lastTotal=n;b=c.length-(n-this.lastNeed);return c.copy(this.lastChar,0,b),c.toString("utf8",h,b)};PG.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length);this.lastNeed-=c.length};var IL=ov.EventEmitter,tt={},k3={};$r("ERR_INVALID_OPT_VALUE",function(c,h){return'The value "'+h+'" is invalid for option "'+c+'"'},TypeError);$r("ERR_INVALID_ARG_TYPE",function(c,h,n){var b;c=("string"==typeof h&&"not "===h.substr(0,4)?(b="must not be",h=h.replace(/^not /,"")):b="must be",function(d,k,a){return(void 0===
a||a>d.length)&&(a=d.length),d.substring(a-k.length,a)===k}(c," argument"))?"The "+c+" "+b+" "+l3(h,"type"):'The "'+c+'" '+(function(d,k,a){return"number"!=typeof a&&(a=0),!(a+k.length>d.length)&&-1!==d.indexOf(k,a)}(c,".")?"property":"argument")+" "+b+" "+l3(h,"type");return c+=". Received type "+typeof n,c},TypeError);$r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");$r("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"});$r("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");$r("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"});$r("ERR_MULTIPLE_CALLBACK","Callback called multiple times");$r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");$r("ERR_STREAM_WRITE_AFTER_END","write after end");$r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);$r("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError);$r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
tt.codes=k3;var t3=function(){throw Error("Readable.from is not available in the browser");},VS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,v3=function(c,h){if(US("noDeprecation"))return c;var n=!1;return function(){if(!n){if(US("throwDeprecation"))throw Error(h);US("traceDeprecation")?console.trace(h):console.warn(h);n=!0}return c.apply(this||VS,arguments)}},DO=ei.Buffer,jX=Oh.inspect,Oqa=jX&&jX.custom||"inspect",Xha=function(){function c(){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var h;return h=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,
--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,d=""+b.data;b=b.next;)d+=n+b.data;return d}},{key:"concat",value:function(n){if(0===this.length)return DO.alloc(0);for(var b,d,k=DO.allocUnsafe(n>>>0),a=this.head,f=0;a;)n=a.data,b=k,d=f,void DO.prototype.copy.call(n,b,d),f+=a.data.length,a=a.next;return k}},{key:"consume",value:function(n,b){var d;return n<this.head.data.length?(d=
this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):d=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,d=1,k=b.data;for(n-=k.length;b=b.next;){var a=b.data,f=n>a.length?a.length:n;if(f===a.length?k+=a:k+=a.slice(0,n),0==(n-=f)){f===a.length?(++d,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(f));break}++d}return this.length-=
d,k}},{key:"_getBuffer",value:function(n){var b=DO.allocUnsafe(n),d=this.head,k=1;d.data.copy(b);for(n-=d.data.length;d=d.next;){var a=d.data,f=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,f),0==(n-=f)){f===a.length?(++k,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=a.slice(f));break}++k}return this.length-=k,b}},{key:Oqa,value:function(n,b){return jX(this,function(d){for(var k=1;k<arguments.length;k++){var a=null!=arguments[k]?arguments[k]:{};k%2?m3(Object(a),!0).forEach(function(f){var l=
a[f];f in d?Object.defineProperty(d,f,{value:l,enumerable:!0,configurable:!0,writable:!0}):d[f]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(a)):m3(Object(a)).forEach(function(f){Object.defineProperty(d,f,Object.getOwnPropertyDescriptor(a,f))})}return d}({},b,{depth:0,customInspect:!1}))}}],Sha(c.prototype,h),c}(),eC=bj,r3={destroy:function(c,h){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||
b?(h?h(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,eC.nextTick(WS,this,c)):eC.nextTick(WS,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(d){!h&&d?n._writableState?n._writableState.errorEmitted?eC.nextTick(HL,n):(n._writableState.errorEmitted=!0,eC.nextTick(n3,n,d)):eC.nextTick(n3,n,d):h?(eC.nextTick(HL,n),h(d)):eC.nextTick(HL,n)}),this)},
undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,h){var n=c._readableState,b=c._writableState;n&&n.autoDestroy||
b&&b.autoDestroy?c.destroy(h):c.emit("error",h)}},Pqa=tt.codes.ERR_INVALID_OPT_VALUE,s3={getHighWaterMark:function(c,h,n,b){h=null!=h.highWaterMark?h.highWaterMark:b?h[n]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new Pqa(b?n:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}},M$=tt.codes.ERR_STREAM_PREMATURE_CLOSE,kX,o3=bj,Qqa=function d(h,n,b){if("function"==typeof n)return d(h,null,n);n||(n={});b=function(H){var J=!1;return function(){if(!J){J=!0;for(var O=
arguments.length,L=Array(O),Y=0;Y<O;Y++)L[Y]=arguments[Y];H.apply(this,L)}}}(b||Tha);var k=n.readable||!1!==n.readable&&h.readable,a=n.writable||!1!==n.writable&&h.writable,f=function(){h.writable||r()},l=h._writableState&&h._writableState.finished,r=function(){a=!1;l=!0;k||b.call(h)},v=h._readableState&&h._readableState.endEmitted,y=function(){k=!1;v=!0;a||b.call(h)},A=function(H){b.call(h,H)},E=function(){var H;return k&&!v?(h._readableState&&h._readableState.ended||(H=new M$),b.call(h,H)):a&&!l?
(h._writableState&&h._writableState.ended||(H=new M$),b.call(h,H)):void 0},F=function(){h.req.on("finish",r)};return h.setHeader&&"function"==typeof h.abort?(h.on("complete",r),h.on("abort",E),h.req?F():h.on("request",F)):a&&!h._writableState&&(h.on("end",f),h.on("close",f)),h.on("end",y),h.on("finish",r),!1!==n.error&&h.on("error",A),h.on("close",E),function(){h.removeListener("complete",r);h.removeListener("abort",E);h.removeListener("request",F);h.req&&h.req.removeListener("finish",r);h.removeListener("end",
f);h.removeListener("close",f);h.removeListener("finish",r);h.removeListener("end",y);h.removeListener("error",A);h.removeListener("close",E)}},az=Symbol("lastResolve"),nB=Symbol("lastReject"),pI=Symbol("error"),EO=Symbol("ended"),mB=Symbol("lastPromise"),lX=Symbol("handlePromise"),lB=Symbol("stream"),Rqa=Object.getPrototypeOf(function(){}),Sqa=Object.setPrototypeOf((Zy(kX={get stream(){return this[lB]},next:function(){var h=this,n=this[pI];if(null!==n)return Promise.reject(n);if(this[EO])return Promise.resolve($y(void 0,
!0));if(this[lB].destroyed)return new Promise(function(b,d){o3.nextTick(function(){h[pI]?d(h[pI]):b($y(void 0,!0))})});if(n=this[mB])n=new Promise(function(b,d){return function(k,a){b.then(function(){if(d[EO])return k($y(void 0,!0)),void 0;d[lX](k,a)},a)}}(n,this));else{n=this[lB].read();if(null!==n)return Promise.resolve($y(n,!1));n=new Promise(this[lX])}return this[mB]=n,n}},Symbol.asyncIterator,function(){return this}),Zy(kX,"return",function(){var h=this;return new Promise(function(n,b){h[lB].destroy(null,
function(d){if(d)return b(d),void 0;n($y(void 0,!0))})})}),kX),Rqa),Yha=function(h){var n,b=Object.create(Sqa,(Zy(n={},lB,{value:h,writable:!0}),Zy(n,az,{value:null,writable:!0}),Zy(n,nB,{value:null,writable:!0}),Zy(n,pI,{value:null,writable:!0}),Zy(n,EO,{value:h._readableState.endEmitted,writable:!0}),Zy(n,lX,{value:function(d,k){var a=b[lB].read();a?(b[mB]=null,b[az]=null,b[nB]=null,d($y(a,!1))):(b[az]=d,b[nB]=k)},writable:!0}),n));return b[mB]=null,Qqa(h,function(d){if(d&&"ERR_STREAM_PREMATURE_CLOSE"!==
d.code){var k=b[nB];return null!==k&&(b[mB]=null,b[az]=null,b[nB]=null,k(d)),b[pI]=d,void 0}d=b[az];null!==d&&(b[mB]=null,b[az]=null,b[nB]=null,d($y(void 0,!0)));b[EO]=!0}),h.on("readable",Vha.bind(null,b)),b},XS={},q3=!1,Wha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,YS={},u3=!1,$ha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ZS={},w3=!1,Tqa=p3(),N$=tt.codes.ERR_STREAM_PREMATURE_CLOSE,eT=function k(n,b,d){if("function"==typeof b)return k(n,
null,b);b||(b={});d=function(J){var O=!1;return function(){if(!O){O=!0;for(var L=arguments.length,Y=Array(L),S=0;S<L;S++)Y[S]=arguments[S];J.apply(this,Y)}}}(d||aia);var a=b.readable||!1!==b.readable&&n.readable,f=b.writable||!1!==b.writable&&n.writable,l=function(){n.writable||v()},r=n._writableState&&n._writableState.finished,v=function(){f=!1;r=!0;a||d.call(n)},y=n._readableState&&n._readableState.endEmitted,A=function(){a=!1;y=!0;f||d.call(n)},E=function(J){d.call(n,J)},F=function(){var J;return a&&
!y?(n._readableState&&n._readableState.ended||(J=new N$),d.call(n,J)):f&&!r?(n._writableState&&n._writableState.ended||(J=new N$),d.call(n,J)):void 0},H=function(){n.req.on("finish",v)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",v),n.on("abort",F),n.req?H():n.on("request",H)):f&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",A),n.on("finish",v),!1!==b.error&&n.on("error",E),n.on("close",F),function(){n.removeListener("complete",v);n.removeListener("abort",F);n.removeListener("request",
H);n.req&&n.req.removeListener("finish",v);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",v);n.removeListener("end",A);n.removeListener("error",E);n.removeListener("close",F)}},FO=ei.Buffer,mX=Oh.inspect,Uqa=mX&&mX.custom||"inspect",gia=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(d){d={data:d,next:null};0<this.length?this.tail.next=
d:this.head=d;this.tail=d;++this.length}},{key:"unshift",value:function(d){d={data:d,next:this.head};0===this.length&&(this.tail=d);this.head=d;++this.length}},{key:"shift",value:function(){if(0!==this.length){var d=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(d){if(0===this.length)return"";for(var k=this.head,a=""+k.data;k=k.next;)a+=d+k.data;
return a}},{key:"concat",value:function(d){if(0===this.length)return FO.alloc(0);for(var k,a,f=FO.allocUnsafe(d>>>0),l=this.head,r=0;l;)d=l.data,k=f,a=r,void FO.prototype.copy.call(d,k,a),r+=l.data.length,l=l.next;return f}},{key:"consume",value:function(d,k){var a;return d<this.head.data.length?(a=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):a=d===this.head.data.length?this.shift():k?this._getString(d):this._getBuffer(d),a}},{key:"first",value:function(){return this.head.data}},
{key:"_getString",value:function(d){var k=this.head,a=1,f=k.data;for(d-=f.length;k=k.next;){var l=k.data,r=d>l.length?l.length:d;if(r===l.length?f+=l:f+=l.slice(0,d),0==(d-=r)){r===l.length?(++a,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=l.slice(r));break}++a}return this.length-=a,f}},{key:"_getBuffer",value:function(d){var k=FO.allocUnsafe(d),a=this.head,f=1;a.data.copy(k);for(d-=a.data.length;a=a.next;){var l=a.data,r=d>l.length?l.length:d;if(l.copy(k,k.length-d,0,r),
0==(d-=r)){r===l.length?(++f,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=l.slice(r));break}++f}return this.length-=f,k}},{key:Uqa,value:function(d,k){return mX(this,function(a){for(var f=1;f<arguments.length;f++){var l=null!=arguments[f]?arguments[f]:{};f%2?x3(Object(l),!0).forEach(function(r){var v=l[r];r in a?Object.defineProperty(a,r,{value:v,enumerable:!0,configurable:!0,writable:!0}):a[r]=v}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):
x3(Object(l)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(l,r))})}return a}({},k,{depth:0,customInspect:!1}))}}],bia(n.prototype,b),n}(),fC=bj,B3={destroy:function(n,b){var d=this,k=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||k?(b?b(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,fC.nextTick($S,this,n)):fC.nextTick($S,this,n)),this):(this._readableState&&
(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?d._writableState?d._writableState.errorEmitted?fC.nextTick(JL,d):(d._writableState.errorEmitted=!0,fC.nextTick(y3,d,a)):fC.nextTick(y3,d,a):b?(fC.nextTick(JL,d),b(a)):fC.nextTick(JL,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var d=n._readableState,k=n._writableState;d&&d.autoDestroy||k&&k.autoDestroy?n.destroy(b):n.emit("error",b)}},Vqa=tt.codes.ERR_INVALID_OPT_VALUE,nX,C3={getHighWaterMark:function(n,b,d,k){b=null!=b.highWaterMark?b.highWaterMark:k?b[d]:null;
if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new Vqa(k?d:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},z3=bj,Wqa=eT,dz=Symbol("lastResolve"),qB=Symbol("lastReject"),qI=Symbol("error"),GO=Symbol("ended"),pB=Symbol("lastPromise"),oX=Symbol("handlePromise"),oB=Symbol("stream"),Xqa=Object.getPrototypeOf(function(){}),Yqa=Object.setPrototypeOf((bz(nX={get stream(){return this[oB]},next:function(){var n=this,b=this[qI];if(null!==b)return Promise.reject(b);if(this[GO])return Promise.resolve(cz(void 0,
!0));if(this[oB].destroyed)return new Promise(function(d,k){z3.nextTick(function(){n[qI]?k(n[qI]):d(cz(void 0,!0))})});if(b=this[pB])b=new Promise(function(d,k){return function(a,f){d.then(function(){if(k[GO])return a(cz(void 0,!0)),void 0;k[oX](a,f)},f)}}(b,this));else{b=this[oB].read();if(null!==b)return Promise.resolve(cz(b,!1));b=new Promise(this[oX])}return this[pB]=b,b}},Symbol.asyncIterator,function(){return this}),bz(nX,"return",function(){var n=this;return new Promise(function(b,d){n[oB].destroy(null,
function(k){if(k)return d(k),void 0;b(cz(void 0,!0))})})}),nX),Xqa),hia=function(n){var b,d=Object.create(Yqa,(bz(b={},oB,{value:n,writable:!0}),bz(b,dz,{value:null,writable:!0}),bz(b,qB,{value:null,writable:!0}),bz(b,qI,{value:null,writable:!0}),bz(b,GO,{value:n._readableState.endEmitted,writable:!0}),bz(b,oX,{value:function(k,a){var f=d[oB].read();f?(d[pB]=null,d[dz]=null,d[qB]=null,k(cz(f,!1))):(d[dz]=k,d[qB]=a)},writable:!0}),b));return d[pB]=null,Wqa(n,function(k){if(k&&"ERR_STREAM_PREMATURE_CLOSE"!==
k.code){var a=d[qB];return null!==a&&(d[pB]=null,d[dz]=null,d[qB]=null,a(k)),d[qI]=k,void 0}k=d[dz];null!==k&&(d[pB]=null,d[dz]=null,d[qB]=null,k(cz(void 0,!0)));d[GO]=!0}),n.on("readable",dia.bind(null,d)),d},aT={},A3=!1,fia="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bT={},E3=!1,iia="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,cT={},F3=!1,Zqa=D3(),O$=QG(),HO=tt.codes,$qa=HO.ERR_METHOD_NOT_IMPLEMENTED,kia=HO.ERR_MULTIPLE_CALLBACK,
nia=HO.ERR_TRANSFORM_ALREADY_TRANSFORMING,mia=HO.ERR_TRANSFORM_WITH_LENGTH_0,LL=O$;oi(pv,LL);pv.prototype.push=function(n,b){return this._transformState.needTransform=!1,LL.prototype.push.call(this,n,b)};pv.prototype._transform=function(n,b,d){d(new $qa("_transform()"))};pv.prototype._write=function(n,b,d){var k=this._transformState;(k.writecb=d,k.writechunk=n,k.writeencoding=b,k.transforming)||(n=this._readableState,(k.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};
pv.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};pv.prototype._destroy=function(n,b){LL.prototype._destroy.call(this,n,function(d){b(d)})};var H3=pv;oi(RG,H3);RG.prototype._transform=function(n,b,d){d(null,n)};var dT,P$=tt.codes,ara=P$.ERR_MISSING_ARGS,pia=P$.ERR_STREAM_DESTROYED,gT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,
fT=ov.EventEmitter;oi(as,fT);as.Readable=Tqa;as.Writable=Zqa;as.Duplex=O$;as.Transform=pv;as.PassThrough=RG;as.finished=eT;as.pipeline=function(){for(var n=arguments.length,b=Array(n),d=0;d<n;d++)b[d]=arguments[d];var k,a=b.length?"function"!=typeof b[b.length-1]?I3:b.pop():I3;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new ara("streams");var f=b.map(function(l,r){var v=r<b.length-1;return oia(l,v,0<r,function(y){k||(k=y);y&&f.forEach(J3);v||(f.forEach(J3),a(k))})});return b.reduce(qia)};as.Stream=
as;as.prototype.pipe=function(n,b){function d(A){n.writable&&!1===n.write(A)&&v.pause&&v.pause()}function k(){v.readable&&v.resume&&v.resume()}function a(){y||(y=!0,n.end())}function f(){y||(y=!0,"function"==typeof n.destroy&&n.destroy())}function l(A){if(r(),0===fT.listenerCount(this||gT,"error"))throw A;}function r(){v.removeListener("data",d);n.removeListener("drain",k);v.removeListener("end",a);v.removeListener("close",f);v.removeListener("error",l);n.removeListener("error",l);v.removeListener("end",
r);v.removeListener("close",r);n.removeListener("close",r)}var v=this||gT;v.on("data",d);n.on("drain",k);n._isStdio||b&&!1===b.end||(v.on("end",a),v.on("close",f));var y=!1;return v.on("error",l),n.on("error",l),v.on("end",r),v.on("close",r),n.on("close",r),n.emit("pipe",v),n};var DB=as,IO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,wB={},$E=function(n){if(Object.keys)return Object.keys(n);var b=[],d;for(d in n)b.push(d);return b},gC=function(n,b){if(n.forEach)return n.forEach(b);
for(var d=0;d<n.length;d++)b(n[d],d,n)},bra=function(){try{return Object.defineProperty({},"_",{}),function(n,b,d){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:d})}}catch(n){return function(b,d,k){b[d]=k}}}(),Q$="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
ML.prototype={};var Tv=wB.Script=function(n){if(!((this||IO)instanceof Tv))return new Tv(n);(this||IO).code=n};Tv.prototype.runInContext=function(n){if(!(n instanceof ML))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var d=b.contentWindow,k=d.eval,a=d.execScript;!k&&a&&(a.call(d,"null"),k=d.eval);gC($E(n),function(l){d[l]=n[l]});gC(Q$,function(l){n[l]&&(d[l]=n[l])});var f=$E(d);k=
k.call(d,(this||IO).code);return gC($E(d),function(l){var r;if(!(r=l in n)){a:if(f.indexOf)r=f.indexOf(l);else{for(r=0;r<f.length;r++)if(f[r]===l)break a;r=-1}r=-1===r}r&&(n[l]=d[l])}),gC(Q$,function(l){l in n||bra(n,l,d[l])}),document.body.removeChild(b),k};Tv.prototype.runInThisContext=function(){return eval((this||IO).code)};Tv.prototype.runInNewContext=function(n){var b=Tv.createContext(n),d=this.runInContext(b);return n&&gC($E(b),function(k){n[k]=b[k]}),d};gC($E(Tv.prototype),function(n){wB[n]=
Tv[n]=function(b){var d=Tv(b);return d[n].apply(d,[].slice.call(arguments,1))}});wB.isContext=function(n){return n instanceof ML};wB.createScript=function(n){return wB.Script(n)};wB.createContext=Tv.createContext=function(n){var b=new ML;return"object"==typeof n&&gC($E(n),function(d){b[d]=n[d]}),b};var R$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,cra=bj,dra=lj.Buffer,JO=R$.crypto||R$.msCrypto,Mz=JO&&JO.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var d=dra.allocUnsafe(n);if(0<n)if(65536<n)for(var k=0;k<n;k+=65536)JO.getRandomValues(d.slice(k,k+65536));else JO.getRandomValues(d);return"function"==typeof b?cra.nextTick(function(){b(null,d)}):d}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},NL=lj.Buffer,K3=DB.Transform;oi(dx,K3);dx.prototype._transform=function(n,b,d){var k=null;try{this.update(n,b)}catch(a){k=a}d(k)};dx.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(d){b=d}n(b)};dx.prototype.update=function(n,b){var d=n;if(!NL.isBuffer(d)&&"string"!=typeof d)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");NL.isBuffer(n)||(n=NL.from(n,b));b=this._block;for(d=0;this._blockOffset+n.length-d>=this._blockSize;){for(var k=this._blockOffset;k<this._blockSize;)b[k++]=n[d++];this._update();this._blockOffset=0}for(;d<n.length;)b[this._blockOffset++]=n[d++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};dx.prototype._update=function(){throw Error("_update is not implemented");};dx.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};dx.prototype._digest=function(){throw Error("_digest is not implemented");
};var L3=dx,era=lj.Buffer,fg=Array(16);oi(XD,L3);XD.prototype._update=function(){for(var n=0;16>n;++n)fg[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,d=this._c,k=this._d;n=Go(n,b,d,k,fg[0],3614090360,7);k=Go(k,n,b,d,fg[1],3905402710,12);d=Go(d,k,n,b,fg[2],606105819,17);b=Go(b,d,k,n,fg[3],3250441966,22);n=Go(n,b,d,k,fg[4],4118548399,7);k=Go(k,n,b,d,fg[5],1200080426,12);d=Go(d,k,n,b,fg[6],2821735955,17);b=Go(b,d,k,n,fg[7],4249261313,22);n=Go(n,b,d,k,fg[8],1770035416,7);k=Go(k,n,b,d,fg[9],
2336552879,12);d=Go(d,k,n,b,fg[10],4294925233,17);b=Go(b,d,k,n,fg[11],2304563134,22);n=Go(n,b,d,k,fg[12],1804603682,7);k=Go(k,n,b,d,fg[13],4254626195,12);d=Go(d,k,n,b,fg[14],2792965006,17);n=Ho(n,b=Go(b,d,k,n,fg[15],1236535329,22),d,k,fg[1],4129170786,5);k=Ho(k,n,b,d,fg[6],3225465664,9);d=Ho(d,k,n,b,fg[11],643717713,14);b=Ho(b,d,k,n,fg[0],3921069994,20);n=Ho(n,b,d,k,fg[5],3593408605,5);k=Ho(k,n,b,d,fg[10],38016083,9);d=Ho(d,k,n,b,fg[15],3634488961,14);b=Ho(b,d,k,n,fg[4],3889429448,20);n=Ho(n,b,d,
k,fg[9],568446438,5);k=Ho(k,n,b,d,fg[14],3275163606,9);d=Ho(d,k,n,b,fg[3],4107603335,14);b=Ho(b,d,k,n,fg[8],1163531501,20);n=Ho(n,b,d,k,fg[13],2850285829,5);k=Ho(k,n,b,d,fg[2],4243563512,9);d=Ho(d,k,n,b,fg[7],1735328473,14);n=Io(n,b=Ho(b,d,k,n,fg[12],2368359562,20),d,k,fg[5],4294588738,4);k=Io(k,n,b,d,fg[8],2272392833,11);d=Io(d,k,n,b,fg[11],1839030562,16);b=Io(b,d,k,n,fg[14],4259657740,23);n=Io(n,b,d,k,fg[1],2763975236,4);k=Io(k,n,b,d,fg[4],1272893353,11);d=Io(d,k,n,b,fg[7],4139469664,16);b=Io(b,
d,k,n,fg[10],3200236656,23);n=Io(n,b,d,k,fg[13],681279174,4);k=Io(k,n,b,d,fg[0],3936430074,11);d=Io(d,k,n,b,fg[3],3572445317,16);b=Io(b,d,k,n,fg[6],76029189,23);n=Io(n,b,d,k,fg[9],3654602809,4);k=Io(k,n,b,d,fg[12],3873151461,11);d=Io(d,k,n,b,fg[15],530742520,16);n=Jo(n,b=Io(b,d,k,n,fg[2],3299628645,23),d,k,fg[0],4096336452,6);k=Jo(k,n,b,d,fg[7],1126891415,10);d=Jo(d,k,n,b,fg[14],2878612391,15);b=Jo(b,d,k,n,fg[5],4237533241,21);n=Jo(n,b,d,k,fg[12],1700485571,6);k=Jo(k,n,b,d,fg[3],2399980690,10);d=
Jo(d,k,n,b,fg[10],4293915773,15);b=Jo(b,d,k,n,fg[1],2240044497,21);n=Jo(n,b,d,k,fg[8],1873313359,6);k=Jo(k,n,b,d,fg[15],4264355552,10);d=Jo(d,k,n,b,fg[6],2734768916,15);b=Jo(b,d,k,n,fg[13],1309151649,21);n=Jo(n,b,d,k,fg[4],4149444226,6);k=Jo(k,n,b,d,fg[11],3174756917,10);d=Jo(d,k,n,b,fg[2],718787259,15);b=Jo(b,d,k,n,fg[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+d|0;this._d=this._d+k|0};XD.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=era.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var pX=ei.Buffer,M3=dx,Qt=Array(16),rI=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],sI=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],tI=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],uI=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],vI=[0,1518500249,1859775393,2400959708,2840853838],wI=[1352829926,1548603684,1836072691,2053994217,0];oi(YD,M3);YD.prototype._update=function(){for(var n=0;16>n;++n)Qt[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var d=0|this._c,k=0|this._d,a=0|this._e,f=0|this._a,l=0|this._b,r=0|this._c,
v=0|this._d,y=0|this._e,A=0;80>A;A+=1){if(16>A){var E=a;E=bs(b+(n^d^k)+Qt[rI[A]]+vI[0]|0,tI[A])+E|0;b=y;var F=bs(f+(l^(r|~v))+Qt[sI[A]]+wI[0]|0,uI[A])+b|0}else 32>A?(E=a,E=bs(b+(n&d|~n&k)+Qt[rI[A]]+vI[1]|0,tI[A])+E|0,b=y,F=bs(f+(l&v|r&~v)+Qt[sI[A]]+wI[1]|0,uI[A])+b|0):48>A?(E=a,E=bs(b+((n|~d)^k)+Qt[rI[A]]+vI[2]|0,tI[A])+E|0,b=y,F=bs(f+((l|~r)^v)+Qt[sI[A]]+wI[2]|0,uI[A])+b|0):64>A?(E=a,E=bs(b+(n&k|d&~k)+Qt[rI[A]]+vI[3]|0,tI[A])+E|0,b=y,F=bs(f+(l&r|~l&v)+Qt[sI[A]]+wI[3]|0,uI[A])+b|0):(E=a,E=bs(b+(n^
(d|~k))+Qt[rI[A]]+vI[4]|0,tI[A])+E|0,b=y,F=bs(f+(l^r^v)+Qt[sI[A]]+wI[4]|0,uI[A])+b|0);b=a;a=k;k=bs(d,10);d=n;n=E;f=y;y=v;v=bs(r,10);r=l;l=F}d=this._b+d+v|0;this._b=this._c+k+y|0;this._c=this._d+a+f|0;this._d=this._e+b+l|0;this._e=this._a+n+r|0;this._a=d};YD.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=pX.alloc?pX.alloc(20):new pX(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var hl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,N3=lj.Buffer;ex.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=N3.from(n,b));b=(this||hl)._block;for(var d=(this||hl)._blockSize,k=n.length,a=(this||hl)._len,
f=0;f<k;){for(var l=a%d,r=Math.min(k-f,d-l),v=0;v<r;v++)b[l+v]=n[f+v];f+=r;0==(a+=r)%d&&this._update(b)}return(this||hl)._len+=k,this||hl};ex.prototype.digest=function(n){var b=(this||hl)._len%(this||hl)._blockSize;(this||hl)._block[b]=128;(this||hl)._block.fill(0,b+1);b>=(this||hl)._finalSize&&(this._update((this||hl)._block),(this||hl)._block.fill(0));b=8*(this||hl)._len;if(4294967295>=b)(this||hl)._block.writeUInt32BE(b,(this||hl)._blockSize-4);else{var d=(4294967295&b)>>>0;(this||hl)._block.writeUInt32BE((b-
d)/4294967296,(this||hl)._blockSize-8);(this||hl)._block.writeUInt32BE(d,(this||hl)._blockSize-4)}this._update((this||hl)._block);b=this._hash();return n?b.toString(n):b};ex.prototype._update=function(){throw Error("_update must be implemented by subclass");};var fi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,O3=ex,fra=lj.Buffer,gra=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],ria=Array(64);oi(ZD,O3);ZD.prototype.init=function(){return(this||fi)._a=1779033703,(this||fi)._b=3144134277,(this||fi)._c=1013904242,(this||fi)._d=2773480762,(this||fi)._e=1359893119,(this||fi)._f=2600822924,(this||fi)._g=528734635,(this||fi)._h=1541459225,this||fi};ZD.prototype._update=function(n){for(var b,d=(this||fi)._w,k=0|(this||fi)._a,a=0|(this||fi)._b,f=0|(this||fi)._c,l=0|(this||fi)._d,r=0|(this||fi)._e,v=0|(this||fi)._f,y=0|(this||fi)._g,A=0|
(this||fi)._h,E=0;16>E;++E)d[E]=n.readInt32BE(4*E);for(;64>E;++E){n=E;var F=(((b=d[E-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+d[E-7],H=d[E-15];d[n]=0|F+((H>>>7|H<<25)^(H>>>18|H<<14)^H>>>3)+d[E-16]}for(b=0;64>b;++b)E=A+((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(y^r&(v^y))+gra[b]+d[b]|0,n=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&a|f&(k|a))|0,A=y,y=v,v=r,r=l+E|0,l=f,f=a,a=k,k=E+n|0;(this||fi)._a=k+(this||fi)._a|0;(this||fi)._b=a+(this||fi)._b|0;(this||fi)._c=f+(this||fi)._c|0;(this||fi)._d=
l+(this||fi)._d|0;(this||fi)._e=r+(this||fi)._e|0;(this||fi)._f=v+(this||fi)._f|0;(this||fi)._g=y+(this||fi)._g|0;(this||fi)._h=A+(this||fi)._h|0};ZD.prototype._hash=function(){var n=fra.allocUnsafe(32);return n.writeInt32BE((this||fi)._a,0),n.writeInt32BE((this||fi)._b,4),n.writeInt32BE((this||fi)._c,8),n.writeInt32BE((this||fi)._d,12),n.writeInt32BE((this||fi)._e,16),n.writeInt32BE((this||fi)._f,20),n.writeInt32BE((this||fi)._g,24),n.writeInt32BE((this||fi)._h,28),n};var tk="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,P3=ex,hra=lj.Buffer,ira=[1518500249,1859775393,-1894007588,-899497514],sia=Array(80);oi(SG,P3);SG.prototype.init=function(){return(this||tk)._a=1732584193,(this||tk)._b=4023233417,(this||tk)._c=2562383102,(this||tk)._d=271733878,(this||tk)._e=3285377520,this||tk};SG.prototype._update=function(n){for(var b,d=(this||tk)._w,k=0|(this||tk)._a,a=0|(this||tk)._b,f=0|(this||tk)._c,l=0|(this||tk)._d,r=0|(this||tk)._e,v=0;16>v;++v)d[v]=n.readInt32BE(4*v);for(;80>
v;++v)d[v]=d[v-3]^d[v-8]^d[v-14]^d[v-16];for(n=0;80>n;++n)v=~~(n/20),v=0|((b=k)<<5|b>>>27)+(0===v?a&f|~a&l:2===v?a&f|a&l|f&l:a^f^l)+r+d[n]+ira[v],r=l,l=f,f=a<<30|a>>>2,a=k,k=v;(this||tk)._a=k+(this||tk)._a|0;(this||tk)._b=a+(this||tk)._b|0;(this||tk)._c=f+(this||tk)._c|0;(this||tk)._d=l+(this||tk)._d|0;(this||tk)._e=r+(this||tk)._e|0};SG.prototype._hash=function(){var n=hra.allocUnsafe(20);return n.writeInt32BE(0|(this||tk)._a,0),n.writeInt32BE(0|(this||tk)._b,4),n.writeInt32BE(0|(this||tk)._c,8),
n.writeInt32BE(0|(this||tk)._d,12),n.writeInt32BE(0|(this||tk)._e,16),n};var uk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Q3=ex,jra=lj.Buffer,kra=[1518500249,1859775393,-1894007588,-899497514],tia=Array(80);oi(TG,Q3);TG.prototype.init=function(){return(this||uk)._a=1732584193,(this||uk)._b=4023233417,(this||uk)._c=2562383102,(this||uk)._d=271733878,(this||uk)._e=3285377520,this||uk};TG.prototype._update=function(n){for(var b,d=(this||uk)._w,k=0|(this||uk)._a,a=
0|(this||uk)._b,f=0|(this||uk)._c,l=0|(this||uk)._d,r=0|(this||uk)._e,v=0;16>v;++v)d[v]=n.readInt32BE(4*v);for(;80>v;++v)d[v]=(b=d[v-3]^d[v-8]^d[v-14]^d[v-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(k<<5|k>>>27)+(0===b?a&f|~a&l:2===b?a&f|a&l|f&l:a^f^l)+r+d[n]+kra[b]|0,r=l,l=f,f=a<<30|a>>>2,a=k,k=b;(this||uk)._a=k+(this||uk)._a|0;(this||uk)._b=a+(this||uk)._b|0;(this||uk)._c=f+(this||uk)._c|0;(this||uk)._d=l+(this||uk)._d|0;(this||uk)._e=r+(this||uk)._e|0};TG.prototype._hash=function(){var n=jra.allocUnsafe(20);
return n.writeInt32BE(0|(this||uk)._a,0),n.writeInt32BE(0|(this||uk)._b,4),n.writeInt32BE(0|(this||uk)._c,8),n.writeInt32BE(0|(this||uk)._d,12),n.writeInt32BE(0|(this||uk)._e,16),n};var Cn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,via=ex,lra=lj.Buffer,uia=Array(64);oi(PL,ZD);PL.prototype.init=function(){return(this||Cn)._a=3238371032,(this||Cn)._b=914150663,(this||Cn)._c=812702999,(this||Cn)._d=4144912697,(this||Cn)._e=4290775857,(this||Cn)._f=1750603025,(this||
Cn)._g=1694076839,(this||Cn)._h=3204075428,this||Cn};PL.prototype._hash=function(){var n=lra.allocUnsafe(28);return n.writeInt32BE((this||Cn)._a,0),n.writeInt32BE((this||Cn)._b,4),n.writeInt32BE((this||Cn)._c,8),n.writeInt32BE((this||Cn)._d,12),n.writeInt32BE((this||Cn)._e,16),n.writeInt32BE((this||Cn)._f,20),n.writeInt32BE((this||Cn)._g,24),n};var cf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,R3=ex,mra=lj.Buffer,S$=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],wia=Array(160);oi($D,R3);$D.prototype.init=function(){return(this||cf)._ah=1779033703,(this||cf)._bh=3144134277,(this||cf)._ch=1013904242,(this||cf)._dh=2773480762,(this||cf)._eh=1359893119,(this||cf)._fh=2600822924,(this||cf)._gh=528734635,(this||cf)._hh=1541459225,(this||cf)._al=4089235720,(this||cf)._bl=2227873595,(this||cf)._cl=4271175723,(this||
cf)._dl=1595750129,(this||cf)._el=2917565137,(this||cf)._fl=725511199,(this||cf)._gl=4215389547,(this||cf)._hl=327033209,this||cf};$D.prototype._update=function(n){for(var b=(this||cf)._w,d=0|(this||cf)._ah,k=0|(this||cf)._bh,a=0|(this||cf)._ch,f=0|(this||cf)._dh,l=0|(this||cf)._eh,r=0|(this||cf)._fh,v=0|(this||cf)._gh,y=0|(this||cf)._hh,A=0|(this||cf)._al,E=0|(this||cf)._bl,F=0|(this||cf)._cl,H=0|(this||cf)._dl,J=0|(this||cf)._el,O=0|(this||cf)._fl,L=0|(this||cf)._gl,Y=0|(this||cf)._hl,S=0;32>S;S+=
2)b[S]=n.readInt32BE(4*S),b[S+1]=n.readInt32BE(4*S+4);for(;160>S;S+=2){n=b[S-30];var ea=b[S-30+1],qa=(n>>>1|ea<<31)^(n>>>8|ea<<24)^n>>>7,Fa=(ea>>>1|n<<31)^(ea>>>8|n<<24)^(ea>>>7|n<<25);var K=n=b[S-4];var Z=ea=b[S-4+1];K=(K>>>19|Z<<13)^(Z>>>29|K<<3)^K>>>6;ea=(ea>>>19|n<<13)^(n>>>29|ea<<3)^(ea>>>6|n<<26);Z=b[S-32];var R=b[S-32+1];n=Fa+b[S-14+1]|0;qa=qa+b[S-14]+Dn(n,Fa)|0;qa=(qa=qa+K+Dn(n=n+ea|0,ea)|0)+Z+Dn(n=n+R|0,R)|0;b[S]=qa;b[S+1]=n}for(S=0;160>S;S+=2){qa=b[S];n=b[S+1];ea=d&k|a&(d|k);var U=A&E|F&
(A|E);Z=(d>>>28|A<<4)^(A>>>2|d<<30)^(A>>>7|d<<25);R=(A>>>28|d<<4)^(d>>>2|A<<30)^(d>>>7|A<<25);var na=S$[S],aa=S$[S+1],xa=v^l&(r^v),jb=L^J&(O^L);Fa=Y+((J>>>14|l<<18)^(J>>>18|l<<14)^(l>>>9|J<<23))|0;K=y+((l>>>14|J<<18)^(l>>>18|J<<14)^(J>>>9|l<<23))+Dn(Fa,Y)|0;K=(K=(K=K+xa+Dn(Fa=Fa+jb|0,jb)|0)+na+Dn(Fa=Fa+aa|0,aa)|0)+qa+Dn(Fa=Fa+n|0,n)|0;n=R+U|0;qa=Z+ea+Dn(n,R)|0;y=v;Y=L;v=r;L=O;r=l;O=J;l=f+K+Dn(J=H+Fa|0,H)|0;f=a;H=F;a=k;F=E;k=d;E=A;d=K+qa+Dn(A=Fa+n|0,Fa)|0}(this||cf)._al=(this||cf)._al+A|0;(this||cf)._bl=
(this||cf)._bl+E|0;(this||cf)._cl=(this||cf)._cl+F|0;(this||cf)._dl=(this||cf)._dl+H|0;(this||cf)._el=(this||cf)._el+J|0;(this||cf)._fl=(this||cf)._fl+O|0;(this||cf)._gl=(this||cf)._gl+L|0;(this||cf)._hl=(this||cf)._hl+Y|0;(this||cf)._ah=(this||cf)._ah+d+Dn((this||cf)._al,A)|0;(this||cf)._bh=(this||cf)._bh+k+Dn((this||cf)._bl,E)|0;(this||cf)._ch=(this||cf)._ch+a+Dn((this||cf)._cl,F)|0;(this||cf)._dh=(this||cf)._dh+f+Dn((this||cf)._dl,H)|0;(this||cf)._eh=(this||cf)._eh+l+Dn((this||cf)._el,J)|0;(this||
cf)._fh=(this||cf)._fh+r+Dn((this||cf)._fl,O)|0;(this||cf)._gh=(this||cf)._gh+v+Dn((this||cf)._gl,L)|0;(this||cf)._hh=(this||cf)._hh+y+Dn((this||cf)._hl,Y)|0};$D.prototype._hash=function(){function n(d,k,a){b.writeInt32BE(d,a);b.writeInt32BE(k,a+4)}var b=mra.allocUnsafe(64);return n((this||cf)._ah,(this||cf)._al,0),n((this||cf)._bh,(this||cf)._bl,8),n((this||cf)._ch,(this||cf)._cl,16),n((this||cf)._dh,(this||cf)._dl,24),n((this||cf)._eh,(this||cf)._el,32),n((this||cf)._fh,(this||cf)._fl,40),n((this||
cf)._gh,(this||cf)._gl,48),n((this||cf)._hh,(this||cf)._hl,56),b};var Xj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yia=ex,nra=lj.Buffer,xia=Array(160);oi(QL,$D);QL.prototype.init=function(){return(this||Xj)._ah=3418070365,(this||Xj)._bh=1654270250,(this||Xj)._ch=2438529370,(this||Xj)._dh=355462360,(this||Xj)._eh=1731405415,(this||Xj)._fh=2394180231,(this||Xj)._gh=3675008525,(this||Xj)._hh=1203062813,(this||Xj)._al=3238371032,(this||Xj)._bl=914150663,(this||Xj)._cl=
812702999,(this||Xj)._dl=4144912697,(this||Xj)._el=4290775857,(this||Xj)._fl=1750603025,(this||Xj)._gl=1694076839,(this||Xj)._hl=3204075428,this||Xj};QL.prototype._hash=function(){function n(d,k,a){b.writeInt32BE(d,a);b.writeInt32BE(k,a+4)}var b=nra.allocUnsafe(48);return n((this||Xj)._ah,(this||Xj)._al,0),n((this||Xj)._bh,(this||Xj)._bl,8),n((this||Xj)._ch,(this||Xj)._cl,16),n((this||Xj)._dh,(this||Xj)._dl,24),n((this||Xj)._eh,(this||Xj)._el,32),n((this||Xj)._fh,(this||Xj)._fl,40),b};var Nz,T$=Nz=
{};(Nz=T$=function(n){n=n.toLowerCase();var b=Nz[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=SG;Nz.sha1=TG;Nz.sha224=PL;Nz.sha256=ZD;Nz.sha384=QL;Nz.sha512=$D;var qX=T$,Ql="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,U$=lj.Buffer,S3=DB.Transform,ora=WD.StringDecoder;oi(En,S3);En.prototype.update=function(n,b,d){"string"==typeof n&&(n=U$.from(n,b));n=this._update(n);return(this||Ql).hashMode?this||Ql:(d&&(n=this._toString(n,
d)),n)};En.prototype.setAutoPadding=function(){};En.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};En.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};En.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};En.prototype._transform=function(n,b,d){try{(this||Ql).hashMode?this._update(n):this.push(this._update(n))}catch(a){var k=a}finally{d(k)}};En.prototype._flush=function(n){try{this.push(this.__final())}catch(d){var b=
d}n(b)};En.prototype._finalOrDigest=function(n){var b=this.__final()||U$.alloc(0);return n&&(b=this._toString(b,n,!0)),b};En.prototype._toString=function(n,b,d){if((this||Ql)._decoder||((this||Ql)._decoder=new ora(b),(this||Ql)._encoding=b),(this||Ql)._encoding!==b)throw Error("can't switch encodings");n=(this||Ql)._decoder.write(n);return d&&(n+=(this||Ql)._decoder.end()),n};var T3=En;oi(RL,T3);RL.prototype._update=function(n){this._hash.update(n)};RL.prototype._final=function(){return this._hash.digest()};
var xI=function(n){return"md5"===(n=n.toLowerCase())?new XD:"rmd160"===n||"ripemd160"===n?new YD:new RL(qX(n))},V$=function(n){return(new XD).update(n).digest()},pra=oi,rB=lj.Buffer,U3=En,zia=rB.alloc(128);pra(SL,U3);SL.prototype._update=function(n){this._hash.push(n)};SL.prototype._final=function(){var n=this._alg(rB.concat(this._hash));return this._alg(rB.concat([this._opad,n]))};var qra=oi,V3=En,VG=lj.Buffer,hT=YD,iT=qX,Aia=VG.alloc(128);qra(UG,V3);UG.prototype._update=function(n){this._hash.update(n)};
UG.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new hT:iT(this._alg)).update(this._opad).update(n).digest()};var W$=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new UG("rmd160",b):"md5"===n?new SL(V$,b):new UG(n,b)},X$={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",
hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",
hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},Bia=ei.Buffer,rra=Math.pow(2,30)-1,rX,Y$=function(n,b,d,k){if(W3(n,"Password"),W3(b,"Salt"),"number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof k)throw new TypeError("Key length not a number");if(0>k||k>rra||k!=k)throw new TypeError("Bad key length");},Z$=bj;Z$.browser?rX="utf-8":rX=6<=parseInt(Z$.version.split(".")[0].slice(1),
10)?"utf-8":"binary";var KO=rX,vt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Eia=V$,Dia=YD,Cia=qX,ut=lj.Buffer,Fia=ut.alloc(128),TL={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};X3.prototype.run=function(n,b){return n.copy(b,(this||vt).blocksize),this.hash(b).copy((this||vt).opad,(this||vt).blocksize),this.hash((this||vt).opad)};var sX,tX=function(n,b,d,k,a){Y$(n,b,d,k);ut.isBuffer(n)||(n=ut.from(n,KO));ut.isBuffer(b)||(b=ut.from(b,
KO));n=new X3(a=a||"sha1",n,b.length);var f=ut.allocUnsafe(k),l=ut.allocUnsafe(b.length+4);b.copy(l,0,0,b.length);var r=0;a=TL[a];k=Math.ceil(k/a);for(var v=1;v<=k;v++){l.writeUInt32BE(v,b.length);for(var y=n.run(l,n.ipad1),A=y,E=1;E<d;E++){A=n.run(A,n.ipad2);for(var F=0;F<a;F++)y[F]^=A[F]}y.copy(f,r);r+=a}return f},yI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,uX=bj,aE=lj.Buffer,WG=yI.crypto&&yI.crypto.subtle,sra={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256",
"sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},vX=[],LO={pbkdf2:function(n,b,d,k,a,f){"function"==typeof a&&(f=a,a=void 0);var l=sra[(a=a||"sha1").toLowerCase()];if(!l||"function"!=typeof yI.Promise)return uX.nextTick(function(){try{var r=tX(n,b,d,k,a)}catch(v){return f(v)}f(null,r)});if(Y$(n,b,d,k),"function"!=typeof f)throw Error("No callback provided to pbkdf2");aE.isBuffer(n)||(n=aE.from(n,KO));aE.isBuffer(b)||(b=aE.from(b,KO));(function(r,v){r.then(function(y){uX.nextTick(function(){v(null,
y)})},function(y){uX.nextTick(function(){v(y)})})})(function(r){if(yI.process&&!yI.process.browser||!WG||!WG.importKey||!WG.deriveBits)return Promise.resolve(!1);if(void 0!==vX[r])return vX[r];var v=Y3(sX=sX||aE.alloc(8),sX,10,128,r).then(function(){return!0}).catch(function(){return!1});return vX[r]=v,v}(l).then(function(r){return r?Y3(n,b,d,k,l):tX(n,b,d,k,a)}),f)}};LO.pbkdf2Sync=tX;Z3.equal=function(n,b,d){if(n!=b)throw Error(d||"Assertion failed: "+n+" != "+b);};var ls=Z3,sl={readUInt32BE:function(n,
b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,d){n[0+d]=b>>>24;n[1+d]=b>>>16&255;n[2+d]=b>>>8&255;n[3+d]=255&b},ip:function(n,b,d,k){for(var a=0,f=0,l=6;0<=l;l-=2){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>>r+l&1}for(l=6;0<=l;l-=2){for(r=1;25>=r;r+=8)f<<=1,f|=b>>>r+l&1;for(r=1;25>=r;r+=8)f<<=1,f|=n>>>r+l&1}d[k+0]=a>>>0;d[k+1]=f>>>0},rip:function(n,b,d,k){for(var a=0,f=0,l=0;4>l;l++)for(var r=24;0<=r;r-=8)a<<=1,a|=b>>>r+l&1,a<<=1,a|=
n>>>r+l&1;for(l=4;8>l;l++)for(r=24;0<=r;r-=8)f<<=1,f|=b>>>r+l&1,f<<=1,f|=n>>>r+l&1;d[k+0]=a>>>0;d[k+1]=f>>>0},pc1:function(n,b,d,k){for(var a=0,f=0,l=7;5<=l;l--){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>r+l&1}for(r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(l=1;3>=l;l++){for(r=0;24>=r;r+=8)f<<=1,f|=b>>r+l&1;for(r=0;24>=r;r+=8)f<<=1,f|=n>>r+l&1}for(r=0;24>=r;r+=8)f<<=1,f|=n>>r+l&1;d[k+0]=a>>>0;d[k+1]=f>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},MO=[14,11,17,4,
27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];sl.pc2=function(n,b,d,k){for(var a=0,f=0,l=MO.length>>>1,r=0;r<l;r++)a<<=1,a|=n>>>MO[r]&1;for(r=l;r<MO.length;r++)f<<=1,f|=b>>>MO[r]&1;d[k+0]=a>>>0;d[k+1]=f>>>0};sl.expand=function(n,b,d){var k=0;var a=(1&n)<<5|n>>>27;for(var f=23;15<=f;f-=4)a<<=6,a|=n>>>f&63;for(f=11;3<=f;f-=4)k|=n>>>f&63,k<<=6;b[d+0]=a>>>0;b[d+1]=(k|(31&n)<<1|n>>>31)>>>0};var $$=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,
8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,
6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,
0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];sl.substitute=function(n,b){for(var d=0,k=0;4>k;k++)d<<=4,d|=$$[64*k+(n>>>18-6*k&63)];for(k=0;4>k;k++)d<<=4,d|=$$[256+64*k+(b>>>18-6*k&63)];return d>>>0};var aaa=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];sl.permute=function(n){for(var b=0,d=0;d<aaa.length;d++)b<<=1,b|=n>>>aaa[d]&
1;return b>>>0};sl.padSplit=function(n,b,d){for(n=n.toString(2);n.length<b;)n="0"+n;for(var k=[],a=0;a<b;a+=d)k.push(n.slice(a,a+d));return k.join(" ")};var tra=ls;Zq.prototype._init=function(){};Zq.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};Zq.prototype._buffer=function(n,b){for(var d=Math.min(this.buffer.length-this.bufferOff,n.length-b),k=0;k<d;k++)this.buffer[this.bufferOff+k]=n[b+k];return this.bufferOff+=d,d};Zq.prototype._flushBuffer=
function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};Zq.prototype._updateEncrypt=function(n){var b=0,d=0,k=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(k,d)));for(var a=n.length-(n.length-b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,k,d),d+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return k};
Zq.prototype._updateDecrypt=function(n){for(var b=0,d=0,k=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(k*this.blockSize);0<k;k--)b+=this._buffer(n,b),d+=this._flushBuffer(a,d);return this._buffer(n,b),a};Zq.prototype.final=function(n){var b,d;return n&&(b=this.update(n)),d="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),b?b.concat(d):d};Zq.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};Zq.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};Zq.prototype._unpad=function(n){return n};Zq.prototype._finalDecrypt=function(){tra.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var baa=ls,$3=Zq;oi(cs,$3);cs.create=function(n){return new cs(n)};var ura=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];cs.prototype.deriveKeys=function(n,b){n.keys=Array(32);baa.equal(b.length,
this.blockSize,"Invalid key length");var d=sl.readUInt32BE(b,0);b=sl.readUInt32BE(b,4);sl.pc1(d,b,n.tmp,0);d=n.tmp[0];b=n.tmp[1];for(var k=0;k<n.keys.length;k+=2){var a=ura[k>>>1];d=sl.r28shl(d,a);b=sl.r28shl(b,a);sl.pc2(d,b,n.keys,k)}};cs.prototype._update=function(n,b,d,k){var a=this._desState,f=sl.readUInt32BE(n,b);n=sl.readUInt32BE(n,b+4);sl.ip(f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,f,n,a.tmp,0):this._decrypt(a,f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];sl.writeUInt32BE(d,
f,k);sl.writeUInt32BE(d,n,k+4)};cs.prototype._pad=function(n,b){for(var d=n.length-b;b<n.length;b++)n[b]=d;return!0};cs.prototype._unpad=function(n){for(var b=n[n.length-1],d=n.length-b;d<n.length;d++)baa.equal(n[d],b);return n.slice(0,n.length-b)};cs.prototype._encrypt=function(n,b,d,k,a){for(var f=0;f<n.keys.length;f+=2){var l=n.keys[f],r=n.keys[f+1];sl.expand(d,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=sl.substitute(l,r);r=d;d=(b^sl.permute(l))>>>0;b=r}sl.rip(d,b,k,a)};cs.prototype._decrypt=function(n,
b,d,k,a){for(var f=n.keys.length-2;0<=f;f-=2){var l=n.keys[f],r=n.keys[f+1];sl.expand(d,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=sl.substitute(l,r);r=d;d=(b^sl.permute(l))>>>0;b=r}sl.rip(d,b,k,a)};var NO={},Iia=ls,vra=oi,OO={};NO.instantiate=function(n){function b(f){n.call(this,f);this._cbcInit()}vra(b,n);for(var d=Object.keys(OO),k=0;k<d.length;k++){var a=d[k];b.prototype[a]=OO[a]}return b.create=function(f){return new b(f)},b};OO._cbcInit=function(){this._cbcState=new Hia(this.options.iv)};OO._update=
function(n,b,d,k){var a=this.constructor.super_.prototype,f=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)f[l]^=n[b+l];a._update.call(this,f,0,d,k);for(l=0;l<this.blockSize;l++)f[l]=d[k+l]}else{a._update.call(this,n,b,d,k);for(l=0;l<this.blockSize;l++)d[k+l]^=f[l];for(l=0;l<this.blockSize;l++)f[l]=n[b+l]}};var Kia=ls,a4=Zq,ez=cs;oi(qv,a4);qv.create=function(n){return new qv(n)};qv.prototype._update=function(n,b,d,k){var a=this._edeState;a.ciphers[0]._update(n,b,d,k);
a.ciphers[1]._update(d,k,d,k);a.ciphers[2]._update(d,k,d,k)};qv.prototype._pad=ez.prototype._pad;qv.prototype._unpad=ez.prototype._unpad;var VL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,b4=En,wra=oi,sB=lj.Buffer,XG={"des-ede3-cbc":NO.instantiate(qv),"des-ede3":qv,"des-ede-cbc":NO.instantiate(qv),"des-ede":qv,"des-cbc":NO.instantiate(cs),"des-ecb":cs};XG.des=XG["des-cbc"];XG.des3=XG["des-ede3-cbc"];wra(UL,b4);UL.prototype._update=function(n){return sB.from((this||
VL)._des.update(n))};UL.prototype._final=function(){return sB.from((this||VL)._des.final())};var xra=ei.Buffer,aF=function(n,b){for(var d=Math.min(n.length,b.length),k=new xra(d),a=0;a<d;++a)k[a]=n[a]^b[a];return k},caa=function(n){for(var b,d=n.length;d--;){if(255!==(b=n.readUInt8(d))){b++;n.writeUInt8(b,d);break}n.writeUInt8(0,d)}},daa={},YG=lj.Buffer,Lia=aF;daa.encrypt=function(n,b,d){for(var k,a=YG.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=
YG.allocUnsafe(0)),!(n._cache.length<=b.length)){a=YG.concat([a,c4(n,b,d)]);break}k=n._cache.length;a=YG.concat([a,c4(n,b.slice(0,k),d)]);b=b.slice(k)}return a};var eaa={},wX=lj.Buffer;eaa.encrypt=function(n,b,d){for(var k=b.length,a=wX.allocUnsafe(k),f=-1;++f<k;){var l=f;var r=n;var v=b[f],y=d,A=r._cipher.encryptBlock(r._prev)[0]^v;r=(r._prev=wX.concat([r._prev.slice(1),wX.from([y?v:A])]),A);a[l]=r}return a};var faa={},PO=lj.Buffer;faa.encrypt=function(n,b,d){for(var k=b.length,a=PO.allocUnsafe(k),
f=-1;++f<k;){for(var l=f,r,v,y=n,A=b[f],E=d,F=-1,H=0;8>++F;){v=A&1<<7-F?128:0;H+=(128&(r=y._cipher.encryptBlock(y._prev)[0]^v))>>F%8;var J=y,O=y._prev;r=E?v:r;v=O.length;var L=-1,Y=PO.allocUnsafe(O.length);for(O=PO.concat([O,PO.from([r])]);++L<v;)Y[L]=O[L]<<1|O[L+1]>>7;J._prev=Y}a[l]=H}return a};var gaa={},yra=ei.Buffer;gaa.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=yra.concat([n._cache,Mia(n)]);var d=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),aF(b,d)};
var xX={},haa=lj.Buffer;xX.encrypt=function(n,b){var d=Math.ceil(b.length/16),k=n._cache.length;n._cache=haa.concat([n._cache,haa.allocUnsafe(16*d)]);for(var a=0;a<d;a++){var f=n;var l=f._cipher.encryptBlockRaw(f._prev);f=(caa(f._prev),l);l=k+16*a;n._cache.writeUInt32BE(f[0],l+0);n._cache.writeUInt32BE(f[1],l+4);n._cache.writeUInt32BE(f[2],l+8);n._cache.writeUInt32BE(f[3],l+12)}d=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),aF(b,d)};var hC={"aes-128-ecb":{cipher:"AES",key:128,
iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",
key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",
type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",
key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},zra={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=aF(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var d=n._prev;n._prev=b;
n=n._cipher.decryptBlock(b);return aF(n,d)}},CFB:daa,CFB8:eaa,CFB1:faa,OFB:gaa,CTR:xX,GCM:xX},yX;for(yX in hC)hC[yX].module=zra[hC[yX].mode];var es="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zI={},WL=lj.Buffer,Ara=[0,1,2,4,8,16,32,64,128,27,54],Gm=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var d=[],k=[[],[],[],[]],a=[[],[],[],[]],f=0,l=0,r=0;256>r;++r){var v=l^l<<1^l<<2^l<<3^l<<4;v=v>>>8^255&v^99;b[f]=v;d[v]=f;var y=n[f],A=n[y],
E=n[A],F=257*n[v]^16843008*v;k[0][f]=F<<24|F>>>8;k[1][f]=F<<16|F>>>16;k[2][f]=F<<8|F>>>24;k[3][f]=F;F=16843009*E^65537*A^257*y^16843008*f;a[0][v]=F<<24|F>>>8;a[1][v]=F<<16|F>>>16;a[2][v]=F<<8|F>>>24;a[3][v]=F;0===f?f=l=1:(f=y^n[n[n[E^y]]],l^=n[n[l]])}return{SBOX:b,INV_SBOX:d,SUB_MIX:k,INV_SUB_MIX:a}}();ds.blockSize=16;ds.keySize=32;ds.prototype.blockSize=ds.blockSize;ds.prototype.keySize=ds.keySize;ds.prototype._reset=function(){for(var n=(this||es)._key,b=n.length,d=b+6,k=4*(d+1),a=[],f=0;f<b;f++)a[f]=
n[f];for(f=b;f<k;f++)n=a[f-1],0==f%b?(n=n<<8|n>>>24,n=Gm.SBOX[n>>>24]<<24|Gm.SBOX[n>>>16&255]<<16|Gm.SBOX[n>>>8&255]<<8|Gm.SBOX[255&n],n^=Ara[f/b|0]<<24):6<b&&4==f%b&&(n=Gm.SBOX[n>>>24]<<24|Gm.SBOX[n>>>16&255]<<16|Gm.SBOX[n>>>8&255]<<8|Gm.SBOX[255&n]),a[f]=a[f-b]^n;b=[];for(f=0;f<k;f++){n=k-f;var l=a[n-(f%4?0:4)];b[f]=4>f||4>=n?l:Gm.INV_SUB_MIX[0][Gm.SBOX[l>>>24]]^Gm.INV_SUB_MIX[1][Gm.SBOX[l>>>16&255]]^Gm.INV_SUB_MIX[2][Gm.SBOX[l>>>8&255]]^Gm.INV_SUB_MIX[3][Gm.SBOX[255&l]]}(this||es)._nRounds=d;(this||
es)._keySchedule=a;(this||es)._invKeySchedule=b};ds.prototype.encryptBlockRaw=function(n){return d4(jT(n),(this||es)._keySchedule,Gm.SUB_MIX,Gm.SBOX,(this||es)._nRounds)};ds.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=WL.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};ds.prototype.decryptBlock=function(n){var b=(n=jT(n))[1];n[1]=n[3];n[3]=b;n=d4(n,(this||es)._invKeySchedule,Gm.INV_SUB_MIX,Gm.INV_SBOX,
(this||es)._nRounds);b=WL.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[1],12),b};ds.prototype.scrub=function(){kT((this||es)._keySchedule);kT((this||es)._invKeySchedule);kT((this||es)._key)};zI.AES=ds;var jo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bE=lj.Buffer,Bra=bE.alloc(16,0);ZG.prototype.ghash=function(n){for(var b=-1;++b<n.length;)(this||jo).state[b]^=n[b];this._multiply()};ZG.prototype._multiply=
function(){for(var n,b,d=[(n=(this||jo).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],k=[0,0,0,0],a=-1;128>++a;){0!=((this||jo).state[~~(a/8)]&1<<7-a%8)&&(k[0]^=d[0],k[1]^=d[1],k[2]^=d[2],k[3]^=d[3]);b=0!=(1&d[3]);for(n=3;0<n;n--)d[n]=d[n]>>>1|(1&d[n-1])<<31;d[0]>>>=1;b&&(d[0]^=-520093696)}(this||jo).state=e4(k)};ZG.prototype.update=function(n){for((this||jo).cache=bE.concat([(this||jo).cache,n]);16<=(this||jo).cache.length;)n=(this||jo).cache.slice(0,16),(this||jo).cache=
(this||jo).cache.slice(16),this.ghash(n)};ZG.prototype.final=function(n,b){return(this||jo).cache.length&&this.ghash(bE.concat([(this||jo).cache,Bra],16)),this.ghash(e4([0,n,0,b])),(this||jo).state};var Ph="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Nia=zI,cq=lj.Buffer,f4=En,g4=ZG,Oia=caa;oi(fz,f4);fz.prototype._update=function(n){if(!(this||Ph)._called&&(this||Ph)._alen){var b=16-(this||Ph)._alen%16;16>b&&(b=cq.alloc(b,0),(this||Ph)._ghash.update(b))}(this||Ph)._called=
!0;b=(this||Ph)._mode.encrypt(this||Ph,n);return(this||Ph)._decrypt?(this||Ph)._ghash.update(n):(this||Ph)._ghash.update(b),(this||Ph)._len+=n.length,b};fz.prototype._final=function(){if((this||Ph)._decrypt&&!(this||Ph)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=aF((this||Ph)._ghash.final(8*(this||Ph)._alen,8*(this||Ph)._len),(this||Ph)._cipher.encryptBlock((this||Ph)._finID)),b;if(b=(this||Ph)._decrypt){b=(this||Ph)._authTag;var d=0;n.length!==b.length&&d++;for(var k=
Math.min(n.length,b.length),a=0;a<k;++a)d+=n[a]^b[a];b=d}if(b)throw Error("Unsupported state or unable to authenticate data");(this||Ph)._authTag=n;(this||Ph)._cipher.scrub()};fz.prototype.getAuthTag=function(){if((this||Ph)._decrypt||!cq.isBuffer((this||Ph)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Ph)._authTag};fz.prototype.setAuthTag=function(n){if(!(this||Ph)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Ph)._authTag=
n};fz.prototype.setAAD=function(n){if((this||Ph)._called)throw Error("Attempting to set AAD in unsupported state");(this||Ph)._ghash.update(n);(this||Ph)._alen+=n.length};var wt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Pia=zI,lT=lj.Buffer,h4=En;oi($G,h4);$G.prototype._update=function(n){return(this||wt)._mode.encrypt(this||wt,n,(this||wt)._decrypt)};$G.prototype._final=function(){(this||wt)._cipher.scrub()};var iC=lj.Buffer,eH=function(n,b,d,k){if(iC.isBuffer(n)||
(n=iC.from(n,"binary")),b&&(iC.isBuffer(b)||(b=iC.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");d/=8;for(var a=iC.alloc(d),f=iC.alloc(k||0),l=iC.alloc(0);0<d||0<k;){var r=new XD;r.update(l);r.update(n);b&&r.update(b);l=r.digest();r=0;if(0<d){var v=a.length-d;r=Math.min(d,l.length);l.copy(a,v,0,r);d-=r}r<l.length&&0<k&&(v=Math.min(k,l.length-r),l.copy(f,f.length-k,r,r+v),k-=v)}return l.fill(0),{key:a,iv:f}},Yj="undefined"!=typeof globalThis?globalThis:
"undefined"!=typeof self?self:global,Sia=fz,cE=lj.Buffer,k4=hC,Ria=$G,i4=En,Qia=zI;oi(aH,i4);aH.prototype._update=function(n){var b;(this||Yj)._cache.add(n);for(n=[];b=(this||Yj)._cache.get((this||Yj)._autopadding);)b=(this||Yj)._mode.decrypt(this||Yj,b),n.push(b);return cE.concat(n)};aH.prototype._final=function(){var n=(this||Yj)._cache.flush();if((this||Yj)._autopadding){n=(this||Yj)._mode.decrypt(this||Yj,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var d=-1;++d<b;)if(n[d+
(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};aH.prototype.setAutoPadding=function(n){return(this||Yj)._autopadding=!!n,this||Yj};XL.prototype.add=function(n){(this||Yj).cache=cE.concat([(this||Yj).cache,n])};XL.prototype.get=function(n){var b;if(n){if(16<(this||Yj).cache.length)return b=(this||Yj).cache.slice(0,16),(this||Yj).cache=(this||Yj).cache.slice(16),b}else if(16<=(this||Yj).cache.length)return b=
(this||Yj).cache.slice(0,16),(this||Yj).cache=(this||Yj).cache.slice(16),b;return null};XL.prototype.flush=function(){if((this||Yj).cache.length)return(this||Yj).cache};var Ok="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,n4=hC,Via=fz,fx=lj.Buffer,Uia=$G,l4=En,Tia=zI;oi(bH,l4);bH.prototype._update=function(n){var b;(this||Ok)._cache.add(n);for(n=[];b=(this||Ok)._cache.get();)b=(this||Ok)._mode.encrypt(this||Ok,b),n.push(b);return fx.concat(n)};var Cra=fx.alloc(16,
16);bH.prototype._final=function(){var n=(this||Ok)._cache.flush();if((this||Ok)._autopadding)return n=(this||Ok)._mode.encrypt(this||Ok,n),(this||Ok)._cipher.scrub(),n;if(!n.equals(Cra))throw(this||Ok)._cipher.scrub(),Error("data not multiple of block length");};bH.prototype.setAutoPadding=function(n){return(this||Ok)._autopadding=!!n,this||Ok};YL.prototype.add=function(n){(this||Ok).cache=fx.concat([(this||Ok).cache,n])};YL.prototype.get=function(){if(15<(this||Ok).cache.length){var n=(this||Ok).cache.slice(0,
16);return(this||Ok).cache=(this||Ok).cache.slice(16),n}return null};YL.prototype.flush=function(){for(var n=16-(this||Ok).cache.length,b=fx.allocUnsafe(n),d=-1;++d<n;)b.writeUInt8(n,d);return fx.concat([(this||Ok).cache,b])};var ar={};ar.createCipher=ar.Cipher=function(n,b){var d=n4[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");b=eH(b,!1,d.key,d.iv);return m4(n,b.key,b.iv)};ar.createCipheriv=ar.Cipheriv=m4;ar.createDecipher=ar.Decipher=function(n,b){var d=k4[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");
b=eH(b,!1,d.key,d.iv);return j4(n,b.key,b.iv)};ar.createDecipheriv=ar.Decipheriv=j4;ar.listCiphers=ar.getCiphers=function(){return Object.keys(hC)};var Oz={"des-ecb":{key:8,iv:0}};Oz["des-cbc"]=Oz.des={key:8,iv:8};Oz["des-ede3-cbc"]=Oz.des3={key:24,iv:8};Oz["des-ede3"]={key:24,iv:0};Oz["des-ede-cbc"]={key:16,iv:8};Oz["des-ede"]={key:16,iv:0};var iaa,jaa,kaa,o4=UL,nT=ar,gz=hC,gx=Oz;var Dra=iaa=function(n,b){if(n=n.toLowerCase(),gz[n]){var d=gz[n].key;var k=gz[n].iv}else{if(!gx[n])throw new TypeError("invalid suite type");
d=8*gx[n].key;k=gx[n].iv}b=eH(b,!1,d,k);return mT(n,b.key,b.iv)};var Era=jaa=function(n,b){if(n=n.toLowerCase(),gz[n]){var d=gz[n].key;var k=gz[n].iv}else{if(!gx[n])throw new TypeError("invalid suite type");d=8*gx[n].key;k=gx[n].iv}b=eH(b,!1,d,k);return oT(n,b.key,b.iv)};var Fra=kaa=function(){return Object.keys(gx).concat(nT.getCiphers())};var Gra=Object.freeze({}),db="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,laa={},maa={exports:laa};!function(n,b){function d(K,
Z){if(!K)throw Error(Z||"Assertion failed");}function k(K,Z){K.super_=Z;var R=function(){};R.prototype=Z.prototype;K.prototype=new R;K.prototype.constructor=K}function a(K,Z,R){if(a.isBN(K))return K;(this||db).negative=0;(this||db).words=null;(this||db).length=0;(this||db).red=null;null!==K&&("le"!==Z&&"be"!==Z||(R=Z,Z=10),this._init(K||0,Z||10,R||"be"))}function f(K,Z,R){var U=0;for(R=Math.min(K.length,R);Z<R;Z++){var na=K.charCodeAt(Z)-48;U<<=4;U|=49<=na&&54>=na?na-49+10:17<=na&&22>=na?na-17+10:
15&na}return U}function l(K,Z,R,U){var na=0;for(R=Math.min(K.length,R);Z<R;Z++){var aa=K.charCodeAt(Z)-48;na*=U;na+=49<=aa?aa-49+10:17<=aa?aa-17+10:aa}return na}function r(K,Z,R){R.negative=Z.negative^K.negative;var U=K.length+Z.length|0;R.length=U;U=U-1|0;var na=(0|K.words[0])*(0|Z.words[0]),aa=na/67108864|0;R.words[0]=67108863&na;for(var xa=1;xa<U;xa++){var jb=aa>>>26;na=67108863&aa;aa=Math.min(xa,Z.length-1);for(var ob=Math.max(0,xa-K.length+1);ob<=aa;ob++)jb+=(na=(0|K.words[xa-ob|0])*(0|Z.words[ob])+
na)/67108864|0,na&=67108863;R.words[xa]=0|na;aa=0|jb}return 0!==aa?R.words[xa]=0|aa:R.length--,R.strip()}function v(K,Z){(this||db).x=K;(this||db).y=Z}function y(K,Z){(this||db).name=K;(this||db).p=new a(Z,16);(this||db).n=(this||db).p.bitLength();(this||db).k=(new a(1)).iushln((this||db).n).isub((this||db).p);(this||db).tmp=this._tmp()}function A(){y.call(this||db,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){y.call(this||db,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}
function F(){y.call(this||db,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function H(){y.call(this||db,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function J(K){"string"==typeof K?(K=a._prime(K),(this||db).m=K.p,(this||db).prime=K):(d(K.gtn(1),"modulus must be greater than 1"),(this||db).m=K,(this||db).prime=null)}function O(K){J.call(this||db,K);(this||db).shift=(this||db).m.bitLength();0!=(this||db).shift%26&&((this||db).shift+=26-(this||db).shift%
26);(this||db).r=(new a(1)).iushln((this||db).shift);(this||db).r2=this.imod((this||db).r.sqr());(this||db).rinv=(this||db).r._invmp((this||db).m);(this||db).minv=(this||db).rinv.mul((this||db).r).isubn(1).div((this||db).m);(this||db).minv=(this||db).minv.umod((this||db).r);(this||db).minv=(this||db).r.sub((this||db).minv)}"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var L=Gra.Buffer}catch(K){}a.isBN=function(K){return K instanceof a||null!==K&&"object"==typeof K&&K.constructor.wordSize===
a.wordSize&&Array.isArray(K.words)};a.max=function(K,Z){return 0<K.cmp(Z)?K:Z};a.min=function(K,Z){return 0>K.cmp(Z)?K:Z};a.prototype._init=function(K,Z,R){if("number"==typeof K)return this._initNumber(K,Z,R);if("object"==typeof K)return this._initArray(K,Z,R);"hex"===Z&&(Z=16);d(Z===(0|Z)&&2<=Z&&36>=Z);var U=0;"-"===(K=K.toString().replace(/\s+/g,""))[0]&&U++;16===Z?this._parseHex(K,U):this._parseBase(K,Z,U);"-"===K[0]&&((this||db).negative=1);this.strip();"le"===R&&this._initArray(this.toArray(),
Z,R)};a.prototype._initNumber=function(K,Z,R){0>K&&((this||db).negative=1,K=-K);67108864>K?((this||db).words=[67108863&K],(this||db).length=1):4503599627370496>K?((this||db).words=[67108863&K,K/67108864&67108863],(this||db).length=2):(d(9007199254740992>K),(this||db).words=[67108863&K,K/67108864&67108863,1],(this||db).length=3);"le"===R&&this._initArray(this.toArray(),Z,R)};a.prototype._initArray=function(K,Z,R){if(d("number"==typeof K.length),0>=K.length)return(this||db).words=[0],(this||db).length=
1,this||db;(this||db).length=Math.ceil(K.length/3);(this||db).words=Array((this||db).length);for(Z=0;Z<(this||db).length;Z++)(this||db).words[Z]=0;var U=0;if("be"===R)for(Z=K.length-1,R=0;0<=Z;Z-=3){var na=K[Z]|K[Z-1]<<8|K[Z-2]<<16;(this||db).words[R]|=na<<U&67108863;(this||db).words[R+1]=na>>>26-U&67108863;26<=(U+=24)&&(U-=26,R++)}else if("le"===R)for(R=Z=0;Z<K.length;Z+=3)na=K[Z]|K[Z+1]<<8|K[Z+2]<<16,(this||db).words[R]|=na<<U&67108863,(this||db).words[R+1]=na>>>26-U&67108863,26<=(U+=24)&&(U-=26,
R++);return this.strip()};a.prototype._parseHex=function(K,Z){(this||db).length=Math.ceil((K.length-Z)/6);(this||db).words=Array((this||db).length);for(var R=0;R<(this||db).length;R++)(this||db).words[R]=0;var U,na=0;R=K.length-6;for(U=0;R>=Z;R-=6){var aa=f(K,R,R+6);(this||db).words[U]|=aa<<na&67108863;(this||db).words[U+1]|=aa>>>26-na&4194303;26<=(na+=24)&&(na-=26,U++)}R+6!==Z&&(aa=f(K,Z,R+6),(this||db).words[U]|=aa<<na&67108863,(this||db).words[U+1]|=aa>>>26-na&4194303);this.strip()};a.prototype._parseBase=
function(K,Z,R){(this||db).words=[0];(this||db).length=1;for(var U=0,na=1;67108863>=na;na*=Z)U++;U--;na=na/Z|0;var aa=K.length-R,xa=aa%U;aa=Math.min(aa,aa-xa)+R;for(var jb=R;jb<aa;jb+=U)R=l(K,jb,jb+U,Z),this.imuln(na),67108864>(this||db).words[0]+R?(this||db).words[0]+=R:this._iaddn(R);if(0!==xa){U=1;R=l(K,jb,K.length,Z);for(jb=0;jb<xa;jb++)U*=Z;this.imuln(U);67108864>(this||db).words[0]+R?(this||db).words[0]+=R:this._iaddn(R)}};a.prototype.copy=function(K){K.words=Array((this||db).length);for(var Z=
0;Z<(this||db).length;Z++)K.words[Z]=(this||db).words[Z];K.length=(this||db).length;K.negative=(this||db).negative;K.red=(this||db).red};a.prototype.clone=function(){var K=new a(null);return this.copy(K),K};a.prototype._expand=function(K){for(;(this||db).length<K;)(this||db).words[(this||db).length++]=0;return this||db};a.prototype.strip=function(){for(;1<(this||db).length&&0===(this||db).words[(this||db).length-1];)(this||db).length--;return this._normSign()};a.prototype._normSign=function(){return 1===
(this||db).length&&0===(this||db).words[0]&&((this||db).negative=0),this||db};a.prototype.inspect=function(){return((this||db).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var Y=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ea=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(K,Z){if(Z=0|Z||1,16===(K=K||10)||"hex"===K){var R="";for(var U=K=0,na=0;na<(this||
db).length;na++){var aa=(this||db).words[na],xa=(16777215&(aa<<K|U)).toString(16);R=0!==(U=aa>>>24-K&16777215)||na!==(this||db).length-1?Y[6-xa.length]+xa+R:xa+R;26<=(K+=2)&&(K-=26,na--)}for(0!==U&&(R=U.toString(16)+R);0!=R.length%Z;)R="0"+R;return 0!==(this||db).negative&&(R="-"+R),R}if(K===(0|K)&&2<=K&&36>=K){U=S[K];na=ea[K];R="";aa=this.clone();for(aa.negative=0;!aa.isZero();)xa=aa.modn(na).toString(K),R=(aa=aa.idivn(na)).isZero()?xa+R:Y[U-xa.length]+xa+R;for(this.isZero()&&(R="0"+R);0!=R.length%
Z;)R="0"+R;return 0!==(this||db).negative&&(R="-"+R),R}d(!1,"Base should be between 2 and 36")};a.prototype.toNumber=function(){var K=(this||db).words[0];return 2===(this||db).length?K+=67108864*(this||db).words[1]:3===(this||db).length&&1===(this||db).words[2]?K+=4503599627370496+67108864*(this||db).words[1]:2<(this||db).length&&d(!1,"Number can only safely store up to 53 bits"),0!==(this||db).negative?-K:K};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(K,
Z){return d(void 0!==L),this.toArrayLike(L,K,Z)};a.prototype.toArray=function(K,Z){return this.toArrayLike(Array,K,Z)};a.prototype.toArrayLike=function(K,Z,R){var U=this.byteLength();R=R||Math.max(1,U);d(U<=R,"byte array longer than desired length");d(0<R,"Requested array length <= 0");this.strip();var na="le"===Z;K=new K(R);Z=this.clone();if(na){for(na=0;!Z.isZero();na++)U=Z.andln(255),Z.iushrn(8),K[na]=U;for(;na<R;na++)K[na]=0}else{for(na=0;na<R-U;na++)K[na]=0;for(na=0;!Z.isZero();na++)U=Z.andln(255),
Z.iushrn(8),K[R-na-1]=U}return K};Math.clz32?a.prototype._countBits=function(K){return 32-Math.clz32(K)}:a.prototype._countBits=function(K){var Z=0;return 4096<=K&&(Z+=13,K>>>=13),64<=K&&(Z+=7,K>>>=7),8<=K&&(Z+=4,K>>>=4),2<=K&&(Z+=2,K>>>=2),Z+K};a.prototype._zeroBits=function(K){if(0===K)return 26;var Z=0;return 0==(8191&K)&&(Z+=13,K>>>=13),0==(127&K)&&(Z+=7,K>>>=7),0==(15&K)&&(Z+=4,K>>>=4),0==(3&K)&&(Z+=2,K>>>=2),0==(1&K)&&Z++,Z};a.prototype.bitLength=function(){var K=this._countBits((this||db).words[(this||
db).length-1]);return 26*((this||db).length-1)+K};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var K=0,Z=0;Z<(this||db).length;Z++){var R=this._zeroBits((this||db).words[Z]);if(K+=R,26!==R)break}return K};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(K){return 0!==(this||db).negative?this.abs().inotn(K).iaddn(1):this.clone()};a.prototype.fromTwos=function(K){return this.testn(K-1)?this.notn(K).iaddn(1).ineg():this.clone()};a.prototype.isNeg=
function(){return 0!==(this||db).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){return this.isZero()||((this||db).negative^=1),this||db};a.prototype.iuor=function(K){for(;(this||db).length<K.length;)(this||db).words[(this||db).length++]=0;for(var Z=0;Z<K.length;Z++)(this||db).words[Z]|=K.words[Z];return this.strip()};a.prototype.ior=function(K){return d(0==((this||db).negative|K.negative)),this.iuor(K)};a.prototype.or=function(K){return(this||db).length>
K.length?this.clone().ior(K):K.clone().ior(this||db)};a.prototype.uor=function(K){return(this||db).length>K.length?this.clone().iuor(K):K.clone().iuor(this||db)};a.prototype.iuand=function(K){var Z=(this||db).length>K.length?K:this||db;for(var R=0;R<Z.length;R++)(this||db).words[R]&=K.words[R];return(this||db).length=Z.length,this.strip()};a.prototype.iand=function(K){return d(0==((this||db).negative|K.negative)),this.iuand(K)};a.prototype.and=function(K){return(this||db).length>K.length?this.clone().iand(K):
K.clone().iand(this||db)};a.prototype.uand=function(K){return(this||db).length>K.length?this.clone().iuand(K):K.clone().iuand(this||db)};a.prototype.iuxor=function(K){var Z,R;(this||db).length>K.length?(Z=this||db,R=K):(Z=K,R=this||db);for(K=0;K<R.length;K++)(this||db).words[K]=Z.words[K]^R.words[K];if((this||db)!==Z)for(;K<Z.length;K++)(this||db).words[K]=Z.words[K];return(this||db).length=Z.length,this.strip()};a.prototype.ixor=function(K){return d(0==((this||db).negative|K.negative)),this.iuxor(K)};
a.prototype.xor=function(K){return(this||db).length>K.length?this.clone().ixor(K):K.clone().ixor(this||db)};a.prototype.uxor=function(K){return(this||db).length>K.length?this.clone().iuxor(K):K.clone().iuxor(this||db)};a.prototype.inotn=function(K){d("number"==typeof K&&0<=K);var Z=0|Math.ceil(K/26);K%=26;this._expand(Z);0<K&&Z--;for(var R=0;R<Z;R++)(this||db).words[R]=67108863&~(this||db).words[R];return 0<K&&((this||db).words[R]=~(this||db).words[R]&67108863>>26-K),this.strip()};a.prototype.notn=
function(K){return this.clone().inotn(K)};a.prototype.setn=function(K,Z){d("number"==typeof K&&0<=K);var R=K/26|0;K%=26;return this._expand(R+1),(this||db).words[R]=Z?(this||db).words[R]|1<<K:(this||db).words[R]&~(1<<K),this.strip()};a.prototype.iadd=function(K){var Z,R,U;if(0!==(this||db).negative&&0===K.negative)return(this||db).negative=0,this.isub(K),(this||db).negative^=1,this._normSign();if(0===(this||db).negative&&0!==K.negative)return K.negative=0,Z=this.isub(K),K.negative=1,Z._normSign();
(this||db).length>K.length?(R=this||db,U=K):(R=K,U=this||db);for(K=Z=0;K<U.length;K++)Z=(0|R.words[K])+(0|U.words[K])+Z,(this||db).words[K]=67108863&Z,Z>>>=26;for(;0!==Z&&K<R.length;K++)Z=(0|R.words[K])+Z,(this||db).words[K]=67108863&Z,Z>>>=26;if((this||db).length=R.length,0!==Z)(this||db).words[(this||db).length]=Z,(this||db).length++;else if(R!==(this||db))for(;K<R.length;K++)(this||db).words[K]=R.words[K];return this||db};a.prototype.add=function(K){var Z;return 0!==K.negative&&0===(this||db).negative?
(K.negative=0,Z=this.sub(K),K.negative^=1,Z):0===K.negative&&0!==(this||db).negative?((this||db).negative=0,Z=K.sub(this||db),(this||db).negative=1,Z):(this||db).length>K.length?this.clone().iadd(K):K.clone().iadd(this||db)};a.prototype.isub=function(K){if(0!==K.negative){K.negative=0;var Z=this.iadd(K);return K.negative=1,Z._normSign()}if(0!==(this||db).negative)return(this||db).negative=0,this.iadd(K),(this||db).negative=1,this._normSign();var R,U;Z=this.cmp(K);if(0===Z)return(this||db).negative=
0,(this||db).length=1,(this||db).words[0]=0,this||db;0<Z?(R=this||db,U=K):(R=K,U=this||db);for(var na=K=0;na<U.length;na++)K=(Z=(0|R.words[na])-(0|U.words[na])+K)>>26,(this||db).words[na]=67108863&Z;for(;0!==K&&na<R.length;na++)K=(Z=(0|R.words[na])+K)>>26,(this||db).words[na]=67108863&Z;if(0===K&&na<R.length&&R!==(this||db))for(;na<R.length;na++)(this||db).words[na]=R.words[na];return(this||db).length=Math.max((this||db).length,na),R!==(this||db)&&((this||db).negative=1),this.strip()};a.prototype.sub=
function(K){return this.clone().isub(K)};var qa=function(K,Z,R){var U=K.words,na=Z.words,aa=R.words,xa=0|U[0],jb=8191&xa;xa>>>=13;var ob=0|U[1],pa=8191&ob;ob>>>=13;var ka=0|U[2],wa=8191&ka;ka>>>=13;var Ka=0|U[3],Fb=8191&Ka;Ka>>>=13;var hc=0|U[4],Ub=8191&hc;hc>>>=13;var ac=0|U[5],Ic=8191&ac;ac>>>=13;var Mb=0|U[6],ed=8191&Mb;Mb>>>=13;var Bd=0|U[7],ja=8191&Bd;Bd>>>=13;var Ba=0|U[8],Ea=8191&Ba;Ba>>>=13;var wb=0|U[9];U=8191&wb;wb>>>=13;var $b=0|na[0],zd=8191&$b,yd=$b>>>13,Mc=0|na[1];$b=8191&Mc;var Me=
Mc>>>13,Fe=0|na[2];Mc=8191&Fe;var Jh=Fe>>>13,fh=0|na[3];Fe=8191&fh;var dj=fh>>>13,Wi=0|na[4];fh=8191&Wi;var Tj=Wi>>>13,gk=0|na[5];Wi=8191&gk;var yj=gk>>>13,zj=0|na[6];gk=8191&zj;var gi=zj>>>13,pi=0|na[7];zj=8191&pi;var Bi=pi>>>13,Kj=0|na[8];pi=8191&Kj;Kj>>>=13;var xk=0|na[9];na=8191&xk;xk>>>=13;R.negative=K.negative^Z.negative;R.length=19;var Jz=(0+Math.imul(jb,zd)|0)+((8191&(K=(K=Math.imul(jb,yd))+Math.imul(xa,zd)|0))<<13)|0;Z=(Math.imul(xa,yd)+(K>>>13)|0)+(Jz>>>26)|0;Jz&=67108863;var Dd=Math.imul(pa,
zd);K=(K=Math.imul(pa,yd))+Math.imul(ob,zd)|0;var Ed=Math.imul(ob,yd);var Hz=(Z+(Dd+Math.imul(jb,$b)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Me)|0)+Math.imul(xa,$b)|0))<<13)|0;Z=((Ed+Math.imul(xa,Me)|0)+(K>>>13)|0)+(Hz>>>26)|0;Hz&=67108863;Dd=Math.imul(wa,zd);K=(K=Math.imul(wa,yd))+Math.imul(ka,zd)|0;Ed=Math.imul(ka,yd);Dd=Dd+Math.imul(pa,$b)|0;K=(K=K+Math.imul(pa,Me)|0)+Math.imul(ob,$b)|0;Ed=Ed+Math.imul(ob,Me)|0;var Ax=(Z+(Dd+Math.imul(jb,Mc)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Jh)|0)+Math.imul(xa,Mc)|
0))<<13)|0;Z=((Ed+Math.imul(xa,Jh)|0)+(K>>>13)|0)+(Ax>>>26)|0;Ax&=67108863;Dd=Math.imul(Fb,zd);K=(K=Math.imul(Fb,yd))+Math.imul(Ka,zd)|0;Ed=Math.imul(Ka,yd);Dd=Dd+Math.imul(wa,$b)|0;K=(K=K+Math.imul(wa,Me)|0)+Math.imul(ka,$b)|0;Ed=Ed+Math.imul(ka,Me)|0;Dd=Dd+Math.imul(pa,Mc)|0;K=(K=K+Math.imul(pa,Jh)|0)+Math.imul(ob,Mc)|0;Ed=Ed+Math.imul(ob,Jh)|0;var Nv=(Z+(Dd+Math.imul(jb,Fe)|0)|0)+((8191&(K=(K=K+Math.imul(jb,dj)|0)+Math.imul(xa,Fe)|0))<<13)|0;Z=((Ed+Math.imul(xa,dj)|0)+(K>>>13)|0)+(Nv>>>26)|0;Nv&=
67108863;Dd=Math.imul(Ub,zd);K=(K=Math.imul(Ub,yd))+Math.imul(hc,zd)|0;Ed=Math.imul(hc,yd);Dd=Dd+Math.imul(Fb,$b)|0;K=(K=K+Math.imul(Fb,Me)|0)+Math.imul(Ka,$b)|0;Ed=Ed+Math.imul(Ka,Me)|0;Dd=Dd+Math.imul(wa,Mc)|0;K=(K=K+Math.imul(wa,Jh)|0)+Math.imul(ka,Mc)|0;Ed=Ed+Math.imul(ka,Jh)|0;Dd=Dd+Math.imul(pa,Fe)|0;K=(K=K+Math.imul(pa,dj)|0)+Math.imul(ob,Fe)|0;Ed=Ed+Math.imul(ob,dj)|0;var UB=(Z+(Dd+Math.imul(jb,fh)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Tj)|0)+Math.imul(xa,fh)|0))<<13)|0;Z=((Ed+Math.imul(xa,Tj)|
0)+(K>>>13)|0)+(UB>>>26)|0;UB&=67108863;Dd=Math.imul(Ic,zd);K=(K=Math.imul(Ic,yd))+Math.imul(ac,zd)|0;Ed=Math.imul(ac,yd);Dd=Dd+Math.imul(Ub,$b)|0;K=(K=K+Math.imul(Ub,Me)|0)+Math.imul(hc,$b)|0;Ed=Ed+Math.imul(hc,Me)|0;Dd=Dd+Math.imul(Fb,Mc)|0;K=(K=K+Math.imul(Fb,Jh)|0)+Math.imul(Ka,Mc)|0;Ed=Ed+Math.imul(Ka,Jh)|0;Dd=Dd+Math.imul(wa,Fe)|0;K=(K=K+Math.imul(wa,dj)|0)+Math.imul(ka,Fe)|0;Ed=Ed+Math.imul(ka,dj)|0;Dd=Dd+Math.imul(pa,fh)|0;K=(K=K+Math.imul(pa,Tj)|0)+Math.imul(ob,fh)|0;Ed=Ed+Math.imul(ob,Tj)|
0;var XB=(Z+(Dd+Math.imul(jb,Wi)|0)|0)+((8191&(K=(K=K+Math.imul(jb,yj)|0)+Math.imul(xa,Wi)|0))<<13)|0;Z=((Ed+Math.imul(xa,yj)|0)+(K>>>13)|0)+(XB>>>26)|0;XB&=67108863;Dd=Math.imul(ed,zd);K=(K=Math.imul(ed,yd))+Math.imul(Mb,zd)|0;Ed=Math.imul(Mb,yd);Dd=Dd+Math.imul(Ic,$b)|0;K=(K=K+Math.imul(Ic,Me)|0)+Math.imul(ac,$b)|0;Ed=Ed+Math.imul(ac,Me)|0;Dd=Dd+Math.imul(Ub,Mc)|0;K=(K=K+Math.imul(Ub,Jh)|0)+Math.imul(hc,Mc)|0;Ed=Ed+Math.imul(hc,Jh)|0;Dd=Dd+Math.imul(Fb,Fe)|0;K=(K=K+Math.imul(Fb,dj)|0)+Math.imul(Ka,
Fe)|0;Ed=Ed+Math.imul(Ka,dj)|0;Dd=Dd+Math.imul(wa,fh)|0;K=(K=K+Math.imul(wa,Tj)|0)+Math.imul(ka,fh)|0;Ed=Ed+Math.imul(ka,Tj)|0;Dd=Dd+Math.imul(pa,Wi)|0;K=(K=K+Math.imul(pa,yj)|0)+Math.imul(ob,Wi)|0;Ed=Ed+Math.imul(ob,yj)|0;var YB=(Z+(Dd+Math.imul(jb,gk)|0)|0)+((8191&(K=(K=K+Math.imul(jb,gi)|0)+Math.imul(xa,gk)|0))<<13)|0;Z=((Ed+Math.imul(xa,gi)|0)+(K>>>13)|0)+(YB>>>26)|0;YB&=67108863;Dd=Math.imul(ja,zd);K=(K=Math.imul(ja,yd))+Math.imul(Bd,zd)|0;Ed=Math.imul(Bd,yd);Dd=Dd+Math.imul(ed,$b)|0;K=(K=K+
Math.imul(ed,Me)|0)+Math.imul(Mb,$b)|0;Ed=Ed+Math.imul(Mb,Me)|0;Dd=Dd+Math.imul(Ic,Mc)|0;K=(K=K+Math.imul(Ic,Jh)|0)+Math.imul(ac,Mc)|0;Ed=Ed+Math.imul(ac,Jh)|0;Dd=Dd+Math.imul(Ub,Fe)|0;K=(K=K+Math.imul(Ub,dj)|0)+Math.imul(hc,Fe)|0;Ed=Ed+Math.imul(hc,dj)|0;Dd=Dd+Math.imul(Fb,fh)|0;K=(K=K+Math.imul(Fb,Tj)|0)+Math.imul(Ka,fh)|0;Ed=Ed+Math.imul(Ka,Tj)|0;Dd=Dd+Math.imul(wa,Wi)|0;K=(K=K+Math.imul(wa,yj)|0)+Math.imul(ka,Wi)|0;Ed=Ed+Math.imul(ka,yj)|0;Dd=Dd+Math.imul(pa,gk)|0;K=(K=K+Math.imul(pa,gi)|0)+Math.imul(ob,
gk)|0;Ed=Ed+Math.imul(ob,gi)|0;var ZB=(Z+(Dd+Math.imul(jb,zj)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Bi)|0)+Math.imul(xa,zj)|0))<<13)|0;Z=((Ed+Math.imul(xa,Bi)|0)+(K>>>13)|0)+(ZB>>>26)|0;ZB&=67108863;Dd=Math.imul(Ea,zd);K=(K=Math.imul(Ea,yd))+Math.imul(Ba,zd)|0;Ed=Math.imul(Ba,yd);Dd=Dd+Math.imul(ja,$b)|0;K=(K=K+Math.imul(ja,Me)|0)+Math.imul(Bd,$b)|0;Ed=Ed+Math.imul(Bd,Me)|0;Dd=Dd+Math.imul(ed,Mc)|0;K=(K=K+Math.imul(ed,Jh)|0)+Math.imul(Mb,Mc)|0;Ed=Ed+Math.imul(Mb,Jh)|0;Dd=Dd+Math.imul(Ic,Fe)|0;K=(K=K+
Math.imul(Ic,dj)|0)+Math.imul(ac,Fe)|0;Ed=Ed+Math.imul(ac,dj)|0;Dd=Dd+Math.imul(Ub,fh)|0;K=(K=K+Math.imul(Ub,Tj)|0)+Math.imul(hc,fh)|0;Ed=Ed+Math.imul(hc,Tj)|0;Dd=Dd+Math.imul(Fb,Wi)|0;K=(K=K+Math.imul(Fb,yj)|0)+Math.imul(Ka,Wi)|0;Ed=Ed+Math.imul(Ka,yj)|0;Dd=Dd+Math.imul(wa,gk)|0;K=(K=K+Math.imul(wa,gi)|0)+Math.imul(ka,gk)|0;Ed=Ed+Math.imul(ka,gi)|0;Dd=Dd+Math.imul(pa,zj)|0;K=(K=K+Math.imul(pa,Bi)|0)+Math.imul(ob,zj)|0;Ed=Ed+Math.imul(ob,Bi)|0;var $B=(Z+(Dd+Math.imul(jb,pi)|0)|0)+((8191&(K=(K=K+Math.imul(jb,
Kj)|0)+Math.imul(xa,pi)|0))<<13)|0;Z=((Ed+Math.imul(xa,Kj)|0)+(K>>>13)|0)+($B>>>26)|0;$B&=67108863;Dd=Math.imul(U,zd);K=(K=Math.imul(U,yd))+Math.imul(wb,zd)|0;Ed=Math.imul(wb,yd);Dd=Dd+Math.imul(Ea,$b)|0;K=(K=K+Math.imul(Ea,Me)|0)+Math.imul(Ba,$b)|0;Ed=Ed+Math.imul(Ba,Me)|0;Dd=Dd+Math.imul(ja,Mc)|0;K=(K=K+Math.imul(ja,Jh)|0)+Math.imul(Bd,Mc)|0;Ed=Ed+Math.imul(Bd,Jh)|0;Dd=Dd+Math.imul(ed,Fe)|0;K=(K=K+Math.imul(ed,dj)|0)+Math.imul(Mb,Fe)|0;Ed=Ed+Math.imul(Mb,dj)|0;Dd=Dd+Math.imul(Ic,fh)|0;K=(K=K+Math.imul(Ic,
Tj)|0)+Math.imul(ac,fh)|0;Ed=Ed+Math.imul(ac,Tj)|0;Dd=Dd+Math.imul(Ub,Wi)|0;K=(K=K+Math.imul(Ub,yj)|0)+Math.imul(hc,Wi)|0;Ed=Ed+Math.imul(hc,yj)|0;Dd=Dd+Math.imul(Fb,gk)|0;K=(K=K+Math.imul(Fb,gi)|0)+Math.imul(Ka,gk)|0;Ed=Ed+Math.imul(Ka,gi)|0;Dd=Dd+Math.imul(wa,zj)|0;K=(K=K+Math.imul(wa,Bi)|0)+Math.imul(ka,zj)|0;Ed=Ed+Math.imul(ka,Bi)|0;Dd=Dd+Math.imul(pa,pi)|0;K=(K=K+Math.imul(pa,Kj)|0)+Math.imul(ob,pi)|0;Ed=Ed+Math.imul(ob,Kj)|0;jb=(Z+(Dd+Math.imul(jb,na)|0)|0)+((8191&(K=(K=K+Math.imul(jb,xk)|0)+
Math.imul(xa,na)|0))<<13)|0;Z=((Ed+Math.imul(xa,xk)|0)+(K>>>13)|0)+(jb>>>26)|0;jb&=67108863;Dd=Math.imul(U,$b);K=(K=Math.imul(U,Me))+Math.imul(wb,$b)|0;Ed=Math.imul(wb,Me);Dd=Dd+Math.imul(Ea,Mc)|0;K=(K=K+Math.imul(Ea,Jh)|0)+Math.imul(Ba,Mc)|0;Ed=Ed+Math.imul(Ba,Jh)|0;Dd=Dd+Math.imul(ja,Fe)|0;K=(K=K+Math.imul(ja,dj)|0)+Math.imul(Bd,Fe)|0;Ed=Ed+Math.imul(Bd,dj)|0;Dd=Dd+Math.imul(ed,fh)|0;K=(K=K+Math.imul(ed,Tj)|0)+Math.imul(Mb,fh)|0;Ed=Ed+Math.imul(Mb,Tj)|0;Dd=Dd+Math.imul(Ic,Wi)|0;K=(K=K+Math.imul(Ic,
yj)|0)+Math.imul(ac,Wi)|0;Ed=Ed+Math.imul(ac,yj)|0;Dd=Dd+Math.imul(Ub,gk)|0;K=(K=K+Math.imul(Ub,gi)|0)+Math.imul(hc,gk)|0;Ed=Ed+Math.imul(hc,gi)|0;Dd=Dd+Math.imul(Fb,zj)|0;K=(K=K+Math.imul(Fb,Bi)|0)+Math.imul(Ka,zj)|0;Ed=Ed+Math.imul(Ka,Bi)|0;Dd=Dd+Math.imul(wa,pi)|0;K=(K=K+Math.imul(wa,Kj)|0)+Math.imul(ka,pi)|0;Ed=Ed+Math.imul(ka,Kj)|0;xa=(Z+(Dd+Math.imul(pa,na)|0)|0)+((8191&(K=(K=K+Math.imul(pa,xk)|0)+Math.imul(ob,na)|0))<<13)|0;Z=((Ed+Math.imul(ob,xk)|0)+(K>>>13)|0)+(xa>>>26)|0;xa&=67108863;Dd=
Math.imul(U,Mc);K=(K=Math.imul(U,Jh))+Math.imul(wb,Mc)|0;Ed=Math.imul(wb,Jh);Dd=Dd+Math.imul(Ea,Fe)|0;K=(K=K+Math.imul(Ea,dj)|0)+Math.imul(Ba,Fe)|0;Ed=Ed+Math.imul(Ba,dj)|0;Dd=Dd+Math.imul(ja,fh)|0;K=(K=K+Math.imul(ja,Tj)|0)+Math.imul(Bd,fh)|0;Ed=Ed+Math.imul(Bd,Tj)|0;Dd=Dd+Math.imul(ed,Wi)|0;K=(K=K+Math.imul(ed,yj)|0)+Math.imul(Mb,Wi)|0;Ed=Ed+Math.imul(Mb,yj)|0;Dd=Dd+Math.imul(Ic,gk)|0;K=(K=K+Math.imul(Ic,gi)|0)+Math.imul(ac,gk)|0;Ed=Ed+Math.imul(ac,gi)|0;Dd=Dd+Math.imul(Ub,zj)|0;K=(K=K+Math.imul(Ub,
Bi)|0)+Math.imul(hc,zj)|0;Ed=Ed+Math.imul(hc,Bi)|0;Dd=Dd+Math.imul(Fb,pi)|0;K=(K=K+Math.imul(Fb,Kj)|0)+Math.imul(Ka,pi)|0;Ed=Ed+Math.imul(Ka,Kj)|0;pa=(Z+(Dd+Math.imul(wa,na)|0)|0)+((8191&(K=(K=K+Math.imul(wa,xk)|0)+Math.imul(ka,na)|0))<<13)|0;Z=((Ed+Math.imul(ka,xk)|0)+(K>>>13)|0)+(pa>>>26)|0;pa&=67108863;Dd=Math.imul(U,Fe);K=(K=Math.imul(U,dj))+Math.imul(wb,Fe)|0;Ed=Math.imul(wb,dj);Dd=Dd+Math.imul(Ea,fh)|0;K=(K=K+Math.imul(Ea,Tj)|0)+Math.imul(Ba,fh)|0;Ed=Ed+Math.imul(Ba,Tj)|0;Dd=Dd+Math.imul(ja,
Wi)|0;K=(K=K+Math.imul(ja,yj)|0)+Math.imul(Bd,Wi)|0;Ed=Ed+Math.imul(Bd,yj)|0;Dd=Dd+Math.imul(ed,gk)|0;K=(K=K+Math.imul(ed,gi)|0)+Math.imul(Mb,gk)|0;Ed=Ed+Math.imul(Mb,gi)|0;Dd=Dd+Math.imul(Ic,zj)|0;K=(K=K+Math.imul(Ic,Bi)|0)+Math.imul(ac,zj)|0;Ed=Ed+Math.imul(ac,Bi)|0;Dd=Dd+Math.imul(Ub,pi)|0;K=(K=K+Math.imul(Ub,Kj)|0)+Math.imul(hc,pi)|0;Ed=Ed+Math.imul(hc,Kj)|0;ob=(Z+(Dd+Math.imul(Fb,na)|0)|0)+((8191&(K=(K=K+Math.imul(Fb,xk)|0)+Math.imul(Ka,na)|0))<<13)|0;Z=((Ed+Math.imul(Ka,xk)|0)+(K>>>13)|0)+(ob>>>
26)|0;ob&=67108863;Dd=Math.imul(U,fh);K=(K=Math.imul(U,Tj))+Math.imul(wb,fh)|0;Ed=Math.imul(wb,Tj);Dd=Dd+Math.imul(Ea,Wi)|0;K=(K=K+Math.imul(Ea,yj)|0)+Math.imul(Ba,Wi)|0;Ed=Ed+Math.imul(Ba,yj)|0;Dd=Dd+Math.imul(ja,gk)|0;K=(K=K+Math.imul(ja,gi)|0)+Math.imul(Bd,gk)|0;Ed=Ed+Math.imul(Bd,gi)|0;Dd=Dd+Math.imul(ed,zj)|0;K=(K=K+Math.imul(ed,Bi)|0)+Math.imul(Mb,zj)|0;Ed=Ed+Math.imul(Mb,Bi)|0;Dd=Dd+Math.imul(Ic,pi)|0;K=(K=K+Math.imul(Ic,Kj)|0)+Math.imul(ac,pi)|0;Ed=Ed+Math.imul(ac,Kj)|0;wa=(Z+(Dd+Math.imul(Ub,
na)|0)|0)+((8191&(K=(K=K+Math.imul(Ub,xk)|0)+Math.imul(hc,na)|0))<<13)|0;Z=((Ed+Math.imul(hc,xk)|0)+(K>>>13)|0)+(wa>>>26)|0;wa&=67108863;Dd=Math.imul(U,Wi);K=(K=Math.imul(U,yj))+Math.imul(wb,Wi)|0;Ed=Math.imul(wb,yj);Dd=Dd+Math.imul(Ea,gk)|0;K=(K=K+Math.imul(Ea,gi)|0)+Math.imul(Ba,gk)|0;Ed=Ed+Math.imul(Ba,gi)|0;Dd=Dd+Math.imul(ja,zj)|0;K=(K=K+Math.imul(ja,Bi)|0)+Math.imul(Bd,zj)|0;Ed=Ed+Math.imul(Bd,Bi)|0;Dd=Dd+Math.imul(ed,pi)|0;K=(K=K+Math.imul(ed,Kj)|0)+Math.imul(Mb,pi)|0;Ed=Ed+Math.imul(Mb,Kj)|
0;ka=(Z+(Dd+Math.imul(Ic,na)|0)|0)+((8191&(K=(K=K+Math.imul(Ic,xk)|0)+Math.imul(ac,na)|0))<<13)|0;Z=((Ed+Math.imul(ac,xk)|0)+(K>>>13)|0)+(ka>>>26)|0;ka&=67108863;Dd=Math.imul(U,gk);K=(K=Math.imul(U,gi))+Math.imul(wb,gk)|0;Ed=Math.imul(wb,gi);Dd=Dd+Math.imul(Ea,zj)|0;K=(K=K+Math.imul(Ea,Bi)|0)+Math.imul(Ba,zj)|0;Ed=Ed+Math.imul(Ba,Bi)|0;Dd=Dd+Math.imul(ja,pi)|0;K=(K=K+Math.imul(ja,Kj)|0)+Math.imul(Bd,pi)|0;Ed=Ed+Math.imul(Bd,Kj)|0;Fb=(Z+(Dd+Math.imul(ed,na)|0)|0)+((8191&(K=(K=K+Math.imul(ed,xk)|0)+
Math.imul(Mb,na)|0))<<13)|0;Z=((Ed+Math.imul(Mb,xk)|0)+(K>>>13)|0)+(Fb>>>26)|0;Fb&=67108863;Dd=Math.imul(U,zj);K=(K=Math.imul(U,Bi))+Math.imul(wb,zj)|0;Ed=Math.imul(wb,Bi);Dd=Dd+Math.imul(Ea,pi)|0;K=(K=K+Math.imul(Ea,Kj)|0)+Math.imul(Ba,pi)|0;Ed=Ed+Math.imul(Ba,Kj)|0;Ka=(Z+(Dd+Math.imul(ja,na)|0)|0)+((8191&(K=(K=K+Math.imul(ja,xk)|0)+Math.imul(Bd,na)|0))<<13)|0;Z=((Ed+Math.imul(Bd,xk)|0)+(K>>>13)|0)+(Ka>>>26)|0;Ka&=67108863;Dd=Math.imul(U,pi);K=(K=Math.imul(U,Kj))+Math.imul(wb,pi)|0;Ed=Math.imul(wb,
Kj);Ub=(Z+(Dd+Math.imul(Ea,na)|0)|0)+((8191&(K=(K=K+Math.imul(Ea,xk)|0)+Math.imul(Ba,na)|0))<<13)|0;Z=((Ed+Math.imul(Ba,xk)|0)+(K>>>13)|0)+(Ub>>>26)|0;Ub&=67108863;hc=(Z+Math.imul(U,na)|0)+((8191&(K=(K=Math.imul(U,xk))+Math.imul(wb,na)|0))<<13)|0;return Z=(Math.imul(wb,xk)+(K>>>13)|0)+(hc>>>26)|0,hc&=67108863,aa[0]=Jz,aa[1]=Hz,aa[2]=Ax,aa[3]=Nv,aa[4]=UB,aa[5]=XB,aa[6]=YB,aa[7]=ZB,aa[8]=$B,aa[9]=jb,aa[10]=xa,aa[11]=pa,aa[12]=ob,aa[13]=wa,aa[14]=ka,aa[15]=Fb,aa[16]=Ka,aa[17]=Ub,aa[18]=hc,0!==Z&&(aa[19]=
Z,R.length++),R};Math.imul||(qa=r);a.prototype.mulTo=function(K,Z){var R=(this||db).length+K.length;if(10===(this||db).length&&10===K.length)K=qa(this||db,K,Z);else if(63>R)K=r(this||db,K,Z);else if(1024>R){R=this||db;Z.negative=K.negative^R.negative;Z.length=R.length+K.length;for(var U=0,na=0,aa=0;aa<Z.length-1;aa++){var xa=na;na=0;U&=67108863;for(var jb=Math.min(aa,K.length-1),ob=Math.max(0,aa-R.length+1);ob<=jb;ob++){var pa=(0|R.words[aa-ob])*(0|K.words[ob]),ka=67108863&pa;U=67108863&(ka=ka+U|
0);na+=(xa=(xa=xa+(pa/67108864|0)|0)+(ka>>>26)|0)>>>26;xa&=67108863}Z.words[aa]=U;U=xa}K=(0!==U?Z.words[aa]=U:Z.length--,Z.strip())}else R=this||db,K=(new v).mulp(R,K,Z);return K};v.prototype.makeRBT=function(K){for(var Z=Array(K),R=a.prototype._countBits(K)-1,U=0;U<K;U++)Z[U]=this.revBin(U,R,K);return Z};v.prototype.revBin=function(K,Z,R){if(0===K||K===R-1)return K;for(var U=R=0;U<Z;U++)R|=(1&K)<<Z-U-1,K>>=1;return R};v.prototype.permute=function(K,Z,R,U,na,aa){for(var xa=0;xa<aa;xa++)U[xa]=Z[K[xa]],
na[xa]=R[K[xa]]};v.prototype.transform=function(K,Z,R,U,na,aa){this.permute(aa,K,Z,R,U,na);for(K=1;K<na;K<<=1){Z=K<<1;aa=Math.cos(2*Math.PI/Z);for(var xa=Math.sin(2*Math.PI/Z),jb=0;jb<na;jb+=Z)for(var ob=aa,pa=xa,ka=0;ka<K;ka++){var wa=R[jb+ka],Ka=U[jb+ka],Fb=R[jb+ka+K],hc=U[jb+ka+K],Ub=ob*Fb-pa*hc;hc=ob*hc+pa*Fb;Fb=Ub;R[jb+ka]=wa+Fb;U[jb+ka]=Ka+hc;R[jb+ka+K]=wa-Fb;U[jb+ka+K]=Ka-hc;ka!==Z&&(Ub=aa*ob-xa*pa,pa=aa*pa+xa*ob,ob=Ub)}}};v.prototype.guessLen13b=function(K,Z){K=1|Math.max(Z,K);Z=1&K;var R=
0;for(K=K/2|0;K;K>>>=1)R++;return 1<<R+1+Z};v.prototype.conjugate=function(K,Z,R){if(!(1>=R))for(var U=0;U<R/2;U++){var na=K[U];K[U]=K[R-U-1];K[R-U-1]=na;na=Z[U];Z[U]=-Z[R-U-1];Z[R-U-1]=-na}};v.prototype.normalize13b=function(K,Z){for(var R=0,U=0;U<Z/2;U++)R=8192*Math.round(K[2*U+1]/Z)+Math.round(K[2*U]/Z)+R,K[U]=67108863&R,R=67108864>R?0:R/67108864|0;return K};v.prototype.convert13b=function(K,Z,R,U){for(var na=0,aa=0;aa<Z;aa++)na+=0|K[aa],R[2*aa]=8191&na,na>>>=13,R[2*aa+1]=8191&na,na>>>=13;for(aa=
2*Z;aa<U;++aa)R[aa]=0;d(0===na);d(0==(-8192&na))};v.prototype.stub=function(K){for(var Z=Array(K),R=0;R<K;R++)Z[R]=0;return Z};v.prototype.mulp=function(K,Z,R){var U=2*this.guessLen13b(K.length,Z.length),na=this.makeRBT(U),aa=this.stub(U),xa=Array(U),jb=Array(U),ob=Array(U),pa=Array(U),ka=Array(U),wa=Array(U),Ka=R.words;Ka.length=U;this.convert13b(K.words,K.length,xa,U);this.convert13b(Z.words,Z.length,pa,U);this.transform(xa,aa,jb,ob,U,na);this.transform(pa,aa,ka,wa,U,na);for(xa=0;xa<U;xa++)pa=jb[xa]*
ka[xa]-ob[xa]*wa[xa],ob[xa]=jb[xa]*wa[xa]+ob[xa]*ka[xa],jb[xa]=pa;return this.conjugate(jb,ob,U),this.transform(jb,ob,Ka,aa,U,na),this.conjugate(Ka,aa,U),this.normalize13b(Ka,U),R.negative=K.negative^Z.negative,R.length=K.length+Z.length,R.strip()};a.prototype.mul=function(K){var Z=new a(null);return Z.words=Array((this||db).length+K.length),this.mulTo(K,Z)};a.prototype.mulf=function(K){var Z=new a(null);Z.words=Array((this||db).length+K.length);var R=this||db;return(new v).mulp(R,K,Z)};a.prototype.imul=
function(K){return this.clone().mulTo(K,this||db)};a.prototype.imuln=function(K){d("number"==typeof K);d(67108864>K);for(var Z=0,R=0;R<(this||db).length;R++){var U=(0|(this||db).words[R])*K,na=(67108863&U)+(67108863&Z);Z>>=26;Z+=U/67108864|0;Z+=na>>>26;(this||db).words[R]=67108863&na}return 0!==Z&&((this||db).words[R]=Z,(this||db).length++),this||db};a.prototype.muln=function(K){return this.clone().imuln(K)};a.prototype.sqr=function(){return this.mul(this||db)};a.prototype.isqr=function(){return this.imul(this.clone())};
a.prototype.pow=function(K){for(var Z=Array(K.bitLength()),R=0;R<Z.length;R++){var U=R%26;Z[R]=(K.words[R/26|0]&1<<U)>>>U}if(0===Z.length)return new a(1);K=this||db;for(R=0;R<Z.length&&0===Z[R];R++,K=K.sqr());if(++R<Z.length)for(U=K.sqr();R<Z.length;R++,U=U.sqr())0!==Z[R]&&(K=K.mul(U));return K};a.prototype.iushln=function(K){d("number"==typeof K&&0<=K);var Z=K%26,R=(K-Z)/26,U=67108863>>>26-Z<<26-Z;if(0!==Z){var na=0;for(K=0;K<(this||db).length;K++){var aa=(this||db).words[K]&U;(this||db).words[K]=
(0|(this||db).words[K])-aa<<Z|na;na=aa>>>26-Z}na&&((this||db).words[K]=na,(this||db).length++)}if(0!==R){for(K=(this||db).length-1;0<=K;K--)(this||db).words[K+R]=(this||db).words[K];for(K=0;K<R;K++)(this||db).words[K]=0;(this||db).length+=R}return this.strip()};a.prototype.ishln=function(K){return d(0===(this||db).negative),this.iushln(K)};a.prototype.iushrn=function(K,Z,R){d("number"==typeof K&&0<=K);Z=Z?(Z-Z%26)/26:0;var U=K%26,na=Math.min((K-U)/26,(this||db).length);K=67108863^67108863>>>U<<U;
if(Z-=na,Z=Math.max(0,Z),R){for(var aa=0;aa<na;aa++)R.words[aa]=(this||db).words[aa];R.length=na}if(0!==na)if((this||db).length>na)for((this||db).length-=na,aa=0;aa<(this||db).length;aa++)(this||db).words[aa]=(this||db).words[aa+na];else(this||db).words[0]=0,(this||db).length=1;na=0;for(aa=(this||db).length-1;0<=aa&&(0!==na||aa>=Z);aa--){var xa=0|(this||db).words[aa];(this||db).words[aa]=na<<26-U|xa>>>U;na=xa&K}return R&&0!==na&&(R.words[R.length++]=na),0===(this||db).length&&((this||db).words[0]=
0,(this||db).length=1),this.strip()};a.prototype.ishrn=function(K,Z,R){return d(0===(this||db).negative),this.iushrn(K,Z,R)};a.prototype.shln=function(K){return this.clone().ishln(K)};a.prototype.ushln=function(K){return this.clone().iushln(K)};a.prototype.shrn=function(K){return this.clone().ishrn(K)};a.prototype.ushrn=function(K){return this.clone().iushrn(K)};a.prototype.testn=function(K){d("number"==typeof K&&0<=K);var Z=K%26;K=(K-Z)/26;return!((this||db).length<=K)&&!!((this||db).words[K]&1<<
Z)};a.prototype.imaskn=function(K){d("number"==typeof K&&0<=K);var Z=K%26;K=(K-Z)/26;if(d(0===(this||db).negative,"imaskn works only with positive numbers"),(this||db).length<=K)return this||db;if(0!==Z&&K++,(this||db).length=Math.min(K,(this||db).length),0!==Z)(this||db).words[(this||db).length-1]&=67108863^67108863>>>Z<<Z;return this.strip()};a.prototype.maskn=function(K){return this.clone().imaskn(K)};a.prototype.iaddn=function(K){return d("number"==typeof K),d(67108864>K),0>K?this.isubn(-K):0!==
(this||db).negative?1===(this||db).length&&(0|(this||db).words[0])<K?((this||db).words[0]=K-(0|(this||db).words[0]),(this||db).negative=0,this||db):((this||db).negative=0,this.isubn(K),(this||db).negative=1,this||db):this._iaddn(K)};a.prototype._iaddn=function(K){(this||db).words[0]+=K;for(K=0;K<(this||db).length&&67108864<=(this||db).words[K];K++)(this||db).words[K]-=67108864,K===(this||db).length-1?(this||db).words[K+1]=1:(this||db).words[K+1]++;return(this||db).length=Math.max((this||db).length,
K+1),this||db};a.prototype.isubn=function(K){if(d("number"==typeof K),d(67108864>K),0>K)return this.iaddn(-K);if(0!==(this||db).negative)return(this||db).negative=0,this.iaddn(K),(this||db).negative=1,this||db;if((this||db).words[0]-=K,1===(this||db).length&&0>(this||db).words[0])(this||db).words[0]=-(this||db).words[0],(this||db).negative=1;else for(K=0;K<(this||db).length&&0>(this||db).words[K];K++)(this||db).words[K]+=67108864,--(this||db).words[K+1];return this.strip()};a.prototype.addn=function(K){return this.clone().iaddn(K)};
a.prototype.subn=function(K){return this.clone().isubn(K)};a.prototype.iabs=function(){return(this||db).negative=0,this||db};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(K,Z,R){var U;this._expand(K.length+R);var na=0;for(U=0;U<K.length;U++){var aa=(0|(this||db).words[U+R])+na;na=(0|K.words[U])*Z;na=((aa-=67108863&na)>>26)-(na/67108864|0);(this||db).words[U+R]=67108863&aa}for(;U<(this||db).length-R;U++)na=(aa=(0|(this||db).words[U+R])+na)>>26,(this||db).words[U+
R]=67108863&aa;if(0===na)return this.strip();d(-1===na);for(U=na=0;U<(this||db).length;U++)na=(aa=-(0|(this||db).words[U])+na)>>26,(this||db).words[U]=67108863&aa;return(this||db).negative=1,this.strip()};a.prototype._wordDiv=function(K,Z){var R=((this||db).length,K.length),U=this.clone(),na=0|K.words[K.length-1];0!==(R=26-this._countBits(na))&&(K=K.ushln(R),U.iushln(R),na=0|K.words[K.length-1]);var aa,xa=U.length-K.length;if("mod"!==Z){(aa=new a(null)).length=xa+1;aa.words=Array(aa.length);for(var jb=
0;jb<aa.length;jb++)aa.words[jb]=0}jb=U.clone()._ishlnsubmul(K,1,xa);0===jb.negative&&(U=jb,aa&&(aa.words[xa]=1));for(--xa;0<=xa;xa--){jb=67108864*(0|U.words[K.length+xa])+(0|U.words[K.length+xa-1]);jb=Math.min(jb/na|0,67108863);for(U._ishlnsubmul(K,jb,xa);0!==U.negative;)jb--,U.negative=0,U._ishlnsubmul(K,1,xa),U.isZero()||(U.negative^=1);aa&&(aa.words[xa]=jb)}return aa&&aa.strip(),U.strip(),"div"!==Z&&0!==R&&U.iushrn(R),{div:aa||null,mod:U}};a.prototype.divmod=function(K,Z,R){return d(!K.isZero()),
this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||db).negative&&0===K.negative?(aa=this.neg().divmod(K,Z),"mod"!==Z&&(U=aa.div.neg()),"div"!==Z&&(na=aa.mod.neg(),R&&0!==na.negative&&na.iadd(K)),{div:U,mod:na}):0===(this||db).negative&&0!==K.negative?(aa=this.divmod(K.neg(),Z),"mod"!==Z&&(U=aa.div.neg()),{div:U,mod:aa.mod}):0!=((this||db).negative&K.negative)?(aa=this.neg().divmod(K.neg(),Z),"div"!==Z&&(na=aa.mod.neg(),R&&0!==na.negative&&na.isub(K)),{div:aa.div,mod:na}):K.length>(this||db).length||
0>this.cmp(K)?{div:new a(0),mod:this||db}:1===K.length?"div"===Z?{div:this.divn(K.words[0]),mod:null}:"mod"===Z?{div:null,mod:new a(this.modn(K.words[0]))}:{div:this.divn(K.words[0]),mod:new a(this.modn(K.words[0]))}:this._wordDiv(K,Z);var U,na,aa};a.prototype.div=function(K){return this.divmod(K,"div",!1).div};a.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod};a.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod};a.prototype.divRound=function(K){var Z=this.divmod(K);if(Z.mod.isZero())return Z.div;
var R=0!==Z.div.negative?Z.mod.isub(K):Z.mod,U=K.ushrn(1);K=K.andln(1);R=R.cmp(U);return 0>R||1===K&&0===R?Z.div:0!==Z.div.negative?Z.div.isubn(1):Z.div.iaddn(1)};a.prototype.modn=function(K){d(67108863>=K);for(var Z=67108864%K,R=0,U=(this||db).length-1;0<=U;U--)R=(Z*R+(0|(this||db).words[U]))%K;return R};a.prototype.idivn=function(K){d(67108863>=K);for(var Z=0,R=(this||db).length-1;0<=R;R--)Z=(0|(this||db).words[R])+67108864*Z,(this||db).words[R]=Z/K|0,Z%=K;return this.strip()};a.prototype.divn=
function(K){return this.clone().idivn(K)};a.prototype.egcd=function(K){d(0===K.negative);d(!K.isZero());var Z=this||db,R=K.clone();Z=0!==Z.negative?Z.umod(K):Z.clone();K=new a(1);for(var U=new a(0),na=new a(0),aa=new a(1),xa=0;Z.isEven()&&R.isEven();)Z.iushrn(1),R.iushrn(1),++xa;for(var jb=R.clone(),ob=Z.clone();!Z.isZero();){for(var pa=0,ka=1;0==(Z.words[0]&ka)&&26>pa;++pa,ka<<=1);if(0<pa)for(Z.iushrn(pa);0<pa--;)(K.isOdd()||U.isOdd())&&(K.iadd(jb),U.isub(ob)),K.iushrn(1),U.iushrn(1);pa=0;for(ka=
1;0==(R.words[0]&ka)&&26>pa;++pa,ka<<=1);if(0<pa)for(R.iushrn(pa);0<pa--;)(na.isOdd()||aa.isOdd())&&(na.iadd(jb),aa.isub(ob)),na.iushrn(1),aa.iushrn(1);0<=Z.cmp(R)?(Z.isub(R),K.isub(na),U.isub(aa)):(R.isub(Z),na.isub(K),aa.isub(U))}return{a:na,b:aa,gcd:R.iushln(xa)}};a.prototype._invmp=function(K){d(0===K.negative);d(!K.isZero());var Z=this||db,R=K.clone();Z=0!==Z.negative?Z.umod(K):Z.clone();for(var U,na=new a(1),aa=new a(0),xa=R.clone();0<Z.cmpn(1)&&0<R.cmpn(1);){for(var jb=0,ob=1;0==(Z.words[0]&
ob)&&26>jb;++jb,ob<<=1);if(0<jb)for(Z.iushrn(jb);0<jb--;)na.isOdd()&&na.iadd(xa),na.iushrn(1);jb=0;for(ob=1;0==(R.words[0]&ob)&&26>jb;++jb,ob<<=1);if(0<jb)for(R.iushrn(jb);0<jb--;)aa.isOdd()&&aa.iadd(xa),aa.iushrn(1);0<=Z.cmp(R)?(Z.isub(R),na.isub(aa)):(R.isub(Z),aa.isub(na))}return 0>(U=0===Z.cmpn(1)?na:aa).cmpn(0)&&U.iadd(K),U};a.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var Z=this.clone();K=K.clone();Z.negative=0;for(var R=K.negative=0;Z.isEven()&&
K.isEven();R++)Z.iushrn(1),K.iushrn(1);for(;;){for(;Z.isEven();)Z.iushrn(1);for(;K.isEven();)K.iushrn(1);var U=Z.cmp(K);if(0>U)U=Z,Z=K,K=U;else if(0===U||0===K.cmpn(1))break;Z.isub(K)}return K.iushln(R)};a.prototype.invm=function(K){return this.egcd(K).a.umod(K)};a.prototype.isEven=function(){return 0==(1&(this||db).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||db).words[0])};a.prototype.andln=function(K){return(this||db).words[0]&K};a.prototype.bincn=function(K){d("number"==typeof K);
var Z=K%26;K=(K-Z)/26;Z=1<<Z;if((this||db).length<=K)return this._expand(K+1),(this||db).words[K]|=Z,this||db;for(;0!==Z&&K<(this||db).length;K++){var R=0|(this||db).words[K];Z=(R+=Z)>>>26;R&=67108863;(this||db).words[K]=R}return 0!==Z&&((this||db).words[K]=Z,(this||db).length++),this||db};a.prototype.isZero=function(){return 1===(this||db).length&&0===(this||db).words[0]};a.prototype.cmpn=function(K){var Z=0>K;if(0!==(this||db).negative&&!Z)return-1;if(0===(this||db).negative&&Z)return 1;(this.strip(),
1<(this||db).length)?K=1:(Z&&(K=-K),d(67108863>=K,"Number is too big"),Z=0|(this||db).words[0],K=Z===K?0:Z<K?-1:1);return 0!==(this||db).negative?0|-K:K};a.prototype.cmp=function(K){if(0!==(this||db).negative&&0===K.negative)return-1;if(0===(this||db).negative&&0!==K.negative)return 1;K=this.ucmp(K);return 0!==(this||db).negative?0|-K:K};a.prototype.ucmp=function(K){if((this||db).length>K.length)return 1;if((this||db).length<K.length)return-1;for(var Z=0,R=(this||db).length-1;0<=R;R--){var U=0|(this||
db).words[R],na=0|K.words[R];if(U!==na){U<na?Z=-1:U>na&&(Z=1);break}}return Z};a.prototype.gtn=function(K){return 1===this.cmpn(K)};a.prototype.gt=function(K){return 1===this.cmp(K)};a.prototype.gten=function(K){return 0<=this.cmpn(K)};a.prototype.gte=function(K){return 0<=this.cmp(K)};a.prototype.ltn=function(K){return-1===this.cmpn(K)};a.prototype.lt=function(K){return-1===this.cmp(K)};a.prototype.lten=function(K){return 0>=this.cmpn(K)};a.prototype.lte=function(K){return 0>=this.cmp(K)};a.prototype.eqn=
function(K){return 0===this.cmpn(K)};a.prototype.eq=function(K){return 0===this.cmp(K)};a.red=function(K){return new J(K)};a.prototype.toRed=function(K){return d(!(this||db).red,"Already a number in reduction context"),d(0===(this||db).negative,"red works only with positives"),K.convertTo(this||db)._forceRed(K)};a.prototype.fromRed=function(){return d((this||db).red,"fromRed works only with numbers in reduction context"),(this||db).red.convertFrom(this||db)};a.prototype._forceRed=function(K){return(this||
db).red=K,this||db};a.prototype.forceRed=function(K){return d(!(this||db).red,"Already a number in reduction context"),this._forceRed(K)};a.prototype.redAdd=function(K){return d((this||db).red,"redAdd works only with red numbers"),(this||db).red.add(this||db,K)};a.prototype.redIAdd=function(K){return d((this||db).red,"redIAdd works only with red numbers"),(this||db).red.iadd(this||db,K)};a.prototype.redSub=function(K){return d((this||db).red,"redSub works only with red numbers"),(this||db).red.sub(this||
db,K)};a.prototype.redISub=function(K){return d((this||db).red,"redISub works only with red numbers"),(this||db).red.isub(this||db,K)};a.prototype.redShl=function(K){return d((this||db).red,"redShl works only with red numbers"),(this||db).red.shl(this||db,K)};a.prototype.redMul=function(K){return d((this||db).red,"redMul works only with red numbers"),(this||db).red._verify2(this||db,K),(this||db).red.mul(this||db,K)};a.prototype.redIMul=function(K){return d((this||db).red,"redMul works only with red numbers"),
(this||db).red._verify2(this||db,K),(this||db).red.imul(this||db,K)};a.prototype.redSqr=function(){return d((this||db).red,"redSqr works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.sqr(this||db)};a.prototype.redISqr=function(){return d((this||db).red,"redISqr works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.isqr(this||db)};a.prototype.redSqrt=function(){return d((this||db).red,"redSqrt works only with red numbers"),(this||db).red._verify1(this||
db),(this||db).red.sqrt(this||db)};a.prototype.redInvm=function(){return d((this||db).red,"redInvm works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.invm(this||db)};a.prototype.redNeg=function(){return d((this||db).red,"redNeg works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.neg(this||db)};a.prototype.redPow=function(K){return d((this||db).red&&!K.red,"redPow(normalNum)"),(this||db).red._verify1(this||db),(this||db).red.pow(this||db,K)};var Fa=
{k256:null,p224:null,p192:null,p25519:null};y.prototype._tmp=function(){var K=new a(null);return K.words=Array(Math.ceil((this||db).n/13)),K};y.prototype.ireduce=function(K){do{this.split(K,(this||db).tmp);var Z=(K=(K=this.imulK(K)).iadd((this||db).tmp)).bitLength()}while(Z>(this||db).n);Z=Z<(this||db).n?-1:K.ucmp((this||db).p);return 0===Z?(K.words[0]=0,K.length=1):0<Z?K.isub((this||db).p):K.strip(),K};y.prototype.split=function(K,Z){K.iushrn((this||db).n,0,Z)};y.prototype.imulK=function(K){return K.imul((this||
db).k)};k(A,y);A.prototype.split=function(K,Z){for(var R=Math.min(K.length,9),U=0;U<R;U++)Z.words[U]=K.words[U];if(Z.length=R,9>=K.length)return K.words[0]=0,K.length=1,void 0;R=K.words[9];Z.words[Z.length++]=4194303&R;for(U=10;U<K.length;U++)Z=0|K.words[U],K.words[U-10]=(4194303&Z)<<4|R>>>22,R=Z;R>>>=22;K.words[U-10]=R;0===R&&10<K.length?K.length-=10:K.length-=9};A.prototype.imulK=function(K){K.words[K.length]=0;K.words[K.length+1]=0;K.length+=2;for(var Z=0,R=0;R<K.length;R++){var U=0|K.words[R];
Z+=977*U;K.words[R]=67108863&Z;Z=64*U+(Z/67108864|0)}return 0===K.words[K.length-1]&&(K.length--,0===K.words[K.length-1]&&K.length--),K};k(E,y);k(F,y);k(H,y);H.prototype.imulK=function(K){for(var Z=0,R=0;R<K.length;R++){Z=19*(0|K.words[R])+Z;var U=67108863&Z;Z>>>=26;K.words[R]=U}return 0!==Z&&(K.words[K.length++]=Z),K};a._prime=function(K){if(Fa[K])return Fa[K];if("k256"===K)var Z=new A;else if("p224"===K)Z=new E;else if("p192"===K)Z=new F;else{if("p25519"!==K)throw Error("Unknown prime "+K);Z=new H}return Fa[K]=
Z,Z};J.prototype._verify1=function(K){d(0===K.negative,"red works only with positives");d(K.red,"red works only with red numbers")};J.prototype._verify2=function(K,Z){d(0==(K.negative|Z.negative),"red works only with positives");d(K.red&&K.red===Z.red,"red works only with red numbers")};J.prototype.imod=function(K){return(this||db).prime?(this||db).prime.ireduce(K)._forceRed(this||db):K.umod((this||db).m)._forceRed(this||db)};J.prototype.neg=function(K){return K.isZero()?K.clone():(this||db).m.sub(K)._forceRed(this||
db)};J.prototype.add=function(K,Z){this._verify2(K,Z);K=K.add(Z);return 0<=K.cmp((this||db).m)&&K.isub((this||db).m),K._forceRed(this||db)};J.prototype.iadd=function(K,Z){this._verify2(K,Z);K=K.iadd(Z);return 0<=K.cmp((this||db).m)&&K.isub((this||db).m),K};J.prototype.sub=function(K,Z){this._verify2(K,Z);K=K.sub(Z);return 0>K.cmpn(0)&&K.iadd((this||db).m),K._forceRed(this||db)};J.prototype.isub=function(K,Z){this._verify2(K,Z);K=K.isub(Z);return 0>K.cmpn(0)&&K.iadd((this||db).m),K};J.prototype.shl=
function(K,Z){return this._verify1(K),this.imod(K.ushln(Z))};J.prototype.imul=function(K,Z){return this._verify2(K,Z),this.imod(K.imul(Z))};J.prototype.mul=function(K,Z){return this._verify2(K,Z),this.imod(K.mul(Z))};J.prototype.isqr=function(K){return this.imul(K,K.clone())};J.prototype.sqr=function(K){return this.mul(K,K)};J.prototype.sqrt=function(K){if(K.isZero())return K.clone();var Z=(this||db).m.andln(3);if(d(1==Z%2),3===Z)return Z=(this||db).m.add(new a(1)).iushrn(2),this.pow(K,Z);for(var R=
(this||db).m.subn(1),U=0;!R.isZero()&&0===R.andln(1);)U++,R.iushrn(1);d(!R.isZero());Z=(new a(1)).toRed(this||db);var na=Z.redNeg(),aa=(this||db).m.subn(1).iushrn(1),xa=(this||db).m.bitLength();for(xa=(new a(2*xa*xa)).toRed(this||db);0!==this.pow(xa,aa).cmp(na);)xa.redIAdd(na);aa=this.pow(xa,R);na=this.pow(K,R.addn(1).iushrn(1));K=this.pow(K,R);for(R=U;0!==K.cmp(Z);){xa=K;for(U=0;0!==xa.cmp(Z);U++)xa=xa.redSqr();d(U<R);aa=this.pow(aa,(new a(1)).iushln(R-U-1));na=na.redMul(aa);aa=aa.redSqr();K=K.redMul(aa);
R=U}return na};J.prototype.invm=function(K){K=K._invmp((this||db).m);return 0!==K.negative?(K.negative=0,this.imod(K).redNeg()):this.imod(K)};J.prototype.pow=function(K,Z){if(Z.isZero())return(new a(1)).toRed(this||db);if(0===Z.cmpn(1))return K.clone();var R=Array(16);R[0]=(new a(1)).toRed(this||db);R[1]=K;for(var U=2;U<R.length;U++)R[U]=this.mul(R[U-1],K);K=R[0];var na=0,aa=0,xa=Z.bitLength()%26;0===xa&&(xa=26);for(U=Z.length-1;0<=U;U--){var jb=Z.words[U];for(--xa;0<=xa;xa--){var ob=jb>>xa&1;K!==
R[0]&&(K=this.sqr(K));0!==ob||0!==na?(na<<=1,na|=ob,(4===++aa||0===U&&0===xa)&&(K=this.mul(K,R[na]),aa=0,na=0)):aa=0}xa=26}return K};J.prototype.convertTo=function(K){var Z=K.umod((this||db).m);return Z===K?Z.clone():Z};J.prototype.convertFrom=function(K){K=K.clone();return K.red=null,K};a.mont=function(K){return new O(K)};k(O,J);O.prototype.convertTo=function(K){return this.imod(K.ushln((this||db).shift))};O.prototype.convertFrom=function(K){K=this.imod(K.mul((this||db).rinv));return K.red=null,
K};O.prototype.imul=function(K,Z){if(K.isZero()||Z.isZero())return K.words[0]=0,K.length=1,K;K=K.imul(Z);Z=K.maskn((this||db).shift).mul((this||db).minv).imaskn((this||db).shift).mul((this||db).m);Z=K=K.isub(Z).iushrn((this||db).shift);return 0<=K.cmp((this||db).m)?Z=K.isub((this||db).m):0>K.cmpn(0)&&(Z=K.iadd((this||db).m)),Z._forceRed(this||db)};O.prototype.mul=function(K,Z){if(K.isZero()||Z.isZero())return(new a(0))._forceRed(this||db);K=K.mul(Z);Z=K.maskn((this||db).shift).mul((this||db).minv).imaskn((this||
db).shift).mul((this||db).m);Z=K=K.isub(Z).iushrn((this||db).shift);return 0<=K.cmp((this||db).m)?Z=K.isub((this||db).m):0>K.cmpn(0)&&(Z=K.iadd((this||db).m)),Z._forceRed(this||db)};O.prototype.invm=function(K){return this.imod(K._invmp((this||db).m).mul((this||db).r2))._forceRed(this||db)}}(maa,laa);var zm=maa.exports,QO,zX,naa=Object.freeze({}),ZL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((QO=function(n){return zX||(zX=new hz(null)),zX.generate(n)}).Rand=
hz,hz.prototype.generate=function(n){return this._rand(n)},hz.prototype._rand=function(n){if((this||ZL).rand.getBytes)return(this||ZL).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||ZL).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?hz.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?hz.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),
n}:"object"==typeof window&&(hz.prototype._rand=function(){throw Error("Not implemented yet");});else try{if("function"!=typeof naa.randomBytes)throw Error("Not supported");hz.prototype._rand=function(n){return naa.randomBytes(n)}}catch(n){}var p4="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,jC=zm,Wia=QO;iz.create=function(n){return new iz(n)};iz.prototype._randbelow=function(n){var b=n.bitLength();b=Math.ceil(b/8);do var d=new jC((this||p4).rand.generate(b));while(0<=
d.cmp(n));return d};iz.prototype._randrange=function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};iz.prototype.test=function(n,b,d){var k=n.bitLength(),a=jC.mont(n),f=(new jC(1)).toRed(a);b||(b=Math.max(1,k/48|0));k=n.subn(1);for(var l=0;!k.testn(l);l++);n=n.shrn(l);for(var r=k.toRed(a);0<b;b--){var v=this._randrange(new jC(2),k);d&&d(v);v=v.toRed(a).redPow(n);if(0!==v.cmp(f)&&0!==v.cmp(r)){for(var y=1;y<l;y++){if(0===(v=v.redSqr()).cmp(f))return!1;if(0===v.cmp(r))break}if(y===l)return!1}}return!0};
iz.prototype.getDivisor=function(n,b){var d=n.bitLength(),k=jC.mont(n),a=(new jC(1)).toRed(k);b||(b=Math.max(1,d/48|0));d=n.subn(1);for(var f=0;!d.testn(f);f++);for(var l=n.shrn(f),r=d.toRed(k);0<b;b--){var v=this._randrange(new jC(2),d),y=n.gcd(v);if(0!==y.cmpn(1))return y;v=v.toRed(k).redPow(l);if(0!==v.cmp(a)&&0!==v.cmp(r)){for(y=1;y<f;y++){if(0===(v=v.redSqr()).cmp(a))return v.fromRed().subn(1).gcd(n);if(0===v.cmp(r))break}if(y===f)return v.redSqr().fromRed().subn(1).gcd(n)}}return!1};var Xia=
Mz;cH.simpleSieve=pT;cH.fermatTest=rT;var Ko=zm,bja=new Ko(24),r4=new iz,Yia=new Ko(1),sT=new Ko(2),Zia=new Ko(5),$ia=(new Ko(16),new Ko(8),new Ko(10)),aja=new Ko(3),cja=(new Ko(7),new Ko(11)),q4=new Ko(4),qT=(new Ko(12),null),oj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,rv=ei.Buffer,fs=zm,oaa=new iz,Hra=new fs(24),Ira=new fs(11),Jra=new fs(10),Kra=new fs(3),Lra=new fs(7),RO={};Object.defineProperty(xt.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=
typeof(this||oj)._primeCode){var n=(this||oj).__prime;var b=(this||oj).__gen.toString("hex"),d=[b,n.toString(16)].join("_");if(d in RO)n=RO[d];else{var k,a=0;if(!n.isEven()&&cH.simpleSieve&&cH.fermatTest(n)&&oaa.test(n)){switch(oaa.test(n.shrn(1))||(a+=2),b){case "02":n.mod(Hra).cmp(Ira)&&(a+=8);break;case "05":(k=n.mod(Jra)).cmp(Kra)&&k.cmp(Lra)&&(a+=8);break;default:a+=4}n=(RO[d]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,RO[d]=a,a)}(this||oj)._primeCode=n}return(this||oj)._primeCode}});xt.prototype.generateKeys=
function(){return(this||oj)._priv||((this||oj)._priv=new fs(Mz((this||oj)._primeLen))),(this||oj)._pub=(this||oj)._gen.toRed((this||oj)._prime).redPow((this||oj)._priv).fromRed(),this.getPublicKey()};xt.prototype.computeSecret=function(n){n=(new fs(n)).toRed((this||oj)._prime).redPow((this||oj)._priv).fromRed();n=new rv(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new rv(b.length-n.length),b.fill(0),n=rv.concat([b,n]));return n};xt.prototype.getPublicKey=function(n){return $L((this||oj)._pub,
n)};xt.prototype.getPrivateKey=function(n){return $L((this||oj)._priv,n)};xt.prototype.getPrime=function(n){return $L((this||oj).__prime,n)};xt.prototype.getGenerator=function(n){return $L((this||oj)._gen,n)};xt.prototype.setGenerator=function(n,b){return b=b||"utf8",rv.isBuffer(n)||(n=new rv(n,b)),(this||oj).__gen=n,(this||oj)._gen=new fs(n),this||oj};var paa,qaa,raa,Pz=ei.Buffer,saa={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
Mra={binary:!0,hex:!0,base64:!0};var Nra=paa=qaa=function(n){var b=new Pz(saa[n].prime,"hex");n=new Pz(saa[n].gen,"hex");return new xt(b,n)};var Ora=raa=function f(b,d,k,a){return Pz.isBuffer(d)||void 0===Mra[d]?f(b,"binary",d,k):(d=d||"binary",a=a||"binary",k=k||new Pz([2]),Pz.isBuffer(k)||(k=new Pz(k,a)),"number"==typeof b?new xt(cH(b,k),k,!0):(Pz.isBuffer(b)||(b=new Pz(b,d)),new xt(b,k,!0)))};var fja=ei.Buffer,jz=zm,t4=Mz;aM.getr=s4;var Qz={toArray:function(b,d){if(Array.isArray(b))return b.slice();
if(!b)return[];var k=[];if("string"!=typeof b){for(d=0;d<b.length;d++)k[d]=0|b[d];return k}if("hex"===d)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),d=0;d<b.length;d+=2)k.push(parseInt(b[d]+b[d+1],16));else for(d=0;d<b.length;d++){var a=b.charCodeAt(d),f=a>>8;a&=255;f?k.push(f,a):k.push(a)}return k}};Qz.zero2=u4;Qz.toHex=v4;Qz.encode=function(b,d){return"hex"===d?v4(b):b};var Di={},Pra=zm;Di.assert=ls;Di.toArray=Qz.toArray;Di.zero2=Qz.zero2;Di.toHex=Qz.toHex;Di.encode=Qz.encode;Di.getNAF=
function(b,d,k){k=Array(Math.max(b.bitLength(),k)+1);k.fill(0);d=1<<d+1;b=b.clone();for(var a=0;a<k.length;a++){var f,l=b.andln(d-1);b.isOdd()?(f=l>(d>>1)-1?(d>>1)-l:l,b.isubn(f)):f=0;k[a]=f;b.iushrn(1)}return k};Di.getJSF=function(b,d){var k=[[],[]];b=b.clone();d=d.clone();for(var a=0,f=0;0<b.cmpn(-a)||0<d.cmpn(-f);){var l;var r=b.andln(3)+a&3;var v=d.andln(3)+f&3;var y=(3===r&&(r=-1),3===v&&(v=-1),0==(1&r))?0:3!==(l=b.andln(7)+a&7)&&5!==l||2!==v?r:-r;r=(k[0].push(y),0==(1&v))?0:3!==(l=d.andln(7)+
f&7)&&5!==l||2!==r?v:-v;k[1].push(r);2*a===y+1&&(a=1-a);2*f===r+1&&(f=1-f);b.iushrn(1);d.iushrn(1)}return k};Di.cachedProperty=function(b,d,k){var a="_"+d;b.prototype[d]=function(){return void 0!==this[a]?this[a]:this[a]=k.call(this)}};Di.parseBytes=function(b){return"string"==typeof b?Di.toArray(b,"hex"):b};Di.intFromLE=function(b){return new Pra(b,"hex","le")};var bM=zm,gja=Di.assert;tB.prototype._importDER=function(b,d){b=Di.toArray(b,d);var k=new hja;if(48!==b[k.place++]||tT(b,k)+k.place!==b.length||
2!==b[k.place++])return!1;var a=tT(b,k);d=b.slice(k.place,a+k.place);if(k.place+=a,2!==b[k.place++])return!1;a=tT(b,k);if(b.length!==a+k.place)return!1;b=b.slice(k.place,a+k.place);return 0===d[0]&&128&d[1]&&(d=d.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new bM(d),this.s=new bM(b),this.recoveryParam=null,!0};tB.prototype.toDER=function(b){var d=this.r.toArray(),k=this.s.toArray();128&d[0]&&(d=[0].concat(d));128&k[0]&&(k=[0].concat(k));d=w4(d);for(k=w4(k);!(k[0]||128&k[1]);)k=k.slice(1);
var a=[2];uT(a,d.length);(a=a.concat(d)).push(2);uT(a,k.length);d=a.concat(k);k=[48];return uT(k,d.length),k=k.concat(d),Di.encode(k,b)};var Xf={},Qra=ls;Xf.inherits=oi;Xf.toArray=function(b,d){if(Array.isArray(b))return b.slice();if(!b)return[];var k=[];if("string"==typeof b)if(d){if("hex"===d)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)k.push(parseInt(b[a]+b[a+1],16))}else for(var a=d=0;a<b.length;a++){var f=b.charCodeAt(a);if(128>f)k[d++]=f;else if(2048>f)k[d++]=
f>>6|192,k[d++]=63&f|128;else{var l=b,r=a;55296!=(64512&l.charCodeAt(r))||0>r||r+1>=l.length||56320!=(64512&l.charCodeAt(r+1))?(k[d++]=f>>12|224,k[d++]=f>>6&63|128,k[d++]=63&f|128):(f=65536+((1023&f)<<10)+(1023&b.charCodeAt(++a)),k[d++]=f>>18|240,k[d++]=f>>12&63|128,k[d++]=f>>6&63|128,k[d++]=63&f|128)}}else for(a=0;a<b.length;a++)k[a]=0|b[a];return k};Xf.toHex=function(b){for(var d="",k=0;k<b.length;k++)d+=y4(b[k].toString(16));return d};Xf.htonl=x4;Xf.toHex32=function(b,d){for(var k="",a=0;a<b.length;a++){var f=
b[a];"little"===d&&(f=x4(f));k+=z4(f.toString(16))}return k};Xf.zero2=y4;Xf.zero8=z4;Xf.join32=function(b,d,k,a){k-=d;Qra(0==k%4);k=Array(k/4);for(var f=0;f<k.length;f++,d+=4)k[f]=("big"===a?b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3]:b[d+3]<<24|b[d+2]<<16|b[d+1]<<8|b[d])>>>0;return k};Xf.split32=function(b,d){for(var k=Array(4*b.length),a=0,f=0;a<b.length;a++,f+=4){var l=b[a];"big"===d?(k[f]=l>>>24,k[f+1]=l>>>16&255,k[f+2]=l>>>8&255,k[f+3]=255&l):(k[f+3]=l>>>24,k[f+2]=l>>>16&255,k[f+1]=l>>>8&255,k[f]=255&
l)}return k};Xf.rotr32=function(b,d){return b>>>d|b<<32-d};Xf.rotl32=function(b,d){return b<<d|b>>>32-d};Xf.sum32=function(b,d){return b+d>>>0};Xf.sum32_3=function(b,d,k){return b+d+k>>>0};Xf.sum32_4=function(b,d,k,a){return b+d+k+a>>>0};Xf.sum32_5=function(b,d,k,a,f){return b+d+k+a+f>>>0};Xf.sum64=function(b,d,k,a){var f=a+b[d+1]>>>0;b[d]=(f<a?1:0)+k+b[d]>>>0;b[d+1]=f};Xf.sum64_hi=function(b,d,k,a){return(d+a>>>0<d?1:0)+b+k>>>0};Xf.sum64_lo=function(b,d,k,a){return d+a>>>0};Xf.sum64_4_hi=function(b,
d,k,a,f,l,r,v){var y=0,A=d;return y+=(A=A+a>>>0)<d?1:0,y+=(A=A+l>>>0)<l?1:0,b+k+f+r+(y+(A+v>>>0<v?1:0))>>>0};Xf.sum64_4_lo=function(b,d,k,a,f,l,r,v){return d+a+l+v>>>0};Xf.sum64_5_hi=function(b,d,k,a,f,l,r,v,y,A){var E=0,F=d;return E+=(F=F+a>>>0)<d?1:0,E+=(F=F+l>>>0)<l?1:0,E+=(F=F+v>>>0)<v?1:0,b+k+f+r+y+(E+(F+A>>>0<A?1:0))>>>0};Xf.sum64_5_lo=function(b,d,k,a,f,l,r,v,y,A){return d+a+l+v+A>>>0};Xf.rotr64_hi=function(b,d,k){return(d<<32-k|b>>>k)>>>0};Xf.rotr64_lo=function(b,d,k){return(b<<32-k|d>>>k)>>>
0};Xf.shr64_hi=function(b,d,k){return b>>>k};Xf.shr64_lo=function(b,d,k){return(b<<32-k|d>>>k)>>>0};var bF={},Rra=ls;bF.BlockHash=cM;cM.prototype.update=function(b,d){if(b=Xf.toArray(b,d),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(d=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-d,b.length),0===this.pending.length&&(this.pending=null),b=Xf.join32(b,0,b.length-d,this.endian),d=0;d<b.length;d+=
this._delta32)this._update(b,d,d+this._delta32);return this};cM.prototype.digest=function(b){return this.update(this._pad()),Rra(null===this.pending),this._digest(b)};cM.prototype._pad=function(){var b=this.pendingTotal,d=this._delta8,k=d-(b+this.padLength)%d;d=Array(k+this.padLength);d[0]=128;for(var a=1;a<k;a++)d[a]=0;if(b<<=3,"big"===this.endian){for(k=8;k<this.padLength;k++)d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=b>>>24&255;d[a++]=b>>>16&255;d[a++]=b>>>8&255;d[a++]=255&b}else for(d[a++]=
255&b,d[a++]=b>>>8&255,d[a++]=b>>>16&255,d[a++]=b>>>24&255,d[a++]=0,d[a++]=0,d[a++]=0,d[a++]=0,k=8;k<this.padLength;k++)d[a++]=0;return d};var Sra=ls,Uv=Xf.rotr64_hi,Vv=Xf.rotr64_lo,taa=Xf.shr64_hi,uaa=Xf.shr64_lo,Rz=Xf.sum64,AX=Xf.sum64_hi,BX=Xf.sum64_lo,Tra=Xf.sum64_4_hi,Ura=Xf.sum64_4_lo,Vra=Xf.sum64_5_hi,Wra=Xf.sum64_5_lo,A4=bF.BlockHash,ija=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,
2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,
3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,
1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,
4234509866,1607167915,987167468,1816402316,1246189591];Xf.inherits(gs,A4);gs.blockSize=1024;gs.outSize=512;gs.hmacStrength=192;gs.padLength=128;gs.prototype._prepareBlock=function(b,d){for(var k=this.W,a=0;32>a;a++)k[a]=b[d+a];for(;a<k.length;a+=2){b=k[a-4];d=k[a-3];d=Uv(b,d,19)^Uv(d,b,29)^taa(b,d,6);b=(0>d&&(d+=4294967296),d);d=k[a-4];var f=k[a-3];f=Vv(d,f,19)^Vv(f,d,29)^uaa(d,f,6);d=(0>f&&(f+=4294967296),f);f=k[a-14];var l=k[a-13];var r=k[a-30];var v=k[a-29];v=Uv(r,v,1)^Uv(r,v,8)^taa(r,v,7);r=(0>
v&&(v+=4294967296),v);v=k[a-30];var y=k[a-29];y=Vv(v,y,1)^Vv(v,y,8)^uaa(v,y,7);v=(0>y&&(y+=4294967296),y);y=k[a-32];var A=k[a-31];k[a]=Tra(b,d,f,l,r,v,y,A);k[a+1]=Ura(b,d,f,l,r,v,y,A)}};gs.prototype._update=function(b,d){this._prepareBlock(b,d);b=this.W;d=this.h[0];var k=this.h[1],a=this.h[2],f=this.h[3],l=this.h[4],r=this.h[5],v=this.h[6],y=this.h[7],A=this.h[8],E=this.h[9],F=this.h[10],H=this.h[11],J=this.h[12],O=this.h[13],L=this.h[14],Y=this.h[15];Sra(this.k.length===b.length);for(var S=0;S<b.length;S+=
2){var ea=A;var qa=E;ea=Uv(ea,qa,14)^Uv(ea,qa,18)^Uv(qa,ea,9);qa=(0>ea&&(ea+=4294967296),ea);ea=A;var Fa=E;ea=Vv(ea,Fa,14)^Vv(ea,Fa,18)^Vv(Fa,ea,9);var K=(0>ea&&(ea+=4294967296),ea);ea=A&F^~A&J;Fa=(0>ea&&(ea+=4294967296),ea);ea=E&H^~E&O;var Z=(0>ea&&(ea+=4294967296),ea);var R=this.k[S],U=this.k[S+1],na=b[S],aa=b[S+1];ea=Vra(L,Y,qa,K,Fa,Z,R,U,na,aa);Fa=Wra(L,Y,qa,K,Fa,Z,R,U,na,aa);L=d;Y=k;Y=Uv(L,Y,28)^Uv(Y,L,2)^Uv(Y,L,7);L=(0>Y&&(Y+=4294967296),Y);Y=d;qa=k;qa=Vv(Y,qa,28)^Vv(qa,Y,2)^Vv(qa,Y,7);Y=(0>
qa&&(qa+=4294967296),qa);K=d&a^d&l^a&l;qa=(0>K&&(K+=4294967296),K);Z=k&f^k&r^f&r;K=(0>Z&&(Z+=4294967296),Z);Z=AX(L,Y,qa,K);qa=BX(L,Y,qa,K);L=J;Y=O;J=F;O=H;F=A;H=E;A=AX(v,y,ea,Fa);E=BX(y,y,ea,Fa);v=l;y=r;l=a;r=f;a=d;f=k;d=AX(ea,Fa,Z,qa);k=BX(ea,Fa,Z,qa)}Rz(this.h,0,d,k);Rz(this.h,2,a,f);Rz(this.h,4,l,r);Rz(this.h,6,v,y);Rz(this.h,8,A,E);Rz(this.h,10,F,H);Rz(this.h,12,J,O);Rz(this.h,14,L,Y)};gs.prototype._digest=function(b){return"hex"===b?Xf.toHex32(this.h,"big"):Xf.split32(this.h,"big")};var Wv=Xf.rotr32,
Xra=ls,Rt=Xf.sum32,Yra=Xf.sum32_4,Zra=Xf.sum32_5,B4=bF.BlockHash,jja=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,
2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];Xf.inherits(yt,B4);yt.blockSize=512;yt.outSize=256;yt.hmacStrength=192;yt.padLength=64;yt.prototype._update=function(b,d){for(var k=this.W,a=0;16>a;a++)k[a]=b[d+a];for(;a<k.length;a++){b=a;d=k[a-2];d=Wv(d,17)^Wv(d,19)^d>>>10;var f=k[a-7];var l=k[a-15];l=
Wv(l,7)^Wv(l,18)^l>>>3;k[b]=Yra(d,f,l,k[a-16])}b=this.h[0];d=this.h[1];f=this.h[2];l=this.h[3];var r=this.h[4],v=this.h[5],y=this.h[6],A=this.h[7];Xra(this.k.length===k.length);for(a=0;a<k.length;a++){var E=A;A=r;A=Wv(A,6)^Wv(A,11)^Wv(A,25);E=Zra(E,A,r&v^~r&y,this.k[a],k[a]);A=b;A=Wv(A,2)^Wv(A,13)^Wv(A,22);var F=Rt(A,b&d^b&f^d&f);A=y;y=v;v=r;r=Rt(l,E);l=f;f=d;d=b;b=Rt(E,F)}this.h[0]=Rt(this.h[0],b);this.h[1]=Rt(this.h[1],d);this.h[2]=Rt(this.h[2],f);this.h[3]=Rt(this.h[3],l);this.h[4]=Rt(this.h[4],
r);this.h[5]=Rt(this.h[5],v);this.h[6]=Rt(this.h[6],y);this.h[7]=Rt(this.h[7],A)};yt.prototype._digest=function(b){return"hex"===b?Xf.toHex32(this.h,"big"):Xf.split32(this.h,"big")};var CX=Xf.rotl32,AI=Xf.sum32,$ra=Xf.sum32_5,C4=bF.BlockHash,asa=[1518500249,1859775393,2400959708,3395469782];Xf.inherits(sv,C4);sv.blockSize=512;sv.outSize=160;sv.hmacStrength=80;sv.padLength=64;sv.prototype._update=function(b,d){for(var k=this.W,a=0;16>a;a++)k[a]=b[d+a];for(;a<k.length;a++)k[a]=CX(k[a-3]^k[a-8]^k[a-
14]^k[a-16],1);b=this.h[0];d=this.h[1];var f=this.h[2],l=this.h[3],r=this.h[4];for(a=0;a<k.length;a++){var v=~~(a/20);v=$ra(CX(b,5),0===v?d&f^~d&l:1===v||3===v?d^f^l:2===v?d&f^d&l^f&l:void 0,r,k[a],asa[v]);r=l;l=f;f=CX(d,30);d=b;b=v}this.h[0]=AI(this.h[0],b);this.h[1]=AI(this.h[1],d);this.h[2]=AI(this.h[2],f);this.h[3]=AI(this.h[3],l);this.h[4]=AI(this.h[4],r)};sv.prototype._digest=function(b){return"hex"===b?Xf.toHex32(this.h,"big"):Xf.split32(this.h,"big")};var D4=yt;Xf.inherits(hx,D4);hx.blockSize=
512;hx.outSize=224;hx.hmacStrength=192;hx.padLength=64;hx.prototype._digest=function(b){return"hex"===b?Xf.toHex32(this.h.slice(0,7),"big"):Xf.split32(this.h.slice(0,7),"big")};var E4=gs;Xf.inherits(ix,E4);ix.blockSize=1024;ix.outSize=384;ix.hmacStrength=192;ix.padLength=128;ix.prototype._digest=function(b){return"hex"===b?Xf.toHex32(this.h.slice(0,12),"big"):Xf.split32(this.h.slice(0,12),"big")};var cF={};cF.sha1=sv;cF.sha224=hx;cF.sha256=yt;cF.sha384=ix;cF.sha512=gs;var vaa={},SO=Xf.rotl32,waa=
Xf.sum32,BI=Xf.sum32_3,xaa=Xf.sum32_4,F4=bF.BlockHash;Xf.inherits(tv,F4);vaa.ripemd160=tv;tv.blockSize=512;tv.outSize=160;tv.hmacStrength=192;tv.padLength=64;tv.prototype._update=function(b,d){for(var k=this.h[0],a=this.h[1],f=this.h[2],l=this.h[3],r=this.h[4],v=k,y=a,A=f,E=l,F=r,H=0;80>H;H++){var J=waa(SO(xaa(k,G4(H,a,f,l),b[bsa[H]+d],15>=H?0:31>=H?1518500249:47>=H?1859775393:63>=H?2400959708:2840853838),csa[H]),r);k=r;r=l;l=SO(f,10);f=a;a=J;J=waa(SO(xaa(v,G4(79-H,y,A,E),b[dsa[H]+d],15>=H?1352829926:
31>=H?1548603684:47>=H?1836072691:63>=H?2053994217:0),esa[H]),F);v=F;F=E;E=SO(A,10);A=y;y=J}J=BI(this.h[1],f,E);this.h[1]=BI(this.h[2],l,F);this.h[2]=BI(this.h[3],r,v);this.h[3]=BI(this.h[4],k,y);this.h[4]=BI(this.h[0],a,A);this.h[0]=J};tv.prototype._digest=function(b){return"hex"===b?Xf.toHex32(this.h,"little"):Xf.split32(this.h,"little")};var bsa=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,
2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],dsa=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],csa=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],esa=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,
8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],kja=Xf,fsa=ls;dE.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());fsa(b.length<=this.blockSize);for(var d=b.length;d<this.blockSize;d++)b.push(0);for(d=0;d<b.length;d++)b[d]^=54;this.inner=(new this.Hash).update(b);for(d=0;d<b.length;d++)b[d]^=106;this.outer=(new this.Hash).update(b)};dE.prototype.update=function(b,
d){return this.inner.update(b,d),this};dE.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var Sk={};Sk.utils=Xf;Sk.common=bF;Sk.sha=cF;Sk.ripemd=vaa;Sk.hmac=dE;Sk.sha1=Sk.sha.sha1;Sk.sha256=Sk.sha.sha256;Sk.sha224=Sk.sha.sha224;Sk.sha384=Sk.sha.sha384;Sk.sha512=Sk.sha.sha512;Sk.ripemd160=Sk.ripemd.ripemd160;var uB=Qz,H4=ls;jx.prototype._init=function(b,d,k){b=b.concat(d).concat(k);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(d=0;d<this.V.length;d++)this.K[d]=
0,this.V[d]=1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};jx.prototype._hmac=function(){return new Sk.hmac(this.hash,this.K)};jx.prototype._update=function(b){var d=this._hmac().update(this.V).update([0]);b&&(d=d.update(b));this.K=d.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};jx.prototype.reseed=function(b,d,k,a){"string"!=typeof d&&(a=k,k=d,d=null);
b=uB.toArray(b,d);k=uB.toArray(k,a);H4(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(k||[]));this._reseed=1};jx.prototype.generate=function(b,d,k,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof d&&(a=k,k=d,d=null);k&&(k=uB.toArray(k,a||"hex"),this._update(k));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(k),this._reseed++,
uB.encode(b,d)};var vB=zm,TO=Di.getNAF,gsa=Di.getJSF,UO=Di.assert;zt.prototype.point=function(){throw Error("Not implemented");};zt.prototype.validate=function(){throw Error("Not implemented");};zt.prototype._fixedNafMul=function(b,d){UO(b.precomputed);b=b._getDoubles();var k=TO(d,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var f=[],l=0;l<k.length;l+=b.step){var r=0;for(d=l+b.step-1;d>=l;d--)r=(r<<1)+k[d];f.push(r)}d=this.jpoint(null,null,null);for(k=this.jpoint(null,null,null);0<
a;a--){for(l=0;l<f.length;l++)(r=f[l])===a?k=k.mixedAdd(b.points[l]):r===-a&&(k=k.mixedAdd(b.points[l].neg()));d=d.add(k)}return d.toP()};zt.prototype._wnafMul=function(b,d){var k=b._getNAFPoints(4),a=k.points;k=TO(d,k.wnd,this._bitLength);for(var f=this.jpoint(null,null,null),l=k.length-1;0<=l;l--){for(d=0;0<=l&&0===k[l];l--)d++;if(0<=l&&d++,f=f.dblp(d),0>l)break;d=k[l];UO(0!==d);f="affine"===b.type?0<d?f.mixedAdd(a[d-1>>1]):f.mixedAdd(a[-d-1>>1].neg()):0<d?f.add(a[d-1>>1]):f.add(a[-d-1>>1].neg())}return"affine"===
b.type?f.toP():f};zt.prototype._wnafMulAdd=function(b,d,k,a,f){for(var l=this._wnafT1,r=this._wnafT2,v=this._wnafT3,y=0,A=0;A<a;A++){var E=(L=d[A])._getNAFPoints(b);l[A]=E.wnd;r[A]=E.points}for(A=a-1;1<=A;A-=2){E=A-1;var F=A;if(1===l[E]&&1===l[F]){var H=[d[E],null,null,d[F]];0===d[E].y.cmp(d[F].y)?(H[1]=d[E].add(d[F]),H[2]=d[E].toJ().mixedAdd(d[F].neg())):0===d[E].y.cmp(d[F].y.redNeg())?(H[1]=d[E].toJ().mixedAdd(d[F]),H[2]=d[E].add(d[F].neg())):(H[1]=d[E].toJ().mixedAdd(d[F]),H[2]=d[E].toJ().mixedAdd(d[F].neg()));
var J=[-3,-1,-5,-7,0,7,5,1,3],O=gsa(k[E],k[F]);y=Math.max(O[0].length,y);v[E]=Array(y);v[F]=Array(y);for(b=0;b<y;b++)v[E][b]=J[3*((0|O[0][b])+1)+((0|O[1][b])+1)],v[F][b]=0,r[E]=H}else v[E]=TO(k[E],l[E],this._bitLength),v[F]=TO(k[F],l[F],this._bitLength),y=Math.max(v[E].length,y),y=Math.max(v[F].length,y)}d=this.jpoint(null,null,null);k=this._wnafT4;for(A=y;0<=A;A--){for(y=0;0<=A;){l=!0;for(b=0;b<a;b++)k[b]=0|v[b][A],0!==k[b]&&(l=!1);if(!l)break;y++;A--}if(0<=A&&y++,d=d.dblp(y),0>A)break;for(b=0;b<
a;b++){var L;y=k[b];0!==y&&(0<y?L=r[b][y-1>>1]:0>y&&(L=r[b][-y-1>>1].neg()),d="affine"===L.type?d.mixedAdd(L):d.add(L))}}for(A=0;A<a;A++)r[A]=null;return f?d:d.toP()};zt.BasePoint=hs;hs.prototype.eq=function(){throw Error("Not implemented");};hs.prototype.validate=function(){return this.curve.validate(this)};zt.prototype.decodePoint=function(b,d){b=Di.toArray(b,d);d=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*d)return 6===b[0]?UO(0==b[b.length-1]%2):7===b[0]&&UO(1==b[b.length-
1]%2),this.point(b.slice(1,1+d),b.slice(1+d,1+2*d));if((2===b[0]||3===b[0])&&b.length-1===d)return this.pointFromX(b.slice(1,1+d),3===b[0]);throw Error("Unknown point format");};hs.prototype.encodeCompressed=function(b){return this.encode(b,!0)};hs.prototype._encode=function(b){var d=this.curve.p.byteLength(),k=this.getX().toArray("be",d);return b?[this.getY().isEven()?2:3].concat(k):[4].concat(k,this.getY().toArray("be",d))};hs.prototype.encode=function(b,d){return Di.encode(this._encode(d),b)};
hs.prototype.precompute=function(b){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,b),d.beta=this._getBeta(),this.precomputed=d,this};hs.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((b.bitLength()+1)/d.step)};hs.prototype._getDoubles=function(b,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var k=[this],a=this,f=0;f<d;f+=b){for(var l=0;l<b;l++)a=a.dbl();k.push(a)}return{step:b,points:k}};hs.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],k=(1<<b)-1,a=1===k?null:this.dbl(),f=1;f<k;f++)d[f]=d[f-1].add(a);return{wnd:b,points:d}};hs.prototype._getBeta=function(){return null};hs.prototype.dblp=function(b){for(var d=this,k=0;k<b;k++)d=d.dbl();return d};var Rl=zm,DX=oi,eE=zt,hsa=Di.assert;DX(is,eE);is.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var d=(new Rl(b.beta,16)).toRed(this.red);else d=this._getEndoRoots(this.p),d=(d=0>d[0].cmp(d[1])?d[0]:d[1]).toRed(this.red);if(b.lambda)var k=new Rl(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(d))?k=a[0]:(k=a[1],hsa(0===this.g.mul(k).x.cmp(this.g.x.redMul(d))))}return{beta:d,lambda:k,basis:b.basis?b.basis.map(function(f){return{a:new Rl(f.a,16),b:new Rl(f.b,16)}}):this._getEndoBasis(k)}}};
is.prototype._getEndoRoots=function(b){var d=b===this.p?this.red:Rl.mont(b),k=(new Rl(2)).toRed(d).redInvm();b=k.redNeg();d=(new Rl(3)).toRed(d).redNeg().redSqrt().redMul(k);return[b.redAdd(d).fromRed(),b.redSub(d).fromRed()]};is.prototype._getEndoBasis=function(b){for(var d,k,a,f,l,r,v,y=this.n.ushrn(Math.floor(this.n.bitLength()/2)),A=this.n.clone(),E=new Rl(1),F=new Rl(0),H=new Rl(0),J=new Rl(1),O=0;0!==b.cmpn(0);){var L=A.div(b);v=A.sub(L.mul(b));r=H.sub(L.mul(E));L=J.sub(L.mul(F));if(!a&&0>v.cmp(y))d=
l.neg(),k=E,a=v.neg(),f=r;else if(a&&2==++O)break;l=v;A=b;b=v;H=E;E=r;J=F;F=L}l=v.neg();v=a.sqr().add(f.sqr());return 0<=l.sqr().add(r.sqr()).cmp(v)&&(l=d,r=k),a.negative&&(a=a.neg(),f=f.neg()),l.negative&&(l=l.neg(),r=r.neg()),[{a:a,b:f},{a:l,b:r}]};is.prototype._endoSplit=function(b){var d=this.endo.basis,k=d[0],a=d[1],f=a.b.mul(b).divRound(this.n),l=k.b.neg().mul(b).divRound(this.n);d=f.mul(k.a);var r=l.mul(a.a);k=f.mul(k.b);a=l.mul(a.b);return{k1:b.sub(d).sub(r),k2:k.add(a).neg()}};is.prototype.pointFromX=
function(b,d){(b=new Rl(b,16)).red||(b=b.toRed(this.red));var k=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=k.redSqrt();if(0!==a.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=a.fromRed().isOdd();return(d&&!k||!d&&k)&&(a=a.redNeg()),this.point(b,a)};is.prototype.validate=function(b){if(b.inf)return!0;var d=b.x;b=b.y;var k=this.a.redMul(d);d=d.redSqr().redMul(d).redIAdd(k).redIAdd(this.b);return 0===b.redSqr().redISub(d).cmpn(0)};is.prototype._endoWnafMulAdd=
function(b,d,k){for(var a=this._endoWnafT1,f=this._endoWnafT2,l=0;l<b.length;l++){var r=this._endoSplit(d[l]),v=b[l],y=v._getBeta();r.k1.negative&&(r.k1.ineg(),v=v.neg(!0));r.k2.negative&&(r.k2.ineg(),y=y.neg(!0));a[2*l]=v;a[2*l+1]=y;f[2*l]=r.k1;f[2*l+1]=r.k2}b=this._wnafMulAdd(1,a,f,2*l,k);for(d=0;d<2*l;d++)a[d]=null,f[d]=null;return b};DX(Fn,eE.BasePoint);is.prototype.point=function(b,d,k){return new Fn(this,b,d,k)};is.prototype.pointFromJSON=function(b,d){return Fn.fromJSON(this,b,d)};Fn.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var k=this.curve,a=function(f){return k.point(f.x.redMul(k.endo.beta),f.y)};b.beta=d;d.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return d}};Fn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Fn.fromJSON=function(b,d,k){function a(l){return b.point(l[0],l[1],k)}"string"==typeof d&&(d=JSON.parse(d));var f=b.point(d[0],d[1],k);if(!d[2])return f;d=d[2];return f.precomputed={beta:null,doubles:d.doubles&&{step:d.doubles.step,points:[f].concat(d.doubles.points.map(a))},naf:d.naf&&{wnd:d.naf.wnd,
points:[f].concat(d.naf.points.map(a))}},f};Fn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Fn.prototype.isInfinity=function(){return this.inf};Fn.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var d=this.y.redSub(b.y);0!==d.cmpn(0)&&(d=d.redMul(this.x.redSub(b.x).redInvm()));
b=d.redSqr().redISub(this.x).redISub(b.x);d=d.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,d)};Fn.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var d=this.curve.a,k=this.x.redSqr();b=b.redInvm();k=k.redAdd(k).redIAdd(k).redIAdd(d).redMul(b);d=k.redSqr().redISub(this.x.redAdd(this.x));k=k.redMul(this.x.redSub(d)).redISub(this.y);return this.curve.point(d,k)};Fn.prototype.getX=function(){return this.x.fromRed()};
Fn.prototype.getY=function(){return this.y.fromRed()};Fn.prototype.mul=function(b){return b=new Rl(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};Fn.prototype.mulAdd=function(b,d,k){d=[this,d];b=[b,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,b):this.curve._wnafMulAdd(1,d,b,2)};Fn.prototype.jmulAdd=function(b,d,k){d=[this,d];b=[b,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,
b,!0):this.curve._wnafMulAdd(1,d,b,2,!0)};Fn.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};Fn.prototype.neg=function(b){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var k=function(a){return a.neg()};d.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(k)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(k)}}}return d};Fn.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};DX(ko,eE.BasePoint);is.prototype.jpoint=function(b,d,k){return new ko(this,b,d,k)};ko.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),d=b.redSqr(),k=this.x.redMul(d);b=this.y.redMul(d).redMul(b);return this.curve.point(k,b)};ko.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ko.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var d=b.z.redSqr(),k=this.z.redSqr(),a=this.x.redMul(d),f=b.x.redMul(k);d=this.y.redMul(d.redMul(b.z));k=b.y.redMul(k.redMul(this.z));f=a.redSub(f);k=d.redSub(k);if(0===f.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=f.redSqr(),r=l.redMul(f);l=a.redMul(l);a=k.redSqr().redIAdd(r).redISub(l).redISub(l);d=k.redMul(l.redISub(a)).redISub(d.redMul(r));b=this.z.redMul(b.z).redMul(f);return this.curve.jpoint(a,d,b)};ko.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var d=this.z.redSqr(),k=this.x,a=b.x.redMul(d),f=this.y;b=b.y.redMul(d).redMul(this.z);a=k.redSub(a);b=f.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr();d=l.redMul(a);l=k.redMul(l);k=b.redSqr().redIAdd(d).redISub(l).redISub(l);f=b.redMul(l.redISub(k)).redISub(f.redMul(d));a=this.z.redMul(a);return this.curve.jpoint(k,f,a)};ko.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var d=this,k=0;k<b;k++)d=d.dbl();return d}d=this.curve.a;var a=this.curve.tinv,f=this.x;k=this.y;var l=this.z,r=l.redSqr().redSqr(),v=k.redAdd(k);for(k=0;k<b;k++){var y=f.redSqr(),A=v.redSqr(),E=A.redSqr();y=y.redAdd(y).redIAdd(y).redIAdd(d.redMul(r));A=f.redMul(A);f=y.redSqr().redISub(A.redAdd(A));A=A.redISub(f);y=y.redMul(A);y=y.redIAdd(y).redISub(E);l=v.redMul(l);k+1<b&&(r=r.redMul(E));v=y}return this.curve.jpoint(f,v.redMul(a),l)};ko.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ko.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var d=this.y.redSqr();var k=d.redSqr();d=this.x.redAdd(d).redSqr().redISub(b).redISub(k);d=d.redIAdd(d);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(d).redISub(d),f=k.redIAdd(k);f=(f=f.redIAdd(f)).redIAdd(f);k=a;b=b.redMul(d.redISub(a)).redISub(f);d=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();k=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(k);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);f=a.redSqr();var l=k.redIAdd(k);l=(l=l.redIAdd(l)).redIAdd(l);k=f.redISub(b).redISub(b);b=a.redMul(b.redISub(k)).redISub(l);d=(d=this.y.redMul(this.z)).redIAdd(d)}return this.curve.jpoint(k,b,d)};ko.prototype._threeDbl=function(){var b;if(this.zOne){var d=this.x.redSqr();var k=this.y.redSqr();var a=k.redSqr();k=this.x.redAdd(k).redSqr().redISub(d).redISub(a);k=k.redIAdd(k);var f=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a);d=b=f.redSqr().redISub(k).redISub(k);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=f.redMul(k.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),k=this.y.redSqr(),d=this.x.redMul(k),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),f=d.redIAdd(d),d=(f=f.redIAdd(f)).redAdd(f),d=a.redSqr().redISub(d),b=this.y.redAdd(this.z).redSqr().redISub(k).redISub(b),k=k.redSqr(),k=(k=(k=k.redIAdd(k)).redIAdd(k)).redIAdd(k),a=a.redMul(f.redISub(d)).redISub(k);return this.curve.jpoint(d,a,b)};ko.prototype._dbl=
function(){var b=this.curve.a,d=this.x,k=this.y,a=this.z,f=a.redSqr().redSqr(),l=d.redSqr(),r=k.redSqr();b=l.redAdd(l).redIAdd(l).redIAdd(b.redMul(f));d=d.redAdd(d);f=d.redIAdd(d).redMul(r);d=b.redSqr().redISub(f.redAdd(f));f=f.redISub(d);r=r.redSqr();r=(r=(r=r.redIAdd(r)).redIAdd(r)).redIAdd(r);r=b.redMul(f).redISub(r);k=k.redAdd(k).redMul(a);return this.curve.jpoint(d,r,k)};ko.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr(),
a=d.redSqr(),f=b.redAdd(b).redIAdd(b),l=f.redSqr();b=this.x.redAdd(d).redSqr().redISub(b).redISub(a);var r=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(l)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);f=f.redIAdd(b).redSqr().redISub(l).redISub(r).redISub(a);d=d.redMul(f);d=(d=d.redIAdd(d)).redIAdd(d);d=this.x.redMul(r).redISub(d);d=(d=d.redIAdd(d)).redIAdd(d);a=this.y.redMul(f.redMul(a.redISub(f)).redISub(b.redMul(r)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);k=
this.z.redAdd(b).redSqr().redISub(k).redISub(r);return this.curve.jpoint(d,a,k)};ko.prototype.mul=function(b,d){return b=new Rl(b,d),this.curve._wnafMul(this,b)};ko.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var d=this.z.redSqr(),k=b.z.redSqr();if(0!==this.x.redMul(k).redISub(b.x.redMul(d)).cmpn(0))return!1;d=d.redMul(this.z);k=k.redMul(b.z);return 0===this.y.redMul(k).redISub(b.y.redMul(d)).cmpn(0)};ko.prototype.eqXToP=function(b){var d=this.z.redSqr(),
k=b.toRed(this.curve.red).redMul(d);if(0===this.x.cmp(k))return!0;b=b.clone();for(d=this.curve.redN.redMul(d);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(k.redIAdd(d),0===this.x.cmp(k))return!0}};ko.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ko.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var gE=zm,yaa=oi,dM=zt;yaa(fE,dM);fE.prototype.validate=
function(b){b=b.normalize().x;var d=b.redSqr();b=d.redMul(b).redAdd(d.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};yaa(Gn,dM.BasePoint);fE.prototype.decodePoint=function(b,d){return this.point(Di.toArray(b,d),1)};fE.prototype.point=function(b,d){return new Gn(this,b,d)};fE.prototype.pointFromJSON=function(b){return Gn.fromJSON(this,b)};Gn.prototype.precompute=function(){};Gn.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Gn.fromJSON=function(b,
d){return new Gn(b,d[0],d[1]||b.one)};Gn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Gn.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};Gn.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),d=this.x.redSub(this.z).redSqr(),k=b.redSub(d);b=b.redMul(d);d=k.redMul(d.redAdd(this.curve.a24.redMul(k)));return this.curve.point(b,d)};Gn.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};Gn.prototype.diffAdd=function(b,d){var k=this.x.redAdd(this.z),a=this.x.redSub(this.z),f=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(k);f=f.redMul(a);a=d.z.redMul(b.redAdd(f).redSqr());d=d.x.redMul(b.redISub(f).redSqr());return this.curve.point(a,d)};Gn.prototype.mul=function(b){var d=b.clone();b=this;for(var k=this.curve.point(null,null),a=[];0!==d.cmpn(0);d.iushrn(1))a.push(d.andln(1));for(d=a.length-1;0<=d;d--)0===a[d]?(b=b.diffAdd(k,this),k=k.dbl()):(k=b.diffAdd(k,this),b=b.dbl());return k};Gn.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};Gn.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};Gn.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};Gn.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Gn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var kx=zm,zaa=oi,eM=zt,lja=Di.assert;zaa(uv,eM);uv.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
uv.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};uv.prototype.jpoint=function(b,d,k,a){return this.point(b,d,k,a)};uv.prototype.pointFromX=function(b,d){(b=new kx(b,16)).red||(b=b.toRed(this.red));var k=b.redSqr(),a=this.c2.redSub(this.a.redMul(k));k=this.one.redSub(this.c2.redMul(this.d).redMul(k));k=a.redMul(k.redInvm());a=k.redSqrt();if(0!==a.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=a.fromRed().isOdd();return(d&&!k||!d&&k)&&(a=a.redNeg()),this.point(b,
a)};uv.prototype.pointFromY=function(b,d){(b=new kx(b,16)).red||(b=b.toRed(this.red));var k=b.redSqr(),a=k.redSub(this.c2);k=k.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(k.redInvm());if(0===a.cmp(this.zero)){if(d)throw Error("invalid point");return this.point(this.zero,b)}k=a.redSqrt();if(0!==k.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return k.fromRed().isOdd()!==d&&(k=k.redNeg()),this.point(k,b)};uv.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var d=b.x.redSqr(),k=b.y.redSqr();b=d.redMul(this.a).redAdd(k);d=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(k)));return 0===b.cmp(d)};zaa(Zk,eM.BasePoint);uv.prototype.pointFromJSON=function(b){return Zk.fromJSON(this,b)};uv.prototype.point=function(b,d,k,a){return new Zk(this,b,d,k,a)};Zk.fromJSON=function(b,d){return new Zk(b,d[0],d[1],d[2])};Zk.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};Zk.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};Zk.prototype._extDbl=function(){var b=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr();k=k.redIAdd(k);var a=this.curve._mulA(b),f=this.x.redAdd(this.y).redSqr().redISub(b).redISub(d);b=a.redAdd(d);k=b.redSub(k);var l=a.redSub(d);d=f.redMul(k);a=b.redMul(l);f=f.redMul(l);b=k.redMul(b);return this.curve.point(d,a,b,f)};Zk.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var d=this.x.redSqr();var k=this.y.redSqr();if(this.curve.twisted){var a=(l=this.curve._mulA(d)).redAdd(k);if(this.zOne)b=b.redSub(d).redSub(k).redMul(a.redSub(this.curve.two)),d=a.redMul(l.redSub(k)),a=a.redSqr().redSub(a).redSub(a);else{var f=this.z.redSqr();f=a.redSub(f).redISub(f);b=b.redSub(d).redISub(k).redMul(f);d=a.redMul(l.redSub(k));a=a.redMul(f)}}else{var l=d.redAdd(k);f=this.curve._mulC(this.z).redSqr();f=l.redSub(f).redSub(f);b=this.curve._mulC(b.redISub(l)).redMul(f);
d=this.curve._mulC(l).redMul(d.redISub(k));a=l.redMul(f)}return this.curve.point(b,d,a)};Zk.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Zk.prototype._extAdd=function(b){var d=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),k=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),f=this.z.redMul(b.z.redAdd(b.z)),l=k.redSub(d);b=f.redSub(a);a=f.redAdd(a);f=k.redAdd(d);d=l.redMul(b);k=a.redMul(f);l=l.redMul(f);
b=b.redMul(a);return this.curve.point(d,k,b,l)};Zk.prototype._projAdd=function(b){var d,k,a=this.z.redMul(b.z),f=a.redSqr(),l=this.x.redMul(b.x),r=this.y.redMul(b.y),v=this.curve.d.redMul(l).redMul(r),y=f.redSub(v);f=f.redAdd(v);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(l).redISub(r);b=a.redMul(y).redMul(b);return this.curve.twisted?(d=a.redMul(f).redMul(r.redSub(this.curve._mulA(l))),k=y.redMul(f)):(d=a.redMul(f).redMul(r.redSub(l)),k=this.curve._mulC(y).redMul(f)),this.curve.point(b,
d,k)};Zk.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};Zk.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};Zk.prototype.mulAdd=function(b,d,k){return this.curve._wnafMulAdd(1,[this,d],[b,k],2,!1)};Zk.prototype.jmulAdd=function(b,d,k){return this.curve._wnafMulAdd(1,[this,d],[b,k],2,!0)};Zk.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};Zk.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Zk.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Zk.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Zk.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};Zk.prototype.eqXToP=
function(b){var d=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(d))return!0;b=b.clone();for(var k=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(d.redIAdd(k),0===this.x.cmp(d))return!0}};Zk.prototype.toP=Zk.prototype.normalize;Zk.prototype.mixedAdd=Zk.prototype.add;var dF={};dF.base=zt;dF.short=is;dF.mont=fE;dF.edwards=uv;var isa={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},VO={},wT=VO,vT=dF,J4=Di.assert;wT.PresetCurve=I4;kz("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Sk.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});kz("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Sk.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});kz("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:Sk.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});kz("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Sk.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});kz("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Sk.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});kz("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Sk.sha256,gRed:!1,g:["9"]});kz("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Sk.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var Aaa=isa}catch(b){Aaa=void 0}kz("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:Sk.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Aaa]});var jsa=zm,Baa=Di.assert;
Hn.fromPublic=function(b,d,k){return d instanceof Hn?d:new Hn(b,{pub:d,pubEnc:k})};Hn.fromPrivate=function(b,d,k){return d instanceof Hn?d:new Hn(b,{priv:d,privEnc:k})};Hn.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Hn.prototype.getPublic=function(b,d){return"string"==
typeof b&&(d=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,b):this.pub};Hn.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};Hn.prototype._importPrivate=function(b,d){this.priv=new jsa(b,d||16);this.priv=this.priv.umod(this.ec.curve.n)};Hn.prototype._importPublic=function(b,d){if(b.x||b.y)return"mont"===this.ec.curve.type?Baa(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Baa(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,d)};Hn.prototype.derive=function(b){return b.mul(this.priv).getX()};Hn.prototype.sign=function(b,d,k){return this.ec.sign(b,this,d,k)};Hn.prototype.verify=function(b,d){return this.ec.verify(b,d,this)};Hn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var kC=zm,xT=VO,K4=Di.assert;js.prototype.keyPair=function(b){return new Hn(this,
b)};js.prototype.keyFromPrivate=function(b,d){return Hn.fromPrivate(this,b,d)};js.prototype.keyFromPublic=function(b,d){return Hn.fromPublic(this,b,d)};js.prototype.genKeyPair=function(b){b||(b={});b=new jx({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||QO(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var d=this.n.byteLength(),k=this.n.sub(new kC(2));;){var a=new kC(b.generate(d));if(!(0<a.cmp(k)))return a.iaddn(1),this.keyFromPrivate(a)}};
js.prototype._truncateToN=function(b,d){var k=8*b.byteLength()-this.n.bitLength();return 0<k&&(b=b.ushrn(k)),!d&&0<=b.cmp(this.n)?b.sub(this.n):b};js.prototype.sign=function(b,d,k,a){"object"==typeof k&&(a=k,k=null);a||(a={});d=this.keyFromPrivate(d,k);b=this._truncateToN(new kC(b,16));var f=this.n.byteLength();k=d.getPrivate().toArray("be",f);f=b.toArray("be",f);f=new jx({hash:this.hash,entropy:k,nonce:f,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var l=this.n.sub(new kC(1)),r=0;;r++){var v=a.k?
a.k(r):new kC(f.generate(this.n.byteLength()));if(!(0>=(v=this._truncateToN(v,!0)).cmpn(1)||0<=v.cmp(l))){var y=this.g.mul(v);if(!y.isInfinity()){var A=y.getX();k=A.umod(this.n);if(0!==k.cmpn(0)&&(v=v.invm(this.n).mul(k.mul(d.getPrivate()).iadd(b)),0!==(v=v.umod(this.n)).cmpn(0)))return b=(y.getY().isOdd()?1:0)|(0!==A.cmp(k)?2:0),a.canonical&&0<v.cmp(this.nh)&&(v=this.n.sub(v),b^=1),new tB({r:k,s:v,recoveryParam:b})}}}};js.prototype.verify=function(b,d,k,a){b=this._truncateToN(new kC(b,16));k=this.keyFromPublic(k,
a);a=(d=new tB(d,"hex")).r;d=d.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>d.cmpn(1)||0<=d.cmp(this.n))return!1;var f;d=d.invm(this.n);b=d.mul(b).umod(this.n);d=d.mul(a).umod(this.n);return this.curve._maxwellTrick?!(f=this.g.jmulAdd(b,k.getPublic(),d)).isInfinity()&&f.eqXToP(a):!(f=this.g.mulAdd(b,k.getPublic(),d)).isInfinity()&&0===f.getX().umod(this.n).cmp(a)};js.prototype.recoverPubKey=function(b,d,k,a){K4((3&k)===k,"The recovery param is more than two bits");d=new tB(d,a);a=this.n;var f=new kC(b);
b=d.r;var l=d.s,r=1&k;k>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&k)throw Error("Unable to find sencond key candinate");b=k?this.curve.pointFromX(b.add(this.curve.n),r):this.curve.pointFromX(b,r);d=d.r.invm(a);k=a.sub(f).mul(d).umod(a);a=l.mul(d).umod(a);return this.g.mulAdd(k,b,a)};js.prototype.getKeyRecoveryParam=function(b,d,k,a){if(null!==(d=new tB(d,a)).recoveryParam)return d.recoveryParam;for(a=0;4>a;a++){try{var f=this.recoverPubKey(b,d,a)}catch(l){continue}if(f.eq(k))return a}throw Error("Unable to find valid recovery factor");
};var Caa=Di.assert,L4=Di.parseBytes,eF=Di.cachedProperty;an.fromPublic=function(b,d){return d instanceof an?d:new an(b,{pub:d})};an.fromSecret=function(b,d){return d instanceof an?d:new an(b,{secret:d})};an.prototype.secret=function(){return this._secret};eF(an,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});eF(an,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});eF(an,"privBytes",function(){var b=this.eddsa,d=this.hash(),
k=b.encodingLength-1;b=d.slice(0,b.encodingLength);return b[0]&=248,b[k]&=127,b[k]|=64,b});eF(an,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});eF(an,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});eF(an,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});an.prototype.sign=function(b){return Caa(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};an.prototype.verify=function(b,d){return this.eddsa.verify(b,d,
this)};an.prototype.getSecret=function(b){return Caa(this._secret,"KeyPair is public only"),Di.encode(this.secret(),b)};an.prototype.getPublic=function(b){return Di.encode(this.pubBytes(),b)};var oja=zm,nja=Di.assert,WO=Di.cachedProperty,mja=Di.parseBytes;WO(lz,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});WO(lz,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});WO(lz,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});WO(lz,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
lz.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};lz.prototype.toHex=function(){return Di.encode(this.toBytes(),"hex").toUpperCase()};var rja=Sk,qja=VO,pja=Di.assert,Daa=Di.parseBytes;dq.prototype.sign=function(b,d){b=Daa(b);var k=this.keyFromSecret(d),a=this.hashInt(k.messagePrefix(),b);d=this.g.mul(a);var f=this.encodePoint(d);b=this.hashInt(f,k.pubBytes(),b).mul(k.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:d,S:b,Rencoded:f})};dq.prototype.verify=
function(b,d,k){b=Daa(b);d=this.makeSignature(d);k=this.keyFromPublic(k);b=this.hashInt(d.Rencoded(),k.pubBytes(),b);var a=this.g.mul(d.S());return d.R().add(k.pub().mul(b)).eq(a)};dq.prototype.hashInt=function(){for(var b=this.hash(),d=0;d<arguments.length;d++)b.update(arguments[d]);return Di.intFromLE(b.digest()).umod(this.curve.n)};dq.prototype.keyFromPublic=function(b){return an.fromPublic(this,b)};dq.prototype.keyFromSecret=function(b){return an.fromSecret(this,b)};dq.prototype.makeSignature=
function(b){return b instanceof lz?b:new lz(this,b)};dq.prototype.encodePoint=function(b){var d=b.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=b.getX().isOdd()?128:0,d};dq.prototype.decodePoint=function(b){var d=(b=Di.parseBytes(b)).length-1,k=b.slice(0,d).concat(-129&b[d]);b=0!=(128&b[d]);k=Di.intFromLE(k);return this.curve.pointFromY(k,b)};dq.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};dq.prototype.decodeInt=function(b){return Di.intFromLE(b)};
dq.prototype.isPoint=function(b){return b instanceof this.pointClass};var Fx={version:"6.5.2"};Fx.utils=Di;Fx.rand=QO;Fx.curve=dF;Fx.curves=VO;Fx.ec=js;Fx.eddsa=dq;var KT={},c5=!1,$q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,P4={},ksa=oi;P4.Reporter=ks;ks.prototype.isError=function(b){return b instanceof hE};ks.prototype.save=function(){var b=(this||bn)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};ks.prototype.restore=function(b){var d=(this||bn)._reporterState;d.obj=b.obj;d.path=d.path.slice(0,b.pathLen)};ks.prototype.enterKey=function(b){return(this||bn)._reporterState.path.push(b)};ks.prototype.exitKey=function(b){var d=(this||bn)._reporterState;d.path=d.path.slice(0,b-1)};ks.prototype.leaveKey=function(b,d,k){var a=(this||bn)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[d]=k)};ks.prototype.path=function(){return(this||bn)._reporterState.path.join("/")};ks.prototype.enterObject=
function(){var b=(this||bn)._reporterState,d=b.obj;return b.obj={},d};ks.prototype.leaveObject=function(b){var d=(this||bn)._reporterState,k=d.obj;return d.obj=b,k};ks.prototype.error=function(b){var d=(this||bn)._reporterState,k=b instanceof hE;if(b=k?b:new hE(d.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!d.options.partial)throw b;return k||d.errors.push(b),b};ks.prototype.wrapResult=function(b){var d=(this||bn)._reporterState;return d.options.partial?{result:this.isError(b)?
null:b,errors:d.errors}:b};ksa(hE,Error);hE.prototype.rethrow=function(b){if((this||bn).message=b+" at: "+((this||bn).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||bn,hE),!(this||bn).stack)try{throw Error((this||bn).message);}catch(d){(this||bn).stack=d.stack}return this||bn};var fM={},N4=!1,th="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zT={},Q4=!1,Qg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yT={},
O4=!1,mz={},T4=!1,AT={},S4=!1,BT={},V4=!1,nz="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ET={},X4=!1,DT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,CT={},W4=!1,FT={},Z4=!1,cn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,IT={},a5=!1,HT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,GT={},$4=!1,JT={},b5=!1,Wl=gM(),Eaa=Wl.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),lsa=Wl.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),EX=Wl.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),msa=Wl.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(EX),this.key("subjectPublicKey").bitstr())}),nsa=Wl.define("RelativeDistinguishedName",function(){this.setof(lsa)}),
osa=Wl.define("RDNSequence",function(){this.seqof(nsa)}),Faa=Wl.define("Name",function(){this.choice({rdnSequence:this.use(osa)})}),psa=Wl.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Eaa),this.key("notAfter").use(Eaa))}),qsa=Wl.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),rsa=Wl.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),
this.key("serialNumber").int(),this.key("signature").use(EX),this.key("issuer").use(Faa),this.key("validity").use(psa),this.key("subject").use(Faa),this.key("subjectPublicKeyInfo").use(msa),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(qsa).optional())}),ssa=Wl.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(rsa),this.key("signatureAlgorithm").use(EX),
this.key("signatureValue").bitstr())}),St={};St.certificate=ssa;var tsa=Wl.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});St.RSAPrivateKey=tsa;var usa=Wl.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});
St.RSAPublicKey=usa;var vsa=Wl.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Gaa),this.key("subjectPublicKey").bitstr())});St.PublicKey=vsa;var Gaa=Wl.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),wsa=Wl.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(Gaa),this.key("subjectPrivateKey").octstr())});St.PrivateKey=wsa;var xsa=Wl.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
St.EncryptedPrivateKey=xsa;var ysa=Wl.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});St.DSAPrivateKey=ysa;St.DSAparam=Wl.define("DSAparam",function(){this.int()});var Asa=Wl.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(zsa),this.key("publicKey").optional().explicit(1).bitstr())});
St.ECPrivateKey=Asa;var zsa=Wl.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});St.signature=Wl.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var uja=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,wja=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,vja=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,hM=lj.Buffer,eq=St,xja={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},zja=ar,yja=LO,LT=lj.Buffer;iE.signature=eq.signature;var Haa={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},FX={},Lo=ei.Buffer,xB=W$,Bsa=Fx.ec,iM=zm;(FX=function(b,d,k,a,f){d=iE(d);if(d.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(l,r){var v=Haa[r.curve.join(".")];if(!v)throw Error("unknown curve "+r.curve.join("."));l=(new Bsa(v)).keyFromPrivate(r.privateKey).sign(l);return new Lo(l.toDER())}(b,d)}if("dsa"===d.type){if("dsa"!==a)throw Error("wrong private key type");
return function(l,r,v){var y=r.params.priv_key,A=r.params.p,E=r.params.q;r=r.params.g;var F=new iM(0),H=MT(l,E).mod(E);var J=!1;for(l=d5(y,E,l,v);!1===J;){F=J=e5(E,l,v);var O=E;F=r.toRed(iM.mont(A)).redPow(F).fromRed().mod(O);0===(J=J.invm(E).imul(H.add(y.mul(F))).mod(E)).cmpn(0)&&(J=!1,F=new iM(0))}v=J;y=F.toArray();v=v.toArray();128&y[0]&&(y=[0].concat(y));128&v[0]&&(v=[0].concat(v));A=[48,y.length+v.length+4,2,y.length];return A=A.concat(y,[2,v.length],v),new Lo(A)}(b,d,k)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=Lo.concat([f,b]);a=d.modulus.byteLength();for(k=[0,1];b.length+k.length+1<a;)k.push(255);k.push(0);for(a=-1;++a<b.length;)k.push(b[a]);return aM(k,d)}).getKey=d5;FX.makeKey=e5;var GX=ei.Buffer,CI=zm,Csa=Fx.ec,Sl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,XO=ei.Buffer,g5=xI,jM=DB,Iaa=oi,Dsa=FX,Esa=function(b,d,k,a,f){k=iE(k);if("ec"===k.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(v,
y,A){var E=Haa[A.data.algorithm.curve.join(".")];if(!E)throw Error("unknown curve "+A.data.algorithm.curve.join("."));return(new Csa(E)).verify(y,v,A.data.subjectPrivateKey.data)}(b,d,k)}if("dsa"===k.type){if("dsa"!==a)throw Error("wrong public key type");return function(v,y,A){var E=A.data.p,F=A.data.q,H=A.data.g;A=A.data.pub_key;var J=iE.signature.decode(v,"der");v=J.s;J=J.r;f5(v,F);f5(J,F);var O=CI.mont(E);v=v.invm(F);return 0===H.toRed(O).redPow((new CI(y)).mul(v).mod(F)).fromRed().mul(A.toRed(O).redPow(J.mul(v).mod(F)).fromRed()).mod(E).mod(F).cmp(J)}(b,
d,k)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");d=GX.concat([f,d]);f=k.modulus.byteLength();a=[1];for(var l=0;d.length+a.length+2<f;)a.push(255),l++;a.push(0);for(var r=-1;++r<d.length;)a.push(d[r]);a=new GX(a);d=CI.mont(k.modulus);b=(b=(new CI(b)).toRed(d)).redPow(new CI(k.publicExponent));b=new GX(b.fromRed().toArray());d=8>l?1:0;f=Math.min(b.length,a.length);b.length!==a.length&&(d=1);for(r=-1;++r<f;)d|=b[r]^a[r];return 0===d},yB=X$;Object.keys(yB).forEach(function(b){yB[b].id=
new XO(yB[b].id,"hex");yB[b.toLowerCase()]=yB[b]});Iaa(fH,jM.Writable);fH.prototype._write=function(b,d,k){(this||Sl)._hash.update(b);k()};fH.prototype.update=function(b,d){return"string"==typeof b&&(b=new XO(b,d)),(this||Sl)._hash.update(b),this||Sl};fH.prototype.sign=function(b,d){this.end();var k=(this||Sl)._hash.digest();b=Dsa(k,b,(this||Sl)._hashType,(this||Sl)._signType,(this||Sl)._tag);return d?b.toString(d):b};Iaa(gH,jM.Writable);gH.prototype._write=function(b,d,k){(this||Sl)._hash.update(b);
k()};gH.prototype.update=function(b,d){return"string"==typeof b&&(b=new XO(b,d)),(this||Sl)._hash.update(b),this||Sl};gH.prototype.verify=function(b,d,k){"string"==typeof d&&(d=new XO(d,k));this.end();k=(this||Sl)._hash.digest();return Esa(d,k,b,(this||Sl)._signType,(this||Sl)._tag)};var dn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,lx=ei.Buffer,Aja=Fx,Fsa=zm,br={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};br.p224=br.secp224r1;br.p256=br.secp256r1=br.prime256v1;br.p192=br.secp192r1=br.prime192v1;br.p384=br.secp384r1;br.p521=br.secp521r1;zB.prototype.generateKeys=function(b,d){return(this||dn).keys=(this||dn).curve.genKeyPair(),this.getPublicKey(b,d)};zB.prototype.computeSecret=function(b,d,k){return d=d||"utf8",lx.isBuffer(b)||(b=new lx(b,
d)),NT((this||dn).curve.keyFromPublic(b).getPublic().mul((this||dn).keys.getPrivate()).getX(),k,(this||dn).curveType.byteLength)};zB.prototype.getPublicKey=function(b,d){var k=(this||dn).keys.getPublic("compressed"===d,!0);return"hybrid"===d&&(k[k.length-1]%2?k[0]=7:k[0]=6),NT(k,b)};zB.prototype.getPrivateKey=function(b){return NT((this||dn).keys.getPrivate(),b)};zB.prototype.setPublicKey=function(b,d){return d=d||"utf8",lx.isBuffer(b)||(b=new lx(b,d)),(this||dn).keys._importPublic(b),this||dn};zB.prototype.setPrivateKey=
function(b,d){d=d||"utf8";lx.isBuffer(b)||(b=new lx(b,d));b=new Fsa(b);return b=b.toString(16),(this||dn).keys=(this||dn).curve.genKeyPair(),(this||dn).keys._importPrivate(b),this||dn};var HX=lj.Buffer,YO=function(b,d){for(var k,a=HX.alloc(0),f=0;a.length<d;){k=f++;var l=HX.allocUnsafe(4);k=(l.writeUInt32BE(k,0),l);a=HX.concat([a,xI("sha1").update(b).update(k).digest()])}return a.slice(0,d)},ZO=function(b,d){for(var k=b.length,a=-1;++a<k;)b[a]^=d[a];return b},Jaa=zm,Gsa=lj.Buffer,Kaa=function(b,d){return Gsa.from(b.toRed(Jaa.mont(d.modulus)).redPow(new Jaa(d.publicExponent)).fromRed().toArray())},
IX=zm,Tt=lj.Buffer,Laa=zm,DI=lj.Buffer,fF={publicEncrypt:function(b,d,k){var a=b.padding?b.padding:k?1:4;b=iE(b);if(4===a)d=function(f,l){f=f.modulus.byteLength();var r=l.length,v=xI("sha1").update(Tt.alloc(0)).digest(),y=v.length,A=2*y;if(r>f-A-2)throw Error("message too long");A=Tt.alloc(f-r-A-2);var E=f-y-1;r=Mz(y);l=ZO(Tt.concat([v,A,Tt.alloc(1,1),l],E),YO(r,E));y=ZO(r,YO(l,y));return new IX(Tt.concat([Tt.alloc(1),y,l],f))}(b,d);else if(1===a)d=function(f,l,r){var v=l.length;f=f.modulus.byteLength();
if(v>f-11)throw Error("message too long");if(r)var y=Tt.alloc(f-v-3,255);else{v=f-v-3;for(var A=Tt.allocUnsafe(v),E=0,F=Mz(2*v),H=0;E<v;)H===F.length&&(F=Mz(2*v),H=0),(y=F[H++])&&(A[E++]=y);y=A}return new IX(Tt.concat([Tt.from([0,r?1:2]),y,Tt.alloc(1),l],f))}(b,d,k);else{if(3!==a)throw Error("unknown padding");if(0<=(d=new IX(d)).cmp(b.modulus))throw Error("data too long for modulus");}return k?aM(d,b):Kaa(d,b)},privateDecrypt:function(b,d,k){var a=b.padding?b.padding:k?1:4;b=iE(b);var f=b.modulus.byteLength();
if(d.length>f||0<=(new Laa(d)).cmp(b.modulus))throw Error("decryption error");d=k?Kaa(new Laa(d),b):aM(d,b);var l=DI.alloc(f-d.length);if(d=DI.concat([l,d],f),4===a)return function(r,v){var y=r.modulus.byteLength(),A=xI("sha1").update(DI.alloc(0)).digest();r=A.length;if(0!==v[0])throw Error("decryption error");var E=v.slice(1,r+1);v=v.slice(r+1);E=ZO(E,YO(v,r));y=ZO(v,YO(E,y-r-1));v=y.slice(0,r);A=DI.from(A);v=DI.from(v);E=0;var F=A.length;A.length!==v.length&&(E++,F=Math.min(A.length,v.length));
for(var H=-1;++H<F;)E+=A[H]^v[H];if(E)throw Error("decryption error");for(;0===y[r];)r++;if(1!==y[r++])throw Error("decryption error");return y.slice(r)}(b,d);if(1===a)return function(r,v,y){r=v.slice(0,2);for(var A=2,E=0;0!==v[A++];)if(A>=v.length){E++;break}var F=v.slice(2,A-1);("0002"!==r.toString("hex")&&!y||"0001"!==r.toString("hex")&&y)&&E++;8>F.length&&E++;if(E)throw Error("decryption error");return v.slice(A)}(0,d,k);if(3===a)return d;throw Error("unknown padding");},privateEncrypt:function(b,
d){return fF.publicEncrypt(b,d,!0)},publicDecrypt:function(b,d){return fF.privateDecrypt(b,d,!0)}},$O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,JX,KX,OT=bj,p5=Mz,Maa=lj.Buffer,m5=lj.kMaxLength,PT=$O.crypto||$O.msCrypto,l5=Math.pow(2,32)-1;PT&&PT.getRandomValues||!OT.browser?(JX=function(b,d,k,a){if(!(Maa.isBuffer(b)||b instanceof $O.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof d)a=d,d=0,k=b.length;else if("function"==
typeof k)a=k,k=b.length-d;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return k5(d,b.length),n5(k,d,b.length),o5(b,d,k,a)},KX=function(b,d,k){void 0===d&&(d=0);if(!(Maa.isBuffer(b)||b instanceof $O.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');k5(d,b.length);void 0===k&&(k=b.length-d);return n5(k,d,b.length),o5(b,d,k)}):(JX=j5,KX=j5);var jh={};jh.randomBytes=jh.rng=jh.pseudoRandomBytes=jh.prng=Mz;jh.createHash=jh.Hash=xI;jh.createHmac=
jh.Hmac=W$;var Hsa=Object.keys(X$),Isa="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(Hsa);jh.getHashes=function(){return Isa};jh.pbkdf2=LO.pbkdf2;jh.pbkdf2Sync=LO.pbkdf2Sync;jh.Cipher=iaa;jh.createCipher=Dra;jh.Cipheriv=mT;jh.createCipheriv=mT;jh.Decipher=jaa;jh.createDecipher=Era;jh.Decipheriv=oT;jh.createDecipheriv=oT;jh.getCiphers=kaa;jh.listCiphers=Fra;jh.DiffieHellmanGroup=Nra;jh.createDiffieHellmanGroup=paa;jh.getDiffieHellman=qaa;jh.createDiffieHellman=Ora;jh.DiffieHellman=
raa;jh.createSign=h5;jh.Sign=h5;jh.createVerify=i5;jh.Verify=i5;jh.createECDH=function(b){return new zB(b)};jh.publicEncrypt=fF.publicEncrypt;jh.privateEncrypt=fF.privateEncrypt;jh.publicDecrypt=fF.publicDecrypt;jh.privateDecrypt=fF.privateDecrypt;jh.randomFill=JX;jh.randomFillSync=KX;jh.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};jh.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,
DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.default=function(){return Jsa.default.randomFillSync(Ksa)};var Jsa=jh&&jh.__esModule?jh:{default:jh},Ksa=new Uint8Array(16),
xp={};Object.defineProperty(xp,"__esModule",{value:!0});xp.default=void 0;for(var qo=[],LX=0;256>LX;++LX)qo.push((LX+256).toString(16).substr(1));xp.default=function(b,d){d=d||0;return(qo[b[d+0]]+qo[b[d+1]]+qo[b[d+2]]+qo[b[d+3]]+"-"+qo[b[d+4]]+qo[b[d+5]]+"-"+qo[b[d+6]]+qo[b[d+7]]+"-"+qo[b[d+8]]+qo[b[d+9]]+"-"+qo[b[d+10]]+qo[b[d+11]]+qo[b[d+12]]+qo[b[d+13]]+qo[b[d+14]]+qo[b[d+15]]).toLowerCase()};var aP={};Object.defineProperty(aP,"__esModule",{value:!0});aP.default=void 0;var Lsa=Xv&&Xv.__esModule?
Xv:{default:Xv},Msa=xp&&xp.__esModule?xp:{default:xp},Naa,MX,NX=0,OX=0;aP.default=function(b,d,k){k=d&&k||0;var a=d||[];b=b||{};var f=b.node||Naa,l=void 0!==b.clockseq?b.clockseq:MX;if(null==f||null==l){var r=b.random||(b.rng||Lsa.default)();null==f&&(f=Naa=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]);null==l&&(l=MX=(r[6]<<8|r[7])&16383)}r=void 0!==b.msecs?b.msecs:Date.now();var v=void 0!==b.nsecs?b.nsecs:OX+1,y=r-NX+(v-OX)/1E4;0>y&&void 0===b.clockseq&&(l=l+1&16383);(0>y||r>NX)&&void 0===b.nsecs&&(v=0);if(1E4<=
v)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");NX=r;OX=v;MX=l;r+=122192928E5;b=(1E4*(r&268435455)+v)%4294967296;a[k++]=b>>>24&255;a[k++]=b>>>16&255;a[k++]=b>>>8&255;a[k++]=b&255;b=r/4294967296*1E4&268435455;a[k++]=b>>>8&255;a[k++]=b&255;a[k++]=b>>>24&15|16;a[k++]=b>>>16&255;a[k++]=l>>>8|128;a[k++]=l&255;for(l=0;6>l;++l)a[k+l]=f[l];return d||(0,Msa.default)(a)};var kq={};Object.defineProperty(kq,"__esModule",{value:!0});kq.default=function(b,d,k){function a(f,l,r,v){v=r&&v||0;if("string"===
typeof f){f=unescape(encodeURIComponent(f));for(var y=[],A=0;A<f.length;++A)y.push(f.charCodeAt(A));f=y}"string"===typeof l&&(l=Bja(l));if(!Array.isArray(f))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=k(l.concat(f));l[6]=l[6]&15|d;l[8]=l[8]&63|128;if(r)for(f=0;16>f;++f)r[v+f]=l[f];return r||(0,Nsa.default)(l)}try{a.name=b}catch(f){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";
a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};kq.URL=kq.DNS=void 0;var Nsa=xp&&xp.__esModule?xp:{default:xp};kq.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";kq.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var lC={},Oaa=ei.Buffer;Object.defineProperty(lC,"__esModule",{value:!0});lC.default=void 0;var Osa=jh&&jh.__esModule?jh:{default:jh};lC.default=function(b){Array.isArray(b)?b=Oaa.from(b):"string"===typeof b&&(b=Oaa.from(b,"utf8"));return Osa.default.createHash("md5").update(b).digest()};var bP=
{};Object.defineProperty(bP,"__esModule",{value:!0});bP.default=void 0;var Psa=kq&&kq.__esModule?kq:{default:kq},Qsa=lC&&lC.__esModule?lC:{default:lC},Rsa=(0,Psa.default)("v3",48,Qsa.default);bP.default=Rsa;var cP={};Object.defineProperty(cP,"__esModule",{value:!0});cP.default=void 0;var Ssa=Xv&&Xv.__esModule?Xv:{default:Xv},Tsa=xp&&xp.__esModule?xp:{default:xp};cP.default=function(b,d,k){"string"===typeof b&&(d="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||Ssa.default)();
b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(d){k=k||0;for(var a=0;16>a;++a)d[k+a]=b[a];return d}return(0,Tsa.default)(b)};var mC={},Paa=ei.Buffer;Object.defineProperty(mC,"__esModule",{value:!0});mC.default=void 0;var Usa=jh&&jh.__esModule?jh:{default:jh};mC.default=function(b){Array.isArray(b)?b=Paa.from(b):"string"===typeof b&&(b=Paa.from(b,"utf8"));return Usa.default.createHash("sha1").update(b).digest()};var dP={};Object.defineProperty(dP,"__esModule",{value:!0});dP.default=void 0;var Vsa=kq&&kq.__esModule?
kq:{default:kq},Wsa=mC&&mC.__esModule?mC:{default:mC},Xsa=(0,Vsa.default)("v5",80,Wsa.default);dP.default=Xsa;var nC={};Object.defineProperty(nC,"__esModule",{value:!0});Object.defineProperty(nC,"v1",{enumerable:!0,get:function(){return Ysa.default}});Object.defineProperty(nC,"v3",{enumerable:!0,get:function(){return Zsa.default}});Object.defineProperty(nC,"v4",{enumerable:!0,get:function(){return $sa.default}});Object.defineProperty(nC,"v5",{enumerable:!0,get:function(){return ata.default}});var Ysa=
kM(aP),Zsa=kM(bP),$sa=kM(cP),ata=kM(dP),ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.atob=function(b){return Qaa(b)};ro.btoa=function(b){return Raa(b)};ro.base64StringToBlobOrBuffer=function(b,d){return s5(Qaa(b),d)};ro.binaryStringToArrayBuffer=r5;ro.binaryStringToBlobOrBuffer=s5;ro.blob=q5;ro.blobOrBufferToBase64=function(b,d){u5(b,function(k){d(Raa(k))})};ro.blobOrBufferToBinaryString=u5;ro.readAsArrayBuffer=function(b,d){var k=new FileReader;k.onloadend=function(a){a=a.target.result||
new ArrayBuffer(0);d(a)};k.readAsArrayBuffer(b)};ro.readAsBinaryString=t5;ro.typedBuffer=function(){};var Qaa=ro.atob,Raa=ro.btoa,Sh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bta={},EI=bta=function(b){function d(E,F){var H=E[0],J=E[1],O=E[2],L=E[3];H+=(J&O|~J&L)+F[0]-680876936|0;H=(H<<7|H>>>25)+J|0;L+=(H&J|~H&O)+F[1]-389564586|0;L=(L<<12|L>>>20)+H|0;O+=(L&H|~L&J)+F[2]+606105819|0;O=(O<<17|O>>>15)+L|0;J+=(O&L|~O&H)+F[3]-1044525330|0;J=(J<<22|J>>>10)+O|0;H+=(J&
O|~J&L)+F[4]-176418897|0;H=(H<<7|H>>>25)+J|0;L+=(H&J|~H&O)+F[5]+1200080426|0;L=(L<<12|L>>>20)+H|0;O+=(L&H|~L&J)+F[6]-1473231341|0;O=(O<<17|O>>>15)+L|0;J+=(O&L|~O&H)+F[7]-45705983|0;J=(J<<22|J>>>10)+O|0;H+=(J&O|~J&L)+F[8]+1770035416|0;H=(H<<7|H>>>25)+J|0;L+=(H&J|~H&O)+F[9]-1958414417|0;L=(L<<12|L>>>20)+H|0;O+=(L&H|~L&J)+F[10]-42063|0;O=(O<<17|O>>>15)+L|0;J+=(O&L|~O&H)+F[11]-1990404162|0;J=(J<<22|J>>>10)+O|0;H+=(J&O|~J&L)+F[12]+1804603682|0;H=(H<<7|H>>>25)+J|0;L+=(H&J|~H&O)+F[13]-40341101|0;L=(L<<12|
L>>>20)+H|0;O+=(L&H|~L&J)+F[14]-1502002290|0;O=(O<<17|O>>>15)+L|0;J+=(O&L|~O&H)+F[15]+1236535329|0;J=(J<<22|J>>>10)+O|0;H+=(J&L|O&~L)+F[1]-165796510|0;H=(H<<5|H>>>27)+J|0;L+=(H&O|J&~O)+F[6]-1069501632|0;L=(L<<9|L>>>23)+H|0;O+=(L&J|H&~J)+F[11]+643717713|0;O=(O<<14|O>>>18)+L|0;J+=(O&H|L&~H)+F[0]-373897302|0;J=(J<<20|J>>>12)+O|0;H+=(J&L|O&~L)+F[5]-701558691|0;H=(H<<5|H>>>27)+J|0;L+=(H&O|J&~O)+F[10]+38016083|0;L=(L<<9|L>>>23)+H|0;O+=(L&J|H&~J)+F[15]-660478335|0;O=(O<<14|O>>>18)+L|0;J+=(O&H|L&~H)+F[4]-
405537848|0;J=(J<<20|J>>>12)+O|0;H+=(J&L|O&~L)+F[9]+568446438|0;H=(H<<5|H>>>27)+J|0;L+=(H&O|J&~O)+F[14]-1019803690|0;L=(L<<9|L>>>23)+H|0;O+=(L&J|H&~J)+F[3]-187363961|0;O=(O<<14|O>>>18)+L|0;J+=(O&H|L&~H)+F[8]+1163531501|0;J=(J<<20|J>>>12)+O|0;H+=(J&L|O&~L)+F[13]-1444681467|0;H=(H<<5|H>>>27)+J|0;L+=(H&O|J&~O)+F[2]-51403784|0;L=(L<<9|L>>>23)+H|0;O+=(L&J|H&~J)+F[7]+1735328473|0;O=(O<<14|O>>>18)+L|0;J+=(O&H|L&~H)+F[12]-1926607734|0;J=(J<<20|J>>>12)+O|0;H+=(J^O^L)+F[5]-378558|0;H=(H<<4|H>>>28)+J|0;L+=(H^
J^O)+F[8]-2022574463|0;L=(L<<11|L>>>21)+H|0;O+=(L^H^J)+F[11]+1839030562|0;O=(O<<16|O>>>16)+L|0;J+=(O^L^H)+F[14]-35309556|0;J=(J<<23|J>>>9)+O|0;H+=(J^O^L)+F[1]-1530992060|0;H=(H<<4|H>>>28)+J|0;L+=(H^J^O)+F[4]+1272893353|0;L=(L<<11|L>>>21)+H|0;O+=(L^H^J)+F[7]-155497632|0;O=(O<<16|O>>>16)+L|0;J+=(O^L^H)+F[10]-1094730640|0;J=(J<<23|J>>>9)+O|0;H+=(J^O^L)+F[13]+681279174|0;H=(H<<4|H>>>28)+J|0;L+=(H^J^O)+F[0]-358537222|0;L=(L<<11|L>>>21)+H|0;O+=(L^H^J)+F[3]-722521979|0;O=(O<<16|O>>>16)+L|0;J+=(O^L^H)+F[6]+
76029189|0;J=(J<<23|J>>>9)+O|0;H+=(J^O^L)+F[9]-640364487|0;H=(H<<4|H>>>28)+J|0;L+=(H^J^O)+F[12]-421815835|0;L=(L<<11|L>>>21)+H|0;O+=(L^H^J)+F[15]+530742520|0;O=(O<<16|O>>>16)+L|0;J+=(O^L^H)+F[2]-995338651|0;J=(J<<23|J>>>9)+O|0;H+=(O^(J|~L))+F[0]-198630844|0;H=(H<<6|H>>>26)+J|0;L+=(J^(H|~O))+F[7]+1126891415|0;L=(L<<10|L>>>22)+H|0;O+=(H^(L|~J))+F[14]-1416354905|0;O=(O<<15|O>>>17)+L|0;J+=(L^(O|~H))+F[5]-57434055|0;J=(J<<21|J>>>11)+O|0;H+=(O^(J|~L))+F[12]+1700485571|0;H=(H<<6|H>>>26)+J|0;L+=(J^(H|~O))+
F[3]-1894986606|0;L=(L<<10|L>>>22)+H|0;O+=(H^(L|~J))+F[10]-1051523|0;O=(O<<15|O>>>17)+L|0;J+=(L^(O|~H))+F[1]-2054922799|0;J=(J<<21|J>>>11)+O|0;H+=(O^(J|~L))+F[8]+1873313359|0;H=(H<<6|H>>>26)+J|0;L+=(J^(H|~O))+F[15]-30611744|0;L=(L<<10|L>>>22)+H|0;O+=(H^(L|~J))+F[6]-1560198380|0;O=(O<<15|O>>>17)+L|0;J+=(L^(O|~H))+F[13]+1309151649|0;J=(J<<21|J>>>11)+O|0;H+=(O^(J|~L))+F[4]-145523070|0;H=(H<<6|H>>>26)+J|0;L+=(J^(H|~O))+F[11]-1120210379|0;L=(L<<10|L>>>22)+H|0;O+=(H^(L|~J))+F[2]+718787259|0;O=(O<<15|O>>>
17)+L|0;J+=(L^(O|~H))+F[9]-343485551|0;E[0]=H+E[0]|0;E[1]=((J<<21|J>>>11)+O|0)+E[1]|0;E[2]=O+E[2]|0;E[3]=L+E[3]|0}function k(E){var F=[],H;for(H=0;64>H;H+=4)F[H>>2]=E.charCodeAt(H)+(E.charCodeAt(H+1)<<8)+(E.charCodeAt(H+2)<<16)+(E.charCodeAt(H+3)<<24);return F}function a(E){var F=[],H;for(H=0;64>H;H+=4)F[H>>2]=E[H]+(E[H+1]<<8)+(E[H+2]<<16)+(E[H+3]<<24);return F}function f(E){var F=E.length,H=[1732584193,-271733879,-1732584194,271733878],J;for(J=64;J<=F;J+=64)d(H,k(E.substring(J-64,J)));E=E.substring(J-
64);var O=E.length;var L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(J=0;J<O;J+=1)L[J>>2]|=E.charCodeAt(J)<<(J%4<<3);L[J>>2]|=128<<(J%4<<3);if(55<J)for(d(H,L),J=0;16>J;J+=1)L[J]=0;F=(8*F).toString(16).match(/(.*?)(.{0,8})$/);E=parseInt(F[2],16);F=parseInt(F[1],16)||0;L[14]=E;L[15]=F;d(H,L);return H}function l(E){var F;for(F=0;F<E.length;F+=1){var H=F,J,O=E[F],L="";for(J=0;4>J;J+=1)L+=A[O>>8*J+4&15]+A[O>>8*J&15];E[H]=L}return E.join("")}function r(E){/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E)));
return E}function v(E){var F=[],H=E.length,J;for(J=0;J<H-1;J+=2)F.push(parseInt(E.substr(J,2),16));return String.fromCharCode.apply(String,F)}function y(){this.reset()}var A="0123456789abcdef".split("");l(f("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function E(F,H){F=F|0||0;return 0>F?Math.max(F+H,0):Math.min(F,H)}ArrayBuffer.prototype.slice=function(F,H){var J=(this||Sh).byteLength;F=E(F,J);var O=J;H!==b&&(O=E(H,J));if(F>O)return new ArrayBuffer(0);O-=F;H=
new ArrayBuffer(O);J=new Uint8Array(H);F=new Uint8Array(this||Sh,F,O);J.set(F);return H}}();y.prototype.append=function(E){this.appendBinary(r(E));return this||Sh};y.prototype.appendBinary=function(E){(this||Sh)._buff+=E;(this||Sh)._length+=E.length;E=(this||Sh)._buff.length;var F;for(F=64;F<=E;F+=64)d((this||Sh)._hash,k((this||Sh)._buff.substring(F-64,F)));(this||Sh)._buff=(this||Sh)._buff.substring(F-64);return this||Sh};y.prototype.end=function(E){var F=(this||Sh)._buff,H=F.length,J,O=[0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0];for(J=0;J<H;J+=1)O[J>>2]|=F.charCodeAt(J)<<(J%4<<3);this._finish(O,H);F=l((this||Sh)._hash);E&&(F=v(F));this.reset();return F};y.prototype.reset=function(){(this||Sh)._buff="";(this||Sh)._length=0;(this||Sh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Sh};y.prototype.getState=function(){return{buff:(this||Sh)._buff,length:(this||Sh)._length,hash:(this||Sh)._hash.slice()}};y.prototype.setState=function(E){(this||Sh)._buff=E.buff;(this||Sh)._length=E.length;
(this||Sh)._hash=E.hash;return this||Sh};y.prototype.destroy=function(){delete (this||Sh)._hash;delete (this||Sh)._buff;delete (this||Sh)._length};y.prototype._finish=function(E,F){E[F>>2]|=128<<(F%4<<3);if(55<F)for(d((this||Sh)._hash,E),F=0;16>F;F+=1)E[F]=0;var H=8*(this||Sh)._length;H=H.toString(16).match(/(.*?)(.{0,8})$/);F=parseInt(H[2],16);H=parseInt(H[1],16)||0;E[14]=F;E[15]=H;d((this||Sh)._hash,E)};y.hash=function(E,F){return y.hashBinary(r(E),F)};y.hashBinary=function(E,F){E=f(E);E=l(E);return F?
v(E):E};y.ArrayBuffer=function(){this.reset()};y.ArrayBuffer.prototype.append=function(E){var F=(this||Sh)._buff.buffer,H=new Uint8Array(F.byteLength+E.byteLength);H.set(new Uint8Array(F));H.set(new Uint8Array(E),F.byteLength);F=H.length;(this||Sh)._length+=E.byteLength;for(E=64;E<=F;E+=64)d((this||Sh)._hash,a(H.subarray(E-64,E)));(this||Sh)._buff=E-64<F?new Uint8Array(H.buffer.slice(E-64)):new Uint8Array(0);return this||Sh};y.ArrayBuffer.prototype.end=function(E){var F=(this||Sh)._buff,H=F.length,
J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O;for(O=0;O<H;O+=1)J[O>>2]|=F[O]<<(O%4<<3);this._finish(J,H);F=l((this||Sh)._hash);E&&(F=v(F));this.reset();return F};y.ArrayBuffer.prototype.reset=function(){(this||Sh)._buff=new Uint8Array(0);(this||Sh)._length=0;(this||Sh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Sh};y.ArrayBuffer.prototype.getState=function(){var E=y.prototype.getState.call(this||Sh);E.buff=String.fromCharCode.apply(null,new Uint8Array(E.buff));return E};y.ArrayBuffer.prototype.setState=
function(E){var F=E.buff,H=F.length,J=new ArrayBuffer(H);J=new Uint8Array(J);var O;for(O=0;O<H;O+=1)J[O]=F.charCodeAt(O);E.buff=J;return y.prototype.setState.call(this||Sh,E)};y.ArrayBuffer.prototype.destroy=y.prototype.destroy;y.ArrayBuffer.prototype._finish=y.prototype._finish;y.ArrayBuffer.hash=function(E,F){var H=new Uint8Array(E),J=H.length;E=[1732584193,-271733879,-1732584194,271733878];var O;for(O=64;O<=J;O+=64)d(E,a(H.subarray(O-64,O)));H=O-64<J?H.subarray(O-64):new Uint8Array(0);var L=H.length;
var Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(O=0;O<L;O+=1)Y[O>>2]|=H[O]<<(O%4<<3);Y[O>>2]|=128<<(O%4<<3);if(55<O)for(d(E,Y),O=0;16>O;O+=1)Y[O]=0;J=(8*J).toString(16).match(/(.*?)(.{0,8})$/);H=parseInt(J[2],16);J=parseInt(J[1],16)||0;Y[14]=H;Y[15]=J;d(E,Y);E=l(E);return F?v(E):E};return y}(),gF={};Object.defineProperty(gF,"__esModule",{value:!0});var v5=ro,PX=EI&&"object"===typeof EI&&"default"in EI?EI["default"]:EI,cta=self.setImmediate||self.setTimeout;gF.binaryMd5=function(b,d){function k(){cta(f)}
function a(){var H=E.end(!0);H=v5.btoa(H);d(H);E.destroy()}function f(){var H=A*v,J=H+v;A++;A<y?F(E,b,H,J,k):F(E,b,H,J,a)}var l="string"===typeof b,r=l?b.length:b.size,v=Math.min(32768,r),y=Math.ceil(r/v),A=0,E=l?new PX:new PX.ArrayBuffer,F=l?Eja:Dja;f()};gF.stringMd5=function(b){return PX.hash(b)};var ph={};Object.defineProperty(ph,"__esModule",{value:!0});var QT=lM(aX),dta=lM(il),Saa=lM(Cj),nM=lM(ov),w5=Function.prototype.toString,Fja=w5.call(Object);try{localStorage.setItem("_pouch_check_localstorage",
1);var mM=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){mM=!1}dta(jE,nM);jE.prototype.addListener=function(b,d,k,a){function f(){if(l._listeners[d])if(r)r="waiting";else{r=!0;var v=RT(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));k.changes(v).on("change",function(y){y.seq>a.since&&!a.cancelled&&(a.since=y.seq,a.onChange(y))}).on("complete",function(){"waiting"===r&&Saa(f);r=!1}).on("error",function(){r=!1})}}if(!this._listeners[d]){var l=
this,r=!1;this._listeners[d]=f;this.on(b,f)}};jE.prototype.removeListener=function(b,d){d in this._listeners&&(nM.prototype.removeListener.call(this,b,this._listeners[d]),delete this._listeners[d])};jE.prototype.notifyLocalWindows=function(b){mM&&(localStorage[b]="a"===localStorage[b]?"b":"a")};jE.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var eta="function"===typeof Object.assign?Object.assign:function(b){for(var d=Object(b),k=1;k<arguments.length;k++){var a=arguments[k];
if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(d[f]=a[f])}return d},fta=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},Taa="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),gta=/(?:^|&)([^&=]*)=?([^&]*)/g,hta=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
ita=nC.v4;ph.adapterFun=function(b,d){return y5(QT(function(k){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;Gja(a,b,k);return this.taskqueue.isReady?d.apply(this,k):new Promise(function(f,l){a.taskqueue.addTask(function(r){r?l(r):f(a[b].apply(a,k))})})}))};ph.assign=eta;ph.bulkGetShim=function(b,d,k){function a(){var J=[];E.forEach(function(O){O.docs.forEach(function(L){J.push({id:O.id,docs:[L]})})});
k(null,{results:J})}function f(){if(!(H>=F.length)){var J=F.slice(H,Math.min(H+6,F.length));l(J,H);H+=J.length}}function l(J,O){J.forEach(function(L,Y){var S=O+Y;Y=v.get(L);var ea=RT(Y[0],["atts_since","attachments"]);ea.open_revs=Y.map(function(Fa){return Fa.rev});ea.open_revs=ea.open_revs.filter(z5);var qa=z5;0===ea.open_revs.length&&(delete ea.open_revs,qa=Hja);["revs","attachments","binary","ajax","latest"].forEach(function(Fa){Fa in d&&(ea[Fa]=d[Fa])});b.get(L,ea,function(Fa,K){Fa=Fa?[{error:Fa}]:
qa(K);E[S]={id:L,docs:Fa};++A===y&&a();f()})})}var r=d.docs,v=new Lz.Map;r.forEach(function(J){v.has(J.id)?v.get(J.id).push(J):v.set(J.id,[J])});var y=v.size,A=0,E=Array(y),F=[];v.forEach(function(J,O){F.push(O)});var H=0;f()};ph.changesHandler=jE;ph.clone=hH;ph.defaultBackOff=function(b){var d=0;b||(d=2E3);b=parseInt(b,10)||0;d=parseInt(d,10);d=d!==d||d<=b?(b||1)<<1:d+1;6E5<d&&(b=3E5,d=6E5);return~~((d-b)*Math.random()+b)};ph.explainError=function(b,d){ST("info","The above "+b+" is totally normal. "+
d)};ph.filterChange=function(b){var d={},k=b.filter&&"function"===typeof b.filter;d.query=b.query_params;return function(a){a.doc||(a.doc={});var f;if(f=k)try{f=!(0,b.filter)(a.doc,d)}catch(r){f=Fg.createError(Fg.BAD_REQUEST,"Filter function threw: "+r.toString())}if("object"===typeof f)return f;if(f)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var l in a.doc._attachments)a.doc._attachments.hasOwnProperty(l)&&(a.doc._attachments[l].stub=!0);return!0}};ph.flatten=function(b){for(var d=
[],k=0,a=b.length;k<a;k++)d=d.concat(b[k]);return d};ph.functionName=fta;ph.guardedConsole=ST;ph.hasLocalStorage=function(){return mM};ph.invalidIdError=function(b){var d;b?"string"!==typeof b?d=Fg.createError(Fg.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(d=Fg.createError(Fg.RESERVED_ID)):d=Fg.createError(Fg.MISSING_ID);if(d)throw d;};ph.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(ST("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};ph.listenerCount=function(b,d){return"listenerCount"in b?b.listenerCount(d):nM.listenerCount(b,d)};ph.nextTick=Saa;ph.normalizeDdocFunctionName=function(b){return(b=A5(b))?b.join("/"):null};ph.once=x5;ph.parseDdocFunctionName=A5;ph.parseUri=function(b){b=hta.exec(b);for(var d={},k=14;k--;){var a=Taa[k],f=b[k]||"",l=-1!==["user","password"].indexOf(a);d[a]=l?decodeURIComponent(f):f}d.queryKey={};d[Taa[12]].replace(gta,function(r,v,y){v&&(d.queryKey[v]=y)});return d};ph.pick=
RT;ph.rev=function(b,d){b=hH(b);if(!d)return nC.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return gF.stringMd5(JSON.stringify(b))};ph.scopeEval=function(b,d){var k=[],a=[],f;for(f in d)d.hasOwnProperty(f)&&(k.push(f),a.push(d[f]));k.push(b);return Function.apply(null,k).apply(null,a)};ph.toPromise=y5;ph.upsert=B5;ph.uuid=ita;var Uaa={};Uaa=function(){for(var b={},d=0;d<arguments.length;d++){var k=arguments[d],a;for(a in k)jta.call(k,a)&&(b[a]=k[a])}return b};var jta=Object.prototype.hasOwnProperty,
Sz=Uaa,Vaa={};Vaa=function(b){for(var d=1;d<arguments.length;d++){var k=arguments[d],a;for(a in k)kta.call(k,a)&&(b[a]=k[a])}return b};for(var kta=Object.prototype.hasOwnProperty,lta={},mta=Vaa,Waa=lta=function(){var b=Sz.apply(null,arguments);return mta(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:Sz(b.additionalMethods)})},vv=[],Es=[],nta="undefined"!==typeof Uint8Array?Uint8Array:Array,hF=0;64>hF;++hF)vv[hF]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[hF],Es["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(hF)]=hF;Es[45]=62;Es[95]=63;var oM={byteLength:function(b){b=C5(b);var d=b[1];return 3*(b[0]+d)/4-d},toByteArray:function(b){var d=C5(b);var k=
d[0];d=d[1];var a=new nta(3*(k+d)/4-d),f=0,l=0<d?k-4:k,r;for(r=0;r<l;r+=4)k=Es[b.charCodeAt(r)]<<18|Es[b.charCodeAt(r+1)]<<12|Es[b.charCodeAt(r+2)]<<6|Es[b.charCodeAt(r+3)],a[f++]=k>>16&255,a[f++]=k>>8&255,a[f++]=k&255;2===d&&(k=Es[b.charCodeAt(r)]<<2|Es[b.charCodeAt(r+1)]>>4,a[f++]=k&255);1===d&&(k=Es[b.charCodeAt(r)]<<10|Es[b.charCodeAt(r+1)]<<4|Es[b.charCodeAt(r+2)]>>2,a[f++]=k>>8&255,a[f++]=k&255);return a},fromByteArray:function(b){for(var d=b.length,k=d%3,a=[],f=0,l=d-k;f<l;f+=16383)a.push(Kja(b,
f,f+16383>l?l:f+16383));1===k?(b=b[d-1],a.push(vv[b>>2]+vv[b<<4&63]+"==")):2===k&&(b=(b[d-2]<<8)+b[d-1],a.push(vv[b>>10]+vv[b>>4&63]+vv[b<<2&63]+"="));return a.join("")}},kE={read:function(b,d,k,a,f){var l=8*f-a-1;var r=(1<<l)-1,v=r>>1,y=-7;f=k?f-1:0;var A=k?-1:1,E=b[d+f];f+=A;k=E&(1<<-y)-1;E>>=-y;for(y+=l;0<y;k=256*k+b[d+f],f+=A,y-=8);l=k&(1<<-y)-1;k>>=-y;for(y+=a;0<y;l=256*l+b[d+f],f+=A,y-=8);if(0===k)k=1-v;else{if(k===r)return l?NaN:Infinity*(E?-1:1);l+=Math.pow(2,a);k-=v}return(E?-1:1)*l*Math.pow(2,
k-a)},write:function(b,d,k,a,f,l){var r,v=8*l-f-1,y=(1<<v)-1,A=y>>1,E=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;var F=a?1:-1,H=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,a=y):(a=Math.floor(Math.log(d)/Math.LN2),1>d*(r=Math.pow(2,-a))&&(a--,r*=2),d=1<=a+A?d+E/r:d+E*Math.pow(2,1-A),2<=d*r&&(a++,r/=2),a+A>=y?(d=0,a=y):1<=a+A?(d=(d*r-1)*Math.pow(2,f),a+=A):(d=d*Math.pow(2,A-1)*Math.pow(2,f),a=0));for(;8<=f;b[k+l]=d&255,l+=F,d/=256,f-=8);a=a<<f|d;for(v+=f;0<v;b[k+
l]=a&255,l+=F,a/=256,v-=8);b[k+l-F]|=128*H}},Xaa="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var Yaa=xe;var TT=2147483647;xe.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),d={foo:function(){return 42}};Object.setPrototypeOf(d,Uint8Array.prototype);Object.setPrototypeOf(b,d);return 42===b.foo()}catch(k){return!1}}();xe.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(xe.prototype,"parent",{enumerable:!0,get:function(){if(xe.isBuffer(this))return this.buffer}});Object.defineProperty(xe.prototype,"offset",{enumerable:!0,get:function(){if(xe.isBuffer(this))return this.byteOffset}});xe.poolSize=8192;xe.from=function(b,d,k){return D5(b,d,k)};Object.setPrototypeOf(xe.prototype,Uint8Array.prototype);Object.setPrototypeOf(xe,Uint8Array);xe.alloc=function(b,d,k){G5(b);b=0>=b?mx(b):void 0!==d?"string"===typeof k?mx(b).fill(d,k):mx(b).fill(d):mx(b);
return b};xe.allocUnsafe=function(b){return UT(b)};xe.allocUnsafeSlow=function(b){return UT(b)};xe.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==xe.prototype};xe.compare=function(b,d){wv(b,Uint8Array)&&(b=xe.from(b,b.offset,b.byteLength));wv(d,Uint8Array)&&(d=xe.from(d,d.offset,d.byteLength));if(!xe.isBuffer(b)||!xe.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===d)return 0;for(var k=b.length,a=d.length,f=0,l=Math.min(k,
a);f<l;++f)if(b[f]!==d[f]){k=b[f];a=d[f];break}return k<a?-1:a<k?1:0};xe.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};xe.concat=function(b,d){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return xe.alloc(0);var k;if(void 0===d)for(k=d=0;k<b.length;++k)d+=b[k].length;
d=xe.allocUnsafe(d);var a=0;for(k=0;k<b.length;++k){var f=b[k];if(wv(f,Uint8Array))a+f.length>d.length?xe.from(f).copy(d,a):Uint8Array.prototype.set.call(d,f,a);else if(xe.isBuffer(f))f.copy(d,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=f.length}return d};xe.byteLength=E5;xe.prototype._isBuffer=!0;xe.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<b;d+=2)AB(this,d,d+1);return this};
xe.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<b;d+=4)AB(this,d,d+3),AB(this,d+1,d+2);return this};xe.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<b;d+=8)AB(this,d,d+7),AB(this,d+1,d+6),AB(this,d+2,d+5),AB(this,d+3,d+4);return this};xe.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?
I5(this,0,b):Mja.apply(this,arguments)};xe.prototype.toLocaleString=xe.prototype.toString;xe.prototype.equals=function(b){if(!xe.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===xe.compare(this,b)};xe.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};Xaa&&(xe.prototype[Xaa]=xe.prototype.inspect);xe.prototype.compare=function(b,d,k,a,f){wv(b,Uint8Array)&&(b=xe.from(b,b.offset,
b.byteLength));if(!xe.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===d&&(d=0);void 0===k&&(k=b?b.length:0);void 0===a&&(a=0);void 0===f&&(f=this.length);if(0>d||k>b.length||0>a||f>this.length)throw new RangeError("out of range index");if(a>=f&&d>=k)return 0;if(a>=f)return-1;if(d>=k)return 1;d>>>=0;k>>>=0;a>>>=0;f>>>=0;if(this===b)return 0;var l=f-a,r=k-d,v=Math.min(l,r);a=this.slice(a,f);b=b.slice(d,k);for(d=0;d<
v;++d)if(a[d]!==b[d]){l=a[d];r=b[d];break}return l<r?-1:r<l?1:0};xe.prototype.includes=function(b,d,k){return-1!==this.indexOf(b,d,k)};xe.prototype.indexOf=function(b,d,k){return J5(this,b,d,k,!0)};xe.prototype.lastIndexOf=function(b,d,k){return J5(this,b,d,k,!1)};xe.prototype.write=function(b,d,k,a){if(void 0===d)a="utf8",k=this.length,d=0;else if(void 0===k&&"string"===typeof d)a=d,k=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(k)?(k>>>=0,void 0===a&&(a="utf8")):(a=k,k=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var f=this.length-d;if(void 0===k||k>f)k=f;if(0<b.length&&(0>k||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(f=!1;;)switch(a){case "hex":a:{d=Number(d)||0;a=this.length-d;k?(k=Number(k),k>a&&(k=a)):k=a;a=b.length;k>a/2&&(k=a/2);for(a=0;a<k;++a){f=parseInt(b.substr(2*a,2),16);if(f!==f){b=a;break a}this[d+a]=f}b=a}return b;case "utf8":case "utf-8":return pM(XT(b,this.length-d),this,d,k);case "ascii":case "latin1":case "binary":a=[];for(f=0;f<b.length;++f)a.push(b.charCodeAt(f)&
255);return pM(a,this,d,k);case "base64":return pM(oM.toByteArray(H5(b)),this,d,k);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=b;f=this.length-d;for(var l=[],r=0;r<a.length&&!(0>(f-=2));++r){var v=a.charCodeAt(r);b=v>>8;v%=256;l.push(v);l.push(b)}return pM(l,this,d,k);default:if(f)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();f=!0}};xe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L5=4096;xe.prototype.slice=
function(b,d){var k=this.length;b=~~b;d=void 0===d?k:~~d;0>b?(b+=k,0>b&&(b=0)):b>k&&(b=k);0>d?(d+=k,0>d&&(d=0)):d>k&&(d=k);d<b&&(d=b);b=this.subarray(b,d);Object.setPrototypeOf(b,xe.prototype);return b};xe.prototype.readUintLE=xe.prototype.readUIntLE=function(b,d,k){b>>>=0;d>>>=0;k||In(b,d,this.length);k=this[b];for(var a=1,f=0;++f<d&&(a*=256);)k+=this[b+f]*a;return k};xe.prototype.readUintBE=xe.prototype.readUIntBE=function(b,d,k){b>>>=0;d>>>=0;k||In(b,d,this.length);k=this[b+--d];for(var a=1;0<
d&&(a*=256);)k+=this[b+--d]*a;return k};xe.prototype.readUint8=xe.prototype.readUInt8=function(b,d){b>>>=0;d||In(b,1,this.length);return this[b]};xe.prototype.readUint16LE=xe.prototype.readUInt16LE=function(b,d){b>>>=0;d||In(b,2,this.length);return this[b]|this[b+1]<<8};xe.prototype.readUint16BE=xe.prototype.readUInt16BE=function(b,d){b>>>=0;d||In(b,2,this.length);return this[b]<<8|this[b+1]};xe.prototype.readUint32LE=xe.prototype.readUInt32LE=function(b,d){b>>>=0;d||In(b,4,this.length);return(this[b]|
this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};xe.prototype.readUint32BE=xe.prototype.readUInt32BE=function(b,d){b>>>=0;d||In(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};xe.prototype.readIntLE=function(b,d,k){b>>>=0;d>>>=0;k||In(b,d,this.length);k=this[b];for(var a=1,f=0;++f<d&&(a*=256);)k+=this[b+f]*a;k>=128*a&&(k-=Math.pow(2,8*d));return k};xe.prototype.readIntBE=function(b,d,k){b>>>=0;d>>>=0;k||In(b,d,this.length);k=d;for(var a=1,f=this[b+--k];0<k&&(a*=256);)f+=
this[b+--k]*a;f>=128*a&&(f-=Math.pow(2,8*d));return f};xe.prototype.readInt8=function(b,d){b>>>=0;d||In(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};xe.prototype.readInt16LE=function(b,d){b>>>=0;d||In(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};xe.prototype.readInt16BE=function(b,d){b>>>=0;d||In(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};xe.prototype.readInt32LE=function(b,d){b>>>=0;d||In(b,4,this.length);return this[b]|this[b+
1]<<8|this[b+2]<<16|this[b+3]<<24};xe.prototype.readInt32BE=function(b,d){b>>>=0;d||In(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};xe.prototype.readFloatLE=function(b,d){b>>>=0;d||In(b,4,this.length);return kE.read(this,b,!0,23,4)};xe.prototype.readFloatBE=function(b,d){b>>>=0;d||In(b,4,this.length);return kE.read(this,b,!1,23,4)};xe.prototype.readDoubleLE=function(b,d){b>>>=0;d||In(b,8,this.length);return kE.read(this,b,!0,52,8)};xe.prototype.readDoubleBE=function(b,
d){b>>>=0;d||In(b,8,this.length);return kE.read(this,b,!1,52,8)};xe.prototype.writeUintLE=xe.prototype.writeUIntLE=function(b,d,k,a){b=+b;d>>>=0;k>>>=0;a||fq(this,b,d,k,Math.pow(2,8*k)-1,0);a=1;var f=0;for(this[d]=b&255;++f<k&&(a*=256);)this[d+f]=b/a&255;return d+k};xe.prototype.writeUintBE=xe.prototype.writeUIntBE=function(b,d,k,a){b=+b;d>>>=0;k>>>=0;a||fq(this,b,d,k,Math.pow(2,8*k)-1,0);a=k-1;var f=1;for(this[d+a]=b&255;0<=--a&&(f*=256);)this[d+a]=b/f&255;return d+k};xe.prototype.writeUint8=xe.prototype.writeUInt8=
function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,1,255,0);this[d]=b&255;return d+1};xe.prototype.writeUint16LE=xe.prototype.writeUInt16LE=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,2,65535,0);this[d]=b&255;this[d+1]=b>>>8;return d+2};xe.prototype.writeUint16BE=xe.prototype.writeUInt16BE=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,2,65535,0);this[d]=b>>>8;this[d+1]=b&255;return d+2};xe.prototype.writeUint32LE=xe.prototype.writeUInt32LE=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,4,4294967295,0);this[d+3]=
b>>>24;this[d+2]=b>>>16;this[d+1]=b>>>8;this[d]=b&255;return d+4};xe.prototype.writeUint32BE=xe.prototype.writeUInt32BE=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,4,4294967295,0);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};xe.prototype.writeIntLE=function(b,d,k,a){b=+b;d>>>=0;a||(a=Math.pow(2,8*k-1),fq(this,b,d,k,a-1,-a));a=0;var f=1,l=0;for(this[d]=b&255;++a<k&&(f*=256);)0>b&&0===l&&0!==this[d+a-1]&&(l=1),this[d+a]=(b/f>>0)-l&255;return d+k};xe.prototype.writeIntBE=
function(b,d,k,a){b=+b;d>>>=0;a||(a=Math.pow(2,8*k-1),fq(this,b,d,k,a-1,-a));a=k-1;var f=1,l=0;for(this[d+a]=b&255;0<=--a&&(f*=256);)0>b&&0===l&&0!==this[d+a+1]&&(l=1),this[d+a]=(b/f>>0)-l&255;return d+k};xe.prototype.writeInt8=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,1,127,-128);0>b&&(b=255+b+1);this[d]=b&255;return d+1};xe.prototype.writeInt16LE=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,2,32767,-32768);this[d]=b&255;this[d+1]=b>>>8;return d+2};xe.prototype.writeInt16BE=function(b,d,k){b=+b;d>>>=
0;k||fq(this,b,d,2,32767,-32768);this[d]=b>>>8;this[d+1]=b&255;return d+2};xe.prototype.writeInt32LE=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,4,2147483647,-2147483648);this[d]=b&255;this[d+1]=b>>>8;this[d+2]=b>>>16;this[d+3]=b>>>24;return d+4};xe.prototype.writeInt32BE=function(b,d,k){b=+b;d>>>=0;k||fq(this,b,d,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};xe.prototype.writeFloatLE=function(b,d,k){return N5(this,b,d,
!0,k)};xe.prototype.writeFloatBE=function(b,d,k){return N5(this,b,d,!1,k)};xe.prototype.writeDoubleLE=function(b,d,k){return O5(this,b,d,!0,k)};xe.prototype.writeDoubleBE=function(b,d,k){return O5(this,b,d,!1,k)};xe.prototype.copy=function(b,d,k,a){if(!xe.isBuffer(b))throw new TypeError("argument should be a Buffer");k||(k=0);a||0===a||(a=this.length);d>=b.length&&(d=b.length);d||(d=0);0<a&&a<k&&(a=k);if(a===k||0===b.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");
if(0>k||k>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-d<a-k&&(a=b.length-d+k);var f=a-k;this===b&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(d,k,a):Uint8Array.prototype.set.call(b,this.subarray(k,a),d);return f};xe.prototype.fill=function(b,d,k,a){if("string"===typeof b){"string"===typeof d?(a=d,d=0,k=this.length):"string"===typeof k&&(a=k,k=this.length);if(void 0!==
a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!xe.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var f=b.charCodeAt(0);if("utf8"===a&&128>f||"latin1"===a)b=f}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>d||this.length<d||this.length<k)throw new RangeError("Out of range index");if(k<=d)return this;d>>>=0;k=void 0===k?this.length:k>>>0;b||(b=0);if("number"===typeof b)for(a=d;a<k;++a)this[a]=b;else{f=
xe.isBuffer(b)?b:xe.from(b,a);var l=f.length;if(0===l)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<k-d;++a)this[a+d]=f[a%l]}return this};var Oja=/[^+/0-9A-Za-z-_]/g,Nja=function(){for(var b=Array(256),d=0;16>d;++d)for(var k=16*d,a=0;16>a;++a)b[k+a]="0123456789abcdef"[d]+"0123456789abcdef"[a];return b}(),nx="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ota={};oz.prototype.next=function(b){var d=this||nx;if("function"!==typeof b)throw Error("next() requires a callback argument");
if(d._ended)return Cj(b,Error("cannot call next() after end()")),d;if(d._nexting)return Cj(b,Error("cannot call next() before previous next() has completed")),d;d._nexting=!0;d._next(function(){d._nexting=!1;b.apply(null,arguments)});return d};oz.prototype._next=function(b){Cj(b)};oz.prototype.seek=function(b){if((this||nx)._ended)throw Error("cannot call seek() after end()");if((this||nx)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||nx).db._serializeKey(b);this._seek(b)};
oz.prototype._seek=function(b){};oz.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||nx)._ended)return Cj(b,Error("end() already called on iterator"));(this||nx)._ended=!0;this._end(b)};oz.prototype._end=function(b){Cj(b)};oz.prototype._nextTick=Cj;var Zaa=ota=oz,en="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pta={};At.prototype._checkWritten=function(){if((this||en)._written)throw Error("write() already called on this batch");
};At.prototype.put=function(b,d){this._checkWritten();var k=(this||en).db._checkKey(b)||(this||en).db._checkValue(d);if(k)throw k;b=(this||en).db._serializeKey(b);d=(this||en).db._serializeValue(d);this._put(b,d);return this||en};At.prototype._put=function(b,d){(this||en)._operations.push({type:"put",key:b,value:d})};At.prototype.del=function(b){this._checkWritten();var d=(this||en).db._checkKey(b);if(d)throw d;b=(this||en).db._serializeKey(b);this._del(b);return this||en};At.prototype._del=function(b){(this||
en)._operations.push({type:"del",key:b})};At.prototype.clear=function(){this._checkWritten();this._clear();return this||en};At.prototype._clear=function(){(this||en)._operations=[]};At.prototype.write=function(b,d){this._checkWritten();"function"===typeof b&&(d=b);if("function"!==typeof d)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||en)._written=!0;this._write(b,d)};At.prototype._write=function(b,d){(this||en).db._batch((this||en)._operations,b,
d)};At.prototype._nextTick=Cj;var qta=pta=At,cr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$aa={},Pja=Waa,Qja=Object.prototype.hasOwnProperty,Rja="start end gt gte lt lte".split(" ");pl.prototype.open=function(b,d){var k=this||cr,a=(this||cr).status;"function"===typeof b&&(d=b);if("function"!==typeof d)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;
(this||cr).status="opening";this._open(b,function(f){if(f)return k.status=a,d(f);k.status="open";d()})};pl.prototype._open=function(b,d){Cj(d)};pl.prototype.close=function(b){var d=this||cr,k=(this||cr).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||cr).status="closing";this._close(function(a){if(a)return d.status=k,b(a);d.status="closed";b()})};pl.prototype._close=function(b){Cj(b)};pl.prototype.get=function(b,d,k){"function"===typeof d&&(k=d);if("function"!==
typeof k)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return Cj(k,a);b=this._serializeKey(b);if("object"!==typeof d||null===d)d={};d.asBuffer=!1!==d.asBuffer;this._get(b,d,k)};pl.prototype._get=function(b,d,k){Cj(function(){k(Error("NotFound"))})};pl.prototype.put=function(b,d,k,a){"function"===typeof k&&(a=k);if("function"!==typeof a)throw Error("put() requires a callback argument");var f=this._checkKey(b)||this._checkValue(d);if(f)return Cj(a,f);b=this._serializeKey(b);
d=this._serializeValue(d);if("object"!==typeof k||null===k)k={};this._put(b,d,k,a)};pl.prototype._put=function(b,d,k,a){Cj(a)};pl.prototype.del=function(b,d,k){"function"===typeof d&&(k=d);if("function"!==typeof k)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return Cj(k,a);b=this._serializeKey(b);if("object"!==typeof d||null===d)d={};this._del(b,d,k)};pl.prototype._del=function(b,d,k){Cj(k)};pl.prototype.batch=function(b,d,k){if(!arguments.length)return this._chainedBatch();
"function"===typeof d&&(k=d);"function"===typeof b&&(k=b);if("function"!==typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return Cj(k,Error("batch(array) requires an array argument"));if(0===b.length)return Cj(k);if("object"!==typeof d||null===d)d={};for(var a=Array(b.length),f=0;f<b.length;f++){if("object"!==typeof b[f]||null===b[f])return Cj(k,Error("batch(array) element must be an object and not `null`"));var l=Sz(b[f]);if("put"!==l.type&&"del"!==l.type)return Cj(k,
Error("`type` must be 'put' or 'del'"));var r=this._checkKey(l.key);if(r)return Cj(k,r);l.key=this._serializeKey(l.key);if("put"===l.type){if(r=this._checkValue(l.value))return Cj(k,r);l.value=this._serializeValue(l.value)}a[f]=l}this._batch(a,d,k)};pl.prototype._batch=function(b,d,k){Cj(k)};pl.prototype.clear=function(b,d){if("function"===typeof b)d=b;else if("function"!==typeof d)throw Error("clear() requires a callback argument");b=P5(this||cr,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:
-1;this._clear(b,d)};pl.prototype._clear=function(b,d){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var k=this._iterator(b),a={},f=this||cr,l=function(r){if(r)return k.end(function(){d(r)});k.next(function(v,y){if(v)return l(v);if(void 0===y)return k.end(d);f._del(y,a,l)})};l()};pl.prototype._setupIteratorOptions=function(b){b=P5(this||cr,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=
!1!==b.valueAsBuffer;return b};pl.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};pl.prototype._iterator=function(b){return new Zaa(this||cr)};pl.prototype._chainedBatch=function(){return new qta(this||cr)};pl.prototype._serializeKey=function(b){return b};pl.prototype._serializeValue=function(b){return b};pl.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");if(Yaa.isBuffer(b)&&
0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};pl.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};pl.prototype._nextTick=Cj;$aa=pl;var rta=$aa;var Bt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aba={},Q5=Zaa;il(lE,Q5);lE.prototype.setDb=function(b){var d=
(this||Bt)._iterator=b.iterator((this||Bt)._options);(this||Bt)._operations.forEach(function(k){d[k.method].apply(d,k.args)})};lE.prototype._operation=function(b,d){if((this||Bt)._iterator)return(this||Bt)._iterator[b].apply((this||Bt)._iterator,d);(this||Bt)._operations.push({method:b,args:d})};["next","end"].forEach(function(b){lE.prototype["_"+b]=function(){this._operation(b,arguments)}});lE.prototype.seek=function(){this._operation("seek",arguments)};aba=lE;var Jn="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,QX={},R5=rta,U5=aba,T5=["put","get","del","batch","clear"],Sja=["approximateSize","compactRange"];il(BB,R5);BB.prototype.type="deferred-leveldown";BB.prototype._open=function(b,d){var k=this||Jn;(this||Jn)._db.open(b,function(a){if(a)return d(a);k._operations.forEach(function(f){f.iterator?f.iterator.setDb(k._db):k._db[f.method].apply(k._db,f.args)});k._operations=[];Tja(k);d()})};BB.prototype._close=function(b){var d=this||Jn;(this||Jn)._db.close(function(k){if(k)return b(k);
S5(d);b()})};BB.prototype._serializeKey=function(b){return b};BB.prototype._serializeValue=function(b){return b};QX=BB;QX.DeferredIterator=U5;var sta=QX,X5={},W5=!1,YT={},Y5=!1,$T="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tta={},eka=tta=function(b,d){if(ZT("noDeprecation"))return b;var k=!1;return function(){if(!k){if(ZT("throwDeprecation"))throw Error(d);ZT("traceDeprecation")?console.trace(d):console.warn(d);k=!0}return b.apply(this||$T,arguments)}},eP={},
fP=ei,xv=fP.Buffer;xv.from&&xv.alloc&&xv.allocUnsafe&&xv.allocUnsafeSlow?eP=fP:(Z5(fP,eP),eP.Buffer=CB);CB.prototype=Object.create(xv.prototype);Z5(xv,CB);CB.from=function(b,d,k){if("number"===typeof b)throw new TypeError("Argument must not be a number");return xv(b,d,k)};CB.alloc=function(b,d,k){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=xv(b);void 0!==d?"string"===typeof k?b.fill(d,k):b.fill(d):b.fill(0);return b};CB.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return xv(b)};CB.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return fP.SlowBuffer(b)};var fU={},aU=eP.Buffer,$5=aU.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};fU.StringDecoder=iH;iH.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var d=
this.fillLast(b);if(void 0===d)return"";var k=this.lastNeed;this.lastNeed=0}else k=0;return k<b.length?d?d+this.text(b,k):this.text(b,k):d||""};iH.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};iH.prototype.text=function(b,d){var k=bka(this,b,d);if(!this.lastNeed)return b.toString("utf8",d);this.lastTotal=k;k=b.length-(k-this.lastNeed);b.copy(this.lastChar,0,k);return b.toString("utf8",d,k)};iH.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var b6={},a6=!1,d6={},c6=!1,g6=Object.freeze({}),f6={},e6=!1,j6={},i6=!1,m6={},l6=!1,dU={},o6=!1,fka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eU={},p6=!1,s6={},r6=!1,gU={},t6=!1,hka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hU={},v6=!1,
RX={},bba=!1,cba={},dba=!1,pr={},eba=!1;eba||(eba=!0,pr=pr=q6(),pr.Stream=pr,pr.Readable=pr,pr.Writable=n6(),pr.Duplex=nE(),pr.Transform=u6(),pr.PassThrough=function(){function b(k){if(!(this instanceof b))return new b(k);d.call(this,k)}if(bba)return RX;bba=!0;RX=b;var d=u6();il(b,d);b.prototype._transform=function(k,a,f){f(null,k)};return RX}(),pr.finished=cU(),pr.pipeline=function(){function b(A){var E=!1;return function(){E||(E=!0,A.apply(void 0,arguments))}}function d(A){if(A)throw A;}function k(A,
E,F,H){H=b(H);var J=!1;A.on("close",function(){J=!0});void 0===l&&(l=cU());l(A,{readable:E,writable:F},function(L){if(L)return H(L);J=!0;H()});var O=!1;return function(L){if(!J&&!O){O=!0;if(A.setHeader&&"function"===typeof A.abort)return A.abort();if("function"===typeof A.destroy)return A.destroy();H(L||new y("pipe"))}}}function a(A){A()}function f(A,E){return A.pipe(E)}if(dba)return cba;dba=!0;var l,r=mE().codes,v=r.ERR_MISSING_ARGS,y=r.ERR_STREAM_DESTROYED;return cba=function(){for(var A=arguments.length,
E=Array(A),F=0;F<A;F++)E[F]=arguments[F];var H=E.length?"function"!==typeof E[E.length-1]?d:E.pop():d;Array.isArray(E[0])&&(E=E[0]);if(2>E.length)throw new v("streams");var J,O=E.map(function(L,Y){var S=Y<E.length-1;return k(L,S,0<Y,function(ea){J||(J=ea);ea&&O.forEach(a);S||(O.forEach(a),H(J))})});return E.reduce(f)}}());var fba=pr;var Ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gba={},uta=il,w6=fba.Readable,ika=Sz;gba=oE;uta(oE,w6);oE.prototype._read=function(){var b=
this||Ct,d=(this||Ct)._options;(this||Ct).destroyed||(this||Ct)._iterator.next(function(k,a,f){if(!b.destroyed){if(k)return b.destroy(k);void 0===a&&void 0===f?b.push(null):!1!==d.keys&&!1===d.values?b.push(a):!1===d.keys&&!1!==d.values?b.push(f):b.push({key:a,value:f})}})};oE.prototype._destroy=function(b,d){(this||Ct)._iterator.end(function(k){d(b||k)})};var vta=gba,gP={};(function(b,d,k){gP?gP=k():d[b]=k()})("prr",gP,function(){var b="function"==typeof Object.defineProperty?function(k,a,f){Object.defineProperty(k,
a,f);return k}:function(k,a,f){k[a]=f.value;return k},d=function(k,a){var f="object"==typeof a,l=!f&&"string"==typeof a,r=function(v){return f?!!a[v]:l?-1<a.indexOf(v[0]):!1};return{enumerable:r("enumerable"),configurable:r("configurable"),writable:r("writable"),value:k}};return function(k,a,f,l){var r;l=d(f,l);if("object"==typeof a){for(r in a)Object.hasOwnProperty.call(a,r)&&(l.value=a[r],b(k,r,l));return k}return b(k,a,l)}});var Am="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,wta={},jka=gP;iU.prototype=Error();var xta=wta=function(b){var d=function(k,a){return kka(b,k,a)};return{CustomError:iU,FilesystemError:d("FilesystemError"),createError:d}},Yv={},yta=Yv.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Yv.errno={};Yv.code={};yta.forEach(function(b){Yv.errno[b.errno]=b;Yv.code[b.code]=b});Yv.custom=xta(Yv);
Yv.create=Yv.custom.createError;var zta={},oC=Yv.create,pC=oC("LevelUPError"),SX=oC("NotFoundError",pC);SX.prototype.notFound=!0;SX.prototype.status=404;var qC=zta={LevelUPError:pC,InitializationError:oC("InitializationError",pC),OpenError:oC("OpenError",pC),ReadError:oC("ReadError",pC),WriteError:oC("WriteError",pC),NotFoundError:SX,EncodingError:oC("EncodingError",pC)},Ata={},Tz=Ata=function(){var b,d=new Promise(function(k,a){b=function(f,l){f?a(f):k(l)}});b.promise=d;return b};var iF=function(b,
d){return"function"===typeof b?b:d};var hba=function(b){return"object"===typeof b&&null!==b?b:{}};var Bm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bta={},FI=qC.WriteError;jH.prototype.put=function(b,d){try{(this||Bm).batch.put(b,d)}catch(k){throw new FI(k);}(this||Bm).ops.push({type:"put",key:b,value:d});(this||Bm).length++;return this||Bm};jH.prototype.del=function(b){try{(this||Bm).batch.del(b)}catch(d){throw new FI(d);}(this||Bm).ops.push({type:"del",key:b});
(this||Bm).length++;return this||Bm};jH.prototype.clear=function(){try{(this||Bm).batch.clear()}catch(b){throw new FI(b);}(this||Bm).ops=[];(this||Bm).length=0;return this||Bm};jH.prototype.write=function(b,d){var k=(this||Bm)._levelup,a=(this||Bm).ops;d=iF(b,d);if(!d){d=Tz();var f=d.promise}b=hba(b);try{(this||Bm).batch.write(b,function(l){if(l)return d(new FI(l));k.emit("batch",a);d()})}catch(l){throw new FI(l);}return f};var Cta=Bta=jH,wka={assign:y6,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:y6})}},iba=Object.prototype.toString,jba=function(b){var d=iba.call(b),k="[object Arguments]"===d;return k||(k="[object Array]"!==d&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===iba.call(b.callee)),k};if(!Object.keys){var hP=Object.prototype.hasOwnProperty,kba=Object.prototype.toString,lba=Object.prototype.propertyIsEnumerable,Dta=!lba.call({toString:null},"toString"),Eta=lba.call(function(){},
"prototype"),iP="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),TX=function(b){var d=b.constructor;return d&&d.prototype===b},Fta={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,
$webkitStorageInfo:!0,$window:!0},Gta=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!Fta["$"+b]&&hP.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{TX(window[b])}catch(d){return!0}}catch(d){return!0}return!1}();var Hta=function(b){var d=null!==b&&"object"==typeof b,k="[object Function]"===kba.call(b),a=jba(b),f=d&&"[object String]"===kba.call(b),l=[];if(!d&&!k&&!a)throw new TypeError("Object.keys called on a non-object");d=Eta&&k;if(f&&0<b.length&&!hP.call(b,
0))for(f=0;f<b.length;++f)l.push(String(f));if(a&&0<b.length)for(a=0;a<b.length;++a)l.push(String(a));else for(var r in b)d&&"prototype"===r||!hP.call(b,r)||l.push(String(r));if(Dta){if("undefined"!=typeof window&&Gta)try{var v=TX(b)}catch(y){v=!1}else v=TX(b);for(a=0;a<iP.length;++a)v&&"constructor"===iP[a]||!hP.call(b,iP[a])||l.push(iP[a])}return l}}var Ita=Hta,Jta=Array.prototype.slice,mba=Object.keys,jP=mba?function(b){return mba(b)}:Ita,nba=Object.keys;jP.shim=function(){Object.keys?function(){var b=
Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return jba(b)?nba(Jta.call(b)):nba(b)}):Object.keys=jP;return Object.keys||jP};var Kta="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Lta=Object.prototype.toString,Mta=Array.prototype.concat,UX=Object.defineProperty,oba=UX&&function(){var b={};try{for(var d in UX(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(k){return!1}}(),GI=function(b,d){var k=2<arguments.length?arguments[2]:
{},a=jP(d);Kta&&(a=Mta.call(a,Object.getOwnPropertySymbols(d)));for(var f=0;f<a.length;f+=1){var l=void 0,r=b,v=a[f],y=d[a[f]],A=k[a[f]];(!(v in r)||"function"==typeof(l=A)&&"[object Function]"===Lta.call(l)&&A())&&(oba?UX(r,v,{configurable:!0,enumerable:!1,value:y,writable:!0}):r[v]=y)}};GI.supportsDescriptors=!!oba;var pba=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,Nta=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;
if("symbol"==typeof Symbol.iterator)return!0;var b={},d=Symbol("test"),k=Object(d);if("string"==typeof d||"[object Symbol]"!==Object.prototype.toString.call(d)||"[object Symbol]"!==Object.prototype.toString.call(k))return!1;for(d in b[d]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;k=Object.getOwnPropertySymbols(b);return 1!==k.length||k[0]!==d||!Object.prototype.propertyIsEnumerable.call(b,
d)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,d),42!==b.value||!0!==b.enumerable)?!1:!0},VX=Array.prototype.slice,Ota=Object.prototype.toString,Pta=function(b){var d=this;if("function"!=typeof d||"[object Function]"!==Ota.call(d))throw new TypeError("Function.prototype.bind called on incompatible "+d);for(var k,a=VX.call(arguments,1),f=Math.max(0,d.length-a.length),l=[],r=0;r<f;r++)l.push("$"+r);if(k=Function("binder","return function ("+l.join(",")+
"){ return binder.apply(this,arguments); }")(function(){if(this instanceof k){var v=d.apply(this,a.concat(VX.call(arguments)));return Object(v)===v?v:this}return d.apply(b,a.concat(VX.call(arguments)))}),d.prototype)f=function(){},f.prototype=d.prototype,k.prototype=new f,f.prototype=null;return k},WX=Function.prototype.bind||Pta,HI=TypeError,rC=Object.getOwnPropertyDescriptor;if(rC)try{rC({},"")}catch(b){rC=null}var XX=function(){throw new HI;},Qta=rC?function(){try{return arguments.callee,XX}catch(b){try{return rC(arguments,
"callee").get}catch(d){return XX}}}():XX,sC="function"==typeof pba&&"function"==typeof Symbol&&"symbol"==typeof pba("foo")&&"symbol"==typeof Symbol("bar")&&Nta(),tC=Object.getPrototypeOf||function(b){return b.__proto__},YX="undefined"==typeof Uint8Array?void 0:tC(Uint8Array),ZX={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":sC?tC([][Symbol.iterator]()):
void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,
"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,
"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?
void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":sC?tC(tC([][Symbol.iterator]())):void 0,"%JSON%":"object"==
typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&sC?tC((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,
"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,
"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&sC?tC((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:
SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":sC?tC(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":sC?Symbol:void 0,"%SymbolPrototype%":sC?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Qta,"%TypedArray%":YX,"%TypedArrayPrototype%":YX?YX.prototype:void 0,"%TypeError%":HI,"%TypeErrorPrototype%":HI.prototype,
"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==
typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},qba=WX.call(Function.call,String.prototype.replace),Rta=
/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Sta=/\\(\\)?/g,Tta=function(b){var d=[];return qba(b,Rta,function(k,a,f,l){d[d.length]=f?qba(l,Sta,"$1"):a||k}),d},rba,sba=function(b,d){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof d)throw new TypeError('"allowMissing" argument must be a boolean');var k=Tta(b);var a="%"+(0<k.length?k[0]:"")+"%";if(!(a in
ZX))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===ZX[a]&&!d)throw new HI("intrinsic "+a+" exists, but is not available. Please file an issue!");a=ZX[a];for(var f=1;f<k.length;f+=1)if(null!=a)if(rC&&f+1>=k.length){var l=rC(a,k[f]);if(!(d||k[f]in a))throw new HI("base intrinsic for "+b+" exists, but the property is not available.");a=l?l.get||l.value:a[k[f]]}else a=a[k[f]];return a}("%Function%"),Uta=sba.apply,Vta=sba.call;(rba=function(){return WX.apply(Vta,arguments)}).apply=
function(){return WX.apply(Uta,arguments)};var $X,kP,Wta=($X=function(b,d){return 0===b&&0===d?1/b==1/d:b===d||!(b==b||d==d)},$X),Xta=(kP=function(){return"function"==typeof Object.is?Object.is:Wta},kP),tba=rba(kP(),Object);GI(tba,{getPolyfill:kP,implementation:$X,shim:function(){var b=Xta();return GI(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var U6=tba;var uba=function(b){return b!=b};var lP,Yta=uba,Zta=(lP=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:
Yta},GI),$ta=uba,vba=lP();GI(vba,{getPolyfill:lP,implementation:$ta,shim:function(){var b=lP();return Zta(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var jU={},A6=!1,C6={},B6=!1,nka=void 0!==/a/g.flags,vM=function(b){var d=[];return b.forEach(function(k){return d.push(k)}),d},R6=function(b){var d=[];return b.forEach(function(k,a){return d.push([a,k])}),d},F6=Object.is?Object.is:U6,rM=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},mU=Number.isNaN?
Number.isNaN:vba,lH=lU(Object.prototype.hasOwnProperty),uM=lU(Object.prototype.propertyIsEnumerable),G6=lU(Object.prototype.toString),yp=Oh.types,ska=yp.isAnyArrayBuffer,pka=yp.isArrayBufferView,H6=yp.isDate,sM=yp.isMap,I6=yp.isRegExp,tM=yp.isSet,oka=yp.isNativeError,tka=yp.isBoxedPrimitive,J6=yp.isNumberObject,K6=yp.isStringObject,L6=yp.isBooleanObject,M6=yp.isBigIntObject,uka=yp.isSymbolObject,qka=yp.isFloat32Array,rka=yp.isFloat64Array,S6={isDeepEqual:function(b,d){return ms(b,d,!1)},isDeepStrictEqual:function(b,
d){return ms(b,d,!0)}},nU={},T6=!1,aua=kU(),ti="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bua={},xM=bj,wM=ov.EventEmitter,cua=Oh.inherits,V6=sta,zka=Waa,yka=aua,pE=hba,mP=qC.WriteError,W6=qC.ReadError,dua=qC.NotFoundError,eua=qC.OpenError,xka=qC.InitializationError;Pk.prototype.emit=wM.prototype.emit;Pk.prototype.once=wM.prototype.once;cua(Pk,wM);Pk.prototype.open=function(b,d){var k=this||ti;"function"===typeof b&&(d=b,b=null);if(!d){d=Tz();var a=d.promise}b||
(b=(this||ti).options);if(this.isOpen())return xM.nextTick(d,null,k),a;if(this._isOpening())return this.once("open",function(){d(null,k)}),a;this.emit("opening");(this||ti).db.open(b,function(f){if(f)return d(new eua(f));k.db=k._db;d(null,k);k.emit("open");k.emit("ready")});return a};Pk.prototype.close=function(b){var d=this||ti;if(!b){b=Tz();var k=b.promise}if(this.isOpen())(this||ti).db.close(function(){d.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||ti).db=new V6((this||
ti)._db);else if(this.isClosed())xM.nextTick(b);else if("closing"===(this||ti).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){d.close(b)});return k};Pk.prototype.isOpen=function(){return"open"===(this||ti).db.status};Pk.prototype._isOpening=function(){return"opening"===(this||ti).db.status};Pk.prototype.isClosed=function(){return/^clos|new/.test((this||ti).db.status)};Pk.prototype.get=function(b,d,k){k=iF(d,k);if(!k){k=Tz();var a=k.promise}if(mH(this||ti,k))return a;
d=pE(d);(this||ti).db.get(b,d,function(f,l){if(f)return f=/notfound/i.test(f)||f.notFound?new dua("Key not found in database ["+b+"]",f):new W6(f),k(f);k(null,l)});return a};Pk.prototype.put=function(b,d,k,a){var f=this||ti;a=iF(k,a);if(!a){a=Tz();var l=a.promise}if(mH(this||ti,a))return l;k=pE(k);(this||ti).db.put(b,d,k,function(r){if(r)return a(new mP(r));f.emit("put",b,d);a()});return l};Pk.prototype.del=function(b,d,k){var a=this||ti;k=iF(d,k);if(!k){k=Tz();var f=k.promise}if(mH(this||ti,k))return f;
d=pE(d);(this||ti).db.del(b,d,function(l){if(l)return k(new mP(l));a.emit("del",b);k()});return f};Pk.prototype.batch=function(b,d,k){if(!arguments.length)return new Cta(this||ti);var a=this||ti;k="function"===typeof b?b:iF(d,k);if(!k){k=Tz();var f=k.promise}if(mH(this||ti,k))return f;d=pE(d);(this||ti).db.batch(b,d,function(l){if(l)return k(new mP(l));a.emit("batch",b);k()});return f};Pk.prototype.iterator=function(b){return(this||ti).db.iterator(b)};Pk.prototype.clear=function(b,d){var k=this||
ti;d=iF(b,d);b=pE(b);if(!d){d=Tz();var a=d.promise}if(mH(this||ti,d))return a;(this||ti).db.clear(b,function(f){if(f)return d(new mP(f));k.emit("clear",b);d()});return a};Pk.prototype.readStream=Pk.prototype.createReadStream=function(b){b=Sz({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new vta((this||ti).db.iterator(b),b)};Pk.prototype.keyStream=Pk.prototype.createKeyStream=function(b){return this.createReadStream(Sz(b,{keys:!0,values:!1}))};Pk.prototype.valueStream=Pk.prototype.createValueStream=
function(b){return this.createReadStream(Sz(b,{keys:!1,values:!0}))};Pk.prototype.toString=function(){return"LevelUP"};Pk.prototype.type="levelup";Pk.errors=qC;var fua=bua=Pk.default=Pk,Xl={},gua=ei.Buffer;Xl.compare=function(b,d){if(gua.isBuffer(b)){for(var k=Math.min(b.length,d.length),a=0;a<k;a++){var f=b[a]-d[a];if(f)return f}return b.length-d.length}return b<d?-1:b>d?1:0};var hua=Xl.lowerBoundKey=function(b){return yv(b,"gt")||yv(b,"gte")||yv(b,"min")||(b.reverse?yv(b,"end"):yv(b,"start"))||
void 0},aY=Xl.lowerBound=function(b,d){var k=hua(b);return k?b[k]:d},bY=Xl.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},cY=Xl.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},iua=Xl.lowerBoundExclusive=function(b){return!bY(b)},jua=Xl.upperBoundExclusive=function(b){return!cY(b)},kua=Xl.upperBoundKey=function(b){return yv(b,"lt")||yv(b,"lte")||yv(b,"max")||(b.reverse?yv(b,"start"):yv(b,"end"))||void 0},dY=Xl.upperBound=function(b,
d){var k=kua(b);return k?b[k]:d};Xl.start=function(b,d){return b.reverse?dY(b,d):aY(b,d)};Xl.end=function(b,d){return b.reverse?aY(b,d):dY(b,d)};Xl.startInclusive=function(b){return b.reverse?cY(b):bY(b)};Xl.endInclusive=function(b){return b.reverse?bY(b):cY(b)};Xl.toLtgt=function(b,d,k,a,f){d=d||{};k=k||Aka;var l=3<arguments.length,r=Xl.lowerBoundKey(b),v=Xl.upperBoundKey(b);r?"gt"===r?d.gt=k(b.gt,!1):d.gte=k(b[r],!1):l&&(d.gte=k(a,!1));v?"lt"===v?d.lt=k(b.lt,!0):d.lte=k(b[v],!0):l&&(d.lte=k(f,!0));
null!=b.reverse&&(d.reverse=!!b.reverse);Object.hasOwnProperty.call(d,"max")&&delete d.max;Object.hasOwnProperty.call(d,"min")&&delete d.min;Object.hasOwnProperty.call(d,"start")&&delete d.start;Object.hasOwnProperty.call(d,"end")&&delete d.end;return d};Xl.contains=function(b,d,k){k=k||Xl.compare;var a=aY(b);if(void 0!==a&&""!==a&&(a=k(d,a),0>a||0===a&&iua(b)))return!1;a=dY(b);return void 0!==a&&""!==a&&(a=k(d,a),0<a||0===a&&jua(b))?!1:!0};Xl.filter=function(b,d){return function(k){return Xl.contains(b,
k,d)}};var Gx={},pU=Yaa;Gx.utf8=Gx["utf-8"]={encode:function(b){return oU(b)?b:String(b)},decode:yM,buffer:!1,type:"utf8"};Gx.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Gx.binary={encode:function(b){return oU(b)?b:pU.from(b)},decode:yM,buffer:!0,type:"binary"};Gx.none={encode:yM,decode:yM,buffer:!1,type:"id"};Gx.id=Gx.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Gx[b]={encode:function(d){return oU(d)?d:pU.from(d,b)},decode:function(d){return d.toString(b)},
buffer:!0,type:b}});var ox="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wba={},qU=Gx;wba=rp;rp.prototype._encoding=function(b){"string"===typeof b&&(b=qU[b]);b||(b=qU.id);return b};rp.prototype._keyEncoding=function(b,d){return this._encoding(d&&d.keyEncoding||b&&b.keyEncoding||(this||ox).opts.keyEncoding)};rp.prototype._valueEncoding=function(b,d){return this._encoding(d&&(d.valueEncoding||d.encoding)||b&&(b.valueEncoding||b.encoding)||(this||ox).opts.valueEncoding||
(this||ox).opts.encoding)};rp.prototype.encodeKey=function(b,d,k){return this._keyEncoding(d,k).encode(b)};rp.prototype.encodeValue=function(b,d,k){return this._valueEncoding(d,k).encode(b)};rp.prototype.decodeKey=function(b,d){return this._keyEncoding(d).decode(b)};rp.prototype.decodeValue=function(b,d){return this._valueEncoding(d).decode(b)};rp.prototype.encodeBatch=function(b,d){var k=this||ox;return b.map(function(a){var f={type:a.type,key:k.encodeKey(a.key,d,a)};k.keyAsBuffer(d,a)&&(f.keyEncoding=
"binary");a.prefix&&(f.prefix=a.prefix);"value"in a&&(f.value=k.encodeValue(a.value,d,a),k.valueAsBuffer(d,a)&&(f.valueEncoding="binary"));return f})};var lua="lt gt lte gte start end".split(" ");rp.prototype.encodeLtgt=function(b){var d=this||ox,k={};Object.keys(b).forEach(function(a){k[a]=-1<lua.indexOf(a)?d.encodeKey(b[a],b):b[a]});return k};rp.prototype.createStreamDecoder=function(b){var d=this||ox;return b.keys&&b.values?function(k,a){return{key:d.decodeKey(k,b),value:d.decodeValue(a,b)}}:b.keys?
function(k){return d.decodeKey(k,b)}:b.values?function(k,a){return d.decodeValue(a,b)}:function(){}};rp.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};rp.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var mua=wba,nua={},Eka=nua=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},Cm={},oua=ei.Buffer;Cm.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};Cm.isBoolean=
function(b){return"boolean"===typeof b};Cm.isNull=function(b){return null===b};Cm.isNullOrUndefined=function(b){return null==b};Cm.isNumber=function(b){return"number"===typeof b};Cm.isString=function(b){return"string"===typeof b};Cm.isSymbol=function(b){return"symbol"===typeof b};Cm.isUndefined=function(b){return void 0===b};Cm.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};Cm.isObject=function(b){return"object"===typeof b&&null!==b};Cm.isDate=function(b){return"[object Date]"===
Object.prototype.toString.call(b)};Cm.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};Cm.isFunction=function(b){return"function"===typeof b};Cm.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};Cm.isBuffer=oua.isBuffer;var Dg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tU={},xba=ei.Buffer,pua=xba.isEncoding||function(b){switch(b&&
b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},eY=tU.StringDecoder=function(b){(this||Dg).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!pua(b))throw Error("Unknown encoding: "+b);switch((this||Dg).encoding){case "utf8":(this||Dg).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Dg).surrogateSize=2;(this||Dg).detectIncompleteChar=Cka;break;
case "base64":(this||Dg).surrogateSize=3;(this||Dg).detectIncompleteChar=Dka;break;default:(this||Dg).write=Bka;return}(this||Dg).charBuffer=new xba(6);(this||Dg).charReceived=0;(this||Dg).charLength=0};eY.prototype.write=function(b){for(var d="";(this||Dg).charLength;){d=b.length>=(this||Dg).charLength-(this||Dg).charReceived?(this||Dg).charLength-(this||Dg).charReceived:b.length;b.copy((this||Dg).charBuffer,(this||Dg).charReceived,0,d);(this||Dg).charReceived+=d;if((this||Dg).charReceived<(this||
Dg).charLength)return"";b=b.slice(d,b.length);d=(this||Dg).charBuffer.slice(0,(this||Dg).charLength).toString((this||Dg).encoding);var k=d.charCodeAt(d.length-1);if(55296<=k&&56319>=k)(this||Dg).charLength+=(this||Dg).surrogateSize,d="";else{(this||Dg).charReceived=(this||Dg).charLength=0;if(0===b.length)return d;break}}this.detectIncompleteChar(b);var a=b.length;(this||Dg).charLength&&(b.copy((this||Dg).charBuffer,0,b.length-(this||Dg).charReceived,a),a-=(this||Dg).charReceived);d+=b.toString((this||
Dg).encoding,0,a);a=d.length-1;k=d.charCodeAt(a);return 55296<=k&&56319>=k?(k=(this||Dg).surrogateSize,(this||Dg).charLength+=k,(this||Dg).charReceived+=k,(this||Dg).charBuffer.copy((this||Dg).charBuffer,k,0,k),b.copy((this||Dg).charBuffer,0,0,k),d.substring(0,a)):d};eY.prototype.detectIncompleteChar=function(b){for(var d=3<=b.length?3:b.length;0<d;d--){var k=b[b.length-d];if(1==d&&6==k>>5){(this||Dg).charLength=2;break}if(2>=d&&14==k>>4){(this||Dg).charLength=3;break}if(3>=d&&30==k>>3){(this||Dg).charLength=
4;break}}(this||Dg).charReceived=d};eY.prototype.end=function(b){var d="";b&&b.length&&(d=this.write(b));(this||Dg).charReceived&&(b=(this||Dg).encoding,d+=(this||Dg).charBuffer.slice(0,(this||Dg).charReceived).toString(b));return d};var Fka=Object.freeze({}),rU={},Y6=!1,ui="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sU={},Z6=!1,Et="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uU={},a7=!1,Tf="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,vU={},c7=!1,Kn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wU={},e7=!1,d7="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Fs={},yba=!1,qua=function(){if(yba)return Fs;yba=!0;var b=bj;Fs=Fs=$6();Fs.Stream=DB;Fs.Readable=Fs;Fs.Writable=X6();Fs.Duplex=qE();Fs.Transform=b7();Fs.PassThrough=Gka();b.browser||"disable"!==b.env.READABLE_STREAM||(Fs=DB);return Fs}(),rua={},Jka=nH(Xl),sua=nH(ov),tua=
nH(mua),uua=nH(qua),zba=nH(il);zba(xU,Error);xU.prototype.name="NotFoundError";var vua=sua.EventEmitter,wua=new xU,Aba=function(b,d,k,a){function f(r){var v={},y;if(a)for(y in a)"undefined"!==typeof a[y]&&(v[y]=a[y]);if(r)for(y in r)"undefined"!==typeof r[y]&&(v[y]=r[y]);return v}var l=new vua;l.sublevels={};l.options=a;l.version="6.5.4";l.methods={};d=d||[];l.put=function(r,v,y,A){"function"===typeof y&&(A=y,y={});b.apply([{key:r,value:v,prefix:d.slice(),type:"put"}],f(y),function(E){if(E)return A(E);
l.emit("put",r,v);A(null)})};l.prefix=function(){return d.slice()};l.batch=function(r,v,y){"function"===typeof v&&(y=v,v={});r=r.map(function(A){return{key:A.key,value:A.value,prefix:A.prefix||d,keyEncoding:A.keyEncoding,valueEncoding:A.valueEncoding,type:A.type}});b.apply(r,f(v),function(A){if(A)return y(A);l.emit("batch",r);y(null)})};l.get=function(r,v,y){"function"===typeof v&&(y=v,v={});b.get(r,d,f(v),function(A,E){A?y(wua):y(null,E)})};l.sublevel=function(r,v){return l.sublevels[r]=l.sublevels[r]||
Aba(b,d.concat(r),k,f(v))};l.readStream=l.createReadStream=function(r){r=f(r);r.prefix=d;var v=b.iterator(r);r=k(r,b.createDecoder(r));r.setIterator(v);return r};l.close=function(r){b.close(r)};l.isOpen=b.isOpen;l.isClosed=b.isClosed;return l},f7=uua.Readable;zba(pz,f7);pz.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};pz.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=
!0;b._iterator.next(function(d,k,a){if(d||void 0===k&&void 0===a)return d||b._destroyed||b.push(null),b._cleanup(d);a=b._makeData(k,a);b._destroyed||b.push(a)})}};pz.prototype._cleanup=function(b){if(!this._destroyed){this._destroyed=!0;var d=this;b&&"iterator has ended"!==b.message&&d.emit("error",b);d._iterator?d._iterator.end(function(){d._iterator=null;d.emit("close")}):d.emit("close")}};pz.prototype.destroy=function(){this._cleanup()};var xua={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+
b[1]},decode:function(b){b=b.toString();var d=b.indexOf("\u00ff",1);return[b.substring(1,d),b.substring(d+1)]},lowerBound:"\x00",upperBound:"\u00ff"},yua=new tua,zua=rua=function(b){return Aba(Ika(b,xua,yua),[],pz,b.options)},px="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nP={},Aua=bj,g7=fba.Transform,Bba=il;Bba(rE,g7);rE.prototype.destroy=function(b){if(!(this||px)._destroyed){(this||px)._destroyed=!0;var d=this||px;Aua.nextTick(function(){b&&d.emit("error",b);
d.emit("close")})}};nP=yU(function(b,d,k){b=new rE(b);b._transform=d;k&&(b._flush=k);return b});nP.ctor=yU(function(b,d,k){function a(f){if(!((this||px)instanceof a))return new a(f);(this||px).options=Object.assign({},b,f);rE.call(this||px,(this||px).options)}Bba(a,rE);a.prototype._transform=d;k&&(a.prototype._flush=k);return a});nP.obj=yU(function(b,d,k){b=new rE(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=d;k&&(b._flush=k);return b});var Cba=nP,Bua={};Zj.prototype.toArray=function(){for(var b=
this._length,d=Array(b),k=this._front,a=this._capacity,f=0;f<b;++f)d[f]=this[k+f&a-1];return d};Zj.prototype.push=function(b){var d=arguments.length,k=this._length;if(1<d){var a=this._capacity;if(k+d>a){for(var f=0;f<d;++f){this._checkCapacity(k+1);var l=this._front+k&this._capacity-1;this[l]=arguments[f];k++;this._length=k}return k}l=this._front;for(f=0;f<d;++f)this[l+k&a-1]=arguments[f],l++;this._length=k+d;return k+d}if(0===d)return k;this._checkCapacity(k+1);f=this._front+k&this._capacity-1;this[f]=
b;this._length=k+1;return k+1};Zj.prototype.pop=function(){var b=this._length;if(0!==b){var d=this._front+b-1&this._capacity-1,k=this[d];this[d]=void 0;this._length=b-1;return k}};Zj.prototype.shift=function(){var b=this._length;if(0!==b){var d=this._front,k=this[d];this[d]=void 0;this._front=d+1&this._capacity-1;this._length=b-1;return k}};Zj.prototype.unshift=function(b){var d=this._length,k=arguments.length;if(1<k){var a=this._capacity;if(d+k>a){for(var f=k-1;0<=f;f--){this._checkCapacity(d+1);
a=this._capacity;var l=(this._front-1&a-1^a)-a;this[l]=arguments[f];d++;this._length=d;this._front=l}return d}l=this._front;for(f=k-1;0<=f;f--)l=(l-1&a-1^a)-a,this[l]=arguments[f];this._front=l;this._length=d+k;return d+k}if(0===k)return d;this._checkCapacity(d+1);a=this._capacity;f=(this._front-1&a-1^a)-a;this[f]=b;this._length=d+1;this._front=f;return d+1};Zj.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};Zj.prototype.peekFront=function(){if(0!==
this._length)return this[this._front]};Zj.prototype.get=function(b){if(b===(b|0)){var d=this._length;0>b&&(b+=d);if(!(0>b||b>=d))return this[this._front+b&this._capacity-1]}};Zj.prototype.isEmpty=function(){return 0===this._length};Zj.prototype.clear=function(){for(var b=this._length,d=this._front,k=this._capacity,a=0;a<b;++a)this[d+a&k-1]=void 0;this._front=this._length=0};Zj.prototype.toString=function(){return this.toArray().toString()};Zj.prototype.valueOf=Zj.prototype.toString;Zj.prototype.removeFront=
Zj.prototype.shift;Zj.prototype.removeBack=Zj.prototype.pop;Zj.prototype.insertFront=Zj.prototype.unshift;Zj.prototype.insertBack=Zj.prototype.push;Zj.prototype.enqueue=Zj.prototype.push;Zj.prototype.dequeue=Zj.prototype.shift;Zj.prototype.toJSON=Zj.prototype.toArray;Object.defineProperty(Zj.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Zj.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(h7(1.5*this._capacity+16))};Zj.prototype._resizeTo=
function(b){var d=this._capacity;this._capacity=b;b=this._front;var k=this._length;if(b+k>d)for(b=b+k&d-1,k=0;k<b;++k)this[k+d]=this[k+0],this[k+0]=void 0};var i7=Array.isArray,Cua=Bua=Zj,Dua={},Zv=ei.Buffer,Eua=Object.prototype.toString,fY="function"===typeof Zv.alloc&&"function"===typeof Zv.allocUnsafe&&"function"===typeof Zv.from,Fua=Dua=function(b,d,k){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Eua.call(b).slice(8,-1)){d>>>=0;var a=b.byteLength-
d;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===k)k=a;else if(k>>>=0,k>a)throw new RangeError("'length' is out of bounds");return fY?Zv.from(b.slice(d,d+k)):new Zv(new Uint8Array(b.slice(d,d+k)))}if("string"===typeof b){k=d;if("string"!==typeof k||""===k)k="utf8";if(!Zv.isEncoding(k))throw new TypeError('"encoding" must be a valid string encoding');return fY?Zv.from(b,k):new Zv(b,k)}return fY?Zv.from(b):new Zv(b)},lq={};Object.defineProperty(lq,"__esModule",{value:!0});lq.collectConflicts=
function(b){var d=zU(b);b=j7(b.rev_tree);for(var k=[],a=0,f=b.length;a<f;a++){var l=b[a];l.rev===d||l.opts.deleted||k.push(l.rev)}return k};lq.collectLeaves=j7;lq.compactTree=function(b){var d=[];zM(b.rev_tree,function(k,a,f,l,r){"available"!==r.status||k||(d.push(a+"-"+f),r.status="missing")});return d};lq.isDeleted=function(b,d){d||(d=zU(b));d=d.substring(d.indexOf("-")+1);b=b.rev_tree.map(Pka);for(var k;k=b.pop();){if(k[0]===d)return!!k[1].deleted;b=b.concat(k[2])}};lq.isLocalId=function(b){return/^_local/.test(b)};
lq.merge=function(b,d,k){b=n7(b,d);k=Oka(b.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:b.conflicts}};lq.revExists=function(b,d){b=b.slice();var k=d.split("-");d=parseInt(k[0],10);k=k[1];for(var a;a=b.pop();){if(a.pos===d&&a.ids[0]===k)return!0;for(var f=a.ids[2],l=0,r=f.length;l<r;l++)b.push({pos:a.pos+1,ids:f[l]})}return!1};lq.rootToLeaf=k7;lq.traverseRevTree=zM;lq.winningRev=zU;lq.latest=function(b,d){for(var k=d.rev_tree.slice(),a;a=k.pop();){var f=a.pos,l=a.ids,r=l[0],v=l[1];l=l[2];
var y=0===l.length;a=a.history?a.history.slice():[];a.push({id:r,pos:f,opts:v});if(y)for(v=0,y=a.length;v<y;v++){var A=a[v];if(A.pos+"-"+A.id===b)return f+"-"+r}r=0;for(v=l.length;r<v;r++)k.push({pos:f+1,ids:l[r],history:a})}throw Error("Unable to resolve latest revision for id "+d.id+", rev "+b);};var nn={};Object.defineProperty(nn,"__esModule",{value:!0});var EB=ph,oH=ro,r7=gF,dr=Fg,gq=lq,Qka=o7("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),
Rka=o7("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));nn.invalidIdError=EB.invalidIdError;nn.normalizeDdocFunctionName=EB.normalizeDdocFunctionName;nn.parseDdocFunctionName=EB.parseDdocFunctionName;nn.isDeleted=gq.isDeleted;nn.isLocalId=gq.isLocalId;nn.allDocsKeysQuery=function(b,d){var k={offset:d.skip};return Promise.all(d.keys.map(function(a){var f=EB.assign({key:a,deleted:"ok"},d);["limit","skip","keys"].forEach(function(l){delete f[l]});
return new Promise(function(l,r){b._allDocs(f,function(v,y){if(v)return r(v);d.update_seq&&void 0!==y.update_seq&&(k.update_seq=y.update_seq);k.total_rows=y.total_rows;l(y.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){k.rows=a;return k})};nn.parseDoc=q7;nn.preprocessAttachments=function(b,d,k){function a(){f++;b.length===f&&(l?k(l):k())}if(!b.length)return k();var f=0,l;b.forEach(function(r){function v(F){l=F;A++;A===y.length&&a()}var y=r.data&&r.data._attachments?Object.keys(r.data._attachments):
[],A=0;if(!y.length)return a();for(var E in r.data._attachments)r.data._attachments.hasOwnProperty(E)&&Uka(r.data._attachments[E],d,v)})};nn.processDocs=function(b,d,k,a,f,l,r,v,y){b=b||1E3;var A=v.new_edits,E=new Lz.Map,F=0,H=d.length;d.forEach(function(J,O){if(J._id&&gq.isLocalId(J._id))k[J._deleted?"_removeLocal":"_putLocal"](J,{ctx:f},function(Y,S){l[O]=Y||S;++F===H&&y&&y()});else{var L=J.metadata.id;E.has(L)?(H--,E.get(L).push([J,O])):E.set(L,[[J,O]])}});E.forEach(function(J,O){function L(){++S<
J.length?Y():++F===H&&y&&y()}function Y(){var ea=J[S],qa=ea[0];ea=ea[1];if(a.has(O))s7(b,a.get(O),qa,l,ea,L,r,A);else{var Fa=gq.merge([],qa.metadata.rev_tree[0],b);qa.metadata.rev_tree=Fa.tree;qa.stemmedRevs=Fa.stemmedRevs||[];Fa=gq.winningRev(qa.metadata);var K=gq.isDeleted(qa.metadata,Fa);"was_delete"in v&&K?(l[ea]=dr.createError(dr.MISSING_DOC,"deleted"),L()):A&&"missing"===qa.metadata.rev_tree[0].ids[1].status?(qa=dr.createError(dr.REV_CONFLICT),l[ea]=qa,L()):r(qa,Fa,K,K,!1,K?0:1,ea,L)}}var S=
0;Y()})};nn.updateDoc=s7;var II={};Object.defineProperty(II,"__esModule",{value:!0});var Dba=XE&&"object"===typeof XE&&"default"in XE?XE["default"]:XE;II.safeJsonParse=function(b){try{return JSON.parse(b)}catch(d){return Dba.parse(b)}};II.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(d){return Dba.stringify(b)}};var Gua={},Hua=pH(fua),Iua=pH(zua),oP=pH(aX),Jua=pH(Cua),Kua=pH(Fua),rH=lq,qH=ro,Ft=Lz;FB.prototype.get=function(b,d,k){var a=u7(this,b),f=a.get(d);if(f)return ph.nextTick(function(){k(null,
f)});if(null===f)return ph.nextTick(function(){k({name:"NotFoundError"})});b.get(d,function(l,r){if(l)return"NotFoundError"===l.name&&a.set(d,null),k(l);a.set(d,r);k(null,r)})};FB.prototype.batch=function(b){for(var d=0,k=b.length;d<k;d++){var a=b[d],f=u7(this,a.prefix);"put"===a.type?f.set(a.key,a.value):f.set(a.key,null)}this._batch=this._batch.concat(b)};FB.prototype.execute=function(b,d){for(var k=new Ft.Set,a=[],f=this._batch.length-1;0<=f;f--){var l=this._batch[f],r=l.prefix.prefix()[0]+"\u00ff"+
l.key;k.has(r)||(k.add(r),a.push(l))}b.batch(a,d)};var JI=new Ft.Map,Lua={encode:II.safeJsonStringify,decode:II.safeJsonParse,buffer:!1,type:"cheap-json"},KI=new ph.changesHandler,Mua=Gua=function(b,d){function k(){L.docStore=K.sublevel("document-store",{valueEncoding:Lua});L.bySeqStore=K.sublevel("by-sequence",{valueEncoding:"json"});L.attachmentStore=K.sublevel("attach-store",{valueEncoding:"json"});L.binaryStore=K.sublevel("attach-binary-store",{valueEncoding:"binary"});L.localStore=K.sublevel("local-store",
{valueEncoding:"json"});L.metaStore=K.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?b.migrate.doMigrationTwo(K,L,a):a()}function a(){L.metaStore.get("_local_last_update_seq",function(Z,R){"undefined"===typeof K._updateSeq&&(K._updateSeq=R||0);L.metaStore.get("_local_doc_count",function(U,na){K._docCount=U?0:na;L.metaStore.get("_local_uuid",function(aa,xa){O=aa?ph.uuid():xa;L.metaStore.put("_local_uuid",O,function(){ph.nextTick(function(){d(null,J)})})})})})}function f(Z){return K.isClosed()?
Z(Error("database is closed")):Z(null,K._docCount)}function l(Z,R){try{Z.apply(null,R)}catch(U){R[R.length-1](U)}}function r(){var Z=K._queue.peekFront();"read"===Z.type?v(Z):y(Z)}function v(Z){var R=[Z];Z=1;for(var U=K._queue.get(Z);"undefined"!==typeof U&&"read"===U.type;)R.push(U),Z++,U=K._queue.get(Z);var na=0;R.forEach(function(aa){var xa=aa.args,jb=xa[xa.length-1];xa[xa.length-1]=oP(function(ob){jb.apply(null,ob);++na===R.length&&ph.nextTick(function(){R.forEach(function(){K._queue.shift()});
K._queue.length&&r()})});l(aa.fun,xa)})}function y(Z){var R=Z.args,U=R[R.length-1];R[R.length-1]=oP(function(na){U.apply(null,na);ph.nextTick(function(){K._queue.shift();K._queue.length&&r()})});l(Z.fun,R)}function A(Z){return oP(function(R){K._queue.push({fun:Z,args:R,type:"write"});1===K._queue.length&&ph.nextTick(r)})}function E(Z){return oP(function(R){K._queue.push({fun:Z,args:R,type:"read"});1===K._queue.length&&ph.nextTick(r)})}function F(Z){return("0000000000000000"+Z).slice(-16)}function H(Z,
R){"destroy"in ea?ea.destroy(Z,R):R(null)}b=ph.clone(b);var J=this,O,L={},Y=b.revs_limit,S=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var ea=b.db,qa=ph.functionName(ea);if(JI.has(qa))var Fa=JI.get(qa);else Fa=new Ft.Map,JI.set(qa,Fa);if(Fa.has(S)){var K=Fa.get(S);k()}else Fa.set(S,Iua(Hua(ea(S),b,function(Z){if(Z)return Fa.delete(S),d(Z);K=Fa.get(S);K._docCount=-1;K._queue=new Jua;"object"===typeof b.migrate?b.migrate.doMigrationOne(S,K,k):k()})));J._remote=!1;J.type=function(){return"leveldb"};
J._id=function(Z){Z(null,O)};J._info=function(Z){var R={doc_count:K._docCount,update_seq:K._updateSeq,backend_adapter:ph.functionName(ea)};return ph.nextTick(function(){Z(null,R)})};J._get=E(function(Z,R,U){R=ph.clone(R);L.docStore.get(Z,function(na,aa){if(na||!aa)return U(Fg.createError(Fg.MISSING_DOC,"missing"));if(R.rev)var xa=R.latest?rH.latest(R.rev,aa):R.rev;else if(xa=AU(aa),"deleted"in aa?aa.deleted:nn.isDeleted(aa,xa))return U(Fg.createError(Fg.MISSING_DOC,"deleted"));L.bySeqStore.get(F(aa.rev_map[xa]),
function(jb,ob){if(!ob)return U(Fg.createError(Fg.MISSING_DOC));if("_id"in ob&&ob._id!==aa.id)return U(Error("wrong doc returned"));ob._id=aa.id;if("_rev"in ob){if(ob._rev!==xa)return U(Error("wrong doc returned"))}else ob._rev=xa;return U(null,{doc:ob,metadata:aa})})})});J._getAttachment=function(Z,R,U,na,aa){var xa=U.content_type;L.binaryStore.get(U.digest,function(jb,ob){if(jb)return"NotFoundError"!==jb.name?aa(jb):aa(null,na.binary?qH.blob([""],{type:xa}):"");na.binary?aa(null,t7(ob,xa)):aa(null,
ob.toString("base64"))})};J._bulkDocs=A(function(Z,R,U){function na(Ea,wb){Ic.get(L.attachmentStore,Ea,function($b){$b?($b=Fg.createError(Fg.MISSING_STUB,"unknown stub attachment with digest "+Ea),wb($b)):wb()})}function aa(Ea){function wb(){if(++$b===Bd.length)return Ea(zd)}var $b=0,zd;Bd.forEach(function(yd){if(yd._id&&nn.isLocalId(yd._id))return wb();Ic.get(L.docStore,yd._id,function(Mc,Me){Mc?"NotFoundError"!==Mc.name&&(zd=Mc):Ub.set(yd._id,Me);wb()})})}function xa(Ea,wb){var $b=Promise.resolve();
Ea.forEach(function(zd,yd){$b=$b.then(function(){return new Promise(function(Mc,Me){J._doCompactionNoLock(yd,zd,{ctx:Ic},function(Fe){if(Fe)return Me(Fe);Mc()})})})});$b.then(function(){wb()},wb)}function jb(Ea){var wb=new Ft.Map;Ub.forEach(function($b,zd){wb.set(zd,rH.compactTree($b))});xa(wb,Ea)}function ob(){xa(ac,function(Ea){Ea&&Ka(Ea);if(J.auto_compaction)return jb(Ka);Ka()})}function pa(Ea,wb,$b,zd,yd,Mc,Me,Fe){function Jh(gi){gk++;Tj||(gi?(Tj=gi,Fe(Tj)):gk===yj.length&&Wi())}function fh(gi,
pi,Bi,Kj){return function(xk){wa(gi,"md5-"+xk,pi,Bi,Kj)}}function dj(gi,pi,Bi){return function(Kj){gF.binaryMd5(Kj,fh(gi,pi,Kj,Bi))}}function Wi(){var gi=Ea.metadata.rev_map[Ea.metadata.rev];if(gi)return Fe();gi=++ed;Ea.metadata.rev_map[Ea.metadata.rev]=Ea.metadata.seq=gi;gi=[{key:F(gi),value:Ea.data,prefix:L.bySeqStore,type:"put"},{key:Ea.metadata.id,value:Ea.metadata,prefix:L.docStore,type:"put"}];Ic.batch(gi);hc[Me]={ok:!0,id:Ea.metadata.id,rev:Ea.metadata.rev};Ub.set(Ea.metadata.id,Ea.metadata);
Fe()}Mb+=Mc;var Tj=null,gk=0;Ea.metadata.winningRev=wb;Ea.metadata.deleted=$b;Ea.data._id=Ea.metadata.id;Ea.data._rev=Ea.metadata.rev;zd&&(Ea.data._deleted=!0);Ea.stemmedRevs.length&&ac.set(Ea.metadata.id,Ea.stemmedRevs);var yj=Ea.data._attachments?Object.keys(Ea.data._attachments):[];for(wb=0;wb<yj.length;wb++)if($b=yj[wb],zd=Ea.data._attachments[$b],zd.stub)ka(Ea.data._id,Ea.data._rev,zd.digest,Jh);else if("string"===typeof zd.data){try{var zj=qH.atob(zd.data)}catch(gi){U(Fg.createError(Fg.BAD_ARG,
"Attachment is not a valid base64 string"));return}dj(Ea,$b,Jh)(zj)}else Vka(zd.data,dj(Ea,$b,Jh));yj.length||Wi()}function ka(Ea,wb,$b,zd){function yd(){return new Promise(function(Fe,Jh){Ic.get(L.attachmentStore,$b,function(fh,dj){if(fh&&"NotFoundError"!==fh.name)return Jh(fh);Fe(dj)})})}function Mc(Fe){var Jh=[Ea,wb].join("@"),fh={};Fe?Fe.refs&&(fh.refs=Fe.refs,fh.refs[Jh]=!0):(fh.refs={},fh.refs[Jh]=!0);return new Promise(function(dj){Ic.batch([{type:"put",prefix:L.attachmentStore,key:$b,value:fh}]);
dj(!Fe)})}var Me=Ba[$b]||Promise.resolve();Ba[$b]=Me.then(function(){return yd().then(Mc).then(function(Fe){zd(null,Fe)},zd)})}function wa(Ea,wb,$b,zd,yd){$b=Ea.data._attachments[$b];delete $b.data;$b.digest=wb;$b.length=zd.length;var Mc=Ea.metadata.id;Ea=Ea.metadata.rev;$b.revpos=parseInt(Ea,10);ka(Mc,Ea,wb,function(Me,Fe){if(Me||0===zd.length||!Fe)return yd(Me);Ic.batch([{type:"put",prefix:L.binaryStore,key:wb,value:Kua(zd,"binary")}]);yd()})}function Ka(Ea){if(Ea)return ph.nextTick(function(){U(Ea)});
Ic.batch([{prefix:L.metaStore,type:"put",key:"_local_last_update_seq",value:ed},{prefix:L.metaStore,type:"put",key:"_local_doc_count",value:K._docCount+Mb}]);Ic.execute(K,function(wb){if(wb)return U(wb);K._docCount+=Mb;K._updateSeq=ed;KI.notify(S);ph.nextTick(function(){U(null,hc)})})}var Fb=R.new_edits,hc=Array(Z.docs.length),Ub=new Ft.Map,ac=new Ft.Map,Ic=new FB,Mb=0,ed=K._updateSeq,Bd=Z.docs,ja=Bd.map(function(Ea){if(Ea._id&&nn.isLocalId(Ea._id))return Ea;Ea=nn.parseDoc(Ea,Fb,J.__opts);Ea.metadata&&
!Ea.metadata.rev_map&&(Ea.metadata.rev_map={});return Ea});Z=ja.filter(function(Ea){return Ea.error});if(Z.length)return U(Z[0]);var Ba={};if(!ja.length)return U(null,[]);(function(Ea){var wb=[];Bd.forEach(function(yd){yd&&yd._attachments&&Object.keys(yd._attachments).forEach(function(Mc){Mc=yd._attachments[Mc];Mc.stub&&wb.push(Mc.digest)})});if(!wb.length)return Ea();var $b=0,zd;wb.forEach(function(yd){na(yd,function(Mc){Mc&&!zd&&(zd=Mc);++$b===wb.length&&Ea(zd)})})})(function(Ea){if(Ea)return U(Ea);
aa(function(wb){if(wb)return U(wb);nn.processDocs(Y,ja,J,Ub,Ic,hc,pa,R,ob)})})});J._allDocs=function(Z,R){return"keys"in Z?nn.allDocsKeysQuery(this,Z):E(function(U,na){U=ph.clone(U);f(function(aa,xa){if(aa)return na(aa);aa={};var jb=U.skip||0;U.startkey&&(aa.gte=U.startkey);U.endkey&&(aa.lte=U.endkey);U.key&&(aa.gte=aa.lte=U.key);if(U.descending){aa.reverse=!0;var ob=aa.lte;aa.lte=aa.gte;aa.gte=ob}if("number"===typeof U.limit)var pa=U.limit;if(0===pa||"gte"in aa&&"lte"in aa&&aa.gte>aa.lte)return aa=
{total_rows:xa,offset:U.skip,rows:[]},U.update_seq&&(aa.update_seq=K._updateSeq),na(null,aa);var ka=[],wa=L.docStore.readStream(aa),Ka=Cba.obj(function(Fb,hc,Ub){function ac(Bd){var ja={id:Ic.id,key:Ic.id,value:{rev:Mb}};if(U.include_docs){ja.doc=Bd;ja.doc._rev=ja.value.rev;U.conflicts&&(Bd=rH.collectConflicts(Ic),Bd.length&&(ja.doc._conflicts=Bd));for(var Ba in ja.doc._attachments)ja.doc._attachments.hasOwnProperty(Ba)&&(ja.doc._attachments[Ba].stub=!0)}if(!1===U.inclusive_end&&Ic.id===U.endkey)return Ub();
if(ed)if("ok"===U.deleted)ja.value.deleted=!0,ja.doc=null;else return Ub();ka.push(ja);Ub()}var Ic=Fb.value,Mb=AU(Ic),ed="deleted"in Ic?Ic.deleted:nn.isDeleted(Ic,Mb);if(!ed){if(0<jb--){Ub();return}if("number"===typeof pa&&0>=pa--){wa.unpipe();wa.destroy();Ub();return}}else if("ok"!==U.deleted){Ub();return}U.include_docs?L.bySeqStore.get(F(Ic.rev_map[Mb]),function(Bd,ja){ac(ja)}):ac()},function(Fb){Promise.resolve().then(function(){if(U.include_docs&&U.attachments)return BU(ka,L,U)}).then(function(){var hc=
{total_rows:xa,offset:U.skip,rows:ka};U.update_seq&&(hc.update_seq=K._updateSeq);na(null,hc)},na);Fb()}).on("unpipe",function(){Ka.end()});wa.on("error",na);wa.pipe(Ka)})})(Z,R)};J._changes=function(Z){function R(){Z.done=!0;Z.return_docs&&Z.limit&&Z.limit<aa.length&&(aa.length=Z.limit);Fb.unpipe(hc);Fb.destroy();Z.continuous||Z.cancelled||(Z.include_docs&&Z.attachments&&Z.return_docs?BU(aa,L,Z).then(function(){Z.complete(null,{results:aa,last_seq:xa})}):Z.complete(null,{results:aa,last_seq:xa}))}
Z=ph.clone(Z);if(Z.continuous){var U=S+":"+ph.uuid();KI.addListener(S,U,J,Z);KI.notify(S);return{cancel:function(){KI.removeListener(S,U)}}}var na=Z.descending,aa=[],xa=Z.since||0,jb=0,ob={reverse:na};if("limit"in Z&&0<Z.limit)var pa=Z.limit;ob.reverse||(ob.start=F(Z.since||0));var ka=Z.doc_ids&&new Ft.Set(Z.doc_ids),wa=ph.filterChange(Z),Ka=new Ft.Map,Fb=L.bySeqStore.readStream(ob),hc=Cba.obj(function(Ub,ac,Ic){function Mb(ja){function Ba(wb){var $b=Z.processChange(wb,ja,Z);$b.seq=ja.seq;wb=wa($b);
if("object"===typeof wb)return Z.complete(wb);if(wb){jb++;if(Z.attachments&&Z.include_docs)BU([$b],L,Z).then(function(){Z.onChange($b)});else Z.onChange($b);Z.return_docs&&aa.push($b)}Ic()}var Ea=AU(ja);if(ja.seq!==ed)return Ic();xa=ed;if(Ea===Bd._rev)return Ba(Bd);L.bySeqStore.get(F(ja.rev_map[Ea]),function(wb,$b){Ba($b)})}if(pa&&jb>=pa)return R(),Ic();if(Z.cancelled||Z.done)return Ic();var ed=parseInt(Ub.key,10),Bd=Ub.value;if(ed===Z.since&&!na||ka&&!ka.has(Bd._id))return Ic();if(Ub=Ka.get(Bd._id))return Mb(Ub);
L.docStore.get(Bd._id,function(ja,Ba){if(Z.cancelled||Z.done||K.isClosed()||nn.isLocalId(Ba.id))return Ic();Ka.set(Bd._id,Ba);Mb(Ba)})},function(Ub){if(Z.cancelled)return Ub();Z.return_docs&&Z.limit&&Z.limit<aa.length&&(aa.length=Z.limit);Ub()}).on("unpipe",function(){hc.end();R()});Fb.pipe(hc);return{cancel:function(){Z.cancelled=!0;R()}}};J._close=function(Z){if(K.isClosed())return Z(Fg.createError(Fg.NOT_OPEN));K.close(function(R){R?Z(R):(Fa.delete(S),Z())})};J._getRevisionTree=function(Z,R){L.docStore.get(Z,
function(U,na){U?R(Fg.createError(Fg.MISSING_DOC)):R(null,na.rev_tree)})};J._doCompaction=A(function(Z,R,U,na){J._doCompactionNoLock(Z,R,U,na)});J._doCompactionNoLock=function(Z,R,U,na){"function"===typeof U&&(na=U,U={});if(!R.length)return na();var aa=U.ctx||new FB;aa.get(L.docStore,Z,function(xa,jb){function ob(Ub){Ub&&(hc=Ub);if(++Fb===R.length){if(hc)return na(hc);ka()}}function pa(Ub){if(Ub)return na(Ub);aa.batch(wa);if(U.ctx)return na();aa.execute(K,na)}function ka(){function Ub(Bd){Bd&&(Mb=
Bd);++Ic===ac.length&&pa(Mb)}var ac=Object.keys(Ka);if(!ac.length)return pa();var Ic=0,Mb,ed=new Ft.Map;R.forEach(function(Bd){ed.set(Z+"@"+Bd,!0)});ac.forEach(function(Bd){aa.get(L.attachmentStore,Bd,function(ja,Ba){if(ja)return"NotFoundError"===ja.name?Ub():Ub(ja);ja=Object.keys(Ba.refs||{}).filter(function(wb){return!ed.has(wb)});var Ea={};ja.forEach(function(wb){Ea[wb]=!0});ja.length?wa.push({key:Bd,type:"put",value:{refs:Ea},prefix:L.attachmentStore}):wa=wa.concat([{key:Bd,type:"del",prefix:L.attachmentStore},
{key:Bd,type:"del",prefix:L.binaryStore}]);Ub()})})}if(xa)return na(xa);xa=R.map(function(Ub){var ac=jb.rev_map[Ub];delete jb.rev_map[Ub];return ac});rH.traverseRevTree(jb.rev_tree,function(Ub,ac,Ic,Mb,ed){-1!==R.indexOf(ac+"-"+Ic)&&(ed.status="missing")});var wa=[];wa.push({key:jb.id,value:jb,type:"put",prefix:L.docStore});var Ka={},Fb=0,hc;xa.forEach(function(Ub){wa.push({key:F(Ub),type:"del",prefix:L.bySeqStore});aa.get(L.bySeqStore,F(Ub),function(ac,Ic){if(ac)return"NotFoundError"===ac.name?ob():
ob(ac);Object.keys(Ic._attachments||{}).forEach(function(Mb){Ka[Ic._attachments[Mb].digest]=!0});ob()})})})};J._getLocal=function(Z,R){L.localStore.get(Z,function(U,na){U?R(Fg.createError(Fg.MISSING_DOC)):R(null,na)})};J._putLocal=function(Z,R,U){"function"===typeof R&&(U=R,R={});R.ctx?J._putLocalNoLock(Z,R,U):J._putLocalWithLock(Z,R,U)};J._putLocalWithLock=A(function(Z,R,U){J._putLocalNoLock(Z,R,U)});J._putLocalNoLock=function(Z,R,U){delete Z._revisions;var na=Z._rev,aa=Z._id,xa=R.ctx||new FB;xa.get(L.localStore,
aa,function(jb,ob){if(jb&&na||ob&&ob._rev!==na)return U(Fg.createError(Fg.REV_CONFLICT));Z._rev=na?"0-"+(parseInt(na.split("-")[1],10)+1):"0-1";xa.batch([{type:"put",prefix:L.localStore,key:aa,value:Z}]);var pa={ok:!0,id:Z._id,rev:Z._rev};if(R.ctx)return U(null,pa);xa.execute(K,function(ka){if(ka)return U(ka);U(null,pa)})})};J._removeLocal=function(Z,R,U){"function"===typeof R&&(U=R,R={});R.ctx?J._removeLocalNoLock(Z,R,U):J._removeLocalWithLock(Z,R,U)};J._removeLocalWithLock=A(function(Z,R,U){J._removeLocalNoLock(Z,
R,U)});J._removeLocalNoLock=function(Z,R,U){var na=R.ctx||new FB;na.get(L.localStore,Z._id,function(aa,xa){if(aa)return"NotFoundError"!==aa.name?U(aa):U(Fg.createError(Fg.MISSING_DOC));if(xa._rev!==Z._rev)return U(Fg.createError(Fg.REV_CONFLICT));na.batch([{prefix:L.localStore,type:"del",key:Z._id}]);var jb={ok:!0,id:Z._id,rev:"0-0"};if(R.ctx)return U(null,jb);na.execute(K,function(ob){if(ob)return U(ob);U(null,jb)})})};J._destroy=function(Z,R){Z=ph.functionName(ea);if(JI.has(Z))var U=JI.get(Z);else return H(S,
R);U.has(S)?(KI.removeAllListeners(S),U.get(S).close(function(){U.delete(S);H(S,R)})):H(S,R)}},GB="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Nua={},Eba=bj;CU.prototype.next=function(b){var d=this||GB;if("function"!=typeof b)throw Error("next() requires a callback argument");if(d._ended)return b(Error("cannot call next() after end()"));if(d._nexting)return b(Error("cannot call next() before previous next() has completed"));d._nexting=!0;if("function"==typeof d._next)return d._next(function(){d._nexting=
!1;b.apply(null,arguments)});Eba.nextTick(function(){d._nexting=!1;b()})};CU.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||GB)._ended)return b(Error("end() already called on iterator"));(this||GB)._ended=!0;if("function"==typeof(this||GB)._end)return this._end(b);Eba.nextTick(b)};var Fba=Nua=CU,ql="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oua={},Pua=bj;qz.prototype._serializeKey=function(b){return(this||
ql)._db._serializeKey(b)};qz.prototype._serializeValue=function(b){return(this||ql)._db._serializeValue(b)};qz.prototype._checkWritten=function(){if((this||ql)._written)throw Error("write() already called on this batch");};qz.prototype.put=function(b,d){this._checkWritten();var k=(this||ql)._db._checkKey(b,"key",(this||ql)._db._isBuffer);if(k)throw k;b=this._serializeKey(b);d=this._serializeValue(d);"function"==typeof(this||ql)._put?this._put(b,d):(this||ql)._operations.push({type:"put",key:b,value:d});
return this||ql};qz.prototype.del=function(b){this._checkWritten();var d=(this||ql)._db._checkKey(b,"key",(this||ql)._db._isBuffer);if(d)throw d;b=this._serializeKey(b);"function"==typeof(this||ql)._del?this._del(b):(this||ql)._operations.push({type:"del",key:b});return this||ql};qz.prototype.clear=function(){this._checkWritten();(this||ql)._operations=[];"function"==typeof(this||ql)._clear&&this._clear();return this||ql};qz.prototype.write=function(b,d){this._checkWritten();"function"==typeof b&&
(d=b);if("function"!=typeof d)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||ql)._written=!0;if("function"==typeof(this||ql)._write)return this._write(d);if("function"==typeof(this||ql)._db._batch)return(this||ql)._db._batch((this||ql)._operations,b,d);Pua.nextTick(d)};var Qua=Oua=qz,hm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Gba={},Rua=ei.Buffer,Uz=bj;sp.prototype.open=function(b,d){var k=this||hm,a=(this||hm).status;
"function"==typeof b&&(d=b);if("function"!=typeof d)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||hm)._open?((this||hm).status="opening",this._open(b,function(f){if(f)return k.status=a,d(f);k.status="open";d()})):((this||hm).status="open",Uz.nextTick(d))};sp.prototype.close=function(b){var d=this||hm,k=(this||hm).status;if("function"!=typeof b)throw Error("close() requires a callback argument");
"function"==typeof(this||hm)._close?((this||hm).status="closing",this._close(function(a){if(a)return d.status=k,b(a);d.status="closed";b()})):((this||hm).status="closed",Uz.nextTick(b))};sp.prototype.get=function(b,d,k){var a;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return k(a);b=this._serializeKey(b);"object"!=typeof d&&(d={});d.asBuffer=0!=d.asBuffer;if("function"==typeof(this||hm)._get)return this._get(b,
d,k);Uz.nextTick(function(){k(Error("NotFound"))})};sp.prototype.put=function(b,d,k,a){var f;"function"==typeof k&&(a=k);if("function"!=typeof a)throw Error("put() requires a callback argument");if(f=this._checkKey(b,"key"))return a(f);b=this._serializeKey(b);d=this._serializeValue(d);"object"!=typeof k&&(k={});if("function"==typeof(this||hm)._put)return this._put(b,d,k,a);Uz.nextTick(a)};sp.prototype.del=function(b,d,k){var a;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("del() requires a callback argument");
if(a=this._checkKey(b,"key"))return k(a);b=this._serializeKey(b);"object"!=typeof d&&(d={});if("function"==typeof(this||hm)._del)return this._del(b,d,k);Uz.nextTick(k)};sp.prototype.batch=function(b,d,k){if(!arguments.length)return this._chainedBatch();"function"==typeof d&&(k=d);"function"==typeof b&&(k=b);if("function"!=typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return k(Error("batch(array) requires an array argument"));d&&"object"==typeof d||(d={});for(var a=
0,f=b.length,l,r;a<f;a++)if(l=b[a],"object"==typeof l&&((r=this._checkKey(l.type,"type"))||(r=this._checkKey(l.key,"key"))))return k(r);if("function"==typeof(this||hm)._batch)return this._batch(b,d,k);Uz.nextTick(k)};sp.prototype.approximateSize=function(b,d,k){if(null==b||null==d||"function"==typeof b||"function"==typeof d)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof k)throw Error("approximateSize() requires a callback argument");b=
this._serializeKey(b);d=this._serializeKey(d);if("function"==typeof(this||hm)._approximateSize)return this._approximateSize(b,d,k);Uz.nextTick(function(){k(null,0)})};sp.prototype._setupIteratorOptions=function(b){var d=this||hm;b=Sz(b);"start end gt gte lt lte".split(" ").forEach(function(k){b[k]&&d._isBuffer(b[k])&&0===b[k].length&&delete b[k]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;
return b};sp.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||hm)._iterator?this._iterator(b):new Fba(this||hm)};sp.prototype._chainedBatch=function(){return new Qua(this||hm)};sp.prototype._isBuffer=function(b){return Rua.isBuffer(b)};sp.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};sp.prototype._serializeValue=function(b){return null==b?"":this._isBuffer(b)||Uz.browser?b:String(b)};sp.prototype._checkKey=
function(b,d){if(null===b||void 0===b)return Error(d+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(d+" cannot be an empty Buffer");if(""===String(b))return Error(d+" cannot be an empty String")};Gba=sp;var Sua=Gba;var Hba={};Hba=function(b){return new sE(b||Xka,null)};var zp=sE.prototype;Object.defineProperty(zp,"keys",{get:function(){var b=[];this.forEach(function(d,k){b.push(d)});return b}});Object.defineProperty(zp,"values",{get:function(){var b=[];this.forEach(function(d,
k){b.push(k)});return b}});Object.defineProperty(zp,"length",{get:function(){return this.root?this.root._count:0}});zp.insert=function(b,d){for(var k=this._compare,a=this.root,f=[],l=[];a;){var r=k(b,a.key);f.push(a);l.push(r);a=0>=r?a.left:a.right}f.push(new er(0,b,d,null,null,1));for(b=f.length-2;0<=b;--b)a=f[b],f[b]=0>=l[b]?new er(a._color,a.key,a.value,f[b+1],a.right,a._count+1):new er(a._color,a.key,a.value,a.left,f[b+1],a._count+1);for(b=f.length-1;1<b;--b){l=f[b-1];a=f[b];if(1===l._color||
1===a._color)break;d=f[b-2];if(d.left===l)if(l.left===a)if((r=d.right)&&0===r._color)l._color=1,d.right=rz(1,r),d._color=0,--b;else{d._color=0;d.left=l.right;l._color=1;l.right=d;f[b-2]=l;f[b-1]=a;rl(d);rl(l);3<=b&&(b=f[b-3],b.left===d?b.left=l:b.right=l);break}else if((r=d.right)&&0===r._color)l._color=1,d.right=rz(1,r),d._color=0,--b;else{l.right=a.left;d._color=0;d.left=a.right;a._color=1;a.left=l;a.right=d;f[b-2]=a;f[b-1]=l;rl(d);rl(l);rl(a);3<=b&&(b=f[b-3],b.left===d?b.left=a:b.right=a);break}else if(l.right===
a)if((r=d.left)&&0===r._color)l._color=1,d.left=rz(1,r),d._color=0,--b;else{d._color=0;d.right=l.left;l._color=1;l.left=d;f[b-2]=l;f[b-1]=a;rl(d);rl(l);3<=b&&(b=f[b-3],b.right===d?b.right=l:b.left=l);break}else if((r=d.left)&&0===r._color)l._color=1,d.left=rz(1,r),d._color=0,--b;else{l.left=a.right;d._color=0;d.right=a.left;a._color=1;a.right=l;a.left=d;f[b-2]=a;f[b-1]=l;rl(d);rl(l);rl(a);3<=b&&(b=f[b-3],b.right===d?b.right=a:b.left=a);break}}f[0]._color=1;return new sE(k,f[0])};zp.forEach=function(b,
d,k){if(this.root)switch(arguments.length){case 1:return DU(b,this.root);case 2:return EU(d,this._compare,b,this.root);case 3:if(!(0<=this._compare(d,k)))return FU(d,k,this._compare,b,this.root)}};Object.defineProperty(zp,"begin",{get:function(){for(var b=[],d=this.root;d;)b.push(d),d=d.left;return new fr(this,b)}});Object.defineProperty(zp,"end",{get:function(){for(var b=[],d=this.root;d;)b.push(d),d=d.right;return new fr(this,b)}});zp.at=function(b){if(0>b)return new fr(this,[]);for(var d=this.root,
k=[];;){k.push(d);if(d.left){if(b<d.left._count){d=d.left;continue}b-=d.left._count}if(!b)return new fr(this,k);--b;if(d.right){if(b>=d.right._count)break;d=d.right}else break}return new fr(this,[])};zp.ge=function(b){for(var d=this._compare,k=this.root,a=[],f=0;k;){var l=d(b,k.key);a.push(k);0>=l&&(f=a.length);k=0>=l?k.left:k.right}a.length=f;return new fr(this,a)};zp.gt=function(b){for(var d=this._compare,k=this.root,a=[],f=0;k;){var l=d(b,k.key);a.push(k);0>l&&(f=a.length);k=0>l?k.left:k.right}a.length=
f;return new fr(this,a)};zp.lt=function(b){for(var d=this._compare,k=this.root,a=[],f=0;k;){var l=d(b,k.key);a.push(k);0<l&&(f=a.length);k=0>=l?k.left:k.right}a.length=f;return new fr(this,a)};zp.le=function(b){for(var d=this._compare,k=this.root,a=[],f=0;k;){var l=d(b,k.key);a.push(k);0<=l&&(f=a.length);k=0>l?k.left:k.right}a.length=f;return new fr(this,a)};zp.find=function(b){for(var d=this._compare,k=this.root,a=[];k;){var f=d(b,k.key);a.push(k);if(0===f)return new fr(this,a);k=0>=f?k.left:k.right}return new fr(this,
[])};zp.remove=function(b){return(b=this.find(b))?b.remove():this};zp.get=function(b){for(var d=this._compare,k=this.root;k;){var a=d(b,k.key);if(0===a)return k.value;k=0>=a?k.left:k.right}};var Gs=fr.prototype;Object.defineProperty(Gs,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(Gs,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});Gs.clone=function(){return new fr(this.tree,this._stack.slice())};Gs.remove=function(){var b=
this._stack;if(0===b.length)return this.tree;var d=Array(b.length),k=b[b.length-1];d[d.length-1]=new er(k._color,k.key,k.value,k.left,k.right,k._count);for(var a=b.length-2;0<=a;--a)k=b[a],d[a]=k.left===b[a+1]?new er(k._color,k.key,k.value,d[a+1],k.right,k._count):new er(k._color,k.key,k.value,k.left,d[a+1],k._count);k=d[d.length-1];if(k.left&&k.right){b=d.length;for(k=k.left;k.right;)d.push(k),k=k.right;a=d[b-1];d.push(new er(k._color,a.key,a.value,k.left,k.right,k._count));d[b-1].key=k.key;d[b-
1].value=k.value;for(a=d.length-2;a>=b;--a)k=d[a],d[a]=new er(k._color,k.key,k.value,k.left,d[a+1],k._count);d[b-1].left=d[b]}k=d[d.length-1];if(0===k._color)for(a=d[d.length-2],a.left===k?a.left=null:a.right===k&&(a.right=null),d.pop(),a=0;a<d.length;++a)d[a]._count--;else if(k.left||k.right)for(k.left?v7(k,k.left):k.right&&v7(k,k.right),k._color=1,a=0;a<d.length-1;++a)d[a]._count--;else{if(1===d.length)return new sE(this.tree._compare,null);for(a=0;a<d.length;++a)d[a]._count--;a=d[d.length-2];for(var f,
l,r,v=d.length-1;0<=v;--v){b=d[v];if(0===v){b._color=1;break}f=d[v-1];if(f.left===b){l=f.right;if(l.right&&0===l.right._color){l=f.right=zv(l);r=l.right=zv(l.right);f.right=l.left;l.left=f;l.right=r;l._color=f._color;b._color=1;f._color=1;r._color=1;rl(f);rl(l);if(1<v){var y=d[v-2];y.left===f?y.left=l:y.right=l}d[v-1]=l;break}else if(l.left&&0===l.left._color){l=f.right=zv(l);r=l.left=zv(l.left);f.right=r.left;l.left=r.right;r.left=f;r.right=l;r._color=f._color;f._color=1;l._color=1;b._color=1;rl(f);
rl(l);rl(r);1<v&&(y=d[v-2],y.left===f?y.left=r:y.right=r);d[v-1]=r;break}if(1===l._color)if(0===f._color){f._color=1;f.right=rz(0,l);break}else f.right=rz(0,l);else l=zv(l),f.right=l.left,l.left=f,l._color=f._color,f._color=0,rl(f),rl(l),1<v&&(y=d[v-2],y.left===f?y.left=l:y.right=l),d[v-1]=l,d[v]=f,v+1<d.length?d[v+1]=b:d.push(b),v+=2}else{l=f.left;if(l.left&&0===l.left._color){l=f.left=zv(l);r=l.left=zv(l.left);f.left=l.right;l.right=f;l.left=r;l._color=f._color;b._color=1;f._color=1;r._color=1;
rl(f);rl(l);1<v&&(y=d[v-2],y.right===f?y.right=l:y.left=l);d[v-1]=l;break}else if(l.right&&0===l.right._color){l=f.left=zv(l);r=l.right=zv(l.right);f.left=r.right;l.right=r.left;r.right=f;r.left=l;r._color=f._color;f._color=1;l._color=1;b._color=1;rl(f);rl(l);rl(r);1<v&&(y=d[v-2],y.right===f?y.right=r:y.left=r);d[v-1]=r;break}if(1===l._color)if(0===f._color){f._color=1;f.left=rz(0,l);break}else f.left=rz(0,l);else l=zv(l),f.left=l.right,l.right=f,l._color=f._color,f._color=0,rl(f),rl(l),1<v&&(y=d[v-
2],y.right===f?y.right=l:y.left=l),d[v-1]=l,d[v]=f,v+1<d.length?d[v+1]=b:d.push(b),v+=2}}a.left===k?a.left=null:a.right=null}return new sE(this.tree._compare,d[0])};Object.defineProperty(Gs,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(Gs,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(Gs,"index",{get:function(){var b=0,d=this._stack;
if(0===d.length)return(b=this.tree.root)?b._count:0;d[d.length-1].left&&(b=d[d.length-1].left._count);for(var k=d.length-2;0<=k;--k)d[k+1]===d[k].right&&(++b,d[k].left&&(b+=d[k].left._count));return b},enumerable:!0});Gs.next=function(){var b=this._stack;if(0!==b.length){var d=b[b.length-1];if(d.right)for(d=d.right;d;)b.push(d),d=d.left;else for(b.pop();0<b.length&&b[b.length-1].right===d;)d=b[b.length-1],b.pop()}};Object.defineProperty(Gs,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;
if(b[b.length-1].right)return!0;for(var d=b.length-1;0<d;--d)if(b[d-1].left===b[d])return!0;return!1}});Gs.update=function(b){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");var k=Array(d.length),a=d[d.length-1];k[k.length-1]=new er(a._color,a.key,b,a.left,a.right,a._count);for(b=d.length-2;0<=b;--b)a=d[b],k[b]=a.left===d[b+1]?new er(a._color,a.key,a.value,k[b+1],a.right,a._count):new er(a._color,a.key,a.value,a.left,k[b+1],a._count);return new sE(this.tree._compare,k[0])};
Gs.prev=function(){var b=this._stack;if(0!==b.length){var d=b[b.length-1];if(d.left)for(d=d.left;d;)b.push(d),d=d.right;else for(b.pop();0<b.length&&b[b.length-1].left===d;)d=b[b.length-1],b.pop()}};Object.defineProperty(Gs,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var d=b.length-1;0<d;--d)if(b[d-1].right===b[d])return!0;return!1}});var Tua=Hba,pP={},qP=ei,qx=qP.Buffer;qx.from&&qx.alloc&&qx.allocUnsafe&&qx.allocUnsafeSlow?pP=qP:(w7(qP,
pP),pP.Buffer=tE);w7(qx,tE);tE.from=function(b,d,k){if("number"===typeof b)throw new TypeError("Argument must not be a number");return qx(b,d,k)};tE.alloc=function(b,d,k){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=qx(b);void 0!==d?"string"===typeof k?b.fill(d,k):b.fill(d):b.fill(0);return b};tE.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return qx(b)};tE.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return qP.SlowBuffer(b)};var Kf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Uua={},Iba=il,y7=Sua,x7=Fba,gr=Xl,bla=Tua,rP=pP.Buffer,uE={};Iba(AM,x7);AM.prototype._next=function(b){if((this||Kf)._done++>=(this||Kf)._limit||!(this||Kf)._tree.valid)return Cj(b);var d=(this||Kf)._tree.key;var k=(this||Kf)._tree.value;if(!this._test(d))return Cj(b);(this||Kf).keyAsBuffer&&(d=rP.from(d));(this||Kf).valueAsBuffer&&(k=rP.from(k));(this||Kf)._tree[(this||Kf)._incr]();Cj(function(){b(null,
d,k)})};AM.prototype._test=function(){return!0};hq.clearGlobalStore=function(b){b?Object.keys(uE).forEach(function(d){delete uE[d]}):uE={}};Iba(hq,y7);hq.prototype._open=function(b,d){var k=this||Kf;Cj(function(){d(null,k)})};hq.prototype._put=function(b,d,k,a){if("undefined"===typeof d||null===d)d="";k=(this||Kf)._store[(this||Kf)._location].find(b);(this||Kf)._store[(this||Kf)._location]=k.valid?k.update(d):(this||Kf)._store[(this||Kf)._location].insert(b,d);Cj(a)};hq.prototype._get=function(b,
d,k){var a=(this||Kf)._store[(this||Kf)._location].get(b);if("undefined"===typeof a)return Cj(function(){k(Error("NotFound"))});!1===d.asBuffer||this._isBuffer(a)||(a=rP.from(String(a)));Cj(function(){k(null,a)})};hq.prototype._del=function(b,d,k){(this||Kf)._store[(this||Kf)._location]=(this||Kf)._store[(this||Kf)._location].remove(b);Cj(k)};hq.prototype._batch=function(b,d,k){d=-1;for(var a,f,l,r=b.length,v=(this||Kf)._store[(this||Kf)._location];++d<r;)b[d]&&(a=this._isBuffer(b[d].key)?b[d].key:
String(b[d].key),l=v.find(a),"put"===b[d].type?(f=this._isBuffer(b[d].value)?b[d].value:String(b[d].value),v=l.valid?l.update(f):v.insert(a,f)):v=l.remove());(this||Kf)._store[(this||Kf)._location]=v;Cj(k)};hq.prototype._iterator=function(b){return new AM(this||Kf,b)};hq.prototype._isBuffer=function(b){return rP.isBuffer(b)};hq.destroy=function(b,d){b="$"+b;b in uE&&delete uE[b];Cj(d)};var Vua=Uua=hq.default=hq,Wua={},cla=ph,ela=z7(Mua),dla=z7(Vua);GU.valid=function(){return!0};GU.use_prefix=!1;var Xua=
Wua=function(b){b.adapter("memory",GU,!0)},$h=lively.FreezerRuntime.recorderFor("lively.storage/database.js");$h.nodejsRequire=function(b){if(!$h.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==typeof System?System._nodeRequire(b):require("module")._load(b)};$h.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!$h.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");
var d="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):$h.GLOBAL.process.cwd(),k=$h.nodejsRequire("path").join,a=$h.nodejsRequire("fs"),f=a.mkdirSync,l=a.existsSync;a=a.readFileSync;if(b.includes("/"))return k(d,b);try{var r=a(k(d,"../package.json")),v=JSON.parse(r);if("lively.web"===v.name||"lively.next"===v.name){var y=k(d,"../.livelydbs");l(y)||f(y);return k(y,b)}}catch(A){}d=k(d,".livelydbs");l(d)||f(d);return k(d,b)};$h.nodejs_attemptToLoadProperPouchDB=
function(){if(!$h.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,d=System.normalizeSync("lively.storage/index.js");d=System.normalizeSync("pouchdb",d).replace(/file:\/\//,"");b=b(d,"../../lib/index.js");try{return $h.PouchDB=System._nodeRequire(b),$h.PouchDB.plugin($h.pouchdbAdapterMem),!0}catch(k){return!1}}try{return $h.PouchDB=require("pouchdb"),$h.PouchDB.plugin($h.pouchdbAdapterMem),
!0}catch(k){return!1}};$h._PouchDB=cqa;$h.pouchdbAdapterMem=Xua;$h.Path=ci;$h.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;$h.isNode="undefined"!==typeof global&&"undefined"!==typeof process;$h.PouchDB=$h._PouchDB;$h.PouchDB.plugin&&$h.pouchdbAdapterMem&&$h.PouchDB.plugin($h.pouchdbAdapterMem);$h.createPouchDB=$h.isNode?function(){var b=!1,d=!1;return function(k,a){a=void 0===a?{}:a;b||(b=!0,d=$h.nodejs_attemptToLoadProperPouchDB());
a.adapter||(a.adapter=k.startsWith("http")?"http":d?"leveldb":"memory");"leveldb"==a.adapter&&(k=$h.nodejs_leveldbPath(k));a=Object.assign({},a,{name:k});return new $h.PouchDB(a)}}():function(b,d){return new $h.PouchDB(Object.assign({name:b},d))};var kh=function(b,d){d=void 0===d?{}:d;this.name=b;this.options=d;this._pouchdb=null};kh.findDB=function(b){return this.databases.get(b)};kh.ensureDB=function(b,d){var k=this.findDB(b);if(k)return k;k=new this(b,d);this.databases.set(b,k);b.endsWith("lively.storage-meta")||
this.createMetaEntryForDB(b,d);return k};kh.knownDBs=function(b,d){return $h.Database.ensureDB("lively.storage-meta").getAll().then(function(k){return k.map(function(a){return a._id})})};kh.createMetaEntryForDB=function(b,d){var k=$h.Database.ensureDB("lively.storage-meta");k.has(b).then(function(a){return!a&&k.set(b,{created:Date.now(),options:d})})};kh.knowsDB=function(b){var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(k=d.ensureDB(b),f.yield(k.docCount(),
2)):3!=f.nextAddress?(a=f.yieldResult,0<a?f.return(!0):f.yield(k.destroy(),3)):f.return(!1)})};kh.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};kh.prototype.isDestroyed=function(){return!!this.pouchdb._destroyed};kh.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};kh.prototype.update=function(b,d,k,a){a=void 0===a?0:a;var f=this,l,r,v,y,A,E,F,H,J,O,L,Y,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:return l=
k=k||{},r=void 0===l.ensure?!0:l.ensure,v=void 0===l.retryOnConflict?!0:l.retryOnConflict,y=void 0===l.maxUpdateAttempts?10:l.maxUpdateAttempts,A={latest:!0},E=f,F=E.pouchdb,ea.setCatchFinallyBlocks(2),ea.yield(F.get(b,A),4);case 4:H=ea.yieldResult;ea.leaveTryBlock(3);break;case 2:if(O=ea.enterCatchBlock(),"not_found"!==O.name||!r)throw O;case 3:return ea.yield(d(H),5);case 5:J=ea.yieldResult;if(!J||"object"!==typeof J)return ea.return(null);J._id!==b&&(J._id=b);H&&J._rev!==H._rev&&(J._rev=H._rev);
ea.setCatchFinallyBlocks(6);return ea.yield(F.put(J),8);case 8:return L=ea.yieldResult,Y=L.rev,ea.return(Object.assign(J,{_rev:Y}));case 6:S=ea.enterCatchBlock();if("conflict"===S.name&&v&&a<y)return ea.return(f.update(b,d,k,a+1));throw S;}})};kh.prototype.mixin=function(b,d,k){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,function(l){return Object.assign(l||{_id:b},d)},k))})};kh.prototype.set=function(b,d,k){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,
function(l){return d},k))})};kh.prototype.get=function(b,d){d=void 0===d?{}:d;var k=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.setCatchFinallyBlocks(2),f.yield(k.pouchdb.get(b,d),4);if(2!=f.nextAddress)return f.return(f.yieldResult);a=f.enterCatchBlock();if("not_found"===a.name)return f.return(void 0);throw a;})};kh.prototype.has=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(d.get(b),
2):k.return(!!k.yieldResult)})};kh.prototype.add=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d.pouchdb.post(b))})};kh.prototype.docList=function(b){b=void 0===b?{}:b;var d=this,k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(d.pouchdb.allDocs(b),2);k=E.yieldResult;a=k.rows;f=[];for(l=0;l<a.length;l++)r=a[l],v=r.id,y=r.value,A=y.rev,f.push({id:v,rev:A});return E.return(f)})};
kh.prototype.docCount=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(b.pouchdb.allDocs(),2);d=k.yieldResult;return k.return(d.rows.length)})};kh.prototype.revList=function(b){var d=this,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(d.pouchdb.get(b,{revs:!0}),2);k=r.yieldResult;a=k._revisions;f=a.start;l=a.ids;return r.return(l.map(function(v){return f--+"-"+v}))})};
kh.prototype.getAllRevisions=function(b,d){d=void 0===d?{}:d;var k=this,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=d,f=void 0===a.skip?0:a.skip,l=void 0===a.limit?0:a.limit,y.yield(k.revList(b),2)):3!=y.nextAddress?(r=y.yieldResult,0<f&&(r=r.slice(f)),0<l&&(r=r.slice(0,l)),v=r.map(function(A){return{rev:A,id:b}}),y.yield(k.getDocuments(v),3)):y.return(y.yieldResult)})};kh.prototype.getAll=function(b){b=void 0===b?{}:b;var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return f.yield(d.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);k=f.yieldResult;a=k.rows;return f.return(a.map(function(l){return l.doc}))})};kh.prototype.setDocuments=function(b,d){var k=this,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(k.pouchdb.bulkDocs(b,d),2);case 2:a=E.yieldResult,f=0;case 3:if(!(f<a.length)){E.jumpTo(5);break}l=b[f];r=a[f];if(r.ok||"conflict"!==r.name||l._rev){E.jumpTo(4);break}return E.yield(k.set(l._id,
l),7);case 7:v=E.yieldResult,y=v._id,A=v._rev,a[f]={ok:!0,id:y,rev:A};case 4:f++;E.jumpTo(3);break;case 5:return E.return(a)}})};kh.prototype.updateDocuments=function(b,d,k){var a=this,f,l,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return L.yield(a.pouchdb.bulkDocs(b,k),2);case 2:f=L.yieldResult,l=[],r={},v=0;case 3:if(!(v<f.length)){if(!l.length){L.jumpTo(8);break}H=Object;J=H.assign;O=r;return L.yield(a.updateDocuments(l,d,k),9)}y=
b[v];A=f[v];r[A._id||y._id]=A;if(A.ok||"conflict"!==A.name){L.jumpTo(4);break}return L.yield(a.get(y._id),7);case 7:if(E=L.yieldResult,F=d(E,y))F._id||(F._id=y._id),F._rev||(F._rev=E._rev),l.push(F);case 4:v++;L.jumpTo(3);break;case 9:r=J.call(H,{},O,{},L.yieldResult);case 8:return L.return(r)}})};kh.prototype.getDocuments=function(b,d){d=void 0===d?{}:d;var k=this,a,f,l,r,v,y,A,E,F,H,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){if(1==O.nextAddress)return a=d,f=void 0===a.ignoreErrors?
!0:a.ignoreErrors,O.yield(k.pouchdb.bulkGet({docs:b}),2);l=O.yieldResult;r=l.results;v=[];for(y=0;y<r.length;y++)for(A=r[y],E=A.docs,F=A.id,console.assert(1===E.length,"getDocuments: expected only one doc for "+F),H=0;H<E.length;H++)J=E[H],f&&!J.ok||v.push(J.ok||J.error||J);return O.return(v)})};kh.prototype.query=function(b,d){return this.pouchdb.query(b,d)};kh.prototype.remove=function(b,d,k){var a=this,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return"undefined"!==
typeof d?(f={_id:b,_rev:d},r.jumpTo(2)):r.yield(a.get(b),3);2!=r.nextAddress&&(f=r.yieldResult);l=f;return r.return(l?a.pouchdb.remove(l):void 0)})};kh.prototype.removeAll=function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d=b.pouchdb,a.yield(d.allDocs(),2)):3!=a.nextAddress?(k=a.yieldResult,a.yield(Promise.all(k.rows.map(function(f){return d.remove(f.id,f.value.rev)})),3)):a.return(a.yieldResult)})};kh.prototype.replicateTo=function(b,
d){b instanceof $h.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,d)};kh.prototype.replicateFrom=function(b,d){b instanceof $h.Database&&(b=b.pouchdb);return this.pouchdb.replicate.from(b,d)};kh.prototype.sync=function(b,d){b instanceof $h.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,d)};kh.prototype.getConflicts=function(b){var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(d.pouchdb.query("conflict_index/conflict_index",
Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);k=f.yieldResult;a=k.rows;return f.return(a.map(function(l){var r={id:l.id,rev:l.doc._rev,doc:l.doc};l.doc._conflicts&&(r.conflicts=l.doc._conflicts,delete l.doc._conflicts);return r}))})};kh.prototype.resolveConflicts=function(b,d){var k=this,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(k.pouchdb.get(b,{conflicts:!0}),2);case 2:return a=E.yieldResult,f=a._conflicts.map(function(F){return{id:b,
rev:F}}),E.yield(k.getDocuments(f),3);case 3:l=E.yieldResult,r=a,v=$jscomp.makeIterator(l),y=v.next();case 4:if(y.done){E.jumpTo(6);break}A=y.value;return E.yield(d(r,A),7);case 7:return(r=E.yieldResult)?E.yield(k.set(b,r),8):E.return(null);case 8:return r=E.yieldResult,E.yield(k.pouchdb.remove(A),5);case 5:y=v.next();E.jumpTo(4);break;case 6:return E.return(r)}})};kh.prototype.diffWith=function(b){var d=this,k,a,f,l,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress)return L.yield(b.docList(),2);if(3!=L.nextAddress)return k=L.yieldResult,L.yield(d.docList(),3);a=L.yieldResult;f=k.reduce(function(Y,S){var ea={};return Object.assign(Y,(ea[S.id]=S.rev,ea))},{});l=a.reduce(function(Y,S){var ea={};return Object.assign(Y,(ea[S.id]=S.rev,ea))},{});r=[];v=[];y=[];for(A in f)E=f[A],(F=l[A])?E!=F&&y.push({right:{id:A,rev:E},left:{id:A,rev:F}}):v.push({id:A,rev:E});for(H in l)J=l[H],(O=f[H])||r.push({id:H,rev:J});return L.return({inLeft:r,inRight:v,changed:y})})};
kh.loadDump=function(b,d){d=void 0===d?{}:d;var k=this,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=b,f=a.header,l=a.docs,r=d.name||f.name,v=k.ensureDB(r),y.yield(v.setDocuments(l,{new_edits:!1}),2)):y.return(v)})};kh.prototype.dump=function(b){b=void 0===b?{}:b;var d=this,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress)return k=b,a=k.filterFn,f=k.name,l=k.type,r=k.dbInfo,v=
d,y=v.name,A=v.pouchdb,F=E=f||y,H=l||A.type(),J=(new Date).toJSON(),O=Object,L=O.assign,ea.yield(A.info(),2);if(3!=ea.nextAddress)return Y={name:F,db_type:H,start_time:J,db_info:L.call(O,{},ea.yieldResult,{db_name:E},r)},ea.yield(d.getAll({attachments:!0}),3);S=ea.yieldResult;"function"===typeof a&&(S=a(S,Y));return ea.return({header:Y,docs:S})})};kh.prototype.backup=function(b){b=void 0===b?1:b;var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?
(k=d.name+"_backup_"+b,a=d.constructor.ensureDB(k),f.yield(d.replicateTo(a),2)):f.return(a)})};kh.prototype.migrate=function(b){var d=this,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(d.getAll(),2);if(3!=y.nextAddress){k=y.yieldResult;a=[];f=[];for(l=0;l<k.length;l++)r=k[l],(v=b(r,l))?(v.hasOwnProperty("_id")||(v._id=r._id),v.hasOwnProperty("_rev")&&delete v._rev,a.push(v)):f.push(r);return y.yield(d.setDocuments(a),3)}return y.return({migrated:a.length,
unchanged:f.length})})};kh.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};kh.prototype.createDesignDoc=function(b){var d=b.name,k=b.mapFn,a=b.reduceFn,f=b.filterFn;b={_id:"_design/"+d,version:void 0===b.version?1:b.version};f&&$h.Path("filters."+d).set(b,f.toString(),!0);k&&$h.Path("views."+d+".map").set(b,k.toString(),!0);a&&$h.Path("views."+d+".reduce").set(b,a.toString(),!0);return b};kh.prototype.addDesignDocs=function(b,d){d=void 0===d?!1:d;var k=this,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==
l.nextAddress?(a=k.createDesignDocs(b),l.yield(k.updateDocuments(a,function(r,v){return!r.hasOwnProperty("version")||v.hasOwnProperty("version")&&v.version>r.version?v:null}),2)):3!=l.nextAddress?(f=l.yieldResult,d?l.yield(Promise.all(a.map(function(r){return k.designDocDoQueryStale(r._id)})),3):l.jumpTo(3)):l.return(f)})};kh.prototype.addDesignDoc=function(b,d){var k=b.name,a=b.mapFn,f=b.reduceFn,l=b.version;d=void 0===d?!1:d;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==
A.nextAddress?(v=r.createDesignDoc({name:k,mapFn:a,reduceFn:f,version:l}),A.yield(r.set(v._id,v),2)):3!=A.nextAddress?(y=A.yieldResult,d?A.yield(r.designDocDoQueryStale(v._id),3):A.jumpTo(3)):A.return(y)})};kh.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};kh.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(kh.prototype,{pouchdb:{configurable:!0,
enumerable:!0,get:function(){return this._pouchdb?this._pouchdb:this._pouchdb=$h.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(kh,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return $h.PouchDB},set:function(b){$h.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});$h.Database=kh;$h.default=kh;var ve=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");ve.isHash=function(b){return"string"===
typeof b&&40===b.length&&b.match(ve.hashRe)};ve.checkArg=function(b,d,k){if("undefined"===typeof d&&"string"===typeof k&&!k.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===d&&"string"===typeof k&&!k.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof k){var a=typeof d,f=d?d.constructor.name:"";if(!k.split("|").some(function(l){return a===l||f===l}))throw Error('parameter "'+b+'" expected to be of type '+k+" but is "+(f||a));}if("function"===typeof k&&
(d=k(d))&&d.error)throw Error('check of parameter "'+b+'" failed: '+d.error);};ve.checkArgs=function(b,d,k){for(var a in d)ve.checkArg(a,b[a],d[a]);if("function"===typeof k&&(d=k(b))&&d.error)throw Error(d.error);return b};ve.Database=kh;ve.resource=Xb;ve.obj=dg;ve.promise=Hg;ve.arr=Lf;ve.string=Ih;ve.Path=ci;ve.parse=ce;ve.categorizer=LH;ve.sha1=function(){function b(){var l=f.createHash("sha1");return{update:function(r){return l.update(r)},digest:function(){return l.digest("hex")}}}function d(l){function r(ea){A[L]|=
(255&ea)<<Y;Y?Y-=8:(L++,Y=24);16===L&&v()}function v(){for(var ea=16;80>ea;ea++){var qa=A[ea-3]^A[ea-8]^A[ea-14]^A[ea-16];A[ea]=qa<<1|qa>>>31}var Fa,K;qa=E;var Z=F,R=H,U=J,na=O;for(ea=0;80>ea;ea++){20>ea?(Fa=U^Z&(R^U),K=1518500249):40>ea?(Fa=Z^R^U,K=1859775393):60>ea?(Fa=Z&R|U&(Z|R),K=2400959708):(Fa=Z^R^U,K=3395469782);var aa=(qa<<5|qa>>>27)+Fa+na+K+(0|A[ea]);na=U;U=R;R=Z<<30|Z>>>2;Z=qa;qa=aa}E=E+qa|0;F=F+Z|0;H=H+R|0;J=J+U|0;O=O+na|0;for(ea=L=0;16>ea;ea++)A[ea]=0}function y(ea){for(var qa="",Fa=
28;0<=Fa;Fa-=4)qa+=(ea>>Fa&15).toString(16);return qa}var A,E=1732584193,F=4023233417,H=2562383102,J=271733878,O=3285377520,L=0,Y=24,S=0;return A=l?k:new Uint32Array(80),{update:function(ea){if("string"==typeof ea){var qa=ea.length;S+=8*qa;for(var Fa=0;Fa<qa;Fa++)r(ea.charCodeAt(Fa))}else for(qa=ea.length,S+=8*qa,Fa=0;Fa<qa;Fa++)r(ea[Fa])},digest:function(){r(128);(14<L||14===L&&24>Y)&&v();L=14;Y=24;r(0);r(0);r(0xffffffffff<S?S/1099511627776:0);r(4294967295<S?S/4294967296:0);for(var ea=24;0<=ea;ea-=
8)r(S>>ea);return y(E)+y(F)+y(H)+y(J)+y(O)}}}var k,a,f;return"object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(f="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(k=new Uint32Array(80),a=d),function(l){if(void 0===l)return a(!1);var r=a(!0);return r.update(l),r.digest()}}();ve.hashRe=/^[0-9a-f]+$/i;ve.objectDBs=ve.objectDBs||new Map;var Th=function(b,d){this.name=b;if(!d.snapshotLocation||!d.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=d.snapshotLocation;this.__versionDB=this.__commitDB=null};Th.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(b=ve.Database.ensureDB("internal__objectdb-meta"),d.yield(b.getAll(),2)):d.return(d.yieldResult.map(function(k){return k._id}))})};Th.find=function(b){var d=this,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(k=ve.objectDBs.get(b))return l.return(k);a=ve.Database.ensureDB("internal__objectdb-meta");
return l.yield(a.get(b),2)}return(f=l.yieldResult)?l.return(d.named(b,f)):l.return()})};Th.named=function(b,d){d=void 0===d?{}:d;var k=ve.objectDBs.get(b);if(k)return k;if(!d||!d.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof d.snapshotLocation)try{d.snapshotLocation=ve.resource(d.snapshotLocation)}catch(a){d.snapshotLocation=ve.resource(System.baseURL).join(d.snapshotLocation)}k=new this(b,d);ve.objectDBs.set(b,k);ve.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},d,{snapshotLocation:d.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return k};Th.prototype.destroy=function(){var b=this,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(d=ve.Database.findDB(b.name+"-commits"))?f.yield(d.destroy(),2):f.jumpTo(2);if(4!=f.nextAddress)return(k=ve.Database.findDB(b.name+"-version-graph"))?f.yield(k.destroy(),4):f.jumpTo(4);ve.objectDBs.delete(b.name);a=
ve.Database.ensureDB("internal__objectdb-meta");return f.yield(a.remove(b.name),0)})};Th.prototype.snapshotResourceFor=function(b){var d=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(d+"/"+b+".json")};Th.prototype.snapshotObject=function(b,d,k,a,f,l,r,v){var y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return A=function(H){return H},F.yield(A(k),2);E=F.yieldResult;return F.return(y.commit(b,d,E,f,l,r,v))})};Th.prototype.loadObject=
function(b,d,k,a,f){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.loadSnapshot(b,d,a,f),2);r=y.yieldResult;v=function(A){return A};return y.return(v(r))})};Th.prototype.has=function(b,d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(k.objectStats(b,d),2):a.return(!!a.yieldResult)})};Th.prototype.objects=function(b){var d=this,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(d.objectStats(b),2);k=l.yieldResult;if(b)return l.return(Object.keys(k||{}));a={};for(f in k)a[f]=Object.keys(k[f]);return l.return(a)})};Th.prototype.objectStats=function(b,d){var k=this,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:a={};if(f=k.__commitDB){R.jumpTo(2);break}return R.yield(k._commitDB(),3);case 3:f=R.yieldResult;case 2:return l=f,r={reduce:!0,group:!0},b&&d?r.key=
b+"\x00"+d:b&&(r.startkey=b+"\x00",r.endkey=b+"\ufff0"),R.setCatchFinallyBlocks(4),R.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",r),6);case 6:v=R.yieldResult;y=v.rows;A=$jscomp.makeIterator(y);for(E=A.next();!E.done;E=A.next())H=F=E.value,J=H.key,O=H.value,L=O.count,Y=O.max,S=O.min,ea=$jscomp.makeIterator(J.split("\x00")),qa=ea.next().value,Fa=ea.next().value,K=a[qa]||(a[qa]={}),K[Fa]={count:L,newest:Y,oldest:S};R.leaveTryBlock(5);break;case 4:return Z=R.enterCatchBlock(),console.error(Z),
R.return(a);case 5:return b&&d?R.return((a[b]||{})[d]):b?R.return(a[b]):R.return(a)}})};Th.prototype.getCommits=function(b,d,k,a){k=void 0===k?"HEAD":k;a=void 0===a?Infinity:a;var f=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(f._log(b,d,k,a),2);case 2:l=A.yieldResult;if(!l.length)return A.return([]);if(r=f.__commitDB){A.jumpTo(3);break}return A.yield(f._commitDB(),4);case 4:r=A.yieldResult;case 3:return v=r,A.yield(v.getDocuments(l.map(function(E){return{id:E}})),
5);case 5:return y=A.yieldResult,A.return(y)}})};Th.prototype.getCommit=function(b){var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(k=d.__commitDB)?f.jumpTo(2):f.yield(d._commitDB(),3);2!=f.nextAddress&&(k=f.yieldResult);a=k;return f.return(a.get(b))})};Th.prototype.getCommitsWithIds=function(b){var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b.length?(k=d.__commitDB)?f.jumpTo(2):f.yield(d._commitDB(),
3):f.return([]);2!=f.nextAddress&&(k=f.yieldResult);a=k;return f.return(a.getDocuments(b.map(function(l){return{id:l}})))})};Th.prototype.getLatestCommit=function(b,d,k,a){k=void 0===k?"HEAD":k;a=void 0===a?!1:a;var f=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:return l=$jscomp,r=l.makeIterator,H.yield(f._log(b,d,k,1),2);case 2:v=r.call(l,H.yieldResult);y=v.next().value;if(!y)return H.return(null);if(A=f.__commitDB){H.jumpTo(3);break}return H.yield(f._commitDB(),
4);case 4:A=H.yieldResult;case 3:return E=A,H.yield(E.get(y),5);case 5:return(F=H.yieldResult)&&F.deleted&&!a?H.return(null):H.return(F)}})};Th.prototype.commit=function(b,d,k,a,f,l,r){l=void 0===l?"HEAD":l;var v=this,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){switch(xa.nextAddress){case 1:y=a;A=y.author;E=void 0===y.description?"no description":y.description;F=void 0===y.tags?[]:y.tags;H=y.timestamp;J=void 0===y.message?"":y.message;
O=y.metadata;L=y.preview;if(!b)throw Error("object needs a type");if(!d)throw Error("object needs a name");if(!A)throw Error("Cannot commit "+b+"/"+d+" without user");if(Y=v.__versionDB){xa.jumpTo(2);break}return xa.yield(v._versionDB(),3);case 3:Y=xa.yieldResult;case 2:return S=Y,xa.yield(v.versionGraph(b,d),4);case 4:Fa=(qa=(ea=xa.yieldResult)?ea.refs[l]:null)?[qa]:[];if(r){if(!ea)throw Error('Trying to store "'+b+"/"+d+'" on top of expected version '+r+" but no version entry exists!");if(qa!==
r)throw Error('Trying to store "'+b+"/"+d+'" on top of expected version '+r+" but ref "+l+" is of version "+qa+"!");}Z=(K=ve.isHash(k))?null:k?JSON.stringify(k):null;R=v._createCommit(b,d,E,F,O,A,H,J,Fa,K?null:k,Z,f||L,K?k:null);if(!k||K){xa.jumpTo(5);break}U=v.snapshotResourceFor(R);return xa.yield(U.parent().ensureExistance(),6);case 6:return U.canDealWithJSON?xa.yield(U.writeJson(k),5):xa.yield(U.write(Z),5);case 5:if(na=v.__commitDB){xa.jumpTo(11);break}return xa.yield(v._commitDB(),12);case 12:na=
xa.yieldResult;case 11:return aa=na,xa.yield(aa.set(R._id,R),13);case 13:return R=xa.yieldResult,ea||(ea={refs:{},history:{}}),ea.refs[l]=R._id,ea.history[R._id]=Fa,xa.yield(S.set(b+"/"+d,ea),14);case 14:return xa.return(R)}})};Th.prototype.loadSnapshot=function(b,d,k,a){a=void 0===a?"HEAD":a;var f=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(k&&"string"!==typeof k){l=k;y.jumpTo(2);break}if(k){if(r=f.__commitDB){y.jumpTo(6);break}return y.yield(f._commitDB(),
7)}return y.yield(f.getLatestCommit(b,d,a),5);case 5:l=y.yieldResult;y.jumpTo(2);break;case 7:r=y.yieldResult;case 6:return v=r,y.yield(v.get(k),8);case 8:l=y.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+d+" (using "+k+")");return y.return(f.snapshotResourceFor(l).readJson())}})};Th.prototype.revert=function(b,d,k,a){var f=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(l=f.__versionDB){y.jumpTo(2);break}return y.yield(f._versionDB(),
3);case 3:l=y.yieldResult;case 2:return r=l,y.yield(r.get(b+"/"+d),4);case 4:return v=y.yieldResult,v.refs[k||"HEAD"]=a,delete v.deleted,y.yield(r.set(b+"/"+d,v),5);case 5:return y.return(v)}})};Th.prototype._createCommit=function(b,d,k,a,f,l,r,v,y,A,E,F,H){v=void 0===v?"":v;y=void 0===y?[]:y;!F&&A&&A.preview&&(F=A.preview);return this._createCommitFromSpec({name:d,type:b,timestamp:r||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},tags:a,description:k,preview:F,message:v,content:H||E&&
ve.sha1(E)||null,deleted:!H&&!A,metadata:f,ancestors:y},!0)};Th.prototype._createCommitFromSpec=function(b,d){d=void 0===d?!1:d;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!d&&b.content&&(d=ve.isHash(b.content),d||(b.content=ve.sha1(b.content)));d=ve.obj.dissoc(b,["preview"]);d=ve.sha1(JSON.stringify(d));
return Object.assign(b,{_id:d})};Th.prototype._commitDB=function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);d=b.name+"-commits";if(k=ve.Database.findDB(d))return a.return(b.__commitDB=k);k=ve.Database.ensureDB(d);return a.yield(k.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=k)})};Th.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if(!b.__commitDB){d.jumpTo(2);
break}return d.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){d.jumpTo(0);break}return d.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,d.jumpToEnd()}})};Th.prototype.versionGraph=function(b,d){var k=this,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(a=k.__versionDB){r.jumpTo(2);break}return r.yield(k._versionDB(),3);case 3:a=r.yieldResult;case 2:return f=a,r.yield(f.get(b+"/"+d),4);case 4:return l=
r.yieldResult,r.return(!l||l.deleted||l._deleted?null:l)}})};Th.prototype._log=function(b,d,k,a){a=void 0===a?Infinity:a;var f=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(f.versionGraph(b,d),2);l=A.yieldResult;if(!l||l.deleted||l._deleted)return A.return([]);r=l.refs.HEAD;for(v=[];;){if(v.includes(r))throw Error("cyclic version graph???");v.push(r);y=$jscomp.makeIterator(l.history[r]||[]);r=y.next().value;if(!r||v.length>=a)break}return A.return(v)})};
Th.prototype._findTimestampedVersionsOfObjectNamed=function(b,d){d=void 0===d?{}:d;var k=this,a,f,l,r,v,y,A,E,F,H,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:a=d;f=void 0===a.include_docs?!0:a.include_docs;l=void 0===a.descending?!0:a.descending;r=void 0===a.startTime?"0".repeat(13):a.startTime;v=void 0===a.endTime?"9".repeat(13):a.endTime;y=b+"\x00"+(l?v:r);A=b+"\x00"+(l?r:v);if(E=k.__commitDB){O.jumpTo(2);break}return O.yield(k._commitDB(),3);case 3:E=
O.yieldResult;case 2:return F=E,O.yield(F.pouchdb.query("nameAndTimestamp_index",Object.assign({},d,{descending:l,include_docs:f,startkey:y,endkey:A})),4);case 4:return H=O.yieldResult,J=H.rows,O.return(f?J.map(function(L){return L.doc}):J.map(function(L){return L.id}))}})};Th.prototype._versionDB=function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);d=b.name+"-version-graph";if(k=ve.Database.findDB(d))return a.return(b.__versionDB=
k);k=ve.Database.ensureDB(d);return a.yield(k.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=k)})};Th.prototype.exportToDir=function(b,d,k,a){k=void 0===k?!1:k;a=void 0===a?!1:a;var f=this,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,jb,ob,pa,ka,wa,Ka,Fb,hc,Ub,ac,Ic,Mb,ed,Bd,ja,Ba,Ea,wb,$b,zd,yd,Mc,Me;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){switch(Fe.nextAddress){case 1:"string"===typeof b&&(b=ve.resource(b));if(f.__commitDB){Fe.jumpTo(2);break}return Fe.yield(f._commitDB(),
3);case 3:case 2:if(l=f.__versionDB){Fe.jumpTo(4);break}return Fe.yield(f._versionDB(),5);case 5:l=Fe.yieldResult;case 4:r=l;v=[];if(!d)return Fe.yield(r.getAll(),13);y=$jscomp.makeIterator(d);A=y.next();case 8:if(A.done){Fe.jumpTo(7);break}F=E=A.value;H=F.name;J=F.type;O=b.join(J).join(H).asDirectory();return Fe.yield(f.versionGraph(J,H),11);case 11:return L=Fe.yieldResult,Y=L.refs,S=L.history,ea=Object.keys(S),Fe.yield(f.getCommitsWithIds(ea),12);case 12:qa=Fe.yieldResult;v.push({refs:Y,history:S,
currentExportDir:O,commits:qa,name:H,type:J});A=y.next();Fe.jumpTo(8);break;case 13:Fa=Fe.yieldResult,K=$jscomp.makeIterator(Fa),Z=K.next();case 14:if(Z.done){Fe.jumpTo(7);break}U=R=Z.value;na=U.refs;aa=U.history;xa=U._id;if(xa.startsWith("_")){Fe.jumpTo(15);break}return Fe.yield(f.getCommit(na.HEAD||Object.keys(aa)[0]),17);case 17:return jb=Fe.yieldResult,ob=jb.type,pa=jb.name,ka=b.join(ob).join(pa).asDirectory(),wa=Object.keys(aa),Fe.yield(f.getCommitsWithIds(wa),18);case 18:Ka=Fe.yieldResult,v.push({refs:na,
history:aa,currentExportDir:ka,commits:Ka,name:pa,type:ob});case 15:Z=K.next();Fe.jumpTo(14);break;case 7:Fb={},hc=$jscomp.makeIterator(v),Ub=hc.next();case 19:if(Ub.done){Fe.jumpTo(0);break}Ic=ac=Ub.value;Mb=Ic.refs;ed=Ic.history;Fb.$jscomp$loop$prop$currentExportDir$1223$2541=Ic.currentExportDir;Bd=Ic.commits;ja=Ic.name;Ba=Ic.type;a||(Bd=Bd.filter(function(Jh){return!Jh.deleted}));Ea=k?Bd.map(function(Jh){return function(fh){if(fh.deleted||fh._deleted||!fh.content)return null;delete fh._rev;fh=
f.snapshotResourceFor(fh);var dj=Jh.$jscomp$loop$prop$currentExportDir$1223$2541.join(fh.parent().name()+"/"+fh.name());return{from:fh,to:dj}}}(Fb)).filter(Boolean):[];k||Bd.forEach(function(Jh){delete Jh._rev});return Fe.yield(Fb.$jscomp$loop$prop$currentExportDir$1223$2541.ensureExistance(),22);case 22:return Fe.yield(Fb.$jscomp$loop$prop$currentExportDir$1223$2541.join("index.json").writeJson({name:ja,type:Ba}),23);case 23:return Fe.yield(Fb.$jscomp$loop$prop$currentExportDir$1223$2541.join("commits.json").writeJson(Bd),
24);case 24:return Fe.yield(Fb.$jscomp$loop$prop$currentExportDir$1223$2541.join("history.json").writeJson({refs:Mb,history:ed}),25);case 25:wb=$jscomp.makeIterator(Ea),$b=wb.next();case 26:if($b.done){Fb={$jscomp$loop$prop$currentExportDir$1223$2541:Fb.$jscomp$loop$prop$currentExportDir$1223$2541};Ub=hc.next();Fe.jumpTo(19);break}yd=zd=$b.value;Mc=yd.from;Me=yd.to;return Fe.yield(Mc.copyTo(Me),27);case 27:$b=wb.next(),Fe.jumpTo(26)}})};Th.prototype.exportToSpecs=function(b,d){d=void 0===d?!1:d;var k=
this,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:a=[];if(b){ea.jumpTo(2);break}b=[];return ea.yield(k.objectStats(),3);case 3:for(l in f=ea.yieldResult||{},f)for(r in f[l])b.push({type:l,name:r});case 2:v=$jscomp.makeIterator(b),y=v.next();case 4:if(y.done){ea.jumpTo(6);break}E=A=y.value;F=E.name;H=E.type;return ea.yield(k.versionGraph(H,F),7);case 7:return J=ea.yieldResult,O=J.refs,L=J.history,Y=Object.keys(L),ea.yield(k.getCommitsWithIds(Y),
8);case 8:S=ea.yieldResult;d||(S=S.filter(function(qa){return!qa.deleted}));S.forEach(function(qa){delete qa._rev});a.push({type:H,name:F,commits:S,history:{refs:O,history:L}});y=v.next();ea.jumpTo(4);break;case 6:return ea.return(a)}})};Th.prototype.importFromDir=function(b,d,k){function a(J){var O,L,Y,S,ea,qa,Fa,K,Z,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:return O=$jscomp,L=O.makeIterator,U.yield(Promise.all([J.join("index.json").readJson(),
J.join("commits.json").readJson(),J.join("history.json").readJson()]),2);case 2:Y=L.call(O,U.yieldResult);S=Y.next().value;ea=S.type;qa=S.name;Fa=Y.next().value;K=Y.next().value;if(!k){Z=[];U.jumpTo(3);break}return U.yield(J.dirList(1,{exclude:function(na){return!na.isDirectory()}}),4);case 4:Z=U.yieldResult;case 3:return R=Z,U.return({dir:J,type:ea,name:qa,commits:Fa,history:K,snapshotDirs:R})}})}d=void 0===d?!1:d;k=void 0===k?!1:k;var f=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:return J.yield(b.dirList(3,
{exclude:function(O){return!O.isDirectory()&&"index.json"!==O.name()}}),2);case 2:l=J.yieldResult,l=l.filter(function(O){return"index.json"===O.name()}),r=l.map(function(O){return O.parent()}),v=[],y=$jscomp.makeIterator(r),A=y.next();case 3:if(A.done){J.jumpTo(5);break}E=A.value;F=v;H=F.push;return J.yield(a(E),6);case 6:H.call(F,J.yieldResult);A=y.next();J.jumpTo(3);break;case 5:return J.return(f.importFromSpecs(v,d,k))}})};Th.prototype.importFromSpecs=function(b,d,k){d=void 0===d?!1:d;k=void 0===
k?!1:k;var a=this,f,l,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:if(d){L.jumpTo(2);break}if(f=a.__versionDB){L.jumpTo(3);break}return L.yield(a._versionDB(),4);case 4:f=L.yieldResult;case 3:l=f,r=$jscomp.makeIterator(b),v=r.next();case 5:if(v.done){L.jumpTo(2);break}A=y=v.value;E=A.type;F=A.name;return L.yield(l.get(E+"/"+F),8);case 8:if(L.yieldResult)throw Error("Import failed: object "+E+"/"+F+" already exists and overwrite is not allowed");
v=r.next();L.jumpTo(5);break;case 2:H=$jscomp.makeIterator(b),J=H.next();case 9:if(J.done){L.jumpTo(11);break}O=J.value;return L.yield(a.importFromSpec(O,!0,k),10);case 10:J=H.next();L.jumpTo(9);break;case 11:return L.return(b)}})};Th.prototype.importFromSpec=function(b,d,k){d=void 0===d?!1:d;k=void 0===k?!1:k;var a=this,f,l,r,v,y,A,E,F,H,J,O,L,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:if(f=a.__versionDB){S.jumpTo(2);break}return S.yield(a._versionDB(),
3);case 3:f=S.yieldResult;case 2:l=f;if(r=a.__commitDB){S.jumpTo(4);break}return S.yield(a._commitDB(),5);case 5:r=S.yieldResult;case 4:v=r;y=a;A=y.snapshotLocation;E=b;F=E.type;H=E.name;J=E.commits;O=E.history;L=E.snapshotDirs;if(!(Y=!d)){S.jumpTo(6);break}return S.yield(l.get(F+"/"+H),7);case 7:Y=S.yieldResult;case 6:if(Y)throw Error("Import failed: object "+F+"/"+H+" already exists and overwrite is not allowed");return S.yield(Promise.all([v.setDocuments(J),l.set(F+"/"+H,O)].concat($jscomp.arrayFromIterable(L&&
k?L.map(function(ea){return ea.copyTo(A.join(ea.name()).asDirectory())}):[]))),8);case 8:return S.return(b)}})};Th.prototype.importFromResource=function(b,d,k,a,f){f=void 0===f?!1:f;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(k.readJson(),2);case 2:r=y.yieldResult;if(!(v=f)){y.jumpTo(3);break}return y.yield(l.has(b,d),4);case 4:v=y.yieldResult;case 3:if(!v){y.jumpTo(5);break}return y.yield(l.delete(b,d,!1),5);case 5:return y.return(l.commit(b,
d,r,a))}})};Th.prototype.replicateTo=function(b,d,k,a){return(new ve.Synchronization(this,b,d,k,Object.assign({method:"replicateTo"},a))).start()};Th.prototype.replicateFrom=function(b,d,k,a){return(new ve.Synchronization(this,b,d,k,Object.assign({method:"replicateFrom"},a))).start()};Th.prototype.sync=function(b,d,k,a){return(new ve.Synchronization(this,b,d,k,Object.assign({method:"sync"},a))).start()};Th.prototype.getConflicts=function(b,d){function k(A,E){var F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){return 1==
H.nextAddress?H.yield(A.getConflicts({include_docs:!0}),2):3!=H.nextAddress?(F=H.yieldResult,H.yield(Promise.all(F.map(function(J){var O,L,Y,S,ea,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress){O=J;L=O.id;Y=O.rev;S=O.conflicts;ea=O.doc;if(d&&d[E]&&!d[E][L])return Fa.return(null);if(!b)return Fa.jumpTo(2);qa=S.map(function(K){return{id:L,rev:K}});return Fa.yield(A.getDocuments(qa),3)}2!=Fa.nextAddress&&(S=Fa.yieldResult);b?ve.obj.dissoc(ea,["_conflicts"]):ea=
null;return Fa.return({id:L,rev:Y,conflicts:S,kind:E,doc:ea})})})),3)):H.return(H.yieldResult.filter(Boolean))})}var a=this,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(f=a.__commitDB){A.jumpTo(2);break}return A.yield(a._commitDB(),3);case 3:f=A.yieldResult;case 2:l=f;if(r=a.__versionDB){A.jumpTo(4);break}return A.yield(a._versionDB(),5);case 5:r=A.yieldResult;case 4:return v=r,A.yield(k(v,"versions"),6);case 6:return y=A.yieldResult,A.yield(k(l,
"commits"),8);case 8:return A.yield(A.yieldResult,7);case 7:return A.return({versionConflicts:y,commitConflicts:A.yieldResult})}})};Th.prototype.resolveConflict=function(b){var d=this,k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:k=b;a=k.resolved;f=k.delete;l=k.kind;r=k.id;if("versions"===l){if(A=d.__versionDB){E.jumpTo(7);break}return E.yield(d._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(y=d.__commitDB){E.jumpTo(5);
break}return E.yield(d._commitDB(),6);case 6:y=E.yieldResult;case 5:v=y;E.jumpTo(3);break;case 8:A=E.yieldResult;case 7:v=A;case 3:return E.yield(v.set(r,a),9);case 9:return E.yield(Promise.all(f.map(function(F){return v.pouchdb.remove(r,F)})),0)}})};Th.prototype.getDiff=function(b,d){var k=this,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,jb,ob,pa,ka,wa,Ka,Fb,hc,Ub,ac,Ic,Mb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ed){switch(ed.nextAddress){case 1:a=b;"string"===typeof b&&
(a=ve.Database.ensureDB(b+"-commits"),d=ve.Database.ensureDB(b+"-version-graph"));if(f=k.__commitDB){ed.jumpTo(2);break}return ed.yield(k._commitDB(),3);case 3:f=ed.yieldResult;case 2:l=f;if(r=k.__versionDB){ed.jumpTo(4);break}return ed.yield(k._versionDB(),5);case 5:r=ed.yieldResult;case 4:return v=r,ed.yield(l.diffWith(a),6);case 6:return y=ed.yieldResult,ed.yield(v.diffWith(d),7);case 7:return A=ed.yieldResult,ed.yield(Promise.all(A.inLeft.map(function(Bd){var ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){return 1==
Ba.nextAddress?(ja=Bd.id,Ba.yield(v.get(Bd.id),2)):Ba.return({id:ja,doc:Ba.yieldResult})})})),8);case 8:return E=ed.yieldResult,F=ve.arr,H=F.groupBy,ed.yield(d.getAll(),9);case 9:return J=H.call(F,ed.yieldResult,function(Bd){return Bd._id}),ed.yield(Promise.all(A.inRight.map(function(Bd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){return ja.return({id:Bd.id,doc:J[Bd.id]})})})),10);case 10:return O=ed.yieldResult,ed.yield(Promise.all(A.changed.map(function(Bd){var ja,Ba,Ea,wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function($b){return 1==
$b.nextAddress?(ja=Object,Ba=ja.assign,Ea=Bd.left,$b.yield(v.get(Bd.left.id),2)):3!=$b.nextAddress?(wb=$b.yieldResult,$b.yield(d.get(Bd.right.id),3)):$b.return(Ba.call(ja,{},Ea,{docA:wb,docB:$b.yieldResult}))})})),11);case 11:return L=ed.yieldResult,Y=ve.arr,S=Y.groupBy,ed.yield(a.getAll(),12);case 12:ea=S.call(Y,ed.yieldResult,function(Bd){return Bd._id}),qa=[],Fa=[],K=[],Z=$jscomp.makeIterator(y.inLeft),R=Z.next();case 13:if(R.done){ed.jumpTo(15);break}U=R.value;na=qa;aa=na.push;return ed.yield(l.get(U.id),
16);case 16:aa.call(na,ed.yieldResult);R=Z.next();ed.jumpTo(13);break;case 15:xa=$jscomp.makeIterator(y.inRight),R=xa.next();case 17:if(R.done){ed.jumpTo(19);break}jb=R.value;ob=Fa;pa=ob.push;return ed.yield(ea[jb.id],20);case 20:pa.call(ob,ed.yieldResult);R=xa.next();ed.jumpTo(17);break;case 19:ka=$jscomp.makeIterator(y.changed),R=ka.next();case 21:if(R.done){ed.jumpTo(23);break}wa=R.value;Ka=K;Fb=Ka.push;return ed.yield(l.get(wa.left.id),24);case 24:return Fb.call(Ka,ed.yieldResult),hc=K,Ub=hc.push,
ed.yield(a.get(wa.right.id),25);case 25:Ub.call(hc,ed.yieldResult);R=ka.next();ed.jumpTo(21);break;case 23:return ac=qa.map(function(Bd){return ve.obj.select(Bd,["_id","name","type"])}),Ic=Fa.map(function(Bd){return ve.obj.select(Bd,["_id","name","type"])}),Mb=K.map(function(Bd){return ve.obj.select(Bd,["_id","name","type"])}),ed.return({changed:L,remote:O,local:E,changedCommitTypeAndNames:Mb,remoteCommitTypeAndNames:Ic,localCommitTypeAndNames:ac})}})};Th.prototype.delete=function(b,d,k){k=void 0===
k?!0:k;var a=this,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Z){switch(Z.nextAddress){case 1:f=[];l=[];if(r=a.__commitDB){Z.jumpTo(2);break}return Z.yield(a._commitDB(),3);case 3:r=Z.yieldResult;case 2:return v=r,y={include_docs:!0,startkey:b+"\x00"+d+"\x00",endkey:b+"\x00"+d+"\uffff"},Z.yield(v.query("nameAndTimestamp_index",y),4);case 4:A=Z.yieldResult;E=A.rows;F=$jscomp.makeIterator(E);for(H=F.next();!H.done;H=F.next())O=J=H.value,L=O.doc,
L.deleted||L._deleted||!L.content||f.push(a.snapshotResourceFor(L)),l.push(Object.assign({},L,{_deleted:!0}));if(Y=a.__versionDB){Z.jumpTo(5);break}return Z.yield(a._versionDB(),6);case 6:Y=Z.yieldResult;case 5:return S=Y,Z.yield(S.get(b+"/"+d),7);case 7:ea=Z.yieldResult;qa=ea._id;Fa=ea._rev;K={_id:qa,_rev:Fa,_deleted:!0};if(k){Z.jumpTo(8);break}return Z.yield(v.setDocuments(l),9);case 9:return Z.yield(S.setDocuments([K]),10);case 10:Promise.all(f.map(function(R){return R.remove()}));case 8:return Z.return({commits:l,
history:K,resources:f})}})};Th.prototype.deleteCommit=function(b,d,k){d=void 0===d?!0:d;k=void 0===k?"HEAD":k;var a=this,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:if(b&&"string"!==typeof b){f=b;qa.jumpTo(2);break}if(!b){qa.jumpTo(2);break}if(l=a.__commitDB){qa.jumpTo(4);break}return qa.yield(a._commitDB(),5);case 5:l=qa.yieldResult;case 4:return r=l,qa.yield(r.get(b),6);case 6:f=qa.yieldResult;case 2:if(!f)throw Error("commit needed!");
if(v=a.__versionDB){qa.jumpTo(7);break}return qa.yield(a._versionDB(),8);case 8:v=qa.yieldResult;case 7:y=v;if(A=a.__commitDB){qa.jumpTo(9);break}return qa.yield(a._commitDB(),10);case 10:A=qa.yieldResult;case 9:return E=A,F=f,H=F.name,J=F.type,O=f.deleted||f._deleted||!f.content?[]:[a.snapshotResourceFor(f)],L=[Object.assign({},f,{_deleted:!0})],qa.yield(y.get(J+"/"+H),11);case 11:Y=qa.yieldResult;if(!Y)throw Error("No history for "+J+"/"+H+"@"+f._id);if(!Y.refs[k])throw Error("Cannot delete commit "+
J+"/"+H+"@"+f._id+" b/c it is not where ref "+k+" is pointing!");S=$jscomp.makeIterator(Y.history[f._id]||[]);ea=S.next().value;if(!ea&&1>=Object.keys(Y.history).length)Y._deleted=!0;else if(ea)delete Y.history[f._id],Y.refs[k]=ea;else throw Error("Cannot delete commit "+J+"/"+H+"@"+f._id+" b/c it has no ancestor but there are still other commits!");if(d){qa.jumpTo(12);break}return qa.yield(y.set(J+"/"+H,Y),13);case 13:return qa.yield(E.setDocuments(L),14);case 14:return qa.yield(Promise.all(O.map(function(Fa){return Fa.remove()})),
12);case 12:return qa.return({commits:L,history:Y,resources:O})}})};$jscomp.global.Object.defineProperties(Th.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});ve.ObjectDB=Th;var Hx=function(b,
d,k,a,f){f=void 0===f?{}:f;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},f);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=d;this.remoteVersionDB=k;this.remoteLocation=a;this.deferred=ve.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Hx.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return ve.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
Hx.prototype.waitForIt=function(){return this.deferred.promise};Hx.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};Hx.prototype._startReplicationAndCopy=function(){function b(Ub){return"paused"===hc&&"paused"===Fb&&0>=Ka.copyCalls&&0>=Ka.copyCallsWaiting?Ub.state="paused":"complete"===hc&&"complete"===Fb&&Ka.isComplete()?Ub.state="complete":Ub.state="running"}function d(Ub,ac){if(ac.length||
"complete"===Fb&&"complete"===hc&&Ka.isComplete()){U.cancel();if(ac.length){Ub.state="complete";Ub.errors=ac;ka.cancel();wa.cancel();var Ic=Error("Synchronization error:\n  "+ac.join("\n  "));Ic.errors=ac;console.log(Ub+" errored")}else console.log(Ub+" completed");Ic?Ub.deferred.reject(Ic):Ub.deferred.resolve(Ub)}}function k(Ub){if(!Ub.content)return null;var ac=Ub.content.slice(0,2);Ub=Ub.content.slice(2);return ac+"/"+Ub+".json"}var a=this,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,
jb,ob,pa,ka,wa,Ka,Fb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ub){switch(Ub.nextAddress){case 1:f=a;l=f.fromObjectDB;r=f.remoteCommitDB;v=f.remoteVersionDB;y=f.remoteLocation;A=f.options;E=A.debug;F=void 0===A.live?!1:A.live;H=void 0===A.retry?!1:A.retry;J=A.method;O=A.replicationFilter;L=void 0===A.pushDesignDocToRemote?!1:A.pushDesignDocToRemote;if(Y=l.__versionDB){Ub.jumpTo(2);break}return Ub.yield(l._versionDB(),3);case 3:Y=Ub.yieldResult;case 2:S=Y;if(ea=l.__commitDB){Ub.jumpTo(4);
break}return Ub.yield(l._commitDB(),5);case 5:ea=Ub.yieldResult;case 4:qa=ea;Fa=l;K=Fa._commitdb_indexes;Z=Fa._versiondb_indexes;R=Fa.snapshotLocation;a.method=J;aa=K.find(function(ac){return"nameTypeFilter"===ac.name});xa=Z.find(function(ac){return"nameTypeFilter"===ac.name});if(!L){Ub.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Ub.yield(r.addDesignDoc(aa),7);case 7:return console.log("adding versionNameTypeFilter"),Ub.yield(v.addDesignDoc(xa),6);case 6:return jb={live:F,retry:H},
ob=Object.assign({},jb),pa=Object.assign({},jb),O&&(ob.filter=eval("("+aa.filterFn+")"),ob.query_params=O,pa.filter=eval("("+xa.filterFn+")"),pa.query_params=O),ka=qa[J](r,ob),wa=S[J](v,pa),Ka={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},hc=Fb="not started",a.versionReplication=wa,a.commitReplication=ka,a.snapshotReplication=Ka,na=r.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),
U=v.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),na.on("change",function(ac){var Ic=ac.id,Mb=ac.changes;ac=ac.doc._conflicts;E&&console.log("commit changes "+Ic+":",Mb,ac);ac&&(console.log("commit conflict "+Ic+":",Mb,ac),a.conflicts.push({db:"commits",id:Ic,changes:Mb,conflicts:ac}))}),U.on("change",function(ac){var Ic=ac.id,Mb=ac.changes;ac=ac.doc._conflicts;E&&console.log("version changes "+Ic+":",Mb,ac);ac&&(console.log("version conflict "+Ic+":",Mb,ac),a.conflicts.push({db:"versions",
id:Ic,changes:Mb,conflicts:ac}))}),ka.on("change",function(ac){var Ic,Mb,ed,Bd,ja,Ba,Ea,wb,$b,zd,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mc){switch(Mc.nextAddress){case 1:"replicateTo"===J?ac={direction:"push",change:ac}:"replicateFrom"===J&&(ac={direction:"pull",change:ac});Ic=ac;Mb=Ic.direction;ed=Ic.change;Bd=ed.docs;console.log(a+" "+("push"===Mb?"send":"received")+" "+Bd.length+" commits");Mc.setCatchFinallyBlocks(2,3);Ba=[];Ea=$jscomp.makeIterator(Bd);for(wb=Ea.next();!wb.done;wb=
Ea.next())$b=wb.value,$b._id.startsWith("_")||(a.changes.push({direction:Mb,kind:"commits",id:$b._id,type:$b.type,name:$b.name}),(zd=k($b))&&Ba.push(zd));Ka.nFilesToCopy+=Ba.length;if(!(0<Ka.copyCalls)){Mc.jumpTo(5);break}Ka.copyCallsWaiting++;return Mc.yield(ve.promise.waitFor(function(){return 0>=Ka.copyCalls}),6);case 6:Ka.copyCallsWaiting--;case 5:return Ka.copyCalls++,b(a),console.log(a+" copying "+Ba.length+" snapshots..."),Mc.yield(ve.promise.parallel(Ba.map(function(Me){return function(){var Fe=
("push"===Mb?R:y).join(Me),Jh=("push"===Mb?y:R).join(Me);return Ka.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+Ka.copyCalls+", "+Fe.url+" => "+Jh.url+")"),Promise.resolve()):Jh.exists().then(function(fh){function dj(Wi){Wi=void 0===Wi?0:Wi;return Fe.copyTo(Jh).catch(function(Tj){if(5<=Wi)throw Tj;return dj(Wi+1)})}return fh?(E&&console.log("Skip copying to "+Jh.url+", already exist"),Promise.resolve()):Fe.exists().then(function(Wi){if(!Wi)return console.warn("Skip copying "+
Fe.url+", does not exist"),Promise.resolve();E&&console.log(a+" Copying "+Fe.url+" => "+Jh.url);return dj(0).then(function(Tj){Ka.nFilesCopied++;Ka.stopped||0!==Ka.nFilesCopied%10||console.log(a+" copied "+Ka.nFilesCopied+" of "+Ka.nFilesToCopy+" snapshots");return Tj})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:Mc.enterFinallyBlock();Ka.copyCalls--;b(a);d(a,ja?[ja]:[]);Mc.leaveFinallyBlock(0);break;case 2:throw yd=Mc.enterCatchBlock(),console.error("error in commitReplication onChange",
yd),ja=yd,yd;}})}).on("paused",function(){Fb="paused";b(a);E&&console.log(a+" commit replication paused")}).on("active",function(){Fb="active";b(a);E&&console.log(a+" commit replication active")}).on("error",function(ac){Fb="complete";b(a);console.error(a+" commit replication error",ac);d(a,[ac])}).on("complete",function(ac){Fb="complete";b(a);ac="sync"===J?ac.push.errors.concat(ac.pull.errors):ac.errors;d(a,ac)}),wa.on("change",function(ac){"replicateTo"===J?ac={direction:"push",change:ac}:"replicateFrom"===
J&&(ac={direction:"pull",change:ac});var Ic=ac.direction;ac=ac.change.docs;E&&console.log(a+" "+("push"===Ic?"send":"received")+" "+ac.length+" histories");ac.forEach(function(Mb){Mb._id.startsWith("_")||a.changes.push({direction:Ic,kind:"versions",id:Mb._id})})}).on("paused",function(){hc="paused";b(a);E&&console.log(a+" version replication paused")}).on("active",function(ac){hc="active";b(a);E&&console.log(a+" version replication active",ac)}).on("error",function(ac){hc="complete";b(a);console.error(a+
" version replication error",ac);d(a,[ac])}).on("complete",function(ac){hc="complete";b(a);ac="sync"===J?ac.push.errors.concat(ac.pull.errors):ac.errors;d(a,ac)}),a.state="running",Ub.return(a)}})};Hx.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?"not started"!==b.state&&b.isSynchonizing?d.yield(b.whenPaused(),2):d.return(b):d.return(b.stop())})};Hx.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Hx.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Hx.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(d){var k=d.direction,a=d.id,f=d.kind;if("_"!==a[0]){if("versions"===f)var l=b[k][a]||(b[k][a]=[]);else"commits"===f&&(a=d.type+"/"+d.name,l=b[k][a]||(b[k][a]=[]));
l.push(d)}});return b}}});ve.Synchronization=Hx;var uC={describe:function(b){function d(v,y){v=v.find(function(H){return H.name===y}).node.value.body;var A=v.body||[],E=(v.comments||[]).find(function(H){return H.end<A[0].start});v={name:y,parameters:[],sideEffect:!1,returns:null,description:""};if(E&&E.text.trim()){E=ve.string.changeIndent(E.text," ",0).split("\n");E=$jscomp.makeIterator(E);for(var F=E.next();!F.done;F=E.next()){F=F.value;if(F.startsWith("ignore-in-doc")){v.description="";break}F.startsWith("side effect:")?
v.sideEffect=JSON.parse(F.split(":")[1]):F.startsWith("returns:")?v.returns=F.split(":")[1].trim():v.description+=F+"\n"}}E=$jscomp.makeIterator(A);for(F=E.next();!F.done;F=E.next())if(F=F.value,"checkArgs"===ve.Path("declarations.0.init.callee.name").get(F)&&(F=ve.Path("declarations.0.id.properties").get(F)))v.parameters=F.map(function(H){return H.key.name});return v}var k=this,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);
if(k._methodSpecs){v.jumpTo(4);break}return v.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=v.yieldResult,f=ve.parse(a,{withComments:!0}),l=ve.categorizer.findDecls(f),k._methodSpecs=l.filter(function(y){return y.parent&&"ObjectDBInterface"===y.parent.name});case 4:return v.return(b?d(k._methodSpecs,b):k._methodSpecs.map(function(y){return d(k._methodSpecs,y.name)}).filter(Boolean));case 2:return r=v.enterCatchBlock(),v.return("Error in describe "+r)}})},ensureDB:function(b){var d,
k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=ve.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),k=d.db,a=d.snapshotLocation,l.yield(ve.ObjectDB.find(k),2);if(f=l.yieldResult)return l.return(!1);ve.ObjectDB.named(k,{snapshotLocation:a});return l.return(!0)})},destroyDB:function(b){var d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(d=ve.checkArgs(b,{db:"string"}),k=d.db,f.yield(ve.ObjectDB.find(k),
2)):3!=f.nextAddress?(a=f.yieldResult)?f.yield(a.destroy(),3):f.return(!1):f.return(!0)})},fetchCommits:function(b){var d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,jb,ob,pa,ka,wa,Ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fb){switch(Fb.nextAddress){case 1:return d=ve.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
k=d.db,a=d.ref,f=d.type,l=d.typesAndNames,r=d.knownCommitIds,v=d.includeDeleted,y=d.filterFn,Fb.yield(ve.ObjectDB.find(k),2);case 2:A=Fb.yieldResult;a||(a="HEAD");if(!A)throw Error("db "+k+" does not exist");if(A.__commitDB){Fb.jumpTo(3);break}return Fb.yield(A._commitDB(),4);case 4:case 3:if(E=A.__versionDB){Fb.jumpTo(5);break}return Fb.yield(A._versionDB(),6);case 6:E=Fb.yieldResult;case 5:F=E;H={};J={};if(l)for(O=H.keys=[],L=$jscomp.makeIterator(l),Y=L.next();!Y.done;Y=L.next())ea=S=Y.value,qa=
ea.type,Fa=ea.name,K=ea.ref,O.push(qa+"/"+Fa),K&&(J[qa+"/"+Fa]=K);else f&&(H.startkey=f+'/\x00"',H.endkey=f+'/\uffff"');return Fb.yield(F.getAll(H),7);case 7:Z=Fb.yieldResult;R=[];U=$jscomp.makeIterator(Z);for(na=U.next();!na.done;na=U.next())!(aa=na.value)||aa.deleted||aa._deleted||(xa=aa,jb=xa._id,ob=xa.refs,jb.startsWith("_")||(pa=ob[J[jb]||a]||a,!pa||r&&r.hasOwnProperty(pa)||R.push(pa)));return Fb.yield(A.getCommitsWithIds(R),8);case 8:ka=Fb.yieldResult;v||(ka=ka.filter(function(hc){return hc&&
!hc.deleted}));if(y)try{wa=eval("("+y+")");if("function"!==typeof wa)throw Error(y+" does not eval to a function!");Ka=ka.filter(wa);if(Array.isArray(Ka))ka=Ka;else throw Error(y+" does not return an array!");}catch(hc){console.error("fetchCommits filterFn failed:",hc)}return Fb.return(ka)}})},fetchVersionGraph:function(b){var d,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return d=ve.checkArgs(b,{db:"string",type:"string",name:"string"}),k=d.db,
a=d.type,f=d.name,A.yield(ve.ObjectDB.find(k),2);if(3!=A.nextAddress){l=A.yieldResult;if(!l)throw Error("db "+k+" does not exist");return A.yield(l.versionGraph(a,f),3)}r=A.yieldResult;v=r.refs;y=r.history;return A.return({refs:v,history:y})})},exists:function(b){var d,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return d=ve.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),k=d.db,a=d.type,f=d.name,l=d.ref,A.yield(ve.ObjectDB.find(k),
2);if(3!=A.nextAddress)return r=A.yieldResult,A.yield(r.versionGraph(a,f),3);v=A.yieldResult;if(!v)return A.return({exists:!1,commitId:void 0});l=l||"HEAD";return(y=v.refs[l])?A.return({exists:!0,commitId:y}):A.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var d,k,a,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:return d=ve.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(U){return U.type&&U.name||U.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),k=d.db,a=d.type,f=d.name,l=d.ref,r=d.commit,v=d.limit,y=d.includeCommits,A=d.knownCommitIds,R.yield(ve.ObjectDB.find(k),2);case 2:E=R.yieldResult;F=l||"HEAD";if(!E)throw Error("db "+k+" does not exist");v||(v=Infinity);r||l||(l=F);if(!r){R.jumpTo(3);break}H=r;if(a&&f){R.jumpTo(3);
break}return R.yield(E.getCommit(r),5);case 5:J=R.yieldResult;if(!J)throw Error("fetchLog: specified commit "+r+" but no commit with this id is in the database!");O=J;a=O.type;f=O.name;case 3:return R.yield(E.versionGraph(a,f),6);case 6:L=R.yieldResult;if(!L)throw Error("Unknown object "+a+"/"+f);Y=L;S=Y.refs;ea=Y.history;H||(H=S[l]);qa=H;for(Fa=[];Fa.length<v&&!Fa.includes(qa);){Fa.push(qa);K=ea[qa];if(!K||!K.length)break;Z=$jscomp.makeIterator(K);qa=Z.next().value}if(!y){R.jumpTo(7);break}A&&(Fa=
Fa.filter(function(U){return!A.hasOwnProperty(U)}));return R.yield(E.getCommitsWithIds(Fa),8);case 8:Fa=R.yieldResult;case 7:return R.return(Fa)}})},fetchSnapshot:function(b){var d,k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return d=ve.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(F){return F.type&&F.name||F.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
k=d.db,a=d.type,f=d.name,l=d.ref,r=d.commit,E.yield(ve.ObjectDB.find(k),2);case 2:v=E.yieldResult;l=l||"HEAD";if(!v)throw Error("db "+k+" does not exist");if(r){E.jumpTo(3);break}return E.yield(v.versionGraph(a,f),4);case 4:y=E.yieldResult;if(!y)throw Error("Unknown object "+a+"/"+f);r=y.refs[l];if(!r)throw Error("Cannot find commit for ref "+l+" of "+a+"/"+f);case 3:return E.yield(v.getCommit(r),5);case 5:A=E.yieldResult;if(!A)throw Error("Cannot find commit "+r);return E.return(v.loadSnapshot(void 0,
void 0,A))}})},revert:function(b){var d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=ve.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),k=d.db,a=d.type,f=d.name,l=d.ref,r=d.toCommitId,y.yield(ve.ObjectDB.find(k),2);v=y.yieldResult;l||(l="HEAD");return y.return(v.revert(a,f,l,r))})},commit:function(b){var d,k,a,f,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return d=ve.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),k=d.db,a=d.type,f=d.name,l=d.ref,r=d.expectedParentCommit,v=d.commitSpec,y=d.snapshot,A=d.preview,F.yield(ve.ObjectDB.find(k),2);E=F.yieldResult;l||(l="HEAD");return F.return(E.commit(a,f,y,v,A,l,r))})},exportToSpecs:function(b){var d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return d=ve.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),k=d.db,a=d.nameAndTypes,l.yield(ve.ObjectDB.find(k),2);f=l.yieldResult;if(!f)throw Error("db "+k+" does not exist");return l.return(f.exportToSpecs(a))})},exportToDir:function(b){var d,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return d=ve.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),k=d.db,a=d.url,f=d.nameAndTypes,l=d.copyResources,r=d.includeDeleted,A.yield(ve.ObjectDB.find(k),2);v=A.yieldResult;if(!v)throw Error("db "+k+" does not exist");try{y=ve.resource(a)}catch(E){y=ve.resource(System.baseURL).join(a)}return A.return(v.exportToDir(y,f,l,r))})},importFromDir:function(b){var d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=ve.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),k=d.db,a=d.url,f=d.overwrite,l=d.copyResources,y.yield(ve.ObjectDB.find(k),2);r=y.yieldResult;if(!r)throw Error("db "+k+" does not exist");try{v=ve.resource(a)}catch(A){v=ve.resource(System.baseURL).join(a)}return y.return(r.importFromDir(v,f,l))})},importFromSpecs:function(b){var d,k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=ve.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
k=d.db,a=d.specs,f=d.overwrite,l=d.copyResources,v.yield(ve.ObjectDB.find(k),2);r=v.yieldResult;if(!r)throw Error("db "+k+" does not exist");return v.return(r.importFromSpecs(a,f,l))})},importFromResource:function(b){var d,k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return d=ve.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),k=d.db,a=d.type,f=d.name,l=d.url,r=d.commitSpec,
v=d.purgeHistory,E.yield(ve.ObjectDB.find(k),2);y=E.yieldResult;if(!y)throw Error("db "+k+" does not exist");try{A=ve.resource(l)}catch(F){A=ve.resource(System.baseURL).join(l)}return E.return(y.importFromResource(a,f,A,r,v))})},delete:function(b){var d,k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=ve.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),k=d.db,a=d.type,f=d.name,l=d.dryRun,v.yield(ve.ObjectDB.find(k),
2);r=v.yieldResult;return v.return(r.delete(a,f,"undefined"===typeof l||l))})},deleteCommit:function(b){var d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return d=ve.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),k=d.db,a=d.commit,f=d.dryRun,r.yield(ve.ObjectDB.find(k),2);l=r.yieldResult;return r.return(l.deleteCommit(a,"undefined"===typeof f||f))})},fetchConflicts:function(b){var d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return d=ve.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),k=d.db,a=d.includeDocs,f=d.only,r.yield(ve.ObjectDB.find(k),2);l=r.yieldResult;return r.return(l.getConflicts(a,f))})},resolveConflict:function(b){var d,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=ve.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),k=d.db,a=d.resolved,f=d.delete,l=d.kind,r=d.id,
y.yield(ve.ObjectDB.find(k),2);v=y.yieldResult;return y.return(v.resolveConflict({resolved:a,delete:f,kind:l,id:r}))})},fetchDiff:function(b){var d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=ve.checkArgs(b,{db:"string",otherDB:"string"}),k=d.db,a=d.otherDB,l.yield(ve.ObjectDB.find(k),2);f=l.yieldResult;return l.return(f.getDiff(a))})},synchronize:function(b){var d,k,a,f,l,r,v,y,A,E,F,H,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:return d=
ve.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),k=d.db,a=d.otherDB,f=d.otherDBSnapshotLocation,l=d.onlyTypesAndNames,r=d.method,O.yield(ve.ObjectDB.find(k),2);case 2:return f||(f=a.replace(/\/$/,"")+"/snapshots"),r||(r="replicateTo"),O.yield(ve.ObjectDB.find(k),3);case 3:return v=O.yieldResult,O.yield(ve.ObjectDB.named(a,{snapshotLocation:f}),4);case 4:return y=O.yieldResult,O.yield(y._commitDB(),
5);case 5:return A=O.yieldResult,O.yield(y._versionDB(),6);case 6:return E=O.yieldResult,F=y.snapshotLocation,H={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},J=v[r](A,E,F,H),O.yield(J.whenPaused(),7);case 7:return O.yield(J.safeStop(),8);case 8:return O.yield(J.waitForIt(),9);case 9:return O.return(ve.obj.select(J,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};ve.ObjectDBInterface=uC;ve.ObjectDBInterface=uC;ve.ObjectDBInterface=uC;var hk=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};hk.prototype._processResponse=function(b){var d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return d=b.headers.get("content-type"),f.yield(b.text(),2);k=f.yieldResult;if("application/json"===d)try{a=JSON.parse(k)}catch(l){}if(!b.ok||a&&a.error)throw Error(a&&a.error||k||b.statusText);return f.return(a||k)})};hk.prototype._GET=function(b,d){d=void 0===d?{}:d;var k=this,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(a=Object.keys(d).map(function(y){var A=d[y];"object"===typeof A&&(A=JSON.stringify(A));return y+"="+encodeURIComponent(A)}).join("&"),f=k.serverURL+b+"?"+a,l=k,r=l._processResponse,v.yield(fetch(f),2)):v.return(r.call(l,v.yieldResult))})};hk.prototype._POST=function(b,d){d=void 0===d?{}:d;var k=this,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(a=k.serverURL+b,f=k,l=f._processResponse,r.yield(fetch(a,{method:"POST",body:JSON.stringify(d),
headers:{"content-type":"application/json"}}),2)):r.return(l.call(f,r.yieldResult))})};hk.prototype.describe=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("describe",b))})};hk.prototype.ensureDB=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("ensureDB",b))})};hk.prototype.destroyDB=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("destroyDB",
b))})};hk.prototype.fetchCommits=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchCommits",b))})};hk.prototype.fetchVersionGraph=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchVersionGraph",b))})};hk.prototype.exists=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exists",b))})};hk.prototype.fetchLog=function(b){var d=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchLog",b))})};hk.prototype.fetchSnapshot=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchSnapshot",b))})};hk.prototype.revert=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("revert",b))})};hk.prototype.commit=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("commit",
b))})};hk.prototype.exportToSpecs=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exportToSpecs",b))})};hk.prototype.exportToDir=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("exportToDir",b))})};hk.prototype.importFromDir=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromDir",b))})};hk.prototype.importFromSpecs=
function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromSpecs",b))})};hk.prototype.importFromResource=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromResource",b))})};hk.prototype.delete=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("delete",b))})};hk.prototype.deleteCommit=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("deleteCommit",
b))})};hk.prototype.fetchConflicts=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchConflicts",b))})};hk.prototype.resolveConflict=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("resolveConflict",b))})};hk.prototype.fetchDiff=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchDiff",b))})};hk.prototype.synchronize=
function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("synchronize",b))})};ve.ObjectDBHTTPInterface=hk;ve.default=Th;var ik=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");ik.applyExclude=function(b,d){return d?"string"===typeof d?!b.url.includes(d):"function"===typeof d?!d(b):d instanceof RegExp?!d.test(b.url):!0:!0};ik.Resource=Eg;ik.Database=kh;ik.debug=!1;ik.slashRe=/\//g;var gY=function(){return ik.Database.apply(this,
arguments)||this};$jscomp.inherits(gY,ik.Database);gY.ensureDB=function(b,d){return ik.Database.ensureDB.call(this,"lively.storage-"+b,d)};ik.StorageDatabase=gY;var qr=function(){return ik.Resource.apply(this,arguments)||this};$jscomp.inherits(qr,ik.Resource);qr.prototype.read=function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return ik.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);k=(d=a.yieldResult)&&d.content;
return a.return(k?"string"===typeof k?k:JSON.stringify(k):"")})};qr.prototype.readJson=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(b.read(),2);d=k.yieldResult;return k.return("string"===typeof d?JSON.parse(d):d)})};qr.prototype.write=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){ik.debug&&console.log("["+d+"] write");b||(b="");if(d.isDirectory())throw Error("Cannot write into a directory! ("+
d.url+")");return k.yield(d.db.update(d.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(d.url+" already exists and is a directory (cannot write into it!)");var f=Date.now();return a?Object.assign({},a,{lastModified:f,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:f,created:f,size:"string"===typeof b?b.length:0,content:b}}),2)}return k.return(d)})};qr.prototype.writeJson=function(b){return this.write(b)};qr.prototype.mkdir=
function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){ik.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(d=a.yieldResult){if(!d.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}k=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:k,created:k,isDirectory:!0}),3)}return a.return(b)})};qr.prototype.exists=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return ik.debug&&console.log("["+b+"] exists"),(d=b.isRoot())?k.jumpTo(2):k.yield(b.db.get(b.pathWithoutQuery()),3);2!=k.nextAddress&&(d=!!k.yieldResult);return k.return(d)})};qr.prototype.remove=function(){var b=this,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==
f.nextAddress?(ik.debug&&console.log("["+b+"] remove"),d=b.pathWithoutQuery(),k=b.db,f.yield(k.docList({startkey:d,endkey:d+"\uffff"}),2)):3!=f.nextAddress?(a=f.yieldResult,f.yield(k.setDocuments(a.map(function(l){return{_id:l.id,_rev:l.rev,_deleted:!0}})),3)):f.return(b)})};qr.prototype.readProperties=function(){ik.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};qr.prototype.dirList=function(b,d){b=void 0===b?1:b;d=void 0===d?{}:d;var k=this,a,f,l,r,v,
y,A,E,F,H,J,O,L,Y,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress){ik.debug&&console.log("["+k+"] dirList");if(!k.isDirectory())return ea.return(k.asDirectory().dirList(b,d));a=d;f=a.exclude;l=k.pathWithoutQuery();r=[];return ea.yield(k.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}v=ea.yieldResult;"infinity"===b&&(b=Infinity);y={};for(A=0;A<v.length;y={$jscomp$loop$prop$dirToChild$2543:y.$jscomp$loop$prop$dirToChild$2543},A++)if(F=E=v[A],H=F._id,H.startsWith(l)&&
l!==H)if(J=H.slice(l.length),O=J.includes("/")?J.match(ik.slashRe).length+1:1,O>b)y.$jscomp$loop$prop$dirToChild$2543=k.join(J.split("/").slice(0,b).join("/")+"/"),r.some(function(qa){return function(Fa){return Fa.equals(qa.$jscomp$loop$prop$dirToChild$2543)}}(y))||r.push(y.$jscomp$loop$prop$dirToChild$2543);else if(L=k.join(J),!f||ik.applyExclude(L,f))for(r.push(L),Y="created lastModified mode group user contentType type etag size".split(" "),S=0;S<Y.length;S++)L[Y[S]]=E[Y[S]];return ea.return(r)})};
$jscomp.global.Object.defineProperties(qr.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=ik.StorageDatabase.ensureDB(this.host()))}}});ik.LivelyStorageResource=qr;var hY={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:ik.LivelyStorageResource};ik.resourceExtension=hY;ik.resourceExtension=hY;ik.resourceExtension=hY;ik.registerExtension=qd;
ik.registerExtension(ik.resourceExtension);ik.default=qr;var Ut=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Ut.default=kh;Ut.Database=kh;Ut.ObjectDB=Th;Ut.ObjectDBInterface=uC;Ut.ObjectDBHTTPInterface=hk;Ut.ObjectDB=Th;Ut.ObjectDB=Th;Ut.ObjectDBInterface=uC;Ut.ObjectDBInterface=uC;Ut.ObjectDBHTTPInterface=hk;Ut.ObjectDBHTTPInterface=hk;var Yua=Object.freeze({__proto__:null,Database:kh,ObjectDB:Th,ObjectDBInterface:uC,ObjectDBHTTPInterface:hk}),eh=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
eh.convertToSerializableCommit=HU;eh.ensureCommitInfo=sH;eh.ObjectDBHTTPInterface=hk;eh.Database=kh;eh.loadMorphFromSnapshot=iv;eh.createMorphSnapshot=YA;eh.resource=Xb;eh.obj=dg;eh.Path=ci;eh.arr=Lf;eh.string=Ih;eh.morphicDBs=eh.morphicDBs||(eh.morphicDBs=new Map);eh.defaultServerURL=("undefined"!==typeof document?document.location.origin:"http://localhost:9001")+"/objectdb/";eh.convertToSerializableCommit=HU;eh.convertToSerializableCommit=HU;eh.ensureCommitInfo=sH;eh.ensureCommitInfo=sH;var iY=
function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("MorphicDB")&&"function"===typeof d.MorphicDB?d.MorphicDB:d.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){var l=f.snapshotLocation;f=f.serverURL;this.name=a;this.serverURL=f;this.snapshotLocation=l||a+"/snapshots/";this.httpDB=
new eh.ObjectDBHTTPInterface(f);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a._initialized?f.return():f.yield(a.ensureDB(),2);a._initialized=
!0;f.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(a){var f=a.content.slice(0,2);a=a.content.slice(2);return eh.resource(System.decanonicalize(this.snapshotLocation)).join(f+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,f){a=void 0===a?"world":a;f=void 0===f?!1:
f;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(l.initializeIfNecessary(),2);r=l;v=r.name;y={};return A.return(l.httpDB.fetchCommits({db:v,type:a,ref:"HEAD",knownCommitIds:y,includeDeleted:f}))})}},{key:"fetchCommit",value:function(a,f,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);if(3!=A.nextAddress)return v=[{type:a,name:f,ref:l}],
A.yield(r.httpDB.fetchCommits({db:r.name,ref:l,type:a,typesAndNames:v,knownCommitIds:{}}),3);y=A.yieldResult;return A.return(eh.convertToSerializableCommit(y[0]))})}},{key:"fetchSnapshot",value:function(a,f,l,r){var v=this,y=arguments,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress)return A=a,1===y.length&&A.type&&A.name&&(a=A.type,f=A.name,l=A._id),H.yield(v.initializeIfNecessary(),2);E=v;F=E.name;return H.return(v.httpDB.fetchSnapshot({db:F,type:a,name:f,
ref:r,commit:l}))})}},{key:"exists",value:function(a,f,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return A.return(r.httpDB.exists({db:y,type:a,name:f,ref:l}))})}},{key:"history",value:function(a,f){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchVersionGraph({db:v,
type:a,name:f}))})}},{key:"log",value:function(a,f,l,r){l=void 0===l?!1:l;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==E.nextAddress?E.yield(v.initializeIfNecessary(),2):3!=E.nextAddress?(y=v,A=y.name,E.yield(v.httpDB.fetchLog({db:A,commit:a,limit:f,includeCommits:l,knownCommitIds:r}),3)):E.return(E.yieldResult.map(eh.convertToSerializableCommit))})}},{key:"revert",value:function(a,f,l,r){r=void 0===r?"HEAD":r;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(v.initializeIfNecessary(),2);y=v;A=y.name;return E.return(v.httpDB.revert({db:A,type:a,name:f,toCommitId:l,ref:r}))})}},{key:"snapshotAndCommit",value:function(a,f,l,r,v,y,A){var E=this,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(eh.createMorphSnapshot(l,r),2);if(3!=J.nextAddress)return F=J.yieldResult,J.yield(E.commit(a,f,F,v,y,A),3);H=J.yieldResult;H=eh.convertToSerializableCommit(H);l.changeMetaData("commit",
eh.obj.dissoc(H,["preview"]),!0,!1);return J.return(H)})}},{key:"commit",value:function(a,f,l,r,v,y){var A=this,E=arguments,F,H,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){if(1==O.nextAddress)return F=a,1===E.length&&F.type&&F.name&&(a=F.type,f=F.name,l=F.snapshot||F.content,r=eh.obj.dissoc(F,["snapshot","_rev","_id","ancestors","deleted"]),y=F._id),O.yield(A.initializeIfNecessary(),2);H=A;J=H.name;return O.return(A.httpDB.commit({db:J,type:a,name:f,ref:v,expectedParentCommit:y,
commitSpec:r,snapshot:l}))})}},{key:"load",value:function(a,f,l,r,v){var y=this,A,E,F,H,J,O,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:"object"===typeof a?r=a:A=a;E=r;if(!E)return Y.yield(y.fetchCommit(A,f,v),6);if("string"!==typeof E){Y.jumpTo(3);break}F=$jscomp;H=F.makeIterator;return Y.yield(y.log(E,1,!0),5);case 5:J=H.call(F,Y.yieldResult);E=J.next().value;Y.jumpTo(3);break;case 6:E=Y.yieldResult;case 3:return Y.yield(y.fetchSnapshot(void 0,void 0,
E._id),7);case 7:return O=Y.yieldResult,Y.yield(eh.loadMorphFromSnapshot(O,l),8);case 8:return L=Y.yieldResult,E=eh.convertToSerializableCommit(E),L.changeMetaData("commit",eh.obj.dissoc(E,["preview"]),!0,!1),Y.return(L)}})}},{key:"fetchDiff",value:function(a){var f=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(f.initializeIfNecessary(),2);l=f;r=l.name;return v.return(f.httpDB.fetchDiff({db:r,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,
f){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchConflicts({db:v,includeDocs:a,only:f}))})}},{key:"resolveConflict",value:function(a){var f=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(f.initializeIfNecessary(),2);l=f;r=l.name;return v.return(f.httpDB.resolveConflict(Object.assign({db:r},a)))})}},{key:"synchronize",
value:function(a){var f=a.method,l=a.otherDB,r=a.otherDBSnapshotLocation,v=a.onlyTypesAndNames,y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.yield(y.initializeIfNecessary(),2);A=y;E=A.name;return F.return(y.httpDB.synchronize({db:E,method:f,otherDB:l,otherDBSnapshotLocation:r,onlyTypesAndNames:v}))})}},{key:"softDelete",value:function(a,f,l,r,v){var y=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return A.return(y.commit(a,
f,void 0,l,r,v))})}},{key:"delete",value:function(a,f,l){l=void 0===l?!0:l;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return A.return(r.httpDB.delete({db:y,type:a,name:f,dryRun:l}))})}},{key:"deleteCommit",value:function(a,f){f=void 0===f?!0:f;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;
v=r.name;return y.return(l.httpDB.deleteCommit({db:v,commit:a,dryRun:f}))})}},{key:"codeSearchInPackages",value:function(a,f,l,r){f=void 0===f?"part":f;var v=this,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return L.yield(v.latestCommits(f),2);case 2:y=L.yieldResult,A=[],E=0,"function"===typeof r&&(y=y.filter(r)),F=$jscomp.makeIterator(y),H=F.next();case 3:if(H.done){L.jumpTo(5);break}J=H.value;"function"===typeof l&&l(J.name,E++,y.length);
return L.yield(v._textSearchInSnapshotOfCommit(a,J),6);case 6:O=L.yieldResult;O.length&&A.push.apply(A,$jscomp.arrayFromIterable(O));H=F.next();L.jumpTo(3);break;case 5:return L.return(A)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,f,l){var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return v=f,y=v._id,(A=l)?F.jumpTo(2):F.yield(r.fetchSnapshot(void 0,void 0,y),3);2!=F.nextAddress&&(A=F.yieldResult);E=A;return F.return((new eh.SnapshotPackageHelper(E)).textSearch(a,
f))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:eh.defaultServerURL})}},{key:"named",value:function(a,f){var l=eh.morphicDBs.get(a);if(l)return l;if(!f.serverURL)throw Error("Needs serverURL!");f=new this(a,f);eh.morphicDBs.set(a,f);return f}},{key:"wellKnownMorphicDBs",value:function(){var a=this,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return f=eh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),v.yield(f.getAll(),2);l=v.yieldResult;r=l.reduce(function(y,A){var E={};return Object.assign(y,(E[A._id]=a.named(A.name,{serverURL:A.serverURL,snapshotLocation:A.snapshotLocation}),E))},{});r.default||(r.default=a.default);return v.return(r)})}},{key:"addWellKnownMorphicDB",value:function(a,f){var l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){l=f;r=l.name;v=l.snapshotLocation;
y=l.serverURL;A=eh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return E.yield(A.set(a,{name:r,snapshotLocation:v,serverURL:y}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){f=eh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return l.yield(f.remove(a),0)})}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1452,end:10229})}(void 0);iY=eh.MorphicDB;var $v=Ca("Y",iY),sP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof d.SnapshotPackageHelper?d.SnapshotPackageHelper:d.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,f){var l=a&&a instanceof RegExp,r=[];if(!a)return r;for(var v={},y=$jscomp.makeIterator(this.filesInPackages()),A=y.next();!A.done;v={$jscomp$loop$prop$file$2545:v.$jscomp$loop$prop$file$2545},A=y.next()){v.$jscomp$loop$prop$file$2545=A.value;A=v.$jscomp$loop$prop$file$2545.get(this.snapshot);var E=eh.string.lineIndexComputer(A),F=eh.string.lineRanges(A);
if(l)A=eh.string.reMatches(A,a),A.length&&r.push.apply(r,$jscomp.arrayFromIterable(A.map(function(ea){return function(qa){return Object.assign(qa,{commit:f,file:ea.$jscomp$loop$prop$file$2545})}}(v))));else for(var H=0,J=0;0<=(H=A.indexOf(a));){var O=H+J,L=O+a.length,Y=E(O),S=A.slice.apply(A,$jscomp.arrayFromIterable(F[Y]));r.push({match:a,start:O,end:L,length:a.length,line:Y,lineString:S,commit:f,file:v.$jscomp$loop$prop$file$2545});J+=H+a.length;A=A.slice(H+a.length)}}return r}},{key:"filesInPackages",
value:function(){function a(r,v,y,A,E){E=void 0===E?[]:E;if(r["package.json"]&&"string"===typeof r["package.json"])try{var F=JSON.parse(r["package.json"]);A={url:y,path:v,name:F.name||eh.arr.last(v)}}catch(J){}F=[];for(var H in r)"string"===typeof r[H]?E.push({path:v.concat(H),url:eh.string.joinPath(y,H),package:A,get:function(J){return eh.Path(this.path).get(J.packages)},set:function(J,O){eh.Path(this.path).set(J.packages,O)}}):F.push(H);F.forEach(function(J){return a(r[J],v.concat(J),eh.string.joinPath(y,
J),A,E)});return E}var f=[],l;for(l in this.snapshot.packages)a(this.snapshot.packages[l],[l],l,null,f);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10238,end:13311})}(void 0);eh.SnapshotPackageHelper=
sP;eh.SnapshotPackageHelper=sP;eh.SnapshotPackageHelper=sP;eh.default=iY;var ne=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");ne.prefetchCoreStyleguides=BM;ne.getProjectName=function(b){return ne.Path("metadata.commit.name").get(b)||b.name};ne.clearSnapshot=IU;ne.arr=Lf;ne.properties=ir;ne.Path=ci;ne.promise=Hg;ne.obj=dg;ne.registerExtension=qd;ne.Resource=Eg;ne.resource=Xb;ne.pt=di;ne.MorphicDB=$v;ne.ObjectPool=Jj;ne.normalizeOptions=pp;ne.deserializeMorph=wG;ne.loadPackagesAndModulesOfSnapshot=
xG;ne.subscribeOnce=Wu;ne.prefetchCoreStyleguides=BM;ne.prefetchCoreStyleguides=BM;var tP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("ComponentPolicy")&&"function"===typeof d.ComponentPolicy?d.ComponentPolicy:d.ComponentPolicy=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.derivedMorph=
a;this._overriddenProps=new WeakMap;if(f.isMorph||"string"===typeof f)this.auto=f,f.isMorph&&(this.auto.isComponent=!0),"string"===typeof f&&this.resolveMasterComponents();else{a=f.click;var l=f.auto,r=f.hover,v=void 0===f.light?{}:f.light;f=void 0===f.dark?{}:f.dark;v&&(this.light=v);f&&(this.dark=f);a&&(this.click=a);l&&(this.auto=l);r&&(this.hover=r);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return ne.obj.select(this,
["auto","click","hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;for(var f=$jscomp.makeIterator(["auto","click","hover"]),l=f.next();!l.done;l=f.next())if(l=l.value,"string"===typeof a[l]){if(this.getResourceUrlFor(this[l])!=a[l])return!1}else if((this[l]||null)!=(a[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,f=[];this.derivedMorph.withAllSubmorphsDo(function(l){a.managesMorph(l)&&0<Object.keys(a._overriddenProps.get(l)).filter(function(r){return"_rev"!=
r}).length&&f.push([l,Object.keys(a._overriddenProps.get(l))])});return f}},{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];ne.obj.isEmpty(this.dark)&&a.push("dark");ne.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__serialize__",value:function(){var a={};this.auto&&(a.auto=this.getResourceUrlFor(this.auto));this.click&&(a.click=this.getResourceUrlFor(this.click));this.hover&&(a.hover=this.getResourceUrlFor(this.hover));
return{__expr__:"("+JSON.stringify(a)+")"}}},{key:"__after_deserialize__",value:function(a,f){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?f.yield(a._hasUnresolvedMaster,2):3!=f.nextAddress?f.yield(ne.promise.waitFor(1E3,function(){return a._appliedMaster}),3):f.return(!0)})}},{key:"whenReady",value:function(){var a=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a._hasUnresolvedMaster,0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url:void 0==a.name?null:"styleguide://"+ne.getProjectName($world)+"/"+a.name:null}},{key:"getWorldUrlFor",value:function(a){a=ne.resource("string "===typeof a?a:this.getResourceUrlFor(a)).worldName;return a==ne.getProjectName($world)?document.location.href:ne.worldToUrl[a]}},{key:"resolveMasterComponents",
value:function(){var a=this,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){switch(Fa.nextAddress){case 1:f=ne.promise.deferred(),a._hasUnresolvedMaster=f.promise,l=a,r=void 0===l.light?{}:l.light,v=void 0===l.dark?{}:l.dark,y=["auto","click","hover"],A=[],Fa.setCatchFinallyBlocks(2),E=$jscomp.makeIterator(y),F=E.next();case 4:if(F.done){Fa.leaveTryBlock(3);break}H=F.value;if("string"!==typeof a[H]){Fa.jumpTo(7);break}J=a;O=H;return Fa.yield(ne.resource(a[H]).read(),
8);case 8:J[O]=Fa.yieldResult;case 7:if("string"!==typeof r[H]){Fa.jumpTo(9);break}L=r;Y=H;return Fa.yield(ne.resource(r[H]).read(),10);case 10:L[Y]=Fa.yieldResult;case 9:if("string"!==typeof v[H]){Fa.jumpTo(11);break}S=v;ea=H;return Fa.yield(ne.resource(v[H]).read(),12);case 12:S[ea]=Fa.yieldResult;case 11:A.push(a[H],r[H],v[H]);F=E.next();Fa.jumpTo(4);break;case 2:throw qa=Fa.enterCatchBlock(),Error("Encountered invalid master component reference: "+qa.message);case 3:ne.arr.compact(A).forEach(function(K){K.isComponent||
(K.isComponent=!0)}),f.resolve(),a._hasUnresolvedMaster=!1,Fa.jumpToEnd()}})}},{key:"applyAnimated",value:function(a){var f=this;a=void 0===a?{duration:1E3}:a;this.applyIfNeeded(!0,a);return ne.promise.waitFor(2*a.duration,function(){return!f._animationConfig})}},{key:"applyIfNeeded",value:function(a,f){var l=this;a=void 0===a?!1:a;if(f=void 0===f?!1:f)this._animationConfig=f;if(this._hasUnresolvedMaster)return this._originalOpacity=this.derivedMorph.opacity,this.derivedMorph.withMetaDo({metaInteraction:!0},
function(){f||[l.derivedMorph].concat($jscomp.arrayFromIterable(l.derivedMorph.ownerChain())).find(function(y){return y.isComponent})||(l.derivedMorph.opacity=0)}),this._hasUnresolvedMaster.then(function(){l.applyIfNeeded(a);l.derivedMorph.withMetaDo({metaInteraction:!0},function(){l.derivedMorph.opacity=l._originalOpacity});delete l._originalOpacity;delete l._capturedExtents});var r=this.derivedMorph,v=this.determineMaster(r);v&&this._appliedMaster!=v&&(a=!0);v&&a&&(this.apply(r,v),this._appliedMaster=
v)}},{key:"getStyleProperties",value:function(a){var f=a.propertiesAndPropertySettings();a=f.properties;var l=[];f=$jscomp.makeIterator(f.order);for(var r=f.next();!r.done;r=f.next())r=r.value,a[r].isStyleProp&&l.push(r);return l}},{key:"apply",value:function(a,f,l){var r=this;l=void 0===l?this._animationConfig:l;if(!this._applying){this._applying=!0;try{var v=function(){var y=r.prepareSubmorphsToBeManaged(a,f);f.withAllSubmorphsDoExcluding(function(A){var E=A==f,F=E?a:y[A.name];if(F)if(ne.obj.isArray(F)&&
(F=F.pop()),A.master&&!E)F.master=A.master.spec(),F._requestMasterStyling=!0,r._overriddenProps.get(F).position||(F.position=A.position),r._overriddenProps.get(F).extent||(F.extent=A.extent);else{E=$jscomp.makeIterator(r.getStyleProperties(A));for(var H=E.next();!H.done;H=E.next())if(H=H.value,!r._overriddenProps.get(F)[H])if("layout"==H)F.layout&&A.layout&&F.layout.name()==A.layout.name()&&F.layout.equals(A.layout)||(F.layout=A.layout?A.layout.copy():void 0);else{if(A==f){if("extent"==H&&!F.extent.equals(ne.pt(10,
10))&&(!F.owner||F.owner.isWorld||F.ownerChain().find(function(J){return J.master&&J.master.managesMorph(F)})))continue;if("position"==H)continue}F.isLabel&&"extent"==H||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(H)||(ne.obj.equals(F[H],A[H])||(F[H]=A[H]),["fixedHeight","fixedWidth"].includes(H)&&F._parametrizedProps&&F._parametrizedProps.extent&&(F.extent=F._parametrizedProps.extent))}F._parametrizedProps&&delete F._parametrizedProps}},function(A){return f!=A&&A.master})};
l?a.withAnimationDo(v,l).then(function(){delete r._animationConfig;r._applying=!1}):a.dontRecordChangesWhile(v)}finally{l||(this._applying=!1),delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,f){var l=this._overriddenProps.get(a);this._overriddenProps.set(a,ne.obj.dissoc(l,f))}},{key:"prepareSubmorphsToBeManaged",value:function(a,f){var l=this,r={};a.withAllSubmorphsDoExcluding(function(v){r[v.name]&&(ne.obj.isArray(r[v.name])?r[v.name].push(v):r[v.name]=[r[v.name],
v]);r[v.name]=v},function(v){return v!=a&&v.master});f.withAllSubmorphsDoExcluding(function(v){if(v=v==f?a:r[v.name])ne.obj.isArray(v)&&(v=v.pop()),l.prepareMorphToBeManaged(v)},function(v){return v!=f&&v.master});return r}},{key:"managedMorphs",get:function(){var a=this,f=ne.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(r){return a.managesMorph(r)}),function(r){return r.name}),l;for(l in f)f[l]=f[l][0];return f}},{key:"reconcileSubmorphs",value:function(){var a=this,f=this.managedMorphs,
l=[],r=this._appliedMaster;f[r.name]=this.derivedMorph;r&&(r.withAllSubmorphsDo(function(v){if(v==r)l.push(v,a.derivedMorph);else{var y;if(y=f[v.name])if(y.owner.name==v.owner.name)l.push(y);else{var A;if(A=f[v.owner.name])v=v.owner.submorphs.indexOf(v),l.push(A.addMorphAt(y,v));else throw Error("Missing a owner that had to be added previously....");}else y=f[v.name]=v.copy(),A=f[v.owner.name],v=v.owner.submorphs.indexOf(v),y.submorphs=[],l.push(A.addMorphAt(y,v))}}),Object.values(ne.obj.dissoc(f,
l.map(function(v){return v.name}))).forEach(function(v){console.log(f,l.map(function(y){return y.name}));v.remove()}))}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},{key:"propsToSerializeForMorph",value:function(a,f){if(!this.managesMorph(a))return f;for(var l=[],r=$jscomp.makeIterator(this.getStyleProperties(a)),v=r.next();!v.done;v=r.next())v=v.value,this._overriddenProps.get(a)[v]||!("position"==v&&a==this.derivedMorph||"extent"==v&&a==this.derivedMorph)&&l.push(v);
return ne.arr.withoutAll(f,l)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var f={},l;for(l in a._parametrizedProps)"__takenFromSnapshot__"!=l&&(f[l]=!0);this._overriddenProps.set(a,f)}}},{key:"determineMaster",value:function(a){var f=a.env.world.colorScheme,l=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var r=this.getMasterForState(this,{isHovered:l,isClicked:a});this.light&&"light"==f&&(r=this.getMasterForState(this.light,
{isHovered:l,isClicked:a})||r);this.dark&&"dark"==f&&(r=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||r);return r}},{key:"getMasterForState",value:function(a,f){var l=a.hover,r=a.click,v=f.isClicked;a=a.auto;if(f.isHovered)if(l)a=l;else for(f=a&&a.master;f;){if(f.hover){a=f.hover;break}f=f.auto}if(v)if(r)a=r;else for(r=a&&a.master;r;){if(r.click){a=r.click;break}r=r.auto}return a}},{key:"onMorphChange",value:function(a,f){if(!this._applying&&!ne.Path("meta.metaInteraction").get(f)&&
!["_rev","name","master"].includes(f.prop)&&("opacity"==f.prop&&delete this._originalOpacity,a.styleProperties.includes(f.prop)))if(this.managesMorph(a)){if(!a.master||a.master==this||["extent","position"].includes(f.prop))this._overriddenProps.get(a)[f.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[f.prop]=f.value;else{var l={};a._parametrizedProps=(l[f.prop]=f.value,l)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,f){f=
f.constructor===ne.ComponentPolicy?f:new this(a,f);a.master&&(f._overriddenProps=a.master._overriddenProps);return f}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2027,end:22236})}(void 0);ne.ComponentPolicy=tP;ne.ComponentPolicy=tP;ne.ComponentPolicy=tP;ne.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;
ne.fetchedSnapshots=ne.fetchedSnapshots||{};ne.objectPools=ne.objectPools||{};ne.resolvedMasters=ne.resolvedMasters||{};ne.modulesToLoad=ne.modulesToLoad||{};ne.li=ne.li||void 0;ne.localNamePromise=ne.localNamePromise||void 0;ne.masterComponentFetches=ne.masterComponentFetches||{};ne.worldToUrl=ne.worldToUrl||{};var Jba=Ca("bV",ne.resolvedMasters);ne.resolvedMasters=Jba;ne.resolvedMasters=Jba;ne.clearSnapshot=IU;ne.clearSnapshot=IU;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),
k=d.hasOwnProperty("StyleGuideResource")&&"function"===typeof d.StyleGuideResource?d.StyleGuideResource:d.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=this.url.match(ne.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(ne.styleGuideURLRe);
a=$jscomp.makeIterator(a);a.next();var f=a.next().value;a.next();lively.FreezerRuntime||"$world"!=f||(f=this.localWorldName());return f}},{key:"dirList",value:function(a,f){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return l.worldName==ne.getProjectName($world)?v.return($world.withAllSubmorphsSelect(function(y){return y.isComponent})):(r=ne.resolvedMasters[l.worldName])?v.return(Object.values(r)):v.return([])})}},{key:"localWorldName",value:function(){var a;if(a=ne.getProjectName($world))return a;
if(ne.localNamePromise)return ne.localNamePromise;a=ne.promise.deferred();var f=a.resolve;ne.localNamePromise=a.promise;if("__newWorld__"==ne.resource(document.location.href).query().name)return f("__newWorld__"),ne.localNamePromise;ne.subscribeOnce("world/loaded",function(){f(ne.getProjectName($world))},System);return ne.localNamePromise}},{key:"fetchFromMasterDir",value:function(a,f){var l=a.join(this.worldName).join(f+".json");if(ne.masterComponentFetches[l.url])return ne.masterComponentFetches[l.url];
ne.masterComponentFetches[l.url]=function(){var r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(r=ne,v=r.deserializeMorph,y.yield(l.readJson(),2)):y.return(v.call(r,y.yieldResult))})}();return ne.masterComponentFetches[l.url]}},{key:"read",value:function(){var a=this,f,l,r,v,y,A,E,F,H,J,O,L,Y,S,ea,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){switch(Fa.nextAddress){case 1:f=a.componentName;if(l=ne.Path([a.worldName,a.componentName]).get(ne.resolvedMasters))return Fa.return(l);
if(!lively.FreezerRuntime){Fa.jumpTo(2);break}r=ne.resource(window.location);r.isFile()&&(r=r.parent());v=r.join("masters/");return Fa.yield(a.fetchFromMasterDir(v,f),3);case 3:l=Fa.yieldResult;case 2:if(lively.FreezerRuntime){Fa.jumpTo(4);break}ne.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",a.worldName),A=ne.promise.deferred(),y=A.resolve,ne.fetchedSnapshots[a.worldName]=A.promise);return Fa.yield(a.localWorldName(),5);case 5:if(Fa.yieldResult==a.worldName){l="undefined"!==
typeof $world&&($world.getSubmorphNamed(f)||$world.localComponents.find(function(K){return K.name==f}));if(!l)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');return Fa.return(l)}return y?(F=ne.MorphicDB.default,Fa.yield(F.fetchCommit("world",a.worldName),9)):Fa.yield(ne.fetchedSnapshots[a.worldName],8);case 8:E=Fa.yieldResult;Fa.jumpTo(7);break;case 9:if(Fa.yieldResult)return Fa.yield(F.fetchSnapshot("world",a.worldName),15);H=ne.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+
".json");return Fa.yield(H.exists(),12);case 12:if(!Fa.yieldResult){y(null);Fa.jumpTo(11);break}return Fa.yield(H.readJson(),14);case 14:E=Fa.yieldResult;ne.worldToUrl[a.worldName]=ne.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+a.worldName+".json"}).url;Fa.jumpTo(11);break;case 15:E=Fa.yieldResult,ne.worldToUrl[a.worldName]=ne.resource(System.baseURL).join("worlds/load").withQuery({name:a.worldName}).url;case 11:return Fa.yield(ne.loadPackagesAndModulesOfSnapshot(E),
16);case 16:y(E);case 7:J=new ne.ObjectPool(ne.normalizeOptions({}));O=$jscomp.makeIterator(Object.entries(E.snapshot).find(function(K){K=$jscomp.makeIterator(K);K.next();K=K.next().value;return ne.Path("props.isComponent.value").get(K)&&ne.Path("props.name.value").get(K)==f})||[]);L=O.next().value;if(!L)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');l=J.resolveFromSnapshotAndId(Object.assign({},E,{id:L}));case 4:ne.resolvedMasters[a.worldName]?ne.resolvedMasters[a.worldName][f]=
l:(Y={},ne.resolvedMasters[a.worldName]=(Y[f]=l,Y));l._resourceHandle=a;if(!l._pool.mastersInSubHierarchy){Fa.jumpTo(17);break}S=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);ea=S.next();case 18:if(ea.done){Fa.jumpTo(20);break}qa=ea.value;return Fa.yield(qa.applyIfNeeded(!0),21);case 21:qa.derivedMorph.ownerChain().includes(l)||qa.derivedMorph.requestMasterStyling();ea=S.next();Fa.jumpTo(18);break;case 20:delete l._pool;case 17:return Fa.return(Promise.resolve(l))}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Master Components can not be written to!");
})}},{key:"exists",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){f="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);return l.return(f&&f.isComponent)})}},{key:"remove",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(f="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName))f.isComponent=!1;return l.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],
d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25947,end:31519})})(ne.Resource);var jY={name:"styleguide",matches:function(b){return b.match(ne.styleGuideURLRe)},resourceClass:ne.StyleGuideResource};ne.resourceExtension=jY;ne.resourceExtension=jY;ne.resourceExtension=jY;ne.registerExtension(ne.resourceExtension);
(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("StyleGuide")&&"function"===typeof d.StyleGuide?d.StyleGuide:d.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,void 0,void 0,d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31705,end:32189})})(void 0);var wc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");wc.generateUnfolded=function(b,d,k){d=void 0===d?["top","left","right","bottom"]:d;k=void 0===k?"core":k;var a={},f={};d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;f={$jscomp$loop$prop$m$1259$2548:f.$jscomp$loop$prop$m$1259$2548},l=d.next())f.$jscomp$loop$prop$m$1259$2548=l.value,a[b+wc.string.capitalize(f.$jscomp$loop$prop$m$1259$2548)]=
{group:k,derived:!0,generated:!0,after:[b],get:function(r){return function(){return this.getProperty(b)[r.$jscomp$loop$prop$m$1259$2548]}}(f),set:function(r){return function(v){var y={};this[b]=Object.assign({},this.getProperty(b),(y[r.$jscomp$loop$prop$m$1259$2548]=v,y))}}(f)};return a};wc.Color=ng;wc.Line=jn;wc.Point=tg;wc.pt=di;wc.rect=Dl;wc.Rectangle=ye;wc.Transform=Rk;wc.string=Ih;wc.properties=ir;wc.obj=dg;wc.arr=Lf;wc.num=Em;wc.promise=Hg;wc.tree=ux;wc.PropertyPath=ci;wc.signal=em;wc.copy=
Eo;wc.deserializeSpec=Sq;wc.ExpressionSerializer=Mn;wc.serializeSpec=mp;wc.getClassName=fm;wc.renderRootMorph=ia;wc.ShadowObject=ys;wc.AnimationQueue=$N;wc.easings=mr;wc.addOrChangeCSSDeclaration=V;wc.Icon=wp;wc.morph=de;wc.newMorphId=Pe;wc.MorphicEnv=ps;wc.config=Ul;wc.CommandHandler=Hpa;wc.KeyHandler=PW;wc.findKeysForPlatform=zf;wc.TargetScript=QW;wc.copyMorph=fL;wc.ComponentPolicy=tP;wc.defaultCommandHandler=new wc.CommandHandler;var kl=Ca("an",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
k=d.hasOwnProperty("Morph")&&"function"===typeof d.Morph?d.Morph:d.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var f=a.env||wc.MorphicEnv.default();this._env=f;this._rev=f.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=wc.newMorphId(wc.getClassName(this));this._animationQueue=
new wc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=wc.obj.select(a,wc.arr.intersect(Object.keys(a),this.styleProperties));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},
{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,f,l,r){this._env=wc.MorphicEnv.default();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=f.id;this._animationQueue=new wc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=wc.obj.select(a.props,wc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=
!0;a=r.expressionSerializer;for(var v in this._parametrizedProps)(f=this._parametrizedProps[v].value)&&wc.obj.isString(f)&&a.isSerializedExpression(f)&&(this._parametrizedProps[v]=a.deserializeExpr(f));this.initializeProperties();this._pool=r}},{key:"__after_deserialize__",value:function(a,f,l){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(r){console.error("[lively.morphic] "+this+".onLoad() error: "+r.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&
(l.mastersInSubHierarchy?l.mastersInSubHierarchy.push(this.master):l.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,f=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var r=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(A){return A.__isBeingSerialized__&&A.master}).find(Boolean),v;for(v in f){var y=
f[v];r&&r.managesMorph(this)&&void 0!=r._overriddenProps.get(this)[v]?l.push(v):y.readOnly||y.derived||wc.obj.equals(this[v],a[v])||y.hasOwnProperty("serialize")&&!y.serialize||l.push(v)}return r&&!this.isComponent?r.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(a,f,l,r){if((f=a.props.submorphs)&&!this.isEpiMorph)for(f=f.value,r=f.length;r--;)l.refForId(f[r].id).realObj.isEpiMorph&&wc.arr.removeAt(f,r);l=$jscomp.makeIterator(wc.arr.intersect(this.__only_serialize__,
["borderColor","borderWidth","borderStyle","borderRadius"]));for(f=l.next();!f.done;f=l.next())f=f.value,a.props[f]={key:f,verbatim:!0,value:wc.obj.extract(this[f],["top","right","bottom","left"],function(v,y){return y&&y.isColor?y.toTuple():y})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,f){a=void 0===a?!0:a;f=void 0===f?new WeakMap:f;var l=this.defaultProperties,r=this.propertiesAndPropertySettings().properties,
v={submorphs:!0},y={};if(f.has(this))return f.get(this);f.set(this,y);for(var A in r){var E=r[A];E&&(E.readOnly||E.derived||E.hasOwnProperty("serialize")&&!E.serialize||A in v||a&&(wc.obj.equals(this[A],l[A])||this[A]&&l[A]&&this[A].valueOf&&l[A].valueOf&&wc.obj.equals(this[A].valueOf(),l[A].valueOf()))||(y[A]=this[A]&&this[A].isMorph?this[A].spec(a,f):this[A]&&"layout"===A?this[A].copy():this[A]))}y.submorphs=this.submorphs.map(function(F){return F.spec(a,f)});y.type=this.constructor;return y}},
{key:"printSpec",value:function(a,f){f=void 0===f?0:f;a=(void 0===a?null:a)||this.spec();var l={name:!0,type:!0,submorphs:!0},r="  ".repeat(f+1),v="  ".repeat(f)+"{\n"+(r+'name: "'+a.name+'",\n')+(r+'type: "'+a.type+'",\n'),y;for(y in a)l[y]||(v+=""+r+y+": "+wc.string.print(a[y])+",\n");if(a.submorphs){v+=r+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(l=a.next();!l.done;l=a.next())v+=this.printSpec(l.value,f+1);v+="]\n"}return v+="  ".repeat(f)+"}\n"}},{key:"defaultProperties",get:function(){var a=
this.constructor,f=a[Symbol.for("lively-instance-superclass")];if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(f&&f._morphicDefaultPropertyValues)){a=this.constructor._morphicDefaultPropertyValues={};f=this.propertiesAndPropertySettings().properties;for(var l in f){var r=f[l];r.hasOwnProperty("defaultValue")&&(r=r.defaultValue,Array.isArray(r)&&(r=r.slice()),a[l]=r)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},
{key:"getProperty",value:function(a){return this._morphicState[a]}},{key:"setProperty",value:function(a,f,l){return this.addValueChange(a,f,l)}},{key:"changeMetaData",value:function(a,f,l,r){l=void 0===l?!0:l;r=void 0===r?!0:r;var v=this.metadata;v||(v={});(new wc.PropertyPath(a)).withParentAndKeyDo(v,!0,function(y,A){y[A]=r?Object.assign({},y[A],{},f):f;var E=y.__dont_serialize__;l?E&&E.includes(A)&&(wc.arr.remove(E,A),0===E.length&&delete y.__dont_serialize__):(E||(E=y.__dont_serialize__=[]),wc.arr.pushIfNotIncluded(E,
A))});this.metadata=v}},{key:"installFont",value:function(a,f){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[a]=f,l));this.insertFontCSS(a,f)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,f){a=$jscomp.makeIterator(a);for(var l=a.next();!l.done;l=a.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();f=$jscomp.makeIterator(f);for(l=f.next();!l.done;l=
f.next())a=l.value,this.insertFontCSS(a,this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,f){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(l.whenRendered(),2);f.endsWith(".otf")?wc.addOrChangeCSSDeclaration(l.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+l.installedFonts[a]+'") format("opentype");\n         }'):wc.addOrChangeCSSDeclaration(l.id+"-"+a,'@import url("'+l.installedFonts[a]+
'");');r.jumpToEnd()})}},{key:"toString",value:function(){return"<"+wc.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:wc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},f={},l=this.propertiesAndPropertySettings().properties,
r=[],v;for(v in l)a[v]||l[v].derived&&!l[v].showInInspector||(f[v]=!0,r.push({key:v,value:this[v]}));r.push({key:"id",value:this.id});r.push({key:"owner",value:this.owner});r=r.sort(function(A,E){A=A.key.toLowerCase();E=E.key.toLowerCase();return A<E?-1:A===E?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),v=l.next();!v.done;v=l.next())v=v.value,a["$$"+v.sourceAttrName,""+v.sourceAttrName]=!0;Object.assign(f,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=a.next();!l.done;l=a.next())l=l.value,l in this&&(f[l]=!0,r.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var y in this)!f[y]&&this.hasOwnProperty(y)&&r.unshift({key:y,value:this[y],keyString:"[UNKNOWN PROPERTY] "+y});return{sort:!1,includeDefault:!1,properties:r}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,f,l,r){var v=this.world();r=Object.assign({maxLines:7},r);return v?v.setStatusMessageFor(this,
a,f,l,r):console.log(a)}},{key:"showError",value:function(a){var f=this.world();return f?f.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var f=this,l=a.meta&&a.meta.animation,r=a.prop,v=a.value;if("position"===r||"rotation"===r||"scale"===r||"origin"===r||"reactsToPointer"===r)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[r]=v,l));else if("extent"==r)this.onBoundsChanged(this.bounds());else"layout"==r&&(l?v&&v.attachAnimated(l.duration,this,l.easing):
v&&v.attach());this.layout&&this.layout.onChange(a);this.isComponent&&!wc.PropertyPath("meta.metaInteraction").get(a)&&(r=this.world(),delete this._preview,(r?r.withAllSubmorphsSelect(function(y){return y.master&&y.master.uses(f)}):[]).forEach(function(y){y.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var f=this;wc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(l){wc.signal(f,
l,a.partNamed(l))})}},{key:"onSubmorphChange",value:function(a,f){var l=this;if(this.isComponent&&!wc.PropertyPath("meta.metaInteraction").get(a)&&!wc.PropertyPath("meta.layoutAction").get(a)){var r=this.world();r&&r.withAllSubmorphsDo(function(v){v.master&&v.master.uses(l)&&v.requestMasterStyling()})}if(this.master)this.master.onMorphChange(f,a);this.layout&&this.layout.onSubmorphChange(f,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,
a)}},{key:"addValueChange",value:function(a,f,l){return this.env.changeManager.addValueChange(this,a,f,l)}},{key:"addMethodCallChangeDoing",value:function(a,f){return this.env.changeManager.addMethodCallChangeDoing(a,this,f)}},{key:"groupChangesWhile",value:function(a,f){return this.env.changeManager.groupChangesWhile(this,a,f)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,f){return this.env.changeManager.recordChangesWhile(a,
f)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,f){return this.env.changeManager.doWithValueChangeMeta(a,this,f)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=f._animationQueue.registerAnimation(a),f._animationQueue.animationsActive?l?r.yield(l.asPromise(),3):r.jumpTo(2):(l&&l.finish(),r.return(Promise.resolve(f)))):2!=r.nextAddress?r.return(r.yieldResult):r.return(Promise.resolve(f))})}},{key:"withAnimationDo",value:function(a,f){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=
l.groupChangesWhile(!1,a);v=r.changes;return y.yield(Promise.all(Object.values(wc.arr.groupBy(v,function(A){return A.target.id})).map(function(A){var E=Object.assign({},f),F;A.forEach(function(H){F=H.target;H.reverseApply();E[H.prop]=H.value});return F&&F.animate(E)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},
{key:"scrollBounds",value:function(){var a=this.scroll,f=this.scrollExtent;return new wc.Rectangle(a.x,a.y,f.x,f.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},
{key:"addStyleClass",value:function(a){this.styleClasses=wc.arr.uniq(this.styleClasses.concat(a))}},{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(f){return f!=a})}},{key:"adjustOrigin",value:function(a){var f=this.origin,l=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(v){return v.position=v.position.subPt(a.subPt(f))});var r=this.globalBounds().topLeft();l=l.subPt(r);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",
value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var a=this.extent;return wc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var f=this.origin.negated().extent(this.extent);f=a?this.transformRectToMorph(a,f):this.getGlobalTransform().transformRectToRect(f);this.isClip()||this.submorphs.forEach(function(l){f=f.union(l.relativeBounds(a))});return f}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},
{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();return this.submorphs.map(function(f){f=f.bounds();return wc.rect(f.x/a.width,f.y/a.height,f.width/a.width,f.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=wc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(f){return f.bounds()}).reduce(function(f,l){return f.union(l)})}},
{key:"fitToSubmorphs",value:function(a){a=void 0===a?wc.Rectangle.inset(0):a;var f=this.submorphs;if(f.length){f=f.reduce(function(v,y){return v.union(y.bounds())},f[0].bounds());var l=f.top()-a.top(),r=f.left()-a.left();this.moveBy(wc.pt(r,l));wc.arr.invoke(this.submorphs,"moveBy",wc.pt(-r,-l));this.extent=wc.pt(f.width+a.left()+a.right(),f.height+a.top()+a.bottom())}}},{key:"align",value:function(a,f){return this.moveBy(f.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);
return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,f,l){l=void 0===l?!0:l;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),
a;var r=this.owner,v=this.submorphs,y=this.getTransform().copy();f="number"===typeof f?f:r?r.submorphs.indexOf(this):-1;var A=a.owner,E=wc.arr.without(a.submorphs,this),F=a.getTransform().copy(),H=A?A.submorphs.indexOf(a):-1;r&&this.remove();A&&a.remove();l&&(this.submorphs=[],a.submorphs=[]);r===a?(A&&A.addMorphAt(this,H),l&&(this.submorphs=E.slice(0,f).concat(a).concat(E.slice(f)),a.submorphs=v)):(r&&r.addMorphAt(a,f),A&&A.addMorphAt(this,H),l&&(a.submorphs=v,this.submorphs=E));a.setTransform(y);
this.setTransform(F);return a}},{key:"addMorphAt",value:function(a,f){var l=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=wc.morph(a));var r=this.submorphs.indexOf(a);
if(!(-1<r&&r===f))return this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[a,f],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var v=a.owner,y=l.submorphs;if(v&&v!==l){var A=a.transformForNewOwner(l);a.remove()}a._env!==l._env&&(a._env=l._env);f=Math.min(y.length,Math.max(0,f));-1<r&&(y.splice(r,1),r<f&&f--);y.splice(f,0,a);a._owner=l;a._cachedPaths={};A&&a.setTransform(A);a.requestStyling();l._morphicState.submorphs=y;l._submorphOrderChanged=!0;l.makeDirty();
a.resumeSteppingAll();a.withAllSubmorphsDo(function(E){return E.onOwnerChanged(l)});l.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,f){var l=this.submorphs;f=f?l.indexOf(f):-1;return this.addMorphAt(a,-1===f?l.length:f)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var f=this.submorphs.indexOf(a);
-1!==f&&((this.getProperty("submorphs")||[]).splice(f,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,f]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=wc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(f){f._stylingVisitor&&f._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths=
{};this._pathDependants.forEach(function(f){return f._cachedPaths={}});this._pathDependants=[];this.withAllSubmorphsDo(function(f){return f.onOwnerChanged(null)});return this}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(f.animate({opacity:0,duration:a,easing:wc.easings.outQuad}),2);f.remove();f.opacity=
1;l.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){f.opacity=0;f.animate({opacity:1,duration:a});return l.return(f)})}},{key:"fadeIntoWorld",value:function(a,f){a=void 0===a?$world.visibleBounds().center():a;f=void 0===f?200:f;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return r=new wc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:wc.Color.transparent}),
v=l.env.world,r.openInWorld(),r.addMorph(l),l.position=r.extent.scaleBy(.5),r.center=a,r.scale=.8,A.yield(r.animate({opacity:1,scale:1,duration:f}),2);y=l.globalBounds();v.addMorph(l);l.top=y.top();l.left=y.left();r.remove();return A.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&wc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",
value:function(a){if(a(this))return this;for(var f=$jscomp.makeIterator(this.submorphs),l=f.next();!l.done;l=f.next())if(l=l.value.withAllSubmorphsDetect(a))return l}},{key:"withAllSubmorphsDoExcluding",value:function(a,f){var l=[a(this)];if(f(this))return l;for(var r=$jscomp.makeIterator(this.submorphs),v=r.next();!v.done;v=r.next())wc.arr.pushAll(l,v.value.withAllSubmorphsDoExcluding(a,f));return l}},{key:"withAllSubmorphsDo",value:function(a){for(var f=[a(this)],l=$jscomp.makeIterator(this.submorphs),
r=l.next();!r.done;r=l.next())wc.arr.pushAll(f,r.value.withAllSubmorphsDo(a));return f}},{key:"withAllSubmorphsSelect",value:function(a){var f=[];this.withAllSubmorphsDo(function(l){return a(l)&&f.push(l)});return f}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},
{key:"openInWorldNear",value:function(a,f){var l=this;f=f||this.world()||this.env.world;if(!f)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(l.whenRendered(),2);l.opacity=1;r.jumpToEnd()})}));this.center=a;this.setBounds(f.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=
a||this.world()||this.env.world;var f=a.firstHand?a.firstHand.position.addPt(this.hasFixedPosition?wc.pt(0,0):a.scroll):wc.pt(0,0);return a?this.openInWorldNear(f):void 0}},{key:"openInWorld",value:function(a,f){f=f||this.world()||this.env.world;if(!f)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=this.hasFixedPosition?f.visibleBounds().extent().scaleBy(.5,.5):f.visibleBounds().center(),this.snap());f.addMorph(this);return this}},{key:"openInHand",
value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=wc.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,wc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,f){f||(f=[]);if(!this.fullContainsWorldPoint(a))return f;
for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(a,f);this.innerBoundsContainsWorldPoint(a)&&f.push(this);return f}},{key:"morphBeneath",value:function(a){var f=this.world()||this.owner;if(!f)return null;a=f.morphsContainingPoint(a);f=a.indexOf(this);return a[f+1]}},{key:"transformTillMorph",value:function(a,f){if("down"==(void 0===f?"up":f))return a.transformTillMorph(this,"up").inverse();f=new wc.Transform;for(var l=this;l&&l!=a;l=l.owner){var r=l,v=r.origin;r=
r.scroll;0===v.x&&0===v.y||f.preConcatenate(new wc.Transform(l.origin));f.preConcatenate(l.getTransform());l!=this&&(0===r.x&&0===r.y||!l.owner||f.preConcatenate(new wc.Transform(r.negated())));l.hasFixedPosition&&l.owner&&f.preConcatenate(new wc.Transform(l.owner.scroll))}return f}},{key:"localize",value:function(a){var f=this.world(),l=a.x,r=a.y;return f?f.transformPointToMorph(this,wc.pt(l,r)):a}},{key:"worldPoint",value:function(a){var f=this.world(),l=a.x,r=a.y;return f?this.transformPointToMorph(f,
wc.pt(l,r)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var f=this.getGlobalTransform(),l=a.getGlobalTransform().inverse();f.preConcatenate(l);l=a.scroll;0===l.x&&0===l.y||!a.owner||f.preConcatenate(new wc.Transform(l));return f}},{key:"transformPointToMorph",value:function(a,f){for(var l=this.hasFixedPosition,r=$jscomp.makeIterator(this.pathToMorph(a)),v=r.next();!v.done;v=r.next()){var y=$jscomp.makeIterator(v.value);v=y.next().value;y=y.next().value;this!=y&&"up"==v&&(f.x-=
y.scroll.x,f.y-=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(f.x+=y.owner.scroll.x,f.y+=y.owner.scroll.y));this.applyTransform(v,y,f);this!=y&&"down"==v&&(f.x+=y.scroll.x,f.y+=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(f.x-=y.owner.scroll.x,f.y-=y.owner.scroll.y))}l&&a.isWorld&&(f.x=f.x-a.position.x+a.scroll.x,f.y=f.y-a.position.y+a.scroll.y);l&&this.isWorld&&(f.x=f.x+this.position.x-
this.scroll.x,f.y=f.y+this.position.y-this.scroll.y);return f}},{key:"transformRectToMorph",value:function(a,f){var l=this,r,v,y;[r=f.topLeft(),v=f.topRight(),y=f.bottomRight(),f=f.bottomLeft()].forEach(function(A){return l.transformPointToMorph(a,A)});return wc.Rectangle.unionPts([r,v,y,f])}},{key:"applyTransform",value:function(a,f,l){"up"==a?(l.x+=f.origin.x,l.y+=f.origin.y,l.matrixTransform(f.getTransform(),l)):(l.matrixTransform(f.getInverseTransform(),l),l.x-=f.origin.x,l.y-=f.origin.y)}},{key:"_addPathDependant",
value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var f;if(f=this._cachedPaths[a.id])return f;f=this.closestCommonAncestor(a)||this;var l=this,r=[],v=[];for(f._addPathDependant(this);l&&l!=f;)v.push(["up",l]),l._addPathDependant(this),l=l.owner;for(l=a;l&&l!=f;)r.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[a.id]=f=[].concat($jscomp.arrayFromIterable(v),$jscomp.arrayFromIterable(r.reverse()))}},
{key:"closestCommonAncestor",value:function(a){return wc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new wc.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,f){var l=a.x;a=a.y;try{return f.transformPointToMorph(this,wc.pt(l,a))}catch(r){return console.warn("problem "+r+" in localizePointFrom"),wc.pt}}},{key:"getGlobalTransform",
value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(wc.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var f=this.globalBounds();a=a.innerBounds().translateForInclusion(f).topLeft().subPt(f.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();
return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var f=a.position,l=a.scale,r=a.origin,v=a.rotation;a=this._transform||new wc.Transform;var y=this._invTransform||new wc.Transform;f=f||this.position;r=r||this.origin;l=l||this.scale;v=v||this.rotation;a.a=l*Math.cos(v);a.b=l*Math.sin(v);a.c=l*-Math.sin(v);a.d=l*Math.cos(v);a.e=a.a*-r.x+a.c*-r.y+f.x;a.f=
a.b*-r.x+a.d*-r.y+f.y;f=a.a;l=a.b;r=a.c;v=a.d;var A=a.e,E=a.f,F=1/(f*v-r*l);y.a=v*F;y.b=-l*F;y.c=-r*F;y.d=f*F;y.e=(r*E-A*v)*F;y.f=-(f*E-l*A)*F;this._transform=a;this._invTransform=y}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=wc.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},{key:"fullContainsPoint",
value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(f){if(f.constructor==RangeError&&"Maximum call stack size exceeded"==
f.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+f.stack);throw f;}}},{key:"getNameTest",value:function(a,f){if(wc.obj.isRegExp(f)){if(f.test(a.name)||f.test(String(a)))return!0}else if(a.name===f||String(a)===f)return!0;return!1}},
{key:"getAllNamed",value:function(a,f){f=void 0===f?[]:f;if(!this._morphicState||!this.submorphs.length)return f;for(var l=0;l<this.submorphs.length;l++){var r=this.submorphs[l];this.getNameTest(r,a)&&f.push(r)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(a,f);return f}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var f=0;f<this.submorphs.length;f++){var l=this.submorphs[f];if(this.getNameTest(l,a))return l}for(f=0;f<
this.submorphs.length;f++)if(l=this.submorphs[f].getSubmorphNamed(a))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(f){return f.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(f){return f.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var f=this.owner;if(!f)return null;if(f.name===a)return f;for(var l=0;l<f.submorphs.length;l++){var r=f.submorphs[l];
if(r!==this&&(this.getNameTest(r,a)||(r=r.getSubmorphNamed(a))))return r}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(f){return a===f.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},
{key:"onMouseDown",value:function(a){if(this===a.targetMorph&&(a.state.clickedMorph=this,1==a.state.prevClick.clickCount&&200>=Date.now()-a.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(a);return}this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(a){}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",
value:function(a){}},{key:"addKeyBindings",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){f._keybindings||(f._keybindings=[]);f._cachedKeyhandlers=null;f._keybindings.unshift.apply(f._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||
(this._cachedKeyhandlers=[wc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(f,l){var r=wc.findKeysForPlatform(l.keys,a),v=l.command,y="string"===typeof v?v:v.command||v.name;return"string"!==typeof r?f:r.split("|").reduce(function(A,E){var F={};return Object.assign(A,(F[E]={name:y,command:v,prettyKeys:wc.KeyHandler.prettyCombo(E)},F))},f)},{})}},{key:"keysForCommand",value:function(a,f){f=
void 0===f?!0:f;var l=this.keyCommandMap,r=Object.keys(l).find(function(v){return l[v].name===a});return r&&f?l[r].prettyKeys:r}},{key:"simulateKeys",value:function(a){return wc.KeyHandler.simulateKeys(this,a)}},{key:"onKeyDown",value:function(a){wc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",value:function(a){var f=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems()).then(function(l){return f.openMenu(l,
a)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(a,f){var l=this.world();return a&&a.length&&l?l.openWorldMenu(f,a):null}},{key:"menuItems",value:function(){return $world.defaultMenuItems(this)}},{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");
$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var f=a.state;this.position=f.dragStartMorphPosition.addPt(f.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var f=this.copy();f.position=this.transformPointToMorph(a.hand,wc.pt(0,0));a.hand.grab(f)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",
value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,f){f.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},
{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=
this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return wc.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var f=this;this._env=a.env||a._env||wc.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||wc.newMorphId(wc.getClassName(this));
this._animationQueue=new wc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){f.initializeProperties();wc.deserializeSpec(a,function(l){return wc.morph(l)},f)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();wc.tree.prewalk(a,function(f){return f._id=wc.newMorphId(f.type)},function(f){return f.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(f,l){return"copy "+(l&&l.trim()?Number(l)+
1:"1")});return wc.morph({type:a.type}).initFromJSON(a)}},{key:"copy",value:function(){return wc.copyMorph(this)}},{key:"interactivelyPublish",value:function(){var a=this,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return f=a.world()||a.env.world,A.setCatchFinallyBlocks(2),A.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return l=A.yieldResult,r=l.interactivelySavePart,A.yield(r(a,{notifications:!1,loadingIndicator:!0}),5);case 5:v=
A.yieldResult;f.setStatusMessage(v?"Published "+a+" as "+v.name:"Failed to publish part "+a,v?wc.Color.green:wc.Color.red);A.leaveTryBlock(0);break;case 2:y=A.enterCatchBlock(),"canceled"!=y&&f.showError(y),A.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",
value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",
value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(f){return a.master._capturedExtents.set(f,f.extent)})),this.master&&(this._requestMasterStyling=!0),this.makeDirty())}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",value:function(a){var f=this;this.dontRecordChangesWhile(function(){f.applyLayoutIfNeeded()});
return wc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,f){a=void 0===a?{}:a;f=void 0===f?this.env.renderer:f;return f.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),f="number"===typeof a[0]?a.shift():null,l=a.shift();a=new wc.TargetScript(this,l,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(f);return a}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){wc.arr.invoke(this._tickingScripts,
"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var f=this._tickingScripts.filter(function(l){return l.selector===a});this.stopScripts(f)}},{key:"stopScripts",value:function(a){wc.arr.invoke(a,"stop");this._tickingScripts=wc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&wc.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},
{key:"resumeStepping",value:function(){wc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return wc.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(f){return f.equals(a)}))}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},
{key:"commandsIncludingOwners",get:function(){return wc.arr.flatmap([this].concat(this.ownerChain()),function(a){return wc.arr.sortByKey(a.commands,"name").map(function(f){return{target:a,command:f}})})}},{key:"addCommands",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){f.removeCommands(a);f._commands=(f._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var f=
this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var l=a.map(function(v){return"string"===typeof v?v:v.name}),r=(f._commands||[]).filter(function(v){return!l.includes(v.name)});r.length?f._commands=r:delete f._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||wc.defaultCommandHandler}},{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&
a.command?a:null}},{key:"execCommand",value:function(a,f,l,r){return this.commandHandler.exec(a,this,f,l,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,f){this.setProperty(a,f)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(a){a||(a=wc.getClassName(this),a=(wc.string.startsWithVowel(a)?
"an":"a")+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||(this.setProperty("master",a?wc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",
isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new wc.ShadowObject(a),
a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!wc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:wc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:wc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:wc.pt(10,10),set:function(a){var f=this.extent;this.setProperty("extent",a);this.origin.equals(wc.pt(0,
0))||(a=wc.pt(a.x/f.x,a.y/f.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=wc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=wc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(wc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(wc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(wc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(wc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:wc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var f=this,l=this.layout,r=l&&l.isEnabled();r&&l.disable();this.submorphs.forEach(function(v){return a.includes(v)||v.remove()});a.forEach(function(v,y){return f.submorphs[y]!==v&&f.addMorph(v,f.submorphs[y])});r&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=wc.pt(0,0))}},scroll:{group:"geometry",defaultValue:wc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var f=a.x;a=a.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),r=l.y;f=Math.max(0,Math.min(l.x,f));a=Math.max(0,Math.min(r,a));this.setProperty("scroll",wc.pt(f,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:wc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",wc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){wc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},wc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);wc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},wc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){wc.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},wc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:wc.Color.white,left:wc.Color.white,bottom:wc.Color.white,right:wc.Color.white,valueOf:function(){return wc.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=wc.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?wc.obj.extract(a,["top","left","right","bottom"],function(f,l){return wc.obj.isArray(l)?wc.Color.fromTuple(l):l}):a)}}},wc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(f){a.borderStyle=f},get width(){return a.borderWidth},set width(f){a.borderWidth=f},get color(){return a.borderColor},set color(f){a.borderColor=f},get borderRadius(){return a.borderRadius},set borderRadius(f){a.borderRadius=f}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),f=a.properties,l=[];a=$jscomp.makeIterator(a.order);for(var r=a.next();!r.done;r=a.next())r=r.value,f[r].isStyleProp&&l.push(r);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,f={},l=0;l<a.length;l++){var r=a[l];f[r]=this[r]}return f}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var f=wc.arr.without(wc.obj.keys(this.installedFonts||
{}),"_rev"),l=wc.arr.without(wc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(f,l)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,f=[];a&&a!==Object;)f.push(a[Symbol.for("__LivelyClassName__")]),a=a[Symbol.for("lively-instance-superclass")];return this._styleClasses=f}}],d,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1653,end:80668})}(void 0));wc.Morph=kl;wc.Morph=kl;wc.Morph=kl;var vC=Ca("ar",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Ellipse")&&"function"===typeof d.Ellipse?d.Ellipse:d.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},
set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:80677,end:81434})}(wc.Morph));wc.Ellipse=vC;wc.Ellipse=vC;wc.Ellipse=vC;var jF=
function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Triangle")&&"function"===typeof d.Triangle?d.Triangle:d.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},
{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||"fill"==a.prop&&a.value)&&this.update();Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,f=a.x;a=a.y;f!=a&&(this.extent=wc.pt(Math.max(f,a),Math.max(f,a)));this.origin=wc.pt(f/2,a/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;f={width:f/2,style:"solid",color:l};a={width:a/2,style:"solid",color:wc.Color.transparent};switch(this.direction){case "down":var r=
"borderLeft";var v="borderRight";var y="borderTop";break;case "up":r="borderLeft";v="borderRight";y="borderBottom";break;case "left":r="borderBottom";v="borderTop";y="borderRight";break;case "right":r="borderBottom",v="borderTop",y="borderLeft"}l={};Object.assign(this,(l[r]=a,l[v]=a,l[y]=f,l))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=
this.fill}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:81443,end:82901})}(wc.Morph);wc.Triangle=jF;wc.Triangle=jF;wc.Triangle=jF;var Vz=Ca("I",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Image")&&"function"===typeof d.Image?
d.Image:d.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"__deserialize__",value:function(a,f,l,r){this._isDeserializing=!0;Zb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,a,f,l,r)}},{key:"__after_deserialize__",value:function(a,f,l){delete this._isDeserializing;Zb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,a,f,l)}},{key:"isImage",
get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,f){var l=this;f=void 0===f?this.autoResize:f;var r=this.autoResize;this.autoResize=f;this.imageUrl=a;return wc.promise.finally(this.whenLoaded(),function(){return l.autoResize=r})}},{key:"whenLoaded",
value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(f,l){var r=a.imageUrl;a.imageElement(function(v){a.imageUrl!==r&&l(Error("url changed ("+r+" => "+a.imageUrl+")"));a.naturalExtent=wc.pt(v.width,v.height);a.isLoaded=!0;f(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var f=this;return new Promise(function(l,r){var v=f.env.domEnv.document.createElement("img");v.onload=function(){l(v);"function"===typeof a&&a(v)};v.src=f.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return f=a.env.domEnv.document,y.yield(a.imageElement(),2);l=y.yieldResult;r=f.createElement("canvas");v=r.getContext("2d");r.width=l.width;r.height=l.height;v.drawImage(l,0,0,l.width,l.height);return y.return({canvas:r,ctx:v,image:l})})}},{key:"imageData",value:function(a){var f=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(f.canvasElementAndContext(),2);l=J.yieldResult;r=l.ctx;v=l.image;a||(a=wc.rect(0,0,v.width,
v.height));y=a;A=y.x;E=y.y;F=y.width;H=y.height;console.log(A,E);return J.return(r.getImageData(A,E,F,H))})}},{key:"pixelAt",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(f.imageData(a.extent(wc.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(a){var f=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(l=wc.Color,r=l.fromTuple8Bit,v.yield(f.pixelAt(a),
2)):v.return(r.call(l,v.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,f){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,f,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return f=a.imageUrl,l=f.slice(f.lastIndexOf(".")+1,f.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg",
"png","tiff","svg+xml"].includes(l)||(l="gif"),f.startsWith("http")||(f=wc.location.origin+"/"+f),F.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=F.nextAddress)return r=F.yieldResult,v=r.runCommand,y='curl --silent "'+f+'" | openssl base64',F.yield(v(y).whenDone(),3);A=F.yieldResult;E=A.stdout;return F.return(a.loadUrl("data:image/"+l+";base64,"+E,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var f=this.name||"image-from-lively";var l=
a.match(/image\/([^;]+)/);l&&l[1]&&(f+="."+l[1])}else f||(f=wc.arr.last(a.split("/")));l=document.createElement("a");l.download=f;l.href=a;l.click()}},{key:"convertTo",value:function(a,f){f||(f=1);var l=this.canvasElementAndContext(),r=l.ctx,v=l.canvas;l=l.image;var y=this.width,A=this.height;v.width=l.width;v.height=l.height;r.drawImage(l,0,0,y,A);return this.loadUrl(v.toDataURL(a,f),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,f,l,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress)return L.yield(a.canvasElementAndContext(),2);f=L.yieldResult;l=f.ctx;r=f.canvas;v=f.image;y=a;A=y.width;E=y.height;F=v;H=F.width;J=F.height;r.width=H;r.height=J;l.drawImage(v,0,0,A,E);O=l.getImageData(0,0,H,J);r.width=A;r.height=E;l.putImageData(O,0,0);return L.return(a.loadUrl(r.toDataURL(),!1))})}},{key:"crop",value:function(a){var f=this.canvasElementAndContext(),l=f.ctx,r=f.canvas;f=f.image;var v=this.innerBounds(),y=f.width,A=f.height;a=v.intersection(a);a=new wc.Rectangle(a.x/
v.width,a.y/v.height,a.width/v.width,a.height/v.height);a=$jscomp.makeIterator((new wc.Rectangle(0,0,y,A)).divide([a])).next().value;r.width=y;r.height=A;l.drawImage(f,0,0,y,A);f=l.getImageData(a.x,a.y,a.width,a.height);r.width=a.width;r.height=a.height;l.putImageData(f,0,0);return this.loadUrl(r.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);f=l.yieldResult;"string"===typeof f&&(a.imageUrl=f);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=Zb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);f.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/
a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=a,r.yield(a.determineNaturalExtent(),2)):r.return(l.extent=r.yieldResult)})}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,
copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(a){var f=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var l=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){f.imageUrl===a&&(f.isLoaded=!0,l&&(f.extent=f.naturalExtent))})}},fill:{defaultValue:wc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},
autoResize:{isStyleProp:!0,defaultValue:!1}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82910,end:92271})}(wc.Morph));wc.Image=Vz;wc.Image=Vz;wc.Image=Vz;var LI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("PathPoint")&&"function"===
typeof d.PathPoint?d.PathPoint:d.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){f=void 0===f?{}:f;this.path=a;this._isSmooth=f.isSmooth||!1;this.x=f.position?f.position.x:f.x||0;this.y=f.position?f.position.y:f.y||0;this._controlPoints=f.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints",
"$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return wc.pt(this.x,this.y)}},{key:"position",set:function(a){var f=a.y;this.x=a.x;this.y=f;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var a=new wc.ExpressionSerializer;return new wc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:wc.pt(0,0),previous:wc.pt(0,0)}}},{key:"controlPoints",set:function(a){var f=a=void 0===a?{}:a;a=f.next;f=f.previous;this._controlPoints={next:a?wc.Point.fromLiteral(a):wc.pt(0,0),previous:f?wc.Point.fromLiteral(f):wc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",
a)}},{key:"moveControlPoint",value:function(a,f){var l=this.controlPoints[a];l=l?l.addPt(f):f;f="next"==a?"previous":"next";var r=this.controlPoints[f];this.isSmooth&&(r=l.negated().normalized().scaleBy(r.r()));var v={};this.controlPoints=(v[a]=l,v[f]=r,v);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,f,l,r){a=wc.pt(a.x,a.y);f=wc.pt(f.x,f.y);a=f.subPt(a);var v=a.scaleBy(1/a.r());l=f.subPt(l).dotProduct(v);return f.subPt(v.scaleBy(Math.max(1,Math.min(l,a.r())))).addXY(r,r)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(a,f){var l=this.copy();l.position=l.position.interpolate(a,f);return l}},{key:"adaptControlPoints",value:function(a){var f=this.nextVertex,l=this.previousVertex,r=this.position,v=this.path,y=v.vertices,A=y.indexOf(this),E=0===A;y=A===y.length-1;l=l?l.position:r;f=f?f.position:r;a?(a=this.pointOnLine(l,f,r,v.borderWidth),
this.controlPoints={previous:E?wc.pt(0,0):a.subPt(f),next:a.subPt(l)}):this.controlPoints={previous:E?wc.pt(0,0):l.subPt(r).scaleBy(.5),next:y?wc.pt(0,0):f.subPt(r).scaleBy(.5)};v.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:92280,end:96245})}(void 0);wc.PathPoint=LI;wc.PathPoint=LI;wc.PathPoint=LI;var wC=Ca("aA",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Path")&&"function"===typeof d.Path?d.Path:d.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},wc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,f,l){Zb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,a,f,l);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,a,f,l,r);f=this.getProperty("draggable");f!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:f});if(f=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:f.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",wc.getClassName(f)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},
{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var f=this.origin,l=this.extent,r=f.x/l.x;l=f.y/l.y;var v=[];a.forEach(function(A,E){var F=A.isSmooth,H=A.position,J=A.controlPoints||{};A=J.next;J=J.previous;v.push(H);F&&0<E&&E<a.length-
1&&v.push(H.addPt(A),H.addPt(J))});f=wc.Rectangle.unionPts(v);r=wc.pt(f.width*r,f.height*l);var y=f.topLeft();a.forEach(function(A){return A.moveBy(y.negated())});this.moveBy(this.getTransform().transformDirection(y));this.extent=f.extent().maxPt(wc.pt(this.borderWidth,this.borderWidth));this.origin=r;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var f=a.prop,l=a.value,r=a.prevValue,v=this._adjustingVertices,y=this._adjustingOrigin;"extent"==f&&l&&r&&!v&&this.adjustVertices(l.scaleByPt(r.inverted()));
(!y&&"vertices"===f||"borderWidthLeft"===f)&&this.updateBounds("vertices"==f?l:this.vertices);v||"origin"!==f||this.updateBounds(this.vertices);Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var f=
this,l=this.vertices;l&&l.forEach(function(r){var v=r.controlPoints,y=v.next;v=v.previous;y=y.scaleByPt(a);v=v.scaleByPt(a);r.position=r.position.addPt(f.origin).scaleByPt(a).subPt(f.origin);r.controlPoints={next:y,previous:v}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var f=this.origin;this.vertices.forEach(function(l){return l.position=f.subPt(a).addXY(l.x,l.y)});Zb._get(Object.getPrototypeOf(k.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",
value:function(a,f){f=void 0===f?null:f;var l=this.vertices;f="number"===typeof f?f:f&&f.isPathPoint?l.indexOf(f):void 0;"number"===typeof f&&-1<f?l.splice(f,0,a):l.push(a);this.vertices=l}},{key:"addVertexCloseTo",value:function(a){var f=this.verticesCloseTo(a),l=f.closest,r=l.length;l=l.vertex;f=f.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=r?l:f?f.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=
wc.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+wc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,f){f=void 0===f?!0:f;for(var l=this.vertices,r=Infinity,v=-1,y=0;y<l.length;y++){var A=l[y].position.dist(a);A>=r||(r=A,v=y)}a=0===v?null:{index:v-1,vertex:l[v-1]};r=v===l.length-1?null:{index:v+1,vertex:l[v+1]};l={index:v,vertex:l[v]};f&&(f=this._pathNode,a&&(v=this.findClosestPointOnPath(a.vertex.position,6,3,f).length,
a.length=v),r&&(v=this.findClosestPointOnPath(r.vertex.position,6,3,f).length,r.length=v),f=this.findClosestPointOnPath(l.vertex.position,20,3,f).length,l.length=f);return{previous:a,next:r,closest:l}}},{key:"findClosestPointOnPath",value:function(a,f,l,r){function v(y,A,E,F,H,J,O){E=void 0===E?10:E;F=void 0===F?3:F;H=void 0===H?0:H;J=void 0===J?y.getTotalLength():J;O=void 0===O?0:O;var L=J,Y=E;J=[];var S=(H-L)/(Y-1),ea=0;J.push([wc.Point.ensure(y.getPointAtLength(L)),L,ea]);for(ea=1;ea<Y-1;ea++){var qa=
L+ea*S;J.push([wc.Point.ensure(y.getPointAtLength(qa)),qa,ea])}J.push([wc.Point.ensure(y.getPointAtLength(H)),H,ea]);H=Infinity;L=-1;Y=$jscomp.makeIterator(J);for(S=Y.next();!S.done;S=Y.next())ea=$jscomp.makeIterator(S.value),S=ea.next().value,ea.next(),ea=ea.next().value,S=A.dist(S),S>=H||(H=S,L=ea);if(O>=F)return A=$jscomp.makeIterator(J[L]),y=A.next().value,A=A.next().value,{point:y,length:A};H=J[Math.max(0,L-1)][1];J=J[Math.min(J.length-1,L+1)][1];return v(y,A,E,F,H,J,O+1)}r||(r=(r=this.env.renderer.getNodeForMorph(this))&&
r.querySelector("#svg"+wc.string.regExpEscape(this.id)));return r?v(r,a,f,l):{length:0,point:a}}},{key:"onDragStart",value:function(a){var f=a.domEvt.target,l=(new wc.PropertyPath("attributes.class.value")).get(f);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),l.next(),a=l.next().value,l=l.next().value,this._controlPointDrag={marker:f,n:Number(a)},void 0!==l&&(this._controlPointDrag.ctrlN=Number(l));else return Zb._get(Object.getPrototypeOf(k.prototype),
"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return Zb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,a);var f=this._controlPointDrag,l=f.n,r=f.ctrlN,v=this.vertices;if(f=v[l])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===r?(f.moveBy(a),a=v[l-1],v=v[l+1],a&&10>a.position.dist(f.position)?this._controlPointDrag.maybeMerge=[l-1,l]:v&&10>v.position.dist(f.position)?this._controlPointDrag.maybeMerge=[l,l+
1]:this._controlPointDrag.maybeMerge=void 0):1===r?f.movePreviousControlPoint(a):2===r&&f.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var f=this._controlPointDrag;if(f&&(f=f.maybeMerge,delete this._controlPointDrag,f)){var l=$jscomp.makeIterator(f);f=l.next().value;l=l.next().value;a[f].controlPoints.next=a[l].controlPoints.next;a.splice(l,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,
a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,f=wc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=wc.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";f[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?f:l),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
f:l),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(Zb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return wc.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||wc.pt(0,0);return wc.pt(a.x,a.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,
type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=wc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",wc.obj.extract(a,["top","left","right","bottom"],function(f,l){return wc.obj.isArray(l)?wc.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var f=this,l=this.isSmooth;
this._adjustingVertices=!0;a=a.map(function(r){return r.isPathPoint?Object.assign(r,{path:f}):new wc.PathPoint(f,Object.assign({isSmooth:l},r))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",
isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(f){return f.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:96254,end:109951})}(wc.Morph));wc.Path=wC;wc.Path=wC;wc.Path=wC;var kF=Ca("aB",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Polygon")&&"function"===typeof d.Polygon?d.Polygon:d.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:109960,end:110214})}(wc.Path));wc.Polygon=kF;wc.Polygon=kF;wc.Polygon=kF;var lF=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("LineMorph")&&"function"===typeof d.LineMorph?d.LineMorph:d.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(k,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,f=this.height,l=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,f,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},
fill:{defaultValue:wc.Color.black},height:{defaultValue:1},line:{defaultValue:wc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var f=
a.subPt(this.start),l=this.rotation;this.line=new wc.Line(a,this.end.addPt(f));this.rotation=l}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:110223,end:111715})}(wc.Morph);wc.LineMorph=lF;wc.LineMorph=lF;wc.LineMorph=lF;var Zua=Object.freeze({__proto__:null,Morph:kl,Ellipse:vC,Triangle:jF,
Image:Vz,PathPoint:LI,Path:wC,Polygon:kF,LineMorph:lF}),Po=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");Po.pt=di;Po.Morph=kl;Po.morph=de;Po.config=Ul;Po.fun=gn;var mF=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("TooltipViewer")&&"function"===typeof d.TooltipViewer?d.TooltipViewer:d.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var f=this,l=a.hand,r=$world.morphsContainingPoint(a.positionIn($world));for(r=
r.slice(r.indexOf(l)+1).find(function(v){return v.tooltip});r&&!r.visible;)r=r.morphBeneath(a.positionIn($world));r?this.currentMorph!==r&&this.invalidatesCurrentTooltip(r)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(r,l),this.currentMorph=r):this.currentTooltip?this.currentTooltip.softRemove().then(function(){f.currentTooltip.owner||(f.currentTooltip=null)}):this.currentMorph=null}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=
null}},{key:"hoverIntoMorph",value:function(a,f){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,f):this.scheduleTooltipFor(a,f)}},{key:"hoverOutOfMorph",value:function(a){var f=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return f.currentTooltip==l&&(f.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,f){var l=this;this.timer=setTimeout(function(){return l.showTooltipFor(a,f)},1E3*Po.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",
value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,f){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),f=f?f.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new Po.Tooltip({position:f,description:a.tooltip}),$world.addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],
d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:189,end:2700})}(void 0);Po.TooltipViewer=mF;Po.TooltipViewer=mF;Po.TooltipViewer=mF;var xC=Ca("ao",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("Tooltip")&&"function"===typeof d.Tooltip?
d.Tooltip:d.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(Po.pt(0,7))}},{key:"softRemove",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(f.animate({opacity:0,duration:300}),2);a&&a(f);f.remove();l.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(a){var f=$jscomp.makeIterator(this.submorphs).next().value;f.value=a;f.fit()}},
submorphs:{initialize:function(){this.submorphs=[new Po.morph({type:"label",width:200})]}}}}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2709,end:3866})}(Po.Morph));Po.Tooltip=xC;Po.Tooltip=xC;Po.Tooltip=xC;var $ua=Object.freeze({__proto__:null,TooltipViewer:mF,Tooltip:xC}),Kba=
lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");Kba.default=$v;Kba.MorphicDB=$v;var ava=Object.freeze({__proto__:null,MorphicDB:$v}),Hm=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");Hm.nyi=function(b){throw Error("Not yet implemented: "+b);};Hm.string=Ih;Hm.promise=Hg;Hm.debugMessageOrder=!1;var Fk=function(b){this.id=Hm.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=
new Map;this._outOfOrderCacheBySenders=new Map};Fk.prototype.isOnline=function(){Hm.nyi("isOnline")};Fk.prototype.open=function(){Hm.nyi("open")};Fk.prototype.close=function(){Hm.nyi("close")};Fk.prototype.remove=function(){Hm.nyi("remove")};Fk.prototype.whenOnline=function(b){var d=this;return Hm.promise.waitFor(b,function(){return d.isOnline()}).then(function(){return d}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?Error("Timeout in "+d+".whenOnline"):k)})};Fk.prototype.onError=
function(b){this.debug&&console.log("["+this+"] error: "+b)};Fk.prototype.removeService=function(b){delete this.actions[b]};Fk.prototype.removeServices=function(b){var d=this;b.forEach(function(k){return d.removeService(k)})};Fk.prototype.addService=function(b,d){this.actions[b]=d};Fk.prototype.addServices=function(b){var d=this;Object.keys(b).forEach(function(k){return d.addService(k,b[k])})};Fk.prototype.ping=function(b){var d=this,k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return k=Date.now(),v.yield(d.sendToAndWait(b,"l2l-ping",{timestamp:k}),2);a=v.yieldResult;f=a.data;l=f.timestamp;r=Date.now();return v.return({to:l-k,from:r-l,roundtrip:r-k})})};Fk.prototype.send=function(b,d){Hm.nyi("send")};Fk.prototype.sendAndWait=function(b){var d=this,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return k=new Promise(function(v,y){return d.send(b,v)}),a={},f=d.options.ackTimeout+400,"ackTimeout"in b&&(f=!b.ackTimeout||
0>b.ackTimeout?null:b.ackTimeout+400),f?r.yield(Promise.race([Hm.promise.delay(f,a),k]),5):r.yield(k,4);case 4:l=r.yieldResult;r.jumpTo(3);break;case 5:l=r.yieldResult;case 3:if(l===a)throw Error("Timeout sending "+b.action);return r.return(l)}})};Fk.prototype.sendTo=function(b,d,k,a){return this.send({target:b,action:d,data:k},a)};Fk.prototype.sendToAndWait=function(b,d,k,a){return this.sendAndWait(Object.assign({target:b,action:d,data:k},a))};Fk.prototype.prepareSend=function(b,d){var k=b.target,
a=b.action,f=b.messageId,l=b.sender;if(!a)throw Error("Trying to send a message without specifying action!");if(!k)throw Error("Trying to send message "+a+" without specifying target!");f||(b.messageId=Hm.string.newUUID());l||(b.sender=this.id);a=b.n=this._outgoingOrderNumberingByTargets.get(k)||0;this._outgoingOrderNumberingByTargets.set(k,a+1);if("function"===typeof d){l=this;var r=d;d=function(v){var y=l._incomingOrderNumberingBySenders.get(v.sender)||0;l.debug&&Hm.debugMessageOrder&&console.log("[MSG ORDER] "+
l+" received ack for "+v.action+" as msg "+y);try{r.apply(null,arguments)}catch(A){console.error("Error in ack fn of "+l+": "+A.stack)}l._incomingOrderNumberingBySenders.set(v.sender,y+1);setTimeout(function(){return l.invokeOutOfOrderMessages(v.sender)},0)}}this.debug&&Hm.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+a+" ("+b.action+") to "+k);return[b,d]};Fk.prototype.prepareAnswerMessage=function(b,d){return{action:b.action+"-response",inResponseTo:b.messageId,target:b.sender,
data:d,sender:this.id}};Fk.prototype.installEventToMessageTranslator=function(b){var d=this,k=b.onevent;b.onevent=function(a){var f=a.data||[];k.call(this,a);a.data=["*"].concat(f);k.call(this,a)};b.on("*",function(a,f){a&&"object"===typeof a&&a.action&&(f=a,a=f.action);var l=arguments[arguments.length-1];l="function"===typeof l?l:null;(f=f===l?null:f)&&f.data&&("number"===typeof f.n||f.broadcast)&&f.sender?d.receive(f,b,l):(console.warn(d+" received non-conformant message "+a+":",arguments),"function"===
typeof l&&l({data:{error:"invalid l2l message"}}))})};Fk.prototype.receive=function(b,d,k){this.dispatchL2LMessageToSelf(b,d,k)};Fk.prototype.dispatchL2LMessageToSelf=function(b,d,k){var a=this,f=b.action;if(b.broadcast)this.safeInvokeServiceHandler(f,b,k,d);else try{var l=this._incomingOrderNumberingBySenders.get(b.sender)||0,r="register"===f||"unregister";if(!r&&b.n<l)console.error("[MSG ORDER] ["+this+"] received message no. "+b.n+" but expected >= "+l+", dropping "+f);else if(!r&&b.n>l){this.debug&&
Hm.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+f+" ("+b.n+") for later invocation");var v=this._outOfOrderCacheBySenders.get(b.sender);v||(v=[],this._outOfOrderCacheBySenders.set(b.sender,v));v.push([f,b,k,d])}else this.safeInvokeServiceHandler(f,b,k,d),setTimeout(function(){return a.invokeOutOfOrderMessages(b.sender)},0)}catch(y){console.error("Error message ordering when handling "+f+": "+(y.stack||y)),"function"===typeof k&&k(this.prepareAnswerMessage(b,
{isError:!0,error:String(y.stack||y)}))}};Fk.prototype.invokeOutOfOrderMessages=function(b){var d=this._outOfOrderCacheBySenders.get(b);if(d&&d.length){var k=this._incomingOrderNumberingBySenders.get(b)||0;b=d.findIndex(function(a){a=$jscomp.makeIterator(a);a.next();return a.next().value.n===k});-1!==b&&(d.splice(b,1),this.invokeServiceHandler.apply(this,d[b]))}};Fk.prototype.renameTarget=function(b,d){if(b!==d){var k=this._outgoingOrderNumberingByTargets.get(b);this._outgoingOrderNumberingByTargets.delete(b);
this._outgoingOrderNumberingByTargets.set(d,k)}};Fk.prototype.safeInvokeServiceHandler=function(b,d,k,a){try{"function"===typeof this.actions[b]?this.invokeServiceHandler(b,d,k,a):a._events&&Object.keys(a._events).includes(b)||(console.warn("WARNING ["+this+"] Unhandled message: "+b),"function"===typeof k&&k(this.prepareAnswerMessage(d,{isError:!0,error:"message not understood: "+b})))}catch(f){console.error("Error when handling "+b+": "+(f.stack||f)),"function"===typeof k&&k(this.prepareAnswerMessage(d,
{isError:!0,error:String(f.stack||f)}))}};Fk.prototype.invokeServiceHandler=function(b,d,k,a){var f=this;this.debug&&Hm.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+d.n+" ("+d.action+") from "+d.sender);this._incomingOrderNumberingBySenders.set(d.sender,d.n+1);if("function"===typeof k){var l=!1,r=!1,v="ackTimeout"in d?d.ackTimeout:this.options.ackTimeout,y=this._outgoingOrderNumberingByTargets.get(d.sender)||0;this._outgoingOrderNumberingByTargets.set(d.sender,y+1);var A=function(E){r?
console.warn("["+f+"] ackFn for "+d.action+" called after it timed out, dropping answer!"):l?console.warn("["+f+"] ack function called repeatedly when handling "+d.action):(l=!0,k(f.prepareAnswerMessage(d,E)),f.debug&&Hm.debugMessageOrder&&console.log("[MSG ORDER] "+f+" sending "+y+" (ack for "+d.action+")"))};v&&setTimeout(function(){l||(A({isError:!0,error:"Timeout error: "+f+" did not send answer for "+d.action+" after "+v+"ms"}),r=!0)},v)}try{this.actions[b].call(this,this,d,A,a)}catch(E){console.error("["+
this+"] Error handling "+b+": "+(E.stack||E)),A&&A({error:E.stack})}};$jscomp.global.Object.defineProperties(Fk.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(b){this.options.debug=b}}});Hm.L2LConnection=Fk;Hm.default=Fk;var Ix=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),uP={"l2l-ping":function(b,d,k,a){a=d.sender;d=d.data.timestamp;var f=Date.now();"function"===typeof k&&k({timestamp:f});b.debug&&console.log("[undefined] got ping from "+
a+", time: "+(f-d)+"ms")},"remote-eval":function(b,d,k,a){var f=d.data.source;Promise.resolve().then(function(){return eval(f)}).then(function(l){return k({value:l})}).catch(function(l){l.originalErr&&(l=l.originalErr);console.error("eval error: "+l);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})},"remote-eval-2":function(b,d,k,a){var f=d.data.source;Promise.resolve().then(function(){var l=eval(f);if(!(l instanceof Promise))throw console.error("unexpected eval result:"+l),Error("unexpected eval result:"+
l);return l}).then(function(l){return k(l)}).catch(function(l){console.error("eval error: "+l);l.originalErr&&(l=l.originalErr);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})}};Ix.defaultActions=uP;Ix.defaultActions=uP;Ix.defaultActions=uP;var Wz={},kY=(Wz["[broadcast] send"]=function(b,d,k,a){var f=d.sender,l=d.data,r,v,y,A,E,F,H,J,O,L,Y,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){r=l;v=r.action;y=r.broadcast;A=r.room;E=r.namespace;F=r.isSystemBroadcast;H=
r.isMultiServerBroadcast;J=[];H?(console.log(".......isMultiServerBroadcast"),O=b,L=O.id,Y=b.getTrackerList(),console.log(Y),J=Y.map(function(qa){return qa.id!=L?qa.io.nsps["/"+qa.namespace]:a.broadcast})):(F&&(E=b.namespace),J.push(E?b.io.nsps["/"+E]:a.broadcast));J.forEach(function(qa){return qa.to(A).emit({action:v,sender:f,broadcast:!0,data:y})});k&&"function"===typeof k&&(S="message broadcasted to "+A,E&&(S+=" in namespace "+E),1<J.length&&(S+=" "+J.length+" trackers"),console.log(S),k({status:S}));
ea.jumpToEnd()})},Wz["[broadcast] join room"]=function(b,d,k,a){var f=d.sender,l=d.data.room,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return v=!1,y=b.io.nsps["/"+b.namespace].adapter.rooms,(A=y[l]&&y[l].sockets&&y[l].sockets[a.id])?(r=f+" already in "+l,E.jumpTo(2)):E.yield(new Promise(function(F,H){return a.join(l,function(J){return J?H(J):F()})}),3);2!=E.nextAddress&&(r=f+" joined "+l,v=!0);k&&"function"===typeof k&&k({status:r,joined:v});E.jumpToEnd()})},
Wz["[broadcast] leave room"]=function(b,d,k,a){var f=d.sender,l=d.data.room,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return v=!1,y=b.io.nsps["/"+b.namespace].adapter.rooms,A=y[l]&&y[l].sockets&&y[l].sockets[a.id],A?E.yield(new Promise(function(F,H){return a.leave(l,function(J){return J?H(J):F()})}),3):(r=f+" not in "+l,E.jumpTo(2));2!=E.nextAddress&&(r=f+" left room "+l,v=!0);console.log(r);k&&"function"===typeof k&&k({left:v,status:r});E.jumpToEnd()})},
Wz["[broadcast] my rooms"]=function(b,d,k,a){k(a.rooms)},Wz["[broadcast] all rooms"]=function(b,d,k,a){k(b.io.nsps["/"+b.namespace].adapter.rooms)},Wz["[broadcast] list room members"]=function(b,d,k,a){d=d.data.room;a=b.io;d?(b=a.nsps["/"+b.namespace].adapter.rooms[d],k({room:d,sockets:b?b.sockets:{},length:b?b.length:0})):k({isError:!0,error:"`room` paramerter missing!"})},Wz.getClients=function(b,d,k){b.removeDisconnectedClients();k(Array.from(b.clients))},Wz);Ix.defaultTrackerActions=kY;Ix.defaultTrackerActions=
kY;Ix.defaultTrackerActions=kY;var MI={},vP=(MI.getRoomList=function(b){var d=b.client,k=b.ackFn,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=d._socketioClient.rooms;k(a);f.jumpToEnd()})},MI["ask for"]=function(b,d,k,a){var f=d.sender,l=d.data.query,r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return v=l.match(/password|sudo/i)?"passwordPrompt":"prompt",A.yield($world[v](l),2);y=A.yieldResult;"function"===typeof k&&k({answer:y});
b.debug&&console.log("["+r+"] message 'ask for' from "+f+", query: "+l);A.jumpToEnd()})},MI["open editor"]=function(b,d,k,a){var f=d.data.args,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return f.length?r.yield($world.execCommand("open file for EDITOR",{url:f[0]}),2):(k({error:"no file specified"}),r.return());l=r.yieldResult;"function"===typeof k&&k("aborted"===l?{error:String(l)}:{status:l});r.jumpToEnd()})},MI.changeWorkingDirectory=function(b,d,k,a){var f=
d.data.args,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){l=$jscomp.makeIterator(f||[]);r=l.next().value;v=l.next().value;y="OK";try{if(r)if(v){if(A=$world.getMorphWithId(v))if(A.__lookupSetter__("cwd"))A.cwd=r;else if("function"===typeof A.changeWorkingDirectory)A.changeWorkingDirectory(r);else if("function"===typeof A.pluginFind){if(E=A.pluginFind(function(H){return H.isShellEditorPlugin}))E.cwd=r}else y="[changeWorkingDirectory] cannot figure pout how to set dir"}else y=
"[changeWorkingDirectory] No command morph";else y="[changeWorkingDirectory] No directory received"}catch(H){y=String(H)}"OK"!==y&&console.warn(y);"function"===typeof k&&k(y);F.jumpToEnd()})},MI);Ix.defaultClientActions=vP;Ix.defaultClientActions=vP;Ix.defaultClientActions=vP;var bva={},cva=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
dva="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Lba=bva=function(b){var d=b,k=b.indexOf("["),a=b.indexOf("]");-1!=k&&-1!=a&&(b=b.substring(0,k)+b.substring(k,a).replace(/:/g,";")+b.substring(a,b.length));var f=cva.exec(b||"");b={};for(var l=14;l--;)b[dva[l]]=f[l]||"";-1!=k&&-1!=a&&(b.source=d,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=
!0);d=b.path;k=d.replace(/\/{2,9}/g,"/").split("/");"/"!=d.substr(0,1)&&0!==d.length||k.splice(0,1);"/"==d.substr(d.length-1,1)&&k.splice(k.length-1,1);b.pathNames=k;b.queryKey=fla(b,b.query);return b},eva={},tH=864E5,hla=365.25*tH,fva=eva=function(b,d){d=d||{};var k=typeof b;if("string"===k&&0<b.length)return gla(b);if("number"===k&&!1===isNaN(b))return d.long?CM(b,tH,"day")||CM(b,36E5,"hour")||CM(b,6E4,"minute")||CM(b,1E3,"second")||b+" ms":b>=tH?Math.round(b/tH)+"d":36E5<=b?Math.round(b/36E5)+
"h":6E4<=b?Math.round(b/6E4)+"m":1E3<=b?Math.round(b/1E3)+"s":b+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b));},kla="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ui={};Ui=Ui=JU.debug=JU["default"]=JU;Ui.coerce=function(b){return b instanceof Error?b.stack||b.message:b};Ui.disable=function(){Ui.enable("")};Ui.enable=function(b){Ui.save(b);Ui.names=[];Ui.skips=[];var d,k=("string"===typeof b?b:"").split(/[\s,]+/),a=k.length;
for(d=0;d<a;d++)k[d]&&(b=k[d].replace(/\*/g,".*?"),"-"===b[0]?Ui.skips.push(new RegExp("^"+b.substr(1)+"$")):Ui.names.push(new RegExp("^"+b+"$")));for(d=0;d<Ui.instances.length;d++)b=Ui.instances[d],b.enabled=Ui.enabled(b.namespace)};Ui.enabled=function(b){if("*"===b[b.length-1])return!0;var d;var k=0;for(d=Ui.skips.length;k<d;k++)if(Ui.skips[k].test(b))return!1;k=0;for(d=Ui.names.length;k<d;k++)if(Ui.names[k].test(b))return!0;return!1};Ui.humanize=fva;Ui.instances=[];Ui.names=[];Ui.skips=[];Ui.formatters=
{};var wP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Mo={},KU=bj;Mo=Mo=Ui;Mo.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};Mo.formatArgs=function(b){var d=(this||wP).useColors;b[0]=(d?"%c":"")+(this||wP).namespace+(d?" %c":" ")+b[0]+(d?"%c ":" ")+"+"+Mo.humanize((this||wP).diff);if(d){d="color: "+(this||wP).color;b.splice(1,0,d,"color: inherit");var k=0,a=0;b[0].replace(/%[a-zA-Z%]/g,
function(f){"%%"!==f&&(k++,"%c"===f&&(a=k))});b.splice(a,0,d)}};Mo.save=function(b){try{null==b?Mo.storage.removeItem("debug"):Mo.storage.debug=b}catch(d){}};Mo.load=A7;Mo.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var gva=Mo;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var lY=chrome.storage.local;else a:{try{lY=window.localStorage;
break a}catch(b){}lY=void 0}gva.storage=lY;Mo.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
Mo.formatters.j=function(b){try{return JSON.stringify(b)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};Mo.enable(A7());var Jx=Mo,ll="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Mba={};Mba=hr;hr.prototype.on=hr.prototype.addEventListener=function(b,d){(this||ll)._callbacks=(this||ll)._callbacks||{};((this||ll)._callbacks["$"+b]=(this||ll)._callbacks["$"+b]||[]).push(d);return this||ll};hr.prototype.once=function(b,d){function k(){this.off(b,k);d.apply(this||
ll,arguments)}k.fn=d;this.on(b,k);return this||ll};hr.prototype.off=hr.prototype.removeListener=hr.prototype.removeAllListeners=hr.prototype.removeEventListener=function(b,d){(this||ll)._callbacks=(this||ll)._callbacks||{};if(0==arguments.length)return(this||ll)._callbacks={},this||ll;var k=(this||ll)._callbacks["$"+b];if(!k)return this||ll;if(1==arguments.length)return delete (this||ll)._callbacks["$"+b],this||ll;for(var a,f=0;f<k.length;f++)if(a=k[f],a===d||a.fn===d){k.splice(f,1);break}0===k.length&&
delete (this||ll)._callbacks["$"+b];return this||ll};hr.prototype.emit=function(b){(this||ll)._callbacks=(this||ll)._callbacks||{};for(var d=Array(arguments.length-1),k=(this||ll)._callbacks["$"+b],a=1;a<arguments.length;a++)d[a-1]=arguments[a];if(k){k=k.slice(0);a=0;for(var f=k.length;a<f;++a)k[a].apply(this||ll,d)}return this||ll};hr.prototype.listeners=function(b){(this||ll)._callbacks=(this||ll)._callbacks||{};return(this||ll)._callbacks["$"+b]||[]};hr.prototype.hasListeners=function(b){return!!this.listeners(b).length};
var yC=Mba,hva={},iva={}.toString,mY=hva=Array.isArray||function(b){return"[object Array]"==iva.call(b)},Nba={},nY=ei.Buffer;Nba=function(b){var d;!(d=jva&&nY.isBuffer(b))&&(d=kva)&&((d=b instanceof ArrayBuffer)||(d="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(b):b.buffer instanceof ArrayBuffer));return d};var jva="function"===typeof nY&&"function"===typeof nY.isBuffer,kva="function"===typeof ArrayBuffer,Oba=Nba,Pba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,xP={},MU=mY,B7=Oba,Qba=Object.prototype.toString,lva="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Qba.call(Blob),mva="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Qba.call(File);xP.deconstructPacket=function(b){var d=[];b.data=LU(b.data,d);b.attachments=d.length;return{packet:b,buffers:d}};xP.reconstructPacket=function(b,d){b.data=NU(b.data,d);b.attachments=void 0;return b};xP.removeBlobs=function(b,d){function k(l,
r,v){if(!l)return l;if(lva&&l instanceof Blob||mva&&l instanceof File){a++;var y=new FileReader;y.onload=function(){v?v[r]=(this||Pba).result:f=(this||Pba).result;--a||d(f)};y.readAsArrayBuffer(l)}else if(MU(l))for(y=0;y<l.length;y++)k(l[y],y,l);else if("object"===typeof l&&!B7(l))for(y in l)k(l[y],y,l)}var a=0,f=b;k(f);a||d(f)};var lo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qk={},OU=Jx("socket.io-parser"),PU=xP;Qk.protocol=4;Qk.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
Qk.CONNECT=0;Qk.DISCONNECT=1;Qk.EVENT=2;Qk.ACK=3;Qk.ERROR=4;Qk.BINARY_EVENT=5;Qk.BINARY_ACK=6;Qk.Encoder=C7;Qk.Decoder=DM;var lla=Qk.ERROR+'"encode error"';C7.prototype.encode=function(b,d){OU("encoding packet %j",b);Qk.BINARY_EVENT===b.type||Qk.BINARY_ACK===b.type?mla(b,d):(b=D7(b),d([b]))};yC(DM.prototype);DM.prototype.add=function(b){if("string"===typeof b){a:{var d=0,k={type:Number(b.charAt(0))};if(null==Qk.types[k.type])b={type:Qk.ERROR,data:"parser error: unknown packet type "+k.type};else{if(Qk.BINARY_EVENT===
k.type||Qk.BINARY_ACK===k.type){for(var a=d+1;"-"!==b.charAt(++d)&&d!=b.length;);a=b.substring(a,d);if(a!=Number(a)||"-"!==b.charAt(d))throw Error("Illegal attachments");k.attachments=Number(a)}if("/"===b.charAt(d+1)){for(a=d+1;++d;){var f=b.charAt(d);if(","===f)break;if(d===b.length)break}k.nsp=b.substring(a,d)}else k.nsp="/";a=b.charAt(d+1);if(""!==a&&Number(a)==a){for(a=d+1;++d;){f=b.charAt(d);if(null==f||Number(f)!=f){--d;break}if(d===b.length)break}k.id=Number(b.substring(a,d+1))}if(b.charAt(++d)){d=
b.substr(d);try{var l=JSON.parse(d)}catch(r){l=!1}if(!1===l||k.type!==Qk.ERROR&&!mY(l)){b={type:Qk.ERROR,data:"parser error: invalid payload"};break a}else k.data=l}OU("decoded %s as %j",b,k);b=k}}Qk.BINARY_EVENT===b.type||Qk.BINARY_ACK===b.type?((this||lo).reconstructor=new QU(b),0===(this||lo).reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b)}else if(Oba(b)||b.base64)if((this||lo).reconstructor){if(b=(this||lo).reconstructor.takeBinaryData(b))(this||lo).reconstructor=
null,this.emit("decoded",b)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+b);};DM.prototype.destroy=function(){(this||lo).reconstructor&&(this||lo).reconstructor.finishedReconstruction()};QU.prototype.takeBinaryData=function(b){(this||lo).buffers.push(b);return(this||lo).buffers.length===(this||lo).reconPack.attachments?(b=PU.reconstructPacket((this||lo).reconPack,(this||lo).buffers),this.finishedReconstruction(),b):null};QU.prototype.finishedReconstruction=
function(){(this||lo).reconPack=null;(this||lo).buffers=[]};var oY={};try{oY="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){oY=!1}var nva=oY,ova={},pY=ova="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),pva={},qY=pva=function(b){var d=b.xdomain,k=b.xscheme;b=b.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!d||nva))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!k&&b)return new XDomainRequest}catch(a){}if(!d)try{return new (pY[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}},
qva={},RU=ei.Buffer,nla=mY,Rba=Object.prototype.toString,ola="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Rba.call(Blob),pla="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Rba.call(File),rY=qva=EM,rva={},yP=rva=function(b,d,k){var a=b.byteLength;d=d||0;k=k||a;if(b.slice)return b.slice(d,k);0>d&&(d+=a);0>k&&(k+=a);k>a&&(k=a);if(d>=a||d>=k||0===a)return new ArrayBuffer(0);b=new Uint8Array(b);a=new Uint8Array(k-d);for(var f=0;d<
k;d++,f++)a[f]=b[d];return a.buffer},sva={},tva=sva=function(b,d,k){function a(l,r){if(0>=a.count)throw Error("after called too many times");--a.count;l?(f=!0,d(l),d=k):0!==a.count||f||d(null,r)}var f=!1;k=k||qla;a.count=b;return 0===b?d():a},sY={};(function(b){sY.encode=function(d){d=new Uint8Array(d);var k,a=d.length,f="";for(k=0;k<a;k+=3)f+=b[d[k]>>2],f+=b[(d[k]&3)<<4|d[k+1]>>4],f+=b[(d[k+1]&15)<<2|d[k+2]>>6],f+=b[d[k+2]&63];2===a%3?f=f.substring(0,f.length-1)+"=":1===a%3&&(f=f.substring(0,f.length-
2)+"==");return f};sY.decode=function(d){var k=.75*d.length,a=d.length,f=0;"="===d[d.length-1]&&(k--,"="===d[d.length-2]&&k--);var l=new ArrayBuffer(k),r=new Uint8Array(l);for(k=0;k<a;k+=4){var v=b.indexOf(d[k]);var y=b.indexOf(d[k+1]);var A=b.indexOf(d[k+2]);var E=b.indexOf(d[k+3]);r[f++]=v<<2|y>>4;r[f++]=(y&15)<<4|A>>2;r[f++]=(A&3)<<6|E&63}return l}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var Sba={},vE="undefined"!==typeof vE?vE:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var tY=2===(new Blob(["hi"])).size}catch(b){tY=!1}var zP;if(zP=tY)try{zP=2===(new Blob([new Uint8Array([1,2])])).size}catch(b){zP=!1}var uva=zP,vva=vE&&vE.prototype.append&&vE.prototype.getBlob;"undefined"!==typeof Blob&&(F7.prototype=Blob.prototype,G7.prototype=Blob.prototype);Sba=tY?uva?Blob:G7:vva?F7:void 0;var rr=Sba,wva={},xva=wva=Object.keys||function(b){var d=[],k=Object.prototype.hasOwnProperty,
a;for(a in b)k.call(b,a)&&d.push(a);return d},Tba={},aw=String.fromCharCode,GM,FM,sz;Tba={version:"2.1.2",encode:function(b,d){d=d||{};d=!1!==d.strict;b=H7(b);for(var k=b.length,a=-1,f,l="";++a<k;){f=b[a];var r=d;if(0==(f&4294967168))f=aw(f);else{var v="";0==(f&4294965248)?v=aw(f>>6&31|192):0==(f&4294901760)?(I7(f,r)||(f=65533),v=aw(f>>12&15|224),v+=aw(f>>6&63|128)):0==(f&4292870144)&&(v=aw(f>>18&7|240),v+=aw(f>>12&63|128),v+=aw(f>>6&63|128));f=v+=aw(f&63|128)}l+=f}return l},decode:function(b,d){d=
d||{};d=!1!==d.strict;GM=H7(b);FM=GM.length;sz=0;b=[];for(var k;!1!==(k=rla(d));)b.push(k);d=b.length;k=-1;for(var a,f="";++k<d;)a=b[k],65535<a&&(a-=65536,f+=aw(a>>>10&1023|55296),a=56320|a&1023),f+=aw(a);return f}};var Qj={},tla=tva,Uba=Tba,uY;"undefined"!==typeof ArrayBuffer&&(uY=sY);var yva="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),zva="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),Vba=yva||zva;Qj.protocol=3;var AP=Qj.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},NI=xva(AP),Vt={type:"error",data:"parser error"};Qj.encodePacket=function(b,d,k,a){"function"===typeof d&&(a=d,d=!1);"function"===typeof k&&(a=k,k=null);var f=void 0===b.data?void 0:b.data.buffer||b.data;if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer){if(d){k=b.data;d=new Uint8Array(k);k=new Uint8Array(1+k.byteLength);k[0]=AP[b.type];for(b=0;b<d.length;b++)k[b+1]=d[b];b=a(k.buffer)}else b=Qj.encodeBase64Packet(b,a);return b}if("undefined"!==typeof rr&&
f instanceof rr)return d?Vba?b=sla(b,d,a):(d=new Uint8Array(1),d[0]=AP[b.type],b=new rr([d.buffer,b.data]),b=a(b)):b=Qj.encodeBase64Packet(b,a),b;if(f&&f.base64)return a("b"+Qj.packets[b.type]+b.data.data);d=AP[b.type];void 0!==b.data&&(d+=k?Uba.encode(String(b.data),{strict:!1}):String(b.data));return a(""+d)};Qj.encodeBase64Packet=function(b,d){var k="b"+Qj.packets[b.type];if("undefined"!==typeof rr&&b.data instanceof rr){var a=new FileReader;a.onload=function(){var r=a.result.split(",")[1];d(k+
r)};return a.readAsDataURL(b.data)}try{var f=String.fromCharCode.apply(null,new Uint8Array(b.data))}catch(r){b=new Uint8Array(b.data);f=Array(b.length);for(var l=0;l<b.length;l++)f[l]=b[l];f=String.fromCharCode.apply(null,f)}k+=btoa(f);return d(k)};Qj.decodePacket=function(b,d,k){if(void 0===b)return Vt;if("string"===typeof b){if("b"===b.charAt(0))return Qj.decodeBase64Packet(b.substr(1),d);if(k){a:{d=b;try{d=Uba.decode(d,{strict:!1})}catch(a){b=!1;break a}b=d}if(!1===b)return Vt}k=b.charAt(0);return Number(k)==
k&&NI[k]?1<b.length?{type:NI[k],data:b.substring(1)}:{type:NI[k]}:Vt}k=(new Uint8Array(b))[0];b=yP(b,1);rr&&"blob"===d&&(b=new rr([b]));return{type:NI[k],data:b}};Qj.decodeBase64Packet=function(b,d){var k=NI[b.charAt(0)];if(!uY)return{type:k,data:{base64:!0,data:b.substr(1)}};b=uY.decode(b.substr(1));"blob"===d&&rr&&(b=new rr([b]));return{type:k,data:b}};Qj.encodePayload=function(b,d,k){"function"===typeof d&&(k=d,d=null);var a=rY(b);if(d&&a)return rr&&!Vba?Qj.encodePayloadAsBlob(b,k):Qj.encodePayloadAsArrayBuffer(b,
k);if(!b.length)return k("0:");SU(b,function(f,l){Qj.encodePacket(f,a?d:!1,!1,function(r){l(null,r.length+":"+r)})},function(f,l){return k(l.join(""))})};Qj.decodePayload=function(b,d,k){if("string"!==typeof b)return Qj.decodePayloadAsBinary(b,d,k);"function"===typeof d&&(k=d,d=null);if(""===b)return k(Vt,0,1);var a="";for(var f,l,r=0,v=b.length;r<v;r++)if(l=b.charAt(r),":"!==l)a+=l;else{if(""===a||a!=(f=Number(a)))return k(Vt,0,1);l=b.substr(r+1,f);if(a!=l.length)return k(Vt,0,1);if(l.length){a=
Qj.decodePacket(l,d,!1);if(Vt.type===a.type&&Vt.data===a.data)return k(Vt,0,1);if(!1===k(a,r+f,v))return}r+=f;a=""}if(""!==a)return k(Vt,0,1)};Qj.encodePayloadAsArrayBuffer=function(b,d){if(!b.length)return d(new ArrayBuffer(0));SU(b,function(k,a){Qj.encodePacket(k,!0,!0,function(f){return a(null,f)})},function(k,a){k=a.reduce(function(r,v){v="string"===typeof v?v.length:v.byteLength;return r+v.toString().length+v+2},0);var f=new Uint8Array(k),l=0;a.forEach(function(r){var v="string"===typeof r,y=
r;if(v){y=new Uint8Array(r.length);for(var A=0;A<r.length;A++)y[A]=r.charCodeAt(A);y=y.buffer}v?f[l++]=0:f[l++]=1;r=y.byteLength.toString();for(A=0;A<r.length;A++)f[l++]=parseInt(r[A]);f[l++]=255;y=new Uint8Array(y);for(A=0;A<y.length;A++)f[l++]=y[A]});return d(f.buffer)})};Qj.encodePayloadAsBlob=function(b,d){SU(b,function(k,a){Qj.encodePacket(k,!0,!0,function(f){var l=new Uint8Array(1);l[0]=1;if("string"===typeof f){for(var r=new Uint8Array(f.length),v=0;v<f.length;v++)r[v]=f.charCodeAt(v);f=r.buffer;
l[0]=0}r=(f instanceof ArrayBuffer?f.byteLength:f.size).toString();var y=new Uint8Array(r.length+1);for(v=0;v<r.length;v++)y[v]=parseInt(r[v]);y[r.length]=255;rr&&(f=new rr([l.buffer,y.buffer,f]),a(null,f))})},function(k,a){return d(new rr(a))})};Qj.decodePayloadAsBinary=function(b,d,k){"function"===typeof d&&(k=d,d=null);for(var a=[];0<b.byteLength;){for(var f=new Uint8Array(b),l=0===f[0],r="",v=1;255!==f[v];v++){if(310<r.length)return k(Vt,0,1);r+=f[v]}b=yP(b,2+r.length);r=parseInt(r);f=yP(b,0,
r);if(l)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(A){for(l=new Uint8Array(f),f="",v=0;v<l.length;v++)f+=String.fromCharCode(l[v])}a.push(f);b=yP(b,r)}var y=a.length;a.forEach(function(A,E){k(Qj.decodePacket(A,d,!0),E,y)})};for(var BP={encode:function(b){var d="",k;for(k in b)b.hasOwnProperty(k)&&(d.length&&(d+="&"),d+=encodeURIComponent(k)+"="+encodeURIComponent(b[k]));return d},decode:function(b){var d={};b=b.split("&");for(var k=0,a=b.length;k<a;k++){var f=b[k].split("=");d[decodeURIComponent(f[0])]=
decodeURIComponent(f[1])}return d}},Ava={},CP=Ava=function(b,d){var k=function(){};k.prototype=d.prototype;b.prototype=new k;b.prototype.constructor=b},Bva={},J7="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Wba={},L7=0,Xz=0,K7;64>Xz;Xz++)Wba[J7[Xz]]=Xz;UU.encode=TU;UU.decode=function(b){var d=0;for(Xz=0;Xz<b.length;Xz++)d=64*d+Wba[b.charAt(Xz)];return d};var Xba=Bva=UU,jj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Yba={},Cva=Qj;
Yba=Av;yC(Av.prototype);Av.prototype.onError=function(b,d){b=Error(b);b.type="TransportError";b.description=d;this.emit("error",b);return this||jj};Av.prototype.open=function(){if("closed"===(this||jj).readyState||""===(this||jj).readyState)(this||jj).readyState="opening",this.doOpen();return this||jj};Av.prototype.close=function(){if("opening"===(this||jj).readyState||"open"===(this||jj).readyState)this.doClose(),this.onClose();return this||jj};Av.prototype.send=function(b){if("open"===(this||jj).readyState)this.write(b);
else throw Error("Transport not open");};Av.prototype.onOpen=function(){(this||jj).readyState="open";(this||jj).writable=!0;this.emit("open")};Av.prototype.onData=function(b){b=Cva.decodePacket(b,(this||jj).socket.binaryType);this.onPacket(b)};Av.prototype.onPacket=function(b){this.emit("packet",b)};Av.prototype.onClose=function(){(this||jj).readyState="closed";this.emit("close")};var vY=Yba,Ij="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Zba={},M7=vY,$ba=Qj,Wt=
Jx("engine.io-client:polling");Zba=Bv;var ula=null!=(new qY({xdomain:!1})).responseType;CP(Bv,M7);Bv.prototype.name="polling";Bv.prototype.doOpen=function(){this.poll()};Bv.prototype.pause=function(b){function d(){Wt("paused");k.readyState="paused";b()}var k=this||Ij;(this||Ij).readyState="pausing";if((this||Ij).polling||!(this||Ij).writable){var a=0;(this||Ij).polling&&(Wt("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){Wt("pre-pause polling complete");--a||
d()}));(this||Ij).writable||(Wt("we are currently writing - waiting to pause"),a++,this.once("drain",function(){Wt("pre-pause writing complete");--a||d()}))}else d()};Bv.prototype.poll=function(){Wt("polling");(this||Ij).polling=!0;this.doPoll();this.emit("poll")};Bv.prototype.onData=function(b){var d=this||Ij;Wt("polling got data %s",b);$ba.decodePayload(b,(this||Ij).socket.binaryType,function(k,a,f){if("opening"===d.readyState)d.onOpen();if("close"===k.type)return d.onClose(),!1;d.onPacket(k)});
"closed"!==(this||Ij).readyState&&((this||Ij).polling=!1,this.emit("pollComplete"),"open"===(this||Ij).readyState?this.poll():Wt('ignoring poll - transport state "%s"',(this||Ij).readyState))};Bv.prototype.doClose=function(){function b(){Wt("writing close packet");d.write([{type:"close"}])}var d=this||Ij;"open"===(this||Ij).readyState?(Wt("transport open - closing"),b()):(Wt("transport not open - deferring close"),this.once("open",b))};Bv.prototype.write=function(b){var d=this||Ij;(this||Ij).writable=
!1;var k=function(){d.writable=!0;d.emit("drain")};$ba.encodePayload(b,(this||Ij).supportsBinary,function(a){d.doWrite(a,k)})};Bv.prototype.uri=function(){var b=(this||Ij).query||{},d=(this||Ij).secure?"https":"http",k="";!1!==(this||Ij).timestampRequests&&(b[(this||Ij).timestampParam]=Xba());(this||Ij).supportsBinary||b.sid||(b.b64=1);b=BP.encode(b);(this||Ij).port&&("https"===d&&443!==Number((this||Ij).port)||"http"===d&&80!==Number((this||Ij).port))&&(k=":"+(this||Ij).port);b.length&&(b="?"+b);
var a=-1!==(this||Ij).hostname.indexOf(":");return d+"://"+(a?"["+(this||Ij).hostname+"]":(this||Ij).hostname)+k+(this||Ij).path+b};var aca=Zba,ff="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wY={},O7=aca,xY=Jx("engine.io-client:polling-xhr");wY=xE;wY.Request=fn;CP(xE,O7);xE.prototype.supportsBinary=!0;xE.prototype.request=function(b){b=b||{};b.uri=this.uri();b.xd=(this||ff).xd;b.xs=(this||ff).xs;b.agent=(this||ff).agent||!1;b.supportsBinary=(this||ff).supportsBinary;
b.enablesXDR=(this||ff).enablesXDR;b.withCredentials=(this||ff).withCredentials;b.pfx=(this||ff).pfx;b.key=(this||ff).key;b.passphrase=(this||ff).passphrase;b.cert=(this||ff).cert;b.ca=(this||ff).ca;b.ciphers=(this||ff).ciphers;b.rejectUnauthorized=(this||ff).rejectUnauthorized;b.requestTimeout=(this||ff).requestTimeout;b.extraHeaders=(this||ff).extraHeaders;return new fn(b)};xE.prototype.doWrite=function(b,d){b=this.request({method:"POST",data:b,isBinary:"string"!==typeof b&&void 0!==b});var k=this||
ff;b.on("success",d);b.on("error",function(a){k.onError("xhr post error",a)});(this||ff).sendXhr=b};xE.prototype.doPoll=function(){xY("xhr poll");var b=this.request(),d=this||ff;b.on("data",function(k){d.onData(k)});b.on("error",function(k){d.onError("xhr poll error",k)});(this||ff).pollXhr=b};yC(fn.prototype);fn.prototype.create=function(){var b={agent:(this||ff).agent,xdomain:(this||ff).xd,xscheme:(this||ff).xs,enablesXDR:(this||ff).enablesXDR};b.pfx=(this||ff).pfx;b.key=(this||ff).key;b.passphrase=
(this||ff).passphrase;b.cert=(this||ff).cert;b.ca=(this||ff).ca;b.ciphers=(this||ff).ciphers;b.rejectUnauthorized=(this||ff).rejectUnauthorized;var d=(this||ff).xhr=new qY(b),k=this||ff;try{xY("xhr open %s: %s",(this||ff).method,(this||ff).uri);d.open((this||ff).method,(this||ff).uri,(this||ff).async);try{if((this||ff).extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(var a in(this||ff).extraHeaders)(this||ff).extraHeaders.hasOwnProperty(a)&&d.setRequestHeader(a,(this||ff).extraHeaders[a])}}catch(f){}if("POST"===
(this||ff).method)try{(this||ff).isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(f){}try{d.setRequestHeader("Accept","*/*")}catch(f){}"withCredentials"in d&&(d.withCredentials=(this||ff).withCredentials);(this||ff).requestTimeout&&(d.timeout=(this||ff).requestTimeout);this.hasXDR()?(d.onload=function(){k.onLoad()},d.onerror=function(){k.onError(d.responseText)}):d.onreadystatechange=function(){if(2===d.readyState)try{var f=
d.getResponseHeader("Content-Type");if(k.supportsBinary&&"application/octet-stream"===f||"application/octet-stream; charset=UTF-8"===f)d.responseType="arraybuffer"}catch(l){}if(4===d.readyState)if(200===d.status||1223===d.status)k.onLoad();else setTimeout(function(){k.onError("number"===typeof d.status?d.status:0)},0)};xY("xhr data %s",(this||ff).data);d.send((this||ff).data)}catch(f){setTimeout(function(){k.onError(f)},0);return}"undefined"!==typeof document&&((this||ff).index=fn.requestsCount++,
fn.requests[(this||ff).index]=this||ff)};fn.prototype.onSuccess=function(){this.emit("success");this.cleanup()};fn.prototype.onData=function(b){this.emit("data",b);this.onSuccess()};fn.prototype.onError=function(b){this.emit("error",b);this.cleanup(!0)};fn.prototype.cleanup=function(b){if("undefined"!==typeof(this||ff).xhr&&null!==(this||ff).xhr){this.hasXDR()?(this||ff).xhr.onload=(this||ff).xhr.onerror=N7:(this||ff).xhr.onreadystatechange=N7;if(b)try{(this||ff).xhr.abort()}catch(d){}"undefined"!==
typeof document&&delete fn.requests[(this||ff).index];(this||ff).xhr=null}};fn.prototype.onLoad=function(){try{try{var b=(this||ff).xhr.getResponseHeader("Content-Type")}catch(k){}var d="application/octet-stream"===b||"application/octet-stream; charset=UTF-8"===b?(this||ff).xhr.response||(this||ff).xhr.responseText:(this||ff).xhr.responseText}catch(k){this.onError(k)}if(null!=d)this.onData(d)};fn.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||ff).xs&&(this||ff).enablesXDR};
fn.prototype.abort=function(){this.cleanup()};fn.requestsCount=0;fn.requests={};"undefined"!==typeof document&&("function"===typeof attachEvent?attachEvent("onunload",P7):"function"===typeof addEventListener&&addEventListener("onpagehide"in pY?"pagehide":"unload",P7,!1));var Dva=wY,Eva={},Fva=[].indexOf,yY=Eva=function(b,d){if(Fva)return b.indexOf(d);for(var k=0;k<b.length;++k)if(b[k]===d)return k;return-1},pj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bca={},
VU=aca,Q7=pY;bca=yE;var Gva=/\n/g,Hva=/\\n/g,HM;CP(yE,VU);yE.prototype.supportsBinary=!1;yE.prototype.doClose=function(){(this||pj).script&&((this||pj).script.parentNode.removeChild((this||pj).script),(this||pj).script=null);(this||pj).form&&((this||pj).form.parentNode.removeChild((this||pj).form),(this||pj).form=null,(this||pj).iframe=null);VU.prototype.doClose.call(this||pj)};yE.prototype.doPoll=function(){var b=this||pj,d=document.createElement("script");(this||pj).script&&((this||pj).script.parentNode.removeChild((this||
pj).script),(this||pj).script=null);d.async=!0;d.src=this.uri();d.onerror=function(a){b.onError("jsonp poll error",a)};var k=document.getElementsByTagName("script")[0];k?k.parentNode.insertBefore(d,k):(document.head||document.body).appendChild(d);(this||pj).script=d;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};yE.prototype.doWrite=function(b,d){function k(){a();
d()}function a(){if(f.iframe)try{f.form.removeChild(f.iframe)}catch(A){f.onError("jsonp polling iframe removal error",A)}try{y=document.createElement('<iframe src="javascript:0" name="'+f.iframeId+'">')}catch(A){y=document.createElement("iframe"),y.name=f.iframeId,y.src="javascript:0"}y.id=f.iframeId;f.form.appendChild(y);f.iframe=y}var f=this||pj;if(!(this||pj).form){var l=document.createElement("form"),r=document.createElement("textarea"),v=(this||pj).iframeId="eio_iframe_"+(this||pj).index,y;l.className=
"socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=v;l.method="POST";l.setAttribute("accept-charset","utf-8");r.name="d";l.appendChild(r);document.body.appendChild(l);(this||pj).form=l;(this||pj).area=r}(this||pj).form.action=this.uri();a();b=b.replace(Hva,"\\\n");(this||pj).area.value=b.replace(Gva,"\\n");try{(this||pj).form.submit()}catch(A){}(this||pj).iframe.attachEvent?(this||pj).iframe.onreadystatechange=function(){"complete"===f.iframe.readyState&&
k()}:(this||pj).iframe.onload=k};var Iva=bca,Jva=Object.freeze({}),Rg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cca={},Kva=ei.Buffer,WU=vY,Lva=Qj,Mva=Jx("engine.io-client:websocket"),IM;"undefined"!==typeof WebSocket?IM=WebSocket:"undefined"!==typeof self&&(IM=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var R7=Jva}catch(b){}var zE=IM||R7;cca=ns;CP(ns,WU);ns.prototype.name="websocket";ns.prototype.supportsBinary=!0;ns.prototype.doOpen=
function(){if(this.check()){var b=this.uri(),d=(this||Rg).protocols,k={};(this||Rg).isReactNative||(k.agent=(this||Rg).agent,k.perMessageDeflate=(this||Rg).perMessageDeflate,k.pfx=(this||Rg).pfx,k.key=(this||Rg).key,k.passphrase=(this||Rg).passphrase,k.cert=(this||Rg).cert,k.ca=(this||Rg).ca,k.ciphers=(this||Rg).ciphers,k.rejectUnauthorized=(this||Rg).rejectUnauthorized);(this||Rg).extraHeaders&&(k.headers=(this||Rg).extraHeaders);(this||Rg).localAddress&&(k.localAddress=(this||Rg).localAddress);
try{(this||Rg).ws=(this||Rg).usingBrowserWebSocket&&!(this||Rg).isReactNative?d?new zE(b,d):new zE(b):new zE(b,d,k)}catch(a){return this.emit("error",a)}void 0===(this||Rg).ws.binaryType&&((this||Rg).supportsBinary=!1);(this||Rg).ws.supports&&(this||Rg).ws.supports.binary?((this||Rg).supportsBinary=!0,(this||Rg).ws.binaryType="nodebuffer"):(this||Rg).ws.binaryType="arraybuffer";this.addEventListeners()}};ns.prototype.addEventListeners=function(){var b=this||Rg;(this||Rg).ws.onopen=function(){b.onOpen()};
(this||Rg).ws.onclose=function(){b.onClose()};(this||Rg).ws.onmessage=function(d){b.onData(d.data)};(this||Rg).ws.onerror=function(d){b.onError("websocket error",d)}};ns.prototype.write=function(b){function d(){k.emit("flush");setTimeout(function(){k.writable=!0;k.emit("drain")},0)}var k=this||Rg;(this||Rg).writable=!1;for(var a=b.length,f=0,l=a;f<l;f++)(function(r){Lva.encodePacket(r,k.supportsBinary,function(v){if(!k.usingBrowserWebSocket){var y={};r.options&&(y.compress=r.options.compress);k.perMessageDeflate&&
("string"===typeof v?Kva.byteLength(v):v.length)<k.perMessageDeflate.threshold&&(y.compress=!1)}try{k.usingBrowserWebSocket?k.ws.send(v):k.ws.send(v,y)}catch(A){Mva("websocket closed before onclose event")}--a||d()})})(b[f])};ns.prototype.onClose=function(){WU.prototype.onClose.call(this||Rg)};ns.prototype.doClose=function(){"undefined"!==typeof(this||Rg).ws&&(this||Rg).ws.close()};ns.prototype.uri=function(){var b=(this||Rg).query||{},d=(this||Rg).secure?"wss":"ws",k="";(this||Rg).port&&("wss"===
d&&443!==Number((this||Rg).port)||"ws"===d&&80!==Number((this||Rg).port))&&(k=":"+(this||Rg).port);(this||Rg).timestampRequests&&(b[(this||Rg).timestampParam]=Xba());(this||Rg).supportsBinary||(b.b64=1);b=BP.encode(b);b.length&&(b="?"+b);var a=-1!==(this||Rg).hostname.indexOf(":");return d+"://"+(a?"["+(this||Rg).hostname+"]":(this||Rg).hostname)+k+(this||Rg).path+b};ns.prototype.check=function(){return!!zE&&!("__initialize"in zE&&(this||Rg).name===ns.prototype.name)};var DP={},Nva=cca;DP.polling=
function(b){var d=!1,k=!1,a=!1!==b.jsonp;"undefined"!==typeof location&&(k="https:"===location.protocol,(d=location.port)||(d=k?443:80),d=b.hostname!==location.hostname||d!==b.port,k=b.secure!==k);b.xdomain=d;b.xscheme=k;if("open"in new qY(b)&&!b.forceJSONP)return new Dva(b);if(!a)throw Error("JSONP disabled");return new Iva(b)};DP.websocket=Nva;var Pd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dca={},Im=Jx("engine.io-client:socket"),eca=Qj,S7=Lba,wla=BP;dca=
qj;qj.priorWebsocketSuccess=!1;yC(qj.prototype);qj.protocol=eca.protocol;qj.Socket=qj;qj.Transport=vY;qj.transports=DP;qj.parser=Qj;qj.prototype.createTransport=function(b){Im('creating transport "%s"',b);var d=(this||Pd).query,k={},a;for(a in d)d.hasOwnProperty(a)&&(k[a]=d[a]);k.EIO=eca.protocol;k.transport=b;d=(this||Pd).transportOptions[b]||{};(this||Pd).id&&(k.sid=(this||Pd).id);return new DP[b]({query:k,socket:this||Pd,agent:d.agent||(this||Pd).agent,hostname:d.hostname||(this||Pd).hostname,
port:d.port||(this||Pd).port,secure:d.secure||(this||Pd).secure,path:d.path||(this||Pd).path,forceJSONP:d.forceJSONP||(this||Pd).forceJSONP,jsonp:d.jsonp||(this||Pd).jsonp,forceBase64:d.forceBase64||(this||Pd).forceBase64,enablesXDR:d.enablesXDR||(this||Pd).enablesXDR,withCredentials:d.withCredentials||(this||Pd).withCredentials,timestampRequests:d.timestampRequests||(this||Pd).timestampRequests,timestampParam:d.timestampParam||(this||Pd).timestampParam,policyPort:d.policyPort||(this||Pd).policyPort,
pfx:d.pfx||(this||Pd).pfx,key:d.key||(this||Pd).key,passphrase:d.passphrase||(this||Pd).passphrase,cert:d.cert||(this||Pd).cert,ca:d.ca||(this||Pd).ca,ciphers:d.ciphers||(this||Pd).ciphers,rejectUnauthorized:d.rejectUnauthorized||(this||Pd).rejectUnauthorized,perMessageDeflate:d.perMessageDeflate||(this||Pd).perMessageDeflate,extraHeaders:d.extraHeaders||(this||Pd).extraHeaders,forceNode:d.forceNode||(this||Pd).forceNode,localAddress:d.localAddress||(this||Pd).localAddress,requestTimeout:d.requestTimeout||
(this||Pd).requestTimeout,protocols:d.protocols||void 0,isReactNative:(this||Pd).isReactNative})};qj.prototype.open=function(){if((this||Pd).rememberUpgrade&&qj.priorWebsocketSuccess&&-1!==(this||Pd).transports.indexOf("websocket"))var b="websocket";else{if(0===(this||Pd).transports.length){var d=this||Pd;setTimeout(function(){d.emit("error","No transports available")},0);return}b=(this||Pd).transports[0]}(this||Pd).readyState="opening";try{b=this.createTransport(b)}catch(k){(this||Pd).transports.shift();
this.open();return}b.open();this.setTransport(b)};qj.prototype.setTransport=function(b){Im("setting transport %s",b.name);var d=this||Pd;(this||Pd).transport&&(Im("clearing existing transport %s",(this||Pd).transport.name),(this||Pd).transport.removeAllListeners());(this||Pd).transport=b;b.on("drain",function(){d.onDrain()}).on("packet",function(k){d.onPacket(k)}).on("error",function(k){d.onError(k)}).on("close",function(){d.onClose("transport close")})};qj.prototype.probe=function(b){function d(){if(E.onlyBinaryUpgrades){var F=
!(this||Pd).supportsBinary&&E.transport.supportsBinary;A=A||F}A||(Im('probe transport "%s" opened',b),y.send([{type:"ping",data:"probe"}]),y.once("packet",function(H){A||("pong"===H.type&&"probe"===H.data?(Im('probe transport "%s" pong',b),E.upgrading=!0,E.emit("upgrading",y),y&&(qj.priorWebsocketSuccess="websocket"===y.name,Im('pausing current transport "%s"',E.transport.name),E.transport.pause(function(){A||"closed"===E.readyState||(Im("changing transport and sending upgrade packet"),v(),E.setTransport(y),
y.send([{type:"upgrade"}]),E.emit("upgrade",y),y=null,E.upgrading=!1,E.flush())}))):(Im('probe transport "%s" failed',b),H=Error("probe error"),H.transport=y.name,E.emit("upgradeError",H)))}))}function k(){A||(A=!0,v(),y.close(),y=null)}function a(F){var H=Error("probe error: "+F);H.transport=y.name;k();Im('probe transport "%s" failed because of error: %s',b,F);E.emit("upgradeError",H)}function f(){a("transport closed")}function l(){a("socket closed")}function r(F){y&&F.name!==y.name&&(Im('"%s" works - aborting "%s"',
F.name,y.name),k())}function v(){y.removeListener("open",d);y.removeListener("error",a);y.removeListener("close",f);E.removeListener("close",l);E.removeListener("upgrading",r)}Im('probing transport "%s"',b);var y=this.createTransport(b,{probe:1}),A=!1,E=this||Pd;qj.priorWebsocketSuccess=!1;y.once("open",d);y.once("error",a);y.once("close",f);this.once("close",l);this.once("upgrading",r);y.open()};qj.prototype.onOpen=function(){Im("socket open");(this||Pd).readyState="open";qj.priorWebsocketSuccess=
"websocket"===(this||Pd).transport.name;this.emit("open");this.flush();if("open"===(this||Pd).readyState&&(this||Pd).upgrade&&(this||Pd).transport.pause){Im("starting upgrade probes");for(var b=0,d=(this||Pd).upgrades.length;b<d;b++)this.probe((this||Pd).upgrades[b])}};qj.prototype.onPacket=function(b){if("opening"===(this||Pd).readyState||"open"===(this||Pd).readyState||"closing"===(this||Pd).readyState)switch(Im('socket receive: type "%s", data "%s"',b.type,b.data),this.emit("packet",b),this.emit("heartbeat"),
b.type){case "open":this.onHandshake(JSON.parse(b.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var d=Error("server error");d.code=b.data;this.onError(d);break;case "message":this.emit("data",b.data),this.emit("message",b.data)}else Im('packet received with socket readyState "%s"',(this||Pd).readyState)};qj.prototype.onHandshake=function(b){this.emit("handshake",b);(this||Pd).id=b.sid;(this||Pd).transport.query.sid=b.sid;(this||Pd).upgrades=this.filterUpgrades(b.upgrades);
(this||Pd).pingInterval=b.pingInterval;(this||Pd).pingTimeout=b.pingTimeout;this.onOpen();"closed"!==(this||Pd).readyState&&(this.setPing(),this.removeListener("heartbeat",(this||Pd).onHeartbeat),this.on("heartbeat",(this||Pd).onHeartbeat))};qj.prototype.onHeartbeat=function(b){clearTimeout((this||Pd).pingTimeoutTimer);var d=this||Pd;d.pingTimeoutTimer=setTimeout(function(){if("closed"!==d.readyState)d.onClose("ping timeout")},b||d.pingInterval+d.pingTimeout)};qj.prototype.setPing=function(){var b=
this||Pd;clearTimeout(b.pingIntervalTimer);b.pingIntervalTimer=setTimeout(function(){Im("writing ping packet - expecting pong within %sms",b.pingTimeout);b.ping();b.onHeartbeat(b.pingTimeout)},b.pingInterval)};qj.prototype.ping=function(){var b=this||Pd;this.sendPacket("ping",function(){b.emit("ping")})};qj.prototype.onDrain=function(){(this||Pd).writeBuffer.splice(0,(this||Pd).prevBufferLen);(this||Pd).prevBufferLen=0;0===(this||Pd).writeBuffer.length?this.emit("drain"):this.flush()};qj.prototype.flush=
function(){"closed"!==(this||Pd).readyState&&(this||Pd).transport.writable&&!(this||Pd).upgrading&&(this||Pd).writeBuffer.length&&(Im("flushing %d packets in socket",(this||Pd).writeBuffer.length),(this||Pd).transport.send((this||Pd).writeBuffer),(this||Pd).prevBufferLen=(this||Pd).writeBuffer.length,this.emit("flush"))};qj.prototype.write=qj.prototype.send=function(b,d,k){this.sendPacket("message",b,d,k);return this||Pd};qj.prototype.sendPacket=function(b,d,k,a){"function"===typeof d&&(a=d,d=void 0);
"function"===typeof k&&(a=k,k=null);if("closing"!==(this||Pd).readyState&&"closed"!==(this||Pd).readyState){k=k||{};k.compress=!1!==k.compress;b={type:b,data:d,options:k};this.emit("packetCreate",b);(this||Pd).writeBuffer.push(b);if(a)this.once("flush",a);this.flush()}};qj.prototype.close=function(){function b(){a.onClose("forced close");Im("socket closing - telling transport to close");a.transport.close()}function d(){a.removeListener("upgrade",d);a.removeListener("upgradeError",d);b()}function k(){a.once("upgrade",
d);a.once("upgradeError",d)}if("opening"===(this||Pd).readyState||"open"===(this||Pd).readyState){(this||Pd).readyState="closing";var a=this||Pd;if((this||Pd).writeBuffer.length)this.once("drain",function(){(this||Pd).upgrading?k():b()});else(this||Pd).upgrading?k():b()}return this||Pd};qj.prototype.onError=function(b){Im("socket error %j",b);qj.priorWebsocketSuccess=!1;this.emit("error",b);this.onClose("transport error",b)};qj.prototype.onClose=function(b,d){if("opening"===(this||Pd).readyState||
"open"===(this||Pd).readyState||"closing"===(this||Pd).readyState){Im('socket close with reason: "%s"',b);var k=this||Pd;clearTimeout((this||Pd).pingIntervalTimer);clearTimeout((this||Pd).pingTimeoutTimer);(this||Pd).transport.removeAllListeners("close");(this||Pd).transport.close();(this||Pd).transport.removeAllListeners();(this||Pd).readyState="closed";(this||Pd).id=null;this.emit("close",b,d);k.writeBuffer=[];k.prevBufferLen=0}};qj.prototype.filterUpgrades=function(b){for(var d=[],k=0,a=b.length;k<
a;k++)~yY((this||Pd).transports,b[k])&&d.push(b[k]);return d};var zY={};zY=dca;zY.parser=Qj;var Ova=zY,Pva={},AY=Pva=function(b,d){for(var k=[],a=(d=d||0)||0;a<b.length;a++)k[a-d]=b[a];return k},Qva={},fca=[].slice,Kx=Qva=function(b,d){"string"==typeof d&&(d=b[d]);if("function"!=typeof d)throw Error("bind() requires a function");var k=fca.call(arguments,2);return function(){return d.apply(b,k.concat(fca.call(arguments)))}},Rva={},Xt=Rva=function(b,d,k){b.on(d,k);return{destroy:function(){b.removeListener(d,
k)}}},rf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,BY={},Ap=Qk,Yt=Jx("socket.io-client:socket");BY=BY=Tl;var Sva={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},CY=yC.prototype.emit;yC(Tl.prototype);Tl.prototype.subEvents=function(){if(!(this||rf).subs){var b=(this||rf).io;(this||rf).subs=[Xt(b,"open",Kx(this||rf,"onopen")),Xt(b,"packet",
Kx(this||rf,"onpacket")),Xt(b,"close",Kx(this||rf,"onclose"))]}};Tl.prototype.open=Tl.prototype.connect=function(){if((this||rf).connected)return this||rf;this.subEvents();(this||rf).io.reconnecting||(this||rf).io.open();if("open"===(this||rf).io.readyState)this.onopen();this.emit("connecting");return this||rf};Tl.prototype.send=function(){var b=AY(arguments);b.unshift("message");(this||rf).emit.apply(this||rf,b);return this||rf};Tl.prototype.emit=function(b){if(Sva.hasOwnProperty(b))return CY.apply(this||
rf,arguments),this||rf;var d=AY(arguments),k={type:(void 0!==(this||rf).flags.binary?(this||rf).flags.binary:rY(d))?Ap.BINARY_EVENT:Ap.EVENT,data:d,options:{}};k.options.compress=!(this||rf).flags||!1!==(this||rf).flags.compress;"function"===typeof d[d.length-1]&&(Yt("emitting packet with ack id %d",(this||rf).ids),(this||rf).acks[(this||rf).ids]=d.pop(),k.id=(this||rf).ids++);(this||rf).connected?this.packet(k):(this||rf).sendBuffer.push(k);(this||rf).flags={};return this||rf};Tl.prototype.packet=
function(b){b.nsp=(this||rf).nsp;(this||rf).io.packet(b)};Tl.prototype.onopen=function(){Yt("transport is open - connecting");if("/"!==(this||rf).nsp)if((this||rf).query){var b="object"===typeof(this||rf).query?BP.encode((this||rf).query):(this||rf).query;Yt("sending connect packet with query %s",b);this.packet({type:Ap.CONNECT,query:b})}else this.packet({type:Ap.CONNECT})};Tl.prototype.onclose=function(b){Yt("close (%s)",b);(this||rf).connected=!1;(this||rf).disconnected=!0;delete (this||rf).id;
this.emit("disconnect",b)};Tl.prototype.onpacket=function(b){var d=b.type===Ap.ERROR&&"/"===b.nsp;if(b.nsp===(this||rf).nsp||d)switch(b.type){case Ap.CONNECT:this.onconnect();break;case Ap.EVENT:this.onevent(b);break;case Ap.BINARY_EVENT:this.onevent(b);break;case Ap.ACK:this.onack(b);break;case Ap.BINARY_ACK:this.onack(b);break;case Ap.DISCONNECT:this.ondisconnect();break;case Ap.ERROR:this.emit("error",b.data)}};Tl.prototype.onevent=function(b){var d=b.data||[];Yt("emitting event %j",d);null!=b.id&&
(Yt("attaching ack callback to event"),d.push(this.ack(b.id)));(this||rf).connected?CY.apply(this||rf,d):(this||rf).receiveBuffer.push(d)};Tl.prototype.ack=function(b){var d=this||rf,k=!1;return function(){if(!k){k=!0;var a=AY(arguments);Yt("sending ack %j",a);d.packet({type:rY(a)?Ap.BINARY_ACK:Ap.ACK,id:b,data:a})}}};Tl.prototype.onack=function(b){var d=(this||rf).acks[b.id];"function"===typeof d?(Yt("calling ack %s with %j",b.id,b.data),d.apply(this||rf,b.data),delete (this||rf).acks[b.id]):Yt("bad ack %s",
b.id)};Tl.prototype.onconnect=function(){(this||rf).connected=!0;(this||rf).disconnected=!1;this.emit("connect");this.emitBuffered()};Tl.prototype.emitBuffered=function(){var b;for(b=0;b<(this||rf).receiveBuffer.length;b++)CY.apply(this||rf,(this||rf).receiveBuffer[b]);(this||rf).receiveBuffer=[];for(b=0;b<(this||rf).sendBuffer.length;b++)this.packet((this||rf).sendBuffer[b]);(this||rf).sendBuffer=[]};Tl.prototype.ondisconnect=function(){Yt("server disconnect (%s)",(this||rf).nsp);this.destroy();
this.onclose("io server disconnect")};Tl.prototype.destroy=function(){if((this||rf).subs){for(var b=0;b<(this||rf).subs.length;b++)(this||rf).subs[b].destroy();(this||rf).subs=null}(this||rf).io.destroy(this||rf)};Tl.prototype.close=Tl.prototype.disconnect=function(){(this||rf).connected&&(Yt("performing disconnect (%s)",(this||rf).nsp),this.packet({type:Ap.DISCONNECT}));this.destroy();if((this||rf).connected)this.onclose("io client disconnect");return this||rf};Tl.prototype.compress=function(b){(this||
rf).flags.compress=b;return this||rf};Tl.prototype.binary=function(b){(this||rf).flags.binary=b;return this||rf};var gca=BY,tp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hca={};hca=AE;AE.prototype.duration=function(){var b=(this||tp).ms*Math.pow((this||tp).factor,(this||tp).attempts++);if((this||tp).jitter){var d=Math.random(),k=Math.floor(d*(this||tp).jitter*b);b=0==(Math.floor(10*d)&1)?b-k:b+k}return Math.min(b,(this||tp).max)|0};AE.prototype.reset=function(){(this||
tp).attempts=0};AE.prototype.setMin=function(b){(this||tp).ms=b};AE.prototype.setMax=function(b){(this||tp).max=b};AE.prototype.setJitter=function(b){(this||tp).jitter=b};var Tva=hca,Uva={},ica=Jx("socket.io-client:url"),Vva=Uva=function(b,d){var k=b;d=d||"undefined"!==typeof location&&location;null==b&&(b=d.protocol+"//"+d.host);"string"===typeof b&&("/"===b.charAt(0)&&(b="/"===b.charAt(1)?d.protocol+b:d.host+b),/^(https?|wss?):\/\//.test(b)||(ica("protocol-less url %s",b),b="undefined"!==typeof d?
d.protocol+"//"+b:"https://"+b),ica("parse %s",b),k=Lba(b));k.port||(/^(http|ws)$/.test(k.protocol)?k.port="80":/^(http|ws)s$/.test(k.protocol)&&(k.port="443"));k.path=k.path||"/";b=-1!==k.host.indexOf(":")?"["+k.host+"]":k.host;k.id=k.protocol+"://"+b+":"+k.port;k.href=k.protocol+"://"+b+(d&&d.port===k.port?"":":"+k.port);return k},ie="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jca={},yla=Qk,Qo=Jx("socket.io-client:manager"),xla=Tva,kca=Object.prototype.hasOwnProperty;
jca=Rj;Rj.prototype.emitAll=function(){(this||ie).emit.apply(this||ie,arguments);for(var b in(this||ie).nsps)kca.call((this||ie).nsps,b)&&(this||ie).nsps[b].emit.apply((this||ie).nsps[b],arguments)};Rj.prototype.updateSocketIds=function(){for(var b in(this||ie).nsps)kca.call((this||ie).nsps,b)&&((this||ie).nsps[b].id=this.generateId(b))};Rj.prototype.generateId=function(b){return("/"===b?"":b+"#")+(this||ie).engine.id};yC(Rj.prototype);Rj.prototype.reconnection=function(b){if(!arguments.length)return(this||
ie)._reconnection;(this||ie)._reconnection=!!b;return this||ie};Rj.prototype.reconnectionAttempts=function(b){if(!arguments.length)return(this||ie)._reconnectionAttempts;(this||ie)._reconnectionAttempts=b;return this||ie};Rj.prototype.reconnectionDelay=function(b){if(!arguments.length)return(this||ie)._reconnectionDelay;(this||ie)._reconnectionDelay=b;(this||ie).backoff&&(this||ie).backoff.setMin(b);return this||ie};Rj.prototype.randomizationFactor=function(b){if(!arguments.length)return(this||ie)._randomizationFactor;
(this||ie)._randomizationFactor=b;(this||ie).backoff&&(this||ie).backoff.setJitter(b);return this||ie};Rj.prototype.reconnectionDelayMax=function(b){if(!arguments.length)return(this||ie)._reconnectionDelayMax;(this||ie)._reconnectionDelayMax=b;(this||ie).backoff&&(this||ie).backoff.setMax(b);return this||ie};Rj.prototype.timeout=function(b){if(!arguments.length)return(this||ie)._timeout;(this||ie)._timeout=b;return this||ie};Rj.prototype.maybeReconnectOnOpen=function(){!(this||ie).reconnecting&&(this||
ie)._reconnection&&0===(this||ie).backoff.attempts&&this.reconnect()};Rj.prototype.open=Rj.prototype.connect=function(b,d){Qo("readyState %s",(this||ie).readyState);if(~(this||ie).readyState.indexOf("open"))return this||ie;Qo("opening %s",(this||ie).uri);(this||ie).engine=Ova((this||ie).uri,(this||ie).opts);var k=(this||ie).engine,a=this||ie;(this||ie).readyState="opening";(this||ie).skipReconnect=!1;var f=Xt(k,"open",function(){a.onopen();b&&b()});d=Xt(k,"error",function(v){Qo("connect_error");a.cleanup();
a.readyState="closed";a.emitAll("connect_error",v);if(b){var y=Error("Connection error");y.data=v;b(y)}else a.maybeReconnectOnOpen()});if(!1!==(this||ie)._timeout){var l=(this||ie)._timeout;Qo("connect attempt will timeout after %d",l);0===l&&f.destroy();var r=setTimeout(function(){Qo("connect attempt timed out after %d",l);f.destroy();k.close();k.emit("error","timeout");a.emitAll("connect_timeout",l)},l);(this||ie).subs.push({destroy:function(){clearTimeout(r)}})}(this||ie).subs.push(f);(this||ie).subs.push(d);
return this||ie};Rj.prototype.onopen=function(){Qo("open");this.cleanup();(this||ie).readyState="open";this.emit("open");var b=(this||ie).engine;(this||ie).subs.push(Xt(b,"data",Kx(this||ie,"ondata")));(this||ie).subs.push(Xt(b,"ping",Kx(this||ie,"onping")));(this||ie).subs.push(Xt(b,"pong",Kx(this||ie,"onpong")));(this||ie).subs.push(Xt(b,"error",Kx(this||ie,"onerror")));(this||ie).subs.push(Xt(b,"close",Kx(this||ie,"onclose")));(this||ie).subs.push(Xt((this||ie).decoder,"decoded",Kx(this||ie,"ondecoded")))};
Rj.prototype.onping=function(){(this||ie).lastPing=new Date;this.emitAll("ping")};Rj.prototype.onpong=function(){this.emitAll("pong",new Date-(this||ie).lastPing)};Rj.prototype.ondata=function(b){(this||ie).decoder.add(b)};Rj.prototype.ondecoded=function(b){this.emit("packet",b)};Rj.prototype.onerror=function(b){Qo("error",b);this.emitAll("error",b)};Rj.prototype.socket=function(b,d){function k(){~yY(f.connecting,a)||f.connecting.push(a)}var a=(this||ie).nsps[b];if(!a){a=new gca(this||ie,b,d);(this||
ie).nsps[b]=a;var f=this||ie;a.on("connecting",k);a.on("connect",function(){a.id=f.generateId(b)});(this||ie).autoConnect&&k()}return a};Rj.prototype.destroy=function(b){b=yY((this||ie).connecting,b);~b&&(this||ie).connecting.splice(b,1);(this||ie).connecting.length||this.close()};Rj.prototype.packet=function(b){Qo("writing packet %j",b);var d=this||ie;b.query&&0===b.type&&(b.nsp+="?"+b.query);d.encoding?d.packetBuffer.push(b):(d.encoding=!0,(this||ie).encoder.encode(b,function(k){for(var a=0;a<k.length;a++)d.engine.write(k[a],
b.options);d.encoding=!1;d.processPacketQueue()}))};Rj.prototype.processPacketQueue=function(){if(0<(this||ie).packetBuffer.length&&!(this||ie).encoding){var b=(this||ie).packetBuffer.shift();this.packet(b)}};Rj.prototype.cleanup=function(){Qo("cleanup");for(var b=(this||ie).subs.length,d=0;d<b;d++)(this||ie).subs.shift().destroy();(this||ie).packetBuffer=[];(this||ie).encoding=!1;(this||ie).lastPing=null;(this||ie).decoder.destroy()};Rj.prototype.close=Rj.prototype.disconnect=function(){Qo("disconnect");
(this||ie).skipReconnect=!0;(this||ie).reconnecting=!1;"opening"===(this||ie).readyState&&this.cleanup();(this||ie).backoff.reset();(this||ie).readyState="closed";(this||ie).engine&&(this||ie).engine.close()};Rj.prototype.onclose=function(b){Qo("onclose");this.cleanup();(this||ie).backoff.reset();(this||ie).readyState="closed";this.emit("close",b);(this||ie)._reconnection&&!(this||ie).skipReconnect&&this.reconnect()};Rj.prototype.reconnect=function(){if((this||ie).reconnecting||(this||ie).skipReconnect)return this||
ie;var b=this||ie;if((this||ie).backoff.attempts>=(this||ie)._reconnectionAttempts)Qo("reconnect failed"),(this||ie).backoff.reset(),this.emitAll("reconnect_failed"),(this||ie).reconnecting=!1;else{var d=(this||ie).backoff.duration();Qo("will wait %dms before reconnect attempt",d);(this||ie).reconnecting=!0;var k=setTimeout(function(){b.skipReconnect||(Qo("attempting reconnect"),b.emitAll("reconnect_attempt",b.backoff.attempts),b.emitAll("reconnecting",b.backoff.attempts),b.skipReconnect||b.open(function(a){a?
(Qo("reconnect attempt error"),b.reconnecting=!1,b.reconnect(),b.emitAll("reconnect_error",a.data)):(Qo("reconnect success"),b.onreconnect())}))},d);(this||ie).subs.push({destroy:function(){clearTimeout(k)}})}};Rj.prototype.onreconnect=function(){var b=(this||ie).backoff.attempts;(this||ie).reconnecting=!1;(this||ie).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",b)};var lca=jca,Yz={},zla=Vva,Wva=Qk,V7=lca,U7=Jx("socket.io-client");Yz=Yz=T7;var uH=Yz.managers={};Yz.protocol=Wva.protocol;
Yz.connect=T7;Yz.Manager=lca;Yz.Socket=gca;var Xva=Yz,uh=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");uh.determineLocation=function(){return"undefined"!==typeof document&&document.location?document.location.origin:uh.isNode?System._nodeRequire("os").hostname():System.baseURL};uh.promise=Hg;uh.fun=gn;uh.obj=dg;uh.events=vz;uh.num=Em;uh.L2LConnection=Fk;uh.defaultActions=uP;uh.defaultClientActions=vP;uh.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==
typeof process&&process.env;uh._ioClient=Xva;uh.ioClient=uh.ioClient||void 0;uh.isNode?(uh.require=System._nodeRequire("module")._load,uh.ioClient=uh.require("socket.io-client")):uh.ioClient=uh._ioClient;uh.urlHelper={isRoot:function(b){return"/"===uh.urlHelper.path(b)},root:function(b){return uh.urlHelper.isRoot(b)?b:b.slice(0,-uh.urlHelper.path(b).length)+"/"},path:function(){var b=/^[a-z0-9-_\.]+:/,d=/^\/\/[^\/]+/;return function(k){k=k.replace(b,"").replace(d,"");return""===k?"/":k}}(),join:function(b,
d){b.endsWith("/")&&(b=b.slice(0,-1));d.startsWith("/")&&(d=d.slice(1));return b+"/"+d}};var yk=function(b,d,k,a){var f=uh.L2LConnection.call(this)||this;uh.events.makeEmitter(f);f.info=a;f.origin=b;f.path=d;f.namespace=k.replace(/^\/?/,"/");f.trackerId=null;f._socketioClient=null;f._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(uh.defaultActions).forEach(function(l){return f.addService(l,
uh.defaultActions[l])});Object.keys(uh.defaultClientActions).forEach(function(l){return f.addService(l,uh.defaultClientActions[l])});return f};$jscomp.inherits(yk,uh.L2LConnection);yk.clientKey=function(b,d,k){b=b.replace(/\/$/,"");d=d.replace(/^\//,"");k=k.replace(/^\//,"");return b+"-"+d+"-"+k};yk.forLivelyInBrowser=function(b){var d=!!b;b=Object.assign({type:"lively.morphic browser"},b);var k=this.default();if(!k)return uh.L2LClient.ensure({url:document.location.origin+"/lively-socket.io",namespace:"l2l",
info:b});d&&!uh.obj.equals(k.info,b)&&k.isRegistered()&&(k.info=b,k.unregister().then(function(){return k.register()}).catch(function(a){return console.error("l2l re-register on info change errored: "+a)}));return k};yk.default=function(){var b=uh.L2LClient.clients.keys().next().value;return uh.L2LClient.clients.get(b)};yk.create=function(b){var d=b=void 0===b?{}:b;b=void 0===d.debug?!1:d.debug;var k=d.url,a=d.namespace,f=void 0===d.autoOpen?!0:d.autoOpen;d=void 0===d.info?{}:d.info;if(!k)throw Error("L2LClient needs server url!");
var l=uh.urlHelper.root(k).replace(/\/+$/,"");k=uh.urlHelper.path(k);a=new this(l,k,a||"",d);f&&a.register();a.debug=b;return a};yk.ensure=function(b){var d=b=void 0===b?{}:b,k=d.url;d=d.namespace;if(!k)throw Error("L2LClient needs server url!");var a=uh.urlHelper.root(k).replace(/\/+$/,""),f=uh.urlHelper.path(k);a=this.clientKey(a,f,d||"");(f=this.clients.get(a))||this.clients.set(a,f=this.create(Object.assign({},b,{url:k,namespace:d})));return f};yk.prototype.isOnline=function(){return this.socket&&
this.socket.connected};yk.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};yk.prototype.open=function(){var b=this,d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b.isOnline()||b._reconnectState.isOpening?f.return(b):f.yield(b.close(),2);b._reconnectState.closed=!1;d=uh.urlHelper.join(b.origin,b.namespace);k={path:b.path,transports:["websocket","polling"]};a=b._socketioClient=uh.ioClient(d,k);b.debug&&console.log("["+b+"] connecting");
a.on("error",function(l){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] errored: "+l)});a.on("close",function(l){return b.debug&&console.log("["+b+"] closed: "+l)});a.on("reconnect_failed",function(){return b.debug&&console.log("["+b+"] could not reconnect")});a.on("reconnect_error",function(l){return b.debug&&console.log("["+b+"] reconnect error "+l)});a.on("connect",function(){b.debug&&console.log("["+b+"] connected");b.emit("connected",b);b._reconnectState.isOpening=!1;b._reconnectState.isReconnecting=
!1;b._reconnectState.isReconnectingViaSocketio=!1});a.on("disconnect",function(){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] disconnected");b.emit("disconnected",b);b.trackerId?("tracker"!==b.trackerId&&(b.renameTarget(b.trackerId,"tracker"),b.trackerId=null),b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed"):b._reconnectState.autoReconnect?(b._reconnectState.isReconnecting=!0,setTimeout(function(){b._reconnectState.closed?b.debug&&
console.log("["+b+"] won't reconnect b/c client is marked as closed 2"):b._reconnectState.isReconnectingViaSocketio?b.debug&&console.log("["+b+"] won't reconnect again, client already reconnecting"):(b.debug&&console.log("["+b+"] initiating reconnection to tracker"),b.register())},20)):b.debug&&console.log("["+b+"] won't reconnect b/c client has reconnection disabled")):(b.debug&&console.log("["+b+"] disconnect: don't have a tracker id, won't try reconnect"),b.trackerId="tracker")});a.on("reconnecting",
function(){b.debug&&console.log("["+b+"] reconnecting",b._reconnectState);b.emit("reconnecting",b);b._reconnectState.closed?(b._reconnectState.isReconnecting=!1,b._reconnectState.isReconnectingViaSocketio=!1,a.close(),b.close()):(b._reconnectState.isReconnecting=!0,b._reconnectState.isReconnectingViaSocketio=!0)});a.on("reconnect",function(){b.debug&&console.log("["+b+"] reconnected");b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=!1;b.register()});b.installEventToMessageTranslator(a);
b._reconnectState.isOpening=!0;return f.return((new Promise(function(l,r){a.once("error",r);a.once("connect",l)})).then(function(){return b}))})};yk.prototype.close=function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){b._reconnectState.closed=!0;if(d=b.socket)d.removeAllListeners("reconnect"),d.removeAllListeners("reconnecting"),d.removeAllListeners("disconnect"),d.removeAllListeners("connect"),d.removeAllListeners("reconnect_error"),d.removeAllListeners("reconnect_failed"),
d.removeAllListeners("close"),d.removeAllListeners("error"),d.close();b.debug&&console.log("["+b+"] closing...");return b.isRegistered()?a.yield(b.unregister(),2):a.jumpTo(2)}return b.isOnline()||b.socket?d&&!d.connected?(b.debug&&console.log("["+b+"] socket not connected, considering client closed"),a.return(b)):a.return(Promise.race([uh.promise.delay(2E3).then(function(){return d.removeAllListeners("disconnect")}),new Promise(function(f){return d.once("disconnect",f)})]).then(function(){b.debug&&
console.log("["+b+"] closed");return b})):(b.debug&&(k=b.isOnline()?"no socket":"not online",b.debug&&console.log("["+b+"] cannot close: "+k)),a.return(b))})};yk.prototype.remove=function(){var b=this.constructor.clientKey(this.origin,this.path,this.namespace);this.constructor.clients.delete(b);return this.close()};yk.prototype.register=function(){var b=this,d,k,a,f,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:if(b.isRegistered())return F.return();
if(b._reconnectState.closed)return b.debug&&console.log("["+b+"] not registering this b/c closed"),b._reconnectState.registerAttempt=0,F.return();if(b._reconnectState.registerProcess)return b.debug&&console.log("["+b+"] not registering this b/c register process exists"),F.return();F.setCatchFinallyBlocks(2);if(b.isOnline()){F.jumpTo(4);break}return F.yield(b.open(),4);case 4:return b.debug&&console.log("["+b+"] register"),F.yield(b.sendToAndWait("tracker","register",Object.assign({userName:"unknown",
type:"l2l "+(uh.isNode?"node":"browser"),location:uh.determineLocation()},b.info)),6);case 6:d=F.yieldResult;if(!d.data)throw k=Error("Register answer is empty!"),b.emit("error",k),k;if(d.data.isError)throw a=Error(d.data.error),b.emit("error",a),a;b._reconnectState.registerAttempt=0;f=d;l=f.data;r=l.trackerId;v=l.messageNumber;b.trackerId=r;b._incomingOrderNumberingBySenders.set(r,v||0);b.emit("registered",{trackerId:r});F.leaveTryBlock(0);break;case 2:y=F.enterCatchBlock(),console.error("Error in register request of "+
b+": "+y),A=b._reconnectState.registerAttempt++,E=uh.num.backoff(A,4,3E5),b._reconnectState.registerProcess=setTimeout(function(){b._reconnectState.registerProcess=null;b.register()},E),F.jumpToEnd()}})};yk.prototype.unregister=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(!b.isRegistered())return k.return();b.debug&&console.log("["+b+"] unregister");d=b.trackerId;k.setCatchFinallyBlocks(2);return k.yield(b.sendToAndWait(b.trackerId,
"unregister",{}),4);case 4:k.leaveTryBlock(3);break;case 2:k.enterCatchBlock();case 3:b.renameTarget(d,"tracker"),b.trackerId=null,b.emit("unregistered",b),k.jumpToEnd()}})};yk.prototype.whenRegistered=function(b){var d=this;return uh.promise.waitFor(b,function(){return d.isRegistered()}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?Error("Timeout in "+d+".whenRegistered"):k)})};yk.prototype.send=function(b,d){var k=this,a=$jscomp.makeIterator(this.prepareSend(b,d));b=a.next().value;
d=a.next().value;this.whenOnline().then(function(){var f=k.socket,l=b,r=l.action;l=l.target;if(!f)throw Error("Trying to send message "+r+" to "+l+" but cannot find a connection to it!");"function"===typeof d?f.emit(r,b,d):f.emit(r,b)})};yk.prototype.joinRoom=function(b){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] join room",{room:b})})};yk.prototype.leaveRoom=function(b){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,
"[broadcast] leave room",{room:b})})};yk.prototype.broadcast=function(b,d,k,a,f){var l=this,r={action:d,room:b,broadcast:k};if(void 0===a?0:a)r.isSystemBroadcast=!0;if(void 0===f?0:f)r.isMultiServerBroadcast=!0;return this.whenOnline().then(function(){return l.sendToAndWait(l.trackerId,"[broadcast] send",r)})};yk.prototype.listRoomMembers=function(b){var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(d.sendToAndWait(d.trackerId,"[broadcast] list room members",
{room:b}),2);k=f.yieldResult;a=k.data;return f.return(a)})};yk.prototype.joinedRooms=function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] my rooms",{}),2);d=a.yieldResult;k=d.data;return a.return(k)})};yk.prototype.listRooms=function(){var b=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] all rooms",
{}),2);d=a.yieldResult;k=d.data;return a.return(k)})};yk.prototype.listPeers=function(b){b=void 0===b?!1:b;var d=this,k,a,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return k=d,a=k._peersCached,f=Date.now(),!b&&a&&1E3>f-a.timestamp?y.return(d._peersCached.sessions):d.isOnline()?y.yield(d.sendToAndWait(d.trackerId,"getClients",{}),2):y.return([]);l=y.yieldResult;r=l.data;v=r.map(function(A){var E=$jscomp.makeIterator(A);A=E.next().value;var F=E.next().value,
H=F.info||{};E=H.userRealm;var J=H.userToken,O=H.l2lUserToken,L=H.location,Y=H.type;H=H.world;A=Object.assign({},uh.obj.dissoc(F,["info"]),{id:A,world:H,location:L,type:Y});(J=J||O)&&"null"!==J&&(lively.user?A.user=lively.user.ClientUser.fromToken(J,E):(A.userToken=J,A.userRealm=E));return A});d._peersCached={timestamp:f,sessions:v};return y.return(v)})};yk.prototype.toString=function(){var b=this.origin,d=this.path,k=this.namespace,a=this.id,f=this.isOnline()?this.isRegistered()?"registered":"unregistered":
"disconnected";return"L2LClient("+(a||"").slice(0,5)+" "+b+d+" - "+k+" "+f+")"};$jscomp.global.Object.defineProperties(yk.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(yk,{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||(this._clients=new Map)}}});uh.L2LClient=yk;uh.default=yk;var mca=Object.freeze({__proto__:null,
"default":yk});Ca("bX",mca);var zC=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");zC.promise=Hg;zC.events=vz;var sr=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString="";this.process=null;this._whenDone=zC.promise.deferred();this._whenStarted=zC.promise.deferred();this.startTime=0;this.lastSignal=null;zC.events.makeEmitter(this)};sr.findCommand=function(b){return this.commands.find(function(d){return d.pid===b})};sr.prototype.isRunning=function(){return this.process&&
void 0===this.exitCode};sr.prototype.isDone=function(){return void 0!=this.exitCode};sr.prototype.whenStarted=function(){return this._whenStarted.promise};sr.prototype.whenDone=function(){return this._whenDone.promise};sr.prototype.spawn=function(b){throw Error("not yet implemented");};sr.prototype.kill=function(b){this.lastSignal=void 0===b?"KILL":b};sr.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+this.status+")"};$jscomp.global.Object.defineProperties(sr.prototype,
{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},
stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(sr,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||(this._commands=[])}}});zC.CommandInterface=sr;zC.default=sr;var Ig=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Ig.runCommand=HB;Ig.defaultDirectory=vH;Ig.env=wH;Ig.readFile=JM;Ig.writeFile=KM;Ig.CommandInterface=sr;Ig.promise=Hg;Ig.arr=Lf;Ig.obj=dg;Ig.signal=em;Ig.debug=!1;Ig.runCommand=
HB;Ig.runCommand=HB;Ig.dirCache={};Ig.defaultDirectory=vH;Ig.defaultDirectory=vH;Ig.env=wH;Ig.env=wH;Ig.readFile=JM;Ig.readFile=JM;Ig.writeFile=KM;Ig.writeFile=KM;var Hs=function(b){var d=Ig.CommandInterface.call(this)||this;d.debug=Ig.debug;d.l2lClient=b;return d};$jscomp.inherits(Hs,Ig.CommandInterface);Hs.installLively2LivelyServices=function(b){Object.keys(Ig.L2LServices).forEach(function(d){return b.addService(d,function(k,a,f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(Ig.L2LServices[d](k,
a,f))})})})};Hs.prototype.envForCommand=function(b){var d=this.l2lClient,k=d.id,a=d.origin,f=d.path;d=d.namespace;var l=b||{};b=l.env;l=l.owner;b=b||{};l&&(b.LIVELY_COMMAND_OWNER=l);return Object.assign({ASKPASS_SESSIONID:k,L2L_EDITOR_SESSIONID:k,L2L_SESSIONTRACKER_SERVER:a,L2L_SESSIONTRACKER_PATH:f,L2L_SESSIONTRACKER_NS:d},b)};Hs.prototype.spawn=function(b){b=void 0===b?{command:null,env:{},cwd:null,stdin:null}:b;var d=this,k,a,f,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==
J.nextAddress)return k=d,a=k.l2lClient,f=b,l=f.command,r=f.env,v=f.cwd,y=f.stdin,d.startTime=new Date,r=d.envForCommand(b),d.debug&&console.log(d+" spawning "+l),d.debug&&d.whenStarted().then(function(){return console.log(d+" started")}),d.debug&&d.whenDone().then(function(){return console.log(d+" exited")}),Ig.arr.pushIfNotIncluded(d.constructor.commands,d),d.commandString=Array.isArray(l)?l.join(""):l,J.yield(a.sendToAndWait(a.trackerId,"lively.shell.spawn",{command:l,env:r,cwd:v,stdin:y},{ackTimeout:3E4}),
2);A=J.yieldResult;E=A.data;F=E.error;H=E.pid;if(F)throw Ig.debug&&console.error("["+d+"] error at start: "+F),d.process={error:F},d.exitCode=1,Ig.signal(d,"error",F),Error(F);d.process={pid:H};Ig.debug&&console.log("["+d+"] got pid "+H);Ig.signal(d,"pid",H);d._whenStarted.resolve();return J.return(d)})};Hs.prototype.writeToStdin=function(b){var d=this,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(!d.isRunning())return l.return();k=d;a=k.l2lClient;f=k.pid;return l.yield(a.sendToAndWait(a.trackerId,
"lively.shell.writeToStdin",{pid:f,stdin:String(b)}),0)})};Hs.prototype.kill=function(b){b=void 0===b?"KILL":b;var d=this,k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){if(!d.isRunning())return A.return();Ig.debug&&console.log(d+" signaling "+b);d.lastSignal=b;k=d;a=k.pid;f=k.l2lClient;return A.yield(f.sendToAndWait(f.trackerId,"lively.shell.kill",{pid:a}),2)}l=A.yieldResult;r=l.data;v=r.status;y=r.error;Ig.debug&&console.log(d+" kill send: "+(y||
v));if(y)throw Error(y);return A.return(d.whenDone())})};Hs.prototype.onOutput=function(b){var d=b.stdout;b=b.stderr;d&&(this._stdout+=d,Ig.signal(this,"stdout",d),this.emit("stdout",d));b&&(this._stderr+=b,Ig.signal(this,"stderr",b),this.emit("stderr",b))};Hs.prototype.onClose=function(b){Ig.arr.remove(this.constructor.commands,this);this.exitCode=b;this.emit("close",b);Ig.signal(this,"close",b);this._whenDone.resolve(this)};Hs.prototype.onError=function(b){Ig.arr.remove(this.constructor.commands,
this);this._stderr+=b.stack;this.exitCode=1;this.emit("error",b.stack);Ig.signal(this,"error",b.stack);this._whenDone.reject(b)};Ig.ClientCommand=Hs;Ig.L2LServices={"lively.shell.onOutput":function(b,d,k,a){b=d.data;var f=b.pid,l=b.stdout,r=b.stderr,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return Ig.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command "+f),y.setCatchFinallyBlocks(2),y.yield(Ig.promise.waitFor(1E3,
function(){return Ig.ClientCommand.findCommand(f)}),4);case 4:v=y.yieldResult;y.leaveTryBlock(3);break;case 2:return y.enterCatchBlock(),console.warn("[lively.shell] received output for command "+f+" but it isn't registered!'"),y.return();case 3:v.onOutput({stdout:l,stderr:r}),y.jumpToEnd()}})},"lively.shell.onExit":function(b,d,k,a){b=d.data;var f=b.pid,l=b.code,r=b.error,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return Ig.debug&&console.log("[lively.shell] client received lively.shell.onExit for command "+
f),y.setCatchFinallyBlocks(2),y.yield(Ig.promise.waitFor(1E3,function(){return Ig.ClientCommand.findCommand(f)}),4);case 4:v=y.yieldResult;y.leaveTryBlock(3);break;case 2:return y.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+f+" but it isn't registered!'"),y.return();case 3:if(r)"string"===typeof r&&(r=Error(r)),v.onError(r);else v.onClose(l);y.jumpToEnd()}})}};Ig.default=Hs;var Yva=Object.freeze({__proto__:null,runCommand:HB,defaultDirectory:vH,env:wH,readFile:JM,
writeFile:KM,"default":Hs}),cj=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");cj.runCommand=LM;cj.defaultDirectory=MM;cj.env=XU;cj.readFile=function(b,d){d=(d=void 0===d?{}:d)||{};var k=cj.runCommand('cat "'+b+'"',d);return k.whenDone().then(function(){return k.output})};cj.writeFile=function(b,d,k){"string"===typeof d&&(d={content:d});d=d||{};d.content=d.content||"";"win32"!==this.PLATFORM&&(b='"'+b+'"');b=this.run("tee "+b,{stdin:d.content,cwd:d.cwd});d.onEnd&&lively.bindings.connect(b,
"end",d,"onEnd");k&&lively.bindings.connect(b,"end",{thenDo:k},"thenDo");return b};cj.parseCommand=YU;cj.doGrep=ZU;cj.L2LClient=yk;cj._runCommand=HB;cj._env=wH;cj._defaultDirectory=vH;cj.string=Ih;cj.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};cj.runCommand=LM;cj.runCommand=LM;cj.defaultDirectory=MM;cj.defaultDirectory=MM;cj.env=XU;cj.env=XU;cj.parseCommand=YU;cj.parseCommand=YU;cj.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");
cj.doGrep=ZU;cj.doGrep=ZU;var Gi=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");Gi.fileInfo=NM;Gi.fileInfoCommandString=function(b,d){var k=d=void 0===d?{}:d;d=k.rootDirectory;k=k.platform;d=d||".";var a="win32"===k?"\\":"/";"win32"===k||d.endsWith(a)||(d+=a);return"win32"===k?"cd "+d+' && ls -lLd --time-style=locale "'+b+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+
(d+' && ls -lLd "$timeformat" "'+b+'"')};Gi.parseDirectoryListFromLs=$U;Gi.findFiles=OM;Gi.findFilesCommandString=function(b,d){var k=d=void 0===d?{}:d,a=k.rootDirectory,f=k.exclude,l=k.depth;k=k.platform;a=a||".";f=f||"-iname "+Gi.defaultExcludes.map(Gi.string.print).join(" -o -iname ");var r="win32"===k?"\\":"/";"win32"===k||a.endsWith(r)||(a+=r);b=Gi.string.format('%s "%s"',d.re?"-iregex":d.matchPath?"-ipath":"-iname",b);l="number"===typeof l?" -maxdepth "+l:"";return"win32"===k?Gi.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",
a,d.re?"-E ":"",f.replace(/"/g,""),b.replace(/"/g,""),l):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+Gi.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',a,d.re?"-E ":"",f,b,l)};Gi.convertDirectoryUploadEntriesToFileInfos=aV;Gi.runCommand=HB;Gi.string=Ih;Gi.promise=Hg;Gi.arr=Lf;Gi.fileInfo=NM;Gi.fileInfo=NM;Gi.parseDirectoryListFromLs=
$U;Gi.parseDirectoryListFromLs=$U;var EP=function(b){this.rootDirectory=b;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};EP.prototype.readFromDirectoryListLine=function(b){var d=this;if(!b.trim().length)return null;var k=b;this.reader.forEach(function(a){return k=a(k,d)});return this};EP.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(EP.prototype,
{reader:{configurable:!0,enumerable:!0,get:function(){return[function(b,d){var k=b.indexOf(" ");d.mode=b.slice(0,k);d.isDirectory="d"===d.mode[0];return b.slice(k+1).trim()},function(b,d){var k=b.indexOf(" ");d.linkCount=Number(b.slice(0,k));return b.slice(k+1).trim()},function(b,d){var k=b.indexOf(" ");d.user=b.slice(0,k);return b.slice(k+1).trim()},function(b,d){var k=Gi.string.peekRight(b,0,/\s+[0-9]/);d.group=b.slice(0,k).trim();return b.slice(k).trim()},function(b,d){var k=b.indexOf(" ");d.size=
Number(b.slice(0,k));return b.slice(k+1).trim()},function(b,d){var k=Gi.string.reMatches(b,/[^s]+\s+[0-9:\s]+/);if(!k||!k[0])return b;d.lastModified=new Date(k[0].match+" GMT");return b.slice(k[0].end).trim()},function(b,d){var k=(b=b.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&b.split(" -> "),a=""===b?!1:b&&2===k.length,f=(k=a?k[0]:b)&&0===k.indexOf(d.rootDirectory)?k.slice(d.rootDirectory.length):k;d.fileName=""===b?".":f;d.path=k;d.isLink=a;return f}]}}});Gi.FileInfo=EP;Gi.findFilesProcesses=
{};Gi.findFiles=OM;Gi.findFiles=OM;Gi.defaultExcludes=[".svn",".git","node_modules",".module_cache"];Gi.convertDirectoryUploadEntriesToFileInfos=aV;Gi.convertDirectoryUploadEntriesToFileInfos=aV;var Lj=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");Lj.Resource=Eg;Lj.runCommand=HB;Lj.fileInfo=NM;Lj.findFiles=OM;Lj.string=Ih;Lj.promise=Hg;Lj.arr=Lf;Lj.obj=dg;var Ro=function(b,d,k){k=void 0===k?{}:k;b=Lj.Resource.call(this,b)||this;b.options=Object.assign({},k,{l2lClient:d||b.constructor.defaultL2lClient});
return b};$jscomp.inherits(Ro,Lj.Resource);Ro.prototype.newResource=function(b){return new this.constructor(b,this.options.l2lClient,this.options)};Ro.prototype.read=function(){var b=this,d=Lj.runCommand('cat "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Read "+b.url+" failed: "+d.stderr);return d.output})};Ro.prototype.write=function(b){var d=this,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b?
f.yield(Lj.runCommand('touch "'+d.url+'" && tee "'+d.url+'"',Object.assign({stdin:String(b)},d.options)).whenDone(),4):f.yield(Lj.runCommand('echo -n > "'+d.url+'"',Object.assign({},d.options)).whenDone(),5);case 4:k=f.yieldResult;f.jumpTo(3);break;case 5:k=f.yieldResult;case 3:a=k;if(a.exitCode)throw Error("Write "+d.url+" failed: "+a.stderr);return f.return(d)}})};Ro.prototype.mkdir=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(Lj.runCommand('mkdir -p "'+
b.url+'"',b.options).whenDone(),2);d=k.yieldResult;if(d.exitCode)throw Error(b+" cannot create directory: "+d.stderr);return k.return(b)})};Ro.prototype.exists=function(){var b=Lj.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return b.whenDone().then(function(){return 0===b.exitCode})};Ro.prototype.remove=function(){var b=this,d=Lj.runCommand('rm -rf "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Remove of "+b.url+" failed: "+
d.stderr);return b})};Ro.prototype.gzip=function(b){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){k=Lj.runCommand('gzip > "'+d.url+'"',Object.assign({stdin:String(b)},d.options));return a.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Gzip compression of "+d.url+" failed: "+k.stderr);return d}))})};Ro.prototype.brotli=function(b){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){k=Lj.runCommand('brotli > "'+d.url+'"',Object.assign({stdin:String(b)},
d.options));return a.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Brotli compression of "+d.url+" failed: "+k.stderr);return d}))})};Ro.prototype.readProperties=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(Lj.fileInfo(b.url,b.options),2);d=k.yieldResult;b.assignProperties(Lj.obj.dissoc(d,["fileName","path","rootDirectory"]));return k.return(b)})};Ro.prototype.dirList=function(b,d){b=void 0===b?1:b;d=void 0===
d?{}:d;var k=this,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return a=d,f=a.exclude,Array.isArray(f)&&(f="-iname "+f.map(Lj.string.print).join(" -o -iname ")),l=k,r=l.url,v=l.options,y=v.l2lClient,E.yield(Lj.findFiles("*",{exclude:f,depth:b,rootDirectory:r,l2lClient:y}),2);A=E.yieldResult;A[0].path.replace(/\/$/,"")===k.url.replace(/\/$/,"")&&A.shift();return E.return(A.map(function(F){var H=F.path;F.isDirectory&&(H=H.replace(/\/?$/,"/"));H=new k.constructor(H,
y,k.options);H.assignProperties(Lj.obj.dissoc(F,["fileName","path","rootDirectory"]));return H}))})};$jscomp.global.Object.defineProperties(Ro,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||Lj._defaultL2LClient},set:function(b){this._defaultL2lClient=Lj._defaultL2LClient=b}}});Lj.ShellClientResource=Ro;Lj._defaultL2LClient=Lj._defaultL2LClient||void 0;var FP={name:"shell-client",matches:function(b){return b.startsWith("/")||b.match(/[a-z]:\\/i)},resourceClass:Lj.ShellClientResource};
Lj.resourceExtension=FP;Lj.resourceExtension=FP;Lj.resourceExtension=FP;Lj.default=Ro;var Zva=Object.freeze({__proto__:null,"default":Ro,resourceExtension:FP}),Yd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");Yd.pt=di;Yd.Rectangle=ye;Yd.rect=Dl;Yd.arr=Lf;Yd.Closure=Sj;Yd.num=Em;Yd.grid=HE;Yd.obj=dg;Yd.once=cv;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("Layout")&&"function"===typeof d.Layout?d.Layout:d.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{}:a;a=f.spacing;var l=f.padding,r=f.border,v=f.container,y=f.manualUpdate,A=f.autoResize,E=f.ignore,F=f.onScheduleApply,H=f.layoutOrder;f=f.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},r);this.ignore=E||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1;this.container=v;this.manualUpdate=y;this.reactToSubmorphAnimations=f||!1;this.autoResize=void 0!=A?A:!0;this.onScheduleApply=F||function(J,O,L){};H&&(this.layoutOrder=H,this.layoutOrderSource=JSON.stringify(String(H)));this.spacing=a||0;this._padding=l?"number"===typeof l?Yd.Rectangle.inset(l):l:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},
{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=Yd.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},
{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=Yd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return Yd.arr.sortBy(this.container.submorphs.filter(function(f){return f.isLayoutable&&!a.ignore.includes(f.name)}),function(f){return a.layoutOrder(f)})}},{key:"layoutOrder",
value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,f=this.layoutableSubmorphBounds;if(!f||a.length!=f.length)return!0;for(var l=0;l<a.length;l++)if(!f[l].equals(a[l].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},
{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),
this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var f=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(l){return f.forceLayoutsOfMorph(l)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(f){return a.forceLayoutsOfMorph(f)})}},{key:"scheduleApply",value:function(a,f,l){l=void 0===l?{}:l;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,f,l);this.active||(f&&(this.lastAnim=f),this.applyRequests=
!0)}},{key:"onSubmorphResized",value:function(a,f){this.scheduleApply(a,this.reactToSubmorphAnimations&&f.meta.animation,f)}},{key:"onSubmorphAdded",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,f)}},{key:"onSubmorphRemoved",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,f)}},{key:"onChange",value:function(a){var f=a.args,l=a.prop,r=a.value,v=a.prevValue,y=a.meta;y=this.reactToSubmorphAnimations&&y&&y.animation;f=f&&f[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(f,
y);break;case "addMorphAt":this.onSubmorphAdded(f,y)}"extent"===l&&r&&v&&(v.x!==r.x||v.y!==r.y)&&this.scheduleApply(f,y)}},{key:"affectsLayout",value:function(a,f){a=f.value;var l=f.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(f.prop)&&!Yd.obj.equals(a,l)}},{key:"onSubmorphChange",value:function(a,f){if(f.meta&&f.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&f.meta.animation);if(this.affectsLayout(a,f))this.onSubmorphResized(a,f)}},
{key:"changePropertyAnimated",value:function(a,f,l,r){if(r){var v=r.duration;r=r.easing;var y={};this.animationPromise=a.animate((y[f]=l,y.duration=v,y.easing=r,y))}else a[f]=l}},{key:"attachAnimated",value:function(a,f,l){this.active||(this.container=f,this.active=!0,f.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:l})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),
this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6611})})(void 0);var OI=Ca("b1",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("CustomLayout")&&
"function"===typeof d.CustomLayout?d.CustomLayout:d.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){Zb._get(Object.getPrototypeOf(k.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=Yd.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(f){console.error("Error in relayout() of a custom layout:",f)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=
!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6620,end:7548})}(Yd.Layout));Yd.CustomLayout=OI;Yd.CustomLayout=OI;Yd.CustomLayout=OI;var PI=Ca("bj",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
k=d.hasOwnProperty("SnapLayout")&&"function"===typeof d.SnapLayout?d.SnapLayout:d.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var f=this;a=void 0===a?!1:a;if(!this.active&&this.container){Zb._get(Object.getPrototypeOf(k.prototype),"apply",this).call(this,a);var l=this.container.submorphBounds().insetBy(-this.spacing),r=Yd.pt(this.spacing,this.spacing).subPt(l.topLeft());r.r()&&this.container.submorphs.forEach(function(v){return f.changePropertyAnimated(v,"position",v.position.addPt(r),a)});this.changePropertyAnimated(this.container,
"extent",l.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7557,end:8354})}(Yd.Layout));Yd.SnapLayout=PI;Yd.SnapLayout=PI;Yd.SnapLayout=PI;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
k=d.hasOwnProperty("FloatLayout")&&"function"===typeof d.FloatLayout?d.FloatLayout:d.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(f.active||
!f.container||!f.container.submorphs.length||!f.layoutableSubmorphs.length)return r.return();f.layoutableSubmorphBounds||f.refreshBoundsCache();Zb._get(Object.getPrototypeOf(k.prototype),"apply",f).call(f,a);f.active=!0;try{l=f.computeMinContainerExtent(),f.layoutSubmorphs(l,a),l=f.computeMinContainerExtent(),f.resizeContainer(l,a),f.lastBoundsExtent=f.container.bounds().extent()}finally{f.active=!1,f.layoutRequests=!1}return r.return(f.animationPromise)})}},{key:"resizeContainer",value:function(){}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8356,end:10764})})(Yd.Layout);var Zz=Ca("ap",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("VerticalLayout")&&
"function"===typeof d.VerticalLayout?d.VerticalLayout:d.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},
{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return Zb._get(Object.getPrototypeOf(k.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+Yd.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,f){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.spacing,A=this.autoResize,E=this.align,F=this.resizeSubmorphs,H=this.getStartY(a),J=[];a=F?r.width:a.x;A=A&&!F;var O=function(L,Y){v.reduce(function(S,ea){F&&l.changePropertyAnimated(ea,"width",r.width-2*y,f);l.forceLayoutsOfMorph(ea);l.changePropertyAnimated(ea,L,S,f);S=ea.bounds();J.push(S);return S[L]().addXY(0,S.height+y)},Y)};this.layoutableSubmorphBounds=
J;"left"===E?O("topLeft",Yd.pt(y,H)):"right"===E?O("topRight",Yd.pt(a+(A?y:-y),H)):O("topCenter",Yd.pt((a+(A?2*y:0))/2,H))}},{key:"resizeContainer",value:function(a,f){var l=this.direction,r=this.layoutableSubmorphs,v=this.resizeSubmorphs,y=this.spacing,A=this.container;this.autoResize&&("centered"===l?(l=r[0].top,r=Yd.arr.last(r).bottom+l):r=Yd.arr.last(r).bottom+y,a=Yd.pt(v?A.width:a.x+2*y,Math.max(r,a.y)),this.changePropertyAnimated(A,"extent",a,f))}},{key:"getStartY",value:function(a){var f=this.layoutableSubmorphBounds,
l=this.spacing,r=this.direction;var v=(f.length-1)*l;f=$jscomp.makeIterator(f);for(var y=f.next();!y.done;y=f.next())v+=y.value.height;return Math.max(0,"bottomToTop"===r?a.y-v-2*l:"centered"===r?a.y/2-v/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,f=this.layoutableSubmorphs,l=this.autoResize,r=(f.length+1)*this.spacing,v=0,y=0,A=0;A<f.length;A++){var E=f[A].bounds(),F=E.width;y+=E.height;v=Math.max(F,v)}f=Yd.pt(v,y+r);l||(f=f.maxPt(a.extent));return f}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10773,end:14741})}(Yd.FloatLayout));Yd.VerticalLayout=Zz;Yd.VerticalLayout=
Zz;Yd.VerticalLayout=Zz;var Zt=Ca("aD",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("HorizontalLayout")&&"function"===typeof d.HorizontalLayout?d.HorizontalLayout:d.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
Yd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return Zb._get(Object.getPrototypeOf(k.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,f){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.resizeSubmorphs,A=this.spacing,E=this.autoResize,F=this.align,H=this.getStartX(a),J=[];a=y?r.height:a.y;E=E&&!y;var O=function(L,Y){v.reduce(function(S,ea){y&&
l.changePropertyAnimated(ea,"height",r.height-2*A,f);l.forceLayoutsOfMorph(ea);l.changePropertyAnimated(ea,L,S,f);S=ea.bounds();J.push(S);return S[L]().addXY(S.width+A,0)},Y)};this.layoutableSubmorphBounds=J;"top"===F?O("topLeft",Yd.pt(H,A)):"bottom"===F?O("bottomLeft",Yd.pt(H,a+(E?A:-A))):O("leftCenter",Yd.pt(H,(a+(E?2*A:0))/2))}},{key:"resizeContainer",value:function(a,f){var l=this.direction,r=this.layoutableSubmorphBounds,v=this.resizeSubmorphs,y=this.spacing,A=this.container;this.autoResize&&
("centered"===l?(l=r[0].left(),r=Yd.arr.last(r).right()+l):r=Yd.arr.last(r).right()+y,a=Yd.pt(Math.max(a.x,r),v?A.height:a.y+2*y),this.changePropertyAnimated(A,"extent",a,f))}},{key:"getStartX",value:function(a){var f=this.layoutableSubmorphBounds,l=this.spacing,r=this.direction;var v=(f.length-1)*l;f=$jscomp.makeIterator(f);for(var y=f.next();!y.done;y=f.next())v+=y.value.width;return Math.max(0,"rightToLeft"===r?a.x-v-2*l:"centered"===r?a.x/2-v/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=
this.container,f=this.layoutableSubmorphBounds,l=this.autoResize,r=(f.length+1)*this.spacing,v=0,y=0,A=0;A<f.length;A++){var E=f[A],F=E.height;v+=E.width;y=Math.max(F,y)}f=Yd.pt(v+r,y);l||(f=f.maxPt(a.extent));return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14750,end:18667})}(Yd.FloatLayout));Yd.HorizontalLayout=Zt;Yd.HorizontalLayout=Zt;Yd.HorizontalLayout=Zt;var QI=Ca("aE",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("ProportionalLayout")&&"function"===typeof d.ProportionalLayout?d.ProportionalLayout:d.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=Yd.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+Yd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(Zb._get(Object.getPrototypeOf(k.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,f){var l=this._submorphSettings;a=this.container;f=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=Yd.pt(0,0);if(l&&a){l=$jscomp.makeIterator(l);for(var r=l.next();!r.done;r=l.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;(r=$jscomp.makeIterator(this._morphsMatchingSelector(a,r)).next().value)&&f.set(r,v)}this.proportionalLayoutSettingsForMorphs=
f}}},{key:"onSubmorphChange",value:function(a,f,l,r){"name"===f.prop&&(l=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,l,!0);return Zb._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",this).call(this,a,f)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,f,l){l=void 0===l?!1:l;"string"===typeof f&&(f={x:f,y:f});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},f));l&&(f=this.submorphSettings.filter(function(r){return r[0]!==a.name}),f.push([a.name,this.settingsFor(a)]),this._submorphSettings=f)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else Yd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var f=this,l={};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;l={$jscomp$loop$prop$setting$2550:l.$jscomp$loop$prop$setting$2550},r=a.next()){r=$jscomp.makeIterator(r.value);var v=r.next().value;l.$jscomp$loop$prop$setting$2550=r.next().value;this._morphsMatchingSelector(this.container,v).forEach(function(y){return function(A){return f.changeSettingsFor(A,y.$jscomp$loop$prop$setting$2550)}}(l))}}},{key:"_morphsMatchingSelector",value:function(a,
f){var l=this,r=[];if(!f)return r;f.isMorph?r=[f]:f instanceof RegExp?r=a.submorphs.filter(function(v){return v.name.match(f)}):"string"===typeof f?r=a.submorphs.filter(function(v){return v.name===f}):Array.isArray(f)&&(r=Yd.arr.flatmap(f,function(v){return l._morphsMatchingSelector(a,v)}));return r}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,f=this.lastExtent;f&&!a.eqPt(f)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(f)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(l){return l.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.container,l=this.extentDelta,r=l.x;l=l.y;var v=(f||{}).extent;if(!this.active&&f&&(0!=r||0!=l)){this.extentDelta=Yd.pt(0,0);this.active=!0;Zb._get(Object.getPrototypeOf(k.prototype),"apply",this).call(this,a);var y=this.layoutableSubmorphs;f=v.scaleByPt(v.addXY(-r,-l).invertedSafely());v=$jscomp.makeIterator(y);for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.settingsFor(y),
E=A.x,F=A.y,H=A=0,J=0,O=0;"move"===E&&(A=r);"move"===F&&(H=l);"resize"===E&&(J=r);"resize"===F&&(O=l);if("scale"===E||"scale"===F)E=Yd.pt("scale"===E?f.x:1,"scale"===F?f.y:1),this.changePropertyAnimated(y,"position",y.position.scaleByPt(E),a),this.changePropertyAnimated(y,"extent",y.extent.scaleByPt(E),a);(A||H)&&this.changePropertyAnimated(y,"position",y.position.addXY(A,H),a);(J||O)&&this.changePropertyAnimated(y,"extent",y.extent.addXY(J,O),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18676,end:24220})}(Yd.Layout));Yd.ProportionalLayout=QI;Yd.ProportionalLayout=QI;Yd.ProportionalLayout=
QI;var RI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof d.CenteredTilingLayout?d.CenteredTilingLayout:d.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Zb._get(Object.getPrototypeOf(k.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var f=this.spacing,l=this.layoutableSubmorphs,r=f+this.border.top;l=l.slice();for(var v={};l.length;){v.$jscomp$loop$prop$remainingWidth$2552=a;var y=Yd.arr.takeWhile(l,function(F){return function(H){H=F.$jscomp$loop$prop$remainingWidth$2552-(H.width+2*f);if(0>H)return!1;F.$jscomp$loop$prop$remainingWidth$2552=
H;return!0}}(v));y.length?l=Yd.arr.withoutAll(l,y):(y=[l.shift()],v.$jscomp$loop$prop$remainingWidth$2552=0);var A=Yd.pt(v.$jscomp$loop$prop$remainingWidth$2552/2+f+this.border.left,r);y=$jscomp.makeIterator(y);for(var E=y.next();!E.done;E=y.next())E=E.value,E.position=A,A=A.addXY(2*f+E.width,0),r=Math.max(r,E.bottom);r+=2*f;v={$jscomp$loop$prop$remainingWidth$2552:v.$jscomp$loop$prop$remainingWidth$2552}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24229,end:25525})}(Yd.TilingLayout);Yd.CenteredTilingLayout=RI;Yd.CenteredTilingLayout=RI;Yd.CenteredTilingLayout=RI;var SI=Ca("b2",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("TilingLayout")&&
"function"===typeof d.TilingLayout?d.TilingLayout:d.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+Yd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Zb._get(Object.getPrototypeOf(k.prototype),"apply",this).call(this,a);var f=this.axis,l=this.align,r=this.border,v=this.spacing,
y=this.layoutableSubmorphs,A=this.getOptimalWidth(this.container),E=(f="row"==f)?"left":"top",F=f?"x":"y",H=f?"y":"x",J=0,O=v+r[f?"top":"left"],L="topLeft";switch(this._verticalAlign){case "top":L="topLeft";break;case "center":L="leftCenter";break;case "bottom":L="bottomLeft"}for(;y.length;){var Y=A-v,S=Yd.arr.takeWhile(y,function(Fa){Fa=Fa.bounds().extent();Fa=Y-(Fa[F]+v);if(0>Fa)return!1;Y=Fa;return!0});S.length?y.splice(0,S.length):(S=[y.shift()],Y=0);J=Yd.arr.max(S.map(function(Fa){return Fa.bounds().extent()[H]}));
if(f)switch(l){case "left":var ea=Yd.pt(v,O);break;case "center":ea=Yd.pt(Y/2+v+r[E],O);break;case "right":ea=Yd.pt(Y-v,O)}else switch(l){case "left":ea=Yd.pt(O,v);break;case "center":ea=Yd.pt(O,Y/2+v+r[E]);break;case "right":ea=Yd.pt(O,Y-v)}"bottomLeft"==L&&(ea=ea.addXY(0,J));S=$jscomp.makeIterator(S);for(var qa=S.next();!qa.done;qa=S.next())qa=qa.value,this.changePropertyAnimated(qa,L,ea,a),qa=qa.bounds().extent(),ea=f?ea.addXY(v+qa[F],0):ea.addXY(0,v+qa[F]);O+=v+J;J=0}this.active=!1}}},{key:"getMinWidth",
value:function(){var a=this.border,f=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().width>l?r.bounds().width:l},0)+f+a}},{key:"getMinHeight",value:function(){var a=this.border,f=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().height>l?r.bounds().height:l},0)+f+a}},{key:"getOptimalWidth",value:function(a){var f=this.axis,l=this.border,r=l.left,v=l.top,y=l.right;l=l.bottom;a="row"==f?a.width-r-y:a.height-v-l;f="row"==f?
this.getMinWidth():this.getMinHeight();return Math.max(a,f)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25534,end:31071})}(Yd.Layout));Yd.TilingLayout=SI;Yd.TilingLayout=SI;Yd.TilingLayout=SI;var TI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("CellGroup")&&"function"===typeof d.CellGroup?d.CellGroup:d.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var f=a.morph,l=a.layout;this.state={cells:[a.cell],layout:l,align:a.align,resize:l.fitToCell};l&&l.addGroup(this);this.morph=f}},{key:"morph",get:function(){var a=this.state,f=a.morph;a=a.layout;return f?f.isMorph?f:a.layoutableSubmorphs.find(function(l){return l.name==f}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},
{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var f=a&&this.layout.getCellGroupFor(a);f&&(f.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.morph;if(f){var l=this.bounds(),r=this.compensateOrigin?this.layout.container.origin.negated():
Yd.pt(0,0);if(a){var v=this.resize?l.extent():f.extent,y=a;a=y.duration;y=y.easing;var A={};f.animate((A[this.alignedProperty||this.align]=l[this.align]().addPt(r),A.extent=v,A.duration=a,A.easing=y,A))}else this.resize&&(f.extent=l.extent()),f[this.alignedProperty||this.align]=l[this.align]().addPt(r);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?
this.cells.map(function(a){return a.bounds()}).reduce(function(a,f){return a.union(f)}):Yd.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(f){return f==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,f){a.group=(void 0===f?null:f)||new Yd.CellGroup({morph:null,layout:this.layout,cell:a});Yd.arr.remove(this.cells,a);1>this.cells.length&&
this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var f=this;a.cells.forEach(function(l){f.connect(l)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(f){return(null==f.left||f.left.group!=a)&&(null==f.top||f.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(f){return(null==f.right||f.right.group!=a)&&(null==f.bottom||f.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31080,end:34312})}(void 0);Yd.CellGroup=TI;Yd.CellGroup=TI;Yd.CellGroup=TI;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("LayoutAxis")&&
"function"===typeof d.LayoutAxis?d.LayoutAxis:d.LayoutAxis=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,f=[];a=a.before;)f=[a].concat($jscomp.arrayFromIterable(f));
return f}},{key:"axisAfter",get:function(){for(var a=this,f=[];a=a.after;)f=[].concat($jscomp.arrayFromIterable(f),[a]);return f}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},
{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(f){return f.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var f=this;if(Yd.obj.isNumber(a)){var l=a;a=!0}this.items.forEach(function(v){v.fixed[f.dimension]=
a});var r=this.containerLength;void 0!=l&&(this[this.dimension]=l);this.adjustOtherProportions(a);this.containerLength=r}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var f=this;this.items.forEach(function(l){l[f.dimension]=Yd.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var f=this;this.items.forEach(function(l){l.proportion[f.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var f=this;this.items.forEach(function(l){l.min[f.dimension]=0>l.min[f.dimension]+a?0:l.min[f.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var f=this,l=this.axisBefore,r=this.axisAfter,v=Yd.arr.sum([].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(r)).filter(function(E){return!E.fixed}).map(function(E){return E.proportion})),
y=function(E){return E.proportion/=v},A=function(E){return E.proportion*=f.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=v);l.forEach(a?y:A);r.forEach(a?y:A)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var f;0>this.length+a&&(a=
-this.length);(f=this.axisAfter.find(function(l){return!l.fixed}))?(a=Math.min(a,f.length),this.length+=a,f.length-=a,this.adjustProportion(),f.adjustProportion()):(f=this.axisBefore.reverse().find(function(l){return!l.fixed}))?(f.length-=a,this.length+=a,this.adjustProportion(),f.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(l){return l.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(l){return!l.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),f=(this.containerLength-this.staticLength)/a.length;a.map(function(l){l.fixed||(l.length=f);return l}).forEach(function(l){return l.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34952,end:40669})})(void 0);var UI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("LayoutColumn")&&
"function"===typeof d.LayoutColumn?d.LayoutColumn:d.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new Yd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new Yd.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(f){f.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(f){f.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new Yd.LayoutColumn(new Yd.LayoutCell({column:Yd.arr.withN(this.items.length,null),layout:this.layout}));Yd.arr.zip(a.items,this.items).forEach(function(f){var l=$jscomp.makeIterator(f);f=l.next().value;l=l.next().value;f.height=l.height;f.fixed.height=l.fixed.height;f.frozen.height=l.frozen.height;f.proportion.height=l.proportion.height;f.min.height=l.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;Yd.arr.zip(this.items,a.items).forEach(function(f){var l=$jscomp.makeIterator(f);f=l.next().value;l=l.next().value;f.right=l;l.left=f});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,f=this.before||this.after;this.items.forEach(function(l){l.left&&(l.left.right=l.right);l.right&&(l.right.left=l.left);l.group.disconnect(l);a.layout.removeGroup(l.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40678,end:43052})}(Yd.LayoutAxis);Yd.LayoutColumn=UI;Yd.LayoutColumn=UI;Yd.LayoutColumn=UI;var VI=function(b){var d=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("LayoutRow")&&"function"===typeof d.LayoutRow?d.LayoutRow:d.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new Yd.LayoutRow(new Yd.LayoutCell({row:Yd.arr.withN(this.items.length,null),layout:this.layout}));Yd.arr.zip(a.items,this.items).forEach(function(f){var l=$jscomp.makeIterator(f);f=l.next().value;l=l.next().value;f.width=l.width;f.fixed.width=l.fixed.width;f.frozen.width=l.frozen.width;f.proportion.width=l.proportion.width;f.min.width=l.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(f){f.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(f){f.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new Yd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new Yd.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;Yd.arr.zip(this.items,a.items).forEach(function(f){var l=$jscomp.makeIterator(f);f=l.next().value;l=l.next().value;f.bottom=l;l.top=f});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,f=this.before||this.after;this.items.forEach(function(l){l.top&&(l.top.bottom=l.bottom);l.bottom&&(l.bottom.top=l.top);l.group.disconnect(l);a.layout.removeGroup(l.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43061,
end:45522})}(Yd.LayoutAxis);Yd.LayoutRow=VI;Yd.LayoutRow=VI;Yd.LayoutRow=VI;var WI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("LayoutCell")&&"function"===typeof d.LayoutCell?d.LayoutCell:d.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a.row,l=a.column,r=a.top,v=a.left,
y=a.right,A=a.bottom;a=a.layout;var E;f=$jscomp.makeIterator(f||[]);var F=f.next().value;f=$jscomp.arrayFromIterator(f);l=$jscomp.makeIterator(l||[]);var H=l.next().value;l=$jscomp.arrayFromIterator(l);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=r;this.left=v;this.bottom=A;this.right=y;this.padding=Yd.rect(0,0,0,0);0<f.length?this.right=new Yd.LayoutCell({row:f,left:this,layout:a}):0<l.length&&(this.bottom=new Yd.LayoutCell({column:l,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(E=a&&a.getCellGroupFor(F||H))?E.connect(this):this.group=new Yd.CellGroup({cell:this,morph:F||H,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var f=a.neighbor,l=a.prepend;a=a.append;for(var r=[],v=this;v=v[f];)l&&(r=[v].concat($jscomp.arrayFromIterable(r))),a&&(r=[].concat($jscomp.arrayFromIterable(r),[v]));return r}},{key:"col",value:function(a){for(var f=this,l=a;0<l&&f;)f=f.right,
l--;if(!f)throw Error(a+" out of bounds! Last column was "+(a-l-1));return new Yd.LayoutColumn(f)}},{key:"row",value:function(a){for(var f=this,l=a;0<l&&f;)f=f.bottom,l--;if(!f)throw Error(a+" out of bounds! Last row was "+(a-l-1));return new Yd.LayoutRow(f)}},{key:"extent",get:function(){return Yd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return Yd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return Yd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return Yd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return Yd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return Yd.pt(Yd.arr.sum(this.before.map(function(a){return a.width})),Yd.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],d,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45531,end:49183})}(void 0);Yd.LayoutCell=WI;Yd.LayoutCell=WI;Yd.LayoutCell=WI;var $z=Ca("aq",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),k=d.hasOwnProperty("GridLayout")&&"function"===typeof d.GridLayout?d.GridLayout:d.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],f=[],l=[],r={},v=$jscomp.makeIterator(Yd.arr.range(0,this.rowCount-1)),y=v.next();!y.done;y=v.next())a.push(this.grid.row(y.value).items.map(function(E){return E.group.state.morph?E.group.state.morph.name||E.group.state.morph:null}));v=$jscomp.makeIterator(Yd.arr.range(0,this.rowCount-1));for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.grid.row(y);f.push(y,Object.assign({},
A.fixed?{fixed:A.length}:{height:A.height},{paddingTop:A.paddingTop,paddingBottom:A.paddingBottom}))}v=$jscomp.makeIterator(Yd.arr.range(0,this.columnCount-1));for(y=v.next();!y.done;y=v.next())y=y.value,A=this.grid.col(y),l.push(y,Object.assign({},A.fixed?{fixed:A.length}:{},{paddingLeft:A.paddingLeft,paddingRight:A.paddingRight}));v=$jscomp.makeIterator(this.cellGroups);for(y=v.next();!y.done;y=v.next())y=y.value,y.state.morph&&(r["string"===typeof y.state.morph?y.state.morph:y.morph.name]=Yd.obj.select(y,
["align","resize"]));return{autoAssign:!1,grid:a,rows:f,columns:l,groups:r}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+Yd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,f=this.ensureGrid(this.config).map(function(l){return new Yd.LayoutRow(new Yd.LayoutCell({row:l,layout:a}))});f.reduce(function(l,r){return l.attachTo(r)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=f[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var f in a){var l=this.getCellGroupFor(this.container.getSubmorphNamed(f)),r=a[f],v=r.resize,y=void 0===r.align?"topLeft":r.align;r=void 0===r.alignedProperty?"topLeft":r.alignedProperty;l&&(void 0!=v&&(l.resize=v),l.align=y,l.alignedProperty=r)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,f=void 0===a.columns?[]:a.columns,l=$jscomp.makeIterator(Yd.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Object.assign(this.row(a),r)}f=$jscomp.makeIterator(Yd.arr.toTuples(f,2));for(a=f.next();!a.done;a=f.next())l=$jscomp.makeIterator(a.value),a=l.next().value,r=l.next().value,Object.assign(this.col(a),r)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(f){return f.resize=a});this.apply()}},{key:"notInLayout",get:function(){return Yd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){Yd.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,f,l;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(r){r.prepareForResize(a.container.height);f=a.grid.totalStaticHeight;return r}).forEach(function(r){r.fixed||
(r.length=r.proportion*Math.max(0,a.container.height-f))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(r){r.prepareForResize(a.container.width);l=a.grid.totalStaticWidth;return r}).forEach(function(r){r.fixed||(r.length=r.proportion*Math.max(0,a.container.width-l))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,Zb._get(Object.getPrototypeOf(k.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=Yd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(f){f&&f.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),f=a.next();!f.done;f=a.next())if(f=f.value,f.morph&&!f.bounds().equals(f.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(f){return f.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var f=this.getCellGroupFor(a);f&&(f.morph=null);Zb._get(Object.getPrototypeOf(k.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var f=this,l=a.grid,r=a.rowCount,v=a.columnCount;l=l||[[]];r=r||l.length;v=v||Yd.arr.max(l.map(function(y){return y.length}));l.length<r&&(l=l.concat(Yd.arr.withN(r-l.length,
[])));return l=l.map(function(y){y.length<v&&(y=y.concat(Yd.arr.withN(v-y.length,null)));return y.map(function(A){return A&&A.isMorph?(A.owner!=f.container&&f.container.addMorph(A),A):A?f.container.getSubmorphNamed(A)||A:A})})}},{key:"autoAssign",value:function(a){var f=this;a.forEach(function(l){var r,v=Infinity;f.cellGroups.forEach(function(y){y.morph||y.cells.forEach(function(A){A=A.position.dist(l.position);A<v&&(r=y,v=A)})});r&&(r.morph=l)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:49192,end:56229})}(Yd.Layout));Yd.GridLayout=$z;Yd.GridLayout=$z;Yd.GridLayout=$z;var nca=Object.freeze({__proto__:null,CustomLayout:OI,SnapLayout:PI,VerticalLayout:Zz,HorizontalLayout:Zt,ProportionalLayout:QI,CenteredTilingLayout:RI,TilingLayout:SI,
CellGroup:TI,LayoutColumn:UI,LayoutRow:VI,LayoutCell:WI,GridLayout:$z});Ca("bT",nca);var Te=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");Te.getAllPartResources=bV;Te.loadPart=PM;Te.savePart=cV;Te.interactivelySavePart=xH;Te.interactivelyLoadObjectFromPartsBinFolder=dV;Te.interactivelySaveObjectToPartsBinFolder=eV;Te.saveObjectToPartsbinFolder=fV;Te.loadObjectFromPartsbinFolder=QM;Te.buildCommitEditor=gV;Te.resource=Xb;Te.Resource=Eg;Te.registerExtension=qd;Te.Path=ci;Te.obj=dg;
Te.date=Gv;Te.promise=Hg;Te.HorizontalLayout=Zt;Te.VerticalLayout=Zz;Te.morph=de;Te.pt=di;Te.Color=ng;Te.Rectangle=ye;Te.connect=Li;Te.emit=Kk;Te.SnapshotPackageHelper=sP;Te.ensureCommitInfo=sH;Te.MorphicDB=$v;Te.createMorphSnapshot=YA;Te.getClassName=fm;Te.getAllPartResources=bV;Te.getAllPartResources=bV;Te.loadPart=PM;Te.loadPart=PM;Te.savePart=cV;Te.savePart=cV;Te.interactivelySavePart=xH;Te.interactivelySavePart=xH;Te.interactivelyLoadObjectFromPartsBinFolder=dV;Te.interactivelyLoadObjectFromPartsBinFolder=
dV;Te.interactivelySaveObjectToPartsBinFolder=eV;Te.interactivelySaveObjectToPartsBinFolder=eV;Te.saveObjectToPartsbinFolder=fV;Te.saveObjectToPartsbinFolder=fV;Te.loadObjectFromPartsbinFolder=QM;Te.loadObjectFromPartsbinFolder=QM;var DY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("SnapshotEditor")&&"function"===typeof d.SnapshotEditor?d.SnapshotEditor:d.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,l){this.commit=a;this.snapshot=f;this._db=l}},{key:"db",get:function(){return this._db||Te.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,f){var l=this,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){r=a;v=r._id;y=r.name;A=r.type;if(!v)throw Error("No id of commit, cannot save!");return E.yield(l.db.commit(A,y,f,a,void 0,v),2)}a=E.yieldResult;l.commit=
a;l.snapshot=f;return E.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,f){var l=this,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){r=Te.promise.deferred();v=r.promise;y=r.resolve;A=r.reject;E=l;Object.assign(Te.buildCommitEditor(),{commit:Object.assign({},l.commit,{},a),cancel:function(){(this.getWindow()||this).remove();A("canceled")},accept:function(){var H=this,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return L.setCatchFinallyBlocks(2),
L.yield(E.saveModifiedSnapshot(H.commit,f),4);if(2!=L.nextAddress)return J=L.yieldResult,(H.getWindow()||H).remove(),y(H.commit=J),L.leaveTryBlock(0);O=L.enterCatchBlock();H.showError(O);A(O);L.jumpToEnd()})}}).openInWindow({title:"commit"});return F.return(v)})}},{key:"interactivelyEditMetadata",value:function(a){var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(f.interactivelySaveModifiedSnapshot(f.commit,f.snapshot),2);l=r.yieldResult;
"function"===typeof a&&a({commit:l,snapshot:f.snapshot});return r.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var f=this,l,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return l=f,r=l.commit,v=l.snapshot,y=r,A=y._id,E=y.name,F=y.type,L.yield(System.import("lively.ide/text-editor.js"),2);J=L.yieldResult;O=J.default;O.openURL("<"+F+"/"+E+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(Y){var S,
ea,qa,Fa,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:if(S=v){R.jumpTo(2);break}return R.yield(f.db.fetchSnapshot(void 0,void 0,A),3);case 3:S=R.yieldResult;case 2:ea=S;qa=JSON.stringify(ea,null,2);if(qa===H){R.jumpTo(4);break}return R.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(Fa=R.yieldResult,!Fa)return R.return({saved:!1,
message:"canceled"});case 4:return K=JSON.parse(Y.ui.contentText.textString),R.yield(f.interactivelySaveModifiedSnapshot(f.commit,K),6);case 6:return r=R.yieldResult,v=K,H=Y.ui.contentText.textString,Z={saved:!0,snapshot:K,commit:r},"function"===typeof a&&a(Z),R.return(Z)}})},customLoadContentAction:function(Y,S){var ea,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return(ea=v)?Fa.jumpTo(2):Fa.yield(f.db.fetchSnapshot(void 0,void 0,A),3);2!=Fa.nextAddress&&
(ea=Fa.yieldResult);qa=ea;return Fa.return({content:H=JSON.stringify(qa,null,2),url:F+"/"+E+".json"})})}});L.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var f=this,l,r,v,y,A,E,F,H,J,O,L,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:l=f;r=l.commit;v=l.snapshot;y=r;A=y._id;if(E=v){S.jumpTo(2);break}return S.yield(f.db.fetchSnapshot(void 0,void 0,A),3);case 3:E=S.yieldResult;case 2:return F=E,H=(new Te.SnapshotPackageHelper(F)).filesInPackages(),
J=H.map(function(ea){return{isListItem:!0,string:ea.url,value:ea}}),S.yield($world.filterableListPrompt("Select file to edit",J,{historyId:"object-serialization-debugger-hist"}),4);case 4:return O=S.yieldResult,L=$jscomp.makeIterator(O.selected),(Y=L.next().value)?S.return(f.interactivelyEditFileInSnapshotPackage(Y,a)):S.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,f,l){var r=this,v,y,A,E,F,H,J,O,L,Y,S,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:v=
r;y=v.snapshot;A=v.commit;E=A._id;F=A.name;H=A.type;if(J=y){qa.jumpTo(2);break}return qa.yield(r.db.fetchSnapshot(void 0,void 0,E),3);case 3:J=qa.yieldResult;case 2:return O=J,L=a.get(O),qa.yield(System.import("lively.ide/text-editor.js"),4);case 4:return Y=qa.yieldResult,S=Y.default,ea=S.openURL("<"+H+"/"+F+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",customSaveAction:function(Fa){var K,Z,R,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:K=
a.get(O);if(K===L){na.jumpTo(2);break}return na.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(Z=na.yieldResult,!Z)return na.return({saved:!1,message:"canceled"});case 2:return a.set(O,Fa.ui.contentText.textString),R=r,na.yield(r.interactivelySaveModifiedSnapshot(r.commit,O),4);case 4:return R.commit=na.yieldResult,U={commit:r.commit,snapshot:O,saved:!0},"function"===typeof f&&
f(U),na.return(U)}})},customLoadContentAction:function(Fa,K){return{content:a.get(O),url:a.url}}}),l&&ea.whenRendered().then(function(){return ea.lineNumber=l.row}),qa.return(ea)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9578,end:14797})}(void 0);Te.SnapshotEditor=DY;Te.SnapshotEditor=DY;Te.SnapshotEditor=DY;Te.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("PartResource")&&"function"===typeof d.PartResource?d.PartResource:d.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"dirList",value:function(a,f){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?r.yield(Te.resource(l.url.replace("part://","styleguide://")).dirList(a,f),2):r.return(r.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");})}},{key:"read",
value:function(){var a=this,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(Te.resource(a.url.replace("part://","styleguide://")).read(),2);case 2:f=E.yieldResult;if(!f.master){E.jumpTo(3);break}return E.yield(f.master.whenReady(),3);case 3:l=f.copy();l.isComponent=!1;l.name="a"+Te.getClassName(l);l.withAllSubmorphsDoExcluding(function(F){F!=l&&F.master||delete F._parametrizedProps},function(F){return F.master&&F!=l});r=l.master;
l.master=f;if(!l._pool.mastersInSubHierarchy){E.jumpTo(5);break}v=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);y=v.next();case 6:if(y.done){E.jumpTo(5);break}A=y.value;if(r==A){E.jumpTo(7);break}return E.yield(A.applyIfNeeded(!0),9);case 9:A.derivedMorph.ownerChain().includes(l)||A.derivedMorph.requestMasterStyling();case 7:y=v.next();E.jumpTo(6);break;case 5:return l.master.applyIfNeeded(!0),delete l._pool,l.withAllSubmorphsDo(function(F){if("function"===typeof F.onLoad)F.onLoad()}),E.return(l)}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14847,end:16621})})(Te.Resource);var EY={name:"part",matches:function(b){return b.match(Te.partURLRe)},resourceClass:Te.PartResource};Te.resourceExtension=EY;
Te.resourceExtension=EY;Te.resourceExtension=EY;Te.registerExtension(Te.resourceExtension);Te.buildCommitEditor=gV;Te.buildCommitEditor=gV;var $f=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");$f.loadWorldFromURL=RM;$f.loadWorldFromCommit=SM;$f.loadWorldFromDB=TM;$f.loadWorld=UM;$f.loadLocalConfig=function(){var b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),k.setCatchFinallyBlocks(2),
k.yield($f.resource(b.id).exists(),4);case 4:if(!k.yieldResult){k.jumpTo(5);break}return k.yield(b.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:k.leaveTryBlock(0);break;case 2:d=k.enterCatchBlock(),console.error("Error loading localconfig:",d),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+d),k.jumpToEnd()}})};$f.setupLivelyShell=function(b){var d,k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return v.yield(System.import("lively.shell/client-command.js"),3);case 3:return d=v.yieldResult,k=d.default,v.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=v.yieldResult,f=a.resourceExtension,l=b,r=l.l2lClient,k.installLively2LivelyServices(r),f.resourceClass.defaultL2lClient=r,$f.registerResourceExension(f),console.log("[lively] lively.shell setup"),v.jumpToEnd()}})};$f.setupLively2Lively=function(b){var d,k,a,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return d=
b.getCurrentUser(),k={world:b.name},d&&(k.userToken=d.token,k.userRealm=d.realm),r.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return r.yield(System.import("lively.2lively/client.js"),3);case 3:return a=r.yieldResult,f=a.default,r.yield(f.forLivelyInBrowser(k),4);case 4:return l=r.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?$f.reportWorldLoad(b,d):(l._onUserChange=function(v){l.isOnline()&&v.user&&(v=v.user,l.info=Object.assign({},l.info,
{userToken:v.token,userRealm:v.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},$f.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){$f.reportWorldLoad(b,d)}),l.on("registered",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("connected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var v=b.get("user flap");
v&&v.updateNetworkIndicator(l)}),l.on("disconnected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)})),r.return(l)}})};$f.interactivelySaveWorld=BE;$f.reportWorldLoad=function(b,d){d=d?d.name+" ("+(d.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(k){return console.warn("report-world-load failed: "+k)})};$f.resource=
Xb;$f.registerResourceExension=qd;$f.Color=ng;$f.Path=ci;$f.obj=dg;$f.date=Gv;$f.promise=Hg;$f.MorphicEnv=ps;$f.createMorphSnapshot=YA;$f.MorphicDB=$v;$f.ensureCommitInfo=sH;$f.pathForBrowserHistory=$e;$f.subscribe=gt;$f.emit=Kk;$f.defaultDirectory=MM;$f.ShellClientResource=Ro;$f.loadWorldFromURL=RM;$f.loadWorldFromURL=RM;$f.loadWorldFromCommit=SM;$f.loadWorldFromCommit=SM;$f.loadWorldFromDB=TM;$f.loadWorldFromDB=TM;$f.loadWorld=UM;$f.loadWorld=UM;$f.interactivelySaveWorld=BE;$f.interactivelySaveWorld=
BE;var zk=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");zk.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));b.next();var d=b.next().value;b.next();return JSON.parse(atob(d))};zk.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};zk.makeRequest=function(b,d,k,a){a=void 0===a?{}:a;d={method:void 0===d?"GET":d,mode:"cors"};k&&(d.body=k);d.redirect="follow";d.headers=
Object.assign({},a);return fetch(b,d)};zk.POST=function(b,d){var k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),l.yield(zk.makeRequest(b,"POST",d,{}),2);case 2:return k=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(k.text(),5);case 5:a=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(a&&"application/json"===k.headers.get("content-type"))try{f=JSON.parse(a)}catch(r){}if(!f)throw Error("Unexpected response: "+
a);return l.return(f)}})};var AC=Ca("bN",function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("User")&&"function"===typeof d.User?d.User:d.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.realm=f;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",
value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,f,l){var r=this,v,y,A,E,F,H,J,O,L,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){if(1==S.nextAddress)return v=r,y=v.email,A=v.createdAt,E=v.roles,F=v.name,H="register"===a?{password:f,email:y,createdAt:A,roles:E,name:F}:{password:f,name:F},S.yield(zk.POST(l+"/"+a,H),2);J=S.yieldResult;if(J.error)return S.return(J);O=J;L=O.token;Y=zk.jwtTokenDecode(L);E=Y.roles;A=Y.createdAt;y=Y.email;Object.assign(r,{roles:E,
createdAt:A,email:y,token:L});return S.return({status:J.status})})}},{key:"verify",value:function(){var a=this,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(zk.POST(a.realm+"/verify",{token:a.token}),2);f=r.yieldResult;l=f.error;return r.return(l?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",
value:function(a){var f=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!f.isLoggedIn)throw Error("To check password, user needs to login.");return y.yield(zk.POST(f.realm+"/check-password",{token:f.token,password:a}),2)}l=y.yieldResult;r=l.error;v=l.status;if(r)throw Error(r);return y.return(v)})}},{key:"modify",value:function(a){var f=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(zk.POST(f.realm+
"/modify",{token:f.token,changes:a}),2);l=J.yieldResult;r=l.error;v=l.status;y=l.token;if(r)return J.return({error:r});y&&(A=zk.jwtTokenDecode(y),E=A.roles,F=A.createdAt,H=A.email,Object.assign(f,{roles:E,createdAt:F,email:H,token:y}));return J.return({status:v})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return zk.guestUser}},
{key:"named",value:function(a,f){var l=a+"-"+f,r=zk.userMap.get(l);r||(r=new this(a,f),zk.userMap.set(l,r));return r}},{key:"fromToken",value:function(a,f){var l=zk.jwtTokenDecode(a),r=l.roles,v=l.createdAt,y=l.email;return Object.assign(this.named(l.name,f),{roles:r,createdAt:v,email:y,token:a})}},{key:"clearCache",value:function(){zk.userMap=new Map}}],d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));zk.User=AC;zk.User=AC;zk.User=AC;var BC=function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("GuestUser")&&"function"===typeof d.GuestUser?d.GuestUser:d.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",
value:function(){return!1}},{key:"loginOrRegister",value:function(a,f,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){throw Error("Guest user cannot "+a+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},
{start:3476,end:3702})}(zk.User);zk.GuestUser=BC;zk.GuestUser=BC;zk.GuestUser=BC;zk.userMap=zk.userMap||new Map;zk.guestUser=zk.guestUser||zk.GuestUser.named("guest-"+zk.guid(),null);var $t=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");$t.User=AC;$t.GuestUser=BC;$t.emit=Kk;var FY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),k=d.hasOwnProperty("UserRegistry")&&"function"===typeof d.UserRegistry?d.UserRegistry:d.UserRegistry=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,f){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a.isGuestUser?y.jumpTo(2):y.yield(a.login(f),3);if(2!=
y.nextAddress&&(r=y.yieldResult,v=r.error))throw Error(v);l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"logout",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{f.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(r){}a=a&&a.isGuestUser?a:$t.User.guest;$t.emit("lively.user/userchanged",{user:a},Date.now(),System);return l.return(a)})}},{key:"register",value:function(a,f){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return y.yield(a.register(f),2)}r=y.yieldResult;if(v=r.error)throw Error(v);l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var f=localStorage["lively.user"]||sessionStorage["lively.user"];if(f)return f=JSON.parse(f),f.isGuest?$t.GuestUser.named(f.name,null):$t.User.fromToken(f.token,a)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?
!1:$t.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;$t.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(f){return console.warn("Could not save user into local/sessionStorage: "+
f),!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],d,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);FY=$t.UserRegistry;var GP=Ca("bM",FY);
$t.default=FY;var nF=lively.FreezerRuntime.recorderFor("lively.user/index.js");nF.User=AC;nF.ClientUser=AC;nF.GuestUser=BC;nF.GuestUser=BC;nF.default=GP;nF.UserRegistry=GP;var $va=Object.freeze({__proto__:null,ClientUser:AC,GuestUser:BC,UserRegistry:GP}),ig=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");ig.bowser=vs;ig.Rectangle=ye;ig.Color=ng;ig.pt=di;ig.arr=Lf;ig.promise=Hg;ig.Path=ci;ig.obj=dg;ig.signal=em;ig.config=Ul;ig.MorphicEnv=ps;ig.Morph=kl;ig.TooltipViewer=mF;ig.Tooltip=xC;
ig.loadWorldFromURL=RM;ig.loadWorldFromDB=TM;ig.loadWorldFromCommit=SM;ig.loadWorld=UM;ig.touchInputDevice=nr;ig.UserRegistry=GP;ig.emit=Kk;ig.resource=Xb;ig.loadMorphFromSnapshot=iv;var sx=Ca("aF",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),k=d.hasOwnProperty("World")&&"function"===typeof d.World?d.World:d.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new ig.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,a,f,l,r);this._renderer=null;this._tooltipViewer=new ig.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,a,f,l,r);if(a.props.submorphs)for(a=a.props.submorphs.value,f=a.length;f--;)l.refForId(a[f].id).realObj.isHand&&ig.arr.removeAt(a,f)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(Zb._get(Object.getPrototypeOf(k.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:f=function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():
a.windowBounds().union(a.submorphBounds(function(A){return!A.isEpiMorph&&!A.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return A.return(!a.windowBounds().extent().equals(a.extent))})},r=0;case 2:if(!(v=5>r)){y.jumpTo(4);break}return y.yield(l(),5);case 5:v=y.yieldResult;case 4:if(!v){y.jumpTo(3);break}r++;f();y.jumpTo(2);break;case 3:return a.relayout(),
y.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.return(!0)})}},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(f){return f instanceof ig.Hand&&f.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},
{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a,f){f=void 0===f?!1:f;var l=this.existingHandForPointerId(a);return l?l:!l&&this.firstHand&&f?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new ig.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;
var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return ig.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return ig.UserRegistry.current.loadUserFromLocalStorage(ig.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",
value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&ig.config.altClickDefinesThat){var f=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=f},100);f.show();a.stop();console.log('Set global "that" to '+f)}}},{key:"onMouseWheel",
value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(f){if("function"===typeof f.onWorldUnload)f.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));
a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,f=a.positionChangedTime,l=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var r=document.documentElement;500>Date.now()-f&&!ig.bowser.firefox?(r.scrollLeft=l,r.scrollTop=a):(this.setProperty("scroll",ig.pt(r.scrollLeft,r.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var f=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return y.yield(f.whenRendered(),2);if(3!=y.nextAddress)return f._cachedWindowBounds=null,"elastic"!==f.resizePolicy?y.jumpTo(3):y.yield(f.execCommand("resize to fit window"),3);f.updateVisibleWindowMorphs();l=$jscomp.makeIterator(f.submorphs);for(r=l.next();!r.done;r=l.next())if(v=r.value,"function"===typeof v.onWorldResize)v.onWorldResize(a);y.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var f=this.focusedMorph,l=ig.arr.findAndGet(ig.arr.without([f].concat($jscomp.arrayFromIterable(f.ownerChain())),
this),function(r){return ig.arr.findAndGet(r.keyhandlers,function(v){return(v=v.eventCommandLookup(r,a))?{command:v,morph:r}:null})})||{};f=l.command;l=l.morph;return f?l.execCommand(f):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var f=1/this.scale;return this._cachedWindowBounds=
new ig.Rectangle(a.scrollX*f,a.scrollY*f,(a.innerWidth||this.width)*f,(a.innerHeight||this.height)*f)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",
after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var f=this,l=ig.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof l&&(a=l);this.setProperty("showsUserFlap",
a);this.whenReady().then(function(){return System.import("lively.user/morphic/user-ui.js")}).then(function(r){return r.UserUI[a?"showUserFlap":"hideUserFlap"](f)})}}}}},{key:"defaultWorld",value:function(){return ig.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(a,f,l){f=void 0===f?this.defaultWorld():f;l=void 0===l?{}:l;return ig.loadWorldFromURL(a,f,l)}},{key:"loadWorld",value:function(a,f,l){f=void 0===f?this.defaultWorld():f;l=void 0===l?{}:l;return ig.loadWorld(a,f,l)}},
{key:"loadFromCommit",value:function(a,f,l){f=void 0===f?this.defaultWorld():f;l=void 0===l?{}:l;return ig.loadWorldFromCommit(a,f,l)}},{key:"loadFromDB",value:function(a,f,l,r){l=void 0===l?this.defaultWorld():l;r=void 0===r?{}:r;return ig.loadWorldFromDB(a,f,l,r)}},{key:"loadFromResource",value:function(a,f,l){f=void 0===f?this.defaultWorld():f;l=void 0===l?{}:l;var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return r=ig,v=r.loadWorld,y=ig,
A=y.loadMorphFromSnapshot,E.yield(a.readJson(),4);case 4:return E.yield(A.call(y,E.yieldResult),3);case 3:return E.yield(v.call(r,E.yieldResult,f,l),2);case 2:return E.return(E.yieldResult)}})}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:774,end:11291})}(ig.Morph));ig.World=sx;ig.World=
sx;ig.World=sx;var oF=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),k=d.hasOwnProperty("Hand")&&"function"===typeof d.Hand?d.Hand:d.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",
value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,a,f,l,r);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",
set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,f){return f}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(a,f){a=void 0===a?!0:a;var l=this,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(!l.grabbedMorphs.length)return L.return();
l.env.eventDispatcher.cancelGrab(l,f);r=[];v=$jscomp.makeIterator(l.grabbedMorphs);for(y=v.next();!y.done;y=v.next())A=y.value,E=l._grabbedMorphProperties.get(A)||{},F=E.prevOwner,H=E.prevIndex,J=E.prevPosition,O=E.pointerAndShadow,Object.assign(A,O),F?(F.addMorphAt(A,H),a?r.push(A.animate({position:J})):A.position=J):A.remove();return L.return(r.length?Promise.all(r):null)})}},{key:"grab",value:function(a){var f=this;if(ig.obj.isArray(a))return a.forEach(function(l){return f.grab(l)});this.withMetaDo({metaInteraction:!0},
function(){f._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:ig.obj.select(a,["dropShadow","reactsToPointer"])});a.reactsToPointer=!1;a.dropShadow=!0;f.addMorph(a)});ig.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var f=this;this.withMetaDo({metaInteraction:!0},function(){f.grabbedMorphs.forEach(function(l){try{var r=(f._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,r);
ig.signal(f,"drop",l);l.onBeingDroppedOn(f,a)}catch(v){console.error(v),f.world().showError("Error dropping "+l+" onto "+a+":\n"+v.stack),l.owner!==a&&f.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,f,l){var r=this;a=void 0===a?this.globalPosition:a;f=void 0===f?this.grabbedMorphs:f;a=this.world().morphsContainingPoint(a);return ig.arr.sortBy(a,function(v){return[v].concat($jscomp.arrayFromIterable(v.ownerChain())).find(function(y){return ig.Path("owner.isWorld").get(y)&&y.hasFixedPosition})?
0:1}).find("function"===typeof l?function(v,y){return!r.isAncestorOf(v)&&v.acceptsDrops&&!f.includes(v)&&f.every(function(A){return A.wantsToBeDroppedOn(v)})&&l(v,y)}:function(v){return!r.isAncestorOf(v)&&v.acceptsDrops&&f.every(function(y){return y.wantsToBeDroppedOn(v)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:ig.touchInputDevice?ig.Color.transparent:ig.Color.orange},
extent:{defaultValue:ig.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11300,end:15294})}(ig.Morph);ig.Hand=oF;ig.Hand=oF;ig.Hand=oF;var awa=
Object.freeze({__proto__:null,World:sx,Hand:oF}),Fl=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Fl.comparePosition=hV;Fl.lessPosition=Cv;Fl.lessEqPosition=CE;Fl.eqPosition=Dv;Fl.minPosition=DE;Fl.maxPosition=EE;Fl.comparePosition=hV;Fl.comparePosition=hV;Fl.lessPosition=Cv;Fl.lessPosition=Cv;Fl.lessEqPosition=CE;Fl.lessEqPosition=CE;Fl.eqPosition=Dv;Fl.eqPosition=Dv;Fl.minPosition=DE;Fl.minPosition=DE;Fl.maxPosition=EE;Fl.maxPosition=EE;var $g=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");
$g.lessPosition=Cv;$g.lessEqPosition=CE;$g.eqPosition=Dv;$g.minPosition=DE;$g.maxPosition=EE;var aA=Ca("bo",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),k=d.hasOwnProperty("Range")&&"function"===typeof d.Range?d.Range:d.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{start:{row:0,
column:0},end:{row:0,column:0}}:a,l=f.start;a=l.row;l=l.column;var r=f.end;f=r.row;r=r.column;if(f<a||f===a&&r<l)l=$jscomp.makeIterator([a,l,f,r]),f=l.next().value,r=l.next().value,a=l.next().value,l=l.next().value;this.start={row:a,column:l};this.end={row:f,column:r}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?$g.eqPosition(this.start,
a.start)&&$g.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new $g.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new $g.Range(a));return $g.lessPosition(this.end,a.start)||$g.lessPosition(a.end,this.start)?this:$g.Range.fromPositions($g.minPosition(this.start,a.start),$g.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new $g.Range(a));var f=$g.Range.compare(this,
a);return 0===f?$g.Range.fromPositions(this.start,this.start):5<=Math.abs(f)?this:0>f?$g.Range.fromPositions(this.start,a.start):$g.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new $g.Range(a));var f=$g.Range.compare(this,a),l=0>f?this:a;a=0>f?a:this;switch(Math.abs(f)){case 0:case 1:return new $g.Range(l);case 2:case 3:return new $g.Range(a);case 4:return $g.Range.fromPositions(a.start,l.end);case 5:return $g.Range.at(a.start);case 6:return $g.Range.at(l.end)}}},
{key:"subtract",value:function(a){a.isRange||(a=new $g.Range(a));switch($g.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new $g.Range(this)];case -1:case 0:case 2:case 3:return[$g.Range.at(this.start)];case 1:case 4:return[$g.Range.fromPositions(a.end,this.end)];case -4:case -3:return[$g.Range.fromPositions(this.start,a.start)];case -2:return[$g.Range.fromPositions(this.start,a.start),$g.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return $g.lessEqPosition(this.start,
a)&&$g.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,f=this.end;return"Range("+a.row+"/"+a.column+" -> "+f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort($g.Range.compare)}},{key:"compare",value:function(a,f){var l=a.start,r=a.end,v=f.start,y=f.end;return $g.lessPosition(l,v)?$g.lessPosition(r,v)?-6:$g.eqPosition(r,v)?-5:$g.lessPosition(r,y)?-4:$g.eqPosition(r,y)?-3:-2:$g.eqPosition(l,
v)?$g.eqPosition(r,y)?0:$g.lessPosition(r,y)?-1:1:-1*$g.Range.compare(f,a)}},{key:"at",value:function(a){return new this({start:a,end:a})}},{key:"fromPositions",value:function(a,f){return new this({start:a,end:f})}},{key:"create",value:function(a,f,l,r){return new this({start:{row:a,column:f},end:{row:l,column:r}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===
typeof a.end.column:!1}}],d,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));$g.Range=aA;$g.Range=aA;$g.Range=aA;var HP=new $g.Range;$g.defaultRange=HP;$g.defaultRange=HP;$g.defaultRange=HP;var jk=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");
jk.lessPosition=Cv;jk.Range=aA;jk.defaultRange=HP;jk.config=Ul;jk.string=Ih;jk.arr=Lf;jk.signal=em;var IP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("Selection")&&"function"===typeof d.Selection?d.Selection:d.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.textMorph=
a;this.initialize(f)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var f=jk.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+f);this.endAnchor=this.textMorph.addAnchor("selection-end-"+f);this.range=jk.Range.isValidLiteral(a)?a:jk.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();
this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,f){var l=a.start,r=l.row;l=l.column;var v=a.end,y=v.row;v=v.column;var A=f.start,E=A.row;A=A.column;var F=f.end,H=F.row;F=F.column;return r<E||r===E&&l<A?y<E||y===E&&v<A?"separate":y===E&&v===A?E===H&&A===F?"overlapping":"bordering":"overlapping":r===E&&l===A?y===H&&v===F?"equal":"overlapping":this.compareRangesForMerge(f,a)}},{key:"mergeWith",value:function(a){if(!a||
!a.isSelection)return!1;var f=this.compareRangesForMerge(this.range,a.range);if("separate"===f||"bordering"===f)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(a){if(a){var f=a,l=f.start;f=f.end;if(void 0!==l&&void 0!==f){var r=this.textMorph.document;"number"===typeof l&&(a.start=l=r.indexToPosition(l));"number"===typeof f&&(a.end=f=r.indexToPosition(f));if(jk.Range.isValidLiteral(a)){l=
r.clipPositionToLines(l);f=r.clipPositionToLines(f);if(this._isReverse=jk.lessPosition(f,l))f=$jscomp.makeIterator([f,l]),l=f.next().value,f=f.next().value;a.start=l;a.end=f;a.isRange||(a=new jk.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),
jk.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=jk.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=jk.Range.fromPositions(this.start,
a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},
{key:"replace",value:function(a,f,l,r){var v=this.range,y=this.textMorph,A=this.isReverse();this.range=y.replace(v,a,f,l,r);A&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=
void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var f=this.textMorph.document,l=f.positionToIndex(this.end);a=Math.min(l,f.positionToIndex(this.start)-a);l=this.isReverse();this.start=f.indexToPosition(a);this._isReverse=l;return this}},{key:"growRight",value:function(a){var f=this.textMorph.document,l=f.positionToIndex(this.start);a=Math.max(l,f.positionToIndex(this.end)+
a);l=this.isReverse();this.end=f.indexToPosition(a);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(a,f){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===f?!1:f;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};
this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(a,f){return this.goUp(void 0===a?1:a,f,!0)}},{key:"selectDown",value:function(a,f){return this.selectUp(-(void 0===a?1:a),f)}},{key:"goUp",value:function(a,
f,l){a=void 0===a?1:a;l=void 0===l?!1:l;if(0===a)return this;var r=this._goalColumn,v=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===f?!1:f,r,v);l||(this.anchor=this.lead);this._goalColumn=r;this._goalX=v;return this}},{key:"goDown",value:function(a,f){return this.goUp(-(void 0===a?1:a),f)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&
this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var f=jk.config.text.cursorBlinkPeriod;if(f){var l=this.textMorph,r=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){r||(r=l.env.renderer.getNodeForMorph(l));if(r){a._cursorVisible=!a._cursorVisible;var v=r.className.split(" "),
y=v.indexOf("hidden-cursor");a._cursorVisible&&-1<y&&(v.splice(y,1),r.className=v.join(" "));a._cursorVisible||-1!==y||(r.className=[].concat($jscomp.arrayFromIterable(v),["hidden-cursor"]).join(" "))}},1E3*f)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var f=a.className.split(" "),l=f.indexOf("hidden-cursor");-1<l&&(f.splice(l,
1),a.className=f.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,f=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:224,end:9243})}(void 0);jk.Selection=IP;jk.Selection=IP;jk.Selection=IP;var JP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("MultiSelection")&&"function"===typeof d.MultiSelection?d.MultiSelection:d.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"initialize",value:function(a){this._selections=[new jk.Selection(this.textMorph,
a)]}},{key:"__deserialize__",value:function(a,f){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var f=this._selections?this._selections.filter(function(l){return!a.includes(l)}):[];this._selections=a;f.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return jk.arr.last(this.selections)}},
{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(f){return f.uninstall()});this.selections=jk.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){jk.arr.without(this.selections,this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=
a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",
get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(f){return f.text=a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},
{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();
return this}},{key:"selectLine",value:function(a,f){this.includingLineEnd=f;this.defaultSelection.selectLine(a,f);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,f){this.defaultSelection.selectUp(a,f);return this}},{key:"selectDown",value:function(a,f){this.defaultSelection.selectDown(a,
f);return this}},{key:"goUp",value:function(a,f){return this.defaultSelection.goUp(a,f)}},{key:"goDown",value:function(a,f){return this.defaultSelection.goDown(a,f)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},
{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),f=a.length-1;0<=f;f--)for(var l=a.length-1;0<=l;l--)if(f!==l&&a[l].mergeWith(a[f])){a.splice(f,1);break}this.selections=a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var f=0;f<a.length;f++){var l=this.selections[f];l?l.range=a[f]:this.addRange(a[f],!1)}this.removeSelections(f);
this.mergeSelections()}},{key:"addRange",value:function(a,f){f=void 0===f?!0:f;this.selections.push(new jk.Selection(this.textMorph,a));f&&this.mergeSelections();return jk.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9252,end:13920})}(jk.Selection);jk.MultiSelection=JP;jk.MultiSelection=JP;jk.MultiSelection=JP;var Ch=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Ch.shallowEquals=iV;Ch.concatAttributePair=VM;Ch.joinTextAttributes=WM;Ch.splitTextAndAttributesAt=XM;Ch.splitTextAndAttributesAtColumns=YM;Ch.concatTextAndAttributes=ZM;Ch.modifyAttributesInRange=$M;Ch.textAndAttributesWithSubRanges=aN;Ch.textAndAttributesDo=function(b,d){for(var k=0;k<b.length;k+=2)d(b[k],
b[k+1])};Ch.splitTextAndAttributesIntoLines=yH;Ch.eqPosition=Dv;Ch.lessPosition=Cv;Ch.shallowEquals=iV;Ch.shallowEquals=iV;Ch.concatAttributePair=VM;Ch.concatAttributePair=VM;Ch.joinTextAttributes=WM;Ch.joinTextAttributes=WM;Ch.splitTextAndAttributesAt=XM;Ch.splitTextAndAttributesAt=XM;Ch.splitTextAndAttributesAtColumns=YM;Ch.splitTextAndAttributesAtColumns=YM;Ch.concatTextAndAttributes=ZM;Ch.concatTextAndAttributes=ZM;Ch.modifyAttributesInRange=$M;Ch.modifyAttributesInRange=$M;Ch.textAndAttributesWithSubRanges=
aN;Ch.textAndAttributesWithSubRanges=aN;Ch.splitTextAndAttributesIntoLines=yH;Ch.splitTextAndAttributesIntoLines=yH;var ee=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");ee.arr=Lf;ee.num=Em;ee.string=Ih;ee.lessEqPosition=CE;ee.minPosition=DE;ee.maxPosition=EE;ee.lessPosition=Cv;ee.eqPosition=Dv;ee.concatTextAndAttributes=ZM;ee.splitTextAndAttributesAtColumns=YM;ee.splitTextAndAttributesIntoLines=yH;ee.joinTextAttributes=WM;ee.modifyAttributesInRange=$M;ee.concatAttributePair=
VM;ee.splitTextAndAttributesAt=XM;ee.objectReplacementChar="\ufffd";ee.objectReplacementChar="\ufffd";ee.objectReplacementChar="\ufffd";ee.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("TreeNode")&&"function"===typeof d.TreeNode?d.TreeNode:d.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,f=[];a;)f.push(a),a=a.parent;return f}},{key:"traverse",value:function(a){var f=[a.call(null,this)];if(this.isLeaf)return f;for(var l=0;l<this.children.length;l++)f.push.apply(f,$jscomp.arrayFromIterable(this.children[l].traverse(a)));
return f}},{key:"consistencyCheck",value:function(){var a=[],f=this.isRoot,l=this.isLeaf,r=this.children,v=this.size,y=this.stringSize,A=this.height,E=this.width,F=this.options,H=F.maxLeafSize,J=F.maxNodeSize,O=F.minLeafSize;F=F.minNodeSize;f||0!==v||a.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(r))return a.push({error:this+".children is not an array but "+r}),a;var L=ee.arr.sum(ee.arr.pluck(r,"size"));L!=v&&a.push({error:"Sum of child sizes is not size of "+this+": "+L+
" != "+v});v=ee.arr.sum(ee.arr.pluck(r,"stringSize"));v!=y&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+v+" != "+y});y=ee.arr.sum(ee.arr.pluck(r,"height"));Number.parseInt(y)!=Number.parseInt(A)&&a.push({error:"Sum of child Height is not Height of "+this+": "+y+" != "+A});A=r.length?Math.max.apply(null,ee.arr.pluck(r,"width")):0;(r.find(function(Y){return Y.isLine&&Y.hasEstimatedExtent})?Number.parseInt(A)>Number.parseInt(E):Number.parseInt(A)!=Number.parseInt(E))&&a.push({error:"max width of children of "+
this+" is not node width: "+A+" != "+E});E=l?H:J;!f&&r.length>E&&a.push({error:"children count of "+this+" expected to be between "+(l?O:F)+" and "+E+" but is "+r.length});for(f=0;f<r.length;f++)(O=r[f])?(l&&!O.isLine?a.push({error:"child "+f+" of leaf "+this+" is not a line!"}):!l&&O.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==O.parent&&a.push({error:"child.parent is "+O.parent+" but should be "+this})):a.push({error:"child "+f+" of "+this+" is nullish!"});a.push.apply(a,
$jscomp.arrayFromIterable(ee.arr.flatmap(r,function(Y){return Y.consistencyCheck()})));return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
k=d.hasOwnProperty("InnerTreeNode")&&"function"===typeof d.InnerTreeNode?d.InnerTreeNode:d.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=
a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,f,l){this.size+=a;this.height+=f;this.stringSize+=l;for(var r=0,v=0;v<this.children.length;v++){var y=this.children[v].width;y>r&&(r=y)}this.width=r;this.parent&&this.parent.resize(a,f,l)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),a;for(var f=0;f<this.children.length;f++)this.children[f].lines(a);
return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var f=0;f<this.children.length;f++){var l=this.children[f],r=l.size;if(a<r)return l.findRow(a);a-=r}return null}},{key:"findLineByVerticalOffset",value:function(a,f,l){f=void 0===f?0:f;l=void 0===l?0:l;if(0>a||a>this.height)return null;for(var r=0;r<this.children.length;r++){var v=this.children[r],y=v.height;if(a<=y)return this.isLeaf?{line:v,offset:a,y:f,row:l}:v.findLineByVerticalOffset(a,
f,l);a-=y;f+=y;l+=v.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,f){f=void 0===f?0:f;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),f;if(this.isLeaf){for(var l=0;l<Math.min(a,this.children.length);l++)f+=this.children[l].height;return f}for(l=0;l<this.children.length;l++){var r=this.children[l],v=r.size;if(a<v)return r.computeVerticalOffsetOf(a,f);a-=v;f+=r.height}return f}},{key:"ensureLine",value:function(a){a||(a="");var f="string"===
typeof a;return!f&&a.isLine?(a.parent=this,a):new ee.Line({parent:this,width:f?0:a.width||0,height:f?0:a.height||0,textAndAttributes:f?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,f){f=void 0===f?this.size:f;var l=this.children,r=this.options;if(this.isLeaf){var v=[],y=0,A=0;for(r=0;r<a.length;r++){var E=this.ensureLine(a[r]);v.push(E);y+=E.height;A+=E.stringSize;l.splice(f++,0,E)}this.resize(v.length,y,A);this.balanceAfterGrowth();return v}0===l.length&&l.push(new ee.InnerTreeNode({parent:this,
children:[],size:0,stringSize:0,width:0,height:0,options:r}));for(r=0;r<l.length;r++){v=l[r];y=v.size;if(f<=y)return v.insert(a,f);f-=y}f=l[r-1];return f.insert(a,f.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(a,f,l){for(var r=this.withParents(),v,y=0;a;){if(r.includes(a)){v=a;break}f(a,y++);a=a.parent}f=r.indexOf(v);0>f&&(f=r.length);r=r.slice(0,f);for(f=0;f<r.length;f++)l(r[f],f)}},{key:"findLineWithTextIndex",value:function(a,f){f=void 0===f?0:f;if(this.isLeaf){for(var l=0;l<
this.children.length;l++){var r=this.children[l],v=r.stringSize;if(a<v)return{line:r,column:a,row:f};a-=v;f++}a=ee.arr.last(this.children);return{line:a,row:f-1,column:a.stringSize-1}}for(r=l=0;r<this.children.length;r++){v=this.children[r];var y=v.stringSize;if(a<l+y)return v.findLineWithTextIndex(a-l,f);f+=v.size;l+=y}return ee.arr.last(this.children).findLineWithTextIndex(a-l)}},{key:"findLeafs",value:function(a,f,l){l=void 0===l?0:l;if(a>l+this.size||f<l)return[];if(this.isLeaf){a=Math.max(0,
a-l);var r=this.children.length-1;f=Math.min(r,f-l);l=!1;0===a&&f===r&&(l=!0,f=r);return[{node:this,firstLine:a,lastLine:f,full:l}]}r=[];for(var v=0;v<this.children.length;v++){var y=this.children[v];r.push.apply(r,$jscomp.arrayFromIterable(y.findLeafs(a,f,l)));l+=y.size}return r}},{key:"removeFromToInRoot",value:function(a,f,l){var r=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>f&&(f=$jscomp.makeIterator([f,a]),a=f.next().value,f=f.next().value);var v=this.size,
y=this.options.minLeafSize,A=this.findLeafs(a,f),E=A.shift();f=A.pop();var F=[],H=!1,J=!1;if(!(a>=v)){f&&E.node===f.node&&(f=null);E.full?(l&&l.log("Removing complete first line "+E),A.push(E)):H=E.node.children.length-(E.lastLine-E.firstLine+1)<y;f&&(f.full?(l&&l.log("Removing complete last line "+f),A.push(f)):(J=f,J=J.node.children.length-(J.lastLine-J.firstLine+1)<y));if(H||J){var O=(O=E.node.children[0].prevLine())?O.parent:null;var L=(L=ee.arr.last(f?f.node.children:E.node.children).nextLine())?
L.parent:null}for(a=0;a<A.length;a++){y=A[a].node;v=y.children.length;for(var Y=0,S=0,ea=0;ea<v;ea++){var qa=y.children[ea];Y+=qa.height;S+=qa.stringSize;qa.parent=null}y.children.length=0;y.resize(-v,-Y,-S);if(v=y.parent)y.parent=null,v.children.splice(v.children.indexOf(y),1),F.includes(v)||F.push(v)}if(!E.full){y=E.firstLine;A=E.node;a=E.lastLine-y+1;y=A.children.splice(y,a);for(S=Y=v=0;S<y.length;S++)ea=y[S],v+=ea.height,Y+=ea.stringSize,ea.parent=null;A.resize(-a,-v,-Y)}if(f&&!f.full){a=f;y=
a.firstLine;A=a.node;a=a.lastLine-y+1;y=A.children.splice(y,a);for(S=Y=v=0;S<y.length;S++)ea=y[S],v+=ea.height,Y+=ea.stringSize,ea.parent=null;A.resize(-a,-v,-Y)}l&&l.dump(""+this.print(!1));H&&E.node.balanceByMergeOrTheft(O,!f||f.full?L:f.node,l);f&&J&&f.node.root===this&&(J=!0,O=E.full||!E.node.parent?O:E.node,H&&(f.node.root!==this&&(J=!1),O&&O.root!==this&&(O=null),L&&L.root!==this&&(L=null)),J&&f.node.balanceByMergeOrTheft(O,L,l));F.forEach(function(Fa){return Fa.root===r&&Fa.balanceAfterShrink(l)})}}},
{key:"balanceByMergeOrTheft",value:function(a,f,l){var r=this,v=this.children,y=this.options,A=this.isLeaf,E=A?y.maxLeafSize:y.maxNodeSize;y=A?y.minLeafSize:y.minNodeSize;A=a&&a.children.length+v.length<=E;E=!A&&f&&f.children.length+v.length<=E;var F=A?a:E?f:null;if(F){l&&l.log("[balanceByMergeOrTheft] merging "+this+" "+(A?"left":"right")+" into "+F);var H=this.size,J=this.width,O=this.height,L=this.stringSize;v.forEach(function(R){return R.parent=F});A?F.children.push.apply(F.children,$jscomp.arrayFromIterable(v)):
F.children.unshift.apply(F.children,$jscomp.arrayFromIterable(v));this.width=v.length=0;this.withParentChainsUpToCommonParentDo(F,function(R){J>R.width&&(R.width=J);R.height+=O;R.size+=H;R.stringSize+=L},function(R){if(J===R.width)for(var U=0;U<R.children.length;U++){var na=R.children[U];na.width>R.width&&(R.width=na.width)}R.height-=O;R.size-=H;R.stringSize-=L})}else{A=a?Math.ceil((a.children.length-y)/2):0;var Y=f?Math.ceil((f.children.length-y)/2):0;if((E=0<A&&A>=Y)||!E&&0<Y){y=E?a.children.splice(a.children.length-
A,A):f.children.splice(0,Y);var S=E?a:f,ea=E?A:Y,qa=0,Fa=0,K=0,Z=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(E?"left":"right")+" node "+S+" "+ea+" nodes");for(a=0;a<y.length;a++)qa+=y[a].height,Fa+=y[a].stringSize,K=Math.max(K,y[a].width);for(a=0;a<S.children.length;a++)Z=Math.max(Z,S.children[a].width);this.withParentChainsUpToCommonParentDo(S,function(R){if(Z<K&&Z<R.width){if(R===S)R.width=Z;else{for(var U=!1,na=0;na<R.children.length;na++)if(R.children[na].width>Z){U=!0;break}U||
(R.width=Z)}R.width=K}R.height-=qa;R.size-=ea;R.stringSize-=Fa},function(R){R.width<K&&(R.width=K);R.height+=qa;R.size+=ea;R.stringSize+=Fa});y.forEach(function(R){return R.parent=r});E?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(y)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(y))}}a=this.parent;0===v.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(l)}},{key:"balanceAfterGrowth",value:function(){var a=
this.isLeaf,f=this.size,l=this.stringSize,r=this.parent,v=this.children,y=this.width,A=this.height,E=this.options,F=a?E.maxLeafSize:E.maxNodeSize;if(v.length>F){r||(r=this.parent=new ee.InnerTreeNode({parent:null,children:[this],size:f,width:y,height:A,stringSize:l,options:E}),r.isLeaf=!1);var H=Math.floor(v.length/2),J=0,O=0,L=f=0,Y=l=0,S=y=0;for(A=0;J<H;J++)O+=v[J].size,L=Math.max(L,v[J].width),Y+=v[J].height,S+=v[J].stringSize;for(;J<v.length;J++)f+=v[J].size,l=Math.max(l,v[J].width),y+=v[J].height,
A+=v[J].stringSize;this.children=v.slice(0,H);this.size=O;this.width=L;this.height=Y;this.stringSize=S;J=r.children.indexOf(this);v=v.slice(H);var ea=new ee.InnerTreeNode({parent:r,children:v,size:f,height:y,width:l,stringSize:A,options:E});ea.isLeaf=a;v.forEach(function(qa){return qa.parent=ea});r.children.splice(J+1,0,ea);ea.children.length>F&&ea.balanceAfterGrowth();this.children.length>F&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var f=
this,l=this.isLeaf,r=this.parent,v=this.children,y=this.options,A=y.maxLeafSize,E=y.maxNodeSize,F=y.minLeafSize,H=y.minNodeSize;y=l?A:E;F=l?F:H;H=!1;for(var J=v.length;J--;)0===v[J].size&&(v.splice(J,1),H=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+J+" b/c it is empty, remaining children: "+v.length+" (min: "+F+", max: "+y+")"));H&&a&&a.dump(""+this.root.print(!1));if(v.length>=F)r&&r.balanceAfterShrink(a);else if(0===v.length)r&&r.balanceAfterShrink(a);else if(l)r&&(1===r.children.length?
(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,r.children.length=0,r.children.push.apply(r.children,$jscomp.arrayFromIterable(v)),v.forEach(function(L){return L.parent=r}),r.isLeaf=!0):(A=(A=v[0].prevLine())&&A.parent,v=ee.arr.last(v).nextLine(),this.balanceByMergeOrTheft(A,v&&v.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{l=[];y=H=F=!1;for(J=0;J<v.length;J++){var O=
v[J];!F&&O.isLeaf&&(F=!0);H||O.isLeaf||(H=!0);if(F&&H){y=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(O.children))}!y&&l.length<=(F?A:E)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),v.forEach(function(L){return L.parent=null}),l.forEach(function(L){return L.parent=f}),v.length=0,v.push.apply(v,$jscomp.arrayFromIterable(l)),this.isLeaf=F,a&&a.log("[balanceAfterShrink] "+v.join("\n")),
a&&a.dump(""+this.root.print(!1)));r&&r.balanceAfterShrink(a)}}},{key:"print",value:function(a,f,l,r){a=void 0===a?!0:a;f=void 0===f?0:f;l=void 0===l?0:l;var v=this.isLeaf,y=this.size,A=this.stringSize,E=this.width,F=this.height,H=this.children;r=r||(v?"leaf":"node");A=""+" ".repeat(l)+r+" (size: "+y+" width: "+Math.round(E)+" height: "+Math.round(F)+" text length: "+A+")";if(H.length){E="";f+=y;for(y=H.length;y--;)F=H[y],f-=F.size,E="\n"+F.print(a,f,l+1)+E;A+=E}return A}},{key:"toString",value:function(){var a=
this.isLeaf,f=this.size,l=this.width,r=this.height,v=this.children;return"node ("+(a?"leaf, ":"")+(a&&v.length?"rows: "+v[0].row+"-"+ee.arr.last(v).row+" ":"")+("size: "+f+" "+l+"x"+r+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:4638,end:29081})})(ee.TreeNode);var GY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Line")&&"function"===typeof d.Line?d.Line:d.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a.parent);this.textAndAttributes=ee.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var a="",f=this.textAndAttributes,l=0;l<f.length;l+=2)a+="string"===typeof f[l]?f[l]:ee.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],f=this.textAndAttributes,l=0;l<f.length;l+=2){var r=f[l+1];r&&!a.includes(r)&&a.push(r)}return this._textAttributes=a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var f=0,l=a.length-
1;1<=l;l--)for(var r=a[l],v=r.children.indexOf(a[l-1]),y=0;y<v;y++)f+=r.children[y].size;return f}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(a,f,l){var r=this.height,v=this.width,y=this.parent;this.width=a;this.height=f;this.hasEstimatedExtent=
void 0===l?!1:l;if(v!==a||r!==f)for(f-=r;y;){y.height+=f;if(a>=y.width)y.width=a;else if(v===y.width){for(r=l=0;r<y.children.length;r++){var A=y.children[r].width;A>l&&(l=A)}y.width=l}y=y.parent}return this}},{key:"changeText",value:function(a,f){f=void 0===f?null:f;var l=this.parent,r=this.height,v=a.length+1-(this.text.length+1),y=0;this.modeState&&this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=
!1,y=-r);this._text=a;this._textAttributes=null;this.textAndAttributes=f||(f=[a,null]);if(0!==f.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<f.length;a+=2)if((r=f[a+1])&&Array.isArray(r))throw Error("invalid attr part of text/attr pair, its an array: "+r);for(;l;){l.stringSize+=v;l.height+=y;for(a=f=0;a<l.children.length;a++)r=l.children[a].width,r>f&&(f=r);l.width=f;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=
ee.joinTextAttributes(a);for(var f="",l=0;l<a.length;l+=2)f+="string"===typeof a[l]?a[l]:ee.objectReplacementChar;return this.changeText(f,a)}},{key:"print",value:function(a,f,l){a=void 0===a?!0:a;f=void 0===f?0:f;f=" ".repeat(void 0===l?0:l)+"line "+f+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;l=ee.arr.toTuples(this.textAndAttributes,2).map(function(r){var v=$jscomp.makeIterator(r);r=v.next().value;v=v.next().value;return("string"===
typeof r?'"'+r+'"':String(r))+(","+JSON.stringify(v))}).join(",");return f+(a?")":" content: ["+l+"])")}},{key:"toString",value:function(){var a=this.width,f=this.height;return'line ("'+ee.string.truncate(this._text,30)+'", '+a+"x"+f+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(ee.TreeNode);ee.Line=GY;ee.Line=GY;ee.Line=GY;ee.documentFuzzier={makeString:function(b,d){b=void 0===b?5:b;d=void 0===d?50:d;var k=ee.arr.range(65,90).map(function(a){return String.fromCharCode(a)}).join("");k+=k.toLowerCase()+" \n";b=ee.num.random(b,d);return ee.arr.shuffle(Array.from(k.repeat(Math.ceil(b/k.length)))).slice(0,b).join("")},
randomDocPosition:function(b){var d=0===b.rowCount?0:ee.num.random(0,b.rowCount-1);b=ee.num.random(0,b.getLineString(d).length-1);return{row:d,column:b}},insertRandom:function(b,d,k,a){k=[this.makeString(k,a),null];a=this.randomDocPosition(b);d.push(["insertTextAndAttributes",k,a]);b.insertTextAndAttributes(k,a)},deleteRandom:function(b,d,k,a){k={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};d.push(["remove",k]);b.remove(k)},maybe:function(){return.5>Math.random()},replay:function(b,
d,k,a){k=void 0===k?!1:k;a=void 0===a?!1:a;k&&(b.debug=k,k=b.debugHelper(),k.reset());var f=new ee.Document([""]);d.forEach(function(l,r){var v=$jscomp.makeIterator(l);l=v.next().value;v=$jscomp.arrayFromIterator(v);if(a&&r==d.length-1)debugger;f[l].apply(f,[].concat($jscomp.arrayFromIterable(v),[k]))});b.changeDocument(f)},run:function(){var b=Date.now(),d=0,k=new ee.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>k.stringSize&&
1E4>d++;)this.maybe()?this.deleteRandom(k,a):this.insertRandom(k,a),k.consistencyCheck()}catch(l){var f=l}b=Date.now()-b;return{error:f,doc:k,actions:a,time:b}}};ee.newline="\n";ee.newlineLength=1;var oca=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Document")&&"function"===typeof d.Document?d.Document:d.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.options=Object.assign({},ee.defaultOptions,{},f);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===
this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new ee.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var f=a.row;
a=a.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>f?f=0:f>=l&&(f=l-1,a=Infinity);0>a?a=0:(l=this.getLineString(f).length,a>l&&(a=l));return{row:f,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?
a.text:""}},{key:"insertLine",value:function(a,f){f=void 0===f?this.root.rowCount:f;return this.insertLines([a],f)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,f,l){this.root.removeFromToInRoot(a,f,l)}},{key:"insertLines",value:function(a,f){a=this.root.insert(a,f);this.fixRoot();return a}},{key:"textString",get:function(){var a="",f=this.lines;if(!f.length)return a;for(var l=0;l<f.length-1;l++)a=a+f[l].text+ee.newline;return a+=
f[l].text}},{key:"textString",set:function(a){this.lines=a.split(ee.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var f=this.getLine(a);return{row:a,column:f.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var f=ee.newline,l=a.length-1,r=a[0].textAndAttributes.slice(),v=1;v<=l;v++){var y=a[v],A=r.pop()||null,E=r.pop()||"";y=y.textAndAttributes;r.push.apply(r,$jscomp.arrayFromIterable(ee.concatAttributePair(E,
A,y[0]||"",y[1]||null,f)));for(A=2;A<y.length;A+=2)r.push(y[A],y[A+1])}return r}},{key:"textAndAttributes",set:function(a){this.lines=ee.splitTextAndAttributesIntoLines(a,ee.newline).map(function(f){return new ee.Line({parent:null,width:0,height:0,textAndAttributes:f})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(a,f){this.getLine(a).changeTextAndAttributes(f);return f}},{key:"mixinTextAttribute",
value:function(a,f){ee.modifyAttributesInRange(this,f,function(l,r){l._textAttributes=null;return Object.assign({},r,a)})}},{key:"setTextAttribute",value:function(a,f){ee.modifyAttributesInRange(this,f,function(l,r){l._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,f){f=void 0===f?{start:{row:0,column:0},end:this.endPosition}:f;if(a){var l=Object.keys(a);ee.modifyAttributesInRange(this,f,function(r,v){if(!v)return v;r._textAttributes=null;r=0;var y={},A;for(A in v)l.includes(A)||
(y[A]=v[A],r++);return 0===r?null:y})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function f(J,O,L,Y){Y=void 0===Y?0:Y;var S=0,ea=O.length;if(0>=L.length-Y)return{attributes:[O,null],index:Y};for(var qa=[];Y<L.length&&!(S>=ea);Y+=2){var Fa=L[Y],K=Fa.start;Fa=Fa.end;var Z=L[Y+1];if(Fa.row<J)S=0;else{K.row===J&&S<K.column&&(qa.push(O.slice(S,K.column),null),S=K.column);if(Fa.row>J){qa.push(Z.embeddedMorph||O.slice(S,ea),Z);S=ea;break}S<Fa.column&&qa.push(Z.embeddedMorph||O.slice(S,
Fa.column),Z);S=Fa.column}}S<ea&&qa.push(O.slice(S,ea),null);return{attributes:qa,index:Y}}if(!(2>a.length)){var l=a[0].start,r=a.slice(-2)[0].end,v=this.getLine(l.row);if(l.row===r.row){if(!(l.column>=r.column)){var y=f(l.row,v.text,a,0).attributes,A=$jscomp.makeIterator(ee.splitTextAndAttributesAtColumns(v.textAndAttributes,[l.column,r.column]));a=A.next().value;A.next();A=A.next().value;r=$jscomp.makeIterator(ee.splitTextAndAttributesAtColumns(y,[l.column,r.column]));r.next();l=r.next().value;
r.next();v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(A)))}}else{A=l.row;var E=l.column;l=f(A,v.text,a,0);var F=l.attributes;l=l.index;var H=$jscomp.makeIterator(ee.splitTextAndAttributesAt(v.textAndAttributes,E));y=H.next().value;H.next();E=$jscomp.makeIterator(ee.splitTextAndAttributesAt(F,E));E.next();E=E.next().value;for(v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(y),$jscomp.arrayFromIterable(E)));v=v.nextLine();){A++;
if(A===r.row)break;l=f(A,v.text,a,l);y=l.attributes;l=l.index;v.changeTextAndAttributes(y)}v&&(r=r.column,a=f(A,v.text,a,l).attributes,A=$jscomp.makeIterator(ee.splitTextAndAttributesAt(v.textAndAttributes,r)),A.next(),A=A.next().value,r=$jscomp.makeIterator(ee.splitTextAndAttributesAt(a,r)).next().value,v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(r),$jscomp.arrayFromIterable(A))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},
{key:"textAttributeAt",value:function(a){var f=a.row;a=a.column;a=Math.max(0,a);var l=this.getLine(f);if(!l)return null;f=0;l=l.textAndAttributes;for(var r=0;r<l.length;r+=2){var v=l[r],y=l[r+1];f+="string"===typeof v?v.length:1;if(a<f)return y}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(a){var f=a.start,l=a.end;if(ee.eqPosition(f,l))return["",null];ee.lessPosition(l,f)&&(a=$jscomp.makeIterator([l,f]),f=a.next().value,l=a.next().value);f=ee.maxPosition(f,{column:0,row:0});
l=ee.minPosition(l,this.endPosition);var r=this.getLine(f.row),v=r;if(l.row===f.row)return a=f.column,l=l.column,a===l&&l++,a=$jscomp.makeIterator(ee.splitTextAndAttributesAtColumns(v.textAndAttributes,[a,l])),a.next(),a.next().value;a=[r];for(var y=0;y<l.row-f.row;y++)a.push(r=r.nextLine());r=a[a.length-1];f=$jscomp.makeIterator(ee.splitTextAndAttributesAt(v.textAndAttributes,f.column));f.next();f=f.next().value;l=$jscomp.makeIterator(ee.splitTextAndAttributesAt(r.textAndAttributes,l.column)).next().value;
0===f.length&&(f=["",null]);if(1===a.length)return ee.concatTextAndAttributes(f,l,!0);for(v=1;v<a.length-1;v++)"string"===typeof f[f.length-2]&&(f[f.length-2]+=ee.newline),ee.concatTextAndAttributes(f,a[v].textAndAttributes,!0);"string"===typeof f[f.length-2]&&(f[f.length-2]+=ee.newline);ee.concatTextAndAttributes(f,l,!0);return ee.joinTextAttributes(f,"")}},{key:"textInRange",value:function(a){var f=a.start,l=a.end;f=this.clipPositionToLines(f);l=this.clipPositionToLines(l);ee.lessPosition(l,f)&&
(a=$jscomp.makeIterator([l,f]),f=a.next().value,l=a.next().value);a=f;f=a.row;a=a.column;var r=l;l=r.row;r=r.column;if(f===l)return a===r?"":this.getLineString(f).slice(a,r);var v=this.getLine(f);for(a=v.text.slice(a);(v=v.nextLine())&&++f<l;)a+=ee.newline+v.text;return a+ee.newline+this.getLineString(l).slice(0,r)}},{key:"setTextInRange",value:function(a,f){this.remove(f);return this.insertText(a,f.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,
0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var f=a.column,l=this.getLine(a.row);f=Math.max(0,Math.min(f,l.stringSize-1));for(a=l.parent;a;){l=a.children.indexOf(l);l=a.children.slice(0,l);for(var r=0;r<l.length;r++)f+=l[r].stringSize;l=a;a=a.parent}return f}},{key:"insertTextAndAttributes",value:function(a,f,l){l=void 0===l?!1:l;if(!a||!a.length||2===a.length&&!a[0])return{start:f,end:f};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var r=f.row;f=f.column;
0>r&&(r=0);0>f&&(f=0);var v=this.getLine(r);a=ee.splitTextAndAttributesIntoLines(a,ee.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!v)return r=this.insertLines(a.map(function(Y){return new ee.Line({parent:null,width:0,height:0,textAndAttributes:Y})})),l&&l.log("insert "+r.length+" lines into empty text"),{start:{row:0,column:0},end:{row:r.length,column:ee.arr.last(r).text.length}};if(r>=this.rowCount){var y=this.endPosition;l&&l.log("insertion after doc end, "+
r+"/"+f+", inserting "+(r-y.row)+" rows");for(f=0;f<r-y.row;f++)a.unshift(["",null]);r=y.row;f=y.column}if(1===a.length&&""===a[0][0])return l&&l.log("insert just newline at "+r+"/"+f),r=this.splitLineAt({row:r,column:f}),l&&l.dump(""+this.root.print(!1)),r;var A=a.shift(),E=a.length;y={row:r,column:f};var F=v.stringSize-1;f>F&&(l&&l.log("filling up insertion column at "+r+"/"+f+": "+(f-F)),F=" ".repeat(f-F),A.length?"string"===typeof A[0]?A[0]=F+A[0]:A.unshift(F,null):A.push(F,null));F=$jscomp.makeIterator(ee.splitTextAndAttributesAt(v.textAndAttributes,
f));var H=F.next().value;F=F.next().value;""===H[0]&&(H=[]);H=ee.concatTextAndAttributes(H,A,!0);if(0===E){for(var J=0,O=0;O<A.length;O+=2){var L=A[O];J+="string"===typeof L?L.length:1}y.column=f+J;ee.concatTextAndAttributes(H,F,!0)}v.changeTextAndAttributes(H);if(0===E)return l&&(l.log("single line inserted at "+r+"/"+f),l&&l.dump(""+this.root.print(!1))),{start:{row:r,column:f},end:y};v=a[E-1];for(H=A=0;H<v.length;H+=2)J=v[H],A+="string"===typeof J?J.length:1;y.row+=E;y.column=A;a=this.insertLines(a.map(function(Y){return new ee.Line({parent:null,
width:0,height:0,textAndAttributes:Y})}),r+1);E=ee.arr.last(a);E.changeTextAndAttributes(ee.concatTextAndAttributes(E.textAndAttributes,F,!0));l&&(l.log(a.length+" inserted at "+r+"/"+f),l&&l.dump(""+this.root.print(!1)));return{start:{row:r,column:f},end:y}}},{key:"insertText",value:function(a,f,l){l=void 0===l?!1:l;if(!a)return{start:f,end:f};var r=f.row;f=f.column;0>r&&(r=0);0>f&&(f=0);var v=this.getLine(r);if(!v)return r=this.insertLines(a.split(ee.newline)),{start:{row:0,column:0},end:{row:r.length,
column:ee.arr.last(r).text.length}};r>=this.rowCount&&(f=this.endPosition,a="\n".repeat(r-f.row)+a,r=f.row,f=f.column);var y=a.split(ee.newline),A=y.shift(),E=y.length;a={row:r,column:f};var F=v.stringSize-1;f>F&&(A=" ".repeat(f-F)+A);F=$jscomp.makeIterator(ee.splitTextAndAttributesAt(v.textAndAttributes,f));var H=F.next().value;F=F.next().value;""===H[0]&&(H=[]);l=ee.concatTextAndAttributes(H,[A,l&&H.length?H[H.length-1]:null],!0);0===E&&(a.column=f+A.length,ee.concatTextAndAttributes(l,F,!0));v.changeTextAndAttributes(l);
if(0===E)return{start:{row:r,column:f},end:a};a.row+=E;a.column=y[E-1].length;l=this.insertLines(y,r+1);l=ee.arr.last(l);l.changeTextAndAttributes(ee.concatTextAndAttributes(l.textAndAttributes,F,!0));return{start:{row:r,column:f},end:a}}},{key:"remove",value:function(a,f){f=void 0===f?!1:f;if(0!==this.rowCount){var l=a.start,r=a.end;if(l.row!==r.row||l.column!==r.column){ee.lessPosition(r,l)&&(r=$jscomp.makeIterator([r,l]),l=r.next().value,r=r.next().value);var v=this.endPosition;if(!ee.lessEqPosition(v,
l)){var y=ee.maxPosition(l,{column:0,row:0});l=y.row;y=y.column;v=ee.minPosition(r,v);r=v.row;var A=v.column;0>y&&(y=0);0>A&&(A=0);f&&!f.debugDocumentUpdate&&(f=!1);f&&(f.log||(f={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),f.group("document.remove "+JSON.stringify(a)),f.log("[text doc] removing "+l+"/"+y+" => "+r+"/"+A));var E=this.getLine(l);a=E;v=[E];for(var F=0;F<r-l;F++)v.push(E=E.nextLine());E=v[v.length-
1];y=$jscomp.makeIterator(ee.splitTextAndAttributesAt(a.textAndAttributes,y)).next().value;A=$jscomp.makeIterator(ee.splitTextAndAttributesAt(E.textAndAttributes,A));A.next();A=A.next().value;a.changeTextAndAttributes(ee.concatTextAndAttributes(y,A,!0));f&&f.log('[text doc removal] what remains of start/end line: "'+a.textAndAttributes+'"');1<v.length&&this.removeLines(l+1,r,f);f&&f.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var f=a.row;a=a.column;var l=this.getLine(f),
r=$jscomp.makeIterator(ee.splitTextAndAttributesAt(l.textAndAttributes,a)),v=r.next().value;r=r.next().value;l.changeTextAndAttributes(v);l=new ee.Line({parent:null,width:0,height:0,textAndAttributes:r});this.insertLines([l],f+1);return{start:{row:f,column:a},end:{row:f+1,column:0}}}},{key:"replace",value:function(a,f,l){var r=a.start;a=a.end;if(!f.length)return this.remove({start:r,end:a},l),{removed:{start:r,end:a},inserted:{start:r,end:r}};var v=this.clipPositionToLines(r),y=this.clipPositionToLines(a);
v.row===y.row&&this.remove({start:v,end:y},l);if(v.row===y.row||ee.lessEqPosition(this.endPosition,r)){var A;"string"===typeof f?f.length&&(A=f.length&&this.insertText(f,r)):f.length&&(2!==f.length||f[0])&&(A=this.insertTextAndAttributes(f,r,l));A||(A={start:v,end:v});return{removed:{start:r,end:a},inserted:A}}r=v;a=y;l=r;A=l.row;y=l.column;v=a.row;if("string"===typeof f){l=[];f=f.split(ee.newline);for(var E=0;E<f.length;E++)l.push([f[E],null])}else l=ee.splitTextAndAttributesIntoLines(f,ee.newline);
var F=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);F&&(l=[]);var H=f=this.getLine(A);E=this.getLine(v);y=$jscomp.makeIterator(ee.splitTextAndAttributesAt(H.textAndAttributes,y));var J=y.next().value;y.next();for(H.changeTextAndAttributes(F?J:ee.concatTextAndAttributes(J,l.shift(),!0));l.length;){f=f.nextLine();A++;if(f===E)break;f.changeTextAndAttributes(l.shift())}if(!l.length)return l=f.stringSize-1,this.remove({start:{row:A,column:f.stringSize},end:a}),{removed:{start:r,end:a},inserted:{start:r,
end:{row:A,column:l}}};console.assert(A==v,"not end row");console.assert(f.row==A,"row != last line.row");this.remove({start:{row:A,column:0},end:a});v=[];f=l.length;for(y=0;y<f-1;y++)E=l[y],E.length||(E=["",null]),"string"===typeof E[E.length-2]?E[E.length-2]+=ee.newline:E.push(ee.newline,null),v.push.apply(v,$jscomp.arrayFromIterable(E));v.push.apply(v,$jscomp.arrayFromIterable(l[f-1]));l=this.insertTextAndAttributes(v,{row:A,column:0}).end;return{removed:{start:r,end:a},inserted:{start:r,end:l}}}},
{key:"wordsOfLine",value:function(a){for(var f=this.getLineString(a),l=[],r,v=0;v<f.length;v++)/[^a-z0-9_]/i.test(f[v])?r&&(r.range.end.column=v,l.push(r),r=null):(r=r||{index:l.length,string:"",range:{start:{row:a,column:v},end:{row:a,column:v}}},r.string+=f[v]);r&&(r.range.end.column=v,l.push(r));return l}},{key:"wordAt",value:function(a,f){var l=a.row,r=a.column;f=void 0===f?this.wordsOfLine(l):f;return f.find(function(v){v=v.range;var y=v.end.column;return v.start.column<=r&&r<=y})||{range:{start:{column:r,
row:l},end:{column:r,row:l}},string:""}}},{key:"wordLeft",value:function(a){var f=a.row,l=a.column,r=this.wordsOfLine(f);if(!r.length||ee.lessEqPosition(a,r[0].range.start)){for(;0<=--f;)if(r=this.wordsOfLine(f),r.length)return ee.arr.last(r);return{range:{start:a,end:a},string:""}}f=this.wordAt(a);return f.string?ee.eqPosition(f.range.start,a)?r[f.index-1]:f:r.slice().reverse().find(function(v){return v.range.end.column<=l})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var f=
a.column,l=a.row,r=this.wordsOfLine(a.row);if(!r.length||ee.lessEqPosition(ee.arr.last(r).range.end,a)){for(;++l<this.lines.length;)if(r=this.wordsOfLine(l),r.length)return r[0];return{range:{start:a,end:a},string:""}}l=this.wordAt(a);return l.string?ee.eqPosition(l.range.end,a)?r[l.index+1]:l:r.find(function(v){return v.range.start.column>=f})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,f){var l=a.row,r=a.column;a=this.getLine(l);for(var v=a.text;r<a.stringSize-1;r++){var y=
f(v[r],{row:l,column:r});if(y)return y}for(;a=a.nextLine();)for(l++,v=a.text,r=0;r<a.stringSize-1;r++)if(y=f(v[r],{row:l,column:r}))return y;return null}},{key:"scanBackward",value:function(a,f){var l=a.row,r=a.column;a=this.getLine(l);var v=a.text;for(--r;0<=r;r--){var y=f(v[r],{row:l,column:r});if(y)return y}for(;a=a.prevLine();)for(l--,v=a.text,r=a.stringSize-2;0<=r;r--)if(y=f(v[r],{row:l,column:r}))return y;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),
this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],f=this.rowCount,l=this.stringSize,r=this.lines,v=this.textString,y=this.root;f!==r.length&&a.push({error:"document "+this+" row count: "+f+" !== "+r.length});v.length!==l&&a.push({error:"document "+this+" textString.length vs stringSize: "+v.length+" !== "+l});a.push.apply(a,$jscomp.arrayFromIterable(y.consistencyCheck()));f=0;for(l=r[0];l;)l!=r[f]&&a.push({error:"line iteration at "+
f+" is broken: nextLine() of "+r[f-1]+" is not "+r[f]+"!"}),f++,l=l.nextLine();r[f]&&a.push({error:"nextLine() of\n  "+r[f-1]+"\nis nullish but \n  "+r[f]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+" error"+(1<a.length?"s":"")+":\n"+a.map(function(A){return A.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),
f=(System.get(a)||{}).printTree;return f?f(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return ee.documentFuzzier.run()}},
{key:"newline",get:function(){return ee.newline}},{key:"fromString",value:function(a,f){return new this(a.split(ee.newline),f)}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),bwa=oca=ee.Document;ee.default=oca;var tr=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");
tr.lessPosition=Cv;tr.lessEqPosition=CE;tr.eqPosition=Dv;var pF=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),k=d.hasOwnProperty("Anchor")&&"function"===typeof d.Anchor?d.Anchor:d.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,l){f=void 0===f?{column:0,row:0}:f;this.id=a||""+(this.constructor._id=
(this.constructor._id||0)+1);this.position=f;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(tr.lessEqPosition(this.position,a.start))return!1;if(tr.lessEqPosition(a.start,this.position)&&tr.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var f=this.position,l=f.column,r=a.start,v=r.column,y=a.end;a=y.row;y=y.column;this.position={column:a!==this.position.row?l:v===y?l-(y-v):v+(l-y),row:f.row-(a-r.row)};return!0}},
{key:"onInsert",value:function(a){if(tr.lessPosition(this.position,a.start)||tr.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var f=this.position,l=a.start,r=l.row;l=l.column;a=a.end;var v=a.column;this.position={column:f.column+(r!==this.position.row?0:v-l),row:f.row+(a.row-r)};return!0}},{key:"equalsPosition",value:function(a){return a?a.isAnchor?tr.eqPosition(this.position,a.position):tr.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;
return"Anchor("+this.id+" "+a.row+"/"+a.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],d,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3025})}(void 0);tr.Anchor=pF;tr.Anchor=pF;tr.Anchor=pF;var cwa=Object.freeze({__proto__:null,Anchor:pF}),
gg=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");gg.pt=di;gg.Color=ng;gg.connect=Li;gg.once=cv;gg.disconnect=Ek;gg.Path=ci;gg.morph=de;gg.GridLayout=$z;gg.config=Ul;gg.Morph=kl;gg.lessPosition=Cv;gg.minPosition=DE;gg.maxPosition=EE;gg.Icon=wp;var KP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("TextSearcher")&&"function"===typeof d.TextSearcher?d.TextSearcher:d.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,f){var l=this.doc.positionToIndex(a);l=this.doc.indexToPosition(l+f.length);return{range:{start:a,end:l},match:f}}},{key:"stringSearch",value:function(a,f,l,r,v,y,A){if(v&&(gg.lessPosition(A,v.start)||gg.lessPosition(v.end,A)))return this.STOP;
l||(y=y.toLowerCase());if(y!==f[0])return null;v=A.row;A=A.column;y=a[v];a=1>=r?"":"\n"+a.slice(v+1,v+1+(r-1)).join("\n");a=y.slice(A)+a;return 0!==(l?a:a.toLowerCase()).indexOf(f)?null:this.processFind({row:v,column:A},a.slice(0,f.length))}},{key:"reSearch",value:function(a,f,l,r,v,y){if(r&&(gg.lessPosition(y,r.start)||gg.lessPosition(r.end,y)))return this.STOP;r=y.row;y=y.column;return(a=(a[r].slice(y)+(l?"\n"+a.slice(r+1).join("\n"):"")).match(f))?this.processFind({row:r,column:y},a[0]):null}},
{key:"search",value:function(a){var f=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=f.start;var l=f.needle,r=f.backwards,v=f.caseSensitive;f=f.inRange;if(!l)return null;f&&(a=r?gg.minPosition(f.end,a):gg.maxPosition(f.start,a));if(l instanceof RegExp){var y=(l.flags||"").split(""),A=!!l.multiline;y.splice(y.indexOf("m"),1);v||y.includes("i")||y.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),y.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,
l,A,f)}else l=String(l),v||(l=l.toLowerCase()),y=l.split(this.doc.constructor.newline).length,l=this.stringSearch.bind(this,this.doc.lineStrings,l,v,y,f);a=this.doc[r?"scanBackward":"scanForward"](a,l);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var f=[],l=0;;){if(1E4<l++)throw Error("endless loop");var r=this.search(a);if(!r)return f;f.push(r);a=Object.assign({},a,{start:a.backwards?r.range.start:r.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],
d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);gg.TextSearcher=KP;gg.TextSearcher=KP;gg.TextSearcher=KP;var HY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("SearchWidget")&&"function"===typeof d.SearchWidget?
d.SearchWidget:d.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");
var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var r=this.getSubmorphNamed("searchInput"),v=this.getSubmorphNamed("prevButton"),y=this.getSubmorphNamed("nextButton"),A=this.getSubmorphNamed("cancelButton"),E=this.getSubmorphNamed("acceptButton");gg.connect(E,"fire",this,"execCommand",{converter:function(){return"accept search"}});gg.connect(A,"fire",this,"execCommand",{converter:function(){return"cancel search"}});gg.connect(y,"fire",this,"execCommand",{converter:function(){return"search next"}});
gg.connect(v,"fire",this,"execCommand",{converter:function(){return"search prev"}});gg.connect(r,"inputChanged",this,"search");gg.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});gg.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};r.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){f.target.execCommand("realign top-bottom-center");
f.addSearchMarkersForPreview(f.state.inProgress&&f.state.inProgress.found,!1);return F.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(a){var f=this,l=this.world();l&&setTimeout(function(){var r=l.focusedMorph;f.withAllSubmorphsDetect(function(v){return v.isFocused()})?f.get("searchInput")!=r&&f.get("replaceInput")!=r&&f.get("searchInput").focus():
f.cancelSearch()})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before){var a=this.state.before,f=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=f;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&
(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var f=this.target,l=f.selection,r=!!f.activeMark||!l.isEmpty(),v=a.found.range,y=v.start;v=v.end;y=a.backwards?y:v;r?l.lead=y:f.cursorPosition=
y;f.isLineFullyVisible(y.row)||f.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(f){f=f.id;return f.startsWith("search-highlight")&&a.target.removeMarker(f)})}},{key:"addSearchMarkers",value:function(a,f,l){l=void 0===l?!1:l;this.removeSearchMarkers();f=this.target;var r=this.textMap,v=f.whatsVisible,y=v.startRow;v=v.endRow;var A=f.document.lineStrings,E=0,F=gg.config.codeEditor.search,H=F.maxCharsPerLine;F=F.fastHighlightLineCount;
r&&3<=a.match.length&&A.length<F&&(y=0,v=A.length-1);F=!1;for(var J=window.performance.now();y<=v&&!F;y++)for(var O=A[y]||"",L=0;L<Math.min(O.length,H);L++){if(300<window.performance.now()-J){F=!0;break}if(l?0===O.slice(L).indexOf(a.match):0===O.slice(L).toLowerCase().indexOf(a.match.toLowerCase()))f.addMarker({id:"search-highlight-"+E++,range:{start:{row:y,column:L},end:{row:y,column:L+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)",
"pointer-events":"none"}}),L+=a.match.length}this.state.backwards?(l=a.range.start,a=l.row,l=l.column,a={start:{row:a,column:l},end:{row:a,column:l+1}}):(l=a.range.end,a=l.row,l=l.column,a={start:{row:a,column:l-1},end:{row:a,column:l}});l={};f.addMarker({id:"search-highlight-cursor",range:a,style:(l["pointer-events"]="none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});r&&r.update()}},{key:"addSearchMarkersForPreview",value:function(a,f){f=
void 0===f?!0:f;a&&(this.addSearchMarkers(a),f&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,f=this.state,l=a.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())gg.once(a.getWindow(),"remove",this,"remove");l=this.get("searchInput");var r=a.scroll;a=a.selection;f.position=a.lead;f.before={scroll:r,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};
f.last&&f.last.found&&(gg.disconnect(l,"inputChanged",this,"search"),this.input=f.last.needle,gg.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(f.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(a){var f=this.state.inProgress;if(f&&f.found){var l=f.found.range;f=l.start;l=l.end;this.state.position=a!==this.state.backwards?a?l:f:a?f:l}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",
value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,f=a.backwards,l={backwards:f,start:a.position};a=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:a});this.applySearchResult(l);a?this.addSearchMarkers(a,f):this.cleanup();return l}},{key:"showTextMap",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),
2);f=a.textMap=gg.morph({type:"textmap"});f.attachTo(a.target);f.isLayoutable=!1;a.addMorph(f);f.topRight=a.innerBounds().bottomRight().addXY(0,5);f.height=a.target.height-a.height-15;f.update();a.renderOnGPU=!0;return l.return(f)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"accept search or replace and go to next"},{keys:"Tab",command:"change focus"},
{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape|Ctrl-G",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(System.import("lively.morphic/text/occur.js"),2);f=r.yieldResult;l=f.occurStartCommand;a.target.addCommands([l]);a.execCommand("accept search");return r.return(a.target.execCommand("occur",{needle:a.input}))})}},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search",exec:function(){a.cancelSearch();return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"accept search or replace and go to next",
exec:function(f,l,r){return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"accept search",l,r)}},{name:"replace current search location with replace input",exec:function(){var f=gg.Path("state.inProgress").get(a);if(f.found){var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();f.needle instanceof RegExp&&(l=f.found.match.replace(f.needle,l));a.target.replace(f.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");
a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var f=gg.Path("state.inProgress").get(a);if(f.found){f=Object.assign({},f,{start:{row:0,column:0}});var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var r=(new gg.TextSearcher(a.target)).searchForAll(f);a.target.undoManager.group();r.forEach(function(v){var y=v.range;v=v.match;f.needle instanceof RegExp&&(l=v.replace(f.needle,l));a.target.replace(y,
l,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();return!0}},{name:"yank next word from text",exec:function(){var f=a.target,l=f.wordRight(),r=a.get("searchInput");r.selection.isEmpty()||(r.selection.text="");f=f.textInRange({start:f.cursorPosition,end:l.range.end});r.textString+=f;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},
{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:gg.Color.gray},borderRadius:{defaultValue:3},fill:{defaultValue:gg.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=this.get("searchInput").textString,f=a.match(/^\/(.*)\/([a-z]*)$/);return f?new RegExp(f[1],
f[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=new gg.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},
acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[gg.morph({type:"button",name:"acceptButton",label:gg.Icon.textAttribute("check-circle")}).fit(),gg.morph({type:"button",name:"cancelButton",label:gg.Icon.textAttribute("times-circle")}).fit(),gg.morph({type:"button",name:"nextButton",label:gg.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),gg.morph({type:"button",name:"prevButton",label:gg.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),gg.morph({type:"input",name:"searchInput",placeholder:"search input",
historyId:"lively.morphic-text search"}),gg.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),gg.morph({type:"button",styleClasses:["replace"],name:"replaceButton",label:"replace"}),gg.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];gg.connect(this.get("searchInput"),"onBlur",this,"onBlur");gg.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],d,{pathInPackage:function(){return"text/search.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21256})}(gg.Morph);gg.SearchWidget=HY;gg.SearchWidget=HY;gg.SearchWidget=HY;var LP=[{name:"search in text",exec:function(b,d){d=void 0===d?{backwards:!1}:d;b=b._searchWidget||(b._searchWidget=new gg.SearchWidget({target:b,extent:gg.pt(300,20)}));b.state.backwards=d.backwards;
b.prepareForNewSearch();gg.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];gg.searchCommands=LP;gg.searchCommands=LP;gg.searchCommands=LP;var jm=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");jm.todo=function(b){throw Error("not yet implemented "+b);};jm.Rectangle=ye;jm.rect=Dl;jm.pt=di;jm.arr=Lf;jm.Range=aA;var pca=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),k=d.hasOwnProperty("TextLayout")&&"function"===typeof d.TextLayout?
d.TextLayout:d.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,f){var l=function(y){var A=0;return jm.arr.flatten(jm.arr.histogram(y,y.length/3).map(function(E){var F=$jscomp.makeIterator(E);E=F.next().value;var H=F.next().value;
F=F.next().value;for(var J=[],O=0;O<E;O++)J.push(jm.rect(A,0,H,F)),A+=H;return J}))};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;v=l(v);this.lineCharBoundsCache.set(f.document.getLine(r),v)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,
null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,f){var l=a.document;a._isDeserializing&&a._initializedByCachedBounds||l&&this.resetLineCharBoundsCacheOfLine(l.getLine(f))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,f){for(var l=f.start.row;l<=f.end.row;l++)this.resetLineCharBoundsCacheOfRow(a,l)}},{key:"estimateLineHeightsInRange",value:function(a,f){for(var l=a.document,r=a.getGlobalTransform(),v=f.start.row;v<=f.end.row;v++)this.resetLineCharBoundsCacheOfRow(a,l.getLine(v),
r)}},{key:"estimateExtentOfLine",value:function(a,f,l){l=void 0===l?a.getGlobalTransform():l;var r=a.fontMetric,v=a.lineWrapping,y=a.padding,A=a.textRenderer,E=a.debug,F=a.defaultTextStyle,H=a.getProperty("extent").x,J=y.left(),O=y.right(),L=y.top();y=y.bottom();A=A.directRenderTextLayerFn(a);var Y=f.textAndAttributes,S=[],ea;H=H-J-O;if(Y&&Y.length)for(var qa=0,Fa=0;qa<Y.length;qa+=2)(ea=Y[qa])&&ea.isMorph?(ea.position=this.pixelPositionFor(a,{row:f.row,column:Fa}).subPt(a.origin),Fa++):ea&&(Fa+=
ea.length),S.push(Object.assign({},F,{},Y[qa+1]));else S.push(F);Y=S.length;for(qa=F=ea=0;qa<Y;qa++){Fa=r.defaultCharExtent(a,{defaultTextStyle:S[qa],width:1E3,transform:l,paddingBottom:y,paddingTop:L,paddingRight:O,paddingLeft:J},A);var K=Fa.width;F=Math.max(Fa.height,F);ea+=K}a=F;l=f.text.length||1;r=Math.round(ea/Y);J=l*r;J=v?Math.min(J,H):J;v&&(a=Math.round((Math.ceil(l/Math.max(3,H/r))||1)*F));E&&console.log(f.row+": "+f.height+" => "+a);f.changeExtent(J,a,!0)}},{key:"estimateLineHeights",value:function(a,
f){var l=a.fontMetric,r=a.textRenderer,v=a.document,y=a.defaultTextStyle,A=a.clipMode,E=a.textAlign,F=a.padding,H=a.lineWrapping,J=a.debug,O=a.getProperty("extent"),L=O.x,Y=O.y;O=a.getGlobalTransform();var S=F.left(),ea=F.right(),qa=F.top();F=F.bottom();v=v.lines;var Fa=r.directRenderTextLayerFn(a);J&&(J=a.debugHelper(J),J.debugTextLayout||(J=!1));if(!J&&10>a.lineCount()&&3E3>a.document.stringSize&&!jm.arr.any(a.textAndAttributes,function(K){return K&&void 0!=K.fontFamily}))for(f=r.directRenderLineFn(a),
f=l.manuallyComputeBoundsOfLines(a,v,0,0,{defaultTextStyle:y,width:L,height:Y,clipMode:A,lineWrapping:H,textAlign:E,transform:O,paddingLeft:S,paddingRight:ea,paddingTop:qa,paddingBottom:F},Fa,f),y=0;y<v.length;y++)J=f[y],v[y].changeExtent(J.width,J.height,!l.isFontSupported(a.fontFamily,a.fontWeight));else{for(y=l=0;y<v.length;y++)A=v[y],!f&&0<A.height||(l++,this.estimateExtentOfLine(a,A,O));a.viewState._textLayoutStale=!1;J&&J.log("estimateLineHeights, "+l+"/"+v.length+" updated, force: "+f)}}},
{key:"defaultCharExtent",value:function(a){var f=a.textRenderer,l=a.fontMetric,r=a.defaultTextStyle,v=a.getGlobalTransform();f=f.directRenderTextLayerFn(a);return l.defaultCharExtent(a,{transform:v,defaultTextStyle:r,width:1E3},f)}},{key:"textBounds",value:function(a){var f=a.document,l=a.padding,r=a.borderWidthLeft,v=a.borderWidthRight,y=a.borderWidthTop;a=a.borderWidthBottom;return new jm.Rectangle(l.left(),l.top(),Math.round(f.width+r+v),Math.round(f.height+y+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=
a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,f){return f>=a.viewState.firstVisibleRow&&f<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,f){return f>=a.viewState.firstFullyVisibleRow&&f<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var f=a.viewState.firstVisibleRow,l=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(f,
l),startRow:f,endRow:l}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,f,l){var r=f.row,v=f.column;v=Math.max(0,v);r=Math.min(a.lineCount()-1,Math.max(0,r));var y=this.charBoundsOfRow(a,r);v>y.length-1&&(v=y.length-1);for(var A=y[v],E=f=v,F=v+1;F<y.length&&!(y[F].y>A.y+A.height);F++)E=F;E===y.length-1&&E++;for(F=v-1;0<=F&&!(y[F].y<
A.y+A.height);F--)f=F;l&&(a=a.getLine(r).slice(f,E).match(/^\s*/)[0].length,f+=a);return new jm.Range({start:{row:r,column:f},end:{row:r,column:E}})}},{key:"rangesOfWrappedLine",value:function(a,f){for(var l=a.getLine(f).length,r=0,v=[];;){var y=this.screenLineRange(a,{row:f,column:r},!1);v.push(y);if(y.end.column>=l)break;var A=y.end.column+1;if(A>=l)break;if(A<=r){if(!a.env.renderer.getNodeForMorph(a))break;throw Error("should not happen "+y.end.column+" vs "+r);}r=A}return v}},{key:"chunkAtPos",
value:function(a,f){jm.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,f){f=a.document.getLine(f);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var l=this.lineCharBoundsCache.get(f);if(l)return l;var r=a.getProperty("extent");l=r.x;r=r.y;var v=a.fontMetric,y=a.textRenderer,A=a.defaultTextStyle,E=a.clipMode,F=a.textAlign,H=a.padding,J=a.lineWrapping,O=a.getGlobalTransform(),L=H.left(),Y=H.right(),S=H.top();H=H.bottom();
var ea=y.directRenderLineFn(a);y=y.directRenderTextLayerFn(a);a=v.manuallyComputeCharBoundsOfLine(a,f,0,0,{defaultTextStyle:A,width:l,height:r,clipMode:E,lineWrapping:J,textAlign:F,paddingLeft:L,paddingRight:Y,paddingTop:S,paddingBottom:H,transform:O},y,ea);if(a.find(function(qa){return void 0==qa.width&&void 0==qa.height}))return a;this.lineCharBoundsCache.set(f,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,f){var l=f.start,r=f.end,v=a.textLayout,y=v.rangesOfWrappedLine(a,
l.row).find(function(A){return A.containsPosition(l)});r=a.lineWrapping&&y?y.intersect(f).end:r;r=r.row==l.row?r:{row:r.row,column:-1};f=v.charBoundsOfRow(a,l.row);f=0>r.column?f.slice(l.column):f.slice(l.column,r.column+1);r=l.column+(f?f.indexOf(jm.arr.max(f,function(A){return A.height})):0);return v.boundsFor(a,{row:l.row,column:r})}},{key:"boundsFor",value:function(a,f){var l=f.row;f=f.column;f=Math.max(0,f);l=Math.min(a.lineCount()-1,Math.max(0,l));var r=this.charBoundsOfRow(a,l);if(0<r.length)if(f>=
r.length){var v=r[r.length-1];v=new jm.Rectangle(v.x+v.width,v.y,0,v.height)}else v=jm.Rectangle.fromLiteral(r[f]);v||(console.warn("Cannot compute bounds for line "+l+"/"+f),v=new jm.Rectangle(0,0,0,0));f=a.document;a=a.padding;v.x+=a.left();v.y=v.y+f.computeVerticalOffsetOf(l)+a.top();return v}},{key:"pixelPositionFor",value:function(a,f){return this.boundsFor(a,f).topLeft()}},{key:"textPositionFromPoint",value:function(a,f){var l=f.addPt(a.origin),r=l.x,v=l.y,y=a.document;l=a.padding;var A=l.left(),
E=l.top();if(v>y.height+E)return y.endPosition;if(v<E)return{row:0,column:0};l=y.findLineByVerticalOffset(v-E);if(!l)return{row:0,column:0};var F=l.line.row;a=this.charBoundsOfRow(a,F);var H=a.length,J=a[0],O=a[H-1];l={row:F,column:0};r-=A;v-=E+y.computeVerticalOffsetOf(F);if(0===H||r<=J.x+Math.round(J.width/2)&&v>=J.y&&v<=J.y+J.height)return l;if(r>O.x+Math.round(O.width/2)&&v>=O.y&&v<=O.y+O.height)return l.column=H,l;A=[];for(y=H-1;0<=y;y--)if(O=E=a[y],F=O.x,H=O.width,J=O.y,O=O.height,!(v<J||v>
J+O)&&(A.push(E),r>=F+Math.round(H/2)))return l.column=1===A.length?y:y+1,l;if(A.length)return l.column=a.indexOf(jm.arr.last(A)),l;r=Infinity;v=-1;for(y=0;y<a.length;y++)A=a[y],A=f.distSquared(jm.pt(A.x+A.width/2,A.y+A.height/2)),A>=r||(r=A,v=y);l.column=v;return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],d,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),dwa=pca=jm.TextLayout;jm.default=pca;var tf=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");tf.printViewState=function(b){var d=b.viewState,k=d.scrollTop,a=d.scrollHeight,f=d.textHeight,l=d.firstVisibleRow;d=d.lastVisibleRow;var r=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+k+" + "+a+"\nlines: "+l+" - "+d+"\nvisible lines: "+(d-l)+"\nheight: "+f+", "+r.length+
" lines")};tf.installCSS=function(b){tf.cssInstalled=!0;tf.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};tf.extractHTMLFromTextMorph=bN;tf.obj=dg;tf.arr=Lf;tf.num=Em;tf.pt=di;tf.Rectangle=ye;tf.vdom=cI;tf.defaultAttributes=Yw;tf.defaultStyle=Fj;tf.addOrChangeCSSDeclaration=V;tf.hyperscriptFnForDocument=aO;tf.objectReplacementChar="\ufffd";tf.config=Ul;tf.getSvgVertices=Qy;var MP=tf.vdom;tf.h=MP.h;tf.create=MP.create;tf.patch=MP.patch;tf.diff=MP.diff;tf.cssInstalled=!1;tf.debug=!!tf.config.onloadURLQuery["debug-text"];tf.nextTick=function(b,d,k,a,f,l){for(;!f&&k<d.length;)f=b[d[k++]+"equestAnimationFrame"];
return f&&f.bind(b)||b.setImmediate||function(r){b.setTimeout(r,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof d.AfterTextRenderHook?d.AfterTextRenderHook:d.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,f,l){if(0===f.height||f.hasEstimatedExtent){var r=a.getGlobalTransform().inverse();r.e=r.f=0;var v=1!=r.getScale()||0!=r.getRotation();v&&(l.style.transform=r.toString());var y=l.getBoundingClientRect();r=y.height;y=y.width;v&&(l.style.transform="");r&&y&&(f.height!==r||f.width!==y)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(f.changeExtent(y,r,!1),a.textLayout.resetLineCharBoundsCacheOfLine(f),
this.needsRerender=!0,a.viewState._needsFit=!0);if(f.textAndAttributes&&f.textAndAttributes.length)for(y=v=0;v<f.textAndAttributes.length;v+=2)(l=f.textAndAttributes[v])&&l.isMorph?(a._positioningSubmorph=l,l.position=a.textLayout.pixelPositionFor(a,{row:f.row,column:y}).subPt(a.origin),l._dirty=!1,a._positioningSubmorph=null,y++):l&&(y+=l.length);return r}return f.height}},{key:"updateExtentsOfLines",value:function(a){var f=this.morph,l=f.viewState,r=f.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=
0;l.textWidth=a.scrollWidth;a=a.children;for(var v=0,y;v<a.length&&"line"!=a[v].className;)v++;if(v<a.length){y=a[v];var A=y.dataset;A=Number(A?A.row:y.getAttribute("data-row"));if("number"===typeof A&&!isNaN(A)){l.dom_nodeFirstRow=A;y=0;A=f.document.getLine(A);for(var E;v<a.length;v++){var F=a[v];l.dom_nodes.push(F);A&&(E||(E=A.hasEstimatedExtent),A.hasEstimatedExtent=E,y+=this.updateLineHeightOfNode(f,A,F),A.hasEstimatedExtent=!r.isFontSupported(f.fontFamily,f.fontWeight),A=A.nextLine())}this.needsRerender?
(f.fitIfNeeded(),f.makeDirty()):f._dirty=!!f.submorphs.find(function(H){return H.needsRerender()})}}}},{key:"hook",value:function(a,f,l){a&&a.parentNode&&(f=this.morph.viewState,f.text_layer_node=a,f.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4957,end:9032})})(void 0);var qca=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("TextRenderer")&&"function"===typeof d.TextRenderer?d.TextRenderer:d.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
tf.cssInstalled||tf.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var f=this,l=a.viewState._renderLineFn;if(!l){var r=tf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderLineFn=function(v){return f.renderLine(r,null,a,v)}}return l}},{key:"directRenderTextLayerFn",value:function(a){var f=this,l=a.viewState._renderTextLayerFn;if(!l){var r=
tf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderTextLayerFn=function(v){return f.renderJustTextLayerNode(r,a,v,[])}}return l}},{key:"renderMorph",value:function(a,f){var l=a.cursorWidth||1,r=[],v=a.selection;if(a.inMultiSelectMode()){l=v.selections;for(v=0;v<l.length-1;v++)r.push.apply(r,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,l[v],!0,2)));r.push.apply(r,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,l[v],!1,4)))}else r=this.renderSelectionLayer(a,v,!1,
l);l=this.renderTextLayer(a,f);v=this.renderJustTextLayerNode(tf.h,a,null,[]);var y=this.renderMarkerLayer(a,f),A=a.document.width>a.width?a.scrollbarOffset:tf.pt(0,0);A=tf.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[tf.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-A.y+"px"}})]);l.properties.className+=
" actual";l.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";v.properties.className+=" font-measure";var E=a.embeddedMorphMap,F=E?a.submorphs.filter(function(H){return!E.has(H)}):a.submorphs;r=[].concat($jscomp.arrayFromIterable(r),[y,v,l,f.renderSelectedSubmorphs(a,F)]);return tf.h("div",Object.assign({},tf.defaultAttributes(a,f),{style:Object.assign({},tf.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",
cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[A].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[tf.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},r)]:r)))}},{key:"renderTextLayer",value:function(a,f){var l=this,r=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(tf.h,
f,a))):this.renderLines(tf.h,f,a);r=this.renderJustTextLayerNode(tf.h,a,null,r);r.properties.style.position="absolute";var v=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new tf.AfterTextRenderHook);v.reset(a);r.properties["after-text-render-hook"]=v;tf.nextTick(function(){l.manuallyTriggerTextRenderHook(a,f)});return r}},{key:"manuallyTriggerTextRenderHook",value:function(a,f){var l=a.viewState.afterTextRenderHook;l&&!l.called&&((f=(f=f.getNodeForMorph(a))&&f.querySelector(".actual.newtext-text-layer"))&&
l.hook(f),a.ownerChain().every(function(r){return r.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,f,l,r){var v=f.padding,y=v.x,A=v.y,E=f.fixedWidth,F=f.fixedHeight,H=f.backgroundColor,J=f.fontColor,O=f.textAlign,L=f.fontSize,Y=f.textDecoration,S=f.fontStyle,ea=f.fontWeight,qa=f.fontFamily,Fa=f.lineHeight,K=f.wordSpacing,Z=f.letterSpacing,R=f.tabWidth,U=y+v.width;v=A+v.height;var na=Math.max(f.document.height,f.height),aa="newtext-text-layer";switch(f.lineWrapping){case !0:case "by-words":aa+=
" wrap-by-words";break;case "only-by-words":aa+=" only-wrap-by-words";break;case "by-chars":aa+=" wrap-by-chars";break;case !1:aa+=" no-wrapping"}E||(aa+=" auto-width");F||(aa+=" auto-height");f={height:na+"px"};0<y&&(f.paddingLeft=y+"px");0<U&&(f.paddingRight=U+"px");0<A&&(f.paddingTop=A+"px");0<v&&(f.paddingBottom=v+"px");Z&&(f.letterSpacing=Z);K&&(f.wordSpacing=K);Fa&&(f.lineHeight=Fa);qa&&(f.fontFamily=qa);ea&&(f.fontWeight=ea);S&&(f.fontStyle=S);Y&&(f.textDecoration=Y);L&&(f.fontSize=L+"px");
O&&(f.textAlign=O);J&&(f.color=String(J));H&&(f.backgroundColor=H);8!==R&&(f.tabSize=R);y={className:aa,style:f};f.overflow="hidden";l&&(A=l.clipMode,H=l.height,l=l.width,"number"===typeof l&&(f.width=l+"px"),"number"===typeof H&&(f.height=H+"px"),A&&(f.overflow=A));return a("div",y,r)}},{key:"renderLines",value:function(a,f,l){var r=l.height,v=l.scroll,y=l.padding.y,A=l.document,E=l.clipMode;f.getNodeForMorph(l);v=v.y;var F=A.rowCount-1,H=A.height,J="visible"!==E,O=A.findLineByVerticalOffset(J?Math.max(0,
J?v-y:0):0)||{row:0,y:0,offset:0,line:A.getLine(0)},L=O.line,Y=O.offset;E=O.y;O=O.row;y=A.findLineByVerticalOffset(J?Math.min(H,v-y+r):H)||{row:F,offset:0,y:0,line:A.getLine(F)};A=y.line;var S=y.offset,ea=y.row;y=J?O:0;Y=0===Y?O:O+1;F=J?ea+1:F;J=A&&S!==A.height?ea-1:ea;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,F-y+1);O=[];A=[];A.push(a("div.newtext-before-filler",{key:"filler",style:{height:E+"px"}}));for(S=0;S<this.maxVisibleLines&&(O.push(L),ea=this.renderLine(a,f,l,L),A.push(ea),ea.key=
L.row%this.maxVisibleLines,S++,L=L.nextLine(),L););Object.assign(l.viewState,{scrollTop:v,scrollHeight:r,scrollBottom:v+r,heightBefore:E,textHeight:H,firstVisibleRow:y,lastVisibleRow:F,firstFullyVisibleRow:Y,lastFullyVisibleRow:J,visibleLines:O});l.debug&&tf.printViewState(l);return A}},{key:"renderLine",value:function(a,f,l,r){var v=r.textAndAttributes,y=[],A=v.length,E=l.fontSize;if(0<A)for(var F=0;F<A;F+=2){var H=v[F]||"\u00a0";var J=v[F+1];if("string"!==typeof H)y.push(H.isMorph?this.renderEmbeddedSubmorph(a,
f,H,J):tf.objectReplacementChar);else if(J){var O=J.fontSize&&(tf.obj.isString(J.fontSize)?J.fontSize:J.fontSize+"px");var L=J.fontFamily;var Y=J.fontWeight;var S=J.fontStyle;var ea=J.textDecoration;var qa=J.fontColor;var Fa=J.backgroundColor;var K=J.nativeCursor;var Z=J.textStyleClasses;var R=J.link;var U=J.lineHeight||U;var na=J.textAlign||na;var aa=J.wordSpacing||aa;var xa=J.letterSpacing||xa;var jb=J.paddingRight;var ob=J.paddingLeft;var pa=J.paddingTop;var ka=J.paddingBottom;var wa=J.verticalAlign;
var Ka=J.textStroke;var Fb=J.quote||Fb;var hc="span";var Ub={};var ac={style:Ub};O&&J.fontSize<E&&(E=J.fontSize);R&&(hc="a",(ac.href=R)&&R.startsWith("http")&&(ac.target="_blank"));if(R||K)Ub.pointerEvents="auto";O&&(Ub.fontSize=O);L&&(Ub.fontFamily=L);Y&&(Ub.fontWeight=Y);S&&(Ub.fontStyle=S);ea&&(Ub.textDecoration=ea);qa&&(Ub.color=String(qa));Fa&&(Ub.backgroundColor=String(Fa));K&&(Ub.cursor=K);jb&&(Ub.paddingRight=jb);ob&&(Ub.paddingLeft=ob);pa&&(Ub.paddingTop=pa);ka&&(Ub.paddingBottom=ka);wa&&
(Ub.verticalAlign=wa);Ka&&(Ub["-webkit-text-stroke"]=Ka);J.doit&&(Ub.pointerEvents="auto",Ub.cursor="pointer");Z&&Z.length&&(ac.className=Z.join(" "));y.push(a(hc,ac,H))}else y.push(H)}else y.push(a("br"));f={};l.fontSize>E&&(f.fontSize=E+"px");U&&(f.lineHeight=U);na&&(f.textAlign=na);xa&&(f.letterSpacing=xa);aa&&(f.wordSpacing=aa);l=a("div",{className:"line",style:f,dataset:{row:r.row}},y);if(Fb)for("number"!==typeof Fb&&(Fb=1);Fb--;)l=a("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",
value:function(a,f,l,r){r=r||{};if(f)return a=f.render(l),a.properties.style.position="relative",a.properties.style.transform="",a.properties.style.textAlign="initial",r.paddingTop&&(a.properties.style.marginTop=r.paddingTop),r.paddingLeft&&(a.properties.style.marginLeft=r.paddingLeft),r.paddingRight&&(a.properties.style.marginRight=r.paddingRight),r.paddingBottom&&(a.properties.style.marginBottom=r.paddingBottom),a;f=l.extent;r=f.x+"px";f=f.y+"px";return a("div",{className:l.styleClasses.join(" "),
style:{width:r,height:f}},[])}},{key:"renderSelectionLayer",value:function(a,f,l,r){l=void 0===l?!1:l;r=void 0===r?2:r;if(!f)return[];var v=a.textLayout,y=f.start,A=f.end,E=f.cursorVisible,F=f.selectionColor,H=a.document,J=a.cursorColor,O=f.isReverse();y=v.boundsFor(a,y);var L=v.computeMaxBoundsForLineSelection(a,f),Y=v.boundsFor(a,A);tf.pt(y.x,L.y);L=tf.pt(Y.x,Y.y);A=y.height;Y=Y.height;y=O?tf.pt(y.x,y.y):L;l=this.cursor(y,O?A:Y,E,l,r,J);if(f.isEmpty())return[l];r=[];E=f.start.row;J=H.computeVerticalOffsetOf(E)+
a.padding.top();O=a.padding.left();for(var S,ea,qa;E<=f.end.row;){A=H.getLine(E);if(!(E<a.viewState.firstVisibleRow-50)){if(E>a.viewState.lastVisibleRow+50)break;y=v.charBoundsOfRow(a,E).map(tf.Rectangle.fromLiteral);Y=E==f.start.row;if(qa=y[0].bottom()<tf.arr.last(y).top()){L=v.rangesOfWrappedLine(a,E).map(function(R){return R.intersect(f)});ea=Y;var Fa=0,K=S=void 0,Z=$jscomp.makeIterator(L);for(L=Z.next();!L.done;L=Z.next())L=L.value,L.isEmpty()||(S=y.slice(L.start.column,L.end.column),Fa=ea?tf.arr.min(S.map(function(R){return R.top()})):
Fa,K=tf.arr.max(S.map(function(R){return R.bottom()})),ea=S[0],L=tf.pt(O+ea.left(),J+Fa),ea=tf.arr.last(S),S=tf.pt(O+ea.right(),J+K),Fa=K,ea=!1,r.push(tf.Rectangle.fromAny(L,S)))}qa||(qa=E==f.end.row,L=Y?f.start.column:0,Fa=qa?f.end.column:y.length-1,Y=Y&&tf.arr.min(y.slice(L,Fa+1).map(function(R){return R.top()}))||0,Z=L>=Fa?5:0,ea=y[L],L=tf.pt(O+(ea?ea.left():tf.arr.last(y).right()),J+Y),ea=y[Fa],f.includingLineEnd?S=tf.pt(a.width-a.padding.right(),J+Y+A.height):(qa=qa&&f.end.column<=y.length-1,
S=tf.pt(O+(ea?qa?ea.left():ea.right():tf.arr.last(y).right())+Z,J+Y+A.height)),r.push(tf.Rectangle.fromAny(L,S)))}J+=A.height;E++}a=this.selectionLayerRounded(r,F,a);a.push(l);return a}},{key:"selectionLayerRounded",value:function(a,f,l){var r=[l={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var v=a.next();!v.done;v=a.next()){v=v.value;y&&(y.left()>v.right()||y.right()<v.left())&&r.push(l={left:[],right:[]});l.left.push(v.topLeft(),v.bottomLeft());l.right.push(v.topRight(),v.bottomRight());var y=
v}y=[];l={};r=$jscomp.makeIterator(r);for(a=r.next();!a.done;l={$jscomp$loop$prop$pos$2556:l.$jscomp$loop$prop$pos$2556},a=r.next())if(a=a.value,a.left.length){l.$jscomp$loop$prop$pos$2556=a.left.reduce(function(O,L){return O.minPt(L)});v=a.left.concat(a.right.reverse());a=[];for(var A=0;A<v.length;A++){var E=v[A-1]||tf.arr.last(v),F=v[A],H=v[A+1]||tf.arr.first(v),J=E.subPt(F).normalized().scaleBy(6);E=F.addPt(J);E._next=J.scaleBy(-1);H=H.subPt(F).normalized().scaleBy(6);F=F.addPt(H);F._prev=H.scaleBy(-1);
a.push(E,F)}a=a.map(function(O){return function(L){return{position:L.subPt(O.$jscomp$loop$prop$pos$2556),isSmooth:!0,controlPoints:{next:L._next||tf.pt(0),previous:L._prev||tf.pt(0)}}}}(l));v=tf.getSvgVertices(a);F=a.map(function(O){return O.position}).reduce(function(O,L){return O.minPt(L)});A=F.y;F=F.x;a=a.map(function(O){return O.position}).reduce(function(O,L){return O.maxPt(L)});y.push(tf.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:l.$jscomp$loop$prop$pos$2556.x+
"px",top:l.$jscomp$loop$prop$pos$2556.y+"px",width:a.x-F,height:a.y-A}},tf.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:v,fill:f.toString()}})))}return y}},{key:"cursor",value:function(a,f,l,r,v,y){return tf.h("div",{className:"newtext-cursor"+(r?" diminished":""),style:{left:a.x-Math.ceil(v/2)+"px",top:a.y+"px",width:v+"px",height:f+"px",display:l?"":"none",background:y||"black"}})}},{key:"renderMarkerLayer",value:function(a){var f=a.markers,l=a.textLayout,r=a.viewState,v=r.firstVisibleRow;
r=r.lastVisibleRow;var y=[];if(!f)return y;f=$jscomp.makeIterator(f);for(var A=f.next();!A.done;A=f.next()){var E=A.value;A=E.style;E=E.range;var F=E.start;E=E.end;if(!(E.row<v||F.row>r))if(F.row===E.row)y.push(this.renderMarkerPart(l,a,F,E,A));else{y.push(this.renderMarkerPart(l,a,F,a.lineRange(F.row).end,A));for(F=F.row+1;F<=E.row-1;F++){var H=a.lineRange(F);y.push(this.renderMarkerPart(l,a,H.start,H.end,A,!0))}y.push(this.renderMarkerPart(l,a,{row:E.row,column:0},E,A))}}return y}},{key:"renderMarkerPart",
value:function(a,f,l,r,v,y){y=void 0===y?!1:y;var A=f.document;var E=A.getLine(l.row);y?(a=f.padding,y=a.left(),l=a.top()+A.computeVerticalOffsetOf(l.row),a=y+E.width,E=E.height):(E=a.boundsFor(f,l),y=E.x,l=E.y,E=a.boundsFor(f,r),a=E.x,E=E.height);E=Math.ceil(E);return tf.h("div.newtext-marker-layer",{style:Object.assign({},v,{left:y+"px",top:l+"px",height:E+"px",width:a-y+"px"})})}},{key:"renderDebugLayer",value:function(a){var f=[],l=a.viewState,r=l.heightBefore,v=l.firstVisibleRow,y=l.lastVisibleRow;
l=l.visibleLines;var A=a.padding,E=a.scroll,F=E.x,H=E.y;E=A.left();var J=A.right(),O=A.top();A.bottom();f.push(tf.h("div.debug-info",{style:{left:F+E+"px",top:H+"px",width:a.width-J+"px"}},tf.h("span","visible rows: "+v+" - "+y)));for(A=0;v<y;A++,v++){var L=l[A];H=a.textLayout.lineCharBoundsCache.get(L);L=L.height;f.push(tf.h("div.debug-line",{style:{left:F+E+"px",top:O+r+"px",width:a.width-J+"px",height:L+"px"}},tf.h("span",String(v))));if(H)for(var Y=0;Y<H.length;Y++){var S=H[Y];f.push(tf.h("div.debug-char",
{style:{left:E+S.x+"px",top:O+r+S.y+"px",width:S.width+"px",height:S.height+"px"}}))}r+=L}return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9049,end:36001})}(void 0),ewa=qca=tf.TextRenderer;
tf.extractHTMLFromTextMorph=bN;tf.extractHTMLFromTextMorph=bN;tf.default=qca;var ur=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");ur.arr=Lf;ur.eqPosition=Dv;ur.KeyHandler=PW;ur.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,d){d=void 0===d?{backwards:!1}:d;ur.IyGotoCharKeyHandler.installInto(b,d.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,d){b.saveMark();var k=b.selection,a=k.lead,f=a.row,l=a.column;a=!!b.activeMark||!k.isEmpty();
var r={row:f,column:l-1};b=b.document[d.backwards?"scanBackward":"scanForward"](r,function(v,y){return v!==d.needle||ur.eqPosition(r,y)?null:y});if(!b)return!0;b.column++;k.lead=b;a||(k.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var NP=ur.commands.activate;ur.activate=NP;ur.activate=NP;ur.activate=NP;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),k=d.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof d.IyGotoCharKeyHandler?d.IyGotoCharKeyHandler:
d.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;
ur.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,f){var l=f.keyCombo,r=l.startsWith("input-");if(f.onlyModifiers||l.startsWith("Shift-")||!r&&!f.isModified&&!f.isFunctionKey)return{command:"null",passEvent:!0};f=r&&l.slice(6);if(!this.charToFind)if(r)this.charToFind=f;else return this.uninstallFrom(a),null;return f!==this.charToFind?(this.uninstallFrom(a),null):{command:ur.commands.moveTo,args:{backwards:this.backwards,needle:f}}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a,f){f=void 0===f?!1:f;a.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(f))}}],d,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1063,end:3067})})(ur.KeyHandler);var wi=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");wi.chain=Gq;wi.arr=Lf;wi.string=Ih;wi.date=Gv;wi.pt=di;wi.Range=aA;wi.eqPosition=Dv;wi.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,
multiSelectAction:"single",exec:function(b,d){d=void 0===d?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:d;var k=b.selection,a=k.text,f=d.hasOwnProperty("collapseSelection")?d.collapseSelection:!0;b.saveMark(k.anchor);b.activeMark=null;(k.isMultiSelection?k.selections.slice():[k]).forEach(function(l){var r=l.isEmpty()?b.lineRange():l.range,v=b.textInRange(r);b.env.eventDispatcher.killRing.add(v);d.delete?b.deleteText(r):!l.isEmpty()&&f&&l.collapse(l.lead)});d.dontTryNativeClipboard||
b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,d){d=void 0===d?{killRingCycleBack:!1}:d;var k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=
b.env.eventDispatcher.killRing;d.killRingCycleBack&&(wi.arr.last(wi.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(k=a.back());!k&&a.isCycling()&&(k=a.yank());k||(k=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(l,r){r=a.pointer-1-r;0>r&&(r=a.buffer.length-1);return{selection:l,pasted:a.buffer[r]||""}}).concat({selection:b.selection.defaultSelection,pasted:k}).forEach(function(l){return l.selection.text=
l.pasted}),b.undoManager.group()):k&&(b.undoManager.group(),b.selection.text=k,b.undoManager.group());return f.return(!0)})}},{name:"browse clipboard",exec:function(b){var d,k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=b.env.eventDispatcher.killRing,k=d.pointer,a=d.buffer,f=a.map(function(y){return{isListItem:!0,string:wi.string.truncate(y,80).replace(/\n/g,""),value:y}}),v.yield(b.world().filterableListPrompt("select items to paste",f,{preselect:k,
multiSelect:!0}),2);l=v.yieldResult;r=l.selected;r.length&&(b.undoManager.group(),b.insertTextAndSelect(r.join("\n")),b.undoManager.group());return v.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();
b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var d=b.selection;d.isEmpty()&&d.growLeft(1);d.text="";d.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var d=b.selection;
if(b.rejectsInput())return!1;d.isEmpty()&&d.growRight(1);d.text="";d.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(d,k){return b.insertText(b.tab,k.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(d,k){return d.startsWith(b.tab)&&b.deleteText({start:k.start,end:{row:k.start.row,
column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,d){d=void 0===d?{}:d;var k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){k=b.editorPlugin&&b.editorPlugin.mode;if(!k)return E.return(!0);l=d.hasOwnProperty("undo")?d.undo:!0;d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?(r=d,a=r.firstRow,f=r.lastRow):b.selection.isEmpty()?a=f=b.cursorPosition.row:(v=b.selection.selectedRows,a=v.first,
f=v.last);return E.yield(System.import("lively.ide/editor-modes.js"),2)}y=E.yieldResult;A=y.indentLines;l&&b.undoManager.group();A(b,k,a,f,"smart",!0,d);l&&b.undoManager.group();return E.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var d=b.snippets.find(function(k){return k.canExpand(b)});return d?(d.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",
scrollCursorIntoView:!0,exec:function(b){var d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=b.snippets.map(function(r){return{isListItem:!0,string:r.trigger+" - "+r.expansion,value:r}}),l.yield(b.world().filterableListPrompt("select snippet",d,{requester:b}),2);k=l.yieldResult;a=$jscomp.makeIterator(k.selected);(f=a.next().value)&&f.expandAtCursor(b);return l.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var d=
b.cursorPosition,k=d.row,a=d.column;d=wi.Range.create(k,a-1,k,a+1);var f=b.getLine(k);k=f[a-1];a=f[a];k&&a&&b.replace(d,a+k,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var d=b.selection.selections;b.undoManager.group();
d.reduce(function(k,a){var f=a.text;a.text=k;return f},wi.arr.last(d).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var d=b.selection,k=d.lead.row,a=b.lineRange(k,!1);d.range=d.range.equals(a)?b.lineRange(k,!0):a;return!0}},{name:"goto line start",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var k=b.selection,a=k.lead;
b=b.screenLineRange(a,!0);k.lead=wi.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!d&&(k.anchor=k.lead);return!0}},{name:"goto line end",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var k=b.selection;b=b.screenLineRange(k.lead,!0);k.lead=b.end;!d&&(k.anchor=k.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;b.gotoDocumentStart(Object.assign({},d));return!0}},{name:"goto end",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;b.gotoDocumentEnd(Object.assign({},d));return!0}},{name:"goto paragraph above",
exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var k=b.paragraphRangeAbove(b.cursorPosition.row);k.start.row--;b.selection.lead=k.start;d.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var k=b.paragraphRangeBelow(b.cursorPosition.row);k.end.row++;b.selection.lead=k.end;d.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var d=!!b.activeMark,
k=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((f-a)/2);if(k.row<a)k.row=a;else if(k.row<l)k.row=l;else if(k.row<f)k.row=f;else return!0;b.selection.lead=k;d||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var d=!!b.activeMark,k=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((f-a)/2);if(k.row<=a)return!0;
k.row=k.row<=l?a:k.row<=f?l:f;b.selection.lead=k;d||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return d=!!b.activeMark,k=Number,f.yield(b.world().prompt("Enter line number"),2);a=k(f.yieldResult);isNaN(a)||(d?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return f.return(!0)})}},{name:"join line",exec:function(b,
d){d=void 0===d?{withLine:"before"}:d;var k=b.selection,a=k.start,f=k.end;k=k.lead;if(!b.selection.isEmpty()){if(a.row===f.row)return!0;d=b.undoManager.ensureNewGroup(b,"join line");f=wi.arr.range(0,f.row-1-a.row).map(function(l){return b.joinLine(a.row)});b.undoManager.group(d);b.selection.isMultiSelection&&(b.cursorPosition=f[0],f.slice(1).forEach(function(l){return b.selection.addRange({start:l,end:l})}));return!0}f=k.row;if("before"===d.withLine&&0>=f||"after"===d.withLine&&f>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===d.withLine?f-1:f);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var d=b.cursorPosition,k=b.getLine(d.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(k),d);b.cursorPosition=d;return!0}},{name:"insert line",exec:function(b,d){d=void 0===d?{where:"above"}:d;var k=b.cursorPosition.row,a=b.getLine(k).match(/^\s*/)[0].length;"below"===d.where&&k++;b.insertText(" ".repeat(a)+"\n",{column:0,row:k});b.cursorPosition=
{column:a,row:k};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var d=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(d.row)+"\n",{column:0,row:d.row+1});else{var k=b.selection.range;b.insertText(b.selection.text,d);b.selection=k}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var d=b.cursorPosition,k=b.getLine(d.row);if(wi.eqPosition(b.document.endPosition,d))return!0;d=k.trim()?{start:d,end:{row:d.row,
column:k.length}}:{start:{row:d.row,column:0},end:{row:d.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(d));b.undoManager.group();b.deleteText(d);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var d=b.lineRange(),k=b.cursorPosition;if(wi.eqPosition({row:k.row,column:0},k))return!0;d={start:wi.eqPosition(d.start,k)?{row:k.row,column:0}:d.start,end:k};
b.deleteText(d);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var d=b.selection;if(b.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(wi.Range.compare).forEach(function(l){b.selection=l;b.execCommand("move lines up")});k.forEach(function(l){l.start.row--;l.end.row--});b.selection.ranges=k;return!0}d.isEmpty()||0!==d.end.column||d.growRight(-1);k=d.start;d=d.end;var a=b.getLine(k.row-1),f=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:d.row+1,column:0});b.deleteText({start:{row:k.row-1,column:0},end:{row:k.row,column:0}});b.undoManager.group(f);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var d=b.selection;if(b.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(wi.Range.compare).reverse().forEach(function(l){b.selection=l;b.execCommand("move lines down")});k.forEach(function(l){l.start.row++;l.end.row++});b.selection.ranges=k;return!0}d.isEmpty()||
0!==d.end.column||d.growRight(-1);var a=d.range,f=a;k=f.start;f=f.end;d.isEmpty()?a={start:{row:k.row,column:0},end:{row:k.row+1,column:0}}:0!==f.column&&(a={start:k,end:{row:f.row+1,column:0}});d=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:k.row+1,column:0});b.undoManager.group(d);b.selection={start:Object.assign({},k,{row:k.row+1}),end:Object.assign({},f,{row:f.row+1})};return!0}},{name:"old select word",exec:function(b){var d=b.selection;d.range=b.wordAt(d.lead).range;
return!0}},{name:"select word",exec:function(b){var d=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(d.lead)))d.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var d=b.selection;d.anchor=b.wordRight(d.end).range.end;return!0}},{name:"goto word left",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var k=b.wordLeft().range;b.selection.lead=k.start;d||(b.selection.anchor=k.start);return!0}},{name:"goto word right",
exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var k=b.wordRight().range;b.selection.lead=k.end;d||(b.selection.anchor=k.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var d=b.wordRight().range.end;d={start:b.cursorPosition,end:d};b.env.eventDispatcher.doCopy(b.textInRange(d));b.deleteText(d);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var d={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(d);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var k=d.pairs||{"{":"}","[":"]","(":")","<":">"};if(k=b.findMatchingForward(b.cursorPosition,"right",k)||b.findMatchingForward(b.cursorPosition,"left",k))b.selection.lead=k,d.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var k=d.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(k=b.findMatchingBackward(b.cursorPosition,"left",k)||b.findMatchingBackward(b.cursorPosition,"right",k))b.selection.lead=k,d.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var d=b.charBoundsFromTextPosition(b.cursorPosition),k=d.topLeft();d=b.height-d.height;var a=b.scroll,f=a.x;a=a.y;
a=2>Math.abs(k.y-a)?k.y-d:2>Math.abs(k.y-a-.5*d)?k.y:k.y-.5*d;b.scroll=wi.pt(f,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var d=b.selection;if(d.isEmpty()){var k=b.popSavedMark();k&&(b.saveMark(b.cursorPosition),d.lead=k.position)}else d.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,d,k){var a=b.activeMark;d=b.selection;var f=!d.isEmpty();if(4===k){if(b=b.popSavedMark())d.lead=
b.position,f||(d.anchor=d.lead);return!0}if(!a&&!f)return b.activeMark=d.lead,!0;b.saveMark(a||d.anchor);b.activeMark=null;f&&(b.inMultiSelectMode()?d.selections:[d]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,d,k){function a(y,A,E){if(y.length<=f)return[A+y.trim()];E=y.slice(0,f);var F=wi.arr.last(wi.string.reMatches(E,r)),H=F&&0<F.start?F.start:f;F=E.slice(0,H);y=A+(E.slice(H)+y.slice(f)).trimLeft();
return[F].concat(a(y,A))}if(4===k)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();d=b.selection;var f=k||80,l=d.selectedRows;k=d.range;var r=/[ ]+/g,v=/^[\s\t]+/;d=wi.string.paragraphs(wi.arr.range(l.first,l.last).map(function(y){return b.getLine(y)}).join("\n"),{keepEmptyLines:!0});d=wi.chain(d.map(function(y){if(!/^\s*$/.test(y)){y=y.split("\n").join(" ");if(""===y.trim())y=[""];else{var A=y.match(v);A=A?A[0]:"";y=a(A+y.trim(),A)}y=y.join("\n")+"\n"}return y})).flatten().value().join("\n");
b.undoManager.group();b.replace(k,d);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var d=0;b.withLinesDo(0,b.documentEndPosition.row,function(k,a){return k.match(/\s+$/)&&++d&&b.replace(a,k.trimRight())});b.world().setStatusMessage(d+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var d=b.cursorPosition,k=b.getLine(d.row),a=k.match(/^\s*/)[0].length;b.undoManager.group();!k.trim()&&a&&(b.deleteText({start:{row:d.row,column:0},end:{row:d.row,column:a}}),d.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(d,k,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,d){var k=d=void 0===d?{string:null,undoGroup:!1}:d;d=k.string;k=k.undoGroup;var a="string"===typeof d&&d.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(d))return!0;
a=b.selection;var f=!a.isEmpty();f&&b.undoManager.group();var l=a.lead;a.replace(d,!0,!0,!0,!(1===d.length&&"\n"!==d&&0<l.column));a.collapseToEnd();f&&b.undoManager.group();k&&(/^[\s\.,\?\+=]+$/.test(d)||"number"!==typeof k?b.undoManager.group():b.undoManager.groupLater(k));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,d,k,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];wi.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,d,k){d=wi.date.format(new Date,k?"mediumDate":"isoDate");b.undoManager.group();b.insertText(d);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var d=b.selection;d.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var k=/\[X\]/g,a=d.text;a=b.test(a)?a.replace(b,"[X]"):k.test(a)?a.replace(k,"[ ]"):"[ ] "+a.trimLeft();d.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var d=b.selection,k=d.start.row;d=d.end.row;var a=[];b.withLinesDo(k,d,function(f){var l=a.findIndex(function(r){return r>f});-1<l?a.splice(l,0,f):a.push(f)});b.undoManager.group();b.replace({start:{row:k,
column:0},end:{row:d+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var d=b.selection,k=d.start.row;d=d.end.row;var a=[];b.withLinesDo(k,d,function(f){return a.push(f)});b.undoManager.group();b.replace({start:{row:k,column:0},end:{row:d+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var d=b.selection,k=d.start.row;d=d.end.row;var a=[];b.withLinesDo(k,
d,function(f){return wi.arr.pushIfNotIncluded(a,f)});b.undoManager.group();b.replace({start:{row:k,column:0},end:{row:d+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,d,k){function a(H,J){var O,L,Y=f(H).trim();"uppercased"===Y?O=/\s*[A-Z0-9]+/g:"dashed"===Y?O=/-\w/g:"spaced"===Y&&(O=/\s+.?/g);"uppercased"===J?L=function(S){return S.trim().replace(/^-/,"").toUpperCase()}:"dashed"===J?L=function(S){return"-"+
S.trim().replace(/^-/,"").toLowerCase()}:"spaced"===J&&(L=function(S){return" "+S.trim().replace(/^-/,"").toLowerCase()});return H.replace(O,L)}function f(H){return H.match(/[A-Z]/)?"uppercased":H.match(/-/)?"dashed":H.match(/\s/)?"spaced":"unknown"}var l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);l=b.selection.ranges;r=b.textInRange(l[0]);if(!r)return b.setStatusMessage("Please select some text"),
H.return(!0);v=f(r);y=wi.arr.without(["uppercased","dashed","spaced"],v);return H.yield(b.world().listPrompt("Convert "+v+" into?",y,{}),2)}A=H.yieldResult;E=$jscomp.makeIterator(A.selected);F=E.next().value;if(!F)return H.return(!0);b.undoManager.group();l.forEach(function(J,O){O=b.textInRange(J);O=a(O,F);b.replace(J,O)});b.undoManager.group();b.focus();return H.return(!0)})}},{name:"spell check word",exec:function(b,d){var k,a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return k=
b.wordAt(),k.string?A.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),A.return(!0));case 2:return a=A.yieldResult,f=a.spellCheckWord,A.yield(f(k.string),3);case 3:return l=A.yieldResult,l.length?A.yield(b.world().filterableListPrompt("Choose replacement for "+k.string,l),4):(b.setStatusMessage("no suggestions for word "+k.string),A.return(!0));case 4:r=A.yieldResult;v=$jscomp.makeIterator(r.selected);if(y=v.next().value)b.undoManager.group(),
b.replace(k.range,y),b.undoManager.group();return A.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,d){var k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return a=(k=b.textInRange(b.selection))&&0!==k.length?{stdin:k}:{},E.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return f=E.yieldResult,E.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=E.yieldResult;r=l.runCommand;if(!f)return E.return(b.setStatusMessage("No command entered, aborting...!"));v=r(f,a);E.setCatchFinallyBlocks(4);return E.yield(v.whenDone(),6);case 6:y=v.output.trim();b.undoManager.group();b.selection.selections.forEach(function(F){return F.text=y});b.undoManager.group();E.leaveTryBlock(5);break;case 4:A=E.enterCatchBlock(),b.showError(A);case 5:return E.return(!0)}})}},{name:"open file at cursor",exec:function(b,d){var k,a,f,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return b.getLine(),k=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(H,J){return(0>=J.column||H.match(/\s/))&&J})||{row:0,column:0},f=b.document.scanForward(b.cursorPosition,function(H,J){return(J.row!=k||H.match(/\s/))&&J})||b.documentEndPosition,l=b.textInRange({start:a,end:f}).replace(/\s/g,""),r=l.split(":"),v=r[0].match(/^file|http/)?r.shift()+":"+r.shift():r.shift(),r[0].match(/^[0-9]+$/)&&(v+=":"+r.shift()),F.yield(System.import("lively.ide/text-editor.js"),
2);y=F.yieldResult;A=y.default;E=A.openInWindow();E.location=v;return F.return(E)})}},{name:"run code on text morph",doc:"...",exec:function(b,d){var k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return k={targetModule:"lively://code-on-text-morph",context:b},v.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:k,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
v.yieldResult,v.setCatchFinallyBlocks(3),b.undoManager.group(),v.yield(lively.vm.runEval(a,k),5);case 5:l=v.yieldResult;b.undoManager.group();f=l.isError?l.value:null;v.leaveTryBlock(4);break;case 3:f=r=v.enterCatchBlock();case 4:return f&&b.showError(f),v.return(void 0)}})}},{name:"change editor mode",exec:function(b){var d,k,a,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return d=function(F){return!F.endsWith("ide/editor-plugin.js")&&F.endsWith("editor-plugin.js")},
E.yield(lively.modules.getPackage("lively.ide").resources(d),2);case 2:return k=E.yieldResult,a=b.editorPlugin||{},f=a.shortName,l=0,r=["<no mode>"].concat(k.map(function(F,H){var J=F.url.match(/([^\/]+)\/editor-plugin.js/)[1];J===f&&(l=H);return{isListItem:!0,string:J,value:F}})),E.yield(b.world().filterableListPrompt("choose mode",r,{requester:b,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:v=E.yieldResult;y=$jscomp.makeIterator(v.selected);A=y.next().value;
if(!A)return E.return();if("<no mode>"!==A){E.jumpTo(4);break}return E.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),E.return();case 4:if(A.isLoaded){E.jumpTo(6);break}return E.yield(lively.modules.module(A.url).load(),6);case 6:return E.yield(b.changeEditorMode(A.url),0)}})}},{name:"report token at cursor",exec:function(b){var d,k,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){d=b.tokenAt(b.cursorPosition)||{};k=d.token;a=d.start;f=d.end;b.setStatusMessage(k?
k+" "+a.column+" => "+f.column:"no token");return l.return(!0)})}}];wi.commands.push.apply(wi.commands,$jscomp.arrayFromIterable(wi.usefulEditorCommands));wi.iyGotoCharActivate=NP;wi.commands.push(wi.iyGotoCharActivate);wi.searchCommands=LP;wi.commands.push.apply(wi.commands,$jscomp.arrayFromIterable(wi.searchCommands));var rca=wi.commands;wi.default=rca;var rd=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");rd.Rectangle=ye;rd.Point=tg;rd.rect=Dl;rd.Color=ng;rd.pt=di;rd.string=Ih;
rd.num=Em;rd.obj=dg;rd.fun=gn;rd.promise=Hg;rd.arr=Lf;rd.signal=em;rd.noUpdate=lp;rd.connect=Li;rd.disconnect=Ek;rd.bowser=vs;rd.morph=de;rd.touchInputDevice=nr;rd.config=Ul;rd.Morph=kl;rd.Selection=IP;rd.MultiSelection=JP;rd.Document=bwa;rd.objectReplacementChar="\ufffd";rd.Anchor=pF;rd.Range=aA;rd.eqPosition=Dv;rd.lessPosition=Cv;rd.KeyHandler=PW;rd.UndoManager=iI;rd.TextSearcher=KP;rd.TextLayout=dwa;rd.Renderer=ewa;rd.extractHTMLFromTextMorph=bN;rd.commands=rca;rd.textAndAttributesWithSubRanges=
aN;rd.serializeMorph=vG;rd.deserializeMorph=wG;rd.getSvgVertices=Qy;rd.renderSubTree=Ty;rd.ShadowObject=ys;rd.getClassName=fm;var au=Ca("ac",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),k=d.hasOwnProperty("Text")&&"function"===typeof d.Text?d.Text:d.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=
a=void 0===a?{}:a,l=f.position,r=f.rightCenter,v=f.leftCenter,y=f.topCenter,A=f.bottom,E=f.top,F=f.right,H=f.left,J=f.bottomCenter,O=f.bottomLeft,L=f.bottomRight,Y=f.topRight,S=f.topLeft;f=f.center;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==r&&(this.rightCenter=r);void 0!==v&&(this.leftCenter=v);void 0!==y&&(this.topCenter=y);void 0!==A&&(this.bottom=A);void 0!==E&&
(this.top=E);void 0!==F&&(this.right=F);void 0!==H&&(this.left=H);void 0!==J&&(this.bottomCenter=J);void 0!==O&&(this.bottomLeft=O);void 0!==L&&(this.bottomRight=L);void 0!==Y&&(this.topRight=Y);void 0!==S&&(this.topLeft=S);void 0!==f&&(this.center=f)}},{key:"__deserialize__",value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,a,f,l,r);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new rd.Renderer(this.env.domEnv);this.textLayout=
new rd.TextLayout(this);this.changeDocument(rd.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,f,l){var r=this;Zb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,a,f,l);this._isDeserializing=!1;this.whenRendered().then(function(){r.embeddedMorphs.forEach(function(v){return v.top=0})})}},{key:"__only_serialize__",get:function(){return rd.arr.withoutAll(Zb._get(Object.getPrototypeOf(k.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,a,f,l,r);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(J){return rd.obj.select(J,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(J){return!J.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(J){if(!J)return J;if(J.isMorph)return l.ref(J).asRefForSerializedObjMap();if(rd.obj.isObject(J)){var O={};J=JSON.stringify(J,function(L,Y){return Y&&Y.__serialize__?(Y=Y.__serialize__(),Object.assign(O,Y.bindings),"->["+(Y.__expr__+"]")):Y});J=
J.replace(/"->\[.*\]"/g,function(L){return L.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+J+")",bindings:O})}return J})};f=[];r=$jscomp.makeIterator(this.document.lines);for(var v=r.next();!v.done;v=r.next()){v=v.value;var y=this.textLayout.lineCharBoundsCache.get(v);if(y){var A=[],E=void 0,F=0;if(y){y=$jscomp.makeIterator(y);for(var H=y.next();!H.done;H=y.next()){H=H.value;if(E){if(rd.num.roundTo(E.width,.001)==rd.num.roundTo(H.width||0,.001)&&H.height==E.height){F++;
continue}A.push([F,rd.num.roundTo(E.width||0,.001),E.height||0])}F=1;E=H}}E&&A.push([F,rd.num.roundTo(E.width||0,.001),E.height||0]);f.push([v.row,rd.arr.flatten(A)])}}a.cachedLineBounds=f}},{key:"spec",value:function(){var a=Zb._get(Object.getPrototypeOf(k.prototype),"spec",this).call(this);a.textString=this.textString;return rd.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||Zb._get(Object.getPrototypeOf(k.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var f=this,l=a.prop,r=a.selector,v=a.meta,y=this.lineWrapping,A=!1,E=!1,F=!1,H=!1,J=!1,O=!1;if(r)A="replace"===r,H="addTextAttribute"===r,this._displacementChange=!this._displacing&&A;else switch(l){case "scroll":J=E=!0;break;case "extent":E=!0;l=a.prevValue.subPt(a.value);O=(F=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":y&&(H=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":H=a.prevValue!=a.value;break;case "lineWrapping":H=!0;break;case "borderWidth":case "fixedHeight":F=a.prevValue!=a.value;break;case "padding":F=!0}Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a);l=function(){f._textChange=
!0;J&&(f.viewState.wasScrolled=!0);(H||O||F&&!v.styleSheetChange)&&f.invalidateTextLayout(H,H);(F||H)&&f.document&&f.world()&&f.document.lines.forEach(function(L){return L.hasEstimatedExtent=!0});f._displacementChange&&(f._displacementChange=!1);A&&rd.signal(f,"textChange",a);E&&rd.signal(f,"viewChange",a);f._textChange=!1};v.animation?rd.promise.delay(v.animation.duration).then(l):l()}},{key:"onSubmorphChange",value:function(a,f){var l=this,r,v,y,A,E,F,H,J,O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress){if(a.meta&&a.meta.styleSheetChange)return L.return();Zb._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",l).call(l,a,f);return a.meta.animation?L.yield(a.meta.animation.asPromise(),2):L.jumpTo(2)}if(l._textChange||l._positioningSubmorph===f)return L.return();r=a;v=r.prop;y="position"==v||"extent"==v||"scale"==v||"rotation"==v;l.displacingMorphMap.get(f)&&y&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(Y){return Y.top>=f.top}).forEach(function(Y){l._intersectionShapeCache&&
l._intersectionShapeCache.delete(Y);l.updateTextDisplacementFor(Y)});A=l.embeddedMorphMap.get(f)||{};if((E=A.anchor)&&y){if("position"==v)return l._positioningSubmorph=f,f.position=a.prevValue,l._positioningSubmorph=null,L.return();F=f.bounds();H=f._lastBounds;J=E.position.row;O=l.document.getLine(J);H&&H.height==F.height&&H.bottom()==F.bottom()||(O.hasEstimatedExtent=!0,f._lastBounds=F)}L.jumpToEnd()})}},{key:"removeMorph",value:function(a,f){f=void 0===f?!0:f;var l=this.embeddedMorphMap,r=this.displacingMorphMap;
r&&r.has(a)&&this.toggleTextWrappingAround(a,!1);if(l&&l.has(a)){if(r=l.get(a).anchor){var v=r.position;r=v.row;v=v.column;this.replace({start:{row:r,column:v},end:{row:r,column:v+1}},[],!0,f);this.replace}l.delete(a)}return Zb._get(Object.getPrototypeOf(k.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,f){var l=this;if(f)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));
else if(f=this.displacingMorphMap.get(a))this._displacing=!0,f.forEach(function(r){return l.removeMorph(r)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var f=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(a),r=this.computeDisplacementRectsFor(a).values(),v=[];l.forEach(function(H){return f.removeMorph(H,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);r=$jscomp.makeIterator(r);
for(var y=r.next();!y.done;y=r.next()){y=y.value;var A=l.shift()||rd.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),E=this.textLayout.textPositionFromPoint(this,y.leftCenter());A.setBounds(y);this.insertText([A,{}],E);this.viewState._needsFit=!1;if(F==A.top)A.remove();else{var F=A.top;v.push(A)}}l.forEach(function(H){return f.removeMorph(H,!1)});this.displacingMorphMap.set(a,v);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var f=this.textLayout,l=f.textPositionFromPoint(this,
a.topLeft),r=f.textPositionFromPoint(this,a.bottomLeft),v=[];a._displacementRange=rd.Range.fromPositions(l,r);for(l=l.row;l<r.row+1;l++)v.push.apply(v,$jscomp.arrayFromIterable(f.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(r=this._intersectionShapeCache.get(a))||(r=a.isPath?rd.Shapes.path(rd.getSvgVertices(a.vertices)):"Ellipse"==rd.getClassName(a)?rd.Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):rd.Shapes.rectangle(a.left,a.top,
a.width,a.height));this._intersectionShapeCache.set(a,r);a=this.width;l=new Map;v=$jscomp.makeIterator(v);for(var y=v.next();!y.done;y=v.next()){y=y.value;var A=f.computeMaxBoundsForLineSelection(this,y),E=A.height;A=A.y;var F=rd.Shapes.rectangle(a,E,0,A);F=rd.Intersection.intersect(F,r);1>F.points.length||(F=rd.Rectangle.unionPts(F.points.map(rd.Point.fromLiteral)),F.y=A,F.height=E,F.x-=15,F.width+=30,l.set(y,F))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",
value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var f=a,l=f.column,r=f.row;a=new rd.Anchor(f.id,"number"===typeof r&&"number"===typeof l?{row:r,column:l}:void 0,f.insertBehavior||"move")}if(f=a.id&&this.anchors.find(function(v){return v.id===a.id}))return Object.assign(f,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var f=this.anchors,l,r=f.length;r--;){var v=f[r];if(v.id==a||v===a)l=v,f.splice(r,1)}return l}},{key:"addMarker",
value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var f="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(l){return l.id!==f});this.makeDirty()}},{key:"saveMark",value:function(a,f){a=void 0===a?this.cursorPosition:a;var l=this.activeMark;l&&l!==a&&!l.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(l));f?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",
value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=rd.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||rd.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var f=this.selection,l=this.savedMarks,r=this.multiSelect?this.multiSelect.getAllRanges().length:1;
r=l.length-(r-(f.index||0));f=l[r]||f.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=l.slice(0,r).concat(a).concat(l.slice(r+1)));return f}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=null;rd.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},
{key:"pluginCollect",value:function(a,f){f=void 0===f?[]:f;this.plugins.forEach(function(l){return"function"===typeof l[a]&&(f=l[a](f))});return f}},{key:"pluginInvokeFirst",value:function(a,f){for(var l=[],r=1;r<arguments.length;++r)l[r-1]=arguments[r];return(r=this.pluginFind(function(v){return"function"===typeof v[a]}))?r[a].apply(r,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},
{key:"lookupEditorPluginNamed",value:function(a){var f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a=rd.config.ide.modes.aliases[a]||a,l=(f=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",y.yield(lively.modules.doesModuleExist(l),2);if(3!=y.nextAddress)return y.yieldResult?y.yield(lively.modules.module(l).load(),3):y.return(null);r=y.yieldResult;v=r.default;return y.return(v)})}},{key:"changeEditorMode",value:function(a){var f=this,
l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l=f.plugins.filter(function(y){return!y.isEditorPlugin}),a?"string"!==typeof a?v.jumpTo(2):v.yield(f.lookupEditorPluginNamed(a),3):(f.plugins=l,v.return(null));if(2!=v.nextAddress){r=v.yieldResult;if(!r)throw Error("Cannot find editor mode "+a);a=new r(rd.config.codeEditor.defaultTheme);f.evalEnvironment&&(a.evalEnvironment=f.evalEnvironment)}f.plugins=l.concat(a);return v.return(a)})}},{key:"invalidateTextLayout",
value:function(a,f){f=void 0===f?!1:f;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===a?0:a)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,f))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(Zb._get(Object.getPrototypeOf(k.prototype),
"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(rd.commands))}},{key:"execCommand",value:function(a,f,l,r){function v(S){(A.hasOwnProperty("scrollCursorIntoView")?A.scrollCursorIntoView:1)&&rd.fun.debounceNamed("execCommand-scrollCursorIntoView-"+S.id,100,function(){return S.scrollCursorIntoView()})()}var y=this,A=(this.lookupCommand(a)||{}).command;if(A){var E=this.inMultiSelectMode(),F=A.hasOwnProperty("multiSelectAction")?
A.multiSelectAction:"forEach";if(E&&"forEach"===F){var H=this.selection;E=this.selection.selections.slice().reverse();this.selection=E[0];this._multiSelection=H;try{var J=this.execCommand(a,f,l,r)}catch(S){throw this.selection=H,this._multiSelection=null,this.selection.mergeSelections(),S;}if(!J)return J;var O=[J];if("function"===typeof J.then&&"function"===typeof J.catch)return rd.promise.finally(rd.promise.chain([function(){return J}].concat(E.slice(1).map(function(S){return function(){y.selection=
S;return Promise.resolve(y.execCommand(a,f,l,r)).then(function(ea){return O.push(ea)})}}))).then(function(){return O}),function(){y.selection=H;y._multiSelection=null;y.selection.mergeSelections()});try{for(var L=$jscomp.makeIterator(E.slice(1)),Y=L.next();!Y.done;Y=L.next())this.selection=Y.value,O.push(this.execCommand(a,f,l,r))}finally{this.selection=H,this._multiSelection=null,this.selection.mergeSelections()}return O}(J=this.commandHandler.exec(a,this,f,l,r))&&("function"===typeof J.then&&"function"===
typeof J.catch?J.then(function(){return v(y)}):v(this));return J}}},{key:"changeDocument",value:function(a,f){f=void 0===f?!1:f;if(this.document)var l=this.defaultTextStyle;else f=!1;this.document=a;this.textLayout.reset();f&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f,f+1)}},{key:"charLeft",
value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f-1,f)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,
a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var f=this.getLine(a.row);return a.column===
f.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,f){a=void 0===a?this.cursorPosition.row:
a;f=void 0===f?!0:f;"number"!==typeof a&&this.cursorPosition.row;var l=this.getLine(a);a={start:{column:0,row:a},end:{column:l.length,row:a}};l=l.match(/^\s*/);l[0].length&&f&&(a.start.column+=l[0].length);return new rd.Range(a)}},{key:"screenLineRange",value:function(a,f){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===f?!0:f)}},{key:"insertTextAndSelect",value:function(a,f){f=void 0===f?null:f;a=String(a);f?this.selection.range=this.insertText(a,f):this.selection.text=
a}},{key:"append",value:function(a){var f=this;return this.saveExcursion(function(){return f.insertText(a,f.documentEndPosition)})}},{key:"insertText",value:function(a,f,l,r){f=void 0===f?this.cursorPosition:f;return this.replace({start:f,end:f},a,void 0===l?!0:l,void 0===r?!0:r)}},{key:"deleteText",value:function(a,f){f=void 0===f?!0:f;var l=this.textAndAttributesInRange(a);this.replace(a,[],!1,f);return l}},{key:"replace",value:function(a,f,l,r,v,y){var A=this;l=void 0===l?!0:l;r=void 0===r?!0:
r;v=void 0===v?!0:v;y=void 0===y?!0:y;a=a.isRange?a:new rd.Range(a);var E="string"===typeof f?[f,null]:Array.isArray(f)?f:[String(f||""),null];f=!E.length||2==E.length&&!E[0];var F=a.isEmpty();if(f&&F)return a;var H;l&&(H=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var J=[];for(l=0;l<E.length;l+=2)f=E[l],F=E[l+1],f.isMorph&&J.push(f),H&&(E[l+1]=Object.assign({},H,{},F));v&&this.undoManager.undoStart(this,"replace");var O=this.textAndAttributesInRange(a),L=
this.document.replace(a,E,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,E],undo:{target:this,selector:"replace",args:[L,O,!1]}},function(){r&&(A.invalidateTextLayout(!1,!1),A.textLayout.resetLineCharBoundsCacheOfRange(A,L));if(!rd.eqPosition(a.end,L.end)){if(rd.lessPosition(L.end,a.end)){var Y=$jscomp.makeIterator((new rd.Range(a)).subtract(L)).next().value;A.anchors.forEach(function(ea){return ea.onDelete(Y)})}else{var S=
$jscomp.makeIterator((new rd.Range(L)).subtract(a)).next().value;A.anchors.forEach(function(ea){return ea.onInsert(S)})}A._multiSelection?A._multiSelection.updateFromAnchors():A.selection.updateFromAnchors()}A._updateEmbeddedMorphsDuringReplace(J,L,E,O);A._isDeserializing&&A._initializedByCachedBounds||A.textLayout.estimateLineHeights(A,!1);y&&A.consistencyCheck()});v&&this.undoManager.undoStop();return L}},{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,f,l,r){for(var v=this.embeddedMorphMap,
y=0;y<r.length;y+=2){var A=r[y];if(A.isMorph&&!a.includes(A)){if(v){var E=v.get(A);E&&E.anchor&&(this.removeAnchor(E.anchor),rd.disconnect(E.anchor,"position",A,"position"));v.set(A,Object.assign({},E,{anchor:null}))}A.remove()}}if(a.length)for(l=rd.textAndAttributesWithSubRanges(f.start,l),f=l.ranges,l=l.textAndAttributes,r=0;r<f.length;r++)y=l[2*r],y.isMorph&&(console.assert(a.includes(y),"????"),A=f[r].start,y.owner!==this&&this.addMorph(y),v&&(v.has(y)?v.get(y).anchor.position=A:(A=this.addAnchor(Object.assign({id:"embedded-"+
y.id},A)),rd.connect(A,"position",y,"position",{updater:function(F,H){var J=this.targetObj.owner,O=this.targetObj;H=J&&J.isText?J.charBoundsFromTextPosition(H).topLeft().subPt(J.origin):O.position;J&&(J._positioningSubmorph=O);F(H);J&&(J._positioningSubmorph=!1)}}).update(A.position),v.set(y,{anchor:A}))))}},{key:"applyJsDiffPatch",value:function(a){function f(F,H,J,O){var L=r.indexToPosition(F+J),Y=r.indexToPosition(H+J);O.push(r.deleteText({start:L,end:Y}));return J-(H-F)}function l(F,H,J,O){O.push(r.insertText(H,
r.indexToPosition(F+J)));return J}var r=this,v=[],y=0,A=0;a=$jscomp.makeIterator(a);for(var E=a.next();!E.done;E=a.next())E=E.value,E.removed?A=f(y,y+E.count,A,v):E.added&&(A=l(y,E.value,A,v)),y+=E.count;return v}},{key:"applyTextChanges",value:function(a,f,l,r){f=void 0===f?0:f;l=void 0===l?!0:l;var v=[];a=$jscomp.makeIterator(a);for(var y=a.next();!y.done;y=a.next()){var A=$jscomp.makeIterator(y.value);y=A.next().value;var E=A.next().value;A=A.next().value;f&&(E="number"===typeof E?E:this.positionToIndex(E),
A&&"string"!==typeof A&&!Array.isArray(A)&&(A=("number"===typeof A?A:this.positionToIndex(A))+f),E+=f);E="number"===typeof E?this.indexToPosition(E):E;switch(y){case "delete":case "remove":y="number"===typeof A?this.indexToPosition(A):A;v.push(this.deleteText({start:E,end:y},r));break;case "insert":v.push(this.insertText(A,E,l,r));break;default:console.warn("[applyTextChanges] unknown type: "+y)}}return v}},{key:"modifyLines",value:function(a,f,l){var r=this;l=rd.arr.range(a,f).map(function(v){return r.getLine(v)}).map(l).join("\n")+
"\n";this.deleteText({start:{row:a,column:0},end:{row:f+1,column:0}},!1);this.insertText(l,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var f=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(f.start.row,f.end.row,a)}},{key:"withLinesDo",value:function(a,f,l){var r=this;return rd.arr.range(a,f).map(function(v){var y=r.getLine(v);v=rd.Range.create(v,0,v,y.length);return l(y,v)})}},{key:"withSelectedLinesDo",value:function(a){var f=this.selection.isEmpty()?
this.lineRange(void 0,!1):this.selection.range,l=f.start.row;f=f.end;var r=f.row;return this.withLinesDo(l,0===f.column&&r>l?r-1:r,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var f=this.getLine(a),l=this.getLine(a+1);l=f+l.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,row:a+2}},l,!0);return{row:a,column:f.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",
value:function(a,f){var l=this;a=void 0===a?this.selection.range:a;f=Object.assign({time:1E3,fill:rd.Color.orange},f);var r=f.id||"flash"+rd.string.newUUID();this.addMarker({id:r,range:a,style:{"background-color":f.fill.toCSSString(),"pointer-events":"none"}});rd.fun.debounceNamed("flash-"+r,f.time,function(){return l.removeMarker(r)})()}},{key:"addTextAttribute",value:function(a,f){var l=this;f=void 0===f?this.selection:f;var r={start:f.start,end:f.end};this.undoManager.undoStart(this,"addTextAttribute");
this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,r],undo:{target:this,selector:"removeTextAttribute",args:[a,r]}},function(){l.document.mixinTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,f){var l=this;f=void 0===f?this.selection:f;var r={start:f.start,end:f.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",
args:[a,r],undo:{target:this,selector:"addTextAttribute",args:[a,r]}},function(){l.document.mixoutTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var f=0;f<a.length;)this.onAttributesChanged(a[f]),f+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",
value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var f=this.textLayout;f&&f.resetLineCharBoundsCacheOfRange(this,
a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(f,l){return 0!=l%2}).reduce(function(f,l){for(var r in l){var v=l[r];if(!f.hasOwnProperty(r)||void 0!==v&&null!==v)f[r]=v}return f},{})}},{key:"setStyleInRange",value:function(a,f){var l=this;f=void 0===f?this.selection:f;for(var r=
this.textAndAttributesInRange(f),v={start:Object.assign({},f.start),end:Object.assign({},f.start)},y=[],A=0;A<r.length;A+=2){var E=r[A],F=r[A+1],H=-1;"string"!==typeof E&&(E=rd.objectReplacementChar);for(;-1<(H=E.indexOf("\n"));)0<H&&(v.end.column+=H,y.push(v,F)),v={row:v.end.row+1,column:0},v={start:v,end:Object.assign({},v)},E=E.slice(H+1);v.end.column+=E.length;y.push(v,F);v={start:Object.assign({},v.end),end:Object.assign({},v.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,
selector:"setStyleInRange",args:[a,f],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[y]}},function(){l.document.setTextAttribute(a,f);l.consistencyCheck();l.onAttributesChanged(f)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;for(var f=this.document.textAndAttributesInRange(a),l={},r=0;r<f.length;r+=2)Object.assign(l,f[r+1]);this.removeTextAttribute(l,a)}},{key:"changeStyleProperty",value:function(a,f,l){var r=this;l=
void 0===l?this.selection:l;l=this.getStyleInRange(l)[a];var v=f(l);this.selections.forEach(function(y){var A={};return r.addTextAttribute((A[a]=v,A),y)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(f){var l=a.charBoundsFromTextPosition(f.start),r=a.charBoundsFromTextPosition(f.end);return f.start.row===f.end.row?l.union(r):rd.rect(rd.pt(a.padding.left(),
l.top()),rd.pt(a.width-a.padding.left(),r.bottom()))}).reduce(function(f,l){return l.union(f)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return rd.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",
value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,f,l,r,v){function y(H,J){H=H.slice();H.push({x:rd.arr.last(H).x+rd.arr.last(H).width});for(var O=0,L=Infinity,Y=0;Y<H.length;Y++){var S=Math.abs(H[Y].x-J);S<L&&(L=S,O=Y)}return O}a=void 0===a?1:a;f=void 0===f?this.cursorPosition:
f;l=void 0===l?!1:l;if(0===a)return f;"number"===typeof v&&(v-=this.padding.left());var A=f.row,E=f.column;if(l&&this.lineWrapping){A=this.textLayout.rangesOfWrappedLine(this,f.row);if(!A.length)return f;E=A.length-1-A.slice().reverse().findIndex(function(H){return H.start.column<=f.column});if(1<=a){var F=0===E?0>=f.row?null:rd.arr.last(this.textLayout.rangesOfWrappedLine(this,f.row-1)):A[E-1];if(!F)return f}else if(-1>=a&&(F=(A.length-1===E?f.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,
f.row+1):A.slice(E+1))[0],!F))return f;A=F.start.row;E=this.textLayout.charBoundsOfRow(this,A).slice(F.start.column,F.end.column+1);E=F.start.column+y(E,v)}else A=Math.min(Math.max(0,f.row-a),this.lineCount()-1),"number"===typeof v&&(F=this.textLayout.charBoundsOfRow(this,A),E=y(F,v));F={row:A,column:E};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),F,l,r,v):F}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",
value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===f?!1:f);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,f=a.start;return a.text||this.getLine(f.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,f,l){a=void 0===a?this.selection.range:a;
f=void 0===f?rd.pt(0,0):f;l=void 0===l?!0:l;var r=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-r;this.scroll=a<this.height||!1===l?this.scroll.withY(r+a/2-this.height/2).addPt(f):this.scroll.withY(r).addPt(f)}},{key:"centerRow",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?rd.pt(0,0):f;return this.alignRowAtTop(a,f.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;
f=void 0===f?rd.pt(0,0):f;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(f)}},{key:"alignRowAtBottom",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?rd.pt(0,0):f;var l=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,f.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(a,f){f=void 0===f?rd.pt(0,0):f;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);
a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(rd.pt(-20,0)));var r=20<l.bottom()-a.bottom()?"bottomLeft":"topLeft";l=a[r]().subPt(l.translateForInclusion(a)[r]()).addPt(f);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(f),this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,f){var l=this;f=void 0===f?this.cursorPosition:f;var r=this.scroll;f=this.selection.lead;var v=this.charBoundsFromTextPosition(f).y-
r.y;r=!1;var y=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(f).y-v)};try{var A=a();r=A&&A instanceof Promise}finally{!r&&y()}r&&rd.promise.finally(A,y);return A}},{key:"saveExcursion",value:function(a,f){var l=this;f=Object.assign({useAnchors:!1},f);var r=this.selection.isMultiSelection?this.selection.selections.map(function(E){return E.directedRange}):[this.selection],v=f.useAnchors?r.map(function(E){var F=E.end;return[l.addAnchor(Object.assign({},E.start,{id:"save-excursion-"+
rd.string.newUUID()})),l.addAnchor(Object.assign({},F,{id:"save-excursion-"+rd.string.newUUID()}))]}):null,y=!1;f=f.useAnchors?function(){var E=v.map(function(F){var H=$jscomp.makeIterator(F);F=H.next().value.position;H=H.next().value.position;return{start:F,end:H}});l.selections=E;v.forEach(function(F){var H=$jscomp.makeIterator(F);F=H.next().value;H=H.next().value;l.removeAnchor(F);l.removeAnchor(H)})}:function(){return l.selections=r};try{var A=this.keepPosAtSameScrollOffsetWhile(a);y=A&&A instanceof
Promise}finally{!y&&f()}y&&rd.promise.finally(A,f);return A}},{key:"alignRow",value:function(a,f){f=void 0===f?"center":f;if(this.isClip()){var l=this.scroll,r=this.padding;l=this.innerBounds().insetByRect(r).translatedBy(l);a=this.charBoundsFromTextPosition({row:a,column:0});if(f="top"===f||"bottom"===f?l[f]()-a[f]():"center"===f?l[f]().y-a[f]().y:0)this.scroll=this.scroll.addXY(0,-f)}}},{key:"fit",value:function(){var a=this,f=this.viewState,l=this.fixedWidth,r=this.fixedHeight;f._needsFit=!1;if(r&&
l||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var v=this.textBounds().outsetByRect(this.padding),y=function(){r||a.height==v.height||(a.height=v.height);l||a.width==v.width||(a.width=v.width);a.embeddedMorphs.forEach(function(A){A=a.embeddedMorphMap.get(A).anchor;A.position=A.position})};f._needsFit=!1;this.document.lines.find(function(A){return A.hasEstimatedExtent})?this.whenRendered().then(y):y();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&
this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var f=this.screenLineRange(a,!0).start.column;return a.column-f}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,
a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();Zb._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,
a)}},{key:"directRender",value:function(){var a=this.env.renderer,f=this.textRenderer;a&&f&&!a._stopped&&(rd.renderSubTree(this,a),f.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var f=a.state;if(f.clickedOnMorph===this){f=(f.clickCount-1)%3+1;var l=this.localize(a.position),r=this.textPositionFromPoint(l);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,
l);this.selectable&&(a.isShiftDown()?this.selection.lead=r:a.isAltDown()?this.selection.addRange(rd.Range.at(r)):(this.selection.disableMultiSelect(),1===f?a.isShiftDown()?this.selection.lead=r:this.selection={start:r,end:r}:2===f?this.execCommand("select word",null,1,a):3===f&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var f="lively://text-doit/"+this.id;lively.modules.module(f);return{context:a.context||
this,format:"esm",targetModule:f}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,f){var l=this;f=(f=this.textAttributeAtPoint(f)||[],f.doit);if(!f||!f.code)return!1;var r=this.evalEnvForDoit(f),v=lively.modules.module(r.targetModule);v.recorder.evt=a;lively.vm.runEval(f.code,r).catch(function(y){return l.world().logError(Error("Error in text doit: "+y.stack))}).then(function(){return v.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&
a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,f){function l(F){return"\t"===F||" "===F}function r(F,H,J,O,L){for(var Y=1;(0>L?0<=O-1:O+1<F.length)&&(O+=L,F[O]==H&&H!=J&&Y++,F[O]==J&&Y--,0!=Y););return O}function v(F,H,J,O){for(var L=H;0>J?0<=L-1:L+1<F.length;)if(L+=J,F[L]==O)return 0<J?[H,L]:[L+1,H];return 0<J?[H+1,F.length-1]:[0,H]}if(!a)return f;if(0==f||f==a.length)return[0,a.length-1];
var y=f-1;if(0<f){if("\n"==a[f-1]||"\r"==a[f-1])return v(a,f,1,a[f-1]);var A="*({[<'\"`".indexOf(a[f-1]);"*"==a[f-1]&&(0>f-2||"/"!=a[f-2])&&(A=-1);if(0<=A)return y=r(a,"*({[<'\"`"[A],"*)}]>'\"`"[A],f-1,1),[f,y-1]}if(f<a.length){if("\n"==a[f]||"\r"==a[f])return v(a,f,-1,a[f]);A="*)}]>'\"`".indexOf(a[f]);"*"==a[f]&&(f+1>=a.length||"/"!=a[f+1])&&(A=-1);if(0<=A)return f=r(a,"*)}]>'\"`"[A],"*({[<'\"`"[A],f,-1),[f+1,y]}if("/"===a[f-1]&&"/"===a[f-2]){for(;y+1<a.length&&"\n"!==a[y+1]&&"\r"!==a[y+1];)y++;
return[f,y]}A=f;for(var E=y;0<=A-1&&l(a[A-1]);)A--;for(;E<a.length&&l(a[E+1]);)E++;if(1<=E-A)return[A,E];for(A=f<a.length?a[f]:"";0<=f-1&&((a[f-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[f-1]?0:0<="0123456789".indexOf(A)));)A=a[f-1],f--;for(;y+1<a.length&&((a[y+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[y+1]?0:0<="0123456789".indexOf(A)));)A=a[y+1],y++;return[f,y]}},{key:"onContextMenu",value:function(a){var f=this;if(a.targetMorph===this){a.stop();var l=this.textPositionFromPoint(this.localize(a.position)),
r=this.selection.selections||[this.selection];if(this.selection.isEmpty()||r.every(function(v){return!v.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(v){return f.openMenu(v,a)}).catch(function(v){return $world.logError(v)})}}},{key:"onDrop",value:function(a){var f=a.hand.grabbedMorphs.filter(function(r){return r.isLayoutable});Zb._get(Object.getPrototypeOf(k.prototype),"onDrop",this).call(this,a);if(f[0]){var l=this.textPositionFromPoint(this.localize(a.hand.globalPosition));
this.insertText([f[0],null],l);f[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var f=this;if(a.simpleDrop)return null;var l=this.whatsVisible,r=l.startRow;l=Math.min(this.documentEndPosition.row,l.endRow);var v=this.document,y=this.padding.left(),A=this.padding.top();r=rd.arr.range(r,l).reduce(function(E,F){var H=f.textLayout.charBoundsOfRow(f,F).slice();1<=H.length&&0==rd.arr.last(H).width&&(rd.arr.last(H).width=12);if(1<H.length){var J=rd.arr.last(H);H.push({x:J.x+
J.width,y:J.y,height:J.height,width:J.width||12})}H=H.map(function(O,L){O=rd.Rectangle.fromLiteral(O).translatedBy(rd.pt(y,A+v.computeVerticalOffsetOf(F)));var Y=f.getGlobalTransform().transformRectToRect(O);return{textPos:{row:F,column:L},bounds:O,globalBounds:Y,morph:a.showDropGrid?rd.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:O,border:{width:1,color:rd.Color.green},fill:null}):null}});return E.concat(H)},[]);r.forEach(function(E){return E.morph&&f.addMorph(E.morph)});return r}},{key:"onDropHoverIn",
value:function(a){var f={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},l=a.hand.grabbedMorphs[0];l&&(a.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(f);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var r=a.get(this);r||(r={},a.set(this,r));r.config=f;r.dropGrid=l}},{key:"onDropHoverUpdate",
value:function(a){var f=a.hand.grabbedMorphs[0];if(f){var l=a.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var r=l.config;a=a.positionIn(this);for(var v,y,A=Infinity,E=$jscomp.makeIterator(l.dropGrid),F=E.next();!F.done;F=E.next()){F=F.value;if(F.bounds.containsPoint(a)){v=F;break}var H=F.bounds.closestPointToPt(a).dist(a);H<A&&(A=H,y=F)}v||(v=y);v&&(y=l.placeholder,y||(l.placeholder=y=rd.morph({fill:f.fill,extent:f.extent,reactsToPointer:!1,acceptsDrops:!1})),rd.obj.equals(y._textPos||{},
v.textPos)||(this!==y.owner&&this.addMorph(y),y.position=v.bounds.topLeft(),r&&r.useTextFlowPlaceholder&&(y.remove(),y._textPos=v.textPos,this.insertText([y,null],v.textPos))))}else f=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=f}}},{key:"onDropHoverOut",value:function(a){var f=a.hand.grabbedMorphs[0];f&&(f.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(f=a.get(this))a.delete(this),f.dropGrid&&(f.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),
f.dropGrid=null),f.placeholder&&(f.placeholder.remove(),f.placeholder=null)}},{key:"menuItems",value:function(){var a=this,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return f=$jscomp,l=f.makeIterator,A.yield(Promise.all([Zb._get(Object.getPrototypeOf(k.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);r=l.call(f,A.yieldResult);v=r.next().value;y=r.next().value;return A.return(v.concat({isDivider:!0}).concat(y))})}},{key:"menuItemsForContextMenu",
value:function(){var a=this,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:f=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},
{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},["run command",function(){a.focus();a.world().execCommand("run command")}]],l=$jscomp.makeIterator(a.plugins),r=l.next();case 2:if(r.done){y.jumpTo(4);break}v=r.value;if("function"!==typeof v.getMenuItems){y.jumpTo(3);break}return y.yield(v.getMenuItems(f),6);case 6:f=y.yieldResult;case 3:r=
l.next();y.jumpTo(2);break;case 4:return y.return(f)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat(a).concat(rd.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){Zb._set(Object.getPrototypeOf(k.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;
var a=Zb._get(Object.getPrototypeOf(k.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,
a);rd.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||(this.selection.cursorBlinkStart(),rd.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){rd.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;
this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!rd.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,f){f=void 0===f?!1:f;if(this.isFocused()){a.stop();
var l=this.selection;try{for(var r=this.textAndAttributesInRange(this.selection.range),v=this.defaultTextStyle,y={},A=0;A<r.length;A+=2){var E=r[A];if(E.isMorph)if(E.isDisplacementMorph)r[A]="";else{var F=y[A]=rd.serializeMorph(r[A]);r[A]=rd.deserializeMorph(F,{reinitializeIds:!0})}}var H=rd.extractHTMLFromTextMorph(this,r);a.domEvt.clipboardData.setData("text/html",H);for(var J in y)r[J]=y[J];var O=JSON.stringify({textAndAttributes:r,defaultTextStyle:v});a.domEvt.clipboardData.setData("application/x-lively-text",
O)}catch(L){$world.logError(L)}a.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:rd.config.codeEditor.collapseSelection||!1,delete:f,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var f=this;if(!this.rejectsInput()){a.stop();var l="";try{l=a.domEvt.clipboardData.getData("text")}catch(A){console.warn(A)}if(!this.editorPlugin)try{var r=a.domEvt.clipboardData.getData("application/x-lively-text");var v=r&&JSON.parse(r);var y=
v.textAndAttributes;for(a=0;a<y.length;a+=2)"string"!==typeof y[a]&&(y[a]=rd.deserializeMorph(y[a],{reinitializeIds:!0}))}catch(A){console.warn(A)}y=this.selection;y=y.isMultiSelection?y.selections:[y];v&&this.undoManager.group();y.forEach(function(A){v?f.replace(A.range,v.textAndAttributes,!1,!0,!0):A.text=l;f.saveMark(A.start);A.collapseToEnd()});v&&this.undoManager.group()}}},{key:"onFocus",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,a);this.makeDirty();
this.selection.cursorBlinkStart();this._originalShadow||((a=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue)&&!a.equals&&(a=new rd.ShadowObject(a)),a&&!a.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow),this.highlightWhenFocused&&this.animate({dropShadow:a,duration:200}))}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});
this._originalShadow=null;Zb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(a=this.env.renderer.getNodeForMorph(this))&&rd.signal(this,"viewChanged",{prop:"scroll",value:rd.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",
value:function(){var a=this.padding,f=this.borderWidthBottom,l=this.borderWidthTop;return this.height-a.top()-a.bottom()-f-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var f=a=void 0===a?{direction:"up",select:!1}:a;a=f.direction;f=f.select;var l=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),r=this.cursorPosition.column,
v=this.padding;f?this.selection.lead={row:l,column:r}:this.cursorPosition={row:l,column:r};"down"===a?this.alignRowAtTop(l,rd.pt(0,-v.top()-v.bottom())):(this.alignRowAtBottom(l,rd.pt(0,0)),this.alignRowAtBottom(l,rd.pt(0,v.top()+v.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;
a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var f=a-1;0<=f;f--)if(!this.isLineEmpty(f)){var l=f;break}if(void 0===l)return{start:{row:a,column:0},end:{row:a,column:0}}}else l=a;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(a){var f=this.isLineEmpty(a),l=this.documentEndPosition;if(f){for(f=a+1;f<=l.row;f++)if(!this.isLineEmpty(f)){var r=f;break}if(void 0===r)return{start:{row:a,column:0},
end:{row:a,column:0}}}else r=a;return this.paragraphRange(r)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,column:0},end:{row:a,column:0}};var f=this.documentEndPosition;for(a+=1;a<=f.row;a++)if(this.isLineEmpty(a)){var l={row:a-1,column:this.getLine(a-1).length};break}l||(l=f);for(a=l.row-1;0<=a;a--)if(this.isLineEmpty(a)){var r={row:a+1,column:0};break}r||(r={row:0,column:0});return{start:r,end:l}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),
end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",value:function(a){function f(A,E){for(var F="",H=0;H<A.length;H+=2)F+="string"===typeof A[H]?A[H]:rd.objectReplacementChar;A=r.parseIntoLines(F);return 1===A.length?rd.Range.fromPositions(E,{row:E.row,column:E.column+A[0].length}):1<A.length?rd.Range.fromPositions(E,{row:E.row+A.length-1,column:rd.arr.last(A).length}):rd.Range.at(E)}var l=rd.Range.at(this.cursorPosition);
if(!a.length)return l;var r=this,v=a[0];l="replace"===v.selector?f(v.args[1],v.args[0].start):l;for(v=1;v<a.length;v++){var y=a[v];l="replace"===y.selector?l.merge(f(y.args[1],y.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new rd.UndoManager(function(f){return a.includes(f.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();
a&&(a=a.changes.slice().reverse().map(function(f){return f.undo}),this.selection=this.computeTextRangeForChanges(a))}},{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,f,l){f=void 0===f?"right":f;l=void 0===l?{}:l;var r=this["right"===f?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="right"===f?-1:0;return this.document.scanForward(a,function(A,E){if(A===
v){if(0===y)return"right"===f?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"findMatchingBackward",value:function(a,f,l){f=void 0===f?"right":f;l=void 0===l?{}:l;var r=this["right"===f?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="left"===f?-1:0;return this.document.scanBackward(a,function(A,E){if(A===v){if(0===y)return"right"===f?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"search",value:function(a,f){f=void 0===f?{start:this.cursorPosition,
backwards:!1,caseSensitive:!1}:f;return(new rd.TextSearcher(this)).search(Object.assign({needle:a},f))}},{key:"searchForAll",value:function(a,f){f=void 0===f?{caseSensitive:!1}:f;return(new rd.TextSearcher(this)).searchForAll(Object.assign({needle:a},f))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},
{key:"evalEnvironment",set:function(a){var f=this.editorPlugin;f&&(f.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,f){f=void 0===f?{}:f;f=void 0===f.time?Date.now():f.time;if(!(12E4<a.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(r){}l||(l=[]);if(!l.some(function(r){return"string"===typeof r?r===a:r.source===
a})){l.push({source:a,time:f});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(r){}}}}},{key:"doEval",value:function(a,f,l){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;l=void 0===l?this.textInRange(a):l;a=this.pluginFind(function(r){return r.isEditorPlugin&&"function"===typeof r.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);f&&f.logDoit&&this.logDoit(l,f);return a.runEval(l,
f)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,f=a.lead,l=f.row;f=f.column;var r=this.selectionOrLineString();if(a.isEmpty()){var v=r.indexOf("//");-1===v||f<v||0<v&&0<=":\"'".indexOf(r[v-1])?this.selectLine(l):a.range={start:{row:l,column:v+2},end:{row:l,column:r.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,
{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(f){for(var l=[],r=0;r<arguments.length;++r)l[r-0]=arguments[r];console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(f){console.log(f.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:f})},group:function(f){this.groups.push([]);this.logged=rd.arr.last(this.groups);console.group(f)},groupEnd:function(f){console.groupEnd(f)},
steps:function(f){for(var l=[];f.length;){var r=rd.arr.takeWhile(f,function(y){return!y.dump});f=f.slice(r.length);var v=(f.shift()||{}).dump;l.push({actions:r,dump:v})}return l},printToConsole:function(){var f=this;console.clear();this.groups.forEach(function(l){var r=f.steps(l);console.group(r.length);f.steps(l).forEach(function(v,y){v=v.actions;console.group("step "+(y+1));v.forEach(function(A){return console.log.apply(console,$jscomp.arrayFromIterable(A.args))});console.groupEnd("step "+(y+1))});
console.groupEnd(r.length)})},report:function(){var f=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress)return H.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),2);if(3!=H.nextAddress)return l=H.yieldResult,H.yield(System.import("lively.ide/diff/editor-plugin.js"),3);r=H.yieldResult;v=r.default;y=0;A="";E=[];F=0;f.groups.forEach(function(J,O){A+=">>> group "+(O+1)+"\n";F++;y++;var L=f.steps(J);L.forEach(function(Y,S){var ea=
Y.actions;Y=Y.dump;A+=rd.string.indent(">>> step "+(S+1)," ",y)+"\n";F++;y++;ea.forEach(function(qa){qa=rd.string.indent(rd.string.formatFromArray(qa.args.slice()).trim()," ",y);F+=qa.split("\n").length;A+=qa+"\n"});1<=S&&Y&&L[S-1].dump&&(ea=new v,Y=l.createPatch(String(S),L[S-1].dump,Y),ea.tokenize(Y),E.push.apply(E,$jscomp.arrayFromIterable(ea.styledRanges(F,y))),A+=Y,F+=Y.split("\n").length-1);A+=rd.string.indent("<< step "+(S+1)," ",y)+"\n";F++;y--});A+="<<< group "+(O+1)+"\n";F++;y--});return H.return({report:A,
reportStyles:E})})},openReport:function(){var f=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(f.report(),2);l=y.yieldResult;r=l.reportStyles;v=l.report;return y.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:v,rangesAndStyles:r}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(r){var a=
this.document;this.brokenDocument||(this.brokenDocument=a);var f=this.world()||$world;try{var l=new rd.Document([]);l.textAndAttributes=a.textAndAttributes;this.changeDocument(l)}catch(v){f?f.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}f?f.logError(r):console.error(r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,f){return new rd.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",
fontColor:rd.Color.almostBlack,fontSize:11},f))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,f=this.defaultTextStyleProps,l={},r=0;r<f.length;r++){var v=f[r];l[v]=a[v].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;
var a=this.prototype.propertiesAndPropertySettings().properties,f=[],l;for(l in a)a[l].isDefaultTextStyleProp&&f.push(l);return this._defaultTextStyleProps=f}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],
initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],initialize:function(){this.textRenderer=new rd.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],
scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,
after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new rd.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=rd.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==rd.config.text.useSoftTabs?
rd.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:rd.config.text.tabWidth||2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,f=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&f&&this.owner&&(this._measuringTextBox=
!0,rd.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,
set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:rd.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?rd.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",
a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:rd.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (rd.config.text.useMultiSelect?rd.MultiSelection:rd.Selection)(this);this.setProperty("selection",
a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var f=this;
this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(l){return f.selection.addRange(l)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},
value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var f=$jscomp.makeIterator(a[0]),l=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return l}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&
this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return rd.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a=
{},f=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,r=0;r<f.length;r++){var v=f[r],y=this[v];y!==l[v]&&(a[v]=y)}return a}},nativeCursor:{defaultValue:"",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:rd.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,
after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:rd.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:rd.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:rd.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light",
"lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,
isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle",
"viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var f=
this,l=rd.arr.withoutAll(a,this.anchors);rd.arr.withoutAll(this.anchors,a).forEach(function(r){return f.removeAnchor(r)});l.forEach(function(r){return f.addAnchor(r)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var f=this;a=a.map(function(r){return r.isAnchor?r:f.addAnchor(Object.assign({},r,{id:"saved-mark-"+rd.string.newUUID()}))});var l=this.savedMarks.filter(function(r){return!a.includes(r)});a>rd.config.text.markStackSize&&
l.push.apply(l,$jscomp.arrayFromIterable(a.splice(0,a.length-rd.config.text.markStackSize)));l.map(function(r){return f.removeAnchor(r)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+rd.string.newUUID()}));else{var f=this.activeMark;this.savedMarks.includes(f)||
this.removeAnchor(f)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var f=this,l=this.getProperty("plugins");rd.arr.withoutAll(l,a).forEach(function(r){return r&&f.removePlugin(r)});a.forEach(function(r){return r&&f.addPlugin(r)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],d,{pathInPackage:function(){return"text/morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1305,end:113370})}(rd.Morph));rd.Text=au;rd.Text=au;rd.Text=au;var fwa=Object.freeze({__proto__:null,Text:au}),Dh=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");Dh.obj=dg;Dh.promise=Hg;Dh.arr=Lf;Dh.string=Ih;Dh.properties=ir;Dh.Rectangle=ye;Dh.Color=ng;Dh.signal=em;
Dh.vdom=cI;Dh.Morph=kl;Dh.config=Ul;Dh.defaultStyle=Fj;Dh.defaultAttributes=Yw;Dh.Icon=wp;Dh.Icons=hO;Dh.splitTextAndAttributesIntoLines=yH;Dh.h=Dh.vdom.h;var bu=Ca("az",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),k=d.hasOwnProperty("Label")&&"function"===typeof d.Label?d.Label:d.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onChange",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),
"onChange",this).call(this,a);a.prop&&a.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{}:a,l=f.fontMetric,r=f.position,v=f.rightCenter,y=f.leftCenter,A=f.topCenter,E=f.bottom,F=f.top,H=f.right,J=f.left,O=f.bottomCenter,L=f.bottomLeft,Y=f.bottomRight,S=f.topRight,ea=f.topLeft,qa=f.center;f=f.extent;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Dh.obj.dissoc(a,["fontMetric"]));
l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==f&&(this.extent=f);void 0!==r&&(this.position=r);void 0!==v&&(this.rightCenter=v);void 0!==y&&(this.leftCenter=y);void 0!==A&&(this.topCenter=A);void 0!==E&&(this.bottom=E);void 0!==F&&(this.top=F);void 0!==H&&(this.right=H);void 0!==J&&(this.left=J);void 0!==O&&(this.bottomCenter=O);void 0!==L&&(this.bottomLeft=L);void 0!==Y&&(this.bottomRight=Y);void 0!==S&&(this.topRight=S);void 0!==ea&&(this.topLeft=ea);void 0!==qa&&(this.center=
qa)}},{key:"__additionally_serialize__",value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,a,f,l,r);this.fit();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,f,l){Zb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,a,f,l);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=
Dh.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return Dh.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",
value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return Dh.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var a=this,f=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,r){if(r%2)return{fontFamily:l&&l.fontFamily||a.fontFamily,fontWeight:l&&l.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(l){return f.isFontSupported(l.fontFamily,
l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Dh.promise.waitFor(5E3,function(){return a.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,f=$jscomp.makeIterator(this.textAndAttributes),l=f.next().value;f=f.next().value;var r=Object.assign({},this.textStyle,{},f);f=this.padding;a.isProportional(r.fontFamily)?(a=a.sizeFor(r,l),l=a.width,
a=a.height):(r=a.sizeFor(r,"x"),a=r.height,l=l.length*r.width);return new Dh.Rectangle(0,0,Math.ceil(f.left()+f.right()+l),Math.ceil(f.top()+f.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=this._fontMetric||this.env.fontMetric,f=this.padding,l=this.textStyle,r=this.textAndAttributesOfLines,v=!a.isProportional(l.fontFamily),y=a.sizeFor(l,"x").height,A=0,E=0,F=0;F<r.length;F++){var H=r[F];if(H.length){for(var J=0,O=0,L=0;L<H.length;L+=2){var Y=H[L],S=H[L+1]||{},ea=Object.assign({},
l,{},S);v&&!S.fontFamily||!a.isProportional(ea.fontFamily)?(ea=a.sizeFor(ea,"x"),S=ea.height,O+=Y.length*ea.width,J=Math.max(J,S)):(Y=a.sizeFor(ea,Y),S=Y.height,O+=Y.width,ea.paddingRight&&(O+=Number.parseInt(ea.paddingRight)),ea.paddingLeft&&(O+=Number.parseInt(ea.paddingLeft)),J=Math.max(J,S))}A+=J;E=Math.max(E,O)}else A+=y}return new Dh.Rectangle(0,0,Math.ceil(f.left()+f.right()+E),Math.ceil(f.top()+f.bottom()+A))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&
(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Zb._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var f=[],l=this.textAndAttributesOfLines.length,r=0;r<l;r++){for(var v=this.textAndAttributesOfLines[r],y=0;y<v.length;y+=2){var A=v[y+1];f.push(this.renderChunk(v[y],A))}r<l-1&&f.push(Dh.h("br"))}A=this.textStyle;var E=A.fontColor,F=A.fontSize;l=A.fontStyle;r=A.fontWeight;v=A.textShadow;y=A.textDecoration;var H=A.textStyleClasses,J=this.padding;A={fontFamily:A.fontFamily,fontSize:"number"===typeof F?F+"px":F,color:E?String(E):
"transparent",position:"absolute",cursor:this.nativeCursor};E=Dh.defaultAttributes(this,a);v&&(A.textShadow=v);"normal"!==r&&(A.fontWeight=r);"normal"!==l&&(A.fontStyle=l);"none"!==y&&(A.textDecoration=y);H&&H.length&&(E.className=(E.className||"")+" "+H.join(" "));E.style=Object.assign({},Dh.defaultStyle(this),{},A);return Dh.h("div",E,[Dh.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:J.left()+"px",paddingRight:J.right()+"px",paddingTop:J.top()+"px",paddingBottom:J.bottom()+
"px",width:"calc(100% - "+J.left()+"px - "+J.right()+"px)"}},f),a.renderSubmorphs(this)])}},{key:"renderChunk",value:function(a,f){var l=f=f||{},r=l.backgroundColor,v=l.fontColor,y=l.fontFamily,A=l.fontStyle,E=l.fontWeight,F=l.textShadow,H=l.textDecoration,J=l.textStyleClasses,O=l.textAlign,L=l.float,Y=l.display,S=l.lineHeight,ea=l.opacity;l={};var qa={style:l};L&&(l.float=L);Y&&(l.display=Y);r&&(l.backgroundColor=String(r));y&&(l.fontFamily=y);v&&(l.color=String(v));F&&(l.textShadow=F);"normal"!==
E&&(l.fontWeight=E);"normal"!==A&&(l.fontStyle=A);"none"!==H&&(l.textDecoration=H);O&&(l.textAlign=O);S&&(l.lineHeight=S);ea&&(l.opacity=ea);J&&J.length&&(qa.className=J.join(" "));r="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(v=0;v<r.length;v++)y=r[v],f.hasOwnProperty(y)&&(A=f[y],l[y]="number"===typeof A?A+"px":A);return Dh.h("span",qa,a)}},{key:"interactivelyChangeLabel",
value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),2);f=l.yieldResult;"string"===typeof f&&(a.textString=f);l.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var a=this,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(a.world().filterableListPrompt("Select Icon",
Object.keys(Dh.Icons).map(function(y){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(Dh.Icon.textAttribute(y,{paddingRight:"10px"})),[y,{}]),value:y}})),2);f=v.yieldResult;l=$jscomp.makeIterator(f.selected);if(r=l.next().value)a.value=Dh.Icon.textAttribute(r);v.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=Zb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);
f.unshift(["set Icon",function(){return a.interactivelySetIcon()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:Dh.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return Dh.properties.values(Dh.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes",
"textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var f=$jscomp.makeIterator(a),l=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return l||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,f){return 0==f%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{get:function(){var a=
this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();Dh.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,f=null;if(2<a.length){var l=$jscomp.makeIterator(a.slice(-2)),r=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&
(a=a.slice(0,-2),f=[r,l])}return{value:a,annotation:f}},set:function(a){var f=a.value;a=a.annotation;f||(f="");"string"===typeof f&&(f=[f,null]);Array.isArray(f)||(f=[String(f),null]);f=f.slice();if(a){"string"===typeof a&&(a=[a,null]);var l=a[1];l||(l=a[1]={});f.push.apply(f,$jscomp.arrayFromIterable(a));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||l.textStyleClasses.push("annotation")}this.textAndAttributes=f}},autofit:{defaultValue:!0,
set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:Dh.Rectangle.inset(0),initialize:function(a){this.padding=a},set:function(a){a||(a=Dh.Rectangle.inset(0));var f=this.padding;this.setProperty("padding","number"===typeof a?Dh.Rectangle.inset(a):a);this.autofit&&!f.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:Dh.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var f=
this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,set:function(a){var f=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=f&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:Dh.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",set:function(a){var f=this.fontWeight;this.setProperty("fontWeight",
a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",set:function(a){var f=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},
{key:"icon",value:function(a,f){f=void 0===f?{prefix:"",suffix:""}:f;return Dh.Icon.makeLabel(a,f)}}],d,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:490,end:18380})}(Dh.Morph));Dh.Label=bu;Dh.Label=bu;Dh.Label=bu;var gwa=Object.freeze({__proto__:null,Label:bu}),IY="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,hwa={},sca=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,iwa=hwa=function(b,d){function k(aa){var xa=aa.match(/\n/g);xa&&(Fa+=xa.length);xa=aa.lastIndexOf("\n");K=~xa?aa.length-xa:K+aa.length}function a(){var aa={line:Fa,column:K};return function(xa){xa.position=new f(aa);A(/^\s*/);return xa}}function f(aa){(this||IY).start=aa;(this||IY).end={line:Fa,column:K};(this||IY).source=d.source}function l(aa){var xa=Error(d.source+":"+Fa+":"+K+": "+aa);xa.reason=aa;xa.filename=
d.source;xa.line=Fa;xa.column=K;xa.source=b;if(d.silent)Z.push(xa);else throw xa;}function r(){return A(/^{\s*/)}function v(){return A(/^}/)}function y(){var aa,xa=[];A(/^\s*/);for(E(xa);b.length&&"}"!=b.charAt(0)&&(aa=ea()||qa());)!1!==aa&&(xa.push(aa),E(xa));return xa}function A(aa){if(aa=aa.exec(b)){var xa=aa[0];k(xa);b=b.slice(xa.length);return aa}}function E(aa){var xa;for(aa=aa||[];xa=F();)!1!==xa&&aa.push(xa);return aa}function F(){var aa=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var xa=
2;""!=b.charAt(xa)&&("*"!=b.charAt(xa)||"/"!=b.charAt(xa+1));)++xa;xa+=2;if(""===b.charAt(xa-1))return l("End of comment missing");var jb=b.slice(2,xa-2);K+=2;k(jb);b=b.slice(xa);K+=2;return aa({type:"comment",comment:jb})}}function H(){var aa=A(/^([^{]+)/);if(aa)return rx(aa[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(xa){return xa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(xa){return xa.replace(/\u200C/g,
",")})}function J(){var aa=a(),xa=A(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(xa){xa=rx(xa[0]);if(!A(/^:\s*/))return l("property missing ':'");var jb=A(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);aa=aa({type:"declaration",property:xa.replace(sca,""),value:jb?rx(jb[0]).replace(sca,""):""});A(/^[;\s]*/);return aa}}function O(){var aa=[];if(!r())return l("missing '{'");E(aa);for(var xa;xa=J();)!1!==xa&&(aa.push(xa),E(aa));return v()?aa:l("missing '}'")}function L(){for(var aa,xa=[],
jb=a();aa=A(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)xa.push(aa[1]),A(/^,\s*/);if(xa.length)return jb({type:"keyframe",values:xa,declarations:O()})}function Y(){var aa=a(),xa=A(/^@([-\w]+)?keyframes\s*/);if(xa){var jb=xa[1];xa=A(/^([-\w]+)\s*/);if(!xa)return l("@keyframes missing name");xa=xa[1];if(!r())return l("@keyframes missing '{'");for(var ob,pa=E();ob=L();)pa.push(ob),pa=pa.concat(E());return v()?aa({type:"keyframes",name:xa,vendor:jb,keyframes:pa}):l("@keyframes missing '}'")}}function S(aa){var xa=
new RegExp("^@"+aa+"\\s*([^;]+);");return function(){var jb=a(),ob=A(xa);if(ob){var pa={type:aa};pa[aa]=ob[1].trim();return jb(pa)}}}function ea(){if("@"==b[0]){var aa;if(!(aa=Y())){aa=a();var xa=A(/^@media *([^{]+)/);if(xa)if(xa=rx(xa[1]),r()){var jb=E().concat(y());aa=v()?aa({type:"media",media:xa,rules:jb}):l("@media missing '}'")}else aa=l("@media missing '{'");else aa=void 0}aa||(aa=a(),aa=(xa=A(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?aa({type:"custom-media",name:rx(xa[1]),media:rx(xa[2])}):
void 0);aa||(aa=a(),(xa=A(/^@supports *([^{]+)/))?(xa=rx(xa[1]),r()?(jb=E().concat(y()),aa=v()?aa({type:"supports",supports:xa,rules:jb}):l("@supports missing '}'")):aa=l("@supports missing '{'")):aa=void 0);if(!(aa=aa||R()||U()||na()))if(aa=a(),jb=A(/^@([-\w]+)?document *([^{]+)/))if(xa=rx(jb[1]),jb=rx(jb[2]),r()){var ob=E().concat(y());aa=v()?aa({type:"document",document:jb,vendor:xa,rules:ob}):l("@document missing '}'")}else aa=l("@document missing '{'");else aa=void 0;if(!aa)if(aa=a(),A(/^@page */))if(xa=
H()||[],r()){for(jb=E();ob=J();)jb.push(ob),jb=jb.concat(E());aa=v()?aa({type:"page",selectors:xa,declarations:jb}):l("@page missing '}'")}else aa=l("@page missing '{'");else aa=void 0;aa||(aa=a(),A(/^@host\s*/)?r()?(xa=E().concat(y()),aa=v()?aa({type:"host",rules:xa}):l("@host missing '}'")):aa=l("@host missing '{'"):aa=void 0);if(!aa)if(aa=a(),A(/^@font-face\s*/))if(r()){for(xa=E();jb=J();)xa.push(jb),xa=xa.concat(E());aa=v()?aa({type:"font-face",declarations:xa}):l("@font-face missing '}'")}else aa=
l("@font-face missing '{'");else aa=void 0;return aa}}function qa(){var aa=a(),xa=H();if(!xa)return l("selector missing");E();return aa({type:"rule",selectors:xa,declarations:O()})}d=d||{};var Fa=1,K=1;f.prototype.content=b;var Z=[],R=S("import"),U=S("charset"),na=S("namespace");return jV(function(){var aa=y();return{type:"stylesheet",stylesheet:{source:d.source,rules:aa,parsingErrors:Z}}}())},Ala="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tca={};tca=cN;cN.prototype.emit=
function(b){return b};cN.prototype.visit=function(b){return this[b.type](b)};cN.prototype.mapVisit=function(b,d){var k="";d=d||"";for(var a=0,f=b.length;a<f;a++)k+=this.visit(b[a]),d&&a<f-1&&(k+=this.emit(d));return k};var uca=tca,tz="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vca={},W7=uca,jwa=il;vca=Dm;jwa(Dm,W7);Dm.prototype.compile=function(b){return this.stylesheet(b)};Dm.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};Dm.prototype.comment=
function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};Dm.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};Dm.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Dm.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+
this.emit(this.indent(-1)+"\n}")};Dm.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};Dm.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};Dm.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Dm.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+
this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};Dm.prototype.keyframe=function(b){var d=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};Dm.prototype.page=function(b){var d=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+d,b.position)+this.emit("{\n")+this.emit(this.indent(1))+
this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Dm.prototype["font-face"]=function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Dm.prototype.host=function(b){return this.emit("@host",b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Dm.prototype["custom-media"]=function(b){return this.emit("@custom-media "+
b.name+" "+b.media+";",b.position)};Dm.prototype.rule=function(b){var d=this.indent(),k=b.declarations;return k.length?this.emit(b.selectors.map(function(a){return d+a}).join(",\n"),b.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(k,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};Dm.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};Dm.prototype.indent=function(b){(this||tz).level=
(this||tz).level||1;return null!=b?((this||tz).level+=b,""):Array((this||tz).level).join((this||tz).indentation||"  ")};var kwa=vca,JY={},wca=ei.Buffer;(function(b){var d=function(k){return"function"===typeof k?k:"function"===typeof wca?function(a){return(new wca(a,"base64")).toString("binary")}:"object"===typeof b.base64js?function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(f){return String.fromCharCode(f)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");
}}(b.atob);b.atob=d;JY&&(JY=d)})(window);var lwa=JY,mwa=/^xn--/,nwa=/[^\0-\x7E]/,Cla=/[\x2E\u3002\uFF0E\uFF61]/g,Bla={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},bw=Math.floor,KY=String.fromCharCode,xca=function(b,d){return b+22+75*(26>b)-((0!=d)<<5)},yca=function(b,d,k){var a=0;b=k?bw(b/700):b>>1;for(b+=bw(b/d);455<b;a+=36)b=bw(b/35);return bw(a+36*b/(b+38))},zca=function(b){var d=[],k=b.length,
a=0,f=128,l=72,r=b.lastIndexOf("-");0>r&&(r=0);for(var v=0;v<r;++v)128<=b.charCodeAt(v)&&IB("not-basic"),d.push(b.charCodeAt(v));for(r=0<r?r+1:0;r<k;){v=a;for(var y=1,A=36;;A+=36){r>=k&&IB("invalid-input");var E=10>(H=b.charCodeAt(r++))-48?H-22:26>H-65?H-65:26>H-97?H-97:36;(36<=E||E>bw((2147483647-a)/y))&&IB("overflow");a+=E*y;var F=A<=l?1:A>=l+26?26:A-l;if(E<F)break;E=36-F;y>bw(2147483647/E)&&IB("overflow");y*=E}y=d.length+1;l=yca(a-v,y,0==v);bw(a/y)>2147483647-f&&IB("overflow");f+=bw(a/y);a%=y;
d.splice(a++,0,f)}var H;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(d))},Aca=function(b){for(var d=[],k=(b=Y7(b)).length,a=128,f=0,l=72,r=$jscomp.makeIterator(b),v=r.next();!v.done;v=r.next()){var y=v.value;128>y&&d.push(KY(y))}for((y=r=d.length)&&d.push("-");y<k;){var A=2147483647,E=$jscomp.makeIterator(b);for(v=E.next();!v.done;v=E.next())v=v.value,v>=a&&v<A&&(A=v);v=y+1;A-a>bw((2147483647-f)/v)&&IB("overflow");f+=(A-a)*v;a=A;A=$jscomp.makeIterator(b);for(E=A.next();!E.done;E=
A.next())if(E=E.value,E<a&&2147483647<++f&&IB("overflow"),E==a){var F=f;for(E=36;;E+=36){var H=E<=l?1:E>=l+26?26:E-l;if(F<H)break;F-=H;var J=36-H;d.push(KY(xca(H+F%J,0)));F=bw(F/J)}d.push(KY(xca(F,0)));l=yca(f,v,y==r);f=0;++y}++f;++a}return d.join("")},owa={version:"2.1.0",ucs2:{decode:Y7,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:zca,encode:Aca,toASCII:function(b){return X7(b,function(d){return nwa.test(d)?"xn--"+Aca(d):d})},toUnicode:function(b){return X7(b,
function(d){return mwa.test(d)?zca(d.slice(4).toLowerCase()):d})}},XI=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},CC={};CC.decode=CC.parse=function(b,d,k,a){k=k||"=";var f={};if("string"!=typeof b||0===b.length)return f;var l=/\+/g;b=b.split(d||"&");d=1E3;a&&"number"==typeof a.maxKeys&&(d=a.maxKeys);a=b.length;0<d&&a>d&&(a=d);for(d=0;d<a;++d){var r,v;var y=b[d].replace(l,"%20");var A=y.indexOf(k);
0<=A?(r=y.substr(0,A),v=y.substr(A+1)):(r=y,v="");y=decodeURIComponent(r);A=decodeURIComponent(v);Object.prototype.hasOwnProperty.call(f,y)?Array.isArray(f[y])?f[y].push(A):f[y]=[f[y],A]:f[y]=A}return f};CC.encode=CC.stringify=function(b,d,k,a){return d=d||"&",k=k||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(f){var l=encodeURIComponent(XI(f))+k;return Array.isArray(b[f])?b[f].map(function(r){return l+encodeURIComponent(XI(r))}).join(d):l+encodeURIComponent(XI(b[f]))}).join(d):
a?encodeURIComponent(XI(a))+k+encodeURIComponent(XI(b)):""};var qF={},Ev={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b}};qF.parse=zH;qF.resolve=function(b,d){return zH(b,!1,!0).resolve(d)};qF.resolveObject=function(b,d){return b?zH(b,!1,!0).resolveObject(d):d};qF.format=function(b){Ev.isString(b)&&(b=zH(b));return b instanceof os?b.format():os.prototype.format.call(b)};
qF.Url=os;var pwa=/^([a-z0-9.+-]+:)/i,qwa=/:[0-9]*$/,rwa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,swa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),LY=["'"].concat(swa),Bca=["%","/","?",";","#"].concat(LY),Cca=["/","?","#"],Dca=/^[+a-z0-9A-Z_-]{0,63}$/,twa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,uwa={javascript:!0,"javascript:":!0},MY={javascript:!0,"javascript:":!0},rF={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};os.prototype.parse=function(b,d,k){if(!Ev.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+
typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!k&&1===b.split("#").length)if(b=rwa.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=d?CC.parse(this.search.substr(1)):this.search.substr(1)):d&&(this.search="",this.query={}),this;if(b=pwa.exec(a)){var f=(b=b[0]).toLowerCase();this.protocol=f;a=a.substr(b.length)}if(k||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,
2);!l||b&&MY[b]||(a=a.substr(2),this.slashes=!0)}if(!MY[b]&&(l||b&&!rF[b])){var r,v;l=-1;for(k=0;k<Cca.length;k++)-1!==(y=a.indexOf(Cca[k]))&&(-1===l||y<l)&&(l=y);-1!==(v=-1===l?a.lastIndexOf("@"):a.lastIndexOf("@",l))&&(r=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(r));l=-1;for(k=0;k<Bca.length;k++){var y;-1!==(y=a.indexOf(Bca[k]))&&(-1===l||y<l)&&(l=y)}-1===l&&(l=a.length);this.host=a.slice(0,l);a=a.slice(l);this.parseHost();this.hostname=this.hostname||"";r="["===this.hostname[0]&&
"]"===this.hostname[this.hostname.length-1];if(!r)for(l=this.hostname.split(/\./),v=(k=0,l.length);k<v;k++)if((y=l[k])&&!y.match(Dca)){b="";for(var A=0,E=y.length;A<E;A++)127<y.charCodeAt(A)?b+="x":b+=y[A];if(!b.match(Dca)){v=l.slice(0,k);k=l.slice(k+1);(y=y.match(twa))&&(v.push(y[1]),k.unshift(y[2]));k.length&&(a="/"+k.join(".")+a);this.hostname=v.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();r||(this.hostname=owa.toASCII(this.hostname));k=this.port?
":"+this.port:"";this.host=(this.hostname||"")+k;this.href+=this.host;r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!uwa[f])for(k=0,v=LY.length;k<v;k++)r=LY[k],-1!==a.indexOf(r)&&(y=encodeURIComponent(r),y===r&&(y=escape(r)),a=a.split(r).join(y));k=a.indexOf("#");-1!==k&&(this.hash=a.substr(k),a=a.slice(0,k));k=a.indexOf("?");if(-1!==k?(this.search=a.substr(k),this.query=a.substr(k+1),d&&(this.query=CC.parse(this.query)),a=a.slice(0,k)):d&&(this.search=
"",this.query={}),a&&(this.pathname=a),rF[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)k=this.pathname||"",this.path=k+(this.search||"");return this.href=this.format(),this};os.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var d=this.protocol||"",k=this.pathname||"",a=this.hash||"",f=!1,l="";this.host?f=b+this.host:this.hostname&&(f=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+
"]"),this.port&&(f+=":"+this.port));this.query&&Ev.isObject(this.query)&&Object.keys(this.query).length&&(l=CC.stringify(this.query));b=this.search||l&&"?"+l||"";return d&&":"!==d.substr(-1)&&(d+=":"),this.slashes||(!d||rF[d])&&!1!==f?(f="//"+(f||""),k&&"/"!==k.charAt(0)&&(k="/"+k)):f||(f=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),d+f+(k=k.replace(/[?#]/g,function(r){return encodeURIComponent(r)}))+(b=b.replace("#","%23"))+a};os.prototype.resolve=function(b){return this.resolveObject(zH(b,
!1,!0)).format()};os.prototype.resolveObject=function(b){if(Ev.isString(b)){var d=new os;d.parse(b,!1,!0);b=d}d=new os;for(var k=Object.keys(this),a=0;a<k.length;a++){var f=k[a];d[f]=this[f]}if(d.hash=b.hash,""===b.href)return d.href=d.format(),d;if(b.slashes&&!b.protocol){var l=Object.keys(b);for(k=0;k<l.length;k++)a=l[k],"protocol"!==a&&(d[a]=b[a]);return rF[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),d.href=d.format(),d}if(b.protocol&&b.protocol!==d.protocol){if(!rF[b.protocol]){l=
Object.keys(b);for(k=0;k<l.length;k++)a=l[k],d[a]=b[a];return d.href=d.format(),d}if(d.protocol=b.protocol,b.host||MY[b.protocol])d.pathname=b.pathname;else{for(var r=(b.pathname||"").split("/");r.length&&!(b.host=r.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==r[0]&&r.unshift("");2>r.length&&r.unshift("");d.pathname=r.join("/")}if(d.search=b.search,d.query=b.query,d.host=b.host||"",d.auth=b.auth,d.hostname=b.hostname||b.host,d.port=b.port,d.pathname||d.search)d.path=(d.pathname||
"")+(d.search||"");return d.slashes=d.slashes||b.slashes,d.href=d.format(),d}k=d.pathname&&"/"===d.pathname.charAt(0);var v=b.host||b.pathname&&"/"===b.pathname.charAt(0),y=k=v||k||d.host&&b.pathname;a=d.pathname&&d.pathname.split("/")||[];f=(r=b.pathname&&b.pathname.split("/")||[],d.protocol&&!rF[d.protocol]);if(f&&(d.hostname="",d.port=null,d.host&&(""===a[0]?a[0]=d.host:a.unshift(d.host)),d.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===r[0]?r[0]=b.host:r.unshift(b.host)),b.host=
null),k=k&&(""===r[0]||""===a[0])),v)d.host=b.host||""===b.host?b.host:d.host,d.hostname=b.hostname||""===b.hostname?b.hostname:d.hostname,d.search=b.search,d.query=b.query,a=r;else if(r.length)a||(a=[]),a.pop(),a=a.concat(r),d.search=b.search,d.query=b.query;else if(!Ev.isNullOrUndefined(b.search))return f&&(d.hostname=d.host=a.shift(),(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift())),d.search=b.search,d.query=b.query,Ev.isNull(d.pathname)&&
Ev.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d;if(!a.length)return d.pathname=null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;v=a.slice(-1)[0];r=(d.host||b.host||1<a.length)&&("."===v||".."===v)||""===v;for(var A=0,E=a.length;0<=E;E--)"."===(v=a[E])?a.splice(E,1):".."===v?(a.splice(E,1),A++):A&&(a.splice(E,1),A--);if(!k&&!y)for(;A--;A)a.unshift("..");!k||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");r&&"/"!==a.join("/").substr(-1)&&
a.push("");y=""===a[0]||a[0]&&"/"===a[0].charAt(0);f&&(d.hostname=d.host=y?"":a.length?a.shift():"",(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift()));return(k||d.host&&a.length)&&!y&&a.unshift(""),a.length?d.pathname=a.join("/"):(d.pathname=null,d.path=null),Ev.isNull(d.pathname)&&Ev.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.auth=b.auth||d.auth,d.slashes=d.slashes||b.slashes,d.href=d.format(),d};os.prototype.parseHost=
function(){var b=this.host,d=qwa.exec(b);d&&(":"!==(d=d[0])&&(this.port=d.substr(1)),b=b.substr(0,b.length-d.length));b&&(this.hostname=b)};var vwa=bj,YI={resolve:function(){for(var b,d="",k=!1,a=arguments.length-1;-1<=a&&!k;a--){var f;0<=a?f=arguments[a]:(void 0===b&&(b=vwa.cwd()),f=b);Fv(f);0!==f.length&&(d=f+"/"+d,k=47===f.charCodeAt(0))}return d=Z7(d,!k),k?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(b){if(Fv(b),0===b.length)return".";var d=47===b.charCodeAt(0),k=47===b.charCodeAt(b.length-
1);return 0!==(b=Z7(b,!d)).length||d||(b="."),0<b.length&&k&&(b+="/"),d?"/"+b:b},isAbsolute:function(b){return Fv(b),0<b.length&&47===b.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var b,d=0;d<arguments.length;++d){var k=arguments[d];Fv(k);0<k.length&&(void 0===b?b=k:b+="/"+k)}return void 0===b?".":YI.normalize(b)},relative:function(b,d){if((Fv(b),Fv(d),b===d)||(b=YI.resolve(b))===(d=YI.resolve(d)))return"";for(var k=1;k<b.length&&47===b.charCodeAt(k);++k);for(var a=b.length,
f=a-k,l=1;l<d.length&&47===d.charCodeAt(l);++l);for(var r=d.length-l,v=f<r?f:r,y=-1,A=0;A<=v;++A){if(A===v){if(r>v){if(47===d.charCodeAt(l+A))return d.slice(l+A+1);if(0===A)return d.slice(l+A)}else f>v&&(47===b.charCodeAt(k+A)?y=A:0===A&&(y=0));break}var E=b.charCodeAt(k+A);if(E!==d.charCodeAt(l+A))break;47===E&&(y=A)}f="";for(A=k+y+1;A<=a;++A)A!==a&&47!==b.charCodeAt(A)||(0===f.length?f+="..":f+="/..");return 0<f.length?f+d.slice(l+y):(l+=y,47===d.charCodeAt(l)&&++l,d.slice(l))},_makeLong:function(b){return b},
dirname:function(b){if(Fv(b),0===b.length)return".";for(var d=47===b.charCodeAt(0),k=-1,a=!0,f=b.length-1;1<=f;--f)if(47===b.charCodeAt(f)){if(!a){k=f;break}}else a=!1;return-1===k?d?"/":".":d&&1===k?"//":b.slice(0,k)},basename:function(b,d){if(void 0!==d&&"string"!=typeof d)throw new TypeError('"ext" argument must be a string');Fv(b);var k,a=0,f=-1,l=!0;if(void 0!==d&&0<d.length&&d.length<=b.length){if(d.length===b.length&&d===b)return"";var r=d.length-1,v=-1;for(k=b.length-1;0<=k;--k){var y=b.charCodeAt(k);
if(47===y){if(!l){a=k+1;break}}else-1===v&&(l=!1,v=k+1),0<=r&&(y===d.charCodeAt(r)?-1==--r&&(f=k):(r=-1,f=v))}return a===f?f=v:-1===f&&(f=b.length),b.slice(a,f)}for(k=b.length-1;0<=k;--k)if(47===b.charCodeAt(k)){if(!l){a=k+1;break}}else-1===f&&(l=!1,f=k+1);return-1===f?"":b.slice(a,f)},extname:function(b){Fv(b);for(var d=-1,k=0,a=-1,f=!0,l=0,r=b.length-1;0<=r;--r){var v=b.charCodeAt(r);if(47!==v)-1===a&&(f=!1,a=r+1),46===v?-1===d?d=r:1!==l&&(l=1):-1!==d&&(l=-1);else if(!f){k=r+1;break}}return-1===
d||-1===a||0===l||1===l&&d===a-1&&d===k+1?"":b.slice(d,a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);var d=b.dir||b.root,k=b.base||(b.name||"")+(b.ext||"");return d?d===b.root?d+k:d+"/"+k:k},parse:function(b){Fv(b);var d={root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return d;var k,a=b.charCodeAt(0),f=47===a;f?(d.root="/",k=1):k=0;for(var l=-1,r=0,v=-1,y=!0,A=b.length-1,E=0;A>=k;--A)if(47!==
(a=b.charCodeAt(A)))-1===v&&(y=!1,v=A+1),46===a?-1===l?l=A:1!==E&&(E=1):-1!==l&&(E=-1);else if(!y){r=A+1;break}return-1===l||-1===v||0===E||1===E&&l===v-1&&l===r+1?-1!==v&&(d.base=d.name=0===r&&f?b.slice(1,v):b.slice(r,v)):(0===r&&f?(d.name=b.slice(1,l),d.base=b.slice(1,v)):(d.name=b.slice(r,l),d.base=b.slice(r,v)),d.ext=b.slice(l,v)),0<r?d.dir=b.slice(0,r-1):f&&(d.dir="/"),d},sep:"/",delimiter:":",win32:null,posix:null},NY=YI.posix=YI,Eca={},Fca=/%[a-f0-9]{2}/gi,Gca=/(%[a-f0-9]{2})+/gi;Eca=function(b){if("string"!==
typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(r){for(var d={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},k=Gca.exec(b);k;){try{d[k[0]]=decodeURIComponent(k[0])}catch(v){var a=k[0];try{var f=decodeURIComponent(a)}catch(y){f=a.match(Fca);for(var l=1;l<f.length;l++)a=kV(f,l).join(""),f=a.match(Fca);f=a}f!==k[0]&&(d[k[0]]=f)}k=Gca.exec(b)}d["%C2"]="\ufffd";k=Object.keys(d);for(a=0;a<k.length;a++)f=
k[a],b=b.replace(new RegExp(f,"g"),d[f]);return b}};var wwa={},Gla=bj,e8=lwa,Dla=qF,Ela=NY,Fla=Eca,Hca=/[#@] sourceMappingURL=([^\s'"]*)/,Hla=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+Hca.source+")\\s*\\*/|//(?:"+Hca.source+"))\\s*"),Ila=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,Jla=/^(?:application|text)\/json$/,Kla="utf-8",Lla=/\/?$/,xwa=wwa={resolveSourceMap:b8,resolveSourceMapSync:d8,resolveSources:f8,resolveSourcesSync:h8,resolve:function(b,d,k,a,f){function l(v){f8(v.map,v.sourcesRelativeTo,k,a,
function(y,A){if(y)return f(y);v.sourcesResolved=A.sourcesResolved;v.sourcesContent=A.sourcesContent;f(null,v)})}"function"===typeof a&&(f=a,a={});if(null===b){var r={sourceMappingURL:null,url:d,sourcesRelativeTo:d,map:null};b=AH(d);k(b,function(v,y){if(v)return v.sourceMapData=r,f(v);r.map=String(y);try{r.map=FE(r.map,r)}catch(A){return f(A)}l(r)})}else b8(b,d,k,function(v,y){if(v)return f(v);if(!y)return f(null,null);l(y)})},resolveSync:function(b,d,k,a){if(null===b)b={sourceMappingURL:null,url:d,
sourcesRelativeTo:d,map:null},b.map=a8(k,d,b),b.map=FE(b.map,b);else if(b=d8(b,d,k),!b)return null;d=h8(b.map,b.sourcesRelativeTo,k,a);b.sourcesResolved=d.sourcesResolved;b.sourcesContent=d.sourcesContent;return b},parseMapToJSON:FE},ywa=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},mV="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,Ica={},i8=uca,zwa=il;Ica=Ln;zwa(Ln,i8);Ln.prototype.compile=function(b){return b.stylesheet.rules.map((this||mV).visit,this||mV).join("")};Ln.prototype.comment=function(b){return this.emit("",b.position)};Ln.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};Ln.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Ln.prototype.document=function(b){return this.emit("@"+
(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Ln.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};Ln.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};Ln.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Ln.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+
b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};Ln.prototype.keyframe=function(b){var d=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(d)+this.emit("}")};Ln.prototype.page=function(b){var d=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+d,b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};Ln.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+
this.mapVisit(b.declarations)+this.emit("}")};Ln.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};Ln.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};Ln.prototype.rule=function(b){var d=b.declarations;return d.length?this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(d)+this.emit("}"):""};Ln.prototype.declaration=function(b){return this.emit(b.property+
":"+b.value,b.position)+this.emit(";")};var Awa=Ica,Bp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Lx={};Lx=function(b){b._comment=b.comment;b.map=new hj;b.position={line:1,column:1};b.files={};for(var d in Lx)b[d]=Lx[d]};var Jca=function(b){return"\\"===NY.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};Lx.updatePosition=function(b){var d=b.match(/\n/g);d&&((this||Bp).position.line+=d.length);d=b.lastIndexOf("\n");(this||Bp).position.column=~d?b.length-
d:(this||Bp).position.column+b.length};Lx.emit=function(b,d){if(d){var k=Jca(d.source||"source.css");(this||Bp).map.addMapping({source:k,generated:{line:(this||Bp).position.line,column:Math.max((this||Bp).position.column-1,0)},original:{line:d.start.line,column:d.start.column-1}});this.addFile(k,d)}this.updatePosition(b);return b};Lx.addFile=function(b,d){"string"!==typeof d.content||Object.prototype.hasOwnProperty.call((this||Bp).files,b)||((this||Bp).files[b]=d.content)};Lx.applySourceMaps=function(){Object.keys((this||
Bp).files).forEach(function(b){var d=(this||Bp).files[b];(this||Bp).map.setSourceContent(b,d);if(!1!==(this||Bp).options.inputSourcemaps&&(d=xwa.resolveSync(d,b,ywa))){var k=new ok(d.map);(this||Bp).map.applySourceMap(k,b,Jca(NY.dirname(d.sourcesRelativeTo)))}},this||Bp)};Lx.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):this._comment(b)};var Bwa=Lx,Cwa={},Dwa=Cwa=function(b,d){d=d||{};var k=d.compress?new Awa(d):new kwa(d);return d.sourcemap?(Bwa(k),b=k.compile(b),
k.applySourceMaps(),d="generator"===d.sourcemap?k.map:k.map.toJSON(),{code:b,map:d}):b=k.compile(b)},OY={};OY.parse=iwa;OY.stringify=Dwa;var gj=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");gj.obj=dg;gj.promise=Hg;gj.string=Ih;gj.pt=di;gj.Morph=kl;gj.vdom=cI;gj.addOrChangeCSSDeclaration=V;gj.css=OY;var OP=gj.vdom;gj.diff=OP.diff;gj.patch=OP.patch;gj.h=OP.h;gj.createElement=OP.create;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("CustomVNode")&&
"function"===typeof d.CustomVNode?d.CustomVNode:d.CustomVNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.morph=a;this.renderer=f;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,f=this.morphVtree=this.renderer.renderMorph(a),l="customNode-key-"+
a.id;f.children[0]&&f.children[0].key===l||f.children.unshift(gj.h(a.domNodeTagName||"div",{key:l},[]));a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return f}},{key:"init",value:function(){var a=gj.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,f){a=a.morphVtree||this.renderMorph();var l=this.renderMorph();
a=gj.diff(a,l);gj.patch(f,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:426,end:2427})})(void 0);var bA=Ca("ay",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("HTMLMorph")&&"function"===typeof d.HTMLMorph?d.HTMLMorph:d.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",
value:function(){var a=this;try{var f=gj.css.parse(this.cssDeclaration);this.whenRendered().then(function(){f.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(r){return"#"+a.id+" "+r}))});gj.addOrChangeCSSDeclaration("css-for-"+a.id,gj.css.stringify(f))})}catch(l){console.error("Error setting cssDeclaration of "+this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new gj.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,f=Zb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);f.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:gj.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(this.master)this.master.onMorphChange(this,{prop:"html",value:a});if(a.includes("<script")){a=this.domNode.querySelectorAll("script");
a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next()){var l=f.value;f=l.parentNode;l.remove();for(var r=document.createElement("script"),v=$jscomp.makeIterator(l.attributes),y=v.next();!y.done;y=v.next())y=y.value,r.setAttribute(y.name,y.value);l=$jscomp.makeIterator(l.childNodes);for(v=l.next();!v.done;v=l.next())r.appendChild(v.value);f.appendChild(r)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},
domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return gj.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,
set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2752,end:7055})}(gj.Morph));gj.HTMLMorph=bA;gj.HTMLMorph=
bA;gj.HTMLMorph=bA;var ZI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):
null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,f){f=void 0===f?{}:f;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){r=f;if(v=void 0===r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.srcDoc=a;return A.yield(l.whenLoaded(),2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"loadURL",value:function(a,f){f=void 0===f?{}:f;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress){r=f;if(v=void 0===r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.src=a;return A.yield(l.whenLoaded(),2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a=(new gj.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",f.yield(a.loadURL("https://google.com"),2);a.iframe.src;
a.iframe.srcDoc;a.src="";a.srcDoc="fooo";return f.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var f=gj.promise.deferred().resolve;this._whenLoaded=
gj.promise;this.iframe.onload=function(l){return f(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return gj.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;return gj.pt(a.scrollX,a.scrollY)}catch(f){return gj.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,
a.y)}catch(f){}}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7064,end:10361})}(gj.HTMLMorph);gj.IFrameMorph=ZI;gj.IFrameMorph=ZI;gj.IFrameMorph=ZI;var Ewa=Object.freeze({__proto__:null,HTMLMorph:bA,IFrameMorph:ZI}),Il=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
Il.arr=Lf;Il.obj=dg;Il.rect=Dl;Il.ShadowObject=ys;Il.morph=de;var cw=Ca("a_",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),k=d.hasOwnProperty("StyleSheet")&&"function"===typeof d.StyleSheet?d.StyleSheet:d.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){Il.obj.isObject(a)&&!f&&(f=a,a=null);
this.rules=f;for(var l in f)f[l]=this.unwrapFoldedProps(f[l]);this.name=a}},{key:"copy",value:function(){var a={},f;for(f in this.rules)a[f]=Object.assign({},this.rules[f]);return new Il.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(f){if(f in
a){var l=a[f];l||(l=0);a[f]=4==Il.arr.intersect(Il.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,f){this.rules[a]=this.unwrapFoldedProps(f);this.context.requestStyling()}},{key:"toggleRule",value:function(a,f){this.rules[a]._deactivated=!f;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a=
{},f;for(f in this.rules)a[f]={styleSheet:this,rule:f};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+Il.obj.inspect(this.rules,{customPrinter:function(a,f,l){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&Il.arr.all([a.top,a.left,a.right,a.bottom],function(r){return r&&Il.obj.equals(r,a.top)})?l(a.top):a&&Il.obj.keys(a).includes("_rev")?l(Il.obj.dissoc(a,["_rev","_deactivated"])):f},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,f,l){var r=
this.rules[a];if(r._deactivated)return{};r=Il.obj.dissoc(r,["_deactivated"]);return f.withMetaDo({styleSheetChange:!0},function(){if("layout"in r){var v=r.layout.copy();v.container=f;r.layout=v}"dropShadow"in r&&(r.dropShadow=new Il.ShadowObject(r.dropShadow),r.dropShadow.morph=f);"padding"in r&&(r.padding=r.padding.isRect?r.padding:Il.rect(r.padding,r.padding));v=Il.obj.keys(r).filter(function(F){return!Il.obj.equals(f[F],r[F])});v=Il.obj.select(r,v);var y=f.propertiesAndPropertySettings().properties,
A={},E;for(E in r)A[E]=y[E]&&y[E].defaultValue||f[E];l?f.animate(Object.assign({},v,{duration:l.duration,easing:l.easing})):Object.assign(f,v);return A})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],d,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3712})}(void 0));Il.StyleSheet=cw;Il.StyleSheet=cw;Il.StyleSheet=cw;var Lg=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Lg.obj=dg;Lg.arr=Lf;Lg.num=Em;Lg.Rectangle=ye;Lg.rect=Dl;Lg.Color=ng;Lg.pt=di;Lg.connect=Li;Lg.noUpdate=lp;Lg.signal=em;Lg.disconnect=Ek;Lg.Text=au;Lg.Range=aA;Lg.HTMLMorph=bA;Lg.Icon=wp;Lg.morph=de;var PY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("InputLine")&&"function"===typeof d.InputLine?
d.InputLine:d.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Lg.connect(this,"textChange",this,"onInputChanged");Lg.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var a=this,
f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(f=[{command:"change placeholder",target:a},{isDivider:!0}],l=f.concat,r=$jscomp,v=r.arrayFromIterable,y.yield(Zb._get(Object.getPrototypeOf(k.prototype),"menuItems",a).call(a),2)):y.return(l.call(f,v.call(r,y.yieldResult)))})}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&this.updatePlaceholder();return Zb._get(Object.getPrototypeOf(k.prototype),
"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=a;this.historyId&&this.constructor.setHistory(this.historyId,
this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();Zb._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return f.borderWidth=3,f.borderColor=Lg.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Lg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Lg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Lg.Color.red,opacity:0,reactsToPointer:!1,fill:Lg.Color.white.withA(.9)})),l.yield(f.whenRendered(),2);f._errorIcon.opacity=1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Lg.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var f=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?f.rightCenter().addXY(0,
this.borderWidth):f.leftCenter().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();Lg.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){Lg.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new Lg.Range(a);if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
Zb._get(Object.getPrototypeOf(k.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var f=this.inputHistory,l=f.items;if(Lg.arr.last(l)!==a){l.push(a);l.length>f.max&&(f.items=l=l.slice(-f.max));f.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=f.items.length-1;l--;)f.items[l]===a&&(f.items.splice(l,1),f.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,f)}}},{key:"browseHistory",value:function(){var a=this,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return f=a.inputHistory.items.map(function(A,E){return{isListItem:!0,string:A,value:E}}).reverse(),y.yield(a.world().filterableListPrompt("Choose item:",f,{commands:[a.histEditCommandForHistBrowse()]}),2);l=y.yieldResult;r=$jscomp.makeIterator(l.selected);v=r.next().value;"number"===typeof v&&a.setAndShowHistItem(v);a.focus();y.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(f){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return l=a.inputHistory.items.slice().reverse(),A.yield(f.world().editListPrompt("edit history "+a.historyId,l),2);r=A.yieldResult;v=r.status;y=r.list;if("canceled"===v)return A.return(!0);l=l.filter(function(E){return E.isListItem?y.includes(E.value):y.includes(E)});a.inputHistory=Object.assign({},a.inputHistory,{items:l});f.get("list").items=l.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse();return A.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var f=
this.inputHistory,l=f.items,r=l.length-1;Lg.num.between(a,0,r+1)?f.index=a:f.index=a=r;this.input!==l[a]&&"undefined"!==typeof l[a]&&(this.input=l[a])}},{key:"showHistItem",value:function(a){a=a||"next";var f=this.inputHistory,l=f.items,r=l.length-1,v=f.index;Lg.num.between(v,0,r+1)||(f.index=v=r);if(this.input!==l[v]&&"undefined"!==typeof l[v])this.input=l[v];else{if("next"===a){if(v>r)return;v=++f.index}else{if(0>=v)return;v=--f.index}this.input=l[v]||""}}},{key:"commands",get:function(){var a=
this;return[{name:"change placeholder",exec:function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("Enter Placeholder:",{input:a.placeholder}),2);if(f=l.yieldResult)a.placeholder=f;l.jumpToEnd()})}},{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");
return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",exec:function(f){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=f.inputHistory,r=l.items.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse(),A.yield(f.world().filterableListPrompt("Choose items to delete:",r,{multiSelect:!0}),2);v=A.yieldResult;y=v.selected;Lg.arr.sort(y).reverse().forEach(function(E){E<l.index&&
l.index--;l.items.splice(E,1)});f.inputHistory=l;return A.return(!0)})}}].concat(Zb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",
command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument.createElement("input"),l=a.querySelector(".newtext-text-layer.actual");f.id=a.id;f.className=a.className;f.style=a.style.cssText;Object.assign(f.style,Lg.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));f.placeholder=this.placeholder;f.type="text";f.autocomplete=f.name=this.name.replace(/[\s"]/g,
"-");return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var f=localStorage.getItem("lively.morphic-inputline-"+a);return f?JSON.parse(f):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",value:function(a,f){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(f))}catch(l){console.error(l)}}},{key:"histories",
get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var f=this.histories.get(a);if(f)return f;f=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,f);return f}},{key:"setHistory",value:function(a,f){f=void 0===f?{items:[],max:50,index:0}:f;this.histories.set(a,f);this.addHistoryToLocalStorage(a,f);return f}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
extent:{defaultValue:Lg.pt(100,20)},padding:{defaultValue:Lg.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var f=this;this.setProperty("label",a);this.textString.startsWith(a)||Lg.noUpdate(function(){f.textString=a+f.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var f=this.getSubmorphNamed("placeholder");a?f?(f.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Lg.Color.gray}),f.value=a):this.addMorph(Lg.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:Lg.Color.gray}))):f&&f.remove();this.updatePlaceholder()}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14853})}(Lg.Text);PY=Lg.InputLine;var $I=Ca("b3",PY),cA=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("PasswordInputLine")&&
"function"===typeof d.PasswordInputLine?d.PasswordInputLine:d.PasswordInputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onChange",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.whenRendered(),2);a.ensureInputNode().then(function(l){a.updateHtml(a.input);l.onkeydown=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,
a,"onKeyDown")};l.onkeyup=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,a,"onKeyUp")}});f.jumpToEnd()})}},{key:"onMouseDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var f=a.domNode;f.parentNode&&"INPUT"==f.parentNode.tagName&&(f.parentNode.remove(),
f=a.env.renderer.getNodeForMorph(a),f.insertBefore(a.domNode,f.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){Zb._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),
"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return f.borderWidth=3,f.borderColor=Lg.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Lg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Lg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Lg.Color.red,opacity:0,reactsToPointer:!1,fill:Lg.Color.white.withA(.9)})),l.yield(f.whenRendered(),2);f._errorIcon.opacity=1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Lg.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;Lg.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();Lg.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var f=this,l,r,v,y,A,E,F,H,J,O,L,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){if(1==S.nextAddress)return l=f,r=l.fontSize,
v=l.fontFamily,y=l.padding,A=l.placeholder,E=void 0===l.fill?ng.white:l.fill,F=l.borderRadius,H=y.top(),J=y.right(),O=y.bottom(),L=y.left(),S.yield(f.ensureInputNode(),2);Y=S.yieldResult;Y.setAttribute("type","password");Y.setAttribute("placeholder",A);Y.setAttribute("value",a);Object.assign(Y.style,{position:"absolute",width:"calc(100% - "+L+"px - "+J+"px)","border-width":0,outline:"none","border-radius":F.valueOf()+"px",background:E.toString(),padding:H+"px "+J+"px "+O+"px "+L+"px","font-size":r+
"px","font-family":""+v});S.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(Zb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument,
l=f.createElement("div"),r=a.querySelector("input");f=f.createElement("input");r.childNodes[0]&&"INPUT"===r.childNodes[0].tagName&&(r=r.childNodes[0]);f.id=a.id;f.className=a.className;l.style=a.style.cssText;Object.assign(f.style,Lg.obj.select(r.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));f.style.position="absolute";f.style.width=a.style.width;f.style.height=a.style.height;f.style["border-width"]=a.style["border-width"];f.placeholder=
this.placeholder;f.type="password";f.autocomplete=f.name=this.name.replace(/[\s"]/g,"-");l.appendChild(f);l.appendChild(a.childNodes[1]);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Lg.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:Lg.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14929,end:21857})}(Lg.HTMLMorph);
Lg.PasswordInputLine=cA;Lg.PasswordInputLine=cA;Lg.PasswordInputLine=cA;Lg.default=PY;var Vf=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");Vf.default=Ul;Vf.config=Ul;Object.assign(Vf,Zua);Object.assign(Vf,awa);Object.assign(Vf,fwa);Object.assign(Vf,gwa);Object.assign(Vf,cwa);Object.assign(Vf,Ewa);Object.assign(Vf,Gpa);Object.assign(Vf,nca);Vf.StyleSheet=cw;Vf.StyleSheet=cw;Vf.ShadowObject=ys;Vf.ShadowObject=ys;Vf.addOrChangeCSSDeclaration=V;Vf.addOrChangeCSSDeclaration=V;Vf.addOrChangeLinkedCSS=
ba;Vf.addOrChangeLinkedCSS=ba;Vf.easings=mr;Vf.easings=mr;Vf.stringToEasing=B;Vf.stringToEasing=B;Object.assign(Vf,$ua);Vf.Icon=wp;Vf.Icon=wp;Vf.loadMorphFromSnapshot=iv;Vf.loadMorphFromSnapshot=iv;Object.assign(Vf,ava);Vf.World=sx;Vf.Hand=oF;Vf.Morph=kl;Vf.Image=Vz;Vf.Ellipse=vC;Vf.Triangle=jF;Vf.Path=wC;Vf.Polygon=kF;Vf.LineMorph=lF;Vf.Text=au;Vf.Label=bu;Vf.HTMLMorph=bA;Vf.InputLine=$I;Vf.PasswordInputLine=cA;Vf.InputLine=$I;Vf.InputLine=$I;Vf.PasswordInputLine=cA;Vf.PasswordInputLine=cA;Vf.locateClass=
Pl;Vf.morph=de;Vf.addClassMappings=Be;Vf.inspect=bC;Vf.touchInputDevice=nr;Vf.addClassMappings({default:Vf.Morph,world:Vf.World,hand:Vf.Hand,image:Vf.Image,ellipse:Vf.Ellipse,triangle:Vf.Triangle,path:Vf.Path,text:Vf.Text,input:Vf.InputLine,label:Vf.Label,polygon:Vf.Polygon,line:Vf.LineMorph,html:Vf.HTMLMorph});Vf.morph=de;Vf.morph=de;Vf.inspect=bC;Vf.inspect=bC;Vf.touchInputDevice=nr;Vf.touchInputDevice=nr;var Fwa=Object.freeze({__proto__:null,config:Ul,StyleSheet:cw,ShadowObject:ys,addOrChangeCSSDeclaration:V,
addOrChangeLinkedCSS:ba,easings:mr,stringToEasing:B,Icon:wp,loadMorphFromSnapshot:iv,InputLine:$I,PasswordInputLine:cA,morph:de,inspect:bC,touchInputDevice:nr,Morph:kl,Ellipse:vC,Triangle:jF,Image:Vz,PathPoint:LI,Path:wC,Polygon:kF,LineMorph:lF,World:sx,Hand:oF,Text:au,Label:bu,Anchor:pF,HTMLMorph:bA,IFrameMorph:ZI,MorphicEnv:ps,CustomLayout:OI,SnapLayout:PI,VerticalLayout:Zz,HorizontalLayout:Zt,ProportionalLayout:QI,CenteredTilingLayout:RI,TilingLayout:SI,CellGroup:TI,LayoutColumn:UI,LayoutRow:VI,
LayoutCell:WI,GridLayout:$z,TooltipViewer:mF,Tooltip:xC,MorphicDB:$v}),lh=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");lh.promise=Hg;lh.fun=gn;lh.num=Em;lh.Icon=wp;lh.stringToEasing=B;lh.easings=mr;lh.VerticalLayout=Zz;lh.ShadowObject=ys;lh.HorizontalLayout=Zt;lh.morph=de;lh.Morph=kl;lh.StyleSheet=cw;lh.Image=Vz;lh.pt=di;lh.RadialGradient=vp;lh.rect=Dl;lh.Rectangle=ye;lh.Color=ng;lh.connect=Li;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),
k=d.hasOwnProperty("ProgressBar")&&"function"===typeof d.ProgressBar?d.ProgressBar:d.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"test",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(a.progress=0);if(!(1>a.progress))return f.jumpTo(0);a.progress+=.1;return f.yield(lh.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=
this;setTimeout(function(){a.world()||a.stopStepping()},1E3);if(this._lastWidth){var f=this.get("progress path"),l=lh.stringToEasing(lh.easings.inOutExpo)(lh.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),r=this._targetWidth;f.topLeft=lh.pt(0,0);f.height=this.height;f.width=this._lastWidth>r?r:lh.num.interpolate(l,this._lastWidth,r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=
0;this.startStepping("update")},set:function(a){var f=this.get("progress path");this._lastWidth=Math.max(f.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},fill:{defaultValue:lh.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",fill:lh.Color.orange,width:1}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(lh.Morph);var QY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),k=d.hasOwnProperty("LoadingIndicator")&&"function"===typeof d.LoadingIndicator?d.LoadingIndicator:d.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);var f=this.ui;a=f.label;var l=f.closeButton;if(f=f.progressBar)f.opacity=0,f.isLayoutable=!1;lh.connect(this,"extent",this,"relayout");lh.connect(a,"extent",this,"relayout");lh.connect(a,"value",this,"updateLabel");lh.connect(a,"fontSize",this,"updateLabel");lh.connect(a,"fontFamily",this,
"updateLabel");lh.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(a){var f=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return l=f.ui,(r=l.progressBar)||(r=f.addMorph(new lh.ProgressBar({name:"progress bar"}))),v=f.center,0==a?(r.isLayoutable=!1,r.opacity=0):(r.isLayoutable=!0,r.opacity=1),r.progress=a,y.yield(f.whenRendered(),2);f.center=v;y.jumpToEnd()})}},{key:"hideSpinner",value:function(){var a=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(!a.ui.spinner)return f.return();a.ui.spinner.visible=!1;a.ui.spinner.width=50;a.ui.spinner.remove();return f.yield(a.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",value:function(){lh.Rectangle.inset(20,12);var a=this.ui,f=a.label,l=a.progressBar,r=a.status;a.closeButton.topRight=this.innerBounds().insetBy(2).topRight();
l.extent=lh.pt(f.owner.bounds().width,5);r[r.visible?"top":"bottom"]=f.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,f){var l=lh.morph(Object.assign({type:lh.LoadingIndicator},f,{label:a}));if(f&&f.animated)return lh.promise.delay(f.delay||0).then(function(){l.openInWorld();l.opacity=0;l.whenRendered().then(function(){l.ui.spinner&&
(l.ui.spinner.visible=!0);l.top+=25;l.animate({top:l.top-25,easing:lh.easings.outExpo});l.animate({opacity:1,easing:lh.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner&&(l.ui.spinner.visible=!0);l.ui.label.fit()});return l}},{key:"forPromise",value:function(a,f,l){var r=this.open(f,l);lh.promise.finally(Promise.resolve(a),function(){return r.remove()});return r}},{key:"runFn",value:function(a,f,l){var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return v=
r.open(f,l),y.yield(v.whenRendered(),2);case 2:return y.setFinallyBlock(3),y.yield(a(v),5);case 5:return y.return(y.yieldResult);case 3:y.enterFinallyBlock(),v.remove(),y.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),
label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(a){this.animateProgress(lh.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var f=this.ui.status;a?(f.visible=!0,f.value=a):(f.visible=!1,f.value="");this.relayout()}},
fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=
[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:lh.pt(86.2,70.2)},{type:"label",name:"ld label",extent:lh.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:lh.Icon.textAttribute("times")},{type:lh.ProgressBar,name:"progress bar"}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:2099,end:8211})}(lh.Morph);QY=lh.LoadingIndicator;var sF=Ca("L",QY);lh.default=QY;var Pi=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");Pi.Morph=kl;Pi.World=sx;Pi.HorizontalLayout=Zt;Pi.morph=de;Pi.MorphicDB=$v;Pi.graph=tx;Pi.promise=Hg;Pi.date=Gv;Pi.string=Ih;Pi.arr=Lf;Pi.Color=ng;Pi.pt=di;Pi.LoadingIndicator=sF;Pi.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Pi.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Pi.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(b){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersion")&&"function"===typeof d.WorldVersion?d.WorldVersion:d.WorldVersion=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"update",value:function(){var a=$jscomp.makeIterator(this.submorphs),f=a.next().value;a=a.next().value;f.imageUrl=this.commit.preview||Pi.missingSVG;a.textAndAttributes=
this.info;a.fontColor=this.selected?Pi.Color.white:Pi.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:Pi.Color.transparent},info:{derived:!0,get:function(){var a=this.commit,f=a.message,l=a.name,r=a.timestamp;return[a._id.slice(0,6)+" ",{fontWeight:"bold"},Pi.string.truncate(f.split("\n")[0],40)+" ",{}," ("+l+" ",{},""+Pi.date.format(new Date(r),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(a){this.setProperty("selected",
a);this.update()}},layout:{initialize:function(){this.layout=new Pi.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:Pi.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:Pi.Color.gray}]}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(Pi.Morph);var Kca=function(b){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersionViewer")&&"function"===typeof d.WorldVersionViewer?d.WorldVersionViewer:d.WorldVersionViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(a){switch(a.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var a=this,f,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:return f=a.get("version list").selection,l=Pi.LoadingIndicator.open("Loading "+f.name+"..."),r=$world,v=a.db||
Pi.MorphicDB.default,y=f._id,H.setCatchFinallyBlocks(2,3),y?H.yield(Pi.World.loadFromCommit(y,void 0,{morphicDB:v}),8):H.yield(Pi.World.loadFromDB(f.name,f.ref,void 0,{morphicDB:v}),7);case 7:A=H.yieldResult;H.jumpTo(6);break;case 8:A=H.yieldResult;case 6:return E=A,H.return(E);case 3:H.enterFinallyBlock();l.remove();H.leaveFinallyBlock(0);break;case 2:F=H.enterCatchBlock(),console.error(F),r.showError("Error loading world:"+F),H.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var a=
this,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){f=a.get("version list").selection;if(!f)return E.return();l=a.db||Pi.MorphicDB.default;r=f;v=r._id;y=r.name;A=r.type;return E.yield(l.revert(A,y,v,"HEAD"),2)}return E.return(a.initializeFromStartCommit(f,l,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(a,f,l){f=void 0===f?Pi.MorphicDB.default:f;l=void 0===l?{}:l;var r=this,v,y,A,E,F,H,J,O,L,Y,S,ea,qa,Fa,K,Z,R,U,na,aa,xa,
jb,ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:return v=l,y=void 0===v.showRefs?!0:v.showRefs,A=r.startCommit=a,E=A._id,F=A.type,H=A.name,J=r.getSubmorphNamed("version list spinner"),J.visible=!0,J.center=r.get("version list").center,r.db=f,pa.yield(f.history(F,H),2);case 2:O=pa.yieldResult,L=O.refs,Y=O.history,S=E,ea=Pi.graph.invert(Y),qa=Pi.graph.hull(ea,E),Fa={_id:!0},K=[a],Z=$jscomp.makeIterator(qa),R=Z.next();case 3:if(R.done)return aa=Pi.arr.max(K,
function(ka){return ka.timestamp}),S=aa._id,pa.yield(f.log(S,void 0,!0),7);U=R.value;return pa.yield(f.log(U,void 0,!0,Fa),6);case 6:na=pa.yieldResult;K.push.apply(K,$jscomp.arrayFromIterable(na));na.forEach(function(ka){return Fa[ka._id]=!0});R=Z.next();pa.jumpTo(3);break;case 7:xa=pa.yieldResult;if(y)for(jb in L);ob=xa.map(function(ka){var wa=new Pi.WorldVersion({reactsToPointer:!1,commit:ka});wa.update();return{isListItem:!0,morph:wa,value:ka}});r.get("version list").items=ob;J.visible=!1;pa.jumpToEnd()}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(Pi.Morph);Kca=Pi.WorldVersionViewer;Pi.default=Kca;var Yl=lively.FreezerRuntime.recorderFor("lively.components/canvas.js");Yl.pt=di;
Yl.Point=tg;Yl.rect=Dl;Yl.Color=ng;Yl.Morph=kl;Yl.Image=Vz;Yl.connect=Li;var aJ=Ca("aW",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/canvas.js"),k=d.hasOwnProperty("Canvas")&&"function"===typeof d.Canvas?d.Canvas:d.Canvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"context",get:function(){if(this._canvas)return this._canvas.getContext(this.contextType);this.world()&&this.env.renderer.getNodeForMorph(this)||
console.warn("Context not yet rendered. Please ensure that the Canvas Morph has been rendered first before accessing the context. This can be achieved by waiting for the whenRendered() promise before you proceed accessing the context property.");return null}},{key:"_canvas",set:function(a){var f=this.__canvas__;this.__canvas__=a;this.restoreContent(f,a)}},{key:"_canvas",get:function(){return this.__canvas__}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);Yl.connect(this,"extent",this,"onExtentChanged")}},{key:"afterRender",value:function(a,f){f?this._canvas=a:"function"===typeof this.__canvas_init__&&(this.__canvas_init__(),delete this.__canvas_init__)}},{key:"restoreContent",value:function(a,f){var l=this.contextType,r=this.preserveContents;"function"===typeof this.__canvas_init__?(this.__canvas_init__(),delete this.__canvas_init__):r&&"2d"==l&&a&&a!==f&&this.context.drawImage(a,0,0)}},
{key:"onExtentChanged",value:function(){var a=this;if(this._canvas&&this.preserveContents&&this.context.getImageData){var f=this._canvas,l=this.context.getImageData(0,0,f.width,f.height);this.__canvas_init__=function(){a.context.putImageData(l,0,0)}}}},{key:"clear",value:function(a){var f=this.context;if(f){var l=this._canvas,r=l.width;l=l.height;f.save();f.setTransform(1,0,0,1,0,0);a?(a.toCSSString&&(a=a.toCSSString()),f.fillStyle=a,f.fillRect(0,0,r,l)):f.clearRect(0,0,r,l);f.restore()}}},{key:"render",
value:function(a){return a.renderCanvas(this)}},{key:"withContextDo",value:function(a){var f=this;this._canvas?a(this.context):this.__canvas_init__=function(){return a(f.context)}}},{key:"toDataURI",value:function(){return this._canvas&&this._canvas.toDataURL()}},{key:"fromDataURI",value:function(a){var f=this,l=new Yl.Image;l.onload=function(){f._canvas.width=l.width;f._canvas.height=l.height;f.context.drawImage(l,0,0)};l.src=a}},{key:"imageData",value:function(a){a||(a=this.canvasBounds);return this.context.getImageData(a.x,
a.y,a.width,a.height)}},{key:"nonTransparentArea",value:function(){for(var a=this.imageData(),f=a.data,l=a.width,r=a.height,v=l,y=r,A=0;A<r;A++)for(var E=0;E<v;E++)0<f[4*(A*l+E)+3]&&(v=E,y>A&&(y=A));if(v===l)return Yl.rect(0,0,0,0);A=v;E=y;for(--r;r>y;r--)for(var F=l-1;F>A;F--)0<f[4*(r*l+F)+3]&&(A=F,E<r&&(E=r));return{imageData:a,bounds:Yl.rect(v,y,A-v+1,E-y+1)}}},{key:"trimNonTransparent",value:function(){var a=this.nonTransparentArea(),f=a.imageData;a=a.bounds;if(!a.topLeft().equals(Yl.pt(0,0))){var l=
a.x,r=a.y;this.context.putImageData(f,-l,-r,l,r,a.width,a.height);this.position=this.position.addPt(a.topLeft())}a.extent().equals(this.extent)||(this.extent=a.extent())}},{key:"finishDraw",value:function(a){a=void 0===a?{}:a;var f=this.context,l=a,r=void 0===l.color?"rgba(0,0,0,0.6)":l.color,v=void 0===l.width?4:l.width;l=void 0===l.fill?!1:l.fill;a=a.fillColor||r;r.toCSSString&&(r=r.toCSSString());a.toCSSString&&(a=a.toCSSString());f.strokeStyle=r;f.lineWidth=v;f.stroke();f.closePath();l&&(f.fillStyle=
a,f.fill())}},{key:"line",value:function(a,f,l){l=void 0===l?{}:l;var r=this.context;r.beginPath();r.moveTo(a.x,a.y);r.lineTo(f.x,f.y);r.lineCap="round";this.finishDraw(l)}},{key:"arc",value:function(a,f,l,r,v,y){v=void 0===v?!1:v;y=void 0===y?{}:y;var A=this.context;A.beginPath();A.arc(a.x,a.y,f,l,r,v);this.finishDraw(y)}},{key:"polygon",value:function(a,f){f=void 0===f?{}:f;var l=this.context;l.beginPath();l.moveTo(a[0].x,a[0].y);for(var r=0;r<a.length;r++)l.lineTo(a[r].x,a[r].y);l.lineTo(a[0].x,
a[0].y);this.finishDraw(f)}},{key:"text",value:function(a,f,l){l=void 0===l?{}:l;var r=this.context,v=l,y=void 0===v.color?"black":v.color,A=void 0===v.font?"14px Arial":v.font,E=void 0===v.align?"start":v.align;v=void 0===v.baseline?"bottom":v.baseline;r.save();r.font=A;r.fillStyle=y;r.textAlign=E;r.textBaseline=v;l.angle&&!isNaN(l.angle)&&(r.translate(f.x,f.y),r.rotate(l.angle),r.translate(-f.x,-f.y));r.fillText(a,f.x,f.y);r.restore()}},{key:"line",value:function(a,f,l){l=void 0===l?{}:l;var r=
this.context,v=l.color||"rgba(0,0,0,0.6)";l=l.width||4;v.toCSSString&&(v=v.toCSSString());r.strokeStyle=v;r.beginPath();r.lineWidth=l;r.moveTo(a.x,a.y);r.lineTo(f.x,f.y);r.stroke();r.closePath()}},{key:"spiral",value:function(){this.clear(Yl.Color.white);for(var a=this.innerBounds().center(),f=0,l=1,r=0;150>r;r++){var v=a.addPt(Yl.Point.polar(l,f));this.line(a,v,{color:Yl.Color.random()});a=v;f+=Math.PI/10;l+=.3}}},{key:"rect",value:function(a,f,l){l=void 0===l?{}:l;var r=this.context;r.beginPath();
r.rect(a.x,a.y,f.x,f.y);this.finishDraw(l)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Canvas"}},{key:"properties",get:function(){return{extent:{defaultValue:Yl.pt(200,200)},fill:{defaultValue:Yl.Color.transparent},contextType:{defaultValue:"2d"},preserveContents:{defaultValue:!0},canvasExtent:{get:function(){return this._canvas&&Yl.pt(this._canvas.width,this._canvas.height)}},pixelRatio:{derived:!0,set:function(a){this._canvas&&(this._canvas.width=a*this.width,this._canvas.height=
a*this.height)}},canvasBounds:{readOnly:!0,get:function(){return this._canvas&&this.canvasExtent.extentAsRectangle()}},_serializedContents:{get:function(){return this.preserveContents&&this.toDataURI()},set:function(a){var f=this;this.withContextDo(function(){return f.fromDataURI(a)})}}}}}],d,{pathInPackage:function(){return"canvas.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:233,end:8859})}(Yl.Morph));Yl.Canvas=aJ;Yl.Canvas=aJ;Yl.Canvas=aJ;var Mx=lively.FreezerRuntime.recorderFor("Globe/index.js");Mx.Canvas=aJ;Mx.promise=Hg;Mx.easings=mr;var Lca=function(b){var d=lively.FreezerRuntime.recorderFor("Globe/index.js"),k=d.hasOwnProperty("Globe")&&"function"===typeof d.Globe?d.Globe:d.Globe=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"fullyLoaded",
value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(f=a.get("webgl canvas"),l.yield(Mx.promise.waitFor(5E3,function(){return f.firstFrameRendered}),2)):l.return(l.yieldResult)})}},{key:"onLoad",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return navigator.webdriver||!lively.FreezerRuntime?l.return():l.yield(a.whenRendered(),2);case 2:return f=a.get("webgl canvas"),
f.renderGlobe(),l.yield(a.fullyLoaded(),3);case 3:return l.yield(Mx.promise.delay(500),4);case 4:a.get("cover").animate({opacity:0,easing:Mx.easings.inOutCubic}),f.relayout(),l.jumpToEnd()}})}},{key:"beforePublish",value:function(){this.get("cover").opacity=1}},{key:"onExtentChanged",value:function(){Zb._get(Object.getPrototypeOf(k.prototype),"onExtentChanged",this).call(this);this.get("webgl canvas").extent=this.extent;this.get("cover").extent=this.extent}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Globe"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"Globe",version:"0.1.1-26"}}},{start:169,end:918})}(Mx.Canvas);Lca=Mx.Globe;Mx.default=Lca;var bJ={},Mca=!1,p="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Sxa=function(){if(Mca)return bJ;Mca=!0;(function(b,d){"object"===
typeof bJ?d(bJ):"function"===typeof define&&define.amd?define(["exports"],d):(b="undefined"!==typeof globalThis?globalThis:b||self,d(b.THREE={}))})(bJ,function(b){function d(){}function k(u,z){for(var t=0;t<z.length;t++){var w=z[t];w.enumerable=w.enumerable||!1;w.configurable=!0;"value"in w&&(w.writable=!0);Object.defineProperty(u,w.key,w)}}function a(u,z,t){z&&k(u.prototype,z);t&&k(u,t);return u}function f(u,z){u.prototype=Object.create(z.prototype);u.prototype.constructor=u;u.__proto__=z}function l(u){if(void 0===
u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function r(u,z,t,w,C,G,M,Q,X,T){void 0===u&&(u=r.DEFAULT_IMAGE);void 0===z&&(z=r.DEFAULT_MAPPING);void 0===t&&(t=1001);void 0===w&&(w=1001);void 0===C&&(C=1006);void 0===G&&(G=1008);void 0===M&&(M=1023);void 0===Q&&(Q=1009);void 0===X&&(X=1);void 0===T&&(T=3E3);Object.defineProperty(this||p,"id",{value:Gwa++});(this||p).uuid=Kh.generateUUID();(this||p).name="";(this||p).image=u;(this||p).mipmaps=[];(this||
p).mapping=z;(this||p).wrapS=t;(this||p).wrapT=w;(this||p).magFilter=C;(this||p).minFilter=G;(this||p).anisotropy=X;(this||p).format=M;(this||p).internalFormat=null;(this||p).type=Q;(this||p).offset=new Je(0,0);(this||p).repeat=new Je(1,1);(this||p).center=new Je(0,0);(this||p).rotation=0;(this||p).matrixAutoUpdate=!0;(this||p).matrix=new Cp;(this||p).generateMipmaps=!0;(this||p).premultiplyAlpha=!1;(this||p).flipY=!0;(this||p).unpackAlignment=4;(this||p).encoding=T;(this||p).version=0;(this||p).onUpdate=
null}function v(u){if("undefined"!==typeof HTMLImageElement&&u instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&u instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&u instanceof ImageBitmap)return DC.getDataURL(u);if(u.data)return{data:Array.prototype.slice.call(u.data),width:u.width,height:u.height,type:u.data.constructor.name};console.warn("THREE.Texture: Unable to serialize Texture.");return{}}function y(u,z,t){(this||p).width=u;(this||p).height=z;(this||p).scissor=
new Gk(0,0,u,z);(this||p).scissorTest=!1;(this||p).viewport=new Gk(0,0,u,z);t=t||{};(this||p).texture=new r(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding);(this||p).texture.image={};(this||p).texture.image.width=u;(this||p).texture.image.height=z;(this||p).texture.generateMipmaps=void 0!==t.generateMipmaps?t.generateMipmaps:!1;(this||p).texture.minFilter=void 0!==t.minFilter?t.minFilter:1006;(this||p).depthBuffer=void 0!==t.depthBuffer?t.depthBuffer:
!0;(this||p).stencilBuffer=void 0!==t.stencilBuffer?t.stencilBuffer:!1;(this||p).depthTexture=void 0!==t.depthTexture?t.depthTexture:null}function A(u,z,t){y.call(this||p,u,z,t);(this||p).samples=4}function E(u,z,t,w,C){for(var G=0,M=u.length-3;G<=M;G+=3){EC.fromArray(u,G);var Q=C.x*Math.abs(EC.x)+C.y*Math.abs(EC.y)+C.z*Math.abs(EC.z),X=z.dot(EC),T=t.dot(EC),fa=w.dot(EC);if(Math.max(-Math.max(X,T,fa),Math.min(X,T,fa))>Q)return!1}return!0}function F(){Object.defineProperty(this||p,"id",{value:Hwa++});
(this||p).uuid=Kh.generateUUID();(this||p).name="";(this||p).type="Object3D";(this||p).parent=null;(this||p).children=[];(this||p).up=F.DefaultUp.clone();var u=new kc,z=new PP,t=new So,w=new kc(1,1,1);z._onChange(function(){t.setFromEuler(z,!1)});t._onChange(function(){z.setFromQuaternion(t,void 0,!1)});Object.defineProperties(this||p,{position:{configurable:!0,enumerable:!0,value:u},rotation:{configurable:!0,enumerable:!0,value:z},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,
enumerable:!0,value:w},modelViewMatrix:{value:new Qi},normalMatrix:{value:new Cp}});(this||p).matrix=new Qi;(this||p).matrixWorld=new Qi;(this||p).matrixAutoUpdate=F.DefaultMatrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=!1;(this||p).layers=new RY;(this||p).visible=!0;(this||p).castShadow=!1;(this||p).receiveShadow=!1;(this||p).frustumCulled=!0;(this||p).renderOrder=0;(this||p).animations=[];(this||p).userData={}}function H(u,z,t){0>t&&(t+=1);1<t&&--t;return t<1/6?u+6*(z-u)*t:.5>t?z:t<2/3?u+6*(z-
u)*(2/3-t):u}function J(u){return.04045>u?.0773993808*u:Math.pow(.9478672986*u+.0521327014,2.4)}function O(u){return.0031308>u?12.92*u:1.055*Math.pow(u,.41666)-.055}function L(){Object.defineProperty(this||p,"id",{value:Iwa++});(this||p).uuid=Kh.generateUUID();(this||p).name="";(this||p).type="Material";(this||p).fog=!0;(this||p).blending=1;(this||p).side=0;(this||p).flatShading=!1;(this||p).vertexColors=!1;(this||p).opacity=1;(this||p).transparent=!1;(this||p).blendSrc=204;(this||p).blendDst=205;
(this||p).blendEquation=100;(this||p).blendSrcAlpha=null;(this||p).blendDstAlpha=null;(this||p).blendEquationAlpha=null;(this||p).depthFunc=3;(this||p).depthTest=!0;(this||p).depthWrite=!0;(this||p).stencilWriteMask=255;(this||p).stencilFunc=519;(this||p).stencilRef=0;(this||p).stencilFuncMask=255;(this||p).stencilFail=7680;(this||p).stencilZFail=7680;(this||p).stencilZPass=7680;(this||p).stencilWrite=!1;(this||p).clippingPlanes=null;(this||p).clipIntersection=!1;(this||p).clipShadows=!1;(this||p).shadowSide=
null;(this||p).colorWrite=!0;(this||p).precision=null;(this||p).polygonOffset=!1;(this||p).polygonOffsetFactor=0;(this||p).polygonOffsetUnits=0;(this||p).dithering=!1;(this||p).alphaTest=0;(this||p).premultipliedAlpha=!1;(this||p).visible=!0;(this||p).toneMapped=!0;(this||p).userData={};(this||p).version=0}function Y(u){L.call(this||p);(this||p).type="MeshBasicMaterial";(this||p).color=new bg(16777215);(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||
p).aoMapIntensity=1;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;this.setValues(u)}function S(u,z,t){if(Array.isArray(u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");(this||p).name="";(this||p).array=
u;(this||p).itemSize=z;(this||p).count=void 0!==u?u.length/z:0;(this||p).normalized=!0===t;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0}function ea(u,z,t){S.call(this||p,new Int8Array(u),z,t)}function qa(u,z,t){S.call(this||p,new Uint8Array(u),z,t)}function Fa(u,z,t){S.call(this||p,new Uint8ClampedArray(u),z,t)}function K(u,z,t){S.call(this||p,new Int16Array(u),z,t)}function Z(u,z,t){S.call(this||p,new Uint16Array(u),z,t)}function R(u,z,t){S.call(this||p,new Int32Array(u),
z,t)}function U(u,z,t){S.call(this||p,new Uint32Array(u),z,t)}function na(u,z,t){S.call(this||p,new Uint16Array(u),z,t)}function aa(u,z,t){S.call(this||p,new Float32Array(u),z,t)}function xa(u,z,t){S.call(this||p,new Float64Array(u),z,t)}function jb(u){if(0===u.length)return-Infinity;for(var z=u[0],t=1,w=u.length;t<w;++t)u[t]>z&&(z=u[t]);return z}function ob(){Object.defineProperty(this||p,"id",{value:Jwa+=2});(this||p).uuid=Kh.generateUUID();(this||p).name="";(this||p).type="BufferGeometry";(this||
p).index=null;(this||p).attributes={};(this||p).morphAttributes={};(this||p).morphTargetsRelative=!1;(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).drawRange={start:0,count:Infinity};(this||p).userData={}}function pa(u,z){void 0===u&&(u=new ob);void 0===z&&(z=new Y);F.call(this||p);(this||p).type="Mesh";(this||p).geometry=u;(this||p).material=z;this.updateMorphTargets()}function ka(u,z,t,w,C,G,M,Q){if(null===(1===z.side?w.intersectTriangle(M,G,C,!0,Q):w.intersectTriangle(C,
G,M,2!==z.side,Q)))return null;QP.copy(Q);QP.applyMatrix4(u.matrixWorld);z=t.ray.origin.distanceTo(QP);return z<t.near||z>t.far?null:{distance:z,point:QP.clone(),object:u}}function wa(u,z,t,w,C,G,M,Q,X,T,fa,oa){dA.fromBufferAttribute(C,T);eA.fromBufferAttribute(C,fa);fA.fromBufferAttribute(C,oa);C=u.morphTargetInfluences;if(z.morphTargets&&G&&C){RP.set(0,0,0);SP.set(0,0,0);TP.set(0,0,0);for(var Ga=0,Xa=G.length;Ga<Xa;Ga++){var Wa=C[Ga],tb=G[Ga];0!==Wa&&(SY.fromBufferAttribute(tb,T),TY.fromBufferAttribute(tb,
fa),UY.fromBufferAttribute(tb,oa),M?(RP.addScaledVector(SY,Wa),SP.addScaledVector(TY,Wa),TP.addScaledVector(UY,Wa)):(RP.addScaledVector(SY.sub(dA),Wa),SP.addScaledVector(TY.sub(eA),Wa),TP.addScaledVector(UY.sub(fA),Wa)))}dA.add(RP);eA.add(SP);fA.add(TP)}u.isSkinnedMesh&&(u.boneTransform(T,dA),u.boneTransform(fa,eA),u.boneTransform(oa,fA));if(u=ka(u,z,t,w,dA,eA,fA,cJ))Q&&(tF.fromBufferAttribute(Q,T),uF.fromBufferAttribute(Q,fa),vF.fromBufferAttribute(Q,oa),u.uv=cu.getUV(cJ,dA,eA,fA,tF,uF,vF,new Je)),
X&&(tF.fromBufferAttribute(X,T),uF.fromBufferAttribute(X,fa),vF.fromBufferAttribute(X,oa),u.uv2=cu.getUV(cJ,dA,eA,fA,tF,uF,vF,new Je)),Q=new dJ(T,fa,oa),cu.getNormal(dA,eA,fA,Q.normal),u.face=Q;return u}function Ka(u){var z={},t;for(t in u){z[t]={};for(var w in u[t]){var C=u[t][w];C&&(C.isColor||C.isMatrix3||C.isMatrix4||C.isVector2||C.isVector3||C.isVector4||C.isTexture)?z[t][w]=C.clone():Array.isArray(C)?z[t][w]=C.slice():z[t][w]=C}}return z}function Fb(u){for(var z={},t=0;t<u.length;t++){var w=
Ka(u[t]),C;for(C in w)z[C]=w[C]}return z}function hc(u){L.call(this||p);(this||p).type="ShaderMaterial";(this||p).defines={};(this||p).uniforms={};(this||p).vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";(this||p).fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";(this||p).linewidth=1;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;(this||p).lights=!1;(this||p).clipping=!1;(this||p).skinning=
!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};(this||p).defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};(this||p).index0AttributeName=void 0;(this||p).uniformsNeedUpdate=!1;(this||p).glslVersion=null;void 0!==u&&(void 0!==u.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(u))}function Ub(){F.call(this||p);(this||
p).type="Camera";(this||p).matrixWorldInverse=new Qi;(this||p).projectionMatrix=new Qi;(this||p).projectionMatrixInverse=new Qi}function ac(u,z,t,w){void 0===u&&(u=50);void 0===z&&(z=1);void 0===t&&(t=.1);void 0===w&&(w=2E3);Ub.call(this||p);(this||p).type="PerspectiveCamera";(this||p).fov=u;(this||p).zoom=1;(this||p).near=t;(this||p).far=w;(this||p).focus=10;(this||p).aspect=z;(this||p).view=null;(this||p).filmGauge=35;(this||p).filmOffset=0;this.updateProjectionMatrix()}function Ic(u,z,t){F.call(this||
p);(this||p).type="CubeCamera";if(!0!==t.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{(this||p).renderTarget=t;var w=new ac(90,1,u,z);w.layers=(this||p).layers;w.up.set(0,-1,0);w.lookAt(new kc(1,0,0));this.add(w);var C=new ac(90,1,u,z);C.layers=(this||p).layers;C.up.set(0,-1,0);C.lookAt(new kc(-1,0,0));this.add(C);var G=new ac(90,1,u,z);G.layers=(this||p).layers;G.up.set(0,0,1);G.lookAt(new kc(0,
1,0));this.add(G);var M=new ac(90,1,u,z);M.layers=(this||p).layers;M.up.set(0,0,-1);M.lookAt(new kc(0,-1,0));this.add(M);var Q=new ac(90,1,u,z);Q.layers=(this||p).layers;Q.up.set(0,-1,0);Q.lookAt(new kc(0,0,1));this.add(Q);var X=new ac(90,1,u,z);X.layers=(this||p).layers;X.up.set(0,-1,0);X.lookAt(new kc(0,0,-1));this.add(X);(this||p).update=function(T,fa){null===(this||p).parent&&this.updateMatrixWorld();var oa=T.xr.enabled,Ga=T.getRenderTarget();T.xr.enabled=!1;var Xa=t.texture.generateMipmaps;t.texture.generateMipmaps=
!1;T.setRenderTarget(t,0);T.render(fa,w);T.setRenderTarget(t,1);T.render(fa,C);T.setRenderTarget(t,2);T.render(fa,G);T.setRenderTarget(t,3);T.render(fa,M);T.setRenderTarget(t,4);T.render(fa,Q);t.texture.generateMipmaps=Xa;T.setRenderTarget(t,5);T.render(fa,X);T.setRenderTarget(Ga);T.xr.enabled=oa}}}function Mb(u,z,t,w,C,G,M,Q,X,T){u=void 0!==u?u:[];r.call(this||p,u,void 0!==z?z:301,t,w,C,G,void 0!==M?M:1022,Q,X,T);(this||p).flipY=!1;(this||p)._needsFlipEnvMap=!0}function ed(u,z,t){Number.isInteger(z)&&
(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),z=t);y.call(this||p,u,u,z);z=z||{};(this||p).texture=new Mb(void 0,z.mapping,z.wrapS,z.wrapT,z.magFilter,z.minFilter,z.format,z.type,z.anisotropy,z.encoding);(this||p).texture._needsFlipEnvMap=!1}function Bd(u,z,t,w,C,G,M,Q,X,T,fa,oa){r.call(this||p,null,G,M,Q,X,T,w,C,fa,oa);(this||p).image={data:u||null,width:z||1,height:t||1};(this||p).magFilter=void 0!==X?X:1003;(this||p).minFilter=
void 0!==T?T:1003;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).unpackAlignment=1;(this||p).needsUpdate=!0}function ja(){function u(G,M){w(G,M);C=z.requestAnimationFrame(u)}var z=null,t=!1,w=null,C=null;return{start:function(){!0!==t&&null!==w&&(C=z.requestAnimationFrame(u),t=!0)},stop:function(){z.cancelAnimationFrame(C);t=!1},setAnimationLoop:function(G){w=G},setContext:function(G){z=G}}}function Ba(u,z){function t(G,M){var Q=G.array,X=G.usage,T=u.createBuffer();u.bindBuffer(M,T);u.bufferData(M,
Q,X);G.onUploadCallback();M=5126;Q instanceof Float32Array?M=5126:Q instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Q instanceof Uint16Array?G.isFloat16BufferAttribute?w?M=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):M=5123:Q instanceof Int16Array?M=5122:Q instanceof Uint32Array?M=5125:Q instanceof Int32Array?M=5124:Q instanceof Int8Array?M=5120:Q instanceof Uint8Array&&(M=5121);return{buffer:T,
type:M,bytesPerElement:Q.BYTES_PER_ELEMENT,version:G.version}}var w=z.isWebGL2,C=new WeakMap;return{get:function(G){G.isInterleavedBufferAttribute&&(G=G.data);return C.get(G)},remove:function(G){G.isInterleavedBufferAttribute&&(G=G.data);var M=C.get(G);M&&(u.deleteBuffer(M.buffer),C.delete(G))},update:function(G,M){if(G.isGLBufferAttribute)M=C.get(G),(!M||M.version<G.version)&&C.set(G,{buffer:G.buffer,type:G.type,bytesPerElement:G.elementSize,version:G.version});else{G.isInterleavedBufferAttribute&&
(G=G.data);var Q=C.get(G);if(void 0===Q)C.set(G,t(G,M));else if(Q.version<G.version){var X=G.array,T=G.updateRange;u.bindBuffer(M,Q.buffer);-1===T.count?u.bufferSubData(M,0,X):(w?u.bufferSubData(M,T.offset*X.BYTES_PER_ELEMENT,X,T.offset,T.count):u.bufferSubData(M,T.offset*X.BYTES_PER_ELEMENT,X.subarray(T.offset,T.offset+T.count)),T.count=-1);Q.version=G.version}}}}}function Ea(u,z,t,w,C){function G(Xa,Wa){t.buffers.color.setClear(Xa.r,Xa.g,Xa.b,Wa,C)}var M=new bg(0),Q=0,X,T,fa=null,oa=0,Ga=null;return{getClearColor:function(){return M},
setClearColor:function(Xa,Wa){void 0===Wa&&(Wa=1);M.set(Xa);Q=Wa;G(M,Q)},getClearAlpha:function(){return Q},setClearAlpha:function(Xa){Q=Xa;G(M,Q)},render:function(Xa,Wa,tb,mb){(Wa=!0===Wa.isScene?Wa.background:null)&&Wa.isTexture&&(Wa=z.get(Wa));tb=u.xr;(tb=tb.getSession&&tb.getSession())&&"additive"===tb.environmentBlendMode&&(Wa=null);null===Wa?G(M,Q):Wa&&Wa.isColor&&(G(Wa,1),mb=!0);(u.autoClear||mb)&&u.clear(u.autoClearColor,u.autoClearDepth,u.autoClearStencil);if(Wa&&(Wa.isCubeTexture||Wa.isWebGLCubeRenderTarget||
306===Wa.mapping)){void 0===T&&(T=new pa(new eJ(1,1,1),new hc({name:"BackgroundCubeMaterial",uniforms:Ka(du.cube.uniforms),vertexShader:du.cube.vertexShader,fragmentShader:du.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),T.geometry.deleteAttribute("normal"),T.geometry.deleteAttribute("uv"),T.onBeforeRender=function(Kc,ic,Lc){(this||p).matrixWorld.copyPosition(Lc.matrixWorld)},Object.defineProperty(T.material,"envMap",{get:function(){return(this||p).uniforms.envMap.value}}),w.update(T));
Wa.isWebGLCubeRenderTarget&&(Wa=Wa.texture);T.material.uniforms.envMap.value=Wa;T.material.uniforms.flipEnvMap.value=Wa.isCubeTexture&&Wa._needsFlipEnvMap?-1:1;if(fa!==Wa||oa!==Wa.version||Ga!==u.toneMapping)T.material.needsUpdate=!0,fa=Wa,oa=Wa.version,Ga=u.toneMapping;Xa.unshift(T,T.geometry,T.material,0,0,null)}else if(Wa&&Wa.isTexture){void 0===X&&(X=new pa(new UP(2,2),new hc({name:"BackgroundMaterial",uniforms:Ka(du.background.uniforms),vertexShader:du.background.vertexShader,fragmentShader:du.background.fragmentShader,
side:0,depthTest:!1,depthWrite:!1,fog:!1})),X.geometry.deleteAttribute("normal"),Object.defineProperty(X.material,"map",{get:function(){return(this||p).uniforms.t2D.value}}),w.update(X));X.material.uniforms.t2D.value=Wa;!0===Wa.matrixAutoUpdate&&Wa.updateMatrix();X.material.uniforms.uvTransform.value.copy(Wa.matrix);if(fa!==Wa||oa!==Wa.version||Ga!==u.toneMapping)X.material.needsUpdate=!0,fa=Wa,oa=Wa.version,Ga=u.toneMapping;Xa.unshift(X,X.geometry,X.material,0,0,null)}}}}function wb(u,z,t,w){function C(Lc){return w.isWebGL2?
u.bindVertexArray(Lc):Wa.bindVertexArrayOES(Lc)}function G(Lc){return w.isWebGL2?u.deleteVertexArray(Lc):Wa.deleteVertexArrayOES(Lc)}function M(Lc){for(var vc=[],Yc=[],fd=[],Zc=0;Zc<Xa;Zc++)vc[Zc]=0,Yc[Zc]=0,fd[Zc]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:vc,enabledAttributes:Yc,attributeDivisors:fd,object:Lc,attributes:{},index:null}}function Q(){for(var Lc=ic.newAttributes,vc=0,Yc=Lc.length;vc<Yc;vc++)Lc[vc]=0}function X(Lc){T(Lc,0)}function T(Lc,vc){var Yc=ic.enabledAttributes,
fd=ic.attributeDivisors;ic.newAttributes[Lc]=1;0===Yc[Lc]&&(u.enableVertexAttribArray(Lc),Yc[Lc]=1);fd[Lc]!==vc&&((w.isWebGL2?u:z.get("ANGLE_instanced_arrays"))[w.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Lc,vc),fd[Lc]=vc)}function fa(){for(var Lc=ic.newAttributes,vc=ic.enabledAttributes,Yc=0,fd=vc.length;Yc<fd;Yc++)vc[Yc]!==Lc[Yc]&&(u.disableVertexAttribArray(Yc),vc[Yc]=0)}function oa(){Ga();ic!==Kc&&(ic=Kc,C(ic.object))}function Ga(){Kc.geometry=null;Kc.program=null;Kc.wireframe=
!1}var Xa=u.getParameter(34921),Wa=w.isWebGL2?null:z.get("OES_vertex_array_object"),tb=w.isWebGL2||null!==Wa,mb={},Kc=M(null),ic=Kc;return{setup:function(Lc,vc,Yc,fd,Zc){var Rd=!1;if(tb){Rd=!0===vc.wireframe;var ld=mb[fd.id];void 0===ld&&(ld={},mb[fd.id]=ld);var sd=ld[Yc.id];void 0===sd&&(sd={},ld[Yc.id]=sd);ld=sd[Rd];void 0===ld&&(ld=M(w.isWebGL2?u.createVertexArray():Wa.createVertexArrayOES()),sd[Rd]=ld);Rd=ld;ic!==Rd&&(ic=Rd,C(ic.object));a:{Rd=ic.attributes;sd=fd.attributes;ld=0;for(var Ae in sd){var qe=
Rd[Ae],Qf=sd[Ae];if(void 0===qe||qe.attribute!==Qf||qe.data!==Qf.data){Rd=!0;break a}ld++}Rd=ic.attributesNum!==ld||ic.index!==Zc?!0:!1}if(Rd){Ae={};sd=fd.attributes;ld=0;for(var Af in sd)qe=sd[Af],Qf={},Qf.attribute=qe,qe.data&&(Qf.data=qe.data),Ae[Af]=Qf,ld++;ic.attributes=Ae;ic.attributesNum=ld;ic.index=Zc}}else if(Af=!0===vc.wireframe,ic.geometry!==fd.id||ic.program!==Yc.id||ic.wireframe!==Af)ic.geometry=fd.id,ic.program=Yc.id,ic.wireframe=Af,Rd=!0;!0===Lc.isInstancedMesh&&(Rd=!0);null!==Zc&&
t.update(Zc,34963);if(Rd){if(!1!==w.isWebGL2||!Lc.isInstancedMesh&&!fd.isInstancedBufferGeometry||null!==z.get("ANGLE_instanced_arrays")){Q();Af=fd.attributes;Yc=Yc.getAttributes();vc=vc.defaultAttributeValues;for(var Mf in Yc)if(Rd=Yc[Mf],0<=Rd){var jg=Af[Mf];if(void 0!==jg){if(Ae=jg.normalized,qe=jg.itemSize,ld=t.get(jg),void 0!==ld){var ah=ld.buffer;sd=ld.type;ld=ld.bytesPerElement;if(jg.isInterleavedBufferAttribute){var Lh=jg.data;Qf=Lh.stride;jg=jg.offset;Lh&&Lh.isInstancedInterleavedBuffer?
(T(Rd,Lh.meshPerAttribute),void 0===fd._maxInstanceCount&&(fd._maxInstanceCount=Lh.meshPerAttribute*Lh.count)):X(Rd);u.bindBuffer(34962,ah);Qf*=ld;ld*=jg;!0!==w.isWebGL2||5124!==sd&&5125!==sd?u.vertexAttribPointer(Rd,qe,sd,Ae,Qf,ld):u.vertexAttribIPointer(Rd,qe,sd,Qf,ld)}else jg.isInstancedBufferAttribute?(T(Rd,jg.meshPerAttribute),void 0===fd._maxInstanceCount&&(fd._maxInstanceCount=jg.meshPerAttribute*jg.count)):X(Rd),u.bindBuffer(34962,ah),ld=qe,!0!==w.isWebGL2||5124!==sd&&5125!==sd?u.vertexAttribPointer(Rd,
ld,sd,Ae,0,0):u.vertexAttribIPointer(Rd,ld,sd,0,0)}}else if("instanceMatrix"===Mf)sd=t.get(Lc.instanceMatrix),void 0!==sd&&(Ae=sd.buffer,sd=sd.type,T(Rd+0,1),T(Rd+1,1),T(Rd+2,1),T(Rd+3,1),u.bindBuffer(34962,Ae),u.vertexAttribPointer(Rd+0,4,sd,!1,64,0),u.vertexAttribPointer(Rd+1,4,sd,!1,64,16),u.vertexAttribPointer(Rd+2,4,sd,!1,64,32),u.vertexAttribPointer(Rd+3,4,sd,!1,64,48));else if("instanceColor"===Mf)sd=t.get(Lc.instanceColor),void 0!==sd&&(Ae=sd.buffer,sd=sd.type,T(Rd,1),u.bindBuffer(34962,Ae),
u.vertexAttribPointer(Rd,3,sd,!1,12,0));else if(void 0!==vc&&(Ae=vc[Mf],void 0!==Ae))switch(Ae.length){case 2:u.vertexAttrib2fv(Rd,Ae);break;case 3:u.vertexAttrib3fv(Rd,Ae);break;case 4:u.vertexAttrib4fv(Rd,Ae);break;default:u.vertexAttrib1fv(Rd,Ae)}}fa()}null!==Zc&&u.bindBuffer(34963,t.get(Zc).buffer)}},reset:oa,resetDefaultState:Ga,dispose:function(){oa();for(var Lc in mb){var vc=mb[Lc],Yc;for(Yc in vc){var fd=vc[Yc],Zc;for(Zc in fd)G(fd[Zc].object),delete fd[Zc];delete vc[Yc]}delete mb[Lc]}},releaseStatesOfGeometry:function(Lc){if(void 0!==
mb[Lc.id]){var vc=mb[Lc.id],Yc;for(Yc in vc){var fd=vc[Yc],Zc;for(Zc in fd)G(fd[Zc].object),delete fd[Zc];delete vc[Yc]}delete mb[Lc.id]}},releaseStatesOfProgram:function(Lc){for(var vc in mb){var Yc=mb[vc];if(void 0!==Yc[Lc.id]){var fd=Yc[Lc.id],Zc;for(Zc in fd)G(fd[Zc].object),delete fd[Zc];delete Yc[Lc.id]}}},initAttributes:Q,enableAttribute:X,disableUnusedAttributes:fa}}function $b(u,z,t,w){var C=w.isWebGL2,G;(this||p).setMode=function(M){G=M};(this||p).render=function(M,Q){u.drawArrays(G,M,Q);
t.update(Q,G,1)};(this||p).renderInstances=function(M,Q,X){if(0!==X){if(C){var T=u;var fa="drawArraysInstanced"}else if(T=z.get("ANGLE_instanced_arrays"),fa="drawArraysInstancedANGLE",null===T){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}T[fa](G,M,Q,X);t.update(Q,G,X)}}}function zd(u,z,t){function w(Lc){if("highp"===Lc){if(0<u.getShaderPrecisionFormat(35633,36338).precision&&0<u.getShaderPrecisionFormat(35632,
36338).precision)return"highp";Lc="mediump"}return"mediump"===Lc&&0<u.getShaderPrecisionFormat(35633,36337).precision&&0<u.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var C,G="undefined"!==typeof WebGL2RenderingContext&&u instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&u instanceof WebGL2ComputeRenderingContext,M=void 0!==t.precision?t.precision:"highp",Q=w(M);Q!==M&&(console.warn("THREE.WebGLRenderer:",M,"not supported, using",Q,"instead."),
M=Q);t=!0===t.logarithmicDepthBuffer;Q=u.getParameter(34930);var X=u.getParameter(35660),T=u.getParameter(3379),fa=u.getParameter(34076),oa=u.getParameter(34921),Ga=u.getParameter(36347),Xa=u.getParameter(36348),Wa=u.getParameter(36349),tb=0<X,mb=G||!!z.get("OES_texture_float"),Kc=tb&&mb,ic=G?u.getParameter(36183):0;return{isWebGL2:G,getMaxAnisotropy:function(){if(void 0!==C)return C;var Lc=z.get("EXT_texture_filter_anisotropic");return C=null!==Lc?u.getParameter(Lc.MAX_TEXTURE_MAX_ANISOTROPY_EXT):
0},getMaxPrecision:w,precision:M,logarithmicDepthBuffer:t,maxTextures:Q,maxVertexTextures:X,maxTextureSize:T,maxCubemapSize:fa,maxAttributes:oa,maxVertexUniforms:Ga,maxVaryings:Xa,maxFragmentUniforms:Wa,vertexTextures:tb,floatFragmentTextures:mb,floatVertexTextures:Kc,maxSamples:ic}}function yd(u){function z(){fa.value!==C&&(fa.value=C,fa.needsUpdate=0<G);w.numPlanes=G;w.numIntersection=0}function t(oa,Ga,Xa,Wa){var tb=null!==oa?oa.length:0,mb=null;if(0!==tb){mb=fa.value;if(!0!==Wa||null===mb){Wa=
Xa+4*tb;Ga=Ga.matrixWorldInverse;T.getNormalMatrix(Ga);if(null===mb||mb.length<Wa)mb=new Float32Array(Wa);for(Wa=0;Wa!==tb;++Wa,Xa+=4)X.copy(oa[Wa]).applyMatrix4(Ga,T),X.normal.toArray(mb,Xa),mb[Xa+3]=X.constant}fa.value=mb;fa.needsUpdate=!0}w.numPlanes=tb;w.numIntersection=0;return mb}var w=this||p,C=null,G=0,M=!1,Q=!1,X=new dw,T=new Cp,fa={value:null,needsUpdate:!1};(this||p).uniform=fa;(this||p).numPlanes=0;(this||p).numIntersection=0;(this||p).init=function(oa,Ga,Xa){var Wa=0!==oa.length||Ga||
0!==G||M;M=Ga;C=t(oa,Xa,0);G=oa.length;return Wa};(this||p).beginShadows=function(){Q=!0;t(null)};(this||p).endShadows=function(){Q=!1;z()};(this||p).setState=function(oa,Ga,Xa){var Wa=oa.clippingPlanes,tb=oa.clipIntersection,mb=oa.clipShadows;oa=u.get(oa);if(!M||null===Wa||0===Wa.length||Q&&!mb)Q?t(null):z();else{mb=Q?0:G;var Kc=4*mb,ic=oa.clippingState||null;fa.value=ic;ic=t(Wa,Ga,Kc,Xa);for(Ga=0;Ga!==Kc;++Ga)ic[Ga]=C[Ga];oa.clippingState=ic;(this||p).numIntersection=tb?(this||p).numPlanes:0;(this||
p).numPlanes+=mb}}}function Mc(u){function z(C,G){303===G?C.mapping=301:304===G&&(C.mapping=302);return C}function t(C){C=C.target;C.removeEventListener("dispose",t);var G=w.get(C);void 0!==G&&(w.delete(C),G.dispose())}var w=new WeakMap;return{get:function(C){if(C&&C.isTexture){var G=C.mapping;if(303===G||304===G){if(w.has(C))return G=w.get(C).texture,z(G,C.mapping);var M=C.image;if(M&&0<M.height){G=u.getRenderList();var Q=u.getRenderTarget();M=new ed(M.height/2);M.fromEquirectangularTexture(u,C);
w.set(C,M);u.setRenderTarget(Q);u.setRenderList(G);C.addEventListener("dispose",t);return z(M.texture,C.mapping)}return null}}return C},dispose:function(){w=new WeakMap}}}function Me(u){var z={};return{has:function(t){if(void 0!==z[t])return null!==z[t];switch(t){case "WEBGL_depth_texture":var w=u.getExtension("WEBGL_depth_texture")||u.getExtension("MOZ_WEBGL_depth_texture")||u.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":w=u.getExtension("EXT_texture_filter_anisotropic")||
u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":w=u.getExtension("WEBGL_compressed_texture_s3tc")||u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":w=u.getExtension("WEBGL_compressed_texture_pvrtc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:w=u.getExtension(t)}z[t]=
w;return null!==w},get:function(t){this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported.");return z[t]}}}function Fe(u,z,t,w){function C(X){X=X.target;var T=M.get(X);null!==T.index&&z.remove(T.index);for(var fa in T.attributes)z.remove(T.attributes[fa]);X.removeEventListener("dispose",C);M.delete(X);if(fa=Q.get(T))z.remove(fa),Q.delete(T);w.releaseStatesOfGeometry(T);!0===X.isInstancedBufferGeometry&&delete X._maxInstanceCount;t.memory.geometries--}function G(X){var T=[],
fa=X.index,oa=X.attributes.position;if(null!==fa){oa=fa.array;fa=fa.version;for(var Ga=0,Xa=oa.length;Ga<Xa;Ga+=3){var Wa=oa[Ga+0],tb=oa[Ga+1],mb=oa[Ga+2];T.push(Wa,tb,tb,mb,mb,Wa)}}else for(Ga=oa.array,fa=oa.version,oa=0,Ga=Ga.length/3-1;oa<Ga;oa+=3)Xa=oa+0,Wa=oa+1,tb=oa+2,T.push(Xa,Wa,Wa,tb,tb,Xa);T=new (65535<jb(T)?U:Z)(T,1);T.version=fa;(fa=Q.get(X))&&z.remove(fa);Q.set(X,T)}var M=new WeakMap,Q=new WeakMap;return{get:function(X,T){var fa=M.get(T);if(fa)return fa;T.addEventListener("dispose",C);
T.isBufferGeometry?fa=T:T.isGeometry&&(void 0===T._bufferGeometry&&(T._bufferGeometry=(new ob).setFromObject(X)),fa=T._bufferGeometry);M.set(T,fa);t.memory.geometries++;return fa},update:function(X){var T=X.attributes;for(oa in T)z.update(T[oa],34962);X=X.morphAttributes;for(var fa in X){T=X[fa];var oa=0;for(var Ga=T.length;oa<Ga;oa++)z.update(T[oa],34962)}},getWireframeAttribute:function(X){var T=Q.get(X);if(T){var fa=X.index;null!==fa&&T.version<fa.version&&G(X)}else G(X);return Q.get(X)}}}function Jh(u,
z,t,w){var C=w.isWebGL2,G,M,Q;(this||p).setMode=function(X){G=X};(this||p).setIndex=function(X){M=X.type;Q=X.bytesPerElement};(this||p).render=function(X,T){u.drawElements(G,T,M,X*Q);t.update(T,G,1)};(this||p).renderInstances=function(X,T,fa){if(0!==fa){if(C){var oa=u;var Ga="drawElementsInstanced"}else if(oa=z.get("ANGLE_instanced_arrays"),Ga="drawElementsInstancedANGLE",null===oa){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
return}oa[Ga](G,T,M,X*Q,fa);t.update(T,G,fa)}}}function fh(u){var z={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:z,programs:null,autoReset:!0,reset:function(){z.frame++;z.calls=0;z.triangles=0;z.points=0;z.lines=0},update:function(t,w,C){z.calls++;switch(w){case 4:z.triangles+=t/3*C;break;case 1:z.lines+=t/2*C;break;case 3:z.lines+=C*(t-1);break;case 2:z.lines+=C*t;break;case 0:z.points+=C*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",
w)}}}}function dj(u,z){return u[0]-z[0]}function Wi(u,z){return Math.abs(z[1])-Math.abs(u[1])}function Tj(u){for(var z={},t=new Float32Array(8),w=[],C=0;8>C;C++)w[C]=[C,0];return{update:function(G,M,Q,X){var T=G.morphTargetInfluences;G=void 0===T?0:T.length;var fa=z[M.id];if(void 0===fa){fa=[];for(var oa=0;oa<G;oa++)fa[oa]=[oa,0];z[M.id]=fa}for(oa=0;oa<G;oa++){var Ga=fa[oa];Ga[0]=oa;Ga[1]=T[oa]}fa.sort(Wi);for(T=0;8>T;T++)T<G&&fa[T][1]?(w[T][0]=fa[T][0],w[T][1]=fa[T][1]):(w[T][0]=Number.MAX_SAFE_INTEGER,
w[T][1]=0);w.sort(dj);G=Q.morphTargets&&M.morphAttributes.position;Q=Q.morphNormals&&M.morphAttributes.normal;for(T=fa=0;8>T;T++)Ga=w[T],oa=Ga[0],Ga=Ga[1],oa!==Number.MAX_SAFE_INTEGER&&Ga?(G&&M.getAttribute("morphTarget"+T)!==G[oa]&&M.setAttribute("morphTarget"+T,G[oa]),Q&&M.getAttribute("morphNormal"+T)!==Q[oa]&&M.setAttribute("morphNormal"+T,Q[oa]),t[T]=Ga,fa+=Ga):(G&&!0===M.hasAttribute("morphTarget"+T)&&M.deleteAttribute("morphTarget"+T),Q&&!0===M.hasAttribute("morphNormal"+T)&&M.deleteAttribute("morphNormal"+
T),t[T]=0);M=M.morphTargetsRelative?1:1-fa;X.getUniforms().setValue(u,"morphTargetBaseInfluence",M);X.getUniforms().setValue(u,"morphTargetInfluences",t)}}}function gk(u,z,t,w){function C(M){M=M.target;M.removeEventListener("dispose",C);t.remove(M.instanceMatrix);null!==M.instanceColor&&t.remove(M.instanceColor)}var G=new WeakMap;return{update:function(M){var Q=w.render.frame,X=M.geometry,T=z.get(M,X);G.get(T)!==Q&&(X.isGeometry&&T.updateFromObject(M),z.update(T),G.set(T,Q));M.isInstancedMesh&&(!1===
M.hasEventListener("dispose",C)&&M.addEventListener("dispose",C),t.update(M.instanceMatrix,34962),null!==M.instanceColor&&t.update(M.instanceColor,34962));return T},dispose:function(){G=new WeakMap}}}function yj(u,z,t,w){void 0===u&&(u=null);void 0===z&&(z=1);void 0===t&&(t=1);void 0===w&&(w=1);r.call(this||p,null);(this||p).image={data:u,width:z,height:t,depth:w};(this||p).magFilter=1003;(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=
!0}function zj(u,z,t,w){void 0===u&&(u=null);void 0===z&&(z=1);void 0===t&&(t=1);void 0===w&&(w=1);r.call(this||p,null);(this||p).image={data:u,width:z,height:t,depth:w};(this||p).magFilter=1003;(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=!0}function gi(u,z,t){var w=u[0];if(0>=w||0<w)return u;var C=z*t,G=Nca[C];void 0===G&&(G=new Float32Array(C),Nca[C]=G);if(0!==z)for(w.toArray(G,0),w=1,C=0;w!==z;++w)C+=t,u[w].toArray(G,C);return G}
function pi(u,z){if(u.length!==z.length)return!1;for(var t=0,w=u.length;t<w;t++)if(u[t]!==z[t])return!1;return!0}function Bi(u,z){for(var t=0,w=z.length;t<w;t++)u[t]=z[t]}function Kj(u,z){var t=Oca[z];void 0===t&&(t=new Int32Array(z),Oca[z]=t);for(var w=0;w!==z;++w)t[w]=u.allocateTextureUnit();return t}function xk(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1f((this||p).addr,z),t[0]=z)}function Jz(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y)u.uniform2f((this||p).addr,
z.x,z.y),t[0]=z.x,t[1]=z.y}else pi(t,z)||(u.uniform2fv((this||p).addr,z),Bi(t,z))}function Dd(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y||t[2]!==z.z)u.uniform3f((this||p).addr,z.x,z.y,z.z),t[0]=z.x,t[1]=z.y,t[2]=z.z}else if(void 0!==z.r){if(t[0]!==z.r||t[1]!==z.g||t[2]!==z.b)u.uniform3f((this||p).addr,z.r,z.g,z.b),t[0]=z.r,t[1]=z.g,t[2]=z.b}else pi(t,z)||(u.uniform3fv((this||p).addr,z),Bi(t,z))}function Ed(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==
z.y||t[2]!==z.z||t[3]!==z.w)u.uniform4f((this||p).addr,z.x,z.y,z.z,z.w),t[0]=z.x,t[1]=z.y,t[2]=z.z,t[3]=z.w}else pi(t,z)||(u.uniform4fv((this||p).addr,z),Bi(t,z))}function Hz(u,z){var t=(this||p).cache,w=z.elements;void 0===w?pi(t,z)||(u.uniformMatrix2fv((this||p).addr,!1,z),Bi(t,z)):pi(t,w)||(Pca.set(w),u.uniformMatrix2fv((this||p).addr,!1,Pca),Bi(t,w))}function Ax(u,z){var t=(this||p).cache,w=z.elements;void 0===w?pi(t,z)||(u.uniformMatrix3fv((this||p).addr,!1,z),Bi(t,z)):pi(t,w)||(Qca.set(w),u.uniformMatrix3fv((this||
p).addr,!1,Qca),Bi(t,w))}function Nv(u,z){var t=(this||p).cache,w=z.elements;void 0===w?pi(t,z)||(u.uniformMatrix4fv((this||p).addr,!1,z),Bi(t,z)):pi(t,w)||(Rca.set(w),u.uniformMatrix4fv((this||p).addr,!1,Rca),Bi(t,w))}function UB(u,z,t){var w=(this||p).cache,C=t.allocateTextureUnit();w[0]!==C&&(u.uniform1i((this||p).addr,C),w[0]=C);t.safeSetTexture2D(z||Sca,C)}function XB(u,z,t){var w=(this||p).cache,C=t.allocateTextureUnit();w[0]!==C&&(u.uniform1i((this||p).addr,C),w[0]=C);t.setTexture2DArray(z||
Kwa,C)}function YB(u,z,t){var w=(this||p).cache,C=t.allocateTextureUnit();w[0]!==C&&(u.uniform1i((this||p).addr,C),w[0]=C);t.setTexture3D(z||Lwa,C)}function ZB(u,z,t){var w=(this||p).cache,C=t.allocateTextureUnit();w[0]!==C&&(u.uniform1i((this||p).addr,C),w[0]=C);t.safeSetTextureCube(z||Tca,C)}function $B(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1i((this||p).addr,z),t[0]=z)}function VB(u,z){var t=(this||p).cache;pi(t,z)||(u.uniform2iv((this||p).addr,z),Bi(t,z))}function AW(u,z){var t=(this||
p).cache;pi(t,z)||(u.uniform3iv((this||p).addr,z),Bi(t,z))}function XN(u,z){var t=(this||p).cache;pi(t,z)||(u.uniform4iv((this||p).addr,z),Bi(t,z))}function SN(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1ui((this||p).addr,z),t[0]=z)}function eI(u){switch(u){case 5126:return xk;case 35664:return Jz;case 35665:return Dd;case 35666:return Ed;case 35674:return Hz;case 35675:return Ax;case 35676:return Nv;case 5124:case 35670:return $B;case 35667:case 35671:return VB;case 35668:case 35672:return AW;
case 35669:case 35673:return XN;case 5125:return SN;case 35678:case 36198:case 36298:case 36306:case 35682:return UB;case 35679:case 36299:case 36307:return YB;case 35680:case 36300:case 36308:case 36293:return ZB;case 36289:case 36303:case 36311:case 36292:return XB}}function BW(u,z){u.uniform1fv((this||p).addr,z)}function DW(u,z){u.uniform1iv((this||p).addr,z)}function CW(u,z){u.uniform2iv((this||p).addr,z)}function lr(u,z){u.uniform3iv((this||p).addr,z)}function qW(u,z){u.uniform4iv((this||p).addr,
z)}function rW(u,z){z=gi(z,(this||p).size,2);u.uniform2fv((this||p).addr,z)}function pW(u,z){z=gi(z,(this||p).size,3);u.uniform3fv((this||p).addr,z)}function WB(u,z){z=gi(z,(this||p).size,4);u.uniform4fv((this||p).addr,z)}function sW(u,z){z=gi(z,(this||p).size,4);u.uniformMatrix2fv((this||p).addr,!1,z)}function YN(u,z){z=gi(z,(this||p).size,9);u.uniformMatrix3fv((this||p).addr,!1,z)}function Mt(u,z){z=gi(z,(this||p).size,16);u.uniformMatrix4fv((this||p).addr,!1,z)}function tW(u,z,t){var w=z.length,
C=Kj(t,w);u.uniform1iv((this||p).addr,C);for(u=0;u!==w;++u)t.safeSetTexture2D(z[u]||Sca,C[u])}function dI(u,z,t){var w=z.length,C=Kj(t,w);u.uniform1iv((this||p).addr,C);for(u=0;u!==w;++u)t.safeSetTextureCube(z[u]||Tca,C[u])}function uW(u){switch(u){case 5126:return BW;case 35664:return rW;case 35665:return pW;case 35666:return WB;case 35674:return sW;case 35675:return YN;case 35676:return Mt;case 5124:case 35670:return DW;case 35667:case 35671:return CW;case 35668:case 35672:return lr;case 35669:case 35673:return qW;
case 35678:case 36198:case 36298:case 36306:case 35682:return tW;case 35680:case 36300:case 36308:case 36293:return dI}}function xW(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).setValue=eI(z.type)}function ZN(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).size=z.size;(this||p).setValue=uW(z.type)}function TN(u){(this||p).id=u;(this||p).seq=[];(this||p).map={}}function Ov(u,z){(this||p).seq=[];(this||p).map={};for(var t=u.getProgramParameter(z,35718),w=0;w<
t;++w){var C=u.getActiveUniform(z,w),G=u.getUniformLocation(z,C.name),M=this||p,Q=C.name,X=Q.length;for(VY.lastIndex=0;;){var T=VY.exec(Q),fa=VY.lastIndex,oa=T[1],Ga=T[3];"]"===T[2]&&(oa|=0);if(void 0===Ga||"["===Ga&&fa+2===X){Q=M;C=void 0===Ga?new xW(oa,C,G):new ZN(oa,C,G);Q.seq.push(C);Q.map[C.id]=C;break}else Ga=M.map[oa],void 0===Ga&&(Ga=new TN(oa),oa=M,M=Ga,oa.seq.push(M),oa.map[M.id]=M),M=Ga}}}function UN(u,z,t){z=u.createShader(z);u.shaderSource(z,t);u.compileShader(z);return z}function fI(u){switch(u){case 3E3:return["Linear",
"( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",u),["Linear","( value )"]}}function WN(u,z,t){var w=u.getShaderParameter(z,35713),C=u.getShaderInfoLog(z).trim();
if(w&&""===C)return"";u=u.getShaderSource(z).split("\n");for(z=0;z<u.length;z++)u[z]=z+1+": "+u[z];u=u.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+"\n"+C+u}function Iz(u,z){z=fI(z);return"vec4 "+u+"( vec4 value ) { return "+z[0]+"ToLinear"+z[1]+"; }"}function VN(u,z){z=fI(z);return"vec4 "+u+"( vec4 value ) { return LinearTo"+z[0]+z[1]+"; }"}function yW(u,z){switch(z){case 1:z="Linear";break;case 2:z="Reinhard";break;case 3:z="OptimizedCineon";break;case 4:z="ACESFilmic";break;case 5:z=
"Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",z),z="Linear"}return"vec3 "+u+"( vec3 color ) { return "+z+"ToneMapping( color ); }"}function zW(u){var z=[],t;for(t in u){var w=u[t];!1!==w&&z.push("#define "+t+" "+w)}return z.join("\n")}function la(u){return""!==u}function La(u,z){return u.replace(/NUM_DIR_LIGHTS/g,z.numDirLights).replace(/NUM_SPOT_LIGHTS/g,z.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,z.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,z.numPointLights).replace(/NUM_HEMI_LIGHTS/g,
z.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,z.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,z.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,z.numPointLightShadows)}function Da(u,z){return u.replace(/NUM_CLIPPING_PLANES/g,z.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,z.numClippingPlanes-z.numClipIntersection)}function Ua(u,z){u=Yi[z];if(void 0===u)throw Error("Can not resolve #include <"+z+">");return u.replace(WY,Ua)}function lb(u,z,t,w){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");
return Yb(u,z,t,w)}function Yb(u,z,t,w){u="";for(z=parseInt(z);z<parseInt(t);z++)u+=w.replace(/\[\s*i\s*\]/g,"[ "+z+" ]").replace(/UNROLLED_LOOP_INDEX/g,z);return u}function $a(u){var z="precision "+u.precision+" float;\nprecision "+u.precision+" int;";"highp"===u.precision?z+="\n#define HIGH_PRECISION":"mediump"===u.precision?z+="\n#define MEDIUM_PRECISION":"lowp"===u.precision&&(z+="\n#define LOW_PRECISION");return z}function Pb(u){var z="SHADOWMAP_TYPE_BASIC";1===u.shadowMapType?z="SHADOWMAP_TYPE_PCF":
2===u.shadowMapType?z="SHADOWMAP_TYPE_PCF_SOFT":3===u.shadowMapType&&(z="SHADOWMAP_TYPE_VSM");return z}function Ib(u){var z="ENVMAP_TYPE_CUBE";if(u.envMap)switch(u.envMapMode){case 301:case 302:z="ENVMAP_TYPE_CUBE";break;case 306:case 307:z="ENVMAP_TYPE_CUBE_UV"}return z}function Uc(u){var z="ENVMAP_MODE_REFLECTION";if(u.envMap)switch(u.envMapMode){case 302:case 307:z="ENVMAP_MODE_REFRACTION"}return z}function Lb(u){var z="ENVMAP_BLENDING_NONE";if(u.envMap)switch(u.combine){case 0:z="ENVMAP_BLENDING_MULTIPLY";
break;case 1:z="ENVMAP_BLENDING_MIX";break;case 2:z="ENVMAP_BLENDING_ADD"}return z}function Ud(u,z,t,w){var C=u.getContext(),G=t.defines,M=t.vertexShader,Q=t.fragmentShader,X=Pb(t),T=Ib(t),fa=Uc(t),oa=Lb(t),Ga=0<u.gammaFactor?u.gammaFactor:1,Xa=t.isWebGL2?"":[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?
"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(la).join("\n"),Wa=zW(G),tb=C.createProgram(),mb=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(G=[Wa].filter(la).join("\n"),0<G.length&&(G+="\n"),X=[Xa,Wa].filter(la).join("\n"),0<X.length&&(X+="\n")):
(G=[$a(t),"#define SHADER_NAME "+t.shaderName,Wa,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Ga,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+fa:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?
"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?
"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":
"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+X:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;",
"uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;",
"\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;",
"#endif","\n"].filter(la).join("\n"),X=[Xa,$a(t),"#define SHADER_NAME "+t.shaderName,Wa,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Ga,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+T:"",t.envMap?"#define "+fa:"",t.envMap?"#define "+oa:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":
"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":
"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",
t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+X:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",
"uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Yi.tonemapping_pars_fragment:"",0!==t.toneMapping?yW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",Yi.encodings_pars_fragment,t.map?Iz("mapTexelToLinear",t.mapEncoding):"",t.matcap?Iz("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Iz("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Iz("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?Iz("lightMapTexelToLinear",
t.lightMapEncoding):"",VN("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(la).join("\n"));M=M.replace(WY,Ua);M=La(M,t);M=Da(M,t);Q=Q.replace(WY,Ua);Q=La(Q,t);Q=Da(Q,t);M=M.replace(Uca,Yb).replace(Vca,lb);Q=Q.replace(Uca,Yb).replace(Vca,lb);t.isWebGL2&&!0!==t.isRawShaderMaterial&&(mb="#version 300 es\n",G="#define attribute in\n#define varying out\n#define texture2D texture\n"+G,X=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;",
"300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+X);Q=mb+X+Q;M=UN(C,35633,mb+G+M);Q=UN(C,35632,Q);
C.attachShader(tb,M);C.attachShader(tb,Q);void 0!==t.index0AttributeName?C.bindAttribLocation(tb,0,t.index0AttributeName):!0===t.morphTargets&&C.bindAttribLocation(tb,0,"position");C.linkProgram(tb);if(u.debug.checkShaderErrors){u=C.getProgramInfoLog(tb).trim();mb=C.getShaderInfoLog(M).trim();T=C.getShaderInfoLog(Q).trim();oa=fa=!0;if(!1===C.getProgramParameter(tb,35714))fa=!1,Ga=WN(C,M,"vertex"),Xa=WN(C,Q,"fragment"),console.error("THREE.WebGLProgram: shader error: ",C.getError(),"35715",C.getProgramParameter(tb,
35715),"gl.getProgramInfoLog",u,Ga,Xa);else if(""!==u)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",u);else if(""===mb||""===T)oa=!1;oa&&((this||p).diagnostics={runnable:fa,programLog:u,vertexShader:{log:mb,prefix:G},fragmentShader:{log:T,prefix:X}})}C.deleteShader(M);C.deleteShader(Q);var Kc;(this||p).getUniforms=function(){void 0===Kc&&(Kc=new Ov(C,tb));return Kc};var ic;(this||p).getAttributes=function(){if(void 0===ic){for(var Lc={},vc=C.getProgramParameter(tb,35721),Yc=0;Yc<vc;Yc++){var fd=
C.getActiveAttrib(tb,Yc).name;Lc[fd]=C.getAttribLocation(tb,fd)}ic=Lc}return ic};(this||p).destroy=function(){w.releaseStatesOfProgram(this||p);C.deleteProgram(tb);(this||p).program=void 0};(this||p).name=t.shaderName;(this||p).id=Mwa++;(this||p).cacheKey=z;(this||p).usedTimes=1;(this||p).program=tb;(this||p).vertexShader=M;(this||p).fragmentShader=Q;return this||p}function pe(u,z,t,w,C,G){function M(mb){mb&&mb.isTexture?mb=mb.encoding:mb&&mb.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),
mb=mb.texture.encoding):mb=3E3;return mb}var Q=[],X=w.isWebGL2,T=w.logarithmicDepthBuffer,fa=w.floatVertexTextures,oa=w.maxVertexUniforms,Ga=w.vertexTextures,Xa=w.precision,Wa={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",
PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},tb="precision isWebGL2 supportsVertexTextures outputEncoding instancing instancingColor map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");
return{getParameters:function(mb,Kc,ic,Lc,vc){var Yc=Lc.fog;Lc=mb.isMeshStandardMaterial?Lc.environment:null;Lc=z.get(mb.envMap||Lc);var fd=Wa[mb.type];if(vc.isSkinnedMesh){var Zc=vc.skeleton.bones;if(fa)Zc=1024;else{var Rd=Math.min(Math.floor((oa-20)/4),Zc.length);Rd<Zc.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Zc.length+" bones. This GPU supports "+Rd+"."),Zc=0):Zc=Rd}}else Zc=0;null!==mb.precision&&(Xa=w.getMaxPrecision(mb.precision),Xa!==mb.precision&&console.warn("THREE.WebGLProgram.getParameters:",
mb.precision,"not supported, using",Xa,"instead."));if(fd){var ld=du[fd];Rd=ld.vertexShader;ld=ld.fragmentShader}else Rd=mb.vertexShader,ld=mb.fragmentShader;var sd=u.getRenderTarget();return{isWebGL2:X,shaderID:fd,shaderName:mb.type,vertexShader:Rd,fragmentShader:ld,defines:mb.defines,isRawShaderMaterial:!0===mb.isRawShaderMaterial,glslVersion:mb.glslVersion,precision:Xa,instancing:!0===vc.isInstancedMesh,instancingColor:!0===vc.isInstancedMesh&&null!==vc.instanceColor,supportsVertexTextures:Ga,
outputEncoding:null!==sd?M(sd.texture):u.outputEncoding,map:!!mb.map,mapEncoding:M(mb.map),matcap:!!mb.matcap,matcapEncoding:M(mb.matcap),envMap:!!Lc,envMapMode:Lc&&Lc.mapping,envMapEncoding:M(Lc),envMapCubeUV:!!Lc&&(306===Lc.mapping||307===Lc.mapping),lightMap:!!mb.lightMap,lightMapEncoding:M(mb.lightMap),aoMap:!!mb.aoMap,emissiveMap:!!mb.emissiveMap,emissiveMapEncoding:M(mb.emissiveMap),bumpMap:!!mb.bumpMap,normalMap:!!mb.normalMap,objectSpaceNormalMap:1===mb.normalMapType,tangentSpaceNormalMap:0===
mb.normalMapType,clearcoatMap:!!mb.clearcoatMap,clearcoatRoughnessMap:!!mb.clearcoatRoughnessMap,clearcoatNormalMap:!!mb.clearcoatNormalMap,displacementMap:!!mb.displacementMap,roughnessMap:!!mb.roughnessMap,metalnessMap:!!mb.metalnessMap,specularMap:!!mb.specularMap,alphaMap:!!mb.alphaMap,gradientMap:!!mb.gradientMap,sheen:!!mb.sheen,transmissionMap:!!mb.transmissionMap,combine:mb.combine,vertexTangents:mb.normalMap&&mb.vertexTangents,vertexColors:mb.vertexColors,vertexUvs:!!mb.map||!!mb.bumpMap||
!!mb.normalMap||!!mb.specularMap||!!mb.alphaMap||!!mb.emissiveMap||!!mb.roughnessMap||!!mb.metalnessMap||!!mb.clearcoatMap||!!mb.clearcoatRoughnessMap||!!mb.clearcoatNormalMap||!!mb.displacementMap||!!mb.transmissionMap,uvsVertexOnly:!(mb.map||mb.bumpMap||mb.normalMap||mb.specularMap||mb.alphaMap||mb.emissiveMap||mb.roughnessMap||mb.metalnessMap||mb.clearcoatNormalMap||mb.transmissionMap)&&!!mb.displacementMap,fog:!!Yc,useFog:mb.fog,fogExp2:Yc&&Yc.isFogExp2,flatShading:mb.flatShading,sizeAttenuation:mb.sizeAttenuation,
logarithmicDepthBuffer:T,skinning:mb.skinning&&0<Zc,maxBones:Zc,useVertexTexture:fa,morphTargets:mb.morphTargets,morphNormals:mb.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:Kc.directional.length,numPointLights:Kc.point.length,numSpotLights:Kc.spot.length,numRectAreaLights:Kc.rectArea.length,numHemiLights:Kc.hemi.length,numDirLightShadows:Kc.directionalShadowMap.length,numPointLightShadows:Kc.pointShadowMap.length,numSpotLightShadows:Kc.spotShadowMap.length,
numClippingPlanes:G.numPlanes,numClipIntersection:G.numIntersection,dithering:mb.dithering,shadowMapEnabled:u.shadowMap.enabled&&0<ic.length,shadowMapType:u.shadowMap.type,toneMapping:mb.toneMapped?u.toneMapping:0,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:mb.premultipliedAlpha,alphaTest:mb.alphaTest,doubleSided:2===mb.side,flipSided:1===mb.side,depthPacking:void 0!==mb.depthPacking?mb.depthPacking:!1,index0AttributeName:mb.index0AttributeName,extensionDerivatives:mb.extensions&&
mb.extensions.derivatives,extensionFragDepth:mb.extensions&&mb.extensions.fragDepth,extensionDrawBuffers:mb.extensions&&mb.extensions.drawBuffers,extensionShaderTextureLOD:mb.extensions&&mb.extensions.shaderTextureLOD,rendererExtensionFragDepth:X||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:X||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:X||t.has("EXT_shader_texture_lod"),customProgramCacheKey:mb.customProgramCacheKey()}},getProgramCacheKey:function(mb){var Kc=[];mb.shaderID?
Kc.push(mb.shaderID):(Kc.push(mb.fragmentShader),Kc.push(mb.vertexShader));if(void 0!==mb.defines)for(var ic in mb.defines)Kc.push(ic),Kc.push(mb.defines[ic]);if(!1===mb.isRawShaderMaterial){for(ic=0;ic<tb.length;ic++)Kc.push(mb[tb[ic]]);Kc.push(u.outputEncoding);Kc.push(u.gammaFactor)}Kc.push(mb.customProgramCacheKey);return Kc.join()},getUniforms:function(mb){var Kc=Wa[mb.type];return Kc?Wca.clone(du[Kc].uniforms):mb.uniforms},acquireProgram:function(mb,Kc){for(var ic,Lc=0,vc=Q.length;Lc<vc;Lc++){var Yc=
Q[Lc];if(Yc.cacheKey===Kc){ic=Yc;++ic.usedTimes;break}}void 0===ic&&(ic=new Ud(u,Kc,mb,C),Q.push(ic));return ic},releaseProgram:function(mb){if(0===--mb.usedTimes){var Kc=Q.indexOf(mb);Q[Kc]=Q[Q.length-1];Q.pop();mb.destroy()}},programs:Q}}function uf(){var u=new WeakMap;return{get:function(z){var t=u.get(z);void 0===t&&(t={},u.set(z,t));return t},remove:function(z){u.delete(z)},update:function(z,t,w){u.get(z)[t]=w},dispose:function(){u=new WeakMap}}}function vf(u,z){return u.groupOrder!==z.groupOrder?
u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.program!==z.program?u.program.id-z.program.id:u.material.id!==z.material.id?u.material.id-z.material.id:u.z!==z.z?u.z-z.z:u.id-z.id}function Ie(u,z){return u.groupOrder!==z.groupOrder?u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.z!==z.z?z.z-u.z:u.id-z.id}function sf(u){function z(Q,X,T,fa,oa,Ga){var Xa=t[w],Wa=u.get(T);void 0===Xa?(Xa={id:Q.id,object:Q,geometry:X,material:T,
program:Wa.program||M,groupOrder:fa,renderOrder:Q.renderOrder,z:oa,group:Ga},t[w]=Xa):(Xa.id=Q.id,Xa.object=Q,Xa.geometry=X,Xa.material=T,Xa.program=Wa.program||M,Xa.groupOrder=fa,Xa.renderOrder=Q.renderOrder,Xa.z=oa,Xa.group=Ga);w++;return Xa}var t=[],w=0,C=[],G=[],M={id:-1};return{opaque:C,transparent:G,init:function(){w=0;C.length=0;G.length=0},push:function(Q,X,T,fa,oa,Ga){Q=z(Q,X,T,fa,oa,Ga);(!0===T.transparent?G:C).push(Q)},unshift:function(Q,X,T,fa,oa,Ga){Q=z(Q,X,T,fa,oa,Ga);(!0===T.transparent?
G:C).unshift(Q)},finish:function(){for(var Q=w,X=t.length;Q<X;Q++){var T=t[Q];if(null===T.id)break;T.id=null;T.object=null;T.geometry=null;T.material=null;T.program=null;T.group=null}},sort:function(Q,X){1<C.length&&C.sort(Q||vf);1<G.length&&G.sort(X||Ie)}}}function Oo(u){var z=new WeakMap;return{get:function(t,w){var C=z.get(t);if(void 0===C){var G=new sf(u);z.set(t,new WeakMap);z.get(t).set(w,G)}else G=C.get(w),void 0===G&&(G=new sf(u),C.set(w,G));return G},dispose:function(){z=new WeakMap}}}function vW(){var u=
{};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={direction:new kc,color:new bg};break;case "SpotLight":t={position:new kc,direction:new kc,color:new bg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":t={position:new kc,color:new bg,distance:0,decay:0};break;case "HemisphereLight":t={direction:new kc,skyColor:new bg,groundColor:new bg};break;case "RectAreaLight":t={color:new bg,position:new kc,halfWidth:new kc,halfHeight:new kc}}return u[z.id]=
t}}}function wW(){var u={};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case "SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case "PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1E3}}return u[z.id]=t}}}function Nwa(u,z){return(z.castShadow?1:0)-(u.castShadow?
1:0)}function Owa(u,z){for(var t=new vW,w=wW(),C={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},
G=0;9>G;G++)C.probe.push(new kc);var M=new kc,Q=new Qi,X=new Qi;return{setup:function(T){for(var fa=0,oa=0,Ga=0,Xa=0;9>Xa;Xa++)C.probe[Xa].set(0,0,0);var Wa=Xa=0,tb=0,mb=0,Kc=0,ic=0,Lc=0,vc=0;T.sort(Nwa);for(var Yc=0,fd=T.length;Yc<fd;Yc++){var Zc=T[Yc],Rd=Zc.color,ld=Zc.intensity,sd=Zc.distance,Ae=Zc.shadow&&Zc.shadow.map?Zc.shadow.map.texture:null;if(Zc.isAmbientLight)fa+=Rd.r*ld,oa+=Rd.g*ld,Ga+=Rd.b*ld;else if(Zc.isLightProbe)for(Ae=0;9>Ae;Ae++)C.probe[Ae].addScaledVector(Zc.sh.coefficients[Ae],
ld);else if(Zc.isDirectionalLight){ld=t.get(Zc);ld.color.copy(Zc.color).multiplyScalar(Zc.intensity);if(Zc.castShadow){var qe=Zc.shadow;Rd=w.get(Zc);Rd.shadowBias=qe.bias;Rd.shadowNormalBias=qe.normalBias;Rd.shadowRadius=qe.radius;Rd.shadowMapSize=qe.mapSize;C.directionalShadow[Xa]=Rd;C.directionalShadowMap[Xa]=Ae;C.directionalShadowMatrix[Xa]=Zc.shadow.matrix;ic++}C.directional[Xa]=ld;Xa++}else Zc.isSpotLight?(qe=t.get(Zc),qe.position.setFromMatrixPosition(Zc.matrixWorld),qe.color.copy(Rd).multiplyScalar(ld),
qe.distance=sd,qe.coneCos=Math.cos(Zc.angle),qe.penumbraCos=Math.cos(Zc.angle*(1-Zc.penumbra)),qe.decay=Zc.decay,Zc.castShadow&&(ld=Zc.shadow,Rd=w.get(Zc),Rd.shadowBias=ld.bias,Rd.shadowNormalBias=ld.normalBias,Rd.shadowRadius=ld.radius,Rd.shadowMapSize=ld.mapSize,C.spotShadow[tb]=Rd,C.spotShadowMap[tb]=Ae,C.spotShadowMatrix[tb]=Zc.shadow.matrix,vc++),C.spot[tb]=qe,tb++):Zc.isRectAreaLight?(Ae=t.get(Zc),Ae.color.copy(Rd).multiplyScalar(ld),Ae.halfWidth.set(.5*Zc.width,0,0),Ae.halfHeight.set(0,.5*
Zc.height,0),C.rectArea[mb]=Ae,mb++):Zc.isPointLight?(ld=t.get(Zc),ld.color.copy(Zc.color).multiplyScalar(Zc.intensity),ld.distance=Zc.distance,ld.decay=Zc.decay,Zc.castShadow&&(qe=Zc.shadow,Rd=w.get(Zc),Rd.shadowBias=qe.bias,Rd.shadowNormalBias=qe.normalBias,Rd.shadowRadius=qe.radius,Rd.shadowMapSize=qe.mapSize,Rd.shadowCameraNear=qe.camera.near,Rd.shadowCameraFar=qe.camera.far,C.pointShadow[Wa]=Rd,C.pointShadowMap[Wa]=Ae,C.pointShadowMatrix[Wa]=Zc.shadow.matrix,Lc++),C.point[Wa]=ld,Wa++):Zc.isHemisphereLight&&
(Ae=t.get(Zc),Ae.skyColor.copy(Zc.color).multiplyScalar(ld),Ae.groundColor.copy(Zc.groundColor).multiplyScalar(ld),C.hemi[Kc]=Ae,Kc++)}0<mb&&(z.isWebGL2?(C.rectAreaLTC1=Of.LTC_FLOAT_1,C.rectAreaLTC2=Of.LTC_FLOAT_2):!0===u.has("OES_texture_float_linear")?(C.rectAreaLTC1=Of.LTC_FLOAT_1,C.rectAreaLTC2=Of.LTC_FLOAT_2):!0===u.has("OES_texture_half_float_linear")?(C.rectAreaLTC1=Of.LTC_HALF_1,C.rectAreaLTC2=Of.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));
C.ambient[0]=fa;C.ambient[1]=oa;C.ambient[2]=Ga;T=C.hash;if(T.directionalLength!==Xa||T.pointLength!==Wa||T.spotLength!==tb||T.rectAreaLength!==mb||T.hemiLength!==Kc||T.numDirectionalShadows!==ic||T.numPointShadows!==Lc||T.numSpotShadows!==vc)C.directional.length=Xa,C.spot.length=tb,C.rectArea.length=mb,C.point.length=Wa,C.hemi.length=Kc,C.directionalShadow.length=ic,C.directionalShadowMap.length=ic,C.pointShadow.length=Lc,C.pointShadowMap.length=Lc,C.spotShadow.length=vc,C.spotShadowMap.length=vc,
C.directionalShadowMatrix.length=ic,C.pointShadowMatrix.length=Lc,C.spotShadowMatrix.length=vc,T.directionalLength=Xa,T.pointLength=Wa,T.spotLength=tb,T.rectAreaLength=mb,T.hemiLength=Kc,T.numDirectionalShadows=ic,T.numPointShadows=Lc,T.numSpotShadows=vc,C.version=Pwa++},setupView:function(T,fa){var oa=0,Ga=0,Xa=0,Wa=0,tb=0;fa=fa.matrixWorldInverse;for(var mb=0,Kc=T.length;mb<Kc;mb++){var ic=T[mb];if(ic.isDirectionalLight){var Lc=C.directional[oa];Lc.direction.setFromMatrixPosition(ic.matrixWorld);
M.setFromMatrixPosition(ic.target.matrixWorld);Lc.direction.sub(M);Lc.direction.transformDirection(fa);oa++}else ic.isSpotLight?(Lc=C.spot[Xa],Lc.position.setFromMatrixPosition(ic.matrixWorld),Lc.position.applyMatrix4(fa),Lc.direction.setFromMatrixPosition(ic.matrixWorld),M.setFromMatrixPosition(ic.target.matrixWorld),Lc.direction.sub(M),Lc.direction.transformDirection(fa),Xa++):ic.isRectAreaLight?(Lc=C.rectArea[Wa],Lc.position.setFromMatrixPosition(ic.matrixWorld),Lc.position.applyMatrix4(fa),X.identity(),
Q.copy(ic.matrixWorld),Q.premultiply(fa),X.extractRotation(Q),Lc.halfWidth.set(.5*ic.width,0,0),Lc.halfHeight.set(0,.5*ic.height,0),Lc.halfWidth.applyMatrix4(X),Lc.halfHeight.applyMatrix4(X),Wa++):ic.isPointLight?(Lc=C.point[Ga],Lc.position.setFromMatrixPosition(ic.matrixWorld),Lc.position.applyMatrix4(fa),Ga++):ic.isHemisphereLight&&(Lc=C.hemi[tb],Lc.direction.setFromMatrixPosition(ic.matrixWorld),Lc.direction.transformDirection(fa),Lc.direction.normalize(),tb++)}},state:C}}function Xca(u,z){var t=
new Owa(u,z),w=[],C=[];return{init:function(){w.length=0;C.length=0},state:{lightsArray:w,shadowsArray:C,lights:t},setupLights:function(){t.setup(w)},setupLightsView:function(G){t.setupView(w,G)},pushLight:function(G){w.push(G)},pushShadow:function(G){C.push(G)}}}function Qwa(u,z){var t=new WeakMap;return{get:function(w,C){void 0===C&&(C=0);!1===t.has(w)?(C=new Xca(u,z),t.set(w,[]),t.get(w).push(C)):C>=t.get(w).length?(C=new Xca(u,z),t.get(w).push(C)):C=t.get(w)[C];return C},dispose:function(){t=
new WeakMap}}}function gA(u){L.call(this||p);(this||p).type="MeshDepthMaterial";(this||p).depthPacking=3200;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;this.setValues(u)}function hA(u){L.call(this||p);(this||p).type="MeshDistanceMaterial";(this||p).referencePosition=new kc;(this||p).nearDistance=
1;(this||p).farDistance=1E3;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).fog=!1;this.setValues(u)}function Yca(u,z,t){function w(vc,Yc,fd){fd=vc<<0|Yc<<1|fd<<2;var Zc=oa[fd];void 0===Zc&&(Zc=new gA({depthPacking:3201,morphTargets:vc,skinning:Yc}),oa[fd]=Zc);return Zc}function C(vc,Yc,fd){fd=vc<<0|Yc<<1|fd<<2;var Zc=Ga[fd];void 0===Zc&&(Zc=new hA({morphTargets:vc,
skinning:Yc}),Ga[fd]=Zc);return Zc}function G(vc,Yc,fd,Zc,Rd,ld,sd){var Ae=w,qe=vc.customDepthMaterial;!0===Zc.isPointLight&&(Ae=C,qe=vc.customDistanceMaterial);void 0===qe?(qe=!1,!0===fd.morphTargets&&(qe=Yc.morphAttributes&&Yc.morphAttributes.position&&0<Yc.morphAttributes.position.length),Yc=!1,!0===vc.isSkinnedMesh&&(!0===fd.skinning?Yc=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",vc)),vc=Ae(qe,Yc,!0===vc.isInstancedMesh)):vc=qe;u.localClippingEnabled&&
!0===fd.clipShadows&&0!==fd.clippingPlanes.length&&(qe=vc.uuid,Ae=fd.uuid,Yc=Xa[qe],void 0===Yc&&(Yc={},Xa[qe]=Yc),qe=Yc[Ae],void 0===qe&&(qe=vc.clone(),Yc[Ae]=qe),vc=qe);vc.visible=fd.visible;vc.wireframe=fd.wireframe;vc.side=3===sd?null!==fd.shadowSide?fd.shadowSide:fd.side:null!==fd.shadowSide?fd.shadowSide:Wa[fd.side];vc.clipShadows=fd.clipShadows;vc.clippingPlanes=fd.clippingPlanes;vc.clipIntersection=fd.clipIntersection;vc.wireframeLinewidth=fd.wireframeLinewidth;vc.linewidth=fd.linewidth;!0===
Zc.isPointLight&&!0===vc.isMeshDistanceMaterial&&(vc.referencePosition.setFromMatrixPosition(Zc.matrixWorld),vc.nearDistance=Rd,vc.farDistance=ld);return vc}function M(vc,Yc,fd,Zc,Rd){if(!1!==vc.visible){if(vc.layers.test(Yc.layers)&&(vc.isMesh||vc.isLine||vc.isPoints)&&(vc.castShadow||vc.receiveShadow&&3===Rd)&&(!vc.frustumCulled||Q.intersectsObject(vc))){vc.modelViewMatrix.multiplyMatrices(fd.matrixWorldInverse,vc.matrixWorld);var ld=z.update(vc),sd=vc.material;if(Array.isArray(sd))for(var Ae=ld.groups,
qe=0,Qf=Ae.length;qe<Qf;qe++){var Af=Ae[qe],Mf=sd[Af.materialIndex];Mf&&Mf.visible&&(Mf=G(vc,ld,Mf,Zc,fd.near,fd.far,Rd),u.renderBufferDirect(fd,null,ld,Mf,vc,Af))}else sd.visible&&(sd=G(vc,ld,sd,Zc,fd.near,fd.far,Rd),u.renderBufferDirect(fd,null,ld,sd,vc,null))}vc=vc.children;ld=0;for(sd=vc.length;ld<sd;ld++)M(vc[ld],Yc,fd,Zc,Rd)}}var Q=new fJ,X=new Je,T=new Je,fa=new Gk,oa=[],Ga=[],Xa={},Wa={0:1,1:0,2:2},tb=new hc({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},
resolution:{value:new Je},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
mb=tb.clone();mb.defines.HORIZONTAL_PASS=1;var Kc=new ob;Kc.setAttribute("position",new S(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var ic=new pa(Kc,tb),Lc=this||p;(this||p).enabled=!1;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p).type=1;(this||p).render=function(vc,Yc,fd){if(!1!==Lc.enabled&&(!1!==Lc.autoUpdate||!1!==Lc.needsUpdate)&&0!==vc.length){var Zc=u.getRenderTarget(),Rd=u.getActiveCubeFace(),ld=u.getActiveMipmapLevel(),sd=u.state;sd.setBlending(0);sd.buffers.color.setClear(1,
1,1,1);sd.buffers.depth.setTest(!0);sd.setScissorTest(!1);for(var Ae=0,qe=vc.length;Ae<qe;Ae++){var Qf=vc[Ae],Af=Qf.shadow;if(void 0===Af)console.warn("THREE.WebGLShadowMap:",Qf,"has no shadow.");else if(!1!==Af.autoUpdate||!1!==Af.needsUpdate){X.copy(Af.mapSize);var Mf=Af.getFrameExtents();X.multiply(Mf);T.copy(Af.mapSize);if(X.x>t||X.y>t)X.x>t&&(T.x=Math.floor(t/Mf.x),X.x=T.x*Mf.x,Af.mapSize.x=T.x),X.y>t&&(T.y=Math.floor(t/Mf.y),X.y=T.y*Mf.y,Af.mapSize.y=T.y);null!==Af.map||Af.isPointLightShadow||
3!==(this||p).type||(Mf={minFilter:1006,magFilter:1006,format:1023},Af.map=new y(X.x,X.y,Mf),Af.map.texture.name=Qf.name+".shadowMap",Af.mapPass=new y(X.x,X.y,Mf),Af.camera.updateProjectionMatrix());null===Af.map&&(Af.map=new y(X.x,X.y,{minFilter:1003,magFilter:1003,format:1023}),Af.map.texture.name=Qf.name+".shadowMap",Af.camera.updateProjectionMatrix());u.setRenderTarget(Af.map);u.clear();Mf=Af.getViewportCount();for(var jg=0;jg<Mf;jg++){var ah=Af.getViewport(jg);fa.set(T.x*ah.x,T.y*ah.y,T.x*ah.z,
T.y*ah.w);sd.viewport(fa);Af.updateMatrices(Qf,jg);Q=Af.getFrustum();M(Yc,fd,Af.camera,Qf,(this||p).type)}Af.isPointLightShadow||3!==(this||p).type||(Qf=Af,Mf=fd,jg=z.update(ic),tb.uniforms.shadow_pass.value=Qf.map.texture,tb.uniforms.resolution.value=Qf.mapSize,tb.uniforms.radius.value=Qf.radius,u.setRenderTarget(Qf.mapPass),u.clear(),u.renderBufferDirect(Mf,null,jg,tb,ic,null),mb.uniforms.shadow_pass.value=Qf.mapPass.texture,mb.uniforms.resolution.value=Qf.mapSize,mb.uniforms.radius.value=Qf.radius,
u.setRenderTarget(Qf.map),u.clear(),u.renderBufferDirect(Mf,null,jg,mb,ic,null));Af.needsUpdate=!1}}Lc.needsUpdate=!1;u.setRenderTarget(Zc,Rd,ld)}}}function Rwa(u,z,t){function w(Wc,Ge,Ue){var vg=new Uint8Array(4),wf=u.createTexture();u.bindTexture(Wc,wf);u.texParameteri(Wc,10241,9728);u.texParameteri(Wc,10240,9728);for(Wc=0;Wc<Ue;Wc++)u.texImage2D(Ge+Wc,0,6408,1,1,0,6408,5121,vg);return wf}function C(Wc){!0!==mb[Wc]&&(u.enable(Wc),mb[Wc]=!0)}function G(Wc){!1!==mb[Wc]&&(u.disable(Wc),mb[Wc]=!1)}
function M(Wc,Ge,Ue,vg,wf,Mh,Eh,ai){if(0===Wc)ic&&(G(3042),ic=!1);else if(ic||(C(3042),ic=!0),5!==Wc){if(Wc!==Lc||ai!==sd){if(100!==vc||100!==Zc)u.blendEquation(32774),Zc=vc=100;if(ai)switch(Wc){case 1:u.blendFuncSeparate(1,771,1,771);break;case 2:u.blendFunc(1,1);break;case 3:u.blendFuncSeparate(0,0,769,771);break;case 4:u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wc)}else switch(Wc){case 1:u.blendFuncSeparate(770,771,1,771);break;case 2:u.blendFunc(770,
1);break;case 3:u.blendFunc(0,769);break;case 4:u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wc)}ld=Rd=fd=Yc=null;Lc=Wc;sd=ai}}else{wf=wf||Ge;Mh=Mh||Ue;Eh=Eh||vg;if(Ge!==vc||wf!==Zc)u.blendEquationSeparate(Rc[Ge],Rc[wf]),vc=Ge,Zc=wf;if(Ue!==Yc||vg!==fd||Mh!==Rd||Eh!==ld)u.blendFuncSeparate(te[Ue],te[vg],te[Mh],te[Eh]),Yc=Ue,fd=vg,Rd=Mh,ld=Eh;Lc=Wc;sd=null}}function Q(Wc){Ae!==Wc&&(Wc?u.frontFace(2304):u.frontFace(2305),Ae=Wc)}function X(Wc){0!==Wc?(C(2884),
Wc!==qe&&(1===Wc?u.cullFace(1029):2===Wc?u.cullFace(1028):u.cullFace(1032))):G(2884);qe=Wc}function T(Wc,Ge,Ue){if(Wc){if(C(32823),Af!==Ge||Mf!==Ue)u.polygonOffset(Ge,Ue),Af=Ge,Mf=Ue}else G(32823)}function fa(Wc){void 0===Wc&&(Wc=33984+jg-1);mh!==Wc&&(u.activeTexture(Wc),mh=Wc)}var oa,Ga;t=t.isWebGL2;var Xa=new function(){var Wc=!1,Ge=new Gk,Ue=null,vg=new Gk(0,0,0,0);return{setMask:function(wf){Ue===wf||Wc||(u.colorMask(wf,wf,wf,wf),Ue=wf)},setLocked:function(wf){Wc=wf},setClear:function(wf,Mh,Eh,
ai,Uh){!0===Uh&&(wf*=ai,Mh*=ai,Eh*=ai);Ge.set(wf,Mh,Eh,ai);!1===vg.equals(Ge)&&(u.clearColor(wf,Mh,Eh,ai),vg.copy(Ge))},reset:function(){Wc=!1;Ue=null;vg.set(-1,0,0,0)}}},Wa=new function(){var Wc=!1,Ge=null,Ue=null,vg=null;return{setTest:function(wf){wf?C(2929):G(2929)},setMask:function(wf){Ge===wf||Wc||(u.depthMask(wf),Ge=wf)},setFunc:function(wf){if(Ue!==wf){if(wf)switch(wf){case 0:u.depthFunc(512);break;case 1:u.depthFunc(519);break;case 2:u.depthFunc(513);break;case 3:u.depthFunc(515);break;case 4:u.depthFunc(514);
break;case 5:u.depthFunc(518);break;case 6:u.depthFunc(516);break;case 7:u.depthFunc(517);break;default:u.depthFunc(515)}else u.depthFunc(515);Ue=wf}},setLocked:function(wf){Wc=wf},setClear:function(wf){vg!==wf&&(u.clearDepth(wf),vg=wf)},reset:function(){Wc=!1;vg=Ue=Ge=null}}},tb=new function(){var Wc=!1,Ge=null,Ue=null,vg=null,wf=null,Mh=null,Eh=null,ai=null,Uh=null;return{setTest:function(kk){Wc||(kk?C(2960):G(2960))},setMask:function(kk){Ge===kk||Wc||(u.stencilMask(kk),Ge=kk)},setFunc:function(kk,
oe,Rf){if(Ue!==kk||vg!==oe||wf!==Rf)u.stencilFunc(kk,oe,Rf),Ue=kk,vg=oe,wf=Rf},setOp:function(kk,oe,Rf){if(Mh!==kk||Eh!==oe||ai!==Rf)u.stencilOp(kk,oe,Rf),Mh=kk,Eh=oe,ai=Rf},setLocked:function(kk){Wc=kk},setClear:function(kk){Uh!==kk&&(u.clearStencil(kk),Uh=kk)},reset:function(){Wc=!1;Uh=ai=Eh=Mh=wf=vg=Ue=Ge=null}}},mb={},Kc=null,ic=null,Lc=null,vc=null,Yc=null,fd=null,Zc=null,Rd=null,ld=null,sd=!1,Ae=null,qe=null,Qf=null,Af=null,Mf=null,jg=u.getParameter(35661),ah=!1,Lh=0;Lh=u.getParameter(7938);
-1!==Lh.indexOf("WebGL")?(Lh=parseFloat(/^WebGL (\d)/.exec(Lh)[1]),ah=1<=Lh):-1!==Lh.indexOf("OpenGL ES")&&(Lh=parseFloat(/^OpenGL ES (\d)/.exec(Lh)[1]),ah=2<=Lh);var mh=null,Mj={},lk=new Gk,tl=new Gk,rc={};rc[3553]=w(3553,3553,1);rc[34067]=w(34067,34069,6);Xa.setClear(0,0,0,1);Wa.setClear(1);tb.setClear(0);C(2929);Wa.setFunc(3);Q(!1);X(1);C(2884);M(0);var Rc=(oa={},oa[100]=32774,oa[101]=32778,oa[102]=32779,oa);t?(Rc[103]=32775,Rc[104]=32776):(z=z.get("EXT_blend_minmax"),null!==z&&(Rc[103]=z.MIN_EXT,
Rc[104]=z.MAX_EXT));var te=(Ga={},Ga[200]=0,Ga[201]=1,Ga[202]=768,Ga[204]=770,Ga[210]=776,Ga[208]=774,Ga[206]=772,Ga[203]=769,Ga[205]=771,Ga[209]=775,Ga[207]=773,Ga);return{buffers:{color:Xa,depth:Wa,stencil:tb},enable:C,disable:G,useProgram:function(Wc){return Kc!==Wc?(u.useProgram(Wc),Kc=Wc,!0):!1},setBlending:M,setMaterial:function(Wc,Ge){2===Wc.side?G(2884):C(2884);var Ue=1===Wc.side;Ge&&(Ue=!Ue);Q(Ue);1===Wc.blending&&!1===Wc.transparent?M(0):M(Wc.blending,Wc.blendEquation,Wc.blendSrc,Wc.blendDst,
Wc.blendEquationAlpha,Wc.blendSrcAlpha,Wc.blendDstAlpha,Wc.premultipliedAlpha);Wa.setFunc(Wc.depthFunc);Wa.setTest(Wc.depthTest);Wa.setMask(Wc.depthWrite);Xa.setMask(Wc.colorWrite);Ge=Wc.stencilWrite;tb.setTest(Ge);Ge&&(tb.setMask(Wc.stencilWriteMask),tb.setFunc(Wc.stencilFunc,Wc.stencilRef,Wc.stencilFuncMask),tb.setOp(Wc.stencilFail,Wc.stencilZFail,Wc.stencilZPass));T(Wc.polygonOffset,Wc.polygonOffsetFactor,Wc.polygonOffsetUnits)},setFlipSided:Q,setCullFace:X,setLineWidth:function(Wc){Wc!==Qf&&(ah&&
u.lineWidth(Wc),Qf=Wc)},setPolygonOffset:T,setScissorTest:function(Wc){Wc?C(3089):G(3089)},activeTexture:fa,bindTexture:function(Wc,Ge){null===mh&&fa();var Ue=Mj[mh];void 0===Ue&&(Ue={type:void 0,texture:void 0},Mj[mh]=Ue);if(Ue.type!==Wc||Ue.texture!==Ge)u.bindTexture(Wc,Ge||rc[Wc]),Ue.type=Wc,Ue.texture=Ge},unbindTexture:function(){var Wc=Mj[mh];void 0!==Wc&&void 0!==Wc.type&&(u.bindTexture(Wc.type,null),Wc.type=void 0,Wc.texture=void 0)},compressedTexImage2D:function(){try{u.compressedTexImage2D.apply(u,
arguments)}catch(Wc){console.error("THREE.WebGLState:",Wc)}},texImage2D:function(){try{u.texImage2D.apply(u,arguments)}catch(Wc){console.error("THREE.WebGLState:",Wc)}},texImage3D:function(){try{u.texImage3D.apply(u,arguments)}catch(Wc){console.error("THREE.WebGLState:",Wc)}},scissor:function(Wc){!1===lk.equals(Wc)&&(u.scissor(Wc.x,Wc.y,Wc.z,Wc.w),lk.copy(Wc))},viewport:function(Wc){!1===tl.equals(Wc)&&(u.viewport(Wc.x,Wc.y,Wc.z,Wc.w),tl.copy(Wc))},reset:function(){mb={};mh=null;Mj={};ld=Rd=Zc=fd=
Yc=vc=Lc=ic=Kc=null;sd=!1;Mf=Af=Qf=qe=Ae=null;Xa.reset();Wa.reset();tb.reset()}}}function Swa(u,z,t,w,C,G,M){function Q(rc,Rc){return ah?new OffscreenCanvas(rc,Rc):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function X(rc,Rc,te,Wc){var Ge=1;if(rc.width>Wc||rc.height>Wc)Ge=Wc/Math.max(rc.width,rc.height);if(1>Ge||!0===Rc){if("undefined"!==typeof HTMLImageElement&&rc instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&rc instanceof HTMLCanvasElement||"undefined"!==
typeof ImageBitmap&&rc instanceof ImageBitmap)return Wc=Rc?Kh.floorPowerOfTwo:Math.floor,Rc=Wc(Ge*rc.width),Ge=Wc(Ge*rc.height),void 0===jg&&(jg=Q(Rc,Ge)),te=te?Q(Rc,Ge):jg,te.width=Rc,te.height=Ge,te.getContext("2d").drawImage(rc,0,0,Rc,Ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+rc.width+"x"+rc.height+") to ("+Rc+"x"+Ge+")."),te;"data"in rc&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+rc.width+"x"+rc.height+").")}return rc}function T(rc){return Kh.isPowerOfTwo(rc.width)&&
Kh.isPowerOfTwo(rc.height)}function fa(rc,Rc){return rc.generateMipmaps&&Rc&&1003!==rc.minFilter&&1006!==rc.minFilter}function oa(rc,Rc,te,Wc){u.generateMipmap(rc);w.get(Rc).__maxMipLevel=Math.log(Math.max(te,Wc))*Math.LOG2E}function Ga(rc,Rc,te){if(!1===sd)return Rc;if(null!==rc){if(void 0!==u[rc])return u[rc];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+rc+"'")}rc=Rc;6403===Rc&&(5126===te&&(rc=33326),5131===te&&(rc=33325),5121===te&&(rc=33321));6407===
Rc&&(5126===te&&(rc=34837),5131===te&&(rc=34843),5121===te&&(rc=32849));6408===Rc&&(5126===te&&(rc=34836),5131===te&&(rc=34842),5121===te&&(rc=32856));33325!==rc&&33326!==rc&&34842!==rc&&34836!==rc||z.get("EXT_color_buffer_float");return rc}function Xa(rc){return 1003===rc||1004===rc||1005===rc?9728:9729}function Wa(rc){rc=rc.target;rc.removeEventListener("dispose",Wa);var Rc=w.get(rc);void 0!==Rc.__webglInit&&(u.deleteTexture(Rc.__webglTexture),w.remove(rc));rc.isVideoTexture&&Mf.delete(rc);M.memory.textures--}
function tb(rc){rc=rc.target;rc.removeEventListener("dispose",tb);var Rc=w.get(rc),te=w.get(rc.texture);if(rc){void 0!==te.__webglTexture&&u.deleteTexture(te.__webglTexture);rc.depthTexture&&rc.depthTexture.dispose();if(rc.isWebGLCubeRenderTarget)for(te=0;6>te;te++)u.deleteFramebuffer(Rc.__webglFramebuffer[te]),Rc.__webglDepthbuffer&&u.deleteRenderbuffer(Rc.__webglDepthbuffer[te]);else u.deleteFramebuffer(Rc.__webglFramebuffer),Rc.__webglDepthbuffer&&u.deleteRenderbuffer(Rc.__webglDepthbuffer),Rc.__webglMultisampledFramebuffer&&
u.deleteFramebuffer(Rc.__webglMultisampledFramebuffer),Rc.__webglColorRenderbuffer&&u.deleteRenderbuffer(Rc.__webglColorRenderbuffer),Rc.__webglDepthRenderbuffer&&u.deleteRenderbuffer(Rc.__webglDepthRenderbuffer);w.remove(rc.texture);w.remove(rc)}M.memory.textures--}function mb(rc,Rc){var te=w.get(rc);if(rc.isVideoTexture){var Wc=M.render.frame;Mf.get(rc)!==Wc&&(Mf.set(rc,Wc),rc.update())}if(0<rc.version&&te.__version!==rc.version)if(Wc=rc.image,void 0===Wc)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
else if(!1===Wc.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{vc(te,rc,Rc);return}t.activeTexture(33984+Rc);t.bindTexture(3553,te.__webglTexture)}function Kc(rc,Rc){var te=w.get(rc);if(0<rc.version&&te.__version!==rc.version){if(6===rc.image.length){Lc(te,rc);t.activeTexture(33984+Rc);t.bindTexture(34067,te.__webglTexture);u.pixelStorei(37440,rc.flipY);var Wc=rc&&(rc.isCompressedTexture||rc.image[0].isCompressedTexture),Ge=rc.image[0]&&rc.image[0].isDataTexture;
Rc=[];for(var Ue=0;6>Ue;Ue++)Rc[Ue]=Wc||Ge?Ge?rc.image[Ue].image:rc.image[Ue]:X(rc.image[Ue],!1,!0,qe);Ue=Rc[0];var vg=T(Ue)||sd,wf=G.convert(rc.format),Mh=G.convert(rc.type),Eh=Ga(rc.internalFormat,wf,Mh);ic(34067,rc,vg);if(Wc){for(Ge=0;6>Ge;Ge++){var ai=Rc[Ge].mipmaps;for(Wc=0;Wc<ai.length;Wc++){var Uh=ai[Wc];1023!==rc.format&&1022!==rc.format?null!==wf?t.compressedTexImage2D(34069+Ge,Wc,Eh,Uh.width,Uh.height,0,Uh.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
t.texImage2D(34069+Ge,Wc,Eh,Uh.width,Uh.height,0,wf,Mh,Uh.data)}}te.__maxMipLevel=ai.length-1}else{ai=rc.mipmaps;for(Wc=0;6>Wc;Wc++)if(Ge)for(t.texImage2D(34069+Wc,0,Eh,Rc[Wc].width,Rc[Wc].height,0,wf,Mh,Rc[Wc].data),Uh=0;Uh<ai.length;Uh++){var kk=ai[Uh].image[Wc].image;t.texImage2D(34069+Wc,Uh+1,Eh,kk.width,kk.height,0,wf,Mh,kk.data)}else for(t.texImage2D(34069+Wc,0,Eh,wf,Mh,Rc[Wc]),Uh=0;Uh<ai.length;Uh++)t.texImage2D(34069+Wc,Uh+1,Eh,wf,Mh,ai[Uh].image[Wc]);te.__maxMipLevel=ai.length}fa(rc,vg)&&
oa(34067,rc,Ue.width,Ue.height);te.__version=rc.version;if(rc.onUpdate)rc.onUpdate(rc)}}else t.activeTexture(33984+Rc),t.bindTexture(34067,te.__webglTexture)}function ic(rc,Rc,te){te?(u.texParameteri(rc,10242,mh[Rc.wrapS]),u.texParameteri(rc,10243,mh[Rc.wrapT]),32879!==rc&&35866!==rc||u.texParameteri(rc,32882,mh[Rc.wrapR]),u.texParameteri(rc,10240,Mj[Rc.magFilter]),u.texParameteri(rc,10241,Mj[Rc.minFilter])):(u.texParameteri(rc,10242,33071),u.texParameteri(rc,10243,33071),32879!==rc&&35866!==rc||
u.texParameteri(rc,32882,33071),1001===Rc.wrapS&&1001===Rc.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),u.texParameteri(rc,10240,Xa(Rc.magFilter)),u.texParameteri(rc,10241,Xa(Rc.minFilter)),1003!==Rc.minFilter&&1006!==Rc.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!(te=z.get("EXT_texture_filter_anisotropic"))||
1015===Rc.type&&null===z.get("OES_texture_float_linear")||1016===Rc.type&&null===(sd||z.get("OES_texture_half_float_linear"))||!(1<Rc.anisotropy||w.get(Rc).__currentAnisotropy)||(u.texParameterf(rc,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Rc.anisotropy,C.getMaxAnisotropy())),w.get(Rc).__currentAnisotropy=Rc.anisotropy)}function Lc(rc,Rc){void 0===rc.__webglInit&&(rc.__webglInit=!0,Rc.addEventListener("dispose",Wa),rc.__webglTexture=u.createTexture(),M.memory.textures++)}function vc(rc,Rc,te){var Wc=
3553;Rc.isDataTexture2DArray&&(Wc=35866);Rc.isDataTexture3D&&(Wc=32879);Lc(rc,Rc);t.activeTexture(33984+te);t.bindTexture(Wc,rc.__webglTexture);u.pixelStorei(37440,Rc.flipY);u.pixelStorei(37441,Rc.premultiplyAlpha);u.pixelStorei(3317,Rc.unpackAlignment);te=sd?!1:1001!==Rc.wrapS||1001!==Rc.wrapT||1003!==Rc.minFilter&&1006!==Rc.minFilter;te=te&&!1===T(Rc.image);te=X(Rc.image,te,!1,Qf);var Ge=T(te)||sd,Ue=G.convert(Rc.format),vg=G.convert(Rc.type),wf=Ga(Rc.internalFormat,Ue,vg);ic(Wc,Rc,Ge);var Mh=Rc.mipmaps;
if(Rc.isDepthTexture)wf=6402,sd?wf=1015===Rc.type?36012:1014===Rc.type?33190:1020===Rc.type?35056:33189:1015===Rc.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===Rc.format&&6402===wf&&1012!==Rc.type&&1014!==Rc.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Rc.type=1012,vg=G.convert(Rc.type)),1027===Rc.format&&6402===wf&&(wf=34041,1020!==Rc.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
Rc.type=1020,vg=G.convert(Rc.type))),t.texImage2D(3553,0,wf,te.width,te.height,0,Ue,vg,null);else if(Rc.isDataTexture)if(0<Mh.length&&Ge){for(var Eh=0,ai=Mh.length;Eh<ai;Eh++){var Uh=Mh[Eh];t.texImage2D(3553,Eh,wf,Uh.width,Uh.height,0,Ue,vg,Uh.data)}Rc.generateMipmaps=!1;rc.__maxMipLevel=Mh.length-1}else t.texImage2D(3553,0,wf,te.width,te.height,0,Ue,vg,te.data),rc.__maxMipLevel=0;else if(Rc.isCompressedTexture){Eh=0;for(ai=Mh.length;Eh<ai;Eh++)Uh=Mh[Eh],1023!==Rc.format&&1022!==Rc.format?null!==
Ue?t.compressedTexImage2D(3553,Eh,wf,Uh.width,Uh.height,0,Uh.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Eh,wf,Uh.width,Uh.height,0,Ue,vg,Uh.data);rc.__maxMipLevel=Mh.length-1}else if(Rc.isDataTexture2DArray)t.texImage3D(35866,0,wf,te.width,te.height,te.depth,0,Ue,vg,te.data),rc.__maxMipLevel=0;else if(Rc.isDataTexture3D)t.texImage3D(32879,0,wf,te.width,te.height,te.depth,0,Ue,vg,te.data),rc.__maxMipLevel=0;
else if(0<Mh.length&&Ge){Eh=0;for(ai=Mh.length;Eh<ai;Eh++)Uh=Mh[Eh],t.texImage2D(3553,Eh,wf,Ue,vg,Uh);Rc.generateMipmaps=!1;rc.__maxMipLevel=Mh.length-1}else t.texImage2D(3553,0,wf,Ue,vg,te),rc.__maxMipLevel=0;fa(Rc,Ge)&&oa(Wc,Rc,te.width,te.height);rc.__version=Rc.version;if(Rc.onUpdate)Rc.onUpdate(Rc)}function Yc(rc,Rc,te,Wc){var Ge=G.convert(Rc.texture.format),Ue=G.convert(Rc.texture.type),vg=Ga(Rc.texture.internalFormat,Ge,Ue);t.texImage2D(Wc,0,vg,Rc.width,Rc.height,0,Ge,Ue,null);u.bindFramebuffer(36160,
rc);u.framebufferTexture2D(36160,te,Wc,w.get(Rc.texture).__webglTexture,0);u.bindFramebuffer(36160,null)}function fd(rc,Rc,te){u.bindRenderbuffer(36161,rc);if(Rc.depthBuffer&&!Rc.stencilBuffer){var Wc=33189;te?((te=Rc.depthTexture)&&te.isDepthTexture&&(1015===te.type?Wc=36012:1014===te.type&&(Wc=33190)),te=Zc(Rc),u.renderbufferStorageMultisample(36161,te,Wc,Rc.width,Rc.height)):u.renderbufferStorage(36161,Wc,Rc.width,Rc.height);u.framebufferRenderbuffer(36160,36096,36161,rc)}else Rc.depthBuffer&&
Rc.stencilBuffer?(te?(te=Zc(Rc),u.renderbufferStorageMultisample(36161,te,35056,Rc.width,Rc.height)):u.renderbufferStorage(36161,34041,Rc.width,Rc.height),u.framebufferRenderbuffer(36160,33306,36161,rc)):(rc=G.convert(Rc.texture.format),Wc=G.convert(Rc.texture.type),rc=Ga(Rc.texture.internalFormat,rc,Wc),te?(te=Zc(Rc),u.renderbufferStorageMultisample(36161,te,rc,Rc.width,Rc.height)):u.renderbufferStorage(36161,rc,Rc.width,Rc.height));u.bindRenderbuffer(36161,null)}function Zc(rc){return sd&&rc.isWebGLMultisampleRenderTarget?
Math.min(Af,rc.samples):0}var Rd,ld,sd=C.isWebGL2,Ae=C.maxTextures,qe=C.maxCubemapSize,Qf=C.maxTextureSize,Af=C.maxSamples,Mf=new WeakMap,jg,ah=!1;try{ah="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(rc){}var Lh=0,mh=(Rd={},Rd[1E3]=10497,Rd[1001]=33071,Rd[1002]=33648,Rd),Mj=(ld={},ld[1003]=9728,ld[1004]=9984,ld[1005]=9986,ld[1006]=9729,ld[1007]=9985,ld[1008]=9987,ld),lk=!1,tl=!1;(this||p).allocateTextureUnit=function(){var rc=Lh;rc>=Ae&&console.warn("THREE.WebGLTextures: Trying to use "+
rc+" texture units while this GPU supports only "+Ae);Lh+=1;return rc};(this||p).resetTextureUnits=function(){Lh=0};(this||p).setTexture2D=mb;(this||p).setTexture2DArray=function(rc,Rc){var te=w.get(rc);0<rc.version&&te.__version!==rc.version?vc(te,rc,Rc):(t.activeTexture(33984+Rc),t.bindTexture(35866,te.__webglTexture))};(this||p).setTexture3D=function(rc,Rc){var te=w.get(rc);0<rc.version&&te.__version!==rc.version?vc(te,rc,Rc):(t.activeTexture(33984+Rc),t.bindTexture(32879,te.__webglTexture))};
(this||p).setTextureCube=Kc;(this||p).setupRenderTarget=function(rc){var Rc=w.get(rc),te=w.get(rc.texture);rc.addEventListener("dispose",tb);te.__webglTexture=u.createTexture();M.memory.textures++;var Wc=!0===rc.isWebGLCubeRenderTarget,Ge=!0===rc.isWebGLMultisampleRenderTarget,Ue=T(rc)||sd;!sd||1022!==rc.texture.format||1015!==rc.texture.type&&1016!==rc.texture.type||(rc.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));
if(Wc)for(Rc.__webglFramebuffer=[],Ge=0;6>Ge;Ge++)Rc.__webglFramebuffer[Ge]=u.createFramebuffer();else if(Rc.__webglFramebuffer=u.createFramebuffer(),Ge)if(sd){Rc.__webglMultisampledFramebuffer=u.createFramebuffer();Rc.__webglColorRenderbuffer=u.createRenderbuffer();u.bindRenderbuffer(36161,Rc.__webglColorRenderbuffer);Ge=G.convert(rc.texture.format);var vg=G.convert(rc.texture.type);Ge=Ga(rc.texture.internalFormat,Ge,vg);vg=Zc(rc);u.renderbufferStorageMultisample(36161,vg,Ge,rc.width,rc.height);
u.bindFramebuffer(36160,Rc.__webglMultisampledFramebuffer);u.framebufferRenderbuffer(36160,36064,36161,Rc.__webglColorRenderbuffer);u.bindRenderbuffer(36161,null);rc.depthBuffer&&(Rc.__webglDepthRenderbuffer=u.createRenderbuffer(),fd(Rc.__webglDepthRenderbuffer,rc,!0));u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Wc){t.bindTexture(34067,te.__webglTexture);ic(34067,rc.texture,Ue);for(te=0;6>te;te++)Yc(Rc.__webglFramebuffer[te],
rc,36064,34069+te);fa(rc.texture,Ue)&&oa(34067,rc.texture,rc.width,rc.height);t.bindTexture(34067,null)}else t.bindTexture(3553,te.__webglTexture),ic(3553,rc.texture,Ue),Yc(Rc.__webglFramebuffer,rc,36064,3553),fa(rc.texture,Ue)&&oa(3553,rc.texture,rc.width,rc.height),t.bindTexture(3553,null);if(rc.depthBuffer){Rc=w.get(rc);Ue=!0===rc.isWebGLCubeRenderTarget;if(rc.depthTexture){if(Ue)throw Error("target.depthTexture not supported in Cube render targets");if(rc&&rc.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");
u.bindFramebuffer(36160,Rc.__webglFramebuffer);if(!rc.depthTexture||!rc.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");w.get(rc.depthTexture).__webglTexture&&rc.depthTexture.image.width===rc.width&&rc.depthTexture.image.height===rc.height||(rc.depthTexture.image.width=rc.width,rc.depthTexture.image.height=rc.height,rc.depthTexture.needsUpdate=!0);mb(rc.depthTexture,0);Rc=w.get(rc.depthTexture).__webglTexture;if(1026===rc.depthTexture.format)u.framebufferTexture2D(36160,
36096,3553,Rc,0);else if(1027===rc.depthTexture.format)u.framebufferTexture2D(36160,33306,3553,Rc,0);else throw Error("Unknown depthTexture format");}else if(Ue)for(Rc.__webglDepthbuffer=[],Ue=0;6>Ue;Ue++)u.bindFramebuffer(36160,Rc.__webglFramebuffer[Ue]),Rc.__webglDepthbuffer[Ue]=u.createRenderbuffer(),fd(Rc.__webglDepthbuffer[Ue],rc,!1);else u.bindFramebuffer(36160,Rc.__webglFramebuffer),Rc.__webglDepthbuffer=u.createRenderbuffer(),fd(Rc.__webglDepthbuffer,rc,!1);u.bindFramebuffer(36160,null)}};
(this||p).updateRenderTargetMipmap=function(rc){var Rc=rc.texture,te=T(rc)||sd;if(fa(Rc,te)){te=rc.isWebGLCubeRenderTarget?34067:3553;var Wc=w.get(Rc).__webglTexture;t.bindTexture(te,Wc);oa(te,Rc,rc.width,rc.height);t.bindTexture(te,null)}};(this||p).updateMultisampleRenderTarget=function(rc){if(rc.isWebGLMultisampleRenderTarget)if(sd){var Rc=w.get(rc);u.bindFramebuffer(36008,Rc.__webglMultisampledFramebuffer);u.bindFramebuffer(36009,Rc.__webglFramebuffer);var te=rc.width,Wc=rc.height,Ge=16384;rc.depthBuffer&&
(Ge|=256);rc.stencilBuffer&&(Ge|=1024);u.blitFramebuffer(0,0,te,Wc,0,0,te,Wc,Ge,9728);u.bindFramebuffer(36160,Rc.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};(this||p).safeSetTexture2D=function(rc,Rc){rc&&rc.isWebGLRenderTarget&&(!1===lk&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),lk=!0),rc=rc.texture);mb(rc,Rc)};(this||p).safeSetTextureCube=
function(rc,Rc){rc&&rc.isWebGLCubeRenderTarget&&(!1===tl&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),tl=!0),rc=rc.texture);Kc(rc,Rc)}}function Zca(u,z,t){var w=t.isWebGL2;return{convert:function(C){if(1009===C)return 5121;if(1017===C)return 32819;if(1018===C)return 32820;if(1019===C)return 33635;if(1010===C)return 5120;if(1011===C)return 5122;if(1012===C)return 5123;if(1013===C)return 5124;if(1014===C)return 5125;
if(1015===C)return 5126;if(1016===C){if(w)return 5131;var G=z.get("OES_texture_half_float");return null!==G?G.HALF_FLOAT_OES:null}if(1021===C)return 6406;if(1022===C)return 6407;if(1023===C)return 6408;if(1024===C)return 6409;if(1025===C)return 6410;if(1026===C)return 6402;if(1027===C)return 34041;if(1028===C)return 6403;if(1029===C)return 36244;if(1030===C)return 33319;if(1031===C)return 33320;if(1032===C)return 36248;if(1033===C)return 36249;if(33776===C||33777===C||33778===C||33779===C)if(G=z.get("WEBGL_compressed_texture_s3tc"),
null!==G){if(33776===C)return G.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===C)return G.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===C)return G.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===C)return G.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===C||35841===C||35842===C||35843===C)if(G=z.get("WEBGL_compressed_texture_pvrtc"),null!==G){if(35840===C)return G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===C)return G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===C)return G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===
C)return G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===C)return G=z.get("WEBGL_compressed_texture_etc1"),null!==G?G.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===C||37496===C)if(G=z.get("WEBGL_compressed_texture_etc"),null!==G){if(37492===C)return G.COMPRESSED_RGB8_ETC2;if(37496===C)return G.COMPRESSED_RGBA8_ETC2_EAC}if(37808===C||37809===C||37810===C||37811===C||37812===C||37813===C||37814===C||37815===C||37816===C||37817===C||37818===C||37819===C||37820===C||37821===C||37840===C||37841===
C||37842===C||37843===C||37844===C||37845===C||37846===C||37847===C||37848===C||37849===C||37850===C||37851===C||37852===C||37853===C)return G=z.get("WEBGL_compressed_texture_astc"),null!==G?C:null;if(36492===C)return G=z.get("EXT_texture_compression_bptc"),null!==G?C:null;if(1020===C){if(w)return 34042;G=z.get("WEBGL_depth_texture");return null!==G?G.UNSIGNED_INT_24_8_WEBGL:null}}}}function VP(u){void 0===u&&(u=[]);ac.call(this||p);(this||p).cameras=u}function iA(){F.call(this||p);(this||p).type=
"Group"}function gJ(){(this||p)._targetRay=null;(this||p)._grip=null;(this||p)._hand=null}function $ca(u,z){function t(ld){var sd=Wa.get(ld.inputSource);sd&&sd.dispatchEvent({type:ld.type,data:ld.inputSource})}function w(){Wa.forEach(function(ld,sd){ld.disconnect(sd)});Wa.clear();u.setFramebuffer(null);u.setRenderTarget(u.getRenderTarget());Rd.stop();Q.isPresenting=!1;Q.dispatchEvent({type:"sessionend"})}function C(ld){fa=ld;Rd.setContext(X);Rd.start();Q.isPresenting=!0;Q.dispatchEvent({type:"sessionstart"})}
function G(ld){for(var sd=X.inputSources,Ae=0;Ae<Xa.length;Ae++)Wa.set(sd[Ae],Xa[Ae]);for(sd=0;sd<ld.removed.length;sd++){Ae=ld.removed[sd];var qe=Wa.get(Ae);qe&&(qe.dispatchEvent({type:"disconnected",data:Ae}),Wa.delete(Ae))}for(sd=0;sd<ld.added.length;sd++)Ae=ld.added[sd],(qe=Wa.get(Ae))&&qe.dispatchEvent({type:"connected",data:Ae})}function M(ld,sd){null===sd?ld.matrixWorld.copy(ld.matrix):ld.matrixWorld.multiplyMatrices(sd.matrixWorld,ld.matrix);ld.matrixWorldInverse.copy(ld.matrixWorld).invert()}
var Q=this||p,X=null,T=1,fa=null,oa="local-floor",Ga=null,Xa=[],Wa=new Map,tb=new ac;tb.layers.enable(1);tb.viewport=new Gk;var mb=new ac;mb.layers.enable(2);mb.viewport=new Gk;var Kc=[tb,mb],ic=new VP;ic.layers.enable(1);ic.layers.enable(2);var Lc=null,vc=null;(this||p).enabled=!1;(this||p).isPresenting=!1;(this||p).getController=function(ld){var sd=Xa[ld];void 0===sd&&(sd=new gJ,Xa[ld]=sd);return sd.getTargetRaySpace()};(this||p).getControllerGrip=function(ld){var sd=Xa[ld];void 0===sd&&(sd=new gJ,
Xa[ld]=sd);return sd.getGripSpace()};(this||p).getHand=function(ld){var sd=Xa[ld];void 0===sd&&(sd=new gJ,Xa[ld]=sd);return sd.getHandSpace()};(this||p).setFramebufferScaleFactor=function(ld){T=ld;!0===Q.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};(this||p).setReferenceSpaceType=function(ld){oa=ld;!0===Q.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};(this||p).getReferenceSpace=function(){return fa};
(this||p).getSession=function(){return X};(this||p).setSession=function(ld){X=ld;null!==X&&(X.addEventListener("select",t),X.addEventListener("selectstart",t),X.addEventListener("selectend",t),X.addEventListener("squeeze",t),X.addEventListener("squeezestart",t),X.addEventListener("squeezeend",t),X.addEventListener("end",w),ld=z.getContextAttributes(),!0!==ld.xrCompatible&&z.makeXRCompatible(),ld=new XRWebGLLayer(X,z,{antialias:ld.antialias,alpha:ld.alpha,depth:ld.depth,stencil:ld.stencil,framebufferScaleFactor:T}),
X.updateRenderState({baseLayer:ld}),X.requestReferenceSpace(oa).then(C),X.addEventListener("inputsourceschange",G))};var Yc=new kc,fd=new kc;(this||p).getCamera=function(ld){ic.near=mb.near=tb.near=ld.near;ic.far=mb.far=tb.far=ld.far;if(Lc!==ic.near||vc!==ic.far)X.updateRenderState({depthNear:ic.near,depthFar:ic.far}),Lc=ic.near,vc=ic.far;var sd=ld.parent,Ae=ic.cameras;M(ic,sd);for(var qe=0;qe<Ae.length;qe++)M(Ae[qe],sd);ld.matrixWorld.copy(ic.matrixWorld);ld=ld.children;sd=0;for(qe=ld.length;sd<
qe;sd++)ld[sd].updateMatrixWorld(!0);if(2===Ae.length){Yc.setFromMatrixPosition(tb.matrixWorld);fd.setFromMatrixPosition(mb.matrixWorld);Ae=Yc.distanceTo(fd);var Qf=tb.projectionMatrix.elements,Af=mb.projectionMatrix.elements,Mf=Qf[14]/(Qf[10]-1);ld=Qf[14]/(Qf[10]+1);sd=(Qf[9]+1)/Qf[5];qe=(Qf[9]-1)/Qf[5];var jg=(Qf[8]-1)/Qf[0],ah=(Af[8]+1)/Af[0];Af=Mf*jg;Qf=Mf*ah;ah=Ae/(-jg+ah);jg=ah*-jg;tb.matrixWorld.decompose(ic.position,ic.quaternion,ic.scale);ic.translateX(jg);ic.translateZ(ah);ic.matrixWorld.compose(ic.position,
ic.quaternion,ic.scale);ic.matrixWorldInverse.copy(ic.matrixWorld).invert();Mf+=ah;ah=ld+ah;ic.projectionMatrix.makePerspective(Af-jg,Qf+(Ae-jg),sd*ld/ah*Mf,qe*ld/ah*Mf,Mf,ah)}else ic.projectionMatrix.copy(tb.projectionMatrix);return ic};var Zc=null,Rd=new ja;Rd.setAnimationLoop(function(ld,sd){Ga=sd.getViewerPose(fa);if(null!==Ga){var Ae=Ga.views,qe=X.renderState.baseLayer;u.setFramebuffer(qe.framebuffer);var Qf=!1;Ae.length!==ic.cameras.length&&(ic.cameras.length=0,Qf=!0);for(var Af=0;Af<Ae.length;Af++){var Mf=
Ae[Af],jg=qe.getViewport(Mf),ah=Kc[Af];ah.matrix.fromArray(Mf.transform.matrix);ah.projectionMatrix.fromArray(Mf.projectionMatrix);ah.viewport.set(jg.x,jg.y,jg.width,jg.height);0===Af&&ic.matrix.copy(ah.matrix);!0===Qf&&ic.cameras.push(ah)}}Ae=X.inputSources;for(qe=0;qe<Xa.length;qe++)Xa[qe].update(Ae[qe],sd,fa);Zc&&Zc(ld,sd)});(this||p).setAnimationLoop=function(ld){Zc=ld};(this||p).dispose=function(){}}function Twa(u){function z(w,C){w.opacity.value=C.opacity;C.color&&w.diffuse.value.copy(C.color);
C.emissive&&w.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity);C.map&&(w.map.value=C.map);C.alphaMap&&(w.alphaMap.value=C.alphaMap);C.specularMap&&(w.specularMap.value=C.specularMap);var G=u.get(C).envMap;G&&(w.envMap.value=G,w.flipEnvMap.value=G.isCubeTexture&&G._needsFlipEnvMap?-1:1,w.reflectivity.value=C.reflectivity,w.refractionRatio.value=C.refractionRatio,G=u.get(G).__maxMipLevel,void 0!==G&&(w.maxMipLevel.value=G));C.lightMap&&(w.lightMap.value=C.lightMap,w.lightMapIntensity.value=
C.lightMapIntensity);C.aoMap&&(w.aoMap.value=C.aoMap,w.aoMapIntensity.value=C.aoMapIntensity);if(C.map)var M=C.map;else C.specularMap?M=C.specularMap:C.displacementMap?M=C.displacementMap:C.normalMap?M=C.normalMap:C.bumpMap?M=C.bumpMap:C.roughnessMap?M=C.roughnessMap:C.metalnessMap?M=C.metalnessMap:C.alphaMap?M=C.alphaMap:C.emissiveMap?M=C.emissiveMap:C.clearcoatMap?M=C.clearcoatMap:C.clearcoatNormalMap?M=C.clearcoatNormalMap:C.clearcoatRoughnessMap&&(M=C.clearcoatRoughnessMap);void 0!==M&&(M.isWebGLRenderTarget&&
(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),w.uvTransform.value.copy(M.matrix));if(C.aoMap)var Q=C.aoMap;else C.lightMap&&(Q=C.lightMap);void 0!==Q&&(Q.isWebGLRenderTarget&&(Q=Q.texture),!0===Q.matrixAutoUpdate&&Q.updateMatrix(),w.uv2Transform.value.copy(Q.matrix))}function t(w,C){w.roughness.value=C.roughness;w.metalness.value=C.metalness;C.roughnessMap&&(w.roughnessMap.value=C.roughnessMap);C.metalnessMap&&(w.metalnessMap.value=C.metalnessMap);C.emissiveMap&&(w.emissiveMap.value=C.emissiveMap);
C.bumpMap&&(w.bumpMap.value=C.bumpMap,w.bumpScale.value=C.bumpScale,1===C.side&&(w.bumpScale.value*=-1));C.normalMap&&(w.normalMap.value=C.normalMap,w.normalScale.value.copy(C.normalScale),1===C.side&&w.normalScale.value.negate());C.displacementMap&&(w.displacementMap.value=C.displacementMap,w.displacementScale.value=C.displacementScale,w.displacementBias.value=C.displacementBias);u.get(C).envMap&&(w.envMapIntensity.value=C.envMapIntensity)}return{refreshFogUniforms:function(w,C){w.fogColor.value.copy(C.color);
C.isFog?(w.fogNear.value=C.near,w.fogFar.value=C.far):C.isFogExp2&&(w.fogDensity.value=C.density)},refreshMaterialUniforms:function(w,C,G,M){if(C.isMeshBasicMaterial)z(w,C);else if(C.isMeshLambertMaterial)z(w,C),C.emissiveMap&&(w.emissiveMap.value=C.emissiveMap);else if(C.isMeshToonMaterial)z(w,C),C.gradientMap&&(w.gradientMap.value=C.gradientMap),C.emissiveMap&&(w.emissiveMap.value=C.emissiveMap),C.bumpMap&&(w.bumpMap.value=C.bumpMap,w.bumpScale.value=C.bumpScale,1===C.side&&(w.bumpScale.value*=
-1)),C.normalMap&&(w.normalMap.value=C.normalMap,w.normalScale.value.copy(C.normalScale),1===C.side&&w.normalScale.value.negate()),C.displacementMap&&(w.displacementMap.value=C.displacementMap,w.displacementScale.value=C.displacementScale,w.displacementBias.value=C.displacementBias);else if(C.isMeshPhongMaterial)z(w,C),w.specular.value.copy(C.specular),w.shininess.value=Math.max(C.shininess,1E-4),C.emissiveMap&&(w.emissiveMap.value=C.emissiveMap),C.bumpMap&&(w.bumpMap.value=C.bumpMap,w.bumpScale.value=
C.bumpScale,1===C.side&&(w.bumpScale.value*=-1)),C.normalMap&&(w.normalMap.value=C.normalMap,w.normalScale.value.copy(C.normalScale),1===C.side&&w.normalScale.value.negate()),C.displacementMap&&(w.displacementMap.value=C.displacementMap,w.displacementScale.value=C.displacementScale,w.displacementBias.value=C.displacementBias);else if(C.isMeshStandardMaterial)z(w,C),C.isMeshPhysicalMaterial?(t(w,C),w.reflectivity.value=C.reflectivity,w.clearcoat.value=C.clearcoat,w.clearcoatRoughness.value=C.clearcoatRoughness,
C.sheen&&w.sheen.value.copy(C.sheen),C.clearcoatMap&&(w.clearcoatMap.value=C.clearcoatMap),C.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap),C.clearcoatNormalMap&&(w.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),w.clearcoatNormalMap.value=C.clearcoatNormalMap,1===C.side&&w.clearcoatNormalScale.value.negate()),w.transmission.value=C.transmission,C.transmissionMap&&(w.transmissionMap.value=C.transmissionMap)):t(w,C);else if(C.isMeshMatcapMaterial)z(w,C),C.matcap&&
(w.matcap.value=C.matcap),C.bumpMap&&(w.bumpMap.value=C.bumpMap,w.bumpScale.value=C.bumpScale,1===C.side&&(w.bumpScale.value*=-1)),C.normalMap&&(w.normalMap.value=C.normalMap,w.normalScale.value.copy(C.normalScale),1===C.side&&w.normalScale.value.negate()),C.displacementMap&&(w.displacementMap.value=C.displacementMap,w.displacementScale.value=C.displacementScale,w.displacementBias.value=C.displacementBias);else if(C.isMeshDepthMaterial)z(w,C),C.displacementMap&&(w.displacementMap.value=C.displacementMap,
w.displacementScale.value=C.displacementScale,w.displacementBias.value=C.displacementBias);else if(C.isMeshDistanceMaterial)z(w,C),C.displacementMap&&(w.displacementMap.value=C.displacementMap,w.displacementScale.value=C.displacementScale,w.displacementBias.value=C.displacementBias),w.referencePosition.value.copy(C.referencePosition),w.nearDistance.value=C.nearDistance,w.farDistance.value=C.farDistance;else if(C.isMeshNormalMaterial)z(w,C),C.bumpMap&&(w.bumpMap.value=C.bumpMap,w.bumpScale.value=C.bumpScale,
1===C.side&&(w.bumpScale.value*=-1)),C.normalMap&&(w.normalMap.value=C.normalMap,w.normalScale.value.copy(C.normalScale),1===C.side&&w.normalScale.value.negate()),C.displacementMap&&(w.displacementMap.value=C.displacementMap,w.displacementScale.value=C.displacementScale,w.displacementBias.value=C.displacementBias);else if(C.isLineBasicMaterial)w.diffuse.value.copy(C.color),w.opacity.value=C.opacity,C.isLineDashedMaterial&&(w.dashSize.value=C.dashSize,w.totalSize.value=C.dashSize+C.gapSize,w.scale.value=
C.scale);else if(C.isPointsMaterial){w.diffuse.value.copy(C.color);w.opacity.value=C.opacity;w.size.value=C.size*G;w.scale.value=.5*M;C.map&&(w.map.value=C.map);C.alphaMap&&(w.alphaMap.value=C.alphaMap);if(C.map)var Q=C.map;else C.alphaMap&&(Q=C.alphaMap);void 0!==Q&&(!0===Q.matrixAutoUpdate&&Q.updateMatrix(),w.uvTransform.value.copy(Q.matrix))}else if(C.isSpriteMaterial){w.diffuse.value.copy(C.color);w.opacity.value=C.opacity;w.rotation.value=C.rotation;C.map&&(w.map.value=C.map);C.alphaMap&&(w.alphaMap.value=
C.alphaMap);if(C.map)var X=C.map;else C.alphaMap&&(X=C.alphaMap);void 0!==X&&(!0===X.matrixAutoUpdate&&X.updateMatrix(),w.uvTransform.value.copy(X.matrix))}else C.isShadowMaterial?(w.color.value.copy(C.color),w.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}}}function Uwa(){var u=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");u.style.display="block";return u}function hJ(u){function z(gc,re){for(var Cd=0;Cd<gc.length;Cd++){var Ce=Xa.getContext(gc[Cd],re);
if(null!==Ce)return Ce}return null}function t(){Rf=new Me(oe);gh=new zd(oe,Rf,u);!1===gh.isWebGL2&&(Rf.get("WEBGL_depth_texture"),Rf.get("OES_texture_float"),Rf.get("OES_texture_half_float"),Rf.get("OES_texture_half_float_linear"),Rf.get("OES_standard_derivatives"),Rf.get("OES_element_index_uint"),Rf.get("OES_vertex_array_object"),Rf.get("ANGLE_instanced_arrays"));Rf.get("OES_texture_float_linear");Nx=new Zca(oe,Rf,gh);Tg=new Rwa(oe,Rf,gh);Tg.scissor(Mj.copy(Ue).multiplyScalar(Rc).floor());Tg.viewport(mh.copy(Ge).multiplyScalar(Rc).floor());
mj=new fh(oe);Zi=new uf;ul=new Swa(oe,Rf,Tg,Zi,gh,Nx,mj);Ak=new Mc(sd);mq=new Ba(oe,gh);nq=new wb(oe,Rf,mq,gh);Ox=new Fe(oe,mq,mj,nq);jA=new gk(oe,Ox,mq,mj);ada=new Tj(oe);eu=new yd(Zi);FC=new pe(sd,Ak,Rf,gh,nq,eu);XY=new Twa(Zi);WP=new Oo(Zi);XP=new Qwa(Rf,gh);kA=new Ea(sd,Ak,Tg,jA,Lc);bda=new $b(oe,Rf,mj,gh);cda=new Jh(oe,Rf,mj,gh);mj.programs=FC.programs;sd.capabilities=gh;sd.extensions=Rf;sd.properties=Zi;sd.renderLists=WP;sd.state=Tg;sd.info=mj}function w(gc){gc.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");
Ae=!0}function C(){console.log("THREE.WebGLRenderer: Context Restored.");Ae=!1;t()}function G(gc){gc=gc.target;gc.removeEventListener("dispose",G);M(gc);Zi.remove(gc)}function M(gc){gc=Zi.get(gc).program;void 0!==gc&&FC.releaseProgram(gc)}function Q(gc,re){gc.render(function(Cd){sd.renderBufferImmediate(Cd,re)})}function X(gc,re,Cd,Ce){if(!1!==gc.visible){if(gc.layers.test(re.layers))if(gc.isGroup)Cd=gc.renderOrder;else if(gc.isLOD)!0===gc.autoUpdate&&gc.update(re);else if(gc.isLight)Rd.pushLight(gc),
gc.castShadow&&Rd.pushShadow(gc);else if(gc.isSprite){if(!gc.frustumCulled||wf.intersectsSprite(gc)){Ce&&Uh.setFromMatrixPosition(gc.matrixWorld).applyMatrix4(ai);var Ff=jA.update(gc),xg=gc.material;xg.visible&&Zc.push(gc,Ff,xg,Cd,Uh.z,null)}}else if(gc.isImmediateRenderObject)Ce&&Uh.setFromMatrixPosition(gc.matrixWorld).applyMatrix4(ai),Zc.push(gc,null,gc.material,Cd,Uh.z,null);else if(gc.isMesh||gc.isLine||gc.isPoints)if(gc.isSkinnedMesh&&gc.skeleton.frame!==mj.render.frame&&(gc.skeleton.update(),
gc.skeleton.frame=mj.render.frame),!gc.frustumCulled||wf.intersectsObject(gc))if(Ce&&Uh.setFromMatrixPosition(gc.matrixWorld).applyMatrix4(ai),Ff=jA.update(gc),xg=gc.material,Array.isArray(xg))for(var Jg=Ff.groups,tj=0,nj=Jg.length;tj<nj;tj++){var Sn=Jg[tj],Nj=xg[Sn.materialIndex];Nj&&Nj.visible&&Zc.push(gc,Ff,Nj,Cd,Uh.z,Sn)}else xg.visible&&Zc.push(gc,Ff,xg,Cd,Uh.z,null);gc=gc.children;Ff=0;for(xg=gc.length;Ff<xg;Ff++)X(gc[Ff],re,Cd,Ce)}}function T(gc,re,Cd){for(var Ce=!0===re.isScene?re.overrideMaterial:
null,Ff=0,xg=gc.length;Ff<xg;Ff++){var Jg=gc[Ff],tj=Jg.object,nj=Jg.geometry,Sn=null===Ce?Jg.material:Ce;Jg=Jg.group;if(Cd.isArrayCamera)for(var Nj=Cd.cameras,GC=0,YY=Nj.length;GC<YY;GC++){var YP=Nj[GC];tj.layers.test(YP.layers)&&(Tg.viewport(mh.copy(YP.viewport)),Rd.setupLightsView(YP),fa(tj,re,YP,nj,Sn,Jg))}else fa(tj,re,Cd,nj,Sn,Jg)}}function fa(gc,re,Cd,Ce,Ff,xg){gc.onBeforeRender(sd,re,Cd,Ce,Ff,xg);gc.modelViewMatrix.multiplyMatrices(Cd.matrixWorldInverse,gc.matrixWorld);gc.normalMatrix.getNormalMatrix(gc.modelViewMatrix);
if(gc.isImmediateRenderObject){var Jg=Ga(Cd,re,Ff,gc);Tg.setMaterial(Ff);nq.reset();Q(gc,Jg)}else sd.renderBufferDirect(Cd,re,Ce,Ff,gc,xg);gc.onAfterRender(sd,re,Cd,Ce,Ff,xg)}function oa(gc,re,Cd){!0!==re.isScene&&(re=kk);var Ce=Zi.get(gc),Ff=Rd.state.lights,xg=Ff.state.version;Cd=FC.getParameters(gc,Ff.state,Rd.state.shadowsArray,re,Cd);var Jg=FC.getProgramCacheKey(Cd),tj=Ce.program,nj=!0;if(void 0===tj)gc.addEventListener("dispose",G);else if(tj.cacheKey!==Jg)M(gc);else{if(Ce.lightsStateVersion===
xg&&void 0!==Cd.shaderID){re=gc.isMeshStandardMaterial?re.environment:null;Ce.envMap=Ak.get(gc.envMap||re);return}nj=!1}nj&&(Cd.uniforms=FC.getUniforms(gc),gc.onBeforeCompile(Cd,sd),tj=FC.acquireProgram(Cd,Jg),Ce.program=tj,Ce.uniforms=Cd.uniforms,Ce.outputEncoding=Cd.outputEncoding);Cd=Ce.uniforms;if(!gc.isShaderMaterial&&!gc.isRawShaderMaterial||!0===gc.clipping)Ce.numClippingPlanes=eu.numPlanes,Ce.numIntersection=eu.numIntersection,Cd.clippingPlanes=eu.uniform;Ce.environment=gc.isMeshStandardMaterial?
re.environment:null;Ce.fog=re.fog;Ce.envMap=Ak.get(gc.envMap||Ce.environment);Ce.needsLights=gc.isMeshLambertMaterial||gc.isMeshToonMaterial||gc.isMeshPhongMaterial||gc.isMeshStandardMaterial||gc.isShadowMaterial||gc.isShaderMaterial&&!0===gc.lights;Ce.lightsStateVersion=xg;Ce.needsLights&&(Cd.ambientLightColor.value=Ff.state.ambient,Cd.lightProbe.value=Ff.state.probe,Cd.directionalLights.value=Ff.state.directional,Cd.directionalLightShadows.value=Ff.state.directionalShadow,Cd.spotLights.value=Ff.state.spot,
Cd.spotLightShadows.value=Ff.state.spotShadow,Cd.rectAreaLights.value=Ff.state.rectArea,Cd.ltc_1.value=Ff.state.rectAreaLTC1,Cd.ltc_2.value=Ff.state.rectAreaLTC2,Cd.pointLights.value=Ff.state.point,Cd.pointLightShadows.value=Ff.state.pointShadow,Cd.hemisphereLights.value=Ff.state.hemi,Cd.directionalShadowMap.value=Ff.state.directionalShadowMap,Cd.directionalShadowMatrix.value=Ff.state.directionalShadowMatrix,Cd.spotShadowMap.value=Ff.state.spotShadowMap,Cd.spotShadowMatrix.value=Ff.state.spotShadowMatrix,
Cd.pointShadowMap.value=Ff.state.pointShadowMap,Cd.pointShadowMatrix.value=Ff.state.pointShadowMatrix);gc=Ce.program.getUniforms();gc=Ov.seqWithValue(gc.seq,Cd);Ce.uniformsList=gc}function Ga(gc,re,Cd,Ce){!0!==re.isScene&&(re=kk);ul.resetTextureUnits();var Ff=re.fog,xg=Cd.isMeshStandardMaterial?re.environment:null,Jg=null===Mf?sd.outputEncoding:Mf.texture.encoding,tj=Ak.get(Cd.envMap||xg),nj=Zi.get(Cd),Sn=Rd.state.lights;!0!==Mh||!0!==Eh&&gc===Lh||eu.setState(Cd,gc,gc===Lh&&Cd.id===ah);Cd.version===
nj.__version?Cd.fog&&nj.fog!==Ff?oa(Cd,re,Ce):nj.environment!==xg?oa(Cd,re,Ce):nj.needsLights&&nj.lightsStateVersion!==Sn.state.version?oa(Cd,re,Ce):void 0===nj.numClippingPlanes||nj.numClippingPlanes===eu.numPlanes&&nj.numIntersection===eu.numIntersection?nj.outputEncoding!==Jg?oa(Cd,re,Ce):nj.envMap!==tj&&oa(Cd,re,Ce):oa(Cd,re,Ce):(oa(Cd,re,Ce),nj.__version=Cd.version);var Nj=!1;Sn=tj=!1;re=nj.program;xg=re.getUniforms();Jg=nj.uniforms;Tg.useProgram(re.program)&&(Sn=tj=Nj=!0);Cd.id!==ah&&(ah=Cd.id,
tj=!0);if(Nj||Lh!==gc){xg.setValue(oe,"projectionMatrix",gc.projectionMatrix);gh.logarithmicDepthBuffer&&xg.setValue(oe,"logDepthBufFC",2/(Math.log(gc.far+1)/Math.LN2));Lh!==gc&&(Lh=gc,Sn=tj=!0);if(Cd.isShaderMaterial||Cd.isMeshPhongMaterial||Cd.isMeshToonMaterial||Cd.isMeshStandardMaterial||Cd.envMap)Nj=xg.map.cameraPosition,void 0!==Nj&&Nj.setValue(oe,Uh.setFromMatrixPosition(gc.matrixWorld));(Cd.isMeshPhongMaterial||Cd.isMeshToonMaterial||Cd.isMeshLambertMaterial||Cd.isMeshBasicMaterial||Cd.isMeshStandardMaterial||
Cd.isShaderMaterial)&&xg.setValue(oe,"isOrthographic",!0===gc.isOrthographicCamera);(Cd.isMeshPhongMaterial||Cd.isMeshToonMaterial||Cd.isMeshLambertMaterial||Cd.isMeshBasicMaterial||Cd.isMeshStandardMaterial||Cd.isShaderMaterial||Cd.isShadowMaterial||Cd.skinning)&&xg.setValue(oe,"viewMatrix",gc.matrixWorldInverse)}if(Cd.skinning&&(xg.setOptional(oe,Ce,"bindMatrix"),xg.setOptional(oe,Ce,"bindMatrixInverse"),gc=Ce.skeleton))if(Nj=gc.bones,gh.floatVertexTextures){if(null===gc.boneTexture){Nj=Math.sqrt(4*
Nj.length);Nj=Kh.ceilPowerOfTwo(Nj);Nj=Math.max(Nj,4);var GC=new Float32Array(Nj*Nj*4);GC.set(gc.boneMatrices);var YY=new Bd(GC,Nj,Nj,1023,1015);gc.boneMatrices=GC;gc.boneTexture=YY;gc.boneTextureSize=Nj}xg.setValue(oe,"boneTexture",gc.boneTexture,ul);xg.setValue(oe,"boneTextureSize",gc.boneTextureSize)}else xg.setOptional(oe,gc,"boneMatrices");if(tj||nj.receiveShadow!==Ce.receiveShadow)nj.receiveShadow=Ce.receiveShadow,xg.setValue(oe,"receiveShadow",Ce.receiveShadow);tj&&(xg.setValue(oe,"toneMappingExposure",
sd.toneMappingExposure),nj.needsLights&&(gc=Sn,Jg.ambientLightColor.needsUpdate=gc,Jg.lightProbe.needsUpdate=gc,Jg.directionalLights.needsUpdate=gc,Jg.directionalLightShadows.needsUpdate=gc,Jg.pointLights.needsUpdate=gc,Jg.pointLightShadows.needsUpdate=gc,Jg.spotLights.needsUpdate=gc,Jg.spotLightShadows.needsUpdate=gc,Jg.rectAreaLights.needsUpdate=gc,Jg.hemisphereLights.needsUpdate=gc),Ff&&Cd.fog&&XY.refreshFogUniforms(Jg,Ff),XY.refreshMaterialUniforms(Jg,Cd,Rc,rc),Ov.upload(oe,nj.uniformsList,Jg,
ul));Cd.isShaderMaterial&&!0===Cd.uniformsNeedUpdate&&(Ov.upload(oe,nj.uniformsList,Jg,ul),Cd.uniformsNeedUpdate=!1);Cd.isSpriteMaterial&&xg.setValue(oe,"center",Ce.center);xg.setValue(oe,"modelViewMatrix",Ce.modelViewMatrix);xg.setValue(oe,"normalMatrix",Ce.normalMatrix);xg.setValue(oe,"modelMatrix",Ce.matrixWorld);return re}u=u||{};var Xa=void 0!==u.canvas?u.canvas:Uwa(),Wa=void 0!==u.context?u.context:null,tb=void 0!==u.alpha?u.alpha:!1,mb=void 0!==u.depth?u.depth:!0,Kc=void 0!==u.stencil?u.stencil:
!0,ic=void 0!==u.antialias?u.antialias:!1,Lc=void 0!==u.premultipliedAlpha?u.premultipliedAlpha:!0,vc=void 0!==u.preserveDrawingBuffer?u.preserveDrawingBuffer:!1,Yc=void 0!==u.powerPreference?u.powerPreference:"default",fd=void 0!==u.failIfMajorPerformanceCaveat?u.failIfMajorPerformanceCaveat:!1,Zc=null,Rd=null,ld=[];(this||p).domElement=Xa;(this||p).debug={checkShaderErrors:!0};(this||p).autoClear=!0;(this||p).autoClearColor=!0;(this||p).autoClearDepth=!0;(this||p).autoClearStencil=!0;(this||p).sortObjects=
!0;(this||p).clippingPlanes=[];(this||p).localClippingEnabled=!1;(this||p).gammaFactor=2;(this||p).outputEncoding=3E3;(this||p).physicallyCorrectLights=!1;(this||p).toneMapping=0;(this||p).toneMappingExposure=1;(this||p).maxMorphTargets=8;(this||p).maxMorphNormals=4;var sd=this||p,Ae=!1,qe=null,Qf=0,Af=0,Mf=null,jg=null,ah=-1,Lh=null,mh=new Gk,Mj=new Gk,lk=null,tl=Xa.width,rc=Xa.height,Rc=1,te=null,Wc=null,Ge=new Gk(0,0,tl,rc),Ue=new Gk(0,0,tl,rc),vg=!1,wf=new fJ,Mh=!1,Eh=!1,ai=new Qi,Uh=new kc,kk=
{background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},oe=Wa;try{Wa={alpha:tb,depth:mb,stencil:Kc,antialias:ic,premultipliedAlpha:Lc,preserveDrawingBuffer:vc,powerPreference:Yc,failIfMajorPerformanceCaveat:fd};Xa.addEventListener("webglcontextlost",w,!1);Xa.addEventListener("webglcontextrestored",C,!1);if(null===oe&&(tb=["webgl2","webgl","experimental-webgl"],!0===sd.isWebGL1Renderer&&tb.shift(),oe=z(tb,Wa),null===oe)){if(z(tb))throw Error("Error creating WebGL context with your selected attributes.");
throw Error("Error creating WebGL context.");}void 0===oe.getShaderPrecisionFormat&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(gc){throw console.error("THREE.WebGLRenderer: "+gc.message),gc;}var Rf,gh,Tg,mj,Zi,ul,Ak,mq,Ox,jA,FC,XY,WP,XP,eu,kA,ada,bda,cda,Nx,nq;t();var lA=new $ca(sd,oe);(this||p).xr=lA;var dda=new Yca(sd,jA,gh.maxTextureSize);(this||p).shadowMap=dda;(this||p).getContext=function(){return oe};(this||p).getContextAttributes=function(){return oe.getContextAttributes()};
(this||p).forceContextLoss=function(){var gc=Rf.get("WEBGL_lose_context");gc&&gc.loseContext()};(this||p).forceContextRestore=function(){var gc=Rf.get("WEBGL_lose_context");gc&&gc.restoreContext()};(this||p).getPixelRatio=function(){return Rc};(this||p).setPixelRatio=function(gc){void 0!==gc&&(Rc=gc,this.setSize(tl,rc,!1))};(this||p).getSize=function(gc){void 0===gc&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),gc=new Je);return gc.set(tl,rc)};(this||p).setSize=
function(gc,re,Cd){lA.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(tl=gc,rc=re,Xa.width=Math.floor(gc*Rc),Xa.height=Math.floor(re*Rc),!1!==Cd&&(Xa.style.width=gc+"px",Xa.style.height=re+"px"),this.setViewport(0,0,gc,re))};(this||p).getDrawingBufferSize=function(gc){void 0===gc&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),gc=new Je);return gc.set(tl*Rc,rc*Rc).floor()};(this||p).setDrawingBufferSize=
function(gc,re,Cd){tl=gc;rc=re;Rc=Cd;Xa.width=Math.floor(gc*Cd);Xa.height=Math.floor(re*Cd);this.setViewport(0,0,gc,re)};(this||p).getCurrentViewport=function(gc){void 0===gc&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),gc=new Gk);return gc.copy(mh)};(this||p).getViewport=function(gc){return gc.copy(Ge)};(this||p).setViewport=function(gc,re,Cd,Ce){gc.isVector4?Ge.set(gc.x,gc.y,gc.z,gc.w):Ge.set(gc,re,Cd,Ce);Tg.viewport(mh.copy(Ge).multiplyScalar(Rc).floor())};
(this||p).getScissor=function(gc){return gc.copy(Ue)};(this||p).setScissor=function(gc,re,Cd,Ce){gc.isVector4?Ue.set(gc.x,gc.y,gc.z,gc.w):Ue.set(gc,re,Cd,Ce);Tg.scissor(Mj.copy(Ue).multiplyScalar(Rc).floor())};(this||p).getScissorTest=function(){return vg};(this||p).setScissorTest=function(gc){Tg.setScissorTest(vg=gc)};(this||p).setOpaqueSort=function(gc){te=gc};(this||p).setTransparentSort=function(gc){Wc=gc};(this||p).getClearColor=function(gc){void 0===gc&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),
gc=new bg);return gc.copy(kA.getClearColor())};(this||p).setClearColor=function(){kA.setClearColor.apply(kA,arguments)};(this||p).getClearAlpha=function(){return kA.getClearAlpha()};(this||p).setClearAlpha=function(){kA.setClearAlpha.apply(kA,arguments)};(this||p).clear=function(gc,re,Cd){var Ce=0;if(void 0===gc||gc)Ce|=16384;if(void 0===re||re)Ce|=256;if(void 0===Cd||Cd)Ce|=1024;oe.clear(Ce)};(this||p).clearColor=function(){this.clear(!0,!1,!1)};(this||p).clearDepth=function(){this.clear(!1,!0,!1)};
(this||p).clearStencil=function(){this.clear(!1,!1,!0)};(this||p).dispose=function(){Xa.removeEventListener("webglcontextlost",w,!1);Xa.removeEventListener("webglcontextrestored",C,!1);WP.dispose();XP.dispose();Zi.dispose();Ak.dispose();jA.dispose();nq.dispose();lA.dispose();iJ.stop()};(this||p).renderBufferImmediate=function(gc,re){nq.initAttributes();var Cd=Zi.get(gc);gc.hasPositions&&!Cd.position&&(Cd.position=oe.createBuffer());gc.hasNormals&&!Cd.normal&&(Cd.normal=oe.createBuffer());gc.hasUvs&&
!Cd.uv&&(Cd.uv=oe.createBuffer());gc.hasColors&&!Cd.color&&(Cd.color=oe.createBuffer());re=re.getAttributes();gc.hasPositions&&(oe.bindBuffer(34962,Cd.position),oe.bufferData(34962,gc.positionArray,35048),nq.enableAttribute(re.position),oe.vertexAttribPointer(re.position,3,5126,!1,0,0));gc.hasNormals&&(oe.bindBuffer(34962,Cd.normal),oe.bufferData(34962,gc.normalArray,35048),nq.enableAttribute(re.normal),oe.vertexAttribPointer(re.normal,3,5126,!1,0,0));gc.hasUvs&&(oe.bindBuffer(34962,Cd.uv),oe.bufferData(34962,
gc.uvArray,35048),nq.enableAttribute(re.uv),oe.vertexAttribPointer(re.uv,2,5126,!1,0,0));gc.hasColors&&(oe.bindBuffer(34962,Cd.color),oe.bufferData(34962,gc.colorArray,35048),nq.enableAttribute(re.color),oe.vertexAttribPointer(re.color,3,5126,!1,0,0));nq.disableUnusedAttributes();oe.drawArrays(4,0,gc.count);gc.count=0};(this||p).renderBufferDirect=function(gc,re,Cd,Ce,Ff,xg){null===re&&(re=kk);var Jg=Ff.isMesh&&0>Ff.matrixWorld.determinant();gc=Ga(gc,re,Ce,Ff);Tg.setMaterial(Ce,Jg);Jg=Cd.index;re=
Cd.attributes.position;if(null===Jg){if(void 0===re||0===re.count)return}else if(0===Jg.count)return;var tj=1;!0===Ce.wireframe&&(Jg=Ox.getWireframeAttribute(Cd),tj=2);(Ce.morphTargets||Ce.morphNormals)&&ada.update(Ff,Cd,Ce,gc);nq.setup(Ff,Ce,gc,Cd,Jg);gc=bda;if(null!==Jg){var nj=mq.get(Jg);gc=cda;gc.setIndex(nj)}var Sn=Cd.drawRange.start*tj,Nj=null!==xg?xg.start*tj:0;nj=Math.max(Sn,Nj);xg=Math.max(0,Math.min(null!==Jg?Jg.count:re.count,Sn+Cd.drawRange.count*tj,Nj+(null!==xg?xg.count*tj:Infinity))-
1-nj+1);0!==xg&&(Ff.isMesh?!0===Ce.wireframe?(Tg.setLineWidth(Ce.wireframeLinewidth*(null===Mf?Rc:1)),gc.setMode(1)):gc.setMode(4):Ff.isLine?(Ce=Ce.linewidth,void 0===Ce&&(Ce=1),Tg.setLineWidth(Ce*(null===Mf?Rc:1)),Ff.isLineSegments?gc.setMode(1):Ff.isLineLoop?gc.setMode(2):gc.setMode(3)):Ff.isPoints?gc.setMode(0):Ff.isSprite&&gc.setMode(4),Ff.isInstancedMesh?gc.renderInstances(nj,xg,Ff.count):Cd.isInstancedBufferGeometry?gc.renderInstances(nj,xg,Math.min(Cd.instanceCount,Cd._maxInstanceCount)):gc.render(nj,
xg))};(this||p).compile=function(gc,re){Rd=XP.get(gc);Rd.init();gc.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(re.layers)&&(Rd.pushLight(Ce),Ce.castShadow&&Rd.pushShadow(Ce))});Rd.setupLights();var Cd=new WeakMap;gc.traverse(function(Ce){var Ff=Ce.material;if(Ff)if(Array.isArray(Ff))for(var xg=0;xg<Ff.length;xg++){var Jg=Ff[xg];!1===Cd.has(Jg)&&(oa(Jg,gc,Ce),Cd.set(Jg))}else!1===Cd.has(Ff)&&(oa(Ff,gc,Ce),Cd.set(Ff))})};var ZY=null,iJ=new ja;iJ.setAnimationLoop(function(gc){lA.isPresenting||
ZY&&ZY(gc)});"undefined"!==typeof window&&iJ.setContext(window);(this||p).setAnimationLoop=function(gc){ZY=gc;lA.setAnimationLoop(gc);null===gc?iJ.stop():iJ.start()};(this||p).render=function(gc,re,Cd,Ce){if(void 0!==Cd){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Ff=Cd}if(void 0!==Ce){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var xg=Ce}if(void 0!==
re&&!0!==re.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==Ae){nq.resetDefaultState();ah=-1;Lh=null;!0===gc.autoUpdate&&gc.updateMatrixWorld();null===re.parent&&re.updateMatrixWorld();!0===lA.enabled&&!0===lA.isPresenting&&(re=lA.getCamera(re));if(!0===gc.isScene)gc.onBeforeRender(sd,gc,re,Ff||Mf);Rd=XP.get(gc,ld.length);Rd.init();ld.push(Rd);ai.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse);wf.setFromProjectionMatrix(ai);
Eh=(this||p).localClippingEnabled;Mh=eu.init((this||p).clippingPlanes,Eh,re);Zc=WP.get(gc,re);Zc.init();X(gc,re,0,sd.sortObjects);Zc.finish();!0===sd.sortObjects&&Zc.sort(te,Wc);!0===Mh&&eu.beginShadows();dda.render(Rd.state.shadowsArray,gc,re);Rd.setupLights();Rd.setupLightsView(re);!0===Mh&&eu.endShadows();!0===(this||p).info.autoReset&&(this||p).info.reset();void 0!==Ff&&this.setRenderTarget(Ff);kA.render(Zc,gc,re,xg);Cd=Zc.opaque;Ce=Zc.transparent;0<Cd.length&&T(Cd,gc,re);0<Ce.length&&T(Ce,gc,
re);if(!0===gc.isScene)gc.onAfterRender(sd,gc,re);null!==Mf&&(ul.updateRenderTargetMipmap(Mf),ul.updateMultisampleRenderTarget(Mf));Tg.buffers.depth.setTest(!0);Tg.buffers.depth.setMask(!0);Tg.buffers.color.setMask(!0);Tg.setPolygonOffset(!1);ld.pop();Rd=0<ld.length?ld[ld.length-1]:null;Zc=null}};(this||p).setFramebuffer=function(gc){qe!==gc&&null===Mf&&oe.bindFramebuffer(36160,gc);qe=gc};(this||p).getActiveCubeFace=function(){return Qf};(this||p).getActiveMipmapLevel=function(){return Af};(this||
p).getRenderList=function(){return Zc};(this||p).setRenderList=function(gc){Zc=gc};(this||p).getRenderTarget=function(){return Mf};(this||p).setRenderTarget=function(gc,re,Cd){void 0===re&&(re=0);void 0===Cd&&(Cd=0);Mf=gc;Qf=re;Af=Cd;gc&&void 0===Zi.get(gc).__webglFramebuffer&&ul.setupRenderTarget(gc);var Ce=qe,Ff=!1;gc?(Ce=Zi.get(gc).__webglFramebuffer,gc.isWebGLCubeRenderTarget?(Ce=Ce[re],Ff=!0):Ce=gc.isWebGLMultisampleRenderTarget?Zi.get(gc).__webglMultisampledFramebuffer:Ce,mh.copy(gc.viewport),
Mj.copy(gc.scissor),lk=gc.scissorTest):(mh.copy(Ge).multiplyScalar(Rc).floor(),Mj.copy(Ue).multiplyScalar(Rc).floor(),lk=vg);jg!==Ce&&(oe.bindFramebuffer(36160,Ce),jg=Ce);Tg.viewport(mh);Tg.scissor(Mj);Tg.setScissorTest(lk);Ff&&(gc=Zi.get(gc.texture),oe.framebufferTexture2D(36160,36064,34069+re,gc.__webglTexture,Cd))};(this||p).readRenderTargetPixels=function(gc,re,Cd,Ce,Ff,xg,Jg){if(gc&&gc.isWebGLRenderTarget){var tj=Zi.get(gc).__webglFramebuffer;gc.isWebGLCubeRenderTarget&&void 0!==Jg&&(tj=tj[Jg]);
if(tj){Jg=!1;tj!==jg&&(oe.bindFramebuffer(36160,tj),Jg=!0);try{var nj=gc.texture,Sn=nj.format,Nj=nj.type;1023!==Sn&&Nx.convert(Sn)!==oe.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===Nj||Nx.convert(Nj)===oe.getParameter(35738)||1015===Nj&&(gh.isWebGL2||Rf.get("OES_texture_float")||Rf.get("WEBGL_color_buffer_float"))||1016===Nj&&(gh.isWebGL2?Rf.get("EXT_color_buffer_float"):Rf.get("EXT_color_buffer_half_float"))?
36053===oe.checkFramebufferStatus(36160)?0<=re&&re<=gc.width-Ce&&0<=Cd&&Cd<=gc.height-Ff&&oe.readPixels(re,Cd,Ce,Ff,Nx.convert(Sn),Nx.convert(Nj),xg):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{Jg&&oe.bindFramebuffer(36160,jg)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};
(this||p).copyFramebufferToTexture=function(gc,re,Cd){void 0===Cd&&(Cd=0);var Ce=Math.pow(2,-Cd),Ff=Math.floor(re.image.width*Ce);Ce=Math.floor(re.image.height*Ce);var xg=Nx.convert(re.format);ul.setTexture2D(re,0);oe.copyTexImage2D(3553,Cd,xg,gc.x,gc.y,Ff,Ce,0);Tg.unbindTexture()};(this||p).copyTextureToTexture=function(gc,re,Cd,Ce){void 0===Ce&&(Ce=0);var Ff=re.image.width,xg=re.image.height,Jg=Nx.convert(Cd.format),tj=Nx.convert(Cd.type);ul.setTexture2D(Cd,0);oe.pixelStorei(37440,Cd.flipY);oe.pixelStorei(37441,
Cd.premultiplyAlpha);oe.pixelStorei(3317,Cd.unpackAlignment);re.isDataTexture?oe.texSubImage2D(3553,Ce,gc.x,gc.y,Ff,xg,Jg,tj,re.image.data):re.isCompressedTexture?oe.compressedTexSubImage2D(3553,Ce,gc.x,gc.y,re.mipmaps[0].width,re.mipmaps[0].height,Jg,re.mipmaps[0].data):oe.texSubImage2D(3553,Ce,gc.x,gc.y,Jg,tj,re.image);0===Ce&&Cd.generateMipmaps&&oe.generateMipmap(3553);Tg.unbindTexture()};(this||p).initTexture=function(gc){ul.setTexture2D(gc,0);Tg.unbindTexture()};(this||p).resetState=function(){Tg.reset();
nq.reset()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this||p}))}function $Y(u){hJ.call(this||p,u)}function vr(u,z){(this||p).array=u;(this||p).stride=z;(this||p).count=void 0!==u?u.length/z:0;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0;(this||p).uuid=Kh.generateUUID()}function mA(u,z,t,w){(this||p).name="";(this||p).data=u;(this||p).itemSize=z;(this||p).offset=t;(this||p).normalized=!0===w}function nA(u){L.call(this||
p);(this||p).type="SpriteMaterial";(this||p).color=new bg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).rotation=0;(this||p).sizeAttenuation=!0;(this||p).transparent=!0;this.setValues(u)}function jJ(u){F.call(this||p);(this||p).type="Sprite";if(void 0===wF){wF=new ob;var z=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);z=new vr(z,5);wF.setIndex([0,1,2,0,2,3]);wF.setAttribute("position",new mA(z,3,0,!1));wF.setAttribute("uv",new mA(z,2,3,!1))}(this||p).geometry=
wF;(this||p).material=void 0!==u?u:new nA;(this||p).center=new Je(.5,.5)}function ZP(u,z,t,w,C,G){xF.subVectors(u,t).addScalar(.5).multiply(w);void 0!==C?(kJ.x=G*xF.x-C*xF.y,kJ.y=C*xF.x+G*xF.y):kJ.copy(xF);u.copy(z);u.x+=kJ.x;u.y+=kJ.y;u.applyMatrix4(eda)}function lJ(){F.call(this||p);(this||p)._currentLevel=0;(this||p).type="LOD";Object.defineProperties(this||p,{levels:{enumerable:!0,value:[]}});(this||p).autoUpdate=!0}function mJ(u,z){u&&u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");
pa.call(this||p,u,z);(this||p).type="SkinnedMesh";(this||p).bindMode="attached";(this||p).bindMatrix=new Qi;(this||p).bindMatrixInverse=new Qi}function nJ(){F.call(this||p);(this||p).type="Bone"}function oJ(u,z){void 0===u&&(u=[]);void 0===z&&(z=[]);(this||p).uuid=Kh.generateUUID();(this||p).bones=u.slice(0);(this||p).boneInverses=z;(this||p).boneMatrices=null;(this||p).boneTexture=null;(this||p).boneTextureSize=0;(this||p).frame=-1;this.init()}function $P(u,z,t){pa.call(this||p,u,z);(this||p).instanceMatrix=
new S(new Float32Array(16*t),16);(this||p).instanceColor=null;(this||p).count=t;(this||p).frustumCulled=!1}function vl(u){L.call(this||p);(this||p).type="LineBasicMaterial";(this||p).color=new bg(16777215);(this||p).linewidth=1;(this||p).linecap="round";(this||p).linejoin="round";(this||p).morphTargets=!1;this.setValues(u)}function Is(u,z){void 0===u&&(u=new ob);void 0===z&&(z=new vl);F.call(this||p);(this||p).type="Line";(this||p).geometry=u;(this||p).material=z;this.updateMorphTargets()}function Dp(u,
z){Is.call(this||p,u,z);(this||p).type="LineSegments"}function aQ(u,z){Is.call(this||p,u,z);(this||p).type="LineLoop"}function fu(u){L.call(this||p);(this||p).type="PointsMaterial";(this||p).color=new bg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).size=1;(this||p).sizeAttenuation=!0;(this||p).morphTargets=!1;this.setValues(u)}function yF(u,z){void 0===u&&(u=new ob);void 0===z&&(z=new fu);F.call(this||p);(this||p).type="Points";(this||p).geometry=u;(this||p).material=z;this.updateMorphTargets()}
function aZ(u,z,t,w,C,G,M){var Q=bZ.distanceSqToPoint(u);Q<t&&(t=new kc,bZ.closestPointToPoint(u,t),t.applyMatrix4(w),u=C.ray.origin.distanceTo(t),u<C.near||u>C.far||G.push({distance:u,distanceToRay:Math.sqrt(Q),point:t,index:z,face:null,object:M}))}function cZ(u,z,t,w,C,G,M,Q,X){function T(){fa.needsUpdate=!0;u.requestVideoFrameCallback(T)}r.call(this||p,u,z,t,w,C,G,M,Q,X);(this||p).format=void 0!==M?M:1022;(this||p).minFilter=void 0!==G?G:1006;(this||p).magFilter=void 0!==C?C:1006;(this||p).generateMipmaps=
!1;var fa=this||p;"requestVideoFrameCallback"in u&&u.requestVideoFrameCallback(T)}function zF(u,z,t,w,C,G,M,Q,X,T,fa,oa){r.call(this||p,null,G,M,Q,X,T,w,C,fa,oa);(this||p).image={width:z,height:t};(this||p).mipmaps=u;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function pJ(u,z,t,w,C,G,M,Q,X){r.call(this||p,u,z,t,w,C,G,M,Q,X);(this||p).needsUpdate=!0}function qJ(u,z,t,w,C,G,M,Q,X,T){T=void 0!==T?T:1026;if(1026!==T&&1027!==T)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
void 0===t&&1026===T&&(t=1012);void 0===t&&1027===T&&(t=1020);r.call(this||p,null,w,C,G,M,Q,T,t,X);(this||p).image={width:u,height:z};(this||p).magFilter=void 0!==M?M:1003;(this||p).minFilter=void 0!==Q?Q:1003;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function Hk(){Object.defineProperty(this||p,"id",{value:Vwa+=2});(this||p).uuid=Kh.generateUUID();(this||p).name="";(this||p).type="Geometry";(this||p).vertices=[];(this||p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=
[];(this||p).morphNormals=[];(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).elementsNeedUpdate=!1;(this||p).verticesNeedUpdate=!1;(this||p).uvsNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=!1;(this||p).lineDistancesNeedUpdate=!1;(this||p).groupsNeedUpdate=!1}function fda(u,z,t,w,C){for(var G,M=0,Q=z,X=t-w;Q<t;Q+=w)M+=(u[X]-u[Q])*(u[Q+1]+u[X+1]),X=Q;if(C===0<M)for(C=z;C<t;C+=w)G=
gda(C,u[C],u[C+1],G);else for(C=t-w;C>=z;C-=w)G=gda(C,u[C],u[C+1],G);G&&bQ(G,G.next)&&(rJ(G),G=G.next);return G}function oA(u,z){if(!u)return u;z||(z=u);do{var t=!1;if(u.steiner||!bQ(u,u.next)&&0!==Jl(u.prev,u,u.next))u=u.next;else{rJ(u);u=z=u.prev;if(u===u.next)break;t=!0}}while(t||u!==z);return z}function sJ(u,z,t,w,C,G,M){if(u){if(!M&&G){var Q=u,X=Q;do null===X.z&&(X.z=dZ(X.x,X.y,w,C,G)),X.prevZ=X.prev,X=X.nextZ=X.next;while(X!==Q);X.prevZ.nextZ=null;X.prevZ=null;Q=X;var T,fa,oa,Ga,Xa=1;do{X=Q;
var Wa=Q=null;for(fa=0;X;){fa++;var tb=X;for(T=oa=0;T<Xa&&(oa++,tb=tb.nextZ,tb);T++);for(Ga=Xa;0<oa||0<Ga&&tb;)0!==oa&&(0===Ga||!tb||X.z<=tb.z)?(T=X,X=X.nextZ,oa--):(T=tb,tb=tb.nextZ,Ga--),Wa?Wa.nextZ=T:Q=T,T.prevZ=Wa,Wa=T;X=tb}Wa.nextZ=null;Xa*=2}while(1<fa)}for(Q=u;u.prev!==u.next;){X=u.prev;tb=u.next;if(G)Wa=Wwa(u,w,C,G);else a:if(Wa=u,fa=Wa.prev,oa=Wa,Xa=Wa.next,0<=Jl(fa,oa,Xa))Wa=!1;else{for(T=Wa.next.next;T!==Wa.prev;){if(AF(fa.x,fa.y,oa.x,oa.y,Xa.x,Xa.y,T.x,T.y)&&0<=Jl(T.prev,T,T.next)){Wa=
!1;break a}T=T.next}Wa=!0}if(Wa)z.push(X.i/t),z.push(u.i/t),z.push(tb.i/t),rJ(u),Q=u=tb.next;else if(u=tb,u===Q){if(!M)sJ(oA(u),z,t,w,C,G,1);else if(1===M){u=oA(u);M=z;Q=t;X=u;do tb=X.prev,Wa=X.next.next,!bQ(tb,Wa)&&hda(tb,X,X.next,Wa)&&tJ(tb,Wa)&&tJ(Wa,tb)&&(M.push(tb.i/Q),M.push(X.i/Q),M.push(Wa.i/Q),rJ(X),rJ(X.next),X=u=Wa),X=X.next;while(X!==u);u=oA(X);sJ(u,z,t,w,C,G,2)}else if(2===M)a:{M=u;do{for(Q=M.next.next;Q!==M.prev;){if(X=M.i!==Q.i){X=M;tb=Q;if(Wa=X.next.i!==tb.i&&X.prev.i!==tb.i){b:{Wa=
X;do{if(Wa.i!==X.i&&Wa.next.i!==X.i&&Wa.i!==tb.i&&Wa.next.i!==tb.i&&hda(Wa,Wa.next,X,tb)){Wa=!0;break b}Wa=Wa.next}while(Wa!==X);Wa=!1}Wa=!Wa}if(Wa){if(Wa=tJ(X,tb)&&tJ(tb,X)){Wa=X;fa=!1;oa=(X.x+tb.x)/2;Xa=(X.y+tb.y)/2;do Wa.y>Xa!==Wa.next.y>Xa&&Wa.next.y!==Wa.y&&oa<(Wa.next.x-Wa.x)*(Xa-Wa.y)/(Wa.next.y-Wa.y)+Wa.x&&(fa=!fa),Wa=Wa.next;while(Wa!==X);Wa=fa}Wa=Wa&&(Jl(X.prev,X,tb.prev)||Jl(X,tb.prev,tb))||bQ(X,tb)&&0<Jl(X.prev,X,X.next)&&0<Jl(tb.prev,tb,tb.next)}X=Wa}if(X){u=ida(M,Q);M=oA(M,M.next);u=
oA(u,u.next);sJ(M,z,t,w,C,G);sJ(u,z,t,w,C,G);break a}Q=Q.next}M=M.next}while(M!==u)}break}}}}function Wwa(u,z,t,w){var C=u.prev,G=u.next;if(0<=Jl(C,u,G))return!1;var M=C.x>u.x?C.x>G.x?C.x:G.x:u.x>G.x?u.x:G.x,Q=C.y>u.y?C.y>G.y?C.y:G.y:u.y>G.y?u.y:G.y,X=dZ(C.x<u.x?C.x<G.x?C.x:G.x:u.x<G.x?u.x:G.x,C.y<u.y?C.y<G.y?C.y:G.y:u.y<G.y?u.y:G.y,z,t,w);z=dZ(M,Q,z,t,w);t=u.prevZ;for(w=u.nextZ;t&&t.z>=X&&w&&w.z<=z;){if(t!==u.prev&&t!==u.next&&AF(C.x,C.y,u.x,u.y,G.x,G.y,t.x,t.y)&&0<=Jl(t.prev,t,t.next))return!1;
t=t.prevZ;if(w!==u.prev&&w!==u.next&&AF(C.x,C.y,u.x,u.y,G.x,G.y,w.x,w.y)&&0<=Jl(w.prev,w,w.next))return!1;w=w.nextZ}for(;t&&t.z>=X;){if(t!==u.prev&&t!==u.next&&AF(C.x,C.y,u.x,u.y,G.x,G.y,t.x,t.y)&&0<=Jl(t.prev,t,t.next))return!1;t=t.prevZ}for(;w&&w.z<=z;){if(w!==u.prev&&w!==u.next&&AF(C.x,C.y,u.x,u.y,G.x,G.y,w.x,w.y)&&0<=Jl(w.prev,w,w.next))return!1;w=w.nextZ}return!0}function Xwa(u,z){return u.x-z.x}function Ywa(u,z){var t=z,w=u.x,C=u.y,G=-Infinity;do{if(C<=t.y&&C>=t.next.y&&t.next.y!==t.y){var M=
t.x+(C-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(M<=w&&M>G){G=M;if(M===w){if(C===t.y)return t;if(C===t.next.y)return t.next}var Q=t.x<t.next.x?t:t.next}}t=t.next}while(t!==z);if(!Q)return null;if(w===G)return Q;z=Q;M=Q.x;var X=Q.y,T=Infinity;t=Q;do{if(w>=t.x&&t.x>=M&&w!==t.x&&AF(C<X?w:G,C,M,X,C<X?G:w,C,t.x,t.y)){var fa=Math.abs(C-t.y)/(w-t.x);var oa;if((oa=tJ(t,u))&&!(oa=fa<T)&&(oa=fa===T)&&!(oa=t.x>Q.x)&&(oa=t.x===Q.x)){oa=Q;var Ga=t;oa=0>Jl(oa.prev,oa,Ga.prev)&&0>Jl(Ga.next,oa,oa.next)}oa&&(Q=t,T=fa)}t=
t.next}while(t!==z);return Q}function dZ(u,z,t,w,C){u=32767*(u-t)*C;z=32767*(z-w)*C;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;z=(z|z<<8)&16711935;z=(z|z<<4)&252645135;z=(z|z<<2)&858993459;return(u|u<<1)&1431655765|((z|z<<1)&1431655765)<<1}function Zwa(u){var z=u,t=u;do{if(z.x<t.x||z.x===t.x&&z.y<t.y)t=z;z=z.next}while(z!==u);return t}function AF(u,z,t,w,C,G,M,Q){return 0<=(C-M)*(z-Q)-(u-M)*(G-Q)&&0<=(u-M)*(w-Q)-(t-M)*(z-Q)&&0<=(t-M)*(G-Q)-(C-M)*(w-Q)}function Jl(u,z,t){return(z.y-
u.y)*(t.x-z.x)-(z.x-u.x)*(t.y-z.y)}function bQ(u,z){return u.x===z.x&&u.y===z.y}function hda(u,z,t,w){var C=cQ(Jl(u,z,t)),G=cQ(Jl(u,z,w)),M=cQ(Jl(t,w,u)),Q=cQ(Jl(t,w,z));return C!==G&&M!==Q||0===C&&dQ(u,t,z)||0===G&&dQ(u,w,z)||0===M&&dQ(t,u,w)||0===Q&&dQ(t,z,w)?!0:!1}function dQ(u,z,t){return z.x<=Math.max(u.x,t.x)&&z.x>=Math.min(u.x,t.x)&&z.y<=Math.max(u.y,t.y)&&z.y>=Math.min(u.y,t.y)}function cQ(u){return 0<u?1:0>u?-1:0}function tJ(u,z){return 0>Jl(u.prev,u,u.next)?0<=Jl(u,z,u.next)&&0<=Jl(u,u.prev,
z):0>Jl(u,z,u.prev)||0>Jl(u,u.next,z)}function ida(u,z){var t=new eZ(u.i,u.x,u.y),w=new eZ(z.i,z.x,z.y),C=u.next,G=z.prev;u.next=z;z.prev=u;t.next=C;C.prev=t;w.next=t;t.prev=w;G.next=w;w.prev=G;return w}function gda(u,z,t,w){u=new eZ(u,z,t);w?(u.next=w.next,u.prev=w,w.next.prev=u,w.next=u):(u.prev=u,u.next=u);return u}function rJ(u){u.next.prev=u.prev;u.prev.next=u.next;u.prevZ&&(u.prevZ.nextZ=u.nextZ);u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function eZ(u,z,t){(this||p).i=u;(this||p).x=z;(this||p).y=t;(this||
p).prev=null;(this||p).next=null;(this||p).z=null;(this||p).prevZ=null;(this||p).nextZ=null;(this||p).steiner=!1}function jda(u){var z=u.length;2<z&&u[z-1].equals(u[0])&&u.pop()}function kda(u,z){for(var t=0;t<z.length;t++)u.push(z[t].x),u.push(z[t].y)}function BF(u,z,t){ob.call(this||p);(this||p).type="ParametricBufferGeometry";(this||p).parameters={func:u,slices:z,stacks:t};var w=[],C=[],G=[],M=[],Q=new kc,X=new kc,T=new kc,fa=new kc,oa=new kc;3>u.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");
for(var Ga=z+1,Xa=0;Xa<=t;Xa++)for(var Wa=Xa/t,tb=0;tb<=z;tb++){var mb=tb/z;u(mb,Wa,X);C.push(X.x,X.y,X.z);0<=mb-1E-5?(u(mb-1E-5,Wa,T),fa.subVectors(X,T)):(u(mb+1E-5,Wa,T),fa.subVectors(T,X));0<=Wa-1E-5?(u(mb,Wa-1E-5,T),oa.subVectors(X,T)):(u(mb,Wa+1E-5,T),oa.subVectors(T,X));Q.crossVectors(fa,oa).normalize();G.push(Q.x,Q.y,Q.z);M.push(mb,Wa)}for(u=0;u<t;u++)for(Q=0;Q<z;Q++)X=u*Ga+Q+1,T=(u+1)*Ga+Q+1,fa=(u+1)*Ga+Q,w.push(u*Ga+Q,X,fa),w.push(X,T,fa);this.setIndex(w);this.setAttribute("position",new aa(C,
3));this.setAttribute("normal",new aa(G,3));this.setAttribute("uv",new aa(M,2))}function uJ(u,z,t){Hk.call(this||p);(this||p).type="ParametricGeometry";(this||p).parameters={func:u,slices:z,stacks:t};this.fromBufferGeometry(new BF(u,z,t));this.mergeVertices()}function HC(u){L.call(this||p);(this||p).type="ShadowMaterial";(this||p).color=new bg(0);(this||p).transparent=!0;this.setValues(u)}function Px(u){hc.call(this||p,u);(this||p).type="RawShaderMaterial"}function ew(u){L.call(this||p);(this||p).defines=
{STANDARD:""};(this||p).type="MeshStandardMaterial";(this||p).color=new bg(16777215);(this||p).roughness=1;(this||p).metalness=0;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new bg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Je(1,1);(this||p).displacementMap=null;(this||
p).displacementScale=1;(this||p).displacementBias=0;(this||p).roughnessMap=null;(this||p).metalnessMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).envMapIntensity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).vertexTangents=!1;this.setValues(u)}function pA(u){ew.call(this||p);(this||p).defines=
{STANDARD:"",PHYSICAL:""};(this||p).type="MeshPhysicalMaterial";(this||p).clearcoat=0;(this||p).clearcoatMap=null;(this||p).clearcoatRoughness=0;(this||p).clearcoatRoughnessMap=null;(this||p).clearcoatNormalScale=new Je(1,1);(this||p).clearcoatNormalMap=null;(this||p).reflectivity=.5;Object.defineProperty(this||p,"ior",{get:function(){return(1+.4*(this||p).reflectivity)/(1-.4*(this||p).reflectivity)},set:function(z){(this||p).reflectivity=Kh.clamp(2.5*(z-1)/(z+1),0,1)}});(this||p).sheen=null;(this||
p).transmission=0;(this||p).transmissionMap=null;this.setValues(u)}function qA(u){L.call(this||p);(this||p).type="MeshPhongMaterial";(this||p).color=new bg(16777215);(this||p).specular=new bg(1118481);(this||p).shininess=30;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new bg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;
(this||p).normalMapType=0;(this||p).normalScale=new Je(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}
function IC(u){L.call(this||p);(this||p).defines={TOON:""};(this||p).type="MeshToonMaterial";(this||p).color=new bg(16777215);(this||p).map=null;(this||p).gradientMap=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new bg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Je(1,1);(this||p).displacementMap=
null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function JC(u){L.call(this||p);(this||p).type="MeshNormalMaterial";(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Je(1,1);
(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function KC(u){L.call(this||p);(this||p).type="MeshLambertMaterial";(this||p).color=new bg(16777215);(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new bg(0);
(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function LC(u){L.call(this||p);(this||p).defines={MATCAP:""};(this||p).type="MeshMatcapMaterial";
(this||p).color=new bg(16777215);(this||p).matcap=null;(this||p).map=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Je(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function MC(u){vl.call(this||p);(this||p).type="LineDashedMaterial";(this||p).scale=1;(this||
p).dashSize=3;(this||p).gapSize=1;this.setValues(u)}function wr(u,z,t,w){(this||p).parameterPositions=u;(this||p)._cachedIndex=0;(this||p).resultBuffer=void 0!==w?w:new z.constructor(t);(this||p).sampleValues=z;(this||p).valueSize=t}function eQ(u,z,t,w){wr.call(this||p,u,z,t,w);(this||p)._weightPrev=-0;(this||p)._offsetPrev=-0;(this||p)._weightNext=-0;(this||p)._offsetNext=-0}function vJ(u,z,t,w){wr.call(this||p,u,z,t,w)}function fQ(u,z,t,w){wr.call(this||p,u,z,t,w)}function so(u,z,t,w){if(void 0===
u)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===z||0===z.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+u);(this||p).name=u;(this||p).times=ml.convertArray(z,(this||p).TimeBufferType);(this||p).values=ml.convertArray(t,(this||p).ValueBufferType);this.setInterpolation(w||(this||p).DefaultInterpolation)}function gQ(u,z,t){so.call(this||p,u,z,t)}function hQ(u,z,t,w){so.call(this||p,u,z,t,w)}function CF(u,z,t,w){so.call(this||p,u,z,t,w)}function iQ(u,
z,t,w){wr.call(this||p,u,z,t,w)}function wJ(u,z,t,w){so.call(this||p,u,z,t,w)}function jQ(u,z,t,w){so.call(this||p,u,z,t,w)}function DF(u,z,t,w){so.call(this||p,u,z,t,w)}function xr(u,z,t,w){void 0===z&&(z=-1);void 0===w&&(w=2500);(this||p).name=u;(this||p).tracks=t;(this||p).duration=z;(this||p).blendMode=w;(this||p).uuid=Kh.generateUUID();0>(this||p).duration&&this.resetDuration()}function $wa(u){switch(u.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return CF;
case "vector":case "vector2":case "vector3":case "vector4":return DF;case "color":return hQ;case "quaternion":return wJ;case "bool":case "boolean":return gQ;case "string":return jQ}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+u);}function axa(u){if(void 0===u.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var z=$wa(u.type);if(void 0===u.times){var t=[],w=[];ml.flattenJSON(u.keys,t,w,"value");u.times=t;u.values=w}return void 0!==z.parse?z.parse(u):new z(u.name,
u.times,u.values,u.interpolation)}function fZ(u,z,t){var w=this||p,C=!1,G=0,M=0,Q=void 0,X=[];(this||p).onStart=void 0;(this||p).onLoad=u;(this||p).onProgress=z;(this||p).onError=t;(this||p).itemStart=function(T){M++;if(!1===C&&void 0!==w.onStart)w.onStart(T,G,M);C=!0};(this||p).itemEnd=function(T){G++;if(void 0!==w.onProgress)w.onProgress(T,G,M);if(G===M&&(C=!1,void 0!==w.onLoad))w.onLoad()};(this||p).itemError=function(T){if(void 0!==w.onError)w.onError(T)};(this||p).resolveURL=function(T){return Q?
Q(T):T};(this||p).setURLModifier=function(T){Q=T;return this||p};(this||p).addHandler=function(T,fa){X.push(T,fa);return this||p};(this||p).removeHandler=function(T){T=X.indexOf(T);-1!==T&&X.splice(T,2);return this||p};(this||p).getHandler=function(T){for(var fa=0,oa=X.length;fa<oa;fa+=2){var Ga=X[fa],Xa=X[fa+1];Ga.global&&(Ga.lastIndex=0);if(Ga.test(T))return Xa}return null}}function Bk(u){(this||p).manager=void 0!==u?u:lda;(this||p).crossOrigin="anonymous";(this||p).withCredentials=!1;(this||p).path=
"";(this||p).resourcePath="";(this||p).requestHeader={}}function Js(u){Bk.call(this||p,u)}function gZ(u){Bk.call(this||p,u)}function hZ(u){Bk.call(this||p,u)}function EF(u){Bk.call(this||p,u)}function kQ(u){Bk.call(this||p,u)}function lQ(u){Bk.call(this||p,u)}function mQ(u){Bk.call(this||p,u)}function Ug(){(this||p).type="Curve";(this||p).arcLengthDivisions=200}function yr(u,z,t,w,C,G,M,Q){Ug.call(this||p);(this||p).type="EllipseCurve";(this||p).aX=u||0;(this||p).aY=z||0;(this||p).xRadius=t||1;(this||
p).yRadius=w||1;(this||p).aStartAngle=C||0;(this||p).aEndAngle=G||2*Math.PI;(this||p).aClockwise=M||!1;(this||p).aRotation=Q||0}function FF(u,z,t,w,C,G){yr.call(this||p,u,z,t,t,w,C,G);(this||p).type="ArcCurve"}function iZ(){var u=0,z=0,t=0,w=0;return{initCatmullRom:function(C,G,M,Q,X){C=X*(M-C);Q=X*(Q-G);u=G;z=C;t=-3*G+3*M-2*C-Q;w=2*G-2*M+C+Q},initNonuniformCatmullRom:function(C,G,M,Q,X,T,fa){C=((G-C)/X-(M-C)/(X+T)+(M-G)/T)*T;Q=((M-G)/T-(Q-G)/(T+fa)+(Q-M)/fa)*T;u=G;z=C;t=-3*G+3*M-2*C-Q;w=2*G-2*M+
C+Q},calc:function(C){var G=C*C;return u+z*C+t*G+w*G*C}}}function To(u,z,t,w){void 0===u&&(u=[]);void 0===z&&(z=!1);void 0===t&&(t="centripetal");void 0===w&&(w=.5);Ug.call(this||p);(this||p).type="CatmullRomCurve3";(this||p).points=u;(this||p).closed=z;(this||p).curveType=t;(this||p).tension=w}function mda(u,z,t,w,C){z=.5*(w-z);C=.5*(C-t);var G=u*u;return(2*t-2*w+z+C)*u*G+(-3*t+3*w-2*z-C)*G+z*u+t}function xJ(u,z,t,w){var C=1-u;return C*C*z+2*(1-u)*u*t+u*u*w}function yJ(u,z,t,w,C){var G=1-u,M=1-u;
return G*G*G*z+3*M*M*u*t+3*(1-u)*u*u*w+u*u*u*C}function gu(u,z,t,w){void 0===u&&(u=new Je);void 0===z&&(z=new Je);void 0===t&&(t=new Je);void 0===w&&(w=new Je);Ug.call(this||p);(this||p).type="CubicBezierCurve";(this||p).v0=u;(this||p).v1=z;(this||p).v2=t;(this||p).v3=w}function fw(u,z,t,w){void 0===u&&(u=new kc);void 0===z&&(z=new kc);void 0===t&&(t=new kc);void 0===w&&(w=new kc);Ug.call(this||p);(this||p).type="CubicBezierCurve3";(this||p).v0=u;(this||p).v1=z;(this||p).v2=t;(this||p).v3=w}function oq(u,
z){void 0===u&&(u=new Je);void 0===z&&(z=new Je);Ug.call(this||p);(this||p).type="LineCurve";(this||p).v1=u;(this||p).v2=z}function hu(u,z){void 0===u&&(u=new kc);void 0===z&&(z=new kc);Ug.call(this||p);(this||p).type="LineCurve3";(this||p).v1=u;(this||p).v2=z}function iu(u,z,t){void 0===u&&(u=new Je);void 0===z&&(z=new Je);void 0===t&&(t=new Je);Ug.call(this||p);(this||p).type="QuadraticBezierCurve";(this||p).v0=u;(this||p).v1=z;(this||p).v2=t}function gw(u,z,t){void 0===u&&(u=new kc);void 0===z&&
(z=new kc);void 0===t&&(t=new kc);Ug.call(this||p);(this||p).type="QuadraticBezierCurve3";(this||p).v0=u;(this||p).v1=z;(this||p).v2=t}function ju(u){void 0===u&&(u=[]);Ug.call(this||p);(this||p).type="SplineCurve";(this||p).points=u}function Qx(){Ug.call(this||p);(this||p).type="CurvePath";(this||p).curves=[];(this||p).autoClose=!1}function ku(u){Qx.call(this||p);(this||p).type="Path";(this||p).currentPoint=new Je;u&&this.setFromPoints(u)}function rA(u){ku.call(this||p,u);(this||p).uuid=Kh.generateUUID();
(this||p).type="Shape";(this||p).holes=[]}function al(u,z){void 0===z&&(z=1);F.call(this||p);(this||p).type="Light";(this||p).color=new bg(u);(this||p).intensity=z}function nQ(u,z,t){al.call(this||p,u,t);(this||p).type="HemisphereLight";(this||p).position.copy(F.DefaultUp);this.updateMatrix();(this||p).groundColor=new bg(z)}function Rx(u){(this||p).camera=u;(this||p).bias=0;(this||p).normalBias=0;(this||p).radius=1;(this||p).mapSize=new Je(512,512);(this||p).map=null;(this||p).mapPass=null;(this||
p).matrix=new Qi;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p)._frustum=new fJ;(this||p)._frameExtents=new Je(1,1);(this||p)._viewportCount=1;(this||p)._viewports=[new Gk(0,0,1,1)]}function jZ(){Rx.call(this||p,new ac(50,1,.5,500));(this||p).focus=1}function oQ(u,z,t,w,C,G){al.call(this||p,u,z);(this||p).type="SpotLight";(this||p).position.copy(F.DefaultUp);this.updateMatrix();(this||p).target=new F;Object.defineProperty(this||p,"power",{get:function(){return(this||p).intensity*Math.PI},
set:function(M){(this||p).intensity=M/Math.PI}});(this||p).distance=void 0!==t?t:0;(this||p).angle=void 0!==w?w:Math.PI/3;(this||p).penumbra=void 0!==C?C:0;(this||p).decay=void 0!==G?G:1;(this||p).shadow=new jZ}function kZ(){Rx.call(this||p,new ac(90,1,.5,500));(this||p)._frameExtents=new Je(4,2);(this||p)._viewportCount=6;(this||p)._viewports=[new Gk(2,1,1,1),new Gk(0,1,1,1),new Gk(3,1,1,1),new Gk(1,1,1,1),new Gk(3,0,1,1),new Gk(1,0,1,1)];(this||p)._cubeDirections=[new kc(1,0,0),new kc(-1,0,0),new kc(0,
0,1),new kc(0,0,-1),new kc(0,1,0),new kc(0,-1,0)];(this||p)._cubeUps=[new kc(0,1,0),new kc(0,1,0),new kc(0,1,0),new kc(0,1,0),new kc(0,0,1),new kc(0,0,-1)]}function pQ(u,z,t,w){al.call(this||p,u,z);(this||p).type="PointLight";Object.defineProperty(this||p,"power",{get:function(){return 4*(this||p).intensity*Math.PI},set:function(C){(this||p).intensity=C/(4*Math.PI)}});(this||p).distance=void 0!==t?t:0;(this||p).decay=void 0!==w?w:1;(this||p).shadow=new kZ}function GF(u,z,t,w,C,G){void 0===u&&(u=-1);
void 0===z&&(z=1);void 0===t&&(t=1);void 0===w&&(w=-1);void 0===C&&(C=.1);void 0===G&&(G=2E3);Ub.call(this||p);(this||p).type="OrthographicCamera";(this||p).zoom=1;(this||p).view=null;(this||p).left=u;(this||p).right=z;(this||p).top=t;(this||p).bottom=w;(this||p).near=C;(this||p).far=G;this.updateProjectionMatrix()}function lZ(){Rx.call(this||p,new GF(-5,5,5,-5,.5,500))}function qQ(u,z){al.call(this||p,u,z);(this||p).type="DirectionalLight";(this||p).position.copy(F.DefaultUp);this.updateMatrix();
(this||p).target=new F;(this||p).shadow=new lZ}function rQ(u,z){al.call(this||p,u,z);(this||p).type="AmbientLight"}function sQ(u,z,t,w){al.call(this||p,u,z);(this||p).type="RectAreaLight";(this||p).width=void 0!==t?t:10;(this||p).height=void 0!==w?w:10}function Ks(u,z){al.call(this||p,void 0,z);(this||p).type="LightProbe";(this||p).sh=void 0!==u?u:new nda}function tQ(u){Bk.call(this||p,u);(this||p).textures={}}function zJ(){ob.call(this||p);(this||p).type="InstancedBufferGeometry";(this||p).instanceCount=
Infinity}function uQ(u,z,t,w){"number"===typeof t&&(w=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));S.call(this||p,u,z,t);(this||p).meshPerAttribute=w||1}function vQ(u){Bk.call(this||p,u)}function mZ(u){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");Bk.call(this||p,u);
(this||p).options={premultiplyAlpha:"none"}}function nZ(){(this||p).type="ShapePath";(this||p).color=new bg;(this||p).subPaths=[];(this||p).currentPath=null}function oZ(u){(this||p).type="Font";(this||p).data=u}function pZ(u){Bk.call(this||p,u)}function wQ(u){Bk.call(this||p,u)}function qZ(u,z,t){Ks.call(this||p,void 0,t);u=(new bg).set(u);t=(new bg).set(z);z=new kc(u.r,u.g,u.b);u=new kc(t.r,t.g,t.b);t=Math.sqrt(Math.PI);var w=t*Math.sqrt(.75);(this||p).sh.coefficients[0].copy(z).add(u).multiplyScalar(t);
(this||p).sh.coefficients[1].copy(z).sub(u).multiplyScalar(w)}function rZ(u,z){Ks.call(this||p,void 0,z);u=(new bg).set(u);(this||p).sh.coefficients[0].set(u.r,u.g,u.b).multiplyScalar(2*Math.sqrt(Math.PI))}function oda(){(this||p).type="StereoCamera";(this||p).aspect=1;(this||p).eyeSep=.064;(this||p).cameraL=new ac;(this||p).cameraL.layers.enable(1);(this||p).cameraL.matrixAutoUpdate=!1;(this||p).cameraR=new ac;(this||p).cameraR.layers.enable(2);(this||p).cameraR.matrixAutoUpdate=!1;(this||p)._cache=
{focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function pda(){return("undefined"===typeof performance?Date:performance).now()}function sZ(u,z,t){(this||p).binding=u;(this||p).valueSize=t;switch(z){case "quaternion":u=(this||p)._slerp;z=(this||p)._slerpAdditive;var w=(this||p)._setAdditiveIdentityQuaternion;(this||p).buffer=new Float64Array(6*t);(this||p)._workIndex=5;break;case "string":case "bool":u=(this||p)._select;z=(this||p)._select;w=(this||p)._setAdditiveIdentityOther;
(this||p).buffer=Array(5*t);break;default:u=(this||p)._lerp,z=(this||p)._lerpAdditive,w=(this||p)._setAdditiveIdentityNumeric,(this||p).buffer=new Float64Array(5*t)}(this||p)._mixBufferRegion=u;(this||p)._mixBufferRegionAdditive=z;(this||p)._setIdentity=w;(this||p)._origIndex=3;(this||p)._addIndex=4;(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0;(this||p).useCount=0;(this||p).referenceCount=0}function qda(u,z,t){t=t||Uo.parseTrackName(z);(this||p)._targetGroup=u;(this||p)._bindings=
u.subscribe_(z,t)}function Uo(u,z,t){(this||p).path=z;(this||p).parsedPath=t||Uo.parseTrackName(z);(this||p).node=Uo.findNode(u,(this||p).parsedPath.nodeName)||u;(this||p).rootNode=u}function rda(){(this||p).uuid=Kh.generateUUID();(this||p)._objects=Array.prototype.slice.call(arguments);(this||p).nCachedObjects_=0;var u={};(this||p)._indicesByUUID=u;for(var z=0,t=arguments.length;z!==t;++z)u[arguments[z].uuid]=z;(this||p)._paths=[];(this||p)._parsedPaths=[];(this||p)._bindings=[];(this||p)._bindingsIndicesByPath=
{};var w=this||p;(this||p).stats={objects:{get total(){return w._objects.length},get inUse(){return(this||p).total-w.nCachedObjects_}},get bindingsPerObject(){return w._bindings.length}}}function tZ(u){(this||p)._root=u;this._initMemoryManager();(this||p)._accuIndex=0;(this||p).time=0;(this||p).timeScale=1}function uZ(u,z,t){vr.call(this||p,u,z);(this||p).meshPerAttribute=t||1}function vZ(u,z,t,w,C){(this||p).buffer=u;(this||p).type=z;(this||p).itemSize=t;(this||p).elementSize=w;(this||p).count=C;
(this||p).version=0}function wZ(u,z,t,w){(this||p).ray=new HF(u,z);(this||p).near=t||0;(this||p).far=w||Infinity;(this||p).camera=null;(this||p).layers=new RY;(this||p).params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties((this||p).params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return(this||p).Points}}})}function sda(u,z){return u.distance-z.distance}function xZ(u,z,t,w){u.layers.test(z.layers)&&
u.raycast(z,t);if(!0===w){u=u.children;w=0;for(var C=u.length;w<C;w++)xZ(u[w],z,t,!0)}}function AJ(u){F.call(this||p);(this||p).material=u;(this||p).render=function(){};(this||p).hasPositions=!1;(this||p).hasNormals=!1;(this||p).hasColors=!1;(this||p).hasUvs=!1;(this||p).positionArray=null;(this||p).normalArray=null;(this||p).colorArray=null;(this||p).uvArray=null;(this||p).count=0}function tda(u){var z=[];u&&u.isBone&&z.push(u);for(var t=0;t<u.children.length;t++)z.push.apply(z,tda(u.children[t]));
return z}function km(u,z,t,w,C,G,M){xQ.set(C,G,M).unproject(w);u=z[u];if(void 0!==u)for(t=t.getAttribute("position"),z=0,w=u.length;z<w;z++)t.setXYZ(u[z],xQ.x,xQ.y,xQ.z)}function uda(u){u=new y(3*hw,3*hw,u);u.texture.mapping=306;u.texture.name="PMREM.cubeUv";u.scissorTest=!0;return u}function yQ(u,z,t,w,C){u.viewport.set(z,t,w,C);u.scissor.set(z,t,w,C)}function vda(){var u=new Je(1,1);return new Px({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:u},inputEncoding:{value:iw[3E3]},
outputEncoding:{value:iw[3E3]}},vertexShader:yZ(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+zZ()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function wda(){return new Px({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:iw[3E3]},outputEncoding:{value:iw[3E3]}},vertexShader:yZ(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+zZ()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function yZ(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}
function zZ(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}
function xda(u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");To.call(this||p,u);(this||p).type="catmullrom";(this||p).closed=!0}function yda(u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");To.call(this||p,u);(this||p).type="catmullrom"}function AZ(u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");To.call(this||p,u);(this||p).type="catmullrom"}void 0===Number.EPSILON&&
(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(u){return"number"===typeof u&&isFinite(u)&&Math.floor(u)===u});void 0===Math.sign&&(Math.sign=function(u){return 0>u?-1:0<u?1:+u});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&(Object.assign=function(u){if(void 0===u||null===u)throw new TypeError("Cannot convert undefined or null to object");
for(var z=Object(u),t=1;t<arguments.length;t++){var w=arguments[t];if(void 0!==w&&null!==w)for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(z[C]=w[C])}return z});Object.assign(d.prototype,{addEventListener:function(u,z){void 0===(this||p)._listeners&&((this||p)._listeners={});var t=(this||p)._listeners;void 0===t[u]&&(t[u]=[]);-1===t[u].indexOf(z)&&t[u].push(z)},hasEventListener:function(u,z){if(void 0===(this||p)._listeners)return!1;var t=(this||p)._listeners;return void 0!==t[u]&&-1!==
t[u].indexOf(z)},removeEventListener:function(u,z){void 0!==(this||p)._listeners&&(u=(this||p)._listeners[u],void 0!==u&&(z=u.indexOf(z),-1!==z&&u.splice(z,1)))},dispatchEvent:function(u){if(void 0!==(this||p)._listeners){var z=(this||p)._listeners[u.type];if(void 0!==z){u.target=this||p;z=z.slice(0);for(var t=0,w=z.length;t<w;t++)z[t].call(this||p,u)}}}});for(var to=[],BJ=0;256>BJ;BJ++)to[BJ]=(16>BJ?"0":"")+BJ.toString(16);var zQ=1234567,Kh={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var u=
4294967295*Math.random()|0,z=4294967295*Math.random()|0,t=4294967295*Math.random()|0,w=4294967295*Math.random()|0;return(to[u&255]+to[u>>8&255]+to[u>>16&255]+to[u>>24&255]+"-"+to[z&255]+to[z>>8&255]+"-"+to[z>>16&15|64]+to[z>>24&255]+"-"+to[t&63|128]+to[t>>8&255]+"-"+to[t>>16&255]+to[t>>24&255]+to[w&255]+to[w>>8&255]+to[w>>16&255]+to[w>>24&255]).toUpperCase()},clamp:function(u,z,t){return Math.max(z,Math.min(t,u))},euclideanModulo:function(u,z){return(u%z+z)%z},mapLinear:function(u,z,t,w,C){return w+
(u-z)*(C-w)/(t-z)},lerp:function(u,z,t){return(1-t)*u+t*z},smoothstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*(3-2*u)},smootherstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*u*(u*(6*u-15)+10)},randInt:function(u,z){return u+Math.floor(Math.random()*(z-u+1))},randFloat:function(u,z){return u+Math.random()*(z-u)},randFloatSpread:function(u){return u*(.5-Math.random())},seededRandom:function(u){void 0!==u&&(zQ=u%2147483647);zQ=16807*
zQ%2147483647;return(zQ-1)/2147483646},degToRad:function(u){return u*Kh.DEG2RAD},radToDeg:function(u){return u*Kh.RAD2DEG},isPowerOfTwo:function(u){return 0===(u&u-1)&&0!==u},ceilPowerOfTwo:function(u){return Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},floorPowerOfTwo:function(u){return Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},setQuaternionFromProperEuler:function(u,z,t,w,C){var G=Math.cos,M=Math.sin,Q=G(t/2);t=M(t/2);var X=G((z+w)/2),T=M((z+w)/2),fa=G((z-w)/2),oa=M((z-w)/2);G=G((w-z)/2);z=
M((w-z)/2);switch(C){case "XYX":u.set(Q*T,t*fa,t*oa,Q*X);break;case "YZY":u.set(t*oa,Q*T,t*fa,Q*X);break;case "ZXZ":u.set(t*fa,t*oa,Q*T,Q*X);break;case "XZX":u.set(Q*T,t*z,t*G,Q*X);break;case "YXY":u.set(t*G,Q*T,t*z,Q*X);break;case "ZYZ":u.set(t*z,t*G,Q*T,Q*X);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+C)}}},Je=function(){function u(t,w){void 0===t&&(t=0);void 0===w&&(w=0);Object.defineProperty(this||p,"isVector2",{value:!0});(this||
p).x=t;(this||p).y=w}var z=u.prototype;z.set=function(t,w){(this||p).x=t;(this||p).y=w;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||p).y=t;return this||p};z.setComponent=function(t,w){switch(t){case 0:(this||p).x=w;break;case 1:(this||p).y=w;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||
p).y;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;return this||p};z.add=function(t,w){if(void 0!==w)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,w);(this||p).x+=t.x;(this||p).y+=t.y;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;return this||p};z.addVectors=function(t,
w){(this||p).x=t.x+w.x;(this||p).y=t.y+w.y;return this||p};z.addScaledVector=function(t,w){(this||p).x+=t.x*w;(this||p).y+=t.y*w;return this||p};z.sub=function(t,w){if(void 0!==w)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,w);(this||p).x-=t.x;(this||p).y-=t.y;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;return this||p};z.subVectors=function(t,w){(this||p).x=t.x-w.x;(this||p).y=t.y-w.y;return this||
p};z.multiply=function(t){(this||p).x*=t.x;(this||p).y*=t.y;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;return this||p};z.divide=function(t){(this||p).x/=t.x;(this||p).y/=t.y;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.applyMatrix3=function(t){var w=(this||p).x,C=(this||p).y;t=t.elements;(this||p).x=t[0]*w+t[3]*C+t[6];(this||p).y=t[1]*w+t[4]*C+t[7];return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||
p).y,t.y);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);return this||p};z.clamp=function(t,w){(this||p).x=Math.max(t.x,Math.min(w.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(w.y,(this||p).y));return this||p};z.clampScalar=function(t,w){(this||p).x=Math.max(t,Math.min(w,(this||p).x));(this||p).y=Math.max(t,Math.min(w,(this||p).y));return this||p};z.clampLength=function(t,w){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,
Math.min(w,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);
return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y};z.cross=function(t){return(this||p).x*t.y-(this||p).y*t.x};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)};z.normalize=function(){return this.divideScalar(this.length()||
1)};z.angle=function(){return Math.atan2(-(this||p).y,-(this||p).x)+Math.PI};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var w=(this||p).x-t.x;t=(this||p).y-t.y;return w*w+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,w){(this||p).x+=(t.x-(this||p).x)*w;(this||p).y+=(t.y-(this||p).y)*w;return this||p};z.lerpVectors=
function(t,w,C){(this||p).x=t.x+(w.x-t.x)*C;(this||p).y=t.y+(w.y-t.y)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y};z.fromArray=function(t,w){void 0===w&&(w=0);(this||p).x=t[w];(this||p).y=t[w+1];return this||p};z.toArray=function(t,w){void 0===t&&(t=[]);void 0===w&&(w=0);t[w]=(this||p).x;t[w+1]=(this||p).y;return t};z.fromBufferAttribute=function(t,w,C){void 0!==C&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");(this||p).x=
t.getX(w);(this||p).y=t.getY(w);return this||p};z.rotateAround=function(t,w){var C=Math.cos(w);w=Math.sin(w);var G=(this||p).x-t.x,M=(this||p).y-t.y;(this||p).x=G*C-M*w+t.x;(this||p).y=G*w+M*C+t.y;return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).x},set:function(t){(this||p).x=t}},{key:"height",get:function(){return(this||p).y},set:function(t){(this||p).y=t}}]);return u}(),Cp=function(){function u(){Object.defineProperty(this||
p,"isMatrix3",{value:!0});(this||p).elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,w,C,G,M,Q,X,T,fa){var oa=(this||p).elements;oa[0]=t;oa[1]=G;oa[2]=X;oa[3]=w;oa[4]=M;oa[5]=T;oa[6]=C;oa[7]=Q;oa[8]=fa;return this||p};z.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this||p};z.clone=function(){return(new (this||p).constructor).fromArray((this||p).elements)};z.copy=
function(t){var w=(this||p).elements;t=t.elements;w[0]=t[0];w[1]=t[1];w[2]=t[2];w[3]=t[3];w[4]=t[4];w[5]=t[5];w[6]=t[6];w[7]=t[7];w[8]=t[8];return this||p};z.extractBasis=function(t,w,C){t.setFromMatrix3Column(this||p,0);w.setFromMatrix3Column(this||p,1);C.setFromMatrix3Column(this||p,2);return this||p};z.setFromMatrix4=function(t){t=t.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this||p};z.multiply=function(t){return this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,
this||p)};z.multiplyMatrices=function(t,w){var C=t.elements,G=w.elements;w=(this||p).elements;t=C[0];var M=C[3],Q=C[6],X=C[1],T=C[4],fa=C[7],oa=C[2],Ga=C[5];C=C[8];var Xa=G[0],Wa=G[3],tb=G[6],mb=G[1],Kc=G[4],ic=G[7],Lc=G[2],vc=G[5];G=G[8];w[0]=t*Xa+M*mb+Q*Lc;w[3]=t*Wa+M*Kc+Q*vc;w[6]=t*tb+M*ic+Q*G;w[1]=X*Xa+T*mb+fa*Lc;w[4]=X*Wa+T*Kc+fa*vc;w[7]=X*tb+T*ic+fa*G;w[2]=oa*Xa+Ga*mb+C*Lc;w[5]=oa*Wa+Ga*Kc+C*vc;w[8]=oa*tb+Ga*ic+C*G;return this||p};z.multiplyScalar=function(t){var w=(this||p).elements;w[0]*=
t;w[3]*=t;w[6]*=t;w[1]*=t;w[4]*=t;w[7]*=t;w[2]*=t;w[5]*=t;w[8]*=t;return this||p};z.determinant=function(){var t=(this||p).elements,w=t[0],C=t[1],G=t[2],M=t[3],Q=t[4],X=t[5],T=t[6],fa=t[7];t=t[8];return w*Q*t-w*X*fa-C*M*t+C*X*T+G*M*fa-G*Q*T};z.invert=function(){var t=(this||p).elements,w=t[0],C=t[1],G=t[2],M=t[3],Q=t[4],X=t[5],T=t[6],fa=t[7],oa=t[8],Ga=oa*Q-X*fa,Xa=X*T-oa*M,Wa=fa*M-Q*T,tb=w*Ga+C*Xa+G*Wa;if(0===tb)return this.set(0,0,0,0,0,0,0,0,0);tb=1/tb;t[0]=Ga*tb;t[1]=(G*fa-oa*C)*tb;t[2]=(X*C-
G*Q)*tb;t[3]=Xa*tb;t[4]=(oa*w-G*T)*tb;t[5]=(G*M-X*w)*tb;t[6]=Wa*tb;t[7]=(C*T-fa*w)*tb;t[8]=(Q*w-C*M)*tb;return this||p};z.transpose=function(){var t=(this||p).elements;var w=t[1];t[1]=t[3];t[3]=w;w=t[2];t[2]=t[6];t[6]=w;w=t[5];t[5]=t[7];t[7]=w;return this||p};z.getNormalMatrix=function(t){return this.setFromMatrix4(t).copy(this||p).invert().transpose()};z.transposeIntoArray=function(t){var w=(this||p).elements;t[0]=w[0];t[1]=w[3];t[2]=w[6];t[3]=w[1];t[4]=w[4];t[5]=w[7];t[6]=w[2];t[7]=w[5];t[8]=w[8];
return this||p};z.setUvTransform=function(t,w,C,G,M,Q,X){var T=Math.cos(M);M=Math.sin(M);this.set(C*T,C*M,-C*(T*Q+M*X)+Q+t,-G*M,G*T,-G*(-M*Q+T*X)+X+w,0,0,1);return this||p};z.scale=function(t,w){var C=(this||p).elements;C[0]*=t;C[3]*=t;C[6]*=t;C[1]*=w;C[4]*=w;C[7]*=w;return this||p};z.rotate=function(t){var w=Math.cos(t);t=Math.sin(t);var C=(this||p).elements,G=C[0],M=C[3],Q=C[6],X=C[1],T=C[4],fa=C[7];C[0]=w*G+t*X;C[3]=w*M+t*T;C[6]=w*Q+t*fa;C[1]=-t*G+w*X;C[4]=-t*M+w*T;C[7]=-t*Q+w*fa;return this||
p};z.translate=function(t,w){var C=(this||p).elements;C[0]+=t*C[2];C[3]+=t*C[5];C[6]+=t*C[8];C[1]+=w*C[2];C[4]+=w*C[5];C[7]+=w*C[8];return this||p};z.equals=function(t){var w=(this||p).elements;t=t.elements;for(var C=0;9>C;C++)if(w[C]!==t[C])return!1;return!0};z.fromArray=function(t,w){void 0===w&&(w=0);for(var C=0;9>C;C++)(this||p).elements[C]=t[C+w];return this||p};z.toArray=function(t,w){void 0===t&&(t=[]);void 0===w&&(w=0);var C=(this||p).elements;t[w]=C[0];t[w+1]=C[1];t[w+2]=C[2];t[w+3]=C[3];
t[w+4]=C[4];t[w+5]=C[5];t[w+6]=C[6];t[w+7]=C[7];t[w+8]=C[8];return t};return u}(),IF,DC={getDataURL:function(u){if(/^data:/i.test(u.src)||"undefined"==typeof HTMLCanvasElement)return u.src;if(!(u instanceof HTMLCanvasElement)){void 0===IF&&(IF=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));IF.width=u.width;IF.height=u.height;var z=IF.getContext("2d");u instanceof ImageData?z.putImageData(u,0,0):z.drawImage(u,0,0,u.width,u.height);u=IF}return 2048<u.width||2048<u.height?u.toDataURL("image/jpeg",
.6):u.toDataURL("image/png")}},Gwa=0;r.DEFAULT_IMAGE=void 0;r.DEFAULT_MAPPING=300;r.prototype=Object.assign(Object.create(d.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){(this||p).matrix.setUvTransform((this||p).offset.x,(this||p).offset.y,(this||p).repeat.x,(this||p).repeat.y,(this||p).rotation,(this||p).center.x,(this||p).center.y)},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).image=u.image;(this||p).mipmaps=
u.mipmaps.slice(0);(this||p).mapping=u.mapping;(this||p).wrapS=u.wrapS;(this||p).wrapT=u.wrapT;(this||p).magFilter=u.magFilter;(this||p).minFilter=u.minFilter;(this||p).anisotropy=u.anisotropy;(this||p).format=u.format;(this||p).internalFormat=u.internalFormat;(this||p).type=u.type;(this||p).offset.copy(u.offset);(this||p).repeat.copy(u.repeat);(this||p).center.copy(u.center);(this||p).rotation=u.rotation;(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrix.copy(u.matrix);(this||p).generateMipmaps=
u.generateMipmaps;(this||p).premultiplyAlpha=u.premultiplyAlpha;(this||p).flipY=u.flipY;(this||p).unpackAlignment=u.unpackAlignment;(this||p).encoding=u.encoding;return this||p},toJSON:function(u){var z=void 0===u||"string"===typeof u;if(!z&&void 0!==u.textures[(this||p).uuid])return u.textures[(this||p).uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:(this||p).uuid,name:(this||p).name,mapping:(this||p).mapping,repeat:[(this||p).repeat.x,(this||p).repeat.y],offset:[(this||
p).offset.x,(this||p).offset.y],center:[(this||p).center.x,(this||p).center.y],rotation:(this||p).rotation,wrap:[(this||p).wrapS,(this||p).wrapT],format:(this||p).format,type:(this||p).type,encoding:(this||p).encoding,minFilter:(this||p).minFilter,magFilter:(this||p).magFilter,anisotropy:(this||p).anisotropy,flipY:(this||p).flipY,premultiplyAlpha:(this||p).premultiplyAlpha,unpackAlignment:(this||p).unpackAlignment};if(void 0!==(this||p).image){var w=(this||p).image;void 0===w.uuid&&(w.uuid=Kh.generateUUID());
if(!z&&void 0===u.images[w.uuid]){if(Array.isArray(w)){var C=[];for(var G=0,M=w.length;G<M;G++)w[G].isDataTexture?C.push(v(w[G].image)):C.push(v(w[G]))}else C=v(w);u.images[w.uuid]={uuid:w.uuid,url:C}}t.image=w.uuid}z||(u.textures[(this||p).uuid]=t);return t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(u){if(300!==(this||p).mapping)return u;u.applyMatrix3((this||p).matrix);if(0>u.x||1<u.x)switch((this||p).wrapS){case 1E3:u.x-=Math.floor(u.x);break;case 1001:u.x=0>
u.x?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(0>u.y||1<u.y)switch((this||p).wrapT){case 1E3:u.y-=Math.floor(u.y);break;case 1001:u.y=0>u.y?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}(this||p).flipY&&(u.y=1-u.y);return u}});Object.defineProperty(r.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});var Gk=function(){function u(t,w,C,G){void 0===t&&(t=0);void 0===w&&(w=0);
void 0===C&&(C=0);void 0===G&&(G=1);Object.defineProperty(this||p,"isVector4",{value:!0});(this||p).x=t;(this||p).y=w;(this||p).z=C;(this||p).w=G}var z=u.prototype;z.set=function(t,w,C,G){(this||p).x=t;(this||p).y=w;(this||p).z=C;(this||p).w=G;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;(this||p).w=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};
z.setW=function(t){(this||p).w=t;return this||p};z.setComponent=function(t,w){switch(t){case 0:(this||p).x=w;break;case 1:(this||p).y=w;break;case 2:(this||p).z=w;break;case 3:(this||p).w=w;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;case 3:return(this||p).w;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||
p).x,(this||p).y,(this||p).z,(this||p).w)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;(this||p).w=void 0!==t.w?t.w:1;return this||p};z.add=function(t,w){if(void 0!==w)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,w);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;(this||p).w+=t.w;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;(this||p).z+=t;(this||p).w+=t;return this||
p};z.addVectors=function(t,w){(this||p).x=t.x+w.x;(this||p).y=t.y+w.y;(this||p).z=t.z+w.z;(this||p).w=t.w+w.w;return this||p};z.addScaledVector=function(t,w){(this||p).x+=t.x*w;(this||p).y+=t.y*w;(this||p).z+=t.z*w;(this||p).w+=t.w*w;return this||p};z.sub=function(t,w){if(void 0!==w)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,w);(this||p).x-=t.x;(this||p).y-=t.y;(this||p).z-=t.z;(this||p).w-=t.w;return this||p};z.subScalar=
function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;(this||p).w-=t;return this||p};z.subVectors=function(t,w){(this||p).x=t.x-w.x;(this||p).y=t.y-w.y;(this||p).z=t.z-w.z;(this||p).w=t.w-w.w;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;(this||p).w*=t;return this||p};z.applyMatrix4=function(t){var w=(this||p).x,C=(this||p).y,G=(this||p).z,M=(this||p).w;t=t.elements;(this||p).x=t[0]*w+t[4]*C+t[8]*G+t[12]*M;(this||p).y=t[1]*w+t[5]*C+t[9]*G+t[13]*M;(this||
p).z=t[2]*w+t[6]*C+t[10]*G+t[14]*M;(this||p).w=t[3]*w+t[7]*C+t[11]*G+t[15]*M;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.setAxisAngleFromQuaternion=function(t){(this||p).w=2*Math.acos(t.w);var w=Math.sqrt(1-t.w*t.w);1E-4>w?((this||p).x=1,(this||p).y=0,(this||p).z=0):((this||p).x=t.x/w,(this||p).y=t.y/w,(this||p).z=t.z/w);return this||p};z.setAxisAngleFromRotationMatrix=function(t){t=t.elements;var w=t[0];var C=t[4];var G=t[8],M=t[1],Q=t[5],X=t[9];var T=t[2];var fa=
t[6];var oa=t[10];if(.01>Math.abs(C-M)&&.01>Math.abs(G-T)&&.01>Math.abs(X-fa)){if(.1>Math.abs(C+M)&&.1>Math.abs(G+T)&&.1>Math.abs(X+fa)&&.1>Math.abs(w+Q+oa-3))return this.set(1,0,0,0),this||p;t=Math.PI;w=(w+1)/2;Q=(Q+1)/2;oa=(oa+1)/2;C=(C+M)/4;G=(G+T)/4;X=(X+fa)/4;w>Q&&w>oa?.01>w?(fa=0,C=T=.707106781):(fa=Math.sqrt(w),T=C/fa,C=G/fa):Q>oa?.01>Q?(fa=.707106781,T=0,C=.707106781):(T=Math.sqrt(Q),fa=C/T,C=X/T):.01>oa?(T=fa=.707106781,C=0):(C=Math.sqrt(oa),fa=G/C,T=X/C);this.set(fa,T,C,t);return this||
p}t=Math.sqrt((fa-X)*(fa-X)+(G-T)*(G-T)+(M-C)*(M-C));.001>Math.abs(t)&&(t=1);(this||p).x=(fa-X)/t;(this||p).y=(G-T)/t;(this||p).z=(M-C)/t;(this||p).w=Math.acos((w+Q+oa-1)/2);return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);(this||p).w=Math.min((this||p).w,t.w);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,
t.z);(this||p).w=Math.max((this||p).w,t.w);return this||p};z.clamp=function(t,w){(this||p).x=Math.max(t.x,Math.min(w.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(w.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(w.z,(this||p).z));(this||p).w=Math.max(t.w,Math.min(w.w,(this||p).w));return this||p};z.clampScalar=function(t,w){(this||p).x=Math.max(t,Math.min(w,(this||p).x));(this||p).y=Math.max(t,Math.min(w,(this||p).y));(this||p).z=Math.max(t,Math.min(w,(this||p).z));(this||p).w=Math.max(t,Math.min(w,
(this||p).w));return this||p};z.clampLength=function(t,w){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(w,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||p).z=Math.floor((this||p).z);(this||p).w=Math.floor((this||p).w);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=Math.ceil((this||p).z);(this||p).w=Math.ceil((this||p).w);return this||
p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);(this||p).z=Math.round((this||p).z);(this||p).w=Math.round((this||p).w);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);(this||p).w=0>(this||p).w?Math.ceil((this||p).w):Math.floor((this||p).w);return this||
p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;(this||p).w=-(this||p).w;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+(this||p).z*t.z+(this||p).w*t.w};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w)};z.manhattanLength=
function(){return Math.abs((this||p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)+Math.abs((this||p).w)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,w){(this||p).x+=(t.x-(this||p).x)*w;(this||p).y+=(t.y-(this||p).y)*w;(this||p).z+=(t.z-(this||p).z)*w;(this||p).w+=(t.w-(this||p).w)*w;return this||p};z.lerpVectors=function(t,w,C){(this||p).x=t.x+(w.x-t.x)*C;(this||p).y=t.y+(w.y-t.y)*C;(this||
p).z=t.z+(w.z-t.z)*C;(this||p).w=t.w+(w.w-t.w)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z&&t.w===(this||p).w};z.fromArray=function(t,w){void 0===w&&(w=0);(this||p).x=t[w];(this||p).y=t[w+1];(this||p).z=t[w+2];(this||p).w=t[w+3];return this||p};z.toArray=function(t,w){void 0===t&&(t=[]);void 0===w&&(w=0);t[w]=(this||p).x;t[w+1]=(this||p).y;t[w+2]=(this||p).z;t[w+3]=(this||p).w;return t};z.fromBufferAttribute=function(t,w,C){void 0!==C&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");
(this||p).x=t.getX(w);(this||p).y=t.getY(w);(this||p).z=t.getZ(w);(this||p).w=t.getW(w);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();(this||p).w=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).z},set:function(t){(this||p).z=t}},{key:"height",get:function(){return(this||p).w},set:function(t){(this||p).w=t}}]);return u}();y.prototype=Object.assign(Object.create(d.prototype),{constructor:y,isWebGLRenderTarget:!0,
setSize:function(u,z){if((this||p).width!==u||(this||p).height!==z)(this||p).width=u,(this||p).height=z,(this||p).texture.image.width=u,(this||p).texture.image.height=z,this.dispose();(this||p).viewport.set(0,0,u,z);(this||p).scissor.set(0,0,u,z)},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).width=u.width;(this||p).height=u.height;(this||p).viewport.copy(u.viewport);(this||p).texture=u.texture.clone();(this||p).depthBuffer=u.depthBuffer;(this||p).stencilBuffer=
u.stencilBuffer;(this||p).depthTexture=u.depthTexture;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});A.prototype=Object.assign(Object.create(y.prototype),{constructor:A,isWebGLMultisampleRenderTarget:!0,copy:function(u){y.prototype.copy.call(this||p,u);(this||p).samples=u.samples;return this||p}});var So=function(){function u(t,w,C,G){void 0===t&&(t=0);void 0===w&&(w=0);void 0===C&&(C=0);void 0===G&&(G=1);Object.defineProperty(this||p,"isQuaternion",{value:!0});(this||
p)._x=t;(this||p)._y=w;(this||p)._z=C;(this||p)._w=G}u.slerp=function(t,w,C,G){return C.copy(t).slerp(w,G)};u.slerpFlat=function(t,w,C,G,M,Q,X){var T=C[G+0],fa=C[G+1],oa=C[G+2];C=C[G+3];G=M[Q+0];var Ga=M[Q+1],Xa=M[Q+2];M=M[Q+3];if(C!==M||T!==G||fa!==Ga||oa!==Xa){Q=1-X;var Wa=T*G+fa*Ga+oa*Xa+C*M,tb=0<=Wa?1:-1,mb=1-Wa*Wa;mb>Number.EPSILON&&(mb=Math.sqrt(mb),Wa=Math.atan2(mb,Wa*tb),Q=Math.sin(Q*Wa)/mb,X=Math.sin(X*Wa)/mb);tb*=X;T=T*Q+G*tb;fa=fa*Q+Ga*tb;oa=oa*Q+Xa*tb;C=C*Q+M*tb;Q===1-X&&(X=1/Math.sqrt(T*
T+fa*fa+oa*oa+C*C),T*=X,fa*=X,oa*=X,C*=X)}t[w]=T;t[w+1]=fa;t[w+2]=oa;t[w+3]=C};u.multiplyQuaternionsFlat=function(t,w,C,G,M,Q){var X=C[G],T=C[G+1],fa=C[G+2];C=C[G+3];G=M[Q];var oa=M[Q+1],Ga=M[Q+2];M=M[Q+3];t[w]=X*M+C*G+T*Ga-fa*oa;t[w+1]=T*M+C*oa+fa*G-X*Ga;t[w+2]=fa*M+C*Ga+X*oa-T*G;t[w+3]=C*M-X*G-T*oa-fa*Ga;return t};var z=u.prototype;z.set=function(t,w,C,G){(this||p)._x=t;(this||p)._y=w;(this||p)._z=C;(this||p)._w=G;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||
p)._x,(this||p)._y,(this||p)._z,(this||p)._w)};z.copy=function(t){(this||p)._x=t.x;(this||p)._y=t.y;(this||p)._z=t.z;(this||p)._w=t.w;this._onChangeCallback();return this||p};z.setFromEuler=function(t,w){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var C=t._x,G=t._y,M=t._z;t=t._order;var Q=Math.cos,X=Math.sin,T=Q(C/2),fa=Q(G/2);Q=Q(M/2);C=X(C/2);G=X(G/2);M=X(M/2);switch(t){case "XYZ":(this||p)._x=C*fa*Q+T*G*M;(this||
p)._y=T*G*Q-C*fa*M;(this||p)._z=T*fa*M+C*G*Q;(this||p)._w=T*fa*Q-C*G*M;break;case "YXZ":(this||p)._x=C*fa*Q+T*G*M;(this||p)._y=T*G*Q-C*fa*M;(this||p)._z=T*fa*M-C*G*Q;(this||p)._w=T*fa*Q+C*G*M;break;case "ZXY":(this||p)._x=C*fa*Q-T*G*M;(this||p)._y=T*G*Q+C*fa*M;(this||p)._z=T*fa*M+C*G*Q;(this||p)._w=T*fa*Q-C*G*M;break;case "ZYX":(this||p)._x=C*fa*Q-T*G*M;(this||p)._y=T*G*Q+C*fa*M;(this||p)._z=T*fa*M-C*G*Q;(this||p)._w=T*fa*Q+C*G*M;break;case "YZX":(this||p)._x=C*fa*Q+T*G*M;(this||p)._y=T*G*Q+C*fa*
M;(this||p)._z=T*fa*M-C*G*Q;(this||p)._w=T*fa*Q-C*G*M;break;case "XZY":(this||p)._x=C*fa*Q-T*G*M;(this||p)._y=T*G*Q-C*fa*M;(this||p)._z=T*fa*M+C*G*Q;(this||p)._w=T*fa*Q+C*G*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}!1!==w&&this._onChangeCallback();return this||p};z.setFromAxisAngle=function(t,w){w/=2;var C=Math.sin(w);(this||p)._x=t.x*C;(this||p)._y=t.y*C;(this||p)._z=t.z*C;(this||p)._w=Math.cos(w);this._onChangeCallback();return this||p};z.setFromRotationMatrix=
function(t){var w=t.elements,C=w[0];t=w[4];var G=w[8],M=w[1],Q=w[5],X=w[9],T=w[2],fa=w[6];w=w[10];var oa=C+Q+w;0<oa?(C=.5/Math.sqrt(oa+1),(this||p)._w=.25/C,(this||p)._x=(fa-X)*C,(this||p)._y=(G-T)*C,(this||p)._z=(M-t)*C):C>Q&&C>w?(C=2*Math.sqrt(1+C-Q-w),(this||p)._w=(fa-X)/C,(this||p)._x=.25*C,(this||p)._y=(t+M)/C,(this||p)._z=(G+T)/C):Q>w?(C=2*Math.sqrt(1+Q-C-w),(this||p)._w=(G-T)/C,(this||p)._x=(t+M)/C,(this||p)._y=.25*C,(this||p)._z=(X+fa)/C):(C=2*Math.sqrt(1+w-C-Q),(this||p)._w=(M-t)/C,(this||
p)._x=(G+T)/C,(this||p)._y=(X+fa)/C,(this||p)._z=.25*C);this._onChangeCallback();return this||p};z.setFromUnitVectors=function(t,w){var C=t.dot(w)+1;1E-6>C?(C=0,Math.abs(t.x)>Math.abs(t.z)?((this||p)._x=-t.y,(this||p)._y=t.x,(this||p)._z=0):((this||p)._x=0,(this||p)._y=-t.z,(this||p)._z=t.y)):((this||p)._x=t.y*w.z-t.z*w.y,(this||p)._y=t.z*w.x-t.x*w.z,(this||p)._z=t.x*w.y-t.y*w.x);(this||p)._w=C;return this.normalize()};z.angleTo=function(t){return 2*Math.acos(Math.abs(Kh.clamp(this.dot(t),-1,1)))};
z.rotateTowards=function(t,w){var C=this.angleTo(t);if(0===C)return this||p;this.slerp(t,Math.min(1,w/C));return this||p};z.identity=function(){return this.set(0,0,0,1)};z.invert=function(){return this.conjugate()};z.conjugate=function(){(this||p)._x*=-1;(this||p)._y*=-1;(this||p)._z*=-1;this._onChangeCallback();return this||p};z.dot=function(t){return(this||p)._x*t._x+(this||p)._y*t._y+(this||p)._z*t._z+(this||p)._w*t._w};z.lengthSq=function(){return(this||p)._x*(this||p)._x+(this||p)._y*(this||
p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w};z.length=function(){return Math.sqrt((this||p)._x*(this||p)._x+(this||p)._y*(this||p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w)};z.normalize=function(){var t=this.length();0===t?((this||p)._x=0,(this||p)._y=0,(this||p)._z=0,(this||p)._w=1):(t=1/t,(this||p)._x*=t,(this||p)._y*=t,(this||p)._z*=t,(this||p)._w*=t);this._onChangeCallback();return this||p};z.multiply=function(t,w){return void 0!==w?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
this.multiplyQuaternions(t,w)):this.multiplyQuaternions(this||p,t)};z.premultiply=function(t){return this.multiplyQuaternions(t,this||p)};z.multiplyQuaternions=function(t,w){var C=t._x,G=t._y,M=t._z;t=t._w;var Q=w._x,X=w._y,T=w._z;w=w._w;(this||p)._x=C*w+t*Q+G*T-M*X;(this||p)._y=G*w+t*X+M*Q-C*T;(this||p)._z=M*w+t*T+C*X-G*Q;(this||p)._w=t*w-C*Q-G*X-M*T;this._onChangeCallback();return this||p};z.slerp=function(t,w){if(0===w)return this||p;if(1===w)return this.copy(t);var C=(this||p)._x,G=(this||p)._y,
M=(this||p)._z,Q=(this||p)._w,X=Q*t._w+C*t._x+G*t._y+M*t._z;0>X?((this||p)._w=-t._w,(this||p)._x=-t._x,(this||p)._y=-t._y,(this||p)._z=-t._z,X=-X):this.copy(t);if(1<=X)return(this||p)._w=Q,(this||p)._x=C,(this||p)._y=G,(this||p)._z=M,this||p;t=1-X*X;if(t<=Number.EPSILON)return X=1-w,(this||p)._w=X*Q+w*(this||p)._w,(this||p)._x=X*C+w*(this||p)._x,(this||p)._y=X*G+w*(this||p)._y,(this||p)._z=X*M+w*(this||p)._z,this.normalize(),this._onChangeCallback(),this||p;t=Math.sqrt(t);var T=Math.atan2(t,X);X=
Math.sin((1-w)*T)/t;w=Math.sin(w*T)/t;(this||p)._w=Q*X+(this||p)._w*w;(this||p)._x=C*X+(this||p)._x*w;(this||p)._y=G*X+(this||p)._y*w;(this||p)._z=M*X+(this||p)._z*w;this._onChangeCallback();return this||p};z.equals=function(t){return t._x===(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._w===(this||p)._w};z.fromArray=function(t,w){void 0===w&&(w=0);(this||p)._x=t[w];(this||p)._y=t[w+1];(this||p)._z=t[w+2];(this||p)._w=t[w+3];this._onChangeCallback();return this||p};z.toArray=function(t,
w){void 0===t&&(t=[]);void 0===w&&(w=0);t[w]=(this||p)._x;t[w+1]=(this||p)._y;t[w+2]=(this||p)._z;t[w+3]=(this||p)._w;return t};z.fromBufferAttribute=function(t,w){(this||p)._x=t.getX(w);(this||p)._y=t.getY(w);(this||p)._z=t.getZ(w);(this||p)._w=t.getW(w);return this||p};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},set:function(t){(this||p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||
p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||p)._z=t;this._onChangeCallback()}},{key:"w",get:function(){return(this||p)._w},set:function(t){(this||p)._w=t;this._onChangeCallback()}}]);return u}(),kc=function(){function u(t,w,C){void 0===t&&(t=0);void 0===w&&(w=0);void 0===C&&(C=0);Object.defineProperty(this||p,"isVector3",{value:!0});(this||p).x=t;(this||p).y=w;(this||p).z=C}var z=u.prototype;z.set=function(t,w,
C){void 0===C&&(C=(this||p).z);(this||p).x=t;(this||p).y=w;(this||p).z=C;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};z.setComponent=function(t,w){switch(t){case 0:(this||p).x=w;break;case 1:(this||p).y=w;break;case 2:(this||p).z=w;break;default:throw Error("index is out of range: "+t);}return this||
p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y,(this||p).z)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;return this||p};z.add=function(t,w){if(void 0!==w)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,
w);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;(this||p).z+=t;return this||p};z.addVectors=function(t,w){(this||p).x=t.x+w.x;(this||p).y=t.y+w.y;(this||p).z=t.z+w.z;return this||p};z.addScaledVector=function(t,w){(this||p).x+=t.x*w;(this||p).y+=t.y*w;(this||p).z+=t.z*w;return this||p};z.sub=function(t,w){if(void 0!==w)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(t,w);(this||p).x-=t.x;(this||p).y-=t.y;(this||p).z-=t.z;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;return this||p};z.subVectors=function(t,w){(this||p).x=t.x-w.x;(this||p).y=t.y-w.y;(this||p).z=t.z-w.z;return this||p};z.multiply=function(t,w){if(void 0!==w)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,w);(this||p).x*=t.x;(this||p).y*=t.y;(this||
p).z*=t.z;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;return this||p};z.multiplyVectors=function(t,w){(this||p).x=t.x*w.x;(this||p).y=t.y*w.y;(this||p).z=t.z*w.z;return this||p};z.applyEuler=function(t){t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(zda.setFromEuler(t))};z.applyAxisAngle=function(t,w){return this.applyQuaternion(zda.setFromAxisAngle(t,
w))};z.applyMatrix3=function(t){var w=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;(this||p).x=t[0]*w+t[3]*C+t[6]*G;(this||p).y=t[1]*w+t[4]*C+t[7]*G;(this||p).z=t[2]*w+t[5]*C+t[8]*G;return this||p};z.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()};z.applyMatrix4=function(t){var w=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;var M=1/(t[3]*w+t[7]*C+t[11]*G+t[15]);(this||p).x=(t[0]*w+t[4]*C+t[8]*G+t[12])*M;(this||p).y=(t[1]*w+t[5]*C+t[9]*G+t[13])*M;(this||p).z=
(t[2]*w+t[6]*C+t[10]*G+t[14])*M;return this||p};z.applyQuaternion=function(t){var w=(this||p).x,C=(this||p).y,G=(this||p).z,M=t.x,Q=t.y,X=t.z;t=t.w;var T=t*w+Q*G-X*C,fa=t*C+X*w-M*G,oa=t*G+M*C-Q*w;w=-M*w-Q*C-X*G;(this||p).x=T*t+w*-M+fa*-X-oa*-Q;(this||p).y=fa*t+w*-Q+oa*-M-T*-X;(this||p).z=oa*t+w*-X+T*-Q-fa*-M;return this||p};z.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)};z.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)};
z.transformDirection=function(t){var w=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;(this||p).x=t[0]*w+t[4]*C+t[8]*G;(this||p).y=t[1]*w+t[5]*C+t[9]*G;(this||p).z=t[2]*w+t[6]*C+t[10]*G;return this.normalize()};z.divide=function(t){(this||p).x/=t.x;(this||p).y/=t.y;(this||p).z/=t.z;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);return this||
p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,t.z);return this||p};z.clamp=function(t,w){(this||p).x=Math.max(t.x,Math.min(w.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(w.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(w.z,(this||p).z));return this||p};z.clampScalar=function(t,w){(this||p).x=Math.max(t,Math.min(w,(this||p).x));(this||p).y=Math.max(t,Math.min(w,(this||p).y));(this||p).z=Math.max(t,Math.min(w,
(this||p).z));return this||p};z.clampLength=function(t,w){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(w,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||p).z=Math.floor((this||p).z);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=Math.ceil((this||p).z);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=
Math.round((this||p).y);(this||p).z=Math.round((this||p).z);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+
(this||p).z*t.z};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,w){(this||p).x+=(t.x-
(this||p).x)*w;(this||p).y+=(t.y-(this||p).y)*w;(this||p).z+=(t.z-(this||p).z)*w;return this||p};z.lerpVectors=function(t,w,C){(this||p).x=t.x+(w.x-t.x)*C;(this||p).y=t.y+(w.y-t.y)*C;(this||p).z=t.z+(w.z-t.z)*C;return this||p};z.cross=function(t,w){return void 0!==w?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,w)):this.crossVectors(this||p,t)};z.crossVectors=function(t,w){var C=t.x,G=t.y;t=t.z;var M=w.x,Q=w.y;w=w.z;
(this||p).x=G*w-t*Q;(this||p).y=t*M-C*w;(this||p).z=C*Q-G*M;return this||p};z.projectOnVector=function(t){var w=t.lengthSq();if(0===w)return this.set(0,0,0);w=t.dot(this||p)/w;return this.copy(t).multiplyScalar(w)};z.projectOnPlane=function(t){BZ.copy(this||p).projectOnVector(t);return this.sub(BZ)};z.reflect=function(t){return this.sub(BZ.copy(t).multiplyScalar(2*this.dot(t)))};z.angleTo=function(t){var w=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===w)return Math.PI/2;t=this.dot(t)/w;return Math.acos(Kh.clamp(t,
-1,1))};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var w=(this||p).x-t.x,C=(this||p).y-t.y;t=(this||p).z-t.z;return w*w+C*C+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)+Math.abs((this||p).z-t.z)};z.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)};z.setFromSphericalCoords=function(t,w,C){var G=Math.sin(w)*t;(this||p).x=G*Math.sin(C);(this||p).y=Math.cos(w)*
t;(this||p).z=G*Math.cos(C);return this||p};z.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)};z.setFromCylindricalCoords=function(t,w,C){(this||p).x=t*Math.sin(w);(this||p).y=C;(this||p).z=t*Math.cos(w);return this||p};z.setFromMatrixPosition=function(t){t=t.elements;(this||p).x=t[12];(this||p).y=t[13];(this||p).z=t[14];return this||p};z.setFromMatrixScale=function(t){var w=this.setFromMatrixColumn(t,0).length(),C=this.setFromMatrixColumn(t,1).length();t=
this.setFromMatrixColumn(t,2).length();(this||p).x=w;(this||p).y=C;(this||p).z=t;return this||p};z.setFromMatrixColumn=function(t,w){return this.fromArray(t.elements,4*w)};z.setFromMatrix3Column=function(t,w){return this.fromArray(t.elements,3*w)};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z};z.fromArray=function(t,w){void 0===w&&(w=0);(this||p).x=t[w];(this||p).y=t[w+1];(this||p).z=t[w+2];return this||p};z.toArray=function(t,w){void 0===t&&(t=[]);void 0===w&&
(w=0);t[w]=(this||p).x;t[w+1]=(this||p).y;t[w+2]=(this||p).z;return t};z.fromBufferAttribute=function(t,w,C){void 0!==C&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");(this||p).x=t.getX(w);(this||p).y=t.getY(w);(this||p).z=t.getZ(w);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();return this||p};return u}(),BZ=new kc,zda=new So,jw=function(){function u(t,w){Object.defineProperty(this||p,"isBox3",
{value:!0});(this||p).min=void 0!==t?t:new kc(Infinity,Infinity,Infinity);(this||p).max=void 0!==w?w:new kc(-Infinity,-Infinity,-Infinity)}var z=u.prototype;z.set=function(t,w){(this||p).min.copy(t);(this||p).max.copy(w);return this||p};z.setFromArray=function(t){for(var w=Infinity,C=Infinity,G=Infinity,M=-Infinity,Q=-Infinity,X=-Infinity,T=0,fa=t.length;T<fa;T+=3){var oa=t[T],Ga=t[T+1],Xa=t[T+2];oa<w&&(w=oa);Ga<C&&(C=Ga);Xa<G&&(G=Xa);oa>M&&(M=oa);Ga>Q&&(Q=Ga);Xa>X&&(X=Xa)}(this||p).min.set(w,C,G);
(this||p).max.set(M,Q,X);return this||p};z.setFromBufferAttribute=function(t){for(var w=Infinity,C=Infinity,G=Infinity,M=-Infinity,Q=-Infinity,X=-Infinity,T=0,fa=t.count;T<fa;T++){var oa=t.getX(T),Ga=t.getY(T),Xa=t.getZ(T);oa<w&&(w=oa);Ga<C&&(C=Ga);Xa<G&&(G=Xa);oa>M&&(M=oa);Ga>Q&&(Q=Ga);Xa>X&&(X=Xa)}(this||p).min.set(w,C,G);(this||p).max.set(M,Q,X);return this||p};z.setFromPoints=function(t){this.makeEmpty();for(var w=0,C=t.length;w<C;w++)this.expandByPoint(t[w]);return this||p};z.setFromCenterAndSize=
function(t,w){w=CJ.copy(w).multiplyScalar(.5);(this||p).min.copy(t).sub(w);(this||p).max.copy(t).add(w);return this||p};z.setFromObject=function(t){this.makeEmpty();return this.expandByObject(t)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=function(){(this||p).min.x=(this||p).min.y=(this||p).min.z=Infinity;(this||p).max.x=(this||p).max.y=(this||p).max.z=-Infinity;return this||
p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y||(this||p).max.z<(this||p).min.z};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new kc);return this.isEmpty()?t.set(0,0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new kc);return this.isEmpty()?t.set(0,0,0):t.subVectors((this||p).max,
(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.expandByObject=function(t){t.updateWorldMatrix(!1,!1);var w=t.geometry;void 0!==w&&(null===w.boundingBox&&w.computeBoundingBox(),CZ.copy(w.boundingBox),CZ.applyMatrix4(t.matrixWorld),this.union(CZ));t=t.children;
w=0;for(var C=t.length;w<C;w++)this.expandByObject(t[w]);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y||t.z<(this||p).min.z||t.z>(this||p).max.z?!1:!0};z.containsBox=function(t){return(this||p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y&&(this||p).min.z<=t.min.z&&t.max.z<=(this||p).max.z};z.getParameter=function(t,w){void 0===w&&(console.warn("THREE.Box3: .getParameter() target is now required"),
w=new kc);return w.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y),(t.z-(this||p).min.z)/((this||p).max.z-(this||p).min.z))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y||t.max.z<(this||p).min.z||t.min.z>(this||p).max.z?!1:!0};z.intersectsSphere=function(t){this.clampPoint(t.center,CJ);return CJ.distanceToSquared(t.center)<=t.radius*t.radius};
z.intersectsPlane=function(t){if(0<t.normal.x){var w=t.normal.x*(this||p).min.x;var C=t.normal.x*(this||p).max.x}else w=t.normal.x*(this||p).max.x,C=t.normal.x*(this||p).min.x;0<t.normal.y?(w+=t.normal.y*(this||p).min.y,C+=t.normal.y*(this||p).max.y):(w+=t.normal.y*(this||p).max.y,C+=t.normal.y*(this||p).min.y);0<t.normal.z?(w+=t.normal.z*(this||p).min.z,C+=t.normal.z*(this||p).max.z):(w+=t.normal.z*(this||p).max.z,C+=t.normal.z*(this||p).min.z);return w<=-t.constant&&C>=-t.constant};z.intersectsTriangle=
function(t){if(this.isEmpty())return!1;this.getCenter(DJ);AQ.subVectors((this||p).max,DJ);JF.subVectors(t.a,DJ);KF.subVectors(t.b,DJ);LF.subVectors(t.c,DJ);sA.subVectors(KF,JF);tA.subVectors(LF,KF);NC.subVectors(JF,LF);t=[0,-sA.z,sA.y,0,-tA.z,tA.y,0,-NC.z,NC.y,sA.z,0,-sA.x,tA.z,0,-tA.x,NC.z,0,-NC.x,-sA.y,sA.x,0,-tA.y,tA.x,0,-NC.y,NC.x,0];if(!E(t,JF,KF,LF,AQ))return!1;t=[1,0,0,0,1,0,0,0,1];if(!E(t,JF,KF,LF,AQ))return!1;BQ.crossVectors(sA,tA);t=[BQ.x,BQ.y,BQ.z];return E(t,JF,KF,LF,AQ)};z.clampPoint=
function(t,w){void 0===w&&(console.warn("THREE.Box3: .clampPoint() target is now required"),w=new kc);return w.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return CJ.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.getBoundingSphere=function(t){void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(t.center);t.radius=.5*this.getSize(CJ).length();return t};z.intersect=function(t){(this||p).min.max(t.min);(this||
p).max.min(t.max);this.isEmpty()&&this.makeEmpty();return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.applyMatrix4=function(t){if(this.isEmpty())return this||p;Sx[0].set((this||p).min.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);Sx[1].set((this||p).min.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);Sx[2].set((this||p).min.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);Sx[3].set((this||p).min.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);
Sx[4].set((this||p).max.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);Sx[5].set((this||p).max.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);Sx[6].set((this||p).max.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);Sx[7].set((this||p).max.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);this.setFromPoints(Sx);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};z.equals=function(t){return t.min.equals((this||p).min)&&t.max.equals((this||p).max)};
return u}(),Sx=[new kc,new kc,new kc,new kc,new kc,new kc,new kc,new kc],CJ=new kc,CZ=new jw,JF=new kc,KF=new kc,LF=new kc,sA=new kc,tA=new kc,NC=new kc,DJ=new kc,AQ=new kc,BQ=new kc,EC=new kc,bxa=new jw,Tx=function(){function u(t,w){(this||p).center=void 0!==t?t:new kc;(this||p).radius=void 0!==w?w:-1}var z=u.prototype;z.set=function(t,w){(this||p).center.copy(t);(this||p).radius=w;return this||p};z.setFromPoints=function(t,w){var C=(this||p).center;void 0!==w?C.copy(w):bxa.setFromPoints(t).getCenter(C);
for(var G=w=0,M=t.length;G<M;G++)w=Math.max(w,C.distanceToSquared(t[G]));(this||p).radius=Math.sqrt(w);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).center.copy(t.center);(this||p).radius=t.radius;return this||p};z.isEmpty=function(){return 0>(this||p).radius};z.makeEmpty=function(){(this||p).center.set(0,0,0);(this||p).radius=-1;return this||p};z.containsPoint=function(t){return t.distanceToSquared((this||p).center)<=(this||p).radius*
(this||p).radius};z.distanceToPoint=function(t){return t.distanceTo((this||p).center)-(this||p).radius};z.intersectsSphere=function(t){var w=(this||p).radius+t.radius;return t.center.distanceToSquared((this||p).center)<=w*w};z.intersectsBox=function(t){return t.intersectsSphere(this||p)};z.intersectsPlane=function(t){return Math.abs(t.distanceToPoint((this||p).center))<=(this||p).radius};z.clampPoint=function(t,w){var C=(this||p).center.distanceToSquared(t);void 0===w&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),
w=new kc);w.copy(t);C>(this||p).radius*(this||p).radius&&(w.sub((this||p).center).normalize(),w.multiplyScalar((this||p).radius).add((this||p).center));return w};z.getBoundingBox=function(t){void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new jw);if(this.isEmpty())return t.makeEmpty(),t;t.set((this||p).center,(this||p).center);t.expandByScalar((this||p).radius);return t};z.applyMatrix4=function(t){(this||p).center.applyMatrix4(t);(this||p).radius*=t.getMaxScaleOnAxis();
return this||p};z.translate=function(t){(this||p).center.add(t);return this||p};z.equals=function(t){return t.center.equals((this||p).center)&&t.radius===(this||p).radius};return u}(),Ux=new kc,DZ=new kc,CQ=new kc,uA=new kc,EZ=new kc,DQ=new kc,FZ=new kc,HF=function(){function u(t,w){(this||p).origin=void 0!==t?t:new kc;(this||p).direction=void 0!==w?w:new kc(0,0,-1)}var z=u.prototype;z.set=function(t,w){(this||p).origin.copy(t);(this||p).direction.copy(w);return this||p};z.clone=function(){return(new (this||
p).constructor).copy(this||p)};z.copy=function(t){(this||p).origin.copy(t.origin);(this||p).direction.copy(t.direction);return this||p};z.at=function(t,w){void 0===w&&(console.warn("THREE.Ray: .at() target is now required"),w=new kc);return w.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.lookAt=function(t){(this||p).direction.copy(t).sub((this||p).origin).normalize();return this||p};z.recast=function(t){(this||p).origin.copy(this.at(t,Ux));return this||p};z.closestPointToPoint=
function(t,w){void 0===w&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),w=new kc);w.subVectors(t,(this||p).origin);t=w.dot((this||p).direction);return 0>t?w.copy((this||p).origin):w.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))};z.distanceSqToPoint=function(t){var w=Ux.subVectors(t,(this||p).origin).dot((this||p).direction);if(0>w)return(this||p).origin.distanceToSquared(t);Ux.copy((this||
p).direction).multiplyScalar(w).add((this||p).origin);return Ux.distanceToSquared(t)};z.distanceSqToSegment=function(t,w,C,G){DZ.copy(t).add(w).multiplyScalar(.5);CQ.copy(w).sub(t).normalize();uA.copy((this||p).origin).sub(DZ);var M=.5*t.distanceTo(w),Q=-(this||p).direction.dot(CQ),X=uA.dot((this||p).direction),T=-uA.dot(CQ),fa=uA.lengthSq(),oa=Math.abs(1-Q*Q);if(0<oa){t=Q*T-X;w=Q*X-T;var Ga=M*oa;0<=t?w>=-Ga?w<=Ga?(M=1/oa,t*=M,w*=M,Q=t*(t+Q*w+2*X)+w*(Q*t+w+2*T)+fa):(w=M,t=Math.max(0,-(Q*w+X)),Q=-t*
t+w*(w+2*T)+fa):(w=-M,t=Math.max(0,-(Q*w+X)),Q=-t*t+w*(w+2*T)+fa):w<=-Ga?(t=Math.max(0,-(-Q*M+X)),w=0<t?-M:Math.min(Math.max(-M,-T),M),Q=-t*t+w*(w+2*T)+fa):w<=Ga?(t=0,w=Math.min(Math.max(-M,-T),M),Q=w*(w+2*T)+fa):(t=Math.max(0,-(Q*M+X)),w=0<t?M:Math.min(Math.max(-M,-T),M),Q=-t*t+w*(w+2*T)+fa)}else w=0<Q?-M:M,t=Math.max(0,-(Q*w+X)),Q=-t*t+w*(w+2*T)+fa;C&&C.copy((this||p).direction).multiplyScalar(t).add((this||p).origin);G&&G.copy(CQ).multiplyScalar(w).add(DZ);return Q};z.intersectSphere=function(t,
w){Ux.subVectors(t.center,(this||p).origin);var C=Ux.dot((this||p).direction),G=Ux.dot(Ux)-C*C;t=t.radius*t.radius;if(G>t)return null;t=Math.sqrt(t-G);G=C-t;C+=t;return 0>G&&0>C?null:0>G?this.at(C,w):this.at(G,w)};z.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius};z.distanceToPlane=function(t){var w=t.normal.dot((this||p).direction);if(0===w)return 0===t.distanceToPoint((this||p).origin)?0:null;t=-((this||p).origin.dot(t.normal)+t.constant)/w;return 0<=t?t:
null};z.intersectPlane=function(t,w){t=this.distanceToPlane(t);return null===t?null:this.at(t,w)};z.intersectsPlane=function(t){var w=t.distanceToPoint((this||p).origin);return 0===w||0>t.normal.dot((this||p).direction)*w?!0:!1};z.intersectBox=function(t,w){var C=1/(this||p).direction.x;var G=1/(this||p).direction.y;var M=1/(this||p).direction.z,Q=(this||p).origin;if(0<=C){var X=(t.min.x-Q.x)*C;C*=t.max.x-Q.x}else X=(t.max.x-Q.x)*C,C*=t.min.x-Q.x;if(0<=G){var T=(t.min.y-Q.y)*G;G*=t.max.y-Q.y}else T=
(t.max.y-Q.y)*G,G*=t.min.y-Q.y;if(X>G||T>C)return null;if(T>X||X!==X)X=T;if(G<C||C!==C)C=G;0<=M?(T=(t.min.z-Q.z)*M,t=(t.max.z-Q.z)*M):(T=(t.max.z-Q.z)*M,t=(t.min.z-Q.z)*M);if(X>t||T>C)return null;if(T>X||X!==X)X=T;if(t<C||C!==C)C=t;return 0>C?null:this.at(0<=X?X:C,w)};z.intersectsBox=function(t){return null!==this.intersectBox(t,Ux)};z.intersectTriangle=function(t,w,C,G,M){EZ.subVectors(w,t);DQ.subVectors(C,t);FZ.crossVectors(EZ,DQ);w=(this||p).direction.dot(FZ);if(0<w){if(G)return null;G=1}else if(0>
w)G=-1,w=-w;else return null;uA.subVectors((this||p).origin,t);t=G*(this||p).direction.dot(DQ.crossVectors(uA,DQ));if(0>t)return null;C=G*(this||p).direction.dot(EZ.cross(uA));if(0>C||t+C>w)return null;t=-G*uA.dot(FZ);return 0>t?null:this.at(t/w,M)};z.applyMatrix4=function(t){(this||p).origin.applyMatrix4(t);(this||p).direction.transformDirection(t);return this||p};z.equals=function(t){return t.origin.equals((this||p).origin)&&t.direction.equals((this||p).direction)};return u}(),Qi=function(){function u(){Object.defineProperty(this||
p,"isMatrix4",{value:!0});(this||p).elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,w,C,G,M,Q,X,T,fa,oa,Ga,Xa,Wa,tb,mb,Kc){var ic=(this||p).elements;ic[0]=t;ic[4]=w;ic[8]=C;ic[12]=G;ic[1]=M;ic[5]=Q;ic[9]=X;ic[13]=T;ic[2]=fa;ic[6]=oa;ic[10]=Ga;ic[14]=Xa;ic[3]=Wa;ic[7]=tb;ic[11]=mb;ic[15]=Kc;return this||p};z.identity=function(){this.set(1,0,0,0,0,1,0,0,0,
0,1,0,0,0,0,1);return this||p};z.clone=function(){return(new u).fromArray((this||p).elements)};z.copy=function(t){var w=(this||p).elements;t=t.elements;w[0]=t[0];w[1]=t[1];w[2]=t[2];w[3]=t[3];w[4]=t[4];w[5]=t[5];w[6]=t[6];w[7]=t[7];w[8]=t[8];w[9]=t[9];w[10]=t[10];w[11]=t[11];w[12]=t[12];w[13]=t[13];w[14]=t[14];w[15]=t[15];return this||p};z.copyPosition=function(t){var w=(this||p).elements;t=t.elements;w[12]=t[12];w[13]=t[13];w[14]=t[14];return this||p};z.extractBasis=function(t,w,C){t.setFromMatrixColumn(this||
p,0);w.setFromMatrixColumn(this||p,1);C.setFromMatrixColumn(this||p,2);return this||p};z.makeBasis=function(t,w,C){this.set(t.x,w.x,C.x,0,t.y,w.y,C.y,0,t.z,w.z,C.z,0,0,0,0,1);return this||p};z.extractRotation=function(t){var w=(this||p).elements,C=t.elements,G=1/MF.setFromMatrixColumn(t,0).length(),M=1/MF.setFromMatrixColumn(t,1).length();t=1/MF.setFromMatrixColumn(t,2).length();w[0]=C[0]*G;w[1]=C[1]*G;w[2]=C[2]*G;w[3]=0;w[4]=C[4]*M;w[5]=C[5]*M;w[6]=C[6]*M;w[7]=0;w[8]=C[8]*t;w[9]=C[9]*t;w[10]=C[10]*
t;w[11]=0;w[12]=0;w[13]=0;w[14]=0;w[15]=1;return this||p};z.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var w=(this||p).elements,C=t.x,G=t.y,M=t.z,Q=Math.cos(C);C=Math.sin(C);var X=Math.cos(G);G=Math.sin(G);var T=Math.cos(M);M=Math.sin(M);if("XYZ"===t.order){t=Q*T;var fa=Q*M,oa=C*T,Ga=C*M;w[0]=X*T;w[4]=-X*M;w[8]=G;w[1]=fa+oa*G;w[5]=t-Ga*G;w[9]=-C*X;w[2]=Ga-t*G;w[6]=oa+fa*G;w[10]=
Q*X}else"YXZ"===t.order?(t=X*T,fa=X*M,oa=G*T,Ga=G*M,w[0]=t+Ga*C,w[4]=oa*C-fa,w[8]=Q*G,w[1]=Q*M,w[5]=Q*T,w[9]=-C,w[2]=fa*C-oa,w[6]=Ga+t*C,w[10]=Q*X):"ZXY"===t.order?(t=X*T,fa=X*M,oa=G*T,Ga=G*M,w[0]=t-Ga*C,w[4]=-Q*M,w[8]=oa+fa*C,w[1]=fa+oa*C,w[5]=Q*T,w[9]=Ga-t*C,w[2]=-Q*G,w[6]=C,w[10]=Q*X):"ZYX"===t.order?(t=Q*T,fa=Q*M,oa=C*T,Ga=C*M,w[0]=X*T,w[4]=oa*G-fa,w[8]=t*G+Ga,w[1]=X*M,w[5]=Ga*G+t,w[9]=fa*G-oa,w[2]=-G,w[6]=C*X,w[10]=Q*X):"YZX"===t.order?(t=Q*X,fa=Q*G,oa=C*X,Ga=C*G,w[0]=X*T,w[4]=Ga-t*M,w[8]=oa*
M+fa,w[1]=M,w[5]=Q*T,w[9]=-C*T,w[2]=-G*T,w[6]=fa*M+oa,w[10]=t-Ga*M):"XZY"===t.order&&(t=Q*X,fa=Q*G,oa=C*X,Ga=C*G,w[0]=X*T,w[4]=-M,w[8]=G*T,w[1]=t*M+Ga,w[5]=Q*T,w[9]=fa*M-oa,w[2]=oa*M-fa,w[6]=C*T,w[10]=Ga*M+t);w[3]=0;w[7]=0;w[11]=0;w[12]=0;w[13]=0;w[14]=0;w[15]=1;return this||p};z.makeRotationFromQuaternion=function(t){return this.compose(cxa,t,dxa)};z.lookAt=function(t,w,C){var G=(this||p).elements;Ep.subVectors(t,w);0===Ep.lengthSq()&&(Ep.z=1);Ep.normalize();vA.crossVectors(C,Ep);0===vA.lengthSq()&&
(1===Math.abs(C.z)?Ep.x+=1E-4:Ep.z+=1E-4,Ep.normalize(),vA.crossVectors(C,Ep));vA.normalize();EQ.crossVectors(Ep,vA);G[0]=vA.x;G[4]=EQ.x;G[8]=Ep.x;G[1]=vA.y;G[5]=EQ.y;G[9]=Ep.y;G[2]=vA.z;G[6]=EQ.z;G[10]=Ep.z;return this||p};z.multiply=function(t,w){return void 0!==w?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,w)):this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,this||
p)};z.multiplyMatrices=function(t,w){var C=t.elements,G=w.elements;w=(this||p).elements;t=C[0];var M=C[4],Q=C[8],X=C[12],T=C[1],fa=C[5],oa=C[9],Ga=C[13],Xa=C[2],Wa=C[6],tb=C[10],mb=C[14],Kc=C[3],ic=C[7],Lc=C[11];C=C[15];var vc=G[0],Yc=G[4],fd=G[8],Zc=G[12],Rd=G[1],ld=G[5],sd=G[9],Ae=G[13],qe=G[2],Qf=G[6],Af=G[10],Mf=G[14],jg=G[3],ah=G[7],Lh=G[11];G=G[15];w[0]=t*vc+M*Rd+Q*qe+X*jg;w[4]=t*Yc+M*ld+Q*Qf+X*ah;w[8]=t*fd+M*sd+Q*Af+X*Lh;w[12]=t*Zc+M*Ae+Q*Mf+X*G;w[1]=T*vc+fa*Rd+oa*qe+Ga*jg;w[5]=T*Yc+fa*ld+
oa*Qf+Ga*ah;w[9]=T*fd+fa*sd+oa*Af+Ga*Lh;w[13]=T*Zc+fa*Ae+oa*Mf+Ga*G;w[2]=Xa*vc+Wa*Rd+tb*qe+mb*jg;w[6]=Xa*Yc+Wa*ld+tb*Qf+mb*ah;w[10]=Xa*fd+Wa*sd+tb*Af+mb*Lh;w[14]=Xa*Zc+Wa*Ae+tb*Mf+mb*G;w[3]=Kc*vc+ic*Rd+Lc*qe+C*jg;w[7]=Kc*Yc+ic*ld+Lc*Qf+C*ah;w[11]=Kc*fd+ic*sd+Lc*Af+C*Lh;w[15]=Kc*Zc+ic*Ae+Lc*Mf+C*G;return this||p};z.multiplyScalar=function(t){var w=(this||p).elements;w[0]*=t;w[4]*=t;w[8]*=t;w[12]*=t;w[1]*=t;w[5]*=t;w[9]*=t;w[13]*=t;w[2]*=t;w[6]*=t;w[10]*=t;w[14]*=t;w[3]*=t;w[7]*=t;w[11]*=t;w[15]*=t;
return this||p};z.determinant=function(){var t=(this||p).elements,w=t[0],C=t[4],G=t[8],M=t[12],Q=t[1],X=t[5],T=t[9],fa=t[13],oa=t[2],Ga=t[6],Xa=t[10],Wa=t[14];return t[3]*(+M*T*Ga-G*fa*Ga-M*X*Xa+C*fa*Xa+G*X*Wa-C*T*Wa)+t[7]*(+w*T*Wa-w*fa*Xa+M*Q*Xa-G*Q*Wa+G*fa*oa-M*T*oa)+t[11]*(+w*fa*Ga-w*X*Wa-M*Q*Ga+C*Q*Wa+M*X*oa-C*fa*oa)+t[15]*(-G*X*oa-w*T*Ga+w*X*Xa+G*Q*Ga-C*Q*Xa+C*T*oa)};z.transpose=function(){var t=(this||p).elements;var w=t[1];t[1]=t[4];t[4]=w;w=t[2];t[2]=t[8];t[8]=w;w=t[6];t[6]=t[9];t[9]=w;w=
t[3];t[3]=t[12];t[12]=w;w=t[7];t[7]=t[13];t[13]=w;w=t[11];t[11]=t[14];t[14]=w;return this||p};z.setPosition=function(t,w,C){var G=(this||p).elements;t.isVector3?(G[12]=t.x,G[13]=t.y,G[14]=t.z):(G[12]=t,G[13]=w,G[14]=C);return this||p};z.invert=function(){var t=(this||p).elements,w=t[0],C=t[1],G=t[2],M=t[3],Q=t[4],X=t[5],T=t[6],fa=t[7],oa=t[8],Ga=t[9],Xa=t[10],Wa=t[11],tb=t[12],mb=t[13],Kc=t[14],ic=t[15],Lc=Ga*Kc*fa-mb*Xa*fa+mb*T*Wa-X*Kc*Wa-Ga*T*ic+X*Xa*ic,vc=tb*Xa*fa-oa*Kc*fa-tb*T*Wa+Q*Kc*Wa+oa*T*
ic-Q*Xa*ic,Yc=oa*mb*fa-tb*Ga*fa+tb*X*Wa-Q*mb*Wa-oa*X*ic+Q*Ga*ic,fd=tb*Ga*T-oa*mb*T-tb*X*Xa+Q*mb*Xa+oa*X*Kc-Q*Ga*Kc,Zc=w*Lc+C*vc+G*Yc+M*fd;if(0===Zc)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);Zc=1/Zc;t[0]=Lc*Zc;t[1]=(mb*Xa*M-Ga*Kc*M-mb*G*Wa+C*Kc*Wa+Ga*G*ic-C*Xa*ic)*Zc;t[2]=(X*Kc*M-mb*T*M+mb*G*fa-C*Kc*fa-X*G*ic+C*T*ic)*Zc;t[3]=(Ga*T*M-X*Xa*M-Ga*G*fa+C*Xa*fa+X*G*Wa-C*T*Wa)*Zc;t[4]=vc*Zc;t[5]=(oa*Kc*M-tb*Xa*M+tb*G*Wa-w*Kc*Wa-oa*G*ic+w*Xa*ic)*Zc;t[6]=(tb*T*M-Q*Kc*M-tb*G*fa+w*Kc*fa+Q*G*ic-w*T*ic)*
Zc;t[7]=(Q*Xa*M-oa*T*M+oa*G*fa-w*Xa*fa-Q*G*Wa+w*T*Wa)*Zc;t[8]=Yc*Zc;t[9]=(tb*Ga*M-oa*mb*M-tb*C*Wa+w*mb*Wa+oa*C*ic-w*Ga*ic)*Zc;t[10]=(Q*mb*M-tb*X*M+tb*C*fa-w*mb*fa-Q*C*ic+w*X*ic)*Zc;t[11]=(oa*X*M-Q*Ga*M-oa*C*fa+w*Ga*fa+Q*C*Wa-w*X*Wa)*Zc;t[12]=fd*Zc;t[13]=(oa*mb*G-tb*Ga*G+tb*C*Xa-w*mb*Xa-oa*C*Kc+w*Ga*Kc)*Zc;t[14]=(tb*X*G-Q*mb*G-tb*C*T+w*mb*T+Q*C*Kc-w*X*Kc)*Zc;t[15]=(Q*Ga*G-oa*X*G+oa*C*T-w*Ga*T-Q*C*Xa+w*X*Xa)*Zc;return this||p};z.scale=function(t){var w=(this||p).elements,C=t.x,G=t.y;t=t.z;w[0]*=C;w[4]*=
G;w[8]*=t;w[1]*=C;w[5]*=G;w[9]*=t;w[2]*=C;w[6]*=G;w[10]*=t;w[3]*=C;w[7]*=G;w[11]*=t;return this||p};z.getMaxScaleOnAxis=function(){var t=(this||p).elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))};z.makeTranslation=function(t,w,C){this.set(1,0,0,t,0,1,0,w,0,0,1,C,0,0,0,1);return this||p};z.makeRotationX=function(t){var w=Math.cos(t);t=Math.sin(t);this.set(1,0,0,0,0,w,-t,0,0,t,w,0,0,0,0,1);return this||p};z.makeRotationY=
function(t){var w=Math.cos(t);t=Math.sin(t);this.set(w,0,t,0,0,1,0,0,-t,0,w,0,0,0,0,1);return this||p};z.makeRotationZ=function(t){var w=Math.cos(t);t=Math.sin(t);this.set(w,-t,0,0,t,w,0,0,0,0,1,0,0,0,0,1);return this||p};z.makeRotationAxis=function(t,w){var C=Math.cos(w);w=Math.sin(w);var G=1-C,M=t.x,Q=t.y;t=t.z;var X=G*M,T=G*Q;this.set(X*M+C,X*Q-w*t,X*t+w*Q,0,X*Q+w*t,T*Q+C,T*t-w*M,0,X*t-w*Q,T*t+w*M,G*t*t+C,0,0,0,0,1);return this||p};z.makeScale=function(t,w,C){this.set(t,0,0,0,0,w,0,0,0,0,C,0,0,
0,0,1);return this||p};z.makeShear=function(t,w,C){this.set(1,w,C,0,t,1,C,0,t,w,1,0,0,0,0,1);return this||p};z.compose=function(t,w,C){var G=(this||p).elements,M=w._x,Q=w._y,X=w._z,T=w._w,fa=M+M,oa=Q+Q,Ga=X+X;w=M*fa;var Xa=M*oa;M*=Ga;var Wa=Q*oa;Q*=Ga;X*=Ga;fa*=T;oa*=T;T*=Ga;Ga=C.x;var tb=C.y;C=C.z;G[0]=(1-(Wa+X))*Ga;G[1]=(Xa+T)*Ga;G[2]=(M-oa)*Ga;G[3]=0;G[4]=(Xa-T)*tb;G[5]=(1-(w+X))*tb;G[6]=(Q+fa)*tb;G[7]=0;G[8]=(M+oa)*C;G[9]=(Q-fa)*C;G[10]=(1-(w+Wa))*C;G[11]=0;G[12]=t.x;G[13]=t.y;G[14]=t.z;G[15]=
1;return this||p};z.decompose=function(t,w,C){var G=(this||p).elements,M=MF.set(G[0],G[1],G[2]).length(),Q=MF.set(G[4],G[5],G[6]).length(),X=MF.set(G[8],G[9],G[10]).length();0>this.determinant()&&(M=-M);t.x=G[12];t.y=G[13];t.z=G[14];Jm.copy(this||p);t=1/M;G=1/Q;var T=1/X;Jm.elements[0]*=t;Jm.elements[1]*=t;Jm.elements[2]*=t;Jm.elements[4]*=G;Jm.elements[5]*=G;Jm.elements[6]*=G;Jm.elements[8]*=T;Jm.elements[9]*=T;Jm.elements[10]*=T;w.setFromRotationMatrix(Jm);C.x=M;C.y=Q;C.z=X;return this||p};z.makePerspective=
function(t,w,C,G,M,Q){void 0===Q&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var X=(this||p).elements;X[0]=2*M/(w-t);X[4]=0;X[8]=(w+t)/(w-t);X[12]=0;X[1]=0;X[5]=2*M/(C-G);X[9]=(C+G)/(C-G);X[13]=0;X[2]=0;X[6]=0;X[10]=-(Q+M)/(Q-M);X[14]=-2*Q*M/(Q-M);X[3]=0;X[7]=0;X[11]=-1;X[15]=0;return this||p};z.makeOrthographic=function(t,w,C,G,M,Q){var X=(this||p).elements,T=1/(w-t),fa=1/(C-G),oa=1/(Q-M);X[0]=2*T;X[4]=0;X[8]=0;X[12]=-((w+
t)*T);X[1]=0;X[5]=2*fa;X[9]=0;X[13]=-((C+G)*fa);X[2]=0;X[6]=0;X[10]=-2*oa;X[14]=-((Q+M)*oa);X[3]=0;X[7]=0;X[11]=0;X[15]=1;return this||p};z.equals=function(t){var w=(this||p).elements;t=t.elements;for(var C=0;16>C;C++)if(w[C]!==t[C])return!1;return!0};z.fromArray=function(t,w){void 0===w&&(w=0);for(var C=0;16>C;C++)(this||p).elements[C]=t[C+w];return this||p};z.toArray=function(t,w){void 0===t&&(t=[]);void 0===w&&(w=0);var C=(this||p).elements;t[w]=C[0];t[w+1]=C[1];t[w+2]=C[2];t[w+3]=C[3];t[w+4]=
C[4];t[w+5]=C[5];t[w+6]=C[6];t[w+7]=C[7];t[w+8]=C[8];t[w+9]=C[9];t[w+10]=C[10];t[w+11]=C[11];t[w+12]=C[12];t[w+13]=C[13];t[w+14]=C[14];t[w+15]=C[15];return t};return u}(),MF=new kc,Jm=new Qi,cxa=new kc(0,0,0),dxa=new kc(1,1,1),vA=new kc,EQ=new kc,Ep=new kc,PP=function(){function u(t,w,C,G){void 0===t&&(t=0);void 0===w&&(w=0);void 0===C&&(C=0);void 0===G&&(G=u.DefaultOrder);Object.defineProperty(this||p,"isEuler",{value:!0});(this||p)._x=t;(this||p)._y=w;(this||p)._z=C;(this||p)._order=G}var z=u.prototype;
z.set=function(t,w,C,G){(this||p)._x=t;(this||p)._y=w;(this||p)._z=C;(this||p)._order=G||(this||p)._order;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||p)._x,(this||p)._y,(this||p)._z,(this||p)._order)};z.copy=function(t){(this||p)._x=t._x;(this||p)._y=t._y;(this||p)._z=t._z;(this||p)._order=t._order;this._onChangeCallback();return this||p};z.setFromRotationMatrix=function(t,w,C){var G=Kh.clamp,M=t.elements;t=M[0];var Q=M[4],X=M[8],T=M[1],fa=M[5],
oa=M[9],Ga=M[2],Xa=M[6];M=M[10];w=w||(this||p)._order;switch(w){case "XYZ":(this||p)._y=Math.asin(G(X,-1,1));.9999999>Math.abs(X)?((this||p)._x=Math.atan2(-oa,M),(this||p)._z=Math.atan2(-Q,t)):((this||p)._x=Math.atan2(Xa,fa),(this||p)._z=0);break;case "YXZ":(this||p)._x=Math.asin(-G(oa,-1,1));.9999999>Math.abs(oa)?((this||p)._y=Math.atan2(X,M),(this||p)._z=Math.atan2(T,fa)):((this||p)._y=Math.atan2(-Ga,t),(this||p)._z=0);break;case "ZXY":(this||p)._x=Math.asin(G(Xa,-1,1));.9999999>Math.abs(Xa)?((this||
p)._y=Math.atan2(-Ga,M),(this||p)._z=Math.atan2(-Q,fa)):((this||p)._y=0,(this||p)._z=Math.atan2(T,t));break;case "ZYX":(this||p)._y=Math.asin(-G(Ga,-1,1));.9999999>Math.abs(Ga)?((this||p)._x=Math.atan2(Xa,M),(this||p)._z=Math.atan2(T,t)):((this||p)._x=0,(this||p)._z=Math.atan2(-Q,fa));break;case "YZX":(this||p)._z=Math.asin(G(T,-1,1));.9999999>Math.abs(T)?((this||p)._x=Math.atan2(-oa,fa),(this||p)._y=Math.atan2(-Ga,t)):((this||p)._x=0,(this||p)._y=Math.atan2(X,M));break;case "XZY":(this||p)._z=Math.asin(-G(Q,
-1,1));.9999999>Math.abs(Q)?((this||p)._x=Math.atan2(Xa,fa),(this||p)._y=Math.atan2(X,t)):((this||p)._x=Math.atan2(-oa,M),(this||p)._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+w)}(this||p)._order=w;!1!==C&&this._onChangeCallback();return this||p};z.setFromQuaternion=function(t,w,C){Ada.makeRotationFromQuaternion(t);return this.setFromRotationMatrix(Ada,w,C)};z.setFromVector3=function(t,w){return this.set(t.x,t.y,t.z,w||(this||p)._order)};
z.reorder=function(t){Bda.setFromEuler(this||p);return this.setFromQuaternion(Bda,t)};z.equals=function(t){return t._x===(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._order===(this||p)._order};z.fromArray=function(t){(this||p)._x=t[0];(this||p)._y=t[1];(this||p)._z=t[2];void 0!==t[3]&&((this||p)._order=t[3]);this._onChangeCallback();return this||p};z.toArray=function(t,w){void 0===t&&(t=[]);void 0===w&&(w=0);t[w]=(this||p)._x;t[w+1]=(this||p)._y;t[w+2]=(this||p)._z;t[w+3]=(this||p)._order;
return t};z.toVector3=function(t){return t?t.set((this||p)._x,(this||p)._y,(this||p)._z):new kc((this||p)._x,(this||p)._y,(this||p)._z)};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},set:function(t){(this||p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||
p)._z=t;this._onChangeCallback()}},{key:"order",get:function(){return(this||p)._order},set:function(t){(this||p)._order=t;this._onChangeCallback()}}]);return u}();PP.DefaultOrder="XYZ";PP.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");var Ada=new Qi,Bda=new So,RY=function(){function u(){(this||p).mask=1}var z=u.prototype;z.set=function(t){(this||p).mask=1<<t|0};z.enable=function(t){(this||p).mask=(this||p).mask|1<<t|0};z.enableAll=function(){(this||p).mask=-1};z.toggle=function(t){(this||p).mask^=
1<<t|0};z.disable=function(t){(this||p).mask&=~(1<<t|0)};z.disableAll=function(){(this||p).mask=0};z.test=function(t){return 0!==((this||p).mask&t.mask)};return u}(),Hwa=0,Cda=new kc,NF=new So,Vx=new Qi,FQ=new kc,EJ=new kc,exa=new kc,fxa=new So,Dda=new kc(1,0,0),Eda=new kc(0,1,0),Fda=new kc(0,0,1),gxa={type:"added"},Gda={type:"removed"};F.DefaultUp=new kc(0,1,0);F.DefaultMatrixAutoUpdate=!0;F.prototype=Object.assign(Object.create(d.prototype),{constructor:F,isObject3D:!0,onBeforeRender:function(){},
onAfterRender:function(){},applyMatrix4:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();(this||p).matrix.premultiply(u);(this||p).matrix.decompose((this||p).position,(this||p).quaternion,(this||p).scale)},applyQuaternion:function(u){(this||p).quaternion.premultiply(u);return this||p},setRotationFromAxisAngle:function(u,z){(this||p).quaternion.setFromAxisAngle(u,z)},setRotationFromEuler:function(u){(this||p).quaternion.setFromEuler(u,!0)},setRotationFromMatrix:function(u){(this||p).quaternion.setFromRotationMatrix(u)},
setRotationFromQuaternion:function(u){(this||p).quaternion.copy(u)},rotateOnAxis:function(u,z){NF.setFromAxisAngle(u,z);(this||p).quaternion.multiply(NF);return this||p},rotateOnWorldAxis:function(u,z){NF.setFromAxisAngle(u,z);(this||p).quaternion.premultiply(NF);return this||p},rotateX:function(u){return this.rotateOnAxis(Dda,u)},rotateY:function(u){return this.rotateOnAxis(Eda,u)},rotateZ:function(u){return this.rotateOnAxis(Fda,u)},translateOnAxis:function(u,z){Cda.copy(u).applyQuaternion((this||
p).quaternion);(this||p).position.add(Cda.multiplyScalar(z));return this||p},translateX:function(u){return this.translateOnAxis(Dda,u)},translateY:function(u){return this.translateOnAxis(Eda,u)},translateZ:function(u){return this.translateOnAxis(Fda,u)},localToWorld:function(u){return u.applyMatrix4((this||p).matrixWorld)},worldToLocal:function(u){return u.applyMatrix4(Vx.copy((this||p).matrixWorld).invert())},lookAt:function(u,z,t){u.isVector3?FQ.copy(u):FQ.set(u,z,t);u=(this||p).parent;this.updateWorldMatrix(!0,
!1);EJ.setFromMatrixPosition((this||p).matrixWorld);(this||p).isCamera||(this||p).isLight?Vx.lookAt(EJ,FQ,(this||p).up):Vx.lookAt(FQ,EJ,(this||p).up);(this||p).quaternion.setFromRotationMatrix(Vx);u&&(Vx.extractRotation(u.matrixWorld),NF.setFromRotationMatrix(Vx),(this||p).quaternion.premultiply(NF.invert()))},add:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.add(arguments[z]);return this||p}if(u===(this||p))return console.error("THREE.Object3D.add: object can't be added as a child of itself.",
u),this||p;u&&u.isObject3D?(null!==u.parent&&u.parent.remove(u),u.parent=this||p,(this||p).children.push(u),u.dispatchEvent(gxa)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",u);return this||p},remove:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.remove(arguments[z]);return this||p}z=(this||p).children.indexOf(u);-1!==z&&(u.parent=null,(this||p).children.splice(z,1),u.dispatchEvent(Gda));return this||p},clear:function(){for(var u=0;u<(this||
p).children.length;u++){var z=(this||p).children[u];z.parent=null;z.dispatchEvent(Gda)}(this||p).children.length=0;return this||p},attach:function(u){this.updateWorldMatrix(!0,!1);Vx.copy((this||p).matrixWorld).invert();null!==u.parent&&(u.parent.updateWorldMatrix(!0,!1),Vx.multiply(u.parent.matrixWorld));u.applyMatrix4(Vx);u.updateWorldMatrix(!1,!1);this.add(u);return this||p},getObjectById:function(u){return this.getObjectByProperty("id",u)},getObjectByName:function(u){return this.getObjectByProperty("name",
u)},getObjectByProperty:function(u,z){if((this||p)[u]===z)return this||p;for(var t=0,w=(this||p).children.length;t<w;t++){var C=(this||p).children[t].getObjectByProperty(u,z);if(void 0!==C)return C}},getWorldPosition:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),u=new kc);this.updateWorldMatrix(!0,!1);return u.setFromMatrixPosition((this||p).matrixWorld)},getWorldQuaternion:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),
u=new So);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(EJ,u,exa);return u},getWorldScale:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),u=new kc);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(EJ,fxa,u);return u},getWorldDirection:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),u=new kc);this.updateWorldMatrix(!0,!1);var z=(this||p).matrixWorld.elements;return u.set(z[8],
z[9],z[10]).normalize()},raycast:function(){},traverse:function(u){u(this||p);for(var z=(this||p).children,t=0,w=z.length;t<w;t++)z[t].traverse(u)},traverseVisible:function(u){if(!1!==(this||p).visible){u(this||p);for(var z=(this||p).children,t=0,w=z.length;t<w;t++)z[t].traverseVisible(u)}},traverseAncestors:function(u){var z=(this||p).parent;null!==z&&(u(z),z.traverseAncestors(u))},updateMatrix:function(){(this||p).matrix.compose((this||p).position,(this||p).quaternion,(this||p).scale);(this||p).matrixWorldNeedsUpdate=
!0},updateMatrixWorld:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();if((this||p).matrixWorldNeedsUpdate||u)null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix),(this||p).matrixWorldNeedsUpdate=!1,u=!0;for(var z=(this||p).children,t=0,w=z.length;t<w;t++)z[t].updateMatrixWorld(u)},updateWorldMatrix:function(u,z){var t=(this||p).parent;!0===u&&null!==t&&t.updateWorldMatrix(!0,!1);(this||
p).matrixAutoUpdate&&this.updateMatrix();null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix);if(!0===z)for(u=(this||p).children,z=0,t=u.length;z<t;z++)u[z].updateWorldMatrix(!1,!0)},toJSON:function(u){function z(Ga,Xa){void 0===Ga[Xa.uuid]&&(Ga[Xa.uuid]=Xa.toJSON(u));return Xa.uuid}function t(Ga){var Xa=[],Wa;for(Wa in Ga){var tb=Ga[Wa];delete tb.metadata;Xa.push(tb)}return Xa}var w=void 0===u||
"string"===typeof u,C={};w&&(u={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},C.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var G={};G.uuid=(this||p).uuid;G.type=(this||p).type;""!==(this||p).name&&(G.name=(this||p).name);!0===(this||p).castShadow&&(G.castShadow=!0);!0===(this||p).receiveShadow&&(G.receiveShadow=!0);!1===(this||p).visible&&(G.visible=!1);!1===(this||p).frustumCulled&&(G.frustumCulled=!1);0!==(this||p).renderOrder&&(G.renderOrder=
(this||p).renderOrder);"{}"!==JSON.stringify((this||p).userData)&&(G.userData=(this||p).userData);G.layers=(this||p).layers.mask;G.matrix=(this||p).matrix.toArray();!1===(this||p).matrixAutoUpdate&&(G.matrixAutoUpdate=!1);(this||p).isInstancedMesh&&(G.type="InstancedMesh",G.count=(this||p).count,G.instanceMatrix=(this||p).instanceMatrix.toJSON());if((this||p).isMesh||(this||p).isLine||(this||p).isPoints){G.geometry=z(u.geometries,(this||p).geometry);var M=(this||p).geometry.parameters;if(void 0!==
M&&void 0!==M.shapes)if(M=M.shapes,Array.isArray(M))for(var Q=0,X=M.length;Q<X;Q++)z(u.shapes,M[Q]);else z(u.shapes,M)}(this||p).isSkinnedMesh&&(G.bindMode=(this||p).bindMode,G.bindMatrix=(this||p).bindMatrix.toArray(),void 0!==(this||p).skeleton&&(z(u.skeletons,(this||p).skeleton),G.skeleton=(this||p).skeleton.uuid));if(void 0!==(this||p).material)if(Array.isArray((this||p).material)){M=[];Q=0;for(X=(this||p).material.length;Q<X;Q++)M.push(z(u.materials,(this||p).material[Q]));G.material=M}else G.material=
z(u.materials,(this||p).material);if(0<(this||p).children.length)for(G.children=[],M=0;M<(this||p).children.length;M++)G.children.push((this||p).children[M].toJSON(u).object);if(0<(this||p).animations.length)for(G.animations=[],M=0;M<(this||p).animations.length;M++)G.animations.push(z(u.animations,(this||p).animations[M]));if(w){w=t(u.geometries);M=t(u.materials);Q=t(u.textures);X=t(u.images);var T=t(u.shapes),fa=t(u.skeletons),oa=t(u.animations);0<w.length&&(C.geometries=w);0<M.length&&(C.materials=
M);0<Q.length&&(C.textures=Q);0<X.length&&(C.images=X);0<T.length&&(C.shapes=T);0<fa.length&&(C.skeletons=fa);0<oa.length&&(C.animations=oa)}C.object=G;return C},clone:function(u){return(new (this||p).constructor).copy(this||p,u)},copy:function(u,z){void 0===z&&(z=!0);(this||p).name=u.name;(this||p).up.copy(u.up);(this||p).position.copy(u.position);(this||p).rotation.order=u.rotation.order;(this||p).quaternion.copy(u.quaternion);(this||p).scale.copy(u.scale);(this||p).matrix.copy(u.matrix);(this||
p).matrixWorld.copy(u.matrixWorld);(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=u.matrixWorldNeedsUpdate;(this||p).layers.mask=u.layers.mask;(this||p).visible=u.visible;(this||p).castShadow=u.castShadow;(this||p).receiveShadow=u.receiveShadow;(this||p).frustumCulled=u.frustumCulled;(this||p).renderOrder=u.renderOrder;(this||p).userData=JSON.parse(JSON.stringify(u.userData));if(!0===z)for(z=0;z<u.children.length;z++)this.add(u.children[z].clone());return this||p}});
var GZ=new kc,hxa=new kc,ixa=new Cp,dw=function(){function u(t,w){Object.defineProperty(this||p,"isPlane",{value:!0});(this||p).normal=void 0!==t?t:new kc(1,0,0);(this||p).constant=void 0!==w?w:0}var z=u.prototype;z.set=function(t,w){(this||p).normal.copy(t);(this||p).constant=w;return this||p};z.setComponents=function(t,w,C,G){(this||p).normal.set(t,w,C);(this||p).constant=G;return this||p};z.setFromNormalAndCoplanarPoint=function(t,w){(this||p).normal.copy(t);(this||p).constant=-w.dot((this||p).normal);
return this||p};z.setFromCoplanarPoints=function(t,w,C){w=GZ.subVectors(C,w).cross(hxa.subVectors(t,w)).normalize();this.setFromNormalAndCoplanarPoint(w,t);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).normal.copy(t.normal);(this||p).constant=t.constant;return this||p};z.normalize=function(){var t=1/(this||p).normal.length();(this||p).normal.multiplyScalar(t);(this||p).constant*=t;return this||p};z.negate=function(){(this||p).constant*=
-1;(this||p).normal.negate();return this||p};z.distanceToPoint=function(t){return(this||p).normal.dot(t)+(this||p).constant};z.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius};z.projectPoint=function(t,w){void 0===w&&(console.warn("THREE.Plane: .projectPoint() target is now required"),w=new kc);return w.copy((this||p).normal).multiplyScalar(-this.distanceToPoint(t)).add(t)};z.intersectLine=function(t,w){void 0===w&&(console.warn("THREE.Plane: .intersectLine() target is now required"),
w=new kc);var C=t.delta(GZ),G=(this||p).normal.dot(C);if(0===G){if(0===this.distanceToPoint(t.start))return w.copy(t.start)}else if(G=-(t.start.dot((this||p).normal)+(this||p).constant)/G,!(0>G||1<G))return w.copy(C).multiplyScalar(G).add(t.start)};z.intersectsLine=function(t){var w=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);return 0>w&&0<t||0>t&&0<w};z.intersectsBox=function(t){return t.intersectsPlane(this||p)};z.intersectsSphere=function(t){return t.intersectsPlane(this||p)};z.coplanarPoint=
function(t){void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new kc);return t.copy((this||p).normal).multiplyScalar(-(this||p).constant)};z.applyMatrix4=function(t,w){w=w||ixa.getNormalMatrix(t);t=this.coplanarPoint(GZ).applyMatrix4(t);w=(this||p).normal.applyMatrix3(w).normalize();(this||p).constant=-t.dot(w);return this||p};z.translate=function(t){(this||p).constant-=t.dot((this||p).normal);return this||p};z.equals=function(t){return t.normal.equals((this||p).normal)&&
t.constant===(this||p).constant};return u}(),lu=new kc,Wx=new kc,HZ=new kc,Xx=new kc,OF=new kc,PF=new kc,Hda=new kc,IZ=new kc,JZ=new kc,KZ=new kc,cu=function(){function u(t,w,C){(this||p).a=void 0!==t?t:new kc;(this||p).b=void 0!==w?w:new kc;(this||p).c=void 0!==C?C:new kc}u.getNormal=function(t,w,C,G){void 0===G&&(console.warn("THREE.Triangle: .getNormal() target is now required"),G=new kc);G.subVectors(C,w);lu.subVectors(t,w);G.cross(lu);t=G.lengthSq();return 0<t?G.multiplyScalar(1/Math.sqrt(t)):
G.set(0,0,0)};u.getBarycoord=function(t,w,C,G,M){lu.subVectors(G,w);Wx.subVectors(C,w);HZ.subVectors(t,w);t=lu.dot(lu);w=lu.dot(Wx);C=lu.dot(HZ);var Q=Wx.dot(Wx);G=Wx.dot(HZ);var X=t*Q-w*w;void 0===M&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),M=new kc);if(0===X)return M.set(-2,-1,-1);X=1/X;Q=(Q*C-w*G)*X;t=(t*G-w*C)*X;return M.set(1-Q-t,t,Q)};u.containsPoint=function(t,w,C,G){this.getBarycoord(t,w,C,G,Xx);return 0<=Xx.x&&0<=Xx.y&&1>=Xx.x+Xx.y};u.getUV=function(t,w,C,G,
M,Q,X,T){this.getBarycoord(t,w,C,G,Xx);T.set(0,0);T.addScaledVector(M,Xx.x);T.addScaledVector(Q,Xx.y);T.addScaledVector(X,Xx.z);return T};u.isFrontFacing=function(t,w,C,G){lu.subVectors(C,w);Wx.subVectors(t,w);return 0>lu.cross(Wx).dot(G)?!0:!1};var z=u.prototype;z.set=function(t,w,C){(this||p).a.copy(t);(this||p).b.copy(w);(this||p).c.copy(C);return this||p};z.setFromPointsAndIndices=function(t,w,C,G){(this||p).a.copy(t[w]);(this||p).b.copy(t[C]);(this||p).c.copy(t[G]);return this||p};z.clone=function(){return(new (this||
p).constructor).copy(this||p)};z.copy=function(t){(this||p).a.copy(t.a);(this||p).b.copy(t.b);(this||p).c.copy(t.c);return this||p};z.getArea=function(){lu.subVectors((this||p).c,(this||p).b);Wx.subVectors((this||p).a,(this||p).b);return.5*lu.cross(Wx).length()};z.getMidpoint=function(t){void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new kc);return t.addVectors((this||p).a,(this||p).b).add((this||p).c).multiplyScalar(1/3)};z.getNormal=function(t){return u.getNormal((this||
p).a,(this||p).b,(this||p).c,t)};z.getPlane=function(t){void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new dw);return t.setFromCoplanarPoints((this||p).a,(this||p).b,(this||p).c)};z.getBarycoord=function(t,w){return u.getBarycoord(t,(this||p).a,(this||p).b,(this||p).c,w)};z.getUV=function(t,w,C,G,M){return u.getUV(t,(this||p).a,(this||p).b,(this||p).c,w,C,G,M)};z.containsPoint=function(t){return u.containsPoint(t,(this||p).a,(this||p).b,(this||p).c)};z.isFrontFacing=
function(t){return u.isFrontFacing((this||p).a,(this||p).b,(this||p).c,t)};z.intersectsBox=function(t){return t.intersectsTriangle(this||p)};z.closestPointToPoint=function(t,w){void 0===w&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),w=new kc);var C=(this||p).a,G=(this||p).b,M=(this||p).c;OF.subVectors(G,C);PF.subVectors(M,C);IZ.subVectors(t,C);var Q=OF.dot(IZ),X=PF.dot(IZ);if(0>=Q&&0>=X)return w.copy(C);JZ.subVectors(t,G);var T=OF.dot(JZ),fa=PF.dot(JZ);if(0<=T&&
fa<=T)return w.copy(G);var oa=Q*fa-T*X;if(0>=oa&&0<=Q&&0>=T)return G=Q/(Q-T),w.copy(C).addScaledVector(OF,G);KZ.subVectors(t,M);t=OF.dot(KZ);var Ga=PF.dot(KZ);if(0<=Ga&&t<=Ga)return w.copy(M);Q=t*X-Q*Ga;if(0>=Q&&0<=X&&0>=Ga)return oa=X/(X-Ga),w.copy(C).addScaledVector(PF,oa);X=T*Ga-t*fa;if(0>=X&&0<=fa-T&&0<=t-Ga)return Hda.subVectors(M,G),oa=(fa-T)/(fa-T+(t-Ga)),w.copy(G).addScaledVector(Hda,oa);M=1/(X+Q+oa);G=Q*M;oa*=M;return w.copy(C).addScaledVector(OF,G).addScaledVector(PF,oa)};z.equals=function(t){return t.a.equals((this||
p).a)&&t.b.equals((this||p).b)&&t.c.equals((this||p).c)};return u}(),Ida={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,
darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,
gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,
lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,
orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,
steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pq={h:0,s:0,l:0},GQ={h:0,s:0,l:0},bg=function(){function u(t,w,C){Object.defineProperty(this||p,"isColor",{value:!0});return void 0===w&&void 0===C?this.set(t):this.setRGB(t,w,C)}var z=u.prototype;z.set=function(t){t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t);
return this||p};z.setScalar=function(t){(this||p).r=t;(this||p).g=t;(this||p).b=t;return this||p};z.setHex=function(t){t=Math.floor(t);(this||p).r=(t>>16&255)/255;(this||p).g=(t>>8&255)/255;(this||p).b=(t&255)/255;return this||p};z.setRGB=function(t,w,C){(this||p).r=t;(this||p).g=w;(this||p).b=C;return this||p};z.setHSL=function(t,w,C){t=Kh.euclideanModulo(t,1);w=Kh.clamp(w,0,1);C=Kh.clamp(C,0,1);0===w?(this||p).r=(this||p).g=(this||p).b=C:(w=.5>=C?C*(1+w):C+w-C*w,C=2*C-w,(this||p).r=H(C,w,t+1/3),
(this||p).g=H(C,w,t),(this||p).b=H(C,w,t-1/3));return this||p};z.setStyle=function(t){function w(X){void 0!==X&&1>parseFloat(X)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var C;if(C=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var G=C[2];switch(C[1]){case "rgb":case "rgba":if(C=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(G))return(this||p).r=Math.min(255,parseInt(C[1],10))/255,(this||p).g=Math.min(255,parseInt(C[2],10))/255,(this||p).b=Math.min(255,
parseInt(C[3],10))/255,w(C[4]),this||p;if(C=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(G))return(this||p).r=Math.min(100,parseInt(C[1],10))/100,(this||p).g=Math.min(100,parseInt(C[2],10))/100,(this||p).b=Math.min(100,parseInt(C[3],10))/100,w(C[4]),this||p;break;case "hsl":case "hsla":if(C=/^(\d*\.?\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(G)){G=parseFloat(C[1])/360;var M=parseInt(C[2],10)/100,Q=parseInt(C[3],10)/100;w(C[4]);return this.setHSL(G,M,Q)}}}else if(C=
/^#([A-Fa-f\d]+)$/.exec(t)){C=C[1];G=C.length;if(3===G)return(this||p).r=parseInt(C.charAt(0)+C.charAt(0),16)/255,(this||p).g=parseInt(C.charAt(1)+C.charAt(1),16)/255,(this||p).b=parseInt(C.charAt(2)+C.charAt(2),16)/255,this||p;if(6===G)return(this||p).r=parseInt(C.charAt(0)+C.charAt(1),16)/255,(this||p).g=parseInt(C.charAt(2)+C.charAt(3),16)/255,(this||p).b=parseInt(C.charAt(4)+C.charAt(5),16)/255,this||p}return t&&0<t.length?this.setColorName(t):this||p};z.setColorName=function(t){var w=Ida[t];
void 0!==w?this.setHex(w):console.warn("THREE.Color: Unknown color "+t);return this||p};z.clone=function(){return new (this||p).constructor((this||p).r,(this||p).g,(this||p).b)};z.copy=function(t){(this||p).r=t.r;(this||p).g=t.g;(this||p).b=t.b;return this||p};z.copyGammaToLinear=function(t,w){void 0===w&&(w=2);(this||p).r=Math.pow(t.r,w);(this||p).g=Math.pow(t.g,w);(this||p).b=Math.pow(t.b,w);return this||p};z.copyLinearToGamma=function(t,w){void 0===w&&(w=2);w=0<w?1/w:1;(this||p).r=Math.pow(t.r,
w);(this||p).g=Math.pow(t.g,w);(this||p).b=Math.pow(t.b,w);return this||p};z.convertGammaToLinear=function(t){this.copyGammaToLinear(this||p,t);return this||p};z.convertLinearToGamma=function(t){this.copyLinearToGamma(this||p,t);return this||p};z.copySRGBToLinear=function(t){(this||p).r=J(t.r);(this||p).g=J(t.g);(this||p).b=J(t.b);return this||p};z.copyLinearToSRGB=function(t){(this||p).r=O(t.r);(this||p).g=O(t.g);(this||p).b=O(t.b);return this||p};z.convertSRGBToLinear=function(){this.copySRGBToLinear(this||
p);return this||p};z.convertLinearToSRGB=function(){this.copyLinearToSRGB(this||p);return this||p};z.getHex=function(){return 255*(this||p).r<<16^255*(this||p).g<<8^255*(this||p).b<<0};z.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};z.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var w=(this||p).r,C=(this||p).g,G=(this||p).b,M=Math.max(w,C,G),Q=Math.min(w,C,G),X,T=(Q+M)/2;if(Q===M)Q=X=0;else{var fa=M-
Q;Q=.5>=T?fa/(M+Q):fa/(2-M-Q);switch(M){case w:X=(C-G)/fa+(C<G?6:0);break;case C:X=(G-w)/fa+2;break;case G:X=(w-C)/fa+4}X/=6}t.h=X;t.s=Q;t.l=T;return t};z.getStyle=function(){return"rgb("+(255*(this||p).r|0)+","+(255*(this||p).g|0)+","+(255*(this||p).b|0)+")"};z.offsetHSL=function(t,w,C){this.getHSL(pq);pq.h+=t;pq.s+=w;pq.l+=C;this.setHSL(pq.h,pq.s,pq.l);return this||p};z.add=function(t){(this||p).r+=t.r;(this||p).g+=t.g;(this||p).b+=t.b;return this||p};z.addColors=function(t,w){(this||p).r=t.r+w.r;
(this||p).g=t.g+w.g;(this||p).b=t.b+w.b;return this||p};z.addScalar=function(t){(this||p).r+=t;(this||p).g+=t;(this||p).b+=t;return this||p};z.sub=function(t){(this||p).r=Math.max(0,(this||p).r-t.r);(this||p).g=Math.max(0,(this||p).g-t.g);(this||p).b=Math.max(0,(this||p).b-t.b);return this||p};z.multiply=function(t){(this||p).r*=t.r;(this||p).g*=t.g;(this||p).b*=t.b;return this||p};z.multiplyScalar=function(t){(this||p).r*=t;(this||p).g*=t;(this||p).b*=t;return this||p};z.lerp=function(t,w){(this||
p).r+=(t.r-(this||p).r)*w;(this||p).g+=(t.g-(this||p).g)*w;(this||p).b+=(t.b-(this||p).b)*w;return this||p};z.lerpHSL=function(t,w){this.getHSL(pq);t.getHSL(GQ);t=Kh.lerp(pq.h,GQ.h,w);var C=Kh.lerp(pq.s,GQ.s,w);w=Kh.lerp(pq.l,GQ.l,w);this.setHSL(t,C,w);return this||p};z.equals=function(t){return t.r===(this||p).r&&t.g===(this||p).g&&t.b===(this||p).b};z.fromArray=function(t,w){void 0===w&&(w=0);(this||p).r=t[w];(this||p).g=t[w+1];(this||p).b=t[w+2];return this||p};z.toArray=function(t,w){void 0===
t&&(t=[]);void 0===w&&(w=0);t[w]=(this||p).r;t[w+1]=(this||p).g;t[w+2]=(this||p).b;return t};z.fromBufferAttribute=function(t,w){(this||p).r=t.getX(w);(this||p).g=t.getY(w);(this||p).b=t.getZ(w);!0===t.normalized&&((this||p).r/=255,(this||p).g/=255,(this||p).b/=255);return this||p};z.toJSON=function(){return this.getHex()};return u}();bg.NAMES=Ida;bg.prototype.r=1;bg.prototype.g=1;bg.prototype.b=1;var dJ=function(){function u(t,w,C,G,M,Q){void 0===Q&&(Q=0);(this||p).a=t;(this||p).b=w;(this||p).c=
C;(this||p).normal=G&&G.isVector3?G:new kc;(this||p).vertexNormals=Array.isArray(G)?G:[];(this||p).color=M&&M.isColor?M:new bg;(this||p).vertexColors=Array.isArray(M)?M:[];(this||p).materialIndex=Q}var z=u.prototype;z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).a=t.a;(this||p).b=t.b;(this||p).c=t.c;(this||p).normal.copy(t.normal);(this||p).color.copy(t.color);(this||p).materialIndex=t.materialIndex;for(var w=0,C=t.vertexNormals.length;w<C;w++)(this||
p).vertexNormals[w]=t.vertexNormals[w].clone();w=0;for(C=t.vertexColors.length;w<C;w++)(this||p).vertexColors[w]=t.vertexColors[w].clone();return this||p};return u}(),Iwa=0;L.prototype=Object.assign(Object.create(d.prototype),{constructor:L,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return(this||p).onBeforeCompile.toString()},setValues:function(u){if(void 0!==u)for(var z in u){var t=u[z];if(void 0===t)console.warn("THREE.Material: '"+z+"' parameter is undefined.");
else if("shading"===z)console.warn("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead."),(this||p).flatShading=1===t?!0:!1;else{var w=(this||p)[z];void 0===w?console.warn("THREE."+(this||p).type+": '"+z+"' is not a property of this material."):w&&w.isColor?w.set(t):w&&w.isVector3&&t&&t.isVector3?w.copy(t):(this||p)[z]=t}}},toJSON:function(u){function z(C){var G=[],M;for(M in C){var Q=C[M];delete Q.metadata;G.push(Q)}return G}var t=void 0===u||"string"===typeof u;
t&&(u={textures:{},images:{}});var w={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};w.uuid=(this||p).uuid;w.type=(this||p).type;""!==(this||p).name&&(w.name=(this||p).name);(this||p).color&&(this||p).color.isColor&&(w.color=(this||p).color.getHex());void 0!==(this||p).roughness&&(w.roughness=(this||p).roughness);void 0!==(this||p).metalness&&(w.metalness=(this||p).metalness);(this||p).sheen&&(this||p).sheen.isColor&&(w.sheen=(this||p).sheen.getHex());(this||p).emissive&&(this||
p).emissive.isColor&&(w.emissive=(this||p).emissive.getHex());(this||p).emissiveIntensity&&1!==(this||p).emissiveIntensity&&(w.emissiveIntensity=(this||p).emissiveIntensity);(this||p).specular&&(this||p).specular.isColor&&(w.specular=(this||p).specular.getHex());void 0!==(this||p).shininess&&(w.shininess=(this||p).shininess);void 0!==(this||p).clearcoat&&(w.clearcoat=(this||p).clearcoat);void 0!==(this||p).clearcoatRoughness&&(w.clearcoatRoughness=(this||p).clearcoatRoughness);(this||p).clearcoatMap&&
(this||p).clearcoatMap.isTexture&&(w.clearcoatMap=(this||p).clearcoatMap.toJSON(u).uuid);(this||p).clearcoatRoughnessMap&&(this||p).clearcoatRoughnessMap.isTexture&&(w.clearcoatRoughnessMap=(this||p).clearcoatRoughnessMap.toJSON(u).uuid);(this||p).clearcoatNormalMap&&(this||p).clearcoatNormalMap.isTexture&&(w.clearcoatNormalMap=(this||p).clearcoatNormalMap.toJSON(u).uuid,w.clearcoatNormalScale=(this||p).clearcoatNormalScale.toArray());(this||p).map&&(this||p).map.isTexture&&(w.map=(this||p).map.toJSON(u).uuid);
(this||p).matcap&&(this||p).matcap.isTexture&&(w.matcap=(this||p).matcap.toJSON(u).uuid);(this||p).alphaMap&&(this||p).alphaMap.isTexture&&(w.alphaMap=(this||p).alphaMap.toJSON(u).uuid);(this||p).lightMap&&(this||p).lightMap.isTexture&&(w.lightMap=(this||p).lightMap.toJSON(u).uuid);(this||p).aoMap&&(this||p).aoMap.isTexture&&(w.aoMap=(this||p).aoMap.toJSON(u).uuid,w.aoMapIntensity=(this||p).aoMapIntensity);(this||p).bumpMap&&(this||p).bumpMap.isTexture&&(w.bumpMap=(this||p).bumpMap.toJSON(u).uuid,
w.bumpScale=(this||p).bumpScale);(this||p).normalMap&&(this||p).normalMap.isTexture&&(w.normalMap=(this||p).normalMap.toJSON(u).uuid,w.normalMapType=(this||p).normalMapType,w.normalScale=(this||p).normalScale.toArray());(this||p).displacementMap&&(this||p).displacementMap.isTexture&&(w.displacementMap=(this||p).displacementMap.toJSON(u).uuid,w.displacementScale=(this||p).displacementScale,w.displacementBias=(this||p).displacementBias);(this||p).roughnessMap&&(this||p).roughnessMap.isTexture&&(w.roughnessMap=
(this||p).roughnessMap.toJSON(u).uuid);(this||p).metalnessMap&&(this||p).metalnessMap.isTexture&&(w.metalnessMap=(this||p).metalnessMap.toJSON(u).uuid);(this||p).emissiveMap&&(this||p).emissiveMap.isTexture&&(w.emissiveMap=(this||p).emissiveMap.toJSON(u).uuid);(this||p).specularMap&&(this||p).specularMap.isTexture&&(w.specularMap=(this||p).specularMap.toJSON(u).uuid);(this||p).envMap&&(this||p).envMap.isTexture&&(w.envMap=(this||p).envMap.toJSON(u).uuid,w.reflectivity=(this||p).reflectivity,w.refractionRatio=
(this||p).refractionRatio,void 0!==(this||p).combine&&(w.combine=(this||p).combine),void 0!==(this||p).envMapIntensity&&(w.envMapIntensity=(this||p).envMapIntensity));(this||p).gradientMap&&(this||p).gradientMap.isTexture&&(w.gradientMap=(this||p).gradientMap.toJSON(u).uuid);void 0!==(this||p).size&&(w.size=(this||p).size);void 0!==(this||p).sizeAttenuation&&(w.sizeAttenuation=(this||p).sizeAttenuation);1!==(this||p).blending&&(w.blending=(this||p).blending);!0===(this||p).flatShading&&(w.flatShading=
(this||p).flatShading);0!==(this||p).side&&(w.side=(this||p).side);(this||p).vertexColors&&(w.vertexColors=!0);1>(this||p).opacity&&(w.opacity=(this||p).opacity);!0===(this||p).transparent&&(w.transparent=(this||p).transparent);w.depthFunc=(this||p).depthFunc;w.depthTest=(this||p).depthTest;w.depthWrite=(this||p).depthWrite;w.stencilWrite=(this||p).stencilWrite;w.stencilWriteMask=(this||p).stencilWriteMask;w.stencilFunc=(this||p).stencilFunc;w.stencilRef=(this||p).stencilRef;w.stencilFuncMask=(this||
p).stencilFuncMask;w.stencilFail=(this||p).stencilFail;w.stencilZFail=(this||p).stencilZFail;w.stencilZPass=(this||p).stencilZPass;(this||p).rotation&&0!==(this||p).rotation&&(w.rotation=(this||p).rotation);!0===(this||p).polygonOffset&&(w.polygonOffset=!0);0!==(this||p).polygonOffsetFactor&&(w.polygonOffsetFactor=(this||p).polygonOffsetFactor);0!==(this||p).polygonOffsetUnits&&(w.polygonOffsetUnits=(this||p).polygonOffsetUnits);(this||p).linewidth&&1!==(this||p).linewidth&&(w.linewidth=(this||p).linewidth);
void 0!==(this||p).dashSize&&(w.dashSize=(this||p).dashSize);void 0!==(this||p).gapSize&&(w.gapSize=(this||p).gapSize);void 0!==(this||p).scale&&(w.scale=(this||p).scale);!0===(this||p).dithering&&(w.dithering=!0);0<(this||p).alphaTest&&(w.alphaTest=(this||p).alphaTest);!0===(this||p).premultipliedAlpha&&(w.premultipliedAlpha=(this||p).premultipliedAlpha);!0===(this||p).wireframe&&(w.wireframe=(this||p).wireframe);1<(this||p).wireframeLinewidth&&(w.wireframeLinewidth=(this||p).wireframeLinewidth);
"round"!==(this||p).wireframeLinecap&&(w.wireframeLinecap=(this||p).wireframeLinecap);"round"!==(this||p).wireframeLinejoin&&(w.wireframeLinejoin=(this||p).wireframeLinejoin);!0===(this||p).morphTargets&&(w.morphTargets=!0);!0===(this||p).morphNormals&&(w.morphNormals=!0);!0===(this||p).skinning&&(w.skinning=!0);!1===(this||p).visible&&(w.visible=!1);!1===(this||p).toneMapped&&(w.toneMapped=!1);"{}"!==JSON.stringify((this||p).userData)&&(w.userData=(this||p).userData);t&&(t=z(u.textures),u=z(u.images),
0<t.length&&(w.textures=t),0<u.length&&(w.images=u));return w},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).fog=u.fog;(this||p).blending=u.blending;(this||p).side=u.side;(this||p).flatShading=u.flatShading;(this||p).vertexColors=u.vertexColors;(this||p).opacity=u.opacity;(this||p).transparent=u.transparent;(this||p).blendSrc=u.blendSrc;(this||p).blendDst=u.blendDst;(this||p).blendEquation=u.blendEquation;(this||p).blendSrcAlpha=
u.blendSrcAlpha;(this||p).blendDstAlpha=u.blendDstAlpha;(this||p).blendEquationAlpha=u.blendEquationAlpha;(this||p).depthFunc=u.depthFunc;(this||p).depthTest=u.depthTest;(this||p).depthWrite=u.depthWrite;(this||p).stencilWriteMask=u.stencilWriteMask;(this||p).stencilFunc=u.stencilFunc;(this||p).stencilRef=u.stencilRef;(this||p).stencilFuncMask=u.stencilFuncMask;(this||p).stencilFail=u.stencilFail;(this||p).stencilZFail=u.stencilZFail;(this||p).stencilZPass=u.stencilZPass;(this||p).stencilWrite=u.stencilWrite;
var z=u.clippingPlanes,t=null;if(null!==z){var w=z.length;t=Array(w);for(var C=0;C!==w;++C)t[C]=z[C].clone()}(this||p).clippingPlanes=t;(this||p).clipIntersection=u.clipIntersection;(this||p).clipShadows=u.clipShadows;(this||p).shadowSide=u.shadowSide;(this||p).colorWrite=u.colorWrite;(this||p).precision=u.precision;(this||p).polygonOffset=u.polygonOffset;(this||p).polygonOffsetFactor=u.polygonOffsetFactor;(this||p).polygonOffsetUnits=u.polygonOffsetUnits;(this||p).dithering=u.dithering;(this||p).alphaTest=
u.alphaTest;(this||p).premultipliedAlpha=u.premultipliedAlpha;(this||p).visible=u.visible;(this||p).toneMapped=u.toneMapped;(this||p).userData=JSON.parse(JSON.stringify(u.userData));return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(L.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Y.prototype=Object.create(L.prototype);Y.prototype.constructor=Y;Y.prototype.isMeshBasicMaterial=!0;Y.prototype.copy=function(u){L.prototype.copy.call(this||
p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=
u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;return this||p};var bl=new kc,HQ=new Je;Object.defineProperty(S.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(S.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).name=u.name;(this||p).array=new u.array.constructor(u.array);(this||p).itemSize=
u.itemSize;(this||p).count=u.count;(this||p).normalized=u.normalized;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||p).itemSize;t*=z.itemSize;for(var w=0,C=(this||p).itemSize;w<C;w++)(this||p).array[u+w]=z.array[t+w];return this||p},copyArray:function(u){(this||p).array.set(u);return this||p},copyColorsArray:function(u){for(var z=(this||p).array,t=0,w=0,C=u.length;w<C;w++){var G=u[w];void 0===G&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",
w),G=new bg);z[t++]=G.r;z[t++]=G.g;z[t++]=G.b}return this||p},copyVector2sArray:function(u){for(var z=(this||p).array,t=0,w=0,C=u.length;w<C;w++){var G=u[w];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",w),G=new Je);z[t++]=G.x;z[t++]=G.y}return this||p},copyVector3sArray:function(u){for(var z=(this||p).array,t=0,w=0,C=u.length;w<C;w++){var G=u[w];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",w),G=new kc);z[t++]=
G.x;z[t++]=G.y;z[t++]=G.z}return this||p},copyVector4sArray:function(u){for(var z=(this||p).array,t=0,w=0,C=u.length;w<C;w++){var G=u[w];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",w),G=new Gk);z[t++]=G.x;z[t++]=G.y;z[t++]=G.z;z[t++]=G.w}return this||p},applyMatrix3:function(u){if(2===(this||p).itemSize)for(var z=0,t=(this||p).count;z<t;z++)HQ.fromBufferAttribute(this||p,z),HQ.applyMatrix3(u),this.setXY(z,HQ.x,HQ.y);else if(3===(this||p).itemSize)for(z=
0,t=(this||p).count;z<t;z++)bl.fromBufferAttribute(this||p,z),bl.applyMatrix3(u),this.setXYZ(z,bl.x,bl.y,bl.z);return this||p},applyMatrix4:function(u){for(var z=0,t=(this||p).count;z<t;z++)bl.x=this.getX(z),bl.y=this.getY(z),bl.z=this.getZ(z),bl.applyMatrix4(u),this.setXYZ(z,bl.x,bl.y,bl.z);return this||p},applyNormalMatrix:function(u){for(var z=0,t=(this||p).count;z<t;z++)bl.x=this.getX(z),bl.y=this.getY(z),bl.z=this.getZ(z),bl.applyNormalMatrix(u),this.setXYZ(z,bl.x,bl.y,bl.z);return this||p},
transformDirection:function(u){for(var z=0,t=(this||p).count;z<t;z++)bl.x=this.getX(z),bl.y=this.getY(z),bl.z=this.getZ(z),bl.transformDirection(u),this.setXYZ(z,bl.x,bl.y,bl.z);return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},getX:function(u){return(this||p).array[u*(this||p).itemSize]},setX:function(u,z){(this||p).array[u*(this||p).itemSize]=z;return this||p},getY:function(u){return(this||p).array[u*(this||p).itemSize+1]},setY:function(u,z){(this||p).array[u*
(this||p).itemSize+1]=z;return this||p},getZ:function(u){return(this||p).array[u*(this||p).itemSize+2]},setZ:function(u,z){(this||p).array[u*(this||p).itemSize+2]=z;return this||p},getW:function(u){return(this||p).array[u*(this||p).itemSize+3]},setW:function(u,z){(this||p).array[u*(this||p).itemSize+3]=z;return this||p},setXY:function(u,z,t){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;return this||p},setXYZ:function(u,z,t,w){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||
p).array[u+1]=t;(this||p).array[u+2]=w;return this||p},setXYZW:function(u,z,t,w,C){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;(this||p).array[u+2]=w;(this||p).array[u+3]=C;return this||p},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},clone:function(){return(new (this||p).constructor((this||p).array,(this||p).itemSize)).copy(this||p)},toJSON:function(){return{itemSize:(this||p).itemSize,type:(this||p).array.constructor.name,array:Array.prototype.slice.call((this||
p).array),normalized:(this||p).normalized}}});ea.prototype=Object.create(S.prototype);ea.prototype.constructor=ea;qa.prototype=Object.create(S.prototype);qa.prototype.constructor=qa;Fa.prototype=Object.create(S.prototype);Fa.prototype.constructor=Fa;K.prototype=Object.create(S.prototype);K.prototype.constructor=K;Z.prototype=Object.create(S.prototype);Z.prototype.constructor=Z;R.prototype=Object.create(S.prototype);R.prototype.constructor=R;U.prototype=Object.create(S.prototype);U.prototype.constructor=
U;na.prototype=Object.create(S.prototype);na.prototype.constructor=na;na.prototype.isFloat16BufferAttribute=!0;aa.prototype=Object.create(S.prototype);aa.prototype.constructor=aa;xa.prototype=Object.create(S.prototype);xa.prototype.constructor=xa;var jxa=function(){function u(){(this||p).vertices=[];(this||p).normals=[];(this||p).colors=[];(this||p).uvs=[];(this||p).uvs2=[];(this||p).groups=[];(this||p).morphTargets={};(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).boundingBox=null;(this||
p).boundingSphere=null;(this||p).verticesNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=!1;(this||p).uvsNeedUpdate=!1;(this||p).groupsNeedUpdate=!1}var z=u.prototype;z.computeGroups=function(t){var w=[],C=void 0,G=t.faces;for(t=0;t<G.length;t++){var M=G[t];if(M.materialIndex!==C){C=M.materialIndex;void 0!==Q&&(Q.count=3*t-Q.start,w.push(Q));var Q={start:3*t,materialIndex:C}}}void 0!==Q&&(Q.count=3*t-Q.start,w.push(Q));(this||p).groups=w};z.fromGeometry=function(t){var w=t.faces,
C=t.vertices,G=t.faceVertexUvs,M=G[0]&&0<G[0].length,Q=G[1]&&0<G[1].length,X=t.morphTargets,T=X.length;if(0<T){var fa=[];for(var oa=0;oa<T;oa++)fa[oa]={name:X[oa].name,data:[]};(this||p).morphTargets.position=fa}oa=t.morphNormals;var Ga=oa.length;if(0<Ga){var Xa=[];for(var Wa=0;Wa<Ga;Wa++)Xa[Wa]={name:oa[Wa].name,data:[]};(this||p).morphTargets.normal=Xa}Wa=t.skinIndices;var tb=t.skinWeights,mb=Wa.length===C.length,Kc=tb.length===C.length;0<C.length&&0===w.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");
for(var ic=0;ic<w.length;ic++){var Lc=w[ic];(this||p).vertices.push(C[Lc.a],C[Lc.b],C[Lc.c]);var vc=Lc.vertexNormals;3===vc.length?(this||p).normals.push(vc[0],vc[1],vc[2]):(vc=Lc.normal,(this||p).normals.push(vc,vc,vc));vc=Lc.vertexColors;3===vc.length?(this||p).colors.push(vc[0],vc[1],vc[2]):(vc=Lc.color,(this||p).colors.push(vc,vc,vc));!0===M&&(vc=G[0][ic],void 0!==vc?(this||p).uvs.push(vc[0],vc[1],vc[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",ic),(this||p).uvs.push(new Je,
new Je,new Je)));!0===Q&&(vc=G[1][ic],void 0!==vc?(this||p).uvs2.push(vc[0],vc[1],vc[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",ic),(this||p).uvs2.push(new Je,new Je,new Je)));for(vc=0;vc<T;vc++){var Yc=X[vc].vertices;fa[vc].data.push(Yc[Lc.a],Yc[Lc.b],Yc[Lc.c])}for(vc=0;vc<Ga;vc++)Yc=oa[vc].vertexNormals[ic],Xa[vc].data.push(Yc.a,Yc.b,Yc.c);mb&&(this||p).skinIndices.push(Wa[Lc.a],Wa[Lc.b],Wa[Lc.c]);Kc&&(this||p).skinWeights.push(tb[Lc.a],tb[Lc.b],tb[Lc.c])}this.computeGroups(t);
(this||p).verticesNeedUpdate=t.verticesNeedUpdate;(this||p).normalsNeedUpdate=t.normalsNeedUpdate;(this||p).colorsNeedUpdate=t.colorsNeedUpdate;(this||p).uvsNeedUpdate=t.uvsNeedUpdate;(this||p).groupsNeedUpdate=t.groupsNeedUpdate;null!==t.boundingSphere&&((this||p).boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&((this||p).boundingBox=t.boundingBox.clone());return this||p};return u}(),FJ={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?
Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},Jwa=1,kw=new Qi,LZ=new F,QF=new kc,zr=new jw,GJ=new jw,Tn=new kc;ob.prototype=Object.assign(Object.create(d.prototype),{constructor:ob,isBufferGeometry:!0,getIndex:function(){return(this||p).index},setIndex:function(u){Array.isArray(u)?(this||p).index=new (65535<jb(u)?U:Z)(u,1):(this||p).index=u;return this||p},getAttribute:function(u){return(this||
p).attributes[u]},setAttribute:function(u,z){(this||p).attributes[u]=z;return this||p},deleteAttribute:function(u){delete (this||p).attributes[u];return this||p},hasAttribute:function(u){return void 0!==(this||p).attributes[u]},addGroup:function(u,z,t){void 0===t&&(t=0);(this||p).groups.push({start:u,count:z,materialIndex:t})},clearGroups:function(){(this||p).groups=[]},setDrawRange:function(u,z){(this||p).drawRange.start=u;(this||p).drawRange.count=z},applyMatrix4:function(u){var z=(this||p).attributes.position;
void 0!==z&&(z.applyMatrix4(u),z.needsUpdate=!0);z=(this||p).attributes.normal;if(void 0!==z){var t=(new Cp).getNormalMatrix(u);z.applyNormalMatrix(t);z.needsUpdate=!0}z=(this||p).attributes.tangent;void 0!==z&&(z.transformDirection(u),z.needsUpdate=!0);null!==(this||p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&this.computeBoundingSphere();return this||p},rotateX:function(u){kw.makeRotationX(u);this.applyMatrix4(kw);return this||p},rotateY:function(u){kw.makeRotationY(u);
this.applyMatrix4(kw);return this||p},rotateZ:function(u){kw.makeRotationZ(u);this.applyMatrix4(kw);return this||p},translate:function(u,z,t){kw.makeTranslation(u,z,t);this.applyMatrix4(kw);return this||p},scale:function(u,z,t){kw.makeScale(u,z,t);this.applyMatrix4(kw);return this||p},lookAt:function(u){LZ.lookAt(u);LZ.updateMatrix();this.applyMatrix4(LZ.matrix);return this||p},center:function(){this.computeBoundingBox();(this||p).boundingBox.getCenter(QF).negate();this.translate(QF.x,QF.y,QF.z);
return this||p},setFromObject:function(u){var z=u.geometry;if(u.isPoints||u.isLine){u=new aa(3*z.vertices.length,3);var t=new aa(3*z.colors.length,3);this.setAttribute("position",u.copyVector3sArray(z.vertices));this.setAttribute("color",t.copyColorsArray(z.colors));z.lineDistances&&z.lineDistances.length===z.vertices.length&&(u=new aa(z.lineDistances.length,1),this.setAttribute("lineDistance",u.copyArray(z.lineDistances)));null!==z.boundingSphere&&((this||p).boundingSphere=z.boundingSphere.clone());
null!==z.boundingBox&&((this||p).boundingBox=z.boundingBox.clone())}else u.isMesh&&z&&z.isGeometry&&this.fromGeometry(z);return this||p},setFromPoints:function(u){for(var z=[],t=0,w=u.length;t<w;t++){var C=u[t];z.push(C.x,C.y,C.z||0)}this.setAttribute("position",new aa(z,3));return this||p},updateFromObject:function(u){var z=u.geometry;if(u.isMesh){var t=z.__directGeometry;!0===z.elementsNeedUpdate&&(t=void 0,z.elementsNeedUpdate=!1);if(void 0===t)return this.fromGeometry(z);t.verticesNeedUpdate=
z.verticesNeedUpdate;t.normalsNeedUpdate=z.normalsNeedUpdate;t.colorsNeedUpdate=z.colorsNeedUpdate;t.uvsNeedUpdate=z.uvsNeedUpdate;t.groupsNeedUpdate=z.groupsNeedUpdate;z.verticesNeedUpdate=!1;z.normalsNeedUpdate=!1;z.colorsNeedUpdate=!1;z.uvsNeedUpdate=!1;z.groupsNeedUpdate=!1;z=t}!0===z.verticesNeedUpdate&&(t=(this||p).attributes.position,void 0!==t&&(t.copyVector3sArray(z.vertices),t.needsUpdate=!0),z.verticesNeedUpdate=!1);!0===z.normalsNeedUpdate&&(t=(this||p).attributes.normal,void 0!==t&&(t.copyVector3sArray(z.normals),
t.needsUpdate=!0),z.normalsNeedUpdate=!1);!0===z.colorsNeedUpdate&&(t=(this||p).attributes.color,void 0!==t&&(t.copyColorsArray(z.colors),t.needsUpdate=!0),z.colorsNeedUpdate=!1);z.uvsNeedUpdate&&(t=(this||p).attributes.uv,void 0!==t&&(t.copyVector2sArray(z.uvs),t.needsUpdate=!0),z.uvsNeedUpdate=!1);z.lineDistancesNeedUpdate&&(t=(this||p).attributes.lineDistance,void 0!==t&&(t.copyArray(z.lineDistances),t.needsUpdate=!0),z.lineDistancesNeedUpdate=!1);z.groupsNeedUpdate&&(z.computeGroups(u.geometry),
(this||p).groups=z.groups,z.groupsNeedUpdate=!1);return this||p},fromGeometry:function(u){u.__directGeometry=(new jxa).fromGeometry(u);return this.fromDirectGeometry(u.__directGeometry)},fromDirectGeometry:function(u){var z=new Float32Array(3*u.vertices.length);this.setAttribute("position",(new S(z,3)).copyVector3sArray(u.vertices));0<u.normals.length&&(z=new Float32Array(3*u.normals.length),this.setAttribute("normal",(new S(z,3)).copyVector3sArray(u.normals)));0<u.colors.length&&(z=new Float32Array(3*
u.colors.length),this.setAttribute("color",(new S(z,3)).copyColorsArray(u.colors)));0<u.uvs.length&&(z=new Float32Array(2*u.uvs.length),this.setAttribute("uv",(new S(z,2)).copyVector2sArray(u.uvs)));0<u.uvs2.length&&(z=new Float32Array(2*u.uvs2.length),this.setAttribute("uv2",(new S(z,2)).copyVector2sArray(u.uvs2)));(this||p).groups=u.groups;for(var t in u.morphTargets){z=[];for(var w=u.morphTargets[t],C=0,G=w.length;C<G;C++){var M=w[C],Q=new aa(3*M.data.length,3);Q.name=M.name;z.push(Q.copyVector3sArray(M.data))}(this||
p).morphAttributes[t]=z}0<u.skinIndices.length&&(t=new aa(4*u.skinIndices.length,4),this.setAttribute("skinIndex",t.copyVector4sArray(u.skinIndices)));0<u.skinWeights.length&&(t=new aa(4*u.skinWeights.length,4),this.setAttribute("skinWeight",t.copyVector4sArray(u.skinWeights)));null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());null!==u.boundingBox&&((this||p).boundingBox=u.boundingBox.clone());return this||p},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||
p).boundingBox=new jw);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this||p),(this||p).boundingBox.set(new kc(-Infinity,-Infinity,-Infinity),new kc(Infinity,Infinity,Infinity));else{if(void 0!==u){if((this||p).boundingBox.setFromBufferAttribute(u),z){u=0;for(var t=z.length;u<t;u++)zr.setFromBufferAttribute(z[u]),
(this||p).morphTargetsRelative?(Tn.addVectors((this||p).boundingBox.min,zr.min),(this||p).boundingBox.expandByPoint(Tn),Tn.addVectors((this||p).boundingBox.max,zr.max),(this||p).boundingBox.expandByPoint(Tn)):((this||p).boundingBox.expandByPoint(zr.min),(this||p).boundingBox.expandByPoint(zr.max))}}else(this||p).boundingBox.makeEmpty();(isNaN((this||p).boundingBox.min.x)||isNaN((this||p).boundingBox.min.y)||isNaN((this||p).boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
this||p)}},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new Tx);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this||p),(this||p).boundingSphere.set(new kc,Infinity);else if(u){var t=(this||p).boundingSphere.center;zr.setFromBufferAttribute(u);
if(z)for(var w=0,C=z.length;w<C;w++)GJ.setFromBufferAttribute(z[w]),(this||p).morphTargetsRelative?(Tn.addVectors(zr.min,GJ.min),zr.expandByPoint(Tn),Tn.addVectors(zr.max,GJ.max),zr.expandByPoint(Tn)):(zr.expandByPoint(GJ.min),zr.expandByPoint(GJ.max));zr.getCenter(t);C=w=0;for(var G=u.count;C<G;C++)Tn.fromBufferAttribute(u,C),w=Math.max(w,t.distanceToSquared(Tn));if(z)for(C=0,G=z.length;C<G;C++)for(var M=z[C],Q=(this||p).morphTargetsRelative,X=0,T=M.count;X<T;X++)Tn.fromBufferAttribute(M,X),Q&&(QF.fromBufferAttribute(u,
X),Tn.add(QF)),w=Math.max(w,t.distanceToSquared(Tn));(this||p).boundingSphere.radius=Math.sqrt(w);isNaN((this||p).boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this||p)}},computeFaceNormals:function(){},computeVertexNormals:function(){var u=(this||p).index,z=this.getAttribute("position");if(void 0!==z){var t=this.getAttribute("normal");if(void 0===t)t=new S(new Float32Array(3*z.count),
3),this.setAttribute("normal",t);else for(var w=0,C=t.count;w<C;w++)t.setXYZ(w,0,0,0);w=new kc;C=new kc;var G=new kc,M=new kc,Q=new kc,X=new kc,T=new kc,fa=new kc;if(u)for(var oa=0,Ga=u.count;oa<Ga;oa+=3){var Xa=u.getX(oa+0),Wa=u.getX(oa+1),tb=u.getX(oa+2);w.fromBufferAttribute(z,Xa);C.fromBufferAttribute(z,Wa);G.fromBufferAttribute(z,tb);T.subVectors(G,C);fa.subVectors(w,C);T.cross(fa);M.fromBufferAttribute(t,Xa);Q.fromBufferAttribute(t,Wa);X.fromBufferAttribute(t,tb);M.add(T);Q.add(T);X.add(T);
t.setXYZ(Xa,M.x,M.y,M.z);t.setXYZ(Wa,Q.x,Q.y,Q.z);t.setXYZ(tb,X.x,X.y,X.z)}else for(u=0,M=z.count;u<M;u+=3)w.fromBufferAttribute(z,u+0),C.fromBufferAttribute(z,u+1),G.fromBufferAttribute(z,u+2),T.subVectors(G,C),fa.subVectors(w,C),T.cross(fa),t.setXYZ(u+0,T.x,T.y,T.z),t.setXYZ(u+1,T.x,T.y,T.z),t.setXYZ(u+2,T.x,T.y,T.z);this.normalizeNormals();t.needsUpdate=!0}},merge:function(u,z){if(u&&u.isBufferGeometry){void 0===z&&(z=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));
var t=(this||p).attributes,w;for(w in t)if(void 0!==u.attributes[w]){var C=t[w].array,G=u.attributes[w],M=G.array,Q=G.itemSize*z;G=Math.min(M.length,C.length-Q);for(var X=0;X<G;X++,Q++)C[Q]=M[X]}return this||p}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",u)},normalizeNormals:function(){for(var u=(this||p).attributes.normal,z=0,t=u.count;z<t;z++)Tn.fromBufferAttribute(u,z),Tn.normalize(),u.setXYZ(z,Tn.x,Tn.y,Tn.z)},toNonIndexed:function(){function u(fa,
oa){var Ga=fa.array,Xa=fa.itemSize;fa=fa.normalized;for(var Wa=new Ga.constructor(oa.length*Xa),tb,mb=0,Kc=0,ic=oa.length;Kc<ic;Kc++){tb=oa[Kc]*Xa;for(var Lc=0;Lc<Xa;Lc++)Wa[mb++]=Ga[tb++]}return new S(Wa,Xa,fa)}if(null===(this||p).index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this||p;var z=new ob,t=(this||p).index.array,w=(this||p).attributes;for(M in w){var C=u(w[M],t);z.setAttribute(M,C)}w=(this||p).morphAttributes;for(var G in w){var M=[];C=
w[G];for(var Q=0,X=C.length;Q<X;Q++){var T=u(C[Q],t);M.push(T)}z.morphAttributes[G]=M}z.morphTargetsRelative=(this||p).morphTargetsRelative;t=(this||p).groups;G=0;for(w=t.length;G<w;G++)M=t[G],z.addGroup(M.start,M.count,M.materialIndex);return z},toJSON:function(){var u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};u.uuid=(this||p).uuid;u.type=(this||p).type;""!==(this||p).name&&(u.name=(this||p).name);0<Object.keys((this||p).userData).length&&(u.userData=(this||
p).userData);if(void 0!==(this||p).parameters){var z=(this||p).parameters;for(t in z)void 0!==z[t]&&(u[t]=z[t]);return u}u.data={attributes:{}};var t=(this||p).index;null!==t&&(u.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});t=(this||p).attributes;for(var w in t){var C=t[w],G=C.toJSON(u.data);""!==C.name&&(G.name=C.name);u.data.attributes[w]=G}w={};t=!1;for(z in(this||p).morphAttributes){C=(this||p).morphAttributes[z];G=[];for(var M=0,Q=C.length;M<Q;M++){var X=
C[M],T=X.toJSON(u.data);""!==X.name&&(T.name=X.name);G.push(T)}0<G.length&&(w[z]=G,t=!0)}t&&(u.data.morphAttributes=w,u.data.morphTargetsRelative=(this||p).morphTargetsRelative);z=(this||p).groups;0<z.length&&(u.data.groups=JSON.parse(JSON.stringify(z)));z=(this||p).boundingSphere;null!==z&&(u.data.boundingSphere={center:z.center.toArray(),radius:z.radius});return u},clone:function(){return(new ob).copy(this||p)},copy:function(u){(this||p).index=null;(this||p).attributes={};(this||p).morphAttributes=
{};(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;var z={};(this||p).name=u.name;var t=u.index;null!==t&&this.setIndex(t.clone(z));t=u.attributes;for(var w in t)this.setAttribute(w,t[w].clone(z));w=u.morphAttributes;for(var C in w){t=[];for(var G=w[C],M=0,Q=G.length;M<Q;M++)t.push(G[M].clone(z));(this||p).morphAttributes[C]=t}(this||p).morphTargetsRelative=u.morphTargetsRelative;z=u.groups;C=0;for(w=z.length;C<w;C++)t=z[C],this.addGroup(t.start,t.count,t.materialIndex);
z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).drawRange.start=u.drawRange.start;(this||p).drawRange.count=u.drawRange.count;(this||p).userData=u.userData;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Jda=new Qi,OC=new HF,MZ=new Tx,dA=new kc,eA=new kc,fA=new kc,SY=new kc,TY=new kc,UY=new kc,RP=new kc,SP=new kc,TP=new kc,tF=new Je,uF=new Je,vF=new Je,cJ=new kc,QP=new kc;pa.prototype=
Object.assign(Object.create(F.prototype),{constructor:pa,isMesh:!0,copy:function(u){F.prototype.copy.call(this||p,u);void 0!==u.morphTargetInfluences&&((this||p).morphTargetInfluences=u.morphTargetInfluences.slice());void 0!==u.morphTargetDictionary&&((this||p).morphTargetDictionary=Object.assign({},u.morphTargetDictionary));(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;
var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var w=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[w]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(u,z){var t=(this||p).geometry,w=(this||p).material,
C=(this||p).matrixWorld;if(void 0!==w&&(null===t.boundingSphere&&t.computeBoundingSphere(),MZ.copy(t.boundingSphere),MZ.applyMatrix4(C),!1!==u.ray.intersectsSphere(MZ)&&(Jda.copy(C).invert(),OC.copy(u.ray).applyMatrix4(Jda),null===t.boundingBox||!1!==OC.intersectsBox(t.boundingBox))))if(t.isBufferGeometry){var G=t.index,M=t.attributes.position;C=t.morphAttributes.position;var Q=t.morphTargetsRelative,X=t.attributes.uv,T=t.attributes.uv2,fa=t.groups,oa=t.drawRange;if(null!==G)if(Array.isArray(w))for(var Ga=
0,Xa=fa.length;Ga<Xa;Ga++)for(var Wa=fa[Ga],tb=w[Wa.materialIndex],mb=Math.max(Wa.start,oa.start),Kc=Math.min(Wa.start+Wa.count,oa.start+oa.count);mb<Kc;mb+=3){t=G.getX(mb);var ic=G.getX(mb+1),Lc=G.getX(mb+2);if(t=wa(this||p,tb,u,OC,M,C,Q,X,T,t,ic,Lc))t.faceIndex=Math.floor(mb/3),t.face.materialIndex=Wa.materialIndex,z.push(t)}else for(fa=Math.max(0,oa.start),oa=Math.min(G.count,oa.start+oa.count);fa<oa;fa+=3){if(t=G.getX(fa),Ga=G.getX(fa+1),Xa=G.getX(fa+2),t=wa(this||p,w,u,OC,M,C,Q,X,T,t,Ga,Xa))t.faceIndex=
Math.floor(fa/3),z.push(t)}else if(void 0!==M)if(Array.isArray(w))for(G=0,Ga=fa.length;G<Ga;G++)for(Xa=fa[G],Wa=w[Xa.materialIndex],tb=Math.max(Xa.start,oa.start),mb=Math.min(Xa.start+Xa.count,oa.start+oa.count);tb<mb;tb+=3){if(t=wa(this||p,Wa,u,OC,M,C,Q,X,T,tb,tb+1,tb+2))t.faceIndex=Math.floor(tb/3),t.face.materialIndex=Xa.materialIndex,z.push(t)}else for(fa=Math.max(0,oa.start),oa=Math.min(M.count,oa.start+oa.count);fa<oa;fa+=3)if(t=wa(this||p,w,u,OC,M,C,Q,X,T,fa,fa+1,fa+2))t.faceIndex=Math.floor(fa/
3),z.push(t)}else if(t.isGeometry)for(C=Array.isArray(w),Q=t.vertices,X=t.faces,t=t.faceVertexUvs[0],0<t.length&&(M=t),T=0,oa=X.length;T<oa;T++)if(fa=X[T],t=C?w[fa.materialIndex]:w,void 0!==t&&(G=Q[fa.a],Ga=Q[fa.b],Xa=Q[fa.c],t=ka(this||p,t,u,OC,G,Ga,Xa,cJ)))M&&M[T]&&(Wa=M[T],tF.copy(Wa[0]),uF.copy(Wa[1]),vF.copy(Wa[2]),t.uv=cu.getUV(cJ,G,Ga,Xa,tF,uF,vF,new Je)),t.face=fa,t.faceIndex=T,z.push(t)}});var eJ=function(u){function z(t,w,C,G,M,Q){function X(Kc,ic,Lc,vc,Yc,fd,Zc,Rd,ld,sd,Ae){var qe=fd/ld,
Qf=Zc/sd,Af=fd/2,Mf=Zc/2,jg=Rd/2;Zc=ld+1;for(var ah=sd+1,Lh=fd=0,mh=new kc,Mj=0;Mj<ah;Mj++)for(var lk=Mj*Qf-Mf,tl=0;tl<Zc;tl++)mh[Kc]=(tl*qe-Af)*vc,mh[ic]=lk*Yc,mh[Lc]=jg,Ga.push(mh.x,mh.y,mh.z),mh[Kc]=0,mh[ic]=0,mh[Lc]=0<Rd?1:-1,Xa.push(mh.x,mh.y,mh.z),Wa.push(tl/ld),Wa.push(1-Mj/sd),fd+=1;for(Kc=0;Kc<sd;Kc++)for(ic=0;ic<ld;ic++)Lc=tb+ic+Zc*(Kc+1),vc=tb+(ic+1)+Zc*(Kc+1),Yc=tb+(ic+1)+Zc*Kc,oa.push(tb+ic+Zc*Kc,Lc,Yc),oa.push(Lc,vc,Yc),Lh+=6;fa.addGroup(mb,Lh,Ae);mb+=Lh;tb+=fd}void 0===t&&(t=1);void 0===
w&&(w=1);void 0===C&&(C=1);void 0===G&&(G=1);void 0===M&&(M=1);void 0===Q&&(Q=1);var T=u.call(this||p)||this||p;T.type="BoxBufferGeometry";T.parameters={width:t,height:w,depth:C,widthSegments:G,heightSegments:M,depthSegments:Q};var fa=l(T);G=Math.floor(G);M=Math.floor(M);Q=Math.floor(Q);var oa=[],Ga=[],Xa=[],Wa=[],tb=0,mb=0;X("z","y","x",-1,-1,C,w,t,Q,M,0);X("z","y","x",1,-1,C,w,-t,Q,M,1);X("x","z","y",1,1,t,C,w,G,Q,2);X("x","z","y",1,-1,t,C,-w,G,Q,3);X("x","y","z",1,-1,t,w,C,G,M,4);X("x","y","z",
-1,-1,t,w,-C,G,M,5);T.setIndex(oa);T.setAttribute("position",new aa(Ga,3));T.setAttribute("normal",new aa(Xa,3));T.setAttribute("uv",new aa(Wa,2));return T}f(z,u);return z}(ob),Wca={clone:Ka,merge:Fb};hc.prototype=Object.create(L.prototype);hc.prototype.constructor=hc;hc.prototype.isShaderMaterial=!0;hc.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).fragmentShader=u.fragmentShader;(this||p).vertexShader=u.vertexShader;(this||p).uniforms=Ka(u.uniforms);(this||p).defines=Object.assign({},
u.defines);(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).lights=u.lights;(this||p).clipping=u.clipping;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).extensions=Object.assign({},u.extensions);(this||p).glslVersion=u.glslVersion;return this||p};hc.prototype.toJSON=function(u){var z=L.prototype.toJSON.call(this||p,u);z.glslVersion=(this||p).glslVersion;z.uniforms={};for(var t in(this||
p).uniforms){var w=(this||p).uniforms[t].value;z.uniforms[t]=w&&w.isTexture?{type:"t",value:w.toJSON(u).uuid}:w&&w.isColor?{type:"c",value:w.getHex()}:w&&w.isVector2?{type:"v2",value:w.toArray()}:w&&w.isVector3?{type:"v3",value:w.toArray()}:w&&w.isVector4?{type:"v4",value:w.toArray()}:w&&w.isMatrix3?{type:"m3",value:w.toArray()}:w&&w.isMatrix4?{type:"m4",value:w.toArray()}:{value:w}}0<Object.keys((this||p).defines).length&&(z.defines=(this||p).defines);z.vertexShader=(this||p).vertexShader;z.fragmentShader=
(this||p).fragmentShader;u={};for(var C in(this||p).extensions)!0===(this||p).extensions[C]&&(u[C]=!0);0<Object.keys(u).length&&(z.extensions=u);return z};Ub.prototype=Object.assign(Object.create(F.prototype),{constructor:Ub,isCamera:!0,copy:function(u,z){F.prototype.copy.call(this||p,u,z);(this||p).matrixWorldInverse.copy(u.matrixWorldInverse);(this||p).projectionMatrix.copy(u.projectionMatrix);(this||p).projectionMatrixInverse.copy(u.projectionMatrixInverse);return this||p},getWorldDirection:function(u){void 0===
u&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),u=new kc);this.updateWorldMatrix(!0,!1);var z=(this||p).matrixWorld.elements;return u.set(-z[8],-z[9],-z[10]).normalize()},updateMatrixWorld:function(u){F.prototype.updateMatrixWorld.call(this||p,u);(this||p).matrixWorldInverse.copy((this||p).matrixWorld).invert()},updateWorldMatrix:function(u,z){F.prototype.updateWorldMatrix.call(this||p,u,z);(this||p).matrixWorldInverse.copy((this||p).matrixWorld).invert()},clone:function(){return(new (this||
p).constructor).copy(this||p)}});ac.prototype=Object.assign(Object.create(Ub.prototype),{constructor:ac,isPerspectiveCamera:!0,copy:function(u,z){Ub.prototype.copy.call(this||p,u,z);(this||p).fov=u.fov;(this||p).zoom=u.zoom;(this||p).near=u.near;(this||p).far=u.far;(this||p).focus=u.focus;(this||p).aspect=u.aspect;(this||p).view=null===u.view?null:Object.assign({},u.view);(this||p).filmGauge=u.filmGauge;(this||p).filmOffset=u.filmOffset;return this||p},setFocalLength:function(u){u=.5*this.getFilmHeight()/
u;(this||p).fov=2*Kh.RAD2DEG*Math.atan(u);this.updateProjectionMatrix()},getFocalLength:function(){var u=Math.tan(.5*Kh.DEG2RAD*(this||p).fov);return.5*this.getFilmHeight()/u},getEffectiveFOV:function(){return 2*Kh.RAD2DEG*Math.atan(Math.tan(.5*Kh.DEG2RAD*(this||p).fov)/(this||p).zoom)},getFilmWidth:function(){return(this||p).filmGauge*Math.min((this||p).aspect,1)},getFilmHeight:function(){return(this||p).filmGauge/Math.max((this||p).aspect,1)},setViewOffset:function(u,z,t,w,C,G){(this||p).aspect=
u/z;null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=z;(this||p).view.offsetX=t;(this||p).view.offsetY=w;(this||p).view.width=C;(this||p).view.height=G;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=(this||p).near,z=u*Math.tan(.5*
Kh.DEG2RAD*(this||p).fov)/(this||p).zoom,t=2*z,w=(this||p).aspect*t,C=-.5*w,G=(this||p).view;if(null!==(this||p).view&&(this||p).view.enabled){var M=G.fullWidth,Q=G.fullHeight;C+=G.offsetX*w/M;z-=G.offsetY*t/Q;w*=G.width/M;t*=G.height/Q}G=(this||p).filmOffset;0!==G&&(C+=u*G/this.getFilmWidth());(this||p).projectionMatrix.makePerspective(C,C+w,z,z-t,u,(this||p).far);(this||p).projectionMatrixInverse.copy((this||p).projectionMatrix).invert()},toJSON:function(u){u=F.prototype.toJSON.call(this||p,u);
u.object.fov=(this||p).fov;u.object.zoom=(this||p).zoom;u.object.near=(this||p).near;u.object.far=(this||p).far;u.object.focus=(this||p).focus;u.object.aspect=(this||p).aspect;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));u.object.filmGauge=(this||p).filmGauge;u.object.filmOffset=(this||p).filmOffset;return u}});Ic.prototype=Object.create(F.prototype);Ic.prototype.constructor=Ic;Mb.prototype=Object.create(r.prototype);Mb.prototype.constructor=Mb;Mb.prototype.isCubeTexture=
!0;Object.defineProperty(Mb.prototype,"images",{get:function(){return(this||p).image},set:function(u){(this||p).image=u}});ed.prototype=Object.create(y.prototype);ed.prototype.constructor=ed;ed.prototype.isWebGLCubeRenderTarget=!0;ed.prototype.fromEquirectangularTexture=function(u,z){(this||p).texture.type=z.type;(this||p).texture.format=1023;(this||p).texture.encoding=z.encoding;(this||p).texture.generateMipmaps=z.generateMipmaps;(this||p).texture.minFilter=z.minFilter;(this||p).texture.magFilter=
z.magFilter;var t=new eJ(5,5,5),w=new hc({name:"CubemapFromEquirect",uniforms:Ka({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",
side:1,blending:0});w.uniforms.tEquirect.value=z;t=new pa(t,w);w=z.minFilter;1008===z.minFilter&&(z.minFilter=1006);(new Ic(1,10,this||p)).update(u,t);z.minFilter=w;t.geometry.dispose();t.material.dispose();return this||p};ed.prototype.clear=function(u,z,t,w){for(var C=u.getRenderTarget(),G=0;6>G;G++)u.setRenderTarget(this||p,G),u.clear(z,t,w);u.setRenderTarget(C)};Bd.prototype=Object.create(r.prototype);Bd.prototype.constructor=Bd;Bd.prototype.isDataTexture=!0;var RF=new Tx,IQ=new kc,fJ=function(){function u(t,
w,C,G,M,Q){(this||p).planes=[void 0!==t?t:new dw,void 0!==w?w:new dw,void 0!==C?C:new dw,void 0!==G?G:new dw,void 0!==M?M:new dw,void 0!==Q?Q:new dw]}var z=u.prototype;z.set=function(t,w,C,G,M,Q){var X=(this||p).planes;X[0].copy(t);X[1].copy(w);X[2].copy(C);X[3].copy(G);X[4].copy(M);X[5].copy(Q);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){for(var w=(this||p).planes,C=0;6>C;C++)w[C].copy(t.planes[C]);return this||p};z.setFromProjectionMatrix=
function(t){var w=(this||p).planes,C=t.elements;t=C[0];var G=C[1],M=C[2],Q=C[3],X=C[4],T=C[5],fa=C[6],oa=C[7],Ga=C[8],Xa=C[9],Wa=C[10],tb=C[11],mb=C[12],Kc=C[13],ic=C[14];C=C[15];w[0].setComponents(Q-t,oa-X,tb-Ga,C-mb).normalize();w[1].setComponents(Q+t,oa+X,tb+Ga,C+mb).normalize();w[2].setComponents(Q+G,oa+T,tb+Xa,C+Kc).normalize();w[3].setComponents(Q-G,oa-T,tb-Xa,C-Kc).normalize();w[4].setComponents(Q-M,oa-fa,tb-Wa,C-ic).normalize();w[5].setComponents(Q+M,oa+fa,tb+Wa,C+ic).normalize();return this||
p};z.intersectsObject=function(t){var w=t.geometry;null===w.boundingSphere&&w.computeBoundingSphere();RF.copy(w.boundingSphere).applyMatrix4(t.matrixWorld);return this.intersectsSphere(RF)};z.intersectsSprite=function(t){RF.center.set(0,0,0);RF.radius=.7071067811865476;RF.applyMatrix4(t.matrixWorld);return this.intersectsSphere(RF)};z.intersectsSphere=function(t){var w=(this||p).planes,C=t.center;t=-t.radius;for(var G=0;6>G;G++)if(w[G].distanceToPoint(C)<t)return!1;return!0};z.intersectsBox=function(t){for(var w=
(this||p).planes,C=0;6>C;C++){var G=w[C];IQ.x=0<G.normal.x?t.max.x:t.min.x;IQ.y=0<G.normal.y?t.max.y:t.min.y;IQ.z=0<G.normal.z?t.max.z:t.min.z;if(0>G.distanceToPoint(IQ))return!1}return!0};z.containsPoint=function(t){for(var w=(this||p).planes,C=0;6>C;C++)if(0>w[C].distanceToPoint(t))return!1;return!0};return u}(),UP=function(u){function z(t,w,C,G){void 0===t&&(t=1);void 0===w&&(w=1);void 0===C&&(C=1);void 0===G&&(G=1);var M=u.call(this||p)||this||p;M.type="PlaneBufferGeometry";M.parameters={width:t,
height:w,widthSegments:C,heightSegments:G};var Q=t/2,X=w/2;C=Math.floor(C);G=Math.floor(G);var T=C+1,fa=G+1,oa=t/C,Ga=w/G;w=[];t=[];for(var Xa=[],Wa=[],tb=0;tb<fa;tb++)for(var mb=tb*Ga-X,Kc=0;Kc<T;Kc++)t.push(Kc*oa-Q,-mb,0),Xa.push(0,0,1),Wa.push(Kc/C),Wa.push(1-tb/G);for(Q=0;Q<G;Q++)for(X=0;X<C;X++)fa=X+T*(Q+1),oa=X+1+T*(Q+1),Ga=X+1+T*Q,w.push(X+T*Q,fa,Ga),w.push(fa,oa,Ga);M.setIndex(w);M.setAttribute("position",new aa(t,3));M.setAttribute("normal",new aa(Xa,3));M.setAttribute("uv",new aa(Wa,2));
return M}f(z,u);return z}(ob),Yi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
Of={common:{diffuse:{value:new bg(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Cp},uv2Transform:{value:new Cp},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new bg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],
properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bg(15658734)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Cp}},sprite:{diffuse:{value:new bg(15658734)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Cp}}},du={basic:{uniforms:Fb([Of.common,Of.specularmap,Of.envmap,Of.aomap,Of.lightmap,Of.fog]),vertexShader:Yi.meshbasic_vert,fragmentShader:Yi.meshbasic_frag},lambert:{uniforms:Fb([Of.common,Of.specularmap,Of.envmap,Of.aomap,Of.lightmap,
Of.emissivemap,Of.fog,Of.lights,{emissive:{value:new bg(0)}}]),vertexShader:Yi.meshlambert_vert,fragmentShader:Yi.meshlambert_frag},phong:{uniforms:Fb([Of.common,Of.specularmap,Of.envmap,Of.aomap,Of.lightmap,Of.emissivemap,Of.bumpmap,Of.normalmap,Of.displacementmap,Of.fog,Of.lights,{emissive:{value:new bg(0)},specular:{value:new bg(1118481)},shininess:{value:30}}]),vertexShader:Yi.meshphong_vert,fragmentShader:Yi.meshphong_frag},standard:{uniforms:Fb([Of.common,Of.envmap,Of.aomap,Of.lightmap,Of.emissivemap,
Of.bumpmap,Of.normalmap,Of.displacementmap,Of.roughnessmap,Of.metalnessmap,Of.fog,Of.lights,{emissive:{value:new bg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yi.meshphysical_vert,fragmentShader:Yi.meshphysical_frag},toon:{uniforms:Fb([Of.common,Of.aomap,Of.lightmap,Of.emissivemap,Of.bumpmap,Of.normalmap,Of.displacementmap,Of.gradientmap,Of.fog,Of.lights,{emissive:{value:new bg(0)}}]),vertexShader:Yi.meshtoon_vert,fragmentShader:Yi.meshtoon_frag},matcap:{uniforms:Fb([Of.common,
Of.bumpmap,Of.normalmap,Of.displacementmap,Of.fog,{matcap:{value:null}}]),vertexShader:Yi.meshmatcap_vert,fragmentShader:Yi.meshmatcap_frag},points:{uniforms:Fb([Of.points,Of.fog]),vertexShader:Yi.points_vert,fragmentShader:Yi.points_frag},dashed:{uniforms:Fb([Of.common,Of.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yi.linedashed_vert,fragmentShader:Yi.linedashed_frag},depth:{uniforms:Fb([Of.common,Of.displacementmap]),vertexShader:Yi.depth_vert,fragmentShader:Yi.depth_frag},
normal:{uniforms:Fb([Of.common,Of.bumpmap,Of.normalmap,Of.displacementmap,{opacity:{value:1}}]),vertexShader:Yi.normal_vert,fragmentShader:Yi.normal_frag},sprite:{uniforms:Fb([Of.sprite,Of.fog]),vertexShader:Yi.sprite_vert,fragmentShader:Yi.sprite_frag},background:{uniforms:{uvTransform:{value:new Cp},t2D:{value:null}},vertexShader:Yi.background_vert,fragmentShader:Yi.background_frag},cube:{uniforms:Fb([Of.envmap,{opacity:{value:1}}]),vertexShader:Yi.cube_vert,fragmentShader:Yi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},
vertexShader:Yi.equirect_vert,fragmentShader:Yi.equirect_frag},distanceRGBA:{uniforms:Fb([Of.common,Of.displacementmap,{referencePosition:{value:new kc},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Yi.distanceRGBA_vert,fragmentShader:Yi.distanceRGBA_frag},shadow:{uniforms:Fb([Of.lights,Of.fog,{color:{value:new bg(0)},opacity:{value:1}}]),vertexShader:Yi.shadow_vert,fragmentShader:Yi.shadow_frag}};du.physical={uniforms:Fb([du.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},
clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Je(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new bg(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Yi.meshphysical_vert,fragmentShader:Yi.meshphysical_frag};yj.prototype=Object.create(r.prototype);yj.prototype.constructor=yj;yj.prototype.isDataTexture2DArray=!0;zj.prototype=Object.create(r.prototype);zj.prototype.constructor=zj;zj.prototype.isDataTexture3D=!0;var Sca=new r,
Kwa=new yj,Lwa=new zj,Tca=new Mb,Nca=[],Oca=[],Rca=new Float32Array(16),Qca=new Float32Array(9),Pca=new Float32Array(4);ZN.prototype.updateCache=function(u){var z=(this||p).cache;u instanceof Float32Array&&z.length!==u.length&&((this||p).cache=new Float32Array(u.length));Bi(z,u)};TN.prototype.setValue=function(u,z,t){for(var w=(this||p).seq,C=0,G=w.length;C!==G;++C){var M=w[C];M.setValue(u,z[M.id],t)}};var VY=/(\w+)(\])?(\[|\.)?/g;Ov.prototype.setValue=function(u,z,t,w){z=(this||p).map[z];void 0!==
z&&z.setValue(u,t,w)};Ov.prototype.setOptional=function(u,z,t){z=z[t];void 0!==z&&this.setValue(u,t,z)};Ov.upload=function(u,z,t,w){for(var C=0,G=z.length;C!==G;++C){var M=z[C],Q=t[M.id];!1!==Q.needsUpdate&&M.setValue(u,Q.value,w)}};Ov.seqWithValue=function(u,z){for(var t=[],w=0,C=u.length;w!==C;++w){var G=u[w];G.id in z&&t.push(G)}return t};var Mwa=0,WY=/^[ \t]*#include +<([\w\d./]+)>/gm,Vca=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Uca=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,
Pwa=0;gA.prototype=Object.create(L.prototype);gA.prototype.constructor=gA;gA.prototype.isMeshDepthMaterial=!0;gA.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).depthPacking=u.depthPacking;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||
p).wireframeLinewidth=u.wireframeLinewidth;return this||p};hA.prototype=Object.create(L.prototype);hA.prototype.constructor=hA;hA.prototype.isMeshDistanceMaterial=!0;hA.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).referencePosition.copy(u.referencePosition);(this||p).nearDistance=u.nearDistance;(this||p).farDistance=u.farDistance;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=
u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;return this||p};VP.prototype=Object.assign(Object.create(ac.prototype),{constructor:VP,isArrayCamera:!0});iA.prototype=Object.assign(Object.create(F.prototype),{constructor:iA,isGroup:!0});Object.assign(gJ.prototype,{constructor:gJ,getHandSpace:function(){if(null===(this||p)._hand&&((this||p)._hand=new iA,(this||p)._hand.matrixAutoUpdate=!1,(this||p)._hand.visible=!1,(this||p)._hand.joints=
[],(this||p)._hand.inputState={pinching:!1},window.XRHand))for(var u=0;u<=window.XRHand.LITTLE_PHALANX_TIP;u++){var z=new iA;z.matrixAutoUpdate=!1;z.visible=!1;(this||p)._hand.joints.push(z);(this||p)._hand.add(z)}return(this||p)._hand},getTargetRaySpace:function(){null===(this||p)._targetRay&&((this||p)._targetRay=new iA,(this||p)._targetRay.matrixAutoUpdate=!1,(this||p)._targetRay.visible=!1);return(this||p)._targetRay},getGripSpace:function(){null===(this||p)._grip&&((this||p)._grip=new iA,(this||
p)._grip.matrixAutoUpdate=!1,(this||p)._grip.visible=!1);return(this||p)._grip},dispatchEvent:function(u){null!==(this||p)._targetRay&&(this||p)._targetRay.dispatchEvent(u);null!==(this||p)._grip&&(this||p)._grip.dispatchEvent(u);null!==(this||p)._hand&&(this||p)._hand.dispatchEvent(u);return this||p},disconnect:function(u){this.dispatchEvent({type:"disconnected",data:u});null!==(this||p)._targetRay&&((this||p)._targetRay.visible=!1);null!==(this||p)._grip&&((this||p)._grip.visible=!1);null!==(this||
p)._hand&&((this||p)._hand.visible=!1);return this||p},update:function(u,z,t){var w=null,C=null,G=null,M=(this||p)._targetRay,Q=(this||p)._grip,X=(this||p)._hand;if(u&&"visible-blurred"!==z.session.visibilityState)if(X&&u.hand){G=!0;for(var T=0;T<=window.XRHand.LITTLE_PHALANX_TIP;T++)if(u.hand[T]){var fa=z.getJointPose(u.hand[T],t),oa=X.joints[T];null!==fa&&(oa.matrix.fromArray(fa.transform.matrix),oa.matrix.decompose(oa.position,oa.rotation,oa.scale),oa.jointRadius=fa.radius);oa.visible=null!==fa;
fa=X.joints[window.XRHand.INDEX_PHALANX_TIP].position.distanceTo(X.joints[window.XRHand.THUMB_PHALANX_TIP].position);X.inputState.pinching&&.025<fa?(X.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:u.handedness,target:this||p})):!X.inputState.pinching&&.015>=fa&&(X.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:u.handedness,target:this||p}))}}else null!==M&&(w=z.getPose(u.targetRaySpace,t),null!==w&&(M.matrix.fromArray(w.transform.matrix),M.matrix.decompose(M.position,
M.rotation,M.scale))),null!==Q&&u.gripSpace&&(C=z.getPose(u.gripSpace,t),null!==C&&(Q.matrix.fromArray(C.transform.matrix),Q.matrix.decompose(Q.position,Q.rotation,Q.scale)));null!==M&&(M.visible=null!==w);null!==Q&&(Q.visible=null!==C);null!==X&&(X.visible=null!==G);return this||p}});Object.assign($ca.prototype,d.prototype);$Y.prototype=Object.assign(Object.create(hJ.prototype),{constructor:$Y,isWebGL1Renderer:!0});var Kda=function(){function u(t,w){Object.defineProperty(this||p,"isFogExp2",{value:!0});
(this||p).name="";(this||p).color=new bg(t);(this||p).density=void 0!==w?w:2.5E-4}var z=u.prototype;z.clone=function(){return new u((this||p).color,(this||p).density)};z.toJSON=function(){return{type:"FogExp2",color:(this||p).color.getHex(),density:(this||p).density}};return u}(),Lda=function(){function u(t,w,C){Object.defineProperty(this||p,"isFog",{value:!0});(this||p).name="";(this||p).color=new bg(t);(this||p).near=void 0!==w?w:1;(this||p).far=void 0!==C?C:1E3}var z=u.prototype;z.clone=function(){return new u((this||
p).color,(this||p).near,(this||p).far)};z.toJSON=function(){return{type:"Fog",color:(this||p).color.getHex(),near:(this||p).near,far:(this||p).far}};return u}(),NZ=function(u){function z(){var w=u.call(this||p)||this||p;Object.defineProperty(l(w),"isScene",{value:!0});w.type="Scene";w.background=null;w.environment=null;w.fog=null;w.overrideMaterial=null;w.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:l(w)}));return w}f(z,
u);var t=z.prototype;t.copy=function(w,C){u.prototype.copy.call(this||p,w,C);null!==w.background&&((this||p).background=w.background.clone());null!==w.environment&&((this||p).environment=w.environment.clone());null!==w.fog&&((this||p).fog=w.fog.clone());null!==w.overrideMaterial&&((this||p).overrideMaterial=w.overrideMaterial.clone());(this||p).autoUpdate=w.autoUpdate;(this||p).matrixAutoUpdate=w.matrixAutoUpdate;return this||p};t.toJSON=function(w){var C=u.prototype.toJSON.call(this||p,w);null!==
(this||p).background&&(C.object.background=(this||p).background.toJSON(w));null!==(this||p).environment&&(C.object.environment=(this||p).environment.toJSON(w));null!==(this||p).fog&&(C.object.fog=(this||p).fog.toJSON());return C};return z}(F);Object.defineProperty(vr.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(vr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).array=
new u.array.constructor(u.array);(this||p).count=u.count;(this||p).stride=u.stride;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||p).stride;t*=z.stride;for(var w=0,C=(this||p).stride;w<C;w++)(this||p).array[u+w]=z.array[t+w];return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},clone:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=Kh.generateUUID());void 0===
u.arrayBuffers[(this||p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=(this||p).array.slice(0).buffer);u=new (this||p).array.constructor(u.arrayBuffers[(this||p).array.buffer._uuid]);u=new vr(u,(this||p).stride);u.setUsage((this||p).usage);return u},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},toJSON:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=Kh.generateUUID());void 0===u.arrayBuffers[(this||
p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array((this||p).array.buffer)));return{uuid:(this||p).uuid,buffer:(this||p).array.buffer._uuid,type:(this||p).array.constructor.name,stride:(this||p).stride}}});var PC=new kc;Object.defineProperties(mA.prototype,{count:{get:function(){return(this||p).data.count}},array:{get:function(){return(this||p).data.array}},needsUpdate:{set:function(u){(this||p).data.needsUpdate=u}}});Object.assign(mA.prototype,
{isInterleavedBufferAttribute:!0,applyMatrix4:function(u){for(var z=0,t=(this||p).data.count;z<t;z++)PC.x=this.getX(z),PC.y=this.getY(z),PC.z=this.getZ(z),PC.applyMatrix4(u),this.setXYZ(z,PC.x,PC.y,PC.z);return this||p},setX:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset]=z;return this||p},setY:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]=z;return this||p},setZ:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+
2]=z;return this||p},setW:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]=z;return this||p},getX:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset]},getY:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]},getZ:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+2]},getW:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]},setXY:function(u,z,t){u=
u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;return this||p},setXYZ:function(u,z,t,w){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=w;return this||p},setXYZW:function(u,z,t,w,C){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=w;(this||p).data.array[u+3]=C;return this||p},clone:function(u){if(void 0===
u){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=z*(this||p).data.stride+(this||p).offset,w=0;w<(this||p).itemSize;w++)u.push((this||p).data.array[t+w]);return new S(new (this||p).array.constructor(u),(this||p).itemSize,(this||p).normalized)}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&(u.interleavedBuffers[(this||
p).data.uuid]=(this||p).data.clone(u));return new mA(u.interleavedBuffers[(this||p).data.uuid],(this||p).itemSize,(this||p).offset,(this||p).normalized)},toJSON:function(u){if(void 0===u){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=z*(this||p).data.stride+(this||p).offset,w=0;w<(this||p).itemSize;w++)u.push((this||p).data.array[t+w]);return{itemSize:(this||p).itemSize,
type:(this||p).array.constructor.name,array:u,normalized:(this||p).normalized}}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&(u.interleavedBuffers[(this||p).data.uuid]=(this||p).data.toJSON(u));return{isInterleavedBufferAttribute:!0,itemSize:(this||p).itemSize,data:(this||p).data.uuid,offset:(this||p).offset,normalized:(this||p).normalized}}});nA.prototype=Object.create(L.prototype);nA.prototype.constructor=nA;nA.prototype.isSpriteMaterial=
!0;nA.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).rotation=u.rotation;(this||p).sizeAttenuation=u.sizeAttenuation;return this||p};var wF,HJ=new kc,SF=new kc,TF=new kc,xF=new Je,kJ=new Je,eda=new Qi,JQ=new kc,IJ=new kc,KQ=new kc,Mda=new Je,OZ=new Je,Nda=new Je;jJ.prototype=Object.assign(Object.create(F.prototype),{constructor:jJ,isSprite:!0,raycast:function(u,z){null===u.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');
SF.setFromMatrixScale((this||p).matrixWorld);eda.copy(u.camera.matrixWorld);(this||p).modelViewMatrix.multiplyMatrices(u.camera.matrixWorldInverse,(this||p).matrixWorld);TF.setFromMatrixPosition((this||p).modelViewMatrix);u.camera.isPerspectiveCamera&&!1===(this||p).material.sizeAttenuation&&SF.multiplyScalar(-TF.z);var t=(this||p).material.rotation;if(0!==t){var w=Math.cos(t);var C=Math.sin(t)}t=(this||p).center;ZP(JQ.set(-.5,-.5,0),TF,t,SF,C,w);ZP(IJ.set(.5,-.5,0),TF,t,SF,C,w);ZP(KQ.set(.5,.5,0),
TF,t,SF,C,w);Mda.set(0,0);OZ.set(1,0);Nda.set(1,1);var G=u.ray.intersectTriangle(JQ,IJ,KQ,!1,HJ);if(null===G&&(ZP(IJ.set(-.5,.5,0),TF,t,SF,C,w),OZ.set(0,1),G=u.ray.intersectTriangle(JQ,KQ,IJ,!1,HJ),null===G))return;C=u.ray.origin.distanceTo(HJ);C<u.near||C>u.far||z.push({distance:C,point:HJ.clone(),uv:cu.getUV(HJ,JQ,IJ,KQ,Mda,OZ,Nda,new Je),face:null,object:this||p})},copy:function(u){F.prototype.copy.call(this||p,u);void 0!==u.center&&(this||p).center.copy(u.center);(this||p).material=u.material;
return this||p}});var LQ=new kc,Oda=new kc;lJ.prototype=Object.assign(Object.create(F.prototype),{constructor:lJ,isLOD:!0,copy:function(u){F.prototype.copy.call(this||p,u,!1);for(var z=u.levels,t=0,w=z.length;t<w;t++){var C=z[t];this.addLevel(C.object.clone(),C.distance)}(this||p).autoUpdate=u.autoUpdate;return this||p},addLevel:function(u,z){void 0===z&&(z=0);z=Math.abs(z);var t=(this||p).levels,w;for(w=0;w<t.length&&!(z<t[w].distance);w++);t.splice(w,0,{distance:z,object:u});this.add(u);return this||
p},getCurrentLevel:function(){return(this||p)._currentLevel},getObjectForDistance:function(u){var z=(this||p).levels;if(0<z.length){var t;var w=1;for(t=z.length;w<t&&!(u<z[w].distance);w++);return z[w-1].object}return null},raycast:function(u,z){if(0<(this||p).levels.length){LQ.setFromMatrixPosition((this||p).matrixWorld);var t=u.ray.origin.distanceTo(LQ);this.getObjectForDistance(t).raycast(u,z)}},update:function(u){var z=(this||p).levels;if(1<z.length){LQ.setFromMatrixPosition(u.matrixWorld);Oda.setFromMatrixPosition((this||
p).matrixWorld);u=LQ.distanceTo(Oda)/u.zoom;z[0].object.visible=!0;var t;var w=1;for(t=z.length;w<t;w++)if(u>=z[w].distance)z[w-1].object.visible=!1,z[w].object.visible=!0;else break;for((this||p)._currentLevel=w-1;w<t;w++)z[w].object.visible=!1}},toJSON:function(u){u=F.prototype.toJSON.call(this||p,u);!1===(this||p).autoUpdate&&(u.object.autoUpdate=!1);u.object.levels=[];for(var z=(this||p).levels,t=0,w=z.length;t<w;t++){var C=z[t];u.object.levels.push({object:C.object.uuid,distance:C.distance})}return u}});
var Pda=new kc,Qda=new Gk,Rda=new Gk,kxa=new kc,Sda=new Qi;mJ.prototype=Object.assign(Object.create(pa.prototype),{constructor:mJ,isSkinnedMesh:!0,copy:function(u){pa.prototype.copy.call(this||p,u);(this||p).bindMode=u.bindMode;(this||p).bindMatrix.copy(u.bindMatrix);(this||p).bindMatrixInverse.copy(u.bindMatrixInverse);(this||p).skeleton=u.skeleton;return this||p},bind:function(u,z){(this||p).skeleton=u;void 0===z&&(this.updateMatrixWorld(!0),(this||p).skeleton.calculateInverses(),z=(this||p).matrixWorld);
(this||p).bindMatrix.copy(z);(this||p).bindMatrixInverse.copy(z).invert()},pose:function(){(this||p).skeleton.pose()},normalizeSkinWeights:function(){for(var u=new Gk,z=(this||p).geometry.attributes.skinWeight,t=0,w=z.count;t<w;t++){u.x=z.getX(t);u.y=z.getY(t);u.z=z.getZ(t);u.w=z.getW(t);var C=1/u.manhattanLength();Infinity!==C?u.multiplyScalar(C):u.set(1,0,0,0);z.setXYZW(t,u.x,u.y,u.z,u.w)}},updateMatrixWorld:function(u){pa.prototype.updateMatrixWorld.call(this||p,u);"attached"===(this||p).bindMode?
(this||p).bindMatrixInverse.copy((this||p).matrixWorld).invert():"detached"===(this||p).bindMode?(this||p).bindMatrixInverse.copy((this||p).bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+(this||p).bindMode)},boneTransform:function(u,z){var t=(this||p).skeleton,w=(this||p).geometry;Qda.fromBufferAttribute(w.attributes.skinIndex,u);Rda.fromBufferAttribute(w.attributes.skinWeight,u);Pda.fromBufferAttribute(w.attributes.position,u).applyMatrix4((this||p).bindMatrix);z.set(0,
0,0);for(u=0;4>u;u++)if(w=Rda.getComponent(u),0!==w){var C=Qda.getComponent(u);Sda.multiplyMatrices(t.bones[C].matrixWorld,t.boneInverses[C]);z.addScaledVector(kxa.copy(Pda).applyMatrix4(Sda),w)}return z.applyMatrix4((this||p).bindMatrixInverse)}});nJ.prototype=Object.assign(Object.create(F.prototype),{constructor:nJ,isBone:!0});var Tda=new Qi,lxa=new Qi;Object.assign(oJ.prototype,{init:function(){var u=(this||p).bones,z=(this||p).boneInverses;(this||p).boneMatrices=new Float32Array(16*u.length);
if(0===z.length)this.calculateInverses();else if(u.length!==z.length)for(console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),(this||p).boneInverses=[],u=0,z=(this||p).bones.length;u<z;u++)(this||p).boneInverses.push(new Qi)},calculateInverses:function(){for(var u=(this||p).boneInverses.length=0,z=(this||p).bones.length;u<z;u++){var t=new Qi;(this||p).bones[u]&&t.copy((this||p).bones[u].matrixWorld).invert();(this||p).boneInverses.push(t)}},pose:function(){for(var u=
0,z=(this||p).bones.length;u<z;u++){var t=(this||p).bones[u];t&&t.matrixWorld.copy((this||p).boneInverses[u]).invert()}u=0;for(z=(this||p).bones.length;u<z;u++)if(t=(this||p).bones[u])t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale)},update:function(){for(var u=(this||p).bones,z=(this||p).boneInverses,t=(this||p).boneMatrices,w=(this||p).boneTexture,C=0,G=u.length;C<
G;C++)Tda.multiplyMatrices(u[C]?u[C].matrixWorld:lxa,z[C]),Tda.toArray(t,16*C);null!==w&&(w.needsUpdate=!0)},clone:function(){return new oJ((this||p).bones,(this||p).boneInverses)},getBoneByName:function(u){for(var z=0,t=(this||p).bones.length;z<t;z++){var w=(this||p).bones[z];if(w.name===u)return w}},dispose:function(){null!==(this||p).boneTexture&&((this||p).boneTexture.dispose(),(this||p).boneTexture=null)},fromJSON:function(u,z){(this||p).uuid=u.uuid;for(var t=0,w=u.bones.length;t<w;t++){var C=
u.bones[t],G=z[C];void 0===G&&(console.warn("THREE.Skeleton: No bone found with UUID:",C),G=new nJ);(this||p).bones.push(G);(this||p).boneInverses.push((new Qi).fromArray(u.boneInverses[t]))}this.init();return this||p},toJSON:function(){var u={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};u.uuid=(this||p).uuid;for(var z=(this||p).bones,t=(this||p).boneInverses,w=0,C=z.length;w<C;w++)u.bones.push(z[w].uuid),u.boneInverses.push(t[w].toArray());return u}});
var Uda=new Qi,Vda=new Qi,MQ=[],JJ=new pa;$P.prototype=Object.assign(Object.create(pa.prototype),{constructor:$P,isInstancedMesh:!0,copy:function(u){pa.prototype.copy.call(this||p,u);(this||p).instanceMatrix.copy(u.instanceMatrix);(this||p).count=u.count;return this||p},getColorAt:function(u,z){z.fromArray((this||p).instanceColor.array,3*u)},getMatrixAt:function(u,z){z.fromArray((this||p).instanceMatrix.array,16*u)},raycast:function(u,z){var t=(this||p).matrixWorld,w=(this||p).count;JJ.geometry=(this||
p).geometry;JJ.material=(this||p).material;if(void 0!==JJ.material)for(var C=0;C<w;C++){this.getMatrixAt(C,Uda);Vda.multiplyMatrices(t,Uda);JJ.matrixWorld=Vda;JJ.raycast(u,MQ);for(var G=0,M=MQ.length;G<M;G++){var Q=MQ[G];Q.instanceId=C;Q.object=this||p;z.push(Q)}MQ.length=0}},setColorAt:function(u,z){null===(this||p).instanceColor&&((this||p).instanceColor=new S(new Float32Array(3*(this||p).count),3));z.toArray((this||p).instanceColor.array,3*u)},setMatrixAt:function(u,z){z.toArray((this||p).instanceMatrix.array,
16*u)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});vl.prototype=Object.create(L.prototype);vl.prototype.constructor=vl;vl.prototype.isLineBasicMaterial=!0;vl.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).linewidth=u.linewidth;(this||p).linecap=u.linecap;(this||p).linejoin=u.linejoin;(this||p).morphTargets=u.morphTargets;return this||p};var Wda=new kc,Xda=new kc,Yda=new Qi,NQ=new HF,KJ=new Tx;Is.prototype=
Object.assign(Object.create(F.prototype),{constructor:Is,isLine:!0,copy:function(u){F.prototype.copy.call(this||p,u);(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=u.attributes.position,t=[0],w=1,C=z.count;w<C;w++)Wda.fromBufferAttribute(z,w-1),Xda.fromBufferAttribute(z,w),t[w]=t[w-1],t[w]+=Wda.distanceTo(Xda);u.setAttribute("lineDistance",new aa(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,u[0]=0,t=1,w=z.length;t<w;t++)u[t]=u[t-1],u[t]+=z[t-1].distanceTo(z[t]);return this||p},raycast:function(u,z){var t=(this||p).geometry,w=(this||p).matrixWorld,C=u.params.Line.threshold;null===t.boundingSphere&&t.computeBoundingSphere();KJ.copy(t.boundingSphere);KJ.applyMatrix4(w);KJ.radius+=C;if(!1!==u.ray.intersectsSphere(KJ)){Yda.copy(w).invert();NQ.copy(u.ray).applyMatrix4(Yda);w=C/(((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/
3);w*=w;var G=new kc,M=new kc;C=new kc;var Q=new kc,X=(this||p).isLineSegments?2:1;if(t.isBufferGeometry){var T=t.index;t=t.attributes.position;if(null!==T){T=T.array;for(var fa=0,oa=T.length-1;fa<oa;fa+=X){var Ga=T[fa+1];G.fromBufferAttribute(t,T[fa]);M.fromBufferAttribute(t,Ga);NQ.distanceSqToSegment(G,M,Q,C)>w||(Q.applyMatrix4((this||p).matrixWorld),Ga=u.ray.origin.distanceTo(Q),Ga<u.near||Ga>u.far||z.push({distance:Ga,point:C.clone().applyMatrix4((this||p).matrixWorld),index:fa,face:null,faceIndex:null,
object:this||p}))}}else for(T=0,fa=t.count-1;T<fa;T+=X)G.fromBufferAttribute(t,T),M.fromBufferAttribute(t,T+1),NQ.distanceSqToSegment(G,M,Q,C)>w||(Q.applyMatrix4((this||p).matrixWorld),oa=u.ray.origin.distanceTo(Q),oa<u.near||oa>u.far||z.push({distance:oa,point:C.clone().applyMatrix4((this||p).matrixWorld),index:T,face:null,faceIndex:null,object:this||p}))}else if(t.isGeometry)for(G=t.vertices,M=G.length,t=0;t<M-1;t+=X)NQ.distanceSqToSegment(G[t],G[t+1],Q,C)>w||(Q.applyMatrix4((this||p).matrixWorld),
T=u.ray.origin.distanceTo(Q),T<u.near||T>u.far||z.push({distance:T,point:C.clone().applyMatrix4((this||p).matrixWorld),index:t,face:null,faceIndex:null,object:this||p}))}},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var w=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||
p).morphTargetDictionary[w]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});var OQ=new kc,PQ=new kc;Dp.prototype=Object.assign(Object.create(Is.prototype),{constructor:Dp,isLineSegments:!0,computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=u.attributes.position,t=[],w=0,C=z.count;w<C;w+=2)OQ.fromBufferAttribute(z,w),PQ.fromBufferAttribute(z,
w+1),t[w]=0===w?0:t[w-1],t[w+1]=t[w]+OQ.distanceTo(PQ);u.setAttribute("lineDistance",new aa(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,t=0,w=z.length;t<w;t+=2)OQ.copy(z[t]),PQ.copy(z[t+1]),u[t]=0===t?0:u[t-1],u[t+1]=u[t]+OQ.distanceTo(PQ);return this||p}});aQ.prototype=Object.assign(Object.create(Is.prototype),{constructor:aQ,isLineLoop:!0});fu.prototype=Object.create(L.prototype);
fu.prototype.constructor=fu;fu.prototype.isPointsMaterial=!0;fu.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).size=u.size;(this||p).sizeAttenuation=u.sizeAttenuation;(this||p).morphTargets=u.morphTargets;return this||p};var Zda=new Qi,bZ=new HF,LJ=new Tx,QQ=new kc;yF.prototype=Object.assign(Object.create(F.prototype),{constructor:yF,isPoints:!0,copy:function(u){F.prototype.copy.call(this||p,u);
(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},raycast:function(u,z){var t=(this||p).geometry,w=(this||p).matrixWorld,C=u.params.Points.threshold;null===t.boundingSphere&&t.computeBoundingSphere();LJ.copy(t.boundingSphere);LJ.applyMatrix4(w);LJ.radius+=C;if(!1!==u.ray.intersectsSphere(LJ))if(Zda.copy(w).invert(),bZ.copy(u.ray).applyMatrix4(Zda),C/=((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/3,C*=C,t.isBufferGeometry){var G=t.index;t=t.attributes.position;if(null!==
G){G=G.array;for(var M=0,Q=G.length;M<Q;M++){var X=G[M];QQ.fromBufferAttribute(t,X);aZ(QQ,X,C,w,u,z,this||p)}}else for(G=0,M=t.count;G<M;G++)QQ.fromBufferAttribute(t,G),aZ(QQ,G,C,w,u,z,this||p)}else for(t=t.vertices,G=0,M=t.length;G<M;G++)aZ(t[G],G,C,w,u,z,this||p)},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=
u.length;z<t;z++){var w=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[w]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});cZ.prototype=Object.assign(Object.create(r.prototype),{constructor:cZ,clone:function(){return(new (this||p).constructor((this||p).image)).copy(this||p)},isVideoTexture:!0,update:function(){var u=(this||p).image;
!1==="requestVideoFrameCallback"in u&&u.readyState>=u.HAVE_CURRENT_DATA&&((this||p).needsUpdate=!0)}});zF.prototype=Object.create(r.prototype);zF.prototype.constructor=zF;zF.prototype.isCompressedTexture=!0;pJ.prototype=Object.create(r.prototype);pJ.prototype.constructor=pJ;pJ.prototype.isCanvasTexture=!0;qJ.prototype=Object.create(r.prototype);qJ.prototype.constructor=qJ;qJ.prototype.isDepthTexture=!0;var Vwa=0,lw=new Qi,PZ=new F,RQ=new kc;Hk.prototype=Object.assign(Object.create(d.prototype),{constructor:Hk,
isGeometry:!0,applyMatrix4:function(u){for(var z=(new Cp).getNormalMatrix(u),t=0,w=(this||p).vertices.length;t<w;t++)(this||p).vertices[t].applyMatrix4(u);u=0;for(t=(this||p).faces.length;u<t;u++){w=(this||p).faces[u];w.normal.applyMatrix3(z).normalize();for(var C=0,G=w.vertexNormals.length;C<G;C++)w.vertexNormals[C].applyMatrix3(z).normalize()}null!==(this||p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&this.computeBoundingSphere();(this||p).verticesNeedUpdate=!0;(this||
p).normalsNeedUpdate=!0;return this||p},rotateX:function(u){lw.makeRotationX(u);this.applyMatrix4(lw);return this||p},rotateY:function(u){lw.makeRotationY(u);this.applyMatrix4(lw);return this||p},rotateZ:function(u){lw.makeRotationZ(u);this.applyMatrix4(lw);return this||p},translate:function(u,z,t){lw.makeTranslation(u,z,t);this.applyMatrix4(lw);return this||p},scale:function(u,z,t){lw.makeScale(u,z,t);this.applyMatrix4(lw);return this||p},lookAt:function(u){PZ.lookAt(u);PZ.updateMatrix();this.applyMatrix4(PZ.matrix);
return this||p},fromBufferGeometry:function(u){function z(Xa,Wa,tb,mb){var Kc=void 0===Q?[]:[t.colors[Xa].clone(),t.colors[Wa].clone(),t.colors[tb].clone()],ic=void 0===M?[]:[(new kc).fromBufferAttribute(M,Xa),(new kc).fromBufferAttribute(M,Wa),(new kc).fromBufferAttribute(M,tb)];mb=new dJ(Xa,Wa,tb,ic,Kc,mb);t.faces.push(mb);void 0!==X&&t.faceVertexUvs[0].push([(new Je).fromBufferAttribute(X,Xa),(new Je).fromBufferAttribute(X,Wa),(new Je).fromBufferAttribute(X,tb)]);void 0!==T&&t.faceVertexUvs[1].push([(new Je).fromBufferAttribute(T,
Xa),(new Je).fromBufferAttribute(T,Wa),(new Je).fromBufferAttribute(T,tb)])}var t=this||p,w=null!==u.index?u.index:void 0,C=u.attributes;if(void 0===C.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this||p;var G=C.position,M=C.normal,Q=C.color,X=C.uv,T=C.uv2;void 0!==T&&((this||p).faceVertexUvs[1]=[]);for(C=0;C<G.count;C++)t.vertices.push((new kc).fromBufferAttribute(G,C)),void 0!==Q&&t.colors.push((new bg).fromBufferAttribute(Q,C));
C=u.groups;if(0<C.length)for(G=0;G<C.length;G++){var fa=C[G],oa=fa.start,Ga=oa;for(oa+=fa.count;Ga<oa;Ga+=3)void 0!==w?z(w.getX(Ga),w.getX(Ga+1),w.getX(Ga+2),fa.materialIndex):z(Ga,Ga+1,Ga+2,fa.materialIndex)}else if(void 0!==w)for(C=0;C<w.count;C+=3)z(w.getX(C),w.getX(C+1),w.getX(C+2));else for(w=0;w<G.count;w+=3)z(w,w+1,w+2);this.computeFaceNormals();null!==u.boundingBox&&((this||p).boundingBox=u.boundingBox.clone());null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());return this||
p},center:function(){this.computeBoundingBox();(this||p).boundingBox.getCenter(RQ).negate();this.translate(RQ.x,RQ.y,RQ.z);return this||p},normalize:function(){this.computeBoundingSphere();var u=(this||p).boundingSphere.center,z=(this||p).boundingSphere.radius;z=0===z?1:1/z;var t=new Qi;t.set(z,0,0,-z*u.x,0,z,0,-z*u.y,0,0,z,-z*u.z,0,0,0,1);this.applyMatrix4(t);return this||p},computeFaceNormals:function(){for(var u=new kc,z=new kc,t=0,w=(this||p).faces.length;t<w;t++){var C=(this||p).faces[t],G=(this||
p).vertices[C.a],M=(this||p).vertices[C.b];u.subVectors((this||p).vertices[C.c],M);z.subVectors(G,M);u.cross(z);u.normalize();C.normal.copy(u)}},computeVertexNormals:function(u){void 0===u&&(u=!0);for(var z=Array((this||p).vertices.length),t=0,w=(this||p).vertices.length;t<w;t++)z[t]=new kc;if(u){u=new kc;t=new kc;w=0;for(var C=(this||p).faces.length;w<C;w++){var G=(this||p).faces[w],M=(this||p).vertices[G.a],Q=(this||p).vertices[G.b];u.subVectors((this||p).vertices[G.c],Q);t.subVectors(M,Q);u.cross(t);
z[G.a].add(u);z[G.b].add(u);z[G.c].add(u)}}else for(this.computeFaceNormals(),u=0,t=(this||p).faces.length;u<t;u++)w=(this||p).faces[u],z[w.a].add(w.normal),z[w.b].add(w.normal),z[w.c].add(w.normal);u=0;for(t=(this||p).vertices.length;u<t;u++)z[u].normalize();u=0;for(t=(this||p).faces.length;u<t;u++)w=(this||p).faces[u],C=w.vertexNormals,3===C.length?(C[0].copy(z[w.a]),C[1].copy(z[w.b]),C[2].copy(z[w.c])):(C[0]=z[w.a].clone(),C[1]=z[w.b].clone(),C[2]=z[w.c].clone());0<(this||p).faces.length&&((this||
p).normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u],w=t.vertexNormals;3===w.length?(w[0].copy(t.normal),w[1].copy(t.normal),w[2].copy(t.normal)):(w[0]=t.normal.clone(),w[1]=t.normal.clone(),w[2]=t.normal.clone())}0<(this||p).faces.length&&((this||p).normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u];t.__originalFaceNormal?
t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone();t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(var w=0,C=t.vertexNormals.length;w<C;w++)t.__originalVertexNormals[w]?t.__originalVertexNormals[w].copy(t.vertexNormals[w]):t.__originalVertexNormals[w]=t.vertexNormals[w].clone()}u=new Hk;u.faces=(this||p).faces;z=0;for(t=(this||p).morphTargets.length;z<t;z++){if(!(this||p).morphNormals[z]){(this||p).morphNormals[z]={};(this||p).morphNormals[z].faceNormals=[];
(this||p).morphNormals[z].vertexNormals=[];w=(this||p).morphNormals[z].faceNormals;C=(this||p).morphNormals[z].vertexNormals;for(var G=0,M=(this||p).faces.length;G<M;G++){var Q=new kc,X={a:new kc,b:new kc,c:new kc};w.push(Q);C.push(X)}}w=(this||p).morphNormals[z];u.vertices=(this||p).morphTargets[z].vertices;u.computeFaceNormals();u.computeVertexNormals();C=0;for(G=(this||p).faces.length;C<G;C++)M=(this||p).faces[C],Q=w.vertexNormals[C],w.faceNormals[C].copy(M.normal),Q.a.copy(M.vertexNormals[0]),
Q.b.copy(M.vertexNormals[1]),Q.c.copy(M.vertexNormals[2])}u=0;for(z=(this||p).faces.length;u<z;u++)t=(this||p).faces[u],t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||p).boundingBox=new jw);(this||p).boundingBox.setFromPoints((this||p).vertices)},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new Tx);(this||p).boundingSphere.setFromPoints((this||p).vertices)},
merge:function(u,z,t){void 0===t&&(t=0);if(u&&u.isGeometry){var w,C=(this||p).vertices.length,G=(this||p).vertices,M=u.vertices,Q=(this||p).faces,X=u.faces,T=(this||p).colors,fa=u.colors;void 0!==z&&(w=(new Cp).getNormalMatrix(z));for(var oa=0,Ga=M.length;oa<Ga;oa++){var Xa=M[oa].clone();void 0!==z&&Xa.applyMatrix4(z);G.push(Xa)}z=0;for(G=fa.length;z<G;z++)T.push(fa[z].clone());T=0;for(fa=X.length;T<fa;T++){z=X[T];Ga=z.vertexNormals;G=z.vertexColors;M=new dJ(z.a+C,z.b+C,z.c+C);M.normal.copy(z.normal);
void 0!==w&&M.normal.applyMatrix3(w).normalize();Xa=0;for(var Wa=Ga.length;Xa<Wa;Xa++)oa=Ga[Xa].clone(),void 0!==w&&oa.applyMatrix3(w).normalize(),M.vertexNormals.push(oa);M.color.copy(z.color);Ga=0;for(Xa=G.length;Ga<Xa;Ga++)oa=G[Ga],M.vertexColors.push(oa.clone());M.materialIndex=z.materialIndex+t;Q.push(M)}t=0;for(w=u.faceVertexUvs.length;t<w;t++)for(C=u.faceVertexUvs[t],void 0===(this||p).faceVertexUvs[t]&&((this||p).faceVertexUvs[t]=[]),Q=0,X=C.length;Q<X;Q++){T=C[Q];fa=[];z=0;for(G=T.length;z<
G;z++)fa.push(T[z].clone());(this||p).faceVertexUvs[t].push(fa)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",u)},mergeMesh:function(u){u&&u.isMesh?(u.matrixAutoUpdate&&u.updateMatrix(),this.merge(u.geometry,u.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",u)},mergeVertices:function(u){void 0===u&&(u=4);var z={},t=[],w=[];u=Math.pow(10,u);for(var C=0,G=(this||p).vertices.length;C<G;C++){var M=(this||p).vertices[C];
M=Math.round(M.x*u)+"_"+Math.round(M.y*u)+"_"+Math.round(M.z*u);void 0===z[M]?(z[M]=C,t.push((this||p).vertices[C]),w[C]=t.length-1):w[C]=w[z[M]]}z=[];u=0;for(C=(this||p).faces.length;u<C;u++)for(G=(this||p).faces[u],G.a=w[G.a],G.b=w[G.b],G.c=w[G.c],G=[G.a,G.b,G.c],M=0;3>M;M++)if(G[M]===G[(M+1)%3]){z.push(u);break}for(w=z.length-1;0<=w;w--)for(u=z[w],(this||p).faces.splice(u,1),C=0,G=(this||p).faceVertexUvs.length;C<G;C++)(this||p).faceVertexUvs[C].splice(u,1);w=(this||p).vertices.length-t.length;
(this||p).vertices=t;return w},setFromPoints:function(u){(this||p).vertices=[];for(var z=0,t=u.length;z<t;z++){var w=u[z];(this||p).vertices.push(new kc(w.x,w.y,w.z||0))}return this||p},sortFacesByMaterialIndex:function(){for(var u=(this||p).faces,z=u.length,t=0;t<z;t++)u[t]._id=t;u.sort(function(X,T){return X.materialIndex-T.materialIndex});t=(this||p).faceVertexUvs[0];var w=(this||p).faceVertexUvs[1],C,G;t&&t.length===z&&(C=[]);w&&w.length===z&&(G=[]);for(var M=0;M<z;M++){var Q=u[M]._id;C&&C.push(t[Q]);
G&&G.push(w[Q])}C&&((this||p).faceVertexUvs[0]=C);G&&((this||p).faceVertexUvs[1]=G)},toJSON:function(){function u(Yc,fd,Zc){return Zc?Yc|1<<fd:Yc&~(1<<fd)}function z(Yc){var fd=Yc.x.toString()+Yc.y.toString()+Yc.z.toString();if(void 0!==T[fd])return T[fd];T[fd]=X.length/3;X.push(Yc.x,Yc.y,Yc.z);return T[fd]}function t(Yc){var fd=Yc.r.toString()+Yc.g.toString()+Yc.b.toString();if(void 0!==oa[fd])return oa[fd];oa[fd]=fa.length;fa.push(Yc.getHex());return oa[fd]}function w(Yc){var fd=Yc.x.toString()+
Yc.y.toString();if(void 0!==Xa[fd])return Xa[fd];Xa[fd]=Ga.length/2;Ga.push(Yc.x,Yc.y);return Xa[fd]}var C={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};C.uuid=(this||p).uuid;C.type=(this||p).type;""!==(this||p).name&&(C.name=(this||p).name);if(void 0!==(this||p).parameters){var G=(this||p).parameters,M;for(M in G)void 0!==G[M]&&(C[M]=G[M]);return C}G=[];for(M=0;M<(this||p).vertices.length;M++){var Q=(this||p).vertices[M];G.push(Q.x,Q.y,Q.z)}M=[];var X=[],T={},fa=[],oa={},Ga=
[],Xa={};for(Q=0;Q<(this||p).faces.length;Q++){var Wa=(this||p).faces[Q],tb=void 0!==(this||p).faceVertexUvs[0][Q],mb=0<Wa.normal.length(),Kc=0<Wa.vertexNormals.length,ic=1!==Wa.color.r||1!==Wa.color.g||1!==Wa.color.b,Lc=0<Wa.vertexColors.length,vc=0;vc=u(vc,0,0);vc=u(vc,1,!0);vc=u(vc,2,!1);vc=u(vc,3,tb);vc=u(vc,4,mb);vc=u(vc,5,Kc);vc=u(vc,6,ic);vc=u(vc,7,Lc);M.push(vc);M.push(Wa.a,Wa.b,Wa.c);M.push(Wa.materialIndex);tb&&(tb=(this||p).faceVertexUvs[0][Q],M.push(w(tb[0]),w(tb[1]),w(tb[2])));mb&&M.push(z(Wa.normal));
Kc&&(mb=Wa.vertexNormals,M.push(z(mb[0]),z(mb[1]),z(mb[2])));ic&&M.push(t(Wa.color));Lc&&(Wa=Wa.vertexColors,M.push(t(Wa[0]),t(Wa[1]),t(Wa[2])))}C.data={};C.data.vertices=G;C.data.normals=X;0<fa.length&&(C.data.colors=fa);0<Ga.length&&(C.data.uvs=[Ga]);C.data.faces=M;return C},clone:function(){return(new Hk).copy(this||p)},copy:function(u){(this||p).vertices=[];(this||p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=[];(this||p).morphNormals=[];(this||p).skinWeights=
[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).name=u.name;for(var z=u.vertices,t=0,w=z.length;t<w;t++)(this||p).vertices.push(z[t].clone());z=u.colors;t=0;for(w=z.length;t<w;t++)(this||p).colors.push(z[t].clone());z=u.faces;t=0;for(w=z.length;t<w;t++)(this||p).faces.push(z[t].clone());z=0;for(t=u.faceVertexUvs.length;z<t;z++){w=u.faceVertexUvs[z];void 0===(this||p).faceVertexUvs[z]&&((this||p).faceVertexUvs[z]=[]);for(var C=
0,G=w.length;C<G;C++){for(var M=w[C],Q=[],X=0,T=M.length;X<T;X++)Q.push(M[X].clone());(this||p).faceVertexUvs[z].push(Q)}}z=u.morphTargets;t=0;for(w=z.length;t<w;t++){C={};C.name=z[t].name;if(void 0!==z[t].vertices)for(C.vertices=[],G=0,M=z[t].vertices.length;G<M;G++)C.vertices.push(z[t].vertices[G].clone());if(void 0!==z[t].normals)for(C.normals=[],G=0,M=z[t].normals.length;G<M;G++)C.normals.push(z[t].normals[G].clone());(this||p).morphTargets.push(C)}z=u.morphNormals;t=0;for(w=z.length;t<w;t++){C=
{};if(void 0!==z[t].vertexNormals)for(C.vertexNormals=[],G=0,M=z[t].vertexNormals.length;G<M;G++)Q=z[t].vertexNormals[G],X={},X.a=Q.a.clone(),X.b=Q.b.clone(),X.c=Q.c.clone(),C.vertexNormals.push(X);if(void 0!==z[t].faceNormals)for(C.faceNormals=[],G=0,M=z[t].faceNormals.length;G<M;G++)C.faceNormals.push(z[t].faceNormals[G].clone());(this||p).morphNormals.push(C)}z=u.skinWeights;t=0;for(w=z.length;t<w;t++)(this||p).skinWeights.push(z[t].clone());z=u.skinIndices;t=0;for(w=z.length;t<w;t++)(this||p).skinIndices.push(z[t].clone());
z=u.lineDistances;t=0;for(w=z.length;t<w;t++)(this||p).lineDistances.push(z[t]);z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).elementsNeedUpdate=u.elementsNeedUpdate;(this||p).verticesNeedUpdate=u.verticesNeedUpdate;(this||p).uvsNeedUpdate=u.uvsNeedUpdate;(this||p).normalsNeedUpdate=u.normalsNeedUpdate;(this||p).colorsNeedUpdate=u.colorsNeedUpdate;(this||p).lineDistancesNeedUpdate=u.lineDistancesNeedUpdate;(this||
p).groupsNeedUpdate=u.groupsNeedUpdate;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var QZ=function(u){function z(t,w,C,G,M,Q){var X=u.call(this||p)||this||p;X.type="BoxGeometry";X.parameters={width:t,height:w,depth:C,widthSegments:G,heightSegments:M,depthSegments:Q};X.fromBufferGeometry(new eJ(t,w,C,G,M,Q));X.mergeVertices();return X}f(z,u);return z}(Hk),RZ=function(u){function z(t,w,C,G){void 0===t&&(t=1);void 0===w&&(w=8);void 0===C&&(C=0);void 0===G&&(G=2*Math.PI);
var M=u.call(this||p)||this||p;M.type="CircleBufferGeometry";M.parameters={radius:t,segments:w,thetaStart:C,thetaLength:G};w=Math.max(3,w);var Q=[],X=[],T=[],fa=[],oa=new kc,Ga=new Je;X.push(0,0,0);T.push(0,0,1);fa.push(.5,.5);for(var Xa=0,Wa=3;Xa<=w;Xa++,Wa+=3){var tb=C+Xa/w*G;oa.x=t*Math.cos(tb);oa.y=t*Math.sin(tb);X.push(oa.x,oa.y,oa.z);T.push(0,0,1);Ga.x=(X[Wa]/t+1)/2;Ga.y=(X[Wa+1]/t+1)/2;fa.push(Ga.x,Ga.y)}for(t=1;t<=w;t++)Q.push(t,t+1,0);M.setIndex(Q);M.setAttribute("position",new aa(X,3));
M.setAttribute("normal",new aa(T,3));M.setAttribute("uv",new aa(fa,2));return M}f(z,u);return z}(ob),$da=function(u){function z(t,w,C,G){var M=u.call(this||p)||this||p;M.type="CircleGeometry";M.parameters={radius:t,segments:w,thetaStart:C,thetaLength:G};M.fromBufferGeometry(new RZ(t,w,C,G));M.mergeVertices();return M}f(z,u);return z}(Hk),MJ=function(u){function z(t,w,C,G,M,Q,X,T){function fa(Yc){for(var fd=Kc,Zc=new Je,Rd=new kc,ld=0,sd=!0===Yc?t:w,Ae=!0===Yc?1:-1,qe=1;qe<=G;qe++)Wa.push(0,Lc*Ae,
0),tb.push(0,Ae,0),mb.push(.5,.5),Kc++;qe=Kc;for(var Qf=0;Qf<=G;Qf++){var Af=Qf/G*T+X,Mf=Math.cos(Af);Af=Math.sin(Af);Rd.x=sd*Af;Rd.y=Lc*Ae;Rd.z=sd*Mf;Wa.push(Rd.x,Rd.y,Rd.z);tb.push(0,Ae,0);Zc.x=.5*Mf+.5;Zc.y=.5*Af*Ae+.5;mb.push(Zc.x,Zc.y);Kc++}for(Zc=0;Zc<G;Zc++)Rd=fd+Zc,sd=qe+Zc,!0===Yc?Xa.push(sd,sd+1,Rd):Xa.push(sd+1,sd,Rd),ld+=3;Ga.addGroup(vc,ld,!0===Yc?1:2);vc+=ld}void 0===t&&(t=1);void 0===w&&(w=1);void 0===C&&(C=1);void 0===G&&(G=8);void 0===M&&(M=1);void 0===Q&&(Q=!1);void 0===X&&(X=0);
void 0===T&&(T=2*Math.PI);var oa=u.call(this||p)||this||p;oa.type="CylinderBufferGeometry";oa.parameters={radiusTop:t,radiusBottom:w,height:C,radialSegments:G,heightSegments:M,openEnded:Q,thetaStart:X,thetaLength:T};var Ga=l(oa);G=Math.floor(G);M=Math.floor(M);var Xa=[],Wa=[],tb=[],mb=[],Kc=0,ic=[],Lc=C/2,vc=0;(function(){for(var Yc=new kc,fd=new kc,Zc=0,Rd=(w-t)/C,ld=0;ld<=M;ld++){for(var sd=[],Ae=ld/M,qe=Ae*(w-t)+t,Qf=0;Qf<=G;Qf++){var Af=Qf/G,Mf=Af*T+X,jg=Math.sin(Mf);Mf=Math.cos(Mf);fd.x=qe*jg;
fd.y=-Ae*C+Lc;fd.z=qe*Mf;Wa.push(fd.x,fd.y,fd.z);Yc.set(jg,Rd,Mf).normalize();tb.push(Yc.x,Yc.y,Yc.z);mb.push(Af,1-Ae);sd.push(Kc++)}ic.push(sd)}for(Yc=0;Yc<G;Yc++)for(fd=0;fd<M;fd++)Rd=ic[fd+1][Yc],ld=ic[fd+1][Yc+1],sd=ic[fd][Yc+1],Xa.push(ic[fd][Yc],Rd,sd),Xa.push(Rd,ld,sd),Zc+=6;Ga.addGroup(vc,Zc,0);vc+=Zc})();!1===Q&&(0<t&&fa(!0),0<w&&fa(!1));oa.setIndex(Xa);oa.setAttribute("position",new aa(Wa,3));oa.setAttribute("normal",new aa(tb,3));oa.setAttribute("uv",new aa(mb,2));return oa}f(z,u);return z}(ob),
SZ=function(u){function z(t,w,C,G,M,Q,X,T){var fa=u.call(this||p)||this||p;fa.type="CylinderGeometry";fa.parameters={radiusTop:t,radiusBottom:w,height:C,radialSegments:G,heightSegments:M,openEnded:Q,thetaStart:X,thetaLength:T};fa.fromBufferGeometry(new MJ(t,w,C,G,M,Q,X,T));fa.mergeVertices();return fa}f(z,u);return z}(Hk),aea=function(u){function z(t,w,C,G,M,Q,X){var T=u.call(this||p,0,t,w,C,G,M,Q,X)||this||p;T.type="ConeGeometry";T.parameters={radius:t,height:w,radialSegments:C,heightSegments:G,
openEnded:M,thetaStart:Q,thetaLength:X};return T}f(z,u);return z}(SZ),bea=function(u){function z(t,w,C,G,M,Q,X){void 0===t&&(t=1);void 0===w&&(w=1);void 0===C&&(C=8);void 0===G&&(G=1);void 0===M&&(M=!1);void 0===Q&&(Q=0);void 0===X&&(X=2*Math.PI);var T=u.call(this||p,0,t,w,C,G,M,Q,X)||this||p;T.type="ConeBufferGeometry";T.parameters={radius:t,height:w,radialSegments:C,heightSegments:G,openEnded:M,thetaStart:Q,thetaLength:X};return T}f(z,u);return z}(MJ),QC=function(u){function z(t,w,C,G){function M(Ga){fa.push(Ga.x,
Ga.y,Ga.z)}function Q(Ga,Xa){Ga*=3;Xa.x=t[Ga+0];Xa.y=t[Ga+1];Xa.z=t[Ga+2]}function X(Ga,Xa,Wa,tb){0>tb&&1===Ga.x&&(oa[Xa]=Ga.x-1);0===Wa.x&&0===Wa.z&&(oa[Xa]=tb/2/Math.PI+.5)}void 0===C&&(C=1);void 0===G&&(G=0);var T=u.call(this||p)||this||p;T.type="PolyhedronBufferGeometry";T.parameters={vertices:t,indices:w,radius:C,detail:G};var fa=[],oa=[];(function(Ga){for(var Xa=new kc,Wa=new kc,tb=new kc,mb=0;mb<w.length;mb+=3){Q(w[mb+0],Xa);Q(w[mb+1],Wa);Q(w[mb+2],tb);for(var Kc=Xa,ic=Wa,Lc=tb,vc=Ga+1,Yc=
[],fd=0;fd<=vc;fd++){Yc[fd]=[];for(var Zc=Kc.clone().lerp(Lc,fd/vc),Rd=ic.clone().lerp(Lc,fd/vc),ld=vc-fd,sd=0;sd<=ld;sd++)Yc[fd][sd]=0===sd&&fd===vc?Zc:Zc.clone().lerp(Rd,sd/ld)}for(Kc=0;Kc<vc;Kc++)for(ic=0;ic<2*(vc-Kc)-1;ic++)Lc=Math.floor(ic/2),0===ic%2?(M(Yc[Kc][Lc+1]),M(Yc[Kc+1][Lc]),M(Yc[Kc][Lc])):(M(Yc[Kc][Lc+1]),M(Yc[Kc+1][Lc+1]),M(Yc[Kc+1][Lc]))}})(G);(function(Ga){for(var Xa=new kc,Wa=0;Wa<fa.length;Wa+=3)Xa.x=fa[Wa+0],Xa.y=fa[Wa+1],Xa.z=fa[Wa+2],Xa.normalize().multiplyScalar(Ga),fa[Wa+
0]=Xa.x,fa[Wa+1]=Xa.y,fa[Wa+2]=Xa.z})(C);(function(){for(var Ga=new kc,Xa=0;Xa<fa.length;Xa+=3)Ga.x=fa[Xa+0],Ga.y=fa[Xa+1],Ga.z=fa[Xa+2],oa.push(Math.atan2(Ga.z,-Ga.x)/2/Math.PI+.5,1-(Math.atan2(-Ga.y,Math.sqrt(Ga.x*Ga.x+Ga.z*Ga.z))/Math.PI+.5));Ga=new kc;Xa=new kc;for(var Wa=new kc,tb=new kc,mb=new Je,Kc=new Je,ic=new Je,Lc=0,vc=0;Lc<fa.length;Lc+=9,vc+=6){Ga.set(fa[Lc+0],fa[Lc+1],fa[Lc+2]);Xa.set(fa[Lc+3],fa[Lc+4],fa[Lc+5]);Wa.set(fa[Lc+6],fa[Lc+7],fa[Lc+8]);mb.set(oa[vc+0],oa[vc+1]);Kc.set(oa[vc+
2],oa[vc+3]);ic.set(oa[vc+4],oa[vc+5]);tb.copy(Ga).add(Xa).add(Wa).divideScalar(3);var Yc=Math.atan2(tb.z,-tb.x);X(mb,vc+0,Ga,Yc);X(Kc,vc+2,Xa,Yc);X(ic,vc+4,Wa,Yc)}for(Ga=0;Ga<oa.length;Ga+=6)Xa=oa[Ga+0],Wa=oa[Ga+2],tb=oa[Ga+4],mb=Math.min(Xa,Wa,tb),.9<Math.max(Xa,Wa,tb)&&.1>mb&&(.2>Xa&&(oa[Ga+0]+=1),.2>Wa&&(oa[Ga+2]+=1),.2>tb&&(oa[Ga+4]+=1))})();T.setAttribute("position",new aa(fa,3));T.setAttribute("normal",new aa(fa.slice(),3));T.setAttribute("uv",new aa(oa,2));0===G?T.computeVertexNormals():T.normalizeNormals();
return T}f(z,u);return z}(ob),TZ=function(u){function z(t,w){void 0===t&&(t=1);void 0===w&&(w=0);var C=(1+Math.sqrt(5))/2;var G=1/C;C=u.call(this||p,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-G,-C,0,-G,C,0,G,-C,0,G,C,-G,-C,0,-G,C,0,G,-C,0,G,C,0,-C,0,-G,C,0,-G,-C,0,G,C,0,G],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,
11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,w)||this||p;C.type="DodecahedronBufferGeometry";C.parameters={radius:t,detail:w};return C}f(z,u);return z}(QC),cea=function(u){function z(t,w){var C=u.call(this||p)||this||p;C.type="DodecahedronGeometry";C.parameters={radius:t,detail:w};C.fromBufferGeometry(new TZ(t,w));C.mergeVertices();return C}f(z,u);return z}(Hk),SQ=new kc,TQ=new kc,UZ=new kc,UF=new cu,VZ=function(u){function z(t,w){var C=u.call(this||p)||this||p;C.type="EdgesGeometry";
C.parameters={thresholdAngle:w};w=void 0!==w?w:1;t.isGeometry&&(t=(new ob).fromGeometry(t));var G=Math.pow(10,4),M=Math.cos(Kh.DEG2RAD*w),Q=t.getIndex();t=t.getAttribute("position");var X=Q?Q.count:t.count,T=[0,0,0],fa=["a","b","c"],oa=Array(3);w={};for(var Ga=[],Xa=0;Xa<X;Xa+=3){Q?(T[0]=Q.getX(Xa),T[1]=Q.getX(Xa+1),T[2]=Q.getX(Xa+2)):(T[0]=Xa,T[1]=Xa+1,T[2]=Xa+2);var Wa=UF.a,tb=UF.b,mb=UF.c;Wa.fromBufferAttribute(t,T[0]);tb.fromBufferAttribute(t,T[1]);mb.fromBufferAttribute(t,T[2]);UF.getNormal(UZ);
oa[0]=Math.round(Wa.x*G)+","+Math.round(Wa.y*G)+","+Math.round(Wa.z*G);oa[1]=Math.round(tb.x*G)+","+Math.round(tb.y*G)+","+Math.round(tb.z*G);oa[2]=Math.round(mb.x*G)+","+Math.round(mb.y*G)+","+Math.round(mb.z*G);if(oa[0]!==oa[1]&&oa[1]!==oa[2]&&oa[2]!==oa[0])for(Wa=0;3>Wa;Wa++){tb=(Wa+1)%3;var Kc=oa[Wa],ic=oa[tb];mb=UF[fa[Wa]];var Lc=UF[fa[tb]],vc=Kc+"_"+ic;Kc=ic+"_"+Kc;Kc in w&&w[Kc]?(UZ.dot(w[Kc].normal)<=M&&(Ga.push(mb.x,mb.y,mb.z),Ga.push(Lc.x,Lc.y,Lc.z)),w[Kc]=null):vc in w||(w[vc]={index0:T[Wa],
index1:T[tb],normal:UZ.clone()})}}for(var Yc in w)w[Yc]&&(G=w[Yc],M=G.index1,SQ.fromBufferAttribute(t,G.index0),TQ.fromBufferAttribute(t,M),Ga.push(SQ.x,SQ.y,SQ.z),Ga.push(TQ.x,TQ.y,TQ.z));C.setAttribute("position",new aa(Ga,3));return C}f(z,u);return z}(ob),mxa={triangulate:function(u,z,t){t=t||2;var w=z&&z.length,C=w?z[0]*t:u.length,G=fda(u,0,C,t,!0),M=[];if(!G||G.next===G.prev)return M;var Q;if(w){var X=t;w=[];var T;var fa=0;for(T=z.length;fa<T;fa++){var oa=z[fa]*X;var Ga=fa<T-1?z[fa+1]*X:u.length;
oa=fda(u,oa,Ga,X,!1);oa===oa.next&&(oa.steiner=!0);w.push(Zwa(oa))}w.sort(Xwa);for(fa=0;fa<w.length;fa++){X=w[fa];z=G;if(z=Ywa(X,z))X=ida(z,X),oA(z,z.next),oA(X,X.next);G=oA(G,G.next)}}if(u.length>80*t){var Xa=Q=u[0];var Wa=w=u[1];for(X=t;X<C;X+=t)fa=u[X],z=u[X+1],fa<Xa&&(Xa=fa),z<Wa&&(Wa=z),fa>Q&&(Q=fa),z>w&&(w=z);Q=Math.max(Q-Xa,w-Wa);Q=0!==Q?1/Q:0}sJ(G,M,t,Xa,Wa,Q);return M}},Yx={area:function(u){for(var z=u.length,t=0,w=z-1,C=0;C<z;w=C++)t+=u[w].x*u[C].y-u[C].x*u[w].y;return.5*t},isClockWise:function(u){return 0>
Yx.area(u)},triangulateShape:function(u,z){var t=[],w=[],C=[];jda(u);kda(t,u);u=u.length;z.forEach(jda);for(var G=0;G<z.length;G++)w.push(u),u+=z[G].length,kda(t,z[G]);z=mxa.triangulate(t,w);for(t=0;t<z.length;t+=3)C.push(z.slice(t,t+3));return C}},NJ=function(u){function z(t,w){function C(oa){function Ga(oe,Rf,gh){Rf||console.error("THREE.ExtrudeGeometry: vec does not exist");return Rf.clone().multiplyScalar(gh).add(oe)}function Xa(oe,Rf,gh){var Tg=oe.x-Rf.x;var mj=oe.y-Rf.y;var Zi=gh.x-oe.x;var ul=
gh.y-oe.y,Ak=Tg*Tg+mj*mj;if(Math.abs(Tg*ul-mj*Zi)>Number.EPSILON){var mq=Math.sqrt(Ak),Ox=Math.sqrt(Zi*Zi+ul*ul);Ak=Rf.x-mj/mq;Rf=Rf.y+Tg/mq;ul=((gh.x-ul/Ox-Ak)*ul-(gh.y+Zi/Ox-Rf)*Zi)/(Tg*ul-mj*Zi);Zi=Ak+Tg*ul-oe.x;Tg=Rf+mj*ul-oe.y;mj=Zi*Zi+Tg*Tg;if(2>=mj)return new Je(Zi,Tg);mj=Math.sqrt(mj/2)}else oe=!1,Tg>Number.EPSILON?Zi>Number.EPSILON&&(oe=!0):Tg<-Number.EPSILON?Zi<-Number.EPSILON&&(oe=!0):Math.sign(mj)===Math.sign(ul)&&(oe=!0),oe?(Zi=-mj,mj=Math.sqrt(Ak)):(Zi=Tg,Tg=mj,mj=Math.sqrt(Ak/2));return new Je(Zi/
mj,Tg/mj)}function Wa(oe,Rf){for(var gh=oe.length;0<=--gh;){var Tg=gh,mj=gh-1;0>mj&&(mj=oe.length-1);for(var Zi=0,ul=Yc+2*Ae;Zi<ul;Zi++){var Ak=Rc*Zi,mq=Rc*(Zi+1),Ox=Rf+mj+Ak,jA=Rf+mj+mq;mq=Rf+Tg+mq;Kc(Rf+Tg+Ak);Kc(Ox);Kc(mq);Kc(Ox);Kc(jA);Kc(mq);Ak=Q.length/3;Ak=Qf.generateSideWallUV(M,Q,Ak-6,Ak-3,Ak-2,Ak-1);ic(Ak[0]);ic(Ak[1]);ic(Ak[3]);ic(Ak[1]);ic(Ak[2]);ic(Ak[3])}}}function tb(oe,Rf,gh){Lc.push(oe);Lc.push(Rf);Lc.push(gh)}function mb(oe,Rf,gh){Kc(oe);Kc(Rf);Kc(gh);oe=Q.length/3;oe=Qf.generateTopUV(M,
Q,oe-3,oe-2,oe-1);ic(oe[0]);ic(oe[1]);ic(oe[2])}function Kc(oe){Q.push(Lc[3*oe]);Q.push(Lc[3*oe+1]);Q.push(Lc[3*oe+2])}function ic(oe){X.push(oe.x);X.push(oe.y)}var Lc=[],vc=void 0!==w.curveSegments?w.curveSegments:12,Yc=void 0!==w.steps?w.steps:1,fd=void 0!==w.depth?w.depth:100,Zc=void 0!==w.bevelEnabled?w.bevelEnabled:!0,Rd=void 0!==w.bevelThickness?w.bevelThickness:6,ld=void 0!==w.bevelSize?w.bevelSize:Rd-2,sd=void 0!==w.bevelOffset?w.bevelOffset:0,Ae=void 0!==w.bevelSegments?w.bevelSegments:3,
qe=w.extrudePath,Qf=void 0!==w.UVGenerator?w.UVGenerator:nxa;void 0!==w.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),fd=w.amount);var Af=!1;if(qe){var Mf=qe.getSpacedPoints(Yc);Af=!0;Zc=!1;var jg=qe.computeFrenetFrames(Yc,!1);var ah=new kc;var Lh=new kc;var mh=new kc}Zc||(sd=ld=Rd=Ae=0);oa=oa.extractPoints(vc);qe=oa.shape;var Mj=oa.holes;if(!Yx.isClockWise(qe))for(qe=qe.reverse(),oa=0,vc=Mj.length;oa<vc;oa++){var lk=Mj[oa];Yx.isClockWise(lk)&&(Mj[oa]=lk.reverse())}var tl=
Yx.triangulateShape(qe,Mj),rc=qe;oa=0;for(vc=Mj.length;oa<vc;oa++)qe=qe.concat(Mj[oa]);var Rc=qe.length,te=tl.length;oa=[];vc=0;lk=rc.length;for(var Wc=lk-1,Ge=vc+1;vc<lk;vc++,Wc++,Ge++)Wc===lk&&(Wc=0),Ge===lk&&(Ge=0),oa[vc]=Xa(rc[vc],rc[Wc],rc[Ge]);vc=[];lk=oa.concat();Ge=0;for(var Ue=Mj.length;Ge<Ue;Ge++){var vg=Mj[Ge];Wc=[];for(var wf=0,Mh=vg.length,Eh=Mh-1,ai=wf+1;wf<Mh;wf++,Eh++,ai++)Eh===Mh&&(Eh=0),ai===Mh&&(ai=0),Wc[wf]=Xa(vg[wf],vg[Eh],vg[ai]);vc.push(Wc);lk=lk.concat(Wc)}for(Ge=0;Ge<Ae;Ge++){Wc=
Ge/Ae;Ue=Rd*Math.cos(Wc*Math.PI/2);vg=ld*Math.sin(Wc*Math.PI/2)+sd;Wc=0;for(wf=rc.length;Wc<wf;Wc++)Mh=Ga(rc[Wc],oa[Wc],vg),tb(Mh.x,Mh.y,-Ue);wf=0;for(Mh=Mj.length;wf<Mh;wf++){Eh=Mj[wf];Wc=vc[wf];ai=0;for(var Uh=Eh.length;ai<Uh;ai++){var kk=Ga(Eh[ai],Wc[ai],vg);tb(kk.x,kk.y,-Ue)}}}Wc=ld+sd;for(Ge=0;Ge<Rc;Ge++)Ue=Zc?Ga(qe[Ge],lk[Ge],Wc):qe[Ge],Af?(Lh.copy(jg.normals[0]).multiplyScalar(Ue.x),ah.copy(jg.binormals[0]).multiplyScalar(Ue.y),mh.copy(Mf[0]).add(Lh).add(ah),tb(mh.x,mh.y,mh.z)):tb(Ue.x,Ue.y,
0);for(Ge=1;Ge<=Yc;Ge++)for(Ue=0;Ue<Rc;Ue++)vg=Zc?Ga(qe[Ue],lk[Ue],Wc):qe[Ue],Af?(Lh.copy(jg.normals[Ge]).multiplyScalar(vg.x),ah.copy(jg.binormals[Ge]).multiplyScalar(vg.y),mh.copy(Mf[Ge]).add(Lh).add(ah),tb(mh.x,mh.y,mh.z)):tb(vg.x,vg.y,fd/Yc*Ge);for(jg=Ae-1;0<=jg;jg--){Lh=jg/Ae;ah=Rd*Math.cos(Lh*Math.PI/2);Lh=ld*Math.sin(Lh*Math.PI/2)+sd;mh=0;for(qe=rc.length;mh<qe;mh++)lk=Ga(rc[mh],oa[mh],Lh),tb(lk.x,lk.y,fd+ah);mh=0;for(qe=Mj.length;mh<qe;mh++)for(lk=Mj[mh],Wc=vc[mh],Ge=0,Ue=lk.length;Ge<Ue;Ge++)vg=
Ga(lk[Ge],Wc[Ge],Lh),Af?tb(vg.x,vg.y+Mf[Yc-1].y,Mf[Yc-1].x+ah):tb(vg.x,vg.y,fd+ah)}(function(){var oe=Q.length/3;if(Zc){for(var Rf=0*Rc,gh=0;gh<te;gh++){var Tg=tl[gh];mb(Tg[2]+Rf,Tg[1]+Rf,Tg[0]+Rf)}Rf=Rc*(Yc+2*Ae);for(gh=0;gh<te;gh++)Tg=tl[gh],mb(Tg[0]+Rf,Tg[1]+Rf,Tg[2]+Rf)}else{for(Rf=0;Rf<te;Rf++)gh=tl[Rf],mb(gh[2],gh[1],gh[0]);for(Rf=0;Rf<te;Rf++)gh=tl[Rf],mb(gh[0]+Rc*Yc,gh[1]+Rc*Yc,gh[2]+Rc*Yc)}M.addGroup(oe,Q.length/3-oe,0)})();(function(){var oe=Q.length/3,Rf=0;Wa(rc,Rf);Rf+=rc.length;for(var gh=
0,Tg=Mj.length;gh<Tg;gh++){var mj=Mj[gh];Wa(mj,Rf);Rf+=mj.length}M.addGroup(oe,Q.length/3-oe,1)})()}var G=u.call(this||p)||this||p;G.type="ExtrudeBufferGeometry";G.parameters={shapes:t,options:w};t=Array.isArray(t)?t:[t];for(var M=l(G),Q=[],X=[],T=0,fa=t.length;T<fa;T++)C(t[T]);G.setAttribute("position",new aa(Q,3));G.setAttribute("uv",new aa(X,2));G.computeVertexNormals();return G}f(z,u);z.prototype.toJSON=function(){var t=ob.prototype.toJSON.call(this||p),w=(this||p).parameters.shapes,C=(this||
p).parameters.options;t.shapes=[];if(Array.isArray(w))for(var G=0,M=w.length;G<M;G++)t.shapes.push(w[G].uuid);else t.shapes.push(w.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=C.extrudePath.toJSON());return t};return z}(ob),nxa={generateTopUV:function(u,z,t,w,C){u=z[3*w];w=z[3*w+1];var G=z[3*C];C=z[3*C+1];return[new Je(z[3*t],z[3*t+1]),new Je(u,w),new Je(G,C)]},generateSideWallUV:function(u,z,t,w,C,G){u=z[3*t];var M=z[3*t+1];t=z[3*t+2];var Q=z[3*w],X=z[3*w+1];w=z[3*w+2];var T=z[3*C],fa=z[3*
C+1];C=z[3*C+2];var oa=z[3*G],Ga=z[3*G+1];z=z[3*G+2];return.01>Math.abs(M-X)?[new Je(u,1-t),new Je(Q,1-w),new Je(T,1-C),new Je(oa,1-z)]:[new Je(M,1-t),new Je(X,1-w),new Je(fa,1-C),new Je(Ga,1-z)]}},WZ=function(u){function z(t,w){var C=u.call(this||p)||this||p;C.type="ExtrudeGeometry";C.parameters={shapes:t,options:w};C.fromBufferGeometry(new NJ(t,w));C.mergeVertices();return C}f(z,u);z.prototype.toJSON=function(){var t=u.prototype.toJSON.call(this||p),w=(this||p).parameters.shapes,C=(this||p).parameters.options;
t.shapes=[];if(Array.isArray(w))for(var G=0,M=w.length;G<M;G++)t.shapes.push(w[G].uuid);else t.shapes.push(w.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=C.extrudePath.toJSON());return t};return z}(Hk),XZ=function(u){function z(t,w){void 0===t&&(t=1);void 0===w&&(w=0);var C=(1+Math.sqrt(5))/2;C=u.call(this||p,[-1,C,0,1,C,0,-1,-C,0,1,-C,0,0,-1,C,0,1,C,0,-1,-C,0,1,-C,C,0,-1,C,0,1,-C,0,-1,-C,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,
9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,w)||this||p;C.type="IcosahedronBufferGeometry";C.parameters={radius:t,detail:w};return C}f(z,u);return z}(QC),dea=function(u){function z(t,w){var C=u.call(this||p)||this||p;C.type="IcosahedronGeometry";C.parameters={radius:t,detail:w};C.fromBufferGeometry(new XZ(t,w));C.mergeVertices();return C}f(z,u);return z}(Hk),YZ=function(u){function z(t,w,C,G){void 0===w&&(w=12);void 0===C&&(C=0);void 0===G&&(G=2*Math.PI);var M=u.call(this||p)||this||p;M.type="LatheBufferGeometry";
M.parameters={points:t,segments:w,phiStart:C,phiLength:G};w=Math.floor(w);G=Kh.clamp(G,0,2*Math.PI);for(var Q=[],X=[],T=[],fa=1/w,oa=new kc,Ga=new Je,Xa=0;Xa<=w;Xa++){var Wa=C+Xa*fa*G,tb=Math.sin(Wa);Wa=Math.cos(Wa);for(var mb=0;mb<=t.length-1;mb++)oa.x=t[mb].x*tb,oa.y=t[mb].y,oa.z=t[mb].x*Wa,X.push(oa.x,oa.y,oa.z),Ga.x=Xa/w,Ga.y=mb/(t.length-1),T.push(Ga.x,Ga.y)}for(C=0;C<w;C++)for(fa=0;fa<t.length-1;fa++)oa=fa+C*t.length,Ga=oa+t.length,Xa=oa+t.length+1,tb=oa+1,Q.push(oa,Ga,tb),Q.push(Ga,Xa,tb);
M.setIndex(Q);M.setAttribute("position",new aa(X,3));M.setAttribute("uv",new aa(T,2));M.computeVertexNormals();if(G===2*Math.PI)for(G=M.attributes.normal.array,Q=new kc,X=new kc,T=new kc,w=w*t.length*3,fa=C=0;C<t.length;C++,fa+=3)Q.x=G[fa+0],Q.y=G[fa+1],Q.z=G[fa+2],X.x=G[w+fa+0],X.y=G[w+fa+1],X.z=G[w+fa+2],T.addVectors(Q,X).normalize(),G[fa+0]=G[w+fa+0]=T.x,G[fa+1]=G[w+fa+1]=T.y,G[fa+2]=G[w+fa+2]=T.z;return M}f(z,u);return z}(ob),eea=function(u){function z(t,w,C,G){var M=u.call(this||p)||this||p;
M.type="LatheGeometry";M.parameters={points:t,segments:w,phiStart:C,phiLength:G};M.fromBufferGeometry(new YZ(t,w,C,G));M.mergeVertices();return M}f(z,u);return z}(Hk),UQ=function(u){function z(t,w){void 0===t&&(t=1);void 0===w&&(w=0);var C=u.call(this||p,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,w)||this||p;C.type="OctahedronBufferGeometry";C.parameters={radius:t,detail:w};return C}f(z,u);return z}(QC),fea=function(u){function z(t,w){var C=u.call(this||
p)||this||p;C.type="OctahedronGeometry";C.parameters={radius:t,detail:w};C.fromBufferGeometry(new UQ(t,w));C.mergeVertices();return C}f(z,u);return z}(Hk);BF.prototype=Object.create(ob.prototype);BF.prototype.constructor=BF;uJ.prototype=Object.create(Hk.prototype);uJ.prototype.constructor=uJ;var gea=function(u){function z(t,w,C,G){var M=u.call(this||p)||this||p;M.type="PlaneGeometry";M.parameters={width:t,height:w,widthSegments:C,heightSegments:G};M.fromBufferGeometry(new UP(t,w,C,G));M.mergeVertices();
return M}f(z,u);return z}(Hk),hea=function(u){function z(t,w,C,G){var M=u.call(this||p)||this||p;M.type="PolyhedronGeometry";M.parameters={vertices:t,indices:w,radius:C,detail:G};M.fromBufferGeometry(new QC(t,w,C,G));M.mergeVertices();return M}f(z,u);return z}(Hk),ZZ=function(u){function z(t,w,C,G,M,Q){void 0===t&&(t=.5);void 0===w&&(w=1);void 0===C&&(C=8);void 0===G&&(G=1);void 0===M&&(M=0);void 0===Q&&(Q=2*Math.PI);var X=u.call(this||p)||this||p;X.type="RingBufferGeometry";X.parameters={innerRadius:t,
outerRadius:w,thetaSegments:C,phiSegments:G,thetaStart:M,thetaLength:Q};C=Math.max(3,C);G=Math.max(1,G);var T=[],fa=[],oa=[],Ga=[],Xa=t;t=(w-t)/G;for(var Wa=new kc,tb=new Je,mb=0;mb<=G;mb++){for(var Kc=0;Kc<=C;Kc++){var ic=M+Kc/C*Q;Wa.x=Xa*Math.cos(ic);Wa.y=Xa*Math.sin(ic);fa.push(Wa.x,Wa.y,Wa.z);oa.push(0,0,1);tb.x=(Wa.x/w+1)/2;tb.y=(Wa.y/w+1)/2;Ga.push(tb.x,tb.y)}Xa+=t}for(w=0;w<G;w++)for(M=w*(C+1),Q=0;Q<C;Q++)Xa=Q+M,t=Xa+C+1,Wa=Xa+C+2,tb=Xa+1,T.push(Xa,t,tb),T.push(t,Wa,tb);X.setIndex(T);X.setAttribute("position",
new aa(fa,3));X.setAttribute("normal",new aa(oa,3));X.setAttribute("uv",new aa(Ga,2));return X}f(z,u);return z}(ob),iea=function(u){function z(t,w,C,G,M,Q){var X=u.call(this||p)||this||p;X.type="RingGeometry";X.parameters={innerRadius:t,outerRadius:w,thetaSegments:C,phiSegments:G,thetaStart:M,thetaLength:Q};X.fromBufferGeometry(new ZZ(t,w,C,G,M,Q));X.mergeVertices();return X}f(z,u);return z}(Hk),$Z=function(u){function z(t,w){function C(Xa){var Wa=Q.length/3,tb=Xa.extractPoints(w);Xa=tb.shape;var mb=
tb.holes;!1===Yx.isClockWise(Xa)&&(Xa=Xa.reverse());tb=0;for(var Kc=mb.length;tb<Kc;tb++){var ic=mb[tb];!0===Yx.isClockWise(ic)&&(mb[tb]=ic.reverse())}tb=Yx.triangulateShape(Xa,mb);Kc=0;for(ic=mb.length;Kc<ic;Kc++)Xa=Xa.concat(mb[Kc]);mb=0;for(Kc=Xa.length;mb<Kc;mb++)ic=Xa[mb],Q.push(ic.x,ic.y,0),X.push(0,0,1),T.push(ic.x,ic.y);Xa=0;for(mb=tb.length;Xa<mb;Xa++)Kc=tb[Xa],M.push(Kc[0]+Wa,Kc[1]+Wa,Kc[2]+Wa),oa+=3}void 0===w&&(w=12);var G=u.call(this||p)||this||p;G.type="ShapeBufferGeometry";G.parameters=
{shapes:t,curveSegments:w};var M=[],Q=[],X=[],T=[],fa=0,oa=0;if(!1===Array.isArray(t))C(t);else for(var Ga=0;Ga<t.length;Ga++)C(t[Ga]),G.addGroup(fa,oa,Ga),fa+=oa,oa=0;G.setIndex(M);G.setAttribute("position",new aa(Q,3));G.setAttribute("normal",new aa(X,3));G.setAttribute("uv",new aa(T,2));return G}f(z,u);z.prototype.toJSON=function(){var t=ob.prototype.toJSON.call(this||p),w=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(w))for(var C=0,G=w.length;C<G;C++)t.shapes.push(w[C].uuid);else t.shapes.push(w.uuid);
return t};return z}(ob),a_=function(u){function z(t,w){var C=u.call(this||p)||this||p;C.type="ShapeGeometry";"object"===typeof w&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),w=w.curveSegments);C.parameters={shapes:t,curveSegments:w};C.fromBufferGeometry(new $Z(t,w));C.mergeVertices();return C}f(z,u);z.prototype.toJSON=function(){var t=Hk.prototype.toJSON.call(this||p),w=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(w))for(var C=0,G=w.length;C<G;C++)t.shapes.push(w[C].uuid);
else t.shapes.push(w.uuid);return t};return z}(Hk),VQ=function(u){function z(t,w,C,G,M,Q,X){void 0===t&&(t=1);void 0===w&&(w=8);void 0===C&&(C=6);void 0===G&&(G=0);void 0===M&&(M=2*Math.PI);void 0===Q&&(Q=0);void 0===X&&(X=Math.PI);var T=u.call(this||p)||this||p;T.type="SphereBufferGeometry";T.parameters={radius:t,widthSegments:w,heightSegments:C,phiStart:G,phiLength:M,thetaStart:Q,thetaLength:X};w=Math.max(3,Math.floor(w));C=Math.max(2,Math.floor(C));for(var fa=Math.min(Q+X,Math.PI),oa=0,Ga=[],Xa=
new kc,Wa=new kc,tb=[],mb=[],Kc=[],ic=[],Lc=0;Lc<=C;Lc++){var vc=[],Yc=Lc/C,fd=0;0==Lc&&0==Q?fd=.5/w:Lc==C&&fa==Math.PI&&(fd=-.5/w);for(var Zc=0;Zc<=w;Zc++){var Rd=Zc/w;Xa.x=-t*Math.cos(G+Rd*M)*Math.sin(Q+Yc*X);Xa.y=t*Math.cos(Q+Yc*X);Xa.z=t*Math.sin(G+Rd*M)*Math.sin(Q+Yc*X);mb.push(Xa.x,Xa.y,Xa.z);Wa.copy(Xa).normalize();Kc.push(Wa.x,Wa.y,Wa.z);ic.push(Rd+fd,1-Yc);vc.push(oa++)}Ga.push(vc)}for(t=0;t<C;t++)for(G=0;G<w;G++)M=Ga[t][G+1],X=Ga[t][G],oa=Ga[t+1][G],Xa=Ga[t+1][G+1],(0!==t||0<Q)&&tb.push(M,
X,Xa),(t!==C-1||fa<Math.PI)&&tb.push(X,oa,Xa);T.setIndex(tb);T.setAttribute("position",new aa(mb,3));T.setAttribute("normal",new aa(Kc,3));T.setAttribute("uv",new aa(ic,2));return T}f(z,u);return z}(ob),jea=function(u){function z(t,w,C,G,M,Q,X){var T=u.call(this||p)||this||p;T.type="SphereGeometry";T.parameters={radius:t,widthSegments:w,heightSegments:C,phiStart:G,phiLength:M,thetaStart:Q,thetaLength:X};T.fromBufferGeometry(new VQ(t,w,C,G,M,Q,X));T.mergeVertices();return T}f(z,u);return z}(Hk),b_=
function(u){function z(t,w){void 0===t&&(t=1);void 0===w&&(w=0);var C=u.call(this||p,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,w)||this||p;C.type="TetrahedronBufferGeometry";C.parameters={radius:t,detail:w};return C}f(z,u);return z}(QC),kea=function(u){function z(t,w){var C=u.call(this||p)||this||p;C.type="TetrahedronGeometry";C.parameters={radius:t,detail:w};C.fromBufferGeometry(new b_(t,w));C.mergeVertices();return C}f(z,u);return z}(Hk),c_=function(u){function z(t,w){void 0===
w&&(w={});var C=w.font;if(!C||!C.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ob;t=C.generateShapes(t,w.size);w.depth=void 0!==w.height?w.height:50;void 0===w.bevelThickness&&(w.bevelThickness=10);void 0===w.bevelSize&&(w.bevelSize=8);void 0===w.bevelEnabled&&(w.bevelEnabled=!1);w=u.call(this||p,t,w)||this||p;w.type="TextBufferGeometry";return w}f(z,u);return z}(NJ),lea=function(u){function z(t,w){var C=u.call(this||p)||this||p;C.type="TextGeometry";
C.parameters={text:t,parameters:w};C.fromBufferGeometry(new c_(t,w));C.mergeVertices();return C}f(z,u);return z}(Hk),d_=function(u){function z(t,w,C,G,M){void 0===t&&(t=1);void 0===w&&(w=.4);void 0===C&&(C=8);void 0===G&&(G=6);void 0===M&&(M=2*Math.PI);var Q=u.call(this||p)||this||p;Q.type="TorusBufferGeometry";Q.parameters={radius:t,tube:w,radialSegments:C,tubularSegments:G,arc:M};C=Math.floor(C);G=Math.floor(G);for(var X=[],T=[],fa=[],oa=[],Ga=new kc,Xa=new kc,Wa=new kc,tb=0;tb<=C;tb++)for(var mb=
0;mb<=G;mb++){var Kc=mb/G*M,ic=tb/C*Math.PI*2;Xa.x=(t+w*Math.cos(ic))*Math.cos(Kc);Xa.y=(t+w*Math.cos(ic))*Math.sin(Kc);Xa.z=w*Math.sin(ic);T.push(Xa.x,Xa.y,Xa.z);Ga.x=t*Math.cos(Kc);Ga.y=t*Math.sin(Kc);Wa.subVectors(Xa,Ga).normalize();fa.push(Wa.x,Wa.y,Wa.z);oa.push(mb/G);oa.push(tb/C)}for(t=1;t<=C;t++)for(w=1;w<=G;w++)M=(G+1)*(t-1)+w-1,Ga=(G+1)*(t-1)+w,Xa=(G+1)*t+w,X.push((G+1)*t+w-1,M,Xa),X.push(M,Ga,Xa);Q.setIndex(X);Q.setAttribute("position",new aa(T,3));Q.setAttribute("normal",new aa(fa,3));
Q.setAttribute("uv",new aa(oa,2));return Q}f(z,u);return z}(ob),mea=function(u){function z(t,w,C,G,M){var Q=u.call(this||p)||this||p;Q.type="TorusGeometry";Q.parameters={radius:t,tube:w,radialSegments:C,tubularSegments:G,arc:M};Q.fromBufferGeometry(new d_(t,w,C,G,M));Q.mergeVertices();return Q}f(z,u);return z}(Hk),e_=function(u){function z(t,w,C,G,M,Q){function X(ld,sd,Ae,qe,Qf){var Af=Math.sin(ld);sd=Ae/sd*ld;Ae=Math.cos(sd);Qf.x=qe*(2+Ae)*.5*Math.cos(ld);Qf.y=qe*(2+Ae)*Af*.5;Qf.z=qe*Math.sin(sd)*
.5}void 0===t&&(t=1);void 0===w&&(w=.4);void 0===C&&(C=64);void 0===G&&(G=8);void 0===M&&(M=2);void 0===Q&&(Q=3);var T=u.call(this||p)||this||p;T.type="TorusKnotBufferGeometry";T.parameters={radius:t,tube:w,tubularSegments:C,radialSegments:G,p:M,q:Q};C=Math.floor(C);G=Math.floor(G);for(var fa=[],oa=[],Ga=[],Xa=[],Wa=new kc,tb=new kc,mb=new kc,Kc=new kc,ic=new kc,Lc=new kc,vc=new kc,Yc=0;Yc<=C;++Yc){var fd=Yc/C*M*Math.PI*2;X(fd,M,Q,t,mb);X(fd+.01,M,Q,t,Kc);Lc.subVectors(Kc,mb);vc.addVectors(Kc,mb);
ic.crossVectors(Lc,vc);vc.crossVectors(ic,Lc);ic.normalize();vc.normalize();for(fd=0;fd<=G;++fd){var Zc=fd/G*Math.PI*2,Rd=-w*Math.cos(Zc);Zc=w*Math.sin(Zc);Wa.x=mb.x+(Rd*vc.x+Zc*ic.x);Wa.y=mb.y+(Rd*vc.y+Zc*ic.y);Wa.z=mb.z+(Rd*vc.z+Zc*ic.z);oa.push(Wa.x,Wa.y,Wa.z);tb.subVectors(Wa,mb).normalize();Ga.push(tb.x,tb.y,tb.z);Xa.push(Yc/C);Xa.push(fd/G)}}for(t=1;t<=C;t++)for(w=1;w<=G;w++)M=(G+1)*t+(w-1),Q=(G+1)*t+w,Wa=(G+1)*(t-1)+w,fa.push((G+1)*(t-1)+(w-1),M,Wa),fa.push(M,Q,Wa);T.setIndex(fa);T.setAttribute("position",
new aa(oa,3));T.setAttribute("normal",new aa(Ga,3));T.setAttribute("uv",new aa(Xa,2));return T}f(z,u);return z}(ob),nea=function(u){function z(t,w,C,G,M,Q,X){var T=u.call(this||p)||this||p;T.type="TorusKnotGeometry";T.parameters={radius:t,tube:w,tubularSegments:C,radialSegments:G,p:M,q:Q};void 0!==X&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");T.fromBufferGeometry(new e_(t,w,C,G,M,Q));T.mergeVertices();return T}f(z,u);return z}(Hk),f_=function(u){function z(t,
w,C,G,M){function Q(ic){Xa=t.getPointAt(ic/w,Xa);var Lc=T.normals[ic];ic=T.binormals[ic];for(var vc=0;vc<=G;vc++){var Yc=vc/G*Math.PI*2,fd=Math.sin(Yc);Yc=-Math.cos(Yc);oa.x=Yc*Lc.x+fd*ic.x;oa.y=Yc*Lc.y+fd*ic.y;oa.z=Yc*Lc.z+fd*ic.z;oa.normalize();tb.push(oa.x,oa.y,oa.z);fa.x=Xa.x+C*oa.x;fa.y=Xa.y+C*oa.y;fa.z=Xa.z+C*oa.z;Wa.push(fa.x,fa.y,fa.z)}}void 0===w&&(w=64);void 0===C&&(C=1);void 0===G&&(G=8);void 0===M&&(M=!1);var X=u.call(this||p)||this||p;X.type="TubeBufferGeometry";X.parameters={path:t,
tubularSegments:w,radius:C,radialSegments:G,closed:M};var T=t.computeFrenetFrames(w,M);X.tangents=T.tangents;X.normals=T.normals;X.binormals=T.binormals;var fa=new kc,oa=new kc,Ga=new Je,Xa=new kc,Wa=[],tb=[],mb=[],Kc=[];(function(){for(var ic=0;ic<w;ic++)Q(ic);Q(!1===M?w:0);for(ic=0;ic<=w;ic++)for(var Lc=0;Lc<=G;Lc++)Ga.x=ic/w,Ga.y=Lc/G,mb.push(Ga.x,Ga.y);for(ic=1;ic<=w;ic++)for(Lc=1;Lc<=G;Lc++){var vc=(G+1)*ic+(Lc-1),Yc=(G+1)*ic+Lc,fd=(G+1)*(ic-1)+Lc;Kc.push((G+1)*(ic-1)+(Lc-1),vc,fd);Kc.push(vc,
Yc,fd)}})();X.setIndex(Kc);X.setAttribute("position",new aa(Wa,3));X.setAttribute("normal",new aa(tb,3));X.setAttribute("uv",new aa(mb,2));return X}f(z,u);z.prototype.toJSON=function(){var t=ob.prototype.toJSON.call(this||p);t.path=(this||p).parameters.path.toJSON();return t};return z}(ob),oea=function(u){function z(t,w,C,G,M,Q){var X=u.call(this||p)||this||p;X.type="TubeGeometry";X.parameters={path:t,tubularSegments:w,radius:C,radialSegments:G,closed:M};void 0!==Q&&console.warn("THREE.TubeGeometry: taper has been removed.");
t=new f_(t,w,C,G,M);X.tangents=t.tangents;X.normals=t.normals;X.binormals=t.binormals;X.fromBufferGeometry(t);X.mergeVertices();return X}f(z,u);return z}(Hk),g_=function(u){function z(t){var w=u.call(this||p)||this||p;w.type="WireframeGeometry";var C=[],G=[0,0],M={},Q=["a","b","c"];if(t&&t.isGeometry){for(var X=t.faces,T=0,fa=X.length;T<fa;T++)for(var oa=X[T],Ga=0;3>Ga;Ga++){var Xa=oa[Q[Ga]],Wa=oa[Q[(Ga+1)%3]];G[0]=Math.min(Xa,Wa);G[1]=Math.max(Xa,Wa);Xa=G[0]+","+G[1];void 0===M[Xa]&&(M[Xa]={index1:G[0],
index2:G[1]})}for(var tb in M)G=M[tb],X=t.vertices[G.index1],C.push(X.x,X.y,X.z),X=t.vertices[G.index2],C.push(X.x,X.y,X.z)}else if(t&&t.isBufferGeometry)if(tb=new kc,null!==t.index){Q=t.attributes.position;T=t.index;t=t.groups;0===t.length&&(t=[{start:0,count:T.count,materialIndex:0}]);fa=0;for(oa=t.length;fa<oa;++fa)for(Xa=t[fa],Ga=Wa=Xa.start,Xa=Wa+Xa.count;Ga<Xa;Ga+=3)for(Wa=0;3>Wa;Wa++){var mb=T.getX(Ga+Wa),Kc=T.getX(Ga+(Wa+1)%3);G[0]=Math.min(mb,Kc);G[1]=Math.max(mb,Kc);mb=G[0]+","+G[1];void 0===
M[mb]&&(M[mb]={index1:G[0],index2:G[1]})}for(X in M)G=M[X],tb.fromBufferAttribute(Q,G.index1),C.push(tb.x,tb.y,tb.z),tb.fromBufferAttribute(Q,G.index2),C.push(tb.x,tb.y,tb.z)}else for(M=t.attributes.position,G=0,X=M.count/3;G<X;G++)for(t=0;3>t;t++)tb.fromBufferAttribute(M,3*G+t),C.push(tb.x,tb.y,tb.z),tb.fromBufferAttribute(M,3*G+(t+1)%3),C.push(tb.x,tb.y,tb.z);w.setAttribute("position",new aa(C,3));return w}f(z,u);return z}(ob),Fp=Object.freeze({__proto__:null,BoxGeometry:QZ,BoxBufferGeometry:eJ,
CircleGeometry:$da,CircleBufferGeometry:RZ,ConeGeometry:aea,ConeBufferGeometry:bea,CylinderGeometry:SZ,CylinderBufferGeometry:MJ,DodecahedronGeometry:cea,DodecahedronBufferGeometry:TZ,EdgesGeometry:VZ,ExtrudeGeometry:WZ,ExtrudeBufferGeometry:NJ,IcosahedronGeometry:dea,IcosahedronBufferGeometry:XZ,LatheGeometry:eea,LatheBufferGeometry:YZ,OctahedronGeometry:fea,OctahedronBufferGeometry:UQ,ParametricGeometry:uJ,ParametricBufferGeometry:BF,PlaneGeometry:gea,PlaneBufferGeometry:UP,PolyhedronGeometry:hea,
PolyhedronBufferGeometry:QC,RingGeometry:iea,RingBufferGeometry:ZZ,ShapeGeometry:a_,ShapeBufferGeometry:$Z,SphereGeometry:jea,SphereBufferGeometry:VQ,TetrahedronGeometry:kea,TetrahedronBufferGeometry:b_,TextGeometry:lea,TextBufferGeometry:c_,TorusGeometry:mea,TorusBufferGeometry:d_,TorusKnotGeometry:nea,TorusKnotBufferGeometry:e_,TubeGeometry:oea,TubeBufferGeometry:f_,WireframeGeometry:g_});HC.prototype=Object.create(L.prototype);HC.prototype.constructor=HC;HC.prototype.isShadowMaterial=!0;HC.prototype.copy=
function(u){L.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);return this||p};Px.prototype=Object.create(hc.prototype);Px.prototype.constructor=Px;Px.prototype.isRawShaderMaterial=!0;ew.prototype=Object.create(L.prototype);ew.prototype.constructor=ew;ew.prototype.isMeshStandardMaterial=!0;ew.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:""};(this||p).color.copy(u.color);(this||p).roughness=u.roughness;(this||p).metalness=u.metalness;(this||p).map=
u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=
u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).roughnessMap=u.roughnessMap;(this||p).metalnessMap=u.metalnessMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).envMapIntensity=u.envMapIntensity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=
u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).vertexTangents=u.vertexTangents;return this||p};pA.prototype=Object.create(ew.prototype);pA.prototype.constructor=pA;pA.prototype.isMeshPhysicalMaterial=!0;pA.prototype.copy=function(u){ew.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:"",PHYSICAL:""};(this||p).clearcoat=u.clearcoat;(this||p).clearcoatMap=u.clearcoatMap;(this||p).clearcoatRoughness=u.clearcoatRoughness;(this||p).clearcoatRoughnessMap=u.clearcoatRoughnessMap;
(this||p).clearcoatNormalMap=u.clearcoatNormalMap;(this||p).clearcoatNormalScale.copy(u.clearcoatNormalScale);(this||p).reflectivity=u.reflectivity;(this||p).sheen=u.sheen?((this||p).sheen||new bg).copy(u.sheen):null;(this||p).transmission=u.transmission;(this||p).transmissionMap=u.transmissionMap;return this||p};qA.prototype=Object.create(L.prototype);qA.prototype.constructor=qA;qA.prototype.isMeshPhongMaterial=!0;qA.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);
(this||p).specular.copy(u.specular);(this||p).shininess=u.shininess;(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);
(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;
(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};IC.prototype=Object.create(L.prototype);IC.prototype.constructor=IC;IC.prototype.isMeshToonMaterial=!0;IC.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).gradientMap=u.gradientMap;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=
u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=u.alphaMap;(this||p).wireframe=u.wireframe;
(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};JC.prototype=Object.create(L.prototype);JC.prototype.constructor=JC;JC.prototype.isMeshNormalMaterial=!0;JC.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||
p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};KC.prototype=Object.create(L.prototype);KC.prototype.constructor=
KC;KC.prototype.isMeshLambertMaterial=!0;KC.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=
u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};LC.prototype=Object.create(L.prototype);LC.prototype.constructor=LC;LC.prototype.isMeshMatcapMaterial=
!0;LC.prototype.copy=function(u){L.prototype.copy.call(this||p,u);(this||p).defines={MATCAP:""};(this||p).color.copy(u.color);(this||p).matcap=u.matcap;(this||p).map=u.map;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=
u.alphaMap;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};MC.prototype=Object.create(vl.prototype);MC.prototype.constructor=MC;MC.prototype.isLineDashedMaterial=!0;MC.prototype.copy=function(u){vl.prototype.copy.call(this||p,u);(this||p).scale=u.scale;(this||p).dashSize=u.dashSize;(this||p).gapSize=u.gapSize;return this||p};var oxa=Object.freeze({__proto__:null,ShadowMaterial:HC,SpriteMaterial:nA,RawShaderMaterial:Px,ShaderMaterial:hc,
PointsMaterial:fu,MeshPhysicalMaterial:pA,MeshStandardMaterial:ew,MeshPhongMaterial:qA,MeshToonMaterial:IC,MeshNormalMaterial:JC,MeshLambertMaterial:KC,MeshDepthMaterial:gA,MeshDistanceMaterial:hA,MeshBasicMaterial:Y,MeshMatcapMaterial:LC,LineDashedMaterial:MC,LineBasicMaterial:vl,Material:L}),ml={arraySlice:function(u,z,t){return ml.isTypedArray(u)?new u.constructor(u.subarray(z,void 0!==t?t:u.length)):u.slice(z,t)},convertArray:function(u,z,t){return!u||!t&&u.constructor===z?u:"number"===typeof z.BYTES_PER_ELEMENT?
new z(u):Array.prototype.slice.call(u)},isTypedArray:function(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)},getKeyframeOrder:function(u){for(var z=u.length,t=Array(z),w=0;w!==z;++w)t[w]=w;t.sort(function(C,G){return u[C]-u[G]});return t},sortedArray:function(u,z,t){for(var w=u.length,C=new u.constructor(w),G=0,M=0;M!==w;++G)for(var Q=t[G]*z,X=0;X!==z;++X)C[M++]=u[Q+X];return C},flattenJSON:function(u,z,t,w){for(var C=1,G=u[0];void 0!==G&&void 0===G[w];)G=u[C++];if(void 0!==G){var M=G[w];
if(void 0!==M)if(Array.isArray(M)){do M=G[w],void 0!==M&&(z.push(G.time),t.push.apply(t,M)),G=u[C++];while(void 0!==G)}else if(void 0!==M.toArray){do M=G[w],void 0!==M&&(z.push(G.time),M.toArray(t,t.length)),G=u[C++];while(void 0!==G)}else{do M=G[w],void 0!==M&&(z.push(G.time),t.push(M)),G=u[C++];while(void 0!==G)}}},subclip:function(u,z,t,w,C){void 0===C&&(C=30);u=u.clone();u.name=z;z=[];for(var G=0;G<u.tracks.length;++G){for(var M=u.tracks[G],Q=M.getValueSize(),X=[],T=[],fa=0;fa<M.times.length;++fa){var oa=
M.times[fa]*C;if(!(oa<t||oa>=w))for(X.push(M.times[fa]),oa=0;oa<Q;++oa)T.push(M.values[fa*Q+oa])}0!==X.length&&(M.times=ml.convertArray(X,M.times.constructor),M.values=ml.convertArray(T,M.values.constructor),z.push(M))}u.tracks=z;t=Infinity;for(w=0;w<u.tracks.length;++w)t>u.tracks[w].times[0]&&(t=u.tracks[w].times[0]);for(w=0;w<u.tracks.length;++w)u.tracks[w].shift(-1*t);u.resetDuration();return u},makeClipAdditive:function(u,z,t,w){void 0===z&&(z=0);void 0===t&&(t=u);void 0===w&&(w=30);0>=w&&(w=
30);var C=t.tracks.length,G=z/w;z=function(M){var Q=t.tracks[M],X=Q.ValueTypeName;if("bool"===X||"string"===X)return"continue";M=u.tracks.find(function(Kc){return Kc.name===Q.name&&Kc.ValueTypeName===X});if(void 0===M)return"continue";var T=0,fa=Q.getValueSize();Q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(T=fa/3);var oa=0,Ga=M.getValueSize();M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(oa=Ga/3);var Xa=Q.times.length-1,Wa=void 0;G<=Q.times[0]?Wa=ml.arraySlice(Q.values,
T,fa-T):G>=Q.times[Xa]?(Wa=Xa*fa+T,Wa=ml.arraySlice(Q.values,Wa,Wa+fa-T)):(Wa=Q.createInterpolant(),Xa=T,T=fa-T,Wa.evaluate(G),Wa=ml.arraySlice(Wa.resultBuffer,Xa,T));"quaternion"===X&&(new So).fromArray(Wa).normalize().conjugate().toArray(Wa);T=M.times.length;for(fa=0;fa<T;++fa)if(Xa=fa*Ga+oa,"quaternion"===X)So.multiplyQuaternionsFlat(M.values,Xa,Wa,0,M.values,Xa);else for(var tb=Ga-2*oa,mb=0;mb<tb;++mb)M.values[Xa+mb]-=Wa[mb]};for(w=0;w<C;++w)z(w);u.blendMode=2501;return u}};Object.assign(wr.prototype,
{evaluate:function(u){var z=(this||p).parameterPositions,t=(this||p)._cachedIndex,w=z[t],C=z[t-1];a:{b:{c:{d:if(!(u<w)){for(var G=t+2;;){if(void 0===w){if(u<C)break d;t=z.length;(this||p)._cachedIndex=t;return this.afterEnd_(t-1,u,C)}if(t===G)break;C=w;w=z[++t];if(u<w)break b}w=z.length;break c}if(u>=C)break a;else{G=z[1];u<G&&(t=2,C=G);for(G=t-2;;){if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,u,w);if(t===G)break;w=C;C=z[--t-1];if(u>=C)break b}w=t;t=0}}for(;t<w;)C=t+w>>>1,u<z[C]?
w=C:t=C+1;w=z[t];C=z[t-1];if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,u,w);if(void 0===w)return t=z.length,(this||p)._cachedIndex=t,this.afterEnd_(t-1,C,u)}(this||p)._cachedIndex=t;this.intervalChanged_(t,C,w)}return this.interpolate_(t,C,u,w)},settings:null,DefaultSettings_:{},getSettings_:function(){return(this||p).settings||(this||p).DefaultSettings_},copySampleValue_:function(u){var z=(this||p).resultBuffer,t=(this||p).sampleValues,w=(this||p).valueSize;u*=w;for(var C=0;C!==
w;++C)z[C]=t[u+C];return z},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(wr.prototype,{beforeStart_:wr.prototype.copySampleValue_,afterEnd_:wr.prototype.copySampleValue_});eQ.prototype=Object.assign(Object.create(wr.prototype),{constructor:eQ,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(u,z,t){var w=(this||p).parameterPositions,C=u-2,G=u+1,M=w[C],Q=w[G];if(void 0===M)switch(this.getSettings_().endingStart){case 2401:C=
u;M=2*z-t;break;case 2402:C=w.length-2;M=z+w[C]-w[C+1];break;default:C=u,M=t}if(void 0===Q)switch(this.getSettings_().endingEnd){case 2401:G=u;Q=2*t-z;break;case 2402:G=1;Q=t+w[1]-w[0];break;default:G=u-1,Q=z}u=.5*(t-z);w=(this||p).valueSize;(this||p)._weightPrev=u/(z-M);(this||p)._weightNext=u/(Q-t);(this||p)._offsetPrev=C*w;(this||p)._offsetNext=G*w},interpolate_:function(u,z,t,w){var C=(this||p).resultBuffer,G=(this||p).sampleValues,M=(this||p).valueSize;u*=M;var Q=u-M,X=(this||p)._offsetPrev,
T=(this||p)._offsetNext,fa=(this||p)._weightPrev,oa=(this||p)._weightNext,Ga=(t-z)/(w-z);t=Ga*Ga;w=t*Ga;z=-fa*w+2*fa*t-fa*Ga;fa=(1+fa)*w+(-1.5-2*fa)*t+(-.5+fa)*Ga+1;Ga=(-1-oa)*w+(1.5+oa)*t+.5*Ga;oa=oa*w-oa*t;for(t=0;t!==M;++t)C[t]=z*G[X+t]+fa*G[Q+t]+Ga*G[u+t]+oa*G[T+t];return C}});vJ.prototype=Object.assign(Object.create(wr.prototype),{constructor:vJ,interpolate_:function(u,z,t,w){var C=(this||p).resultBuffer,G=(this||p).sampleValues,M=(this||p).valueSize;u*=M;var Q=u-M;z=(t-z)/(w-z);t=1-z;for(w=
0;w!==M;++w)C[w]=G[Q+w]*t+G[u+w]*z;return C}});fQ.prototype=Object.assign(Object.create(wr.prototype),{constructor:fQ,interpolate_:function(u){return this.copySampleValue_(u-1)}});Object.assign(so,{toJSON:function(u){var z=u.constructor;if(void 0!==z.toJSON)z=z.toJSON(u);else{z={name:u.name,times:ml.convertArray(u.times,Array),values:ml.convertArray(u.values,Array)};var t=u.getInterpolation();t!==u.DefaultInterpolation&&(z.interpolation=t)}z.type=u.ValueTypeName;return z}});Object.assign(so.prototype,
{constructor:so,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(u){return new fQ((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodLinear:function(u){return new vJ((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:function(u){return new eQ((this||p).times,(this||p).values,this.getValueSize(),u)},setInterpolation:function(u){switch(u){case 2300:var z=(this||
p).InterpolantFactoryMethodDiscrete;break;case 2301:z=(this||p).InterpolantFactoryMethodLinear;break;case 2302:z=(this||p).InterpolantFactoryMethodSmooth}if(void 0===z){z="unsupported interpolation for "+(this||p).ValueTypeName+" keyframe track named "+(this||p).name;if(void 0===(this||p).createInterpolant)if(u!==(this||p).DefaultInterpolation)this.setInterpolation((this||p).DefaultInterpolation);else throw Error(z);console.warn("THREE.KeyframeTrack:",z);return this||p}(this||p).createInterpolant=
z;return this||p},getInterpolation:function(){switch((this||p).createInterpolant){case (this||p).InterpolantFactoryMethodDiscrete:return 2300;case (this||p).InterpolantFactoryMethodLinear:return 2301;case (this||p).InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return(this||p).values.length/(this||p).times.length},shift:function(u){if(0!==u)for(var z=(this||p).times,t=0,w=z.length;t!==w;++t)z[t]+=u;return this||p},scale:function(u){if(1!==u)for(var z=(this||p).times,t=0,w=z.length;t!==
w;++t)z[t]*=u;return this||p},trim:function(u,z){for(var t=(this||p).times,w=t.length,C=0,G=w-1;C!==w&&t[C]<u;)++C;for(;-1!==G&&t[G]>z;)--G;++G;if(0!==C||G!==w)C>=G&&(G=Math.max(G,1),C=G-1),u=this.getValueSize(),(this||p).times=ml.arraySlice(t,C,G),(this||p).values=ml.arraySlice((this||p).values,C*u,G*u);return this||p},validate:function(){var u=!0,z=this.getValueSize();0!==z-Math.floor(z)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this||p),u=!1);var t=(this||p).times;z=(this||
p).values;var w=t.length;0===w&&(console.error("THREE.KeyframeTrack: Track is empty.",this||p),u=!1);for(var C=null,G=0;G!==w;G++){var M=t[G];if("number"===typeof M&&isNaN(M)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this||p,G,M);u=!1;break}if(null!==C&&C>M){console.error("THREE.KeyframeTrack: Out of order keys.",this||p,G,M,C);u=!1;break}C=M}if(void 0!==z&&ml.isTypedArray(z))for(t=0,w=z.length;t!==w;++t)if(C=z[t],isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",
this||p,t,C);u=!1;break}return u},optimize:function(){for(var u=ml.arraySlice((this||p).times),z=ml.arraySlice((this||p).values),t=this.getValueSize(),w=2302===this.getInterpolation(),C=u.length-1,G=1,M=1;M<C;++M){var Q=!1,X=u[M];if(X!==u[M+1]&&(1!==M||X!==X[0]))if(w)Q=!0;else{X=M*t;for(var T=X-t,fa=X+t,oa=0;oa!==t;++oa){var Ga=z[X+oa];if(Ga!==z[T+oa]||Ga!==z[fa+oa]){Q=!0;break}}}if(Q){if(M!==G)for(u[G]=u[M],Q=M*t,X=G*t,T=0;T!==t;++T)z[X+T]=z[Q+T];++G}}if(0<C){u[G]=u[C];w=C*t;C=G*t;for(M=0;M!==t;++M)z[C+
M]=z[w+M];++G}G!==u.length?((this||p).times=ml.arraySlice(u,0,G),(this||p).values=ml.arraySlice(z,0,G*t)):((this||p).times=u,(this||p).values=z);return this||p},clone:function(){var u=ml.arraySlice((this||p).times,0),z=ml.arraySlice((this||p).values,0);u=new (this||p).constructor((this||p).name,u,z);u.createInterpolant=(this||p).createInterpolant;return u}});gQ.prototype=Object.assign(Object.create(so.prototype),{constructor:gQ,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,
InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});hQ.prototype=Object.assign(Object.create(so.prototype),{constructor:hQ,ValueTypeName:"color"});CF.prototype=Object.assign(Object.create(so.prototype),{constructor:CF,ValueTypeName:"number"});iQ.prototype=Object.assign(Object.create(wr.prototype),{constructor:iQ,interpolate_:function(u,z,t,w){var C=(this||p).resultBuffer,G=(this||p).sampleValues,M=(this||p).valueSize;z=(t-z)/(w-z);u*=M;for(t=u+M;u!==t;u+=4)So.slerpFlat(C,
0,G,u-M,G,u,z);return C}});wJ.prototype=Object.assign(Object.create(so.prototype),{constructor:wJ,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(u){return new iQ((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:void 0});jQ.prototype=Object.assign(Object.create(so.prototype),{constructor:jQ,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});
DF.prototype=Object.assign(Object.create(so.prototype),{constructor:DF,ValueTypeName:"vector"});Object.assign(xr,{parse:function(u){for(var z=[],t=u.tracks,w=1/(u.fps||1),C=0,G=t.length;C!==G;++C)z.push(axa(t[C]).scale(w));z=new xr(u.name,u.duration,z,u.blendMode);z.uuid=u.uuid;return z},toJSON:function(u){var z=[],t=u.tracks;u={name:u.name,duration:u.duration,tracks:z,uuid:u.uuid,blendMode:u.blendMode};for(var w=0,C=t.length;w!==C;++w)z.push(so.toJSON(t[w]));return u},CreateFromMorphTargetSequence:function(u,
z,t,w){for(var C=z.length,G=[],M=0;M<C;M++){var Q=[],X=[];Q.push((M+C-1)%C,M,(M+1)%C);X.push(0,1,0);var T=ml.getKeyframeOrder(Q);Q=ml.sortedArray(Q,1,T);X=ml.sortedArray(X,1,T);w||0!==Q[0]||(Q.push(C),X.push(X[0]));G.push((new CF(".morphTargetInfluences["+z[M].name+"]",Q,X)).scale(1/t))}return new xr(u,-1,G)},findByName:function(u,z){var t=u;Array.isArray(u)||(t=u.geometry&&u.geometry.animations||u.animations);for(u=0;u<t.length;u++)if(t[u].name===z)return t[u];return null},CreateClipsFromMorphTargetSequences:function(u,
z,t){for(var w={},C=/^([\w-]*?)([\d]+)$/,G=0,M=u.length;G<M;G++){var Q=u[G],X=Q.name.match(C);if(X&&1<X.length){X=X[1];var T=w[X];T||(w[X]=T=[]);T.push(Q)}}u=[];for(var fa in w)u.push(xr.CreateFromMorphTargetSequence(fa,w[fa],z,t));return u},parseAnimation:function(u,z){if(!u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var t=function(mb,Kc,ic,Lc,vc){if(0!==ic.length){var Yc=[],fd=[];ml.flattenJSON(ic,Yc,fd,Lc);0!==Yc.length&&vc.push(new mb(Kc,Yc,fd))}},w=[],
C=u.name||"default",G=u.fps||30,M=u.blendMode,Q=u.length||-1;u=u.hierarchy||[];for(var X=0;X<u.length;X++){var T=u[X].keys;if(T&&0!==T.length)if(T[0].morphTargets){Q={};var fa=void 0;for(fa=0;fa<T.length;fa++)if(T[fa].morphTargets)for(var oa=0;oa<T[fa].morphTargets.length;oa++)Q[T[fa].morphTargets[oa]]=-1;for(var Ga in Q){oa=[];for(var Xa=[],Wa=0;Wa!==T[fa].morphTargets.length;++Wa){var tb=T[fa];oa.push(tb.time);Xa.push(tb.morphTarget===Ga?1:0)}w.push(new CF(".morphTargetInfluence["+Ga+"]",oa,Xa))}Q=
Q.length*(G||1)}else fa=".bones["+z[X].name+"]",t(DF,fa+".position",T,"pos",w),t(wJ,fa+".quaternion",T,"rot",w),t(DF,fa+".scale",T,"scl",w)}return 0===w.length?null:new xr(C,Q,w,M)}});Object.assign(xr.prototype,{resetDuration:function(){for(var u=0,z=0,t=(this||p).tracks.length;z!==t;++z){var w=(this||p).tracks[z];u=Math.max(u,w.times[w.times.length-1])}(this||p).duration=u;return this||p},trim:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].trim(0,(this||p).duration);return this||
p},validate:function(){for(var u=!0,z=0;z<(this||p).tracks.length;z++)u=u&&(this||p).tracks[z].validate();return u},optimize:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].optimize();return this||p},clone:function(){for(var u=[],z=0;z<(this||p).tracks.length;z++)u.push((this||p).tracks[z].clone());return new xr((this||p).name,(this||p).duration,u,(this||p).blendMode)},toJSON:function(){return xr.toJSON(this||p)}});var RC={enabled:!1,files:{},add:function(u,z){!1!==(this||
p).enabled&&((this||p).files[u]=z)},get:function(u){if(!1!==(this||p).enabled)return(this||p).files[u]},remove:function(u){delete (this||p).files[u]},clear:function(){(this||p).files={}}},lda=new fZ;Object.assign(Bk.prototype,{load:function(){},loadAsync:function(u,z){var t=this||p;return new Promise(function(w,C){t.load(u,w,z,C)})},parse:function(){},setCrossOrigin:function(u){(this||p).crossOrigin=u;return this||p},setWithCredentials:function(u){(this||p).withCredentials=u;return this||p},setPath:function(u){(this||
p).path=u;return this||p},setResourcePath:function(u){(this||p).resourcePath=u;return this||p},setRequestHeader:function(u){(this||p).requestHeader=u;return this||p}});var mu={};Js.prototype=Object.assign(Object.create(Bk.prototype),{constructor:Js,load:function(u,z,t,w){void 0===u&&(u="");void 0!==(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,G=RC.get(u);if(void 0!==G)return C.manager.itemStart(u),setTimeout(function(){z&&z(G);C.manager.itemEnd(u)},0),G;if(void 0!==
mu[u])mu[u].push({onLoad:z,onProgress:t,onError:w});else{var M=u.match(/^data:(.*?)(;base64)?,(.*)$/);if(M){t=M[1];var Q=!!M[2];M=M[3];M=decodeURIComponent(M);Q&&(M=atob(M));try{var X=((this||p).responseType||"").toLowerCase();switch(X){case "arraybuffer":case "blob":var T=new Uint8Array(M.length);for(Q=0;Q<M.length;Q++)T[Q]=M.charCodeAt(Q);var fa="blob"===X?new Blob([T.buffer],{type:t}):T.buffer;break;case "document":fa=(new DOMParser).parseFromString(M,t);break;case "json":fa=JSON.parse(M);break;
default:fa=M}setTimeout(function(){z&&z(fa);C.manager.itemEnd(u)},0)}catch(Ga){setTimeout(function(){w&&w(Ga);C.manager.itemError(u);C.manager.itemEnd(u)},0)}}else{mu[u]=[];mu[u].push({onLoad:z,onProgress:t,onError:w});var oa=new XMLHttpRequest;oa.open("GET",u,!0);oa.addEventListener("load",function(Ga){var Xa=(this||p).response,Wa=mu[u];delete mu[u];if(200===(this||p).status||0===(this||p).status){0===(this||p).status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");RC.add(u,Xa);Ga=0;for(var tb=
Wa.length;Ga<tb;Ga++){var mb=Wa[Ga];if(mb.onLoad)mb.onLoad(Xa)}}else{Xa=0;for(tb=Wa.length;Xa<tb;Xa++)if(mb=Wa[Xa],mb.onError)mb.onError(Ga);C.manager.itemError(u)}C.manager.itemEnd(u)},!1);oa.addEventListener("progress",function(Ga){for(var Xa=mu[u],Wa=0,tb=Xa.length;Wa<tb;Wa++){var mb=Xa[Wa];if(mb.onProgress)mb.onProgress(Ga)}},!1);oa.addEventListener("error",function(Ga){var Xa=mu[u];delete mu[u];for(var Wa=0,tb=Xa.length;Wa<tb;Wa++){var mb=Xa[Wa];if(mb.onError)mb.onError(Ga)}C.manager.itemError(u);
C.manager.itemEnd(u)},!1);oa.addEventListener("abort",function(Ga){var Xa=mu[u];delete mu[u];for(var Wa=0,tb=Xa.length;Wa<tb;Wa++){var mb=Xa[Wa];if(mb.onError)mb.onError(Ga)}C.manager.itemError(u);C.manager.itemEnd(u)},!1);void 0!==(this||p).responseType&&(oa.responseType=(this||p).responseType);void 0!==(this||p).withCredentials&&(oa.withCredentials=(this||p).withCredentials);oa.overrideMimeType&&oa.overrideMimeType(void 0!==(this||p).mimeType?(this||p).mimeType:"text/plain");for(Q in(this||p).requestHeader)oa.setRequestHeader(Q,
(this||p).requestHeader[Q]);oa.send(null)}C.manager.itemStart(u);return oa}},setResponseType:function(u){(this||p).responseType=u;return this||p},setMimeType:function(u){(this||p).mimeType=u;return this||p}});gZ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:gZ,load:function(u,z,t,w){var C=this||p,G=new Js(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(M){try{z(C.parse(JSON.parse(M)))}catch(Q){w?w(Q):console.error(Q),
C.manager.itemError(u)}},t,w)},parse:function(u){for(var z=[],t=0;t<u.length;t++){var w=xr.parse(u[t]);z.push(w)}return z}});hZ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:hZ,load:function(u,z,t,w){function C(Ga){X.load(u[Ga],function(Xa){Xa=G.parse(Xa,!0);M[Ga]={width:Xa.width,height:Xa.height,format:Xa.format,mipmaps:Xa.mipmaps};T+=1;6===T&&(1===Xa.mipmapCount&&(Q.minFilter=1006),Q.image=M,Q.format=Xa.format,Q.needsUpdate=!0,z&&z(Q))},t,w)}var G=this||p,M=[],Q=new zF,X=new Js((this||
p).manager);X.setPath((this||p).path);X.setResponseType("arraybuffer");X.setRequestHeader((this||p).requestHeader);X.setWithCredentials(G.withCredentials);var T=0;if(Array.isArray(u))for(var fa=0,oa=u.length;fa<oa;++fa)C(fa);else X.load(u,function(Ga){Ga=G.parse(Ga,!0);if(Ga.isCubemap){for(var Xa=Ga.mipmaps.length/Ga.mipmapCount,Wa=0;Wa<Xa;Wa++){M[Wa]={mipmaps:[]};for(var tb=0;tb<Ga.mipmapCount;tb++)M[Wa].mipmaps.push(Ga.mipmaps[Wa*Ga.mipmapCount+tb]),M[Wa].format=Ga.format,M[Wa].width=Ga.width,M[Wa].height=
Ga.height}Q.image=M}else Q.image.width=Ga.width,Q.image.height=Ga.height,Q.mipmaps=Ga.mipmaps;1===Ga.mipmapCount&&(Q.minFilter=1006);Q.format=Ga.format;Q.needsUpdate=!0;z&&z(Q)},t,w);return Q}});EF.prototype=Object.assign(Object.create(Bk.prototype),{constructor:EF,load:function(u,z,t,w){function C(){X.removeEventListener("load",C,!1);X.removeEventListener("error",G,!1);RC.add(u,this||p);z&&z(this||p);M.manager.itemEnd(u)}function G(T){X.removeEventListener("load",C,!1);X.removeEventListener("error",
G,!1);w&&w(T);M.manager.itemError(u);M.manager.itemEnd(u)}void 0!==(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var M=this||p,Q=RC.get(u);if(void 0!==Q)return M.manager.itemStart(u),setTimeout(function(){z&&z(Q);M.manager.itemEnd(u)},0),Q;var X=document.createElementNS("http://www.w3.org/1999/xhtml","img");X.addEventListener("load",C,!1);X.addEventListener("error",G,!1);"data:"!==u.substr(0,5)&&void 0!==(this||p).crossOrigin&&(X.crossOrigin=(this||p).crossOrigin);M.manager.itemStart(u);
X.src=u;return X}});kQ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:kQ,load:function(u,z,t,w){function C(X){M.load(u[X],function(T){G.images[X]=T;Q++;6===Q&&(G.needsUpdate=!0,z&&z(G))},void 0,w)}var G=new Mb,M=new EF((this||p).manager);M.setCrossOrigin((this||p).crossOrigin);M.setPath((this||p).path);var Q=0;for(t=0;t<u.length;++t)C(t);return G}});lQ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:lQ,load:function(u,z,t,w){var C=this||p,G=new Bd,M=new Js((this||
p).manager);M.setResponseType("arraybuffer");M.setRequestHeader((this||p).requestHeader);M.setPath((this||p).path);M.setWithCredentials(C.withCredentials);M.load(u,function(Q){if(Q=C.parse(Q))void 0!==Q.image?G.image=Q.image:void 0!==Q.data&&(G.image.width=Q.width,G.image.height=Q.height,G.image.data=Q.data),G.wrapS=void 0!==Q.wrapS?Q.wrapS:1001,G.wrapT=void 0!==Q.wrapT?Q.wrapT:1001,G.magFilter=void 0!==Q.magFilter?Q.magFilter:1006,G.minFilter=void 0!==Q.minFilter?Q.minFilter:1006,G.anisotropy=void 0!==
Q.anisotropy?Q.anisotropy:1,void 0!==Q.format&&(G.format=Q.format),void 0!==Q.type&&(G.type=Q.type),void 0!==Q.mipmaps&&(G.mipmaps=Q.mipmaps,G.minFilter=1008),1===Q.mipmapCount&&(G.minFilter=1006),G.needsUpdate=!0,z&&z(G,Q)},t,w);return G}});mQ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:mQ,load:function(u,z,t,w){var C=new r,G=new EF((this||p).manager);G.setCrossOrigin((this||p).crossOrigin);G.setPath((this||p).path);G.load(u,function(M){C.image=M;M=0<u.search(/\.jpe?g($|\?)/i)||
0===u.search(/^data:image\/jpeg/);C.format=M?1022:1023;C.needsUpdate=!0;void 0!==z&&z(C)},t,w);return C}});Object.assign(Ug.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(u,z){u=this.getUtoTmapping(u);return this.getPoint(u,z)},getPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));return z},getSpacedPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPointAt(t/
u));return z},getLength:function(){var u=this.getLengths();return u[u.length-1]},getLengths:function(u){void 0===u&&(u=(this||p).arcLengthDivisions);if((this||p).cacheArcLengths&&(this||p).cacheArcLengths.length===u+1&&!(this||p).needsUpdate)return(this||p).cacheArcLengths;(this||p).needsUpdate=!1;var z=[],t=this.getPoint(0),w=0;z.push(0);for(var C=1;C<=u;C++){var G=this.getPoint(C/u);w+=G.distanceTo(t);z.push(w);t=G}return(this||p).cacheArcLengths=z},updateArcLengths:function(){(this||p).needsUpdate=
!0;this.getLengths()},getUtoTmapping:function(u,z){var t=this.getLengths(),w=t.length;z=z?z:u*t[w-1];for(var C=0,G=w-1,M;C<=G;)if(u=Math.floor(C+(G-C)/2),M=t[u]-z,0>M)C=u+1;else if(0<M)G=u-1;else{G=u;break}u=G;if(t[u]===z)return u/(w-1);C=t[u];return(u+(z-C)/(t[u+1]-C))/(w-1)},getTangent:function(u,z){var t=u-1E-4;u+=1E-4;0>t&&(t=0);1<u&&(u=1);t=this.getPoint(t);u=this.getPoint(u);z=z||(t.isVector2?new Je:new kc);z.copy(u).sub(t).normalize();return z},getTangentAt:function(u,z){u=this.getUtoTmapping(u);
return this.getTangent(u,z)},computeFrenetFrames:function(u,z){for(var t=new kc,w=[],C=[],G=[],M=new kc,Q=new Qi,X=0;X<=u;X++)w[X]=this.getTangentAt(X/u,new kc),w[X].normalize();C[0]=new kc;G[0]=new kc;X=Number.MAX_VALUE;var T=Math.abs(w[0].x),fa=Math.abs(w[0].y),oa=Math.abs(w[0].z);T<=X&&(X=T,t.set(1,0,0));fa<=X&&(X=fa,t.set(0,1,0));oa<=X&&t.set(0,0,1);M.crossVectors(w[0],t).normalize();C[0].crossVectors(w[0],M);G[0].crossVectors(w[0],C[0]);for(t=1;t<=u;t++)C[t]=C[t-1].clone(),G[t]=G[t-1].clone(),
M.crossVectors(w[t-1],w[t]),M.length()>Number.EPSILON&&(M.normalize(),X=Math.acos(Kh.clamp(w[t-1].dot(w[t]),-1,1)),C[t].applyMatrix4(Q.makeRotationAxis(M,X))),G[t].crossVectors(w[t],C[t]);if(!0===z)for(z=Math.acos(Kh.clamp(C[0].dot(C[u]),-1,1)),z/=u,0<w[0].dot(M.crossVectors(C[0],C[u]))&&(z=-z),M=1;M<=u;M++)C[M].applyMatrix4(Q.makeRotationAxis(w[M],z*M)),G[M].crossVectors(w[M],C[M]);return{tangents:w,normals:C,binormals:G}},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||
p).arcLengthDivisions=u.arcLengthDivisions;return this||p},toJSON:function(){var u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};u.arcLengthDivisions=(this||p).arcLengthDivisions;u.type=(this||p).type;return u},fromJSON:function(u){(this||p).arcLengthDivisions=u.arcLengthDivisions;return this||p}});yr.prototype=Object.create(Ug.prototype);yr.prototype.constructor=yr;yr.prototype.isEllipseCurve=!0;yr.prototype.getPoint=function(u,z){z=z||new Je;for(var t=2*Math.PI,w=(this||p).aEndAngle-
(this||p).aStartAngle,C=Math.abs(w)<Number.EPSILON;0>w;)w+=t;for(;w>t;)w-=t;w<Number.EPSILON&&(w=C?0:t);!0!==(this||p).aClockwise||C||(w=w===t?-t:w-t);t=(this||p).aStartAngle+u*w;u=(this||p).aX+(this||p).xRadius*Math.cos(t);var G=(this||p).aY+(this||p).yRadius*Math.sin(t);0!==(this||p).aRotation&&(t=Math.cos((this||p).aRotation),w=Math.sin((this||p).aRotation),C=u-(this||p).aX,G-=(this||p).aY,u=C*t-G*w+(this||p).aX,G=C*w+G*t+(this||p).aY);return z.set(u,G)};yr.prototype.copy=function(u){Ug.prototype.copy.call(this||
p,u);(this||p).aX=u.aX;(this||p).aY=u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};yr.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||p);u.aX=(this||p).aX;u.aY=(this||p).aY;u.xRadius=(this||p).xRadius;u.yRadius=(this||p).yRadius;u.aStartAngle=(this||p).aStartAngle;u.aEndAngle=(this||p).aEndAngle;u.aClockwise=(this||p).aClockwise;
u.aRotation=(this||p).aRotation;return u};yr.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).aX=u.aX;(this||p).aY=u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};FF.prototype=Object.create(yr.prototype);FF.prototype.constructor=FF;FF.prototype.isArcCurve=!0;var WQ=new kc,h_=new iZ,i_=new iZ,j_=new iZ;To.prototype=
Object.create(Ug.prototype);To.prototype.constructor=To;To.prototype.isCatmullRomCurve3=!0;To.prototype.getPoint=function(u,z){void 0===z&&(z=new kc);var t=(this||p).points,w=t.length;u*=w-((this||p).closed?0:1);var C=Math.floor(u);u-=C;(this||p).closed?C+=0<C?0:(Math.floor(Math.abs(C)/w)+1)*w:0===u&&C===w-1&&(C=w-2,u=1);if((this||p).closed||0<C)var G=t[(C-1)%w];else WQ.subVectors(t[0],t[1]).add(t[0]),G=WQ;var M=t[C%w],Q=t[(C+1)%w];(this||p).closed||C+2<w?t=t[(C+2)%w]:(WQ.subVectors(t[w-1],t[w-2]).add(t[w-
1]),t=WQ);if("centripetal"===(this||p).curveType||"chordal"===(this||p).curveType){var X="chordal"===(this||p).curveType?.5:.25;w=Math.pow(G.distanceToSquared(M),X);C=Math.pow(M.distanceToSquared(Q),X);X=Math.pow(Q.distanceToSquared(t),X);1E-4>C&&(C=1);1E-4>w&&(w=C);1E-4>X&&(X=C);h_.initNonuniformCatmullRom(G.x,M.x,Q.x,t.x,w,C,X);i_.initNonuniformCatmullRom(G.y,M.y,Q.y,t.y,w,C,X);j_.initNonuniformCatmullRom(G.z,M.z,Q.z,t.z,w,C,X)}else"catmullrom"===(this||p).curveType&&(h_.initCatmullRom(G.x,M.x,
Q.x,t.x,(this||p).tension),i_.initCatmullRom(G.y,M.y,Q.y,t.y,(this||p).tension),j_.initCatmullRom(G.z,M.z,Q.z,t.z,(this||p).tension));z.set(h_.calc(u),i_.calc(u),j_.calc(u));return z};To.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};To.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||
p);u.points=[];for(var z=0,t=(this||p).points.length;z<t;z++)u.points.push((this||p).points[z].toArray());u.closed=(this||p).closed;u.curveType=(this||p).curveType;u.tension=(this||p).tension;return u};To.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++){var w=u.points[z];(this||p).points.push((new kc).fromArray(w))}(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};gu.prototype=
Object.create(Ug.prototype);gu.prototype.constructor=gu;gu.prototype.isCubicBezierCurve=!0;gu.prototype.getPoint=function(u,z){void 0===z&&(z=new Je);var t=(this||p).v0,w=(this||p).v1,C=(this||p).v2,G=(this||p).v3;z.set(yJ(u,t.x,w.x,C.x,G.x),yJ(u,t.y,w.y,C.y,G.y));return z};gu.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};gu.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||
p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};gu.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};fw.prototype=Object.create(Ug.prototype);fw.prototype.constructor=fw;fw.prototype.isCubicBezierCurve3=!0;fw.prototype.getPoint=function(u,z){void 0===z&&(z=new kc);var t=(this||
p).v0,w=(this||p).v1,C=(this||p).v2,G=(this||p).v3;z.set(yJ(u,t.x,w.x,C.x,G.x),yJ(u,t.y,w.y,C.y,G.y),yJ(u,t.z,w.z,C.z,G.z));return z};fw.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};fw.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};
fw.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};oq.prototype=Object.create(Ug.prototype);oq.prototype.constructor=oq;oq.prototype.isLineCurve=!0;oq.prototype.getPoint=function(u,z){void 0===z&&(z=new Je);1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};oq.prototype.getPointAt=function(u,
z){return this.getPoint(u,z)};oq.prototype.getTangent=function(u,z){u=z||new Je;u.copy((this||p).v2).sub((this||p).v1).normalize();return u};oq.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};oq.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};oq.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);
(this||p).v2.fromArray(u.v2);return this||p};hu.prototype=Object.create(Ug.prototype);hu.prototype.constructor=hu;hu.prototype.isLineCurve3=!0;hu.prototype.getPoint=function(u,z){void 0===z&&(z=new kc);1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};hu.prototype.getPointAt=function(u,z){return this.getPoint(u,z)};hu.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||
p};hu.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};hu.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};iu.prototype=Object.create(Ug.prototype);iu.prototype.constructor=iu;iu.prototype.isQuadraticBezierCurve=!0;iu.prototype.getPoint=function(u,z){void 0===z&&(z=new Je);var t=(this||p).v0,w=(this||p).v1,C=(this||p).v2;
z.set(xJ(u,t.x,w.x,C.x),xJ(u,t.y,w.y,C.y));return z};iu.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};iu.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};iu.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||
p).v2.fromArray(u.v2);return this||p};gw.prototype=Object.create(Ug.prototype);gw.prototype.constructor=gw;gw.prototype.isQuadraticBezierCurve3=!0;gw.prototype.getPoint=function(u,z){void 0===z&&(z=new kc);var t=(this||p).v0,w=(this||p).v1,C=(this||p).v2;z.set(xJ(u,t.x,w.x,C.x),xJ(u,t.y,w.y,C.y),xJ(u,t.z,w.z,C.z));return z};gw.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};gw.prototype.toJSON=function(){var u=
Ug.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};gw.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};ju.prototype=Object.create(Ug.prototype);ju.prototype.constructor=ju;ju.prototype.isSplineCurve=!0;ju.prototype.getPoint=function(u,z){void 0===z&&(z=new Je);var t=(this||p).points,w=(t.length-1)*u;
u=Math.floor(w);w-=u;var C=t[0===u?u:u-1],G=t[u],M=t[u>t.length-2?t.length-1:u+1];t=t[u>t.length-3?t.length-1:u+2];z.set(mda(w,C.x,G.x,M.x,t.x),mda(w,C.y,G.y,M.y,t.y));return z};ju.prototype.copy=function(u){Ug.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());return this||p};ju.prototype.toJSON=function(){var u=Ug.prototype.toJSON.call(this||p);u.points=[];for(var z=0,t=(this||p).points.length;z<t;z++)u.points.push((this||
p).points[z].toArray());return u};ju.prototype.fromJSON=function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++){var w=u.points[z];(this||p).points.push((new Je).fromArray(w))}return this||p};var k_=Object.freeze({__proto__:null,ArcCurve:FF,CatmullRomCurve3:To,CubicBezierCurve:gu,CubicBezierCurve3:fw,EllipseCurve:yr,LineCurve:oq,LineCurve3:hu,QuadraticBezierCurve:iu,QuadraticBezierCurve3:gw,SplineCurve:ju});Qx.prototype=Object.assign(Object.create(Ug.prototype),
{constructor:Qx,add:function(u){(this||p).curves.push(u)},closePath:function(){var u=(this||p).curves[0].getPoint(0),z=(this||p).curves[(this||p).curves.length-1].getPoint(1);u.equals(z)||(this||p).curves.push(new oq(z,u))},getPoint:function(u){var z=u*this.getLength(),t=this.getCurveLengths();for(u=0;u<t.length;){if(t[u]>=z)return z=t[u]-z,u=(this||p).curves[u],t=u.getLength(),u.getPointAt(0===t?0:1-z/t);u++}return null},getLength:function(){var u=this.getCurveLengths();return u[u.length-1]},updateArcLengths:function(){(this||
p).needsUpdate=!0;(this||p).cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if((this||p).cacheLengths&&(this||p).cacheLengths.length===(this||p).curves.length)return(this||p).cacheLengths;for(var u=[],z=0,t=0,w=(this||p).curves.length;t<w;t++)z+=(this||p).curves[t].getLength(),u.push(z);return(this||p).cacheLengths=u},getSpacedPoints:function(u){void 0===u&&(u=40);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));(this||p).autoClose&&z.push(z[0]);return z},getPoints:function(u){void 0===
u&&(u=12);for(var z=[],t,w=0,C=(this||p).curves;w<C.length;w++){var G=C[w];G=G.getPoints(G&&G.isEllipseCurve?2*u:G&&(G.isLineCurve||G.isLineCurve3)?1:G&&G.isSplineCurve?u*G.points.length:u);for(var M=0;M<G.length;M++){var Q=G[M];t&&t.equals(Q)||(z.push(Q),t=Q)}}(this||p).autoClose&&1<z.length&&!z[z.length-1].equals(z[0])&&z.push(z[0]);return z},copy:function(u){Ug.prototype.copy.call(this||p,u);(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++)(this||p).curves.push(u.curves[z].clone());(this||
p).autoClose=u.autoClose;return this||p},toJSON:function(){var u=Ug.prototype.toJSON.call(this||p);u.autoClose=(this||p).autoClose;u.curves=[];for(var z=0,t=(this||p).curves.length;z<t;z++)u.curves.push((this||p).curves[z].toJSON());return u},fromJSON:function(u){Ug.prototype.fromJSON.call(this||p,u);(this||p).autoClose=u.autoClose;(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++){var w=u.curves[z];(this||p).curves.push((new k_[w.type]).fromJSON(w))}return this||p}});ku.prototype=Object.assign(Object.create(Qx.prototype),
{constructor:ku,setFromPoints:function(u){this.moveTo(u[0].x,u[0].y);for(var z=1,t=u.length;z<t;z++)this.lineTo(u[z].x,u[z].y);return this||p},moveTo:function(u,z){(this||p).currentPoint.set(u,z);return this||p},lineTo:function(u,z){var t=new oq((this||p).currentPoint.clone(),new Je(u,z));(this||p).curves.push(t);(this||p).currentPoint.set(u,z);return this||p},quadraticCurveTo:function(u,z,t,w){u=new iu((this||p).currentPoint.clone(),new Je(u,z),new Je(t,w));(this||p).curves.push(u);(this||p).currentPoint.set(t,
w);return this||p},bezierCurveTo:function(u,z,t,w,C,G){u=new gu((this||p).currentPoint.clone(),new Je(u,z),new Je(t,w),new Je(C,G));(this||p).curves.push(u);(this||p).currentPoint.set(C,G);return this||p},splineThru:function(u){var z=[(this||p).currentPoint.clone()].concat(u);z=new ju(z);(this||p).curves.push(z);(this||p).currentPoint.copy(u[u.length-1]);return this||p},arc:function(u,z,t,w,C,G){this.absarc(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,w,C,G);return this||p},absarc:function(u,
z,t,w,C,G){this.absellipse(u,z,t,t,w,C,G);return this||p},ellipse:function(u,z,t,w,C,G,M,Q){this.absellipse(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,w,C,G,M,Q);return this||p},absellipse:function(u,z,t,w,C,G,M,Q){u=new yr(u,z,t,w,C,G,M,Q);0<(this||p).curves.length&&(z=u.getPoint(0),z.equals((this||p).currentPoint)||this.lineTo(z.x,z.y));(this||p).curves.push(u);u=u.getPoint(1);(this||p).currentPoint.copy(u);return this||p},copy:function(u){Qx.prototype.copy.call(this||p,u);(this||p).currentPoint.copy(u.currentPoint);
return this||p},toJSON:function(){var u=Qx.prototype.toJSON.call(this||p);u.currentPoint=(this||p).currentPoint.toArray();return u},fromJSON:function(u){Qx.prototype.fromJSON.call(this||p,u);(this||p).currentPoint.fromArray(u.currentPoint);return this||p}});rA.prototype=Object.assign(Object.create(ku.prototype),{constructor:rA,getPointsHoles:function(u){for(var z=[],t=0,w=(this||p).holes.length;t<w;t++)z[t]=(this||p).holes[t].getPoints(u);return z},extractPoints:function(u){return{shape:this.getPoints(u),
holes:this.getPointsHoles(u)}},copy:function(u){ku.prototype.copy.call(this||p,u);(this||p).holes=[];for(var z=0,t=u.holes.length;z<t;z++)(this||p).holes.push(u.holes[z].clone());return this||p},toJSON:function(){var u=ku.prototype.toJSON.call(this||p);u.uuid=(this||p).uuid;u.holes=[];for(var z=0,t=(this||p).holes.length;z<t;z++)u.holes.push((this||p).holes[z].toJSON());return u},fromJSON:function(u){ku.prototype.fromJSON.call(this||p,u);(this||p).uuid=u.uuid;(this||p).holes=[];for(var z=0,t=u.holes.length;z<
t;z++){var w=u.holes[z];(this||p).holes.push((new ku).fromJSON(w))}return this||p}});al.prototype=Object.assign(Object.create(F.prototype),{constructor:al,isLight:!0,copy:function(u){F.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).intensity=u.intensity;return this||p},toJSON:function(u){u=F.prototype.toJSON.call(this||p,u);u.object.color=(this||p).color.getHex();u.object.intensity=(this||p).intensity;void 0!==(this||p).groundColor&&(u.object.groundColor=(this||p).groundColor.getHex());
void 0!==(this||p).distance&&(u.object.distance=(this||p).distance);void 0!==(this||p).angle&&(u.object.angle=(this||p).angle);void 0!==(this||p).decay&&(u.object.decay=(this||p).decay);void 0!==(this||p).penumbra&&(u.object.penumbra=(this||p).penumbra);void 0!==(this||p).shadow&&(u.object.shadow=(this||p).shadow.toJSON());return u}});nQ.prototype=Object.assign(Object.create(al.prototype),{constructor:nQ,isHemisphereLight:!0,copy:function(u){al.prototype.copy.call(this||p,u);(this||p).groundColor.copy(u.groundColor);
return this||p}});Object.assign(Rx.prototype,{_projScreenMatrix:new Qi,_lightPositionWorld:new kc,_lookTarget:new kc,getViewportCount:function(){return(this||p)._viewportCount},getFrustum:function(){return(this||p)._frustum},updateMatrices:function(u){var z=(this||p).camera,t=(this||p).matrix,w=(this||p)._projScreenMatrix,C=(this||p)._lookTarget,G=(this||p)._lightPositionWorld;G.setFromMatrixPosition(u.matrixWorld);z.position.copy(G);C.setFromMatrixPosition(u.target.matrixWorld);z.lookAt(C);z.updateMatrixWorld();
w.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse);(this||p)._frustum.setFromProjectionMatrix(w);t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);t.multiply(z.projectionMatrix);t.multiply(z.matrixWorldInverse)},getViewport:function(u){return(this||p)._viewports[u]},getFrameExtents:function(){return(this||p)._frameExtents},copy:function(u){(this||p).camera=u.camera.clone();(this||p).bias=u.bias;(this||p).radius=u.radius;(this||p).mapSize.copy(u.mapSize);return this||p},clone:function(){return(new (this||
p).constructor).copy(this||p)},toJSON:function(){var u={};0!==(this||p).bias&&(u.bias=(this||p).bias);0!==(this||p).normalBias&&(u.normalBias=(this||p).normalBias);1!==(this||p).radius&&(u.radius=(this||p).radius);if(512!==(this||p).mapSize.x||512!==(this||p).mapSize.y)u.mapSize=(this||p).mapSize.toArray();u.camera=(this||p).camera.toJSON(!1).object;delete u.camera.matrix;return u}});jZ.prototype=Object.assign(Object.create(Rx.prototype),{constructor:jZ,isSpotLightShadow:!0,updateMatrices:function(u){var z=
(this||p).camera,t=2*Kh.RAD2DEG*u.angle*(this||p).focus,w=(this||p).mapSize.width/(this||p).mapSize.height,C=u.distance||z.far;if(t!==z.fov||w!==z.aspect||C!==z.far)z.fov=t,z.aspect=w,z.far=C,z.updateProjectionMatrix();Rx.prototype.updateMatrices.call(this||p,u)}});oQ.prototype=Object.assign(Object.create(al.prototype),{constructor:oQ,isSpotLight:!0,copy:function(u){al.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).angle=u.angle;(this||p).penumbra=u.penumbra;(this||p).decay=
u.decay;(this||p).target=u.target.clone();(this||p).shadow=u.shadow.clone();return this||p}});kZ.prototype=Object.assign(Object.create(Rx.prototype),{constructor:kZ,isPointLightShadow:!0,updateMatrices:function(u,z){void 0===z&&(z=0);var t=(this||p).camera,w=(this||p).matrix,C=(this||p)._lightPositionWorld,G=(this||p)._lookTarget,M=(this||p)._projScreenMatrix;C.setFromMatrixPosition(u.matrixWorld);t.position.copy(C);G.copy(t.position);G.add((this||p)._cubeDirections[z]);t.up.copy((this||p)._cubeUps[z]);
t.lookAt(G);t.updateMatrixWorld();w.makeTranslation(-C.x,-C.y,-C.z);M.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);(this||p)._frustum.setFromProjectionMatrix(M)}});pQ.prototype=Object.assign(Object.create(al.prototype),{constructor:pQ,isPointLight:!0,copy:function(u){al.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).decay=u.decay;(this||p).shadow=u.shadow.clone();return this||p}});GF.prototype=Object.assign(Object.create(Ub.prototype),{constructor:GF,isOrthographicCamera:!0,
copy:function(u,z){Ub.prototype.copy.call(this||p,u,z);(this||p).left=u.left;(this||p).right=u.right;(this||p).top=u.top;(this||p).bottom=u.bottom;(this||p).near=u.near;(this||p).far=u.far;(this||p).zoom=u.zoom;(this||p).view=null===u.view?null:Object.assign({},u.view);return this||p},setViewOffset:function(u,z,t,w,C,G){null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=
z;(this||p).view.offsetX=t;(this||p).view.offsetY=w;(this||p).view.width=C;(this||p).view.height=G;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=((this||p).right-(this||p).left)/(2*(this||p).zoom),z=((this||p).top-(this||p).bottom)/(2*(this||p).zoom),t=((this||p).right+(this||p).left)/2,w=((this||p).top+(this||p).bottom)/2,C=t-u;t+=u;u=w+z;z=w-z;null!==(this||p).view&&
(this||p).view.enabled&&(w=((this||p).right-(this||p).left)/(this||p).view.fullWidth/(this||p).zoom,z=((this||p).top-(this||p).bottom)/(this||p).view.fullHeight/(this||p).zoom,C+=w*(this||p).view.offsetX,t=C+w*(this||p).view.width,u-=z*(this||p).view.offsetY,z=u-z*(this||p).view.height);(this||p).projectionMatrix.makeOrthographic(C,t,u,z,(this||p).near,(this||p).far);(this||p).projectionMatrixInverse.copy((this||p).projectionMatrix).invert()},toJSON:function(u){u=F.prototype.toJSON.call(this||p,u);
u.object.zoom=(this||p).zoom;u.object.left=(this||p).left;u.object.right=(this||p).right;u.object.top=(this||p).top;u.object.bottom=(this||p).bottom;u.object.near=(this||p).near;u.object.far=(this||p).far;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));return u}});lZ.prototype=Object.assign(Object.create(Rx.prototype),{constructor:lZ,isDirectionalLightShadow:!0,updateMatrices:function(u){Rx.prototype.updateMatrices.call(this||p,u)}});qQ.prototype=Object.assign(Object.create(al.prototype),
{constructor:qQ,isDirectionalLight:!0,copy:function(u){al.prototype.copy.call(this||p,u);(this||p).target=u.target.clone();(this||p).shadow=u.shadow.clone();return this||p}});rQ.prototype=Object.assign(Object.create(al.prototype),{constructor:rQ,isAmbientLight:!0});sQ.prototype=Object.assign(Object.create(al.prototype),{constructor:sQ,isRectAreaLight:!0,copy:function(u){al.prototype.copy.call(this||p,u);(this||p).width=u.width;(this||p).height=u.height;return this||p},toJSON:function(u){u=al.prototype.toJSON.call(this||
p,u);u.object.width=(this||p).width;u.object.height=(this||p).height;return u}});var nda=function(){function u(){Object.defineProperty(this||p,"isSphericalHarmonics3",{value:!0});(this||p).coefficients=[];for(var t=0;9>t;t++)(this||p).coefficients.push(new kc)}var z=u.prototype;z.set=function(t){for(var w=0;9>w;w++)(this||p).coefficients[w].copy(t[w]);return this||p};z.zero=function(){for(var t=0;9>t;t++)(this||p).coefficients[t].set(0,0,0);return this||p};z.getAt=function(t,w){var C=t.x,G=t.y;t=
t.z;var M=(this||p).coefficients;w.copy(M[0]).multiplyScalar(.282095);w.addScaledVector(M[1],.488603*G);w.addScaledVector(M[2],.488603*t);w.addScaledVector(M[3],.488603*C);w.addScaledVector(M[4],1.092548*C*G);w.addScaledVector(M[5],1.092548*G*t);w.addScaledVector(M[6],.315392*(3*t*t-1));w.addScaledVector(M[7],1.092548*C*t);w.addScaledVector(M[8],.546274*(C*C-G*G));return w};z.getIrradianceAt=function(t,w){var C=t.x,G=t.y;t=t.z;var M=(this||p).coefficients;w.copy(M[0]).multiplyScalar(.886227);w.addScaledVector(M[1],
1.023328*G);w.addScaledVector(M[2],1.023328*t);w.addScaledVector(M[3],1.023328*C);w.addScaledVector(M[4],.858086*C*G);w.addScaledVector(M[5],.858086*G*t);w.addScaledVector(M[6],.743125*t*t-.247708);w.addScaledVector(M[7],.858086*C*t);w.addScaledVector(M[8],.429043*(C*C-G*G));return w};z.add=function(t){for(var w=0;9>w;w++)(this||p).coefficients[w].add(t.coefficients[w]);return this||p};z.addScaledSH=function(t,w){for(var C=0;9>C;C++)(this||p).coefficients[C].addScaledVector(t.coefficients[C],w);return this||
p};z.scale=function(t){for(var w=0;9>w;w++)(this||p).coefficients[w].multiplyScalar(t);return this||p};z.lerp=function(t,w){for(var C=0;9>C;C++)(this||p).coefficients[C].lerp(t.coefficients[C],w);return this||p};z.equals=function(t){for(var w=0;9>w;w++)if(!(this||p).coefficients[w].equals(t.coefficients[w]))return!1;return!0};z.copy=function(t){return this.set(t.coefficients)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.fromArray=function(t,w){void 0===w&&(w=0);for(var C=
(this||p).coefficients,G=0;9>G;G++)C[G].fromArray(t,w+3*G);return this||p};z.toArray=function(t,w){void 0===t&&(t=[]);void 0===w&&(w=0);for(var C=(this||p).coefficients,G=0;9>G;G++)C[G].toArray(t,w+3*G);return t};u.getBasisAt=function(t,w){var C=t.x,G=t.y;t=t.z;w[0]=.282095;w[1]=.488603*G;w[2]=.488603*t;w[3]=.488603*C;w[4]=1.092548*C*G;w[5]=1.092548*G*t;w[6]=.315392*(3*t*t-1);w[7]=1.092548*C*t;w[8]=.546274*(C*C-G*G)};return u}();Ks.prototype=Object.assign(Object.create(al.prototype),{constructor:Ks,
isLightProbe:!0,copy:function(u){al.prototype.copy.call(this||p,u);(this||p).sh.copy(u.sh);return this||p},fromJSON:function(u){(this||p).intensity=u.intensity;(this||p).sh.fromArray(u.sh);return this||p},toJSON:function(u){u=al.prototype.toJSON.call(this||p,u);u.object.sh=(this||p).sh.toArray();return u}});tQ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:tQ,load:function(u,z,t,w){var C=this||p,G=new Js(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);
G.load(u,function(M){try{z(C.parse(JSON.parse(M)))}catch(Q){w?w(Q):console.error(Q),C.manager.itemError(u)}},t,w)},parse:function(u){function z(Q){void 0===t[Q]&&console.warn("THREE.MaterialLoader: Undefined texture",Q);return t[Q]}var t=(this||p).textures,w=new oxa[u.type];void 0!==u.uuid&&(w.uuid=u.uuid);void 0!==u.name&&(w.name=u.name);void 0!==u.color&&void 0!==w.color&&w.color.setHex(u.color);void 0!==u.roughness&&(w.roughness=u.roughness);void 0!==u.metalness&&(w.metalness=u.metalness);void 0!==
u.sheen&&(w.sheen=(new bg).setHex(u.sheen));void 0!==u.emissive&&void 0!==w.emissive&&w.emissive.setHex(u.emissive);void 0!==u.specular&&void 0!==w.specular&&w.specular.setHex(u.specular);void 0!==u.shininess&&(w.shininess=u.shininess);void 0!==u.clearcoat&&(w.clearcoat=u.clearcoat);void 0!==u.clearcoatRoughness&&(w.clearcoatRoughness=u.clearcoatRoughness);void 0!==u.fog&&(w.fog=u.fog);void 0!==u.flatShading&&(w.flatShading=u.flatShading);void 0!==u.blending&&(w.blending=u.blending);void 0!==u.combine&&
(w.combine=u.combine);void 0!==u.side&&(w.side=u.side);void 0!==u.opacity&&(w.opacity=u.opacity);void 0!==u.transparent&&(w.transparent=u.transparent);void 0!==u.alphaTest&&(w.alphaTest=u.alphaTest);void 0!==u.depthTest&&(w.depthTest=u.depthTest);void 0!==u.depthWrite&&(w.depthWrite=u.depthWrite);void 0!==u.colorWrite&&(w.colorWrite=u.colorWrite);void 0!==u.stencilWrite&&(w.stencilWrite=u.stencilWrite);void 0!==u.stencilWriteMask&&(w.stencilWriteMask=u.stencilWriteMask);void 0!==u.stencilFunc&&(w.stencilFunc=
u.stencilFunc);void 0!==u.stencilRef&&(w.stencilRef=u.stencilRef);void 0!==u.stencilFuncMask&&(w.stencilFuncMask=u.stencilFuncMask);void 0!==u.stencilFail&&(w.stencilFail=u.stencilFail);void 0!==u.stencilZFail&&(w.stencilZFail=u.stencilZFail);void 0!==u.stencilZPass&&(w.stencilZPass=u.stencilZPass);void 0!==u.wireframe&&(w.wireframe=u.wireframe);void 0!==u.wireframeLinewidth&&(w.wireframeLinewidth=u.wireframeLinewidth);void 0!==u.wireframeLinecap&&(w.wireframeLinecap=u.wireframeLinecap);void 0!==
u.wireframeLinejoin&&(w.wireframeLinejoin=u.wireframeLinejoin);void 0!==u.rotation&&(w.rotation=u.rotation);1!==u.linewidth&&(w.linewidth=u.linewidth);void 0!==u.dashSize&&(w.dashSize=u.dashSize);void 0!==u.gapSize&&(w.gapSize=u.gapSize);void 0!==u.scale&&(w.scale=u.scale);void 0!==u.polygonOffset&&(w.polygonOffset=u.polygonOffset);void 0!==u.polygonOffsetFactor&&(w.polygonOffsetFactor=u.polygonOffsetFactor);void 0!==u.polygonOffsetUnits&&(w.polygonOffsetUnits=u.polygonOffsetUnits);void 0!==u.skinning&&
(w.skinning=u.skinning);void 0!==u.morphTargets&&(w.morphTargets=u.morphTargets);void 0!==u.morphNormals&&(w.morphNormals=u.morphNormals);void 0!==u.dithering&&(w.dithering=u.dithering);void 0!==u.vertexTangents&&(w.vertexTangents=u.vertexTangents);void 0!==u.visible&&(w.visible=u.visible);void 0!==u.toneMapped&&(w.toneMapped=u.toneMapped);void 0!==u.userData&&(w.userData=u.userData);void 0!==u.vertexColors&&(w.vertexColors="number"===typeof u.vertexColors?0<u.vertexColors?!0:!1:u.vertexColors);if(void 0!==
u.uniforms)for(var C in u.uniforms){var G=u.uniforms[C];w.uniforms[C]={};switch(G.type){case "t":w.uniforms[C].value=z(G.value);break;case "c":w.uniforms[C].value=(new bg).setHex(G.value);break;case "v2":w.uniforms[C].value=(new Je).fromArray(G.value);break;case "v3":w.uniforms[C].value=(new kc).fromArray(G.value);break;case "v4":w.uniforms[C].value=(new Gk).fromArray(G.value);break;case "m3":w.uniforms[C].value=(new Cp).fromArray(G.value);break;case "m4":w.uniforms[C].value=(new Qi).fromArray(G.value);
break;default:w.uniforms[C].value=G.value}}void 0!==u.defines&&(w.defines=u.defines);void 0!==u.vertexShader&&(w.vertexShader=u.vertexShader);void 0!==u.fragmentShader&&(w.fragmentShader=u.fragmentShader);if(void 0!==u.extensions)for(var M in u.extensions)w.extensions[M]=u.extensions[M];void 0!==u.shading&&(w.flatShading=1===u.shading);void 0!==u.size&&(w.size=u.size);void 0!==u.sizeAttenuation&&(w.sizeAttenuation=u.sizeAttenuation);void 0!==u.map&&(w.map=z(u.map));void 0!==u.matcap&&(w.matcap=z(u.matcap));
void 0!==u.alphaMap&&(w.alphaMap=z(u.alphaMap));void 0!==u.bumpMap&&(w.bumpMap=z(u.bumpMap));void 0!==u.bumpScale&&(w.bumpScale=u.bumpScale);void 0!==u.normalMap&&(w.normalMap=z(u.normalMap));void 0!==u.normalMapType&&(w.normalMapType=u.normalMapType);void 0!==u.normalScale&&(C=u.normalScale,!1===Array.isArray(C)&&(C=[C,C]),w.normalScale=(new Je).fromArray(C));void 0!==u.displacementMap&&(w.displacementMap=z(u.displacementMap));void 0!==u.displacementScale&&(w.displacementScale=u.displacementScale);
void 0!==u.displacementBias&&(w.displacementBias=u.displacementBias);void 0!==u.roughnessMap&&(w.roughnessMap=z(u.roughnessMap));void 0!==u.metalnessMap&&(w.metalnessMap=z(u.metalnessMap));void 0!==u.emissiveMap&&(w.emissiveMap=z(u.emissiveMap));void 0!==u.emissiveIntensity&&(w.emissiveIntensity=u.emissiveIntensity);void 0!==u.specularMap&&(w.specularMap=z(u.specularMap));void 0!==u.envMap&&(w.envMap=z(u.envMap));void 0!==u.envMapIntensity&&(w.envMapIntensity=u.envMapIntensity);void 0!==u.reflectivity&&
(w.reflectivity=u.reflectivity);void 0!==u.refractionRatio&&(w.refractionRatio=u.refractionRatio);void 0!==u.lightMap&&(w.lightMap=z(u.lightMap));void 0!==u.lightMapIntensity&&(w.lightMapIntensity=u.lightMapIntensity);void 0!==u.aoMap&&(w.aoMap=z(u.aoMap));void 0!==u.aoMapIntensity&&(w.aoMapIntensity=u.aoMapIntensity);void 0!==u.gradientMap&&(w.gradientMap=z(u.gradientMap));void 0!==u.clearcoatMap&&(w.clearcoatMap=z(u.clearcoatMap));void 0!==u.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap=z(u.clearcoatRoughnessMap));
void 0!==u.clearcoatNormalMap&&(w.clearcoatNormalMap=z(u.clearcoatNormalMap));void 0!==u.clearcoatNormalScale&&(w.clearcoatNormalScale=(new Je).fromArray(u.clearcoatNormalScale));void 0!==u.transmission&&(w.transmission=u.transmission);void 0!==u.transmissionMap&&(w.transmissionMap=z(u.transmissionMap));return w},setTextures:function(u){(this||p).textures=u;return this||p}});var l_={decodeText:function(u){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(u);for(var z="",t=0,w=u.length;t<
w;t++)z+=String.fromCharCode(u[t]);try{return decodeURIComponent(escape(z))}catch(C){return z}},extractUrlBase:function(u){var z=u.lastIndexOf("/");return-1===z?"./":u.substr(0,z+1)}};zJ.prototype=Object.assign(Object.create(ob.prototype),{constructor:zJ,isInstancedBufferGeometry:!0,copy:function(u){ob.prototype.copy.call(this||p,u);(this||p).instanceCount=u.instanceCount;return this||p},clone:function(){return(new (this||p).constructor).copy(this||p)},toJSON:function(){var u=ob.prototype.toJSON.call(this||
p);u.instanceCount=(this||p).instanceCount;u.isInstancedBufferGeometry=!0;return u}});uQ.prototype=Object.assign(Object.create(S.prototype),{constructor:uQ,isInstancedBufferAttribute:!0,copy:function(u){S.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},toJSON:function(){var u=S.prototype.toJSON.call(this||p);u.meshPerAttribute=(this||p).meshPerAttribute;u.isInstancedBufferAttribute=!0;return u}});vQ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:vQ,
load:function(u,z,t,w){var C=this||p,G=new Js(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(M){try{z(C.parse(JSON.parse(M)))}catch(Q){w?w(Q):console.error(Q),C.manager.itemError(u)}},t,w)},parse:function(u){function z(Xa,Wa){if(void 0!==t[Wa])return t[Wa];var tb=Xa.interleavedBuffers[Wa];var mb=tb.buffer;void 0!==w[mb]?mb=w[mb]:(Xa=(new Uint32Array(Xa.arrayBuffers[mb])).buffer,mb=w[mb]=Xa);mb=new FJ[tb.type](mb);mb=new vr(mb,
tb.stride);mb.uuid=tb.uuid;return t[Wa]=mb}var t={},w={},C=u.isInstancedBufferGeometry?new zJ:new ob,G=u.data.index;void 0!==G&&(G=new FJ[G.type](G.array),C.setIndex(new S(G,1)));G=u.data.attributes;for(var M in G){var Q=G[M],X=void 0;Q.isInterleavedBufferAttribute?(X=z(u.data,Q.data),X=new mA(X,Q.itemSize,Q.offset,Q.normalized)):(X=new FJ[Q.type](Q.array),X=new (Q.isInstancedBufferAttribute?uQ:S)(X,Q.itemSize,Q.normalized));void 0!==Q.name&&(X.name=Q.name);C.setAttribute(M,X)}if(M=u.data.morphAttributes)for(var T in M){G=
M[T];Q=[];X=0;for(var fa=G.length;X<fa;X++){var oa=G[X],Ga=void 0;oa.isInterleavedBufferAttribute?(Ga=z(u.data,oa.data),Ga=new mA(Ga,oa.itemSize,oa.offset,oa.normalized)):(Ga=new FJ[oa.type](oa.array),Ga=new S(Ga,oa.itemSize,oa.normalized));void 0!==oa.name&&(Ga.name=oa.name);Q.push(Ga)}C.morphAttributes[T]=Q}u.data.morphTargetsRelative&&(C.morphTargetsRelative=!0);T=u.data.groups||u.data.drawcalls||u.data.offsets;if(void 0!==T)for(M=0,G=T.length;M!==G;++M)Q=T[M],C.addGroup(Q.start,Q.count,Q.materialIndex);
T=u.data.boundingSphere;void 0!==T&&(M=new kc,void 0!==T.center&&M.fromArray(T.center),C.boundingSphere=new Tx(M,T.radius));u.name&&(C.name=u.name);u.userData&&(C.userData=u.userData);return C}});var qxa=function(u){function z(w){return u.call(this||p,w)||this||p}f(z,u);var t=z.prototype;t.load=function(w,C,G,M){var Q=this||p,X=""===(this||p).path?l_.extractUrlBase(w):(this||p).path;(this||p).resourcePath=(this||p).resourcePath||X;X=new Js((this||p).manager);X.setPath((this||p).path);X.setRequestHeader((this||
p).requestHeader);X.setWithCredentials((this||p).withCredentials);X.load(w,function(T){var fa=null;try{fa=JSON.parse(T)}catch(oa){void 0!==M&&M(oa);console.error("THREE:ObjectLoader: Can't parse "+w+".",oa.message);return}T=fa.metadata;void 0===T||void 0===T.type||"geometry"===T.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+w):Q.parse(fa,C)},G,M)};t.parse=function(w,C){var G=this.parseAnimations(w.animations),M=this.parseShapes(w.shapes),Q=this.parseGeometries(w.geometries,M);
M=this.parseImages(w.images,function(){void 0!==C&&C(T)});var X=this.parseTextures(w.textures,M);X=this.parseMaterials(w.materials,X);var T=this.parseObject(w.object,Q,X,G);w=this.parseSkeletons(w.skeletons,T);this.bindSkeletons(T,w);if(void 0!==C){w=!1;for(var fa in M)if(M[fa]instanceof HTMLImageElement){w=!0;break}!1===w&&C(T)}return T};t.parseShapes=function(w){var C={};if(void 0!==w)for(var G=0,M=w.length;G<M;G++){var Q=(new rA).fromJSON(w[G]);C[Q.uuid]=Q}return C};t.parseSkeletons=function(w,
C){var G={},M={};C.traverse(function(T){T.isBone&&(M[T.uuid]=T)});if(void 0!==w){C=0;for(var Q=w.length;C<Q;C++){var X=(new oJ).fromJSON(w[C],M);G[X.uuid]=X}}return G};t.parseGeometries=function(w,C){var G={};if(void 0!==w)for(var M=new vQ,Q=0,X=w.length;Q<X;Q++){var T=void 0;var fa=w[Q];switch(fa.type){case "PlaneGeometry":case "PlaneBufferGeometry":T=new Fp[fa.type](fa.width,fa.height,fa.widthSegments,fa.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":T=new Fp[fa.type](fa.width,
fa.height,fa.depth,fa.widthSegments,fa.heightSegments,fa.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":T=new Fp[fa.type](fa.radius,fa.segments,fa.thetaStart,fa.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":T=new Fp[fa.type](fa.radiusTop,fa.radiusBottom,fa.height,fa.radialSegments,fa.heightSegments,fa.openEnded,fa.thetaStart,fa.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":T=new Fp[fa.type](fa.radius,fa.height,fa.radialSegments,
fa.heightSegments,fa.openEnded,fa.thetaStart,fa.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":T=new Fp[fa.type](fa.radius,fa.widthSegments,fa.heightSegments,fa.phiStart,fa.phiLength,fa.thetaStart,fa.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":T=new Fp[fa.type](fa.radius,
fa.detail);break;case "RingGeometry":case "RingBufferGeometry":T=new Fp[fa.type](fa.innerRadius,fa.outerRadius,fa.thetaSegments,fa.phiSegments,fa.thetaStart,fa.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":T=new Fp[fa.type](fa.radius,fa.tube,fa.radialSegments,fa.tubularSegments,fa.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":T=new Fp[fa.type](fa.radius,fa.tube,fa.tubularSegments,fa.radialSegments,fa.p,fa.q);break;case "TubeGeometry":case "TubeBufferGeometry":T=
new Fp[fa.type]((new k_[fa.path.type]).fromJSON(fa.path),fa.tubularSegments,fa.radius,fa.radialSegments,fa.closed);break;case "LatheGeometry":case "LatheBufferGeometry":T=new Fp[fa.type](fa.points,fa.segments,fa.phiStart,fa.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":T=new Fp[fa.type](fa.vertices,fa.indices,fa.radius,fa.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":T=[];for(var oa=0,Ga=fa.shapes.length;oa<Ga;oa++)T.push(C[fa.shapes[oa]]);T=new Fp[fa.type](T,
fa.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":T=[];oa=0;for(Ga=fa.shapes.length;oa<Ga;oa++)T.push(C[fa.shapes[oa]]);oa=fa.options.extrudePath;void 0!==oa&&(fa.options.extrudePath=(new k_[oa.type]).fromJSON(oa));T=new Fp[fa.type](T,fa.options);break;case "BufferGeometry":case "InstancedBufferGeometry":T=M.parse(fa);break;case "Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+
fa.type+'"');continue}T.uuid=fa.uuid;void 0!==fa.name&&(T.name=fa.name);!0===T.isBufferGeometry&&void 0!==fa.userData&&(T.userData=fa.userData);G[fa.uuid]=T}return G};t.parseMaterials=function(w,C){var G={},M={};if(void 0!==w){var Q=new tQ;Q.setTextures(C);C=0;for(var X=w.length;C<X;C++){var T=w[C];if("MultiMaterial"===T.type){for(var fa=[],oa=0;oa<T.materials.length;oa++){var Ga=T.materials[oa];void 0===G[Ga.uuid]&&(G[Ga.uuid]=Q.parse(Ga));fa.push(G[Ga.uuid])}M[T.uuid]=fa}else void 0===G[T.uuid]&&
(G[T.uuid]=Q.parse(T)),M[T.uuid]=G[T.uuid]}}return M};t.parseAnimations=function(w){var C={};if(void 0!==w)for(var G=0;G<w.length;G++){var M=xr.parse(w[G]);C[M.uuid]=M}return C};t.parseImages=function(w,C){function G(mb){Q.manager.itemStart(mb);return T.load(mb,function(){Q.manager.itemEnd(mb)},void 0,function(){Q.manager.itemError(mb);Q.manager.itemEnd(mb)})}function M(mb){return"string"===typeof mb?(mb=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(mb)?mb:Q.resourcePath+mb,G(mb)):mb.data?{data:new FJ[mb.type](mb.data),
width:mb.width,height:mb.height}:null}var Q=this||p,X={};if(void 0!==w&&0<w.length){C=new fZ(C);var T=new EF(C);T.setCrossOrigin((this||p).crossOrigin);C=0;for(var fa=w.length;C<fa;C++){var oa=w[C],Ga=oa.url;if(Array.isArray(Ga)){X[oa.uuid]=[];for(var Xa=0,Wa=Ga.length;Xa<Wa;Xa++){var tb=M(Ga[Xa]);null!==tb&&(tb instanceof HTMLImageElement?X[oa.uuid].push(tb):X[oa.uuid].push(new Bd(tb.data,tb.width,tb.height)))}}else Ga=M(oa.url),null!==Ga&&(X[oa.uuid]=Ga)}}return X};t.parseTextures=function(w,C){function G(Ga,
Xa){if("number"===typeof Ga)return Ga;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Ga);return Xa[Ga]}var M={};if(void 0!==w)for(var Q=0,X=w.length;Q<X;Q++){var T=w[Q];void 0===T.image&&console.warn('THREE.ObjectLoader: No "image" specified for',T.uuid);void 0===C[T.image]&&console.warn("THREE.ObjectLoader: Undefined image",T.image);var fa=void 0,oa=C[T.image];Array.isArray(oa)?(fa=new Mb(oa),6===oa.length&&(fa.needsUpdate=!0)):(fa=oa&&oa.data?new Bd(oa.data,
oa.width,oa.height):new r(oa),oa&&(fa.needsUpdate=!0));fa.uuid=T.uuid;void 0!==T.name&&(fa.name=T.name);void 0!==T.mapping&&(fa.mapping=G(T.mapping,pxa));void 0!==T.offset&&fa.offset.fromArray(T.offset);void 0!==T.repeat&&fa.repeat.fromArray(T.repeat);void 0!==T.center&&fa.center.fromArray(T.center);void 0!==T.rotation&&(fa.rotation=T.rotation);void 0!==T.wrap&&(fa.wrapS=G(T.wrap[0],pea),fa.wrapT=G(T.wrap[1],pea));void 0!==T.format&&(fa.format=T.format);void 0!==T.type&&(fa.type=T.type);void 0!==
T.encoding&&(fa.encoding=T.encoding);void 0!==T.minFilter&&(fa.minFilter=G(T.minFilter,qea));void 0!==T.magFilter&&(fa.magFilter=G(T.magFilter,qea));void 0!==T.anisotropy&&(fa.anisotropy=T.anisotropy);void 0!==T.flipY&&(fa.flipY=T.flipY);void 0!==T.premultiplyAlpha&&(fa.premultiplyAlpha=T.premultiplyAlpha);void 0!==T.unpackAlignment&&(fa.unpackAlignment=T.unpackAlignment);M[T.uuid]=fa}return M};t.parseObject=function(w,C,G,M){function Q(Ga){void 0===C[Ga]&&console.warn("THREE.ObjectLoader: Undefined geometry",
Ga);return C[Ga]}function X(Ga){if(void 0!==Ga){if(Array.isArray(Ga)){for(var Xa=[],Wa=0,tb=Ga.length;Wa<tb;Wa++){var mb=Ga[Wa];void 0===G[mb]&&console.warn("THREE.ObjectLoader: Undefined material",mb);Xa.push(G[mb])}return Xa}void 0===G[Ga]&&console.warn("THREE.ObjectLoader: Undefined material",Ga);return G[Ga]}}switch(w.type){case "Scene":var T=new NZ;void 0!==w.background&&Number.isInteger(w.background)&&(T.background=new bg(w.background));void 0!==w.fog&&("Fog"===w.fog.type?T.fog=new Lda(w.fog.color,
w.fog.near,w.fog.far):"FogExp2"===w.fog.type&&(T.fog=new Kda(w.fog.color,w.fog.density)));break;case "PerspectiveCamera":T=new ac(w.fov,w.aspect,w.near,w.far);void 0!==w.focus&&(T.focus=w.focus);void 0!==w.zoom&&(T.zoom=w.zoom);void 0!==w.filmGauge&&(T.filmGauge=w.filmGauge);void 0!==w.filmOffset&&(T.filmOffset=w.filmOffset);void 0!==w.view&&(T.view=Object.assign({},w.view));break;case "OrthographicCamera":T=new GF(w.left,w.right,w.top,w.bottom,w.near,w.far);void 0!==w.zoom&&(T.zoom=w.zoom);void 0!==
w.view&&(T.view=Object.assign({},w.view));break;case "AmbientLight":T=new rQ(w.color,w.intensity);break;case "DirectionalLight":T=new qQ(w.color,w.intensity);break;case "PointLight":T=new pQ(w.color,w.intensity,w.distance,w.decay);break;case "RectAreaLight":T=new sQ(w.color,w.intensity,w.width,w.height);break;case "SpotLight":T=new oQ(w.color,w.intensity,w.distance,w.angle,w.penumbra,w.decay);break;case "HemisphereLight":T=new nQ(w.color,w.groundColor,w.intensity);break;case "LightProbe":T=(new Ks).fromJSON(w);
break;case "SkinnedMesh":T=Q(w.geometry);var fa=X(w.material);T=new mJ(T,fa);void 0!==w.bindMode&&(T.bindMode=w.bindMode);void 0!==w.bindMatrix&&T.bindMatrix.fromArray(w.bindMatrix);void 0!==w.skeleton&&(T.skeleton=w.skeleton);break;case "Mesh":T=Q(w.geometry);fa=X(w.material);T=new pa(T,fa);break;case "InstancedMesh":T=Q(w.geometry);fa=X(w.material);var oa=w.instanceMatrix;T=new $P(T,fa,w.count);T.instanceMatrix=new S(new Float32Array(oa.array),16);break;case "LOD":T=new lJ;break;case "Line":T=new Is(Q(w.geometry),
X(w.material));break;case "LineLoop":T=new aQ(Q(w.geometry),X(w.material));break;case "LineSegments":T=new Dp(Q(w.geometry),X(w.material));break;case "PointCloud":case "Points":T=new yF(Q(w.geometry),X(w.material));break;case "Sprite":T=new jJ(X(w.material));break;case "Group":T=new iA;break;case "Bone":T=new nJ;break;default:T=new F}T.uuid=w.uuid;void 0!==w.name&&(T.name=w.name);void 0!==w.matrix?(T.matrix.fromArray(w.matrix),void 0!==w.matrixAutoUpdate&&(T.matrixAutoUpdate=w.matrixAutoUpdate),T.matrixAutoUpdate&&
T.matrix.decompose(T.position,T.quaternion,T.scale)):(void 0!==w.position&&T.position.fromArray(w.position),void 0!==w.rotation&&T.rotation.fromArray(w.rotation),void 0!==w.quaternion&&T.quaternion.fromArray(w.quaternion),void 0!==w.scale&&T.scale.fromArray(w.scale));void 0!==w.castShadow&&(T.castShadow=w.castShadow);void 0!==w.receiveShadow&&(T.receiveShadow=w.receiveShadow);w.shadow&&(void 0!==w.shadow.bias&&(T.shadow.bias=w.shadow.bias),void 0!==w.shadow.normalBias&&(T.shadow.normalBias=w.shadow.normalBias),
void 0!==w.shadow.radius&&(T.shadow.radius=w.shadow.radius),void 0!==w.shadow.mapSize&&T.shadow.mapSize.fromArray(w.shadow.mapSize),void 0!==w.shadow.camera&&(T.shadow.camera=this.parseObject(w.shadow.camera)));void 0!==w.visible&&(T.visible=w.visible);void 0!==w.frustumCulled&&(T.frustumCulled=w.frustumCulled);void 0!==w.renderOrder&&(T.renderOrder=w.renderOrder);void 0!==w.userData&&(T.userData=w.userData);void 0!==w.layers&&(T.layers.mask=w.layers);if(void 0!==w.children)for(oa=w.children,fa=0;fa<
oa.length;fa++)T.add(this.parseObject(oa[fa],C,G,M));if(void 0!==w.animations)for(oa=w.animations,fa=0;fa<oa.length;fa++)T.animations.push(M[oa[fa]]);if("LOD"===w.type)for(void 0!==w.autoUpdate&&(T.autoUpdate=w.autoUpdate),w=w.levels,M=0;M<w.length;M++)oa=w[M],fa=T.getObjectByProperty("uuid",oa.object),void 0!==fa&&T.addLevel(fa,oa.distance);return T};t.bindSkeletons=function(w,C){0!==Object.keys(C).length&&w.traverse(function(G){if(!0===G.isSkinnedMesh&&void 0!==G.skeleton){var M=C[G.skeleton];void 0===
M?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",G.skeleton):G.bind(M,G.bindMatrix)}})};t.setTexturePath=function(w){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(w)};return z}(Bk),pxa={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},pea={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,
MirroredRepeatWrapping:1002},qea={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};mZ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:mZ,isImageBitmapLoader:!0,setOptions:function(u){(this||p).options=u;return this||p},load:function(u,z,t,w){void 0===u&&(u="");void 0!==(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,G=RC.get(u);if(void 0!==
G)return C.manager.itemStart(u),setTimeout(function(){z&&z(G);C.manager.itemEnd(u)},0),G;t={};t.credentials="anonymous"===(this||p).crossOrigin?"same-origin":"include";fetch(u,t).then(function(M){return M.blob()}).then(function(M){return createImageBitmap(M,C.options)}).then(function(M){RC.add(u,M);z&&z(M);C.manager.itemEnd(u)}).catch(function(M){w&&w(M);C.manager.itemError(u);C.manager.itemEnd(u)});C.manager.itemStart(u)}});Object.assign(nZ.prototype,{moveTo:function(u,z){(this||p).currentPath=new ku;
(this||p).subPaths.push((this||p).currentPath);(this||p).currentPath.moveTo(u,z);return this||p},lineTo:function(u,z){(this||p).currentPath.lineTo(u,z);return this||p},quadraticCurveTo:function(u,z,t,w){(this||p).currentPath.quadraticCurveTo(u,z,t,w);return this||p},bezierCurveTo:function(u,z,t,w,C,G){(this||p).currentPath.bezierCurveTo(u,z,t,w,C,G);return this||p},splineThru:function(u){(this||p).currentPath.splineThru(u);return this||p},toShapes:function(u,z){function t(mb){for(var Kc=[],ic=0,Lc=
mb.length;ic<Lc;ic++){var vc=mb[ic],Yc=new rA;Yc.curves=vc.curves;Kc.push(Yc)}return Kc}function w(mb,Kc){for(var ic=Kc.length,Lc=!1,vc=ic-1,Yc=0;Yc<ic;vc=Yc++){var fd=Kc[vc],Zc=Kc[Yc],Rd=Zc.x-fd.x,ld=Zc.y-fd.y;if(Math.abs(ld)>Number.EPSILON){if(0>ld&&(fd=Kc[Yc],Rd=-Rd,Zc=Kc[vc],ld=-ld),!(mb.y<fd.y||mb.y>Zc.y))if(mb.y===fd.y){if(mb.x===fd.x)return!0}else{vc=ld*(mb.x-fd.x)-Rd*(mb.y-fd.y);if(0===vc)return!0;0>vc||(Lc=!Lc)}}else if(mb.y===fd.y&&(Zc.x<=mb.x&&mb.x<=fd.x||fd.x<=mb.x&&mb.x<=Zc.x))return!0}return Lc}
var C=Yx.isClockWise,G=(this||p).subPaths;if(0===G.length)return[];if(!0===z)return t(G);z=[];if(1===G.length){var M=G[0];var Q=new rA;Q.curves=M.curves;z.push(Q);return z}var X=!C(G[0].getPoints());X=u?!X:X;Q=[];var T=[],fa=[],oa=0;T[oa]=void 0;fa[oa]=[];for(var Ga=0,Xa=G.length;Ga<Xa;Ga++){M=G[Ga];var Wa=M.getPoints();var tb=C(Wa);(tb=u?!tb:tb)?(!X&&T[oa]&&oa++,T[oa]={s:new rA,p:Wa},T[oa].s.curves=M.curves,X&&oa++,fa[oa]=[]):fa[oa].push({h:M,p:Wa[0]})}if(!T[0])return t(G);if(1<T.length){u=!1;C=
[];G=0;for(M=T.length;G<M;G++)Q[G]=[];G=0;for(M=T.length;G<M;G++)for(tb=fa[G],X=0;X<tb.length;X++){oa=tb[X];Wa=!0;for(Ga=0;Ga<T.length;Ga++)w(oa.p,T[Ga].p)&&(G!==Ga&&C.push({froms:G,tos:Ga,hole:X}),Wa?(Wa=!1,Q[Ga].push(oa)):u=!0);Wa&&Q[G].push(oa)}0<C.length&&(u||(fa=Q))}C=0;for(G=T.length;C<G;C++)for(Q=T[C].s,z.push(Q),u=fa[C],M=0,tb=u.length;M<tb;M++)Q.holes.push(u[M].h);return z}});Object.assign(oZ.prototype,{isFont:!0,generateShapes:function(u,z){void 0===z&&(z=100);var t=[],w=z;z=(this||p).data;
var C=Array.from?Array.from(u):String(u).split("");w/=z.resolution;var G=(z.boundingBox.yMax-z.boundingBox.yMin+z.underlineThickness)*w;u=[];for(var M=0,Q=0,X=0;X<C.length;X++){var T=C[X];if("\n"===T)M=0,Q-=G;else{var fa=T;T=w;var oa=M,Ga=Q,Xa=z,Wa=Xa.glyphs[fa]||Xa.glyphs["?"];if(Wa){fa=new nZ;if(Wa.o){Xa=Wa._cachedOutline||(Wa._cachedOutline=Wa.o.split(" "));for(var tb=0,mb=Xa.length;tb<mb;)switch(Xa[tb++]){case "m":var Kc=Xa[tb++]*T+oa;var ic=Xa[tb++]*T+Ga;fa.moveTo(Kc,ic);break;case "l":Kc=Xa[tb++]*
T+oa;ic=Xa[tb++]*T+Ga;fa.lineTo(Kc,ic);break;case "q":var Lc=Xa[tb++]*T+oa;var vc=Xa[tb++]*T+Ga;var Yc=Xa[tb++]*T+oa;var fd=Xa[tb++]*T+Ga;fa.quadraticCurveTo(Yc,fd,Lc,vc);break;case "b":Lc=Xa[tb++]*T+oa,vc=Xa[tb++]*T+Ga,Yc=Xa[tb++]*T+oa,fd=Xa[tb++]*T+Ga,Kc=Xa[tb++]*T+oa,ic=Xa[tb++]*T+Ga,fa.bezierCurveTo(Yc,fd,Kc,ic,Lc,vc)}}T={offsetX:Wa.ha*T,path:fa}}else console.error('THREE.Font: character "'+fa+'" does not exists in font family '+Xa.familyName+"."),T=void 0;M+=T.offsetX;u.push(T.path)}}z=0;for(C=
u.length;z<C;z++)Array.prototype.push.apply(t,u[z].toShapes());return t}});pZ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:pZ,load:function(u,z,t,w){var C=this||p,G=new Js((this||p).manager);G.setPath((this||p).path);G.setRequestHeader((this||p).requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(M){try{var Q=JSON.parse(M)}catch(X){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Q=JSON.parse(M.substring(65,
M.length-2))}M=C.parse(Q);z&&z(M)},t,w)},parse:function(u){return new oZ(u)}});var XQ,m_={getContext:function(){void 0===XQ&&(XQ=new (window.AudioContext||window.webkitAudioContext));return XQ},setContext:function(u){XQ=u}};wQ.prototype=Object.assign(Object.create(Bk.prototype),{constructor:wQ,load:function(u,z,t,w){var C=this||p,G=new Js(C.manager);G.setResponseType("arraybuffer");G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(M){try{var Q=
M.slice(0);m_.getContext().decodeAudioData(Q,function(X){z(X)})}catch(X){w?w(X):console.error(X),C.manager.itemError(u)}},t,w)}});qZ.prototype=Object.assign(Object.create(Ks.prototype),{constructor:qZ,isHemisphereLightProbe:!0,copy:function(u){Ks.prototype.copy.call(this||p,u);return this||p},toJSON:function(u){return Ks.prototype.toJSON.call(this||p,u)}});rZ.prototype=Object.assign(Object.create(Ks.prototype),{constructor:rZ,isAmbientLightProbe:!0,copy:function(u){Ks.prototype.copy.call(this||p,
u);return this||p},toJSON:function(u){return Ks.prototype.toJSON.call(this||p,u)}});var rea=new Qi,sea=new Qi;Object.assign(oda.prototype,{update:function(u){var z=(this||p)._cache;if(z.focus!==u.focus||z.fov!==u.fov||z.aspect!==u.aspect*(this||p).aspect||z.near!==u.near||z.far!==u.far||z.zoom!==u.zoom||z.eyeSep!==(this||p).eyeSep){z.focus=u.focus;z.fov=u.fov;z.aspect=u.aspect*(this||p).aspect;z.near=u.near;z.far=u.far;z.zoom=u.zoom;z.eyeSep=(this||p).eyeSep;var t=u.projectionMatrix.clone(),w=z.eyeSep/
2,C=w*z.near/z.focus,G=z.near*Math.tan(Kh.DEG2RAD*z.fov*.5)/z.zoom;sea.elements[12]=-w;rea.elements[12]=w;w=-G*z.aspect+C;var M=G*z.aspect+C;t.elements[0]=2*z.near/(M-w);t.elements[8]=(M+w)/(M-w);(this||p).cameraL.projectionMatrix.copy(t);w=-G*z.aspect-C;M=G*z.aspect-C;t.elements[0]=2*z.near/(M-w);t.elements[8]=(M+w)/(M-w);(this||p).cameraR.projectionMatrix.copy(t)}(this||p).cameraL.matrixWorld.copy(u.matrixWorld).multiply(sea);(this||p).cameraR.matrixWorld.copy(u.matrixWorld).multiply(rea)}});var tea=
function(){function u(t){(this||p).autoStart=void 0!==t?t:!0;(this||p).startTime=0;(this||p).oldTime=0;(this||p).elapsedTime=0;(this||p).running=!1}var z=u.prototype;z.start=function(){(this||p).startTime=pda();(this||p).oldTime=(this||p).startTime;(this||p).elapsedTime=0;(this||p).running=!0};z.stop=function(){this.getElapsedTime();(this||p).running=!1;(this||p).autoStart=!1};z.getElapsedTime=function(){this.getDelta();return(this||p).elapsedTime};z.getDelta=function(){var t=0;if((this||p).autoStart&&
!(this||p).running)return this.start(),0;if((this||p).running){var w=pda();t=(w-(this||p).oldTime)/1E3;(this||p).oldTime=w;(this||p).elapsedTime+=t}return t};return u}(),SC=new kc,uea=new So,rxa=new kc,TC=new kc,sxa=function(u){function z(){var w=u.call(this||p)||this||p;w.type="AudioListener";w.context=m_.getContext();w.gain=w.context.createGain();w.gain.connect(w.context.destination);w.filter=null;w.timeDelta=0;w._clock=new tea;return w}f(z,u);var t=z.prototype;t.getInput=function(){return(this||
p).gain};t.removeFilter=function(){null!==(this||p).filter&&((this||p).gain.disconnect((this||p).filter),(this||p).filter.disconnect((this||p).context.destination),(this||p).gain.connect((this||p).context.destination),(this||p).filter=null);return this||p};t.getFilter=function(){return(this||p).filter};t.setFilter=function(w){null!==(this||p).filter?((this||p).gain.disconnect((this||p).filter),(this||p).filter.disconnect((this||p).context.destination)):(this||p).gain.disconnect((this||p).context.destination);
(this||p).filter=w;(this||p).gain.connect((this||p).filter);(this||p).filter.connect((this||p).context.destination);return this||p};t.getMasterVolume=function(){return(this||p).gain.gain.value};t.setMasterVolume=function(w){(this||p).gain.gain.setTargetAtTime(w,(this||p).context.currentTime,.01);return this||p};t.updateMatrixWorld=function(w){u.prototype.updateMatrixWorld.call(this||p,w);w=(this||p).context.listener;var C=(this||p).up;(this||p).timeDelta=(this||p)._clock.getDelta();(this||p).matrixWorld.decompose(SC,
uea,rxa);TC.set(0,0,-1).applyQuaternion(uea);if(w.positionX){var G=(this||p).context.currentTime+(this||p).timeDelta;w.positionX.linearRampToValueAtTime(SC.x,G);w.positionY.linearRampToValueAtTime(SC.y,G);w.positionZ.linearRampToValueAtTime(SC.z,G);w.forwardX.linearRampToValueAtTime(TC.x,G);w.forwardY.linearRampToValueAtTime(TC.y,G);w.forwardZ.linearRampToValueAtTime(TC.z,G);w.upX.linearRampToValueAtTime(C.x,G);w.upY.linearRampToValueAtTime(C.y,G);w.upZ.linearRampToValueAtTime(C.z,G)}else w.setPosition(SC.x,
SC.y,SC.z),w.setOrientation(TC.x,TC.y,TC.z,C.x,C.y,C.z)};return z}(F),n_=function(u){function z(w){var C=u.call(this||p)||this||p;C.type="Audio";C.listener=w;C.context=w.context;C.gain=C.context.createGain();C.gain.connect(w.getInput());C.autoplay=!1;C.buffer=null;C.detune=0;C.loop=!1;C.loopStart=0;C.loopEnd=0;C.offset=0;C.duration=void 0;C.playbackRate=1;C.isPlaying=!1;C.hasPlaybackControl=!0;C.source=null;C.sourceType="empty";C._startedAt=0;C._progress=0;C._connected=!1;C.filters=[];return C}f(z,
u);var t=z.prototype;t.getOutput=function(){return(this||p).gain};t.setNodeSource=function(w){(this||p).hasPlaybackControl=!1;(this||p).sourceType="audioNode";(this||p).source=w;this.connect();return this||p};t.setMediaElementSource=function(w){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaNode";(this||p).source=(this||p).context.createMediaElementSource(w);this.connect();return this||p};t.setMediaStreamSource=function(w){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaStreamNode";
(this||p).source=(this||p).context.createMediaStreamSource(w);this.connect();return this||p};t.setBuffer=function(w){(this||p).buffer=w;(this||p).sourceType="buffer";(this||p).autoplay&&this.play();return this||p};t.play=function(w){void 0===w&&(w=0);if(!0===(this||p).isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return(this||p)._startedAt=(this||p).context.currentTime+
w,w=(this||p).context.createBufferSource(),w.buffer=(this||p).buffer,w.loop=(this||p).loop,w.loopStart=(this||p).loopStart,w.loopEnd=(this||p).loopEnd,w.onended=(this||p).onEnded.bind(this||p),w.start((this||p)._startedAt,(this||p)._progress+(this||p).offset,(this||p).duration),(this||p).isPlaying=!0,(this||p).source=w,this.setDetune((this||p).detune),this.setPlaybackRate((this||p).playbackRate),this.connect()};t.pause=function(){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return!0===(this||p).isPlaying&&((this||p)._progress+=Math.max((this||p).context.currentTime-(this||p)._startedAt,0)*(this||p).playbackRate,!0===(this||p).loop&&((this||p)._progress%=(this||p).duration||(this||p).buffer.duration),(this||p).source.stop(),(this||p).source.onended=null,(this||p).isPlaying=!1),this||p};t.stop=function(){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return(this||p)._progress=0,(this||p).source.stop(),(this||
p).source.onended=null,(this||p).isPlaying=!1,this||p};t.connect=function(){if(0<(this||p).filters.length){(this||p).source.connect((this||p).filters[0]);for(var w=1,C=(this||p).filters.length;w<C;w++)(this||p).filters[w-1].connect((this||p).filters[w]);(this||p).filters[(this||p).filters.length-1].connect(this.getOutput())}else(this||p).source.connect(this.getOutput());(this||p)._connected=!0;return this||p};t.disconnect=function(){if(0<(this||p).filters.length){(this||p).source.disconnect((this||
p).filters[0]);for(var w=1,C=(this||p).filters.length;w<C;w++)(this||p).filters[w-1].disconnect((this||p).filters[w]);(this||p).filters[(this||p).filters.length-1].disconnect(this.getOutput())}else(this||p).source.disconnect(this.getOutput());(this||p)._connected=!1;return this||p};t.getFilters=function(){return(this||p).filters};t.setFilters=function(w){w||(w=[]);!0===(this||p)._connected?(this.disconnect(),(this||p).filters=w.slice(),this.connect()):(this||p).filters=w.slice();return this||p};t.setDetune=
function(w){(this||p).detune=w;if(void 0!==(this||p).source.detune)return!0===(this||p).isPlaying&&(this||p).source.detune.setTargetAtTime((this||p).detune,(this||p).context.currentTime,.01),this||p};t.getDetune=function(){return(this||p).detune};t.getFilter=function(){return this.getFilters()[0]};t.setFilter=function(w){return this.setFilters(w?[w]:[])};t.setPlaybackRate=function(w){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return(this||
p).playbackRate=w,!0===(this||p).isPlaying&&(this||p).source.playbackRate.setTargetAtTime((this||p).playbackRate,(this||p).context.currentTime,.01),this||p};t.getPlaybackRate=function(){return(this||p).playbackRate};t.onEnded=function(){(this||p).isPlaying=!1};t.getLoop=function(){return!1===(this||p).hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):(this||p).loop};t.setLoop=function(w){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p).loop=w,!0===(this||p).isPlaying&&((this||p).source.loop=(this||p).loop),this||p};t.setLoopStart=function(w){(this||p).loopStart=w;return this||p};t.setLoopEnd=function(w){(this||p).loopEnd=w;return this||p};t.getVolume=function(){return(this||p).gain.gain.value};t.setVolume=function(w){(this||p).gain.gain.setTargetAtTime(w,(this||p).context.currentTime,.01);return this||p};return z}(F),UC=new kc,vea=new So,txa=new kc,VC=new kc,uxa=function(u){function z(w){w=u.call(this||p,w)||
this||p;w.panner=w.context.createPanner();w.panner.panningModel="HRTF";w.panner.connect(w.gain);return w}f(z,u);var t=z.prototype;t.getOutput=function(){return(this||p).panner};t.getRefDistance=function(){return(this||p).panner.refDistance};t.setRefDistance=function(w){(this||p).panner.refDistance=w;return this||p};t.getRolloffFactor=function(){return(this||p).panner.rolloffFactor};t.setRolloffFactor=function(w){(this||p).panner.rolloffFactor=w;return this||p};t.getDistanceModel=function(){return(this||
p).panner.distanceModel};t.setDistanceModel=function(w){(this||p).panner.distanceModel=w;return this||p};t.getMaxDistance=function(){return(this||p).panner.maxDistance};t.setMaxDistance=function(w){(this||p).panner.maxDistance=w;return this||p};t.setDirectionalCone=function(w,C,G){(this||p).panner.coneInnerAngle=w;(this||p).panner.coneOuterAngle=C;(this||p).panner.coneOuterGain=G;return this||p};t.updateMatrixWorld=function(w){u.prototype.updateMatrixWorld.call(this||p,w);if(!0!==(this||p).hasPlaybackControl||
!1!==(this||p).isPlaying)if((this||p).matrixWorld.decompose(UC,vea,txa),VC.set(0,0,1).applyQuaternion(vea),w=(this||p).panner,w.positionX){var C=(this||p).context.currentTime+(this||p).listener.timeDelta;w.positionX.linearRampToValueAtTime(UC.x,C);w.positionY.linearRampToValueAtTime(UC.y,C);w.positionZ.linearRampToValueAtTime(UC.z,C);w.orientationX.linearRampToValueAtTime(VC.x,C);w.orientationY.linearRampToValueAtTime(VC.y,C);w.orientationZ.linearRampToValueAtTime(VC.z,C)}else w.setPosition(UC.x,
UC.y,UC.z),w.setOrientation(VC.x,VC.y,VC.z)};return z}(n_),wea=function(){function u(t,w){void 0===w&&(w=2048);(this||p).analyser=t.context.createAnalyser();(this||p).analyser.fftSize=w;(this||p).data=new Uint8Array((this||p).analyser.frequencyBinCount);t.getOutput().connect((this||p).analyser)}var z=u.prototype;z.getFrequencyData=function(){(this||p).analyser.getByteFrequencyData((this||p).data);return(this||p).data};z.getAverageFrequency=function(){for(var t=0,w=this.getFrequencyData(),C=0;C<w.length;C++)t+=
w[C];return t/w.length};return u}();Object.assign(sZ.prototype,{accumulate:function(u,z){var t=(this||p).buffer,w=(this||p).valueSize;u=u*w+w;var C=(this||p).cumulativeWeight;if(0===C){for(C=0;C!==w;++C)t[u+C]=t[C];C=z}else C+=z,this._mixBufferRegion(t,u,0,z/C,w);(this||p).cumulativeWeight=C},accumulateAdditive:function(u){var z=(this||p).buffer,t=(this||p).valueSize,w=t*(this||p)._addIndex;0===(this||p).cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(z,w,0,u,t);(this||
p).cumulativeWeightAdditive+=u},apply:function(u){var z=(this||p).valueSize,t=(this||p).buffer;u=u*z+z;var w=(this||p).cumulativeWeight,C=(this||p).cumulativeWeightAdditive,G=(this||p).binding;(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0;1>w&&this._mixBufferRegion(t,u,z*(this||p)._origIndex,1-w,z);0<C&&this._mixBufferRegionAdditive(t,u,(this||p)._addIndex*z,1,z);w=z;for(C=z+z;w!==C;++w)if(t[w]!==t[w+z]){G.setValue(t,u);break}},saveOriginalState:function(){var u=(this||p).buffer,
z=(this||p).valueSize,t=z*(this||p)._origIndex;(this||p).binding.getValue(u,t);for(var w=z;w!==t;++w)u[w]=u[t+w%z];this._setIdentity();(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0},restoreOriginalState:function(){(this||p).binding.setValue((this||p).buffer,3*(this||p).valueSize)},_setAdditiveIdentityNumeric:function(){for(var u=(this||p)._addIndex*(this||p).valueSize,z=u+(this||p).valueSize;u<z;u++)(this||p).buffer[u]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric();
(this||p).buffer[(this||p)._addIndex*(this||p).valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var u=(this||p)._origIndex*(this||p).valueSize,z=(this||p)._addIndex*(this||p).valueSize,t=0;t<(this||p).valueSize;t++)(this||p).buffer[z+t]=(this||p).buffer[u+t]},_select:function(u,z,t,w,C){if(.5<=w)for(w=0;w!==C;++w)u[z+w]=u[t+w]},_slerp:function(u,z,t,w){So.slerpFlat(u,z,u,z,u,t,w)},_slerpAdditive:function(u,z,t,w,C){C*=(this||p)._workIndex;So.multiplyQuaternionsFlat(u,C,u,z,u,t);So.slerpFlat(u,
z,u,z,u,C,w)},_lerp:function(u,z,t,w,C){for(var G=1-w,M=0;M!==C;++M){var Q=z+M;u[Q]=u[Q]*G+u[t+M]*w}},_lerpAdditive:function(u,z,t,w,C){for(var G=0;G!==C;++G){var M=z+G;u[M]+=u[t+G]*w}}});var vxa=/[\[\]\.:\/]/g,wxa="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",xxa=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),yxa=/(WCOD+)?/.source.replace("WCOD",wxa),zxa=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Axa=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),
Bxa=new RegExp("^"+xxa+yxa+zxa+Axa+"$"),Cxa=["material","materials","bones"];Object.assign(qda.prototype,{getValue:function(u,z){this.bind();var t=(this||p)._bindings[(this||p)._targetGroup.nCachedObjects_];void 0!==t&&t.getValue(u,z)},setValue:function(u,z){for(var t=(this||p)._bindings,w=(this||p)._targetGroup.nCachedObjects_,C=t.length;w!==C;++w)t[w].setValue(u,z)},bind:function(){for(var u=(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].bind()},unbind:function(){for(var u=
(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].unbind()}});Object.assign(Uo,{Composite:qda,create:function(u,z,t){return u&&u.isAnimationObjectGroup?new Uo.Composite(u,z,t):new Uo(u,z,t)},sanitizeNodeName:function(u){return u.replace(/\s/g,"_").replace(vxa,"")},parseTrackName:function(u){var z=Bxa.exec(u);if(!z)throw Error("PropertyBinding: Cannot parse trackName: "+u);z={nodeName:z[2],objectName:z[3],objectIndex:z[4],propertyName:z[5],propertyIndex:z[6]};var t=
z.nodeName&&z.nodeName.lastIndexOf(".");if(void 0!==t&&-1!==t){var w=z.nodeName.substring(t+1);-1!==Cxa.indexOf(w)&&(z.nodeName=z.nodeName.substring(0,t),z.objectName=w)}if(null===z.propertyName||0===z.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+u);return z},findNode:function(u,z){if(!z||""===z||"."===z||-1===z||z===u.name||z===u.uuid)return u;if(u.skeleton){var t=u.skeleton.getBoneByName(z);if(void 0!==t)return t}return u.children&&(u=function G(C){for(var M=
0;M<C.length;M++){var Q=C[M];if(Q.name===z||Q.uuid===z||(Q=G(Q.children)))return Q}return null}(u.children))?u:null}});Object.assign(Uo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(u,z){u[z]=(this||p).node[(this||p).propertyName]},function(u,z){for(var t=(this||p).resolvedProperty,w=0,C=t.length;w!==C;++w)u[z++]=
t[w]},function(u,z){u[z]=(this||p).resolvedProperty[(this||p).propertyIndex]},function(u,z){(this||p).resolvedProperty.toArray(u,z)}],SetterByBindingTypeAndVersioning:[[function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z]},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){for(var t=(this||p).resolvedProperty,
w=0,C=t.length;w!==C;++w)t[w]=u[z++]},function(u,z){for(var t=(this||p).resolvedProperty,w=0,C=t.length;w!==C;++w)t[w]=u[z++];(this||p).targetObject.needsUpdate=!0},function(u,z){for(var t=(this||p).resolvedProperty,w=0,C=t.length;w!==C;++w)t[w]=u[z++];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z]},function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||
p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||p).resolvedProperty.fromArray(u,z)},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(u,z){this.bind();this.getValue(u,z)},setValue:function(u,z){this.bind();this.setValue(u,z)},bind:function(){var u=(this||
p).node,z=(this||p).parsedPath,t=z.objectName,w=z.propertyName,C=z.propertyIndex;u||(u=Uo.findNode((this||p).rootNode,z.nodeName)||(this||p).rootNode,(this||p).node=u);(this||p).getValue=(this||p)._getValue_unavailable;(this||p).setValue=(this||p)._setValue_unavailable;if(u){if(t){var G=z.objectIndex;switch(t){case "materials":if(!u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this||p);return}if(!u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
this||p);return}u=u.material.materials;break;case "bones":if(!u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this||p);return}u=u.skeleton.bones;for(t=0;t<u.length;t++)if(u[t].name===G){G=t;break}break;default:if(void 0===u[t]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this||p);return}u=u[t]}if(void 0!==G){if(void 0===u[G]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
this||p,u);return}u=u[G]}}G=u[w];if(void 0===G)console.error("THREE.PropertyBinding: Trying to update property for track: "+z.nodeName+"."+w+" but it wasn't found.",u);else{z=(this||p).Versioning.None;(this||p).targetObject=u;void 0!==u.needsUpdate?z=(this||p).Versioning.NeedsUpdate:void 0!==u.matrixWorldNeedsUpdate&&(z=(this||p).Versioning.MatrixWorldNeedsUpdate);t=(this||p).BindingType.Direct;if(void 0!==C){if("morphTargetInfluences"===w){if(!u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
this||p);return}if(u.geometry.isBufferGeometry){if(!u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this||p);return}void 0!==u.morphTargetDictionary[C]&&(C=u.morphTargetDictionary[C])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this||p);return}}t=(this||p).BindingType.ArrayElement;(this||p).resolvedProperty=
G;(this||p).propertyIndex=C}else void 0!==G.fromArray&&void 0!==G.toArray?(t=(this||p).BindingType.HasFromToArray,(this||p).resolvedProperty=G):Array.isArray(G)?(t=(this||p).BindingType.EntireArray,(this||p).resolvedProperty=G):(this||p).propertyName=w;(this||p).getValue=(this||p).GetterByBindingType[t];(this||p).setValue=(this||p).SetterByBindingTypeAndVersioning[t][z]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+(this||p).path+" but it wasn't found.")},unbind:function(){(this||
p).node=null;(this||p).getValue=(this||p)._getValue_unbound;(this||p).setValue=(this||p)._setValue_unbound}});Object.assign(Uo.prototype,{_getValue_unbound:Uo.prototype.getValue,_setValue_unbound:Uo.prototype.setValue});Object.assign(rda.prototype,{isAnimationObjectGroup:!0,add:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._paths,w=(this||p)._parsedPaths,C=(this||p)._bindings,G=C.length,M=void 0,Q=u.length,X=(this||p).nCachedObjects_,T=0,fa=arguments.length;T!==fa;++T){var oa=
arguments[T],Ga=oa.uuid,Xa=z[Ga];if(void 0===Xa){Xa=Q++;z[Ga]=Xa;u.push(oa);Xa=0;for(var Wa=G;Xa!==Wa;++Xa)C[Xa].push(new Uo(oa,t[Xa],w[Xa]))}else if(Xa<X){M=u[Xa];Wa=--X;var tb=u[Wa];z[tb.uuid]=Xa;u[Xa]=tb;z[Ga]=Wa;u[Wa]=oa;Ga=0;for(tb=G;Ga!==tb;++Ga){var mb=C[Ga],Kc=mb[Xa];mb[Xa]=mb[Wa];void 0===Kc&&(Kc=new Uo(oa,t[Ga],w[Ga]));mb[Wa]=Kc}}else u[Xa]!==M&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}(this||
p).nCachedObjects_=X},remove:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,w=t.length,C=(this||p).nCachedObjects_,G=0,M=arguments.length;G!==M;++G){var Q=arguments[G],X=Q.uuid,T=z[X];if(void 0!==T&&T>=C){var fa=C++,oa=u[fa];z[oa.uuid]=T;u[T]=oa;z[X]=fa;u[fa]=Q;Q=0;for(X=w;Q!==X;++Q){oa=t[Q];var Ga=oa[T];oa[T]=oa[fa];oa[fa]=Ga}}}(this||p).nCachedObjects_=C},uncache:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,w=
t.length,C=(this||p).nCachedObjects_,G=u.length,M=0,Q=arguments.length;M!==Q;++M){var X=arguments[M].uuid,T=z[X];if(void 0!==T)if(delete z[X],T<C){X=--C;var fa=u[X],oa=--G,Ga=u[oa];z[fa.uuid]=T;u[T]=fa;z[Ga.uuid]=X;u[X]=Ga;u.pop();fa=0;for(Ga=w;fa!==Ga;++fa){var Xa=t[fa],Wa=Xa[oa];Xa[T]=Xa[X];Xa[X]=Wa;Xa.pop()}}else for(X=--G,oa=u[X],0<X&&(z[oa.uuid]=T),u[T]=oa,u.pop(),oa=0,fa=w;oa!==fa;++oa)Ga=t[oa],Ga[T]=Ga[X],Ga.pop()}(this||p).nCachedObjects_=C},subscribe_:function(u,z){var t=(this||p)._bindingsIndicesByPath,
w=t[u],C=(this||p)._bindings;if(void 0!==w)return C[w];var G=(this||p)._paths,M=(this||p)._parsedPaths,Q=(this||p)._objects,X=(this||p).nCachedObjects_,T=Array(Q.length);w=C.length;t[u]=w;G.push(u);M.push(z);C.push(T);t=X;for(w=Q.length;t!==w;++t)T[t]=new Uo(Q[t],u,z);return T},unsubscribe_:function(u){var z=(this||p)._bindingsIndicesByPath,t=z[u];if(void 0!==t){var w=(this||p)._paths,C=(this||p)._parsedPaths,G=(this||p)._bindings,M=G.length-1,Q=G[M];z[u[M]]=t;G[t]=Q;G.pop();C[t]=C[M];C.pop();w[t]=
w[M];w.pop()}}});var Dxa=function(){function u(t,w,C,G){void 0===C&&(C=null);void 0===G&&(G=w.blendMode);(this||p)._mixer=t;(this||p)._clip=w;(this||p)._localRoot=C;(this||p).blendMode=G;t=w.tracks;w=t.length;C=Array(w);G={endingStart:2400,endingEnd:2400};for(var M=0;M!==w;++M){var Q=t[M].createInterpolant(null);C[M]=Q;Q.settings=G}(this||p)._interpolantSettings=G;(this||p)._interpolants=C;(this||p)._propertyBindings=Array(w);(this||p)._cacheIndex=null;(this||p)._byClipCacheIndex=null;(this||p)._timeScaleInterpolant=
null;(this||p)._weightInterpolant=null;(this||p).loop=2201;(this||p)._loopCount=-1;(this||p)._startTime=null;(this||p).time=0;(this||p).timeScale=1;(this||p)._effectiveTimeScale=1;(this||p).weight=1;(this||p)._effectiveWeight=1;(this||p).repetitions=Infinity;(this||p).paused=!1;(this||p).enabled=!0;(this||p).clampWhenFinished=!1;(this||p).zeroSlopeAtStart=!0;(this||p).zeroSlopeAtEnd=!0}var z=u.prototype;z.play=function(){(this||p)._mixer._activateAction(this||p);return this||p};z.stop=function(){(this||
p)._mixer._deactivateAction(this||p);return this.reset()};z.reset=function(){(this||p).paused=!1;(this||p).enabled=!0;(this||p).time=0;(this||p)._loopCount=-1;(this||p)._startTime=null;return this.stopFading().stopWarping()};z.isRunning=function(){return(this||p).enabled&&!(this||p).paused&&0!==(this||p).timeScale&&null===(this||p)._startTime&&(this||p)._mixer._isActiveAction(this||p)};z.isScheduled=function(){return(this||p)._mixer._isActiveAction(this||p)};z.startAt=function(t){(this||p)._startTime=
t;return this||p};z.setLoop=function(t,w){(this||p).loop=t;(this||p).repetitions=w;return this||p};z.setEffectiveWeight=function(t){(this||p).weight=t;(this||p)._effectiveWeight=(this||p).enabled?t:0;return this.stopFading()};z.getEffectiveWeight=function(){return(this||p)._effectiveWeight};z.fadeIn=function(t){return this._scheduleFading(t,0,1)};z.fadeOut=function(t){return this._scheduleFading(t,1,0)};z.crossFadeFrom=function(t,w,C){t.fadeOut(w);this.fadeIn(w);if(C){C=(this||p)._clip.duration;var G=
t._clip.duration,M=C/G;t.warp(1,G/C,w);this.warp(M,1,w)}return this||p};z.crossFadeTo=function(t,w,C){return t.crossFadeFrom(this||p,w,C)};z.stopFading=function(){var t=(this||p)._weightInterpolant;null!==t&&((this||p)._weightInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.setEffectiveTimeScale=function(t){(this||p).timeScale=t;(this||p)._effectiveTimeScale=(this||p).paused?0:t;return this.stopWarping()};z.getEffectiveTimeScale=function(){return(this||p)._effectiveTimeScale};
z.setDuration=function(t){(this||p).timeScale=(this||p)._clip.duration/t;return this.stopWarping()};z.syncWith=function(t){(this||p).time=t.time;(this||p).timeScale=t.timeScale;return this.stopWarping()};z.halt=function(t){return this.warp((this||p)._effectiveTimeScale,0,t)};z.warp=function(t,w,C){var G=(this||p)._mixer,M=G.time,Q=(this||p).timeScale,X=(this||p)._timeScaleInterpolant;null===X&&(X=G._lendControlInterpolant(),(this||p)._timeScaleInterpolant=X);G=X.parameterPositions;X=X.sampleValues;
G[0]=M;G[1]=M+C;X[0]=t/Q;X[1]=w/Q;return this||p};z.stopWarping=function(){var t=(this||p)._timeScaleInterpolant;null!==t&&((this||p)._timeScaleInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.getMixer=function(){return(this||p)._mixer};z.getClip=function(){return(this||p)._clip};z.getRoot=function(){return(this||p)._localRoot||(this||p)._mixer._root};z._update=function(t,w,C,G){if((this||p).enabled){var M=(this||p)._startTime;if(null!==M){w=(t-M)*C;if(0>w||0===
C)return;(this||p)._startTime=null;w*=C}w*=this._updateTimeScale(t);C=this._updateTime(w);t=this._updateWeight(t);if(0<t)switch(w=(this||p)._interpolants,M=(this||p)._propertyBindings,(this||p).blendMode){case 2501:G=0;for(var Q=w.length;G!==Q;++G)w[G].evaluate(C),M[G].accumulateAdditive(t);break;default:Q=0;for(var X=w.length;Q!==X;++Q)w[Q].evaluate(C),M[Q].accumulate(G,t)}}else this._updateWeight(t)};z._updateWeight=function(t){var w=0;if((this||p).enabled){w=(this||p).weight;var C=(this||p)._weightInterpolant;
if(null!==C){var G=C.evaluate(t)[0];w*=G;t>C.parameterPositions[1]&&(this.stopFading(),0===G&&((this||p).enabled=!1))}}return(this||p)._effectiveWeight=w};z._updateTimeScale=function(t){var w=0;if(!(this||p).paused){w=(this||p).timeScale;var C=(this||p)._timeScaleInterpolant;if(null!==C){var G=C.evaluate(t)[0];w*=G;t>C.parameterPositions[1]&&(this.stopWarping(),0===w?(this||p).paused=!0:(this||p).timeScale=w)}}return(this||p)._effectiveTimeScale=w};z._updateTime=function(t){var w=(this||p)._clip.duration,
C=(this||p).loop,G=(this||p).time+t,M=(this||p)._loopCount,Q=2202===C;if(0===t)return-1===M?G:Q&&1===(M&1)?w-G:G;if(2200===C)a:{if(-1===M&&((this||p)._loopCount=0,this._setEndings(!0,!0,!1)),G>=w)G=w;else if(0>G)G=0;else{(this||p).time=G;break a}(this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1;(this||p).time=G;(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0>t?-1:1})}else{-1===M&&(0<=t?(M=0,this._setEndings(!0,0===(this||p).repetitions,Q)):this._setEndings(0===
(this||p).repetitions,!0,Q));if(G>=w||0>G){C=Math.floor(G/w);G-=w*C;M+=Math.abs(C);var X=(this||p).repetitions-M;0>=X?((this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1,G=0<t?w:0,(this||p).time=G,(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0<t?1:-1})):(1===X?(t=0>t,this._setEndings(t,!t,Q)):this._setEndings(!1,!1,Q),(this||p)._loopCount=M,(this||p).time=G,(this||p)._mixer.dispatchEvent({type:"loop",action:this||p,loopDelta:C}))}else(this||p).time=G;
if(Q&&1===(M&1))return w-G}return G};z._setEndings=function(t,w,C){var G=(this||p)._interpolantSettings;C?(G.endingStart=2401,G.endingEnd=2401):(G.endingStart=t?(this||p).zeroSlopeAtStart?2401:2400:2402,G.endingEnd=w?(this||p).zeroSlopeAtEnd?2401:2400:2402)};z._scheduleFading=function(t,w,C){var G=(this||p)._mixer,M=G.time,Q=(this||p)._weightInterpolant;null===Q&&(Q=G._lendControlInterpolant(),(this||p)._weightInterpolant=Q);G=Q.parameterPositions;Q=Q.sampleValues;G[0]=M;Q[0]=w;G[1]=M+t;Q[1]=C;return this||
p};return u}();tZ.prototype=Object.assign(Object.create(d.prototype),{constructor:tZ,_bindAction:function(u,z){var t=u._localRoot||(this||p)._root,w=u._clip.tracks,C=w.length,G=u._propertyBindings;u=u._interpolants;var M=t.uuid,Q=(this||p)._bindingsByRootAndName,X=Q[M];void 0===X&&(X={},Q[M]=X);for(Q=0;Q!==C;++Q){var T=w[Q],fa=T.name,oa=X[fa];if(void 0===oa){oa=G[Q];if(void 0!==oa){null===oa._cacheIndex&&(++oa.referenceCount,this._addInactiveBinding(oa,M,fa));continue}oa=new sZ(Uo.create(t,fa,z&&
z._propertyBindings[Q].binding.parsedPath),T.ValueTypeName,T.getValueSize());++oa.referenceCount;this._addInactiveBinding(oa,M,fa)}G[Q]=oa;u[Q].resultBuffer=oa.buffer}},_activateAction:function(u){if(!this._isActiveAction(u)){if(null===u._cacheIndex){var z=(u._localRoot||(this||p)._root).uuid,t=u._clip.uuid,w=(this||p)._actionsByClip[t];this._bindAction(u,w&&w.knownActions[0]);this._addInactiveAction(u,t,z)}z=u._propertyBindings;t=0;for(w=z.length;t!==w;++t){var C=z[t];0===C.useCount++&&(this._lendBinding(C),
C.saveOriginalState())}this._lendAction(u)}},_deactivateAction:function(u){if(this._isActiveAction(u)){for(var z=u._propertyBindings,t=0,w=z.length;t!==w;++t){var C=z[t];0===--C.useCount&&(C.restoreOriginalState(),this._takeBackBinding(C))}this._takeBackAction(u)}},_initMemoryManager:function(){(this||p)._actions=[];(this||p)._nActiveActions=0;(this||p)._actionsByClip={};(this||p)._bindings=[];(this||p)._nActiveBindings=0;(this||p)._bindingsByRootAndName={};(this||p)._controlInterpolants=[];(this||
p)._nActiveControlInterpolants=0;var u=this||p;(this||p).stats={actions:{get total(){return u._actions.length},get inUse(){return u._nActiveActions}},bindings:{get total(){return u._bindings.length},get inUse(){return u._nActiveBindings}},controlInterpolants:{get total(){return u._controlInterpolants.length},get inUse(){return u._nActiveControlInterpolants}}}},_isActiveAction:function(u){u=u._cacheIndex;return null!==u&&u<(this||p)._nActiveActions},_addInactiveAction:function(u,z,t){var w=(this||
p)._actions,C=(this||p)._actionsByClip,G=C[z];void 0===G?(G={knownActions:[u],actionByRoot:{}},u._byClipCacheIndex=0,C[z]=G):(z=G.knownActions,u._byClipCacheIndex=z.length,z.push(u));u._cacheIndex=w.length;w.push(u);G.actionByRoot[t]=u},_removeInactiveAction:function(u){var z=(this||p)._actions,t=z[z.length-1],w=u._cacheIndex;t._cacheIndex=w;z[w]=t;z.pop();u._cacheIndex=null;z=u._clip.uuid;t=(this||p)._actionsByClip;w=t[z];var C=w.knownActions,G=C[C.length-1],M=u._byClipCacheIndex;G._byClipCacheIndex=
M;C[M]=G;C.pop();u._byClipCacheIndex=null;delete w.actionByRoot[(u._localRoot||(this||p)._root).uuid];0===C.length&&delete t[z];this._removeInactiveBindingsForAction(u)},_removeInactiveBindingsForAction:function(u){u=u._propertyBindings;for(var z=0,t=u.length;z!==t;++z){var w=u[z];0===--w.referenceCount&&this._removeInactiveBinding(w)}},_lendAction:function(u){var z=(this||p)._actions,t=u._cacheIndex,w=(this||p)._nActiveActions++,C=z[w];u._cacheIndex=w;z[w]=u;C._cacheIndex=t;z[t]=C},_takeBackAction:function(u){var z=
(this||p)._actions,t=u._cacheIndex,w=--(this||p)._nActiveActions,C=z[w];u._cacheIndex=w;z[w]=u;C._cacheIndex=t;z[t]=C},_addInactiveBinding:function(u,z,t){var w=(this||p)._bindingsByRootAndName,C=(this||p)._bindings,G=w[z];void 0===G&&(G={},w[z]=G);G[t]=u;u._cacheIndex=C.length;C.push(u)},_removeInactiveBinding:function(u){var z=(this||p)._bindings,t=u.binding,w=t.rootNode.uuid;t=t.path;var C=(this||p)._bindingsByRootAndName,G=C[w],M=z[z.length-1];u=u._cacheIndex;M._cacheIndex=u;z[u]=M;z.pop();delete G[t];
0===Object.keys(G).length&&delete C[w]},_lendBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,w=(this||p)._nActiveBindings++,C=z[w];u._cacheIndex=w;z[w]=u;C._cacheIndex=t;z[t]=C},_takeBackBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,w=--(this||p)._nActiveBindings,C=z[w];u._cacheIndex=w;z[w]=u;C._cacheIndex=t;z[t]=C},_lendControlInterpolant:function(){var u=(this||p)._controlInterpolants,z=(this||p)._nActiveControlInterpolants++,t=u[z];void 0===t&&(t=new vJ(new Float32Array(2),
new Float32Array(2),1,(this||p)._controlInterpolantsResultBuffer),t.__cacheIndex=z,u[z]=t);return t},_takeBackControlInterpolant:function(u){var z=(this||p)._controlInterpolants,t=u.__cacheIndex,w=--(this||p)._nActiveControlInterpolants,C=z[w];u.__cacheIndex=w;z[w]=u;C.__cacheIndex=t;z[t]=C},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(u,z,t){var w=z||(this||p)._root,C=w.uuid;w="string"===typeof u?xr.findByName(w,u):u;u=null!==w?w.uuid:u;var G=(this||p)._actionsByClip[u],
M=null;void 0===t&&(t=null!==w?w.blendMode:2500);if(void 0!==G){M=G.actionByRoot[C];if(void 0!==M&&M.blendMode===t)return M;M=G.knownActions[0];null===w&&(w=M._clip)}if(null===w)return null;z=new Dxa(this||p,w,z,t);this._bindAction(z,M);this._addInactiveAction(z,u,C);return z},existingAction:function(u,z){var t=z||(this||p)._root;z=t.uuid;t="string"===typeof u?xr.findByName(t,u):u;u=(this||p)._actionsByClip[t?t.uuid:u];return void 0!==u?u.actionByRoot[z]||null:null},stopAllAction:function(){for(var u=
(this||p)._actions,z=(this||p)._nActiveActions-1;0<=z;--z)u[z].stop();return this||p},update:function(u){u*=(this||p).timeScale;for(var z=(this||p)._actions,t=(this||p)._nActiveActions,w=(this||p).time+=u,C=Math.sign(u),G=(this||p)._accuIndex^=1,M=0;M!==t;++M)z[M]._update(w,u,C,G);u=(this||p)._bindings;z=(this||p)._nActiveBindings;for(t=0;t!==z;++t)u[t].apply(G);return this||p},setTime:function(u){for(var z=(this||p).time=0;z<(this||p)._actions.length;z++)(this||p)._actions[z].time=0;return this.update(u)},
getRoot:function(){return(this||p)._root},uncacheClip:function(u){var z=(this||p)._actions;u=u.uuid;var t=(this||p)._actionsByClip,w=t[u];if(void 0!==w){w=w.knownActions;for(var C=0,G=w.length;C!==G;++C){var M=w[C];this._deactivateAction(M);var Q=M._cacheIndex,X=z[z.length-1];M._cacheIndex=null;M._byClipCacheIndex=null;X._cacheIndex=Q;z[Q]=X;z.pop();this._removeInactiveBindingsForAction(M)}delete t[u]}},uncacheRoot:function(u){u=u.uuid;var z=(this||p)._actionsByClip;for(w in z){var t=z[w].actionByRoot[u];
void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}var w=(this||p)._bindingsByRootAndName[u];if(void 0!==w)for(var C in w)u=w[C],u.restoreOriginalState(),this._removeInactiveBinding(u)},uncacheAction:function(u,z){u=this.existingAction(u,z);null!==u&&(this._deactivateAction(u),this._removeInactiveAction(u))}});var xea=function(){function u(z,t){"string"===typeof z&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),z=t);(this||p).value=z}u.prototype.clone=function(){return new u(void 0===
(this||p).value.clone?(this||p).value:(this||p).value.clone())};return u}();uZ.prototype=Object.assign(Object.create(vr.prototype),{constructor:uZ,isInstancedInterleavedBuffer:!0,copy:function(u){vr.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},clone:function(u){u=vr.prototype.clone.call(this||p,u);u.meshPerAttribute=(this||p).meshPerAttribute;return u},toJSON:function(u){u=vr.prototype.toJSON.call(this||p,u);u.isInstancedInterleavedBuffer=!0;u.meshPerAttribute=
(this||p).meshPerAttribute;return u}});Object.defineProperty(vZ.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(vZ.prototype,{isGLBufferAttribute:!0,setBuffer:function(u){(this||p).buffer=u;return this||p},setType:function(u,z){(this||p).type=u;(this||p).elementSize=z;return this||p},setItemSize:function(u){(this||p).itemSize=u;return this||p},setCount:function(u){(this||p).count=u;return this||p}});Object.assign(wZ.prototype,{set:function(u,z){(this||p).ray.set(u,
z)},setFromCamera:function(u,z){z&&z.isPerspectiveCamera?((this||p).ray.origin.setFromMatrixPosition(z.matrixWorld),(this||p).ray.direction.set(u.x,u.y,.5).unproject(z).sub((this||p).ray.origin).normalize(),(this||p).camera=z):z&&z.isOrthographicCamera?((this||p).ray.origin.set(u.x,u.y,(z.near+z.far)/(z.near-z.far)).unproject(z),(this||p).ray.direction.set(0,0,-1).transformDirection(z.matrixWorld),(this||p).camera=z):console.error("THREE.Raycaster: Unsupported camera type: "+z.type)},intersectObject:function(u,
z,t){t=t||[];xZ(u,this||p,t,z);t.sort(sda);return t},intersectObjects:function(u,z,t){t=t||[];if(!1===Array.isArray(u))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),t;for(var w=0,C=u.length;w<C;w++)xZ(u[w],this||p,t,z);t.sort(sda);return t}});var Exa=function(){function u(t,w,C){void 0===t&&(t=1);void 0===w&&(w=0);void 0===C&&(C=0);(this||p).radius=t;(this||p).phi=w;(this||p).theta=C;return this||p}var z=u.prototype;z.set=function(t,w,C){(this||p).radius=t;(this||
p).phi=w;(this||p).theta=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;(this||p).phi=t.phi;(this||p).theta=t.theta;return this||p};z.makeSafe=function(){(this||p).phi=Math.max(1E-6,Math.min(Math.PI-1E-6,(this||p).phi));return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,w,C){(this||p).radius=Math.sqrt(t*t+w*w+C*C);0===(this||p).radius?((this||
p).theta=0,(this||p).phi=0):((this||p).theta=Math.atan2(t,C),(this||p).phi=Math.acos(Kh.clamp(w/(this||p).radius,-1,1)));return this||p};return u}(),Fxa=function(){function u(t,w,C){(this||p).radius=void 0!==t?t:1;(this||p).theta=void 0!==w?w:0;(this||p).y=void 0!==C?C:0;return this||p}var z=u.prototype;z.set=function(t,w,C){(this||p).radius=t;(this||p).theta=w;(this||p).y=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;
(this||p).theta=t.theta;(this||p).y=t.y;return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,w,C){(this||p).radius=Math.sqrt(t*t+C*C);(this||p).theta=Math.atan2(t,C);(this||p).y=w;return this||p};return u}(),yea=new Je,zea=function(){function u(t,w){Object.defineProperty(this||p,"isBox2",{value:!0});(this||p).min=void 0!==t?t:new Je(Infinity,Infinity);(this||p).max=void 0!==w?w:new Je(-Infinity,-Infinity)}var z=u.prototype;
z.set=function(t,w){(this||p).min.copy(t);(this||p).max.copy(w);return this||p};z.setFromPoints=function(t){this.makeEmpty();for(var w=0,C=t.length;w<C;w++)this.expandByPoint(t[w]);return this||p};z.setFromCenterAndSize=function(t,w){w=yea.copy(w).multiplyScalar(.5);(this||p).min.copy(t).sub(w);(this||p).max.copy(t).add(w);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=
function(){(this||p).min.x=(this||p).min.y=Infinity;(this||p).max.x=(this||p).max.y=-Infinity;return this||p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Je);return this.isEmpty()?t.set(0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),
t=new Je);return this.isEmpty()?t.set(0,0):t.subVectors((this||p).max,(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y?!1:!0};z.containsBox=function(t){return(this||
p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y};z.getParameter=function(t,w){void 0===w&&(console.warn("THREE.Box2: .getParameter() target is now required"),w=new Je);return w.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y?!1:!0};z.clampPoint=function(t,
w){void 0===w&&(console.warn("THREE.Box2: .clampPoint() target is now required"),w=new Je);return w.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return yea.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.intersect=function(t){(this||p).min.max(t.min);(this||p).max.min(t.max);return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};
z.equals=function(t){return t.min.equals((this||p).min)&&t.max.equals((this||p).max)};return u}(),Aea=new kc,YQ=new kc,Bea=function(){function u(t,w){(this||p).start=void 0!==t?t:new kc;(this||p).end=void 0!==w?w:new kc}var z=u.prototype;z.set=function(t,w){(this||p).start.copy(t);(this||p).end.copy(w);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).start.copy(t.start);(this||p).end.copy(t.end);return this||p};z.getCenter=function(t){void 0===
t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new kc);return t.addVectors((this||p).start,(this||p).end).multiplyScalar(.5)};z.delta=function(t){void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new kc);return t.subVectors((this||p).end,(this||p).start)};z.distanceSq=function(){return(this||p).start.distanceToSquared((this||p).end)};z.distance=function(){return(this||p).start.distanceTo((this||p).end)};z.at=function(t,w){void 0===w&&(console.warn("THREE.Line3: .at() target is now required"),
w=new kc);return this.delta(w).multiplyScalar(t).add((this||p).start)};z.closestPointToPointParameter=function(t,w){Aea.subVectors(t,(this||p).start);YQ.subVectors((this||p).end,(this||p).start);t=YQ.dot(YQ);t=YQ.dot(Aea)/t;w&&(t=Kh.clamp(t,0,1));return t};z.closestPointToPoint=function(t,w,C){t=this.closestPointToPointParameter(t,w);void 0===C&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),C=new kc);return this.delta(C).multiplyScalar(t).add((this||p).start)};z.applyMatrix4=
function(t){(this||p).start.applyMatrix4(t);(this||p).end.applyMatrix4(t);return this||p};z.equals=function(t){return t.start.equals((this||p).start)&&t.end.equals((this||p).end)};return u}();AJ.prototype=Object.create(F.prototype);AJ.prototype.constructor=AJ;AJ.prototype.isImmediateRenderObject=!0;var Cea=new kc,Gxa=function(u){function z(w,C){var G=u.call(this||p)||this||p;G.light=w;G.light.updateMatrixWorld();G.matrix=w.matrixWorld;G.matrixAutoUpdate=!1;G.color=C;w=new ob;C=[0,0,0,0,0,1,0,0,0,
1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var M=0,Q=1;32>M;M++,Q++){var X=M/32*Math.PI*2,T=Q/32*Math.PI*2;C.push(Math.cos(X),Math.sin(X),1,Math.cos(T),Math.sin(T),1)}w.setAttribute("position",new aa(C,3));C=new vl({fog:!1,toneMapped:!1});G.cone=new Dp(w,C);G.add(G.cone);G.update();return G}f(z,u);var t=z.prototype;t.dispose=function(){(this||p).cone.geometry.dispose();(this||p).cone.material.dispose()};t.update=function(){(this||p).light.updateMatrixWorld();var w=(this||p).light.distance?(this||
p).light.distance:1E3,C=w*Math.tan((this||p).light.angle);(this||p).cone.scale.set(C,C,w);Cea.setFromMatrixPosition((this||p).light.target.matrixWorld);(this||p).cone.lookAt(Cea);void 0!==(this||p).color?(this||p).cone.material.color.set((this||p).color):(this||p).cone.material.color.copy((this||p).light.color)};return z}(F),wA=new kc,ZQ=new Qi,o_=new Qi,Dea=function(u){function z(t){var w=tda(t);var C=new ob;for(var G=[],M=[],Q=new bg(0,0,1),X=new bg(0,1,0),T=0;T<w.length;T++){var fa=w[T];fa.parent&&
fa.parent.isBone&&(G.push(0,0,0),G.push(0,0,0),M.push(Q.r,Q.g,Q.b),M.push(X.r,X.g,X.b))}C.setAttribute("position",new aa(G,3));C.setAttribute("color",new aa(M,3));G=new vl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});C=u.call(this||p,C,G)||this||p;C.type="SkeletonHelper";C.isSkeletonHelper=!0;C.root=t;C.bones=w;C.matrix=t.matrixWorld;C.matrixAutoUpdate=!1;return C}f(z,u);z.prototype.updateMatrixWorld=function(t){var w=(this||p).bones,C=(this||p).geometry,G=C.getAttribute("position");
o_.copy((this||p).root.matrixWorld).invert();for(var M=0,Q=0;M<w.length;M++){var X=w[M];X.parent&&X.parent.isBone&&(ZQ.multiplyMatrices(o_,X.matrixWorld),wA.setFromMatrixPosition(ZQ),G.setXYZ(Q,wA.x,wA.y,wA.z),ZQ.multiplyMatrices(o_,X.parent.matrixWorld),wA.setFromMatrixPosition(ZQ),G.setXYZ(Q+1,wA.x,wA.y,wA.z),Q+=2)}C.getAttribute("position").needsUpdate=!0;u.prototype.updateMatrixWorld.call(this||p,t)};return z}(Dp),Hxa=function(u){function z(w,C,G){C=new VQ(C,4,2);var M=new Y({wireframe:!0,fog:!1,
toneMapped:!1});C=u.call(this||p,C,M)||this||p;C.light=w;C.light.updateMatrixWorld();C.color=G;C.type="PointLightHelper";C.matrix=C.light.matrixWorld;C.matrixAutoUpdate=!1;C.update();return C}f(z,u);var t=z.prototype;t.dispose=function(){(this||p).geometry.dispose();(this||p).material.dispose()};t.update=function(){void 0!==(this||p).color?(this||p).material.color.set((this||p).color):(this||p).material.color.copy((this||p).light.color)};return z}(pa),Ixa=new kc,Eea=new bg,Fea=new bg,Jxa=function(u){function z(w,
C,G){var M=u.call(this||p)||this||p;M.light=w;M.light.updateMatrixWorld();M.matrix=w.matrixWorld;M.matrixAutoUpdate=!1;M.color=G;w=new UQ(C);w.rotateY(.5*Math.PI);M.material=new Y({wireframe:!0,fog:!1,toneMapped:!1});void 0===M.color&&(M.material.vertexColors=!0);C=w.getAttribute("position");C=new Float32Array(3*C.count);w.setAttribute("color",new S(C,3));M.add(new pa(w,M.material));M.update();return M}f(z,u);var t=z.prototype;t.dispose=function(){(this||p).children[0].geometry.dispose();(this||p).children[0].material.dispose()};
t.update=function(){var w=(this||p).children[0];if(void 0!==(this||p).color)(this||p).material.color.set((this||p).color);else{var C=w.geometry.getAttribute("color");Eea.copy((this||p).light.color);Fea.copy((this||p).light.groundColor);for(var G=0,M=C.count;G<M;G++){var Q=G<M/2?Eea:Fea;C.setXYZ(G,Q.r,Q.g,Q.b)}C.needsUpdate=!0}w.lookAt(Ixa.setFromMatrixPosition((this||p).light.matrixWorld).negate())};return z}(F),Gea=function(u){function z(t,w,C,G){void 0===t&&(t=10);void 0===w&&(w=10);void 0===C&&
(C=4473924);void 0===G&&(G=8947848);C=new bg(C);G=new bg(G);var M=w/2,Q=t/w,X=t/2;t=[];for(var T=[],fa=0,oa=0,Ga=-X;fa<=w;fa++,Ga+=Q){t.push(-X,0,Ga,X,0,Ga);t.push(Ga,0,-X,Ga,0,X);var Xa=fa===M?C:G;Xa.toArray(T,oa);oa+=3;Xa.toArray(T,oa);oa+=3;Xa.toArray(T,oa);oa+=3;Xa.toArray(T,oa);oa+=3}w=new ob;w.setAttribute("position",new aa(t,3));w.setAttribute("color",new aa(T,3));C=new vl({vertexColors:!0,toneMapped:!1});w=u.call(this||p,w,C)||this||p;w.type="GridHelper";return w}f(z,u);return z}(Dp),Kxa=
function(u){function z(t,w,C,G,M,Q){void 0===t&&(t=10);void 0===w&&(w=16);void 0===C&&(C=8);void 0===G&&(G=64);void 0===M&&(M=4473924);void 0===Q&&(Q=8947848);M=new bg(M);Q=new bg(Q);var X=[];for(var T=[],fa=0;fa<=w;fa++){var oa=fa/w*2*Math.PI,Ga=Math.sin(oa)*t;oa=Math.cos(oa)*t;X.push(0,0,0);X.push(Ga,0,oa);Ga=fa&1?M:Q;T.push(Ga.r,Ga.g,Ga.b);T.push(Ga.r,Ga.g,Ga.b)}for(w=0;w<=C;w++)for(fa=w&1?M:Q,Ga=t-t/C*w,oa=0;oa<G;oa++){var Xa=oa/G*2*Math.PI,Wa=Math.sin(Xa)*Ga;Xa=Math.cos(Xa)*Ga;X.push(Wa,0,Xa);
T.push(fa.r,fa.g,fa.b);Xa=(oa+1)/G*2*Math.PI;Wa=Math.sin(Xa)*Ga;Xa=Math.cos(Xa)*Ga;X.push(Wa,0,Xa);T.push(fa.r,fa.g,fa.b)}t=new ob;t.setAttribute("position",new aa(X,3));t.setAttribute("color",new aa(T,3));X=new vl({vertexColors:!0,toneMapped:!1});X=u.call(this||p,t,X)||this||p;X.type="PolarGridHelper";return X}f(z,u);return z}(Dp),Hea=new kc,$Q=new kc,Iea=new kc,Lxa=function(u){function z(w,C,G){var M=u.call(this||p)||this||p;M.light=w;M.light.updateMatrixWorld();M.matrix=w.matrixWorld;M.matrixAutoUpdate=
!1;M.color=G;void 0===C&&(C=1);w=new ob;w.setAttribute("position",new aa([-C,C,0,C,C,0,C,-C,0,-C,-C,0,-C,C,0],3));C=new vl({fog:!1,toneMapped:!1});M.lightPlane=new Is(w,C);M.add(M.lightPlane);w=new ob;w.setAttribute("position",new aa([0,0,0,0,0,1],3));M.targetLine=new Is(w,C);M.add(M.targetLine);M.update();return M}f(z,u);var t=z.prototype;t.dispose=function(){(this||p).lightPlane.geometry.dispose();(this||p).lightPlane.material.dispose();(this||p).targetLine.geometry.dispose();(this||p).targetLine.material.dispose()};
t.update=function(){Hea.setFromMatrixPosition((this||p).light.matrixWorld);$Q.setFromMatrixPosition((this||p).light.target.matrixWorld);Iea.subVectors($Q,Hea);(this||p).lightPlane.lookAt($Q);void 0!==(this||p).color?((this||p).lightPlane.material.color.set((this||p).color),(this||p).targetLine.material.color.set((this||p).color)):((this||p).lightPlane.material.color.copy((this||p).light.color),(this||p).targetLine.material.color.copy((this||p).light.color));(this||p).targetLine.lookAt($Q);(this||
p).targetLine.scale.z=Iea.length()};return z}(F),xQ=new kc,Zl=new Ub,Mxa=function(u){function z(t){function w(tb,mb,Kc){C(tb,Kc);C(mb,Kc)}function C(tb,mb){Q.push(0,0,0);X.push(mb.r,mb.g,mb.b);void 0===T[tb]&&(T[tb]=[]);T[tb].push(Q.length/3-1)}var G=new ob;var M=new vl({color:16777215,vertexColors:!0,toneMapped:!1}),Q=[],X=[],T={},fa=new bg(16755200),oa=new bg(16711680),Ga=new bg(43775),Xa=new bg(16777215),Wa=new bg(3355443);w("n1","n2",fa);w("n2","n4",fa);w("n4","n3",fa);w("n3","n1",fa);w("f1",
"f2",fa);w("f2","f4",fa);w("f4","f3",fa);w("f3","f1",fa);w("n1","f1",fa);w("n2","f2",fa);w("n3","f3",fa);w("n4","f4",fa);w("p","n1",oa);w("p","n2",oa);w("p","n3",oa);w("p","n4",oa);w("u1","u2",Ga);w("u2","u3",Ga);w("u3","u1",Ga);w("c","t",Xa);w("p","c",Wa);w("cn1","cn2",Wa);w("cn3","cn4",Wa);w("cf1","cf2",Wa);w("cf3","cf4",Wa);G.setAttribute("position",new aa(Q,3));G.setAttribute("color",new aa(X,3));G=u.call(this||p,G,M)||this||p;G.type="CameraHelper";G.camera=t;G.camera.updateProjectionMatrix&&
G.camera.updateProjectionMatrix();G.matrix=t.matrixWorld;G.matrixAutoUpdate=!1;G.pointMap=T;G.update();return G}f(z,u);z.prototype.update=function(){var t=(this||p).geometry,w=(this||p).pointMap;Zl.projectionMatrixInverse.copy((this||p).camera.projectionMatrixInverse);km("c",w,t,Zl,0,0,-1);km("t",w,t,Zl,0,0,1);km("n1",w,t,Zl,-1,-1,-1);km("n2",w,t,Zl,1,-1,-1);km("n3",w,t,Zl,-1,1,-1);km("n4",w,t,Zl,1,1,-1);km("f1",w,t,Zl,-1,-1,1);km("f2",w,t,Zl,1,-1,1);km("f3",w,t,Zl,-1,1,1);km("f4",w,t,Zl,1,1,1);km("u1",
w,t,Zl,.7,1.1,-1);km("u2",w,t,Zl,-.7,1.1,-1);km("u3",w,t,Zl,0,2,-1);km("cf1",w,t,Zl,-1,0,1);km("cf2",w,t,Zl,1,0,1);km("cf3",w,t,Zl,0,-1,1);km("cf4",w,t,Zl,0,1,1);km("cn1",w,t,Zl,-1,0,-1);km("cn2",w,t,Zl,1,0,-1);km("cn3",w,t,Zl,0,-1,-1);km("cn4",w,t,Zl,0,1,-1);t.getAttribute("position").needsUpdate=!0};return z}(Dp),aR=new jw,Jea=function(u){function z(w,C){void 0===C&&(C=16776960);var G=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),M=new Float32Array(24),Q=new ob;Q.setIndex(new S(G,
1));Q.setAttribute("position",new S(M,3));C=u.call(this||p,Q,new vl({color:C,toneMapped:!1}))||this||p;C.object=w;C.type="BoxHelper";C.matrixAutoUpdate=!1;C.update();return C}f(z,u);var t=z.prototype;t.update=function(w){void 0!==w&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==(this||p).object&&aR.setFromObject((this||p).object);if(!aR.isEmpty()){w=aR.min;var C=aR.max,G=(this||p).geometry.attributes.position,M=G.array;M[0]=C.x;M[1]=C.y;M[2]=C.z;M[3]=w.x;M[4]=C.y;M[5]=
C.z;M[6]=w.x;M[7]=w.y;M[8]=C.z;M[9]=C.x;M[10]=w.y;M[11]=C.z;M[12]=C.x;M[13]=C.y;M[14]=w.z;M[15]=w.x;M[16]=C.y;M[17]=w.z;M[18]=w.x;M[19]=w.y;M[20]=w.z;M[21]=C.x;M[22]=w.y;M[23]=w.z;G.needsUpdate=!0;(this||p).geometry.computeBoundingSphere()}};t.setFromObject=function(w){(this||p).object=w;this.update();return this||p};t.copy=function(w){Dp.prototype.copy.call(this||p,w);(this||p).object=w.object;return this||p};return z}(Dp),Nxa=function(u){function z(t,w){void 0===w&&(w=16776960);var C=new Uint16Array([0,
1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),G=new ob;G.setIndex(new S(C,1));G.setAttribute("position",new aa([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));w=u.call(this||p,G,new vl({color:w,toneMapped:!1}))||this||p;w.box=t;w.type="Box3Helper";w.geometry.computeBoundingSphere();return w}f(z,u);z.prototype.updateMatrixWorld=function(t){var w=(this||p).box;w.isEmpty()||(w.getCenter((this||p).position),w.getSize((this||p).scale),(this||p).scale.multiplyScalar(.5),u.prototype.updateMatrixWorld.call(this||
p,t))};return z}(Dp),Oxa=function(u){function z(t,w,C){void 0===w&&(w=1);void 0===C&&(C=16776960);var G=new ob;G.setAttribute("position",new aa([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));G.computeBoundingSphere();G=u.call(this||p,G,new vl({color:C,toneMapped:!1}))||this||p;G.type="PlaneHelper";G.plane=t;G.size=w;t=new ob;t.setAttribute("position",new aa([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));t.computeBoundingSphere();G.add(new pa(t,new Y({color:C,opacity:.2,
transparent:!0,depthWrite:!1,toneMapped:!1})));return G}f(z,u);z.prototype.updateMatrixWorld=function(t){var w=-(this||p).plane.constant;1E-8>Math.abs(w)&&(w=1E-8);(this||p).scale.set(.5*(this||p).size,.5*(this||p).size,w);(this||p).children[0].material.side=0>w?1:0;this.lookAt((this||p).plane.normal);u.prototype.updateMatrixWorld.call(this||p,t)};return z}(Is),Kea=new kc,bR,p_,Pxa=function(u){function z(w,C,G,M,Q,X){var T=u.call(this||p)||this||p;T.type="ArrowHelper";void 0===w&&(w=new kc(0,0,1));
void 0===C&&(C=new kc(0,0,0));void 0===G&&(G=1);void 0===M&&(M=16776960);void 0===Q&&(Q=.2*G);void 0===X&&(X=.2*Q);void 0===bR&&(bR=new ob,bR.setAttribute("position",new aa([0,0,0,0,1,0],3)),p_=new MJ(0,.5,1,5,1),p_.translate(0,-.5,0));T.position.copy(C);T.line=new Is(bR,new vl({color:M,toneMapped:!1}));T.line.matrixAutoUpdate=!1;T.add(T.line);T.cone=new pa(p_,new Y({color:M,toneMapped:!1}));T.cone.matrixAutoUpdate=!1;T.add(T.cone);T.setDirection(w);T.setLength(G,Q,X);return T}f(z,u);var t=z.prototype;
t.setDirection=function(w){.99999<w.y?(this||p).quaternion.set(0,0,0,1):-.99999>w.y?(this||p).quaternion.set(1,0,0,0):(Kea.set(w.z,0,-w.x).normalize(),(this||p).quaternion.setFromAxisAngle(Kea,Math.acos(w.y)))};t.setLength=function(w,C,G){void 0===C&&(C=.2*w);void 0===G&&(G=.2*C);(this||p).line.scale.set(1,Math.max(1E-4,w-C),1);(this||p).line.updateMatrix();(this||p).cone.scale.set(G,C,G);(this||p).cone.position.y=w;(this||p).cone.updateMatrix()};t.setColor=function(w){(this||p).line.material.color.set(w);
(this||p).cone.material.color.set(w)};t.copy=function(w){u.prototype.copy.call(this||p,w,!1);(this||p).line.copy(w.line);(this||p).cone.copy(w.cone);return this||p};return z}(F),Lea=function(u){function z(t){void 0===t&&(t=1);var w=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];t=new ob;t.setAttribute("position",new aa(w,3));t.setAttribute("color",new aa([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));w=new vl({vertexColors:!0,toneMapped:!1});t=u.call(this||p,t,w)||this||p;t.type="AxesHelper";return t}f(z,u);
return z}(Dp),Mea=new Float32Array(1),Qxa=new Int32Array(Mea.buffer),Zx,hw=Math.pow(2,8),Nea=[.125,.215,.35,.446,.526,.582],Oea=5+Nea.length,iw=(Zx={},Zx[3E3]=0,Zx[3001]=1,Zx[3002]=2,Zx[3004]=3,Zx[3005]=4,Zx[3006]=5,Zx[3007]=6,Zx),q_=new GF,r_=function(){for(var u=[],z=[],t=[],w=8,C=0;C<Oea;C++){var G=Math.pow(2,w);z.push(G);var M=1/G;4<C?M=Nea[C-8+4-1]:0==C&&(M=0);t.push(M);M=1/(G-1);G=-M/2;M=1+M/2;var Q=[G,G,M,G,M,M,G,G,M,M,G,M];G=new Float32Array(108);M=new Float32Array(72);for(var X=new Float32Array(36),
T=0;6>T;T++){var fa=T%3*2/3-1,oa=2<T?0:-1;G.set([fa,oa,0,fa+2/3,oa,0,fa+2/3,oa+1,0,fa,oa,0,fa+2/3,oa+1,0,fa,oa+1,0],18*T);M.set(Q,12*T);X.set([T,T,T,T,T,T],6*T)}Q=new ob;Q.setAttribute("position",new S(G,3));Q.setAttribute("uv",new S(M,2));Q.setAttribute("faceIndex",new S(X,1));u.push(Q);4<w&&w--}return{_lodPlanes:u,_sizeLods:z,_sigmas:t}}(),OJ=r_._lodPlanes,Pea=r_._sizeLods,cR=r_._sigmas,Qea=new bg,s_=null,WC=(1+Math.sqrt(5))/2,VF=1/WC,Rea=[new kc(1,1,1),new kc(-1,1,1),new kc(1,1,-1),new kc(-1,1,
-1),new kc(0,WC,VF),new kc(0,WC,-VF),new kc(VF,0,WC),new kc(-VF,0,WC),new kc(WC,VF,0),new kc(-WC,VF,0)],Rxa=function(){function u(t){(this||p)._renderer=t;(this||p)._pingPongRenderTarget=null;t=new Float32Array(20);var w=new kc(0,1,0);t=new Px({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:w},inputEncoding:{value:iw[3E3]},outputEncoding:{value:iw[3E3]}},vertexShader:yZ(),
fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+zZ()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1});(this||p)._blurMaterial=t;(this||p)._equirectShader=null;(this||p)._cubemapShader=null;this._compileMaterial((this||p)._blurMaterial)}var z=u.prototype;z.fromScene=function(t,w,C,G){void 0===w&&(w=0);void 0===C&&(C=.1);void 0===G&&(G=100);s_=(this||p)._renderer.getRenderTarget();var M=this._allocateTargets();this._sceneToCubeUV(t,C,G,M);0<w&&this._blur(M,0,0,w);this._applyPMREM(M);this._cleanup(M);return M};z.fromEquirectangular=function(t){return this._fromTexture(t)};
z.fromCubemap=function(t){return this._fromTexture(t)};z.compileCubemapShader=function(){null===(this||p)._cubemapShader&&((this||p)._cubemapShader=wda(),this._compileMaterial((this||p)._cubemapShader))};z.compileEquirectangularShader=function(){null===(this||p)._equirectShader&&((this||p)._equirectShader=vda(),this._compileMaterial((this||p)._equirectShader))};z.dispose=function(){(this||p)._blurMaterial.dispose();null!==(this||p)._cubemapShader&&(this||p)._cubemapShader.dispose();null!==(this||
p)._equirectShader&&(this||p)._equirectShader.dispose();for(var t=0;t<OJ.length;t++)OJ[t].dispose()};z._cleanup=function(t){(this||p)._pingPongRenderTarget.dispose();(this||p)._renderer.setRenderTarget(s_);t.scissorTest=!1;yQ(t,0,0,t.width,t.height)};z._fromTexture=function(t){s_=(this||p)._renderer.getRenderTarget();var w=this._allocateTargets(t);this._textureToCubeUV(t,w);this._applyPMREM(w);this._cleanup(w);return w};z._allocateTargets=function(t){var w=void 0===t||1009!==t.type?!1:3E3===t.encoding||
3001===t.encoding||3007===t.encoding;w={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:w?t.encoding:3002,depthBuffer:!1};var C=uda(w);C.depthBuffer=t?!1:!0;(this||p)._pingPongRenderTarget=uda(w);return C};z._compileMaterial=function(t){t=new pa(OJ[0],t);(this||p)._renderer.compile(t,q_)};z._sceneToCubeUV=function(t,w,C,G){w=new ac(90,1,w,C);C=[1,-1,1,1,1,1];var M=[1,1,1,-1,-1,-1],Q=(this||p)._renderer,X=Q.outputEncoding,T=Q.toneMapping;Q.getClearColor(Qea);var fa=
Q.getClearAlpha();Q.toneMapping=0;Q.outputEncoding=3E3;var oa=t.background;if(oa&&oa.isColor){oa.convertSRGBToLinear();var Ga=Math.min(Math.max(Math.ceil(Math.log2(Math.max(oa.r,oa.g,oa.b))),-128),127);oa=oa.multiplyScalar(Math.pow(2,-Ga));Q.setClearColor(oa,(Ga+128)/255);t.background=null}for(oa=0;6>oa;oa++)Ga=oa%3,0==Ga?(w.up.set(0,C[oa],0),w.lookAt(M[oa],0,0)):1==Ga?(w.up.set(0,0,C[oa]),w.lookAt(0,M[oa],0)):(w.up.set(0,C[oa],0),w.lookAt(0,0,M[oa])),yQ(G,Ga*hw,2<oa?hw:0,hw,hw),Q.setRenderTarget(G),
Q.render(t,w);Q.toneMapping=T;Q.outputEncoding=X;Q.setClearColor(Qea,fa)};z._textureToCubeUV=function(t,w){var C=(this||p)._renderer;t.isCubeTexture?null==(this||p)._cubemapShader&&((this||p)._cubemapShader=wda()):null==(this||p)._equirectShader&&((this||p)._equirectShader=vda());var G=t.isCubeTexture?(this||p)._cubemapShader:(this||p)._equirectShader,M=new pa(OJ[0],G);G=G.uniforms;G.envMap.value=t;t.isCubeTexture||G.texelSize.value.set(1/t.image.width,1/t.image.height);G.inputEncoding.value=iw[t.encoding];
G.outputEncoding.value=iw[w.texture.encoding];yQ(w,0,0,3*hw,2*hw);C.setRenderTarget(w);C.render(M,q_)};z._applyPMREM=function(t){var w=(this||p)._renderer,C=w.autoClear;w.autoClear=!1;for(var G=1;G<Oea;G++)this._blur(t,G-1,G,Math.sqrt(cR[G]*cR[G]-cR[G-1]*cR[G-1]),Rea[(G-1)%Rea.length]);w.autoClear=C};z._blur=function(t,w,C,G,M){var Q=(this||p)._pingPongRenderTarget;this._halfBlur(t,Q,w,C,G,"latitudinal",M);this._halfBlur(Q,t,C,C,G,"longitudinal",M)};z._halfBlur=function(t,w,C,G,M,Q,X){var T=(this||
p)._renderer,fa=(this||p)._blurMaterial;"latitudinal"!==Q&&"longitudinal"!==Q&&console.error("blur direction must be either latitudinal or longitudinal!");var oa=new pa(OJ[G],fa);fa=fa.uniforms;var Ga=Pea[C]-1;Ga=isFinite(M)?Math.PI/(2*Ga):2*Math.PI/39;var Xa=M/Ga,Wa=isFinite(M)?1+Math.floor(3*Xa):20;20<Wa&&console.warn("sigmaRadians, "+M+", is too large and will clip, as it requested "+Wa+" samples when the maximum is set to 20");M=[];for(var tb=0,mb=0;20>mb;++mb){var Kc=mb/Xa;Kc=Math.exp(-Kc*Kc/
2);M.push(Kc);0==mb?tb+=Kc:mb<Wa&&(tb+=2*Kc)}for(Xa=0;Xa<M.length;Xa++)M[Xa]/=tb;fa.envMap.value=t.texture;fa.samples.value=Wa;fa.weights.value=M;fa.latitudinal.value="latitudinal"===Q;X&&(fa.poleAxis.value=X);fa.dTheta.value=Ga;fa.mipInt.value=8-C;fa.inputEncoding.value=iw[t.texture.encoding];fa.outputEncoding.value=iw[t.texture.encoding];t=Pea[G];yQ(w,3*Math.max(0,hw-2*t),(0===G?0:2*hw)+2*t*(4<G?G-8+4:0),3*t,2*t);T.setRenderTarget(w);T.render(oa,q_)};return u}();Ug.create=function(u,z){console.log("THREE.Curve.create() has been deprecated");
u.prototype=Object.create(Ug.prototype);u.prototype.constructor=u;u.prototype.getPoint=z;return u};Object.assign(Qx.prototype,{createPointsGeometry:function(u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");u=this.getPoints(u);return this.createGeometry(u)},createSpacedPointsGeometry:function(u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
u=this.getSpacedPoints(u);return this.createGeometry(u)},createGeometry:function(u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var z=new Hk,t=0,w=u.length;t<w;t++){var C=u[t];z.vertices.push(new kc(C.x,C.y,C.z||0))}return z}});Object.assign(ku.prototype,{fromPoints:function(u){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(u)}});xda.prototype=Object.create(To.prototype);
yda.prototype=Object.create(To.prototype);AZ.prototype=Object.create(To.prototype);Object.assign(AZ.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Gea.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
Dea.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Bk.prototype,{extractUrlBase:function(u){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return l_.extractUrlBase(u)}});Bk.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};
Object.assign(zea.prototype,{center:function(u){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},size:function(u){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(u)}});
Object.assign(jw.prototype,{center:function(u){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionSphere:function(u){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");
return this.intersectsSphere(u)},size:function(u){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(u)}});Object.assign(Tx.prototype,{empty:function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()}});fJ.prototype.setFromMatrix=function(u){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(u)};Bea.prototype.center=function(u){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");
return this.getCenter(u)};Object.assign(Kh,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(u){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return Kh.floorPowerOfTwo(u)},nextPowerOfTwo:function(u){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Kh.ceilPowerOfTwo(u)}});Object.assign(Cp.prototype,{flattenToArrayOffset:function(u,
z){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},multiplyVector3:function(u){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return u.applyMatrix3(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");
return u.applyMatrix3(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(u){console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(u).invert()}});Object.assign(Qi.prototype,{extractPosition:function(u){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(u)},flattenToArrayOffset:function(u,
z){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},getPosition:function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return(new kc).setFromMatrixColumn(this||p,3)},setRotationFromQuaternion:function(u){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(u)},
multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(u){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||p)},multiplyVector4:function(u){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},
rotateAxis:function(u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");u.transformDirection(this||p)},crossVector:function(u){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||p)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},
rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(u,z,t,w,C,G){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");
return this.makePerspective(u,z,w,t,C,G)},getInverse:function(u){console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(u).invert()}});dw.prototype.isIntersectionLine=function(u){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(u)};Object.assign(So.prototype,{multiplyVector3:function(u){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return u.applyQuaternion(this||p)},inverse:function(){console.warn("THREE.Quaternion: .inverse() has been renamed to invert().");return this.invert()}});Object.assign(HF.prototype,{isIntersectionBox:function(u){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionPlane:function(u){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(u)},isIntersectionSphere:function(u){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");
return this.intersectsSphere(u)}});Object.assign(cu.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(u,z){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(u,z)},midpoint:function(u){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(u)},normal:function(u){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");
return this.getNormal(u)},plane:function(u){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(u)}});Object.assign(cu,{barycoordFromPoint:function(u,z,t,w,C){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return cu.getBarycoord(u,z,t,w,C)},normal:function(u,z,t,w){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return cu.getNormal(u,z,t,w)}});Object.assign(rA.prototype,{extractAllPoints:function(u){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");
return this.extractPoints(u)},extrude:function(u){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new WZ(this||p,u)},makeGeometry:function(u){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new a_(this||p,u)}});Object.assign(Je.prototype,{fromAttribute:function(u,z,t){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(kc.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},
getPositionFromMatrix:function(u){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(u)},getScaleFromMatrix:function(u){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(u)},getColumnFromMatrix:function(u,z){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(z,
u)},applyProjection:function(u){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(u)},fromAttribute:function(u,z,t){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");
return this.manhattanLength()}});Object.assign(Gk.prototype,{fromAttribute:function(u,z,t){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,z,t)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Hk.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},
applyMatrix:function(u){console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.assign(F.prototype,{getChildByName:function(u){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(u,z){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");
return this.translateOnAxis(z,u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(u){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(F.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return(this||p).rotation.order},set:function(u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
(this||p).rotation.order=u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(pa.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});
Object.defineProperties(pa.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(lJ.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");
return(this||p).levels}}});Object.defineProperty(oJ.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});mJ.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Ug.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");
return(this||p).arcLengthDivisions},set:function(u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");(this||p).arcLengthDivisions=u}});ac.prototype.setLens=function(u,z){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==z&&((this||p).filmGauge=z);this.setFocalLength(u)};Object.defineProperties(al.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},
shadowCameraFov:{set:function(u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");(this||p).shadow.camera.fov=u}},shadowCameraLeft:{set:function(u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");(this||p).shadow.camera.left=u}},shadowCameraRight:{set:function(u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");(this||p).shadow.camera.right=u}},shadowCameraTop:{set:function(u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");
(this||p).shadow.camera.top=u}},shadowCameraBottom:{set:function(u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");(this||p).shadow.camera.bottom=u}},shadowCameraNear:{set:function(u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");(this||p).shadow.camera.near=u}},shadowCameraFar:{set:function(u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");(this||p).shadow.camera.far=u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},
shadowBias:{set:function(u){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");(this||p).shadow.bias=u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");(this||p).shadow.mapSize.width=u}},shadowMapHeight:{set:function(u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");(this||p).shadow.mapSize.height=u}}});
Object.defineProperties(S.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return(this||p).array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");return 35048===(this||p).usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});Object.assign(S.prototype,{setDynamic:function(u){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");
this.setUsage(!0===u?35048:35044);return this||p},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ob.prototype,{addIndex:function(u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(u)},addAttribute:function(u,z,t){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");
return z&&z.isBufferAttribute||z&&z.isInterleavedBufferAttribute?"index"===u?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(z),this||p):this.setAttribute(u,z):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(u,new S(z,t)))},addDrawCall:function(u,z,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");
this.addGroup(u,z)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(u){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(u)},
applyMatrix:function(u){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(ob.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return(this||p).groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return(this||p).groups}}});Object.defineProperties(zJ.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");
return(this||p).instanceCount},set:function(u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");(this||p).instanceCount=u}}});Object.defineProperties(wZ.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");return(this||p).params.Line.threshold},set:function(u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");
(this||p).params.Line.threshold=u}}});Object.defineProperties(vr.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return 35048===(this||p).usage},set:function(u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(u)}}});Object.assign(vr.prototype,{setDynamic:function(u){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");
this.setUsage(!0===u?35048:35044);return this||p},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(NJ.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});
Object.assign(NZ.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(xea.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this||p}}});Object.defineProperties(L.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},
set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new bg}},shading:{get:function(){console.error("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(u){console.warn("THREE."+
(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||p).flatShading=1===u}},stencilMask:{get:function(){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return(this||p).stencilFuncMask},set:function(u){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");(this||p).stencilFuncMask=u}}});Object.defineProperties(qA.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");
return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(pA.prototype,{transparency:{get:function(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");return(this||p).transmission},set:function(u){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");(this||p).transmission=u}}});Object.defineProperties(hc.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");
return(this||p).extensions.derivatives},set:function(u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");(this||p).extensions.derivatives=u}}});Object.assign(hJ.prototype,{clearTarget:function(u,z,t,w){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(u);this.clear(z,t,w)},animate:function(u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");
this.setAnimationLoop(u)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return(this||p).capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return(this||p).capabilities.precision},
resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return(this||p).state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return(this||p).extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return(this||p).extensions.get("OES_texture_half_float")},
supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return(this||p).extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return(this||p).extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");
return(this||p).extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return(this||p).extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return(this||p).capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");
return(this||p).extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},
setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");
return this.getActiveMipmapLevel()}});Object.defineProperties(hJ.prototype,{shadowMapEnabled:{get:function(){return(this||p).shadowMap.enabled},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");(this||p).shadowMap.enabled=u}},shadowMapType:{get:function(){return(this||p).shadowMap.type},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");(this||p).shadowMap.type=u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return(this||p).xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");
return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");return!1},set:function(u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");(this||p).outputEncoding=!0===u?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");
return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Yca.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(y.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");
return(this||p).texture.wrapS},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");(this||p).texture.wrapS=u}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return(this||p).texture.wrapT},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");(this||p).texture.wrapT=u}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return(this||
p).texture.magFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");(this||p).texture.magFilter=u}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return(this||p).texture.minFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");(this||p).texture.minFilter=u}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return(this||p).texture.anisotropy},set:function(u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");(this||p).texture.anisotropy=u}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return(this||p).texture.offset},set:function(u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");(this||p).texture.offset=u}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");
return(this||p).texture.repeat},set:function(u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");(this||p).texture.repeat=u}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return(this||p).texture.format},set:function(u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");(this||p).texture.format=u}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return(this||p).texture.type},
set:function(u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");(this||p).texture.type=u}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return(this||p).texture.generateMipmaps},set:function(u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");(this||p).texture.generateMipmaps=u}}});Object.defineProperties(n_.prototype,{load:{value:function(u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
var z=this||p;(new wQ).load(u,function(t){z.setBuffer(t)});return this||p}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});wea.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Ic.prototype.updateCubeMap=function(u,z){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(u,z)};Ic.prototype.clear=function(u,z,t,w){console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear().");
return(this||p).renderTarget.clear(u,z,t,w)};DC.crossOrigin=void 0;DC.loadTexture=function(u,z,t,w){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var C=new mQ;C.setCrossOrigin((this||p).crossOrigin);u=C.load(u,t,void 0,w);z&&(u.mapping=z);return u};DC.loadTextureCube=function(u,z,t,w){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var C=new kQ;C.setCrossOrigin((this||p).crossOrigin);
u=C.load(u,t,void 0,w);z&&(u.mapping=z);return u};DC.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};DC.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"124"}}));b.ACESFilmicToneMapping=4;b.AddEquation=
100;b.AddOperation=2;b.AdditiveAnimationBlendMode=2501;b.AdditiveBlending=2;b.AlphaFormat=1021;b.AlwaysDepth=1;b.AlwaysStencilFunc=519;b.AmbientLight=rQ;b.AmbientLightProbe=rZ;b.AnimationClip=xr;b.AnimationLoader=gZ;b.AnimationMixer=tZ;b.AnimationObjectGroup=rda;b.AnimationUtils=ml;b.ArcCurve=FF;b.ArrayCamera=VP;b.ArrowHelper=Pxa;b.Audio=n_;b.AudioAnalyser=wea;b.AudioContext=m_;b.AudioListener=sxa;b.AudioLoader=wQ;b.AxesHelper=Lea;b.AxisHelper=function(u){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");
return new Lea(u)};b.BackSide=1;b.BasicDepthPacking=3200;b.BasicShadowMap=0;b.BinaryTextureLoader=function(u){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new lQ(u)};b.Bone=nJ;b.BooleanKeyframeTrack=gQ;b.BoundingBoxHelper=function(u,z){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Jea(u,z)};b.Box2=zea;b.Box3=jw;b.Box3Helper=Nxa;b.BoxBufferGeometry=eJ;b.BoxGeometry=QZ;b.BoxHelper=Jea;b.BufferAttribute=
S;b.BufferGeometry=ob;b.BufferGeometryLoader=vQ;b.ByteType=1010;b.Cache=RC;b.Camera=Ub;b.CameraHelper=Mxa;b.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};b.CanvasTexture=pJ;b.CatmullRomCurve3=To;b.CineonToneMapping=3;b.CircleBufferGeometry=RZ;b.CircleGeometry=$da;b.ClampToEdgeWrapping=1001;b.Clock=tea;b.ClosedSplineCurve3=xda;b.Color=bg;b.ColorKeyframeTrack=hQ;b.CompressedTexture=zF;b.CompressedTextureLoader=hZ;b.ConeBufferGeometry=bea;b.ConeGeometry=aea;b.CubeCamera=
Ic;b.CubeGeometry=QZ;b.CubeReflectionMapping=301;b.CubeRefractionMapping=302;b.CubeTexture=Mb;b.CubeTextureLoader=kQ;b.CubeUVReflectionMapping=306;b.CubeUVRefractionMapping=307;b.CubicBezierCurve=gu;b.CubicBezierCurve3=fw;b.CubicInterpolant=eQ;b.CullFaceBack=1;b.CullFaceFront=2;b.CullFaceFrontBack=3;b.CullFaceNone=0;b.Curve=Ug;b.CurvePath=Qx;b.CustomBlending=5;b.CustomToneMapping=5;b.CylinderBufferGeometry=MJ;b.CylinderGeometry=SZ;b.Cylindrical=Fxa;b.DataTexture=Bd;b.DataTexture2DArray=yj;b.DataTexture3D=
zj;b.DataTextureLoader=lQ;b.DataUtils={toHalfFloat:function(u){Mea[0]=u;u=Qxa[0];var z=u>>16&32768,t=u>>12&2047,w=u>>23&255;return 103>w?z:142<w?z|31744|((255==w?0:1)&&u&8388607):113>w?(t|=2048,z|(t>>114-w)+(t>>113-w&1)):z=(z|w-112<<10|t>>1)+(t&1)}};b.DecrementStencilOp=7683;b.DecrementWrapStencilOp=34056;b.DefaultLoadingManager=lda;b.DepthFormat=1026;b.DepthStencilFormat=1027;b.DepthTexture=qJ;b.DirectionalLight=qQ;b.DirectionalLightHelper=Lxa;b.DiscreteInterpolant=fQ;b.DodecahedronBufferGeometry=
TZ;b.DodecahedronGeometry=cea;b.DoubleSide=2;b.DstAlphaFactor=206;b.DstColorFactor=208;b.DynamicBufferAttribute=function(u,z){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return(new S(u,z)).setUsage(35048)};b.DynamicCopyUsage=35050;b.DynamicDrawUsage=35048;b.DynamicReadUsage=35049;b.EdgesGeometry=VZ;b.EdgesHelper=function(u,z){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");
return new Dp(new VZ(u.geometry),new vl({color:void 0!==z?z:16777215}))};b.EllipseCurve=yr;b.EqualDepth=4;b.EqualStencilFunc=514;b.EquirectangularReflectionMapping=303;b.EquirectangularRefractionMapping=304;b.Euler=PP;b.EventDispatcher=d;b.ExtrudeBufferGeometry=NJ;b.ExtrudeGeometry=WZ;b.Face3=dJ;b.Face4=function(u,z,t,w,C,G,M){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new dJ(u,z,t,C,G,M)};b.FaceColors=1;b.FileLoader=Js;b.FlatShading=1;b.Float16BufferAttribute=
na;b.Float32Attribute=function(u,z){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new aa(u,z)};b.Float32BufferAttribute=aa;b.Float64Attribute=function(u,z){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new xa(u,z)};b.Float64BufferAttribute=xa;b.FloatType=1015;b.Fog=Lda;b.FogExp2=Kda;b.Font=oZ;b.FontLoader=pZ;b.FrontSide=0;b.Frustum=fJ;b.GLBufferAttribute=vZ;b.GLSL1="100";
b.GLSL3="300 es";b.GammaEncoding=3007;b.Geometry=Hk;b.GeometryUtils={merge:function(u,z,t){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(z.isMesh){z.matrixAutoUpdate&&z.updateMatrix();var w=z.matrix;z=z.geometry}u.merge(z,w,t)},center:function(u){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return u.center()}};b.GreaterDepth=6;b.GreaterEqualDepth=
5;b.GreaterEqualStencilFunc=518;b.GreaterStencilFunc=516;b.GridHelper=Gea;b.Group=iA;b.HalfFloatType=1016;b.HemisphereLight=nQ;b.HemisphereLightHelper=Jxa;b.HemisphereLightProbe=qZ;b.IcosahedronBufferGeometry=XZ;b.IcosahedronGeometry=dea;b.ImageBitmapLoader=mZ;b.ImageLoader=EF;b.ImageUtils=DC;b.ImmediateRenderObject=AJ;b.IncrementStencilOp=7682;b.IncrementWrapStencilOp=34055;b.InstancedBufferAttribute=uQ;b.InstancedBufferGeometry=zJ;b.InstancedInterleavedBuffer=uZ;b.InstancedMesh=$P;b.Int16Attribute=
function(u,z){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new K(u,z)};b.Int16BufferAttribute=K;b.Int32Attribute=function(u,z){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new R(u,z)};b.Int32BufferAttribute=R;b.Int8Attribute=function(u,z){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new ea(u,z)};b.Int8BufferAttribute=
ea;b.IntType=1013;b.InterleavedBuffer=vr;b.InterleavedBufferAttribute=mA;b.Interpolant=wr;b.InterpolateDiscrete=2300;b.InterpolateLinear=2301;b.InterpolateSmooth=2302;b.InvertStencilOp=5386;b.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};b.KeepStencilOp=7680;b.KeyframeTrack=so;b.LOD=lJ;b.LatheBufferGeometry=YZ;b.LatheGeometry=eea;b.Layers=RY;b.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};b.LessDepth=2;b.LessEqualDepth=
3;b.LessEqualStencilFunc=515;b.LessStencilFunc=513;b.Light=al;b.LightProbe=Ks;b.Line=Is;b.Line3=Bea;b.LineBasicMaterial=vl;b.LineCurve=oq;b.LineCurve3=hu;b.LineDashedMaterial=MC;b.LineLoop=aQ;b.LinePieces=1;b.LineSegments=Dp;b.LineStrip=0;b.LinearEncoding=3E3;b.LinearFilter=1006;b.LinearInterpolant=vJ;b.LinearMipMapLinearFilter=1008;b.LinearMipMapNearestFilter=1007;b.LinearMipmapLinearFilter=1008;b.LinearMipmapNearestFilter=1007;b.LinearToneMapping=1;b.Loader=Bk;b.LoaderUtils=l_;b.LoadingManager=
fZ;b.LogLuvEncoding=3003;b.LoopOnce=2200;b.LoopPingPong=2202;b.LoopRepeat=2201;b.LuminanceAlphaFormat=1025;b.LuminanceFormat=1024;b.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};b.Material=L;b.MaterialLoader=tQ;b.Math=Kh;b.MathUtils=Kh;b.Matrix3=Cp;b.Matrix4=Qi;b.MaxEquation=104;b.Mesh=pa;b.MeshBasicMaterial=Y;b.MeshDepthMaterial=gA;b.MeshDistanceMaterial=hA;b.MeshFaceMaterial=function(u){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return u};b.MeshLambertMaterial=
KC;b.MeshMatcapMaterial=LC;b.MeshNormalMaterial=JC;b.MeshPhongMaterial=qA;b.MeshPhysicalMaterial=pA;b.MeshStandardMaterial=ew;b.MeshToonMaterial=IC;b.MinEquation=103;b.MirroredRepeatWrapping=1002;b.MixOperation=1;b.MultiMaterial=function(u){void 0===u&&(u=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");u.isMultiMaterial=!0;u.materials=u;u.clone=function(){return u.slice()};return u};b.MultiplyBlending=4;b.MultiplyOperation=0;b.NearestFilter=1003;b.NearestMipMapLinearFilter=
1005;b.NearestMipMapNearestFilter=1004;b.NearestMipmapLinearFilter=1005;b.NearestMipmapNearestFilter=1004;b.NeverDepth=0;b.NeverStencilFunc=512;b.NoBlending=0;b.NoColors=0;b.NoToneMapping=0;b.NormalAnimationBlendMode=2500;b.NormalBlending=1;b.NotEqualDepth=7;b.NotEqualStencilFunc=517;b.NumberKeyframeTrack=CF;b.Object3D=F;b.ObjectLoader=qxa;b.ObjectSpaceNormalMap=1;b.OctahedronBufferGeometry=UQ;b.OctahedronGeometry=fea;b.OneFactor=201;b.OneMinusDstAlphaFactor=207;b.OneMinusDstColorFactor=209;b.OneMinusSrcAlphaFactor=
205;b.OneMinusSrcColorFactor=203;b.OrthographicCamera=GF;b.PCFShadowMap=1;b.PCFSoftShadowMap=2;b.PMREMGenerator=Rxa;b.ParametricBufferGeometry=BF;b.ParametricGeometry=uJ;b.Particle=function(u){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new jJ(u)};b.ParticleBasicMaterial=function(u){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new fu(u)};b.ParticleSystem=function(u,z){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");
return new yF(u,z)};b.ParticleSystemMaterial=function(u){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new fu(u)};b.Path=ku;b.PerspectiveCamera=ac;b.Plane=dw;b.PlaneBufferGeometry=UP;b.PlaneGeometry=gea;b.PlaneHelper=Oxa;b.PointCloud=function(u,z){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new yF(u,z)};b.PointCloudMaterial=function(u){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new fu(u)};
b.PointLight=pQ;b.PointLightHelper=Hxa;b.Points=yF;b.PointsMaterial=fu;b.PolarGridHelper=Kxa;b.PolyhedronBufferGeometry=QC;b.PolyhedronGeometry=hea;b.PositionalAudio=uxa;b.PropertyBinding=Uo;b.PropertyMixer=sZ;b.QuadraticBezierCurve=iu;b.QuadraticBezierCurve3=gw;b.Quaternion=So;b.QuaternionKeyframeTrack=wJ;b.QuaternionLinearInterpolant=iQ;b.REVISION="124";b.RGBADepthPacking=3201;b.RGBAFormat=1023;b.RGBAIntegerFormat=1033;b.RGBA_ASTC_10x10_Format=37819;b.RGBA_ASTC_10x5_Format=37816;b.RGBA_ASTC_10x6_Format=
37817;b.RGBA_ASTC_10x8_Format=37818;b.RGBA_ASTC_12x10_Format=37820;b.RGBA_ASTC_12x12_Format=37821;b.RGBA_ASTC_4x4_Format=37808;b.RGBA_ASTC_5x4_Format=37809;b.RGBA_ASTC_5x5_Format=37810;b.RGBA_ASTC_6x5_Format=37811;b.RGBA_ASTC_6x6_Format=37812;b.RGBA_ASTC_8x5_Format=37813;b.RGBA_ASTC_8x6_Format=37814;b.RGBA_ASTC_8x8_Format=37815;b.RGBA_BPTC_Format=36492;b.RGBA_ETC2_EAC_Format=37496;b.RGBA_PVRTC_2BPPV1_Format=35843;b.RGBA_PVRTC_4BPPV1_Format=35842;b.RGBA_S3TC_DXT1_Format=33777;b.RGBA_S3TC_DXT3_Format=
33778;b.RGBA_S3TC_DXT5_Format=33779;b.RGBDEncoding=3006;b.RGBEEncoding=3002;b.RGBEFormat=1023;b.RGBFormat=1022;b.RGBIntegerFormat=1032;b.RGBM16Encoding=3005;b.RGBM7Encoding=3004;b.RGB_ETC1_Format=36196;b.RGB_ETC2_Format=37492;b.RGB_PVRTC_2BPPV1_Format=35841;b.RGB_PVRTC_4BPPV1_Format=35840;b.RGB_S3TC_DXT1_Format=33776;b.RGFormat=1030;b.RGIntegerFormat=1031;b.RawShaderMaterial=Px;b.Ray=HF;b.Raycaster=wZ;b.RectAreaLight=sQ;b.RedFormat=1028;b.RedIntegerFormat=1029;b.ReinhardToneMapping=2;b.RepeatWrapping=
1E3;b.ReplaceStencilOp=7681;b.ReverseSubtractEquation=102;b.RingBufferGeometry=ZZ;b.RingGeometry=iea;b.SRGB8_ALPHA8_ASTC_10x10_Format=37851;b.SRGB8_ALPHA8_ASTC_10x5_Format=37848;b.SRGB8_ALPHA8_ASTC_10x6_Format=37849;b.SRGB8_ALPHA8_ASTC_10x8_Format=37850;b.SRGB8_ALPHA8_ASTC_12x10_Format=37852;b.SRGB8_ALPHA8_ASTC_12x12_Format=37853;b.SRGB8_ALPHA8_ASTC_4x4_Format=37840;b.SRGB8_ALPHA8_ASTC_5x4_Format=37841;b.SRGB8_ALPHA8_ASTC_5x5_Format=37842;b.SRGB8_ALPHA8_ASTC_6x5_Format=37843;b.SRGB8_ALPHA8_ASTC_6x6_Format=
37844;b.SRGB8_ALPHA8_ASTC_8x5_Format=37845;b.SRGB8_ALPHA8_ASTC_8x6_Format=37846;b.SRGB8_ALPHA8_ASTC_8x8_Format=37847;b.Scene=NZ;b.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};b.ShaderChunk=Yi;b.ShaderLib=
du;b.ShaderMaterial=hc;b.ShadowMaterial=HC;b.Shape=rA;b.ShapeBufferGeometry=$Z;b.ShapeGeometry=a_;b.ShapePath=nZ;b.ShapeUtils=Yx;b.ShortType=1011;b.Skeleton=oJ;b.SkeletonHelper=Dea;b.SkinnedMesh=mJ;b.SmoothShading=2;b.Sphere=Tx;b.SphereBufferGeometry=VQ;b.SphereGeometry=jea;b.Spherical=Exa;b.SphericalHarmonics3=nda;b.Spline=AZ;b.SplineCurve=ju;b.SplineCurve3=yda;b.SpotLight=oQ;b.SpotLightHelper=Gxa;b.Sprite=jJ;b.SpriteMaterial=nA;b.SrcAlphaFactor=204;b.SrcAlphaSaturateFactor=210;b.SrcColorFactor=
202;b.StaticCopyUsage=35046;b.StaticDrawUsage=35044;b.StaticReadUsage=35045;b.StereoCamera=oda;b.StreamCopyUsage=35042;b.StreamDrawUsage=35040;b.StreamReadUsage=35041;b.StringKeyframeTrack=jQ;b.SubtractEquation=101;b.SubtractiveBlending=3;b.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};b.TangentSpaceNormalMap=0;b.TetrahedronBufferGeometry=b_;b.TetrahedronGeometry=kea;b.TextBufferGeometry=c_;b.TextGeometry=lea;b.Texture=r;b.TextureLoader=mQ;b.TorusBufferGeometry=d_;b.TorusGeometry=mea;b.TorusKnotBufferGeometry=
e_;b.TorusKnotGeometry=nea;b.Triangle=cu;b.TriangleFanDrawMode=2;b.TriangleStripDrawMode=1;b.TrianglesDrawMode=0;b.TubeBufferGeometry=f_;b.TubeGeometry=oea;b.UVMapping=300;b.Uint16Attribute=function(u,z){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new Z(u,z)};b.Uint16BufferAttribute=Z;b.Uint32Attribute=function(u,z){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new U(u,
z)};b.Uint32BufferAttribute=U;b.Uint8Attribute=function(u,z){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new qa(u,z)};b.Uint8BufferAttribute=qa;b.Uint8ClampedAttribute=function(u,z){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Fa(u,z)};b.Uint8ClampedBufferAttribute=Fa;b.Uniform=xea;b.UniformsLib=Of;b.UniformsUtils=Wca;b.UnsignedByteType=1009;b.UnsignedInt248Type=
1020;b.UnsignedIntType=1014;b.UnsignedShort4444Type=1017;b.UnsignedShort5551Type=1018;b.UnsignedShort565Type=1019;b.UnsignedShortType=1012;b.VSMShadowMap=3;b.Vector2=Je;b.Vector3=kc;b.Vector4=Gk;b.VectorKeyframeTrack=DF;b.Vertex=function(u,z,t){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new kc(u,z,t)};b.VertexColors=2;b.VideoTexture=cZ;b.WebGL1Renderer=$Y;b.WebGLCubeRenderTarget=ed;b.WebGLMultisampleRenderTarget=A;b.WebGLRenderTarget=y;b.WebGLRenderTargetCube=
function(u,z,t){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new ed(u,t)};b.WebGLRenderer=hJ;b.WebGLUtils=Zca;b.WireframeGeometry=g_;b.WireframeHelper=function(u,z){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Dp(new g_(u.geometry),new vl({color:void 0!==z?z:16777215}))};b.WrapAroundEnding=2402;b.XHRLoader=function(u){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");
return new Js(u)};b.ZeroCurvatureEnding=2400;b.ZeroFactor=200;b.ZeroSlopeEnding=2401;b.ZeroStencilOp=0;b.sRGBEncoding=3001;Object.defineProperty(b,"__esModule",{value:!0})});return bJ}(),qi=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js");qi.Canvas=aJ;qi.THREE=Sxa;var Vo=qi.THREE;qi.Scene=Vo.Scene;qi.SpotLight=Vo.SpotLight;qi.MeshBasicMaterial=Vo.MeshBasicMaterial;qi.BackSide=Vo.BackSide;qi.ImageUtils=Vo.ImageUtils;qi.Color=Vo.Color;qi.MeshPhongMaterial=Vo.MeshPhongMaterial;qi.SphereGeometry=
Vo.SphereGeometry;qi.Mesh=Vo.Mesh;qi.DirectionalLight=Vo.DirectionalLight;qi.AmbientLight=Vo.AmbientLight;qi.WebGLRenderer=Vo.WebGLRenderer;qi.PerspectiveCamera=Vo.PerspectiveCamera;qi.TextureLoader=Vo.TextureLoader;qi.BoxGeometry=Vo.BoxGeometry;qi.MeshNormalMaterial=Vo.MeshNormalMaterial;qi.easings=mr;var Sea=function(b){var d=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js"),k=d.hasOwnProperty("WebGLCanvas")&&"function"===typeof d.WebGLCanvas?d.WebGLCanvas:d.WebGLCanvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"context",get:function(){return navigator.webdriver?this._canvas&&this._canvas.getContext("2d"):this._canvas&&this._canvas.getContext(this.contextType,{preserveDrawingBuffer:!0})}},{key:"restoreContent",value:function(a,f){this.renderer&&a&&a!==f&&(this.owner.context.drawImage(this.renderer.getContext().canvas,0,0),this.renderer=new qi.WebGLRenderer({context:this.context,antialiasing:!0}),this.renderer.setSize(this.width,
this.height))}},{key:"onExtentChanged",value:function(){}},{key:"relayout",value:function(){var a=this;this.renderLoop&&(setTimeout(function(){return a.owner.context.drawImage(a.renderer.getContext().canvas,0,0)}),this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix())}},{key:"stopAnimation",value:function(){this.renderLoop&&(cancelAnimationFrame(this.renderLoop),this.renderer.dispose())}},{key:"renderGlobe",value:function(){var a=
this;this.stopAnimation();this.withContextDo(function(f){var l=a.width,r=a.height,v=new qi.Scene,y=new qi.PerspectiveCamera(45,l/r,.01,1E3);y.position.z=1;y.position.x=.4;y.position.y=.25;a.camera=y;v.add(new qi.AmbientLight(3355443));var A=new qi.SpotLight(16777215,1,200,Math.PI/2,1);A.position.set(1,1,0);A.castShadow=!0;A.shadow.mapSize.width=1024;A.shadow.mapSize.height=1024;A.shadow.camera.near=10;A.shadow.camera.far=100;A.shadow.bias=.01;v.add(A);var E=function(H,J){var O=new qi.TextureLoader;
return new qi.Mesh(new qi.SphereGeometry(H,J,J),new qi.MeshPhongMaterial({map:O.load("assets/globe-textures/2_no_clouds_4k.jpg"),bumpMap:O.load("assets/globe-textures/elev_bump_4k.jpg"),bumpScale:.005,shininess:5,specularMap:O.load("assets/globe-textures/water_4k.png"),specular:new qi.Color("grey")}))}(.5,32);E.rotation.y=5.2;v.add(E);var F=function(H,J){var O=new qi.TextureLoader;return new qi.Mesh(new qi.SphereGeometry(H+.003,J,J),new qi.MeshPhongMaterial({map:O.load("assets/globe-textures/fair_clouds_4k.png"),
transparent:!0}))}(.5,32);F.rotation.y=5.2;v.add(F);A=function(H,J){var O=new qi.TextureLoader;return new qi.Mesh(new qi.SphereGeometry(H,J,J),new qi.MeshBasicMaterial({map:O.load("assets/globe-textures//galaxy_starfield.png"),side:qi.BackSide}))}(90,64);v.add(A);a.renderer=new qi.WebGLRenderer({context:f,antialias:!0});a.renderer.setSize(l,r);a.limitLoop(function(){if(!document.body.contains(a.renderer.getContext().canvas)){if(a.removeScheduled)return;a.removeScheduled=setTimeout(function(){document.body.contains(a.renderer.getContext().canvas)||
a.stopAnimation()},5E3)}E.rotation.y+=5E-4;F.rotation.y+=5E-4;a.renderer.render(v,y)});a.camera.position.z=1;a.camera.position.x=.4;a.camera.position.y=.25})}},{key:"limitLoop",value:function(a,f){var l=this,r=(new Date).getTime(),v=this,y;return(y=function(A){v.renderLoop=requestAnimationFrame(y);A=(new Date).getTime();var E=A-r,F=1E3/(f||l.fps);E>F&&(r=A-E%F,a(),v.firstFrameRendered=!0)})(0)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WebGLCanvas"}},{key:"properties",get:function(){return{fps:{}}}}],
d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WebGLCanvas",version:"0.1.1-56"}}},{start:407,end:6004})}(qi.Canvas);Sea=qi.WebGLCanvas;qi.default=Sea;var ji=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");ji.Morph=kl;ji.morph=de;ji.Icon=wp;ji.touchInputDevice=nr;ji.Rectangle=ye;ji.LinearGradient=kn;ji.Color=ng;
ji.pt=di;ji.signal=em;ji.connect=Li;ji.arr=Lf;ji.obj=dg;ji.Closure=Sj;var WF=Ca("b7",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("Button")&&"function"===typeof d.Button?d.Button:d.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a)}},{key:"__additionally_serialize__",value:function(a,f,l,r){Zb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,a,f,l,r);r("fontSize",this.fontSize);this.label!=this.labelMorph.value&&r("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=!0}},{key:"onChange",value:function(a){var f=a.prop;if(this.label)switch(f){case "extent":case "fontSize":case "fontFamily":this.relayout();
break;case "padding":this.fit()}return Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,f){f===this.labelMorph&&"extent"===a.prop&&this.relayout();return Zb._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",this).call(this,a,f)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=
this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var f=this.padding,l=f.top(),r=f.bottom(),v=f.left(),y=f.right(),A=a.height+l+r,E=a.width+v+y;A>this.height&&(this.height=A);E>this.width&&(this.width=E);var F=this.innerBounds().insetByRect(f);a.center=F.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,f=this.labelMorph;f.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(f.extent);this.relayout();return this}},
{key:"trigger",value:function(){try{ji.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(f){var a=this.world();a?a.logError(f):console.error(f)}}},{key:"considerPress",value:function(a){return ji.touchInputDevice?!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed={originalFill:this.fill})}},
{key:"onMouseUp",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){ji.touchInputDevice?(this.draggable=!0,this.pressed=null):Zb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){!ji.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},
{key:"onHoverIn",value:function(a){ji.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("edit button label",{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);f=l.yieldResult;"string"===typeof f&&(a.label=f);l.jumpToEnd()})}},{key:"menuItems",
value:function(){var a=this,f=Zb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,defaultValue:ji.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:ji.pt(100,20)},borderColor:{defaultValue:ji.Color.gray},borderWidth:{defaultValue:1},
borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new ji.LinearGradient({stops:[{offset:0,color:ji.Color.white},{offset:1,color:ji.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(a){this.setProperty("deactivated",a);this.nativeCursor=a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",
a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||
this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var f=this.labelMorph;f&&f.remove();a.name="label";a.reactsToPointer=!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?
(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:251,end:8857})}(ji.Morph));ji.Button=WF;ji.Button=WF;ji.Button=WF;var PJ=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButton")&&"function"===typeof d.RadioButton?d.RadioButton:d.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":
"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=ji.Color.gray;this.selected=!1;ji.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(f){return f!==a})}},{key:"morph",set:function(a){var f=this.indicator;this.submorphs.forEach(function(l){l!==f&&l.remove()});a.position=ji.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=
JSON.parse(this.valueFunctionString)}catch(f){a=this.valueFunctionString}this.valueFn=ji.Closure.fromSource(a).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],
initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(a){var f=this;this.whenRendered().then(function(l){f.master={auto:f.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=
[{type:"ellipse",name:"indicator"}]}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8867,end:11244})}(ji.Morph);ji.RadioButton=PJ;ji.RadioButton=PJ;ji.RadioButton=PJ;var QJ=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButtonGroup")&&
"function"===typeof d.RadioButtonGroup?d.RadioButtonGroup:d.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,f){var l=new ji.RadioButton;l.reset();
l.morph=a;void 0!=f&&(l.internalValue=f,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(l);return l}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(f){f!==a&&(f.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var f=this.submorphs.find(function(l){try{return l.value===
a}catch(r){return!1}});f?f.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var f=this;this.removeAllButtons();if(ji.obj.isArray(a)){if(0==a.length)return;a.forEach(function(l){f.addButton(ji.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))})}else{a=[].concat($jscomp.arrayFromIterable(a.entries()));
if(0==a.length)return;a.forEach(function(l){var r=$jscomp.makeIterator(l);l=r.next().value;r=r.next().value;f.addButton(ji.morph({name:"label",type:"label",value:l,reactsToPointer:!1}),r)})}this.submorphs[0].master.whenApplied().then(function(){return f.setSelection(f.submorphs[0])})},value:{derived:!0,after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var f=this.submorphs.find(function(l){try{return l.value===a}catch(r){return!1}});f?f.select():this.setSelection(null)}}}}}}],
d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:11253,end:14167})}(ji.Morph);ji.RadioButtonGroup=QJ;ji.RadioButtonGroup=QJ;ji.RadioButtonGroup=QJ;var Txa=Object.freeze({__proto__:null,Button:WF,RadioButton:PJ,RadioButtonGroup:QJ}),Fd=lively.FreezerRuntime.recorderFor("lively.components/list.js");
Fd.asItem=eN;Fd.Morph=kl;Fd.Text=au;Fd.StyleSheet=cw;Fd.Label=bu;Fd.Icon=wp;Fd.morph=de;Fd.touchInputDevice=nr;Fd.pt=di;Fd.LinearGradient=kn;Fd.Color=ng;Fd.Rectangle=ye;Fd.rect=Dl;Fd.arr=Lf;Fd.Path=ci;Fd.string=Ih;Fd.signal=em;Fd.noUpdate=lp;Fd.once=cv;Fd.Button=WF;Fd.bowser=vs;Fd.asItem=eN;Fd.asItem=eN;var dR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListItemMorph")&&"function"===typeof d.ListItemMorph?d.ListItemMorph:d.ListItemMorph=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"displayItem",value:function(a,f,l,r,v,y,A){y=void 0===y?!1:y;var E=a.morph,F=E?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation={value:F,annotation:a.annotation}:"string"===typeof F?this.textString=F:this.value=F;this.tooltip=a.tooltip||this.tooltip||this.textString;this.itemIndex=f;this.position=v;if(A){f=A.fontFamily;v=A.selectionColor;
F=A.selectionFontColor;var H=A.nonSelectionFontColor,J=A.borderRadius,O=A.fontSize;A=A.padding;F&&this.selectionFontColor!==F&&(this.selectionFontColor=F);H&&this.nonSelectionFontColor!==H&&(this.nonSelectionFontColor=H);v&&this.selectionColor!==v&&(this.selectionColor=v);J&&J!=this.borderRadius&&(this.borderRadius=J);O&&this.fontSize!==O&&(this.fontSize=O);f&&this.fontFamily!==f&&(this.fontFamily=f);A&&!this.padding.equals(A)&&(this.padding=A)}a.autoFit&&(E.width=l);this.extent=Fd.pt(E?Math.max(E.width,
l):l,r);E?(a=E.getTransform().copy(),this.submorphs=[E],E.setTransform(a),E.position=Fd.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=y}},{key:"onDragStart",value:function(a){var f=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!f.multiSelect||!f.multiSelectViaDrag)f.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},
{key:"onDrag",value:function(a){var f=this.owner.owner;if(f.multiSelect&&f.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var l=f.selectedIndexes,r=f.itemMorphs;a!==this&&r.includes(a)&&(this._dragState.sourceIsSelected&&!a.isSelected?(Fd.arr.pushIfNotIncluded(l,a.itemIndex),f.selectedIndexes=l):!this._dragState.sourceIsSelected&&a.isSelected&&(Fd.arr.remove(l,a.itemIndex),f.selectedIndexes=l))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",
get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!Fd.touchInputDevice},fill:{derived:!0,get:function(){return Fd.touchInputDevice&&this.pressed?Fd.Color.gray.withA(.5):this.isSelected?this.selectionColor:Fd.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Fd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Fd.Color.blue},nonSelectionFontColor:{isStyleProp:!0,
defaultValue:Fd.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:924,end:5139})}(Fd.Label);Fd.ListItemMorph=dR;Fd.ListItemMorph=dR;Fd.ListItemMorph=
dR;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListScroller")&&"function"===typeof d.ListScroller?d.ListScroller:d.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var f=this,l=this.scroll.y;if(Fd.touchInputDevice){var r=this.owner.itemForClick(a);
r&&(r.pressed=!0,r.makeDirty(),setTimeout(function(){r.pressed=!1;if(0==l-f.scroll.y)return f.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},fill:{defaultValue:Fd.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=
[{name:"scrollbar"}]}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5141,end:6103})})(Fd.Morph);Fd.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-
1,b.selectedIndex+Math.round(b.height/b.itemHeight)));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var d=b.selectedIndexes;if(!b.multiSelect||!d.length)return b.execCommand("arrow up");var k=d[0];if("number"!==
typeof k)b.selectedIndexes=[k];else{var a=b.indexUp(k);d.includes(k)&&d.includes(a)?b.selectedIndexes=d.filter(function(f){return f!==k}):b.selectedIndexes=[a].concat(d.filter(function(f){return f!==a}))}return!0}},{name:"select down",exec:function(b){var d=b.selectedIndexes;if(!b.multiSelect||!d.length)return b.execCommand("arrow down");var k=d[0],a=b.indexDown(k);d.includes(k)&&d.includes(a)?b.selectedIndexes=d.filter(function(f){return f!==k}):b.selectedIndexes=[a].concat(d.filter(function(f){return f!==
a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=Fd.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var d,k,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return d=b.selectedIndex||0,f.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:d,requester:b.getWindow()||b,itemPadding:Fd.Rectangle.inset(0,2),multiSelect:!0}),2);k=f.yieldResult;a=k.selected;
a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),b.update());return f.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var d=b.padding,k=b.itemHeight,a=b.scroll,f=a.x;a=a.y;var l=Fd.pt(0,b.selectedIndex*k);d=b.height-k-d.top()-d.bottom();a=2>Math.abs(l.y-a)?l.y-d:2>Math.abs(l.y-a-.5*d)?l.y:l.y-.5*d;b.scroll=Fd.pt(f,a);return!0}}},{name:"print contents in text window",exec:function(b){var d="items of "+b.name,k=b.items.map(function(a){if("string"===
typeof a)return a;var f=a.string,l=a.label;a=a.annotation;var r="";l?r="string"===typeof l?r+l:r+l.map(function(v,y){return 0==y%2?v:""}).join(""):f&&(r+=f);a&&(r+=" ",r="string"===typeof a?r+a:r+a[0]);return r}).join("\n");return b.world().execCommand("open text window",{title:d,content:k,name:d,fontFamily:"Monaco, monospace"})}}];var XF=Ca("aQ",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("List")&&"function"===typeof d.List?d.List:d.List=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=Fd.pt(400,360));Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"__additionally_serialize__",value:function(a,f,l,r){var v=this;Zb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,a,f,l,r);this.whenRendered().then(function(){return v.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Fd.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var f=0;f<a.length;f++)switch(a[f].name){case "listItemContainer":var l=a[f];continue;case "scroller":var r=a[f]}r||(r=this.addMorph(new Fd.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",
fill:Fd.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(l||r)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);
a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(f){return f.isListItem})||a[0]}},{key:"clickOnItem",value:function(a){var f=this.itemForClick(a);this[2===a.state.clickCount?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,f)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(a){return this.items.find(function(f){return f===
a||f.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(f){return f===a||f.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,f){var l=this;f=void 0===f?this.items.length:f;var r=this.items;f=Math.min(r.length,Math.max(0,f));r.splice(f,0,Fd.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,f],undo:{target:this,selector:"removeItem",args:[a]}},function(){return l.update()})}},
{key:"removeItem",value:function(a){var f=this;a=this.find(a);var l=this.items,r=l.indexOf(a);-1!==r&&(l.splice(r,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,r]}},function(){return f.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;
return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,f=this.items;f&&this.scroller&&this.dontRecordChangesWhile(function(){var l=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,H=a.fontColor,J=a.padding,O=a.itemPadding,L=a.selectionColor,Y=a.selectionFontColor,S=a.nonSelectionFontColor,ea=
a.itemBorderRadius,qa=a.scrollBar,Fa=a.scroller,K=a.scrollable,Z=Fa.scroll.y;J=J||Fd.Rectangle.inset(0);var R=J.top(),U=J.left(),na=J.bottom();J=J.right();var aa=Math.max(0,Math.floor(Z/l)),xa=Math.min(f.length,aa+A/l+2);A=0;J=a.width-(U+J);r=Fd.arr.sortBy(r,function(Ka){return Ka.itemIndex});var jb=$jscomp.makeIterator(Fd.arr.partition(r,function(Ka){return Ka.itemIndex<aa}));r=jb.next().value;var ob=jb.next().value;ob=$jscomp.makeIterator(Fd.arr.partition(ob,function(Ka){return Ka.itemIndex>xa-
1}));jb=ob.next().value;ob=ob.next().value;r=[].concat($jscomp.arrayFromIterable(jb),$jscomp.arrayFromIterable(ob),$jscomp.arrayFromIterable(r));for(jb=0;jb<xa-aa;jb++){ob=aa+jb;var pa=f[ob];if(!pa){r.slice(jb).forEach(function(Ka){Ka.remove()});break}var ka={fontSize:E,fontFamily:F,fontColor:S||H,padding:O,borderRadius:ea||0,selectionFontColor:Y,nonSelectionFontColor:S,selectionColor:L},wa=r[jb];wa||(wa=r[jb]=v.addMorph(new Fd.ListItemMorph(ka)));wa.reactsToPointer=!K;wa.displayItem(pa,ob,J,l,Fd.pt(0,
l*ob),y.includes(ob),ka);A=Math.max(A,wa.width)}r.slice(xa-aa).forEach(function(Ka){return Ka.remove()});l=Math.max(R+na+l*f.length,a.height);v.setBounds(Fd.pt(U,R).subXY(0,Z).extent(Fd.pt(a.width,l)));Fa.extent=a.extent;qa.left=A-1;Fa.position=Fd.pt(0,0);qa.extent=Fd.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var f=this.itemHeight,l=this.itemScroll;a=new Fd.Rectangle(0,a*f,
this.width,f);f=this.innerBounds().insetByRect(this.padding).translatedBy(l);var r=0;a.bottom()>f.bottom()&&(r=a.bottom()-f.bottom());a.top()<f.top()&&(r=a.top()-f.top());this.itemScroll=l.addXY(0,r);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,f){}},{key:"onItemMorphClicked",value:function(a,f){var l=f.itemIndex;f=this.selectedIndexes;var r=f.includes(l),v=[];if(this.multiSelect)if(a.isShiftDown())if(r)v=f.filter(function(A){return A!=l});else{a=f[0];var y="number"===typeof a?
Fd.arr.range(l,a):[l];v=y.concat(f.filter(function(A){return!y.includes(A)}))}else v=this.multiSelectWithSimpleClick||a.isCommandKey()?r?f.filter(function(A){return A!=l}):[l].concat(f.filter(function(A){return A!=l})):[l];else v=[l];this.selectedIndexes=v}},{key:"onItemMorphDragged",value:function(a,f){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){Fd.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(a){}},
{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},
{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){return Fd.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Fd.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Fd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Fd.Color.rgb(21,
101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Fd.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:Fd.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Fd.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",
a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Fd.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Fd.Rectangle.inset(1),
set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Fd.asItem));this.itemScroll=Fd.pt(0,0);this.update();this.attributeConnections&&Fd.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",
defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var f=this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(l){return 0<=
l&&l<f}));this.update();Fd.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(f){return a.items[f]&&a.items[f].value})},set:function(a){var f=this;this.selectedIndexes=a.map(function(l){return f.findIndex(l)})}},selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=
this;return this.selectedIndexes.map(function(f){return a.items[f]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},
scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a},get:function(){var a=this.getProperty("itemHeight");if(a)return a;a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var f=this.itemPadding;f&&(a+=
f.top()+f.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.addStyleClass(a);this.setProperty("theme",a)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10507,end:27043})}(Fd.Morph));
Fd.List=XF;Fd.List=XF;Fd.List=XF;Fd.connect=Li;var RJ=Ca("aR",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("FilterableList")&&"function"===typeof d.FilterableList?d.FilterableList:d.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=
Fd.pt(400,360));Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Fd.connect(this.inputMorph,"inputChanged",this,"updateFilter");Fd.connect(this.listMorph,"selection",this,"selectionChanged");Fd.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Fd.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var a=this,f=this.attributeConnections;if(f){var l=["accepted","canceled","remove"];
f.filter(function(r){return l.includes(r.sourceAttrName)&&r.targetObj!==a}).forEach(function(r){return r.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var a=this.listMorph,f=this.inputMorph,l=this.paddingMorph,r=this.borderWidth;f.topLeft=Fd.pt(r,r);f.width=a.width=this.width-2*r;l&&(l.topLeft=f.bottomLeft);a.position=l?l.bottomLeft:f.bottomLeft;a.height=this.height-a.top-r}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",
value:function(a){Fd.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=this.get("input").textString,f=Array.from(a).reduce(function(r,v){if("\\"===v&&!r.escaped)return r.escaped=!0,r;" "!==v||r.escaped?(r.spaceSeen=!1,r.current+=v):(!r.spaceSeen&&r.current&&(r.tokens.push(r.current),r.current=""),r.spaceSeen=!0);r.escaped=!1;return r},{tokens:[],current:"",escaped:!1,spaceSeen:!1});
f.current&&f.tokens.push(f.current);var l=f.tokens.map(function(r){return r.toLowerCase()});return{tokens:f.tokens,lowercasedTokens:l,input:a}}},{key:"updateFilter",value:function(){var a=this,f=this.parseInput(),l=this.filterFunction,r=this.sortFunction,v=this.items.filter(function(E){return l.call(a,f,E)});r&&(v=Fd.arr.sortBy(v,function(E){return r.call(a,f,E)}));var y=this.listMorph,A=this.updateSelectionsAfterFilter?y.selectedIndexes.map(function(E){return v.indexOf(y.items[E])}).filter(function(E){return-1!==
E}):y.selectedIndexes;y.items=v;y.selectedIndexes=A.length?A:v.length?[0]:[];this.scrollSelectionIntoView();Fd.signal(this,"filterChanged",{parsedInput:f,items:y.items})}},{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};Fd.signal(this,"accepted",a);return a}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},
{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(Fd.arr.range(0,8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",
args:{actionNo:a}}}}))).concat(Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return Zb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"accept input",exec:function(f){a.acceptInput();return!0}},{name:"cancel",exec:function(f){Fd.signal(f,"canceled");return!0}},{name:"choose action and accept input",exec:function(f,l){l=void 0===l?{}:l;f.selectedAction=(f.actions||[])[void 0===l.actionNo?0:l.actionNo];return f.execCommand("accept input")}},
{name:"choose action",exec:function(f){var l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(!f.actions)return y.return(!0);l=Object.assign({},f.style,{extent:f.extent});r=new Fd.FilterableList(l);r.openInWorld(f.globalPosition);r.items=f.actions;v=f.actions.indexOf(f.selectedAction);-1===v&&(v=0);r.selectedIndex=v;Fd.connect(r,"accepted",f,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return A.selected[0]}});Fd.connect(r,
"canceled",f,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});r.focus();return y.return(!0)})}}].concat($jscomp.arrayFromIterable(Fd.listCommands.map(function(f){return Object.assign({},f,{exec:function(l,r,v){return f.exec(a.listMorph,r,v)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:Fd.Color.transparent},
borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[Fd.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new Fd.morph({name:"padding",fill:Fd.Color.transparent}),
new Fd.List({name:"list",items:[],clipMode:"auto"})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,
after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=a}},itemPadding:{isStyleProp:!0,
derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},
set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(Fd.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},
set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,
after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=
this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(l){return f.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||
(this._fuzzySortFunction=function(f,l){var r=String(Fd.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;f.lowercasedTokens.forEach(function(y){r.startsWith(y)?v-=10:r.includes(y)&&(v-=5)});return Fd.arr.sum(f.lowercasedTokens.map(function(y){return Fd.string.levenshtein(r.toLowerCase(),y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(f,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;
var v=String(Fd.Path(r).get(l)).toLowerCase();return 3>=Fd.arr.sum(f.lowercasedTokens.map(function(y){return Fd.string.levenshtein(v,y)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:27156,end:41505})}(Fd.Morph));Fd.FilterableList=RJ;Fd.FilterableList=RJ;Fd.FilterableList=RJ;var SJ=Ca("bt",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("DropDownList")&&"function"===typeof d.DropDownList?d.DropDownList:d.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),
value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Fd.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var f=this;setTimeout(function(){var l=f.listMorph,r=f.world()&&f.world().focusedMorph;if(l!==r&&r!==f&&l.world()&&
!l.withAllSubmorphsDetect(function(v){return v==r}))l.fadeOut(200);else Fd.once(Fd.touchInputDevice?l.scroller:l,"onBlur",f,"removeWhenFocusLost")},100)}},{key:"toggleList",value:function(){var a=this,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){f=a.listMorph;if(a.isListVisible())return Fd.signal(a,"deactivated"),a.selection=f.selection,f.epiMorph=!1,f.remove(),v.jumpTo(0);Fd.signal(a,"activated");a.openListInWorld?(f.openInWorld(),f.epiMorph=!0,f.hasFixedPosition=
!0,f.setTransform(a.getGlobalTransform()),l=a.globalBounds()):(l=a.innerBounds(),a.addMorph(f));r=f.items.length*f.itemHeight+f.padding.top()+f.padding.bottom();f.extent=Fd.pt(a.width,Math.min(a.listHeight,r));"top"===a.listAlign?f.bottomLeft=l.topLeft():f.topLeft=l.bottomLeft();Fd.once(f,"onItemMorphClicked",a,"toggleList");Fd.once(Fd.touchInputDevice?f.scroller:f,"onBlur",a,"removeWhenFocusLost");return v.yield(f.whenRendered(),3)}if(4!=v.nextAddress)return v.yield(f.whenRendered(),4);Fd.touchInputDevice?
f.scroller.focus():f.focus();f.scrollSelectionIntoView();v.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(Zb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:Fd.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new Fd.List({name:"dropDownList"});this.setProperty("listMorph",a);return a}},items:{derived:!0,
after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){var f=this,l=this.items.find(function(r){return r.value==f.selection});this.listMorph.items=a;l&&Fd.noUpdate(function(){f.selection=f.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var f=this.listAlign,l=this.listMorph;if(a){var r=l.items,v=l.find(a);v||"string"!==typeof a||(v=r.find(function(A){return A.string===a}));if(!v)return;var y=
v.label||[v.string,null];y=[].concat($jscomp.arrayFromIterable(y),[" ",null],$jscomp.arrayFromIterable(Fd.Icon.textAttribute("caret-"+("bottom"===f?"down":"up"))));y[5]&&(y[5].paddingRight="0px",y[5].textStyleClasses=["fa","annotation"]);this.label=y;this.relayout();l.selectedIndex=r.indexOf(v)}else l.selection=null,this.label="";Fd.signal(this,"selection",l.selection)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41514,end:46418})}(Fd.Button));Fd.DropDownList=SJ;Fd.DropDownList=SJ;Fd.DropDownList=SJ;var eR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("InteractiveItem")&&"function"===typeof d.InteractiveItem?d.InteractiveItem:d.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,
b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!f.item.isPreview)return r.jumpTo(0);l=a.hand.grabbedMorphs[0];Zb._get(Object.getPrototypeOf(k.prototype),"onDrop",f).call(f,a);return r.yield(f.list.whenRendered(),3)}f.list.addItemAt({morph:l,isListItem:!0},f.itemIndex);f.list.clearPreviews();r.jumpToEnd()})}},
{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){Fd.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){Fd.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(a,f,l,r,v,y,A){y=void 0===y?!1:y;Zb._get(Object.getPrototypeOf(k.prototype),"displayItem",this).call(this,a,f,l,r,v,y,A);a.morph&&(a.morph.selected=y)}},{key:"onGrab",
value:function(a){var f=this.list,l=a.halo&&a.halo.target===this;l&&a.halo.detachFromTarget();var r=this.submorphs.length?this.submorphs[0]:Fd.morph({type:"label",value:this.value});a.hand.grab(r);r.position=a.hand.localize(this.globalPosition);l&&a.halo.refocus(r);f.removeItem(this.list.items[this.itemIndex]);f.itemMorphs.forEach(function(v){return v.remove()});f.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!Fd.touchInputDevice},
item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46427,end:48676})}(Fd.ListItemMorph);Fd.InteractiveItem=eR;Fd.InteractiveItem=
eR;Fd.InteractiveItem=eR;var fR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("MorphList")&&"function"===typeof d.MorphList?d.MorphList:d.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onLoad",value:function(){Zb._get(Object.getPrototypeOf(k.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",
value:function(a,f){a=a.itemIndex;this.items[a].isPreview&&f||(this.clearPreviews(),f&&this.addItemAt({isListItem:!0,isPreview:!0,morph:Fd.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Fd.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=this;this.items.filter(function(f){return f.morph&&f.morph.owner&&!Fd.Path("morph.owner.isListItem").get(f)}).map(function(f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(a.removeItem(f))})});
this.items.filter(function(f){return f.isPreview}).map(function(f){return a.removeItem(f)})}},{key:"update",value:function(){var a=this,f=this.items;f&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,H=a.fontColor,J=a.padding,O=a.itemPadding,L=a.selectionColor,Y=a.selectionFontColor,S=a.nonSelectionFontColor,ea=a.itemBorderRadius,
qa=a.scrollBar,Fa=a.scroll.y;J=J||Fd.Rectangle.inset(0);var K=J.top(),Z=J.left(),R=J.bottom();J=J.right();var U=Math.max(0,Math.floor(Fa/l)),na=Math.min(f.length,Math.ceil((Fa+A)/l));A=0;Fa=a.width-(Z+J);r=Fd.arr.sortBy(r,function(jb){return jb.itemIndex});var aa=$jscomp.makeIterator(Fd.arr.partition(r,function(jb){return jb.itemIndex<U}));r=aa.next().value;var xa=aa.next().value;xa=$jscomp.makeIterator(Fd.arr.partition(xa,function(jb){return jb.itemIndex>na}));aa=xa.next().value;xa=xa.next().value;
r=[].concat($jscomp.arrayFromIterable(aa),$jscomp.arrayFromIterable(xa),$jscomp.arrayFromIterable(r));E={fontSize:E,fontFamily:F,fontColor:S||H,padding:O,borderRadius:ea||0,selectionFontColor:Y,nonSelectionFontColor:S,selectionColor:L};r.length&&na-U>r.length&&(U!=r[0].itemIndex?Fd.arr.pushAt(r,v.addMorph(new Fd.InteractiveItem(E)),0):na!=Fd.arr.last(r).itemIndex&&r.push(v.addMorph(new Fd.InteractiveItem(E))));for(F=0;F<na-U;F++){H=U+F;O=f[H];if(!O){r.slice(F).forEach(function(jb){return jb.remove()});
break}L=r[F];L||(L=r[F]=v.addMorph(new Fd.InteractiveItem(E)),L.clipMode="visible");L.displayItem(O,H,Fa,l,Fd.pt(0,l*H),y.includes(H),E);A=Math.max(A,L.width)}l=Math.max(K+R+l*f.length,a.height);y=Fd.pt(a.width,l).subPt(Fd.pt(Z+J,0));v.setBounds(Fd.pt(Z,K).extent(y));qa.left=A-10;qa.fill=null;qa.top=0;qa.extent=Fd.pt(1,l)}))}},{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return Fd.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Fd.asItem));this.itemMorphs.forEach(function(f){return f.remove()});this.update();this.attributeConnections&&Fd.signal(this,"values",this.values)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48685,end:53917})}(Fd.List);Fd.MorphList=fR;Fd.MorphList=fR;Fd.MorphList=fR;var Uxa=Object.freeze({__proto__:null,asItem:eN,ListItemMorph:dR,List:XF,FilterableList:RJ,DropDownList:SJ,InteractiveItem:eR,MorphList:fR}),bh=lively.FreezerRuntime.recorderFor("lively.components/menus.js");bh.Label=bu;bh.config=Ul;bh.Morph=kl;bh.obj=dg;bh.promise=Hg;bh.fun=gn;
bh.pt=di;bh.Color=ng;bh.Rectangle=ye;var gR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("MenuDivider")&&"function"===typeof d.MenuDivider?d.MenuDivider:d.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},
fill:{defaultValue:bh.Color.gray.lighter()},extent:{defaultValue:bh.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(bh.Morph);bh.MenuDivider=gR;bh.MenuDivider=gR;bh.MenuDivider=gR;var hR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
k=d.hasOwnProperty("MenuItem")&&"function"===typeof d.MenuItem?d.MenuItem:d.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onHoverIn",value:function(a){var f=this;this.owner.itemMorphs.forEach(function(l){return l!==f&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var f=this,l=a.hand;setTimeout(function(){(f.owner?
f.owner.submenus:[]).some(function(r){return r.fullContainsWorldPoint(l.globalPosition)})||(f.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(a){var f=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(f.submenu)return v.return();v.setCatchFinallyBlocks(2);f.owner.startFinish();if("function"!==typeof f.action)throw Error("Menu item "+f.textString+" has no executable action!");return v.yield(f.action(),4)}if(2!=v.nextAddress)return f.owner.completeFinish(),
v.leaveTryBlock(0);l=v.enterCatchBlock();(r=f.world())?r.logError(l):console.error(l);v.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:bh.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==
a&&(this.addValueChange("selected",a),a?(this.fontColor=bh.Color.white,this.fill=bh.Color.rgb(21,101,192)):(this.fill=bh.Color.transparent,this.fontColor=bh.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,f){return 0===f%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation=
{value:this.value,annotation:a}}},action:{},submenu:{}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(bh.Label);bh.MenuItem=hR;bh.MenuItem=hR;bh.MenuItem=hR;bh.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var iR=
Ca("aS",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("Menu")&&"function"===typeof d.Menu?d.Menu:d.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},
{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();Zb._get(Object.getPrototypeOf(k.prototype),
"remove",a).call(a);f.jumpToEnd()})}},{key:"ensureItem",value:function(a){if(!a)return bh.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return bh.obj.select(a,["string","action","annotation"]);if(Array.isArray(a)){var f=$jscomp.makeIterator(a),l=f.next().value;f=f.next().value;return"string"===typeof l||Array.isArray(l)?f&&"function"!==typeof f?"object"===typeof f&&f.getItems?{label:l,submenu:f.getItems,annotation:[" ",
{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(f)?{label:l,submenu:f,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:bh.invalidItem:{label:l,action:f||function(){return $world.setStatusMessage(l)}}:bh.invalidItem}if(a.command){var r=a.command,v=a.showKeyShortcuts,y=a.target;f=a.alias;var A=a.args;if(!r||!y)return bh.invalidItem;void 0===v&&(v=!0);a=v?"string"===typeof v?v:y.keysForCommand(r):null;return{string:f||r,annotation:a?["\t"+a,{fontSize:"70%"}]:["",{}],action:function(){return y.execCommand(r,
A)}}}return bh.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var f=this.padding.left(),l=this.padding.right(),r=this.padding.top(),v=this.padding.bottom(),y=0,A=bh.pt(f,r),E={};this.fontFamily&&(E.fontFamily=this.fontFamily);this.fontSize&&(E.fontSize=this.fontSize);this.itemPadding&&(E.padding=this.itemPadding);this.title&&(r=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:A,fontWeight:"bold"},E)),A=r.bottomLeft,y=Math.max(r.width,
y));this.items.forEach(function(F){var H=F.label,J=F.string,O=F.annotation,L=F.action,Y=F.submenu;F=a.addMorph(F.isDivider?new bh.MenuDivider({position:A}):new bh.MenuItem(Object.assign({label:H||J,annotation:O,action:L,submenu:Y,position:A},E)));A=F.bottomLeft;y=Math.max(F.width,y)});this.submorphs.forEach(function(F){F.isLabel&&(F.fit(),F.autofit=!1,F.fixedWidth=!0,F.fixedHeight=!0);F.width=y});this.extent=bh.pt(y+l+f,A.y+v)}},{key:"openSubMenuDelayed",value:function(a,f,l){var r=this;this.openingSubMenuProcess&&
clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{r.openSubMenu(a,f,l)}catch(y){var v=r.world();v?v.logError(y):console.error(y)}},200)}},{key:"openSubMenu",value:function(a,f,l){if(f.selected){var r=this.submenu;if(r){if(r.ownerItemMorph===f||this.morphsContainingPoint(a.position).includes(r))return;this.removeSubMenu()}"function"===typeof l&&(l=l());a=this.submenu=this.addMorph(new bh.Menu({items:l,ownerItemMorph:f,ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},
{key:"maybeRemoveSubmenu",value:function(){var a=this;bh.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var f=a.world();if(f){var l=a.submenu,r=a.selectedItemMorph;f=f&&l&&l.fullContainsWorldPoint(f.firstHand.position);l&&l.ownerItemMorph!==r&&!l.ownerItemMorph.selected&&(f?(r&&(r.selected=!1),l.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},
{key:"moveBoundsForVisibility",value:function(a,f){var l=0,r=0;a.right()>f.right()&&(l=-1*(a.right()-f.right()));var v=a.left()+l;0>v&&(l+=-v);a.bottom()>f.bottom()&&(r=-1*(a.bottom()-f.bottom()),l+=1);f=a.top()+r;0>f&&(r+=-f);return a.translatedBy(bh.pt(l,r))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,f,l,r){r||(r=f.right()+a.width>l.right()?"left":"right");a=a.extent();a="left"===r?f.topLeft().addXY(-a.x,0).extent(a):f.topRight().extent(a);a.bottom()>l.bottom()&&(f=-1*(a.bottom()-
l.bottom()),a=a.translatedBy(bh.pt(0,f)));a.top()<l.top()&&(l=l.top()-a.top(),a=a.translatedBy(bh.pt(0,l)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,f=this.world().visibleBounds(),l=a.getGlobalTransform().inverse().transformRectToRect(f);a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),l),f);this.setBounds(a)}},{key:"clipForVisibility",value:function(a,f){a=void 0===a?
this.bounds():a;f=void 0===f?this.world().visibleBounds():f;var l=this.transformRectToMorph(this.world(),a.withX(0).withY(0));f.containsRect(l.insetBy(10))||(a=a.withExtent(bh.pt(5+a.width,Math.min(l.height,f.height))));return a}},{key:"offsetForWorld",value:function(a){a=this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var f=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,f),f)}this.setBounds(a)}},{key:"onHoverOut",value:function(){this.removeOnMouseOut&&
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(a,f){f=void 0===f?{title:""}:f;return new this(Object.assign({},f,{items:a}))}},{key:"openAt",value:function(a,f,l){l=void 0===l?{title:""}:l;f=this.forItems(f,l).openInWorldNear(a);f.offsetForWorld(a);return f}},{key:"openAtHand",value:function(a,f){f=void 0===f?{title:""}:f;var l=f.hand;a=this.forItems(a,bh.obj.dissoc(f,["hand"]));l=l?l.position:bh.pt(0,0);a.titleMorph&&(l=l.addXY(0,
-a.titleMorph.height));a.openInWorld(l);a.offsetForWorld(l);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(bh.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:bh.Rectangle.inset(0,2)},itemPadding:{defaultValue:bh.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},
fill:{defaultValue:bh.Color.white},borderColor:{defaultValue:bh.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",a)}},finishedPromise:{initialize:function(){this.finishedPromise=bh.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,
get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16023})}(bh.Morph));bh.Menu=iR;bh.Menu=iR;bh.Menu=iR;var Vxa=Object.freeze({__proto__:null,MenuDivider:gR,MenuItem:hR,Menu:iR}),Ik=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");Ik.arr=Lf;Ik.pt=di;Ik.Color=ng;
Ik.Morph=kl;var jR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("VerticalResizer")&&"function"===typeof d.VerticalResizer?d.VerticalResizer:d.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||
"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.x-this.extent.x;if(!(0>f)){var l=this.getRelativeDivide();this.movedHorizontallyBy(f*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.left();f=this.owner.extent.x-f.width;return 0>f?NaN:a/f}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingRight).forEach(function(f){var l=f.position;f.position=Ik.pt(l.x+a,l.y)}),this.scalingLeft.forEach(function(f){var l=f.extent;
f.extent=Ik.pt(l.x+a,l.y)}),this.scalingRight.forEach(function(f){var l=f.extent;f.extent=Ik.pt(l.x-a,l.y)}),this.position=this.position.addPt(Ik.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingLeft.every(function(l){return l.extent.x+a>=f.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-a>=f.minWidth})}},{key:"addFixed",value:function(a){Ik.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){Ik.arr.pushIfNotIncluded(this.scalingLeft,
a)}},{key:"addScalingRight",value:function(a){Ik.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ik.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(Ik.Morph);Ik.VerticalResizer=jR;Ik.VerticalResizer=jR;Ik.VerticalResizer=jR;var kR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("HorizontalResizer")&&"function"===typeof d.HorizontalResizer?d.HorizontalResizer:d.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.y-this.extent.y;if(!(0>f)){var l=this.getRelativeDivide();this.movedVerticallyBy(f*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.top();f=this.owner.extent.y-f.height;
return 0>f?NaN:a/f}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(f){var l=f.position;f.position=Ik.pt(l.x,l.y+a)}),this.scalingAbove.forEach(function(f){var l=f.extent;f.extent=Ik.pt(l.x,l.y+a)}),this.scalingBelow.forEach(function(f){var l=f.extent;f.extent=Ik.pt(l.x,l.y-a)}),this.position=this.position.addPt(Ik.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingAbove.every(function(l){return l.extent.y+
a>=f.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-a>=f.minHeight})}},{key:"addFixed",value:function(a){Ik.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){Ik.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){Ik.arr.pushIfNotIncluded(this.scalingBelow,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ik.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(Ik.Morph);Ik.HorizontalResizer=
kR;Ik.HorizontalResizer=kR;Ik.HorizontalResizer=kR;var Wxa=Object.freeze({__proto__:null,VerticalResizer:jR,HorizontalResizer:kR}),og=lively.FreezerRuntime.recorderFor("lively.components/tree.js");og.arr=Lf;og.fun=gn;og.obj=dg;og.tree=ux;og.string=Ih;og.promise=Hg;og.pt=di;og.Rectangle=ye;og.Color=ng;og.Morph=kl;og.Text=au;og.config=Ul;og.touchInputDevice=nr;og.Label=bu;og.connect=Li;og.signal=em;og.bowser=vs;var lR=Ca("bs",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
k=d.hasOwnProperty("Tree")&&"function"===typeof d.Tree?d.Tree:d.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",
value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var f=
this.textLayout.charBoundsOfRow(this,a);a=og.Rectangle.fromLiteral(og.arr.first(f)).topLeft();f=og.Rectangle.fromLiteral(og.arr.last(f)).bottomRight();return og.Rectangle.fromAny(a,f)}},{key:"recoverOriginalLine",value:function(a){for(var f=this.document.getTextAndAttributesOfLine(a),l=0;l<f.length;l++){var r=this._originalColor[l];r&&!og.obj.isString(f[l])&&(f[l]?f[l].fontColor=r:f[l]={fontColor:r})}this.document.setTextAndAttributesOfLine(a,f)}},{key:"renderSelectedLine",value:function(a){var f=
this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(f.length);for(var l=0;l<f.length;l++)0===l%2?f[l]&&f[l].isMorph&&(this._originalColor[l]=f[l]?f[l].fontColor||this.nonSelectionFontColor:null,f[l].fontColor=this.selectionFontColor,f[l].isSelected=!0):(this._originalColor[l]=(f[l]?f[l].fontColor:null)||this.nonSelectionFontColor,f[l]?f[l].fontColor=this.selectionFontColor:f[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,f);this.selectLine(a,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var f=og.arr.genN(8*(a.length-1),function(){return null}),l=1,r,v,y=this.disableIndent?0:1.3*this.fontSize;l<a.length;l++){r=8*(l-1);v=this.selectedIndex==l;a[l].node.isSelected=v;f[r]=" ";f[r+1]={fontSize:y,fontColor:og.Color.transparent,textStyleClasses:["fas"],paddingRight:y*(a[l].depth-1)+"px"};f[r+3]={fontColor:og.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[l].node)?f[r+2]=this.disableIndent?"":"    ":(f[r+2]=this.treeData.isCollapsed(a[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(f[r+3],{paddingRight:this.treeData.isCollapsed(a[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var A=this.treeData.safeDisplay(a[l].node);A.isMorph&&(A._capturedProps&&Object.assign(A,A._capturedProps),v&&(A._capturedProps=og.obj.select(A,["fontColor"])),
A.fontColor=this.nonSelectionFontColor);f[r+4]=A;og.arr.isArray(A)?f[r+5]=[]:f[r+5]={fontColor:this.fontColor};f[r+6]="\n";f[r+7]={}}f.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?og.arr.flatten(f):[]}},{key:"update",value:function(a){var f=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var l=f.treeData.asListWithIndexAndDepth();f.treeData!==f.lastTreeData||f.lastNumberOfNodes!==
l.length||a?(f.replace({start:{row:0,column:0},end:f.documentEndPosition},f.computeTreeAttributes(l),!1,!1),f.invalidateTextLayout(!0,!1),f.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){f.makeDirty();r.jumpToEnd()})})):f._lastSelectedIndex&&f.recoverOriginalLine(f._lastSelectedIndex-1);f.lastTreeData=f.treeData;f.lastNumberOfNodes=l.length;f.cursorPosition={row:0,column:0};0<f.selectedIndex&&f.renderSelectedLine(f.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(a){var f=this;"function"!==typeof a&&(a=function(v){return v});var l=this.selectedNode?a(this.selectedNode):null,r=new Map;og.tree.prewalk(this.treeData.root,function(v){return r.set(a(v),f.treeData.isCollapsed(v))},function(v){return f.treeData.getChildrenIfUncollapsed(v)});return{selectionId:l,collapsedMap:r,scroll:this.scroll}}},{key:"applyViewState",value:function(a,f){var l=this,r,v,y,A,E,F,H,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:"function"!==
typeof f&&(f=function(L){return L}),r=a,v=r.selectionId,y=r.collapsedMap,A=r.scroll,E=0,F=-1;case 2:H=l.nodes;if(E>=H.length){O.jumpTo(3);break}J=f(H[E]);v===J&&(F=E);if(!y.has(J)||y.get(J)){O.jumpTo(4);break}return O.yield(l.treeData.collapse(H[E],!1),4);case 4:E++;O.jumpTo(2);break;case 3:return l.selectedIndex=F,l.update(),l.scroll=A,l.scrollSelectionIntoView(),O.yield(og.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,f){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(r=l.buildViewState(f),v.yield(a(),2)):v.yield(l.applyViewState(r,f),0)})}},{key:"onNodeCollapseChanged",value:function(a){var f=a.node,l=a.isCollapsed,r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r.resetCache(),y.setCatchFinallyBlocks(2),y.yield(r.treeData.collapse(f,l),4);if(2!=y.nextAddress)return og.signal(r,"nodeCollapseChanged",{node:f,isCollapsed:l}),r.update(),y.leaveTryBlock(0);v=y.enterCatchBlock();r.showError(v);y.jumpToEnd()})}},
{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?a&&f.treeData.isCollapsed(a)?l.yield(f.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):l.return():l.return(a)})}},{key:"collapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!a||f.treeData.isCollapsed(a)?l.return():l.yield(f.onNodeCollapseChanged({node:a,
isCollapsed:!0}),2):l.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=f,r.yield(f.treeData.followPath(a),2)):r.return(l.selectedNode=r.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-1,column:0})}},{key:"contextMenuForNode",value:function(a,f){og.signal(this,"contextMenuRequested",{node:a,evt:f})}},{key:"onKeyDown",value:function(a){var f=this.world().focusedMorph;if(!f.isText||
f.readOnly)return Zb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,a);var f=this.textAttributeAtPoint(a.positionIn(this))||{},l=f.onDragStart,r=f.onDrag;f=f.onDragEnd;r&&(this._onDragHandler=r);f&&(this._onDragEndHandler=f);l&&l(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):Zb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,
a)}},{key:"onDragEnd",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var f=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return l=f.textPositionFromPoint(a.positionIn(f)),r=l.row,v=l.column,y=f.nodes[r+1],y?!f.treeData.isLeaf(y)&&4>v?F.yield(y.isCollapsed,
3):(f.selectedIndex!=r+1&&(f.selectedIndex=r+1),F.jumpTo(2)):F.return();2!=F.nextAddress&&(F.yieldResult?f.uncollapse(y):f.collapse(y));A=f.textAttributeAt({row:r,column:v})||{};(E=A.onMouseDown)&&E(a);F.jumpToEnd()})}},{key:"onMouseUp",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,a);var f=(this.textAttributeAtPoint(a.positionIn(this))||{}).onMouseUp;f&&f(a)}},{key:"onHoverIn",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,
a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,a);!og.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var f=this.textPositionFromPoint(a.positionIn(this));(f=this.nodes[f.row+1])&&this.contextMenuForNode(f,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return og.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(f){f=$jscomp.makeIterator(f);var l=f.next().value;f.next();return l.renderedNode&&l.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:og.Color.rgb(21,101,192)},fontFamily:{defaultValue:og.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:og.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},Zb._get(Object.getPrototypeOf(k),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:og.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:og.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(og.Text));og.Tree=lR;og.Tree=lR;og.Tree=lR;var mR=Ca("bq",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),k=d.hasOwnProperty("TreeData")&&"function"===typeof d.TreeData?d.TreeData:d.TreeData=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");
}},{key:"collapse",value:function(a,f){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(f){return"[TreeData] Error when trying to display node: "+f}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);
return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(f,l){return 0===l%2?f:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var f=this;return this.parentMap.get(a)||og.tree.detect(this.root,function(l){return!f.isLeaf(l)&&f.getChildrenIfUncollapsed(l).includes(a)},function(l){return f.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},
{key:"asListWithIndexAndDepth",value:function(a){var f=this;a=void 0===a?!1:a;var l=[];og.tree.prewalk(this.root,function(r,v,y){return l.push({node:r,depth:y,i:v})},function(r){return f.getChildrenIfUncollapsed(r)});return a?og.arr.filter(l,a):l}},{key:"pathOf",value:function(a){for(var f=[];a;)f.unshift(a),a=this.parentNode(a);return f}},{key:"followPath",value:function(a,f,l){l=void 0===l?this.root:l;var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:f||
(f=function(H,J){return H===J});v=a.findIndex(function(H){return f(H,l)});a=a.slice(v+1);if(!a.length)return F.return(null);y=l;case 2:if(!a.length){F.jumpTo(3);break}if(!r.isCollapsed(y)){F.jumpTo(4);break}return F.yield(r.collapse(y,!1),4);case 4:A=a.shift();E=r.getChildrenIfUncollapsed(y).find(function(H){return f(A,H)});if(!E)throw Error("Cannot descend into tree, next node of "+a.join(".")+" not found at "+r.safeDisplay(y));y=E;F.jumpTo(2);break;case 3:return F.return(y)}})}},{key:"diff",value:function(a){var f=
[],l=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(l.length!=a.length)return[];l=$jscomp.makeIterator(og.arr.zip(l,a));for(a=l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;og.obj.equals(a.node.value,r&&r.node.value)||f.push([a.node,r.node])}return f}},{key:"patch",value:function(a){var f=this.diff(a);if(0<f.length){a=$jscomp.makeIterator(f);for(f=a.next();!f.done;f=a.next()){var l=$jscomp.makeIterator(f.value);f=l.next().value;
l=l.next().value;f.value=l.value}return this}return a}},{key:"uncollapseAll",value:function(a,f,l){f=void 0===f?0:f;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(l){A.jumpTo(2);break}return A.yield(r.uncollapseAll(a,f,r.root),3);case 3:return A.return(A.yieldResult);case 2:if(!a(l,f)){A.jumpTo(0);break}if(!l.isCollapsed){A.jumpTo(5);break}return A.yield(r.collapse(l,!1),6);case 6:case 5:y=A.forIn(l.children);case 7:if(null==(v=y.getNext()))A.jumpTo(0);
else return A.yield(r.uncollapseAll(a,f+1,l.children[v]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,end:22466})}(void 0));og.TreeData=mR;og.TreeData=mR;og.TreeData=mR;og.treeCommands=[{name:"select via filter",
exec:function(b){var d,k,a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=b.treeData,d.asListWithIndexAndDepth(),d.asListWithIndexAndDepth().map(function(y){return Object.assign(y,{string:d.nodeToString(y.node)})}),k=og.string.lines(og.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d))),a=d.asList().map(function(y,A){return{isListItem:!0,string:k[A],value:y}}),v.yield(b.world().filterableListPrompt("Select item",a),
2);f=v.yieldResult;l=$jscomp.makeIterator(f.selected);if(r=l.next().value)b.selectedNode=r,b.scrollSelectionIntoView();return v.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var d=b.scroll,k=b.padding.top(),a=d.y;d=b.lineHeightCache.findIndex(function(f){return a<=(k+=f)});d--;b.gotoIndex(Math.max(1,d));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var d=b.scroll,k=b.padding.top(),a=d.y+b.height;d=b.lineHeightCache.findIndex(function(f){return a<=(k+=f)});d--;
b.gotoIndex(Math.min(d,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var d=b.selectedNodeAndSiblings;if(d=d[d.indexOf(b.selectedNode)+1])b.selectedNode=d,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var d=b.selectedNodeAndSiblings;if(d=d[d.indexOf(b.selectedNode)-1])b.selectedNode=d,b.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(d=b.selectedNode,d?b.treeData.isCollapsed(d)?(b.selectedNode=b.treeData.parentNode(d),b.scrollSelectionIntoView(),k.jumpTo(2)):k.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):k.return(!0)):
k.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?b.selectedNode?d.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):d.jumpTo(2):d.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,d){function k(F){return og.arr.filter(l.getChildrenIfUncollapsed(F),function(H){return!l.isLeaf(H)})}function a(F,H){return Promise.all(F.map(function(J){return b.onNodeCollapseChanged({node:J,
isCollapsed:H})}))}d=void 0===d?{what:"collapse"}:d;var f,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress){f="collapse"===d.what;l=b.treeData;if(f){if(l.isCollapsed(b.selectedNode))return F.return(!0);v=l.parentNode(b.selectedNode);y=-1;og.tree.prewalk(v,function(H,J,O){O<y||(O>y&&(y=O,r=[]),O===y&&og.arr.pushIfNotIncluded(r,l.parentNode(H)))},l.getChildrenIfUncollapsed.bind(l))}else for(A=og.arr.compact([l.parentNode(b.selectedNode)]);A.length;){r=og.arr.flatmap(A,
function(H){return k(H)});E=r.every(function(H){return l.isCollapsed(H)===f});if(!E)break;A=r}return F.yield(a(r,f),2)}b.scrollSelectionIntoView();return F.return(!0)})}},{name:"select node above",exec:function(b){var d=b.nodes,k=b.selectedIndex;1>=k&&(k=d.length);b.selectedNode=d[k-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var d=b.nodes,k=b.selectedIndex;if(-1>=k||k>=d.length-1)k=0;b.selectedNode=d[k+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(b){if(b.selectedNode){var d=b.scroll,k=d.x;d=d.y;var a=b.lineBounds(b.selectedIndex),f=a.topLeft();a=b.height-a.height;d=2>Math.abs(f.y-d)?f.y-a:2>Math.abs(f.y-d-.5*a)?f.y:f.y-.5*a;b.scroll=og.pt(k,d);return!0}}},{name:"print contents in text window",exec:function(b){var d=b.treeData;d=og.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d));var k=b.getWindow()?"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:k,
content:d,name:k,fontFamily:og.config.codeEditor.defaultStyle.fontFamily})}}];var Xxa=Object.freeze({__proto__:null,Tree:lR,TreeData:mR}),xA=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");xA.promise=Hg;xA.HTMLMorph=bA;var nR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");Zb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,f){var l=this,r=this.iframe,v=this._loadPromise;v&&!v.loaded&&v.reject();this._loadPromise=xA.promise.deferred();this._loadPromise.loaded=!1;r.onload=function(y){l._loadPromise.loaded=!0;l._loadPromise.resolve(y)};f=a||f;
v=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(v,f);r.removeAttribute(a);r.setAttribute(v,f);this._loadPromise[v]=f}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return A.yield(a.whenRendered(),2);if(3!=A.nextAddress)return f=a.env.renderer.getNodeForMorph(a),l=xA.IFrameMorph.open({srcdoc:f.outerHTML}),A.yield(l.whenLoaded(),3);r=l.innerWindow.document;r.body.style.whiteSpace="normal";r.body.style.margin="0.5cm";r.querySelector(".Text").style.width="100%";r.querySelector(".Text").style.overflow="visible";r.querySelectorAll(".marker-layer-part").forEach(function(E){return E.parentNode.removeChild(E)});v=r.querySelector(".text-layer");v.style.whiteSpace=
"pre-wrap";y=Array.from(v.querySelectorAll("div"));y.forEach(function(E){E.childNodes[0]&&(Array.from(E.childNodes).forEach(function(F){return v.insertBefore(F,E)}),v.insertBefore(r.createElement("br"),E),v.removeChild(E))});l.innerWindow.print();l.getWindow().remove();A.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],d,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,end:6160})}(xA.HTMLMorph);xA.IFrameMorph=nR;xA.IFrameMorph=nR;xA.IFrameMorph=nR;var Yxa=Object.freeze({__proto__:null,IFrameMorph:nR}),mf=lively.FreezerRuntime.recorderFor("lively.components/window.js");
mf.arr=Lf;mf.promise=Hg;mf.pt=di;mf.LinearGradient=kn;mf.Color=ng;mf.Rectangle=ye;mf.Label=bu;mf.morph=de;mf.Morph=kl;mf.HorizontalLayout=Zt;mf.StyleSheet=cw;mf.connect=Li;mf.signal=em;mf.easings=mr;var t_=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/window.js"),k=d.hasOwnProperty("Window")&&"function"===typeof d.Window?d.Window:d.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,
b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,f,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){return 1==F.nextAddress?(f=a.world()||a.env.world,l=a.targetMorph.world(),r=l.openMenu,v=[["Change Window Title",function(){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(f.prompt("Enter New Name",{input:a.title}),2);if(H=J.yieldResult)a.title=
H;J.jumpToEnd()})}],["Align and resize",[{alias:"full",target:f,command:"resize active window",args:{window:a,how:"full"}},{alias:"left",target:f,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:f,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:f,command:"resize active window",args:{window:a,how:"right"}},{alias:"top",target:f,command:"resize active window",args:{window:a,how:"top"}},{alias:"bottom",target:f,command:"resize active window",
args:{window:a,how:"bottom"}},{alias:"reset",target:f,command:"resize active window",args:{window:a,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:f,command:"toggle minimize all except active window"},{alias:"close all except this",target:f,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:f,command:"toggle minimize all windows"},{alias:"close all",target:f,command:"close all windows"}]],{isDivider:!0}],y=v.concat,A=$jscomp,E=A.arrayFromIterable,
F.yield(a.targetMorph.menuItems(),2)):F.return(r.call(l,y.call(v,E.call(A,F.yieldResult))))})}},{key:"toggleFader",value:function(a){var f=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:l=f.getSubmorphNamed("fader")||f.addMorph({name:"fader",fill:mf.Color.black.withA(.5),opacity:0,extent:f.extent});if(a){r=f.world().visibleBoundsExcludingTopBar().translateForInclusion(f.bounds());f._originalBounds=f.bounds();f.animate({bounds:r,duration:300});
f.borderColor=mf.Color.gray.darker();f._faderTriggered=!0;l.opacity=1;v.jumpTo(0);break}f._originalBounds&&(f.animate({bounds:f._originalBounds,duration:300}),f._originalBounds=null);f._faderTriggered=!1;return v.yield(f.whenRendered(),3);case 3:return v.yield(mf.promise.delay(100),4);case 4:return f.borderColor=mf.Color.gray,f._faderTriggered?v.return():v.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),v.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",
value:function(){return new mf.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){try{var a=this.innerBounds(),f=this.ui.windowTitle,l=this.ui.resizer,r=a.withHeight(25),v=this.ui.header,y=this.ui.windowControls.bounds().right()+3,A=r.withLeftCenter(mf.pt(y,r.height/2));l.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());f.textBounds().width<r.width-2*y?f.center=
r.center():f.leftCenter=A.leftCenter();v.width=this.width}catch(E){}}},{key:"ensureNotOverTheTop",value:function(){var a=this,f=this.world();if(f){var l=this.globalBounds();f.withTopBarDo(function(r){l.top()<r.height&&a.moveBy(mf.pt(0,r.height-l.top()))})}}},{key:"buildHeader",value:function(){return mf.morph({name:"header",extent:mf.pt(this.width,50),submorphs:[mf.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",
value:function(){var a=this.getSubmorphNamed("close")||mf.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[mf.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});mf.connect(a,"onMouseDown",this,"close");var f=this.getSubmorphNamed("minimize")||mf.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[mf.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});mf.connect(f,"onMouseDown",this,"minimized",{updater:function(r){r(!this.targetObj.minimized)}});if(this.resizable){var l=this.getSubmorphNamed("menu")||mf.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[mf.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});mf.connect(l,"onMouseDown",this,"openWindowMenu")}return mf.arr.compact([a,f,l])}},{key:"buildTitleLabel",value:function(){var a=mf.morph({padding:mf.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});mf.connect(a,"onDoubleMouseDown",this,"toggleMaximize");return this.addMorph(a)}},{key:"resizeBy",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){a=$jscomp.makeIterator(a);var f=a.next().value;a=a.next().value;var l=this.bounds();switch(f){case "right":this.resizeBy(a.withY(0));
break;case "bottom right":this.resizeBy(a);break;case "bottom":this.resizeBy(a.withX(0));break;case "left":f=this.right;this.resizeBy(a.withY(0).negated());this.right=f;break;case "bottom left":f=this.right;this.resizeBy(a.scaleByPt(mf.pt(-1,1)));this.right=f;break;case "top":f=l.x;var r=l.y+a.y;var v=l.width;a=l.height-a.y;this.setBounds(new mf.Rectangle(f,r,v,a));break;case "top left":f=l.x+a.x;r=l.y+a.y;v=l.width-a.x;a=l.height-a.y;this.setBounds(new mf.Rectangle(f,r,v,a));break;case "top right":f=
l.x,r=l.y+a.y,v=l.width+a.x,a=l.height-a.y,this.setBounds(new mf.Rectangle(f,r,v,a))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),f=$jscomp.makeIterator(a.submorphs),l=f.next().value,r=f.next().value,v=f.next().value,y=f.next().value,A=f.next().value,E=f.next().value,F=f.next().value;f=f.next().value;l.height=this.height-10;l.bottomRight=this.extent.subXY(0,10);r.bottomRight=this.extent;v.height=this.height-10;v.bottomLeft=mf.pt(0,this.height-
10);y.bottomLeft=mf.pt(0,this.height);A.width=this.width-20;A.bottomLeft=mf.pt(10,this.height);E.width=this.width-20;E.bottomLeft=mf.pt(10,2.5);F.topLeft=mf.pt(0,0);f.topRight=mf.pt(this.width,0);a.position=mf.pt(0,0)}},{key:"buildResizer",value:function(){var a,f,l,r,v,y,A;var E=mf.Color.transparent;var F=mf.morph({name:"resizer",fill:mf.Color.transparent,position:mf.pt(0,0),submorphs:[a=mf.morph({name:"right resizer",fill:E,width:10,draggable:!0,nativeCursor:"ew-resize"}),f=mf.morph({name:"bottom right resizer",
fill:E,extent:mf.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),l=mf.morph({name:"left resizer",fill:E,width:10,draggable:!0,nativeCursor:"ew-resize"}),r=mf.morph({name:"bottom left resizer",draggable:!0,fill:E,extent:mf.pt(10,10),nativeCursor:"nesw-resize"}),v=mf.morph({name:"bottom resizer",draggable:!0,fill:E,height:10,nativeCursor:"ns-resize"}),y=mf.morph({name:"top resizer",draggable:!0,fill:E,height:2.5,nativeCursor:"ns-resize"}),A=mf.morph({name:"top left resizer",draggable:!0,fill:E,
extent:mf.pt(10,10),nativeCursor:"nwse-resize"}),E=mf.morph({name:"top rigth resizer",draggable:!0,fill:E,extent:mf.pt(10,10),nativeCursor:"nesw-resize"})]});mf.connect(y,"onDrag",this,"resizeAt",{converter:function(H){return["top",H.state.dragDelta]}});mf.connect(E,"onDrag",this,"resizeAt",{converter:function(H){return["top right",H.state.dragDelta]}});mf.connect(A,"onDrag",this,"resizeAt",{converter:function(H){return["top left",H.state.dragDelta]}});mf.connect(f,"onDrag",this,"resizeAt",{converter:function(H){return["bottom right",
H.state.dragDelta]}});mf.connect(a,"onDrag",this,"resizeAt",{converter:function(H){return["right",H.state.dragDelta]}});mf.connect(v,"onDrag",this,"resizeAt",{converter:function(H){return["bottom",H.state.dragDelta]}});mf.connect(l,"onDrag",this,"resizeAt",{converter:function(H){return["left",H.state.dragDelta]}});mf.connect(r,"onDrag",this,"resizeAt",{converter:function(H){return["bottom left",H.state.dragDelta]}});this.addMorph(F);this.relayoutResizer();return F}},{key:"toggleMaximize",value:function(){this.minized||
(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.minimized=!a.minimized;f.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,f,l,r,v,y,A,E,F,H,J,O,L,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){if(1==
S.nextAddress){if(!a.targetMorph)return S.return();f=a;l=f.nonMinizedBounds;r=f.minimized;v=f.width;y=a.ui;A=y.windowTitle;E=y.resizer;F=a.bounds();H=a.getSubmorphNamed("minimize");J=mf.easings.outQuad;if(!r)return a.minimizedBounds=F,a.withMetaDo({metaInteraction:!0},function(){a.targetMorph&&(a.targetMorph.visible=!0)}),l=a.world().visibleBoundsExcludingTopBar().translateForInclusion(l||F),a.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(mf.arr.without(a.styleClasses,
"minimzed"))),duration:100,easing:J}),H.tooltip="collapse window",S.jumpTo(2);a.nonMinizedBounds=F;O=(a.minimizedBounds||F).withExtent(mf.pt(v,28));L=A.textBounds();Y=a.get("window controls").bounds().right()+3;L.width+2*Y<O.width&&(O=O.withWidth(L.width+Y+5));a.minimizedBounds=O;H.tooltip="uncollapse window";return S.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(mf.arr.without(a.styleClasses,"neutral"))),bounds:O,duration:100,easing:J}),3)}2!=S.nextAddress&&
a.targetMorph&&(a.targetMorph.isComponent?a.targetMorph.top=a.height:a.targetMorph.visible=!1);A.reactsToPointer=!a.minimized;E.visible=!a.minimized;a.relayoutWindowControls();S.jumpToEnd()})}},{key:"setBounds",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},{key:"setBounds",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},
{key:"close",value:function(){var a=this,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?v.yield(a.targetMorph.onWindowClose(),3):v.jumpTo(2);2!=v.nextAddress&&(f=v.yieldResult);if(!1===f)return v.return();l=a.world();a.deactivate();a.remove();(r=l.activeWindow()||mf.arr.last(l.getWindows()))&&r.activate();mf.signal(a,"windowClosed",a);v.jumpToEnd()})}},{key:"onMouseUp",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),
"onMouseUp",this).call(this,a);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,a);this.activate(a);this.minimized||this.ui.resizer.submorphs.includes(a.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(a){var f=this;Zb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,
this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(a){var f=this;Zb._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=a.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},
{key:"focus",value:function(){var a=this.world(),f=this.targetMorph;a&&f&&(!a.focusedMorph||a.focusedMorph!==f&&!f.isAncestorOf(a.focusedMorph))&&f.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?mf.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var f=this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){f.master=
{auto:"styleguide://System/window/light/active"}});this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;mf.arr.without(l.getWindows(),this).forEach(function(r){return r.deactivate()});this.focus(a);mf.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return f.relayoutWindowControls()});return this}},{key:"deactivate",value:function(){var a=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||
(this.master.whenApplied().then(function(){a.master={auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"[window] change title",
exec:function(a,f){f=void 0===f?{}:f;var l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return(l=f.title)?v.jumpTo(2):v.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=v.nextAddress&&(l=v.yieldResult);if(r=l)a.title=r;return v.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},
ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var f=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress){l="string"===typeof a?[a,{}]:a;r=[];for(v=0;v<l.length;v+=2)y=l[v],A=l[v+1],y=y.replace(/\n/g,""),E=y.length+0-100,0<E&&(y=y.slice(0,-E)),r.push(y,A||{});f.ui.windowTitle.value=r;return F.yield(f.whenRendered(),2)}f.relayoutWindowControls();F.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return mf.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var f=[this.get("header"),this.get("resizer")];mf.arr.withoutAll(this.submorphs,
f).forEach(function(l){return l.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{set:function(a){this.setProperty("maximized",a);this.applyMaximize()}}}}}],d,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:343,end:20831})}(mf.Morph);t_=mf.Window;var u_=Ca("aP",t_);mf.default=t_;var Ke=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");Ke.Rectangle=ye;Ke.rect=Dl;Ke.Color=ng;Ke.pt=di;Ke.morph=de;Ke.VerticalLayout=Zz;Ke.Morph=kl;Ke.StyleSheet=cw;Ke.Text=au;Ke.GridLayout=$z;Ke.Icon=wp;Ke.HorizontalLayout=Zt;Ke.InputLine=$I;Ke.PasswordInputLine=cA;Ke.arr=Lf;Ke.obj=dg;Ke.promise=Hg;Ke.connect=Li;Ke.List=XF;Ke.FilterableList=
RJ;Ke.RadioButtonGroup=QJ;Ke.RadioButton=PJ;var oR=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("AbstractPrompt")&&"function"===typeof d.AbstractPrompt?d.AbstractPrompt:d.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Zb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Ke.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.focus();
a.answer=Ke.promise.deferred();a._isActive=!0;Ke.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&Ke.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return f.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),
"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return Zb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"resolve",exec:function(f,l){a.resolve(l);return!0}},{name:"reject",exec:function(f,l){a.reject(l);return!0}}])}},{key:"transitionTo",value:function(a,f){f=void 0===f?300:f;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=
Ke.morph({fill:l.fill,borderRadius:l.borderRadius});v=Ke.morph({fill:null,origin:Ke.pt(5,5)});a.opacity=0;a.fill=Ke.Color.transparent;a.openInWorld();l.fill=Ke.Color.transparent;$world.addMorph(r,l);r.setBounds(l.bounds());v.openInWorld();v.addMorph(a);a.center=v.origin;v.center=r.center=l.center;v.scale=a.width/l.width;r.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l.animate({scale:l.width/a.width,opacity:0,duration:f}),
a.animate({opacity:1,duration:f}),v.animate({scale:1,duration:f}),A.yield(r.animate({bounds:v.bounds(),duration:f}),2);a.fill=r.fill;$world.addMorph(a);r.remove();l.remove();v.remove();A.jumpToEnd()})});y.jumpToEnd()})}},{key:"addNamed",value:function(a,f){var l=this.getSubmorphNamed(a)||this.addMorph(f.isMorph?f:Ke.morph(Object.assign({},f,{name:a})));f.label&&(l.label=f.label);f.isMorph&&(l.name=a);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",
get:function(){return{fill:{defaultValue:Ke.Color.black.withA(.6)},extent:{defaultValue:Ke.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=
a}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:446,end:3935})}(Ke.Morph);Ke.AbstractPrompt=oR;Ke.AbstractPrompt=oR;Ke.AbstractPrompt=oR;var pR=Ca("aH",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("InformPrompt")&&"function"===
typeof d.InformPrompt?d.InformPrompt:d.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"build",value:function(a){var f=this,l=a=void 0===a?{}:a,r=l.label,v=this.addNamed("promptTitle",{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});v.textString=r;Ke.connect(l,"fire",this,"resolve");
a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(v.document){var y=f.center;f.width=Math.max(f.width,v.document.width+100);f.align(f.center,y)}f.opacity=1}))}},{key:"keybindings",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(Ke.AbstractPrompt));Ke.InformPrompt=pR;Ke.InformPrompt=pR;Ke.InformPrompt=pR;var qR=Ca("aI",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
k=d.hasOwnProperty("ConfirmPrompt")&&"function"===typeof d.ConfirmPrompt?d.ConfirmPrompt:d.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"build",value:function(a){var f=this,l=this.addNamed("promptTitle",{type:"text"});l.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var r=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",
{submorphs:[a,r]});Ke.connect(a,"fire",this,"resolve");Ke.connect(r,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=f.lineWrapping;var v=f.center;f.width=Math.max(f.width,l.document.width+100);f.center=v;f.opacity=1}))}},{key:"resolve",value:function(){Zb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){Zb._get(Object.getPrototypeOf(k.prototype),"resolve",
this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,end:6757})}(Ke.AbstractPrompt));Ke.ConfirmPrompt=qR;Ke.ConfirmPrompt=qR;Ke.ConfirmPrompt=qR;var rR=Ca("aJ",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof d.MultipleChoicePrompt?d.MultipleChoicePrompt:d.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"resolve",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,a||this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var f=a=void 0===a?{choices:["No choice"]}:a;a=f.label;var l=f.choices;f=this.addNamed("ok button",{type:"button"});var r=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);var v=this.addNamed("choices",
{name:"choices",type:Ke.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[f,r]});f&&Ke.connect(f,"fire",this,"resolve");r&&Ke.connect(r,"fire",this,"reject");this.whenRendered().then(function(){v.choices=l})}},{key:"onKeyDown",value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var f=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(f)return f.trigger(),a.stop()}return Zb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,a)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],derived:!0,set:function(a){var f;if(f=this.getSubmorphNamed("choices"))f.choices=a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],
d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6846,end:8787})}(Ke.AbstractPrompt));Ke.MultipleChoicePrompt=rR;Ke.MultipleChoicePrompt=rR;Ke.MultipleChoicePrompt=rR;var sR=Ca("aK",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("TextPrompt")&&
"function"===typeof d.TextPrompt?d.TextPrompt:d.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"resolve",value:function(){var a=this.getSubmorphNamed("input");this.validate(a.input)?Zb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,a.acceptInput()):a.indicateError(this.errorMessage)}},{key:"build",
value:function(a){var f=this,l=a.label,r=a.input,v=a.historyId;a=a.useLastInput;var y=this.addNamed("promptTitle",{type:"text"});y.value=l;l=this.addNamed("input",Ke.Text.makeInputLine({historyId:v,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=r||"";v&&a&&(r=Ke.arr.last(l.inputHistory.items))&&(l.textString=r);this.lineWrapping||(this.width=Math.max(this.width,y.textBounds().width+50));r=this.addNamed("ok button",{type:"button",label:this.confirmLabel});v=this.addNamed("cancel button",
{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[r,v]});Ke.connect(r,"fire",this,"resolve");Ke.connect(v,"fire",this,"reject");y.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var A=f.center;f.width=Math.max(350,y.document.width+100);f.opacity=1;f.center=A}));l.gotoDocumentEnd();l.scrollCursorIntoView()}},{key:"initLayout",value:function(){var a=this;if(!this.layout){var f=this.getSubmorphNamed("promptTitle"),
l=this.getSubmorphNamed("input");f.fit();this.whenRendered().then(function(){var r=Math.max(l.textBounds().width,f.textBounds().width)+20;a.width=Math.min(a.maxWidth,r);a.opacity=1});this.layout=new Ke.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:f.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle",
"promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12333})}(Ke.AbstractPrompt));Ke.TextPrompt=sR;Ke.TextPrompt=sR;Ke.TextPrompt=sR;var tR=Ca("aL",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("EditPrompt")&&"function"===typeof d.EditPrompt?d.EditPrompt:d.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"maxWidth",
get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var f=a.input,l=a.mode,r=a.textStyle,v=a.evalEnvironment;this.addNamed("promptTitle",{type:"text",value:a.label});r||(r={});l&&!r.fontFamily&&(r.fontFamily="Monaco, monospace");var y=this.addNamed("editor",{type:"text"});y.textString=f||"";Object.assign(y,r);y.changeEditorMode(l).then(function(){v&&y.editorPlugin&&Object.assign(y.editorPlugin.evalEnvironment,v)});a=y.textBounds().width+50;a>this.width-25&&
(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Ke.connect(a,"fire",this,"resolve");Ke.connect(f,"fire",this,"reject");y.gotoDocumentEnd();y.scrollCursorIntoView()}},{key:"resolve",value:function(a){var f=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=Ke.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(l){return l!==
f});for(a.items.push(f);a.items.length>a.items.max;)a.items.shift();a.index=a.items.length;Ke.InputLine.setHistory(this.historyId,a)}return Zb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,f)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},
{key:"commands",get:function(){var a=this;return Zb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"history back",exec:function(f,l){if(a.historyId){f=Ke.InputLine.getHistory(a.historyId);l=f.items;var r=f.index;f.index=--r;0>r&&(f.index=r=l.length-1);a.get("editor").undoManager.group();a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(f,l){var r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==
H.nextAddress){if(!a.historyId)return H.jumpTo(2);r=Ke.InputLine.getHistory(a.historyId);return H.yield(a.world().editListPrompt("input history "+a.historyId,r.items,{requester:a}),3)}2!=H.nextAddress&&(v=H.yieldResult,y=v.status,A=v.list,E=$jscomp.makeIterator(v.selections),F=E.next().value,"canceled"!==y&&(r.items=A,Ke.InputLine.setHistory(a.historyId,r),F&&(r.index=r.items.indexOf(F),a.get("editor").textString=F)));return H.return(!0)})}},{name:"history forward",exec:function(f,l){if(a.historyId){f=
Ke.InputLine.getHistory(a.historyId);l=f.items;var r=f.index;f.index=++r;r>=l.length&&(f.index=r=0);a.get("editor").undoManager.group();a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield($world.editPrompt("enter",
{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);a.editorPlugin.evalEnvironment;f.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Ke.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:12342,end:16847})}(Ke.AbstractPrompt));Ke.EditPrompt=tR;Ke.EditPrompt=tR;Ke.EditPrompt=tR;var uR=Ca("aM",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("PasswordPrompt")&&"function"===typeof d.PasswordPrompt?d.PasswordPrompt:d.PasswordPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"build",value:function(a){var f=
a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,fixedHeight:!0});this.addNamed("input",{type:Ke.PasswordInputLine,name:"input",placeholder:f||""});a=this.addNamed("ok button",{type:"button",label:"OK"});f=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Ke.connect(a,"fire",this,"resolve");Ke.connect(f,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[a,f]})}},{key:"resolve",value:function(){Zb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,
this.get("input").acceptInput())}},{key:"focus",value:function(){var a=this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.passwordPrompt("Enter your secret password:"),0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master=
{auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16856,end:18201})}(Ke.AbstractPrompt));Ke.PasswordPrompt=uR;Ke.PasswordPrompt=uR;Ke.PasswordPrompt=uR;var vR=Ca("aN",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
k=d.hasOwnProperty("ListPrompt")&&"function"===typeof d.ListPrompt?d.ListPrompt:d.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onChange",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?
"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var f=a.label,l=a.filterable,r=a.multiSelect,v=a.historyId,y=a.useLastInput,A=a.fuzzy,E=a.filterFunction,F=a.sortFunction,H=a.actions,J=a.selectedAction,O=a.items,L=a.onSelection,Y=a.onFilter;this.extent=a.extent||Ke.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=f;var S=this.addNamed("prompt list",{type:l?Ke.FilterableList:
Ke.List,multiSelect:r,historyId:v,useLastInput:y});l?this.get("list").master=!1:this.get("prompt list").master=!1;S.items=O;l&&A&&(S.fuzzy=A);l&&"function"===typeof E&&(S.filterFunction=E);l&&"function"===typeof F&&(S.sortFunction=F);L&&"function"===typeof L&&(this.onSelection=L);l&&H&&(S.actions=H);l&&J&&(S.selectedAction=J);a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Ke.connect(a,"fire",this,"resolve");
Ke.connect(f,"fire",this,"reject");l&&(Ke.connect(S,"accepted",this,"resolve"),Ke.connect(S,"canceled",this,"reject"),Y&&Ke.connect(S,"updateFilter",function(){return Y(S)}),S.whenRendered().then(function(){return S.relayout()}))}},{key:"resolve",value:function(a){var f=this.getSubmorphNamed("prompt list");a=a||f instanceof Ke.FilterableList?f.acceptInput():{selected:f.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,
selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=
a||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var f=this.getSubmorphNamed("prompt list");f&&(f.selectedIndex=a,f.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect","submorphs"],set:function(a){var f=this,l=this.getSubmorphNamed("prompt list");l&&Ke.connect(l,"selection",function(r){return a(r,f)})}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18299,end:22508})}(Ke.AbstractPrompt));Ke.ListPrompt=vR;Ke.ListPrompt=vR;Ke.ListPrompt=vR;var wR=Ca("aO",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("EditListPrompt")&&"function"===typeof d.EditListPrompt?d.EditListPrompt:d.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"build",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",{type:"button",label:Ke.Icon.makeLabel("plus")});var f=this.addNamed("remove item button",{type:"button",label:Ke.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(f);
Ke.connect(a,"fire",this,"addItemToList");Ke.connect(f,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=this,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){f=a.get("prompt list");l=1!=f.selectedItems.length?-1:0===f.selectedIndex?0:f.selectedIndex-1;f.items=Ke.arr.withoutAll(f.items,f.selectedItems);0>l?f.selection=null:f.selectedIndex=l;f.focus();r.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return f=a.get("prompt list"),l=f.selection?f.items[f.selectedIndex].string:"",y.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",input:l}),2);r=y.yieldResult;if(!r)return y.return();f=a.get("list");v=f.selection?f.selectedIndex+1:f.items.length;f.addItemAt(r,v);f.focus();f.selectedIndex=v;y.jumpToEnd()})}},{key:"keybindings",get:function(){return Zb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",
win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var a=this;return Zb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();
return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},
{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22517,end:25399})}(Ke.ListPrompt));Ke.EditListPrompt=wR;Ke.EditListPrompt=wR;Ke.EditListPrompt=
wR;var v_=Object.freeze({__proto__:null,AbstractPrompt:oR,InformPrompt:pR,ConfirmPrompt:qR,MultipleChoicePrompt:rR,TextPrompt:sR,EditPrompt:tR,PasswordPrompt:uR,ListPrompt:vR,EditListPrompt:wR}),td=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");td.obj=dg;td.PropertyPath=ci;td.string=Ih;td.num=Em;td.arr=Lf;td.properties=ir;td.pt=di;td.Color=ng;td.Rectangle=ye;td.rect=Dl;td.signal=em;td.connect=Li;td.disconnect=Ek;td.Morph=kl;td.ShadowObject=ys;td.morph=de;td.Text=au;td.GridLayout=
$z;td.HorizontalLayout=Zt;td.Path=wC;td.Ellipse=vC;td.Label=bu;td.Tooltip=xC;td.Icon=wp;td.kld=Kb;var Tea=td.kld;td.Shapes=Tea.Shapes;td.Intersection=Tea.Intersection;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LeashEndpoint")&&"function"===typeof d.LeashEndpoint?d.LeashEndpoint:d.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"dragTriggerDistance",
get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(a){var f=a.state;a.state.dragDelta=f.lastDragPosition.subPt(f.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(f){return f.isHaloItem})}},{key:"onDrag",value:function(a){var f=this;if(this.connectedMorph)this.clearConnection();else{var l=a.hand.findDropTarget(a.hand.globalPosition,
[this.leash,this.leash.endPoint,this.leash.startPoint],function(r){return f.canConnectTo(r)});this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(td.obj.keys(td.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}a.state.endpoint=
this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,f=a.isPath,l=a.isPolygon,r=a.vertices,v=a.origin;a=this.connectedMorph.globalBounds();if((f||l)&&"center"!=this.attachedSide){f=r.map(function(A){return td.pt(A.x,A.y).addPt(v)});l=td.Rectangle.unionPts(f);var y=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(y));
l=td.Shapes.line(y.x,y.y,l.x,l.y);f=td.Shapes.polyline(td.arr.flatten(f.map(function(A){return[A.x,A.y]})));f=td.arr.min(td.Intersection.intersect(f,l).points,function(A){return td.pt(A.x,A.y).dist(y)});return td.pt(f.x,f.y).addPt(a.topLeft())}return a[this.attachedSide]()}},{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),a=this.leash.localize(a),this.vertex.position=a,
this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(td.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var f=this.vertex.position,l=f.x;f=f.y;var r=this.leash.borderWidth;a&&a.meta&&a.meta.animation?this.animate({center:td.pt(l+r,f+r),duration:a.duration}):this.center=td.pt(l+r,f+r)}},{key:"attachTo",value:function(a,f){this.clearConnection();this.leash.world()||this.leash.openInWorld(a.globalPosition);
this.connectedMorph=a;this.attachedSide=f;this.vertex.controlPoints=this.leash.controlPointsFor(f,this);this.update();td.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(a){this.leash.vertices[this.index]=
a;this.leash.vertices=this.leash.vertices}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:444,end:4551})})(td.Ellipse);var xR=Ca("bQ",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Leash")&&"function"===typeof d.Leash?d.Leash:
d.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){Zb._get(Object.getPrototypeOf(k.prototype),"remove",this).call(this);this.startPoint.clearConnection();
this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var f=this.vertices[a];return new td.LeashEndpoint({index:a,leash:this,position:td.pt(f.x,f.y)})}},{key:"controlPointsFor",value:function(a,
f){a=td.Leash.connectionPoints[a];a=f==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:td.pt(0,-1),topLeft:td.pt(-1,-1),rightCenter:td.pt(1,0),bottomRight:td.pt(1,1),bottomCenter:td.pt(0,1),
bottomLeft:td.pt(-1,1),leftCenter:td.pt(-1,0),topRight:td.pt(1,-1),center:td.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:td.pt(0,0)},end:{defaultValue:td.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},getLabelFor:{defaultValue:function(a){return a.name}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:td.Color.black,
origin:td.pt(3.5,3.5),extent:td.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:td.Color.black},fill:{defaultValue:td.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];td.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4560,end:7399})}(td.Path));td.Leash=xR;td.Leash=xR;td.Leash=xR;var yR=Ca("bi",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Slider")&&"function"===typeof d.Slider?d.Slider:d.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"normalize",value:function(a){return Math.abs(a/(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=td.pt(a+7.5,10)}},{key:"onSlide",value:function(a,f){a=td.num.roundTo(this.value+f.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:td.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var a=new td.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new td.Path({borderColor:td.Color.gray.darker(),borderWidth:2,vertices:[td.pt(0,0),td.pt(this.width,0)],position:td.pt(0,this.height/2)}),a];td.connect(this,"extent",this,"update");
this.update()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:7408,end:8693})}(td.Morph));td.Slider=yR;td.Slider=yR;td.Slider=yR;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SliderHandle")&&"function"===typeof d.SliderHandle?
d.SliderHandle:d.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"onDragStart",value:function(a){this.valueView=(new td.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:td.Color.gray},borderColor:{defaultValue:td.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new td.ShadowObject({blur:5})},extent:{defaultValue:td.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8695,end:9551})})(td.Ellipse);var zR=Ca("b4",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("ValueScrubber")&&"function"===typeof d.ValueScrubber?d.ValueScrubber:d.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Zb(k,b,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var f=$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=f.next().value;f.next();"string"===typeof l&&(this.value=parseFloat(l),this.scrub(this.scrubbedValue));a.stop()}}},{key:"scrub",value:function(a){this.field.update(a)}},
{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=(new td.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10));a.hand.extent=td.pt(30,30);a.hand.nativeCursor="ew-resize";a.hand.fill=td.Color.transparent;a.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(a){var f=a.position.subPt(this.initPos);a=f.x;f=td.num.roundTo(Math.exp(-f.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:f}}},{key:"onDrag",
value:function(a){var f=this.getScaleAndOffset(a),l=f.scale;f=this.getCurrentValue(f.offset,l);this.scrub(f);f=this.floatingPoint?f.toFixed(3):td.obj.safeToString(f);this.unit&&(f+=" "+this.unit);this.replace(this.documentRange,f,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=a.hand.position.addXY(10,10);a.hand.moveBy(td.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(a,f){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+
(this.floatingPoint?a*f:Math.round(a*f))))}},{key:"onDragEnd",value:function(a){var f=this.getScaleAndOffset(a);this.value=this.getCurrentValue(f.offset,f.scale);this.factorLabel.softRemove();a.hand.extent=td.pt(1,1);a.hand.fill=td.Color.orange;a.hand.reactsToPointer=!1}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):td.obj.safeToString(a);a=this.unit?a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},field:{derived:!0,get:function(){return this.owner}},value:{defaultValue:0},fill:{defaultValue:td.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9560,end:12723})}(td.Text));td.ValueScrubber=zR;td.ValueScrubber=zR;td.ValueScrubber=zR;var TJ=Ca("bm",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("CheckBox")&&"function"===typeof d.CheckBox?d.CheckBox:d.CheckBox=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,td.signal(this,"toggle",this.checked)}catch(f){var a=this.world();a?a.logError(f):console.error(f)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",
get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:td.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:td.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:12733,end:13459})}(td.Morph));td.CheckBox=TJ;td.CheckBox=TJ;td.CheckBox=TJ;var AR=Ca("b5",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LabeledCheckBox")&&"function"===typeof d.LabeledCheckBox?d.LabeledCheckBox:d.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=
.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new td.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",
type:"Enum",values:["left","right"],set:function(a){this.layout=new td.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new td.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},
set:function(a){this.checkboxMorph.checked=a;td.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new td.CheckBox({name:"checkbox"}),new td.Label({nativeCursor:"pointer",
name:"label",padding:td.Rectangle.inset(5,3)})];td.connect(this,"alignCheckBox",this,"extent");td.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13468,end:16001})}(td.Morph));td.LabeledCheckBox=AR;td.LabeledCheckBox=AR;td.LabeledCheckBox=
AR;var BR=Ca("bh",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("ModeSelector")&&"function"===typeof d.ModeSelector?d.ModeSelector:d.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"createLabels",value:function(a,f,l){var r=this;l=void 0===l?{}:l;return td.arr.zip(a,f).map(function(v){v=$jscomp.makeIterator(v);var y=v.next().value,
A=v.next().value;v=l[y];v=td.morph(Object.assign({name:y+"Label",master:{auto:"styleguide://SystemWidgets/mode label"},type:"label",value:y},v&&{tooltip:v}));td.connect(v,"onMouseDown",r,"update",{updater:function(E){E(y,A)},varMapping:{name:y,value:A}});return v})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var f=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return f.layout.forceLayout(),l=f.get("typeMarker"),r=f.currentLabel.bounds(),a?v.yield(l.animate({bounds:r,
duration:200}),3):(l.setBounds(r),v.jumpTo(2));v.jumpToEnd()})}},{key:"animateFontColor",value:function(a,f,l){var r=a.fontColor;a.animate({customTween:function(v){return a.fontColor=r.interpolate(v,f)},duration:l})}},{key:"update",value:function(a,f,l){l=void 0===l?!1:l;var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){v=r.get(a+"Label");if(v==r.currentLabel)return y.return();r.getSubmorphsByStyleClassName("Label").forEach(function(A){A!=v&&r.animateFontColor(A,r.fontColor,
200)});r.currentLabel=v;!l&&td.signal(r,a,f);!l&&td.signal(r,"switchLabel",f);r.relayout(!l);return y.yield(r.animateFontColor(v,r.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",value:function(){(new td.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(a){td.obj.isArray(a)?this.keys=this.values=a:(this.keys=td.obj.keys(a),this.values=
td.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:td.Color.black},selectionFontColor:{defaultValue:td.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new td.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(td.arr.interpose(this.keys.map(function(a){return a+
"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),td.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16010,end:19643})}(td.Morph));td.ModeSelector=BR;td.ModeSelector=BR;td.ModeSelector=BR;var CR=Ca("b6",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("DropDownSelector")&&"function"===typeof d.DropDownSelector?d.DropDownSelector:
d.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"build",value:function(){this.dropDownLabel=td.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,f=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?
[{command:f,target:this}]:[]),$jscomp.arrayFromIterable(td.arr.compact(this.commands.map(function(l){return l.name!=f&&{command:l.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return td.obj.isArray(this.values)?this.values.map(function(f){return{name:String(f),exec:function(){td.signal(a,"update",f);a.selectedValue=f}}}):td.properties.forEachOwn(this.values,function(f,l){return{name:f,exec:function(){td.signal(a,"update",l);a.selectedValue=l}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?
this.getCurrentValue():td.obj.isArray(this.values)?td.obj.safeToString(a):td.obj.safeToString(td.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),f=this.get("currentValue");"undefined"==a?(f.value="Not set",f.fontColor=td.Color.gray):(f.value=a,f.fontColor=td.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},
{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,
defaultValue:td.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:td.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(a){this.setProperty("isSelected",a);this.fontColor=a?td.Color.white:td.Color.black}},layout:{initialize:function(){this.layout=new td.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],
d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:19652,end:22889})}(td.Morph));td.DropDownSelector=CR;td.DropDownSelector=CR;td.DropDownSelector=CR;var DR=Ca("bl",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SearchField")&&"function"===
typeof d.SearchField?d.SearchField:d.SearchField=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(l,r){if("\\"===r&&!l.escaped)return l.escaped=!0,l;" "!==r||l.escaped?(l.spaceSeen=!1,l.current+=r):(!l.spaceSeen&&l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",
escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);var f=a.tokens.map(function(l){return l.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:f}}},{key:"clearInput",value:function(){this.textString="";td.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):!0}},{key:"onChange",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,
a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&td.signal(this,"searchInput",this.parseInput())}},{key:"onBlur",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],
duration:300})}},{key:"onFocus",value:function(a){Zb._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,
defaultValue:td.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:td.Color.gray},borderColor:{defaultValue:td.Color.gray},layout:{initialize:function(){this.layout=new td.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):
(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(l){return f.string.toLowerCase().includes(l)})})}},
fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(f,l){var r=String(td.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;f.lowercasedTokens.forEach(function(y){r.startsWith(y)?v-=10:r.includes(y)&&(v-=5)});return td.arr.sum(f.lowercasedTokens.map(function(y){return td.string.levenshtein(r.toLowerCase(),y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=
function(f,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;var v=String(td.PropertyPath(r).get(l)).toLowerCase();return 3>=td.arr.sum(f.lowercasedTokens.map(function(y){return td.string.levenshtein(v,y)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},
td.Icon.makeLabel("times-circle",{padding:td.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:td.pt(20,22),name:"placeholder icon",fontColor:td.Color.gray,nativeCursor:"pointer"})];td.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:22932,end:29519})}(td.Text));td.SearchField=DR;td.SearchField=DR;td.SearchField=DR;var w_=Object.freeze({__proto__:null,Leash:xR,Slider:yR,ValueScrubber:zR,CheckBox:TJ,LabeledCheckBox:AR,ModeSelector:BR,DropDownSelector:CR,SearchField:DR}),Ck=lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(Ck,Uxa);Object.assign(Ck,Txa);Object.assign(Ck,Vxa);Object.assign(Ck,Wxa);Object.assign(Ck,Xxa);Object.assign(Ck,Yxa);Ck.Window=u_;Ck.prompts=v_;Ck.widgets=
w_;Ck.LoadingIndicator=sF;Ck.addClassMappings=Be;Ck.List=XF;Ck.DropDownList=SJ;Ck.Button=WF;Ck.CheckBox=TJ;Ck.addClassMappings({list:Ck.List,dropdownlist:Ck.DropDownList,button:Ck.Button,checkbox:Ck.CheckBox,labeledcheckbox:Ck.widgets.LabeledCheckBox});Ck.Window=u_;Ck.Window=u_;Ck.LoadingIndicator=sF;Ck.LoadingIndicator=sF;Ck.prompts=v_;Ck.prompts=v_;Ck.widgets=w_;Ck.widgets=w_;var Ar=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");Ar.Morph=kl;Ar.MorphicDB=$v;Ar.LoadingIndicator=
sF;Ar.resource=Xb;var YF=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),k=d.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof d.WorldLoadingScreen?d.WorldLoadingScreen:d.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;
a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},{key:"onLoad",value:function(){var a=this,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!lively.FreezerRuntime)return v.jumpTo(0);
f=a.get("package loading indicator");f.startStepping("updateProgressBar");document.body.style.backgroundColor="black";l=a.getWorldName();(r=a.getFilePath())&&a.get("json target indicator").animate({opacity:1,duration:300});return v.yield(a.transitionToLivelyWorld({worldName:l,filePath:r},f),3)}f.stopStepping();v.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,f){var l=a.worldName,r=a.filePath,v=this,y,A,E,F,H,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:return y=
v.get("package loading indicator"),O.yield(Promise.resolve().then(function(){return Uea}),2);case 2:A=O.yieldResult;E=A.bootstrap;if(!(F=l&&"__newWorld__"!=l)){O.jumpTo(3);break}return O.yield(Ar.MorphicDB.default.exists("world",l),4);case 4:F=!O.yieldResult.exists;case 3:if(F)return O.return(v.indicateMissingWorld(!0));if(!(H=r)){O.jumpTo(5);break}return O.yield(Ar.resource(document.location.origin).join(r).exists(),6);case 6:H=!O.yieldResult;case 5:if(H)return O.return(v.indicateMissingWorld(!0));
J=Ar.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});f.opacity=1;return O.yield(E({worldName:l,filePath:r,loadingIndicator:J,progress:y}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":Ar.resource(document.location.href).query().name||!1}},{key:"getFilePath",value:function(){return Ar.resource(document.location.href).query().file||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=
!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],d,{pathInPackage:function(){return"loading-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",
version:"0.1.1-73"}}},{start:158,end:2907})}(Ar.Morph);Ar.WorldLoadingScreen=YF;Ar.WorldLoadingScreen=YF;Ar.WorldLoadingScreen=YF;var vh=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");vh.Morph=kl;vh.MorphicDB=$v;vh.World=sx;vh.easings=mr;vh.morph=de;vh.promise=Hg;vh.string=Ih;vh.date=Gv;vh.Color=ng;vh.pt=di;vh.LoadingIndicator=sF;vh.resource=Xb;vh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var ZF=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("WorldPreview")&&"function"===typeof d.WorldPreview?d.WorldPreview:d.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a.initWithCommit(a._commit),0)})}},{key:"initWithCommit",value:function(a){var f=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return l=f.ui,r=l.preview,v=l.timestamp,y=l.title,A=l.description,E=l.previewContainer,f.opacity=.5,E.opacity=0,J.yield(f.whenRendered(),2);if(3!=J.nextAddress)return f._commit=a,r.imageUrl=a.preview||vh.missingSVG,F=a.author,H=F.name,
H=H.startsWith("guest-")?"guest":H,v.value=[H,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},vh.date.format(a.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],y.value=vh.string.truncate(a.name,18,"..."),A.value=a.description,J.yield(f.whenRendered(),3);E.opacity=1;f.animate({opacity:1,duration:300});J.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var f=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return l=
vh.morph(Object.assign({},f.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[f.ui.spinner.spec()]})).openInWorld(),l.hasFixedPosition=!0,l.globalPosition=f.globalPosition,l.opacity=0,r.yield(l.whenRendered(),2);case 2:return r.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:a,borderRadius:0,duration:500,easing:vh.easings.inOutQuint}),l.respondsToVisibleWindow=!0,r.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:vh.easings.inOutQuint}),
4);case 4:return r.yield(vh.promise.delay(1E3),5);case 5:return r.return(l)}})}},{key:"openWorld",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.openAnimated(),2);a.loadWorld();f.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){f=a._commit;l=f._id;r=f.name;if(lively.FreezerRuntime)return v=vh.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,v),A.jumpTo(0);y=vh.LoadingIndicator.open("loading "+r);return A.yield(vh.World.loadFromCommit(l,void 0,{morphicDB:vh.MorphicDB.default}),3)}y.remove();A.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,f,l){var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(Bb.import("./package loading progress indicator-1efecda1.js"),3);case 3:if(!(r=
E.yieldResult)){E.jumpTo(4);break}return E.yield(vh.resource("part://partial freezing/package loading progress indicator"),5);case 5:r=E.yieldResult;case 4:return E.yield(r.read(),2);case 2:return v=E.yieldResult,E.yield(Promise.resolve().then(function(){return Uea}),6);case 6:return y=E.yieldResult,A=y.bootstrap,E.yield(A({commit:f,loadingIndicator:l,progress:v}),0)}})}},{key:"showVersions",value:function(){var a=this,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return f=
200,l=vh.easings.inOutExpo,r=a.ui,v=r.previewContainer,E.yield(Bb.import("./version container-88475f67.js"),3);case 3:if(!(y=E.yieldResult)){E.jumpTo(4);break}return E.yield(vh.resource("part://partial freezing/version container"),5);case 5:y=E.yieldResult;case 4:return E.yield(y.read(),2);case 2:return A=E.yieldResult,A.name="version container",A.position=vh.pt(0,0),a.addMorph(A),A.reactsToPointer=A.visible=!0,A.initializeFromStartCommit(a._commit),a.animate({width:515,duration:f,easing:l}),v.animate({opacity:0,
duration:f}),E.yield(A.animate({opacity:1,duration:f}),6);case 6:v.reactsToPointer=v.visible=!1,E.jumpToEnd()}})}},{key:"hideVersions",value:function(){var a=this,f,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return f=vh.easings.inOutExpo,l=a.ui,r=l.previewContainer,v=l.versionContainer,r.reactsToPointer=r.visible=!0,a.animate({width:245,duration:200,easing:f}),r.animate({opacity:1,duration:200}),y.yield(v.animate({opacity:0,duration:200}),2);v.reset();
v.remove();y.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return f=300,l=a.ui,r=l.previewContainer,A.yield(Bb.import("./delete world prompt-0ba0ba5b.js"),3);case 3:if(!(v=A.yieldResult)){A.jumpTo(4);
break}return A.yield(vh.resource("part://partial freezing/delete world prompt"),5);case 5:v=A.yieldResult;case 4:return A.yield(v.read(),2);case 2:return y=A.yieldResult,Object.assign(y,{name:"delete world prompt",position:vh.pt(0,0),opacity:0}),a.addMorph(y),y.visible=!0,A.yield(a.withAnimationDo(function(){y.opacity=1;a.dropShadow=a.dropShadow.with({color:vh.Color.black.withA(.5),blur:50});r.opacity=.3;r.blur=1},{duration:f}),0)}})}},{key:"confirmDelete",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return f.yield(vh.MorphicDB.default.commit(Object.assign({},a._commit,{content:void 0,snapshot:null})),2);a.isComponent||a.owner.isWorld||a.owner.remove();f.jumpToEnd()})}},{key:"cancelDelete",value:function(){var a=this,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return f=a.ui,l=f.previewContainer,r=f.deleteWorldPrompt,v.yield(a.withAnimationDo(function(){Object.assign(l,{opacity:1,blur:0});a.dropShadow=a.dropShadow.with({color:vh.Color.rgba(0,
0,0,.11)});r.opacity=0},{duration:300}),2);r.remove();v.jumpToEnd()})}},{key:"onMouseUp",value:function(a){var f=this.ui,l=f.openButton,r=f.versionButton,v=f.deleteButton,y=f.closeVersionsButton,A=f.cancelDeleteButton;f=f.confirmDeleteButton;switch(a.targetMorph){case l:this.openWorld();break;case r:this.showVersions();break;case v:this.tryToDelete();break;case y:this.hideVersions();break;case f:this.confirmDelete();break;case A:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},
{key:"properties",get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),
deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-73"}}},{start:328,end:8310})}(vh.Morph);vh.WorldPreview=ZF;vh.WorldPreview=ZF;vh.WorldPreview=ZF;var $F=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("WorldLandingPage")&&"function"===typeof d.WorldLandingPage?d.WorldLandingPage:d.WorldLandingPage=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Zb(k,
b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var f=a.getSubmorphNamed("a project browser");f&&(f.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return $world.get("user flap")?
l.return():l.yield(Bb.import("./dark-20dbb5a0.js"),3);case 3:if(!(a=l.yieldResult)){l.jumpTo(4);break}return l.yield(vh.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=l.yieldResult;case 4:return l.yield(a.read(),2);case 2:return f=l.yieldResult,f.name="user flap",f.showMorphControls=!1,f.hasFixedPosition=!0,f.openInWorld(),f.opacity=0,f.alignInWorld(),f.get("fast load toggler").refresh(),l.yield(vh.promise.delay(1E3),6);case 6:f.animate({opacity:1}),l.jumpToEnd()}})}},{key:"beforePublish",
value:function(){var a=this.getSubmorphNamed("a project browser");a&&a.remove()}},{key:"onLoad",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=vh.Color.black;document.documentElement.style.background=vh.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();
(f=document.getElementById("loading screen"))&&f.remove();l.jumpToEnd()})}},{key:"showWorldList",value:function(){var a=this,f,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(f=a.getSubmorphNamed("a poject browser")){E.jumpTo(2);break}l=a;r=l.addMorph;v=l;return E.yield(Bb.import("./project browser-57f5dfdb.js"),4);case 4:if(!(y=E.yieldResult)){E.jumpTo(5);break}return E.yield(vh.resource("part://partial freezing/project browser"),6);case 6:y=
E.yieldResult;case 5:return E.yield(y.read(),3);case 3:f=r.call(v,E.yieldResult);case 2:A=f,A.name="a project browser",a.reset(),A.showCloseButton=!1,A.extent=vh.pt(1110,800).minPt(a.extent.subPt(vh.pt(50,150))),A.center=a.innerBounds().center(),A.animate({opacity:1,duration:300}),A.displayWorlds(),A.hasFixedPosition=!1,E.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-73"}}},{start:8319,end:11653})}(vh.Morph);vh.WorldLandingPage=
$F;vh.WorldLandingPage=$F;vh.WorldLandingPage=$F;var $x=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");$x.WorldLoadingScreen=YF;$x.WorldLandingPage=$F;$x.WorldPreview=ZF;$x.WorldLoadingScreen=YF;$x.WorldLoadingScreen=YF;$x.WorldLandingPage=$F;$x.WorldLandingPage=$F;$x.WorldPreview=ZF;$x.WorldPreview=ZF;var He=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");He.bootstrap=fN;He.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return He.resource(document.location.origin).join("package-registry.json").readJson()}).then(function(d){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,d);return System}).then(function(){return He.loadViaScript("/lively.user/dist/lively.user-client.js")})};He.installFetchHook=function(b){function d(k,a){He.loads++;b.status="loading "+He.string.truncateLeft(a.name.replace(window.System.baseURL,""),25,"...");b.progress=He.loads/(800-4*Object.keys(He.extractedModules).length);b.center=$world.innerBounds().center();return k(a)}window.__logFetch=d;lively.modules.installHook("fetch",d)};He.extractModules=
function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(d){return d.startsWith(b)}).forEach(function(d){He.extractedModules[window.origin+"/"+d]=Object.assign({},lively.FreezerRuntime.registry[d].exports)})};He.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(Bb.import("./world-c8effdf5.js"),2);case 2:return b.yield(Bb.import("./editor-plugin-3f8b115f.js").then(function(d){return d.e}),3);case 3:return b.yield(Bb.import("./editor-plugin-48566116.js"),
4);case 4:return b.yield(Bb.import("./index-a98bf65c.js"),5);case 5:return b.yield(Promise.resolve().then(function(){return Yva}),6);case 6:return b.yield(Promise.resolve().then(function(){return Zva}),7);case 7:return b.yield(Promise.resolve().then(function(){return xoa}),8);case 8:He.extractModules("lively.bindings"),He.extractModules("lively.shell"),He.extractModules("lively.ide"),He.extractModules("lively.components"),b.jumpToEnd()}})};He.bootstrapLivelySystem=function(b,d,k){return Promise.resolve().then(function(){b.status=
"starting bootstrap process..."}).then(function(){var a,f,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(d.whenRendered(),2);case 2:if("frozen"!=k["lively.lang"]&&!He.fastLoad){A.jumpTo(3);break}return A.yield(Promise.resolve().then(function(){return k8}),4);case 4:a=A.yieldResult,He.extractModules("lively.lang"),d.finishPackage({packageName:"lively.lang",frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=k["lively.ast"]&&
!He.fastLoad){A.jumpTo(5);break}f=lively;return A.yield(Promise.resolve().then(function(){return w8}),6);case 6:f.ast=A.yieldResult,He.extractModules("lively.ast"),d.finishPackage({packageName:"lively.ast",frozen:!0});case 5:if("frozen"!=k["lively.source-transform"]&&!He.fastLoad){A.jumpTo(7);break}l=lively;return A.yield(Promise.resolve().then(function(){return qoa}),8);case 8:l.sourceTransform=A.yieldResult,He.extractModules("lively.source-transform"),d.finishPackage({packageName:"lively.source-transform",
frozen:!0});case 7:if("frozen"!=k["lively.classes"]&&!He.fastLoad){A.jumpTo(9);break}return A.yield(Bb.import("./object-classes-ef580847.js"),10);case 10:return r=lively,A.yield(Promise.resolve().then(function(){return Ipa}),11);case 11:r.classes=A.yieldResult,He.extractModules("lively.class"),d.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=k["lively.vm"]&&!He.fastLoad){A.jumpTo(12);break}v=lively;return A.yield(Promise.resolve().then(function(){return p9}),13);case 13:v.vm=
A.yieldResult,He.extractModules("lively.vm"),d.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=k["lively.modules"]&&!He.fastLoad){A.jumpTo(14);break}return A.yield(Promise.resolve().then(function(){return uO}),15);case 15:He.extractModules("lively.modules"),d.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=k["lively.user"]&&!He.fastLoad){A.jumpTo(16);break}return A.yield(Promise.resolve().then(function(){return $va}),17);case 17:return A.yield(Bb.import("./user-ui-538db77c.js"),
18);case 18:He.extractModules("lively.user"),d.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=k["lively.storage"]&&!He.fastLoad){A.jumpTo(19);break}return A.yield(Promise.resolve().then(function(){return Yua}),20);case 20:He.extractModules("lively.storage"),d.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=k["lively.morphic"]&&!He.fastLoad){A.jumpTo(0);break}return A.yield(Promise.resolve().then(function(){return Apa}),22);case 22:return He.extractModules("lively.resources"),
A.yield(Promise.resolve().then(function(){return mca}),23);case 23:return A.yield(Bb.import("./index-792c91c7.js"),24);case 24:return He.extractModules("lively.2lively"),A.yield(Promise.resolve().then(function(){return Doa}),25);case 25:return He.extractModules("lively.serializer2"),A.yield(He.loadComponents(),26);case 26:return A.yield(Bb.import("./index-df7aed39.js").then(function(E){return E.i}),27);case 27:return He.extractModules("lively.halos"),A.yield(Bb.import("./index-1bff5bbb.js"),28);case 28:return He.extractModules("lively-system-interface"),
A.yield(Promise.resolve().then(function(){return voa}),29);case 29:return He.extractModules("lively.graphics"),y=lively,A.yield(Promise.resolve().then(function(){return Fwa}),30);case 30:y.morphic=A.yieldResult,He.extractModules("lively.morphic"),d.finishPackage({packageName:"lively.morphic",frozen:!0}),A.jumpToEnd()}})}).then(function(){var a,f,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(He.resource(document.location.origin).join("package-registry.json").readJson(),
2);case 2:return a=v.yieldResult,v.yield(He.loadViaScript("/lively.next-node_modules/babel-standalone/babel.js"),3);case 3:return v.yield(He.loadViaScript("/lively.next-node_modules/systemjs/dist/system.src.js"),4);case 4:return window.System.config({baseURL:document.location.origin}),v.yield(He.loadViaScript("/lively.modules/systemjs-init.js"),5);case 5:f=lively.modules.getSystem("bootstrapped",{baseURL:document.location.origin});lively.modules.changeSystem(f,!0);f["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(f,a);for(l in He.extractedModules)f.set(l,f.newModule(He.extractedModules[l])),r=lively.modules.module(l),r._recorder=He.extractedModules[l],r._frozenModule=!0;He.installFetchHook(b);v.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==k["lively.lang"]&&!He.fastLoad)return a.return(He.importPackageAndDo("lively.lang",function(f){d.finishPackage({packageName:"lively.lang",loaded:!0});delete f._prevLivelyGlobal},
b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){d.animate({opacity:1,easing:He.easings.outExpo,duration:300});if("dynamic"==k["lively.ast"]&&!He.fastLoad)return a.return(He.importPackageAndDo("lively.ast",function(f){d.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==k["lively.source-transform"]&&!He.fastLoad)return a.return(He.importPackageAndDo("lively.source-transform",
function(f){d.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==k["lively.classes"]&&!He.fastLoad)return a.return(He.importPackageAndDo("lively.classes",function(f){d.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
k["lively.vm"]&&!He.fastLoad)return a.return(He.importPackageAndDo("lively.vm",function(f){d.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=f},b));a.jumpToEnd()})}).then(function(){function a(f){lively.modules=f;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();He.installFetchHook(b);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];f=System["__lively.modules__packageRegistry"]=
f.PackageRegistry.ofSystem(System);Object.assign(f,He.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));f.resetByURL();l=f.allPackages();var r=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){He.adoptObject(y,r)});l=Object.values(System["__lively.modules__loadedModules"]);var v=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;
l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){He.adoptObject(y,v)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return"frozen"==k["lively.modules"]||He.fastLoad?(System._scripting=lively.modules.scripting,f.jumpTo(2)):f.yield(He.importPackageAndDo("lively.modules",a,b),2);d.finishPackage({packageName:"lively.modules",loaded:!0});f.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
k["lively.user"]&&!He.fastLoad)return a.return(He.importPackageAndDo("lively.user",function(f){d.finishPackage({packageName:"lively.user",loaded:!0});lively.user=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==k["lively.storage"]&&!He.fastLoad)return a.return(He.importPackageAndDo("lively.storage",function(f){d.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=f},b));a.jumpToEnd()})})};He.importPackageAndDo=
function(b,d,k){var a=b.split("/").slice(-1)[0];k.label="loading "+a;return lively.modules.importPackage(b).then(d||function(){})};He.polyfills=function(){var b=[];"PointerEvent"in window||b.push(He.loadViaScript(document.location.origin+"/lively.next-node_modules/pepjs/dist/pep.js"));"fetch"in window||b.push(He.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};He.resource=Xb;He.loadViaScript=ae;He.promise=Hg;He.string=Ih;He.obj=dg;He.modulePackage=uO;
He.easings=mr;He.adoptObject=lf;He.Color=ng;lively.modules=He.modulePackage;He.loginDone=!0;He.doBootstrap=!0;He.askBeforeQuit=!0;He.worldLoaded=!1;He.loc=document.location;He.query=He.resource(He.loc.href).query();He.fastLoad=1==He.query.fastLoad;He.bootstrap=fN;He.bootstrap=fN;He.loads=0;He.extractedModules={};var Uea=Object.freeze({__proto__:null,bootstrap:fN});Ul.users.authServerURL="https://auth.typeshift.io";Ul.css.fontAwesome="/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css";Ul.css.inconsolata=
"/lively.morphic/assets/inconsolata/inconsolata.css";var j8=JSON.parse('{"id":"WorldLandingPage_4E77C544_CC75_4DAF_9060_515FEAAE7A2A","snapshot":{"WorldLandingPage_4E77C544_CC75_4DAF_9060_515FEAAE7A2A":{"rev":183072,"props":{"name":{"value":"world landing page"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(65.60078124999927,36.453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1003.0232101304723,594.571136205233)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"Globe_5F60A38C_065F_4BE2_82F7_1ACA49C0850B","rev":2557}]},"clipMode":{"value":"hidden"},"styleClasses":{"value":["WorldLandingPage","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"0E64F20D-8816-410B-B7EE-419E8D8C9E2C","rev":0}},"metadata":{"value":{"__ref__":true,"id":"1137D94D-D544-4B70-AC99-46A77CE34870","rev":0}},"loadingScreen":{"value":{"__ref__":true,"id":"HTMLMorph_BB7C1336_D05F_4364_B224_2DF41D51EE82","rev":2500}}},"lively.serializer-class-info":{"className":"WorldLandingPage","module":{"package":{"name":"PartialFreezing","version":"0.1.1-73"},"pathInPackage":"landing-page.js"}}},"Globe_5F60A38C_065F_4BE2_82F7_1ACA49C0850B":{"rev":2557,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"53F0970D-FEA6-4EEB-9711-AC3135BE7866","rev":0}]},"name":{"value":"globe"},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-1.2699218750001364,0.14453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"WebGLCanvas_80AD094A_9092_4043_8426_C81B304F3A68","rev":2541},{"__ref__":true,"id":"Morph_12B54DD1_FFE1_47D0_A8B3_13D8B5C7680E","rev":2555}]},"styleClasses":{"value":["Globe","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"9C694CAA-3F53-4144-8160-39D84B03FD0A","rev":0}},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="}},"lively.serializer-class-info":{"className":"Globe","module":{"package":{"name":"Globe","version":"0.1.1-26"},"pathInPackage":"index.js"}}},"53F0970D-FEA6-4EEB-9711-AC3135BE7866":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"Globe_5F60A38C_065F_4BE2_82F7_1ACA49C0850B","rev":2557}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"Globe_5F60A38C_065F_4BE2_82F7_1ACA49C0850B","rev":2557}},"targetMethodName":{"value":"onExtentChanged"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"WebGLCanvas_80AD094A_9092_4043_8426_C81B304F3A68":{"rev":2541,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"B5E43976-2841-42BA-BDD8-1483AB70D018","rev":0}]},"name":{"value":"webgl canvas"},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"styleClasses":{"value":["WebGLCanvas","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"right":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"bottom":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"left":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1]}},"metadata":{"value":{"__ref__":true,"id":"AD6261ED-EC3A-4565-82A3-987D7838F39D","rev":0}},"contextType":{"value":"webgl"},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="},"fps":{"value":15}},"lively.serializer-class-info":{"className":"WebGLCanvas","module":{"package":{"name":"WebGLCanvas","version":"0.1.1-56"},"pathInPackage":"index.js"}}},"B5E43976-2841-42BA-BDD8-1483AB70D018":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"WebGLCanvas_80AD094A_9092_4043_8426_C81B304F3A68","rev":2541}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"WebGLCanvas_80AD094A_9092_4043_8426_C81B304F3A68","rev":2541}},"targetMethodName":{"value":"relayout"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"AD6261ED-EC3A-4565-82A3-987D7838F39D":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"5543f15ce9adfccb56c979db92d7b0d38398d6a8\\"})"}}},"Morph_12B54DD1_FFE1_47D0_A8B3_13D8B5C7680E":{"rev":2555,"props":{"name":{"value":"cover"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E4046934-6969-4409-A6A9-70D196793D5A","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"E4046934-6969-4409-A6A9-70D196793D5A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"44c59c7e6812baaed95b7a3660abcb246296e490\\"})"}}},"9C694CAA-3F53-4144-8160-39D84B03FD0A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"f71e0d7aa02c9c874eba979fe444380bf583f9f2\\"})"}}},"0E64F20D-8816-410B-B7EE-419E8D8C9E2C":{"rev":0,"props":{"_rev":{"value":0},"Nunito":{"value":"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap"}}},"1137D94D-D544-4B70-AC99-46A77CE34870":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"world landing page\\", _id: \\"32298ca0ee3f234f9baca22b5b5759595d486064\\"})"},"publishedAlias":{"value":"dashboard"},"excludedPackages":{"value":["kld-intersections"]},"publishedLocation":{"value":"/lively.freezer/dashboard/"}}},"HTMLMorph_BB7C1336_D05F_4364_B224_2DF41D51EE82":{"rev":2500,"props":{"name":{"value":"loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(485.34375,274.29296875)"},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E260E304-4972-4DDF-BD1B-76EF959102D2","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: black\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"E260E304-4972-4DDF-BD1B-76EF959102D2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/Globe":[],"local://lively-object-modules/WebGLCanvas":[]}}');
lively.resources={resource:Xb,loadViaScript:ae};lively.morphic={loadMorphFromSnapshot:iv};Ca("bU",void 0)}}});