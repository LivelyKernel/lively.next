System.register("./__root_module__-46f2ff9c.js kld-intersections ./index-ebb1a6e0.js ./color-picker-832d1d5c.js ./index-06bea506.js ./index-bfbe4600.js".split(" "),function(){var Ma,rb,Db,hc,Kb,id,Zc,yd,Kc,sc,bd,hd,se,xe,ne,Rc,Pd,Hb;return{setters:[function(Gc){Ma=Gc.M;rb=Gc.b;Db=Gc.C;hc=Gc.g;Kb=Gc.i;id=Gc.ac;Zc=Gc.aa;yd=Gc.a2;Kc=Gc.r;sc=Gc.d;bd=Gc.bJ;hd=Gc.n;se=Gc.p;xe=Gc.ab;ne=Gc.X;Rc=Gc.bo;Pd=Gc.bp;Hb=Gc.bn},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Gc=
lively.FreezerRuntime.recorderFor("ColorPicker/index.js");Gc.Morph=Ma;Gc.arr=rb;Gc.Color=Db;Gc.signal=hc;var ud=function($c){var Bc=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),vd=Bc.hasOwnProperty("ColorPicker")&&"function"===typeof Bc.ColorPicker?Bc.ColorPicker:Bc.ColorPicker=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(vd,$c,[{key:"toggleHalos",value:function(pb){this.withAllSubmorphsDo(function(lb){return lb.halosEnabled=
pb});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(lb){return lb.halosEnabled=pb})}},{key:"focusOnMorph",value:function(pb,lb){var Zb=pb&&pb.world();Zb&&(Zb.halos().forEach(function(Mb){return Mb.remove()}),Zb.withTopBarDo(function(Mb){return Mb.setEditMode("Hand",!0)}));this._target=pb;lb.isGradient?(this.ui.gradientControl.setGradient(lb,this),this.ui.colorTypeSelector.selection=lb.type):(this.color=lb,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",
value:function(){this.remove();var pb=this._target&&this._target.world();pb&&pb.withTopBarDo(function(lb){return lb.setEditMode("Halo",!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":Gc.signal(this,"value",this.gradientValue);break;case "Solid":Gc.signal(this,"value",this.color)}}},{key:"switchMode",value:function(pb){var lb=["linearGradient","radialGradient"].includes(pb);this.ui.gradientControl.toggle(lb,
this);this.colorMode=pb;this.update();this.confirm()}},{key:"enterColor",value:function(pb){this.color=pb;this.update(this.ui.colorEncoder);this.confirm()}},{key:"adjustColor",value:function(pb){this.color=pb;this.update();this.confirm()}},{key:"adjustOpacity",value:function(pb){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[pb]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(pb){this.hsb=[pb].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));
this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(pb){var lb=$jscomp.makeIterator(pb);pb=lb.next().value;lb=lb.next().value;this.hsb=[this.hsb[0],lb,pb,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(pb){this.confirm()}},{key:"update",value:function(pb){for(var lb=[],Zb=0;Zb<arguments.length;++Zb)lb[Zb-0]=arguments[Zb];var Mb=this;Gc.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(lb),[this.ui.colorTypeSelector])).forEach(function(ub){return ub.update(Mb)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(Gc.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(pb){this.ui.gradientControl.gradientValue=pb}},color:{derived:!0,get:function(){return Gc.Color.hsb.apply(Gc.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},
set:function(pb){this.hsb=[].concat($jscomp.arrayFromIterable(pb.toHSB()),[pb.a])}},solidOnly:{derived:!0,set:function(pb){var lb=this.ui.colorTypeSelector;pb&&(lb.selection="Solid");lb.visible=!pb}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),
gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(Gc.Morph);ud=Gc.ColorPicker;Gc.default=ud;var Vc=lively.FreezerRuntime.recorderFor("GradientControl/index.js");Vc.Morph=Ma;Vc.LinearGradient=id;Vc.RadialGradient=
Zc;Vc.Color=Db;Vc.rect=yd;Vc.resource=Kc;Vc.connect=sc;Vc.noUpdate=bd;Vc.signal=hc;Vc.num=hd;Vc.arr=rb;ud=function($c){var Bc=lively.FreezerRuntime.recorderFor("GradientControl/index.js"),vd=Bc.hasOwnProperty("GradientControl")&&"function"===typeof Bc.GradientControl?Bc.GradientControl:Bc.GradientControl=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(vd,$c,[{key:"onKeyDown",value:function(pb){Kb._get(Object.getPrototypeOf(vd.prototype),
"onKeyDown",this).call(this,pb);"Delete"==pb.keyCombo&&this.removeStop(this.selectedStopControl)}},{key:"onMouseDown",value:function(pb){Kb._get(Object.getPrototypeOf(vd.prototype),"onMouseDown",this).call(this,pb);"gradient preview"==pb.targetMorph.name&&(pb=pb.positionIn(pb.targetMorph).x/pb.targetMorph.width,this.addStopAt(pb))}},{key:"removeStop",value:function(pb){3>this.gradientValue.stops.length||(Vc.arr.remove(this.gradientValue.stops,pb.stop),this.refresh(),this.confirm())}},{key:"addStopAt",
value:function(pb){var lb=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),Zb=$jscomp.makeIterator(Vc.arr.sortBy(Vc.arr.sortBy(lb,function(ub){return Math.abs(ub.offset-pb)}).slice(0,2),function(ub){return ub.offset})),Mb=Zb.next().value;Zb=Zb.next().value;lb.push({color:Mb.color.interpolate((pb-Mb.offset)/(Zb.offset-Mb.offset),Zb.color),offset:pb});this.gradientValue.stops=Vc.arr.sortBy(lb,function(ub){return ub.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(pb,
lb){(this.isLayoutable=this.visible=pb)?this.gradientHalo.openInWorld():this.gradientHalo.remove();pb||this.reset()}},{key:"reset",value:function(){this.gradientValue=null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(pb){return pb.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(pb){this.gradientValue=pb.isGradient?new Vc.LinearGradient({stops:pb.stops}):new Vc.LinearGradient({stops:[{color:pb,offset:0},{color:Vc.Color.transparent,offset:1}]})}},{key:"initRadialGradient",
value:function(pb,lb){lb=lb.innerBounds();this.gradientValue=pb.isGradient?new Vc.RadialGradient({bounds:lb,stops:pb.stops}):new Vc.RadialGradient({bounds:lb,stops:[{color:pb,offset:0},{color:Vc.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(pb,lb){this.gradientValue=pb;this.gradientHalo.initFromPicker(lb)}},{key:"update",value:function(pb){if(!this.isDisabled){var lb=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==pb.colorMode||("linearGradient"==pb.colorMode&&
this.initLinearGradient(this.gradientValue||pb.color),"radialGradient"==pb.colorMode&&this.initRadialGradient(this.gradientValue||pb.color,pb._target),this.gradientHalo.initFromPicker(pb),this.gradientHalo.confirm());if(lb){var Zb=this.gradientValue.stops.find(function(Mb){return lb.stop==Mb});Zb&&(Zb.color=pb.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(pb){var lb=this.getSubmorphNamed("gradient preview").bounds().topEdge();return lb.start.interpolate(pb.offset,lb.end).subXY(0,
5)}},{key:"confirm",value:function(){Vc.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var pb=this.getSubmorphNamed("gradient"),lb=this.gradientValue.stops.map(function(Zb){return Object.assign({},Zb)});pb.fill=new Vc.LinearGradient({vector:Vc.rect(0),stops:lb});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(pb){var lb=$jscomp.makeIterator(pb);pb=lb.next().value;lb=lb.next().value/
this.getSubmorphNamed("gradient preview").width;this.adjustStop(pb,lb)}},{key:"adjustStop",value:function(pb,lb){pb.offset=Vc.num.clamp(pb.offset+lb,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(pb){this.addMorph(pb)}},{key:"getControlFor",value:function(pb,lb){lb=void 0===lb?this:lb;var Zb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mb){if(1==Mb.nextAddress)return Mb.yield(Vc.resource("part://SystemWidgets/gradient editor/color stop").read(),2);Zb=Mb.yieldResult;
Zb.withAllSubmorphsDo(function(ub){return ub.halosEnabled=!1});lb.placeStop(Zb);Vc.connect(Zb,"select",lb,"selectStop");Vc.connect(Zb,"moveColorStop",lb,"moveStop");return Mb.return(Zb.forStop(pb))})}},{key:"selectStop",value:function(pb){this.deselectAllStopsExcept(pb,this);this.deselectAllStopsExcept(pb,this.gradientHalo);Vc.signal(this,"switchColor",pb.stop.color)}},{key:"deselectAllStopsExcept",value:function(pb,lb){Vc.noUpdate(function(){lb.getSubmorphsByStyleClassName("ColorStop").forEach(function(Zb){Zb.stop!=
pb.stop?Zb.deselect():Zb.select()})})}},{key:"updateStopControls",value:function(pb,lb){lb=void 0===lb?this:lb;var Zb=this,Mb,ub,rc,Ta,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mb){switch(mb.nextAddress){case 1:if(lb._active)return mb.return();lb._active=!0;Mb=lb.getSubmorphsByStyleClassName("ColorStop");ub=$jscomp.makeIterator(pb);rc=ub.next();case 2:if(rc.done){mb.jumpTo(4);break}Ta=rc.value;if(Lb=Mb.shift()){Lb.forStop(Ta);mb.jumpTo(3);break}return mb.yield(Zb.getControlFor(Ta,
lb),3);case 3:rc=ub.next();mb.jumpTo(2);break;case 4:Vc.arr.invoke(Mb,"remove"),lb.getSubmorphsByStyleClassName("ColorStop").forEach(function(Gb){Gb.positionIn(lb)}),lb._active=!1,mb.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,
get:function(){return this.stopControls.find(function(pb){return pb.isSelected})}}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(Vc.Morph);ud=Vc.GradientControl;Vc.default=ud;var Id=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");Id.Morph=Ma;Id.arr=
rb;Id.resource=Kc;Id.connect=sc;Id.signal=hc;Id.pt=se;Id.RadialGradient=Zc;Id.LinearGradient=id;Id.Point=xe;ud=function($c){var Bc=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),vd=Bc.hasOwnProperty("GradientHalo")&&"function"===typeof Bc.GradientHalo?Bc.GradientHalo:Bc.GradientHalo=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(vd,$c,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(pb){return pb.remove()})}},
{key:"initFromPicker",value:function(pb){var lb=pb.gradientValue;this.picker=pb;"linearGradient"==lb.type&&this.initFromLinearGradient(this.targetMorph,lb);"radialGradient"==lb.type&&this.initFromRadialGradient(this.targetMorph,lb);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(pb,lb){pb=pb.innerBounds();lb=lb.vectorAsAngle();var Zb=pb.center(),Mb=Math.max(pb.height,pb.width),ub=Zb.addPt(Id.Point.polar(Mb,lb));lb=Zb.subPt(Id.Point.polar(Mb,lb));Zb=$jscomp.makeIterator(pb.lineIntersection(lb.lineTo(ub)));
lb=Zb.next().value;var rc=Zb.next().value;Zb=Id.arr.min([lb,rc],function(Ta){return Ta.dist(ub)});this.originPoint=Zb==lb?rc:lb;this.directionPoint=Zb;this.orthogonalDist=Id.arr.min(pb.edges(),function(Ta){return Ta.distanceFromLine(rc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(pb,lb){pb=pb.innerBounds().relativeToAbsPoint(lb.focus);var Zb=lb.bounds;lb=Zb.height;Zb=Zb.width;this.originPoint=pb;this.directionPoint=pb.addXY(0,lb/2);this.orthogonalDist=Zb/2;this.alignWithTarget()}},
{key:"alignWithTarget",value:function(){var pb=this.ui,lb=pb.directionHandle,Zb=pb.orthogonalHandle,Mb=pb.colorStopWrapper;pb.originHandle.center=Id.pt(0);lb.center=Id.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);Mb.width=this.width;lb.center=Id.pt(this.width,0);Zb.center=Id.pt(0,this.orthogonalDist);0<this.orthogonalDist?(Mb.tilted=1,Mb.position=Id.pt(this.width/2,this.height/4-1)):(Mb.tilted=0,Mb.position=Id.pt(this.width/2,-this.height/4+1));this.position=this.targetMorph.worldPoint(this.originPoint);
this.rotation=this.angle}},{key:"confirm",value:function(){var pb=this.picker.ui.gradientControl;"linearGradient"==pb.gradientValue.type&&(pb.gradientValue.vector=this.angle);if("radialGradient"==pb.gradientValue.type){var lb=pb.gradientValue,Zb=2*Math.abs(this.orthogonalDist),Mb=2*this.originPoint.dist(this.directionPoint);lb.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());lb.bounds=Id.pt(0,0).extent(Id.pt(Zb,Mb));lb.angle=this.angle}pb.confirm();this.refresh(pb,this.targetMorph);
this.alignWithTarget()}},{key:"normalize",value:function(pb){return this.getGlobalTransform().transformDirection(pb)}},{key:"moveOriginHandle",value:function(pb){pb=this.normalize(pb.state.dragDelta);this.originPoint=this.originPoint.addPt(pb);this.confirm()}},{key:"moveDirectionHandle",value:function(pb){pb=this.normalize(pb.state.dragDelta);this.directionPoint=this.directionPoint.addPt(pb);this.confirm()}},{key:"moveOrthogonalHandle",value:function(pb){pb=this.normalize(pb.state.dragDelta);this.orthogonalDist-=
pb.dotProduct(Id.Point.polar(1,this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(pb){var lb=$jscomp.makeIterator(pb);pb=lb.next().value;lb=lb.next().value;this.picker.ui.gradientControl.adjustStop(pb,lb/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(pb,lb){lb=pb.gradientValue;this.alignWithTarget();pb.updateStopControls(lb.stops,this)}},{key:"placeStop",value:function(pb){this.get("color stop wrapper").addMorph(pb)}},{key:"selectStop",value:function(pb){this.picker.ui.gradientControl.selectStop(pb)}},
{key:"getPositionFor",value:function(pb){var lb=this.getSubmorphNamed("color stop wrapper"),Zb=lb.innerBounds().bottomEdge();return Zb.start.interpolate(pb.offset,Zb.end).subXY(0,5).subPt(lb.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),directionHandle:this.getSubmorphNamed("direction handle"),
orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",version:"0.1.1-141"}}},{start:300,end:5821})}(Id.Morph);
ud=Id.GradientHalo;Id.default=ud;var ie=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");ie.Morph=Ma;ie.pt=se;ie.Color=Db;ie.LinearGradient=id;ie.signal=hc;ie.num=hd;ud=function($c){var Bc=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),vd=Bc.hasOwnProperty("OpacityPicker")&&"function"===typeof Bc.OpacityPicker?Bc.OpacityPicker:Bc.OpacityPicker=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(vd,$c,[{key:"confirm",value:function(){ie.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function(pb){var lb=this.get("slider").width;this.sliderPosition=ie.pt(0,pb.positionIn(this).y-lb/2);this.confirm()}},{key:"onDrag",value:function(pb){var lb=this.get("slider").width;this.sliderPosition=ie.pt(0,pb.positionIn(this).y-lb/2);this.confirm()}},{key:"update",value:function(pb){this.alpha=pb.color.a;this.getSubmorphNamed("opacity gradient").fill=new ie.LinearGradient({stops:[{offset:0,
color:pb.color.withA(0)},{offset:1,color:pb.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return ie.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(pb){this.alpha=ie.num.clamp(pb.y/(this.height-10),0,1);this.refresh()}}}}}],Bc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(ie.Morph);ud=ie.OpacityPicker;ie.default=ud;var Fb=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");Fb.Morph=Ma;Fb.Color=Db;Fb.signal=hc;Fb.noUpdate=bd;Fb.num=hd;ud=function($c){var Bc=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),vd=Bc.hasOwnProperty("ColorEncoder")&&
"function"===typeof Bc.ColorEncoder?Bc.ColorEncoder:Bc.ColorEncoder=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(vd,$c,[{key:"update",value:function(pb){this.currentColor=pb.hsb;this.refresh()}},{key:"refresh",value:function(){var pb=this,lb=this.currentColor;Fb.noUpdate(function(){({Hex:function(){return pb.updateHex(lb)},RGB:function(){return pb.updateRGB(lb)},HSL:function(){return pb.updateHSL(lb)},
HSB:function(){return pb.updateHSB(lb)},CSS:function(){return pb.updateCSS(lb)}})[pb.encodingMode]()})}},{key:"updateHex",value:function(pb){pb=Fb.Color.hsb.apply(Fb.Color,$jscomp.arrayFromIterable(pb)).withA(Fb.num.roundTo(pb[3],.01));var lb=this.getSubmorphNamed("hex input"),Zb=this.getSubmorphNamed("hex opacity control");lb.input=pb.toHexString().toUpperCase();Zb.number=pb.a}},{key:"updateRGB",value:function(pb){var lb=this.getSubmorphNamed("first value"),Zb=this.getSubmorphNamed("second value"),
Mb=this.getSubmorphNamed("third value"),ub=this.getSubmorphNamed("opacity control"),rc=$jscomp.makeIterator(Fb.Color.hsb.apply(Fb.Color,$jscomp.arrayFromIterable(pb)).toTuple()),Ta=rc.next().value,Lb=rc.next().value;rc=rc.next().value;pb=pb[3];lb.number=255*Ta;Zb.number=255*Lb;Mb.number=255*rc;ub.number=pb}},{key:"updateHSL",value:function(pb,lb){lb=void 0===lb?!0:lb;var Zb=this.getSubmorphNamed("first value"),Mb=this.getSubmorphNamed("second value"),ub=this.getSubmorphNamed("third value"),rc=this.getSubmorphNamed("opacity control"),
Ta=$jscomp.makeIterator(pb),Lb=Ta.next().value,mb=Ta.next().value;Ta=Ta.next().value;ub.number=lb?1-Ta:Ta;Zb.number=Lb;Mb.number=mb;rc.number=pb[3]}},{key:"updateHSB",value:function(pb){this.updateHSL(pb,!1)}},{key:"updateCSS",value:function(pb){var lb=this.getSubmorphNamed("css input");pb=Fb.Color.hsb.apply(Fb.Color,$jscomp.arrayFromIterable(pb)).withA(Fb.num.roundTo(pb[3],.01));lb.input=pb.toCSSString()}},{key:"confirm",value:function(){var pb=this;({Hex:function(){return pb.confirmHex()},RGB:function(){return pb.confirmRGB()},
HSL:function(){return pb.confirmHSL()},HSB:function(){return pb.confirmHSB()},CSS:function(){return pb.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var pb=this.getSubmorphNamed("hex input"),lb=this.getSubmorphNamed("hex opacity control");pb=Fb.Color.rgbHex(pb.input).withA(lb.number);Fb.signal(this,"colorEntered",pb)}},{key:"confirmRGB",value:function(){var pb=this.getSubmorphNamed("first value"),lb=this.getSubmorphNamed("second value"),Zb=this.getSubmorphNamed("third value"),
Mb=this.getSubmorphNamed("opacity control");pb=Fb.Color.rgba(pb.number,lb.number,Zb.number,Mb.number);Fb.signal(this,"colorEntered",pb)}},{key:"confirmHSL",value:function(){var pb=this.getSubmorphNamed("first value"),lb=this.getSubmorphNamed("second value"),Zb=this.getSubmorphNamed("third value"),Mb=this.getSubmorphNamed("opacity control");pb=Fb.Color.hsb(pb.number,lb.number,1-Zb.number).withA(Mb.number);Fb.signal(this,"colorEntered",pb)}},{key:"confirmHSB",value:function(){var pb=this.getSubmorphNamed("first value"),
lb=this.getSubmorphNamed("second value"),Zb=this.getSubmorphNamed("third value"),Mb=this.getSubmorphNamed("opacity control");pb=Fb.Color.hsb(pb.number,lb.number,Zb.number).withA(Mb.number);Fb.signal(this,"colorEntered",pb)}},{key:"confirmCSS",value:function(){var pb=this.getSubmorphNamed("css input");pb=Fb.Color.fromString(pb.input);Fb.signal(this,"colorEntered",pb)}},{key:"selectEncoding",value:function(pb){this.encodingMode=pb;this.submorphs.map(function(Zb){return Zb.visible=Zb.isLayoutable=!1});
var lb=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[pb]);lb.visible=lb.isLayoutable=!0;"RGB"==pb&&[lb.getSubmorphNamed("first value"),lb.getSubmorphNamed("second value"),lb.getSubmorphNamed("third value")].forEach(function(Zb){Object.assign(Zb,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(pb)&&(Object.assign(lb.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[lb.getSubmorphNamed("second value"),
lb.getSubmorphNamed("third value")].forEach(function(Zb){Object.assign(Zb,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:Fb.Color.white}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorEncoder",version:"0.1.1-41"}}},{start:211,end:5347})}(Fb.Morph);ud=Fb.ColorEncoder;Fb.default=ud;var Ac=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");Ac.HTMLMorph=ne;Ac.arr=rb;Ac.materialDesignColors=Rc;Ac.webSafeColors=Pd;Ac.flatDesignColors=Hb;Ac.Color=Db;Ac.signal=hc;ud=function($c){var Bc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),vd=Bc.hasOwnProperty("ColorPaletteView")&&"function"===typeof Bc.ColorPaletteView?Bc.ColorPaletteView:
Bc.ColorPaletteView=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(vd,$c,[{key:"test",value:function(){this.showPalette(Ac.materialDesignColors.map(function(pb){return Ac.Color.rgbHex(pb)}))}},{key:"selectPalette",value:function(pb){var lb={"Flat Design":Ac.flatDesignColors,Material:Ac.materialDesignColors,"Web Safe":Ac.webSafeColors};lb[pb]&&this.showPalette(lb[pb].map(function(Zb){return Ac.Color.rgbHex(Zb)}))}},
{key:"onMouseDown",value:function(pb){Kb._get(Object.getPrototypeOf(vd.prototype),"onMouseDown",this).call(this,pb);(pb=pb.domEvt.target.dataset.color)&&Ac.signal(this,"colorSelected",Ac.Color.fromString(pb))}},{key:"showPalette",value:function(pb){this.html='<div class="palette-container">\n      '+pb.map(function(lb){return'<div class="color-cell" data-color="'+lb+'" style="background: '+lb+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],
Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(Ac.HTMLMorph);ud=Ac.ColorPaletteView;Ac.default=ud}}});