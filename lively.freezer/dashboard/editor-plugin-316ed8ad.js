System.register(["./__root_module__-fd8ea0c8.js","kld-intersections","./index-f52d5423.js","./editor-plugin-9c75ae1d.js","./index-385d8bf3.js"],function(Ca){var Bb,Kb,lc,bc,Td,Xc,Wd,$c,Pc,md,ge,Qe,kf,ke,cc,Hc,Nd,ec,$d,le,Dc,Ic,Vb,Lc;return{setters:[function(dd){Bb=dd.aw;Kb=dd.bB;lc=dd.bC;bc=dd.bD;Td=dd.E;Xc=dd.au;Wd=dd.aZ;$c=dd.a7;Pc=dd.ae;md=dd.bo;ge=dd.a6;Qe=dd.$;kf=dd.bE;ke=dd.bv},function(){},function(dd){cc=dd.s},function(dd){Hc=dd.p;Nd=dd.d;ec=dd.a;$d=dd.r;le=dd.C},function(dd){Dc=dd.localInterface;
Ic=dd.systemInterfaceNamed;Vb=dd.serverInterfaceFor;Lc=dd.l2lInterfaceFor}],execute:function(){var dd=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");dd.warnStyle={"border-bottom":"2px dotted orange"};dd.errorStyle={"background-color":"red"};var Hd=function(vb){var ha=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Ha=ha.hasOwnProperty("JavaScriptChecker")&&"function"===typeof ha.JavaScriptChecker?ha.JavaScriptChecker:ha.JavaScriptChecker=function(W){W&&W[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bb(Ha,vb,[{key:"uninstall",value:function(W){var ra=W.text||W;(ra.markers||[]).forEach(function(Za){return Za.id.startsWith("js-checker-")&&ra.removeMarker(Za)});ra.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(W,ra){return[].concat($jscomp.arrayFromIterable(W.embeddedMorphMap.values())).find(function(Za){return ra.containsPosition(Za.anchor.position)})}},{key:"onDocumentChange",value:function(W,
ra,Za){var qb=ra.document;try{var sc=Za.parse()}catch(wd){sc=wd}sc&&(W=(ra.markers||[]).filter(function(wd){return wd.id.startsWith("js-checker-")}),Za=Za.undeclaredVariables().map(function(wd,nc){var Ob=wd.start;wd=wd.end;Ob=qb.indexToPosition(Ob);wd=qb.indexToPosition(wd);return ra.addMarker({id:"js-checker-"+nc,style:dd.warnStyle,range:{start:Ob,end:wd},type:"js-undeclared-var"})}),W.slice(Za.length).forEach(function(wd){return ra.removeMarker(wd)}),sc.parseError?(W=sc.parseError.loc,Za=W.column,
W=W.line-1,sc=qb.indexToPosition(sc.parseError.pos),Za=sc.column,W=sc.row,sc={start:{column:Za-1,row:W},end:{column:Za+1,row:W}},this.hasEmbeddedMorphInRange(ra,sc)||ra.addMarker({id:"js-syntax-error",range:sc,style:dd.errorStyle,type:"js-syntax-error"})):ra.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],ha,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:126,end:1896})}(void 0),Ld=Hd=dd.JavaScriptChecker;dd.default=Hd;var wc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");wc.query=Kb;wc.fuzzyParse=lc;wc.acorn=bc;wc.custom=Td;var rb=function(vb){var ha=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Ha=ha.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof ha.JavaScriptNavigator?
ha.JavaScriptNavigator:ha.JavaScriptNavigator=function(W){W&&W[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bb(Ha,vb,[{key:"ensureAST",value:function(W){return this.parse(W.textString)}},{key:"parse",value:function(W){return wc.fuzzyParse(W)}},{key:"move",value:function(W,ra){var Za=!!ra.activeMark||!ra.selection.isEmpty(),qb=ra.selection,sc=ra.positionToIndex(qb.lead);W=this[W](ra.textString,sc);W=ra.indexToPosition(W);qb.lead=
W;Za||(qb.anchor=W);ra.scrollCursorIntoView()}},{key:"forwardSexp",value:function(W){this.move("_forwardSexp",W)}},{key:"backwardSexp",value:function(W){this.move("_backwardSexp",W)}},{key:"backwardUpSexp",value:function(W){this.move("_backwardUpSexp",W)}},{key:"forwardDownSexp",value:function(W){this.move("_forwardDownSexp",W)}},{key:"_forwardSexp",value:function(W,ra){W=this.parse(W);W=wc.custom.findNodesIncluding(W,ra).reverse().find(function(qb){return qb.end!==ra});if(!W)return ra;if("BlockStatement"===
W.type){var Za=W.body.find(function(qb){return qb.start>ra});if(Za)return Za.start}return W.end}},{key:"_backwardSexp",value:function(W,ra){W=this.parse(W);W=wc.custom.findNodesIncluding(W,ra).reverse().find(function(qb){return qb.start!==ra});if(!W)return ra;if("BlockStatement"===W.type){var Za=W.body.slice().reverse().find(function(qb){return qb.end<ra});if(Za)return Za.end}return W?W.start:ra}},{key:"_backwardUpSexp",value:function(W,ra){W=this.parse(W);return(W=wc.custom.findNodesIncluding(W,
ra).reverse().find(function(Za){return Za.start!==ra}))?W.start:ra}},{key:"_forwardDownSexp",value:function(W,ra){W=this.parse(W);return(W=wc.custom.findNodeAfter(W,ra,function(Za,qb){return qb.start>ra}))?W.node.start:ra}},{key:"markDefun",value:function(W){var ra=this.rangeForFunctionOrDefinition(W.textString,[W.positionToIndex(W.selection.range.start),W.positionToIndex(W.selection.range.end)]);ra&&W.execCommand("expandRegion",{start:ra[0],end:ra[1]})}},{key:"rangeForNodesMatching",value:function(W,
ra,Za){W=this.parse(W);return(ra=wc.custom.findNodesIncluding(W,ra).reverse().find(Za))?[ra.start,ra.end]:null}},{key:"rangeForFunctionOrDefinition",value:function(W,ra){var Za=ra[0]===ra[1];return this.rangeForNodesMatching(W,ra[1],function(qb){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(qb.type)&&(Za&&qb.end!==ra[1]||!Za&&qb.start<ra[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(W,ra){"number"!==typeof ra&&(ra=W.positionToIndex(ra));
W=this.ensureAST(W);var Za=wc.query.nodesAt(ra,W).reverse(),qb=Za.find(function(wd){return"Identifier"===wd.type});if(!qb&&((Za=Za[0])&&Za.type.includes("Specifier")&&Za.local&&"Identifier"===Za.local.type&&(qb=Za.local),!qb))return;ra=(Za=wc.query.findDeclarationClosestToIndex(W,qb.name,ra))?wc.query.scopeAtIndex(W,Za.start):wc.query.scopeAtIndex(W,ra);var sc=wc.query.findReferencesAndDeclsInScope(ra,qb.name).refs;return{parsed:W,scope:ra,id:qb,name:qb.name,decl:Za,refs:sc}}},{key:"expandRegion",
value:function(W,ra,Za,qb){function sc(Zd){Zd=W.positionToIndex({column:0,row:nc.row});return{range:[Zd+Ob.start,Zd+Ob.start+Ob.value.length],prev:qb}}var wd=qb.range[0]!==qb.range[1],nc=W.indexToPosition(qb.range[0]),Ob=W.tokenAt(nc);if(!wd&&Ob&&["keyword","identifier"].includes(Ob.type))return sc();Za=Za||this.parse(ra);ra=wc.query.nodesAtIndex(Za,qb.range[0]).reverse().find(function(Zd){return Zd.start<qb.range[0]||Zd.end>qb.range[1]});if(!ra)return qb;Za=ra.start;wd=ra.end;return"Literal"===ra.type&&
(ra.raw||"").match(/^['"`]/)&&qb.range[0]!==ra.start&&qb.range[1]!==ra.end&&(ra.start+1<qb.range[0]||ra.end-1>qb.range[1])?{range:[Za+1,wd-1],prev:qb}:{range:[Za,wd],prev:qb}}},{key:"contractRegion",value:function(W,ra,Za,qb){return qb.prev||qb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],ha,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6780})}(void 0);Hd=rb=wc.JavaScriptNavigator;wc.default=rb;var Gb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");Gb.addIndexToTextPos=function(vb,ha,Ha){return vb.indexToPosition(vb.positionToIndex(ha)+Ha)};Gb.connect=Xc;Gb.disconnect=Wd;Gb.string=$c;Gb.KeyHandler=Pc;Gb.Range=md;rb=function(vb){var ha=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Ha=ha.hasOwnProperty("Snippet")&&"function"===
typeof ha.Snippet?ha.Snippet:ha.Snippet=function(W){W&&W[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bb(Ha,vb,[{key:Symbol.for("lively-instance-initialize"),value:function(W){W=void 0===W?{trigger:null,expansion:""}:W;var ra=W.expansion;this.trigger=W.trigger;this.expansion=ra;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(W){this.isExpanding&&(this.textMorph=W,Gb.connect(this.textMorph,
"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(W){this.isExpanding&&(Gb.disconnect(W,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var W=this.expansionState,ra=W.startAnchor,Za=W.endAnchor;W.isExpanding?Gb.Range.fromPositions(ra.position,Za.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var W=this.textMorph;if(W){var ra=
this.expansionState||{},Za=ra.marker,qb=ra.startAnchor,sc=ra.endAnchor;ra=ra.steps;qb&&W.removeAnchor(qb);sc&&W.removeAnchor(sc);Za&&W.removeMarker(Za);ra.forEach(function(wd){return W.removeAnchor(wd.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};W&&W.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(W){var ra=[],Za=0;Gb.string.reMatches(W,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(qb){var sc=
qb.start,wd=qb.end;qb=qb.match;var nc="";qb.startsWith("${")?(nc=$jscomp.makeIterator(qb.match(/^\$\{([0-9]+):([^\}]*)\}/)),nc.next(),qb=nc.next().value,nc=nc.next().value,qb=Number(qb)):qb=Number(qb.replace(/^\$/,""));W=W.slice(0,sc-Za)+nc+W.slice(wd-Za);ra[qb]={index:sc-Za,prefill:nc,anchor:null};Za+=wd-sc-nc.length});return{steps:ra,expansion:W}}},{key:"expandAtCursor",value:function(W){var ra=W.selection,Za=W.cursorPosition.column,qb=this.expansion;this.trigger&&(Za-=this.trigger.length);if(Za=
Math.max(0,Za))qb=Gb.string.lines(qb),qb=[qb[0]].concat($jscomp.arrayFromIterable(qb.slice(1).map(function(Id){return Gb.string.indent(Id," ",Za)}))),qb=qb.join("\n");var sc=this.createExpansionSteps(qb);qb=sc.expansion;sc=sc.steps;this.trigger&&ra.growLeft(this.trigger.length);ra.text=qb;var wd=ra.start;qb=ra.end;ra.collapseToEnd();if(sc.length){var nc=Gb.string.newUUID();sc.forEach(function(Id,kb){return Id.anchor=W.addAnchor(Object.assign({id:"snippet-step-"+kb+"-"+nc},Gb.addIndexToTextPos(W,wd,
Id.index)))});var Ob=W.addAnchor(Object.assign({id:"snippet-start-"+nc},wd,{insertBehavior:"stay"})),Zd=W.addAnchor(Object.assign({id:"snippet-end-"+nc},qb));this.expansionState={marker:W.addMarker({id:"snippet-marker-"+nc,get range(){return{start:Ob.position,end:Zd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:Ob,endAnchor:Zd,stepIndex:0,steps:sc,isExpanding:!0};
W.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var W=this.expansionState,ra=W.steps,Za=this.textMorph;if(W.isExpanding&&Za){Za=Za.selection;W=ra[W.stepIndex];var qb=W.prefill;Za.lead=Za.anchor=W.anchor.position;Za.growRight(qb.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=ra.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(W,ra){ra=W.positionToIndex(W.cursorPosition);
return W.textString.slice(ra-this.trigger.length,ra)===this.trigger}},{key:"tryTrigger",value:function(W,ra){if(!this.canExpand(W,W.cursorPosition))return!1;this.expandAtCursor(W);return!0}},{key:"getCommands",value:function(W){var ra=this;return W.concat([{name:"[snippet] next expansion step",exec:function(Za){ra.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Za){ra.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(W){return W.concat(Gb.KeyHandler.withBindings([{keys:"Tab",
command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],ha,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:357,end:6029})}(void 0);Gb.Snippet=rb;Gb.Snippet=rb;Gb.Snippet=
rb;var Oa=[{name:"get snippets",exec:function(vb){return vb.pluginCollect("getSnippets",[])}}];Gb.snippetCommands=Oa;Gb.snippetCommands=Oa;Gb.snippetCommands=Oa;var ab=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");ab.buildEvalOpts=function(vb,ha){return vb.plugins.find(function(Ha){return Ha.isJSEditorPlugin}).sanatizedJsEnv(ha)};ab.Snippet=rb;Oa=function(vb){var ha=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Ha=ha.hasOwnProperty("ModuleTopLevelVarCompleter")&&
"function"===typeof ha.ModuleTopLevelVarCompleter?ha.ModuleTopLevelVarCompleter:ha.ModuleTopLevelVarCompleter=function(W){W&&W[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bb(Ha,vb,[{key:"compute",value:function(W,ra){var Za,qb,sc,wd,nc,Ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){if(1==Zd.nextAddress){qb=(Za=W.pluginFind(function(Id){return Id.isJSEditorPlugin}))&&Za.systemInterface();if(!qb)return Zd.return([]);
sc=ab.buildEvalOpts(W);wd=sc.targetModule;return"local"===qb.name?(nc=Object.getOwnPropertyNames(qb.getModule(wd).recorder),Zd.jumpTo(2)):Zd.yield(qb.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+wd+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',
{targetModule:"lively://module-recorder-completer"}),3)}if(2!=Zd.nextAddress){Ob=Zd.yieldResult;if(Ob.isError)return Zd.return([]);nc=JSON.parse(Ob.value)}nc=nc.filter(function(Id){return!Id.startsWith("defVar_")&&!["System","__currentLivelyModule","initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(Id)});return Zd.return(nc.map(function(Id){return{priority:1100,completion:Id}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],
ha,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:227,end:1700})}(void 0);ab.ModuleTopLevelVarCompleter=Oa;ab.ModuleTopLevelVarCompleter=Oa;ab.ModuleTopLevelVarCompleter=Oa;Oa=function(vb){var ha=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Ha=ha.hasOwnProperty("DynamicJavaScriptCompleter")&&
"function"===typeof ha.DynamicJavaScriptCompleter?ha.DynamicJavaScriptCompleter:ha.DynamicJavaScriptCompleter=function(W){W&&W[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bb(Ha,vb,[{key:"isValidPrefix",value:function(W){return/\.[a-z0-9_]*$/i.test(W)}},{key:"isMethodCallCompletion",value:function(W){return W.endsWith(")")&&0<W.indexOf("(")}},{key:"isValidIdentifier",value:function(W){if("string"!==typeof W)return!1;this.isMethodCallCompletion(W)&&
(W=W.slice(0,W.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(W)?!0:!1}},{key:"wrapInBrackets",value:function(W){if(!isNaN(Number(W))||W.startsWith("Symbol."))return"["+W+"]";var ra="";this.isMethodCallCompletion(W)&&(ra=W.slice(W.indexOf("(")),W=W.slice(0,W.indexOf("(")));return'["'+W.replace(/"/g,'\\"')+'"]'+ra}},{key:"compute",value:function(W){var ra=this,Za,qb,sc,wd,nc,Ob,Zd,Id,kb,Eb,ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress){Za=W.selection;
Za.isEmpty()?(qb=W.getLine(Za.lead.row),qb=qb.slice(qb.lastIndexOf(":")+1,Za.lead.column)):qb=Za.text.slice(Math.max(0,Za.text.indexOf(":")),0);if(!ra.isValidPrefix(qb))return ub.return([]);wd=(sc=W.pluginFind(function(cd){return cd.isJSEditorPlugin}))&&sc.systemInterface();if(!wd)return ub.return([]);nc=ab.buildEvalOpts(W);return ub.yield(wd.dynamicCompletionsForPrefix(nc.targetModule,qb,nc),2)}Ob=ub.yieldResult;Zd=Ob.isError;Id=Ob.value;kb=Ob.completions;Eb=Ob.prefix;if(Zd)return console.warn("javascript completer encountered error: "+
(Id.stack||Id)),ub.return([]);kb.reduce(function(cd,Vc){Vc=$jscomp.makeIterator(Vc);Vc.next();Vc=Vc.next().value;return cd+Vc.length},0);ad=kb.reduce(function(cd,Vc,ib){Vc=$jscomp.makeIterator(Vc);var Ra=Vc.next().value;Vc=Vc.next().value;return cd.concat(Vc.map(function(pb){var bb=ra.isValidIdentifier(pb);return{info:Ra,completion:pb,prefix:bb?Eb:"."+Eb,customInsertionFn:bb?ra.isMethodCallCompletion(pb)?function(Oc,ma,Aa,xb){ma=xb.start;xb=xb.end;Oc=Oc.replace(/\((.*)\)/,function(P){return"("+P.slice(1,
-1).split(", ").map(function(wa,Xa){return"${"+Xa+":"+wa+"}"}).join(", ")+")"});Oc=new ab.Snippet({expansion:Oc});Aa.replace({start:ma,end:xb},"");Oc.expandAtCursor(Aa)}:null:function(Oc,ma,Aa,xb){Oc=xb.start;xb=xb.end;ma={row:Oc.row,column:Oc.column-1};xb="."===Aa.textInRange({start:ma,end:Oc})?{start:ma,end:xb}:{start:Oc,end:xb};Aa.replace(xb,ra.wrapInBrackets(pb))}}}))},[]);ad.forEach(function(cd,Vc){return Object.assign(cd,{priority:2E3+ad.length-Vc})});return ub.return(ad)})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"DynamicJavaScriptCompleter"}}],ha,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1709,end:5085})}(void 0);ab.DynamicJavaScriptCompleter=Oa;ab.DynamicJavaScriptCompleter=Oa;ab.DynamicJavaScriptCompleter=Oa;ab.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
Oa=function(vb){var ha=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Ha=ha.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof ha.JavaScriptKeywordCompleter?ha.JavaScriptKeywordCompleter:ha.JavaScriptKeywordCompleter=function(W){W&&W[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bb(Ha,vb,[{key:"compute",value:function(W,ra){return ab.keywords.map(function(Za){return{completion:Za,priority:0}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],ha,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6087,end:6225})}(void 0);ab.JavaScriptKeywordCompleter=Oa;ab.JavaScriptKeywordCompleter=Oa;ab.JavaScriptKeywordCompleter=Oa;Oa=[new ab.DynamicJavaScriptCompleter,
new ab.JavaScriptKeywordCompleter,new ab.ModuleTopLevelVarCompleter];ab.completers=Oa;ab.completers=Oa;ab.completers=Oa;var Qa=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");Qa.Snippet=rb;var Ja=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],
["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],
["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],
["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],
["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];Qa.snippets=Ja;Qa.snippets=Ja;Qa.snippets=Ja;var eb=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");eb.getEvalEnv=function(vb){return(vb=vb.pluginFind(function(ha){return ha.isJSEditorPlugin}))?vb.evalEnvironment:null};eb.setEvalEnv=function(vb,ha){(vb=vb.pluginFind(function(Ha){return Ha.isJSEditorPlugin}))&&Object.assign(vb.evalEnvironment,ha);return vb.evalEnvironment};
eb.pToI=function(vb,ha){return vb.positionToIndex(ha)};eb.iToP=function(vb,ha){return vb.indexToPosition(ha)};eb.arr=ge;eb.promise=Qe;eb.string=$c;eb.show=cc;eb.Range=md;eb.query=Kb;eb.BaseVisitor=kf;Qa=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(vb,ha){ha=void 0===ha?{varName:null,position:null}:ha;var Ha,W,ra,Za,qb,sc,wd,nc,Ob,Zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Id){switch(Id.nextAddress){case 1:Ha=
ha;W=Ha.varName;ra=Ha.position;if(!W){ra||(ra=vb.cursorPosition);Za=vb.pluginInvokeFirst("getNavigator");qb=Za.ensureAST(vb);sc=eb.query.nodesAt(vb.positionToIndex(ra),qb).reverse().find(function(kb){return"Identifier"===kb.type});if(!sc)return vb.showError(Error("no identifier found!")),Id.return(!0);W=sc.name}ha=vb.pluginFind(function(kb){return kb.isJSEditorPlugin}).sanatizedJsEnv();wd='lively.modules.module("'+ha.targetModule+'").undefine("'+W+'")';Id.setCatchFinallyBlocks(2);return Id.yield(vb.doEval(null,
ha,wd),4);case 4:nc=Id.yieldResult;Ob=nc.error?nc.error:nc.isError?nc.value:null;Id.leaveTryBlock(3);break;case 2:Ob=Zd=Id.enterCatchBlock();case 3:return Ob?vb.showError(Ob):vb.setStatusMessage(W+" undefined"),Id.return(!0)}})}},{name:"change doitContext",exec:function(vb){var ha,Ha,W,ra,Za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return ha=$jscomp,Ha=ha.makeIterator,qb.yield(vb.world().execCommand("select morph",{prompt:"select morph for doitContext",
justReturn:!0,prependItems:["reset"],filterFn:function(sc){return!sc.isUsedAsEpiMorph()}}),2);W=Ha.call(ha,qb.yieldResult);if(ra=W.next().value)Za="reset"===ra,vb.doitContext=Za?null:ra,vb.setStatusMessage(Za?"doitContext is now\n"+ra:"doitContext reset");return qb.return(!0)})}},{name:"change eval backend",exec:function(vb,ha){ha=void 0===ha?{backend:void 0}:ha;var Ha,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return Ha=ha,W=Ha.backend,void 0!==W?ra.jumpTo(2):
ra.yield(vb.world().prompt("choose eval backend",{historyId:"js-eval-backend-history"}),3);if(2!=ra.nextAddress&&(W=ra.yieldResult,!W))return vb.setStatusMessage("Canceled"),ra.return(!0);"local"===W&&(W=null);vb.setStatusMessage("Eval backend is now "+(W||"local"));return ra.return(eb.setEvalEnv(vb,{remote:W}))})}},{name:"copy current module name to clipboard",exec:function(vb){var ha=vb.evalEnvironment.targetModule;vb.setStatusMessage(ha||"Cannot find module name");vb.env.eventDispatcher.killRing.add(vb);
vb.env.eventDispatcher.doCopy(ha);return!0}}];eb.jsEditorCommands=Qa;eb.jsEditorCommands=Qa;eb.jsEditorCommands=Qa;var Rb=[{name:"[javascript] list errors and warnings",exec:function(vb){var ha,Ha,W,ra,Za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress){ha=(vb.markers||[]).filter(function(sc){sc=sc.type;return"js-undeclared-var"===sc||"js-syntax-error"===sc});if(!ha.length)return eb.show("no warnings or errors"),qb.return(!0);Ha=ha.map(function(sc){var wd=sc.range;
return{isListItem:!0,string:"["+sc.type.split("-").slice(1).join(" ")+"] "+vb.textInRange(wd),value:wd}});return qb.yield(vb.world().filterableListPrompt("jump to warning or error",Ha),2)}W=qb.yieldResult;ra=$jscomp.makeIterator(W.selected);if(Za=ra.next().value)vb.saveMark(),vb.selection=Za,vb.centerRow(Za.start.row);return qb.return(!0)})}},{name:"[javascript] inject import",exec:function(vb,ha){ha=void 0===ha?{gotoImport:!1,insertImportAtCursor:!0}:ha;var Ha,W,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){switch(Za.nextAddress){case 1:return Za.yield(eb.promise.delay(0),
2);case 2:return Za.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Ha=Za.yieldResult,W=Ha.interactivelyInjectImportIntoText,Za.yield(W(vb,ha),4);case 4:return(ra=Za.yieldResult)||vb.setStatusMessage("canceled"),Za.return(ra)}})}},{name:"[javascript] fix undeclared variables",exec:function(vb,ha){ha=void 0===ha?{ignore:[],autoApplyIfSingleChoice:!1,requester:vb}:ha;var Ha,W,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==Za.nextAddress)return Za.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Za.nextAddress)return Ha=Za.yieldResult,W=Ha.interactivlyFixUndeclaredVariables,Za.yield(W(vb,ha),3);ra=Za.yieldResult;vb.focus();return Za.return(ra)})}},{name:"[javascript] remove unused imports",exec:function(vb,ha){ha=void 0===ha?{query:!0}:ha;var Ha,W,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==Za.nextAddress)return Za.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Za.nextAddress)return Ha=Za.yieldResult,W=Ha.cleanupUnusedImports,Za.yield(W(vb,
ha),3);ra=Za.yieldResult;vb.setStatusMessage(ra);return Za.return(!0)})}},{name:"[javascript] eslint report",exec:function(vb){var ha,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==W.nextAddress)return W.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);ha=W.yieldResult;Ha=ha.default;try{return W.return(Ha.reportOnMorph(vb))}catch(ra){vb.showError(ra)}W.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(vb){var ha,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==
W.nextAddress)return W.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);ha=W.yieldResult;Ha=ha.default;try{return W.return(Ha.previewFixesOnMorph(vb))}catch(ra){vb.showError(ra)}W.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(vb,ha,Ha){function W(ub,cd){cd||(cd=nc(ub,{allowReturnOutsideFunction:!0}));var Vc=eb.string.lineRanges(ub),ib=ub.split("\n"),Ra=[],pb=new eb.BaseVisitor,bb=pb.visitVariableDeclaration;pb.visitVariableDeclaration=function(xb,
P,wa){if(1<xb.declarations.length)for(var Xa=eb.string.findLineWithIndexInLineRanges(Vc,xb.start),Db=xb.declarations[0].start-Vc[Xa][0],mc={},Sb=1;Sb<xb.declarations.length;mc={$jscomp$loop$prop$actionType$2584:mc.$jscomp$loop$prop$actionType$2584,$jscomp$loop$prop$arg$2585:mc.$jscomp$loop$prop$arg$2585},Sb++){var Tc=xb.declarations[Sb],gd=eb.string.findLineWithIndexInLineRanges(Vc,Tc.start);if(Xa!==gd){var se=ib[gd].match(/\s*/)[0].length;se=Db-se;0!==se&&(Tc=eb.string.findLineWithIndexInLineRanges(Vc,
Tc.end),mc.$jscomp$loop$prop$actionType$2584=0<se?"insert":"delete",mc.$jscomp$loop$prop$arg$2585=0<se?" ".repeat(se):-se,Ra.push.apply(Ra,$jscomp.arrayFromIterable(eb.arr.range(gd,Tc).map(function(Cf){return function(me){return[Cf.$jscomp$loop$prop$actionType$2584,Vc[me][0],Cf.$jscomp$loop$prop$arg$2585]}}(mc)))))}}return bb.call(pb,xb,P,wa)};pb.accept(cd,{},[]);for(cd=Ra.length;cd--;){var Oc=$jscomp.makeIterator(Ra[cd]),ma=Oc.next().value,Aa=Oc.next().value;Oc=Oc.next().value;"insert"===ma?ub=ub.slice(0,
Aa)+Oc+ub.slice(Aa):"delete"===ma&&(ub=ub.slice(0,Aa)+ub.slice(Aa+Oc))}return ub}var ra,Za,qb,sc,wd,nc,Ob,Zd,Id,kb,Eb,ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){switch(ub.nextAddress){case 1:return ra=Ha||Math.floor(vb.width/vb.defaultCharExtent().width),ha=Object.assign({printWidth:ra,tabWidth:2,useTabs:!1,bracketSpacing:!1},ha),Za=lively.modules.module,qb=System.normalizeSync("prettier/standalone.js"),ub.yield(Za(qb).load({format:"global",instrument:!1}),2);case 2:return sc=
ub.yieldResult,ub.yield(Za("lively.ast/lib/acorn-extension.js").load(),3);case 3:return ub.yield(Za("lively.ast").load(),4);case 4:return wd=ub.yieldResult,nc=wd.parse,ub.yield(Za("lively.ast/lib/query.js").load(),5);case 5:return ub.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return Ob=ub.yieldResult,Zd=vb.selection.isEmpty()?vb.documentRange:vb.selection.range,Id=vb.positionToIndex(Zd.start),kb=vb.positionToIndex(Zd.end),Eb=sc.format(vb.textString,Object.assign({},
ha,{rangeStart:Id,rangeEnd:kb,parser:function(cd,Vc,ib){return nc(cd,{allowReturnOutsideFunction:!0})}})),vb.undoManager.group(),ad=Ob.diffChars(vb.textString,Eb),vb.applyJsDiffPatch(ad),vb.selection.text=W(vb.selection.text),vb.undoManager.group(),ub.return(!0)}})}}];eb.jsIdeCommands=Rb;eb.jsIdeCommands=Rb;eb.jsIdeCommands=Rb;var zc=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(vb,ha){ha=vb.pluginInvokeFirst("getNavigator");if(!ha)return!0;ha=ha.resolveIdentifierAt(vb,vb.cursorPosition);
if(!ha||!ha.id)return eb.show("No symbol identifier selected"),!0;if(!ha.decl)return eb.show("Cannot find declaration of "+ha.name),!0;vb.saveMark();vb.selection={start:vb.indexToPosition(ha.decl.start),end:vb.indexToPosition(ha.decl.end)};vb.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(vb){vb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(vb){vb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(vb,ha){ha=void 0===ha?{direction:null}:ha;var Ha=vb.pluginInvokeFirst("getNavigator");if(!Ha)return!0;Ha=Ha.resolveIdentifierAt(vb,
vb.cursorPosition);if(!Ha||!Ha.refs)return eb.show("No symbol identifier selected"),!0;var W=vb.selection;Ha=Ha.refs.map(function(Za){var qb=Za.end;return eb.Range.fromPositions(eb.iToP(vb,Za.start),eb.iToP(vb,qb))}).concat(Ha.decl?eb.Range.fromPositions(eb.iToP(vb,Ha.decl.start),eb.iToP(vb,Ha.decl.end)):[]).sort(eb.Range.compare);if(!Ha.length)return!0;var ra=Ha.map(String).indexOf(String(W.range));if("next"===ha.direction||"prev"===ha.direction)-1===ra&&Ha.length?Ha=[Ha[0]]:(ha=ra+("next"===ha.direction?
1:-1),0>ha?ha=Ha.length-1:ha>=Ha.length&&(ha=0),Ha=[Ha[ha]]);Ha.forEach(function(Za){var qb=W.selections.findIndex(function(wd){return wd.range.equals(Za)}),sc=W.selections.length-1;-1<qb?eb.arr.swap(W.selections,qb,sc):W.addRange(Za,!1)});W.mergeSelections();return!0}}];eb.astEditorCommands=zc;eb.astEditorCommands=zc;eb.astEditorCommands=zc;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var sb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
sb.expressionAllowed=function(vb,ha,Ha){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(ha.lastType)||"quasi"==ha.lastType&&/\{\s*$/.test(vb.string.slice(0,vb.pos-(Ha||0)))};sb.passIndent=Hc;sb.defineMode=Nd;sb.defineMIME=ec;sb.registerHelper=$d;sb.defaultConfig={indentUnit:2};sb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};sb.defineMode("javascript",
function(vb,ha){function Ha(Qb,id,yc){zl=Qb;Hi=yc;return id}function W(Qb,id){var yc=Qb.next();if('"'==yc||"'"==yc)return id.tokenize=ra(yc),id.tokenize(Qb,id);if("."==yc&&Qb.match(/^\d+(?:[eE][+\-]?\d+)?/))return Ha("number","number");if("."==yc&&Qb.match(".."))return Ha("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(yc))return Ha(yc);if("="==yc&&Qb.eat(">"))return Ha("=>","operator");if("0"==yc&&Qb.eat(/x/i))return Qb.eatWhile(/[\da-f]/i),Ha("number","number");if("0"==yc&&Qb.eat(/o/i))return Qb.eatWhile(/[0-7]/i),
Ha("number","number");if("0"==yc&&Qb.eat(/b/i))return Qb.eatWhile(/[01]/i),Ha("number","number");if(/\d/.test(yc))return Qb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Ha("number","number");if("/"==yc){if(Qb.eat("*"))return id.tokenize=Za,Za(Qb,id);if(Qb.eat("/"))return Qb.skipToEnd(),Ha("comment","comment");if(sb.expressionAllowed(Qb,id,1)){a:for(var he=id=!1;null!=(yc=Qb.next());){if(!id){if("/"==yc&&!he)break a;"["==yc?he=!0:he&&"]"==yc&&(he=!1)}id=!id&&"\\"==yc}Qb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Ha("regexp","string-2")}Qb.eatWhile(Km);return Ha("operator","operator",Qb.current())}if("`"==yc)return id.tokenize=qb,qb(Qb,id);if("#"==yc)return Qb.skipToEnd(),Ha("error","error");if(Km.test(yc))return">"==yc&&id.lexical&&">"==id.lexical.type||Qb.eatWhile(Km),Ha("operator","operator",Qb.current());if(wl.test(yc))return Qb.eatWhile(wl),Qb=Qb.current(),(yc=$l.propertyIsEnumerable(Qb)&&$l[Qb])&&"."!=id.lastType?Ha(yc.type,yc.style,Qb):Ha("variable","variable",Qb)}function ra(Qb){return function(id,
yc){var he=!1,qg;if(Ri&&"@"==id.peek()&&id.match(Kl))return yc.tokenize=W,Ha("jsonld-keyword","meta");for(;null!=(qg=id.next())&&(qg!=Qb||he);)he=!he&&"\\"==qg;he||(yc.tokenize=W);return Ha("string","string")}}function Za(Qb,id){for(var yc=!1,he;he=Qb.next();){if("/"==he&&yc){id.tokenize=W;break}yc="*"==he}return Ha("comment","comment")}function qb(Qb,id){for(var yc=!1,he;null!=(he=Qb.next());){if(!yc&&("`"==he||"$"==he&&Qb.eat("{"))){id.tokenize=W;break}yc=!yc&&"\\"==he}return Ha("quasi","string-2",
Qb.current())}function sc(Qb,id){id.fatArrowAt&&(id.fatArrowAt=null);var yc=Qb.string.indexOf("=>",Qb.start);if(!(0>yc)){if(cl){var he=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Qb.string.slice(Qb.start,yc));he&&(yc=he.index)}he=0;var qg=!1;for(--yc;0<=yc;--yc){var Gg=Qb.string.charAt(yc),Uj="([{}])".indexOf(Gg);if(0<=Uj&&3>Uj){if(!he){++yc;break}if(0==--he){"("==Gg&&(qg=!0);break}}else if(3<=Uj&&6>Uj)++he;else if(wl.test(Gg))qg=!0;else{if(/["'\/]/.test(Gg))return;if(qg&&!he){++yc;break}}}qg&&
!he&&(id.fatArrowAt=yc)}}function wd(Qb,id,yc,he,qg,Gg){this.indented=Qb;this.column=id;this.type=yc;this.prev=qg;this.info=Gg;null!=he&&(this.align=he)}function nc(){for(var Qb=arguments.length-1;0<=Qb;Qb--)Bf.cc.push(arguments[Qb])}function Ob(){nc.apply(null,arguments);return!0}function Zd(Qb){function id(he){for(;he;he=he.next)if(he.name==Qb)return!0;return!1}var yc=Bf.state;Bf.marked="def";yc.context?id(yc.localVars)||(yc.localVars={name:Qb,next:yc.localVars}):!id(yc.globalVars)&&ha.globalVars&&
(yc.globalVars={name:Qb,next:yc.globalVars})}function Id(){Bf.state.context={prev:Bf.state.context,vars:Bf.state.localVars};Bf.state.localVars=wo}function kb(){Bf.state.localVars=Bf.state.context.vars;Bf.state.context=Bf.state.context.prev}function Eb(Qb,id){var yc=function(){var he=Bf.state,qg=he.indented;if("stat"==he.lexical.type)qg=he.lexical.indented;else for(var Gg=he.lexical;Gg&&")"==Gg.type&&Gg.align;Gg=Gg.prev)qg=Gg.indented;he.lexical=new wd(qg,Bf.stream.column(),Qb,null,he.lexical,id)};
yc.lex=!0;return yc}function ad(){var Qb=Bf.state;Qb.lexical.prev&&(")"==Qb.lexical.type&&(Qb.indented=Qb.lexical.indented),Qb.lexical=Qb.lexical.prev)}function ub(Qb){function id(yc){return yc==Qb?Ob():";"==Qb?nc():Ob(id)}return id}function cd(Qb,id){return"var"==Qb?Ob(Eb("vardef",id.length),pc,ub(";"),ad):"keyword a"==Qb?Ob(Eb("form"),Ra,cd,ad):"keyword b"==Qb?Ob(Eb("form"),cd,ad):"{"==Qb?Ob(Eb("}"),yf,ad):";"==Qb?Ob():"if"==Qb?("else"==Bf.state.lexical.info&&Bf.state.cc[Bf.state.cc.length-1]==
ad&&Bf.state.cc.pop()(),Ob(Eb("form"),Ra,cd,ad,Na)):"function"==Qb?Ob(yb):"for"==Qb?Ob(Eb("form"),fb,cd,ad):"variable"==Qb?cl&&"type"==id?(Bf.marked="keyword",Ob(Ve,ub("operator"),Ve,ub(";"))):Ob(Eb("stat"),Tc):"switch"==Qb?Ob(Eb("form"),Ra,ub("{"),Eb("}","switch"),yf,ad,ad):"case"==Qb?Ob(Vc,ub(":")):"default"==Qb?Ob(ub(":")):"catch"==Qb?Ob(Eb("form"),Id,ub("("),Bc,ub(")"),cd,ad,kb):"class"==Qb?Ob(Eb("form"),jd,ad):"export"==Qb?Ob(Eb("stat"),kg,ad):"import"==Qb?Ob(Eb("stat"),Fh,ad):"module"==Qb?Ob(Eb("form"),
qh,ub("{"),Eb("}"),yf,ad,ad):"async"==Qb?Ob(cd):"@"==id?Ob(Vc,cd):nc(Eb("stat"),Vc,ub(";"),ad)}function Vc(Qb){return pb(Qb,!1)}function ib(Qb){return pb(Qb,!0)}function Ra(Qb){return"("!=Qb?nc():Ob(Eb(")"),Vc,ub(")"),ad)}function pb(Qb,id){if(Bf.state.fatArrowAt==Bf.stream.start){var yc=id?Xa:wa;if("("==Qb)return Ob(Id,Eb(")"),Se(qh,")"),ad,ub("=>"),yc,kb);if("variable"==Qb)return nc(Id,qh,ub("=>"),yc,kb)}yc=id?Aa:ma;return vo.hasOwnProperty(Qb)?Ob(yc):"function"==Qb?Ob(yb,yc):"class"==Qb?Ob(Eb("form"),
xc,ad):"keyword c"==Qb||"async"==Qb?Ob(id?Oc:bb):"("==Qb?Ob(Eb(")"),bb,ub(")"),ad,yc):"operator"==Qb||"spread"==Qb?Ob(id?ib:Vc):"["==Qb?Ob(Eb("]"),Al,ad,yc):"{"==Qb?Ze(se,"}",null,yc):"quasi"==Qb?nc(xb,yc):"new"==Qb?Ob(Db(id)):Ob()}function bb(Qb){return Qb.match(/[;\}\)\],]/)?nc():nc(Vc)}function Oc(Qb){return Qb.match(/[;\}\)\],]/)?nc():nc(ib)}function ma(Qb,id){return","==Qb?Ob(Vc):Aa(Qb,id,!1)}function Aa(Qb,id,yc){var he=0==yc?ma:Aa,qg=0==yc?Vc:ib;if("=>"==Qb)return Ob(Id,yc?Xa:wa,kb);if("operator"==
Qb)return/\+\+|--/.test(id)?Ob(he):"?"==id?Ob(Vc,ub(":"),qg):Ob(qg);if("quasi"==Qb)return nc(xb,he);if(";"!=Qb){if("("==Qb)return Ze(ib,")","call",he);if("."==Qb)return Ob(gd,he);if("["==Qb)return Ob(Eb("]"),bb,ub("]"),ad,he)}}function xb(Qb,id){return"quasi"!=Qb?nc():"${"!=id.slice(id.length-2)?Ob(xb):Ob(Vc,P)}function P(Qb){if("}"==Qb)return Bf.marked="string-2",Bf.state.tokenize=qb,Ob(xb)}function wa(Qb){sc(Bf.stream,Bf.state);return nc("{"==Qb?cd:Vc)}function Xa(Qb){sc(Bf.stream,Bf.state);return nc("{"==
Qb?cd:ib)}function Db(Qb){return function(id){return"."==id?Ob(Qb?Sb:mc):nc(Qb?ib:Vc)}}function mc(Qb,id){if("target"==id)return Bf.marked="keyword",Ob(ma)}function Sb(Qb,id){if("target"==id)return Bf.marked="keyword",Ob(Aa)}function Tc(Qb){return":"==Qb?Ob(ad,cd):nc(ma,ub(";"),ad)}function gd(Qb){if("variable"==Qb)return Bf.marked="property",Ob()}function se(Qb,id){if("async"==Qb)return Bf.marked="property",Ob(se);if("variable"==Qb||"keyword"==Bf.style)return Bf.marked="property","get"==id||"set"==
id?Ob(Cf):Ob(me);if("number"==Qb||"string"==Qb)return Bf.marked=Ri?"property":Bf.style+" property",Ob(me);if("jsonld-keyword"==Qb)return Ob(me);if("modifier"==Qb)return Ob(se);if("["==Qb)return Ob(Vc,ub("]"),me);if("spread"==Qb)return Ob(Vc);if(":"==Qb)return nc(me)}function Cf(Qb){if("variable"!=Qb)return nc(me);Bf.marked="property";return Ob(yb)}function me(Qb){if(":"==Qb)return Ob(ib);if("("==Qb)return nc(yb)}function Se(Qb,id,yc){function he(qg,Gg){return(yc?-1<yc.indexOf(qg):","==qg)?(qg=Bf.state.lexical,
"call"==qg.info&&(qg.pos=(qg.pos||0)+1),Ob(function(Uj,Xn){return Uj==id||Xn==id?nc():nc(Qb)},he)):qg==id||Gg==id?Ob():Ob(ub(id))}return function(qg,Gg){return qg==id||Gg==id?Ob():nc(Qb,he)}}function Ze(Qb,id,yc){for(var he=3;he<arguments.length;he++)Bf.cc.push(arguments[he]);return Ob(Eb(id,yc),Se(Qb,id),ad)}function yf(Qb){return"}"==Qb?Ob():nc(cd,yf)}function vd(Qb,id){if(cl){if(":"==Qb)return Ob(Ve);if("?"==id)return Ob(vd)}}function Ve(Qb){if("variable"==Qb)return Bf.marked="variable-3",Ob(Vg);
if("string"==Qb||"number"==Qb||"atom"==Qb)return Ob(Vg);if("{"==Qb)return Ob(Eb("}"),Se(cg,"}",",;"),ad);if("("==Qb)return Ob(Se(eg,")"),Ye)}function Ye(Qb){if("=>"==Qb)return Ob(Ve)}function cg(Qb,id){if("variable"==Qb||"keyword"==Bf.style)return Bf.marked="property",Ob(cg);if("?"==id)return Ob(cg);if(":"==Qb)return Ob(Ve)}function eg(Qb){if("variable"==Qb)return Ob(eg);if(":"==Qb)return Ob(Ve)}function Vg(Qb,id){if("<"==id)return Ob(Eb(">"),Se(Ve,">"),ad,Vg);if("|"==id||"."==Qb)return Ob(Ve);if("["==
Qb)return Ob(ub("]"),Vg);if("extends"==id)return Ob(Ve)}function pc(){return nc(qh,vd,nh,Jf)}function qh(Qb,id){if("modifier"==Qb)return Ob(qh);if("variable"==Qb)return Zd(id),Ob();if("spread"==Qb)return Ob(qh);if("["==Qb)return Ze(qh,"]");if("{"==Qb)return Ze(rh,"}")}function rh(Qb,id){if("variable"==Qb&&!Bf.stream.match(/^\s*:/,!1))return Zd(id),Ob(nh);"variable"==Qb&&(Bf.marked="property");return"spread"==Qb?Ob(qh):"}"==Qb?nc():Ob(ub(":"),qh,nh)}function nh(Qb,id){if("="==id)return Ob(ib)}function Jf(Qb){if(","==
Qb)return Ob(pc)}function Na(Qb,id){if("keyword b"==Qb&&"else"==id)return Ob(Eb("form","else"),cd,ad)}function fb(Qb){if("("==Qb)return Ob(Eb(")"),Jb,ub(")"),ad)}function Jb(Qb){return"var"==Qb?Ob(pc,ub(";"),Ia):";"==Qb?Ob(Ia):"variable"==Qb?Ob(da):nc(Vc,ub(";"),Ia)}function da(Qb,id){return"in"==id||"of"==id?(Bf.marked="keyword",Ob(Vc)):Ob(ma,Ia)}function Ia(Qb,id){return";"==Qb?Ob(nb):"in"==id||"of"==id?(Bf.marked="keyword",Ob(Vc)):nc(Vc,ub(";"),nb)}function nb(Qb){")"!=Qb&&Ob(Vc)}function yb(Qb,
id){if("*"==id)return Bf.marked="keyword",Ob(yb);if("variable"==Qb)return Zd(id),Ob(yb);if("("==Qb)return Ob(Id,Eb(")"),Se(Bc,")"),ad,vd,cd,kb);if(cl&&"<"==id)return Ob(Eb(">"),Se(Ve,">"),ad,yb)}function Bc(Qb){return"spread"==Qb?Ob(Bc):nc(qh,vd,nh)}function xc(Qb,id){return"variable"==Qb?jd(Qb,id):ud(Qb,id)}function jd(Qb,id){if("variable"==Qb)return Zd(id),Ob(ud)}function ud(Qb,id){if("<"==id)return Ob(Eb(">"),Se(Ve,">"),ad,ud);if("extends"==id||"implements"==id||cl&&","==Qb)return Ob(cl?Ve:Vc,
ud);if("{"==Qb)return Ob(Eb("}"),nd,ad)}function nd(Qb,id){if("variable"==Qb||"keyword"==Bf.style){if(("async"==id||"static"==id||"get"==id||"set"==id||cl&&("public"==id||"private"==id||"protected"==id||"readonly"==id||"abstract"==id))&&Bf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Bf.marked="keyword",Ob(nd);Bf.marked="property";return Ob(cl?pf:yb,nd)}if("["==Qb)return Ob(Vc,ub("]"),cl?pf:yb,nd);if("*"==id)return Bf.marked="keyword",Ob(nd);if(";"==Qb)return Ob(nd);if("}"==Qb)return Ob();if("@"==
id)return Ob(Vc,nd)}function pf(Qb,id){return"?"==id?Ob(pf):":"==Qb?Ob(Ve,nh):"="==id?Ob(ib):nc(yb)}function kg(Qb,id){return"*"==id?(Bf.marked="keyword",Ob(bi,ub(";"))):"default"==id?(Bf.marked="keyword",Ob(Vc,ub(";"))):"{"==Qb?Ob(Se(Wf,"}"),bi,ub(";")):nc(cd)}function Wf(Qb,id){if("as"==id)return Bf.marked="keyword",Ob(ub("variable"));if("variable"==Qb)return nc(ib,Wf)}function Fh(Qb){return"string"==Qb?Ob():nc(Df,wh,bi)}function Df(Qb,id){if("{"==Qb)return Ze(Df,"}");"variable"==Qb&&Zd(id);"*"==
id&&(Bf.marked="keyword");return Ob(ck)}function wh(Qb){if(","==Qb)return Ob(Df,wh)}function ck(Qb,id){if("as"==id)return Bf.marked="keyword",Ob(Df)}function bi(Qb,id){if("from"==id)return Bf.marked="keyword",Ob(Vc)}function Al(Qb){return"]"==Qb?Ob():nc(Se(ib,"]"))}vb=Object.assign({},sb.defaultConfig,{},vb);ha=Object.assign({},sb.defaultParserConfig,{},ha);var yg=vb.indentUnit,Vj=ha.statementIndent,Ri=ha.jsonld,Jk=ha.json||Ri,cl=ha.typescript,wl=ha.wordCharacters||/[\w$\xa1-\uffff]/,$l=function(){function Qb(Xn){return{type:Xn,
style:"keyword"}}var id=Qb("keyword a"),yc=Qb("keyword b"),he=Qb("keyword c"),qg=Qb("operator"),Gg={type:"atom",style:"atom"};id={if:Qb("if"),while:id,with:id,else:yc,do:yc,try:yc,finally:yc,return:he,break:he,continue:he,new:Qb("new"),delete:he,throw:he,debugger:he,var:Qb("var"),const:Qb("var"),let:Qb("var"),function:Qb("function"),catch:Qb("catch"),for:Qb("for"),switch:Qb("switch"),case:Qb("case"),default:Qb("default"),in:qg,typeof:qg,instanceof:qg,true:Gg,false:Gg,null:Gg,undefined:Gg,NaN:Gg,Infinity:Gg,
this:Qb("this"),class:Qb("class"),super:Qb("atom"),yield:he,export:Qb("export"),import:Qb("import"),extends:he,await:he,async:Qb("async")};if(cl){yc={type:"variable",style:"variable-3"};he={interface:Qb("class"),implements:he,namespace:he,module:Qb("module"),enum:Qb("module"),public:Qb("modifier"),private:Qb("modifier"),protected:Qb("modifier"),abstract:Qb("modifier"),as:qg,string:yc,number:yc,boolean:yc,any:yc};for(var Uj in he)id[Uj]=he[Uj]}return id}(),Km=/[+\-*&%=<>!?|~^@]/,Kl=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
zl,Hi,vo={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Bf={state:null,column:null,marked:null,cc:null},wo={name:"this",next:{name:"arguments"}};ad.lex=!0;return{startState:function(Qb){Qb={tokenize:W,lastType:"sof",cc:[],lexical:new wd((Qb||0)-yg,0,"block",!1),localVars:ha.localVars,context:ha.localVars&&{vars:ha.localVars},indented:Qb||0};ha.globalVars&&"object"===typeof ha.globalVars&&(Qb.globalVars=ha.globalVars);return Qb},token:function(Qb,id){Qb.sol()&&(id.lexical.hasOwnProperty("align")||
(id.lexical.align=!1),id.indented=Qb.indentation(),sc(Qb,id));if(id.tokenize!=Za&&Qb.eatSpace())return null;var yc=id.tokenize(Qb,id);if("comment"==zl)return yc;id.lastType="operator"!=zl||"++"!=Hi&&"--"!=Hi?zl:"incdec";a:{var he=zl,qg=Hi,Gg=id.cc;Bf.state=id;Bf.stream=Qb;Bf.marked=null;Bf.cc=Gg;Bf.style=yc;id.lexical.hasOwnProperty("align")||(id.lexical.align=!0);for(Qb=0;;){if(1E5<Qb++)throw Error("endless");if((Gg.length?Gg.pop():Jk?Vc:cd)(he,qg)){for(;Gg.length&&Gg[Gg.length-1].lex;)Gg.pop()();
if(Bf.marked){yc=Bf.marked;break a}if(he="variable"==he)b:{for(he=id.localVars;he;he=he.next)if(he.name==qg){he=!0;break b}for(id=id.context;id;id=id.prev)for(he=id.vars;he;he=he.next)if(he.name==qg){he=!0;break b}he=void 0}if(he){yc="variable-2";break a}break a}}}return yc},indent:function(Qb,id){if(Qb.tokenize==Za)return sb.passIndent;if(Qb.tokenize!=W)return 0;var yc=id&&id.charAt(0),he=Qb.lexical,qg;if(!/^\s*else\b/.test(id))for(var Gg=Qb.cc.length-1;0<=Gg;--Gg){var Uj=Qb.cc[Gg];if(Uj==ad)he=
he.prev;else if(Uj!=Na)break}for(;!("stat"!=he.type&&"form"!=he.type||"}"!=yc&&(!(qg=Qb.cc[Qb.cc.length-1])||qg!=ma&&qg!=Aa||/^[,\.=+\-*:?[\(]/.test(id)));)he=he.prev;Vj&&")"==he.type&&"stat"==he.prev.type&&(he=he.prev);qg=he.type;Gg=yc==qg;return(Uj=Qb._string)&&Uj.trimLeft().startsWith("?")&&":"===yc?Uj.indexOf("?"):Uj&&":"===Qb.lastType&&"}"!==he.type?Uj.match(/^\s*/)[0].length:"vardef"==qg?(id=he.indented+he.info+2+Qb.localVars.name.length,"?"===yc||":"===yc||"|"===yc||"&"===yc?id:","==Qb.lastType?
he.indented+he.info+1:"operator"==Qb.lastType?id+3:he.indented):"form"==qg&&"{"==yc?he.indented:"form"==qg?he.indented+yg:"stat"==qg?(yc=he.indented,Qb="operator"==Qb.lastType||","==Qb.lastType||Km.test(id.charAt(0))||/[,.]/.test(id.charAt(0)),yc+(Qb?Vj||yg:0)):"switch"!=he.info||Gg||0==ha.doubleIndentSwitch?he.align?he.column+(Gg?0:1):he.indented+(Gg?0:yg):he.indented+(/^(?:case|default)\b/.test(id)?yg:2*yg)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Jk?null:"/*",blockCommentEnd:Jk?
null:"*/",lineComment:Jk?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Jk?"json":"javascript",jsonldMode:Ri,jsonMode:Jk,expressionAllowed:sb.expressionAllowed,skipExpression:function(Qb){var id=Qb.cc[Qb.cc.length-1];id!=Vc&&id!=ib||Qb.cc.pop()}}});sb.registerHelper("wordChars","javascript",/[\w$]/);sb.defineMIME("text/javascript","javascript");sb.defineMIME("text/ecmascript","javascript");sb.defineMIME("application/javascript","javascript");sb.defineMIME("application/x-javascript",
"javascript");sb.defineMIME("application/ecmascript","javascript");sb.defineMIME("application/json",{name:"javascript",json:!0});sb.defineMIME("application/x-json",{name:"javascript",json:!0});sb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});sb.defineMIME("text/typescript",{name:"javascript",typescript:!0});sb.defineMIME("application/typescript",{name:"javascript",typescript:!0});var Ab=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Ab.string=$c;Ab.JavaScriptChecker=
Ld;Ab.JavaScriptNavigator=Hd;Ab.completers=Oa;Ab.jsSnippets=Ja;Ab.jsIdeCommands=Rb;Ab.jsEditorCommands=Qa;Ab.astEditorCommands=zc;Ab.CodeMirrorEnabledEditorPlugin=le;Ab.Snippet=rb;Ab.parser=ke;Ab.localInterface=Dc;Ab.systemInterfaceNamed=Ic;Ab.serverInterfaceFor=Vb;Ab.l2lInterfaceFor=Lc;Ld=function(vb){var ha=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),Ha=ha.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof ha.JavaScriptEditorPlugin?ha.JavaScriptEditorPlugin:ha.JavaScriptEditorPlugin=
function(W){W&&W[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bb(Ha,vb,[{key:Symbol.for("lively-instance-initialize"),value:function(){Bb._get(Object.getPrototypeOf(Ha.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new Ab.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},
{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(W){Bb._get(Object.getPrototypeOf(Ha.prototype),"attach",this).call(this,W);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:W})}},{key:"detach",value:function(W){this.checker.uninstall(this.textMorph);Bb._get(Object.getPrototypeOf(Ha.prototype),"detach",this).call(this,W)}},{key:"getNavigator",value:function(){return new Ab.JavaScriptNavigator}},{key:"getCompleters",value:function(W){return Ab.completers.concat(W)}},
{key:"getCommands",value:function(W){return[].concat($jscomp.arrayFromIterable(Bb._get(Object.getPrototypeOf(Ha.prototype),"getCommands",this).call(this,W)),$jscomp.arrayFromIterable(Ab.jsIdeCommands),$jscomp.arrayFromIterable(Ab.jsEditorCommands),$jscomp.arrayFromIterable(Ab.astEditorCommands))}},{key:"getKeyBindings",value:function(W){return[].concat($jscomp.arrayFromIterable(W),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},
{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},
{key:"getMenuItems",value:function(W){var ra=this,Za,qb,sc,wd,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){Za=ra.textMorph;qb=[{command:"doit",target:Za,showKeyShortcuts:!0},{command:"inspectit",target:Za,showKeyShortcuts:!0},{command:"editit",target:Za,showKeyShortcuts:!0},{command:"printit",target:Za,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:Za,showKeyShortcuts:!0},{command:"eval all",target:Za,showKeyShortcuts:!0},{command:"text completion",
alias:"code completion",target:Za,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Za,showKeyShortcuts:!0},{isDivider:!0}];ra.evalEnvironment.targetModule&&qb.push({command:"[javascript] inject import",alias:"add import",target:Za},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Za},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:Za});sc=ra.getNavigator();(wd=sc.resolveIdentifierAt(Za,
Za.cursorPosition))&&qb.push({command:"selectDefinition",alias:'jump to definition of "'+wd.name+'"',target:Za},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+wd.name+'"',target:Za});(nc=Za.selection.text.trim())&&qb.push({command:"open code search",alias:'code search for "'+Ab.string.truncate(nc,30)+'"',target:Za.world(),args:{input:nc,backend:ra.backend()}});qb.push({isDivider:!0});return Ob.return(qb.concat(W))})}},{key:"getSnippets",value:function(){return Ab.jsSnippets.map(function(W){var ra=
$jscomp.makeIterator(W);W=ra.next().value;ra=ra.next().value;return new Ab.Snippet({trigger:W,expansion:ra})})}},{key:"sanatizedJsEnv",value:function(W){W=Object.assign({},this.evalEnvironment,{},W);W.format||(W.formatd="esm");W.context||(W.context=this.textMorph);W.sourceURL||(W.sourceURL=W.targetModule+"_doit_"+Date.now());W.systemInterface||(W.systemInterface=Ab.localInterface);return W}},{key:"backend",value:function(W){W=this.sanatizedJsEnv(W);return W.remote?W.remote:"local"}},{key:"systemInterface",
value:function(W){return this.sanatizedJsEnv(W).systemInterface||Ab.localInterface}},{key:"setSystemInterface",value:function(W){return this.evalEnvironment.systemInterface=W}},{key:"setSystemInterfaceNamed",value:function(W){return this.setSystemInterface(Ab.systemInterfaceNamed(W))}},{key:"runEval",value:function(W,ra){ra=this.sanatizedJsEnv(ra);return this.systemInterface(ra).runEval(W,ra)}},{key:"parser",get:function(){return Ab.parser}},{key:"parse",value:function(W){W=void 0===W?null:W;if(this._ast&&
this._ast._astType===W)return this._ast;var ra=this.parser,Za=this.textMorph.textString;if(!ra)return null;var qb={withComments:!0,allowReturnOutsideFunction:!0};W&&(qb.type=W);if(Za.startsWith("#!")){var sc=Za.indexOf("\n");Za=" ".repeat(sc)+Za.slice(sc)}ra=ra.fuzzyParse(Za,qb);ra._astType=W;return this._ast=ra}},{key:"undeclaredVariables",value:function(W){var ra=this.parser,Za=this.evalEnvironment.knownGlobals||[];W=this.parse(void 0===W?null:W);return ra&&W?ra.query.findGlobalVarRefs(W,{jslintGlobalComment:!0}).filter(function(qb){return!Za.includes(qb.name)}):
[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],ha,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:664,end:6857})}(Ab.CodeMirrorEnabledEditorPlugin);Ld=Ab.JavaScriptEditorPlugin;Ca("default",Ld);Ab.default=Ld}}});