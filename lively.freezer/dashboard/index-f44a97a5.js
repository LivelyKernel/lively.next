System.register(["./__root_module__-aa47e4cd.js"],function(){var Ca,ub,Tb,lc,mc,Zd,id,ce,kd;return{setters:[function($c){Ca=$c.ag;ub=$c.bN;Tb=$c.at;lc=$c.a1;mc=$c.an;Zd=$c.P;id=$c._;ce=$c.ar;kd=$c.aq}],execute:function(){var $c=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");$c.Morph=Ca;$c.stringToEasing=ub;$c.easings=Tb;$c.pt=lc;$c.num=mc;$c.Path=Zd;$c.promise=id;$c.fun=ce;var Cd=function(Fd){var pe=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),Xd=pe.hasOwnProperty("ModuleProgress")&&
"function"===typeof pe.ModuleProgress?pe.ModuleProgress:pe.ModuleProgress=function(nd){nd&&nd[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kd(Xd,Fd,[{key:"relayout",value:function(){!this.isComponent&&$c.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var nd=this.getAllNamed(/stage/);this.stages=new Map(nd.map(function(eb){return[eb,"not loaded"]}));
this.updateProgressVisualization();this.getAllNamed(/label/).map(function(eb){eb._cachedTextBounds=null;eb.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var nd=this.get("progress path"),eb=$c.stringToEasing($c.easings.inOutExpo)($c.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);nd.width=$c.num.interpolate(eb,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var nd=this,eb,Hb,Cc,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ld){1==
ld.nextAddress&&(nd.reset(),eb="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Hb=$jscomp.makeIterator(eb),Cc=Hb.next());if(3!=ld.nextAddress){if(Cc.done)return ld.jumpTo(0);qc=Cc.value;nd.finishPackage({packageName:qc,loaded:!0});return ld.yield($c.promise.delay(200),3)}Cc=Hb.next();return ld.jumpTo(2)})}},{key:"finishPackage",value:function(nd){var eb=this,Hb=nd.frozen,Cc=nd.loaded;nd="stage "+nd.packageName.replace("lively.",
"");nd=this.get(nd);Hb&&this.stages.set(nd,"frozen");Cc&&this.stages.set(nd,"loaded");$c.fun.debounceNamed("update progress",200,function(){eb.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var nd=this,eb=this.getSubmorphNamed("progress path"),Hb=this.getAllNamed(/stage/),Cc=Hb[0];Hb.forEach(function(qc){var ld=qc.get("checkmark"),wd=qc.get("frozen indicator"),Xc=qc.get("icon");qc=nd.stages.get(qc);if("not loaded"!=qc){Cc=ld;if("loaded"==qc){if(ld.visible)return;
ld.animate({duration:300,visible:!0})}if("frozen"==qc){if(wd.visible)return;wd.animate({duration:300,visible:!0})}Xc.opacity=1}else ld.visible=!1,wd.visible=!1,Xc.opacity=.2});Hb=this.localizePointFrom($c.pt(-20,0),Cc).x;Hb=Math.max(20,Hb-eb.left);eb.visible=20==Hb?!1:!0;this._lastWidth=eb.width;this._timeStamp=Date.now();this._currentProgress=Hb}}],[{key:"className",get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var nd=
this;this.whenRendered().then(function(){nd.reset()})}}}}}],pe,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,end:3478})}($c.Morph);Cd=$c.ModuleProgress;$c.default=Cd}}});