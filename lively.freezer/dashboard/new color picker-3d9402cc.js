System.register(["./__root_module__-db735625.js","./index-2260babb.js","./color-picker-ca0a3012.js","./index-a5b95ed8.js","./index-fcc0ad98.js"],function(){var db,Zb,lc,Uc,Bc,Vd,Od,je,Bd,jd,zd,ge,We,kf,bf,Hd,Ae,uc;return{setters:[function(wd){db=wd.M;Zb=wd.b;lc=wd.C;Uc=wd.g;Bc=wd.i;Vd=wd.ac;Od=wd.aa;je=wd.a2;Bd=wd.r;jd=wd.d;zd=wd.bH;ge=wd.n;We=wd.p;kf=wd.ab;bf=wd.X;Hd=wd.bm;Ae=wd.bn;uc=wd.bl},function(){},function(){},function(){},function(){}],execute:function(){var wd=lively.FreezerRuntime.recorderFor("ColorPicker/index.js");
wd.Morph=db;wd.arr=Zb;wd.Color=lc;wd.signal=Uc;var ce=function(he){var cd=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),ie=cd.hasOwnProperty("ColorPicker")&&"function"===typeof cd.ColorPicker?cd.ColorPicker:cd.ColorPicker=function(ac){ac&&ac[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bc(ie,he,[{key:"toggleHalos",value:function(ac){this.withAllSubmorphsDo(function(Db){return Db.halosEnabled=ac});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(Db){return Db.halosEnabled=
ac})}},{key:"focusOnMorph",value:function(ac,Db){var Tc=ac&&ac.world();Tc&&(Tc.halos().forEach(function(Nc){return Nc.remove()}),Tc.withTopBarDo(function(Nc){return Nc.setEditMode("Hand",!0)}));this._target=ac;Db.isGradient?(this.ui.gradientControl.setGradient(Db,this),this.ui.colorTypeSelector.selection=Db.type):(this.color=Db,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",value:function(){this.remove();var ac=this._target&&this._target.world();ac&&ac.withTopBarDo(function(Db){return Db.setEditMode("Halo",
!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":wd.signal(this,"value",this.gradientValue);break;case "Solid":wd.signal(this,"value",this.color)}}},{key:"switchMode",value:function(ac){var Db=["linearGradient","radialGradient"].includes(ac);this.ui.gradientControl.toggle(Db,this);this.colorMode=ac;this.update();this.confirm()}},{key:"enterColor",value:function(ac){this.color=ac;this.update(this.ui.colorEncoder);
this.confirm()}},{key:"adjustColor",value:function(ac){this.color=ac;this.update();this.confirm()}},{key:"adjustOpacity",value:function(ac){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[ac]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(ac){this.hsb=[ac].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(ac){var Db=$jscomp.makeIterator(ac);ac=Db.next().value;
Db=Db.next().value;this.hsb=[this.hsb[0],Db,ac,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(ac){this.confirm()}},{key:"update",value:function(ac){for(var Db=[],Tc=0;Tc<arguments.length;++Tc)Db[Tc-0]=arguments[Tc];var Nc=this;wd.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(Db),[this.ui.colorTypeSelector])).forEach(function(wc){return wc.update(Nc)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},
{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(wd.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(ac){this.ui.gradientControl.gradientValue=ac}},color:{derived:!0,get:function(){return wd.Color.hsb.apply(wd.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},set:function(ac){this.hsb=[].concat($jscomp.arrayFromIterable(ac.toHSB()),
[ac.a])}},solidOnly:{derived:!0,set:function(ac){var Db=this.ui.colorTypeSelector;ac&&(Db.selection="Solid");Db.visible=!ac}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],cd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(wd.Morph);ce=wd.ColorPicker;wd.default=ce;var Gd=lively.FreezerRuntime.recorderFor("GradientControl/index.js");Gd.Morph=db;Gd.LinearGradient=Vd;Gd.RadialGradient=Od;Gd.Color=lc;Gd.rect=je;Gd.resource=Bd;Gd.connect=jd;Gd.noUpdate=zd;Gd.signal=Uc;Gd.num=ge;Gd.arr=Zb;ce=function(he){var cd=
lively.FreezerRuntime.recorderFor("GradientControl/index.js"),ie=cd.hasOwnProperty("GradientControl")&&"function"===typeof cd.GradientControl?cd.GradientControl:cd.GradientControl=function(ac){ac&&ac[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bc(ie,he,[{key:"onKeyDown",value:function(ac){Bc._get(Object.getPrototypeOf(ie.prototype),"onKeyDown",this).call(this,ac);"Delete"==ac.keyCombo&&this.removeStop(this.selectedStopControl)}},
{key:"onMouseDown",value:function(ac){Bc._get(Object.getPrototypeOf(ie.prototype),"onMouseDown",this).call(this,ac);"gradient preview"==ac.targetMorph.name&&(ac=ac.positionIn(ac.targetMorph).x/ac.targetMorph.width,this.addStopAt(ac))}},{key:"removeStop",value:function(ac){3>this.gradientValue.stops.length||(Gd.arr.remove(this.gradientValue.stops,ac.stop),this.refresh(),this.confirm())}},{key:"addStopAt",value:function(ac){var Db=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),Tc=$jscomp.makeIterator(Gd.arr.sortBy(Gd.arr.sortBy(Db,
function(wc){return Math.abs(wc.offset-ac)}).slice(0,2),function(wc){return wc.offset})),Nc=Tc.next().value;Tc=Tc.next().value;Db.push({color:Nc.color.interpolate((ac-Nc.offset)/(Tc.offset-Nc.offset),Tc.color),offset:ac});this.gradientValue.stops=Gd.arr.sortBy(Db,function(wc){return wc.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(ac,Db){(this.isLayoutable=this.visible=ac)?this.gradientHalo.openInWorld():this.gradientHalo.remove();ac||this.reset()}},{key:"reset",value:function(){this.gradientValue=
null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(ac){return ac.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(ac){this.gradientValue=ac.isGradient?new Gd.LinearGradient({stops:ac.stops}):new Gd.LinearGradient({stops:[{color:ac,offset:0},{color:Gd.Color.transparent,offset:1}]})}},{key:"initRadialGradient",value:function(ac,Db){Db=Db.innerBounds();this.gradientValue=ac.isGradient?new Gd.RadialGradient({bounds:Db,stops:ac.stops}):new Gd.RadialGradient({bounds:Db,
stops:[{color:ac,offset:0},{color:Gd.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(ac,Db){this.gradientValue=ac;this.gradientHalo.initFromPicker(Db)}},{key:"update",value:function(ac){if(!this.isDisabled){var Db=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==ac.colorMode||("linearGradient"==ac.colorMode&&this.initLinearGradient(this.gradientValue||ac.color),"radialGradient"==ac.colorMode&&this.initRadialGradient(this.gradientValue||ac.color,ac._target),
this.gradientHalo.initFromPicker(ac),this.gradientHalo.confirm());if(Db){var Tc=this.gradientValue.stops.find(function(Nc){return Db.stop==Nc});Tc&&(Tc.color=ac.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(ac){var Db=this.getSubmorphNamed("gradient preview").bounds().topEdge();return Db.start.interpolate(ac.offset,Db.end).subXY(0,5)}},{key:"confirm",value:function(){Gd.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var ac=
this.getSubmorphNamed("gradient"),Db=this.gradientValue.stops.map(function(Tc){return Object.assign({},Tc)});ac.fill=new Gd.LinearGradient({vector:Gd.rect(0),stops:Db});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(ac){var Db=$jscomp.makeIterator(ac);ac=Db.next().value;Db=Db.next().value/this.getSubmorphNamed("gradient preview").width;this.adjustStop(ac,Db)}},{key:"adjustStop",value:function(ac,Db){ac.offset=Gd.num.clamp(ac.offset+
Db,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(ac){this.addMorph(ac)}},{key:"getControlFor",value:function(ac,Db){Db=void 0===Db?this:Db;var Tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){if(1==Nc.nextAddress)return Nc.yield(Gd.resource("part://SystemWidgets/gradient editor/color stop").read(),2);Tc=Nc.yieldResult;Tc.withAllSubmorphsDo(function(wc){return wc.halosEnabled=!1});Db.placeStop(Tc);Gd.connect(Tc,"select",Db,"selectStop");Gd.connect(Tc,"moveColorStop",
Db,"moveStop");return Nc.return(Tc.forStop(ac))})}},{key:"selectStop",value:function(ac){this.deselectAllStopsExcept(ac,this);this.deselectAllStopsExcept(ac,this.gradientHalo);Gd.signal(this,"switchColor",ac.stop.color)}},{key:"deselectAllStopsExcept",value:function(ac,Db){Gd.noUpdate(function(){Db.getSubmorphsByStyleClassName("ColorStop").forEach(function(Tc){Tc.stop!=ac.stop?Tc.deselect():Tc.select()})})}},{key:"updateStopControls",value:function(ac,Db){Db=void 0===Db?this:Db;var Tc=this,Nc,wc,
Vc,hb,zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ub){switch(Ub.nextAddress){case 1:if(Db._active)return Ub.return();Db._active=!0;Nc=Db.getSubmorphsByStyleClassName("ColorStop");wc=$jscomp.makeIterator(ac);Vc=wc.next();case 2:if(Vc.done){Ub.jumpTo(4);break}hb=Vc.value;if(zc=Nc.shift()){zc.forStop(hb);Ub.jumpTo(3);break}return Ub.yield(Tc.getControlFor(hb,Db),3);case 3:Vc=wc.next();Ub.jumpTo(2);break;case 4:Gd.arr.invoke(Nc,"remove"),Db.getSubmorphsByStyleClassName("ColorStop").forEach(function(Jc){Jc.positionIn(Db)}),
Db._active=!1,Ub.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,get:function(){return this.stopControls.find(function(ac){return ac.isSelected})}}}}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(Gd.Morph);ce=Gd.GradientControl;Gd.default=ce;var pe=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");pe.Morph=db;pe.arr=Zb;pe.resource=Bd;pe.connect=jd;pe.signal=Uc;pe.pt=We;pe.RadialGradient=Od;pe.LinearGradient=Vd;pe.Point=kf;ce=function(he){var cd=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),ie=cd.hasOwnProperty("GradientHalo")&&
"function"===typeof cd.GradientHalo?cd.GradientHalo:cd.GradientHalo=function(ac){ac&&ac[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bc(ie,he,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(ac){return ac.remove()})}},{key:"initFromPicker",value:function(ac){var Db=ac.gradientValue;this.picker=ac;"linearGradient"==Db.type&&this.initFromLinearGradient(this.targetMorph,Db);"radialGradient"==
Db.type&&this.initFromRadialGradient(this.targetMorph,Db);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(ac,Db){ac=ac.innerBounds();Db=Db.vectorAsAngle();var Tc=ac.center(),Nc=Math.max(ac.height,ac.width),wc=Tc.addPt(pe.Point.polar(Nc,Db));Db=Tc.subPt(pe.Point.polar(Nc,Db));Tc=$jscomp.makeIterator(ac.lineIntersection(Db.lineTo(wc)));Db=Tc.next().value;var Vc=Tc.next().value;Tc=pe.arr.min([Db,Vc],function(hb){return hb.dist(wc)});this.originPoint=Tc==Db?Vc:Db;this.directionPoint=
Tc;this.orthogonalDist=pe.arr.min(ac.edges(),function(hb){return hb.distanceFromLine(Vc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(ac,Db){ac=ac.innerBounds().relativeToAbsPoint(Db.focus);var Tc=Db.bounds;Db=Tc.height;Tc=Tc.width;this.originPoint=ac;this.directionPoint=ac.addXY(0,Db/2);this.orthogonalDist=Tc/2;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){var ac=this.ui,Db=ac.directionHandle,Tc=ac.orthogonalHandle,Nc=ac.colorStopWrapper;ac.originHandle.center=
pe.pt(0);Db.center=pe.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);Nc.width=this.width;Db.center=pe.pt(this.width,0);Tc.center=pe.pt(0,this.orthogonalDist);0<this.orthogonalDist?(Nc.tilted=1,Nc.position=pe.pt(this.width/2,this.height/4-1)):(Nc.tilted=0,Nc.position=pe.pt(this.width/2,-this.height/4+1));this.globalPosition=this.targetMorph.worldPoint(this.originPoint).subPt($world.scroll);this.rotation=this.angle}},{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"confirm",value:function(){var ac=this.picker.ui.gradientControl;"linearGradient"==ac.gradientValue.type&&(ac.gradientValue.vector=this.angle);if("radialGradient"==ac.gradientValue.type){var Db=ac.gradientValue,Tc=2*Math.abs(this.orthogonalDist),Nc=2*this.originPoint.dist(this.directionPoint);Db.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());Db.bounds=pe.pt(0,0).extent(pe.pt(Tc,Nc));Db.angle=this.angle}ac.confirm();this.refresh(ac,this.targetMorph);this.alignWithTarget()}},
{key:"normalize",value:function(ac){return this.getGlobalTransform().transformDirection(ac)}},{key:"moveOriginHandle",value:function(ac){ac=this.normalize(ac.state.dragDelta);this.originPoint=this.originPoint.addPt(ac);this.confirm()}},{key:"moveDirectionHandle",value:function(ac){ac=this.normalize(ac.state.dragDelta);this.directionPoint=this.directionPoint.addPt(ac);this.confirm()}},{key:"moveOrthogonalHandle",value:function(ac){ac=this.normalize(ac.state.dragDelta);this.orthogonalDist-=ac.dotProduct(pe.Point.polar(1,
this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(ac){var Db=$jscomp.makeIterator(ac);ac=Db.next().value;Db=Db.next().value;this.picker.ui.gradientControl.adjustStop(ac,Db/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(ac,Db){Db=ac.gradientValue;this.alignWithTarget();ac.updateStopControls(Db.stops,this)}},{key:"placeStop",value:function(ac){this.get("color stop wrapper").addMorph(ac)}},{key:"selectStop",value:function(ac){this.picker.ui.gradientControl.selectStop(ac)}},
{key:"getPositionFor",value:function(ac){var Db=this.getSubmorphNamed("color stop wrapper"),Tc=Db.innerBounds().bottomEdge();return Tc.start.interpolate(ac.offset,Tc.end).subXY(0,5).subPt(Db.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),directionHandle:this.getSubmorphNamed("direction handle"),
orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",version:"0.1.1-141"}}},{start:300,end:5921})}(pe.Morph);
ce=pe.GradientHalo;pe.default=ce;var Te=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");Te.Morph=db;Te.pt=We;Te.Color=lc;Te.LinearGradient=Vd;Te.signal=Uc;Te.num=ge;ce=function(he){var cd=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),ie=cd.hasOwnProperty("OpacityPicker")&&"function"===typeof cd.OpacityPicker?cd.OpacityPicker:cd.OpacityPicker=function(ac){ac&&ac[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Bc(ie,he,[{key:"confirm",value:function(){Te.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function(ac){var Db=this.get("slider").width;this.sliderPosition=Te.pt(0,ac.positionIn(this).y-Db/2);this.confirm()}},{key:"onDrag",value:function(ac){var Db=this.get("slider").width;this.sliderPosition=Te.pt(0,ac.positionIn(this).y-Db/2);this.confirm()}},{key:"update",value:function(ac){this.alpha=ac.color.a;this.getSubmorphNamed("opacity gradient").fill=new Te.LinearGradient({stops:[{offset:0,
color:ac.color.withA(0)},{offset:1,color:ac.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return Te.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(ac){this.alpha=Te.num.clamp(ac.y/(this.height-10),0,1);this.refresh()}}}}}],cd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(Te.Morph);ce=Te.OpacityPicker;Te.default=ce;var rc=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");rc.Morph=db;rc.Color=lc;rc.signal=Uc;rc.noUpdate=zd;rc.num=ge;ce=function(he){var cd=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),ie=cd.hasOwnProperty("ColorEncoder")&&
"function"===typeof cd.ColorEncoder?cd.ColorEncoder:cd.ColorEncoder=function(ac){ac&&ac[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bc(ie,he,[{key:"update",value:function(ac){this.currentColor=ac.hsb;this.refresh()}},{key:"refresh",value:function(){var ac=this,Db=this.currentColor;rc.noUpdate(function(){({Hex:function(){return ac.updateHex(Db)},RGB:function(){return ac.updateRGB(Db)},HSL:function(){return ac.updateHSL(Db)},
HSB:function(){return ac.updateHSB(Db)},CSS:function(){return ac.updateCSS(Db)}})[ac.encodingMode]()})}},{key:"updateHex",value:function(ac){ac=rc.Color.hsb.apply(rc.Color,$jscomp.arrayFromIterable(ac)).withA(rc.num.roundTo(ac[3],.01));var Db=this.getSubmorphNamed("hex input"),Tc=this.getSubmorphNamed("hex opacity control");Db.input=ac.toHexString().toUpperCase();Tc.number=ac.a}},{key:"updateRGB",value:function(ac){var Db=this.getSubmorphNamed("first value"),Tc=this.getSubmorphNamed("second value"),
Nc=this.getSubmorphNamed("third value"),wc=this.getSubmorphNamed("opacity control"),Vc=$jscomp.makeIterator(rc.Color.hsb.apply(rc.Color,$jscomp.arrayFromIterable(ac)).toTuple()),hb=Vc.next().value,zc=Vc.next().value;Vc=Vc.next().value;ac=ac[3];Db.number=255*hb;Tc.number=255*zc;Nc.number=255*Vc;wc.number=ac}},{key:"updateHSL",value:function(ac,Db){Db=void 0===Db?!0:Db;var Tc=this.getSubmorphNamed("first value"),Nc=this.getSubmorphNamed("second value"),wc=this.getSubmorphNamed("third value"),Vc=this.getSubmorphNamed("opacity control"),
hb=$jscomp.makeIterator(ac),zc=hb.next().value,Ub=hb.next().value;hb=hb.next().value;wc.number=Db?1-hb:hb;Tc.number=zc;Nc.number=Ub;Vc.number=ac[3]}},{key:"updateHSB",value:function(ac){this.updateHSL(ac,!1)}},{key:"updateCSS",value:function(ac){var Db=this.getSubmorphNamed("css input");ac=rc.Color.hsb.apply(rc.Color,$jscomp.arrayFromIterable(ac)).withA(rc.num.roundTo(ac[3],.01));Db.input=ac.toCSSString()}},{key:"confirm",value:function(){var ac=this;({Hex:function(){return ac.confirmHex()},RGB:function(){return ac.confirmRGB()},
HSL:function(){return ac.confirmHSL()},HSB:function(){return ac.confirmHSB()},CSS:function(){return ac.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var ac=this.getSubmorphNamed("hex input"),Db=this.getSubmorphNamed("hex opacity control");ac=rc.Color.rgbHex(ac.input).withA(Db.number);this.currentColor=[].concat($jscomp.arrayFromIterable(ac.toHSB()),[ac.a]);rc.signal(this,"colorEntered",ac)}},{key:"confirmRGB",value:function(){var ac=this.getSubmorphNamed("first value"),
Db=this.getSubmorphNamed("second value"),Tc=this.getSubmorphNamed("third value"),Nc=this.getSubmorphNamed("opacity control");ac=rc.Color.rgba(ac.number,Db.number,Tc.number,Nc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(ac.toHSB()),[ac.a]);rc.signal(this,"colorEntered",ac)}},{key:"confirmHSL",value:function(){var ac=this.getSubmorphNamed("first value"),Db=this.getSubmorphNamed("second value"),Tc=this.getSubmorphNamed("third value"),Nc=this.getSubmorphNamed("opacity control");ac=rc.Color.hsb(ac.number,
Db.number,1-Tc.number).withA(Nc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(ac.toHSB()),[ac.a]);rc.signal(this,"colorEntered",ac)}},{key:"confirmHSB",value:function(){var ac=this.getSubmorphNamed("first value"),Db=this.getSubmorphNamed("second value"),Tc=this.getSubmorphNamed("third value"),Nc=this.getSubmorphNamed("opacity control");ac=rc.Color.hsb(ac.number,Db.number,Tc.number).withA(Nc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(ac.toHSB()),[ac.a]);rc.signal(this,
"colorEntered",ac)}},{key:"confirmCSS",value:function(){var ac=this.getSubmorphNamed("css input");ac=rc.Color.fromString(ac.input);this.currentColor=[].concat($jscomp.arrayFromIterable(ac.toHSB()),[ac.a]);rc.signal(this,"colorEntered",ac)}},{key:"selectEncoding",value:function(ac){this.encodingMode=ac;this.submorphs.map(function(Tc){return Tc.visible=Tc.isLayoutable=!1});var Db=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[ac]);
Db.visible=Db.isLayoutable=!0;"RGB"==ac&&[Db.getSubmorphNamed("first value"),Db.getSubmorphNamed("second value"),Db.getSubmorphNamed("third value")].forEach(function(Tc){Object.assign(Tc,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(ac)&&(Object.assign(Db.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[Db.getSubmorphNamed("second value"),Db.getSubmorphNamed("third value")].forEach(function(Tc){Object.assign(Tc,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:rc.Color.white}}}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorEncoder",version:"0.1.1-43"}}},{start:211,end:5572})}(rc.Morph);ce=rc.ColorEncoder;rc.default=
ce;var bd=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");bd.HTMLMorph=bf;bd.arr=Zb;bd.materialDesignColors=Hd;bd.webSafeColors=Ae;bd.flatDesignColors=uc;bd.Color=lc;bd.signal=Uc;ce=function(he){var cd=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),ie=cd.hasOwnProperty("ColorPaletteView")&&"function"===typeof cd.ColorPaletteView?cd.ColorPaletteView:cd.ColorPaletteView=function(ac){ac&&ac[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Bc(ie,he,[{key:"test",value:function(){this.showPalette(bd.materialDesignColors.map(function(ac){return bd.Color.rgbHex(ac)}))}},{key:"selectPalette",value:function(ac){var Db={"Flat Design":bd.flatDesignColors,Material:bd.materialDesignColors,"Web Safe":bd.webSafeColors};Db[ac]&&this.showPalette(Db[ac].map(function(Tc){return bd.Color.rgbHex(Tc)}))}},{key:"onMouseDown",value:function(ac){Bc._get(Object.getPrototypeOf(ie.prototype),"onMouseDown",this).call(this,ac);(ac=ac.domEvt.target.dataset.color)&&
bd.signal(this,"colorSelected",bd.Color.fromString(ac))}},{key:"showPalette",value:function(ac){this.html='<div class="palette-container">\n      '+ac.map(function(Db){return'<div class="color-cell" data-color="'+Db+'" style="background: '+Db+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(bd.HTMLMorph);ce=bd.ColorPaletteView;bd.default=ce}}});