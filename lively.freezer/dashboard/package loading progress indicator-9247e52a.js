System.register(["./__root_module__-46f2ff9c.js","kld-intersections"],function(){var Ma,rb,Db,hc,Kb,id,Zc,yd,Kc;return{setters:[function(sc){Ma=sc.M;rb=sc.s;Db=sc.e;hc=sc.p;Kb=sc.n;id=sc.P;Zc=sc.a;yd=sc.f;Kc=sc.i},function(){}],execute:function(){var sc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");sc.Morph=Ma;sc.stringToEasing=rb;sc.easings=Db;sc.pt=hc;sc.num=Kb;sc.Path=id;sc.promise=Zc;sc.fun=yd;var bd=function(hd){var se=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
xe=se.hasOwnProperty("ModuleProgress")&&"function"===typeof se.ModuleProgress?se.ModuleProgress:se.ModuleProgress=function(ne){ne&&ne[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kc(xe,hd,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&sc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var ne=
this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(ne.map(function(Rc){return[Rc,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(Rc){Rc._cachedTextBounds=null;Rc.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var ne=this.get("progress path"),Rc=sc.stringToEasing(sc.easings.inOutExpo)(sc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);ne.width=sc.num.interpolate(Rc,this._lastWidth,this._currentProgress)}}},
{key:"fastLoadTest",value:function(){var ne=this,Rc,Pd,Hb,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ud){1==ud.nextAddress&&(ne.reset(),Rc="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Pd=$jscomp.makeIterator(Rc),Hb=Pd.next());if(3!=ud.nextAddress){if(Hb.done)return ud.jumpTo(0);Gc=Hb.value;ne.finishPackage({packageName:Gc,loaded:!0});return ud.yield(sc.promise.delay(200),3)}Hb=Pd.next();
return ud.jumpTo(2)})}},{key:"finishPackage",value:function(ne){var Rc=this,Pd=ne.frozen,Hb=ne.loaded;ne="stage "+ne.packageName.replace("lively.","");ne=this.get(ne);Pd&&this.stages.set(ne,"frozen");Hb&&this.stages.set(ne,"loaded");sc.fun.debounceNamed("update progress",200,function(){Rc.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var ne=this,Rc=this.getSubmorphNamed("progress path"),Pd=this.getAllNamed(/stage/),Hb=Pd[0];Pd.forEach(function(Gc){var ud=
Gc.get("checkmark"),Vc=Gc.get("frozen indicator"),Id=Gc.get("icon");Gc=ne.stages.get(Gc);if("not loaded"!=Gc){Hb=ud;if("loaded"==Gc){if(ud.visible)return;ud.animate({duration:300,visible:!0})}if("frozen"==Gc){if(Vc.visible)return;Vc.animate({duration:300,visible:!0})}Id.opacity=1}else ud.visible=!1,Vc.visible=!1,Id.opacity=.2});Pd=this.localizePointFrom(sc.pt(-20,0),Hb).x;Pd=Math.max(20,Pd-Rc.left);Rc.visible=20==Pd?!1:!0;this._lastWidth=Rc.width;this._timeStamp=Date.now();this._currentProgress=Pd}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var ne=this;this.whenRendered().then(function(){ne.reset()})}}}}}],se,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},
{start:192,end:3586})}(sc.Morph);bd=sc.ModuleProgress;sc.default=bd}}});System.register("3",["./__root_module__-46f2ff9c.js","kld-intersections","./index-06bea506.js","./index-6c27ba6c.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});