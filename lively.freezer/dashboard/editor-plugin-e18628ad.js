System.register(["./__root_module__-cd530690.js","kld-intersections","./editor-plugin-26971e16.js","./index-cab7da24.js","./index-101f1e80.js"],function(Da){var zb,Rb,kc,dc,ke,hd,$d,md,Qc,xd,Od,ge,Ud,nd,Za,Cb,bc,ic,id,fe,Zb,rc,Lb,Gc;return{setters:[function($c){zb=$c.ar;Rb=$c.bA;kc=$c.bB;dc=$c.bC;ke=$c.E;hd=$c.ap;$d=$c.aW;md=$c.s;Qc=$c.aa;xd=$c.bn;Od=$c.a5;ge=$c._;Ud=$c.bD;nd=$c.bu},function(){},function($c){Za=$c.p;Cb=$c.d;bc=$c.a;ic=$c.r;id=$c.C},function($c){fe=$c.s},function($c){Zb=$c.localInterface;
rc=$c.systemInterfaceNamed;Lb=$c.serverInterfaceFor;Gc=$c.l2lInterfaceFor}],execute:function(){var $c=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");$c.warnStyle={"border-bottom":"2px dotted orange"};$c.errorStyle={"background-color":"red"};var ed=function(sc){var Uc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),Xc=Uc.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Uc.JavaScriptChecker?Uc.JavaScriptChecker:Uc.JavaScriptChecker=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(Xc,sc,[{key:"uninstall",value:function(Q){var fa=Q.text||Q;(fa.markers||[]).forEach(function(Ha){return Ha.id.startsWith("js-checker-")&&fa.removeMarker(Ha)});fa.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(Q,fa){return[].concat($jscomp.arrayFromIterable(Q.embeddedMorphMap.values())).find(function(Ha){return fa.containsPosition(Ha.anchor.position)})}},{key:"onDocumentChange",value:function(Q,
fa,Ha){var Qa=fa.document;try{var fc=Ha.parse()}catch(Nb){fc=Nb}fc&&(Q=(fa.markers||[]).filter(function(Nb){return Nb.id.startsWith("js-checker-")}),Ha=Ha.undeclaredVariables().map(function(Nb,ab){var lc=Nb.start;Nb=Nb.end;lc=Qa.indexToPosition(lc);Nb=Qa.indexToPosition(Nb);return fa.addMarker({id:"js-checker-"+ab,style:$c.warnStyle,range:{start:lc,end:Nb},type:"js-undeclared-var"})}),Q.slice(Ha.length).forEach(function(Nb){return fa.removeMarker(Nb)}),fc.parseError?(Q=fc.parseError.loc,Ha=Q.column,
Q=Q.line-1,fc=Qa.indexToPosition(fc.parseError.pos),Ha=fc.column,Q=fc.row,fc={start:{column:Ha-1,row:Q},end:{column:Ha+1,row:Q}},this.hasEmbeddedMorphInRange(fa,fc)||fa.addMarker({id:"js-syntax-error",range:fc,style:$c.errorStyle,type:"js-syntax-error"})):fa.removeMarker("js-syntax-error"))}}],[{key:"className",get:function(){return"JavaScriptChecker"}}],Uc,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),$b=ed=$c.JavaScriptChecker;$c.default=ed;var ob=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");ob.query=Rb;ob.fuzzyParse=kc;ob.acorn=dc;ob.custom=ke;var zc=function(sc){var Uc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),Xc=Uc.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Uc.JavaScriptNavigator?Uc.JavaScriptNavigator:Uc.JavaScriptNavigator=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(Xc,sc,[{key:"ensureAST",value:function(Q){return this.parse(Q.textString)}},{key:"parse",value:function(Q){return ob.fuzzyParse(Q)}},{key:"move",value:function(Q,fa){var Ha=!!fa.activeMark||!fa.selection.isEmpty(),Qa=fa.selection,fc=fa.positionToIndex(Qa.lead);Q=this[Q](fa.textString,fc);Q=fa.indexToPosition(Q);Qa.lead=Q;Ha||(Qa.anchor=Q);fa.scrollCursorIntoView()}},{key:"forwardSexp",value:function(Q){this.move("_forwardSexp",
Q)}},{key:"backwardSexp",value:function(Q){this.move("_backwardSexp",Q)}},{key:"backwardUpSexp",value:function(Q){this.move("_backwardUpSexp",Q)}},{key:"forwardDownSexp",value:function(Q){this.move("_forwardDownSexp",Q)}},{key:"_forwardSexp",value:function(Q,fa){Q=this.parse(Q);Q=ob.custom.findNodesIncluding(Q,fa).reverse().find(function(Qa){return Qa.end!==fa});if(!Q)return fa;if("BlockStatement"===Q.type){var Ha=Q.body.find(function(Qa){return Qa.start>fa});if(Ha)return Ha.start}return Q.end}},
{key:"_backwardSexp",value:function(Q,fa){Q=this.parse(Q);Q=ob.custom.findNodesIncluding(Q,fa).reverse().find(function(Qa){return Qa.start!==fa});if(!Q)return fa;if("BlockStatement"===Q.type){var Ha=Q.body.slice().reverse().find(function(Qa){return Qa.end<fa});if(Ha)return Ha.end}return Q?Q.start:fa}},{key:"_backwardUpSexp",value:function(Q,fa){Q=this.parse(Q);return(Q=ob.custom.findNodesIncluding(Q,fa).reverse().find(function(Ha){return Ha.start!==fa}))?Q.start:fa}},{key:"_forwardDownSexp",value:function(Q,
fa){Q=this.parse(Q);return(Q=ob.custom.findNodeAfter(Q,fa,function(Ha,Qa){return Qa.start>fa}))?Q.node.start:fa}},{key:"markDefun",value:function(Q){var fa=this.rangeForFunctionOrDefinition(Q.textString,[Q.positionToIndex(Q.selection.range.start),Q.positionToIndex(Q.selection.range.end)]);fa&&Q.execCommand("expandRegion",{start:fa[0],end:fa[1]})}},{key:"rangeForNodesMatching",value:function(Q,fa,Ha){Q=this.parse(Q);return(fa=ob.custom.findNodesIncluding(Q,fa).reverse().find(Ha))?[fa.start,fa.end]:
null}},{key:"rangeForFunctionOrDefinition",value:function(Q,fa){var Ha=fa[0]===fa[1];return this.rangeForNodesMatching(Q,fa[1],function(Qa){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Qa.type)&&(Ha&&Qa.end!==fa[1]||!Ha&&Qa.start<fa[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(Q,fa){"number"!==typeof fa&&(fa=Q.positionToIndex(fa));Q=this.ensureAST(Q);var Ha=ob.query.nodesAt(fa,Q).reverse(),Qa=Ha.find(function(Nb){return"Identifier"===
Nb.type});if(!Qa&&((Ha=Ha[0])&&Ha.type.includes("Specifier")&&Ha.local&&"Identifier"===Ha.local.type&&(Qa=Ha.local),!Qa))return;fa=(Ha=ob.query.findDeclarationClosestToIndex(Q,Qa.name,fa))?ob.query.scopeAtIndex(Q,Ha.start):ob.query.scopeAtIndex(Q,fa);var fc=ob.query.findReferencesAndDeclsInScope(fa,Qa.name).refs;return{parsed:Q,scope:fa,id:Qa,name:Qa.name,decl:Ha,refs:fc}}},{key:"expandRegion",value:function(Q,fa,Ha,Qa){function fc(rd){rd=Q.positionToIndex({column:0,row:ab.row});return{range:[rd+
lc.start,rd+lc.start+lc.value.length],prev:Qa}}var Nb=Qa.range[0]!==Qa.range[1],ab=Q.indexToPosition(Qa.range[0]),lc=Q.tokenAt(ab);if(!Nb&&lc&&["keyword","identifier"].includes(lc.type))return fc();Ha=Ha||this.parse(fa);fa=ob.query.nodesAtIndex(Ha,Qa.range[0]).reverse().find(function(rd){return rd.start<Qa.range[0]||rd.end>Qa.range[1]});if(!fa)return Qa;Ha=fa.start;Nb=fa.end;return"Literal"===fa.type&&(fa.raw||"").match(/^['"`]/)&&Qa.range[0]!==fa.start&&Qa.range[1]!==fa.end&&(fa.start+1<Qa.range[0]||
fa.end-1>Qa.range[1])?{range:[Ha+1,Nb-1],prev:Qa}:{range:[Ha,Nb],prev:Qa}}},{key:"contractRegion",value:function(Q,fa,Ha,Qa){return Qa.prev||Qa}}],[{key:"className",get:function(){return"JavaScriptNavigator"}}],Uc,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);
ed=zc=ob.JavaScriptNavigator;ob.default=zc;var Mc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");Mc.addIndexToTextPos=function(sc,Uc,Xc){return sc.indexToPosition(sc.positionToIndex(Uc)+Xc)};Mc.connect=hd;Mc.disconnect=$d;Mc.string=md;Mc.KeyHandler=Qc;Mc.Range=xd;zc=function(sc){var Uc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),Xc=Uc.hasOwnProperty("Snippet")&&"function"===typeof Uc.Snippet?Uc.Snippet:Uc.Snippet=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(Xc,sc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){Q=void 0===Q?{trigger:null,expansion:""}:Q;var fa=Q.expansion;this.trigger=Q.trigger;this.expansion=fa;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(Q){this.isExpanding&&(this.textMorph=Q,Mc.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(Q){this.isExpanding&&
(Mc.disconnect(Q,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var Q=this.expansionState,fa=Q.startAnchor,Ha=Q.endAnchor;Q.isExpanding?Mc.Range.fromPositions(fa.position,Ha.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var Q=this.textMorph;if(Q){var fa=this.expansionState||{},Ha=fa.marker,Qa=fa.startAnchor,fc=fa.endAnchor;fa=fa.steps;
Qa&&Q.removeAnchor(Qa);fc&&Q.removeAnchor(fc);Ha&&Q.removeMarker(Ha);fa.forEach(function(Nb){return Q.removeAnchor(Nb.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};Q&&Q.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(Q){var fa=[],Ha=0;Mc.string.reMatches(Q,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Qa){var fc=Qa.start,Nb=Qa.end;Qa=Qa.match;var ab=
"";Qa.startsWith("${")?(ab=$jscomp.makeIterator(Qa.match(/^\$\{([0-9]+):([^\}]*)\}/)),ab.next(),Qa=ab.next().value,ab=ab.next().value,Qa=Number(Qa)):Qa=Number(Qa.replace(/^\$/,""));Q=Q.slice(0,fc-Ha)+ab+Q.slice(Nb-Ha);fa[Qa]={index:fc-Ha,prefill:ab,anchor:null};Ha+=Nb-fc-ab.length});return{steps:fa,expansion:Q}}},{key:"expandAtCursor",value:function(Q){var fa=Q.selection,Ha=Q.cursorPosition.column,Qa=this.expansion;this.trigger&&(Ha-=this.trigger.length);if(Ha=Math.max(0,Ha))Qa=Mc.string.lines(Qa),
Qa=[Qa[0]].concat($jscomp.arrayFromIterable(Qa.slice(1).map(function(Bd){return Mc.string.indent(Bd," ",Ha)}))),Qa=Qa.join("\n");var fc=this.createExpansionSteps(Qa);Qa=fc.expansion;fc=fc.steps;this.trigger&&fa.growLeft(this.trigger.length);fa.text=Qa;var Nb=fa.start;Qa=fa.end;fa.collapseToEnd();if(fc.length){var ab=Mc.string.newUUID();fc.forEach(function(Bd,ad){return Bd.anchor=Q.addAnchor(Object.assign({id:"snippet-step-"+ad+"-"+ab},Mc.addIndexToTextPos(Q,Nb,Bd.index)))});var lc=Q.addAnchor(Object.assign({id:"snippet-start-"+
ab},Nb,{insertBehavior:"stay"})),rd=Q.addAnchor(Object.assign({id:"snippet-end-"+ab},Qa));this.expansionState={marker:Q.addMarker({id:"snippet-marker-"+ab,get range(){return{start:lc.position,end:rd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:lc,endAnchor:rd,stepIndex:0,steps:fc,isExpanding:!0};Q.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var Q=
this.expansionState,fa=Q.steps,Ha=this.textMorph;if(Q.isExpanding&&Ha){Ha=Ha.selection;Q=fa[Q.stepIndex];var Qa=Q.prefill;Ha.lead=Ha.anchor=Q.anchor.position;Ha.growRight(Qa.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=fa.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(Q,fa){fa=Q.positionToIndex(Q.cursorPosition);return Q.textString.slice(fa-this.trigger.length,fa)===this.trigger}},{key:"tryTrigger",
value:function(Q,fa){if(!this.canExpand(Q,Q.cursorPosition))return!1;this.expandAtCursor(Q);return!0}},{key:"getCommands",value:function(Q){var fa=this;return Q.concat([{name:"[snippet] next expansion step",exec:function(Ha){fa.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Ha){fa.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(Q){return Q.concat(Mc.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],
[{key:"className",get:function(){return"Snippet"}}],Uc,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);Mc.Snippet=zc;Mc.Snippet=zc;Mc.Snippet=zc;var Ja=[{name:"get snippets",exec:function(sc){return sc.pluginCollect("getSnippets",[])}}];Mc.snippetCommands=Ja;Mc.snippetCommands=
Ja;Mc.snippetCommands=Ja;var Ra=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");Ra.buildEvalOpts=function(sc,Uc){return sc.plugins.find(function(Xc){return Xc.isJSEditorPlugin}).sanatizedJsEnv(Uc)};Ra.Snippet=zc;Ja=function(sc){var Uc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Xc=Uc.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Uc.ModuleTopLevelVarCompleter?Uc.ModuleTopLevelVarCompleter:Uc.ModuleTopLevelVarCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(Xc,sc,[{key:"compute",value:function(Q,fa){var Ha,Qa,fc,Nb,ab,lc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rd){if(1==rd.nextAddress){Qa=(Ha=Q.pluginFind(function(Bd){return Bd.isJSEditorPlugin}))&&Ha.systemInterface();if(!Qa)return rd.return([]);fc=Ra.buildEvalOpts(Q);Nb=fc.targetModule;return"local"===Qa.name?(ab=Object.getOwnPropertyNames(Qa.getModule(Nb).recorder),rd.jumpTo(2)):rd.yield(Qa.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Nb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=rd.nextAddress){lc=rd.yieldResult;if(lc.isError)return rd.return([]);ab=JSON.parse(lc.value)}ab=ab.filter(function(Bd){return!Bd.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(Bd)});return rd.return(ab.map(function(Bd){return{priority:1100,completion:Bd}}))})}}],[{key:"className",get:function(){return"ModuleTopLevelVarCompleter"}}],Uc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:222,
end:1678})}(void 0);Ra.ModuleTopLevelVarCompleter=Ja;Ra.ModuleTopLevelVarCompleter=Ja;Ra.ModuleTopLevelVarCompleter=Ja;Ja=function(sc){var Uc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Xc=Uc.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Uc.DynamicJavaScriptCompleter?Uc.DynamicJavaScriptCompleter:Uc.DynamicJavaScriptCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(Xc,
sc,[{key:"isValidPrefix",value:function(Q){return/\.[a-z0-9_]*$/i.test(Q)}},{key:"isMethodCallCompletion",value:function(Q){return Q.endsWith(")")&&0<Q.indexOf("(")}},{key:"isValidIdentifier",value:function(Q){if("string"!==typeof Q)return!1;this.isMethodCallCompletion(Q)&&(Q=Q.slice(0,Q.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(Q)?!0:!1}},{key:"wrapInBrackets",value:function(Q){if(!isNaN(Number(Q))||Q.startsWith("Symbol."))return"["+Q+"]";var fa="";this.isMethodCallCompletion(Q)&&(fa=Q.slice(Q.indexOf("(")),
Q=Q.slice(0,Q.indexOf("(")));return'["'+Q.replace(/"/g,'\\"')+'"]'+fa}},{key:"compute",value:function(Q){var fa=this,Ha,Qa,fc,Nb,ab,lc,rd,Bd,ad,Xa,Rc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress){Ha=Q.selection;Ha.isEmpty()?(Qa=Q.getLine(Ha.lead.row),Qa=Qa.slice(Qa.lastIndexOf(":")+1,Ha.lead.column)):Qa=Ha.text.slice(Math.max(0,Ha.text.indexOf(":")),0);if(!fa.isValidPrefix(Qa))return pb.return([]);Nb=(fc=Q.pluginFind(function(eb){return eb.isJSEditorPlugin}))&&
fc.systemInterface();if(!Nb)return pb.return([]);ab=Ra.buildEvalOpts(Q);return pb.yield(Nb.dynamicCompletionsForPrefix(ab.targetModule,Qa,ab),2)}lc=pb.yieldResult;rd=lc.isError;Bd=lc.value;ad=lc.completions;Xa=lc.prefix;if(rd)return console.warn("javascript completer encountered error: "+(Bd.stack||Bd)),pb.return([]);ad.reduce(function(eb,hb){hb=$jscomp.makeIterator(hb);hb.next();hb=hb.next().value;return eb+hb.length},0);Rc=ad.reduce(function(eb,hb,ac){hb=$jscomp.makeIterator(hb);var Wb=hb.next().value;
hb=hb.next().value;return eb.concat(hb.map(function(Fd){var Be=fa.isValidIdentifier(Fd);return{info:Wb,completion:Fd,prefix:Be?Xa:"."+Xa,customInsertionFn:Be?fa.isMethodCallCompletion(Fd)?function(Ie,Lf,fd,ue){Lf=ue.start;ue=ue.end;Ie=Ie.replace(/\((.*)\)/,function(Md){return"("+Md.slice(1,-1).split(", ").map(function(Vb,sa){return"${"+sa+":"+Vb+"}"}).join(", ")+")"});Ie=new Ra.Snippet({expansion:Ie});fd.replace({start:Lf,end:ue},"");Ie.expandAtCursor(fd)}:null:function(Ie,Lf,fd,ue){Ie=ue.start;ue=
ue.end;Lf={row:Ie.row,column:Ie.column-1};ue="."===fd.textInRange({start:Lf,end:Ie})?{start:Lf,end:ue}:{start:Ie,end:ue};fd.replace(ue,fa.wrapInBrackets(Fd))}}}))},[]);Rc.forEach(function(eb,hb){return Object.assign(eb,{priority:2E3+Rc.length-hb})});return pb.return(Rc)})}}],[{key:"className",get:function(){return"DynamicJavaScriptCompleter"}}],Uc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);Ra.DynamicJavaScriptCompleter=Ja;Ra.DynamicJavaScriptCompleter=Ja;Ra.DynamicJavaScriptCompleter=Ja;Ra.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
Ja=function(sc){var Uc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),Xc=Uc.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Uc.JavaScriptKeywordCompleter?Uc.JavaScriptKeywordCompleter:Uc.JavaScriptKeywordCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(Xc,sc,[{key:"compute",value:function(Q,fa){return Ra.keywords.map(function(Ha){return{completion:Ha,priority:0}})}}],
[{key:"className",get:function(){return"JavaScriptKeywordCompleter"}}],Uc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);Ra.JavaScriptKeywordCompleter=Ja;Ra.JavaScriptKeywordCompleter=Ja;Ra.JavaScriptKeywordCompleter=Ja;Ja=[new Ra.DynamicJavaScriptCompleter,new Ra.JavaScriptKeywordCompleter,
new Ra.ModuleTopLevelVarCompleter];Ra.completers=Ja;Ra.completers=Ja;Ra.completers=Ja;var ub=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");ub.Snippet=zc;var Mb=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],
["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["fun","function ${0:functionName}($1) {$2}"],
["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];ub.snippets=Mb;ub.snippets=Mb;ub.snippets=Mb;var Ob=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Ob.getEvalEnv=function(sc){return(sc=sc.pluginFind(function(Uc){return Uc.isJSEditorPlugin}))?sc.evalEnvironment:null};Ob.setEvalEnv=function(sc,Uc){(sc=sc.pluginFind(function(Xc){return Xc.isJSEditorPlugin}))&&Object.assign(sc.evalEnvironment,Uc);return sc.evalEnvironment};Ob.pToI=function(sc,Uc){return sc.positionToIndex(Uc)};
Ob.iToP=function(sc,Uc){return sc.indexToPosition(Uc)};Ob.arr=Od;Ob.promise=ge;Ob.string=md;Ob.show=fe;Ob.Range=xd;Ob.query=Rb;Ob.BaseVisitor=Ud;ub=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(sc,Uc){Uc=void 0===Uc?{varName:null,position:null}:Uc;var Xc,Q,fa,Ha,Qa,fc,Nb,ab,lc,rd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){switch(Bd.nextAddress){case 1:Xc=Uc;Q=Xc.varName;
fa=Xc.position;if(!Q){fa||(fa=sc.cursorPosition);Ha=sc.pluginInvokeFirst("getNavigator");Qa=Ha.ensureAST(sc);fc=Ob.query.nodesAt(sc.positionToIndex(fa),Qa).reverse().find(function(ad){return"Identifier"===ad.type});if(!fc)return sc.showError(Error("no identifier found!")),Bd.return(!0);Q=fc.name}Uc=sc.pluginFind(function(ad){return ad.isJSEditorPlugin}).sanatizedJsEnv();Nb='lively.modules.module("'+Uc.targetModule+'").undefine("'+Q+'")';Bd.setCatchFinallyBlocks(2);return Bd.yield(sc.doEval(null,Uc,
Nb),4);case 4:ab=Bd.yieldResult;lc=ab.error?ab.error:ab.isError?ab.value:null;Bd.leaveTryBlock(3);break;case 2:lc=rd=Bd.enterCatchBlock();case 3:return lc?sc.showError(lc):sc.setStatusMessage(Q+" undefined"),Bd.return(!0)}})}},{name:"change doitContext",exec:function(sc){var Uc,Xc,Q,fa,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress)return Uc=$jscomp,Xc=Uc.makeIterator,Qa.yield(sc.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(fc){return!fc.isUsedAsEpiMorph()}}),2);Q=Xc.call(Uc,Qa.yieldResult);if(fa=Q.next().value)Ha="reset"===fa,sc.doitContext=Ha?null:fa,sc.setStatusMessage(Ha?"doitContext is now\n"+fa:"doitContext reset");return Qa.return(!0)})}},{name:"change eval backend",exec:function(sc,Uc){Uc=void 0===Uc?{backend:void 0}:Uc;var Xc,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){if(1==fa.nextAddress)return Xc=Uc,Q=Xc.backend,void 0!==Q?fa.jumpTo(2):fa.yield(sc.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=fa.nextAddress&&(Q=fa.yieldResult,!Q))return sc.setStatusMessage("Canceled"),fa.return(!0);"local"===Q&&(Q=null);sc.setStatusMessage("Eval backend is now "+(Q||"local"));return fa.return(Ob.setEvalEnv(sc,{remote:Q}))})}},{name:"copy current module name to clipboard",exec:function(sc){var Uc=sc.evalEnvironment.targetModule;sc.setStatusMessage(Uc?Uc:"Cannot find module name");sc.env.eventDispatcher.killRing.add(sc);sc.env.eventDispatcher.doCopy(Uc);return!0}}];
Ob.jsEditorCommands=ub;Ob.jsEditorCommands=ub;Ob.jsEditorCommands=ub;var kb=[{name:"[javascript] list errors and warnings",exec:function(sc){var Uc,Xc,Q,fa,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){if(1==Qa.nextAddress){Uc=(sc.markers||[]).filter(function(fc){fc=fc.type;return"js-undeclared-var"===fc||"js-syntax-error"===fc});if(!Uc.length)return Ob.show("no warnings or errors"),Qa.return(!0);Xc=Uc.map(function(fc){var Nb=fc.range;return{isListItem:!0,string:"["+fc.type.split("-").slice(1).join(" ")+
"] "+sc.textInRange(Nb),value:Nb}});return Qa.yield(sc.world().filterableListPrompt("jump to warning or error",Xc),2)}Q=Qa.yieldResult;fa=$jscomp.makeIterator(Q.selected);if(Ha=fa.next().value)sc.saveMark(),sc.selection=Ha,sc.centerRow(Ha.start.row);return Qa.return(!0)})}},{name:"[javascript] inject import",exec:function(sc,Uc){Uc=void 0===Uc?{gotoImport:!1,insertImportAtCursor:!0}:Uc;var Xc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ha){switch(Ha.nextAddress){case 1:return Ha.yield(Ob.promise.delay(0),
2);case 2:return Ha.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return Xc=Ha.yieldResult,Q=Xc.interactivelyInjectImportIntoText,Ha.yield(Q(sc,Uc),4);case 4:return(fa=Ha.yieldResult)||sc.setStatusMessage("canceled"),Ha.return(fa)}})}},{name:"[javascript] fix undeclared variables",exec:function(sc,Uc){Uc=void 0===Uc?{ignore:[],autoApplyIfSingleChoice:!1,requester:sc}:Uc;var Xc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ha){if(1==Ha.nextAddress)return Ha.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Ha.nextAddress)return Xc=Ha.yieldResult,Q=Xc.interactivlyFixUndeclaredVariables,Ha.yield(Q(sc,Uc),3);fa=Ha.yieldResult;sc.focus();return Ha.return(fa)})}},{name:"[javascript] remove unused imports",exec:function(sc,Uc){Uc=void 0===Uc?{query:!0}:Uc;var Xc,Q,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ha){if(1==Ha.nextAddress)return Ha.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Ha.nextAddress)return Xc=Ha.yieldResult,Q=Xc.cleanupUnusedImports,Ha.yield(Q(sc,
Uc),3);fa=Ha.yieldResult;sc.setStatusMessage(fa);return Ha.return(!0)})}},{name:"[javascript] eslint report",exec:function(sc){var Uc,Xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Uc=Q.yieldResult;Xc=Uc.default;try{return Q.return(Xc.reportOnMorph(sc))}catch(fa){sc.showError(fa)}Q.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(sc){var Uc,Xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==
Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Uc=Q.yieldResult;Xc=Uc.default;try{return Q.return(Xc.previewFixesOnMorph(sc))}catch(fa){sc.showError(fa)}Q.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(sc,Uc,Xc){function Q(pb,eb){eb||(eb=ab(pb,{allowReturnOutsideFunction:!0}));var hb=Ob.string.lineRanges(pb),ac=pb.split("\n"),Wb=[],Fd=new Ob.BaseVisitor,Be=Fd.visitVariableDeclaration;Fd.visitVariableDeclaration=function(ue,
Md,Vb){if(1<ue.declarations.length)for(var sa=Ob.string.findLineWithIndexInLineRanges(hb,ue.start),Aa=ue.declarations[0].start-hb[sa][0],Kb={},P=1;P<ue.declarations.length;Kb={$jscomp$loop$prop$actionType$2286:Kb.$jscomp$loop$prop$actionType$2286,$jscomp$loop$prop$arg$2287:Kb.$jscomp$loop$prop$arg$2287},P++){var wa=ue.declarations[P],Pa=Ob.string.findLineWithIndexInLineRanges(hb,wa.start);if(sa!==Pa){var Hb=ac[Pa].match(/\s*/)[0].length;Hb=Aa-Hb;0!==Hb&&(wa=Ob.string.findLineWithIndexInLineRanges(hb,
wa.end),Kb.$jscomp$loop$prop$actionType$2286=0<Hb?"insert":"delete",Kb.$jscomp$loop$prop$arg$2287=0<Hb?" ".repeat(Hb):-Hb,Wb.push.apply(Wb,$jscomp.arrayFromIterable(Ob.arr.range(Pa,wa).map(function(Nc){return function(Wc){return[Nc.$jscomp$loop$prop$actionType$2286,hb[Wc][0],Nc.$jscomp$loop$prop$arg$2287]}}(Kb)))))}}return Be.call(Fd,ue,Md,Vb)};Fd.accept(eb,{},[]);for(eb=Wb.length;eb--;){var Ie=$jscomp.makeIterator(Wb[eb]),Lf=Ie.next().value,fd=Ie.next().value;Ie=Ie.next().value;"insert"===Lf?pb=
pb.slice(0,fd)+Ie+pb.slice(fd):"delete"===Lf&&(pb=pb.slice(0,fd)+pb.slice(fd+Ie))}return pb}var fa,Ha,Qa,fc,Nb,ab,lc,rd,Bd,ad,Xa,Rc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){switch(pb.nextAddress){case 1:return fa=Xc?Xc:Math.floor(sc.width/sc.defaultCharExtent().width),Uc=Object.assign({printWidth:fa,tabWidth:2,useTabs:!1,bracketSpacing:!1},Uc),Ha=lively.modules.module,Qa=System.normalizeSync("prettier/standalone.js"),pb.yield(Ha(Qa).load({format:"global",instrument:!1}),2);
case 2:return fc=pb.yieldResult,pb.yield(Ha("lively.ast/lib/acorn-extension.js").load(),3);case 3:return pb.yield(Ha("lively.ast").load(),4);case 4:return Nb=pb.yieldResult,ab=Nb.parse,pb.yield(Ha("lively.ast/lib/query.js").load(),5);case 5:return pb.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return lc=pb.yieldResult,rd=sc.selection.isEmpty()?sc.documentRange:sc.selection.range,Bd=sc.positionToIndex(rd.start),ad=sc.positionToIndex(rd.end),Xa=fc.format(sc.textString,
Object.assign({},Uc,{rangeStart:Bd,rangeEnd:ad,parser:function(eb,hb,ac){return ab(eb,{allowReturnOutsideFunction:!0})}})),sc.undoManager.group(),Rc=lc.diffChars(sc.textString,Xa),sc.applyJsDiffPatch(Rc),sc.selection.text=Q(sc.selection.text),sc.undoManager.group(),pb.return(!0)}})}}];Ob.jsIdeCommands=kb;Ob.jsIdeCommands=kb;Ob.jsIdeCommands=kb;var ib=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(sc,Uc){Uc=sc.pluginInvokeFirst("getNavigator");if(!Uc)return!0;Uc=Uc.resolveIdentifierAt(sc,
sc.cursorPosition);if(!Uc||!Uc.id)return Ob.show("No symbol identifier selected"),!0;if(!Uc.decl)return Ob.show("Cannot find declaration of "+Uc.name),!0;sc.saveMark();sc.selection={start:sc.indexToPosition(Uc.decl.start),end:sc.indexToPosition(Uc.decl.end)};sc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(sc){sc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(sc){sc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(sc,Uc){Uc=void 0===Uc?{direction:null}:Uc;var Xc=sc.pluginInvokeFirst("getNavigator");if(!Xc)return!0;Xc=Xc.resolveIdentifierAt(sc,
sc.cursorPosition);if(!Xc||!Xc.refs)return Ob.show("No symbol identifier selected"),!0;var Q=sc.selection;Xc=Xc.refs.map(function(Ha){var Qa=Ha.end;return Ob.Range.fromPositions(Ob.iToP(sc,Ha.start),Ob.iToP(sc,Qa))}).concat(Xc.decl?Ob.Range.fromPositions(Ob.iToP(sc,Xc.decl.start),Ob.iToP(sc,Xc.decl.end)):[]).sort(Ob.Range.compare);if(!Xc.length)return!0;var fa=Xc.map(String).indexOf(String(Q.range));if("next"===Uc.direction||"prev"===Uc.direction)-1===fa&&Xc.length?Xc=[Xc[0]]:(Uc=fa+("next"===Uc.direction?
1:-1),0>Uc?Uc=Xc.length-1:Uc>=Xc.length&&(Uc=0),Xc=[Xc[Uc]]);Xc.forEach(function(Ha){var Qa=Q.selections.findIndex(function(Nb){return Nb.range.equals(Ha)}),fc=Q.selections.length-1;-1<Qa?Ob.arr.swap(Q.selections,Qa,fc):Q.addRange(Ha,!1)});Q.mergeSelections();return!0}}];Ob.astEditorCommands=ib;Ob.astEditorCommands=ib;Ob.astEditorCommands=ib;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var Jb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
Jb.expressionAllowed=function(sc,Uc,Xc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Uc.lastType)||"quasi"==Uc.lastType&&/\{\s*$/.test(sc.string.slice(0,sc.pos-(Xc||0)))};Jb.passIndent=Za;Jb.defineMode=Cb;Jb.defineMIME=bc;Jb.registerHelper=ic;Jb.defaultConfig={indentUnit:2};Jb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};Jb.defineMode("javascript",
function(sc,Uc){function Xc(Ub,Ad,Kc){Gl=Ub;lk=Kc;return Ad}function Q(Ub,Ad){var Kc=Ub.next();if('"'==Kc||"'"==Kc)return Ad.tokenize=fa(Kc),Ad.tokenize(Ub,Ad);if("."==Kc&&Ub.match(/^\d+(?:[eE][+\-]?\d+)?/))return Xc("number","number");if("."==Kc&&Ub.match(".."))return Xc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Kc))return Xc(Kc);if("="==Kc&&Ub.eat(">"))return Xc("=>","operator");if("0"==Kc&&Ub.eat(/x/i))return Ub.eatWhile(/[\da-f]/i),Xc("number","number");if("0"==Kc&&Ub.eat(/o/i))return Ub.eatWhile(/[0-7]/i),
Xc("number","number");if("0"==Kc&&Ub.eat(/b/i))return Ub.eatWhile(/[01]/i),Xc("number","number");if(/\d/.test(Kc))return Ub.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),Xc("number","number");if("/"==Kc){if(Ub.eat("*"))return Ad.tokenize=Ha,Ha(Ub,Ad);if(Ub.eat("/"))return Ub.skipToEnd(),Xc("comment","comment");if(Jb.expressionAllowed(Ub,Ad,1)){a:for(var ze=Ad=!1;null!=(Kc=Ub.next());){if(!Ad){if("/"==Kc&&!ze)break a;"["==Kc?ze=!0:ze&&"]"==Kc&&(ze=!1)}Ad=!Ad&&"\\"==Kc}Ub.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return Xc("regexp","string-2")}Ub.eatWhile(ok);return Xc("operator","operator",Ub.current())}if("`"==Kc)return Ad.tokenize=Qa,Qa(Ub,Ad);if("#"==Kc)return Ub.skipToEnd(),Xc("error","error");if(ok.test(Kc))return">"==Kc&&Ad.lexical&&">"==Ad.lexical.type||Ub.eatWhile(ok),Xc("operator","operator",Ub.current());if(cm.test(Kc))return Ub.eatWhile(cm),Ub=Ub.current(),(Kc=ch.propertyIsEnumerable(Ub)&&ch[Ub])&&"."!=Ad.lastType?Xc(Kc.type,Kc.style,Ub):Xc("variable","variable",Ub)}function fa(Ub){return function(Ad,
Kc){var ze=!1,kd;if(oi&&"@"==Ad.peek()&&Ad.match(Fl))return Kc.tokenize=Q,Xc("jsonld-keyword","meta");for(;null!=(kd=Ad.next())&&(kd!=Ub||ze);)ze=!ze&&"\\"==kd;ze||(Kc.tokenize=Q);return Xc("string","string")}}function Ha(Ub,Ad){for(var Kc=!1,ze;ze=Ub.next();){if("/"==ze&&Kc){Ad.tokenize=Q;break}Kc="*"==ze}return Xc("comment","comment")}function Qa(Ub,Ad){for(var Kc=!1,ze;null!=(ze=Ub.next());){if(!Kc&&("`"==ze||"$"==ze&&Ub.eat("{"))){Ad.tokenize=Q;break}Kc=!Kc&&"\\"==ze}return Xc("quasi","string-2",
Ub.current())}function fc(Ub,Ad){Ad.fatArrowAt&&(Ad.fatArrowAt=null);var Kc=Ub.string.indexOf("=>",Ub.start);if(!(0>Kc)){if(Kk){var ze=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ub.string.slice(Ub.start,Kc));ze&&(Kc=ze.index)}ze=0;var kd=!1;for(--Kc;0<=Kc;--Kc){var Wg=Ub.string.charAt(Kc),pk="([{}])".indexOf(Wg);if(0<=pk&&3>pk){if(!ze){++Kc;break}if(0==--ze){"("==Wg&&(kd=!0);break}}else if(3<=pk&&6>pk)++ze;else if(cm.test(Wg))kd=!0;else{if(/["'\/]/.test(Wg))return;if(kd&&!ze){++Kc;break}}}kd&&
!ze&&(Ad.fatArrowAt=Kc)}}function Nb(Ub,Ad,Kc,ze,kd,Wg){this.indented=Ub;this.column=Ad;this.type=Kc;this.prev=kd;this.info=Wg;null!=ze&&(this.align=ze)}function ab(){for(var Ub=arguments.length-1;0<=Ub;Ub--)Wf.cc.push(arguments[Ub])}function lc(){ab.apply(null,arguments);return!0}function rd(Ub){function Ad(ze){for(;ze;ze=ze.next)if(ze.name==Ub)return!0;return!1}var Kc=Wf.state;Wf.marked="def";Kc.context?Ad(Kc.localVars)||(Kc.localVars={name:Ub,next:Kc.localVars}):!Ad(Kc.globalVars)&&Uc.globalVars&&
(Kc.globalVars={name:Ub,next:Kc.globalVars})}function Bd(){Wf.state.context={prev:Wf.state.context,vars:Wf.state.localVars};Wf.state.localVars=Vm}function ad(){Wf.state.localVars=Wf.state.context.vars;Wf.state.context=Wf.state.context.prev}function Xa(Ub,Ad){var Kc=function(){var ze=Wf.state,kd=ze.indented;if("stat"==ze.lexical.type)kd=ze.lexical.indented;else for(var Wg=ze.lexical;Wg&&")"==Wg.type&&Wg.align;Wg=Wg.prev)kd=Wg.indented;ze.lexical=new Nb(kd,Wf.stream.column(),Ub,null,ze.lexical,Ad)};
Kc.lex=!0;return Kc}function Rc(){var Ub=Wf.state;Ub.lexical.prev&&(")"==Ub.lexical.type&&(Ub.indented=Ub.lexical.indented),Ub.lexical=Ub.lexical.prev)}function pb(Ub){function Ad(Kc){return Kc==Ub?lc():";"==Ub?ab():lc(Ad)}return Ad}function eb(Ub,Ad){return"var"==Ub?lc(Xa("vardef",Ad.length),Vc,pb(";"),Rc):"keyword a"==Ub?lc(Xa("form"),Wb,eb,Rc):"keyword b"==Ub?lc(Xa("form"),eb,Rc):"{"==Ub?lc(Xa("}"),jf,Rc):";"==Ub?lc():"if"==Ub?("else"==Wf.state.lexical.info&&Wf.state.cc[Wf.state.cc.length-1]==
Rc&&Wf.state.cc.pop()(),lc(Xa("form"),Wb,eb,Rc,Ga)):"function"==Ub?lc(xb):"for"==Ub?lc(Xa("form"),bb,eb,Rc):"variable"==Ub?Kk&&"type"==Ad?(Wf.marked="keyword",lc(we,pb("operator"),we,pb(";"))):lc(Xa("stat"),wa):"switch"==Ub?lc(Xa("form"),Wb,pb("{"),Xa("}","switch"),jf,Rc,Rc):"case"==Ub?lc(hb,pb(":")):"default"==Ub?lc(pb(":")):"catch"==Ub?lc(Xa("form"),Bd,pb("("),Ic,pb(")"),eb,Rc,ad):"class"==Ub?lc(Xa("form"),Dd,Rc):"export"==Ub?lc(Xa("stat"),df,Rc):"import"==Ub?lc(Xa("stat"),Jh,Rc):"module"==Ub?lc(Xa("form"),
Rf,pb("{"),Xa("}"),jf,Rc,Rc):"async"==Ub?lc(eb):"@"==Ad?lc(hb,eb):ab(Xa("stat"),hb,pb(";"),Rc)}function hb(Ub){return Fd(Ub,!1)}function ac(Ub){return Fd(Ub,!0)}function Wb(Ub){return"("!=Ub?ab():lc(Xa(")"),hb,pb(")"),Rc)}function Fd(Ub,Ad){if(Wf.state.fatArrowAt==Wf.stream.start){var Kc=Ad?sa:Vb;if("("==Ub)return lc(Bd,Xa(")"),le(Rf,")"),Rc,pb("=>"),Kc,ad);if("variable"==Ub)return ab(Bd,Rf,pb("=>"),Kc,ad)}Kc=Ad?fd:Lf;return sg.hasOwnProperty(Ub)?lc(Kc):"function"==Ub?lc(xb,Kc):"class"==Ub?lc(Xa("form"),
wc,Rc):"keyword c"==Ub||"async"==Ub?lc(Ad?Ie:Be):"("==Ub?lc(Xa(")"),Be,pb(")"),Rc,Kc):"operator"==Ub||"spread"==Ub?lc(Ad?ac:hb):"["==Ub?lc(Xa("]"),gl,Rc,Kc):"{"==Ub?Rd(Hb,"}",null,Kc):"quasi"==Ub?ab(ue,Kc):"new"==Ub?lc(Aa(Ad)):lc()}function Be(Ub){return Ub.match(/[;\}\)\],]/)?ab():ab(hb)}function Ie(Ub){return Ub.match(/[;\}\)\],]/)?ab():ab(ac)}function Lf(Ub,Ad){return","==Ub?lc(hb):fd(Ub,Ad,!1)}function fd(Ub,Ad,Kc){var ze=0==Kc?Lf:fd,kd=0==Kc?hb:ac;if("=>"==Ub)return lc(Bd,Kc?sa:Vb,ad);if("operator"==
Ub)return/\+\+|--/.test(Ad)?lc(ze):"?"==Ad?lc(hb,pb(":"),kd):lc(kd);if("quasi"==Ub)return ab(ue,ze);if(";"!=Ub){if("("==Ub)return Rd(ac,")","call",ze);if("."==Ub)return lc(Pa,ze);if("["==Ub)return lc(Xa("]"),Be,pb("]"),Rc,ze)}}function ue(Ub,Ad){return"quasi"!=Ub?ab():"${"!=Ad.slice(Ad.length-2)?lc(ue):lc(hb,Md)}function Md(Ub){if("}"==Ub)return Wf.marked="string-2",Wf.state.tokenize=Qa,lc(ue)}function Vb(Ub){fc(Wf.stream,Wf.state);return ab("{"==Ub?eb:hb)}function sa(Ub){fc(Wf.stream,Wf.state);return ab("{"==
Ub?eb:ac)}function Aa(Ub){return function(Ad){return"."==Ad?lc(Ub?P:Kb):ab(Ub?ac:hb)}}function Kb(Ub,Ad){if("target"==Ad)return Wf.marked="keyword",lc(Lf)}function P(Ub,Ad){if("target"==Ad)return Wf.marked="keyword",lc(fd)}function wa(Ub){return":"==Ub?lc(Rc,eb):ab(Lf,pb(";"),Rc)}function Pa(Ub){if("variable"==Ub)return Wf.marked="property",lc()}function Hb(Ub,Ad){if("async"==Ub)return Wf.marked="property",lc(Hb);if("variable"==Ub||"keyword"==Wf.style)return Wf.marked="property","get"==Ad||"set"==
Ad?lc(Nc):lc(Wc);if("number"==Ub||"string"==Ub)return Wf.marked=oi?"property":Wf.style+" property",lc(Wc);if("jsonld-keyword"==Ub)return lc(Wc);if("modifier"==Ub)return lc(Hb);if("["==Ub)return lc(hb,pb("]"),Wc);if("spread"==Ub)return lc(hb);if(":"==Ub)return ab(Wc)}function Nc(Ub){if("variable"!=Ub)return ab(Wc);Wf.marked="property";return lc(xb)}function Wc(Ub){if(":"==Ub)return lc(ac);if("("==Ub)return ab(xb)}function le(Ub,Ad,Kc){function ze(kd,Wg){return(Kc?-1<Kc.indexOf(kd):","==kd)?(kd=Wf.state.lexical,
"call"==kd.info&&(kd.pos=(kd.pos||0)+1),lc(function(pk,Cm){return pk==Ad||Cm==Ad?ab():ab(Ub)},ze)):kd==Ad||Wg==Ad?lc():lc(pb(Ad))}return function(kd,Wg){return kd==Ad||Wg==Ad?lc():ab(Ub,ze)}}function Rd(Ub,Ad,Kc){for(var ze=3;ze<arguments.length;ze++)Wf.cc.push(arguments[ze]);return lc(Xa(Ad,Kc),le(Ub,Ad),Rc)}function jf(Ub){return"}"==Ub?lc():ab(eb,jf)}function ce(Ub,Ad){if(Kk){if(":"==Ub)return lc(we);if("?"==Ad)return lc(ce)}}function we(Ub){if("variable"==Ub)return Wf.marked="variable-3",lc(Qf);
if("string"==Ub||"number"==Ub||"atom"==Ub)return lc(Qf);if("{"==Ub)return lc(Xa("}"),le(Bf,"}",",;"),Rc);if("("==Ub)return lc(le(rg,")"),Mf)}function Mf(Ub){if("=>"==Ub)return lc(we)}function Bf(Ub,Ad){if("variable"==Ub||"keyword"==Wf.style)return Wf.marked="property",lc(Bf);if("?"==Ad)return lc(Bf);if(":"==Ub)return lc(we)}function rg(Ub){if("variable"==Ub)return lc(rg);if(":"==Ub)return lc(we)}function Qf(Ub,Ad){if("<"==Ad)return lc(Xa(">"),le(we,">"),Rc,Qf);if("|"==Ad||"."==Ub)return lc(we);if("["==
Ub)return lc(pb("]"),Qf);if("extends"==Ad)return lc(we)}function Vc(){return ab(Rf,ce,Hg,qf)}function Rf(Ub,Ad){if("modifier"==Ub)return lc(Rf);if("variable"==Ub)return rd(Ad),lc();if("spread"==Ub)return lc(Rf);if("["==Ub)return Rd(Rf,"]");if("{"==Ub)return Rd(Fg,"}")}function Fg(Ub,Ad){if("variable"==Ub&&!Wf.stream.match(/^\s*:/,!1))return rd(Ad),lc(Hg);"variable"==Ub&&(Wf.marked="property");return"spread"==Ub?lc(Rf):"}"==Ub?ab():lc(pb(":"),Rf,Hg)}function Hg(Ub,Ad){if("="==Ad)return lc(ac)}function qf(Ub){if(","==
Ub)return lc(Vc)}function Ga(Ub,Ad){if("keyword b"==Ub&&"else"==Ad)return lc(Xa("form","else"),eb,Rc)}function bb(Ub){if("("==Ub)return lc(Xa(")"),Gb,pb(")"),Rc)}function Gb(Ub){return"var"==Ub?lc(Vc,pb(";"),Ia):";"==Ub?lc(Ia):"variable"==Ub?lc(ba):ab(hb,pb(";"),Ia)}function ba(Ub,Ad){return"in"==Ad||"of"==Ad?(Wf.marked="keyword",lc(hb)):lc(Lf,Ia)}function Ia(Ub,Ad){return";"==Ub?lc(nb):"in"==Ad||"of"==Ad?(Wf.marked="keyword",lc(hb)):ab(hb,pb(";"),nb)}function nb(Ub){")"!=Ub&&lc(hb)}function xb(Ub,
Ad){if("*"==Ad)return Wf.marked="keyword",lc(xb);if("variable"==Ub)return rd(Ad),lc(xb);if("("==Ub)return lc(Bd,Xa(")"),le(Ic,")"),Rc,ce,eb,ad);if(Kk&&"<"==Ad)return lc(Xa(">"),le(we,">"),Rc,xb)}function Ic(Ub){return"spread"==Ub?lc(Ic):ab(Rf,ce,Hg)}function wc(Ub,Ad){return"variable"==Ub?Dd(Ub,Ad):yd(Ub,Ad)}function Dd(Ub,Ad){if("variable"==Ub)return rd(Ad),lc(yd)}function yd(Ub,Ad){if("<"==Ad)return lc(Xa(">"),le(we,">"),Rc,yd);if("extends"==Ad||"implements"==Ad||Kk&&","==Ub)return lc(Kk?we:hb,
yd);if("{"==Ub)return lc(Xa("}"),zd,Rc)}function zd(Ub,Ad){if("variable"==Ub||"keyword"==Wf.style){if(("async"==Ad||"static"==Ad||"get"==Ad||"set"==Ad||Kk&&("public"==Ad||"private"==Ad||"protected"==Ad||"readonly"==Ad||"abstract"==Ad))&&Wf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Wf.marked="keyword",lc(zd);Wf.marked="property";return lc(Kk?He:xb,zd)}if("["==Ub)return lc(hb,pb("]"),Kk?He:xb,zd);if("*"==Ad)return Wf.marked="keyword",lc(zd);if(";"==Ub)return lc(zd);if("}"==Ub)return lc();if("@"==
Ad)return lc(hb,zd)}function He(Ub,Ad){return"?"==Ad?lc(He):":"==Ub?lc(we,Hg):"="==Ad?lc(ac):ab(xb)}function df(Ub,Ad){return"*"==Ad?(Wf.marked="keyword",lc(Kh,pb(";"))):"default"==Ad?(Wf.marked="keyword",lc(hb,pb(";"))):"{"==Ub?lc(le(og,"}"),Kh,pb(";")):ab(eb)}function og(Ub,Ad){if("as"==Ad)return Wf.marked="keyword",lc(pb("variable"));if("variable"==Ub)return ab(ac,og)}function Jh(Ub){return"string"==Ub?lc():ab(Oi,Th,Kh)}function Oi(Ub,Ad){if("{"==Ub)return Rd(Oi,"}");"variable"==Ub&&rd(Ad);"*"==
Ad&&(Wf.marked="keyword");return lc(Kj)}function Th(Ub){if(","==Ub)return lc(Oi,Th)}function Kj(Ub,Ad){if("as"==Ad)return Wf.marked="keyword",lc(Oi)}function Kh(Ub,Ad){if("from"==Ad)return Wf.marked="keyword",lc(hb)}function gl(Ub){return"]"==Ub?lc():ab(le(ac,"]"))}sc=Object.assign({},Jb.defaultConfig,{},sc);Uc=Object.assign({},Jb.defaultParserConfig,{},Uc);var Kf=sc.indentUnit,Uj=Uc.statementIndent,oi=Uc.jsonld,Ke=Uc.json||oi,Kk=Uc.typescript,cm=Uc.wordCharacters||/[\w$\xa1-\uffff]/,ch=function(){function Ub(Cm){return{type:Cm,
style:"keyword"}}var Ad=Ub("keyword a"),Kc=Ub("keyword b"),ze=Ub("keyword c"),kd=Ub("operator"),Wg={type:"atom",style:"atom"};Ad={"if":Ub("if"),"while":Ad,"with":Ad,"else":Kc,"do":Kc,"try":Kc,"finally":Kc,"return":ze,"break":ze,"continue":ze,"new":Ub("new"),"delete":ze,"throw":ze,"debugger":ze,"var":Ub("var"),"const":Ub("var"),let:Ub("var"),"function":Ub("function"),"catch":Ub("catch"),"for":Ub("for"),"switch":Ub("switch"),"case":Ub("case"),"default":Ub("default"),"in":kd,"typeof":kd,"instanceof":kd,
"true":Wg,"false":Wg,"null":Wg,undefined:Wg,NaN:Wg,Infinity:Wg,"this":Ub("this"),"class":Ub("class"),"super":Ub("atom"),yield:ze,"export":Ub("export"),"import":Ub("import"),"extends":ze,await:ze,async:Ub("async")};if(Kk){Kc={type:"variable",style:"variable-3"};ze={"interface":Ub("class"),"implements":ze,namespace:ze,module:Ub("module"),"enum":Ub("module"),"public":Ub("modifier"),"private":Ub("modifier"),"protected":Ub("modifier"),"abstract":Ub("modifier"),as:kd,string:Kc,number:Kc,"boolean":Kc,any:Kc};
for(var pk in ze)Ad[pk]=ze[pk]}return Ad}(),ok=/[+\-*&%=<>!?|~^@]/,Fl=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Gl,lk,sg={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Wf={state:null,column:null,marked:null,cc:null},Vm={name:"this",next:{name:"arguments"}};Rc.lex=!0;return{startState:function(Ub){Ub={tokenize:Q,lastType:"sof",cc:[],lexical:new Nb((Ub||0)-Kf,0,"block",!1),localVars:Uc.localVars,context:Uc.localVars&&{vars:Uc.localVars},
indented:Ub||0};Uc.globalVars&&"object"==typeof Uc.globalVars&&(Ub.globalVars=Uc.globalVars);return Ub},token:function(Ub,Ad){Ub.sol()&&(Ad.lexical.hasOwnProperty("align")||(Ad.lexical.align=!1),Ad.indented=Ub.indentation(),fc(Ub,Ad));if(Ad.tokenize!=Ha&&Ub.eatSpace())return null;var Kc=Ad.tokenize(Ub,Ad);if("comment"==Gl)return Kc;Ad.lastType="operator"!=Gl||"++"!=lk&&"--"!=lk?Gl:"incdec";a:{var ze=Gl,kd=lk,Wg=Ad.cc;Wf.state=Ad;Wf.stream=Ub;Wf.marked=null;Wf.cc=Wg;Wf.style=Kc;Ad.lexical.hasOwnProperty("align")||
(Ad.lexical.align=!0);for(Ub=0;;){if(1E5<Ub++)throw Error("endless");if((Wg.length?Wg.pop():Ke?hb:eb)(ze,kd)){for(;Wg.length&&Wg[Wg.length-1].lex;)Wg.pop()();if(Wf.marked){Kc=Wf.marked;break a}if(ze="variable"==ze)b:{for(ze=Ad.localVars;ze;ze=ze.next)if(ze.name==kd){ze=!0;break b}for(Ad=Ad.context;Ad;Ad=Ad.prev)for(ze=Ad.vars;ze;ze=ze.next)if(ze.name==kd){ze=!0;break b}ze=void 0}if(ze){Kc="variable-2";break a}break a}}}return Kc},indent:function(Ub,Ad){if(Ub.tokenize==Ha)return Jb.passIndent;if(Ub.tokenize!=
Q)return 0;var Kc=Ad&&Ad.charAt(0),ze=Ub.lexical,kd;if(!/^\s*else\b/.test(Ad))for(var Wg=Ub.cc.length-1;0<=Wg;--Wg){var pk=Ub.cc[Wg];if(pk==Rc)ze=ze.prev;else if(pk!=Ga)break}for(;!("stat"!=ze.type&&"form"!=ze.type||"}"!=Kc&&(!(kd=Ub.cc[Ub.cc.length-1])||kd!=Lf&&kd!=fd||/^[,\.=+\-*:?[\(]/.test(Ad)));)ze=ze.prev;Uj&&")"==ze.type&&"stat"==ze.prev.type&&(ze=ze.prev);kd=ze.type;Wg=Kc==kd;return(pk=Ub._string)&&pk.trimLeft().startsWith("?")&&":"===Kc?pk.indexOf("?"):pk&&":"===Ub.lastType&&"}"!==ze.type?
pk.match(/^\s*/)[0].length:"vardef"==kd?(Ad=ze.indented+ze.info+2+Ub.localVars.name.length,"?"===Kc||":"===Kc||"|"===Kc||"&"===Kc?Ad:","==Ub.lastType?ze.indented+ze.info+1:"operator"==Ub.lastType?Ad+3:ze.indented):"form"==kd&&"{"==Kc?ze.indented:"form"==kd?ze.indented+Kf:"stat"==kd?(Kc=ze.indented,Ub="operator"==Ub.lastType||","==Ub.lastType||ok.test(Ad.charAt(0))||/[,.]/.test(Ad.charAt(0)),Kc+(Ub?Uj||Kf:0)):"switch"!=ze.info||Wg||0==Uc.doubleIndentSwitch?ze.align?ze.column+(Wg?0:1):ze.indented+(Wg?
0:Kf):ze.indented+(/^(?:case|default)\b/.test(Ad)?Kf:2*Kf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ke?null:"/*",blockCommentEnd:Ke?null:"*/",lineComment:Ke?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ke?"json":"javascript",jsonldMode:oi,jsonMode:Ke,expressionAllowed:Jb.expressionAllowed,skipExpression:function(Ub){var Ad=Ub.cc[Ub.cc.length-1];Ad!=hb&&Ad!=ac||Ub.cc.pop()}}});Jb.registerHelper("wordChars","javascript",/[\w$]/);Jb.defineMIME("text/javascript",
"javascript");Jb.defineMIME("text/ecmascript","javascript");Jb.defineMIME("application/javascript","javascript");Jb.defineMIME("application/x-javascript","javascript");Jb.defineMIME("application/ecmascript","javascript");Jb.defineMIME("application/json",{name:"javascript",json:!0});Jb.defineMIME("application/x-json",{name:"javascript",json:!0});Jb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});Jb.defineMIME("text/typescript",{name:"javascript",typescript:!0});Jb.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var vc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");vc.string=md;vc.JavaScriptChecker=$b;vc.JavaScriptNavigator=ed;vc.completers=Ja;vc.jsSnippets=Mb;vc.jsIdeCommands=kb;vc.jsEditorCommands=ub;vc.astEditorCommands=ib;vc.CodeMirrorEnabledEditorPlugin=id;vc.Snippet=zc;vc.parser=nd;vc.localInterface=Zb;vc.systemInterfaceNamed=rc;vc.serverInterfaceFor=Lb;vc.l2lInterfaceFor=Gc;$b=function(sc){var Uc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
Xc=Uc.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Uc.JavaScriptEditorPlugin?Uc.JavaScriptEditorPlugin:Uc.JavaScriptEditorPlugin=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(Xc,sc,[{key:Symbol.for("lively-instance-initialize"),value:function(){zb._get(Object.getPrototypeOf(Xc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new vc.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(Q){zb._get(Object.getPrototypeOf(Xc.prototype),"attach",this).call(this,Q);this.evalEnvironment.context=Q}},{key:"detach",value:function(Q){this.checker.uninstall(this.textMorph);zb._get(Object.getPrototypeOf(Xc.prototype),"detach",this).call(this,Q)}},{key:"getNavigator",value:function(){return new vc.JavaScriptNavigator}},
{key:"getCompleters",value:function(Q){return vc.completers.concat(Q)}},{key:"getCommands",value:function(Q){return[].concat($jscomp.arrayFromIterable(zb._get(Object.getPrototypeOf(Xc.prototype),"getCommands",this).call(this,Q)),$jscomp.arrayFromIterable(vc.jsIdeCommands),$jscomp.arrayFromIterable(vc.jsEditorCommands),$jscomp.arrayFromIterable(vc.astEditorCommands))}},{key:"getKeyBindings",value:function(Q){return[].concat($jscomp.arrayFromIterable(Q),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},
{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},
{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(Q){var fa=this,Ha,Qa,fc,Nb,ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lc){Ha=fa.textMorph;Qa=[{command:"doit",target:Ha,showKeyShortcuts:!0},{command:"inspectit",target:Ha,showKeyShortcuts:!0},{command:"printit",target:Ha,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:Ha,showKeyShortcuts:!0},{command:"eval all",target:Ha,showKeyShortcuts:!0},
{command:"text completion",alias:"code completion",target:Ha,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Ha,showKeyShortcuts:!0},{isDivider:!0}];fa.evalEnvironment.targetModule&&Qa.push({command:"[javascript] inject import",alias:"add import",target:Ha},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Ha},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:Ha});
fc=fa.getNavigator();(Nb=fc.resolveIdentifierAt(Ha,Ha.cursorPosition))&&Qa.push({command:"selectDefinition",alias:'jump to definition of "'+Nb.name+'"',target:Ha},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Nb.name+'"',target:Ha});(ab=Ha.selection.text.trim())&&Qa.push({command:"open code search",alias:'code search for "'+vc.string.truncate(ab,30)+'"',target:Ha.world(),args:{input:ab,backend:fa.backend()}});Qa.push({isDivider:!0});return lc.return(Qa.concat(Q))})}},
{key:"getSnippets",value:function(){return vc.jsSnippets.map(function(Q){var fa=$jscomp.makeIterator(Q);Q=fa.next().value;fa=fa.next().value;return new vc.Snippet({trigger:Q,expansion:fa})})}},{key:"sanatizedJsEnv",value:function(Q){Q=Object.assign({},this.evalEnvironment,{},Q);Q.format||(Q.formatd="esm");Q.context||(Q.context=this.textMorph);Q.sourceURL||(Q.sourceURL=Q.targetModule+"_doit_"+Date.now());Q.systemInterface||(Q.systemInterface=vc.localInterface);return Q}},{key:"backend",value:function(Q){Q=
this.sanatizedJsEnv(Q);return Q.remote?Q.remote:"local"}},{key:"systemInterface",value:function(Q){return this.sanatizedJsEnv(Q).systemInterface||vc.localInterface}},{key:"setSystemInterface",value:function(Q){return this.evalEnvironment.systemInterface=Q}},{key:"setSystemInterfaceNamed",value:function(Q){return this.setSystemInterface(vc.systemInterfaceNamed(Q))}},{key:"runEval",value:function(Q,fa){fa=this.sanatizedJsEnv(fa);return this.systemInterface(fa).runEval(Q,fa)}},{key:"parser",get:function(){return vc.parser}},
{key:"parse",value:function(Q){Q=void 0===Q?null:Q;if(this._ast&&this._ast._astType===Q)return this._ast;var fa=this.parser,Ha=this.textMorph.textString;if(!fa)return null;var Qa={withComments:!0,allowReturnOutsideFunction:!0};Q&&(Qa.type=Q);if(Ha.startsWith("#!")){var fc=Ha.indexOf("\n");Ha=" ".repeat(fc)+Ha.slice(fc)}fa=fa.fuzzyParse(Ha,Qa);fa._astType=Q;return this._ast=fa}},{key:"undeclaredVariables",value:function(Q){var fa=this.parser,Ha=this.evalEnvironment.knownGlobals||[];Q=this.parse(void 0===
Q?null:Q);return fa&&Q?fa.query.findGlobalVarRefs(Q,{jslintGlobalComment:!0}).filter(function(Qa){return!Ha.includes(Qa.name)}):[]}}],[{key:"className",get:function(){return"JavaScriptEditorPlugin"}}],Uc,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:662,end:6664})}(vc.CodeMirrorEnabledEditorPlugin);
$b=vc.JavaScriptEditorPlugin;Da("default",$b);vc.default=$b}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});