System.register("./__root_module__-6d2e743c.js kld-intersections ./object-classes-0f5a7a9a.js ./user-ui-1e8d4469.js ./index-64e9ba4b.js ./index-5fc44505.js".split(" "),function(){var Ma,rb,Db,hc,Kb,id,Zc,yd,Kc,sc,bd,hd,se,xe,ne,Rc,Pd,Hb,Gc;return{setters:[function(ud){Ma=ud.M;rb=ud.ah;Db=ud.ad;hc=ud.m;Kb=ud.ag;id=ud.b;Zc=ud.f;yd=ud.c;Kc=ud.C;sc=ud.p;bd=ud.r;hd=ud.i;se=ud.t;xe=ud.aC;ne=ud.aD;Rc=ud.d;Pd=ud.az;Hb=ud.a1},function(){},function(){},function(ud){Gc=ud.UserUI},function(){},function(){}],
execute:function(){var ud=lively.FreezerRuntime.recorderFor("WorldDashboard/index.js");ud.Morph=Ma;ud.HorizontalLayout=rb;ud.VerticalLayout=Db;ud.morph=hc;ud.MorphicDB=Kb;ud.arr=id;ud.fun=Zc;ud.string=yd;ud.Color=Kc;ud.pt=sc;ud.UserUI=Gc;ud.resource=bd;var Vc=function(Fb){var Ac=lively.FreezerRuntime.recorderFor("WorldDashboard/index.js"),$c=Ac.hasOwnProperty("WorldDashboard")&&"function"===typeof Ac.WorldDashboard?Ac.WorldDashboard:Ac.WorldDashboard=function(Bc){Bc&&Bc[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hd($c,Fb,[{key:"onLoad",value:function(){if(!this.isComponent&&"undefined"!==typeof localStorage){var Bc=localStorage.getItem("lively.morphic-projects-filter");Bc&&this.ui.sortSelector.selection!=Bc&&(this.ui.sortSelector.selection=Bc)}}},{key:"focus",value:function(){this.ui.searchField.focus()}},{key:"update",value:function(){this.displayWorlds();if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-projects-filter",
this.ui.sortSelector.selection)}catch(Bc){console.error(Bc)}}},{key:"beforePublish",value:function(){this.reset()}},{key:"reset",value:function(){this.ui.worldList.items=[];this.ui.noWorldWarning.visible=!1}},{key:"relayout",value:function(){this.alignInWorld()}},{key:"alignInWorld",value:function(Bc){Bc=void 0===Bc?$world:Bc;this.owner!=Bc&&Bc.addMorph(this);this.center=Bc.visibleBounds().center()}},{key:"sortAndFilterPreviews",value:function(Bc){var vd=ud.UserUI.getCurrentUser();Bc=this.ui.searchField.fuzzyFilter(Bc,
function(pb){return pb._commit.name+pb._commit.description});switch(this.ui.sortSelector.selection){case "RECENT":return ud.arr.sortBy(Bc,function(pb){return-pb._commit.timestamp});case "TEMPLATES":return Bc;case "MY PROJECTS":return ud.arr.filter(Bc,function(pb){return pb._commit.author.name===vd.name});case "PUBLISHED":return Bc}}},{key:"updateList",value:function(){var Bc=this;this.previews&&ud.fun.debounceNamed("update world list",150,function(){Bc.ui.worldList.items=Bc.sortAndFilterPreviews(Bc.previews)})()}},
{key:"displayWorlds",value:function(){var Bc=this,vd,pb,lb,Zb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mb){switch(Mb.nextAddress){case 1:return Bc.reset(),vd=Bc.ui,pb=vd.loadingLabel,pb.fit(),pb.animate({opacity:1,duration:300}),Mb.yield(Bc.db.latestCommits("world"),2);case 2:return lb=Mb.yieldResult,Mb.yield(ud.resource("part://partial freezing/world preview").read(),3);case 3:return Zb=Mb.yieldResult,Bc.previews=lb.map(function(ub){var rc=ud.morph({reactsToPointer:!1,fill:ud.Color.transparent,
extent:Zb.extent});rc._commit=ub;rc.displayPreview=function(){var Ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){if(1==Lb.nextAddress)return Ua=Zb.copy(),Ua._commit=ub,Ua.opacity=0,rc.addMorph(Ua),Ua.displayPreview(),Ua.position=ud.pt(0,0),Lb.yield(rc.whenRendered(),2);rc.layout=new ud.HorizontalLayout({autoResize:!0,reactToSubmorphAnimations:!0});Lb.jumpToEnd()})};return rc}),Mb.yield(pb.animate({opacity:0,duration:300}),4);case 4:Bc.updateList(),0==lb.length&&(Bc.ui.noWorldWarning.center=
Bc.innerBounds().center(),Bc.ui.noWorldWarning.animate({visible:!0,duration:300})),Mb.jumpToEnd()}})}},{key:"createNewProject",value:function(){document.location="/worlds/load?name=__newWorld__"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldDashboard"}},{key:"properties",get:function(){return{showCloseButton:{derived:!0,get:function(){return this.ui.closeButton.visible},set:function(Bc){this.ui.closeButton.visible=Bc}},db:{serialize:!1,get:function(){return ud.MorphicDB.default}},
ui:{derived:!0,get:function(){return{worldList:this.getSubmorphNamed("world list"),sortSelector:this.getSubmorphNamed("search selector"),searchField:this.getSubmorphNamed("search field"),closeButton:this.getSubmorphNamed("close button"),loadingLabel:this.getSubmorphNamed("loading label"),noWorldWarning:this.getSubmorphNamed("no world warning")}}}}}}],Ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldDashboard",version:"0.1.1-135"}}},{start:330,end:4417})}(ud.Morph);Vc=ud.WorldDashboard;ud.default=Vc;var Id=lively.FreezerRuntime.recorderFor("GrowingWorldList/index.js");Id.Morph=Ma;Id.touchInputDevice=se;Id.TilingLayout=xe;Id.arr=id;Id.pt=sc;Vc=function(Fb){var Ac=lively.FreezerRuntime.recorderFor("GrowingWorldList/index.js"),$c=Ac.hasOwnProperty("GrowingWorldList")&&"function"===typeof Ac.GrowingWorldList?Ac.GrowingWorldList:Ac.GrowingWorldList=function(Bc){Bc&&
Bc[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hd($c,Fb,[{key:"onLoad",value:function(){this.clipMode="auto"}},{key:"onScroll",value:function(Bc){hd._get(Object.getPrototypeOf($c.prototype),"onScroll",this).call(this,Bc);this.update()}},{key:"onChange",value:function(Bc){hd._get(Object.getPrototypeOf($c.prototype),"onChange",this).call(this,Bc);"extent"==Bc.prop&&this.update(!0)}},{key:"onHoverIn",value:function(Bc){this.clipMode=
"auto"}},{key:"onHoverOut",value:function(Bc){Id.touchInputDevice||(this.clipMode="hidden")}},{key:"update",value:function(Bc){var vd=this.items;if(vd&&0!=vd.length){var pb=this.scrollContainer,lb=pb.layout.spacing;pb.extent=this.extent;var Zb=this.ui,Mb=Zb.bufferTop;Zb=Zb.bufferBottom;Mb=Mb||pb.addMorph({fill:null,name:"buffer top",height:10});Zb=Zb||pb.addMorph({fill:null,name:"buffer bottom",height:10});Mb.width=Zb.width=this.width-100;pb.layout.disable();var ub=vd[0];lb=vd.slice(0,Math.floor(this.width/
(ub.width+lb))*(Math.ceil((this.scroll.y+this.height)/(ub.height+lb))+1)).filter(function(mb){return mb.owner!=pb});ub=this.scroll.y+2*this.height;for(var rc={},Ua=$jscomp.makeIterator(lb),Lb=Ua.next();!Lb.done;rc={$jscomp$loop$prop$item$2780:rc.$jscomp$loop$prop$item$2780},Lb=Ua.next())rc.$jscomp$loop$prop$item$2780=Lb.value,ub++,rc.$jscomp$loop$prop$item$2780.top=ub,pb.addMorph(rc.$jscomp$loop$prop$item$2780),rc.$jscomp$loop$prop$item$2780._initialized||rc.$jscomp$loop$prop$item$2780.whenRendered().then(function(mb){return function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gb){mb.$jscomp$loop$prop$item$2780._initialized=
!0;return Gb.yield(mb.$jscomp$loop$prop$item$2780.displayPreview(),0)})}}(rc));Bc&&(Mb.position=Id.pt(0,0),vd.forEach(function(mb,Gb){return mb.position=Id.pt(Gb+1,Gb+1)}),Zb.position=Id.pt(vd.length+2,vd.length+2));pb.layout.enable();if(Bc||0<lb.length)Zb.top=this.submorphBounds().height,pb.layout.apply()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrowingWorldList"}},{key:"properties",get:function(){return{scrollContainer:{get:function(){return this.getSubmorphNamed("scroll container")||
this.addMorph({name:"scroll container",fill:null,reactsToPointer:!1,renderOnGPU:!0,layout:new Id.TilingLayout({spacing:25,align:"center",autoResize:!0})})}},ui:{get:function(){return{bufferTop:this.getSubmorphNamed("buffer top"),bufferBottom:this.getSubmorphNamed("buffer bottom")}}},items:{after:["layout","scrollContainer"],set:function(Bc){this.setProperty("items",Bc);var vd=this.scrollContainer;vd.layout&&vd.layout.disable();var pb=this.ui,lb=pb.bufferTop;pb=pb.bufferBottom;Id.arr.withoutAll(vd.submorphs,
[].concat($jscomp.arrayFromIterable(Bc),[lb,pb])).forEach(function(Zb){return Zb.remove()});this.update(!0)}}}}}],Ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GrowingWorldList",version:"0.1.1-32"}}},{start:179,end:3777})}(Id.Morph);Vc=Id.GrowingWorldList;Id.default=Vc;var ie=lively.FreezerRuntime.recorderFor("SearchInputLine/index.js");
ie.InputLine=ne;ie.Color=Kc;ie.connect=Rc;ie.disconnectAll=Pd;ie.disconnect=Hb;ie.arr=id;ie.string=yd;Vc=function(Fb){var Ac=lively.FreezerRuntime.recorderFor("SearchInputLine/index.js"),$c=Ac.hasOwnProperty("SearchInputLine")&&"function"===typeof Ac.SearchInputLine?Ac.SearchInputLine:Ac.SearchInputLine=function(Bc){Bc&&Bc[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hd($c,Fb,[{key:"fuzzyMatch",value:function(Bc,vd){vd=void 0===
vd?this.parseInput():vd;if(vd.lowercasedTokens.every(function(lb){return Bc.toLowerCase().includes(lb)}))return!0;var pb=Bc.toLowerCase();return 3>=ie.arr.sum(vd.lowercasedTokens.map(function(lb){return ie.string.levenshtein(pb,lb)}))}},{key:"fuzzyFilter",value:function(Bc,vd){var pb=this;vd=void 0===vd?function(Zb){return Zb}:vd;var lb=this.parseInput();return ie.arr.filter(Bc,function(Zb){return pb.fuzzyMatch(vd(Zb),lb)})}},{key:"parseInput",value:function(){var Bc=Array.from(this.textString).reduce(function(pb,
lb){if("\\"===lb&&!pb.escaped)return pb.escaped=!0,pb;" "!==lb||pb.escaped?(pb.spaceSeen=!1,pb.current+=lb):(!pb.spaceSeen&&pb.current&&(pb.tokens.push(pb.current),pb.current=""),pb.spaceSeen=!0);pb.escaped=!1;return pb},{tokens:[],current:"",escaped:!1,spaceSeen:!1});Bc.current&&Bc.tokens.push(Bc.current);var vd=Bc.tokens.map(function(pb){return pb.toLowerCase()});return{tokens:Bc.tokens,lowercasedTokens:vd}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchInputLine"}}],Ac,
{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"SearchInputLine",version:"0.1.1-4"}}},{start:239,end:1834})}(ie.InputLine);Vc=ie.SearchInputLine;ie.default=Vc}}});