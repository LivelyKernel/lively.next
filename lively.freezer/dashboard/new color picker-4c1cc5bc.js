System.register("./__root_module__-896eff71.js kld-intersections ./index-344072cc.js ./color-picker-d23d43ea.js ./index-28129ea8.js ./index-21494e72.js".split(" "),function(){var $a,Vb,jc,Wc,wc,Ud,Kd,he,xd,gd,Ld,Pd,af,bf,Ve,Ad,xe,qc;return{setters:[function(td){$a=td.M;Vb=td.b;jc=td.C;Wc=td.g;wc=td.i;Ud=td.ac;Kd=td.aa;he=td.a2;xd=td.r;gd=td.d;Ld=td.bD;Pd=td.n;af=td.p;bf=td.ab;Ve=td.X;Ad=td.bm;xe=td.bn;qc=td.bl},function(){},function(){},function(){},function(){},function(){}],execute:function(){var td=
lively.FreezerRuntime.recorderFor("ColorPicker/index.js");td.Morph=$a;td.arr=Vb;td.Color=jc;td.signal=Wc;var be=function(ge){var ad=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),ie=ad.hasOwnProperty("ColorPicker")&&"function"===typeof ad.ColorPicker?ad.ColorPicker:ad.ColorPicker=function(Yb){Yb&&Yb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wc(ie,ge,[{key:"toggleHalos",value:function(Yb){this.withAllSubmorphsDo(function(zb){return zb.halosEnabled=
Yb});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(zb){return zb.halosEnabled=Yb})}},{key:"focusOnMorph",value:function(Yb,zb){var Rc=Yb&&Yb.world();Rc&&(Rc.halos().forEach(function(Mc){return Mc.remove()}),Rc.withTopBarDo(function(Mc){return Mc.setEditMode("Hand",!0)}));this._target=Yb;zb.isGradient?(this.ui.gradientControl.setGradient(zb,this),this.ui.colorTypeSelector.selection=zb.type):(this.color=zb,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",
value:function(){this.remove();var Yb=this._target&&this._target.world();Yb&&Yb.withTopBarDo(function(zb){return zb.setEditMode("Halo",!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":td.signal(this,"value",this.gradientValue);break;case "Solid":td.signal(this,"value",this.color)}}},{key:"switchMode",value:function(Yb){var zb=["linearGradient","radialGradient"].includes(Yb);this.ui.gradientControl.toggle(zb,
this);this.colorMode=Yb;this.update();this.confirm()}},{key:"enterColor",value:function(Yb){this.color=Yb;this.update(this.ui.colorEncoder);this.confirm()}},{key:"adjustColor",value:function(Yb){this.color=Yb;this.update();this.confirm()}},{key:"adjustOpacity",value:function(Yb){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[Yb]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(Yb){this.hsb=[Yb].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));
this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(Yb){var zb=$jscomp.makeIterator(Yb);Yb=zb.next().value;zb=zb.next().value;this.hsb=[this.hsb[0],zb,Yb,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(Yb){this.confirm()}},{key:"update",value:function(Yb){for(var zb=[],Rc=0;Rc<arguments.length;++Rc)zb[Rc-0]=arguments[Rc];var Mc=this;td.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(zb),[this.ui.colorTypeSelector])).forEach(function(tc){return tc.update(Mc)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(td.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(Yb){this.ui.gradientControl.gradientValue=Yb}},color:{derived:!0,get:function(){return td.Color.hsb.apply(td.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},
set:function(Yb){this.hsb=[].concat($jscomp.arrayFromIterable(Yb.toHSB()),[Yb.a])}},solidOnly:{derived:!0,set:function(Yb){var zb=this.ui.colorTypeSelector;Yb&&(zb.selection="Solid");zb.visible=!Yb}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),
gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],ad,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(td.Morph);be=td.ColorPicker;td.default=be;var Bd=lively.FreezerRuntime.recorderFor("GradientControl/index.js");Bd.Morph=$a;Bd.LinearGradient=Ud;Bd.RadialGradient=
Kd;Bd.Color=jc;Bd.rect=he;Bd.resource=xd;Bd.connect=gd;Bd.noUpdate=Ld;Bd.signal=Wc;Bd.num=Pd;Bd.arr=Vb;be=function(ge){var ad=lively.FreezerRuntime.recorderFor("GradientControl/index.js"),ie=ad.hasOwnProperty("GradientControl")&&"function"===typeof ad.GradientControl?ad.GradientControl:ad.GradientControl=function(Yb){Yb&&Yb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wc(ie,ge,[{key:"onKeyDown",value:function(Yb){wc._get(Object.getPrototypeOf(ie.prototype),
"onKeyDown",this).call(this,Yb);"Delete"==Yb.keyCombo&&this.removeStop(this.selectedStopControl)}},{key:"onMouseDown",value:function(Yb){wc._get(Object.getPrototypeOf(ie.prototype),"onMouseDown",this).call(this,Yb);"gradient preview"==Yb.targetMorph.name&&(Yb=Yb.positionIn(Yb.targetMorph).x/Yb.targetMorph.width,this.addStopAt(Yb))}},{key:"removeStop",value:function(Yb){3>this.gradientValue.stops.length||(Bd.arr.remove(this.gradientValue.stops,Yb.stop),this.refresh(),this.confirm())}},{key:"addStopAt",
value:function(Yb){var zb=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),Rc=$jscomp.makeIterator(Bd.arr.sortBy(Bd.arr.sortBy(zb,function(tc){return Math.abs(tc.offset-Yb)}).slice(0,2),function(tc){return tc.offset})),Mc=Rc.next().value;Rc=Rc.next().value;zb.push({color:Mc.color.interpolate((Yb-Mc.offset)/(Rc.offset-Mc.offset),Rc.color),offset:Yb});this.gradientValue.stops=Bd.arr.sortBy(zb,function(tc){return tc.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(Yb,
zb){(this.isLayoutable=this.visible=Yb)?this.gradientHalo.openInWorld():this.gradientHalo.remove();Yb||this.reset()}},{key:"reset",value:function(){this.gradientValue=null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Yb){return Yb.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(Yb){this.gradientValue=Yb.isGradient?new Bd.LinearGradient({stops:Yb.stops}):new Bd.LinearGradient({stops:[{color:Yb,offset:0},{color:Bd.Color.transparent,offset:1}]})}},{key:"initRadialGradient",
value:function(Yb,zb){zb=zb.innerBounds();this.gradientValue=Yb.isGradient?new Bd.RadialGradient({bounds:zb,stops:Yb.stops}):new Bd.RadialGradient({bounds:zb,stops:[{color:Yb,offset:0},{color:Bd.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(Yb,zb){this.gradientValue=Yb;this.gradientHalo.initFromPicker(zb)}},{key:"update",value:function(Yb){if(!this.isDisabled){var zb=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==Yb.colorMode||("linearGradient"==Yb.colorMode&&
this.initLinearGradient(this.gradientValue||Yb.color),"radialGradient"==Yb.colorMode&&this.initRadialGradient(this.gradientValue||Yb.color,Yb._target),this.gradientHalo.initFromPicker(Yb),this.gradientHalo.confirm());if(zb){var Rc=this.gradientValue.stops.find(function(Mc){return zb.stop==Mc});Rc&&(Rc.color=Yb.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(Yb){var zb=this.getSubmorphNamed("gradient preview").bounds().topEdge();return zb.start.interpolate(Yb.offset,zb.end).subXY(0,
5)}},{key:"confirm",value:function(){Bd.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var Yb=this.getSubmorphNamed("gradient"),zb=this.gradientValue.stops.map(function(Rc){return Object.assign({},Rc)});Yb.fill=new Bd.LinearGradient({vector:Bd.rect(0),stops:zb});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(Yb){var zb=$jscomp.makeIterator(Yb);Yb=zb.next().value;zb=zb.next().value/
this.getSubmorphNamed("gradient preview").width;this.adjustStop(Yb,zb)}},{key:"adjustStop",value:function(Yb,zb){Yb.offset=Bd.num.clamp(Yb.offset+zb,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(Yb){this.addMorph(Yb)}},{key:"getControlFor",value:function(Yb,zb){zb=void 0===zb?this:zb;var Rc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mc){if(1==Mc.nextAddress)return Mc.yield(Bd.resource("part://SystemWidgets/gradient editor/color stop").read(),2);Rc=Mc.yieldResult;
Rc.withAllSubmorphsDo(function(tc){return tc.halosEnabled=!1});zb.placeStop(Rc);Bd.connect(Rc,"select",zb,"selectStop");Bd.connect(Rc,"moveColorStop",zb,"moveStop");return Mc.return(Rc.forStop(Yb))})}},{key:"selectStop",value:function(Yb){this.deselectAllStopsExcept(Yb,this);this.deselectAllStopsExcept(Yb,this.gradientHalo);Bd.signal(this,"switchColor",Yb.stop.color)}},{key:"deselectAllStopsExcept",value:function(Yb,zb){Bd.noUpdate(function(){zb.getSubmorphsByStyleClassName("ColorStop").forEach(function(Rc){Rc.stop!=
Yb.stop?Rc.deselect():Rc.select()})})}},{key:"updateStopControls",value:function(Yb,zb){zb=void 0===zb?this:zb;var Rc=this,Mc,tc,Tc,fb,uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){switch(Rb.nextAddress){case 1:if(zb._active)return Rb.return();zb._active=!0;Mc=zb.getSubmorphsByStyleClassName("ColorStop");tc=$jscomp.makeIterator(Yb);Tc=tc.next();case 2:if(Tc.done){Rb.jumpTo(4);break}fb=Tc.value;if(uc=Mc.shift()){uc.forStop(fb);Rb.jumpTo(3);break}return Rb.yield(Rc.getControlFor(fb,
zb),3);case 3:Tc=tc.next();Rb.jumpTo(2);break;case 4:Bd.arr.invoke(Mc,"remove"),zb.getSubmorphsByStyleClassName("ColorStop").forEach(function(Fc){Fc.positionIn(zb)}),zb._active=!1,Rb.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,
get:function(){return this.stopControls.find(function(Yb){return Yb.isSelected})}}}}}],ad,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(Bd.Morph);be=Bd.GradientControl;Bd.default=be;var pe=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");pe.Morph=$a;pe.arr=
Vb;pe.resource=xd;pe.connect=gd;pe.signal=Wc;pe.pt=af;pe.RadialGradient=Kd;pe.LinearGradient=Ud;pe.Point=bf;be=function(ge){var ad=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),ie=ad.hasOwnProperty("GradientHalo")&&"function"===typeof ad.GradientHalo?ad.GradientHalo:ad.GradientHalo=function(Yb){Yb&&Yb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wc(ie,ge,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Yb){return Yb.remove()})}},
{key:"initFromPicker",value:function(Yb){var zb=Yb.gradientValue;this.picker=Yb;"linearGradient"==zb.type&&this.initFromLinearGradient(this.targetMorph,zb);"radialGradient"==zb.type&&this.initFromRadialGradient(this.targetMorph,zb);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(Yb,zb){Yb=Yb.innerBounds();zb=zb.vectorAsAngle();var Rc=Yb.center(),Mc=Math.max(Yb.height,Yb.width),tc=Rc.addPt(pe.Point.polar(Mc,zb));zb=Rc.subPt(pe.Point.polar(Mc,zb));Rc=$jscomp.makeIterator(Yb.lineIntersection(zb.lineTo(tc)));
zb=Rc.next().value;var Tc=Rc.next().value;Rc=pe.arr.min([zb,Tc],function(fb){return fb.dist(tc)});this.originPoint=Rc==zb?Tc:zb;this.directionPoint=Rc;this.orthogonalDist=pe.arr.min(Yb.edges(),function(fb){return fb.distanceFromLine(Tc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(Yb,zb){Yb=Yb.innerBounds().relativeToAbsPoint(zb.focus);var Rc=zb.bounds;zb=Rc.height;Rc=Rc.width;this.originPoint=Yb;this.directionPoint=Yb.addXY(0,zb/2);this.orthogonalDist=Rc/2;this.alignWithTarget()}},
{key:"alignWithTarget",value:function(){var Yb=this.ui,zb=Yb.directionHandle,Rc=Yb.orthogonalHandle,Mc=Yb.colorStopWrapper;Yb.originHandle.center=pe.pt(0);zb.center=pe.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);Mc.width=this.width;zb.center=pe.pt(this.width,0);Rc.center=pe.pt(0,this.orthogonalDist);0<this.orthogonalDist?(Mc.tilted=1,Mc.position=pe.pt(this.width/2,this.height/4-1)):(Mc.tilted=0,Mc.position=pe.pt(this.width/2,-this.height/4+1));this.globalPosition=this.targetMorph.worldPoint(this.originPoint).subPt($world.scroll);
this.rotation=this.angle}},{key:"relayout",value:function(){this.alignWithTarget()}},{key:"confirm",value:function(){var Yb=this.picker.ui.gradientControl;"linearGradient"==Yb.gradientValue.type&&(Yb.gradientValue.vector=this.angle);if("radialGradient"==Yb.gradientValue.type){var zb=Yb.gradientValue,Rc=2*Math.abs(this.orthogonalDist),Mc=2*this.originPoint.dist(this.directionPoint);zb.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());zb.bounds=pe.pt(0,0).extent(pe.pt(Rc,Mc));zb.angle=
this.angle}Yb.confirm();this.refresh(Yb,this.targetMorph);this.alignWithTarget()}},{key:"normalize",value:function(Yb){return this.getGlobalTransform().transformDirection(Yb)}},{key:"moveOriginHandle",value:function(Yb){Yb=this.normalize(Yb.state.dragDelta);this.originPoint=this.originPoint.addPt(Yb);this.confirm()}},{key:"moveDirectionHandle",value:function(Yb){Yb=this.normalize(Yb.state.dragDelta);this.directionPoint=this.directionPoint.addPt(Yb);this.confirm()}},{key:"moveOrthogonalHandle",value:function(Yb){Yb=
this.normalize(Yb.state.dragDelta);this.orthogonalDist-=Yb.dotProduct(pe.Point.polar(1,this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(Yb){var zb=$jscomp.makeIterator(Yb);Yb=zb.next().value;zb=zb.next().value;this.picker.ui.gradientControl.adjustStop(Yb,zb/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(Yb,zb){zb=Yb.gradientValue;this.alignWithTarget();Yb.updateStopControls(zb.stops,this)}},{key:"placeStop",value:function(Yb){this.get("color stop wrapper").addMorph(Yb)}},
{key:"selectStop",value:function(Yb){this.picker.ui.gradientControl.selectStop(Yb)}},{key:"getPositionFor",value:function(Yb){var zb=this.getSubmorphNamed("color stop wrapper"),Rc=zb.innerBounds().bottomEdge();return Rc.start.interpolate(Yb.offset,Rc.end).subXY(0,5).subPt(zb.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),
directionHandle:this.getSubmorphNamed("direction handle"),orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],ad,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",
version:"0.1.1-141"}}},{start:300,end:5921})}(pe.Morph);be=pe.GradientHalo;pe.default=be;var Se=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");Se.Morph=$a;Se.pt=af;Se.Color=jc;Se.LinearGradient=Ud;Se.signal=Wc;Se.num=Pd;be=function(ge){var ad=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),ie=ad.hasOwnProperty("OpacityPicker")&&"function"===typeof ad.OpacityPicker?ad.OpacityPicker:ad.OpacityPicker=function(Yb){Yb&&Yb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wc(ie,ge,[{key:"confirm",value:function(){Se.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function(Yb){var zb=this.get("slider").width;this.sliderPosition=Se.pt(0,Yb.positionIn(this).y-zb/2);this.confirm()}},{key:"onDrag",value:function(Yb){var zb=this.get("slider").width;this.sliderPosition=Se.pt(0,Yb.positionIn(this).y-zb/2);this.confirm()}},{key:"update",value:function(Yb){this.alpha=Yb.color.a;this.getSubmorphNamed("opacity gradient").fill=new Se.LinearGradient({stops:[{offset:0,
color:Yb.color.withA(0)},{offset:1,color:Yb.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return Se.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(Yb){this.alpha=Se.num.clamp(Yb.y/(this.height-10),0,1);this.refresh()}}}}}],ad,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(Se.Morph);be=Se.OpacityPicker;Se.default=be;var nc=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");nc.Morph=$a;nc.Color=jc;nc.signal=Wc;nc.noUpdate=Ld;nc.num=Pd;be=function(ge){var ad=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),ie=ad.hasOwnProperty("ColorEncoder")&&
"function"===typeof ad.ColorEncoder?ad.ColorEncoder:ad.ColorEncoder=function(Yb){Yb&&Yb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wc(ie,ge,[{key:"update",value:function(Yb){this.currentColor=Yb.hsb;this.refresh()}},{key:"refresh",value:function(){var Yb=this,zb=this.currentColor;nc.noUpdate(function(){({Hex:function(){return Yb.updateHex(zb)},RGB:function(){return Yb.updateRGB(zb)},HSL:function(){return Yb.updateHSL(zb)},
HSB:function(){return Yb.updateHSB(zb)},CSS:function(){return Yb.updateCSS(zb)}})[Yb.encodingMode]()})}},{key:"updateHex",value:function(Yb){Yb=nc.Color.hsb.apply(nc.Color,$jscomp.arrayFromIterable(Yb)).withA(nc.num.roundTo(Yb[3],.01));var zb=this.getSubmorphNamed("hex input"),Rc=this.getSubmorphNamed("hex opacity control");zb.input=Yb.toHexString().toUpperCase();Rc.number=Yb.a}},{key:"updateRGB",value:function(Yb){var zb=this.getSubmorphNamed("first value"),Rc=this.getSubmorphNamed("second value"),
Mc=this.getSubmorphNamed("third value"),tc=this.getSubmorphNamed("opacity control"),Tc=$jscomp.makeIterator(nc.Color.hsb.apply(nc.Color,$jscomp.arrayFromIterable(Yb)).toTuple()),fb=Tc.next().value,uc=Tc.next().value;Tc=Tc.next().value;Yb=Yb[3];zb.number=255*fb;Rc.number=255*uc;Mc.number=255*Tc;tc.number=Yb}},{key:"updateHSL",value:function(Yb,zb){zb=void 0===zb?!0:zb;var Rc=this.getSubmorphNamed("first value"),Mc=this.getSubmorphNamed("second value"),tc=this.getSubmorphNamed("third value"),Tc=this.getSubmorphNamed("opacity control"),
fb=$jscomp.makeIterator(Yb),uc=fb.next().value,Rb=fb.next().value;fb=fb.next().value;tc.number=zb?1-fb:fb;Rc.number=uc;Mc.number=Rb;Tc.number=Yb[3]}},{key:"updateHSB",value:function(Yb){this.updateHSL(Yb,!1)}},{key:"updateCSS",value:function(Yb){var zb=this.getSubmorphNamed("css input");Yb=nc.Color.hsb.apply(nc.Color,$jscomp.arrayFromIterable(Yb)).withA(nc.num.roundTo(Yb[3],.01));zb.input=Yb.toCSSString()}},{key:"confirm",value:function(){var Yb=this;({Hex:function(){return Yb.confirmHex()},RGB:function(){return Yb.confirmRGB()},
HSL:function(){return Yb.confirmHSL()},HSB:function(){return Yb.confirmHSB()},CSS:function(){return Yb.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var Yb=this.getSubmorphNamed("hex input"),zb=this.getSubmorphNamed("hex opacity control");Yb=nc.Color.rgbHex(Yb.input).withA(zb.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Yb.toHSB()),[Yb.a]);nc.signal(this,"colorEntered",Yb)}},{key:"confirmRGB",value:function(){var Yb=this.getSubmorphNamed("first value"),
zb=this.getSubmorphNamed("second value"),Rc=this.getSubmorphNamed("third value"),Mc=this.getSubmorphNamed("opacity control");Yb=nc.Color.rgba(Yb.number,zb.number,Rc.number,Mc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Yb.toHSB()),[Yb.a]);nc.signal(this,"colorEntered",Yb)}},{key:"confirmHSL",value:function(){var Yb=this.getSubmorphNamed("first value"),zb=this.getSubmorphNamed("second value"),Rc=this.getSubmorphNamed("third value"),Mc=this.getSubmorphNamed("opacity control");Yb=nc.Color.hsb(Yb.number,
zb.number,1-Rc.number).withA(Mc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Yb.toHSB()),[Yb.a]);nc.signal(this,"colorEntered",Yb)}},{key:"confirmHSB",value:function(){var Yb=this.getSubmorphNamed("first value"),zb=this.getSubmorphNamed("second value"),Rc=this.getSubmorphNamed("third value"),Mc=this.getSubmorphNamed("opacity control");Yb=nc.Color.hsb(Yb.number,zb.number,Rc.number).withA(Mc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Yb.toHSB()),[Yb.a]);nc.signal(this,
"colorEntered",Yb)}},{key:"confirmCSS",value:function(){var Yb=this.getSubmorphNamed("css input");Yb=nc.Color.fromString(Yb.input);this.currentColor=[].concat($jscomp.arrayFromIterable(Yb.toHSB()),[Yb.a]);nc.signal(this,"colorEntered",Yb)}},{key:"selectEncoding",value:function(Yb){this.encodingMode=Yb;this.submorphs.map(function(Rc){return Rc.visible=Rc.isLayoutable=!1});var zb=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[Yb]);
zb.visible=zb.isLayoutable=!0;"RGB"==Yb&&[zb.getSubmorphNamed("first value"),zb.getSubmorphNamed("second value"),zb.getSubmorphNamed("third value")].forEach(function(Rc){Object.assign(Rc,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(Yb)&&(Object.assign(zb.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[zb.getSubmorphNamed("second value"),zb.getSubmorphNamed("third value")].forEach(function(Rc){Object.assign(Rc,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:nc.Color.white}}}}],ad,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorEncoder",version:"0.1.1-43"}}},{start:211,end:5572})}(nc.Morph);be=nc.ColorEncoder;nc.default=
be;var $c=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");$c.HTMLMorph=Ve;$c.arr=Vb;$c.materialDesignColors=Ad;$c.webSafeColors=xe;$c.flatDesignColors=qc;$c.Color=jc;$c.signal=Wc;be=function(ge){var ad=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),ie=ad.hasOwnProperty("ColorPaletteView")&&"function"===typeof ad.ColorPaletteView?ad.ColorPaletteView:ad.ColorPaletteView=function(Yb){Yb&&Yb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wc(ie,ge,[{key:"test",value:function(){this.showPalette($c.materialDesignColors.map(function(Yb){return $c.Color.rgbHex(Yb)}))}},{key:"selectPalette",value:function(Yb){var zb={"Flat Design":$c.flatDesignColors,Material:$c.materialDesignColors,"Web Safe":$c.webSafeColors};zb[Yb]&&this.showPalette(zb[Yb].map(function(Rc){return $c.Color.rgbHex(Rc)}))}},{key:"onMouseDown",value:function(Yb){wc._get(Object.getPrototypeOf(ie.prototype),"onMouseDown",this).call(this,Yb);(Yb=Yb.domEvt.target.dataset.color)&&
$c.signal(this,"colorSelected",$c.Color.fromString(Yb))}},{key:"showPalette",value:function(Yb){this.html='<div class="palette-container">\n      '+Yb.map(function(zb){return'<div class="color-cell" data-color="'+zb+'" style="background: '+zb+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],ad,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}($c.HTMLMorph);be=$c.ColorPaletteView;$c.default=be}}});