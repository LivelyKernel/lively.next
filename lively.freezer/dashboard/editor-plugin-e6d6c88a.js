System.register(["./__root_module__-aa47e4cd.js","kld-intersections","./editor-plugin-0f37a49e.js","./index-f9b193f7.js","./index-b8a9cfe8.js"],function(Ca){var ub,Tb,lc,mc,Zd,id,ce,kd,$c,Cd,Fd,pe,Xd,nd,eb,Hb,Cc,qc,ld,wd,Xc,gd,bc,ad;return{setters:[function(ed){ub=ed.aq;Tb=ed.bz;lc=ed.bA;mc=ed.bB;Zd=ed.E;id=ed.ao;ce=ed.aV;kd=ed.s;$c=ed.a9;Cd=ed.bm;Fd=ed.a4;pe=ed._;Xd=ed.bC;nd=ed.bt},function(){},function(ed){eb=ed.p;Hb=ed.d;Cc=ed.a;qc=ed.r;ld=ed.C},function(ed){wd=ed.s},function(ed){Xc=ed.localInterface;
gd=ed.systemInterfaceNamed;bc=ed.serverInterfaceFor;ad=ed.l2lInterfaceFor}],execute:function(){var ed=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");ed.warnStyle={"border-bottom":"2px dotted orange"};ed.errorStyle={"background-color":"red"};var Id=function(Bc){var xc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),kc=xc.hasOwnProperty("JavaScriptChecker")&&"function"===typeof xc.JavaScriptChecker?xc.JavaScriptChecker:xc.JavaScriptChecker=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(kc,Bc,[{key:"uninstall",value:function(Q){var ea=Q.text||Q;(ea.markers||[]).forEach(function(Ga){return Ga.id.startsWith("js-checker-")&&ea.removeMarker(Ga)});ea.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(Q,ea){return[].concat($jscomp.arrayFromIterable(Q.embeddedMorphMap.values())).find(function(Ga){return ea.containsPosition(Ga.anchor.position)})}},{key:"onDocumentChange",value:function(Q,
ea,Ga){var Ua=ea.document;try{var fc=Ga.parse()}catch(Fb){fc=Fb}fc&&(Q=(ea.markers||[]).filter(function(Fb){return Fb.id.startsWith("js-checker-")}),Ga=Ga.undeclaredVariables().map(function(Fb,Va){var Ab=Fb.start;Fb=Fb.end;Ab=Ua.indexToPosition(Ab);Fb=Ua.indexToPosition(Fb);return ea.addMarker({id:"js-checker-"+Va,style:ed.warnStyle,range:{start:Ab,end:Fb},type:"js-undeclared-var"})}),Q.slice(Ga.length).forEach(function(Fb){return ea.removeMarker(Fb)}),fc.parseError?(Q=fc.parseError.loc,Ga=Q.column,
Q=Q.line-1,fc=Ua.indexToPosition(fc.parseError.pos),Ga=fc.column,Q=fc.row,fc={start:{column:Ga-1,row:Q},end:{column:Ga+1,row:Q}},this.hasEmbeddedMorphInRange(ea,fc)||ea.addMarker({id:"js-syntax-error",range:fc,style:ed.errorStyle,type:"js-syntax-error"})):ea.removeMarker("js-syntax-error"))}}],[{key:"className",get:function(){return"JavaScriptChecker"}}],xc,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),hc=Id=ed.JavaScriptChecker;ed.default=Id;var Qb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");Qb.query=Tb;Qb.fuzzyParse=lc;Qb.acorn=mc;Qb.custom=Zd;var xb=function(Bc){var xc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),kc=xc.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof xc.JavaScriptNavigator?xc.JavaScriptNavigator:xc.JavaScriptNavigator=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(kc,Bc,[{key:"ensureAST",value:function(Q){return this.parse(Q.textString)}},{key:"parse",value:function(Q){return Qb.fuzzyParse(Q)}},{key:"move",value:function(Q,ea){var Ga=!!ea.activeMark||!ea.selection.isEmpty(),Ua=ea.selection,fc=ea.positionToIndex(Ua.lead);Q=this[Q](ea.textString,fc);Q=ea.indexToPosition(Q);Ua.lead=Q;Ga||(Ua.anchor=Q);ea.scrollCursorIntoView()}},{key:"forwardSexp",value:function(Q){this.move("_forwardSexp",
Q)}},{key:"backwardSexp",value:function(Q){this.move("_backwardSexp",Q)}},{key:"backwardUpSexp",value:function(Q){this.move("_backwardUpSexp",Q)}},{key:"forwardDownSexp",value:function(Q){this.move("_forwardDownSexp",Q)}},{key:"_forwardSexp",value:function(Q,ea){Q=this.parse(Q);Q=Qb.custom.findNodesIncluding(Q,ea).reverse().find(function(Ua){return Ua.end!==ea});if(!Q)return ea;if("BlockStatement"===Q.type){var Ga=Q.body.find(function(Ua){return Ua.start>ea});if(Ga)return Ga.start}return Q.end}},
{key:"_backwardSexp",value:function(Q,ea){Q=this.parse(Q);Q=Qb.custom.findNodesIncluding(Q,ea).reverse().find(function(Ua){return Ua.start!==ea});if(!Q)return ea;if("BlockStatement"===Q.type){var Ga=Q.body.slice().reverse().find(function(Ua){return Ua.end<ea});if(Ga)return Ga.end}return Q?Q.start:ea}},{key:"_backwardUpSexp",value:function(Q,ea){Q=this.parse(Q);return(Q=Qb.custom.findNodesIncluding(Q,ea).reverse().find(function(Ga){return Ga.start!==ea}))?Q.start:ea}},{key:"_forwardDownSexp",value:function(Q,
ea){Q=this.parse(Q);return(Q=Qb.custom.findNodeAfter(Q,ea,function(Ga,Ua){return Ua.start>ea}))?Q.node.start:ea}},{key:"markDefun",value:function(Q){var ea=this.rangeForFunctionOrDefinition(Q.textString,[Q.positionToIndex(Q.selection.range.start),Q.positionToIndex(Q.selection.range.end)]);ea&&Q.execCommand("expandRegion",{start:ea[0],end:ea[1]})}},{key:"rangeForNodesMatching",value:function(Q,ea,Ga){Q=this.parse(Q);return(ea=Qb.custom.findNodesIncluding(Q,ea).reverse().find(Ga))?[ea.start,ea.end]:
null}},{key:"rangeForFunctionOrDefinition",value:function(Q,ea){var Ga=ea[0]===ea[1];return this.rangeForNodesMatching(Q,ea[1],function(Ua){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Ua.type)&&(Ga&&Ua.end!==ea[1]||!Ga&&Ua.start<ea[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(Q,ea){"number"!==typeof ea&&(ea=Q.positionToIndex(ea));Q=this.ensureAST(Q);var Ga=Qb.query.nodesAt(ea,Q).reverse(),Ua=Ga.find(function(Fb){return"Identifier"===
Fb.type});if(!Ua&&((Ga=Ga[0])&&Ga.type.includes("Specifier")&&Ga.local&&"Identifier"===Ga.local.type&&(Ua=Ga.local),!Ua))return;ea=(Ga=Qb.query.findDeclarationClosestToIndex(Q,Ua.name,ea))?Qb.query.scopeAtIndex(Q,Ga.start):Qb.query.scopeAtIndex(Q,ea);var fc=Qb.query.findReferencesAndDeclsInScope(ea,Ua.name).refs;return{parsed:Q,scope:ea,id:Ua,name:Ua.name,decl:Ga,refs:fc}}},{key:"expandRegion",value:function(Q,ea,Ga,Ua){function fc(td){td=Q.positionToIndex({column:0,row:Va.row});return{range:[td+
Ab.start,td+Ab.start+Ab.value.length],prev:Ua}}var Fb=Ua.range[0]!==Ua.range[1],Va=Q.indexToPosition(Ua.range[0]),Ab=Q.tokenAt(Va);if(!Fb&&Ab&&["keyword","identifier"].includes(Ab.type))return fc();Ga=Ga||this.parse(ea);ea=Qb.query.nodesAtIndex(Ga,Ua.range[0]).reverse().find(function(td){return td.start<Ua.range[0]||td.end>Ua.range[1]});if(!ea)return Ua;Ga=ea.start;Fb=ea.end;return"Literal"===ea.type&&(ea.raw||"").match(/^['"`]/)&&Ua.range[0]!==ea.start&&Ua.range[1]!==ea.end&&(ea.start+1<Ua.range[0]||
ea.end-1>Ua.range[1])?{range:[Ga+1,Fb-1],prev:Ua}:{range:[Ga,Fb],prev:Ua}}},{key:"contractRegion",value:function(Q,ea,Ga,Ua){return Ua.prev||Ua}}],[{key:"className",get:function(){return"JavaScriptNavigator"}}],xc,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);
Id=xb=Qb.JavaScriptNavigator;Qb.default=xb;var Nb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");Nb.addIndexToTextPos=function(Bc,xc,kc){return Bc.indexToPosition(Bc.positionToIndex(xc)+kc)};Nb.connect=id;Nb.disconnect=ce;Nb.string=kd;Nb.KeyHandler=$c;Nb.Range=Cd;xb=function(Bc){var xc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),kc=xc.hasOwnProperty("Snippet")&&"function"===typeof xc.Snippet?xc.Snippet:xc.Snippet=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(kc,Bc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){Q=void 0===Q?{trigger:null,expansion:""}:Q;var ea=Q.expansion;this.trigger=Q.trigger;this.expansion=ea;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(Q){this.isExpanding&&(this.textMorph=Q,Nb.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(Q){this.isExpanding&&
(Nb.disconnect(Q,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var Q=this.expansionState,ea=Q.startAnchor,Ga=Q.endAnchor;Q.isExpanding?Nb.Range.fromPositions(ea.position,Ga.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var Q=this.textMorph;if(Q){var ea=this.expansionState||{},Ga=ea.marker,Ua=ea.startAnchor,fc=ea.endAnchor;ea=ea.steps;
Ua&&Q.removeAnchor(Ua);fc&&Q.removeAnchor(fc);Ga&&Q.removeMarker(Ga);ea.forEach(function(Fb){return Q.removeAnchor(Fb.anchor)})}this.expansionState={stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};Q&&Q.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(Q){var ea=[],Ga=0;Nb.string.reMatches(Q,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Ua){var fc=Ua.start,Fb=Ua.end;Ua=Ua.match;var Va=
"";Ua.startsWith("${")?(Va=$jscomp.makeIterator(Ua.match(/^\$\{([0-9]+):([^\}]*)\}/)),Va.next(),Ua=Va.next().value,Va=Va.next().value,Ua=Number(Ua)):Ua=Number(Ua.replace(/^\$/,""));Q=Q.slice(0,fc-Ga)+Va+Q.slice(Fb-Ga);ea[Ua]={index:fc-Ga,prefill:Va,anchor:null};Ga+=Fb-fc-Va.length});return{steps:ea,expansion:Q}}},{key:"expandAtCursor",value:function(Q){var ea=Q.selection,Ga=Q.cursorPosition.column,Ua=this.expansion;this.trigger&&(Ga-=this.trigger.length);if(Ga=Math.max(0,Ga))Ua=Nb.string.lines(Ua),
Ua=[Ua[0]].concat($jscomp.arrayFromIterable(Ua.slice(1).map(function(Pc){return Nb.string.indent(Pc," ",Ga)}))),Ua=Ua.join("\n");var fc=this.createExpansionSteps(Ua);Ua=fc.expansion;fc=fc.steps;this.trigger&&ea.growLeft(this.trigger.length);ea.text=Ua;var Fb=ea.start;Ua=ea.end;ea.collapseToEnd();if(fc.length){var Va=Nb.string.newUUID();fc.forEach(function(Pc,Vb){return Pc.anchor=Q.addAnchor(Object.assign({id:"snippet-step-"+Vb+"-"+Va},Nb.addIndexToTextPos(Q,Fb,Pc.index)))});var Ab=Q.addAnchor(Object.assign({id:"snippet-start-"+
Va},Fb,{insertBehavior:"stay"})),td=Q.addAnchor(Object.assign({id:"snippet-end-"+Va},Ua));this.expansionState={marker:Q.addMarker({id:"snippet-marker-"+Va,get range(){return{start:Ab.position,end:td.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:Ab,endAnchor:td,stepIndex:0,steps:fc,isExpanding:!0};Q.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var Q=
this.expansionState,ea=Q.steps,Ga=this.textMorph;if(Q.isExpanding&&Ga){Ga=Ga.selection;Q=ea[Q.stepIndex];var Ua=Q.prefill;Ga.lead=Ga.anchor=Q.anchor.position;Ga.growRight(Ua.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=ea.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(Q,ea){ea=Q.positionToIndex(Q.cursorPosition);return Q.textString.slice(ea-this.trigger.length,ea)===this.trigger}},{key:"tryTrigger",
value:function(Q,ea){if(!this.canExpand(Q,Q.cursorPosition))return!1;this.expandAtCursor(Q);return!0}},{key:"getCommands",value:function(Q){var ea=this;return Q.concat([{name:"[snippet] next expansion step",exec:function(Ga){ea.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(Ga){ea.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(Q){return Q.concat(Nb.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],
[{key:"className",get:function(){return"Snippet"}}],xc,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);Nb.Snippet=xb;Nb.Snippet=xb;Nb.Snippet=xb;var kb=[{name:"get snippets",exec:function(Bc){return Bc.pluginCollect("getSnippets",[])}}];Nb.snippetCommands=kb;Nb.snippetCommands=
kb;Nb.snippetCommands=kb;var Db=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");Db.buildEvalOpts=function(Bc,xc){return Bc.plugins.find(function(kc){return kc.isJSEditorPlugin}).sanatizedJsEnv(xc)};Db.Snippet=xb;kb=function(Bc){var xc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),kc=xc.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof xc.ModuleTopLevelVarCompleter?xc.ModuleTopLevelVarCompleter:xc.ModuleTopLevelVarCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(kc,Bc,[{key:"compute",value:function(Q,ea){var Ga,Ua,fc,Fb,Va,Ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(td){if(1==td.nextAddress){Ua=(Ga=Q.pluginFind(function(Pc){return Pc.isJSEditorPlugin}))&&Ga.systemInterface();if(!Ua)return td.return([]);fc=Db.buildEvalOpts(Q);Fb=fc.targetModule;return"local"===Ua.name?(Va=Object.getOwnPropertyNames(Ua.getModule(Fb).recorder),td.jumpTo(2)):td.yield(Ua.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Fb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=td.nextAddress){Ab=td.yieldResult;if(Ab.isError)return td.return([]);Va=JSON.parse(Ab.value)}Va=Va.filter(function(Pc){return!Pc.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(Pc)});return td.return(Va.map(function(Pc){return{priority:1100,completion:Pc}}))})}}],[{key:"className",get:function(){return"ModuleTopLevelVarCompleter"}}],xc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:222,
end:1678})}(void 0);Db.ModuleTopLevelVarCompleter=kb;Db.ModuleTopLevelVarCompleter=kb;Db.ModuleTopLevelVarCompleter=kb;kb=function(Bc){var xc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),kc=xc.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof xc.DynamicJavaScriptCompleter?xc.DynamicJavaScriptCompleter:xc.DynamicJavaScriptCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(kc,
Bc,[{key:"isValidPrefix",value:function(Q){return/\.[a-z0-9_]*$/i.test(Q)}},{key:"isMethodCallCompletion",value:function(Q){return Q.endsWith(")")&&0<Q.indexOf("(")}},{key:"isValidIdentifier",value:function(Q){if("string"!==typeof Q)return!1;this.isMethodCallCompletion(Q)&&(Q=Q.slice(0,Q.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(Q)?!0:!1}},{key:"wrapInBrackets",value:function(Q){if(!isNaN(Number(Q))||Q.startsWith("Symbol."))return"["+Q+"]";var ea="";this.isMethodCallCompletion(Q)&&(ea=Q.slice(Q.indexOf("(")),
Q=Q.slice(0,Q.indexOf("(")));return'["'+Q.replace(/"/g,'\\"')+'"]'+ea}},{key:"compute",value:function(Q){var ea=this,Ga,Ua,fc,Fb,Va,Ab,td,Pc,Vb,Oa,Qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress){Ga=Q.selection;Ga.isEmpty()?(Ua=Q.getLine(Ga.lead.row),Ua=Ua.slice(Ua.lastIndexOf(":")+1,Ga.lead.column)):Ua=Ga.text.slice(Math.max(0,Ga.text.indexOf(":")),0);if(!ea.isValidPrefix(Ua))return Aa.return([]);Fb=(fc=Q.pluginFind(function(za){return za.isJSEditorPlugin}))&&
fc.systemInterface();if(!Fb)return Aa.return([]);Va=Db.buildEvalOpts(Q);return Aa.yield(Fb.dynamicCompletionsForPrefix(Va.targetModule,Ua,Va),2)}Ab=Aa.yieldResult;td=Ab.isError;Pc=Ab.value;Vb=Ab.completions;Oa=Ab.prefix;if(td)return console.warn("javascript completer encountered error: "+(Pc.stack||Pc)),Aa.return([]);Vb.reduce(function(za,Ka){Ka=$jscomp.makeIterator(Ka);Ka.next();Ka=Ka.next().value;return za+Ka.length},0);Qa=Vb.reduce(function(za,Ka,tb){Ka=$jscomp.makeIterator(Ka);var yb=Ka.next().value;
Ka=Ka.next().value;return za.concat(Ka.map(function(zc){var pd=ea.isValidIdentifier(zc);return{info:yb,completion:zc,prefix:pd?Oa:"."+Oa,customInsertionFn:pd?ea.isMethodCallCompletion(zc)?function(Yd,Ge,Sc,ye){Ge=ye.start;ye=ye.end;Yd=Yd.replace(/\((.*)\)/,function(Gd){return"("+Gd.slice(1,-1).split(", ").map(function(Sb,oa){return"${"+oa+":"+Sb+"}"}).join(", ")+")"});Yd=new Db.Snippet({expansion:Yd});Sc.replace({start:Ge,end:ye},"");Yd.expandAtCursor(Sc)}:null:function(Yd,Ge,Sc,ye){Yd=ye.start;ye=
ye.end;Ge={row:Yd.row,column:Yd.column-1};ye="."===Sc.textInRange({start:Ge,end:Yd})?{start:Ge,end:ye}:{start:Yd,end:ye};Sc.replace(ye,ea.wrapInBrackets(zc))}}}))},[]);Qa.forEach(function(za,Ka){return Object.assign(za,{priority:2E3+Qa.length-Ka})});return Aa.return(Qa)})}}],[{key:"className",get:function(){return"DynamicJavaScriptCompleter"}}],xc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);Db.DynamicJavaScriptCompleter=kb;Db.DynamicJavaScriptCompleter=kb;Db.DynamicJavaScriptCompleter=kb;Db.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
kb=function(Bc){var xc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),kc=xc.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof xc.JavaScriptKeywordCompleter?xc.JavaScriptKeywordCompleter:xc.JavaScriptKeywordCompleter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(kc,Bc,[{key:"compute",value:function(Q,ea){return Db.keywords.map(function(Ga){return{completion:Ga,priority:0}})}}],
[{key:"className",get:function(){return"JavaScriptKeywordCompleter"}}],xc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);Db.JavaScriptKeywordCompleter=kb;Db.JavaScriptKeywordCompleter=kb;Db.JavaScriptKeywordCompleter=kb;kb=[new Db.DynamicJavaScriptCompleter,new Db.JavaScriptKeywordCompleter,
new Db.ModuleTopLevelVarCompleter];Db.completers=kb;Db.completers=kb;Db.completers=kb;var Rb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");Rb.Snippet=xb;var vc=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],
["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["fun","function ${0:functionName}($1) {$2}"],
["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];Rb.snippets=vc;Rb.snippets=vc;Rb.snippets=vc;var jc=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");jc.getEvalEnv=function(Bc){return(Bc=Bc.pluginFind(function(xc){return xc.isJSEditorPlugin}))?Bc.evalEnvironment:null};jc.setEvalEnv=function(Bc,xc){(Bc=Bc.pluginFind(function(kc){return kc.isJSEditorPlugin}))&&Object.assign(Bc.evalEnvironment,xc);return Bc.evalEnvironment};jc.pToI=function(Bc,xc){return Bc.positionToIndex(xc)};
jc.iToP=function(Bc,xc){return Bc.indexToPosition(xc)};jc.arr=Fd;jc.promise=pe;jc.string=kd;jc.show=wd;jc.Range=Cd;jc.query=Tb;jc.BaseVisitor=Xd;Rb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(Bc,xc){xc=void 0===xc?{varName:null,position:null}:xc;var kc,Q,ea,Ga,Ua,fc,Fb,Va,Ab,td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pc){switch(Pc.nextAddress){case 1:kc=xc;Q=kc.varName;
ea=kc.position;if(!Q){ea||(ea=Bc.cursorPosition);Ga=Bc.pluginInvokeFirst("getNavigator");Ua=Ga.ensureAST(Bc);fc=jc.query.nodesAt(Bc.positionToIndex(ea),Ua).reverse().find(function(Vb){return"Identifier"===Vb.type});if(!fc)return Bc.showError(Error("no identifier found!")),Pc.return(!0);Q=fc.name}xc=Bc.pluginFind(function(Vb){return Vb.isJSEditorPlugin}).sanatizedJsEnv();Fb='lively.modules.module("'+xc.targetModule+'").undefine("'+Q+'")';Pc.setCatchFinallyBlocks(2);return Pc.yield(Bc.doEval(null,xc,
Fb),4);case 4:Va=Pc.yieldResult;Ab=Va.error?Va.error:Va.isError?Va.value:null;Pc.leaveTryBlock(3);break;case 2:Ab=td=Pc.enterCatchBlock();case 3:return Ab?Bc.showError(Ab):Bc.setStatusMessage(Q+" undefined"),Pc.return(!0)}})}},{name:"change doitContext",exec:function(Bc){var xc,kc,Q,ea,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){if(1==Ua.nextAddress)return xc=$jscomp,kc=xc.makeIterator,Ua.yield(Bc.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(fc){return!fc.isUsedAsEpiMorph()}}),2);Q=kc.call(xc,Ua.yieldResult);if(ea=Q.next().value)Ga="reset"===ea,Bc.doitContext=Ga?null:ea,Bc.setStatusMessage(Ga?"doitContext is now\n"+ea:"doitContext reset");return Ua.return(!0)})}},{name:"change eval backend",exec:function(Bc,xc){xc=void 0===xc?{backend:void 0}:xc;var kc,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress)return kc=xc,Q=kc.backend,void 0!==Q?ea.jumpTo(2):ea.yield(Bc.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=ea.nextAddress&&(Q=ea.yieldResult,!Q))return Bc.setStatusMessage("Canceled"),ea.return(!0);"local"===Q&&(Q=null);Bc.setStatusMessage("Eval backend is now "+(Q||"local"));return ea.return(jc.setEvalEnv(Bc,{remote:Q}))})}},{name:"copy current module name to clipboard",exec:function(Bc){var xc=Bc.evalEnvironment.targetModule;Bc.setStatusMessage(xc?xc:"Cannot find module name");Bc.env.eventDispatcher.killRing.add(Bc);Bc.env.eventDispatcher.doCopy(xc);return!0}}];
jc.jsEditorCommands=Rb;jc.jsEditorCommands=Rb;jc.jsEditorCommands=Rb;var qb=[{name:"[javascript] list errors and warnings",exec:function(Bc){var xc,kc,Q,ea,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){if(1==Ua.nextAddress){xc=(Bc.markers||[]).filter(function(fc){fc=fc.type;return"js-undeclared-var"===fc||"js-syntax-error"===fc});if(!xc.length)return jc.show("no warnings or errors"),Ua.return(!0);kc=xc.map(function(fc){var Fb=fc.range;return{isListItem:!0,string:"["+fc.type.split("-").slice(1).join(" ")+
"] "+Bc.textInRange(Fb),value:Fb}});return Ua.yield(Bc.world().filterableListPrompt("jump to warning or error",kc),2)}Q=Ua.yieldResult;ea=$jscomp.makeIterator(Q.selected);if(Ga=ea.next().value)Bc.saveMark(),Bc.selection=Ga,Bc.centerRow(Ga.start.row);return Ua.return(!0)})}},{name:"[javascript] inject import",exec:function(Bc,xc){xc=void 0===xc?{gotoImport:!1,insertImportAtCursor:!0}:xc;var kc,Q,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){switch(Ga.nextAddress){case 1:return Ga.yield(jc.promise.delay(0),
2);case 2:return Ga.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return kc=Ga.yieldResult,Q=kc.interactivelyInjectImportIntoText,Ga.yield(Q(Bc,xc),4);case 4:return(ea=Ga.yieldResult)||Bc.setStatusMessage("canceled"),Ga.return(ea)}})}},{name:"[javascript] fix undeclared variables",exec:function(Bc,xc){xc=void 0===xc?{ignore:[],autoApplyIfSingleChoice:!1,requester:Bc}:xc;var kc,Q,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return Ga.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=Ga.nextAddress)return kc=Ga.yieldResult,Q=kc.interactivlyFixUndeclaredVariables,Ga.yield(Q(Bc,xc),3);ea=Ga.yieldResult;Bc.focus();return Ga.return(ea)})}},{name:"[javascript] remove unused imports",exec:function(Bc,xc){xc=void 0===xc?{query:!0}:xc;var kc,Q,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return Ga.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=Ga.nextAddress)return kc=Ga.yieldResult,Q=kc.cleanupUnusedImports,Ga.yield(Q(Bc,
xc),3);ea=Ga.yieldResult;Bc.setStatusMessage(ea);return Ga.return(!0)})}},{name:"[javascript] eslint report",exec:function(Bc){var xc,kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);xc=Q.yieldResult;kc=xc.default;try{return Q.return(kc.reportOnMorph(Bc))}catch(ea){Bc.showError(ea)}Q.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(Bc){var xc,kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){if(1==
Q.nextAddress)return Q.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);xc=Q.yieldResult;kc=xc.default;try{return Q.return(kc.previewFixesOnMorph(Bc))}catch(ea){Bc.showError(ea)}Q.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(Bc,xc,kc){function Q(Aa,za){za||(za=Va(Aa,{allowReturnOutsideFunction:!0}));var Ka=jc.string.lineRanges(Aa),tb=Aa.split("\n"),yb=[],zc=new jc.BaseVisitor,pd=zc.visitVariableDeclaration;zc.visitVariableDeclaration=function(ye,
Gd,Sb){if(1<ye.declarations.length)for(var oa=jc.string.findLineWithIndexInLineRanges(Ka,ye.start),Ha=ye.declarations[0].start-Ka[oa][0],Kb={},P=1;P<ye.declarations.length;Kb={$jscomp$loop$prop$actionType$2283:Kb.$jscomp$loop$prop$actionType$2283,$jscomp$loop$prop$arg$2284:Kb.$jscomp$loop$prop$arg$2284},P++){var sa=ye.declarations[P],Ta=jc.string.findLineWithIndexInLineRanges(Ka,sa.start);if(oa!==Ta){var Ib=tb[Ta].match(/\s*/)[0].length;Ib=Ha-Ib;0!==Ib&&(sa=jc.string.findLineWithIndexInLineRanges(Ka,
sa.end),Kb.$jscomp$loop$prop$actionType$2283=0<Ib?"insert":"delete",Kb.$jscomp$loop$prop$arg$2284=0<Ib?" ".repeat(Ib):-Ib,yb.push.apply(yb,$jscomp.arrayFromIterable(jc.arr.range(Ta,sa).map(function(Lc){return function(Wc){return[Lc.$jscomp$loop$prop$actionType$2283,Ka[Wc][0],Lc.$jscomp$loop$prop$arg$2284]}}(Kb)))))}}return pd.call(zc,ye,Gd,Sb)};zc.accept(za,{},[]);for(za=yb.length;za--;){var Yd=$jscomp.makeIterator(yb[za]),Ge=Yd.next().value,Sc=Yd.next().value;Yd=Yd.next().value;"insert"===Ge?Aa=
Aa.slice(0,Sc)+Yd+Aa.slice(Sc):"delete"===Ge&&(Aa=Aa.slice(0,Sc)+Aa.slice(Sc+Yd))}return Aa}var ea,Ga,Ua,fc,Fb,Va,Ab,td,Pc,Vb,Oa,Qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:return ea=kc?kc:Math.floor(Bc.width/Bc.defaultCharExtent().width),xc=Object.assign({printWidth:ea,tabWidth:2,useTabs:!1,bracketSpacing:!1},xc),Ga=lively.modules.module,Ua=System.normalizeSync("prettier/standalone.js"),Aa.yield(Ga(Ua).load({format:"global",instrument:!1}),2);
case 2:return fc=Aa.yieldResult,Aa.yield(Ga("lively.ast/lib/acorn-extension.js").load(),3);case 3:return Aa.yield(Ga("lively.ast").load(),4);case 4:return Fb=Aa.yieldResult,Va=Fb.parse,Aa.yield(Ga("lively.ast/lib/query.js").load(),5);case 5:return Aa.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return Ab=Aa.yieldResult,td=Bc.selection.isEmpty()?Bc.documentRange:Bc.selection.range,Pc=Bc.positionToIndex(td.start),Vb=Bc.positionToIndex(td.end),Oa=fc.format(Bc.textString,
Object.assign({},xc,{rangeStart:Pc,rangeEnd:Vb,parser:function(za,Ka,tb){return Va(za,{allowReturnOutsideFunction:!0})}})),Bc.undoManager.group(),Qa=Ab.diffChars(Bc.textString,Oa),Bc.applyJsDiffPatch(Qa),Bc.selection.text=Q(Bc.selection.text),Bc.undoManager.group(),Aa.return(!0)}})}}];jc.jsIdeCommands=qb;jc.jsIdeCommands=qb;jc.jsIdeCommands=qb;var rb=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(Bc,xc){xc=Bc.pluginInvokeFirst("getNavigator");if(!xc)return!0;xc=xc.resolveIdentifierAt(Bc,
Bc.cursorPosition);if(!xc||!xc.id)return jc.show("No symbol identifier selected"),!0;if(!xc.decl)return jc.show("Cannot find declaration of "+xc.name),!0;Bc.saveMark();Bc.selection={start:Bc.indexToPosition(xc.decl.start),end:Bc.indexToPosition(xc.decl.end)};Bc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(Bc){Bc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(Bc){Bc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(Bc,xc){xc=void 0===xc?{direction:null}:xc;var kc=Bc.pluginInvokeFirst("getNavigator");if(!kc)return!0;kc=kc.resolveIdentifierAt(Bc,
Bc.cursorPosition);if(!kc||!kc.refs)return jc.show("No symbol identifier selected"),!0;var Q=Bc.selection;kc=kc.refs.map(function(Ga){var Ua=Ga.end;return jc.Range.fromPositions(jc.iToP(Bc,Ga.start),jc.iToP(Bc,Ua))}).concat(kc.decl?jc.Range.fromPositions(jc.iToP(Bc,kc.decl.start),jc.iToP(Bc,kc.decl.end)):[]).sort(jc.Range.compare);if(!kc.length)return!0;var ea=kc.map(String).indexOf(String(Q.range));if("next"===xc.direction||"prev"===xc.direction)-1===ea&&kc.length?kc=[kc[0]]:(xc=ea+("next"===xc.direction?
1:-1),0>xc?xc=kc.length-1:xc>=kc.length&&(xc=0),kc=[kc[xc]]);kc.forEach(function(Ga){var Ua=Q.selections.findIndex(function(Fb){return Fb.range.equals(Ga)}),fc=Q.selections.length-1;-1<Ua?jc.arr.swap(Q.selections,Ua,fc):Q.addRange(Ga,!1)});Q.mergeSelections();return!0}}];jc.astEditorCommands=rb;jc.astEditorCommands=rb;jc.astEditorCommands=rb;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var cc=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
cc.expressionAllowed=function(Bc,xc,kc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(xc.lastType)||"quasi"==xc.lastType&&/\{\s*$/.test(Bc.string.slice(0,Bc.pos-(kc||0)))};cc.passIndent=eb;cc.defineMode=Hb;cc.defineMIME=Cc;cc.registerHelper=qc;cc.defaultConfig={indentUnit:2};cc.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};cc.defineMode("javascript",
function(Bc,xc){function kc(Yb,Zb,Ee){dl=Yb;Si=Ee;return Zb}function Q(Yb,Zb){var Ee=Yb.next();if('"'==Ee||"'"==Ee)return Zb.tokenize=ea(Ee),Zb.tokenize(Yb,Zb);if("."==Ee&&Yb.match(/^\d+(?:[eE][+\-]?\d+)?/))return kc("number","number");if("."==Ee&&Yb.match(".."))return kc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Ee))return kc(Ee);if("="==Ee&&Yb.eat(">"))return kc("=>","operator");if("0"==Ee&&Yb.eat(/x/i))return Yb.eatWhile(/[\da-f]/i),kc("number","number");if("0"==Ee&&Yb.eat(/o/i))return Yb.eatWhile(/[0-7]/i),
kc("number","number");if("0"==Ee&&Yb.eat(/b/i))return Yb.eatWhile(/[01]/i),kc("number","number");if(/\d/.test(Ee))return Yb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),kc("number","number");if("/"==Ee){if(Yb.eat("*"))return Zb.tokenize=Ga,Ga(Yb,Zb);if(Yb.eat("/"))return Yb.skipToEnd(),kc("comment","comment");if(cc.expressionAllowed(Yb,Zb,1)){a:for(var Ce=Zb=!1;null!=(Ee=Yb.next());){if(!Zb){if("/"==Ee&&!Ce)break a;"["==Ee?Ce=!0:Ce&&"]"==Ee&&(Ce=!1)}Zb=!Zb&&"\\"==Ee}Yb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return kc("regexp","string-2")}Yb.eatWhile(dm);return kc("operator","operator",Yb.current())}if("`"==Ee)return Zb.tokenize=Ua,Ua(Yb,Zb);if("#"==Ee)return Yb.skipToEnd(),kc("error","error");if(dm.test(Ee))return">"==Ee&&Zb.lexical&&">"==Zb.lexical.type||Yb.eatWhile(dm),kc("operator","operator",Yb.current());if(kl.test(Ee))return Yb.eatWhile(kl),Yb=Yb.current(),(Ee=ih.propertyIsEnumerable(Yb)&&ih[Yb])&&"."!=Zb.lastType?kc(Ee.type,Ee.style,Yb):kc("variable","variable",Yb)}function ea(Yb){return function(Zb,
Ee){var Ce=!1,md;if(bj&&"@"==Zb.peek()&&Zb.match(ul))return Ee.tokenize=Q,kc("jsonld-keyword","meta");for(;null!=(md=Zb.next())&&(md!=Yb||Ce);)Ce=!Ce&&"\\"==md;Ce||(Ee.tokenize=Q);return kc("string","string")}}function Ga(Yb,Zb){for(var Ee=!1,Ce;Ce=Yb.next();){if("/"==Ce&&Ee){Zb.tokenize=Q;break}Ee="*"==Ce}return kc("comment","comment")}function Ua(Yb,Zb){for(var Ee=!1,Ce;null!=(Ce=Yb.next());){if(!Ee&&("`"==Ce||"$"==Ce&&Yb.eat("{"))){Zb.tokenize=Q;break}Ee=!Ee&&"\\"==Ce}return kc("quasi","string-2",
Yb.current())}function fc(Yb,Zb){Zb.fatArrowAt&&(Zb.fatArrowAt=null);var Ee=Yb.string.indexOf("=>",Yb.start);if(!(0>Ee)){if(Kk){var Ce=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Yb.string.slice(Yb.start,Ee));Ce&&(Ee=Ce.index)}Ce=0;var md=!1;for(--Ee;0<=Ee;--Ee){var jh=Yb.string.charAt(Ee),Oj="([{}])".indexOf(jh);if(0<=Oj&&3>Oj){if(!Ce){++Ee;break}if(0==--Ce){"("==jh&&(md=!0);break}}else if(3<=Oj&&6>Oj)++Ce;else if(kl.test(jh))md=!0;else{if(/["'\/]/.test(jh))return;if(md&&!Ce){++Ee;break}}}md&&
!Ce&&(Zb.fatArrowAt=Ee)}}function Fb(Yb,Zb,Ee,Ce,md,jh){this.indented=Yb;this.column=Zb;this.type=Ee;this.prev=md;this.info=jh;null!=Ce&&(this.align=Ce)}function Va(){for(var Yb=arguments.length-1;0<=Yb;Yb--)Qf.cc.push(arguments[Yb])}function Ab(){Va.apply(null,arguments);return!0}function td(Yb){function Zb(Ce){for(;Ce;Ce=Ce.next)if(Ce.name==Yb)return!0;return!1}var Ee=Qf.state;Qf.marked="def";Ee.context?Zb(Ee.localVars)||(Ee.localVars={name:Yb,next:Ee.localVars}):!Zb(Ee.globalVars)&&xc.globalVars&&
(Ee.globalVars={name:Yb,next:Ee.globalVars})}function Pc(){Qf.state.context={prev:Qf.state.context,vars:Qf.state.localVars};Qf.state.localVars=Xm}function Vb(){Qf.state.localVars=Qf.state.context.vars;Qf.state.context=Qf.state.context.prev}function Oa(Yb,Zb){var Ee=function(){var Ce=Qf.state,md=Ce.indented;if("stat"==Ce.lexical.type)md=Ce.lexical.indented;else for(var jh=Ce.lexical;jh&&")"==jh.type&&jh.align;jh=jh.prev)md=jh.indented;Ce.lexical=new Fb(md,Qf.stream.column(),Yb,null,Ce.lexical,Zb)};
Ee.lex=!0;return Ee}function Qa(){var Yb=Qf.state;Yb.lexical.prev&&(")"==Yb.lexical.type&&(Yb.indented=Yb.lexical.indented),Yb.lexical=Yb.lexical.prev)}function Aa(Yb){function Zb(Ee){return Ee==Yb?Ab():";"==Yb?Va():Ab(Zb)}return Zb}function za(Yb,Zb){return"var"==Yb?Ab(Oa("vardef",Zb.length),Yc,Aa(";"),Qa):"keyword a"==Yb?Ab(Oa("form"),yb,za,Qa):"keyword b"==Yb?Ab(Oa("form"),za,Qa):"{"==Yb?Ab(Oa("}"),kf,Qa):";"==Yb?Ab():"if"==Yb?("else"==Qf.state.lexical.info&&Qf.state.cc[Qf.state.cc.length-1]==
Qa&&Qf.state.cc.pop()(),Ab(Oa("form"),yb,za,Qa,Ma)):"function"==Yb?Ab(zb):"for"==Yb?Ab(Oa("form"),cb,za,Qa):"variable"==Yb?Kk&&"type"==Zb?(Qf.marked="keyword",Ab(qe,Aa("operator"),qe,Aa(";"))):Ab(Oa("stat"),sa):"switch"==Yb?Ab(Oa("form"),yb,Aa("{"),Oa("}","switch"),kf,Qa,Qa):"case"==Yb?Ab(Ka,Aa(":")):"default"==Yb?Ab(Aa(":")):"catch"==Yb?Ab(Oa("form"),Pc,Aa("("),Qc,Aa(")"),za,Qa,Vb):"class"==Yb?Ab(Oa("form"),Ed,Qa):"export"==Yb?Ab(Oa("stat"),Jg,Qa):"import"==Yb?Ab(Oa("stat"),Qh,Qa):"module"==Yb?Ab(Oa("form"),
Bf,Aa("{"),Oa("}"),kf,Qa,Qa):"async"==Yb?Ab(za):"@"==Zb?Ab(Ka,za):Va(Oa("stat"),Ka,Aa(";"),Qa)}function Ka(Yb){return zc(Yb,!1)}function tb(Yb){return zc(Yb,!0)}function yb(Yb){return"("!=Yb?Va():Ab(Oa(")"),Ka,Aa(")"),Qa)}function zc(Yb,Zb){if(Qf.state.fatArrowAt==Qf.stream.start){var Ee=Zb?oa:Sb;if("("==Yb)return Ab(Pc,Oa(")"),he(Bf,")"),Qa,Aa("=>"),Ee,Vb);if("variable"==Yb)return Va(Pc,Bf,Aa("=>"),Ee,Vb)}Ee=Zb?Sc:Ge;return sg.hasOwnProperty(Yb)?Ab(Ee):"function"==Yb?Ab(zb,Ee):"class"==Yb?Ab(Oa("form"),
yc,Qa):"keyword c"==Yb||"async"==Yb?Ab(Zb?Yd:pd):"("==Yb?Ab(Oa(")"),pd,Aa(")"),Qa,Ee):"operator"==Yb||"spread"==Yb?Ab(Zb?tb:Ka):"["==Yb?Ab(Oa("]"),ml,Qa,Ee):"{"==Yb?ie(Ib,"}",null,Ee):"quasi"==Yb?Va(ye,Ee):"new"==Yb?Ab(Ha(Zb)):Ab()}function pd(Yb){return Yb.match(/[;\}\)\],]/)?Va():Va(Ka)}function Yd(Yb){return Yb.match(/[;\}\)\],]/)?Va():Va(tb)}function Ge(Yb,Zb){return","==Yb?Ab(Ka):Sc(Yb,Zb,!1)}function Sc(Yb,Zb,Ee){var Ce=0==Ee?Ge:Sc,md=0==Ee?Ka:tb;if("=>"==Yb)return Ab(Pc,Ee?oa:Sb,Vb);if("operator"==
Yb)return/\+\+|--/.test(Zb)?Ab(Ce):"?"==Zb?Ab(Ka,Aa(":"),md):Ab(md);if("quasi"==Yb)return Va(ye,Ce);if(";"!=Yb){if("("==Yb)return ie(tb,")","call",Ce);if("."==Yb)return Ab(Ta,Ce);if("["==Yb)return Ab(Oa("]"),pd,Aa("]"),Qa,Ce)}}function ye(Yb,Zb){return"quasi"!=Yb?Va():"${"!=Zb.slice(Zb.length-2)?Ab(ye):Ab(Ka,Gd)}function Gd(Yb){if("}"==Yb)return Qf.marked="string-2",Qf.state.tokenize=Ua,Ab(ye)}function Sb(Yb){fc(Qf.stream,Qf.state);return Va("{"==Yb?za:Ka)}function oa(Yb){fc(Qf.stream,Qf.state);return Va("{"==
Yb?za:tb)}function Ha(Yb){return function(Zb){return"."==Zb?Ab(Yb?P:Kb):Va(Yb?tb:Ka)}}function Kb(Yb,Zb){if("target"==Zb)return Qf.marked="keyword",Ab(Ge)}function P(Yb,Zb){if("target"==Zb)return Qf.marked="keyword",Ab(Sc)}function sa(Yb){return":"==Yb?Ab(Qa,za):Va(Ge,Aa(";"),Qa)}function Ta(Yb){if("variable"==Yb)return Qf.marked="property",Ab()}function Ib(Yb,Zb){if("async"==Yb)return Qf.marked="property",Ab(Ib);if("variable"==Yb||"keyword"==Qf.style)return Qf.marked="property","get"==Zb||"set"==
Zb?Ab(Lc):Ab(Wc);if("number"==Yb||"string"==Yb)return Qf.marked=bj?"property":Qf.style+" property",Ab(Wc);if("jsonld-keyword"==Yb)return Ab(Wc);if("modifier"==Yb)return Ab(Ib);if("["==Yb)return Ab(Ka,Aa("]"),Wc);if("spread"==Yb)return Ab(Ka);if(":"==Yb)return Va(Wc)}function Lc(Yb){if("variable"!=Yb)return Va(Wc);Qf.marked="property";return Ab(zb)}function Wc(Yb){if(":"==Yb)return Ab(tb);if("("==Yb)return Va(zb)}function he(Yb,Zb,Ee){function Ce(md,jh){return(Ee?-1<Ee.indexOf(md):","==md)?(md=Qf.state.lexical,
"call"==md.info&&(md.pos=(md.pos||0)+1),Ab(function(Oj,rm){return Oj==Zb||rm==Zb?Va():Va(Yb)},Ce)):md==Zb||jh==Zb?Ab():Ab(Aa(Zb))}return function(md,jh){return md==Zb||jh==Zb?Ab():Va(Yb,Ce)}}function ie(Yb,Zb,Ee){for(var Ce=3;Ce<arguments.length;Ce++)Qf.cc.push(arguments[Ce]);return Ab(Oa(Zb,Ee),he(Yb,Zb),Qa)}function kf(Yb){return"}"==Yb?Ab():Va(za,kf)}function Qd(Yb,Zb){if(Kk){if(":"==Yb)return Ab(qe);if("?"==Zb)return Ab(Qd)}}function qe(Yb){if("variable"==Yb)return Qf.marked="variable-3",Ab(mg);
if("string"==Yb||"number"==Yb||"atom"==Yb)return Ab(mg);if("{"==Yb)return Ab(Oa("}"),he(Af,"}",",;"),Qa);if("("==Yb)return Ab(he(rg,")"),df)}function df(Yb){if("=>"==Yb)return Ab(qe)}function Af(Yb,Zb){if("variable"==Yb||"keyword"==Qf.style)return Qf.marked="property",Ab(Af);if("?"==Zb)return Ab(Af);if(":"==Yb)return Ab(qe)}function rg(Yb){if("variable"==Yb)return Ab(rg);if(":"==Yb)return Ab(qe)}function mg(Yb,Zb){if("<"==Zb)return Ab(Oa(">"),he(qe,">"),Qa,mg);if("|"==Zb||"."==Yb)return Ab(qe);if("["==
Yb)return Ab(Aa("]"),mg);if("extends"==Zb)return Ab(qe)}function Yc(){return Va(Bf,Qd,Gg,pf)}function Bf(Yb,Zb){if("modifier"==Yb)return Ab(Bf);if("variable"==Yb)return td(Zb),Ab();if("spread"==Yb)return Ab(Bf);if("["==Yb)return ie(Bf,"]");if("{"==Yb)return ie(dg,"}")}function dg(Yb,Zb){if("variable"==Yb&&!Qf.stream.match(/^\s*:/,!1))return td(Zb),Ab(Gg);"variable"==Yb&&(Qf.marked="property");return"spread"==Yb?Ab(Bf):"}"==Yb?Va():Ab(Aa(":"),Bf,Gg)}function Gg(Yb,Zb){if("="==Zb)return Ab(tb)}function pf(Yb){if(","==
Yb)return Ab(Yc)}function Ma(Yb,Zb){if("keyword b"==Yb&&"else"==Zb)return Ab(Oa("form","else"),za,Qa)}function cb(Yb){if("("==Yb)return Ab(Oa(")"),Mb,Aa(")"),Qa)}function Mb(Yb){return"var"==Yb?Ab(Yc,Aa(";"),La):";"==Yb?Ab(La):"variable"==Yb?Ab(ba):Va(Ka,Aa(";"),La)}function ba(Yb,Zb){return"in"==Zb||"of"==Zb?(Qf.marked="keyword",Ab(Ka)):Ab(Ge,La)}function La(Yb,Zb){return";"==Yb?Ab(mb):"in"==Zb||"of"==Zb?(Qf.marked="keyword",Ab(Ka)):Va(Ka,Aa(";"),mb)}function mb(Yb){")"!=Yb&&Ab(Ka)}function zb(Yb,
Zb){if("*"==Zb)return Qf.marked="keyword",Ab(zb);if("variable"==Yb)return td(Zb),Ab(zb);if("("==Yb)return Ab(Pc,Oa(")"),he(Qc,")"),Qa,Qd,za,Vb);if(Kk&&"<"==Zb)return Ab(Oa(">"),he(qe,">"),Qa,zb)}function Qc(Yb){return"spread"==Yb?Ab(Qc):Va(Bf,Qd,Gg)}function yc(Yb,Zb){return"variable"==Yb?Ed(Yb,Zb):Ad(Yb,Zb)}function Ed(Yb,Zb){if("variable"==Yb)return td(Zb),Ab(Ad)}function Ad(Yb,Zb){if("<"==Zb)return Ab(Oa(">"),he(qe,">"),Qa,Ad);if("extends"==Zb||"implements"==Zb||Kk&&","==Yb)return Ab(Kk?qe:Ka,
Ad);if("{"==Yb)return Ab(Oa("}"),Bd,Qa)}function Bd(Yb,Zb){if("variable"==Yb||"keyword"==Qf.style){if(("async"==Zb||"static"==Zb||"get"==Zb||"set"==Zb||Kk&&("public"==Zb||"private"==Zb||"protected"==Zb||"readonly"==Zb||"abstract"==Zb))&&Qf.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Qf.marked="keyword",Ab(Bd);Qf.marked="property";return Ab(Kk?Ke:zb,Bd)}if("["==Yb)return Ab(Ka,Aa("]"),Kk?Ke:zb,Bd);if("*"==Zb)return Qf.marked="keyword",Ab(Bd);if(";"==Yb)return Ab(Bd);if("}"==Yb)return Ab();if("@"==
Zb)return Ab(Ka,Bd)}function Ke(Yb,Zb){return"?"==Zb?Ab(Ke):":"==Yb?Ab(qe,Gg):"="==Zb?Ab(tb):Va(zb)}function Jg(Yb,Zb){return"*"==Zb?(Qf.marked="keyword",Ab(Zh,Aa(";"))):"default"==Zb?(Qf.marked="keyword",Ab(Ka,Aa(";"))):"{"==Yb?Ab(he(wg,"}"),Zh,Aa(";")):Va(za)}function wg(Yb,Zb){if("as"==Zb)return Qf.marked="keyword",Ab(Aa("variable"));if("variable"==Yb)return Va(tb,wg)}function Qh(Yb){return"string"==Yb?Ab():Va(Uf,Hh,Zh)}function Uf(Yb,Zb){if("{"==Yb)return ie(Uf,"}");"variable"==Yb&&td(Zb);"*"==
Zb&&(Qf.marked="keyword");return Ab(ek)}function Hh(Yb){if(","==Yb)return Ab(Uf,Hh)}function ek(Yb,Zb){if("as"==Zb)return Qf.marked="keyword",Ab(Uf)}function Zh(Yb,Zb){if("from"==Zb)return Qf.marked="keyword",Ab(Ka)}function ml(Yb){return"]"==Yb?Ab():Va(he(tb,"]"))}Bc=Object.assign({},cc.defaultConfig,{},Bc);xc=Object.assign({},cc.defaultParserConfig,{},xc);var If=Bc.indentUnit,Gj=xc.statementIndent,bj=xc.jsonld,Pe=xc.json||bj,Kk=xc.typescript,kl=xc.wordCharacters||/[\w$\xa1-\uffff]/,ih=function(){function Yb(rm){return{type:rm,
style:"keyword"}}var Zb=Yb("keyword a"),Ee=Yb("keyword b"),Ce=Yb("keyword c"),md=Yb("operator"),jh={type:"atom",style:"atom"};Zb={"if":Yb("if"),"while":Zb,"with":Zb,"else":Ee,"do":Ee,"try":Ee,"finally":Ee,"return":Ce,"break":Ce,"continue":Ce,"new":Yb("new"),"delete":Ce,"throw":Ce,"debugger":Ce,"var":Yb("var"),"const":Yb("var"),let:Yb("var"),"function":Yb("function"),"catch":Yb("catch"),"for":Yb("for"),"switch":Yb("switch"),"case":Yb("case"),"default":Yb("default"),"in":md,"typeof":md,"instanceof":md,
"true":jh,"false":jh,"null":jh,undefined:jh,NaN:jh,Infinity:jh,"this":Yb("this"),"class":Yb("class"),"super":Yb("atom"),yield:Ce,"export":Yb("export"),"import":Yb("import"),"extends":Ce,await:Ce,async:Yb("async")};if(Kk){Ee={type:"variable",style:"variable-3"};Ce={"interface":Yb("class"),"implements":Ce,namespace:Ce,module:Yb("module"),"enum":Yb("module"),"public":Yb("modifier"),"private":Yb("modifier"),"protected":Yb("modifier"),"abstract":Yb("modifier"),as:md,string:Ee,number:Ee,"boolean":Ee,any:Ee};
for(var Oj in Ce)Zb[Oj]=Ce[Oj]}return Zb}(),dm=/[+\-*&%=<>!?|~^@]/,ul=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,dl,Si,sg={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Qf={state:null,column:null,marked:null,cc:null},Xm={name:"this",next:{name:"arguments"}};Qa.lex=!0;return{startState:function(Yb){Yb={tokenize:Q,lastType:"sof",cc:[],lexical:new Fb((Yb||0)-If,0,"block",!1),localVars:xc.localVars,context:xc.localVars&&{vars:xc.localVars},
indented:Yb||0};xc.globalVars&&"object"==typeof xc.globalVars&&(Yb.globalVars=xc.globalVars);return Yb},token:function(Yb,Zb){Yb.sol()&&(Zb.lexical.hasOwnProperty("align")||(Zb.lexical.align=!1),Zb.indented=Yb.indentation(),fc(Yb,Zb));if(Zb.tokenize!=Ga&&Yb.eatSpace())return null;var Ee=Zb.tokenize(Yb,Zb);if("comment"==dl)return Ee;Zb.lastType="operator"!=dl||"++"!=Si&&"--"!=Si?dl:"incdec";a:{var Ce=dl,md=Si,jh=Zb.cc;Qf.state=Zb;Qf.stream=Yb;Qf.marked=null;Qf.cc=jh;Qf.style=Ee;Zb.lexical.hasOwnProperty("align")||
(Zb.lexical.align=!0);for(Yb=0;;){if(1E5<Yb++)throw Error("endless");if((jh.length?jh.pop():Pe?Ka:za)(Ce,md)){for(;jh.length&&jh[jh.length-1].lex;)jh.pop()();if(Qf.marked){Ee=Qf.marked;break a}if(Ce="variable"==Ce)b:{for(Ce=Zb.localVars;Ce;Ce=Ce.next)if(Ce.name==md){Ce=!0;break b}for(Zb=Zb.context;Zb;Zb=Zb.prev)for(Ce=Zb.vars;Ce;Ce=Ce.next)if(Ce.name==md){Ce=!0;break b}Ce=void 0}if(Ce){Ee="variable-2";break a}break a}}}return Ee},indent:function(Yb,Zb){if(Yb.tokenize==Ga)return cc.passIndent;if(Yb.tokenize!=
Q)return 0;var Ee=Zb&&Zb.charAt(0),Ce=Yb.lexical,md;if(!/^\s*else\b/.test(Zb))for(var jh=Yb.cc.length-1;0<=jh;--jh){var Oj=Yb.cc[jh];if(Oj==Qa)Ce=Ce.prev;else if(Oj!=Ma)break}for(;!("stat"!=Ce.type&&"form"!=Ce.type||"}"!=Ee&&(!(md=Yb.cc[Yb.cc.length-1])||md!=Ge&&md!=Sc||/^[,\.=+\-*:?[\(]/.test(Zb)));)Ce=Ce.prev;Gj&&")"==Ce.type&&"stat"==Ce.prev.type&&(Ce=Ce.prev);md=Ce.type;jh=Ee==md;return(Oj=Yb._string)&&Oj.trimLeft().startsWith("?")&&":"===Ee?Oj.indexOf("?"):Oj&&":"===Yb.lastType&&"}"!==Ce.type?
Oj.match(/^\s*/)[0].length:"vardef"==md?(Zb=Ce.indented+Ce.info+2+Yb.localVars.name.length,"?"===Ee||":"===Ee||"|"===Ee||"&"===Ee?Zb:","==Yb.lastType?Ce.indented+Ce.info+1:"operator"==Yb.lastType?Zb+3:Ce.indented):"form"==md&&"{"==Ee?Ce.indented:"form"==md?Ce.indented+If:"stat"==md?(Ee=Ce.indented,Yb="operator"==Yb.lastType||","==Yb.lastType||dm.test(Zb.charAt(0))||/[,.]/.test(Zb.charAt(0)),Ee+(Yb?Gj||If:0)):"switch"!=Ce.info||jh||0==xc.doubleIndentSwitch?Ce.align?Ce.column+(jh?0:1):Ce.indented+(jh?
0:If):Ce.indented+(/^(?:case|default)\b/.test(Zb)?If:2*If)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Pe?null:"/*",blockCommentEnd:Pe?null:"*/",lineComment:Pe?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Pe?"json":"javascript",jsonldMode:bj,jsonMode:Pe,expressionAllowed:cc.expressionAllowed,skipExpression:function(Yb){var Zb=Yb.cc[Yb.cc.length-1];Zb!=Ka&&Zb!=tb||Yb.cc.pop()}}});cc.registerHelper("wordChars","javascript",/[\w$]/);cc.defineMIME("text/javascript",
"javascript");cc.defineMIME("text/ecmascript","javascript");cc.defineMIME("application/javascript","javascript");cc.defineMIME("application/x-javascript","javascript");cc.defineMIME("application/ecmascript","javascript");cc.defineMIME("application/json",{name:"javascript",json:!0});cc.defineMIME("application/x-json",{name:"javascript",json:!0});cc.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});cc.defineMIME("text/typescript",{name:"javascript",typescript:!0});cc.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var Vc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Vc.string=kd;Vc.JavaScriptChecker=hc;Vc.JavaScriptNavigator=Id;Vc.completers=kb;Vc.jsSnippets=vc;Vc.jsIdeCommands=qb;Vc.jsEditorCommands=Rb;Vc.astEditorCommands=rb;Vc.CodeMirrorEnabledEditorPlugin=ld;Vc.Snippet=xb;Vc.parser=nd;Vc.localInterface=Xc;Vc.systemInterfaceNamed=gd;Vc.serverInterfaceFor=bc;Vc.l2lInterfaceFor=ad;hc=function(Bc){var xc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
kc=xc.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof xc.JavaScriptEditorPlugin?xc.JavaScriptEditorPlugin:xc.JavaScriptEditorPlugin=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(kc,Bc,[{key:Symbol.for("lively-instance-initialize"),value:function(){ub._get(Object.getPrototypeOf(kc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new Vc.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(Q){ub._get(Object.getPrototypeOf(kc.prototype),"attach",this).call(this,Q);this.evalEnvironment.context=Q}},{key:"detach",value:function(Q){this.checker.uninstall(this.textMorph);ub._get(Object.getPrototypeOf(kc.prototype),"detach",this).call(this,Q)}},{key:"getNavigator",value:function(){return new Vc.JavaScriptNavigator}},
{key:"getCompleters",value:function(Q){return Vc.completers.concat(Q)}},{key:"getCommands",value:function(Q){return[].concat($jscomp.arrayFromIterable(ub._get(Object.getPrototypeOf(kc.prototype),"getCommands",this).call(this,Q)),$jscomp.arrayFromIterable(Vc.jsIdeCommands),$jscomp.arrayFromIterable(Vc.jsEditorCommands),$jscomp.arrayFromIterable(Vc.astEditorCommands))}},{key:"getKeyBindings",value:function(Q){return[].concat($jscomp.arrayFromIterable(Q),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},
{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},
{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(Q){var ea=this,Ga,Ua,fc,Fb,Va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){Ga=ea.textMorph;Ua=[{command:"doit",target:Ga,showKeyShortcuts:!0},{command:"inspectit",target:Ga,showKeyShortcuts:!0},{command:"printit",target:Ga,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:Ga,showKeyShortcuts:!0},{command:"eval all",target:Ga,showKeyShortcuts:!0},
{command:"text completion",alias:"code completion",target:Ga,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:Ga,showKeyShortcuts:!0},{isDivider:!0}];ea.evalEnvironment.targetModule&&Ua.push({command:"[javascript] inject import",alias:"add import",target:Ga},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:Ga},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:Ga});
fc=ea.getNavigator();(Fb=fc.resolveIdentifierAt(Ga,Ga.cursorPosition))&&Ua.push({command:"selectDefinition",alias:'jump to definition of "'+Fb.name+'"',target:Ga},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Fb.name+'"',target:Ga});(Va=Ga.selection.text.trim())&&Ua.push({command:"open code search",alias:'code search for "'+Vc.string.truncate(Va,30)+'"',target:Ga.world(),args:{input:Va,backend:ea.backend()}});Ua.push({isDivider:!0});return Ab.return(Ua.concat(Q))})}},
{key:"getSnippets",value:function(){return Vc.jsSnippets.map(function(Q){var ea=$jscomp.makeIterator(Q);Q=ea.next().value;ea=ea.next().value;return new Vc.Snippet({trigger:Q,expansion:ea})})}},{key:"sanatizedJsEnv",value:function(Q){Q=Object.assign({},this.evalEnvironment,{},Q);Q.format||(Q.formatd="esm");Q.context||(Q.context=this.textMorph);Q.sourceURL||(Q.sourceURL=Q.targetModule+"_doit_"+Date.now());Q.systemInterface||(Q.systemInterface=Vc.localInterface);return Q}},{key:"backend",value:function(Q){Q=
this.sanatizedJsEnv(Q);return Q.remote?Q.remote:"local"}},{key:"systemInterface",value:function(Q){return this.sanatizedJsEnv(Q).systemInterface||Vc.localInterface}},{key:"setSystemInterface",value:function(Q){return this.evalEnvironment.systemInterface=Q}},{key:"setSystemInterfaceNamed",value:function(Q){return this.setSystemInterface(Vc.systemInterfaceNamed(Q))}},{key:"runEval",value:function(Q,ea){ea=this.sanatizedJsEnv(ea);return this.systemInterface(ea).runEval(Q,ea)}},{key:"parser",get:function(){return Vc.parser}},
{key:"parse",value:function(Q){Q=void 0===Q?null:Q;if(this._ast&&this._ast._astType===Q)return this._ast;var ea=this.parser,Ga=this.textMorph.textString;if(!ea)return null;var Ua={withComments:!0,allowReturnOutsideFunction:!0};Q&&(Ua.type=Q);if(Ga.startsWith("#!")){var fc=Ga.indexOf("\n");Ga=" ".repeat(fc)+Ga.slice(fc)}ea=ea.fuzzyParse(Ga,Ua);ea._astType=Q;return this._ast=ea}},{key:"undeclaredVariables",value:function(Q){var ea=this.parser,Ga=this.evalEnvironment.knownGlobals||[];Q=this.parse(void 0===
Q?null:Q);return ea&&Q?ea.query.findGlobalVarRefs(Q,{jslintGlobalComment:!0}).filter(function(Ua){return!Ga.includes(Ua.name)}):[]}}],[{key:"className",get:function(){return"JavaScriptEditorPlugin"}}],xc,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:662,end:6664})}(Vc.CodeMirrorEnabledEditorPlugin);
hc=Vc.JavaScriptEditorPlugin;Ca("default",hc);Vc.default=hc}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});