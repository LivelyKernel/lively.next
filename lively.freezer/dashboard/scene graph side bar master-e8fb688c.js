System.register("./__root_module__-dce2a509.js kld-intersections ./index-7c60e27b.js ./index-0a258dcd.js ./index-133ff6c6.js ./color-picker-fd77b442.js ./editor-plugin-b06bb838.js ./index-3dc09926.js ./editor-plugin-d3c220db.js ./index-50622fee.js".split(" "),function(){var Ba,zb,Ib,nc,bc,Sd,Vc,Ud,Yc,Oc,qd,ie,Ye,sf,ne,cc,Hc,Md,fc,$d,pe,Cc,Ic,Sb,Jc,dd,Jd,Kd,Hb,Bb,Mb,Na,Ua,Oa,Ia,eb,cb,ob,Zb,mc,Tb,pa;return{setters:[function(Ja){Ba=Ja.aw;zb=Ja.an;Ib=Ja.aC;nc=Ja.aa;bc=Ja.a3;Sd=Ja.ax;Vc=Ja.au;Ud=
Ja.aj;Yc=Ja.C;Oc=Ja.a2;qd=Ja.a6;ie=Ja.$;Ye=Ja.a$;sf=Ja.P;ne=Ja.a8;cc=Ja.aD;Hc=Ja.ap;Md=Ja.a_;fc=Ja.as;$d=Ja.aq;pe=Ja.ab;Cc=Ja.bq;Ic=Ja.bs;Sb=Ja.bQ;Jc=Ja.b5;dd=Ja.bl;Jd=Ja.aP;Kd=Ja.l;Hb=Ja.a1;Bb=Ja.bR;Mb=Ja.aZ;Na=Ja.b0;Ua=Ja.at;Oa=Ja.a4;Ia=Ja.aV;eb=Ja.av;cb=Ja.bS},function(){},function(){},function(){},function(Ja){ob=Ja.d;Zb=Ja.s;mc=Ja.I;Tb=Ja.M},function(){},function(Ja){pa=Ja.I},function(){},function(){},function(){}],execute:function(){function Ja(sb){var hd=sb.sourceObj,md=sb.targetObj;hd.isMorph&&
md.isMorph?(hd.show(),md.show(),kb.showConnector&&kb.showConnector(hd,md)):kb.show(String(sb))}function X(sb){var hd=sb.sourceObj,md=sb.sourceAttrName,pb=sb.targetObj,ub=sb.targetMethodName,wb=sb.getConverter();sb=sb.getUpdater();return kb.printConnectionElements(hd,md,pb,ub,wb,sb)}function ua(sb,hd,md,pb,ub,wb){sb="/* global connect, source, target */\nconnect(source, '"+hd+"', target, '"+pb+"'";if(ub||wb)sb+=", {\n";ub&&(sb+="  converter: "+ub);ub&&wb&&(sb+=",");ub&&(sb+="\n");wb&&(sb+="  updater: "+
wb+"\n");if(ub||wb)sb+="}";return sb+");"}function ab(sb,hd){var md;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return pb.yield(kb.InteractiveMorphSelector.selectMorph(),2);md=pb.yieldResult;return pb.return(md?kb.interactiveConnectGivenSourceAndTarget(sb,hd,md):null)})}function rb(sb,hd,md,pb){var ub,wb,yd,Zd,Je;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dc){switch(Dc.nextAddress){case 1:ub=md&&md.world().targetDataBindings(md);wb=sb.world();
if(!ub||!ub.length)return wb.setStatusMessage("connect canceled"),Dc.return();if(hd){Dc.jumpTo(2);break}yd=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(kb.arr.flatten(sb.world().targetDataBindings(sb)).map(function(re){return{isListItem:!0,string:re.signature||re.name,value:re}})));return Dc.yield(wb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],yd,{filterable:!0}),3);case 3:hd=Dc.yieldResult;if("canceled"==hd.status)return Dc.return();hd=hd.selected[0];hd=hd.custom?"sourceAttribute":hd.name;case 2:return Zd=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(kb.arr.flatten(ub).map(function(re){return{isListItem:!0,value:re,string:re.signature||re.name}}))),Dc.yield(wb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],Zd,{filterable:!0}),4);case 4:Je=Dc.yieldResult;if("canceled"==Je.status)return Dc.return();Je=Je.selected[0];return Dc.yield(kb.interactivelyEvaluateConnection({sourceObj:sb,sourceAttr:hd,targetObj:md,targetAttr:Je.custom?"targetAttribute":Je.name,onConnect:pb,prompt:"Edit and confirm connection:"}),0)}})}function vc(sb,hd,md,pb){hd=void 0===hd?"confirm connection":hd;var ub,wb,yd,Zd,Je,Dc,re;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cd){ub=
sb;wb=ub.sourceObj;yd=ub.sourceAttrName;Zd=ub.targetObj;Je=ub.targetMethodName;Dc=sb.getConverter();re=sb.getUpdater();return cd.return(kb.interactivelyEvaluateConnection({sourceObj:wb,sourceAttr:yd,targetObj:Zd,targetAttr:Je,converter:Dc,updater:re,prompt:hd,highlight:md,onConnect:pb}))})}function Bd(sb,hd,md,pb,ub){pb=void 0===pb?{}:pb;ub=kb.rect(0).sides.concat(kb.rect(0).corners);md=md||new kb.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:kb.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:kb.Color.transparent,
nativeCursor:"auto"},end:{fill:kb.Color.orange}}},pb,{hasFixedPosition:!0}));md.startPoint.attachTo(sb,"rightCenter");hd.isMorph?(pb=hd.globalBounds().partNameNearest(ub,sb.globalPosition),sb.globalPosition.equals(hd.globalBounds().partNamed(pb))&&hd.globalBounds().partNameNearest(kb.arr.without(ub,pb),sb.globalPosition),md.endPoint.attachTo(hd,"leftCenter")):(ub=sb.globalBounds().topRight().addPt(kb.pt(100,0)),hd=kb.morph({type:"label",value:hd.toString(),styleClasses:["Tooltip"],padding:kb.rect(8,
4)}).openInWorld(ub),hd.position=sb.world().bounds().translateForInclusion(hd.bounds()).topLeft(),kb.once(md,"remove",hd,"remove"),md.endPoint.attachTo(hd,"leftCenter"));return md}function sc(sb){var hd,md,pb,ub,wb,yd,Zd,Je,Dc,re,cd,we,xa,hb,Xa,qb,P,qa,fb,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){switch(gc.nextAddress){case 1:hd=sb;md=hd.sourceObj;pb=hd.sourceAttr;ub=hd.targetObj;wb=hd.targetAttr;yd=hd.converter;Zd=hd.updater;Je=hd.prompt;Dc=void 0===hd.highlight?!0:hd.highlight;
re=hd.onConnect;cd="lively://lively.bindings-interactive-connect/x"+md.id;we={context:window,format:"esm",targetModule:cd,classTransform:kb.classToFunctionTransform};xa=kb.printConnectionElements(md,pb,ub,wb,yd,Zd);ub.isMorph&&md.isMorph&&(hb=ub.propertiesAndPropertySettings().properties[wb]||{type:typeof ub[wb]},Xa=hb.type,qb=md.propertiesAndPropertySettings().properties[pb]||{type:typeof md[pb]},P=qb.type,P!==Xa&&(Je="Edit and confirm connection:"));qa={};Object.assign(lively.modules.module(cd).recorder,
(qa.source=md,qa.target=ub,qa.connect=Vc,qa.once=Ud,qa[pb]=md[pb],qa));if(!Je){fb=xa;gc.jumpTo(2);break}return gc.yield($world.editPrompt(Je,{input:xa,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:we,animated:!1}),3);case 3:if(fb=gc.yieldResult,!fb)return $world.setStatusMessage("connect canceled"),gc.return();case 2:return gc.yield(lively.vm.runEval(fb,we),4);case 4:Lb=gc.yieldResult;if(Lb.isError)return $world.logError(Lb.value),gc.return(sc({sourceObj:md,
sourceAttr:pb,targetObj:ub,targetAttr:wb,converter:yd,updater:Zd,prompt:"confirm connection",highlight:Dc,onConnect:re}));Dc&&($world.setStatusMessage("connected!",kb.Color.green),kb.interactivelyShowConnection(Lb.value));"function"===typeof re&&re(Lb);gc.jumpToEnd()}})}var Nb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Nb.Inspector=pa;var Yd=function(sb){var hd=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),md=hd.hasOwnProperty("ProtoInspector")&&"function"===typeof hd.ProtoInspector?
hd.ProtoInspector:hd.ProtoInspector=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],hd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Nb.Inspector);Yd=Nb.ProtoInspector;Nb.default=Yd;var Cd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Cd.Morph=zb;Cd.touchInputDevice=Ib;Cd.easings=nc;Cd.pt=bc;Cd.fun=Sd;Cd.connect=Vc;Nb=function(sb){var hd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),md=hd.hasOwnProperty("MorphicSideBar")&&"function"===typeof hd.MorphicSideBar?hd.MorphicSideBar:hd.MorphicSideBar=function(pb){pb&&
pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(pb){pb=void 0===pb?!0:pb;if(this.respondsToVisibleWindow){var ub=$world.visibleBounds(),wb=navigator.standalone&&Cd.touchInputDevice?25:0;this.height=ub.height-wb;this.top=wb+ub.top();wb=this.get("horizontal resizer");wb.height=this.height;wb.top=0;pb&&(this.visible?this.topLeft=
ub.topLeft():this.topRight=ub.topLeft())}}},{key:"switchMode",value:function(pb){"inspector"==pb&&this.showInspector();"connections"==pb&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(pb){var ub=this,wb,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){switch(Zd.nextAddress){case 1:wb=
$world.visibleBounds();yd=navigator.standalone&&Cd.touchInputDevice?25:0;ub.height=wb.height-yd;ub.top=yd+wb.top();if(pb)return $world.addMorph(ub,$world.get("lively top bar")),ub.topRight=wb.topLeft(),ub.attachToWorld($world),ub.visible=!0,Zd.yield(ub.whenRendered(),5);ub.detachFromWorld($world);return Zd.yield(ub.animate({opacity:0,topRight:wb.topLeft(),duration:300}),4);case 4:ub.visible=!1;ub.remove();Zd.jumpTo(0);break;case 5:return ub.onWorldResize(!1),ub.get("scene graph").adjustProportions(),
Zd.yield(ub.animate({opacity:1,easing:Cd.easings.outCirc,topLeft:wb.topLeft(),duration:300}),6);case 6:ub.get("scene graph").refresh(),Zd.jumpToEnd()}})}},{key:"attachToWorld",value:function(pb){Cd.connect(pb,"onChange",this,"onHierarchyChange",{garbageCollect:!0});Cd.connect(pb,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Cd.connect(pb,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(pb){var ub=this;pb.attributeConnections.forEach(function(wb){wb.targetObj===
ub&&wb.disconnect()})}},{key:"selectNode",value:function(pb){this.getSubmorphNamed("scene graph").selectMorphInTarget(pb);this.getSubmorphNamed("connections tree").inspectConnectionsOf(pb)}},{key:"onHierarchyChange",value:function(pb){var ub=this,wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if("addMorphAt"===pb.selector||"removeMorph"===pb.selector||"name"===pb.prop){wb=ub._sceneGraph||(ub._sceneGraph=ub.getSubmorphNamed("scene graph"));if(!wb||!wb.owner.visible||pb.target&&
pb.target.isHand||pb.target&&wb.ignoreMorph(pb.target)||pb.args&&!pb.args[0].isHalo&&wb.ignoreMorph(pb.args[0])||pb.target.ownerChain().find(function(Zd){return wb.ignoreMorph(Zd)}))return yd.return();Cd.fun.debounceNamed("scene-graph-update",50,function(){return wb.refresh()})()}yd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],hd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},{start:226,end:3668})}(Cd.Morph);Nb=Cd.MorphicSideBar;Cd.default=Nb;var kb=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");kb.interactivelyShowConnection=Ja;kb.printConnection=X;kb.printConnectionElements=ua;kb.interactiveConnectGivenSource=ab;kb.interactiveConnectGivenSourceAndTarget=
rb;kb.interactivelyReEvaluateConnection=vc;kb.visualizeConnection=Bd;kb.interactivelyEvaluateConnection=sc;kb.connect=Vc;kb.once=Ud;kb.Color=Yc;kb.rect=Oc;kb.pt=bc;kb.arr=qd;kb.promise=ie;kb.properties=Ye;kb.Path=sf;kb.obj=ne;kb.HorizontalLayout=cc;kb.Morph=zb;kb.VerticalLayout=Hc;kb.StyleSheet=Md;kb.Icon=fc;kb.GridLayout=$d;kb.morph=pe;kb.TreeData=Cc;kb.Tree=Ic;kb.Leash=Sb;kb.LabeledCheckBox=Jc;kb.SearchField=dd;kb.showConnector=ob;kb.show=Zb;kb.InteractiveMorphSelector=mc;kb.MorphHighlighter=Tb;
kb.Window=Jd;kb.classToFunctionTransform=Kd;kb.interactivelyShowConnection=Ja;kb.interactivelyShowConnection=Ja;kb.printConnection=X;kb.printConnection=X;kb.printConnectionElements=ua;kb.printConnectionElements=ua;kb.interactiveConnectGivenSource=ab;kb.interactiveConnectGivenSource=ab;kb.interactiveConnectGivenSourceAndTarget=rb;kb.interactiveConnectGivenSourceAndTarget=rb;kb.interactivelyReEvaluateConnection=vc;kb.interactivelyReEvaluateConnection=vc;kb.visualizeConnection=Bd;kb.visualizeConnection=
Bd;kb.interactivelyEvaluateConnection=sc;kb.interactivelyEvaluateConnection=sc;var Cb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Cb.Tree=Ic;Cb.TreeData=Cc;Cb.morph=pe;Cb.Icon=fc;Cb.HorizontalLayout=cc;Cb.easings=nc;Cb.Morph=zb;Cb.Color=Yc;Cb.Rectangle=Hb;Cb.rect=Oc;Cb.pt=bc;Cb.connect=Vc;Cb.noUpdate=Bb;Cb.disconnect=Mb;Cb.disconnectAll=Na;Cb.once=Ud;Cb.arr=qd;Cb.num=Ua;Cb.fun=Sd;Cb.tree=Oa;Cb.promise=ie;Cb.ConnectionHalo=_missingExportShim;Cb.getClassName=Ia;Nb=function(sb){var hd=
lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),md=hd.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof hd.InteractiveTreeContainer?hd.InteractiveTreeContainer:hd.InteractiveTreeContainer=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,[{key:"onChildRemoved",value:function(pb){}},{key:"onChildAdded",value:function(pb){}},{key:"toggleSelected",value:function(pb){if(this.tree){var ub=
this.tree,wb=ub.selectionFontColor,yd=ub.nonSelectionFontColor;this.submorphs.filter(function(Zd){return!Zd._isControlElement&&Zd.styleClasses.includes("Label")}).forEach(function(Zd){Zd.fontColor=pb?wb:yd})}}},{key:"onGrab",value:function(pb){var ub=this.tree,wb=this.node;this.fill=Cb.Color.gray.withA(.5);this.fontColor=ub.selectionFontColor;this.opacity=.8;Ba._get(Object.getPrototypeOf(md.prototype),"onGrab",this).call(this,pb);wb&&(this.toggleSelected(!1),ub.collapse(wb),ub.treeData.parentNode(wb).container.onChildRemoved(this),
this._data=ub.treeData.remove(wb),wb.container.target.remove(),ub.update(!0))}},{key:"wantsToBeDroppedOn",value:function(pb){this.showPreviewOn(pb);return!0}},{key:"showPreviewOn",value:function(pb){if(pb.isContainer)var ub=pb.tree;pb.isTree&&(ub=pb);ub&&ub.showDropPreviewFor&&ub.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(pb){var ub=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){if(1==wb.nextAddress)return ub.tree.treeData.add(pb._data,ub.node,ub.node.children[0]),
ub.tree.uncollapse(ub.node),ub.tree.treeData.remove(ub.tree._previewNode),wb.yield(ub.tree.whenRendered(),2);ub.tree.update(!0);ub.onChildAdded(pb);wb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(pb,ub){var wb=this;debugger;this.tree._dropInProgress=!0;Ba._get(Object.getPrototypeOf(md.prototype),"onBeingDroppedOn",this).call(this,pb,ub);pb=function(){wb.fill=Cb.Color.gray.withA(.5);wb.opacity=1;wb.tree._dropInProgress=!1;wb.tree.refresh()};ub.isTree?ub.insertAtPlaceholder(this).then(pb):
ub.isContainer?ub.insertAsChild(this).then(pb):pb()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Cb.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var pb=this,ub=this.tree.treeData;return ub&&ub.asList().find(function(wb){return wb.container===pb})}}}}}],hd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:498,end:2975})}(Cb.Morph);Cb.InteractiveTreeContainer=Nb;Cb.InteractiveTreeContainer=Nb;Cb.InteractiveTreeContainer=Nb;Nb=function(sb){var hd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),md=hd.hasOwnProperty("InteractiveTreeData")&&"function"===typeof hd.InteractiveTreeData?hd.InteractiveTreeData:hd.InteractiveTreeData=function(pb){pb&&
pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,[{key:"display",value:function(pb){return[pb.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(pb){return pb.isCollapsed}},{key:"collapse",value:function(pb,ub){pb.isCollapsed=ub}},{key:"getChildren",value:function(pb){var ub=this;return pb.isLeaf?null:pb.children.filter(function(wb){return wb&&(ub.filterActive?wb.visible:!0)})}},{key:"isLeaf",value:function(pb){var ub=
this;return!pb.children||0==pb.children.filter(function(wb){return wb&&(ub.filterActive?wb.visible:!0)}).length}},{key:"add",value:function(pb,ub,wb){ub=void 0===ub?this.root:ub;ub.children||(ub.children=[]);wb?Cb.arr.pushAt(ub.children,pb,ub.children.indexOf(wb)):ub.children.push(pb);ub.isLeaf=!1}},{key:"replace",value:function(pb,ub){var wb=this.parentNode(pb);pb=wb.children.indexOf(pb);wb.children[pb]=ub}},{key:"next",value:function(pb){var ub=this.parentNode(pb);return ub&&ub.children[ub.children.indexOf(pb)+
1]}},{key:"isBefore",value:function(pb,ub){this.next(pb)===ub}},{key:"isAfter",value:function(pb,ub){this.next(ub)===pb}},{key:"addBefore",value:function(pb,ub){this.add(pb,this.parentNode(ub),ub)}},{key:"addAfter",value:function(pb,ub){var wb=this.parentNode(ub);ub=wb.children.indexOf(ub)+1;this.add(pb,wb,wb.children[ub])}},{key:"remove",value:function(pb){var ub=this.parentNode(pb);if(ub)return Cb.arr.remove(ub.children,pb),ub.children==[]&&(ub.children=null),pb}},{key:"filter",value:function(pb,
ub){ub=void 0===ub?1:ub;var wb=this,yd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){if(1==Zd.nextAddress)return Zd.yield(wb.uncollapseAll(function(Je,Dc){return Dc<ub+1}),2);yd=wb.filterActive;wb.filterActive=!1;wb.asListWithIndexAndDepth(!1).reverse().forEach(function(Je){var Dc=Je.node;if(0==Je.depth)return Dc.visible=!0;Dc.visible=pb(Dc);Dc.visible||Dc.isCollapsed||!Dc.children.find(function(re){return re.visible})?Dc.container.opacity=1:(Dc.visible=!0,Dc.container.opacity=.5);
return Dc.visible});wb.filterActive=yd;Zd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],hd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:2984,end:5441})}(Cb.TreeData);Cb.InteractiveTreeData=Nb;Cb.InteractiveTreeData=Nb;Cb.InteractiveTreeData=
Nb;Nb=function(sb){var hd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),md=hd.hasOwnProperty("InteractiveTree")&&"function"===typeof hd.InteractiveTree?hd.InteractiveTree:hd.InteractiveTree=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,[{key:"update",value:function(pb){var ub=this;Ba._get(Object.getPrototypeOf(md.prototype),"update",this).call(this,pb);this.treeData&&this.relayoutContainers();
pb&&this.embeddedMorphs.forEach(function(wb){wb.isContainer&&(wb.fill=Cb.Color.transparent,wb.fontFamily=ub.fontFamily,wb.fontSize=ub.fontSize)})}},{key:"onDrop",value:function(pb){Ba._get(Object.getPrototypeOf(md.prototype),"onDrop",this).call(this,pb);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(pb){}},{key:"onDropHoverUpdate",value:function(pb){}},{key:"onDropHoverOut",value:function(pb){}},{key:"onHoverOut",value:function(pb){var ub=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){Ba._get(Object.getPrototypeOf(md.prototype),
"onHoverOut",ub).call(ub,pb);ub._previewNode&&ub._previewNode.container.world()&&ub.treeData.remove(ub._previewNode);ub.resetContainerSelection();ub.update(!0);wb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(pb){var ub=this,wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return wb=ub.treeData.parentNode(ub._previewNode),ub.treeData.replace(ub._previewNode,pb._data),ub.treeData.remove(ub._previewNode),yd.yield(ub.whenRendered(),2);ub.update(!0);
wb.container.onChildAdded(pb);yd.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var pb=this;if(!this._scrollingUp){this._scrollingUp=!0;var ub=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){if(1==wb.nextAddress)return pb._scrollingUp&&0<pb.scroll.y?wb.yield(pb.animate({scroll:pb.scroll.subXY(0,30),duration:300,easing:Cb.easings.linear}),3):(pb._scrollingUp=!1,wb.jumpTo(0));ub();wb.jumpToEnd()})};ub()}}},{key:"scrollDownSlowly",value:function(){var pb=this;if(!this._scrollingDown){this._scrollingDown=
!0;var ub=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){if(1==wb.nextAddress)return pb._scrollingDown&&pb.scroll.y<pb.scrollExtent.y-pb.height?wb.yield(pb.animate({scroll:pb.scroll.addXY(0,30),duration:300,easing:Cb.easings.linear}),3):(pb._scrollingDown=!1,wb.jumpTo(0));ub();wb.jumpToEnd()})};ub()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(pb){pb.isContainer&&
(pb.fill=Cb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(pb){var ub=this;pb=this.localize(pb.globalBounds().center());var wb=this.textPositionFromPoint(pb),yd=this.treeData.asListWithIndexAndDepth(function(we){we=we.node;return we!=ub._previewNode&&we.container.world()}),Zd=(yd.find(function(we){return we.i-1===wb.row})||{}).node,Je=Zd&&Zd.container,Dc=this.ensurePlaceholder(),re=!!Dc.container.world(),cd=pb.subPt(this.scroll).subPt(this.scrollbarOffset);10>cd.y?this.scrollUpSlowly():
cd.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Je){if(yd.length>wb.row||Cb.arr.last(this.treeData.root.children)===Dc)return;this.treeData.remove(Dc);this.treeData.add(Dc);this.update(!0)}if(Je){yd=this.textLayout.boundsFor(this,wb);if(4>Math.abs(yd.top()-pb.y)){if(this.treeData.isBefore(Dc,Zd))return;this.treeData.remove(Dc);this.treeData.addBefore(Dc,Zd)}else if(4>Math.abs(yd.bottom()-pb.y)&&(Zd.isCollapsed||this.treeData.isLeaf(Zd))){if(this.treeData.isAfter(Dc,
Zd))return;this.treeData.remove(Dc);this.treeData.addAfter(Dc,Zd)}else{Je.fill=Cb.Color.gray;if(!re)return;this.treeData.remove(Dc)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var pb=Cb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:Cb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Cb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=pb;return this._previewNode}},{key:"relayoutContainers",
value:function(){var pb=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(ub){return ub.height});this.treeData.asListWithIndexAndDepth().forEach(function(ub){var wb=ub.node;ub=ub.i;wb.container.nativeCursor="grab";wb.container.width=pb.width-25-wb.container.left;wb.container.toggleSelected&&wb.container.toggleSelected(ub==pb.selectedIndex)});this.anchors.forEach(function(ub){return ub.position=ub.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],hd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:5450,end:10824})}(Cb.Tree);Cb.InteractiveTree=Nb;Cb.InteractiveTree=Nb;Cb.InteractiveTree=Nb;Nb=function(sb){var hd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),md=hd.hasOwnProperty("SceneGraphTree")&&
"function"===typeof hd.SceneGraphTree?hd.SceneGraphTree:hd.SceneGraphTree=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(pb){var ub=this.treeData.asList().find(function(wb){return wb.container.target===pb});ub&&this.selectedNode!=ub&&this.selectPath(this.treeData.pathOf(ub))}},{key:"onLoad",
value:function(){var pb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress){if(pb.ownerChain().find(function(wb){return wb.isComponent}))return ub.return();pb.submorphs=[];return ub.yield(pb.whenRendered(),2)}pb.get("inspector").makeEditorVisible(!0);pb.get("inspector").makeEditorVisible(!1);pb.setTarget($world);ub.jumpToEnd()})}},{key:"adjustProportions",value:function(pb){pb=(pb?pb.state.dragDelta:{y:0}).y;var ub=this.get("inspector"),wb=this.get("scene graph resizer"),
yd=this.get("mode selector"),Zd=this.get("connections tree");this.height+=pb;ub.height-=pb;Zd.height-=pb;wb.top=this.bottom;wb.left=0;yd.top=wb.bottom;Zd.top=ub.top=yd.bottom+5}},{key:"reset",value:function(){var pb=this;this.treeData=new Cb.InteractiveTreeData({children:[],container:Cb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(ub){return null==ub.id}).forEach(function(ub){return pb.removeAnchor(ub)})}},{key:"setTarget",value:function(pb){this.target=
pb;this.treeData=this.getTreeFromSubmorphHierarchy(pb);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(pb){var ub=this;if(pb===this._previewNode)return!1;if(pb.container.nameNeedsUpdate)return!0;var wb=pb.container.target.submorphs.filter(function(yd){return!ub.ignoreMorph(yd)});return wb.length!=pb.children.length||wb.map(function(yd){return yd.name}).join("")!=pb.children.map(function(yd){return yd.target?yd.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(pb){var ub=
this,wb=pb.container.target.submorphs.map(function(re){return re.__scene_graph_target__?re.__scene_graph_target__():re}).filter(function(re){return!ub.ignoreMorph(re)}),yd=[],Zd={},Je;for(Je in wb){Zd.$jscomp$loop$prop$m$2574=wb[Je];var Dc=Cb.arr.without(pb.children,this._previewNode).find(function(re){return function(cd){return cd.container.target.id==re.$jscomp$loop$prop$m$2574.id}}(Zd));yd[Je]=Dc?Dc:this.readMorphHierarchy(Zd.$jscomp$loop$prop$m$2574);Zd={$jscomp$loop$prop$m$2574:Zd.$jscomp$loop$prop$m$2574}}return yd}},
{key:"refresh",value:function(){var pb=this;if(!this._updating&&!this._dropInProgress){var ub=!1;Cb.tree.prewalk(this.treeData.root,function(wb){pb.isNodeOutOfSync(wb)&&(ub=!0,wb.name=wb.container.target.name,wb.container.refresh(),wb.children=pb.getNewChildren(wb))},function(wb){return wb.children});this.update(ub)}}},{key:"ignoreMorph",value:function(pb){return pb.isMorph?pb.isContainer||pb.isWindow||pb.getWindow()||pb.isEpiMorph||pb.isHand||["lively.halos"].includes(pb.constructor[Symbol.for("lively-module-meta")].package.name)||
["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(pb.constructor.name):!1}},{key:"onDropHoverOut",value:function(pb){var ub=pb.hand.grabbedMorphs[0];pb=pb.hand.findDropTarget();if(!(pb===this||pb&&pb.ownerChain().includes(this))&&ub&&ub.isContainer)ub.onDragOutside()}},{key:"onDropHoverIn",value:function(pb){var ub=pb.hand.grabbedMorphs[0];ub&&!ub.isContainer&&($world.halos().forEach(function(wb){return wb.remove()}),ub.remove(),Object.assign(ub,pb.hand._grabbedMorphProperties.get(ub).pointerAndShadow),
ub=this.renderContainerFor(ub,!1),pb.hand.grab(ub),ub.leftCenter=Cb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(pb){return new Cb.InteractiveTreeData(this.readMorphHierarchy(pb))}},{key:"readMorphHierarchy",value:function(pb){var ub=this;return Cb.tree.mapTree(pb,function(wb,yd){return{name:wb.name,isCollapsed:!0,container:ub.renderContainerFor(wb),visible:!0,children:yd}},function(wb){return wb.submorphs.filter(function(yd){return wb.isWorld?!ub.ignoreMorph(yd):!0})})}},{key:"renderContainerFor",
value:function(pb,ub){pb=void 0===pb?Cb.morph({name:"root"}):pb;ub=new Cb.MorphContainer({tree:this,fill:void 0===ub||ub?Cb.Color.transparent:Cb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:pb,opacity:pb.visible?1:.5});pb._data?(ub._data=pb._data,pb._data.container=ub):ub._data={name:pb.name,isCollapsed:!0,container:ub,children:[]};return ub}},{key:"collapseAll",value:function(){var pb=this;this.treeData.asList().forEach(function(ub){return ub!=pb.treeData.root?
ub.isCollapsed=!0:ub.isCollapsed=!1})}},{key:"filterMorphs",value:function(pb){var ub=this,wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return wb=pb.tokens[0],ub.treeData.filterActive||(ub._collapseState=new WeakMap(ub.treeData.asList().map(function(Zd){return[Zd,Zd.isCollapsed]}))),ub.treeData.filterActive=!!wb,yd.yield(ub.treeData.filter(function(Zd){var Je=!wb||Zd.container.target.name.includes(wb);Zd.container.highlightTerm(wb);return Je},3),2);ub.treeData.filterActive||
ub.treeData.asList().forEach(function(Zd){return Zd.isCollapsed=ub._collapseState.has(Zd)?ub._collapseState.get(Zd):!0});ub.refresh();yd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],hd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1103"}}},{start:10833,end:17410})}(Cb.InteractiveTree);Cb.SceneGraphTree=Nb;Cb.SceneGraphTree=Nb;Cb.SceneGraphTree=Nb;Nb=function(sb){var hd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),md=hd.hasOwnProperty("MorphContainer")&&"function"===typeof hd.MorphContainer?hd.MorphContainer:hd.MorphContainer=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,[{key:"refresh",value:function(){var pb=
this,ub,wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){ub=pb.target;if(!ub)return yd.return();pb.reactsToPointer=!0;pb.dropShadow=!1;pb.submorphs=[pb.getLabel(),ub.layout&&pb.getLayoutControls(),pb.getConnectionControls()].filter(Boolean).map(function(Zd,Je){Zd.fitIfNeeded();Zd.left=wb?wb.right+5:0;Zd.top=2;return wb=Zd});pb.height=20;pb.opacity=ub.visible?1:.5;yd.jumpToEnd()})}},{key:"getLabel",value:function(){var pb=this.getSubmorphNamed("name label")||Cb.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:Cb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),ub=pb.textString.slice(2,-1);ub&&ub==this.target.name||(pb.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return pb}},{key:"getIcon",value:function(pb){return Cb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Cb.getClassName(pb)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var pb=this.getSubmorphNamed("layout label")||Cb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Cb.Rectangle.inset(4,2,4,2),fill:Cb.Color.orange,fontColor:Cb.Color.white});pb._isControlElement=!0;pb.textString!=this.target.layout.name()&&(pb.value=this.target.layout.name());return pb}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(wb){return!wb.targetObj.isHalo}).length:0;var pb=this.getSubmorphNamed("connections label")||Cb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Cb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Cb.Color.red,fontColor:Cb.Color.white});pb._isControlElement=!0;pb.visible=!this.connectionHalo&&!!this.connectionCount;var ub=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";pb.textString!=ub&&(pb.value=ub);return pb}},{key:"highlightTerm",value:function(pb){var ub=this.submorphs[0],wb=ub.textAndAttributes.slice(0,2),yd=ub.textString.slice(1).split(pb);ub.textAndAttributes=1===yd.length?[].concat($jscomp.arrayFromIterable(wb),[yd[0]]):[].concat($jscomp.arrayFromIterable(wb),$jscomp.arrayFromIterable(Cb.arr.flatten(Cb.arr.interpose(yd.map(function(Zd){return[Zd,{}]}),[pb,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(pb){var ub=Ba._get(Object.getPrototypeOf(md.prototype),"wantsToBeDroppedOn",this).call(this,pb);if(![pb].concat($jscomp.arrayFromIterable(pb.ownerChain())).includes(this.tree))this.onDragOutside();return ub}},{key:"onGrab",value:function(pb){var ub=this,wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yd){if(1==yd.nextAddress)return ub.tree._dropInProgress=!0,wb=ub.target.globalPosition,Ba._get(Object.getPrototypeOf(md.prototype),
"onGrab",ub).call(ub,pb),ub._data.globalTargetPosition=wb,yd.yield(ub.whenRendered(),2);if(ub.tree.fullContainsWorldPoint(ub.globalPosition))ub.leftCenter=Cb.pt(-20,0);else ub.onDragOutside();ub.tree._dropInProgress=!1;yd.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Cb.fun.createQueue("container-hover-queue",function(pb,ub){var wb,yd,Zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Je){if(1==Je.nextAddress)return wb=
pb.target,yd=wb.opacity,Zd=wb.scale,pb.target.opacity=0,pb.target.scale=.5,$world.halos().forEach(function(Dc){return Dc.remove()}),$world.firstHand.grab(pb.target),pb.target._data=pb._data,pb.remove(),pb.target.position=Cb.pt(0,0),Je.yield(pb.target.animate({opacity:yd,scale:Zd,duration:200}),2);ub();Je.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(pb){var ub=this.node.children.indexOf(pb.node||pb._data)+1;ub=this.node.children[ub];pb.target.remove();ub?(ub=this.target.submorphs.indexOf(ub.container.target),
this.target.addMorphAt(pb.target,ub)):this.target.addMorph(pb.target);pb._data.globalTargetPosition&&(pb.target.position=this.target.localize(pb._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(pb){}},{key:"toggleConnectionControl",value:function(pb){this.getSubmorphNamed("connections label").visible=pb}},{key:"toggleSelected",value:function(pb){var ub=this,wb,yd,Zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Je){if(1==Je.nextAddress)return Ba._get(Object.getPrototypeOf(md.prototype),
"toggleSelected",ub).call(ub,pb),ub._active===pb?Je.return():(ub._active=pb)&&ub.target&&ub.target.isMorph&&ub.world()?Je.yield(ub.target.whenRendered(),3):Je.jumpTo(0);ub.get("inspector").targetObject=ub.target;ub.get("connections tree").inspectConnectionsOf(ub.target);if(ub.connectionHalo)return Je.return();wb=$jscomp.makeIterator(ub.world().halos());for(yd=wb.next();!yd.done;yd=wb.next()){Zd=yd.value;if(Zd.target===ub.target)return Je.return();Zd.remove()}Cb.noUpdate({sourceObj:ub.world(),targetObj:ub.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return ub.world().showHaloFor(ub.target)});Je.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(pb){this.submorphs[0].fontFamily=pb}},fontColor:{after:["submorphs"],derived:!0,set:function(pb){this.submorphs[0].fontColor=pb}},fontSize:{derived:!0,set:function(pb){this.submorphs[0].fontSize=
pb}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],hd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:17420,end:25092})}(Cb.InteractiveTreeContainer);Cb.MorphContainer=Nb;Cb.MorphContainer=Nb;Cb.MorphContainer=Nb;var $c=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");$c.visualizeConnection=function(sb,hd,md,pb,ub){pb=void 0===pb?{}:pb;ub=$c.rect(0).sides.concat($c.rect(0).corners);
md=md||new $c.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:$c.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:$c.Color.transparent,nativeCursor:"auto"},end:{fill:$c.Color.orange}}},pb,{hasFixedPosition:!0}));md.startPoint.attachTo(sb,"rightCenter");hd.isMorph?(pb=hd.globalBounds().partNameNearest(ub,sb.globalPosition),sb.globalPosition.equals(hd.globalBounds().partNamed(pb))&&hd.globalBounds().partNameNearest($c.arr.without(ub,pb),sb.globalPosition),md.endPoint.attachTo(hd,
"leftCenter")):(ub=sb.globalBounds().topRight().addPt($c.pt(100,0)),hd=$c.morph({type:"label",value:hd.toString(),styleClasses:["Tooltip"],padding:$c.rect(8,4)}).openInWorld(ub),hd.position=sb.world().bounds().translateForInclusion(hd.bounds()).topLeft(),$c.once(md,"remove",hd,"remove"),md.endPoint.attachTo(hd,"leftCenter"));return md};$c.startConnecting=function(sb,hd){sb.animate({opacity:.8,duration:300});sb.startPoint.attachTo(hd,"center");sb.vertices[0].position=$c.pt(2,2)};$c.stopConnecting=
function(sb,hd,md,pb){function ub(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Je){if(1==Je.nextAddress)return Je.yield(sb.animate({opacity:0,duration:300}),2);sb.startPoint.clearConnection();sb.endPoint.clearConnection();sb.remove();Je.jumpToEnd()})}pb=void 0===pb?!1:pb;var wb,yd,Zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Je){return 1==Je.nextAddress?(wb=sb,yd=wb.endPoint,(Zd=yd.connectedMorph)&&"MorphContainer"==Zd.constructor.className&&(Zd=Zd.target),Zd?Je.yield($c.interactiveConnectGivenSourceAndTarget(md,
pb,Zd),2):Je.jumpTo(2)):Je.yield(ub(),0)})};$c.editConnection=function(sb){var hd=sb.connection,md=sb.connectionPoint,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return pb=$c.visualizeConnection(md,hd.targetObj,!1,{borderColor:$c.Color.gray.darker(),endpointStyle:{start:{fill:$c.Color.transparent,nativeCursor:"auto"},end:{fill:$c.Color.gray.darker()}}}),ub.yield($c.interactivelyReEvaluateConnection(hd,"Edit Connection",!1),2);pb.remove();ub.jumpToEnd()})};
$c.Tree=Ic;$c.TreeData=Cc;$c.Icon=fc;$c.morph=pe;$c.pt=bc;$c.Rectangle=Hb;$c.rect=Oc;$c.Color=Yc;$c.arr=qd;$c.connect=Vc;$c.signal=eb;$c.Leash=Sb;$c.once=cb;$c.interactivelyReEvaluateConnection=vc;$c.interactiveConnectGivenSource=ab;$c.interactiveConnectGivenSourceAndTarget=rb;(function(sb){var hd=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),md=hd.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof hd.ConnectionsTreeData?hd.ConnectionsTreeData:hd.ConnectionsTreeData=function(pb){pb&&
pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(md,sb,[{key:"parseMorphConnections",value:function(pb){for(var ub={},wb=$jscomp.makeIterator(void 0===pb.attributeConnections?[]:pb.attributeConnections),yd=wb.next();!yd.done;yd=wb.next())yd=yd.value,yd.targetObj.isHalo||(ub[yd.sourceAttrName]=ub[yd.sourceAttrName]||[{name:["      New Connection  ",{fontColor:$c.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(pb,yd.sourceAttrName),
{}]}],$c.arr.pushAt(ub[yd.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(yd)))},0));return{children:Object.entries(ub).map(function(Zd){var Je=$jscomp.makeIterator(Zd);Zd=Je.next().value;Je=Je.next().value;return{name:[Zd,{fontWeight:"bold"}," ",{},$c.morph({fill:$c.Color.white,opacity:.7,value:""+(Je.length-1),borderRadius:15,fontWeight:"bold",padding:$c.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Je}}).concat([{name:["New Connection  ",
{fontColor:$c.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(pb),{}]}])}}},{key:"renderExistingConnection",value:function(pb){var ub=this,wb=$c.morph({type:"label",fontColor:$c.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable($c.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},pb.targetMethodName,{}])}),yd=this.renderDeadPin(),Zd=yd.submorphs[0];$c.connect(wb,"onHoverIn",function(){wb.fontColor=$c.Color.orange;wb._leash=$c.visualizeConnection(Zd,
pb.targetObj,wb._leash);Zd.fill=$c.Color.orange;Zd.border={color:$c.Color.orange,width:3}});$c.connect(wb,"onMouseDown",function(Je){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dc){if(1==Dc.nextAddress)return Je.stop(),Dc.yield($c.interactivelyReEvaluateConnection(pb),2);$c.signal(ub,"refresh");Dc.jumpToEnd()})});$c.connect(wb,"onHoverOut",function(){wb.fontColor=$c.Color.gray;Zd.fill=$c.Color.gray;Zd.border={color:$c.Color.white,width:1};wb._leash.remove();wb._leash=void 0});return[wb,
{},"  ",{}].concat($jscomp.arrayFromIterable($c.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){pb.disconnect();$c.signal(ub,"refresh")}})),["  ",{},yd,{}])}},{key:"renderDeadPin",value:function(){var pb=$c.morph({type:"ellipse",fill:$c.Color.gray,extent:$c.pt(10,10),center:$c.pt(8,12),borderWidth:1});return $c.morph({extent:$c.pt(20,20),fill:$c.Color.transparent,reactsToPointer:!1,submorphs:[pb]})}},{key:"renderPin",value:function(pb,ub){var wb=this,yd=$c.morph({type:"ellipse",
fill:$c.Color.gray.withA(.5),extent:$c.pt(10,10),center:$c.pt(8,12),draggable:!1,borderWidth:1}),Zd=new $c.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:$c.Color.gray.darker(),endpointStyle:{fill:$c.Color.gray.darker()},position:$c.pt(1,1),vertices:[$c.pt(0,0),$c.pt(0,0)],canConnectTo:function(Je){return"MorphContainer"==Je.constructor.className||2>$c.arr.intersect([Je].concat($jscomp.arrayFromIterable(Je.ownerChain())),[yd].concat($jscomp.arrayFromIterable(yd.ownerChain()))).length}});
yd.addMorph(Zd);$c.connect(Zd.endPoint,"onDragStart",function(){$c.startConnecting(Zd,yd)});$c.connect(Zd.endPoint,"onDragEnd",function(Je){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dc){if(1==Dc.nextAddress)return yd.center=$c.pt(8,12),Dc.yield($c.stopConnecting(Zd,yd,pb,ub),2);$c.signal(wb,"refresh");Dc.jumpToEnd()})});return $c.morph({extent:$c.pt(20,20),fill:$c.Color.transparent,reactsToPointer:!1,submorphs:[yd]})}},{key:"display",value:function(pb){return pb.name}},{key:"collapse",
value:function(pb,ub){pb.isCollapsed=ub}},{key:"isCollapsed",value:function(pb){return pb.isCollapsed}},{key:"isLeaf",value:function(pb){return!pb.children}},{key:"getChildren",value:function(pb){return pb.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(pb){var ub=new this;ub.root=ub.parseMorphConnections(pb);return ub}}],hd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3524,end:8076})})($c.TreeData);Nb=function(sb){var hd=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),md=hd.hasOwnProperty("ConnectionsTree")&&"function"===typeof hd.ConnectionsTree?hd.ConnectionsTree:hd.ConnectionsTree=function(pb){pb&&pb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Ba(md,sb,[{key:"inspectConnectionsOf",value:function(pb){if(this.targetMorph=pb)this.treeData=$c.ConnectionsTreeData.for(pb),$c.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=$c.ConnectionsTreeData.for(this.targetMorph),$c.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],hd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8093,end:8646})}($c.Tree);Nb=$c.ConnectionsTree;$c.default=Nb}}});