System.register(["./__root_module__-896eff71.js"],function($a){var Vb,jc,Wc,wc,Ud,Kd,he,xd,gd,Ld,Pd,af,bf,Ve,Ad,xe,qc,td,be,Bd,pe,Se,nc,$c,ge,ad,ie,Yb,zb,Rc,Mc,tc,Tc,fb,uc,Rb,Fc,Uc,vd,Xd;return{setters:[function(vc){Vb=vc.f;jc=vc.p;Wc=vc.C;wc=vc.m;Ud=vc._;Kd=vc.a;he=vc.c;xd=vc.R;gd=vc.a2;Ld=vc.e;Pd=vc.V;af=vc.I;bf=vc.M;Ve=vc.ax;Ad=vc.d;xe=vc.o;qc=vc.a1;td=vc.i;be=vc.S;Bd=vc.ah;pe=vc.O;Se=vc.ae;nc=vc.k;$c=vc.ac;ge=vc.P;ad=vc.ay;ie=vc.n;Yb=vc.b;zb=vc.g;Rc=vc.az;Mc=vc.aA;tc=vc.aB;Tc=vc.h;fb=vc.aC;
uc=vc.Y;Rb=vc.ad;Fc=vc.aD;Uc=vc.aE;vd=vc.B;Xd=vc.j}],execute:function(){function vc(gc){(gc=oa.cachedGuideLines.get(gc))&&gc.forEach(function(Tb){return Tb.remove()})}function Oc(gc,Tb,Ya,ha,Pa){Tb=void 0===Tb?!0:Tb;Ya=void 0===Ya?!0:Ya;ha=void 0===ha?10:ha;Pa=void 0===Pa?100:Pa;if(Tb||Ya){var nb=gc.owner,cc=nb.world();nb=nb.getGlobalTransform();var Lc=gc.owner.submorphs.filter(function(lb){return lb!==gc&&!lb.isEpiMorph&&lb.visible&&lb.reactsToPointer}),pd=oa.findAlignedMorphs(gc,Lc,ha,Pa,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));Pa=[];var ce=0,Ie=0,Gd=0,Af=0;nb.e-=cc.scroll.x;nb.f-=cc.scroll.y;if(pd){pd=$jscomp.makeIterator(pd);for(var Ce=pd.next();!Ce.done;Ce=pd.next()){Ce=$jscomp.makeIterator(Ce.value);Ce.next();var zf=Ce.next().value;Ce=zf.vertical;zf=$jscomp.makeIterator(zf.horizontal);for(var C=zf.next();!C.done;C=zf.next()){C=C.value;var uf=C.edgeAVal,Cf=C.refPointsA,fh=C.refPointsB,mg=C.edgeBVal,we=Math.ceil(ha-C.delta),$f=Math.min(Cf.top,fh.top);Cf=Math.max(Cf.bottom,
fh.bottom);C.maxDist>ha&&(we-=ha/2);ce<we&&(ce=we,Gd=mg-uf);Pa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:oa.guideWidth,start:nb.transformPoint(oa.pt(mg,$f)),end:nb.transformPoint(oa.pt(mg,Cf)),fill:oa.guideColor,guideType:"h",priority:we})}Ce=$jscomp.makeIterator(Ce);for(zf=Ce.next();!zf.done;zf=Ce.next())zf=zf.value,C=zf.edgeAVal,$f=zf.refPointsA,Cf=zf.refPointsB,uf=zf.edgeBVal,mg=Math.ceil(ha-zf.delta),we=Math.min($f.left,Cf.left),$f=Math.max($f.right,Cf.right),zf.maxDist>ha&&(mg-=
ha/2),Ie<mg&&Math.abs(uf-C)<=ha&&(Ie=mg,Af=uf-C),Pa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:oa.guideWidth,start:nb.transformPoint(oa.pt(we,uf)),end:nb.transformPoint(oa.pt($f,uf)),fill:oa.guideColor,guideType:"v",priority:mg})}}if(!ce||!Ie){Lc=[gc].concat($jscomp.arrayFromIterable(Lc));C=oa.computeClosestMorphs(Lc);zf=C[0];Lc=zf.l;pd=zf.r;Ce=zf.t;zf=zf.b;var dg;if(Lc||pd||Ce||zf){var tg=(Lc||pd||Ce||zf).refPointsA;for(uf=1;uf<C.length&&(Cf=C[uf],mg=Cf.l,we=Cf.r,$f=Cf.t,Cf=Cf.b,ce||
(Lc&&mg&&Lc.index!==mg.index&&Math.abs(mg.dist-Lc.dist)<=ha?dg=Object.assign({neighbor:uf,direction:"left"},mg):pd&&we&&pd!==we.index&&Math.abs(we.dist-pd.dist)<=ha&&(dg=Object.assign({neighbor:uf,direction:"right"},we))),Ie||(Ce&&$f&&Ce.index!==$f.index&&Math.abs($f.dist-Ce.dist)<=ha?dg=Object.assign({neighbor:uf,direction:"top"},$f):zf&&Cf&&zf.index!==Cf.index&&Math.abs(Cf.dist-zf.dist)<=ha&&(dg=Object.assign({neighbor:uf,direction:"bottom"},Cf))),!dg);uf++);}if(dg){var Ah=dg;ha=Ah.direction;$f=
Ah.dist;var Ze=tg.left;fh=tg.top;var ld=tg.bottom,fi=tg.right,Vd=tg.width,si=tg.height;Cf=Ah.refPointsA;tg=Cf.left;C=Cf.top;uf=Cf.bottom;mg=Cf.right;we=Cf.width;Cf=Cf.height;var wd=Ah.refPointsB,hb=wd.left;Ah=wd.top;var yb=wd.bottom;wd=wd.right;fi="left"===ha?Ze:"right"===ha?fi:Ze+Vd/2;ld="bottom"===ha?ld:"top"===ha?fh:fh+si/2;Ze="left"===ha?fi-$f:"right"===ha?fi+$f:Ze+Vd/2;$f="bottom"===ha?ld+$f:"top"===ha?ld-$f:fh+si/2;fh="left"===ha?wd:"right"===ha?hb:tg+we/2;Vd="bottom"===ha?Ah:"top"===ha?yb:
C+Cf/2;!Ya||ce||"right"!==ha&&"left"!==ha||(ce=10,Gd=(dg.dist-(pd||Lc).dist)*("right"===ha?-1:1),fi+=Gd,Ze+=Gd);!Ya||Ie||"top"!==ha&&"bottom"!==ha||(Ie=10,Af=((Ce||zf).dist-dg.dist)*("top"===ha?-1:1),ld+=Af,$f+=Af);Pa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:nb.transformPoint(oa.pt("left"===ha?tg:"right"===ha?mg:tg+we/2,"bottom"===ha?uf:"top"===ha?C:C+Cf/2)),end:nb.transformPoint(oa.pt(fh,Vd)),fill:oa.Color.orange,height:oa.guideWidth,guideType:ha,priority:10},{type:"line",epiMorph:!0,
hasFixedPosition:!0,start:nb.transformPoint(oa.pt(fi,ld)),end:nb.transformPoint(oa.pt(Ze,$f)),fill:oa.Color.orange,height:oa.guideWidth,guideType:ha,priority:10})}}Ya&&(Gd||Af)&&gc.moveBy(oa.pt(Gd,Af));if(Tb){Pa=Pa.filter(function(lb){var qa=lb.guideType;lb=lb.priority;return"h"===qa?lb===ce:"v"===qa?lb===Ie:!0});(Tb=oa.cachedGuideLines.get(gc))||oa.cachedGuideLines.set(gc,Tb=[]);for(Ya=0;Ya<Pa.length;Ya++)dg=void 0,Tb[Ya]?dg=Object.assign(Tb[Ya],Pa[Ya]):(dg=oa.morph(Pa[Ya]),Tb.push(dg)),dg.owner||
cc.addMorph(dg);Tb.slice(Ya).forEach(function(lb){return lb.remove()});oa.fun.debounceNamed(gc.id+"-drag-guides-cleanup",1300,function(){var lb=oa.cachedGuideLines.get(gc);lb&&lb.forEach(function(qa){return qa.remove()})})()}}}function pc(gc,Tb,Ya,ha,Pa,nb){Ya=void 0===Ya?!0:Ya;ha=void 0===ha?!0:ha;Pa=void 0===Pa?5:Pa;nb=void 0===nb?100:nb;if(Ya||ha){var cc=gc.owner,Lc=cc.world(),pd=cc.getGlobalTransform(),ce=gc.owner.submorphs.filter(function(ld){return ld!==gc&&!ld.isEpiMorph&&ld.visible&&ld.reactsToPointer});
cc=(Tb.includes("left")||Tb.includes("right")?"x":"")+(Tb.includes("top")||Tb.includes("bottom")?"y":"");var Ie=oa.findMorphsWithSimilarWidthOrHeight(gc,cc,ce,Pa,nb),Gd=-Infinity,Af=-Infinity,Ce=0,zf=0,C=0,uf=0,Cf=0,fh=0;cc=[];pd.e-=Lc.scroll.x;pd.f-=Lc.scroll.y;if(Ie){Ie=$jscomp.makeIterator(Ie);for(var mg=Ie.next();!mg.done;mg=Ie.next()){mg=$jscomp.makeIterator(mg.value);mg.next();var we=mg.next().value;mg=we.similarIn;var $f=we.delta,dg=we.refPointsA,tg=we.refPointsB;we=Pa-$f+(nb-we.minDist);"width"===
mg?Gd<we&&(Gd=we,Tb.includes("left")&&(zf=-$f),Tb.includes("right")&&(Ce=$f)):Af<we&&(Af=we,Tb.includes("top")&&(C=-$f),Tb.includes("bottom")&&(uf=$f));$f={type:"line",epiMorph:!0,hasFixedPosition:!0,height:oa.guideWidth,fill:oa.guideColor,guideType:mg,priority:we,start:pd.transformPoint("width"===mg?oa.pt(dg.left,dg.top+dg.height/2):oa.pt(dg.left+dg.width/2,dg.top)),end:pd.transformPoint("width"===mg?oa.pt(dg.right,dg.top+dg.height/2):oa.pt(dg.left+dg.width/2,dg.bottom))};mg=Object.assign({},$f,
{start:pd.transformPoint("width"===mg?oa.pt(tg.left,tg.top+tg.height/2):oa.pt(tg.left+tg.width/2,tg.top)),end:pd.transformPoint("width"===mg?oa.pt(tg.right,tg.top+tg.height/2):oa.pt(tg.left+tg.width/2,tg.bottom))});cc.push($f,mg)}}if(nb=oa.findAlignedMorphs(gc,ce,Pa,nb,Tb,void 0))for(nb=$jscomp.makeIterator(nb),ce=nb.next();!ce.done;ce=nb.next()){ce=$jscomp.makeIterator(ce.value);ce.next();Ie=ce.next().value;ce=Ie.vertical;Ie=$jscomp.makeIterator(Ie.horizontal);for(mg=Ie.next();!mg.done;mg=Ie.next()){mg=
mg.value;tg=mg.edgeAVal;var Ah=mg.refPointsA,Ze=mg.refPointsB;$f=mg.edgeBVal;dg=Math.ceil(Pa-mg.delta);we=Math.min(Ah.top,Ze.top);Ah=Math.max(Ah.bottom,Ze.bottom);mg.maxDist>Pa&&(dg-=Pa/2);Cf<dg&&(Cf=dg,Tb.includes("left")&&(zf=-($f-tg)),Tb.includes("right")&&(Ce=+($f-tg)));cc.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:oa.guideWidth,start:pd.transformPoint(oa.pt($f,we)),end:pd.transformPoint(oa.pt($f,Ah)),fill:oa.guideColor,guideType:"h",priority:dg})}ce=$jscomp.makeIterator(ce);for(Ie=
ce.next();!Ie.done;Ie=ce.next())Ie=Ie.value,mg=Ie.edgeAVal,we=Ie.refPointsA,Ah=Ie.refPointsB,tg=Ie.edgeBVal,$f=Math.ceil(Pa-Ie.delta),dg=Math.min(we.left,Ah.left),we=Math.max(we.right,Ah.right),Ie.maxDist>Pa&&($f-=Pa/2),fh<$f&&Math.abs(tg-mg)<=Pa&&(fh=$f,Tb.includes("top")&&(C=tg-mg),Tb.includes("bottom")&&(uf=tg-mg)),cc.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:oa.guideWidth,start:pd.transformPoint(oa.pt(dg,tg)),end:pd.transformPoint(oa.pt(we,tg)),fill:oa.guideColor,guideType:"v",
priority:$f})}ha&&(zf&&(gc.left+=zf,gc.right-=zf),C&&(gc.top+=C,gc.bottom-=C),Ce&&(gc.width+=Ce),uf&&(gc.height+=uf));if(Ya){cc=cc.filter(function(ld){var fi=ld.guideType;ld=ld.priority;return"width"===fi?ld===Gd:"height"===fi?ld===Af:"v"===fi?ld===fh:"h"===fi?ld===Cf:!1});(Tb=oa.cachedGuideLines.get(gc))||oa.cachedGuideLines.set(gc,Tb=[]);for(Ya=0;Ya<cc.length;Ya++)ha=void 0,Tb[Ya]?ha=Object.assign(Tb[Ya],cc[Ya]):(ha=oa.morph(cc[Ya]),Tb.push(ha)),ha.owner||Lc.addMorph(ha);Tb.slice(Ya).forEach(function(ld){return ld.remove()});
oa.fun.debounceNamed(gc.id+"-drag-guides-cleanup",1300,function(){var ld=oa.cachedGuideLines.get(gc);ld&&ld.forEach(function(fi){return fi.remove()})})()}}}function bb(gc,Tb){Tb=void 0===Tb?!1:Tb;var Ya=Ua.MorphicEnv.default().world;if(null===gc||void 0===gc)gc=String(gc);if(gc.isMorph)return Ua.showRect(gc.world(),gc.globalBounds().translatedBy(Ya.scroll.negated()),Tb);if(gc.isPoint)return Ua.showRect(Ya,new Ua.Rectangle(gc.x-5,gc.y-5,10,10));if(gc.isLine)return Ua.showLine(Ya,gc);if(gc.isRectangle)return Ua.showRect(Ya,
gc);if("undefined"!==typeof Ua.Element&&gc instanceof Ua.Element)return Ua.showRect(Ya,Ua.Rectangle.fromElement(gc));if("number"===typeof gc||"symbol"===typeof gc||"boolean"===typeof gc||"undefined"!==typeof Ua.Node&&gc instanceof Ua.Node||gc instanceof RegExp)gc=String(gc);"object"===typeof gc&&(gc=Ua.obj.inspect(gc,{maxDepth:1}));return"string"===typeof gc&&1===arguments.length?Ya.setStatusMessage(gc):Ya.setStatusMessage(Ua.string.formatFromArray(Array.from(arguments)))}function Ma(gc,Tb,Ya){Ya=
void 0===Ya?3E3:Ya;var ha,Pa,nb,cc,Lc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==pd.nextAddress){if(!(gc&&gc.world()&&Tb&&Tb.world()))return pd.return(null);ha=gc.owner.worldPoint(gc.center);Pa=Tb.owner.worldPoint(Tb.center);nb=ha.lineTo(Pa).sampleN(2)[1];cc={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ua.Color.red,fill:Ua.Color.red,cx:5,cy:5,r:4}]};Lc=$world.addMorph(new Ua.Path({position:nb,
renderOnGPU:!0,vertices:[Ua.pt(0),Ua.pt(0)],borderWidth:2,startMarker:cc,endMarker:cc,borderColor:Ua.Color.red}));return pd.yield(Lc.whenRendered(),2)}if(3!=pd.nextAddress)return pd.yield(Lc.animate({opacity:1,customTween:function(ce){var Ie=Lc.center;Lc.vertices=[Ua.pt(0).interpolate(ce,ha.subPt(nb)),Ua.pt(0).interpolate(ce,Pa.subPt(nb))];Lc.center=Ie},duration:400}),3);Ya&&setTimeout(function(){return Lc.fadeOut()},Ya);return pd.return(Lc)})}$a({a:Oc,e:Ma,r:vc,s:bb});var oa=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
oa.removeSnapToGuidesOf=vc;oa.showAndSnapToGuides=Oc;oa.showAndSnapToResizeGuides=pc;oa.computeRefPoints=function(gc){var Tb=gc.x,Ya=gc.y,ha=gc.width;gc=gc.height;return{left:Tb,top:Ya,hCenter:Tb+ha/2,vCenter:Ya+gc/2,right:Tb+ha,bottom:Ya+gc,width:ha,height:gc}};oa.findEdgesInAlignment=function(gc,Tb,Ya,ha,Pa,nb,cc,Lc,pd,ce){Ya=void 0===Ya?15:Ya;nb=void 0===nb?0:nb;cc=void 0===cc?0:cc;Lc=void 0===Lc?0:Lc;pd=void 0===pd?0:pd;ce=void 0===ce?0:ce;for(var Ie=[],Gd=[],Af=0;Af<oa.edges.length;Af++){var Ce=
$jscomp.makeIterator(oa.edges[Af]),zf=Ce.next().value,C=Ce.next().value;Ce=Ce.next().value;var uf=gc[C],Cf=Tb[Ce],fh=Math.max(uf,Cf)-Math.min(uf,Cf);fh>Ya||!(ha&&!ha.includes(C)||Pa&&!Pa.includes(Ce))&&("vertical"===zf?Ie:Gd).push({delta:fh,edgeA:C,edgeB:Ce,edgeAVal:uf,edgeBVal:Cf,refPointsA:gc,refPointsB:Tb,distLeft:nb,distTop:cc,distRight:Lc,distBottom:pd,maxDist:ce})}return Ie.length||Gd.length?{vertical:Ie,horizontal:Gd}:null};oa.findAlignedMorphs=function(gc,Tb,Ya,ha,Pa,nb){Ya=void 0===Ya?15:
Ya;ha=void 0===ha?Infinity:ha;for(var cc,Lc=oa.computeRefPoints(gc.bounds()),pd=0;pd<Tb.length;pd++){var ce=Tb[pd];if(ce!==gc){var Ie=oa.computeRefPoints(ce.bounds()),Gd=Math.max(0,Lc.left-Ie.right),Af=Math.max(0,Ie.left-Lc.right),Ce=Math.max(0,Lc.top-Ie.bottom),zf=Math.max(0,Ie.top-Lc.bottom);Math.max(zf,Ce,Af,Gd)>ha||!(Ie=oa.findEdgesInAlignment(Lc,Ie,Ya,Pa,nb,Gd,Ce,Af,zf,Math.max(zf,Ce,Af,Gd)))||(cc||(cc=new Map),cc.set(ce,Ie))}}gc=gc.owner;Tb=oa.computeRefPoints(gc.innerBounds());if(Ya=oa.findEdgesInAlignment(Lc,
Tb,Ya))cc||(cc=new Map),cc.set(gc,Ya);return cc};oa.findMorphsWithSimilarWidthOrHeight=function(gc,Tb,Ya,ha,Pa){ha=void 0===ha?15:ha;Pa=void 0===Pa?Infinity:Pa;for(var nb,cc=oa.computeRefPoints(gc.bounds()),Lc=0;Lc<Ya.length;Lc++){var pd=Ya[Lc];if(pd!==gc){var ce=oa.computeRefPoints(pd.bounds()),Ie=Math.max(0,cc.left-ce.right),Gd=Math.max(0,ce.left-cc.right),Af=Math.max(0,cc.top-ce.bottom),Ce=Math.max(0,ce.top-cc.bottom),zf=Math.min(Ce,Af,Gd,Ie),C=Math.max(Ce,Af,Gd,Ie);if(!(Math.max(Ce,Af,Gd,Ie)>
Pa)){Gd=cc;Ie=Gd.width;Gd=Gd.height;Ce=ce;Af=Ce.width;Ce=Ce.height;var uf=Af-Ie,Cf=Ce-Gd;("x"===Tb||"xy"===Tb)&&Math.abs(uf)<=ha&&(nb||(nb=new Map),nb.set(pd,{similarIn:"width",minDist:zf,maxDist:C,refPointsA:cc,refPointsB:ce,valA:Ie,valB:Af,delta:uf}));("y"===Tb||"xy"===Tb)&&Math.abs(Cf)<=ha&&(nb||(nb=new Map),nb.set(pd,{similarIn:"height",minDist:zf,maxDist:C,refPointsA:cc,refPointsB:ce,valA:Gd,valB:Ce,delta:Cf}))}}}return nb};oa.closest=function(gc,Tb,Ya,ha,Pa,nb,cc,Lc){Lc=void 0===Lc?!0:Lc;var pd=
ha[gc],ce=Pa[gc],Ie=nb[gc];Tb=cc[gc];for(var Gd,Af,Ce,zf,C=0;C<Pa.length;C++)gc===C||pd<Pa[C]||Gd&&Pa[Gd.index]>=Pa[C]||Lc&&cc[gc]<nb[C]||nb[gc]>cc[C]||(Gd={index:C,dist:pd-Pa[C],refPointsA:Ya[gc],refPointsB:Ya[C]});for(pd=0;pd<ha.length;pd++)gc===pd||ce>ha[pd]||Af&&ha[Af.index]<=ha[pd]||Lc&&cc[gc]<nb[pd]||nb[gc]>cc[pd]||(Af={index:pd,dist:ha[pd]-ce,refPointsA:Ya[gc],refPointsB:Ya[pd]});for(ce=0;ce<cc.length;ce++)gc===ce||Ie<cc[ce]||Ce&&cc[Ce.index]>=cc[ce]||Lc&&ha[gc]>Pa[ce]||Pa[gc]<ha[ce]||(Ce=
{index:ce,dist:Ie-cc[ce],refPointsA:Ya[gc],refPointsB:Ya[ce]});for(cc=0;cc<nb.length;cc++)gc===cc||Tb>nb[cc]||zf&&nb[zf.index]<=nb[cc]||Lc&&ha[gc]>Pa[cc]||Pa[gc]<ha[cc]||(zf={index:cc,dist:nb[cc]-Tb,refPointsA:Ya[gc],refPointsB:Ya[cc]});return{l:Gd,r:Af,t:Ce,b:zf}};oa.computeClosestMorphs=function(gc){for(var Tb=[],Ya=[],ha=[],Pa=[],nb=[],cc=[],Lc=0;Lc<gc.length;Lc++){var pd=oa.computeRefPoints(gc[Lc].bounds());nb.push(pd);var ce=pd.right,Ie=pd.top,Gd=pd.bottom;Tb.push(pd.left);Ya.push(ce);ha.push(Ie);
Pa.push(Gd)}for(Lc=0;Lc<gc.length;Lc++)cc.push(oa.closest(Lc,gc,nb,Tb,Ya,ha,Pa));return cc};oa.fun=Vb;oa.pt=jc;oa.Color=Wc;oa.morph=wc;oa.cachedGuideLines=new WeakMap;oa.guideWidth=1;oa.guideColor=oa.Color.orange.lighter();oa.removeSnapToGuidesOf=vc;oa.removeSnapToGuidesOf=vc;oa.showAndSnapToGuides=Oc;oa.showAndSnapToGuides=Oc;oa.showAndSnapToResizeGuides=pc;oa.showAndSnapToResizeGuides=pc;oa.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top",
"vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom","vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var La=lively.FreezerRuntime.recorderFor("lively.collab/index.js");La.CommentGroupMorph=void 0;La.CommentGroupMorph=void 0;La.CommentMorph=void 0;La.CommentMorph=void 0;La.CommentIndicator=void 0;La.CommentIndicator=
void 0;La.CommentBrowser=void 0;La.CommentBrowser=void 0;La.Comment=void 0;La.Comment=void 0;La.Badge=void 0;La.Badge=void 0;var Ua=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ua.show=bb;Ua.showRect=function(gc,Tb,Ya){var ha=Ua.BoundsMarker.highlightBounds(Tb);return Ya?Ua.showInLoop(gc,ha,Tb):Ua.showThenHide(gc,ha)};Ua.showInLoop=function(gc,Tb,Ya){var ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){switch(Pa.nextAddress){case 1:return Ua.showThenHide(gc,Tb,!1),
Pa.yield(Ua.promise.delay(300),2);case 2:ha=!1,Ua.once(gc,"onMouseDown",function(){return ha=!0}),Ua.once(gc,"hideMarkers",function(){return ha=!0});case 3:if(ha){Pa.jumpTo(4);break}return Pa.yield(Tb.retract(Ya),3);case 4:Tb.fadeOut(2E3),Pa.jumpToEnd()}})};Ua.showThenHide=function(gc,Tb,Ya){Ya=void 0===Ya?3:Ya;if(gc){var ha=Array.isArray(Tb)?Tb:[Tb];ha.forEach(function(Pa){return gc.addMorph(Pa)});Ya&&setTimeout(function(){return ha.forEach(function(Pa){return Pa.fadeOut(2E3)})},1E3*Ya);return Tb}};
Ua.showLine=function(gc,Tb,Ya){Ya=void 0===Ya?3E3:Ya;var ha=Tb.start;Tb=Tb.end.subPt(ha);var Pa=gc.addMorph({position:ha,rotation:Tb.theta(),border:{width:1,color:Ua.Color.red},width:Tb.fastR(),height:0});Ya&&setTimeout(function(){return Pa.fadeOut()},Ya);return Pa};Ua.showConnector=Ma;Ua.obj=Ud;Ua.promise=Kd;Ua.string=he;Ua.pt=jc;Ua.Color=Wc;Ua.Rectangle=xd;Ua.rect=gd;Ua.morph=wc;Ua.easings=Ld;Ua.Path=Pd;Ua.Icon=af;Ua.Morph=bf;Ua.MorphicEnv=Ve;Ua.connect=Ad;Ua.once=xe;Ua.disconnect=qc;Ua.show=bb;
Ua.show=bb;(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ya=Tb.hasOwnProperty("BoundsMarker")&&"function"===typeof Tb.BoundsMarker?Tb.BoundsMarker:Tb.BoundsMarker=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:Symbol.for("lively-instance-initialize"),value:function(){td._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
{borderWidth:0,fill:Ua.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(ha){ha=ha.insetBy(-2);ha=Math.min(ha.width,ha.height);return Math.max(4,Math.floor(10>ha/10?ha/2-5:ha/10))}},{key:"createMarkerEdge",value:function(){return Ua.morph({fill:Ua.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var ha=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),
Pa=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),nb=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),cc=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Lc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),pd=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),ce=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Ie=this.bottomLeftV||(this.bottomLeftV=
this.addMorph(this.createMarkerEdge()));return[ha,Pa,nb,cc,Lc,pd,ce,Ie]}},{key:"alignWithMorph",value:function(ha){return this.alignWithBounds(ha.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(ha){this.alignWithRect(ha.insetBy(-20));return this.alignWithRect(ha,!0)}},{key:"alignWithRect",value:function(ha,Pa){var nb=this.ensureMarkerCorners(),cc=this.markerLength(ha),Lc=[ha.topLeft().addXY(0,0).extent(Ua.pt(cc,5)),ha.topLeft().addXY(0,0).extent(Ua.pt(5,
cc)),ha.topRight().addXY(-cc,0).extent(Ua.pt(cc,5)),ha.topRight().addXY(-5,0).extent(Ua.pt(5,cc)),ha.bottomRight().addXY(-5,-cc).extent(Ua.pt(5,cc)),ha.bottomRight().addXY(-cc,-5).extent(Ua.pt(cc,5)),ha.bottomLeft().addXY(0,-5).extent(Ua.pt(cc,5)),ha.bottomLeft().addXY(0,-cc).extent(Ua.pt(5,cc))];nb.forEach(function(pd,ce){return pd.setBounds(Lc[ce])});Pa&&(this.adjustOrigin(ha.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(ha){var Pa=
this,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cc){if(1==cc.nextAddress)return cc.yield(Pa.animate({scale:Math.max(30/ha.width,1.05)}),2);nb=Pa.center;return cc.yield(Pa.animate({center:nb,scale:1,duration:300,easing:Ua.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(ha){return(new this).alignWithMorph(ha)}},{key:"highlightBounds",value:function(ha){return(new this).alignWithBounds(ha)}}],
Tb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2323,end:6E3})})(Ua.Morph);La=$a("S",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ya=Tb.hasOwnProperty("StatusMessage")&&"function"===typeof Tb.StatusMessage?Tb.StatusMessage:Tb.StatusMessage=function(ha){ha&&
ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"relayout",value:function(){this.title=Ua.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(ha,Pa){this.message=ha;this.color=Pa}},{key:"slideTo",value:function(ha){var Pa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==
nb.nextAddress)return Pa.sliding=Pa.animate({position:ha,duration:500}),nb.yield(Pa.sliding,2);Pa.sliding=!1;nb.jumpToEnd()})}},{key:"expand",value:function(){var ha=this,Pa,nb,cc,Lc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==pd.nextAddress)return ha.expandable?ha.sliding?pd.yield(ha.sliding,2):pd.jumpTo(2):pd.return();Pa=ha.world();if(!Pa||ha.isMaximized)return pd.return();ha.isMaximized=!0;ha.stayOpen=!0;nb=ha.getSubmorphNamed("message text");nb.lineWrapping=!1;Object.assign(nb,
{clipMode:"auto",fixedWidth:!0,selectable:!0});ha.expandedContent&&(nb.value=ha.expandedContent);nb.fit();cc=nb.textBounds().extent();Lc=Pa.visibleBounds();cc.y>Lc.extent().y&&(cc.y=Lc.extent().y-20);cc.x>Lc.extent().x&&(cc.x=Lc.extent().x-20);cc=ha.extent.maxPt(cc);ha.animate({extent:cc,center:Lc.center(),duration:200});ha.relayout();ha.focus();pd.jumpToEnd()})}},{key:"fit",value:function(){var ha=this.getSubmorphNamed("message text");ha&&(this.extent=Ua.pt(100,35).maxPt(ha.textBounds().extent()),
this.relayout())}},{key:"focus",value:function(){var ha=this.getSubmorphNamed("message text");ha&&ha.focus()}},{key:"onMouseUp",value:function(ha){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ua.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},
master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(ha){this.setProperty("message",ha);var Pa=this.getSubmorphNamed("message text");if(Pa){Pa.value=ha;var nb=Pa.documentEndPosition;nb.row>this.maxLines&&(Pa.replace({start:{row:this.maxLines,column:0},end:nb},"...\n"),this.expandedContent||(this.expandedContent=ha));nb=Pa.documentEndPosition;0!==nb.column&&Pa.insertText("\n",nb)}}},title:{isStyleProp:!0,derived:!0,set:function(ha){this.getSubmorphNamed("message title").value=
ha},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(ha){this.get("message icon").fontColor=ha;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=ha)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Ua.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},
{name:"message title",type:"label"},{name:"close button",type:"button"}];Ua.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ua.connect(this,"extent",this,"relayout")}}}}}],Tb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(Ua.Morph));Ua.StatusMessage=
La;Ua.StatusMessage=La;Ua.StatusMessage=La;var Sb=$a("b",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ya=Tb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Tb.StatusMessageForMorph?Tb.StatusMessageForMorph:Tb.StatusMessageForMorph=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"alignAtBottomOf",value:function(ha){var Pa=this.world();Pa&&(this.bringToFront(),
this.fit(),this.width=ha.bounds().width,this.relayout(),ha.world()&&(this.position=ha.owner.worldPoint(ha.bounds().bottomLeft())),ha=Pa.visibleBounds(),ha=this.bounds().top()+this.height-ha.bottom(),0<ha&&this.moveBy(Ua.pt(0,-ha)))}},{key:"onMouseUp",value:function(ha){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},
targetMorph:{defaultValue:null,get:function(){var ha=this.getProperty("targetMorph");return ha&&$world.getMorphWithId(ha)},set:function(ha){this.setProperty("targetMorph",ha?ha.id:null);this.alignAtBottomOf(ha)}},expandable:{after:["submorphs"],set:function(ha){this.setProperty("expandable",ha);if(ha){var Pa=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Ua.connect(Pa,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),
Ua.disconnect(Pa,"fire",this,"expand"))}}}}}],Tb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(Ua.StatusMessage));Ua.StatusMessageForMorph=Sb;Ua.StatusMessageForMorph=Sb;Ua.StatusMessageForMorph=Sb;Ua.showConnector=Ma;Ua.showConnector=Ma;var Ca=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");
Ca.Morph=bf;Ca.Label=be;Ca.HorizontalLayout=Bd;Ca.Path=Pd;Ca.Text=pe;Ca.GridLayout=Se;Ca.morph=wc;Ca.Icon=af;Ca.createMorphSnapshot=nc;Ca.Color=Wc;Ca.pt=jc;Ca.rect=gd;Ca.Rectangle=xd;Ca.LinearGradient=$c;Ca.obj=Ud;Ca.PropertyPath=ge;Ca.promise=Kd;Ca.properties=ad;Ca.num=ie;Ca.arr=Yb;Ca.connect=Ad;Ca.signal=zb;Ca.disconnect=qc;Ca.disconnectAll=Rc;Ca.once=xe;Ca.showAndSnapToGuides=Oc;Ca.showAndSnapToResizeGuides=pc;Ca.removeSnapToGuidesOf=vc;Ca.CommentBrowser=void 0;Ca.show=bb;Ca.haloBlue=Ca.Color.rgb(23,
160,251);Ca.componentAccent=Ca.Color.magenta;Ca.derivedAccent=Ca.Color.purple;var Va=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("Halo")&&"function"===typeof Tb.Halo?Tb.Halo:Tb.Halo=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",
win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(ha){ha.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var ha=this;setTimeout(function(){ha.target.owner||ha.remove()})}},{key:"initLayout",value:function(){var ha=this.layout=new Ca.GridLayout({autoAssign:!1,fitToCell:!1,renderViaCSS:!0,columns:[0,{fixed:36,paddingRight:10},
2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});
ha.col(1).row(7).group.align="topCenter";ha.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Ca.morph({name:"border-box",halosEnabled:!1,fill:Ca.Color.transparent,borderColor:this.target.isComponent?Ca.componentAccent:Ca.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(ha){this.state||(this.state={});this.state.pointerId=ha}},{key:"prepareTarget",value:function(ha){if(!Ca.obj.isArray(ha))return ha;
if(1>=ha.length)return ha[0];ha=ha[0].world().addMorph(new Ca.MultiSelectionTarget({selectedMorphs:ha}));ha.alignWithSelection();ha.modifiesSelectedMorphs=!0;return ha}},{key:"refocus",value:function(ha){this.target=ha;this.alignWithTarget()}},{key:"alignWithTarget",value:function(ha){var Pa=this;if((!ha||["extent","position","scale","rotation"].includes(ha.prop))&&!this.active&&this.target){ha=this.target.world()||$world;var nb=this.maskBounds,cc=this.target.globalBounds(),Lc=cc.insetBy(-36).intersection(nb);
nb=cc.intersection(nb);this.state.activeButton?(this.buttonControls.forEach(function(pd){return pd.visible=!1}),this.ensureResizeHandles().forEach(function(pd){return pd.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(pd){return pd.visible=!0}),this.buttonControls.filter(function(pd){return Pa.activeItems.includes("*")?!0:Pa.activeItems.includes(pd.name)}).forEach(function(pd){pd.visible=
!0}),this.propertyDisplay.disable());this.setBounds(Lc.translatedBy(ha.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,nb));this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(pd){return pd.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();return this}}},{key:"detachFromTarget",value:function(){var ha=this.target;ha&&(Ca.disconnect(ha,"onChange",this,"alignWithTarget"),Ca.disconnect(ha,"onOwnerChanged",this,"removeIfDetached"),ha instanceof
Ca.MultiSelectionTarget?(ha.modifiesSelectedMorphs=!1,ha.remove()):"function"===typeof ha.detachedHalo&&ha.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();td._get(Object.getPrototypeOf(Ya.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return Ca.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ca.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ca.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Ca.GrabHaloItem.for(this)}},
{key:"dragHalo",value:function(){return Ca.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ca.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ca.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return Ca.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ca.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ca.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Ca.OriginHaloItem.for(this)}},{key:"componentHalo",
value:function(){return Ca.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(ha){return ha.isHaloItem&&!ha.isResizeHandle})}},{key:"addMorphToSelection",value:function(ha){var Pa=this,nb,cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lc){if(1==Lc.nextAddress){nb=Pa.world();cc=Pa.target.isMorphSelection?Pa.target.selectedMorphs:[Pa.target];if(cc.includes(ha))return Lc.return();Pa.remove();return Lc.yield(nb.showHaloForSelection([].concat($jscomp.arrayFromIterable(cc),
[ha]),Pa.state.pointerId),2)}return Lc.return(Lc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(ha){var Pa=this,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cc){if(1==cc.nextAddress){nb=Pa.world();Pa.remove();if(!Pa.target.isMorphSelection)return cc.jumpTo(0);Ca.arr.remove(Pa.target.selectedMorphs,ha);return cc.yield(nb.showHaloForSelection(Pa.target.selectedMorphs,Pa.state.pointerId),3)}return cc.return(cc.yieldResult)})}},{key:"isAlreadySelected",value:function(ha){return this.target==
ha||this.target.isMorphSelection&&this.target.selectsMorph(ha)}},{key:"updateBoundsFor",value:function(ha,Pa,nb,cc,Lc){var pd={topLeft:Ca.rect(-1,-1,1,1),topCenter:Pa?Ca.rect(1,-1,0,1):Ca.rect(0,-1,0,1),topRight:Ca.rect(0,-1,1,1),rightCenter:Pa?Ca.rect(0,1,1,1):Ca.rect(0,0,1,0),bottomRight:Ca.rect(0,0,1,1),bottomCenter:Pa?Ca.rect(1,0,0,1):Ca.rect(0,0,0,1),bottomLeft:Ca.rect(-1,0,1,1),leftCenter:Pa?Ca.rect(-1,1,1,0):Ca.rect(-1,0,1,0)}[ha];Lc=pd.x;var ce=pd.y,Ie=pd.width;pd=pd.height;nb=Pa?this.proportionalDelta(ha,
nb,cc):nb;ha=Ca.rect(nb.x*Lc,nb.y*ce,nb.x*Ie,nb.y*pd);this.active=!0;this.targetIsPositionedByLayout?this.target.extent=cc.insetByRect(ha).extent():(this.target.setBounds(cc.insetByRect(ha)),(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated()));this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(Gd){if(Gd.activeSideBars.includes("Styling Palette"))Gd.stylingPalette.onHierarchyChange()})}},{key:"proportionalDelta",value:function(ha,Pa,nb){var cc=
nb.width,Lc=nb.height;nb={topLeft:Ca.pt(-1,-1),topCenter:Ca.pt(0,-1),topRight:Ca.pt(1,-1),leftCenter:Ca.pt(-1,0),rightCenter:Ca.pt(1,0),bottomLeft:Ca.pt(-1,1),bottomCenter:Ca.pt(0,1),bottomRight:Ca.pt(1,1)};var pd=cc/Math.max(cc,Lc),ce=Lc/Math.max(Lc,cc);cc={topLeft:Ca.pt(-pd,-ce),topCenter:Ca.pt(1/(2*Lc/cc),-1),topRight:Ca.pt(pd,-ce),leftCenter:Ca.pt(-1,Lc/(2*cc)),rightCenter:Ca.pt(1,Lc/(3*cc)),bottomLeft:Ca.pt(-pd,ce),bottomCenter:Ca.pt(1/(2*Lc/cc),1),bottomRight:Ca.pt(pd,ce)};nb=nb[ha];return cc[ha].scaleBy(nb.dotProduct(Pa)/
nb.dotProduct(nb))}},{key:"ensureResizeHandles",value:function(){return Ca.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(ha){ha=ha.valueForPropertyDisplay();"undefined"!==typeof ha?this.propertyDisplay.displayProperty(ha):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(ha,Pa){if(!Ca.rect(0).sides.includes(Pa)){var nb=this.getSubmorphNamed("diagonal");if(ha){ha=this.target.globalBounds();var cc=ha.width,Lc=ha.height;ha=this.localize(Ca.pt(ha.x,ha.y)).extent(Ca.pt(cc,
Lc)).scaleRectTo(this.innerBounds());cc={topLeft:[Ca.pt(cc,Lc),Ca.pt(0,0)],topRight:[Ca.pt(0,Lc),Ca.pt(cc,0)],bottomRight:[Ca.pt(0,0),Ca.pt(cc,Lc)],bottomLeft:[Ca.pt(cc,0),Ca.pt(0,Lc)]};nb?nb.setBounds(ha):(nb=$jscomp.makeIterator(cc[Pa]),Pa=nb.next().value,nb=nb.next().value,cc=new Ca.LinearGradient({stops:[{offset:0,color:Ca.Color.orange.withA(0)},{offset:.2,color:Ca.Color.orange},{offset:.8,color:Ca.Color.orange},{offset:1,color:Ca.Color.orange.withA(0)}]}),nb=this.addMorphBack(new Ca.Path({opacity:0,
name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:ha,borderColor:cc,vertices:[Pa,nb]})),nb.setBounds(ha),nb.animate({opacity:1,duration:500}))}else nb&&nb.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(ha,Pa){var nb=this.getSubmorphNamed("rotationIndicator");ha&&Pa?(ha=this.getSubmorphNamed("origin").center,nb=nb||this.addMorphBack(new Ca.Path({name:"rotationIndicator",borderColor:Ca.haloBlue,borderWidth:1,vertices:[]})),nb.setBounds(Pa.bounds().union(this.innerBounds())),nb.vertices=
[nb.localizePointFrom(ha,this),nb.localizePointFrom(Pa.center,this)]):nb&&nb.remove()}},{key:"toggleMorphHighlighter",value:function(ha,Pa,nb){nb=void 0===nb?!1:nb;if(Pa)if(Pa.onHaloGrabover)Pa.onHaloGrabover(ha);else nb=Ca.MorphHighlighter.for(this,Pa,nb),ha&&Pa&&Pa!=this.world()?nb&&nb.show(Pa):nb&&nb.deactivate()}},{key:"temporaryEditTextMorph",value:function(ha){if(this.target.isText){var Pa=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(ha.positionIn(this.target));
var nb=this.world(),cc=this.target,Lc=this.topBar,pd=function(ce){Lc.stylingPalette&&Lc.stylingPalette.fullContainsWorldPoint(nb.firstHand.position)?(cc.whenRendered().then(function(){Ca.once(cc,"onBlur",pd)}),Ca.once(cc,"onBlur",pd)):(Lc.setEditMode("Halo",!0),cc.readOnly=Pa,cc.collapseSelection(),Lc.showHaloFor(cc))};this.target.whenRendered().then(function(){Ca.once(cc,"onBlur",pd)});Lc.setEditMode("Hand",!0);this.remove()}}},{key:"onMouseDown",value:function(ha){var Pa=this,nb=ha.state.clickedOnMorph;
if(!ha.isCommandKey()&&nb==this.borderBox){if(2==ha.state.clickCount&&this.target.isText){this.temporaryEditTextMorph(ha);return}return Ca.promise.delay(200).then(function(){2!=ha.state.clickCount&&Pa.remove()})}if(ha.isShiftDown()&&ha.isCommandKey())nb=this.target.isMorphSelection?this.target.morphBeneath(ha.position):this.morphBeneath(ha.position),this.isAlreadySelected(nb)?this.removeMorphFromSelection(nb):this.addMorphToSelection(nb);else{if(nb==this.borderBox&&ha.isCommandKey()){var cc=ha.world.morphsContainingPoint(ha.position).filter(function(Lc){return Lc.halosEnabled});
(cc=cc.slice(cc.indexOf(this.target)+1)[0]||cc[0]||ha.world)&&ha.world.showHaloFor(cc,ha.domEvt.pointerId);this.remove()}nb==this&&ha.isCommandKey()&&(cc=this.morphBeneath(ha.position),ha.world.showHaloFor(cc,ha.domEvt.pointerId));nb==this&&Ca.promise.delay(500).then(function(){Pa.remove()})}}},{key:"onContextMenu",value:function(ha){var Pa=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(nb){return Pa.target.openMenu(nb,ha)}).catch(function(nb){return $world.logError(nb)})}},
{key:"onKeyUp",value:function(ha){this.changingName||this.buttonControls.map(function(Pa){return Pa.onKeyUp(ha)})}},{key:"getMesh",value:function(ha,Pa){var nb=ha.x;ha=ha.y;Pa=void 0===Pa?Ca.pt(0,0):Pa;var cc=this.world().visibleBounds(),Lc=cc.height;cc=cc.width;var pd={borderStyle:"dotted",borderWidth:2,borderColor:Ca.Color.orange};pd=this.get("mesh")||this.addMorph(new Ca.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:Ca.pt(cc,Lc),fill:null,submorphs:[new Ca.Path(Object.assign({name:"vertical"},
pd)),new Ca.Path(Object.assign({name:"horizontal"},pd))]}));pd.globalPosition=Pa;pd.getSubmorphNamed("vertical").vertices=[Ca.pt(nb,0).subPt(Pa),Ca.pt(nb,Lc).subPt(Pa)];pd.getSubmorphNamed("horizontal").vertices=[Ca.pt(0,ha).subPt(Pa),Ca.pt(cc,ha).subPt(Pa)];return pd}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ca.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(ha){this.setProperty("maskBounds",ha);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(ha){this.setProperty("activeItems",ha);this.buttonControls.forEach(function(Pa){return Pa.visible=ha.includes(Pa.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},
hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ca.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},targetIsPositionedByLayout:{derived:!0,get:function(){return this.target.isLayoutable&&Ca.PropertyPath("target.owner.layout.renderViaCSS").get(this)}},target:{get:function(){return this.state?this.state.target:null},set:function(ha){this.state||(this.state={});var Pa=!!this.state.target;this.detachFromTarget();
ha=this.prepareTarget(ha);this.state.target=ha;Pa&&this.alignWithTarget();Ca.connect(ha,"onChange",this,"alignWithTarget");Ca.connect(ha,"onOwnerChanged",this,"removeIfDetached")}}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19891})}(Ca.Morph);Va=Ca.Halo;var dc=$a("H",Va);
(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Tb.HaloPropertyDisplay?Tb.HaloPropertyDisplay:Tb.HaloPropertyDisplay=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(ha){var Pa=this.halo.state.activeButton;ha=String(ha);this.visible=!0;this.textString=ha;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(Pa.bounds())&&(this.position=Ca.pt(Pa.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},
{key:"defaultPosition",get:function(){return Ca.pt(25,0)}},{key:"for",value:function(ha){return ha.getSubmorphNamed(this.morphName)||ha.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Ca.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ca.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ca.Color.white},position:{defaultValue:this.defaultPosition}}}}],
Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20081,end:21419})})(Ca.Label);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Tb.MultiSelectionTarget?Tb.MultiSelectionTarget:Tb.MultiSelectionTarget=
function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(ha){return this.selectedMorphs.includes(ha)}},{key:"alignWithSelection",value:function(){var ha=this.selectedMorphs.map(function(Pa){return Pa.globalBounds()}).reduce(function(Pa,nb){return Pa.union(nb)});this.setBounds(ha)}},
{key:"onGrab",value:function(ha){this.grabbingHand=ha.hand;this.selectionGrabbed=!0;ha.hand.grab(this.selectedMorphs);Ca.once(ha.hand,"dropMorphsOn",this,"onGrabEnd");Ca.connect(ha.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ca.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(ha){var Pa=ha.value.subPt(ha.prevValue);this.selectedMorphs.forEach(function(nb){return nb.resizeBy(Pa)})}},{key:"updatePosition",value:function(ha){if(!this.selectionGrabbed){var Pa=
ha.value.subPt(ha.prevValue);this.selectedMorphs.forEach(function(nb){return nb.moveBy(Pa)})}}},{key:"updateRotation",value:function(ha){var Pa=this,nb=ha.value-ha.prevValue;this.selectedMorphs.forEach(function(cc){var Lc=cc.origin;cc.adjustOrigin(cc.localize(Pa.worldPoint(Ca.pt(0,0))));cc.rotation+=nb;cc.adjustOrigin(Lc)})}},{key:"updateScale",value:function(ha){var Pa=this,nb=ha.value-ha.prevValue;this.selectedMorphs.forEach(function(cc){var Lc=cc.origin;cc.adjustOrigin(cc.localize(Pa.worldPoint(Ca.pt(0,
0))));cc.scale+=nb;cc.adjustOrigin(Lc)})}},{key:"onChange",value:function(ha){td._get(Object.getPrototypeOf(Ya.prototype),"onChange",this).call(this,ha);if(this.modifiesSelectedMorphs){switch(ha.prop){case "extent":this.updateExtent(ha);break;case "scale":this.updateScale(ha);break;case "position":this.updatePosition(ha);break;case "rotation":this.updateRotation(ha)}return ha}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21487,end:23758})})(Ca.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("HaloItem")&&
"function"===typeof Tb.HaloItem?Tb.HaloItem:Tb.HaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ca.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ca.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},{key:"for",value:function(ha){return ha.getSubmorphNamed(this.morphName)||ha.addMorph(new this({halo:ha,name:this.morphName}))}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23922,end:24640})})(Ca.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("NameHolder")&&"function"===typeof Tb.NameHolder?Tb.NameHolder:Tb.NameHolder=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onHoverIn",
value:function(ha){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ca.Color.orange)}},{key:"onHoverOut",value:function(ha){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Ca.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(ha){"Enter"==ha.keyCombo?(this.accept(),
this.halo.focus(),ha.stop()):td._get(Object.getPrototypeOf(Ya.prototype),"onKeyDown",this).call(this,ha)}},{key:"onMouseUp",value:function(){Ca.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(ha){this.nameHolder.fontColor=Ca.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(ha){ha=this.nameHolder.textString;var Pa=this.target.owner;this.validName=!Pa||!Pa.getSubmorphNamed(ha)||this.target.name==ha;Ca.signal(this,"valid",[this.validName,
ha])}},{key:"update",value:function(){var ha=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return ha.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(ha){if(!this.forceUniqueName||
this.validName)this.target.name=ha,Ca.signal(this,"active",[!1,this]),Ca.CommentBrowser.instance&&Ca.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ca.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ca.HorizontalLayout({renderViaCSS:!0,
resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ca.Text({fill:Ca.Color.transparent,fontColor:Ca.Color.white,fontWeight:"bold",active:!0}));Ca.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:24675,end:27426})})(Ca.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("NameHaloItem")&&"function"===typeof Tb.NameHaloItem?Tb.NameHaloItem:Tb.NameHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:Symbol.for("lively-instance-initialize"),value:function(ha){td._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,ha);this.initComponentLink();this.initNameHolders();this.validityIndicator=Ca.Icon.makeLabel("check",{fontColor:Ca.Color.green,fontSize:15,padding:Ca.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Ca.componentAccent:Ca.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var ha=this,Pa=this.halo.target;if(Pa&&!Pa.isMorphSelection&&Pa.master){var nb=Pa.master.determineMaster(Pa),cc=nb&&!!Pa.world().localComponents.includes(nb),Lc=nb?Pa.master.getWorldUrlFor(nb):
"this project";Pa=this.addMorph(Ca.Icon.makeLabel(Lc?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Ca.Color.white,padding:Ca.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+Lc}));Lc&&Ca.connect(Pa,"onMouseDown",function(){cc?ha.showLocalMaster(nb):window.open(Lc)})}}},{key:"showLocalMaster",value:function(ha){var Pa;if(Pa=ha.getWindow())Pa.activate(),Pa.minimized&&(Pa.minimized=!1);ha.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?
this.halo.target.selectedMorphs.map(function(ha){return{target:ha,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var ha=this;this.nameHolders=this.targets().map(function(Pa){Pa=new Ca.NameHolder({halo:ha.halo,highlightOnHover:Pa.highlightOnHover,target:Pa.target});Ca.connect(Pa,"active",ha,"toggleActive");Ca.connect(Pa,"valid",ha,"toggleNameValid");return Pa});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Ca.arr.interpose(this.nameHolders,
{extent:Ca.pt(1,28),fill:Ca.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(ha){var Pa=$jscomp.makeIterator(ha);ha=Pa.next().value;var nb=Pa.next().value;if(this.halo.changingName!==ha){this.halo.changingName=ha;if(Pa=this.get("master link"))Pa.visible=Pa.isLayoutable=!ha;ha?(this.nameHolders.forEach(function(cc){return cc!=nb&&cc.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Ca.Color.darkGray,setTimeout(function(){return nb.nameHolder.selectAll()})):
(this.fill=Ca.haloBlue,this.nameHolders.forEach(function(cc){return cc!=nb&&cc.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(ha){var Pa=$jscomp.makeIterator(ha);ha=Pa.next().value;Pa=Pa.next().value;(this.validName=ha)?(this.conflictingMorph=null,this.borderColor=Ca.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Ca.Color.green,Ca.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=
this.get(Pa),this.borderColor=Ca.Color.red,this.validityIndicator.fontColor=Ca.Color.red,this.validityIndicator.nativeCursor="pointer",Ca.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ca.arr.zip(this.targets(),this.nameHolders).map(function(Pa){var nb=$jscomp.makeIterator(Pa);Pa=nb.next().value.target;nb=nb.next().value;nb.target=Pa;nb.update()});var ha=this.halo.innerBounds().bottomCenter().addPt(Ca.pt(0,2));this.topCenter=Ca.pt(Math.max(ha.x,30),
Math.max(ha.y,80))}},{key:"onMouseDown",value:function(ha){var Pa=this,nb=this.conflictingMorph;nb&&(this.halo.toggleMorphHighlighter(!0,nb),setTimeout(function(){return Pa.halo.toggleMorphHighlighter(!1,nb)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Ca.haloBlue},borderColor:{defaultValue:Ca.Color.green},layout:{initialize:function(){this.layout=
new Ca.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27428,end:31928})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("CloseHaloItem")&&
"function"===typeof Tb.CloseHaloItem?Tb.CloseHaloItem:Tb.CloseHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"update",value:function(){var ha=this.halo,Pa=ha.target.owner;Pa.undoStart("close-halo");ha.target.selectedMorphs?ha.target.selectedMorphs.forEach(function(nb){return nb.abandon()}):ha.target.abandon();Pa.undoStop("close-halo");ha.remove()}},{key:"onMouseDown",value:function(ha){this.update()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],initialize:function(){this.styleClasses=["fas",this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":
"Remove this morph from the world"}}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31930,end:32940})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("GrabHaloItem")&&"function"===typeof Tb.GrabHaloItem?Tb.GrabHaloItem:
Tb.GrabHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"adjustTarget",value:function(ha,Pa){Ca.PropertyPath("owner.layout.autoResize").get(ha)&&!ha.globalBounds().insetBy(10).containsPoint(Pa)&&(ha=ha.owner);return ha}},{key:"valueForPropertyDisplay",value:function(){var ha=this.hand,Pa=this.halo,nb=this.prevDropTarget,cc=ha.world(),Lc=ha.findDropTarget(ha.globalPosition,[Pa.target],function(pd){return!pd.isHaloItem&&
!pd.ownerChain().some(function(ce){return ce.isHaloItem||!ce.visible||0==ce.opacity})});if(Lc)return Lc=this.adjustTarget(Lc,ha.globalPosition),Pa.toggleMorphHighlighter(Lc&&Lc!=cc,Lc,!0),nb&&nb!=Lc&&Pa.toggleMorphHighlighter(!1,nb),(this.prevDropTarget=Lc)&&Lc.name}},{key:"init",value:function(ha){var Pa=this.halo,nb=Pa.target.undoStart("grab-halo");nb&&nb.addTarget(Pa.target.owner);this.hand=ha;Pa.target.onGrab({halo:Pa,hand:ha,isShiftDown:function(){return!1}});Pa.state.activeButton=this;this.opacity=
.3;var cc=Ca.connect(ha,"update",this,"update");Ca.once(Pa.target,"remove",function(){return cc.disconnect()})}},{key:"stop",value:function(ha){var Pa=this.halo,nb=this.prevDropTarget,cc=Pa.target.undoInProgress,Lc=ha.hand.findDropTarget(ha.hand.globalPosition,[Pa.target],function(pd){return!pd.isHaloItem&&!pd.ownerChain().some(function(ce){return ce.isHaloItem})});Lc=this.adjustTarget(Lc,ha.hand.globalPosition);Ca.disconnect(ha.hand,"update",this,"update");Ca.MorphHighlighter.interceptDrop(Pa,Lc,
Pa.target);cc.addTarget(Lc);Lc.onDrop(ha);Pa.state.activeButton=null;Pa.alignWithTarget();Pa.toggleMorphHighlighter(!1,nb);Ca.MorphHighlighter.removeHighlighters(Pa);Pa.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(ha){this.init(ha.hand)}},{key:"onDragEnd",value:function(ha){this.stop(ha)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},
{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33004,end:35532})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Ya=Tb.hasOwnProperty("DragHaloItem")&&"function"===typeof Tb.DragHaloItem?Tb.DragHaloItem:Tb.DragHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(ha){var Pa=this.halo.getSubmorphNamed("mesh");if(ha)return Pa=this.halo.getMesh(this.halo.target.worldPoint(Ca.pt(0,0))),
this.focus(),Pa;Pa&&Pa.remove()}},{key:"init",value:function(){var ha=this.halo.target;ha.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=ha.position;this.targetTransform=ha.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Ca.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(ha,Pa,nb){Pa=void 0===Pa?!1:Pa;
nb=void 0===nb?!1:nb;this.actualPos=ha=this.actualPos.addPt(this.targetTransform.transformDirection(ha));Pa&&(ha=ha.griddedBy(Ca.pt(10,10)));this.halo.target.position=ha;this.updateAlignmentGuide(Pa);this.world().withTopBarDo(function(cc){if(cc.activeSideBars.includes("Styling Palette"))cc.stylingPalette.onHierarchyChange()});Pa||Ca.showAndSnapToGuides(this.halo.target,!0,nb,5,500)}},{key:"onDragStart",value:function(ha){this.init()}},{key:"onDrag",value:function(ha){this.update(ha.state.dragDelta,
ha.isAltDown(),ha.isCtrlDown())}},{key:"onDragEnd",value:function(ha){this.stop()}},{key:"onKeyUp",value:function(ha){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],
Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35534,end:37532})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("InspectHaloItem")&&"function"===typeof Tb.InspectHaloItem?Tb.InspectHaloItem:Tb.InspectHaloItem=function(ha){ha&&
ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){var Pa=this;(function(){var nb,cc,Lc,pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ce){if(1==ce.nextAddress)return ce.yield(System.import("lively.ide/js/inspector.js"),2);nb=ce.yieldResult;cc=nb.default;(Lc=Pa.world().getSubmorphsByStyleClassName("Inspector").find(function(Ie){return Ie.targetObject==Pa.halo.target}))&&
(pd=Lc.getWindow())?(pd.minimized=!1,pd.activate(),pd.animate({center:Pa.world().visibleBounds().center(),duration:200})):cc.openInWindow({targetObject:Pa.halo.target});Pa.halo.remove();ce.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],
Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37534,end:38451})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("EditHaloItem")&&"function"===typeof Tb.EditHaloItem?Tb.EditHaloItem:Tb.EditHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){var Pa=this;(ha=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(nb){return nb.target==Pa.halo.target}))?(ha=ha.getWindow(),ha.bringToFront(),ha.minimized=!1,ha.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:38453,end:39233})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("RotateHaloItem")&&"function"===typeof Tb.RotateHaloItem?Tb.RotateHaloItem:Tb.RotateHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:Symbol.for("lively-instance-initialize"),value:function(ha){td._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,ha);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(ha){this.setProperty("angle",ha)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(ha){this.setProperty("scaleGauge",ha)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(ha){this.setProperty("initRotation",ha)}},{key:"valueForPropertyDisplay",
value:function(){var ha=this.halo.target;return this.scaleGauge?ha.scale.toFixed(4).toString():Ca.num.toDegrees(ha.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(ha){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=ha;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(ha){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=ha.scaleBy(1/
this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(ha){this.scaleGauge=null;ha=this.initRotation+(ha-this.angle);ha=Ca.num.toRadians(Ca.num.detent(Ca.num.toDegrees(ha),10,45));this.halo.target.rotation=ha;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(ha){var Pa=this.scaleGauge,nb=this.halo;Pa||(Pa=this.scaleGauge=ha.scaleBy(1/nb.target.scale));this.angle=ha.theta();this.initRotation=nb.target.rotation;nb.target.scale=
Ca.num.detent(ha.dist(Ca.pt(0,0))/Pa.dist(Ca.pt(0,0)),.1,.5);nb.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(ha){this.styleClasses=["fas",ha?"fa-search-plus":"fa-redo"];this.tooltip=ha?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",
value:function(){}},{key:"attachToLayout",value:function(){}},{key:"onDragStart",value:function(ha){this.adaptAppearance(ha.isShiftDown());ha.isShiftDown()?this.initScale(ha.position.subPt(this.halo.target.globalPosition)):this.init(ha.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(ha){this.globalPosition=ha.position.addPt(Ca.pt(-10,-10));this.adaptAppearance(ha.isShiftDown());ha.isShiftDown()?this.updateScale(ha.position.subPt(this.halo.target.globalPosition)):
this.update(ha.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(ha){this.adaptAppearance(ha.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(ha){this.adaptAppearance(ha.isShiftDown())}},{key:"onKeyUp",value:function(ha){this.adaptAppearance(ha.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:39235,end:42603})})(Ca.HaloItem);Ca.nameNumberRe=/(.+)([0-9]+)$/;(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof Tb.ComponentHaloItem?Tb.ComponentHaloItem:
Tb.ComponentHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"updateComponentIndicator",value:function(){var ha=this.world(),Pa=this.halo.target;this.halo.remove();ha.showHaloFor(Pa)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var ha=this,Pa,nb,cc,Lc,pd,ce,Ie,Gd,Af,Ce,zf,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uf){switch(uf.nextAddress){case 1:Pa=ha.halo.target;
nb=ha.world();cc=[];Pa.withAllSubmorphsDoExcluding(function(Cf){Cf!=Pa&&cc.push(Cf)},function(Cf){return Cf.master&&Cf!=Pa});Lc=Ca.arr.groupBy(cc,function(Cf){return Cf.name});pd={fontWeight:"normal",fontSize:16};if(!Object.values(Lc).find(function(Cf){return 1<Cf.length})){uf.jumpTo(2);break}ce=Ca.arr.sum(Object.values(Lc).filter(function(Cf){return 1<Cf.length}).map(function(Cf){return Cf.length}));return uf.yield(nb.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(Ca.Icon.textAttribute("exclamation-triangle",
{fontColor:Ca.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+ce+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},pd,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},pd,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},pd,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},pd,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(Ie=uf.yieldResult,!Ie)return uf.return();case 2:Af=uf.forIn(Lc);case 4:if(null==(Gd=Af.getNext())){uf.jumpTo(6);break}if(2>Lc[Gd].length){uf.jumpTo(4);break}Ce=Lc[Gd];case 7:if(!(1<Ce.length)){uf.jumpTo(4);break}zf=Ce[0];Ca.show(zf,!0);return uf.yield(nb.prompt(["Name Collision\n",{},"The name of\n",pd,zf.toString(),Object.assign({},pd,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},pd),Pa.name,Object.assign({},pd,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<Ce.length?"are "+(Ce.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",pd," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
pd],{input:zf.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Cf){return!Object.keys(Lc).includes(Cf)}}),9);case 9:C=uf.yieldResult;Ca.signal(nb,"hideMarkers");C&&(zf.name=C);if(C in Lc){uf.jumpTo(7);break}else if(!C){Ce=Ca.arr.rotate(Ce);uf.jumpTo(7);break}Ca.arr.remove(Ce,zf);uf.jumpTo(7);break;case 6:return uf.return(!0)}})}},{key:"onMouseDown",value:function(){var ha=this,Pa,nb,cc,Lc,pd,ce;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){switch(Ie.nextAddress){case 1:Pa=
ha.halo.target;nb=!Pa.isComponent;cc=$world.getAllNamed(Pa.name).length;if(!(nb&&1<cc)){Ie.jumpTo(2);break}return Ie.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(cc-1)+" other morph"+(2<cc?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:Pa.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(Gd){return 0==$world.getAllNamed(Gd).length}}),3);case 3:Lc=Ie.yieldResult;if(!Lc)return Ie.return();Pa.name=Lc;case 2:pd=Pa;if(!(ce=nb)){Ie.jumpTo(4);break}return Ie.yield(ha.checkForDuplicateNamesInHierarchy(),5);case 5:ce=Ie.yieldResult;case 4:pd.isComponent=ce,nb?(Ca.arr.pushIfNotIncluded(Pa.world().localComponents,Pa),Ca.arr.pushIfNotIncluded(Pa.world().hiddenComponents,Pa.name)):Ca.arr.remove(Pa.world().localComponents,Pa),ha.world()?ha.updateComponentIndicator():Pa.world().showHaloFor(Pa),
Ie.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42644,end:48798})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("CopyHaloItem")&&"function"===typeof Tb.CopyHaloItem?Tb.CopyHaloItem:Tb.CopyHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,
gc,[{key:"init",value:function(ha){function Pa(Gd,Af){return Af.match(Ca.nameNumberRe)?Af.replace(Ca.nameNumberRe,function(Ce,zf,C){C||(C="0");for(Ce=Number(C);Gd.get(zf+ ++Ce););return zf+Ce}):Af+"1"}var nb=this.halo,cc=nb.target,Lc=nb.world(),pd=cc instanceof Ca.MultiSelectionTarget;nb.remove();Ca.connect(ha,"update",this,"update");if(pd){var ce=Ca.arr.compact(cc.selectedMorphs.map(function(Gd){if(Gd.canBeCopied())return Gd=Gd.copy(!0),Lc.addMorph(Gd),Gd}));pd=ce.map(function(Gd){Gd.name=Pa(cc,
Gd.name);return Gd.position});ce[0].undoStart("copy-halo");Lc.addMorph(nb);nb.refocus(ce);ha.grab(nb.target);nb.target.onGrab({halo:nb,hand:ha,isShiftDown:function(){return!1}});pd.forEach(function(Gd,Af){return ce[Af].globalPosition=Gd});nb.alignWithTarget()}else{pd=cc.globalPosition;var Ie=cc.copy(!0);cc.isComponent&&(Ie.isComponent=!1,Ie.withAllSubmorphsDoExcluding(function(Gd){Gd!=Ie&&Gd.master||delete Gd._parametrizedProps},function(Gd){return Gd.master&&Gd!=Ie}),Ie.master=cc);Ie.name=Pa(cc,
cc.name);Lc.addMorph(Ie);Ie.globalPosition=pd;Ie.undoStart("copy-halo");ha.grab(Ie);Lc.addMorph(nb);nb.visible=!1}}},{key:"stop",value:function(ha){var Pa=this.halo,nb=$jscomp.makeIterator(ha.grabbedMorphs).next().value,cc=ha.findDropTarget(ha.globalPosition,[Pa.target],function(pd){return!pd.isHaloItem&&!pd.ownerChain().some(function(ce){return ce.isHaloItem})}),Lc=Pa.target.undoInProgress;Ca.disconnect(ha,"update",this,"update");Lc.addTarget(cc);ha.dropMorphsOn(cc);Pa.target.undoStop("copy-halo");
Pa.remove();ha.world().showHaloFor(nb)}},{key:"onDragStart",value:function(ha){this.init(ha.hand)}},{key:"onDragEnd",value:function(ha){this.stop(ha.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var ha=this,Pa,nb,cc,Lc,pd,ce,Ie,Gd,Af,Ce,zf,C,uf,Cf,fh,mg;return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){switch(we.nextAddress){case 1:Pa=ha;nb=Pa.halo;if(nb.nameHalo().nameHolders.find(function($f){return $f.nameHolder===$world.focusedMorph}))return we.return();
cc=nb.target;Lc=nb.world();pd=cc instanceof Ca.MultiSelectionTarget;ce=cc.globalBounds().topLeft();Ie=pd?cc.selectedMorphs:[cc];return we.yield(Promise.all(Ie.filter(function($f){return!$f.isCommentIndicator}).map(function($f){var dg;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tg){return 1==tg.nextAddress?(dg=$f.copy(!0),tg.yield(Promise.all(dg.withAllSubmorphsDo(function(Ah){if(Ah.master)return Ah.master.applyIfNeeded(),Ah.master.whenApplied()})),2)):tg.return(dg)})})),2);case 2:Gd=
we.yieldResult,Af=[],Ce='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>",nb.remove(),we.setCatchFinallyBlocks(3),zf=$jscomp.makeIterator(Gd),C=zf.next();case 5:if(C.done)return Ce+="</body></html>",fh=JSON.stringify(Af),we.yield(ha.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Ce},{type:"application/morphic",data:fh}]),9);
uf=C.value;return we.yield(Ca.createMorphSnapshot(uf,{addPreview:!1,testLoad:!1}),8);case 8:Cf=we.yieldResult;Cf.copyMeta={offset:uf.worldPoint(Ca.pt(0,0)).subPt(ce)};Af.push(Cf);Ce+=uf.renderPreview();C=zf.next();we.jumpTo(5);break;case 9:we.leaveTryBlock(4);break;case 3:return mg=we.enterCatchBlock(),Lc.logError(mg),we.return();case 4:Lc.addMorph(nb),nb.refocus(Ie),nb.setStatusMessage("copied"),we.jumpToEnd()}})}},{key:"onMouseUp",value:function(ha){var Pa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){ha.stop();
return nb.yield(Pa.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:48800,end:53428})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("OriginHaloItem")&&"function"===typeof Tb.OriginHaloItem?Tb.OriginHaloItem:Tb.OriginHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"fill",get:function(){return Ca.Color.white.interpolate(.2,
this.borderColorTop)}},{key:"extent",get:function(){return Ca.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");
this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(ha){var Pa=this.halo,nb=Pa.target.origin,cc=Pa.target.worldPoint(nb);ha=Pa.target.localize(cc.addPt(ha)).subPt(Pa.target.scroll).subPt(nb);Pa.target.adjustOrigin(Pa.target.origin.addPt(ha))}},{key:"onDragStart",value:function(ha){this.init()}},{key:"onDragEnd",value:function(ha){this.stop()}},{key:"onDrag",
value:function(ha){this.update(ha.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ca.componentAccent:Ca.haloBlue}}}}}],Tb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53430,end:55091})})(Ca.HaloItem);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("ResizeHandle")&&"function"===typeof Tb.ResizeHandle?Tb.ResizeHandle:Tb.ResizeHandle=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return td(Ya,gc,[{key:"valueForPropertyDisplay",value:function(){var ha=this.halo.target.extent,Pa=ha.y;return ha.x.toFixed(1)+"x"+Pa.toFixed(1)}},{key:"positionInHalo",value:function(){var ha=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ca.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),ha=ha.insetBy(-4));return ha.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(ha){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(ha.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(ha){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(ha.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(ha){this.init(ha.position,ha.isShiftDown())}},{key:"onDragEnd",value:function(ha){this.stop(ha.isShiftDown())}},{key:"onDrag",value:function(ha){this.update(ha.position,ha.isShiftDown(),ha.isAltDown(),ha.isCtrlDown());this.focus()}},{key:"init",value:function(ha,Pa){Pa=void 0===
Pa?!1:Pa;var nb=this.halo.target,cc=nb.origin,Lc=nb.position;nb=nb.extent;this.startPos=ha;this.startBounds=Lc.subPt(cc).extent(nb);this.startOrigin=this.halo.target.origin;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();ha=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ca.num.toRadians(ha%45);this.halo.toggleDiagonal(Pa,this.corner)}},{key:"update",value:function(ha,Pa,nb,cc){Pa=void 0===Pa?!1:Pa;nb=void 0===nb?!1:nb;cc=void 0===
cc?!1:cc;var Lc=this.corner,pd=this.tfm;ha=this.startPos.subPt(ha);pd=pd.transformDirection(Ca.pt(ha.x,ha.y));nb&&(pd=pd.griddedBy(Ca.pt(10,10)));this.halo.updateBoundsFor(Lc,Pa,pd,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(Pa,Lc);this.updateAlignmentGuide(nb);Pa=[];Lc=Lc.toLowerCase();Lc.includes("left")&&Pa.push("left");Lc.includes("top")&&Pa.push("top");Lc.includes("bottom")&&Pa.push("bottom");Lc.includes("right")&&Pa.push("right");Ca.showAndSnapToResizeGuides(this.halo.target,
Pa,!0,cc,5,200)}},{key:"stop",value:function(ha){ha=this.halo;ha.state.activeButton=null;ha.alignWithTarget();ha.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ca.removeSnapToGuidesOf(ha.target)}},{key:"updateAlignmentGuide",value:function(ha){var Pa=this.halo.getSubmorphNamed("mesh");if(ha)return ha=this.halo.target.extent,ha=Ca.pt(ha.x%10,ha.y%10),Pa=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),ha),this.focus(),Pa;Pa&&Pa.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(ha){0<ha&&(ha-=360);ha=-8-(ha/45).toFixed();0==ha&&(ha=8);return Ca.arr.zip(Ca.arr.rotate([["topLeft",function(Pa){return Pa.negated()}],["topCenter",function(Pa){return Pa.withX(0).negated()}],["topRight",function(Pa){return Pa.withX(0).negated()}],["rightCenter",function(Pa){return Ca.pt(0,
0)}],["bottomRight",function(Pa){return Ca.pt(0,0)}],["bottomCenter",function(Pa){return Ca.pt(0,0)}],["bottomLeft",function(Pa){return Pa.withY(0).negated()}],["leftCenter",function(Pa){return Pa.withY(0).negated()}]],ha),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(ha){var Pa=this;if(!ha.target)return[];
var nb=ha.target.getGlobalTransform().getRotation();return Ca.arr.compact(this.getResizeParts(nb).map(function(cc){var Lc=$jscomp.makeIterator(cc),pd=$jscomp.makeIterator(Lc.next().value);cc=pd.next().value;pd.next();pd.next();pd=$jscomp.makeIterator(Lc.next().value);Lc=pd.next().value;pd=pd.next().value;return Pa.for(ha,cc,pd,Lc)})).map(function(cc){return cc.alignInHalo()})}},{key:"for",value:function(ha,Pa,nb,cc){var Lc="Resize "+Pa;ha=ha.getSubmorphNamed(Lc)||new this({name:Lc,halo:ha,corner:Pa,
tooltip:"Resize "+Pa,extent:Ca.pt(10,10),borderWidth:1,borderRadius:0,borderColor:ha.target.isComponent?Ca.componentAccent:Ca.haloBlue,fill:Ca.Color.white});return Object.assign(ha,{nativeCursor:cc,location:nb})}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:55150,end:60455})})(Ca.HaloItem);
(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("MenuHaloItem")&&"function"===typeof Tb.MenuHaloItem?Tb.MenuHaloItem:Tb.MenuHaloItem=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){var Pa=this,nb,cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lc){if(1==Lc.nextAddress)return nb=Pa.halo.target,Pa.halo.remove(),
Lc.yield(nb.menuItems(ha),2);cc=Lc.yieldResult;nb.world().openMenu(cc).hasFixedPosition=Pa.halo.hasFixedPosition;Lc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60457,end:60982})})(Ca.HaloItem);var sb=$a("M",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("MorphHighlighter")&&"function"===typeof Tb.MorphHighlighter?Tb.MorphHighlighter:Tb.MorphHighlighter=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return td(Ya,gc,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||
this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(ha){this.layoutHalo&&this.layoutHalo.handleDrop(ha)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ca.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ca.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},
acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(ha){var Pa=this;this.setProperty("highlightedSides",ha);this.submorphs=ha.map(function(nb){return{type:"ellipse",isHaloItem:!0,fill:Ca.Color.orange,center:Pa.innerBounds()[nb]()}});this.addMorph({type:"label",name:"name tag",padding:Ca.Rectangle.inset(5,5,5,5),fontColor:Ca.Color.white,fill:Ca.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,
derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(ha){ha=void 0===ha?$world:ha;var Pa=ha._morphHighlighters,nb;for(nb in Pa)Pa[nb].remove();delete ha._morphHighlighters}},{key:"for",value:function(ha,Pa,nb,cc){nb=void 0===nb?!1:nb;cc=void 0===cc?[]:cc;var Lc=ha._morphHighlighters=ha._morphHighlighters||{};Ca.properties.forEachOwn(Lc,function(pd,ce){return ce.alignWithHalo()});if(!Pa||Pa.ownerChain().find(function(pd){return pd.isHaloItem}))return null;
Lc[Pa.id]=Lc[Pa.id]||new this({targetId:Pa.id,halo:ha,showLayout:nb});ha.addMorph(Lc[Pa.id]);Lc[Pa.id].highlightedSides=cc;return Lc[Pa.id]}},{key:"interceptDrop",value:function(ha,Pa,nb){(ha=ha._morphHighlighters=ha._morphHighlighters||{},ha[Pa.id])&&ha[Pa.id].handleDrop(nb)}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:61171,end:64966})}(Ca.Morph));Ca.MorphHighlighter=sb;Ca.MorphHighlighter=sb;Ca.MorphHighlighter=sb;var od=$a("I",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Tb.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Tb.InteractiveMorphSelector?Tb.InteractiveMorphSelector:Tb.InteractiveMorphSelector=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return td(Ya,gc,[{key:Symbol.for("lively-instance-initialize"),value:function(ha,Pa,nb){ha=void 0===ha?$world:ha;this.controllingMorph=void 0===Pa?null:Pa;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=ha;this.filterFn=nb;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var ha=Ca.promise.deferred();ha.promise.resolve=ha.resolve;this.whenDone=ha.promise;this.selectorMorph=Ca.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,
epiMorph:!0}).openInWorld();Ca.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ca.once(this.selectorMorph,"onMouseUp",this,"selectTarget");Ca.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var ha=this.world.firstHand.globalPosition;this.selectorMorph.center=ha;this.selectorMorph.focus();var Pa=this.selectorMorph.morphBeneath(ha),nb,cc=this.possibleTarget,
Lc=this.controllingMorph,pd=this.filterFn,ce=this.world,Ie=this.morphHighlighter;for(Ie==Pa?Pa=Ie.morphBeneath(ha):Pa&&Pa.isEpiMorph&&(Pa=Pa.morphBeneath(ha));Pa&&(nb=[Pa].concat($jscomp.arrayFromIterable(Pa.ownerChain())).find(function(Gd){return!Gd.visible}));)Pa=nb=nb.morphBeneath(ha);if(Pa&&pd&&!pd(Pa))for(;Pa&&![Pa].concat($jscomp.arrayFromIterable(Pa.ownerChain())).find(pd);)Pa=Pa.morphBeneath(ha);!Pa||Pa==cc||Lc&&Pa.ownerChain().includes(Lc.getWindow())||(Ie&&Ie.deactivate(),(this.possibleTarget=
cc=Pa)&&!cc.isWorld&&(ha=this.morphHighlighter=Ca.MorphHighlighter.for(ce,Pa))&&ha.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ca.MorphHighlighter.removeHighlighters(this.world);Ca.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(ha,Pa,nb){ha=new this(ha,Pa,nb);ha.selectNewTarget();return ha.whenDone}}],Tb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64975,end:67728})}(void 0));Ca.InteractiveMorphSelector=od;Ca.InteractiveMorphSelector=od;Ca.InteractiveMorphSelector=od;Ca.default=
Va;var bc=lively.FreezerRuntime.recorderFor("lively.ide/index.js");bc.info="import via sub modules";bc.info="import via sub modules";bc.info="import via sub modules";Va=$a("v",{});bc.valueWidgets=Va;bc.valueWidgets=Va;bc.valueWidgets=Va;var Td=$a("p",{});bc.popovers=Td;bc.popovers=Td;bc.popovers=Td;var rd=lively.FreezerRuntime.recorderFor("lively.components/popup.js");rd.Morph=bf;rd.Icon=af;rd.Color=Wc;rd.pt=jc;rd.connect=Ad;rd.duration=300;bc=$a("P",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),
Ya=Tb.hasOwnProperty("Popover")&&"function"===typeof Tb.Popover?Tb.Popover:Tb.Popover=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"relayout",value:function(ha){var Pa=this.get("body"),nb=this.get("arrow"),cc=this.get("close button");nb=nb.height;ha?(Pa.animate({topCenter:rd.pt(0,nb),duration:200}),cc.animate({topRight:Pa.topRight.addXY(8,-8),duration:200})):(Pa.topCenter=rd.pt(0,nb),cc.topRight=
Pa.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:rd.pt(200,200),fill:rd.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},
get:function(){return this.get("body").submorphs[0]},set:function(ha){var Pa=this;this.get("body").addMorph(ha);this.whenRendered().then(function(){return Pa.relayout()})}},submorphs:{initialize:function(){var ha=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:rd.pt(0,0),borderColor:rd.Color.transparent,vertices:[rd.pt(-10,0),rd.pt(0,-15),rd.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(rd.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",
fill:null,extent:rd.pt(16,16),borderColor:rd.Color.transparent}];var Pa=$jscomp.makeIterator(this.submorphs);Pa.next();var nb=Pa.next().value;Pa=Pa.next().value;rd.connect(Pa,"fire",this,"close");rd.connect(nb,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return ha.animated=!0},1E3)}}}}}],Tb,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:163,end:2541})}(rd.Morph));rd.Popover=bc;rd.Popover=bc;rd.Popover=bc;var dd=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");dd.Morph=bf;dd.TilingLayout=Mc;dd.morph=wc;dd.Label=be;dd.HorizontalLayout=Bd;dd.Icon=af;dd.InputLine=tc;dd.config=Tc;dd.connect=Ad;dd.signal=zb;dd.Color=Wc;dd.LinearGradient=$c;dd.pt=jc;dd.rect=gd;dd.num=ie;dd.obj=Ud;dd.popovers=Td;dd.ValueScrubber=fb;dd.Popover=bc;(function(gc){var Tb=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Tb.ContextSensitiveWidget?Tb.ContextSensitiveWidget:Tb.ContextSensitiveWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:dd.Color.transparent},
isSelected:{defaultValue:"false",set:function(ha){this.setProperty("isSelected",ha);this.fontColor=ha?dd.Color.white:dd.Color.black}},layout:{initialize:function(){this.layout=new dd.HorizontalLayout}},context:{serialize:!1}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,
end:2441})})(dd.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("ShortcutWidget")&&"function"===typeof Tb.ShortcutWidget?Tb.ShortcutWidget:Tb.ShortcutWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){ha.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(ha){this.setProperty("title",ha);this.getSubmorphNamed("valueString").value=ha}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(ha){this.submorphs.forEach(function(Pa){return Pa.fontColor=ha})}},submorphs:{initialize:function(){this.submorphs=[dd.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],
fontSize:15,padding:dd.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:dd.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:2443,end:3793})})(dd.ContextSensitiveWidget);Td=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("LayoutWidget")&&"function"===typeof Tb.LayoutWidget?Tb.LayoutWidget:Tb.LayoutWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var ha=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return Pa=new dd.popovers.LayoutPopover({hasFixedPosition:!!ha.ownerChain().find(function(cc){return cc.hasFixedPosition}),container:ha.context}),nb.yield(Pa.fadeIntoWorld(ha.globalBounds().center()),2);dd.connect(Pa,"layoutChanged",ha,"layoutChanged");dd.signal(ha,"openWidget",Pa);nb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,
end:4641})}(dd.ShortcutWidget);dd.LayoutWidget=Td;dd.LayoutWidget=Td;dd.LayoutWidget=Td;Td=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("ColorWidget")&&"function"===typeof Tb.ColorWidget?Tb.ColorWidget:Tb.ColorWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"relayout",value:function(ha){ha?this.submorphs=this.color?this.color.isGradient?
this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var ha=this.color;if(2*ha.stops.length==this.submorphs.length-3){var Pa;for(Pa in this.color.stops){var nb=ha.stops[Pa];var cc=nb.color,Lc=nb.offset,pd=$jscomp.makeIterator(this.submorphs[2+2*Pa].submorphs).next().value;nb=this.submorphs[3+2*Pa];pd.fill=cc;nb.value=(100*Lc).toFixed()+"%"+(Pa<ha.stops.length-
1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=dd.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:dd.pt(15,
15),fill:dd.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:dd.pt(5,7.5),fill:dd.Color.white,borderColor:dd.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[dd.pt(0,0),dd.pt(10,10)],borderColor:dd.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:dd.pt(15,15),fill:dd.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:dd.pt(5,7.5),fill:this.color,borderColor:dd.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:dd.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var ha=this.color,Pa=[{type:"label",padding:dd.rect(0,0,5,0),value:"linearGradient"==ha.type?dd.num.toDegrees(ha.vectorAsAngle()).toFixed()+"\u00b0,":""}],nb;for(nb in ha.stops){var cc=ha.stops[nb],Lc=cc.color;cc=cc.offset;
Pa.push({extent:dd.pt(this.fontSize,this.fontSize),fill:dd.Color.transparent,layout:new dd.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Lc}]});Pa.push({type:"label",padding:dd.rect(0,0,5,0),value:(100*cc).toFixed()+"%"+(nb<ha.stops.length-1?",":"")})}return Pa}},{key:"onMouseDown",value:function(ha){this.openFillEditor()}},{key:"update",value:function(ha){this.color=ha}},{key:"openFillEditor",value:function(){var ha=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==
nb.nextAddress)return Pa=new dd.popovers.FillPopover({hasFixedPosition:!!ha.ownerChain().find(function(cc){return cc.hasFixedPosition}),handleMorph:ha.context,fillValue:ha.color,title:"Fill Control",gradientEnabled:ha.gradientEnabled}),nb.yield(Pa.fadeIntoWorld(ha.globalBounds().center()),2);dd.connect(Pa,"fillValue",ha,"update");dd.signal(ha,"openWidget",Pa);nb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=
new dd.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:dd.Color.white},nonSelectionFontColor:{defaultValue:dd.Color.black},color:{defaultValue:dd.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(ha){this.getProperty("isSelected")!=ha&&(this.getSubmorphNamed("valueString").fontColor=ha?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",ha))}},submorphs:{after:["nonSelectionFontColor",
"selectionFontColor"],initialize:function(){dd.connect(this,"color",this,"relayout",{converter:function(ha,Pa){return(Pa&&Pa.isColor)!=(ha&&ha.isColor)}});this.relayout(!0)}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4705,end:10188})}(dd.ContextSensitiveWidget);dd.ColorWidget=
Td;dd.ColorWidget=Td;dd.ColorWidget=Td;Td=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("BooleanWidget")&&"function"===typeof Tb.BooleanWidget?Tb.BooleanWidget:Tb.BooleanWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},
{key:"properties",get:function(){return{fontFamily:{defaultValue:dd.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(ha){this.setProperty("boolean",ha);this.value=dd.obj.safeToString(ha);this.fontColor=this.boolean?dd.Color.green:dd.Color.red}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10197,end:10682})}(dd.Label);dd.BooleanWidget=Td;dd.BooleanWidget=Td;dd.BooleanWidget=Td;Td=$a("N",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("NumberWidget")&&"function"===typeof Tb.NumberWidget?Tb.NumberWidget:Tb.NumberWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){td._get(Object.getPrototypeOf(Ya.prototype),
"onMouseDown",this).call(this,ha);"up"==ha.targetMorph.name&&this.increment();"down"==ha.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return dd.obj.dissoc(td._get(Object.getPrototypeOf(Ya.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(ha,Pa){Pa=void 0===Pa?!0:Pa;this.setProperty("number",Pa?ha/this.scaleFactor:ha);dd.signal(this,"number",this.number);this.relayout(Pa)}},{key:"relayoutButtons",value:function(){var ha=this.getSubmorphNamed("up"),
Pa=this.getSubmorphNamed("down");this.getSubmorphNamed("value");ha.height=Pa.height=Math.floor(this.height/2);ha.width=Pa.width=20}},{key:"onChange",value:function(ha){td._get(Object.getPrototypeOf(Ya.prototype),"onChange",this).call(this,ha);"extent"!=ha.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(ha){var Pa=this.getSubmorphNamed("value"),nb=this.showStepControls?20:0;Pa&&(this.autofit?(ha||(Pa.value=this.number*this.scaleFactor),Pa.fit(),this.height=Pa.height,this.width=
Pa.width+nb):ha||(Pa.width=this.width-nb),this.relayoutButtons(),ha||(Pa.value=dd.num.roundTo(this.number*this.scaleFactor,1),Pa.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,Pa.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,Pa.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,
!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(ha){this.setProperty("autofit",ha);this.getSubmorphNamed("value").scaleToBounds=!ha}},number:{defaultValue:0,after:["unit","autofit"],set:function(ha){this.setProperty("number",ha);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
floatingPoint:{after:["number","submorphs"],set:function(ha){this.setProperty("floatingPoint",ha);this.get("value").floatingPoint=ha},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var ha=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&ha&&!!ha[1]}},padding:{isStyleProp:!0,defaultValue:dd.rect(5,3,0,0),after:["submorphs"],set:function(ha){this.setProperty("padding",ha);this.getSubmorphNamed("value").padding=
ha}},extent:{defaultValue:dd.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(ha){this.get("value").baseFactor=ha}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var ha=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){ha.relayout()})}},fontColor:{isStyleProp:!0,
defaultValue:dd.Color.rgbHex("#0086b3"),set:function(ha){this.setProperty("fontColor",ha)}},isSelected:{set:function(ha){this.getProperty("isSelected")!=ha&&(ha?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",ha))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(ha){this.setProperty("fontFamily",ha)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(ha){this.setProperty("fontSize",
ha)}},layout:{initialize:function(){this.layout=new dd.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(ha){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=ha)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(ha){0<ha.length||(this.submorphs=[new dd.ValueScrubber({name:"value",unit:this.unit,
floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[dd.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[dd.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(dd.Morph));dd.NumberWidget=Td;dd.NumberWidget=Td;dd.NumberWidget=Td;bc=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("ShadowWidget")&&"function"===typeof Tb.ShadowWidget?Tb.ShadowWidget:Tb.ShadowWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){this.openPopover()}},
{key:"openPopover",value:function(){var ha=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return Pa=new dd.popovers.ShadowPopover({hasFixedPosition:!!ha.ownerChain().find(function(cc){return cc.hasFixedPosition}),shadowValue:ha.shadowValue}),nb.yield(Pa.fadeIntoWorld(ha.globalBounds().center()),2);dd.connect(Pa,"shadowValue",ha,"shadowValue");dd.connect(ha,"shadowValue",ha,"update");dd.signal(ha,"openWidget",Pa);nb.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var ha=this.shadowValue,Pa=ha.blur,nb=ha.spread,cc=ha.distance;ha=ha.color;var Lc=$jscomp.makeIterator(this.submorphs),pd=Lc.next().value,ce=Lc.next().value;ce=$jscomp.makeIterator(ce.submorphs).next().value;
Lc=Lc.next().value;pd.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";ce.fill=ha;Lc.value=", "+Pa+"px, "+cc+"px, "+nb+"px)"}},{key:"initShadowDisplay",value:function(){var ha=this.shadowValue,Pa=ha.blur,nb=ha.spread,cc=ha.distance;ha=ha.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},dd.morph({fill:dd.Color.transparent,extent:dd.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:dd.pt(this.fontSize,
this.fontSize),position:dd.pt(2,2),fill:ha,borderColor:dd.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+Pa+"px, "+cc+"px, "+nb+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(ha){this.setProperty("shadowValue",ha);this.renderShadowDisplay()}},fill:{defaultValue:dd.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(ha){this.submorphs.forEach(function(Pa){return Pa.fontColor=ha})}},isSelected:{defaultValue:!1,set:function(ha){this.setProperty("isSelected",ha);this.fontColor=ha?dd.Color.white:dd.Color.black}},layout:{initialize:function(){this.layout=new dd.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(dd.Morph);dd.ShadowWidget=bc;dd.ShadowWidget=bc;dd.ShadowWidget=bc;bc=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("PointWidget")&&"function"===typeof Tb.PointWidget?Tb.PointWidget:Tb.PointWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){this.openPopover()}},{key:"openPopover",value:function(){var ha=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return Pa=new dd.popovers.PointPopover({pointValue:ha.pointValue,hasFixedPosition:!!ha.ownerChain().find(function(cc){return cc.hasFixedPosition})}),nb.yield(Pa.fadeIntoWorld(ha.globalBounds().center()),2);dd.connect(Pa,"pointValue",ha,"pointValue");dd.signal(ha,"openWidget",Pa);
nb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(ha){this.setProperty("isSelected",ha);this.fontColor=ha?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:dd.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:dd.Color.black},fontFamily:{defaultValue:dd.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(ha){var Pa=dd.Color.rgbHex("#0086b3");this.setProperty("pointValue",ha);this.textAndAttributes=["pt(",null,ha.x.toFixed(),{fontColor:Pa},",",{},ha.y.toFixed(),{fontColor:Pa},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(dd.Label);dd.PointWidget=bc;dd.PointWidget=bc;dd.PointWidget=bc;bc=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("PaddingWidget")&&"function"===typeof Tb.PaddingWidget?Tb.PaddingWidget:Tb.PaddingWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){this.openPopover()}},{key:"openPopover",value:function(){var ha=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return Pa=new dd.popovers.RectanglePopover({hasFixedPosition:!!ha.ownerChain().find(function(cc){return cc.hasFixedPosition}),rectangle:ha.rectangle}),Pa.relayout(),nb.yield(Pa.fadeIntoWorld(ha.globalBounds().center()),2);dd.connect(Pa,"rectangle",ha,"rectangle");dd.signal(ha,
"openWidget",Pa);nb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:dd.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(ha){this.setProperty("isSelected",ha);this.fontColor=ha?dd.Color.white:dd.Color.black}},rectangle:{defaultValue:dd.rect(0),set:function(ha){this.setProperty("rectangle",
ha);this.value=dd.obj.safeToString(ha)}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(dd.Label);dd.PaddingWidget=bc;dd.PaddingWidget=bc;dd.PaddingWidget=bc;bc=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Tb.hasOwnProperty("IconWidget")&&
"function"===typeof Tb.IconWidget?Tb.IconWidget:Tb.IconWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"onMouseDown",value:function(ha){this.openPopover()}},{key:"openPopover",value:function(){var ha=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return Pa=new dd.popovers.IconPopover({hasFixedPosition:!!ha.ownerChain().find(function(cc){return cc.hasFixedPosition})}),
nb.yield(Pa.fadeIntoWorld(ha.globalBounds().center()),2);dd.connect(Pa,"select",ha,"iconValue",{converter:function(cc){return cc&&dd.Icon.makeLabel(cc).value},varMapping:{Icon:dd.Icon}});dd.signal(ha,"openWidget",Pa);nb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:dd.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,
get:function(){return this.value},set:function(ha){this.value=ha||"No Icon"}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(dd.Label);dd.IconWidget=bc;dd.IconWidget=bc;dd.IconWidget=bc;bc=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
Ya=Tb.hasOwnProperty("StringWidget")&&"function"===typeof Tb.StringWidget?Tb.StringWidget:Tb.StringWidget=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"truncate",value:function(ha){return 200<ha.length?ha.slice(0,20)+"...":ha}},{key:"onFocus",value:function(ha){var Pa=this,nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cc){if(1==cc.nextAddress)return td._get(Object.getPrototypeOf(Ya.prototype),
"onFocus",Pa).call(Pa,ha),Pa.readOnly?cc.return():Pa.stringTooLong?cc.yield(Pa.world().editPrompt("edit string",{requester:Pa,input:Pa.stringValue}),2):(Pa.borderColor=dd.Color.white.withA(.9),Pa.textString=Pa.stringValue,cc.return());nb=cc.yieldResult;if("string"===typeof nb)Pa.onInput(nb);cc.jumpToEnd()})}},{key:"onBlur",value:function(ha){td._get(Object.getPrototypeOf(Ya.prototype),"onBlur",this).call(this,ha);this.readOnly||(this.borderColor=dd.Color.transparent,this.onInput(this.textString))}},
{key:"onInput",value:function(ha){this.owner.focus();dd.signal(this,"inputAccepted",ha);this.stringValue=ha}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:dd.Color.transparent},fontColor:{defaultValue:dd.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:dd.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:dd.rect(0,
0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(ha){this.setProperty("stringValue",ha);this.textString=this.truncate(ha);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(ha){this.setProperty("isSelected",ha);this.fontColor=ha?dd.Color.white:dd.Color.blue}}}}}],Tb,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(dd.InputLine);dd.StringWidget=bc;dd.StringWidget=bc;dd.StringWidget=bc;dd.valueWidgets=Va;Object.assign(dd.valueWidgets,{NumberWidget:dd.NumberWidget,StringWidget:dd.StringWidget,IconWidget:dd.IconWidget,PaddingWidget:dd.PaddingWidget,ShadowWidget:dd.ShadowWidget,PointWidget:dd.PointWidget,
BooleanWidget:dd.BooleanWidget,LayoutWidget:dd.LayoutWidget,ColorWidget:dd.ColorWidget});var Ub=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Ub.Ellipse=uc;Ub.Icon=af;Ub.Morph=bf;Ub.Path=Pd;Ub.Text=pe;Ub.HorizontalLayout=Bd;Ub.VerticalLayout=Rb;Ub.morph=wc;Ub.Color=Wc;Ub.pt=jc;Ub.rect=gd;Ub.Rectangle=xd;Ub.arr=Yb;Ub.connect=Ad;Ub.disconnect=qc;Ub.LabeledCheckBox=Fc;Ub.DropDownSelector=Uc;Ub.Button=vd;Ub.Menu=Xd;Ub.NumberWidget=Td;Ub.InteractiveMorphSelector=od;Ub.easings=Ld;(function(gc){var Tb=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("ProportionSlider")&&"function"===typeof Tb.ProportionSlider?Tb.ProportionSlider:Tb.ProportionSlider=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"alignWithTarget",value:function(){this.setBounds(this.axis.getProportionSliderBounds(this))}},{key:"onDragStart",value:function(){this.view.visible=!0}},{key:"onDrag",
value:function(ha){this.axis.adjustStretch(this.axis.getDelta(ha));this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){this.view.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionSlider"}},{key:"properties",get:function(){return{axis:{},view:{},fill:{defaultValue:Ub.Color.transparent}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:662,end:1139})})(Ub.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("MinViewer")&&"function"===typeof Tb.MinViewer?Tb.MinViewer:Tb.MinViewer=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"alignWithTarget",value:function(){this.textString="min: "+this.axis.targetAxis.min.toFixed()+
"px !"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinViewer"}},{key:"properties",get:function(){return{axis:{}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1141,end:1361})})(Ub.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ya=Tb.hasOwnProperty("MinSlider")&&"function"===typeof Tb.MinSlider?Tb.MinSlider:Tb.MinSlider=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"alignWithTarget",value:function(){this.position=this.axis.getMinSliderPosition()}},{key:"requestToShow",value:function(){this.visible=!this.axis.targetAxis.fixed}},{key:"requestToHide",value:function(){this.active?this.shouldHide=!0:this.visible=!1}},{key:"onDragStart",
value:function(){var ha=$jscomp.makeIterator(this.submorphs),Pa=ha.next().value;ha=ha.next().value;this.axis.forceMenuHidden=!0;Pa.visible=!0;this.active=ha.visible=!0}},{key:"onDrag",value:function(ha){this.axis.targetAxis.min+=-this.getDelta(ha);this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){var ha=$jscomp.makeIterator(this.submorphs),Pa=ha.next().value;ha=ha.next().value;this.axis.forceMenuHidden=!1;Pa.visible=!1;this.active=ha.visible=!1;this.shouldHide&&(this.shouldHide=
this.visible=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinSlider"}},{key:"properties",get:function(){return{axis:{},fill:{defaultValue:Ub.Color.green},visible:{defaultValue:!1},becomesActiveOnHover:{defaultValue:!0}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:1363,end:2515})})(Ub.Ellipse);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("AxisHalo")&&"function"===typeof Tb.AxisHalo?Tb.AxisHalo:Tb.AxisHalo=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"initialize",value:function(){this.setBounds(this.fetchBounds());var ha=this.minSlider(),Pa=this.axisMenu(),nb=this.proportionSlider();nb.addMorph(ha);
this.submorphs=[nb,Pa];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(ha){this._forceMenuHidden=ha;this.axisMenu.visible=!ha}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();
this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(ha){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var ha=this.proportionViewer();return this.halo.addGuide(new Ub.ProportionSlider({nativeCursor:this.getResizeCursor(),axis:this,view:ha,submorphs:[this.devider(),ha]}))}},{key:"devider",value:function(){return new Ub.Morph({visible:!this.lastAxis,
fill:Ub.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var ha=this.minSpaceVisualizer(),Pa=this.minViewer();return this.halo.addGuide(new Ub.MinSlider({nativeCursor:this.getResizeCursor(),axis:this,submorphs:[ha,Pa]}))}},{key:"minViewer",value:function(){return this.viewer(new Ub.MinViewer({axis:this,position:this.getMinViewerPosition()}))}},{key:"minSpaceBorder",value:function(){return new Ub.Path(Object.assign({position:Ub.pt(-1,
-1),borderStyle:"dashed",borderColor:Ub.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var ha=this,Pa=this.minSpaceBorder();return this.halo.addGuide(new Ub.Morph({fill:Ub.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[Pa],alignWithTarget:function(){this.extent=ha.getMinSpaceExtent();this.topLeft=Ub.pt(5,5)}}))}},{key:"axisMenu",value:function(){var ha=this.lockButton(),Pa=this.menuButton(),nb=this;return new Ub.Morph({layout:this.getMenuLayout(),
submorphs:[ha,Pa],fill:Ub.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(nb.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var ha=this;return this.halo.addGuide(new Ub.Morph({fill:Ub.Color.transparent,extent:Ub.pt(25,25),submorphs:[{center:Ub.pt(12.5,12.5),fill:Ub.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){ha.targetAxis.fixed?(this.fontColor=Ub.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=Ub.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){ha.targetAxis.fixed=!ha.targetAxis.fixed;ha.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var ha=this,Pa=this;return new Ub.Morph({fill:Ub.Color.transparent,extent:Ub.pt(25,25),submorphs:[{fill:Ub.Color.transparent,styleClasses:["fa","fa-cog"],center:Ub.pt(12.5,12.5)}],onMouseDown:function(nb){Pa.forceMenuVisible=!0;
this.addMorph(nb.state.menu=new Ub.Menu({position:Ub.pt(15,15),items:[["Remove "+Pa.subject,function(){ha.targetAxis.remove();ha.halo.initGuides();ha.halo.alignWithTarget()}],["Insert "+Pa.subject+" before",function(){ha.targetAxis.addBefore();ha.halo.initGuides();ha.halo.alignWithTarget()}],["Insert "+Pa.subject+" after",function(){ha.targetAxis.addAfter();ha.halo.initGuides();ha.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(ha){var Pa=ha.position;ha=ha.alignWithTarget;return this.halo.addGuide(new Ub.Text({styleClasses:["Halo"],
padding:Ub.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Ub.Color.white,fill:Ub.Color.black.withA(.5),position:Pa,alignWithTarget:ha,readOnly:!0}))}},{key:"proportionViewer",value:function(){var ha=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=ha.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}},{key:"properties",get:function(){return{halo:{},targetAxis:{},container:{},
fill:{defaultValue:Ub.Color.transparent},submorphs:{initialize:function(){this.initialize()}}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2517,end:8448})})(Ub.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("RowHalo")&&
"function"===typeof Tb.RowHalo?Tb.RowHalo:Tb.RowHalo=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(ha){this.targetAxis.height+=ha}},{key:"getDelta",value:function(ha){return ha.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Ub.pt(-45,
this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Ub.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(ha){return this.targetAxis.length>ha.height?Ub.pt(2,5):Ub.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Ub.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Ub.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Ub.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",
value:function(){return Ub.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Ub.pt(this.container.width+50,2),vertices:[Ub.pt(0,1),Ub.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Ub.pt(40,20)}},{key:"getProportionSliderBounds",value:function(ha){return Ub.pt(0,ha.owner.height-5).extent(Ub.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Ub.pt(15,4).extent(Ub.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RowHalo"}},{key:"properties",get:function(){return{row:{},targetAxis:{derived:!0,get:function(){return this.halo.target.row(this.row)}}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8450,end:9799})})(Ub.AxisHalo);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ya=Tb.hasOwnProperty("ColumnHalo")&&"function"===typeof Tb.ColumnHalo?Tb.ColumnHalo:Tb.ColumnHalo=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:Symbol.for("lively-instance-initialize"),value:function(ha){var Pa=ha.col;ha=ha.halo;td._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:ha.target.col(Pa),halo:ha})}},{key:"subject",get:function(){return"column"}},
{key:"adjustStretch",value:function(ha){this.targetAxis.width+=ha}},{key:"getDelta",value:function(ha){return ha.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Ub.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Ub.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(ha){return this.targetAxis.length>ha.width?Ub.pt(5,3):Ub.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Ub.HorizontalLayout}},
{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Ub.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Ub.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Ub.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Ub.pt(2,this.container.height+50),vertices:[Ub.pt(1,0),Ub.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Ub.pt(20,
40)}},{key:"getProportionSliderBounds",value:function(ha){return Ub.pt(ha.owner.width-5,0).extent(Ub.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Ub.pt(4,15).extent(Ub.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:9801,end:11056})})(Ub.AxisHalo);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("CellGuide")&&"function"===typeof Tb.CellGuide?Tb.CellGuide:Tb.CellGuide=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"menuItems",value:function(){var ha=this,Pa=Ub.Icon.textAttribute("check-square-o"),nb=Ub.Icon.textAttribute("square-o");
Pa[1].textStyleClasses.push("annotation");nb[1].textStyleClasses.push("annotation");nb[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?nb:Pa)),function(){ha.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Pa:nb)),function(){ha.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Ub.Rectangle).sides),$jscomp.arrayFromIterable((new Ub.Rectangle).corners)).map(function(cc){return[[cc,
{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(ha.cellGroup.align==cc?Pa:nb),["  ",null]),function(){return ha.cellGroup.align=cc}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var cc=ha.cellGroup.morph;cc&&(ha.world().firstHand.grab(cc),ha.world().firstHand.longClickGrab=!0,cc.position=Ub.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Tb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11058,end:12377})})(Ub.Morph);(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("LayoutHalo")&&"function"===typeof Tb.LayoutHalo?Tb.LayoutHalo:Tb.LayoutHalo=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return td(Ya,gc,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{get:function(){return this.container.layout}},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Ub.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12379,end:12833})})(Ub.Morph);Va=$a("G",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Tb.GridLayoutHalo?Tb.GridLayoutHalo:Tb.GridLayoutHalo=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return td(Ya,gc,[{key:"previewDrop",value:function(ha){1>ha.length||(ha=this.cellGuides.find(function(Pa){return Pa.fullContainsWorldPoint($world.firstHand.position)}),ha!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=ha)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(ha){var Pa=this;this.currentCell&&ha.whenRendered().then(function(){return Pa.currentCell.cellGroup.morph=ha})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var ha=this.target,Pa=new Ub.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Ub.Color.transparent,checked:ha.compensateOrigin}),nb=new Ub.LabeledCheckBox({label:"Resize Submorphs",fill:Ub.Color.transparent,name:"fitToCell",checked:ha.fitToCell});Ub.connect(Pa,"checked",ha,"compensateOrigin");Ub.connect(nb,"checked",ha,"fitToCell");Ub.connect(Pa,"checked",this,"alignWithTarget");return[Pa,nb]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Ub.arr.reverse(this.guides).forEach(function(ha){return ha.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var ha=this;Ub.arr.withoutAll(this.target.cellGroups,this.guides.map(function(Pa){return Pa.cellGroup})).forEach(function(Pa){return ha.addMorph(ha.cellGuide(Pa))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var ha=this,Pa=this.addMorph({fill:Ub.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(nb){Pa.addMorph(ha.cellGuide(nb))});this.cellGuides=Pa.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(ha){ha.isHaloItem=!0;this.guides.push(ha);return ha}},
{key:"initRowGuides",value:function(){var ha=this,Pa=this;this.addGuide(this.addMorph(new Ub.Morph({width:25,fill:Ub.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Ub.pt(-5,0),alignWithTarget:function(){this.height=Pa.container.height}})));Ub.arr.range(0,this.target.rowCount-1).forEach(function(nb){ha.addMorph(new Ub.RowHalo({row:nb,halo:ha}))})}},{key:"initColumnGuides",value:function(){var ha=this,Pa=this;this.addGuide(this.addMorph(new Ub.Morph({height:25,fill:Ub.Color.gray.withA(.7),
borderRadius:15,width:this.container.width,bottomLeft:Ub.pt(0,-5),alignWithTarget:function(){this.width=Pa.container.width}})));Ub.arr.range(0,this.target.columnCount-1).forEach(function(nb){ha.addMorph(new Ub.ColumnHalo({col:nb,halo:ha}))})}},{key:"resizer",value:function(){var ha=this;return this.addGuide(new Ub.Morph({fill:Ub.Color.transparent,extent:Ub.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(Pa){ha.container.resizeBy(Pa.state.dragDelta);ha.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
ha.extent}}))}},{key:"cellResizer",value:function(ha,Pa){var nb=this,cc="topLeft"==Pa?"bottomRight":"topLeft";return new Ub.Ellipse({borderWidth:1,visible:!1,borderColor:Ub.Color.black,nativeCursor:"nwse-resize",removeCell:function(Lc){ha.disconnect(Lc);nb.alignWithTarget()},addCell:function(Lc){ha.connect(Lc);nb.alignWithTarget()},start:function(){this.fixpointCell=ha[cc];this.draggedDelta=ha.bounds().partNamed(Pa);this.debugMorph=nb.addMorph(new Ub.Morph({fill:Ub.Color.orange.withA(.5)}))},update:function(Lc){var pd=
this;this.draggedDelta=this.draggedDelta.addPt(Lc);var ce=Ub.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(ce);nb.cells.forEach(function(Ie){var Gd=ce.intersection(Ie.bounds()).area()/Ie.bounds().area();ha.includes(Ie)&&.1>Gd&&pd.removeCell(Ie);!ha.includes(Ie)&&Gd>1/3&&pd.addCell(Ie)})},onDragEnd:function(Lc){this.debugMorph.remove()},onDragStart:function(Lc){this.start(Lc.position)},onDrag:function(Lc){this.update(Lc.state.dragDelta)}})}},{key:"cellGuide",
value:function(ha){var Pa=this,nb=this.cellResizer(ha,"topLeft"),cc=this.cellResizer(ha,"bottomRight");return this.addGuide(new Ub.CellGuide({cellGroup:ha,bounds:ha.bounds(),fill:Ub.Color.transparent,borderColor:Ub.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[nb,cc],onMouseDown:function(Lc){this.becomeActive()},deactivate:function(){this.borderColor=Ub.Color.orange;this.fill=Ub.Color.transparent;this.submorphs.forEach(function(Lc){Lc.visible=!1})},becomeActive:function(){Pa.guides.forEach(function(Lc){Lc.isCell&&
Lc.deactivate()});this.borderColor=Ub.Color.rgbHex("#1565C0");this.fill=Ub.Color.rgbHex("#1565C0").withA(.3);Pa.addMorph(this.remove());this.submorphs.forEach(function(Lc){Lc.visible=!0})},startPreview:function(Lc){this.fill=Ub.Color.orange.withA(.7)},stopPreview:function(Lc){this.fill=Ub.Color.transparent},onDrop:function(Lc){var pd=$jscomp.makeIterator(Lc.hand.grabbedMorphs).next().value;Lc.hand.dropMorphsOn(Pa.container);ha.morph=pd},alignWithTarget:function(){ha.bounds().isNonEmpty()?(this.setBounds(ha.bounds()),
nb.center=this.innerBounds().topLeft(),cc.center=this.innerBounds().bottomRight()):(Ub.arr.remove(Pa.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ub.Color.transparent},cells:{derived:!0,get:function(){return Ub.arr.flatten(this.target.col(0).items.map(function(ha){return ha.row(0).items}))}},submorphs:{after:["target"],initialize:function(){this.initialize()}}}}}],Tb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12842,end:20283})}(Ub.LayoutHalo));Ub.GridLayoutHalo=Va;Ub.GridLayoutHalo=Va;Ub.GridLayoutHalo=Va;Td=function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Tb.TilingLayoutHalo?Tb.TilingLayoutHalo:Tb.TilingLayoutHalo=
function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"remove",value:function(){td._get(Object.getPrototypeOf(Ya.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(ha){}},{key:"removePreviews",value:function(){this.previews.forEach(function(ha){return ha.clear()})}},
{key:"previewDrop",value:function(ha){var Pa=this;0<this.previews.length||(this.previews=ha.map(function(nb){return Pa.container.addMorph({type:Ub.DropPreview,bounds:nb.bounds()})}),this.previews.forEach(function(nb){nb.step()}))}},{key:"updateSpacing",value:function(ha){this.target.spacing=ha}},{key:"updateAxis",value:function(ha){this.target.axis=ha}},{key:"updateAlign",value:function(ha){this.target.align=ha}},{key:"optionControls",value:function(){var ha=this.target,Pa=new Ub.DropDownSelector({borderRadius:2,
padding:3,selectedValue:ha.axis,values:["row","column"]}),nb=new Ub.DropDownSelector({borderRadius:2,padding:3,selectedValue:ha.align,values:["left","center"]});ha=new Ub.NumberWidget({min:0,number:ha.spacing,padding:Ub.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Ub.Color.gray,unit:"px"});Ub.connect(ha,"update",this,"updateSpacing");Ub.connect(nb,"update",this,"updateAlign");Ub.connect(Pa,"update",this,"updateAxis");var cc={type:"label",padding:Ub.rect(0,5,5,5),fill:Ub.Color.transparent,
fontColor:Ub.Color.gray.darker(),readOnly:!0};return[[Object.assign({},cc,{textString:"Submorph Spacing"}),ha],[Object.assign({},cc,{textString:"Tiling Align"}),nb],[Object.assign({},cc,{textString:"Tiling Axis"}),Pa]].map(function(Lc){return{submorphs:Lc,fill:null,layout:new Ub.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ub.Color.transparent},previews:{defaultValue:[]}}}}],
Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20292,end:22407})}(Ub.LayoutHalo);Ub.TilingLayoutHalo=Td;Ub.TilingLayoutHalo=Td;Ub.TilingLayoutHalo=Td;(function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("DropPreview")&&"function"===typeof Tb.DropPreview?
Tb.DropPreview:Tb.DropPreview=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var ha=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){if(1==nb.nextAddress)return Pa=Ub.easings.inOutQuad,nb.yield(ha.animate({opacity:.5,duration:(ha.pulseDuration-10)/2,easing:Pa}),2);if(3!=nb.nextAddress)return nb.yield(ha.animate({opacity:1,
duration:(ha.pulseDuration-10)/2,easing:Pa}),3);ha.stopped||ha.step();nb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Ub.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Ub.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22409,end:23245})})(Ub.Morph);Td=$a("F",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Tb.FlexLayoutHalo?Tb.FlexLayoutHalo:Tb.FlexLayoutHalo=function(ha){ha&&
ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,gc,[{key:"handleDrop",value:function(ha){}},{key:"previewDrop",value:function(ha){var Pa=this;0<this.previews.length||(this.previews=ha.map(function(nb){return Pa.container.addMorph({type:Ub.DropPreview,position:Pa.container.localize(Pa.world().firstHand.position),extent:nb.bounds().extent()})}),this.previews.forEach(function(nb){nb.step()}))}},{key:"remove",value:function(){td._get(Object.getPrototypeOf(Ya.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(ha){return ha.clear()})}},{key:"onDrop",value:function(ha){this.removePreviews();ha.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(ha){ha&&(this.originalExtent=this.container.extent);this.target.autoResize=ha;ha||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(ha){this.target.resizeSubmorphs=ha;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(ha){this.target.align=ha}},{key:"updateDirectionPolicy",value:function(ha){this.target.direction=ha}},{key:"updateSpacing",value:function(ha){this.target.spacing=ha}},{key:"optionControls",value:function(){var ha=this.target,Pa=ha.possibleAlignValues?{fill:Ub.Color.transparent,layout:new Ub.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Ub.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:ha.align,values:ha.possibleAlignValues})]}:null,nb=ha.possibleDirectionValues?{fill:Ub.Color.transparent,layout:new Ub.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new Ub.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:ha.direction,values:ha.possibleDirectionValues})]}:
null,cc=new Ub.NumberWidget({fill:Ub.Color.white,borderWidth:1,borderRadius:4,padding:Ub.rect(5,4,0,0),borderColor:Ub.Color.gray,min:0,number:ha.spacing,unit:"px"}),Lc=new Ub.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Ub.Color.transparent,checked:ha.autoResize});ha=new Ub.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:Ub.Color.transparent,checked:ha.resizeSubmorphs});Ub.connect(cc,"update",this,"updateSpacing");
Ub.connect(Lc,"checked",this,"updateAutoResizePolicy");Ub.connect(ha,"checked",this,"updateResizeSubmorphsPolicy");Pa&&Ub.connect(Pa.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");nb&&Ub.connect(nb.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[Lc,ha].concat($jscomp.arrayFromIterable([Pa,nb].filter(Boolean)),[{fill:Ub.Color.transparent,layout:new Ub.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Ub.Color.gray.darker(),padding:Ub.rect(0,
5,5,5)},cc]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Ub.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:23254,end:27441})}(Ub.LayoutHalo));Ub.FlexLayoutHalo=Td;Ub.FlexLayoutHalo=Td;Ub.FlexLayoutHalo=Td;bc=$a("c",function(gc){var Tb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Tb.hasOwnProperty("ConstraintLayoutHalo")&&"function"===typeof Tb.ConstraintLayoutHalo?Tb.ConstraintLayoutHalo:Tb.ConstraintLayoutHalo=function(ha){ha&&ha[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return td(Ya,
gc,[{key:"handleDrop",value:function(ha){}},{key:"onDrop",value:function(ha){ha.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphConstraintLayoutSettings",value:function(ha){var Pa={};this.target.changeSettingsFor(ha.submorph,(Pa[ha.axis]=ha.policy,Pa),!0)}},{key:"onSubmorphSettingsDragStart",value:function(ha,Pa){var nb=this;ha.stop();var cc=this.target.settingsFor(Pa);Pa="";for(var Lc in cc)Pa+=Lc+":"+
cc[Lc]+" ";var pd=Ub.morph({type:"label",value:Pa,isLayoutable:!1});pd.wantsToBeDroppedOn=function(ce){return nb.target.layoutableSubmorphs.includes(ce)};pd.onBeingDroppedOn=function(ce,Ie){pd.remove();if(ce=nb.target.layoutableSubmorphs.includes(Ie)?Ie:ha.world.morphsContainingPoint(ha.hand.position).find(function(Gd){return nb.target.layoutableSubmorphs.includes(Gd)}))nb.updateSubmorphConstraintLayoutSettings({policy:cc.x,axis:"x",submorph:ce}),nb.updateSubmorphConstraintLayoutSettings({policy:cc.y,
axis:"y",submorph:ce}),ce.show(),$world.setStatusMessage("layout settings applied")};ha.hand.grab(pd)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var ha=this,Pa,nb,cc,Lc,pd,ce,Ie,Gd,Af,Ce,zf,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uf){switch(uf.nextAddress){case 1:return Pa=ha.target.layoutableSubmorphs,ha.env.eventDispatcher.isKeyPressed("Shift")?(cc=Pa.map(function(Cf){return{isListItem:!0,string:String(Cf),value:Cf}}),uf.yield($world.listPrompt("Select morph",
cc,{requester:ha,onSelection:function(Cf){return Cf.show()}}),5)):uf.yield(Ub.InteractiveMorphSelector.selectMorph(ha.world(),ha,function(Cf){return Pa.includes(Cf)}),4);case 4:nb=uf.yieldResult;uf.jumpTo(3);break;case 5:Lc=uf.yieldResult,pd=$jscomp.makeIterator(Lc.selected),nb=pd.next().value;case 3:if(!nb)return uf.return();ce=ha.state.popover.get("controlContainer");Ie=ce.getAllNamed(/submorph config/);Gd=["move","resize","scale","fixed"];Af=ha.target.settingsFor(nb);Ie.length||(ce.submorphs=[].concat($jscomp.arrayFromIterable(ce.submorphs),
[{name:"submorph config X-Axis policy",position:Ub.pt(0,ha.height),fill:Ub.Color.transparent,layout:new Ub.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Ub.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Af.x,values:Gd})]},{name:"submorph config Y-Axis policy",position:Ub.pt(0,ha.height),fill:Ub.Color.transparent,layout:new Ub.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),
submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Ub.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Af.y,values:Gd})]},Ub.morph({position:Ub.pt(0,ha.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Ce=ce.getSubmorphNamed("x-axis policy selector");zf=ce.getSubmorphNamed("y-axis policy selector");C=ce.getSubmorphNamed("dragme");Ub.disconnect(Ce,"selectedValue",ha,"updateSubmorphConstraintLayoutSettings");Ub.disconnect(zf,
"selectedValue",ha,"updateSubmorphConstraintLayoutSettings");Ce.selectedValue=Af.x;zf.selectedValue=Af.y;Ub.connect(C,"onDragStart",ha,"onSubmorphSettingsDragStart",{updater:function(Cf,fh){return Cf(fh,nb)},varMapping:{submorph:nb}});Ub.connect(Ce,"selectedValue",ha,"updateSubmorphConstraintLayoutSettings",{converter:function(Cf){return{policy:Cf,axis:"x",submorph:nb}},varMapping:{submorph:nb}});Ub.connect(zf,"selectedValue",ha,"updateSubmorphConstraintLayoutSettings",{converter:function(Cf){return{policy:Cf,
axis:"y",submorph:nb}},varMapping:{submorph:nb}});uf.jumpToEnd()}})}},{key:"optionControls",value:function(ha){this.state.popover=ha;var Pa=this.target;ha=new Ub.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Ub.Color.transparent,checked:Pa.xAxisEnabled});Pa=new Ub.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Ub.Color.transparent,checked:Pa.yAxisEnabled});var nb=new Ub.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("crosshairs")),
["\u00a0Change submorph settings"])});Ub.connect(ha,"checked",this,"updateXAxisEnabled");Ub.connect(Pa,"checked",this,"updateYAxisEnabled");Ub.connect(nb,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[nb]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConstraintLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Ub.Color.transparent}}}}],Tb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27450,end:33182})}(Ub.LayoutHalo));Ub.ConstraintLayoutHalo=bc;Ub.ConstraintLayoutHalo=bc;Ub.ConstraintLayoutHalo=bc;var Ne=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Ne.Halo=dc;Ne.MorphHighlighter=sb;Ne.InteractiveMorphSelector=od;Ne.StatusMessage=La;Ne.StatusMessageForMorph=Sb;Ne.show=bb;Ne.showConnector=Ma;Ne.ConstraintLayoutHalo=bc;
Ne.GridLayoutHalo=Va;Ne.FlexLayoutHalo=Td;Ne.showAndSnapToGuides=Oc;Ne.removeSnapToGuidesOf=vc;Ne.StatusMessage=La;Ne.StatusMessage=La;Ne.StatusMessageForMorph=Sb;Ne.StatusMessageForMorph=Sb;Ne.show=bb;Ne.show=bb;Ne.showConnector=Ma;Ne.showConnector=Ma;Ne.Halo=dc;Ne.Halo=dc;Ne.MorphHighlighter=sb;Ne.MorphHighlighter=sb;Ne.InteractiveMorphSelector=od;Ne.InteractiveMorphSelector=od;Ne.ConstraintLayoutHalo=bc;Ne.ConstraintLayoutHalo=bc;Ne.GridLayoutHalo=Va;Ne.GridLayoutHalo=Va;Ne.FlexLayoutHalo=
Td;Ne.FlexLayoutHalo=Td;Ne.showAndSnapToGuides=Oc;Ne.showAndSnapToGuides=Oc;Ne.removeSnapToGuidesOf=vc;Ne.removeSnapToGuidesOf=vc;La=Object.freeze({__proto__:null,StatusMessage:La,StatusMessageForMorph:Sb,show:bb,showConnector:Ma,Halo:dc,MorphHighlighter:sb,InteractiveMorphSelector:od,ConstraintLayoutHalo:bc,GridLayoutHalo:Va,FlexLayoutHalo:Td,showAndSnapToGuides:Oc,removeSnapToGuidesOf:vc,SvgStyleHalo:void 0});$a("i",La);$a({_:void 0,d:void 0})}}});