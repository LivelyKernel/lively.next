System.register(["./__root_module__-db735625.js"],function(){var db,Zb,lc,Uc,Bc,Vd,Od,je,Bd;return{setters:[function(jd){db=jd.M;Zb=jd.s;lc=jd.e;Uc=jd.p;Bc=jd.n;Vd=jd.P;Od=jd.a;je=jd.f;Bd=jd.i}],execute:function(){var jd=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");jd.Morph=db;jd.stringToEasing=Zb;jd.easings=lc;jd.pt=Uc;jd.num=Bc;jd.Path=Vd;jd.promise=Od;jd.fun=je;var zd=function(ge){var We=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),kf=We.hasOwnProperty("ModuleProgress")&&
"function"===typeof We.ModuleProgress?We.ModuleProgress:We.ModuleProgress=function(bf){bf&&bf[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Bd(kf,ge,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&jd.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var bf=this.getAllNamed(/stage/);
this.blur=0;this.stages=new Map(bf.map(function(Hd){return[Hd,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(Hd){Hd._cachedTextBounds=null;Hd.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var bf=this.get("progress path"),Hd=jd.stringToEasing(jd.easings.inOutExpo)(jd.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);bf.width=jd.num.interpolate(Hd,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var bf=
this,Hd,Ae,uc,wd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ce){1==ce.nextAddress&&(bf.reset(),Hd="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Ae=$jscomp.makeIterator(Hd),uc=Ae.next());if(3!=ce.nextAddress){if(uc.done)return ce.jumpTo(0);wd=uc.value;bf.finishPackage({packageName:wd,loaded:!0});return ce.yield(jd.promise.delay(200),3)}uc=Ae.next();return ce.jumpTo(2)})}},{key:"finishPackage",
value:function(bf){var Hd=this,Ae=bf.frozen,uc=bf.loaded;bf="stage "+bf.packageName.replace("lively.","");bf=this.get(bf);Ae&&this.stages.set(bf,"frozen");uc&&this.stages.set(bf,"loaded");jd.fun.debounceNamed("update progress",200,function(){Hd.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var bf=this,Hd=this.getSubmorphNamed("progress path"),Ae=this.getAllNamed(/stage/),uc=Ae[0];Ae.forEach(function(wd){var ce=wd.get("checkmark"),Gd=wd.get("frozen indicator"),
pe=wd.get("icon");wd=bf.stages.get(wd);if("not loaded"!=wd){uc=ce;if("loaded"==wd){if(ce.visible)return;ce.animate({duration:300,visible:!0})}if("frozen"==wd){if(Gd.visible)return;Gd.animate({duration:300,visible:!0})}pe.opacity=1}else ce.visible=!1,Gd.visible=!1,pe.opacity=.2});Ae=this.localizePointFrom(jd.pt(-20,0),uc).x;Ae=Math.max(20,Ae-Hd.left);Hd.visible=20==Ae?!1:!0;this._lastWidth=Hd.width;this._timeStamp=Date.now();this._currentProgress=Ae}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},
{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var bf=this;this.whenRendered().then(function(){bf.reset()})}}}}}],We,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},{start:192,end:3586})}(jd.Morph);zd=jd.ModuleProgress;jd.default=zd}}});