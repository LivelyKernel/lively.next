System.register(["./__root_module__-255c8c26.js","kld-intersections"],function(){var Da,Ab,Tb,kc,ec,he,gd,Zd,kd;return{setters:[function(Sc){Da=Sc.ah;Ab=Sc.bO;Tb=Sc.au;kc=Sc.a2;ec=Sc.ao;he=Sc.P;gd=Sc._;Zd=Sc.as;kd=Sc.ar},function(){}],execute:function(){var Sc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Sc.Morph=Da;Sc.stringToEasing=Ab;Sc.easings=Tb;Sc.pt=kc;Sc.num=ec;Sc.Path=he;Sc.promise=gd;Sc.fun=Zd;var yd=function(Od){var fe=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
Ud=fe.hasOwnProperty("ModuleProgress")&&"function"===typeof fe.ModuleProgress?fe.ModuleProgress:fe.ModuleProgress=function(md){md&&md[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kd(Ud,Od,[{key:"relayout",value:function(){!this.isComponent&&Sc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var md=this.getAllNamed(/stage/);this.stages=new Map(md.map(function(db){return[db,
"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(db){db._cachedTextBounds=null;db.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var md=this.get("progress path"),db=Sc.stringToEasing(Sc.easings.inOutExpo)(Sc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);md.width=Sc.num.interpolate(db,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var md=this,db,Fb,tc,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(td){1==
td.nextAddress&&(md.reset(),db="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Fb=$jscomp.makeIterator(db),tc=Fb.next());if(3!=td.nextAddress){if(tc.done)return td.jumpTo(0);nc=tc.value;md.finishPackage({packageName:nc,loaded:!0});return td.yield(Sc.promise.delay(200),3)}tc=Fb.next();return td.jumpTo(2)})}},{key:"finishPackage",value:function(md){var db=this,Fb=md.frozen,tc=md.loaded;md="stage "+md.packageName.replace("lively.",
"");md=this.get(md);Fb&&this.stages.set(md,"frozen");tc&&this.stages.set(md,"loaded");Sc.fun.debounceNamed("update progress",200,function(){db.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var md=this,db=this.getSubmorphNamed("progress path"),Fb=this.getAllNamed(/stage/),tc=Fb[0];Fb.forEach(function(nc){var td=nc.get("checkmark"),ke=nc.get("frozen indicator"),zc=nc.get("icon");nc=md.stages.get(nc);if("not loaded"!=nc){tc=td;if("loaded"==nc){if(td.visible)return;
td.animate({duration:300,visible:!0})}if("frozen"==nc){if(ke.visible)return;ke.animate({duration:300,visible:!0})}zc.opacity=1}else td.visible=!1,ke.visible=!1,zc.opacity=.2});Fb=this.localizePointFrom(Sc.pt(-20,0),tc).x;Fb=Math.max(20,Fb-db.left);db.visible=20==Fb?!1:!0;this._lastWidth=db.width;this._timeStamp=Date.now();this._currentProgress=Fb}}],[{key:"className",get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var md=
this;this.whenRendered().then(function(){md.reset()})}}}}}],fe,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,end:3478})}(Sc.Morph);yd=Sc.ModuleProgress;Sc.default=yd}}});