System.register("./__root_module__-37c88ebd.js kld-intersections ./index-d63033cc.js ./color-picker-ddc5b515.js ./index-d9e4dc7e.js ./index-e7af5c89.js".split(" "),function(){var Wa,Ib,Sb,xc,ac,Cd,nd,Ud,bd,Ic,pd,yd,Ne,Pe,Ie,fd,me,Yb;return{setters:[function(Yc){Wa=Yc.M;Ib=Yc.b;Sb=Yc.C;xc=Yc.g;ac=Yc.i;Cd=Yc.ac;nd=Yc.aa;Ud=Yc.a2;bd=Yc.r;Ic=Yc.d;pd=Yc.bH;yd=Yc.n;Ne=Yc.p;Pe=Yc.ab;Ie=Yc.X;fd=Yc.bm;me=Yc.bn;Yb=Yc.bl},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Yc=
lively.FreezerRuntime.recorderFor("ColorPicker/index.js");Yc.Morph=Wa;Yc.arr=Ib;Yc.Color=Sb;Yc.signal=xc;var Nd=function(Td){var Ec=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),Vd=Ec.hasOwnProperty("ColorPicker")&&"function"===typeof Ec.ColorPicker?Ec.ColorPicker:Ec.ColorPicker=function(Lb){Lb&&Lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(Vd,Td,[{key:"toggleHalos",value:function(Lb){this.withAllSubmorphsDo(function(ub){return ub.halosEnabled=
Lb});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(ub){return ub.halosEnabled=Lb})}},{key:"focusOnMorph",value:function(Lb,ub){var uc=Lb&&Lb.world();uc&&(uc.halos().forEach(function(dc){return dc.remove()}),uc.withTopBarDo(function(dc){return dc.setEditMode("Hand",!0)}));this._target=Lb;ub.isGradient?(this.ui.gradientControl.setGradient(ub,this),this.ui.colorTypeSelector.selection=ub.type):(this.color=ub,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",
value:function(){this.remove();var Lb=this._target&&this._target.world();Lb&&Lb.withTopBarDo(function(ub){return ub.setEditMode("Halo",!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":Yc.signal(this,"value",this.gradientValue);break;case "Solid":Yc.signal(this,"value",this.color)}}},{key:"switchMode",value:function(Lb){var ub=["linearGradient","radialGradient"].includes(Lb);this.ui.gradientControl.toggle(ub,
this);this.colorMode=Lb;this.update();this.confirm()}},{key:"enterColor",value:function(Lb){this.color=Lb;this.update(this.ui.colorEncoder);this.confirm()}},{key:"adjustColor",value:function(Lb){this.color=Lb;this.update();this.confirm()}},{key:"adjustOpacity",value:function(Lb){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[Lb]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(Lb){this.hsb=[Lb].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));
this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(Lb){var ub=$jscomp.makeIterator(Lb);Lb=ub.next().value;ub=ub.next().value;this.hsb=[this.hsb[0],ub,Lb,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(Lb){this.confirm()}},{key:"update",value:function(Lb){for(var ub=[],uc=0;uc<arguments.length;++uc)ub[uc-0]=arguments[uc];var dc=this;Yc.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(ub),[this.ui.colorTypeSelector])).forEach(function(Zb){return Zb.update(dc)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(Yc.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(Lb){this.ui.gradientControl.gradientValue=Lb}},color:{derived:!0,get:function(){return Yc.Color.hsb.apply(Yc.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},
set:function(Lb){this.hsb=[].concat($jscomp.arrayFromIterable(Lb.toHSB()),[Lb.a])}},solidOnly:{derived:!0,set:function(Lb){var ub=this.ui.colorTypeSelector;Lb&&(ub.selection="Solid");ub.visible=!Lb}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),
gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(Yc.Morph);Nd=Yc.ColorPicker;Yc.default=Nd;var gd=lively.FreezerRuntime.recorderFor("GradientControl/index.js");gd.Morph=Wa;gd.LinearGradient=Cd;gd.RadialGradient=
nd;gd.Color=Sb;gd.rect=Ud;gd.resource=bd;gd.connect=Ic;gd.noUpdate=pd;gd.signal=xc;gd.num=yd;gd.arr=Ib;Nd=function(Td){var Ec=lively.FreezerRuntime.recorderFor("GradientControl/index.js"),Vd=Ec.hasOwnProperty("GradientControl")&&"function"===typeof Ec.GradientControl?Ec.GradientControl:Ec.GradientControl=function(Lb){Lb&&Lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(Vd,Td,[{key:"onKeyDown",value:function(Lb){ac._get(Object.getPrototypeOf(Vd.prototype),
"onKeyDown",this).call(this,Lb);"Delete"==Lb.keyCombo&&this.removeStop(this.selectedStopControl)}},{key:"onMouseDown",value:function(Lb){ac._get(Object.getPrototypeOf(Vd.prototype),"onMouseDown",this).call(this,Lb);"gradient preview"==Lb.targetMorph.name&&(Lb=Lb.positionIn(Lb.targetMorph).x/Lb.targetMorph.width,this.addStopAt(Lb))}},{key:"removeStop",value:function(Lb){3>this.gradientValue.stops.length||(gd.arr.remove(this.gradientValue.stops,Lb.stop),this.refresh(),this.confirm())}},{key:"addStopAt",
value:function(Lb){var ub=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),uc=$jscomp.makeIterator(gd.arr.sortBy(gd.arr.sortBy(ub,function(Zb){return Math.abs(Zb.offset-Lb)}).slice(0,2),function(Zb){return Zb.offset})),dc=uc.next().value;uc=uc.next().value;ub.push({color:dc.color.interpolate((Lb-dc.offset)/(uc.offset-dc.offset),uc.color),offset:Lb});this.gradientValue.stops=gd.arr.sortBy(ub,function(Zb){return Zb.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(Lb,
ub){(this.isLayoutable=this.visible=Lb)?this.gradientHalo.openInWorld():this.gradientHalo.remove();Lb||this.reset()}},{key:"reset",value:function(){this.gradientValue=null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Lb){return Lb.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(Lb){this.gradientValue=Lb.isGradient?new gd.LinearGradient({stops:Lb.stops}):new gd.LinearGradient({stops:[{color:Lb,offset:0},{color:gd.Color.transparent,offset:1}]})}},{key:"initRadialGradient",
value:function(Lb,ub){ub=ub.innerBounds();this.gradientValue=Lb.isGradient?new gd.RadialGradient({bounds:ub,stops:Lb.stops}):new gd.RadialGradient({bounds:ub,stops:[{color:Lb,offset:0},{color:gd.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(Lb,ub){this.gradientValue=Lb;this.gradientHalo.initFromPicker(ub)}},{key:"update",value:function(Lb){if(!this.isDisabled){var ub=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==Lb.colorMode||("linearGradient"==Lb.colorMode&&
this.initLinearGradient(this.gradientValue||Lb.color),"radialGradient"==Lb.colorMode&&this.initRadialGradient(this.gradientValue||Lb.color,Lb._target),this.gradientHalo.initFromPicker(Lb),this.gradientHalo.confirm());if(ub){var uc=this.gradientValue.stops.find(function(dc){return ub.stop==dc});uc&&(uc.color=Lb.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(Lb){var ub=this.getSubmorphNamed("gradient preview").bounds().topEdge();return ub.start.interpolate(Lb.offset,ub.end).subXY(0,
5)}},{key:"confirm",value:function(){gd.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var Lb=this.getSubmorphNamed("gradient"),ub=this.gradientValue.stops.map(function(uc){return Object.assign({},uc)});Lb.fill=new gd.LinearGradient({vector:gd.rect(0),stops:ub});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(Lb){var ub=$jscomp.makeIterator(Lb);Lb=ub.next().value;ub=ub.next().value/
this.getSubmorphNamed("gradient preview").width;this.adjustStop(Lb,ub)}},{key:"adjustStop",value:function(Lb,ub){Lb.offset=gd.num.clamp(Lb.offset+ub,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(Lb){this.addMorph(Lb)}},{key:"getControlFor",value:function(Lb,ub){ub=void 0===ub?this:ub;var uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dc){if(1==dc.nextAddress)return dc.yield(gd.resource("part://SystemWidgets/gradient editor/color stop").read(),2);uc=dc.yieldResult;
uc.withAllSubmorphsDo(function(Zb){return Zb.halosEnabled=!1});ub.placeStop(uc);gd.connect(uc,"select",ub,"selectStop");gd.connect(uc,"moveColorStop",ub,"moveStop");return dc.return(uc.forStop(Lb))})}},{key:"selectStop",value:function(Lb){this.deselectAllStopsExcept(Lb,this);this.deselectAllStopsExcept(Lb,this.gradientHalo);gd.signal(this,"switchColor",Lb.stop.color)}},{key:"deselectAllStopsExcept",value:function(Lb,ub){gd.noUpdate(function(){ub.getSubmorphsByStyleClassName("ColorStop").forEach(function(uc){uc.stop!=
Lb.stop?uc.deselect():uc.select()})})}},{key:"updateStopControls",value:function(Lb,ub){ub=void 0===ub?this:ub;var uc=this,dc,Zb,Mc,$a,$b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Eb){switch(Eb.nextAddress){case 1:if(ub._active)return Eb.return();ub._active=!0;dc=ub.getSubmorphsByStyleClassName("ColorStop");Zb=$jscomp.makeIterator(Lb);Mc=Zb.next();case 2:if(Mc.done){Eb.jumpTo(4);break}$a=Mc.value;if($b=dc.shift()){$b.forStop($a);Eb.jumpTo(3);break}return Eb.yield(uc.getControlFor($a,
ub),3);case 3:Mc=Zb.next();Eb.jumpTo(2);break;case 4:gd.arr.invoke(dc,"remove"),ub.getSubmorphsByStyleClassName("ColorStop").forEach(function(kc){kc.positionIn(ub)}),ub._active=!1,Eb.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,
get:function(){return this.stopControls.find(function(Lb){return Lb.isSelected})}}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(gd.Morph);Nd=gd.GradientControl;gd.default=Nd;var ae=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");ae.Morph=Wa;ae.arr=
Ib;ae.resource=bd;ae.connect=Ic;ae.signal=xc;ae.pt=Ne;ae.RadialGradient=nd;ae.LinearGradient=Cd;ae.Point=Pe;Nd=function(Td){var Ec=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),Vd=Ec.hasOwnProperty("GradientHalo")&&"function"===typeof Ec.GradientHalo?Ec.GradientHalo:Ec.GradientHalo=function(Lb){Lb&&Lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(Vd,Td,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Lb){return Lb.remove()})}},
{key:"initFromPicker",value:function(Lb){var ub=Lb.gradientValue;this.picker=Lb;"linearGradient"==ub.type&&this.initFromLinearGradient(this.targetMorph,ub);"radialGradient"==ub.type&&this.initFromRadialGradient(this.targetMorph,ub);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(Lb,ub){Lb=Lb.innerBounds();ub=ub.vectorAsAngle();var uc=Lb.center(),dc=Math.max(Lb.height,Lb.width),Zb=uc.addPt(ae.Point.polar(dc,ub));ub=uc.subPt(ae.Point.polar(dc,ub));uc=$jscomp.makeIterator(Lb.lineIntersection(ub.lineTo(Zb)));
ub=uc.next().value;var Mc=uc.next().value;uc=ae.arr.min([ub,Mc],function($a){return $a.dist(Zb)});this.originPoint=uc==ub?Mc:ub;this.directionPoint=uc;this.orthogonalDist=ae.arr.min(Lb.edges(),function($a){return $a.distanceFromLine(Mc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(Lb,ub){Lb=Lb.innerBounds().relativeToAbsPoint(ub.focus);var uc=ub.bounds;ub=uc.height;uc=uc.width;this.originPoint=Lb;this.directionPoint=Lb.addXY(0,ub/2);this.orthogonalDist=uc/2;this.alignWithTarget()}},
{key:"alignWithTarget",value:function(){var Lb=this.ui,ub=Lb.directionHandle,uc=Lb.orthogonalHandle,dc=Lb.colorStopWrapper;Lb.originHandle.center=ae.pt(0);ub.center=ae.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);dc.width=this.width;ub.center=ae.pt(this.width,0);uc.center=ae.pt(0,this.orthogonalDist);0<this.orthogonalDist?(dc.tilted=1,dc.position=ae.pt(this.width/2,this.height/4-1)):(dc.tilted=0,dc.position=ae.pt(this.width/2,-this.height/4+1));this.globalPosition=this.targetMorph.worldPoint(this.originPoint).subPt($world.scroll);
this.rotation=this.angle}},{key:"relayout",value:function(){this.alignWithTarget()}},{key:"confirm",value:function(){var Lb=this.picker.ui.gradientControl;"linearGradient"==Lb.gradientValue.type&&(Lb.gradientValue.vector=this.angle);if("radialGradient"==Lb.gradientValue.type){var ub=Lb.gradientValue,uc=2*Math.abs(this.orthogonalDist),dc=2*this.originPoint.dist(this.directionPoint);ub.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());ub.bounds=ae.pt(0,0).extent(ae.pt(uc,dc));ub.angle=
this.angle}Lb.confirm();this.refresh(Lb,this.targetMorph);this.alignWithTarget()}},{key:"normalize",value:function(Lb){return this.getGlobalTransform().transformDirection(Lb)}},{key:"moveOriginHandle",value:function(Lb){Lb=this.normalize(Lb.state.dragDelta);this.originPoint=this.originPoint.addPt(Lb);this.confirm()}},{key:"moveDirectionHandle",value:function(Lb){Lb=this.normalize(Lb.state.dragDelta);this.directionPoint=this.directionPoint.addPt(Lb);this.confirm()}},{key:"moveOrthogonalHandle",value:function(Lb){Lb=
this.normalize(Lb.state.dragDelta);this.orthogonalDist-=Lb.dotProduct(ae.Point.polar(1,this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(Lb){var ub=$jscomp.makeIterator(Lb);Lb=ub.next().value;ub=ub.next().value;this.picker.ui.gradientControl.adjustStop(Lb,ub/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(Lb,ub){ub=Lb.gradientValue;this.alignWithTarget();Lb.updateStopControls(ub.stops,this)}},{key:"placeStop",value:function(Lb){this.get("color stop wrapper").addMorph(Lb)}},
{key:"selectStop",value:function(Lb){this.picker.ui.gradientControl.selectStop(Lb)}},{key:"getPositionFor",value:function(Lb){var ub=this.getSubmorphNamed("color stop wrapper"),uc=ub.innerBounds().bottomEdge();return uc.start.interpolate(Lb.offset,uc.end).subXY(0,5).subPt(ub.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),
directionHandle:this.getSubmorphNamed("direction handle"),orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",
version:"0.1.1-141"}}},{start:300,end:5921})}(ae.Morph);Nd=ae.GradientHalo;ae.default=Nd;var Fe=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");Fe.Morph=Wa;Fe.pt=Ne;Fe.Color=Sb;Fe.LinearGradient=Cd;Fe.signal=xc;Fe.num=yd;Nd=function(Td){var Ec=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),Vd=Ec.hasOwnProperty("OpacityPicker")&&"function"===typeof Ec.OpacityPicker?Ec.OpacityPicker:Ec.OpacityPicker=function(Lb){Lb&&Lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(Vd,Td,[{key:"confirm",value:function(){Fe.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function(Lb){var ub=this.get("slider").width;this.sliderPosition=Fe.pt(0,Lb.positionIn(this).y-ub/2);this.confirm()}},{key:"onDrag",value:function(Lb){var ub=this.get("slider").width;this.sliderPosition=Fe.pt(0,Lb.positionIn(this).y-ub/2);this.confirm()}},{key:"update",value:function(Lb){this.alpha=Lb.color.a;this.getSubmorphNamed("opacity gradient").fill=new Fe.LinearGradient({stops:[{offset:0,
color:Lb.color.withA(0)},{offset:1,color:Lb.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return Fe.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(Lb){this.alpha=Fe.num.clamp(Lb.y/(this.height-10),0,1);this.refresh()}}}}}],Ec,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(Fe.Morph);Nd=Fe.OpacityPicker;Fe.default=Nd;var Wb=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");Wb.Morph=Wa;Wb.Color=Sb;Wb.signal=xc;Wb.noUpdate=pd;Wb.num=yd;Nd=function(Td){var Ec=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),Vd=Ec.hasOwnProperty("ColorEncoder")&&
"function"===typeof Ec.ColorEncoder?Ec.ColorEncoder:Ec.ColorEncoder=function(Lb){Lb&&Lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ac(Vd,Td,[{key:"update",value:function(Lb){this.currentColor=Lb.hsb;this.refresh()}},{key:"refresh",value:function(){var Lb=this,ub=this.currentColor;Wb.noUpdate(function(){({Hex:function(){return Lb.updateHex(ub)},RGB:function(){return Lb.updateRGB(ub)},HSL:function(){return Lb.updateHSL(ub)},
HSB:function(){return Lb.updateHSB(ub)},CSS:function(){return Lb.updateCSS(ub)}})[Lb.encodingMode]()})}},{key:"updateHex",value:function(Lb){Lb=Wb.Color.hsb.apply(Wb.Color,$jscomp.arrayFromIterable(Lb)).withA(Wb.num.roundTo(Lb[3],.01));var ub=this.getSubmorphNamed("hex input"),uc=this.getSubmorphNamed("hex opacity control");ub.input=Lb.toHexString().toUpperCase();uc.number=Lb.a}},{key:"updateRGB",value:function(Lb){var ub=this.getSubmorphNamed("first value"),uc=this.getSubmorphNamed("second value"),
dc=this.getSubmorphNamed("third value"),Zb=this.getSubmorphNamed("opacity control"),Mc=$jscomp.makeIterator(Wb.Color.hsb.apply(Wb.Color,$jscomp.arrayFromIterable(Lb)).toTuple()),$a=Mc.next().value,$b=Mc.next().value;Mc=Mc.next().value;Lb=Lb[3];ub.number=255*$a;uc.number=255*$b;dc.number=255*Mc;Zb.number=Lb}},{key:"updateHSL",value:function(Lb,ub){ub=void 0===ub?!0:ub;var uc=this.getSubmorphNamed("first value"),dc=this.getSubmorphNamed("second value"),Zb=this.getSubmorphNamed("third value"),Mc=this.getSubmorphNamed("opacity control"),
$a=$jscomp.makeIterator(Lb),$b=$a.next().value,Eb=$a.next().value;$a=$a.next().value;Zb.number=ub?1-$a:$a;uc.number=$b;dc.number=Eb;Mc.number=Lb[3]}},{key:"updateHSB",value:function(Lb){this.updateHSL(Lb,!1)}},{key:"updateCSS",value:function(Lb){var ub=this.getSubmorphNamed("css input");Lb=Wb.Color.hsb.apply(Wb.Color,$jscomp.arrayFromIterable(Lb)).withA(Wb.num.roundTo(Lb[3],.01));ub.input=Lb.toCSSString()}},{key:"confirm",value:function(){var Lb=this;({Hex:function(){return Lb.confirmHex()},RGB:function(){return Lb.confirmRGB()},
HSL:function(){return Lb.confirmHSL()},HSB:function(){return Lb.confirmHSB()},CSS:function(){return Lb.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var Lb=this.getSubmorphNamed("hex input"),ub=this.getSubmorphNamed("hex opacity control");Lb=Wb.Color.rgbHex(Lb.input).withA(ub.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Lb.toHSB()),[Lb.a]);Wb.signal(this,"colorEntered",Lb)}},{key:"confirmRGB",value:function(){var Lb=this.getSubmorphNamed("first value"),
ub=this.getSubmorphNamed("second value"),uc=this.getSubmorphNamed("third value"),dc=this.getSubmorphNamed("opacity control");Lb=Wb.Color.rgba(Lb.number,ub.number,uc.number,dc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Lb.toHSB()),[Lb.a]);Wb.signal(this,"colorEntered",Lb)}},{key:"confirmHSL",value:function(){var Lb=this.getSubmorphNamed("first value"),ub=this.getSubmorphNamed("second value"),uc=this.getSubmorphNamed("third value"),dc=this.getSubmorphNamed("opacity control");Lb=Wb.Color.hsb(Lb.number,
ub.number,1-uc.number).withA(dc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Lb.toHSB()),[Lb.a]);Wb.signal(this,"colorEntered",Lb)}},{key:"confirmHSB",value:function(){var Lb=this.getSubmorphNamed("first value"),ub=this.getSubmorphNamed("second value"),uc=this.getSubmorphNamed("third value"),dc=this.getSubmorphNamed("opacity control");Lb=Wb.Color.hsb(Lb.number,ub.number,uc.number).withA(dc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Lb.toHSB()),[Lb.a]);Wb.signal(this,
"colorEntered",Lb)}},{key:"confirmCSS",value:function(){var Lb=this.getSubmorphNamed("css input");Lb=Wb.Color.fromString(Lb.input);this.currentColor=[].concat($jscomp.arrayFromIterable(Lb.toHSB()),[Lb.a]);Wb.signal(this,"colorEntered",Lb)}},{key:"selectEncoding",value:function(Lb){this.encodingMode=Lb;this.submorphs.map(function(uc){return uc.visible=uc.isLayoutable=!1});var ub=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[Lb]);
ub.visible=ub.isLayoutable=!0;"RGB"==Lb&&[ub.getSubmorphNamed("first value"),ub.getSubmorphNamed("second value"),ub.getSubmorphNamed("third value")].forEach(function(uc){Object.assign(uc,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(Lb)&&(Object.assign(ub.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[ub.getSubmorphNamed("second value"),ub.getSubmorphNamed("third value")].forEach(function(uc){Object.assign(uc,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:Wb.Color.white}}}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorEncoder",version:"0.1.1-43"}}},{start:211,end:5572})}(Wb.Morph);Nd=Wb.ColorEncoder;Wb.default=
Nd;var Cc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");Cc.HTMLMorph=Ie;Cc.arr=Ib;Cc.materialDesignColors=fd;Cc.webSafeColors=me;Cc.flatDesignColors=Yb;Cc.Color=Sb;Cc.signal=xc;Nd=function(Td){var Ec=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),Vd=Ec.hasOwnProperty("ColorPaletteView")&&"function"===typeof Ec.ColorPaletteView?Ec.ColorPaletteView:Ec.ColorPaletteView=function(Lb){Lb&&Lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ac(Vd,Td,[{key:"test",value:function(){this.showPalette(Cc.materialDesignColors.map(function(Lb){return Cc.Color.rgbHex(Lb)}))}},{key:"selectPalette",value:function(Lb){var ub={"Flat Design":Cc.flatDesignColors,Material:Cc.materialDesignColors,"Web Safe":Cc.webSafeColors};ub[Lb]&&this.showPalette(ub[Lb].map(function(uc){return Cc.Color.rgbHex(uc)}))}},{key:"onMouseDown",value:function(Lb){ac._get(Object.getPrototypeOf(Vd.prototype),"onMouseDown",this).call(this,Lb);(Lb=Lb.domEvt.target.dataset.color)&&
Cc.signal(this,"colorSelected",Cc.Color.fromString(Lb))}},{key:"showPalette",value:function(Lb){this.html='<div class="palette-container">\n      '+Lb.map(function(ub){return'<div class="color-cell" data-color="'+ub+'" style="background: '+ub+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],Ec,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(Cc.HTMLMorph);Nd=Cc.ColorPaletteView;Cc.default=Nd}}});