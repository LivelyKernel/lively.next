System.register(["./__root_module__-37c88ebd.js"],function(Wa){var Ib,Sb,xc,ac,Cd,nd,Ud,bd,Ic,pd,yd,Ne,Pe,Ie,fd,me,Yb,Yc,Nd,gd,ae,Fe,Wb,Cc,Td,Ec,Vd,Lb,ub,uc,dc,Zb,Mc,$a,$b,Eb,kc,tc,Sc,Pd;return{setters:[function(ec){Ib=ec.f;Sb=ec.p;xc=ec.C;ac=ec.m;Cd=ec._;nd=ec.a;Ud=ec.c;bd=ec.R;Ic=ec.a2;pd=ec.e;yd=ec.V;Ne=ec.I;Pe=ec.M;Ie=ec.ax;fd=ec.d;me=ec.o;Yb=ec.a1;Yc=ec.i;Nd=ec.S;gd=ec.ah;ae=ec.O;Fe=ec.ae;Wb=ec.k;Cc=ec.ac;Td=ec.P;Ec=ec.ay;Vd=ec.n;Lb=ec.b;ub=ec.g;uc=ec.az;dc=ec.aA;Zb=ec.aB;Mc=ec.h;$a=ec.aC;
$b=ec.Y;Eb=ec.ad;kc=ec.aD;tc=ec.aE;Sc=ec.B;Pd=ec.j}],execute:function(){function ec(Ob){(Ob=ea.cachedGuideLines.get(Ob))&&Ob.forEach(function(Gb){return Gb.remove()})}function Xb(Ob,Gb,Ta,Y,Ma){Gb=void 0===Gb?!0:Gb;Ta=void 0===Ta?!0:Ta;Y=void 0===Y?10:Y;Ma=void 0===Ma?100:Ma;if(Gb||Ta){var gb=Ob.owner,Nb=gb.world();gb=gb.getGlobalTransform();var oc=Ob.owner.submorphs.filter(function(Ja){return Ja!==Ob&&!Ja.isEpiMorph&&Ja.visible&&Ja.reactsToPointer}),Wc=ea.findAlignedMorphs(Ob,oc,Y,Ma,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));Ma=[];var Gc=0,Zd=0,je=0,Bf=0;gb.e-=Nb.scroll.x;gb.f-=Nb.scroll.y;if(Wc){Wc=$jscomp.makeIterator(Wc);for(var lf=Wc.next();!lf.done;lf=Wc.next()){lf=$jscomp.makeIterator(lf.value);lf.next();var bf=lf.next().value;lf=bf.vertical;bf=$jscomp.makeIterator(bf.horizontal);for(var z=bf.next();!z.done;z=bf.next()){z=z.value;var pf=z.edgeAVal,nf=z.refPointsA,De=z.refPointsB,Cf=z.edgeBVal,Rf=Math.ceil(Y-z.delta),Vf=Math.min(nf.top,De.top);nf=Math.max(nf.bottom,
De.bottom);z.maxDist>Y&&(Rf-=Y/2);Gc<Rf&&(Gc=Rf,je=Cf-pf);Ma.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ea.guideWidth,start:gb.transformPoint(ea.pt(Cf,Vf)),end:gb.transformPoint(ea.pt(Cf,nf)),fill:ea.guideColor,guideType:"h",priority:Rf})}lf=$jscomp.makeIterator(lf);for(bf=lf.next();!bf.done;bf=lf.next())bf=bf.value,z=bf.edgeAVal,Vf=bf.refPointsA,nf=bf.refPointsB,pf=bf.edgeBVal,Cf=Math.ceil(Y-bf.delta),Rf=Math.min(Vf.left,nf.left),Vf=Math.max(Vf.right,nf.right),bf.maxDist>Y&&(Cf-=Y/
2),Zd<Cf&&Math.abs(pf-z)<=Y&&(Zd=Cf,Bf=pf-z),Ma.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ea.guideWidth,start:gb.transformPoint(ea.pt(Rf,pf)),end:gb.transformPoint(ea.pt(Vf,pf)),fill:ea.guideColor,guideType:"v",priority:Cf})}}if(!Gc||!Zd){oc=[Ob].concat($jscomp.arrayFromIterable(oc));z=ea.computeClosestMorphs(oc);bf=z[0];oc=bf.l;Wc=bf.r;lf=bf.t;bf=bf.b;var dg;if(oc||Wc||lf||bf){var eg=(oc||Wc||lf||bf).refPointsA;for(pf=1;pf<z.length&&(nf=z[pf],Cf=nf.l,Rf=nf.r,Vf=nf.t,nf=nf.b,Gc||(oc&&
Cf&&oc.index!==Cf.index&&Math.abs(Cf.dist-oc.dist)<=Y?dg=Object.assign({neighbor:pf,direction:"left"},Cf):Wc&&Rf&&Wc!==Rf.index&&Math.abs(Rf.dist-Wc.dist)<=Y&&(dg=Object.assign({neighbor:pf,direction:"right"},Rf))),Zd||(lf&&Vf&&lf.index!==Vf.index&&Math.abs(Vf.dist-lf.dist)<=Y?dg=Object.assign({neighbor:pf,direction:"top"},Vf):bf&&nf&&bf.index!==nf.index&&Math.abs(nf.dist-bf.dist)<=Y&&(dg=Object.assign({neighbor:pf,direction:"bottom"},nf))),!dg);pf++);}if(dg){var $c=dg;Y=$c.direction;Vf=$c.dist;var Oe=
eg.left;De=eg.top;var og=eg.bottom,ph=eg.right,id=eg.width,cb=eg.height;nf=$c.refPointsA;eg=nf.left;z=nf.top;pf=nf.bottom;Cf=nf.right;Rf=nf.width;nf=nf.height;var Va=$c.refPointsB,cc=Va.left;$c=Va.top;var Ba=Va.bottom;Va=Va.right;ph="left"===Y?Oe:"right"===Y?ph:Oe+id/2;og="bottom"===Y?og:"top"===Y?De:De+cb/2;Oe="left"===Y?ph-Vf:"right"===Y?ph+Vf:Oe+id/2;Vf="bottom"===Y?og+Vf:"top"===Y?og-Vf:De+cb/2;De="left"===Y?Va:"right"===Y?cc:eg+Rf/2;id="bottom"===Y?$c:"top"===Y?Ba:z+nf/2;!Ta||Gc||"right"!==Y&&
"left"!==Y||(Gc=10,je=(dg.dist-(Wc||oc).dist)*("right"===Y?-1:1),ph+=je,Oe+=je);!Ta||Zd||"top"!==Y&&"bottom"!==Y||(Zd=10,Bf=((lf||bf).dist-dg.dist)*("top"===Y?-1:1),og+=Bf,Vf+=Bf);Ma.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:gb.transformPoint(ea.pt("left"===Y?eg:"right"===Y?Cf:eg+Rf/2,"bottom"===Y?pf:"top"===Y?z:z+nf/2)),end:gb.transformPoint(ea.pt(De,id)),fill:ea.Color.orange,height:ea.guideWidth,guideType:Y,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:gb.transformPoint(ea.pt(ph,
og)),end:gb.transformPoint(ea.pt(Oe,Vf)),fill:ea.Color.orange,height:ea.guideWidth,guideType:Y,priority:10})}}Ta&&(je||Bf)&&Ob.moveBy(ea.pt(je,Bf));if(Gb){Ma=Ma.filter(function(Ja){var Sa=Ja.guideType;Ja=Ja.priority;return"h"===Sa?Ja===Gc:"v"===Sa?Ja===Zd:!0});(Gb=ea.cachedGuideLines.get(Ob))||ea.cachedGuideLines.set(Ob,Gb=[]);for(Ta=0;Ta<Ma.length;Ta++)dg=void 0,Gb[Ta]?dg=Object.assign(Gb[Ta],Ma[Ta]):(dg=ea.morph(Ma[Ta]),Gb.push(dg)),dg.owner||Nb.addMorph(dg);Gb.slice(Ta).forEach(function(Ja){return Ja.remove()});
ea.fun.debounceNamed(Ob.id+"-drag-guides-cleanup",1300,function(){var Ja=ea.cachedGuideLines.get(Ob);Ja&&Ja.forEach(function(Sa){return Sa.remove()})})()}}}function Jb(Ob,Gb,Ta,Y,Ma,gb){Ta=void 0===Ta?!0:Ta;Y=void 0===Y?!0:Y;Ma=void 0===Ma?5:Ma;gb=void 0===gb?100:gb;if(Ta||Y){var Nb=Ob.owner,oc=Nb.world(),Wc=Nb.getGlobalTransform(),Gc=Ob.owner.submorphs.filter(function(og){return og!==Ob&&!og.isEpiMorph&&og.visible&&og.reactsToPointer});Nb=(Gb.includes("left")||Gb.includes("right")?"x":"")+(Gb.includes("top")||
Gb.includes("bottom")?"y":"");var Zd=ea.findMorphsWithSimilarWidthOrHeight(Ob,Nb,Gc,Ma,gb),je=-Infinity,Bf=-Infinity,lf=0,bf=0,z=0,pf=0,nf=0,De=0;Nb=[];Wc.e-=oc.scroll.x;Wc.f-=oc.scroll.y;if(Zd){Zd=$jscomp.makeIterator(Zd);for(var Cf=Zd.next();!Cf.done;Cf=Zd.next()){Cf=$jscomp.makeIterator(Cf.value);Cf.next();var Rf=Cf.next().value;Cf=Rf.similarIn;var Vf=Rf.delta,dg=Rf.refPointsA,eg=Rf.refPointsB;Rf=Ma-Vf+(gb-Rf.minDist);"width"===Cf?je<Rf&&(je=Rf,Gb.includes("left")&&(bf=-Vf),Gb.includes("right")&&
(lf=Vf)):Bf<Rf&&(Bf=Rf,Gb.includes("top")&&(z=-Vf),Gb.includes("bottom")&&(pf=Vf));Vf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:ea.guideWidth,fill:ea.guideColor,guideType:Cf,priority:Rf,start:Wc.transformPoint("width"===Cf?ea.pt(dg.left,dg.top+dg.height/2):ea.pt(dg.left+dg.width/2,dg.top)),end:Wc.transformPoint("width"===Cf?ea.pt(dg.right,dg.top+dg.height/2):ea.pt(dg.left+dg.width/2,dg.bottom))};Cf=Object.assign({},Vf,{start:Wc.transformPoint("width"===Cf?ea.pt(eg.left,eg.top+eg.height/
2):ea.pt(eg.left+eg.width/2,eg.top)),end:Wc.transformPoint("width"===Cf?ea.pt(eg.right,eg.top+eg.height/2):ea.pt(eg.left+eg.width/2,eg.bottom))});Nb.push(Vf,Cf)}}if(gb=ea.findAlignedMorphs(Ob,Gc,Ma,gb,Gb,void 0))for(gb=$jscomp.makeIterator(gb),Gc=gb.next();!Gc.done;Gc=gb.next()){Gc=$jscomp.makeIterator(Gc.value);Gc.next();Zd=Gc.next().value;Gc=Zd.vertical;Zd=$jscomp.makeIterator(Zd.horizontal);for(Cf=Zd.next();!Cf.done;Cf=Zd.next()){Cf=Cf.value;eg=Cf.edgeAVal;var $c=Cf.refPointsA,Oe=Cf.refPointsB;
Vf=Cf.edgeBVal;dg=Math.ceil(Ma-Cf.delta);Rf=Math.min($c.top,Oe.top);$c=Math.max($c.bottom,Oe.bottom);Cf.maxDist>Ma&&(dg-=Ma/2);nf<dg&&(nf=dg,Gb.includes("left")&&(bf=-(Vf-eg)),Gb.includes("right")&&(lf=+(Vf-eg)));Nb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ea.guideWidth,start:Wc.transformPoint(ea.pt(Vf,Rf)),end:Wc.transformPoint(ea.pt(Vf,$c)),fill:ea.guideColor,guideType:"h",priority:dg})}Gc=$jscomp.makeIterator(Gc);for(Zd=Gc.next();!Zd.done;Zd=Gc.next())Zd=Zd.value,Cf=Zd.edgeAVal,
Rf=Zd.refPointsA,$c=Zd.refPointsB,eg=Zd.edgeBVal,Vf=Math.ceil(Ma-Zd.delta),dg=Math.min(Rf.left,$c.left),Rf=Math.max(Rf.right,$c.right),Zd.maxDist>Ma&&(Vf-=Ma/2),De<Vf&&Math.abs(eg-Cf)<=Ma&&(De=Vf,Gb.includes("top")&&(z=eg-Cf),Gb.includes("bottom")&&(pf=eg-Cf)),Nb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ea.guideWidth,start:Wc.transformPoint(ea.pt(dg,eg)),end:Wc.transformPoint(ea.pt(Rf,eg)),fill:ea.guideColor,guideType:"v",priority:Vf})}Y&&(bf&&(Ob.left+=bf,Ob.right-=bf),z&&(Ob.top+=
z,Ob.bottom-=z),lf&&(Ob.width+=lf),pf&&(Ob.height+=pf));if(Ta){Nb=Nb.filter(function(og){var ph=og.guideType;og=og.priority;return"width"===ph?og===je:"height"===ph?og===Bf:"v"===ph?og===De:"h"===ph?og===nf:!1});(Gb=ea.cachedGuideLines.get(Ob))||ea.cachedGuideLines.set(Ob,Gb=[]);for(Ta=0;Ta<Nb.length;Ta++)Y=void 0,Gb[Ta]?Y=Object.assign(Gb[Ta],Nb[Ta]):(Y=ea.morph(Nb[Ta]),Gb.push(Y)),Y.owner||oc.addMorph(Y);Gb.slice(Ta).forEach(function(og){return og.remove()});ea.fun.debounceNamed(Ob.id+"-drag-guides-cleanup",
1300,function(){var og=ea.cachedGuideLines.get(Ob);og&&og.forEach(function(ph){return ph.remove()})})()}}}function Ra(Ob,Gb){Gb=void 0===Gb?!1:Gb;var Ta=ta.MorphicEnv.default().world;if(null===Ob||void 0===Ob)Ob=String(Ob);if(Ob.isMorph)return ta.showRect(Ob.world(),Ob.globalBounds().translatedBy(Ta.scroll.negated()),Gb);if(Ob.isPoint)return ta.showRect(Ta,new ta.Rectangle(Ob.x-5,Ob.y-5,10,10));if(Ob.isLine)return ta.showLine(Ta,Ob);if(Ob.isRectangle)return ta.showRect(Ta,Ob);if("undefined"!==typeof ta.Element&&
Ob instanceof ta.Element)return ta.showRect(Ta,ta.Rectangle.fromElement(Ob));if("number"===typeof Ob||"symbol"===typeof Ob||"boolean"===typeof Ob||"undefined"!==typeof ta.Node&&Ob instanceof ta.Node||Ob instanceof RegExp)Ob=String(Ob);"object"===typeof Ob&&(Ob=ta.obj.inspect(Ob,{maxDepth:1}));return"string"===typeof Ob&&1===arguments.length?Ta.setStatusMessage(Ob):Ta.setStatusMessage(ta.string.formatFromArray(Array.from(arguments)))}function Ga(Ob,Gb,Ta){Ta=void 0===Ta?3E3:Ta;var Y,Ma,gb,Nb,oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wc){if(1==
Wc.nextAddress){if(!(Ob&&Ob.world()&&Gb&&Gb.world()))return Wc.return(null);Y=Ob.owner.worldPoint(Ob.center);Ma=Gb.owner.worldPoint(Gb.center);gb=Y.lineTo(Ma).sampleN(2)[1];Nb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:ta.Color.red,fill:ta.Color.red,cx:5,cy:5,r:4}]};oc=$world.addMorph(new ta.Path({position:gb,renderOnGPU:!0,vertices:[ta.pt(0),ta.pt(0)],borderWidth:2,startMarker:Nb,endMarker:Nb,borderColor:ta.Color.red}));
return Wc.yield(oc.whenRendered(),2)}if(3!=Wc.nextAddress)return Wc.yield(oc.animate({opacity:1,customTween:function(Gc){var Zd=oc.center;oc.vertices=[ta.pt(0).interpolate(Gc,Y.subPt(gb)),ta.pt(0).interpolate(Gc,Ma.subPt(gb))];oc.center=Zd},duration:400}),3);Ta&&setTimeout(function(){return oc.fadeOut()},Ta);return Wc.return(oc)})}Wa({a:Xb,e:Ga,r:ec,s:Ra});var ea=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");ea.removeSnapToGuidesOf=ec;ea.showAndSnapToGuides=Xb;ea.showAndSnapToResizeGuides=
Jb;ea.computeRefPoints=function(Ob){var Gb=Ob.x,Ta=Ob.y,Y=Ob.width;Ob=Ob.height;return{left:Gb,top:Ta,hCenter:Gb+Y/2,vCenter:Ta+Ob/2,right:Gb+Y,bottom:Ta+Ob,width:Y,height:Ob}};ea.findEdgesInAlignment=function(Ob,Gb,Ta,Y,Ma,gb,Nb,oc,Wc,Gc){Ta=void 0===Ta?15:Ta;gb=void 0===gb?0:gb;Nb=void 0===Nb?0:Nb;oc=void 0===oc?0:oc;Wc=void 0===Wc?0:Wc;Gc=void 0===Gc?0:Gc;for(var Zd=[],je=[],Bf=0;Bf<ea.edges.length;Bf++){var lf=$jscomp.makeIterator(ea.edges[Bf]),bf=lf.next().value,z=lf.next().value;lf=lf.next().value;
var pf=Ob[z],nf=Gb[lf],De=Math.max(pf,nf)-Math.min(pf,nf);De>Ta||!(Y&&!Y.includes(z)||Ma&&!Ma.includes(lf))&&("vertical"===bf?Zd:je).push({delta:De,edgeA:z,edgeB:lf,edgeAVal:pf,edgeBVal:nf,refPointsA:Ob,refPointsB:Gb,distLeft:gb,distTop:Nb,distRight:oc,distBottom:Wc,maxDist:Gc})}return Zd.length||je.length?{vertical:Zd,horizontal:je}:null};ea.findAlignedMorphs=function(Ob,Gb,Ta,Y,Ma,gb){Ta=void 0===Ta?15:Ta;Y=void 0===Y?Infinity:Y;for(var Nb,oc=ea.computeRefPoints(Ob.bounds()),Wc=0;Wc<Gb.length;Wc++){var Gc=
Gb[Wc];if(Gc!==Ob){var Zd=ea.computeRefPoints(Gc.bounds()),je=Math.max(0,oc.left-Zd.right),Bf=Math.max(0,Zd.left-oc.right),lf=Math.max(0,oc.top-Zd.bottom),bf=Math.max(0,Zd.top-oc.bottom);Math.max(bf,lf,Bf,je)>Y||!(Zd=ea.findEdgesInAlignment(oc,Zd,Ta,Ma,gb,je,lf,Bf,bf,Math.max(bf,lf,Bf,je)))||(Nb||(Nb=new Map),Nb.set(Gc,Zd))}}Ob=Ob.owner;Gb=ea.computeRefPoints(Ob.innerBounds());if(Ta=ea.findEdgesInAlignment(oc,Gb,Ta))Nb||(Nb=new Map),Nb.set(Ob,Ta);return Nb};ea.findMorphsWithSimilarWidthOrHeight=function(Ob,
Gb,Ta,Y,Ma){Y=void 0===Y?15:Y;Ma=void 0===Ma?Infinity:Ma;for(var gb,Nb=ea.computeRefPoints(Ob.bounds()),oc=0;oc<Ta.length;oc++){var Wc=Ta[oc];if(Wc!==Ob){var Gc=ea.computeRefPoints(Wc.bounds()),Zd=Math.max(0,Nb.left-Gc.right),je=Math.max(0,Gc.left-Nb.right),Bf=Math.max(0,Nb.top-Gc.bottom),lf=Math.max(0,Gc.top-Nb.bottom),bf=Math.min(lf,Bf,je,Zd),z=Math.max(lf,Bf,je,Zd);if(!(Math.max(lf,Bf,je,Zd)>Ma)){je=Nb;Zd=je.width;je=je.height;lf=Gc;Bf=lf.width;lf=lf.height;var pf=Bf-Zd,nf=lf-je;("x"===Gb||"xy"===
Gb)&&Math.abs(pf)<=Y&&(gb||(gb=new Map),gb.set(Wc,{similarIn:"width",minDist:bf,maxDist:z,refPointsA:Nb,refPointsB:Gc,valA:Zd,valB:Bf,delta:pf}));("y"===Gb||"xy"===Gb)&&Math.abs(nf)<=Y&&(gb||(gb=new Map),gb.set(Wc,{similarIn:"height",minDist:bf,maxDist:z,refPointsA:Nb,refPointsB:Gc,valA:je,valB:lf,delta:nf}))}}}return gb};ea.closest=function(Ob,Gb,Ta,Y,Ma,gb,Nb,oc){oc=void 0===oc?!0:oc;var Wc=Y[Ob],Gc=Ma[Ob],Zd=gb[Ob];Gb=Nb[Ob];for(var je,Bf,lf,bf,z=0;z<Ma.length;z++)Ob===z||Wc<Ma[z]||je&&Ma[je.index]>=
Ma[z]||oc&&Nb[Ob]<gb[z]||gb[Ob]>Nb[z]||(je={index:z,dist:Wc-Ma[z],refPointsA:Ta[Ob],refPointsB:Ta[z]});for(Wc=0;Wc<Y.length;Wc++)Ob===Wc||Gc>Y[Wc]||Bf&&Y[Bf.index]<=Y[Wc]||oc&&Nb[Ob]<gb[Wc]||gb[Ob]>Nb[Wc]||(Bf={index:Wc,dist:Y[Wc]-Gc,refPointsA:Ta[Ob],refPointsB:Ta[Wc]});for(Gc=0;Gc<Nb.length;Gc++)Ob===Gc||Zd<Nb[Gc]||lf&&Nb[lf.index]>=Nb[Gc]||oc&&Y[Ob]>Ma[Gc]||Ma[Ob]<Y[Gc]||(lf={index:Gc,dist:Zd-Nb[Gc],refPointsA:Ta[Ob],refPointsB:Ta[Gc]});for(Nb=0;Nb<gb.length;Nb++)Ob===Nb||Gb>gb[Nb]||bf&&gb[bf.index]<=
gb[Nb]||oc&&Y[Ob]>Ma[Nb]||Ma[Ob]<Y[Nb]||(bf={index:Nb,dist:gb[Nb]-Gb,refPointsA:Ta[Ob],refPointsB:Ta[Nb]});return{l:je,r:Bf,t:lf,b:bf}};ea.computeClosestMorphs=function(Ob){for(var Gb=[],Ta=[],Y=[],Ma=[],gb=[],Nb=[],oc=0;oc<Ob.length;oc++){var Wc=ea.computeRefPoints(Ob[oc].bounds());gb.push(Wc);var Gc=Wc.right,Zd=Wc.top,je=Wc.bottom;Gb.push(Wc.left);Ta.push(Gc);Y.push(Zd);Ma.push(je)}for(oc=0;oc<Ob.length;oc++)Nb.push(ea.closest(oc,Ob,gb,Gb,Ta,Y,Ma));return Nb};ea.fun=Ib;ea.pt=Sb;ea.Color=xc;ea.morph=
ac;ea.cachedGuideLines=new WeakMap;ea.guideWidth=1;ea.guideColor=ea.Color.orange.lighter();ea.removeSnapToGuidesOf=ec;ea.removeSnapToGuidesOf=ec;ea.showAndSnapToGuides=Xb;ea.showAndSnapToGuides=Xb;ea.showAndSnapToResizeGuides=Jb;ea.showAndSnapToResizeGuides=Jb;ea.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom","vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],
["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var Da=lively.FreezerRuntime.recorderFor("lively.collab/index.js");Da.CommentGroupMorph=void 0;Da.CommentGroupMorph=void 0;Da.CommentMorph=void 0;Da.CommentMorph=void 0;Da.CommentIndicator=void 0;Da.CommentIndicator=void 0;Da.CommentBrowser=void 0;Da.CommentBrowser=void 0;Da.Comment=void 0;Da.Comment=void 0;Da.Badge=void 0;Da.Badge=void 0;var ta=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");
ta.show=Ra;ta.showRect=function(Ob,Gb,Ta){var Y=ta.BoundsMarker.highlightBounds(Gb);return Ta?ta.showInLoop(Ob,Y,Gb):ta.showThenHide(Ob,Y)};ta.showInLoop=function(Ob,Gb,Ta){var Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ma){switch(Ma.nextAddress){case 1:return ta.showThenHide(Ob,Gb,!1),Ma.yield(ta.promise.delay(300),2);case 2:Y=!1,ta.once(Ob,"onMouseDown",function(){return Y=!0}),ta.once(Ob,"hideMarkers",function(){return Y=!0});case 3:if(Y){Ma.jumpTo(4);break}return Ma.yield(Gb.retract(Ta),
3);case 4:Gb.fadeOut(2E3),Ma.jumpToEnd()}})};ta.showThenHide=function(Ob,Gb,Ta){Ta=void 0===Ta?3:Ta;if(Ob){var Y=Array.isArray(Gb)?Gb:[Gb];Y.forEach(function(Ma){return Ob.addMorph(Ma)});Ta&&setTimeout(function(){return Y.forEach(function(Ma){return Ma.fadeOut(2E3)})},1E3*Ta);return Gb}};ta.showLine=function(Ob,Gb,Ta){Ta=void 0===Ta?3E3:Ta;var Y=Gb.start;Gb=Gb.end.subPt(Y);var Ma=Ob.addMorph({position:Y,rotation:Gb.theta(),border:{width:1,color:ta.Color.red},width:Gb.fastR(),height:0});Ta&&setTimeout(function(){return Ma.fadeOut()},
Ta);return Ma};ta.showConnector=Ga;ta.obj=Cd;ta.promise=nd;ta.string=Ud;ta.pt=Sb;ta.Color=xc;ta.Rectangle=bd;ta.rect=Ic;ta.morph=ac;ta.easings=pd;ta.Path=yd;ta.Icon=Ne;ta.Morph=Pe;ta.MorphicEnv=Ie;ta.connect=fd;ta.once=me;ta.disconnect=Yb;ta.show=Ra;ta.show=Ra;(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ta=Gb.hasOwnProperty("BoundsMarker")&&"function"===typeof Gb.BoundsMarker?Gb.BoundsMarker:Gb.BoundsMarker=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:Symbol.for("lively-instance-initialize"),value:function(){Yc._get(Object.getPrototypeOf(Ta.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:ta.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(Y){Y=Y.insetBy(-2);Y=Math.min(Y.width,Y.height);return Math.max(4,Math.floor(10>Y/10?Y/
2-5:Y/10))}},{key:"createMarkerEdge",value:function(){return ta.morph({fill:ta.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var Y=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),Ma=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),gb=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),Nb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),oc=this.bottomRightH||(this.bottomRightH=
this.addMorph(this.createMarkerEdge())),Wc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Gc=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Zd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[Y,Ma,gb,Nb,oc,Wc,Gc,Zd]}},{key:"alignWithMorph",value:function(Y){return this.alignWithBounds(Y.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(Y){this.alignWithRect(Y.insetBy(-20));
return this.alignWithRect(Y,!0)}},{key:"alignWithRect",value:function(Y,Ma){var gb=this.ensureMarkerCorners(),Nb=this.markerLength(Y),oc=[Y.topLeft().addXY(0,0).extent(ta.pt(Nb,5)),Y.topLeft().addXY(0,0).extent(ta.pt(5,Nb)),Y.topRight().addXY(-Nb,0).extent(ta.pt(Nb,5)),Y.topRight().addXY(-5,0).extent(ta.pt(5,Nb)),Y.bottomRight().addXY(-5,-Nb).extent(ta.pt(5,Nb)),Y.bottomRight().addXY(-Nb,-5).extent(ta.pt(Nb,5)),Y.bottomLeft().addXY(0,-5).extent(ta.pt(Nb,5)),Y.bottomLeft().addXY(0,-Nb).extent(ta.pt(5,
Nb))];gb.forEach(function(Wc,Gc){return Wc.setBounds(oc[Gc])});Ma&&(this.adjustOrigin(Y.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(Y){var Ma=this,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){if(1==Nb.nextAddress)return Nb.yield(Ma.animate({scale:Math.max(30/Y.width,1.05)}),2);gb=Ma.center;return Nb.yield(Ma.animate({center:gb,scale:1,duration:300,easing:ta.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(Y){return(new this).alignWithMorph(Y)}},{key:"highlightBounds",value:function(Y){return(new this).alignWithBounds(Y)}}],Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2323,end:6E3})})(ta.Morph);Da=Wa("S",function(Ob){var Gb=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ta=Gb.hasOwnProperty("StatusMessage")&&"function"===typeof Gb.StatusMessage?Gb.StatusMessage:Gb.StatusMessage=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"relayout",value:function(){this.title=ta.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},
{key:"setMessage",value:function(Y,Ma){this.message=Y;this.color=Ma}},{key:"slideTo",value:function(Y){var Ma=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma.sliding=Ma.animate({position:Y,duration:500}),gb.yield(Ma.sliding,2);Ma.sliding=!1;gb.jumpToEnd()})}},{key:"expand",value:function(){var Y=this,Ma,gb,Nb,oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wc){if(1==Wc.nextAddress)return Y.expandable?Y.sliding?Wc.yield(Y.sliding,2):
Wc.jumpTo(2):Wc.return();Ma=Y.world();if(!Ma||Y.isMaximized)return Wc.return();Y.isMaximized=!0;Y.stayOpen=!0;gb=Y.getSubmorphNamed("message text");gb.lineWrapping=!1;Object.assign(gb,{clipMode:"auto",fixedWidth:!0,selectable:!0});Y.expandedContent&&(gb.value=Y.expandedContent);gb.fit();Nb=gb.textBounds().extent();oc=Ma.visibleBounds();Nb.y>oc.extent().y&&(Nb.y=oc.extent().y-20);Nb.x>oc.extent().x&&(Nb.x=oc.extent().x-20);Nb=Y.extent.maxPt(Nb);Y.animate({extent:Nb,center:oc.center(),duration:200});
Y.relayout();Y.focus();Wc.jumpToEnd()})}},{key:"fit",value:function(){var Y=this.getSubmorphNamed("message text");Y&&(this.extent=ta.pt(100,35).maxPt(Y.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var Y=this.getSubmorphNamed("message text");Y&&Y.focus()}},{key:"onMouseUp",value:function(Y){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:ta.pt(200,100)},stayOpen:{defaultValue:!1},
slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(Y){this.setProperty("message",Y);var Ma=this.getSubmorphNamed("message text");if(Ma){Ma.value=Y;var gb=Ma.documentEndPosition;gb.row>this.maxLines&&(Ma.replace({start:{row:this.maxLines,column:0},
end:gb},"...\n"),this.expandedContent||(this.expandedContent=Y));gb=Ma.documentEndPosition;0!==gb.column&&Ma.insertText("\n",gb)}}},title:{isStyleProp:!0,derived:!0,set:function(Y){this.getSubmorphNamed("message title").value=Y},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(Y){this.get("message icon").fontColor=Y;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=
Y)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:ta.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];ta.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");ta.connect(this,"extent",this,"relayout")}}}}}],Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(ta.Morph));ta.StatusMessage=Da;ta.StatusMessage=Da;ta.StatusMessage=Da;var Pa=Wa("b",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ta=Gb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Gb.StatusMessageForMorph?Gb.StatusMessageForMorph:Gb.StatusMessageForMorph=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Yc(Ta,Ob,[{key:"alignAtBottomOf",value:function(Y){var Ma=this.world();Ma&&(this.bringToFront(),this.fit(),this.width=Y.bounds().width,this.relayout(),Y.world()&&(this.position=Y.owner.worldPoint(Y.bounds().bottomLeft())),Y=Ma.visibleBounds(),Y=this.bounds().top()+this.height-Y.bottom(),0<Y&&this.moveBy(ta.pt(0,-Y)))}},{key:"onMouseUp",value:function(Y){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},
renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var Y=this.getProperty("targetMorph");return Y&&$world.getMorphWithId(Y)},set:function(Y){this.setProperty("targetMorph",Y?Y.id:null);this.alignAtBottomOf(Y)}},expandable:{after:["submorphs"],set:function(Y){this.setProperty("expandable",Y);if(Y){var Ma=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});ta.connect(Ma,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),ta.disconnect(Ma,"fire",this,"expand"))}}}}}],Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(ta.StatusMessage));ta.StatusMessageForMorph=Pa;ta.StatusMessageForMorph=Pa;ta.StatusMessageForMorph=Pa;ta.showConnector=Ga;ta.showConnector=
Ga;var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ha.Morph=Pe;Ha.Label=Nd;Ha.HorizontalLayout=gd;Ha.Path=yd;Ha.Text=ae;Ha.GridLayout=Fe;Ha.morph=ac;Ha.Icon=Ne;Ha.createMorphSnapshot=Wb;Ha.Color=xc;Ha.pt=Sb;Ha.rect=Ic;Ha.Rectangle=bd;Ha.LinearGradient=Cc;Ha.obj=Cd;Ha.PropertyPath=Td;Ha.promise=nd;Ha.properties=Ec;Ha.num=Vd;Ha.arr=Lb;Ha.connect=fd;Ha.signal=ub;Ha.disconnect=Yb;Ha.disconnectAll=uc;Ha.once=me;Ha.showAndSnapToGuides=Xb;Ha.showAndSnapToResizeGuides=Jb;Ha.removeSnapToGuidesOf=
ec;Ha.CommentBrowser=void 0;Ha.show=Ra;Ha.haloBlue=Ha.Color.rgb(23,160,251);Ha.componentAccent=Ha.Color.magenta;Ha.derivedAccent=Ha.Color.purple;var tb=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("Halo")&&"function"===typeof Gb.Halo?Gb.Halo:Gb.Halo=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(Y){Y.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var Y=this;setTimeout(function(){Y.target.owner||Y.remove()})}},{key:"initLayout",value:function(){var Y=this.layout=new Ha.GridLayout({autoAssign:!1,fitToCell:!1,
renderViaCSS:!0,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],
[null,"name","name","name","name","name",null]]});Y.col(1).row(7).group.align="topCenter";Y.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},
{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Ha.morph({name:"border-box",halosEnabled:!1,fill:Ha.Color.transparent,borderColor:this.target.isComponent?Ha.componentAccent:Ha.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(Y){this.state||(this.state={});this.state.pointerId=Y}},{key:"prepareTarget",
value:function(Y){if(!Ha.obj.isArray(Y))return Y;if(1>=Y.length)return Y[0];Y=Y[0].world().addMorph(new Ha.MultiSelectionTarget({selectedMorphs:Y}));Y.alignWithSelection();Y.modifiesSelectedMorphs=!0;return Y}},{key:"refocus",value:function(Y){this.target=Y;this.alignWithTarget()}},{key:"alignWithTarget",value:function(Y){var Ma=this;if((!Y||["extent","position","scale","rotation"].includes(Y.prop))&&!this.active&&this.target){Y=this.target.world()||$world;var gb=this.maskBounds,Nb=this.target.globalBounds(),
oc=Nb.insetBy(-36).intersection(gb);gb=Nb.intersection(gb);this.state.activeButton?(this.buttonControls.forEach(function(Wc){return Wc.visible=!1}),this.ensureResizeHandles().forEach(function(Wc){return Wc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Wc){return Wc.visible=!0}),this.buttonControls.filter(function(Wc){return Ma.activeItems.includes("*")?
!0:Ma.activeItems.includes(Wc.name)}).forEach(function(Wc){Wc.visible=!0}),this.propertyDisplay.disable());this.setBounds(oc.translatedBy(Y.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,gb));this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Wc){return Wc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();return this}}},{key:"detachFromTarget",value:function(){var Y=this.target;Y&&(Ha.disconnect(Y,"onChange",this,"alignWithTarget"),
Ha.disconnect(Y,"onOwnerChanged",this,"removeIfDetached"),Y instanceof Ha.MultiSelectionTarget?(Y.modifiesSelectedMorphs=!1,Y.remove()):"function"===typeof Y.detachedHalo&&Y.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();Yc._get(Object.getPrototypeOf(Ta.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return Ha.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ha.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ha.CloseHaloItem.for(this)}},
{key:"grabHalo",value:function(){return Ha.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ha.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ha.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ha.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return Ha.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ha.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ha.CopyHaloItem.for(this)}},{key:"originHalo",
value:function(){return Ha.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ha.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(Y){return Y.isHaloItem&&!Y.isResizeHandle})}},{key:"addMorphToSelection",value:function(Y){var Ma=this,gb,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){if(1==oc.nextAddress){gb=Ma.world();Nb=Ma.target.isMorphSelection?Ma.target.selectedMorphs:[Ma.target];if(Nb.includes(Y))return oc.return();
Ma.remove();return oc.yield(gb.showHaloForSelection([].concat($jscomp.arrayFromIterable(Nb),[Y]),Ma.state.pointerId),2)}return oc.return(oc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(Y){var Ma=this,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){if(1==Nb.nextAddress){gb=Ma.world();Ma.remove();if(!Ma.target.isMorphSelection)return Nb.jumpTo(0);Ha.arr.remove(Ma.target.selectedMorphs,Y);return Nb.yield(gb.showHaloForSelection(Ma.target.selectedMorphs,Ma.state.pointerId),
3)}return Nb.return(Nb.yieldResult)})}},{key:"isAlreadySelected",value:function(Y){return this.target==Y||this.target.isMorphSelection&&this.target.selectsMorph(Y)}},{key:"updateBoundsFor",value:function(Y,Ma,gb,Nb,oc){var Wc={topLeft:Ha.rect(-1,-1,1,1),topCenter:Ma?Ha.rect(1,-1,0,1):Ha.rect(0,-1,0,1),topRight:Ha.rect(0,-1,1,1),rightCenter:Ma?Ha.rect(0,1,1,1):Ha.rect(0,0,1,0),bottomRight:Ha.rect(0,0,1,1),bottomCenter:Ma?Ha.rect(1,0,0,1):Ha.rect(0,0,0,1),bottomLeft:Ha.rect(-1,0,1,1),leftCenter:Ma?
Ha.rect(-1,1,1,0):Ha.rect(-1,0,1,0)}[Y];oc=Wc.x;var Gc=Wc.y,Zd=Wc.width;Wc=Wc.height;gb=Ma?this.proportionalDelta(Y,gb,Nb):gb;Y=Ha.rect(gb.x*oc,gb.y*Gc,gb.x*Zd,gb.y*Wc);this.active=!0;this.target.setBounds(Nb.insetByRect(Y));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(je){if(je.activeSideBars.includes("Styling Palette"))je.stylingPalette.onHierarchyChange()})}},{key:"proportionalDelta",
value:function(Y,Ma,gb){var Nb=gb.width,oc=gb.height;gb={topLeft:Ha.pt(-1,-1),topCenter:Ha.pt(0,-1),topRight:Ha.pt(1,-1),leftCenter:Ha.pt(-1,0),rightCenter:Ha.pt(1,0),bottomLeft:Ha.pt(-1,1),bottomCenter:Ha.pt(0,1),bottomRight:Ha.pt(1,1)};var Wc=Nb/Math.max(Nb,oc),Gc=oc/Math.max(oc,Nb);Nb={topLeft:Ha.pt(-Wc,-Gc),topCenter:Ha.pt(1/(2*oc/Nb),-1),topRight:Ha.pt(Wc,-Gc),leftCenter:Ha.pt(-1,oc/(2*Nb)),rightCenter:Ha.pt(1,oc/(3*Nb)),bottomLeft:Ha.pt(-Wc,Gc),bottomCenter:Ha.pt(1/(2*oc/Nb),1),bottomRight:Ha.pt(Wc,
Gc)};gb=gb[Y];return Nb[Y].scaleBy(gb.dotProduct(Ma)/gb.dotProduct(gb))}},{key:"ensureResizeHandles",value:function(){return Ha.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(Y){Y=Y.valueForPropertyDisplay();"undefined"!==typeof Y?this.propertyDisplay.displayProperty(Y):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(Y,Ma){if(!Ha.rect(0).sides.includes(Ma)){var gb=this.getSubmorphNamed("diagonal");if(Y){Y=this.target.globalBounds();var Nb=Y.width,
oc=Y.height;Y=this.localize(Ha.pt(Y.x,Y.y)).extent(Ha.pt(Nb,oc)).scaleRectTo(this.innerBounds());Nb={topLeft:[Ha.pt(Nb,oc),Ha.pt(0,0)],topRight:[Ha.pt(0,oc),Ha.pt(Nb,0)],bottomRight:[Ha.pt(0,0),Ha.pt(Nb,oc)],bottomLeft:[Ha.pt(Nb,0),Ha.pt(0,oc)]};gb?gb.setBounds(Y):(gb=$jscomp.makeIterator(Nb[Ma]),Ma=gb.next().value,gb=gb.next().value,Nb=new Ha.LinearGradient({stops:[{offset:0,color:Ha.Color.orange.withA(0)},{offset:.2,color:Ha.Color.orange},{offset:.8,color:Ha.Color.orange},{offset:1,color:Ha.Color.orange.withA(0)}]}),
gb=this.addMorphBack(new Ha.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:Y,borderColor:Nb,vertices:[Ma,gb]})),gb.setBounds(Y),gb.animate({opacity:1,duration:500}))}else gb&&gb.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(Y,Ma){var gb=this.getSubmorphNamed("rotationIndicator");Y&&Ma?(Y=this.getSubmorphNamed("origin").center,gb=gb||this.addMorphBack(new Ha.Path({name:"rotationIndicator",borderColor:Ha.haloBlue,borderWidth:1,vertices:[]})),gb.setBounds(Ma.bounds().union(this.innerBounds())),
gb.vertices=[gb.localizePointFrom(Y,this),gb.localizePointFrom(Ma.center,this)]):gb&&gb.remove()}},{key:"toggleMorphHighlighter",value:function(Y,Ma,gb){gb=void 0===gb?!1:gb;if(Ma)if(Ma.onHaloGrabover)Ma.onHaloGrabover(Y);else gb=Ha.MorphHighlighter.for(this,Ma,gb),Y&&Ma&&Ma!=this.world()?gb&&gb.show(Ma):gb&&gb.deactivate()}},{key:"temporaryEditTextMorph",value:function(Y){if(this.target.isText){var Ma=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(Y.positionIn(this.target));
var gb=this.world(),Nb=this.target,oc=this.topBar,Wc=function(Gc){oc.stylingPalette&&oc.stylingPalette.fullContainsWorldPoint(gb.firstHand.position)?(Nb.whenRendered().then(function(){Ha.once(Nb,"onBlur",Wc)}),Ha.once(Nb,"onBlur",Wc)):(oc.setEditMode("Halo",!0),Nb.readOnly=Ma,Nb.collapseSelection(),oc.showHaloFor(Nb))};this.target.whenRendered().then(function(){Ha.once(Nb,"onBlur",Wc)});oc.setEditMode("Hand",!0);this.remove()}}},{key:"onMouseDown",value:function(Y){var Ma=this,gb=Y.state.clickedOnMorph;
if(!Y.isCommandKey()&&gb==this.borderBox){if(2==Y.state.clickCount&&this.target.isText){this.temporaryEditTextMorph(Y);return}return Ha.promise.delay(200).then(function(){2!=Y.state.clickCount&&Ma.remove()})}if(Y.isShiftDown()&&Y.isCommandKey())gb=this.target.isMorphSelection?this.target.morphBeneath(Y.position):this.morphBeneath(Y.position),this.isAlreadySelected(gb)?this.removeMorphFromSelection(gb):this.addMorphToSelection(gb);else{if(gb==this.borderBox&&Y.isCommandKey()){var Nb=Y.world.morphsContainingPoint(Y.position).filter(function(oc){return oc.halosEnabled});
(Nb=Nb.slice(Nb.indexOf(this.target)+1)[0]||Nb[0]||Y.world)&&Y.world.showHaloFor(Nb,Y.domEvt.pointerId);this.remove()}gb==this&&Y.isCommandKey()&&(Nb=this.morphBeneath(Y.position),Y.world.showHaloFor(Nb,Y.domEvt.pointerId));gb==this&&Ha.promise.delay(500).then(function(){Ma.remove()})}}},{key:"onContextMenu",value:function(Y){var Ma=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(gb){return Ma.target.openMenu(gb,Y)}).catch(function(gb){return $world.logError(gb)})}},{key:"onKeyUp",
value:function(Y){this.changingName||this.buttonControls.map(function(Ma){return Ma.onKeyUp(Y)})}},{key:"getMesh",value:function(Y,Ma){var gb=Y.x;Y=Y.y;Ma=void 0===Ma?Ha.pt(0,0):Ma;var Nb=this.world().visibleBounds(),oc=Nb.height;Nb=Nb.width;var Wc={borderStyle:"dotted",borderWidth:2,borderColor:Ha.Color.orange};Wc=this.get("mesh")||this.addMorph(new Ha.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:Ha.pt(Nb,oc),fill:null,submorphs:[new Ha.Path(Object.assign({name:"vertical"},Wc)),new Ha.Path(Object.assign({name:"horizontal"},
Wc))]}));Wc.globalPosition=Ma;Wc.getSubmorphNamed("vertical").vertices=[Ha.pt(gb,0).subPt(Ma),Ha.pt(gb,oc).subPt(Ma)];Wc.getSubmorphNamed("horizontal").vertices=[Ha.pt(0,Y).subPt(Ma),Ha.pt(Nb,Y).subPt(Ma)];return Wc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ha.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},acceptsDrops:{defaultValue:!1},
maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(Y){this.setProperty("maskBounds",Y);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(Y){this.setProperty("activeItems",Y);this.buttonControls.forEach(function(Ma){return Ma.visible=Y.includes(Ma.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,
get:function(){return 40>this.target.bounds().extent().dist(Ha.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},target:{get:function(){return this.state?this.state.target:null},set:function(Y){this.state||(this.state={});var Ma=!!this.state.target;this.detachFromTarget();Y=this.prepareTarget(Y);this.state.target=Y;Ma&&this.alignWithTarget();Ha.connect(Y,"onChange",this,"alignWithTarget");Ha.connect(Y,"onOwnerChanged",this,"removeIfDetached")}}}}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19551})}(Ha.Morph);tb=Ha.Halo;var Ac=Wa("H",tb);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Gb.HaloPropertyDisplay?Gb.HaloPropertyDisplay:
Gb.HaloPropertyDisplay=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(Y){var Ma=this.halo.state.activeButton;Y=String(Y);this.visible=!0;this.textString=Y;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(Ma.bounds())&&
(this.position=Ha.pt(Ma.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return Ha.pt(25,0)}},{key:"for",value:function(Y){return Y.getSubmorphNamed(this.morphName)||Y.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},
fill:{defaultValue:Ha.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ha.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ha.Color.white},position:{defaultValue:this.defaultPosition}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:19741,end:21079})})(Ha.Label);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Gb.MultiSelectionTarget?Gb.MultiSelectionTarget:Gb.MultiSelectionTarget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},
{key:"selectsMorph",value:function(Y){return this.selectedMorphs.includes(Y)}},{key:"alignWithSelection",value:function(){var Y=this.selectedMorphs.map(function(Ma){return Ma.globalBounds()}).reduce(function(Ma,gb){return Ma.union(gb)});this.setBounds(Y)}},{key:"onGrab",value:function(Y){this.grabbingHand=Y.hand;this.selectionGrabbed=!0;Y.hand.grab(this.selectedMorphs);Ha.once(Y.hand,"dropMorphsOn",this,"onGrabEnd");Ha.connect(Y.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=
!1;Ha.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(Y){var Ma=Y.value.subPt(Y.prevValue);this.selectedMorphs.forEach(function(gb){return gb.resizeBy(Ma)})}},{key:"updatePosition",value:function(Y){if(!this.selectionGrabbed){var Ma=Y.value.subPt(Y.prevValue);this.selectedMorphs.forEach(function(gb){return gb.moveBy(Ma)})}}},{key:"updateRotation",value:function(Y){var Ma=this,gb=Y.value-Y.prevValue;this.selectedMorphs.forEach(function(Nb){var oc=Nb.origin;Nb.adjustOrigin(Nb.localize(Ma.worldPoint(Ha.pt(0,
0))));Nb.rotation+=gb;Nb.adjustOrigin(oc)})}},{key:"updateScale",value:function(Y){var Ma=this,gb=Y.value-Y.prevValue;this.selectedMorphs.forEach(function(Nb){var oc=Nb.origin;Nb.adjustOrigin(Nb.localize(Ma.worldPoint(Ha.pt(0,0))));Nb.scale+=gb;Nb.adjustOrigin(oc)})}},{key:"onChange",value:function(Y){Yc._get(Object.getPrototypeOf(Ta.prototype),"onChange",this).call(this,Y);if(this.modifiesSelectedMorphs){switch(Y.prop){case "extent":this.updateExtent(Y);break;case "scale":this.updateScale(Y);break;
case "position":this.updatePosition(Y);break;case "rotation":this.updateRotation(Y)}return Y}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21147,end:23418})})(Ha.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("HaloItem")&&"function"===typeof Gb.HaloItem?Gb.HaloItem:Gb.HaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ha.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ha.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},
{key:"for",value:function(Y){return Y.getSubmorphNamed(this.morphName)||Y.addMorph(new this({halo:Y,name:this.morphName}))}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23582,end:24300})})(Ha.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("NameHolder")&&
"function"===typeof Gb.NameHolder?Gb.NameHolder:Gb.NameHolder=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"onHoverIn",value:function(Y){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ha.Color.orange)}},{key:"onHoverOut",value:function(Y){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
Ha.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(Y){"Enter"==Y.keyCombo?(this.accept(),this.halo.focus(),Y.stop()):Yc._get(Object.getPrototypeOf(Ta.prototype),"onKeyDown",this).call(this,Y)}},{key:"onMouseUp",value:function(){Ha.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(Y){this.nameHolder.fontColor=Ha.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(Y){Y=this.nameHolder.textString;var Ma=this.target.owner;this.validName=!Ma||!Ma.getSubmorphNamed(Y)||this.target.name==Y;Ha.signal(this,"valid",[this.validName,Y])}},{key:"update",value:function(){var Y=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return Y.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(Y){if(!this.forceUniqueName||this.validName)this.target.name=Y,Ha.signal(this,"active",[!1,this]),Ha.CommentBrowser.instance&&Ha.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},
draggable:{defaultValue:!1},fill:{defaultValue:Ha.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ha.HorizontalLayout({renderViaCSS:!0,resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ha.Text({fill:Ha.Color.transparent,fontColor:Ha.Color.white,fontWeight:"bold",active:!0}));Ha.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Gb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24335,end:27086})})(Ha.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("NameHaloItem")&&"function"===typeof Gb.NameHaloItem?Gb.NameHaloItem:Gb.NameHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Yc(Ta,Ob,[{key:Symbol.for("lively-instance-initialize"),value:function(Y){Yc._get(Object.getPrototypeOf(Ta.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Y);this.initComponentLink();this.initNameHolders();this.validityIndicator=Ha.Icon.makeLabel("check",{fontColor:Ha.Color.green,fontSize:15,padding:Ha.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Ha.componentAccent:Ha.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var Y=this,
Ma=this.halo.target;if(Ma&&!Ma.isMorphSelection&&Ma.master){var gb=Ma.master.determineMaster(Ma),Nb=gb&&!!Ma.world().localComponents.includes(gb),oc=gb?Ma.master.getWorldUrlFor(gb):"this project";Ma=this.addMorph(Ha.Icon.makeLabel(oc?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Ha.Color.white,padding:Ha.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+oc}));oc&&Ha.connect(Ma,"onMouseDown",function(){Nb?Y.showLocalMaster(gb):window.open(oc)})}}},{key:"showLocalMaster",
value:function(Y){var Ma;if(Ma=Y.getWindow())Ma.activate(),Ma.minimized&&(Ma.minimized=!1);Y.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(Y){return{target:Y,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var Y=this;this.nameHolders=this.targets().map(function(Ma){Ma=new Ha.NameHolder({halo:Y.halo,highlightOnHover:Ma.highlightOnHover,
target:Ma.target});Ha.connect(Ma,"active",Y,"toggleActive");Ha.connect(Ma,"valid",Y,"toggleNameValid");return Ma});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Ha.arr.interpose(this.nameHolders,{extent:Ha.pt(1,28),fill:Ha.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(Y){var Ma=$jscomp.makeIterator(Y);Y=Ma.next().value;var gb=Ma.next().value;if(this.halo.changingName!==Y){this.halo.changingName=Y;if(Ma=this.get("master link"))Ma.visible=
Ma.isLayoutable=!Y;Y?(this.nameHolders.forEach(function(Nb){return Nb!=gb&&Nb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Ha.Color.darkGray,setTimeout(function(){return gb.nameHolder.selectAll()})):(this.fill=Ha.haloBlue,this.nameHolders.forEach(function(Nb){return Nb!=gb&&Nb.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(Y){var Ma=$jscomp.makeIterator(Y);Y=Ma.next().value;Ma=Ma.next().value;
(this.validName=Y)?(this.conflictingMorph=null,this.borderColor=Ha.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Ha.Color.green,Ha.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(Ma),this.borderColor=Ha.Color.red,this.validityIndicator.fontColor=Ha.Color.red,this.validityIndicator.nativeCursor="pointer",Ha.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ha.arr.zip(this.targets(),
this.nameHolders).map(function(Ma){var gb=$jscomp.makeIterator(Ma);Ma=gb.next().value.target;gb=gb.next().value;gb.target=Ma;gb.update()});var Y=this.halo.innerBounds().bottomCenter().addPt(Ha.pt(0,2));this.topCenter=Ha.pt(Math.max(Y.x,30),Math.max(Y.y,80))}},{key:"onMouseDown",value:function(Y){var Ma=this,gb=this.conflictingMorph;gb&&(this.halo.toggleMorphHighlighter(!0,gb),setTimeout(function(){return Ma.halo.toggleMorphHighlighter(!1,gb)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},
{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Ha.haloBlue},borderColor:{defaultValue:Ha.Color.green},layout:{initialize:function(){this.layout=new Ha.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27088,end:31588})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("CloseHaloItem")&&"function"===typeof Gb.CloseHaloItem?Gb.CloseHaloItem:Gb.CloseHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"update",value:function(){var Y=this.halo,Ma=Y.target.owner;
Ma.undoStart("close-halo");Y.target.selectedMorphs?Y.target.selectedMorphs.forEach(function(gb){return gb.abandon()}):Y.target.abandon();Ma.undoStop("close-halo");Y.remove()}},{key:"onMouseDown",value:function(Y){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],
initialize:function(){this.styleClasses=["fas",this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":"Remove this morph from the world"}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:31590,end:32600})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("GrabHaloItem")&&"function"===typeof Gb.GrabHaloItem?Gb.GrabHaloItem:Gb.GrabHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"adjustTarget",value:function(Y,Ma){Ha.PropertyPath("owner.layout.autoResize").get(Y)&&!Y.globalBounds().insetBy(10).containsPoint(Ma)&&
(Y=Y.owner);return Y}},{key:"valueForPropertyDisplay",value:function(){var Y=this.hand,Ma=this.halo,gb=this.prevDropTarget,Nb=Y.world(),oc=Y.findDropTarget(Y.globalPosition,[Ma.target],function(Wc){return!Wc.isHaloItem&&!Wc.ownerChain().some(function(Gc){return Gc.isHaloItem||!Gc.visible||0==Gc.opacity})});if(oc)return oc=this.adjustTarget(oc,Y.globalPosition),Ma.toggleMorphHighlighter(oc&&oc!=Nb,oc,!0),gb&&gb!=oc&&Ma.toggleMorphHighlighter(!1,gb),(this.prevDropTarget=oc)&&oc.name}},{key:"init",value:function(Y){var Ma=
this.halo,gb=Ma.target.undoStart("grab-halo");gb&&gb.addTarget(Ma.target.owner);this.hand=Y;Ma.target.onGrab({halo:Ma,hand:Y,isShiftDown:function(){return!1}});Ma.state.activeButton=this;this.opacity=.3;var Nb=Ha.connect(Y,"update",this,"update");Ha.once(Ma.target,"remove",function(){return Nb.disconnect()})}},{key:"stop",value:function(Y){var Ma=this.halo,gb=this.prevDropTarget,Nb=Ma.target.undoInProgress,oc=Y.hand.findDropTarget(Y.hand.globalPosition,[Ma.target],function(Wc){return!Wc.isHaloItem&&
!Wc.ownerChain().some(function(Gc){return Gc.isHaloItem})});oc=this.adjustTarget(oc,Y.hand.globalPosition);Ha.disconnect(Y.hand,"update",this,"update");Ha.MorphHighlighter.interceptDrop(Ma,oc,Ma.target);Nb.addTarget(oc);oc.onDrop(Y);Ma.state.activeButton=null;Ma.alignWithTarget();Ma.toggleMorphHighlighter(!1,gb);Ha.MorphHighlighter.removeHighlighters(Ma);Ma.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(Y){this.init(Y.hand)}},
{key:"onDragEnd",value:function(Y){this.stop(Y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32664,end:35192})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("DragHaloItem")&&"function"===typeof Gb.DragHaloItem?Gb.DragHaloItem:Gb.DragHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},
{key:"updateAlignmentGuide",value:function(Y){var Ma=this.halo.getSubmorphNamed("mesh");if(Y)return Ma=this.halo.getMesh(this.halo.target.worldPoint(Ha.pt(0,0))),this.focus(),Ma;Ma&&Ma.remove()}},{key:"init",value:function(){var Y=this.halo.target;Y.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=Y.position;this.targetTransform=Y.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.updateAlignmentGuide(!1);Ha.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(Y,Ma,gb){Ma=void 0===Ma?!1:Ma;gb=void 0===gb?!1:gb;this.actualPos=Y=this.actualPos.addPt(this.targetTransform.transformDirection(Y));Ma&&(Y=Y.griddedBy(Ha.pt(10,10)));this.halo.target.position=Y;this.updateAlignmentGuide(Ma);this.world().withTopBarDo(function(Nb){if(Nb.activeSideBars.includes("Styling Palette"))Nb.stylingPalette.onHierarchyChange()});Ma||Ha.showAndSnapToGuides(this.halo.target,!0,
gb,5,500)}},{key:"onDragStart",value:function(Y){this.init()}},{key:"onDrag",value:function(Y){this.update(Y.state.dragDelta,Y.isAltDown(),Y.isCtrlDown())}},{key:"onDragEnd",value:function(Y){this.stop()}},{key:"onKeyUp",value:function(Y){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},
tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35194,end:37192})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Ta=Gb.hasOwnProperty("InspectHaloItem")&&"function"===typeof Gb.InspectHaloItem?Gb.InspectHaloItem:Gb.InspectHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){var Ma=this;(function(){var gb,Nb,oc,Wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==Gc.nextAddress)return Gc.yield(System.import("lively.ide/js/inspector.js"),2);gb=Gc.yieldResult;
Nb=gb.default;(oc=Ma.world().getSubmorphsByStyleClassName("Inspector").find(function(Zd){return Zd.targetObject==Ma.halo.target}))&&(Wc=oc.getWindow())?(Wc.minimized=!1,Wc.activate(),Wc.animate({center:Ma.world().visibleBounds().center(),duration:200})):Nb.openInWindow({targetObject:Ma.halo.target});Ma.halo.remove();Gc.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37194,end:38111})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("EditHaloItem")&&"function"===
typeof Gb.EditHaloItem?Gb.EditHaloItem:Gb.EditHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){var Ma=this;(Y=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(gb){return gb.target==Ma.halo.target}))?(Y=Y.getWindow(),Y.bringToFront(),Y.minimized=!1,Y.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",
{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38113,end:38893})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("RotateHaloItem")&&"function"===typeof Gb.RotateHaloItem?Gb.RotateHaloItem:Gb.RotateHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:Symbol.for("lively-instance-initialize"),value:function(Y){Yc._get(Object.getPrototypeOf(Ta.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Y);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(Y){this.setProperty("angle",Y)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(Y){this.setProperty("scaleGauge",Y)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(Y){this.setProperty("initRotation",
Y)}},{key:"valueForPropertyDisplay",value:function(){var Y=this.halo.target;return this.scaleGauge?Y.scale.toFixed(4).toString():Ha.num.toDegrees(Y.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(Y){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=Y;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(Y){this.detachFromLayout();this.halo.state.activeButton=this;
this.scaleGauge=Y.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(Y){this.scaleGauge=null;Y=this.initRotation+(Y-this.angle);Y=Ha.num.toRadians(Ha.num.detent(Ha.num.toDegrees(Y),10,45));this.halo.target.rotation=Y;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(Y){var Ma=this.scaleGauge,gb=this.halo;Ma||(Ma=this.scaleGauge=Y.scaleBy(1/gb.target.scale));this.angle=Y.theta();this.initRotation=gb.target.rotation;
gb.target.scale=Ha.num.detent(Y.dist(Ha.pt(0,0))/Ma.dist(Ha.pt(0,0)),.1,.5);gb.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(Y){this.styleClasses=["fas",Y?"fa-search-plus":"fa-redo"];this.tooltip=Y?"Scale morph":"Rotate morph"}},
{key:"detachFromLayout",value:function(){}},{key:"attachToLayout",value:function(){}},{key:"onDragStart",value:function(Y){this.adaptAppearance(Y.isShiftDown());Y.isShiftDown()?this.initScale(Y.position.subPt(this.halo.target.globalPosition)):this.init(Y.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(Y){this.globalPosition=Y.position.addPt(Ha.pt(-10,-10));this.adaptAppearance(Y.isShiftDown());Y.isShiftDown()?this.updateScale(Y.position.subPt(this.halo.target.globalPosition)):
this.update(Y.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(Y){this.adaptAppearance(Y.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(Y){this.adaptAppearance(Y.isShiftDown())}},{key:"onKeyUp",value:function(Y){this.adaptAppearance(Y.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38895,end:42263})})(Ha.HaloItem);Ha.nameNumberRe=/(.+)([0-9]+)$/;(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof Gb.ComponentHaloItem?Gb.ComponentHaloItem:
Gb.ComponentHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"updateComponentIndicator",value:function(){var Y=this.world(),Ma=this.halo.target;this.halo.remove();Y.showHaloFor(Ma)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var Y=this,Ma,gb,Nb,oc,Wc,Gc,Zd,je,Bf,lf,bf,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pf){switch(pf.nextAddress){case 1:Ma=Y.halo.target;
gb=Y.world();Nb=[];Ma.withAllSubmorphsDoExcluding(function(nf){nf!=Ma&&Nb.push(nf)},function(nf){return nf.master&&nf!=Ma});oc=Ha.arr.groupBy(Nb,function(nf){return nf.name});Wc={fontWeight:"normal",fontSize:16};if(!Object.values(oc).find(function(nf){return 1<nf.length})){pf.jumpTo(2);break}Gc=Ha.arr.sum(Object.values(oc).filter(function(nf){return 1<nf.length}).map(function(nf){return nf.length}));return pf.yield(gb.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(Ha.Icon.textAttribute("exclamation-triangle",
{fontColor:Ha.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+Gc+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},Wc,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},Wc,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Wc,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Wc,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(Zd=pf.yieldResult,!Zd)return pf.return();case 2:Bf=pf.forIn(oc);case 4:if(null==(je=Bf.getNext())){pf.jumpTo(6);break}if(2>oc[je].length){pf.jumpTo(4);break}lf=oc[je];case 7:if(!(1<lf.length)){pf.jumpTo(4);break}bf=lf[0];Ha.show(bf,!0);return pf.yield(gb.prompt(["Name Collision\n",{},"The name of\n",Wc,bf.toString(),Object.assign({},Wc,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Wc),Ma.name,Object.assign({},Wc,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<lf.length?"are "+(lf.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Wc," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Wc],{input:bf.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(nf){return!Object.keys(oc).includes(nf)}}),9);case 9:z=pf.yieldResult;Ha.signal(gb,"hideMarkers");z&&(bf.name=z);if(z in oc){pf.jumpTo(7);break}else if(!z){lf=Ha.arr.rotate(lf);pf.jumpTo(7);break}Ha.arr.remove(lf,bf);pf.jumpTo(7);break;case 6:return pf.return(!0)}})}},{key:"onMouseDown",value:function(){var Y=this,Ma,gb,Nb,oc,Wc,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){switch(Zd.nextAddress){case 1:Ma=
Y.halo.target;gb=!Ma.isComponent;Nb=$world.getAllNamed(Ma.name).length;if(!(gb&&1<Nb)){Zd.jumpTo(2);break}return Zd.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(Nb-1)+" other morph"+(2<Nb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:Ma.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(je){return 0==$world.getAllNamed(je).length}}),3);case 3:oc=Zd.yieldResult;if(!oc)return Zd.return();Ma.name=oc;case 2:Wc=Ma;if(!(Gc=gb)){Zd.jumpTo(4);break}return Zd.yield(Y.checkForDuplicateNamesInHierarchy(),5);case 5:Gc=Zd.yieldResult;case 4:Wc.isComponent=Gc,gb?(Ha.arr.pushIfNotIncluded(Ma.world().localComponents,Ma),Ha.arr.pushIfNotIncluded(Ma.world().hiddenComponents,Ma.name)):Ha.arr.remove(Ma.world().localComponents,Ma),Y.world()?Y.updateComponentIndicator():Ma.world().showHaloFor(Ma),
Zd.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42304,end:48458})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("CopyHaloItem")&&"function"===typeof Gb.CopyHaloItem?Gb.CopyHaloItem:Gb.CopyHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,
Ob,[{key:"init",value:function(Y){function Ma(je,Bf){return Bf.match(Ha.nameNumberRe)?Bf.replace(Ha.nameNumberRe,function(lf,bf,z){z||(z="0");for(lf=Number(z);je.get(bf+ ++lf););return bf+lf}):Bf+"1"}var gb=this.halo,Nb=gb.target,oc=gb.world(),Wc=Nb instanceof Ha.MultiSelectionTarget;gb.remove();Ha.connect(Y,"update",this,"update");if(Wc){var Gc=Ha.arr.compact(Nb.selectedMorphs.map(function(je){if(je.canBeCopied())return je=je.copy(!0),oc.addMorph(je),je}));Wc=Gc.map(function(je){je.name=Ma(Nb,je.name);
return je.position});Gc[0].undoStart("copy-halo");oc.addMorph(gb);gb.refocus(Gc);Y.grab(gb.target);gb.target.onGrab({halo:gb,hand:Y,isShiftDown:function(){return!1}});Wc.forEach(function(je,Bf){return Gc[Bf].globalPosition=je});gb.alignWithTarget()}else{Wc=Nb.globalPosition;var Zd=Nb.copy(!0);Nb.isComponent&&(Zd.isComponent=!1,Zd.withAllSubmorphsDoExcluding(function(je){je!=Zd&&je.master||delete je._parametrizedProps},function(je){return je.master&&je!=Zd}),Zd.master=Nb);Zd.name=Ma(Nb,Nb.name);oc.addMorph(Zd);
Zd.globalPosition=Wc;Zd.undoStart("copy-halo");Y.grab(Zd);oc.addMorph(gb);gb.visible=!1}}},{key:"stop",value:function(Y){var Ma=this.halo,gb=$jscomp.makeIterator(Y.grabbedMorphs).next().value,Nb=Y.findDropTarget(Y.globalPosition,[Ma.target],function(Wc){return!Wc.isHaloItem&&!Wc.ownerChain().some(function(Gc){return Gc.isHaloItem})}),oc=Ma.target.undoInProgress;Ha.disconnect(Y,"update",this,"update");oc.addTarget(Nb);Y.dropMorphsOn(Nb);Ma.target.undoStop("copy-halo");Ma.remove();Y.world().showHaloFor(gb)}},
{key:"onDragStart",value:function(Y){this.init(Y.hand)}},{key:"onDragEnd",value:function(Y){this.stop(Y.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var Y=this,Ma,gb,Nb,oc,Wc,Gc,Zd,je,Bf,lf,bf,z,pf,nf,De,Cf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rf){switch(Rf.nextAddress){case 1:Ma=Y;gb=Ma.halo;if(gb.nameHalo().nameHolders.find(function(Vf){return Vf.nameHolder===$world.focusedMorph}))return Rf.return();Nb=gb.target;
oc=gb.world();Wc=Nb instanceof Ha.MultiSelectionTarget;Gc=Nb.globalBounds().topLeft();Zd=Wc?Nb.selectedMorphs:[Nb];return Rf.yield(Promise.all(Zd.filter(function(Vf){return!Vf.isCommentIndicator}).map(function(Vf){var dg;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eg){return 1==eg.nextAddress?(dg=Vf.copy(!0),eg.yield(Promise.all(dg.withAllSubmorphsDo(function($c){if($c.master)return $c.master.applyIfNeeded(),$c.master.whenApplied()})),2)):eg.return(dg)})})),2);case 2:je=Rf.yieldResult,
Bf=[],lf='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>",gb.remove(),Rf.setCatchFinallyBlocks(3),bf=$jscomp.makeIterator(je),z=bf.next();case 5:if(z.done)return lf+="</body></html>",De=JSON.stringify(Bf),Rf.yield(Y.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:lf},{type:"application/morphic",data:De}]),9);pf=z.value;return Rf.yield(Ha.createMorphSnapshot(pf,
{addPreview:!1,testLoad:!1}),8);case 8:nf=Rf.yieldResult;nf.copyMeta={offset:pf.worldPoint(Ha.pt(0,0)).subPt(Gc)};Bf.push(nf);lf+=pf.renderPreview();z=bf.next();Rf.jumpTo(5);break;case 9:Rf.leaveTryBlock(4);break;case 3:return Cf=Rf.enterCatchBlock(),oc.logError(Cf),Rf.return();case 4:oc.addMorph(gb),gb.refocus(Zd),gb.setStatusMessage("copied"),Rf.jumpToEnd()}})}},{key:"onMouseUp",value:function(Y){var Ma=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){Y.stop();return gb.yield(Ma.copyToClipBoard(),
0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:48460,end:53088})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("OriginHaloItem")&&"function"===typeof Gb.OriginHaloItem?Gb.OriginHaloItem:Gb.OriginHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"fill",get:function(){return Ha.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ha.pt(15,
15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(Y){var Ma=this.halo,gb=Ma.target.origin,Nb=Ma.target.worldPoint(gb);Y=Ma.target.localize(Nb.addPt(Y)).subPt(Ma.target.scroll).subPt(gb);Ma.target.adjustOrigin(Ma.target.origin.addPt(Y))}},{key:"onDragStart",value:function(Y){this.init()}},{key:"onDragEnd",value:function(Y){this.stop()}},{key:"onDrag",value:function(Y){this.update(Y.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},
{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ha.componentAccent:Ha.haloBlue}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53090,end:54751})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("ResizeHandle")&&"function"===typeof Gb.ResizeHandle?Gb.ResizeHandle:Gb.ResizeHandle=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"valueForPropertyDisplay",value:function(){var Y=this.halo.target.extent,
Ma=Y.y;return Y.x.toFixed(1)+"x"+Ma.toFixed(1)}},{key:"positionInHalo",value:function(){var Y=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ha.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),Y=Y.insetBy(-4));return Y.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(Y){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(Y.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(Y){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(Y.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(Y){this.init(Y.position,Y.isShiftDown())}},{key:"onDragEnd",value:function(Y){this.stop(Y.isShiftDown())}},{key:"onDrag",value:function(Y){this.update(Y.position,Y.isShiftDown(),Y.isAltDown(),Y.isCtrlDown());this.focus()}},{key:"init",value:function(Y,Ma){Ma=void 0===Ma?!1:Ma;var gb=this.halo.target,Nb=gb.origin,oc=gb.position;gb=gb.extent;this.startPos=Y;this.startBounds=oc.subPt(Nb).extent(gb);this.startOrigin=
this.halo.target.origin;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();Y=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ha.num.toRadians(Y%45);this.halo.toggleDiagonal(Ma,this.corner)}},{key:"update",value:function(Y,Ma,gb,Nb){Ma=void 0===Ma?!1:Ma;gb=void 0===gb?!1:gb;Nb=void 0===Nb?!1:Nb;var oc=this.corner,Wc=this.tfm;Y=this.startPos.subPt(Y);Wc=Wc.transformDirection(Ha.pt(Y.x,Y.y));gb&&(Wc=Wc.griddedBy(Ha.pt(10,10)));this.halo.updateBoundsFor(oc,
Ma,Wc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(Ma,oc);this.updateAlignmentGuide(gb);Ma=[];oc=oc.toLowerCase();oc.includes("left")&&Ma.push("left");oc.includes("top")&&Ma.push("top");oc.includes("bottom")&&Ma.push("bottom");oc.includes("right")&&Ma.push("right");Ha.showAndSnapToResizeGuides(this.halo.target,Ma,!0,Nb,5,200)}},{key:"stop",value:function(Y){Y=this.halo;Y.state.activeButton=null;Y.alignWithTarget();Y.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ha.removeSnapToGuidesOf(Y.target)}},
{key:"updateAlignmentGuide",value:function(Y){var Ma=this.halo.getSubmorphNamed("mesh");if(Y)return Y=this.halo.target.extent,Y=Ha.pt(Y.x%10,Y.y%10),Ma=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),Y),this.focus(),Ma;Ma&&Ma.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",
value:function(Y){0<Y&&(Y-=360);Y=-8-(Y/45).toFixed();0==Y&&(Y=8);return Ha.arr.zip(Ha.arr.rotate([["topLeft",function(Ma){return Ma.negated()}],["topCenter",function(Ma){return Ma.withX(0).negated()}],["topRight",function(Ma){return Ma.withX(0).negated()}],["rightCenter",function(Ma){return Ha.pt(0,0)}],["bottomRight",function(Ma){return Ha.pt(0,0)}],["bottomCenter",function(Ma){return Ha.pt(0,0)}],["bottomLeft",function(Ma){return Ma.withY(0).negated()}],["leftCenter",function(Ma){return Ma.withY(0).negated()}]],
Y),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(Y){var Ma=this;if(!Y.target)return[];var gb=Y.target.getGlobalTransform().getRotation();return Ha.arr.compact(this.getResizeParts(gb).map(function(Nb){var oc=$jscomp.makeIterator(Nb),Wc=$jscomp.makeIterator(oc.next().value);Nb=Wc.next().value;
Wc.next();Wc.next();Wc=$jscomp.makeIterator(oc.next().value);oc=Wc.next().value;Wc=Wc.next().value;return Ma.for(Y,Nb,Wc,oc)})).map(function(Nb){return Nb.alignInHalo()})}},{key:"for",value:function(Y,Ma,gb,Nb){var oc="Resize "+Ma;Y=Y.getSubmorphNamed(oc)||new this({name:oc,halo:Y,corner:Ma,tooltip:"Resize "+Ma,extent:Ha.pt(10,10),borderWidth:1,borderRadius:0,borderColor:Y.target.isComponent?Ha.componentAccent:Ha.haloBlue,fill:Ha.Color.white});return Object.assign(Y,{nativeCursor:Nb,location:gb})}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:54810,end:60003})})(Ha.HaloItem);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("MenuHaloItem")&&"function"===typeof Gb.MenuHaloItem?Gb.MenuHaloItem:Gb.MenuHaloItem=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){var Ma=this,gb,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){if(1==oc.nextAddress)return gb=Ma.halo.target,Ma.halo.remove(),oc.yield(gb.menuItems(Y),2);Nb=oc.yieldResult;gb.world().openMenu(Nb).hasFixedPosition=Ma.halo.hasFixedPosition;oc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},
{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60005,end:60530})})(Ha.HaloItem);var wb=Wa("M",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Ta=Gb.hasOwnProperty("MorphHighlighter")&&"function"===typeof Gb.MorphHighlighter?Gb.MorphHighlighter:Gb.MorphHighlighter=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),
this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;
this.alignWithHalo()}},{key:"handleDrop",value:function(Y){this.layoutHalo&&this.layoutHalo.handleDrop(Y)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},
hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ha.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ha.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(Y){var Ma=this;this.setProperty("highlightedSides",Y);this.submorphs=Y.map(function(gb){return{type:"ellipse",isHaloItem:!0,fill:Ha.Color.orange,center:Ma.innerBounds()[gb]()}});
this.addMorph({type:"label",name:"name tag",padding:Ha.Rectangle.inset(5,5,5,5),fontColor:Ha.Color.white,fill:Ha.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(Y){Y=void 0===Y?$world:Y;var Ma=Y._morphHighlighters,gb;for(gb in Ma)Ma[gb].remove();delete Y._morphHighlighters}},{key:"for",value:function(Y,
Ma,gb,Nb){gb=void 0===gb?!1:gb;Nb=void 0===Nb?[]:Nb;var oc=Y._morphHighlighters=Y._morphHighlighters||{};Ha.properties.forEachOwn(oc,function(Wc,Gc){return Gc.alignWithHalo()});if(!Ma||Ma.ownerChain().find(function(Wc){return Wc.isHaloItem}))return null;oc[Ma.id]=oc[Ma.id]||new this({targetId:Ma.id,halo:Y,showLayout:gb});Y.addMorph(oc[Ma.id]);oc[Ma.id].highlightedSides=Nb;return oc[Ma.id]}},{key:"interceptDrop",value:function(Y,Ma,gb){(Y=Y._morphHighlighters=Y._morphHighlighters||{},Y[Ma.id])&&Y[Ma.id].handleDrop(gb)}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60719,end:64514})}(Ha.Morph));Ha.MorphHighlighter=wb;Ha.MorphHighlighter=wb;Ha.MorphHighlighter=wb;var ud=Wa("I",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ta=Gb.hasOwnProperty("InteractiveMorphSelector")&&
"function"===typeof Gb.InteractiveMorphSelector?Gb.InteractiveMorphSelector:Gb.InteractiveMorphSelector=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:Symbol.for("lively-instance-initialize"),value:function(Y,Ma,gb){Y=void 0===Y?$world:Y;this.controllingMorph=void 0===Ma?null:Ma;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=Y;this.filterFn=gb;this.whenDone=null}},{key:"selectNewTarget",
value:function(){this.targetObject=null;var Y=Ha.promise.deferred();Y.promise.resolve=Y.resolve;this.whenDone=Y.promise;this.selectorMorph=Ha.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ha.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ha.once(this.selectorMorph,"onMouseUp",this,"selectTarget");Ha.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",
value:function(){var Y=this.world.firstHand.globalPosition;this.selectorMorph.center=Y;this.selectorMorph.focus();var Ma=this.selectorMorph.morphBeneath(Y),gb,Nb=this.possibleTarget,oc=this.controllingMorph,Wc=this.filterFn,Gc=this.world,Zd=this.morphHighlighter;for(Zd==Ma?Ma=Zd.morphBeneath(Y):Ma&&Ma.isEpiMorph&&(Ma=Ma.morphBeneath(Y));Ma&&(gb=[Ma].concat($jscomp.arrayFromIterable(Ma.ownerChain())).find(function(je){return!je.visible}));)Ma=gb=gb.morphBeneath(Y);if(Ma&&Wc&&!Wc(Ma))for(;Ma&&![Ma].concat($jscomp.arrayFromIterable(Ma.ownerChain())).find(Wc);)Ma=
Ma.morphBeneath(Y);!Ma||Ma==Nb||oc&&Ma.ownerChain().includes(oc.getWindow())||(Zd&&Zd.deactivate(),(this.possibleTarget=Nb=Ma)&&!Nb.isWorld&&(Y=this.morphHighlighter=Ha.MorphHighlighter.for(Gc,Ma))&&Y.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ha.MorphHighlighter.removeHighlighters(this.world);Ha.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&
this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(Y,Ma,gb){Y=new this(Y,Ma,gb);Y.selectNewTarget();return Y.whenDone}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64523,
end:67276})}(void 0));Ha.InteractiveMorphSelector=ud;Ha.InteractiveMorphSelector=ud;Ha.InteractiveMorphSelector=ud;Ha.default=tb;var Tb=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Tb.info="import via sub modules";Tb.info="import via sub modules";Tb.info="import via sub modules";tb=Wa("v",{});Tb.valueWidgets=tb;Tb.valueWidgets=tb;Tb.valueWidgets=tb;var te=Wa("p",{});Tb.popovers=te;Tb.popovers=te;Tb.popovers=te;var cd=lively.FreezerRuntime.recorderFor("lively.components/popup.js");cd.Morph=
Pe;cd.Icon=Ne;cd.Color=xc;cd.pt=Sb;cd.connect=fd;cd.duration=300;Tb=Wa("P",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),Ta=Gb.hasOwnProperty("Popover")&&"function"===typeof Gb.Popover?Gb.Popover:Gb.Popover=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"relayout",value:function(Y){var Ma=this.get("body"),gb=this.get("arrow"),Nb=this.get("close button");gb=gb.height;
Y?(Ma.animate({topCenter:cd.pt(0,gb),duration:200}),Nb.animate({topRight:Ma.topRight.addXY(8,-8),duration:200})):(Ma.topCenter=cd.pt(0,gb),Nb.topRight=Ma.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,
after:["submorphs"],defaultValue:{extent:cd.pt(200,200),fill:cd.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(Y){var Ma=this;this.get("body").addMorph(Y);this.whenRendered().then(function(){return Ma.relayout()})}},submorphs:{initialize:function(){var Y=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:cd.pt(0,0),borderColor:cd.Color.transparent,vertices:[cd.pt(-10,0),cd.pt(0,
-15),cd.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(cd.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:cd.pt(16,16),borderColor:cd.Color.transparent}];var Ma=$jscomp.makeIterator(this.submorphs);Ma.next();var gb=Ma.next().value;Ma=Ma.next().value;cd.connect(Ma,"fire",this,"close");cd.connect(gb,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return Y.animated=!0},1E3)}}}}}],Gb,{pathInPackage:function(){return"popup.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:163,end:2541})}(cd.Morph));cd.Popover=Tb;cd.Popover=Tb;cd.Popover=Tb;var Lc=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Lc.Morph=Pe;Lc.TilingLayout=dc;Lc.morph=ac;Lc.Label=Nd;Lc.HorizontalLayout=gd;Lc.Icon=Ne;Lc.InputLine=Zb;Lc.config=Mc;Lc.connect=fd;Lc.signal=
ub;Lc.Color=xc;Lc.LinearGradient=Cc;Lc.pt=Sb;Lc.rect=Ic;Lc.num=Vd;Lc.obj=Cd;Lc.popovers=te;Lc.ValueScrubber=$a;Lc.Popover=Tb;(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Gb.ContextSensitiveWidget?Gb.ContextSensitiveWidget:Gb.ContextSensitiveWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,
void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Lc.Color.transparent},isSelected:{defaultValue:"false",set:function(Y){this.setProperty("isSelected",Y);this.fontColor=Y?Lc.Color.white:Lc.Color.black}},layout:{initialize:function(){this.layout=new Lc.HorizontalLayout}},context:{serialize:!1}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(Lc.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("ShortcutWidget")&&"function"===typeof Gb.ShortcutWidget?Gb.ShortcutWidget:Gb.ShortcutWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,
Ob,[{key:"onMouseDown",value:function(Y){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){Y.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(Y){this.setProperty("title",Y);this.getSubmorphNamed("valueString").value=Y}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(Y){this.submorphs.forEach(function(Ma){return Ma.fontColor=Y})}},submorphs:{initialize:function(){this.submorphs=[Lc.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:Lc.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Lc.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(Lc.ContextSensitiveWidget);te=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("LayoutWidget")&&"function"===typeof Gb.LayoutWidget?Gb.LayoutWidget:Gb.LayoutWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Yc(Ta,Ob,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var Y=this,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma=new Lc.popovers.LayoutPopover({hasFixedPosition:!!Y.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),container:Y.context}),gb.yield(Ma.fadeIntoWorld(Y.globalBounds().center()),2);Lc.connect(Ma,"layoutChanged",
Y,"layoutChanged");Lc.signal(Y,"openWidget",Ma);gb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4641})}(Lc.ShortcutWidget);Lc.LayoutWidget=te;Lc.LayoutWidget=te;Lc.LayoutWidget=te;te=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("ColorWidget")&&"function"===typeof Gb.ColorWidget?Gb.ColorWidget:Gb.ColorWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"relayout",
value:function(Y){Y?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var Y=this.color;if(2*Y.stops.length==this.submorphs.length-3){var Ma;for(Ma in this.color.stops){var gb=Y.stops[Ma];var Nb=gb.color,oc=gb.offset,Wc=$jscomp.makeIterator(this.submorphs[2+2*Ma].submorphs).next().value;gb=this.submorphs[3+
2*Ma];Wc.fill=Nb;gb.value=(100*oc).toFixed()+"%"+(Ma<Y.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
Lc.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Lc.pt(15,15),fill:Lc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Lc.pt(5,7.5),fill:Lc.Color.white,borderColor:Lc.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Lc.pt(0,0),Lc.pt(10,10)],borderColor:Lc.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Lc.pt(15,
15),fill:Lc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Lc.pt(5,7.5),fill:this.color,borderColor:Lc.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Lc.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var Y=this.color,Ma=[{type:"label",padding:Lc.rect(0,0,5,0),value:"linearGradient"==Y.type?Lc.num.toDegrees(Y.vectorAsAngle()).toFixed()+"\u00b0,":""}],gb;
for(gb in Y.stops){var Nb=Y.stops[gb],oc=Nb.color;Nb=Nb.offset;Ma.push({extent:Lc.pt(this.fontSize,this.fontSize),fill:Lc.Color.transparent,layout:new Lc.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:oc}]});Ma.push({type:"label",padding:Lc.rect(0,0,5,0),value:(100*Nb).toFixed()+"%"+(gb<Y.stops.length-1?",":"")})}return Ma}},{key:"onMouseDown",value:function(Y){this.openFillEditor()}},{key:"update",value:function(Y){this.color=Y}},{key:"openFillEditor",value:function(){var Y=
this,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma=new Lc.popovers.FillPopover({hasFixedPosition:!!Y.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),handleMorph:Y.context,fillValue:Y.color,title:"Fill Control",gradientEnabled:Y.gradientEnabled}),gb.yield(Ma.fadeIntoWorld(Y.globalBounds().center()),2);Lc.connect(Ma,"fillValue",Y,"update");Lc.signal(Y,"openWidget",Ma);gb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Lc.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:Lc.Color.white},nonSelectionFontColor:{defaultValue:Lc.Color.black},color:{defaultValue:Lc.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(Y){this.getProperty("isSelected")!=Y&&(this.getSubmorphNamed("valueString").fontColor=Y?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",Y))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){Lc.connect(this,"color",this,"relayout",{converter:function(Y,Ma){return(Ma&&Ma.isColor)!=(Y&&Y.isColor)}});this.relayout(!0)}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4705,end:10188})}(Lc.ContextSensitiveWidget);Lc.ColorWidget=te;Lc.ColorWidget=te;Lc.ColorWidget=te;te=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("BooleanWidget")&&"function"===typeof Gb.BooleanWidget?Gb.BooleanWidget:Gb.BooleanWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){this.boolean=!this.boolean}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:Lc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(Y){this.setProperty("boolean",Y);this.value=Lc.obj.safeToString(Y);this.fontColor=this.boolean?Lc.Color.green:Lc.Color.red}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10197,end:10682})}(Lc.Label);Lc.BooleanWidget=te;Lc.BooleanWidget=te;Lc.BooleanWidget=te;te=Wa("N",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("NumberWidget")&&"function"===typeof Gb.NumberWidget?Gb.NumberWidget:Gb.NumberWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){Yc._get(Object.getPrototypeOf(Ta.prototype),"onMouseDown",this).call(this,Y);"up"==Y.targetMorph.name&&this.increment();"down"==Y.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Lc.obj.dissoc(Yc._get(Object.getPrototypeOf(Ta.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(Y,Ma){Ma=void 0===Ma?!0:Ma;this.setProperty("number",Ma?Y/this.scaleFactor:Y);Lc.signal(this,"number",this.number);
this.relayout(Ma)}},{key:"relayoutButtons",value:function(){var Y=this.getSubmorphNamed("up"),Ma=this.getSubmorphNamed("down");this.getSubmorphNamed("value");Y.height=Ma.height=Math.floor(this.height/2);Y.width=Ma.width=20}},{key:"onChange",value:function(Y){Yc._get(Object.getPrototypeOf(Ta.prototype),"onChange",this).call(this,Y);"extent"!=Y.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(Y){var Ma=this.getSubmorphNamed("value"),gb=this.showStepControls?20:0;Ma&&(this.autofit?
(Y||(Ma.value=this.number*this.scaleFactor),Ma.fit(),this.height=Ma.height,this.width=Ma.width+gb):Y||(Ma.width=this.width-gb),this.relayoutButtons(),Y||(Ma.value=Lc.num.roundTo(this.number*this.scaleFactor,1),Ma.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,Ma.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,Ma.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=
this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(Y){this.setProperty("autofit",Y);this.getSubmorphNamed("value").scaleToBounds=!Y}},number:{defaultValue:0,after:["unit","autofit"],set:function(Y){this.setProperty("number",
Y);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(Y){this.setProperty("floatingPoint",Y);this.get("value").floatingPoint=Y},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var Y=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&Y&&!!Y[1]}},padding:{isStyleProp:!0,defaultValue:Lc.rect(5,3,0,0),after:["submorphs"],set:function(Y){this.setProperty("padding",
Y);this.getSubmorphNamed("value").padding=Y}},extent:{defaultValue:Lc.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(Y){this.get("value").baseFactor=Y}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var Y=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){Y.relayout()})}},
fontColor:{isStyleProp:!0,defaultValue:Lc.Color.rgbHex("#0086b3"),set:function(Y){this.setProperty("fontColor",Y)}},isSelected:{set:function(Y){this.getProperty("isSelected")!=Y&&(Y?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",Y))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(Y){this.setProperty("fontFamily",Y)}},fontSize:{defaultValue:15,isStyleProp:!0,
set:function(Y){this.setProperty("fontSize",Y)}},layout:{initialize:function(){this.layout=new Lc.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(Y){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=Y)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(Y){0<Y.length||(this.submorphs=[new Lc.ValueScrubber({name:"value",
unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[Lc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[Lc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(Lc.Morph));Lc.NumberWidget=te;Lc.NumberWidget=te;Lc.NumberWidget=te;Tb=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("ShadowWidget")&&"function"===typeof Gb.ShadowWidget?Gb.ShadowWidget:Gb.ShadowWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){this.openPopover()}},
{key:"openPopover",value:function(){var Y=this,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma=new Lc.popovers.ShadowPopover({hasFixedPosition:!!Y.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),shadowValue:Y.shadowValue}),gb.yield(Ma.fadeIntoWorld(Y.globalBounds().center()),2);Lc.connect(Ma,"shadowValue",Y,"shadowValue");Lc.connect(Y,"shadowValue",Y,"update");Lc.signal(Y,"openWidget",Ma);gb.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var Y=this.shadowValue,Ma=Y.blur,gb=Y.spread,Nb=Y.distance;Y=Y.color;var oc=$jscomp.makeIterator(this.submorphs),Wc=oc.next().value,Gc=oc.next().value;Gc=$jscomp.makeIterator(Gc.submorphs).next().value;
oc=oc.next().value;Wc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Gc.fill=Y;oc.value=", "+Ma+"px, "+Nb+"px, "+gb+"px)"}},{key:"initShadowDisplay",value:function(){var Y=this.shadowValue,Ma=Y.blur,gb=Y.spread,Nb=Y.distance;Y=Y.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Lc.morph({fill:Lc.Color.transparent,extent:Lc.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Lc.pt(this.fontSize,
this.fontSize),position:Lc.pt(2,2),fill:Y,borderColor:Lc.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+Ma+"px, "+Nb+"px, "+gb+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(Y){this.setProperty("shadowValue",Y);this.renderShadowDisplay()}},fill:{defaultValue:Lc.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(Y){this.submorphs.forEach(function(Ma){return Ma.fontColor=Y})}},isSelected:{defaultValue:!1,set:function(Y){this.setProperty("isSelected",Y);this.fontColor=Y?Lc.Color.white:Lc.Color.black}},layout:{initialize:function(){this.layout=new Lc.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(Lc.Morph);Lc.ShadowWidget=Tb;Lc.ShadowWidget=Tb;Lc.ShadowWidget=Tb;Tb=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("PointWidget")&&"function"===typeof Gb.PointWidget?Gb.PointWidget:Gb.PointWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){this.openPopover()}},{key:"openPopover",value:function(){var Y=this,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma=new Lc.popovers.PointPopover({pointValue:Y.pointValue,hasFixedPosition:!!Y.ownerChain().find(function(Nb){return Nb.hasFixedPosition})}),gb.yield(Ma.fadeIntoWorld(Y.globalBounds().center()),2);Lc.connect(Ma,"pointValue",Y,"pointValue");Lc.signal(Y,"openWidget",Ma);gb.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(Y){this.setProperty("isSelected",Y);this.fontColor=Y?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Lc.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Lc.Color.black},fontFamily:{defaultValue:Lc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(Y){var Ma=Lc.Color.rgbHex("#0086b3");this.setProperty("pointValue",Y);this.textAndAttributes=["pt(",null,Y.x.toFixed(),{fontColor:Ma},",",{},Y.y.toFixed(),{fontColor:Ma},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(Lc.Label);Lc.PointWidget=Tb;Lc.PointWidget=Tb;Lc.PointWidget=Tb;Tb=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("PaddingWidget")&&"function"===typeof Gb.PaddingWidget?Gb.PaddingWidget:Gb.PaddingWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){this.openPopover()}},{key:"openPopover",value:function(){var Y=this,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma=new Lc.popovers.RectanglePopover({hasFixedPosition:!!Y.ownerChain().find(function(Nb){return Nb.hasFixedPosition}),rectangle:Y.rectangle}),Ma.relayout(),gb.yield(Ma.fadeIntoWorld(Y.globalBounds().center()),2);Lc.connect(Ma,"rectangle",Y,"rectangle");Lc.signal(Y,"openWidget",
Ma);gb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Lc.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(Y){this.setProperty("isSelected",Y);this.fontColor=Y?Lc.Color.white:Lc.Color.black}},rectangle:{defaultValue:Lc.rect(0),set:function(Y){this.setProperty("rectangle",
Y);this.value=Lc.obj.safeToString(Y)}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(Lc.Label);Lc.PaddingWidget=Tb;Lc.PaddingWidget=Tb;Lc.PaddingWidget=Tb;Tb=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("IconWidget")&&
"function"===typeof Gb.IconWidget?Gb.IconWidget:Gb.IconWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"onMouseDown",value:function(Y){this.openPopover()}},{key:"openPopover",value:function(){var Y=this,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma=new Lc.popovers.IconPopover({hasFixedPosition:!!Y.ownerChain().find(function(Nb){return Nb.hasFixedPosition})}),
gb.yield(Ma.fadeIntoWorld(Y.globalBounds().center()),2);Lc.connect(Ma,"select",Y,"iconValue",{converter:function(Nb){return Nb&&Lc.Icon.makeLabel(Nb).value},varMapping:{Icon:Lc.Icon}});Lc.signal(Y,"openWidget",Ma);gb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Lc.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(Y){this.value=Y||"No Icon"}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(Lc.Label);Lc.IconWidget=Tb;Lc.IconWidget=Tb;Lc.IconWidget=Tb;Tb=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ta=Gb.hasOwnProperty("StringWidget")&&
"function"===typeof Gb.StringWidget?Gb.StringWidget:Gb.StringWidget=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"truncate",value:function(Y){return 200<Y.length?Y.slice(0,20)+"...":Y}},{key:"onFocus",value:function(Y){var Ma=this,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){if(1==Nb.nextAddress)return Yc._get(Object.getPrototypeOf(Ta.prototype),"onFocus",Ma).call(Ma,Y),Ma.readOnly?
Nb.return():Ma.stringTooLong?Nb.yield(Ma.world().editPrompt("edit string",{requester:Ma,input:Ma.stringValue}),2):(Ma.borderColor=Lc.Color.white.withA(.9),Ma.textString=Ma.stringValue,Nb.return());gb=Nb.yieldResult;if("string"===typeof gb)Ma.onInput(gb);Nb.jumpToEnd()})}},{key:"onBlur",value:function(Y){Yc._get(Object.getPrototypeOf(Ta.prototype),"onBlur",this).call(this,Y);this.readOnly||(this.borderColor=Lc.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(Y){this.owner.focus();
Lc.signal(this,"inputAccepted",Y);this.stringValue=Y}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Lc.Color.transparent},fontColor:{defaultValue:Lc.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Lc.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Lc.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(Y){this.setProperty("stringValue",Y);this.textString=this.truncate(Y);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(Y){this.setProperty("isSelected",Y);this.fontColor=Y?Lc.Color.white:Lc.Color.blue}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(Lc.InputLine);Lc.StringWidget=Tb;Lc.StringWidget=Tb;Lc.StringWidget=Tb;Lc.valueWidgets=tb;Object.assign(Lc.valueWidgets,{NumberWidget:Lc.NumberWidget,StringWidget:Lc.StringWidget,IconWidget:Lc.IconWidget,PaddingWidget:Lc.PaddingWidget,ShadowWidget:Lc.ShadowWidget,PointWidget:Lc.PointWidget,BooleanWidget:Lc.BooleanWidget,LayoutWidget:Lc.LayoutWidget,
ColorWidget:Lc.ColorWidget});var Hb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Hb.Ellipse=$b;Hb.Icon=Ne;Hb.Morph=Pe;Hb.Path=yd;Hb.Text=ae;Hb.HorizontalLayout=gd;Hb.VerticalLayout=Eb;Hb.morph=ac;Hb.Color=xc;Hb.pt=Sb;Hb.rect=Ic;Hb.Rectangle=bd;Hb.arr=Lb;Hb.connect=fd;Hb.disconnect=Yb;Hb.LabeledCheckBox=kc;Hb.DropDownSelector=tc;Hb.Button=Sc;Hb.Menu=Pd;Hb.NumberWidget=te;Hb.InteractiveMorphSelector=ud;Hb.easings=pd;(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ta=Gb.hasOwnProperty("ProportionSlider")&&"function"===typeof Gb.ProportionSlider?Gb.ProportionSlider:Gb.ProportionSlider=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"alignWithTarget",value:function(){this.setBounds(this.axis.getProportionSliderBounds(this))}},{key:"onDragStart",value:function(){this.view.visible=!0}},{key:"onDrag",value:function(Y){this.axis.adjustStretch(this.axis.getDelta(Y));
this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){this.view.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionSlider"}},{key:"properties",get:function(){return{axis:{},view:{},fill:{defaultValue:Hb.Color.transparent}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:662,end:1139})})(Hb.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("MinViewer")&&"function"===typeof Gb.MinViewer?Gb.MinViewer:Gb.MinViewer=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"alignWithTarget",value:function(){this.textString="min: "+this.axis.targetAxis.min.toFixed()+"px !"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MinViewer"}},{key:"properties",get:function(){return{axis:{}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1141,end:1361})})(Hb.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("MinSlider")&&"function"===
typeof Gb.MinSlider?Gb.MinSlider:Gb.MinSlider=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"alignWithTarget",value:function(){this.position=this.axis.getMinSliderPosition()}},{key:"requestToShow",value:function(){this.visible=!this.axis.targetAxis.fixed}},{key:"requestToHide",value:function(){this.active?this.shouldHide=!0:this.visible=!1}},{key:"onDragStart",value:function(){var Y=$jscomp.makeIterator(this.submorphs),
Ma=Y.next().value;Y=Y.next().value;this.axis.forceMenuHidden=!0;Ma.visible=!0;this.active=Y.visible=!0}},{key:"onDrag",value:function(Y){this.axis.targetAxis.min+=-this.getDelta(Y);this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){var Y=$jscomp.makeIterator(this.submorphs),Ma=Y.next().value;Y=Y.next().value;this.axis.forceMenuHidden=!1;Ma.visible=!1;this.active=Y.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinSlider"}},
{key:"properties",get:function(){return{axis:{},fill:{defaultValue:Hb.Color.green},visible:{defaultValue:!1},becomesActiveOnHover:{defaultValue:!0}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1363,end:2515})})(Hb.Ellipse);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ta=Gb.hasOwnProperty("AxisHalo")&&"function"===typeof Gb.AxisHalo?Gb.AxisHalo:Gb.AxisHalo=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"initialize",value:function(){this.setBounds(this.fetchBounds());var Y=this.minSlider(),Ma=this.axisMenu(),gb=this.proportionSlider();gb.addMorph(Y);this.submorphs=[gb,Ma];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(Y){this._forceMenuHidden=Y;
this.axisMenu.visible=!Y}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=
!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(Y){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var Y=this.proportionViewer();return this.halo.addGuide(new Hb.ProportionSlider({nativeCursor:this.getResizeCursor(),axis:this,view:Y,submorphs:[this.devider(),Y]}))}},{key:"devider",value:function(){return new Hb.Morph({visible:!this.lastAxis,fill:Hb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,
reactsToPointer:!1})}},{key:"minSlider",value:function(){var Y=this.minSpaceVisualizer(),Ma=this.minViewer();return this.halo.addGuide(new Hb.MinSlider({nativeCursor:this.getResizeCursor(),axis:this,submorphs:[Y,Ma]}))}},{key:"minViewer",value:function(){return this.viewer(new Hb.MinViewer({axis:this,position:this.getMinViewerPosition()}))}},{key:"minSpaceBorder",value:function(){return new Hb.Path(Object.assign({position:Hb.pt(-1,-1),borderStyle:"dashed",borderColor:Hb.Color.green,borderWidth:2},
this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var Y=this,Ma=this.minSpaceBorder();return this.halo.addGuide(new Hb.Morph({fill:Hb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[Ma],alignWithTarget:function(){this.extent=Y.getMinSpaceExtent();this.topLeft=Hb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var Y=this.lockButton(),Ma=this.menuButton(),gb=this;return new Hb.Morph({layout:this.getMenuLayout(),submorphs:[Y,Ma],fill:Hb.Color.transparent,visible:!1,becomesActiveOnHover:!0,
alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(gb.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var Y=this;return this.halo.addGuide(new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),submorphs:[{center:Hb.pt(12.5,12.5),fill:Hb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){Y.targetAxis.fixed?(this.fontColor=Hb.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=Hb.Color.green,this.submorphs[0].styleClasses=
["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){Y.targetAxis.fixed=!Y.targetAxis.fixed;Y.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var Y=this,Ma=this;return new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),submorphs:[{fill:Hb.Color.transparent,styleClasses:["fa","fa-cog"],center:Hb.pt(12.5,12.5)}],onMouseDown:function(gb){Ma.forceMenuVisible=!0;this.addMorph(gb.state.menu=new Hb.Menu({position:Hb.pt(15,15),items:[["Remove "+Ma.subject,
function(){Y.targetAxis.remove();Y.halo.initGuides();Y.halo.alignWithTarget()}],["Insert "+Ma.subject+" before",function(){Y.targetAxis.addBefore();Y.halo.initGuides();Y.halo.alignWithTarget()}],["Insert "+Ma.subject+" after",function(){Y.targetAxis.addAfter();Y.halo.initGuides();Y.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(Y){var Ma=Y.position;Y=Y.alignWithTarget;return this.halo.addGuide(new Hb.Text({styleClasses:["Halo"],padding:Hb.Rectangle.inset(6),visible:!1,borderRadius:10,
fontColor:Hb.Color.white,fill:Hb.Color.black.withA(.5),position:Ma,alignWithTarget:Y,readOnly:!0}))}},{key:"proportionViewer",value:function(){var Y=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=Y.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}},{key:"properties",get:function(){return{halo:{},targetAxis:{},container:{},fill:{defaultValue:Hb.Color.transparent},submorphs:{initialize:function(){this.initialize()}}}}}],
Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2517,end:8448})})(Hb.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("RowHalo")&&"function"===typeof Gb.RowHalo?Gb.RowHalo:Gb.RowHalo=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(Y){this.targetAxis.height+=Y}},{key:"getDelta",value:function(Y){return Y.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Hb.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Hb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",
value:function(Y){return this.targetAxis.length>Y.height?Hb.pt(2,5):Hb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Hb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Hb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Hb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return Hb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Hb.pt(this.container.width+
50,2),vertices:[Hb.pt(0,1),Hb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Hb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(Y){return Hb.pt(0,Y.owner.height-5).extent(Hb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Hb.pt(15,4).extent(Hb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}},{key:"properties",get:function(){return{row:{},targetAxis:{derived:!0,get:function(){return this.halo.target.row(this.row)}}}}}],
Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8450,end:9799})})(Hb.AxisHalo);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("ColumnHalo")&&"function"===typeof Gb.ColumnHalo?Gb.ColumnHalo:Gb.ColumnHalo=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:Symbol.for("lively-instance-initialize"),value:function(Y){var Ma=Y.col;Y=Y.halo;Yc._get(Object.getPrototypeOf(Ta.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:Y.target.col(Ma),halo:Y})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(Y){this.targetAxis.width+=Y}},{key:"getDelta",value:function(Y){return Y.state.dragDelta.x}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Hb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Hb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(Y){return this.targetAxis.length>Y.width?Hb.pt(5,3):Hb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Hb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Hb.pt(20,
50)}},{key:"getMinSliderPosition",value:function(){return Hb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Hb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Hb.pt(2,this.container.height+50),vertices:[Hb.pt(1,0),Hb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Hb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(Y){return Hb.pt(Y.owner.width-5,0).extent(Hb.pt(10,
40))}},{key:"getDeviderBounds",value:function(){return Hb.pt(4,15).extent(Hb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9801,end:11056})})(Hb.AxisHalo);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Ta=Gb.hasOwnProperty("CellGuide")&&"function"===typeof Gb.CellGuide?Gb.CellGuide:Gb.CellGuide=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"menuItems",value:function(){var Y=this,Ma=Hb.Icon.textAttribute("check-square-o"),gb=Hb.Icon.textAttribute("square-o");Ma[1].textStyleClasses.push("annotation");gb[1].textStyleClasses.push("annotation");gb[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",
null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?gb:Ma)),function(){Y.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ma:gb)),function(){Y.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Hb.Rectangle).sides),$jscomp.arrayFromIterable((new Hb.Rectangle).corners)).map(function(Nb){return[[Nb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(Y.cellGroup.align==Nb?Ma:gb),["  ",null]),function(){return Y.cellGroup.align=
Nb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Nb=Y.cellGroup.morph;Nb&&(Y.world().firstHand.grab(Nb),Y.world().firstHand.longClickGrab=!0,Nb.position=Hb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11058,end:12377})})(Hb.Morph);(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("LayoutHalo")&&"function"===typeof Gb.LayoutHalo?Gb.LayoutHalo:Gb.LayoutHalo=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},
{key:"properties",get:function(){return{container:{},target:{get:function(){return this.container.layout}},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Hb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12379,end:12833})})(Hb.Morph);tb=Wa("G",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Gb.GridLayoutHalo?Gb.GridLayoutHalo:Gb.GridLayoutHalo=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"previewDrop",value:function(Y){1>Y.length||(Y=
this.cellGuides.find(function(Ma){return Ma.fullContainsWorldPoint($world.firstHand.position)}),Y!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=Y)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(Y){var Ma=this;this.currentCell&&Y.whenRendered().then(function(){return Ma.currentCell.cellGroup.morph=Y})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var Y=
this.target,Ma=new Hb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Hb.Color.transparent,checked:Y.compensateOrigin}),gb=new Hb.LabeledCheckBox({label:"Resize Submorphs",fill:Hb.Color.transparent,name:"fitToCell",checked:Y.fitToCell});Hb.connect(Ma,"checked",Y,"compensateOrigin");Hb.connect(gb,"checked",Y,"fitToCell");Hb.connect(Ma,"checked",this,"alignWithTarget");return[Ma,gb]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();
this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Hb.arr.reverse(this.guides).forEach(function(Y){return Y.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var Y=this;Hb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(Ma){return Ma.cellGroup})).forEach(function(Ma){return Y.addMorph(Y.cellGuide(Ma))})}},{key:"initGuides",value:function(){this.submorphs=
[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var Y=this,Ma=this.addMorph({fill:Hb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(gb){Ma.addMorph(Y.cellGuide(gb))});this.cellGuides=Ma.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(Y){Y.isHaloItem=!0;this.guides.push(Y);return Y}},{key:"initRowGuides",value:function(){var Y=this,Ma=
this;this.addGuide(this.addMorph(new Hb.Morph({width:25,fill:Hb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Hb.pt(-5,0),alignWithTarget:function(){this.height=Ma.container.height}})));Hb.arr.range(0,this.target.rowCount-1).forEach(function(gb){Y.addMorph(new Hb.RowHalo({row:gb,halo:Y}))})}},{key:"initColumnGuides",value:function(){var Y=this,Ma=this;this.addGuide(this.addMorph(new Hb.Morph({height:25,fill:Hb.Color.gray.withA(.7),borderRadius:15,width:this.container.width,
bottomLeft:Hb.pt(0,-5),alignWithTarget:function(){this.width=Ma.container.width}})));Hb.arr.range(0,this.target.columnCount-1).forEach(function(gb){Y.addMorph(new Hb.ColumnHalo({col:gb,halo:Y}))})}},{key:"resizer",value:function(){var Y=this;return this.addGuide(new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(Ma){Y.container.resizeBy(Ma.state.dragDelta);Y.alignWithTarget()},alignWithTarget:function(){this.bottomRight=Y.extent}}))}},{key:"cellResizer",
value:function(Y,Ma){var gb=this,Nb="topLeft"==Ma?"bottomRight":"topLeft";return new Hb.Ellipse({borderWidth:1,visible:!1,borderColor:Hb.Color.black,nativeCursor:"nwse-resize",removeCell:function(oc){Y.disconnect(oc);gb.alignWithTarget()},addCell:function(oc){Y.connect(oc);gb.alignWithTarget()},start:function(){this.fixpointCell=Y[Nb];this.draggedDelta=Y.bounds().partNamed(Ma);this.debugMorph=gb.addMorph(new Hb.Morph({fill:Hb.Color.orange.withA(.5)}))},update:function(oc){var Wc=this;this.draggedDelta=
this.draggedDelta.addPt(oc);var Gc=Hb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Gc);gb.cells.forEach(function(Zd){var je=Gc.intersection(Zd.bounds()).area()/Zd.bounds().area();Y.includes(Zd)&&.1>je&&Wc.removeCell(Zd);!Y.includes(Zd)&&je>1/3&&Wc.addCell(Zd)})},onDragEnd:function(oc){this.debugMorph.remove()},onDragStart:function(oc){this.start(oc.position)},onDrag:function(oc){this.update(oc.state.dragDelta)}})}},{key:"cellGuide",value:function(Y){var Ma=
this,gb=this.cellResizer(Y,"topLeft"),Nb=this.cellResizer(Y,"bottomRight");return this.addGuide(new Hb.CellGuide({cellGroup:Y,bounds:Y.bounds(),fill:Hb.Color.transparent,borderColor:Hb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[gb,Nb],onMouseDown:function(oc){this.becomeActive()},deactivate:function(){this.borderColor=Hb.Color.orange;this.fill=Hb.Color.transparent;this.submorphs.forEach(function(oc){oc.visible=!1})},becomeActive:function(){Ma.guides.forEach(function(oc){oc.isCell&&
oc.deactivate()});this.borderColor=Hb.Color.rgbHex("#1565C0");this.fill=Hb.Color.rgbHex("#1565C0").withA(.3);Ma.addMorph(this.remove());this.submorphs.forEach(function(oc){oc.visible=!0})},startPreview:function(oc){this.fill=Hb.Color.orange.withA(.7)},stopPreview:function(oc){this.fill=Hb.Color.transparent},onDrop:function(oc){var Wc=$jscomp.makeIterator(oc.hand.grabbedMorphs).next().value;oc.hand.dropMorphsOn(Ma.container);Y.morph=Wc},alignWithTarget:function(){Y.bounds().isNonEmpty()?(this.setBounds(Y.bounds()),
gb.center=this.innerBounds().topLeft(),Nb.center=this.innerBounds().bottomRight()):(Hb.arr.remove(Ma.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.transparent},cells:{derived:!0,get:function(){return Hb.arr.flatten(this.target.col(0).items.map(function(Y){return Y.row(0).items}))}},submorphs:{after:["target"],initialize:function(){this.initialize()}}}}}],Gb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12842,end:20283})}(Hb.LayoutHalo));Hb.GridLayoutHalo=tb;Hb.GridLayoutHalo=tb;Hb.GridLayoutHalo=tb;te=function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Gb.TilingLayoutHalo?Gb.TilingLayoutHalo:Gb.TilingLayoutHalo=
function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"remove",value:function(){Yc._get(Object.getPrototypeOf(Ta.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(Y){}},{key:"removePreviews",value:function(){this.previews.forEach(function(Y){return Y.clear()})}},
{key:"previewDrop",value:function(Y){var Ma=this;0<this.previews.length||(this.previews=Y.map(function(gb){return Ma.container.addMorph({type:Hb.DropPreview,bounds:gb.bounds()})}),this.previews.forEach(function(gb){gb.step()}))}},{key:"updateSpacing",value:function(Y){this.target.spacing=Y}},{key:"updateAxis",value:function(Y){this.target.axis=Y}},{key:"updateAlign",value:function(Y){this.target.align=Y}},{key:"optionControls",value:function(){var Y=this.target,Ma=new Hb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:Y.axis,values:["row","column"]}),gb=new Hb.DropDownSelector({borderRadius:2,padding:3,selectedValue:Y.align,values:["left","center"]});Y=new Hb.NumberWidget({min:0,number:Y.spacing,padding:Hb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Hb.Color.gray,unit:"px"});Hb.connect(Y,"update",this,"updateSpacing");Hb.connect(gb,"update",this,"updateAlign");Hb.connect(Ma,"update",this,"updateAxis");var Nb={type:"label",padding:Hb.rect(0,5,5,5),fill:Hb.Color.transparent,fontColor:Hb.Color.gray.darker(),
readOnly:!0};return[[Object.assign({},Nb,{textString:"Submorph Spacing"}),Y],[Object.assign({},Nb,{textString:"Tiling Align"}),gb],[Object.assign({},Nb,{textString:"Tiling Axis"}),Ma]].map(function(oc){return{submorphs:oc,fill:null,layout:new Hb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.transparent},previews:{defaultValue:[]}}}}],Gb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20292,end:22407})}(Hb.LayoutHalo);Hb.TilingLayoutHalo=te;Hb.TilingLayoutHalo=te;Hb.TilingLayoutHalo=te;(function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("DropPreview")&&"function"===typeof Gb.DropPreview?Gb.DropPreview:Gb.DropPreview=function(Y){Y&&
Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var Y=this,Ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress)return Ma=Hb.easings.inOutQuad,gb.yield(Y.animate({opacity:.5,duration:(Y.pulseDuration-10)/2,easing:Ma}),2);if(3!=gb.nextAddress)return gb.yield(Y.animate({opacity:1,duration:(Y.pulseDuration-
10)/2,easing:Ma}),3);Y.stopped||Y.step();gb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Hb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Hb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22409,end:23245})})(Hb.Morph);te=Wa("F",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Gb.FlexLayoutHalo?Gb.FlexLayoutHalo:Gb.FlexLayoutHalo=function(Y){Y&&
Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"handleDrop",value:function(Y){}},{key:"previewDrop",value:function(Y){var Ma=this;0<this.previews.length||(this.previews=Y.map(function(gb){return Ma.container.addMorph({type:Hb.DropPreview,position:Ma.container.localize(Ma.world().firstHand.position),extent:gb.bounds().extent()})}),this.previews.forEach(function(gb){gb.step()}))}},{key:"remove",value:function(){Yc._get(Object.getPrototypeOf(Ta.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(Y){return Y.clear()})}},{key:"onDrop",value:function(Y){this.removePreviews();Y.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(Y){Y&&(this.originalExtent=this.container.extent);this.target.autoResize=Y;Y||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(Y){this.target.resizeSubmorphs=Y;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(Y){this.target.align=Y}},{key:"updateDirectionPolicy",value:function(Y){this.target.direction=Y}},{key:"updateSpacing",value:function(Y){this.target.spacing=Y}},{key:"optionControls",value:function(){var Y=this.target,Ma=Y.possibleAlignValues?{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Hb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:Y.align,values:Y.possibleAlignValues})]}:null,gb=Y.possibleDirectionValues?{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new Hb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:Y.direction,values:Y.possibleDirectionValues})]}:
null,Nb=new Hb.NumberWidget({fill:Hb.Color.white,borderWidth:1,borderRadius:4,padding:Hb.rect(5,4,0,0),borderColor:Hb.Color.gray,min:0,number:Y.spacing,unit:"px"}),oc=new Hb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Y.autoResize});Y=new Hb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Y.resizeSubmorphs});Hb.connect(Nb,"update",this,"updateSpacing");Hb.connect(oc,
"checked",this,"updateAutoResizePolicy");Hb.connect(Y,"checked",this,"updateResizeSubmorphsPolicy");Ma&&Hb.connect(Ma.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");gb&&Hb.connect(gb.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[oc,Y].concat($jscomp.arrayFromIterable([Ma,gb].filter(Boolean)),[{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Hb.Color.gray.darker(),padding:Hb.rect(0,5,5,5)},Nb]}])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Hb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:23254,end:27441})}(Hb.LayoutHalo));Hb.FlexLayoutHalo=te;Hb.FlexLayoutHalo=te;Hb.FlexLayoutHalo=te;Tb=Wa("c",function(Ob){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ta=Gb.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof Gb.ProportionalLayoutHalo?Gb.ProportionalLayoutHalo:Gb.ProportionalLayoutHalo=function(Y){Y&&Y[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(Ta,Ob,[{key:"handleDrop",
value:function(Y){}},{key:"onDrop",value:function(Y){Y.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(Y){var Ma={};this.target.changeSettingsFor(Y.submorph,(Ma[Y.axis]=Y.policy,Ma),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Y,Ma){var gb=this;Y.stop();var Nb=this.target.settingsFor(Ma);Ma="";for(var oc in Nb)Ma+=oc+":"+Nb[oc]+" ";var Wc=Hb.morph({type:"label",
value:Ma,isLayoutable:!1});Wc.wantsToBeDroppedOn=function(Gc){return gb.target.layoutableSubmorphs.includes(Gc)};Wc.onBeingDroppedOn=function(Gc,Zd){Wc.remove();if(Gc=gb.target.layoutableSubmorphs.includes(Zd)?Zd:Y.world.morphsContainingPoint(Y.hand.position).find(function(je){return gb.target.layoutableSubmorphs.includes(je)}))gb.updateSubmorphProportionalLayoutSettings({policy:Nb.x,axis:"x",submorph:Gc}),gb.updateSubmorphProportionalLayoutSettings({policy:Nb.y,axis:"y",submorph:Gc}),Gc.show(),$world.setStatusMessage("layout settings applied")};
Y.hand.grab(Wc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Y=this,Ma,gb,Nb,oc,Wc,Gc,Zd,je,Bf,lf,bf,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pf){switch(pf.nextAddress){case 1:return Ma=Y.target.layoutableSubmorphs,Y.env.eventDispatcher.isKeyPressed("Shift")?(Nb=Ma.map(function(nf){return{isListItem:!0,string:String(nf),value:nf}}),pf.yield($world.listPrompt("Select morph",Nb,{requester:Y,onSelection:function(nf){return nf.show()}}),5)):pf.yield(Hb.InteractiveMorphSelector.selectMorph(Y.world(),
Y,function(nf){return Ma.includes(nf)}),4);case 4:gb=pf.yieldResult;pf.jumpTo(3);break;case 5:oc=pf.yieldResult,Wc=$jscomp.makeIterator(oc.selected),gb=Wc.next().value;case 3:if(!gb)return pf.return();Gc=Y.state.popover.get("controlContainer");Zd=Gc.getAllNamed(/submorph config/);je=["move","resize","scale","fixed"];Bf=Y.target.settingsFor(gb);Zd.length||(Gc.submorphs=[].concat($jscomp.arrayFromIterable(Gc.submorphs),[{name:"submorph config X-Axis policy",position:Hb.pt(0,Y.height),fill:Hb.Color.transparent,
layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Hb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Bf.x,values:je})]},{name:"submorph config Y-Axis policy",position:Hb.pt(0,Y.height),fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Hb.DropDownSelector({name:"y-axis policy selector",
borderRadius:2,padding:3,selectedValue:Bf.y,values:je})]},Hb.morph({position:Hb.pt(0,Y.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));lf=Gc.getSubmorphNamed("x-axis policy selector");bf=Gc.getSubmorphNamed("y-axis policy selector");z=Gc.getSubmorphNamed("dragme");Hb.disconnect(lf,"selectedValue",Y,"updateSubmorphProportionalLayoutSettings");Hb.disconnect(bf,"selectedValue",Y,"updateSubmorphProportionalLayoutSettings");lf.selectedValue=Bf.x;bf.selectedValue=Bf.y;Hb.connect(z,
"onDragStart",Y,"onSubmorphSettingsDragStart",{updater:function(nf,De){return nf(De,gb)},varMapping:{submorph:gb}});Hb.connect(lf,"selectedValue",Y,"updateSubmorphProportionalLayoutSettings",{converter:function(nf){return{policy:nf,axis:"x",submorph:gb}},varMapping:{submorph:gb}});Hb.connect(bf,"selectedValue",Y,"updateSubmorphProportionalLayoutSettings",{converter:function(nf){return{policy:nf,axis:"y",submorph:gb}},varMapping:{submorph:gb}});pf.jumpToEnd()}})}},{key:"optionControls",value:function(Y){this.state.popover=
Y;var Ma=this.target;Y=new Hb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Ma.xAxisEnabled});Ma=new Hb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Ma.yAxisEnabled});var gb=new Hb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Hb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Hb.connect(Y,"checked",this,"updateXAxisEnabled");
Hb.connect(Ma,"checked",this,"updateYAxisEnabled");Hb.connect(gb,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[gb]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Hb.Color.transparent}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27450,end:33182})}(Hb.LayoutHalo));Hb.ProportionalLayoutHalo=Tb;Hb.ProportionalLayoutHalo=Tb;Hb.ProportionalLayoutHalo=Tb;var Be=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Be.Halo=Ac;Be.MorphHighlighter=wb;Be.InteractiveMorphSelector=ud;Be.StatusMessage=Da;Be.StatusMessageForMorph=Pa;Be.show=Ra;Be.showConnector=Ga;Be.ProportionalLayoutHalo=Tb;Be.GridLayoutHalo=tb;Be.FlexLayoutHalo=te;Be.showAndSnapToGuides=Xb;
Be.removeSnapToGuidesOf=ec;Be.StatusMessage=Da;Be.StatusMessage=Da;Be.StatusMessageForMorph=Pa;Be.StatusMessageForMorph=Pa;Be.show=Ra;Be.show=Ra;Be.showConnector=Ga;Be.showConnector=Ga;Be.Halo=Ac;Be.Halo=Ac;Be.MorphHighlighter=wb;Be.MorphHighlighter=wb;Be.InteractiveMorphSelector=ud;Be.InteractiveMorphSelector=ud;Be.ProportionalLayoutHalo=Tb;Be.ProportionalLayoutHalo=Tb;Be.GridLayoutHalo=tb;Be.GridLayoutHalo=tb;Be.FlexLayoutHalo=te;Be.FlexLayoutHalo=te;Be.showAndSnapToGuides=Xb;Be.showAndSnapToGuides=
Xb;Be.removeSnapToGuidesOf=ec;Be.removeSnapToGuidesOf=ec;Da=Object.freeze({__proto__:null,StatusMessage:Da,StatusMessageForMorph:Pa,show:Ra,showConnector:Ga,Halo:Ac,MorphHighlighter:wb,InteractiveMorphSelector:ud,ProportionalLayoutHalo:Tb,GridLayoutHalo:tb,FlexLayoutHalo:te,showAndSnapToGuides:Xb,removeSnapToGuidesOf:ec,SvgStyleHalo:void 0});Wa("i",Da);Wa({_:void 0,d:void 0})}}});