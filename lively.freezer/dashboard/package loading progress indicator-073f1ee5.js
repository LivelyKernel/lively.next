System.register(["./__root_module__-896eff71.js","kld-intersections"],function(){var $a,Vb,jc,Wc,wc,Ud,Kd,he,xd;return{setters:[function(gd){$a=gd.M;Vb=gd.s;jc=gd.e;Wc=gd.p;wc=gd.n;Ud=gd.P;Kd=gd.a;he=gd.f;xd=gd.i},function(){}],execute:function(){var gd=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");gd.Morph=$a;gd.stringToEasing=Vb;gd.easings=jc;gd.pt=Wc;gd.num=wc;gd.Path=Ud;gd.promise=Kd;gd.fun=he;var Ld=function(Pd){var af=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
bf=af.hasOwnProperty("ModuleProgress")&&"function"===typeof af.ModuleProgress?af.ModuleProgress:af.ModuleProgress=function(Ve){Ve&&Ve[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xd(bf,Pd,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&gd.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var Ve=
this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(Ve.map(function(Ad){return[Ad,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(Ad){Ad._cachedTextBounds=null;Ad.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var Ve=this.get("progress path"),Ad=gd.stringToEasing(gd.easings.inOutExpo)(gd.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);Ve.width=gd.num.interpolate(Ad,this._lastWidth,this._currentProgress)}}},
{key:"fastLoadTest",value:function(){var Ve=this,Ad,xe,qc,td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(be){1==be.nextAddress&&(Ve.reset(),Ad="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),xe=$jscomp.makeIterator(Ad),qc=xe.next());if(3!=be.nextAddress){if(qc.done)return be.jumpTo(0);td=qc.value;Ve.finishPackage({packageName:td,loaded:!0});return be.yield(gd.promise.delay(200),3)}qc=xe.next();
return be.jumpTo(2)})}},{key:"finishPackage",value:function(Ve){var Ad=this,xe=Ve.frozen,qc=Ve.loaded;Ve="stage "+Ve.packageName.replace("lively.","");Ve=this.get(Ve);xe&&this.stages.set(Ve,"frozen");qc&&this.stages.set(Ve,"loaded");gd.fun.debounceNamed("update progress",200,function(){Ad.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var Ve=this,Ad=this.getSubmorphNamed("progress path"),xe=this.getAllNamed(/stage/),qc=xe[0];xe.forEach(function(td){var be=
td.get("checkmark"),Bd=td.get("frozen indicator"),pe=td.get("icon");td=Ve.stages.get(td);if("not loaded"!=td){qc=be;if("loaded"==td){if(be.visible)return;be.animate({duration:300,visible:!0})}if("frozen"==td){if(Bd.visible)return;Bd.animate({duration:300,visible:!0})}pe.opacity=1}else be.visible=!1,Bd.visible=!1,pe.opacity=.2});xe=this.localizePointFrom(gd.pt(-20,0),qc).x;xe=Math.max(20,xe-Ad.left);Ad.visible=20==xe?!1:!0;this._lastWidth=Ad.width;this._timeStamp=Date.now();this._currentProgress=xe}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var Ve=this;this.whenRendered().then(function(){Ve.reset()})}}}}}],af,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},
{start:192,end:3586})}(gd.Morph);Ld=gd.ModuleProgress;gd.default=Ld}}});System.register("3",["./__root_module__-896eff71.js","kld-intersections","./index-28129ea8.js","./index-4b5fc10c.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});